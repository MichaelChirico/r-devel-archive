From |u|@@puerto@@r @end|ng |rom gm@||@com  Sat May  1 14:27:01 2021
From: |u|@@puerto@@r @end|ng |rom gm@||@com (Luis Puerto)
Date: Sat, 1 May 2021 14:27:01 +0200
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
Message-ID: <47463C2E-FEB3-4FEA-A316-F1EBF8657ACA@gmail.com>

Hey! 

I observe the same problem and on R Studio there is no problem at all. 

In my case I have a MBP 2019 13" 

sessionInfo() 

R version 4.0.5 (2021-03-31)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] compiler_4.0.5

Cheers!
Luis

> On 30 Apr 2021, at 17:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> 
> Dear all,
> 
> Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).
> 
> 1. Start fresh R-gui
> 
> 2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.
> 
> # m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
> # m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
> # m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
> # m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
> # m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
> # m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
> # m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
> # m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
> # m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
> # m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))
> 
> 3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?
> 
> Any help is greatly appreciated.
> Yan
> 
> Here is the sessionInfo()
> 
> ******
> R version 4.0.5 (2021-03-31)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.5
> 
> 
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ALPEROVYCH @end|ng |rom em-|yon@com  Sat May  1 21:01:26 2021
From: ALPEROVYCH @end|ng |rom em-|yon@com (ALPEROVYCH Yan)
Date: Sat, 1 May 2021 19:01:26 +0000
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
Message-ID: <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>

Thank you Simon,

Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.

2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup

Since they are usually random, I will log them for some time, and report back.

Yan

On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org>> wrote:

Yan,

Thank you for the report, comments inline.


On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:

Dear all,

Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).


There are no known issues in R 4.0.5 so if you see any please report them.


1. Start fresh R-gui

2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.

# m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
# m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
# m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
# m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
# m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
# m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
# m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
# m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
# m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
# m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))

3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?


Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.

Thanks,
Simon



Any help is greatly appreciated.
Yan

Here is the sessionInfo()

******
R version 4.0.5 (2021-03-31)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.0.5


Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

	[[alternative HTML version deleted]]


From hp@ge@@on@g|thub @end|ng |rom gm@||@com  Sun May  2 03:37:03 2021
From: hp@ge@@on@g|thub @end|ng |rom gm@||@com (=?UTF-8?B?SGVydsOpIFBhZ8Oocw==?=)
Date: Sat, 1 May 2021 18:37:03 -0700
Subject: [R-SIG-Mac] Mac binary of rJava for R 4.1?
Message-ID: <ba7a8a2a-00ed-41a9-3da9-a016876b31a5@gmail.com>

Hi there,

Something strange has been going on with the PACKAGES index file of the 
macosx binaries for 4.1 for the last several days: rJava is present in 
the index despite the package binary not being in the repo.

See index file: https://cran.r-project.org/bin/macosx/contrib/4.1/PACKAGES

The index contains an entry for rJava. But no rJava binary here: 
https://cran.r-project.org/bin/macosx/contrib/4.1/

That being said, when can we expect to see a Mac binary of rJava for R 4.1?

Thanks,
H.

-- 
Herv? Pag?s

Bioconductor Core Team
hpages.on.github at gmail.com


From pd@|gd @end|ng |rom gm@||@com  Sun May  2 11:03:01 2021
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Sun, 2 May 2021 11:03:01 +0200
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
Message-ID: <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>

2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either. (I do see the "...warmup" thing, though.)

- Peter D.

> On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> 
> Thank you Simon,
> 
> Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.
> 
> 2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup
> 
> Since they are usually random, I will log them for some time, and report back.
> 
> Yan
> 
> On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org>> wrote:
> 
> Yan,
> 
> Thank you for the report, comments inline.
> 
> 
> On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
> 
> Dear all,
> 
> Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).
> 
> 
> There are no known issues in R 4.0.5 so if you see any please report them.
> 
> 
> 1. Start fresh R-gui
> 
> 2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.
> 
> # m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
> # m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
> # m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
> # m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
> # m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
> # m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
> # m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
> # m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
> # m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
> # m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))
> 
> 3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?
> 
> 
> Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.
> 
> Thanks,
> Simon
> 
> 
> 
> Any help is greatly appreciated.
> Yan
> 
> Here is the sessionInfo()
> 
> ******
> R version 4.0.5 (2021-03-31)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.5
> 
> 
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ALPEROVYCH @end|ng |rom em-|yon@com  Mon May  3 17:06:04 2021
From: ALPEROVYCH @end|ng |rom em-|yon@com (ALPEROVYCH Yan)
Date: Mon, 3 May 2021 15:06:04 +0000
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
 <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
Message-ID: <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>

Dear Peter, Simon,

Since I am not that of an expert in programming, is there any way to trace what happens 'under the hood' of the gui to see what exactly slows down the rendering of output on my end?

On the warnings, some more came today. How that happened and the text that came out are below.

Thank you for your help,
Yan

I looked at the Preferences -> Editor (once the window popped up, I clicked on the Editor with a mouse and the error came).
...
2021-05-03 16:50:36.184 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd104c17b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:50:36.186 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd09dde780>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
?

In another instance, hitting cmd-n (new native editor window) gave me this:
...
2021-05-03 16:59:03.469 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075a9b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:03.471 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075c140>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:22.225 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270c2e0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:22.226 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270d070>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
?

When in native editor, I hit cmd-w (popping the save file request) gave me this:
...
2021-05-03 16:59:24.024 R[73442:2450140] Warning: Expected min height of view: (<NSButton: 0x7ffd1271c7a0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
...


On May 2, 2021, at 11:03 AM, peter dalgaard <pdalgd at gmail.com<mailto:pdalgd at gmail.com>> wrote:

2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either. (I do see the "...warmup" thing, though.)

- Peter D.

On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:

Thank you Simon,

Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.

2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup

Since they are usually random, I will log them for some time, and report back.

Yan

On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org><mailto:simon.urbanek at R-project.org>> wrote:

Yan,

Thank you for the report, comments inline.


On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:

Dear all,

Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).


There are no known issues in R 4.0.5 so if you see any please report them.


1. Start fresh R-gui

2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.

# m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
# m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
# m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
# m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
# m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
# m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
# m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
# m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
# m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
# m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))

3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?


Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.

Thanks,
Simon



Any help is greatly appreciated.
Yan

Here is the sessionInfo()

******
R version 4.0.5 (2021-03-31)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.0.5


Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk<mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com<mailto:PDalgd at gmail.com>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

	[[alternative HTML version deleted]]


From pbw @end|ng |rom pbw@|d@@u  Tue May  4 02:29:40 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Tue, 4 May 2021 10:29:40 +1000
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
 <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
 <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>
Message-ID: <005D358D-E810-4C38-AC6E-6656A20BDD3F@pbw.id.au>

Is everyone running the same version of Big Sur?

?
Peter West
pbw at ehealth.id.au
?I am the vine; you are the branches.?

> On 4 May 2021, at 1:06 am, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> 
> Dear Peter, Simon,
> 
> Since I am not that of an expert in programming, is there any way to trace what happens 'under the hood' of the gui to see what exactly slows down the rendering of output on my end?
> 
> On the warnings, some more came today. How that happened and the text that came out are below.
> 
> Thank you for your help,
> Yan
> 
> I looked at the Preferences -> Editor (once the window popped up, I clicked on the Editor with a mouse and the error came).
> ...
> 2021-05-03 16:50:36.184 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd104c17b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> 2021-05-03 16:50:36.186 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd09dde780>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> ?
> 
> In another instance, hitting cmd-n (new native editor window) gave me this:
> ...
> 2021-05-03 16:59:03.469 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075a9b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> 2021-05-03 16:59:03.471 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075c140>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> 2021-05-03 16:59:22.225 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270c2e0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> 2021-05-03 16:59:22.226 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270d070>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> ?
> 
> When in native editor, I hit cmd-w (popping the save file request) gave me this:
> ...
> 2021-05-03 16:59:24.024 R[73442:2450140] Warning: Expected min height of view: (<NSButton: 0x7ffd1271c7a0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> ...
> 
> 
> On May 2, 2021, at 11:03 AM, peter dalgaard <pdalgd at gmail.com<mailto:pdalgd at gmail.com>> wrote:
> 
> 2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either. (I do see the "...warmup" thing, though.)
> 
> - Peter D.
> 
> On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
> 
> Thank you Simon,
> 
> Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.
> 
> 2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup
> 
> Since they are usually random, I will log them for some time, and report back.
> 
> Yan
> 
> On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org><mailto:simon.urbanek at R-project.org>> wrote:
> 
> Yan,
> 
> Thank you for the report, comments inline.
> 
> 
> On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:
> 
> Dear all,
> 
> Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).
> 
> 
> There are no known issues in R 4.0.5 so if you see any please report them.
> 
> 
> 1. Start fresh R-gui
> 
> 2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.
> 
> # m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
> # m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
> # m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
> # m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
> # m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
> # m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
> # m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
> # m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
> # m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
> # m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))
> 
> 3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?
> 
> 
> Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.
> 
> Thanks,
> Simon
> 
> 
> 
> Any help is greatly appreciated.
> Yan
> 
> Here is the sessionInfo()
> 
> ******
> R version 4.0.5 (2021-03-31)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.5
> 
> 
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk<mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com<mailto:PDalgd at gmail.com>
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


	[[alternative HTML version deleted]]


From ALPEROVYCH @end|ng |rom em-|yon@com  Tue May  4 09:10:06 2021
From: ALPEROVYCH @end|ng |rom em-|yon@com (ALPEROVYCH Yan)
Date: Tue, 4 May 2021 07:10:06 +0000
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <DF4A66CE-ACC6-415C-804E-533031520726@R-project.org>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
 <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
 <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>
 <DF4A66CE-ACC6-415C-804E-533031520726@R-project.org>
Message-ID: <BD8A84F5-9414-4016-B8A8-FF3B62E7CA92@em-lyon.com>

Simon,

I sampled the process of my test (the slowdown). I was able to do it without downloading the "Debug" version. There are two files attached.
1. The first one (run at 8:58:14 am) is the replication of my test (the slowdown) using the external editor
2. The second (run at 9:05:09 am) is the replication of my test using the in-built editor

While doing the second sampling R also popped the red warnings (if that is useful).

I am also answering Peter?s question: my version of Big Sur is 11.3.

Let me know what else I can do to help.
Yan


On May 4, 2021, at 5:53 AM, Simon Urbanek <Simon.Urbanek at r-project.org<mailto:Simon.Urbanek at r-project.org>> wrote:

Yan,

thanks for the reports. I cannot reproduce the slow-down, either (Mac mini M1, Big Sur 11.3).

However, you can help by sampling the R process and sending the sample to me. You can do that as follows:

1) open R.app
2) open Terminal (under Applications -> Utilities)
3) in Terminal type:

sample R 30

4) switch to R and perform your test. You have 30 seconds (that's the number above which specifies how long the sampler will run) to do it. In Terminal it will show the sampler output -in the beginning it will also tell you the location of the text file - it's typically /tmp/R_*.sample.txt - send that file to me.

It may not allow you to debug the released version of the GUI, so you may need to download the "Debug" version of the GUI (scroll down) from

https://mac.R-project.org<https://mac.r-project.org/>

You should pick the
Mac OS X GUI rev.XXX for R 4.0.x high-sierra-Release.dmg
download if you have R 4.0.x. You don't need to install the GUI, you can run it directly from the image so it won't affect your installed version.

Thanks,
Simon

PS: you may need to install Xcode command line tools if you didn't already:
sudo xcode-select --install


On 4/05/2021, at 3:06 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:

Dear Peter, Simon,

Since I am not that of an expert in programming, is there any way to trace what happens 'under the hood' of the gui to see what exactly slows down the rendering of output on my end?

On the warnings, some more came today. How that happened and the text that came out are below.

Thank you for your help,
Yan

I looked at the Preferences -> Editor (once the window popped up, I clicked on the Editor with a mouse and the error came).
...
2021-05-03 16:50:36.184 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd104c17b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:50:36.186 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd09dde780>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
?

In another instance, hitting cmd-n (new native editor window) gave me this:
...
2021-05-03 16:59:03.469 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075a9b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:03.471 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075c140>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:22.225 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270c2e0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:22.226 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270d070>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
?

When in native editor, I hit cmd-w (popping the save file request) gave me this:
...
2021-05-03 16:59:24.024 R[73442:2450140] Warning: Expected min height of view: (<NSButton: 0x7ffd1271c7a0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
...


On May 2, 2021, at 11:03 AM, peter dalgaard <pdalgd at gmail.com<mailto:pdalgd at gmail.com><mailto:pdalgd at gmail.com>> wrote:

2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either. (I do see the "...warmup" thing, though.)

- Peter D.

On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:

Thank you Simon,

Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.

2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup

Since they are usually random, I will log them for some time, and report back.

Yan

On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org><mailto:simon.urbanek at R-project.org><mailto:simon.urbanek at R-project.org>> wrote:

Yan,

Thank you for the report, comments inline.


On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:

Dear all,

Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).


There are no known issues in R 4.0.5 so if you see any please report them.


1. Start fresh R-gui

2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.

# m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
# m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
# m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
# m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
# m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
# m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
# m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
# m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
# m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
# m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))

3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?


Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.

Thanks,
Simon



Any help is greatly appreciated.
Yan

Here is the sessionInfo()

******
R version 4.0.5 (2021-03-31)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.0.5


Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk<mailto:pd.mes at cbs.dk><mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com<mailto:PDalgd at gmail.com><mailto:PDalgd at gmail.com>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210504/d949ba6d/attachment-0001.html>

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: R_2021-05-04_085814_nXVv.sample.txt
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210504/d949ba6d/attachment-0002.txt>

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: R_2021-05-04_090509_kVEq.sample.txt
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210504/d949ba6d/attachment-0003.txt>

From br@ndon@hurr @end|ng |rom gm@||@com  Thu May  6 01:21:59 2021
From: br@ndon@hurr @end|ng |rom gm@||@com (Brandon Hurr)
Date: Wed, 5 May 2021 19:21:59 -0400
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <BD8A84F5-9414-4016-B8A8-FF3B62E7CA92@em-lyon.com>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
 <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
 <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>
 <DF4A66CE-ACC6-415C-804E-533031520726@R-project.org>
 <BD8A84F5-9414-4016-B8A8-FF3B62E7CA92@em-lyon.com>
Message-ID: <CAG2OMvvDCBhU35-E8ycCLO1caps+m4P7U9pbOTRT2tN7merkNg@mail.gmail.com>

Yan

It?s my understanding that it is important to use the debug version as it
throws a lot more information for Simon et al into your logs to help solve
the issue.

Brandon



On Wed, May 5, 2021 at 18:56 ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:

> Simon,
>
> I sampled the process of my test (the slowdown). I was able to do it
> without downloading the "Debug" version. There are two files attached.
> 1. The first one (run at 8:58:14 am) is the replication of my test (the
> slowdown) using the external editor
> 2. The second (run at 9:05:09 am) is the replication of my test using the
> in-built editor
>
> While doing the second sampling R also popped the red warnings (if that is
> useful).
>
> I am also answering Peter?s question: my version of Big Sur is 11.3.
>
> Let me know what else I can do to help.
> Yan
>
>
> On May 4, 2021, at 5:53 AM, Simon Urbanek <Simon.Urbanek at r-project.org>
> wrote:
>
> Yan,
>
> thanks for the reports. I cannot reproduce the slow-down, either (Mac mini
> M1, Big Sur 11.3).
>
> However, you can help by sampling the R process and sending the sample to
> me. You can do that as follows:
>
> 1) open R.app
> 2) open Terminal (under Applications -> Utilities)
> 3) in Terminal type:
>
> sample R 30
>
> 4) switch to R and perform your test. You have 30 seconds (that's the
> number above which specifies how long the sampler will run) to do it. In
> Terminal it will show the sampler output -in the beginning it will also
> tell you the location of the text file - it's typically /tmp/R_*.sample.txt
> - send that file to me.
>
> It may not allow you to debug the released version of the GUI, so you may
> need to download the "Debug" version of the GUI (scroll down) from
>
> https://mac.R-project.org <https://mac.r-project.org/>
>
> You should pick the
> Mac OS X GUI rev.XXX for R 4.0.x high-sierra-Release.dmg
> download if you have R 4.0.x. You don't need to install the GUI, you can
> run it directly from the image so it won't affect your installed version.
>
> Thanks,
> Simon
>
> PS: you may need to install Xcode command line tools if you didn't already:
> sudo xcode-select --install
>
>
>
> On 4/05/2021, at 3:06 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>
> Dear Peter, Simon,
>
> Since I am not that of an expert in programming, is there any way to trace
> what happens 'under the hood' of the gui to see what exactly slows down the
> rendering of output on my end?
>
> On the warnings, some more came today. How that happened and the text that
> came out are below.
>
> Thank you for your help,
> Yan
>
> I looked at the Preferences -> Editor (once the window popped up, I
> clicked on the Editor with a mouse and the error came).
> ...
> 2021-05-03 16:50:36.184 R[73442:2450140] Warning: Expected min height of
> view: (<NSPopoverTouchBarItemButton: 0x7ffd104c17b0>) to be less than or
> equal to 30 but got a height of 32.000000. This error will be logged once
> per view in violation.
> 2021-05-03 16:50:36.186 R[73442:2450140] Warning: Expected min height of
> view: (<NSPopoverTouchBarItemButton: 0x7ffd09dde780>) to be less than or
> equal to 30 but got a height of 32.000000. This error will be logged once
> per view in violation.
> ?
>
> In another instance, hitting cmd-n (new native editor window) gave me this:
> ...
> 2021-05-03 16:59:03.469 R[73442:2450140] Warning: Expected min height of
> view: (<NSPopoverTouchBarItemButton: 0x7ffd1075a9b0>) to be less than or
> equal to 30 but got a height of 32.000000. This error will be logged once
> per view in violation.
> 2021-05-03 16:59:03.471 R[73442:2450140] Warning: Expected min height of
> view: (<NSPopoverTouchBarItemButton: 0x7ffd1075c140>) to be less than or
> equal to 30 but got a height of 32.000000. This error will be logged once
> per view in violation.
> 2021-05-03 16:59:22.225 R[73442:2450140] Warning: Expected min height of
> view: (<NSPopoverTouchBarItemButton: 0x7ffd1270c2e0>) to be less than or
> equal to 30 but got a height of 32.000000. This error will be logged once
> per view in violation.
> 2021-05-03 16:59:22.226 R[73442:2450140] Warning: Expected min height of
> view: (<NSPopoverTouchBarItemButton: 0x7ffd1270d070>) to be less than or
> equal to 30 but got a height of 32.000000. This error will be logged once
> per view in violation.
> ?
>
> When in native editor, I hit cmd-w (popping the save file request) gave me
> this:
> ...
> 2021-05-03 16:59:24.024 R[73442:2450140] Warning: Expected min height of
> view: (<NSButton: 0x7ffd1271c7a0>) to be less than or equal to 30 but got a
> height of 32.000000. This error will be logged once per view in violation.
> ...
>
>
> On May 2, 2021, at 11:03 AM, peter dalgaard <pdalgd at gmail.com<
> mailto:pdalgd at gmail.com <pdalgd at gmail.com>>> wrote:
>
> 2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either.
> (I do see the "...warmup" thing, though.)
>
> - Peter D.
>
> On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<
> mailto:ALPEROVYCH at em-lyon.com <ALPEROVYCH at em-lyon.com>>> wrote:
>
> Thank you Simon,
>
> Regarding the "NS..." warnings, the following came just now when I closed
> the plot window (after a ggplot) with a mouse.
>
> 2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted
> warmup
>
> Since they are usually random, I will log them for some time, and report
> back.
>
> Yan
>
> On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<
> mailto:simon.urbanek at R-project.org <simon.urbanek at R-project.org>><
> mailto:simon.urbanek at R-project.org <simon.urbanek at R-project.org>>> wrote:
>
> Yan,
>
> Thank you for the report, comments inline.
>
>
> On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<
> mailto:ALPEROVYCH at em-lyon.com <ALPEROVYCH at em-lyon.com>><
> mailto:ALPEROVYCH at em-lyon.com <ALPEROVYCH at em-lyon.com>>> wrote:
>
> Dear all,
>
> Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups,
> etc. and similar issues reported elsewhere here I?ve noted the slowdown of
> R console with more and more output. Here is what I do to reliably
> reproduced it on my machine - MacBook Pro 2017 with Touch Bar
> (sessionInfo() is below).
>
>
> There are no known issues in R 4.0.5 so if you see any please report them.
>
>
> 1. Start fresh R-gui
>
> 2. Paste the following text in the editor. Note that lines are commented,
> this is enough to show the problem. It obvisouly gets worse if R has to
> evaluate.
>
> # m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
> # m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
> # m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
> # m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
> # m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
> # m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
> # m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
> # m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
> # m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
> # m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))
>
> 3. Execute as block once - the output appears almost immediately. Execute
> the second time - the slight delay is already noticeable. Continue to 3-4
> time and the delay between the Cmd+Enter and the output is now up to 3-4
> seconds and occasional beachball?
>
>
> Thanks, I only have Catalina here and it does not exhibit that behaviour,
> the execution is always immediate. I'll try on the M1 Big Sur machine on
> Monday.
>
> Thanks,
> Simon
>
>
>
> Any help is greatly appreciated.
> Yan
>
> Here is the sessionInfo()
>
> ******
> R version 4.0.5 (2021-03-31)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
>
> Matrix products: default
> BLAS:
>   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_4.0.5
>
>
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont
> confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle
> ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le
> retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message
> sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de
> l?institution ou les entit?s affili?es dont d?pend l?auteur. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autoris?e de ce message et des attachements qu'il contient sont strictement
> interdits ?. ?This email and any files transmitted with it are confidential
> and intended solely for the use of the individual or entity to whom they
> are addressed. If you have received this email in error please return it to
> the sender. The ideas and views expressed in this email are solely those of
> its author, and do not necessarily represent the views of the institution
> or company the author is dependent from. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org
> <R-SIG-Mac at r-project.org>><mailto:R-SIG-Mac at r-project.org
> <R-SIG-Mac at r-project.org>>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont
> confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle
> ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le
> retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message
> sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de
> l?institution ou les entit?s affili?es dont d?pend l?auteur. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autoris?e de ce message et des attachements qu'il contient sont strictement
> interdits ?. ?This email and any files transmitted with it are confidential
> and intended solely for the use of the individual or entity to whom they
> are addressed. If you have received this email in error please return it to
> the sender. The ideas and views expressed in this email are solely those of
> its author, and do not necessarily represent the views of the institution
> or company the author is dependent from. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> <https://www.google.com/maps/search/Solbjerg+Plads+3,+2000+Frederiksberg,+Denmark?entry=gmail&source=g>
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk<mailto:pd.mes at cbs.dk <pd.mes at cbs.dk>>  Priv:
> PDalgd at gmail.com<mailto:PDalgd at gmail.com <PDalgd at gmail.com>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org
> <R-SIG-Mac at r-project.org>>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont
> confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle
> ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le
> retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message
> sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de
> l?institution ou les entit?s affili?es dont d?pend l?auteur. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autoris?e de ce message et des attachements qu'il contient sont strictement
> interdits ?. ?This email and any files transmitted with it are confidential
> and intended solely for the use of the individual or entity to whom they
> are addressed. If you have received this email in error please return it to
> the sender. The ideas and views expressed in this email are solely those of
> its author, and do not necessarily represent the views of the institution
> or company the author is dependent from. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont
> confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle
> ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le
> retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message
> sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de
> l?institution ou les entit?s affili?es dont d?pend l?auteur. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autoris?e de ce message et des attachements qu'il contient sont strictement
> interdits ?. ?This email and any files transmitted with it are confidential
> and intended solely for the use of the individual or entity to whom they
> are addressed. If you have received this email in error please return it to
> the sender. The ideas and views expressed in this email are solely those of
> its author, and do not necessarily represent the views of the institution
> or company the author is dependent from. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From ALPEROVYCH @end|ng |rom em-|yon@com  Thu May  6 16:37:21 2021
From: ALPEROVYCH @end|ng |rom em-|yon@com (ALPEROVYCH Yan)
Date: Thu, 6 May 2021 14:37:21 +0000
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <A126D854-275C-4E43-83F6-06F53FBA53D1@R-project.org>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
 <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
 <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>
 <DF4A66CE-ACC6-415C-804E-533031520726@R-project.org>
 <BD8A84F5-9414-4016-B8A8-FF3B62E7CA92@em-lyon.com>
 <A126D854-275C-4E43-83F6-06F53FBA53D1@R-project.org>
Message-ID: <6728F5C3-4642-4EB4-A827-FC34925C37B4@em-lyon.com>

Thank you Simon,

Brandon suggested to use the debug version of the R-gui, but you seem to be ok with what I sent. Please let me know if you also want the sampler files using the the debug version.

Also, if you need me to test the fixes / updates, please don?t hesitate.

Yan


On May 6, 2021, at 4:30 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:

Yan,

thank you for the sampler files!

From cursory glance the issue seems to be the touch bar, an amazing amount of time is spent in the Apple's touchbar API (almost all of it is in some way related to [NSTextView(NSTextView_TouchBar_API) updateTextTouchBarItems]). That also explains why I was not able to reproduce it, because I don't have a Mac with touch bar and Big Sur. I don't know what is available in the settings, but you may want to see if you can adjust your touch bar system preferences (if I recall there are different options for the touch bar) - the R GUI doesn't use the touch bar at all, so the issue is entirely at the system level. I will look is there is anything we can do to block the touch bar API on our end or otherwise deal with it by have R explicitly handle the touch bar.

Thanks,
Simon



> On 4/05/2021, at 7:10 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>
> Simon,
>
> I sampled the process of my test (the slowdown). I was able to do it without downloading the "Debug" version. There are two files attached.
> 1. The first one (run at 8:58:14 am) is the replication of my test (the slowdown) using the external editor
> 2. The second (run at 9:05:09 am) is the replication of my test using the in-built editor
>
> While doing the second sampling R also popped the red warnings (if that is useful).
>
> I am also answering Peter?s question: my version of Big Sur is 11.3.
>
> Let me know what else I can do to help.
> Yan
>
>
> On May 4, 2021, at 5:53 AM, Simon Urbanek <Simon.Urbanek at r-project.org> wrote:
>
> Yan,
>
> thanks for the reports. I cannot reproduce the slow-down, either (Mac mini M1, Big Sur 11.3).
>
> However, you can help by sampling the R process and sending the sample to me. You can do that as follows:
>
> 1) open R.app
> 2) open Terminal (under Applications -> Utilities)
> 3) in Terminal type:
>
> sample R 30
>
> 4) switch to R and perform your test. You have 30 seconds (that's the number above which specifies how long the sampler will run) to do it. In Terminal it will show the sampler output -in the beginning it will also tell you the location of the text file - it's typically /tmp/R_*.sample.txt - send that file to me.
>
> It may not allow you to debug the released version of the GUI, so you may need to download the "Debug" version of the GUI (scroll down) from
>
> https://mac.R-project.org
>
> You should pick the
> Mac OS X GUI rev.XXX for R 4.0.x
> high-sierra-Release.dmg
> download if you have R 4.0.x. You don't need to install the GUI, you can run it directly from the image so it won't affect your installed version.
>
> Thanks,
> Simon
>
> PS: you may need to install Xcode command line tools if you didn't already:
> sudo xcode-select --install
>
>
>> On 4/05/2021, at 3:06 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>>
>> Dear Peter, Simon,
>>
>> Since I am not that of an expert in programming, is there any way to trace what happens 'under the hood' of the gui to see what exactly slows down the rendering of output on my end?
>>
>> On the warnings, some more came today. How that happened and the text that came out are below.
>>
>> Thank you for your help,
>> Yan
>>
>> I looked at the Preferences -> Editor (once the window popped up, I clicked on the Editor with a mouse and the error came).
>> ...
>> 2021-05-03 16:50:36.184 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd104c17b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>> 2021-05-03 16:50:36.186 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd09dde780>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>> ?
>>
>> In another instance, hitting cmd-n (new native editor window) gave me this:
>> ...
>> 2021-05-03 16:59:03.469 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075a9b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>> 2021-05-03 16:59:03.471 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075c140>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>> 2021-05-03 16:59:22.225 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270c2e0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>> 2021-05-03 16:59:22.226 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270d070>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>> ?
>>
>> When in native editor, I hit cmd-w (popping the save file request) gave me this:
>> ...
>> 2021-05-03 16:59:24.024 R[73442:2450140] Warning: Expected min height of view: (<NSButton: 0x7ffd1271c7a0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>> ...
>>
>>
>> On May 2, 2021, at 11:03 AM, peter dalgaard <pdalgd at gmail.com<mailto:pdalgd at gmail.com>> wrote:
>>
>> 2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either. (I do see the "...warmup" thing, though.)
>>
>> - Peter D.
>>
>> On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>
>> Thank you Simon,
>>
>> Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.
>>
>> 2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup
>>
>> Since they are usually random, I will log them for some time, and report back.
>>
>> Yan
>>
>> On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org><mailto:simon.urbanek at R-project.org>> wrote:
>>
>> Yan,
>>
>> Thank you for the report, comments inline.
>>
>>
>> On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>
>> Dear all,
>>
>> Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).
>>
>>
>> There are no known issues in R 4.0.5 so if you see any please report them.
>>
>>
>> 1. Start fresh R-gui
>>
>> 2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.
>>
>> # m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
>> # m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
>> # m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
>> # m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
>> # m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
>> # m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
>> # m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
>> # m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
>> # m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
>> # m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))
>>
>> 3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?
>>
>>
>> Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.
>>
>> Thanks,
>> Simon
>>
>>
>>
>> Any help is greatly appreciated.
>> Yan
>>
>> Here is the sessionInfo()
>>
>> ******
>> R version 4.0.5 (2021-03-31)
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>> Running under: macOS Big Sur 10.16
>>
>> Matrix products: default
>> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
>> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_4.0.5
>>
>>
>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>
>> [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>
>> [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk<mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com<mailto:PDalgd at gmail.com>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>
>> [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> <R_2021-05-04_085814_nXVv.sample.txt><R_2021-05-04_090509_kVEq.sample.txt>_______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

From ALPEROVYCH @end|ng |rom em-|yon@com  Sat May  8 23:25:10 2021
From: ALPEROVYCH @end|ng |rom em-|yon@com (ALPEROVYCH Yan)
Date: Sat, 8 May 2021 21:25:10 +0000
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <6CD79D61-B002-431C-989A-2309B50E1EA9@R-project.org>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
 <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
 <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>
 <DF4A66CE-ACC6-415C-804E-533031520726@R-project.org>
 <BD8A84F5-9414-4016-B8A8-FF3B62E7CA92@em-lyon.com>
 <A126D854-275C-4E43-83F6-06F53FBA53D1@R-project.org>
 <6728F5C3-4642-4EB4-A827-FC34925C37B4@em-lyon.com>
 <6CD79D61-B002-431C-989A-2309B50E1EA9@R-project.org>
Message-ID: <413B64C8-EE27-464A-9E9F-42C61324EE8D@em-lyon.com>

Simon,

Yes, I tried to play with touch bar preferences, to no avail.

On the bright side, I also tested your build. Both debug and release version work. There was one NS warning in the release version, but it did not affected at all the test (I was running the same sequence as I described in the original message).

In the following transfer are the sampler files for both versions:
https://www.dropbox.com/t/xDqbbZma9i0XdHBk

I am tempted to slide the new release version to /Applicaitons and use it instead of the one shipped with the CRAN release; is it safe to do so?

Yan


On May 7, 2021, at 2:27 PM, Simon Urbanek <Simon.Urbanek at r-project.org<mailto:Simon.Urbanek at r-project.org>> wrote:

Yan,

it's ok, I didn't need the Debug version.

However, did you check the Touch Bar settings as discussed previously to see if disabling the app Touch Bar fixes the problem?
If it does, there may be hope - I have created a test version at
https://github.com/R-macos/Mac-GUI/actions/runs/820226842
at the bottom there is "R-GUI-Build" link under Artifacts which gives you a zip file with R-GUI-Build.dmg image which has both release and debug version which disable the Touch Bar for the console (built for R 4.0.x). Please let me know if that works for you.

Thanks,
Simon



On May 7, 2021, at 2:37 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:

Thank you Simon,

Brandon suggested to use the debug version of the R-gui, but you seem to be ok with what I sent. Please let me know if you also want the sampler files using the the debug version.

Also, if you need me to test the fixes / updates, please don?t hesitate.

Yan


On May 6, 2021, at 4:30 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:

Yan,

thank you for the sampler files!

From cursory glance the issue seems to be the touch bar, an amazing amount of time is spent in the Apple's touchbar API (almost all of it is in some way related to [NSTextView(NSTextView_TouchBar_API) updateTextTouchBarItems]). That also explains why I was not able to reproduce it, because I don't have a Mac with touch bar and Big Sur. I don't know what is available in the settings, but you may want to see if you can adjust your touch bar system preferences (if I recall there are different options for the touch bar) - the R GUI doesn't use the touch bar at all, so the issue is entirely at the system level. I will look is there is anything we can do to block the touch bar API on our end or otherwise deal with it by have R explicitly handle the touch bar.

Thanks,
Simon



On 4/05/2021, at 7:10 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:

Simon,

I sampled the process of my test (the slowdown). I was able to do it without downloading the "Debug" version. There are two files attached.
1. The first one (run at 8:58:14 am) is the replication of my test (the slowdown) using the external editor
2. The second (run at 9:05:09 am) is the replication of my test using the in-built editor

While doing the second sampling R also popped the red warnings (if that is useful).

I am also answering Peter?s question: my version of Big Sur is 11.3.

Let me know what else I can do to help.
Yan


On May 4, 2021, at 5:53 AM, Simon Urbanek <Simon.Urbanek at r-project.org> wrote:

Yan,

thanks for the reports. I cannot reproduce the slow-down, either (Mac mini M1, Big Sur 11.3).

However, you can help by sampling the R process and sending the sample to me. You can do that as follows:

1) open R.app
2) open Terminal (under Applications -> Utilities)
3) in Terminal type:

sample R 30

4) switch to R and perform your test. You have 30 seconds (that's the number above which specifies how long the sampler will run) to do it. In Terminal it will show the sampler output -in the beginning it will also tell you the location of the text file - it's typically /tmp/R_*.sample.txt - send that file to me.

It may not allow you to debug the released version of the GUI, so you may need to download the "Debug" version of the GUI (scroll down) from

https://mac.R-project.org

You should pick the
Mac OS X GUI rev.XXX for R 4.0.x
high-sierra-Release.dmg
download if you have R 4.0.x. You don't need to install the GUI, you can run it directly from the image so it won't affect your installed version.

Thanks,
Simon

PS: you may need to install Xcode command line tools if you didn't already:
sudo xcode-select --install


On 4/05/2021, at 3:06 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:

Dear Peter, Simon,

Since I am not that of an expert in programming, is there any way to trace what happens 'under the hood' of the gui to see what exactly slows down the rendering of output on my end?

On the warnings, some more came today. How that happened and the text that came out are below.

Thank you for your help,
Yan

I looked at the Preferences -> Editor (once the window popped up, I clicked on the Editor with a mouse and the error came).
...
2021-05-03 16:50:36.184 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd104c17b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:50:36.186 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd09dde780>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
?

In another instance, hitting cmd-n (new native editor window) gave me this:
...
2021-05-03 16:59:03.469 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075a9b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:03.471 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075c140>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:22.225 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270c2e0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
2021-05-03 16:59:22.226 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270d070>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
?

When in native editor, I hit cmd-w (popping the save file request) gave me this:
...
2021-05-03 16:59:24.024 R[73442:2450140] Warning: Expected min height of view: (<NSButton: 0x7ffd1271c7a0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
...


On May 2, 2021, at 11:03 AM, peter dalgaard <pdalgd at gmail.com<mailto:pdalgd at gmail.com>> wrote:

2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either. (I do see the "...warmup" thing, though.)

- Peter D.

On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:

Thank you Simon,

Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.

2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup

Since they are usually random, I will log them for some time, and report back.

Yan

On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org><mailto:simon.urbanek at R-project.org>> wrote:

Yan,

Thank you for the report, comments inline.


On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:

Dear all,

Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).


There are no known issues in R 4.0.5 so if you see any please report them.


1. Start fresh R-gui

2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.

# m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
# m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
# m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
# m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
# m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
# m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
# m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
# m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
# m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
# m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))

3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?


Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.

Thanks,
Simon



Any help is greatly appreciated.
Yan

Here is the sessionInfo()

******
R version 4.0.5 (2021-03-31)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.0.5


Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk<mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com<mailto:PDalgd at gmail.com>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
<R_2021-05-04_085814_nXVv.sample.txt><R_2021-05-04_090509_kVEq.sample.txt>_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.


Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

	[[alternative HTML version deleted]]


From yur|broze @end|ng |rom gm@||@com  Sun May  9 01:15:02 2021
From: yur|broze @end|ng |rom gm@||@com (Yuri Broze)
Date: Sat, 8 May 2021 19:15:02 -0400
Subject: [R-SIG-Mac] R-4.0.5.pkg Bug Report
Message-ID: <CAKxiJpWnXEv3EqDgy57q75aLELupnX-rFNguEAgJXgLME7W1Dw@mail.gmail.com>

Hi folks,

Apologies if this bug has already been noticed, but I wanted to share just
in case it hasn't yet, and this was the best place I found.

The current CRAN-hosted MacOS installation package fails to correctly
create symbolic links to /usr/local/bin for machines with `uname -r`
release version of 20 or above. The faulty logic is in
R/R-fw.pkg/Scripts/postflight; lines 6-13:

if uname -r | grep '^1[5-9]' >/dev/null; then
    ## 15.0 and higher don't allow messing with /usr/bin
    ## so use /usr/local/bin instead
    if [ ! -e /usr/local/bin ]; then
    mkdir -p /usr/local/bin
    fi
    cd /usr/local/bin
fi

This seems to have resulted in some commotion on Stack Exchange and other
places around an inability to access `R` or `Rscript` from the commandline,
along with the usual hacky workarounds.

Hope this is helpful to bring to your attention!

Best,
Yuri

Yuri Broze
314.910.3152

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Sun May  9 11:11:39 2021
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Sun, 9 May 2021 11:11:39 +0200
Subject: [R-SIG-Mac] R-4.0.5.pkg Bug Report
In-Reply-To: <CAKxiJpWnXEv3EqDgy57q75aLELupnX-rFNguEAgJXgLME7W1Dw@mail.gmail.com>
References: <CAKxiJpWnXEv3EqDgy57q75aLELupnX-rFNguEAgJXgLME7W1Dw@mail.gmail.com>
Message-ID: <B5AD885B-B820-46BB-9C52-D93786DA99BD@gmail.com>

Eek, yes, that needs fixing. And of course only newcomers get hit because others will have the symlinks in place already.

I believe that instead of the grep '^1[5-9]' business you need something like

IFS=. read major minor pl << EOF
`uname -r`
EOF

and then a numeric check on $major.

-pd

> On 9 May 2021, at 01:15 , Yuri Broze <yuribroze at gmail.com> wrote:
> 
> Hi folks,
> 
> Apologies if this bug has already been noticed, but I wanted to share just
> in case it hasn't yet, and this was the best place I found.
> 
> The current CRAN-hosted MacOS installation package fails to correctly
> create symbolic links to /usr/local/bin for machines with `uname -r`
> release version of 20 or above. The faulty logic is in
> R/R-fw.pkg/Scripts/postflight; lines 6-13:
> 
> if uname -r | grep '^1[5-9]' >/dev/null; then
>    ## 15.0 and higher don't allow messing with /usr/bin
>    ## so use /usr/local/bin instead
>    if [ ! -e /usr/local/bin ]; then
>    mkdir -p /usr/local/bin
>    fi
>    cd /usr/local/bin
> fi
> 
> This seems to have resulted in some commotion on Stack Exchange and other
> places around an inability to access `R` or `Rscript` from the commandline,
> along with the usual hacky workarounds.
> 
> Hope this is helpful to bring to your attention!
> 
> Best,
> Yuri
> 
> Yuri Broze
> 314.910.3152
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From @|mon@urb@nek @end|ng |rom R-project@org  Sun May  9 11:17:44 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 9 May 2021 21:17:44 +1200
Subject: [R-SIG-Mac] R-4.0.5.pkg Bug Report
In-Reply-To: <B5AD885B-B820-46BB-9C52-D93786DA99BD@gmail.com>
References: <CAKxiJpWnXEv3EqDgy57q75aLELupnX-rFNguEAgJXgLME7W1Dw@mail.gmail.com>
 <B5AD885B-B820-46BB-9C52-D93786DA99BD@gmail.com>
Message-ID: <A4E31C19-1DF9-4F19-8709-90B164EEEAB3@R-project.org>


I have fixed it (it only needs a slight modification of the regex) and responded, unfortunately my posts get blocked at ETH :( The nightlies should have the new post flight script so please test.

Cheers,
Simon



> On May 9, 2021, at 21:11, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Eek, yes, that needs fixing. And of course only newcomers get hit because others will have the symlinks in place already.
> 
> I believe that instead of the grep '^1[5-9]' business you need something like
> 
> IFS=. read major minor pl << EOF
> `uname -r`
> EOF
> 
> and then a numeric check on $major.
> 
> -pd
> 
>> On 9 May 2021, at 01:15 , Yuri Broze <yuribroze at gmail.com> wrote:
>> 
>> Hi folks,
>> 
>> Apologies if this bug has already been noticed, but I wanted to share just
>> in case it hasn't yet, and this was the best place I found.
>> 
>> The current CRAN-hosted MacOS installation package fails to correctly
>> create symbolic links to /usr/local/bin for machines with `uname -r`
>> release version of 20 or above. The faulty logic is in
>> R/R-fw.pkg/Scripts/postflight; lines 6-13:
>> 
>> if uname -r | grep '^1[5-9]' >/dev/null; then
>>   ## 15.0 and higher don't allow messing with /usr/bin
>>   ## so use /usr/local/bin instead
>>   if [ ! -e /usr/local/bin ]; then
>>   mkdir -p /usr/local/bin
>>   fi
>>   cd /usr/local/bin
>> fi
>> 
>> This seems to have resulted in some commotion on Stack Exchange and other
>> places around an inability to access `R` or `Rscript` from the commandline,
>> along with the usual hacky workarounds.
>> 
>> Hope this is helpful to bring to your attention!
>> 
>> Best,
>> Yuri
>> 
>> Yuri Broze
>> 314.910.3152
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Sun May  9 01:28:15 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 9 May 2021 11:28:15 +1200
Subject: [R-SIG-Mac] R-4.0.5.pkg Bug Report
In-Reply-To: <CAKxiJpWnXEv3EqDgy57q75aLELupnX-rFNguEAgJXgLME7W1Dw@mail.gmail.com>
References: <CAKxiJpWnXEv3EqDgy57q75aLELupnX-rFNguEAgJXgLME7W1Dw@mail.gmail.com>
Message-ID: <1B7ED186-C076-4461-A4FC-932BED8F754C@R-project.org>


Yuri,

thanks, no, this has not been reported, so it is indeed very useful! Now fixed in r4560 so tonight's build should work.

Thanks for doing the right thing which is to report the issue at the source instead of consulting the social media which doesn't help anyone.

Thanks,
Simon



> On May 9, 2021, at 11:15 AM, Yuri Broze <yuribroze at gmail.com> wrote:
> 
> Hi folks,
> 
> Apologies if this bug has already been noticed, but I wanted to share just
> in case it hasn't yet, and this was the best place I found.
> 
> The current CRAN-hosted MacOS installation package fails to correctly
> create symbolic links to /usr/local/bin for machines with `uname -r`
> release version of 20 or above. The faulty logic is in
> R/R-fw.pkg/Scripts/postflight; lines 6-13:
> 
> if uname -r | grep '^1[5-9]' >/dev/null; then
>    ## 15.0 and higher don't allow messing with /usr/bin
>    ## so use /usr/local/bin instead
>    if [ ! -e /usr/local/bin ]; then
>    mkdir -p /usr/local/bin
>    fi
>    cd /usr/local/bin
> fi
> 
> This seems to have resulted in some commotion on Stack Exchange and other
> places around an inability to access `R` or `Rscript` from the commandline,
> along with the usual hacky workarounds.
> 
> Hope this is helpful to bring to your attention!
> 
> Best,
> Yuri
> 
> Yuri Broze
> 314.910.3152
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From @|mon@urb@nek @end|ng |rom R-project@org  Sun May  9 00:28:18 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 9 May 2021 10:28:18 +1200
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <413B64C8-EE27-464A-9E9F-42C61324EE8D@em-lyon.com>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
 <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
 <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>
 <DF4A66CE-ACC6-415C-804E-533031520726@R-project.org>
 <BD8A84F5-9414-4016-B8A8-FF3B62E7CA92@em-lyon.com>
 <A126D854-275C-4E43-83F6-06F53FBA53D1@R-project.org>
 <6728F5C3-4642-4EB4-A827-FC34925C37B4@em-lyon.com>
 <6CD79D61-B002-431C-989A-2309B50E1EA9@R-project.org>
 <413B64C8-EE27-464A-9E9F-42C61324EE8D@em-lyon.com>
Message-ID: <D04FB964-2315-40AB-9BD4-4FAB530AEE8A@R-project.org>

Yan,

great, thanks! I'll put the touchbar changes into the release. I also started looking at some of the warnings - the button ones are easy to fix.
Although you can move the Release build to Applications, it is not signed, so you may get a warning when you run it - otherwise it is safe. When I make the change it will be in the nightly builds in https://mac.R-project.org and those are signed so that will be the best.

Thanks,
Simon


> On May 9, 2021, at 9:25 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> 
> Simon, 
> 
> Yes, I tried to play with touch bar preferences, to no avail. 
> 
> On the bright side, I also tested your build. Both debug and release version work. There was one NS warning in the release version, but it did not affected at all the test (I was running the same sequence as I described in the original message). 
> 
> In the following transfer are the sampler files for both versions:
> https://www.dropbox.com/t/xDqbbZma9i0XdHBk <https://www.dropbox.com/t/xDqbbZma9i0XdHBk>
> 
> I am tempted to slide the new release version to /Applicaitons and use it instead of the one shipped with the CRAN release; is it safe to do so?
> 
> Yan
> 
> 
> On May 7, 2021, at 2:27 PM, Simon Urbanek <Simon.Urbanek at r-project.org <mailto:Simon.Urbanek at r-project.org>> wrote:
> 
> Yan,
> 
> it's ok, I didn't need the Debug version.
> 
> However, did you check the Touch Bar settings as discussed previously to see if disabling the app Touch Bar fixes the problem?
> If it does, there may be hope - I have created a test version at
> https://github.com/R-macos/Mac-GUI/actions/runs/820226842 <https://github.com/R-macos/Mac-GUI/actions/runs/820226842>
> at the bottom there is "R-GUI-Build" link under Artifacts which gives you a zip file with R-GUI-Build.dmg image which has both release and debug version which disable the Touch Bar for the console (built for R 4.0.x). Please let me know if that works for you.
> 
> Thanks,
> Simon
> 
> 
> 
>> On May 7, 2021, at 2:37 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>> 
>> Thank you Simon,
>> 
>> Brandon suggested to use the debug version of the R-gui, but you seem to be ok with what I sent. Please let me know if you also want the sampler files using the the debug version.
>> 
>> Also, if you need me to test the fixes / updates, please don?t hesitate.
>> 
>> Yan
>> 
>> 
>> On May 6, 2021, at 4:30 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Yan,
>> 
>> thank you for the sampler files!
>> 
>> From cursory glance the issue seems to be the touch bar, an amazing amount of time is spent in the Apple's touchbar API (almost all of it is in some way related to [NSTextView(NSTextView_TouchBar_API) updateTextTouchBarItems]). That also explains why I was not able to reproduce it, because I don't have a Mac with touch bar and Big Sur. I don't know what is available in the settings, but you may want to see if you can adjust your touch bar system preferences (if I recall there are different options for the touch bar) - the R GUI doesn't use the touch bar at all, so the issue is entirely at the system level. I will look is there is anything we can do to block the touch bar API on our end or otherwise deal with it by have R explicitly handle the touch bar.
>> 
>> Thanks,
>> Simon
>> 
>> 
>> 
>>> On 4/05/2021, at 7:10 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>>> 
>>> Simon,
>>> 
>>> I sampled the process of my test (the slowdown). I was able to do it without downloading the "Debug" version. There are two files attached.
>>> 1. The first one (run at 8:58:14 am) is the replication of my test (the slowdown) using the external editor
>>> 2. The second (run at 9:05:09 am) is the replication of my test using the in-built editor
>>> 
>>> While doing the second sampling R also popped the red warnings (if that is useful).
>>> 
>>> I am also answering Peter?s question: my version of Big Sur is 11.3.
>>> 
>>> Let me know what else I can do to help.
>>> Yan
>>> 
>>> 
>>> On May 4, 2021, at 5:53 AM, Simon Urbanek <Simon.Urbanek at r-project.org> wrote:
>>> 
>>> Yan,
>>> 
>>> thanks for the reports. I cannot reproduce the slow-down, either (Mac mini M1, Big Sur 11.3).
>>> 
>>> However, you can help by sampling the R process and sending the sample to me. You can do that as follows:
>>> 
>>> 1) open R.app
>>> 2) open Terminal (under Applications -> Utilities)
>>> 3) in Terminal type:
>>> 
>>> sample R 30
>>> 
>>> 4) switch to R and perform your test. You have 30 seconds (that's the number above which specifies how long the sampler will run) to do it. In Terminal it will show the sampler output -in the beginning it will also tell you the location of the text file - it's typically /tmp/R_*.sample.txt - send that file to me.
>>> 
>>> It may not allow you to debug the released version of the GUI, so you may need to download the "Debug" version of the GUI (scroll down) from
>>> 
>>> https://mac.R-project.org
>>> 
>>> You should pick the
>>> Mac OS X GUI rev.XXX for R 4.0.x
>>> high-sierra-Release.dmg
>>> download if you have R 4.0.x. You don't need to install the GUI, you can run it directly from the image so it won't affect your installed version.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> PS: you may need to install Xcode command line tools if you didn't already:
>>> sudo xcode-select --install
>>> 
>>> 
>>>> On 4/05/2021, at 3:06 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>>>> 
>>>> Dear Peter, Simon,
>>>> 
>>>> Since I am not that of an expert in programming, is there any way to trace what happens 'under the hood' of the gui to see what exactly slows down the rendering of output on my end?
>>>> 
>>>> On the warnings, some more came today. How that happened and the text that came out are below.
>>>> 
>>>> Thank you for your help,
>>>> Yan
>>>> 
>>>> I looked at the Preferences -> Editor (once the window popped up, I clicked on the Editor with a mouse and the error came).
>>>> ...
>>>> 2021-05-03 16:50:36.184 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd104c17b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>>> 2021-05-03 16:50:36.186 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd09dde780>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>>> ?
>>>> 
>>>> In another instance, hitting cmd-n (new native editor window) gave me this:
>>>> ...
>>>> 2021-05-03 16:59:03.469 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075a9b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>>> 2021-05-03 16:59:03.471 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075c140>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>>> 2021-05-03 16:59:22.225 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270c2e0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>>> 2021-05-03 16:59:22.226 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270d070>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>>> ?
>>>> 
>>>> When in native editor, I hit cmd-w (popping the save file request) gave me this:
>>>> ...
>>>> 2021-05-03 16:59:24.024 R[73442:2450140] Warning: Expected min height of view: (<NSButton: 0x7ffd1271c7a0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>>> ...
>>>> 
>>>> 
>>>> On May 2, 2021, at 11:03 AM, peter dalgaard <pdalgd at gmail.com<mailto:pdalgd at gmail.com>> wrote:
>>>> 
>>>> 2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either. (I do see the "...warmup" thing, though.)
>>>> 
>>>> - Peter D.
>>>> 
>>>> On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>>> 
>>>> Thank you Simon,
>>>> 
>>>> Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.
>>>> 
>>>> 2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup
>>>> 
>>>> Since they are usually random, I will log them for some time, and report back.
>>>> 
>>>> Yan
>>>> 
>>>> On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org><mailto:simon.urbanek at R-project.org>> wrote:
>>>> 
>>>> Yan,
>>>> 
>>>> Thank you for the report, comments inline.
>>>> 
>>>> 
>>>> On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>>> 
>>>> Dear all,
>>>> 
>>>> Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).
>>>> 
>>>> 
>>>> There are no known issues in R 4.0.5 so if you see any please report them.
>>>> 
>>>> 
>>>> 1. Start fresh R-gui
>>>> 
>>>> 2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.
>>>> 
>>>> # m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
>>>> # m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
>>>> # m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
>>>> # m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
>>>> # m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
>>>> # m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
>>>> # m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
>>>> # m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
>>>> # m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
>>>> # m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))
>>>> 
>>>> 3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?
>>>> 
>>>> 
>>>> Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>> Any help is greatly appreciated.
>>>> Yan
>>>> 
>>>> Here is the sessionInfo()
>>>> 
>>>> ******
>>>> R version 4.0.5 (2021-03-31)
>>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>>> Running under: macOS Big Sur 10.16
>>>> 
>>>> Matrix products: default
>>>> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>>>> 
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> loaded via a namespace (and not attached):
>>>> [1] compiler_4.0.5
>>>> 
>>>> 
>>>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>>> 
>>>> [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>>> 
>>>> [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> --
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk<mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com<mailto:PDalgd at gmail.com>
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>>> 
>>>> [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>> <R_2021-05-04_085814_nXVv.sample.txt><R_2021-05-04_090509_kVEq.sample.txt>_______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> 
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.


	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Fri May  7 14:27:16 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 8 May 2021 00:27:16 +1200
Subject: [R-SIG-Mac] R-gui slow since last update
In-Reply-To: <6728F5C3-4642-4EB4-A827-FC34925C37B4@em-lyon.com>
References: <36EE3B7F-6650-42E6-BC3B-BF0EF3783DA2@em-lyon.com>
 <42467AB1-A06A-4A1E-87D6-338DDE090BB3@R-project.org>
 <62DF4ABB-15BC-48AE-82E8-FE8986DA3EF7@em-lyon.com>
 <5B30D44D-DE0C-4118-8982-350C9545CE76@gmail.com>
 <82FAF356-6067-47E9-ABDD-2074C45B43D5@em-lyon.com>
 <DF4A66CE-ACC6-415C-804E-533031520726@R-project.org>
 <BD8A84F5-9414-4016-B8A8-FF3B62E7CA92@em-lyon.com>
 <A126D854-275C-4E43-83F6-06F53FBA53D1@R-project.org>
 <6728F5C3-4642-4EB4-A827-FC34925C37B4@em-lyon.com>
Message-ID: <6CD79D61-B002-431C-989A-2309B50E1EA9@R-project.org>


Yan,

it's ok, I didn't need the Debug version.

However, did you check the Touch Bar settings as discussed previously to see if disabling the app Touch Bar fixes the problem?
If it does, there may be hope - I have created a test version at
https://github.com/R-macos/Mac-GUI/actions/runs/820226842
at the bottom there is "R-GUI-Build" link under Artifacts which gives you a zip file with R-GUI-Build.dmg image which has both release and debug version which disable the Touch Bar for the console (built for R 4.0.x). Please let me know if that works for you.

Thanks,
Simon



> On May 7, 2021, at 2:37 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> 
> Thank you Simon,
> 
> Brandon suggested to use the debug version of the R-gui, but you seem to be ok with what I sent. Please let me know if you also want the sampler files using the the debug version.
> 
> Also, if you need me to test the fixes / updates, please don?t hesitate.
> 
> Yan
> 
> 
> On May 6, 2021, at 4:30 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Yan,
> 
> thank you for the sampler files!
> 
> From cursory glance the issue seems to be the touch bar, an amazing amount of time is spent in the Apple's touchbar API (almost all of it is in some way related to [NSTextView(NSTextView_TouchBar_API) updateTextTouchBarItems]). That also explains why I was not able to reproduce it, because I don't have a Mac with touch bar and Big Sur. I don't know what is available in the settings, but you may want to see if you can adjust your touch bar system preferences (if I recall there are different options for the touch bar) - the R GUI doesn't use the touch bar at all, so the issue is entirely at the system level. I will look is there is anything we can do to block the touch bar API on our end or otherwise deal with it by have R explicitly handle the touch bar.
> 
> Thanks,
> Simon
> 
> 
> 
>> On 4/05/2021, at 7:10 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>> 
>> Simon,
>> 
>> I sampled the process of my test (the slowdown). I was able to do it without downloading the "Debug" version. There are two files attached.
>> 1. The first one (run at 8:58:14 am) is the replication of my test (the slowdown) using the external editor
>> 2. The second (run at 9:05:09 am) is the replication of my test using the in-built editor
>> 
>> While doing the second sampling R also popped the red warnings (if that is useful).
>> 
>> I am also answering Peter?s question: my version of Big Sur is 11.3.
>> 
>> Let me know what else I can do to help.
>> Yan
>> 
>> 
>> On May 4, 2021, at 5:53 AM, Simon Urbanek <Simon.Urbanek at r-project.org> wrote:
>> 
>> Yan,
>> 
>> thanks for the reports. I cannot reproduce the slow-down, either (Mac mini M1, Big Sur 11.3).
>> 
>> However, you can help by sampling the R process and sending the sample to me. You can do that as follows:
>> 
>> 1) open R.app
>> 2) open Terminal (under Applications -> Utilities)
>> 3) in Terminal type:
>> 
>> sample R 30
>> 
>> 4) switch to R and perform your test. You have 30 seconds (that's the number above which specifies how long the sampler will run) to do it. In Terminal it will show the sampler output -in the beginning it will also tell you the location of the text file - it's typically /tmp/R_*.sample.txt - send that file to me.
>> 
>> It may not allow you to debug the released version of the GUI, so you may need to download the "Debug" version of the GUI (scroll down) from
>> 
>> https://mac.R-project.org
>> 
>> You should pick the
>> Mac OS X GUI rev.XXX for R 4.0.x
>> high-sierra-Release.dmg
>> download if you have R 4.0.x. You don't need to install the GUI, you can run it directly from the image so it won't affect your installed version.
>> 
>> Thanks,
>> Simon
>> 
>> PS: you may need to install Xcode command line tools if you didn't already:
>> sudo xcode-select --install
>> 
>> 
>>> On 4/05/2021, at 3:06 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>>> 
>>> Dear Peter, Simon,
>>> 
>>> Since I am not that of an expert in programming, is there any way to trace what happens 'under the hood' of the gui to see what exactly slows down the rendering of output on my end?
>>> 
>>> On the warnings, some more came today. How that happened and the text that came out are below.
>>> 
>>> Thank you for your help,
>>> Yan
>>> 
>>> I looked at the Preferences -> Editor (once the window popped up, I clicked on the Editor with a mouse and the error came).
>>> ...
>>> 2021-05-03 16:50:36.184 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd104c17b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>> 2021-05-03 16:50:36.186 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd09dde780>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>> ?
>>> 
>>> In another instance, hitting cmd-n (new native editor window) gave me this:
>>> ...
>>> 2021-05-03 16:59:03.469 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075a9b0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>> 2021-05-03 16:59:03.471 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1075c140>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>> 2021-05-03 16:59:22.225 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270c2e0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>> 2021-05-03 16:59:22.226 R[73442:2450140] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7ffd1270d070>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>> ?
>>> 
>>> When in native editor, I hit cmd-w (popping the save file request) gave me this:
>>> ...
>>> 2021-05-03 16:59:24.024 R[73442:2450140] Warning: Expected min height of view: (<NSButton: 0x7ffd1271c7a0>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>>> ...
>>> 
>>> 
>>> On May 2, 2021, at 11:03 AM, peter dalgaard <pdalgd at gmail.com<mailto:pdalgd at gmail.com>> wrote:
>>> 
>>> 2019 MB Air here, Big Sur, 4.0.5 off CRAN. I don't see the issue either. (I do see the "...warmup" thing, though.)
>>> 
>>> - Peter D.
>>> 
>>> On 1 May 2021, at 21:01 , ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>> 
>>> Thank you Simon,
>>> 
>>> Regarding the "NS..." warnings, the following came just now when I closed the plot window (after a ggplot) with a mouse.
>>> 
>>> 2021-05-01 20:53:35.117 R[2344:57535] +[NSSavePanel _warmUp] attempted warmup
>>> 
>>> Since they are usually random, I will log them for some time, and report back.
>>> 
>>> Yan
>>> 
>>> On May 1, 2021, at 7:00 AM, Simon Urbanek <simon.urbanek at R-project.org<mailto:simon.urbanek at R-project.org><mailto:simon.urbanek at R-project.org>> wrote:
>>> 
>>> Yan,
>>> 
>>> Thank you for the report, comments inline.
>>> 
>>> 
>>> On May 1, 2021, at 03:56, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>> 
>>> Dear all,
>>> 
>>> Beyond the occasional red warnings about the 'NSPop?.' buttons, warmups, etc. and similar issues reported elsewhere here I?ve noted the slowdown of R console with more and more output. Here is what I do to reliably reproduced it on my machine - MacBook Pro 2017 with Touch Bar (sessionInfo() is below).
>>> 
>>> 
>>> There are no known issues in R 4.0.5 so if you see any please report them.
>>> 
>>> 
>>> 1. Start fresh R-gui
>>> 
>>> 2. Paste the following text in the editor. Note that lines are commented, this is enough to show the problem. It obvisouly gets worse if R has to evaluate.
>>> 
>>> # m[[ 1]] <- .f(update(fml, . ~ . -x1 + x2))
>>> # m[[ 2]] <- .f(update(fml, . ~ . -x1 + x2 + x3))
>>> # m[[ 3]] <- .f(update(fml, . ~ . -x1 + x2 + x4))
>>> # m[[ 4]] <- .f(update(fml, . ~ . -x1 + x2 + x5))
>>> # m[[ 5]] <- .f(update(fml, . ~ . -x1 + x2 + x6))
>>> # m[[ 6]] <- .f(update(fml, . ~ . -x1 + x2 + x7))
>>> # m[[ 7]] <- .f(update(fml, . ~ . -x1 + x2 + x8))
>>> # m[[ 8]] <- .f(update(fml, . ~ . -x1 + x2 + x9))
>>> # m[[ 9]] <- .f(update(fml, . ~ . -x1 + x2 + x10))
>>> # m[[10]] <- .f(update(fml, . ~ . -x1 + x2 + x11))
>>> 
>>> 3. Execute as block once - the output appears almost immediately. Execute the second time - the slight delay is already noticeable. Continue to 3-4 time and the delay between the Cmd+Enter and the output is now up to 3-4 seconds and occasional beachball?
>>> 
>>> 
>>> Thanks, I only have Catalina here and it does not exhibit that behaviour, the execution is always immediate. I'll try on the M1 Big Sur machine on Monday.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>> 
>>> Any help is greatly appreciated.
>>> Yan
>>> 
>>> Here is the sessionInfo()
>>> 
>>> ******
>>> R version 4.0.5 (2021-03-31)
>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>> Running under: macOS Big Sur 10.16
>>> 
>>> Matrix products: default
>>> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>>> 
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>> 
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> 
>>> loaded via a namespace (and not attached):
>>> [1] compiler_4.0.5
>>> 
>>> 
>>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>> 
>>> [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>> 
>>> [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> --
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk<mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com<mailto:PDalgd at gmail.com>
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>> 
>>> [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>> <R_2021-05-04_085814_nXVv.sample.txt><R_2021-05-04_090509_kVEq.sample.txt>_______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> Ce message ?lectronique et tous les fichiers attach?s qu'il contient sont confidentiels et destin?s exclusivement ? l'usage de la personne ? laquelle ils sont adress?s. Si vous avez re?u ce message par erreur, merci de le retourner ? son ?metteur. Les id?es et opinions pr?sent?es dans ce message sont celles de son auteur, et ne repr?sentent pas n?cessairement celles de l?institution ou les entit?s affili?es dont d?pend l?auteur. La publication, l'usage, la distribution, l'impression ou la copie non autoris?e de ce message et des attachements qu'il contient sont strictement interdits ?. ?This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company the author is dependent from. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.


From @tvjc @end|ng |rom ch@nn|ng@h@rv@rd@edu  Thu May 13 16:47:04 2021
From: @tvjc @end|ng |rom ch@nn|ng@h@rv@rd@edu (Vincent Carey)
Date: Thu, 13 May 2021 10:47:04 -0400
Subject: [R-SIG-Mac] tcltk on M1 mac?
Message-ID: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>

I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
seems to have wrong architecture; attempt to build from source does not
help.  Any hints appreciated.


R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"

Copyright (C) 2021 The R Foundation for Statistical Computing

Platform: aarch64-apple-darwin20 (64-bit)


> library(tcltk)

*Error: package or namespace load failed for 'tcltk':*

* .onLoad failed in loadNamespace() for 'tcltk', details:*

*  call: dyn.load(file, DLLpath = DLLpath, ...)*

*  error: unable to load shared object
'/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*

*
dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*

*  Referenced from:
/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*

*  Reason: image not found*

-- 
The information in this e-mail is intended only for the ...{{dropped:18}}


From @|mon@urb@nek @end|ng |rom R-project@org  Thu May 13 21:45:45 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 14 May 2021 07:45:45 +1200
Subject: [R-SIG-Mac] tcltk on M1 mac?
In-Reply-To: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
Message-ID: <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>


Vince,

Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.

Thanks,
Simon


> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
> 
> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
> seems to have wrong architecture; attempt to build from source does not
> help.  Any hints appreciated.
> 
> 
> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
> 
> Copyright (C) 2021 The R Foundation for Statistical Computing
> 
> Platform: aarch64-apple-darwin20 (64-bit)
> 
> 
>> library(tcltk)
> 
> *Error: package or namespace load failed for 'tcltk':*
> 
> * .onLoad failed in loadNamespace() for 'tcltk', details:*
> 
> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
> 
> *  error: unable to load shared object
> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
> 
> *
> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
> 
> *  Referenced from:
> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
> 
> *  Reason: image not found*
> 
> -- 
> The information in this e-mail is intended only for th...{{dropped:8}}


From m|ke @end|ng |rom mc@tephen@com@@u  Thu May 13 15:31:18 2021
From: m|ke @end|ng |rom mc@tephen@com@@u (Mike McStephen)
Date: Thu, 13 May 2021 23:31:18 +1000
Subject: [R-SIG-Mac] xaxis not displaying
In-Reply-To: <6EEAE0EA-C173-4ABF-8925-6DE8CF41ED66@mcstephen.net>
References: <6EEAE0EA-C173-4ABF-8925-6DE8CF41ED66@mcstephen.net>
Message-ID: <DDF2359B-4E51-4673-9054-7C5D5A01B113@mcstephen.com.au>

Hi,

I?m using v4.0.5 on a MacBook Air with the new M1 (apple) chip.  

I?m testing out R having not used it for some years and giving a simple plot command:

plot(Drinks.data[,i])

Gives a scatter plot (value vs sequence) but no values on the X axis.  The it could be the window size as the axis is close to the bottom of the window.  Is this a known problem, should I be setting some plotting parameter to make this work?

Thanks

Mike

?
Mike McStephen
PO Box 147, Bruthen
mike at mcstephen.com.au
0417 652 552



	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Sat May 15 01:57:01 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 15 May 2021 11:57:01 +1200
Subject: [R-SIG-Mac] tcltk on M1 mac?
In-Reply-To: <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
Message-ID: <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>


Vince,

please try the latest build, Tcl/Tk should be included now.

Thanks,
Simon



> On May 14, 2021, at 7:45 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Vince,
> 
> Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.
> 
> Thanks,
> Simon
> 
> 
>> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
>> 
>> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
>> seems to have wrong architecture; attempt to build from source does not
>> help.  Any hints appreciated.
>> 
>> 
>> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
>> 
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> 
>> Platform: aarch64-apple-darwin20 (64-bit)
>> 
>> 
>>> library(tcltk)
>> 
>> *Error: package or namespace load failed for 'tcltk':*
>> 
>> * .onLoad failed in loadNamespace() for 'tcltk', details:*
>> 
>> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
>> 
>> *  error: unable to load shared object
>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
>> 
>> *
>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
>> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
>> 
>> *  Referenced from:
>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
>> 
>> *  Reason: image not found*
>> 
>> -- 
>> The information in this e-mail is intended only for the ...{{dropped:18}}
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From |uke-t|erney @end|ng |rom u|ow@@edu  Sat May 15 02:03:34 2021
From: |uke-t|erney @end|ng |rom u|ow@@edu (Tierney, Luke)
Date: Sat, 15 May 2021 00:03:34 +0000
Subject: [R-SIG-Mac] [External]  xaxis not displaying
In-Reply-To: <DDF2359B-4E51-4673-9054-7C5D5A01B113@mcstephen.com.au>
References: <6EEAE0EA-C173-4ABF-8925-6DE8CF41ED66@mcstephen.net>,
 <DDF2359B-4E51-4673-9054-7C5D5A01B113@mcstephen.com.au>
Message-ID: <4765EA62-75C4-497F-AAD2-4804951A9A32@uiowa.edu>

Resizing the window a tiny bit seems to fix this. Not sure why that is needed.

Best,

luke 

Sent from my iPad

> On May 14, 2021, at 6:02 PM, Mike McStephen <mike at mcstephen.com.au> wrote:
> 
> ?Hi,
> 
> I?m using v4.0.5 on a MacBook Air with the new M1 (apple) chip.  
> 
> I?m testing out R having not used it for some years and giving a simple plot command:
> 
> plot(Drinks.data[,i])
> 
> Gives a scatter plot (value vs sequence) but no values on the X axis.  The it could be the window size as the axis is close to the bottom of the window.  Is this a known problem, should I be setting some plotting parameter to make this work?
> 
> Thanks
> 
> Mike
> 
> ?
> Mike McStephen
> PO Box 147, Bruthen
> mike at mcstephen.com.au
> 0417 652 552
> 
> 
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

From @|mon@urb@nek @end|ng |rom R-project@org  Sat May 15 03:31:52 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 15 May 2021 13:31:52 +1200
Subject: [R-SIG-Mac] [External]  xaxis not displaying
In-Reply-To: <4765EA62-75C4-497F-AAD2-4804951A9A32@uiowa.edu>
References: <6EEAE0EA-C173-4ABF-8925-6DE8CF41ED66@mcstephen.net>
 <DDF2359B-4E51-4673-9054-7C5D5A01B113@mcstephen.com.au>
 <4765EA62-75C4-497F-AAD2-4804951A9A32@uiowa.edu>
Message-ID: <0C918CC0-C577-406D-8F5C-A37B00F84EFE@R-project.org>


I don't have the corresponding machine to replicate, but I recall something related to the fact that the display of the machine may be too small to accommodate the requested device size (the size specification is in inches). If the display is too small, you may want to reduce the requested size, e.g. with
quartz.options(width=5,height=5)
Is my recollection correct?

Thanks,
Simon

 

> On May 15, 2021, at 12:03 PM, Tierney, Luke <luke-tierney at uiowa.edu> wrote:
> 
> Resizing the window a tiny bit seems to fix this. Not sure why that is needed.
> 
> Best,
> 
> luke 
> 
> Sent from my iPad
> 
>> On May 14, 2021, at 6:02 PM, Mike McStephen <mike at mcstephen.com.au> wrote:
>> 
>> ?Hi,
>> 
>> I?m using v4.0.5 on a MacBook Air with the new M1 (apple) chip.  
>> 
>> I?m testing out R having not used it for some years and giving a simple plot command:
>> 
>> plot(Drinks.data[,i])
>> 
>> Gives a scatter plot (value vs sequence) but no values on the X axis.  The it could be the window size as the axis is close to the bottom of the window.  Is this a known problem, should I be setting some plotting parameter to make this work?
>> 
>> Thanks
>> 
>> Mike
>> 
>> ?
>> Mike McStephen
>> PO Box 147, Bruthen
>> mike at mcstephen.com.au
>> 0417 652 552
>> 
>> 
>> 
>>   [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Sat May 15 05:30:26 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 15 May 2021 15:30:26 +1200
Subject: [R-SIG-Mac] [External]  xaxis not displaying
In-Reply-To: <6B4541F2-375E-46EE-96D6-231870353284@mcstephen.com.au>
References: <6EEAE0EA-C173-4ABF-8925-6DE8CF41ED66@mcstephen.net>
 <DDF2359B-4E51-4673-9054-7C5D5A01B113@mcstephen.com.au>
 <4765EA62-75C4-497F-AAD2-4804951A9A32@uiowa.edu>
 <0C918CC0-C577-406D-8F5C-A37B00F84EFE@R-project.org>
 <6B4541F2-375E-46EE-96D6-231870353284@mcstephen.com.au>
Message-ID: <459BFEE2-4025-4C95-88DC-C6AEA02C2E21@R-project.org>


Thanks. I'm pretty sure I saw this before so maybe something to add to the R for Mac FAQ ?


> On May 15, 2021, at 1:38 PM, Mike McStephen <mike at mcstephen.com.au> wrote:
> 
> Thanks Simon and Luke.
> 
> This fixed the problem for me too.
> 
> I?ll adjust this in my script library.  
> 
> Much appreciated
> 
> Mike
> ?
> Mike McStephen
> PO Box 147, Bruthen
> mike at mcstephen.com.au
> 0417 652 552
> 
>> On 15 May 2021, at 11:31 am, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> I don't have the corresponding machine to replicate, but I recall something related to the fact that the display of the machine may be too small to accommodate the requested device size (the size specification is in inches). If the display is too small, you may want to reduce the requested size, e.g. with
>> quartz.options(width=5,height=5)
>> Is my recollection correct?
>> 
>> Thanks,
>> Simon
>> 
>> 
>> 
>>> On May 15, 2021, at 12:03 PM, Tierney, Luke <luke-tierney at uiowa.edu> wrote:
>>> 
>>> Resizing the window a tiny bit seems to fix this. Not sure why that is needed.
>>> 
>>> Best,
>>> 
>>> luke 
>>> 
>>> Sent from my iPad
>>> 
>>>> On May 14, 2021, at 6:02 PM, Mike McStephen <mike at mcstephen.com.au> wrote:
>>>> 
>>>> ?Hi,
>>>> 
>>>> I?m using v4.0.5 on a MacBook Air with the new M1 (apple) chip.  
>>>> 
>>>> I?m testing out R having not used it for some years and giving a simple plot command:
>>>> 
>>>> plot(Drinks.data[,i])
>>>> 
>>>> Gives a scatter plot (value vs sequence) but no values on the X axis.  The it could be the window size as the axis is close to the bottom of the window.  Is this a known problem, should I be setting some plotting parameter to make this work?
>>>> 
>>>> Thanks
>>>> 
>>>> Mike
>>>> 
>>>> ?
>>>> Mike McStephen
>>>> PO Box 147, Bruthen
>>>> mike at mcstephen.com.au
>>>> 0417 652 552
>>>> 
>>>> 
>>>> 
>>>>  [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From m|ke @end|ng |rom mc@tephen@com@@u  Sat May 15 03:38:16 2021
From: m|ke @end|ng |rom mc@tephen@com@@u (Mike McStephen)
Date: Sat, 15 May 2021 11:38:16 +1000
Subject: [R-SIG-Mac] [External]  xaxis not displaying
In-Reply-To: <0C918CC0-C577-406D-8F5C-A37B00F84EFE@R-project.org>
References: <6EEAE0EA-C173-4ABF-8925-6DE8CF41ED66@mcstephen.net>
 <DDF2359B-4E51-4673-9054-7C5D5A01B113@mcstephen.com.au>
 <4765EA62-75C4-497F-AAD2-4804951A9A32@uiowa.edu>
 <0C918CC0-C577-406D-8F5C-A37B00F84EFE@R-project.org>
Message-ID: <6B4541F2-375E-46EE-96D6-231870353284@mcstephen.com.au>

Thanks Simon and Luke.

This fixed the problem for me too.

I?ll adjust this in my script library.  

Much appreciated

Mike
?
Mike McStephen
PO Box 147, Bruthen
mike at mcstephen.com.au
0417 652 552

> On 15 May 2021, at 11:31 am, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> I don't have the corresponding machine to replicate, but I recall something related to the fact that the display of the machine may be too small to accommodate the requested device size (the size specification is in inches). If the display is too small, you may want to reduce the requested size, e.g. with
> quartz.options(width=5,height=5)
> Is my recollection correct?
> 
> Thanks,
> Simon
> 
> 
> 
>> On May 15, 2021, at 12:03 PM, Tierney, Luke <luke-tierney at uiowa.edu> wrote:
>> 
>> Resizing the window a tiny bit seems to fix this. Not sure why that is needed.
>> 
>> Best,
>> 
>> luke 
>> 
>> Sent from my iPad
>> 
>>> On May 14, 2021, at 6:02 PM, Mike McStephen <mike at mcstephen.com.au> wrote:
>>> 
>>> ?Hi,
>>> 
>>> I?m using v4.0.5 on a MacBook Air with the new M1 (apple) chip.  
>>> 
>>> I?m testing out R having not used it for some years and giving a simple plot command:
>>> 
>>> plot(Drinks.data[,i])
>>> 
>>> Gives a scatter plot (value vs sequence) but no values on the X axis.  The it could be the window size as the axis is close to the bottom of the window.  Is this a known problem, should I be setting some plotting parameter to make this work?
>>> 
>>> Thanks
>>> 
>>> Mike
>>> 
>>> ?
>>> Mike McStephen
>>> PO Box 147, Bruthen
>>> mike at mcstephen.com.au
>>> 0417 652 552
>>> 
>>> 
>>> 
>>>  [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


	[[alternative HTML version deleted]]


From k@@perd@n|e|h@n@en @end|ng |rom gm@||@com  Mon May 17 14:32:23 2021
From: k@@perd@n|e|h@n@en @end|ng |rom gm@||@com (Kasper Daniel Hansen)
Date: Mon, 17 May 2021 14:32:23 +0200
Subject: [R-SIG-Mac] possible bug in R's make install
In-Reply-To: <CA+hbrhXs9Wx6=UUTuTrK6SZSAvGet4JZBXRJ7dXKTxQL_BnEeA@mail.gmail.com>
References: <CAC2h7uvtuYEj6_QKBs6xxa5-46PKY3D9Z+ucG05G7rM=AuAE3Q@mail.gmail.com>
 <CA+hbrhXs9Wx6=UUTuTrK6SZSAvGet4JZBXRJ7dXKTxQL_BnEeA@mail.gmail.com>
Message-ID: <CAC2h7uuRCxGew1K1DkX5yhuuf++0D_fAuo4f_QPSR89ov10pfA@mail.gmail.com>

This bug is still present in the R-4.1.

Best,
Kasper

On Fri, Sep 28, 2018 at 8:02 PM Peter Langfelder <peter.langfelder at gmail.com>
wrote:

> For what it's worth, the same bug is present on linux when compiling R
> with a custom BLAS (either ATLAS or OpenBLAS). The directory needs to
> be made by hand first. I beleive I have reported this some time ago
> but no action was taken. Compiling R with R internal BLAS does not
> results in the error.
>
> Peter
> On Fri, Sep 28, 2018 at 10:52 AM Kasper Daniel Hansen
> <kasperdanielhansen at gmail.com> wrote:
> >
> > I am trying to compile and install R under High Sierra with Accelerate
> BLAS
> > but with R lapack.
> >
> > My relevant configure call is   --with-blas="-framework Accelerate" but
> > omitting --with-lapack. Full call is pasted at the end of this email
> >
> > I can do
> >   make
> >   make check
> > but make install fails with
> >
> > make[2]: Nothing to be done for `install'.
> > /usr/local/clang6/bin/clang -I. -I../../src/include
> > -I../../../R-3.5.x-src/src/include -I/opt/X11/include
> -I/usr/local/include
> > -DHAVE_CONFIG_H    -Wall -mtune=native -g -O2  -L/usr/local/clang6/lib
> > -L/usr/local/lib -L/usr/local/opt/tcl-tk/lib
> > -DR_HOME='"/usr/local/R/R-3.5.x/lib/R"' \
> >   -o Rscript ../../../R-3.5.x-src/src/unix/Rscript.c
> > mkdir /usr/local/R/R-3.5.x/lib/R/bin/exec
> > mkdir /usr/local/R/R-3.5.x/lib/R/modules
> > cp: /usr/local/R/R-3.5.x/lib/R/lib/libRlapack.dylib: No such file or
> > directory
> > make[3]: *** [install] Error 1
> > make[2]: *** [install] Error 1
> > make[1]: *** [install] Error 1
> > make: *** [install] Error 1
> >
> > I manually verified that libRlapack.dylib had been build in the building
> > directory's "lib".  I then just did
> >
> > sudo mkdir /usr/local/R/R-3.5.x/lib/R/lib
> >
> > (my installation directory is /usr/local/R/R-3.5.x) and redid make
> install
> > which now worked.  I get
> >
> > $ ls /usr/local/R/R-3.5.x/lib/R/lib
> > libRlapack.dylib
> >
> > My _guess_ is that since I am using R's lapack and system BLAS that the
> > RHOME/lib directory does not get created.
> >
> > Btw., this might be a bad idea (happy to hear about this) but the
> > installation should work since I can do make check
> >
> > Kasper
> >
> > configure
> >
> > ../${SRCDIR}/configure SHELL='/bin/bash' \
> >   --prefix=/usr/local/R/R-${R_VERSION} --disable-R-framework\
> >   CC="/usr/local/clang6/bin/clang" \
> >   CXX="/usr/local/clang6/bin/clang++" \
> >   F77="/usr/local/gfortran/bin/gfortran" \
> >   FC="$F77" \
> >   OBJC="clang" \
> >   CFLAGS="-Wall -mtune=native -g -O2" \
> >   CXXFLAGS="-Wall -mtune=natuve -g -O2" \
> >   OBJCFLAGS="-Wall -mtune=native -g -O2 -fobjc-exceptions" \
> >   F77FLAGS="-Wall -g -O2 -mtune=generic" \
> >   FCFLAGS="$F77FLAGS" \
> >   FLIBS="-L/usr/local/gfortran/lib/gcc/x86_64-apple-darwin15/6.1.0
> > -L/usr/local/gfortran/lib -lgfortran -lquadmath -lm" \
> >   LDFLAGS="-L/usr/local/clang6/lib -L/usr/local/lib" \
> >   DYLD_FALLBACK_LIBRARY_PATH="/usr/local/clang6/lib:/usr/local/lib" \
> >
> >
> PKG_CONFIG_PATH="/opt/X11/lib/pkgconfig:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig"
> > \
> >   JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Home" \
> >   JAVA_CPPFLAGS="-I/System/Library/Frameworks/JavaVM.framework/Headers" \
> >   JAVA_LD_LIBRARY_PATH="" \
> >   JAVA_LIBS="-framework JavaVM" \
> >   --enable-memory-profiling\
> >   --x-includes=/opt/X11/include --x-libraries=/opt/X11/lib\
> >   -with-tcltk=/usr/local/opt/tcl-tk/lib\
> >   --with-blas="-framework Accelerate" | tee ../configure-${R_VERSION}
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Best,
Kasper

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Mon May 17 22:17:07 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 18 May 2021 08:17:07 +1200
Subject: [R-SIG-Mac] possible bug in R's make install
In-Reply-To: <CAC2h7uuRCxGew1K1DkX5yhuuf++0D_fAuo4f_QPSR89ov10pfA@mail.gmail.com>
References: <CAC2h7uvtuYEj6_QKBs6xxa5-46PKY3D9Z+ucG05G7rM=AuAE3Q@mail.gmail.com>
 <CA+hbrhXs9Wx6=UUTuTrK6SZSAvGet4JZBXRJ7dXKTxQL_BnEeA@mail.gmail.com>
 <CAC2h7uuRCxGew1K1DkX5yhuuf++0D_fAuo4f_QPSR89ov10pfA@mail.gmail.com>
Message-ID: <CFF23507-97F5-4BBC-B557-D22E6FE8494C@R-project.org>


Has anyone reported this bug at bugs.R-project.org? Quick search doesn't yield anything - Peter can you post the reference, please, if you reported it there? Since this is not a Mac-specific issue that's where should go if it is to be fixed.

Cheers,
Simon


> On May 18, 2021, at 12:32 AM, Kasper Daniel Hansen <kasperdanielhansen at gmail.com> wrote:
> 
> This bug is still present in the R-4.1.
> 
> Best,
> Kasper
> 
> On Fri, Sep 28, 2018 at 8:02 PM Peter Langfelder <peter.langfelder at gmail.com>
> wrote:
> 
>> For what it's worth, the same bug is present on linux when compiling R
>> with a custom BLAS (either ATLAS or OpenBLAS). The directory needs to
>> be made by hand first. I beleive I have reported this some time ago
>> but no action was taken. Compiling R with R internal BLAS does not
>> results in the error.
>> 
>> Peter
>> On Fri, Sep 28, 2018 at 10:52 AM Kasper Daniel Hansen
>> <kasperdanielhansen at gmail.com> wrote:
>>> 
>>> I am trying to compile and install R under High Sierra with Accelerate
>> BLAS
>>> but with R lapack.
>>> 
>>> My relevant configure call is   --with-blas="-framework Accelerate" but
>>> omitting --with-lapack. Full call is pasted at the end of this email
>>> 
>>> I can do
>>>  make
>>>  make check
>>> but make install fails with
>>> 
>>> make[2]: Nothing to be done for `install'.
>>> /usr/local/clang6/bin/clang -I. -I../../src/include
>>> -I../../../R-3.5.x-src/src/include -I/opt/X11/include
>> -I/usr/local/include
>>> -DHAVE_CONFIG_H    -Wall -mtune=native -g -O2  -L/usr/local/clang6/lib
>>> -L/usr/local/lib -L/usr/local/opt/tcl-tk/lib
>>> -DR_HOME='"/usr/local/R/R-3.5.x/lib/R"' \
>>>  -o Rscript ../../../R-3.5.x-src/src/unix/Rscript.c
>>> mkdir /usr/local/R/R-3.5.x/lib/R/bin/exec
>>> mkdir /usr/local/R/R-3.5.x/lib/R/modules
>>> cp: /usr/local/R/R-3.5.x/lib/R/lib/libRlapack.dylib: No such file or
>>> directory
>>> make[3]: *** [install] Error 1
>>> make[2]: *** [install] Error 1
>>> make[1]: *** [install] Error 1
>>> make: *** [install] Error 1
>>> 
>>> I manually verified that libRlapack.dylib had been build in the building
>>> directory's "lib".  I then just did
>>> 
>>> sudo mkdir /usr/local/R/R-3.5.x/lib/R/lib
>>> 
>>> (my installation directory is /usr/local/R/R-3.5.x) and redid make
>> install
>>> which now worked.  I get
>>> 
>>> $ ls /usr/local/R/R-3.5.x/lib/R/lib
>>> libRlapack.dylib
>>> 
>>> My _guess_ is that since I am using R's lapack and system BLAS that the
>>> RHOME/lib directory does not get created.
>>> 
>>> Btw., this might be a bad idea (happy to hear about this) but the
>>> installation should work since I can do make check
>>> 
>>> Kasper
>>> 
>>> configure
>>> 
>>> ../${SRCDIR}/configure SHELL='/bin/bash' \
>>>  --prefix=/usr/local/R/R-${R_VERSION} --disable-R-framework\
>>>  CC="/usr/local/clang6/bin/clang" \
>>>  CXX="/usr/local/clang6/bin/clang++" \
>>>  F77="/usr/local/gfortran/bin/gfortran" \
>>>  FC="$F77" \
>>>  OBJC="clang" \
>>>  CFLAGS="-Wall -mtune=native -g -O2" \
>>>  CXXFLAGS="-Wall -mtune=natuve -g -O2" \
>>>  OBJCFLAGS="-Wall -mtune=native -g -O2 -fobjc-exceptions" \
>>>  F77FLAGS="-Wall -g -O2 -mtune=generic" \
>>>  FCFLAGS="$F77FLAGS" \
>>>  FLIBS="-L/usr/local/gfortran/lib/gcc/x86_64-apple-darwin15/6.1.0
>>> -L/usr/local/gfortran/lib -lgfortran -lquadmath -lm" \
>>>  LDFLAGS="-L/usr/local/clang6/lib -L/usr/local/lib" \
>>>  DYLD_FALLBACK_LIBRARY_PATH="/usr/local/clang6/lib:/usr/local/lib" \
>>> 
>>> 
>> PKG_CONFIG_PATH="/opt/X11/lib/pkgconfig:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig"
>>> \
>>>  JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Home" \
>>>  JAVA_CPPFLAGS="-I/System/Library/Frameworks/JavaVM.framework/Headers" \
>>>  JAVA_LD_LIBRARY_PATH="" \
>>>  JAVA_LIBS="-framework JavaVM" \
>>>  --enable-memory-profiling\
>>>  --x-includes=/opt/X11/include --x-libraries=/opt/X11/lib\
>>>  -with-tcltk=/usr/local/opt/tcl-tk/lib\
>>>  --with-blas="-framework Accelerate" | tee ../configure-${R_VERSION}
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> -- 
> Best,
> Kasper
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From k@@perd@n|e|h@n@en @end|ng |rom gm@||@com  Tue May 18 13:02:30 2021
From: k@@perd@n|e|h@n@en @end|ng |rom gm@||@com (Kasper Daniel Hansen)
Date: Tue, 18 May 2021 13:02:30 +0200
Subject: [R-SIG-Mac] possible bug in R's make install
In-Reply-To: <CFF23507-97F5-4BBC-B557-D22E6FE8494C@R-project.org>
References: <CAC2h7uvtuYEj6_QKBs6xxa5-46PKY3D9Z+ucG05G7rM=AuAE3Q@mail.gmail.com>
 <CA+hbrhXs9Wx6=UUTuTrK6SZSAvGet4JZBXRJ7dXKTxQL_BnEeA@mail.gmail.com>
 <CAC2h7uuRCxGew1K1DkX5yhuuf++0D_fAuo4f_QPSR89ov10pfA@mail.gmail.com>
 <CFF23507-97F5-4BBC-B557-D22E6FE8494C@R-project.org>
Message-ID: <CAC2h7uv6dCHWJobHm+yDjCbnG9=2EBejh97S=HzAkxbXZzxBSg@mail.gmail.com>

I'll file a bug report from memory.

On Tue, May 18, 2021 at 12:46 AM Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> Has anyone reported this bug at bugs.R-project.org? Quick search doesn't
> yield anything - Peter can you post the reference, please, if you reported
> it there? Since this is not a Mac-specific issue that's where should go if
> it is to be fixed.
>
> Cheers,
> Simon
>
>
> > On May 18, 2021, at 12:32 AM, Kasper Daniel Hansen <
> kasperdanielhansen at gmail.com> wrote:
> >
> > This bug is still present in the R-4.1.
> >
> > Best,
> > Kasper
> >
> > On Fri, Sep 28, 2018 at 8:02 PM Peter Langfelder <
> peter.langfelder at gmail.com>
> > wrote:
> >
> >> For what it's worth, the same bug is present on linux when compiling R
> >> with a custom BLAS (either ATLAS or OpenBLAS). The directory needs to
> >> be made by hand first. I beleive I have reported this some time ago
> >> but no action was taken. Compiling R with R internal BLAS does not
> >> results in the error.
> >>
> >> Peter
> >> On Fri, Sep 28, 2018 at 10:52 AM Kasper Daniel Hansen
> >> <kasperdanielhansen at gmail.com> wrote:
> >>>
> >>> I am trying to compile and install R under High Sierra with Accelerate
> >> BLAS
> >>> but with R lapack.
> >>>
> >>> My relevant configure call is   --with-blas="-framework Accelerate" but
> >>> omitting --with-lapack. Full call is pasted at the end of this email
> >>>
> >>> I can do
> >>>  make
> >>>  make check
> >>> but make install fails with
> >>>
> >>> make[2]: Nothing to be done for `install'.
> >>> /usr/local/clang6/bin/clang -I. -I../../src/include
> >>> -I../../../R-3.5.x-src/src/include -I/opt/X11/include
> >> -I/usr/local/include
> >>> -DHAVE_CONFIG_H    -Wall -mtune=native -g -O2  -L/usr/local/clang6/lib
> >>> -L/usr/local/lib -L/usr/local/opt/tcl-tk/lib
> >>> -DR_HOME='"/usr/local/R/R-3.5.x/lib/R"' \
> >>>  -o Rscript ../../../R-3.5.x-src/src/unix/Rscript.c
> >>> mkdir /usr/local/R/R-3.5.x/lib/R/bin/exec
> >>> mkdir /usr/local/R/R-3.5.x/lib/R/modules
> >>> cp: /usr/local/R/R-3.5.x/lib/R/lib/libRlapack.dylib: No such file or
> >>> directory
> >>> make[3]: *** [install] Error 1
> >>> make[2]: *** [install] Error 1
> >>> make[1]: *** [install] Error 1
> >>> make: *** [install] Error 1
> >>>
> >>> I manually verified that libRlapack.dylib had been build in the
> building
> >>> directory's "lib".  I then just did
> >>>
> >>> sudo mkdir /usr/local/R/R-3.5.x/lib/R/lib
> >>>
> >>> (my installation directory is /usr/local/R/R-3.5.x) and redid make
> >> install
> >>> which now worked.  I get
> >>>
> >>> $ ls /usr/local/R/R-3.5.x/lib/R/lib
> >>> libRlapack.dylib
> >>>
> >>> My _guess_ is that since I am using R's lapack and system BLAS that the
> >>> RHOME/lib directory does not get created.
> >>>
> >>> Btw., this might be a bad idea (happy to hear about this) but the
> >>> installation should work since I can do make check
> >>>
> >>> Kasper
> >>>
> >>> configure
> >>>
> >>> ../${SRCDIR}/configure SHELL='/bin/bash' \
> >>>  --prefix=/usr/local/R/R-${R_VERSION} --disable-R-framework\
> >>>  CC="/usr/local/clang6/bin/clang" \
> >>>  CXX="/usr/local/clang6/bin/clang++" \
> >>>  F77="/usr/local/gfortran/bin/gfortran" \
> >>>  FC="$F77" \
> >>>  OBJC="clang" \
> >>>  CFLAGS="-Wall -mtune=native -g -O2" \
> >>>  CXXFLAGS="-Wall -mtune=natuve -g -O2" \
> >>>  OBJCFLAGS="-Wall -mtune=native -g -O2 -fobjc-exceptions" \
> >>>  F77FLAGS="-Wall -g -O2 -mtune=generic" \
> >>>  FCFLAGS="$F77FLAGS" \
> >>>  FLIBS="-L/usr/local/gfortran/lib/gcc/x86_64-apple-darwin15/6.1.0
> >>> -L/usr/local/gfortran/lib -lgfortran -lquadmath -lm" \
> >>>  LDFLAGS="-L/usr/local/clang6/lib -L/usr/local/lib" \
> >>>  DYLD_FALLBACK_LIBRARY_PATH="/usr/local/clang6/lib:/usr/local/lib" \
> >>>
> >>>
> >>
> PKG_CONFIG_PATH="/opt/X11/lib/pkgconfig:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig"
> >>> \
> >>>  JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Home" \
> >>>  JAVA_CPPFLAGS="-I/System/Library/Frameworks/JavaVM.framework/Headers"
> \
> >>>  JAVA_LD_LIBRARY_PATH="" \
> >>>  JAVA_LIBS="-framework JavaVM" \
> >>>  --enable-memory-profiling\
> >>>  --x-includes=/opt/X11/include --x-libraries=/opt/X11/lib\
> >>>  -with-tcltk=/usr/local/opt/tcl-tk/lib\
> >>>  --with-blas="-framework Accelerate" | tee ../configure-${R_VERSION}
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >
> >
> > --
> > Best,
> > Kasper
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>
>

-- 
Best,
Kasper

	[[alternative HTML version deleted]]


From ren@tomor@|@@r@ujo @end|ng |rom gm@||@com  Wed May 19 11:33:59 2021
From: ren@tomor@|@@r@ujo @end|ng |rom gm@||@com (Renato Morais)
Date: Wed, 19 May 2021 19:33:59 +1000
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
Message-ID: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>

Hi all,

I'm new here, so please forgive my clumsy error reporting.

I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
Rosetta was extremely slow on my machine). I also installed the latest
XQuartz, as indicated (v 2.8.1).

Sad story is, when I try a simple install.packages command, it first
appears to ignore me, after returning 'Please select a CRAN mirror for use
in this session'. if I insist, it crashes. No useful error messages. Trying
via the Package Installer tab didn't work either. It doesn't find any
packages, indeed it crashes if I ask it to load the list.

Trying to open via R.Studio 1.4.1106 was as unsuccessful. In fact, I get a
nice 'Error starting R' rendered window saying it cannot load my library:

dyld: could not load inserted library
'/Library/Frameworks/R.framework/Resources/lib/libR.dylib' because no
suitable image found. Did find:
/Library/Frameworks/R.framework/Resources/lib/libR.dylib: mach-o, but wrong
architecture /Library/Frameworks/R.framework/Resources/lib/libR.dylib:
stat() failed with errno=1

In summary, can anybody give me an insight on what might be going on?

Cheers and thanks in advance,
Renato

-- 

*Renato Morais*



--

	[[alternative HTML version deleted]]


From jeroen @end|ng |rom berke|ey@edu  Wed May 19 13:00:14 2021
From: jeroen @end|ng |rom berke|ey@edu (Jeroen Ooms)
Date: Wed, 19 May 2021 13:00:14 +0200
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
Message-ID: <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>

On Wed, May 19, 2021 at 11:34 AM Renato Morais
<renatomoraisaraujo at gmail.com> wrote:
>
> Hi all,
>
> I'm new here, so please forgive my clumsy error reporting.
>
> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
> Rosetta was extremely slow on my machine). I also installed the latest
> XQuartz, as indicated (v 2.8.1).
>
> Sad story is, when I try a simple install.packages command, it first
> appears to ignore me, after returning 'Please select a CRAN mirror for use
> in this session'. if I insist, it crashes. No useful error messages. Trying
> via the Package Installer tab didn't work either. It doesn't find any
> packages, indeed it crashes if I ask it to load the list.

This indeed sounds like an xQuartz issue, failing to popup the mirror
selection menu. Does everything work if you manually set your CRAN
mirror first, e.g:

  options(repos=c(CRAN="https://cloud.r-project.org"))

Alternatively you can disable the popup menus all-together using:

  options(menu.graphics=FALSE)

Which should probably be the default.


From ken @end|ng |rom kjbe@th@com@@u  Wed May 19 14:04:02 2021
From: ken @end|ng |rom kjbe@th@com@@u (Ken Beath)
Date: Wed, 19 May 2021 22:04:02 +1000
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
Message-ID: <12102E2F-148A-4036-9575-E3C63D5550D1@kjbeath.com.au>

According to RStudio support for ARM R is only available in the RStudio daily builds https://dailies.rstudio.com <https://dailies.rstudio.com/> which are very unstable.

Ken

> On 19 May 2021, at 7:33 pm, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> 
> Hi all,
> 
> I'm new here, so please forgive my clumsy error reporting.
> 
> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
> Rosetta was extremely slow on my machine). I also installed the latest
> XQuartz, as indicated (v 2.8.1).
> 
> Sad story is, when I try a simple install.packages command, it first
> appears to ignore me, after returning 'Please select a CRAN mirror for use
> in this session'. if I insist, it crashes. No useful error messages. Trying
> via the Package Installer tab didn't work either. It doesn't find any
> packages, indeed it crashes if I ask it to load the list.
> 
> Trying to open via R.Studio 1.4.1106 was as unsuccessful. In fact, I get a
> nice 'Error starting R' rendered window saying it cannot load my library:
> 
> dyld: could not load inserted library
> '/Library/Frameworks/R.framework/Resources/lib/libR.dylib' because no
> suitable image found. Did find:
> /Library/Frameworks/R.framework/Resources/lib/libR.dylib: mach-o, but wrong
> architecture /Library/Frameworks/R.framework/Resources/lib/libR.dylib:
> stat() failed with errno=1
> 
> In summary, can anybody give me an insight on what might be going on?
> 
> Cheers and thanks in advance,
> Renato
> 
> -- 
> 
> *Renato Morais*
> 
> 
> 
> --
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


	[[alternative HTML version deleted]]


From ren@tomor@|@@r@ujo @end|ng |rom gm@||@com  Wed May 19 14:07:42 2021
From: ren@tomor@|@@r@ujo @end|ng |rom gm@||@com (Renato Morais)
Date: Wed, 19 May 2021 22:07:42 +1000
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
Message-ID: <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>

Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted to
'@CRAN@' I think)!

Cheers,
Renato

On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:

> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> <renatomoraisaraujo at gmail.com> wrote:
> >
> > Hi all,
> >
> > I'm new here, so please forgive my clumsy error reporting.
> >
> > I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
> > finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
> > Rosetta was extremely slow on my machine). I also installed the latest
> > XQuartz, as indicated (v 2.8.1).
> >
> > Sad story is, when I try a simple install.packages command, it first
> > appears to ignore me, after returning 'Please select a CRAN mirror for
> use
> > in this session'. if I insist, it crashes. No useful error messages.
> Trying
> > via the Package Installer tab didn't work either. It doesn't find any
> > packages, indeed it crashes if I ask it to load the list.
>
> This indeed sounds like an xQuartz issue, failing to popup the mirror
> selection menu. Does everything work if you manually set your CRAN
> mirror first, e.g:
>
>   options(repos=c(CRAN="https://cloud.r-project.org"))
>
> Alternatively you can disable the popup menus all-together using:
>
>   options(menu.graphics=FALSE)
>
> Which should probably be the default.
>


-- 

*Renato Morais | **ARC Postdoctoral Research Associate*

Research Hub for Coral Reef Ecosystem Functions

College of Science and Engineering

ARC Centre of Excellence for Coral Reef Studies

James Cook University

Townsville, Queensland, Australia

https://www.reeffunctionhub.org

http://thebellwoodreeffishlab.com



--

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Wed May 19 23:00:46 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 20 May 2021 09:00:46 +1200
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
Message-ID: <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>


Renato,

I'm glad you have work-around, but I'd still like to get to the core of the issue, we don't want R to crash ;).
Can you, please, check your Console log to see if there is a trace of the crash and if so, send it to me?
Also are you using R in the Terminal or the R.app GUI?

Thanks,
Simon


> On 20/05/2021, at 12:07 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> 
> Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted to
> '@CRAN@' I think)!
> 
> Cheers,
> Renato
> 
> On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
> 
>> On Wed, May 19, 2021 at 11:34 AM Renato Morais
>> <renatomoraisaraujo at gmail.com> wrote:
>>> 
>>> Hi all,
>>> 
>>> I'm new here, so please forgive my clumsy error reporting.
>>> 
>>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
>>> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
>>> Rosetta was extremely slow on my machine). I also installed the latest
>>> XQuartz, as indicated (v 2.8.1).
>>> 
>>> Sad story is, when I try a simple install.packages command, it first
>>> appears to ignore me, after returning 'Please select a CRAN mirror for
>> use
>>> in this session'. if I insist, it crashes. No useful error messages.
>> Trying
>>> via the Package Installer tab didn't work either. It doesn't find any
>>> packages, indeed it crashes if I ask it to load the list.
>> 
>> This indeed sounds like an xQuartz issue, failing to popup the mirror
>> selection menu. Does everything work if you manually set your CRAN
>> mirror first, e.g:
>> 
>>  options(repos=c(CRAN="https://cloud.r-project.org"))
>> 
>> Alternatively you can disable the popup menus all-together using:
>> 
>>  options(menu.graphics=FALSE)
>> 
>> Which should probably be the default.
>> 
> 
> 
> -- 
> 
> *Renato Morais | **ARC Postdoctoral Research Associate*
> 
> Research Hub for Coral Reef Ecosystem Functions
> 
> College of Science and Engineering
> 
> ARC Centre of Excellence for Coral Reef Studies
> 
> James Cook University
> 
> Townsville, Queensland, Australia
> 
> https://www.reeffunctionhub.org
> 
> http://thebellwoodreeffishlab.com
> 
> 
> 
> --
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From ren@tomor@|@@r@ujo @end|ng |rom gm@||@com  Thu May 20 00:27:19 2021
From: ren@tomor@|@@r@ujo @end|ng |rom gm@||@com (Renato Morais)
Date: Thu, 20 May 2021 08:27:19 +1000
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
Message-ID: <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>

Hi Simon,

I'm happy to, I'm just not sure how to check previous logs...

On another note, and I'm sure this is a problem with the compiler, now that
my packages are installed, the ones I had to compile from the source cannot
be loaded.

Error: package or namespace load failed for ?nlme? in dyn.load(file,
DLLpath = DLLpath, ...):

 unable to load shared object
'/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':

  dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so,
6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib

  Referenced from:
/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so

  Reason: image not found


Any insights on how that could be solved?


Thanks again for your help,

Renato

On Thu, 20 May 2021 at 07:00, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> Renato,
>
> I'm glad you have work-around, but I'd still like to get to the core of
> the issue, we don't want R to crash ;).
> Can you, please, check your Console log to see if there is a trace of the
> crash and if so, send it to me?
> Also are you using R in the Terminal or the R.app GUI?
>
> Thanks,
> Simon
>
>
> > On 20/05/2021, at 12:07 AM, Renato Morais <renatomoraisaraujo at gmail.com>
> wrote:
> >
> > Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted
> to
> > '@CRAN@' I think)!
> >
> > Cheers,
> > Renato
> >
> > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
> >
> >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> >> <renatomoraisaraujo at gmail.com> wrote:
> >>>
> >>> Hi all,
> >>>
> >>> I'm new here, so please forgive my clumsy error reporting.
> >>>
> >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
> >>> finally enjoy a native normal-speed R (for some reason running v 4.0.5
> on
> >>> Rosetta was extremely slow on my machine). I also installed the latest
> >>> XQuartz, as indicated (v 2.8.1).
> >>>
> >>> Sad story is, when I try a simple install.packages command, it first
> >>> appears to ignore me, after returning 'Please select a CRAN mirror for
> >> use
> >>> in this session'. if I insist, it crashes. No useful error messages.
> >> Trying
> >>> via the Package Installer tab didn't work either. It doesn't find any
> >>> packages, indeed it crashes if I ask it to load the list.
> >>
> >> This indeed sounds like an xQuartz issue, failing to popup the mirror
> >> selection menu. Does everything work if you manually set your CRAN
> >> mirror first, e.g:
> >>
> >>  options(repos=c(CRAN="https://cloud.r-project.org"))
> >>
> >> Alternatively you can disable the popup menus all-together using:
> >>
> >>  options(menu.graphics=FALSE)
> >>
> >> Which should probably be the default.
> >>
> >
> >
> > --
> >
> > *Renato Morais | **ARC Postdoctoral Research Associate*
> >
> > Research Hub for Coral Reef Ecosystem Functions
> >
> > College of Science and Engineering
> >
> > ARC Centre of Excellence for Coral Reef Studies
> >
> > James Cook University
> >
> > Townsville, Queensland, Australia
> >
> > https://www.reeffunctionhub.org
> >
> > http://thebellwoodreeffishlab.com
> >
> >
> >
> > --
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>
>

-- 

*Renato Morais | **ARC Postdoctoral Research Associate*

Research Hub for Coral Reef Ecosystem Functions

College of Science and Engineering

ARC Centre of Excellence for Coral Reef Studies

James Cook University

Townsville, Queensland, Australia

https://www.reeffunctionhub.org

http://thebellwoodreeffishlab.com



--

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Thu May 20 00:52:33 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 20 May 2021 10:52:33 +1200
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
Message-ID: <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>


Renato,

just open the Console application (under Utilities) - it has all logs from your machine - there will be either an R crash log or some entries in the system log.

As for packages, it will be solved once the R 4.1.0 binaries for arm64 are released (as soon as all builds finish), but you will have to make sure you re-install all packages to remove the pre-releases.

Thanks,
Simon



> On 20/05/2021, at 10:27 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> 
> Hi Simon,
> 
> I'm happy to, I'm just not sure how to check previous logs...
> 
> On another note, and I'm sure this is a problem with the compiler, now that my packages are installed, the ones I had to compile from the source cannot be loaded.
> 
> Error: package or namespace load failed for ?nlme? in dyn.load(file, DLLpath = DLLpath, ...):
>  unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
>   dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so, 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
>   Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
>   Reason: image not found
> 
> Any insights on how that could be solved?
> 
> Thanks again for your help,
> Renato
> 
> On Thu, 20 May 2021 at 07:00, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> Renato,
> 
> I'm glad you have work-around, but I'd still like to get to the core of the issue, we don't want R to crash ;).
> Can you, please, check your Console log to see if there is a trace of the crash and if so, send it to me?
> Also are you using R in the Terminal or the R.app GUI?
> 
> Thanks,
> Simon
> 
> 
> > On 20/05/2021, at 12:07 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> > 
> > Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted to
> > '@CRAN@' I think)!
> > 
> > Cheers,
> > Renato
> > 
> > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
> > 
> >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> >> <renatomoraisaraujo at gmail.com> wrote:
> >>> 
> >>> Hi all,
> >>> 
> >>> I'm new here, so please forgive my clumsy error reporting.
> >>> 
> >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
> >>> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
> >>> Rosetta was extremely slow on my machine). I also installed the latest
> >>> XQuartz, as indicated (v 2.8.1).
> >>> 
> >>> Sad story is, when I try a simple install.packages command, it first
> >>> appears to ignore me, after returning 'Please select a CRAN mirror for
> >> use
> >>> in this session'. if I insist, it crashes. No useful error messages.
> >> Trying
> >>> via the Package Installer tab didn't work either. It doesn't find any
> >>> packages, indeed it crashes if I ask it to load the list.
> >> 
> >> This indeed sounds like an xQuartz issue, failing to popup the mirror
> >> selection menu. Does everything work if you manually set your CRAN
> >> mirror first, e.g:
> >> 
> >>  options(repos=c(CRAN="https://cloud.r-project.org"))
> >> 
> >> Alternatively you can disable the popup menus all-together using:
> >> 
> >>  options(menu.graphics=FALSE)
> >> 
> >> Which should probably be the default.
> >> 
> > 
> > 
> > -- 
> > 
> > *Renato Morais | **ARC Postdoctoral Research Associate*
> > 
> > Research Hub for Coral Reef Ecosystem Functions
> > 
> > College of Science and Engineering
> > 
> > ARC Centre of Excellence for Coral Reef Studies
> > 
> > James Cook University
> > 
> > Townsville, Queensland, Australia
> > 
> > https://www.reeffunctionhub.org
> > 
> > http://thebellwoodreeffishlab.com
> > 
> > 
> > 
> > --
> > 
> >       [[alternative HTML version deleted]]
> > 
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > 
> 
> 
> 
> -- 
> Renato Morais | ARC Postdoctoral Research Associate
> 
> Research Hub for Coral Reef Ecosystem Functions
> College of Science and Engineering
> ARC Centre of Excellence for Coral Reef Studies
> James Cook University
> Townsville, Queensland, Australia
> https://www.reeffunctionhub.org
> http://thebellwoodreeffishlab.com
>  
> -- 


From ren@tomor@|@@r@ujo @end|ng |rom gm@||@com  Thu May 20 02:39:44 2021
From: ren@tomor@|@@r@ujo @end|ng |rom gm@||@com (Renato Morais)
Date: Thu, 20 May 2021 10:39:44 +1000
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
 <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
Message-ID: <CAKUsk_+Kt9zg4DJDyhnNKP7+qnazb7f8dH44XBQZAZHfEccv-g@mail.gmail.com>

I'd just like to add that Jeroen's workaround is only temporary: whenever I
start a new session, options('repos') becomes @CRAN@ again and I have to
manually set it, otherwise, a new crash...

On Thu, 20 May 2021 at 10:28, Renato Morais <renatomoraisaraujo at gmail.com>
wrote:

> Hi Simon,
>
> I'll attach the crash reports available, I hope that helps and sorry
> there's probably repeated crash reports, as I repeatedly tried the same
> things.
>
> So, relative to the source packages there's actually nothing I can do for
> now?
>
> Thanks for the attention,
> Renato
>
> On Thu, 20 May 2021 at 08:52, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
>
>> Renato,
>>
>> just open the Console application (under Utilities) - it has all logs
>> from your machine - there will be either an R crash log or some entries in
>> the system log.
>>
>> As for packages, it will be solved once the R 4.1.0 binaries for arm64
>> are released (as soon as all builds finish), but you will have to make sure
>> you re-install all packages to remove the pre-releases.
>>
>> Thanks,
>> Simon
>>
>>
>>
>> > On 20/05/2021, at 10:27 AM, Renato Morais <renatomoraisaraujo at gmail.com>
>> wrote:
>> >
>> > Hi Simon,
>> >
>> > I'm happy to, I'm just not sure how to check previous logs...
>> >
>> > On another note, and I'm sure this is a problem with the compiler, now
>> that my packages are installed, the ones I had to compile from the source
>> cannot be loaded.
>> >
>> > Error: package or namespace load failed for ?nlme? in dyn.load(file,
>> DLLpath = DLLpath, ...):
>> >  unable to load shared object
>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
>> >
>>  dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so,
>> 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
>> >   Referenced from:
>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
>> >   Reason: image not found
>> >
>> > Any insights on how that could be solved?
>> >
>> > Thanks again for your help,
>> > Renato
>> >
>> > On Thu, 20 May 2021 at 07:00, Simon Urbanek <
>> simon.urbanek at r-project.org> wrote:
>> > Renato,
>> >
>> > I'm glad you have work-around, but I'd still like to get to the core of
>> the issue, we don't want R to crash ;).
>> > Can you, please, check your Console log to see if there is a trace of
>> the crash and if so, send it to me?
>> > Also are you using R in the Terminal or the R.app GUI?
>> >
>> > Thanks,
>> > Simon
>> >
>> >
>> > > On 20/05/2021, at 12:07 AM, Renato Morais <
>> renatomoraisaraujo at gmail.com> wrote:
>> > >
>> > > Thanks Jeroen, fixing the repo connected me with CRAN (it was
>> defaulted to
>> > > '@CRAN@' I think)!
>> > >
>> > > Cheers,
>> > > Renato
>> > >
>> > > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu>
>> wrote:
>> > >
>> > >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
>> > >> <renatomoraisaraujo at gmail.com> wrote:
>> > >>>
>> > >>> Hi all,
>> > >>>
>> > >>> I'm new here, so please forgive my clumsy error reporting.
>> > >>>
>> > >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I
>> wanted to
>> > >>> finally enjoy a native normal-speed R (for some reason running v
>> 4.0.5 on
>> > >>> Rosetta was extremely slow on my machine). I also installed the
>> latest
>> > >>> XQuartz, as indicated (v 2.8.1).
>> > >>>
>> > >>> Sad story is, when I try a simple install.packages command, it first
>> > >>> appears to ignore me, after returning 'Please select a CRAN mirror
>> for
>> > >> use
>> > >>> in this session'. if I insist, it crashes. No useful error messages.
>> > >> Trying
>> > >>> via the Package Installer tab didn't work either. It doesn't find
>> any
>> > >>> packages, indeed it crashes if I ask it to load the list.
>> > >>
>> > >> This indeed sounds like an xQuartz issue, failing to popup the mirror
>> > >> selection menu. Does everything work if you manually set your CRAN
>> > >> mirror first, e.g:
>> > >>
>> > >>  options(repos=c(CRAN="https://cloud.r-project.org"))
>> > >>
>> > >> Alternatively you can disable the popup menus all-together using:
>> > >>
>> > >>  options(menu.graphics=FALSE)
>> > >>
>> > >> Which should probably be the default.
>> > >>
>> > >
>> > >
>> > > --
>> > >
>> > > *Renato Morais | **ARC Postdoctoral Research Associate*
>> > >
>> > > Research Hub for Coral Reef Ecosystem Functions
>> > >
>> > > College of Science and Engineering
>> > >
>> > > ARC Centre of Excellence for Coral Reef Studies
>> > >
>> > > James Cook University
>> > >
>> > > Townsville, Queensland, Australia
>> > >
>> > > https://www.reeffunctionhub.org
>> > >
>> > > http://thebellwoodreeffishlab.com
>> > >
>> > >
>> > >
>> > > --
>> > >
>> > >       [[alternative HTML version deleted]]
>> > >
>> > > _______________________________________________
>> > > R-SIG-Mac mailing list
>> > > R-SIG-Mac at r-project.org
>> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> > >
>> >
>> >
>> >
>> > --
>> > Renato Morais | ARC Postdoctoral Research Associate
>> >
>> > Research Hub for Coral Reef Ecosystem Functions
>> > College of Science and Engineering
>> > ARC Centre of Excellence for Coral Reef Studies
>> > James Cook University
>> > Townsville, Queensland, Australia
>> > https://www.reeffunctionhub.org
>> > http://thebellwoodreeffishlab.com
>> >
>> > --
>>
>>
>
> --
>
> *Renato Morais | **ARC Postdoctoral Research Associate*
>
> Research Hub for Coral Reef Ecosystem Functions
>
> College of Science and Engineering
>
> ARC Centre of Excellence for Coral Reef Studies
>
> James Cook University
>
> Townsville, Queensland, Australia
>
> https://www.reeffunctionhub.org
>
> http://thebellwoodreeffishlab.com
>
>
>
> --
>


-- 

*Renato Morais | **ARC Postdoctoral Research Associate*

Research Hub for Coral Reef Ecosystem Functions

College of Science and Engineering

ARC Centre of Excellence for Coral Reef Studies

James Cook University

Townsville, Queensland, Australia

https://www.reeffunctionhub.org

http://thebellwoodreeffishlab.com



--

	[[alternative HTML version deleted]]


From ren@tomor@|@@r@ujo @end|ng |rom gm@||@com  Thu May 20 02:28:10 2021
From: ren@tomor@|@@r@ujo @end|ng |rom gm@||@com (Renato Morais)
Date: Thu, 20 May 2021 10:28:10 +1000
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
Message-ID: <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>

Hi Simon,

I'll attach the crash reports available, I hope that helps and sorry
there's probably repeated crash reports, as I repeatedly tried the same
things.

So, relative to the source packages there's actually nothing I can do for
now?

Thanks for the attention,
Renato

On Thu, 20 May 2021 at 08:52, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> Renato,
>
> just open the Console application (under Utilities) - it has all logs from
> your machine - there will be either an R crash log or some entries in the
> system log.
>
> As for packages, it will be solved once the R 4.1.0 binaries for arm64 are
> released (as soon as all builds finish), but you will have to make sure you
> re-install all packages to remove the pre-releases.
>
> Thanks,
> Simon
>
>
>
> > On 20/05/2021, at 10:27 AM, Renato Morais <renatomoraisaraujo at gmail.com>
> wrote:
> >
> > Hi Simon,
> >
> > I'm happy to, I'm just not sure how to check previous logs...
> >
> > On another note, and I'm sure this is a problem with the compiler, now
> that my packages are installed, the ones I had to compile from the source
> cannot be loaded.
> >
> > Error: package or namespace load failed for ?nlme? in dyn.load(file,
> DLLpath = DLLpath, ...):
> >  unable to load shared object
> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
> >
>  dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so,
> 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
> >   Referenced from:
> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
> >   Reason: image not found
> >
> > Any insights on how that could be solved?
> >
> > Thanks again for your help,
> > Renato
> >
> > On Thu, 20 May 2021 at 07:00, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> > Renato,
> >
> > I'm glad you have work-around, but I'd still like to get to the core of
> the issue, we don't want R to crash ;).
> > Can you, please, check your Console log to see if there is a trace of
> the crash and if so, send it to me?
> > Also are you using R in the Terminal or the R.app GUI?
> >
> > Thanks,
> > Simon
> >
> >
> > > On 20/05/2021, at 12:07 AM, Renato Morais <
> renatomoraisaraujo at gmail.com> wrote:
> > >
> > > Thanks Jeroen, fixing the repo connected me with CRAN (it was
> defaulted to
> > > '@CRAN@' I think)!
> > >
> > > Cheers,
> > > Renato
> > >
> > > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
> > >
> > >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> > >> <renatomoraisaraujo at gmail.com> wrote:
> > >>>
> > >>> Hi all,
> > >>>
> > >>> I'm new here, so please forgive my clumsy error reporting.
> > >>>
> > >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted
> to
> > >>> finally enjoy a native normal-speed R (for some reason running v
> 4.0.5 on
> > >>> Rosetta was extremely slow on my machine). I also installed the
> latest
> > >>> XQuartz, as indicated (v 2.8.1).
> > >>>
> > >>> Sad story is, when I try a simple install.packages command, it first
> > >>> appears to ignore me, after returning 'Please select a CRAN mirror
> for
> > >> use
> > >>> in this session'. if I insist, it crashes. No useful error messages.
> > >> Trying
> > >>> via the Package Installer tab didn't work either. It doesn't find any
> > >>> packages, indeed it crashes if I ask it to load the list.
> > >>
> > >> This indeed sounds like an xQuartz issue, failing to popup the mirror
> > >> selection menu. Does everything work if you manually set your CRAN
> > >> mirror first, e.g:
> > >>
> > >>  options(repos=c(CRAN="https://cloud.r-project.org"))
> > >>
> > >> Alternatively you can disable the popup menus all-together using:
> > >>
> > >>  options(menu.graphics=FALSE)
> > >>
> > >> Which should probably be the default.
> > >>
> > >
> > >
> > > --
> > >
> > > *Renato Morais | **ARC Postdoctoral Research Associate*
> > >
> > > Research Hub for Coral Reef Ecosystem Functions
> > >
> > > College of Science and Engineering
> > >
> > > ARC Centre of Excellence for Coral Reef Studies
> > >
> > > James Cook University
> > >
> > > Townsville, Queensland, Australia
> > >
> > > https://www.reeffunctionhub.org
> > >
> > > http://thebellwoodreeffishlab.com
> > >
> > >
> > >
> > > --
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SIG-Mac at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > >
> >
> >
> >
> > --
> > Renato Morais | ARC Postdoctoral Research Associate
> >
> > Research Hub for Coral Reef Ecosystem Functions
> > College of Science and Engineering
> > ARC Centre of Excellence for Coral Reef Studies
> > James Cook University
> > Townsville, Queensland, Australia
> > https://www.reeffunctionhub.org
> > http://thebellwoodreeffishlab.com
> >
> > --
>
>

-- 

*Renato Morais | **ARC Postdoctoral Research Associate*

Research Hub for Coral Reef Ecosystem Functions

College of Science and Engineering

ARC Centre of Excellence for Coral Reef Studies

James Cook University

Townsville, Queensland, Australia

https://www.reeffunctionhub.org

http://thebellwoodreeffishlab.com



--

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210520/063a4ef1/attachment-0001.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: R_2021-05-17-082003_Renatos-MacBook-Pro.crash
Type: application/octet-stream
Size: 111105 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210520/063a4ef1/attachment-0007.obj>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: X11.bin_2021-05-19-184846_Renatos-MacBook-Pro.crash
Type: application/octet-stream
Size: 70453 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210520/063a4ef1/attachment-0008.obj>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: rsession_2021-05-19-182539_Renatos-MacBook-Pro.crash
Type: application/octet-stream
Size: 2507 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210520/063a4ef1/attachment-0009.obj>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: rsession_2021-05-19-193014_Renatos-MacBook-Pro.crash
Type: application/octet-stream
Size: 2509 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210520/063a4ef1/attachment-0010.obj>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: rsession_2021-05-19-182051_Renatos-MacBook-Pro.crash
Type: application/octet-stream
Size: 2508 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210520/063a4ef1/attachment-0011.obj>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: R_2021-05-19-181442_Renatos-MacBook-Pro.crash
Type: application/octet-stream
Size: 98080 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210520/063a4ef1/attachment-0012.obj>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: rsession_2021-05-19-182006_Renatos-MacBook-Pro.crash
Type: application/octet-stream
Size: 2565 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210520/063a4ef1/attachment-0013.obj>

From @|mon@urb@nek @end|ng |rom R-project@org  Thu May 20 03:33:12 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 20 May 2021 13:33:12 +1200
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
 <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
Message-ID: <9DE5247E-C072-4F32-A2AB-B390E68432A6@R-project.org>


Thanks for the logs. Unfortunately, there is no obvious reason for the R crash so I'll need to see if I can replicate it.

As for packages, well, there is if you are really that impatient you can either change the path to the R framework in the package instead of /opt/R or you can install the Fortran compiler from
https://mac.r-project.org/libs-arm64/gfortran-f51f1da0-darwin20.0-arm64.tar.gz
but I don't quite see why you would go into all the trouble just to run the old experimental binaries instead of the release.

Cheers,
Simon


> On 20/05/2021, at 12:28 PM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> 
> Hi Simon,
> 
> I'll attach the crash reports available, I hope that helps and sorry there's probably repeated crash reports, as I repeatedly tried the same things.
> 
> So, relative to the source packages there's actually nothing I can do for now?
> 
> Thanks for the attention,
> Renato
> 
> On Thu, 20 May 2021 at 08:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> Renato,
> 
> just open the Console application (under Utilities) - it has all logs from your machine - there will be either an R crash log or some entries in the system log.
> 
> As for packages, it will be solved once the R 4.1.0 binaries for arm64 are released (as soon as all builds finish), but you will have to make sure you re-install all packages to remove the pre-releases.
> 
> Thanks,
> Simon
> 
> 
> 
> > On 20/05/2021, at 10:27 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> > 
> > Hi Simon,
> > 
> > I'm happy to, I'm just not sure how to check previous logs...
> > 
> > On another note, and I'm sure this is a problem with the compiler, now that my packages are installed, the ones I had to compile from the source cannot be loaded.
> > 
> > Error: package or namespace load failed for ?nlme? in dyn.load(file, DLLpath = DLLpath, ...):
> >  unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
> >   dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so, 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
> >   Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
> >   Reason: image not found
> > 
> > Any insights on how that could be solved?
> > 
> > Thanks again for your help,
> > Renato
> > 
> > On Thu, 20 May 2021 at 07:00, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> > Renato,
> > 
> > I'm glad you have work-around, but I'd still like to get to the core of the issue, we don't want R to crash ;).
> > Can you, please, check your Console log to see if there is a trace of the crash and if so, send it to me?
> > Also are you using R in the Terminal or the R.app GUI?
> > 
> > Thanks,
> > Simon
> > 
> > 
> > > On 20/05/2021, at 12:07 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> > > 
> > > Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted to
> > > '@CRAN@' I think)!
> > > 
> > > Cheers,
> > > Renato
> > > 
> > > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
> > > 
> > >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> > >> <renatomoraisaraujo at gmail.com> wrote:
> > >>> 
> > >>> Hi all,
> > >>> 
> > >>> I'm new here, so please forgive my clumsy error reporting.
> > >>> 
> > >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
> > >>> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
> > >>> Rosetta was extremely slow on my machine). I also installed the latest
> > >>> XQuartz, as indicated (v 2.8.1).
> > >>> 
> > >>> Sad story is, when I try a simple install.packages command, it first
> > >>> appears to ignore me, after returning 'Please select a CRAN mirror for
> > >> use
> > >>> in this session'. if I insist, it crashes. No useful error messages.
> > >> Trying
> > >>> via the Package Installer tab didn't work either. It doesn't find any
> > >>> packages, indeed it crashes if I ask it to load the list.
> > >> 
> > >> This indeed sounds like an xQuartz issue, failing to popup the mirror
> > >> selection menu. Does everything work if you manually set your CRAN
> > >> mirror first, e.g:
> > >> 
> > >>  options(repos=c(CRAN="https://cloud.r-project.org"))
> > >> 
> > >> Alternatively you can disable the popup menus all-together using:
> > >> 
> > >>  options(menu.graphics=FALSE)
> > >> 
> > >> Which should probably be the default.
> > >> 
> > > 
> > > 
> > > -- 
> > > 
> > > *Renato Morais | **ARC Postdoctoral Research Associate*
> > > 
> > > Research Hub for Coral Reef Ecosystem Functions
> > > 
> > > College of Science and Engineering
> > > 
> > > ARC Centre of Excellence for Coral Reef Studies
> > > 
> > > James Cook University
> > > 
> > > Townsville, Queensland, Australia
> > > 
> > > https://www.reeffunctionhub.org
> > > 
> > > http://thebellwoodreeffishlab.com
> > > 
> > > 
> > > 
> > > --
> > > 
> > >       [[alternative HTML version deleted]]
> > > 
> > > _______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SIG-Mac at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > > 
> > 
> > 
> > 
> > -- 
> > Renato Morais | ARC Postdoctoral Research Associate
> > 
> > Research Hub for Coral Reef Ecosystem Functions
> > College of Science and Engineering
> > ARC Centre of Excellence for Coral Reef Studies
> > James Cook University
> > Townsville, Queensland, Australia
> > https://www.reeffunctionhub.org
> > http://thebellwoodreeffishlab.com
> >  
> > -- 
> 
> 
> 
> -- 
> Renato Morais | ARC Postdoctoral Research Associate
> 
> Research Hub for Coral Reef Ecosystem Functions
> College of Science and Engineering
> ARC Centre of Excellence for Coral Reef Studies
> James Cook University
> Townsville, Queensland, Australia
> https://www.reeffunctionhub.org
> http://thebellwoodreeffishlab.com
>  
> -- 
> <R_2021-05-17-082003_Renatos-MacBook-Pro.crash><X11.bin_2021-05-19-184846_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182539_Renatos-MacBook-Pro.crash><rsession_2021-05-19-193014_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182051_Renatos-MacBook-Pro.crash><R_2021-05-19-181442_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182006_Renatos-MacBook-Pro.crash>_______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Thu May 20 03:46:11 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 20 May 2021 13:46:11 +1200
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
 <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
Message-ID: <C4FA5D4E-30A9-4998-8A21-EC68B329343D@R-project.org>


I was able to replicate the problem - it is a bug in select.list() in the R.app GUI and it is present in both the Intel and the arm64 version of R 4.1.0 so it is not M1-specific.

The work-around is as Jeroen said to set
options(menu.graphics=FALSE)

Cheers,
Simon





> On 20/05/2021, at 12:28 PM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> 
> Hi Simon,
> 
> I'll attach the crash reports available, I hope that helps and sorry there's probably repeated crash reports, as I repeatedly tried the same things.
> 
> So, relative to the source packages there's actually nothing I can do for now?
> 
> Thanks for the attention,
> Renato
> 
> On Thu, 20 May 2021 at 08:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> Renato,
> 
> just open the Console application (under Utilities) - it has all logs from your machine - there will be either an R crash log or some entries in the system log.
> 
> As for packages, it will be solved once the R 4.1.0 binaries for arm64 are released (as soon as all builds finish), but you will have to make sure you re-install all packages to remove the pre-releases.
> 
> Thanks,
> Simon
> 
> 
> 
> > On 20/05/2021, at 10:27 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> > 
> > Hi Simon,
> > 
> > I'm happy to, I'm just not sure how to check previous logs...
> > 
> > On another note, and I'm sure this is a problem with the compiler, now that my packages are installed, the ones I had to compile from the source cannot be loaded.
> > 
> > Error: package or namespace load failed for ?nlme? in dyn.load(file, DLLpath = DLLpath, ...):
> >  unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
> >   dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so, 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
> >   Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
> >   Reason: image not found
> > 
> > Any insights on how that could be solved?
> > 
> > Thanks again for your help,
> > Renato
> > 
> > On Thu, 20 May 2021 at 07:00, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> > Renato,
> > 
> > I'm glad you have work-around, but I'd still like to get to the core of the issue, we don't want R to crash ;).
> > Can you, please, check your Console log to see if there is a trace of the crash and if so, send it to me?
> > Also are you using R in the Terminal or the R.app GUI?
> > 
> > Thanks,
> > Simon
> > 
> > 
> > > On 20/05/2021, at 12:07 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> > > 
> > > Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted to
> > > '@CRAN@' I think)!
> > > 
> > > Cheers,
> > > Renato
> > > 
> > > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
> > > 
> > >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> > >> <renatomoraisaraujo at gmail.com> wrote:
> > >>> 
> > >>> Hi all,
> > >>> 
> > >>> I'm new here, so please forgive my clumsy error reporting.
> > >>> 
> > >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
> > >>> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
> > >>> Rosetta was extremely slow on my machine). I also installed the latest
> > >>> XQuartz, as indicated (v 2.8.1).
> > >>> 
> > >>> Sad story is, when I try a simple install.packages command, it first
> > >>> appears to ignore me, after returning 'Please select a CRAN mirror for
> > >> use
> > >>> in this session'. if I insist, it crashes. No useful error messages.
> > >> Trying
> > >>> via the Package Installer tab didn't work either. It doesn't find any
> > >>> packages, indeed it crashes if I ask it to load the list.
> > >> 
> > >> This indeed sounds like an xQuartz issue, failing to popup the mirror
> > >> selection menu. Does everything work if you manually set your CRAN
> > >> mirror first, e.g:
> > >> 
> > >>  options(repos=c(CRAN="https://cloud.r-project.org"))
> > >> 
> > >> Alternatively you can disable the popup menus all-together using:
> > >> 
> > >>  options(menu.graphics=FALSE)
> > >> 
> > >> Which should probably be the default.
> > >> 
> > > 
> > > 
> > > -- 
> > > 
> > > *Renato Morais | **ARC Postdoctoral Research Associate*
> > > 
> > > Research Hub for Coral Reef Ecosystem Functions
> > > 
> > > College of Science and Engineering
> > > 
> > > ARC Centre of Excellence for Coral Reef Studies
> > > 
> > > James Cook University
> > > 
> > > Townsville, Queensland, Australia
> > > 
> > > https://www.reeffunctionhub.org
> > > 
> > > http://thebellwoodreeffishlab.com
> > > 
> > > 
> > > 
> > > --
> > > 
> > >       [[alternative HTML version deleted]]
> > > 
> > > _______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SIG-Mac at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > > 
> > 
> > 
> > 
> > -- 
> > Renato Morais | ARC Postdoctoral Research Associate
> > 
> > Research Hub for Coral Reef Ecosystem Functions
> > College of Science and Engineering
> > ARC Centre of Excellence for Coral Reef Studies
> > James Cook University
> > Townsville, Queensland, Australia
> > https://www.reeffunctionhub.org
> > http://thebellwoodreeffishlab.com
> >  
> > -- 
> 
> 
> 
> -- 
> Renato Morais | ARC Postdoctoral Research Associate
> 
> Research Hub for Coral Reef Ecosystem Functions
> College of Science and Engineering
> ARC Centre of Excellence for Coral Reef Studies
> James Cook University
> Townsville, Queensland, Australia
> https://www.reeffunctionhub.org
> http://thebellwoodreeffishlab.com
>  
> -- 
> <R_2021-05-17-082003_Renatos-MacBook-Pro.crash><X11.bin_2021-05-19-184846_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182539_Renatos-MacBook-Pro.crash><rsession_2021-05-19-193014_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182051_Renatos-MacBook-Pro.crash><R_2021-05-19-181442_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182006_Renatos-MacBook-Pro.crash>_______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Thu May 20 08:00:25 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 20 May 2021 18:00:25 +1200
Subject: [R-SIG-Mac] R 4.1.0 macOS release update
Message-ID: <B7080A86-5CC6-432D-AE79-669731F0BF98@R-project.org>


For those impatient, the R 4.1.0 releases are available from the base (Intel) and big-sur-arm64/base (arm64) directories (use https://mac.R-project.org/bin/macosx/ to avoid mirror delays):

SHA1(base/R-4.1.0.pkg)= df4d6fc17bbf6b7a27d4e015c0084d4bb6f7b428
SHA1(big-sur-arm64/base/R-4.1.0-arm64.pkg)= 7354c1b249cab9bafea6ae67c73563303a05fa17

However, the package re-builds based on the releases are not yet finished therefore I have decided not to link the releases from the main page yet as users are likely to want to install packages and may forget to re-install them in a day or so to get the released packages. The package binaries should be available likely in the next 24h at which point the main page will be updated.

Cheers,
Simon


From ren@tomor@|@@r@ujo @end|ng |rom gm@||@com  Sat May 22 02:31:41 2021
From: ren@tomor@|@@r@ujo @end|ng |rom gm@||@com (Renato Morais)
Date: Sat, 22 May 2021 10:31:41 +1000
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <C4FA5D4E-30A9-4998-8A21-EC68B329343D@R-project.org>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
 <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
 <C4FA5D4E-30A9-4998-8A21-EC68B329343D@R-project.org>
Message-ID: <CAKUsk_+xj_cycx5QtxwQXzfEO0zFfQL_xN+ETFdKi8EVDqBJCA@mail.gmail.com>

Hi Simon and all,

After reinstalling the official binary and reinstalling all packages,
almost everything is working fine. The only exception is rgdal, which is
not available as a binary and, when I try to compile it, I get the error
below. I did extract gFortran from the link you provided and moved it to
the folder /opt/R/arm64 as indicated on CRAN (print screen below).

Anything I'm clearly doing wrong? I appreciate the help.

Cheers and thanks again,
Renato

> install.packages('rgdal')
Package which is only available in source form, and may need compilation of
C/C++/Fortran: ?rgdal?
Do you want to attempt to install these from sources? (Yes/no/cancel) yes
installing the source package ?rgdal?

trying URL 'https://cran.csiro.au/src/contrib/rgdal_1.5-23.tar.gz'
Content type 'application/x-gzip' length 4393536 bytes (4.2 MB)
==================================================
downloaded 4.2 MB

configure: R_HOME: /Library/Frameworks/R.framework/Resources
configure: CC: clang -arch arm64
configure: CXX: clang++ -arch arm64 -std=gnu++14
configure: CFLAGS: -falign-functions=64 -Wall -g -O2
configure: CPPFLAGS: -I/opt/R/arm64/include
configure: CXXFLAGS: -falign-functions=64 -Wall -g -O2
configure: LDFLAGS: -L/opt/R/arm64/lib
configure: LDFLAGS: -L/opt/R/arm64/lib
configure: CXX11 is: clang++ -arch arm64, CXX11STD is: -std=gnu++11
configure: CXX is: clang++ -arch arm64 -std=gnu++11
configure: C++11 support available
configure: rgdal: 1.5-23
checking for /usr/bin/svnversion... no
configure: svn revision: 1121
checking for gdal-config... no
no

The downloaded source packages are in
?/private/var/folders/g0/k2tmg4q931s1x3cy_vm_m4cr0000gn/T/RtmpydK1sm/downloaded_packages?
Warning message:
In install.packages("rgdal") :
  installation of package ?rgdal? had non-zero exit status


[image: image.png]




On Thu, 20 May 2021 at 11:46, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> I was able to replicate the problem - it is a bug in select.list() in the
> R.app GUI and it is present in both the Intel and the arm64 version of R
> 4.1.0 so it is not M1-specific.
>
> The work-around is as Jeroen said to set
> options(menu.graphics=FALSE)
>
> Cheers,
> Simon
>
>
>
>
>
> > On 20/05/2021, at 12:28 PM, Renato Morais <renatomoraisaraujo at gmail.com>
> wrote:
> >
> > Hi Simon,
> >
> > I'll attach the crash reports available, I hope that helps and sorry
> there's probably repeated crash reports, as I repeatedly tried the same
> things.
> >
> > So, relative to the source packages there's actually nothing I can do
> for now?
> >
> > Thanks for the attention,
> > Renato
> >
> > On Thu, 20 May 2021 at 08:52, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> > Renato,
> >
> > just open the Console application (under Utilities) - it has all logs
> from your machine - there will be either an R crash log or some entries in
> the system log.
> >
> > As for packages, it will be solved once the R 4.1.0 binaries for arm64
> are released (as soon as all builds finish), but you will have to make sure
> you re-install all packages to remove the pre-releases.
> >
> > Thanks,
> > Simon
> >
> >
> >
> > > On 20/05/2021, at 10:27 AM, Renato Morais <
> renatomoraisaraujo at gmail.com> wrote:
> > >
> > > Hi Simon,
> > >
> > > I'm happy to, I'm just not sure how to check previous logs...
> > >
> > > On another note, and I'm sure this is a problem with the compiler, now
> that my packages are installed, the ones I had to compile from the source
> cannot be loaded.
> > >
> > > Error: package or namespace load failed for ?nlme? in dyn.load(file,
> DLLpath = DLLpath, ...):
> > >  unable to load shared object
> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
> > >
>  dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so,
> 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
> > >   Referenced from:
> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
> > >   Reason: image not found
> > >
> > > Any insights on how that could be solved?
> > >
> > > Thanks again for your help,
> > > Renato
> > >
> > > On Thu, 20 May 2021 at 07:00, Simon Urbanek <
> simon.urbanek at r-project.org> wrote:
> > > Renato,
> > >
> > > I'm glad you have work-around, but I'd still like to get to the core
> of the issue, we don't want R to crash ;).
> > > Can you, please, check your Console log to see if there is a trace of
> the crash and if so, send it to me?
> > > Also are you using R in the Terminal or the R.app GUI?
> > >
> > > Thanks,
> > > Simon
> > >
> > >
> > > > On 20/05/2021, at 12:07 AM, Renato Morais <
> renatomoraisaraujo at gmail.com> wrote:
> > > >
> > > > Thanks Jeroen, fixing the repo connected me with CRAN (it was
> defaulted to
> > > > '@CRAN@' I think)!
> > > >
> > > > Cheers,
> > > > Renato
> > > >
> > > > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu>
> wrote:
> > > >
> > > >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> > > >> <renatomoraisaraujo at gmail.com> wrote:
> > > >>>
> > > >>> Hi all,
> > > >>>
> > > >>> I'm new here, so please forgive my clumsy error reporting.
> > > >>>
> > > >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I
> wanted to
> > > >>> finally enjoy a native normal-speed R (for some reason running v
> 4.0.5 on
> > > >>> Rosetta was extremely slow on my machine). I also installed the
> latest
> > > >>> XQuartz, as indicated (v 2.8.1).
> > > >>>
> > > >>> Sad story is, when I try a simple install.packages command, it
> first
> > > >>> appears to ignore me, after returning 'Please select a CRAN mirror
> for
> > > >> use
> > > >>> in this session'. if I insist, it crashes. No useful error
> messages.
> > > >> Trying
> > > >>> via the Package Installer tab didn't work either. It doesn't find
> any
> > > >>> packages, indeed it crashes if I ask it to load the list.
> > > >>
> > > >> This indeed sounds like an xQuartz issue, failing to popup the
> mirror
> > > >> selection menu. Does everything work if you manually set your CRAN
> > > >> mirror first, e.g:
> > > >>
> > > >>  options(repos=c(CRAN="https://cloud.r-project.org"))
> > > >>
> > > >> Alternatively you can disable the popup menus all-together using:
> > > >>
> > > >>  options(menu.graphics=FALSE)
> > > >>
> > > >> Which should probably be the default.
> > > >>
> > > >
> > > >
> > > > --
> > > >
> > > > *Renato Morais | **ARC Postdoctoral Research Associate*
> > > >
> > > > Research Hub for Coral Reef Ecosystem Functions
> > > >
> > > > College of Science and Engineering
> > > >
> > > > ARC Centre of Excellence for Coral Reef Studies
> > > >
> > > > James Cook University
> > > >
> > > > Townsville, Queensland, Australia
> > > >
> > > > https://www.reeffunctionhub.org
> > > >
> > > > http://thebellwoodreeffishlab.com
> > > >
> > > >
> > > >
> > > > --
> > > >
> > > >       [[alternative HTML version deleted]]
> > > >
> > > > _______________________________________________
> > > > R-SIG-Mac mailing list
> > > > R-SIG-Mac at r-project.org
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > > >
> > >
> > >
> > >
> > > --
> > > Renato Morais | ARC Postdoctoral Research Associate
> > >
> > > Research Hub for Coral Reef Ecosystem Functions
> > > College of Science and Engineering
> > > ARC Centre of Excellence for Coral Reef Studies
> > > James Cook University
> > > Townsville, Queensland, Australia
> > > https://www.reeffunctionhub.org
> > > http://thebellwoodreeffishlab.com
> > >
> > > --
> >
> >
> >
> > --
> > Renato Morais | ARC Postdoctoral Research Associate
> >
> > Research Hub for Coral Reef Ecosystem Functions
> > College of Science and Engineering
> > ARC Centre of Excellence for Coral Reef Studies
> > James Cook University
> > Townsville, Queensland, Australia
> > https://www.reeffunctionhub.org
> > http://thebellwoodreeffishlab.com
> >
> > --
> >
> <R_2021-05-17-082003_Renatos-MacBook-Pro.crash><X11.bin_2021-05-19-184846_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182539_Renatos-MacBook-Pro.crash><rsession_2021-05-19-193014_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182051_Renatos-MacBook-Pro.crash><R_2021-05-19-181442_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182006_Renatos-MacBook-Pro.crash>_______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>

-- 

*Renato Morais | **ARC Postdoctoral Research Associate*

Research Hub for Coral Reef Ecosystem Functions

College of Science and Engineering

ARC Centre of Excellence for Coral Reef Studies

James Cook University

Townsville, Queensland, Australia

https://www.reeffunctionhub.org

http://thebellwoodreeffishlab.com



--

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210522/f268b402/attachment-0001.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 226824 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210522/f268b402/attachment-0001.png>

From @|mon@urb@nek @end|ng |rom R-project@org  Sat May 22 23:57:14 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 23 May 2021 09:57:14 +1200
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <CAKUsk_+xj_cycx5QtxwQXzfEO0zFfQL_xN+ETFdKi8EVDqBJCA@mail.gmail.com>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
 <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
 <C4FA5D4E-30A9-4998-8A21-EC68B329343D@R-project.org>
 <CAKUsk_+xj_cycx5QtxwQXzfEO0zFfQL_xN+ETFdKi8EVDqBJCA@mail.gmail.com>
Message-ID: <E6C682E5-8DE7-455B-A98C-967BACBEA75D@R-project.org>


Renato,

rgdal didn't pass checks in the big-sur build, that's why it was not available. rgdal has a very long list of dependencies that are very fragile, so it is quite hard to build yourself (you'd need to build and compile quite a few libraries).
For now I have temporarily disabled the checks for some of the spatial libraries like sf and rdgal since they don't pass them, but it would be good if the issues could be sorted out upstream.

Cheers,
Simon



> On May 22, 2021, at 12:31 PM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> 
> Hi Simon and all,
> 
> After reinstalling the official binary and reinstalling all packages, almost everything is working fine. The only exception is rgdal, which is not available as a binary and, when I try to compile it, I get the error below. I did extract gFortran from the link you provided and moved it to the folder /opt/R/arm64 as indicated on CRAN (print screen below).
> 
> Anything I'm clearly doing wrong? I appreciate the help.
> 
> Cheers and thanks again,
> Renato
> 
> > install.packages('rgdal')
> Package which is only available in source form, and may need compilation of C/C++/Fortran: ?rgdal?
> Do you want to attempt to install these from sources? (Yes/no/cancel) yes
> installing the source package ?rgdal?
> 
> trying URL 'https://cran.csiro.au/src/contrib/rgdal_1.5-23.tar.gz'
> Content type 'application/x-gzip' length 4393536 bytes (4.2 MB)
> ==================================================
> downloaded 4.2 MB
> 
> configure: R_HOME: /Library/Frameworks/R.framework/Resources
> configure: CC: clang -arch arm64
> configure: CXX: clang++ -arch arm64 -std=gnu++14
> configure: CFLAGS: -falign-functions=64 -Wall -g -O2
> configure: CPPFLAGS: -I/opt/R/arm64/include
> configure: CXXFLAGS: -falign-functions=64 -Wall -g -O2
> configure: LDFLAGS: -L/opt/R/arm64/lib
> configure: LDFLAGS: -L/opt/R/arm64/lib
> configure: CXX11 is: clang++ -arch arm64, CXX11STD is: -std=gnu++11
> configure: CXX is: clang++ -arch arm64 -std=gnu++11
> configure: C++11 support available
> configure: rgdal: 1.5-23
> checking for /usr/bin/svnversion... no
> configure: svn revision: 1121
> checking for gdal-config... no
> no
> 
> The downloaded source packages are in
> 	?/private/var/folders/g0/k2tmg4q931s1x3cy_vm_m4cr0000gn/T/RtmpydK1sm/downloaded_packages?
> Warning message:
> In install.packages("rgdal") :
>   installation of package ?rgdal? had non-zero exit status
> 
> 
> <image.png>
> 
> 
> 
> 
> On Thu, 20 May 2021 at 11:46, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> I was able to replicate the problem - it is a bug in select.list() in the R.app GUI and it is present in both the Intel and the arm64 version of R 4.1.0 so it is not M1-specific.
> 
> The work-around is as Jeroen said to set
> options(menu.graphics=FALSE)
> 
> Cheers,
> Simon
> 
> 
> 
> 
> 
> > On 20/05/2021, at 12:28 PM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> > 
> > Hi Simon,
> > 
> > I'll attach the crash reports available, I hope that helps and sorry there's probably repeated crash reports, as I repeatedly tried the same things.
> > 
> > So, relative to the source packages there's actually nothing I can do for now?
> > 
> > Thanks for the attention,
> > Renato
> > 
> > On Thu, 20 May 2021 at 08:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> > Renato,
> > 
> > just open the Console application (under Utilities) - it has all logs from your machine - there will be either an R crash log or some entries in the system log.
> > 
> > As for packages, it will be solved once the R 4.1.0 binaries for arm64 are released (as soon as all builds finish), but you will have to make sure you re-install all packages to remove the pre-releases.
> > 
> > Thanks,
> > Simon
> > 
> > 
> > 
> > > On 20/05/2021, at 10:27 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> > > 
> > > Hi Simon,
> > > 
> > > I'm happy to, I'm just not sure how to check previous logs...
> > > 
> > > On another note, and I'm sure this is a problem with the compiler, now that my packages are installed, the ones I had to compile from the source cannot be loaded.
> > > 
> > > Error: package or namespace load failed for ?nlme? in dyn.load(file, DLLpath = DLLpath, ...):
> > >  unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
> > >   dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so, 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
> > >   Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
> > >   Reason: image not found
> > > 
> > > Any insights on how that could be solved?
> > > 
> > > Thanks again for your help,
> > > Renato
> > > 
> > > On Thu, 20 May 2021 at 07:00, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> > > Renato,
> > > 
> > > I'm glad you have work-around, but I'd still like to get to the core of the issue, we don't want R to crash ;).
> > > Can you, please, check your Console log to see if there is a trace of the crash and if so, send it to me?
> > > Also are you using R in the Terminal or the R.app GUI?
> > > 
> > > Thanks,
> > > Simon
> > > 
> > > 
> > > > On 20/05/2021, at 12:07 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
> > > > 
> > > > Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted to
> > > > '@CRAN@' I think)!
> > > > 
> > > > Cheers,
> > > > Renato
> > > > 
> > > > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
> > > > 
> > > >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> > > >> <renatomoraisaraujo at gmail.com> wrote:
> > > >>> 
> > > >>> Hi all,
> > > >>> 
> > > >>> I'm new here, so please forgive my clumsy error reporting.
> > > >>> 
> > > >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
> > > >>> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
> > > >>> Rosetta was extremely slow on my machine). I also installed the latest
> > > >>> XQuartz, as indicated (v 2.8.1).
> > > >>> 
> > > >>> Sad story is, when I try a simple install.packages command, it first
> > > >>> appears to ignore me, after returning 'Please select a CRAN mirror for
> > > >> use
> > > >>> in this session'. if I insist, it crashes. No useful error messages.
> > > >> Trying
> > > >>> via the Package Installer tab didn't work either. It doesn't find any
> > > >>> packages, indeed it crashes if I ask it to load the list.
> > > >> 
> > > >> This indeed sounds like an xQuartz issue, failing to popup the mirror
> > > >> selection menu. Does everything work if you manually set your CRAN
> > > >> mirror first, e.g:
> > > >> 
> > > >>  options(repos=c(CRAN="https://cloud.r-project.org"))
> > > >> 
> > > >> Alternatively you can disable the popup menus all-together using:
> > > >> 
> > > >>  options(menu.graphics=FALSE)
> > > >> 
> > > >> Which should probably be the default.
> > > >> 
> > > > 
> > > > 
> > > > -- 
> > > > 
> > > > *Renato Morais | **ARC Postdoctoral Research Associate*
> > > > 
> > > > Research Hub for Coral Reef Ecosystem Functions
> > > > 
> > > > College of Science and Engineering
> > > > 
> > > > ARC Centre of Excellence for Coral Reef Studies
> > > > 
> > > > James Cook University
> > > > 
> > > > Townsville, Queensland, Australia
> > > > 
> > > > https://www.reeffunctionhub.org
> > > > 
> > > > http://thebellwoodreeffishlab.com
> > > > 
> > > > 
> > > > 
> > > > --
> > > > 
> > > >       [[alternative HTML version deleted]]
> > > > 
> > > > _______________________________________________
> > > > R-SIG-Mac mailing list
> > > > R-SIG-Mac at r-project.org
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > > > 
> > > 
> > > 
> > > 
> > > -- 
> > > Renato Morais | ARC Postdoctoral Research Associate
> > > 
> > > Research Hub for Coral Reef Ecosystem Functions
> > > College of Science and Engineering
> > > ARC Centre of Excellence for Coral Reef Studies
> > > James Cook University
> > > Townsville, Queensland, Australia
> > > https://www.reeffunctionhub.org
> > > http://thebellwoodreeffishlab.com
> > >  
> > > -- 
> > 
> > 
> > 
> > -- 
> > Renato Morais | ARC Postdoctoral Research Associate
> > 
> > Research Hub for Coral Reef Ecosystem Functions
> > College of Science and Engineering
> > ARC Centre of Excellence for Coral Reef Studies
> > James Cook University
> > Townsville, Queensland, Australia
> > https://www.reeffunctionhub.org
> > http://thebellwoodreeffishlab.com
> >  
> > -- 
> > <R_2021-05-17-082003_Renatos-MacBook-Pro.crash><X11.bin_2021-05-19-184846_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182539_Renatos-MacBook-Pro.crash><rsession_2021-05-19-193014_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182051_Renatos-MacBook-Pro.crash><R_2021-05-19-181442_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182006_Renatos-MacBook-Pro.crash>_______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 
> -- 
> Renato Morais | ARC Postdoctoral Research Associate
> 
> Research Hub for Coral Reef Ecosystem Functions
> College of Science and Engineering
> ARC Centre of Excellence for Coral Reef Studies
> James Cook University
> Townsville, Queensland, Australia
> https://www.reeffunctionhub.org
> http://thebellwoodreeffishlab.com
>  
> -- 


From ren@tomor@|@@r@ujo @end|ng |rom gm@||@com  Sun May 23 00:03:40 2021
From: ren@tomor@|@@r@ujo @end|ng |rom gm@||@com (Renato Morais)
Date: Sun, 23 May 2021 08:03:40 +1000
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <E6C682E5-8DE7-455B-A98C-967BACBEA75D@R-project.org>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
 <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
 <C4FA5D4E-30A9-4998-8A21-EC68B329343D@R-project.org>
 <CAKUsk_+xj_cycx5QtxwQXzfEO0zFfQL_xN+ETFdKi8EVDqBJCA@mail.gmail.com>
 <E6C682E5-8DE7-455B-A98C-967BACBEA75D@R-project.org>
Message-ID: <CAKUsk_LqJO353+Kb02cjFROR7oc2J2Qx0rb2x7=+qZJh4Ein9g@mail.gmail.com>

Ok, thanks for the clarification Simon.

Cheers,
Renato

On Sun, 23 May 2021 at 07:57, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> Renato,
>
> rgdal didn't pass checks in the big-sur build, that's why it was not
> available. rgdal has a very long list of dependencies that are very
> fragile, so it is quite hard to build yourself (you'd need to build and
> compile quite a few libraries).
> For now I have temporarily disabled the checks for some of the spatial
> libraries like sf and rdgal since they don't pass them, but it would be
> good if the issues could be sorted out upstream.
>
> Cheers,
> Simon
>
>
>
> > On May 22, 2021, at 12:31 PM, Renato Morais <
> renatomoraisaraujo at gmail.com> wrote:
> >
> > Hi Simon and all,
> >
> > After reinstalling the official binary and reinstalling all packages,
> almost everything is working fine. The only exception is rgdal, which is
> not available as a binary and, when I try to compile it, I get the error
> below. I did extract gFortran from the link you provided and moved it to
> the folder /opt/R/arm64 as indicated on CRAN (print screen below).
> >
> > Anything I'm clearly doing wrong? I appreciate the help.
> >
> > Cheers and thanks again,
> > Renato
> >
> > > install.packages('rgdal')
> > Package which is only available in source form, and may need compilation
> of C/C++/Fortran: ?rgdal?
> > Do you want to attempt to install these from sources? (Yes/no/cancel) yes
> > installing the source package ?rgdal?
> >
> > trying URL 'https://cran.csiro.au/src/contrib/rgdal_1.5-23.tar.gz'
> > Content type 'application/x-gzip' length 4393536 bytes (4.2 MB)
> > ==================================================
> > downloaded 4.2 MB
> >
> > configure: R_HOME: /Library/Frameworks/R.framework/Resources
> > configure: CC: clang -arch arm64
> > configure: CXX: clang++ -arch arm64 -std=gnu++14
> > configure: CFLAGS: -falign-functions=64 -Wall -g -O2
> > configure: CPPFLAGS: -I/opt/R/arm64/include
> > configure: CXXFLAGS: -falign-functions=64 -Wall -g -O2
> > configure: LDFLAGS: -L/opt/R/arm64/lib
> > configure: LDFLAGS: -L/opt/R/arm64/lib
> > configure: CXX11 is: clang++ -arch arm64, CXX11STD is: -std=gnu++11
> > configure: CXX is: clang++ -arch arm64 -std=gnu++11
> > configure: C++11 support available
> > configure: rgdal: 1.5-23
> > checking for /usr/bin/svnversion... no
> > configure: svn revision: 1121
> > checking for gdal-config... no
> > no
> >
> > The downloaded source packages are in
> >
>  ?/private/var/folders/g0/k2tmg4q931s1x3cy_vm_m4cr0000gn/T/RtmpydK1sm/downloaded_packages?
> > Warning message:
> > In install.packages("rgdal") :
> >   installation of package ?rgdal? had non-zero exit status
> >
> >
> > <image.png>
> >
> >
> >
> >
> > On Thu, 20 May 2021 at 11:46, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> > I was able to replicate the problem - it is a bug in select.list() in
> the R.app GUI and it is present in both the Intel and the arm64 version of
> R 4.1.0 so it is not M1-specific.
> >
> > The work-around is as Jeroen said to set
> > options(menu.graphics=FALSE)
> >
> > Cheers,
> > Simon
> >
> >
> >
> >
> >
> > > On 20/05/2021, at 12:28 PM, Renato Morais <
> renatomoraisaraujo at gmail.com> wrote:
> > >
> > > Hi Simon,
> > >
> > > I'll attach the crash reports available, I hope that helps and sorry
> there's probably repeated crash reports, as I repeatedly tried the same
> things.
> > >
> > > So, relative to the source packages there's actually nothing I can do
> for now?
> > >
> > > Thanks for the attention,
> > > Renato
> > >
> > > On Thu, 20 May 2021 at 08:52, Simon Urbanek <
> simon.urbanek at r-project.org> wrote:
> > > Renato,
> > >
> > > just open the Console application (under Utilities) - it has all logs
> from your machine - there will be either an R crash log or some entries in
> the system log.
> > >
> > > As for packages, it will be solved once the R 4.1.0 binaries for arm64
> are released (as soon as all builds finish), but you will have to make sure
> you re-install all packages to remove the pre-releases.
> > >
> > > Thanks,
> > > Simon
> > >
> > >
> > >
> > > > On 20/05/2021, at 10:27 AM, Renato Morais <
> renatomoraisaraujo at gmail.com> wrote:
> > > >
> > > > Hi Simon,
> > > >
> > > > I'm happy to, I'm just not sure how to check previous logs...
> > > >
> > > > On another note, and I'm sure this is a problem with the compiler,
> now that my packages are installed, the ones I had to compile from the
> source cannot be loaded.
> > > >
> > > > Error: package or namespace load failed for ?nlme? in dyn.load(file,
> DLLpath = DLLpath, ...):
> > > >  unable to load shared object
> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
> > > >
>  dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so,
> 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
> > > >   Referenced from:
> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
> > > >   Reason: image not found
> > > >
> > > > Any insights on how that could be solved?
> > > >
> > > > Thanks again for your help,
> > > > Renato
> > > >
> > > > On Thu, 20 May 2021 at 07:00, Simon Urbanek <
> simon.urbanek at r-project.org> wrote:
> > > > Renato,
> > > >
> > > > I'm glad you have work-around, but I'd still like to get to the core
> of the issue, we don't want R to crash ;).
> > > > Can you, please, check your Console log to see if there is a trace
> of the crash and if so, send it to me?
> > > > Also are you using R in the Terminal or the R.app GUI?
> > > >
> > > > Thanks,
> > > > Simon
> > > >
> > > >
> > > > > On 20/05/2021, at 12:07 AM, Renato Morais <
> renatomoraisaraujo at gmail.com> wrote:
> > > > >
> > > > > Thanks Jeroen, fixing the repo connected me with CRAN (it was
> defaulted to
> > > > > '@CRAN@' I think)!
> > > > >
> > > > > Cheers,
> > > > > Renato
> > > > >
> > > > > On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu>
> wrote:
> > > > >
> > > > >> On Wed, May 19, 2021 at 11:34 AM Renato Morais
> > > > >> <renatomoraisaraujo at gmail.com> wrote:
> > > > >>>
> > > > >>> Hi all,
> > > > >>>
> > > > >>> I'm new here, so please forgive my clumsy error reporting.
> > > > >>>
> > > > >>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I
> wanted to
> > > > >>> finally enjoy a native normal-speed R (for some reason running v
> 4.0.5 on
> > > > >>> Rosetta was extremely slow on my machine). I also installed the
> latest
> > > > >>> XQuartz, as indicated (v 2.8.1).
> > > > >>>
> > > > >>> Sad story is, when I try a simple install.packages command, it
> first
> > > > >>> appears to ignore me, after returning 'Please select a CRAN
> mirror for
> > > > >> use
> > > > >>> in this session'. if I insist, it crashes. No useful error
> messages.
> > > > >> Trying
> > > > >>> via the Package Installer tab didn't work either. It doesn't
> find any
> > > > >>> packages, indeed it crashes if I ask it to load the list.
> > > > >>
> > > > >> This indeed sounds like an xQuartz issue, failing to popup the
> mirror
> > > > >> selection menu. Does everything work if you manually set your CRAN
> > > > >> mirror first, e.g:
> > > > >>
> > > > >>  options(repos=c(CRAN="https://cloud.r-project.org"))
> > > > >>
> > > > >> Alternatively you can disable the popup menus all-together using:
> > > > >>
> > > > >>  options(menu.graphics=FALSE)
> > > > >>
> > > > >> Which should probably be the default.
> > > > >>
> > > > >
> > > > >
> > > > > --
> > > > >
> > > > > *Renato Morais | **ARC Postdoctoral Research Associate*
> > > > >
> > > > > Research Hub for Coral Reef Ecosystem Functions
> > > > >
> > > > > College of Science and Engineering
> > > > >
> > > > > ARC Centre of Excellence for Coral Reef Studies
> > > > >
> > > > > James Cook University
> > > > >
> > > > > Townsville, Queensland, Australia
> > > > >
> > > > > https://www.reeffunctionhub.org
> > > > >
> > > > > http://thebellwoodreeffishlab.com
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > >
> > > > >       [[alternative HTML version deleted]]
> > > > >
> > > > > _______________________________________________
> > > > > R-SIG-Mac mailing list
> > > > > R-SIG-Mac at r-project.org
> > > > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Renato Morais | ARC Postdoctoral Research Associate
> > > >
> > > > Research Hub for Coral Reef Ecosystem Functions
> > > > College of Science and Engineering
> > > > ARC Centre of Excellence for Coral Reef Studies
> > > > James Cook University
> > > > Townsville, Queensland, Australia
> > > > https://www.reeffunctionhub.org
> > > > http://thebellwoodreeffishlab.com
> > > >
> > > > --
> > >
> > >
> > >
> > > --
> > > Renato Morais | ARC Postdoctoral Research Associate
> > >
> > > Research Hub for Coral Reef Ecosystem Functions
> > > College of Science and Engineering
> > > ARC Centre of Excellence for Coral Reef Studies
> > > James Cook University
> > > Townsville, Queensland, Australia
> > > https://www.reeffunctionhub.org
> > > http://thebellwoodreeffishlab.com
> > >
> > > --
> > >
> <R_2021-05-17-082003_Renatos-MacBook-Pro.crash><X11.bin_2021-05-19-184846_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182539_Renatos-MacBook-Pro.crash><rsession_2021-05-19-193014_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182051_Renatos-MacBook-Pro.crash><R_2021-05-19-181442_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182006_Renatos-MacBook-Pro.crash>_______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SIG-Mac at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> >
> >
> > --
> > Renato Morais | ARC Postdoctoral Research Associate
> >
> > Research Hub for Coral Reef Ecosystem Functions
> > College of Science and Engineering
> > ARC Centre of Excellence for Coral Reef Studies
> > James Cook University
> > Townsville, Queensland, Australia
> > https://www.reeffunctionhub.org
> > http://thebellwoodreeffishlab.com
> >
> > --
>
>

-- 

*Renato Morais | **ARC Postdoctoral Research Associate*

Research Hub for Coral Reef Ecosystem Functions

College of Science and Engineering

ARC Centre of Excellence for Coral Reef Studies

James Cook University

Townsville, Queensland, Australia

https://www.reeffunctionhub.org

http://thebellwoodreeffishlab.com



--

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sun May 23 00:15:56 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 22 May 2021 15:15:56 -0700
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <E6C682E5-8DE7-455B-A98C-967BACBEA75D@R-project.org>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
 <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
 <C4FA5D4E-30A9-4998-8A21-EC68B329343D@R-project.org>
 <CAKUsk_+xj_cycx5QtxwQXzfEO0zFfQL_xN+ETFdKi8EVDqBJCA@mail.gmail.com>
 <E6C682E5-8DE7-455B-A98C-967BACBEA75D@R-project.org>
Message-ID: <05F65F51-1E6C-4B02-B232-4D032187500F@noaa.gov>

Hi Simon:

So perhaps the take-home message is that if you depend on that suite of packages,  perhaps the time is not ripe to update to R4.1?

Also wondering how this will affect CRAN checks for packages that have on of those packages as "Suggest" or "Depend"?

Thanks,
-Roy

> On May 22, 2021, at 2:57 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> 
> Renato,
> 
> rgdal didn't pass checks in the big-sur build, that's why it was not available. rgdal has a very long list of dependencies that are very fragile, so it is quite hard to build yourself (you'd need to build and compile quite a few libraries).
> For now I have temporarily disabled the checks for some of the spatial libraries like sf and rdgal since they don't pass them, but it would be good if the issues could be sorted out upstream.
> 
> Cheers,
> Simon
> 
> 
> 
>> On May 22, 2021, at 12:31 PM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
>> 
>> Hi Simon and all,
>> 
>> After reinstalling the official binary and reinstalling all packages, almost everything is working fine. The only exception is rgdal, which is not available as a binary and, when I try to compile it, I get the error below. I did extract gFortran from the link you provided and moved it to the folder /opt/R/arm64 as indicated on CRAN (print screen below).
>> 
>> Anything I'm clearly doing wrong? I appreciate the help.
>> 
>> Cheers and thanks again,
>> Renato
>> 
>>> install.packages('rgdal')
>> Package which is only available in source form, and may need compilation of C/C++/Fortran: ?rgdal?
>> Do you want to attempt to install these from sources? (Yes/no/cancel) yes
>> installing the source package ?rgdal?
>> 
>> trying URL 'https://cran.csiro.au/src/contrib/rgdal_1.5-23.tar.gz'
>> Content type 'application/x-gzip' length 4393536 bytes (4.2 MB)
>> ==================================================
>> downloaded 4.2 MB
>> 
>> configure: R_HOME: /Library/Frameworks/R.framework/Resources
>> configure: CC: clang -arch arm64
>> configure: CXX: clang++ -arch arm64 -std=gnu++14
>> configure: CFLAGS: -falign-functions=64 -Wall -g -O2
>> configure: CPPFLAGS: -I/opt/R/arm64/include
>> configure: CXXFLAGS: -falign-functions=64 -Wall -g -O2
>> configure: LDFLAGS: -L/opt/R/arm64/lib
>> configure: LDFLAGS: -L/opt/R/arm64/lib
>> configure: CXX11 is: clang++ -arch arm64, CXX11STD is: -std=gnu++11
>> configure: CXX is: clang++ -arch arm64 -std=gnu++11
>> configure: C++11 support available
>> configure: rgdal: 1.5-23
>> checking for /usr/bin/svnversion... no
>> configure: svn revision: 1121
>> checking for gdal-config... no
>> no
>> 
>> The downloaded source packages are in
>> 	?/private/var/folders/g0/k2tmg4q931s1x3cy_vm_m4cr0000gn/T/RtmpydK1sm/downloaded_packages?
>> Warning message:
>> In install.packages("rgdal") :
>>  installation of package ?rgdal? had non-zero exit status
>> 
>> 
>> <image.png>
>> 
>> 
>> 
>> 
>> On Thu, 20 May 2021 at 11:46, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> I was able to replicate the problem - it is a bug in select.list() in the R.app GUI and it is present in both the Intel and the arm64 version of R 4.1.0 so it is not M1-specific.
>> 
>> The work-around is as Jeroen said to set
>> options(menu.graphics=FALSE)
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>> 
>> 
>>> On 20/05/2021, at 12:28 PM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
>>> 
>>> Hi Simon,
>>> 
>>> I'll attach the crash reports available, I hope that helps and sorry there's probably repeated crash reports, as I repeatedly tried the same things.
>>> 
>>> So, relative to the source packages there's actually nothing I can do for now?
>>> 
>>> Thanks for the attention,
>>> Renato
>>> 
>>> On Thu, 20 May 2021 at 08:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> Renato,
>>> 
>>> just open the Console application (under Utilities) - it has all logs from your machine - there will be either an R crash log or some entries in the system log.
>>> 
>>> As for packages, it will be solved once the R 4.1.0 binaries for arm64 are released (as soon as all builds finish), but you will have to make sure you re-install all packages to remove the pre-releases.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>> 
>>>> On 20/05/2021, at 10:27 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
>>>> 
>>>> Hi Simon,
>>>> 
>>>> I'm happy to, I'm just not sure how to check previous logs...
>>>> 
>>>> On another note, and I'm sure this is a problem with the compiler, now that my packages are installed, the ones I had to compile from the source cannot be loaded.
>>>> 
>>>> Error: package or namespace load failed for ?nlme? in dyn.load(file, DLLpath = DLLpath, ...):
>>>> unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
>>>>  dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so, 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
>>>>  Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
>>>>  Reason: image not found
>>>> 
>>>> Any insights on how that could be solved?
>>>> 
>>>> Thanks again for your help,
>>>> Renato
>>>> 
>>>> On Thu, 20 May 2021 at 07:00, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>> Renato,
>>>> 
>>>> I'm glad you have work-around, but I'd still like to get to the core of the issue, we don't want R to crash ;).
>>>> Can you, please, check your Console log to see if there is a trace of the crash and if so, send it to me?
>>>> Also are you using R in the Terminal or the R.app GUI?
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>>> On 20/05/2021, at 12:07 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
>>>>> 
>>>>> Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted to
>>>>> '@CRAN@' I think)!
>>>>> 
>>>>> Cheers,
>>>>> Renato
>>>>> 
>>>>> On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
>>>>> 
>>>>>> On Wed, May 19, 2021 at 11:34 AM Renato Morais
>>>>>> <renatomoraisaraujo at gmail.com> wrote:
>>>>>>> 
>>>>>>> Hi all,
>>>>>>> 
>>>>>>> I'm new here, so please forgive my clumsy error reporting.
>>>>>>> 
>>>>>>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
>>>>>>> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
>>>>>>> Rosetta was extremely slow on my machine). I also installed the latest
>>>>>>> XQuartz, as indicated (v 2.8.1).
>>>>>>> 
>>>>>>> Sad story is, when I try a simple install.packages command, it first
>>>>>>> appears to ignore me, after returning 'Please select a CRAN mirror for
>>>>>> use
>>>>>>> in this session'. if I insist, it crashes. No useful error messages.
>>>>>> Trying
>>>>>>> via the Package Installer tab didn't work either. It doesn't find any
>>>>>>> packages, indeed it crashes if I ask it to load the list.
>>>>>> 
>>>>>> This indeed sounds like an xQuartz issue, failing to popup the mirror
>>>>>> selection menu. Does everything work if you manually set your CRAN
>>>>>> mirror first, e.g:
>>>>>> 
>>>>>> options(repos=c(CRAN="https://cloud.r-project.org"))
>>>>>> 
>>>>>> Alternatively you can disable the popup menus all-together using:
>>>>>> 
>>>>>> options(menu.graphics=FALSE)
>>>>>> 
>>>>>> Which should probably be the default.
>>>>>> 
>>>>> 
>>>>> 
>>>>> -- 
>>>>> 
>>>>> *Renato Morais | **ARC Postdoctoral Research Associate*
>>>>> 
>>>>> Research Hub for Coral Reef Ecosystem Functions
>>>>> 
>>>>> College of Science and Engineering
>>>>> 
>>>>> ARC Centre of Excellence for Coral Reef Studies
>>>>> 
>>>>> James Cook University
>>>>> 
>>>>> Townsville, Queensland, Australia
>>>>> 
>>>>> https://www.reeffunctionhub.org
>>>>> 
>>>>> http://thebellwoodreeffishlab.com
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> 
>>>>>      [[alternative HTML version deleted]]
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>>> 
>>>> 
>>>> -- 
>>>> Renato Morais | ARC Postdoctoral Research Associate
>>>> 
>>>> Research Hub for Coral Reef Ecosystem Functions
>>>> College of Science and Engineering
>>>> ARC Centre of Excellence for Coral Reef Studies
>>>> James Cook University
>>>> Townsville, Queensland, Australia
>>>> https://www.reeffunctionhub.org
>>>> http://thebellwoodreeffishlab.com
>>>> 
>>>> -- 
>>> 
>>> 
>>> 
>>> -- 
>>> Renato Morais | ARC Postdoctoral Research Associate
>>> 
>>> Research Hub for Coral Reef Ecosystem Functions
>>> College of Science and Engineering
>>> ARC Centre of Excellence for Coral Reef Studies
>>> James Cook University
>>> Townsville, Queensland, Australia
>>> https://www.reeffunctionhub.org
>>> http://thebellwoodreeffishlab.com
>>> 
>>> -- 
>>> <R_2021-05-17-082003_Renatos-MacBook-Pro.crash><X11.bin_2021-05-19-184846_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182539_Renatos-MacBook-Pro.crash><rsession_2021-05-19-193014_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182051_Renatos-MacBook-Pro.crash><R_2021-05-19-181442_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182006_Renatos-MacBook-Pro.crash>_______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> 
>> -- 
>> Renato Morais | ARC Postdoctoral Research Associate
>> 
>> Research Hub for Coral Reef Ecosystem Functions
>> College of Science and Engineering
>> ARC Centre of Excellence for Coral Reef Studies
>> James Cook University
>> Townsville, Queensland, Australia
>> https://www.reeffunctionhub.org
>> http://thebellwoodreeffishlab.com
>> 
>> -- 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From @|mon@urb@nek @end|ng |rom R-project@org  Sun May 23 00:24:59 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 23 May 2021 10:24:59 +1200
Subject: [R-SIG-Mac] R 4.1 for my Mac M1 crashing on installing packages
In-Reply-To: <05F65F51-1E6C-4B02-B232-4D032187500F@noaa.gov>
References: <CAKUsk_+9JcGk7M0nR_KWsGFJZRtASn+PP3FabxCPBmdd0NUjTQ@mail.gmail.com>
 <CABFfbXsimN6eeCT=cCbe3owdTs82G5FX7tkKFiMpQOkLWv13yQ@mail.gmail.com>
 <CAKUsk_JbnNpMzs92aX7Th2FiPECc3UyVdnU4mbC8=38HNRmoUQ@mail.gmail.com>
 <15DA0D02-A109-40C4-88A2-D532AF29B3C0@R-project.org>
 <CAKUsk_+-sdy_C0w6=U73ba6Xq4ya_=HNitq1rGSEzTJ0EUZg+g@mail.gmail.com>
 <897554AD-0FFB-4CED-9393-F91FB4E746F2@R-project.org>
 <CAKUsk_+o0EFqTh4D9-JwEra_zXUzEMnNJ+zqNsCcmTZxgxgLLA@mail.gmail.com>
 <C4FA5D4E-30A9-4998-8A21-EC68B329343D@R-project.org>
 <CAKUsk_+xj_cycx5QtxwQXzfEO0zFfQL_xN+ETFdKi8EVDqBJCA@mail.gmail.com>
 <E6C682E5-8DE7-455B-A98C-967BACBEA75D@R-project.org>
 <05F65F51-1E6C-4B02-B232-4D032187500F@noaa.gov>
Message-ID: <676B8715-979B-436F-9E0B-A8B26725151D@R-project.org>


Roy,

yes, note that we are talking about the the Big Sur arm64 build. I would still recommend using the "stable" High Sierra Intel build if you prefer stability over speed.

And, yes, if you depend on/import a package that doesn't pass tests, your package won't be available, either. If you have a package in Suggests, then you hopefully wrote your examples/test such that it works even when that package is not available.

Cheers,
Simon



> On May 23, 2021, at 10:15 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> Hi Simon:
> 
> So perhaps the take-home message is that if you depend on that suite of packages,  perhaps the time is not ripe to update to R4.1?
> 
> Also wondering how this will affect CRAN checks for packages that have on of those packages as "Suggest" or "Depend"?
> 
> Thanks,
> -Roy
> 
>> On May 22, 2021, at 2:57 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> 
>> Renato,
>> 
>> rgdal didn't pass checks in the big-sur build, that's why it was not available. rgdal has a very long list of dependencies that are very fragile, so it is quite hard to build yourself (you'd need to build and compile quite a few libraries).
>> For now I have temporarily disabled the checks for some of the spatial libraries like sf and rdgal since they don't pass them, but it would be good if the issues could be sorted out upstream.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On May 22, 2021, at 12:31 PM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
>>> 
>>> Hi Simon and all,
>>> 
>>> After reinstalling the official binary and reinstalling all packages, almost everything is working fine. The only exception is rgdal, which is not available as a binary and, when I try to compile it, I get the error below. I did extract gFortran from the link you provided and moved it to the folder /opt/R/arm64 as indicated on CRAN (print screen below).
>>> 
>>> Anything I'm clearly doing wrong? I appreciate the help.
>>> 
>>> Cheers and thanks again,
>>> Renato
>>> 
>>>> install.packages('rgdal')
>>> Package which is only available in source form, and may need compilation of C/C++/Fortran: ?rgdal?
>>> Do you want to attempt to install these from sources? (Yes/no/cancel) yes
>>> installing the source package ?rgdal?
>>> 
>>> trying URL 'https://cran.csiro.au/src/contrib/rgdal_1.5-23.tar.gz'
>>> Content type 'application/x-gzip' length 4393536 bytes (4.2 MB)
>>> ==================================================
>>> downloaded 4.2 MB
>>> 
>>> configure: R_HOME: /Library/Frameworks/R.framework/Resources
>>> configure: CC: clang -arch arm64
>>> configure: CXX: clang++ -arch arm64 -std=gnu++14
>>> configure: CFLAGS: -falign-functions=64 -Wall -g -O2
>>> configure: CPPFLAGS: -I/opt/R/arm64/include
>>> configure: CXXFLAGS: -falign-functions=64 -Wall -g -O2
>>> configure: LDFLAGS: -L/opt/R/arm64/lib
>>> configure: LDFLAGS: -L/opt/R/arm64/lib
>>> configure: CXX11 is: clang++ -arch arm64, CXX11STD is: -std=gnu++11
>>> configure: CXX is: clang++ -arch arm64 -std=gnu++11
>>> configure: C++11 support available
>>> configure: rgdal: 1.5-23
>>> checking for /usr/bin/svnversion... no
>>> configure: svn revision: 1121
>>> checking for gdal-config... no
>>> no
>>> 
>>> The downloaded source packages are in
>>> 	?/private/var/folders/g0/k2tmg4q931s1x3cy_vm_m4cr0000gn/T/RtmpydK1sm/downloaded_packages?
>>> Warning message:
>>> In install.packages("rgdal") :
>>> installation of package ?rgdal? had non-zero exit status
>>> 
>>> 
>>> <image.png>
>>> 
>>> 
>>> 
>>> 
>>> On Thu, 20 May 2021 at 11:46, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> I was able to replicate the problem - it is a bug in select.list() in the R.app GUI and it is present in both the Intel and the arm64 version of R 4.1.0 so it is not M1-specific.
>>> 
>>> The work-around is as Jeroen said to set
>>> options(menu.graphics=FALSE)
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>> 
>>> 
>>>> On 20/05/2021, at 12:28 PM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
>>>> 
>>>> Hi Simon,
>>>> 
>>>> I'll attach the crash reports available, I hope that helps and sorry there's probably repeated crash reports, as I repeatedly tried the same things.
>>>> 
>>>> So, relative to the source packages there's actually nothing I can do for now?
>>>> 
>>>> Thanks for the attention,
>>>> Renato
>>>> 
>>>> On Thu, 20 May 2021 at 08:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>> Renato,
>>>> 
>>>> just open the Console application (under Utilities) - it has all logs from your machine - there will be either an R crash log or some entries in the system log.
>>>> 
>>>> As for packages, it will be solved once the R 4.1.0 binaries for arm64 are released (as soon as all builds finish), but you will have to make sure you re-install all packages to remove the pre-releases.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>>> On 20/05/2021, at 10:27 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
>>>>> 
>>>>> Hi Simon,
>>>>> 
>>>>> I'm happy to, I'm just not sure how to check previous logs...
>>>>> 
>>>>> On another note, and I'm sure this is a problem with the compiler, now that my packages are installed, the ones I had to compile from the source cannot be loaded.
>>>>> 
>>>>> Error: package or namespace load failed for ?nlme? in dyn.load(file, DLLpath = DLLpath, ...):
>>>>> unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so':
>>>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so, 6): Library not loaded: /opt/R/arm64/gfortran/lib/libgfortran.5.dylib
>>>>> Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/nlme/libs/nlme.so
>>>>> Reason: image not found
>>>>> 
>>>>> Any insights on how that could be solved?
>>>>> 
>>>>> Thanks again for your help,
>>>>> Renato
>>>>> 
>>>>> On Thu, 20 May 2021 at 07:00, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>>> Renato,
>>>>> 
>>>>> I'm glad you have work-around, but I'd still like to get to the core of the issue, we don't want R to crash ;).
>>>>> Can you, please, check your Console log to see if there is a trace of the crash and if so, send it to me?
>>>>> Also are you using R in the Terminal or the R.app GUI?
>>>>> 
>>>>> Thanks,
>>>>> Simon
>>>>> 
>>>>> 
>>>>>> On 20/05/2021, at 12:07 AM, Renato Morais <renatomoraisaraujo at gmail.com> wrote:
>>>>>> 
>>>>>> Thanks Jeroen, fixing the repo connected me with CRAN (it was defaulted to
>>>>>> '@CRAN@' I think)!
>>>>>> 
>>>>>> Cheers,
>>>>>> Renato
>>>>>> 
>>>>>> On Wed, 19 May 2021 at 21:00, Jeroen Ooms <jeroen at berkeley.edu> wrote:
>>>>>> 
>>>>>>> On Wed, May 19, 2021 at 11:34 AM Renato Morais
>>>>>>> <renatomoraisaraujo at gmail.com> wrote:
>>>>>>>> 
>>>>>>>> Hi all,
>>>>>>>> 
>>>>>>>> I'm new here, so please forgive my clumsy error reporting.
>>>>>>>> 
>>>>>>>> I have just downloaded *R-4.1-branch.pkg* for my Mac M1, as I wanted to
>>>>>>>> finally enjoy a native normal-speed R (for some reason running v 4.0.5 on
>>>>>>>> Rosetta was extremely slow on my machine). I also installed the latest
>>>>>>>> XQuartz, as indicated (v 2.8.1).
>>>>>>>> 
>>>>>>>> Sad story is, when I try a simple install.packages command, it first
>>>>>>>> appears to ignore me, after returning 'Please select a CRAN mirror for
>>>>>>> use
>>>>>>>> in this session'. if I insist, it crashes. No useful error messages.
>>>>>>> Trying
>>>>>>>> via the Package Installer tab didn't work either. It doesn't find any
>>>>>>>> packages, indeed it crashes if I ask it to load the list.
>>>>>>> 
>>>>>>> This indeed sounds like an xQuartz issue, failing to popup the mirror
>>>>>>> selection menu. Does everything work if you manually set your CRAN
>>>>>>> mirror first, e.g:
>>>>>>> 
>>>>>>> options(repos=c(CRAN="https://cloud.r-project.org"))
>>>>>>> 
>>>>>>> Alternatively you can disable the popup menus all-together using:
>>>>>>> 
>>>>>>> options(menu.graphics=FALSE)
>>>>>>> 
>>>>>>> Which should probably be the default.
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> -- 
>>>>>> 
>>>>>> *Renato Morais | **ARC Postdoctoral Research Associate*
>>>>>> 
>>>>>> Research Hub for Coral Reef Ecosystem Functions
>>>>>> 
>>>>>> College of Science and Engineering
>>>>>> 
>>>>>> ARC Centre of Excellence for Coral Reef Studies
>>>>>> 
>>>>>> James Cook University
>>>>>> 
>>>>>> Townsville, Queensland, Australia
>>>>>> 
>>>>>> https://www.reeffunctionhub.org
>>>>>> 
>>>>>> http://thebellwoodreeffishlab.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> --
>>>>>> 
>>>>>>     [[alternative HTML version deleted]]
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> -- 
>>>>> Renato Morais | ARC Postdoctoral Research Associate
>>>>> 
>>>>> Research Hub for Coral Reef Ecosystem Functions
>>>>> College of Science and Engineering
>>>>> ARC Centre of Excellence for Coral Reef Studies
>>>>> James Cook University
>>>>> Townsville, Queensland, Australia
>>>>> https://www.reeffunctionhub.org
>>>>> http://thebellwoodreeffishlab.com
>>>>> 
>>>>> -- 
>>>> 
>>>> 
>>>> 
>>>> -- 
>>>> Renato Morais | ARC Postdoctoral Research Associate
>>>> 
>>>> Research Hub for Coral Reef Ecosystem Functions
>>>> College of Science and Engineering
>>>> ARC Centre of Excellence for Coral Reef Studies
>>>> James Cook University
>>>> Townsville, Queensland, Australia
>>>> https://www.reeffunctionhub.org
>>>> http://thebellwoodreeffishlab.com
>>>> 
>>>> -- 
>>>> <R_2021-05-17-082003_Renatos-MacBook-Pro.crash><X11.bin_2021-05-19-184846_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182539_Renatos-MacBook-Pro.crash><rsession_2021-05-19-193014_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182051_Renatos-MacBook-Pro.crash><R_2021-05-19-181442_Renatos-MacBook-Pro.crash><rsession_2021-05-19-182006_Renatos-MacBook-Pro.crash>_______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> 
>>> 
>>> -- 
>>> Renato Morais | ARC Postdoctoral Research Associate
>>> 
>>> Research Hub for Coral Reef Ecosystem Functions
>>> College of Science and Engineering
>>> ARC Centre of Excellence for Coral Reef Studies
>>> James Cook University
>>> Townsville, Queensland, Australia
>>> https://www.reeffunctionhub.org
>>> http://thebellwoodreeffishlab.com
>>> 
>>> -- 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 


From rmh @end|ng |rom temp|e@edu  Tue May 25 06:02:26 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 25 May 2021 04:02:26 +0000
Subject: [R-SIG-Mac] [External]  tcltk on M1 mac?
In-Reply-To: <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
Message-ID: <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>

I am not seeing tcltk in either the released R
R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: aarch64-apple-darwin20 (64-bit)


or the nightly
R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: aarch64-apple-darwin20 (64-bit)

that I just downloaded.

Here is the transcript

R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: aarch64-apple-darwin20 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> setwd('/Users/rmh/Rwd/')
> library(tcltk)
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error: package or namespace load failed for ?tcltk?:
 .onLoad failed in loadNamespace() for 'tcltk', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':
  dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so, 10): Library not loaded: /opt/X11/lib/libX11.6.dylib
  Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so
  Reason: no suitable image found.  Did find:
	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
In addition: Warning message:
In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
  running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
> 


> On May 14, 2021, at 19:57, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> 
> Vince,
> 
> please try the latest build, Tcl/Tk should be included now.
> 
> Thanks,
> Simon
> 
> 
> 
>> On May 14, 2021, at 7:45 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Vince,
>> 
>> Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.
>> 
>> Thanks,
>> Simon
>> 
>> 
>>> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
>>> 
>>> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
>>> seems to have wrong architecture; attempt to build from source does not
>>> help.  Any hints appreciated.
>>> 
>>> 
>>> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
>>> 
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> 
>>> Platform: aarch64-apple-darwin20 (64-bit)
>>> 
>>> 
>>>> library(tcltk)
>>> 
>>> *Error: package or namespace load failed for 'tcltk':*
>>> 
>>> * .onLoad failed in loadNamespace() for 'tcltk', details:*
>>> 
>>> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
>>> 
>>> *  error: unable to load shared object
>>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
>>> 
>>> *
>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
>>> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
>>> 
>>> *  Referenced from:
>>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
>>> 
>>> *  Reason: image not found*
>>> 
>>> -- 
>>> The information in this e-mail is intended only for the ...{{dropped:18}}
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7Caec07b2cc2234bced9a608d917340bcf%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637566335029235360%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=jOcNgnrq%2By1IGydu1Pl6JuT%2B%2BxQ0qtcdxOG5%2BjC5OaQ%3D&amp;reserved=0
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7Caec07b2cc2234bced9a608d917340bcf%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637566335029235360%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=jOcNgnrq%2By1IGydu1Pl6JuT%2B%2BxQ0qtcdxOG5%2BjC5OaQ%3D&amp;reserved=0


From @|mon@urb@nek @end|ng |rom R-project@org  Tue May 25 07:36:14 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 25 May 2021 17:36:14 +1200
Subject: [R-SIG-Mac] [External]  tcltk on M1 mac?
In-Reply-To: <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
 <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
Message-ID: <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>


Rich,
you need to instal XQuartz (see instructions on the CRAN page).
Cheers,
Simon



> On 25/05/2021, at 4:02 PM, Richard M. Heiberger <rmh at temple.edu> wrote:
> 
> I am not seeing tcltk in either the released R
> R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: aarch64-apple-darwin20 (64-bit)
> 
> 
> or the nightly
> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: aarch64-apple-darwin20 (64-bit)
> 
> that I just downloaded.
> 
> Here is the transcript
> 
> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: aarch64-apple-darwin20 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
>  Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
>> setwd('/Users/rmh/Rwd/')
>> library(tcltk)
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error: package or namespace load failed for ?tcltk?:
> .onLoad failed in loadNamespace() for 'tcltk', details:
>  call: dyn.load(file, DLLpath = DLLpath, ...)
>  error: unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':
>  dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so, 10): Library not loaded: /opt/X11/lib/libX11.6.dylib
>  Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so
>  Reason: no suitable image found.  Did find:
> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
> In addition: Warning message:
> In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>  running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
>> 
> 
> 
>> On May 14, 2021, at 19:57, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> 
>> Vince,
>> 
>> please try the latest build, Tcl/Tk should be included now.
>> 
>> Thanks,
>> Simon
>> 
>> 
>> 
>>> On May 14, 2021, at 7:45 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>> 
>>> Vince,
>>> 
>>> Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>>> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
>>>> 
>>>> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
>>>> seems to have wrong architecture; attempt to build from source does not
>>>> help.  Any hints appreciated.
>>>> 
>>>> 
>>>> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
>>>> 
>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>> 
>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>> 
>>>> 
>>>>> library(tcltk)
>>>> 
>>>> *Error: package or namespace load failed for 'tcltk':*
>>>> 
>>>> * .onLoad failed in loadNamespace() for 'tcltk', details:*
>>>> 
>>>> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
>>>> 
>>>> *  error: unable to load shared object
>>>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
>>>> 
>>>> *
>>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
>>>> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
>>>> 
>>>> *  Referenced from:
>>>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
>>>> 
>>>> *  Reason: image not found*
>>>> 
>>>> -- 
>>>> The information in this e-mail is intended only for the ...{{dropped:18}}
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7Caec07b2cc2234bced9a608d917340bcf%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637566335029235360%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=jOcNgnrq%2By1IGydu1Pl6JuT%2B%2BxQ0qtcdxOG5%2BjC5OaQ%3D&amp;reserved=0
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7Caec07b2cc2234bced9a608d917340bcf%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637566335029235360%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=jOcNgnrq%2By1IGydu1Pl6JuT%2B%2BxQ0qtcdxOG5%2BjC5OaQ%3D&amp;reserved=0
> 


From hwborcher@ @end|ng |rom gm@||@com  Tue May 25 15:16:19 2021
From: hwborcher@ @end|ng |rom gm@||@com (Hans W)
Date: Tue, 25 May 2021 15:16:19 +0200
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
Message-ID: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>

I installed the new R version 4.1.0 on my (normal) Macbook, and
everything seemed to work fine until one of the packages depended on
the 'rlang' package and I got the following error:

    > library(rlang)
    Error: package or namespace load failed for ?rlang? in
    dyn.load(file, DLLpath = DLLpath, ...): unable to load
    shared object '/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so':
    dlopen(/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so, 6):
    Library not loaded:
    /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libR.dylib
    Referenced from: /Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so
    Reason: image not found

So I removed 'rlang' and reinstalled it. There was no error message,
but when I tried to load it, the error message was:

    Error: package or namespace load failed for ?rlang? in
    get(Info[i, 1], envir = env): lazy-load database
    '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
    In addition: Warning message:
    In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1

One of my current applications relies on 'rvest' which depends on
'rlang'. For the moment I am using it from a Linux computer, but it's
quite unfortunate that I cannot run it from macOS as well.

I also uninstalled the new R version and reinstalled it, but nothing
changed. Could you give me a hint on what to do (or what I did wrong)?


From m@rc_@chw@rtz @end|ng |rom me@com  Tue May 25 16:06:51 2021
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Tue, 25 May 2021 10:06:51 -0400
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
In-Reply-To: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
References: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
Message-ID: <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>

Hi,

You might try a different CRAN mirror to see if perhaps the rlang binary 
that you are getting is corrupted.

Looking at CRAN for the package, the results for rlang on what is 
supposed to be R release on macOS:

   https://cran.r-project.org/web/checks/check_results_rlang.html

shows a header indicating that R devel is being used, not R release:

 
https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html

So, I am not clear if there is a macOS binary build issue that may be 
resulting in a conflict of sorts.

A spot check of other CRAN packages (including my own) shows the same 
use of R devel for macOS, and not R release, so perhaps there is a wider 
issue going on with CRAN builds, unless I am missing something here.

Simon (cc'd now) may be able to address that issue.

Regards,

Marc Schwartz


Hans W wrote on 5/25/21 9:16 AM:
> I installed the new R version 4.1.0 on my (normal) Macbook, and
> everything seemed to work fine until one of the packages depended on
> the 'rlang' package and I got the following error:
> 
>      > library(rlang)
>      Error: package or namespace load failed for ?rlang? in
>      dyn.load(file, DLLpath = DLLpath, ...): unable to load
>      shared object '/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so':
>      dlopen(/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so, 6):
>      Library not loaded:
>      /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libR.dylib
>      Referenced from: /Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so
>      Reason: image not found
> 
> So I removed 'rlang' and reinstalled it. There was no error message,
> but when I tried to load it, the error message was:
> 
>      Error: package or namespace load failed for ?rlang? in
>      get(Info[i, 1], envir = env): lazy-load database
>      '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
>      In addition: Warning message:
>      In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1
> 
> One of my current applications relies on 'rvest' which depends on
> 'rlang'. For the moment I am using it from a Linux computer, but it's
> quite unfortunate that I cannot run it from macOS as well.
> 
> I also uninstalled the new R version and reinstalled it, but nothing
> changed. Could you give me a hint on what to do (or what I did wrong)?
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue May 25 16:44:44 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 25 May 2021 07:44:44 -0700
Subject: [R-SIG-Mac] [External]  tcltk on M1 mac?
In-Reply-To: <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
 <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
 <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
Message-ID: <C42BC589-35DC-4D27-B5EF-88091C295538@noaa.gov>

I seem to remember a discussion not too long ago that the very latest version fo XQuartz did not install all the libraries needed by R, and to install the previous on instead  (I hav XQuartz 2.7.11, the latest is 2.8.1).  Is this still the case?

Thanks,

-Roy

> On May 24, 2021, at 10:36 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> 
> Rich,
> you need to instal XQuartz (see instructions on the CRAN page).
> Cheers,
> Simon
> 
> 
> 
>> On 25/05/2021, at 4:02 PM, Richard M. Heiberger <rmh at temple.edu> wrote:
>> 
>> I am not seeing tcltk in either the released R
>> R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: aarch64-apple-darwin20 (64-bit)
>> 
>> 
>> or the nightly
>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: aarch64-apple-darwin20 (64-bit)
>> 
>> that I just downloaded.
>> 
>> Here is the transcript
>> 
>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: aarch64-apple-darwin20 (64-bit)
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>> 
>> Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>>> setwd('/Users/rmh/Rwd/')
>>> library(tcltk)
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> Error: package or namespace load failed for ?tcltk?:
>> .onLoad failed in loadNamespace() for 'tcltk', details:
>> call: dyn.load(file, DLLpath = DLLpath, ...)
>> error: unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':
>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so, 10): Library not loaded: /opt/X11/lib/libX11.6.dylib
>> Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so
>> Reason: no suitable image found.  Did find:
>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>> In addition: Warning message:
>> In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>> running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
>>> 
>> 
>> 
>>> On May 14, 2021, at 19:57, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>> 
>>> Vince,
>>> 
>>> please try the latest build, Tcl/Tk should be included now.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>> 
>>>> On May 14, 2021, at 7:45 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>> 
>>>> Vince,
>>>> 
>>>> Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>>> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
>>>>> 
>>>>> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
>>>>> seems to have wrong architecture; attempt to build from source does not
>>>>> help.  Any hints appreciated.
>>>>> 
>>>>> 
>>>>> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
>>>>> 
>>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>>> 
>>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>>> 
>>>>> 
>>>>>> library(tcltk)
>>>>> 
>>>>> *Error: package or namespace load failed for 'tcltk':*
>>>>> 
>>>>> * .onLoad failed in loadNamespace() for 'tcltk', details:*
>>>>> 
>>>>> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
>>>>> 
>>>>> *  error: unable to load shared object
>>>>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
>>>>> 
>>>>> *
>>>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
>>>>> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
>>>>> 
>>>>> *  Referenced from:
>>>>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
>>>>> 
>>>>> *  Reason: image not found*
>>>>> 
>>>>> -- 
>>>>> The information in this e-mail is intended only for the ...{{dropped:18}}
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7Caec07b2cc2234bced9a608d917340bcf%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637566335029235360%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=jOcNgnrq%2By1IGydu1Pl6JuT%2B%2BxQ0qtcdxOG5%2BjC5OaQ%3D&amp;reserved=0
>>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7Caec07b2cc2234bced9a608d917340bcf%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637566335029235360%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=jOcNgnrq%2By1IGydu1Pl6JuT%2B%2BxQ0qtcdxOG5%2BjC5OaQ%3D&amp;reserved=0
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue May 25 17:20:25 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 25 May 2021 11:20:25 -0400
Subject: [R-SIG-Mac] [External] tcltk on M1 mac?
In-Reply-To: <C42BC589-35DC-4D27-B5EF-88091C295538@noaa.gov>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
 <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
 <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
 <C42BC589-35DC-4D27-B5EF-88091C295538@noaa.gov>
Message-ID: <93eb0640-b500-deae-1e6b-235a1442506f@gmail.com>

On 25/05/2021 10:44 a.m., Roy Mendelssohn - NOAA Federal via R-SIG-Mac 
wrote:
> I seem to remember a discussion not too long ago that the very latest version fo XQuartz did not install all the libraries needed by R, and to install the previous on instead  (I hav XQuartz 2.7.11, the latest is 2.8.1).  Is this still the case?
> 

You may be thinking of a different discussion, but when the 2.8.x betas 
started coming out, they included incompatible versions of the libs 
needed by R on Intel machines.  That's no longer true.

I don't have any experience with M1 machines, so this may not be relevant.

Duncan Murdoch


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue May 25 17:23:13 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 25 May 2021 08:23:13 -0700
Subject: [R-SIG-Mac] [External] tcltk on M1 mac?
In-Reply-To: <93eb0640-b500-deae-1e6b-235a1442506f@gmail.com>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
 <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
 <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
 <C42BC589-35DC-4D27-B5EF-88091C295538@noaa.gov>
 <93eb0640-b500-deae-1e6b-235a1442506f@gmail.com>
Message-ID: <144798C1-0AC2-49B5-BD64-80C4095117F9@noaa.gov>

Thanks.  That is what I want to know.

-Roy

> On May 25, 2021, at 8:20 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 25/05/2021 10:44 a.m., Roy Mendelssohn - NOAA Federal via R-SIG-Mac wrote:
>> I seem to remember a discussion not too long ago that the very latest version fo XQuartz did not install all the libraries needed by R, and to install the previous on instead  (I hav XQuartz 2.7.11, the latest is 2.8.1).  Is this still the case?
> 
> You may be thinking of a different discussion, but when the 2.8.x betas started coming out, they included incompatible versions of the libs needed by R on Intel machines.  That's no longer true.
> 
> I don't have any experience with M1 machines, so this may not be relevant.
> 
> Duncan Murdoch

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From rmh @end|ng |rom temp|e@edu  Tue May 25 18:20:48 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 25 May 2021 16:20:48 +0000
Subject: [R-SIG-Mac] [External]  tcltk on M1 mac?
In-Reply-To: <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
 <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
 <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
Message-ID: <68C70E34-F2C7-4DF4-B942-A2E42A746177@temple.edu>

I just upgraded from XQuartz 2.7.11 to the current 2.8.1, and then rebooted the Mac M1.

tcltk now loads and gives warnings:


R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: aarch64-apple-darwin20 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> setwd('/Users/rmh/Rwd/')
> library(tcltk)
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Warning message:
In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
  running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
> search()
 [1] ".GlobalEnv"        "package:tcltk"     "ESSR"             
 [4] "package:stats"     "package:graphics"  "package:grDevices"
 [7] "package:utils"     "package:datasets"  "package:methods"  
[10] "Autoloads"         "package:base"     
> 


There are fewer messages than before.
tcltk now loads with warnings.
Rcmdr now loads.

What should I do about xcrun and otool?

Simon, can you add a note to the CRAN download page that XQuartz 2.8.1 is needed for the Mac M1.

Rich


> On May 25, 2021, at 01:36, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Rich,
> you need to instal XQuartz (see instructions on the CRAN page).
> Cheers,
> Simon
> 
> 
> 
>> On 25/05/2021, at 4:02 PM, Richard M. Heiberger <rmh at temple.edu> wrote:
>> 
>> I am not seeing tcltk in either the released R
>> R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: aarch64-apple-darwin20 (64-bit)
>> 
>> 
>> or the nightly
>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: aarch64-apple-darwin20 (64-bit)
>> 
>> that I just downloaded.
>> 
>> Here is the transcript
>> 
>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: aarch64-apple-darwin20 (64-bit)
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>> 
>> Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>>> setwd('/Users/rmh/Rwd/')
>>> library(tcltk)
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> Error: package or namespace load failed for ?tcltk?:
>> .onLoad failed in loadNamespace() for 'tcltk', details:
>> call: dyn.load(file, DLLpath = DLLpath, ...)
>> error: unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':
>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so, 10): Library not loaded: /opt/X11/lib/libX11.6.dylib
>> Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so
>> Reason: no suitable image found.  Did find:
>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>> In addition: Warning message:
>> In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>> running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
>>> 
>> 
>> 
>>> On May 14, 2021, at 19:57, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>> 
>>> Vince,
>>> 
>>> please try the latest build, Tcl/Tk should be included now.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>> 
>>>> On May 14, 2021, at 7:45 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>> 
>>>> Vince,
>>>> 
>>>> Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>>> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
>>>>> 
>>>>> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
>>>>> seems to have wrong architecture; attempt to build from source does not
>>>>> help.  Any hints appreciated.
>>>>> 
>>>>> 
>>>>> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
>>>>> 
>>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>>> 
>>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>>> 
>>>>> 
>>>>>> library(tcltk)
>>>>> 
>>>>> *Error: package or namespace load failed for 'tcltk':*
>>>>> 
>>>>> * .onLoad failed in loadNamespace() for 'tcltk', details:*
>>>>> 
>>>>> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
>>>>> 
>>>>> *  error: unable to load shared object
>>>>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
>>>>> 
>>>>> *
>>>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
>>>>> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
>>>>> 
>>>>> *  Referenced from:
>>>>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
>>>>> 
>>>>> *  Reason: image not found*
>>>>> 
>>>>> -- 
>>>>> The information in this e-mail is intended only for the ...{{dropped:18}}
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7C6f49e75a58184914818508d91f3f074a%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637575178159233703%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&amp;sdata=BRBubyTAu8ZhGQ%2BXNDXgqkg37j1Q8rMH32Y7okcaLVE%3D&amp;reserved=0
>>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7C6f49e75a58184914818508d91f3f074a%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637575178159233703%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&amp;sdata=BRBubyTAu8ZhGQ%2BXNDXgqkg37j1Q8rMH32Y7okcaLVE%3D&amp;reserved=0


From kev|nu@hey @end|ng |rom gm@||@com  Tue May 25 20:30:33 2021
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Tue, 25 May 2021 11:30:33 -0700
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
In-Reply-To: <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
References: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
 <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
Message-ID: <CAJXgQP0udXbZt0XZKSP1gWA_kmK9cjw395Ua9T_ADKnNkxwr=g@mail.gmail.com>

This error:

    Error: package or namespace load failed for ?rlang? in
    get(Info[i, 1], envir = env): lazy-load database
    '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
    In addition: Warning message:
    In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1

is commonly seen when reinstalling an already-installed package. See
https://bugs.r-project.org/bugzilla/show_bug.cgi?id=16644 for more
details.

The resolution is to restart R after reinstalling an already-loaded package.

Best,
Kevin
On Tue, May 25, 2021 at 7:07 AM Marc Schwartz via R-SIG-Mac
<r-sig-mac at r-project.org> wrote:
>
> Hi,
>
> You might try a different CRAN mirror to see if perhaps the rlang binary
> that you are getting is corrupted.
>
> Looking at CRAN for the package, the results for rlang on what is
> supposed to be R release on macOS:
>
>    https://cran.r-project.org/web/checks/check_results_rlang.html
>
> shows a header indicating that R devel is being used, not R release:
>
>
> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html
>
> So, I am not clear if there is a macOS binary build issue that may be
> resulting in a conflict of sorts.
>
> A spot check of other CRAN packages (including my own) shows the same
> use of R devel for macOS, and not R release, so perhaps there is a wider
> issue going on with CRAN builds, unless I am missing something here.
>
> Simon (cc'd now) may be able to address that issue.
>
> Regards,
>
> Marc Schwartz
>
>
> Hans W wrote on 5/25/21 9:16 AM:
> > I installed the new R version 4.1.0 on my (normal) Macbook, and
> > everything seemed to work fine until one of the packages depended on
> > the 'rlang' package and I got the following error:
> >
> >      > library(rlang)
> >      Error: package or namespace load failed for ?rlang? in
> >      dyn.load(file, DLLpath = DLLpath, ...): unable to load
> >      shared object '/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so':
> >      dlopen(/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so, 6):
> >      Library not loaded:
> >      /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libR.dylib
> >      Referenced from: /Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so
> >      Reason: image not found
> >
> > So I removed 'rlang' and reinstalled it. There was no error message,
> > but when I tried to load it, the error message was:
> >
> >      Error: package or namespace load failed for ?rlang? in
> >      get(Info[i, 1], envir = env): lazy-load database
> >      '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
> >      In addition: Warning message:
> >      In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1
> >
> > One of my current applications relies on 'rvest' which depends on
> > 'rlang'. For the moment I am using it from a Linux computer, but it's
> > quite unfortunate that I cannot run it from macOS as well.
> >
> > I also uninstalled the new R version and reinstalled it, but nothing
> > changed. Could you give me a hint on what to do (or what I did wrong)?
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From hwborcher@ @end|ng |rom gm@||@com  Tue May 25 21:58:38 2021
From: hwborcher@ @end|ng |rom gm@||@com (Hans W)
Date: Tue, 25 May 2021 21:58:38 +0200
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
In-Reply-To: <CAJXgQP0udXbZt0XZKSP1gWA_kmK9cjw395Ua9T_ADKnNkxwr=g@mail.gmail.com>
References: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
 <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
 <CAJXgQP0udXbZt0XZKSP1gWA_kmK9cjw395Ua9T_ADKnNkxwr=g@mail.gmail.com>
Message-ID: <CAML4n3Ox7dNUd0eqFckPHMB+tgsS+Lm3i=oumnOWh__M2Akaxw@mail.gmail.com>

Following this tip I had to remove and reinstall one after the other
the following packages:

    rvest, rlang, magrittr, xml2, stringi, ellipsis,
    fansi, utf8, vctrs, tibble, Rcpp, lbfgs, and GauPro

each time restarting R to make sure. Then the application worked again.
Does this mean I would be better off deleting all of my installed
packages and starting a fresh R?
Was this even a requirement for installing R version 4.1 on macOS -- a
requirement I didn't get?

Thanks for the help  --HW


On Tue, 25 May 2021 at 20:31, Kevin Ushey <kevinushey at gmail.com> wrote:
>
> This error:
>
>     Error: package or namespace load failed for ?rlang? in
>     get(Info[i, 1], envir = env): lazy-load database
>     '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
>     In addition: Warning message:
>     In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1
>
> is commonly seen when reinstalling an already-installed package. See
> https://bugs.r-project.org/bugzilla/show_bug.cgi?id=16644 for more
> details.
>
> The resolution is to restart R after reinstalling an already-loaded package.
>
> Best,
> Kevin


From @|mon@urb@nek @end|ng |rom R-project@org  Tue May 25 22:10:20 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 26 May 2021 08:10:20 +1200
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
In-Reply-To: <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
References: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
 <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
Message-ID: <F705CD92-5D1E-486B-A9C3-A5C4566CCC71@R-project.org>


Hans,

you seem to be using old library from 4.0 (see the 4.0 in the path). Make sure you remove old packages and use a clean library for 4.1 since you cannot mix packages from R 4.0.x and R 4.1.0. I would best recommend removing (or re-naming) ~/Library/R before installation to make sure you don't have incompatible old packages. Also don't forget to re-start R.

(Marc, I can't parse your post, it makes no sense to me, there no R-devel involved in any of this, so please post separately about whatever is on your heart as that doesn't seem to be related).

Cheers,
Simon



> On May 26, 2021, at 2:06 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
> 
> Hi,
> 
> You might try a different CRAN mirror to see if perhaps the rlang binary that you are getting is corrupted.
> 
> Looking at CRAN for the package, the results for rlang on what is supposed to be R release on macOS:
> 
>  https://cran.r-project.org/web/checks/check_results_rlang.html
> 
> shows a header indicating that R devel is being used, not R release:
> 
> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html
> 
> So, I am not clear if there is a macOS binary build issue that may be resulting in a conflict of sorts.
> 
> A spot check of other CRAN packages (including my own) shows the same use of R devel for macOS, and not R release, so perhaps there is a wider issue going on with CRAN builds, unless I am missing something here.
> 
> Simon (cc'd now) may be able to address that issue.
> 
> Regards,
> 
> Marc Schwartz
> 
> 
> Hans W wrote on 5/25/21 9:16 AM:
>> I installed the new R version 4.1.0 on my (normal) Macbook, and
>> everything seemed to work fine until one of the packages depended on
>> the 'rlang' package and I got the following error:
>>     > library(rlang)
>>     Error: package or namespace load failed for ?rlang? in
>>     dyn.load(file, DLLpath = DLLpath, ...): unable to load
>>     shared object '/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so':
>>     dlopen(/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so, 6):
>>     Library not loaded:
>>     /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libR.dylib
>>     Referenced from: /Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so
>>     Reason: image not found
>> So I removed 'rlang' and reinstalled it. There was no error message,
>> but when I tried to load it, the error message was:
>>     Error: package or namespace load failed for ?rlang? in
>>     get(Info[i, 1], envir = env): lazy-load database
>>     '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
>>     In addition: Warning message:
>>     In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1
>> One of my current applications relies on 'rvest' which depends on
>> 'rlang'. For the moment I am using it from a Linux computer, but it's
>> quite unfortunate that I cannot run it from macOS as well.
>> I also uninstalled the new R version and reinstalled it, but nothing
>> changed. Could you give me a hint on what to do (or what I did wrong)?
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From @|mon@urb@nek @end|ng |rom R-project@org  Tue May 25 22:19:25 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 26 May 2021 08:19:25 +1200
Subject: [R-SIG-Mac] [External]  tcltk on M1 mac?
In-Reply-To: <C42BC589-35DC-4D27-B5EF-88091C295538@noaa.gov>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
 <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
 <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
 <C42BC589-35DC-4D27-B5EF-88091C295538@noaa.gov>
Message-ID: <1809B0F4-202F-4E83-A636-94A24670BE00@R-project.org>


Roy,

that discussion was on Intel Mac when XQuartz was in beta and thus breaking. In the meantime there is now stable XQuartz 2.8.1 and you can use either version on Intel (we do build agains 2.7.1 for compatibility). But there is no XQuartz 2.7.x for M1 so you can only use the latest version there.

Cheers,
Simon


> On May 26, 2021, at 2:44 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> I seem to remember a discussion not too long ago that the very latest version fo XQuartz did not install all the libraries needed by R, and to install the previous on instead  (I hav XQuartz 2.7.11, the latest is 2.8.1).  Is this still the case?
> 
> Thanks,
> 
> -Roy
> 
>> On May 24, 2021, at 10:36 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> 
>> Rich,
>> you need to instal XQuartz (see instructions on the CRAN page).
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On 25/05/2021, at 4:02 PM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>> 
>>> I am not seeing tcltk in either the released R
>>> R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: aarch64-apple-darwin20 (64-bit)
>>> 
>>> 
>>> or the nightly
>>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: aarch64-apple-darwin20 (64-bit)
>>> 
>>> that I just downloaded.
>>> 
>>> Here is the transcript
>>> 
>>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: aarch64-apple-darwin20 (64-bit)
>>> 
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>> 
>>> Natural language support but running in an English locale
>>> 
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>> 
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>> 
>>>> setwd('/Users/rmh/Rwd/')
>>>> library(tcltk)
>>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>> Error: package or namespace load failed for ?tcltk?:
>>> .onLoad failed in loadNamespace() for 'tcltk', details:
>>> call: dyn.load(file, DLLpath = DLLpath, ...)
>>> error: unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':
>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so, 10): Library not loaded: /opt/X11/lib/libX11.6.dylib
>>> Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so
>>> Reason: no suitable image found.  Did find:
>>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>>> In addition: Warning message:
>>> In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>>> running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
>>>> 
>>> 
>>> 
>>>> On May 14, 2021, at 19:57, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>> 
>>>> 
>>>> Vince,
>>>> 
>>>> please try the latest build, Tcl/Tk should be included now.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>>> On May 14, 2021, at 7:45 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>> 
>>>>> Vince,
>>>>> 
>>>>> Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.
>>>>> 
>>>>> Thanks,
>>>>> Simon
>>>>> 
>>>>> 
>>>>>> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
>>>>>> 
>>>>>> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
>>>>>> seems to have wrong architecture; attempt to build from source does not
>>>>>> help.  Any hints appreciated.
>>>>>> 
>>>>>> 
>>>>>> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
>>>>>> 
>>>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>>>> 
>>>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>>>> 
>>>>>> 
>>>>>>> library(tcltk)
>>>>>> 
>>>>>> *Error: package or namespace load failed for 'tcltk':*
>>>>>> 
>>>>>> * .onLoad failed in loadNamespace() for 'tcltk', details:*
>>>>>> 
>>>>>> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
>>>>>> 
>>>>>> *  error: unable to load shared object
>>>>>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
>>>>>> 
>>>>>> *
>>>>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
>>>>>> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
>>>>>> 
>>>>>> *  Referenced from:
>>>>>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
>>>>>> 
>>>>>> *  Reason: image not found*
>>>>>> 
>>>>>> -- 
>>>>>> The information in this e-mail is intended only for the ...{{dropped:18}}
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7Caec07b2cc2234bced9a608d917340bcf%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637566335029235360%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=jOcNgnrq%2By1IGydu1Pl6JuT%2B%2BxQ0qtcdxOG5%2BjC5OaQ%3D&amp;reserved=0
>>>>> 
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7Caec07b2cc2234bced9a608d917340bcf%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637566335029235360%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=jOcNgnrq%2By1IGydu1Pl6JuT%2B%2BxQ0qtcdxOG5%2BjC5OaQ%3D&amp;reserved=0
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue May 25 22:28:20 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 25 May 2021 13:28:20 -0700
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
In-Reply-To: <F705CD92-5D1E-486B-A9C3-A5C4566CCC71@R-project.org>
References: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
 <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
 <F705CD92-5D1E-486B-A9C3-A5C4566CCC71@R-project.org>
Message-ID: <DBDB67F5-C249-41E2-A732-B73ADA53BC14@noaa.gov>

When R4.0 came out,  someone on R-Bloggers post a very nice to automate updating your packages from R3.6.  I just used it to do my update from R4.0 to R4.1 - it works perfectly.  I would include the script here,  but since I don't have the exact reference I don't like posting someone else's script without appropriate credit.  Do a search and you should be able to find the entry.

-Roy

> On May 25, 2021, at 1:10 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> 
> Hans,
> 
> you seem to be using old library from 4.0 (see the 4.0 in the path). Make sure you remove old packages and use a clean library for 4.1 since you cannot mix packages from R 4.0.x and R 4.1.0. I would best recommend removing (or re-naming) ~/Library/R before installation to make sure you don't have incompatible old packages. Also don't forget to re-start R.
> 
> (Marc, I can't parse your post, it makes no sense to me, there no R-devel involved in any of this, so please post separately about whatever is on your heart as that doesn't seem to be related).
> 
> Cheers,
> Simon
> 
> 
> 
>> On May 26, 2021, at 2:06 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>> 
>> Hi,
>> 
>> You might try a different CRAN mirror to see if perhaps the rlang binary that you are getting is corrupted.
>> 
>> Looking at CRAN for the package, the results for rlang on what is supposed to be R release on macOS:
>> 
>> https://cran.r-project.org/web/checks/check_results_rlang.html
>> 
>> shows a header indicating that R devel is being used, not R release:
>> 
>> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html
>> 
>> So, I am not clear if there is a macOS binary build issue that may be resulting in a conflict of sorts.
>> 
>> A spot check of other CRAN packages (including my own) shows the same use of R devel for macOS, and not R release, so perhaps there is a wider issue going on with CRAN builds, unless I am missing something here.
>> 
>> Simon (cc'd now) may be able to address that issue.
>> 
>> Regards,
>> 
>> Marc Schwartz
>> 
>> 
>> Hans W wrote on 5/25/21 9:16 AM:
>>> I installed the new R version 4.1.0 on my (normal) Macbook, and
>>> everything seemed to work fine until one of the packages depended on
>>> the 'rlang' package and I got the following error:
>>>> library(rlang)
>>>    Error: package or namespace load failed for ?rlang? in
>>>    dyn.load(file, DLLpath = DLLpath, ...): unable to load
>>>    shared object '/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so':
>>>    dlopen(/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so, 6):
>>>    Library not loaded:
>>>    /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libR.dylib
>>>    Referenced from: /Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so
>>>    Reason: image not found
>>> So I removed 'rlang' and reinstalled it. There was no error message,
>>> but when I tried to load it, the error message was:
>>>    Error: package or namespace load failed for ?rlang? in
>>>    get(Info[i, 1], envir = env): lazy-load database
>>>    '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
>>>    In addition: Warning message:
>>>    In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1
>>> One of my current applications relies on 'rvest' which depends on
>>> 'rlang'. For the moment I am using it from a Linux computer, but it's
>>> quite unfortunate that I cannot run it from macOS as well.
>>> I also uninstalled the new R version and reinstalled it, but nothing
>>> changed. Could you give me a hint on what to do (or what I did wrong)?
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue May 25 22:31:48 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 25 May 2021 13:31:48 -0700
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
In-Reply-To: <DBDB67F5-C249-41E2-A732-B73ADA53BC14@noaa.gov>
References: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
 <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
 <F705CD92-5D1E-486B-A9C3-A5C4566CCC71@R-project.org>
 <DBDB67F5-C249-41E2-A732-B73ADA53BC14@noaa.gov>
Message-ID: <886BB541-4D7C-410E-A0E7-E0BD69AD0393@noaa.gov>

Okay was able to find the link - https://www.r-bloggers.com/2020/04/updating-to-4-0-0-on-macos/

Also would suggest installing RSwitch  (https://rud.is/rswitch/) so you can keep both versions and switch between the until you ar certain all the kinks are gone.

-Roy


> On May 25, 2021, at 1:28 PM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> When R4.0 came out,  someone on R-Bloggers post a very nice to automate updating your packages from R3.6.  I just used it to do my update from R4.0 to R4.1 - it works perfectly.  I would include the script here,  but since I don't have the exact reference I don't like posting someone else's script without appropriate credit.  Do a search and you should be able to find the entry.
> 
> -Roy
> 
>> On May 25, 2021, at 1:10 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> 
>> Hans,
>> 
>> you seem to be using old library from 4.0 (see the 4.0 in the path). Make sure you remove old packages and use a clean library for 4.1 since you cannot mix packages from R 4.0.x and R 4.1.0. I would best recommend removing (or re-naming) ~/Library/R before installation to make sure you don't have incompatible old packages. Also don't forget to re-start R.
>> 
>> (Marc, I can't parse your post, it makes no sense to me, there no R-devel involved in any of this, so please post separately about whatever is on your heart as that doesn't seem to be related).
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On May 26, 2021, at 2:06 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>> 
>>> Hi,
>>> 
>>> You might try a different CRAN mirror to see if perhaps the rlang binary that you are getting is corrupted.
>>> 
>>> Looking at CRAN for the package, the results for rlang on what is supposed to be R release on macOS:
>>> 
>>> https://cran.r-project.org/web/checks/check_results_rlang.html
>>> 
>>> shows a header indicating that R devel is being used, not R release:
>>> 
>>> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html
>>> 
>>> So, I am not clear if there is a macOS binary build issue that may be resulting in a conflict of sorts.
>>> 
>>> A spot check of other CRAN packages (including my own) shows the same use of R devel for macOS, and not R release, so perhaps there is a wider issue going on with CRAN builds, unless I am missing something here.
>>> 
>>> Simon (cc'd now) may be able to address that issue.
>>> 
>>> Regards,
>>> 
>>> Marc Schwartz
>>> 
>>> 
>>> Hans W wrote on 5/25/21 9:16 AM:
>>>> I installed the new R version 4.1.0 on my (normal) Macbook, and
>>>> everything seemed to work fine until one of the packages depended on
>>>> the 'rlang' package and I got the following error:
>>>>> library(rlang)
>>>>   Error: package or namespace load failed for ?rlang? in
>>>>   dyn.load(file, DLLpath = DLLpath, ...): unable to load
>>>>   shared object '/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so':
>>>>   dlopen(/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so, 6):
>>>>   Library not loaded:
>>>>   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libR.dylib
>>>>   Referenced from: /Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so
>>>>   Reason: image not found
>>>> So I removed 'rlang' and reinstalled it. There was no error message,
>>>> but when I tried to load it, the error message was:
>>>>   Error: package or namespace load failed for ?rlang? in
>>>>   get(Info[i, 1], envir = env): lazy-load database
>>>>   '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
>>>>   In addition: Warning message:
>>>>   In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1
>>>> One of my current applications relies on 'rvest' which depends on
>>>> 'rlang'. For the moment I am using it from a Linux computer, but it's
>>>> quite unfortunate that I cannot run it from macOS as well.
>>>> I also uninstalled the new R version and reinstalled it, but nothing
>>>> changed. Could you give me a hint on what to do (or what I did wrong)?
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From m@rc_@chw@rtz @end|ng |rom me@com  Tue May 25 22:35:43 2021
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Tue, 25 May 2021 16:35:43 -0400
Subject: [R-SIG-Mac] CRAN Checks for R-Release appear to use R-Devel
Message-ID: <9edc0cb9-9108-70ce-745d-fd2453ab925e@me.com>

Hi,

This is in reply to Simon's request that I post on this topic separately 
from Hans' prior thread on rlang related problems.

In the course of looking at a few CRAN packages for that thread, 
including my own, I noted on the CRAN checks page for each package, that 
the results logs indicate the use of "R Under development", rather than 
the current R release version.

Specific example:

The CRAN check page for rlang:

https://cran.r-project.org/web/checks/check_results_rlang.html

shows in row 10:

r-release-macos-x86_64  OK

If I click on OK to get the CRAN check log with the following URL:

https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html

noting that the above URL shows:

.../r-release-macos-x86_64/...

However, the log header shows:

"using R Under development (unstable) (2021-02-19 r80028)"

Thus, if I read correctly, while the link should be for the CRAN check 
results log for the package using R release (4.1.0), it appears to be 
using an R development version from February 19, 2021.

If I check the same R Release logs for Linux and Windows for rlang:

https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/rlang-00check.html

and:

https://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/rlang-00check.html

respectively, both indicate:

using R version 4.1.0 (2021-05-18)

in the log headers.

If I check the rlang logs for other OSs on "r-devel", they indicate:

"using R Under development (unstable) (2021-05-20 r80347)"

Thus, a more recent development version of R from May 20, 2021.

So, perhaps naively, I would presume a configuration issue for the macOS 
binaries on CRAN.

Simon, does that clarify the point I was making in the prior thread?

Thanks,

Marc


From @|mon@urb@nek @end|ng |rom R-project@org  Tue May 25 22:47:11 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 26 May 2021 08:47:11 +1200
Subject: [R-SIG-Mac] CRAN Checks for R-Release appear to use R-Devel
In-Reply-To: <9edc0cb9-9108-70ce-745d-fd2453ab925e@me.com>
References: <9edc0cb9-9108-70ce-745d-fd2453ab925e@me.com>
Message-ID: <4482FEAD-E928-4998-BDFA-98D97A9D7C70@R-project.org>


Marc,

thanks, now it makes sense to me. Yes, the checks results don't seem to be synced and it is also missing the arm64 checks. I'll investigate.

Thanks,
Simon


> On May 26, 2021, at 8:35 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
> 
> Hi,
> 
> This is in reply to Simon's request that I post on this topic separately from Hans' prior thread on rlang related problems.
> 
> In the course of looking at a few CRAN packages for that thread, including my own, I noted on the CRAN checks page for each package, that the results logs indicate the use of "R Under development", rather than the current R release version.
> 
> Specific example:
> 
> The CRAN check page for rlang:
> 
> https://cran.r-project.org/web/checks/check_results_rlang.html
> 
> shows in row 10:
> 
> r-release-macos-x86_64  OK
> 
> If I click on OK to get the CRAN check log with the following URL:
> 
> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html
> 
> noting that the above URL shows:
> 
> .../r-release-macos-x86_64/...
> 
> However, the log header shows:
> 
> "using R Under development (unstable) (2021-02-19 r80028)"
> 
> Thus, if I read correctly, while the link should be for the CRAN check results log for the package using R release (4.1.0), it appears to be using an R development version from February 19, 2021.
> 
> If I check the same R Release logs for Linux and Windows for rlang:
> 
> https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/rlang-00check.html
> 
> and:
> 
> https://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/rlang-00check.html
> 
> respectively, both indicate:
> 
> using R version 4.1.0 (2021-05-18)
> 
> in the log headers.
> 
> If I check the rlang logs for other OSs on "r-devel", they indicate:
> 
> "using R Under development (unstable) (2021-05-20 r80347)"
> 
> Thus, a more recent development version of R from May 20, 2021.
> 
> So, perhaps naively, I would presume a configuration issue for the macOS binaries on CRAN.
> 
> Simon, does that clarify the point I was making in the prior thread?
> 
> Thanks,
> 
> Marc
> 


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue May 25 22:53:30 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 25 May 2021 13:53:30 -0700
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
In-Reply-To: <DBDB67F5-C249-41E2-A732-B73ADA53BC14@noaa.gov>
References: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
 <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
 <F705CD92-5D1E-486B-A9C3-A5C4566CCC71@R-project.org>
 <DBDB67F5-C249-41E2-A732-B73ADA53BC14@noaa.gov>
Message-ID: <4F7546B1-69EF-4C87-B4DE-DA1FC05E62FB@dcn.davis.ca.us>

There are many of these. Some of these "solutions" copy the actual installed packages and then run "update.packages"... which is a very bad idea. Other solutions identify the names of the packages and install fresh (good idea) but they will hiccup when you install from non-standard sources. So some people will conclude that the former are "better" and then complain that "things don't work" when they should have preferred the latter and invested the effort needed for those non-standard sources.

You would be doing a service if you identified the blog you used so the mailing list archive can clarify to future readers which category of "solution" you had followed when you encountered this problem.

Do read snippets from the Internets before running them.

On May 25, 2021 1:28:20 PM PDT, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>When R4.0 came out,  someone on R-Bloggers post a very nice to automate
>updating your packages from R3.6.  I just used it to do my update from
>R4.0 to R4.1 - it works perfectly.  I would include the script here, 
>but since I don't have the exact reference I don't like posting someone
>else's script without appropriate credit.  Do a search and you should
>be able to find the entry.
>
>-Roy
>
>> On May 25, 2021, at 1:10 PM, Simon Urbanek
><simon.urbanek at R-project.org> wrote:
>> 
>> 
>> Hans,
>> 
>> you seem to be using old library from 4.0 (see the 4.0 in the path).
>Make sure you remove old packages and use a clean library for 4.1 since
>you cannot mix packages from R 4.0.x and R 4.1.0. I would best
>recommend removing (or re-naming) ~/Library/R before installation to
>make sure you don't have incompatible old packages. Also don't forget
>to re-start R.
>> 
>> (Marc, I can't parse your post, it makes no sense to me, there no
>R-devel involved in any of this, so please post separately about
>whatever is on your heart as that doesn't seem to be related).
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On May 26, 2021, at 2:06 AM, Marc Schwartz <marc_schwartz at me.com>
>wrote:
>>> 
>>> Hi,
>>> 
>>> You might try a different CRAN mirror to see if perhaps the rlang
>binary that you are getting is corrupted.
>>> 
>>> Looking at CRAN for the package, the results for rlang on what is
>supposed to be R release on macOS:
>>> 
>>> https://cran.r-project.org/web/checks/check_results_rlang.html
>>> 
>>> shows a header indicating that R devel is being used, not R release:
>>> 
>>>
>https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html
>>> 
>>> So, I am not clear if there is a macOS binary build issue that may
>be resulting in a conflict of sorts.
>>> 
>>> A spot check of other CRAN packages (including my own) shows the
>same use of R devel for macOS, and not R release, so perhaps there is a
>wider issue going on with CRAN builds, unless I am missing something
>here.
>>> 
>>> Simon (cc'd now) may be able to address that issue.
>>> 
>>> Regards,
>>> 
>>> Marc Schwartz
>>> 
>>> 
>>> Hans W wrote on 5/25/21 9:16 AM:
>>>> I installed the new R version 4.1.0 on my (normal) Macbook, and
>>>> everything seemed to work fine until one of the packages depended
>on
>>>> the 'rlang' package and I got the following error:
>>>>> library(rlang)
>>>>    Error: package or namespace load failed for ?rlang? in
>>>>    dyn.load(file, DLLpath = DLLpath, ...): unable to load
>>>>    shared object
>'/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so':
>>>>    dlopen(/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so, 6):
>>>>    Library not loaded:
>>>>   
>/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libR.dylib
>>>>    Referenced from:
>/Users/hwb/Library/R/4.0/library/rlang/libs/rlang.so
>>>>    Reason: image not found
>>>> So I removed 'rlang' and reinstalled it. There was no error
>message,
>>>> but when I tried to load it, the error message was:
>>>>    Error: package or namespace load failed for ?rlang? in
>>>>    get(Info[i, 1], envir = env): lazy-load database
>>>>    '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
>>>>    In addition: Warning message:
>>>>    In get(Info[i, 1], envir = env) : internal error -3 in
>R_decompress1
>>>> One of my current applications relies on 'rvest' which depends on
>>>> 'rlang'. For the moment I am using it from a Linux computer, but
>it's
>>>> quite unfortunate that I cannot run it from macOS as well.
>>>> I also uninstalled the new R version and reinstalled it, but
>nothing
>>>> changed. Could you give me a hint on what to do (or what I did
>wrong)?
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>**********************
>"The contents of this message do not reflect any position of the U.S.
>Government or NOAA."
>**********************
>Roy Mendelssohn
>Supervisory Operations Research Analyst
>NOAA/NMFS
>Environmental Research Division
>Southwest Fisheries Science Center
>***Note new street address***
>110 McAllister Way
>Santa Cruz, CA 95060
>Phone: (831)-420-3666
>Fax: (831) 420-3980
>e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>
>"Old age and treachery will overcome youth and skill."
>"From those who have been given much, much will be expected" 
>"the arc of the moral universe is long, but it bends toward justice"
>-MLK Jr.
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Sent from my phone. Please excuse my brevity.


From m@rc_@chw@rtz @end|ng |rom me@com  Tue May 25 23:58:42 2021
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Tue, 25 May 2021 17:58:42 -0400
Subject: [R-SIG-Mac] CRAN Checks for R-Release appear to use R-Devel
In-Reply-To: <4482FEAD-E928-4998-BDFA-98D97A9D7C70@R-project.org>
References: <9edc0cb9-9108-70ce-745d-fd2453ab925e@me.com>
 <4482FEAD-E928-4998-BDFA-98D97A9D7C70@R-project.org>
Message-ID: <707da433-590d-7e24-351b-d70f9e99c882@me.com>

Simon,

Thanks!

Marc


Simon Urbanek wrote on 5/25/21 4:47 PM:
> Marc,
>
> thanks, now it makes sense to me. Yes, the checks results don't seem to be synced and it is also missing the arm64 checks. I'll investigate.
>
> Thanks,
> Simon
>
>
>> On May 26, 2021, at 8:35 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>
>> Hi,
>>
>> This is in reply to Simon's request that I post on this topic separately from Hans' prior thread on rlang related problems.
>>
>> In the course of looking at a few CRAN packages for that thread, including my own, I noted on the CRAN checks page for each package, that the results logs indicate the use of "R Under development", rather than the current R release version.
>>
>> Specific example:
>>
>> The CRAN check page for rlang:
>>
>> https://cran.r-project.org/web/checks/check_results_rlang.html
>>
>> shows in row 10:
>>
>> r-release-macos-x86_64  OK
>>
>> If I click on OK to get the CRAN check log with the following URL:
>>
>> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/rlang-00check.html
>>
>> noting that the above URL shows:
>>
>> .../r-release-macos-x86_64/...
>>
>> However, the log header shows:
>>
>> "using R Under development (unstable) (2021-02-19 r80028)"
>>
>> Thus, if I read correctly, while the link should be for the CRAN check results log for the package using R release (4.1.0), it appears to be using an R development version from February 19, 2021.
>>
>> If I check the same R Release logs for Linux and Windows for rlang:
>>
>> https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/rlang-00check.html
>>
>> and:
>>
>> https://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/rlang-00check.html
>>
>> respectively, both indicate:
>>
>> using R version 4.1.0 (2021-05-18)
>>
>> in the log headers.
>>
>> If I check the rlang logs for other OSs on "r-devel", they indicate:
>>
>> "using R Under development (unstable) (2021-05-20 r80347)"
>>
>> Thus, a more recent development version of R from May 20, 2021.
>>
>> So, perhaps naively, I would presume a configuration issue for the macOS binaries on CRAN.
>>
>> Simon, does that clarify the point I was making in the prior thread?
>>
>> Thanks,
>>
>> Marc
>>


From @|mon@urb@nek @end|ng |rom R-project@org  Wed May 26 00:47:30 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 26 May 2021 10:47:30 +1200
Subject: [R-SIG-Mac] rlang and the new R version 4.1.0
In-Reply-To: <CAML4n3Ox7dNUd0eqFckPHMB+tgsS+Lm3i=oumnOWh__M2Akaxw@mail.gmail.com>
References: <CAML4n3MJw0C+fyCgxYiF5S4xWk51kfvTWnwDx80DMr7wswRXjQ@mail.gmail.com>
 <50ee4a05-6d90-0632-2b5b-59a5629189fa@me.com>
 <CAJXgQP0udXbZt0XZKSP1gWA_kmK9cjw395Ua9T_ADKnNkxwr=g@mail.gmail.com>
 <CAML4n3Ox7dNUd0eqFckPHMB+tgsS+Lm3i=oumnOWh__M2Akaxw@mail.gmail.com>
Message-ID: <A0812C60-0FEC-4968-9417-08D12A68DC2C@R-project.org>


Hans,

you have to re-install *all* packages whenever you upgrade R. R only guarantees compatibility between patch versions (i.e. upgrading from R 4.0.0 to 4.0.1 does not require re-install, but from R 4.0.0 to R 4.1.0 does). That was always the case on all platforms, it's not new.

Note that the R Mac GUI makes the upgrade easier - in the Package Manager you can select to install package from previous R version if you use the system location. Otherwise you can always use simply 

install.packages(rownames(installed.packages("path-to-old-library")))

Cheers,
Simon



> On 26/05/2021, at 7:58 AM, Hans W <hwborchers at gmail.com> wrote:
> 
> Following this tip I had to remove and reinstall one after the other
> the following packages:
> 
>    rvest, rlang, magrittr, xml2, stringi, ellipsis,
>    fansi, utf8, vctrs, tibble, Rcpp, lbfgs, and GauPro
> 
> each time restarting R to make sure. Then the application worked again.
> Does this mean I would be better off deleting all of my installed
> packages and starting a fresh R?
> Was this even a requirement for installing R version 4.1 on macOS -- a
> requirement I didn't get?
> 
> Thanks for the help  --HW
> 
> 
> On Tue, 25 May 2021 at 20:31, Kevin Ushey <kevinushey at gmail.com> wrote:
>> 
>> This error:
>> 
>>    Error: package or namespace load failed for ?rlang? in
>>    get(Info[i, 1], envir = env): lazy-load database
>>    '/Users/hwb/Library/R/4.0/library/rlang/R/rlang.rdb' is corrupt
>>    In addition: Warning message:
>>    In get(Info[i, 1], envir = env) : internal error -3 in R_decompress1
>> 
>> is commonly seen when reinstalling an already-installed package. See
>> https://bugs.r-project.org/bugzilla/show_bug.cgi?id=16644 for more
>> details.
>> 
>> The resolution is to restart R after reinstalling an already-loaded package.
>> 
>> Best,
>> Kevin
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Wed May 26 01:00:11 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 26 May 2021 11:00:11 +1200
Subject: [R-SIG-Mac] [External]  tcltk on M1 mac?
In-Reply-To: <68C70E34-F2C7-4DF4-B942-A2E42A746177@temple.edu>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
 <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
 <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
 <68C70E34-F2C7-4DF4-B942-A2E42A746177@temple.edu>
Message-ID: <FA9749A0-B3B3-4976-B08A-8642FD69AACE@R-project.org>


Rich,

I think tcltk attempts to find the location of the libraries via otool from Xcode tools so it can tell you to install the missing libraries if you didn't (otherwise it would just crash). I agree that it may be worthwhile to just silence the warning when you are missing xcrun, since XCode is not a requirement at run time, so you can file a bug report. It's just a benign warning since the non-existence of xcrun doesn't prevent from running eventually.

As for XQuartz, we already do say that explicitly on the CRAN page (with a link to XQuartz 2.8.1):
"Note: the use of X11 (including tcltk) requires XQuartz. Always re-install XQuartz when upgrading your macOS to a new major version."

Cheers,
Simon



> On 26/05/2021, at 4:20 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
> 
> I just upgraded from XQuartz 2.7.11 to the current 2.8.1, and then rebooted the Mac M1.
> 
> tcltk now loads and gives warnings:
> 
> 
> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: aarch64-apple-darwin20 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
>  Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
>> setwd('/Users/rmh/Rwd/')
>> library(tcltk)
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Warning message:
> In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>  running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
>> search()
> [1] ".GlobalEnv"        "package:tcltk"     "ESSR"             
> [4] "package:stats"     "package:graphics"  "package:grDevices"
> [7] "package:utils"     "package:datasets"  "package:methods"  
> [10] "Autoloads"         "package:base"     
>> 
> 
> 
> There are fewer messages than before.
> tcltk now loads with warnings.
> Rcmdr now loads.
> 
> What should I do about xcrun and otool?
> 
> Simon, can you add a note to the CRAN download page that XQuartz 2.8.1 is needed for the Mac M1.
> 
> Rich
> 
> 
>> On May 25, 2021, at 01:36, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> Rich,
>> you need to instal XQuartz (see instructions on the CRAN page).
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On 25/05/2021, at 4:02 PM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>> 
>>> I am not seeing tcltk in either the released R
>>> R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: aarch64-apple-darwin20 (64-bit)
>>> 
>>> 
>>> or the nightly
>>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: aarch64-apple-darwin20 (64-bit)
>>> 
>>> that I just downloaded.
>>> 
>>> Here is the transcript
>>> 
>>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: aarch64-apple-darwin20 (64-bit)
>>> 
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>> 
>>> Natural language support but running in an English locale
>>> 
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>> 
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>> 
>>>> setwd('/Users/rmh/Rwd/')
>>>> library(tcltk)
>>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>> Error: package or namespace load failed for ?tcltk?:
>>> .onLoad failed in loadNamespace() for 'tcltk', details:
>>> call: dyn.load(file, DLLpath = DLLpath, ...)
>>> error: unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':
>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so, 10): Library not loaded: /opt/X11/lib/libX11.6.dylib
>>> Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so
>>> Reason: no suitable image found.  Did find:
>>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>>> In addition: Warning message:
>>> In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>>> running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
>>>> 
>>> 
>>> 
>>>> On May 14, 2021, at 19:57, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>> 
>>>> 
>>>> Vince,
>>>> 
>>>> please try the latest build, Tcl/Tk should be included now.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>>> On May 14, 2021, at 7:45 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>> 
>>>>> Vince,
>>>>> 
>>>>> Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.
>>>>> 
>>>>> Thanks,
>>>>> Simon
>>>>> 
>>>>> 
>>>>>> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
>>>>>> 
>>>>>> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
>>>>>> seems to have wrong architecture; attempt to build from source does not
>>>>>> help.  Any hints appreciated.
>>>>>> 
>>>>>> 
>>>>>> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
>>>>>> 
>>>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>>>> 
>>>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>>>> 
>>>>>> 
>>>>>>> library(tcltk)
>>>>>> 
>>>>>> *Error: package or namespace load failed for 'tcltk':*
>>>>>> 
>>>>>> * .onLoad failed in loadNamespace() for 'tcltk', details:*
>>>>>> 
>>>>>> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
>>>>>> 
>>>>>> *  error: unable to load shared object
>>>>>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
>>>>>> 
>>>>>> *
>>>>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
>>>>>> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
>>>>>> 
>>>>>> *  Referenced from:
>>>>>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
>>>>>> 
>>>>>> *  Reason: image not found*
>>>>>> 
>>>>>> -- 
>>>>>> The information in this e-mail is intended only for the ...{{dropped:18}}
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7C6f49e75a58184914818508d91f3f074a%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637575178159233703%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&amp;sdata=BRBubyTAu8ZhGQ%2BXNDXgqkg37j1Q8rMH32Y7okcaLVE%3D&amp;reserved=0
>>>>> 
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7C6f49e75a58184914818508d91f3f074a%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637575178159233703%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&amp;sdata=BRBubyTAu8ZhGQ%2BXNDXgqkg37j1Q8rMH32Y7okcaLVE%3D&amp;reserved=0
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From rmh @end|ng |rom temp|e@edu  Wed May 26 01:25:35 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 25 May 2021 23:25:35 +0000
Subject: [R-SIG-Mac] [External]  [External]  tcltk on M1 mac?
In-Reply-To: <FA9749A0-B3B3-4976-B08A-8642FD69AACE@R-project.org>
References: <CAANT7+W4TsZdvTSCXj2KunpsbBd_bEkxe99J+xw5GQLFeaR7bA@mail.gmail.com>
 <C14C11A0-3DF5-41FD-A159-637F19263807@R-project.org>
 <46629FEB-54E2-4061-975D-030C707E94EE@R-project.org>
 <659F0F14-C54F-4F79-B600-2E497CE8FBD6@temple.edu>
 <FA0EE616-8112-4836-990A-B16511EB9A53@R-project.org>
 <68C70E34-F2C7-4DF4-B942-A2E42A746177@temple.edu>
 <FA9749A0-B3B3-4976-B08A-8642FD69AACE@R-project.org>
Message-ID: <478D531F-8AE7-4510-A3CD-20D4B58A9E05@temple.edu>

1. I don't understand the issue well enough to file a bug.
I do have Xcode.  Why wasn't it found?

I just clicked on Xcode.app and it wants to install more stuff.
I clicked "install" and it did something with a green bar movimg to the right
and then welcomed me to Xcode 12.5 (12E262).
It wants me to do something about a project, which I am not going to do, so I will just close Xcode.

I quit R and the started R and then library(tcltk).
It gave the same messages about xcrun and otool.
Consequently I don't know if the install button on Xcode actually installed anything.
The Finder in Applications shows May 3, 2021 which is three weeks ago, not today.
This suggests to me I should issue an xcode command somewhere so it can find those things.
Perhaps you could change the warning to give information on what to type where (in the terminal app?,
in the Xcode app?,  as a system("") command from within R?)

2. The instruction on the CRAN page about XQuartz says to upgrade for a new macOS.
I don't have a new macOS.  I am at Big Sur 11.3..  I upgraded to
a new R major version from 4.0.4 to 4.1.0.  Should the instruction say to upgrade XQuartz when I
upgrade to a new R major version?

Rich

> On May 25, 2021, at 19:00, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Rich,
> 
> I think tcltk attempts to find the location of the libraries via otool from Xcode tools so it can tell you to install the missing libraries if you didn't (otherwise it would just crash). I agree that it may be worthwhile to just silence the warning when you are missing xcrun, since XCode is not a requirement at run time, so you can file a bug report. It's just a benign warning since the non-existence of xcrun doesn't prevent from running eventually.
> 
> As for XQuartz, we already do say that explicitly on the CRAN page (with a link to XQuartz 2.8.1):
> "Note: the use of X11 (including tcltk) requires XQuartz. Always re-install XQuartz when upgrading your macOS to a new major version."
> 
> Cheers,
> Simon
> 
> 
> 
>> On 26/05/2021, at 4:20 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>> 
>> I just upgraded from XQuartz 2.7.11 to the current 2.8.1, and then rebooted the Mac M1.
>> 
>> tcltk now loads and gives warnings:
>> 
>> 
>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: aarch64-apple-darwin20 (64-bit)
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>> 
>> Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>>> setwd('/Users/rmh/Rwd/')
>>> library(tcltk)
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> Warning message:
>> In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>> running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
>>> search()
>> [1] ".GlobalEnv"        "package:tcltk"     "ESSR"             
>> [4] "package:stats"     "package:graphics"  "package:grDevices"
>> [7] "package:utils"     "package:datasets"  "package:methods"  
>> [10] "Autoloads"         "package:base"     
>>> 
>> 
>> 
>> There are fewer messages than before.
>> tcltk now loads with warnings.
>> Rcmdr now loads.
>> 
>> What should I do about xcrun and otool?
>> 
>> Simon, can you add a note to the CRAN download page that XQuartz 2.8.1 is needed for the Mac M1.
>> 
>> Rich
>> 
>> 
>>> On May 25, 2021, at 01:36, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>> Rich,
>>> you need to instal XQuartz (see instructions on the CRAN page).
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>>> On 25/05/2021, at 4:02 PM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>>> 
>>>> I am not seeing tcltk in either the released R
>>>> R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>> 
>>>> 
>>>> or the nightly
>>>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>> 
>>>> that I just downloaded.
>>>> 
>>>> Here is the transcript
>>>> 
>>>> R version 4.1.0 Patched (2021-05-23 r80364) -- "Camp Pontanezen"
>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>> 
>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>> You are welcome to redistribute it under certain conditions.
>>>> Type 'license()' or 'licence()' for distribution details.
>>>> 
>>>> Natural language support but running in an English locale
>>>> 
>>>> R is a collaborative project with many contributors.
>>>> Type 'contributors()' for more information and
>>>> 'citation()' on how to cite R or R packages in publications.
>>>> 
>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>> 'help.start()' for an HTML browser interface to help.
>>>> Type 'q()' to quit R.
>>>> 
>>>>> setwd('/Users/rmh/Rwd/')
>>>>> library(tcltk)
>>>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>>> Error: package or namespace load failed for ?tcltk?:
>>>> .onLoad failed in loadNamespace() for 'tcltk', details:
>>>> call: dyn.load(file, DLLpath = DLLpath, ...)
>>>> error: unable to load shared object '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':
>>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so, 10): Library not loaded: /opt/X11/lib/libX11.6.dylib
>>>> Referenced from: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so
>>>> Reason: no suitable image found.  Did find:
>>>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>>>> 	/opt/X11/lib/libX11.6.dylib: no matching architecture in universal wrapper
>>>> In addition: Warning message:
>>>> In system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>>>> running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/library/tcltk/libs//tcltk.so'' had status 1
>>>>> 
>>>> 
>>>> 
>>>>> On May 14, 2021, at 19:57, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>>> 
>>>>> 
>>>>> Vince,
>>>>> 
>>>>> please try the latest build, Tcl/Tk should be included now.
>>>>> 
>>>>> Thanks,
>>>>> Simon
>>>>> 
>>>>> 
>>>>> 
>>>>>> On May 14, 2021, at 7:45 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>>> 
>>>>>> Vince,
>>>>>> 
>>>>>> Thanks for the report, yes, that is a known problem, because the R installer for arm64 doesn't include Tcl/Tk unlike the Intel version. It is a long story, but I hope to update the installer soon.
>>>>>> 
>>>>>> Thanks,
>>>>>> Simon
>>>>>> 
>>>>>> 
>>>>>>> On May 14, 2021, at 02:47, Vincent Carey <stvjc at channing.harvard.edu> wrote:
>>>>>>> 
>>>>>>> I can't seem to get tcltk running with R on M1 machine.  Homebrew tcltk
>>>>>>> seems to have wrong architecture; attempt to build from source does not
>>>>>>> help.  Any hints appreciated.
>>>>>>> 
>>>>>>> 
>>>>>>> R version 4.1.0 RC (2021-05-10 r80283) -- "Camp Pontanezen"
>>>>>>> 
>>>>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>>>>> 
>>>>>>> Platform: aarch64-apple-darwin20 (64-bit)
>>>>>>> 
>>>>>>> 
>>>>>>>> library(tcltk)
>>>>>>> 
>>>>>>> *Error: package or namespace load failed for 'tcltk':*
>>>>>>> 
>>>>>>> * .onLoad failed in loadNamespace() for 'tcltk', details:*
>>>>>>> 
>>>>>>> *  call: dyn.load(file, DLLpath = DLLpath, ...)*
>>>>>>> 
>>>>>>> *  error: unable to load shared object
>>>>>>> '/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so':*
>>>>>>> 
>>>>>>> *
>>>>>>> dlopen(/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so,
>>>>>>> 10): Library not loaded: /Library/Frameworks/Tcl.framework/Versions/8.6/Tcl*
>>>>>>> 
>>>>>>> *  Referenced from:
>>>>>>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library/tcltk/libs/tcltk.so*
>>>>>>> 
>>>>>>> *  Reason: image not found*
>>>>>>> 
>>>>>>> -- 
>>>>>>> The information in this e-mail is intended only for the ...{{dropped:18}}
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7C16857f63f22d4631e94808d91fd0de1d%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637575804226218839%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&amp;sdata=9CVLS1HXFUw%2F2p3UWobJa%2BMj3oKtOOq9RF%2BvS%2FrljdE%3D&amp;reserved=0
>>>>>> 
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7C16857f63f22d4631e94808d91fd0de1d%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637575804226218839%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&amp;sdata=9CVLS1HXFUw%2F2p3UWobJa%2BMj3oKtOOq9RF%2BvS%2FrljdE%3D&amp;reserved=0
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&amp;data=04%7C01%7Crmh%40temple.edu%7C16857f63f22d4631e94808d91fd0de1d%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637575804226228803%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&amp;sdata=lJ3QeyVfJzCebqvKS1QeaAbYQMiTYO2L74DHaDvEXIQ%3D&amp;reserved=0


From rmh @end|ng |rom temp|e@edu  Wed May 26 15:43:34 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 26 May 2021 13:43:34 +0000
Subject: [R-SIG-Mac] 
 [External]  [External]  [External]  tcltk on M1 mac?
In-Reply-To: <D07E6811-D734-4B7D-9D49-AA6127AE7D7E@contoso.com>
References: <D07E6811-D734-4B7D-9D49-AA6127AE7D7E@contoso.com>
Message-ID: <8C3A3320-233D-46A9-87A9-0EB9B44B7E8E@temple.edu>

what you say sounds right, but I need more specifics.  I tried to run git from Emacs *shell* and get this

rmh at MacBook-Air ~ % git
git
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
rmh at MacBook-Air ~ % 

maybe I should try terminal
---it got farther and gave information
now lets go back to *shell*
---nope, same "missing xcrun" error.

> On May 26, 2021, at 09:33, Sparapani, Rodney <rsparapa at mcw.edu> wrote:
> 
> Hi Rich:
>  
> I think when you install Xcode.app it doesn?t install the command line tools.
> What I usually do is run git from the command line.  And then it will prompt
> you to install the command line tools since that is where git is found also
> and by default it is just a stub.
>  
> -- 
> Rodney Sparapani, Associate Professor of Biostatistics
> Chair ISBA Section on Biostatistics and Pharmaceutical Statistics
> Institute for Health and Equity, Division of Biostatistics
> Medical College of Wisconsin, Milwaukee Campus


From r@p@r@p@ @end|ng |rom mcw@edu  Wed May 26 15:50:10 2021
From: r@p@r@p@ @end|ng |rom mcw@edu (Sparapani, Rodney)
Date: Wed, 26 May 2021 13:50:10 +0000
Subject: [R-SIG-Mac] 
 [External]  [External]  [External]  tcltk on M1 mac?
In-Reply-To: <8C3A3320-233D-46A9-87A9-0EB9B44B7E8E@temple.edu>
References: <D07E6811-D734-4B7D-9D49-AA6127AE7D7E@contoso.com>
 <8C3A3320-233D-46A9-87A9-0EB9B44B7E8E@temple.edu>
Message-ID: <D4D65757-0730-473A-BAF3-02F49386FF11@mcw.edu>

Hmm....  I just upgraded to Big Sur on a new MBP and that worked for me.
It prompted me to run the following...
xcode-select --install

-- 

Rodney Sparapani, Associate Professor of Biostatistics
Chair ISBA Section on Biostatistics and Pharmaceutical Statistics 
Institute for Health and Equity, Division of Biostatistics
Medical College of Wisconsin, Milwaukee Campus
 

?On 5/26/21, 8:43 AM, "Richard M. Heiberger" <rmh at temple.edu> wrote:

    ATTENTION: This email originated from a sender outside of MCW. Use caution when clicking on links or opening attachments.
    ________________________________

    what you say sounds right, but I need more specifics.  I tried to run git from Emacs *shell* and get this

    rmh at MacBook-Air ~ % git
    git
    xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
    rmh at MacBook-Air ~ %

    maybe I should try terminal
    ---it got farther and gave information
    now lets go back to *shell*
    ---nope, same "missing xcrun" error.

    > On May 26, 2021, at 09:33, Sparapani, Rodney <rsparapa at mcw.edu> wrote:
    >
    > Hi Rich:
    >
    > I think when you install Xcode.app it doesn?t install the command line tools.
    > What I usually do is run git from the command line.  And then it will prompt
    > you to install the command line tools since that is where git is found also
    > and by default it is just a stub.
    >
    > --
    > Rodney Sparapani, Associate Professor of Biostatistics
    > Chair ISBA Section on Biostatistics and Pharmaceutical Statistics
    > Institute for Health and Equity, Division of Biostatistics
    > Medical College of Wisconsin, Milwaukee Campus



From rmh @end|ng |rom temp|e@edu  Wed May 26 16:03:41 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 26 May 2021 14:03:41 +0000
Subject: [R-SIG-Mac] 
 [External]  [External]  [External]  tcltk on M1 mac?
In-Reply-To: <D4D65757-0730-473A-BAF3-02F49386FF11@mcw.edu>
References: <D07E6811-D734-4B7D-9D49-AA6127AE7D7E@contoso.com>
 <8C3A3320-233D-46A9-87A9-0EB9B44B7E8E@temple.edu>
 <D4D65757-0730-473A-BAF3-02F49386FF11@mcw.edu>
Message-ID: <39BE0FB0-0DE8-484D-833B-375B207A15C0@temple.edu>

Rodney, 

thank you.
I did that and it installed stuff, and now
library(tcltk)
or
library(Rcmdr)

work normally.

Simon, can you change the warning message about xcrun to a suggestion to run from the terminal
xcode-select --install

Rich

> On May 26, 2021, at 09:50, Sparapani, Rodney <rsparapa at mcw.edu> wrote:
> 
> xcode-select --install


