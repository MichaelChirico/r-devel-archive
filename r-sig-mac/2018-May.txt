From fisher at plessthan.com  Fri May  4 02:01:54 2018
From: fisher at plessthan.com (Dennis Fisher)
Date: Thu, 3 May 2018 17:01:54 -0700
Subject: [R-SIG-Mac] Location of plot() window
In-Reply-To: <B9C22F84-6B6D-4F9B-A219-F23020459815@R-project.org>
References: <D70FEE8B-3809-4AED-B5FF-480BE2B89B2C@plessthan.com>
 <B9C22F84-6B6D-4F9B-A219-F23020459815@R-project.org>
Message-ID: <C33BA3AF-39FB-4452-9EBF-C6F379AFEF00@plessthan.com>

Simon

I was hopeful that your suggestion would resolve the problem ? however, when I execute the exact code that you suggested from a terminal, I get an error.
> library(Cocoa)
> quartz(); w = .M(.M("NSApplication", "sharedApplication"), "keyWindow")
> .M(w, "setFrameTopLeftPoint:", NSMakePoint(100, 1000))
Error in .M(w, "setFrameTopLeftPoint:", NSMakePoint(100, 1000)) : 
  cannot find target class or object.
A quartz window opens but the .M command did not move the window.  I searched the rforge website to see if it provided any insight but I could not find anything relevant.

I then executed from RGui successfully.

Can you advise how to make this work when executed from a terminal?

On a different note, the change log contains:
 new conversions code, support for many types
        has been added. Structs are converted to
        pairlists with a "stuct.name" attribute and vice versa.

Is there an ?r? missing from:
	stuct.name

Any help would be appreciated.

Thanks.

Dennis


Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com




> On Apr 30, 2018, at 1:26 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Dennis,
> 
> unfortunately, the Quartz windows are always placed at the same coordinates 100 x 100 and there is no option to change that.
> 
> However, you can move it around using the Cocoa package if you so desire (assuming you're in the R.app):
> 
> install.packages("Cocoa",,"http://rforge.net <http://rforge.net/>")
> 
> library(Cocoa)
> 
> ## create a quartz device and get its window
> ## make sure you run the following as one command or else you'll get the console window instead
> quartz(); w = .M(.M("NSApplication", "sharedApplication"), "keyWindow")
> 
> ## move the window:
> .M(w, "setFrameTopLeftPoint:", NSMakePoint(100, 1000))
> 
> 
> You can move it anywhere on any screen - also off-screen.
> 
> The other alternative is to move it using AppleScript.
> 
> Cheers,
> Simon
> 
> 
> 
>> On Apr 30, 2018, at 11:46 AM, Dennis Fisher <fisher at plessthan.com <mailto:fisher at plessthan.com>> wrote:
>> 
>> R 3.5.0
>> OS X
>> 
>> Colleagues
>> 
>> When I open a plot() window on-screen, it appears in the lower left corner of the screen.  
>> Is it possible to control the location?  If so, what commands?  
>> And, if so, can I locate it to a display other than the primary display?
>> 
>> Dennis
>> 
>> 
>> 
>> Dennis Fisher MD
>> P < (The "P Less Than" Company)
>> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>> www.PLessThan.com <http://www.plessthan.com/> <http://www.plessthan.com/ <http://www.plessthan.com/>>
>> 
>> 
>> 
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac <https://stat.ethz.ch/mailman/listinfo/r-sig-mac>

	[[alternative HTML version deleted]]


From dwin@emiu@ @ending from comc@@t@net  Tue May 15 13:51:28 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Tue, 15 May 2018 04:51:28 -0700
Subject: [R-SIG-Mac] R 3.5.0
In-Reply-To: <7593000A-717A-4E2C-8800-CA734856F36A@noaa.gov>
References: <B0627793-1750-49FE-AA25-67895C092A18@noaa.gov>
 <6CCA0389-DA79-4576-B6E4-06918A60D946@R-project.org>
 <7593000A-717A-4E2C-8800-CA734856F36A@noaa.gov>
Message-ID: <382450DC-5919-4EFD-9396-6EC2AD61B966@comcast.net>

It was my experience yesterday with using the old method (copy folders to new ../library/ and use update.packages(checkBuilt=TRUE) ) that I was given the option to have packages with more recent updates compiled from source. I had anticipated the issue (time) mentioned by Simon, so I only copied over perhaps a third of my full complement of packages. 

Sent from my iPhone

> On Apr 25, 2018, at 11:20 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> Hi Simon:
> 
> Perfect,  thank you for the info.  One of the reasons I was asking is in ~/Library/R i have a umber of packages that in fact are in CRAN but what I have are the development versions.  Everything I have in /Library/Frameworks/R are the CRAN versions.  It is easier for me to do the ~/Library//R update myself through a script so I keep the development versions.
> 
> Mostly also thanks for all of your work on the Mac version.  Much appreciated.
> 
> -Roy
> 
>> On Apr 25, 2018, at 11:10 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Roy,
>> 
>> first, I'd recommend holding off with updating packages. Due to the number of packages, updating all of them takes quite some time, so in order to use the binaries that are built with the release version of R it will probably take at least until tomorrow that they are propagated through the mirror network. Hence you'll have to re-install them anyway if you do it now. 
>> 
>> That said, the "select packages from previous version" search function only applies to the system library - the use library is not in scope. However, where you install those packages is up to you depending on the selection in the Package Installer - the two steps are separate in the GUI.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On Apr 25, 2018, at 11:26 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>>> 
>>> Hi All:
>>> 
>>> If I remember correctly how R release numbers work,  R 3.5.0 would mean best practice would be to re-install all packages,  is this correct?  The Mac version has had a mechanism that does helps automate this process,  but I have a few questions as to how this works.  Specifically:
>>> 
>>> 1.  In looking for packages to re-install, does it look just in the /LIbrary/Frameworks/R location for packages,  or does it look in ~/username/Library/R also?
>>> 
>>> 2.  If it does look at both locations,  does the re-install then put everything into  /LIbrary/Frameworks/R or is present location maintained?
>>> 
>>> I ask because I have a lot of packages in ~/username/Library/R and want to maintain things that way, so I want to be certain that I know what will happen fi I use the built-in mechanism.
>>> 
>>> Thanks,
>>> 
>>> -Roy
>>> 
>>> 
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected" 
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From nigelfdel@ney @ending from gm@il@com  Wed May 16 20:40:18 2018
From: nigelfdel@ney @ending from gm@il@com (Nigel Delaney)
Date: Wed, 16 May 2018 11:40:18 -0700
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
Message-ID: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>

Hi,

Mac binaries on R are distributed as .pkg files available from CRAN
for installation.  Does anyone know if the source script (assuming a
script is used) that generates this pkg file is available anywhere?
The pkg seems to contain a few elements like a postflight/postinstall
script that I could not find in any open source repository and are not
part of the R binaries.

We have a few users who are dealing with the fortran compiler issues
on Mac, and were hoping to just modify the current .pkg to contain a
few more packages, was hoping to avoid reinventing the wheel on the
packaging scripts.

Thanks for any help,
Nigel


From dwin@emiu@ @ending from comc@@t@net  Thu May 17 03:50:28 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Wed, 16 May 2018 21:50:28 -0400
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
In-Reply-To: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
References: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
Message-ID: <5517EC3E-2F21-4589-AC07-3D5CE6CC2094@comcast.net>


> On May 16, 2018, at 2:40 PM, Nigel Delaney <nigelfdelaney at gmail.com> wrote:
> 
> Hi,
> 
> Mac binaries on R are distributed as .pkg files available from CRAN
> for installation.  Does anyone know if the source script (assuming a
> script is used) that generates this pkg file is available anywhere?
> The pkg seems to contain a few elements like a postflight/postinstall
> script that I could not find in any open source repository and are not
> part of the R binaries.
> 
> We have a few users who are dealing with the fortran compiler issues
> on Mac, and were hoping to just modify the current .pkg to contain a
> few more packages, was hoping to avoid reinventing the wheel on the
> packaging scripts.
> 

Are their clang and gfortran installations up-to-date:

https://cran.r-project.org/bin/macosx/tools/


> Thanks for any help,
> Nigel
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ccberry @ending from uc@d@edu  Thu May 17 18:39:30 2018
From: ccberry @ending from uc@d@edu (Berry, Charles)
Date: Thu, 17 May 2018 16:39:30 +0000
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
In-Reply-To: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
References: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
Message-ID: <DCAFA945-F8C0-4FA9-9129-DA41FA707129@ucsd.edu>



> On May 16, 2018, at 11:40 AM, Nigel Delaney <nigelfdelaney at gmail.com> wrote:
> 
> Hi,
> 
> Mac binaries on R are distributed as .pkg files available from CRAN
> for installation.  Does anyone know if the source script (assuming a
> script is used) that generates this pkg file is available anywhere?
> The pkg seems to contain a few elements like a postflight/postinstall
> script that I could not find in any open source repository and are not
> part of the R binaries.
> 
> We have a few users who are dealing with the fortran compiler issues
> on Mac, and were hoping to just modify the current .pkg to contain a
> few more packages, was hoping to avoid reinventing the wheel on the
> packaging scripts.
> 


Why not just provide those users with the binaries for those packages?

If there are more than a few users and/or more than a few packages that need this treatment, set up your own repository and put the binaries there. See:

https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Setting-up-a-package-repository

HTH,

Chuck


From nigelfdel@ney @ending from gm@il@com  Thu May 17 18:44:39 2018
From: nigelfdel@ney @ending from gm@il@com (Nigel Delaney)
Date: Thu, 17 May 2018 09:44:39 -0700
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
In-Reply-To: <DCAFA945-F8C0-4FA9-9129-DA41FA707129@ucsd.edu>
References: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
 <DCAFA945-F8C0-4FA9-9129-DA41FA707129@ucsd.edu>
Message-ID: <CACHhbWP=jYkoRchzXda7iALbdNz8ny_UYaH_P_17yRnz=9=2LQ@mail.gmail.com>

Thanks for the responses so far.

David - indeed those instructions are up to date, but people are
struggling with the issue and unable to fix that (and keep trying to
install from source).

Chuck - Thanks also for the suggestion, it's a good idea.  I'm hoping
we might be able to have a one step installation to keep things simple
though.

Cheers,
Nigel

On Thu, May 17, 2018 at 9:39 AM, Berry, Charles <ccberry at ucsd.edu> wrote:
>
>
>> On May 16, 2018, at 11:40 AM, Nigel Delaney <nigelfdelaney at gmail.com> wrote:
>>
>> Hi,
>>
>> Mac binaries on R are distributed as .pkg files available from CRAN
>> for installation.  Does anyone know if the source script (assuming a
>> script is used) that generates this pkg file is available anywhere?
>> The pkg seems to contain a few elements like a postflight/postinstall
>> script that I could not find in any open source repository and are not
>> part of the R binaries.
>>
>> We have a few users who are dealing with the fortran compiler issues
>> on Mac, and were hoping to just modify the current .pkg to contain a
>> few more packages, was hoping to avoid reinventing the wheel on the
>> packaging scripts.
>>
>
>
> Why not just provide those users with the binaries for those packages?
>
> If there are more than a few users and/or more than a few packages that need this treatment, set up your own repository and put the binaries there. See:
>
> https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Setting-up-a-package-repository
>
> HTH,
>
> Chuck
>
>
>


From b@l@mut2 @ending from illinoi@@edu  Thu May 17 21:15:58 2018
From: b@l@mut2 @ending from illinoi@@edu (Balamuta, James Joseph)
Date: Thu, 17 May 2018 19:15:58 +0000
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
In-Reply-To: <CACHhbWP=jYkoRchzXda7iALbdNz8ny_UYaH_P_17yRnz=9=2LQ@mail.gmail.com>
References: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
 <DCAFA945-F8C0-4FA9-9129-DA41FA707129@ucsd.edu>
 <CACHhbWP=jYkoRchzXda7iALbdNz8ny_UYaH_P_17yRnz=9=2LQ@mail.gmail.com>
Message-ID: <0073969C-B7E4-417C-B67D-C2BC48B8BE90@illinois.edu>

Greetings and Salutations Nigel,

I've "augmented" the base R install via an unofficial, e.g. not sanctioned by CRAN, Rtools build. This can be found here:

https://github.com/coatless/r-macos-rtools

Presently, the latest release only supports the R 3.4.* line:

https://github.com/coatless/r-macos-rtools/releases/tag/v1.0.0

I'll likely update it this weekend to provide support for R 3.5.*. In particular, I'll bump the compiler from clang4 to clang6.

Sincerely,

JJB

?On 5/17/18, 11:45 AM, "R-SIG-Mac on behalf of Nigel Delaney" <r-sig-mac-bounces at r-project.org on behalf of nigelfdelaney at gmail.com> wrote:

    Thanks for the responses so far.
    
    David - indeed those instructions are up to date, but people are
    struggling with the issue and unable to fix that (and keep trying to
    install from source).
    
    Chuck - Thanks also for the suggestion, it's a good idea.  I'm hoping
    we might be able to have a one step installation to keep things simple
    though.
    
    Cheers,
    Nigel
    
    On Thu, May 17, 2018 at 9:39 AM, Berry, Charles <ccberry at ucsd.edu> wrote:
    >
    >
    >> On May 16, 2018, at 11:40 AM, Nigel Delaney <nigelfdelaney at gmail.com> wrote:
    >>
    >> Hi,
    >>
    >> Mac binaries on R are distributed as .pkg files available from CRAN
    >> for installation.  Does anyone know if the source script (assuming a
    >> script is used) that generates this pkg file is available anywhere?
    >> The pkg seems to contain a few elements like a postflight/postinstall
    >> script that I could not find in any open source repository and are not
    >> part of the R binaries.
    >>
    >> We have a few users who are dealing with the fortran compiler issues
    >> on Mac, and were hoping to just modify the current .pkg to contain a
    >> few more packages, was hoping to avoid reinventing the wheel on the
    >> packaging scripts.
    >>
    >
    >
    > Why not just provide those users with the binaries for those packages?
    >
    > If there are more than a few users and/or more than a few packages that need this treatment, set up your own repository and put the binaries there. See:
    >
    > https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Setting-up-a-package-repository
    >
    > HTH,
    >
    > Chuck
    >
    >
    >
    
    _______________________________________________
    R-SIG-Mac mailing list
    R-SIG-Mac at r-project.org
    https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    


From rmh @ending from temple@edu  Tue May 22 07:36:52 2018
From: rmh @ending from temple@edu (Richard M. Heiberger)
Date: Tue, 22 May 2018 01:36:52 -0400
Subject: [R-SIG-Mac] java version, perhaps related to ggplot2
Message-ID: <CAGx1TMBxXX8vsN7q1Qi3m_nknSf7O1kJ384ODzJ0d7D64UtfPA@mail.gmail.com>

sI have Macintosh High Sierra 10.13.4
and R_3.5.0

I am attempting to R CMD build and check my package microplot against
the imminent ggplot2_2.2.1.9000

The build fails with messages

** byte-compile and prepare package for lazy loading
Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object
'/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
  dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
6): Library not loaded:
/Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
  Referenced from:
/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
  Reason: image not found
ERROR: lazy loading failed for package ?microplot?

Indeed I do not have Java 9, I have Java 8, which the Java updater
says is current (171).
The java site
http://www.oracle.com/technetwork/java/javase/overview/index.html
seems to want to give me Java 10 (not Java 9), and the discussion on
this R-sig-mac list
    [R-SIG-Mac] R and Java 10 ? rJava not able to build
beginning March 29 seems to say 8 is still correct.  As suggested
there I looked at R-admin for 3.5.0
and discover "The situation with Java support on macOS is messy".
I attempted the suggested workaround
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home
and got the same message as above.

I need guidance as to the next steps I should take.

Rich


From tom@elliott @ending from @uckl@nd@@c@nz  Wed May 23 05:07:25 2018
From: tom@elliott @ending from @uckl@nd@@c@nz (Tom Elliott)
Date: Wed, 23 May 2018 03:07:25 +0000
Subject: [R-SIG-Mac] RGtk2 binaries
Message-ID: <1527044845999.90398@auckland.ac.nz>

Hi all,


Since R 3.4, the mac package binaries for RGtk2 have been unavailable. The install log from CRAN shows GTK cannot be found.

* installing *source* package 'RGtk2' ...
** package 'RGtk2' successfully unpacked and MD5 sums checked
checking for pkg-config... /usr/local/bin/pkg-config
checking pkg-config is at least version 0.9.0... yes
checking for INTROSPECTION... no
checking for GTK... no
configure: error: GTK version 2.8.0 required
ERROR: configuration failed for package 'RGtk2'
* removing '/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/results/3.5/RGtk2.Rcheck/RGtk2'


Is there any possibility of this being fixed in the (near) future? We have a software package that depends on RGtk2 for the UI, so we are currently stuck forcing them to use R3.2 which is inevitably becoming obsolete as other packages we use require more up-to-date versions of R.



Thanks,

- Tom?

	[[alternative HTML version deleted]]


From lee @ending from truthfromd@t@@com  Wed May 23 15:53:30 2018
From: lee @ending from truthfromd@t@@com (Lee Godfrey)
Date: Wed, 23 May 2018 09:53:30 -0400
Subject: [R-SIG-Mac] RGtk2 binaries
In-Reply-To: <1527044845999.90398@auckland.ac.nz>
References: <1527044845999.90398@auckland.ac.nz>
Message-ID: <a522bfd2-958a-bd29-c569-8643b4123f1a@truthfromdata.com>

The easiest way to compile RGtk2 is to use homebrew to install gtk+.

I tried to compile, received the same error as you, installed gtk+ and 
compiled successfully.


On 5/22/18 11:07 PM, Tom Elliott wrote:
> Hi all,
>
>
> Since R 3.4, the mac package binaries for RGtk2 have been unavailable. The install log from CRAN shows GTK cannot be found.
>
> * installing *source* package 'RGtk2' ...
> ** package 'RGtk2' successfully unpacked and MD5 sums checked
> checking for pkg-config... /usr/local/bin/pkg-config
> checking pkg-config is at least version 0.9.0... yes
> checking for INTROSPECTION... no
> checking for GTK... no
> configure: error: GTK version 2.8.0 required
> ERROR: configuration failed for package 'RGtk2'
> * removing '/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/results/3.5/RGtk2.Rcheck/RGtk2'
>
>
> Is there any possibility of this being fixed in the (near) future? We have a software package that depends on RGtk2 for the UI, so we are currently stuck forcing them to use R3.2 which is inevitably becoming obsolete as other packages we use require more up-to-date versions of R.
>
>
>
> Thanks,
>
> - Tom?
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From dwin@emiu@ @ending from comc@@t@net  Thu May 24 01:50:19 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Wed, 23 May 2018 19:50:19 -0400
Subject: [R-SIG-Mac] java version, perhaps related to ggplot2
In-Reply-To: <CAGx1TMBxXX8vsN7q1Qi3m_nknSf7O1kJ384ODzJ0d7D64UtfPA@mail.gmail.com>
References: <CAGx1TMBxXX8vsN7q1Qi3m_nknSf7O1kJ384ODzJ0d7D64UtfPA@mail.gmail.com>
Message-ID: <7287B76A-B859-4EC4-AE4F-75D5DF446F32@comcast.net>



> On May 22, 2018, at 1:36 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
> 
> sI have Macintosh High Sierra 10.13.4
> and R_3.5.0
> 
> I am attempting to R CMD build and check my package microplot against
> the imminent ggplot2_2.2.1.9000
> 

I have a new High Sierra Machine with a System that was ported over from an earlier version of the OS. I've installed R 3.5.0.  I tried installing micro plot from binary without error, but when I try to load the rJava library I was getting an error with the old Java version 151, so I accepted the Oracle offer of installing version 171 downloaded from the Java website, but I'm also seeing:

library(rJava)
Error: package or namespace load failed for ?rJava?:
 .onLoad failed in loadNamespace() for 'rJava', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
  dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so, 6): Library not loaded: /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
  Referenced from: /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
  Reason: image not found


There is a folder  /Library/Java/JavaVirtualMachines/jdk1.8.0_171.jdk, but nothing named with a jdk-9 prefix


S
Best;

David.

> The build fails with messages
> 
> ** byte-compile and prepare package for lazy loading
> Error : .onLoad failed in loadNamespace() for 'rJava', details:
>  call: dyn.load(file, DLLpath = DLLpath, ...)
>  error: unable to load shared object
> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>  dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
> 6): Library not loaded:
> /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
>  Referenced from:
> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>  Reason: image not found
> ERROR: lazy loading failed for package ?microplot?
> 
> Indeed I do not have Java 9, I have Java 8, which the Java updater
> says is current (171).
> The java site
> http://www.oracle.com/technetwork/java/javase/overview/index.html
> seems to want to give me Java 10 (not Java 9), and the discussion on
> this R-sig-mac list
>    [R-SIG-Mac] R and Java 10 ? rJava not able to build
> beginning March 29 seems to say 8 is still correct.  As suggested
> there I looked at R-admin for 3.5.0
> and discover "The situation with Java support on macOS is messy".
> I attempted the suggested workaround
> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home
> and got the same message as above.
> 
> I need guidance as to the next steps I should take.
> 
> Rich
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From dwin@emiu@ @ending from comc@@t@net  Thu May 24 01:52:42 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Wed, 23 May 2018 19:52:42 -0400
Subject: [R-SIG-Mac] RQDA/RGtk2 Installation Problem
In-Reply-To: <CAGJtK3T3yY8mQM6cUdPFx6fHkEvfk9eQV8_JWE7M88NdgBU40A@mail.gmail.com>
References: <CAGJtK3T3yY8mQM6cUdPFx6fHkEvfk9eQV8_JWE7M88NdgBU40A@mail.gmail.com>
Message-ID: <57EAAF27-BD3C-47C4-AF83-FFE4501E7B73@comcast.net>



> On Apr 15, 2018, at 8:34 AM, Ryoko Yamamoto <ryokobe at gmail.com> wrote:
> 
> Greetings,
> 
> I have been having a problem installing RQDA on my Mac (OS 10.13.2). I
> followed the installation process on the RQDA page (http://rqda.r-forge.r-
> project.org/), but I keep getting an error message saying that I am missing
> pkg-config and GTK. I reinstalled XQuartz and GTK+ 2.24.17 multiple times
> (and reinstalled R version 3.4.4), but kept receiving the same error
> message.
> 
> Some kind person suggested this page as a possible solution:
> 
> https://stackoverflow.com/questions/19645590/running-rattle-on-mac-os-x-10-9-mavericks/19719518#19719518

The problem with this answer is that it refers to installation on an older version of R. The current MacOS version uses clang6. See https://cran.r-project.org/bin/macosx/tools/

You _might_ be able to run clang4 if you really knew what you were doing, but I'm not in any sort of position to opine on that. The Tools page says that clang6 was used to provide OpenMP support.

> 
> I am stuck after "brew install gtk+ cairo." I have very little knowledge of
> coding, and unsure how to create or modify  ~/.R/Makevars....

A Makevars fie is just a text file. Use TextEdit.app or any programming editor. I'm not sure that those directions are current. The Mac R Tools page used to have similar directions but those directions were removed in the change over to Sierra and High Sierra.

> 
> My apologies for a noob question, but would appreciate if you could walk me
> through, or point me to a step-by-step tutorial, if it is available. I have
> already installed XCode and Command Line Tools.
> 
> Thank you in advance for your help.
> 
> Ryoko
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From nigelfdel@ney @ending from gm@il@com  Thu May 24 09:14:27 2018
From: nigelfdel@ney @ending from gm@il@com (Nigel Delaney)
Date: Thu, 24 May 2018 00:14:27 -0700
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
In-Reply-To: <0073969C-B7E4-417C-B67D-C2BC48B8BE90@illinois.edu>
References: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
 <DCAFA945-F8C0-4FA9-9129-DA41FA707129@ucsd.edu>
 <CACHhbWP=jYkoRchzXda7iALbdNz8ny_UYaH_P_17yRnz=9=2LQ@mail.gmail.com>
 <0073969C-B7E4-417C-B67D-C2BC48B8BE90@illinois.edu>
Message-ID: <CACHhbWNdM-d1tay6zyjPN5-WN8A-5QrOZjt29TPxTtqTpzOGJg@mail.gmail.com>

James,

Thank you for the wonderful response and for making your packaging code
available (and producing this!).  Very much appreciated.

I wound up taking an approach where I just modified the CRAN R installer to
include a few more packages (specifically all I had installed).  I couldn't
find advice about this on the internet, so am attaching a subset of the
script I used below in case a future individual also wants some advice on
this.

Cheers,
Nigel


# Script to modify the R bundle to add more packages from the users library

wget https://cloud.r-project.org/bin/macosx/R-3.5.0.pkg

BUILD_DIR=build
mkdir $BUILD_DIR

# Unpack the CRAN R distribution
pkgutil --expand R-3.5.0.pkg $BUILD_DIR/tmp_pkg


# Now to add more default packages to the R package payload
# First extract the payload
pushd $BUILD_DIR/tmp_pkg/r.pkg/
cat Payload | gzip -d | cpio -id

# Copy all of the users R packages into this
# folder for distribution
R_LIB_DIR=$(sed -e 's/\[1\] \"//' -e 's/\"//' <<< $(RScript -e
'.libPaths()'))
R_PAYLOAD_DIR="R.framework/Resources/library"
for dirname in $R_LIB_DIR/*
do
pkg_name=$(basename $dirname)
if [ ! -d $R_PAYLOAD_DIR/$pkg_name ]
then
echo "Moving package:" $pkg_name
cp -r $dirname $R_PAYLOAD_DIR/$pkg_name
fi
done

# Let's remove the debug symbols and their associated plists for compiled
code in R
# packages, as they bloat the installation
find $R_PAYLOAD_DIR -name '*so.dSYM' -prune -exec rm -rf {} \;

# Now build a new r.pkg
pkgbuild --component R.framework --scripts Scripts/ \
   --identifier org.r-project.R.el-capitan.fw.pkg \
   --version 30574626 \ # You may want to change this
   --install-location /Library/Frameworks \
   ../../r.pkg

popd

# Remove original one we've replaced
rm -rf $BUILD_DIR/tmp_pkg/r.pkg

# Flatten remaining components distributed with R
# (necessary to repackage it all).
for fname in $BUILD_DIR/tmp_pkg/*.pkg
do
bname=$(basename $fname)
pkgutil --flatten $fname $BUILD_DIR/$bname
done

mv $BUILD_DIR/tmp_pkg/Resources $BUILD_DIR/
mv $BUILD_DIR/tmp_pkg/Distribution $BUILD_DIR/

(cd $BUILD_DIR; productbuild --distribution Distribution --resources
Resources ../R-With-Your-Stuff.pkg)

	[[alternative HTML version deleted]]


From @imon@urb@nek @ending from R-project@org  Thu May 24 19:47:43 2018
From: @imon@urb@nek @ending from R-project@org (Simon Urbanek)
Date: Thu, 24 May 2018 13:47:43 -0400
Subject: [R-SIG-Mac] java version, perhaps related to ggplot2
In-Reply-To: <7287B76A-B859-4EC4-AE4F-75D5DF446F32@comcast.net>
References: <CAGx1TMBxXX8vsN7q1Qi3m_nknSf7O1kJ384ODzJ0d7D64UtfPA@mail.gmail.com>
 <7287B76A-B859-4EC4-AE4F-75D5DF446F32@comcast.net>
Message-ID: <F7CEB4E8-BCD4-4982-9BC2-3EB7077646E4@R-project.org>

You need to configure R to match your Java using R CMD javareconf.

The CRAN machine uses JDK 1.9 which was the default until Java 10 was released recently. If you use something else, you have to configure R accordingly.

Also I strongly recommend using rJava 0.9-10 since it works around some issue with Java on macOS and with Java 10.

Cheers,
Simon





> On May 23, 2018, at 7:50 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> 
> 
>> On May 22, 2018, at 1:36 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>> 
>> sI have Macintosh High Sierra 10.13.4
>> and R_3.5.0
>> 
>> I am attempting to R CMD build and check my package microplot against
>> the imminent ggplot2_2.2.1.9000
>> 
> 
> I have a new High Sierra Machine with a System that was ported over from an earlier version of the OS. I've installed R 3.5.0.  I tried installing micro plot from binary without error, but when I try to load the rJava library I was getting an error with the old Java version 151, so I accepted the Oracle offer of installing version 171 downloaded from the Java website, but I'm also seeing:
> 
> library(rJava)
> Error: package or namespace load failed for ?rJava?:
> .onLoad failed in loadNamespace() for 'rJava', details:
>  call: dyn.load(file, DLLpath = DLLpath, ...)
>  error: unable to load shared object '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>  dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so, 6): Library not loaded: /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
>  Referenced from: /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>  Reason: image not found
> 
> 
> There is a folder  /Library/Java/JavaVirtualMachines/jdk1.8.0_171.jdk, but nothing named with a jdk-9 prefix
> 
> 
> S
> Best;
> 
> David.
> 
>> The build fails with messages
>> 
>> ** byte-compile and prepare package for lazy loading
>> Error : .onLoad failed in loadNamespace() for 'rJava', details:
>> call: dyn.load(file, DLLpath = DLLpath, ...)
>> error: unable to load shared object
>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>> 6): Library not loaded:
>> /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
>> Referenced from:
>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>> Reason: image not found
>> ERROR: lazy loading failed for package ?microplot?
>> 
>> Indeed I do not have Java 9, I have Java 8, which the Java updater
>> says is current (171).
>> The java site
>> http://www.oracle.com/technetwork/java/javase/overview/index.html
>> seems to want to give me Java 10 (not Java 9), and the discussion on
>> this R-sig-mac list
>>   [R-SIG-Mac] R and Java 10 ? rJava not able to build
>> beginning March 29 seems to say 8 is still correct.  As suggested
>> there I looked at R-admin for 3.5.0
>> and discover "The situation with Java support on macOS is messy".
>> I attempted the suggested workaround
>> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home
>> and got the same message as above.
>> 
>> I need guidance as to the next steps I should take.
>> 
>> Rich
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From @imon@urb@nek @ending from R-project@org  Thu May 24 19:55:56 2018
From: @imon@urb@nek @ending from R-project@org (Simon Urbanek)
Date: Thu, 24 May 2018 13:55:56 -0400
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
In-Reply-To: <0073969C-B7E4-417C-B67D-C2BC48B8BE90@illinois.edu>
References: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
 <DCAFA945-F8C0-4FA9-9129-DA41FA707129@ucsd.edu>
 <CACHhbWP=jYkoRchzXda7iALbdNz8ny_UYaH_P_17yRnz=9=2LQ@mail.gmail.com>
 <0073969C-B7E4-417C-B67D-C2BC48B8BE90@illinois.edu>
Message-ID: <DD6442BF-2FAF-48A0-9E5E-FE73248775B9@R-project.org>

Just for posterity - please note that the installer referenced below is potentially unsafe and dangerous, because it does NOT actually package the binary but rather contains just an arbitrary shell script and thus you cannot be sure that you get the official binaries or something malicious instead (and it is vulnerable to man-in-the-middle attacks). Also it performs various actions as root that you may or may not like. Be careful trusting installers that are not signed by CRAN members. We only supply the binary and any post-install actions only affect the installed binary not other system functions nor user directories.

Cheers,
Simon



> On May 17, 2018, at 3:15 PM, Balamuta, James Joseph <balamut2 at illinois.edu> wrote:
> 
> Greetings and Salutations Nigel,
> 
> I've "augmented" the base R install via an unofficial, e.g. not sanctioned by CRAN, Rtools build. This can be found here:
> 
> https://github.com/coatless/r-macos-rtools
> 
> Presently, the latest release only supports the R 3.4.* line:
> 
> https://github.com/coatless/r-macos-rtools/releases/tag/v1.0.0
> 
> I'll likely update it this weekend to provide support for R 3.5.*. In particular, I'll bump the compiler from clang4 to clang6.
> 
> Sincerely,
> 
> JJB
> 
> ?On 5/17/18, 11:45 AM, "R-SIG-Mac on behalf of Nigel Delaney" <r-sig-mac-bounces at r-project.org on behalf of nigelfdelaney at gmail.com> wrote:
> 
>    Thanks for the responses so far.
> 
>    David - indeed those instructions are up to date, but people are
>    struggling with the issue and unable to fix that (and keep trying to
>    install from source).
> 
>    Chuck - Thanks also for the suggestion, it's a good idea.  I'm hoping
>    we might be able to have a one step installation to keep things simple
>    though.
> 
>    Cheers,
>    Nigel
> 
>    On Thu, May 17, 2018 at 9:39 AM, Berry, Charles <ccberry at ucsd.edu> wrote:
>> 
>> 
>>> On May 16, 2018, at 11:40 AM, Nigel Delaney <nigelfdelaney at gmail.com> wrote:
>>> 
>>> Hi,
>>> 
>>> Mac binaries on R are distributed as .pkg files available from CRAN
>>> for installation.  Does anyone know if the source script (assuming a
>>> script is used) that generates this pkg file is available anywhere?
>>> The pkg seems to contain a few elements like a postflight/postinstall
>>> script that I could not find in any open source repository and are not
>>> part of the R binaries.
>>> 
>>> We have a few users who are dealing with the fortran compiler issues
>>> on Mac, and were hoping to just modify the current .pkg to contain a
>>> few more packages, was hoping to avoid reinventing the wheel on the
>>> packaging scripts.
>>> 
>> 
>> 
>> Why not just provide those users with the binaries for those packages?
>> 
>> If there are more than a few users and/or more than a few packages that need this treatment, set up your own repository and put the binaries there. See:
>> 
>> https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Setting-up-a-package-repository
>> 
>> HTH,
>> 
>> Chuck
>> 
>> 
>> 
> 
>    _______________________________________________
>    R-SIG-Mac mailing list
>    R-SIG-Mac at r-project.org
>    https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From b@l@mut2 @ending from illinoi@@edu  Fri May 25 04:07:45 2018
From: b@l@mut2 @ending from illinoi@@edu (Balamuta, James Joseph)
Date: Fri, 25 May 2018 02:07:45 +0000
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
In-Reply-To: <CACHhbWNdM-d1tay6zyjPN5-WN8A-5QrOZjt29TPxTtqTpzOGJg@mail.gmail.com>
References: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
 <DCAFA945-F8C0-4FA9-9129-DA41FA707129@ucsd.edu>
 <CACHhbWP=jYkoRchzXda7iALbdNz8ny_UYaH_P_17yRnz=9=2LQ@mail.gmail.com>
 <0073969C-B7E4-417C-B67D-C2BC48B8BE90@illinois.edu>
 <CACHhbWNdM-d1tay6zyjPN5-WN8A-5QrOZjt29TPxTtqTpzOGJg@mail.gmail.com>
Message-ID: <107ED798-D120-4FC5-A711-57F2C791326E@illinois.edu>

Greetings and Salutations Nigel,

You?re welcome!

Just a word of advice regarding 3.4.x and 3.5.x, make sure the installer includes packages from the desired version. ALTREP was added in 3.5.x and that has caused issues with users who opt to copy over the previous installation of r binaries to the new install location.

Lastly, you may wish to just maintain an R package install script, c.f.

https://github.com/coatless/toad/blob/master/install-r-packages.R

Sincerely,

JJB

From: Nigel Delaney <nigelfdelaney at gmail.com>
Date: Thursday, May 24, 2018 at 2:14 AM
To: "Balamuta, James Joseph" <balamut2 at illinois.edu>
Cc: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] Generating R .pkg file for Mac Distribution

James,

Thank you for the wonderful response and for making your packaging code available (and producing this!).  Very much appreciated.

I wound up taking an approach where I just modified the CRAN R installer to include a few more packages (specifically all I had installed).  I couldn't find advice about this on the internet, so am attaching a subset of the script I used below in case a future individual also wants some advice on this.

Cheers,
Nigel


# Script to modify the R bundle to add more packages from the users library

wget https://cloud.r-project.org/bin/macosx/R-3.5.0.pkg

BUILD_DIR=build
mkdir $BUILD_DIR

# Unpack the CRAN R distribution
pkgutil --expand R-3.5.0.pkg $BUILD_DIR/tmp_pkg


# Now to add more default packages to the R package payload
# First extract the payload
pushd $BUILD_DIR/tmp_pkg/r.pkg/
cat Payload | gzip -d | cpio -id

# Copy all of the users R packages into this
# folder for distribution
R_LIB_DIR=$(sed -e 's/\[1\] \"//' -e 's/\"//' <<< $(RScript -e '.libPaths()'))
R_PAYLOAD_DIR="R.framework/Resources/library"
for dirname in $R_LIB_DIR/*
do
pkg_name=$(basename $dirname)
if [ ! -d $R_PAYLOAD_DIR/$pkg_name ]
then
echo "Moving package:" $pkg_name
cp -r $dirname $R_PAYLOAD_DIR/$pkg_name
fi
done

# Let's remove the debug symbols and their associated plists for compiled code in R
# packages, as they bloat the installation
find $R_PAYLOAD_DIR -name '*so.dSYM' -prune -exec rm -rf {} \;

# Now build a new r.pkg
pkgbuild --component R.framework --scripts Scripts/ \
   --identifier org.r-project.R.el-capitan.fw.pkg \
   --version 30574626 \ # You may want to change this
   --install-location /Library/Frameworks \
   ../../r.pkg

popd

# Remove original one we've replaced
rm -rf $BUILD_DIR/tmp_pkg/r.pkg

# Flatten remaining components distributed with R
# (necessary to repackage it all).
for fname in $BUILD_DIR/tmp_pkg/*.pkg
do
bname=$(basename $fname)
pkgutil --flatten $fname $BUILD_DIR/$bname
done

mv $BUILD_DIR/tmp_pkg/Resources $BUILD_DIR/
mv $BUILD_DIR/tmp_pkg/Distribution $BUILD_DIR/

(cd $BUILD_DIR; productbuild --distribution Distribution --resources Resources ../R-With-Your-Stuff.pkg)


	[[alternative HTML version deleted]]


From b@l@mut2 @ending from illinoi@@edu  Fri May 25 04:09:14 2018
From: b@l@mut2 @ending from illinoi@@edu (Balamuta, James Joseph)
Date: Fri, 25 May 2018 02:09:14 +0000
Subject: [R-SIG-Mac] Generating R .pkg file for Mac Distribution
In-Reply-To: <DD6442BF-2FAF-48A0-9E5E-FE73248775B9@R-project.org>
References: <CACHhbWM8ORDDgX-Xq1ER6GQ8Uc08M8xd_KwSJw0QeHd-HBVYpw@mail.gmail.com>
 <DCAFA945-F8C0-4FA9-9129-DA41FA707129@ucsd.edu>
 <CACHhbWP=jYkoRchzXda7iALbdNz8ny_UYaH_P_17yRnz=9=2LQ@mail.gmail.com>
 <0073969C-B7E4-417C-B67D-C2BC48B8BE90@illinois.edu>
 <DD6442BF-2FAF-48A0-9E5E-FE73248775B9@R-project.org>
Message-ID: <419B2A2E-2C95-4CAA-9487-BF6C457195A8@illinois.edu>

Greetings and Salutations Simon,

I appreciate the feedback at long last; but, I fear that a majority of this is scaremongering at this stage. These installers, clang4 and the _unofficial_ macos rtools, have operated since their inception without incident since almost a year ago. Their sources are public and are also signed by my developer credentials in a way that is similar to the official R installer package.

You do have one _very_ valid point regarding the woes of an "online-based" installer. Meaning, it will attempt to download the appropriate binaries from CRAN, the official gfortran site, and Apple. For those wondering, this is where the phrase "man-in-the-middle attack" arises as the request could be intercepted and re-routed. However, when you view the modern day ecosystem of online installers this can largely be said for all of them. One way to address this is to check a pre-defined sha256 hash against the downloaded file hash, which can easily be added to the installer now that this has been raised. 

Note: Apple is contacted to install the Xcode Command Line Tools on the user's system through a secure software update.

In reference to the root escalation, this is required to install into `/usr/local/` and set the appropriate paths within `~/.R/Makevars`, e.g. `LDFLAGS`, `CXX`, `CXX11`, ... . Both of these actions are emphasized to the user in the welcome splash. The latter action is where I believe you have an issue. 

When making the design decision to include path support, the intent was to ensure everything just "works" and avoid having users type in long paths. I find that macOS users are frequently expected to be knowledgeable about Unix-based workflows, but have very little experience within that environment. With the rise in data science, I hope that trend will be reversed. 

Sincerely,

JJB

?On 5/24/18, 12:56 PM, "Simon Urbanek" <simon.urbanek at R-project.org> wrote:

    Just for posterity - please note that the installer referenced below is potentially unsafe and dangerous, because it does NOT actually package the binary but rather contains just an arbitrary shell script and thus you cannot be sure that you get the official binaries or something malicious instead (and it is vulnerable to man-in-the-middle attacks). Also it performs various actions as root that you may or may not like. Be careful trusting installers that are not signed by CRAN members. We only supply the binary and any post-install actions only affect the installed binary not other system functions nor user directories.
    
    Cheers,
    Simon
    
    
    
    > On May 17, 2018, at 3:15 PM, Balamuta, James Joseph <balamut2 at illinois.edu> wrote:
    > 
    > Greetings and Salutations Nigel,
    > 
    > I've "augmented" the base R install via an unofficial, e.g. not sanctioned by CRAN, Rtools build. This can be found here:
    > 
    > https://github.com/coatless/r-macos-rtools
    > 
    > Presently, the latest release only supports the R 3.4.* line:
    > 
    > https://github.com/coatless/r-macos-rtools/releases/tag/v1.0.0
    > 
    > I'll likely update it this weekend to provide support for R 3.5.*. In particular, I'll bump the compiler from clang4 to clang6.
    > 
    > Sincerely,
    > 
    > JJB
    > 
    > On 5/17/18, 11:45 AM, "R-SIG-Mac on behalf of Nigel Delaney" <r-sig-mac-bounces at r-project.org on behalf of nigelfdelaney at gmail.com> wrote:
    > 
    >    Thanks for the responses so far.
    > 
    >    David - indeed those instructions are up to date, but people are
    >    struggling with the issue and unable to fix that (and keep trying to
    >    install from source).
    > 
    >    Chuck - Thanks also for the suggestion, it's a good idea.  I'm hoping
    >    we might be able to have a one step installation to keep things simple
    >    though.
    > 
    >    Cheers,
    >    Nigel
    > 
    >    On Thu, May 17, 2018 at 9:39 AM, Berry, Charles <ccberry at ucsd.edu> wrote:
    >> 
    >> 
    >>> On May 16, 2018, at 11:40 AM, Nigel Delaney <nigelfdelaney at gmail.com> wrote:
    >>> 
    >>> Hi,
    >>> 
    >>> Mac binaries on R are distributed as .pkg files available from CRAN
    >>> for installation.  Does anyone know if the source script (assuming a
    >>> script is used) that generates this pkg file is available anywhere?
    >>> The pkg seems to contain a few elements like a postflight/postinstall
    >>> script that I could not find in any open source repository and are not
    >>> part of the R binaries.
    >>> 
    >>> We have a few users who are dealing with the fortran compiler issues
    >>> on Mac, and were hoping to just modify the current .pkg to contain a
    >>> few more packages, was hoping to avoid reinventing the wheel on the
    >>> packaging scripts.
    >>> 
    >> 
    >> 
    >> Why not just provide those users with the binaries for those packages?
    >> 
    >> If there are more than a few users and/or more than a few packages that need this treatment, set up your own repository and put the binaries there. See:
    >> 
    >> https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Setting-up-a-package-repository
    >> 
    >> HTH,
    >> 
    >> Chuck
    >> 
    >> 
    >> 
    > 
    >    _______________________________________________
    >    R-SIG-Mac mailing list
    >    R-SIG-Mac at r-project.org
    >    https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    > 
    > 
    > _______________________________________________
    > R-SIG-Mac mailing list
    > R-SIG-Mac at r-project.org
    > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    
    


From dwin@emiu@ @ending from comc@@t@net  Fri May 25 05:45:23 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Thu, 24 May 2018 23:45:23 -0400
Subject: [R-SIG-Mac] java version, perhaps related to ggplot2
In-Reply-To: <F7CEB4E8-BCD4-4982-9BC2-3EB7077646E4@R-project.org>
References: <CAGx1TMBxXX8vsN7q1Qi3m_nknSf7O1kJ384ODzJ0d7D64UtfPA@mail.gmail.com>
 <7287B76A-B859-4EC4-AE4F-75D5DF446F32@comcast.net>
 <F7CEB4E8-BCD4-4982-9BC2-3EB7077646E4@R-project.org>
Message-ID: <6194B390-EE1D-4277-9AB3-7AD516B00986@comcast.net>



> On May 24, 2018, at 1:47 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> You need to configure R to match your Java using R CMD javareconf.
> 
> The CRAN machine uses JDK 1.9 which was the default until Java 10 was released recently. If you use something else, you have to configure R accordingly.
> 
> Also I strongly recommend using rJava 0.9-10 since it works around some issue with Java on macOS and with Java 10.

Oracle has pulled the JDK 1.9 and only is only offering version 10:

http://www.oracle.com/technetwork/java/javase/downloads/index.html


-- 
David
> 
> Cheers,
> Simon
> 
> 
> 
> 
> 
>> On May 23, 2018, at 7:50 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>> 
>> 
>> 
>>> On May 22, 2018, at 1:36 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>> 
>>> sI have Macintosh High Sierra 10.13.4
>>> and R_3.5.0
>>> 
>>> I am attempting to R CMD build and check my package microplot against
>>> the imminent ggplot2_2.2.1.9000
>>> 
>> 
>> I have a new High Sierra Machine with a System that was ported over from an earlier version of the OS. I've installed R 3.5.0.  I tried installing micro plot from binary without error, but when I try to load the rJava library I was getting an error with the old Java version 151, so I accepted the Oracle offer of installing version 171 downloaded from the Java website, but I'm also seeing:
>> 
>> library(rJava)
>> Error: package or namespace load failed for ?rJava?:
>> .onLoad failed in loadNamespace() for 'rJava', details:
>> call: dyn.load(file, DLLpath = DLLpath, ...)
>> error: unable to load shared object '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so, 6): Library not loaded: /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
>> Referenced from: /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>> Reason: image not found
>> 
>> 
>> There is a folder  /Library/Java/JavaVirtualMachines/jdk1.8.0_171.jdk, but nothing named with a jdk-9 prefix
>> 
>> 
>> S
>> Best;
>> 
>> David.
>> 
>>> The build fails with messages
>>> 
>>> ** byte-compile and prepare package for lazy loading
>>> Error : .onLoad failed in loadNamespace() for 'rJava', details:
>>> call: dyn.load(file, DLLpath = DLLpath, ...)
>>> error: unable to load shared object
>>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>>> 6): Library not loaded:
>>> /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
>>> Referenced from:
>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>> Reason: image not found
>>> ERROR: lazy loading failed for package ?microplot?
>>> 
>>> Indeed I do not have Java 9, I have Java 8, which the Java updater
>>> says is current (171).
>>> The java site
>>> http://www.oracle.com/technetwork/java/javase/overview/index.html
>>> seems to want to give me Java 10 (not Java 9), and the discussion on
>>> this R-sig-mac list
>>>  [R-SIG-Mac] R and Java 10 ? rJava not able to build
>>> beginning March 29 seems to say 8 is still correct.  As suggested
>>> there I looked at R-admin for 3.5.0
>>> and discover "The situation with Java support on macOS is messy".
>>> I attempted the suggested workaround
>>> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home
>>> and got the same message as above.
>>> 
>>> I need guidance as to the next steps I should take.
>>> 
>>> Rich
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From rmh @ending from temple@edu  Sat May 26 02:15:03 2018
From: rmh @ending from temple@edu (Richard M. Heiberger)
Date: Fri, 25 May 2018 20:15:03 -0400
Subject: [R-SIG-Mac] java version, perhaps related to ggplot2
In-Reply-To: <F7CEB4E8-BCD4-4982-9BC2-3EB7077646E4@R-project.org>
References: <CAGx1TMBxXX8vsN7q1Qi3m_nknSf7O1kJ384ODzJ0d7D64UtfPA@mail.gmail.com>
 <7287B76A-B859-4EC4-AE4F-75D5DF446F32@comcast.net>
 <F7CEB4E8-BCD4-4982-9BC2-3EB7077646E4@R-project.org>
Message-ID: <CAGx1TMBUEYMNCw0LCVPf-ve-V_CDskHEMKsUOBO08bFHwjzSmw@mail.gmail.com>

Simon,
thank you for the information about javareconf.
Would it be possible to build that into the installation of RJava?

David,
Thank you for verifying the behavior.


I decided to stay with Java 8, because the Java updater thought that
171 was the next step and I did that yesterday.

I attempted to install rJava_0.9-10
from http://www.rforge.net/rJava/files/
It didn't complete, telling me to run
R CMD javareconf as root.

javareconf ran successfully.

The next time I tried to install rJava_0.9-10
it got farther, recognizing the jdk1.8.0_60.jdk that I have.
It still didn't continue because I don't have JDK.

I will now try building microplot with ggplot2_2.2.1.9000
Success! microplot now builds.

Now to the intended task which is to R CMD check microplot with the
ggplot2_2.2.1.9000

it passes
R CMD check microplot_1.0-39.tar.gz

R CMD check --run-dontrun microplot_1.0-39.tar.gz
this also passes

One more step, the demo/ subdirectory
Almost clear.  One error which I will investigate tomorrow.

The error is due to a change in behavior in ggplot2.
Specifically, the last statement in demo/latex-ggplot.r no longer works
due to a change inside ggplot.  Previously it was reporting NULL, now
it is reporting character(0).

I will file an issue with https://github.com/tidyverse/ggplot2/issues asking
whether the change was accidental or whether I need to change my code
to allow for the new value.

Rich

On Thu, May 24, 2018 at 1:47 PM, Simon Urbanek
<simon.urbanek at r-project.org> wrote:
> You need to configure R to match your Java using R CMD javareconf.
>
> The CRAN machine uses JDK 1.9 which was the default until Java 10 was released recently. If you use something else, you have to configure R accordingly.
>
> Also I strongly recommend using rJava 0.9-10 since it works around some issue with Java on macOS and with Java 10.
>
> Cheers,
> Simon
>
>
>
>
>
>> On May 23, 2018, at 7:50 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>>
>>
>>
>>> On May 22, 2018, at 1:36 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>>
>>> sI have Macintosh High Sierra 10.13.4
>>> and R_3.5.0
>>>
>>> I am attempting to R CMD build and check my package microplot against
>>> the imminent ggplot2_2.2.1.9000
>>>
>>
>> I have a new High Sierra Machine with a System that was ported over from an earlier version of the OS. I've installed R 3.5.0.  I tried installing micro plot from binary without error, but when I try to load the rJava library I was getting an error with the old Java version 151, so I accepted the Oracle offer of installing version 171 downloaded from the Java website, but I'm also seeing:
>>
>> library(rJava)
>> Error: package or namespace load failed for ?rJava?:
>> .onLoad failed in loadNamespace() for 'rJava', details:
>>  call: dyn.load(file, DLLpath = DLLpath, ...)
>>  error: unable to load shared object '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>>  dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so, 6): Library not loaded: /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
>>  Referenced from: /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>  Reason: image not found
>>
>>
>> There is a folder  /Library/Java/JavaVirtualMachines/jdk1.8.0_171.jdk, but nothing named with a jdk-9 prefix
>>
>>
>> S
>> Best;
>>
>> David.
>>
>>> The build fails with messages
>>>
>>> ** byte-compile and prepare package for lazy loading
>>> Error : .onLoad failed in loadNamespace() for 'rJava', details:
>>> call: dyn.load(file, DLLpath = DLLpath, ...)
>>> error: unable to load shared object
>>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>>> 6): Library not loaded:
>>> /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.dylib
>>> Referenced from:
>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>> Reason: image not found
>>> ERROR: lazy loading failed for package ?microplot?
>>>
>>> Indeed I do not have Java 9, I have Java 8, which the Java updater
>>> says is current (171).
>>> The java site
>>> http://www.oracle.com/technetwork/java/javase/overview/index.html
>>> seems to want to give me Java 10 (not Java 9), and the discussion on
>>> this R-sig-mac list
>>>   [R-SIG-Mac] R and Java 10 ? rJava not able to build
>>> beginning March 29 seems to say 8 is still correct.  As suggested
>>> there I looked at R-admin for 3.5.0
>>> and discover "The situation with Java support on macOS is messy".
>>> I attempted the suggested workaround
>>> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home
>>> and got the same message as above.
>>>
>>> I need guidance as to the next steps I should take.
>>>
>>> Rich
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>


From rkoenker @ending from illinoi@@edu  Sat May 26 13:36:28 2018
From: rkoenker @ending from illinoi@@edu (Roger Koenker)
Date: Sat, 26 May 2018 12:36:28 +0100
Subject: [R-SIG-Mac] Tools Update for R3.5?
Message-ID: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>

I?ve just installed R3.5 and clang6 and fortran 6.1 and now realize that the compiler packages install in
/usr/local/clang6 and /usr/local/gfortran  respectively.  I expected that there would also be some automatic
symbolic links to /usr/local/bin  etc.  however when I tried to compile packages from source the old versions
of the compilers are invoked.  I realize that this is probably quite elementary, but I would appreciate some
advice on how to complete the installation so the new compilers are accessed.

Many thanks,
Roger


From bhh @ending from x@4@ll@nl  Sat May 26 14:19:54 2018
From: bhh @ending from x@4@ll@nl (Berend Hasselman)
Date: Sat, 26 May 2018 14:19:54 +0200
Subject: [R-SIG-Mac] Tools Update for R3.5?
In-Reply-To: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>
References: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>
Message-ID: <4CF84B84-5558-46EF-AB1A-062607E1D2C1@xs4all.nl>


> On 26 May 2018, at 13:36, Roger Koenker <rkoenker at illinois.edu> wrote:
> 
> I?ve just installed R3.5 and clang6 and fortran 6.1 and now realize that the compiler packages install in
> /usr/local/clang6 and /usr/local/gfortran  respectively.  I expected that there would also be some automatic
> symbolic links to /usr/local/bin  etc.  however when I tried to compile packages from source the old versions
> of the compilers are invoked.  I realize that this is probably quite elementary, but I would appreciate some
> advice on how to complete the installation so the new compilers are accessed.
> 

I added these two lines to  my ~/.profile

# clang6 for R 3.5.0
export PATH=/usr/local/clang6/bin:$PATH

and that seems to do the job.

Berend

> Many thanks,
> Roger
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From bhh @ending from x@4@ll@nl  Sat May 26 14:26:05 2018
From: bhh @ending from x@4@ll@nl (Berend Hasselman)
Date: Sat, 26 May 2018 14:26:05 +0200
Subject: [R-SIG-Mac] Tools Update for R3.5?
In-Reply-To: <4CF84B84-5558-46EF-AB1A-062607E1D2C1@xs4all.nl>
References: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>
 <4CF84B84-5558-46EF-AB1A-062607E1D2C1@xs4all.nl>
Message-ID: <73D4EB8D-92CA-4A81-9BD3-806EEB72C5CC@xs4all.nl>


> On 26 May 2018, at 14:19, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> 
>> On 26 May 2018, at 13:36, Roger Koenker <rkoenker at illinois.edu> wrote:
>> 
>> I?ve just installed R3.5 and clang6 and fortran 6.1 and now realize that the compiler packages install in
>> /usr/local/clang6 and /usr/local/gfortran  respectively.  I expected that there would also be some automatic
>> symbolic links to /usr/local/bin  etc.  however when I tried to compile packages from source the old versions
>> of the compilers are invoked.  I realize that this is probably quite elementary, but I would appreciate some
>> advice on how to complete the installation so the new compilers are accessed.
>> 
> 
> I added these two lines to  my ~/.profile
> 
> # clang6 for R 3.5.0
> export PATH=/usr/local/clang6/bin:$PATH
> 
> and that seems to do the job.
> 

Might not do the job.

But I also added this to my ~/.R/Makevars

# for R 3.5.0
# https://cran.r-project.org/bin/macosx/tools/

CC=/usr/local/clang6/bin/clang
CXX=/usr/local/clang6/bin/clang++
LDFLAGS =-L/usr/local/clang6/lib

and that really does it.

Berend

> Berend
> 
>> Many thanks,
>> Roger
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From rkoenker @ending from illinoi@@edu  Sat May 26 15:17:28 2018
From: rkoenker @ending from illinoi@@edu (Roger Koenker)
Date: Sat, 26 May 2018 14:17:28 +0100
Subject: [R-SIG-Mac] Tools Update for R3.5?
In-Reply-To: <8f24be7d51254f4d93cd7e23fa63da11@CITESHT3.ad.uillinois.edu>
References: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>
 <4CF84B84-5558-46EF-AB1A-062607E1D2C1@xs4all.nl>
 <8f24be7d51254f4d93cd7e23fa63da11@CITESHT3.ad.uillinois.edu>
Message-ID: <FA919B17-731B-48BB-9C09-B92541125898@illinois.edu>

Thanks Berend  that helps considerably,  I added something for gfortran as follows:

CC=/usr/local/clang6/bin/clang
CXX=/usr/local/clang6/bin/clang++
LDFLAGS =-L/usr/local/clang6/lib
F77=/usr/local/gfortran/bin/gfortran
FLIBS=-L/usr/local/gfortran/lib -lgfortran

and now the gfortran seems to be happy, but I?m still seeing problems with some C:

/usr/local/clang6/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG   -I/usr/local/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
In file included from init.c:1:
/Library/Frameworks/R.framework/Resources/include/R_ext/RS.h:34:11: fatal error: 'string.h' file not
      found
# include <string.h>            /* for memcpy, memset */
          ^~~~~~~~~~
1 error generated.
make: *** [init.o] Error 1
ERROR: compilation failed for package ?quantreg?

presumably I?m still missing some LDFLGS for clang6?

> On May 26, 2018, at 1:26 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> 
>> On 26 May 2018, at 14:19, Berend Hasselman <bhh at xs4all.nl> wrote:
>> 
>> 
>>> On 26 May 2018, at 13:36, Roger Koenker <rkoenker at illinois.edu> wrote:
>>> 
>>> I?ve just installed R3.5 and clang6 and fortran 6.1 and now realize that the compiler packages install in
>>> /usr/local/clang6 and /usr/local/gfortran  respectively.  I expected that there would also be some automatic
>>> symbolic links to /usr/local/bin  etc.  however when I tried to compile packages from source the old versions
>>> of the compilers are invoked.  I realize that this is probably quite elementary, but I would appreciate some
>>> advice on how to complete the installation so the new compilers are accessed.
>>> 
>> 
>> I added these two lines to  my ~/.profile
>> 
>> # clang6 for R 3.5.0
>> export PATH=/usr/local/clang6/bin:$PATH
>> 
>> and that seems to do the job.
>> 
> 
> Might not do the job.
> 
> But I also added this to my ~/.R/Makevars
> 
> # for R 3.5.0
> # https://cran.r-project.org/bin/macosx/tools/
> 
> CC=/usr/local/clang6/bin/clang
> CXX=/usr/local/clang6/bin/clang++
> LDFLAGS =-L/usr/local/clang6/lib
> 
> and that really does it.
> 
> Berend
> 
>> Berend
>> 
>>> Many thanks,
>>> Roger
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From bhh @ending from x@4@ll@nl  Sat May 26 17:20:52 2018
From: bhh @ending from x@4@ll@nl (Berend Hasselman)
Date: Sat, 26 May 2018 17:20:52 +0200
Subject: [R-SIG-Mac] Tools Update for R3.5?
In-Reply-To: <FA919B17-731B-48BB-9C09-B92541125898@illinois.edu>
References: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>
 <4CF84B84-5558-46EF-AB1A-062607E1D2C1@xs4all.nl>
 <8f24be7d51254f4d93cd7e23fa63da11@CITESHT3.ad.uillinois.edu>
 <FA919B17-731B-48BB-9C09-B92541125898@illinois.edu>
Message-ID: <7F90230D-2078-411C-84D8-7F331F0A0B1E@xs4all.nl>


> On 26 May 2018, at 15:17, Roger Koenker <rkoenker at illinois.edu> wrote:
> 
> Thanks Berend  that helps considerably,  I added something for gfortran as follows:
> 
> CC=/usr/local/clang6/bin/clang
> CXX=/usr/local/clang6/bin/clang++
> LDFLAGS =-L/usr/local/clang6/lib
> F77=/usr/local/gfortran/bin/gfortran
> FLIBS=-L/usr/local/gfortran/lib -lgfortran
> 
> and now the gfortran seems to be happy, but I?m still seeing problems with some C:
> 
> /usr/local/clang6/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG   -I/usr/local/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
> In file included from init.c:1:
> /Library/Frameworks/R.framework/Resources/include/R_ext/RS.h:34:11: fatal error: 'string.h' file not
>      found
> # include <string.h>            /* for memcpy, memset */
>          ^~~~~~~~~~
> 1 error generated.
> make: *** [init.o] Error 1
> ERROR: compilation failed for package ?quantreg?
> 
> presumably I?m still missing some LDFLGS for clang6?
> 

LDFLAGS I presume?
I don't quite understand what is going wrong exactly.

Have you installed MacOs commandlinetools? I do have them installed.
See the first few lines of section C.3 in the R Administration and Installation manual.
And see item 2 and item 4 in the README.html in the gfortran-6.1-ElCapitan.dmg.

But you are defining too many lines in your Makevars.
I do not have F77 and FLIBS in mine. All taken care of by R's Makeconf (see /Library/Frameworks/R.framework/Versions/3.5/Resources/etc/Makeconf)
There is a symlink in /usr/local/bin/gfortran to the actual gfortran (the gfortran installer takes care of that).

I have run R CMD check on quantreg_5.35 and all is ok. No errors.

Berend


From rkoenker @ending from illinoi@@edu  Sat May 26 18:35:04 2018
From: rkoenker @ending from illinoi@@edu (Roger Koenker)
Date: Sat, 26 May 2018 17:35:04 +0100
Subject: [R-SIG-Mac] Tools Update for R3.5?
In-Reply-To: <20a8c6089b254f549f562897ce6f64fc@CITESHT4.ad.uillinois.edu>
References: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>
 <4CF84B84-5558-46EF-AB1A-062607E1D2C1@xs4all.nl>
 <8f24be7d51254f4d93cd7e23fa63da11@CITESHT3.ad.uillinois.edu>
 <FA919B17-731B-48BB-9C09-B92541125898@illinois.edu>
 <20a8c6089b254f549f562897ce6f64fc@CITESHT4.ad.uillinois.edu>
Message-ID: <30D737AF-207E-4A38-9914-CBD1D2A52022@illinois.edu>

Humm?  without the F77 and FLIBS lines I get lots of complaints about:

	? error: unsupported directive '.stabs?

that some from using the old version of gfortran that still exists in /usr/local/bin
With them the gfortran runs nicely, but the first occurrence  of a C routine produces
the error detailed below.  Obviously, there is something fishy with my setup, but 
I thought that fresh R and the two tools packages should have all fitted together.
Thanks again for your suggestions.


> On May 26, 2018, at 4:20 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
>> 
>> On 26 May 2018, at 15:17, Roger Koenker <rkoenker at illinois.edu> wrote:
>> 
>> Thanks Berend  that helps considerably,  I added something for gfortran as follows:
>> 
>> CC=/usr/local/clang6/bin/clang
>> CXX=/usr/local/clang6/bin/clang++
>> LDFLAGS =-L/usr/local/clang6/lib
>> F77=/usr/local/gfortran/bin/gfortran
>> FLIBS=-L/usr/local/gfortran/lib -lgfortran
>> 
>> and now the gfortran seems to be happy, but I?m still seeing problems with some C:
>> 
>> /usr/local/clang6/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG   -I/usr/local/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
>> In file included from init.c:1:
>> /Library/Frameworks/R.framework/Resources/include/R_ext/RS.h:34:11: fatal error: 'string.h' file not
>>     found
>> # include <string.h>            /* for memcpy, memset */
>>         ^~~~~~~~~~
>> 1 error generated.
>> make: *** [init.o] Error 1
>> ERROR: compilation failed for package ?quantreg?
>> 
>> presumably I?m still missing some LDFLGS for clang6?
>> 
> 
> LDFLAGS I presume?
> I don't quite understand what is going wrong exactly.
> 
> Have you installed MacOs commandlinetools? I do have them installed.
> See the first few lines of section C.3 in the R Administration and Installation manual.
> And see item 2 and item 4 in the README.html in the gfortran-6.1-ElCapitan.dmg.
> 
> But you are defining too many lines in your Makevars.
> I do not have F77 and FLIBS in mine. All taken care of by R's Makeconf (see /Library/Frameworks/R.framework/Versions/3.5/Resources/etc/Makeconf)
> There is a symlink in /usr/local/bin/gfortran to the actual gfortran (the gfortran installer takes care of that).
> 
> I have run R CMD check on quantreg_5.35 and all is ok. No errors.
> 
> Berend


From rkoenker @ending from illinoi@@edu  Sun May 27 12:15:36 2018
From: rkoenker @ending from illinoi@@edu (Roger Koenker)
Date: Sun, 27 May 2018 11:15:36 +0100
Subject: [R-SIG-Mac] Tools Update for R3.5?
In-Reply-To: <e67ed19dba524b9487216c23c6936c23@CHIHT2.ad.uillinois.edu>
References: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>
 <4CF84B84-5558-46EF-AB1A-062607E1D2C1@xs4all.nl>
 <8f24be7d51254f4d93cd7e23fa63da11@CITESHT3.ad.uillinois.edu>
 <FA919B17-731B-48BB-9C09-B92541125898@illinois.edu>
 <20a8c6089b254f549f562897ce6f64fc@CITESHT4.ad.uillinois.edu>
 <e67ed19dba524b9487216c23c6936c23@CHIHT2.ad.uillinois.edu>
Message-ID: <9D9FA5DE-1DED-4D6C-8745-6F9B9F1EEF37@illinois.edu>

Maybe this would provide a little more explicit information about what is going wrong:

/usr/local/clang6/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG   -I/usr/local/clang6/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
In file included from init.c:1:
/Library/Frameworks/R.framework/Resources/include/R_ext/RS.h:34:11: fatal error: 'string.h' file not
      found
# include <string.h>            /* for memcpy, memset */
          ^~~~~~~~~~
1 error generated.
make: *** [init.o] Error 1


> On May 26, 2018, at 5:35 PM, Koenker, Roger W <rkoenker at illinois.edu> wrote:
> 
> Humm?  without the F77 and FLIBS lines I get lots of complaints about:
> 
> 	? error: unsupported directive '.stabs?
> 
> that some from using the old version of gfortran that still exists in /usr/local/bin
> With them the gfortran runs nicely, but the first occurrence  of a C routine produces
> the error detailed below.  Obviously, there is something fishy with my setup, but 
> I thought that fresh R and the two tools packages should have all fitted together.
> Thanks again for your suggestions.
> 
> 
>> On May 26, 2018, at 4:20 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
>> 
>>> 
>>> On 26 May 2018, at 15:17, Roger Koenker <rkoenker at illinois.edu> wrote:
>>> 
>>> Thanks Berend  that helps considerably,  I added something for gfortran as follows:
>>> 
>>> CC=/usr/local/clang6/bin/clang
>>> CXX=/usr/local/clang6/bin/clang++
>>> LDFLAGS =-L/usr/local/clang6/lib
>>> F77=/usr/local/gfortran/bin/gfortran
>>> FLIBS=-L/usr/local/gfortran/lib -lgfortran
>>> 
>>> and now the gfortran seems to be happy, but I?m still seeing problems with some C:
>>> 
>>> /usr/local/clang6/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG   -I/usr/local/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
>>> In file included from init.c:1:
>>> /Library/Frameworks/R.framework/Resources/include/R_ext/RS.h:34:11: fatal error: 'string.h' file not
>>>    found
>>> # include <string.h>            /* for memcpy, memset */
>>>        ^~~~~~~~~~
>>> 1 error generated.
>>> make: *** [init.o] Error 1
>>> ERROR: compilation failed for package ?quantreg?
>>> 
>>> presumably I?m still missing some LDFLGS for clang6?
>>> 
>> 
>> LDFLAGS I presume?
>> I don't quite understand what is going wrong exactly.
>> 
>> Have you installed MacOs commandlinetools? I do have them installed.
>> See the first few lines of section C.3 in the R Administration and Installation manual.
>> And see item 2 and item 4 in the README.html in the gfortran-6.1-ElCapitan.dmg.
>> 
>> But you are defining too many lines in your Makevars.
>> I do not have F77 and FLIBS in mine. All taken care of by R's Makeconf (see /Library/Frameworks/R.framework/Versions/3.5/Resources/etc/Makeconf)
>> There is a symlink in /usr/local/bin/gfortran to the actual gfortran (the gfortran installer takes care of that).
>> 
>> I have run R CMD check on quantreg_5.35 and all is ok. No errors.
>> 
>> Berend
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From rkoenker @ending from illinoi@@edu  Sun May 27 14:32:01 2018
From: rkoenker @ending from illinoi@@edu (Roger Koenker)
Date: Sun, 27 May 2018 13:32:01 +0100
Subject: [R-SIG-Mac] Tools Update for R3.5?
In-Reply-To: <33d691e5cfb04e8a8b1116915b2b0bed@CITESHT3.ad.uillinois.edu>
References: <17D50A4E-6BB4-4334-ADE9-905AD65B25AF@illinois.edu>
 <4CF84B84-5558-46EF-AB1A-062607E1D2C1@xs4all.nl>
 <8f24be7d51254f4d93cd7e23fa63da11@CITESHT3.ad.uillinois.edu>
 <FA919B17-731B-48BB-9C09-B92541125898@illinois.edu>
 <20a8c6089b254f549f562897ce6f64fc@CITESHT4.ad.uillinois.edu>
 <e67ed19dba524b9487216c23c6936c23@CHIHT2.ad.uillinois.edu>
 <33d691e5cfb04e8a8b1116915b2b0bed@CITESHT3.ad.uillinois.edu>
Message-ID: <B5821E11-C59F-4B50-97CB-D139735EE0B6@illinois.edu>

Apologies to all,  finally resolved this by the simple, apparently overlooked:

	xcode-select --install

> On May 27, 2018, at 11:15 AM, Koenker, Roger W <rkoenker at illinois.edu> wrote:
> 
> Maybe this would provide a little more explicit information about what is going wrong:
> 
> /usr/local/clang6/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG   -I/usr/local/clang6/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
> In file included from init.c:1:
> /Library/Frameworks/R.framework/Resources/include/R_ext/RS.h:34:11: fatal error: 'string.h' file not
>      found
> # include <string.h>            /* for memcpy, memset */
>          ^~~~~~~~~~
> 1 error generated.
> make: *** [init.o] Error 1
> 
> 
>> On May 26, 2018, at 5:35 PM, Koenker, Roger W <rkoenker at illinois.edu> wrote:
>> 
>> Humm?  without the F77 and FLIBS lines I get lots of complaints about:
>> 
>> 	? error: unsupported directive '.stabs?
>> 
>> that some from using the old version of gfortran that still exists in /usr/local/bin
>> With them the gfortran runs nicely, but the first occurrence  of a C routine produces
>> the error detailed below.  Obviously, there is something fishy with my setup, but 
>> I thought that fresh R and the two tools packages should have all fitted together.
>> Thanks again for your suggestions.
>> 
>> 
>>> On May 26, 2018, at 4:20 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
>>> 
>>>> 
>>>> On 26 May 2018, at 15:17, Roger Koenker <rkoenker at illinois.edu> wrote:
>>>> 
>>>> Thanks Berend  that helps considerably,  I added something for gfortran as follows:
>>>> 
>>>> CC=/usr/local/clang6/bin/clang
>>>> CXX=/usr/local/clang6/bin/clang++
>>>> LDFLAGS =-L/usr/local/clang6/lib
>>>> F77=/usr/local/gfortran/bin/gfortran
>>>> FLIBS=-L/usr/local/gfortran/lib -lgfortran
>>>> 
>>>> and now the gfortran seems to be happy, but I?m still seeing problems with some C:
>>>> 
>>>> /usr/local/clang6/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG   -I/usr/local/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
>>>> In file included from init.c:1:
>>>> /Library/Frameworks/R.framework/Resources/include/R_ext/RS.h:34:11: fatal error: 'string.h' file not
>>>>   found
>>>> # include <string.h>            /* for memcpy, memset */
>>>>       ^~~~~~~~~~
>>>> 1 error generated.
>>>> make: *** [init.o] Error 1
>>>> ERROR: compilation failed for package ?quantreg?
>>>> 
>>>> presumably I?m still missing some LDFLGS for clang6?
>>>> 
>>> 
>>> LDFLAGS I presume?
>>> I don't quite understand what is going wrong exactly.
>>> 
>>> Have you installed MacOs commandlinetools? I do have them installed.
>>> See the first few lines of section C.3 in the R Administration and Installation manual.
>>> And see item 2 and item 4 in the README.html in the gfortran-6.1-ElCapitan.dmg.
>>> 
>>> But you are defining too many lines in your Makevars.
>>> I do not have F77 and FLIBS in mine. All taken care of by R's Makeconf (see /Library/Frameworks/R.framework/Versions/3.5/Resources/etc/Makeconf)
>>> There is a symlink in /usr/local/bin/gfortran to the actual gfortran (the gfortran installer takes care of that).
>>> 
>>> I have run R CMD check on quantreg_5.35 and all is ok. No errors.
>>> 
>>> Berend
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


