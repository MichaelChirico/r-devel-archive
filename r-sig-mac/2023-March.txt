From @bu@@po||on| @end|ng |rom gm@||@com  Mon Mar 13 19:26:07 2023
From: @bu@@po||on| @end|ng |rom gm@||@com (Andrea Apolloni)
Date: Mon, 13 Mar 2023 19:26:07 +0100
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
Message-ID: <CAAAvQD+K+1A+ipuHj3h-jbN7g9j_rpNp2cwA-O=dPJ0Zf8GfkA@mail.gmail.com>

Dear all I had the bad idea ,
3 weeks ago to install the new Mac OS Ventura 13.2.0 on my laptop
I've instlalled the latest version of XCode (14.2) and CommandLine Tools

Since then I can not use RCPP, Nimble and Rstan on my laptop
typical errror
Error: Failed to create the shared library. Run 'printErrors()' to see the
compilation errors.

and using printErrors()

<built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?
make: *** [dynamicRegistrations_03_13_19_21_32.o] Error 1

version of R 4.2.2
Thanks in advance for all your help

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Mar 13 20:02:55 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 14 Mar 2023 08:02:55 +1300
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <CAAAvQD+K+1A+ipuHj3h-jbN7g9j_rpNp2cwA-O=dPJ0Zf8GfkA@mail.gmail.com>
References: <CAAAvQD+K+1A+ipuHj3h-jbN7g9j_rpNp2cwA-O=dPJ0Zf8GfkA@mail.gmail.com>
Message-ID: <D535D180-7926-4BA3-B022-F46AC1F273A3@R-project.org>

Andrea,

Make sure you don't have any outdated tools or flags overrides (e.g. in ~/.R). If it doubt clean /usr/local and uninstall Homebrew. The error suggests your are using compilers that don't support your system.

If you cleaned out those and still needs help, please post the full output of the installation and provide full sessionInfo() output.

Cheers,
Simon


> On Mar 14, 2023, at 7:26 AM, Andrea Apolloni <abu.apolloni at gmail.com> wrote:
> 
> Dear all I had the bad idea ,
> 3 weeks ago to install the new Mac OS Ventura 13.2.0 on my laptop
> I've instlalled the latest version of XCode (14.2) and CommandLine Tools
> 
> Since then I can not use RCPP, Nimble and Rstan on my laptop
> typical errror
> Error: Failed to create the shared library. Run 'printErrors()' to see the
> compilation errors.
> 
> and using printErrors()
> 
> <built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?
> make: *** [dynamicRegistrations_03_13_19_21_32.o] Error 1
> 
> version of R 4.2.2
> Thanks in advance for all your help
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From m|k3h@|| @end|ng |rom gm@||@com  Tue Mar 14 12:52:08 2023
From: m|k3h@|| @end|ng |rom gm@||@com (Michael Hall)
Date: Tue, 14 Mar 2023 06:52:08 -0500
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
References: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
Message-ID: <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>



> On Mar 14, 2023, at 6:00 AM, r-sig-mac-request at r-project.org wrote:
> 
> [R-SIG-Mac] R , RCPP unsing MACOS ventura

Google shows others have had the issue.

Suggestions include...

Uninstall and reinstall command line tools.

??

...following the wisdom of the "homebrew doctor" solves it, i.e. remove and reinstall:

sudo rm -rf /Library/Developer/CommandLineTools
sudo xcode-select ?install

???


Rebuild with export SYSTEM_VERSION_COMPAT=1 

Searched with?
<built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?




	[[alternative HTML version deleted]]


From |eder|co@c@|bo|| @end|ng |rom |uke@||  Tue Mar 14 13:40:23 2023
From: |eder|co@c@|bo|| @end|ng |rom |uke@|| (Calboli Federico (LUKE))
Date: Tue, 14 Mar 2023 12:40:23 +0000
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
References: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
 <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
Message-ID: <AS4PR07MB84572D824BCC5AFEA539340891BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>

I know that posting a makevars is somehow iffy, but I installed GCC with homebrew and my

~/.R/Makevars

Reads

CC=/opt/homebrew/bin/gcc-12 -fopenmp
CXX=/opt/homebrew/bin/g++-12 -fopenmp
CXX11=/opt/homebrew/bin/g++-12 -fopenmp
CXX14=/opt/homebrew/bin/g++-12 -fopenmp
CXX17=/opt/homebrew/bin/g++-12 -fopenmp
FLIBS=-L/opt/homebrew/opt/gfortran/lib
F77=/opt/homebrew/bin/gfortran
FC=/opt/R/arm64/gfortran/bin/gfortran -mtune=native
FLIBS=-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1 -L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lm
CFLAGS=-mtune=native -g -O2 -Wall -pedantic -Wconversion
CPPFLAGS=-I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
CXXFLAGS=-mtune=native -g -O2 -Wall -pedantic -Wconversion

I installed the command line tools with

xcode-select --install

and I installed gcc with homebrew. It works:

> library(Rcpp)
> evalCpp( "1+1")
[1] 2


Federico Calboli
Tutkija
Genomiikka ja jalostus
Luonnonvarakeskus

From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Michael Hall <mik3hall at gmail.com>
Date: Tuesday, 14. March 2023 at 13.52
To: r-sig-mac <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] R , RCPP unsing MACOS ventura


> On Mar 14, 2023, at 6:00 AM, r-sig-mac-request at r-project.org wrote:
>
> [R-SIG-Mac] R , RCPP unsing MACOS ventura

Google shows others have had the issue.

Suggestions include...

Uninstall and reinstall command line tools.

??

...following the wisdom of the "homebrew doctor" solves it, i.e. remove and reinstall:

sudo rm -rf /Library/Developer/CommandLineTools
sudo xcode-select ?install

???


Rebuild with export SYSTEM_VERSION_COMPAT=1

Searched with?
<built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?




        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&data=05%7C01%7Cfederico.calboli%40luke.fi%7C75b8009fdd674305fe6e08db2482a20b%7C7c14dfa4c0fc47259f0476a443deb095%7C0%7C0%7C638143915704206799%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Qmk8swZn4qLly5xUijaWduaiS4veju3YLhclw95pH7U%3D&reserved=0

	[[alternative HTML version deleted]]


From m|k3h@|| @end|ng |rom gm@||@com  Tue Mar 14 13:51:55 2023
From: m|k3h@|| @end|ng |rom gm@||@com (Michael Hall)
Date: Tue, 14 Mar 2023 07:51:55 -0500
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <AS4PR07MB84572D824BCC5AFEA539340891BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>
References: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
 <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
 <AS4PR07MB84572D824BCC5AFEA539340891BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>
Message-ID: <653E535C-F7FA-4382-974C-3A953E273C35@gmail.com>



> On Mar 14, 2023, at 7:40 AM, Calboli Federico (LUKE) <federico.calboli at luke.fi> wrote:
> 
> I know that posting a makevars is somehow iffy, but I installed GCC with homebrew and my
>  
> ~/.R/Makevars
>  

It sounds like it is worth a try. However, I?m not sure it?s clear your OS and other versions match the original posters?

Did you build for the same issue?


	[[alternative HTML version deleted]]


From |eder|co@c@|bo|| @end|ng |rom |uke@||  Tue Mar 14 14:18:07 2023
From: |eder|co@c@|bo|| @end|ng |rom |uke@|| (Calboli Federico (LUKE))
Date: Tue, 14 Mar 2023 13:18:07 +0000
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <653E535C-F7FA-4382-974C-3A953E273C35@gmail.com>
References: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
 <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
 <AS4PR07MB84572D824BCC5AFEA539340891BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>
 <653E535C-F7FA-4382-974C-3A953E273C35@gmail.com>
Message-ID: <AS4PR07MB8457E1C0F53FD2FFCD92469291BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>

It sounds like it is worth a try. However, I?m not sure it?s clear your OS and other versions match the original posters?

My bad, I?m on MacOS 13.2.1 arm64, with the latest XCode CLT

Did you build for the same issue?

I actually do not use Rcpp, I was just curious to know whether it works on my machine or not.  Apparently it does.



Federico Calboli
Tutkija
Genomiikka ja jalostus
Luonnonvarakeskus


	[[alternative HTML version deleted]]


From m|k3h@|| @end|ng |rom gm@||@com  Tue Mar 14 18:01:32 2023
From: m|k3h@|| @end|ng |rom gm@||@com (Michael Hall)
Date: Tue, 14 Mar 2023 12:01:32 -0500
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <mailman.14911.449.1678799916.1527.r-sig-mac@r-project.org>
References: <mailman.14911.449.1678799916.1527.r-sig-mac@r-project.org>
Message-ID: <E3449EC7-07CB-4E75-B368-B5493A7137D7@gmail.com>



> 
> I actually do not use Rcpp, I was just curious to know whether it works on my machine or not.  Apparently it does.
> 


Me either. Fwiw.      

xcode-select --version
xcode-select version 2396.

Also Ventura 13.2.1

> library(Rcpp)
> evalCpp( "1+1")
[1] 2
    ::sprintf(buff, "%02x", from);
      ^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/stdio.h:188:1: note: 'sprintf' has been explicitly marked deprecated here
__deprecated_msg("This function is provided for compatibility reasons only.  Due to security concerns inherent in the design of sprintf(3), it is highly recommended that you use snprintf(3) instead.")
^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/sys/cdefs.h:215:48: note: expanded from macro '__deprecated_msg'
        #define __deprecated_msg(_msg) __attribute__((__deprecated__(_msg)))
                                                      ^
1 warning generated.
> 


From |eder|co@c@|bo|| @end|ng |rom |uke@||  Tue Mar 14 19:26:24 2023
From: |eder|co@c@|bo|| @end|ng |rom |uke@|| (Calboli Federico (LUKE))
Date: Tue, 14 Mar 2023 18:26:24 +0000
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <E3449EC7-07CB-4E75-B368-B5493A7137D7@gmail.com>
References: <mailman.14911.449.1678799916.1527.r-sig-mac@r-project.org>
 <E3449EC7-07CB-4E75-B368-B5493A7137D7@gmail.com>
Message-ID: <AS4PR07MB845748E320254488492A386F91BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>

First off apologies for the horrible quoting from me, I have been forced to move from Mail.app to Outlook and nothing works as it should.

I understand the XCode tool are needed to install homebrew, but after that they are not the focus ? my R makevars calls the gcc I installed with homebrew, not the one supplied by XCode (which does not have fortran, hence my use of the Homebrew gcc).


Federico Calboli
Tutkija
Genomiikka ja jalostus
Luonnonvarakeskus



>
> I actually do not use Rcpp, I was just curious to know whether it works on my machine or not.  Apparently it does.
>


Me either. Fwiw.

xcode-select --version
xcode-select version 2396.

Also Ventura 13.2.1

> library(Rcpp)
> evalCpp( "1+1")
[1] 2
    ::sprintf(buff, "%02x", from);
      ^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/stdio.h:188:1: note: 'sprintf' has been explicitly marked deprecated here
__deprecated_msg("This function is provided for compatibility reasons only.  Due to security concerns inherent in the design of sprintf(3), it is highly recommended that you use snprintf(3) instead.")
^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/sys/cdefs.h:215:48: note: expanded from macro '__deprecated_msg'
        #define __deprecated_msg(_msg) __attribute__((__deprecated__(_msg)))
                                                      ^
1 warning generated.
>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&data=05%7C01%7Cfederico.calboli%40luke.fi%7C8e5586946cd54b94cd7808db24ade8a1%7C7c14dfa4c0fc47259f0476a443deb095%7C0%7C0%7C638144101597319575%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=5l9Xe5xlggU4O3UJwRpIt62sbdZJMmsRoRnkufM2MzY%3D&reserved=0

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Mar 14 21:32:32 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 15 Mar 2023 09:32:32 +1300
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
References: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
 <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
Message-ID: <19782AE4-5EC8-4B13-B01F-342FFDE7077E@R-project.org>

If that is the case, can you actually post what the issue is? The original post had no details and did not follow up when asked for details. When googling the issue seems to arise in Homebrew, not the Apple tools so as I noted removing Homebrew should work.

Cheers,
Simon



> On 15/03/2023, at 12:52 AM, Michael Hall <mik3hall at gmail.com> wrote:
> 
> 
> 
>> On Mar 14, 2023, at 6:00 AM, r-sig-mac-request at r-project.org wrote:
>> 
>> [R-SIG-Mac] R , RCPP unsing MACOS ventura
> 
> Google shows others have had the issue.
> 
> Suggestions include...
> 
> Uninstall and reinstall command line tools.
> 
> ??
> 
> ...following the wisdom of the "homebrew doctor" solves it, i.e. remove and reinstall:
> 
> sudo rm -rf /Library/Developer/CommandLineTools
> sudo xcode-select ?install
> 
> ???
> 
> 
> Rebuild with export SYSTEM_VERSION_COMPAT=1 
> 
> Searched with?
> <built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Mar 14 21:39:12 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 15 Mar 2023 09:39:12 +1300
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <AS4PR07MB845748E320254488492A386F91BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>
References: <mailman.14911.449.1678799916.1527.r-sig-mac@r-project.org>
 <E3449EC7-07CB-4E75-B368-B5493A7137D7@gmail.com>
 <AS4PR07MB845748E320254488492A386F91BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>
Message-ID: <B11958CC-4C9E-455D-8A0F-6AA89DBC28B3@R-project.org>

Federico,

given that Homebrew is likely the cause for the mess, advising to install a custom installation seems like a very bad idea. It is likely very dependent on the versions of the tools from Homebrew which is what breaks. Therefore I would strongly advise against it (unless you know what you are doing, but then if you do - you know how to fix it).

So to the list readers - please do NOT follow the advice for custom flags unless you know what it does and how to maintain it. If you use custom tools (which is fine for experts), you are likely to have problems down the road since such installations are not maintained by Apple and will break and will need fixing.

Cheers,
Simon
  



> On 15/03/2023, at 7:26 AM, Calboli Federico (LUKE) <federico.calboli at luke.fi> wrote:
> 
> First off apologies for the horrible quoting from me, I have been forced to move from Mail.app to Outlook and nothing works as it should.
> 
> I understand the XCode tool are needed to install homebrew, but after that they are not the focus ? my R makevars calls the gcc I installed with homebrew, not the one supplied by XCode (which does not have fortran, hence my use of the Homebrew gcc).
> 
> 
> Federico Calboli
> Tutkija
> Genomiikka ja jalostus
> Luonnonvarakeskus
> 
> 
> 
>> 
>> I actually do not use Rcpp, I was just curious to know whether it works on my machine or not.  Apparently it does.
>> 
> 
> 
> Me either. Fwiw.
> 
> xcode-select --version
> xcode-select version 2396.
> 
> Also Ventura 13.2.1
> 
>> library(Rcpp)
>> evalCpp( "1+1")
> [1] 2
>    ::sprintf(buff, "%02x", from);
>      ^
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/stdio.h:188:1: note: 'sprintf' has been explicitly marked deprecated here
> __deprecated_msg("This function is provided for compatibility reasons only.  Due to security concerns inherent in the design of sprintf(3), it is highly recommended that you use snprintf(3) instead.")
> ^
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/sys/cdefs.h:215:48: note: expanded from macro '__deprecated_msg'
>        #define __deprecated_msg(_msg) __attribute__((__deprecated__(_msg)))
>                                                      ^
> 1 warning generated.
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&data=05%7C01%7Cfederico.calboli%40luke.fi%7C8e5586946cd54b94cd7808db24ade8a1%7C7c14dfa4c0fc47259f0476a443deb095%7C0%7C0%7C638144101597319575%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=5l9Xe5xlggU4O3UJwRpIt62sbdZJMmsRoRnkufM2MzY%3D&reserved=0
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From m|k3h@|| @end|ng |rom gm@||@com  Tue Mar 14 21:45:49 2023
From: m|k3h@|| @end|ng |rom gm@||@com (Michael Hall)
Date: Tue, 14 Mar 2023 15:45:49 -0500
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <19782AE4-5EC8-4B13-B01F-342FFDE7077E@R-project.org>
References: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
 <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
 <19782AE4-5EC8-4B13-B01F-342FFDE7077E@R-project.org>
Message-ID: <DDFFA70F-08AA-4175-B954-55554F257A1E@gmail.com>



> On Mar 14, 2023, at 3:32 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> If that is the case, can you actually post what the issue is? The original post had no details and did not follow up when asked for details. When googling the issue seems to arise in Homebrew, not the Apple tools so as I noted removing Homebrew should work.
> 
> Cheers,
> Simon
> 
> 
> 
>> On 15/03/2023, at 12:52 AM, Michael Hall <mik3hall at gmail.com> wrote:
>> 
>> 
>> 
>>> On Mar 14, 2023, at 6:00 AM, r-sig-mac-request at r-project.org wrote:
>>> 
>>> [R-SIG-Mac] R , RCPP unsing MACOS ventura
>> 
>> Google shows others have had the issue.
>> 
>> Suggestions include...
>> 
>> Uninstall and reinstall command line tools.
>> 
>> ??
>> 
>> ...following the wisdom of the "homebrew doctor" solves it, i.e. remove and reinstall:
>> 
>> sudo rm -rf /Library/Developer/CommandLineTools
>> sudo xcode-select ?install
>> 
>> ???
>> 
>> 
>> Rebuild with export SYSTEM_VERSION_COMPAT=1 
>> 
>> Searched with?
>> <built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?

The general suggestion seemed to be for some reason to remove and reinstall the command line tools. The example I posted was one where it was the home-brew doctor that made that suggestion. Not that homebrew itself was the problem.

The 
>> <built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?

Seemed to be what the underlying issue was? and was what I searched on


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Mar 14 21:50:25 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 15 Mar 2023 09:50:25 +1300
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <DDFFA70F-08AA-4175-B954-55554F257A1E@gmail.com>
References: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
 <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
 <19782AE4-5EC8-4B13-B01F-342FFDE7077E@R-project.org>
 <DDFFA70F-08AA-4175-B954-55554F257A1E@gmail.com>
Message-ID: <B407A4E6-7BC0-4A31-B701-2F2FB23A6CD5@R-project.org>

Well, what I saw in the searches what that it was a problem with Homebrew tools breaking on that flag. Again, it's all speculation, because no one posted the actual issue ... so it's anyone's guess what this is all about until someone actually posts the details I asked for - I don't see that problem myself, but I don't use Homebrew (at least not on the default PATH).

Cheers,
Simon


> On 15/03/2023, at 9:45 AM, Michael Hall <mik3hall at gmail.com> wrote:
> 
> 
> 
>> On Mar 14, 2023, at 3:32 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> If that is the case, can you actually post what the issue is? The original post had no details and did not follow up when asked for details. When googling the issue seems to arise in Homebrew, not the Apple tools so as I noted removing Homebrew should work.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On 15/03/2023, at 12:52 AM, Michael Hall <mik3hall at gmail.com> wrote:
>>> 
>>> 
>>> 
>>>> On Mar 14, 2023, at 6:00 AM, r-sig-mac-request at r-project.org wrote:
>>>> 
>>>> [R-SIG-Mac] R , RCPP unsing MACOS ventura
>>> 
>>> Google shows others have had the issue.
>>> 
>>> Suggestions include...
>>> 
>>> Uninstall and reinstall command line tools.
>>> 
>>> ??
>>> 
>>> ...following the wisdom of the "homebrew doctor" solves it, i.e. remove and reinstall:
>>> 
>>> sudo rm -rf /Library/Developer/CommandLineTools
>>> sudo xcode-select ?install
>>> 
>>> ???
>>> 
>>> 
>>> Rebuild with export SYSTEM_VERSION_COMPAT=1 
>>> 
>>> Searched with?
>>> <built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?
> 
> The general suggestion seemed to be for some reason to remove and reinstall the command line tools. The example I posted was one where it was the home-brew doctor that made that suggestion. Not that homebrew itself was the problem.
> 
> The 
>>> <built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?
> 
> Seemed to be what the underlying issue was? and was what I searched on
> 


From |eder|co@c@|bo|| @end|ng |rom |uke@||  Tue Mar 14 22:05:45 2023
From: |eder|co@c@|bo|| @end|ng |rom |uke@|| (Calboli Federico (LUKE))
Date: Tue, 14 Mar 2023 21:05:45 +0000
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <B11958CC-4C9E-455D-8A0F-6AA89DBC28B3@R-project.org>
References: <mailman.14911.449.1678799916.1527.r-sig-mac@r-project.org>
 <E3449EC7-07CB-4E75-B368-B5493A7137D7@gmail.com>
 <AS4PR07MB845748E320254488492A386F91BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>
 <B11958CC-4C9E-455D-8A0F-6AA89DBC28B3@R-project.org>
Message-ID: <AS4PR07MB84570C45C518AEF30A845F9791BE9@AS4PR07MB8457.eurprd07.prod.outlook.com>

Simon,

Yes, sure, I need to keep an eye on the GCC version from HB, because when it changes the makevars breaks. Otherwise I never really had issues, but I am happy to break stuff, and fix it.



Federico Calboli
Tutkija
Genomiikka ja jalostus
Luonnonvarakeskus

Federico,

given that Homebrew is likely the cause for the mess, advising to install a custom installation seems like a very bad idea. It is likely very dependent on the versions of the tools from Homebrew which is what breaks. Therefore I would strongly advise against it (unless you know what you are doing, but then if you do - you know how to fix it).

So to the list readers - please do NOT follow the advice for custom flags unless you know what it does and how to maintain it. If you use custom tools (which is fine for experts), you are likely to have problems down the road since such installations are not maintained by Apple and will break and will need fixing.

Cheers,
Simon




> On 15/03/2023, at 7:26 AM, Calboli Federico (LUKE) <federico.calboli at luke.fi> wrote:
>
> First off apologies for the horrible quoting from me, I have been forced to move from Mail.app to Outlook and nothing works as it should.
>
> I understand the XCode tool are needed to install homebrew, but after that they are not the focus ? my R makevars calls the gcc I installed with homebrew, not the one supplied by XCode (which does not have fortran, hence my use of the Homebrew gcc).
>
>
> Federico Calboli
> Tutkija
> Genomiikka ja jalostus
> Luonnonvarakeskus
>
>
>
>>
>> I actually do not use Rcpp, I was just curious to know whether it works on my machine or not.  Apparently it does.
>>
>
>
> Me either. Fwiw.
>
> xcode-select --version
> xcode-select version 2396.
>
> Also Ventura 13.2.1
>
>> library(Rcpp)
>> evalCpp( "1+1")
> [1] 2
>    ::sprintf(buff, "%02x", from);
>      ^
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/stdio.h:188:1: note: 'sprintf' has been explicitly marked deprecated here
> __deprecated_msg("This function is provided for compatibility reasons only.  Due to security concerns inherent in the design of sprintf(3), it is highly recommended that you use snprintf(3) instead.")
> ^
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/sys/cdefs.h:215:48: note: expanded from macro '__deprecated_msg'
>        #define __deprecated_msg(_msg) __attribute__((__deprecated__(_msg)))
>                                                      ^
> 1 warning generated.
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&data=05%7C01%7Cfederico.calboli%40luke.fi%7C97fbccf72ee641fad83408db24cc312d%7C7c14dfa4c0fc47259f0476a443deb095%7C0%7C0%7C638144231646298662%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=lJcMNU18F%2BsBAujzmb%2FumwJhbWwEQncjy%2BcD52J5V50%3D&reserved=0
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&data=05%7C01%7Cfederico.calboli%40luke.fi%7C97fbccf72ee641fad83408db24cc312d%7C7c14dfa4c0fc47259f0476a443deb095%7C0%7C0%7C638144231646298662%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=lJcMNU18F%2BsBAujzmb%2FumwJhbWwEQncjy%2BcD52J5V50%3D&reserved=0

	[[alternative HTML version deleted]]


From m|k3h@|| @end|ng |rom gm@||@com  Tue Mar 14 22:46:10 2023
From: m|k3h@|| @end|ng |rom gm@||@com (Michael Hall)
Date: Tue, 14 Mar 2023 16:46:10 -0500
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <B407A4E6-7BC0-4A31-B701-2F2FB23A6CD5@R-project.org>
References: <mailman.14908.3.1678791602.50561.r-sig-mac@r-project.org>
 <91043D1B-A2E6-4F84-B40B-E7875BAB54D5@gmail.com>
 <19782AE4-5EC8-4B13-B01F-342FFDE7077E@R-project.org>
 <DDFFA70F-08AA-4175-B954-55554F257A1E@gmail.com>
 <B407A4E6-7BC0-4A31-B701-2F2FB23A6CD5@R-project.org>
Message-ID: <A55F6A11-1F3D-449C-B5AD-AA32371D7685@gmail.com>



> On Mar 14, 2023, at 3:50 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Well, what I saw in the searches what that it was a problem with Homebrew tools breaking on that flag. Again, it's all speculation, because no one posted the actual issue ... so it's anyone's guess what this is all about until someone actually posts the details I asked for - I don't see that problem myself, but I don't use Homebrew (at least not on the default PATH).
> 
> Cheers,
> Simon

As you said earlier.

> The error suggests your are using compilers that don't support your system.

It doesn?t seem to recognize a 13.2 system. This could well be because it is trying to use a homebrew gcc that isn?t playing well with the Xcode command line tools.

The xcode-select -version that I showed earlier was supposed to indicate what version of the command line tools you are using no matter with what Xcode.app although I?m not sure exactly how you are supposed to correspond the CLT version to the OS one.

gcc ?version should I think tell you if you have a homebrew or Apple one.

If homebrew is the culprit following the homebrew suggestion of uninstalling and reinstalling CLT would still seem to me to be worth the attempt.

If something is hardcoded in PATH messing up search orders that would be a different issue. 

Uninstalling homebrew as I think you suggested seems to be throwing out the baby, the bath water and the kitchen sink. There should be a less drastic solution.
 

From @bu@@po||on| @end|ng |rom gm@||@com  Wed Mar 15 15:58:46 2023
From: @bu@@po||on| @end|ng |rom gm@||@com (Andrea Apolloni)
Date: Wed, 15 Mar 2023 15:58:46 +0100
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <D535D180-7926-4BA3-B022-F46AC1F273A3@R-project.org>
References: <CAAAvQD+K+1A+ipuHj3h-jbN7g9j_rpNp2cwA-O=dPJ0Zf8GfkA@mail.gmail.com>
 <D535D180-7926-4BA3-B022-F46AC1F273A3@R-project.org>
Message-ID: <CAAAvQDJ3oeA63hnFsTk7r4zHdqYSNmrJnj42hNey_XZi+i96Pw@mail.gmail.com>

Dear Simon , dearl all
thank you for your feedback

On Mon, Mar 13, 2023 at 8:02?PM Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> Andrea,
>
> Make sure you don't have any outdated tools or flags overrides (e.g. in
> ~/.R).

I'm not sure how to do it (sorry). I'm going with the second option


> If it doubt clean /usr/local and uninstall Homebrew.



> The error suggests your are using compilers that don't support your system.
>
I think that one of the problem relies on Xcode and command line taht are
not updated for the new version of Macos Ventura 13.2.1. In particular if I
follwo the procedure from
https://cran.r-project.org/bin/macosx/
and install the gfortran compiler
https://github.com/fxcoudert/gfortran-for-macOS/releases/tag/12.2-ventura

there isn't an updated compiler for  the version mac os Ventura 13.2.1 for
intel
Do you know any compiler I can use alternatively?
Thank you for all teh discussion
Bests
Andrea

>
> If you cleaned out those and still needs help, please post the full output
> of the installation and provide full sessionInfo() output.
>
> Cheers,
> Simon
>
>
> > On Mar 14, 2023, at 7:26 AM, Andrea Apolloni <abu.apolloni at gmail.com>
> wrote:
> >
> > Dear all I had the bad idea ,
> > 3 weeks ago to install the new Mac OS Ventura 13.2.0 on my laptop
> > I've instlalled the latest version of XCode (14.2) and CommandLine Tools
> >
> > Since then I can not use RCPP, Nimble and Rstan on my laptop
> > typical errror
> > Error: Failed to create the shared library. Run 'printErrors()' to see
> the
> > compilation errors.
> >
> > and using printErrors()
> >
> > <built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?
> > make: *** [dynamicRegistrations_03_13_19_21_32.o] Error 1
> >
> > version of R 4.2.2
> > Thanks in advance for all your help
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>
>

	[[alternative HTML version deleted]]


From @bu@@po||on| @end|ng |rom gm@||@com  Wed Mar 15 17:48:21 2023
From: @bu@@po||on| @end|ng |rom gm@||@com (Andrea Apolloni)
Date: Wed, 15 Mar 2023 17:48:21 +0100
Subject: [R-SIG-Mac] R , RCPP unsing MACOS ventura
In-Reply-To: <CAAAvQDJ3oeA63hnFsTk7r4zHdqYSNmrJnj42hNey_XZi+i96Pw@mail.gmail.com>
References: <CAAAvQD+K+1A+ipuHj3h-jbN7g9j_rpNp2cwA-O=dPJ0Zf8GfkA@mail.gmail.com>
 <D535D180-7926-4BA3-B022-F46AC1F273A3@R-project.org>
 <CAAAvQDJ3oeA63hnFsTk7r4zHdqYSNmrJnj42hNey_XZi+i96Pw@mail.gmail.com>
Message-ID: <CAAAvQDJvbqmK0DrhXmJ5xbYdOYy+xjMxUDdQP=-RD4BiKt7GdQ@mail.gmail.com>

Dear all,
I'ma happy to inform that the procedure suggested by Simon. worked . thanks
a lot

On Wed, Mar 15, 2023 at 3:58?PM Andrea Apolloni <abu.apolloni at gmail.com>
wrote:

> Dear Simon , dearl all
> thank you for your feedback
>
> On Mon, Mar 13, 2023 at 8:02?PM Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
>
>> Andrea,
>>
>> Make sure you don't have any outdated tools or flags overrides (e.g. in
>> ~/.R).
>
> I'm not sure how to do it (sorry). I'm going with the second option
>
>
>> If it doubt clean /usr/local and uninstall Homebrew.
>
>
>
>> The error suggests your are using compilers that don't support your
>> system.
>>
> I think that one of the problem relies on Xcode and command line taht are
> not updated for the new version of Macos Ventura 13.2.1. In particular if I
> follwo the procedure from
> https://cran.r-project.org/bin/macosx/
> and install the gfortran compiler
> https://github.com/fxcoudert/gfortran-for-macOS/releases/tag/12.2-ventura
>
> there isn't an updated compiler for  the version mac os Ventura 13.2.1 for
> intel
> Do you know any compiler I can use alternatively?
> Thank you for all teh discussion
> Bests
> Andrea
>
>>
>> If you cleaned out those and still needs help, please post the full
>> output of the installation and provide full sessionInfo() output.
>>
>> Cheers,
>> Simon
>>
>>
>> > On Mar 14, 2023, at 7:26 AM, Andrea Apolloni <abu.apolloni at gmail.com>
>> wrote:
>> >
>> > Dear all I had the bad idea ,
>> > 3 weeks ago to install the new Mac OS Ventura 13.2.0 on my laptop
>> > I've instlalled the latest version of XCode (14.2) and CommandLine Tools
>> >
>> > Since then I can not use RCPP, Nimble and Rstan on my laptop
>> > typical errror
>> > Error: Failed to create the shared library. Run 'printErrors()' to see
>> the
>> > compilation errors.
>> >
>> > and using printErrors()
>> >
>> > <built-in>: error: unknown value ?13.2.0? of ?-mmacosx-version-min?
>> > make: *** [dynamicRegistrations_03_13_19_21_32.o] Error 1
>> >
>> > version of R 4.2.2
>> > Thanks in advance for all your help
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Mac mailing list
>> > R-SIG-Mac at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> >
>>
>>

	[[alternative HTML version deleted]]


From g||berto@c@m@r@@|npe @end|ng |rom gm@||@com  Sat Mar 18 19:02:08 2023
From: g||berto@c@m@r@@|npe @end|ng |rom gm@||@com (Gilberto Camara)
Date: Sat, 18 Mar 2023 15:02:08 -0300
Subject: [R-SIG-Mac] Help on reducing size of shared libraries on MacOS on
 CRAN
Message-ID: <2321998B-52D6-40D5-9D0D-A6172EDD54D7@gmail.com>

Dear R-SIG-MAC members

We are the developers of R package sits and would like to ask for your help in solving a problem with library size on R macOS binaries. 

Before submission to CRAN, version 1.3.0 of sits (https://cran.r-project.org/web/packages/sits/index.html) has been tested in various environments, including Ubuntu, Fedora, CRAN winbuilder (all flavors). We have tested sits-1.3.0 on r-release-mac-x86_64 and r-release-macos-arm64 with the following configurations:

- r-release-macos-x86_64: R 4.2.2, MacMini 3.2GHz, 6 cores, 32 MB RAM, macOS Ventura 3.2.1, Apple clang version 14.0.3 (clang-1403.0.22.14.1).

- r-release-macos-arm64: R 4.2.2, MacBookAir, chip ARM M1, 8 cores, 16 MB RAM, macOS Monterrey 12.6,  Apple clang version 14.0.0 (clang-1400.0.29.201). 

In our configuration of r-release-macos-x86_64, the installed size is 3.8 MB, and the libs directory size is 436 KB. On r-release-macos-arm64, the installed size is 5.4 MB and the libs directory size is 1.6 MB. 

The current CRAN check on sits version 1.3.0 reports a NOTE on r-release-macos-arm64 and r-oldrel-macos-arm64, with an installation size of 7.3Mb with the libs directory size reported as 4.8Mb. CRAN is using Apple clang version 13.0.0 ((clang-1300.0.29.30) on r-release-macos-arm64 and Apple clang version 12.0.0 (clang-1200.0.32.29) on r-oldrel-macos-arm64. 

There is a 3.2 MB difference in size between what CRAN reports and what we obtain in our tests for r-release-macos-arm64. We would appreciate your guidance on how to address this problem and, if possible, point to a reliable way to reduce package size in macOS. 

Note that our package links to RCpp and RCppArmadillo.

Our current Makevars configuration is given below
==========================================
# suggestion by Dirk Eddelbuettel
SHLIB_CXXLDFLAGS = -Wlto,-S -shared
SHLIB_CXX11LDFLAGS = -Wlto,-S -shared
SHLIB_CXX14LDFLAGS = -Wlto,-S -shared
SHLIB_FCLDFLAGS = -Wlto,-S -shared
SHLIB_LDFLAGS = -Wlto,-S -shared

## suggestion by Dirk Eddelbuettel
PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)

strippedLib: $(SHLIB)
		if test -e "/usr/bin/strip" & test -e "/bin/uname" & [[ `uname` == "Linux" ]] ; then /usr/bin/strip --strip-debug $(SHLIB); fi

clean:
	rm -f $(OBJECTS)

.phony: strippedLib clean
===========================================

Any help would be much appreciated. 

Best regards
Gilberto
============================
Prof Dr Gilberto Camara
Senior Researcher
National Institute for Space Research (INPE), Brazil
https://gilbertocamara.org/
=============================


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Mar 18 22:19:59 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 19 Mar 2023 10:19:59 +1300
Subject: [R-SIG-Mac] 
 Help on reducing size of shared libraries on MacOS on CRAN
In-Reply-To: <2321998B-52D6-40D5-9D0D-A6172EDD54D7@gmail.com>
References: <2321998B-52D6-40D5-9D0D-A6172EDD54D7@gmail.com>
Message-ID: <3E442374-56B1-464A-A8DF-2524226A76F4@R-project.org>

Gilberto,

Please note that size checks are not really relevant for binary packages - it is normal for binaries to be large as they may include static libraries (e.g., rgdal has 273Mb). Also note that 4.8Mb is rather small for a library since it also includes debugging symbols (CRAN packages are built with --dsym to make debugging easier) - so is there a particular reason you are concerned about the size? You can always remove the debugging symbols (libs/*.dsym) on your machine if you have issues with size.

Cheers,
Simon


> On 19/03/2023, at 07:02, Gilberto Camara <gilberto.camara.inpe at gmail.com> wrote:
> 
> Dear R-SIG-MAC members
> 
> We are the developers of R package sits and would like to ask for your help in solving a problem with library size on R macOS binaries. 
> 
> Before submission to CRAN, version 1.3.0 of sits (https://cran.r-project.org/web/packages/sits/index.html) has been tested in various environments, including Ubuntu, Fedora, CRAN winbuilder (all flavors). We have tested sits-1.3.0 on r-release-mac-x86_64 and r-release-macos-arm64 with the following configurations:
> 
> - r-release-macos-x86_64: R 4.2.2, MacMini 3.2GHz, 6 cores, 32 MB RAM, macOS Ventura 3.2.1, Apple clang version 14.0.3 (clang-1403.0.22.14.1).
> 
> - r-release-macos-arm64: R 4.2.2, MacBookAir, chip ARM M1, 8 cores, 16 MB RAM, macOS Monterrey 12.6,  Apple clang version 14.0.0 (clang-1400.0.29.201). 
> 
> In our configuration of r-release-macos-x86_64, the installed size is 3.8 MB, and the libs directory size is 436 KB. On r-release-macos-arm64, the installed size is 5.4 MB and the libs directory size is 1.6 MB. 
> 
> The current CRAN check on sits version 1.3.0 reports a NOTE on r-release-macos-arm64 and r-oldrel-macos-arm64, with an installation size of 7.3Mb with the libs directory size reported as 4.8Mb. CRAN is using Apple clang version 13.0.0 ((clang-1300.0.29.30) on r-release-macos-arm64 and Apple clang version 12.0.0 (clang-1200.0.32.29) on r-oldrel-macos-arm64. 
> 
> There is a 3.2 MB difference in size between what CRAN reports and what we obtain in our tests for r-release-macos-arm64. We would appreciate your guidance on how to address this problem and, if possible, point to a reliable way to reduce package size in macOS. 
> 
> Note that our package links to RCpp and RCppArmadillo.
> 
> Our current Makevars configuration is given below
> ==========================================
> # suggestion by Dirk Eddelbuettel
> SHLIB_CXXLDFLAGS = -Wlto,-S -shared
> SHLIB_CXX11LDFLAGS = -Wlto,-S -shared
> SHLIB_CXX14LDFLAGS = -Wlto,-S -shared
> SHLIB_FCLDFLAGS = -Wlto,-S -shared
> SHLIB_LDFLAGS = -Wlto,-S -shared
> 
> ## suggestion by Dirk Eddelbuettel
> PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
> PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
> 
> strippedLib: $(SHLIB)
> 		if test -e "/usr/bin/strip" & test -e "/bin/uname" & [[ `uname` == "Linux" ]] ; then /usr/bin/strip --strip-debug $(SHLIB); fi
> 
> clean:
> 	rm -f $(OBJECTS)
> 
> .phony: strippedLib clean
> ===========================================
> 
> Any help would be much appreciated. 
> 
> Best regards
> Gilberto
> ============================
> Prof Dr Gilberto Camara
> Senior Researcher
> National Institute for Space Research (INPE), Brazil
> https://gilbertocamara.org/
> =============================
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From g||berto@c@m@r@@|npe @end|ng |rom gm@||@com  Sat Mar 18 22:27:43 2023
From: g||berto@c@m@r@@|npe @end|ng |rom gm@||@com (Gilberto Camara)
Date: Sat, 18 Mar 2023 18:27:43 -0300
Subject: [R-SIG-Mac] 
 Help on reducing size of shared libraries on MacOS on CRAN
In-Reply-To: <3E442374-56B1-464A-A8DF-2524226A76F4@R-project.org>
References: <2321998B-52D6-40D5-9D0D-A6172EDD54D7@gmail.com>
 <3E442374-56B1-464A-A8DF-2524226A76F4@R-project.org>
Message-ID: <2458203A-76CE-44C1-98C6-EABB4FA2AE71@gmail.com>

Hi Simon

Many thanks for your quick response.  

My concern has to do with the CRAN Repository Policies, which state: "Maintainers will be asked to update packages which show any warnings or significant notes?. Since the concept of what are ?significant notes" is not clearly defined, it is natural that maintainers would like their packages to be free of any NOTE.

That said, your explanation is quite helpful and informative.

Best regards
Gilberto

============================
Prof Dr Gilberto Camara
Senior Researcher
National Institute for Space Research (INPE), Brazil
https://gilbertocamara.org/
=============================




> On 18 Mar 2023, at 18:19, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Gilberto,
> 
> Please note that size checks are not really relevant for binary packages - it is normal for binaries to be large as they may include static libraries (e.g., rgdal has 273Mb). Also note that 4.8Mb is rather small for a library since it also includes debugging symbols (CRAN packages are built with --dsym to make debugging easier) - so is there a particular reason you are concerned about the size? You can always remove the debugging symbols (libs/*.dsym) on your machine if you have issues with size.
> 
> Cheers,
> Simon
> 
> 
>> On 19/03/2023, at 07:02, Gilberto Camara <gilberto.camara.inpe at gmail.com> wrote:
>> 
>> Dear R-SIG-MAC members
>> 
>> We are the developers of R package sits and would like to ask for your help in solving a problem with library size on R macOS binaries. 
>> 
>> Before submission to CRAN, version 1.3.0 of sits (https://cran.r-project.org/web/packages/sits/index.html) has been tested in various environments, including Ubuntu, Fedora, CRAN winbuilder (all flavors). We have tested sits-1.3.0 on r-release-mac-x86_64 and r-release-macos-arm64 with the following configurations:
>> 
>> - r-release-macos-x86_64: R 4.2.2, MacMini 3.2GHz, 6 cores, 32 MB RAM, macOS Ventura 3.2.1, Apple clang version 14.0.3 (clang-1403.0.22.14.1).
>> 
>> - r-release-macos-arm64: R 4.2.2, MacBookAir, chip ARM M1, 8 cores, 16 MB RAM, macOS Monterrey 12.6,  Apple clang version 14.0.0 (clang-1400.0.29.201). 
>> 
>> In our configuration of r-release-macos-x86_64, the installed size is 3.8 MB, and the libs directory size is 436 KB. On r-release-macos-arm64, the installed size is 5.4 MB and the libs directory size is 1.6 MB. 
>> 
>> The current CRAN check on sits version 1.3.0 reports a NOTE on r-release-macos-arm64 and r-oldrel-macos-arm64, with an installation size of 7.3Mb with the libs directory size reported as 4.8Mb. CRAN is using Apple clang version 13.0.0 ((clang-1300.0.29.30) on r-release-macos-arm64 and Apple clang version 12.0.0 (clang-1200.0.32.29) on r-oldrel-macos-arm64. 
>> 
>> There is a 3.2 MB difference in size between what CRAN reports and what we obtain in our tests for r-release-macos-arm64. We would appreciate your guidance on how to address this problem and, if possible, point to a reliable way to reduce package size in macOS. 
>> 
>> Note that our package links to RCpp and RCppArmadillo.
>> 
>> Our current Makevars configuration is given below
>> ==========================================
>> # suggestion by Dirk Eddelbuettel
>> SHLIB_CXXLDFLAGS = -Wlto,-S -shared
>> SHLIB_CXX11LDFLAGS = -Wlto,-S -shared
>> SHLIB_CXX14LDFLAGS = -Wlto,-S -shared
>> SHLIB_FCLDFLAGS = -Wlto,-S -shared
>> SHLIB_LDFLAGS = -Wlto,-S -shared
>> 
>> ## suggestion by Dirk Eddelbuettel
>> PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
>> PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
>> 
>> strippedLib: $(SHLIB)
>> if test -e "/usr/bin/strip" & test -e "/bin/uname" & [[ `uname` == "Linux" ]] ; then /usr/bin/strip --strip-debug $(SHLIB); fi
>> 
>> clean:
>> rm -f $(OBJECTS)
>> 
>> .phony: strippedLib clean
>> ===========================================
>> 
>> Any help would be much appreciated. 
>> 
>> Best regards
>> Gilberto
>> ============================
>> Prof Dr Gilberto Camara
>> Senior Researcher
>> National Institute for Space Research (INPE), Brazil
>> https://gilbertocamara.org/
>> =============================
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From ken @end|ng |rom kjbe@th@com@@u  Sun Mar 19 02:10:25 2023
From: ken @end|ng |rom kjbe@th@com@@u (Ken Beath)
Date: Sun, 19 Mar 2023 12:10:25 +1100
Subject: [R-SIG-Mac] 
 Help on reducing size of shared libraries on MacOS on CRAN
In-Reply-To: <2458203A-76CE-44C1-98C6-EABB4FA2AE71@gmail.com>
References: <2321998B-52D6-40D5-9D0D-A6172EDD54D7@gmail.com>
 <3E442374-56B1-464A-A8DF-2524226A76F4@R-project.org>
 <2458203A-76CE-44C1-98C6-EABB4FA2AE71@gmail.com>
Message-ID: <00D8612F-AFC3-4DBF-B338-287EB83A3DFF@kjbeath.com.au>

A random sample of packages linking to Rcpp shows that many have NOTEs for installed package size.

I would avoid using special compiler flags, as this is something that may cause problems in the future.

Ken

> On 19 Mar 2023, at 8:27 am, Gilberto Camara <gilberto.camara.inpe at gmail.com> wrote:
> 
> Hi Simon
> 
> Many thanks for your quick response.  
> 
> My concern has to do with the CRAN Repository Policies, which state: "Maintainers will be asked to update packages which show any warnings or significant notes?. Since the concept of what are ?significant notes" is not clearly defined, it is natural that maintainers would like their packages to be free of any NOTE.
> 
> That said, your explanation is quite helpful and informative.
> 
> Best regards
> Gilberto
> 
> ============================
> Prof Dr Gilberto Camara
> Senior Researcher
> National Institute for Space Research (INPE), Brazil
> https://gilbertocamara.org/
> =============================
> 
> 
> 
> 
>> On 18 Mar 2023, at 18:19, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Gilberto,
>> 
>> Please note that size checks are not really relevant for binary packages - it is normal for binaries to be large as they may include static libraries (e.g., rgdal has 273Mb). Also note that 4.8Mb is rather small for a library since it also includes debugging symbols (CRAN packages are built with --dsym to make debugging easier) - so is there a particular reason you are concerned about the size? You can always remove the debugging symbols (libs/*.dsym) on your machine if you have issues with size.
>> 
>> Cheers,
>> Simon
>> 
>> 
>>> On 19/03/2023, at 07:02, Gilberto Camara <gilberto.camara.inpe at gmail.com> wrote:
>>> 
>>> Dear R-SIG-MAC members
>>> 
>>> We are the developers of R package sits and would like to ask for your help in solving a problem with library size on R macOS binaries. 
>>> 
>>> Before submission to CRAN, version 1.3.0 of sits (https://cran.r-project.org/web/packages/sits/index.html) has been tested in various environments, including Ubuntu, Fedora, CRAN winbuilder (all flavors). We have tested sits-1.3.0 on r-release-mac-x86_64 and r-release-macos-arm64 with the following configurations:
>>> 
>>> - r-release-macos-x86_64: R 4.2.2, MacMini 3.2GHz, 6 cores, 32 MB RAM, macOS Ventura 3.2.1, Apple clang version 14.0.3 (clang-1403.0.22.14.1).
>>> 
>>> - r-release-macos-arm64: R 4.2.2, MacBookAir, chip ARM M1, 8 cores, 16 MB RAM, macOS Monterrey 12.6,  Apple clang version 14.0.0 (clang-1400.0.29.201). 
>>> 
>>> In our configuration of r-release-macos-x86_64, the installed size is 3.8 MB, and the libs directory size is 436 KB. On r-release-macos-arm64, the installed size is 5.4 MB and the libs directory size is 1.6 MB. 
>>> 
>>> The current CRAN check on sits version 1.3.0 reports a NOTE on r-release-macos-arm64 and r-oldrel-macos-arm64, with an installation size of 7.3Mb with the libs directory size reported as 4.8Mb. CRAN is using Apple clang version 13.0.0 ((clang-1300.0.29.30) on r-release-macos-arm64 and Apple clang version 12.0.0 (clang-1200.0.32.29) on r-oldrel-macos-arm64. 
>>> 
>>> There is a 3.2 MB difference in size between what CRAN reports and what we obtain in our tests for r-release-macos-arm64. We would appreciate your guidance on how to address this problem and, if possible, point to a reliable way to reduce package size in macOS. 
>>> 
>>> Note that our package links to RCpp and RCppArmadillo.
>>> 
>>> Our current Makevars configuration is given below
>>> ==========================================
>>> # suggestion by Dirk Eddelbuettel
>>> SHLIB_CXXLDFLAGS = -Wlto,-S -shared
>>> SHLIB_CXX11LDFLAGS = -Wlto,-S -shared
>>> SHLIB_CXX14LDFLAGS = -Wlto,-S -shared
>>> SHLIB_FCLDFLAGS = -Wlto,-S -shared
>>> SHLIB_LDFLAGS = -Wlto,-S -shared
>>> 
>>> ## suggestion by Dirk Eddelbuettel
>>> PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
>>> PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
>>> 
>>> strippedLib: $(SHLIB)
>>> if test -e "/usr/bin/strip" & test -e "/bin/uname" & [[ `uname` == "Linux" ]] ; then /usr/bin/strip --strip-debug $(SHLIB); fi
>>> 
>>> clean:
>>> rm -f $(OBJECTS)
>>> 
>>> .phony: strippedLib clean
>>> ===========================================
>>> 
>>> Any help would be much appreciated. 
>>> 
>>> Best regards
>>> Gilberto
>>> ============================
>>> Prof Dr Gilberto Camara
>>> Senior Researcher
>>> National Institute for Space Research (INPE), Brazil
>>> https://gilbertocamara.org/
>>> =============================
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From b@|@mut2 @end|ng |rom ||||no|@@edu  Fri Mar 24 09:04:25 2023
From: b@|@mut2 @end|ng |rom ||||no|@@edu (Balamuta, James Joseph)
Date: Fri, 24 Mar 2023 08:04:25 +0000
Subject: [R-SIG-Mac] New {macrtools} package to help setup compiled code
 environments on Intel and ARM-based macs
Message-ID: <DM6PR11MB4739D0464BA63FF6174CD7FCEB849@DM6PR11MB4739.namprd11.prod.outlook.com>

All,

Hope all is well.

About a month or so back, we revisited the **unofficial** macOS R compilation toolchain setup wizard with a focus on making it more maintainable without an Apple developer subscription. The result is the new {macrtools} R package. You can learn more about it here:

GitHub: https://github.com/coatless-mac/macrtools
Documentation: https://mac.thecoatlessprofessor.com/macrtools/
Video walkthrough: https://www.youtube.com/watch?v=_fckF0fefXQ

The package setups the required components for the macOS R compilation toolchain on both Intel-based and Arm-based macs with just the issuance in R of:

macrtools::macos_rtools_install()

This will attempt to install:

  *   Xcode CLI
  *   gfortran
  *   R Development binaries

We?re grateful for the early testing feedback from both Bob Rudis and Adam H Sparks related to ARM-based macs and Simon Urbanek?s help with unpacking binaries as well as the install user prompt best practices note. (Note: This is not an endorsement from Simon or CRAN. This is an **unofficial** project to support macOS users who are not familiar with command-line tools.)

We hope this improves the experience in setting up the compilation toolchain and lowers the barrier of entry for using packages like RStan and RcppArmadillo.

Best,
JJB
---
James J Balamuta, Ph.D.
Visiting Assistant Professor
Department of Statistics
Office of the CIO ? Innovation Scholar and Advisor
University of Illinois Urbana-Champaign

"The greatest value of a picture is when it forces us to notice what we never expected to see."
~ John Tukey


	[[alternative HTML version deleted]]


From du@@@@dr|@n @end|ng |rom un|buc@ro  Fri Mar 24 09:23:51 2023
From: du@@@@dr|@n @end|ng |rom un|buc@ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Fri, 24 Mar 2023 01:23:51 -0700
Subject: [R-SIG-Mac] New {macrtools} package to help setup compiled code
 environments on Intel and ARM-based macs
In-Reply-To: <DM6PR11MB4739D0464BA63FF6174CD7FCEB849@DM6PR11MB4739.namprd11.prod.outlook.com>
References: <DM6PR11MB4739D0464BA63FF6174CD7FCEB849@DM6PR11MB4739.namprd11.prod.outlook.com>
Message-ID: <CAJ=0CtAYTHAjxwfVZ2J0i0ZhFM5iS+MdQs_Y0zw2SL9XEswhNA@mail.gmail.com>

 Just went through the commands, on a new MacBook Pro with M2 Max, MacOS
Ventura 13.2.1
I already had Xcode CLI installed, and the gfortran installation went well
until it stopped at the icu binary:

Downloading binary:
https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz
...
trying URL '
https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz
'
Content type 'application/octet-stream' length 11923364 bytes (11.4 MB)
=====================
downloaded 4.9 MB

Error in utils::download.file(url, save_location, quiet = !verbose) :
  download from '
https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz'
failed
In addition: Warning messages:
1: In utils::download.file(url, save_location, quiet = !verbose) :
  downloaded length 5095370 != reported length 11923364
2: In utils::download.file(url, save_location, quiet = !verbose) :
  URL '
https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz':
Timeout of 60 seconds was reached

Not sure if it helps, but still reporting.

Best wishes,
Adrian

On 24 Mar 2023 at 10:04:25, "Balamuta, James Joseph" <balamut2 at illinois.edu>
wrote:

> All,
>
> Hope all is well.
>
> About a month or so back, we revisited the **unofficial** macOS R
> compilation toolchain setup wizard with a focus on making it more
> maintainable without an Apple developer subscription. The result is the new
> {macrtools} R package. You can learn more about it here:
>
> GitHub: https://github.com/coatless-mac/macrtools
> Documentation: https://mac.thecoatlessprofessor.com/macrtools/
> Video walkthrough: https://www.youtube.com/watch?v=_fckF0fefXQ
>
> The package setups the required components for the macOS R compilation
> toolchain on both Intel-based and Arm-based macs with just the issuance in
> R of:
>
> macrtools::macos_rtools_install()
>
> This will attempt to install:
>
>  *   Xcode CLI
>  *   gfortran
>  *   R Development binaries
>
> We?re grateful for the early testing feedback from both Bob Rudis and Adam
> H Sparks related to ARM-based macs and Simon Urbanek?s help with unpacking
> binaries as well as the install user prompt best practices note. (Note:
> This is not an endorsement from Simon or CRAN. This is an **unofficial**
> project to support macOS users who are not familiar with command-line
> tools.)
>
> We hope this improves the experience in setting up the compilation
> toolchain and lowers the barrier of entry for using packages like RStan and
> RcppArmadillo.
>
> Best,
> JJB
> ---
> James J Balamuta, Ph.D.
> Visiting Assistant Professor
> Department of Statistics
> Office of the CIO ? Innovation Scholar and Advisor
> University of Illinois Urbana-Champaign
>
> "The greatest value of a picture is when it forces us to notice what we
> never expected to see."
> ~ John Tukey
>
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr. 90-92
050663 Bucharest sector 5
Romania
https://adriandusa.eu

	[[alternative HTML version deleted]]


From b@|@mut2 @end|ng |rom ||||no|@@edu  Fri Mar 24 09:37:19 2023
From: b@|@mut2 @end|ng |rom ||||no|@@edu (Balamuta, James Joseph)
Date: Fri, 24 Mar 2023 08:37:19 +0000
Subject: [R-SIG-Mac] New {macrtools} package to help setup compiled code
 environments on Intel and ARM-based macs
In-Reply-To: <CAJ=0CtAYTHAjxwfVZ2J0i0ZhFM5iS+MdQs_Y0zw2SL9XEswhNA@mail.gmail.com>
References: <DM6PR11MB4739D0464BA63FF6174CD7FCEB849@DM6PR11MB4739.namprd11.prod.outlook.com>
 <CAJ=0CtAYTHAjxwfVZ2J0i0ZhFM5iS+MdQs_Y0zw2SL9XEswhNA@mail.gmail.com>
Message-ID: <DM6PR11MB4739020537191020A9F1BA60EB849@DM6PR11MB4739.namprd11.prod.outlook.com>

Adrian,

Thanks! Unfortunately, this is a hiccup with the download portion of the R Developer binaries [1] from the {recipes} system on CRAN [2]. It looks like the system might have been in mid-update or we overloaded it with download requests. Ewk! I?ll try to see if we can meter the requests with a .1 second delay or so.

If you re-run in a few moments the installation command:

macrtools::macos_rtools_install()

Only the development binaries from the {recipes} system will be installed. (Xcode CLI and gfortran will be skipped as they are now both installed and configured.) These binaries are mainly if you want to compiled R from source.

Best,

JJB

[1]: https://mac.r-project.org/bin/
[2]: https://github.com/R-macos/recipes

From: Adrian Du?a <dusa.adrian at unibuc.ro>
Date: Friday, March 24, 2023 at 1:23 AM
To: Balamuta, James Joseph <balamut2 at illinois.edu>
Cc: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] New {macrtools} package to help setup compiled code environments on Intel and ARM-based macs
Just went through the commands, on a new MacBook Pro with M2 Max, MacOS Ventura 13.2.1
I already had Xcode CLI installed, and the gfortran installation went well until it stopped at the icu binary:

Downloading binary:  https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz<https://urldefense.com/v3/__https:/mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgKYrgDfM$> ...
trying URL 'https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz<https://urldefense.com/v3/__https:/mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgKYrgDfM$>'
Content type 'application/octet-stream' length 11923364 bytes (11.4 MB)
=====================
downloaded 4.9 MB

Error in utils::download.file(url, save_location, quiet = !verbose) :
  download from 'https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz<https://urldefense.com/v3/__https:/mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgKYrgDfM$>' failed
In addition: Warning messages:
1: In utils::download.file(url, save_location, quiet = !verbose) :
  downloaded length 5095370 != reported length 11923364
2: In utils::download.file(url, save_location, quiet = !verbose) :
  URL 'https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz<https://urldefense.com/v3/__https:/mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgKYrgDfM$>': Timeout of 60 seconds was reached

Not sure if it helps, but still reporting.

Best wishes,
Adrian

On 24 Mar 2023 at 10:04:25, "Balamuta, James Joseph" <balamut2 at illinois.edu<mailto:balamut2 at illinois.edu>> wrote:
All,

Hope all is well.

About a month or so back, we revisited the **unofficial** macOS R compilation toolchain setup wizard with a focus on making it more maintainable without an Apple developer subscription. The result is the new {macrtools} R package. You can learn more about it here:

GitHub: https://github.com/coatless-mac/macrtools<https://urldefense.com/v3/__https:/github.com/coatless-mac/macrtools__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgIYJRnkw$>
Documentation: https://mac.thecoatlessprofessor.com/macrtools/<https://urldefense.com/v3/__https:/mac.thecoatlessprofessor.com/macrtools/__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgEHZj8Q8$>
Video walkthrough: https://www.youtube.com/watch?v=_fckF0fefXQ<https://urldefense.com/v3/__https:/www.youtube.com/watch?v=_fckF0fefXQ__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgluEy5Rk$>

The package setups the required components for the macOS R compilation toolchain on both Intel-based and Arm-based macs with just the issuance in R of:

macrtools::macos_rtools_install()

This will attempt to install:

 *   Xcode CLI
 *   gfortran
 *   R Development binaries

We?re grateful for the early testing feedback from both Bob Rudis and Adam H Sparks related to ARM-based macs and Simon Urbanek?s help with unpacking binaries as well as the install user prompt best practices note. (Note: This is not an endorsement from Simon or CRAN. This is an **unofficial** project to support macOS users who are not familiar with command-line tools.)

We hope this improves the experience in setting up the compilation toolchain and lowers the barrier of entry for using packages like RStan and RcppArmadillo.

Best,
JJB
---
James J Balamuta, Ph.D.
Visiting Assistant Professor
Department of Statistics
Office of the CIO ? Innovation Scholar and Advisor
University of Illinois Urbana-Champaign

"The greatest value of a picture is when it forces us to notice what we never expected to see."
~ John Tukey


[[alternative HTML version deleted]]
_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac<https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mg_jUCVdk$>


--
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr. 90-92
050663 Bucharest sector 5
Romania
https://adriandusa.eu<https://urldefense.com/v3/__https:/adriandusa.eu__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgjfu2SXk$>

	[[alternative HTML version deleted]]


From du@@@@dr|@n @end|ng |rom un|buc@ro  Sat Mar 25 16:59:08 2023
From: du@@@@dr|@n @end|ng |rom un|buc@ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Sat, 25 Mar 2023 08:59:08 -0700
Subject: [R-SIG-Mac] New {macrtools} package to help setup compiled code
 environments on Intel and ARM-based macs
In-Reply-To: <DM6PR11MB4739020537191020A9F1BA60EB849@DM6PR11MB4739.namprd11.prod.outlook.com>
References: <DM6PR11MB4739D0464BA63FF6174CD7FCEB849@DM6PR11MB4739.namprd11.prod.outlook.com>
 <CAJ=0CtAYTHAjxwfVZ2J0i0ZhFM5iS+MdQs_Y0zw2SL9XEswhNA@mail.gmail.com>
 <DM6PR11MB4739020537191020A9F1BA60EB849@DM6PR11MB4739.namprd11.prod.outlook.com>
Message-ID: <CAJ=0CtBYYJdc7wr65_Z6uLxgim2vdDQbyotFpv+689N2_UQqig@mail.gmail.com>

 Congratulations!
Xcode CLI, Gfortran, and R developer binaries have been installed
successfully.

I suppose everything is now alright.

Best,
Adrian

On 24 Mar 2023 at 10:37:19, "Balamuta, James Joseph" <balamut2 at illinois.edu>
wrote:

> Adrian,
>
>
>
> Thanks! Unfortunately, this is a hiccup with the download portion of the R
> Developer binaries [1] from the {recipes} system on CRAN [2]. It looks like
> the system might have been in mid-update or we overloaded it with download
> requests. Ewk! I?ll try to see if we can meter the requests with a .1
> second delay or so.
>
>
>
> If you re-run in a few moments the installation command:
>
>
>
> macrtools::macos_rtools_install()
>
>
>
> Only the development binaries from the {recipes} system will be installed.
> (Xcode CLI and gfortran will be skipped as they are now both installed and
> configured.) These binaries are mainly if you want to compiled R from
> source.
>
>
>
> Best,
>
>
>
> JJB
>
>
>
> [1]: https://mac.r-project.org/bin/
>
> [2]: https://github.com/R-macos/recipes
>
>
>
> *From: *Adrian Du?a <dusa.adrian at unibuc.ro>
> *Date: *Friday, March 24, 2023 at 1:23 AM
> *To: *Balamuta, James Joseph <balamut2 at illinois.edu>
> *Cc: *r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> *Subject: *Re: [R-SIG-Mac] New {macrtools} package to help setup compiled
> code environments on Intel and ARM-based macs
>
> Just went through the commands, on a new MacBook Pro with M2 Max, MacOS
> Ventura 13.2.1
>
> I already had Xcode CLI installed, and the gfortran installation went well
> until it stopped at the icu binary:
>
>
>
> Downloading binary:
> https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz
> <https://urldefense.com/v3/__https:/mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgKYrgDfM$>
> ...
>
> trying URL '
> https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz
> <https://urldefense.com/v3/__https:/mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgKYrgDfM$>
> '
>
> Content type 'application/octet-stream' length 11923364 bytes (11.4 MB)
>
> =====================
>
> downloaded 4.9 MB
>
>
>
> Error in utils::download.file(url, save_location, quiet = !verbose) :
>
>   download from '
> https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz
> <https://urldefense.com/v3/__https:/mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgKYrgDfM$>'
> failed
>
> In addition: Warning messages:
>
> 1: In utils::download.file(url, save_location, quiet = !verbose) :
>
>   downloaded length 5095370 != reported length 11923364
>
> 2: In utils::download.file(url, save_location, quiet = !verbose) :
>
>   URL '
> https://mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz
> <https://urldefense.com/v3/__https:/mac.R-project.org/bin/darwin20/arm64/icu-71.1-darwin.20-arm64.tar.xz__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgKYrgDfM$>':
> Timeout of 60 seconds was reached
>
>
>
> Not sure if it helps, but still reporting.
>
>
>
> Best wishes,
>
> Adrian
>
>
>
> On 24 Mar 2023 at 10:04:25, "Balamuta, James Joseph" <
> balamut2 at illinois.edu> wrote:
>
> All,
>
> Hope all is well.
>
> About a month or so back, we revisited the **unofficial** macOS R
> compilation toolchain setup wizard with a focus on making it more
> maintainable without an Apple developer subscription. The result is the new
> {macrtools} R package. You can learn more about it here:
>
> GitHub: https://github.com/coatless-mac/macrtools
> <https://urldefense.com/v3/__https:/github.com/coatless-mac/macrtools__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgIYJRnkw$>
> Documentation: https://mac.thecoatlessprofessor.com/macrtools/
> <https://urldefense.com/v3/__https:/mac.thecoatlessprofessor.com/macrtools/__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgEHZj8Q8$>
> Video walkthrough: https://www.youtube.com/watch?v=_fckF0fefXQ
> <https://urldefense.com/v3/__https:/www.youtube.com/watch?v=_fckF0fefXQ__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgluEy5Rk$>
>
> The package setups the required components for the macOS R compilation
> toolchain on both Intel-based and Arm-based macs with just the issuance in
> R of:
>
> macrtools::macos_rtools_install()
>
> This will attempt to install:
>
>  *   Xcode CLI
>  *   gfortran
>  *   R Development binaries
>
> We?re grateful for the early testing feedback from both Bob Rudis and Adam
> H Sparks related to ARM-based macs and Simon Urbanek?s help with unpacking
> binaries as well as the install user prompt best practices note. (Note:
> This is not an endorsement from Simon or CRAN. This is an **unofficial**
> project to support macOS users who are not familiar with command-line
> tools.)
>
> We hope this improves the experience in setting up the compilation
> toolchain and lowers the barrier of entry for using packages like RStan and
> RcppArmadillo.
>
> Best,
> JJB
> ---
> James J Balamuta, Ph.D.
> Visiting Assistant Professor
> Department of Statistics
> Office of the CIO ? Innovation Scholar and Advisor
> University of Illinois Urbana-Champaign
>
> "The greatest value of a picture is when it forces us to notice what we
> never expected to see."
> ~ John Tukey
>
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> <https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mg_jUCVdk$>
>
>
>
>
> --
>
> Adrian Dusa
> University of Bucharest
> Romanian Social Data Archive
> Soseaua Panduri nr. 90-92
> 050663 Bucharest sector 5
> Romania
>
> https://adriandusa.eu
> <https://urldefense.com/v3/__https:/adriandusa.eu__;!!DZ3fjg!9LMgelsxLau-BxmqYfTzEgA5QxjuoqHFp02eITeYGSW7nC7z5UaC3sVUyHrNEViohimWHrssIYGDOTdLx7mgjfu2SXk$>
>


-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr. 90-92
050663 Bucharest sector 5
Romania
https://adriandusa.eu

	[[alternative HTML version deleted]]


From nrconr@d @end|ng |rom ucd@v|@@edu  Mon Mar 27 01:18:26 2023
From: nrconr@d @end|ng |rom ucd@v|@@edu (Nicolas Conrad)
Date: Sun, 26 Mar 2023 16:18:26 -0700
Subject: [R-SIG-Mac] R installation error
Message-ID: <CAJM+MTcWFJkzr54Ct6Jn5K1FT7V80RhPSZjR4ZK0-+na2DDzAQ@mail.gmail.com>

Hello,

I am trying to install R on my Mac (Intel chip) and I keep getting this
error message:

The install failed. (The Installer encountered an error that caused the
installation to fail. Contact the software manufacturer for assistance. An
unexpected error occurred while moving files to the final destination.)


I was wondering if you knew anything I could try to fix this error.


Thanks,

Nicolas

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Mar 27 09:11:50 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 27 Mar 2023 20:11:50 +1300
Subject: [R-SIG-Mac] R installation error
In-Reply-To: <CAJM+MTcWFJkzr54Ct6Jn5K1FT7V80RhPSZjR4ZK0-+na2DDzAQ@mail.gmail.com>
References: <CAJM+MTcWFJkzr54Ct6Jn5K1FT7V80RhPSZjR4ZK0-+na2DDzAQ@mail.gmail.com>
Message-ID: <8AB75B3B-7EC0-4B58-925E-38645348511A@R-project.org>

Nicolas,

we can't tell unless you post the error log and you didn't even tell us your macOS version, but in recent versions security settings prevent the installation from the Downloads folder, so make sure you move it away from there to some safe location (home, Desktop or /tmp). Otherwise, supply details and post the log.

Cheers,
Simon
 

> 
> On Mar 27, 2023, at 12:18 PM, Nicolas Conrad via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Hello,
> 
> I am trying to install R on my Mac (Intel chip) and I keep getting this
> error message:
> 
> The install failed. (The Installer encountered an error that caused the
> installation to fail. Contact the software manufacturer for assistance. An
> unexpected error occurred while moving files to the final destination.)
> 
> 
> I was wondering if you knew anything I could try to fix this error.
> 
> 
> Thanks,
> 
> Nicolas
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


