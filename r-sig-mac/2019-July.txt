From @|ex@nderw|en2k @end|ng |rom gm@||@com  Sun Jul  7 05:22:45 2019
From: @|ex@nderw|en2k @end|ng |rom gm@||@com (Alex)
Date: Sat, 6 Jul 2019 23:22:45 -0400
Subject: [R-SIG-Mac] Memory Exhausted
Message-ID: <CAEDv6u5SO3bgZ9iDkFYm2hg5QYDkKkEM47wfNLsfwgj1sLZscg@mail.gmail.com>

Hello all,

I am new in R studio. I have a big data to run using RStudio. I keep
getting "Error: vector memory exhausted (limit reached?)?  I am using MAC
version"10.13.6 (17G6030)?.

I am using the Rstudion ?
R version 3.5.1 (2018-07-02)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.6?

Any help would be greatly appreciated.

Best,
Alex

	[[alternative HTML version deleted]]


From m@r|o@p|@@ @end|ng |rom gm@||@com  Sun Jul  7 09:43:57 2019
From: m@r|o@p|@@ @end|ng |rom gm@||@com (Mario Pisa)
Date: Sun, 7 Jul 2019 09:43:57 +0200
Subject: [R-SIG-Mac] Memory Exhausted
In-Reply-To: <CAEDv6u5SO3bgZ9iDkFYm2hg5QYDkKkEM47wfNLsfwgj1sLZscg@mail.gmail.com>
References: <CAEDv6u5SO3bgZ9iDkFYm2hg5QYDkKkEM47wfNLsfwgj1sLZscg@mail.gmail.com>
Message-ID: <444878AC-B1D7-456A-9501-F2F428D1D3D7@gmail.com>

What?s file type and size are you using?

How are you reading the data file?

If you are working with xlsx, the openxlsx package could be useful.

Regards,
????-
Mario

> El 7 jul 2019, a las 5:22, Alex <alexanderwien2k at gmail.com> escribi?:
> 
> Hello all,
> 
> I am new in R studio. I have a big data to run using RStudio. I keep
> getting "Error: vector memory exhausted (limit reached?)?  I am using MAC
> version"10.13.6 (17G6030)?.
> 
> I am using the Rstudion ?
> R version 3.5.1 (2018-07-02)
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> Running under: macOS High Sierra 10.13.6?
> 
> Any help would be greatly appreciated.
> 
> Best,
> Alex
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ken @end|ng |rom kjbe@th@com@@u  Sun Jul  7 09:49:51 2019
From: ken @end|ng |rom kjbe@th@com@@u (Ken Beath)
Date: Sun, 7 Jul 2019 17:49:51 +1000
Subject: [R-SIG-Mac] Memory Exhausted
In-Reply-To: <CAEDv6u5SO3bgZ9iDkFYm2hg5QYDkKkEM47wfNLsfwgj1sLZscg@mail.gmail.com>
References: <CAEDv6u5SO3bgZ9iDkFYm2hg5QYDkKkEM47wfNLsfwgj1sLZscg@mail.gmail.com>
Message-ID: <154EE3DB-AD82-4DBB-AE3B-DDD0DD610458@kjbeath.com.au>

Try this https://stackoverflow.com/questions/51295402/r-on-macos-error-vector-memory-exhausted-limit-reached and the links.

Ken


> On 7 Jul 2019, at 1:22 pm, Alex <alexanderwien2k at gmail.com> wrote:
> 
> Hello all,
> 
> I am new in R studio. I have a big data to run using RStudio. I keep
> getting "Error: vector memory exhausted (limit reached?)?  I am using MAC
> version"10.13.6 (17G6030)?.
> 
> I am using the Rstudion ?
> R version 3.5.1 (2018-07-02)
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> Running under: macOS High Sierra 10.13.6?
> 
> Any help would be greatly appreciated.
> 
> Best,
> Alex
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From @@ch@@dhi@i m@iii@g oii bti@ter@et@com  Mon Jul  8 10:21:08 2019
From: @@ch@@dhi@i m@iii@g oii bti@ter@et@com (@@ch@@dhi@i m@iii@g oii bti@ter@et@com)
Date: Mon, 8 Jul 2019 09:21:08 +0100 (BST)
Subject: [R-SIG-Mac] Source versions of packages not updating R version 3.6.1
Message-ID: <6f67dcd4.178.16bd0ac1bcc.Webtop.43@btinternet.com>


Hi,

I am having difficulties with updating source versions of packages in R. 
I am on a MacBook Pro, MacOS Mojave 10.14.5.

I updated to gcc 9.1.0, via:
brew update
brew upgrade
brew info gcc
brew install gcc
brew cleanup

brew info gcc gives the following:
gcc: stable 9.1.0 (bottled), HEAD
GNU compiler collection
https://gcc.gnu.org/
/usr/local/Cellar/gcc/9.1.0 (1,461 files, 287MB) *
   Poured from bottle on 2019-05-31 at 20:31:20
From: 
https://github.com/Homebrew/homebrew-core/blob/master/Formula/gcc.rb
==> Dependencies
Required: gmp ?, isl ?, libmpc ?, mpfr ?
==> Options
--HEAD
	Install HEAD version
==> Analytics
install: 59,839 (30 days), 273,269 (90 days), 874,830 (365 days)
install_on_request: 26,639 (30 days), 126,289 (90 days), 419,789 (365 
days)
build_error: 0 (30 days)


gcc --version gives the following:
Apple clang version 11.0.0 (clang-1100.0.20.17)
Target: x86_64-apple-darwin18.6.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin


For R version 3.6.0, I did
update.packages()
after replying Y to install from sources, R was 'pointing' at 
/usr/local/Cellar/gcc/8.2.0/bin/gcc-8, and the source versions were 
failing to update.

I have recently updated to R version 3.6.1, and after Googling have 
manually updated the ~/.R/MakeVars file (which had 8.2.0's and g++-8, in 
the appropriate places) to:
CC=/usr/local/Cellar/gcc/9.1.0/bin/gcc-9CXX=/usr/local/Cellar/gcc/9.1.0/bin/g++-9CXX11=/usr/local/Cellar/gcc/9.1.0/bin/g++-9CXX14=/usr/local/Cellar/gcc/9.1.0/bin/g++-9cxx17=/usr/local/cellar/gcc/9.1.0/bin/g++-9cxx1X=/usr/local/cellar/gcc/9.1.0/bin/g++-9LDFLAGS=-L/usr/local/Cellar/gcc/9.1.0/lib


If now do
update.packages()
the source versions still don't update.

For example, for package vctrs I get:
Do you want to install from sources the package which needs compilation? 
(Yes/no/cancel) yinstalling the source package ?vctrs?trying URL 
'https://cloud.r-project.org/src/contrib/vctrs_0.2.0.tar.gz'Content type 
'application/x-gzip' length 668258 bytes (652 
KB)==================================================downloaded 652 KB* 
installing *source* package ?vctrs? ...** package ?vctrs? successfully 
unpacked and MD5 sums checked** using staged installation** 
libs/usr/local/Cellar/gcc/9.1.0/bin/gcc-9 
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG 
-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk 
-I/usr/local/include  -fPIC  -Wall -g -O2  -c arg-counter.c -o 
arg-counter.oIn file included from 
/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/stdlib.h:61, 
from /Library/Frameworks/R.framework/Resources/include/R.h:55, 
from vctrs.h:2,                 from 
arg-counter.c:1:/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/Availability.h:257:22: 
error: missing binary operator before token "("  257 |     #if 
__has_builtin(__is_target_arch)      |                      ^make: *** 
[arg-counter.o] Error 1ERROR: compilation failed for package ?vctrs?* 
removing 
?/Library/Frameworks/R.framework/Versions/3.6/Resources/library/vctrs?* 
restoring previous 
?/Library/Frameworks/R.framework/Versions/3.6/Resources/library/vctrs?The 
downloaded source packages are in	 
?/private/var/folders/r3/40n9b5sd0s789hw9h_vgt6500000gn/T/Rtmp3P2lwy/downloaded_packages?Warning 
message:In install.packages(update[instlib == l, "Package"], l, repos = 
repos,  :  installation of package ?vctrs? had non-zero exit status



Please advise,
Many thanks,
Amarjit


	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Jul  8 13:09:26 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 8 Jul 2019 07:09:26 -0400
Subject: [R-SIG-Mac] Source versions of packages not updating R version
 3.6.1
In-Reply-To: <6f67dcd4.178.16bd0ac1bcc.Webtop.43@btinternet.com>
References: <6f67dcd4.178.16bd0ac1bcc.Webtop.43@btinternet.com>
Message-ID: <644F1DD8-3206-4F5F-98FF-8E84A27A2AC0@R-project.org>

It looks like you're broken compilers. Instead of googling incorrect suggestions, please consider reading the documentation. If you use R from CRAN please do NOT use tools from homebrew, download clang7 from the CRAN website instead and prepend it to the PATH. Also do remove ~/.R/Makevars - it is not necessary unless you have custom needs and know what you're doing.

Cheers,
Simon


> On Jul 8, 2019, at 04:21, a.chandhial--- via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> 
> Hi,
> 
> I am having difficulties with updating source versions of packages in R. 
> I am on a MacBook Pro, MacOS Mojave 10.14.5.
> 
> I updated to gcc 9.1.0, via:
> brew update
> brew upgrade
> brew info gcc
> brew install gcc
> brew cleanup
> 
> brew info gcc gives the following:
> gcc: stable 9.1.0 (bottled), HEAD
> GNU compiler collection
> https://gcc.gnu.org/
> /usr/local/Cellar/gcc/9.1.0 (1,461 files, 287MB) *
>   Poured from bottle on 2019-05-31 at 20:31:20
> From: 
> https://github.com/Homebrew/homebrew-core/blob/master/Formula/gcc.rb
> ==> Dependencies
> Required: gmp ?, isl ?, libmpc ?, mpfr ?
> ==> Options
> --HEAD
> 	Install HEAD version
> ==> Analytics
> install: 59,839 (30 days), 273,269 (90 days), 874,830 (365 days)
> install_on_request: 26,639 (30 days), 126,289 (90 days), 419,789 (365 
> days)
> build_error: 0 (30 days)
> 
> 
> gcc --version gives the following:
> Apple clang version 11.0.0 (clang-1100.0.20.17)
> Target: x86_64-apple-darwin18.6.0
> Thread model: posix
> InstalledDir: /Library/Developer/CommandLineTools/usr/bin
> 
> 
> For R version 3.6.0, I did
> update.packages()
> after replying Y to install from sources, R was 'pointing' at 
> /usr/local/Cellar/gcc/8.2.0/bin/gcc-8, and the source versions were 
> failing to update.
> 
> I have recently updated to R version 3.6.1, and after Googling have 
> manually updated the ~/.R/MakeVars file (which had 8.2.0's and g++-8, in 
> the appropriate places) to:
> CC=/usr/local/Cellar/gcc/9.1.0/bin/gcc-9CXX=/usr/local/Cellar/gcc/9.1.0/bin/g++-9CXX11=/usr/local/Cellar/gcc/9.1.0/bin/g++-9CXX14=/usr/local/Cellar/gcc/9.1.0/bin/g++-9cxx17=/usr/local/cellar/gcc/9.1.0/bin/g++-9cxx1X=/usr/local/cellar/gcc/9.1.0/bin/g++-9LDFLAGS=-L/usr/local/Cellar/gcc/9.1.0/lib
> 
> 
> If now do
> update.packages()
> the source versions still don't update.
> 
> For example, for package vctrs I get:
> Do you want to install from sources the package which needs compilation? 
> (Yes/no/cancel) yinstalling the source package ?vctrs?trying URL 
> 'https://cloud.r-project.org/src/contrib/vctrs_0.2.0.tar.gz'Content type 
> 'application/x-gzip' length 668258 bytes (652 
> KB)==================================================downloaded 652 KB* 
> installing *source* package ?vctrs? ...** package ?vctrs? successfully 
> unpacked and MD5 sums checked** using staged installation** 
> libs/usr/local/Cellar/gcc/9.1.0/bin/gcc-9 
> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG 
> -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk 
> -I/usr/local/include  -fPIC  -Wall -g -O2  -c arg-counter.c -o 
> arg-counter.oIn file included from 
> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/stdlib.h:61, 
> from /Library/Frameworks/R.framework/Resources/include/R.h:55, 
> from vctrs.h:2,                 from 
> arg-counter.c:1:/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/Availability.h:257:22: 
> error: missing binary operator before token "("  257 |     #if 
> __has_builtin(__is_target_arch)      |                      ^make: *** 
> [arg-counter.o] Error 1ERROR: compilation failed for package ?vctrs?* 
> removing 
> ?/Library/Frameworks/R.framework/Versions/3.6/Resources/library/vctrs?* 
> restoring previous 
> ?/Library/Frameworks/R.framework/Versions/3.6/Resources/library/vctrs?The 
> downloaded source packages are in	 
> ?/private/var/folders/r3/40n9b5sd0s789hw9h_vgt6500000gn/T/Rtmp3P2lwy/downloaded_packages?Warning 
> message:In install.packages(update[instlib == l, "Package"], l, repos = 
> repos,  :  installation of package ?vctrs? had non-zero exit status
> 
> 
> 
> Please advise,
> Many thanks,
> Amarjit
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From br@d|eyjeck @end|ng |rom gm@||@com  Mon Jul  8 22:23:00 2019
From: br@d|eyjeck @end|ng |rom gm@||@com (Brad Eck)
Date: Mon, 8 Jul 2019 21:23:00 +0100
Subject: [R-SIG-Mac] finding R CMD
Message-ID: <CALECgPYLowHT0xn2=toM_sBG0MWPA5G_DHDbmyKmfPkRHSbFwg@mail.gmail.com>

Dear list -

I've recently installed R 3.6.1 from CRAN.  All was well until I wanted to
install a source package from a tarball using   $R CMD INSTALL.  This gives
the following error:

Bradleys-MacBook-Pro:~ brad$ R CMD
/Library/Frameworks/R.framework/Resources/bin/Rcmd: line 62:
/Library/Frameworks/R.framework/Resources/bin/: is a directory
/Library/Frameworks/R.framework/Resources/bin/Rcmd: line 62: exec:
/Library/Frameworks/R.framework/Resources/bin/: cannot execute: Undefined
error: 0

$ R --version gives
Bradleys-MacBook-Pro:~ brad$ R --version
R version 3.6.1 (2019-07-05) -- "Action of the Toes"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin15.6.0 (64-bit)

I'm running macOS 10.14.5

Any help appreciated!

Brad

	[[alternative HTML version deleted]]


From h@n@on @end|ng |rom dep@uw@edu  Wed Jul 10 13:27:05 2019
From: h@n@on @end|ng |rom dep@uw@edu (Bryan Hanson)
Date: Wed, 10 Jul 2019 07:27:05 -0400
Subject: [R-SIG-Mac] finding R CMD
In-Reply-To: <CALECgPYLowHT0xn2=toM_sBG0MWPA5G_DHDbmyKmfPkRHSbFwg@mail.gmail.com>
References: <CALECgPYLowHT0xn2=toM_sBG0MWPA5G_DHDbmyKmfPkRHSbFwg@mail.gmail.com>
Message-ID: <70331B5E-A014-41CD-B5AB-7B0DC27ABD15@depauw.edu>

Brad, I think you left off ?INSTALL pkg.tar.gz? so it should be

> R CMD INSTALL pkg.tar.gz

where pkg.tar.gz is the full name of the tarball.

Bryan

> On Jul 8, 2019, at 4:23 PM, Brad Eck <bradleyjeck at gmail.com> wrote:
> 
> Dear list -
> 
> I've recently installed R 3.6.1 from CRAN.  All was well until I wanted to
> install a source package from a tarball using   $R CMD INSTALL.  This gives
> the following error:
> 
> Bradleys-MacBook-Pro:~ brad$ R CMD
> /Library/Frameworks/R.framework/Resources/bin/Rcmd: line 62:
> /Library/Frameworks/R.framework/Resources/bin/: is a directory
> /Library/Frameworks/R.framework/Resources/bin/Rcmd: line 62: exec:
> /Library/Frameworks/R.framework/Resources/bin/: cannot execute: Undefined
> error: 0
> 
> $ R --version gives
> Bradleys-MacBook-Pro:~ brad$ R --version
> R version 3.6.1 (2019-07-05) -- "Action of the Toes"
> Copyright (C) 2019 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> 
> I'm running macOS 10.14.5
> 
> Any help appreciated!
> 
> Brad
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Sun Jul 14 19:01:37 2019
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Sun, 14 Jul 2019 12:01:37 -0500
Subject: [R-SIG-Mac] point size in svg
In-Reply-To: <D42C8210-29BD-4602-8F68-1B898A299A6C@gmail.com>
References: <2044e902-5440-678a-d845-d2d521ca428a@prodsyse.com>
 <63168c7a-07b5-3ee5-281e-1274a8b43f0f@comcast.net>
 <c864cccc-1049-d19d-51fe-da1ce8a5bd84@prodsyse.com>
 <BC6D68BF-13B5-4900-9EDA-FF99305587F9@comcast.net>
 <d76decc1-deeb-8812-084e-78a73d84222c@prodsyse.com>
 <D42C8210-29BD-4602-8F68-1B898A299A6C@gmail.com>
Message-ID: <3f90ad24-bd4a-23bb-f13c-179550e2d65f@prodsyse.com>

Hi, Peter et al.:


 ????? Thanks, Peter, for the information that it works for you.


 ????? What do you suggest I do to try to correct a font misconfiguration?


 ????? Sadly the problem did not disappear when I upgraded to 3.6.1; see 
sessionInfo below.


 ????? Thanks,
 ????? Spencer


 > sessionInfo()
R version 3.6.1 (2019-07-05)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Mojave 10.14.5

Matrix products: default
BLAS: 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: 
/Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets? methods
[7] base

loaded via a namespace (and not attached):
[1] compiler_3.6.1 tools_3.6.1
 >

On 2019-06-24 04:10, peter dalgaard wrote:
> Works fine for me on 10.14.5, both with CRAN-supplied 3.6.0 and locally compiled  3.6.0 Patched (2019-06-23 r76734).
>
> I suspect that you might have a font misconfiguration of sorts on your Mojave machine.
>
> -pd
>
>> On 24 Jun 2019, at 09:25 , Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>
>> ?? Thanks to David Winsemius for his reply.? His attachment came
>> through and displayed consistent with the R documentation.? Thus, the
>> cex.axis and cex arguments work fine with R 3.5.1 (2018-07-02) and
>> "Feather Spray" on OS X 10.11.6, but they don't work properly with the
>> current version of R under the current version of macOS.
>>
>>
>> ?? Spencer
>>
>>
>> On 2019-06-24 00:59, David Winsemius wrote:
>>>> On Jun 23, 2019, at 10:04 PM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>>>
>>>> Hello, All:
>>>>
>>>>
>>>>        I'm unable to control font size in plots created by "svg" in R 3.6.0 on macOS Mojave 10.14.5.  Consider the following:
>>>>
>>>>
>>>> svg('cex-svg.svg')
>>>> cex. <- 5
>>>> plot(1:2, cex.axis=cex.)
>>>> text(1:2, 1:2, c('as', 'DF'),
>>>>            cex=cex.)
>>>> dev.off()
>>>>
>>>>
>>>>        When I run this in R 3.5.2 under Windows 7, it works fine.  In R 3.6.0 under macOS 10.14.5, I get tiny fonts.  Changing "cex." has no impact on the result.  A question about this to R-Devel generated replies from Peter Langfelder and David Winsemius, who noted that it worked fine under Ubuntu 18.04 (supposedly with R 3.15.2 -- probably R 3.5.2, but I'm not sure).
>>> You should be sure.
>>>
>>>>   I experimented with the width, height, pointsize and family arguments for "svg", without solving this problem.
>>> With R version 3.5.1 (2018-07-02) -- "Feather Spray" on OS X 10.11.6 I am unable to reproduce. My Mac hardware is considered well past (Apple) end of life despite its functionality, so I cannot upgrade my OS. I'm attaching the file that is the result so Spencer can view it, although I suspect it will be scrubbed by the mail-server.
>>>
>>>
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From tom@e|||ott @end|ng |rom @uck|@nd@@c@nz  Mon Jul 22 04:47:42 2019
From: tom@e|||ott @end|ng |rom @uck|@nd@@c@nz (Tom Elliott)
Date: Mon, 22 Jul 2019 02:47:42 +0000
Subject: [R-SIG-Mac] RGtk2 segfaulting on macOS
Message-ID: <1563763662680.34558@auckland.ac.nz>

Hi,


The macOS binaries were recently built for macOS, however they're still not quite right. Runing the following ...


library(RGtk2)

gtkHScaleNewWithRange(0, 5, 1)


... leads to a segfault ...


 *** caught segfault ***
address 0x0, cause 'memory not mapped'

Traceback:
 1: .RGtkCall("S_gtk_hscale_new_with_range", min, max, step, PACKAGE = "RGtk2")
 2: gtkHScaleNewWithRange(0, 5, 1)


It's preventing some other packages (notably gWidgets2RGtk2) from building on CRAN, since it's tests are running into the same segfault when running tests (gslider calls gtkHScaleNewWithRange):
https://cran.r-project.org/web/checks/check_results_gWidgets2RGtk2.html



Thanks,


Tom.

?

	[[alternative HTML version deleted]]


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Mon Jul 22 07:14:27 2019
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Mon, 22 Jul 2019 06:14:27 +0100
Subject: [R-SIG-Mac] RGtk2 segfaulting on macOS
In-Reply-To: <1563763662680.34558@auckland.ac.nz>
References: <1563763662680.34558@auckland.ac.nz>
Message-ID: <24f1060e-54c5-5fbe-15da-48a4c02cdbf1@stats.ox.ac.uk>

On 22/07/2019 03:47, Tom Elliott wrote:
> Hi,
> 
> 
> The macOS binaries were recently built for macOS, however they're still not quite right. Runing the following ...

It is likely that the segfault is in the Gtk2 libraries: which OS 
version and which Gtk2 installation?

I have not managed to get Gtk2 to work cleanly on macOS for a long time: 
the Gtk2 libs at https://mac.r-project.org/libs/ are > 6.5 years old. 
Some of the packages pass their tests some of the time: currently 
MixSIAR, Ricetl, fit4NM, gWidgets2RGtk2 and plfMA segfault on my High 
Sierra box.

> library(RGtk2)
> 
> gtkHScaleNewWithRange(0, 5, 1)
> 
> 
> ... leads to a segfault ...
> 
> 
>   *** caught segfault ***
> address 0x0, cause 'memory not mapped'
> 
> Traceback:
>   1: .RGtkCall("S_gtk_hscale_new_with_range", min, max, step, PACKAGE = "RGtk2")
>   2: gtkHScaleNewWithRange(0, 5, 1)
> 
> 
> It's preventing some other packages (notably gWidgets2RGtk2) from building on CRAN, since it's tests are running into the same segfault when running tests (gslider calls gtkHScaleNewWithRange):
> https://cran.r-project.org/web/checks/check_results_gWidgets2RGtk2.html


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Jul 23 18:47:45 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 23 Jul 2019 09:47:45 -0700
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
Message-ID: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>

If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:

> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg

-Roy

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Jul 23 20:17:26 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 23 Jul 2019 14:17:26 -0400
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
Message-ID: <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>

Roy,

that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
which is what the CRAN build uses. FWIW you can always check the current flags at
https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
 
If the above doesn't address the issue you're seeing, please provide details.

Thanks,
Simon


> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
> 
>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
> 
> -Roy
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Jul 23 20:50:31 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 23 Jul 2019 11:50:31 -0700
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
Message-ID: <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>

Hi Simon:

 I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.

HTH,

Roy

PS - not trying to build R from source,  just source updates of some packages

> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Roy,
> 
> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
> which is what the CRAN build uses. FWIW you can always check the current flags at
> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
> 
> If the above doesn't address the issue you're seeing, please provide details.
> 
> Thanks,
> Simon
> 
> 
>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>> 
>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>> 
>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>> 
>> -Roy
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Jul 24 06:33:26 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 24 Jul 2019 00:33:26 -0400
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
Message-ID: <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>

Roy,

thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
 /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
sudo xcode-select --install
hopefully.

Thanks,
Simon



> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Hi Simon:
> 
> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
> 
> HTH,
> 
> Roy
> 
> PS - not trying to build R from source,  just source updates of some packages
> 
>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Roy,
>> 
>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>> which is what the CRAN build uses. FWIW you can always check the current flags at
>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>> 
>> If the above doesn't address the issue you're seeing, please provide details.
>> 
>> Thanks,
>> Simon
>> 
>> 
>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>> 
>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>> 
>>> -Roy
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected" 
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Jul 24 16:46:48 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 24 Jul 2019 07:46:48 -0700
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
 <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
Message-ID: <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>

Hi Simon:

> ls /Library/Developer/CommandLineTools/SDKs
> MacOSX.sdk	MacOSX10.14.sdk

Also when  have done:

> sudo xcode-select --install

I often get a message to install through App store (the command line tools).  I am not certain exactly what macOS_SDK_headers_for_macOS_10.14.pkg installs nor where,  but I as I said I went from being able to install packages from source to not being able to because headers couldn't be found to be able to.  And I have a feeling others will run into the same problem.

Thanks!

-Roy


> On Jul 23, 2019, at 9:33 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Roy,
> 
> thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
> I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
> sudo xcode-select --install
> hopefully.
> 
> Thanks,
> Simon
> 
> 
> 
>> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>> 
>> Hi Simon:
>> 
>> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
>> 
>> HTH,
>> 
>> Roy
>> 
>> PS - not trying to build R from source,  just source updates of some packages
>> 
>>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>> 
>>> Roy,
>>> 
>>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>>> which is what the CRAN build uses. FWIW you can always check the current flags at
>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>>> 
>>> If the above doesn't address the issue you're seeing, please provide details.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>> 
>>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>>> 
>>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>> 
>>>> -Roy
>>>> 
>>>> **********************
>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>> **********************
>>>> Roy Mendelssohn
>>>> Supervisory Operations Research Analyst
>>>> NOAA/NMFS
>>>> Environmental Research Division
>>>> Southwest Fisheries Science Center
>>>> ***Note new street address***
>>>> 110 McAllister Way
>>>> Santa Cruz, CA 95060
>>>> Phone: (831)-420-3666
>>>> Fax: (831) 420-3980
>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>> 
>>>> "Old age and treachery will overcome youth and skill."
>>>> "From those who have been given much, much will be expected" 
>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From h@n@on @end|ng |rom dep@uw@edu  Wed Jul 24 16:54:33 2019
From: h@n@on @end|ng |rom dep@uw@edu (Bryan Hanson)
Date: Wed, 24 Jul 2019 10:54:33 -0400
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
 <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
 <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
Message-ID: <B0769568-07B3-4694-A601-816486BE3ECC@depauw.edu>

If it helps troubleshoot, I updated more or less on the same timeline as Roy did and had the same problems Roy had, and Roy?s most recent response below gives the same response on my Mac.  Roy?s fix * fixed things for me.  Bryan

* open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg

> On Jul 24, 2019, at 10:46 AM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Hi Simon:
> 
>> ls /Library/Developer/CommandLineTools/SDKs
>> MacOSX.sdk	MacOSX10.14.sdk
> 
> Also when  have done:
> 
>> sudo xcode-select --install
> 
> I often get a message to install through App store (the command line tools).  I am not certain exactly what macOS_SDK_headers_for_macOS_10.14.pkg installs nor where,  but I as I said I went from being able to install packages from source to not being able to because headers couldn't be found to be able to.  And I have a feeling others will run into the same problem.
> 
> Thanks!
> 
> -Roy
> 
> 
>> On Jul 23, 2019, at 9:33 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Roy,
>> 
>> thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
>> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>> I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
>> sudo xcode-select --install
>> hopefully.
>> 
>> Thanks,
>> Simon
>> 
>> 
>> 
>>> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> Hi Simon:
>>> 
>>> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
>>> 
>>> HTH,
>>> 
>>> Roy
>>> 
>>> PS - not trying to build R from source,  just source updates of some packages
>>> 
>>>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>> 
>>>> Roy,
>>>> 
>>>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>>>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>>>> which is what the CRAN build uses. FWIW you can always check the current flags at
>>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>>>> 
>>>> If the above doesn't address the issue you're seeing, please provide details.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>> 
>>>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>>>> 
>>>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>>> 
>>>>> -Roy
>>>>> 
>>>>> **********************
>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>> **********************
>>>>> Roy Mendelssohn
>>>>> Supervisory Operations Research Analyst
>>>>> NOAA/NMFS
>>>>> Environmental Research Division
>>>>> Southwest Fisheries Science Center
>>>>> ***Note new street address***
>>>>> 110 McAllister Way
>>>>> Santa Cruz, CA 95060
>>>>> Phone: (831)-420-3666
>>>>> Fax: (831) 420-3980
>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>> 
>>>>> "Old age and treachery will overcome youth and skill."
>>>>> "From those who have been given much, much will be expected" 
>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected" 
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Jul 24 16:52:22 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 24 Jul 2019 10:52:22 -0400
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
 <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
 <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
Message-ID: <E397871C-743C-4227-A633-E570A52A47F5@R-project.org>

Ah, I think I have an idea - is it possible that you were using an older version of R? That would explain.

Cheers,
Simon


> On Jul 24, 2019, at 10:46 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> Hi Simon:
> 
>> ls /Library/Developer/CommandLineTools/SDKs
>> MacOSX.sdk	MacOSX10.14.sdk
> 
> Also when  have done:
> 
>> sudo xcode-select --install
> 
> I often get a message to install through App store (the command line tools).  I am not certain exactly what macOS_SDK_headers_for_macOS_10.14.pkg installs nor where,  but I as I said I went from being able to install packages from source to not being able to because headers couldn't be found to be able to.  And I have a feeling others will run into the same problem.
> 
> Thanks!
> 
> -Roy
> 
> 
>> On Jul 23, 2019, at 9:33 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Roy,
>> 
>> thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
>> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>> I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
>> sudo xcode-select --install
>> hopefully.
>> 
>> Thanks,
>> Simon
>> 
>> 
>> 
>>> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> Hi Simon:
>>> 
>>> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
>>> 
>>> HTH,
>>> 
>>> Roy
>>> 
>>> PS - not trying to build R from source,  just source updates of some packages
>>> 
>>>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>> 
>>>> Roy,
>>>> 
>>>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>>>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>>>> which is what the CRAN build uses. FWIW you can always check the current flags at
>>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>>>> 
>>>> If the above doesn't address the issue you're seeing, please provide details.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>> 
>>>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>>>> 
>>>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>>> 
>>>>> -Roy
>>>>> 
>>>>> **********************
>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>> **********************
>>>>> Roy Mendelssohn
>>>>> Supervisory Operations Research Analyst
>>>>> NOAA/NMFS
>>>>> Environmental Research Division
>>>>> Southwest Fisheries Science Center
>>>>> ***Note new street address***
>>>>> 110 McAllister Way
>>>>> Santa Cruz, CA 95060
>>>>> Phone: (831)-420-3666
>>>>> Fax: (831) 420-3980
>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>> 
>>>>> "Old age and treachery will overcome youth and skill."
>>>>> "From those who have been given much, much will be expected" 
>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected" 
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Jul 24 16:57:14 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 24 Jul 2019 07:57:14 -0700
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <B0769568-07B3-4694-A601-816486BE3ECC@depauw.edu>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
 <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
 <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
 <B0769568-07B3-4694-A601-816486BE3ECC@depauw.edu>
Message-ID: <8DFC1E71-7B56-4CEE-B480-5FE0DED7054E@noaa.gov>

Thanks Bryan.  Given my age,  I always have to wonder if I am hallucinating or did something careless.  I want to emphasize that I don't think it is an R issue,  it really does look like when installing the new Xcode,  the headers got wiped out. Since both a new Xcode and a new Command Line Tools were installed,  I don't know which did the damage.

-Roy


> On Jul 24, 2019, at 7:54 AM, Bryan Hanson <hanson at depauw.edu> wrote:
> 
> If it helps troubleshoot, I updated more or less on the same timeline as Roy did and had the same problems Roy had, and Roy?s most recent response below gives the same response on my Mac.  Roy?s fix * fixed things for me.  Bryan
> 
> * open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
> 
>> On Jul 24, 2019, at 10:46 AM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>> 
>> Hi Simon:
>> 
>>> ls /Library/Developer/CommandLineTools/SDKs
>>> MacOSX.sdk	MacOSX10.14.sdk
>> 
>> Also when  have done:
>> 
>>> sudo xcode-select --install
>> 
>> I often get a message to install through App store (the command line tools).  I am not certain exactly what macOS_SDK_headers_for_macOS_10.14.pkg installs nor where,  but I as I said I went from being able to install packages from source to not being able to because headers couldn't be found to be able to.  And I have a feeling others will run into the same problem.
>> 
>> Thanks!
>> 
>> -Roy
>> 
>> 
>>> On Jul 23, 2019, at 9:33 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>> 
>>> Roy,
>>> 
>>> thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
>>> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>>> I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
>>> sudo xcode-select --install
>>> hopefully.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>> 
>>>> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>> 
>>>> Hi Simon:
>>>> 
>>>> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
>>>> 
>>>> HTH,
>>>> 
>>>> Roy
>>>> 
>>>> PS - not trying to build R from source,  just source updates of some packages
>>>> 
>>>>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>> 
>>>>> Roy,
>>>>> 
>>>>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>>>>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>>>>> which is what the CRAN build uses. FWIW you can always check the current flags at
>>>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>>>>> 
>>>>> If the above doesn't address the issue you're seeing, please provide details.
>>>>> 
>>>>> Thanks,
>>>>> Simon
>>>>> 
>>>>> 
>>>>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>>> 
>>>>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>>>>> 
>>>>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>>>> 
>>>>>> -Roy
>>>>>> 
>>>>>> **********************
>>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>>> **********************
>>>>>> Roy Mendelssohn
>>>>>> Supervisory Operations Research Analyst
>>>>>> NOAA/NMFS
>>>>>> Environmental Research Division
>>>>>> Southwest Fisheries Science Center
>>>>>> ***Note new street address***
>>>>>> 110 McAllister Way
>>>>>> Santa Cruz, CA 95060
>>>>>> Phone: (831)-420-3666
>>>>>> Fax: (831) 420-3980
>>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>>> 
>>>>>> "Old age and treachery will overcome youth and skill."
>>>>>> "From those who have been given much, much will be expected" 
>>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>> 
>>>> 
>>>> **********************
>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>> **********************
>>>> Roy Mendelssohn
>>>> Supervisory Operations Research Analyst
>>>> NOAA/NMFS
>>>> Environmental Research Division
>>>> Southwest Fisheries Science Center
>>>> ***Note new street address***
>>>> 110 McAllister Way
>>>> Santa Cruz, CA 95060
>>>> Phone: (831)-420-3666
>>>> Fax: (831) 420-3980
>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>> 
>>>> "Old age and treachery will overcome youth and skill."
>>>> "From those who have been given much, much will be expected" 
>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Jul 24 16:57:53 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 24 Jul 2019 10:57:53 -0400
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <B0769568-07B3-4694-A601-816486BE3ECC@depauw.edu>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
 <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
 <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
 <B0769568-07B3-4694-A601-816486BE3ECC@depauw.edu>
Message-ID: <1C5E032D-E291-4CFE-AFA1-2B4ABD1DC63C@R-project.org>

I want to avoid that "fix" because it is not guaranteed to work in the future. Can someone who did NOT instal the system-level headers below please report the actual issue? The whole point of using the SDK was to make sure it's not necessary.

Thanks,
Simon



> On Jul 24, 2019, at 10:54 AM, Bryan Hanson <hanson at depauw.edu> wrote:
> 
> If it helps troubleshoot, I updated more or less on the same timeline as Roy did and had the same problems Roy had, and Roy?s most recent response below gives the same response on my Mac.  Roy?s fix * fixed things for me.  Bryan
> 
> * open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
> 
>> On Jul 24, 2019, at 10:46 AM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>> 
>> Hi Simon:
>> 
>>> ls /Library/Developer/CommandLineTools/SDKs
>>> MacOSX.sdk	MacOSX10.14.sdk
>> 
>> Also when  have done:
>> 
>>> sudo xcode-select --install
>> 
>> I often get a message to install through App store (the command line tools).  I am not certain exactly what macOS_SDK_headers_for_macOS_10.14.pkg installs nor where,  but I as I said I went from being able to install packages from source to not being able to because headers couldn't be found to be able to.  And I have a feeling others will run into the same problem.
>> 
>> Thanks!
>> 
>> -Roy
>> 
>> 
>>> On Jul 23, 2019, at 9:33 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>> 
>>> Roy,
>>> 
>>> thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
>>> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>>> I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
>>> sudo xcode-select --install
>>> hopefully.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>> 
>>>> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>> 
>>>> Hi Simon:
>>>> 
>>>> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
>>>> 
>>>> HTH,
>>>> 
>>>> Roy
>>>> 
>>>> PS - not trying to build R from source,  just source updates of some packages
>>>> 
>>>>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>> 
>>>>> Roy,
>>>>> 
>>>>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>>>>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>>>>> which is what the CRAN build uses. FWIW you can always check the current flags at
>>>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>>>>> 
>>>>> If the above doesn't address the issue you're seeing, please provide details.
>>>>> 
>>>>> Thanks,
>>>>> Simon
>>>>> 
>>>>> 
>>>>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>>> 
>>>>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>>>>> 
>>>>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>>>> 
>>>>>> -Roy
>>>>>> 
>>>>>> **********************
>>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>>> **********************
>>>>>> Roy Mendelssohn
>>>>>> Supervisory Operations Research Analyst
>>>>>> NOAA/NMFS
>>>>>> Environmental Research Division
>>>>>> Southwest Fisheries Science Center
>>>>>> ***Note new street address***
>>>>>> 110 McAllister Way
>>>>>> Santa Cruz, CA 95060
>>>>>> Phone: (831)-420-3666
>>>>>> Fax: (831) 420-3980
>>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>>> 
>>>>>> "Old age and treachery will overcome youth and skill."
>>>>>> "From those who have been given much, much will be expected" 
>>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>> 
>>>> 
>>>> **********************
>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>> **********************
>>>> Roy Mendelssohn
>>>> Supervisory Operations Research Analyst
>>>> NOAA/NMFS
>>>> Environmental Research Division
>>>> Southwest Fisheries Science Center
>>>> ***Note new street address***
>>>> 110 McAllister Way
>>>> Santa Cruz, CA 95060
>>>> Phone: (831)-420-3666
>>>> Fax: (831) 420-3980
>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>> 
>>>> "Old age and treachery will overcome youth and skill."
>>>> "From those who have been given much, much will be expected" 
>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Jul 24 17:02:39 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 24 Jul 2019 08:02:39 -0700
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <1C5E032D-E291-4CFE-AFA1-2B4ABD1DC63C@R-project.org>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
 <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
 <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
 <B0769568-07B3-4694-A601-816486BE3ECC@depauw.edu>
 <1C5E032D-E291-4CFE-AFA1-2B4ABD1DC63C@R-project.org>
Message-ID: <40CA2082-EC1F-4D7D-A241-84E0F32A324F@noaa.gov>

HI Simon:

Perhaps if you can find someone who hasn't done the Xcode and Command Line Update,  have them list the directories that you are interested in, and then list the same after the update to see what it is doing.  Also is it possible you have something in your .Rpofile of the like that points to the location you want that I do not?  The errors you get on build are just what you expect - whatever *.h files it needed could not be found. 

HTH,

-Roy

> On Jul 24, 2019, at 7:57 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> I want to avoid that "fix" because it is not guaranteed to work in the future. Can someone who did NOT instal the system-level headers below please report the actual issue? The whole point of using the SDK was to make sure it's not necessary.
> 
> Thanks,
> Simon
> 
> 
> 
>> On Jul 24, 2019, at 10:54 AM, Bryan Hanson <hanson at depauw.edu> wrote:
>> 
>> If it helps troubleshoot, I updated more or less on the same timeline as Roy did and had the same problems Roy had, and Roy?s most recent response below gives the same response on my Mac.  Roy?s fix * fixed things for me.  Bryan
>> 
>> * open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>> 
>>> On Jul 24, 2019, at 10:46 AM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> Hi Simon:
>>> 
>>>> ls /Library/Developer/CommandLineTools/SDKs
>>>> MacOSX.sdk	MacOSX10.14.sdk
>>> 
>>> Also when  have done:
>>> 
>>>> sudo xcode-select --install
>>> 
>>> I often get a message to install through App store (the command line tools).  I am not certain exactly what macOS_SDK_headers_for_macOS_10.14.pkg installs nor where,  but I as I said I went from being able to install packages from source to not being able to because headers couldn't be found to be able to.  And I have a feeling others will run into the same problem.
>>> 
>>> Thanks!
>>> 
>>> -Roy
>>> 
>>> 
>>>> On Jul 23, 2019, at 9:33 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>> 
>>>> Roy,
>>>> 
>>>> thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
>>>> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>>>> I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
>>>> sudo xcode-select --install
>>>> hopefully.
>>>> 
>>>> Thanks,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>>> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>> 
>>>>> Hi Simon:
>>>>> 
>>>>> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
>>>>> 
>>>>> HTH,
>>>>> 
>>>>> Roy
>>>>> 
>>>>> PS - not trying to build R from source,  just source updates of some packages
>>>>> 
>>>>>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>>> 
>>>>>> Roy,
>>>>>> 
>>>>>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>>>>>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>>>>>> which is what the CRAN build uses. FWIW you can always check the current flags at
>>>>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>>>>>> 
>>>>>> If the above doesn't address the issue you're seeing, please provide details.
>>>>>> 
>>>>>> Thanks,
>>>>>> Simon
>>>>>> 
>>>>>> 
>>>>>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>>>> 
>>>>>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>>>>>> 
>>>>>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>>>>> 
>>>>>>> -Roy
>>>>>>> 
>>>>>>> **********************
>>>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>>>> **********************
>>>>>>> Roy Mendelssohn
>>>>>>> Supervisory Operations Research Analyst
>>>>>>> NOAA/NMFS
>>>>>>> Environmental Research Division
>>>>>>> Southwest Fisheries Science Center
>>>>>>> ***Note new street address***
>>>>>>> 110 McAllister Way
>>>>>>> Santa Cruz, CA 95060
>>>>>>> Phone: (831)-420-3666
>>>>>>> Fax: (831) 420-3980
>>>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>>>> 
>>>>>>> "Old age and treachery will overcome youth and skill."
>>>>>>> "From those who have been given much, much will be expected" 
>>>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>> 
>>>>>> 
>>>>> 
>>>>> **********************
>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>> **********************
>>>>> Roy Mendelssohn
>>>>> Supervisory Operations Research Analyst
>>>>> NOAA/NMFS
>>>>> Environmental Research Division
>>>>> Southwest Fisheries Science Center
>>>>> ***Note new street address***
>>>>> 110 McAllister Way
>>>>> Santa Cruz, CA 95060
>>>>> Phone: (831)-420-3666
>>>>> Fax: (831) 420-3980
>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>> 
>>>>> "Old age and treachery will overcome youth and skill."
>>>>> "From those who have been given much, much will be expected" 
>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected" 
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Jul 24 17:09:45 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 24 Jul 2019 11:09:45 -0400
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <40CA2082-EC1F-4D7D-A241-84E0F32A324F@noaa.gov>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
 <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
 <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
 <B0769568-07B3-4694-A601-816486BE3ECC@depauw.edu>
 <1C5E032D-E291-4CFE-AFA1-2B4ABD1DC63C@R-project.org>
 <40CA2082-EC1F-4D7D-A241-84E0F32A324F@noaa.gov>
Message-ID: <76C38A08-6069-496A-9E59-F71D22F3A3CB@R-project.org>

It's not what I'd expect because the system headers don't matter in the current CRAN release as it's not relying on the system headers anymore. That's why I'd need the actual full output - the command line and the error - so I could tract why it's failing.



> On Jul 24, 2019, at 11:02 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> HI Simon:
> 
> Perhaps if you can find someone who hasn't done the Xcode and Command Line Update,  have them list the directories that you are interested in, and then list the same after the update to see what it is doing.  Also is it possible you have something in your .Rpofile of the like that points to the location you want that I do not?  The errors you get on build are just what you expect - whatever *.h files it needed could not be found. 
> 
> HTH,
> 
> -Roy
> 
>> On Jul 24, 2019, at 7:57 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> I want to avoid that "fix" because it is not guaranteed to work in the future. Can someone who did NOT instal the system-level headers below please report the actual issue? The whole point of using the SDK was to make sure it's not necessary.
>> 
>> Thanks,
>> Simon
>> 
>> 
>> 
>>> On Jul 24, 2019, at 10:54 AM, Bryan Hanson <hanson at depauw.edu> wrote:
>>> 
>>> If it helps troubleshoot, I updated more or less on the same timeline as Roy did and had the same problems Roy had, and Roy?s most recent response below gives the same response on my Mac.  Roy?s fix * fixed things for me.  Bryan
>>> 
>>> * open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>> 
>>>> On Jul 24, 2019, at 10:46 AM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>> 
>>>> Hi Simon:
>>>> 
>>>>> ls /Library/Developer/CommandLineTools/SDKs
>>>>> MacOSX.sdk	MacOSX10.14.sdk
>>>> 
>>>> Also when  have done:
>>>> 
>>>>> sudo xcode-select --install
>>>> 
>>>> I often get a message to install through App store (the command line tools).  I am not certain exactly what macOS_SDK_headers_for_macOS_10.14.pkg installs nor where,  but I as I said I went from being able to install packages from source to not being able to because headers couldn't be found to be able to.  And I have a feeling others will run into the same problem.
>>>> 
>>>> Thanks!
>>>> 
>>>> -Roy
>>>> 
>>>> 
>>>>> On Jul 23, 2019, at 9:33 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>> 
>>>>> Roy,
>>>>> 
>>>>> thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
>>>>> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>>>>> I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
>>>>> sudo xcode-select --install
>>>>> hopefully.
>>>>> 
>>>>> Thanks,
>>>>> Simon
>>>>> 
>>>>> 
>>>>> 
>>>>>> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>>> 
>>>>>> Hi Simon:
>>>>>> 
>>>>>> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
>>>>>> 
>>>>>> HTH,
>>>>>> 
>>>>>> Roy
>>>>>> 
>>>>>> PS - not trying to build R from source,  just source updates of some packages
>>>>>> 
>>>>>>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>>>> 
>>>>>>> Roy,
>>>>>>> 
>>>>>>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>>>>>>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>>>>>>> which is what the CRAN build uses. FWIW you can always check the current flags at
>>>>>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>>>>>>> 
>>>>>>> If the above doesn't address the issue you're seeing, please provide details.
>>>>>>> 
>>>>>>> Thanks,
>>>>>>> Simon
>>>>>>> 
>>>>>>> 
>>>>>>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>>>>> 
>>>>>>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>>>>>>> 
>>>>>>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>>>>>> 
>>>>>>>> -Roy
>>>>>>>> 
>>>>>>>> **********************
>>>>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>>>>> **********************
>>>>>>>> Roy Mendelssohn
>>>>>>>> Supervisory Operations Research Analyst
>>>>>>>> NOAA/NMFS
>>>>>>>> Environmental Research Division
>>>>>>>> Southwest Fisheries Science Center
>>>>>>>> ***Note new street address***
>>>>>>>> 110 McAllister Way
>>>>>>>> Santa Cruz, CA 95060
>>>>>>>> Phone: (831)-420-3666
>>>>>>>> Fax: (831) 420-3980
>>>>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>>>>> 
>>>>>>>> "Old age and treachery will overcome youth and skill."
>>>>>>>> "From those who have been given much, much will be expected" 
>>>>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>>>>> 
>>>>>>>> _______________________________________________
>>>>>>>> R-SIG-Mac mailing list
>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>> 
>>>>>>> 
>>>>>> 
>>>>>> **********************
>>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>>> **********************
>>>>>> Roy Mendelssohn
>>>>>> Supervisory Operations Research Analyst
>>>>>> NOAA/NMFS
>>>>>> Environmental Research Division
>>>>>> Southwest Fisheries Science Center
>>>>>> ***Note new street address***
>>>>>> 110 McAllister Way
>>>>>> Santa Cruz, CA 95060
>>>>>> Phone: (831)-420-3666
>>>>>> Fax: (831) 420-3980
>>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>>> 
>>>>>> "Old age and treachery will overcome youth and skill."
>>>>>> "From those who have been given much, much will be expected" 
>>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>>> **********************
>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>> **********************
>>>> Roy Mendelssohn
>>>> Supervisory Operations Research Analyst
>>>> NOAA/NMFS
>>>> Environmental Research Division
>>>> Southwest Fisheries Science Center
>>>> ***Note new street address***
>>>> 110 McAllister Way
>>>> Santa Cruz, CA 95060
>>>> Phone: (831)-420-3666
>>>> Fax: (831) 420-3980
>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>> 
>>>> "Old age and treachery will overcome youth and skill."
>>>> "From those who have been given much, much will be expected" 
>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Jul 24 17:12:05 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 24 Jul 2019 08:12:05 -0700
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <76C38A08-6069-496A-9E59-F71D22F3A3CB@R-project.org>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
 <32ADCCBF-F1D1-4CF8-A994-BA8BC906E46C@R-project.org>
 <4E15F385-ED86-4412-8D15-EE88F6F70885@noaa.gov>
 <B0769568-07B3-4694-A601-816486BE3ECC@depauw.edu>
 <1C5E032D-E291-4CFE-AFA1-2B4ABD1DC63C@R-project.org>
 <40CA2082-EC1F-4D7D-A241-84E0F32A324F@noaa.gov>
 <76C38A08-6069-496A-9E59-F71D22F3A3CB@R-project.org>
Message-ID: <206CBB14-3E22-442D-965A-E62D4112647F@noaa.gov>

But is there a difference in where headers are being looked for when building R as compared to when a package is built from source.  As I said,  what was failing was try to do source installs of packages from CRAN.  

-Roy


> On Jul 24, 2019, at 8:09 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> It's not what I'd expect because the system headers don't matter in the current CRAN release as it's not relying on the system headers anymore. That's why I'd need the actual full output - the command line and the error - so I could tract why it's failing.
> 
> 
> 
>> On Jul 24, 2019, at 11:02 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>> 
>> HI Simon:
>> 
>> Perhaps if you can find someone who hasn't done the Xcode and Command Line Update,  have them list the directories that you are interested in, and then list the same after the update to see what it is doing.  Also is it possible you have something in your .Rpofile of the like that points to the location you want that I do not?  The errors you get on build are just what you expect - whatever *.h files it needed could not be found. 
>> 
>> HTH,
>> 
>> -Roy
>> 
>>> On Jul 24, 2019, at 7:57 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>> 
>>> I want to avoid that "fix" because it is not guaranteed to work in the future. Can someone who did NOT instal the system-level headers below please report the actual issue? The whole point of using the SDK was to make sure it's not necessary.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>> 
>>>> On Jul 24, 2019, at 10:54 AM, Bryan Hanson <hanson at depauw.edu> wrote:
>>>> 
>>>> If it helps troubleshoot, I updated more or less on the same timeline as Roy did and had the same problems Roy had, and Roy?s most recent response below gives the same response on my Mac.  Roy?s fix * fixed things for me.  Bryan
>>>> 
>>>> * open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>> 
>>>>> On Jul 24, 2019, at 10:46 AM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>> 
>>>>> Hi Simon:
>>>>> 
>>>>>> ls /Library/Developer/CommandLineTools/SDKs
>>>>>> MacOSX.sdk	MacOSX10.14.sdk
>>>>> 
>>>>> Also when  have done:
>>>>> 
>>>>>> sudo xcode-select --install
>>>>> 
>>>>> I often get a message to install through App store (the command line tools).  I am not certain exactly what macOS_SDK_headers_for_macOS_10.14.pkg installs nor where,  but I as I said I went from being able to install packages from source to not being able to because headers couldn't be found to be able to.  And I have a feeling others will run into the same problem.
>>>>> 
>>>>> Thanks!
>>>>> 
>>>>> -Roy
>>>>> 
>>>>> 
>>>>>> On Jul 23, 2019, at 9:33 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>>> 
>>>>>> Roy,
>>>>>> 
>>>>>> thanks, I just wanted to clarify which headers have been deleted exactly. The system location (/usr/includes) is what Apple doesn't like, which is why we are now using the SDK. Can you check, please, whether you do have
>>>>>> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>>>>>> I would hope that they don't touch that location. That said, if you have Xcode proper they may think that you no longer need command line tools or something like that -in principle that should be recoverable with
>>>>>> sudo xcode-select --install
>>>>>> hopefully.
>>>>>> 
>>>>>> Thanks,
>>>>>> Simon
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>>> On Jul 23, 2019, at 14:50, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>>>> 
>>>>>>> Hi Simon:
>>>>>>> 
>>>>>>> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
>>>>>>> 
>>>>>>> HTH,
>>>>>>> 
>>>>>>> Roy
>>>>>>> 
>>>>>>> PS - not trying to build R from source,  just source updates of some packages
>>>>>>> 
>>>>>>>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>>>>>> 
>>>>>>>> Roy,
>>>>>>>> 
>>>>>>>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>>>>>>>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>>>>>>>> which is what the CRAN build uses. FWIW you can always check the current flags at
>>>>>>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>>>>>>>> 
>>>>>>>> If the above doesn't address the issue you're seeing, please provide details.
>>>>>>>> 
>>>>>>>> Thanks,
>>>>>>>> Simon
>>>>>>>> 
>>>>>>>> 
>>>>>>>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>>>>>> 
>>>>>>>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>>>>>>>> 
>>>>>>>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>>>>>>>> 
>>>>>>>>> -Roy
>>>>>>>>> 
>>>>>>>>> **********************
>>>>>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>>>>>> **********************
>>>>>>>>> Roy Mendelssohn
>>>>>>>>> Supervisory Operations Research Analyst
>>>>>>>>> NOAA/NMFS
>>>>>>>>> Environmental Research Division
>>>>>>>>> Southwest Fisheries Science Center
>>>>>>>>> ***Note new street address***
>>>>>>>>> 110 McAllister Way
>>>>>>>>> Santa Cruz, CA 95060
>>>>>>>>> Phone: (831)-420-3666
>>>>>>>>> Fax: (831) 420-3980
>>>>>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>>>>>> 
>>>>>>>>> "Old age and treachery will overcome youth and skill."
>>>>>>>>> "From those who have been given much, much will be expected" 
>>>>>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>>>>>> 
>>>>>>>>> _______________________________________________
>>>>>>>>> R-SIG-Mac mailing list
>>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>>> 
>>>>>>>> 
>>>>>>> 
>>>>>>> **********************
>>>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>>>> **********************
>>>>>>> Roy Mendelssohn
>>>>>>> Supervisory Operations Research Analyst
>>>>>>> NOAA/NMFS
>>>>>>> Environmental Research Division
>>>>>>> Southwest Fisheries Science Center
>>>>>>> ***Note new street address***
>>>>>>> 110 McAllister Way
>>>>>>> Santa Cruz, CA 95060
>>>>>>> Phone: (831)-420-3666
>>>>>>> Fax: (831) 420-3980
>>>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>>>> 
>>>>>>> "Old age and treachery will overcome youth and skill."
>>>>>>> "From those who have been given much, much will be expected" 
>>>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>> 
>>>>> **********************
>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>> **********************
>>>>> Roy Mendelssohn
>>>>> Supervisory Operations Research Analyst
>>>>> NOAA/NMFS
>>>>> Environmental Research Division
>>>>> Southwest Fisheries Science Center
>>>>> ***Note new street address***
>>>>> 110 McAllister Way
>>>>> Santa Cruz, CA 95060
>>>>> Phone: (831)-420-3666
>>>>> Fax: (831) 420-3980
>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>> 
>>>>> "Old age and treachery will overcome youth and skill."
>>>>> "From those who have been given much, much will be expected" 
>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Jul 24 17:37:19 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 24 Jul 2019 11:37:19 -0400
Subject: [R-SIG-Mac] Xcode 10.3 and header flles
In-Reply-To: <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
References: <03737263-CB55-430A-807B-BB323A5316F6@noaa.gov>
 <3890EAC3-33BA-4319-9497-D625B473D692@R-project.org>
 <C04F4802-8135-45AE-9B0E-9ED8DDA41DA0@noaa.gov>
Message-ID: <A617A2E7-6F76-4E0E-838E-983FC7DDB077@R-project.org>

Ok, mystery solved: you will get the error if you override the provided CRAN flags with flags that remove the SDK. So the issue doesn't exist in released R unless you modify the flags yourself. So please don't do that - don't set CPPFLAGS or if you really have to, make sure you include at least what the released CRAN R uses:

$ R CMD config CPPFLAGS
-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include

Cheers,
Simon


> On Jul 23, 2019, at 2:50 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Hi Simon:
> 
> I am using CRAN release,  recommended CRAN compilers.  Yesterday morning one updated package needed to be installed from source,  worked.  Yesterday afternoon did the update of Xcode (and OSX).  This morning installing a package update from source failed,  couldn't find header files (gee I have seen this before).  Ran the command I put below,  everybody was happy.  It does appear that the update literally deleted the headers.
> 
> HTH,
> 
> Roy
> 
> PS - not trying to build R from source,  just source updates of some packages
> 
>> On Jul 23, 2019, at 11:17 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Roy,
>> 
>> that shouldn't be necessary if you use the CRAN release since it specifically points to the SDK. If you are compiling your own R you may want to add
>> CPPFLAGS='-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include'
>> which is what the CRAN build uses. FWIW you can always check the current flags at
>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/conf.el-capitan-x86_64
>> 
>> If the above doesn't address the issue you're seeing, please provide details.
>> 
>> Thanks,
>> Simon
>> 
>> 
>>> On Jul 23, 2019, at 12:47 PM, Roy Mendelssohn - NOAA Federal via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> If like me you updated to Xcode 10.3,  in Apple's infinite wisdom the install again wipes out the header files.  So if you did the update and install from source remember to re-install the headers:
>>> 
>>>> open  /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
>>> 
>>> -Roy
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected" 
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @e||v@nov@dm|tr|y @end|ng |rom gm@||@com  Thu Jul 25 14:18:51 2019
From: @e||v@nov@dm|tr|y @end|ng |rom gm@||@com (Dmitriy Selivanov)
Date: Thu, 25 Jul 2019 16:18:51 +0400
Subject: [R-SIG-Mac] Linking to other package shared library
Message-ID: <CAJdZCv1Gk1Vne6Jbi74xiMnx4=WaO3R3_m7UJrNX8+a8N5v52A@mail.gmail.com>

Dear r-sig-mac mailing list,
I have difficulties to solve one problem - I don't understand on how my
package can link to another package which is built by CRAN. More on this
below.

I'm a developer of rparse package (
https://cran.r-project.org/web/packages/rsparse/). This package links to
float pkg (https://cran.r-project.org/web/packages/float/index.html). This
is done in configure script and with installation from source it works just
fine. But there is an issue when installing rsparse from CRAN binaries. In
this case rsparse shared library references the path of the float shared
library which is recorded during the build on CRAN machine. And it is
different from the path on user machine (On cran it is
@rpath/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.6/float/libs/float.so).
In
fact the warning is produced by CRAN checks -
https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/float-00install.html
)
I've tried to fix this be using `.onLoad` hook where I run
`install_name_tool -change ...`, but it seems `dyn.load` is called before
.onLoad hook...

What will be the correct way to solve this issue?

Thanks in advance.

-- 
Regards
Dmitriy Selivanov

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Jul 25 21:52:58 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 25 Jul 2019 15:52:58 -0400
Subject: [R-SIG-Mac] Linking to other package shared library
In-Reply-To: <CAJdZCv1Gk1Vne6Jbi74xiMnx4=WaO3R3_m7UJrNX8+a8N5v52A@mail.gmail.com>
References: <CAJdZCv1Gk1Vne6Jbi74xiMnx4=WaO3R3_m7UJrNX8+a8N5v52A@mail.gmail.com>
Message-ID: <F4465B80-AE3A-4855-BB66-CF4033CF2161@R-project.org>

See R-exts 5.8: you cannot link directly to other package or its libraries. It is not possible is a portable way across platforms for many reasons including those that you are hitting here. If a package exposes some C-level functionality to other packages, you can use it and R provides a way to obtain access to the function - see R-exts 5.4.3.

There are ways to make a *static* library available, because that allows your package to be installed without actually requiring the presence of the other package at install time. But, again, the package has to make it explicitly available since you cannot guarantee that your package won't break as it's technically internal to the other package. That said, it seems the there is a bug in float since it provides the wrong flags to link against its library (float:::ldflags()). It should really just use system.file("libs","libfloat.a",package="float") - you may want to contact the maintainer of float about that. Flags cannot be hard-coded at install time because the package can be installed in any location, moreover staged install is preformed in a direction separate from the R library anyway.

Cheers,
Simon


> On Jul 25, 2019, at 8:18 AM, Dmitriy Selivanov <selivanov.dmitriy at gmail.com> wrote:
> 
> Dear r-sig-mac mailing list,
> I have difficulties to solve one problem - I don't understand on how my
> package can link to another package which is built by CRAN. More on this
> below.
> 
> I'm a developer of rparse package (
> https://cran.r-project.org/web/packages/rsparse/). This package links to
> float pkg (https://cran.r-project.org/web/packages/float/index.html). This
> is done in configure script and with installation from source it works just
> fine. But there is an issue when installing rsparse from CRAN binaries. In
> this case rsparse shared library references the path of the float shared
> library which is recorded during the build on CRAN machine. And it is
> different from the path on user machine (On cran it is
> @rpath/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.6/float/libs/float.so).
> In
> fact the warning is produced by CRAN checks -
> https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/float-00install.html
> )
> I've tried to fix this be using `.onLoad` hook where I run
> `install_name_tool -change ...`, but it seems `dyn.load` is called before
> .onLoad hook...
> 
> What will be the correct way to solve this issue?
> 
> Thanks in advance.
> 
> -- 
> Regards
> Dmitriy Selivanov
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @e||v@nov@dm|tr|y @end|ng |rom gm@||@com  Fri Jul 26 14:34:29 2019
From: @e||v@nov@dm|tr|y @end|ng |rom gm@||@com (Dmitriy Selivanov)
Date: Fri, 26 Jul 2019 16:34:29 +0400
Subject: [R-SIG-Mac] Linking to other package shared library
In-Reply-To: <F4465B80-AE3A-4855-BB66-CF4033CF2161@R-project.org>
References: <CAJdZCv1Gk1Vne6Jbi74xiMnx4=WaO3R3_m7UJrNX8+a8N5v52A@mail.gmail.com>
 <F4465B80-AE3A-4855-BB66-CF4033CF2161@R-project.org>
Message-ID: <CAJdZCv3r2dhFuy85vTBwgFCbKQTpEbeQLawJgs+_zW3O3JSopQ@mail.gmail.com>

Thank you Simon - I will try with the static library.

>If a package exposes some C-level functionality to other packages, you can
use it and R provides a way to obtain access to the function - see R-exts
5.4.3.

My case is a little bit trickier (at least as it looks for me) - float pkg
exposes single precision BLAS and LAPACK. rsparse use it in the C++ code
implicitly via Armadillo library. This is due to the unfortunate fact that
R doesn't ship single precision blas and lapack.


On Thu, Jul 25, 2019 at 11:53 PM Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> See R-exts 5.8: you cannot link directly to other package or its
> libraries. It is not possible is a portable way across platforms for many
> reasons including those that you are hitting here. If a package exposes
> some C-level functionality to other packages, you can use it and R provides
> a way to obtain access to the function - see R-exts 5.4.3.
>
> There are ways to make a *static* library available, because that allows
> your package to be installed without actually requiring the presence of the
> other package at install time. But, again, the package has to make it
> explicitly available since you cannot guarantee that your package won't
> break as it's technically internal to the other package. That said, it
> seems the there is a bug in float since it provides the wrong flags to link
> against its library (float:::ldflags()). It should really just use
> system.file("libs","libfloat.a",package="float") - you may want to contact
> the maintainer of float about that. Flags cannot be hard-coded at install
> time because the package can be installed in any location, moreover staged
> install is preformed in a direction separate from the R library anyway.
>
> Cheers,
> Simon
>
>
> > On Jul 25, 2019, at 8:18 AM, Dmitriy Selivanov <
> selivanov.dmitriy at gmail.com> wrote:
> >
> > Dear r-sig-mac mailing list,
> > I have difficulties to solve one problem - I don't understand on how my
> > package can link to another package which is built by CRAN. More on this
> > below.
> >
> > I'm a developer of rparse package (
> > https://cran.r-project.org/web/packages/rsparse/). This package links to
> > float pkg (https://cran.r-project.org/web/packages/float/index.html).
> This
> > is done in configure script and with installation from source it works
> just
> > fine. But there is an issue when installing rsparse from CRAN binaries.
> In
> > this case rsparse shared library references the path of the float shared
> > library which is recorded during the build on CRAN machine. And it is
> > different from the path on user machine (On cran it is
> >
> @rpath/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.6/float/libs/float.so).
> > In
> > fact the warning is produced by CRAN checks -
> >
> https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/float-00install.html
> > )
> > I've tried to fix this be using `.onLoad` hook where I run
> > `install_name_tool -change ...`, but it seems `dyn.load` is called before
> > .onLoad hook...
> >
> > What will be the correct way to solve this issue?
> >
> > Thanks in advance.
> >
> > --
> > Regards
> > Dmitriy Selivanov
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>

-- 
Regards
Dmitriy Selivanov

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Jul 26 15:28:03 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 26 Jul 2019 09:28:03 -0400
Subject: [R-SIG-Mac] Linking to other package shared library
In-Reply-To: <CAJdZCv3r2dhFuy85vTBwgFCbKQTpEbeQLawJgs+_zW3O3JSopQ@mail.gmail.com>
References: <CAJdZCv1Gk1Vne6Jbi74xiMnx4=WaO3R3_m7UJrNX8+a8N5v52A@mail.gmail.com>
 <F4465B80-AE3A-4855-BB66-CF4033CF2161@R-project.org>
 <CAJdZCv3r2dhFuy85vTBwgFCbKQTpEbeQLawJgs+_zW3O3JSopQ@mail.gmail.com>
Message-ID: <2E399F26-D680-4A91-8B80-65839C4EBA68@R-project.org>

Thanks, I looked at the actual implementation in float (float:::ldflags_string) and it seems that it actually gets the static case right, so it should work. I would suggest that the author (I took the liberty to CC) make static=TRUE the default since the dynamic linking simply doesn't work in general.

Cheers,
Simon


> On Jul 26, 2019, at 8:34 AM, Dmitriy Selivanov <selivanov.dmitriy at gmail.com> wrote:
> 
> Thank you Simon - I will try with the static library. 
> 
> >If a package exposes some C-level functionality to other packages, you can use it and R provides a way to obtain access to the function - see R-exts 5.4.3.
> 
> My case is a little bit trickier (at least as it looks for me) - float pkg exposes single precision BLAS and LAPACK. rsparse use it in the C++ code implicitly via Armadillo library. This is due to the unfortunate fact that R doesn't ship single precision blas and lapack.
> 
> 
> On Thu, Jul 25, 2019 at 11:53 PM Simon Urbanek <simon.urbanek at r-project.org> wrote:
> See R-exts 5.8: you cannot link directly to other package or its libraries. It is not possible is a portable way across platforms for many reasons including those that you are hitting here. If a package exposes some C-level functionality to other packages, you can use it and R provides a way to obtain access to the function - see R-exts 5.4.3.
> 
> There are ways to make a *static* library available, because that allows your package to be installed without actually requiring the presence of the other package at install time. But, again, the package has to make it explicitly available since you cannot guarantee that your package won't break as it's technically internal to the other package. That said, it seems the there is a bug in float since it provides the wrong flags to link against its library (float:::ldflags()). It should really just use system.file("libs","libfloat.a",package="float") - you may want to contact the maintainer of float about that. Flags cannot be hard-coded at install time because the package can be installed in any location, moreover staged install is preformed in a direction separate from the R library anyway.
> 
> Cheers,
> Simon
> 
> 
> > On Jul 25, 2019, at 8:18 AM, Dmitriy Selivanov <selivanov.dmitriy at gmail.com> wrote:
> > 
> > Dear r-sig-mac mailing list,
> > I have difficulties to solve one problem - I don't understand on how my
> > package can link to another package which is built by CRAN. More on this
> > below.
> > 
> > I'm a developer of rparse package (
> > https://cran.r-project.org/web/packages/rsparse/). This package links to
> > float pkg (https://cran.r-project.org/web/packages/float/index.html). This
> > is done in configure script and with installation from source it works just
> > fine. But there is an issue when installing rsparse from CRAN binaries. In
> > this case rsparse shared library references the path of the float shared
> > library which is recorded during the build on CRAN machine. And it is
> > different from the path on user machine (On cran it is
> > @rpath/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.6/float/libs/float.so).
> > In
> > fact the warning is produced by CRAN checks -
> > https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/float-00install.html
> > )
> > I've tried to fix this be using `.onLoad` hook where I run
> > `install_name_tool -change ...`, but it seems `dyn.load` is called before
> > .onLoad hook...
> > 
> > What will be the correct way to solve this issue?
> > 
> > Thanks in advance.
> > 
> > -- 
> > Regards
> > Dmitriy Selivanov
> > 
> >       [[alternative HTML version deleted]]
> > 
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 
> -- 
> Regards 
> Dmitriy Selivanov


From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Mon Jul 29 00:27:41 2019
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Sun, 28 Jul 2019 22:27:41 +0000
Subject: [R-SIG-Mac] In install.packages(),
 C compiler cannot create executables
Message-ID: <BN8PR18MB26909623F955FE884D134467FAC20@BN8PR18MB2690.namprd18.prod.outlook.com>

Hello,

On my Mac, everything is installed using brew. ?I am not able to install some R packages which look for C compiler. ?Below is an example session on the terminal. ?

I will be thankful for any suggestions. ?If this question does not belong to this group, can you suggest where to look?

Naresh

> install.packages('stringi', repos='https://cran.r-project.org')
Installing package into ?/usr/local/lib/R/3.6/site-library?
(as ?lib? is unspecified)
trying URL 'https://cran.r-project.org/src/contrib/stringi_1.4.3.tar.gz'
Content type 'application/x-gzip' length 7290890 bytes (7.0 MB)
==================================================
downloaded 7.0 MB

* installing *source* package ?stringi? ...
** package ?stringi? successfully unpacked and MD5 sums checked
** using staged installation
checking for R_HOME... /usr/local/Cellar/r/3.6.1/lib/R
checking for R... /usr/local/Cellar/r/3.6.1/lib/R/bin/R
checking for endianness... little
checking for R >= 3.1.0 for C++11 use... yes
checking for R < 3.4.0 for CXX1X flag use... no
checking for cat... /bin/cat
checking for local ICUDT_DIR... icu61/data
checking for gcc... /usr/local/opt/llvm/bin/clang -fopenmp
checking whether the C compiler works... no
configure: error: in `/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3KDSQ5/R.INSTALL87262e900de6/stringi':
configure: error: C compiler cannot create executables
See `config.log' for more details
ERROR: configuration failed for package ?stringi?
* removing ?/usr/local/lib/R/3.6/site-library/stringi?

The downloaded source packages are in
	?/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3hnR8I/downloaded_packages?
Warning message:
In install.packages("stringi", repos = "https://cran.r-project.org") :
? installation of package ?stringi? had non-zero exit status
> R.Version()
$platform
[1] "x86_64-apple-darwin17.7.0"

$arch
[1] "x86_64"

$os
[1] "darwin17.7.0"

$system
[1] "x86_64, darwin17.7.0"

$status
[1] ""

$major
[1] "3"

$minor
[1] "6.1"

$year
[1] "2019"

$month
[1] "07"

$day
[1] "05"

$`svn rev`
[1] "76782"

$language
[1] "R"

$version.string
[1] "R version 3.6.1 (2019-07-05)"

$nickname
[1] "Action of the Toes"

> capabilities()
?? ? ? jpeg ? ? ? ? png? ? ? ? tiff ? ? ? tcltk ? ? ? ? X11? ? ? ? aqua?
?? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE?
?? http/ftp ? ? sockets? ? ? libxml? ? ? ? fifo? ? ? cledit ? ? ? iconv?
?? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE?
? ? ? ? NLS ? ? profmem ? ? ? cairo ? ? ? ? ICU long.double ? ? libcurl?
?? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE? ? ? ? TRUE?
> system('gcc --version')
Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
Apple LLVM version 10.0.0 (clang-1000.10.44.4)
Target: x86_64-apple-darwin17.7.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin
> system('which gcc')
/usr/bin/gcc
> system('brew doctor')
Your system is ready to brew.
>?




From b@|@mut2 @end|ng |rom ||||no|@@edu  Mon Jul 29 00:34:12 2019
From: b@|@mut2 @end|ng |rom ||||no|@@edu (Balamuta, James Joseph)
Date: Sun, 28 Jul 2019 22:34:12 +0000
Subject: [R-SIG-Mac] In install.packages(),
 C compiler cannot create executables
Message-ID: <E634C3DE-F14C-488F-9A2A-1C0E0BDD0F25@illinois.edu>

Greetings and Salutations Naresh Gurbuxani,

Don't use homebrew to install R. If you must use homebrew, install R via the brew cask project to obtain the CRAN binary vs. the homebrew compiled variant.

Sincerely,

JJB

?On 7/28/19, 5:28 PM, "R-SIG-Mac on behalf of Naresh Gurbuxani" <r-sig-mac-bounces at r-project.org on behalf of naresh_gurbuxani at hotmail.com> wrote:

    Hello,
    
    On my Mac, everything is installed using brew.  I am not able to install some R packages which look for C compiler.  Below is an example session on the terminal.  
    
    I will be thankful for any suggestions.  If this question does not belong to this group, can you suggest where to look?
    
    Naresh
    
    > install.packages('stringi', repos='https://cran.r-project.org')
    Installing package into ?/usr/local/lib/R/3.6/site-library?
    (as ?lib? is unspecified)
    trying URL 'https://cran.r-project.org/src/contrib/stringi_1.4.3.tar.gz'
    Content type 'application/x-gzip' length 7290890 bytes (7.0 MB)
    ==================================================
    downloaded 7.0 MB
    
    * installing *source* package ?stringi? ...
    ** package ?stringi? successfully unpacked and MD5 sums checked
    ** using staged installation
    checking for R_HOME... /usr/local/Cellar/r/3.6.1/lib/R
    checking for R... /usr/local/Cellar/r/3.6.1/lib/R/bin/R
    checking for endianness... little
    checking for R >= 3.1.0 for C++11 use... yes
    checking for R < 3.4.0 for CXX1X flag use... no
    checking for cat... /bin/cat
    checking for local ICUDT_DIR... icu61/data
    checking for gcc... /usr/local/opt/llvm/bin/clang -fopenmp
    checking whether the C compiler works... no
    configure: error: in `/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3KDSQ5/R.INSTALL87262e900de6/stringi':
    configure: error: C compiler cannot create executables
    See `config.log' for more details
    ERROR: configuration failed for package ?stringi?
    * removing ?/usr/local/lib/R/3.6/site-library/stringi?
    
    The downloaded source packages are in
    	?/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3hnR8I/downloaded_packages?
    Warning message:
    In install.packages("stringi", repos = "https://cran.r-project.org") :
      installation of package ?stringi? had non-zero exit status
    > R.Version()
    $platform
    [1] "x86_64-apple-darwin17.7.0"
    
    $arch
    [1] "x86_64"
    
    $os
    [1] "darwin17.7.0"
    
    $system
    [1] "x86_64, darwin17.7.0"
    
    $status
    [1] ""
    
    $major
    [1] "3"
    
    $minor
    [1] "6.1"
    
    $year
    [1] "2019"
    
    $month
    [1] "07"
    
    $day
    [1] "05"
    
    $`svn rev`
    [1] "76782"
    
    $language
    [1] "R"
    
    $version.string
    [1] "R version 3.6.1 (2019-07-05)"
    
    $nickname
    [1] "Action of the Toes"
    
    > capabilities()
           jpeg         png        tiff       tcltk         X11        aqua 
           TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
       http/ftp     sockets      libxml        fifo      cledit       iconv 
           TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
            NLS     profmem       cairo         ICU long.double     libcurl 
           TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
    > system('gcc --version')
    Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
    Apple LLVM version 10.0.0 (clang-1000.10.44.4)
    Target: x86_64-apple-darwin17.7.0
    Thread model: posix
    InstalledDir: /Library/Developer/CommandLineTools/usr/bin
    > system('which gcc')
    /usr/bin/gcc
    > system('brew doctor')
    Your system is ready to brew.
    > 
    
    
    
    _______________________________________________
    R-SIG-Mac mailing list
    R-SIG-Mac at r-project.org
    https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    


From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Mon Jul 29 04:07:34 2019
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Mon, 29 Jul 2019 02:07:34 +0000
Subject: [R-SIG-Mac] In install.packages(),
 C compiler cannot create executables
In-Reply-To: <E634C3DE-F14C-488F-9A2A-1C0E0BDD0F25@illinois.edu>
References: <E634C3DE-F14C-488F-9A2A-1C0E0BDD0F25@illinois.edu>
Message-ID: <BN8PR18MB2690444E710FA66761D20CFAFADD0@BN8PR18MB2690.namprd18.prod.outlook.com>

JJB,

I installed R using instructions given here. ?

https://github.com/sethrfore/homebrew-r-srf

It seems that installing R using brew cask will not provide all capabilities.  In any case, I want to use R with Emacs.  

I will try to reinstall and see if the problem goes away.

Thanks,
Naresh






From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Balamuta, James Joseph <balamut2 at illinois.edu>

Sent: Sunday, July 28, 2019 6:34 PM

To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>

Subject: Re: [R-SIG-Mac] In install.packages(), C compiler cannot create executables

?


Greetings and Salutations Naresh Gurbuxani,



Don't use homebrew to install R. If you must use homebrew, install R via the brew cask project to obtain the CRAN binary vs. the homebrew compiled variant.



Sincerely,



JJB



?On 7/28/19, 5:28 PM, "R-SIG-Mac on behalf of Naresh Gurbuxani" <r-sig-mac-bounces at r-project.org on behalf of naresh_gurbuxani at hotmail.com> wrote:



??? Hello,

??? 

??? On my Mac, everything is installed using brew.? I am not able to install some R packages which look for C compiler.? Below is an example session on the terminal.?


??? 

??? I will be thankful for any suggestions.? If this question does not belong to this group, can you suggest where to look?

??? 

??? Naresh

??? 

??? > install.packages('stringi', repos='https://cran.r-project.org')

??? Installing package into ?/usr/local/lib/R/3.6/site-library?

??? (as ?lib? is unspecified)

??? trying URL 'https://cran.r-project.org/src/contrib/stringi_1.4.3.tar.gz'

??? Content type 'application/x-gzip' length 7290890 bytes (7.0 MB)

??? ==================================================

??? downloaded 7.0 MB

??? 

??? * installing *source* package ?stringi? ...

??? ** package ?stringi? successfully unpacked and MD5 sums checked

??? ** using staged installation

??? checking for R_HOME... /usr/local/Cellar/r/3.6.1/lib/R

??? checking for R... /usr/local/Cellar/r/3.6.1/lib/R/bin/R

??? checking for endianness... little

??? checking for R >= 3.1.0 for C++11 use... yes

??? checking for R < 3.4.0 for CXX1X flag use... no

??? checking for cat... /bin/cat

??? checking for local ICUDT_DIR... icu61/data

??? checking for gcc... /usr/local/opt/llvm/bin/clang -fopenmp

??? checking whether the C compiler works... no

??? configure: error: in `/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3KDSQ5/R.INSTALL87262e900de6/stringi':

??? configure: error: C compiler cannot create executables

??? See `config.log' for more details

??? ERROR: configuration failed for package ?stringi?

??? * removing ?/usr/local/lib/R/3.6/site-library/stringi?

??? 

??? The downloaded source packages are in

???????? ?/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3hnR8I/downloaded_packages?

??? Warning message:

??? In install.packages("stringi", repos = "https://cran.r-project.org") :

????? installation of package ?stringi? had non-zero exit status

??? > R.Version()

??? $platform

??? [1] "x86_64-apple-darwin17.7.0"

??? 

??? $arch

??? [1] "x86_64"

??? 

??? $os

??? [1] "darwin17.7.0"

??? 

??? $system

??? [1] "x86_64, darwin17.7.0"

??? 

??? $status

??? [1] ""

??? 

??? $major

??? [1] "3"

??? 

??? $minor

??? [1] "6.1"

??? 

??? $year

??? [1] "2019"

??? 

??? $month

??? [1] "07"

??? 

??? $day

??? [1] "05"

??? 

??? $`svn rev`

??? [1] "76782"

??? 

??? $language

??? [1] "R"

??? 

??? $version.string

??? [1] "R version 3.6.1 (2019-07-05)"

??? 

??? $nickname

??? [1] "Action of the Toes"

??? 

??? > capabilities()

?????????? jpeg???????? png??????? tiff?????? tcltk???????? X11??????? aqua 

?????????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE 

?????? http/ftp???? sockets????? libxml??????? fifo????? cledit?????? iconv 

?????????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE 

??????????? NLS???? profmem?????? cairo???????? ICU long.double???? libcurl 

?????????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE 

??? > system('gcc --version')

??? Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/usr/include/c++/4.2.1

??? Apple LLVM version 10.0.0 (clang-1000.10.44.4)

??? Target: x86_64-apple-darwin17.7.0

??? Thread model: posix

??? InstalledDir: /Library/Developer/CommandLineTools/usr/bin

??? > system('which gcc')

??? /usr/bin/gcc

??? > system('brew doctor')

??? Your system is ready to brew.

??? > 

??? 

??? 

??? 

??? _______________________________________________

??? R-SIG-Mac mailing list

??? R-SIG-Mac at r-project.org

??? https://stat.ethz.ch/mailman/listinfo/r-sig-mac

??? 



_______________________________________________

R-SIG-Mac mailing list

R-SIG-Mac at r-project.org

https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From |u|@@@puerto @end|ng |rom gm@||@com  Mon Jul 29 06:23:56 2019
From: |u|@@@puerto @end|ng |rom gm@||@com (Luis Puerto)
Date: Sun, 28 Jul 2019 21:23:56 -0700
Subject: [R-SIG-Mac] In install.packages(),
 C compiler cannot create executables
In-Reply-To: <BN8PR18MB2690444E710FA66761D20CFAFADD0@BN8PR18MB2690.namprd18.prod.outlook.com>
References: <E634C3DE-F14C-488F-9A2A-1C0E0BDD0F25@illinois.edu>
 <BN8PR18MB2690444E710FA66761D20CFAFADD0@BN8PR18MB2690.namprd18.prod.outlook.com>
Message-ID: <C44619F1-66E1-4FA9-9985-3448580B9AD6@gmail.com>

Install R from cask, as James suggested will provide all the capabilities since it's downloaded from CRAN. The one that does't provide all the capabilities is Homebrew core. 

Seth's one will provide all the capabilities too, but you are going to need to build it and then build all the packages you install. 

Other think is you want to use OpenBLAS and OpenMP. You should be able to use those libraries with CRAN version ?either directly or through brew cask? but I'm not sure since I use Seth's version. 

Best Regards
Luis Puerto
luispuerto.net

> On 28 Jul, 2019, at 19:07, Naresh Gurbuxani <naresh_gurbuxani at hotmail.com> wrote:
> 
> JJB,
> 
> I installed R using instructions given here.  
> 
> https://github.com/sethrfore/homebrew-r-srf
> 
> It seems that installing R using brew cask will not provide all capabilities.  In any case, I want to use R with Emacs.  
> 
> I will try to reinstall and see if the problem goes away.
> 
> Thanks,
> Naresh
> 
> 
> 
> 
> 
> 
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Balamuta, James Joseph <balamut2 at illinois.edu>
> 
> Sent: Sunday, July 28, 2019 6:34 PM
> 
> To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> 
> Subject: Re: [R-SIG-Mac] In install.packages(), C compiler cannot create executables
> 
>  
> 
> 
> Greetings and Salutations Naresh Gurbuxani,
> 
> 
> 
> Don't use homebrew to install R. If you must use homebrew, install R via the brew cask project to obtain the CRAN binary vs. the homebrew compiled variant.
> 
> 
> 
> Sincerely,
> 
> 
> 
> JJB
> 
> 
> 
> ?On 7/28/19, 5:28 PM, "R-SIG-Mac on behalf of Naresh Gurbuxani" <r-sig-mac-bounces at r-project.org on behalf of naresh_gurbuxani at hotmail.com> wrote:
> 
> 
> 
>     Hello,
> 
>     
> 
>     On my Mac, everything is installed using brew.  I am not able to install some R packages which look for C compiler.  Below is an example session on the terminal. 
> 
> 
>     
> 
>     I will be thankful for any suggestions.  If this question does not belong to this group, can you suggest where to look?
> 
>     
> 
>     Naresh
> 
>     
> 
>     > install.packages('stringi', repos='https://cran.r-project.org')
> 
>     Installing package into ?/usr/local/lib/R/3.6/site-library?
> 
>     (as ?lib? is unspecified)
> 
>     trying URL 'https://cran.r-project.org/src/contrib/stringi_1.4.3.tar.gz'
> 
>     Content type 'application/x-gzip' length 7290890 bytes (7.0 MB)
> 
>     ==================================================
> 
>     downloaded 7.0 MB
> 
>     
> 
>     * installing *source* package ?stringi? ...
> 
>     ** package ?stringi? successfully unpacked and MD5 sums checked
> 
>     ** using staged installation
> 
>     checking for R_HOME... /usr/local/Cellar/r/3.6.1/lib/R
> 
>     checking for R... /usr/local/Cellar/r/3.6.1/lib/R/bin/R
> 
>     checking for endianness... little
> 
>     checking for R >= 3.1.0 for C++11 use... yes
> 
>     checking for R < 3.4.0 for CXX1X flag use... no
> 
>     checking for cat... /bin/cat
> 
>     checking for local ICUDT_DIR... icu61/data
> 
>     checking for gcc... /usr/local/opt/llvm/bin/clang -fopenmp
> 
>     checking whether the C compiler works... no
> 
>     configure: error: in `/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3KDSQ5/R.INSTALL87262e900de6/stringi':
> 
>     configure: error: C compiler cannot create executables
> 
>     See `config.log' for more details
> 
>     ERROR: configuration failed for package ?stringi?
> 
>     * removing ?/usr/local/lib/R/3.6/site-library/stringi?
> 
>     
> 
>     The downloaded source packages are in
> 
>          ?/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3hnR8I/downloaded_packages?
> 
>     Warning message:
> 
>     In install.packages("stringi", repos = "https://cran.r-project.org") :
> 
>       installation of package ?stringi? had non-zero exit status
> 
>     > R.Version()
> 
>     $platform
> 
>     [1] "x86_64-apple-darwin17.7.0"
> 
>     
> 
>     $arch
> 
>     [1] "x86_64"
> 
>     
> 
>     $os
> 
>     [1] "darwin17.7.0"
> 
>     
> 
>     $system
> 
>     [1] "x86_64, darwin17.7.0"
> 
>     
> 
>     $status
> 
>     [1] ""
> 
>     
> 
>     $major
> 
>     [1] "3"
> 
>     
> 
>     $minor
> 
>     [1] "6.1"
> 
>     
> 
>     $year
> 
>     [1] "2019"
> 
>     
> 
>     $month
> 
>     [1] "07"
> 
>     
> 
>     $day
> 
>     [1] "05"
> 
>     
> 
>     $`svn rev`
> 
>     [1] "76782"
> 
>     
> 
>     $language
> 
>     [1] "R"
> 
>     
> 
>     $version.string
> 
>     [1] "R version 3.6.1 (2019-07-05)"
> 
>     
> 
>     $nickname
> 
>     [1] "Action of the Toes"
> 
>     
> 
>     > capabilities()
> 
>            jpeg         png        tiff       tcltk         X11        aqua 
> 
>            TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
> 
>        http/ftp     sockets      libxml        fifo      cledit       iconv 
> 
>            TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
> 
>             NLS     profmem       cairo         ICU long.double     libcurl 
> 
>            TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
> 
>     > system('gcc --version')
> 
>     Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
> 
>     Apple LLVM version 10.0.0 (clang-1000.10.44.4)
> 
>     Target: x86_64-apple-darwin17.7.0
> 
>     Thread model: posix
> 
>     InstalledDir: /Library/Developer/CommandLineTools/usr/bin
> 
>     > system('which gcc')
> 
>     /usr/bin/gcc
> 
>     > system('brew doctor')
> 
>     Your system is ready to brew.
> 
>     > 
> 
>     
> 
>     
> 
>     
> 
>     _______________________________________________
> 
>     R-SIG-Mac mailing list
> 
>     R-SIG-Mac at r-project.org
> 
>     https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
>     
> 
> 
> 
> _______________________________________________
> 
> R-SIG-Mac mailing list
> 
> R-SIG-Mac at r-project.org
> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Mon Jul 29 12:40:20 2019
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Mon, 29 Jul 2019 10:40:20 +0000
Subject: [R-SIG-Mac] In install.packages(),
 C compiler cannot create executables
In-Reply-To: <C44619F1-66E1-4FA9-9985-3448580B9AD6@gmail.com>
References: <E634C3DE-F14C-488F-9A2A-1C0E0BDD0F25@illinois.edu>
 <BN8PR18MB2690444E710FA66761D20CFAFADD0@BN8PR18MB2690.namprd18.prod.outlook.com>,
 <C44619F1-66E1-4FA9-9985-3448580B9AD6@gmail.com>
Message-ID: <BN8PR18MB269025C88CD94EB76DA8EF07FADD0@BN8PR18MB2690.namprd18.prod.outlook.com>

Thanks for your explanation.  I ended up with a different solution.  

After reading 'R for Mac OS X' on the cran website, I installed clang and gfortran packages provided at the website.  These install into /usr/local/. 

After these installations, I was able to successfully install R packages.    

Naresh




From: Luis Puerto <luiss.puerto at gmail.com>

Sent: Monday, July 29, 2019 12:23 AM

To: Naresh Gurbuxani <naresh_gurbuxani at hotmail.com>

Cc: R-sig-mac ML R-Project <r-sig-mac at r-project.org>

Subject: Re: [R-SIG-Mac] In install.packages(), C compiler cannot create executables

?


Install R from cask, as James suggested will provide all the capabilities since it's downloaded from CRAN. The one that does't provide all the capabilities is Homebrew core.




Seth's one will provide all the capabilities too, but you are going to need to build it and then build all the packages you install.




Other think is you want to use OpenBLAS and OpenMP. You should be able to use those libraries with CRAN version ?either directly or through brew cask? but I'm not sure since I use Seth's version.




Best Regards

Luis Puerto

luispuerto.net



> On 28 Jul, 2019, at 19:07, Naresh Gurbuxani <naresh_gurbuxani at hotmail.com> wrote:

> 

> JJB,

> 

> I installed R using instructions given here.? 

> 

> https://github.com/sethrfore/homebrew-r-srf

> 

> It seems that installing R using brew cask will not provide all capabilities.? In any case, I want to use R with Emacs.?


> 

> I will try to reinstall and see if the problem goes away.

> 

> Thanks,

> Naresh

> 

> 

> 

> 

> 

> 

> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Balamuta, James Joseph <balamut2 at illinois.edu>

> 

> Sent: Sunday, July 28, 2019 6:34 PM

> 

> To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>

> 

> Subject: Re: [R-SIG-Mac] In install.packages(), C compiler cannot create executables

> 

>? 

> 

> 

> Greetings and Salutations Naresh Gurbuxani,

> 

> 

> 

> Don't use homebrew to install R. If you must use homebrew, install R via the brew cask project to obtain the CRAN binary vs. the homebrew compiled variant.

> 

> 

> 

> Sincerely,

> 

> 

> 

> JJB

> 

> 

> 

> ?On 7/28/19, 5:28 PM, "R-SIG-Mac on behalf of Naresh Gurbuxani" <r-sig-mac-bounces at r-project.org on behalf of naresh_gurbuxani at hotmail.com> wrote:

> 

> 

> 

>???? Hello,

> 

>???? 

> 

>???? On my Mac, everything is installed using brew.? I am not able to install some R packages which look for C compiler.? Below is an example session on the terminal.


> 

> 

>???? 

> 

>???? I will be thankful for any suggestions.? If this question does not belong to this group, can you suggest where to look?

> 

>???? 

> 

>???? Naresh

> 

>???? 

> 

>???? > install.packages('stringi', repos='https://cran.r-project.org')

> 

>???? Installing package into ?/usr/local/lib/R/3.6/site-library?

> 

>???? (as ?lib? is unspecified)

> 

>???? trying URL 'https://cran.r-project.org/src/contrib/stringi_1.4.3.tar.gz'

> 

>???? Content type 'application/x-gzip' length 7290890 bytes (7.0 MB)

> 

>???? ==================================================

> 

>???? downloaded 7.0 MB

> 

>???? 

> 

>???? * installing *source* package ?stringi? ...

> 

>???? ** package ?stringi? successfully unpacked and MD5 sums checked

> 

>???? ** using staged installation

> 

>???? checking for R_HOME... /usr/local/Cellar/r/3.6.1/lib/R

> 

>???? checking for R... /usr/local/Cellar/r/3.6.1/lib/R/bin/R

> 

>???? checking for endianness... little

> 

>???? checking for R >= 3.1.0 for C++11 use... yes

> 

>???? checking for R < 3.4.0 for CXX1X flag use... no

> 

>???? checking for cat... /bin/cat

> 

>???? checking for local ICUDT_DIR... icu61/data

> 

>???? checking for gcc... /usr/local/opt/llvm/bin/clang -fopenmp

> 

>???? checking whether the C compiler works... no

> 

>???? configure: error: in `/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3KDSQ5/R.INSTALL87262e900de6/stringi':

> 

>???? configure: error: C compiler cannot create executables

> 

>???? See `config.log' for more details

> 

>???? ERROR: configuration failed for package ?stringi?

> 

>???? * removing ?/usr/local/lib/R/3.6/site-library/stringi?

> 

>???? 

> 

>???? The downloaded source packages are in

> 

>????????? ?/private/var/folders/nv/778l86d50jx2_wlzdw6m16l40000gn/T/Rtmp3hnR8I/downloaded_packages?

> 

>???? Warning message:

> 

>???? In install.packages("stringi", repos = "https://cran.r-project.org") :

> 

>?????? installation of package ?stringi? had non-zero exit status

> 

>???? > R.Version()

> 

>???? $platform

> 

>???? [1] "x86_64-apple-darwin17.7.0"

> 

>???? 

> 

>???? $arch

> 

>???? [1] "x86_64"

> 

>???? 

> 

>???? $os

> 

>???? [1] "darwin17.7.0"

> 

>???? 

> 

>???? $system

> 

>???? [1] "x86_64, darwin17.7.0"

> 

>???? 

> 

>???? $status

> 

>???? [1] ""

> 

>???? 

> 

>???? $major

> 

>???? [1] "3"

> 

>???? 

> 

>???? $minor

> 

>???? [1] "6.1"

> 

>???? 

> 

>???? $year

> 

>???? [1] "2019"

> 

>???? 

> 

>???? $month

> 

>???? [1] "07"

> 

>???? 

> 

>???? $day

> 

>???? [1] "05"

> 

>???? 

> 

>???? $`svn rev`

> 

>???? [1] "76782"

> 

>???? 

> 

>???? $language

> 

>???? [1] "R"

> 

>???? 

> 

>???? $version.string

> 

>???? [1] "R version 3.6.1 (2019-07-05)"

> 

>???? 

> 

>???? $nickname

> 

>???? [1] "Action of the Toes"

> 

>???? 

> 

>???? > capabilities()

> 

>??????????? jpeg???????? png??????? tiff?????? tcltk???????? X11??????? aqua 

> 

>??????????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE 

> 

>??????? http/ftp???? sockets????? libxml??????? fifo????? cledit?????? iconv 

> 

>??????????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE 

> 

>???????????? NLS???? profmem?????? cairo???????? ICU long.double???? libcurl 

> 

>??????????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE??????? TRUE 

> 

>???? > system('gcc --version')

> 

>???? Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/usr/include/c++/4.2.1

> 

>???? Apple LLVM version 10.0.0 (clang-1000.10.44.4)

> 

>???? Target: x86_64-apple-darwin17.7.0

> 

>???? Thread model: posix

> 

>???? InstalledDir: /Library/Developer/CommandLineTools/usr/bin

> 

>???? > system('which gcc')

> 

>???? /usr/bin/gcc

> 

>???? > system('brew doctor')

> 

>???? Your system is ready to brew.

> 

>???? > 

> 

>???? 

> 

>???? 

> 

>???? 

> 

>???? _______________________________________________

> 

>???? R-SIG-Mac mailing list

> 

>???? R-SIG-Mac at r-project.org

> 

>???? https://stat.ethz.ch/mailman/listinfo/r-sig-mac

> 

>???? 

> 

> 

> 

> _______________________________________________

> 

> R-SIG-Mac mailing list

> 

> R-SIG-Mac at r-project.org

> 

> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

> 

> _______________________________________________

> R-SIG-Mac mailing list

> R-SIG-Mac at r-project.org

> https://stat.ethz.ch/mailman/listinfo/r-sig-mac




