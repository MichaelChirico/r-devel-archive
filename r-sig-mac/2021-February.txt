From p@rkhur@ @end|ng |rom |nd|@n@@edu  Tue Feb  2 02:53:16 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Tue, 2 Feb 2021 01:53:16 +0000
Subject: [R-SIG-Mac] Question about stripchart
Message-ID: <BN7PR08MB4114390DC4118385DEB9C76FD0B59@BN7PR08MB4114.namprd08.prod.outlook.com>

I have E. coli data (variable ?conc?) for 73 dates over months from Apr through Dec (variable ?monames?).  The data are in order from the April through December, and are in a data.frame titled "monamescon?.  When I run stripchart(conc~monames, data=monamescon, vert=TRUE), the months come out in alphabetical order along the x axis.  How can I get them to come out in time order instead?


	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Tue Feb  2 03:11:14 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 2 Feb 2021 02:11:14 +0000
Subject: [R-SIG-Mac] Question about stripchart
In-Reply-To: <BN7PR08MB4114390DC4118385DEB9C76FD0B59@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114390DC4118385DEB9C76FD0B59@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <CO1PR11MB51078FA107245E4034FEDEBAD2B59@CO1PR11MB5107.namprd11.prod.outlook.com>

month.factor <- factor(month.name, month.name)


> month.name
 [1] "January"   "February"  "March"     "April"     "May"       "June"
 [7] "July"      "August"    "September" "October"   "November"  "December"
> class(month.name)
[1] "character"
> month.factor <- factor(month.name, month.name)
> levels(factor(month.name))
 [1] "April"     "August"    "December"  "February"  "January"   "July"
 [7] "June"      "March"     "May"       "November"  "October"   "September"
> levels(factor(month.factor))
 [1] "January"   "February"  "March"     "April"     "May"       "June"
 [7] "July"      "August"    "September" "October"   "November"  "December"

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Parkhurst, David F. <parkhurs at indiana.edu>
Sent: Monday, February 1, 2021 8:53 PM
To: r-sig-mac at r-project.org
Subject: [R-SIG-Mac] Question about stripchart

I have E. coli data (variable ?conc?) for 73 dates over months from Apr through Dec (variable ?monames?).  The data are in order from the April through December, and are in a data.frame titled "monamescon?.  When I run stripchart(conc~monames, data=monamescon, vert=TRUE), the months come out in alphabetical order along the x axis.  How can I get them to come out in time order instead?


        [[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Tue Feb  2 23:19:14 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 2 Feb 2021 22:19:14 +0000
Subject: [R-SIG-Mac] Fw: Question about stripchart
In-Reply-To: <BN7PR08MB4114B8CD98B92964475012D0D0B59@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114390DC4118385DEB9C76FD0B59@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <CO1PR11MB51070B0FA55B47900F966658D2B59@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <BN7PR08MB4114B8CD98B92964475012D0D0B59@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <CO1PR11MB5107BD49343AC6C3307A9358D2B59@CO1PR11MB5107.namprd11.prod.outlook.com>

months<-c("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")

monames.factor <- factor(monamescon$monames, levels=months)
stripchart(conc~monames.factor, data=monamescon, vert=TRUE)

read the help file
?factor

and see that the levels factor must contain unique values.

Please always keep the list as a recipient when you respond.
This question belongs on R-help at r-project.org
because it is not Macintosh specific.
Any followup should be sent to R-help at R-project.org


________________________________________
From: Parkhurst, David F. <parkhurs at indiana.edu>
Sent: Tuesday, February 2, 2021 4:29 PM
To: Richard M. Heiberger
Subject: Re: Question about stripchart

Hmm.  I?m guessing that this might work with my stripchart problem:

Define months<-c("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")

Then use mofac<-factor(months, months)

Then set up a vector of 73 elements like

mos<-c(mofac[4],mofac[4],?,mofac[12])

Then my call to stripchart would be (conc~mos, ?)

Is that what I need to do?


From: Richard M. Heiberger <rmh at temple.edu>
Date: Monday, February 1, 2021 at 9:10 PM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Subject: Re: Question about stripchart
month.factor <- factor(month.name, month.name)


> month.name
 [1] "January"   "February"  "March"     "April"     "May"       "June"
 [7] "July"      "August"    "September" "October"   "November"  "December"
> class(month.name)
[1] "character"
> month.factor <- factor(month.name, month.name)
> levels(factor(month.name))
 [1] "April"     "August"    "December"  "February"  "January"   "July"
 [7] "June"      "March"     "May"       "November"  "October"   "September"
> levels(factor(month.factor))
 [1] "January"   "February"  "March"     "April"     "May"       "June"
 [7] "July"      "August"    "September" "October"   "November"  "December"
>

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Parkhurst, David F. <parkhurs at indiana.edu>
Sent: Monday, February 1, 2021 8:53 PM
To: r-sig-mac at r-project.org
Subject: [R-SIG-Mac] Question about stripchart

I have E. coli data (variable ?conc?) for 73 dates over months from Apr through Dec (variable ?monames?).  The data are in order from the April through December, and are in a data.frame titled "monamescon?.  When I run stripchart(conc~monames, data=monamescon, vert=TRUE), the months come out in alphabetical order along the x axis.  How can I get them to come out in time order instead?


        [[alternative HTML version deleted]]

From p@rkhur@ @end|ng |rom |nd|@n@@edu  Tue Feb  2 23:21:49 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Tue, 2 Feb 2021 22:21:49 +0000
Subject: [R-SIG-Mac] Question about stripchart
In-Reply-To: <CO1PR11MB5107BD49343AC6C3307A9358D2B59@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <BN7PR08MB4114390DC4118385DEB9C76FD0B59@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <CO1PR11MB51070B0FA55B47900F966658D2B59@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <BN7PR08MB4114B8CD98B92964475012D0D0B59@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <CO1PR11MB5107BD49343AC6C3307A9358D2B59@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <BN7PR08MB4114B7092671FD81C458B31ED0B59@BN7PR08MB4114.namprd08.prod.outlook.com>

I?ll try that.  Thank you again.

From: Richard M. Heiberger <rmh at temple.edu>
Date: Tuesday, February 2, 2021 at 5:20 PM
To: Parkhurst, David F. <parkhurs at indiana.edu>, r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Fw: Question about stripchart
months<-c("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")

monames.factor <- factor(monamescon$monames, levels=months)
stripchart(conc~monames.factor, data=monamescon, vert=TRUE)

read the help file
?factor

and see that the levels factor must contain unique values.

Please always keep the list as a recipient when you respond.
This question belongs on R-help at r-project.org
because it is not Macintosh specific.
Any followup should be sent to R-help at R-project.org


________________________________________
From: Parkhurst, David F. <parkhurs at indiana.edu>
Sent: Tuesday, February 2, 2021 4:29 PM
To: Richard M. Heiberger
Subject: Re: Question about stripchart

Hmm.  I?m guessing that this might work with my stripchart problem:

Define months<-c("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")

Then use mofac<-factor(months, months)

Then set up a vector of 73 elements like

mos<-c(mofac[4],mofac[4],?,mofac[12])

Then my call to stripchart would be (conc~mos, ?)

Is that what I need to do?


From: Richard M. Heiberger <rmh at temple.edu>
Date: Monday, February 1, 2021 at 9:10 PM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Subject: Re: Question about stripchart
month.factor <- factor(month.name, month.name)


> month.name
 [1] "January"   "February"  "March"     "April"     "May"       "June"
 [7] "July"      "August"    "September" "October"   "November"  "December"
> class(month.name)
[1] "character"
> month.factor <- factor(month.name, month.name)
> levels(factor(month.name))
 [1] "April"     "August"    "December"  "February"  "January"   "July"
 [7] "June"      "March"     "May"       "November"  "October"   "September"
> levels(factor(month.factor))
 [1] "January"   "February"  "March"     "April"     "May"       "June"
 [7] "July"      "August"    "September" "October"   "November"  "December"
>

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Parkhurst, David F. <parkhurs at indiana.edu>
Sent: Monday, February 1, 2021 8:53 PM
To: r-sig-mac at r-project.org
Subject: [R-SIG-Mac] Question about stripchart

I have E. coli data (variable ?conc?) for 73 dates over months from Apr through Dec (variable ?monames?).  The data are in order from the April through December, and are in a data.frame titled "monamescon?.  When I run stripchart(conc~monames, data=monamescon, vert=TRUE), the months come out in alphabetical order along the x axis.  How can I get them to come out in time order instead?


        [[alternative HTML version deleted]]

	[[alternative HTML version deleted]]


From k|rk|ucy @end|ng |rom m@c@com  Wed Feb  3 20:52:10 2021
From: k|rk|ucy @end|ng |rom m@c@com (Kirk Steyer)
Date: Wed, 3 Feb 2021 11:52:10 -0800
Subject: [R-SIG-Mac] Blank menus
Message-ID: <A1AEBA3D-F1AC-4530-9A8A-7D1C537914D9@mac.com>

Several issues I have noticed recently in:

R version 4.0.3 Patched (2021-02-02 r79929) -- "Bunny-Wunnies Freak Out"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

Running on:

Mac (Retina 5K, 27-inch, Late 2014) with macOS Big Sur 11.2 with 4 GHz Quad-Core Intel Core i7 and 32 GB 1600 MHz DDR3

The GUI main menus appear blank until you scroll over them with the pointer. This usually happens after some time R has been running.

Thanks

 

Kirk Steyer
Steyer Consulting Engineering Resources LLC
Senior Principal Aseptic Process Engineer
2306 Lava Drive
San Jose, CA 95133
O: 408.937.5807
C: 408.833.9102
kirk at steyerconsulting.com <mailto:kirk at steyerconsulting.com>
www.steyerconsulting.com <http://www.steyerconsulting.com/>
https://www.facebook.com/steyerconsulting/ <https://www.facebook.com/steyerconsulting/>
https://www.linkedin.com/company/18251090/ <https://www.linkedin.com/company/18251090/>
https://www.linkedin.com/in/kirksteyer/ <https://www.linkedin.com/in/kirksteyer/>










-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210203/c7ccb83c/attachment-0001.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: PastedGraphic-19.tiff
Type: image/tiff
Size: 22050 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210203/c7ccb83c/attachment-0001.tiff>

From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Sat Feb  6 18:01:54 2021
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Sat, 6 Feb 2021 17:01:54 +0000
Subject: [R-SIG-Mac] XQuartz now supports Apple Silicon
In-Reply-To: <CAA-FpKXfmLg07QXG1TP93YaXVOQynuPS0fJirDa6EX5SLibgBQ@mail.gmail.com>
References: <CAA-FpKXfmLg07QXG1TP93YaXVOQynuPS0fJirDa6EX5SLibgBQ@mail.gmail.com>
Message-ID: <8e2ade5b-9ca9-7b92-740e-8ab399d9614d@stats.ox.ac.uk>

On 30/01/2021 09:46, Bob Rudis wrote:
> Announcement and d/l links:
> 
> ? https://www.mail-archive.com/xquartz-dev at lists.macosforge.org/msg01027.html
> ? https://www.xquartz.org/releases/XQuartz-2.8.0_beta1.html
> 
> Folks who use it should get prompted to install it next time you open it.

And now beta3 which I did get nagged to install (even though it is a 
beta and I have not selected beta updates, and unlike beta1).

There is a problem with these betas - they do not contain cairo.  The 
R-admin instructions assumed that XQuartz did (as it has ever since R 
started making use of cairo) and I have just revised them to take that 
into account.  AFAICS the binary distribution of R is statically linked 
to cairo, but it is dynamically linked to X11 libs, which look 
compatible enough.  Nevertheless, using XQuartz betas with binary R 
4.0.x distributions is uncharted territory.

As the betas install into /opt/X11 on top of version 2.7.11, only people 
installing from scratch will notice that cairo is missing.

I have managed to build R with full cairo support on arm64, but only by 
building cairo from source (neither mac.r-project.org/libs-arm64 nor 
homebrew have cairo-xlib) and using fontconfig 2.13.93 not 2.13.1.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sun Feb  7 19:27:02 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Sun, 7 Feb 2021 18:27:02 +0000
Subject: [R-SIG-Mac] Problem with dot chart examples in my Mac
Message-ID: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>

 I?m trying to see the result of the dotchart example, i.e. dotchart(VADeaths, main = "Death Rates in Virginia - 1940").
When I enter that and hit return, a blank Quartz 2 [*] window comes up.  I?ve checked, and the VADeaths data are present.
What should I do to actually see the result of that call?
David


	[[alternative HTML version deleted]]


From tomhopper @end|ng |rom gm@||@com  Sun Feb  7 20:51:27 2021
From: tomhopper @end|ng |rom gm@||@com (Tom Hopper)
Date: Sun, 7 Feb 2021 14:51:27 -0500
Subject: [R-SIG-Mac] Problem with dot chart examples in my Mac
In-Reply-To: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>

I'm seeing the same problem in R 4.0.3 GUI 1.73 Catalina build (7892) on
macOS 11.2 with the following commands:

> data("VADeaths")
> dotchart(VADeaths, main = "Death Rates in Virginia - 1940")

I'm also seeing the following error:

> 2021-02-07 14:41:15.950 R[4408:267051] Warning: Expected min height of
view: (<NSButton: 0x7fd14b6248b0>) to be less than or equal to 30 but got a
height of 32.000000. This error will be logged once per view in violation.


Plots fine in Rstudio 1.3.1093.

Regards,

Tom


On Sun, Feb 7, 2021 at 1:27 PM Parkhurst, David F. <parkhurs at indiana.edu>
wrote:

>  I?m trying to see the result of the dotchart example, i.e.
> dotchart(VADeaths, main = "Death Rates in Virginia - 1940").
> When I enter that and hit return, a blank Quartz 2 [*] window comes up.
> I?ve checked, and the VADeaths data are present.
> What should I do to actually see the result of that call?
> David
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From gregco@t@ @end|ng |rom me@com  Mon Feb  8 05:47:14 2021
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Sun, 7 Feb 2021 23:47:14 -0500
Subject: [R-SIG-Mac] Problem with dot chart examples in my Mac
In-Reply-To: <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>
References: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
 <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>
Message-ID: <3234F5E4-C48E-44B1-A7CA-4A4B3700B704@me.com>

Tom Hopper,
On Jan 8, 2021, I first reported that R on Mac gave the error message you reported today.
We R Mac users are all getting this error. It is now a month later. I am not aware of any fix.
Greg Coats

2021-01-07 22:58:42.997 R[8311:37566]
Warning: Expected min height of view: 
(<NSPopoverTouchBarItemButton: 0x7fcb6c592570>) 
to be less than or equal to 30 but got a height of 32.000000. 
This error will be logged once per view in violation.

> On Feb 7, 2021, at 2:51 PM, Tom Hopper <tomhopper at gmail.com> wrote:


I'm also seeing the following error:
2021-02-07 14:41:15.950 R[4408:267051] 
Warning: Expected min height of view: 
(<NSButton: 0x7fd14b6248b0>) 
to be less than or equal to 30 but got a height of 32.000000. 
This error will be logged once per view in violation.


From dc@r|@on @end|ng |rom t@mu@edu  Mon Feb  8 05:47:53 2021
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sun, 7 Feb 2021 22:47:53 -0600
Subject: [R-SIG-Mac] Problem with dot chart examples in my Mac
In-Reply-To: <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>
References: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
 <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>
Message-ID: <CAE-dL2oxZxWFJtToE28rYDkHNVF5Y_Q1hb06Wgo8e2pVAOrmUg@mail.gmail.com>

MacOS 11.2
R version 4.0.3 Patched (2021-01-30 r79912)
XQuartz 2.8.0_beta3

I get the same result. If I use Command Left Arrow/Command Right Arrow, the
plot appears so it is getting to the graphics device's history.
Alternatively, maximizing the XQuartz window causes the plot to appear and
it remains when the window is un-maximized.

David Carlson

On Sun, Feb 7, 2021 at 1:52 PM Tom Hopper <tomhopper at gmail.com> wrote:

> I'm seeing the same problem in R 4.0.3 GUI 1.73 Catalina build (7892) on
> macOS 11.2 with the following commands:
>
> > data("VADeaths")
> > dotchart(VADeaths, main = "Death Rates in Virginia - 1940")
>
> I'm also seeing the following error:
>
> > 2021-02-07 14:41:15.950 R[4408:267051] Warning: Expected min height of
> view: (<NSButton: 0x7fd14b6248b0>) to be less than or equal to 30 but got a
> height of 32.000000. This error will be logged once per view in violation.
>
>
> Plots fine in Rstudio 1.3.1093.
>
> Regards,
>
> Tom
>
>
> On Sun, Feb 7, 2021 at 1:27 PM Parkhurst, David F. <parkhurs at indiana.edu>
> wrote:
>
> >  I?m trying to see the result of the dotchart example, i.e.
> > dotchart(VADeaths, main = "Death Rates in Virginia - 1940").
> > When I enter that and hit return, a blank Quartz 2 [*] window comes up.
> > I?ve checked, and the VADeaths data are present.
> > What should I do to actually see the result of that call?
> > David
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!KwNVnqRv!RaArx95ah4GdGjK196trLO5e7SOW-zq06ubhqpxLRu-4OiyJM5CATF_vCfmY0e4$
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!KwNVnqRv!RaArx95ah4GdGjK196trLO5e7SOW-zq06ubhqpxLRu-4OiyJM5CATF_vCfmY0e4$
>

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Mon Feb  8 11:05:26 2021
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Mon, 8 Feb 2021 11:05:26 +0100
Subject: [R-SIG-Mac] Problem with dot chart examples in my Mac
In-Reply-To: <3234F5E4-C48E-44B1-A7CA-4A4B3700B704@me.com>
References: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
 <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>
 <3234F5E4-C48E-44B1-A7CA-4A4B3700B704@me.com>
Message-ID: <94C801C0-83F5-4603-9657-CBF15A51ECEB@gmail.com>

If you are not aware of the fix, then you are not reading your email...

The NSButton message was reported to be gone in RGui v.7903, on r-help by malone at malonequantitative.com on Jan. 18. 

Current patch versions (https://mac.r-project.org) are at v.7922. Next formal patch release (4.0.4) is on Feb 15, prerelease downloadable from said page.

- Peter Dalgaard



> On 8 Feb 2021, at 05:47 , Gregory Coats via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Tom Hopper,
> On Jan 8, 2021, I first reported that R on Mac gave the error message you reported today.
> We R Mac users are all getting this error. It is now a month later. I am not aware of any fix.
> Greg Coats
> 
> 2021-01-07 22:58:42.997 R[8311:37566]
> Warning: Expected min height of view: 
> (<NSPopoverTouchBarItemButton: 0x7fcb6c592570>) 
> to be less than or equal to 30 but got a height of 32.000000. 
> This error will be logged once per view in violation.
> 
>> On Feb 7, 2021, at 2:51 PM, Tom Hopper <tomhopper at gmail.com> wrote:
> 
> 
> I'm also seeing the following error:
> 2021-02-07 14:41:15.950 R[4408:267051] 
> Warning: Expected min height of view: 
> (<NSButton: 0x7fd14b6248b0>) 
> to be less than or equal to 30 but got a height of 32.000000. 
> This error will be logged once per view in violation.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From tomhopper @end|ng |rom gm@||@com  Mon Feb  8 14:02:19 2021
From: tomhopper @end|ng |rom gm@||@com (Thomas Hopper)
Date: Mon, 8 Feb 2021 08:02:19 -0500
Subject: [R-SIG-Mac] Problem with dot chart examples in my Mac
In-Reply-To: <94C801C0-83F5-4603-9657-CBF15A51ECEB@gmail.com>
References: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
 <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>
 <3234F5E4-C48E-44B1-A7CA-4A4B3700B704@me.com>
 <94C801C0-83F5-4603-9657-CBF15A51ECEB@gmail.com>
Message-ID: <F418C454-5066-421F-A44B-17C3DDDE37E1@gmail.com>

Peter,

Your comment might be tongue-in-cheek, but taking it at face value, I?d like to point out that if there?s a fix and users don?t know about it, that?s a developer communication problem; not a user problem. Most developers deal with this problem by releasing updated versions of their software, which has not happened (current CRAN version is 1.73, which is what I?m using); I know of no developers who have been able to solve this communication problem by publishing notes about beta versions of their software to email lists that have low signal to noise ratios.

Seems like there?s a better way to get updates out if the developers want to avoid users repeatedly pointing out the same bugs.

Thank you,

Tom

> On Feb 8, 2021, at 5:05 AM, Peter Dalgaard <pdalgd at gmail.com> wrote:
> 
> If you are not aware of the fix, then you are not reading your email...
> 
> The NSButton message was reported to be gone in RGui v.7903, on r-help by malone at malonequantitative.com on Jan. 18. 
> 
> Current patch versions (https://mac.r-project.org) are at v.7922. Next formal patch release (4.0.4) is on Feb 15, prerelease downloadable from said page.
> 
> - Peter Dalgaard
> 
> 
> 
>> On 8 Feb 2021, at 05:47 , Gregory Coats via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>> 
>> Tom Hopper,
>> On Jan 8, 2021, I first reported that R on Mac gave the error message you reported today.
>> We R Mac users are all getting this error. It is now a month later. I am not aware of any fix.
>> Greg Coats
>> 
>> 2021-01-07 22:58:42.997 R[8311:37566]
>> Warning: Expected min height of view: 
>> (<NSPopoverTouchBarItemButton: 0x7fcb6c592570>) 
>> to be less than or equal to 30 but got a height of 32.000000. 
>> This error will be logged once per view in violation.
>> 
>>> On Feb 7, 2021, at 2:51 PM, Tom Hopper <tomhopper at gmail.com> wrote:
>> 
>> 
>> I'm also seeing the following error:
>> 2021-02-07 14:41:15.950 R[4408:267051] 
>> Warning: Expected min height of view: 
>> (<NSButton: 0x7fd14b6248b0>) 
>> to be less than or equal to 30 but got a height of 32.000000. 
>> This error will be logged once per view in violation.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 


From pd@|gd @end|ng |rom gm@||@com  Mon Feb  8 14:52:23 2021
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Mon, 8 Feb 2021 14:52:23 +0100
Subject: [R-SIG-Mac] Problem with dot chart examples in my Mac
In-Reply-To: <F418C454-5066-421F-A44B-17C3DDDE37E1@gmail.com>
References: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
 <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>
 <3234F5E4-C48E-44B1-A7CA-4A4B3700B704@me.com>
 <94C801C0-83F5-4603-9657-CBF15A51ECEB@gmail.com>
 <F418C454-5066-421F-A44B-17C3DDDE37E1@gmail.com>
Message-ID: <571D713D-1630-4617-8806-ECDE9BBB123C@gmail.com>

R is a collaborative project, not a commercial one. You may need to look around or ask questions if you need something special. For the present case, someone was complaining about a problem, for which the solution was in the very same mailing list thread that he had himself contributed to. 

We have mechanisms in place for releasing updates in both source and binary formats. The general procedure is outlined on CRAN. For source releases, there is a daily snapshots link on the front page of CRAN. 

For Mac and Windows binaries, you need to go via the relevant links and for Windows, select links under "Other builds". 

For Mac, the link is on the Mac page, where you need to find the line saying "Information, tools and most recent daily builds of the R GUI, R-patched and R-devel can be found at http://mac.R-project.org/". 

What we do not do is to rush out full releases for any minor problem. We run carefully orchestrated patch releases approximately 4 times per year, with alpha/beta/RC cycles every time, so as to minimize the risk of destabilizing the code.

- Peter D.

> On 8 Feb 2021, at 14:02 , Thomas Hopper <tomhopper at gmail.com> wrote:
> 
> Peter,
> 
> Your comment might be tongue-in-cheek, but taking it at face value, I?d like to point out that if there?s a fix and users don?t know about it, that?s a developer communication problem; not a user problem. Most developers deal with this problem by releasing updated versions of their software, which has not happened (current CRAN version is 1.73, which is what I?m using); I know of no developers who have been able to solve this communication problem by publishing notes about beta versions of their software to email lists that have low signal to noise ratios.
> 
> Seems like there?s a better way to get updates out if the developers want to avoid users repeatedly pointing out the same bugs.
> 
> Thank you,
> 
> Tom
> 
>> On Feb 8, 2021, at 5:05 AM, Peter Dalgaard <pdalgd at gmail.com> wrote:
>> 
>> If you are not aware of the fix, then you are not reading your email...
>> 
>> The NSButton message was reported to be gone in RGui v.7903, on r-help by malone at malonequantitative.com on Jan. 18. 
>> 
>> Current patch versions (https://mac.r-project.org) are at v.7922. Next formal patch release (4.0.4) is on Feb 15, prerelease downloadable from said page.
>> 
>> - Peter Dalgaard
>> 
>> 
>> 
>>> On 8 Feb 2021, at 05:47 , Gregory Coats via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> Tom Hopper,
>>> On Jan 8, 2021, I first reported that R on Mac gave the error message you reported today.
>>> We R Mac users are all getting this error. It is now a month later. I am not aware of any fix.
>>> Greg Coats
>>> 
>>> 2021-01-07 22:58:42.997 R[8311:37566]
>>> Warning: Expected min height of view: 
>>> (<NSPopoverTouchBarItemButton: 0x7fcb6c592570>) 
>>> to be less than or equal to 30 but got a height of 32.000000. 
>>> This error will be logged once per view in violation.
>>> 
>>>> On Feb 7, 2021, at 2:51 PM, Tom Hopper <tomhopper at gmail.com> wrote:
>>> 
>>> 
>>> I'm also seeing the following error:
>>> 2021-02-07 14:41:15.950 R[4408:267051] 
>>> Warning: Expected min height of view: 
>>> (<NSButton: 0x7fd14b6248b0>) 
>>> to be less than or equal to 30 but got a height of 32.000000. 
>>> This error will be logged once per view in violation.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Feb  8 23:35:16 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 9 Feb 2021 11:35:16 +1300
Subject: [R-SIG-Mac] Problem with dot chart examples in my Mac
In-Reply-To: <571D713D-1630-4617-8806-ECDE9BBB123C@gmail.com>
References: <BN7PR08MB411480C5C25B0BA63C3BD94ED0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
 <CAJ_8u+KYs-jeK9RegF2JYiy=TBNdjGjMB5m5SAykW50sE9bfUg@mail.gmail.com>
 <3234F5E4-C48E-44B1-A7CA-4A4B3700B704@me.com>
 <94C801C0-83F5-4603-9657-CBF15A51ECEB@gmail.com>
 <F418C454-5066-421F-A44B-17C3DDDE37E1@gmail.com>
 <571D713D-1630-4617-8806-ECDE9BBB123C@gmail.com>
Message-ID: <BC6C96FE-87C8-47EE-B8C8-FBB0CA8897A8@R-project.org>

More importantly, the message is a spurious message from the OS, not an error, and does not affect the functionality - the FAQ mentions how to disable those if they bother you since R has not control over those. If there is an actual bug to report, then please use the bug reporting system.

Cheers,
Simon


> On Feb 9, 2021, at 2:52 AM, Peter Dalgaard <pdalgd at gmail.com> wrote:
> 
> R is a collaborative project, not a commercial one. You may need to look around or ask questions if you need something special. For the present case, someone was complaining about a problem, for which the solution was in the very same mailing list thread that he had himself contributed to. 
> 
> We have mechanisms in place for releasing updates in both source and binary formats. The general procedure is outlined on CRAN. For source releases, there is a daily snapshots link on the front page of CRAN. 
> 
> For Mac and Windows binaries, you need to go via the relevant links and for Windows, select links under "Other builds". 
> 
> For Mac, the link is on the Mac page, where you need to find the line saying "Information, tools and most recent daily builds of the R GUI, R-patched and R-devel can be found at http://mac.R-project.org/". 
> 
> What we do not do is to rush out full releases for any minor problem. We run carefully orchestrated patch releases approximately 4 times per year, with alpha/beta/RC cycles every time, so as to minimize the risk of destabilizing the code.
> 
> - Peter D.
> 
>> On 8 Feb 2021, at 14:02 , Thomas Hopper <tomhopper at gmail.com> wrote:
>> 
>> Peter,
>> 
>> Your comment might be tongue-in-cheek, but taking it at face value, I?d like to point out that if there?s a fix and users don?t know about it, that?s a developer communication problem; not a user problem. Most developers deal with this problem by releasing updated versions of their software, which has not happened (current CRAN version is 1.73, which is what I?m using); I know of no developers who have been able to solve this communication problem by publishing notes about beta versions of their software to email lists that have low signal to noise ratios.
>> 
>> Seems like there?s a better way to get updates out if the developers want to avoid users repeatedly pointing out the same bugs.
>> 
>> Thank you,
>> 
>> Tom
>> 
>>> On Feb 8, 2021, at 5:05 AM, Peter Dalgaard <pdalgd at gmail.com> wrote:
>>> 
>>> If you are not aware of the fix, then you are not reading your email...
>>> 
>>> The NSButton message was reported to be gone in RGui v.7903, on r-help by malone at malonequantitative.com on Jan. 18. 
>>> 
>>> Current patch versions (https://mac.r-project.org) are at v.7922. Next formal patch release (4.0.4) is on Feb 15, prerelease downloadable from said page.
>>> 
>>> - Peter Dalgaard
>>> 
>>> 
>>> 
>>>> On 8 Feb 2021, at 05:47 , Gregory Coats via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>> 
>>>> Tom Hopper,
>>>> On Jan 8, 2021, I first reported that R on Mac gave the error message you reported today.
>>>> We R Mac users are all getting this error. It is now a month later. I am not aware of any fix.
>>>> Greg Coats
>>>> 
>>>> 2021-01-07 22:58:42.997 R[8311:37566]
>>>> Warning: Expected min height of view: 
>>>> (<NSPopoverTouchBarItemButton: 0x7fcb6c592570>) 
>>>> to be less than or equal to 30 but got a height of 32.000000. 
>>>> This error will be logged once per view in violation.
>>>> 
>>>>> On Feb 7, 2021, at 2:51 PM, Tom Hopper <tomhopper at gmail.com> wrote:
>>>> 
>>>> 
>>>> I'm also seeing the following error:
>>>> 2021-02-07 14:41:15.950 R[4408:267051] 
>>>> Warning: Expected min height of view: 
>>>> (<NSButton: 0x7fd14b6248b0>) 
>>>> to be less than or equal to 30 but got a height of 32.000000. 
>>>> This error will be logged once per view in violation.
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> -- 
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  9 10:04:56 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Feb 2021 04:04:56 -0500
Subject: [R-SIG-Mac] rgl and x11 failures on MacOS
Message-ID: <3349dc69-3556-380b-0d2b-9151e15fca12@gmail.com>

I have heard a few reports recently that attempting to load rgl causes R 
to freeze up.  This is related to recent problems with MacOS updates or 
XQuartz updates:  people who now can't load rgl also can't run x11() in R.

I haven't experienced the issue myself, but have heard of two possible 
solutions and have one or two workarounds:

Deleting everything from /opt/X11 (and maybe some other related files), 
rebooting the Mac, and reinstalling XQuartz 2.7.11 worked in one case: 
https://github.com/dmurdoch/rgl/issues/11#issuecomment-775595356 .

Explicitly setting the DISPLAY environment variable to :0.0 fixed a 
problem that might be related: 
https://github.com/XQuartz/XQuartz/issues/66#issue-803786687 .

Installing rgl from source using

   install.packages("rgl", configure.args = "--disable-opengl", type = 
"source")

is a workaround, but it loses the ability to display rgl output in an 
X11 window from R.  You need to use rglwidget() to do the display in a 
browser, e.g. the one built in to RStudio.  I don't think the browser 
built in to R.app has WebGL support, so it probably won't work.

I'm currently working on changes to the build process so that in the 
future the CRAN binary will be able to run the no-X11 version based on 
setting options(rgl.useNULL = TRUE).

I'd appreciate hearing from anyone who can confirm that setting the 
DISPLAY variable fixes the issue, or more specific detail about what 
needs to be deleted so that the XQuartz install will work.

Duncan Murdoch


From pbw @end|ng |rom pbw@|d@@u  Tue Feb  9 16:35:59 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Wed, 10 Feb 2021 01:35:59 +1000
Subject: [R-SIG-Mac] Behaviour or Quartz windows
Message-ID: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>

Hi,

I?ll just confirm the odd behaviour of the Quartz window in Big Sur 11.2 R 4.0.3 GUI 1.73 on M1 silicon. I have installed the beta3 version of Quartz. In my case I have to CMD <- twice, then go forward to get the next to last plot.

Are these Quartz windows constructed using native MacOS graphics or XQuartz?

Peter

?
Peter West
peter.b.west at ehealth.id.au
?that they might touch even the fringe of his garment. And as many as touched it were made well.


From rmh @end|ng |rom temp|e@edu  Tue Feb  9 17:56:45 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 9 Feb 2021 16:56:45 +0000
Subject: [R-SIG-Mac] [External]  Behaviour or Quartz windows
In-Reply-To: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>
References: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>
Message-ID: <CO1PR11MB51075C3C1F385780DF238DD1D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>

When I draw a 9x7 panel lattice it displays 12 panels, then sits there until I resize the window. then the rest appears.  When I display another 9x7, it too sits at 12 panels.
When I Cmd-left for the previous display, the current one vanishes entirely.
When I send the command again, after it sits I resize the window.  Now the full second display
is visible.  When I Cmd-left followed by Cmd-right, the second display is lost.

I am using R version 4.0.3 (2020-10-10) on Silicon Mac Big Sur 11.1 from inside ESS.

XQuartz doesn't report correctly.  On the MenuBar it doesn't say "XQuartz".  Instead it shows a
small Apple Icon which has no information when clicked.  When I search using the MenuBar Spotlight icon, it tells me Xquartz 2.8.0_beta1 and offers to update to beta3.  Clicking on XQuartz.app in the Spotlight menu gives proper XQuartz information in the upper left corner
of the MenuBar.

Rich

Get Outlook for iOS<https://aka.ms/o0ukef>
________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Peter West <pbw at pbw.id.au>
Sent: Tuesday, February 9, 2021 10:35:59 AM
To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: [External] [R-SIG-Mac] Behaviour or Quartz windows

Hi,

I?ll just confirm the odd behaviour of the Quartz window in Big Sur 11.2 R 4.0.3 GUI 1.73 on M1 silicon. I have installed the beta3 version of Quartz. In my case I have to CMD <- twice, then go forward to get the next to last plot.

Are these Quartz windows constructed using native MacOS graphics or XQuartz?

Peter

?
Peter West
peter.b.west at ehealth.id.au
?that they might touch even the fringe of his garment. And as many as touched it were made well.

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Tue Feb  9 18:33:11 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 9 Feb 2021 17:33:11 +0000
Subject: [R-SIG-Mac] [External]  Behaviour or Quartz windows
In-Reply-To: <CO1PR11MB51075C3C1F385780DF238DD1D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>,
 <CO1PR11MB51075C3C1F385780DF238DD1D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <CO1PR11MB5107C891038F2C466951B625D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>

Is R on M1 really talking to the REAL XQuartz?  After I opened XQuartz from the spotlignt, it acknowledged the xterm window, but not the R graphics window.  When I closed the XQuartz
app, the R graphics window was still open and functioning.  dev.cur() says "quartz".

just checked on my older intel mac.  same behavior.  the Xquartz.app menu doesn't list
the R graphics window, and the R graphics shows "...", not "XQuartz" in the menu bar.

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Richard M. Heiberger <rmh at temple.edu>
Sent: Tuesday, February 9, 2021 11:56 AM
To: Peter West; r-sig-mac at r-project.org
Subject: Re: [R-SIG-Mac] [External]  Behaviour or Quartz windows

When I draw a 9x7 panel lattice it displays 12 panels, then sits there until I resize the window. then the rest appears.  When I display another 9x7, it too sits at 12 panels.
When I Cmd-left for the previous display, the current one vanishes entirely.
When I send the command again, after it sits I resize the window.  Now the full second display
is visible.  When I Cmd-left followed by Cmd-right, the second display is lost.

I am using R version 4.0.3 (2020-10-10) on Silicon Mac Big Sur 11.1 from inside ESS.

XQuartz doesn't report correctly.  On the MenuBar it doesn't say "XQuartz".  Instead it shows a
small Apple Icon which has no information when clicked.  When I search using the MenuBar Spotlight icon, it tells me Xquartz 2.8.0_beta1 and offers to update to beta3.  Clicking on XQuartz.app in the Spotlight menu gives proper XQuartz information in the upper left corner
of the MenuBar.

Rich

Get Outlook for iOS<https://aka.ms/o0ukef>
________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Peter West <pbw at pbw.id.au>
Sent: Tuesday, February 9, 2021 10:35:59 AM
To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: [External] [R-SIG-Mac] Behaviour or Quartz windows

Hi,

I?ll just confirm the odd behaviour of the Quartz window in Big Sur 11.2 R 4.0.3 GUI 1.73 on M1 silicon. I have installed the beta3 version of Quartz. In my case I have to CMD <- twice, then go forward to get the next to last plot.

Are these Quartz windows constructed using native MacOS graphics or XQuartz?

Peter

?
Peter West
peter.b.west at ehealth.id.au
?that they might touch even the fringe of his garment. And as many as touched it were made well.

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

        [[alternative HTML version deleted]]


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Tue Feb  9 19:26:28 2021
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Tue, 9 Feb 2021 18:26:28 +0000
Subject: [R-SIG-Mac] [External] Behaviour or Quartz windows
In-Reply-To: <CO1PR11MB5107C891038F2C466951B625D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>
 <CO1PR11MB51075C3C1F385780DF238DD1D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <CO1PR11MB5107C891038F2C466951B625D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <ef8a5ecc-e0ac-6a9a-a216-d56681dc9b9e@stats.ox.ac.uk>

The quartz() device has nothing to so with XQuartz.  Quartz is part of 
macOS: https://en.wikipedia.org/wiki/Quartz_(graphics_layer)

Using XQuartz betas is not supported: it is very unfortunate that they 
are persuading users to install a beta version.

You have not followed the posting guide and posted the sessionInfo(). 
We are left to guess that you are using an Intel build of R under 
emulation, but homebrew does have (a rather broken) arm64 build of R 
4.0.3: we do not support arm64 builds on R < 4.1.0.  My understanding is 
that in the CRAN release of R 4.0.3 only the X11() device and parts of 
Tk interact with XQuartz, although other parts may in other builds.

On 09/02/2021 17:33, Richard M. Heiberger wrote:
> Is R on M1 really talking to the REAL XQuartz?  After I opened XQuartz from the spotlignt, it acknowledged the xterm window, but not the R graphics window.  When I closed the XQuartz
> app, the R graphics window was still open and functioning.  dev.cur() says "quartz".
> 
> just checked on my older intel mac.  same behavior.  the Xquartz.app menu doesn't list
> the R graphics window, and the R graphics shows "...", not "XQuartz" in the menu bar.
> 
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Richard M. Heiberger <rmh at temple.edu>
> Sent: Tuesday, February 9, 2021 11:56 AM
> To: Peter West; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] [External]  Behaviour or Quartz windows
> 
> When I draw a 9x7 panel lattice it displays 12 panels, then sits there until I resize the window. then the rest appears.  When I display another 9x7, it too sits at 12 panels.
> When I Cmd-left for the previous display, the current one vanishes entirely.
> When I send the command again, after it sits I resize the window.  Now the full second display
> is visible.  When I Cmd-left followed by Cmd-right, the second display is lost.
> 
> I am using R version 4.0.3 (2020-10-10) on Silicon Mac Big Sur 11.1 from inside ESS.
> 
> XQuartz doesn't report correctly.  On the MenuBar it doesn't say "XQuartz".  Instead it shows a
> small Apple Icon which has no information when clicked.  When I search using the MenuBar Spotlight icon, it tells me Xquartz 2.8.0_beta1 and offers to update to beta3.  Clicking on XQuartz.app in the Spotlight menu gives proper XQuartz information in the upper left corner
> of the MenuBar.
> 
> Rich
> 
> Get Outlook for iOS<https://aka.ms/o0ukef>
> ________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Peter West <pbw at pbw.id.au>
> Sent: Tuesday, February 9, 2021 10:35:59 AM
> To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> Subject: [External] [R-SIG-Mac] Behaviour or Quartz windows
> 
> Hi,
> 
> I?ll just confirm the odd behaviour of the Quartz window in Big Sur 11.2 R 4.0.3 GUI 1.73 on M1 silicon. I have installed the beta3 version of Quartz. In my case I have to CMD <- twice, then go forward to get the next to last plot.
> 
> Are these Quartz windows constructed using native MacOS graphics or XQuartz?
> 
> Peter
> 
> ?
> Peter West
> peter.b.west at ehealth.id.au
> ?that they might touch even the fringe of his garment. And as many as touched it were made well.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
>          [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From rmh @end|ng |rom temp|e@edu  Tue Feb  9 20:15:26 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 9 Feb 2021 19:15:26 +0000
Subject: [R-SIG-Mac] 
 [External] Re:  [External] Behaviour or Quartz windows
In-Reply-To: <ef8a5ecc-e0ac-6a9a-a216-d56681dc9b9e@stats.ox.ac.uk>
References: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>
 <CO1PR11MB51075C3C1F385780DF238DD1D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <CO1PR11MB5107C891038F2C466951B625D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <ef8a5ecc-e0ac-6a9a-a216-d56681dc9b9e@stats.ox.ac.uk>
Message-ID: <CO1PR11MB5107831E16188F1A8A4EA638D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>

Your are correct.  I have been using quartz() on the released intel build of R_4.0.3 on the
Mac Silicon.  The misbehavior I reported is about quartz(). R graphics defaults to quartz()
when no device is specified.

I was unaware that XQuartz and quartz are unrelated.   quartz is faster and allows pagination.  XQuartz is very slow, you can watch it draw each panel, and each bar in a bar graph.
XQuartz does not have pagination.

________________________________________
From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
Sent: Tuesday, February 9, 2021 1:26 PM
To: Richard M. Heiberger; Peter West; r-sig-mac at r-project.org
Subject: [External] Re: [R-SIG-Mac] [External] Behaviour or Quartz windows

The quartz() device has nothing to so with XQuartz.  Quartz is part of
macOS: https://en.wikipedia.org/wiki/Quartz_(graphics_layer)

Using XQuartz betas is not supported: it is very unfortunate that they
are persuading users to install a beta version.

You have not followed the posting guide and posted the sessionInfo().
We are left to guess that you are using an Intel build of R under
emulation, but homebrew does have (a rather broken) arm64 build of R
4.0.3: we do not support arm64 builds on R < 4.1.0.  My understanding is
that in the CRAN release of R 4.0.3 only the X11() device and parts of
Tk interact with XQuartz, although other parts may in other builds.

On 09/02/2021 17:33, Richard M. Heiberger wrote:
> Is R on M1 really talking to the REAL XQuartz?  After I opened XQuartz from the spotlignt, it acknowledged the xterm window, but not the R graphics window.  When I closed the XQuartz
> app, the R graphics window was still open and functioning.  dev.cur() says "quartz".
>
> just checked on my older intel mac.  same behavior.  the Xquartz.app menu doesn't list
> the R graphics window, and the R graphics shows "...", not "XQuartz" in the menu bar.
>
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Richard M. Heiberger <rmh at temple.edu>
> Sent: Tuesday, February 9, 2021 11:56 AM
> To: Peter West; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] [External]  Behaviour or Quartz windows
>
> When I draw a 9x7 panel lattice it displays 12 panels, then sits there until I resize the window. then the rest appears.  When I display another 9x7, it too sits at 12 panels.
> When I Cmd-left for the previous display, the current one vanishes entirely.
> When I send the command again, after it sits I resize the window.  Now the full second display
> is visible.  When I Cmd-left followed by Cmd-right, the second display is lost.
>
> I am using R version 4.0.3 (2020-10-10) on Silicon Mac Big Sur 11.1 from inside ESS.
>
> XQuartz doesn't report correctly.  On the MenuBar it doesn't say "XQuartz".  Instead it shows a
> small Apple Icon which has no information when clicked.  When I search using the MenuBar Spotlight icon, it tells me Xquartz 2.8.0_beta1 and offers to update to beta3.  Clicking on XQuartz.app in the Spotlight menu gives proper XQuartz information in the upper left corner
> of the MenuBar.
>
> Rich
>
> Get Outlook for iOS<https://aka.ms/o0ukef>
> ________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Peter West <pbw at pbw.id.au>
> Sent: Tuesday, February 9, 2021 10:35:59 AM
> To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> Subject: [External] [R-SIG-Mac] Behaviour or Quartz windows
>
> Hi,
>
> I?ll just confirm the odd behaviour of the Quartz window in Big Sur 11.2 R 4.0.3 GUI 1.73 on M1 silicon. I have installed the beta3 version of Quartz. In my case I have to CMD <- twice, then go forward to get the next to last plot.
>
> Are these Quartz windows constructed using native MacOS graphics or XQuartz?
>
> Peter
>
> ?
> Peter West
> peter.b.west at ehealth.id.au
> ?that they might touch even the fringe of his garment. And as many as touched it were made well.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>          [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford

From k@@perd@n|e|h@n@en @end|ng |rom gm@||@com  Tue Feb  9 21:23:10 2021
From: k@@perd@n|e|h@n@en @end|ng |rom gm@||@com (Kasper Daniel Hansen)
Date: Tue, 9 Feb 2021 21:23:10 +0100
Subject: [R-SIG-Mac] 
 [External] Re: [External] Behaviour or Quartz windows
In-Reply-To: <CO1PR11MB5107831E16188F1A8A4EA638D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>
 <CO1PR11MB51075C3C1F385780DF238DD1D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <CO1PR11MB5107C891038F2C466951B625D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <ef8a5ecc-e0ac-6a9a-a216-d56681dc9b9e@stats.ox.ac.uk>
 <CO1PR11MB5107831E16188F1A8A4EA638D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <CAC2h7uv10uk-PzZM4TtnzFD8mDVY3ereiEpE+cZuDouPmMeaNw@mail.gmail.com>

quartz is the graphics layer of OS X (
https://en.wikipedia.org/wiki/Quartz_(graphics_layer)). This is why the
"native" Apple device is called quartz() in R. This is a super nice device
IMO.

Xquartz is a port of X11 to quartz. To use XQuartz on OS X you have to use
the x11() device (or features which uses X11). So basically, they have
nothing to do with each other.

On Tue, Feb 9, 2021 at 8:15 PM Richard M. Heiberger <rmh at temple.edu> wrote:

> Your are correct.  I have been using quartz() on the released intel build
> of R_4.0.3 on the
> Mac Silicon.  The misbehavior I reported is about quartz(). R graphics
> defaults to quartz()
> when no device is specified.
>
> I was unaware that XQuartz and quartz are unrelated.   quartz is faster
> and allows pagination.  XQuartz is very slow, you can watch it draw each
> panel, and each bar in a bar graph.
> XQuartz does not have pagination.
>
> ________________________________________
> From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
> Sent: Tuesday, February 9, 2021 1:26 PM
> To: Richard M. Heiberger; Peter West; r-sig-mac at r-project.org
> Subject: [External] Re: [R-SIG-Mac] [External] Behaviour or Quartz windows
>
> The quartz() device has nothing to so with XQuartz.  Quartz is part of
> macOS: https://en.wikipedia.org/wiki/Quartz_(graphics_layer)
>
> Using XQuartz betas is not supported: it is very unfortunate that they
> are persuading users to install a beta version.
>
> You have not followed the posting guide and posted the sessionInfo().
> We are left to guess that you are using an Intel build of R under
> emulation, but homebrew does have (a rather broken) arm64 build of R
> 4.0.3: we do not support arm64 builds on R < 4.1.0.  My understanding is
> that in the CRAN release of R 4.0.3 only the X11() device and parts of
> Tk interact with XQuartz, although other parts may in other builds.
>
> On 09/02/2021 17:33, Richard M. Heiberger wrote:
> > Is R on M1 really talking to the REAL XQuartz?  After I opened XQuartz
> from the spotlignt, it acknowledged the xterm window, but not the R
> graphics window.  When I closed the XQuartz
> > app, the R graphics window was still open and functioning.  dev.cur()
> says "quartz".
> >
> > just checked on my older intel mac.  same behavior.  the Xquartz.app
> menu doesn't list
> > the R graphics window, and the R graphics shows "...", not "XQuartz" in
> the menu bar.
> >
> > ________________________________________
> > From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Richard
> M. Heiberger <rmh at temple.edu>
> > Sent: Tuesday, February 9, 2021 11:56 AM
> > To: Peter West; r-sig-mac at r-project.org
> > Subject: Re: [R-SIG-Mac] [External]  Behaviour or Quartz windows
> >
> > When I draw a 9x7 panel lattice it displays 12 panels, then sits there
> until I resize the window. then the rest appears.  When I display another
> 9x7, it too sits at 12 panels.
> > When I Cmd-left for the previous display, the current one vanishes
> entirely.
> > When I send the command again, after it sits I resize the window.  Now
> the full second display
> > is visible.  When I Cmd-left followed by Cmd-right, the second display
> is lost.
> >
> > I am using R version 4.0.3 (2020-10-10) on Silicon Mac Big Sur 11.1 from
> inside ESS.
> >
> > XQuartz doesn't report correctly.  On the MenuBar it doesn't say
> "XQuartz".  Instead it shows a
> > small Apple Icon which has no information when clicked.  When I search
> using the MenuBar Spotlight icon, it tells me Xquartz 2.8.0_beta1 and
> offers to update to beta3.  Clicking on XQuartz.app in the Spotlight menu
> gives proper XQuartz information in the upper left corner
> > of the MenuBar.
> >
> > Rich
> >
> > Get Outlook for iOS<https://aka.ms/o0ukef>
> > ________________________________
> > From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Peter
> West <pbw at pbw.id.au>
> > Sent: Tuesday, February 9, 2021 10:35:59 AM
> > To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> > Subject: [External] [R-SIG-Mac] Behaviour or Quartz windows
> >
> > Hi,
> >
> > I?ll just confirm the odd behaviour of the Quartz window in Big Sur 11.2
> R 4.0.3 GUI 1.73 on M1 silicon. I have installed the beta3 version of
> Quartz. In my case I have to CMD <- twice, then go forward to get the next
> to last plot.
> >
> > Are these Quartz windows constructed using native MacOS graphics or
> XQuartz?
> >
> > Peter
> >
> > ?
> > Peter West
> > peter.b.west at ehealth.id.au
> > ?that they might touch even the fringe of his garment. And as many as
> touched it were made well.
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> >          [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Best,
Kasper

	[[alternative HTML version deleted]]


From t|m@b@te@ @end|ng |rom ed@@c@uk  Tue Feb  9 23:29:31 2021
From: t|m@b@te@ @end|ng |rom ed@@c@uk (BATES Timothy)
Date: Tue, 9 Feb 2021 22:29:31 +0000
Subject: [R-SIG-Mac] Behaviour or Quartz windows
In-Reply-To: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>
References: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>
Message-ID: <364C5F1E-A7F7-4854-ACD9-A6448EB895F7@ed.ac.uk>

Same behavior here with ggplot and base plotting: plots don?t display, but if I cmd<- then cmd->, the plot is drawn

sessionInfo() output below

> On 9 Feb 2021, at 15:35, Peter West <pbw at pbw.id.au> wrote:
> I?ll just confirm the odd behaviour of the Quartz window in Big Sur 11.2 R 4.0.3 GUI 1.73 on M1 silicon. I have installed the beta3 version of Quartz. In my case I have to CMD <- twice, then go forward to get the next to last plot.


sessionInfo()
R version 4.0.3 (2020-10-10)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] ggplot2_3.3.2     umx_4.3.0         cowplot_1.1.0     OpenMx_2.18.1-233 devtools_2.3.0    usethis_2.0.0

loaded via a namespace (and not attached):
[1] colorspace_2.0-0    ellipsis_0.3.1      rprojroot_2.0.2     R2HTML_2.3.2        fs_1.4.1
[6] rstudioapi_0.13     farver_2.0.3        roxygen2_7.1.1      lavaan_0.6-6        remotes_2.1.1
[11] fansi_0.4.1         mvtnorm_1.1-0       xml2_1.3.2          extrafont_0.17      mnormt_1.5-7
[16] knitr_1.30          pkgload_1.1.0       jsonlite_1.7.2      Rttf2pt1_1.3.8      DiagrammeR_1.0.6.1
[21] compiler_4.0.3      httr_1.4.1          assertthat_0.2.1    Matrix_1.2-18       cli_2.2.0
[26] hrbrthemes_0.8.6    visNetwork_2.0.9    htmltools_0.5.0     prettyunits_1.1.1   tools_4.0.3
[31] gtable_0.3.0        glue_1.4.2          dplyr_0.8.5         rsvg_2.1            V8_3.4.0
[36] Rcpp_1.0.5          vctrs_0.3.6         nlme_3.1-149        extrafontdb_1.0     DiagrammeRsvg_0.1
[41] xfun_0.19           stringr_1.4.0       ps_1.5.0            testthat_3.0.1      rvest_0.3.6
[46] lifecycle_0.2.0     MASS_7.3-53         scales_1.1.1        parallel_4.0.3      RColorBrewer_1.1-2
[51] curl_4.3            memoise_1.1.0       MuMIn_1.43.15       gdtools_0.2.2       stringi_1.5.3
[56] highr_0.8           desc_1.2.0          polycor_0.7-10      pkgbuild_1.2.0      rlang_0.4.9
[61] pkgconfig_2.0.3     commonmark_1.7      systemfonts_0.3.2   bitops_1.0-6        evaluate_0.14
[66] lattice_0.20-41     purrr_0.3.4         labeling_0.4.2      htmlwidgets_1.5.1   processx_3.4.5
[71] tidyselect_1.1.0    magrittr_2.0.1      R6_2.5.0            pillar_1.4.7        withr_2.3.0
[76] RCurl_1.98-1.2      tibble_3.0.4        crayon_1.3.4        rmarkdown_2.6       grid_4.0.3
[81] pbivnorm_0.6.0      callr_3.5.1         digest_0.6.27       webshot_0.5.2       xtable_1.8-4
[86] numDeriv_2016.8-1.1 stats4_4.0.3        munsell_0.5.0       viridisLite_0.3.0   kableExtra_1.2.1
[91] sessioninfo_1.1.1
The University of Edinburgh is a charitable body, registered in Scotland, with registration number SC005336.

From m@p|no|@10 @end|ng |rom gm@||@com  Wed Feb 10 00:59:41 2021
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Tue, 9 Feb 2021 17:59:41 -0600
Subject: [R-SIG-Mac] BWidget (external software)
Message-ID: <CABkCotRqaC7ctgc4HsPTWLM+PSFXj5-WMuEM-Odjq0J=ekmf0g@mail.gmail.com>

Dear list members,

How can I install  the external package BWidget in R for macOS?

Manuel

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From pbw @end|ng |rom pbw@|d@@u  Wed Feb 10 04:35:25 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Wed, 10 Feb 2021 13:35:25 +1000
Subject: [R-SIG-Mac] [External] Behaviour or Quartz windows
In-Reply-To: <ef8a5ecc-e0ac-6a9a-a216-d56681dc9b9e@stats.ox.ac.uk>
References: <BF5A421E-88BA-4E33-B812-F5A7C8ADB0A3@pbw.id.au>
 <CO1PR11MB51075C3C1F385780DF238DD1D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <CO1PR11MB5107C891038F2C466951B625D28E9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <ef8a5ecc-e0ac-6a9a-a216-d56681dc9b9e@stats.ox.ac.uk>
Message-ID: <025B6DF2-31CF-41C1-AFEB-264ECE56249E@pbw.id.au>

R version 4.0.3 (2020-10-10)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_AU.UTF-8/en_AU.UTF-8/en_AU.UTF-8/C/en_AU.UTF-8/en_AU.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] compiler_4.0.3 tools_4.0.3 

> On 10 Feb 2021, at 4:26 am, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> 
> The quartz() device has nothing to so with XQuartz.  Quartz is part of macOS: https://en.wikipedia.org/wiki/Quartz_(graphics_layer)
> 
> Using XQuartz betas is not supported: it is very unfortunate that they are persuading users to install a beta version.
> 
> You have not followed the posting guide and posted the sessionInfo(). We are left to guess that you are using an Intel build of R under emulation, but homebrew does have (a rather broken) arm64 build of R 4.0.3: we do not support arm64 builds on R < 4.1.0.  My understanding is that in the CRAN release of R 4.0.3 only the X11() device and parts of Tk interact with XQuartz, although other parts may in other builds.
> 
> On 09/02/2021 17:33, Richard M. Heiberger wrote:
>> Is R on M1 really talking to the REAL XQuartz?  After I opened XQuartz from the spotlignt, it acknowledged the xterm window, but not the R graphics window.  When I closed the XQuartz
>> app, the R graphics window was still open and functioning.  dev.cur() says "quartz".
>> just checked on my older intel mac.  same behavior.  the Xquartz.app menu doesn't list
>> the R graphics window, and the R graphics shows "...", not "XQuartz" in the menu bar.
>> ________________________________________
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Richard M. Heiberger <rmh at temple.edu>
>> Sent: Tuesday, February 9, 2021 11:56 AM
>> To: Peter West; r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] [External]  Behaviour or Quartz windows
>> When I draw a 9x7 panel lattice it displays 12 panels, then sits there until I resize the window. then the rest appears.  When I display another 9x7, it too sits at 12 panels.
>> When I Cmd-left for the previous display, the current one vanishes entirely.
>> When I send the command again, after it sits I resize the window.  Now the full second display
>> is visible.  When I Cmd-left followed by Cmd-right, the second display is lost.
>> I am using R version 4.0.3 (2020-10-10) on Silicon Mac Big Sur 11.1 from inside ESS.
>> XQuartz doesn't report correctly.  On the MenuBar it doesn't say "XQuartz".  Instead it shows a
>> small Apple Icon which has no information when clicked.  When I search using the MenuBar Spotlight icon, it tells me Xquartz 2.8.0_beta1 and offers to update to beta3.  Clicking on XQuartz.app in the Spotlight menu gives proper XQuartz information in the upper left corner
>> of the MenuBar.
>> Rich
>> Get Outlook for iOS<https://aka.ms/o0ukef>
>> ________________________________
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Peter West <pbw at pbw.id.au>
>> Sent: Tuesday, February 9, 2021 10:35:59 AM
>> To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
>> Subject: [External] [R-SIG-Mac] Behaviour or Quartz windows
>> Hi,
>> I?ll just confirm the odd behaviour of the Quartz window in Big Sur 11.2 R 4.0.3 GUI 1.73 on M1 silicon. I have installed the beta3 version of Quartz. In my case I have to CMD <- twice, then go forward to get the next to last plot.
>> Are these Quartz windows constructed using native MacOS graphics or XQuartz?
>> Peter
>> ?
>> Peter West
>> peter.b.west at ehealth.id.au
>> ?that they might touch even the fringe of his garment. And as many as touched it were made well.
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>         [[alternative HTML version deleted]]
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Wed Feb 10 07:36:03 2021
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Wed, 10 Feb 2021 06:36:03 +0000
Subject: [R-SIG-Mac] BWidget (external software)
In-Reply-To: <CABkCotRqaC7ctgc4HsPTWLM+PSFXj5-WMuEM-Odjq0J=ekmf0g@mail.gmail.com>
References: <CABkCotRqaC7ctgc4HsPTWLM+PSFXj5-WMuEM-Odjq0J=ekmf0g@mail.gmail.com>
Message-ID: <877a2db5-1871-9336-2b2f-3f9cf3bee933@stats.ox.ac.uk>

On 09/02/2021 23:59, Manuel Sp?nola wrote:
> Dear list members,
> 
> How can I install  the external package BWidget in R for macOS?

I believe you are asking about a Tcl/Tk package (not an R package): that 
is discussed in the R manuals and

https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Non_002dR-scripts-in-packages

gives installation instructions.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From m@p|no|@10 @end|ng |rom gm@||@com  Wed Feb 10 14:55:07 2021
From: m@p|no|@10 @end|ng |rom gm@||@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Wed, 10 Feb 2021 07:55:07 -0600
Subject: [R-SIG-Mac] BWidget (external software)
In-Reply-To: <877a2db5-1871-9336-2b2f-3f9cf3bee933@stats.ox.ac.uk>
References: <CABkCotRqaC7ctgc4HsPTWLM+PSFXj5-WMuEM-Odjq0J=ekmf0g@mail.gmail.com>
 <877a2db5-1871-9336-2b2f-3f9cf3bee933@stats.ox.ac.uk>
Message-ID: <CABkCotRV1cFL0qiQKBLhcQhD35pV_i5VVnzA2juP5pu16WGnng@mail.gmail.com>

Thank you very much Prof. Ripley.

El mi?, 10 feb 2021 a las 0:36, Prof Brian Ripley (<ripley at stats.ox.ac.uk>)
escribi?:

> On 09/02/2021 23:59, Manuel Sp?nola wrote:
> > Dear list members,
> >
> > How can I install  the external package BWidget in R for macOS?
>
> I believe you are asking about a Tcl/Tk package (not an R package): that
> is discussed in the R manuals and
>
>
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Non_002dR-scripts-in-packages
>
> gives installation instructions.
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
>


-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From g|r|@hj| @end|ng |rom gm@||@com  Thu Feb 11 09:51:32 2021
From: g|r|@hj| @end|ng |rom gm@||@com (Girish Palya)
Date: Thu, 11 Feb 2021 09:51:32 +0100
Subject: [R-SIG-Mac] Bug report: R.app drops Enter key in editor window
 after line evaluation
Message-ID: <CAE6RS7z7Md6UTNBjxnpWJd0aa0NUuj_xJFVB-ukwYXuUC_swug@mail.gmail.com>

To reproduce:
- Open editor window (Cmd-N)
- type some command (say, x <- 3)
- hit Cmd-Enter (to evaluate line; cursor stays on the line)
- hit Enter again (nothing happens - why?)
- hit Enter the second time (cursor goes to the new line, as expected)

I don't see the same problem in the command prompt window. This problem
happens only in the editor window.

I am using:
R for macOS GUI 1.74-devel Catalina build (7917), on Macbook Air.

Thanks
gp

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Feb 11 19:45:04 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 12 Feb 2021 07:45:04 +1300
Subject: [R-SIG-Mac] Bug report: R.app drops Enter key in editor window
 after line evaluation
In-Reply-To: <CAE6RS7z7Md6UTNBjxnpWJd0aa0NUuj_xJFVB-ukwYXuUC_swug@mail.gmail.com>
References: <CAE6RS7z7Md6UTNBjxnpWJd0aa0NUuj_xJFVB-ukwYXuUC_swug@mail.gmail.com>
Message-ID: <254A5AB1-8C65-4C85-98A9-0EA97A7C38D1@R-project.org>

Girish,

Thanks, I can reproduce it, I'll have a look.

Cheers,
Simon


> On Feb 11, 2021, at 21:51, Girish Palya <girishji at gmail.com> wrote:
> 
> To reproduce:
> - Open editor window (Cmd-N)
> - type some command (say, x <- 3)
> - hit Cmd-Enter (to evaluate line; cursor stays on the line)
> - hit Enter again (nothing happens - why?)
> - hit Enter the second time (cursor goes to the new line, as expected)
> 
> I don't see the same problem in the command prompt window. This problem
> happens only in the editor window.
> 
> I am using:
> R for macOS GUI 1.74-devel Catalina build (7917), on Macbook Air.
> 
> Thanks
> gp
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Feb 13 00:50:59 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 13 Feb 2021 12:50:59 +1300
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
Message-ID: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>

Dear macOS useRs,

please test the latest R 4.0.4 RC builds from

https://mac.r-project.org/

especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.

Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.

Cheers,
Simon


From j|ox @end|ng |rom mcm@@ter@c@  Sat Feb 13 03:05:05 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Fri, 12 Feb 2021 21:05:05 -0500
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
In-Reply-To: <2018_1613173882_11CNpJTl009115_0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
References: <2018_1613173882_11CNpJTl009115_0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
Message-ID: <c81892d8-837d-e335-d767-1dc00fb29c83@mcmaster.ca>

Dear Simon,

I'm still seeing the warning on a MacBook Pro with a touchbar running 
Big Sur:

----------- snip ------------

R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

   Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[R.app GUI 1.74 (7929) x86_64-apple-darwin17.0]

[History restored from /Users/johnfox/.Rapp.history]

2021-02-12 21:00:21.163 R[19677:11057750] Warning: Expected min height 
of view: (<NSPopoverTouchBarItemButton: 0x7f8c4a74a480>) to be less than 
or equal to 30 but got a height of 32.000000. This error will be logged 
once per view in violation.

 > sessionInfo()
R version 4.0.4 RC (2021-02-12 r79998)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.0.4

----------- snip ------------

I hope this helps,
  John

John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2021-02-12 6:50 p.m., Simon Urbanek wrote:
> Dear macOS useRs,
> 
> please test the latest R 4.0.4 RC builds from
> 
> https://mac.r-project.org/
> 
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
> 
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
> 
> Cheers,
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From m@ch@|oupk@ @end|ng |rom uq@edu@@u  Sat Feb 13 03:18:27 2021
From: m@ch@|oupk@ @end|ng |rom uq@edu@@u (Milani Chaloupka)
Date: Sat, 13 Feb 2021 02:18:27 +0000
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
In-Reply-To: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
Message-ID: <9EE2A435-3964-496A-B1CB-C69F9295E8DD@uq.edu.au>

Thanks Simon for the R 4.04 RC build.

It still has the MacBook Pro touchbar warning for any window being opened (including package updated window).

But as you have noted before, it does not seem to affect any apparent functionality.

#####

2021-02-13 12:10:13.573 R[719:10406] Warning: Expected min height of view: (<NSButton: 0x7fc88dc27880>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.

#####

regards

Milani

____________________________________________________

Dr Milani Chaloupka
Ecological Modelling Services P/L
PO Box 6150, University of Queensland
St Lucia, Queensland, 4067, Australia

Honorary Associate Professor
School of Biological Sciences, University of Queensland
Brisbane, Queensland, 4072, Australia

Scientific Advisory Committee (Member)
Caribbean Conservation Corporation
Gainesville, Florida, USA

Science and Statistics Committee (Member)
Western Pacific Regional Fisheries Management Council
NOAA, US Dept of Commerce, Honolulu, Hawaii, USA

m.chaloupka at uq.edu.au<mailto:m.chaloupka at uq.edu.au>
m.chaloupka at me.com<mailto:m.chaloupka at me.com>
phone: + 61 7 3878-3229
mobile: (local) 0419180554  (international) + 61 419180554
skype: milani2005
____________________________________________________



On 13 Feb 2021, at 9:50 am, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:

Dear macOS useRs,

please test the latest R 4.0.4 RC builds from

https://mac.r-project.org/

especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.

Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.

Cheers,
Simon

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Sat Feb 13 05:12:57 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 13 Feb 2021 04:12:57 +0000
Subject: [R-SIG-Mac] [External]  Please test R 4.0.4 RC
In-Reply-To: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
Message-ID: <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>

Using the intel R_4.0.4RC on the Mac M1.

Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
X11() now does not work at all.

> X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
  C-c C-c  C-c C-c

Force-Killing XQuartz from the Activity Monitor doesn't help. 
I have to Force-kill the R process.

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
Sent: Friday, February 12, 2021 6:50 PM
To: R-SIG-Mac
Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC

Dear macOS useRs,

please test the latest R 4.0.4 RC builds from

https://mac.r-project.org/

especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.

Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.

Cheers,
Simon

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From rmh @end|ng |rom temp|e@edu  Sat Feb 13 05:15:28 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 13 Feb 2021 04:15:28 +0000
Subject: [R-SIG-Mac] [External]  Please test R 4.0.4 RC
In-Reply-To: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
Message-ID: <CO1PR11MB5107955E77AFB0C05CFEB3A3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>

Thank you for 4.0.4 RC.
I am running on Mac M1 using the intel R_4.0.4RC

The inappropriate quartz() behavior I reported on "[R-SIG-Mac] Behaviour or Quartz windows"
on Tuesday, February 9, 2021 11:56 AM has been repaired.

The entire set of lattice panels are printed on screen.  CMD-left and CMD-right now
correctly shift to previous and next pages.

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
Sent: Friday, February 12, 2021 6:50 PM
To: R-SIG-Mac
Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC

Dear macOS useRs,

please test the latest R 4.0.4 RC builds from

https://mac.r-project.org/

especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.

Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.

Cheers,
Simon

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From pbw @end|ng |rom pbw@|d@@u  Sat Feb 13 07:33:01 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Sat, 13 Feb 2021 16:33:01 +1000
Subject: [R-SIG-Mac] Optional Libraries,
 Frameworks and Applications for macOS
Message-ID: <244AB56A-A50B-49D4-A5B7-B7B5574A477B@pbw.id.au>

Are the various libraries at different versions (e.g. geos-3.7.2 & geos-3.8.1) dependencies for different packages? I don?t suppose there?s a list of reverse package dependencies?

Peter


?
pbw at ehealth.id.au
?What comes out of a person is what defiles him.?


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Feb 13 09:10:23 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 13 Feb 2021 21:10:23 +1300
Subject: [R-SIG-Mac] Optional Libraries,
 Frameworks and Applications for macOS
In-Reply-To: <244AB56A-A50B-49D4-A5B7-B7B5574A477B@pbw.id.au>
References: <244AB56A-A50B-49D4-A5B7-B7B5574A477B@pbw.id.au>
Message-ID: <5DBE858A-1304-44AB-862E-06DB0189FCD6@R-project.org>

The libraries are used to build the packages - they are all static, so the package binaries will include them. It is not intended for users, but rather if you were to compile packages on your own and wanted to replicate the CRAN setup.

Cheers,
Simon



> On Feb 13, 2021, at 7:33 PM, Peter West <pbw at pbw.id.au> wrote:
> 
> Are the various libraries at different versions (e.g. geos-3.7.2 & geos-3.8.1) dependencies for different packages? I don?t suppose there?s a list of reverse package dependencies?
> 
> Peter
> 
> 
> ?
> pbw at ehealth.id.au
> ?What comes out of a person is what defiles him.?
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Feb 13 09:28:49 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 13 Feb 2021 21:28:49 +1300
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
In-Reply-To: <c81892d8-837d-e335-d767-1dc00fb29c83@mcmaster.ca>
References: <2018_1613173882_11CNpJTl009115_0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <c81892d8-837d-e335-d767-1dc00fb29c83@mcmaster.ca>
Message-ID: <21B47930-5B42-4B14-8E4C-258179DCA719@R-project.org>

Thanks for testing and the reports!

Unfortunately, I cannot reproduce the touch-bar issue, because it doesn''t appear when run in Xcode with touch-bar emulation and I don't have a Mac with Big Sur and a touch-bar. Moreover, R is not providing custom touch-bar icons so I can't even find out which element it is complaining about. If anyone has any leads, let me know. If we ever find a work-arournd, it should be possible to do in the GUI alone so possibly after the release (unlike the Quartz bug which needed changes in core R).

Other projects have seen the same issue so it's likely a macOS bug, but the fix that worked for others (re-compile with Xcode 12) did not work for us (the last build was using the latests Xcode 12.4). 

Cheers,
Simon



> On Feb 13, 2021, at 3:05 PM, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear Simon,
> 
> I'm still seeing the warning on a MacBook Pro with a touchbar running Big Sur:
> 
> ----------- snip ------------
> 
> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
>  Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
> [R.app GUI 1.74 (7929) x86_64-apple-darwin17.0]
> 
> [History restored from /Users/johnfox/.Rapp.history]
> 
> 2021-02-12 21:00:21.163 R[19677:11057750] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7f8c4a74a480>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> 
> > sessionInfo()
> R version 4.0.4 RC (2021-02-12 r79998)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> BLAS: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.4
> 
> ----------- snip ------------
> 
> I hope this helps,
> John
> 
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> web: https://socialsciences.mcmaster.ca/jfox/
> 
> On 2021-02-12 6:50 p.m., Simon Urbanek wrote:
>> Dear macOS useRs,
>> please test the latest R 4.0.4 RC builds from
>> https://mac.r-project.org/
>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>> Cheers,
>> Simon
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From e| @end|ng |rom ||@@e@n@  Sat Feb 13 09:33:10 2021
From: e| @end|ng |rom ||@@e@n@ (Dr Eberhard W Lisse)
Date: Sat, 13 Feb 2021 10:33:10 +0200
Subject: [R-SIG-Mac] [External] Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>

that has nothing to do with Xquartz but means you need to install the Command line tools

sudo xcode-select ?install

?
Sent from Dr Lisse?s iPhone
On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> Using the intel R_4.0.4RC on the Mac M1.
>
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
>
> > X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> C-c C-c C-c C-c
>
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.
>
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Friday, February 12, 2021 6:50 PM
> To: R-SIG-Mac
> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>
> Dear macOS useRs,
>
> please test the latest R 4.0.4 RC builds from
>
> https://mac.r-project.org/
>
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>
> Cheers,
> Simon
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 13 11:05:24 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 05:05:24 -0500
Subject: [R-SIG-Mac] [External] Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <26ecd30d-94ef-9cdf-3311-4341d97cfddc@gmail.com>

On 12/02/2021 11:12 p.m., Richard M. Heiberger wrote:
> Using the intel R_4.0.4RC on the Mac M1.
> 
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
> 
>> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>    C-c C-c  C-c C-c
> 
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.

I've received reports about this related to rgl.  Some unconfirmed 
reports suggest that setting Sys.setenv(DISPLAY=":0.0") fixes it. 
Others say that didn't work.

I'm still running the beta, and haven't seen any issues.  Maybe I'll try 
going back to 2.7.11 to see if I can trigger things.

Duncan Murdoch


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sat Feb 13 16:42:51 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Sat, 13 Feb 2021 15:42:51 +0000
Subject: [R-SIG-Mac] How to find the path for a file to be read with
 read.table() in a Mac
Message-ID: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>

I?ve several times to figure this out with no luck.? I?ve moved a tab delimited text file (created from excel) to the desktop to simplify the path.? If I click on the file and ask Get Info, it lists ?Where? as? iCloud Drive > Desktop.? If I copy that to the clipboard and paste that into a read.table command in the R console, it comes up as /Users/DFP/Desktop.? But if I try read.table("\\Users\\DFP\\Desktop\\moabsitechem"), I get No such file or directory.? How can I get that file into a data frame?

Is there some place in my Mac that I can put the file so I could enter just the file name, and not the whole path?


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 13 16:49:49 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 10:49:49 -0500
Subject: [R-SIG-Mac] How to find the path for a file to be read with
 read.table() in a Mac
In-Reply-To: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <f7a61d16-a24f-2c0f-f1ce-fe8877e16d8e@gmail.com>

On 13/02/2021 10:42 a.m., Parkhurst, David F. wrote:
> I?ve several times to figure this out with no luck.? I?ve moved a tab delimited text file (created from excel) to the desktop to simplify the path.? If I click on the file and ask Get Info, it lists ?Where? as? iCloud Drive > Desktop.? If I copy that to the clipboard and paste that into a read.table command in the R console, it comes up as /Users/DFP/Desktop.? But if I try read.table("\\Users\\DFP\\Desktop\\moabsitechem"), I get No such file or directory.? How can I get that file into a data frame?
> 
> Is there some place in my Mac that I can put the file so I could enter just the file name, and not the whole path?

It doesn't make sense to use backslashes in the path:  macOS will see 
those as part of the name, not as path separators.  Just use 
read.table("/Users/DFP/Desktop/moabsitechm") if that's the filename.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 13 16:52:17 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 10:52:17 -0500
Subject: [R-SIG-Mac] How to find the path for a file to be read with
 read.table() in a Mac
In-Reply-To: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <4c6bf0d3-ed51-1d3b-16fc-9cb310adfc81@gmail.com>

On 13/02/2021 10:42 a.m., Parkhurst, David F. wrote:
> I?ve several times to figure this out with no luck.? I?ve moved a tab delimited text file (created from excel) to the desktop to simplify the path.? If I click on the file and ask Get Info, it lists ?Where? as? iCloud Drive > Desktop.? If I copy that to the clipboard and paste that into a read.table command in the R console, it comes up as /Users/DFP/Desktop.? But if I try read.table("\\Users\\DFP\\Desktop\\moabsitechem"), I get No such file or directory.? How can I get that file into a data frame?
> 
> Is there some place in my Mac that I can put the file so I could enter just the file name, and not the whole path?

Sorry, forget to answer your actual question:

You can use getwd() to find the working directory.  If you put the file 
there, you won't need to specify the path.

Duncan Murdoch


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sat Feb 13 17:02:12 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Sat, 13 Feb 2021 16:02:12 +0000
Subject: [R-SIG-Mac] How to find the path for a file to be read with
 read.table() in a Mac
In-Reply-To: <f7a61d16-a24f-2c0f-f1ce-fe8877e16d8e@gmail.com>
References: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <f7a61d16-a24f-2c0f-f1ce-fe8877e16d8e@gmail.com>
Message-ID: <BN7PR08MB41141120256C513EB313C656D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>

Thank you.  I thought I?d seen in some book that in a Mac, one had to specify paths in the way I tried.

From: Duncan Murdoch <murdoch.duncan at gmail.com>
Date: Saturday, February 13, 2021 at 10:49 AM
To: Parkhurst, David F. <parkhurs at indiana.edu>, r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] How to find the path for a file to be read with read.table() in a Mac
On 13/02/2021 10:42 a.m., Parkhurst, David F. wrote:
> I?ve several times to figure this out with no luck.  I?ve moved a tab delimited text file (created from excel) to the desktop to simplify the path.  If I click on the file and ask Get Info, it lists ?Where? as  iCloud Drive > Desktop.  If I copy that to the clipboard and paste that into a read.table command in the R console, it comes up as /Users/DFP/Desktop.  But if I try read.table("\\Users\\DFP\\Desktop\\moabsitechem<file:///Users/DFP/Desktop/moabsitechem>"), I get No such file or directory.  How can I get that file into a data frame?
>
> Is there some place in my Mac that I can put the file so I could enter just the file name, and not the whole path?

It doesn't make sense to use backslashes in the path:  macOS will see
those as part of the name, not as path separators.  Just use
read.table("/Users/DFP/Desktop/moabsitechm") if that's the filename.

Duncan Murdoch


	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sat Feb 13 17:02:54 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Sat, 13 Feb 2021 16:02:54 +0000
Subject: [R-SIG-Mac] How to find the path for a file to be read with
 read.table() in a Mac
In-Reply-To: <4c6bf0d3-ed51-1d3b-16fc-9cb310adfc81@gmail.com>
References: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <4c6bf0d3-ed51-1d3b-16fc-9cb310adfc81@gmail.com>
Message-ID: <BN7PR08MB411475E5D153F96CD3F2E10CD08A9@BN7PR08MB4114.namprd08.prod.outlook.com>

Ah.  That will simplify the process a lot!

From: Duncan Murdoch <murdoch.duncan at gmail.com>
Date: Saturday, February 13, 2021 at 10:52 AM
To: Parkhurst, David F. <parkhurs at indiana.edu>, r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] How to find the path for a file to be read with read.table() in a Mac
On 13/02/2021 10:42 a.m., Parkhurst, David F. wrote:
> I?ve several times to figure this out with no luck.  I?ve moved a tab delimited text file (created from excel) to the desktop to simplify the path.  If I click on the file and ask Get Info, it lists ?Where? as  iCloud Drive > Desktop.  If I copy that to the clipboard and paste that into a read.table command in the R console, it comes up as /Users/DFP/Desktop.  But if I try read.table("\\Users\\DFP\\Desktop\\moabsitechem<file:///Users/DFP/Desktop/moabsitechem>"), I get No such file or directory.  How can I get that file into a data frame?
>
> Is there some place in my Mac that I can put the file so I could enter just the file name, and not the whole path?

Sorry, forget to answer your actual question:

You can use getwd() to find the working directory.  If you put the file
there, you won't need to specify the path.

Duncan Murdoch

	[[alternative HTML version deleted]]


From h@n@on @end|ng |rom dep@uw@edu  Sat Feb 13 17:15:50 2021
From: h@n@on @end|ng |rom dep@uw@edu (Bryan Hanson)
Date: Sat, 13 Feb 2021 09:15:50 -0700
Subject: [R-SIG-Mac] How to find the path for a file to be read with
 read.table() in a Mac
In-Reply-To: <BN7PR08MB41141120256C513EB313C656D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <f7a61d16-a24f-2c0f-f1ce-fe8877e16d8e@gmail.com>
 <BN7PR08MB41141120256C513EB313C656D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <3C4753BE-B8B0-4660-8F23-F4E886020D11@depauw.edu>

You can also point R to the directory where the file of interest is, rather than moving the file to the directory where R is currently pointing.

setwd(?~/Desktop?)

Bryan

> On Feb 13, 2021, at 9:02 AM, Parkhurst, David F. <parkhurs at indiana.edu> wrote:
> 
> Thank you.  I thought I?d seen in some book that in a Mac, one had to specify paths in the way I tried.
> 
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Date: Saturday, February 13, 2021 at 10:49 AM
> To: Parkhurst, David F. <parkhurs at indiana.edu>, r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> Subject: Re: [R-SIG-Mac] How to find the path for a file to be read with read.table() in a Mac
> On 13/02/2021 10:42 a.m., Parkhurst, David F. wrote:
>> I?ve several times to figure this out with no luck.  I?ve moved a tab delimited text file (created from excel) to the desktop to simplify the path.  If I click on the file and ask Get Info, it lists ?Where? as  iCloud Drive > Desktop.  If I copy that to the clipboard and paste that into a read.table command in the R console, it comes up as /Users/DFP/Desktop.  But if I try read.table("\\Users\\DFP\\Desktop\\moabsitechem<file:///Users/DFP/Desktop/moabsitechem>"), I get No such file or directory.  How can I get that file into a data frame?
>> 
>> Is there some place in my Mac that I can put the file so I could enter just the file name, and not the whole path?
> 
> It doesn't make sense to use backslashes in the path:  macOS will see
> those as part of the name, not as path separators.  Just use
> read.table("/Users/DFP/Desktop/moabsitechm") if that's the filename.
> 
> Duncan Murdoch
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Feb 13 17:24:31 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 13 Feb 2021 08:24:31 -0800
Subject: [R-SIG-Mac] How to find the path for a file to be read with
 read.table() in a Mac
In-Reply-To: <BN7PR08MB411475E5D153F96CD3F2E10CD08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114410DF1ADF7DA3D383283D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <4c6bf0d3-ed51-1d3b-16fc-9cb310adfc81@gmail.com>
 <BN7PR08MB411475E5D153F96CD3F2E10CD08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <D8E7F6DA-88F5-41A4-A3F9-913DFF4C32E5@dcn.davis.ca.us>

Even better is to learn one of the many ways to start R in a working directory of your choice, so you don't have to mix code and data from different projects together in one directory just because that happens to be where your default R icon sets it up.

Some ways:
a) Use Terminal and the cd command before invoking R.
b) Create a .RData file with nothing in it in the desired directory. Double-click that to automatically set the working directory there in R.
c) Use RStudio, which lets you create an Rproj file that serves the same purpose as the .RData file but doesn't risk injecting broken code or old data into your working environment.

On February 13, 2021 8:02:54 AM PST, "Parkhurst, David F." <parkhurs at indiana.edu> wrote:
>Ah.  That will simplify the process a lot!
>
>From: Duncan Murdoch <murdoch.duncan at gmail.com>
>Date: Saturday, February 13, 2021 at 10:52 AM
>To: Parkhurst, David F. <parkhurs at indiana.edu>, r-sig-mac at r-project.org
><r-sig-mac at r-project.org>
>Subject: Re: [R-SIG-Mac] How to find the path for a file to be read
>with read.table() in a Mac
>On 13/02/2021 10:42 a.m., Parkhurst, David F. wrote:
>> I?ve several times to figure this out with no luck.  I?ve moved a tab
>delimited text file (created from excel) to the desktop to simplify the
>path.  If I click on the file and ask Get Info, it lists ?Where? as 
>iCloud Drive > Desktop.  If I copy that to the clipboard and paste that
>into a read.table command in the R console, it comes up as
>/Users/DFP/Desktop.  But if I try
>read.table("\\Users\\DFP\\Desktop\\moabsitechem<file:///Users/DFP/Desktop/moabsitechem>"),
>I get No such file or directory.  How can I get that file into a data
>frame?
>>
>> Is there some place in my Mac that I can put the file so I could
>enter just the file name, and not the whole path?
>
>Sorry, forget to answer your actual question:
>
>You can use getwd() to find the working directory.  If you put the file
>there, you won't need to specify the path.
>
>Duncan Murdoch
>
>	[[alternative HTML version deleted]]

-- 
Sent from my phone. Please excuse my brevity.


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sat Feb 13 21:29:01 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Sat, 13 Feb 2021 20:29:01 +0000
Subject: [R-SIG-Mac] Problem with read.table in my Mac. "No such file or
 directory"
Message-ID: <BN7PR08MB4114AFA6123670E03118CBF0D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>

I?m still having trouble with read.table, as follows (and there IS a plain text document called moabsitechem in this directory:
> getwd()
[1] "/Users/DFP/Documents/Documents - David?s iMac/ae/FriendsMonroe"
> read.table("moabsitechem")
Error in file(file, "rt") : cannot open the connection
In addition: Warning message:
In file(file, "rt") :
? cannot open file 'moabsitechem': No such file or directory

How can I fix this problem?


From h@n@on @end|ng |rom dep@uw@edu  Sat Feb 13 21:37:25 2021
From: h@n@on @end|ng |rom dep@uw@edu (Bryan Hanson)
Date: Sat, 13 Feb 2021 13:37:25 -0700
Subject: [R-SIG-Mac] Problem with read.table in my Mac. "No such file or
 directory"
In-Reply-To: <BN7PR08MB4114AFA6123670E03118CBF0D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114AFA6123670E03118CBF0D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <F8E14733-817E-4F63-8D60-2FDDA7B55846@depauw.edu>

Try

list.files()

to see the names of the files in the current directory, and make certain you are where you think you are, the file is there, has the name you think it has etc.  You may need to add the extension, presumably something like ?.csv? to your read.table call.

A possible point of confusion is that  you may have your Mac set to not display file extensions, and life is generally easier in my opinion if those extensions are turned on.   Plenty of advice on the internet as to how to turn this on for all files.

Bryan

> On Feb 13, 2021, at 1:29 PM, Parkhurst, David F. <parkhurs at indiana.edu> wrote:
> 
> I?m still having trouble with read.table, as follows (and there IS a plain text document called moabsitechem in this directory:
>> getwd()
> [1] "/Users/DFP/Documents/Documents - David?s iMac/ae/FriendsMonroe"
>> read.table("moabsitechem")
> Error in file(file, "rt") : cannot open the connection
> In addition: Warning message:
> In file(file, "rt") :
>   cannot open file 'moabsitechem': No such file or directory
> 
> How can I fix this problem?
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sat Feb 13 21:43:31 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Sat, 13 Feb 2021 20:43:31 +0000
Subject: [R-SIG-Mac] Problem with read.table in my Mac. "No such file or
 directory"
In-Reply-To: <F8E14733-817E-4F63-8D60-2FDDA7B55846@depauw.edu>
References: <BN7PR08MB4114AFA6123670E03118CBF0D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <F8E14733-817E-4F63-8D60-2FDDA7B55846@depauw.edu>
Message-ID: <BN7PR08MB41145B24166DC9B334AFF736D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>

Thanks.  I switched from years using PCs about a year ago when MS would no longer support Windows 7.  I have missed seeing extensions on files (probably .txt for this one).  It?s good to learn that I can change that.

From: Bryan Hanson <hanson at depauw.edu>
Date: Saturday, February 13, 2021 at 3:37 PM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Cc: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] Problem with read.table in my Mac. "No such file or directory"
Try

list.files()

to see the names of the files in the current directory, and make certain you are where you think you are, the file is there, has the name you think it has etc.  You may need to add the extension, presumably something like ?.csv? to your read.table call.

A possible point of confusion is that  you may have your Mac set to not display file extensions, and life is generally easier in my opinion if those extensions are turned on.   Plenty of advice on the internet as to how to turn this on for all files.

Bryan

> On Feb 13, 2021, at 1:29 PM, Parkhurst, David F. <parkhurs at indiana.edu> wrote:
>
> I?m still having trouble with read.table, as follows (and there IS a plain text document called moabsitechem in this directory:
>> getwd()
> [1] "/Users/DFP/Documents/Documents - David?s iMac/ae/FriendsMonroe"
>> read.table("moabsitechem")
> Error in file(file, "rt") : cannot open the connection
> In addition: Warning message:
> In file(file, "rt") :
>   cannot open file 'moabsitechem': No such file or directory
>
> How can I fix this problem?
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Sat Feb 13 21:50:54 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 13 Feb 2021 20:50:54 +0000
Subject: [R-SIG-Mac] [External] Re:  [External] Please test R 4.0.4 RC
In-Reply-To: <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
Message-ID: <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>

I tried this.  It made no difference.  Both before and after running
sudo xcode-select ?install
I ran (in both cases, in a brand new *R* sessio n)

> X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun


My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
worked with intel R_4.0.3 on the Mac M1.

________________________________________
From: Dr Eberhard W Lisse <el at lisse.na>
Sent: Saturday, February 13, 2021 3:33 AM
To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
Cc: el at lisse.NA
Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC

that has nothing to do with Xquartz but means you need to install the Command line tools

sudo xcode-select ?install

?
Sent from Dr Lisse?s iPhone
On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
Using the intel R_4.0.4RC on the Mac M1.

Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
X11() now does not work at all.

X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
C-c C-c C-c C-c

Force-Killing XQuartz from the Activity Monitor doesn't help.
I have to Force-kill the R process.

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
Sent: Friday, February 12, 2021 6:50 PM
To: R-SIG-Mac
Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC

Dear macOS useRs,

please test the latest R 4.0.4 RC builds from

https://mac.r-project.org/

especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.

Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.

Cheers,
Simon

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 13 22:05:56 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 16:05:56 -0500
Subject: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>

Have you tried the change to DISPLAY, i.e.

Sys.setenv(DISPLAY=":0.0")

before running X11()?

Duncan Murdoch

On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
> I tried this.  It made no difference.  Both before and after running
> sudo xcode-select ?install
> I ran (in both cases, in a brand new *R* sessio n)
> 
>> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> 
> 
> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
> worked with intel R_4.0.3 on the Mac M1.
> 
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 3:33 AM
> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
> 
> that has nothing to do with Xquartz but means you need to install the Command line tools
> 
> sudo xcode-select ?install
> 
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> Using the intel R_4.0.4RC on the Mac M1.
> 
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
> 
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> C-c C-c C-c C-c
> 
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.
> 
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Friday, February 12, 2021 6:50 PM
> To: R-SIG-Mac
> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
> 
> Dear macOS useRs,
> 
> please test the latest R 4.0.4 RC builds from
> 
> https://mac.r-project.org/
> 
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
> 
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
> 
> Cheers,
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From rmh @end|ng |rom temp|e@edu  Sat Feb 13 22:21:18 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 13 Feb 2021 21:21:18 +0000
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Please test R 4.0.4 RC
In-Reply-To: <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
Message-ID: <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>

That is next.  Again a fresh session.


> setwd('/Users/rmh/Rwd/')
> Sys.setenv(DISPLAY=":0.0")
> X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
  unable to start device X11
In addition: Warning messages:
1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
  running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
2: In X11() : unable to open connection to X11 display ''
>


and the R session is still alive.


This rasies for me a different question.  Why should I want X11()?

When X11 was working it was very slow, and didn't allow paging back through
previous images.

In favor of X11, I think it uses the display space better.  X11() has better size and spacing for xlab, ylab, and main than quartz().  But that isn't a strong enough
reason to use it while develkoping a graph.  When I want it to look good,
I go directly to pdf() and get the spacing that I  think looks better.

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Saturday, February 13, 2021 4:05 PM
To: Richard M. Heiberger; R-SIG-Mac
Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC

Have you tried the change to DISPLAY, i.e.

Sys.setenv(DISPLAY=":0.0")

before running X11()?

Duncan Murdoch

On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
> I tried this.  It made no difference.  Both before and after running
> sudo xcode-select ?install
> I ran (in both cases, in a brand new *R* sessio n)
>
>> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>
>
> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
> worked with intel R_4.0.3 on the Mac M1.
>
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 3:33 AM
> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>
> that has nothing to do with Xquartz but means you need to install the Command line tools
>
> sudo xcode-select ?install
>
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> Using the intel R_4.0.4RC on the Mac M1.
>
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
>
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> C-c C-c C-c C-c
>
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.
>
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Friday, February 12, 2021 6:50 PM
> To: R-SIG-Mac
> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>
> Dear macOS useRs,
>
> please test the latest R 4.0.4 RC builds from
>
> https://mac.r-project.org/
>
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>
> Cheers,
> Simon
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From e| @end|ng |rom ||@@e@n@  Sat Feb 13 22:44:19 2021
From: e| @end|ng |rom ||@@e@n@ (Dr Eberhard W Lisse)
Date: Sat, 13 Feb 2021 23:44:19 +0200
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <a09b4128-c817-485c-b11d-aa8991681447@Spark>

the Xcode Command line tools are missing. Install them and see what happens.

Did you recently upgrade MacOS?

el

?
Sent from Dr Lisse?s iPhone
On 13 Feb 2021, 23:21 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> That is next. Again a fresh session.
>
>
> > setwd('/Users/rmh/Rwd/')
> > Sys.setenv(DISPLAY=":0.0")
> > X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize, :
> unable to start device X11
> In addition: Warning messages:
> 1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
> running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
> 2: In X11() : unable to open connection to X11 display ''
> >
>
>
> and the R session is still alive.
>
>
> This rasies for me a different question. Why should I want X11()?
>
> When X11 was working it was very slow, and didn't allow paging back through
> previous images.
>
> In favor of X11, I think it uses the display space better. X11() has better size and spacing for xlab, ylab, and main than quartz(). But that isn't a strong enough
> reason to use it while develkoping a graph. When I want it to look good,
> I go directly to pdf() and get the spacing that I think looks better.
>
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 13, 2021 4:05 PM
> To: Richard M. Heiberger; R-SIG-Mac
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
>
> Have you tried the change to DISPLAY, i.e.
>
> Sys.setenv(DISPLAY=":0.0")
>
> before running X11()?
>
> Duncan Murdoch
>
> On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
> > I tried this. It made no difference. Both before and after running
> > sudo xcode-select ?install
> > I ran (in both cases, in a brand new *R* sessio n)
> >
> > > X11()
> > xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> >
> >
> > My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
> > worked with intel R_4.0.3 on the Mac M1.
> >
> > ________________________________________
> > From: Dr Eberhard W Lisse <el at lisse.na>
> > Sent: Saturday, February 13, 2021 3:33 AM
> > To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
> > Cc: el at lisse.NA
> > Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
> >
> > that has nothing to do with Xquartz but means you need to install the Command line tools
> >
> > sudo xcode-select ?install
> >
> > ?
> > Sent from Dr Lisse?s iPhone
> > On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> > Using the intel R_4.0.4RC on the Mac M1.
> >
> > Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> > X11() now does not work at all.
> >
> > X11()
> > xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> > C-c C-c C-c C-c
> >
> > Force-Killing XQuartz from the Activity Monitor doesn't help.
> > I have to Force-kill the R process.
> >
> > ________________________________________
> > From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> > Sent: Friday, February 12, 2021 6:50 PM
> > To: R-SIG-Mac
> > Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
> >
> > Dear macOS useRs,
> >
> > please test the latest R 4.0.4 RC builds from
> >
> > https://mac.r-project.org/
> >
> > especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
> >
> > Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
> >
> > Cheers,
> > Simon
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

	[[alternative HTML version deleted]]


From e| @end|ng |rom ||@@e@n@  Sat Feb 13 22:47:17 2021
From: e| @end|ng |rom ||@@e@n@ (Dr Eberhard W Lisse)
Date: Sat, 13 Feb 2021 23:47:17 +0200
Subject: [R-SIG-Mac] Problem with read.table in my Mac. "No such file or
 directory"
In-Reply-To: <BN7PR08MB4114AFA6123670E03118CBF0D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114AFA6123670E03118CBF0D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <a491a559-53c8-4b6f-9aba-5281d4724f3f@Spark>

space in a directory name?

put the file in ~/Desktop and see what happens then.

If it is a CSV make it?moabsitechem.csv and see what that doesn.

el

?
Sent from Dr Lisse?s iPhone
On 13 Feb 2021, 22:29 +0200, Parkhurst, David F. <parkhurs at indiana.edu>, wrote:
> I?m still having trouble with read.table, as follows (and there IS a plain text document called moabsitechem in this directory:
> > getwd()
> [1] "/Users/DFP/Documents/Documents - David?s iMac/ae/FriendsMonroe"
> > read.table("moabsitechem")
> Error in file(file, "rt") : cannot open the connection
> In addition: Warning message:
> In file(file, "rt") :
> ? cannot open file 'moabsitechem': No such file or directory
>
> How can I fix this problem?
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Feb 13 22:54:51 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 14 Feb 2021 10:54:51 +1300
Subject: [R-SIG-Mac] [External] Re:  [External] Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>

As mentioned earlier, the issue is likely that your X11-auto-launch is not working. You can start X11 (=XQuartz) yourself and set DISPLAY=:0 as you would on any unix system or start X11 with X11(":0")
[personally, I hate that auto-launch "feature" since it tries to start XQuartz even if you don't want it].

Cheers,
Simon


> On Feb 14, 2021, at 9:50 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
> 
> I tried this.  It made no difference.  Both before and after running
> sudo xcode-select ?install
> I ran (in both cases, in a brand new *R* sessio n)
> 
>> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> 
> 
> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
> worked with intel R_4.0.3 on the Mac M1.
> 
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 3:33 AM
> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
> 
> that has nothing to do with Xquartz but means you need to install the Command line tools
> 
> sudo xcode-select ?install
> 
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> Using the intel R_4.0.4RC on the Mac M1.
> 
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
> 
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> C-c C-c C-c C-c
> 
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.
> 
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Friday, February 12, 2021 6:50 PM
> To: R-SIG-Mac
> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
> 
> Dear macOS useRs,
> 
> please test the latest R 4.0.4 RC builds from
> 
> https://mac.r-project.org/
> 
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
> 
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
> 
> Cheers,
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 13 22:55:27 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 16:55:27 -0500
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <12e99a11-2fa3-9813-ed4c-aafe94e23c23@gmail.com>

Thanks for your detailed descriptions!  I can now reproduce this, and I 
have an ugly workaround.  I should be able to get a better workaround soon.

To reproduce:

Install the beta.  (I did this when it was pushed to me.)  It worked 
fine for me.

Install the previous version, 2.7.11.  Reboot the system.

Now running x11() in R causes the spinning beach ball.

The workaround:

Start R.  The DISPLAY environment variable will show the name something like

[1] "/private/tmp/com.apple.launchd.RuLLnvteCn/org.xquartz:0"

This is a socket, not a regular file.

Delete this, and set DISPLAY to ":0.0":

   unlink(Sys.getenv("DISPLAY"))
   Sys.setenv(DISPLAY=":0.0")

Now x11() is fine.

This is only a workaround.  The unlink() is permanent, but setting the 
environment variable only lasts for the length of the R session.  You'll 
need to enter Sys.setenv(DISPLAY=":0.0") again in future sessions, and I 
would guess the socket will be recreated the next time you restart the 
system (or maybe on login).

Duncan Murdoch








On 13/02/2021 4:21 p.m., Richard M. Heiberger wrote:
> That is next.  Again a fresh session.
> 
> 
>> setwd('/Users/rmh/Rwd/')
>> Sys.setenv(DISPLAY=":0.0")
>> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
>    unable to start device X11
> In addition: Warning messages:
> 1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>    running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
> 2: In X11() : unable to open connection to X11 display ''
>>
> 
> 
> and the R session is still alive.
> 
> 
> This rasies for me a different question.  Why should I want X11()?
> 
> When X11 was working it was very slow, and didn't allow paging back through
> previous images.
> 
> In favor of X11, I think it uses the display space better.  X11() has better size and spacing for xlab, ylab, and main than quartz().  But that isn't a strong enough
> reason to use it while develkoping a graph.  When I want it to look good,
> I go directly to pdf() and get the spacing that I  think looks better.
> 
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 13, 2021 4:05 PM
> To: Richard M. Heiberger; R-SIG-Mac
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
> 
> Have you tried the change to DISPLAY, i.e.
> 
> Sys.setenv(DISPLAY=":0.0")
> 
> before running X11()?
> 
> Duncan Murdoch
> 
> On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
>> I tried this.  It made no difference.  Both before and after running
>> sudo xcode-select ?install
>> I ran (in both cases, in a brand new *R* sessio n)
>>
>>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>
>>
>> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
>> worked with intel R_4.0.3 on the Mac M1.
>>
>> ________________________________________
>> From: Dr Eberhard W Lisse <el at lisse.na>
>> Sent: Saturday, February 13, 2021 3:33 AM
>> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
>> Cc: el at lisse.NA
>> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>>
>> that has nothing to do with Xquartz but means you need to install the Command line tools
>>
>> sudo xcode-select ?install
>>
>> ?
>> Sent from Dr Lisse?s iPhone
>> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
>> Using the intel R_4.0.4RC on the Mac M1.
>>
>> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
>> X11() now does not work at all.
>>
>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> C-c C-c C-c C-c
>>
>> Force-Killing XQuartz from the Activity Monitor doesn't help.
>> I have to Force-kill the R process.
>>
>> ________________________________________
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
>> Sent: Friday, February 12, 2021 6:50 PM
>> To: R-SIG-Mac
>> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>>
>> Dear macOS useRs,
>>
>> please test the latest R 4.0.4 RC builds from
>>
>> https://mac.r-project.org/
>>
>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>>
>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>>
>> Cheers,
>> Simon
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>


From rmh @end|ng |rom temp|e@edu  Sat Feb 13 23:00:21 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 13 Feb 2021 22:00:21 +0000
Subject: [R-SIG-Mac] [External] Re:  [External] Please test R 4.0.4 RC
In-Reply-To: <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>
Message-ID: <CO1PR11MB5107B6CC798B64B160BB3EB2D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>

another fresh R session

> X11(":0")
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
  unable to start device X11
In addition: Warning messages:
1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
  running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
2: In X11(":0") : unable to open connection to X11 display ':0'
>

________________________________________
From: Simon Urbanek <simon.urbanek at R-project.org>
Sent: Saturday, February 13, 2021 4:54 PM
To: Richard M. Heiberger
Cc: Dr Eberhard W Lisse; R-SIG-Mac
Subject: Re: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC

As mentioned earlier, the issue is likely that your X11-auto-launch is not working. You can start X11 (=XQuartz) yourself and set DISPLAY=:0 as you would on any unix system or start X11 with X11(":0")
[personally, I hate that auto-launch "feature" since it tries to start XQuartz even if you don't want it].

Cheers,
Simon


> On Feb 14, 2021, at 9:50 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>
> I tried this.  It made no difference.  Both before and after running
> sudo xcode-select ?install
> I ran (in both cases, in a brand new *R* sessio n)
>
>> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>
>
> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
> worked with intel R_4.0.3 on the Mac M1.
>
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 3:33 AM
> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>
> that has nothing to do with Xquartz but means you need to install the Command line tools
>
> sudo xcode-select ?install
>
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> Using the intel R_4.0.4RC on the Mac M1.
>
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
>
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> C-c C-c C-c C-c
>
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.
>
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Friday, February 12, 2021 6:50 PM
> To: R-SIG-Mac
> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>
> Dear macOS useRs,
>
> please test the latest R 4.0.4 RC builds from
>
> https://mac.r-project.org/
>
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>
> Cheers,
> Simon
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From rmh @end|ng |rom temp|e@edu  Sat Feb 13 23:08:06 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 13 Feb 2021 22:08:06 +0000
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Please test R 4.0.4 RC
In-Reply-To: <12e99a11-2fa3-9813-ed4c-aafe94e23c23@gmail.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <12e99a11-2fa3-9813-ed4c-aafe94e23c23@gmail.com>
Message-ID: <CO1PR11MB510719E3672387E4E1BC3A67D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>

another new session


> setwd('/Users/rmh/Rwd/')
> Sys.getenv("DISPLAY")
[1] "/private/tmp/com.apple.launchd.l0xAmiv83n/org.xquartz:0"
> unlink(Sys.getenv("DISPLAY"))
>    Sys.setenv(DISPLAY=":0.0")
> X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
  unable to start device X11
In addition: Warning messages:
1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
  running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
2: In X11() : unable to open connection to X11 display ''
> Sys.getenv("DISPLAY")
[1] ":0.0"
>


I didn't make any more changes to the Xquartz.  I previously had the beta and replaced it with 2.7.11, so I just continued from there.

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Saturday, February 13, 2021 4:55 PM
To: Richard M. Heiberger; R-SIG-Mac
Subject: Re: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC

Thanks for your detailed descriptions!  I can now reproduce this, and I
have an ugly workaround.  I should be able to get a better workaround soon.

To reproduce:

Install the beta.  (I did this when it was pushed to me.)  It worked
fine for me.

Install the previous version, 2.7.11.  Reboot the system.

Now running x11() in R causes the spinning beach ball.

The workaround:

Start R.  The DISPLAY environment variable will show the name something like

[1] "/private/tmp/com.apple.launchd.RuLLnvteCn/org.xquartz:0"

This is a socket, not a regular file.

Delete this, and set DISPLAY to ":0.0":

   unlink(Sys.getenv("DISPLAY"))
   Sys.setenv(DISPLAY=":0.0")

Now x11() is fine.

This is only a workaround.  The unlink() is permanent, but setting the
environment variable only lasts for the length of the R session.  You'll
need to enter Sys.setenv(DISPLAY=":0.0") again in future sessions, and I
would guess the socket will be recreated the next time you restart the
system (or maybe on login).

Duncan Murdoch








On 13/02/2021 4:21 p.m., Richard M. Heiberger wrote:
> That is next.  Again a fresh session.
>
>
>> setwd('/Users/rmh/Rwd/')
>> Sys.setenv(DISPLAY=":0.0")
>> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
>    unable to start device X11
> In addition: Warning messages:
> 1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>    running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
> 2: In X11() : unable to open connection to X11 display ''
>>
>
>
> and the R session is still alive.
>
>
> This rasies for me a different question.  Why should I want X11()?
>
> When X11 was working it was very slow, and didn't allow paging back through
> previous images.
>
> In favor of X11, I think it uses the display space better.  X11() has better size and spacing for xlab, ylab, and main than quartz().  But that isn't a strong enough
> reason to use it while develkoping a graph.  When I want it to look good,
> I go directly to pdf() and get the spacing that I  think looks better.
>
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 13, 2021 4:05 PM
> To: Richard M. Heiberger; R-SIG-Mac
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
>
> Have you tried the change to DISPLAY, i.e.
>
> Sys.setenv(DISPLAY=":0.0")
>
> before running X11()?
>
> Duncan Murdoch
>
> On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
>> I tried this.  It made no difference.  Both before and after running
>> sudo xcode-select ?install
>> I ran (in both cases, in a brand new *R* sessio n)
>>
>>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>
>>
>> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
>> worked with intel R_4.0.3 on the Mac M1.
>>
>> ________________________________________
>> From: Dr Eberhard W Lisse <el at lisse.na>
>> Sent: Saturday, February 13, 2021 3:33 AM
>> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
>> Cc: el at lisse.NA
>> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>>
>> that has nothing to do with Xquartz but means you need to install the Command line tools
>>
>> sudo xcode-select ?install
>>
>> ?
>> Sent from Dr Lisse?s iPhone
>> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
>> Using the intel R_4.0.4RC on the Mac M1.
>>
>> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
>> X11() now does not work at all.
>>
>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> C-c C-c C-c C-c
>>
>> Force-Killing XQuartz from the Activity Monitor doesn't help.
>> I have to Force-kill the R process.
>>
>> ________________________________________
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
>> Sent: Friday, February 12, 2021 6:50 PM
>> To: R-SIG-Mac
>> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>>
>> Dear macOS useRs,
>>
>> please test the latest R 4.0.4 RC builds from
>>
>> https://mac.r-project.org/
>>
>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>>
>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>>
>> Cheers,
>> Simon
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 13 23:32:00 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 17:32:00 -0500
Subject: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
In-Reply-To: <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>
Message-ID: <7c02d207-aad1-ae06-6506-4ad31be7fb3a@gmail.com>

On 13/02/2021 4:54 p.m., Simon Urbanek wrote:
> As mentioned earlier, the issue is likely that your X11-auto-launch is not working. You can start X11 (=XQuartz) yourself and set DISPLAY=:0 as you would on any unix system or start X11 with X11(":0")
> [personally, I hate that auto-launch "feature" since it tries to start XQuartz even if you don't want it].

Thanks.  Here's another datum:  I did my last build of rgl with the beta 
XQuartz installed.  I'm now back to 2.7.11 and I get this when I try to 
start rgl:

 > library(rgl)
Error in dyn.load(dynlib) :
   unable to load shared object 
'/Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so':
 
dlopen(/Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so, 
6): Library not loaded: /opt/X11/lib/libX11.6.dylib
   Referenced from: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so
   Reason: Incompatible library version: rgl.so requires version 11.0.0 
or later, but libX11.6.dylib provides version 10.0.0
Error: package or namespace load failed for ?rgl?:
  .onLoad failed in loadNamespace() for 'rgl', details:
   call: NULL
   error: 	Loading rgl's DLL failed.
	This build of rgl depends on XQuartz, which you can download from 
xquartz.org.

So it appears they updated the version of libX11.6.dylib, and rgl is 
asking for the wrong one.

Is there some way for me to request a particular version during my 
build, or at least detect that the wrong version is installed?

Duncan Murdoch

> 
> Cheers,
> Simon
> 
> 
>> On Feb 14, 2021, at 9:50 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>
>> I tried this.  It made no difference.  Both before and after running
>> sudo xcode-select ?install
>> I ran (in both cases, in a brand new *R* sessio n)
>>
>>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>
>>
>> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
>> worked with intel R_4.0.3 on the Mac M1.
>>
>> ________________________________________
>> From: Dr Eberhard W Lisse <el at lisse.na>
>> Sent: Saturday, February 13, 2021 3:33 AM
>> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
>> Cc: el at lisse.NA
>> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>>
>> that has nothing to do with Xquartz but means you need to install the Command line tools
>>
>> sudo xcode-select ?install
>>
>> ?
>> Sent from Dr Lisse?s iPhone
>> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
>> Using the intel R_4.0.4RC on the Mac M1.
>>
>> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
>> X11() now does not work at all.
>>
>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> C-c C-c C-c C-c
>>
>> Force-Killing XQuartz from the Activity Monitor doesn't help.
>> I have to Force-kill the R process.
>>
>> ________________________________________
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
>> Sent: Friday, February 12, 2021 6:50 PM
>> To: R-SIG-Mac
>> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>>
>> Dear macOS useRs,
>>
>> please test the latest R 4.0.4 RC builds from
>>
>> https://mac.r-project.org/
>>
>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>>
>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>>
>> Cheers,
>> Simon
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Feb 13 23:35:34 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 14 Feb 2021 11:35:34 +1300
Subject: [R-SIG-Mac] [External] Re:  [External] Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB5107B6CC798B64B160BB3EB2D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>
 <CO1PR11MB5107B6CC798B64B160BB3EB2D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <1053EE4E-3AE2-4B6D-9128-3063320125E8@R-project.org>

Richard,

thanks - finally a more complete output to go on. This is exactly the reminder why it is so important to post the _full_output - the actual facts were completely missing from your previous report.

Firstly, the xcrun output is just a warning which indicates that R can't find out whether you have XQuartz installed or not. It also shows that your Xcode/command line tools are broken. That in itself is not a problem as long as you don't intend to compile packages - but probably you should look into it.

But more importantly your XQuartz doesn't work - or at least is not running at the time you are trying to run X11() in R. Make sure you start XQuartz first (from Applications -> Utilities) and it works. If in doubt, you can wipe it (it lives in /opt/X11) and re-install.

Either way, neither seems to be an R issue per se.

Cheers,
Simon


`
> On Feb 14, 2021, at 11:00 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
> 
> another fresh R session
> 
>> X11(":0")
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
>  unable to start device X11
> In addition: Warning messages:
> 1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>  running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
> 2: In X11(":0") : unable to open connection to X11 display ':0'
>> 
> 
> ________________________________________
> From: Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Saturday, February 13, 2021 4:54 PM
> To: Richard M. Heiberger
> Cc: Dr Eberhard W Lisse; R-SIG-Mac
> Subject: Re: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
> 
> As mentioned earlier, the issue is likely that your X11-auto-launch is not working. You can start X11 (=XQuartz) yourself and set DISPLAY=:0 as you would on any unix system or start X11 with X11(":0")
> [personally, I hate that auto-launch "feature" since it tries to start XQuartz even if you don't want it].
> 
> Cheers,
> Simon
> 
> 
>> On Feb 14, 2021, at 9:50 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>> 
>> I tried this.  It made no difference.  Both before and after running
>> sudo xcode-select ?install
>> I ran (in both cases, in a brand new *R* sessio n)
>> 
>>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> 
>> 
>> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
>> worked with intel R_4.0.3 on the Mac M1.
>> 
>> ________________________________________
>> From: Dr Eberhard W Lisse <el at lisse.na>
>> Sent: Saturday, February 13, 2021 3:33 AM
>> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
>> Cc: el at lisse.NA
>> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>> 
>> that has nothing to do with Xquartz but means you need to install the Command line tools
>> 
>> sudo xcode-select ?install
>> 
>> ?
>> Sent from Dr Lisse?s iPhone
>> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
>> Using the intel R_4.0.4RC on the Mac M1.
>> 
>> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
>> X11() now does not work at all.
>> 
>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> C-c C-c C-c C-c
>> 
>> Force-Killing XQuartz from the Activity Monitor doesn't help.
>> I have to Force-kill the R process.
>> 
>> ________________________________________
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
>> Sent: Friday, February 12, 2021 6:50 PM
>> To: R-SIG-Mac
>> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>> 
>> Dear macOS useRs,
>> 
>> please test the latest R 4.0.4 RC builds from
>> 
>> https://mac.r-project.org/
>> 
>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>> 
>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>> 
>> Cheers,
>> Simon
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Feb 13 23:43:15 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 14 Feb 2021 11:43:15 +1300
Subject: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
In-Reply-To: <7c02d207-aad1-ae06-6506-4ad31be7fb3a@gmail.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>
 <7c02d207-aad1-ae06-6506-4ad31be7fb3a@gmail.com>
Message-ID: <4CB42E34-ACE2-4E16-94D7-073D39369085@R-project.org>

Duncan,

not really - this is why the XQuartz betas are such a disaster - they replace libraries with incompatible versions (under same file name) - and even remove some libraries, thus breaking anything that was compiled against either version. If you downgrade, you have to re-compile anything you compiled against the beta. That is probably one of the lesser evils since you can't expect anything to be forwards-compatible.

In theory, you could detect the version using otool - that's what X11() is doing to find whether XQuartz is present, but it only works for users that have dev tools installed, so not a good idea in general.

Cheers,
Simon



> On Feb 14, 2021, at 11:32 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 13/02/2021 4:54 p.m., Simon Urbanek wrote:
>> As mentioned earlier, the issue is likely that your X11-auto-launch is not working. You can start X11 (=XQuartz) yourself and set DISPLAY=:0 as you would on any unix system or start X11 with X11(":0")
>> [personally, I hate that auto-launch "feature" since it tries to start XQuartz even if you don't want it].
> 
> Thanks.  Here's another datum:  I did my last build of rgl with the beta XQuartz installed.  I'm now back to 2.7.11 and I get this when I try to start rgl:
> 
> > library(rgl)
> Error in dyn.load(dynlib) :
>  unable to load shared object '/Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so':
> dlopen(/Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so, 6): Library not loaded: /opt/X11/lib/libX11.6.dylib
>  Referenced from: /Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so
>  Reason: Incompatible library version: rgl.so requires version 11.0.0 or later, but libX11.6.dylib provides version 10.0.0
> Error: package or namespace load failed for ?rgl?:
> .onLoad failed in loadNamespace() for 'rgl', details:
>  call: NULL
>  error: 	Loading rgl's DLL failed.
> 	This build of rgl depends on XQuartz, which you can download from xquartz.org.
> 
> So it appears they updated the version of libX11.6.dylib, and rgl is asking for the wrong one.
> 
> Is there some way for me to request a particular version during my build, or at least detect that the wrong version is installed?
> 
> Duncan Murdoch
> 
>> Cheers,
>> Simon
>>> On Feb 14, 2021, at 9:50 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>> 
>>> I tried this.  It made no difference.  Both before and after running
>>> sudo xcode-select ?install
>>> I ran (in both cases, in a brand new *R* sessio n)
>>> 
>>>> X11()
>>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>> 
>>> 
>>> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
>>> worked with intel R_4.0.3 on the Mac M1.
>>> 
>>> ________________________________________
>>> From: Dr Eberhard W Lisse <el at lisse.na>
>>> Sent: Saturday, February 13, 2021 3:33 AM
>>> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
>>> Cc: el at lisse.NA
>>> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>>> 
>>> that has nothing to do with Xquartz but means you need to install the Command line tools
>>> 
>>> sudo xcode-select ?install
>>> 
>>> ?
>>> Sent from Dr Lisse?s iPhone
>>> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
>>> Using the intel R_4.0.4RC on the Mac M1.
>>> 
>>> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
>>> X11() now does not work at all.
>>> 
>>> X11()
>>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>> C-c C-c C-c C-c
>>> 
>>> Force-Killing XQuartz from the Activity Monitor doesn't help.
>>> I have to Force-kill the R process.
>>> 
>>> ________________________________________
>>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
>>> Sent: Friday, February 12, 2021 6:50 PM
>>> To: R-SIG-Mac
>>> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>>> 
>>> Dear macOS useRs,
>>> 
>>> please test the latest R 4.0.4 RC builds from
>>> 
>>> https://mac.r-project.org/
>>> 
>>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>>> 
>>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 13 23:53:32 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 17:53:32 -0500
Subject: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
In-Reply-To: <4CB42E34-ACE2-4E16-94D7-073D39369085@R-project.org>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>
 <7c02d207-aad1-ae06-6506-4ad31be7fb3a@gmail.com>
 <4CB42E34-ACE2-4E16-94D7-073D39369085@R-project.org>
Message-ID: <d0acf031-d86c-3194-e79d-5bc99933beb1@gmail.com>

On 13/02/2021 5:43 p.m., Simon Urbanek wrote:
> Duncan,
> 
> not really - this is why the XQuartz betas are such a disaster - they replace libraries with incompatible versions (under same file name) - and even remove some libraries, thus breaking anything that was compiled against either version. If you downgrade, you have to re-compile anything you compiled against the beta. That is probably one of the lesser evils since you can't expect anything to be forwards-compatible.
> 
> In theory, you could detect the version using otool - that's what X11() is doing to find whether XQuartz is present, but it only works for users that have dev tools installed, so not a good idea in general.

Okay, thanks.  I already have a no-X11 workaround; I'll just change the 
error message if the dyn.load() fails.

Duncan

> 
> Cheers,
> Simon
> 
> 
> 
>> On Feb 14, 2021, at 11:32 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 13/02/2021 4:54 p.m., Simon Urbanek wrote:
>>> As mentioned earlier, the issue is likely that your X11-auto-launch is not working. You can start X11 (=XQuartz) yourself and set DISPLAY=:0 as you would on any unix system or start X11 with X11(":0")
>>> [personally, I hate that auto-launch "feature" since it tries to start XQuartz even if you don't want it].
>>
>> Thanks.  Here's another datum:  I did my last build of rgl with the beta XQuartz installed.  I'm now back to 2.7.11 and I get this when I try to start rgl:
>>
>>> library(rgl)
>> Error in dyn.load(dynlib) :
>>   unable to load shared object '/Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so':
>> dlopen(/Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so, 6): Library not loaded: /opt/X11/lib/libX11.6.dylib
>>   Referenced from: /Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/rgl.so
>>   Reason: Incompatible library version: rgl.so requires version 11.0.0 or later, but libX11.6.dylib provides version 10.0.0
>> Error: package or namespace load failed for ?rgl?:
>> .onLoad failed in loadNamespace() for 'rgl', details:
>>   call: NULL
>>   error: 	Loading rgl's DLL failed.
>> 	This build of rgl depends on XQuartz, which you can download from xquartz.org.
>>
>> So it appears they updated the version of libX11.6.dylib, and rgl is asking for the wrong one.
>>
>> Is there some way for me to request a particular version during my build, or at least detect that the wrong version is installed?
>>
>> Duncan Murdoch
>>
>>> Cheers,
>>> Simon
>>>> On Feb 14, 2021, at 9:50 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>>>
>>>> I tried this.  It made no difference.  Both before and after running
>>>> sudo xcode-select ?install
>>>> I ran (in both cases, in a brand new *R* sessio n)
>>>>
>>>>> X11()
>>>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>>>
>>>>
>>>> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
>>>> worked with intel R_4.0.3 on the Mac M1.
>>>>
>>>> ________________________________________
>>>> From: Dr Eberhard W Lisse <el at lisse.na>
>>>> Sent: Saturday, February 13, 2021 3:33 AM
>>>> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
>>>> Cc: el at lisse.NA
>>>> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>>>>
>>>> that has nothing to do with Xquartz but means you need to install the Command line tools
>>>>
>>>> sudo xcode-select ?install
>>>>
>>>> ?
>>>> Sent from Dr Lisse?s iPhone
>>>> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
>>>> Using the intel R_4.0.4RC on the Mac M1.
>>>>
>>>> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
>>>> X11() now does not work at all.
>>>>
>>>> X11()
>>>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>>> C-c C-c C-c C-c
>>>>
>>>> Force-Killing XQuartz from the Activity Monitor doesn't help.
>>>> I have to Force-kill the R process.
>>>>
>>>> ________________________________________
>>>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
>>>> Sent: Friday, February 12, 2021 6:50 PM
>>>> To: R-SIG-Mac
>>>> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>>>>
>>>> Dear macOS useRs,
>>>>
>>>> please test the latest R 4.0.4 RC builds from
>>>>
>>>> https://mac.r-project.org/
>>>>
>>>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>>>>
>>>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>>>>
>>>> Cheers,
>>>> Simon
>>>>
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sat Feb 13 23:54:07 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Sat, 13 Feb 2021 22:54:07 +0000
Subject: [R-SIG-Mac] Unable to change some members of a vector
Message-ID: <BN7PR08MB4114BF6DC1D4CCC61BE28A14D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>

I have a problem I don?t know how to deal with.? I?ve used read.table to create the data frame called msPdf.? It contains three vectors:? month, site, conc.? Some of the site values look like this:? MLH\xca.? I was able to change that with this command: msPdf$site[13]="MLH?.? That seems to have been allowed because some of the other sites are simply MLH.? But the system won?t let me make the same kind of change in another case:
 msPdf$site[29]="MUH?.? When I ask for that, I get?
Warning message:
In `[<-.factor`(`*tmp*`, 29, value = c(5L, 2L, 1L, 11L, 5L, 12L,? :
? invalid factor level, NA generated
> #13? May MLH\xca 0.007
Then if I enter msPdf$site[29], I get this response:
[1] <NA>
Levels: CrCr LMO MCE MCH MFSC MLE MLH MLH\xca MUE MUH\xca NFSC SFSC

In other words, although other sites that were just plain MLH, there were not other sites that were just plain MUH.
How can I fix this problem?? I have no idea why excel added those \xca bits to a few of the site values.


From rmh @end|ng |rom temp|e@edu  Sun Feb 14 00:13:17 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 13 Feb 2021 23:13:17 +0000
Subject: [R-SIG-Mac] [External] Re:  [External] Please test R 4.0.4 RC
In-Reply-To: <1053EE4E-3AE2-4B6D-9128-3063320125E8@R-project.org>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <28E9F0C9-40A9-4023-928E-180465F96BFE@R-project.org>
 <CO1PR11MB5107B6CC798B64B160BB3EB2D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <1053EE4E-3AE2-4B6D-9128-3063320125E8@R-project.org>
Message-ID: <CO1PR11MB5107C1AA564E4EE9B932B172D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>

Well, my original report didn't give full information because R locked up too early.

>From here I am following instructions and reporting back:

R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> setwd('/Users/rmh/Rwd/')
> system("Applications/Xquartz")
sh: Applications/Xquartz: No such file or directory
Warning message:
In system("Applications/Xquartz") : error in running command
> system("/Applications/Xquartz")
sh: /Applications/Xquartz: No such file or directory
Warning message:
In system("/Applications/Xquartz") : error in running command
> system("/Applications/Utilities/Xquartz")
sh: /Applications/Utilities/Xquartz: No such file or directory
Warning message:
In system("/Applications/Utilities/Xquartz") : error in running command
> system("/Applications/Utilities/Xquartz.app")
sh: /Applications/Utilities/Xquartz.app: is a directory
> system("/Applications/Utilities/Xquartz.app/Contents/MacOS/X11")
> X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
  unable to start device X11
In addition: Warning messages:
1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
  running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
2: In X11() : unable to open connection to X11 display ''
> system("/Applications/Utilities/Xquartz.app/Contents/MacOS/X11")
> ## from the Cmd-Tab I opened Xquartz, and from its Applications I opened xterm, and then ran an ls in xterm. it works.
> X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
  unable to start device X11
In addition: Warning messages:
1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
  running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
2: In X11() : unable to open connection to X11 display ''
> Sys.getenv("DISPLAY")
[1] "/private/tmp/com.apple.launchd.l0xAmiv83n/org.xquartz:0"
> unlink(Sys.getenv("DISPLAY"))
>    Sys.setenv(DISPLAY=":0.0")
> X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
  unable to start device X11
In addition: Warning messages:
1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
  running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
2: In X11() : unable to open connection to X11 display ''
>

________________________________________
From: Simon Urbanek <simon.urbanek at R-project.org>
Sent: Saturday, February 13, 2021 5:35 PM
To: Richard M. Heiberger
Cc: Dr Eberhard W Lisse; R-SIG-Mac
Subject: Re: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC

Richard,

thanks - finally a more complete output to go on. This is exactly the reminder why it is so important to post the _full_output - the actual facts were completely missing from your previous report.

Firstly, the xcrun output is just a warning which indicates that R can't find out whether you have XQuartz installed or not. It also shows that your Xcode/command line tools are broken. That in itself is not a problem as long as you don't intend to compile packages - but probably you should look into it.

But more importantly your XQuartz doesn't work - or at least is not running at the time you are trying to run X11() in R. Make sure you start XQuartz first (from Applications -> Utilities) and it works. If in doubt, you can wipe it (it lives in /opt/X11) and re-install.

Either way, neither seems to be an R issue per se.

Cheers,
Simon


`
> On Feb 14, 2021, at 11:00 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>
> another fresh R session
>
>> X11(":0")
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
>  unable to start device X11
> In addition: Warning messages:
> 1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
>  running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
> 2: In X11(":0") : unable to open connection to X11 display ':0'
>>
>
> ________________________________________
> From: Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Saturday, February 13, 2021 4:54 PM
> To: Richard M. Heiberger
> Cc: Dr Eberhard W Lisse; R-SIG-Mac
> Subject: Re: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>
> As mentioned earlier, the issue is likely that your X11-auto-launch is not working. You can start X11 (=XQuartz) yourself and set DISPLAY=:0 as you would on any unix system or start X11 with X11(":0")
> [personally, I hate that auto-launch "feature" since it tries to start XQuartz even if you don't want it].
>
> Cheers,
> Simon
>
>
>> On Feb 14, 2021, at 9:50 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>
>> I tried this.  It made no difference.  Both before and after running
>> sudo xcode-select ?install
>> I ran (in both cases, in a brand new *R* sessio n)
>>
>>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>>
>>
>> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
>> worked with intel R_4.0.3 on the Mac M1.
>>
>> ________________________________________
>> From: Dr Eberhard W Lisse <el at lisse.na>
>> Sent: Saturday, February 13, 2021 3:33 AM
>> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
>> Cc: el at lisse.NA
>> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>>
>> that has nothing to do with Xquartz but means you need to install the Command line tools
>>
>> sudo xcode-select ?install
>>
>> ?
>> Sent from Dr Lisse?s iPhone
>> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
>> Using the intel R_4.0.4RC on the Mac M1.
>>
>> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
>> X11() now does not work at all.
>>
>> X11()
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>> C-c C-c C-c C-c
>>
>> Force-Killing XQuartz from the Activity Monitor doesn't help.
>> I have to Force-kill the R process.
>>
>> ________________________________________
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
>> Sent: Friday, February 12, 2021 6:50 PM
>> To: R-SIG-Mac
>> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>>
>> Dear macOS useRs,
>>
>> please test the latest R 4.0.4 RC builds from
>>
>> https://mac.r-project.org/
>>
>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>>
>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>>
>> Cheers,
>> Simon
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>


From rmh @end|ng |rom temp|e@edu  Sun Feb 14 00:41:17 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 13 Feb 2021 23:41:17 +0000
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Re: [External]
 Please test R 4.0.4 RC
In-Reply-To: <a09b4128-c817-485c-b11d-aa8991681447@Spark>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <a09b4128-c817-485c-b11d-aa8991681447@Spark>
Message-ID: <CO1PR11MB5107672F0AE3688D80F4A5BED28A9@CO1PR11MB5107.namprd11.prod.outlook.com>

I reported on installing xcode tools in my email
 Sat 2/13/2021 3:59 PM
It didn't help.

I did all this R_4.0.4 RC testing after updating to Big Sur 11.2.1.

________________________________________
From: Dr Eberhard W Lisse <el at lisse.na>
Sent: Saturday, February 13, 2021 4:44 PM
To: Duncan Murdoch; R-SIG-Mac; Richard M. Heiberger
Cc: el at lisse.NA
Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC

the Xcode Command line tools are missing. Install them and see what happens.

Did you recently upgrade MacOS?

el

?
Sent from Dr Lisse?s iPhone
On 13 Feb 2021, 23:21 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
That is next. Again a fresh session.


setwd('/Users/rmh/Rwd/')
Sys.setenv(DISPLAY=":0.0")
X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize, :
unable to start device X11
In addition: Warning messages:
1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
2: In X11() : unable to open connection to X11 display ''



and the R session is still alive.


This rasies for me a different question. Why should I want X11()?

When X11 was working it was very slow, and didn't allow paging back through
previous images.

In favor of X11, I think it uses the display space better. X11() has better size and spacing for xlab, ylab, and main than quartz(). But that isn't a strong enough
reason to use it while develkoping a graph. When I want it to look good,
I go directly to pdf() and get the spacing that I think looks better.

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Saturday, February 13, 2021 4:05 PM
To: Richard M. Heiberger; R-SIG-Mac
Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC

Have you tried the change to DISPLAY, i.e.

Sys.setenv(DISPLAY=":0.0")

before running X11()?

Duncan Murdoch

On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
I tried this. It made no difference. Both before and after running
sudo xcode-select ?install
I ran (in both cases, in a brand new *R* sessio n)

X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun


My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
worked with intel R_4.0.3 on the Mac M1.

________________________________________
From: Dr Eberhard W Lisse <el at lisse.na>
Sent: Saturday, February 13, 2021 3:33 AM
To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
Cc: el at lisse.NA
Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC

that has nothing to do with Xquartz but means you need to install the Command line tools

sudo xcode-select ?install

?
Sent from Dr Lisse?s iPhone
On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
Using the intel R_4.0.4RC on the Mac M1.

Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
X11() now does not work at all.

X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
C-c C-c C-c C-c

Force-Killing XQuartz from the Activity Monitor doesn't help.
I have to Force-kill the R process.

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
Sent: Friday, February 12, 2021 6:50 PM
To: R-SIG-Mac
Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC

Dear macOS useRs,

please test the latest R 4.0.4 RC builds from

https://mac.r-project.org/

especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.

Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.

Cheers,
Simon

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From e| @end|ng |rom ||@@e@n@  Sun Feb 14 00:50:50 2021
From: e| @end|ng |rom ||@@e@n@ (Dr Eberhard W Lisse)
Date: Sun, 14 Feb 2021 01:50:50 +0200
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Re: [External]
 Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB5107672F0AE3688D80F4A5BED28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <a09b4128-c817-485c-b11d-aa8991681447@Spark>
 <CO1PR11MB5107672F0AE3688D80F4A5BED28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <d163bcee-5157-43a5-bcdf-3a5945b71f61@Spark>

Remove the directory where xcrun says it is supposed to live and re-install the command line tools?

el

?
Sent from Dr Lisse?s iPhone
On 14 Feb 2021, 01:41 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> I reported on installing xcode tools in my email
> Sat 2/13/2021 3:59 PM
> It didn't help.
>
> I did all this R_4.0.4 RC testing after updating to Big Sur 11.2.1.
>
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 4:44 PM
> To: Duncan Murdoch; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC
>
> the Xcode Command line tools are missing. Install them and see what happens.
>
> Did you recently upgrade MacOS?
>
> el
>
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 23:21 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> That is next. Again a fresh session.
>
>
> setwd('/Users/rmh/Rwd/')
> Sys.setenv(DISPLAY=":0.0")
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize, :
> unable to start device X11
> In addition: Warning messages:
> 1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
> running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
> 2: In X11() : unable to open connection to X11 display ''
>
>
>
> and the R session is still alive.
>
>
> This rasies for me a different question. Why should I want X11()?
>
> When X11 was working it was very slow, and didn't allow paging back through
> previous images.
>
> In favor of X11, I think it uses the display space better. X11() has better size and spacing for xlab, ylab, and main than quartz(). But that isn't a strong enough
> reason to use it while develkoping a graph. When I want it to look good,
> I go directly to pdf() and get the spacing that I think looks better.
>
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 13, 2021 4:05 PM
> To: Richard M. Heiberger; R-SIG-Mac
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
>
> Have you tried the change to DISPLAY, i.e.
>
> Sys.setenv(DISPLAY=":0.0")
>
> before running X11()?
>
> Duncan Murdoch
>
> On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
> I tried this. It made no difference. Both before and after running
> sudo xcode-select ?install
> I ran (in both cases, in a brand new *R* sessio n)
>
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>
>
> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
> worked with intel R_4.0.3 on the Mac M1.
>
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 3:33 AM
> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>
> that has nothing to do with Xquartz but means you need to install the Command line tools
>
> sudo xcode-select ?install
>
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> Using the intel R_4.0.4RC on the Mac M1.
>
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
>
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> C-c C-c C-c C-c
>
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.
>
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Friday, February 12, 2021 6:50 PM
> To: R-SIG-Mac
> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>
> Dear macOS useRs,
>
> please test the latest R 4.0.4 RC builds from
>
> https://mac.r-project.org/
>
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>
> Cheers,
> Simon
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Sun Feb 14 01:22:46 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sun, 14 Feb 2021 00:22:46 +0000
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Re: [External]
 Please test R 4.0.4 RC
In-Reply-To: <d163bcee-5157-43a5-bcdf-3a5945b71f61@Spark>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <a09b4128-c817-485c-b11d-aa8991681447@Spark>
 <CO1PR11MB5107672F0AE3688D80F4A5BED28A9@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <d163bcee-5157-43a5-bcdf-3a5945b71f61@Spark>
Message-ID: <CO1PR11MB5107038EE6B73B6A688D8DA7D2899@CO1PR11MB5107.namprd11.prod.outlook.com>

It is looking for:
 missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun

This is the entirety of
  /Library/Developer/CommandLineTools/usr/share/

  /Library/Developer/CommandLineTools/usr/share/man:
  total used in directory 40 available 1.3 TiB
  drwxr-xr-x  3 root  wheel     96 Feb 11 12:34 .
  drwxr-xr-x  3 root  wheel     96 Feb 11 12:34 ..
  -rw-r--r--  1 root  wheel  20198 Jan 27 16:11 whatis

So I will again try
sudo xcode-select --install

It took a few minutes, and now from a new R session
> X11()
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  : 
  unable to start device X11
In addition: Warning message:
In X11() : unable to open connection to X11 display ''
> Sys.getenv("DISPLAY")
[1] "/private/tmp/com.apple.launchd.l0xAmiv83n/org.xquartz:0"
> Sys.setenv(DISPLAY=":0.0")
> Sys.getenv("DISPLAY")
[1] ":0.0"
> X11()
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  : 
  unable to start device X11
In addition: Warning message:
In X11() : unable to open connection to X11 display ''
> 



the xcrun is still not on the machine, and specifically not in /Library/Developer/CommandLineTools/
________________________________________
From: Dr Eberhard W Lisse <el at lisse.na>
Sent: Saturday, February 13, 2021 6:50 PM
To: Duncan Murdoch; R-SIG-Mac; Richard M. Heiberger
Cc: el at lisse.NA
Subject: Re: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC

Remove the directory where xcrun says it is supposed to live and re-install the command line tools?

el

?
Sent from Dr Lisse?s iPhone
On 14 Feb 2021, 01:41 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
I reported on installing xcode tools in my email
Sat 2/13/2021 3:59 PM
It didn't help.

I did all this R_4.0.4 RC testing after updating to Big Sur 11.2.1.

________________________________________
From: Dr Eberhard W Lisse <el at lisse.na>
Sent: Saturday, February 13, 2021 4:44 PM
To: Duncan Murdoch; R-SIG-Mac; Richard M. Heiberger
Cc: el at lisse.NA
Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC

the Xcode Command line tools are missing. Install them and see what happens.

Did you recently upgrade MacOS?

el

?
Sent from Dr Lisse?s iPhone
On 13 Feb 2021, 23:21 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
That is next. Again a fresh session.


setwd('/Users/rmh/Rwd/')
Sys.setenv(DISPLAY=":0.0")
X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize, :
unable to start device X11
In addition: Warning messages:
1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
2: In X11() : unable to open connection to X11 display ''



and the R session is still alive.


This rasies for me a different question. Why should I want X11()?

When X11 was working it was very slow, and didn't allow paging back through
previous images.

In favor of X11, I think it uses the display space better. X11() has better size and spacing for xlab, ylab, and main than quartz(). But that isn't a strong enough
reason to use it while develkoping a graph. When I want it to look good,
I go directly to pdf() and get the spacing that I think looks better.

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Saturday, February 13, 2021 4:05 PM
To: Richard M. Heiberger; R-SIG-Mac
Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC

Have you tried the change to DISPLAY, i.e.

Sys.setenv(DISPLAY=":0.0")

before running X11()?

Duncan Murdoch

On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
I tried this. It made no difference. Both before and after running
sudo xcode-select ?install
I ran (in both cases, in a brand new *R* sessio n)

X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun


My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
worked with intel R_4.0.3 on the Mac M1.

________________________________________
From: Dr Eberhard W Lisse <el at lisse.na>
Sent: Saturday, February 13, 2021 3:33 AM
To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
Cc: el at lisse.NA
Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC

that has nothing to do with Xquartz but means you need to install the Command line tools

sudo xcode-select ?install

?
Sent from Dr Lisse?s iPhone
On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
Using the intel R_4.0.4RC on the Mac M1.

Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
X11() now does not work at all.

X11()
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
C-c C-c C-c C-c

Force-Killing XQuartz from the Activity Monitor doesn't help.
I have to Force-kill the R process.

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
Sent: Friday, February 12, 2021 6:50 PM
To: R-SIG-Mac
Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC

Dear macOS useRs,

please test the latest R 4.0.4 RC builds from

https://mac.r-project.org/

especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.

Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.

Cheers,
Simon

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Feb 14 02:42:55 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 20:42:55 -0500
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Re: [External]
 Please test R 4.0.4 RC
In-Reply-To: <CO1PR11MB5107038EE6B73B6A688D8DA7D2899@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <a09b4128-c817-485c-b11d-aa8991681447@Spark>
 <CO1PR11MB5107672F0AE3688D80F4A5BED28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <d163bcee-5157-43a5-bcdf-3a5945b71f61@Spark>
 <CO1PR11MB5107038EE6B73B6A688D8DA7D2899@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <0c4e8ddd-0eca-d05c-dd56-2bbc87c7aab0@gmail.com>

This worked for me to apparently fix my system:

Start with a newly rebooted system.

Uninstall XQuartz by dragging it to the trash.

Look in /Library/LaunchAgents/ for filenames related to xquartz.  I had 
two:  a five year old one called org.macosforge.xquartz.startx.plist, 
and one from around the time I installed the XQuartz beta named 
org.xquartz.startx.plist.  I deleted the latter.

Look in /Library/LaunchDaemons/ for similar files.  I deleted one with 
the same name, i.e. org.xquartz.startx.plist, and left an older one.

Reboot the system again, and install XQuartz 2.7.11.  Relogin, and 
things seem fine.

Duncan Murdoch



On 13/02/2021 7:22 p.m., Richard M. Heiberger wrote:
> It is looking for:
>   missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> 
> This is the entirety of
>    /Library/Developer/CommandLineTools/usr/share/
> 
>    /Library/Developer/CommandLineTools/usr/share/man:
>    total used in directory 40 available 1.3 TiB
>    drwxr-xr-x  3 root  wheel     96 Feb 11 12:34 .
>    drwxr-xr-x  3 root  wheel     96 Feb 11 12:34 ..
>    -rw-r--r--  1 root  wheel  20198 Jan 27 16:11 whatis
> 
> So I will again try
> sudo xcode-select --install
> 
> It took a few minutes, and now from a new R session
>> X11()
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
>    unable to start device X11
> In addition: Warning message:
> In X11() : unable to open connection to X11 display ''
>> Sys.getenv("DISPLAY")
> [1] "/private/tmp/com.apple.launchd.l0xAmiv83n/org.xquartz:0"
>> Sys.setenv(DISPLAY=":0.0")
>> Sys.getenv("DISPLAY")
> [1] ":0.0"
>> X11()
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
>    unable to start device X11
> In addition: Warning message:
> In X11() : unable to open connection to X11 display ''
>>
> 
> 
> 
> the xcrun is still not on the machine, and specifically not in /Library/Developer/CommandLineTools/
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 6:50 PM
> To: Duncan Murdoch; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: Re: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC
> 
> Remove the directory where xcrun says it is supposed to live and re-install the command line tools?
> 
> el
> 
> ?
> Sent from Dr Lisse?s iPhone
> On 14 Feb 2021, 01:41 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> I reported on installing xcode tools in my email
> Sat 2/13/2021 3:59 PM
> It didn't help.
> 
> I did all this R_4.0.4 RC testing after updating to Big Sur 11.2.1.
> 
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 4:44 PM
> To: Duncan Murdoch; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC
> 
> the Xcode Command line tools are missing. Install them and see what happens.
> 
> Did you recently upgrade MacOS?
> 
> el
> 
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 23:21 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> That is next. Again a fresh session.
> 
> 
> setwd('/Users/rmh/Rwd/')
> Sys.setenv(DISPLAY=":0.0")
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize, :
> unable to start device X11
> In addition: Warning messages:
> 1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
> running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
> 2: In X11() : unable to open connection to X11 display ''
> 
> 
> 
> and the R session is still alive.
> 
> 
> This rasies for me a different question. Why should I want X11()?
> 
> When X11 was working it was very slow, and didn't allow paging back through
> previous images.
> 
> In favor of X11, I think it uses the display space better. X11() has better size and spacing for xlab, ylab, and main than quartz(). But that isn't a strong enough
> reason to use it while develkoping a graph. When I want it to look good,
> I go directly to pdf() and get the spacing that I think looks better.
> 
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 13, 2021 4:05 PM
> To: Richard M. Heiberger; R-SIG-Mac
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
> 
> Have you tried the change to DISPLAY, i.e.
> 
> Sys.setenv(DISPLAY=":0.0")
> 
> before running X11()?
> 
> Duncan Murdoch
> 
> On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
> I tried this. It made no difference. Both before and after running
> sudo xcode-select ?install
> I ran (in both cases, in a brand new *R* sessio n)
> 
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> 
> 
> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
> worked with intel R_4.0.3 on the Mac M1.
> 
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 3:33 AM
> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
> 
> that has nothing to do with Xquartz but means you need to install the Command line tools
> 
> sudo xcode-select ?install
> 
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> Using the intel R_4.0.4RC on the Mac M1.
> 
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
> 
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> C-c C-c C-c C-c
> 
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.
> 
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Friday, February 12, 2021 6:50 PM
> To: R-SIG-Mac
> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
> 
> Dear macOS useRs,
> 
> please test the latest R 4.0.4 RC builds from
> 
> https://mac.r-project.org/
> 
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
> 
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
> 
> Cheers,
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From m|k3h@|| @end|ng |rom gm@||@com  Sun Feb 14 03:00:33 2021
From: m|k3h@|| @end|ng |rom gm@||@com (Michael Hall)
Date: Sat, 13 Feb 2021 20:00:33 -0600
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
In-Reply-To: <mailman.14159.2512.1613259687.1405.r-sig-mac@r-project.org>
References: <mailman.14159.2512.1613259687.1405.r-sig-mac@r-project.org>
Message-ID: <FB0FD9D2-96B3-4F3C-9E19-96D22CCAFC1C@gmail.com>



> On Feb 13, 2021, at 5:41 PM, r-sig-mac-request at r-project.org wrote:
> 
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun

https://ma.ttias.be/mac-os-xcrun-error-invalid-active-developer-path-missing-xcrun/


	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Sun Feb 14 03:30:45 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 14 Feb 2021 15:30:45 +1300
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
In-Reply-To: <FB0FD9D2-96B3-4F3C-9E19-96D22CCAFC1C@gmail.com>
References: <mailman.14159.2512.1613259687.1405.r-sig-mac@r-project.org>
 <FB0FD9D2-96B3-4F3C-9E19-96D22CCAFC1C@gmail.com>
Message-ID: <3B1BC143-60AB-4E44-B6E4-DB2DE74FF8D7@R-project.org>

Michael,
Thanks, but please don't post 3rd party links that are just one-liners with extra advertising, especially when they have been already mentioned.
Cheers,
Simon


> On Feb 14, 2021, at 15:00, Michael Hall <mik3hall at gmail.com> wrote:
> 
> 
> 
>> On Feb 13, 2021, at 5:41 PM, r-sig-mac-request at r-project.org wrote:
>> 
>> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> 
> https://ma.ttias.be/mac-os-xcrun-error-invalid-active-developer-path-missing-xcrun/
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From m|k3h@|| @end|ng |rom gm@||@com  Sun Feb 14 03:41:11 2021
From: m|k3h@|| @end|ng |rom gm@||@com (Michael Hall)
Date: Sat, 13 Feb 2021 20:41:11 -0600
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
In-Reply-To: <3B1BC143-60AB-4E44-B6E4-DB2DE74FF8D7@R-project.org>
References: <mailman.14159.2512.1613259687.1405.r-sig-mac@r-project.org>
 <FB0FD9D2-96B3-4F3C-9E19-96D22CCAFC1C@gmail.com>
 <3B1BC143-60AB-4E44-B6E4-DB2DE74FF8D7@R-project.org>
Message-ID: <95B0214C-5DCB-4F68-A226-F25636EDE5AE@gmail.com>



> On Feb 13, 2021, at 8:30 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Michael,
> Thanks, but please don't post 3rd party links that are just one-liners with extra advertising, especially when they have been already mentioned.
> Cheers,
> Simon

I think my link expanded some on the original answer which it didn?t sound like worked.
?
It included additionally?

sudo xcode-select ?reset

and?

If even that fails, go to the Apple developer download section and download Xcode manually.

But I did just google it and have no personal experience with the error. Often though just google will find you someone else who has dealt with the issue.


From rmh @end|ng |rom temp|e@edu  Sun Feb 14 05:10:18 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sun, 14 Feb 2021 04:10:18 +0000
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Re: [External]
 Please test R 4.0.4 RC
In-Reply-To: <0c4e8ddd-0eca-d05c-dd56-2bbc87c7aab0@gmail.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <a09b4128-c817-485c-b11d-aa8991681447@Spark>
 <CO1PR11MB5107672F0AE3688D80F4A5BED28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <d163bcee-5157-43a5-bcdf-3a5945b71f61@Spark>
 <CO1PR11MB5107038EE6B73B6A688D8DA7D2899@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <0c4e8ddd-0eca-d05c-dd56-2bbc87c7aab0@gmail.com>
Message-ID: <CO1PR11MB51078E439EB41FCFD5DEBEF1D2899@CO1PR11MB5107.namprd11.prod.outlook.com>

Thank you.  dragging the org.xquartz.startx.* to Trash and reinstalling 2.7.11 restored my system to sanity.

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Saturday, February 13, 2021 8:42 PM
To: Richard M. Heiberger; R-SIG-Mac
Subject: Re: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC

This worked for me to apparently fix my system:

Start with a newly rebooted system.

Uninstall XQuartz by dragging it to the trash.

Look in /Library/LaunchAgents/ for filenames related to xquartz.  I had
two:  a five year old one called org.macosforge.xquartz.startx.plist,
and one from around the time I installed the XQuartz beta named
org.xquartz.startx.plist.  I deleted the latter.

Look in /Library/LaunchDaemons/ for similar files.  I deleted one with
the same name, i.e. org.xquartz.startx.plist, and left an older one.

Reboot the system again, and install XQuartz 2.7.11.  Relogin, and
things seem fine.

Duncan Murdoch



On 13/02/2021 7:22 p.m., Richard M. Heiberger wrote:
> It is looking for:
>   missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>
> This is the entirety of
>    /Library/Developer/CommandLineTools/usr/share/
>
>    /Library/Developer/CommandLineTools/usr/share/man:
>    total used in directory 40 available 1.3 TiB
>    drwxr-xr-x  3 root  wheel     96 Feb 11 12:34 .
>    drwxr-xr-x  3 root  wheel     96 Feb 11 12:34 ..
>    -rw-r--r--  1 root  wheel  20198 Jan 27 16:11 whatis
>
> So I will again try
> sudo xcode-select --install
>
> It took a few minutes, and now from a new R session
>> X11()
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
>    unable to start device X11
> In addition: Warning message:
> In X11() : unable to open connection to X11 display ''
>> Sys.getenv("DISPLAY")
> [1] "/private/tmp/com.apple.launchd.l0xAmiv83n/org.xquartz:0"
>> Sys.setenv(DISPLAY=":0.0")
>> Sys.getenv("DISPLAY")
> [1] ":0.0"
>> X11()
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize,  :
>    unable to start device X11
> In addition: Warning message:
> In X11() : unable to open connection to X11 display ''
>>
>
>
>
> the xcrun is still not on the machine, and specifically not in /Library/Developer/CommandLineTools/
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 6:50 PM
> To: Duncan Murdoch; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: Re: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC
>
> Remove the directory where xcrun says it is supposed to live and re-install the command line tools?
>
> el
>
> ?
> Sent from Dr Lisse?s iPhone
> On 14 Feb 2021, 01:41 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> I reported on installing xcode tools in my email
> Sat 2/13/2021 3:59 PM
> It didn't help.
>
> I did all this R_4.0.4 RC testing after updating to Big Sur 11.2.1.
>
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 4:44 PM
> To: Duncan Murdoch; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Re: [External] Please test R 4.0.4 RC
>
> the Xcode Command line tools are missing. Install them and see what happens.
>
> Did you recently upgrade MacOS?
>
> el
>
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 23:21 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> That is next. Again a fresh session.
>
>
> setwd('/Users/rmh/Rwd/')
> Sys.setenv(DISPLAY=":0.0")
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> Error in .External2(C_X11, d$display, d$width, d$height, d$pointsize, :
> unable to start device X11
> In addition: Warning messages:
> 1: In system2("otool", c("-L", shQuote(DSO)), stdout = TRUE) :
> running command ''otool' -L '/Library/Frameworks/R.framework/Resources/modules/R_X11.so'' had status 1
> 2: In X11() : unable to open connection to X11 display ''
>
>
>
> and the R session is still alive.
>
>
> This rasies for me a different question. Why should I want X11()?
>
> When X11 was working it was very slow, and didn't allow paging back through
> previous images.
>
> In favor of X11, I think it uses the display space better. X11() has better size and spacing for xlab, ylab, and main than quartz(). But that isn't a strong enough
> reason to use it while develkoping a graph. When I want it to look good,
> I go directly to pdf() and get the spacing that I think looks better.
>
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 13, 2021 4:05 PM
> To: Richard M. Heiberger; R-SIG-Mac
> Subject: [External] Re: [R-SIG-Mac] [External] Re: [External] Please test R 4.0.4 RC
>
> Have you tried the change to DISPLAY, i.e.
>
> Sys.setenv(DISPLAY=":0.0")
>
> before running X11()?
>
> Duncan Murdoch
>
> On 13/02/2021 3:50 p.m., Richard M. Heiberger wrote:
> I tried this. It made no difference. Both before and after running
> sudo xcode-select ?install
> I ran (in both cases, in a brand new *R* sessio n)
>
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
>
>
> My prior was that the xcode call was irrelevant is that X11() using XQuart 8.0.3beta
> worked with intel R_4.0.3 on the Mac M1.
>
> ________________________________________
> From: Dr Eberhard W Lisse <el at lisse.na>
> Sent: Saturday, February 13, 2021 3:33 AM
> To: Simon Urbanek; R-SIG-Mac; Richard M. Heiberger
> Cc: el at lisse.NA
> Subject: [External] Re: [R-SIG-Mac] [External] Please test R 4.0.4 RC
>
> that has nothing to do with Xquartz but means you need to install the Command line tools
>
> sudo xcode-select ?install
>
> ?
> Sent from Dr Lisse?s iPhone
> On 13 Feb 2021, 06:13 +0200, Richard M. Heiberger <rmh at temple.edu>, wrote:
> Using the intel R_4.0.4RC on the Mac M1.
>
> Based on your recommendation I reinstalled XQuartz 2.7.11 instead of the 8.0.3beta.
> X11() now does not work at all.
>
> X11()
> xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
> C-c C-c C-c C-c
>
> Force-Killing XQuartz from the Activity Monitor doesn't help.
> I have to Force-kill the R process.
>
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Simon Urbanek <simon.urbanek at R-project.org>
> Sent: Friday, February 12, 2021 6:50 PM
> To: R-SIG-Mac
> Subject: [External] [R-SIG-Mac] Please test R 4.0.4 RC
>
> Dear macOS useRs,
>
> please test the latest R 4.0.4 RC builds from
>
> https://mac.r-project.org/
>
> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>
> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>
> Cheers,
> Simon
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From ken @end|ng |rom kjbe@th@com@@u  Sun Feb 14 05:34:13 2021
From: ken @end|ng |rom kjbe@th@com@@u (Ken Beath)
Date: Sun, 14 Feb 2021 15:34:13 +1100
Subject: [R-SIG-Mac] Unable to change some members of a vector
In-Reply-To: <BN7PR08MB4114BF6DC1D4CCC61BE28A14D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114BF6DC1D4CCC61BE28A14D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <FF8E353F-3826-42B0-A962-18876072AD3C@kjbeath.com.au>

This question is not related to Macs, but here is the answer anyway.

First up, anyone who uses R should understand what a factor is. Find an introductory text on R and read the section on factors. Even better, read the whole book.  It seems that it has been decided that R will not automatically add a factor level, which is probably a good idea.

There is an option in the read.table command of stringsAsFactors. You can set it to FALSE to obtain character strings. You can also convert the factor to character using as.character().

If Excel decides to put strange characters into your data file then that is Excel?s problem. I suggest looking at the file with a text editor. The free version of BBEdit will work fine. You can read Excel files directly using teh readxl package.

Ken

> On 14 Feb 2021, at 9:54 am, Parkhurst, David F. <parkhurs at indiana.edu> wrote:
> 
> I have a problem I don?t know how to deal with.  I?ve used read.table to create the data frame called msPdf.  It contains three vectors:  month, site, conc.  Some of the site values look like this:  MLH\xca.  I was able to change that with this command: msPdf$site[13]="MLH?.  That seems to have been allowed because some of the other sites are simply MLH.  But the system won?t let me make the same kind of change in another case:
> msPdf$site[29]="MUH?.  When I ask for that, I get 
> Warning message:
> In `[<-.factor`(`*tmp*`, 29, value = c(5L, 2L, 1L, 11L, 5L, 12L,  :
>   invalid factor level, NA generated
>> #13  May MLH\xca 0.007
> Then if I enter msPdf$site[29], I get this response:
> [1] <NA>
> Levels: CrCr LMO MCE MCH MFSC MLE MLH MLH\xca MUE MUH\xca NFSC SFSC
> 
> In other words, although other sites that were just plain MLH, there were not other sites that were just plain MUH.
> How can I fix this problem?  I have no idea why excel added those \xca bits to a few of the site values.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From pbw @end|ng |rom pbw@|d@@u  Sun Feb 14 06:04:26 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Sun, 14 Feb 2021 15:04:26 +1000
Subject: [R-SIG-Mac] Unable to change some members of a vector
In-Reply-To: <FF8E353F-3826-42B0-A962-18876072AD3C@kjbeath.com.au>
References: <BN7PR08MB4114BF6DC1D4CCC61BE28A14D08A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <FF8E353F-3826-42B0-A962-18876072AD3C@kjbeath.com.au>
Message-ID: <0DE4D4B3-90DF-4EE1-8235-D25DEE0DA307@pbw.id.au>

Just incidentally, \xCA in MacRoman encoding is an NBSP ? non-breaking space, which is the only one that looks sane. In Unicode, it?s Latin capital letter E with circumflex, as it is in ISO 8859-1.

Peter
?
pbw at ehealth.id.au
Moved with pity, he stretched out his hand and touched him and said to him, ?I will; be clean.?



> On 14 Feb 2021, at 2:34 pm, Ken Beath <ken at kjbeath.com.au> wrote:
?
> There is an option in the read.table command of stringsAsFactors. You can set it to FALSE to obtain character strings. You can also convert the factor to character using as.character().
> 
?
> Ken
> 
>> On 14 Feb 2021, at 9:54 am, Parkhurst, David F. <parkhurs at indiana.edu> wrote:
>> 
>> I have a problem I don?t know how to deal with.  I?ve used read.table to create the data frame called msPdf.  It contains three vectors:  month, site, conc.  Some of the site values look like this:  MLH\xca.  

	[[alternative HTML version deleted]]


From pbw @end|ng |rom pbw@|d@@u  Sun Feb 14 08:34:30 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Sun, 14 Feb 2021 17:34:30 +1000
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Re: [External]
 Please test R 4.0.4 RC
In-Reply-To: <0c4e8ddd-0eca-d05c-dd56-2bbc87c7aab0@gmail.com>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <a09b4128-c817-485c-b11d-aa8991681447@Spark>
 <CO1PR11MB5107672F0AE3688D80F4A5BED28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <d163bcee-5157-43a5-bcdf-3a5945b71f61@Spark>
 <CO1PR11MB5107038EE6B73B6A688D8DA7D2899@CO1PR11MB5107.namprd11.prod.outlook.com>
 <0c4e8ddd-0eca-d05c-dd56-2bbc87c7aab0@gmail.com>
Message-ID: <0CAE49AA-3F29-4DD8-925C-819E77262BD3@pbw.id.au>

Hi Duncan,

When you say ?fix,? did that include running the compiled rgl successfully against your R installation?

Peter
?
pbw at ehealth.id.au
Moved with pity, he stretched out his hand and touched him and said to him, ?I will; be clean.?



> On 14 Feb 2021, at 11:42 am, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> This worked for me to apparently fix my system:
> 
> Start with a newly rebooted system.
> 
> Uninstall XQuartz by dragging it to the trash.
> 
> Look in /Library/LaunchAgents/ for filenames related to xquartz.  I had two:  a five year old one called org.macosforge.xquartz.startx.plist, and one from around the time I installed the XQuartz beta named org.xquartz.startx.plist.  I deleted the latter.
> 
> Look in /Library/LaunchDaemons/ for similar files.  I deleted one with the same name, i.e. org.xquartz.startx.plist, and left an older one.
> 
> Reboot the system again, and install XQuartz 2.7.11.  Relogin, and things seem fine.
> 
> Duncan Murdoch
> 


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Feb 14 10:46:14 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 14 Feb 2021 04:46:14 -0500
Subject: [R-SIG-Mac] 
 [External] Re: [External] Re: [External] Re: [External]
 Please test R 4.0.4 RC
In-Reply-To: <0CAE49AA-3F29-4DD8-925C-819E77262BD3@pbw.id.au>
References: <0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <CO1PR11MB51071B2EB83BA679D6FA8DA8D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2c0bae1c-e114-43ae-9908-4b9551880b91@Spark>
 <CO1PR11MB5107AEB25A4BB46FE21352B0D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <4cea5d02-276d-88fc-d028-d918dbdcb813@gmail.com>
 <CO1PR11MB5107953C74496271CB33AFE3D28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <a09b4128-c817-485c-b11d-aa8991681447@Spark>
 <CO1PR11MB5107672F0AE3688D80F4A5BED28A9@CO1PR11MB5107.namprd11.prod.outlook.com>
 <d163bcee-5157-43a5-bcdf-3a5945b71f61@Spark>
 <CO1PR11MB5107038EE6B73B6A688D8DA7D2899@CO1PR11MB5107.namprd11.prod.outlook.com>
 <0c4e8ddd-0eca-d05c-dd56-2bbc87c7aab0@gmail.com>
 <0CAE49AA-3F29-4DD8-925C-819E77262BD3@pbw.id.au>
Message-ID: <594555e0-3d93-b2a8-3cca-5425c9e90e3a@gmail.com>

On 14/02/2021 2:34 a.m., Peter West wrote:
> Hi Duncan,
> 
> When you say ?fix,? did that include running the compiled rgl 
> successfully against your R installation?

I needed to recompile rgl after the change to 2.7.11, because I had 
built it to link to files that came with the XQuartz beta. The current 
CRAN binary (0.104.16) was already compiled for 2.7.11,  so it's also 
fine now.

If you install rgl from source after the XQuartz version change, you 
should be okay.

Duncan Murdoch

> 
> Peter
> ?
> pbw at ehealth.id.au <mailto:pbw at ehealth.id.au>
> Moved with pity, he stretched out his hand?and touched him and said to 
> him, ?I will; be?clean.?
> 
> 
> 
>> On 14 Feb 2021, at 11:42 am, Duncan Murdoch <murdoch.duncan at gmail.com 
>> <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>> This worked for me to apparently fix my system:
>>
>> Start with a newly rebooted system.
>>
>> Uninstall XQuartz by dragging it to the trash.
>>
>> Look in /Library/LaunchAgents/ for filenames related to xquartz. ?I 
>> had two: ?a five year old one called 
>> org.macosforge.xquartz.startx.plist, and one from around the time I 
>> installed the XQuartz beta named org.xquartz.startx.plist. ?I deleted 
>> the latter.
>>
>> Look in /Library/LaunchDaemons/ for similar files. ?I deleted one with 
>> the same name, i.e. org.xquartz.startx.plist, and left an older one.
>>
>> Reboot the system again, and install XQuartz 2.7.11. ?Relogin, and 
>> things seem fine.
>>
>> Duncan Murdoch
>>
>


From de|eeuw @end|ng |rom @t@t@uc|@@edu  Sat Feb 13 05:32:05 2021
From: de|eeuw @end|ng |rom @t@t@uc|@@edu (de Leeuw, Jan)
Date: Sat, 13 Feb 2021 04:32:05 +0000
Subject: [R-SIG-Mac] [External]  Please test R 4.0.4 RC
Message-ID: <9E3F7D59-6A34-48AC-887F-E8385E890422@stat.ucla.edu>

Richard

You probably have to reinstall the command line tools for your OS and Xcode version. Upgrades of the OS remove them (and thus remove xcrun)

? Jan

Sent from my iPad

From pbw @end|ng |rom pbw@|d@@u  Mon Feb 15 14:29:48 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Mon, 15 Feb 2021 23:29:48 +1000
Subject: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in
 read.table()?
In-Reply-To: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <7B912045-B958-4049-B66E-11C00E0B6B06@pbw.id.au>

David,

I thought I saw advice on this issue already that noted you could not use backslashes in file paths on a Mac. Have you tried with ?/Users/DFP/Desktop/Monroe319Ecoli.txt??  Do you come from a Windows background?

Peter
?
pbw at ehealth.id.au
?Why does this generation seek a sign? Truly, I say to you, no sign will be given to this generation.?

> On 30 Jan 2021, at 6:25 am, Parkhurst, David F. <parkhurs at indiana.edu> wrote:
> 
> I?ve tried for over an hour to figure this out with no luck.  I?ve moved the text file (created from excel) to the desktop to simplify the path.  If I click on the file and ask Get Info, it lists ?Where? as  iCloud Drive > Desktop.  If I copy that to the clipboard and paste that into a read.table command in the R interface, it comes up as /Users/DFP/Desktop.  But if I try read.table("\\Users\\DFP\\Desktop\\Monroe319Ecoli.txt"), I get No such file or directory.  How can I get that file into a data frame?


	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Mon Feb 15 14:30:35 2021
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Mon, 15 Feb 2021 14:30:35 +0100
Subject: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in
 read.table()?
In-Reply-To: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <922753B0-46D1-414F-B353-BE2A63EB2090@gmail.com>

Just use forward slashes, backslashes is a Windows thing. I.e.

read.table("/Users/DFP/Desktop/Monroe319Ecoli.txt")

should do it. A generic trick is

x <- file.choose()
dd <- read.table(x)

(and then possible have a look at x)

-pd

> On 29 Jan 2021, at 21:25 , Parkhurst, David F. <parkhurs at indiana.edu> wrote:
> 
> I?ve tried for over an hour to figure this out with no luck.  I?ve moved the text file (created from excel) to the desktop to simplify the path.  If I click on the file and ask Get Info, it lists ?Where? as  iCloud Drive > Desktop.  If I copy that to the clipboard and paste that into a read.table command in the R interface, it comes up as /Users/DFP/Desktop.  But if I try read.table("\\Users\\DFP\\Desktop\\Monroe319Ecoli.txt"), I get No such file or directory.  How can I get that file into a data frame?
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From btupper @end|ng |rom b|ge|ow@org  Mon Feb 15 14:52:24 2021
From: btupper @end|ng |rom b|ge|ow@org (Ben Tupper)
Date: Mon, 15 Feb 2021 08:52:24 -0500
Subject: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in
 read.table()?
In-Reply-To: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <CALrbzg1L=0Myyv8kM=vtbqthmNszn7bA73y4gGk7ffAX59Ndig@mail.gmail.com>

Hi,

https://stat.ethz.ch/R-manual/R-devel/library/base/html/file.path.html

See the note at the bottom.  It's liberating in many ways that R handles
the underlying details for you - use the forward slash and you'll be good
to go without regard to the platform.

I think using file.path() is the best way to go. Just do something like the
following...

filename <- file.path("Users", "DFP",  "Desktop",  "Monroe319Ecoli.txt")
x <- read.table(filename)

Cheers,
Ben


On Mon, Feb 15, 2021 at 8:14 AM Parkhurst, David F. <parkhurs at indiana.edu>
wrote:

> I?ve tried for over an hour to figure this out with no luck.  I?ve moved
> the text file (created from excel) to the desktop to simplify the path.  If
> I click on the file and ask Get Info, it lists ?Where? as  iCloud Drive >
> Desktop.  If I copy that to the clipboard and paste that into a read.table
> command in the R interface, it comes up as /Users/DFP/Desktop.  But if I
> try read.table("\\Users\\DFP\\Desktop\\Monroe319Ecoli.txt"), I get No such
> file or directory.  How can I get that file into a data frame?
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Ben Tupper
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org

	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Feb 15 15:34:29 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Mon, 15 Feb 2021 14:34:29 +0000
Subject: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in
 read.table()?
In-Reply-To: <922753B0-46D1-414F-B353-BE2A63EB2090@gmail.com>
References: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <922753B0-46D1-414F-B353-BE2A63EB2090@gmail.com>
Message-ID: <BN7PR08MB4114F1BCFBEF649EE4E891B0D0889@BN7PR08MB4114.namprd08.prod.outlook.com>

Thanks.  As I?ve said elsewhere, I thought I had seen in something I read that those double backslashes were required in a Mac. 

From: Peter Dalgaard <pdalgd at gmail.com>
Date: Monday, February 15, 2021 at 8:31 AM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Cc: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in read.table()?
Just use forward slashes, backslashes is a Windows thing. I.e.

read.table("/Users/DFP/Desktop/Monroe319Ecoli.txt")

should do it. A generic trick is

x <- file.choose()
dd <- read.table(x)

(and then possible have a look at x)

-pd

> On 29 Jan 2021, at 21:25 , Parkhurst, David F. <parkhurs at indiana.edu> wrote:
> 
> I?ve tried for over an hour to figure this out with no luck.? I?ve moved the text file (created from excel) to the desktop to simplify the path.? If I click on the file and ask Get Info, it lists ?Where? as? iCloud Drive > Desktop.? If I copy that to the clipboard and paste that into a read.table command in the R interface, it comes up as /Users/DFP/Desktop.? But if I try read.table("/Users\DFP\Desktop\Monroe319Ecoli.txt"), I get No such file or directory.? How can I get that file into a data frame?
> 
>??????? [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk? Priv: PDalgd at gmail.com









From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Feb 15 15:39:09 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Mon, 15 Feb 2021 14:39:09 +0000
Subject: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in
 read.table()?
In-Reply-To: <7B912045-B958-4049-B66E-11C00E0B6B06@pbw.id.au>
References: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <7B912045-B958-4049-B66E-11C00E0B6B06@pbw.id.au>
Message-ID: <BN7PR08MB411416ED0C90EB3D7EB64796D0889@BN7PR08MB4114.namprd08.prod.outlook.com>

I?ve got it working now given help from several people.  Yes, I?ve used windows since it first came out, and DOS before that.  I switched to a Mac maybe 18 months ago when MS said they wouldn?t support windows 7 any more, and I didn?t like my wife?s windows 10.  I?m still learning (and have just taken up R after not using it for years.). The Apple support people have taught me a lot!

From: Peter West <pbw at pbw.id.au>
Date: Monday, February 15, 2021 at 8:30 AM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Cc: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in read.table()?
David,

I thought I saw advice on this issue already that noted you could?not use backslashes in file paths on a Mac. Have you tried with ?/Users/DFP/Desktop/Monroe319Ecoli.txt?? ?Do you?come from a Windows background?

Peter
?
mailto:pbw at ehealth.id.au
?Why does this generation seek a sign??Truly, I say to you, no sign will be given to?this generation.?


On 30 Jan 2021, at 6:25 am, Parkhurst, David F. <mailto:parkhurs at indiana.edu> wrote:

I?ve tried for over an hour to figure this out with no luck. ?I?ve moved the text file (created from excel) to the desktop to simplify the path. ?If I click on the file and ask Get Info, it lists ?Where? as ?iCloud Drive > Desktop. ?If I copy that to the clipboard and paste that into a read.table command in the R interface, it comes up as /Users/DFP/Desktop. ?But if I try read.table("\\Users\\DFP\\Desktop\\Monroe319Ecoli.txt"), I get No such file or directory. ?How can I get that file into a data frame?


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Feb 15 15:42:05 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Mon, 15 Feb 2021 14:42:05 +0000
Subject: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in
 read.table()?
In-Reply-To: <CALrbzg1L=0Myyv8kM=vtbqthmNszn7bA73y4gGk7ffAX59Ndig@mail.gmail.com>
References: <BN7PR08MB4114B81A1F5DDE5E4D8866B6D0B99@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <CALrbzg1L=0Myyv8kM=vtbqthmNszn7bA73y4gGk7ffAX59Ndig@mail.gmail.com>
Message-ID: <BN7PR08MB41144275A103D052C86C11D1D0889@BN7PR08MB4114.namprd08.prod.outlook.com>

Wow.  That looks useful, especially when I don?t want to put the file to be read on the desktop.  Thanks.

From: Ben Tupper <btupper at bigelow.org>
Date: Monday, February 15, 2021 at 8:52 AM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Cc: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] I'm new to R in a Mac. How do I specify the path in read.table()?
Hi,

https://stat.ethz.ch/R-manual/R-devel/library/base/html/file.path.html

See the note at the bottom.  It's liberating in many ways that R handles the underlying details for you - use the forward slash and you'll be good to go without regard to the platform.

I think using file.path() is the best way to go. Just do something like the following...

filename <- file.path("Users", "DFP",  "Desktop",  "Monroe319Ecoli.txt")
x <- read.table(filename)

Cheers,
Ben


On Mon, Feb 15, 2021 at 8:14 AM Parkhurst, David F. <parkhurs at indiana.edu<mailto:parkhurs at indiana.edu>> wrote:
I?ve tried for over an hour to figure this out with no luck.  I?ve moved the text file (created from excel) to the desktop to simplify the path.  If I click on the file and ask Get Info, it lists ?Where? as  iCloud Drive > Desktop.  If I copy that to the clipboard and paste that into a read.table command in the R interface, it comes up as /Users/DFP/Desktop.  But if I try read.table("\\Users\\DFP\\Desktop\\Monroe319Ecoli.txt"), I get No such file or directory.  How can I get that file into a data frame?

        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


--
Ben Tupper
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org


	[[alternative HTML version deleted]]


From dtemp|e|@ng @end|ng |rom ucd@v|@@edu  Mon Feb 15 16:26:54 2021
From: dtemp|e|@ng @end|ng |rom ucd@v|@@edu (Duncan Temple Lang)
Date: Mon, 15 Feb 2021 07:26:54 -0800
Subject: [R-SIG-Mac] XML packages source compilation on macOS 10.15.7
In-Reply-To: <D75567CF-FEFE-43C9-A0B3-E9178A917631@gmail.com>
References: <D75567CF-FEFE-43C9-A0B3-E9178A917631@gmail.com>
Message-ID: <CABQ6xNYApj8zywWDC6X3KNtEB0=ccmWR3fq2Vxfx297qfURz8A@mail.gmail.com>

Hi Kemal
Can you please send the output from the entire installation attempt, and
also the config.log file.

Thanks
Duncan


On Mon, Feb 15, 2021 at 5:14 AM Kemal Akat <kma460414 at gmail.com> wrote:

> Hello all,
>
> I have to compile the XML package from source for R 4.1 (development
> version) on a Mac with OS version 10.15.7. It works well on all machines
> that do not come with any significant ballast on developer tools. One
> machine, however, that I have used for some time returns a mismatch of
> header files and library. I looked into possible offenders and purged what
> I could (e.g. deleted Homebrew although the other machines have Homebrew
> and Miniconda installed as well) but to no avail.
>
> install.packages(?XML?) fails and install.packages("XML",
> configure.args=c("LIBXML_INCDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/libxml2",
> "LIBXML_LIBDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib?))
> also fails.
>
> There are obviously differences I cannot track down so far but I am
> running out of ideas. Both machines have MacOSX10.14.sdk and
> MacOSX10.15.sdk installed with MacOSX.sdk linking to MacOSX10.15.sdk.
>
> Here is part of the log of a successful compilation, and I was hoping
> someone could point me towards a solution.
>
> libxml include directory:
> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
> libxml library directory:
> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
> -lpthread -licucore -lm -lz  -lxml2
> libxml 2:                 -DLIBXML2=1
>
> Compilation flags:         -DLIBXML
> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
> -DUSE_EXTERNAL_SUBSET=1 -DROOT_HAS_DTD_NODE=1 -DDUMP_WITH_ENCODING=1
> -DUSE_XML_VERSION_H=1 -DXML_ELEMENT_ETYPE=1 -DXML_ATTRIBUTE_ATYPE=1
> -DNO_XML_HASH_SCANNER_RETURN=1 -DLIBXML_NAMESPACE_HAS_CONTEXT=1
> -DHAVE_R_CETYPE_T=1 -DHAVE_XML_WITH_ZLIB=1 -DHAVE_XML_HAS_FEATURE=1
> -DUSE_R=1 -D_R_=1  -DHAVE_VALIDITY=1 -DXML_REF_COUNT_NODES=1
> Link flags:
>  -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
> -lpthread -licucore -lm -lz  -lxml2
>
>
> Thanks,
> Kemal
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
===============================
Duncan Temple Lang
Associate Dean for Graduate Programs
Professor, Department of Statistics
UC Davis

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Feb 16 00:42:00 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 16 Feb 2021 12:42:00 +1300
Subject: [R-SIG-Mac] XML packages source compilation on macOS 10.15.7
In-Reply-To: <CABQ6xNYApj8zywWDC6X3KNtEB0=ccmWR3fq2Vxfx297qfURz8A@mail.gmail.com>
References: <D75567CF-FEFE-43C9-A0B3-E9178A917631@gmail.com>
 <CABQ6xNYApj8zywWDC6X3KNtEB0=ccmWR3fq2Vxfx297qfURz8A@mail.gmail.com>
Message-ID: <485B458F-02AC-4FFF-8963-029AA11C41E0@R-project.org>

Kemal,

what Duncan said, since what you provided does not include any of the information needed.

In addition, you should not include SDK paths directly - SDK is used by the dev tools and does *not* include the actual libraries. So when you say /foo/bar it is actually searched inside the SDK the compiler is using. If you happen to use compilers that don't use SDKs (non-Apple) then you can use -isysroot to specify the SDK root (hopefully not your case as that is a whole can of worms). In addition, the issue may come from your version of R as well so the exact information about that is also need (how you compiled it, which flags etc.).

Cheers,
Simon


> On Feb 16, 2021, at 4:26 AM, Duncan Temple Lang via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Hi Kemal
> Can you please send the output from the entire installation attempt, and
> also the config.log file.
> 
> Thanks
> Duncan
> 
> 
> On Mon, Feb 15, 2021 at 5:14 AM Kemal Akat <kma460414 at gmail.com> wrote:
> 
>> Hello all,
>> 
>> I have to compile the XML package from source for R 4.1 (development
>> version) on a Mac with OS version 10.15.7. It works well on all machines
>> that do not come with any significant ballast on developer tools. One
>> machine, however, that I have used for some time returns a mismatch of
>> header files and library. I looked into possible offenders and purged what
>> I could (e.g. deleted Homebrew although the other machines have Homebrew
>> and Miniconda installed as well) but to no avail.
>> 
>> install.packages(?XML?) fails and install.packages("XML",
>> configure.args=c("LIBXML_INCDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/libxml2",
>> "LIBXML_LIBDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib?))
>> also fails.
>> 
>> There are obviously differences I cannot track down so far but I am
>> running out of ideas. Both machines have MacOSX10.14.sdk and
>> MacOSX10.15.sdk installed with MacOSX.sdk linking to MacOSX10.15.sdk.
>> 
>> Here is part of the log of a successful compilation, and I was hoping
>> someone could point me towards a solution.
>> 
>> libxml include directory:
>> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
>> libxml library directory:
>> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
>> -lpthread -licucore -lm -lz  -lxml2
>> libxml 2:                 -DLIBXML2=1
>> 
>> Compilation flags:         -DLIBXML
>> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
>> -DUSE_EXTERNAL_SUBSET=1 -DROOT_HAS_DTD_NODE=1 -DDUMP_WITH_ENCODING=1
>> -DUSE_XML_VERSION_H=1 -DXML_ELEMENT_ETYPE=1 -DXML_ATTRIBUTE_ATYPE=1
>> -DNO_XML_HASH_SCANNER_RETURN=1 -DLIBXML_NAMESPACE_HAS_CONTEXT=1
>> -DHAVE_R_CETYPE_T=1 -DHAVE_XML_WITH_ZLIB=1 -DHAVE_XML_HAS_FEATURE=1
>> -DUSE_R=1 -D_R_=1  -DHAVE_VALIDITY=1 -DXML_REF_COUNT_NODES=1
>> Link flags:
>> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
>> -lpthread -licucore -lm -lz  -lxml2
>> 
>> 
>> Thanks,
>> Kemal
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> -- 
> ===============================
> Duncan Temple Lang
> Associate Dean for Graduate Programs
> Professor, Department of Statistics
> UC Davis
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From km@460414 @end|ng |rom gm@||@com  Tue Feb 16 04:20:17 2021
From: km@460414 @end|ng |rom gm@||@com (Kemal Akat)
Date: Mon, 15 Feb 2021 21:20:17 -0600
Subject: [R-SIG-Mac] XML packages source compilation on macOS 10.15.7
In-Reply-To: <485B458F-02AC-4FFF-8963-029AA11C41E0@R-project.org>
References: <D75567CF-FEFE-43C9-A0B3-E9178A917631@gmail.com>
 <CABQ6xNYApj8zywWDC6X3KNtEB0=ccmWR3fq2Vxfx297qfURz8A@mail.gmail.com>
 <485B458F-02AC-4FFF-8963-029AA11C41E0@R-project.org>
Message-ID: <BF1FF67D-D756-45AA-A5FD-7880156FB738@gmail.com>

Hi Duncan and Simon,

Thanks for getting back to me.

The R version I use(d) is 

R Under development (unstable) (2021-01-15 r79833)

This was installed via the installer package downloaded from https://mac.r-project.org <https://mac.r-project.org/>. It was not compiled from source. That was the case on all Macs.

Please note that the partially log at the bottom of my original message is from a successful compilation on a Mac where ?install.packages(?XML?) works. It includes references to the CommandLineTools/SDK but that was completely without my doing. I tried it explicitly in various forms, though, when I thought this is the right way. Thanks for clarifying it is not.

Now, on the Mac where I still have trouble, the output from ?install.packages(?XML?) is (rather brief):

> install.packages("XML")
Warning: unable to access index for repository https://mac.R-project.org/bin/macosx/contrib/4.1:
  cannot open URL 'https://mac.R-project.org/bin/macosx/contrib/4.1/PACKAGES'
Package which is only available in source form, and may need compilation of C/C++/Fortran: ?XML?
Do you want to attempt to install these from sources? (Yes/no/cancel) Yes
installing the source package ?XML?

trying URL 'https://mac.R-project.org/src/contrib/XML_3.99-0.5.tar.gz'
Content type 'application/x-gzip' length 968563 bytes (945 KB)
==================================================
downloaded 945 KB

* installing *source* package ?XML? ...
** package ?XML? successfully unpacked and MD5 sums checked
** using staged installation
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for sed... /usr/bin/sed
checking for pkg-config... /usr/local/bin/pkg-config
checking for xml2-config... /usr/bin/xml2-config
USE_XML2 = yes
SED_EXTENDED_ARG: -E
Minor 9, Patch 4 for 2.9.4
Located parser file -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/parser.h
Checking for 1.8:  -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
Using libxml2.*
checking for gzopen in -lz... yes
checking for xmlParseFile in -lxml2... yes
You are trying to use a version 2.* edition of libxml
but an incompatible library. The header files and library seem to be
mismatched. If you have specified LIBXML_INCDIR, make certain to also
specify an appropriate LIBXML_LIBDIR if the libxml2 library is not in the default
directories.
ERROR: configuration failed for package ?XML?
* removing ?/Library/Frameworks/R.framework/Versions/4.1/Resources/library/XML?
* restoring previous ?/Library/Frameworks/R.framework/Versions/4.1/Resources/library/XML?

The downloaded source packages are in
	?/private/var/folders/j8/1gn6jwcx4bv8td2h83ghk1hh0000gp/T/RtmpXuYoas/downloaded_packages?
Warning message:
In install.packages("XML") :
  installation of package ?XML? had non-zero exit status
>

Best,
Kemal


> On Feb 15, 2021, at 5:42 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Kemal,
> 
> what Duncan said, since what you provided does not include any of the information needed.
> 
> In addition, you should not include SDK paths directly - SDK is used by the dev tools and does *not* include the actual libraries. So when you say /foo/bar it is actually searched inside the SDK the compiler is using. If you happen to use compilers that don't use SDKs (non-Apple) then you can use -isysroot to specify the SDK root (hopefully not your case as that is a whole can of worms). In addition, the issue may come from your version of R as well so the exact information about that is also need (how you compiled it, which flags etc.).
> 
> Cheers,
> Simon
> 
> 
>> On Feb 16, 2021, at 4:26 AM, Duncan Temple Lang via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>> 
>> Hi Kemal
>> Can you please send the output from the entire installation attempt, and
>> also the config.log file.
>> 
>> Thanks
>> Duncan
>> 
>> 
>> On Mon, Feb 15, 2021 at 5:14 AM Kemal Akat <kma460414 at gmail.com> wrote:
>> 
>>> Hello all,
>>> 
>>> I have to compile the XML package from source for R 4.1 (development
>>> version) on a Mac with OS version 10.15.7. It works well on all machines
>>> that do not come with any significant ballast on developer tools. One
>>> machine, however, that I have used for some time returns a mismatch of
>>> header files and library. I looked into possible offenders and purged what
>>> I could (e.g. deleted Homebrew although the other machines have Homebrew
>>> and Miniconda installed as well) but to no avail.
>>> 
>>> install.packages(?XML?) fails and install.packages("XML",
>>> configure.args=c("LIBXML_INCDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/libxml2",
>>> "LIBXML_LIBDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib?))
>>> also fails.
>>> 
>>> There are obviously differences I cannot track down so far but I am
>>> running out of ideas. Both machines have MacOSX10.14.sdk and
>>> MacOSX10.15.sdk installed with MacOSX.sdk linking to MacOSX10.15.sdk.
>>> 
>>> Here is part of the log of a successful compilation, and I was hoping
>>> someone could point me towards a solution.
>>> 
>>> libxml include directory:
>>> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
>>> libxml library directory:
>>> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
>>> -lpthread -licucore -lm -lz  -lxml2
>>> libxml 2:                 -DLIBXML2=1
>>> 
>>> Compilation flags:         -DLIBXML
>>> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
>>> -DUSE_EXTERNAL_SUBSET=1 -DROOT_HAS_DTD_NODE=1 -DDUMP_WITH_ENCODING=1
>>> -DUSE_XML_VERSION_H=1 -DXML_ELEMENT_ETYPE=1 -DXML_ATTRIBUTE_ATYPE=1
>>> -DNO_XML_HASH_SCANNER_RETURN=1 -DLIBXML_NAMESPACE_HAS_CONTEXT=1
>>> -DHAVE_R_CETYPE_T=1 -DHAVE_XML_WITH_ZLIB=1 -DHAVE_XML_HAS_FEATURE=1
>>> -DUSE_R=1 -D_R_=1  -DHAVE_VALIDITY=1 -DXML_REF_COUNT_NODES=1
>>> Link flags:
>>> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
>>> -lpthread -licucore -lm -lz  -lxml2
>>> 
>>> 
>>> Thanks,
>>> Kemal
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
>> 
>> -- 
>> ===============================
>> Duncan Temple Lang
>> Associate Dean for Graduate Programs
>> Professor, Department of Statistics
>> UC Davis
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


	[[alternative HTML version deleted]]


From km@460414 @end|ng |rom gm@||@com  Tue Feb 16 04:45:28 2021
From: km@460414 @end|ng |rom gm@||@com (Kemal Akat)
Date: Mon, 15 Feb 2021 21:45:28 -0600
Subject: [R-SIG-Mac] XML packages source compilation on macOS 10.15.7
In-Reply-To: <BF1FF67D-D756-45AA-A5FD-7880156FB738@gmail.com>
References: <D75567CF-FEFE-43C9-A0B3-E9178A917631@gmail.com>
 <CABQ6xNYApj8zywWDC6X3KNtEB0=ccmWR3fq2Vxfx297qfURz8A@mail.gmail.com>
 <485B458F-02AC-4FFF-8963-029AA11C41E0@R-project.org>
 <BF1FF67D-D756-45AA-A5FD-7880156FB738@gmail.com>
Message-ID: <A195BE75-A0D0-4782-B83D-12A09FC63F07@gmail.com>

Sorry, forgot the config.log. Also, I use Apple compilers (Xcode 12.3 at that time) and the GNU Fortran compiler 8.2 as recommended under ?Mandatory tools? on https://cran.r-project.org <https://cran.r-project.org/>. Now?I have a hunch here may be the root cause for my troubles as I used other compilers in the past (llvm via Homebrew) on that Mac, for instance to compile data.table with openMP support. While I deinstalled those compilers, I may have missed something else?



> On Feb 15, 2021, at 9:20 PM, Kemal Akat <kma460414 at gmail.com> wrote:
> 
> Hi Duncan and Simon,
> 
> Thanks for getting back to me.
> 
> The R version I use(d) is 
> 
> R Under development (unstable) (2021-01-15 r79833)
> 
> This was installed via the installer package downloaded from https://mac.r-project.org <https://mac.r-project.org/>. It was not compiled from source. That was the case on all Macs.
> 
> Please note that the partially log at the bottom of my original message is from a successful compilation on a Mac where ?install.packages(?XML?) works. It includes references to the CommandLineTools/SDK but that was completely without my doing. I tried it explicitly in various forms, though, when I thought this is the right way. Thanks for clarifying it is not.
> 
> Now, on the Mac where I still have trouble, the output from ?install.packages(?XML?) is (rather brief):
> 
> > install.packages("XML")
> Warning: unable to access index for repository https://mac.R-project.org/bin/macosx/contrib/4.1: <https://mac.r-project.org/bin/macosx/contrib/4.1:>
>   cannot open URL 'https://mac.R-project.org/bin/macosx/contrib/4.1/PACKAGES <https://mac.r-project.org/bin/macosx/contrib/4.1/PACKAGES>'
> Package which is only available in source form, and may need compilation of C/C++/Fortran: ?XML?
> Do you want to attempt to install these from sources? (Yes/no/cancel) Yes
> installing the source package ?XML?
> 
> trying URL 'https://mac.R-project.org/src/contrib/XML_3.99-0.5.tar.gz <https://mac.r-project.org/src/contrib/XML_3.99-0.5.tar.gz>'
> Content type 'application/x-gzip' length 968563 bytes (945 KB)
> ==================================================
> downloaded 945 KB
> 
> * installing *source* package ?XML? ...
> ** package ?XML? successfully unpacked and MD5 sums checked
> ** using staged installation
> checking for gcc... gcc
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ISO C89... none needed
> checking how to run the C preprocessor... gcc -E
> checking for sed... /usr/bin/sed
> checking for pkg-config... /usr/local/bin/pkg-config
> checking for xml2-config... /usr/bin/xml2-config
> USE_XML2 = yes
> SED_EXTENDED_ARG: -E
> Minor 9, Patch 4 for 2.9.4
> Located parser file -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/parser.h
> Checking for 1.8:  -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
> Using libxml2.*
> checking for gzopen in -lz... yes
> checking for xmlParseFile in -lxml2... yes
> You are trying to use a version 2.* edition of libxml
> but an incompatible library. The header files and library seem to be
> mismatched. If you have specified LIBXML_INCDIR, make certain to also
> specify an appropriate LIBXML_LIBDIR if the libxml2 library is not in the default
> directories.
> ERROR: configuration failed for package ?XML?
> * removing ?/Library/Frameworks/R.framework/Versions/4.1/Resources/library/XML?
> * restoring previous ?/Library/Frameworks/R.framework/Versions/4.1/Resources/library/XML?
> 
> The downloaded source packages are in
> 	?/private/var/folders/j8/1gn6jwcx4bv8td2h83ghk1hh0000gp/T/RtmpXuYoas/downloaded_packages?
> Warning message:
> In install.packages("XML") :
>   installation of package ?XML? had non-zero exit status
> >
> 
> Best,
> Kemal
> 
> 
>> On Feb 15, 2021, at 5:42 PM, Simon Urbanek <simon.urbanek at R-project.org <mailto:simon.urbanek at R-project.org>> wrote:
>> 
>> Kemal,
>> 
>> what Duncan said, since what you provided does not include any of the information needed.
>> 
>> In addition, you should not include SDK paths directly - SDK is used by the dev tools and does *not* include the actual libraries. So when you say /foo/bar it is actually searched inside the SDK the compiler is using. If you happen to use compilers that don't use SDKs (non-Apple) then you can use -isysroot to specify the SDK root (hopefully not your case as that is a whole can of worms). In addition, the issue may come from your version of R as well so the exact information about that is also need (how you compiled it, which flags etc.).
>> 
>> Cheers,
>> Simon
>> 
>> 
>>> On Feb 16, 2021, at 4:26 AM, Duncan Temple Lang via R-SIG-Mac <r-sig-mac at r-project.org <mailto:r-sig-mac at r-project.org>> wrote:
>>> 
>>> Hi Kemal
>>> Can you please send the output from the entire installation attempt, and
>>> also the config.log file.
>>> 
>>> Thanks
>>> Duncan
>>> 
>>> 
>>> On Mon, Feb 15, 2021 at 5:14 AM Kemal Akat <kma460414 at gmail.com <mailto:kma460414 at gmail.com>> wrote:
>>> 
>>>> Hello all,
>>>> 
>>>> I have to compile the XML package from source for R 4.1 (development
>>>> version) on a Mac with OS version 10.15.7. It works well on all machines
>>>> that do not come with any significant ballast on developer tools. One
>>>> machine, however, that I have used for some time returns a mismatch of
>>>> header files and library. I looked into possible offenders and purged what
>>>> I could (e.g. deleted Homebrew although the other machines have Homebrew
>>>> and Miniconda installed as well) but to no avail.
>>>> 
>>>> install.packages(?XML?) fails and install.packages("XML",
>>>> configure.args=c("LIBXML_INCDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/libxml2",
>>>> "LIBXML_LIBDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib?))
>>>> also fails.
>>>> 
>>>> There are obviously differences I cannot track down so far but I am
>>>> running out of ideas. Both machines have MacOSX10.14.sdk and
>>>> MacOSX10.15.sdk installed with MacOSX.sdk linking to MacOSX10.15.sdk.
>>>> 
>>>> Here is part of the log of a successful compilation, and I was hoping
>>>> someone could point me towards a solution.
>>>> 
>>>> libxml include directory:
>>>> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
>>>> libxml library directory:
>>>> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
>>>> -lpthread -licucore -lm -lz  -lxml2
>>>> libxml 2:                 -DLIBXML2=1
>>>> 
>>>> Compilation flags:         -DLIBXML
>>>> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
>>>> -DUSE_EXTERNAL_SUBSET=1 -DROOT_HAS_DTD_NODE=1 -DDUMP_WITH_ENCODING=1
>>>> -DUSE_XML_VERSION_H=1 -DXML_ELEMENT_ETYPE=1 -DXML_ATTRIBUTE_ATYPE=1
>>>> -DNO_XML_HASH_SCANNER_RETURN=1 -DLIBXML_NAMESPACE_HAS_CONTEXT=1
>>>> -DHAVE_R_CETYPE_T=1 -DHAVE_XML_WITH_ZLIB=1 -DHAVE_XML_HAS_FEATURE=1
>>>> -DUSE_R=1 -D_R_=1  -DHAVE_VALIDITY=1 -DXML_REF_COUNT_NODES=1
>>>> Link flags:
>>>> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
>>>> -lpthread -licucore -lm -lz  -lxml2
>>>> 
>>>> 
>>>> Thanks,
>>>> Kemal
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>>> 
>>> -- 
>>> ===============================
>>> Duncan Temple Lang
>>> Associate Dean for Graduate Programs
>>> Professor, Department of Statistics
>>> UC Davis
>>> 
>>> 	[[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210215/50685ca7/attachment-0002.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: config.log
Type: application/octet-stream
Size: 10625 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210215/50685ca7/attachment-0001.obj>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20210215/50685ca7/attachment-0003.html>

From @|mon@urb@nek @end|ng |rom R-project@org  Tue Feb 16 06:11:57 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 16 Feb 2021 18:11:57 +1300
Subject: [R-SIG-Mac] XML packages source compilation on macOS 10.15.7
In-Reply-To: <BF1FF67D-D756-45AA-A5FD-7880156FB738@gmail.com>
References: <D75567CF-FEFE-43C9-A0B3-E9178A917631@gmail.com>
 <CABQ6xNYApj8zywWDC6X3KNtEB0=ccmWR3fq2Vxfx297qfURz8A@mail.gmail.com>
 <485B458F-02AC-4FFF-8963-029AA11C41E0@R-project.org>
 <BF1FF67D-D756-45AA-A5FD-7880156FB738@gmail.com>
Message-ID: <AC561251-CE56-4DF2-A9E9-B194E89A23B2@R-project.org>

Kemal,

it looks like you're completely missing the libxml2 includes on that system. XML prefers xml2-config over pkg-config so it will by default pick the system version of xml2, but you don't have the includes for that.

According to your setup, they are supposed to be in
/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/libxml
but my guess is they are not.

Check the usual culprits 
 sudo xcode-select --install
and if in doubt reset 
 sudo xcode-select --reset

If that doesn't help, you can set LIBXML_INCDIR (without the libxml part) and LIBXML_LIBDIR yourself if you know where they are.
You also have miniconda and /usr/local so if you want to use any of that, you'd the teh two variables above. Alternatively, you can set --with-xml-config  to point to your non-system xml2-config if it points to the right includes/libraries.

Good luck,
Simon



> On Feb 16, 2021, at 4:20 PM, Kemal Akat <kma460414 at gmail.com> wrote:
> 
> Hi Duncan and Simon,
> 
> Thanks for getting back to me.
> 
> The R version I use(d) is 
> 
> R Under development (unstable) (2021-01-15 r79833)
> 
> This was installed via the installer package downloaded from https://mac.r-project.org. It was not compiled from source. That was the case on all Macs.
> 
> Please note that the partially log at the bottom of my original message is from a successful compilation on a Mac where ?install.packages(?XML?) works. It includes references to the CommandLineTools/SDK but that was completely without my doing. I tried it explicitly in various forms, though, when I thought this is the right way. Thanks for clarifying it is not.
> 
> Now, on the Mac where I still have trouble, the output from ?install.packages(?XML?) is (rather brief):
> 
> > install.packages("XML")
> Warning: unable to access index for repository https://mac.R-project.org/bin/macosx/contrib/4.1:
>   cannot open URL 'https://mac.R-project.org/bin/macosx/contrib/4.1/PACKAGES'
> Package which is only available in source form, and may need compilation of C/C++/Fortran: ?XML?
> Do you want to attempt to install these from sources? (Yes/no/cancel) Yes
> installing the source package ?XML?
> 
> trying URL 'https://mac.R-project.org/src/contrib/XML_3.99-0.5.tar.gz'
> Content type 'application/x-gzip' length 968563 bytes (945 KB)
> ==================================================
> downloaded 945 KB
> 
> * installing *source* package ?XML? ...
> ** package ?XML? successfully unpacked and MD5 sums checked
> ** using staged installation
> checking for gcc... gcc
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ISO C89... none needed
> checking how to run the C preprocessor... gcc -E
> checking for sed... /usr/bin/sed
> checking for pkg-config... /usr/local/bin/pkg-config
> checking for xml2-config... /usr/bin/xml2-config
> USE_XML2 = yes
> SED_EXTENDED_ARG: -E
> Minor 9, Patch 4 for 2.9.4
> Located parser file -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/parser.h
> Checking for 1.8:  -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
> Using libxml2.*
> checking for gzopen in -lz... yes
> checking for xmlParseFile in -lxml2... yes
> You are trying to use a version 2.* edition of libxml
> but an incompatible library. The header files and library seem to be
> mismatched. If you have specified LIBXML_INCDIR, make certain to also
> specify an appropriate LIBXML_LIBDIR if the libxml2 library is not in the default
> directories.
> ERROR: configuration failed for package ?XML?
> * removing ?/Library/Frameworks/R.framework/Versions/4.1/Resources/library/XML?
> * restoring previous ?/Library/Frameworks/R.framework/Versions/4.1/Resources/library/XML?
> 
> The downloaded source packages are in
> 	?/private/var/folders/j8/1gn6jwcx4bv8td2h83ghk1hh0000gp/T/RtmpXuYoas/downloaded_packages?
> Warning message:
> In install.packages("XML") :
>   installation of package ?XML? had non-zero exit status
> >
> 
> Best,
> Kemal
> 
> 
>> On Feb 15, 2021, at 5:42 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>> 
>> Kemal,
>> 
>> what Duncan said, since what you provided does not include any of the information needed.
>> 
>> In addition, you should not include SDK paths directly - SDK is used by the dev tools and does *not* include the actual libraries. So when you say /foo/bar it is actually searched inside the SDK the compiler is using. If you happen to use compilers that don't use SDKs (non-Apple) then you can use -isysroot to specify the SDK root (hopefully not your case as that is a whole can of worms). In addition, the issue may come from your version of R as well so the exact information about that is also need (how you compiled it, which flags etc.).
>> 
>> Cheers,
>> Simon
>> 
>> 
>>> On Feb 16, 2021, at 4:26 AM, Duncan Temple Lang via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> Hi Kemal
>>> Can you please send the output from the entire installation attempt, and
>>> also the config.log file.
>>> 
>>> Thanks
>>> Duncan
>>> 
>>> 
>>> On Mon, Feb 15, 2021 at 5:14 AM Kemal Akat <kma460414 at gmail.com> wrote:
>>> 
>>>> Hello all,
>>>> 
>>>> I have to compile the XML package from source for R 4.1 (development
>>>> version) on a Mac with OS version 10.15.7. It works well on all machines
>>>> that do not come with any significant ballast on developer tools. One
>>>> machine, however, that I have used for some time returns a mismatch of
>>>> header files and library. I looked into possible offenders and purged what
>>>> I could (e.g. deleted Homebrew although the other machines have Homebrew
>>>> and Miniconda installed as well) but to no avail.
>>>> 
>>>> install.packages(?XML?) fails and install.packages("XML",
>>>> configure.args=c("LIBXML_INCDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/libxml2",
>>>> "LIBXML_LIBDIR=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib?))
>>>> also fails.
>>>> 
>>>> There are obviously differences I cannot track down so far but I am
>>>> running out of ideas. Both machines have MacOSX10.14.sdk and
>>>> MacOSX10.15.sdk installed with MacOSX.sdk linking to MacOSX10.15.sdk.
>>>> 
>>>> Here is part of the log of a successful compilation, and I was hoping
>>>> someone could point me towards a solution.
>>>> 
>>>> libxml include directory:
>>>> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
>>>> libxml library directory:
>>>> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
>>>> -lpthread -licucore -lm -lz  -lxml2
>>>> libxml 2:                 -DLIBXML2=1
>>>> 
>>>> Compilation flags:         -DLIBXML
>>>> -I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include
>>>> -DUSE_EXTERNAL_SUBSET=1 -DROOT_HAS_DTD_NODE=1 -DDUMP_WITH_ENCODING=1
>>>> -DUSE_XML_VERSION_H=1 -DXML_ELEMENT_ETYPE=1 -DXML_ATTRIBUTE_ATYPE=1
>>>> -DNO_XML_HASH_SCANNER_RETURN=1 -DLIBXML_NAMESPACE_HAS_CONTEXT=1
>>>> -DHAVE_R_CETYPE_T=1 -DHAVE_XML_WITH_ZLIB=1 -DHAVE_XML_HAS_FEATURE=1
>>>> -DUSE_R=1 -D_R_=1  -DHAVE_VALIDITY=1 -DXML_REF_COUNT_NODES=1
>>>> Link flags:
>>>> -L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib -lxml2 -lz
>>>> -lpthread -licucore -lm -lz  -lxml2
>>>> 
>>>> 
>>>> Thanks,
>>>> Kemal
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>>> 
>>> -- 
>>> ===============================
>>> Duncan Temple Lang
>>> Associate Dean for Graduate Programs
>>> Professor, Department of Statistics
>>> UC Davis
>>> 
>>> 	[[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 


From j|ox @end|ng |rom mcm@@ter@c@  Tue Feb 16 15:20:38 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 16 Feb 2021 09:20:38 -0500
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
In-Reply-To: <c81892d8-837d-e335-d767-1dc00fb29c83@mcmaster.ca>
References: <2018_1613173882_11CNpJTl009115_0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <c81892d8-837d-e335-d767-1dc00fb29c83@mcmaster.ca>
Message-ID: <4e4ec4f9-d5df-cfcd-2f62-f921834295f5@mcmaster.ca>

Dear Simon,

I just installed R 4.0.4 and the warning has disappeared. I expect that 
you know that but thought that it might be useful to confirm it just in 
case.

Best,
  John

On 2021-02-12 9:05 p.m., John Fox wrote:
> Dear Simon,
> 
> I'm still seeing the warning on a MacBook Pro with a touchbar running 
> Big Sur:
> 
> ----------- snip ------------
> 
> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
>  ? Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
> [R.app GUI 1.74 (7929) x86_64-apple-darwin17.0]
> 
> [History restored from /Users/johnfox/.Rapp.history]
> 
> 2021-02-12 21:00:21.163 R[19677:11057750] Warning: Expected min height 
> of view: (<NSPopoverTouchBarItemButton: 0x7f8c4a74a480>) to be less than 
> or equal to 30 but got a height of 32.000000. This error will be logged 
> once per view in violation.
> 
>  > sessionInfo()
> R version 4.0.4 RC (2021-02-12 r79998)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> BLAS: 
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK: 
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
> 
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.4
> 
> ----------- snip ------------
> 
> I hope this helps,
>  ?John
> 
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> web: https://socialsciences.mcmaster.ca/jfox/
> 
> On 2021-02-12 6:50 p.m., Simon Urbanek wrote:
>> Dear macOS useRs,
>>
>> please test the latest R 4.0.4 RC builds from
>>
>> https://mac.r-project.org/
>>
>> especially if you are running macOS Big Sur. The known issues 
>> introduced by Big Sur have been fixed, but I cannot replicate nor test 
>> the spurious touchbar warning.
>>
>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you 
>> to - they are betas for a reason (=unstable) and break things.
>>
>> Cheers,
>> Simon
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Feb 16 21:00:52 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 17 Feb 2021 09:00:52 +1300
Subject: [R-SIG-Mac] Please test R 4.0.4 RC
In-Reply-To: <4e4ec4f9-d5df-cfcd-2f62-f921834295f5@mcmaster.ca>
References: <2018_1613173882_11CNpJTl009115_0C385434-942D-48E5-AB69-9EE9DAEB81C8@R-project.org>
 <c81892d8-837d-e335-d767-1dc00fb29c83@mcmaster.ca>
 <4e4ec4f9-d5df-cfcd-2f62-f921834295f5@mcmaster.ca>
Message-ID: <D708E609-179E-4409-843B-56E3CB719B5A@R-project.org>

John,

thanks, yes, it has not actually disappeared, but I am now explicitly suppressing it (only in the console stderr forwarding, it will still appear in the logs if you run the debug version or disable stderr forwarding). It is a rather terrible hack, but until I have a way to replicate and find what macOS-internal part is triggering it, it's better to suppress it as it is confusing people that are taking it for an error.

Thanks,
Simon


> On Feb 17, 2021, at 3:20 AM, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear Simon,
> 
> I just installed R 4.0.4 and the warning has disappeared. I expect that you know that but thought that it might be useful to confirm it just in case.
> 
> Best,
> John
> 
> On 2021-02-12 9:05 p.m., John Fox wrote:
>> Dear Simon,
>> I'm still seeing the warning on a MacBook Pro with a touchbar running Big Sur:
>> ----------- snip ------------
>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>   Natural language support but running in an English locale
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> [R.app GUI 1.74 (7929) x86_64-apple-darwin17.0]
>> [History restored from /Users/johnfox/.Rapp.history]
>> 2021-02-12 21:00:21.163 R[19677:11057750] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7f8c4a74a480>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
>> > sessionInfo()
>> R version 4.0.4 RC (2021-02-12 r79998)
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>> Running under: macOS Big Sur 10.16
>> Matrix products: default
>> BLAS: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
>> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>> locale:
>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> loaded via a namespace (and not attached):
>> [1] compiler_4.0.4
>> ----------- snip ------------
>> I hope this helps,
>>  John
>> John Fox, Professor Emeritus
>> McMaster University
>> Hamilton, Ontario, Canada
>> web: https://socialsciences.mcmaster.ca/jfox/
>> On 2021-02-12 6:50 p.m., Simon Urbanek wrote:
>>> Dear macOS useRs,
>>> 
>>> please test the latest R 4.0.4 RC builds from
>>> 
>>> https://mac.r-project.org/
>>> 
>>> especially if you are running macOS Big Sur. The known issues introduced by Big Sur have been fixed, but I cannot replicate nor test the spurious touchbar warning.
>>> 
>>> Also a reminder to *not* install XQuartz betas even if XQuartz ask you to - they are betas for a reason (=unstable) and break things.
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
> 


From rmh @end|ng |rom temp|e@edu  Thu Feb 18 01:36:06 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 18 Feb 2021 00:36:06 +0000
Subject: [R-SIG-Mac] more rgl problems
Message-ID: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>

This is repeatable when the lines are all pasted in at once.
The example works if I allow some time delay between lines.

This is might be a relative of the one from a few months ago.
But this message is about invalid permissions.
=====

R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> setwd('/Users/rmh/Rwd/')
> library(rgl)
> x <- matrix(1:3, 1,3)
> plot(1:10, col=7)
> open3d()
error: xp_attach_gl_context returned: 2

 *** caught segfault ***
address 0x18, cause 'invalid permissions'

Traceback:
 1: rgl.open(useNULL)
 2: open3d()

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace
Selection: 


====
MacBookAir with the M1 chip using the regular intel version of R from CRAN.
Big Sur 11.2.1.
The plot(1:10), col=7) ## went by default to the quartz() device.


I repeated this about 5 times in ESS, and then once in Terminal.

Let me know if you need more information.



From pbw @end|ng |rom pbw@|d@@u  Thu Feb 18 04:13:11 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Thu, 18 Feb 2021 13:13:11 +1000
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>

And speaking of M1 Silicon:

My XQuartz version is 2.7.11.

Started R 4.0.4.
Stopped R 4.0.4
Started RStudio

> install.packages("rgl")
trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz'
Content type 'application/x-gzip' length 6446159 bytes (6.1 MB)
==================================================
downloaded 6.1 MB


The downloaded binary packages are in
	/var/folders/jf/mkyz74311796dl4mxx_7tcx80000gn/T//RtmpflD1wL/downloaded_packages
> library(rgl)

RStudio hangs indefinitely.

My RStudio is at 1.4.1103.

Peter

?
pbw at ehealth.id.au
?For what does it profit a man if he gains the whole world and loses or forfeits himself??

> On 18 Feb 2021, at 10:36 am, Richard M. Heiberger <rmh at temple.edu> wrote:
> 
> This is repeatable when the lines are all pasted in at once.
> The example works if I allow some time delay between lines.
> 
> This is might be a relative of the one from a few months ago.
> But this message is about invalid permissions.
> =====
> 
> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
>  Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
>> setwd('/Users/rmh/Rwd/')
>> library(rgl)
>> x <- matrix(1:3, 1,3)
>> plot(1:10, col=7)
>> open3d()
> error: xp_attach_gl_context returned: 2
> 
> *** caught segfault ***
> address 0x18, cause 'invalid permissions'
> 
> Traceback:
> 1: rgl.open(useNULL)
> 2: open3d()
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> Selection: 
> 
> 
> ====
> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
> Big Sur 11.2.1.
> The plot(1:10), col=7) ## went by default to the quartz() device.
> 
> 
> I repeated this about 5 times in ESS, and then once in Terminal.
> 
> Let me know if you need more information.
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


	[[alternative HTML version deleted]]


From ken @end|ng |rom kjbe@th@com@@u  Thu Feb 18 04:41:46 2021
From: ken @end|ng |rom kjbe@th@com@@u (Ken Beath)
Date: Thu, 18 Feb 2021 14:41:46 +1100
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
Message-ID: <32B0BEB5-8856-4989-B434-4699EE3589A5@kjbeath.com.au>

RStudio have a page for reporting bugs at https://github.com/rstudio/rstudio/issues/ <https://github.com/rstudio/rstudio/issues/> You may be the first M! bug.

They haven?t progressed my fairly serious bug report about Windows (if you plot a graph and the screen hasn?t updated when you start parallel processing then R crashes) from 6 weeks ago, so I wouldn?t be anticipating much progress soon.

Ken

> On 18 Feb 2021, at 2:13 pm, Peter West <pbw at pbw.id.au> wrote:
> 
> And speaking of M1 Silicon:
> 
> My XQuartz version is 2.7.11.
> 
> Started R 4.0.4.
> Stopped R 4.0.4
> Started RStudio
> 
>> install.packages("rgl")
> trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz'
> Content type 'application/x-gzip' length 6446159 bytes (6.1 MB)
> ==================================================
> downloaded 6.1 MB
> 
> 
> The downloaded binary packages are in
> 	/var/folders/jf/mkyz74311796dl4mxx_7tcx80000gn/T//RtmpflD1wL/downloaded_packages
>> library(rgl)
> 
> RStudio hangs indefinitely.
> 
> My RStudio is at 1.4.1103.
> 
> Peter
> 
> ?
> pbw at ehealth.id.au
> ?For what does it profit a man if he gains the whole world and loses or forfeits himself??
> 
>> On 18 Feb 2021, at 10:36 am, Richard M. Heiberger <rmh at temple.edu> wrote:
>> 
>> This is repeatable when the lines are all pasted in at once.
>> The example works if I allow some time delay between lines.
>> 
>> This is might be a relative of the one from a few months ago.
>> But this message is about invalid permissions.
>> =====
>> 
>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>> 
>> Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>>> setwd('/Users/rmh/Rwd/')
>>> library(rgl)
>>> x <- matrix(1:3, 1,3)
>>> plot(1:10, col=7)
>>> open3d()
>> error: xp_attach_gl_context returned: 2
>> 
>> *** caught segfault ***
>> address 0x18, cause 'invalid permissions'
>> 
>> Traceback:
>> 1: rgl.open(useNULL)
>> 2: open3d()
>> 
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>> Selection: 
>> 
>> 
>> ====
>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>> Big Sur 11.2.1.
>> The plot(1:10), col=7) ## went by default to the quartz() device.
>> 
>> 
>> I repeated this about 5 times in ESS, and then once in Terminal.
>> 
>> Let me know if you need more information.
>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


	[[alternative HTML version deleted]]


From pbw @end|ng |rom pbw@|d@@u  Thu Feb 18 04:54:45 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Thu, 18 Feb 2021 13:54:45 +1000
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <32B0BEB5-8856-4989-B434-4699EE3589A5@kjbeath.com.au>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
 <32B0BEB5-8856-4989-B434-4699EE3589A5@kjbeath.com.au>
Message-ID: <FC082C31-DA40-40E5-A840-B29147EEFD9E@pbw.id.au>

Ken,

I only used RStudio because it is easier to remove packages. I should have made that clear.

The same thing happens with R.app; that is, library(rgl) hangs indefinitely.

Peter
?
pbw at ehealth.id.au
?For what does it profit a man if he gains the whole world and loses or forfeits himself??

> On 18 Feb 2021, at 1:41 pm, Ken Beath <ken at kjbeath.com.au> wrote:
> 
> RStudio have a page for reporting bugs at https://github.com/rstudio/rstudio/issues/ <https://github.com/rstudio/rstudio/issues/> You may be the first M! bug.
> 
> They haven?t progressed my fairly serious bug report about Windows (if you plot a graph and the screen hasn?t updated when you start parallel processing then R crashes) from 6 weeks ago, so I wouldn?t be anticipating much progress soon.
> 
> Ken
> 
>> On 18 Feb 2021, at 2:13 pm, Peter West <pbw at pbw.id.au <mailto:pbw at pbw.id.au>> wrote:
>> 
>> And speaking of M1 Silicon:
>> 
>> My XQuartz version is 2.7.11.
>> 
>> Started R 4.0.4.
>> Stopped R 4.0.4
>> Started RStudio
>> 
>>> install.packages("rgl")
>> trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz <https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz>'
>> Content type 'application/x-gzip' length 6446159 bytes (6.1 MB)
>> ==================================================
>> downloaded 6.1 MB
>> 
>> 
>> The downloaded binary packages are in
>> 	/var/folders/jf/mkyz74311796dl4mxx_7tcx80000gn/T//RtmpflD1wL/downloaded_packages
>>> library(rgl)
>> 
>> RStudio hangs indefinitely.
>> 
>> My RStudio is at 1.4.1103.
>> 
>> Peter
>> 
>> ?
>> pbw at ehealth.id.au <mailto:pbw at ehealth.id.au>
>> ?For what does it profit a man if he gains the whole world and loses or forfeits himself??
>> 
>>> On 18 Feb 2021, at 10:36 am, Richard M. Heiberger <rmh at temple.edu> wrote:
>>> 
>>> This is repeatable when the lines are all pasted in at once.
>>> The example works if I allow some time delay between lines.
>>> 
>>> This is might be a relative of the one from a few months ago.
>>> But this message is about invalid permissions.
>>> =====
>>> 
>>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>> 
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>> 
>>> Natural language support but running in an English locale
>>> 
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>> 
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>> 
>>>> setwd('/Users/rmh/Rwd/')
>>>> library(rgl)
>>>> x <- matrix(1:3, 1,3)
>>>> plot(1:10, col=7)
>>>> open3d()
>>> error: xp_attach_gl_context returned: 2
>>> 
>>> *** caught segfault ***
>>> address 0x18, cause 'invalid permissions'
>>> 
>>> Traceback:
>>> 1: rgl.open(useNULL)
>>> 2: open3d()
>>> 
>>> Possible actions:
>>> 1: abort (with core dump, if enabled)
>>> 2: normal R exit
>>> 3: exit R without saving workspace
>>> 4: exit R saving workspace
>>> Selection: 
>>> 
>>> 
>>> ====
>>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>>> Big Sur 11.2.1.
>>> The plot(1:10), col=7) ## went by default to the quartz() device.
>>> 
>>> 
>>> I repeated this about 5 times in ESS, and then once in Terminal.
>>> 
>>> Let me know if you need more information.
>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb 18 12:08:38 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 18 Feb 2021 06:08:38 -0500
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
Message-ID: <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>

On 17/02/2021 10:13 p.m., Peter West wrote:
> And speaking of M1 Silicon:
> 
> My XQuartz version is 2.7.11.
> 
> Started R 4.0.4.
> Stopped R 4.0.4
> Started RStudio
> 
>> install.packages("rgl")
> trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz'
> Content type 'application/x-gzip' length 6446159 bytes (6.1 MB)
> ==================================================
> downloaded 6.1 MB
> 
> 
> The downloaded binary packages are in
> 	/var/folders/jf/mkyz74311796dl4mxx_7tcx80000gn/T//RtmpflD1wL/downloaded_packages
>> library(rgl)
> 
> RStudio hangs indefinitely.
> 
> My RStudio is at 1.4.1103.

That looks a lot like the issue Rich had last week (which I think is 
unrelated to the one posted today).  Have you tried the solution I 
posted for that?  Here's a copy:

> This worked for me to apparently fix my system:
> 
> Start with a newly rebooted system.
> 
> Uninstall XQuartz by dragging it to the trash.
> 
> Look in /Library/LaunchAgents/ for filenames related to xquartz.  I had 
> two:  a five year old one called org.macosforge.xquartz.startx.plist, 
> and one from around the time I installed the XQuartz beta named 
> org.xquartz.startx.plist.  I deleted the latter.
> 
> Look in /Library/LaunchDaemons/ for similar files.  I deleted one with 
> the same name, i.e. org.xquartz.startx.plist, and left an older one.
> 
> Reboot the system again, and install XQuartz 2.7.11.  Relogin, and 
> things seem fine.

I suspect it would be sufficient to just delete the 
/Library/LaunchAgents/org.xquartz.startx.plist and 
/Library/LaunchDaemons/org.xquartz.startx.plist files and reboot, but I 
haven't tried that.

Duncan Murdoch


From pbw @end|ng |rom pbw@|d@@u  Thu Feb 18 12:14:54 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Thu, 18 Feb 2021 21:14:54 +1000
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
 <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>
Message-ID: <5F14B79F-673D-4DBB-AE73-35523CB133AD@pbw.id.au>

Yes, I went through that process. I have no org.xquartz.* files in /Library Launch* now.

> On 18 Feb 2021, at 9:08 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 17/02/2021 10:13 p.m., Peter West wrote:
>> And speaking of M1 Silicon:
>> My XQuartz version is 2.7.11.
>> Started R 4.0.4.
>> Stopped R 4.0.4
>> Started RStudio
>>> install.packages("rgl")
>> trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz'
>> Content type 'application/x-gzip' length 6446159 bytes (6.1 MB)
>> ==================================================
>> downloaded 6.1 MB
>> The downloaded binary packages are in
>> 	/var/folders/jf/mkyz74311796dl4mxx_7tcx80000gn/T//RtmpflD1wL/downloaded_packages
>>> library(rgl)
>> RStudio hangs indefinitely.
>> My RStudio is at 1.4.1103.
> 
> That looks a lot like the issue Rich had last week (which I think is unrelated to the one posted today).  Have you tried the solution I posted for that?  Here's a copy:
> 
>> This worked for me to apparently fix my system:
>> Start with a newly rebooted system.
>> Uninstall XQuartz by dragging it to the trash.
>> Look in /Library/LaunchAgents/ for filenames related to xquartz.  I had two:  a five year old one called org.macosforge.xquartz.startx.plist, and one from around the time I installed the XQuartz beta named org.xquartz.startx.plist.  I deleted the latter.
>> Look in /Library/LaunchDaemons/ for similar files.  I deleted one with the same name, i.e. org.xquartz.startx.plist, and left an older one.
>> Reboot the system again, and install XQuartz 2.7.11.  Relogin, and things seem fine.
> 
> I suspect it would be sufficient to just delete the /Library/LaunchAgents/org.xquartz.startx.plist and /Library/LaunchDaemons/org.xquartz.startx.plist files and reboot, but I haven't tried that.
> 
> Duncan Murdoch


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb 18 12:28:23 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 18 Feb 2021 06:28:23 -0500
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>

I can reproduce this on a Catalina machine, working in R from the terminal.

This definitely looks similar to the problem that 
rgl::setGraphicsDelay() was designed to solve, but even adding a 10 
second delay doesn't help.  I get a slightly different message than you:

 > open3d()
error: xp_attach_gl_context returned: 2

  *** caught segfault ***
address 0x18, cause 'memory not mapped'

but that might just be a different way of reporting the same underlying 
issue.

It's clearly some kind of interaction between the Quartz device and rgl. 
  I'll see if I can track it down.

Duncan Murdoch

On 17/02/2021 7:36 p.m., Richard M. Heiberger wrote:
> This is repeatable when the lines are all pasted in at once.
> The example works if I allow some time delay between lines.
> 
> This is might be a relative of the one from a few months ago.
> But this message is about invalid permissions.
> =====
> 
> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
>    Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
>> setwd('/Users/rmh/Rwd/')
>> library(rgl)
>> x <- matrix(1:3, 1,3)
>> plot(1:10, col=7)
>> open3d()
> error: xp_attach_gl_context returned: 2
> 
>   *** caught segfault ***
> address 0x18, cause 'invalid permissions'
> 
> Traceback:
>   1: rgl.open(useNULL)
>   2: open3d()
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> Selection:
> 
> 
> ====
> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
> Big Sur 11.2.1.
> The plot(1:10), col=7) ## went by default to the quartz() device.
> 
> 
> I repeated this about 5 times in ESS, and then once in Terminal.
> 
> Let me know if you need more information.
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb 18 12:30:40 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 18 Feb 2021 06:30:40 -0500
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <5F14B79F-673D-4DBB-AE73-35523CB133AD@pbw.id.au>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
 <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>
 <5F14B79F-673D-4DBB-AE73-35523CB133AD@pbw.id.au>
Message-ID: <5387112d-b676-e206-d428-f01ebb02fdbc@gmail.com>

On 18/02/2021 6:14 a.m., Peter West wrote:
> Yes, I went through that process. I have no org.xquartz.* files in 
> /Library Launch* now.

If you run x11(), does it cause the same issue?

What about not starting R at all, and just running some X11 app like 
xclock from the terminal?

Duncan Murdoch

> 
>> On 18 Feb 2021, at 9:08 pm, Duncan Murdoch <murdoch.duncan at gmail.com 
>> <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>> On 17/02/2021 10:13 p.m., Peter West wrote:
>>> And speaking of M1 Silicon:
>>> My XQuartz version is 2.7.11.
>>> Started R 4.0.4.
>>> Stopped R 4.0.4
>>> Started RStudio
>>>> install.packages("rgl")
>>> trying URL 
>>> 'https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz 
>>> <https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz>'
>>> Content type 'application/x-gzip' length 6446159 bytes (6.1 MB)
>>> ==================================================
>>> downloaded 6.1 MB
>>> The downloaded binary packages are in
>>> /var/folders/jf/mkyz74311796dl4mxx_7tcx80000gn/T//RtmpflD1wL/downloaded_packages
>>>> library(rgl)
>>> RStudio hangs indefinitely.
>>> My RStudio is at 1.4.1103.
>>
>> That looks a lot like the issue Rich had last week (which I think is 
>> unrelated to the one posted today). ?Have you tried the solution I 
>> posted for that? ?Here's a copy:
>>
>>> This worked for me to apparently fix my system:
>>> Start with a newly rebooted system.
>>> Uninstall XQuartz by dragging it to the trash.
>>> Look in /Library/LaunchAgents/ for filenames related to xquartz. ?I 
>>> had two: ?a five year old one called 
>>> org.macosforge.xquartz.startx.plist, and one from around the time I 
>>> installed the XQuartz beta named org.xquartz.startx.plist. ?I deleted 
>>> the latter.
>>> Look in /Library/LaunchDaemons/ for similar files. ?I deleted one 
>>> with the same name, i.e. org.xquartz.startx.plist, and left an older one.
>>> Reboot the system again, and install XQuartz 2.7.11. ?Relogin, and 
>>> things seem fine.
>>
>> I suspect it would be sufficient to just delete the 
>> /Library/LaunchAgents/org.xquartz.startx.plist and 
>> /Library/LaunchDaemons/org.xquartz.startx.plist files and reboot, but 
>> I haven't tried that.
>>
>> Duncan Murdoch
>


From pbw @end|ng |rom pbw@|d@@u  Thu Feb 18 12:58:36 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Thu, 18 Feb 2021 21:58:36 +1000
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <5387112d-b676-e206-d428-f01ebb02fdbc@gmail.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
 <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>
 <5F14B79F-673D-4DBB-AE73-35523CB133AD@pbw.id.au>
 <5387112d-b676-e206-d428-f01ebb02fdbc@gmail.com>
Message-ID: <F0B94B0E-B3C7-460A-9854-7F55D3F904FA@pbw.id.au>

Looks like an authorization problem.

xclockk did not appear, so I had a look at system.log.

Here?s a sample.

---------------------------------------------------------------
Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: waiting for X server to begin accepting connections
Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: /opt/X11/bin/xinit: giving up
Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: /opt/X11/bin/xinit: unable to connect to X server: Operation timed out
Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: /opt/X11/bin/xinit: /opt/X11/bin/xinit: server error
Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: /opt/X11/bin/xinit:
Feb 18 21:51:40 Rosie org.macosforge.xquartz.startx[75167]: xauth:  file /Users/pbw/.serverauth.75168 does not exist
Feb 18 21:51:40 Rosie org.macosforge.xquartz.X11.stub[75265]: Xquartz: Unable to locate waiting server: org.macosforge.xquartz.X11
Feb 18 21:51:40 Rosie Xquartz[75272]: no path for address 0x7ffdffcec000
Feb 18 21:51:40 Rosie org.macosforge.xquartz.X11.stub[75272]: Xquartz: Starting X server: /Applications/Utilities/XQuartz.app/Contents/MacOS/X11 --listenonly
Feb 18 21:51:40 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/fonts.scale: fopen(w): Operation not permitted
Feb 18 21:51:40 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/fonts.dir: fopen(w): Operation not permitted
Feb 18 21:51:40 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/Supplemental/fonts.scale: fopen(w): Operation not permitted
Feb 18 21:51:40 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/Supplemental/fonts.dir: fopen(w): Operation not permitted
Feb 18 21:51:42 Rosie org.macosforge.xquartz.startx[75167]:

Feb 18 21:51:44 Rosie org.macosforge.xquartz.startx[75167]: waiting for X server to begin accepting connections
Feb 18 21:52:04 --- last message repeated 9 times ---
Feb 18 21:52:04 Rosie org.macosforge.xquartz.X11.stub[75265]: Xquartz: bootstrap_look_up(): Unknown service name
Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: waiting for X server to begin accepting connections
Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: waiting for X server to begin accepting connections giving up
Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: /opt/X11/bin/xinit: unable to connect to X server: Connection refused
Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: /opt/X11/bin/xinit: unable to connect to X server/opt/X11/bin/xinit: server error
Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: /opt/X11/bin/xinit: unable to connect to X server
Feb 18 21:52:06 Rosie org.macosforge.xquartz.privileged_startx[54309]: /opt/X11/bin/font_cache: line 92: /System/Library/Fonts/fonts.list: Operation not permitted
Feb 18 21:52:06 Rosie org.macosforge.xquartz.privileged_startx[54309]: /opt/X11/bin/font_cache: line 92: /System/Library/Fonts/Supplemental/fonts.list: Operation not permitted
Feb 18 21:52:06 Rosie org.macosforge.xquartz.startx[75566]: expr: syntax error
Feb 18 21:52:06 --- last message repeated 2 times ---
@
Feb 18 21:52:30 --- last message repeated 7 times ---
Feb 18 21:52:30 Rosie org.macosforge.xquartz.X11.stub[75664]: Xquartz: bootstrap_look_up(): Unknown service name
Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: waiting for X server to begin accepting connections
Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: waiting for X server to begin accepting connections giving up
Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: /opt/X11/bin/xinit: unable to connect to X server: Connection refused
Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: waiting for X server to begin accepting connections /opt/X11/bin/xinit: server error
Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: waiting for X server to begin accepting connections
Feb 18 21:52:32 Rosie org.macosforge.xquartz.startx[75977]: expr: syntax error
Feb 18 21:52:32 --- last message repeated 2 times ---
Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /opt/X11/bin/font_cache: line 92: /System/Library/Fonts/fonts.list: Operation not permitted
Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /opt/X11/bin/font_cache: line 92: /System/Library/Fonts/Supplemental/fonts.list: Operation not permitted
Feb 18 21:52:32 Rosie org.macosforge.xquartz.startx[75977]: xauth:  file /Users/pbw/.serverauth.75978 does not exist
Feb 18 21:52:32 Rosie org.macosforge.xquartz.X11.stub[76064]: Xquartz: Unable to locate waiting server: org.macosforge.xquartz.X11
Feb 18 21:52:32 Rosie Xquartz[76068]: no path for address 0x7ffdffcdd000
Feb 18 21:52:32 Rosie org.macosforge.xquartz.X11.stub[76068]: Xquartz: Starting X server: /Applications/Utilities/XQuartz.app/Contents/MacOS/X11 --listenonly
Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/fonts.scale: fopen(w): Operation not permitted
Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/fonts.dir: fopen(w): Operation not permitted
Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/Supplemental/fonts.scale: fopen(w): Operation not permitted
Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/Supplemental/fonts.dir: fopen(w): Operation not permitted
Feb 18 21:52:34 Rosie org.macosforge.xquartz.startx[75977]:

Feb 18 21:52:36 Rosie org.macosforge.xquartz.startx[75977]: waiting for X server to begin accepting connections---------------------------------------------------------------


> On 18 Feb 2021, at 9:30 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 18/02/2021 6:14 a.m., Peter West wrote:
>> Yes, I went through that process. I have no org.xquartz.* files in /Library Launch* now.
> 
> If you run x11(), does it cause the same issue?
> 
> What about not starting R at all, and just running some X11 app like xclock from the terminal?
> 
> Duncan Murdoch
> 
>>> On 18 Feb 2021, at 9:08 pm, Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>> 
>>> On 17/02/2021 10:13 p.m., Peter West wrote:
>>>> And speaking of M1 Silicon:
>>>> My XQuartz version is 2.7.11.
>>>> Started R 4.0.4.
>>>> Stopped R 4.0.4
>>>> Started RStudio
>>>>> install.packages("rgl")
>>>> trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz <https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz>'
>>>> Content type 'application/x-gzip' length 6446159 bytes (6.1 MB)
>>>> ==================================================
>>>> downloaded 6.1 MB
>>>> The downloaded binary packages are in
>>>> /var/folders/jf/mkyz74311796dl4mxx_7tcx80000gn/T//RtmpflD1wL/downloaded_packages
>>>>> library(rgl)
>>>> RStudio hangs indefinitely.
>>>> My RStudio is at 1.4.1103.
>>> 
>>> That looks a lot like the issue Rich had last week (which I think is unrelated to the one posted today).  Have you tried the solution I posted for that?  Here's a copy:
>>> 
>>>> This worked for me to apparently fix my system:
>>>> Start with a newly rebooted system.
>>>> Uninstall XQuartz by dragging it to the trash.
>>>> Look in /Library/LaunchAgents/ for filenames related to xquartz.  I had two:  a five year old one called org.macosforge.xquartz.startx.plist, and one from around the time I installed the XQuartz beta named org.xquartz.startx.plist.  I deleted the latter.
>>>> Look in /Library/LaunchDaemons/ for similar files.  I deleted one with the same name, i.e. org.xquartz.startx.plist, and left an older one.
>>>> Reboot the system again, and install XQuartz 2.7.11.  Relogin, and things seem fine.
>>> 
>>> I suspect it would be sufficient to just delete the /Library/LaunchAgents/org.xquartz.startx.plist and /Library/LaunchDaemons/org.xquartz.startx.plist files and reboot, but I haven't tried that.
>>> 
>>> Duncan Murdoch
> 


	[[alternative HTML version deleted]]


From pbw @end|ng |rom pbw@|d@@u  Thu Feb 18 13:06:24 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Thu, 18 Feb 2021 22:06:24 +1000
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <F0B94B0E-B3C7-460A-9854-7F55D3F904FA@pbw.id.au>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
 <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>
 <5F14B79F-673D-4DBB-AE73-35523CB133AD@pbw.id.au>
 <5387112d-b676-e206-d428-f01ebb02fdbc@gmail.com>
 <F0B94B0E-B3C7-460A-9854-7F55D3F904FA@pbw.id.au>
Message-ID: <44AB6664-7BF4-4E7E-A68F-43F6E0879E12@pbw.id.au>

This is happening as a result of the Launch* startx and privileged_startx execution. The Operation not permitted stuff just scrolls on by.

> On 18 Feb 2021, at 9:58 pm, Peter West <pbw at pbw.id.au> wrote:
> 
> Looks like an authorization problem.
> 
> xclockk did not appear, so I had a look at system.log.
> 
> Here?s a sample.
> 
> ---------------------------------------------------------------
> Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: waiting for X server to begin accepting connections
> Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: /opt/X11/bin/xinit: giving up
> Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: /opt/X11/bin/xinit: unable to connect to X server: Operation timed out
> Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: /opt/X11/bin/xinit: /opt/X11/bin/xinit: server error
> Feb 18 20:40:09 Rosie org.macosforge.xquartz.startx[10388]: /opt/X11/bin/xinit:
> Feb 18 21:51:40 Rosie org.macosforge.xquartz.startx[75167]: xauth:  file /Users/pbw/.serverauth.75168 does not exist
> Feb 18 21:51:40 Rosie org.macosforge.xquartz.X11.stub[75265]: Xquartz: Unable to locate waiting server: org.macosforge.xquartz.X11
> Feb 18 21:51:40 Rosie Xquartz[75272]: no path for address 0x7ffdffcec000
> Feb 18 21:51:40 Rosie org.macosforge.xquartz.X11.stub[75272]: Xquartz: Starting X server: /Applications/Utilities/XQuartz.app/Contents/MacOS/X11 --listenonly
> Feb 18 21:51:40 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/fonts.scale: fopen(w): Operation not permitted
> Feb 18 21:51:40 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/fonts.dir: fopen(w): Operation not permitted
> Feb 18 21:51:40 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/Supplemental/fonts.scale: fopen(w): Operation not permitted
> Feb 18 21:51:40 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/Supplemental/fonts.dir: fopen(w): Operation not permitted
> Feb 18 21:51:42 Rosie org.macosforge.xquartz.startx[75167]:
> 
> Feb 18 21:51:44 Rosie org.macosforge.xquartz.startx[75167]: waiting for X server to begin accepting connections
> Feb 18 21:52:04 --- last message repeated 9 times ---
> Feb 18 21:52:04 Rosie org.macosforge.xquartz.X11.stub[75265]: Xquartz: bootstrap_look_up(): Unknown service name
> Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: waiting for X server to begin accepting connections
> Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: waiting for X server to begin accepting connections giving up
> Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: /opt/X11/bin/xinit: unable to connect to X server: Connection refused
> Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: /opt/X11/bin/xinit: unable to connect to X server/opt/X11/bin/xinit: server error
> Feb 18 21:52:05 Rosie org.macosforge.xquartz.startx[75167]: /opt/X11/bin/xinit: unable to connect to X server
> Feb 18 21:52:06 Rosie org.macosforge.xquartz.privileged_startx[54309]: /opt/X11/bin/font_cache: line 92: /System/Library/Fonts/fonts.list: Operation not permitted
> Feb 18 21:52:06 Rosie org.macosforge.xquartz.privileged_startx[54309]: /opt/X11/bin/font_cache: line 92: /System/Library/Fonts/Supplemental/fonts.list: Operation not permitted
> Feb 18 21:52:06 Rosie org.macosforge.xquartz.startx[75566]: expr: syntax error
> Feb 18 21:52:06 --- last message repeated 2 times ---
> @
> Feb 18 21:52:30 --- last message repeated 7 times ---
> Feb 18 21:52:30 Rosie org.macosforge.xquartz.X11.stub[75664]: Xquartz: bootstrap_look_up(): Unknown service name
> Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: waiting for X server to begin accepting connections
> Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: waiting for X server to begin accepting connections giving up
> Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: /opt/X11/bin/xinit: unable to connect to X server: Connection refused
> Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: waiting for X server to begin accepting connections /opt/X11/bin/xinit: server error
> Feb 18 21:52:31 Rosie org.macosforge.xquartz.startx[75566]: waiting for X server to begin accepting connections
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.startx[75977]: expr: syntax error
> Feb 18 21:52:32 --- last message repeated 2 times ---
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /opt/X11/bin/font_cache: line 92: /System/Library/Fonts/fonts.list: Operation not permitted
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /opt/X11/bin/font_cache: line 92: /System/Library/Fonts/Supplemental/fonts.list: Operation not permitted
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.startx[75977]: xauth:  file /Users/pbw/.serverauth.75978 does not exist
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.X11.stub[76064]: Xquartz: Unable to locate waiting server: org.macosforge.xquartz.X11
> Feb 18 21:52:32 Rosie Xquartz[76068]: no path for address 0x7ffdffcdd000
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.X11.stub[76068]: Xquartz: Starting X server: /Applications/Utilities/XQuartz.app/Contents/MacOS/X11 --listenonly
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/fonts.scale: fopen(w): Operation not permitted
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/fonts.dir: fopen(w): Operation not permitted
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/Supplemental/fonts.scale: fopen(w): Operation not permitted
> Feb 18 21:52:32 Rosie org.macosforge.xquartz.privileged_startx[54309]: /System/Library/Fonts/Supplemental/fonts.dir: fopen(w): Operation not permitted
> Feb 18 21:52:34 Rosie org.macosforge.xquartz.startx[75977]:
> 
> Feb 18 21:52:36 Rosie org.macosforge.xquartz.startx[75977]: waiting for X server to begin accepting connections---------------------------------------------------------------
> 
> 
>> On 18 Feb 2021, at 9:30 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> 
>> On 18/02/2021 6:14 a.m., Peter West wrote:
>>> Yes, I went through that process. I have no org.xquartz.* files in /Library Launch* now.
>> 
>> If you run x11(), does it cause the same issue?
>> 
>> What about not starting R at all, and just running some X11 app like xclock from the terminal?
>> 
>> Duncan Murdoch
>> 
>>>> On 18 Feb 2021, at 9:08 pm, Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>>> 
>>>> On 17/02/2021 10:13 p.m., Peter West wrote:
>>>>> And speaking of M1 Silicon:
>>>>> My XQuartz version is 2.7.11.
>>>>> Started R 4.0.4.
>>>>> Stopped R 4.0.4
>>>>> Started RStudio
>>>>>> install.packages("rgl")
>>>>> trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz <https://cran.rstudio.com/bin/macosx/contrib/4.0/rgl_0.105.13.tgz>'
>>>>> Content type 'application/x-gzip' length 6446159 bytes (6.1 MB)
>>>>> ==================================================
>>>>> downloaded 6.1 MB
>>>>> The downloaded binary packages are in
>>>>> /var/folders/jf/mkyz74311796dl4mxx_7tcx80000gn/T//RtmpflD1wL/downloaded_packages
>>>>>> library(rgl)
>>>>> RStudio hangs indefinitely.
>>>>> My RStudio is at 1.4.1103.
>>>> 
>>>> That looks a lot like the issue Rich had last week (which I think is unrelated to the one posted today).  Have you tried the solution I posted for that?  Here's a copy:
>>>> 
>>>>> This worked for me to apparently fix my system:
>>>>> Start with a newly rebooted system.
>>>>> Uninstall XQuartz by dragging it to the trash.
>>>>> Look in /Library/LaunchAgents/ for filenames related to xquartz.  I had two:  a five year old one called org.macosforge.xquartz.startx.plist, and one from around the time I installed the XQuartz beta named org.xquartz.startx.plist.  I deleted the latter.
>>>>> Look in /Library/LaunchDaemons/ for similar files.  I deleted one with the same name, i.e. org.xquartz.startx.plist, and left an older one.
>>>>> Reboot the system again, and install XQuartz 2.7.11.  Relogin, and things seem fine.
>>>> 
>>>> I suspect it would be sufficient to just delete the /Library/LaunchAgents/org.xquartz.startx.plist and /Library/LaunchDaemons/org.xquartz.startx.plist files and reboot, but I haven't tried that.
>>>> 
>>>> Duncan Murdoch
>> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From pbw @end|ng |rom pbw@|d@@u  Thu Feb 18 13:15:30 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Thu, 18 Feb 2021 22:15:30 +1000
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <44AB6664-7BF4-4E7E-A68F-43F6E0879E12@pbw.id.au>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
 <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>
 <5F14B79F-673D-4DBB-AE73-35523CB133AD@pbw.id.au>
 <5387112d-b676-e206-d428-f01ebb02fdbc@gmail.com>
 <F0B94B0E-B3C7-460A-9854-7F55D3F904FA@pbw.id.au>
 <44AB6664-7BF4-4E7E-A68F-43F6E0879E12@pbw.id.au>
Message-ID: <667BFE17-CF8A-4478-B611-1EE9FDDBD276@pbw.id.au>

I?ve enabled /opt/X11/libexec/launchd_startx for full disk access in Security & Privacy, but it hasn?t fixed the problem.

> On 18 Feb 2021, at 10:06 pm, Peter West <pbw at pbw.id.au> wrote:


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb 18 14:20:50 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 18 Feb 2021 08:20:50 -0500
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <667BFE17-CF8A-4478-B611-1EE9FDDBD276@pbw.id.au>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
 <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>
 <5F14B79F-673D-4DBB-AE73-35523CB133AD@pbw.id.au>
 <5387112d-b676-e206-d428-f01ebb02fdbc@gmail.com>
 <F0B94B0E-B3C7-460A-9854-7F55D3F904FA@pbw.id.au>
 <44AB6664-7BF4-4E7E-A68F-43F6E0879E12@pbw.id.au>
 <667BFE17-CF8A-4478-B611-1EE9FDDBD276@pbw.id.au>
Message-ID: <5e4a29a9-d4df-07e2-ae13-2d3cae79d701@gmail.com>

On 18/02/2021 7:15 a.m., Peter West wrote:
> I?ve enabled /opt/X11/libexec/launchd_startx for full disk access in Security & Privacy, but it hasn?t fixed the problem.

In any case, it's a generic XQuartz problem, not related to R or rgl.

Duncan


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb 18 14:33:24 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 18 Feb 2021 08:33:24 -0500
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <667BFE17-CF8A-4478-B611-1EE9FDDBD276@pbw.id.au>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <1A10E893-B368-43EF-8B94-02BBEF6DB167@pbw.id.au>
 <b37b120a-a476-13b3-c379-2c2275104fcd@gmail.com>
 <5F14B79F-673D-4DBB-AE73-35523CB133AD@pbw.id.au>
 <5387112d-b676-e206-d428-f01ebb02fdbc@gmail.com>
 <F0B94B0E-B3C7-460A-9854-7F55D3F904FA@pbw.id.au>
 <44AB6664-7BF4-4E7E-A68F-43F6E0879E12@pbw.id.au>
 <667BFE17-CF8A-4478-B611-1EE9FDDBD276@pbw.id.au>
Message-ID: <ebdf6ff3-f2a8-5331-d31d-b0d04c90eefa@gmail.com>

On 18/02/2021 7:15 a.m., Peter West wrote:
> I?ve enabled /opt/X11/libexec/launchd_startx for full disk access in Security & Privacy, but it hasn?t fixed the problem.

One approach that was fruitful for me:

After uninstalling and reinstalling XQuartz 2.7.11, I looked around for 
related files with older install dates, especially dates around Feb 2, 
when I had installed 2.8.0beta.  The /Library/Launch* files showed up 
that way.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb 18 21:20:03 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 18 Feb 2021 15:20:03 -0500
Subject: [R-SIG-Mac] more rgl problems
In-Reply-To: <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>
Message-ID: <7cd64e2b-b96d-715b-04a6-ab10fe2fae8c@gmail.com>

I've made some progress on this, but I don't know how to fix it properly.

What's happening is that rgl is trying to open the new window that 
open3d() asks for.  It gets most of the way through that operation, then 
calls glXMakeCurrent, which associates the OpenGL context with that 
window.  That call fails, but without generating any of the documented 
errors:  it just fails, triggering an X11 error handler with error code 
0 (which typically means no error).

In the released versions of rgl, that failure leads to a segfault, 
because I wasn't doing enough error checking.  I've fixed the segfault, 
but I'm still getting the error (in fact I'm getting it a lot more than 
I used to; not sure if it's my debugging code causing that), and after I 
get the error reported on screen, the new rgl window opens but doesn't 
work to display anything.

I think it's probably something wrong in the rgl initialization code; 
running this:

   plot(1:10, col=7)
   library(rgl)
   open3d()

is fine, whereas this:

   library(rgl)
   plot(1:10, col=7)
   open3d()

is always failing for me.  Or possibly this is an Xquartz bug, maybe a 
leftover from when I installed the beta.

I'd guess what's happening is that calling quartz() invalidates part of 
the initialization done by rgl.init(), but I don't know what part yet. 
I do want to call rgl.init() when loading rgl, because it might fail, 
and then I can drop back to the off-screen drawing.  It's too late to do 
that later.

A workaround that works for me is for the .onload() function in rgl to 
execute

  dev.new()
  dev.off()

before calling rgl.init(). It is less irritating than you might guess, 
because the window doesn't have time to appear before being destroyed, 
but I still don't like it.   I'll try it out a bit, and then push it to 
Github for others to test.

Duncan Murdoch


On 18/02/2021 6:28 a.m., Duncan Murdoch wrote:
> I can reproduce this on a Catalina machine, working in R from the terminal.
> 
> This definitely looks similar to the problem that
> rgl::setGraphicsDelay() was designed to solve, but even adding a 10
> second delay doesn't help.  I get a slightly different message than you:
> 
>   > open3d()
> error: xp_attach_gl_context returned: 2
> 
>    *** caught segfault ***
> address 0x18, cause 'memory not mapped'
> 
> but that might just be a different way of reporting the same underlying
> issue.
> 
> It's clearly some kind of interaction between the Quartz device and rgl.
>    I'll see if I can track it down.
> 
> Duncan Murdoch
> 
> On 17/02/2021 7:36 p.m., Richard M. Heiberger wrote:
>> This is repeatable when the lines are all pasted in at once.
>> The example works if I allow some time delay between lines.
>>
>> This is might be a relative of the one from a few months ago.
>> But this message is about invalid permissions.
>> =====
>>
>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>     Natural language support but running in an English locale
>>
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>>
>>> setwd('/Users/rmh/Rwd/')
>>> library(rgl)
>>> x <- matrix(1:3, 1,3)
>>> plot(1:10, col=7)
>>> open3d()
>> error: xp_attach_gl_context returned: 2
>>
>>    *** caught segfault ***
>> address 0x18, cause 'invalid permissions'
>>
>> Traceback:
>>    1: rgl.open(useNULL)
>>    2: open3d()
>>
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>> Selection:
>>
>>
>> ====
>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>> Big Sur 11.2.1.
>> The plot(1:10), col=7) ## went by default to the quartz() device.
>>
>>
>> I repeated this about 5 times in ESS, and then once in Terminal.
>>
>> Let me know if you need more information.
>>
>


From rmh @end|ng |rom temp|e@edu  Fri Feb 19 00:07:37 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 18 Feb 2021 23:07:37 +0000
Subject: [R-SIG-Mac] [External] Re: more rgl problems
In-Reply-To: <7cd64e2b-b96d-715b-04a6-ab10fe2fae8c@gmail.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>,
 <7cd64e2b-b96d-715b-04a6-ab10fe2fae8c@gmail.com>
Message-ID: <CO1PR11MB5107F790A38C4460BF2A78CDD2859@CO1PR11MB5107.namprd11.prod.outlook.com>

This is from my MacBook Air mid-2012 running Catalina 10.15.7
with Xquartz 2.7.11
I never placed the beta on this machine.
I also see from a fresh R session

   plot(1:10, col=7)
   library(rgl)
   open3d()

is fine, whereas this:

   library(rgl)
   plot(1:10, col=7)
   open3d()
segfaults

R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> setwd('/Users/rmh/Rwd/')
>    library(rgl)
   plot(1:10, col=7)
   open3d()
   library(rgl)
>    plot(1:10, col=7)
>    open3d()

error: xp_attach_gl_context returned: 2

 *** caught segfault ***
address 0x18, cause 'memory not mapped'

Traceback:
 1: rgl.open(useNULL)
 2: open3d()

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace
Selection: 2
Warning message:
In rgl.open(useNULL) : RGL: ERROR: can't bind glx context to window

Process R finished at Thu Feb 18 17:57:37 2021


________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Thursday, February 18, 2021 3:20 PM
To: Richard M. Heiberger; r-sig-mac at r-project.org
Subject: [External] Re: more rgl problems

I've made some progress on this, but I don't know how to fix it properly.

What's happening is that rgl is trying to open the new window that
open3d() asks for.  It gets most of the way through that operation, then
calls glXMakeCurrent, which associates the OpenGL context with that
window.  That call fails, but without generating any of the documented
errors:  it just fails, triggering an X11 error handler with error code
0 (which typically means no error).

In the released versions of rgl, that failure leads to a segfault,
because I wasn't doing enough error checking.  I've fixed the segfault,
but I'm still getting the error (in fact I'm getting it a lot more than
I used to; not sure if it's my debugging code causing that), and after I
get the error reported on screen, the new rgl window opens but doesn't
work to display anything.

I think it's probably something wrong in the rgl initialization code;
running this:

   plot(1:10, col=7)
   library(rgl)
   open3d()

is fine, whereas this:

   library(rgl)
   plot(1:10, col=7)
   open3d()

is always failing for me.  Or possibly this is an Xquartz bug, maybe a
leftover from when I installed the beta.

I'd guess what's happening is that calling quartz() invalidates part of
the initialization done by rgl.init(), but I don't know what part yet.
I do want to call rgl.init() when loading rgl, because it might fail,
and then I can drop back to the off-screen drawing.  It's too late to do
that later.

A workaround that works for me is for the .onload() function in rgl to
execute

  dev.new()
  dev.off()

before calling rgl.init(). It is less irritating than you might guess,
because the window doesn't have time to appear before being destroyed,
but I still don't like it.   I'll try it out a bit, and then push it to
Github for others to test.

Duncan Murdoch


On 18/02/2021 6:28 a.m., Duncan Murdoch wrote:
> I can reproduce this on a Catalina machine, working in R from the terminal.
>
> This definitely looks similar to the problem that
> rgl::setGraphicsDelay() was designed to solve, but even adding a 10
> second delay doesn't help.  I get a slightly different message than you:
>
>   > open3d()
> error: xp_attach_gl_context returned: 2
>
>    *** caught segfault ***
> address 0x18, cause 'memory not mapped'
>
> but that might just be a different way of reporting the same underlying
> issue.
>
> It's clearly some kind of interaction between the Quartz device and rgl.
>    I'll see if I can track it down.
>
> Duncan Murdoch
>
> On 17/02/2021 7:36 p.m., Richard M. Heiberger wrote:
>> This is repeatable when the lines are all pasted in at once.
>> The example works if I allow some time delay between lines.
>>
>> This is might be a relative of the one from a few months ago.
>> But this message is about invalid permissions.
>> =====
>>
>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>> Copyright (C) 2021 The R Foundation for Statistical Computing
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>     Natural language support but running in an English locale
>>
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>>
>>> setwd('/Users/rmh/Rwd/')
>>> library(rgl)
>>> x <- matrix(1:3, 1,3)
>>> plot(1:10, col=7)
>>> open3d()
>> error: xp_attach_gl_context returned: 2
>>
>>    *** caught segfault ***
>> address 0x18, cause 'invalid permissions'
>>
>> Traceback:
>>    1: rgl.open(useNULL)
>>    2: open3d()
>>
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>> Selection:
>>
>>
>> ====
>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>> Big Sur 11.2.1.
>> The plot(1:10), col=7) ## went by default to the quartz() device.
>>
>>
>> I repeated this about 5 times in ESS, and then once in Terminal.
>>
>> Let me know if you need more information.
>>
>



From @|mon@urb@nek @end|ng |rom R-project@org  Sat Feb 20 02:11:11 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 20 Feb 2021 14:11:11 +1300
Subject: [R-SIG-Mac] Flang
Message-ID: <572A4C18-EBEC-4D40-BD97-EAAB69515FFE@R-project.org>

This message is for very advanced/curios expert users only!

Flang is a Fortran compiler based on clang/llvm which has been mostly donated by nVidia. It has existed on Linux for a while, but with some patching can be made to work on macOS as well. For quite some time I have a PR https://github.com/flang-compiler/flang/pull/592 which adds macOS support to the upstream sources. Since there was some activity recently, I decided to update it to the latest flang and to test it. It is now capable of building R (macOS x86_64 build) which passes all checks (that was not the case before) so I have created a binary of the compiler (since it's quite a beast to build) at
https://github.com/s-u/flang-macos/releases/tag/fixed-b23418
in case those very adventurous decide to play wit it. It lives in /opt/flang and should work on macOS Catalina or higher.
In order to build R I had to add 'LDFLAGS=-L/opt/flang/lib -lpgmath -lflang -lflangrti -lomp' when using this compiler since R cannot figure out the correct flags for mixing flang and clang yet.

Note: there is a namespace collision regarding the name "flang" since the flang I refer to (https://github.com/flang-compiler/flang) is what was originally called flang, but now there is f18 which is an attempt to re-write Fortran support in clang/llvm from scratch and recently they decided to rename it from f18 to flang, to cause complete confusion. f18 is part of the mainstream llvm sources, but is nowhere close to be usable (it cannot generate code yet) so is unrelated to what I'm talking about here.

Cheers,
Simon

PS: if we have any compiler geeks here - the sources suggest that nVidia has also added arm64 sources of the libpgmath runtime library aimed at Windows. It would be interesting to see if those could be made work to support aarch64 (Apple silicon) - in theory it should work. My initial attempts failed as I could not get them to compile, but if someone had more spare time on their hands may be more successful...


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 20 15:41:12 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 20 Feb 2021 09:41:12 -0500
Subject: [R-SIG-Mac] [External] Re: more rgl problems
In-Reply-To: <CO1PR11MB5107F790A38C4460BF2A78CDD2859@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>
 <7cd64e2b-b96d-715b-04a6-ab10fe2fae8c@gmail.com>
 <CO1PR11MB5107F790A38C4460BF2A78CDD2859@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <9bb548be-ac3d-a38c-ab72-c5e6a6f8ccd9@gmail.com>

If you are set up to install from source, could you try this?

   devtools::install_github("dmurdoch/rgl at quartzbug", type="source")

If you only have some of the requirements (e.g. no devel versions of 
packages) you might find you only get a partial build with no X11 
display; that won't really test the workaround.  In that case I'll try 
to build a binary for your R version.

Duncan Murdoch

On 18/02/2021 6:07 p.m., Richard M. Heiberger wrote:
> This is from my MacBook Air mid-2012 running Catalina 10.15.7
> with Xquartz 2.7.11
> I never placed the beta on this machine.
> I also see from a fresh R session
> 
>     plot(1:10, col=7)
>     library(rgl)
>     open3d()
> 
> is fine, whereas this:
> 
>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
> segfaults
> 
> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
>    Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
>> setwd('/Users/rmh/Rwd/')
>>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
>     library(rgl)
>>     plot(1:10, col=7)
>>     open3d()
> 
> error: xp_attach_gl_context returned: 2
> 
>   *** caught segfault ***
> address 0x18, cause 'memory not mapped'
> 
> Traceback:
>   1: rgl.open(useNULL)
>   2: open3d()
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> Selection: 2
> Warning message:
> In rgl.open(useNULL) : RGL: ERROR: can't bind glx context to window
> 
> Process R finished at Thu Feb 18 17:57:37 2021
> 
> 
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Thursday, February 18, 2021 3:20 PM
> To: Richard M. Heiberger; r-sig-mac at r-project.org
> Subject: [External] Re: more rgl problems
> 
> I've made some progress on this, but I don't know how to fix it properly.
> 
> What's happening is that rgl is trying to open the new window that
> open3d() asks for.  It gets most of the way through that operation, then
> calls glXMakeCurrent, which associates the OpenGL context with that
> window.  That call fails, but without generating any of the documented
> errors:  it just fails, triggering an X11 error handler with error code
> 0 (which typically means no error).
> 
> In the released versions of rgl, that failure leads to a segfault,
> because I wasn't doing enough error checking.  I've fixed the segfault,
> but I'm still getting the error (in fact I'm getting it a lot more than
> I used to; not sure if it's my debugging code causing that), and after I
> get the error reported on screen, the new rgl window opens but doesn't
> work to display anything.
> 
> I think it's probably something wrong in the rgl initialization code;
> running this:
> 
>     plot(1:10, col=7)
>     library(rgl)
>     open3d()
> 
> is fine, whereas this:
> 
>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
> 
> is always failing for me.  Or possibly this is an Xquartz bug, maybe a
> leftover from when I installed the beta.
> 
> I'd guess what's happening is that calling quartz() invalidates part of
> the initialization done by rgl.init(), but I don't know what part yet.
> I do want to call rgl.init() when loading rgl, because it might fail,
> and then I can drop back to the off-screen drawing.  It's too late to do
> that later.
> 
> A workaround that works for me is for the .onload() function in rgl to
> execute
> 
>    dev.new()
>    dev.off()
> 
> before calling rgl.init(). It is less irritating than you might guess,
> because the window doesn't have time to appear before being destroyed,
> but I still don't like it.   I'll try it out a bit, and then push it to
> Github for others to test.
> 
> Duncan Murdoch
> 
> 
> On 18/02/2021 6:28 a.m., Duncan Murdoch wrote:
>> I can reproduce this on a Catalina machine, working in R from the terminal.
>>
>> This definitely looks similar to the problem that
>> rgl::setGraphicsDelay() was designed to solve, but even adding a 10
>> second delay doesn't help.  I get a slightly different message than you:
>>
>>    > open3d()
>> error: xp_attach_gl_context returned: 2
>>
>>     *** caught segfault ***
>> address 0x18, cause 'memory not mapped'
>>
>> but that might just be a different way of reporting the same underlying
>> issue.
>>
>> It's clearly some kind of interaction between the Quartz device and rgl.
>>     I'll see if I can track it down.
>>
>> Duncan Murdoch
>>
>> On 17/02/2021 7:36 p.m., Richard M. Heiberger wrote:
>>> This is repeatable when the lines are all pasted in at once.
>>> The example works if I allow some time delay between lines.
>>>
>>> This is might be a relative of the one from a few months ago.
>>> But this message is about invalid permissions.
>>> =====
>>>
>>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>>
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>>
>>>      Natural language support but running in an English locale
>>>
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>>
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>>
>>>> setwd('/Users/rmh/Rwd/')
>>>> library(rgl)
>>>> x <- matrix(1:3, 1,3)
>>>> plot(1:10, col=7)
>>>> open3d()
>>> error: xp_attach_gl_context returned: 2
>>>
>>>     *** caught segfault ***
>>> address 0x18, cause 'invalid permissions'
>>>
>>> Traceback:
>>>     1: rgl.open(useNULL)
>>>     2: open3d()
>>>
>>> Possible actions:
>>> 1: abort (with core dump, if enabled)
>>> 2: normal R exit
>>> 3: exit R without saving workspace
>>> 4: exit R saving workspace
>>> Selection:
>>>
>>>
>>> ====
>>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>>> Big Sur 11.2.1.
>>> The plot(1:10), col=7) ## went by default to the quartz() device.
>>>
>>>
>>> I repeated this about 5 times in ESS, and then once in Terminal.
>>>
>>> Let me know if you need more information.
>>>
>>
>


From pbw @end|ng |rom pbw@|d@@u  Sat Feb 20 16:04:12 2021
From: pbw @end|ng |rom pbw@|d@@u (Peter West)
Date: Sun, 21 Feb 2021 01:04:12 +1000
Subject: [R-SIG-Mac] =?utf-8?b?UiBDTUQg4oCm?=
Message-ID: <FDB02B9B-0E22-4380-A32A-8C62C668D6C4@pbw.id.au>

I see a lot of references to R CMD on the command line. Can I assume that the R in question is the R executable in Contents > MacOS within R.app?

Peter


?
pbw at ehealth.id.au
?Those who are well have no need of a physician, but those who are sick.?


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 20 16:27:08 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 20 Feb 2021 10:27:08 -0500
Subject: [R-SIG-Mac] =?utf-8?b?UiBDTUQg4oCm?=
In-Reply-To: <FDB02B9B-0E22-4380-A32A-8C62C668D6C4@pbw.id.au>
References: <FDB02B9B-0E22-4380-A32A-8C62C668D6C4@pbw.id.au>
Message-ID: <bcd47232-5b42-7622-0395-e0b1c8237a49@gmail.com>

On 20/02/2021 10:04 a.m., Peter West wrote:
> I see a lot of references to R CMD on the command line. Can I assume that the R in question is the R executable in Contents > MacOS within R.app?

No.  The one that will run on the command line is the one returned by 
"which R".  On my system that's /usr/local/bin/R, which is a soft link 
to  /Library/Frameworks/R.framework/Resources/bin/R, a shell script.

The one you see is the GUI front end, and it doesn't understand the "R 
CMD ..." type of command.

You can run the shell script version from within the GUI using

system("R CMD ...")

Duncan Murdoch


From e| @end|ng |rom ||@@e@NA  Sat Feb 20 16:37:53 2021
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Sat, 20 Feb 2021 17:37:53 +0200
Subject: [R-SIG-Mac] =?utf-8?b?UiBDTUQg4oCm?=
In-Reply-To: <FDB02B9B-0E22-4380-A32A-8C62C668D6C4@pbw.id.au>
References: <FDB02B9B-0E22-4380-A32A-8C62C668D6C4@pbw.id.au>
Message-ID: <9a3eabfb-3e06-9d63-2e29-410ccb5aebbc@lisse.NA>

That depends.

I would look for

	/usr/local/bin/r

or

	/usr/local/bin/R

one of them should have been symlinked by the PKG Installer. But then I
use homebrew without the graphic app (I like Rstudio, and TextMate is
also very, very good).


el



On 2021-02-20 17:04 , Peter West wrote:
> I see a lot of references to R CMD on the command line. Can I > assume
> that the R in question is the R executable in Contents > MacOS within
> R.app?
>
> Peter
[...]
-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From rmh @end|ng |rom temp|e@edu  Sat Feb 20 16:45:59 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 20 Feb 2021 15:45:59 +0000
Subject: [R-SIG-Mac] [External] Re: more rgl problems
In-Reply-To: <9bb548be-ac3d-a38c-ab72-c5e6a6f8ccd9@gmail.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>
 <7cd64e2b-b96d-715b-04a6-ab10fe2fae8c@gmail.com>
 <CO1PR11MB5107F790A38C4460BF2A78CDD2859@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <9bb548be-ac3d-a38c-ab72-c5e6a6f8ccd9@gmail.com>
Message-ID: <CO1PR11MB51079DAD9F54394AEE16F52BD2839@CO1PR11MB5107.namprd11.prod.outlook.com>

I am running it now on 4.0.4RC.

The cran page
https://cran.r-project.org
offers download of 4.0.3 for mac, even though 4.0.4 is available on windows.

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Saturday, February 20, 2021 9:41 AM
To: Richard M. Heiberger; r-sig-mac at r-project.org
Subject: Re: [External] Re: more rgl problems

If you are set up to install from source, could you try this?

   devtools::install_github("dmurdoch/rgl at quartzbug", type="source")

If you only have some of the requirements (e.g. no devel versions of
packages) you might find you only get a partial build with no X11
display; that won't really test the workaround.  In that case I'll try
to build a binary for your R version.

Duncan Murdoch

On 18/02/2021 6:07 p.m., Richard M. Heiberger wrote:
> This is from my MacBook Air mid-2012 running Catalina 10.15.7
> with Xquartz 2.7.11
> I never placed the beta on this machine.
> I also see from a fresh R session
>
>     plot(1:10, col=7)
>     library(rgl)
>     open3d()
>
> is fine, whereas this:
>
>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
> segfaults
>
> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>    Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
>> setwd('/Users/rmh/Rwd/')
>>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
>     library(rgl)
>>     plot(1:10, col=7)
>>     open3d()
>
> error: xp_attach_gl_context returned: 2
>
>   *** caught segfault ***
> address 0x18, cause 'memory not mapped'
>
> Traceback:
>   1: rgl.open(useNULL)
>   2: open3d()
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> Selection: 2
> Warning message:
> In rgl.open(useNULL) : RGL: ERROR: can't bind glx context to window
>
> Process R finished at Thu Feb 18 17:57:37 2021
>
>
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Thursday, February 18, 2021 3:20 PM
> To: Richard M. Heiberger; r-sig-mac at r-project.org
> Subject: [External] Re: more rgl problems
>
> I've made some progress on this, but I don't know how to fix it properly.
>
> What's happening is that rgl is trying to open the new window that
> open3d() asks for.  It gets most of the way through that operation, then
> calls glXMakeCurrent, which associates the OpenGL context with that
> window.  That call fails, but without generating any of the documented
> errors:  it just fails, triggering an X11 error handler with error code
> 0 (which typically means no error).
>
> In the released versions of rgl, that failure leads to a segfault,
> because I wasn't doing enough error checking.  I've fixed the segfault,
> but I'm still getting the error (in fact I'm getting it a lot more than
> I used to; not sure if it's my debugging code causing that), and after I
> get the error reported on screen, the new rgl window opens but doesn't
> work to display anything.
>
> I think it's probably something wrong in the rgl initialization code;
> running this:
>
>     plot(1:10, col=7)
>     library(rgl)
>     open3d()
>
> is fine, whereas this:
>
>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
>
> is always failing for me.  Or possibly this is an Xquartz bug, maybe a
> leftover from when I installed the beta.
>
> I'd guess what's happening is that calling quartz() invalidates part of
> the initialization done by rgl.init(), but I don't know what part yet.
> I do want to call rgl.init() when loading rgl, because it might fail,
> and then I can drop back to the off-screen drawing.  It's too late to do
> that later.
>
> A workaround that works for me is for the .onload() function in rgl to
> execute
>
>    dev.new()
>    dev.off()
>
> before calling rgl.init(). It is less irritating than you might guess,
> because the window doesn't have time to appear before being destroyed,
> but I still don't like it.   I'll try it out a bit, and then push it to
> Github for others to test.
>
> Duncan Murdoch
>
>
> On 18/02/2021 6:28 a.m., Duncan Murdoch wrote:
>> I can reproduce this on a Catalina machine, working in R from the terminal.
>>
>> This definitely looks similar to the problem that
>> rgl::setGraphicsDelay() was designed to solve, but even adding a 10
>> second delay doesn't help.  I get a slightly different message than you:
>>
>>    > open3d()
>> error: xp_attach_gl_context returned: 2
>>
>>     *** caught segfault ***
>> address 0x18, cause 'memory not mapped'
>>
>> but that might just be a different way of reporting the same underlying
>> issue.
>>
>> It's clearly some kind of interaction between the Quartz device and rgl.
>>     I'll see if I can track it down.
>>
>> Duncan Murdoch
>>
>> On 17/02/2021 7:36 p.m., Richard M. Heiberger wrote:
>>> This is repeatable when the lines are all pasted in at once.
>>> The example works if I allow some time delay between lines.
>>>
>>> This is might be a relative of the one from a few months ago.
>>> But this message is about invalid permissions.
>>> =====
>>>
>>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>>
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>>
>>>      Natural language support but running in an English locale
>>>
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>>
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>>
>>>> setwd('/Users/rmh/Rwd/')
>>>> library(rgl)
>>>> x <- matrix(1:3, 1,3)
>>>> plot(1:10, col=7)
>>>> open3d()
>>> error: xp_attach_gl_context returned: 2
>>>
>>>     *** caught segfault ***
>>> address 0x18, cause 'invalid permissions'
>>>
>>> Traceback:
>>>     1: rgl.open(useNULL)
>>>     2: open3d()
>>>
>>> Possible actions:
>>> 1: abort (with core dump, if enabled)
>>> 2: normal R exit
>>> 3: exit R without saving workspace
>>> 4: exit R saving workspace
>>> Selection:
>>>
>>>
>>> ====
>>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>>> Big Sur 11.2.1.
>>> The plot(1:10), col=7) ## went by default to the quartz() device.
>>>
>>>
>>> I repeated this about 5 times in ESS, and then once in Terminal.
>>>
>>> Let me know if you need more information.
>>>
>>
>


From rmh @end|ng |rom temp|e@edu  Sat Feb 20 16:59:33 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 20 Feb 2021 15:59:33 +0000
Subject: [R-SIG-Mac] [External] Re: more rgl problems
In-Reply-To: <CO1PR11MB51079DAD9F54394AEE16F52BD2839@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>
 <7cd64e2b-b96d-715b-04a6-ab10fe2fae8c@gmail.com>
 <CO1PR11MB5107F790A38C4460BF2A78CDD2859@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <9bb548be-ac3d-a38c-ab72-c5e6a6f8ccd9@gmail.com>,
 <CO1PR11MB51079DAD9F54394AEE16F52BD2839@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <CO1PR11MB5107F00B6CB77D33C26F114BD2839@CO1PR11MB5107.namprd11.prod.outlook.com>

it ran to completion (with warnings).  then i dropped the three lines in and it worked.

lt for newer macOS version (11.0) than being linked (10.13)
ld: warning: dylib (/usr/local/lib/libpng16.dylib) was built for newer macOS version (11.0) than being linked (10.13)
mkdir -p ../inst/useNULL
mv useNULL/rgl.so ../inst/useNULL/
installing to /Users/rmh/Library/R/4.0/library/00LOCK-rgl/00new/rgl/libs
** R
** demo
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
*** copying figures
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** checking absolute paths in shared objects and dynamic libraries
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (rgl)
>
>
>
>
>
>
> library(rgl)
> plot(1:10, col=7)
> open3d()

glX
  1

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Richard M. Heiberger <rmh at temple.edu>
Sent: Saturday, February 20, 2021 10:45 AM
To: Duncan Murdoch; r-sig-mac at r-project.org
Subject: Re: [R-SIG-Mac] [External] Re: more rgl problems

I am running it now on 4.0.4RC.

The cran page
https://cran.r-project.org
offers download of 4.0.3 for mac, even though 4.0.4 is available on windows.

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Saturday, February 20, 2021 9:41 AM
To: Richard M. Heiberger; r-sig-mac at r-project.org
Subject: Re: [External] Re: more rgl problems

If you are set up to install from source, could you try this?

   devtools::install_github("dmurdoch/rgl at quartzbug", type="source")

If you only have some of the requirements (e.g. no devel versions of
packages) you might find you only get a partial build with no X11
display; that won't really test the workaround.  In that case I'll try
to build a binary for your R version.

Duncan Murdoch

On 18/02/2021 6:07 p.m., Richard M. Heiberger wrote:
> This is from my MacBook Air mid-2012 running Catalina 10.15.7
> with Xquartz 2.7.11
> I never placed the beta on this machine.
> I also see from a fresh R session
>
>     plot(1:10, col=7)
>     library(rgl)
>     open3d()
>
> is fine, whereas this:
>
>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
> segfaults
>
> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>    Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
>> setwd('/Users/rmh/Rwd/')
>>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
>     library(rgl)
>>     plot(1:10, col=7)
>>     open3d()
>
> error: xp_attach_gl_context returned: 2
>
>   *** caught segfault ***
> address 0x18, cause 'memory not mapped'
>
> Traceback:
>   1: rgl.open(useNULL)
>   2: open3d()
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> Selection: 2
> Warning message:
> In rgl.open(useNULL) : RGL: ERROR: can't bind glx context to window
>
> Process R finished at Thu Feb 18 17:57:37 2021
>
>
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Thursday, February 18, 2021 3:20 PM
> To: Richard M. Heiberger; r-sig-mac at r-project.org
> Subject: [External] Re: more rgl problems
>
> I've made some progress on this, but I don't know how to fix it properly.
>
> What's happening is that rgl is trying to open the new window that
> open3d() asks for.  It gets most of the way through that operation, then
> calls glXMakeCurrent, which associates the OpenGL context with that
> window.  That call fails, but without generating any of the documented
> errors:  it just fails, triggering an X11 error handler with error code
> 0 (which typically means no error).
>
> In the released versions of rgl, that failure leads to a segfault,
> because I wasn't doing enough error checking.  I've fixed the segfault,
> but I'm still getting the error (in fact I'm getting it a lot more than
> I used to; not sure if it's my debugging code causing that), and after I
> get the error reported on screen, the new rgl window opens but doesn't
> work to display anything.
>
> I think it's probably something wrong in the rgl initialization code;
> running this:
>
>     plot(1:10, col=7)
>     library(rgl)
>     open3d()
>
> is fine, whereas this:
>
>     library(rgl)
>     plot(1:10, col=7)
>     open3d()
>
> is always failing for me.  Or possibly this is an Xquartz bug, maybe a
> leftover from when I installed the beta.
>
> I'd guess what's happening is that calling quartz() invalidates part of
> the initialization done by rgl.init(), but I don't know what part yet.
> I do want to call rgl.init() when loading rgl, because it might fail,
> and then I can drop back to the off-screen drawing.  It's too late to do
> that later.
>
> A workaround that works for me is for the .onload() function in rgl to
> execute
>
>    dev.new()
>    dev.off()
>
> before calling rgl.init(). It is less irritating than you might guess,
> because the window doesn't have time to appear before being destroyed,
> but I still don't like it.   I'll try it out a bit, and then push it to
> Github for others to test.
>
> Duncan Murdoch
>
>
> On 18/02/2021 6:28 a.m., Duncan Murdoch wrote:
>> I can reproduce this on a Catalina machine, working in R from the terminal.
>>
>> This definitely looks similar to the problem that
>> rgl::setGraphicsDelay() was designed to solve, but even adding a 10
>> second delay doesn't help.  I get a slightly different message than you:
>>
>>    > open3d()
>> error: xp_attach_gl_context returned: 2
>>
>>     *** caught segfault ***
>> address 0x18, cause 'memory not mapped'
>>
>> but that might just be a different way of reporting the same underlying
>> issue.
>>
>> It's clearly some kind of interaction between the Quartz device and rgl.
>>     I'll see if I can track it down.
>>
>> Duncan Murdoch
>>
>> On 17/02/2021 7:36 p.m., Richard M. Heiberger wrote:
>>> This is repeatable when the lines are all pasted in at once.
>>> The example works if I allow some time delay between lines.
>>>
>>> This is might be a relative of the one from a few months ago.
>>> But this message is about invalid permissions.
>>> =====
>>>
>>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>>
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>>
>>>      Natural language support but running in an English locale
>>>
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>>
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>>
>>>> setwd('/Users/rmh/Rwd/')
>>>> library(rgl)
>>>> x <- matrix(1:3, 1,3)
>>>> plot(1:10, col=7)
>>>> open3d()
>>> error: xp_attach_gl_context returned: 2
>>>
>>>     *** caught segfault ***
>>> address 0x18, cause 'invalid permissions'
>>>
>>> Traceback:
>>>     1: rgl.open(useNULL)
>>>     2: open3d()
>>>
>>> Possible actions:
>>> 1: abort (with core dump, if enabled)
>>> 2: normal R exit
>>> 3: exit R without saving workspace
>>> 4: exit R saving workspace
>>> Selection:
>>>
>>>
>>> ====
>>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>>> Big Sur 11.2.1.
>>> The plot(1:10), col=7) ## went by default to the quartz() device.
>>>
>>>
>>> I repeated this about 5 times in ESS, and then once in Terminal.
>>>
>>> Let me know if you need more information.
>>>
>>
>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From j|ox @end|ng |rom mcm@@ter@c@  Sat Feb 20 18:38:11 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Sat, 20 Feb 2021 12:38:11 -0500
Subject: [R-SIG-Mac] [External] Re: more rgl problems
In-Reply-To: <19081_1613836120_11KFmd7j007475_CO1PR11MB51079DAD9F54394AEE16F52BD2839@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>
 <7cd64e2b-b96d-715b-04a6-ab10fe2fae8c@gmail.com>
 <CO1PR11MB5107F790A38C4460BF2A78CDD2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <9bb548be-ac3d-a38c-ab72-c5e6a6f8ccd9@gmail.com>
 <19081_1613836120_11KFmd7j007475_CO1PR11MB51079DAD9F54394AEE16F52BD2839@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <8b4208ac-490b-95f1-bae9-851755b65a00@mcmaster.ca>

Dear Rich,

I see R-4.0.4.pkg (not RC) at <https://cran.r-project.org/bin/macosx/>. 
Perhaps refresh the page in your browser?

Best,
  John

John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2021-02-20 10:45 a.m., Richard M. Heiberger wrote:
> I am running it now on 4.0.4RC.
> 
> The cran page
> https://cran.r-project.org
> offers download of 4.0.3 for mac, even though 4.0.4 is available on windows.
> 
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 20, 2021 9:41 AM
> To: Richard M. Heiberger; r-sig-mac at r-project.org
> Subject: Re: [External] Re: more rgl problems
> 
> If you are set up to install from source, could you try this?
> 
>     devtools::install_github("dmurdoch/rgl at quartzbug", type="source")
> 
> If you only have some of the requirements (e.g. no devel versions of
> packages) you might find you only get a partial build with no X11
> display; that won't really test the workaround.  In that case I'll try
> to build a binary for your R version.
> 
> Duncan Murdoch
> 
> On 18/02/2021 6:07 p.m., Richard M. Heiberger wrote:
>> This is from my MacBook Air mid-2012 running Catalina 10.15.7
>> with Xquartz 2.7.11
>> I never placed the beta on this machine.
>> I also see from a fresh R session
>>
>>      plot(1:10, col=7)
>>      library(rgl)
>>      open3d()
>>
>> is fine, whereas this:
>>
>>      library(rgl)
>>      plot(1:10, col=7)
>>      open3d()
>> segfaults
>>
>> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
>> Copyright (C) 2020 The R Foundation for Statistical Computing
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>     Natural language support but running in an English locale
>>
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>>
>>> setwd('/Users/rmh/Rwd/')
>>>      library(rgl)
>>      plot(1:10, col=7)
>>      open3d()
>>      library(rgl)
>>>      plot(1:10, col=7)
>>>      open3d()
>>
>> error: xp_attach_gl_context returned: 2
>>
>>    *** caught segfault ***
>> address 0x18, cause 'memory not mapped'
>>
>> Traceback:
>>    1: rgl.open(useNULL)
>>    2: open3d()
>>
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>> Selection: 2
>> Warning message:
>> In rgl.open(useNULL) : RGL: ERROR: can't bind glx context to window
>>
>> Process R finished at Thu Feb 18 17:57:37 2021
>>
>>
>> ________________________________________
>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>> Sent: Thursday, February 18, 2021 3:20 PM
>> To: Richard M. Heiberger; r-sig-mac at r-project.org
>> Subject: [External] Re: more rgl problems
>>
>> I've made some progress on this, but I don't know how to fix it properly.
>>
>> What's happening is that rgl is trying to open the new window that
>> open3d() asks for.  It gets most of the way through that operation, then
>> calls glXMakeCurrent, which associates the OpenGL context with that
>> window.  That call fails, but without generating any of the documented
>> errors:  it just fails, triggering an X11 error handler with error code
>> 0 (which typically means no error).
>>
>> In the released versions of rgl, that failure leads to a segfault,
>> because I wasn't doing enough error checking.  I've fixed the segfault,
>> but I'm still getting the error (in fact I'm getting it a lot more than
>> I used to; not sure if it's my debugging code causing that), and after I
>> get the error reported on screen, the new rgl window opens but doesn't
>> work to display anything.
>>
>> I think it's probably something wrong in the rgl initialization code;
>> running this:
>>
>>      plot(1:10, col=7)
>>      library(rgl)
>>      open3d()
>>
>> is fine, whereas this:
>>
>>      library(rgl)
>>      plot(1:10, col=7)
>>      open3d()
>>
>> is always failing for me.  Or possibly this is an Xquartz bug, maybe a
>> leftover from when I installed the beta.
>>
>> I'd guess what's happening is that calling quartz() invalidates part of
>> the initialization done by rgl.init(), but I don't know what part yet.
>> I do want to call rgl.init() when loading rgl, because it might fail,
>> and then I can drop back to the off-screen drawing.  It's too late to do
>> that later.
>>
>> A workaround that works for me is for the .onload() function in rgl to
>> execute
>>
>>     dev.new()
>>     dev.off()
>>
>> before calling rgl.init(). It is less irritating than you might guess,
>> because the window doesn't have time to appear before being destroyed,
>> but I still don't like it.   I'll try it out a bit, and then push it to
>> Github for others to test.
>>
>> Duncan Murdoch
>>
>>
>> On 18/02/2021 6:28 a.m., Duncan Murdoch wrote:
>>> I can reproduce this on a Catalina machine, working in R from the terminal.
>>>
>>> This definitely looks similar to the problem that
>>> rgl::setGraphicsDelay() was designed to solve, but even adding a 10
>>> second delay doesn't help.  I get a slightly different message than you:
>>>
>>>     > open3d()
>>> error: xp_attach_gl_context returned: 2
>>>
>>>      *** caught segfault ***
>>> address 0x18, cause 'memory not mapped'
>>>
>>> but that might just be a different way of reporting the same underlying
>>> issue.
>>>
>>> It's clearly some kind of interaction between the Quartz device and rgl.
>>>      I'll see if I can track it down.
>>>
>>> Duncan Murdoch
>>>
>>> On 17/02/2021 7:36 p.m., Richard M. Heiberger wrote:
>>>> This is repeatable when the lines are all pasted in at once.
>>>> The example works if I allow some time delay between lines.
>>>>
>>>> This is might be a relative of the one from a few months ago.
>>>> But this message is about invalid permissions.
>>>> =====
>>>>
>>>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>>>
>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>> You are welcome to redistribute it under certain conditions.
>>>> Type 'license()' or 'licence()' for distribution details.
>>>>
>>>>       Natural language support but running in an English locale
>>>>
>>>> R is a collaborative project with many contributors.
>>>> Type 'contributors()' for more information and
>>>> 'citation()' on how to cite R or R packages in publications.
>>>>
>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>> 'help.start()' for an HTML browser interface to help.
>>>> Type 'q()' to quit R.
>>>>
>>>>> setwd('/Users/rmh/Rwd/')
>>>>> library(rgl)
>>>>> x <- matrix(1:3, 1,3)
>>>>> plot(1:10, col=7)
>>>>> open3d()
>>>> error: xp_attach_gl_context returned: 2
>>>>
>>>>      *** caught segfault ***
>>>> address 0x18, cause 'invalid permissions'
>>>>
>>>> Traceback:
>>>>      1: rgl.open(useNULL)
>>>>      2: open3d()
>>>>
>>>> Possible actions:
>>>> 1: abort (with core dump, if enabled)
>>>> 2: normal R exit
>>>> 3: exit R without saving workspace
>>>> 4: exit R saving workspace
>>>> Selection:
>>>>
>>>>
>>>> ====
>>>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>>>> Big Sur 11.2.1.
>>>> The plot(1:10), col=7) ## went by default to the quartz() device.
>>>>
>>>>
>>>> I repeated this about 5 times in ESS, and then once in Terminal.
>>>>
>>>> Let me know if you need more information.
>>>>
>>>
>>
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From rmh @end|ng |rom temp|e@edu  Sat Feb 20 19:10:13 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 20 Feb 2021 18:10:13 +0000
Subject: [R-SIG-Mac] [External] Re:  [External] Re: more rgl problems
In-Reply-To: <8b4208ac-490b-95f1-bae9-851755b65a00@mcmaster.ca>
References: <CO1PR11MB5107DBF6AA1F2984894E1883D2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <2600d7bd-8beb-597c-1472-131eba92050a@gmail.com>
 <7cd64e2b-b96d-715b-04a6-ab10fe2fae8c@gmail.com>
 <CO1PR11MB5107F790A38C4460BF2A78CDD2859@CO1PR11MB5107.namprd11.prod.outlook.com>
 <9bb548be-ac3d-a38c-ab72-c5e6a6f8ccd9@gmail.com>
 <19081_1613836120_11KFmd7j007475_CO1PR11MB51079DAD9F54394AEE16F52BD2839@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <8b4208ac-490b-95f1-bae9-851755b65a00@mcmaster.ca>
Message-ID: <CO1PR11MB51076F307FA171154D1C32B3D2839@CO1PR11MB5107.namprd11.prod.outlook.com>

yes it is there. when you click the cran main page fir windows or mac, the mac is 4.0.3


Get Outlook for iOS<https://aka.ms/o0ukef>
________________________________
From: John Fox <jfox at mcmaster.ca>
Sent: Saturday, February 20, 2021 12:38:11 PM
To: Richard M. Heiberger <rmh at temple.edu>; Duncan Murdoch <murdoch.duncan at gmail.com>; r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: [External] Re: [R-SIG-Mac] [External] Re: more rgl problems

Dear Rich,

I see R-4.0.4.pkg (not RC) at <https://cran.r-project.org/bin/macosx/>.
Perhaps refresh the page in your browser?

Best,
  John

John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2021-02-20 10:45 a.m., Richard M. Heiberger wrote:
> I am running it now on 4.0.4RC.
>
> The cran page
> https://cran.r-project.org
> offers download of 4.0.3 for mac, even though 4.0.4 is available on windows.
>
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 20, 2021 9:41 AM
> To: Richard M. Heiberger; r-sig-mac at r-project.org
> Subject: Re: [External] Re: more rgl problems
>
> If you are set up to install from source, could you try this?
>
>     devtools::install_github("dmurdoch/rgl at quartzbug", type="source")
>
> If you only have some of the requirements (e.g. no devel versions of
> packages) you might find you only get a partial build with no X11
> display; that won't really test the workaround.  In that case I'll try
> to build a binary for your R version.
>
> Duncan Murdoch
>
> On 18/02/2021 6:07 p.m., Richard M. Heiberger wrote:
>> This is from my MacBook Air mid-2012 running Catalina 10.15.7
>> with Xquartz 2.7.11
>> I never placed the beta on this machine.
>> I also see from a fresh R session
>>
>>      plot(1:10, col=7)
>>      library(rgl)
>>      open3d()
>>
>> is fine, whereas this:
>>
>>      library(rgl)
>>      plot(1:10, col=7)
>>      open3d()
>> segfaults
>>
>> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
>> Copyright (C) 2020 The R Foundation for Statistical Computing
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>     Natural language support but running in an English locale
>>
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>>
>>> setwd('/Users/rmh/Rwd/')
>>>      library(rgl)
>>      plot(1:10, col=7)
>>      open3d()
>>      library(rgl)
>>>      plot(1:10, col=7)
>>>      open3d()
>>
>> error: xp_attach_gl_context returned: 2
>>
>>    *** caught segfault ***
>> address 0x18, cause 'memory not mapped'
>>
>> Traceback:
>>    1: rgl.open(useNULL)
>>    2: open3d()
>>
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>> Selection: 2
>> Warning message:
>> In rgl.open(useNULL) : RGL: ERROR: can't bind glx context to window
>>
>> Process R finished at Thu Feb 18 17:57:37 2021
>>
>>
>> ________________________________________
>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>> Sent: Thursday, February 18, 2021 3:20 PM
>> To: Richard M. Heiberger; r-sig-mac at r-project.org
>> Subject: [External] Re: more rgl problems
>>
>> I've made some progress on this, but I don't know how to fix it properly.
>>
>> What's happening is that rgl is trying to open the new window that
>> open3d() asks for.  It gets most of the way through that operation, then
>> calls glXMakeCurrent, which associates the OpenGL context with that
>> window.  That call fails, but without generating any of the documented
>> errors:  it just fails, triggering an X11 error handler with error code
>> 0 (which typically means no error).
>>
>> In the released versions of rgl, that failure leads to a segfault,
>> because I wasn't doing enough error checking.  I've fixed the segfault,
>> but I'm still getting the error (in fact I'm getting it a lot more than
>> I used to; not sure if it's my debugging code causing that), and after I
>> get the error reported on screen, the new rgl window opens but doesn't
>> work to display anything.
>>
>> I think it's probably something wrong in the rgl initialization code;
>> running this:
>>
>>      plot(1:10, col=7)
>>      library(rgl)
>>      open3d()
>>
>> is fine, whereas this:
>>
>>      library(rgl)
>>      plot(1:10, col=7)
>>      open3d()
>>
>> is always failing for me.  Or possibly this is an Xquartz bug, maybe a
>> leftover from when I installed the beta.
>>
>> I'd guess what's happening is that calling quartz() invalidates part of
>> the initialization done by rgl.init(), but I don't know what part yet.
>> I do want to call rgl.init() when loading rgl, because it might fail,
>> and then I can drop back to the off-screen drawing.  It's too late to do
>> that later.
>>
>> A workaround that works for me is for the .onload() function in rgl to
>> execute
>>
>>     dev.new()
>>     dev.off()
>>
>> before calling rgl.init(). It is less irritating than you might guess,
>> because the window doesn't have time to appear before being destroyed,
>> but I still don't like it.   I'll try it out a bit, and then push it to
>> Github for others to test.
>>
>> Duncan Murdoch
>>
>>
>> On 18/02/2021 6:28 a.m., Duncan Murdoch wrote:
>>> I can reproduce this on a Catalina machine, working in R from the terminal.
>>>
>>> This definitely looks similar to the problem that
>>> rgl::setGraphicsDelay() was designed to solve, but even adding a 10
>>> second delay doesn't help.  I get a slightly different message than you:
>>>
>>>     > open3d()
>>> error: xp_attach_gl_context returned: 2
>>>
>>>      *** caught segfault ***
>>> address 0x18, cause 'memory not mapped'
>>>
>>> but that might just be a different way of reporting the same underlying
>>> issue.
>>>
>>> It's clearly some kind of interaction between the Quartz device and rgl.
>>>      I'll see if I can track it down.
>>>
>>> Duncan Murdoch
>>>
>>> On 17/02/2021 7:36 p.m., Richard M. Heiberger wrote:
>>>> This is repeatable when the lines are all pasted in at once.
>>>> The example works if I allow some time delay between lines.
>>>>
>>>> This is might be a relative of the one from a few months ago.
>>>> But this message is about invalid permissions.
>>>> =====
>>>>
>>>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>>>> Copyright (C) 2021 The R Foundation for Statistical Computing
>>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>>>
>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>> You are welcome to redistribute it under certain conditions.
>>>> Type 'license()' or 'licence()' for distribution details.
>>>>
>>>>       Natural language support but running in an English locale
>>>>
>>>> R is a collaborative project with many contributors.
>>>> Type 'contributors()' for more information and
>>>> 'citation()' on how to cite R or R packages in publications.
>>>>
>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>> 'help.start()' for an HTML browser interface to help.
>>>> Type 'q()' to quit R.
>>>>
>>>>> setwd('/Users/rmh/Rwd/')
>>>>> library(rgl)
>>>>> x <- matrix(1:3, 1,3)
>>>>> plot(1:10, col=7)
>>>>> open3d()
>>>> error: xp_attach_gl_context returned: 2
>>>>
>>>>      *** caught segfault ***
>>>> address 0x18, cause 'invalid permissions'
>>>>
>>>> Traceback:
>>>>      1: rgl.open(useNULL)
>>>>      2: open3d()
>>>>
>>>> Possible actions:
>>>> 1: abort (with core dump, if enabled)
>>>> 2: normal R exit
>>>> 3: exit R without saving workspace
>>>> 4: exit R saving workspace
>>>> Selection:
>>>>
>>>>
>>>> ====
>>>> MacBookAir with the M1 chip using the regular intel version of R from CRAN.
>>>> Big Sur 11.2.1.
>>>> The plot(1:10), col=7) ## went by default to the quartz() device.
>>>>
>>>>
>>>> I repeated this about 5 times in ESS, and then once in Terminal.
>>>>
>>>> Let me know if you need more information.
>>>>
>>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From jzh@ng @end|ng |rom m@th@m@@t@te@edu  Mon Feb 22 19:36:22 2021
From: jzh@ng @end|ng |rom m@th@m@@t@te@edu (Zhang, Jialin)
Date: Mon, 22 Feb 2021 18:36:22 +0000
Subject: [R-SIG-Mac] Rmpfr on M1 Mac cause 'illegal trap'
Message-ID: <BN6PR01MB2675C7FA4F726D9127A354EDE7819@BN6PR01MB2675.prod.exchangelabs.com>

Hello,

First time sending an email to this list. Please correct me if I?m doing anything wrong. Thank you!

I am reporting an error when using Rmpfr::mpfr on an M1 MacBook Air. Codes below:

> library(Rmpfr)
> a <- mpfr(1:10, precBits=100)

*** caught illegal operation ***
address 0x10daa2bfb, cause 'illegal trap'

Traceback:
1: mpfr.default(1:10, precBits = 100)
2: mpfr(1:10, precBits = 100)

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace

> sessionInfo()
R version 4.0.4 (2021-02-15)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Rmpfr_0.8-2 gmp_0.6-2

loaded via a namespace (and not attached):
[1] compiler_4.0.4



The issue was first published on https://stackoverflow.com/questions/66089887/mpfr-always-crash-r-studio/66321334#66321334. Please let me know if any more info is needed. Thanks!

Best,
JZ

?

Jialin Zhang (JZ), Assistant Professor of Statistics
Department of Mathematics and Statistics
Mississippi State University
tel: (662) 325-7137; email: jzhang at math.msstate.edu<mailto:jzhang at math.msstate.edu>


	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Feb 22 19:40:29 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 23 Feb 2021 07:40:29 +1300
Subject: [R-SIG-Mac] Rmpfr on M1 Mac cause 'illegal trap'
In-Reply-To: <BN6PR01MB2675C7FA4F726D9127A354EDE7819@BN6PR01MB2675.prod.exchangelabs.com>
References: <BN6PR01MB2675C7FA4F726D9127A354EDE7819@BN6PR01MB2675.prod.exchangelabs.com>
Message-ID: <27835508-A3A4-4FFB-92C3-14D2D2A80932@R-project.org>

JZ,

Thanks for the report, this is likely due to Rosetta2 not supporting some advanced x86_64 instructions used by Rmpfr. I'll see if I can create a less optimised build of Rmpfr which uses only supported instructions.

Thanks,
Simon


> On Feb 23, 2021, at 07:36, Zhang, Jialin via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Hello,
> 
> First time sending an email to this list. Please correct me if I?m doing anything wrong. Thank you!
> 
> I am reporting an error when using Rmpfr::mpfr on an M1 MacBook Air. Codes below:
> 
>> library(Rmpfr)
>> a <- mpfr(1:10, precBits=100)
> 
> *** caught illegal operation ***
> address 0x10daa2bfb, cause 'illegal trap'
> 
> Traceback:
> 1: mpfr.default(1:10, precBits = 100)
> 2: mpfr(1:10, precBits = 100)
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> 
>> sessionInfo()
> R version 4.0.4 (2021-02-15)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] Rmpfr_0.8-2 gmp_0.6-2
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.4
> 
> 
> 
> The issue was first published on https://stackoverflow.com/questions/66089887/mpfr-always-crash-r-studio/66321334#66321334. Please let me know if any more info is needed. Thanks!
> 
> Best,
> JZ
> 
> ?
> 
> Jialin Zhang (JZ), Assistant Professor of Statistics
> Department of Mathematics and Statistics
> Mississippi State University
> tel: (662) 325-7137; email: jzhang at math.msstate.edu<mailto:jzhang at math.msstate.edu>
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From rmh @end|ng |rom temp|e@edu  Mon Feb 22 19:46:28 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 22 Feb 2021 18:46:28 +0000
Subject: [R-SIG-Mac] [External]  Rmpfr on M1 Mac cause 'illegal trap'
In-Reply-To: <BN6PR01MB2675C7FA4F726D9127A354EDE7819@BN6PR01MB2675.prod.exchangelabs.com>
References: <BN6PR01MB2675C7FA4F726D9127A354EDE7819@BN6PR01MB2675.prod.exchangelabs.com>
Message-ID: <CO1PR11MB5107440F12DF3FEEC8193BD8D2819@CO1PR11MB5107.namprd11.prod.outlook.com>

I confirm the error on Mac M1
R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"

I also ran it on an intel Mac with R 4.0.3
and it worked correctly there.

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Zhang, Jialin via R-SIG-Mac <r-sig-mac at r-project.org>
Sent: Monday, February 22, 2021 1:36 PM
To: r-sig-mac at r-project.org
Subject: [External] [R-SIG-Mac] Rmpfr on M1 Mac cause 'illegal trap'

Hello,

First time sending an email to this list. Please correct me if I?m doing anything wrong. Thank you!

I am reporting an error when using Rmpfr::mpfr on an M1 MacBook Air. Codes below:

> library(Rmpfr)
> a <- mpfr(1:10, precBits=100)

*** caught illegal operation ***
address 0x10daa2bfb, cause 'illegal trap'

Traceback:
1: mpfr.default(1:10, precBits = 100)
2: mpfr(1:10, precBits = 100)

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace

> sessionInfo()
R version 4.0.4 (2021-02-15)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Rmpfr_0.8-2 gmp_0.6-2

loaded via a namespace (and not attached):
[1] compiler_4.0.4



The issue was first published on https://stackoverflow.com/questions/66089887/mpfr-always-crash-r-studio/66321334#66321334. Please let me know if any more info is needed. Thanks!

Best,
JZ

?

Jialin Zhang (JZ), Assistant Professor of Statistics
Department of Mathematics and Statistics
Mississippi State University
tel: (662) 325-7137; email: jzhang at math.msstate.edu<mailto:jzhang at math.msstate.edu>


        [[alternative HTML version deleted]]


From je@n@th|ou|ou@e @end|ng |rom un|v-|yon1@|r  Mon Feb 22 20:09:32 2021
From: je@n@th|ou|ou@e @end|ng |rom un|v-|yon1@|r (Jean Thioulouse)
Date: Mon, 22 Feb 2021 20:09:32 +0100
Subject: [R-SIG-Mac] [External]  Rmpfr on M1 Mac cause 'illegal trap'
In-Reply-To: <CO1PR11MB5107440F12DF3FEEC8193BD8D2819@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <BN6PR01MB2675C7FA4F726D9127A354EDE7819@BN6PR01MB2675.prod.exchangelabs.com>
 <CO1PR11MB5107440F12DF3FEEC8193BD8D2819@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <125B425C-039E-492A-B148-234BE05B654B@univ-lyon1.fr>


The good news is that it works fine in the last arm64 R-devel version:

> a <- mpfr(1:10, precBits=100)
> a
10 'mpfr' numbers of precision  100   bits 
 [1]  1  2  3  4  5  6  7  8  9 10
> sessionInfo()
R Under development (unstable) (2021-02-18 r80027)
Platform: aarch64-apple-darwin20.0 (64-bit)
Running under: macOS Big Sur 11.2.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib

Random number generation:
 RNG:     Mersenne-Twister 
 Normal:  Inversion 
 Sample:  Rounding 
 
locale:
[1] fr_FR.UTF-8/fr_FR.UTF-8/fr_FR.UTF-8/C/fr_FR.UTF-8/fr_FR.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] Rmpfr_0.8-2 gmp_0.6-2  

loaded via a namespace (and not attached):
[1] compiler_4.1.0 tools_4.1.0   



> Le 22 f?vr. 2021 ? 19:46, Richard M. Heiberger <rmh at temple.edu> a ?crit :
> 
> I confirm the error on Mac M1
> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
> 
> I also ran it on an intel Mac with R 4.0.3
> and it worked correctly there.
> 
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Zhang, Jialin via R-SIG-Mac <r-sig-mac at r-project.org>
> Sent: Monday, February 22, 2021 1:36 PM
> To: r-sig-mac at r-project.org
> Subject: [External] [R-SIG-Mac] Rmpfr on M1 Mac cause 'illegal trap'
> 
> Hello,
> 
> First time sending an email to this list. Please correct me if I?m doing anything wrong. Thank you!
> 
> I am reporting an error when using Rmpfr::mpfr on an M1 MacBook Air. Codes below:
> 
>> library(Rmpfr)
>> a <- mpfr(1:10, precBits=100)
> 
> *** caught illegal operation ***
> address 0x10daa2bfb, cause 'illegal trap'
> 
> Traceback:
> 1: mpfr.default(1:10, precBits = 100)
> 2: mpfr(1:10, precBits = 100)
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> 
>> sessionInfo()
> R version 4.0.4 (2021-02-15)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] Rmpfr_0.8-2 gmp_0.6-2
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.4
> 
> 
> 
> The issue was first published on https://stackoverflow.com/questions/66089887/mpfr-always-crash-r-studio/66321334#66321334. Please let me know if any more info is needed. Thanks!
> 
> Best,
> JZ
> 
> ?
> 
> Jialin Zhang (JZ), Assistant Professor of Statistics
> Department of Mathematics and Statistics
> Mississippi State University
> tel: (662) 325-7137; email: jzhang at math.msstate.edu<mailto:jzhang at math.msstate.edu>
> 
> 
>        [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Feb 22 21:03:44 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 23 Feb 2021 09:03:44 +1300
Subject: [R-SIG-Mac] [External]  Rmpfr on M1 Mac cause 'illegal trap'
In-Reply-To: <125B425C-039E-492A-B148-234BE05B654B@univ-lyon1.fr>
References: <BN6PR01MB2675C7FA4F726D9127A354EDE7819@BN6PR01MB2675.prod.exchangelabs.com>
 <CO1PR11MB5107440F12DF3FEEC8193BD8D2819@CO1PR11MB5107.namprd11.prod.outlook.com>
 <125B425C-039E-492A-B148-234BE05B654B@univ-lyon1.fr>
Message-ID: <979F2A33-7FCA-4A8A-8800-3C9D444EF1EE@R-project.org>

Jean,

yes it does by definition - the issue is the Intel translation on arm, so if you run native R there is no issue. There should be also no issue if you compile Intel mpfr on the M1 machine since it should detect capabilities correctly. Maybe I should have been more clear that the issue is that the binary we distribute has been compiled on CPU that has more capabilities than the Intel translation on M1 does. So compiling from source is the other alternative (whether native or not doesn't matter).

Cheers,
Simon



> On 23/02/2021, at 8:09 AM, Jean Thioulouse <jean.thioulouse at univ-lyon1.fr> wrote:
> 
> 
> The good news is that it works fine in the last arm64 R-devel version:
> 
>> a <- mpfr(1:10, precBits=100)
>> a
> 10 'mpfr' numbers of precision  100   bits 
> [1]  1  2  3  4  5  6  7  8  9 10
>> sessionInfo()
> R Under development (unstable) (2021-02-18 r80027)
> Platform: aarch64-apple-darwin20.0 (64-bit)
> Running under: macOS Big Sur 11.2.1
> 
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib
> 
> Random number generation:
> RNG:     Mersenne-Twister 
> Normal:  Inversion 
> Sample:  Rounding 
> 
> locale:
> [1] fr_FR.UTF-8/fr_FR.UTF-8/fr_FR.UTF-8/C/fr_FR.UTF-8/fr_FR.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> other attached packages:
> [1] Rmpfr_0.8-2 gmp_0.6-2  
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.1.0 tools_4.1.0   
> 
> 
> 
>> Le 22 f?vr. 2021 ? 19:46, Richard M. Heiberger <rmh at temple.edu> a ?crit :
>> 
>> I confirm the error on Mac M1
>> R version 4.0.4 RC (2021-02-12 r79998) -- "Lost Library Book"
>> 
>> I also ran it on an intel Mac with R 4.0.3
>> and it worked correctly there.
>> 
>> ________________________________________
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Zhang, Jialin via R-SIG-Mac <r-sig-mac at r-project.org>
>> Sent: Monday, February 22, 2021 1:36 PM
>> To: r-sig-mac at r-project.org
>> Subject: [External] [R-SIG-Mac] Rmpfr on M1 Mac cause 'illegal trap'
>> 
>> Hello,
>> 
>> First time sending an email to this list. Please correct me if I?m doing anything wrong. Thank you!
>> 
>> I am reporting an error when using Rmpfr::mpfr on an M1 MacBook Air. Codes below:
>> 
>>> library(Rmpfr)
>>> a <- mpfr(1:10, precBits=100)
>> 
>> *** caught illegal operation ***
>> address 0x10daa2bfb, cause 'illegal trap'
>> 
>> Traceback:
>> 1: mpfr.default(1:10, precBits = 100)
>> 2: mpfr(1:10, precBits = 100)
>> 
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>> 
>>> sessionInfo()
>> R version 4.0.4 (2021-02-15)
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>> Running under: macOS Big Sur 10.16
>> 
>> Matrix products: default
>> BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
>> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> other attached packages:
>> [1] Rmpfr_0.8-2 gmp_0.6-2
>> 
>> loaded via a namespace (and not attached):
>> [1] compiler_4.0.4
>> 
>> 
>> 
>> The issue was first published on https://stackoverflow.com/questions/66089887/mpfr-always-crash-r-studio/66321334#66321334. Please let me know if any more info is needed. Thanks!
>> 
>> Best,
>> JZ
>> 
>> ?
>> 
>> Jialin Zhang (JZ), Assistant Professor of Statistics
>> Department of Mathematics and Statistics
>> Mississippi State University
>> tel: (662) 325-7137; email: jzhang at math.msstate.edu<mailto:jzhang at math.msstate.edu>
>> 
>> 
>>       [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From joh@nne@@tru||er @end|ng |rom un|b@@@ch  Tue Feb 23 09:45:37 2021
From: joh@nne@@tru||er @end|ng |rom un|b@@@ch (Johannes Truffer)
Date: Tue, 23 Feb 2021 08:45:37 +0000
Subject: [R-SIG-Mac] Rosetta2/M1-Compatibility of R
Message-ID: <92AD8E6D-D77C-41A6-B8B7-9448978BF7FF@unibas.ch>

Dear SIG-Mac

I?m rather new to the R Universe and I really hope, I don?t violate any conventionalized procedures by posting to this list as a definite rookie.

For my PhD at University of Basel, I?m using different approaches to text mining, which are almosty exclusively R-based. Because I?m about to analyse bigger text-corpora, I bought the new M1 Mac Mini. Sadly, most of my scripts suddenly stopped working on it, and I was baffled to find out, that it always crashed on the Rmpfr-Package's mpfr-command. Somebody else asked the exact same question on Stack Overflow about 15 days ago, but still hasn?t received a definitive answer (https://stackoverflow.com/questions/66089887/mpfr-always-crash-r-studio?noredirect=1#comment117251458_66089887).

I even reached out to Prof. Dr. Martin Maechler, the maintainer(?Rmpfr?). He pointed out to me in an earlier Mail, that the package itself is not likely to be the culprit in this. It may have to do with something more low level, perhaps in connection with the M1?s architecture or Rosetta 2 itself. So I thought maybe the SIG could be of help in answering this.

Thanks a lot in advance.

Kind regards

Johannes Truffer

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Feb 23 10:54:45 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 23 Feb 2021 22:54:45 +1300
Subject: [R-SIG-Mac] Rosetta2/M1-Compatibility of R
In-Reply-To: <92AD8E6D-D77C-41A6-B8B7-9448978BF7FF@unibas.ch>
References: <92AD8E6D-D77C-41A6-B8B7-9448978BF7FF@unibas.ch>
Message-ID: <8774D7BD-DFC8-42BC-A363-C286A8807C35@R-project.org>

Johannes,

Thank you for your inquiry, I'm glad that you have finally found the right place for your query - few weeks too late, but better than never. But that said, if you actually bothered to read the list you're posting to you'd see the answer to your question already. Admittedly, the answer is only satisfactory to more experienced R users (since the solution requires you to obtain libmpfr for M1 one way or another), but if you bear with me for few more hours I do plan to post the corresponding native library tomorrow.

Cheers,
Simon


> On Feb 23, 2021, at 21:45, Johannes Truffer <johannes.truffer at unibas.ch> wrote:
> 
> Dear SIG-Mac
> 
> I?m rather new to the R Universe and I really hope, I don?t violate any conventionalized procedures by posting to this list as a definite rookie.
> 
> For my PhD at University of Basel, I?m using different approaches to text mining, which are almosty exclusively R-based. Because I?m about to analyse bigger text-corpora, I bought the new M1 Mac Mini. Sadly, most of my scripts suddenly stopped working on it, and I was baffled to find out, that it always crashed on the Rmpfr-Package's mpfr-command. Somebody else asked the exact same question on Stack Overflow about 15 days ago, but still hasn?t received a definitive answer (https://stackoverflow.com/questions/66089887/mpfr-always-crash-r-studio?noredirect=1#comment117251458_66089887).
> 
> I even reached out to Prof. Dr. Martin Maechler, the maintainer(?Rmpfr?). He pointed out to me in an earlier Mail, that the package itself is not likely to be the culprit in this. It may have to do with something more low level, perhaps in connection with the M1?s architecture or Rosetta 2 itself. So I thought maybe the SIG could be of help in answering this.
> 
> Thanks a lot in advance.
> 
> Kind regards
> 
> Johannes Truffer
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From t|m@d|ck|n@on @end|ng |rom utoronto@c@  Wed Feb 24 19:48:17 2021
From: t|m@d|ck|n@on @end|ng |rom utoronto@c@ (Tim Dickinson)
Date: Wed, 24 Feb 2021 13:48:17 -0500
Subject: [R-SIG-Mac] devtools problem on MacOS 10.14.6
Message-ID: <feba8d43-1009-6d7c-1951-4fb6d6f33033@utoronto.ca>

Hi--- I would like to install the new package lcvplants 
(https://www.nature.com/articles/s41597-020-00702-z.pdf, 
https://idiv-biodiversity.github.io/lcvplants/articles/taxonomic_resolution_using_lcplants.html) 
and need to use devtools to do so.

I don't seem to be able to install devtools:

R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

 > install.packages("devtools")
Warning: unable to access index for repository 
http://cran.utstat.utoronto.ca/src/contrib:
 ? cannot open URL 'http://cran.utstat.utoronto.ca/src/contrib/PACKAGES'
Warning: unable to access index for repository 
http://cran.utstat.utoronto.ca/bin/macosx/contrib/4.0:
 ? cannot open URL 
'http://cran.utstat.utoronto.ca/bin/macosx/contrib/4.0/PACKAGES'
Warning message:
package ?devtools? is not available for this version of R

A version of this package for your version of R might be available 
elsewhere,
see the ideas at
https://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages 

 >

and same result after updating...
R version 4.0.4 (2021-02-15) -- "Lost Library Book"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

My thanks to anyone who can suggest a way forward!

---tad.

  
<++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<Tim Dickinson
<Senior Curator Emeritus
<ROM Green Plant Herbarium (TRT)
<
<Department of Natural History
<Royal Ontario Museum
<100 Queen's Park
<Toronto  ON
<CANADA  M5S 2C6
<
<Phone:  (416) 782 1607     FAX:  (416) 586 7921
<E-mail:  tim.dickinson at utoronto.ca  -  ORCID ID http://orcid.org/0000-0003-1366-145X
<URL: http://www.rom.on.ca/en/collections-research/rom-staff/tim-dickinson
<++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Feb 24 20:13:15 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 25 Feb 2021 08:13:15 +1300
Subject: [R-SIG-Mac] devtools problem on MacOS 10.14.6
In-Reply-To: <feba8d43-1009-6d7c-1951-4fb6d6f33033@utoronto.ca>
References: <feba8d43-1009-6d7c-1951-4fb6d6f33033@utoronto.ca>
Message-ID: <DD09048B-0016-4FD0-97D4-2B3495BA9E1E@R-project.org>

Tim.,

The mirror you are using seems to be broken. Please use that main CRAN server or another mirror that works.

Cheers,
Simon



> On Feb 25, 2021, at 07:48, Tim Dickinson <tim.dickinson at utoronto.ca> wrote:
> 
> Hi--- I would like to install the new package lcvplants (https://www.nature.com/articles/s41597-020-00702-z.pdf, https://idiv-biodiversity.github.io/lcvplants/articles/taxonomic_resolution_using_lcplants.html) and need to use devtools to do so.
> 
> I don't seem to be able to install devtools:
> 
> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
> 
> > install.packages("devtools")
> Warning: unable to access index for repository http://cran.utstat.utoronto.ca/src/contrib:
>   cannot open URL 'http://cran.utstat.utoronto.ca/src/contrib/PACKAGES'
> Warning: unable to access index for repository http://cran.utstat.utoronto.ca/bin/macosx/contrib/4.0:
>   cannot open URL 'http://cran.utstat.utoronto.ca/bin/macosx/contrib/4.0/PACKAGES'
> Warning message:
> package ?devtools? is not available for this version of R
> 
> A version of this package for your version of R might be available elsewhere,
> see the ideas at
> https://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages 
> >
> 
> and same result after updating...
> R version 4.0.4 (2021-02-15) -- "Lost Library Book"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
> 
> My thanks to anyone who can suggest a way forward!
> 
> ---tad.
> 
> <++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
> <Tim Dickinson
> <Senior Curator Emeritus
> <ROM Green Plant Herbarium (TRT)
> <
> <Department of Natural History
> <Royal Ontario Museum
> <100 Queen's Park
> <Toronto  ON
> <CANADA  M5S 2C6
> <
> <Phone:  (416) 782 1607     FAX:  (416) 586 7921
> <E-mail:  tim.dickinson at utoronto.ca  -  ORCID ID http://orcid.org/0000-0003-1366-145X
> <URL: http://www.rom.on.ca/en/collections-research/rom-staff/tim-dickinson
> <++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


