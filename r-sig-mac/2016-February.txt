From ripley at stats.ox.ac.uk  Fri Feb  5 13:07:04 2016
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 5 Feb 2016 12:07:04 +0000
Subject: [R-SIG-Mac] detecting cores
Message-ID: <56B49068.6040307@stats.ox.ac.uk>

sysctl on 10.11 has options which would enable us to differentiate 
between logical and physical codes on parallel::detectCores --- however 
these are not documented in Apple's online man pages, which are for 
10.9.  Could someone running 10.9 and someone for 10.10 report if

/usr/sbin/sysctl -n hw.physicalcpu
/usr/sbin/sysctl -n hw.logicalcpu

run in a terminal work and gives the correct result?  (Normally the 
second will be twice the first taking account of hyperthreading.)

Thanks in advance.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From csardi.gabor at gmail.com  Fri Feb  5 13:13:00 2016
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 5 Feb 2016 12:13:00 +0000
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <56B49068.6040307@stats.ox.ac.uk>
References: <56B49068.6040307@stats.ox.ac.uk>
Message-ID: <CABtg=K=gccR1wVMaWevuVPMDw3E04Dd_K19h+h5c3moXD_qMww@mail.gmail.com>

10.10.5:

? /usr/sbin/sysctl -n hw.physicalcpu
2

? /usr/sbin/sysctl -n hw.logicalcpu
4

Which I believe is correct. Laptop has one processor with two cores
according to "Hardware Overview" in "System Information"

Gabor


On Fri, Feb 5, 2016 at 12:07 PM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> sysctl on 10.11 has options which would enable us to differentiate between
> logical and physical codes on parallel::detectCores --- however these are
> not documented in Apple's online man pages, which are for 10.9.  Could
> someone running 10.9 and someone for 10.10 report if
>
> /usr/sbin/sysctl -n hw.physicalcpu
> /usr/sbin/sysctl -n hw.logicalcpu
>
> run in a terminal work and gives the correct result?  (Normally the second
> will be twice the first taking account of hyperthreading.)
>
> Thanks in advance.
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From charles.dimaggio at gmail.com  Fri Feb  5 13:13:13 2016
From: charles.dimaggio at gmail.com (Charles DiMaggio)
Date: Fri, 5 Feb 2016 07:13:13 -0500
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <56B49068.6040307@stats.ox.ac.uk>
References: <56B49068.6040307@stats.ox.ac.uk>
Message-ID: <D09C7E5C-A0BC-4AC9-848F-4CD6A08D6B6B@gmail.com>

Running 10.9.5 on 3.7Ghz Quad-Core:


$ /usr/sbin/sysctl -n hw.physicalcpu
4
$ /usr/sbin/sysctl -n hw.logicalcp
second level name logicalcp in hw.logicalcp is invalid


Charles DiMaggio, PhD, MPH
Professor of Surgery and Population Health
Director of Injury Research
Department of Surgery
New York University School of Medicine






On Feb 5, 2016, at 7:07 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> sysctl on 10.11 has options which would enable us to differentiate between logical and physical codes on parallel::detectCores --- however these are not documented in Apple's online man pages, which are for 10.9.  Could someone running 10.9 and someone for 10.10 report if
> 
> /usr/sbin/sysctl -n hw.physicalcpu
> /usr/sbin/sysctl -n hw.logicalcpu
> 
> run in a terminal work and gives the correct result?  (Normally the second will be twice the first taking account of hyperthreading.)
> 
> Thanks in advance.
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


	[[alternative HTML version deleted]]


From ripley at stats.ox.ac.uk  Fri Feb  5 13:17:59 2016
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 5 Feb 2016 12:17:59 +0000
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <D09C7E5C-A0BC-4AC9-848F-4CD6A08D6B6B@gmail.com>
References: <56B49068.6040307@stats.ox.ac.uk>
	<D09C7E5C-A0BC-4AC9-848F-4CD6A08D6B6B@gmail.com>
Message-ID: <56B492F7.5050101@stats.ox.ac.uk>

On 05/02/2016 12:13, Charles DiMaggio wrote:
> Running 10.9.5 on 3.7Ghz Quad-Core:
>
>
> $ /usr/sbin/sysctl -n hw.physicalcpu
> 4
> $ /usr/sbin/sysctl -n hw.logicalcp
> second level name logicalcp in hw.logicalcp is invalid

Thanks, but it is hw.logicalcpu we need to check.

>
>
> Charles DiMaggio, PhD, MPH
> Professor of Surgery and Population Health
> Director of Injury Research
> Department of Surgery
> New York University School of Medicine
>
>
>
>
>
>
> On Feb 5, 2016, at 7:07 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk
> <mailto:ripley at stats.ox.ac.uk>> wrote:
>
>> sysctl on 10.11 has options which would enable us to differentiate
>> between logical and physical codes on parallel::detectCores ---
>> however these are not documented in Apple's online man pages, which
>> are for 10.9.  Could someone running 10.9 and someone for 10.10 report if
>>
>> /usr/sbin/sysctl -n hw.physicalcpu
>> /usr/sbin/sysctl -n hw.logicalcpu
>>
>> run in a terminal work and gives the correct result?  (Normally the
>> second will be twice the first taking account of hyperthreading.)
>>
>> Thanks in advance.
>>
>> --
>> Brian D. Ripley, ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk>
>> Emeritus Professor of Applied Statistics, University of Oxford
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From charles.dimaggio at gmail.com  Fri Feb  5 13:19:55 2016
From: charles.dimaggio at gmail.com (Charles DiMaggio)
Date: Fri, 5 Feb 2016 07:19:55 -0500
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <56B492F7.5050101@stats.ox.ac.uk>
References: <56B49068.6040307@stats.ox.ac.uk>
	<D09C7E5C-A0BC-4AC9-848F-4CD6A08D6B6B@gmail.com>
	<56B492F7.5050101@stats.ox.ac.uk>
Message-ID: <BD5A86E7-BACF-4894-9989-3E01310A6470@gmail.com>

Ah. Cut and pasted too quickly?

$ /usr/sbin/sysctl -n hw.physicalcpu
4
$ /usr/sbin/sysctl -n hw.logicalcpu
8

Charles DiMaggio, PhD, MPH
Professor of Surgery and Population Health
Director of Injury Research
Department of Surgery






On Feb 5, 2016, at 7:17 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> On 05/02/2016 12:13, Charles DiMaggio wrote:
>> Running 10.9.5 on 3.7Ghz Quad-Core:
>> 
>> 
>> $ /usr/sbin/sysctl -n hw.physicalcpu
>> 4
>> $ /usr/sbin/sysctl -n hw.logicalcp
>> second level name logicalcp in hw.logicalcp is invalid
> 
> Thanks, but it is hw.logicalcpu we need to check.
> 
>> 
>> 
>> Charles DiMaggio, PhD, MPH
>> Professor of Surgery and Population Health
>> Director of Injury Research
>> Department of Surgery
>> New York University School of Medicine
>> 
>> 
>> 
>> 
>> 
>> 
>> On Feb 5, 2016, at 7:07 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk
>> <mailto:ripley at stats.ox.ac.uk>> wrote:
>> 
>>> sysctl on 10.11 has options which would enable us to differentiate
>>> between logical and physical codes on parallel::detectCores ---
>>> however these are not documented in Apple's online man pages, which
>>> are for 10.9.  Could someone running 10.9 and someone for 10.10 report if
>>> 
>>> /usr/sbin/sysctl -n hw.physicalcpu
>>> /usr/sbin/sysctl -n hw.logicalcpu
>>> 
>>> run in a terminal work and gives the correct result?  (Normally the
>>> second will be twice the first taking account of hyperthreading.)
>>> 
>>> Thanks in advance.
>>> 
>>> --
>>> Brian D. Ripley, ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk>
>>> Emeritus Professor of Applied Statistics, University of Oxford
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford


	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Fri Feb  5 13:26:35 2016
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 5 Feb 2016 13:26:35 +0100
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <56B49068.6040307@stats.ox.ac.uk>
References: <56B49068.6040307@stats.ox.ac.uk>
Message-ID: <BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>

Sorry, saw the bugzilla item first...

I have

Peters-iMac:IBP pd$ sysctl -n hw.ncpu
2
Peters-iMac:IBP pd$ sysctl -n hw.physicalcpu
2
Peters-iMac:IBP pd$ sysctl -n hw.logicalcpu
2
Peters-iMac:IBP pd$ ssh appleserver
Last login: Mon Dec 14 11:25:08 2015
appleserver:~ pd$ sysctl -n hw.ncpu
24
appleserver:~ pd$ sysctl -n hw.physicalcpu
12
appleserver:~ pd$ sysctl -n hw.logicalcpu
24

both on Mavericks, 10.9.5. As you probably gathered (or remembered), the iMac is Core 2 Duo, so no hyperthreading. 

-pd


On 05 Feb 2016, at 13:07 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> sysctl on 10.11 has options which would enable us to differentiate between logical and physical codes on parallel::detectCores --- however these are not documented in Apple's online man pages, which are for 10.9.  Could someone running 10.9 and someone for 10.10 report if
> 
> /usr/sbin/sysctl -n hw.physicalcpu
> /usr/sbin/sysctl -n hw.logicalcpu
> 
> run in a terminal work and gives the correct result?  (Normally the second will be twice the first taking account of hyperthreading.)
> 
> Thanks in advance.
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From joe at bio.umass.edu  Fri Feb  5 14:52:44 2016
From: joe at bio.umass.edu (Joseph Kunkel)
Date: Fri, 5 Feb 2016 08:52:44 -0500
Subject: [R-SIG-Mac] Multiple cores on a Mac
In-Reply-To: <BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>
References: <56B49068.6040307@stats.ox.ac.uk>
	<BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>
Message-ID: <B9F5D0EA-C2E0-424F-A51F-7554DCA35942@bio.umass.edu>

To me there are big gorillas in the room and I need to know why I can not use them all.

? Testing for physical and logical cpus on Joe's MacBook Pro.
Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.physicalcpu
4
Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.logicalcpu
8

Prior to about 2012 my multicore Macs would use all (physical) cores automagically in R.  %*% was multicore automatically.

A 24 hour heavy matrix calculation would take a little over 6 hours on a 4 core Mac.

Then some problem with the BLAS library changed everything and colleague stats people and I got really mad that we could not do our calculations as fast in R.

Many work-around libraries were devised which did not seem to be that useful for freewielding matrix operations.

Then Revolution R seemed to solve the problem and patented(?) it.  ? but not for Macs.

Recently they provided a free Mac version but using their R ?open' version messes up my computer for updating the libraries I am addicted to using.

My question after this appologeticlay long narrative is:

Why has no satisfactory and transparent method for multicore use been available to CRAN R?

Secondarily,  how could our R open software system be hijacked by Revolution and now Microsoft?

I would be pleased to know that there are colleagues out there who are similarly hoping for an R core solution within CRAN.

I can do primitive matrix things faster with Julia, which is encouraging, but the libraries and flexability for me are not there yet.

Joe

-?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
Joseph G. Kunkel, Research Professor
112A Marine Science Center
University of New England
Biddeford ME 04005
http://www.bio.umass.edu/biology/kunkel/


From mikko.korpela at aalto.fi  Fri Feb  5 15:44:36 2016
From: mikko.korpela at aalto.fi (Mikko Korpela)
Date: Fri, 5 Feb 2016 16:44:36 +0200
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <56B49068.6040307@stats.ox.ac.uk>
References: <56B49068.6040307@stats.ox.ac.uk>
Message-ID: <56B4B554.3080709@aalto.fi>

On 05.02.2016 14:07, Prof Brian Ripley wrote:
> sysctl on 10.11 has options which would enable us to differentiate
> between logical and physical codes on parallel::detectCores --- however
> these are not documented in Apple's online man pages, which are for
> 10.9.  Could someone running 10.9 and someone for 10.10 report if
> 
> /usr/sbin/sysctl -n hw.physicalcpu
> /usr/sbin/sysctl -n hw.logicalcpu
> 
> run in a terminal work and gives the correct result?  (Normally the
> second will be twice the first taking account of hyperthreading.)
Here is the output for an older OS X version, 10.7.5. The computer has a
dual core processor without hyperthreading. Also included is the listing
of all sysctl variable names that begin with "hw." and are followed by
something with "cpu".

The man page about the command line tool, sysctl(8), does not mention
hw.physicalcpu or hw.logicalcpu. However, the variables are listed on
the man page sysctl(3), which is about the underlying C functions. The
latter man page was apparently installed with the XCode Command Line
Tools package. Therefore I have also printed its version number.

$ /usr/sbin/sysctl -n hw.physicalcpu
2
$ /usr/sbin/sysctl -n hw.logicalcpu
2
$ sw_vers
ProductName:	Mac OS X
ProductVersion:	10.7.5
BuildVersion:	11G63
$ /usr/sbin/sysctl -a | grep "hw\\..*cpu" | sed 's/[: ].*//'
hw.ncpu
hw.cpufrequency
hw.availcpu
hw.ncpu
hw.activecpu
hw.physicalcpu
hw.physicalcpu_max
hw.logicalcpu
hw.logicalcpu_max
hw.cputype
hw.cpusubtype
hw.cpu64bit_capable
hw.cpufamily
hw.cpufrequency
hw.cpufrequency_min
hw.cpufrequency_max
$ pkgutil --pkg-info=com.apple.pkg.DeveloperToolsCLI | grep version
version: 4.6.0.0.1.1365549073

-- 
Mikko Korpela
Aalto University School of Science
Department of Computer Science


From pdalgd at gmail.com  Fri Feb  5 16:03:19 2016
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 5 Feb 2016 16:03:19 +0100
Subject: [R-SIG-Mac] Multiple cores on a Mac
In-Reply-To: <B9F5D0EA-C2E0-424F-A51F-7554DCA35942@bio.umass.edu>
References: <56B49068.6040307@stats.ox.ac.uk>
	<BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>
	<B9F5D0EA-C2E0-424F-A51F-7554DCA35942@bio.umass.edu>
Message-ID: <2747E5A6-C532-413A-9FE0-FAAF8857F02B@gmail.com>

Why me..?

Probably Simon and maybe Brian has the full recollection of the story, but as I understood it, once upon a time you could switch out the BLAS on CRAN R just by editing a symlink in the R installation. For some reason, that cannot work anymore (Apple considered symlinked libraries a security risk?). I think the current situation is that you can still do it, but you have to physically overwrite the default BLAS(? Simon will know.). 

At any rate, you can certainly still do a local compile with the Accelerate framework, once you get all the tools in place:

> M <- matrix(rnorm(1e8),10000)
> system.time(M %*% t(M))
   user  system elapsed 
219.566   0.806  21.752 
> M <- crossprod(M)
> system.time(solve(M))
   user  system elapsed 
310.874   1.477  29.998 

(To tell the truth, I actually don't have all the tools in place on that machine, so this was from a build of 3.2.1 patched)

-pd

On 05 Feb 2016, at 14:52 , Joseph Kunkel <joe at bio.umass.edu> wrote:

> To me there are big gorillas in the room and I need to know why I can not use them all.
> 
> ? Testing for physical and logical cpus on Joe's MacBook Pro.
> Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.physicalcpu
> 4
> Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.logicalcpu
> 8
> 
> Prior to about 2012 my multicore Macs would use all (physical) cores automagically in R.  %*% was multicore automatically.
> 
> A 24 hour heavy matrix calculation would take a little over 6 hours on a 4 core Mac.
> 
> Then some problem with the BLAS library changed everything and colleague stats people and I got really mad that we could not do our calculations as fast in R.
> 
> Many work-around libraries were devised which did not seem to be that useful for freewielding matrix operations.
> 
> Then Revolution R seemed to solve the problem and patented(?) it.  ? but not for Macs.
> 
> Recently they provided a free Mac version but using their R ?open' version messes up my computer for updating the libraries I am addicted to using.
> 
> My question after this appologeticlay long narrative is:
> 
> Why has no satisfactory and transparent method for multicore use been available to CRAN R?
> 
> Secondarily,  how could our R open software system be hijacked by Revolution and now Microsoft?
> 
> I would be pleased to know that there are colleagues out there who are similarly hoping for an R core solution within CRAN.
> 
> I can do primitive matrix things faster with Julia, which is encouraging, but the libraries and flexability for me are not there yet.
> 
> Joe
> 
> -?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
> Joseph G. Kunkel, Research Professor
> 112A Marine Science Center
> University of New England
> Biddeford ME 04005
> http://www.bio.umass.edu/biology/kunkel/
> 
> 
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From hanson at depauw.edu  Fri Feb  5 16:20:37 2016
From: hanson at depauw.edu (Bryan Hanson)
Date: Fri, 5 Feb 2016 10:20:37 -0500
Subject: [R-SIG-Mac] Multiple cores on a Mac
In-Reply-To: <2747E5A6-C532-413A-9FE0-FAAF8857F02B@gmail.com>
References: <56B49068.6040307@stats.ox.ac.uk>
	<BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>
	<B9F5D0EA-C2E0-424F-A51F-7554DCA35942@bio.umass.edu>
	<2747E5A6-C532-413A-9FE0-FAAF8857F02B@gmail.com>
Message-ID: <A617502C-755E-4921-9457-D008D6EB8BE5@depauw.edu>

On El Cap you can still pull off the symlink approach, as described here, without building R fresh:

http://blog.quadrivio.com/2015/06/improved-r-performance-with-openblas.html

The next time you launch R you will have the library you specified.

Bryan

> On Feb 5, 2016, at 10:03 AM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Why me..?
> 
> Probably Simon and maybe Brian has the full recollection of the story, but as I understood it, once upon a time you could switch out the BLAS on CRAN R just by editing a symlink in the R installation. For some reason, that cannot work anymore (Apple considered symlinked libraries a security risk?). I think the current situation is that you can still do it, but you have to physically overwrite the default BLAS(? Simon will know.). 
> 
> At any rate, you can certainly still do a local compile with the Accelerate framework, once you get all the tools in place:
> 
>> M <- matrix(rnorm(1e8),10000)
>> system.time(M %*% t(M))
>   user  system elapsed 
> 219.566   0.806  21.752 
>> M <- crossprod(M)
>> system.time(solve(M))
>   user  system elapsed 
> 310.874   1.477  29.998 
> 
> (To tell the truth, I actually don't have all the tools in place on that machine, so this was from a build of 3.2.1 patched)
> 
> -pd
> 
> On 05 Feb 2016, at 14:52 , Joseph Kunkel <joe at bio.umass.edu> wrote:
> 
>> To me there are big gorillas in the room and I need to know why I can not use them all.
>> 
>> ? Testing for physical and logical cpus on Joe's MacBook Pro.
>> Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.physicalcpu
>> 4
>> Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.logicalcpu
>> 8
>> 
>> Prior to about 2012 my multicore Macs would use all (physical) cores automagically in R.  %*% was multicore automatically.
>> 
>> A 24 hour heavy matrix calculation would take a little over 6 hours on a 4 core Mac.
>> 
>> Then some problem with the BLAS library changed everything and colleague stats people and I got really mad that we could not do our calculations as fast in R.
>> 
>> Many work-around libraries were devised which did not seem to be that useful for freewielding matrix operations.
>> 
>> Then Revolution R seemed to solve the problem and patented(?) it.  ? but not for Macs.
>> 
>> Recently they provided a free Mac version but using their R ?open' version messes up my computer for updating the libraries I am addicted to using.
>> 
>> My question after this appologeticlay long narrative is:
>> 
>> Why has no satisfactory and transparent method for multicore use been available to CRAN R?
>> 
>> Secondarily,  how could our R open software system be hijacked by Revolution and now Microsoft?
>> 
>> I would be pleased to know that there are colleagues out there who are similarly hoping for an R core solution within CRAN.
>> 
>> I can do primitive matrix things faster with Julia, which is encouraging, but the libraries and flexability for me are not there yet.
>> 
>> Joe
>> 
>> -?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
>> Joseph G. Kunkel, Research Professor
>> 112A Marine Science Center
>> University of New England
>> Biddeford ME 04005
>> http://www.bio.umass.edu/biology/kunkel/
>> 
>> 
>> 
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From pdalgd at gmail.com  Fri Feb  5 17:03:00 2016
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 5 Feb 2016 17:03:00 +0100
Subject: [R-SIG-Mac] Multiple cores on a Mac
In-Reply-To: <A617502C-755E-4921-9457-D008D6EB8BE5@depauw.edu>
References: <56B49068.6040307@stats.ox.ac.uk>
	<BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>
	<B9F5D0EA-C2E0-424F-A51F-7554DCA35942@bio.umass.edu>
	<2747E5A6-C532-413A-9FE0-FAAF8857F02B@gmail.com>
	<A617502C-755E-4921-9457-D008D6EB8BE5@depauw.edu>
Message-ID: <DAC643D4-CE57-4685-A7C7-DE5FBD2CAF14@gmail.com>

Right, thanks. 

Digging back in the archives, the story was that there used to be a libRblas.veclib.dylib to link to and _that_ disappeared for some reason, but linking to
 
/System/Library/Frameworks/Accelerate.framework/......../libBLAS.dylib

has worked all along.

Interestingly, this transpires from a discussion involving Michael Braun and Simon Urbanek on R-sig-mac on Nov.20-23 2014, while a complaint by Joseph Kunkel, about the FAQ recipe not working, on Nov.23 2014 went uncommented....

Reading the old threads also suggests that the intention was to either reinstate libRblas.veclib.dylib or update the FAQ, but neither seems to have happened.

-pd

On 05 Feb 2016, at 16:20 , Bryan Hanson <hanson at depauw.edu> wrote:

> On El Cap you can still pull off the symlink approach, as described here, without building R fresh:
> 
> http://blog.quadrivio.com/2015/06/improved-r-performance-with-openblas.html
> 
> The next time you launch R you will have the library you specified.
> 
> Bryan
> 
>> On Feb 5, 2016, at 10:03 AM, peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> Why me..?
>> 
>> Probably Simon and maybe Brian has the full recollection of the story, but as I understood it, once upon a time you could switch out the BLAS on CRAN R just by editing a symlink in the R installation. For some reason, that cannot work anymore (Apple considered symlinked libraries a security risk?). I think the current situation is that you can still do it, but you have to physically overwrite the default BLAS(? Simon will know.). 
>> 
>> At any rate, you can certainly still do a local compile with the Accelerate framework, once you get all the tools in place:
>> 
>>> M <- matrix(rnorm(1e8),10000)
>>> system.time(M %*% t(M))
>>  user  system elapsed 
>> 219.566   0.806  21.752 
>>> M <- crossprod(M)
>>> system.time(solve(M))
>>  user  system elapsed 
>> 310.874   1.477  29.998 
>> 
>> (To tell the truth, I actually don't have all the tools in place on that machine, so this was from a build of 3.2.1 patched)
>> 
>> -pd
>> 
>> On 05 Feb 2016, at 14:52 , Joseph Kunkel <joe at bio.umass.edu> wrote:
>> 
>>> To me there are big gorillas in the room and I need to know why I can not use them all.
>>> 
>>> ? Testing for physical and logical cpus on Joe's MacBook Pro.
>>> Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.physicalcpu
>>> 4
>>> Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.logicalcpu
>>> 8
>>> 
>>> Prior to about 2012 my multicore Macs would use all (physical) cores automagically in R.  %*% was multicore automatically.
>>> 
>>> A 24 hour heavy matrix calculation would take a little over 6 hours on a 4 core Mac.
>>> 
>>> Then some problem with the BLAS library changed everything and colleague stats people and I got really mad that we could not do our calculations as fast in R.
>>> 
>>> Many work-around libraries were devised which did not seem to be that useful for freewielding matrix operations.
>>> 
>>> Then Revolution R seemed to solve the problem and patented(?) it.  ? but not for Macs.
>>> 
>>> Recently they provided a free Mac version but using their R ?open' version messes up my computer for updating the libraries I am addicted to using.
>>> 
>>> My question after this appologeticlay long narrative is:
>>> 
>>> Why has no satisfactory and transparent method for multicore use been available to CRAN R?
>>> 
>>> Secondarily,  how could our R open software system be hijacked by Revolution and now Microsoft?
>>> 
>>> I would be pleased to know that there are colleagues out there who are similarly hoping for an R core solution within CRAN.
>>> 
>>> I can do primitive matrix things faster with Julia, which is encouraging, but the libraries and flexability for me are not there yet.
>>> 
>>> Joe
>>> 
>>> -?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
>>> Joseph G. Kunkel, Research Professor
>>> 112A Marine Science Center
>>> University of New England
>>> Biddeford ME 04005
>>> http://www.bio.umass.edu/biology/kunkel/
>>> 
>>> 
>>> 
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From joe at bio.umass.edu  Fri Feb  5 17:48:55 2016
From: joe at bio.umass.edu (Joseph Kunkel)
Date: Fri, 5 Feb 2016 11:48:55 -0500
Subject: [R-SIG-Mac] Multiple cores on a Mac
In-Reply-To: <A617502C-755E-4921-9457-D008D6EB8BE5@depauw.edu>
References: <56B49068.6040307@stats.ox.ac.uk>
	<BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>
	<B9F5D0EA-C2E0-424F-A51F-7554DCA35942@bio.umass.edu>
	<2747E5A6-C532-413A-9FE0-FAAF8857F02B@gmail.com>
	<A617502C-755E-4921-9457-D008D6EB8BE5@depauw.edu>
Message-ID: <B8559C5F-F28F-41C2-A07C-9553D7F8BFFA@bio.umass.edu>

Wow, thanks guys.  I am back to original speed with matrix operations as documented here.  As noted previously, this includes the 4 fold basic slowing of matrix operations on a single processor that occurred at the time of the change ~2012(?).  So I have approx 80/5 = 16 fold improvement!!!   I can do experiments and do a new experiment tomorrow based on the calculation!!!

Tests applied today II_5_2016:

*Test without vecLib option
 > source("http://www.bio.umass.edu/biology/kunkel/pub/R/CuriousResult.R")
 matrix multiplication      80.516   1.338   81.22 
 tcrossprod                 79.999   1.366  80.734 
 transposition and reuse    14.303   2.323   16.52 
 elementwise after reshape  11.088   1.776  12.774 
 columnwise sapply    22.781   9.631  32.137 
 for loop over columns      23.976   7.811  31.507 
 >q()
*apply unix adjustment # for vecLib use
> source("http://www.bio.umass.edu/biology/kunkel/pub/R/CuriousResult.R")
 matrix multiplication      19.595   1.188   5.389 
 tcrossprod                     19   1.175   4.702 
 transposition and reuse    14.113   2.416  16.432 
 elementwise after reshape  11.102   1.764  12.798 
 columnwise sapply    21.747   9.125  30.683 
 for loop over columns      23.243   6.458  29.515 

I have renewed faith!
Joe

> On Feb 5, 2016, at 10:20 AM, Bryan Hanson <hanson at depauw.edu> wrote:
> 
> On El Cap you can still pull off the symlink approach, as described here, without building R fresh:
> 
> http://blog.quadrivio.com/2015/06/improved-r-performance-with-openblas.html
> 
> The next time you launch R you will have the library you specified.
> 
> Bryan
> 
>> On Feb 5, 2016, at 10:03 AM, peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> Why me..?
>> 
>> Probably Simon and maybe Brian has the full recollection of the story, but as I understood it, once upon a time you could switch out the BLAS on CRAN R just by editing a symlink in the R installation. For some reason, that cannot work anymore (Apple considered symlinked libraries a security risk?). I think the current situation is that you can still do it, but you have to physically overwrite the default BLAS(? Simon will know.). 
>> 
>> At any rate, you can certainly still do a local compile with the Accelerate framework, once you get all the tools in place:
>> 
>>> M <- matrix(rnorm(1e8),10000)
>>> system.time(M %*% t(M))
>>  user  system elapsed 
>> 219.566   0.806  21.752 
>>> M <- crossprod(M)
>>> system.time(solve(M))
>>  user  system elapsed 
>> 310.874   1.477  29.998 
>> 
>> (To tell the truth, I actually don't have all the tools in place on that machine, so this was from a build of 3.2.1 patched)
>> 
>> -pd
>> 
>> On 05 Feb 2016, at 14:52 , Joseph Kunkel <joe at bio.umass.edu> wrote:
>> 
>>> To me there are big gorillas in the room and I need to know why I can not use them all.
>>> 
>>> ? Testing for physical and logical cpus on Joe's MacBook Pro.
>>> Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.physicalcpu
>>> 4
>>> Josephs-MacBook-Pro:~ josephgkunkel$ /usr/sbin/sysctl -n hw.logicalcpu
>>> 8
>>> 
>>> Prior to about 2012 my multicore Macs would use all (physical) cores automagically in R.  %*% was multicore automatically.
>>> 
>>> A 24 hour heavy matrix calculation would take a little over 6 hours on a 4 core Mac.
>>> 
>>> Then some problem with the BLAS library changed everything and colleague stats people and I got really mad that we could not do our calculations as fast in R.
>>> 
>>> Many work-around libraries were devised which did not seem to be that useful for freewielding matrix operations.
>>> 
>>> Then Revolution R seemed to solve the problem and patented(?) it.  ? but not for Macs.
>>> 
>>> Recently they provided a free Mac version but using their R ?open' version messes up my computer for updating the libraries I am addicted to using.
>>> 
>>> My question after this appologeticlay long narrative is:
>>> 
>>> Why has no satisfactory and transparent method for multicore use been available to CRAN R?
>>> 
>>> Secondarily,  how could our R open software system be hijacked by Revolution and now Microsoft?
>>> 
>>> I would be pleased to know that there are colleagues out there who are similarly hoping for an R core solution within CRAN.
>>> 
>>> I can do primitive matrix things faster with Julia, which is encouraging, but the libraries and flexability for me are not there yet.
>>> 
>>> Joe
>>> 
>>> -?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
>>> Joseph G. Kunkel, Research Professor
>>> 112A Marine Science Center
>>> University of New England
>>> Biddeford ME 04005
>>> http://www.bio.umass.edu/biology/kunkel/
>>> 
>>> 
>>> 
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From dusa.adrian at unibuc.ro  Fri Feb  5 18:24:16 2016
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Fri, 5 Feb 2016 19:24:16 +0200
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <56B49068.6040307@stats.ox.ac.uk>
References: <56B49068.6040307@stats.ox.ac.uk>
Message-ID: <CAJ=0CtCRPT8RYXZLSYkX9c5TwQc6XhhEniYDPEDtLPsheLqozg@mail.gmail.com>

On 10.9.5, Processor  2,7 GHz Intel Core i7, 2013

$ /usr/sbin/sysctl -n hw.physicalcpu
4
$ /usr/sbin/sysctl -n hw.logicalcpu
8


On Fri, Feb 5, 2016 at 2:07 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
wrote:

> sysctl on 10.11 has options which would enable us to differentiate between
> logical and physical codes on parallel::detectCores --- however these are
> not documented in Apple's online man pages, which are for 10.9.  Could
> someone running 10.9 and someone for 10.10 report if
>
> /usr/sbin/sysctl -n hw.physicalcpu
> /usr/sbin/sysctl -n hw.logicalcpu
>
> run in a terminal work and gives the correct result?  (Normally the second
> will be twice the first taking account of hyperthreading.)
>
> Thanks in advance.
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>



-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr.90
050663 Bucharest sector 5
Romania

	[[alternative HTML version deleted]]


From roy.mendelssohn at noaa.gov  Fri Feb  5 18:31:14 2016
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 5 Feb 2016 09:31:14 -0800
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <CAJ=0CtCRPT8RYXZLSYkX9c5TwQc6XhhEniYDPEDtLPsheLqozg@mail.gmail.com>
References: <56B49068.6040307@stats.ox.ac.uk>
	<CAJ=0CtCRPT8RYXZLSYkX9c5TwQc6XhhEniYDPEDtLPsheLqozg@mail.gmail.com>
Message-ID: <21A13D3D-A68C-472A-A94B-D12BFDB295D2@noaa.gov>

OSX 10.10.5 2.2 GHz Intel Core i7

mendels$ /usr/sbin/sysctl -n hw.physicalcpu
4
rmendels$ /usr/sbin/sysctl -n hw.logicalcpu
8

> On Feb 5, 2016, at 9:24 AM, Adrian Du?a <dusa.adrian at unibuc.ro> wrote:
> 
> On 10.9.5, Processor  2,7 GHz Intel Core i7, 2013
> 
> $ /usr/sbin/sysctl -n hw.physicalcpu
> 4
> $ /usr/sbin/sysctl -n hw.logicalcpu
> 8
> 
> 
> On Fri, Feb 5, 2016 at 2:07 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
> wrote:
> 
>> sysctl on 10.11 has options which would enable us to differentiate between
>> logical and physical codes on parallel::detectCores --- however these are
>> not documented in Apple's online man pages, which are for 10.9.  Could
>> someone running 10.9 and someone for 10.10 report if
>> 
>> /usr/sbin/sysctl -n hw.physicalcpu
>> /usr/sbin/sysctl -n hw.logicalcpu
>> 
>> run in a terminal work and gives the correct result?  (Normally the second
>> will be twice the first taking account of hyperthreading.)
>> 
>> Thanks in advance.
>> 
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Emeritus Professor of Applied Statistics, University of Oxford
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> 
> -- 
> Adrian Dusa
> University of Bucharest
> Romanian Social Data Archive
> Soseaua Panduri nr.90
> 050663 Bucharest sector 5
> Romania
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new address and phone***
110 Shaffer Road
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From dwinsemius at comcast.net  Fri Feb  5 18:55:40 2016
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 5 Feb 2016 09:55:40 -0800
Subject: [R-SIG-Mac] detecting cores
In-Reply-To: <BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>
References: <56B49068.6040307@stats.ox.ac.uk>
	<BC94B12A-B27E-485C-8AF8-D2FD7CB2F887@gmail.com>
Message-ID: <8E68396C-9BDB-4220-B62F-76E52294B1AD@comcast.net>


> On Feb 5, 2016, at 4:26 AM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Sorry, saw the bugzilla item first...
> 
> I have
> 
> Peters-iMac:IBP pd$ sysctl -n hw.ncpu
> 2
> Peters-iMac:IBP pd$ sysctl -n hw.physicalcpu
> 2
> Peters-iMac:IBP pd$ sysctl -n hw.logicalcpu
> 2
> Peters-iMac:IBP pd$ ssh appleserver
> Last login: Mon Dec 14 11:25:08 2015
> appleserver:~ pd$ sysctl -n hw.ncpu
> 24
> appleserver:~ pd$ sysctl -n hw.physicalcpu
> 12
> appleserver:~ pd$ sysctl -n hw.logicalcpu
> 24
> 
> both on Mavericks, 10.9.5. As you probably gathered (or remembered), the iMac is Core 2 Duo, so no hyperthreading. 

On El Cap running on the oldest macPro (early 2008), I think this earliest machine El Cap supports:

Model Identifier:	MacPro3,1
  Processor Name:	Quad-Core Intel Xeon
  Processor Speed:	2.8 GHz
  Number of Processors:	2
  Total Number of Cores:	8

I get:

$ /usr/sbin/sysctl -n hw.physicalcpu
8
$ /usr/sbin/sysctl -n hw.logicalcpu
8

-- 
David.

> 
> -pd
> 
> 
> On 05 Feb 2016, at 13:07 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> 
>> sysctl on 10.11 has options which would enable us to differentiate between logical and physical codes on parallel::detectCores --- however these are not documented in Apple's online man pages, which are for 10.9.  Could someone running 10.9 and someone for 10.10 report if
>> 
>> /usr/sbin/sysctl -n hw.physicalcpu
>> /usr/sbin/sysctl -n hw.logicalcpu
>> 
>> run in a terminal work and gives the correct result?  (Normally the second will be twice the first taking account of hyperthreading.)
>> 
>> Thanks in advance.
>> 
>> -- 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Emeritus Professor of Applied Statistics, University of Oxford
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

David Winsemius
Alameda, CA, USA


From wjm1 at caa.columbia.edu  Fri Feb  5 21:53:03 2016
From: wjm1 at caa.columbia.edu (William Michels)
Date: Fri, 5 Feb 2016 12:53:03 -0800
Subject: [R-SIG-Mac] detecting cores
Message-ID: <CAA99HCw+V13dY7FXNqKV3DkxZ_fd=EyJcRWkRw_eA83N1E=Ntw@mail.gmail.com>

A.
MacBook Pro (13-inch, Early 2015)
Processor: 3.1 GHz Intel Core i7
OSX Yosemite 10.10.5 (14F1605)
Last login: Fri Feb  5 12:20:26 on ttys083
bmacbook:~ wm$ /usr/sbin/sysctl -n hw.physicalcpu
2
bmacbook:~ wm$ /usr/sbin/sysctl -n hw.logicalcpu
4


B.
Just for kicks I fired up an old Mini:
Mac Mini mid_2010
Processor: 2.4 GHz Intel Core 2 Duo
Mac OS X Lion 10.7.5 (11G63)
Last login: Tue Dec  22 18:54:54 on console
bmini:~ wm$ /usr/sbin/sysctl -n hw.physicalcpu
2
bmini:~ wm$ /usr/sbin/sysctl -n hw.logicalcpu
2


From sgg64 at me.com  Wed Feb 10 20:10:03 2016
From: sgg64 at me.com (scott gilliland)
Date: Wed, 10 Feb 2016 15:10:03 -0400
Subject: [R-SIG-Mac] car and effects packages taking down R
Message-ID: <7805E100-1E0F-4B8B-9F58-FB47E458BC21@me.com>

I?m having some problems with the car and effects packages taking R down.  I sent a note to John Fox and followed his suggestions, i.e. run update.packages(ask=False) and try to load each of the packages on the Depends and Imports lists.  I did these and It seems that lme4 was the problem.  When I tried the lists of Depends and Imports for lme4 it appears that the problem maybe with minqa.  I have version 1.2.4 installed.   Not sure if you could help.

my session info is:

> sessionInfo()
R version 3.2.3 (2015-12-10)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.10.5 (Yosemite)

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_3.2.3

The Error message is:

[R.app GUI 1.66 (7060) x86_64-apple-darwin13.4.0]

[History restored from /Users/scottgilliland2/.Rhistory]

> library(Matrix)
> library(MASS)
> library(nlme)
> library(lattice)
> library(minqa)

*** caught segfault ***
address 0x318, cause 'memory not mapped'

Traceback:
1: dyn.load(file, DLLpath = DLLpath, ...)
2: library.dynam(lib, package, package.lib)
3: loadNamespace(package, c(which.lib.loc, lib.loc))
4: doTryCatch(return(expr), name, parentenv, handler)
5: tryCatchOne(expr, names, parentenv, handlers[[1L]])
6: tryCatchList(expr, classes, parentenv, handlers)
7: tryCatch(expr, error = function(e) {    call <- conditionCall(e)    if (!is.null(call)) {        if (identical(call[[1L]], quote(doTryCatch)))             call <- sys.call(-4L)        dcall <- deparse(call)[1L]        prefix <- paste("Error in", dcall, ": ")        LONG <- 75L        msg <- conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")        if (is.na(w))             w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],                 type = "b")        if (w > LONG)             prefix <- paste0(prefix, "\n  ")    }    else prefix <- "Error : "    msg <- paste0(prefix, conditionMessage(e), "\n")    .Internal(seterrmessage(msg[1L]))    if (!silent && identical(getOption("show.error.messages"),         TRUE)) {        cat(msg, file = stderr())        .Internal(printDeferredWarnings())    }    invisible(structure(msg, class = "try-error", condition = e))})
8: try({    ns <- loadNamespace(package, c(which.lib.loc, lib.loc))    env <- attachNamespace(ns, pos = pos, deps)})
9: library(minqa)

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace


Appreciate any advice.
Scott

From dwinsemius at comcast.net  Thu Feb 11 09:06:25 2016
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 11 Feb 2016 00:06:25 -0800
Subject: [R-SIG-Mac] failed compilation "ld: library not found for
	-lquadmath"
In-Reply-To: <CANLFJPp1ydmGK_9Va5UNgt5gdYYPyJD2DJpFr-4nWQuT01ht=A@mail.gmail.com>
References: <CANLFJPoF7jNkgh=pnceq=yT7BSHif41pUh_U+yLfSCRbt2Setw@mail.gmail.com>
	<CANLFJPp1ydmGK_9Va5UNgt5gdYYPyJD2DJpFr-4nWQuT01ht=A@mail.gmail.com>
Message-ID: <7041E512-38A6-47E5-BFEF-1AF8D940AA80@comcast.net>


> On May 25, 2015, at 3:16 AM, Baptiste Auguie <baptiste.auguie at gmail.com> wrote:
> 
> Hi,
> 
> Not sure my previous message ever got through, in any case I've solved the
> issue by installing a newer gfortran from
> http://r.research.att.com/libs/gfortran-4.8.2-darwin13.tar.bz2
> Note that the tools suggested at http://cran.r-project.org/bin/macosx/tools/
> are limited to version 4.2.3, while the link at
> http://r.research.att.com/tools/ (also for 4.2.3) is dead.

Not dead for me. Note that it says: "Make sure you add /usr/local/bin to your PATH in order to use this compiler. This can be done, e.g. by 
export PATH=$PATH:/usr/local/bin"

The link offered was:

http://r.research.att.com/gfortran-4.2.3.dmg

-- 
David.
> 
> Regards,
> 
> baptiste
> 
> On 24 May 2015 at 10:55, Baptiste Auguie <baptiste.auguie at gmail.com> wrote:
> 
>> Hi,
>> 
>> I've been unsuccessful in installing my own packages 'planar' and 'cda'
>> from source, since I updated my MacBook Pro to Yosemite. I have the latest
>> stable binary of R from CRAN, re-installed the latest Xcode via AppStore,
>> got gfortran from http://r.research.att.com/, and I still get a
>> compilation error. My guess is that I have inadvertently carried over an
>> older version of gcc from the previous OS, and R is looking for a different
>> one. The error message for planar goes like this,
>> 
>> R CMD INSTALL planar
>> * installing to library
>> ?/Library/Frameworks/R.framework/Versions/3.2/Resources/library?
>> * installing *source* package ?planar? ...
>> ** package ?planar? successfully unpacked and MD5 sums checked
>> ** libs
>> clang++ -dynamiclib -Wl,-headerpad_max_install_names -undefined
>> dynamic_lookup -single_module -multiply_defined suppress
>> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
>> planar.so collection.o gaussian_beam.o hcubature.o multilayer.o
>> -L/Library/Frameworks/R.framework/Resources/lib -lRlapack
>> -L/Library/Frameworks/R.framework/Resources/lib -lRblas
>> -L/usr/local/lib/gcc/x86_64-apple-darwin13.0.0/4.8.2 -lgfortran -lquadmath
>> -lm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>> -Wl,CoreFoundation
>> ld: warning: directory not found for option
>> '-L/usr/local/lib/gcc/x86_64-apple-darwin13.0.0/4.8.2'
>> ld: library not found for -lquadmath
>> clang: error: linker command failed with exit code 1 (use -v to see
>> invocation)
>> make: *** [planar.so] Error 1
>> ERROR: compilation failed for package ?planar?
>> * removing
>> ?/Library/Frameworks/R.framework/Versions/3.2/Resources/library/planar?
>> * restoring previous
>> ?/Library/Frameworks/R.framework/Versions/3.2/Resources/library/planar?
>> 
>> -------------------------
>> 
>> Indeed, the directory "/usr/local/lib/gcc/x86_64-apple-darwin13.0.0/4.8.2"
>> does not exist. The closest thing seems to be
>> "/usr/local/lib/gcc/i686-apple-darwin8",
>> 
>>> ls -R /usr/local/lib/gcc | tree
>>   |-------i686-apple-darwin8
>>   |---------4.2.3
>>   |-----------finclude
>>   |-----------x86_64
>>   |-------powerpc-apple-darwin8
>>   |---------4.2.3
>>   |-----------finclude
>>   |-----------ppc64
>> 
>> Could it be enough to set a few compilation flags to point R to the right
>> gcc libraries? (not sure how)
>> 
>> Best regards,
>> 
>> baptiste
>> 
>> ----- session info -----
>> 
>>> sessionInfo()
>> R version 3.2.0 Patched (2015-05-21 r68393)
>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>> Running under: OS X 10.10.3 (Yosemite)
>> 
>> locale:
>> [1] en_NZ.UTF-8/en_NZ.UTF-8/en_NZ.UTF-8/C/en_NZ.UTF-8/en_NZ.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> loaded via a namespace (and not attached):
>> [1] tools_3.2.0
>> 
>>> Sys.getenv()
>> __CF_USER_TEXT_ENCODING     0x1F5:0x0:0x0
>> Apple_PubSub_Socket_Render
>> 
>> /private/tmp/com.apple.launchd.2pqH8flWmK/Render
>> DISPLAY
>> /private/tmp/com.apple.launchd.e31xJhIRZF/org.macosforge.xquartz:0
>> DYLD_FALLBACK_LIBRARY_PATH
>> 
>> /Users/baptiste/lib:/usr/local/lib:/usr/lib::/Library/Frameworks/R.framework/Resources/lib
>> EDITOR                      vi
>> GIT_ASKPASS                 rpostback-askpass
>> HOME                        /Users/baptiste
>> LANG                        en_NZ.UTF-8
>> LC_CTYPE                    en_NZ.UTF-8
>> LN_S                        ln -s
>> LOGNAME                     baptiste
>> MAKE                        make
>> PAGER                       /usr/bin/less
>> PATH
>> /usr/bin:/bin:/usr/sbin:/sbin:/usr/texbin:/usr/local/bin:/opt/X11/bin
>> PDFLATEX                    /usr/texbin/pdflatex
>> R_BROWSER                   /usr/bin/open
>> R_BZIPCMD                   /usr/bin/bzip2
>> R_DOC_DIR                   /Library/Frameworks/R.framework/Resources/doc
>> R_GZIPCMD                   /usr/bin/gzip
>> R_HOME                      /Library/Frameworks/R.framework/Resources
>> R_INCLUDE_DIR
>> /Library/Frameworks/R.framework/Resources/include
>> R_LIBS_SITE
>> R_LIBS_USER                 ~/Library/R/3.2/library
>> R_PAPERSIZE                 a4
>> R_PDFVIEWER                 /usr/bin/open
>> R_PLATFORM                  x86_64-apple-darwin13.4.0
>> R_PRINTCMD                  lpr
>> R_QPDF
>> /Library/Frameworks/R.framework/Resources/bin/qpdf
>> R_RD4PDF                    times,inconsolata,hyper
>> R_SESSION_TMPDIR
>> /var/folders/nh/4719qghd3bz60tc_n28062840000gn/T//RtmpNqgTMe
>> R_SHARE_DIR                 /Library/Frameworks/R.framework/Resources/share
>> R_SYSTEM_ABI                osx,gcc,gxx,gfortran,?
>> R_TEXI2DVICMD               /usr/local/bin/texi2dvi
>> R_UNZIPCMD                  /usr/bin/unzip
>> R_ZIPCMD                    /usr/bin/zip
>> RMARKDOWN_MATHJAX_PATH
>> /Applications/RStudio.app/Contents/Resources/resources/mathjax-23
>> RS_RPOSTBACK_PATH
>> /Applications/RStudio.app/Contents/MacOS/rpostback
>> RS_SHARED_SECRET            8dfae406-353d-44e7-bf9a-12efa87271a8
>> RSTUDIO                     1
>> RSTUDIO_PANDOC              /Applications/RStudio.app/Contents/MacOS/pandoc
>> RSTUDIO_SESSION_PORT        33826
>> RSTUDIO_USER_IDENTITY       baptiste
>> SED                         /usr/bin/sed
>> SHELL                       /bin/bash
>> SSH_AUTH_SOCK
>> /private/tmp/com.apple.launchd.v82zIG6NDp/Listeners
>> TAR                         /usr/bin/tar
>> TMPDIR
>> /var/folders/nh/4719qghd3bz60tc_n28062840000gn/T/
>> USER                        baptiste
>> XPC_FLAGS                   0x0
>> XPC_SERVICE_NAME            0
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

David Winsemius
Alameda, CA, USA


From drf at vims.edu  Thu Feb 11 09:39:54 2016
From: drf at vims.edu (David R Forrest)
Date: Thu, 11 Feb 2016 08:39:54 +0000
Subject: [R-SIG-Mac] R stats: not recognising 'F' as 'FALSE'
In-Reply-To: <CAPxuO-Lvs1PuQptOkMRUVX3YVVroBP5i0mD_yLob9gg_BBbn3A@mail.gmail.com>
References: <CAPxuO-Lvs1PuQptOkMRUVX3YVVroBP5i0mD_yLob9gg_BBbn3A@mail.gmail.com>
Message-ID: <47D84C57-C78B-4465-BA31-9E546FD04B82@vims.edu>

Is F defined as anything unusual?

> F
[1] FALSE
> pt(q=1.12, df=12, lower.tail=F)
[1] 0.1423149
> F<- pi
> pt(q=1.12, df=12, lower.tail=F)
[1] 0.8576851
> F<- FALSE
> pt(q=1.12, df=12, lower.tail=F)
[1] 0.1423149
> 


> On Oct 30, 2015, at 12:30 PM, Liam Shaw <liam.shaw.13 at ucl.ac.uk> wrote:
> 
> A student noticed that passing 'F' for 'FALSE' did not have an effect when
> using functions in the stats base package.
> 
> Example:
> 
>> pt(q=1.12, df=12, lower.tail=TRUE)
> [1] 0.8576851
>> pt(q=1.12, df=12, lower.tail=F)
> [1] 0.8576851
>> pt(q=1.12, df=12, lower.tail=FALSE)
> [1] 0.1423149
> 
> I couldn't replicate the problem. Re-installing and updating R on their
> machine had no effect. Does anybody know what could be causing this?
> 
> sessionInfo():
> R version 3.2.2 (2015-08-14)
> Platform: x86_64-apple-darwin13.4.0 (64-bit)
> Running under: OS X 10.11 (El Capitan)
> 
> locale:
> [1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets
> [6] methods   base
> 
> loaded via a namespace (and not attached):
> [1] tools_3.2.2
> 
> Stats package:
> Package: stats
> Version: 3.2.2
> Priority: base
> Title: The R Stats Package
> Author: R Core Team and contributors worldwide
> Maintainer: R Core Team <R-core at r-project.org>
> Description: R statistical functions.
> License: Part of R 3.2.2
> Built: R 3.2.2; x86_64-apple-darwin13.4.0
> 
> Liam
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

--
Dr. David Forrest
drf at vims.edu
804-684-7900w
757-968-5509h
804-413-7125c
#240 Andrews Hall
Virginia Institute of Marine Science
Route 1208, Greate Road
PO Box 1346
Gloucester Point, VA, 23062-1346


From murdoch.duncan at gmail.com  Thu Feb 11 10:13:12 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 11 Feb 2016 04:13:12 -0500
Subject: [R-SIG-Mac] R stats: not recognising 'F' as 'FALSE'
In-Reply-To: <CAPxuO-Lvs1PuQptOkMRUVX3YVVroBP5i0mD_yLob9gg_BBbn3A@mail.gmail.com>
References: <CAPxuO-Lvs1PuQptOkMRUVX3YVVroBP5i0mD_yLob9gg_BBbn3A@mail.gmail.com>
Message-ID: <56BC50A8.50906@gmail.com>

On 30/10/2015 12:30 PM, Liam Shaw wrote:
> A student noticed that passing 'F' for 'FALSE' did not have an effect when
> using functions in the stats base package.
>
> Example:
>
>> pt(q=1.12, df=12, lower.tail=TRUE)
> [1] 0.8576851
>> pt(q=1.12, df=12, lower.tail=F)
> [1] 0.8576851
>> pt(q=1.12, df=12, lower.tail=FALSE)
> [1] 0.1423149
>
> I couldn't replicate the problem. Re-installing and updating R on their
> machine had no effect. Does anybody know what could be causing this?

F is a variable.  If the student says

F <- 1

it would have that effect.  This is why we recommend that you never use 
F when you want FALSE.

Duncan Murdoch


From bob at rudis.net  Thu Feb 11 12:51:09 2016
From: bob at rudis.net (boB Rudis)
Date: Thu, 11 Feb 2016 06:51:09 -0500
Subject: [R-SIG-Mac] Non-root OS X installation?
In-Reply-To: <B3055815-D7A7-4540-B27A-E05049F9E8FE@brandenwilliams.com>
References: <B3055815-D7A7-4540-B27A-E05049F9E8FE@brandenwilliams.com>
Message-ID: <CAJ4QxaPo5YAkuicjaS+eMU4ktQ2Y9i2aqo_VGjuQfL2oULx8Ng@mail.gmail.com>

You can follow <http://superuser.com/questions/939070/a-self-contained-r-in-os-x>
(on another Mac) and then set your R pkg lib to a local, writeable
dir. Upgrading R will be a pain and if you don't have compiler tools
installed, usage of source or some github-released pkgs will be
difficult (install on another mac and then copy over to your work
restricted one).

On Sat, May 2, 2015 at 10:25 AM, Branden R. Williams
<brw at brandenwilliams.com> wrote:
> Greetings. I am getting a new mac procured through my company, and I am pretty sure I?m not going to have local administrator access to it. Is there a clean way to install R locally for one user, including all the packages that might be required, so that I don?t need admin access?
>
> thx.
>
> Regards,
>
> Branden R. Williams, DBA, CISSP, CISM
> brw at brandenwilliams.com
> Phone: +1 (214) 727-8227
>
> http://www.brandenwilliams.com/
> Cal: http://meetme.so/drbrando
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From cmswan at umbc.edu  Thu Feb 11 16:07:43 2016
From: cmswan at umbc.edu (Chris Swan)
Date: Thu, 11 Feb 2016 10:07:43 -0500
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
Message-ID: <52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>

No - never got a solution - 

---
Christopher M. Swan, Ph.D.
Professor
Dept. of Geography & Environmental Systems
University of Maryland, Baltimore County
211 Sondheim Hall
1000 Hilltop Circle
Baltimore, MD 21250 USA
http://biodiversity.umbc.edu
http://orcid.org/0000-0002-9763-9630
http://scholar.google.com/citations?user=NNfHt5YAAAAJ
1.410.455.3957

> On Aug 6, 2015, at 8:23 PM, Moriarty,Vincent W <vincent.moriarty at csun.edu> wrote:
> 
> Hi Christopher,
> 
> I just came across your post online concerning R freezing. I?ve been having this same problem for many months now over multiple machines. Did you ever find a satisfactory answer for this issue?
> 
> 
> Cheers,
> 
> Vincent
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From murdoch.duncan at gmail.com  Thu Feb 11 16:22:01 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 11 Feb 2016 10:22:01 -0500
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
Message-ID: <56BCA719.1040704@gmail.com>

Have you tried recent nightly builds from http://r.research.att.com/?  
Some bugs with the data editor were recently fixed; I think those were 
specific to it, but maybe more got fixed at the same time.

Duncan Murdoch

On 11/02/2016 10:07 AM, Chris Swan wrote:
> No - never got a solution -
>
> ---
> Christopher M. Swan, Ph.D.
> Professor
> Dept. of Geography & Environmental Systems
> University of Maryland, Baltimore County
> 211 Sondheim Hall
> 1000 Hilltop Circle
> Baltimore, MD 21250 USA
> http://biodiversity.umbc.edu
> http://orcid.org/0000-0002-9763-9630
> http://scholar.google.com/citations?user=NNfHt5YAAAAJ
> 1.410.455.3957
>
> > On Aug 6, 2015, at 8:23 PM, Moriarty,Vincent W <vincent.moriarty at csun.edu> wrote:
> >
> > Hi Christopher,
> >
> > I just came across your post online concerning R freezing. I?ve been having this same problem for many months now over multiple machines. Did you ever find a satisfactory answer for this issue?
> >
> >
> > Cheers,
> >
> > Vincent
> >
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From jkunkel1 at une.edu  Thu Feb 11 16:50:13 2016
From: jkunkel1 at une.edu (Joseph Kunkel)
Date: Thu, 11 Feb 2016 15:50:13 +0000
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <56BCA719.1040704@gmail.com>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
	<56BCA719.1040704@gmail.com>
Message-ID: <7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>

I have the same problem over many updates of R for my Mac.   After I load one R-script into the editor and run it, trying to open another script or trying to change my working directory results in R-gui freeze up.  In rebooting R I end up with the old R-script coming up in the editor and I must close it and close R once again before I can reboot R yet once again and start working bing aware that I must not try to open anothe R-scrip in the editor after a script has run or R-gui will lock up again.

With respect to the suggestion to 'tr(Y) recent nightly builds from http://r.research.att.com/', it is the developer?s page and the link to the R-gui nightly build loops back to the same page with no clear option of how to load a new build of the R-gui.

There seems to be a hell-hole of problems with the recent updates of R.  But my ver R 3.2.3 GUI 1.66 Mavericks build (7060) query  says that I am up to date with nothing to upgrade.  I would choose not to upgrade entire R if it is having problems with its ?nightly build?.

??? what to do with this problem which was ignored the last time I posted it, similar to Dr. Swan?s experience.

Joe

-?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
Joseph G. Kunkel, Research Professor
112A Marine Science Center
University of New England
Biddeford ME 04005
http://www.bio.umass.edu/biology/kunkel/

> On Feb 11, 2016, at 10:22 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> Have you tried recent nightly builds from http://r.research.att.com/?  Some bugs with the data editor were recently fixed; I think those were specific to it, but maybe more got fixed at the same time.
> 
> Duncan Murdoch
> 
> On 11/02/2016 10:07 AM, Chris Swan wrote:
>> No - never got a solution -
>> 
>> ---
>> Christopher M. Swan, Ph.D.
>> Professor
>> Dept. of Geography & Environmental Systems
>> University of Maryland, Baltimore County
>> 211 Sondheim Hall
>> 1000 Hilltop Circle
>> Baltimore, MD 21250 USA
>> http://biodiversity.umbc.edu
>> http://orcid.org/0000-0002-9763-9630
>> http://scholar.google.com/citations?user=NNfHt5YAAAAJ
>> 1.410.455.3957
>> 
>> > On Aug 6, 2015, at 8:23 PM, Moriarty,Vincent W <vincent.moriarty at csun.edu> wrote:
>> >
>> > Hi Christopher,
>> >
>> > I just came across your post online concerning R freezing. I?ve been having this same problem for many months now over multiple machines. Did you ever find a satisfactory answer for this issue?
>> >
>> >
>> > Cheers,
>> >
>> > Vincent
>> >
>> >
>> > _______________________________________________
>> > R-SIG-Mac mailing list
>> > R-SIG-Mac at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From john.magnotti at gmail.com  Thu Feb 11 17:14:17 2016
From: john.magnotti at gmail.com (John Magnotti)
Date: Thu, 11 Feb 2016 10:14:17 -0600
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
	<56BCA719.1040704@gmail.com>
	<7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
Message-ID: <CAHT0qpQOSB6N3+pjEqHriWNTRWUHzin=YBZwFVQu4Dwo95BG=w@mail.gmail.com>

My colleague and I have experienced similar problems for a while.

Although I don't necessarily recommend it, we've switched to RStudio in the
meantime. Now that RStudio allows for splitting code files into separate
windows, you can create a reasonably similar experience to R-gui.


John

On Thu, Feb 11, 2016 at 9:50 AM, Joseph Kunkel <jkunkel1 at une.edu> wrote:

> I have the same problem over many updates of R for my Mac.   After I load
> one R-script into the editor and run it, trying to open another script or
> trying to change my working directory results in R-gui freeze up.  In
> rebooting R I end up with the old R-script coming up in the editor and I
> must close it and close R once again before I can reboot R yet once again
> and start working bing aware that I must not try to open anothe R-scrip in
> the editor after a script has run or R-gui will lock up again.
>
> With respect to the suggestion to 'tr(Y) recent nightly builds from
> http://r.research.att.com/', it is the developer?s page and the link to
> the R-gui nightly build loops back to the same page with no clear option of
> how to load a new build of the R-gui.
>
> There seems to be a hell-hole of problems with the recent updates of R.
> But my ver R 3.2.3 GUI 1.66 Mavericks build (7060) query  says that I am up
> to date with nothing to upgrade.  I would choose not to upgrade entire R if
> it is having problems with its ?nightly build?.
>
> ??? what to do with this problem which was ignored the last time I posted
> it, similar to Dr. Swan?s experience.
>
> Joe
>
> -?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-
>    =?}}}}}><
> Joseph G. Kunkel, Research Professor
> 112A Marine Science Center
> University of New England
> Biddeford ME 04005
> http://www.bio.umass.edu/biology/kunkel/
>
> > On Feb 11, 2016, at 10:22 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
> >
> > Have you tried recent nightly builds from http://r.research.att.com/?
> Some bugs with the data editor were recently fixed; I think those were
> specific to it, but maybe more got fixed at the same time.
> >
> > Duncan Murdoch
> >
> > On 11/02/2016 10:07 AM, Chris Swan wrote:
> >> No - never got a solution -
> >>
> >> ---
> >> Christopher M. Swan, Ph.D.
> >> Professor
> >> Dept. of Geography & Environmental Systems
> >> University of Maryland, Baltimore County
> >> 211 Sondheim Hall
> >> 1000 Hilltop Circle
> >> Baltimore, MD 21250 USA
> >> http://biodiversity.umbc.edu
> >> http://orcid.org/0000-0002-9763-9630
> >> http://scholar.google.com/citations?user=NNfHt5YAAAAJ
> >> 1.410.455.3957
> >>
> >> > On Aug 6, 2015, at 8:23 PM, Moriarty,Vincent W <
> vincent.moriarty at csun.edu> wrote:
> >> >
> >> > Hi Christopher,
> >> >
> >> > I just came across your post online concerning R freezing. I?ve been
> having this same problem for many months now over multiple machines. Did
> you ever find a satisfactory answer for this issue?
> >> >
> >> >
> >> > Cheers,
> >> >
> >> > Vincent
> >> >
> >> >
> >> > _______________________________________________
> >> > R-SIG-Mac mailing list
> >> > R-SIG-Mac at r-project.org
> >> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu Feb 11 17:17:04 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 11 Feb 2016 11:17:04 -0500
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
	<56BCA719.1040704@gmail.com>
	<7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
Message-ID: <56BCB400.2070600@gmail.com>

On 11/02/2016 10:50 AM, Joseph Kunkel wrote:
> I have the same problem over many updates of R for my Mac.   After I load one R-script into the editor and run it, trying to open another script or trying to change my working directory results in R-gui freeze up.  In rebooting R I end up with the old R-script coming up in the editor and I must close it and close R once again before I can reboot R yet once again and start working bing aware that I must not try to open anothe R-scrip in the editor after a script has run or R-gui will lock up again.
>
> With respect to the suggestion to 'tr(Y) recent nightly builds from http://r.research.att.com/', it is the developer?s page and the link to the R-gui nightly build loops back to the same page with no clear option of how to load a new build of the R-gui.
>
> There seems to be a hell-hole of problems with the recent updates of R.  But my ver R 3.2.3 GUI 1.66 Mavericks build (7060) query  says that I am up to date with nothing to upgrade.  I would choose not to upgrade entire R if it is having problems with its ?nightly build?.
>
You really should try the nightly build.  I am using R.app 7116 
Mavericks build in OS X 10.11.3 (El Capitan), and am not seeing these 
problems.

The latest build for your version of R is labelled 
_"__R-GUI-7128-3.2-mavericks-Release.dm_g__". 
<http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>

That links to 
<http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>. 
I don't see a loop.

> ??? what to do with this problem which was ignored the last time I posted it, similar to Dr. Swan?s experience.

I don't know when you posted that message, but I'd guess you were given 
the advice you quote above, and you didn't follow it.

Duncan Murdoch


From jkunkel1 at une.edu  Sat Feb 13 19:42:33 2016
From: jkunkel1 at une.edu (Joseph Kunkel)
Date: Sat, 13 Feb 2016 18:42:33 +0000
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <56BCB400.2070600@gmail.com>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
	<56BCA719.1040704@gmail.com>
	<7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
	<56BCB400.2070600@gmail.com>
Message-ID: <84634E2A-5876-4F42-9792-C3B34F06C37A@une.edu>

Sorry, but the freezing of the R-gui still persists:

Previously I had downloaded the latest version of R from the CRAN directory for my Os X  MacBook Pro (Retina, 15-inch, Early 2013). The R-gui check on R upgrades suggested my R was up-to-date with no upgrades available.

In that situation I experienced the R-gui freeze-up that I and others have alluded to before.

On Duncans advice (Feb 11, 2 days ago) I tried the suggested nightly build and then ran one of my R scripts from the initial directory I had set in the R-gui preferences menu R-startup menu which was still the default det from the previous build.   R opened with the appropriately set working directory:

R version 3.2.3 (2015-12-10) -- "Wooden Christmas-Tree?
?
[R.app GUI 1.67 (7128) x86_64-apple-darwin13.4.0]

I then ran a R-script to completion. ? {I read somewhere that garbage collection is automatic and forcing it is only informational and does not improve a situation}. Despite that I have tried garbage collection.  ...  And I then tried to load another R-script into the editor from the same working directory.

The R-gui froze with a rotating rainbow icon.

I use my Terminal window to find and kill the R-process:

Josephs-MacBook-Pro:~ josephgkunkel$ ps -x
...
6533 ??         9:44.90 /Applications/R.app/Contents/MacOS/R

Josephs-MacBook-Pro:~ josephgkunkel$ kill 6533

I then rebooted R:

R version 3.2.3 (2015-12-10) -- "Wooden Christmas-Tree?
?
[R.app GUI 1.67 (7128) x86_64-apple-darwin13.4.0]

[Workspace restored from /Users/josephgkunkel/Documents/Analysis/AVI_M2C_0.5/spiral/spiral1a/.RData]
[History restored from /Users/josephgkunkel/Documents/Analysis/AVI_M2C_0.5/spiral/spiral1a/.Rapp.history]

In addition the R-script that had been loaded into the editor at the freeze was auto-loaded.

At this point I try to load the new R-script that I had wanted to load when the R-gui froze. ...

The R-gui freezes again (because I did not close the opened R-script and close R and reopen it before trying to load the new R-script.

{Something is wrong with the gui at this point!  Something, such as a log, saved prior to the R-gui freezing is now directing things.  Why else would a new reboot result in a freezup with a ordinary operation. }

To run R successfully I must (1) re-kill the R process. (2) Boot the R-gui.  (3) Close any R-scripts that are brought up in the default editor. (4) Close the R-gui using the gui red-dot icon or q(). (5) Reboot the R-gui.  

When opened in this manner I can load several R-scripts into the editor but after running any substantial R-script I should not try to load another into the editor -or- change the working directory.

I can run another R-script.

QUESTION to Duncan:  Is the above reported R version and GUI version not yet the correct R-gui build?

One clue?   After a freeze and reboot of R, the Rgui pulldown menu "File/Recent" initially shows "Clear Menu? rather than a list.   Retry still gives "Clear Menu?.
   After looking there repeatedly and getting "Clear Menu? and one 'goes somewhere else and does something else' and then comes back  to "File/Recent?, a list of appropriate old loads now appears ?automagically?.  Then the loading of a new R-script works from this list ... but not via the ?Open in Editor? icon. 

Another clue:  The R-scripts I run are often pretty heavy rgl library 3d function plotting programs that load v. large data sets and then in some cases create rotating movies that generate frames that are saved ? the whole process taking up to an hour+.  Could this lead to 'memory leaks' that stomp on critical log files or parameters/variables that save critical info for process survival?  Occasinally the R process complains that I need to shut down non-essential processes that are using valuable memory.

Shorter uses of rgl do not cause gui freezes however the protocol to recover from a gui freeze is still disconcertingly laborious.  
 
Joe

-?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
Joseph G. Kunkel, Research Professor
112A Marine Science Center
University of New England
Biddeford ME 04005
http://www.bio.umass.edu/biology/kunkel/

> On Feb 11, 2016, at 11:17 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 11/02/2016 10:50 AM, Joseph Kunkel wrote:
>> I have the same problem over many updates of R for my Mac.   After I load one R-script into the editor and run it, trying to open another script or trying to change my working directory results in R-gui freeze up.  In rebooting R I end up with the old R-script coming up in the editor and I must close it and close R once again before I can reboot R yet once again and start working bing aware that I must not try to open anothe R-scrip in the editor after a script has run or R-gui will lock up again.
>> 
>> With respect to the suggestion to 'tr(Y) recent nightly builds from http://r.research.att.com/', it is the developer?s page and the link to the R-gui nightly build loops back to the same page with no clear option of how to load a new build of the R-gui.
>> 
>> There seems to be a hell-hole of problems with the recent updates of R.  But my ver R 3.2.3 GUI 1.66 Mavericks build (7060) query  says that I am up to date with nothing to upgrade.  I would choose not to upgrade entire R if it is having problems with its ?nightly build?.
>> 
> You really should try the nightly build.  I am using R.app 7116 Mavericks build in OS X 10.11.3 (El Capitan), and am not seeing these problems.
> 
> The latest build for your version of R is labelled _"__R-GUI-7128-3.2-mavericks-Release.dm_g__". <http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>
> 
> That links to <http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>. I don't see a loop.
> 
>> ??? what to do with this problem which was ignored the last time I posted it, similar to Dr. Swan?s experience.
> 
> I don't know when you posted that message, but I'd guess you were given the advice you quote above, and you didn't follow it.
> 
> Duncan Murdoch


From murdoch.duncan at gmail.com  Sat Feb 13 22:17:10 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 13 Feb 2016 16:17:10 -0500
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <84634E2A-5876-4F42-9792-C3B34F06C37A@une.edu>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
	<56BCA719.1040704@gmail.com>
	<7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
	<56BCB400.2070600@gmail.com>
	<84634E2A-5876-4F42-9792-C3B34F06C37A@une.edu>
Message-ID: <56BF9D56.6040905@gmail.com>

On 13/02/2016 1:42 PM, Joseph Kunkel wrote:
> Sorry, but the freezing of the R-gui still persists:
>
> Previously I had downloaded the latest version of R from the CRAN directory for my Os X  MacBook Pro (Retina, 15-inch, Early 2013). The R-gui check on R upgrades suggested my R was up-to-date with no upgrades available.
>
> In that situation I experienced the R-gui freeze-up that I and others have alluded to before.

You mention way down below that this only happens in very long running 
scripts using rgl and lots of memory.  I don't think that's typical of 
others with similar complaints.  I'd guess something in the mix isn't 
responding well to a memory allocation failure, but I really have no 
idea what it would be.

I'd suggest running the whole thing in a debugger, and once the apparent 
lockup occurs, interrupt the process and see if you can figure out what 
is happening.  But it isn't going to be easy.

The other suggestion would be to simplify things until you have less 
moving parts involved.  Does it need rgl?  Does it need the R.app GUI? 
Does it need whatever software you are using to produce movies?  Cut it 
down to a minimal reproducible example, and post that here.

Duncan Murdoch

>
> On Duncans advice (Feb 11, 2 days ago) I tried the suggested nightly build and then ran one of my R scripts from the initial directory I had set in the R-gui preferences menu R-startup menu which was still the default det from the previous build.   R opened with the appropriately set working directory:
>
> R version 3.2.3 (2015-12-10) -- "Wooden Christmas-Tree?
> ?
> [R.app GUI 1.67 (7128) x86_64-apple-darwin13.4.0]
>
> I then ran a R-script to completion. ? {I read somewhere that garbage collection is automatic and forcing it is only informational and does not improve a situation}. Despite that I have tried garbage collection.  ...  And I then tried to load another R-script into the editor from the same working directory.
>
> The R-gui froze with a rotating rainbow icon.
>
> I use my Terminal window to find and kill the R-process:
>
> Josephs-MacBook-Pro:~ josephgkunkel$ ps -x
> ...
> 6533 ??         9:44.90 /Applications/R.app/Contents/MacOS/R
>
> Josephs-MacBook-Pro:~ josephgkunkel$ kill 6533
>
> I then rebooted R:
>
> R version 3.2.3 (2015-12-10) -- "Wooden Christmas-Tree?
> ?
> [R.app GUI 1.67 (7128) x86_64-apple-darwin13.4.0]
>
> [Workspace restored from /Users/josephgkunkel/Documents/Analysis/AVI_M2C_0.5/spiral/spiral1a/.RData]
> [History restored from /Users/josephgkunkel/Documents/Analysis/AVI_M2C_0.5/spiral/spiral1a/.Rapp.history]
>
> In addition the R-script that had been loaded into the editor at the freeze was auto-loaded.
>
> At this point I try to load the new R-script that I had wanted to load when the R-gui froze. ...
>
> The R-gui freezes again (because I did not close the opened R-script and close R and reopen it before trying to load the new R-script.
>
> {Something is wrong with the gui at this point!  Something, such as a log, saved prior to the R-gui freezing is now directing things.  Why else would a new reboot result in a freezup with a ordinary operation. }
>
> To run R successfully I must (1) re-kill the R process. (2) Boot the R-gui.  (3) Close any R-scripts that are brought up in the default editor. (4) Close the R-gui using the gui red-dot icon or q(). (5) Reboot the R-gui.
>
> When opened in this manner I can load several R-scripts into the editor but after running any substantial R-script I should not try to load another into the editor -or- change the working directory.
>
> I can run another R-script.
>
> QUESTION to Duncan:  Is the above reported R version and GUI version not yet the correct R-gui build?
>
> One clue?   After a freeze and reboot of R, the Rgui pulldown menu "File/Recent" initially shows "Clear Menu? rather than a list.   Retry still gives "Clear Menu?.
>     After looking there repeatedly and getting "Clear Menu? and one 'goes somewhere else and does something else' and then comes back  to "File/Recent?, a list of appropriate old loads now appears ?automagically?.  Then the loading of a new R-script works from this list ... but not via the ?Open in Editor? icon.
>
> Another clue:  The R-scripts I run are often pretty heavy rgl library 3d function plotting programs that load v. large data sets and then in some cases create rotating movies that generate frames that are saved ? the whole process taking up to an hour+.  Could this lead to 'memory leaks' that stomp on critical log files or parameters/variables that save critical info for process survival?  Occasinally the R process complains that I need to shut down non-essential processes that are using valuable memory.
>
> Shorter uses of rgl do not cause gui freezes however the protocol to recover from a gui freeze is still disconcertingly laborious.
>
> Joe
>
> -?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
> Joseph G. Kunkel, Research Professor
> 112A Marine Science Center
> University of New England
> Biddeford ME 04005
> http://www.bio.umass.edu/biology/kunkel/
>
>> On Feb 11, 2016, at 11:17 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 11/02/2016 10:50 AM, Joseph Kunkel wrote:
>>> I have the same problem over many updates of R for my Mac.   After I load one R-script into the editor and run it, trying to open another script or trying to change my working directory results in R-gui freeze up.  In rebooting R I end up with the old R-script coming up in the editor and I must close it and close R once again before I can reboot R yet once again and start working bing aware that I must not try to open anothe R-scrip in the editor after a script has run or R-gui will lock up again.
>>>
>>> With respect to the suggestion to 'tr(Y) recent nightly builds from http://r.research.att.com/', it is the developer?s page and the link to the R-gui nightly build loops back to the same page with no clear option of how to load a new build of the R-gui.
>>>
>>> There seems to be a hell-hole of problems with the recent updates of R.  But my ver R 3.2.3 GUI 1.66 Mavericks build (7060) query  says that I am up to date with nothing to upgrade.  I would choose not to upgrade entire R if it is having problems with its ?nightly build?.
>>>
>> You really should try the nightly build.  I am using R.app 7116 Mavericks build in OS X 10.11.3 (El Capitan), and am not seeing these problems.
>>
>> The latest build for your version of R is labelled _"__R-GUI-7128-3.2-mavericks-Release.dm_g__". <http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>
>>
>> That links to <http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>. I don't see a loop.
>>
>>> ??? what to do with this problem which was ignored the last time I posted it, similar to Dr. Swan?s experience.
>>
>> I don't know when you posted that message, but I'd guess you were given the advice you quote above, and you didn't follow it.
>>
>> Duncan Murdoch
>


From bhh at xs4all.nl  Sun Feb 14 10:22:54 2016
From: bhh at xs4all.nl (Berend Hasselman)
Date: Sun, 14 Feb 2016 10:22:54 +0100
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
Message-ID: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>

I have installed rJava, xlsx, xlsxjars, XLConnect and XLConnectJars.

Executing library(xlsx) gives this output

Loading required package: rJava
Loading required package: xlsxjars
Error : .onLoad failed in loadNamespace() for 'xlsx', details:
  call: .jinit()
  error: JNI_GetCreatedJavaVMs returned -1

Error: package or namespace load failed for 'xlsx'
JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
JavaVM FATAL: Failed to load the jvm library.


Executing library(XLConnect) gives this output

Loading required package: XLConnectJars
Error : .onLoad failed in loadNamespace() for 'XLConnectJars', details:
  call: .jinit()
  error: JNI_GetCreatedJavaVMs returned -1

Error: package 'XLConnectJars' could not be loaded
JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
JavaVM FATAL: Failed to load the jvm library.


sessionInfo (after library(xlsx) and library(XLConnect)) and javareconf output below.

What is going on?
What is the solution for this problem?

Berend Hasselman


SessionInfo:

R version 3.2.3 Patched (2016-02-13 r70160)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.11.3 (El Capitan)

locale:
[1] en_IE.UTF-8/en_IE.UTF-8/en_IE.UTF-8/C/en_IE.UTF-8/en_IE.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] xlsxjars_0.6.1 rJava_0.9-8

loaded via a namespace (and not attached):
[1] tools_3.2.3


Output of R CMD javareconf

[.../~]: R CMD javareconf -n
Java interpreter : /usr/bin/java
Java version     : 1.8.0_25
Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
Java compiler    : /usr/bin/javac
Java headers gen.: /usr/bin/javah
Java archive tool: /usr/bin/jar
Non-system Java on OS X

trying to compile and link a JNI program
detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation

JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
Java library path: $(JAVA_HOME)/lib/server
JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm


From ripley at stats.ox.ac.uk  Sun Feb 14 11:48:53 2016
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 14 Feb 2016 10:48:53 +0000
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
Message-ID: <56C05B95.40303@stats.ox.ac.uk>

Your Java is seriously old.  Start by updating it (1.8.0_74 is current, 
AFAIK).

I can reproduce this with the CRAN binary packages, but installing the 
packages from source works for me on El Capitan (using the CRAN binary 
R).  So I suspect a problem with the CRAN binary package of rJava, which 
seems to be hard-coded to use 
/System/Library/Frameworks/JavaVM.framework and not Oracle Java.


On 14/02/2016 09:22, Berend Hasselman wrote:
> I have installed rJava, xlsx, xlsxjars, XLConnect and XLConnectJars.
>
> Executing library(xlsx) gives this output
>
> Loading required package: rJava
> Loading required package: xlsxjars
> Error : .onLoad failed in loadNamespace() for 'xlsx', details:
>    call: .jinit()
>    error: JNI_GetCreatedJavaVMs returned -1
>
> Error: package or namespace load failed for 'xlsx'
> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
> JavaVM FATAL: Failed to load the jvm library.
>
>
> Executing library(XLConnect) gives this output
>
> Loading required package: XLConnectJars
> Error : .onLoad failed in loadNamespace() for 'XLConnectJars', details:
>    call: .jinit()
>    error: JNI_GetCreatedJavaVMs returned -1
>
> Error: package 'XLConnectJars' could not be loaded
> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
> JavaVM FATAL: Failed to load the jvm library.
>
>
> sessionInfo (after library(xlsx) and library(XLConnect)) and javareconf output below.
>
> What is going on?
> What is the solution for this problem?
>
> Berend Hasselman
>
>
> SessionInfo:
>
> R version 3.2.3 Patched (2016-02-13 r70160)
> Platform: x86_64-apple-darwin13.4.0 (64-bit)
> Running under: OS X 10.11.3 (El Capitan)
>
> locale:
> [1] en_IE.UTF-8/en_IE.UTF-8/en_IE.UTF-8/C/en_IE.UTF-8/en_IE.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] xlsxjars_0.6.1 rJava_0.9-8
>
> loaded via a namespace (and not attached):
> [1] tools_3.2.3
>
>
> Output of R CMD javareconf
>
> [.../~]: R CMD javareconf -n
> Java interpreter : /usr/bin/java
> Java version     : 1.8.0_25
> Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
> Java compiler    : /usr/bin/javac
> Java headers gen.: /usr/bin/javah
> Java archive tool: /usr/bin/jar
> Non-system Java on OS X
>
> trying to compile and link a JNI program
> detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>
> JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
> Java library path: $(JAVA_HOME)/lib/server
> JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From bhh at xs4all.nl  Sun Feb 14 12:24:47 2016
From: bhh at xs4all.nl (Berend Hasselman)
Date: Sun, 14 Feb 2016 12:24:47 +0100
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <56C05B95.40303@stats.ox.ac.uk>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
	<56C05B95.40303@stats.ox.ac.uk>
Message-ID: <978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>


> On 14 Feb 2016, at 11:48, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> 
> Your Java is seriously old.  Start by updating it (1.8.0_74 is current, AFAIK).
> 
> I can reproduce this with the CRAN binary packages, but installing the packages from source works for me on El Capitan (using the CRAN binary R).  So I suspect a problem with the CRAN binary package of rJava, which seems to be hard-coded to use /System/Library/Frameworks/JavaVM.framework and not Oracle Java.
> 

I've just updated to Java 1.8.0_74.
I get the same issues.


And I have now also installed rJava, XLConnect end XLConnectJars from source.
library(XLConnect) gives this error

<message>
Loading required package: XLConnectJars
Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object '/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so':
  dlopen(/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so, 6): Library not loaded: @rpath/libjvm.dylib
  Referenced from: /Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so
  Reason: image not found
Error: package 'XLConnectJars' could not be loaded
</message>

Apparently rJava.so can't be found. But I had already installed it from source.
I have run otool on the installed rJava.so

otool -L rJava.so 
rJava.so:
	rJava.so (compatibility version 0.0.0, current version 0.0.0)
	@rpath/libjvm.dylib (compatibility version 1.0.0, current version 1.0.0)
	/Library/Frameworks/R.framework/Versions/3.2/Resources/lib/libR.dylib (compatibility version 3.2.0, current version 3.2.3)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1256.14.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)

Berend

> On 14/02/2016 09:22, Berend Hasselman wrote:
>> I have installed rJava, xlsx, xlsxjars, XLConnect and XLConnectJars.
>> 
>> Executing library(xlsx) gives this output
>> 
>> Loading required package: rJava
>> Loading required package: xlsxjars
>> Error : .onLoad failed in loadNamespace() for 'xlsx', details:
>>   call: .jinit()
>>   error: JNI_GetCreatedJavaVMs returned -1
>> 
>> Error: package or namespace load failed for 'xlsx'
>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>> JavaVM FATAL: Failed to load the jvm library.
>> 
>> 
>> Executing library(XLConnect) gives this output
>> 
>> Loading required package: XLConnectJars
>> Error : .onLoad failed in loadNamespace() for 'XLConnectJars', details:
>>   call: .jinit()
>>   error: JNI_GetCreatedJavaVMs returned -1
>> 
>> Error: package 'XLConnectJars' could not be loaded
>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>> JavaVM FATAL: Failed to load the jvm library.
>> 
>> 
>> sessionInfo (after library(xlsx) and library(XLConnect)) and javareconf output below.
>> 
>> What is going on?
>> What is the solution for this problem?
>> 
>> Berend Hasselman
>> 
>> 
>> SessionInfo:
>> 
>> R version 3.2.3 Patched (2016-02-13 r70160)
>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>> Running under: OS X 10.11.3 (El Capitan)
>> 
>> locale:
>> [1] en_IE.UTF-8/en_IE.UTF-8/en_IE.UTF-8/C/en_IE.UTF-8/en_IE.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> other attached packages:
>> [1] xlsxjars_0.6.1 rJava_0.9-8
>> 
>> loaded via a namespace (and not attached):
>> [1] tools_3.2.3
>> 
>> 
>> Output of R CMD javareconf
>> 
>> [.../~]: R CMD javareconf -n
>> Java interpreter : /usr/bin/java
>> Java version     : 1.8.0_25
>> Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>> Java compiler    : /usr/bin/javac
>> Java headers gen.: /usr/bin/javah
>> Java archive tool: /usr/bin/jar
>> Non-system Java on OS X
>> 
>> trying to compile and link a JNI program
>> detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
>> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>> 
>> JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>> Java library path: $(JAVA_HOME)/lib/server
>> JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford


From ripley at stats.ox.ac.uk  Sun Feb 14 12:31:44 2016
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 14 Feb 2016 11:31:44 +0000
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
	<56C05B95.40303@stats.ox.ac.uk>
	<978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>
Message-ID: <56C065A0.2060706@stats.ox.ac.uk>

On 14/02/2016 11:24, Berend Hasselman wrote:
>
>> On 14 Feb 2016, at 11:48, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>
>> Your Java is seriously old.  Start by updating it (1.8.0_74 is current, AFAIK).
>>
>> I can reproduce this with the CRAN binary packages, but installing the packages from source works for me on El Capitan (using the CRAN binary R).  So I suspect a problem with the CRAN binary package of rJava, which seems to be hard-coded to use /System/Library/Frameworks/JavaVM.framework and not Oracle Java.
>>
>
> I've just updated to Java 1.8.0_74.
> I get the same issues.
>
>
> And I have now also installed rJava, XLConnect end XLConnectJars from source.
> library(XLConnect) gives this error
>
> <message>
> Loading required package: XLConnectJars
> Error : .onLoad failed in loadNamespace() for 'rJava', details:
>    call: dyn.load(file, DLLpath = DLLpath, ...)
>    error: unable to load shared object '/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so':
>    dlopen(/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so, 6): Library not loaded: @rpath/libjvm.dylib
>    Referenced from: /Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so
>    Reason: image not found
> Error: package 'XLConnectJars' could not be loaded
> </message>
>
> Apparently rJava.so can't be found. But I had already installed it from source.

That is not what the message says ... it is libjvm which is not being found.

Did you re-run R CMD javareconf?  (You might need to reinstall rJava 
from source once you do.)



> I have run otool on the installed rJava.so
>
> otool -L rJava.so
> rJava.so:
> 	rJava.so (compatibility version 0.0.0, current version 0.0.0)
> 	@rpath/libjvm.dylib (compatibility version 1.0.0, current version 1.0.0)
> 	/Library/Frameworks/R.framework/Versions/3.2/Resources/lib/libR.dylib (compatibility version 3.2.0, current version 3.2.3)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1256.14.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>
> Berend
>
>> On 14/02/2016 09:22, Berend Hasselman wrote:
>>> I have installed rJava, xlsx, xlsxjars, XLConnect and XLConnectJars.
>>>
>>> Executing library(xlsx) gives this output
>>>
>>> Loading required package: rJava
>>> Loading required package: xlsxjars
>>> Error : .onLoad failed in loadNamespace() for 'xlsx', details:
>>>    call: .jinit()
>>>    error: JNI_GetCreatedJavaVMs returned -1
>>>
>>> Error: package or namespace load failed for 'xlsx'
>>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>>> JavaVM FATAL: Failed to load the jvm library.
>>>
>>>
>>> Executing library(XLConnect) gives this output
>>>
>>> Loading required package: XLConnectJars
>>> Error : .onLoad failed in loadNamespace() for 'XLConnectJars', details:
>>>    call: .jinit()
>>>    error: JNI_GetCreatedJavaVMs returned -1
>>>
>>> Error: package 'XLConnectJars' could not be loaded
>>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>>> JavaVM FATAL: Failed to load the jvm library.
>>>
>>>
>>> sessionInfo (after library(xlsx) and library(XLConnect)) and javareconf output below.
>>>
>>> What is going on?
>>> What is the solution for this problem?
>>>
>>> Berend Hasselman
>>>
>>>
>>> SessionInfo:
>>>
>>> R version 3.2.3 Patched (2016-02-13 r70160)
>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>> Running under: OS X 10.11.3 (El Capitan)
>>>
>>> locale:
>>> [1] en_IE.UTF-8/en_IE.UTF-8/en_IE.UTF-8/C/en_IE.UTF-8/en_IE.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> other attached packages:
>>> [1] xlsxjars_0.6.1 rJava_0.9-8
>>>
>>> loaded via a namespace (and not attached):
>>> [1] tools_3.2.3
>>>
>>>
>>> Output of R CMD javareconf
>>>
>>> [.../~]: R CMD javareconf -n
>>> Java interpreter : /usr/bin/java
>>> Java version     : 1.8.0_25
>>> Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>>> Java compiler    : /usr/bin/javac
>>> Java headers gen.: /usr/bin/javah
>>> Java archive tool: /usr/bin/jar
>>> Non-system Java on OS X
>>>
>>> trying to compile and link a JNI program
>>> detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>>> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>>> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
>>> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>>>
>>> JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>>> Java library path: $(JAVA_HOME)/lib/server
>>> JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>>> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Emeritus Professor of Applied Statistics, University of Oxford
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From bhh at xs4all.nl  Sun Feb 14 12:47:27 2016
From: bhh at xs4all.nl (Berend Hasselman)
Date: Sun, 14 Feb 2016 12:47:27 +0100
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <56C065A0.2060706@stats.ox.ac.uk>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
	<56C05B95.40303@stats.ox.ac.uk>
	<978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>
	<56C065A0.2060706@stats.ox.ac.uk>
Message-ID: <2F166304-4A2E-4FC9-8E82-4FF467753772@xs4all.nl>


> On 14 Feb 2016, at 12:31, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> 
> On 14/02/2016 11:24, Berend Hasselman wrote:
>> 
>>> On 14 Feb 2016, at 11:48, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>> 
>>> Your Java is seriously old.  Start by updating it (1.8.0_74 is current, AFAIK).
>>> 
>>> I can reproduce this with the CRAN binary packages, but installing the packages from source works for me on El Capitan (using the CRAN binary R).  So I suspect a problem with the CRAN binary package of rJava, which seems to be hard-coded to use /System/Library/Frameworks/JavaVM.framework and not Oracle Java.
>>> 
>> 
>> I've just updated to Java 1.8.0_74.
>> I get the same issues.
>> 
>> 
>> And I have now also installed rJava, XLConnect end XLConnectJars from source.
>> library(XLConnect) gives this error
>> 
>> <message>
>> Loading required package: XLConnectJars
>> Error : .onLoad failed in loadNamespace() for 'rJava', details:
>>   call: dyn.load(file, DLLpath = DLLpath, ...)
>>   error: unable to load shared object '/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so':
>>   dlopen(/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so, 6): Library not loaded: @rpath/libjvm.dylib
>>   Referenced from: /Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so
>>   Reason: image not found
>> Error: package 'XLConnectJars' could not be loaded
>> </message>
>> 
>> Apparently rJava.so can't be found. But I had already installed it from source.
> 
> That is not what the message says ... it is libjvm which is not being found.
> 

Correct. Sorry about that.

> Did you re-run R CMD javareconf?  (You might need to reinstall rJava from source once you do.)
> 

Yes I did and have done so again. I've reinstalled rJava from source and get the same error and the same output of running otool -L  on rJava.so.

Berend

Output of R CMD javareconf:

Java interpreter : /usr/bin/java
Java version     : 1.8.0_74
Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre
Java compiler    : /usr/bin/javac
Java headers gen.: /usr/bin/javah
Java archive tool: /usr/bin/jar
Non-system Java on OS X

trying to compile and link a JNI program 
detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation


JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre
Java library path: $(JAVA_HOME)/lib/server
JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
Updating Java configuration in /Library/Frameworks/R.framework/Resources
Done.



> 
>> I have run otool on the installed rJava.so
>> 
>> otool -L rJava.so
>> rJava.so:
>> 	rJava.so (compatibility version 0.0.0, current version 0.0.0)
>> 	@rpath/libjvm.dylib (compatibility version 1.0.0, current version 1.0.0)
>> 	/Library/Frameworks/R.framework/Versions/3.2/Resources/lib/libR.dylib (compatibility version 3.2.0, current version 3.2.3)
>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1256.14.0)
>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>> 
>> Berend
>> 
>>> On 14/02/2016 09:22, Berend Hasselman wrote:
>>>> I have installed rJava, xlsx, xlsxjars, XLConnect and XLConnectJars.
>>>> 
>>>> Executing library(xlsx) gives this output
>>>> 
>>>> Loading required package: rJava
>>>> Loading required package: xlsxjars
>>>> Error : .onLoad failed in loadNamespace() for 'xlsx', details:
>>>>   call: .jinit()
>>>>   error: JNI_GetCreatedJavaVMs returned -1
>>>> 
>>>> Error: package or namespace load failed for 'xlsx'
>>>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>>>> JavaVM FATAL: Failed to load the jvm library.
>>>> 
>>>> 
>>>> Executing library(XLConnect) gives this output
>>>> 
>>>> Loading required package: XLConnectJars
>>>> Error : .onLoad failed in loadNamespace() for 'XLConnectJars', details:
>>>>   call: .jinit()
>>>>   error: JNI_GetCreatedJavaVMs returned -1
>>>> 
>>>> Error: package 'XLConnectJars' could not be loaded
>>>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>>>> JavaVM FATAL: Failed to load the jvm library.
>>>> 
>>>> 
>>>> sessionInfo (after library(xlsx) and library(XLConnect)) and javareconf output below.
>>>> 
>>>> What is going on?
>>>> What is the solution for this problem?
>>>> 
>>>> Berend Hasselman
>>>> 
>>>> 
>>>> SessionInfo:
>>>> 
>>>> R version 3.2.3 Patched (2016-02-13 r70160)
>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>>> Running under: OS X 10.11.3 (El Capitan)
>>>> 
>>>> locale:
>>>> [1] en_IE.UTF-8/en_IE.UTF-8/en_IE.UTF-8/C/en_IE.UTF-8/en_IE.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> other attached packages:
>>>> [1] xlsxjars_0.6.1 rJava_0.9-8
>>>> 
>>>> loaded via a namespace (and not attached):
>>>> [1] tools_3.2.3
>>>> 
>>>> 
>>>> Output of R CMD javareconf
>>>> 
>>>> [.../~]: R CMD javareconf -n
>>>> Java interpreter : /usr/bin/java
>>>> Java version     : 1.8.0_25
>>>> Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>>>> Java compiler    : /usr/bin/javac
>>>> Java headers gen.: /usr/bin/javah
>>>> Java archive tool: /usr/bin/jar
>>>> Non-system Java on OS X
>>>> 
>>>> trying to compile and link a JNI program
>>>> detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>>>> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>>>> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
>>>> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>>>> 
>>>> JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>>>> Java library path: $(JAVA_HOME)/lib/server
>>>> JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>>>> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>>> 
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Emeritus Professor of Applied Statistics, University of Oxford
>> 
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford


From simon.urbanek at r-project.org  Sun Feb 14 23:13:27 2016
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 14 Feb 2016 17:13:27 -0500
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <2F166304-4A2E-4FC9-8E82-4FF467753772@xs4all.nl>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
	<56C05B95.40303@stats.ox.ac.uk>
	<978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>
	<56C065A0.2060706@stats.ox.ac.uk>
	<2F166304-4A2E-4FC9-8E82-4FF467753772@xs4all.nl>
Message-ID: <A79E772F-2250-4E43-BF52-37CBA846FBDE@r-project.org>

Check DYLD_FALLBACK_LIBRARY_PATH - it must include your Java:

> Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
[1] "/Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_20.jdk/Contents/Home/jre/lib/server"

if it doesn't, your R is not correctly configured. Oracle's Java requires the above setting, it doesn't work without it (unlike the system Java). The above is set by the R script based on etc/ldpaths - so make sure that one is correct (it should be by javareconf if your system is setup correctly).

Cheers,
Simon


On Feb 14, 2016, at 6:47 AM, Berend Hasselman <bhh at xs4all.nl> wrote:

> 
>> On 14 Feb 2016, at 12:31, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>> 
>> On 14/02/2016 11:24, Berend Hasselman wrote:
>>> 
>>>> On 14 Feb 2016, at 11:48, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>>> 
>>>> Your Java is seriously old.  Start by updating it (1.8.0_74 is current, AFAIK).
>>>> 
>>>> I can reproduce this with the CRAN binary packages, but installing the packages from source works for me on El Capitan (using the CRAN binary R).  So I suspect a problem with the CRAN binary package of rJava, which seems to be hard-coded to use /System/Library/Frameworks/JavaVM.framework and not Oracle Java.
>>>> 
>>> 
>>> I've just updated to Java 1.8.0_74.
>>> I get the same issues.
>>> 
>>> 
>>> And I have now also installed rJava, XLConnect end XLConnectJars from source.
>>> library(XLConnect) gives this error
>>> 
>>> <message>
>>> Loading required package: XLConnectJars
>>> Error : .onLoad failed in loadNamespace() for 'rJava', details:
>>>  call: dyn.load(file, DLLpath = DLLpath, ...)
>>>  error: unable to load shared object '/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so':
>>>  dlopen(/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so, 6): Library not loaded: @rpath/libjvm.dylib
>>>  Referenced from: /Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so
>>>  Reason: image not found
>>> Error: package 'XLConnectJars' could not be loaded
>>> </message>
>>> 
>>> Apparently rJava.so can't be found. But I had already installed it from source.
>> 
>> That is not what the message says ... it is libjvm which is not being found.
>> 
> 
> Correct. Sorry about that.
> 
>> Did you re-run R CMD javareconf?  (You might need to reinstall rJava from source once you do.)
>> 
> 
> Yes I did and have done so again. I've reinstalled rJava from source and get the same error and the same output of running otool -L  on rJava.so.
> 
> Berend
> 
> Output of R CMD javareconf:
> 
> Java interpreter : /usr/bin/java
> Java version     : 1.8.0_74
> Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre
> Java compiler    : /usr/bin/javac
> Java headers gen.: /usr/bin/javah
> Java archive tool: /usr/bin/jar
> Non-system Java on OS X
> 
> trying to compile and link a JNI program 
> detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
> 
> 
> JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre
> Java library path: $(JAVA_HOME)/lib/server
> JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
> Updating Java configuration in /Library/Frameworks/R.framework/Resources
> Done.
> 
> 
> 
>> 
>>> I have run otool on the installed rJava.so
>>> 
>>> otool -L rJava.so
>>> rJava.so:
>>> 	rJava.so (compatibility version 0.0.0, current version 0.0.0)
>>> 	@rpath/libjvm.dylib (compatibility version 1.0.0, current version 1.0.0)
>>> 	/Library/Frameworks/R.framework/Versions/3.2/Resources/lib/libR.dylib (compatibility version 3.2.0, current version 3.2.3)
>>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1256.14.0)
>>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>>> 
>>> Berend
>>> 
>>>> On 14/02/2016 09:22, Berend Hasselman wrote:
>>>>> I have installed rJava, xlsx, xlsxjars, XLConnect and XLConnectJars.
>>>>> 
>>>>> Executing library(xlsx) gives this output
>>>>> 
>>>>> Loading required package: rJava
>>>>> Loading required package: xlsxjars
>>>>> Error : .onLoad failed in loadNamespace() for 'xlsx', details:
>>>>>  call: .jinit()
>>>>>  error: JNI_GetCreatedJavaVMs returned -1
>>>>> 
>>>>> Error: package or namespace load failed for 'xlsx'
>>>>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>>>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>>>>> JavaVM FATAL: Failed to load the jvm library.
>>>>> 
>>>>> 
>>>>> Executing library(XLConnect) gives this output
>>>>> 
>>>>> Loading required package: XLConnectJars
>>>>> Error : .onLoad failed in loadNamespace() for 'XLConnectJars', details:
>>>>>  call: .jinit()
>>>>>  error: JNI_GetCreatedJavaVMs returned -1
>>>>> 
>>>>> Error: package 'XLConnectJars' could not be loaded
>>>>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>>>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>>>>> JavaVM FATAL: Failed to load the jvm library.
>>>>> 
>>>>> 
>>>>> sessionInfo (after library(xlsx) and library(XLConnect)) and javareconf output below.
>>>>> 
>>>>> What is going on?
>>>>> What is the solution for this problem?
>>>>> 
>>>>> Berend Hasselman
>>>>> 
>>>>> 
>>>>> SessionInfo:
>>>>> 
>>>>> R version 3.2.3 Patched (2016-02-13 r70160)
>>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>>>> Running under: OS X 10.11.3 (El Capitan)
>>>>> 
>>>>> locale:
>>>>> [1] en_IE.UTF-8/en_IE.UTF-8/en_IE.UTF-8/C/en_IE.UTF-8/en_IE.UTF-8
>>>>> 
>>>>> attached base packages:
>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>> 
>>>>> other attached packages:
>>>>> [1] xlsxjars_0.6.1 rJava_0.9-8
>>>>> 
>>>>> loaded via a namespace (and not attached):
>>>>> [1] tools_3.2.3
>>>>> 
>>>>> 
>>>>> Output of R CMD javareconf
>>>>> 
>>>>> [.../~]: R CMD javareconf -n
>>>>> Java interpreter : /usr/bin/java
>>>>> Java version     : 1.8.0_25
>>>>> Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>>>>> Java compiler    : /usr/bin/javac
>>>>> Java headers gen.: /usr/bin/javah
>>>>> Java archive tool: /usr/bin/jar
>>>>> Non-system Java on OS X
>>>>> 
>>>>> trying to compile and link a JNI program
>>>>> detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>>>>> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>>>>> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
>>>>> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>>>>> 
>>>>> JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>>>>> Java library path: $(JAVA_HOME)/lib/server
>>>>> JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>>>>> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>>> 
>>>> --
>>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>> Emeritus Professor of Applied Statistics, University of Oxford
>>> 
>> 
>> 
>> -- 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Emeritus Professor of Applied Statistics, University of Oxford
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From bhh at xs4all.nl  Mon Feb 15 11:51:44 2016
From: bhh at xs4all.nl (Berend Hasselman)
Date: Mon, 15 Feb 2016 11:51:44 +0100
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <A79E772F-2250-4E43-BF52-37CBA846FBDE@r-project.org>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
	<56C05B95.40303@stats.ox.ac.uk>
	<978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>
	<56C065A0.2060706@stats.ox.ac.uk>
	<2F166304-4A2E-4FC9-8E82-4FF467753772@xs4all.nl>
	<A79E772F-2250-4E43-BF52-37CBA846FBDE@r-project.org>
Message-ID: <71C7AFB2-CAE8-45AC-8ACA-C5759DE65D51@xs4all.nl>


> On 14 Feb 2016, at 23:13, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Check DYLD_FALLBACK_LIBRARY_PATH - it must include your Java:
> 
>> Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
> [1] "/Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_20.jdk/Contents/Home/jre/lib/server"
> 
> if it doesn't, your R is not correctly configured. Oracle's Java requires the above setting, it doesn't work without it (unlike the system Java). The above is set by the R script based on etc/ldpaths - so make sure that one is correct (it should be by javareconf if your system is setup correctly).
> 

Thanks; this lead to resolving the problem.
I should have mentioned I was using library(rJava) and the others in the GUI R.app.

In Terminal R shows 

> Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
[1] "/Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/lib/server"

as required.


I've had to compile rJava from source as suggested by Brian Ripley (if I use the binary on CRAN I get  errors)(on OS X 10.11.3).
I've installed the binaries of XLConnect, etc.

I can now run things like XLConnect from R in the Terminal and from bash scripts.
I can't run anything using rJava in the GUI R.app or in Rstudio.


BTW. R.app ([R.app GUI 1.67 (7129) x86_64-apple-darwin13.4.0]) shows

> Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
[1] ""

and Rstudio (Version 0.99.878) shows this

> Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
[1] "/Library/Frameworks/R.framework/Resources/lib:/Users/berendhasselman/lib:/usr/local/lib:/usr/lib::"

Where it got "/Users/berendhasselman/lib" from I wouldn't know; the folder does not exist.

thanks a lot 

Berend


> Cheers,
> Simon
> 
> 
> On Feb 14, 2016, at 6:47 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
>> 
>>> On 14 Feb 2016, at 12:31, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>> 
>>> On 14/02/2016 11:24, Berend Hasselman wrote:
>>>> 
>>>>> On 14 Feb 2016, at 11:48, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>>>> 
>>>>> Your Java is seriously old.  Start by updating it (1.8.0_74 is current, AFAIK).
>>>>> 
>>>>> I can reproduce this with the CRAN binary packages, but installing the packages from source works for me on El Capitan (using the CRAN binary R).  So I suspect a problem with the CRAN binary package of rJava, which seems to be hard-coded to use /System/Library/Frameworks/JavaVM.framework and not Oracle Java.
>>>>> 
>>>> 
>>>> I've just updated to Java 1.8.0_74.
>>>> I get the same issues.
>>>> 
>>>> 
>>>> And I have now also installed rJava, XLConnect end XLConnectJars from source.
>>>> library(XLConnect) gives this error
>>>> 
>>>> <message>
>>>> Loading required package: XLConnectJars
>>>> Error : .onLoad failed in loadNamespace() for 'rJava', details:
>>>> call: dyn.load(file, DLLpath = DLLpath, ...)
>>>> error: unable to load shared object '/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so':
>>>> dlopen(/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so, 6): Library not loaded: @rpath/libjvm.dylib
>>>> Referenced from: /Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so
>>>> Reason: image not found
>>>> Error: package 'XLConnectJars' could not be loaded
>>>> </message>
>>>> 
>>>> Apparently rJava.so can't be found. But I had already installed it from source.
>>> 
>>> That is not what the message says ... it is libjvm which is not being found.
>>> 
>> 
>> Correct. Sorry about that.
>> 
>>> Did you re-run R CMD javareconf?  (You might need to reinstall rJava from source once you do.)
>>> 
>> 
>> Yes I did and have done so again. I've reinstalled rJava from source and get the same error and the same output of running otool -L  on rJava.so.
>> 
>> Berend
>> 
>> Output of R CMD javareconf:
>> 
>> Java interpreter : /usr/bin/java
>> Java version     : 1.8.0_74
>> Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre
>> Java compiler    : /usr/bin/javac
>> Java headers gen.: /usr/bin/javah
>> Java archive tool: /usr/bin/jar
>> Non-system Java on OS X
>> 
>> trying to compile and link a JNI program 
>> detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
>> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>> 
>> 
>> JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre
>> Java library path: $(JAVA_HOME)/lib/server
>> JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>> Updating Java configuration in /Library/Frameworks/R.framework/Resources
>> Done.
>> 
>> 
>> 
>>> 
>>>> I have run otool on the installed rJava.so
>>>> 
>>>> otool -L rJava.so
>>>> rJava.so:
>>>> 	rJava.so (compatibility version 0.0.0, current version 0.0.0)
>>>> 	@rpath/libjvm.dylib (compatibility version 1.0.0, current version 1.0.0)
>>>> 	/Library/Frameworks/R.framework/Versions/3.2/Resources/lib/libR.dylib (compatibility version 3.2.0, current version 3.2.3)
>>>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1256.14.0)
>>>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>>>> 
>>>> Berend
>>>> 
>>>>> On 14/02/2016 09:22, Berend Hasselman wrote:
>>>>>> I have installed rJava, xlsx, xlsxjars, XLConnect and XLConnectJars.
>>>>>> 
>>>>>> Executing library(xlsx) gives this output
>>>>>> 
>>>>>> Loading required package: rJava
>>>>>> Loading required package: xlsxjars
>>>>>> Error : .onLoad failed in loadNamespace() for 'xlsx', details:
>>>>>> call: .jinit()
>>>>>> error: JNI_GetCreatedJavaVMs returned -1
>>>>>> 
>>>>>> Error: package or namespace load failed for 'xlsx'
>>>>>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>>>>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>>>>>> JavaVM FATAL: Failed to load the jvm library.
>>>>>> 
>>>>>> 
>>>>>> Executing library(XLConnect) gives this output
>>>>>> 
>>>>>> Loading required package: XLConnectJars
>>>>>> Error : .onLoad failed in loadNamespace() for 'XLConnectJars', details:
>>>>>> call: .jinit()
>>>>>> error: JNI_GetCreatedJavaVMs returned -1
>>>>>> 
>>>>>> Error: package 'XLConnectJars' could not be loaded
>>>>>> JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
>>>>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
>>>>>> JavaVM FATAL: Failed to load the jvm library.
>>>>>> 
>>>>>> 
>>>>>> sessionInfo (after library(xlsx) and library(XLConnect)) and javareconf output below.
>>>>>> 
>>>>>> What is going on?
>>>>>> What is the solution for this problem?
>>>>>> 
>>>>>> Berend Hasselman
>>>>>> 
>>>>>> 
>>>>>> SessionInfo:
>>>>>> 
>>>>>> R version 3.2.3 Patched (2016-02-13 r70160)
>>>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>>>>> Running under: OS X 10.11.3 (El Capitan)
>>>>>> 
>>>>>> locale:
>>>>>> [1] en_IE.UTF-8/en_IE.UTF-8/en_IE.UTF-8/C/en_IE.UTF-8/en_IE.UTF-8
>>>>>> 
>>>>>> attached base packages:
>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>> 
>>>>>> other attached packages:
>>>>>> [1] xlsxjars_0.6.1 rJava_0.9-8
>>>>>> 
>>>>>> loaded via a namespace (and not attached):
>>>>>> [1] tools_3.2.3
>>>>>> 
>>>>>> 
>>>>>> Output of R CMD javareconf
>>>>>> 
>>>>>> [.../~]: R CMD javareconf -n
>>>>>> Java interpreter : /usr/bin/java
>>>>>> Java version     : 1.8.0_25
>>>>>> Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>>>>>> Java compiler    : /usr/bin/javac
>>>>>> Java headers gen.: /usr/bin/javah
>>>>>> Java archive tool: /usr/bin/jar
>>>>>> Non-system Java on OS X
>>>>>> 
>>>>>> trying to compile and link a JNI program
>>>>>> detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>>>>>> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>>>>>> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
>>>>>> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>>>>>> 
>>>>>> JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
>>>>>> Java library path: $(JAVA_HOME)/lib/server
>>>>>> JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
>>>>>> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>>> Emeritus Professor of Applied Statistics, University of Oxford
>>>> 
>>> 
>>> 
>>> -- 
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Emeritus Professor of Applied Statistics, University of Oxford
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From bhive01 at gmail.com  Mon Feb 15 15:48:55 2016
From: bhive01 at gmail.com (Brandon Hurr)
Date: Mon, 15 Feb 2016 06:48:55 -0800
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <71C7AFB2-CAE8-45AC-8ACA-C5759DE65D51@xs4all.nl>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
	<56C05B95.40303@stats.ox.ac.uk>
	<978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>
	<56C065A0.2060706@stats.ox.ac.uk>
	<2F166304-4A2E-4FC9-8E82-4FF467753772@xs4all.nl>
	<A79E772F-2250-4E43-BF52-37CBA846FBDE@r-project.org>
	<71C7AFB2-CAE8-45AC-8ACA-C5759DE65D51@xs4all.nl>
Message-ID: <CAG2OMvshoALz2nyAMD0Z6o1v6XJFmzxJuL8qT71nXAr81bhPyw@mail.gmail.com>

Berend,

I realize this is slightly off the goal of getting java working on your
system, but it looks like you're using rJava to extract data from Excel
files. Have you considered or tested using the readXL package instead? I
believe it does not require rJava to work.

https://github.com/hadley/readxl

Brandon

On Mon, Feb 15, 2016 at 2:51 AM, Berend Hasselman <bhh at xs4all.nl> wrote:

>
> > On 14 Feb 2016, at 23:13, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> >
> > Check DYLD_FALLBACK_LIBRARY_PATH - it must include your Java:
> >
> >> Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
> > [1]
> "/Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_20.jdk/Contents/Home/jre/lib/server"
> >
> > if it doesn't, your R is not correctly configured. Oracle's Java
> requires the above setting, it doesn't work without it (unlike the system
> Java). The above is set by the R script based on etc/ldpaths - so make sure
> that one is correct (it should be by javareconf if your system is setup
> correctly).
> >
>
> Thanks; this lead to resolving the problem.
> I should have mentioned I was using library(rJava) and the others in the
> GUI R.app.
>
> In Terminal R shows
>
> > Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
> [1]
> "/Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/lib/server"
>
> as required.
>
>
> I've had to compile rJava from source as suggested by Brian Ripley (if I
> use the binary on CRAN I get  errors)(on OS X 10.11.3).
> I've installed the binaries of XLConnect, etc.
>
> I can now run things like XLConnect from R in the Terminal and from bash
> scripts.
> I can't run anything using rJava in the GUI R.app or in Rstudio.
>
>
> BTW. R.app ([R.app GUI 1.67 (7129) x86_64-apple-darwin13.4.0]) shows
>
> > Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
> [1] ""
>
> and Rstudio (Version 0.99.878) shows this
>
> > Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
> [1]
> "/Library/Frameworks/R.framework/Resources/lib:/Users/berendhasselman/lib:/usr/local/lib:/usr/lib::"
>
> Where it got "/Users/berendhasselman/lib" from I wouldn't know; the folder
> does not exist.
>
> thanks a lot
>
> Berend
>
>
> > Cheers,
> > Simon
> >
> >
> > On Feb 14, 2016, at 6:47 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
> >
> >>
> >>> On 14 Feb 2016, at 12:31, Prof Brian Ripley <ripley at stats.ox.ac.uk>
> wrote:
> >>>
> >>> On 14/02/2016 11:24, Berend Hasselman wrote:
> >>>>
> >>>>> On 14 Feb 2016, at 11:48, Prof Brian Ripley <ripley at stats.ox.ac.uk>
> wrote:
> >>>>>
> >>>>> Your Java is seriously old.  Start by updating it (1.8.0_74 is
> current, AFAIK).
> >>>>>
> >>>>> I can reproduce this with the CRAN binary packages, but installing
> the packages from source works for me on El Capitan (using the CRAN binary
> R).  So I suspect a problem with the CRAN binary package of rJava, which
> seems to be hard-coded to use /System/Library/Frameworks/JavaVM.framework
> and not Oracle Java.
> >>>>>
> >>>>
> >>>> I've just updated to Java 1.8.0_74.
> >>>> I get the same issues.
> >>>>
> >>>>
> >>>> And I have now also installed rJava, XLConnect end XLConnectJars from
> source.
> >>>> library(XLConnect) gives this error
> >>>>
> >>>> <message>
> >>>> Loading required package: XLConnectJars
> >>>> Error : .onLoad failed in loadNamespace() for 'rJava', details:
> >>>> call: dyn.load(file, DLLpath = DLLpath, ...)
> >>>> error: unable to load shared object
> '/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so':
> >>>>
> dlopen(/Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so,
> 6): Library not loaded: @rpath/libjvm.dylib
> >>>> Referenced from:
> /Users/berendhasselman/Library/R/3.2/library/rJava/libs/rJava.so
> >>>> Reason: image not found
> >>>> Error: package 'XLConnectJars' could not be loaded
> >>>> </message>
> >>>>
> >>>> Apparently rJava.so can't be found. But I had already installed it
> from source.
> >>>
> >>> That is not what the message says ... it is libjvm which is not being
> found.
> >>>
> >>
> >> Correct. Sorry about that.
> >>
> >>> Did you re-run R CMD javareconf?  (You might need to reinstall rJava
> from source once you do.)
> >>>
> >>
> >> Yes I did and have done so again. I've reinstalled rJava from source
> and get the same error and the same output of running otool -L  on rJava.so.
> >>
> >> Berend
> >>
> >> Output of R CMD javareconf:
> >>
> >> Java interpreter : /usr/bin/java
> >> Java version     : 1.8.0_74
> >> Java home path   :
> /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre
> >> Java compiler    : /usr/bin/javac
> >> Java headers gen.: /usr/bin/javah
> >> Java archive tool: /usr/bin/jar
> >> Non-system Java on OS X
> >>
> >> trying to compile and link a JNI program
> >> detected JNI cpp flags    : -I$(JAVA_HOME)/../include
> -I$(JAVA_HOME)/../include/darwin
> >> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
> >> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG
> -I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/../include
> -I/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/../include/darwin
> -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include
> -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
> >> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined
> dynamic_lookup -single_module -multiply_defined suppress
> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
> conftest.so conftest.o
> -L/Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre/lib/server
> -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
> -Wl,CoreFoundation
> >>
> >>
> >> JAVA_HOME        :
> /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home/jre
> >> Java library path: $(JAVA_HOME)/lib/server
> >> JNI cpp flags    : -I$(JAVA_HOME)/../include
> -I$(JAVA_HOME)/../include/darwin
> >> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
> >> Updating Java configuration in /Library/Frameworks/R.framework/Resources
> >> Done.
> >>
> >>
> >>
> >>>
> >>>> I have run otool on the installed rJava.so
> >>>>
> >>>> otool -L rJava.so
> >>>> rJava.so:
> >>>>    rJava.so (compatibility version 0.0.0, current version 0.0.0)
> >>>>    @rpath/libjvm.dylib (compatibility version 1.0.0, current version
> 1.0.0)
> >>>>
> /Library/Frameworks/R.framework/Versions/3.2/Resources/lib/libR.dylib
> (compatibility version 3.2.0, current version 3.2.3)
> >>>>
> /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
> (compatibility version 150.0.0, current version 1256.14.0)
> >>>>    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
> version 1226.10.1)
> >>>>
> >>>> Berend
> >>>>
> >>>>> On 14/02/2016 09:22, Berend Hasselman wrote:
> >>>>>> I have installed rJava, xlsx, xlsxjars, XLConnect and XLConnectJars.
> >>>>>>
> >>>>>> Executing library(xlsx) gives this output
> >>>>>>
> >>>>>> Loading required package: rJava
> >>>>>> Loading required package: xlsxjars
> >>>>>> Error : .onLoad failed in loadNamespace() for 'xlsx', details:
> >>>>>> call: .jinit()
> >>>>>> error: JNI_GetCreatedJavaVMs returned -1
> >>>>>>
> >>>>>> Error: package or namespace load failed for 'xlsx'
> >>>>>> JavaVM: requested Java version ((null)) not available. Using Java
> at "" instead.
> >>>>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
> >>>>>> JavaVM FATAL: Failed to load the jvm library.
> >>>>>>
> >>>>>>
> >>>>>> Executing library(XLConnect) gives this output
> >>>>>>
> >>>>>> Loading required package: XLConnectJars
> >>>>>> Error : .onLoad failed in loadNamespace() for 'XLConnectJars',
> details:
> >>>>>> call: .jinit()
> >>>>>> error: JNI_GetCreatedJavaVMs returned -1
> >>>>>>
> >>>>>> Error: package 'XLConnectJars' could not be loaded
> >>>>>> JavaVM: requested Java version ((null)) not available. Using Java
> at "" instead.
> >>>>>> JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
> >>>>>> JavaVM FATAL: Failed to load the jvm library.
> >>>>>>
> >>>>>>
> >>>>>> sessionInfo (after library(xlsx) and library(XLConnect)) and
> javareconf output below.
> >>>>>>
> >>>>>> What is going on?
> >>>>>> What is the solution for this problem?
> >>>>>>
> >>>>>> Berend Hasselman
> >>>>>>
> >>>>>>
> >>>>>> SessionInfo:
> >>>>>>
> >>>>>> R version 3.2.3 Patched (2016-02-13 r70160)
> >>>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
> >>>>>> Running under: OS X 10.11.3 (El Capitan)
> >>>>>>
> >>>>>> locale:
> >>>>>> [1] en_IE.UTF-8/en_IE.UTF-8/en_IE.UTF-8/C/en_IE.UTF-8/en_IE.UTF-8
> >>>>>>
> >>>>>> attached base packages:
> >>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>>>>>
> >>>>>> other attached packages:
> >>>>>> [1] xlsxjars_0.6.1 rJava_0.9-8
> >>>>>>
> >>>>>> loaded via a namespace (and not attached):
> >>>>>> [1] tools_3.2.3
> >>>>>>
> >>>>>>
> >>>>>> Output of R CMD javareconf
> >>>>>>
> >>>>>> [.../~]: R CMD javareconf -n
> >>>>>> Java interpreter : /usr/bin/java
> >>>>>> Java version     : 1.8.0_25
> >>>>>> Java home path   :
> /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
> >>>>>> Java compiler    : /usr/bin/javac
> >>>>>> Java headers gen.: /usr/bin/javah
> >>>>>> Java archive tool: /usr/bin/jar
> >>>>>> Non-system Java on OS X
> >>>>>>
> >>>>>> trying to compile and link a JNI program
> >>>>>> detected JNI cpp flags    : -I$(JAVA_HOME)/../include
> -I$(JAVA_HOME)/../include/darwin
> >>>>>> detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
> >>>>>> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG
> -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include
> -I/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/../include/darwin
> -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include
> -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
> >>>>>> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined
> dynamic_lookup -single_module -multiply_defined suppress
> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
> conftest.so conftest.o
> -L/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/server
> -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
> -Wl,CoreFoundation
> >>>>>>
> >>>>>> JAVA_HOME        :
> /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
> >>>>>> Java library path: $(JAVA_HOME)/lib/server
> >>>>>> JNI cpp flags    : -I$(JAVA_HOME)/../include
> -I$(JAVA_HOME)/../include/darwin
> >>>>>> JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
> >>>>>>
> >>>>>> _______________________________________________
> >>>>>> R-SIG-Mac mailing list
> >>>>>> R-SIG-Mac at r-project.org
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>>>
> >>>>>
> >>>>>
> >>>>> --
> >>>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> >>>>> Emeritus Professor of Applied Statistics, University of Oxford
> >>>>
> >>>
> >>>
> >>> --
> >>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> >>> Emeritus Professor of Applied Statistics, University of Oxford
> >>
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From bhh at xs4all.nl  Mon Feb 15 16:12:51 2016
From: bhh at xs4all.nl (Berend Hasselman)
Date: Mon, 15 Feb 2016 16:12:51 +0100
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <CAG2OMvshoALz2nyAMD0Z6o1v6XJFmzxJuL8qT71nXAr81bhPyw@mail.gmail.com>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
	<56C05B95.40303@stats.ox.ac.uk>
	<978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>
	<56C065A0.2060706@stats.ox.ac.uk>
	<2F166304-4A2E-4FC9-8E82-4FF467753772@xs4all.nl>
	<A79E772F-2250-4E43-BF52-37CBA846FBDE@r-project.org>
	<71C7AFB2-CAE8-45AC-8ACA-C5759DE65D51@xs4all.nl>
	<CAG2OMvshoALz2nyAMD0Z6o1v6XJFmzxJuL8qT71nXAr81bhPyw@mail.gmail.com>
Message-ID: <C2999B83-D82B-4B17-8581-8BDE071AE259@xs4all.nl>


> On 15 Feb 2016, at 15:48, Brandon Hurr <bhive01 at gmail.com> wrote:
> 
> Berend, 
> 
> I realize this is slightly off the goal of getting java working on your system, but it looks like you're using rJava to extract data from Excel files. Have you considered or tested using the readXL package instead? I believe it does not require rJava to work. 
> 
> https://github.com/hadley/readxl
> 

Yes I have tried readxl in addition to the others. It's very, very fast.

1. it doesn't/can't write Excel files (yet?).

2. I'm testing/checking/analyzing R code for someone else who uses XLConnect especially for writing Excel files. That's why I'm doing this.


Berend


From celine.rozenblat at unil.ch  Mon Feb 15 16:56:23 2016
From: celine.rozenblat at unil.ch (=?utf-8?Q?Rozenblat_C=C3=A9line?=)
Date: Mon, 15 Feb 2016 16:56:23 +0100
Subject: [R-SIG-Mac] Issues with rJava on OS X El Capitan
In-Reply-To: <C2999B83-D82B-4B17-8581-8BDE071AE259@xs4all.nl>
References: <49D91858-80C7-46AB-B31A-8541EE8CF61D@xs4all.nl>
	<56C05B95.40303@stats.ox.ac.uk>
	<978FA2BD-F9A4-4700-AAA3-BE5BE269D2CD@xs4all.nl>
	<56C065A0.2060706@stats.ox.ac.uk>
	<2F166304-4A2E-4FC9-8E82-4FF467753772@xs4all.nl>
	<A79E772F-2250-4E43-BF52-37CBA846FBDE@r-project.org>
	<71C7AFB2-CAE8-45AC-8ACA-C5759DE65D51@xs4all.nl>
	<CAG2OMvshoALz2nyAMD0Z6o1v6XJFmzxJuL8qT71nXAr81bhPyw@mail.gmail.com>
	<C2999B83-D82B-4B17-8581-8BDE071AE259@xs4all.nl>
Message-ID: <7C94C79F-2C9A-434C-981F-DD674F9ECC38@unil.ch>

Dear all,

I personally solved my problems with R using R-Studio? Hope it can help...

Best

Celine
> Le 15 f?vr. 2016 ? 16:12, Berend Hasselman <bhh at xs4all.nl> a ?crit :
> 
> 
>> On 15 Feb 2016, at 15:48, Brandon Hurr <bhive01 at gmail.com> wrote:
>> 
>> Berend, 
>> 
>> I realize this is slightly off the goal of getting java working on your system, but it looks like you're using rJava to extract data from Excel files. Have you considered or tested using the readXL package instead? I believe it does not require rJava to work. 
>> 
>> https://github.com/hadley/readxl
>> 
> 
> Yes I have tried readxl in addition to the others. It's very, very fast.
> 
> 1. it doesn't/can't write Excel files (yet?).
> 
> 2. I'm testing/checking/analyzing R code for someone else who uses XLConnect especially for writing Excel files. That's why I'm doing this.
> 
> 
> Berend
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

----------------------------------------------------------------------
  C?line ROZENBLAT           
  Professor
  Chair of the Urban Geography Commission 
  of the International Geographical Union
  http://www.unil.ch/igu-urban      
                           
  UNIVERSITY OF LAUSANNE  
  Institute of Geography and Sustainability - Faculty of Geoscience 
  Geopolis Building- office 3614      
  Mouline area       
  CH - 1015 LAUSANNE 
  SWITZERLAND	      
  
Tel   : 41 (0)21 692 36 13 
Cel   : 41 (0)79 777 05 01
Fax   : 41 (0)21 692 30 75 
Email: celine.rozenblat at unil.ch
http://www.unil.ch/unisciences/celinerozenblat

BLOG: http://wp.unil.ch/citadyne-news/
SKYPE: Celine Rozenblat
-----------------------------------------------------------------------




	[[alternative HTML version deleted]]


From marc_grt at yahoo.fr  Tue Feb 16 20:50:52 2016
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Tue, 16 Feb 2016 20:50:52 +0100
Subject: [R-SIG-Mac] install RNetCDF_1.8-1.tar.gz failed
Message-ID: <56C37D9C.1050304@yahoo.fr>

Dear experts... I try to install the lastest version of RNetCDF 
(1.8-1.tar.gz) on MacosX (El Capitan) but without success.
I send you the precise procedure I have used and some tests:

1/ I have installed MacPort as described here:
https://guide.macports.org
And it seems to be ok:
Marc-Girondot-MBA:~ marc$ port version
Version: 2.3.4

2/ I install the ports for udunits, udunits2, hdf5 and netcdf:
sudo port install udunits
sudo port install udunits
sudo port install hdf5
sudo port install netcdf

They seem to be well installed, for example (other ports are ok also):
Marc-Girondot-MBA:~ marc$ port installed hdf5
The following ports are currently installed:
   hdf5 @1.8.15-patch1_0+cxx
   hdf5 @1.8.16_1+cxx+hl (active)

3/ I modify .profile adding the lines:
export LD_LIBRARY_PATH=/opt/local/lib:$LD_LIBRARY_PATH
export DYLD_LIBRARY_PATH=/opt/local/lib:$DYLD_LIBRARY_PATH
export PATH="/opt/local/bin:/opt/local/sbin:$PATH"

4/ I verify that nc-config gave expected results:
Marc-Girondot-MBA:lib marc$ nc-config --libs
-L/opt/local/lib -lnetcdf
Marc-Girondot-MBA:lib marc$ nc-config --includedir
/opt/local/include

5/ I run the command to install the package (it is loaded on the desktop):
Marc-Girondot-MBA:~ marc$ R CMD INSTALL $HOME/desktop/RNetCDF_1.8-1.tar.gz

And it failed at this command:

clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG 
-DPACKAGE_NAME=\"RNetCDF\" -DPACKAGE_TARNAME=\"rnetcdf\" 
-DPACKAGE_VERSION=\"1.8-1\" -DPACKAGE_STRING=\"RNetCDF\ 1.8-1\" 
-DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DSTDC_HEADERS=1 
-DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 
-DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 
-DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 
-DHAVE_UDUNITS2_UDUNITS_H=1 -DHAVE_LIBUDUNITS2=1 -I/usr/local/include 
-I/usr/local/include/freetype2 -I/opt/X11/include -I/usr/local/include 
-I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall 
-mtune=core2 -g -O2  -c RNetCDF.c -o RNetCDF.o
RNetCDF.c:75:12: fatal error: 'udunits2/udunits.h' file not found
   #include <udunits2/udunits.h>

What surprised me is that I don't see -l/opt/local/lib in the list of 
locations as I expected because udunits and udunits2  are there.

As someone being able to install this package ?

Sincerely,

Marc


From ripley at stats.ox.ac.uk  Tue Feb 16 22:09:44 2016
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 16 Feb 2016 21:09:44 +0000
Subject: [R-SIG-Mac] install RNetCDF_1.8-1.tar.gz failed
In-Reply-To: <56C37D9C.1050304@yahoo.fr>
References: <56C37D9C.1050304@yahoo.fr>
Message-ID: <56C39018.1090001@stats.ox.ac.uk>

On 16/02/2016 19:50, Marc Girondot wrote:
> Dear experts... I try to install the lastest version of RNetCDF
> (1.8-1.tar.gz) on MacosX (El Capitan) but without success.
> I send you the precise procedure I have used and some tests:
>
> 1/ I have installed MacPort as described here:
> https://guide.macports.org
> And it seems to be ok:
> Marc-Girondot-MBA:~ marc$ port version
> Version: 2.3.4
>
> 2/ I install the ports for udunits, udunits2, hdf5 and netcdf:
> sudo port install udunits
> sudo port install udunits
> sudo port install hdf5
> sudo port install netcdf
>
> They seem to be well installed, for example (other ports are ok also):
> Marc-Girondot-MBA:~ marc$ port installed hdf5
> The following ports are currently installed:
>    hdf5 @1.8.15-patch1_0+cxx
>    hdf5 @1.8.16_1+cxx+hl (active)
>
> 3/ I modify .profile adding the lines:
> export LD_LIBRARY_PATH=/opt/local/lib:$LD_LIBRARY_PATH
> export DYLD_LIBRARY_PATH=/opt/local/lib:$DYLD_LIBRARY_PATH
> export PATH="/opt/local/bin:/opt/local/sbin:$PATH"
>
> 4/ I verify that nc-config gave expected results:
> Marc-Girondot-MBA:lib marc$ nc-config --libs
> -L/opt/local/lib -lnetcdf
> Marc-Girondot-MBA:lib marc$ nc-config --includedir
> /opt/local/include
>
> 5/ I run the command to install the package (it is loaded on the desktop):
> Marc-Girondot-MBA:~ marc$ R CMD INSTALL $HOME/desktop/RNetCDF_1.8-1.tar.gz
>
> And it failed at this command:
>
> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG
> -DPACKAGE_NAME=\"RNetCDF\" -DPACKAGE_TARNAME=\"rnetcdf\"
> -DPACKAGE_VERSION=\"1.8-1\" -DPACKAGE_STRING=\"RNetCDF\ 1.8-1\"
> -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DSTDC_HEADERS=1
> -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1
> -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1
> -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1
> -DHAVE_UDUNITS2_UDUNITS_H=1 -DHAVE_LIBUDUNITS2=1 -I/usr/local/include
> -I/usr/local/include/freetype2 -I/opt/X11/include -I/usr/local/include
> -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall
> -mtune=core2 -g -O2  -c RNetCDF.c -o RNetCDF.o
> RNetCDF.c:75:12: fatal error: 'udunits2/udunits.h' file not found
>    #include <udunits2/udunits.h>
>
> What surprised me is that I don't see -l/opt/local/lib in the list of
> locations as I expected because udunits and udunits2  are there.
>
> As someone being able to install this package ?

Hmm, if you use MacPorts you are on your own as it is unsupported. 
However, there is a version of udunits2 (and netcdf and hdf5) at 
https://r.research.att.com/libs/ which used to work with RNetCDF 1.7-3: 
1.8-1 is recent and broken, as you can see at
https://cran.r-project.org/web/checks/check_results_RNetCDF.html . (The 
maintainer has been informed, and not responded ....)

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From vindoggy at hotmail.com  Thu Feb 18 20:18:58 2016
From: vindoggy at hotmail.com (Vinny Mo)
Date: Thu, 18 Feb 2016 19:18:58 +0000
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <56BF9D56.6040905@gmail.com>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>	<56BCA719.1040704@gmail.com>
	<7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>	<56BCB400.2070600@gmail.com>
	<84634E2A-5876-4F42-9792-C3B34F06C37A@une.edu>,
	<56BF9D56.6040905@gmail.com>
Message-ID: <BY2PR15MB02968C8B0EE722F00ED2068ACCAF0@BY2PR15MB0296.namprd15.prod.outlook.com>

I'll second Joe's report that opening almost any GUI (changing working directory from menu and use of "file.choose()" command) is still an issue for me. I'm using "Wooden Christmas Tree" on several different mac machines with small data sets, small scritps (less than 200 lines), using no outside packages, and still having consistent freezing issues.

Cheers,

V

________________________________________
From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Saturday, February 13, 2016 9:17 PM
To: Joseph Kunkel
Cc: r-sig-mac at r-project.org
Subject: Re: [R-SIG-Mac] R GUI is freezing

On 13/02/2016 1:42 PM, Joseph Kunkel wrote:
> Sorry, but the freezing of the R-gui still persists:
>
> Previously I had downloaded the latest version of R from the CRAN directory for my Os X  MacBook Pro (Retina, 15-inch, Early 2013). The R-gui check on R upgrades suggested my R was up-to-date with no upgrades available.
>
> In that situation I experienced the R-gui freeze-up that I and others have alluded to before.

You mention way down below that this only happens in very long running
scripts using rgl and lots of memory.  I don't think that's typical of
others with similar complaints.  I'd guess something in the mix isn't
responding well to a memory allocation failure, but I really have no
idea what it would be.

I'd suggest running the whole thing in a debugger, and once the apparent
lockup occurs, interrupt the process and see if you can figure out what
is happening.  But it isn't going to be easy.

The other suggestion would be to simplify things until you have less
moving parts involved.  Does it need rgl?  Does it need the R.app GUI?
Does it need whatever software you are using to produce movies?  Cut it
down to a minimal reproducible example, and post that here.

Duncan Murdoch

>
> On Duncans advice (Feb 11, 2 days ago) I tried the suggested nightly build and then ran one of my R scripts from the initial directory I had set in the R-gui preferences menu R-startup menu which was still the default det from the previous build.   R opened with the appropriately set working directory:
>
> R version 3.2.3 (2015-12-10) -- "Wooden Christmas-Tree?
> ?
> [R.app GUI 1.67 (7128) x86_64-apple-darwin13.4.0]
>
> I then ran a R-script to completion. ? {I read somewhere that garbage collection is automatic and forcing it is only informational and does not improve a situation}. Despite that I have tried garbage collection.  ...  And I then tried to load another R-script into the editor from the same working directory.
>
> The R-gui froze with a rotating rainbow icon.
>
> I use my Terminal window to find and kill the R-process:
>
> Josephs-MacBook-Pro:~ josephgkunkel$ ps -x
> ...
> 6533 ??         9:44.90 /Applications/R.app/Contents/MacOS/R
>
> Josephs-MacBook-Pro:~ josephgkunkel$ kill 6533
>
> I then rebooted R:
>
> R version 3.2.3 (2015-12-10) -- "Wooden Christmas-Tree?
> ?
> [R.app GUI 1.67 (7128) x86_64-apple-darwin13.4.0]
>
> [Workspace restored from /Users/josephgkunkel/Documents/Analysis/AVI_M2C_0.5/spiral/spiral1a/.RData]
> [History restored from /Users/josephgkunkel/Documents/Analysis/AVI_M2C_0.5/spiral/spiral1a/.Rapp.history]
>
> In addition the R-script that had been loaded into the editor at the freeze was auto-loaded.
>
> At this point I try to load the new R-script that I had wanted to load when the R-gui froze. ...
>
> The R-gui freezes again (because I did not close the opened R-script and close R and reopen it before trying to load the new R-script.
>
> {Something is wrong with the gui at this point!  Something, such as a log, saved prior to the R-gui freezing is now directing things.  Why else would a new reboot result in a freezup with a ordinary operation. }
>
> To run R successfully I must (1) re-kill the R process. (2) Boot the R-gui.  (3) Close any R-scripts that are brought up in the default editor. (4) Close the R-gui using the gui red-dot icon or q(). (5) Reboot the R-gui.
>
> When opened in this manner I can load several R-scripts into the editor but after running any substantial R-script I should not try to load another into the editor -or- change the working directory.
>
> I can run another R-script.
>
> QUESTION to Duncan:  Is the above reported R version and GUI version not yet the correct R-gui build?
>
> One clue?   After a freeze and reboot of R, the Rgui pulldown menu "File/Recent" initially shows "Clear Menu? rather than a list.   Retry still gives "Clear Menu?.
>     After looking there repeatedly and getting "Clear Menu? and one 'goes somewhere else and does something else' and then comes back  to "File/Recent?, a list of appropriate old loads now appears ?automagically?.  Then the loading of a new R-script works from this list ... but not via the ?Open in Editor? icon.
>
> Another clue:  The R-scripts I run are often pretty heavy rgl library 3d function plotting programs that load v. large data sets and then in some cases create rotating movies that generate frames that are saved ? the whole process taking up to an hour+.  Could this lead to 'memory leaks' that stomp on critical log files or parameters/variables that save critical info for process survival?  Occasinally the R process complains that I need to shut down non-essential processes that are using valuable memory.
>
> Shorter uses of rgl do not cause gui freezes however the protocol to recover from a gui freeze is still disconcertingly laborious.
>
> Joe
>
> -?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
> Joseph G. Kunkel, Research Professor
> 112A Marine Science Center
> University of New England
> Biddeford ME 04005
> http://www.bio.umass.edu/biology/kunkel/
>
>> On Feb 11, 2016, at 11:17 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 11/02/2016 10:50 AM, Joseph Kunkel wrote:
>>> I have the same problem over many updates of R for my Mac.   After I load one R-script into the editor and run it, trying to open another script or trying to change my working directory results in R-gui freeze up.  In rebooting R I end up with the old R-script coming up in the editor and I must close it and close R once again before I can reboot R yet once again and start working bing aware that I must not try to open anothe R-scrip in the editor after a script has run or R-gui will lock up again.
>>>
>>> With respect to the suggestion to 'tr(Y) recent nightly builds from http://r.research.att.com/', it is the developer?s page and the link to the R-gui nightly build loops back to the same page with no clear option of how to load a new build of the R-gui.
>>>
>>> There seems to be a hell-hole of problems with the recent updates of R.  But my ver R 3.2.3 GUI 1.66 Mavericks build (7060) query  says that I am up to date with nothing to upgrade.  I would choose not to upgrade entire R if it is having problems with its ?nightly build?.
>>>
>> You really should try the nightly build.  I am using R.app 7116 Mavericks build in OS X 10.11.3 (El Capitan), and am not seeing these problems.
>>
>> The latest build for your version of R is labelled _"__R-GUI-7128-3.2-mavericks-Release.dm_g__". <http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>
>>
>> That links to <http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>. I don't see a loop.
>>
>>> ??? what to do with this problem which was ignored the last time I posted it, similar to Dr. Swan?s experience.
>>
>> I don't know when you posted that message, but I'd guess you were given the advice you quote above, and you didn't follow it.
>>
>> Duncan Murdoch
>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From murdoch.duncan at gmail.com  Thu Feb 18 20:45:14 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 18 Feb 2016 14:45:14 -0500
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <BY2PR15MB02968C8B0EE722F00ED2068ACCAF0@BY2PR15MB0296.namprd15.prod.outlook.com>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
	<56BCA719.1040704@gmail.com>
	<7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
	<56BCB400.2070600@gmail.com>
	<84634E2A-5876-4F42-9792-C3B34F06C37A@une.edu>
	<56BF9D56.6040905@gmail.com>
	<BY2PR15MB02968C8B0EE722F00ED2068ACCAF0@BY2PR15MB0296.namprd15.prod.outlook.com>
Message-ID: <56C61F4A.6010509@gmail.com>

On 18/02/2016 2:18 PM, Vinny Mo wrote:
> I'll second Joe's report that opening almost any GUI (changing working directory from menu and use of "file.choose()" command) is still an issue for me. I'm using "Wooden Christmas Tree" on several different mac machines with small data sets, small scritps (less than 200 lines), using no outside packages, and still having consistent freezing issues.

Your report doesn't "second" his, yours is quite different.  He needed a 
long script and lots of memory allocations and rgl.  You apparently 
don't.  But like his report, you don't give us enough to go on.

You need to give version numbers, and an exact sequence of operations to 
reproduce the crash.  Then it'll likely be fixed.

Without knowing which version of R.app you were running ("Wooden 
Christmas Tree" is a version label on R, not R.app), on what version of 
Mac OS X, or what is necessary to duplicate the problem, we're unlikely 
to even try to fix it.

Duncan Murdoch
>
> Cheers,
>
> V
>
> ________________________________________
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Saturday, February 13, 2016 9:17 PM
> To: Joseph Kunkel
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] R GUI is freezing
>
> On 13/02/2016 1:42 PM, Joseph Kunkel wrote:
> > Sorry, but the freezing of the R-gui still persists:
> >
> > Previously I had downloaded the latest version of R from the CRAN directory for my Os X  MacBook Pro (Retina, 15-inch, Early 2013). The R-gui check on R upgrades suggested my R was up-to-date with no upgrades available.
> >
> > In that situation I experienced the R-gui freeze-up that I and others have alluded to before.
>
> You mention way down below that this only happens in very long running
> scripts using rgl and lots of memory.  I don't think that's typical of
> others with similar complaints.  I'd guess something in the mix isn't
> responding well to a memory allocation failure, but I really have no
> idea what it would be.
>
> I'd suggest running the whole thing in a debugger, and once the apparent
> lockup occurs, interrupt the process and see if you can figure out what
> is happening.  But it isn't going to be easy.
>
> The other suggestion would be to simplify things until you have less
> moving parts involved.  Does it need rgl?  Does it need the R.app GUI?
> Does it need whatever software you are using to produce movies?  Cut it
> down to a minimal reproducible example, and post that here.
>
> Duncan Murdoch
>
> >
> > On Duncans advice (Feb 11, 2 days ago) I tried the suggested nightly build and then ran one of my R scripts from the initial directory I had set in the R-gui preferences menu R-startup menu which was still the default det from the previous build.   R opened with the appropriately set working directory:
> >
> > R version 3.2.3 (2015-12-10) -- "Wooden Christmas-Tree?
> > ?
> > [R.app GUI 1.67 (7128) x86_64-apple-darwin13.4.0]
> >
> > I then ran a R-script to completion. ? {I read somewhere that garbage collection is automatic and forcing it is only informational and does not improve a situation}. Despite that I have tried garbage collection.  ...  And I then tried to load another R-script into the editor from the same working directory.
> >
> > The R-gui froze with a rotating rainbow icon.
> >
> > I use my Terminal window to find and kill the R-process:
> >
> > Josephs-MacBook-Pro:~ josephgkunkel$ ps -x
> > ...
> > 6533 ??         9:44.90 /Applications/R.app/Contents/MacOS/R
> >
> > Josephs-MacBook-Pro:~ josephgkunkel$ kill 6533
> >
> > I then rebooted R:
> >
> > R version 3.2.3 (2015-12-10) -- "Wooden Christmas-Tree?
> > ?
> > [R.app GUI 1.67 (7128) x86_64-apple-darwin13.4.0]
> >
> > [Workspace restored from /Users/josephgkunkel/Documents/Analysis/AVI_M2C_0.5/spiral/spiral1a/.RData]
> > [History restored from /Users/josephgkunkel/Documents/Analysis/AVI_M2C_0.5/spiral/spiral1a/.Rapp.history]
> >
> > In addition the R-script that had been loaded into the editor at the freeze was auto-loaded.
> >
> > At this point I try to load the new R-script that I had wanted to load when the R-gui froze. ...
> >
> > The R-gui freezes again (because I did not close the opened R-script and close R and reopen it before trying to load the new R-script.
> >
> > {Something is wrong with the gui at this point!  Something, such as a log, saved prior to the R-gui freezing is now directing things.  Why else would a new reboot result in a freezup with a ordinary operation. }
> >
> > To run R successfully I must (1) re-kill the R process. (2) Boot the R-gui.  (3) Close any R-scripts that are brought up in the default editor. (4) Close the R-gui using the gui red-dot icon or q(). (5) Reboot the R-gui.
> >
> > When opened in this manner I can load several R-scripts into the editor but after running any substantial R-script I should not try to load another into the editor -or- change the working directory.
> >
> > I can run another R-script.
> >
> > QUESTION to Duncan:  Is the above reported R version and GUI version not yet the correct R-gui build?
> >
> > One clue?   After a freeze and reboot of R, the Rgui pulldown menu "File/Recent" initially shows "Clear Menu? rather than a list.   Retry still gives "Clear Menu?.
> >     After looking there repeatedly and getting "Clear Menu? and one 'goes somewhere else and does something else' and then comes back  to "File/Recent?, a list of appropriate old loads now appears ?automagically?.  Then the loading of a new R-script works from this list ... but not via the ?Open in Editor? icon.
> >
> > Another clue:  The R-scripts I run are often pretty heavy rgl library 3d function plotting programs that load v. large data sets and then in some cases create rotating movies that generate frames that are saved ? the whole process taking up to an hour+.  Could this lead to 'memory leaks' that stomp on critical log files or parameters/variables that save critical info for process survival?  Occasinally the R process complains that I need to shut down non-essential processes that are using valuable memory.
> >
> > Shorter uses of rgl do not cause gui freezes however the protocol to recover from a gui freeze is still disconcertingly laborious.
> >
> > Joe
> >
> > -?.  .? ?.  .><((((?>?.  .? ?.  .><((((?>?.  .? ?.  .><((((?> .??.? >=-       =?}}}}}><
> > Joseph G. Kunkel, Research Professor
> > 112A Marine Science Center
> > University of New England
> > Biddeford ME 04005
> > http://www.bio.umass.edu/biology/kunkel/
> >
> >> On Feb 11, 2016, at 11:17 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >>
> >> On 11/02/2016 10:50 AM, Joseph Kunkel wrote:
> >>> I have the same problem over many updates of R for my Mac.   After I load one R-script into the editor and run it, trying to open another script or trying to change my working directory results in R-gui freeze up.  In rebooting R I end up with the old R-script coming up in the editor and I must close it and close R once again before I can reboot R yet once again and start working bing aware that I must not try to open anothe R-scrip in the editor after a script has run or R-gui will lock up again.
> >>>
> >>> With respect to the suggestion to 'tr(Y) recent nightly builds from http://r.research.att.com/', it is the developer?s page and the link to the R-gui nightly build loops back to the same page with no clear option of how to load a new build of the R-gui.
> >>>
> >>> There seems to be a hell-hole of problems with the recent updates of R.  But my ver R 3.2.3 GUI 1.66 Mavericks build (7060) query  says that I am up to date with nothing to upgrade.  I would choose not to upgrade entire R if it is having problems with its ?nightly build?.
> >>>
> >> You really should try the nightly build.  I am using R.app 7116 Mavericks build in OS X 10.11.3 (El Capitan), and am not seeing these problems.
> >>
> >> The latest build for your version of R is labelled _"__R-GUI-7128-3.2-mavericks-Release.dm_g__". <http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>
> >>
> >> That links to <http://r.research.att.com/mavericks/R-3.2-branch/R-GUI-7128-3.2-mavericks-Release.dmg>. I don't see a loop.
> >>
> >>> ??? what to do with this problem which was ignored the last time I posted it, similar to Dr. Swan?s experience.
> >>
> >> I don't know when you posted that message, but I'd guess you were given the advice you quote above, and you didn't follow it.
> >>
> >> Duncan Murdoch
> >
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From pdalgd at gmail.com  Thu Feb 18 21:02:59 2016
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 18 Feb 2016 21:02:59 +0100
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <56C61F4A.6010509@gmail.com>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
	<56BCA719.1040704@gmail.com>
	<7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
	<56BCB400.2070600@gmail.com>
	<84634E2A-5876-4F42-9792-C3B34F06C37A@une.edu>
	<56BF9D56.6040905@gmail.com>
	<BY2PR15MB02968C8B0EE722F00ED2068ACCAF0@BY2PR15MB0296.namprd15.prod.outlook.com>
	<56C61F4A.6010509@gmail.com>
Message-ID: <D4A84540-F5CB-4EDA-88F2-0CACF0D47874@gmail.com>


> On 18 Feb 2016, at 20:45 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> You need to give version numbers, and an exact sequence of operations to reproduce the crash. Then it'll likely be fixed.

...if we can reproduce it on one of our machines! There have been a number of similar reports for which that has not been the case. So exact OS and hardware configuration matters too.

-pd

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch.duncan at gmail.com  Thu Feb 18 22:23:16 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 18 Feb 2016 16:23:16 -0500
Subject: [R-SIG-Mac] R GUI is freezing
In-Reply-To: <D4A84540-F5CB-4EDA-88F2-0CACF0D47874@gmail.com>
References: <24CD9158-FB32-4B83-BC1F-850C73BDE244@csun.edu>
	<52A97B9B-EE8C-41F3-878D-6D6C69B9BB91@umbc.edu>
	<56BCA719.1040704@gmail.com>
	<7060CC91-0C16-44D6-9036-08EE821AC27F@une.edu>
	<56BCB400.2070600@gmail.com>
	<84634E2A-5876-4F42-9792-C3B34F06C37A@une.edu>
	<56BF9D56.6040905@gmail.com>
	<BY2PR15MB02968C8B0EE722F00ED2068ACCAF0@BY2PR15MB0296.namprd15.prod.outlook.com>
	<56C61F4A.6010509@gmail.com>
	<D4A84540-F5CB-4EDA-88F2-0CACF0D47874@gmail.com>
Message-ID: <56C63644.8060204@gmail.com>

On 18/02/2016 3:02 PM, peter dalgaard wrote:
>
>> On 18 Feb 2016, at 20:45 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> You need to give version numbers, and an exact sequence of operations to reproduce the crash. Then it'll likely be fixed.
>
> ...if we can reproduce it on one of our machines! There have been a number of similar reports for which that has not been the case. So exact OS and hardware configuration matters too.

The only reproducible example I've seen was the edit.data.frame one, 
which was promptly fixed.  I wouldn't be surprised if there were other 
bugs still in there due to Apple changing OS X behaviour or bugs in 
packages like rgl, but I'm not seeing them.

Duncan Murdoch


From dkelley at broadinstitute.org  Mon Feb 15 18:33:29 2016
From: dkelley at broadinstitute.org (dkelley at broadinstitute.org)
Date: Mon, 15 Feb 2016 09:33:29 -0800 (PST)
Subject: [R-SIG-Mac] Problems updating RCurl on Yosemite
In-Reply-To: <DB845001-C777-4D89-B39A-F7293E8E36BA@gmail.com>
References: <DB845001-C777-4D89-B39A-F7293E8E36BA@gmail.com>
Message-ID: <02286075-e9b7-47c2-bf2e-f8167408adce@googlegroups.com>

Same exact problem here.

On Wednesday, February 10, 2016 at 11:31:54 PM UTC-5, M. Henry Linder wrote:
>
> Hello all
>
> I have R 3.1.0 installed on my computer, and at some point in the past had 
> successfully installed RCurl (1.95-4.3). However, I am now unable to update 
> RCurl, and in spite of my best efforts at googling, I can?t seem to get 
> things working.
>
> The error I receive is
>
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>   unable to load shared object 
> '/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so':
>   
> dlopen(/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so, 
> 6): Library not loaded: libcurl.4.dylib
>   Referenced from: 
> /usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so
>   Reason: image not found
>
> It seems likely that R is looking to the system curl:
>
> $ which curl
> /usr/bin/curl
> $ curl --version
> curl 7.37.1 (x86_64-apple-darwin14.0) libcurl/7.37.1 SecureTransport 
> zlib/1.2.5
> Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 
> pop3s rtsp smtp smtps telnet tftp
> Features: AsynchDNS GSS-Negotiate IPv6 Largefile NTLM NTLM_WB SSL libz
>
> I have tried installing curl from Homebrew (version 7.42.1) and setting 
> LDFLAGS and CPPFLAGS (and LIBCURL_CFLAGS and LIBCURL_LIBS) to point to this 
> version of curl, to no avail.
>
> I?m unsure if there is a way to set these build flags from within R; is 
> that a possible fix? Thank you for any advice you can offer!
>
> Best
> Henry
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SI... at r-project.org <javascript:>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20160215/e2cad21e/attachment.html>

From dkelley at broadinstitute.org  Mon Feb 15 18:33:29 2016
From: dkelley at broadinstitute.org (dkelley at broadinstitute.org)
Date: Mon, 15 Feb 2016 09:33:29 -0800
Subject: [R-SIG-Mac] Problems updating RCurl on Yosemite
In-Reply-To: <DB845001-C777-4D89-B39A-F7293E8E36BA@gmail.com>
References: <DB845001-C777-4D89-B39A-F7293E8E36BA@gmail.com>
Message-ID: <02286075-e9b7-47c2-bf2e-f8167408adce@googlegroups.com>

Same exact problem here.

On Wednesday, February 10, 2016 at 11:31:54 PM UTC-5, M. Henry Linder wrote:
>
> Hello all
>
> I have R 3.1.0 installed on my computer, and at some point in the past had 
> successfully installed RCurl (1.95-4.3). However, I am now unable to update 
> RCurl, and in spite of my best efforts at googling, I can?t seem to get 
> things working.
>
> The error I receive is
>
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>   unable to load shared object 
> '/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so':
>   
> dlopen(/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so, 
> 6): Library not loaded: libcurl.4.dylib
>   Referenced from: 
> /usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so
>   Reason: image not found
>
> It seems likely that R is looking to the system curl:
>
> $ which curl
> /usr/bin/curl
> $ curl --version
> curl 7.37.1 (x86_64-apple-darwin14.0) libcurl/7.37.1 SecureTransport 
> zlib/1.2.5
> Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 
> pop3s rtsp smtp smtps telnet tftp
> Features: AsynchDNS GSS-Negotiate IPv6 Largefile NTLM NTLM_WB SSL libz
>
> I have tried installing curl from Homebrew (version 7.42.1) and setting 
> LDFLAGS and CPPFLAGS (and LIBCURL_CFLAGS and LIBCURL_LIBS) to point to this 
> version of curl, to no avail.
>
> I?m unsure if there is a way to set these build flags from within R; is 
> that a possible fix? Thank you for any advice you can offer!
>
> Best
> Henry
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SI... at r-project.org <javascript:>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20160215/e2cad21e/attachment-0001.html>

From iryna.v.nikolayeva at gmail.com  Tue Feb 23 21:50:33 2016
From: iryna.v.nikolayeva at gmail.com (Iryna Nikolayeva)
Date: Tue, 23 Feb 2016 21:50:33 +0100
Subject: [R-SIG-Mac] Startup problem with manipulate
Message-ID: <8383E33B-ED07-48F1-A570-AA566688059A@gmail.com>

Hi all, every time I start up Studio, I get the following error message:


Error installing package: * installing *source* package ?manipulate? ...
mv: rename /Users/iryna/Library/R/3.1/library/manipulate to /Users/iryna/Library/R/3.1/library/00LOCK-manipulate/manipulate: Permission denied
Warning in file.copy(f, instdir, TRUE) :
  problem copying ./NAMESPACE to /Users/iryna/Library/R/3.1/library/manipulate/NAMESPACE: Permission denied
Warning in file(file, ifelse(append, "a", "w")) :
  cannot open file '/Users/iryna/Library/R/3.1/library/manipulate/DESCRIPTION': Permission denied
Error in file(file, ifelse(append, "a", "w")) : 
  cannot open the connection
ERROR: installing package DESCRIPTION failed for package ?manipulate?
* removing ?/Users/iryna/Library/R/3.1/library/manipulate?


Interestingly the package loads correctly:
> library ("manipulate")
> isAvailable()
[1] TRUE


I have found an there person having the same issue: https://support.rstudio.com/hc/en-us/community/posts/202191748-Startup-problem-with-manipulate?page=1#community_comment_212580527 

But no answer has been given to him.


Here are my versions information:

> packageVersion("manipulate")
[1] ?1.0.1?
> version
               _                           
platform       x86_64-apple-darwin13.4.0   
arch           x86_64                      
os             darwin13.4.0                
system         x86_64, darwin13.4.0        
status                                     
major          3                           
minor          1.2                         
year           2014                        
month          10                          
day            31                          
svn rev        66913                       
language       R                           
version.string R version 3.1.2 (2014-10-31)
nickname       Pumpkin Helmet  



I?m working on Mac OS X El Capitan.


Thanks in advance!
?

Iryna Nikolayeva

M.Eng., M.Sc, PhD student in Systems Biology
Institut Pasteur <http://www.pasteur.fr/>

Phone: +33 1 45 68 89 85






	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue Feb 23 22:00:04 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 23 Feb 2016 16:00:04 -0500
Subject: [R-SIG-Mac] Startup problem with manipulate
In-Reply-To: <8383E33B-ED07-48F1-A570-AA566688059A@gmail.com>
References: <8383E33B-ED07-48F1-A570-AA566688059A@gmail.com>
Message-ID: <56CCC854.10504@gmail.com>

On 23/02/2016 3:50 PM, Iryna Nikolayeva wrote:
> Hi all, every time I start up Studio, I get the following error message:

This is an RStudio problem, so you may have to work with them to solve 
it.  But I'd suggest updating R (the current version is 3.2.3), which 
may help.

Duncan Murdoch
>
>
> Error installing package: * installing *source* package ?manipulate? ...
> mv: rename /Users/iryna/Library/R/3.1/library/manipulate to /Users/iryna/Library/R/3.1/library/00LOCK-manipulate/manipulate: Permission denied
> Warning in file.copy(f, instdir, TRUE) :
>    problem copying ./NAMESPACE to /Users/iryna/Library/R/3.1/library/manipulate/NAMESPACE: Permission denied
> Warning in file(file, ifelse(append, "a", "w")) :
>    cannot open file '/Users/iryna/Library/R/3.1/library/manipulate/DESCRIPTION': Permission denied
> Error in file(file, ifelse(append, "a", "w")) :
>    cannot open the connection
> ERROR: installing package DESCRIPTION failed for package ?manipulate?
> * removing ?/Users/iryna/Library/R/3.1/library/manipulate?
>
>
> Interestingly the package loads correctly:
> > library ("manipulate")
> > isAvailable()
> [1] TRUE
>
>
> I have found an there person having the same issue: https://support.rstudio.com/hc/en-us/community/posts/202191748-Startup-problem-with-manipulate?page=1#community_comment_212580527
>
> But no answer has been given to him.
>
>
> Here are my versions information:
>
> > packageVersion("manipulate")
> [1] ?1.0.1?
> > version
>                 _
> platform       x86_64-apple-darwin13.4.0
> arch           x86_64
> os             darwin13.4.0
> system         x86_64, darwin13.4.0
> status
> major          3
> minor          1.2
> year           2014
> month          10
> day            31
> svn rev        66913
> language       R
> version.string R version 3.1.2 (2014-10-31)
> nickname       Pumpkin Helmet
>
>
>
> I?m working on Mac OS X El Capitan.
>
>
> Thanks in advance!
> ?
>
> Iryna Nikolayeva
>
> M.Eng., M.Sc, PhD student in Systems Biology
> Institut Pasteur <http://www.pasteur.fr/>
>
> Phone: +33 1 45 68 89 85
>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From pdalgd at gmail.com  Tue Feb 23 22:39:27 2016
From: pdalgd at gmail.com (peter dalgaard)
Date: Tue, 23 Feb 2016 22:39:27 +0100
Subject: [R-SIG-Mac] Problems updating RCurl on Yosemite
In-Reply-To: <02286075-e9b7-47c2-bf2e-f8167408adce@googlegroups.com>
References: <DB845001-C777-4D89-B39A-F7293E8E36BA@gmail.com>
	<02286075-e9b7-47c2-bf2e-f8167408adce@googlegroups.com>
Message-ID: <DC37DE02-B55A-4713-8EB1-1FA826596A94@gmail.com>

In general, homebrewers get to drink their own booze. (i.e., we don't support it.) 

However, for R itself, it is necessary for me to set CURL_CONFIG in order not to pick up the curl-config from MacPorts. You might want to check if you are running into the same issue in reverse.

-pd


> On 15 Feb 2016, at 18:33 , dkelley at broadinstitute.org wrote:
> 
> Same exact problem here.
> 
> On Wednesday, February 10, 2016 at 11:31:54 PM UTC-5, M. Henry Linder wrote:
> Hello all
> I have R 3.1.0 installed on my computer, and at some point in the past had successfully installed RCurl (1.95-4.3). However, I am now unable to update RCurl, and in spite of my best efforts at googling, I can?t seem to get things working.
> 
> The error I receive is
> 
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>   unable to load shared object '/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so':
>   dlopen(/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so, 6): Library not loaded: libcurl.4.dylib
>   Referenced from: /usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so
>   Reason: image not found
> 
> It seems likely that R is looking to the system curl:
> 
> $ which curl
> /usr/bin/curl
> $ curl --version
> curl 7.37.1 (x86_64-apple-darwin14.0) libcurl/7.37.1 SecureTransport zlib/1.2.5
> Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp smtp smtps telnet tftp
> Features: AsynchDNS GSS-Negotiate IPv6 Largefile NTLM NTLM_WB SSL libz
> 
> I have tried installing curl from Homebrew (version 7.42.1) and setting LDFLAGS and CPPFLAGS (and LIBCURL_CFLAGS and LIBCURL_LIBS) to point to this version of curl, to no avail.
> 
> I?m unsure if there is a way to set these build flags from within R; is that a possible fix? Thank you for any advice you can offer!
> 
> Best
> Henry
>         [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SI... at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 
> 
> 
> 
> 
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From kevinushey at gmail.com  Tue Feb 23 22:48:46 2016
From: kevinushey at gmail.com (Kevin Ushey)
Date: Tue, 23 Feb 2016 13:48:46 -0800
Subject: [R-SIG-Mac] Problems updating RCurl on Yosemite
In-Reply-To: <DC37DE02-B55A-4713-8EB1-1FA826596A94@gmail.com>
References: <DB845001-C777-4D89-B39A-F7293E8E36BA@gmail.com>
	<02286075-e9b7-47c2-bf2e-f8167408adce@googlegroups.com>
	<DC37DE02-B55A-4713-8EB1-1FA826596A94@gmail.com>
Message-ID: <CAJXgQP0dRV1ks1RW5qhUG+MT1q7g-xOUnE7t5C-EGyuMVjU==A@mail.gmail.com>

Are you able to locate a version of libcurl using mdfind, e.g. what
does this print:

    mdfind libcurl.4.dylib

You might also try installing homebrew curl (brew install curl) if you
haven't already.

Kevin

On Tue, Feb 23, 2016 at 1:39 PM, peter dalgaard <pdalgd at gmail.com> wrote:
> In general, homebrewers get to drink their own booze. (i.e., we don't support it.)
>
> However, for R itself, it is necessary for me to set CURL_CONFIG in order not to pick up the curl-config from MacPorts. You might want to check if you are running into the same issue in reverse.
>
> -pd
>
>
>> On 15 Feb 2016, at 18:33 , dkelley at broadinstitute.org wrote:
>>
>> Same exact problem here.
>>
>> On Wednesday, February 10, 2016 at 11:31:54 PM UTC-5, M. Henry Linder wrote:
>> Hello all
>> I have R 3.1.0 installed on my computer, and at some point in the past had successfully installed RCurl (1.95-4.3). However, I am now unable to update RCurl, and in spite of my best efforts at googling, I can?t seem to get things working.
>>
>> The error I receive is
>>
>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>   unable to load shared object '/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so':
>>   dlopen(/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so, 6): Library not loaded: libcurl.4.dylib
>>   Referenced from: /usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so
>>   Reason: image not found
>>
>> It seems likely that R is looking to the system curl:
>>
>> $ which curl
>> /usr/bin/curl
>> $ curl --version
>> curl 7.37.1 (x86_64-apple-darwin14.0) libcurl/7.37.1 SecureTransport zlib/1.2.5
>> Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp smtp smtps telnet tftp
>> Features: AsynchDNS GSS-Negotiate IPv6 Largefile NTLM NTLM_WB SSL libz
>>
>> I have tried installing curl from Homebrew (version 7.42.1) and setting LDFLAGS and CPPFLAGS (and LIBCURL_CFLAGS and LIBCURL_LIBS) to point to this version of curl, to no avail.
>>
>> I?m unsure if there is a way to set these build flags from within R; is that a possible fix? Thank you for any advice you can offer!
>>
>> Best
>> Henry
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SI... at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From pdalgd at gmail.com  Tue Feb 23 22:55:32 2016
From: pdalgd at gmail.com (peter dalgaard)
Date: Tue, 23 Feb 2016 22:55:32 +0100
Subject: [R-SIG-Mac] Problems updating RCurl on Yosemite
In-Reply-To: <CAJXgQP0dRV1ks1RW5qhUG+MT1q7g-xOUnE7t5C-EGyuMVjU==A@mail.gmail.com>
References: <DB845001-C777-4D89-B39A-F7293E8E36BA@gmail.com>
	<02286075-e9b7-47c2-bf2e-f8167408adce@googlegroups.com>
	<DC37DE02-B55A-4713-8EB1-1FA826596A94@gmail.com>
	<CAJXgQP0dRV1ks1RW5qhUG+MT1q7g-xOUnE7t5C-EGyuMVjU==A@mail.gmail.com>
Message-ID: <3545AA87-9BC7-401B-A141-55E062C4163A@gmail.com>

(In case it wasn't clear: I'm not the one using homebrew. So over to Henry and dkelley -pd)

> On 23 Feb 2016, at 22:48 , Kevin Ushey <kevinushey at gmail.com> wrote:
> 
> Are you able to locate a version of libcurl using mdfind, e.g. what
> does this print:
> 
>    mdfind libcurl.4.dylib
> 
> You might also try installing homebrew curl (brew install curl) if you
> haven't already.
> 
> Kevin
> 
> On Tue, Feb 23, 2016 at 1:39 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>> In general, homebrewers get to drink their own booze. (i.e., we don't support it.)
>> 
>> However, for R itself, it is necessary for me to set CURL_CONFIG in order not to pick up the curl-config from MacPorts. You might want to check if you are running into the same issue in reverse.
>> 
>> -pd
>> 
>> 
>>> On 15 Feb 2016, at 18:33 , dkelley at broadinstitute.org wrote:
>>> 
>>> Same exact problem here.
>>> 
>>> On Wednesday, February 10, 2016 at 11:31:54 PM UTC-5, M. Henry Linder wrote:
>>> Hello all
>>> I have R 3.1.0 installed on my computer, and at some point in the past had successfully installed RCurl (1.95-4.3). However, I am now unable to update RCurl, and in spite of my best efforts at googling, I can?t seem to get things working.
>>> 
>>> The error I receive is
>>> 
>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>>  unable to load shared object '/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so':
>>>  dlopen(/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so, 6): Library not loaded: libcurl.4.dylib
>>>  Referenced from: /usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so
>>>  Reason: image not found
>>> 
>>> It seems likely that R is looking to the system curl:
>>> 
>>> $ which curl
>>> /usr/bin/curl
>>> $ curl --version
>>> curl 7.37.1 (x86_64-apple-darwin14.0) libcurl/7.37.1 SecureTransport zlib/1.2.5
>>> Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp smtp smtps telnet tftp
>>> Features: AsynchDNS GSS-Negotiate IPv6 Largefile NTLM NTLM_WB SSL libz
>>> 
>>> I have tried installing curl from Homebrew (version 7.42.1) and setting LDFLAGS and CPPFLAGS (and LIBCURL_CFLAGS and LIBCURL_LIBS) to point to this version of curl, to no avail.
>>> 
>>> I?m unsure if there is a way to set these build flags from within R; is that a possible fix? Thank you for any advice you can offer!
>>> 
>>> Best
>>> Henry
>>>        [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SI... at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jose.conde1 at upr.edu  Wed Feb 24 18:52:30 2016
From: jose.conde1 at upr.edu (Jose G Conde Santiago)
Date: Wed, 24 Feb 2016 13:52:30 -0400
Subject: [R-SIG-Mac] EZR plugin for R Commander
Message-ID: <47DA8B57-FF66-4FEB-89BC-62A1A673C4F6@upr.edu>

Hello.

When I try to recode a list of 20 variables with the ?Recode variables? function of the EZR plugin for R Commander (Active dataset -> Variables -> Recode variables), only the first variable in the list gets recoded. However, all 20 variables get recoded if I use the similar function from the ?Original menu? of R Commander instead.

I am running a late 2012 iMac, OS X El Capit?n 10.11.3, 32 GB of RAM, 3.4 Ghz Intel I7.

XQuartz 2.7.8 

Thanks.

Jos?

Jos? G. Conde, MD, MPH
Professor, School of Medicine
Director, CentIT2
UPR Medical Sciences Campus 

Tel  (787) 763-9401 Fax (787) 758-5206

Email: jose.conde1 at upr.edu

URL: http://rcmi.rcm.upr.edu


From iryna.v.nikolayeva at gmail.com  Tue Feb 23 20:11:06 2016
From: iryna.v.nikolayeva at gmail.com (Iryna Nikolayeva)
Date: Tue, 23 Feb 2016 20:11:06 +0100
Subject: [R-SIG-Mac] Permission denied error while updating R packages
Message-ID: <19FCBA59-A4AD-470F-855B-7EECFEE8068C@gmail.com>

Dear R-Sog-Mac members, 

I have an issue while automatically updating packages in R. 
For the packages installed in my second library, while automatically updating I get the following "Permission denied? messages(details below). 
I suppose I know where this problem comes from: 
I had installed a few different versions of R. 
And now I have 2 library paths: 
> .libPaths() 
[1] "/Users/iryna/Library/R/3.1/library"                                       
[2] "/opt/local/Library/Frameworks/R.framework/Versions/3.1/Resources/library? 

And for some reason R just doesn?t have rights to update packages in my second library. 
Do you know why is that? How should I fix this issue? 



Here is the error message: 

* installing *source* package ?mgcv? ... 
** package ?mgcv? successfully unpacked and MD5 sums checked 
mv: rename /opt/local/Library/Frameworks/R.framework/Versions/3.1/Resources/library/mgcv to /opt/local/Library/Frameworks/R.framework/Versions/3.1/Resources/library/00LOCK-mgcv/mgcv: Permission denied 
Warning in file.copy(f, instdir, TRUE) : 
  problem copying ./NAMESPACE to /opt/local/Library/Frameworks/R.framework/Versions/3.1/Resources/library/mgcv/NAMESPACE: Permission denied 
Warning in file(file, ifelse(append, "a", "w")) : 
  cannot open file '/opt/local/Library/Frameworks/R.framework/Versions/3.1/Resources/library/mgcv/DESCRIPTION': Permission denied 
Error in file(file, ifelse(append, "a", "w")) : 
  cannot open the connection 
ERROR: installing package DESCRIPTION failed for package ?mgcv? 
* removing ?/opt/local/Library/Frameworks/R.framework/Versions/3.1/Resources/library/mgcv? 




Here are some additional information on my settings: 
> version 
 platform       x86_64-apple-darwin13.4.0   
arch           x86_64                      
os             darwin13.4.0                
system         x86_64, darwin13.4.0        
status                                     
major          3                           
minor          1.2                         
year           2014                        
month          10                          
day            31                          
svn rev        66913                       
language       R                           
version.string R version 3.1.2 (2014-10-31)

nickname       Pumpkin Helmet                              

Thanks in advance for your help, 
Iryna Nikolayeva 







	[[alternative HTML version deleted]]


From mhlinder at gmail.com  Wed Feb 24 01:19:37 2016
From: mhlinder at gmail.com (M. Henry Linder)
Date: Tue, 23 Feb 2016 19:19:37 -0500
Subject: [R-SIG-Mac] Problems updating RCurl on Yosemite
In-Reply-To: <3545AA87-9BC7-401B-A141-55E062C4163A@gmail.com>
References: <DB845001-C777-4D89-B39A-F7293E8E36BA@gmail.com>
	<02286075-e9b7-47c2-bf2e-f8167408adce@googlegroups.com>
	<DC37DE02-B55A-4713-8EB1-1FA826596A94@gmail.com>
	<CAJXgQP0dRV1ks1RW5qhUG+MT1q7g-xOUnE7t5C-EGyuMVjU==A@mail.gmail.com>
	<3545AA87-9BC7-401B-A141-55E062C4163A@gmail.com>
Message-ID: <FD2FE245-4DC2-4BA5-A47D-367060516571@gmail.com>

@dkelley: I can?t specifically recall how I resolved this?but I do have the following:

$ grep -i curl ~/.zshrc
export LD_LIBRARY_PATH=/usr/local/Cellar/curl/7.34.0/lib:$LD_LIBRARY_PATH

Henry
> On Feb 23, 2016, at 4:55 PM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> (In case it wasn't clear: I'm not the one using homebrew. So over to Henry and dkelley -pd)
> 
>> On 23 Feb 2016, at 22:48 , Kevin Ushey <kevinushey at gmail.com> wrote:
>> 
>> Are you able to locate a version of libcurl using mdfind, e.g. what
>> does this print:
>> 
>>   mdfind libcurl.4.dylib
>> 
>> You might also try installing homebrew curl (brew install curl) if you
>> haven't already.
>> 
>> Kevin
>> 
>> On Tue, Feb 23, 2016 at 1:39 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>>> In general, homebrewers get to drink their own booze. (i.e., we don't support it.)
>>> 
>>> However, for R itself, it is necessary for me to set CURL_CONFIG in order not to pick up the curl-config from MacPorts. You might want to check if you are running into the same issue in reverse.
>>> 
>>> -pd
>>> 
>>> 
>>>> On 15 Feb 2016, at 18:33 , dkelley at broadinstitute.org wrote:
>>>> 
>>>> Same exact problem here.
>>>> 
>>>> On Wednesday, February 10, 2016 at 11:31:54 PM UTC-5, M. Henry Linder wrote:
>>>> Hello all
>>>> I have R 3.1.0 installed on my computer, and at some point in the past had successfully installed RCurl (1.95-4.3). However, I am now unable to update RCurl, and in spite of my best efforts at googling, I can?t seem to get things working.
>>>> 
>>>> The error I receive is
>>>> 
>>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>>> unable to load shared object '/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so':
>>>> dlopen(/usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so, 6): Library not loaded: libcurl.4.dylib
>>>> Referenced from: /usr/local/Cellar/r/3.1.0/R.framework/Versions/3.1/Resources/library/RCurl/libs/RCurl.so
>>>> Reason: image not found
>>>> 
>>>> It seems likely that R is looking to the system curl:
>>>> 
>>>> $ which curl
>>>> /usr/bin/curl
>>>> $ curl --version
>>>> curl 7.37.1 (x86_64-apple-darwin14.0) libcurl/7.37.1 SecureTransport zlib/1.2.5
>>>> Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp smtp smtps telnet tftp
>>>> Features: AsynchDNS GSS-Negotiate IPv6 Largefile NTLM NTLM_WB SSL libz
>>>> 
>>>> I have tried installing curl from Homebrew (version 7.42.1) and setting LDFLAGS and CPPFLAGS (and LIBCURL_CFLAGS and LIBCURL_LIBS) to point to this version of curl, to no avail.
>>>> 
>>>> I?m unsure if there is a way to set these build flags from within R; is that a possible fix? Thank you for any advice you can offer!
>>>> 
>>>> Best
>>>> Henry
>>>>       [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SI... at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> --
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 


	[[alternative HTML version deleted]]


From josh.izzard at gmail.com  Fri Feb 26 00:42:55 2016
From: josh.izzard at gmail.com (Josh Izzard)
Date: Thu, 25 Feb 2016 15:42:55 -0800 (PST)
Subject: [R-SIG-Mac] Help files not available
In-Reply-To: <BB3FBD5749960C409DFD0882D28CB664E3B5CFF4@IST-EX10MBX-4.ad.bu.edu>
References: <BB3FBD5749960C409DFD0882D28CB664E3B5CFF4@IST-EX10MBX-4.ad.bu.edu>
Message-ID: <e4b535b5-a5d4-45d4-b096-ef01381bebc1@googlegroups.com>

I also have this problem, I do not know what it is from

On Wednesday, February 10, 2016 at 11:44:24 PM UTC-5, Gray, Joshua wrote:
>
> I am having trouble with my R installation after upgrading to El Capitan 
> (although the timing could be entirely coincidental). The help files are 
> not available, for instance: 
>
> > help("lm") 
>
> Opens the help window in the R GUI, but the message there is: Error in 
> file(out, "wt") : cannot open the connection 
>
> Similarly: 
>
> > ?lm 
> Warning message: 
> In file(out, "wt") : 
>   cannot open file 
> '/var/folders/68/x1590pm56yvbbhrkcshd1_yw0000gn/T//RtmpJfjb7P/Rhttpd3bb208bacf': 
> No such file or directory 
> > 
>
> The problem persists after a restart of R and the computer. 
>
> Installation details: R 3.2.1 GUI 1.66 Mavericks build 
> System details: OS X 10.11.1 
>
> Thanks in advance for your help 
>
>
>         [[alternative HTML version deleted]] 
>
> _______________________________________________ 
> R-SIG-Mac mailing list 
> R-SI... at r-project.org <javascript:> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20160225/b19a67b9/attachment-0002.html>

From josh.izzard at gmail.com  Fri Feb 26 00:42:55 2016
From: josh.izzard at gmail.com (Josh Izzard)
Date: Thu, 25 Feb 2016 15:42:55 -0800
Subject: [R-SIG-Mac] Help files not available
In-Reply-To: <BB3FBD5749960C409DFD0882D28CB664E3B5CFF4@IST-EX10MBX-4.ad.bu.edu>
References: <BB3FBD5749960C409DFD0882D28CB664E3B5CFF4@IST-EX10MBX-4.ad.bu.edu>
Message-ID: <e4b535b5-a5d4-45d4-b096-ef01381bebc1@googlegroups.com>

I also have this problem, I do not know what it is from

On Wednesday, February 10, 2016 at 11:44:24 PM UTC-5, Gray, Joshua wrote:
>
> I am having trouble with my R installation after upgrading to El Capitan 
> (although the timing could be entirely coincidental). The help files are 
> not available, for instance: 
>
> > help("lm") 
>
> Opens the help window in the R GUI, but the message there is: Error in 
> file(out, "wt") : cannot open the connection 
>
> Similarly: 
>
> > ?lm 
> Warning message: 
> In file(out, "wt") : 
>   cannot open file 
> '/var/folders/68/x1590pm56yvbbhrkcshd1_yw0000gn/T//RtmpJfjb7P/Rhttpd3bb208bacf': 
> No such file or directory 
> > 
>
> The problem persists after a restart of R and the computer. 
>
> Installation details: R 3.2.1 GUI 1.66 Mavericks build 
> System details: OS X 10.11.1 
>
> Thanks in advance for your help 
>
>
>         [[alternative HTML version deleted]] 
>
> _______________________________________________ 
> R-SIG-Mac mailing list 
> R-SI... at r-project.org <javascript:> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20160225/b19a67b9/attachment-0003.html>

