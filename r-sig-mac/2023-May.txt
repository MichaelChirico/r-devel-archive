From k@@perd@n|e|h@n@en @end|ng |rom gm@||@com  Mon May  1 03:34:27 2023
From: k@@perd@n|e|h@n@en @end|ng |rom gm@||@com (Kasper Daniel Hansen)
Date: Sun, 30 Apr 2023 21:34:27 -0400
Subject: [R-SIG-Mac] 
 symbol not found in flat namespace '___kmpc_critical'
In-Reply-To: <CO6PR01MB7452095DD9B7EC5CF3BD5326CB689@CO6PR01MB7452.prod.exchangelabs.com>
References: <CO6PR01MB74523B895264BB65D487637CCB689@CO6PR01MB7452.prod.exchangelabs.com>
 <CO6PR01MB7452095DD9B7EC5CF3BD5326CB689@CO6PR01MB7452.prod.exchangelabs.com>
Message-ID: <CAC2h7usUVKjW4ckhpJczUUJNvdzrtAE6Ovey4bn6ohr7_pCPKg@mail.gmail.com>

Rodney,

I don't know much about OpenMP and macOS, but note that these days
  https://mac.r-project.org/tools/
says
  "Additional information on the OpenMP page is available for those
interested in OpenMP support which is not supported by Apple, but still
possible with additional libraries."
and links to
  https://mac.r-project.org/openmp/

I _believe_ that this requires the _user_ (or the check/build system) of
the package on macOS to install one of the custom clang compilers listed on
the page. For this reason, I don't think it is trivial to get the
package through CRAN or distribute the package if it links / uses OpenMP. I
could be wrong of course, since it is not something I follow. I am guessing
the best solution (which could be complicated) is to have a configure
script which checks at build time whether the system supports OpenMP. This
feels like something someone has thought about.

Best,
Kasper




On Sat, Apr 29, 2023 at 6:32?PM Sparapani, Rodney via R-SIG-Mac <
r-sig-mac at r-project.org> wrote:

> Oh, that was totally self-inflicted.
> I had commented out PKG_LIBS in Makevars.in
> That does work on Linux with OpenMP somehow.
> However, it does NOT with macOS.  Thanks
>
> --
> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
> Director, Wisconsin Chapter of the American Statistical Association
> Institute for Health and Equity, Division of Biostatistics
> Medical College of Wisconsin, Milwaukee Campus
>
>
> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Sparapani,
> Rodney via R-SIG-Mac <r-sig-mac at r-project.org>
> Date: Saturday, April 29, 2023 at 4:18 PM
> To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> Subject: [R-SIG-Mac] symbol not found in flat namespace '___kmpc_critical'
> ATTENTION: This email originated from a sender outside of MCW. Use caution
> when clicking on links or opening attachments.
> ________________________________
>
> Hi Gang:
>
> After hours of debugging, I?m stuck and hoping that someone has an
> idea of what the issue is here.  Any hints/tips/etc. are greatly
> appreciated!
>
> I?m getting this error from my CRAN package, nftbart.  Right now, I?m
> preparing for a new release: v1.6.  However, I?m stumped by this error
> message that I get when installing with OpenMP.  Without OpenMP,
> everything is fine; however, the package benefits greatly from OpenMP.
>
> I am getting the same results for R 4.2.3 and 4.3.0 RC.  The source code is
> on github at
> https://urldefense.com/v3/__https://github.com/rsparapa/bnptools.git__;!!H8mHWRdzp34!4rScCMt0gCJ2ZzuZjzo9CEWXYOBECh814z0fzF0OiVjfFcc609ThiLvNcCYt4sIk7wrZhld1ErXx7PLOgKyTDw$
> <
> https://urldefense.com/v3/__https:/github.com/rsparapa/bnptools.git__;!!H8mHWRdzp34!4rScCMt0gCJ2ZzuZjzo9CEWXYOBECh814z0fzF0OiVjfFcc609ThiLvNcCYt4sIk7wrZhld1ErXx7PLOgKyTDw$
> >
>
> So, to demonstrate, you just need to do something like this?
>
>
> $ git clone
> https://urldefense.com/v3/__https://github.com/rsparapa/bnptools.git__;!!H8mHWRdzp34!4rScCMt0gCJ2ZzuZjzo9CEWXYOBECh814z0fzF0OiVjfFcc609ThiLvNcCYt4sIk7wrZhld1ErXx7PLOgKyTDw$
> <
> https://urldefense.com/v3/__https:/github.com/rsparapa/bnptools.git__;!!H8mHWRdzp34!4rScCMt0gCJ2ZzuZjzo9CEWXYOBECh814z0fzF0OiVjfFcc609ThiLvNcCYt4sIk7wrZhld1ErXx7PLOgKyTDw$>
> DIR
>
> $ cd DIR
>
> $ R CMD build nftbart
>
> $ R CMD INSTALL nftbart_1.6.tar.gz
>
> * installing to library
> ?/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library?
>
> * installing *source* package ?nftbart? ...
>
> ** using staged installation
>
> checking whether the C++ compiler works... yes
>
> checking for C++ compiler default output file name... a.out
>
> checking for suffix of executables...
>
> checking whether we are cross compiling... no
>
> checking for suffix of object files... o
>
> checking whether we are using the GNU C++ compiler... yes
>
> checking whether clang++ -arch x86_64 -std=gnu++17 accepts -g... yes
>
> checking for clang++ -arch x86_64 -std=gnu++17 option to support OpenMP...
> -lomp -Xclang -fopenmp
>
> configure: creating ./config.status
>
> config.status: creating src/Makevars
>
> ** libs
>
> using C compiler: ?Apple clang version 14.0.3 (clang-1403.0.22.14.1)?
>
> using C++ compiler: ?Apple clang version 14.0.3 (clang-1403.0.22.14.1)?
>
> using SDK: ??
>
> clang -arch x86_64 -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -lomp -Xclang -fopenmp
> -I'/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/Rcpp/include'
> -I/opt/R/x86_64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c
> init.c -o init.o
>
> clang++ -arch x86_64 -std=gnu++17
> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -lomp
> -Xclang -fopenmp
> -I'/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/Rcpp/include'
> -I/opt/R/x86_64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c
> nftbart.cpp -o nftbart.o
>
> clang++ -arch x86_64 -std=gnu++17 -dynamiclib
> -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module
> -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib
> -L/opt/R/x86_64/lib -o nftbart.so init.o nftbart.o
> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
> -Wl,CoreFoundation
>
> installing to
> /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/00LOCK-nftbart/00new/nftbart/libs
>
> ** R
>
> ** data
>
> ** demo
>
> ** byte-compile and prepare package for lazy loading
>
> ** help
>
> *** installing help indices
>
> ** building package indices
>
> ** testing if installed package can be loaded from temporary location
>
> Error: package or namespace load failed for ?nftbart? in dyn.load(file,
> DLLpath = DLLpath, ...):
>
>  unable to load shared object
> '/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/00LOCK-nftbart/00new/nftbart/libs/nftbart.so':
>
>
> dlopen(/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/00LOCK-nftbart/00new/nftbart/libs/nftbart.so,
> 0x0006): symbol not found in flat namespace '___kmpc_critical'
>
> Error: loading failed
>
> Execution halted
>
> ERROR: loading failed
>
> * removing
> ?/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/nftbart?
>
> * restoring previous
> ?/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/nftbart?
>
> > sessionInfo()
> R version 4.3.0 Patched (2023-04-27 r84338)
> Platform: x86_64-apple-darwin20 (64-bit)
> Running under: macOS Ventura 13.2.1
>
> Matrix products: default
> BLAS:
>  /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRblas.0.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;
> LAPACK version 3.11.0
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> time zone: America/Chicago
> tzcode source: internal
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_4.3.0
> >
>
> OpenMP Build: LLVM 14.0.6
>
> $ codesign -d -vv /usr/local/lib/libomp.dylib
>
> Executable=/usr/local/lib/libomp.dylib
>
> Identifier=libomp
>
> Format=Mach-O universal (x86_64 arm64)
>
> CodeDirectory v=20400 size=6506 flags=0x0(none) hashes=198+2
> location=embedded
>
> Signature size=8977
>
> Authority=Developer ID Application: Simon Urbanek (VZLD955F6P)
>
> Authority=Developer ID Certification Authority
>
> Authority=Apple Root CA
>
> Timestamp=Feb 5, 2023 at 4:26:54 PM
>
> Info.plist=not bound
>
> TeamIdentifier=VZLD955F6P
>
> Sealed Resources=none
>
> Internal requirements count=1 size=168
>
> --
> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
> Director, Wisconsin Chapter of the American Statistical Association
> Institute for Health and Equity, Division of Biostatistics
> Medical College of Wisconsin, Milwaukee Campus
>
>         [[alternative HTML version deleted]]
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Best,
Kasper

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Mon May  1 04:59:10 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 1 May 2023 14:59:10 +1200
Subject: [R-SIG-Mac] 
 symbol not found in flat namespace '___kmpc_critical'
In-Reply-To: <CAC2h7usUVKjW4ckhpJczUUJNvdzrtAE6Ovey4bn6ohr7_pCPKg@mail.gmail.com>
References: <CO6PR01MB74523B895264BB65D487637CCB689@CO6PR01MB7452.prod.exchangelabs.com>
 <CO6PR01MB7452095DD9B7EC5CF3BD5326CB689@CO6PR01MB7452.prod.exchangelabs.com>
 <CAC2h7usUVKjW4ckhpJczUUJNvdzrtAE6Ovey4bn6ohr7_pCPKg@mail.gmail.com>
Message-ID: <8FD2F0D3-A417-4779-9491-F436316B8C61@R-project.org>

Given some of the misinformation in this thread I have to clarify a few things for posterity.

Firstly, the issue was very simple one - the package failed to link the omp library which is required and documented at https://mac.r-project.org/openmp/ -- the required flags are:

PKG_CPPFLAGS='-Xclang -fopenmp'
PKG_LIBS=-lomp

and the latter was missing in the package.

Any code using OpenMP must link to the OpenMP run-time library which provides the actual implementation, otherwise it doesn't work.

Second, there are no special compilers required, but the Apple driver don't accept the -fopenmp flag so it has to be specified as above, essentially working around the driver removing it - which is why this is considered experimental.

Finally, the only officially supported way is to use OpenMP flags provided by R. However, the macOS R releases are not built with OpenMP support, because the run-time is not part of macOS and current R doesn't know about the work-arounds. That said, in order to prepare for a possible OpenMP support on macOS, the R 4.3.0 release includes the LLVM OpenMP run-time compatible with Xcode 14.2. This is intended as a stepping stone where the possibly of OpenMP support using Apple compilers is can be tested. R itself currently does not have a provision to leverage this "non-standard" support, but it could be added in the future.

Cheers,
Simon



> On 1/05/2023, at 1:34 PM, Kasper Daniel Hansen <kasperdanielhansen at gmail.com> wrote:
> 
> Rodney,
> 
> I don't know much about OpenMP and macOS, but note that these days
>  https://mac.r-project.org/tools/
> says
>  "Additional information on the OpenMP page is available for those
> interested in OpenMP support which is not supported by Apple, but still
> possible with additional libraries."
> and links to
>  https://mac.r-project.org/openmp/
> 
> I _believe_ that this requires the _user_ (or the check/build system) of
> the package on macOS to install one of the custom clang compilers listed on
> the page. For this reason, I don't think it is trivial to get the
> package through CRAN or distribute the package if it links / uses OpenMP. I
> could be wrong of course, since it is not something I follow. I am guessing
> the best solution (which could be complicated) is to have a configure
> script which checks at build time whether the system supports OpenMP. This
> feels like something someone has thought about.
> 
> Best,
> Kasper
> 
> 
> 
> 
> On Sat, Apr 29, 2023 at 6:32?PM Sparapani, Rodney via R-SIG-Mac <
> r-sig-mac at r-project.org> wrote:
> 
>> Oh, that was totally self-inflicted.
>> I had commented out PKG_LIBS in Makevars.in
>> That does work on Linux with OpenMP somehow.
>> However, it does NOT with macOS.  Thanks
>> 
>> --
>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
>> Director, Wisconsin Chapter of the American Statistical Association
>> Institute for Health and Equity, Division of Biostatistics
>> Medical College of Wisconsin, Milwaukee Campus
>> 
>> 
>> From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Sparapani,
>> Rodney via R-SIG-Mac <r-sig-mac at r-project.org>
>> Date: Saturday, April 29, 2023 at 4:18 PM
>> To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
>> Subject: [R-SIG-Mac] symbol not found in flat namespace '___kmpc_critical'
>> ATTENTION: This email originated from a sender outside of MCW. Use caution
>> when clicking on links or opening attachments.
>> ________________________________
>> 
>> Hi Gang:
>> 
>> After hours of debugging, I?m stuck and hoping that someone has an
>> idea of what the issue is here.  Any hints/tips/etc. are greatly
>> appreciated!
>> 
>> I?m getting this error from my CRAN package, nftbart.  Right now, I?m
>> preparing for a new release: v1.6.  However, I?m stumped by this error
>> message that I get when installing with OpenMP.  Without OpenMP,
>> everything is fine; however, the package benefits greatly from OpenMP.
>> 
>> I am getting the same results for R 4.2.3 and 4.3.0 RC.  The source code is
>> on github at
>> https://urldefense.com/v3/__https://github.com/rsparapa/bnptools.git__;!!H8mHWRdzp34!4rScCMt0gCJ2ZzuZjzo9CEWXYOBECh814z0fzF0OiVjfFcc609ThiLvNcCYt4sIk7wrZhld1ErXx7PLOgKyTDw$
>> <
>> https://urldefense.com/v3/__https:/github.com/rsparapa/bnptools.git__;!!H8mHWRdzp34!4rScCMt0gCJ2ZzuZjzo9CEWXYOBECh814z0fzF0OiVjfFcc609ThiLvNcCYt4sIk7wrZhld1ErXx7PLOgKyTDw$
>>> 
>> 
>> So, to demonstrate, you just need to do something like this?
>> 
>> 
>> $ git clone
>> https://urldefense.com/v3/__https://github.com/rsparapa/bnptools.git__;!!H8mHWRdzp34!4rScCMt0gCJ2ZzuZjzo9CEWXYOBECh814z0fzF0OiVjfFcc609ThiLvNcCYt4sIk7wrZhld1ErXx7PLOgKyTDw$
>> <
>> https://urldefense.com/v3/__https:/github.com/rsparapa/bnptools.git__;!!H8mHWRdzp34!4rScCMt0gCJ2ZzuZjzo9CEWXYOBECh814z0fzF0OiVjfFcc609ThiLvNcCYt4sIk7wrZhld1ErXx7PLOgKyTDw$>
>> DIR
>> 
>> $ cd DIR
>> 
>> $ R CMD build nftbart
>> 
>> $ R CMD INSTALL nftbart_1.6.tar.gz
>> 
>> * installing to library
>> ?/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library?
>> 
>> * installing *source* package ?nftbart? ...
>> 
>> ** using staged installation
>> 
>> checking whether the C++ compiler works... yes
>> 
>> checking for C++ compiler default output file name... a.out
>> 
>> checking for suffix of executables...
>> 
>> checking whether we are cross compiling... no
>> 
>> checking for suffix of object files... o
>> 
>> checking whether we are using the GNU C++ compiler... yes
>> 
>> checking whether clang++ -arch x86_64 -std=gnu++17 accepts -g... yes
>> 
>> checking for clang++ -arch x86_64 -std=gnu++17 option to support OpenMP...
>> -lomp -Xclang -fopenmp
>> 
>> configure: creating ./config.status
>> 
>> config.status: creating src/Makevars
>> 
>> ** libs
>> 
>> using C compiler: ?Apple clang version 14.0.3 (clang-1403.0.22.14.1)?
>> 
>> using C++ compiler: ?Apple clang version 14.0.3 (clang-1403.0.22.14.1)?
>> 
>> using SDK: ??
>> 
>> clang -arch x86_64 -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -lomp -Xclang -fopenmp
>> -I'/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/Rcpp/include'
>> -I/opt/R/x86_64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c
>> init.c -o init.o
>> 
>> clang++ -arch x86_64 -std=gnu++17
>> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -lomp
>> -Xclang -fopenmp
>> -I'/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/Rcpp/include'
>> -I/opt/R/x86_64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c
>> nftbart.cpp -o nftbart.o
>> 
>> clang++ -arch x86_64 -std=gnu++17 -dynamiclib
>> -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module
>> -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib
>> -L/opt/R/x86_64/lib -o nftbart.so init.o nftbart.o
>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>> -Wl,CoreFoundation
>> 
>> installing to
>> /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/00LOCK-nftbart/00new/nftbart/libs
>> 
>> ** R
>> 
>> ** data
>> 
>> ** demo
>> 
>> ** byte-compile and prepare package for lazy loading
>> 
>> ** help
>> 
>> *** installing help indices
>> 
>> ** building package indices
>> 
>> ** testing if installed package can be loaded from temporary location
>> 
>> Error: package or namespace load failed for ?nftbart? in dyn.load(file,
>> DLLpath = DLLpath, ...):
>> 
>> unable to load shared object
>> '/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/00LOCK-nftbart/00new/nftbart/libs/nftbart.so':
>> 
>> 
>> dlopen(/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/00LOCK-nftbart/00new/nftbart/libs/nftbart.so,
>> 0x0006): symbol not found in flat namespace '___kmpc_critical'
>> 
>> Error: loading failed
>> 
>> Execution halted
>> 
>> ERROR: loading failed
>> 
>> * removing
>> ?/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/nftbart?
>> 
>> * restoring previous
>> ?/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library/nftbart?
>> 
>>> sessionInfo()
>> R version 4.3.0 Patched (2023-04-27 r84338)
>> Platform: x86_64-apple-darwin20 (64-bit)
>> Running under: macOS Ventura 13.2.1
>> 
>> Matrix products: default
>> BLAS:
>> /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRblas.0.dylib
>> LAPACK:
>> /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;
>> LAPACK version 3.11.0
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> 
>> time zone: America/Chicago
>> tzcode source: internal
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> loaded via a namespace (and not attached):
>> [1] compiler_4.3.0
>>> 
>> 
>> OpenMP Build: LLVM 14.0.6
>> 
>> $ codesign -d -vv /usr/local/lib/libomp.dylib
>> 
>> Executable=/usr/local/lib/libomp.dylib
>> 
>> Identifier=libomp
>> 
>> Format=Mach-O universal (x86_64 arm64)
>> 
>> CodeDirectory v=20400 size=6506 flags=0x0(none) hashes=198+2
>> location=embedded
>> 
>> Signature size=8977
>> 
>> Authority=Developer ID Application: Simon Urbanek (VZLD955F6P)
>> 
>> Authority=Developer ID Certification Authority
>> 
>> Authority=Apple Root CA
>> 
>> Timestamp=Feb 5, 2023 at 4:26:54 PM
>> 
>> Info.plist=not bound
>> 
>> TeamIdentifier=VZLD955F6P
>> 
>> Sealed Resources=none
>> 
>> Internal requirements count=1 size=168
>> 
>> --
>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
>> Director, Wisconsin Chapter of the American Statistical Association
>> Institute for Health and Equity, Division of Biostatistics
>> Medical College of Wisconsin, Milwaukee Campus
>> 
>>        [[alternative HTML version deleted]]
>> 
>>        [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> -- 
> Best,
> Kasper
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Wed May 17 18:54:04 2023
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Wed, 17 May 2023 12:54:04 -0400
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
Message-ID: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>

Hi All,

I'm trying to generate a `tar.gz` file on a Mac for R package submission to
CRAN but am having issues.

I'm using `devtools`, specifically `build()` and `install()`.

My package relies on compiled code via `Rcpp/RcppArmadillo`.

    build("HACSim_OO")
    ?? R CMD build
?????????????????????????????????????????????????????????????????
    ?  checking for file ?/Users/jarrettphillips/Desktop/HAC
simulation/HACSim_OO/DESCRIPTION? ...
    ?  preparing ?HACSim?:
    ?  checking DESCRIPTION meta-information ...
    ?  cleaning src
    ?  installing the package to process help pages
         -----------------------------------
    ?  installing *source* package ?HACSim? ...
       ** using staged installation
       ** libs
       clang++ -arch arm64 -std=gnu++11 -
I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
 -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
-I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
-I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -Wall
-pedantic -fdiagnostics-color=always -c RcppExports.cpp -o RcppExports.o
       clang++ -arch arm64 -std=gnu++11
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
 -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
-I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
-I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -Wall
-pedantic -fdiagnostics-color=always -c accumulate.cpp -o accumulate.o
       clang++ -arch arm64 -std=gnu++11 -dynamiclib
-Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module
-multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib
-L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
-L/Library/Frameworks/R.framework/Resources/lib -lRlapack
-L/Library/Frameworks/R.framework/Resources/lib -lRblas
-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
-L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
-F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
-Wl,CoreFoundation
       ld: warning: directory not found for option
'-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
       ld: warning: directory not found for option
'-L/opt/R/arm64/gfortran/lib'
       ld: library not found for -lgfortran
       clang: error: linker command failed with exit code 1 (use -v to see
invocation)
       make: *** [HACSim.so] Error 1
       ERROR: compilation failed for package ?HACSim?
    ?  removing
?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
         -----------------------------------
    ERROR: package installation failed
    Error in `(function (command = NULL, args = character(),
error_on_status = TRUE, ?`:
    ! System command 'R' failed
     ---
     Exit status: 1
     stdout & stderr: <printed>
     ---
    Type .Last.error to see the more details.

`clang` is installed (since I am able to run the code within my package)
and I've verified by typing `gcc` in the Mac Terminal. I've also installed
`Homebrew` and `gfortran`, verifying via typing in the Terminal.

Any idea on what's going on and how to fix the issue(s)?

Thanks!

Cheers,

Jarrett

P.S. - I've asked on the R package dev list and after trying a number of
solutions was suggested to try here as it seems to be a macOS issue.

	[[alternative HTML version deleted]]


From r@p@r@p@ @end|ng |rom mcw@edu  Wed May 17 19:07:23 2023
From: r@p@r@p@ @end|ng |rom mcw@edu (Sparapani, Rodney)
Date: Wed, 17 May 2023 17:07:23 +0000
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
In-Reply-To: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
References: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
Message-ID: <CO6PR01MB745293EFF57F8B850E4EB913CB7E9@CO6PR01MB7452.prod.exchangelabs.com>

Hi Jarrett:

Do the two directories exist that clang is warning you about?

'/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
'/opt/R/arm64/gfortran/lib'


--
Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
Director, Wisconsin Chapter of the American Statistical Association
Institute for Health and Equity, Division of Biostatistics
Medical College of Wisconsin, Milwaukee Campus

From: R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Jarrett Phillips <phillipsjarrett1 at gmail.com>
Date: Wednesday, May 17, 2023 at 11:54 AM
To: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: [R-SIG-Mac] Problems compiling with R CMD build and devtools::build()
ATTENTION: This email originated from a sender outside of MCW. Use caution when clicking on links or opening attachments.
________________________________

Hi All,

I'm trying to generate a `tar.gz` file on a Mac for R package submission to
CRAN but am having issues.

I'm using `devtools`, specifically `build()` and `install()`.

My package relies on compiled code via `Rcpp/RcppArmadillo`.

    build("HACSim_OO")
    ?? R CMD build
?????????????????????????????????????????????????????????????????
    ?  checking for file ?/Users/jarrettphillips/Desktop/HAC
simulation/HACSim_OO/DESCRIPTION? ...
    ?  preparing ?HACSim?:
    ?  checking DESCRIPTION meta-information ...
    ?  cleaning src
    ?  installing the package to process help pages
         -----------------------------------
    ?  installing *source* package ?HACSim? ...
       ** using staged installation
       ** libs
       clang++ -arch arm64 -std=gnu++11 -
I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
 -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
-I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
-I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -Wall
-pedantic -fdiagnostics-color=always -c RcppExports.cpp -o RcppExports.o
       clang++ -arch arm64 -std=gnu++11
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
 -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
-I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
-I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -Wall
-pedantic -fdiagnostics-color=always -c accumulate.cpp -o accumulate.o
       clang++ -arch arm64 -std=gnu++11 -dynamiclib
-Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module
-multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib
-L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
-L/Library/Frameworks/R.framework/Resources/lib -lRlapack
-L/Library/Frameworks/R.framework/Resources/lib -lRblas
-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
-L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
-F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
-Wl,CoreFoundation
       ld: warning: directory not found for option
'-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
       ld: warning: directory not found for option
'-L/opt/R/arm64/gfortran/lib'
       ld: library not found for -lgfortran
       clang: error: linker command failed with exit code 1 (use -v to see
invocation)
       make: *** [HACSim.so] Error 1
       ERROR: compilation failed for package ?HACSim?
    ?  removing
?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
         -----------------------------------
    ERROR: package installation failed
    Error in `(function (command = NULL, args = character(),
error_on_status = TRUE, ?`:
    ! System command 'R' failed
     ---
     Exit status: 1
     stdout & stderr: <printed>
     ---
    Type .Last.error to see the more details.

`clang` is installed (since I am able to run the code within my package)
and I've verified by typing `gcc` in the Mac Terminal. I've also installed
`Homebrew` and `gfortran`, verifying via typing in the Terminal.

Any idea on what's going on and how to fix the issue(s)?

Thanks!

Cheers,

Jarrett

P.S. - I've asked on the R package dev list and after trying a number of
solutions was suggested to try here as it seems to be a macOS issue.

        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$<https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$>

	[[alternative HTML version deleted]]


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Wed May 17 19:26:28 2023
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Wed, 17 May 2023 13:26:28 -0400
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
In-Reply-To: <CAMVrHdB3ga4bPLp4m62BVqxoNMFH8MCxovHOH65-WgX5+obiVA@mail.gmail.com>
References: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
 <CO6PR01MB745293EFF57F8B850E4EB913CB7E9@CO6PR01MB7452.prod.exchangelabs.com>
 <CAMVrHdB3ga4bPLp4m62BVqxoNMFH8MCxovHOH65-WgX5+obiVA@mail.gmail.com>
Message-ID: <CAMVrHdCGgAmXDjfq+yVqrEX2HNed1ruiFLNSmZLw0pVqNXau5w@mail.gmail.com>

Hi Rodney,

When I paste the directories into the Terminal, I get

no such file or directory:



suggesting that they don't exist.


Seems like I need to create them (I'm a newbie)?


What should be my next steps?


Thanks!


Cheers,


Jarrett




On Wed, May 17, 2023 at 1:25?PM Jarrett Phillips <phillipsjarrett1 at gmail.com>
wrote:

> Hi Rodney,
>
> When I paste the directories into the Terminal, I get
>
> no such file or directory:
>
>
>
> suggesting that they don't exist.
>
>
> Seems like I need to create them (I'm a newbie)?
>
>
> What should be my next steps?
>
>
> Thanks!
>
>
> Cheers,
>
>
> Jarrett
>
>
>
>
>
> On Wed, May 17, 2023 at 1:07?PM Sparapani, Rodney <rsparapa at mcw.edu>
> wrote:
>
>> Hi Jarrett:
>>
>>
>>
>> Do the two directories exist that clang is warning you about?
>>
>>
>>
>> '/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>> '/opt/R/arm64/gfortran/lib'
>>
>>
>>
>> --
>>
>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
>>
>> Director, Wisconsin Chapter of the American Statistical Association
>>
>> Institute for Health and Equity, Division of Biostatistics
>>
>> Medical College of Wisconsin, Milwaukee Campus
>>
>>
>>
>> *From: *R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Jarrett
>> Phillips <phillipsjarrett1 at gmail.com>
>> *Date: *Wednesday, May 17, 2023 at 11:54 AM
>> *To: *r-sig-mac at r-project.org <r-sig-mac at r-project.org>
>> *Subject: *[R-SIG-Mac] Problems compiling with R CMD build and
>> devtools::build()
>>
>> ATTENTION: This email originated from a sender outside of MCW. Use
>> caution when clicking on links or opening attachments.
>> ________________________________
>>
>> Hi All,
>>
>> I'm trying to generate a `tar.gz` file on a Mac for R package submission
>> to
>> CRAN but am having issues.
>>
>> I'm using `devtools`, specifically `build()` and `install()`.
>>
>> My package relies on compiled code via `Rcpp/RcppArmadillo`.
>>
>>     build("HACSim_OO")
>>     ?? R CMD build
>> ?????????????????????????????????????????????????????????????????
>>     ?  checking for file ?/Users/jarrettphillips/Desktop/HAC
>> simulation/HACSim_OO/DESCRIPTION? ...
>>     ?  preparing ?HACSim?:
>>     ?  checking DESCRIPTION meta-information ...
>>     ?  cleaning src
>>     ?  installing the package to process help pages
>>          -----------------------------------
>>     ?  installing *source* package ?HACSim? ...
>>        ** using staged installation
>>        ** libs
>>        clang++ -arch arm64 -std=gnu++11 -
>> I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>
>>  -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>>
>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -Wall
>> -pedantic -fdiagnostics-color=always -c RcppExports.cpp -o RcppExports.o
>>        clang++ -arch arm64 -std=gnu++11
>> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>
>>  -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>>
>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -Wall
>> -pedantic -fdiagnostics-color=always -c accumulate.cpp -o accumulate.o
>>        clang++ -arch arm64 -std=gnu++11 -dynamiclib
>> -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module
>> -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib
>> -L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
>> -L/Library/Frameworks/R.framework/Resources/lib -lRlapack
>> -L/Library/Frameworks/R.framework/Resources/lib -lRblas
>> -L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
>> -L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>> -Wl,CoreFoundation
>>        ld: warning: directory not found for option
>> '-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>>        ld: warning: directory not found for option
>> '-L/opt/R/arm64/gfortran/lib'
>>        ld: library not found for -lgfortran
>>        clang: error: linker command failed with exit code 1 (use -v to see
>> invocation)
>>        make: *** [HACSim.so] Error 1
>>        ERROR: compilation failed for package ?HACSim?
>>     ?  removing
>>
>> ?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
>>          -----------------------------------
>>     ERROR: package installation failed
>>     Error in `(function (command = NULL, args = character(),
>> error_on_status = TRUE, ?`:
>>     ! System command 'R' failed
>>      ---
>>      Exit status: 1
>>      stdout & stderr: <printed>
>>      ---
>>     Type .Last.error to see the more details.
>>
>> `clang` is installed (since I am able to run the code within my package)
>> and I've verified by typing `gcc` in the Mac Terminal. I've also installed
>> `Homebrew` and `gfortran`, verifying via typing in the Terminal.
>>
>> Any idea on what's going on and how to fix the issue(s)?
>>
>> Thanks!
>>
>> Cheers,
>>
>> Jarrett
>>
>> P.S. - I've asked on the R package dev list and after trying a number of
>> solutions was suggested to try here as it seems to be a macOS issue.
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>>
>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
>> <https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$>
>>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May 17 20:13:05 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 17 May 2023 14:13:05 -0400
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
In-Reply-To: <CAMVrHdCGgAmXDjfq+yVqrEX2HNed1ruiFLNSmZLw0pVqNXau5w@mail.gmail.com>
References: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
 <CO6PR01MB745293EFF57F8B850E4EB913CB7E9@CO6PR01MB7452.prod.exchangelabs.com>
 <CAMVrHdB3ga4bPLp4m62BVqxoNMFH8MCxovHOH65-WgX5+obiVA@mail.gmail.com>
 <CAMVrHdCGgAmXDjfq+yVqrEX2HNed1ruiFLNSmZLw0pVqNXau5w@mail.gmail.com>
Message-ID: <0e7c36fc-aebe-aa6c-685f-f5b8d1208186@gmail.com>

I think the simplest solution is to remove the gfortran you installed, 
and then install it back using the installer on

   https://mac.r-project.org/tools/

Duncan Murdoch

On 17/05/2023 1:26 p.m., Jarrett Phillips wrote:
> Hi Rodney,
> 
> When I paste the directories into the Terminal, I get
> 
> no such file or directory:
> 
> 
> 
> suggesting that they don't exist.
> 
> 
> Seems like I need to create them (I'm a newbie)?
> 
> 
> What should be my next steps?
> 
> 
> Thanks!
> 
> 
> Cheers,
> 
> 
> Jarrett
> 
> 
> 
> 
> On Wed, May 17, 2023 at 1:25?PM Jarrett Phillips <phillipsjarrett1 at gmail.com>
> wrote:
> 
>> Hi Rodney,
>>
>> When I paste the directories into the Terminal, I get
>>
>> no such file or directory:
>>
>>
>>
>> suggesting that they don't exist.
>>
>>
>> Seems like I need to create them (I'm a newbie)?
>>
>>
>> What should be my next steps?
>>
>>
>> Thanks!
>>
>>
>> Cheers,
>>
>>
>> Jarrett
>>
>>
>>
>>
>>
>> On Wed, May 17, 2023 at 1:07?PM Sparapani, Rodney <rsparapa at mcw.edu>
>> wrote:
>>
>>> Hi Jarrett:
>>>
>>>
>>>
>>> Do the two directories exist that clang is warning you about?
>>>
>>>
>>>
>>> '/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>>> '/opt/R/arm64/gfortran/lib'
>>>
>>>
>>>
>>> --
>>>
>>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
>>>
>>> Director, Wisconsin Chapter of the American Statistical Association
>>>
>>> Institute for Health and Equity, Division of Biostatistics
>>>
>>> Medical College of Wisconsin, Milwaukee Campus
>>>
>>>
>>>
>>> *From: *R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of Jarrett
>>> Phillips <phillipsjarrett1 at gmail.com>
>>> *Date: *Wednesday, May 17, 2023 at 11:54 AM
>>> *To: *r-sig-mac at r-project.org <r-sig-mac at r-project.org>
>>> *Subject: *[R-SIG-Mac] Problems compiling with R CMD build and
>>> devtools::build()
>>>
>>> ATTENTION: This email originated from a sender outside of MCW. Use
>>> caution when clicking on links or opening attachments.
>>> ________________________________
>>>
>>> Hi All,
>>>
>>> I'm trying to generate a `tar.gz` file on a Mac for R package submission
>>> to
>>> CRAN but am having issues.
>>>
>>> I'm using `devtools`, specifically `build()` and `install()`.
>>>
>>> My package relies on compiled code via `Rcpp/RcppArmadillo`.
>>>
>>>      build("HACSim_OO")
>>>      ?? R CMD build
>>> ?????????????????????????????????????????????????????????????????
>>>      ?  checking for file ?/Users/jarrettphillips/Desktop/HAC
>>> simulation/HACSim_OO/DESCRIPTION? ...
>>>      ?  preparing ?HACSim?:
>>>      ?  checking DESCRIPTION meta-information ...
>>>      ?  cleaning src
>>>      ?  installing the package to process help pages
>>>           -----------------------------------
>>>      ?  installing *source* package ?HACSim? ...
>>>         ** using staged installation
>>>         ** libs
>>>         clang++ -arch arm64 -std=gnu++11 -
>>> I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>>
>>>   -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>>>
>>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -Wall
>>> -pedantic -fdiagnostics-color=always -c RcppExports.cpp -o RcppExports.o
>>>         clang++ -arch arm64 -std=gnu++11
>>> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>>
>>>   -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>>>
>>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -Wall
>>> -pedantic -fdiagnostics-color=always -c accumulate.cpp -o accumulate.o
>>>         clang++ -arch arm64 -std=gnu++11 -dynamiclib
>>> -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module
>>> -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib
>>> -L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
>>> -L/Library/Frameworks/R.framework/Resources/lib -lRlapack
>>> -L/Library/Frameworks/R.framework/Resources/lib -lRblas
>>> -L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
>>> -L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
>>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>>> -Wl,CoreFoundation
>>>         ld: warning: directory not found for option
>>> '-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>>>         ld: warning: directory not found for option
>>> '-L/opt/R/arm64/gfortran/lib'
>>>         ld: library not found for -lgfortran
>>>         clang: error: linker command failed with exit code 1 (use -v to see
>>> invocation)
>>>         make: *** [HACSim.so] Error 1
>>>         ERROR: compilation failed for package ?HACSim?
>>>      ?  removing
>>>
>>> ?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
>>>           -----------------------------------
>>>      ERROR: package installation failed
>>>      Error in `(function (command = NULL, args = character(),
>>> error_on_status = TRUE, ?`:
>>>      ! System command 'R' failed
>>>       ---
>>>       Exit status: 1
>>>       stdout & stderr: <printed>
>>>       ---
>>>      Type .Last.error to see the more details.
>>>
>>> `clang` is installed (since I am able to run the code within my package)
>>> and I've verified by typing `gcc` in the Mac Terminal. I've also installed
>>> `Homebrew` and `gfortran`, verifying via typing in the Terminal.
>>>
>>> Any idea on what's going on and how to fix the issue(s)?
>>>
>>> Thanks!
>>>
>>> Cheers,
>>>
>>> Jarrett
>>>
>>> P.S. - I've asked on the R package dev list and after trying a number of
>>> solutions was suggested to try here as it seems to be a macOS issue.
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>>
>>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
>>> <https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$>
>>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Wed May 17 20:43:21 2023
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Wed, 17 May 2023 14:43:21 -0400
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
In-Reply-To: <0e7c36fc-aebe-aa6c-685f-f5b8d1208186@gmail.com>
References: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
 <CO6PR01MB745293EFF57F8B850E4EB913CB7E9@CO6PR01MB7452.prod.exchangelabs.com>
 <CAMVrHdB3ga4bPLp4m62BVqxoNMFH8MCxovHOH65-WgX5+obiVA@mail.gmail.com>
 <CAMVrHdCGgAmXDjfq+yVqrEX2HNed1ruiFLNSmZLw0pVqNXau5w@mail.gmail.com>
 <0e7c36fc-aebe-aa6c-685f-f5b8d1208186@gmail.com>
Message-ID: <CAMVrHdDu0VGzmxGfEwwuOFViZn+j4KO5Q65NPkF4i_7uW-qRnA@mail.gmail.com>

Hi Duncan,

I did exactly that, but still got the error above when I try building in
both RStudio via devtools::build() and the Terminal via R CMD build.

To confirm that the right gfortran successfully installed in the correct
location, I did

jarrettphillips at Jarretts-MacBook-Pro ~ % /opt/gfortran/bin/gfortran

*aarch64-apple-darwin20.0-gfortran:* *fatal error: *no input files

compilation terminated.


Any other ideas?




On Wed, May 17, 2023 at 2:13?PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> I think the simplest solution is to remove the gfortran you installed,
> and then install it back using the installer on
>
>    https://mac.r-project.org/tools/
>
> Duncan Murdoch
>
> On 17/05/2023 1:26 p.m., Jarrett Phillips wrote:
> > Hi Rodney,
> >
> > When I paste the directories into the Terminal, I get
> >
> > no such file or directory:
> >
> >
> >
> > suggesting that they don't exist.
> >
> >
> > Seems like I need to create them (I'm a newbie)?
> >
> >
> > What should be my next steps?
> >
> >
> > Thanks!
> >
> >
> > Cheers,
> >
> >
> > Jarrett
> >
> >
> >
> >
> > On Wed, May 17, 2023 at 1:25?PM Jarrett Phillips <
> phillipsjarrett1 at gmail.com>
> > wrote:
> >
> >> Hi Rodney,
> >>
> >> When I paste the directories into the Terminal, I get
> >>
> >> no such file or directory:
> >>
> >>
> >>
> >> suggesting that they don't exist.
> >>
> >>
> >> Seems like I need to create them (I'm a newbie)?
> >>
> >>
> >> What should be my next steps?
> >>
> >>
> >> Thanks!
> >>
> >>
> >> Cheers,
> >>
> >>
> >> Jarrett
> >>
> >>
> >>
> >>
> >>
> >> On Wed, May 17, 2023 at 1:07?PM Sparapani, Rodney <rsparapa at mcw.edu>
> >> wrote:
> >>
> >>> Hi Jarrett:
> >>>
> >>>
> >>>
> >>> Do the two directories exist that clang is warning you about?
> >>>
> >>>
> >>>
> >>> '/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
> >>> '/opt/R/arm64/gfortran/lib'
> >>>
> >>>
> >>>
> >>> --
> >>>
> >>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
> >>>
> >>> Director, Wisconsin Chapter of the American Statistical Association
> >>>
> >>> Institute for Health and Equity, Division of Biostatistics
> >>>
> >>> Medical College of Wisconsin, Milwaukee Campus
> >>>
> >>>
> >>>
> >>> *From: *R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of
> Jarrett
> >>> Phillips <phillipsjarrett1 at gmail.com>
> >>> *Date: *Wednesday, May 17, 2023 at 11:54 AM
> >>> *To: *r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> >>> *Subject: *[R-SIG-Mac] Problems compiling with R CMD build and
> >>> devtools::build()
> >>>
> >>> ATTENTION: This email originated from a sender outside of MCW. Use
> >>> caution when clicking on links or opening attachments.
> >>> ________________________________
> >>>
> >>> Hi All,
> >>>
> >>> I'm trying to generate a `tar.gz` file on a Mac for R package
> submission
> >>> to
> >>> CRAN but am having issues.
> >>>
> >>> I'm using `devtools`, specifically `build()` and `install()`.
> >>>
> >>> My package relies on compiled code via `Rcpp/RcppArmadillo`.
> >>>
> >>>      build("HACSim_OO")
> >>>      ?? R CMD build
> >>> ?????????????????????????????????????????????????????????????????
> >>>      ?  checking for file ?/Users/jarrettphillips/Desktop/HAC
> >>> simulation/HACSim_OO/DESCRIPTION? ...
> >>>      ?  preparing ?HACSim?:
> >>>      ?  checking DESCRIPTION meta-information ...
> >>>      ?  cleaning src
> >>>      ?  installing the package to process help pages
> >>>           -----------------------------------
> >>>      ?  installing *source* package ?HACSim? ...
> >>>         ** using staged installation
> >>>         ** libs
> >>>         clang++ -arch arm64 -std=gnu++11 -
> >>> I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
> >>>
> >>>
>  -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
> >>>
> >>>
> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
> >>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2
> -Wall
> >>> -pedantic -fdiagnostics-color=always -c RcppExports.cpp -o
> RcppExports.o
> >>>         clang++ -arch arm64 -std=gnu++11
> >>> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
> >>>
> >>>
>  -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
> >>>
> >>>
> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
> >>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2
> -Wall
> >>> -pedantic -fdiagnostics-color=always -c accumulate.cpp -o accumulate.o
> >>>         clang++ -arch arm64 -std=gnu++11 -dynamiclib
> >>> -Wl,-headerpad_max_install_names -undefined dynamic_lookup
> -single_module
> >>> -multiply_defined suppress
> -L/Library/Frameworks/R.framework/Resources/lib
> >>> -L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
> >>> -L/Library/Frameworks/R.framework/Resources/lib -lRlapack
> >>> -L/Library/Frameworks/R.framework/Resources/lib -lRblas
> >>> -L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
> >>> -L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
> >>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
> >>> -Wl,CoreFoundation
> >>>         ld: warning: directory not found for option
> >>> '-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
> >>>         ld: warning: directory not found for option
> >>> '-L/opt/R/arm64/gfortran/lib'
> >>>         ld: library not found for -lgfortran
> >>>         clang: error: linker command failed with exit code 1 (use -v
> to see
> >>> invocation)
> >>>         make: *** [HACSim.so] Error 1
> >>>         ERROR: compilation failed for package ?HACSim?
> >>>      ?  removing
> >>>
> >>>
> ?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
> >>>           -----------------------------------
> >>>      ERROR: package installation failed
> >>>      Error in `(function (command = NULL, args = character(),
> >>> error_on_status = TRUE, ?`:
> >>>      ! System command 'R' failed
> >>>       ---
> >>>       Exit status: 1
> >>>       stdout & stderr: <printed>
> >>>       ---
> >>>      Type .Last.error to see the more details.
> >>>
> >>> `clang` is installed (since I am able to run the code within my
> package)
> >>> and I've verified by typing `gcc` in the Mac Terminal. I've also
> installed
> >>> `Homebrew` and `gfortran`, verifying via typing in the Terminal.
> >>>
> >>> Any idea on what's going on and how to fix the issue(s)?
> >>>
> >>> Thanks!
> >>>
> >>> Cheers,
> >>>
> >>> Jarrett
> >>>
> >>> P.S. - I've asked on the R package dev list and after trying a number
> of
> >>> solutions was suggested to try here as it seems to be a macOS issue.
> >>>
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org
> >>>
> >>>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
> >>> <
> https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
> >
> >>>
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May 17 22:30:22 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 17 May 2023 16:30:22 -0400
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
In-Reply-To: <CAMVrHdDu0VGzmxGfEwwuOFViZn+j4KO5Q65NPkF4i_7uW-qRnA@mail.gmail.com>
References: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
 <CO6PR01MB745293EFF57F8B850E4EB913CB7E9@CO6PR01MB7452.prod.exchangelabs.com>
 <CAMVrHdB3ga4bPLp4m62BVqxoNMFH8MCxovHOH65-WgX5+obiVA@mail.gmail.com>
 <CAMVrHdCGgAmXDjfq+yVqrEX2HNed1ruiFLNSmZLw0pVqNXau5w@mail.gmail.com>
 <0e7c36fc-aebe-aa6c-685f-f5b8d1208186@gmail.com>
 <CAMVrHdDu0VGzmxGfEwwuOFViZn+j4KO5Q65NPkF4i_7uW-qRnA@mail.gmail.com>
Message-ID: <8191e077-b817-55c3-dca0-095605221c30@gmail.com>

Sorry, I don't have an ARM64 Mac.  On my Intel Mac, gfortran is located 
somewhere else, not in the location you listed.  The output 
corresponding to the line that failed on your system looks like this on 
mine:

clang++ -arch x86_64 -std=gnu++11 -dynamiclib 
-Wl,-headerpad_max_install_names -undefined dynamic_lookup 
-single_module -multiply_defined suppress 
-L/Library/Frameworks/R.framework/Resources/lib -L/opt/R/x86_64/lib -o 
HACSim.so RcppExports.o accumulate.o 
-L/Library/Frameworks/R.framework/Resources/lib -lRlapack 
-L/Library/Frameworks/R.framework/Resources/lib -lRblas 
-L/opt/gfortran/lib/gcc/x86_64-apple-darwin20.0/12.2.0 
-L/opt/gfortran/lib -lgfortran -lquadmath 
-F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework 
-Wl,CoreFoundation


Notice that mine has

  -L/opt/gfortran/lib/gcc/x86_64-apple-darwin20.0/12.2.0
  -L/opt/gfortran/lib
  -lgfortran

where yours had

  -L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
  -L/opt/R/arm64/gfortran/lib
  -lgfortran

i.e. gfortran is in /opt/gfortran, not /opt/R/arm64/gfortran.  But I 
don't know if that difference is expected or not.

Duncan Murdoch

On 17/05/2023 2:43 p.m., Jarrett Phillips wrote:
> Hi Duncan,
> 
> I did exactly that, but still got?the error above when I?try?building in 
> both RStudio via devtools::build() and the Terminal via R CMD build.
> 
> To confirm that the right gfortran successfully installed in the correct 
> location, I did
> 
> jarrettphillips at Jarretts-MacBook-Pro ~ % /opt/gfortran/bin/gfortran
> 
> *aarch64-apple-darwin20.0-gfortran:* *fatal error: *no input files
> 
> compilation terminated.
> 
> 
> Any other ideas?
> 
> 
> 
> 
> On Wed, May 17, 2023 at 2:13?PM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     I think the simplest solution is to remove the gfortran you installed,
>     and then install it back using the installer on
> 
>     https://mac.r-project.org/tools/ <https://mac.r-project.org/tools/>
> 
>     Duncan Murdoch
> 
>     On 17/05/2023 1:26 p.m., Jarrett Phillips wrote:
>      > Hi Rodney,
>      >
>      > When I paste the directories into the Terminal, I get
>      >
>      > no such file or directory:
>      >
>      >
>      >
>      > suggesting that they don't exist.
>      >
>      >
>      > Seems like I need to create them (I'm a newbie)?
>      >
>      >
>      > What should be my next steps?
>      >
>      >
>      > Thanks!
>      >
>      >
>      > Cheers,
>      >
>      >
>      > Jarrett
>      >
>      >
>      >
>      >
>      > On Wed, May 17, 2023 at 1:25?PM Jarrett Phillips
>     <phillipsjarrett1 at gmail.com <mailto:phillipsjarrett1 at gmail.com>>
>      > wrote:
>      >
>      >> Hi Rodney,
>      >>
>      >> When I paste the directories into the Terminal, I get
>      >>
>      >> no such file or directory:
>      >>
>      >>
>      >>
>      >> suggesting that they don't exist.
>      >>
>      >>
>      >> Seems like I need to create them (I'm a newbie)?
>      >>
>      >>
>      >> What should be my next steps?
>      >>
>      >>
>      >> Thanks!
>      >>
>      >>
>      >> Cheers,
>      >>
>      >>
>      >> Jarrett
>      >>
>      >>
>      >>
>      >>
>      >>
>      >> On Wed, May 17, 2023 at 1:07?PM Sparapani, Rodney
>     <rsparapa at mcw.edu <mailto:rsparapa at mcw.edu>>
>      >> wrote:
>      >>
>      >>> Hi Jarrett:
>      >>>
>      >>>
>      >>>
>      >>> Do the two directories exist that clang is warning you about?
>      >>>
>      >>>
>      >>>
>      >>> '/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>      >>> '/opt/R/arm64/gfortran/lib'
>      >>>
>      >>>
>      >>>
>      >>> --
>      >>>
>      >>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
>      >>>
>      >>> Director, Wisconsin Chapter of the American Statistical Association
>      >>>
>      >>> Institute for Health and Equity, Division of Biostatistics
>      >>>
>      >>> Medical College of Wisconsin, Milwaukee Campus
>      >>>
>      >>>
>      >>>
>      >>> *From: *R-SIG-Mac <r-sig-mac-bounces at r-project.org
>     <mailto:r-sig-mac-bounces at r-project.org>> on behalf of Jarrett
>      >>> Phillips <phillipsjarrett1 at gmail.com
>     <mailto:phillipsjarrett1 at gmail.com>>
>      >>> *Date: *Wednesday, May 17, 2023 at 11:54 AM
>      >>> *To: *r-sig-mac at r-project.org <mailto:r-sig-mac at r-project.org>
>     <r-sig-mac at r-project.org <mailto:r-sig-mac at r-project.org>>
>      >>> *Subject: *[R-SIG-Mac] Problems compiling with R CMD build and
>      >>> devtools::build()
>      >>>
>      >>> ATTENTION: This email originated from a sender outside of MCW. Use
>      >>> caution when clicking on links or opening attachments.
>      >>> ________________________________
>      >>>
>      >>> Hi All,
>      >>>
>      >>> I'm trying to generate a `tar.gz` file on a Mac for R package
>     submission
>      >>> to
>      >>> CRAN but am having issues.
>      >>>
>      >>> I'm using `devtools`, specifically `build()` and `install()`.
>      >>>
>      >>> My package relies on compiled code via `Rcpp/RcppArmadillo`.
>      >>>
>      >>>? ? ? build("HACSim_OO")
>      >>>? ? ? ?? R CMD build
>      >>> ?????????????????????????????????????????????????????????????????
>      >>>? ? ? ?? checking for file ?/Users/jarrettphillips/Desktop/HAC
>      >>> simulation/HACSim_OO/DESCRIPTION? ...
>      >>>? ? ? ?? preparing ?HACSim?:
>      >>>? ? ? ?? checking DESCRIPTION meta-information ...
>      >>>? ? ? ?? cleaning src
>      >>>? ? ? ?? installing the package to process help pages
>      >>>? ? ? ? ? ?-----------------------------------
>      >>>? ? ? ?? installing *source* package ?HACSim? ...
>      >>>? ? ? ? ?** using staged installation
>      >>>? ? ? ? ?** libs
>      >>>? ? ? ? ?clang++ -arch arm64 -std=gnu++11 -
>      >>> I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>      >>>
>      >>> 
>      ?-I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>      >>>
>      >>>
>     -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>      >>> -I/opt/R/arm64/include? ? -fPIC? -falign-functions=64 -Wall -g
>     -O2? -Wall
>      >>> -pedantic -fdiagnostics-color=always -c RcppExports.cpp -o
>     RcppExports.o
>      >>>? ? ? ? ?clang++ -arch arm64 -std=gnu++11
>      >>> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>      >>>
>      >>> 
>      ?-I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>      >>>
>      >>>
>     -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>      >>> -I/opt/R/arm64/include? ? -fPIC? -falign-functions=64 -Wall -g
>     -O2? -Wall
>      >>> -pedantic -fdiagnostics-color=always -c accumulate.cpp -o
>     accumulate.o
>      >>>? ? ? ? ?clang++ -arch arm64 -std=gnu++11 -dynamiclib
>      >>> -Wl,-headerpad_max_install_names -undefined dynamic_lookup
>     -single_module
>      >>> -multiply_defined suppress
>     -L/Library/Frameworks/R.framework/Resources/lib
>      >>> -L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
>      >>> -L/Library/Frameworks/R.framework/Resources/lib -lRlapack
>      >>> -L/Library/Frameworks/R.framework/Resources/lib -lRblas
>      >>> -L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
>      >>> -L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
>      >>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>      >>> -Wl,CoreFoundation
>      >>>? ? ? ? ?ld: warning: directory not found for option
>      >>> '-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>      >>>? ? ? ? ?ld: warning: directory not found for option
>      >>> '-L/opt/R/arm64/gfortran/lib'
>      >>>? ? ? ? ?ld: library not found for -lgfortran
>      >>>? ? ? ? ?clang: error: linker command failed with exit code 1
>     (use -v to see
>      >>> invocation)
>      >>>? ? ? ? ?make: *** [HACSim.so] Error 1
>      >>>? ? ? ? ?ERROR: compilation failed for package ?HACSim?
>      >>>? ? ? ?? removing
>      >>>
>      >>>
>     ?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
>      >>>? ? ? ? ? ?-----------------------------------
>      >>>? ? ? ERROR: package installation failed
>      >>>? ? ? Error in `(function (command = NULL, args = character(),
>      >>> error_on_status = TRUE, ?`:
>      >>>? ? ? ! System command 'R' failed
>      >>>? ? ? ?---
>      >>>? ? ? ?Exit status: 1
>      >>>? ? ? ?stdout & stderr: <printed>
>      >>>? ? ? ?---
>      >>>? ? ? Type .Last.error to see the more details.
>      >>>
>      >>> `clang` is installed (since I am able to run the code within my
>     package)
>      >>> and I've verified by typing `gcc` in the Mac Terminal. I've
>     also installed
>      >>> `Homebrew` and `gfortran`, verifying via typing in the Terminal.
>      >>>
>      >>> Any idea on what's going on and how to fix the issue(s)?
>      >>>
>      >>> Thanks!
>      >>>
>      >>> Cheers,
>      >>>
>      >>> Jarrett
>      >>>
>      >>> P.S. - I've asked on the R package dev list and after trying a
>     number of
>      >>> solutions was suggested to try here as it seems to be a macOS
>     issue.
>      >>>
>      >>>? ? ? ? ? [[alternative HTML version deleted]]
>      >>>
>      >>> _______________________________________________
>      >>> R-SIG-Mac mailing list
>      >>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>      >>>
>      >>>
>     https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$ <https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$>
>      >>>
>     <https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$ <https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$>>
>      >>>
>      >>
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > _______________________________________________
>      > R-SIG-Mac mailing list
>      > R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>      > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>     <https://stat.ethz.ch/mailman/listinfo/r-sig-mac>
>


From @|mon@urb@nek @end|ng |rom R-project@org  Wed May 17 22:59:18 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 18 May 2023 08:59:18 +1200
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
In-Reply-To: <CAMVrHdDu0VGzmxGfEwwuOFViZn+j4KO5Q65NPkF4i_7uW-qRnA@mail.gmail.com>
References: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
 <CO6PR01MB745293EFF57F8B850E4EB913CB7E9@CO6PR01MB7452.prod.exchangelabs.com>
 <CAMVrHdB3ga4bPLp4m62BVqxoNMFH8MCxovHOH65-WgX5+obiVA@mail.gmail.com>
 <CAMVrHdCGgAmXDjfq+yVqrEX2HNed1ruiFLNSmZLw0pVqNXau5w@mail.gmail.com>
 <0e7c36fc-aebe-aa6c-685f-f5b8d1208186@gmail.com>
 <CAMVrHdDu0VGzmxGfEwwuOFViZn+j4KO5Q65NPkF4i_7uW-qRnA@mail.gmail.com>
Message-ID: <FF4D5CD5-2EA3-4659-881C-6B1D694AC52B@R-project.org>

Jarrett,

Duncan's suggestion was correct, but you are using older R, so I'd recommend simply upgrading R to the latest release.

If you want to use old R, you have to install the older Fortran binaries that match your R version, but that's not entirely trivial so it's easier to just upgrade R instead.

Cheers,
Simon


> On 18/05/2023, at 6:43 AM, Jarrett Phillips <phillipsjarrett1 at gmail.com> wrote:
> 
> Hi Duncan,
> 
> I did exactly that, but still got the error above when I try building in
> both RStudio via devtools::build() and the Terminal via R CMD build.
> 
> To confirm that the right gfortran successfully installed in the correct
> location, I did
> 
> jarrettphillips at Jarretts-MacBook-Pro ~ % /opt/gfortran/bin/gfortran
> 
> *aarch64-apple-darwin20.0-gfortran:* *fatal error: *no input files
> 
> compilation terminated.
> 
> 
> Any other ideas?
> 
> 
> 
> 
> On Wed, May 17, 2023 at 2:13?PM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
> 
>> I think the simplest solution is to remove the gfortran you installed,
>> and then install it back using the installer on
>> 
>>   https://mac.r-project.org/tools/
>> 
>> Duncan Murdoch
>> 
>> On 17/05/2023 1:26 p.m., Jarrett Phillips wrote:
>>> Hi Rodney,
>>> 
>>> When I paste the directories into the Terminal, I get
>>> 
>>> no such file or directory:
>>> 
>>> 
>>> 
>>> suggesting that they don't exist.
>>> 
>>> 
>>> Seems like I need to create them (I'm a newbie)?
>>> 
>>> 
>>> What should be my next steps?
>>> 
>>> 
>>> Thanks!
>>> 
>>> 
>>> Cheers,
>>> 
>>> 
>>> Jarrett
>>> 
>>> 
>>> 
>>> 
>>> On Wed, May 17, 2023 at 1:25?PM Jarrett Phillips <
>> phillipsjarrett1 at gmail.com>
>>> wrote:
>>> 
>>>> Hi Rodney,
>>>> 
>>>> When I paste the directories into the Terminal, I get
>>>> 
>>>> no such file or directory:
>>>> 
>>>> 
>>>> 
>>>> suggesting that they don't exist.
>>>> 
>>>> 
>>>> Seems like I need to create them (I'm a newbie)?
>>>> 
>>>> 
>>>> What should be my next steps?
>>>> 
>>>> 
>>>> Thanks!
>>>> 
>>>> 
>>>> Cheers,
>>>> 
>>>> 
>>>> Jarrett
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> On Wed, May 17, 2023 at 1:07?PM Sparapani, Rodney <rsparapa at mcw.edu>
>>>> wrote:
>>>> 
>>>>> Hi Jarrett:
>>>>> 
>>>>> 
>>>>> 
>>>>> Do the two directories exist that clang is warning you about?
>>>>> 
>>>>> 
>>>>> 
>>>>> '/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>>>>> '/opt/R/arm64/gfortran/lib'
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> 
>>>>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
>>>>> 
>>>>> Director, Wisconsin Chapter of the American Statistical Association
>>>>> 
>>>>> Institute for Health and Equity, Division of Biostatistics
>>>>> 
>>>>> Medical College of Wisconsin, Milwaukee Campus
>>>>> 
>>>>> 
>>>>> 
>>>>> *From: *R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of
>> Jarrett
>>>>> Phillips <phillipsjarrett1 at gmail.com>
>>>>> *Date: *Wednesday, May 17, 2023 at 11:54 AM
>>>>> *To: *r-sig-mac at r-project.org <r-sig-mac at r-project.org>
>>>>> *Subject: *[R-SIG-Mac] Problems compiling with R CMD build and
>>>>> devtools::build()
>>>>> 
>>>>> ATTENTION: This email originated from a sender outside of MCW. Use
>>>>> caution when clicking on links or opening attachments.
>>>>> ________________________________
>>>>> 
>>>>> Hi All,
>>>>> 
>>>>> I'm trying to generate a `tar.gz` file on a Mac for R package
>> submission
>>>>> to
>>>>> CRAN but am having issues.
>>>>> 
>>>>> I'm using `devtools`, specifically `build()` and `install()`.
>>>>> 
>>>>> My package relies on compiled code via `Rcpp/RcppArmadillo`.
>>>>> 
>>>>>     build("HACSim_OO")
>>>>>     ?? R CMD build
>>>>> ?????????????????????????????????????????????????????????????????
>>>>>     ?  checking for file ?/Users/jarrettphillips/Desktop/HAC
>>>>> simulation/HACSim_OO/DESCRIPTION? ...
>>>>>     ?  preparing ?HACSim?:
>>>>>     ?  checking DESCRIPTION meta-information ...
>>>>>     ?  cleaning src
>>>>>     ?  installing the package to process help pages
>>>>>          -----------------------------------
>>>>>     ?  installing *source* package ?HACSim? ...
>>>>>        ** using staged installation
>>>>>        ** libs
>>>>>        clang++ -arch arm64 -std=gnu++11 -
>>>>> I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>>>> 
>>>>> 
>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>>>>> 
>>>>> 
>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>>>>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2
>> -Wall
>>>>> -pedantic -fdiagnostics-color=always -c RcppExports.cpp -o
>> RcppExports.o
>>>>>        clang++ -arch arm64 -std=gnu++11
>>>>> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>>>> 
>>>>> 
>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>>>>> 
>>>>> 
>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>>>>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2
>> -Wall
>>>>> -pedantic -fdiagnostics-color=always -c accumulate.cpp -o accumulate.o
>>>>>        clang++ -arch arm64 -std=gnu++11 -dynamiclib
>>>>> -Wl,-headerpad_max_install_names -undefined dynamic_lookup
>> -single_module
>>>>> -multiply_defined suppress
>> -L/Library/Frameworks/R.framework/Resources/lib
>>>>> -L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
>>>>> -L/Library/Frameworks/R.framework/Resources/lib -lRlapack
>>>>> -L/Library/Frameworks/R.framework/Resources/lib -lRblas
>>>>> -L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
>>>>> -L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
>>>>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>>>>> -Wl,CoreFoundation
>>>>>        ld: warning: directory not found for option
>>>>> '-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>>>>>        ld: warning: directory not found for option
>>>>> '-L/opt/R/arm64/gfortran/lib'
>>>>>        ld: library not found for -lgfortran
>>>>>        clang: error: linker command failed with exit code 1 (use -v
>> to see
>>>>> invocation)
>>>>>        make: *** [HACSim.so] Error 1
>>>>>        ERROR: compilation failed for package ?HACSim?
>>>>>     ?  removing
>>>>> 
>>>>> 
>> ?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
>>>>>          -----------------------------------
>>>>>     ERROR: package installation failed
>>>>>     Error in `(function (command = NULL, args = character(),
>>>>> error_on_status = TRUE, ?`:
>>>>>     ! System command 'R' failed
>>>>>      ---
>>>>>      Exit status: 1
>>>>>      stdout & stderr: <printed>
>>>>>      ---
>>>>>     Type .Last.error to see the more details.
>>>>> 
>>>>> `clang` is installed (since I am able to run the code within my
>> package)
>>>>> and I've verified by typing `gcc` in the Mac Terminal. I've also
>> installed
>>>>> `Homebrew` and `gfortran`, verifying via typing in the Terminal.
>>>>> 
>>>>> Any idea on what's going on and how to fix the issue(s)?
>>>>> 
>>>>> Thanks!
>>>>> 
>>>>> Cheers,
>>>>> 
>>>>> Jarrett
>>>>> 
>>>>> P.S. - I've asked on the R package dev list and after trying a number
>> of
>>>>> solutions was suggested to try here as it seems to be a macOS issue.
>>>>> 
>>>>>         [[alternative HTML version deleted]]
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> 
>>>>> 
>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
>>>>> <
>> https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
>>> 
>>>>> 
>>>> 
>>> 
>>>      [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Wed May 17 23:30:58 2023
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Wed, 17 May 2023 17:30:58 -0400
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
In-Reply-To: <FF4D5CD5-2EA3-4659-881C-6B1D694AC52B@R-project.org>
References: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
 <CO6PR01MB745293EFF57F8B850E4EB913CB7E9@CO6PR01MB7452.prod.exchangelabs.com>
 <CAMVrHdB3ga4bPLp4m62BVqxoNMFH8MCxovHOH65-WgX5+obiVA@mail.gmail.com>
 <CAMVrHdCGgAmXDjfq+yVqrEX2HNed1ruiFLNSmZLw0pVqNXau5w@mail.gmail.com>
 <0e7c36fc-aebe-aa6c-685f-f5b8d1208186@gmail.com>
 <CAMVrHdDu0VGzmxGfEwwuOFViZn+j4KO5Q65NPkF4i_7uW-qRnA@mail.gmail.com>
 <FF4D5CD5-2EA3-4659-881C-6B1D694AC52B@R-project.org>
Message-ID: <CAMVrHdC_PB-NsveRfcEyhGXK_1Jy8HZBEy7yA7b8byG1U6Hc_Q@mail.gmail.com>

Thanks Simon,

Removing the old gfortran and updating R to the latest version (4.3.0)
fixed everything.

Now I'm able to build and install without issues.

I'll be sure to update R every time a new version is released.

Cheers,

Jarrett

On Wed, May 17, 2023 at 4:59?PM Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> Jarrett,
>
> Duncan's suggestion was correct, but you are using older R, so I'd
> recommend simply upgrading R to the latest release.
>
> If you want to use old R, you have to install the older Fortran binaries
> that match your R version, but that's not entirely trivial so it's easier
> to just upgrade R instead.
>
> Cheers,
> Simon
>
>
> > On 18/05/2023, at 6:43 AM, Jarrett Phillips <phillipsjarrett1 at gmail.com>
> wrote:
> >
> > Hi Duncan,
> >
> > I did exactly that, but still got the error above when I try building in
> > both RStudio via devtools::build() and the Terminal via R CMD build.
> >
> > To confirm that the right gfortran successfully installed in the correct
> > location, I did
> >
> > jarrettphillips at Jarretts-MacBook-Pro ~ % /opt/gfortran/bin/gfortran
> >
> > *aarch64-apple-darwin20.0-gfortran:* *fatal error: *no input files
> >
> > compilation terminated.
> >
> >
> > Any other ideas?
> >
> >
> >
> >
> > On Wed, May 17, 2023 at 2:13?PM Duncan Murdoch <murdoch.duncan at gmail.com
> >
> > wrote:
> >
> >> I think the simplest solution is to remove the gfortran you installed,
> >> and then install it back using the installer on
> >>
> >>   https://mac.r-project.org/tools/
> >>
> >> Duncan Murdoch
> >>
> >> On 17/05/2023 1:26 p.m., Jarrett Phillips wrote:
> >>> Hi Rodney,
> >>>
> >>> When I paste the directories into the Terminal, I get
> >>>
> >>> no such file or directory:
> >>>
> >>>
> >>>
> >>> suggesting that they don't exist.
> >>>
> >>>
> >>> Seems like I need to create them (I'm a newbie)?
> >>>
> >>>
> >>> What should be my next steps?
> >>>
> >>>
> >>> Thanks!
> >>>
> >>>
> >>> Cheers,
> >>>
> >>>
> >>> Jarrett
> >>>
> >>>
> >>>
> >>>
> >>> On Wed, May 17, 2023 at 1:25?PM Jarrett Phillips <
> >> phillipsjarrett1 at gmail.com>
> >>> wrote:
> >>>
> >>>> Hi Rodney,
> >>>>
> >>>> When I paste the directories into the Terminal, I get
> >>>>
> >>>> no such file or directory:
> >>>>
> >>>>
> >>>>
> >>>> suggesting that they don't exist.
> >>>>
> >>>>
> >>>> Seems like I need to create them (I'm a newbie)?
> >>>>
> >>>>
> >>>> What should be my next steps?
> >>>>
> >>>>
> >>>> Thanks!
> >>>>
> >>>>
> >>>> Cheers,
> >>>>
> >>>>
> >>>> Jarrett
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> On Wed, May 17, 2023 at 1:07?PM Sparapani, Rodney <rsparapa at mcw.edu>
> >>>> wrote:
> >>>>
> >>>>> Hi Jarrett:
> >>>>>
> >>>>>
> >>>>>
> >>>>> Do the two directories exist that clang is warning you about?
> >>>>>
> >>>>>
> >>>>>
> >>>>> '/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
> >>>>> '/opt/R/arm64/gfortran/lib'
> >>>>>
> >>>>>
> >>>>>
> >>>>> --
> >>>>>
> >>>>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
> >>>>>
> >>>>> Director, Wisconsin Chapter of the American Statistical Association
> >>>>>
> >>>>> Institute for Health and Equity, Division of Biostatistics
> >>>>>
> >>>>> Medical College of Wisconsin, Milwaukee Campus
> >>>>>
> >>>>>
> >>>>>
> >>>>> *From: *R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of
> >> Jarrett
> >>>>> Phillips <phillipsjarrett1 at gmail.com>
> >>>>> *Date: *Wednesday, May 17, 2023 at 11:54 AM
> >>>>> *To: *r-sig-mac at r-project.org <r-sig-mac at r-project.org>
> >>>>> *Subject: *[R-SIG-Mac] Problems compiling with R CMD build and
> >>>>> devtools::build()
> >>>>>
> >>>>> ATTENTION: This email originated from a sender outside of MCW. Use
> >>>>> caution when clicking on links or opening attachments.
> >>>>> ________________________________
> >>>>>
> >>>>> Hi All,
> >>>>>
> >>>>> I'm trying to generate a `tar.gz` file on a Mac for R package
> >> submission
> >>>>> to
> >>>>> CRAN but am having issues.
> >>>>>
> >>>>> I'm using `devtools`, specifically `build()` and `install()`.
> >>>>>
> >>>>> My package relies on compiled code via `Rcpp/RcppArmadillo`.
> >>>>>
> >>>>>     build("HACSim_OO")
> >>>>>     ?? R CMD build
> >>>>> ?????????????????????????????????????????????????????????????????
> >>>>>     ?  checking for file ?/Users/jarrettphillips/Desktop/HAC
> >>>>> simulation/HACSim_OO/DESCRIPTION? ...
> >>>>>     ?  preparing ?HACSim?:
> >>>>>     ?  checking DESCRIPTION meta-information ...
> >>>>>     ?  cleaning src
> >>>>>     ?  installing the package to process help pages
> >>>>>          -----------------------------------
> >>>>>     ?  installing *source* package ?HACSim? ...
> >>>>>        ** using staged installation
> >>>>>        ** libs
> >>>>>        clang++ -arch arm64 -std=gnu++11 -
> >>>>> I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
> >>>>>
> >>>>>
> >>
> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
> >>>>>
> >>>>>
> >>
> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
> >>>>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2
> >> -Wall
> >>>>> -pedantic -fdiagnostics-color=always -c RcppExports.cpp -o
> >> RcppExports.o
> >>>>>        clang++ -arch arm64 -std=gnu++11
> >>>>> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
> >>>>>
> >>>>>
> >>
> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
> >>>>>
> >>>>>
> >>
> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
> >>>>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2
> >> -Wall
> >>>>> -pedantic -fdiagnostics-color=always -c accumulate.cpp -o
> accumulate.o
> >>>>>        clang++ -arch arm64 -std=gnu++11 -dynamiclib
> >>>>> -Wl,-headerpad_max_install_names -undefined dynamic_lookup
> >> -single_module
> >>>>> -multiply_defined suppress
> >> -L/Library/Frameworks/R.framework/Resources/lib
> >>>>> -L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
> >>>>> -L/Library/Frameworks/R.framework/Resources/lib -lRlapack
> >>>>> -L/Library/Frameworks/R.framework/Resources/lib -lRblas
> >>>>> -L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
> >>>>> -L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
> >>>>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
> >>>>> -Wl,CoreFoundation
> >>>>>        ld: warning: directory not found for option
> >>>>> '-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
> >>>>>        ld: warning: directory not found for option
> >>>>> '-L/opt/R/arm64/gfortran/lib'
> >>>>>        ld: library not found for -lgfortran
> >>>>>        clang: error: linker command failed with exit code 1 (use -v
> >> to see
> >>>>> invocation)
> >>>>>        make: *** [HACSim.so] Error 1
> >>>>>        ERROR: compilation failed for package ?HACSim?
> >>>>>     ?  removing
> >>>>>
> >>>>>
> >>
> ?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
> >>>>>          -----------------------------------
> >>>>>     ERROR: package installation failed
> >>>>>     Error in `(function (command = NULL, args = character(),
> >>>>> error_on_status = TRUE, ?`:
> >>>>>     ! System command 'R' failed
> >>>>>      ---
> >>>>>      Exit status: 1
> >>>>>      stdout & stderr: <printed>
> >>>>>      ---
> >>>>>     Type .Last.error to see the more details.
> >>>>>
> >>>>> `clang` is installed (since I am able to run the code within my
> >> package)
> >>>>> and I've verified by typing `gcc` in the Mac Terminal. I've also
> >> installed
> >>>>> `Homebrew` and `gfortran`, verifying via typing in the Terminal.
> >>>>>
> >>>>> Any idea on what's going on and how to fix the issue(s)?
> >>>>>
> >>>>> Thanks!
> >>>>>
> >>>>> Cheers,
> >>>>>
> >>>>> Jarrett
> >>>>>
> >>>>> P.S. - I've asked on the R package dev list and after trying a number
> >> of
> >>>>> solutions was suggested to try here as it seems to be a macOS issue.
> >>>>>
> >>>>>         [[alternative HTML version deleted]]
> >>>>>
> >>>>> _______________________________________________
> >>>>> R-SIG-Mac mailing list
> >>>>> R-SIG-Mac at r-project.org
> >>>>>
> >>>>>
> >>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
> >>>>> <
> >>
> https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
> >>>
> >>>>>
> >>>>
> >>>
> >>>      [[alternative HTML version deleted]]
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>
>

	[[alternative HTML version deleted]]


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Thu May 18 07:40:55 2023
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Thu, 18 May 2023 06:40:55 +0100
Subject: [R-SIG-Mac] Problems compiling with R CMD build and
 devtools::build()
In-Reply-To: <FF4D5CD5-2EA3-4659-881C-6B1D694AC52B@R-project.org>
References: <CAMVrHdCan1FjOZwBZkxhHje=zqo50d9hEFx=g00dSVTY06QcbA@mail.gmail.com>
 <CO6PR01MB745293EFF57F8B850E4EB913CB7E9@CO6PR01MB7452.prod.exchangelabs.com>
 <CAMVrHdB3ga4bPLp4m62BVqxoNMFH8MCxovHOH65-WgX5+obiVA@mail.gmail.com>
 <CAMVrHdCGgAmXDjfq+yVqrEX2HNed1ruiFLNSmZLw0pVqNXau5w@mail.gmail.com>
 <0e7c36fc-aebe-aa6c-685f-f5b8d1208186@gmail.com>
 <CAMVrHdDu0VGzmxGfEwwuOFViZn+j4KO5Q65NPkF4i_7uW-qRnA@mail.gmail.com>
 <FF4D5CD5-2EA3-4659-881C-6B1D694AC52B@R-project.org>
Message-ID: <dde92019-681b-b324-d734-455f6578efbe@stats.ox.ac.uk>

On 17/05/2023 21:59, Simon Urbanek wrote:
> Jarrett,
> 
> Duncan's suggestion was correct, but you are using older R, so I'd recommend simply upgrading R to the latest release.
> 
> If you want to use old R, you have to install the older Fortran binaries that match your R version, but that's not entirely trivial so it's easier to just upgrade R instead.

It is possible to use a binary R installation with a version of gfortran 
other than it was built with (I have occasionally needed to use a later 
gfortran).  This is discussed in the manual, at
https://cran.r-project.org/doc/manuals/r-devel/R-admin.html#macOS-packages
and
https://cran.r-project.org/doc/manuals/r-devel/R-admin.html#Customizing-package-compilation

The crucial part is that FLIBS (in etc/Makeconf or overridden in a 
personal or site Makevars) has to match the compiler in use.

To reduce confusion I always specify the full path to gfortran in FC.

> 
> Cheers,
> Simon
> 
> 
>> On 18/05/2023, at 6:43 AM, Jarrett Phillips <phillipsjarrett1 at gmail.com> wrote:
>>
>> Hi Duncan,
>>
>> I did exactly that, but still got the error above when I try building in
>> both RStudio via devtools::build() and the Terminal via R CMD build.
>>
>> To confirm that the right gfortran successfully installed in the correct
>> location, I did
>>
>> jarrettphillips at Jarretts-MacBook-Pro ~ % /opt/gfortran/bin/gfortran
>>
>> *aarch64-apple-darwin20.0-gfortran:* *fatal error: *no input files
>>
>> compilation terminated.
>>
>>
>> Any other ideas?
>>
>>
>>
>>
>> On Wed, May 17, 2023 at 2:13?PM Duncan Murdoch <murdoch.duncan at gmail.com>
>> wrote:
>>
>>> I think the simplest solution is to remove the gfortran you installed,
>>> and then install it back using the installer on
>>>
>>>    https://mac.r-project.org/tools/
>>>
>>> Duncan Murdoch
>>>
>>> On 17/05/2023 1:26 p.m., Jarrett Phillips wrote:
>>>> Hi Rodney,
>>>>
>>>> When I paste the directories into the Terminal, I get
>>>>
>>>> no such file or directory:
>>>>
>>>>
>>>>
>>>> suggesting that they don't exist.
>>>>
>>>>
>>>> Seems like I need to create them (I'm a newbie)?
>>>>
>>>>
>>>> What should be my next steps?
>>>>
>>>>
>>>> Thanks!
>>>>
>>>>
>>>> Cheers,
>>>>
>>>>
>>>> Jarrett
>>>>
>>>>
>>>>
>>>>
>>>> On Wed, May 17, 2023 at 1:25?PM Jarrett Phillips <
>>> phillipsjarrett1 at gmail.com>
>>>> wrote:
>>>>
>>>>> Hi Rodney,
>>>>>
>>>>> When I paste the directories into the Terminal, I get
>>>>>
>>>>> no such file or directory:
>>>>>
>>>>>
>>>>>
>>>>> suggesting that they don't exist.
>>>>>
>>>>>
>>>>> Seems like I need to create them (I'm a newbie)?
>>>>>
>>>>>
>>>>> What should be my next steps?
>>>>>
>>>>>
>>>>> Thanks!
>>>>>
>>>>>
>>>>> Cheers,
>>>>>
>>>>>
>>>>> Jarrett
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On Wed, May 17, 2023 at 1:07?PM Sparapani, Rodney <rsparapa at mcw.edu>
>>>>> wrote:
>>>>>
>>>>>> Hi Jarrett:
>>>>>>
>>>>>>
>>>>>>
>>>>>> Do the two directories exist that clang is warning you about?
>>>>>>
>>>>>>
>>>>>>
>>>>>> '/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>>>>>> '/opt/R/arm64/gfortran/lib'
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>>
>>>>>> Rodney Sparapani, Associate Professor of Biostatistics, He/Him/His
>>>>>>
>>>>>> Director, Wisconsin Chapter of the American Statistical Association
>>>>>>
>>>>>> Institute for Health and Equity, Division of Biostatistics
>>>>>>
>>>>>> Medical College of Wisconsin, Milwaukee Campus
>>>>>>
>>>>>>
>>>>>>
>>>>>> *From: *R-SIG-Mac <r-sig-mac-bounces at r-project.org> on behalf of
>>> Jarrett
>>>>>> Phillips <phillipsjarrett1 at gmail.com>
>>>>>> *Date: *Wednesday, May 17, 2023 at 11:54 AM
>>>>>> *To: *r-sig-mac at r-project.org <r-sig-mac at r-project.org>
>>>>>> *Subject: *[R-SIG-Mac] Problems compiling with R CMD build and
>>>>>> devtools::build()
>>>>>>
>>>>>> ATTENTION: This email originated from a sender outside of MCW. Use
>>>>>> caution when clicking on links or opening attachments.
>>>>>> ________________________________
>>>>>>
>>>>>> Hi All,
>>>>>>
>>>>>> I'm trying to generate a `tar.gz` file on a Mac for R package
>>> submission
>>>>>> to
>>>>>> CRAN but am having issues.
>>>>>>
>>>>>> I'm using `devtools`, specifically `build()` and `install()`.
>>>>>>
>>>>>> My package relies on compiled code via `Rcpp/RcppArmadillo`.
>>>>>>
>>>>>>      build("HACSim_OO")
>>>>>>      ?? R CMD build
>>>>>> ?????????????????????????????????????????????????????????????????
>>>>>>      ?  checking for file ?/Users/jarrettphillips/Desktop/HAC
>>>>>> simulation/HACSim_OO/DESCRIPTION? ...
>>>>>>      ?  preparing ?HACSim?:
>>>>>>      ?  checking DESCRIPTION meta-information ...
>>>>>>      ?  cleaning src
>>>>>>      ?  installing the package to process help pages
>>>>>>           -----------------------------------
>>>>>>      ?  installing *source* package ?HACSim? ...
>>>>>>         ** using staged installation
>>>>>>         ** libs
>>>>>>         clang++ -arch arm64 -std=gnu++11 -
>>>>>> I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>>>>>
>>>>>>
>>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>>>>>>
>>>>>>
>>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>>>>>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2
>>> -Wall
>>>>>> -pedantic -fdiagnostics-color=always -c RcppExports.cpp -o
>>> RcppExports.o
>>>>>>         clang++ -arch arm64 -std=gnu++11
>>>>>> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>>>>>
>>>>>>
>>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/Rcpp/include'
>>>>>>
>>>>>>
>>> -I'/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library/RcppArmadillo/include'
>>>>>> -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2
>>> -Wall
>>>>>> -pedantic -fdiagnostics-color=always -c accumulate.cpp -o accumulate.o
>>>>>>         clang++ -arch arm64 -std=gnu++11 -dynamiclib
>>>>>> -Wl,-headerpad_max_install_names -undefined dynamic_lookup
>>> -single_module
>>>>>> -multiply_defined suppress
>>> -L/Library/Frameworks/R.framework/Resources/lib
>>>>>> -L/opt/R/arm64/lib -o HACSim.so RcppExports.o accumulate.o
>>>>>> -L/Library/Frameworks/R.framework/Resources/lib -lRlapack
>>>>>> -L/Library/Frameworks/R.framework/Resources/lib -lRblas
>>>>>> -L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1
>>>>>> -L/opt/R/arm64/gfortran/lib -lgfortran -lemutls_w -lquadmath
>>>>>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>>>>>> -Wl,CoreFoundation
>>>>>>         ld: warning: directory not found for option
>>>>>> '-L/opt/R/arm64/gfortran/lib/gcc/aarch64-apple-darwin20.6.0/12.0.1'
>>>>>>         ld: warning: directory not found for option
>>>>>> '-L/opt/R/arm64/gfortran/lib'
>>>>>>         ld: library not found for -lgfortran
>>>>>>         clang: error: linker command failed with exit code 1 (use -v
>>> to see
>>>>>> invocation)
>>>>>>         make: *** [HACSim.so] Error 1
>>>>>>         ERROR: compilation failed for package ?HACSim?
>>>>>>      ?  removing
>>>>>>
>>>>>>
>>> ?/private/var/folders/r4/xm5blbcd2tn06tjv00lm1c780000gn/T/RtmpN4uaYR/Rinstdf4219594de/HACSim?
>>>>>>           -----------------------------------
>>>>>>      ERROR: package installation failed
>>>>>>      Error in `(function (command = NULL, args = character(),
>>>>>> error_on_status = TRUE, ?`:
>>>>>>      ! System command 'R' failed
>>>>>>       ---
>>>>>>       Exit status: 1
>>>>>>       stdout & stderr: <printed>
>>>>>>       ---
>>>>>>      Type .Last.error to see the more details.
>>>>>>
>>>>>> `clang` is installed (since I am able to run the code within my
>>> package)
>>>>>> and I've verified by typing `gcc` in the Mac Terminal. I've also
>>> installed
>>>>>> `Homebrew` and `gfortran`, verifying via typing in the Terminal.
>>>>>>
>>>>>> Any idea on what's going on and how to fix the issue(s)?
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>> Cheers,
>>>>>>
>>>>>> Jarrett
>>>>>>
>>>>>> P.S. - I've asked on the R package dev list and after trying a number
>>> of
>>>>>> solutions was suggested to try here as it seems to be a macOS issue.
>>>>>>
>>>>>>          [[alternative HTML version deleted]]
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>>
>>>>>>
>>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
>>>>>> <
>>> https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-sig-mac__;!!H8mHWRdzp34!8RmbGRYgbB_f5U_CMipQjBvZqNIpC_Jg8y9_089pd69hvfqoWwH0HbRuYKPQ0QIOcyz-4Tq-j0GFysnSlDkU3GUmmA$
>>>>
>>>>>>
>>>>>
>>>>
>>>>       [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From c@r| @end|ng |rom w|ttho|t@com  Sat May 20 17:12:03 2023
From: c@r| @end|ng |rom w|ttho|t@com (Carl Witthoft)
Date: Sat, 20 May 2023 11:12:03 -0400
Subject: [R-SIG-Mac] minor bugfix request in R Help window
Message-ID: <4f5df620-5194-168e-d816-1fa9885f5a6f@witthoft.com>

Hi,
Just a nit that annoys me.  If I do "?some_func"  and then, in the R 
Help window,  I do a word search,  the search box at the bottom of the 
window covers up the  footer containing the link to the package "Index" 
page.  I have to close the search box to see that link.
Any chance the Help page can be configured so opening the search box 
doesn't cover up this stuff?

Thanks
Carl

-- 
Carl Witthoft
personal: carl at witthoft.com
The Witthoft Group, Consulting
https://witthoftgroup.weebly.com/


From @go@t|no@gn@@@o @end|ng |rom un|n@@|t  Thu May 25 10:28:54 2023
From: @go@t|no@gn@@@o @end|ng |rom un|n@@|t (Agostino Gnasso)
Date: Thu, 25 May 2023 10:28:54 +0200
Subject: [R-SIG-Mac] Issue with Installer on Mac OS Ventura 13.4
Message-ID: <C94384CC-6F7C-4E3A-B7F3-13EDE747DD00@unina.it>

Dear all,
I tried to install R on my MacBook M1 pro, with MacOS Ventura 13.4. I downloaded the R version 4.3.0 ( R-4.3.0-arm64.pkg ) but I?m unable to install it. 
When I try to install it the following error message is shown: "Installation failed. Installer encountered an error that prevented installation. Contact the software manufacturer for assistance.?  
Please help me to solve this issue.
Thanks in advance,

Best regards.

Agostino Gnasso



	[[alternative HTML version deleted]]


From du@@@@dr|@n @end|ng |rom gm@||@com  Thu May 25 11:12:53 2023
From: du@@@@dr|@n @end|ng |rom gm@||@com (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Thu, 25 May 2023 02:12:53 -0700
Subject: [R-SIG-Mac] Issue with Installer on Mac OS Ventura 13.4
In-Reply-To: <C94384CC-6F7C-4E3A-B7F3-13EDE747DD00@unina.it>
References: <C94384CC-6F7C-4E3A-B7F3-13EDE747DD00@unina.it>
Message-ID: <CAJ=0CtCXfvtDUaQb-8kezdw_eoF0jxf2YLkH0gsn5F47xtD+Yw@mail.gmail.com>

 I had no issues on my M2, everything worked.
Perhaps you need to give some permissions to access the Downloads
directory, I can think of nothing else.
Or move the installer in your home directory, and try again.
Adrian

On 25 May 2023 at 11:28:54, Agostino Gnasso <agostino.gnasso at unina.it>
wrote:

> Dear all,
> I tried to install R on my MacBook M1 pro, with MacOS Ventura 13.4. I
> downloaded the R version 4.3.0 ( R-4.3.0-arm64.pkg ) but I?m unable to
> install it.
> When I try to install it the following error message is shown:
> "Installation failed. Installer encountered an error that prevented
> installation. Contact the software manufacturer for assistance.?
> Please help me to solve this issue.
> Thanks in advance,
>
> Best regards.
>
> Agostino Gnasso
>
>
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu May 25 11:50:11 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 25 May 2023 05:50:11 -0400
Subject: [R-SIG-Mac] Issue with Installer on Mac OS Ventura 13.4
In-Reply-To: <C94384CC-6F7C-4E3A-B7F3-13EDE747DD00@unina.it>
References: <C94384CC-6F7C-4E3A-B7F3-13EDE747DD00@unina.it>
Message-ID: <42a6b30e-6e76-1bc5-be34-547e4065742c@gmail.com>

Adrian's comment reminded me of a post from Simon on Feb 8:

> Apparently there is a bug in Ventura that prevents software installation from the Downloads folder. Once the installer package is moved someplace else - the home or Desktop - it works. So if you see "Installation failed", make sure you move the package (typically that would be the R-4.2.2-arm64.pkg file) out of the Downloads folder. (Thanks to Max for sending the installer log so we could trace the cause!).
> 
> Cheers,
> Simon





On 25/05/2023 4:28 a.m., Agostino Gnasso wrote:
> Dear all,
> I tried to install R on my MacBook M1 pro, with MacOS Ventura 13.4. I downloaded the R version 4.3.0 ( R-4.3.0-arm64.pkg ) but I?m unable to install it.
> When I try to install it the following error message is shown: "Installation failed. Installer encountered an error that prevented installation. Contact the software manufacturer for assistance.?
> Please help me to solve this issue.
> Thanks in advance,
> 
> Best regards.
> 
> Agostino Gnasso
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @go@t|no@gn@@@o @end|ng |rom un|n@@|t  Thu May 25 12:32:04 2023
From: @go@t|no@gn@@@o @end|ng |rom un|n@@|t (Agostino Gnasso)
Date: Thu, 25 May 2023 12:32:04 +0200
Subject: [R-SIG-Mac] Issue with Installer on Mac OS Ventura 13.4
In-Reply-To: <CAJ=0CtCXfvtDUaQb-8kezdw_eoF0jxf2YLkH0gsn5F47xtD+Yw@mail.gmail.com>
References: <C94384CC-6F7C-4E3A-B7F3-13EDE747DD00@unina.it>
 <CAJ=0CtCXfvtDUaQb-8kezdw_eoF0jxf2YLkH0gsn5F47xtD+Yw@mail.gmail.com>
Message-ID: <C20402BF-34CB-4C6D-9544-1C67D39FFA07@unina.it>

Thank you for your suggestions.
I had already tried moving the .pkg file out of the download folder but the same problem always occurs.
I tried to investigate further and it seems that the problem is related to my account: it is probably corrupted. To verify this I tried creating a new administrator account on my Macbook M1pro where I tried downloading R and it works without any problems. So the problem is related to my account.
The solution might be to make a backup with TimeMachine of the app and files and try initializing the pc in the hope that everything will work.

Agostino

> Il giorno 25 mag 2023, alle ore 11:12, Adrian Du?a <dusa.adrian at gmail.com> ha scritto:
> 
> I had no issues on my M2, everything worked.
> Perhaps you need to give some permissions to access the Downloads directory, I can think of nothing else.
> Or move the installer in your home directory, and try again.
> Adrian
> 
> On 25 May 2023 at 11:28:54, Agostino Gnasso <agostino.gnasso at unina.it <mailto:agostino.gnasso at unina.it>> wrote:
>> Dear all,
>> I tried to install R on my MacBook M1 pro, with MacOS Ventura 13.4. I downloaded the R version 4.3.0 ( R-4.3.0-arm64.pkg ) but I?m unable to install it. 
>> When I try to install it the following error message is shown: "Installation failed. Installer encountered an error that prevented installation. Contact the software manufacturer for assistance.?  
>> Please help me to solve this issue.
>> Thanks in advance,
>> 
>> Best regards.
>> 
>> Agostino Gnasso
>> 
>> 
>> 
>> [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac



	[[alternative HTML version deleted]]


From ||@her @end|ng |rom p|e@@th@n@com  Sat May 27 00:15:09 2023
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Fri, 26 May 2023 15:15:09 -0700
Subject: [R-SIG-Mac] Identifying computer from R
Message-ID: <759A5EB2-56ED-46EE-8CBB-0BC8D72BF5C7@plessthan.com>

R 4.2.3
OS X

Colleagues 

Interesting (minor) problem.  I have code that I run automatically on two different computers.  The code runs from Dropbox so there is not separate code for each computer.

In order to identify which computer is running the code, I was hoping to do something like:
	Sys.getenv(SOMETHING)

In a terminal window:
	echo $PS1
returns the prompt on that particular computer.

However, when I attempt to access that from R, I am not successful.  For example:

In a terminal:
	echo $PS1
returns:
	PET\!>

In R:
	Sys.getenv("PS1")
returns:
	""

In R:
	system("echo $PS1") 
returns an empty line.

A solution to this immediate problem (how to obtain that environment variable in R) or any other clever way to identify a particular computer would be much appreciated.

Dennis


Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com


From |kw@|mmo @end|ng |rom gm@||@com  Sat May 27 00:27:46 2023
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Fri, 26 May 2023 18:27:46 -0400
Subject: [R-SIG-Mac] Identifying computer from R
In-Reply-To: <759A5EB2-56ED-46EE-8CBB-0BC8D72BF5C7@plessthan.com>
References: <759A5EB2-56ED-46EE-8CBB-0BC8D72BF5C7@plessthan.com>
Message-ID: <CADNULg9J+-aT=a9zNjG27p-gJ=oSsX_sUqXSFCh2MpGi955NfQ@mail.gmail.com>

Hi,


I think PS1 is generally a bash environment variable. So if you're not
opening your R session from a bash session, then PS1 is likely undefined.

You could perhaps use `Sys.info()` instead if you wish to determine which
computer of yours is running the code.

On Fri, May 26, 2023 at 6:15?PM Dennis Fisher <fisher at plessthan.com> wrote:

> R 4.2.3
> OS X
>
> Colleagues
>
> Interesting (minor) problem.  I have code that I run automatically on two
> different computers.  The code runs from Dropbox so there is not separate
> code for each computer.
>
> In order to identify which computer is running the code, I was hoping to
> do something like:
>         Sys.getenv(SOMETHING)
>
> In a terminal window:
>         echo $PS1
> returns the prompt on that particular computer.
>
> However, when I attempt to access that from R, I am not successful.  For
> example:
>
> In a terminal:
>         echo $PS1
> returns:
>         PET\!>
>
> In R:
>         Sys.getenv("PS1")
> returns:
>         ""
>
> In R:
>         system("echo $PS1")
> returns an empty line.
>
> A solution to this immediate problem (how to obtain that environment
> variable in R) or any other clever way to identify a particular computer
> would be much appreciated.
>
> Dennis
>
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From ||@her @end|ng |rom p|e@@th@n@com  Sat May 27 00:36:06 2023
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Fri, 26 May 2023 15:36:06 -0700
Subject: [R-SIG-Mac] Identifying computer from R
In-Reply-To: <CADNULg9J+-aT=a9zNjG27p-gJ=oSsX_sUqXSFCh2MpGi955NfQ@mail.gmail.com>
References: <759A5EB2-56ED-46EE-8CBB-0BC8D72BF5C7@plessthan.com>
 <CADNULg9J+-aT=a9zNjG27p-gJ=oSsX_sUqXSFCh2MpGi955NfQ@mail.gmail.com>
Message-ID: <E0A4B239-EA2E-43C5-A363-3EBD91EC76CF@plessthan.com>

Iris

Thanks for the tip.
This works:
	Sys.info()["nodename"]

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com




> On May 26, 2023, at 3:27 PM, Iris Simmons <ikwsimmo at gmail.com> wrote:
> 
> Hi,
> 
> 
> I think PS1 is generally a bash environment variable. So if you're not opening your R session from a bash session, then PS1 is likely undefined.
> 
> You could perhaps use `Sys.info()` instead if you wish to determine which computer of yours is running the code.
> 
> On Fri, May 26, 2023 at 6:15?PM Dennis Fisher <fisher at plessthan.com> wrote:
> R 4.2.3
> OS X
> 
> Colleagues 
> 
> Interesting (minor) problem.  I have code that I run automatically on two different computers.  The code runs from Dropbox so there is not separate code for each computer.
> 
> In order to identify which computer is running the code, I was hoping to do something like:
>         Sys.getenv(SOMETHING)
> 
> In a terminal window:
>         echo $PS1
> returns the prompt on that particular computer.
> 
> However, when I attempt to access that from R, I am not successful.  For example:
> 
> In a terminal:
>         echo $PS1
> returns:
>         PET\!>
> 
> In R:
>         Sys.getenv("PS1")
> returns:
>         ""
> 
> In R:
>         system("echo $PS1") 
> returns an empty line.
> 
> A solution to this immediate problem (how to obtain that environment variable in R) or any other clever way to identify a particular computer would be much appreciated.
> 
> Dennis
> 
> 
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Mon May 29 14:36:46 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 29 May 2023 07:36:46 -0500
Subject: [R-SIG-Mac] Identifying computer from R
In-Reply-To: <759A5EB2-56ED-46EE-8CBB-0BC8D72BF5C7@plessthan.com>
References: <759A5EB2-56ED-46EE-8CBB-0BC8D72BF5C7@plessthan.com>
Message-ID: <51AEEE68-EA2C-4D44-9670-7EDCAAD6AB37@R-project.org>

Dennis,

PS1 is an internal shell environment variable (modifying prompt) which has nohting to do with R (and nothing to do with the computer name by default) so it won't be set in R, only in a shell.
If you want the machine's hostname you'd typically use system("hostname") in R.

Cheers,
Simon


> On 26/05/2023, at 17:15, Dennis Fisher <fisher at plessthan.com> wrote:
> 
> R 4.2.3
> OS X
> 
> Colleagues 
> 
> Interesting (minor) problem.  I have code that I run automatically on two different computers.  The code runs from Dropbox so there is not separate code for each computer.
> 
> In order to identify which computer is running the code, I was hoping to do something like:
> 	Sys.getenv(SOMETHING)
> 
> In a terminal window:
> 	echo $PS1
> returns the prompt on that particular computer.
> 
> However, when I attempt to access that from R, I am not successful.  For example:
> 
> In a terminal:
> 	echo $PS1
> returns:
> 	PET\!>
> 
> In R:
> 	Sys.getenv("PS1")
> returns:
> 	""
> 
> In R:
> 	system("echo $PS1") 
> returns an empty line.
> 
> A solution to this immediate problem (how to obtain that environment variable in R) or any other clever way to identify a particular computer would be much appreciated.
> 
> Dennis
> 
> 
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


