From simon.urbanek at r-project.org  Wed Aug  1 08:57:47 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 1 Aug 2007 00:57:47 -0600
Subject: [R-SIG-Mac] Version of R-devel on http://r.research.att.com/
In-Reply-To: <40e66e0b0707300936k1414434bncc282dd427ca83f8@mail.gmail.com>
References: <40e66e0b0707300936k1414434bncc282dd427ca83f8@mail.gmail.com>
Message-ID: <F1F3E4AE-7F24-4096-AA61-40694D8A98B8@r-project.org>

Doug,

the tar-ball should be ok, it affected the .dmg part only. There was  
a problem extracting the GUI SVN version which prevented the .dmg  
packaging. Hopefully it should be fixed for tomorrow's build (8/2).

Cheers,
Simon

On Jul 30, 2007, at 10:36 AM, Douglas Bates wrote:

> The R-devel image on http://R.research.att.com/ is R-devel-42258.dmg
> and is dated July 30 but https://svn.R-project.org/R/trunk is at
> r42358.  Has something gone wrong with the update scripts?
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From joe_retzer at yahoo.com  Tue Aug  7 00:14:46 2007
From: joe_retzer at yahoo.com (Joseph Retzer)
Date: Mon, 6 Aug 2007 15:14:46 -0700 (PDT)
Subject: [R-SIG-Mac] Problem loading libraries in 2.5
In-Reply-To: <Prayer.1.0.18.0707282119500.26045@hermes-1.csi.cam.ac.uk>
Message-ID: <57690.41439.qm@web60317.mail.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20070806/b52b7110/attachment.pl 

From jjrr at wi.rr.com  Mon Aug  6 23:32:53 2007
From: jjrr at wi.rr.com (Joe Retzer)
Date: Mon, 6 Aug 2007 16:32:53 -0500
Subject: [R-SIG-Mac] [R] [Rd]  Error loading libraries in MAC
Message-ID: <AAB92A7A-AC5E-43AA-B742-4E1EC0FAD8D8@wi.rr.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20070806/574a50ce/attachment.pl 

From krunk7 at gmail.com  Fri Aug 10 00:04:24 2007
From: krunk7 at gmail.com (James Kyle)
Date: Thu, 9 Aug 2007 15:04:24 -0700
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther
Message-ID: <4412A51C-DB1D-41D2-93A5-B04EF7A5993D@gmail.com>

Hello all,

I'm attempting to compile R 2.5.1 on OSX Panther and have run into  
some issues. First off, if anyone has a link to a binary build of  
2.5.1 for Panther I have no issue going that route.

-) gcc version 3.3 20030304 (Apple Computer, Inc. build 1666)
-) g77 version 3.4.2
-) ./configure --with-blas='-framework vecLib' --with-lapack  
R_PAPERSIZE=letter F77=g77

When first seeing the build issues, I wanted to verify that I have  
the necessary basic environment. I grabbed the 2.2.1 sources, which  
are the latest version available with a binary for Panther, and they  
compiled without a hitch.

The error appears in the lapack module when building  
libRlapack.dylib. Error output is:

> make[4]: Entering directory `/opt/sandbox/R-2.5.1/src/modules/lapack'
> gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o  
> libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o  
> dlapack3.o dlapack4.o cmplx.o -install_name libRlapack.dylib - 
> compatibility_version 2.5.0 -current_version 2.5.1  - 
> headerpad_max_install_names  -L/usr/local/lib/gcc/powerpc-apple- 
> darwin6.8/3.4.2 -lg2c -L../../../lib -lR
> /usr/bin/libtool: internal link edit command failedld: warning  
> multiple definitions of symbol _z_abs/usr/local/lib/libg2c.a 
> (z_abs.o) definition of _z_abs in section (__TEXT,__text)../../../ 
> lib/libR.dylib(z_abs.o) definition of _z_absld: warning multiple  
> definitions of symbol _f__cabs/usr/local/lib/libg2c.a(cabs.o)  
> definition of _f__cabs in section (__TEXT,__text)../../../lib/ 
> libR.dylib(cabs.o) definition of _f__cabsld: common symbols not  
> allowed with MH_DYLIB output format with the -multi_module option/ 
> usr/local/lib/libg2c.a(err.o) definition of common _f__cblank (size  
> 4)/usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt (size  
> 40)/usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)  
> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common f(char,  
> long *, short __restrict) (size 4)/usr/local/lib/libg2c.a(err.o)  
> definition of common _f__cursor (size 4)/usr/local/lib/libg2c.a 
> (err.o) definition of common _f__doed (size 4)/usr/local/lib/ 
> libg2c.a(err.o) definition of common _f__doend (size 4)/usr/local/ 
> lib/libg2c.a(err.o) definition of common _f__doned (size 4)/usr/ 
> local/lib/libg2c.a(err.o) definition of common _f__dorevert (size  
> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__elist  
> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common  
> _f__fmtbuf (size 4)/usr/local/lib/libg2c.a(err.o) definition of  
> common _f__fmtlen (size 4)/usr/local/lib/libg2c.a(err.o) definition  
> of common _f__init (size 4)/usr/local/lib/libg2c.a(fmt.o)  
> definition of common _f__nonl (size 4)/usr/local/lib/libg2c.a 
> (fmt.o) definition of common _f__parenlvl (size 4)/usr/local/lib/ 
> libg2c.a(fmt.o) definition of common f(char *) (size 4)/usr/local/ 
> lib/libg2c.a(fmt.o) definition of common _f__ret (size 40)/usr/ 
> local/lib/libg2c.a(fmt.o) definition of common _f__revloc (size 4)/ 
> usr/local/lib/libg2c.a(fmt.o) definition of common f(long double,   
> *) (size 4)/usr/local/lib/libg2c.a(err.o) definition of common  
> _f__scale (size 4)/usr/local/lib/libg2c.a(fmt.o) definition of  
> common _f__workdone (size 4)/usr/local/lib/libg2c.a(err.o)  
> definition of common _f__units (size 4800)/usr/local/lib/libg2c.a 
> (err.o) definition of common f(char, float) (size 4)/usr/local/lib/ 
> libg2c.a(err.o) definition of common _f__curunit (size 4)/usr/local/ 
> lib/libg2c.a(err.o) definition of common _f__donewrec (size 4)/usr/ 
> local/lib/libg2c.a(err.o) definition of common _f__external (size  
> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__formatted  
> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common  
> _f__hiwater (size 4)/usr/local/lib/libg2c.a(err.o) definition of  
> common _f__putn (size 4)/usr/local/lib/libg2c.a(err.o) definition  
> of common _f__reading (size 4)/usr/local/lib/libg2c.a(err.o)  
> definition of common _f__recpos (size 4)/usr/local/lib/libg2c.a 
> (err.o) definition of common _f__sequential (size 4)/usr/local/lib/ 
> libg2c.a(err.o) definition of common _f__getn (size 4)/usr/local/ 
> lib/libg2c.a(err.o) definition of common _f__icptr (size 4)/usr/ 
> local/lib/libg2c.a(err.o) definition of common f(short, void, int,  
> char) (size 4)
> make[4]: *** [libRlapack.dylib] Error 1  make[4]: Leaving directory  
> `/opt/sandbox/R-2.5.1/src/modules/lapack'make[3]: *** [R] Error  
> 2make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/modules/ 
> lapack'make[2]: *** [R] Error 1make[2]: Leaving directory `/opt/ 
> sandbox/R-2.5.1/src/modules'make[1]: *** [R] Error 1make[1]:  
> Leaving directory `/opt/sandbox/R-2.5.1/src'make: *** [R] Error 1


From james.milks at wright.edu  Fri Aug 10 14:57:26 2007
From: james.milks at wright.edu (James R. Milks)
Date: Fri, 10 Aug 2007 08:57:26 -0400
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther (James Kyle)
In-Reply-To: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
References: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
Message-ID: <AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>

You can find the compiled version of R 2.5.1 for OS 10.4.4 or higher  
at http://cran.r-project.org/bin/macosx/.  I try not to get into  
compiling myself as I've had pretty bad luck with doing compilations.

Hope this helps.

Jim Milks

Graduate Student
Environmental Sciences Ph.D. Program
136 Biological Sciences
Wright State University
3640 Colonel Glenn Hwy
Dayton, OH 45431

On Aug 9, 2007, at 3:04 PM, krunk7 at gmail.com wrote:

>
> Date: Thu, 9 Aug 2007 15:04:24 -0700
> From: James Kyle <krunk7 at gmail.com>
> Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther
> To: r-sig-mac at stat.math.ethz.ch
> Message-ID: <4412A51C-DB1D-41D2-93A5-B04EF7A5993D at gmail.com>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
> Hello all,
>
> I'm attempting to compile R 2.5.1 on OSX Panther and have run into
> some issues. First off, if anyone has a link to a binary build of
> 2.5.1 for Panther I have no issue going that route.
>
> -) gcc version 3.3 20030304 (Apple Computer, Inc. build 1666)
> -) g77 version 3.4.2
> -) ./configure --with-blas='-framework vecLib' --with-lapack
> R_PAPERSIZE=letter F77=g77
>
> When first seeing the build issues, I wanted to verify that I have
> the necessary basic environment. I grabbed the 2.2.1 sources, which
> are the latest version available with a binary for Panther, and they
> compiled without a hitch.
>
> The error appears in the lapack module when building
> libRlapack.dylib. Error output is:
>
>> make[4]: Entering directory `/opt/sandbox/R-2.5.1/src/modules/lapack'
>> gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o
>> libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o
>> dlapack3.o dlapack4.o cmplx.o -install_name libRlapack.dylib -
>> compatibility_version 2.5.0 -current_version 2.5.1  -
>> headerpad_max_install_names  -L/usr/local/lib/gcc/powerpc-apple-
>> darwin6.8/3.4.2 -lg2c -L../../../lib -lR
>> /usr/bin/libtool: internal link edit command failedld: warning
>> multiple definitions of symbol _z_abs/usr/local/lib/libg2c.a
>> (z_abs.o) definition of _z_abs in section (__TEXT,__text)../../../
>> lib/libR.dylib(z_abs.o) definition of _z_absld: warning multiple
>> definitions of symbol _f__cabs/usr/local/lib/libg2c.a(cabs.o)
>> definition of _f__cabs in section (__TEXT,__text)../../../lib/
>> libR.dylib(cabs.o) definition of _f__cabsld: common symbols not
>> allowed with MH_DYLIB output format with the -multi_module option/
>> usr/local/lib/libg2c.a(err.o) definition of common _f__cblank (size
>> 4)/usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt (size
>> 40)/usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)
>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common f(char,
>> long *, short __restrict) (size 4)/usr/local/lib/libg2c.a(err.o)
>> definition of common _f__cursor (size 4)/usr/local/lib/libg2c.a
>> (err.o) definition of common _f__doed (size 4)/usr/local/lib/
>> libg2c.a(err.o) definition of common _f__doend (size 4)/usr/local/
>> lib/libg2c.a(err.o) definition of common _f__doned (size 4)/usr/
>> local/lib/libg2c.a(err.o) definition of common _f__dorevert (size
>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__elist
>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>> _f__fmtbuf (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>> common _f__fmtlen (size 4)/usr/local/lib/libg2c.a(err.o) definition
>> of common _f__init (size 4)/usr/local/lib/libg2c.a(fmt.o)
>> definition of common _f__nonl (size 4)/usr/local/lib/libg2c.a
>> (fmt.o) definition of common _f__parenlvl (size 4)/usr/local/lib/
>> libg2c.a(fmt.o) definition of common f(char *) (size 4)/usr/local/
>> lib/libg2c.a(fmt.o) definition of common _f__ret (size 40)/usr/
>> local/lib/libg2c.a(fmt.o) definition of common _f__revloc (size 4)/
>> usr/local/lib/libg2c.a(fmt.o) definition of common f(long double,
>> *) (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>> _f__scale (size 4)/usr/local/lib/libg2c.a(fmt.o) definition of
>> common _f__workdone (size 4)/usr/local/lib/libg2c.a(err.o)
>> definition of common _f__units (size 4800)/usr/local/lib/libg2c.a
>> (err.o) definition of common f(char, float) (size 4)/usr/local/lib/
>> libg2c.a(err.o) definition of common _f__curunit (size 4)/usr/local/
>> lib/libg2c.a(err.o) definition of common _f__donewrec (size 4)/usr/
>> local/lib/libg2c.a(err.o) definition of common _f__external (size
>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__formatted
>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>> _f__hiwater (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>> common _f__putn (size 4)/usr/local/lib/libg2c.a(err.o) definition
>> of common _f__reading (size 4)/usr/local/lib/libg2c.a(err.o)
>> definition of common _f__recpos (size 4)/usr/local/lib/libg2c.a
>> (err.o) definition of common _f__sequential (size 4)/usr/local/lib/
>> libg2c.a(err.o) definition of common _f__getn (size 4)/usr/local/
>> lib/libg2c.a(err.o) definition of common _f__icptr (size 4)/usr/
>> local/lib/libg2c.a(err.o) definition of common f(short, void, int,
>> char) (size 4)
>> make[4]: *** [libRlapack.dylib] Error 1  make[4]: Leaving directory
>> `/opt/sandbox/R-2.5.1/src/modules/lapack'make[3]: *** [R] Error
>> 2make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/modules/
>> lapack'make[2]: *** [R] Error 1make[2]: Leaving directory `/opt/
>> sandbox/R-2.5.1/src/modules'make[1]: *** [R] Error 1make[1]:
>> Leaving directory `/opt/sandbox/R-2.5.1/src'make: *** [R] Error 1
>
>
>
> ------------------------------
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> End of R-SIG-Mac Digest, Vol 54, Issue 5
> ****************************************


From ulfmartin at web.de  Fri Aug 10 16:14:56 2007
From: ulfmartin at web.de (Ulf Martin)
Date: Fri, 10 Aug 2007 16:14:56 +0200
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther (James Kyle)
In-Reply-To: <AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>
References: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
	<AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>
Message-ID: <46BC72E0.6080903@web.de>

Hi

James R. Milks schrieb:
> You can find the compiled version of R 2.5.1 for OS 10.4.4 or higher  
> at http://cran.r-project.org/bin/macosx/.  I try not to get into  
> compiling myself as I've had pretty bad luck with doing compilations.

I think the problem is, that the binaries are for OS 10.4.x = "Tiger",
they don't work on 10.3.y = "Panther". So this tip won't help. Two month
ago I also tried to compile the new R version (2.5.0 then) on Panther
without success. So I am still hanging around with R 2.4.1. :-(

Just a guess, as I have no idea what's really going on: The compilation
fails making lapack stuff. Now, since lapack is a Fortran 77 package the
problem might have something to do with this?! (My compilation also
failed at this point.)

> On Aug 9, 2007, at 3:04 PM, krunk7 at gmail.com wrote:
>>
>> I'm attempting to compile R 2.5.1 on OSX Panther and have run into
>> some issues. First off, if anyone has a link to a binary build of
>> 2.5.1 for Panther I have no issue going that route.
>>
>> -) gcc version 3.3 20030304 (Apple Computer, Inc. build 1666)
>> -) g77 version 3.4.2
>> -) ./configure --with-blas='-framework vecLib' --with-lapack
>> R_PAPERSIZE=letter F77=g77
>>
>> When first seeing the build issues, I wanted to verify that I have
>> the necessary basic environment. I grabbed the 2.2.1 sources, which
>> are the latest version available with a binary for Panther, and they
>> compiled without a hitch.
>>
>> The error appears in the lapack module when building
>> libRlapack.dylib. Error output is:
>>
>>> make[4]: Entering directory `/opt/sandbox/R-2.5.1/src/modules/lapack'
>>> gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o
>>> libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o
>>> dlapack3.o dlapack4.o cmplx.o -install_name libRlapack.dylib -
>>> compatibility_version 2.5.0 -current_version 2.5.1  -
>>> headerpad_max_install_names  -L/usr/local/lib/gcc/powerpc-apple-
>>> darwin6.8/3.4.2 -lg2c -L../../../lib -lR
>>> /usr/bin/libtool: internal link edit command failedld: warning
>>> multiple definitions of symbol _z_abs/usr/local/lib/libg2c.a
>>> (z_abs.o) definition of _z_abs in section (__TEXT,__text)../../../
>>> lib/libR.dylib(z_abs.o) definition of _z_absld: warning multiple
>>> definitions of symbol _f__cabs/usr/local/lib/libg2c.a(cabs.o)
>>> definition of _f__cabs in section (__TEXT,__text)../../../lib/
>>> libR.dylib(cabs.o) definition of _f__cabsld: common symbols not
>>> allowed with MH_DYLIB output format with the -multi_module option/
>>> usr/local/lib/libg2c.a(err.o) definition of common _f__cblank (size
>>> 4)/usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt (size
>>> 40)/usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)
>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common f(char,
>>> long *, short __restrict) (size 4)/usr/local/lib/libg2c.a(err.o)
>>> definition of common _f__cursor (size 4)/usr/local/lib/libg2c.a
>>> (err.o) definition of common _f__doed (size 4)/usr/local/lib/
>>> libg2c.a(err.o) definition of common _f__doend (size 4)/usr/local/
>>> lib/libg2c.a(err.o) definition of common _f__doned (size 4)/usr/
>>> local/lib/libg2c.a(err.o) definition of common _f__dorevert (size
>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__elist
>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>> _f__fmtbuf (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>> common _f__fmtlen (size 4)/usr/local/lib/libg2c.a(err.o) definition
>>> of common _f__init (size 4)/usr/local/lib/libg2c.a(fmt.o)
>>> definition of common _f__nonl (size 4)/usr/local/lib/libg2c.a
>>> (fmt.o) definition of common _f__parenlvl (size 4)/usr/local/lib/
>>> libg2c.a(fmt.o) definition of common f(char *) (size 4)/usr/local/
>>> lib/libg2c.a(fmt.o) definition of common _f__ret (size 40)/usr/
>>> local/lib/libg2c.a(fmt.o) definition of common _f__revloc (size 4)/
>>> usr/local/lib/libg2c.a(fmt.o) definition of common f(long double,
>>> *) (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>> _f__scale (size 4)/usr/local/lib/libg2c.a(fmt.o) definition of
>>> common _f__workdone (size 4)/usr/local/lib/libg2c.a(err.o)
>>> definition of common _f__units (size 4800)/usr/local/lib/libg2c.a
>>> (err.o) definition of common f(char, float) (size 4)/usr/local/lib/
>>> libg2c.a(err.o) definition of common _f__curunit (size 4)/usr/local/
>>> lib/libg2c.a(err.o) definition of common _f__donewrec (size 4)/usr/
>>> local/lib/libg2c.a(err.o) definition of common _f__external (size
>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__formatted
>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>> _f__hiwater (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>> common _f__putn (size 4)/usr/local/lib/libg2c.a(err.o) definition
>>> of common _f__reading (size 4)/usr/local/lib/libg2c.a(err.o)
>>> definition of common _f__recpos (size 4)/usr/local/lib/libg2c.a
>>> (err.o) definition of common _f__sequential (size 4)/usr/local/lib/
>>> libg2c.a(err.o) definition of common _f__getn (size 4)/usr/local/
>>> lib/libg2c.a(err.o) definition of common _f__icptr (size 4)/usr/
>>> local/lib/libg2c.a(err.o) definition of common f(short, void, int,
>>> char) (size 4)
>>> make[4]: *** [libRlapack.dylib] Error 1  make[4]: Leaving directory
>>> `/opt/sandbox/R-2.5.1/src/modules/lapack'make[3]: *** [R] Error
>>> 2make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/modules/
>>> lapack'make[2]: *** [R] Error 1make[2]: Leaving directory `/opt/
>>> sandbox/R-2.5.1/src/modules'make[1]: *** [R] Error 1make[1]:
>>> Leaving directory `/opt/sandbox/R-2.5.1/src'make: *** [R] Error 1


From jameskyle at ucla.edu  Sat Aug 11 01:02:17 2007
From: jameskyle at ucla.edu (James Kyle)
Date: Fri, 10 Aug 2007 16:02:17 -0700
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther (James Kyle)
In-Reply-To: <46BC72E0.6080903@web.de>
References: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
	<AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>
	<46BC72E0.6080903@web.de>
Message-ID: <E610DF6E-7C8A-4F25-A285-8594AE7DA8A9@ucla.edu>

This seems to be the problem area:

> ld: common symbols not allowed with MH_DYLIB output format with the  
> -multi_module option
> /usr/local/lib/libg2c.a(err.o) definition of common _f__cblank  
> (size 4)
> /usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt (size 40)
> /usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)  
> (size 4)
> /usr/local/lib/libg2c.a(err.o) definition of common f(char, long *,  
> short __restrict) (size 4)
> /usr/local/lib/libg2c.a(err.o) definition of common _f__cursor  
> (size 4)
>

It goes on to list the other common symbols found in libg2c.a.  
libg2c.a is a library provided by the g77 libraries.

So I checked out "$ man ld" to find out about this pesky - 
multi_module option and also poked around and found some references  
to MH_DYLIB and some other interesting options like -undefined.

Particularly, under the heading TWO-LEVEL AND FLAT NAMESPACES, three  
paragraphs down we see the default for static link editor is - 
twolevel_namespace which requires that all undefined references be  
satisfied at static link time. Also, the ability to suppress these  
errors is disabled (-undefined suppress).

I assume that what's going on is some of the global variables in /usr/ 
local/lib/libg2c.a are defined but not instantiated. So they need to  
be explicitly set as externs or set to some default value. Since the  
ability to suppress errors isn't available when compiling the  
libRlapack.dylib, then it must be changed in libg2c.a....that entails  
recompiling gfortran.


I'm not clear on why the same code compiles on 10.4 unless gfortran  
4.x. doesn't do this. Anyway, I downloaded the 3.4.2 gcc source and  
looked for err.c with f__cblank var declared (the first error):

> /usr/local/lib/libg2c.a(err.o) definition of common _f__cblank  
> (size 4)

It seems there were some major changes in fortran between 3.x and 4.x  
as the above variables don't exist and even directory structures are  
different. For example, f__cblank and f__cnt don't exist in 4.x. Nor  
does the libf2c directory where libg2c.a is compiled in 3.x.

That's a wrap for  me today, but I'll try to compile a version of  
libg2c.a without the common symbol errors on Monday.

As always, if any developers or those more familiar with the code  
base would like to chime in and direct, correct, refute, or suggest.  
It'd be very appreciated.


-james kyle
On Aug 10, 2007, at 7:14 AM, Ulf Martin wrote:

> Hi
>
> James R. Milks schrieb:
>> You can find the compiled version of R 2.5.1 for OS 10.4.4 or higher
>> at http://cran.r-project.org/bin/macosx/.  I try not to get into
>> compiling myself as I've had pretty bad luck with doing compilations.
>
> I think the problem is, that the binaries are for OS 10.4.x = "Tiger",
> they don't work on 10.3.y = "Panther". So this tip won't help. Two  
> month
> ago I also tried to compile the new R version (2.5.0 then) on Panther
> without success. So I am still hanging around with R 2.4.1. :-(
>
> Just a guess, as I have no idea what's really going on: The  
> compilation
> fails making lapack stuff. Now, since lapack is a Fortran 77  
> package the
> problem might have something to do with this?! (My compilation also
> failed at this point.)
>
>> On Aug 9, 2007, at 3:04 PM, krunk7 at gmail.com wrote:
>>>
>>> I'm attempting to compile R 2.5.1 on OSX Panther and have run into
>>> some issues. First off, if anyone has a link to a binary build of
>>> 2.5.1 for Panther I have no issue going that route.
>>>
>>> -) gcc version 3.3 20030304 (Apple Computer, Inc. build 1666)
>>> -) g77 version 3.4.2
>>> -) ./configure --with-blas='-framework vecLib' --with-lapack
>>> R_PAPERSIZE=letter F77=g77
>>>
>>> When first seeing the build issues, I wanted to verify that I have
>>> the necessary basic environment. I grabbed the 2.2.1 sources, which
>>> are the latest version available with a binary for Panther, and they
>>> compiled without a hitch.
>>>
>>> The error appears in the lapack module when building
>>> libRlapack.dylib. Error output is:
>>>
>>>> make[4]: Entering directory `/opt/sandbox/R-2.5.1/src/modules/ 
>>>> lapack'
>>>> gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o
>>>> libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o
>>>> dlapack3.o dlapack4.o cmplx.o -install_name libRlapack.dylib -
>>>> compatibility_version 2.5.0 -current_version 2.5.1  -
>>>> headerpad_max_install_names  -L/usr/local/lib/gcc/powerpc-apple-
>>>> darwin6.8/3.4.2 -lg2c -L../../../lib -lR
>>>> /usr/bin/libtool: internal link edit command failedld: warning
>>>> multiple definitions of symbol _z_abs/usr/local/lib/libg2c.a
>>>> (z_abs.o) definition of _z_abs in section (__TEXT,__text)../../../
>>>> lib/libR.dylib(z_abs.o) definition of _z_absld: warning multiple
>>>> definitions of symbol _f__cabs/usr/local/lib/libg2c.a(cabs.o)
>>>> definition of _f__cabs in section (__TEXT,__text)../../../lib/
>>>> libR.dylib(cabs.o) definition of _f__cabsld: common symbols not
>>>> allowed with MH_DYLIB output format with the -multi_module option/
>>>> usr/local/lib/libg2c.a(err.o) definition of common _f__cblank (size
>>>> 4)/usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt (size
>>>> 40)/usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)
>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common f(char,
>>>> long *, short __restrict) (size 4)/usr/local/lib/libg2c.a(err.o)
>>>> definition of common _f__cursor (size 4)/usr/local/lib/libg2c.a
>>>> (err.o) definition of common _f__doed (size 4)/usr/local/lib/
>>>> libg2c.a(err.o) definition of common _f__doend (size 4)/usr/local/
>>>> lib/libg2c.a(err.o) definition of common _f__doned (size 4)/usr/
>>>> local/lib/libg2c.a(err.o) definition of common _f__dorevert (size
>>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__elist
>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>> _f__fmtbuf (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>>> common _f__fmtlen (size 4)/usr/local/lib/libg2c.a(err.o) definition
>>>> of common _f__init (size 4)/usr/local/lib/libg2c.a(fmt.o)
>>>> definition of common _f__nonl (size 4)/usr/local/lib/libg2c.a
>>>> (fmt.o) definition of common _f__parenlvl (size 4)/usr/local/lib/
>>>> libg2c.a(fmt.o) definition of common f(char *) (size 4)/usr/local/
>>>> lib/libg2c.a(fmt.o) definition of common _f__ret (size 40)/usr/
>>>> local/lib/libg2c.a(fmt.o) definition of common _f__revloc (size 4)/
>>>> usr/local/lib/libg2c.a(fmt.o) definition of common f(long double,
>>>> *) (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>> _f__scale (size 4)/usr/local/lib/libg2c.a(fmt.o) definition of
>>>> common _f__workdone (size 4)/usr/local/lib/libg2c.a(err.o)
>>>> definition of common _f__units (size 4800)/usr/local/lib/libg2c.a
>>>> (err.o) definition of common f(char, float) (size 4)/usr/local/lib/
>>>> libg2c.a(err.o) definition of common _f__curunit (size 4)/usr/ 
>>>> local/
>>>> lib/libg2c.a(err.o) definition of common _f__donewrec (size 4)/usr/
>>>> local/lib/libg2c.a(err.o) definition of common _f__external (size
>>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__formatted
>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>> _f__hiwater (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>>> common _f__putn (size 4)/usr/local/lib/libg2c.a(err.o) definition
>>>> of common _f__reading (size 4)/usr/local/lib/libg2c.a(err.o)
>>>> definition of common _f__recpos (size 4)/usr/local/lib/libg2c.a
>>>> (err.o) definition of common _f__sequential (size 4)/usr/local/lib/
>>>> libg2c.a(err.o) definition of common _f__getn (size 4)/usr/local/
>>>> lib/libg2c.a(err.o) definition of common _f__icptr (size 4)/usr/
>>>> local/lib/libg2c.a(err.o) definition of common f(short, void, int,
>>>> char) (size 4)
>>>> make[4]: *** [libRlapack.dylib] Error 1  make[4]: Leaving directory
>>>> `/opt/sandbox/R-2.5.1/src/modules/lapack'make[3]: *** [R] Error
>>>> 2make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/modules/
>>>> lapack'make[2]: *** [R] Error 1make[2]: Leaving directory `/opt/
>>>> sandbox/R-2.5.1/src/modules'make[1]: *** [R] Error 1make[1]:
>>>> Leaving directory `/opt/sandbox/R-2.5.1/src'make: *** [R] Error 1
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ibaxter at purdue.edu  Sat Aug 11 22:07:18 2007
From: ibaxter at purdue.edu (Ivan Baxter)
Date: Sat, 11 Aug 2007 16:07:18 -0400
Subject: [R-SIG-Mac] preferences tabs don't match help
Message-ID: <46BE16F6.2020002@purdue.edu>

Okay- this is probably something really simple that I am missing, but I 
haven't managed to find an answer poking around the archives....

I am trying to set the default font  and font size on R 2.5.1 for mac 
and the preference pane seems to be missing several functionalities.

When I have R open and go to applications menu -> preferences  the help 
document says that I should see 4 tabs:

Text Windows tab
Quartz device tab
Packages tab
Misc tab

instead I see 5 icons:
General: Startup
Source Editor: Editor and Syntax Colors
Views:  Console Colors  and Quartz

the text windows tab is nowhere to be seen.

I feel like I must be missing something painfully obvious, but I can't 
figure out what it is.

any assistance would be greatly appreciated.

Ivan

 > sessionInfo()
R version 2.5.1 (2007-06-27)
i386-apple-darwin8.9.1

locale:
C

attached base packages:
[1] "stats"     "graphics"  "grDevices" "utils"     "datasets"  
"methods"   "base"    

-- 
**************************************************************
Ivan Baxter
Research Scientist
Bindley Bioscience Center
Purdue University
Office: Hort 305
765-543-7288
ibaxter at purdue.edu


From simon.urbanek at r-project.org  Sat Aug 11 22:42:04 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 11 Aug 2007 15:42:04 -0500
Subject: [R-SIG-Mac] preferences tabs don't match help
In-Reply-To: <46BE16F6.2020002@purdue.edu>
References: <46BE16F6.2020002@purdue.edu>
Message-ID: <067934E5-00AA-45D9-AEF8-0546DB74A362@r-project.org>


On Aug 11, 2007, at 3:07 PM, Ivan Baxter wrote:

> Okay- this is probably something really simple that I am missing,  
> but I
> haven't managed to find an answer poking around the archives....
>
> I am trying to set the default font  and font size on R 2.5.1 for mac
> and the preference pane seems to be missing several functionalities.
>
> When I have R open and go to applications menu -> preferences  the  
> help
> document says that I should see 4 tabs:
>
> Text Windows tab
> Quartz device tab
> Packages tab
> Misc tab
>
> instead I see 5 icons:
> General: Startup
> Source Editor: Editor and Syntax Colors
> Views:  Console Colors  and Quartz
>
> the text windows tab is nowhere to be seen.
>
> I feel like I must be missing something painfully obvious, but I can't
> figure out what it is.
>

The docs are unfortunately out of sync,. The text size can be set  
either in the toolbar (but you have to enable it in 'customize  
toolbar' first) or by <Cmd><+>/<-> (or the menu). The font size  
management was somewhat messed up, but that should be fixed in the  
nightly build of the GUI (see http://r.research.att.com/ ). The font  
type cannot be changed atm (at least not persistently).

Cheers,
Simon


From simon.urbanek at r-project.org  Sat Aug 11 22:47:18 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 11 Aug 2007 15:47:18 -0500
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther (James Kyle)
In-Reply-To: <E610DF6E-7C8A-4F25-A285-8594AE7DA8A9@ucla.edu>
References: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
	<AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>
	<46BC72E0.6080903@web.de>
	<E610DF6E-7C8A-4F25-A285-8594AE7DA8A9@ucla.edu>
Message-ID: <50BB63DA-68DA-4246-A01C-4BCCC37622EB@r-project.org>

Unfortunately I'm currently traveling without access to any Panther  
box, so I can help you only theoretically. The problem is that you're  
using static g2c and thus linking it more than once (libR and  
libRlapack) won't work. There are several work arounds:
1) use dynamic g2c (if available)
2) use --without-lapack (possibly --without-blas)
3) link libRlapack manually without g2c (it should be available  
through libR anyway)

Cheers,
Simon


On Aug 10, 2007, at 6:02 PM, James Kyle wrote:

> This seems to be the problem area:
>
>> ld: common symbols not allowed with MH_DYLIB output format with the
>> -multi_module option
>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cblank
>> (size 4)
>> /usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt (size 40)
>> /usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)
>> (size 4)
>> /usr/local/lib/libg2c.a(err.o) definition of common f(char, long *,
>> short __restrict) (size 4)
>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cursor
>> (size 4)
>>
>
> It goes on to list the other common symbols found in libg2c.a.
> libg2c.a is a library provided by the g77 libraries.
>
> So I checked out "$ man ld" to find out about this pesky -
> multi_module option and also poked around and found some references
> to MH_DYLIB and some other interesting options like -undefined.
>
> Particularly, under the heading TWO-LEVEL AND FLAT NAMESPACES, three
> paragraphs down we see the default for static link editor is -
> twolevel_namespace which requires that all undefined references be
> satisfied at static link time. Also, the ability to suppress these
> errors is disabled (-undefined suppress).
>
> I assume that what's going on is some of the global variables in /usr/
> local/lib/libg2c.a are defined but not instantiated. So they need to
> be explicitly set as externs or set to some default value. Since the
> ability to suppress errors isn't available when compiling the
> libRlapack.dylib, then it must be changed in libg2c.a....that entails
> recompiling gfortran.
>
>
> I'm not clear on why the same code compiles on 10.4 unless gfortran
> 4.x. doesn't do this. Anyway, I downloaded the 3.4.2 gcc source and
> looked for err.c with f__cblank var declared (the first error):
>
>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cblank
>> (size 4)
>
> It seems there were some major changes in fortran between 3.x and 4.x
> as the above variables don't exist and even directory structures are
> different. For example, f__cblank and f__cnt don't exist in 4.x. Nor
> does the libf2c directory where libg2c.a is compiled in 3.x.
>
> That's a wrap for  me today, but I'll try to compile a version of
> libg2c.a without the common symbol errors on Monday.
>
> As always, if any developers or those more familiar with the code
> base would like to chime in and direct, correct, refute, or suggest.
> It'd be very appreciated.
>
>
> -james kyle
> On Aug 10, 2007, at 7:14 AM, Ulf Martin wrote:
>
>> Hi
>>
>> James R. Milks schrieb:
>>> You can find the compiled version of R 2.5.1 for OS 10.4.4 or higher
>>> at http://cran.r-project.org/bin/macosx/.  I try not to get into
>>> compiling myself as I've had pretty bad luck with doing  
>>> compilations.
>>
>> I think the problem is, that the binaries are for OS 10.4.x =  
>> "Tiger",
>> they don't work on 10.3.y = "Panther". So this tip won't help. Two
>> month
>> ago I also tried to compile the new R version (2.5.0 then) on Panther
>> without success. So I am still hanging around with R 2.4.1. :-(
>>
>> Just a guess, as I have no idea what's really going on: The
>> compilation
>> fails making lapack stuff. Now, since lapack is a Fortran 77
>> package the
>> problem might have something to do with this?! (My compilation also
>> failed at this point.)
>>
>>> On Aug 9, 2007, at 3:04 PM, krunk7 at gmail.com wrote:
>>>>
>>>> I'm attempting to compile R 2.5.1 on OSX Panther and have run into
>>>> some issues. First off, if anyone has a link to a binary build of
>>>> 2.5.1 for Panther I have no issue going that route.
>>>>
>>>> -) gcc version 3.3 20030304 (Apple Computer, Inc. build 1666)
>>>> -) g77 version 3.4.2
>>>> -) ./configure --with-blas='-framework vecLib' --with-lapack
>>>> R_PAPERSIZE=letter F77=g77
>>>>
>>>> When first seeing the build issues, I wanted to verify that I have
>>>> the necessary basic environment. I grabbed the 2.2.1 sources, which
>>>> are the latest version available with a binary for Panther, and  
>>>> they
>>>> compiled without a hitch.
>>>>
>>>> The error appears in the lapack module when building
>>>> libRlapack.dylib. Error output is:
>>>>
>>>>> make[4]: Entering directory `/opt/sandbox/R-2.5.1/src/modules/
>>>>> lapack'
>>>>> gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o
>>>>> libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o
>>>>> dlapack3.o dlapack4.o cmplx.o -install_name libRlapack.dylib -
>>>>> compatibility_version 2.5.0 -current_version 2.5.1  -
>>>>> headerpad_max_install_names  -L/usr/local/lib/gcc/powerpc-apple-
>>>>> darwin6.8/3.4.2 -lg2c -L../../../lib -lR
>>>>> /usr/bin/libtool: internal link edit command failedld: warning
>>>>> multiple definitions of symbol _z_abs/usr/local/lib/libg2c.a
>>>>> (z_abs.o) definition of _z_abs in section (__TEXT,__text)../../../
>>>>> lib/libR.dylib(z_abs.o) definition of _z_absld: warning multiple
>>>>> definitions of symbol _f__cabs/usr/local/lib/libg2c.a(cabs.o)
>>>>> definition of _f__cabs in section (__TEXT,__text)../../../lib/
>>>>> libR.dylib(cabs.o) definition of _f__cabsld: common symbols not
>>>>> allowed with MH_DYLIB output format with the -multi_module option/
>>>>> usr/local/lib/libg2c.a(err.o) definition of common _f__cblank  
>>>>> (size
>>>>> 4)/usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt  
>>>>> (size
>>>>> 40)/usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)
>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common f 
>>>>> (char,
>>>>> long *, short __restrict) (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>> definition of common _f__cursor (size 4)/usr/local/lib/libg2c.a
>>>>> (err.o) definition of common _f__doed (size 4)/usr/local/lib/
>>>>> libg2c.a(err.o) definition of common _f__doend (size 4)/usr/local/
>>>>> lib/libg2c.a(err.o) definition of common _f__doned (size 4)/usr/
>>>>> local/lib/libg2c.a(err.o) definition of common _f__dorevert (size
>>>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__elist
>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>> _f__fmtbuf (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>>>> common _f__fmtlen (size 4)/usr/local/lib/libg2c.a(err.o)  
>>>>> definition
>>>>> of common _f__init (size 4)/usr/local/lib/libg2c.a(fmt.o)
>>>>> definition of common _f__nonl (size 4)/usr/local/lib/libg2c.a
>>>>> (fmt.o) definition of common _f__parenlvl (size 4)/usr/local/lib/
>>>>> libg2c.a(fmt.o) definition of common f(char *) (size 4)/usr/local/
>>>>> lib/libg2c.a(fmt.o) definition of common _f__ret (size 40)/usr/
>>>>> local/lib/libg2c.a(fmt.o) definition of common _f__revloc (size  
>>>>> 4)/
>>>>> usr/local/lib/libg2c.a(fmt.o) definition of common f(long double,
>>>>> *) (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>> _f__scale (size 4)/usr/local/lib/libg2c.a(fmt.o) definition of
>>>>> common _f__workdone (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>> definition of common _f__units (size 4800)/usr/local/lib/libg2c.a
>>>>> (err.o) definition of common f(char, float) (size 4)/usr/local/ 
>>>>> lib/
>>>>> libg2c.a(err.o) definition of common _f__curunit (size 4)/usr/
>>>>> local/
>>>>> lib/libg2c.a(err.o) definition of common _f__donewrec (size 4)/ 
>>>>> usr/
>>>>> local/lib/libg2c.a(err.o) definition of common _f__external (size
>>>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common  
>>>>> _f__formatted
>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>> _f__hiwater (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>>>> common _f__putn (size 4)/usr/local/lib/libg2c.a(err.o) definition
>>>>> of common _f__reading (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>> definition of common _f__recpos (size 4)/usr/local/lib/libg2c.a
>>>>> (err.o) definition of common _f__sequential (size 4)/usr/local/ 
>>>>> lib/
>>>>> libg2c.a(err.o) definition of common _f__getn (size 4)/usr/local/
>>>>> lib/libg2c.a(err.o) definition of common _f__icptr (size 4)/usr/
>>>>> local/lib/libg2c.a(err.o) definition of common f(short, void, int,
>>>>> char) (size 4)
>>>>> make[4]: *** [libRlapack.dylib] Error 1  make[4]: Leaving  
>>>>> directory
>>>>> `/opt/sandbox/R-2.5.1/src/modules/lapack'make[3]: *** [R] Error
>>>>> 2make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/modules/
>>>>> lapack'make[2]: *** [R] Error 1make[2]: Leaving directory `/opt/
>>>>> sandbox/R-2.5.1/src/modules'make[1]: *** [R] Error 1make[1]:
>>>>> Leaving directory `/opt/sandbox/R-2.5.1/src'make: *** [R] Error 1
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From deleeuw at cuddyvalley.org  Sun Aug 12 00:12:28 2007
From: deleeuw at cuddyvalley.org (Jan de Leeuw)
Date: Sat, 11 Aug 2007 15:12:28 -0700
Subject: [R-SIG-Mac] SHLIB_LDFLAGS with icc/ifort
Message-ID: <0CB88C52-6105-4A66-B51D-B06B2769C723@cuddyvalley.org>

For compiling R I switched to icc/icpc/ifort 10.0.x on
both Tiger and Leopard. This caused various multiply
defined symbol errors (and even some cases where the
linker could not find symbols in libreadline.dylib).

So I changed "-flat_namespace --undefined suppress"
in configure to "-twolevel_namespace -undefined dynamic_lookup"
both for MH_DYLIB and MH_BUNDLE files. This solved the
problems and did not introduce new ones, as far as I can see.
It also solves the annoying multiply defined symbol error
problems with add-on packages (even without using the -bundle_loader
flag, it seems). This is because multiply defined symbols merely give
warnings when linking libraries with two-level namespaces.

Not sure if the same strategy works with gcc/gfortran, but the
general idea of getting rid of flat namespaces seems
useful, if only because it makes building on OS X more like
building on other *nix systems and because package builds from
source are less likely to fail.

==========================================================
Jan de Leeuw, 11667 Steinhoff Rd, Frazier Park, CA 93225
home 661-245-1725 skype 661-347-0667 global 254-381-4905
.mac: jdeleeuw +++  aim: deleeuwjan +++ skype: j_deleeuw
==========================================================
                 Many nights on the road
        and not dead yet ---
                the end of autumn.       (Basho 1644-1694)


From simon.urbanek at r-project.org  Sun Aug 12 17:46:36 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 12 Aug 2007 08:46:36 -0700
Subject: [R-SIG-Mac] SHLIB_LDFLAGS with icc/ifort
In-Reply-To: <0CB88C52-6105-4A66-B51D-B06B2769C723@cuddyvalley.org>
References: <0CB88C52-6105-4A66-B51D-B06B2769C723@cuddyvalley.org>
Message-ID: <BCEBC4B8-246D-48AD-8FFA-A5E1B8E7FF1E@r-project.org>

Jan,

for gcc that supports it we are not using flat namespaces:
-dynamiclib -Wl,-macosx_version_min -Wl,10.3 -undefined  
dynamic_lookup -single_module -multiply_defined suppress

single module takes care of the common symbols, multiply defined is  
suppressed if not fatal and dynamic lookup is used for unresolved  
symbols.

We only fall back to the flat namespace if the compiler doesn't  
support the above, so my guess would be that icc doesn't - please  
look at the config.log and let me know what fails. We can provide  
separate flags for icc if necessary (I don't have icc anymore, so I  
can't test it :/).

As of Panther, unfortunately dynamic loading fails with the setup  
above (seems to be a bug in Panther) so we have to fall back to the  
old flat-space behavior as well. I didn't tweak the Panther config  
much, because I no longer have access to a Panther box.

Cheers,
Simon


On Aug 11, 2007, at 3:12 PM, Jan de Leeuw wrote:

> For compiling R I switched to icc/icpc/ifort 10.0.x on
> both Tiger and Leopard. This caused various multiply
> defined symbol errors (and even some cases where the
> linker could not find symbols in libreadline.dylib).
>
> So I changed "-flat_namespace --undefined suppress"
> in configure to "-twolevel_namespace -undefined dynamic_lookup"
> both for MH_DYLIB and MH_BUNDLE files. This solved the
> problems and did not introduce new ones, as far as I can see.
> It also solves the annoying multiply defined symbol error
> problems with add-on packages (even without using the -bundle_loader
> flag, it seems). This is because multiply defined symbols merely give
> warnings when linking libraries with two-level namespaces.
>
> Not sure if the same strategy works with gcc/gfortran, but the
> general idea of getting rid of flat namespaces seems
> useful, if only because it makes building on OS X more like
> building on other *nix systems and because package builds from
> source are less likely to fail.
>
> ==========================================================
> Jan de Leeuw, 11667 Steinhoff Rd, Frazier Park, CA 93225
> home 661-245-1725 skype 661-347-0667 global 254-381-4905
> .mac: jdeleeuw +++  aim: deleeuwjan +++ skype: j_deleeuw
> ==========================================================
>                  Many nights on the road
>         and not dead yet ---
>                 the end of autumn.       (Basho 1644-1694)
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From simon.urbanek at r-project.org  Sun Aug 12 17:50:03 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 12 Aug 2007 08:50:03 -0700
Subject: [R-SIG-Mac] Problem loading libraries in 2.5
In-Reply-To: <57690.41439.qm@web60317.mail.yahoo.com>
References: <57690.41439.qm@web60317.mail.yahoo.com>
Message-ID: <350CD501-ADAE-4687-B104-D07AF54013A9@r-project.org>


On Aug 6, 2007, at 3:14 PM, Joseph Retzer wrote:

> Hi All,
>   I think someone said this was fixed but I seem to still be having  
> the same problems loading packages into R 2.5 on the Mac. I updated  
> all packages and re-installed the latest build from http:// 
> r.research.att.com.
> My error messages and version information are below. Have I missed  
> something?


I cannot reproduce it with the CRAN release of R and packages. Maybe  
the CRAN mirror you're using is broken? Anyway, a fix is always to  
install the gfortran that comes with R (or you can get it separately  
from the "tools" directory on CRAN).

Cheers,
Simon


>
> library(cluster)
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>     unable to load shared library '/Library/Frameworks/R.framework/ 
> Versions/2.5/Resources/library/cluster/libs/i386/cluster.so':
>   dlopen(/Library/Frameworks/R.framework/Versions/2.5/Resources/ 
> library/cluster/libs/i386/cluster.so, 6): Library not loaded: /usr/ 
> local/lib/libgfortran.2.dylib
>   Referenced from: /Library/Frameworks/R.framework/Versions/2.5/ 
> Resources/library/cluster/libs/i386/cluster.so
>   Reason: image not found
> Error: package/namespace load failed for 'cluster'
>> library(doBy)
> Loading required package: Hmisc
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>     unable to load shared library '/Library/Frameworks/R.framework/ 
> Versions/2.5/Resources/library/cluster/libs/i386/cluster.so':
>   dlopen(/Library/Frameworks/R.framework/Versions/2.5/Resources/ 
> library/cluster/libs/i386/cluster.so, 6): Library not loaded: /usr/ 
> local/lib/libgfortran.2.dylib
>   Referenced from: /Library/Frameworks/R.framework/Versions/2.5/ 
> Resources/library/cluster/libs/i386/cluster.so
>   Reason: image not found
> Error: package 'Hmisc' could not be loaded
>>
>>
>> R.Version()
> $platform
> [1] "i386-apple-darwin8.10.1"
>
> $arch
> [1] "i386"
>
> $os
> [1] "darwin8.10.1"
>
> $system
> [1] "i386, darwin8.10.1"
>
> $status
> [1] "Patched"
>
> $major
> [1] "2"
>
> $minor
> [1] "5.1"
>
> $year
> [1] "2007"
>
> $month
> [1] "08"
>
> $day
> [1] "02"
>
> $`svn rev`
> [1] "42432"
>
> $language
> [1] "R"
>
> $version.string
> [1] "R version 2.5.1 Patched (2007-08-02 r42432)"
>
>>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From retzerjj at gmail.com  Sun Aug 12 18:19:09 2007
From: retzerjj at gmail.com (Retzer Joe)
Date: Sun, 12 Aug 2007 11:19:09 -0500
Subject: [R-SIG-Mac] Problem loading libraries in 2.5
In-Reply-To: <350CD501-ADAE-4687-B104-D07AF54013A9@r-project.org>
References: <57690.41439.qm@web60317.mail.yahoo.com>
	<350CD501-ADAE-4687-B104-D07AF54013A9@r-project.org>
Message-ID: <6521A789-9054-4170-A823-1C05AAB4927E@gmail.com>

Hi Simon,

   In following your advice at UseR last week I,

      1. removed old packages from the /Library/Frameworks/ 
R.framework/Resources/library directory and
      2. reinstalled the packages from the main repository in Austria

This has solved the problem. Thanks very much for taking the time to  
help me out. Thanks also for the excellent presentation at UseR.

Take care,
Joe



On Aug 12, 2007, at 10:50 AM, Simon Urbanek wrote:

>
> On Aug 6, 2007, at 3:14 PM, Joseph Retzer wrote:
>
>> Hi All,
>>   I think someone said this was fixed but I seem to still be having
>> the same problems loading packages into R 2.5 on the Mac. I updated
>> all packages and re-installed the latest build from http://
>> r.research.att.com.
>> My error messages and version information are below. Have I missed
>> something?
>
>
> I cannot reproduce it with the CRAN release of R and packages. Maybe
> the CRAN mirror you're using is broken? Anyway, a fix is always to
> install the gfortran that comes with R (or you can get it separately
> from the "tools" directory on CRAN).
>
> Cheers,
> Simon
>
>
>>
>> library(cluster)
>> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>>     unable to load shared library '/Library/Frameworks/R.framework/
>> Versions/2.5/Resources/library/cluster/libs/i386/cluster.so':
>>   dlopen(/Library/Frameworks/R.framework/Versions/2.5/Resources/
>> library/cluster/libs/i386/cluster.so, 6): Library not loaded: /usr/
>> local/lib/libgfortran.2.dylib
>>   Referenced from: /Library/Frameworks/R.framework/Versions/2.5/
>> Resources/library/cluster/libs/i386/cluster.so
>>   Reason: image not found
>> Error: package/namespace load failed for 'cluster'
>>> library(doBy)
>> Loading required package: Hmisc
>> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>>     unable to load shared library '/Library/Frameworks/R.framework/
>> Versions/2.5/Resources/library/cluster/libs/i386/cluster.so':
>>   dlopen(/Library/Frameworks/R.framework/Versions/2.5/Resources/
>> library/cluster/libs/i386/cluster.so, 6): Library not loaded: /usr/
>> local/lib/libgfortran.2.dylib
>>   Referenced from: /Library/Frameworks/R.framework/Versions/2.5/
>> Resources/library/cluster/libs/i386/cluster.so
>>   Reason: image not found
>> Error: package 'Hmisc' could not be loaded
>>>
>>>
>>> R.Version()
>> $platform
>> [1] "i386-apple-darwin8.10.1"
>>
>> $arch
>> [1] "i386"
>>
>> $os
>> [1] "darwin8.10.1"
>>
>> $system
>> [1] "i386, darwin8.10.1"
>>
>> $status
>> [1] "Patched"
>>
>> $major
>> [1] "2"
>>
>> $minor
>> [1] "5.1"
>>
>> $year
>> [1] "2007"
>>
>> $month
>> [1] "08"
>>
>> $day
>> [1] "02"
>>
>> $`svn rev`
>> [1] "42432"
>>
>> $language
>> [1] "R"
>>
>> $version.string
>> [1] "R version 2.5.1 Patched (2007-08-02 r42432)"
>>
>>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From thatsanicehatyouhave at mac.com  Mon Aug 13 17:32:23 2007
From: thatsanicehatyouhave at mac.com (thatsanicehatyouhave at mac.com)
Date: Mon, 13 Aug 2007 16:32:23 +0100
Subject: [R-SIG-Mac] Save dialog bug
Message-ID: <0B45FEAE-091A-4215-AA0B-99C179F92C63@mac.com>

Hi,

I've got an odd bug. Here are the steps to reproduce it from a clean  
start:

1) Create any plot:

 > plot(1,1)

2) Make the plot window active.
3) Save plot (i.e. command-s).
4) Switch to any other app using command-tab. Clicking on another  
app's window or the desktop will not reproduce the bug.
5) Command-tab back to R. For me, the save dialog box has returned,  
but it won't respond to any mouse clicks and I can't make it go away.

Over the course of an R session, I'll start to collect these windows  
in the corner of my monitor! I just discovered now trying to recreate  
the minimum steps to reproduce this that it only happens with the  
command-tab shortcut rather than clicking on anything else (so  
there's a temporary workaround).

Cheers,

Demitri


From thatsanicehatyouhave at mac.com  Mon Aug 13 20:27:24 2007
From: thatsanicehatyouhave at mac.com (thatsanicehatyouhave at mac.com)
Date: Mon, 13 Aug 2007 19:27:24 +0100
Subject: [R-SIG-Mac] Save dialog bug
Message-ID: <222AB156-89B3-4165-B992-67D0C33A1409@mac.com>


A short addendum: this bug can occur when saving source files as  
well, not just plots.

Demitri


From goedman at mac.com  Mon Aug 13 21:06:55 2007
From: goedman at mac.com (Rob J Goedman)
Date: Mon, 13 Aug 2007 12:06:55 -0700
Subject: [R-SIG-Mac] Save dialog bug
In-Reply-To: <222AB156-89B3-4165-B992-67D0C33A1409@mac.com>
References: <222AB156-89B3-4165-B992-67D0C33A1409@mac.com>
Message-ID: <F57F1E77-F339-4884-8E53-6254D1477AA4@mac.com>

Hi Demitri,

R-GUI revision 4729 from the svn or tomorrow's GUI build should fix  
this problem.

Rob


On Aug 13, 2007, at 11:27 AM, thatsanicehatyouhave at mac.com wrote:

>
> A short addendum: this bug can occur when saving source files as
> well, not just plots.
>
> Demitri
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From krunk7 at gmail.com  Mon Aug 13 22:11:28 2007
From: krunk7 at gmail.com (James Kyle)
Date: Mon, 13 Aug 2007 13:11:28 -0700
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther (James Kyle)
In-Reply-To: <50BB63DA-68DA-4246-A01C-4BCCC37622EB@r-project.org>
References: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
	<AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>
	<46BC72E0.6080903@web.de>
	<E610DF6E-7C8A-4F25-A285-8594AE7DA8A9@ucla.edu>
	<50BB63DA-68DA-4246-A01C-4BCCC37622EB@r-project.org>
Message-ID: <A488E0E3-6804-4E5A-A5F5-E9D3FB8C51BE@gmail.com>

Thank you for the input, I'm a bit new to this level of compiling,  
but here's my best efforts.


> Unfortunately I'm currently traveling without access to any Panther
> box, so I can help you only theoretically. The problem is that you're
> using static g2c and thus linking it more than once (libR and
> libRlapack) won't work. There are several work arounds:
> 1) use dynamic g2c (if available)
>
I read the gcc documentation and the only package not compiled as a  
shared lib by default is libobjc. So I first compiled gcc-3.3.6  
(without the --enable-shared=libobjc), installed it in /usr/local/ 
gcc36, and then ln -sf /usr/local/gcc36/bin/gcc ~/bin/gcc and ln -sf / 
usr/local/gcc36/bin/g77 ~/bin/g77.
Compiling R against this build produced:

$ ./configure --with-blas='-framework vecLib' --enable-BLAS-shlib &&  
make all
g77  -fPIC -fno-common  -g -O2 -c blas.f -o blas.o
g77  -fPIC -fno-common  -g -O2 -c cmplxblas.f -o cmplxblas.ogcc - 
std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o libRblas.dylib  
blas.o -install_name libRblas.dylib -headerpad_max_install_names  - 
lg2c  cmplxblas.o
ld: for architecture ppc
ld: Undefined symbols:
_xerbla_
_z_abs
/usr/bin/libtool: internal link edit command failed
make[4]: *** [libRblas.dylib] Error 1
make[4]: Leaving directory `/opt/sandbox/R-2.5.1/src/extra/blas'
make[3]: *** [R] Error 2
make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/extra/blas'
make[2]: *** [R] Error 1
make[2]: Leaving directory `/opt/sandbox/R-2.5.1/src/extra'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/opt/sandbox/R-2.5.1/src'
make: *** [R] Error 1

Next, I attempted to compile gcc36 with --enable-shared=libobjc
(after all this is OSX, so I figured this might do it). Compiling  
against this build produces the same errors as above.


> 2) use --without-lapack (possibly --without-blas)
>
This seemed the most straight forward solution, but it too produces  
errors

$ ./configure --without-lapack && make all
gcc -std=gnu99 -I../../src/extra/zlib -I../../src/extra/bzip2 -I../../ 
src/extra/pcre  -I. -I../../src/include -I../../src/include -I/sw/ 
include -I/usr/local/include -DHAVE_CONFIG_H   -fPIC -fno-common  -g - 
O2 -c complex.c -o complex.o
complex.c: In function `do_cmathfuns':
complex.c:332: error: incompatible type for argument 1 of `cabs'
make[3]: *** [complex.o] Error 1
make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/opt/sandbox/R-2.5.1/src'
make: *** [R] Error 1

and:

$ ./configure --without-lapack --without-blas && make all

gcc -std=gnu99 -I../../src/extra/zlib -I../../src/extra/bzip2 -I../../ 
src/extra/pcre  -I. -I../../src/include -I../../src/include -I/sw/ 
include -I/usr/local/include -DHAVE_CONFIG_H   -fPIC -fno-common  -g - 
O2 -c complex.c -o complex.o
complex.c: In function `do_cmathfuns':
complex.c:332: error: incompatible type for argument 1 of `cabs'
make[3]: *** [complex.o] Error 1
make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/opt/sandbox/R-2.5.1/src'
make: *** [R] Error 1

Same errors were produced with the --enable-shared=libobjc build of  
gcc as well.


> 3) link libRlapack manually without g2c (it should be available
> through libR anyway)
>
>
I'm not entirely sure how to go about this. I found the  
libRlapack.dylib compile command in the $R/src/modules/lapack/ 
Makefile on line #81

$(DYLIB_LINK) -o $@ $(LIBOBJECTS) -install_name libRlapack.dylib - 
compatibility_version 2.5.0 -current_version 2.5.1  - 
headerpad_max_install_names -L$(R_HOME)/lib$(R_ARCH) -lRblas $ 
(Rlapack_la_LIBADD)

This is expanded to:

gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o  
libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o dlapack3.o  
dlapack4.o cmplx.o -install_name libRlapack.dylib - 
compatibility_version 2.5.0 -current_version 2.5.1  - 
headerpad_max_install_names -L../../../lib -lRblas -lg2c -L../../../ 
lib -lR -dylib_file libRblas.dylib:../../../lib/libRblas.dylib

I attempted to remove the -lg2c, which threw and error on not finding  
-lRblas. Removing that throws an error on not finding -lR. So I must  
not be going about this correctly.

> Cheers,
> Simon
>
>

Thanks for the suggestions, Simon. Much appreciated. :)

James A. Kyle

>
> On Aug 10, 2007, at 6:02 PM, James Kyle wrote:
>
>
>> This seems to be the problem area:
>>
>>
>>> ld: common symbols not allowed with MH_DYLIB output format with the
>>> -multi_module option
>>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cblank
>>> (size 4)
>>> /usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt (size  
>>> 40)
>>> /usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)
>>> (size 4)
>>> /usr/local/lib/libg2c.a(err.o) definition of common f(char, long *,
>>> short __restrict) (size 4)
>>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cursor
>>> (size 4)
>>>
>>>
>>
>> It goes on to list the other common symbols found in libg2c.a.
>> libg2c.a is a library provided by the g77 libraries.
>>
>> So I checked out "$ man ld" to find out about this pesky -
>> multi_module option and also poked around and found some references
>> to MH_DYLIB and some other interesting options like -undefined.
>>
>> Particularly, under the heading TWO-LEVEL AND FLAT NAMESPACES, three
>> paragraphs down we see the default for static link editor is -
>> twolevel_namespace which requires that all undefined references be
>> satisfied at static link time. Also, the ability to suppress these
>> errors is disabled (-undefined suppress).
>>
>> I assume that what's going on is some of the global variables in / 
>> usr/
>> local/lib/libg2c.a are defined but not instantiated. So they need to
>> be explicitly set as externs or set to some default value. Since the
>> ability to suppress errors isn't available when compiling the
>> libRlapack.dylib, then it must be changed in libg2c.a....that entails
>> recompiling gfortran.
>>
>>
>> I'm not clear on why the same code compiles on 10.4 unless gfortran
>> 4.x. doesn't do this. Anyway, I downloaded the 3.4.2 gcc source and
>> looked for err.c with f__cblank var declared (the first error):
>>
>>
>>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cblank
>>> (size 4)
>>>
>>
>> It seems there were some major changes in fortran between 3.x and 4.x
>> as the above variables don't exist and even directory structures are
>> different. For example, f__cblank and f__cnt don't exist in 4.x. Nor
>> does the libf2c directory where libg2c.a is compiled in 3.x.
>>
>> That's a wrap for  me today, but I'll try to compile a version of
>> libg2c.a without the common symbol errors on Monday.
>>
>> As always, if any developers or those more familiar with the code
>> base would like to chime in and direct, correct, refute, or suggest.
>> It'd be very appreciated.
>>
>>
>> -james kyle
>> On Aug 10, 2007, at 7:14 AM, Ulf Martin wrote:
>>
>>
>>> Hi
>>>
>>> James R. Milks schrieb:
>>>
>>>> You can find the compiled version of R 2.5.1 for OS 10.4.4 or  
>>>> higher
>>>> at http://cran.r-project.org/bin/macosx/.  I try not to get into
>>>> compiling myself as I've had pretty bad luck with doing
>>>> compilations.
>>>>
>>>
>>> I think the problem is, that the binaries are for OS 10.4.x =
>>> "Tiger",
>>> they don't work on 10.3.y = "Panther". So this tip won't help. Two
>>> month
>>> ago I also tried to compile the new R version (2.5.0 then) on  
>>> Panther
>>> without success. So I am still hanging around with R 2.4.1. :-(
>>>
>>> Just a guess, as I have no idea what's really going on: The
>>> compilation
>>> fails making lapack stuff. Now, since lapack is a Fortran 77
>>> package the
>>> problem might have something to do with this?! (My compilation also
>>> failed at this point.)
>>>
>>>
>>>> On Aug 9, 2007, at 3:04 PM, krunk7 at gmail.com wrote:
>>>>
>>>>>
>>>>> I'm attempting to compile R 2.5.1 on OSX Panther and have run into
>>>>> some issues. First off, if anyone has a link to a binary build of
>>>>> 2.5.1 for Panther I have no issue going that route.
>>>>>
>>>>> -) gcc version 3.3 20030304 (Apple Computer, Inc. build 1666)
>>>>> -) g77 version 3.4.2
>>>>> -) ./configure --with-blas='-framework vecLib' --with-lapack
>>>>> R_PAPERSIZE=letter F77=g77
>>>>>
>>>>> When first seeing the build issues, I wanted to verify that I have
>>>>> the necessary basic environment. I grabbed the 2.2.1 sources,  
>>>>> which
>>>>> are the latest version available with a binary for Panther, and
>>>>> they
>>>>> compiled without a hitch.
>>>>>
>>>>> The error appears in the lapack module when building
>>>>> libRlapack.dylib. Error output is:
>>>>>
>>>>>
>>>>>> make[4]: Entering directory `/opt/sandbox/R-2.5.1/src/modules/
>>>>>> lapack'
>>>>>> gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o
>>>>>> libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o
>>>>>> dlapack3.o dlapack4.o cmplx.o -install_name libRlapack.dylib -
>>>>>> compatibility_version 2.5.0 -current_version 2.5.1  -
>>>>>> headerpad_max_install_names  -L/usr/local/lib/gcc/powerpc-apple-
>>>>>> darwin6.8/3.4.2 -lg2c -L../../../lib -lR
>>>>>> /usr/bin/libtool: internal link edit command failedld: warning
>>>>>> multiple definitions of symbol _z_abs/usr/local/lib/libg2c.a
>>>>>> (z_abs.o) definition of _z_abs in section  
>>>>>> (__TEXT,__text)../../../
>>>>>> lib/libR.dylib(z_abs.o) definition of _z_absld: warning multiple
>>>>>> definitions of symbol _f__cabs/usr/local/lib/libg2c.a(cabs.o)
>>>>>> definition of _f__cabs in section (__TEXT,__text)../../../lib/
>>>>>> libR.dylib(cabs.o) definition of _f__cabsld: common symbols not
>>>>>> allowed with MH_DYLIB output format with the -multi_module  
>>>>>> option/
>>>>>> usr/local/lib/libg2c.a(err.o) definition of common _f__cblank
>>>>>> (size
>>>>>> 4)/usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt
>>>>>> (size
>>>>>> 40)/usr/local/lib/libg2c.a(fmt.o) definition of common f 
>>>>>> (char,  *)
>>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common f
>>>>>> (char,
>>>>>> long *, short __restrict) (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>>> definition of common _f__cursor (size 4)/usr/local/lib/libg2c.a
>>>>>> (err.o) definition of common _f__doed (size 4)/usr/local/lib/
>>>>>> libg2c.a(err.o) definition of common _f__doend (size 4)/usr/ 
>>>>>> local/
>>>>>> lib/libg2c.a(err.o) definition of common _f__doned (size 4)/usr/
>>>>>> local/lib/libg2c.a(err.o) definition of common _f__dorevert (size
>>>>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__elist
>>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>>> _f__fmtbuf (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>>>>> common _f__fmtlen (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>>> definition
>>>>>> of common _f__init (size 4)/usr/local/lib/libg2c.a(fmt.o)
>>>>>> definition of common _f__nonl (size 4)/usr/local/lib/libg2c.a
>>>>>> (fmt.o) definition of common _f__parenlvl (size 4)/usr/local/lib/
>>>>>> libg2c.a(fmt.o) definition of common f(char *) (size 4)/usr/ 
>>>>>> local/
>>>>>> lib/libg2c.a(fmt.o) definition of common _f__ret (size 40)/usr/
>>>>>> local/lib/libg2c.a(fmt.o) definition of common _f__revloc (size
>>>>>> 4)/
>>>>>> usr/local/lib/libg2c.a(fmt.o) definition of common f(long double,
>>>>>> *) (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>>> _f__scale (size 4)/usr/local/lib/libg2c.a(fmt.o) definition of
>>>>>> common _f__workdone (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>>> definition of common _f__units (size 4800)/usr/local/lib/libg2c.a
>>>>>> (err.o) definition of common f(char, float) (size 4)/usr/local/
>>>>>> lib/
>>>>>> libg2c.a(err.o) definition of common _f__curunit (size 4)/usr/
>>>>>> local/
>>>>>> lib/libg2c.a(err.o) definition of common _f__donewrec (size 4)/
>>>>>> usr/
>>>>>> local/lib/libg2c.a(err.o) definition of common _f__external (size
>>>>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>>> _f__formatted
>>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>>> _f__hiwater (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>>>>> common _f__putn (size 4)/usr/local/lib/libg2c.a(err.o) definition
>>>>>> of common _f__reading (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>>> definition of common _f__recpos (size 4)/usr/local/lib/libg2c.a
>>>>>> (err.o) definition of common _f__sequential (size 4)/usr/local/
>>>>>> lib/
>>>>>> libg2c.a(err.o) definition of common _f__getn (size 4)/usr/local/
>>>>>> lib/libg2c.a(err.o) definition of common _f__icptr (size 4)/usr/
>>>>>> local/lib/libg2c.a(err.o) definition of common f(short, void,  
>>>>>> int,
>>>>>> char) (size 4)
>>>>>> make[4]: *** [libRlapack.dylib] Error 1  make[4]: Leaving
>>>>>> directory
>>>>>> `/opt/sandbox/R-2.5.1/src/modules/lapack'make[3]: *** [R] Error
>>>>>> 2make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/modules/
>>>>>> lapack'make[2]: *** [R] Error 1make[2]: Leaving directory `/opt/
>>>>>> sandbox/R-2.5.1/src/modules'make[1]: *** [R] Error 1make[1]:
>>>>>> Leaving directory `/opt/sandbox/R-2.5.1/src'make: *** [R] Error 1
>>>>>>
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From thatsanicehatyouhave at mac.com  Mon Aug 13 22:59:22 2007
From: thatsanicehatyouhave at mac.com (Demitri Muna)
Date: Mon, 13 Aug 2007 21:59:22 +0100
Subject: [R-SIG-Mac] Save dialog bug
In-Reply-To: <F57F1E77-F339-4884-8E53-6254D1477AA4@mac.com>
References: <222AB156-89B3-4165-B992-67D0C33A1409@mac.com>
	<F57F1E77-F339-4884-8E53-6254D1477AA4@mac.com>
Message-ID: <7A8D1610-9761-49D3-94B2-8B93FDABE411@mac.com>


On 13 Aug 2007, at 20:06, Rob J Goedman wrote:

> R-GUI revision 4729 from the svn or tomorrow's GUI build should fix  
> this problem.

Brilliant, thanks! I'll check it out.

Demitri


From jameskyle at ucla.edu  Mon Aug 13 22:01:50 2007
From: jameskyle at ucla.edu (James Kyle)
Date: Mon, 13 Aug 2007 13:01:50 -0700
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther (James Kyle)
In-Reply-To: <50BB63DA-68DA-4246-A01C-4BCCC37622EB@r-project.org>
References: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
	<AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>
	<46BC72E0.6080903@web.de>
	<E610DF6E-7C8A-4F25-A285-8594AE7DA8A9@ucla.edu>
	<50BB63DA-68DA-4246-A01C-4BCCC37622EB@r-project.org>
Message-ID: <3F129DE1-E4A1-4922-8D23-4D4DE31E3D9E@ucla.edu>

Thank you for the input, I'm a bit new to this level of compiling,  
but here's my best efforts.

> Unfortunately I'm currently traveling without access to any Panther
> box, so I can help you only theoretically. The problem is that you're
> using static g2c and thus linking it more than once (libR and
> libRlapack) won't work. There are several work arounds:
> 1) use dynamic g2c (if available)
I read the gcc documentation and the only package not compiled as a  
shared lib by default is libobjc. So I first compiled gcc-3.3.6  
(without the --enable-shared=libobjc), installed it in /usr/local/ 
gcc36, and then ln -sf /usr/local/gcc36/bin/gcc ~/bin/gcc and ln -sf / 
usr/local/gcc36/bin/g77 ~/bin/g77.
Compiling R against this build produced:

$ ./configure --with-blas='-framework vecLib' --enable-BLAS-shlib &&  
make all
g77  -fPIC -fno-common  -g -O2 -c blas.f -o blas.o
g77  -fPIC -fno-common  -g -O2 -c cmplxblas.f -o cmplxblas.ogcc - 
std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o libRblas.dylib  
blas.o -install_name libRblas.dylib -headerpad_max_install_names  - 
lg2c  cmplxblas.o
ld: for architecture ppc
ld: Undefined symbols:
_xerbla_
_z_abs
/usr/bin/libtool: internal link edit command failed
make[4]: *** [libRblas.dylib] Error 1
make[4]: Leaving directory `/opt/sandbox/R-2.5.1/src/extra/blas'
make[3]: *** [R] Error 2
make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/extra/blas'
make[2]: *** [R] Error 1
make[2]: Leaving directory `/opt/sandbox/R-2.5.1/src/extra'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/opt/sandbox/R-2.5.1/src'
make: *** [R] Error 1

Next, I attempted to compile gcc36 with --enable-shared=libobjc
(after all this is OSX, so I figured this might do it). Compiling  
against this build produces the same errors as above.

> 2) use --without-lapack (possibly --without-blas)
This seemed the most straight forward solution, but it too produces  
errors

$ ./configure --without-lapack && make all
gcc -std=gnu99 -I../../src/extra/zlib -I../../src/extra/bzip2 -I../../ 
src/extra/pcre  -I. -I../../src/include -I../../src/include -I/sw/ 
include -I/usr/local/include -DHAVE_CONFIG_H   -fPIC -fno-common  -g - 
O2 -c complex.c -o complex.o
complex.c: In function `do_cmathfuns':
complex.c:332: error: incompatible type for argument 1 of `cabs'
make[3]: *** [complex.o] Error 1
make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/opt/sandbox/R-2.5.1/src'
make: *** [R] Error 1

and:

$ ./configure --without-lapack --without-blas && make all

gcc -std=gnu99 -I../../src/extra/zlib -I../../src/extra/bzip2 -I../../ 
src/extra/pcre  -I. -I../../src/include -I../../src/include -I/sw/ 
include -I/usr/local/include -DHAVE_CONFIG_H   -fPIC -fno-common  -g - 
O2 -c complex.c -o complex.o
complex.c: In function `do_cmathfuns':
complex.c:332: error: incompatible type for argument 1 of `cabs'
make[3]: *** [complex.o] Error 1
make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/opt/sandbox/R-2.5.1/src'
make: *** [R] Error 1

Same errors were produced with the --enable-shared=libobjc build of  
gcc as well.

> 3) link libRlapack manually without g2c (it should be available
> through libR anyway)
>
I'm not entirely sure how to go about this. I found the  
libRlapack.dylib compile command in the $R/src/modules/lapack/ 
Makefile on line #81

$(DYLIB_LINK) -o $@ $(LIBOBJECTS) -install_name libRlapack.dylib - 
compatibility_version 2.5.0 -current_version 2.5.1  - 
headerpad_max_install_names -L$(R_HOME)/lib$(R_ARCH) -lRblas $ 
(Rlapack_la_LIBADD)

This is expanded to:

gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o  
libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o dlapack3.o  
dlapack4.o cmplx.o -install_name libRlapack.dylib - 
compatibility_version 2.5.0 -current_version 2.5.1  - 
headerpad_max_install_names -L../../../lib -lRblas -lg2c -L../../../ 
lib -lR -dylib_file libRblas.dylib:../../../lib/libRblas.dylib

I attempted to remove the -lg2c, which threw and error on not finding  
-lRblas. Removing that throws an error on not finding -lR. So I must  
not be going about this correctly.
> Cheers,
> Simon
>

Thanks for the suggestions, Simon. Much appreciated. :)

James A. Kyle
>
> On Aug 10, 2007, at 6:02 PM, James Kyle wrote:
>
>> This seems to be the problem area:
>>
>>> ld: common symbols not allowed with MH_DYLIB output format with the
>>> -multi_module option
>>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cblank
>>> (size 4)
>>> /usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt (size  
>>> 40)
>>> /usr/local/lib/libg2c.a(fmt.o) definition of common f(char,  *)
>>> (size 4)
>>> /usr/local/lib/libg2c.a(err.o) definition of common f(char, long *,
>>> short __restrict) (size 4)
>>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cursor
>>> (size 4)
>>>
>>
>> It goes on to list the other common symbols found in libg2c.a.
>> libg2c.a is a library provided by the g77 libraries.
>>
>> So I checked out "$ man ld" to find out about this pesky -
>> multi_module option and also poked around and found some references
>> to MH_DYLIB and some other interesting options like -undefined.
>>
>> Particularly, under the heading TWO-LEVEL AND FLAT NAMESPACES, three
>> paragraphs down we see the default for static link editor is -
>> twolevel_namespace which requires that all undefined references be
>> satisfied at static link time. Also, the ability to suppress these
>> errors is disabled (-undefined suppress).
>>
>> I assume that what's going on is some of the global variables in / 
>> usr/
>> local/lib/libg2c.a are defined but not instantiated. So they need to
>> be explicitly set as externs or set to some default value. Since the
>> ability to suppress errors isn't available when compiling the
>> libRlapack.dylib, then it must be changed in libg2c.a....that entails
>> recompiling gfortran.
>>
>>
>> I'm not clear on why the same code compiles on 10.4 unless gfortran
>> 4.x. doesn't do this. Anyway, I downloaded the 3.4.2 gcc source and
>> looked for err.c with f__cblank var declared (the first error):
>>
>>> /usr/local/lib/libg2c.a(err.o) definition of common _f__cblank
>>> (size 4)
>>
>> It seems there were some major changes in fortran between 3.x and 4.x
>> as the above variables don't exist and even directory structures are
>> different. For example, f__cblank and f__cnt don't exist in 4.x. Nor
>> does the libf2c directory where libg2c.a is compiled in 3.x.
>>
>> That's a wrap for  me today, but I'll try to compile a version of
>> libg2c.a without the common symbol errors on Monday.
>>
>> As always, if any developers or those more familiar with the code
>> base would like to chime in and direct, correct, refute, or suggest.
>> It'd be very appreciated.
>>
>>
>> -james kyle
>> On Aug 10, 2007, at 7:14 AM, Ulf Martin wrote:
>>
>>> Hi
>>>
>>> James R. Milks schrieb:
>>>> You can find the compiled version of R 2.5.1 for OS 10.4.4 or  
>>>> higher
>>>> at http://cran.r-project.org/bin/macosx/.  I try not to get into
>>>> compiling myself as I've had pretty bad luck with doing
>>>> compilations.
>>>
>>> I think the problem is, that the binaries are for OS 10.4.x =
>>> "Tiger",
>>> they don't work on 10.3.y = "Panther". So this tip won't help. Two
>>> month
>>> ago I also tried to compile the new R version (2.5.0 then) on  
>>> Panther
>>> without success. So I am still hanging around with R 2.4.1. :-(
>>>
>>> Just a guess, as I have no idea what's really going on: The
>>> compilation
>>> fails making lapack stuff. Now, since lapack is a Fortran 77
>>> package the
>>> problem might have something to do with this?! (My compilation also
>>> failed at this point.)
>>>
>>>> On Aug 9, 2007, at 3:04 PM, krunk7 at gmail.com wrote:
>>>>>
>>>>> I'm attempting to compile R 2.5.1 on OSX Panther and have run into
>>>>> some issues. First off, if anyone has a link to a binary build of
>>>>> 2.5.1 for Panther I have no issue going that route.
>>>>>
>>>>> -) gcc version 3.3 20030304 (Apple Computer, Inc. build 1666)
>>>>> -) g77 version 3.4.2
>>>>> -) ./configure --with-blas='-framework vecLib' --with-lapack
>>>>> R_PAPERSIZE=letter F77=g77
>>>>>
>>>>> When first seeing the build issues, I wanted to verify that I have
>>>>> the necessary basic environment. I grabbed the 2.2.1 sources,  
>>>>> which
>>>>> are the latest version available with a binary for Panther, and
>>>>> they
>>>>> compiled without a hitch.
>>>>>
>>>>> The error appears in the lapack module when building
>>>>> libRlapack.dylib. Error output is:
>>>>>
>>>>>> make[4]: Entering directory `/opt/sandbox/R-2.5.1/src/modules/
>>>>>> lapack'
>>>>>> gcc -std=gnu99 -dynamiclib -L/sw/lib -L/usr/local/lib -o
>>>>>> libRlapack.dylib dlamch.o dlapack0.o dlapack1.o dlapack2.o
>>>>>> dlapack3.o dlapack4.o cmplx.o -install_name libRlapack.dylib -
>>>>>> compatibility_version 2.5.0 -current_version 2.5.1  -
>>>>>> headerpad_max_install_names  -L/usr/local/lib/gcc/powerpc-apple-
>>>>>> darwin6.8/3.4.2 -lg2c -L../../../lib -lR
>>>>>> /usr/bin/libtool: internal link edit command failedld: warning
>>>>>> multiple definitions of symbol _z_abs/usr/local/lib/libg2c.a
>>>>>> (z_abs.o) definition of _z_abs in section  
>>>>>> (__TEXT,__text)../../../
>>>>>> lib/libR.dylib(z_abs.o) definition of _z_absld: warning multiple
>>>>>> definitions of symbol _f__cabs/usr/local/lib/libg2c.a(cabs.o)
>>>>>> definition of _f__cabs in section (__TEXT,__text)../../../lib/
>>>>>> libR.dylib(cabs.o) definition of _f__cabsld: common symbols not
>>>>>> allowed with MH_DYLIB output format with the -multi_module  
>>>>>> option/
>>>>>> usr/local/lib/libg2c.a(err.o) definition of common _f__cblank
>>>>>> (size
>>>>>> 4)/usr/local/lib/libg2c.a(fmt.o) definition of common _f__cnt
>>>>>> (size
>>>>>> 40)/usr/local/lib/libg2c.a(fmt.o) definition of common f 
>>>>>> (char,  *)
>>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common f
>>>>>> (char,
>>>>>> long *, short __restrict) (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>>> definition of common _f__cursor (size 4)/usr/local/lib/libg2c.a
>>>>>> (err.o) definition of common _f__doed (size 4)/usr/local/lib/
>>>>>> libg2c.a(err.o) definition of common _f__doend (size 4)/usr/ 
>>>>>> local/
>>>>>> lib/libg2c.a(err.o) definition of common _f__doned (size 4)/usr/
>>>>>> local/lib/libg2c.a(err.o) definition of common _f__dorevert (size
>>>>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common _f__elist
>>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>>> _f__fmtbuf (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>>>>> common _f__fmtlen (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>>> definition
>>>>>> of common _f__init (size 4)/usr/local/lib/libg2c.a(fmt.o)
>>>>>> definition of common _f__nonl (size 4)/usr/local/lib/libg2c.a
>>>>>> (fmt.o) definition of common _f__parenlvl (size 4)/usr/local/lib/
>>>>>> libg2c.a(fmt.o) definition of common f(char *) (size 4)/usr/ 
>>>>>> local/
>>>>>> lib/libg2c.a(fmt.o) definition of common _f__ret (size 40)/usr/
>>>>>> local/lib/libg2c.a(fmt.o) definition of common _f__revloc (size
>>>>>> 4)/
>>>>>> usr/local/lib/libg2c.a(fmt.o) definition of common f(long double,
>>>>>> *) (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>>> _f__scale (size 4)/usr/local/lib/libg2c.a(fmt.o) definition of
>>>>>> common _f__workdone (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>>> definition of common _f__units (size 4800)/usr/local/lib/libg2c.a
>>>>>> (err.o) definition of common f(char, float) (size 4)/usr/local/
>>>>>> lib/
>>>>>> libg2c.a(err.o) definition of common _f__curunit (size 4)/usr/
>>>>>> local/
>>>>>> lib/libg2c.a(err.o) definition of common _f__donewrec (size 4)/
>>>>>> usr/
>>>>>> local/lib/libg2c.a(err.o) definition of common _f__external (size
>>>>>> 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>>> _f__formatted
>>>>>> (size 4)/usr/local/lib/libg2c.a(err.o) definition of common
>>>>>> _f__hiwater (size 4)/usr/local/lib/libg2c.a(err.o) definition of
>>>>>> common _f__putn (size 4)/usr/local/lib/libg2c.a(err.o) definition
>>>>>> of common _f__reading (size 4)/usr/local/lib/libg2c.a(err.o)
>>>>>> definition of common _f__recpos (size 4)/usr/local/lib/libg2c.a
>>>>>> (err.o) definition of common _f__sequential (size 4)/usr/local/
>>>>>> lib/
>>>>>> libg2c.a(err.o) definition of common _f__getn (size 4)/usr/local/
>>>>>> lib/libg2c.a(err.o) definition of common _f__icptr (size 4)/usr/
>>>>>> local/lib/libg2c.a(err.o) definition of common f(short, void,  
>>>>>> int,
>>>>>> char) (size 4)
>>>>>> make[4]: *** [libRlapack.dylib] Error 1  make[4]: Leaving
>>>>>> directory
>>>>>> `/opt/sandbox/R-2.5.1/src/modules/lapack'make[3]: *** [R] Error
>>>>>> 2make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/modules/
>>>>>> lapack'make[2]: *** [R] Error 1make[2]: Leaving directory `/opt/
>>>>>> sandbox/R-2.5.1/src/modules'make[1]: *** [R] Error 1make[1]:
>>>>>> Leaving directory `/opt/sandbox/R-2.5.1/src'make: *** [R] Error 1
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From lars.wessman at gmail.com  Tue Aug 14 14:44:48 2007
From: lars.wessman at gmail.com (Lars Wessman)
Date: Tue, 14 Aug 2007 13:44:48 +0100
Subject: [R-SIG-Mac] Crashes when plotting
Message-ID: <8154D006-E4A7-4A87-9A29-A3F74B98B09F@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20070814/ae6102d6/attachment.pl 

From myotisone at gmail.com  Tue Aug 14 16:15:53 2007
From: myotisone at gmail.com (Graham Smith)
Date: Tue, 14 Aug 2007 15:15:53 +0100
Subject: [R-SIG-Mac] X11 and R - very beginners question
Message-ID: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20070814/86da2454/attachment.pl 

From thatsanicehatyouhave at mac.com  Tue Aug 14 20:34:18 2007
From: thatsanicehatyouhave at mac.com (thatsanicehatyouhave at mac.com)
Date: Tue, 14 Aug 2007 19:34:18 +0100
Subject: [R-SIG-Mac] X11 and R - very beginners question
In-Reply-To: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>
References: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>
Message-ID: <569A393B-B575-44AA-BFD5-AE1D822359F8@mac.com>

Hi Graham,

> On 14 Aug 2007, at 15:15, Graham Smith wrote:
>> I am brand new to the Mac, and wondered what exactly X11, does.

X11 is the windowing system on unix/linux operating systems. Since  
the move to OS X, it has been available as an optional install on the  
Mac as well to enable people to run unix-based apps unmodified. With  
respect to R, using X11 windows is just an option IF you have X11  
installed.

The Mac windowing system is called Quartz (hence, the Mac-only R  
function quartz() to open a new window).

You can go about using R on the Mac without using X11 windows at all.  
What I tell most people who ask is, if you don't know what X11 is,  
you don't need it. :) The support is useful on the Mac as you have  
the option to run R from the Terminal and not use R.app at all, but  
unless there's a specific reason to do this, I wouldn't.

Cheers,

Demitri


From krunk7 at gmail.com  Tue Aug 14 20:40:03 2007
From: krunk7 at gmail.com (James Kyle)
Date: Tue, 14 Aug 2007 11:40:03 -0700
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther (James Kyle)
In-Reply-To: <3F129DE1-E4A1-4922-8D23-4D4DE31E3D9E@ucla.edu>
References: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
	<AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>
	<46BC72E0.6080903@web.de>
	<E610DF6E-7C8A-4F25-A285-8594AE7DA8A9@ucla.edu>
	<50BB63DA-68DA-4246-A01C-4BCCC37622EB@r-project.org>
	<3F129DE1-E4A1-4922-8D23-4D4DE31E3D9E@ucla.edu>
Message-ID: <B02B6D2F-95AA-42F5-9CC1-18FAFDE20478@gmail.com>

I've been able to resolve the symbol errors in my previous post. I  
modified the makefile for src/extras/blas on line #33. First I  
changed the link order of complxblas.o and blas.o. This eliminated  
the _z_abs_ symbol error. Next, I began searching for where xerbal  
was defined:

find $R -name *.o -or *.a -exec nm -f {} \; | grep xerbla

Nothing turned up, so I figured it was in the system vecLib library  
(which it is). I then added -framework path/to/vecLib. I now get a  
lot of "warning: multiple definitions of" type outptut, but it compiles.

The final compile looked like this:



> $(Rblas_la): blas.o  cmplxblas.o
>   $(DYLIB_LINK) -framework /System/Library/Frameworks/ 
> vecLib.framework/vecLib cmplxblas.o blas.o -o $(Rblas_la) $ 
> (Rblas_la_LIBADD)
>

Next error to rear its head is:


> gcc -std=gnu99 -I../../src/extra/zlib -I../../src/extra/bzip2 - 
> I../../src/extra/pcre  -I. -I../../src/include -I../../src/include - 
> I/usr/local/gcc36/include -I/opt/local/include -DHAVE_CONFIG_H   - 
> fPIC -fno-common  -g -O2 -c complex.c -o complex.o
> complex.c: In function `do_cmathfuns':
> complex.c:332: error: incompatible type for argument 1 of `cabs'
> make[3]: *** [complex.o] Error 1
> make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/opt/sandbox/R-2.5.1/src'
> make: *** [R] Error 1
>

I'll continue to document my progress on the list for anyone else who  
may need to do this in the future.

cheers,

james a kyle


From simon.urbanek at r-project.org  Tue Aug 14 20:44:56 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 14 Aug 2007 11:44:56 -0700
Subject: [R-SIG-Mac] X11 and R - very beginners question
In-Reply-To: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>
References: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>
Message-ID: <01AD2E64-62B7-4B2F-A5D5-BC4A6AC4D72E@r-project.org>

Graham,

X11 is a window system used for applications that come from the unix  
world and have not been ported to Mac OS X window system (Aqua) yet.  
There is a handful of packages in R that require it (e.g. tcltk,  
RGtk2 and friends), as well as some R bitmap output routines (png,  
jpeg..) and the X11 R device (unsurprisingly). You don't have to use  
any of those (there are better options e.g. for the bitmap output),  
but if you do, you have to start X11.

Cheers,
Simon


On Aug 14, 2007, at 7:15 AM, Graham Smith wrote:

> I am brand new to the Mac, and wondered what exactly X11, does.
>
> The faq says it is optional, but equally, it seems important enough  
> for it
> to have an icon in the r-Console.
>
> Having been using R in Windows, X11 is a completely new concept to  
> me and
> wondered if someone could explain its purpose.
>
> I understand roughly what it is from googling, but can't make the  
> link with
> it purpose in R on the Mac.
>
> Many thanks,
>
> Graham
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From mckellercran at gmail.com  Tue Aug 14 21:38:16 2007
From: mckellercran at gmail.com (Matthew Keller)
Date: Tue, 14 Aug 2007 13:38:16 -0600
Subject: [R-SIG-Mac] X11 and R - very beginners question
In-Reply-To: <01AD2E64-62B7-4B2F-A5D5-BC4A6AC4D72E@r-project.org>
References: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>
	<01AD2E64-62B7-4B2F-A5D5-BC4A6AC4D72E@r-project.org>
Message-ID: <3f547caa0708141238x2bc4b42fyfaf03f65080db53a@mail.gmail.com>

Hi all,

I would just add that if you run R from within Emacs on a mac
(Aquamacs or Carbon or one of the others), it's handy to have X11
installed & started in order to have graphics windows. There are
several threads on the r-sig-mac that go over how to get this
working...

Matt



On 8/14/07, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> Graham,
>
> X11 is a window system used for applications that come from the unix
> world and have not been ported to Mac OS X window system (Aqua) yet.
> There is a handful of packages in R that require it (e.g. tcltk,
> RGtk2 and friends), as well as some R bitmap output routines (png,
> jpeg..) and the X11 R device (unsurprisingly). You don't have to use
> any of those (there are better options e.g. for the bitmap output),
> but if you do, you have to start X11.
>
> Cheers,
> Simon
>
>
> On Aug 14, 2007, at 7:15 AM, Graham Smith wrote:
>
> > I am brand new to the Mac, and wondered what exactly X11, does.
> >
> > The faq says it is optional, but equally, it seems important enough
> > for it
> > to have an icon in the r-Console.
> >
> > Having been using R in Windows, X11 is a completely new concept to
> > me and
> > wondered if someone could explain its purpose.
> >
> > I understand roughly what it is from googling, but can't make the
> > link with
> > it purpose in R on the Mac.
> >
> > Many thanks,
> >
> > Graham
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> >
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Matthew C Keller
Postdoctoral Fellow
Virginia Institute for Psychiatric and Behavioral Genetics


From myotisone at gmail.com  Tue Aug 14 21:42:17 2007
From: myotisone at gmail.com (Graham Smith)
Date: Tue, 14 Aug 2007 20:42:17 +0100
Subject: [R-SIG-Mac] X11 and R - very beginners question
In-Reply-To: <3f547caa0708141238x2bc4b42fyfaf03f65080db53a@mail.gmail.com>
References: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>
	<01AD2E64-62B7-4B2F-A5D5-BC4A6AC4D72E@r-project.org>
	<3f547caa0708141238x2bc4b42fyfaf03f65080db53a@mail.gmail.com>
Message-ID: <2c75873c0708141242m5f65e98bg840323a9b497a8ab@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20070814/3e0f17fa/attachment.pl 

From chabotd at globetrotter.net  Tue Aug 14 22:12:07 2007
From: chabotd at globetrotter.net (Chabot Denis)
Date: Tue, 14 Aug 2007 16:12:07 -0400
Subject: [R-SIG-Mac] quartz and pch=0
In-Reply-To: <mailman.2409.1187116480.2070.r-sig-mac@stat.math.ethz.ch>
References: <mailman.2409.1187116480.2070.r-sig-mac@stat.math.ethz.ch>
Message-ID: <7AC48C2C-49FF-4F69-8933-6BF38FC41B00@globetrotter.net>

Hi,

I don't know when this started, but it is relatively recent, i.e.  
must have happened less than one year ago:

data points plotted with pch=0 do not have a uniform size or shape.  
For instance:

plot(1:20, pch=0)

If I save the plot to pdf, the non-uniform plot symbols remain. If I  
plot with pdf device, all data points have exactly the same shape and  
size. I am pretty sure this used to be the case with quartz as well.

Is it just me?

 > sessionInfo()
R version 2.5.1 Patched (2007-07-14 r42258)
powerpc-apple-darwin8.10.1

locale:
fr_CA.UTF-8/fr_CA.UTF-8/fr_CA.UTF-8/C/fr_CA.UTF-8/fr_CA.UTF-8

attached base packages:
[1] "stats"     "graphics"  "grDevices" "utils"     "datasets"   
"methods"
[7] "base"

Denis


From simon.urbanek at r-project.org  Tue Aug 14 22:32:51 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 14 Aug 2007 13:32:51 -0700
Subject: [R-SIG-Mac] X11 and R - very beginners question
In-Reply-To: <3f547caa0708141238x2bc4b42fyfaf03f65080db53a@mail.gmail.com>
References: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>
	<01AD2E64-62B7-4B2F-A5D5-BC4A6AC4D72E@r-project.org>
	<3f547caa0708141238x2bc4b42fyfaf03f65080db53a@mail.gmail.com>
Message-ID: <6483ACC5-728F-4D4F-9B44-102863EBFF4B@r-project.org>


On Aug 14, 2007, at 12:38 PM, Matthew Keller wrote:

> I would just add that if you run R from within Emacs on a mac  
> (Aquamacs or Carbon or one of the others), it's handy to have X11  
> installed & started in order to have graphics windows.

Just as a side note, since CarbonEL you don't have to do it anymore  
as you can use the native graphics (also see the relevant posts).  
Nevertheless, I believe ESS/X11 usage it is still more of a religious  
issue ;).

Cheers,
Simon


> There are several threads on the r-sig-mac that go over how to get  
> this working...
>
> Matt
>
>
>
> On 8/14/07, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> Graham,
>>
>> X11 is a window system used for applications that come from the unix
>> world and have not been ported to Mac OS X window system (Aqua) yet.
>> There is a handful of packages in R that require it (e.g. tcltk,
>> RGtk2 and friends), as well as some R bitmap output routines (png,
>> jpeg..) and the X11 R device (unsurprisingly). You don't have to use
>> any of those (there are better options e.g. for the bitmap output),
>> but if you do, you have to start X11.
>>
>> Cheers,
>> Simon
>>
>>
>> On Aug 14, 2007, at 7:15 AM, Graham Smith wrote:
>>
>>> I am brand new to the Mac, and wondered what exactly X11, does.
>>>
>>> The faq says it is optional, but equally, it seems important enough
>>> for it
>>> to have an icon in the r-Console.
>>>
>>> Having been using R in Windows, X11 is a completely new concept to
>>> me and
>>> wondered if someone could explain its purpose.
>>>
>>> I understand roughly what it is from googling, but can't make the
>>> link with
>>> it purpose in R on the Mac.
>>>
>>> Many thanks,
>>>
>>> Graham
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
>
> -- 
> Matthew C Keller
> Postdoctoral Fellow
> Virginia Institute for Psychiatric and Behavioral Genetics
>
>


From myotisone at gmail.com  Tue Aug 14 22:55:30 2007
From: myotisone at gmail.com (Graham Smith)
Date: Tue, 14 Aug 2007 21:55:30 +0100
Subject: [R-SIG-Mac] X11 and R - very beginners question
In-Reply-To: <6483ACC5-728F-4D4F-9B44-102863EBFF4B@r-project.org>
References: <2c75873c0708140715o54034692hba01a8e23fe7c824@mail.gmail.com>
	<01AD2E64-62B7-4B2F-A5D5-BC4A6AC4D72E@r-project.org>
	<3f547caa0708141238x2bc4b42fyfaf03f65080db53a@mail.gmail.com>
	<6483ACC5-728F-4D4F-9B44-102863EBFF4B@r-project.org>
Message-ID: <2c75873c0708141355m5a2644e3va798442ed181e60d@mail.gmail.com>

Ah, thanks again, that will have saved me chasing around for X11,
should I go back to using Emacs.

Graham

On 14/08/07, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>
> On Aug 14, 2007, at 12:38 PM, Matthew Keller wrote:
>
> > I would just add that if you run R from within Emacs on a mac
> > (Aquamacs or Carbon or one of the others), it's handy to have X11
> > installed & started in order to have graphics windows.
>
> Just as a side note, since CarbonEL you don't have to do it anymore
> as you can use the native graphics (also see the relevant posts).
> Nevertheless, I believe ESS/X11 usage it is still more of a religious
> issue ;).
>
> Cheers,
> Simon
>
>
> > There are several threads on the r-sig-mac that go over how to get
> > this working...
> >
> > Matt
> >
> >
> >
> > On 8/14/07, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> >> Graham,
> >>
> >> X11 is a window system used for applications that come from the unix
> >> world and have not been ported to Mac OS X window system (Aqua) yet.
> >> There is a handful of packages in R that require it (e.g. tcltk,
> >> RGtk2 and friends), as well as some R bitmap output routines (png,
> >> jpeg..) and the X11 R device (unsurprisingly). You don't have to use
> >> any of those (there are better options e.g. for the bitmap output),
> >> but if you do, you have to start X11.
> >>
> >> Cheers,
> >> Simon
> >>
> >>
> >> On Aug 14, 2007, at 7:15 AM, Graham Smith wrote:
> >>
> >>> I am brand new to the Mac, and wondered what exactly X11, does.
> >>>
> >>> The faq says it is optional, but equally, it seems important enough
> >>> for it
> >>> to have an icon in the r-Console.
> >>>
> >>> Having been using R in Windows, X11 is a completely new concept to
> >>> me and
> >>> wondered if someone could explain its purpose.
> >>>
> >>> I understand roughly what it is from googling, but can't make the
> >>> link with
> >>> it purpose in R on the Mac.
> >>>
> >>> Many thanks,
> >>>
> >>> Graham
> >>>
> >>>       [[alternative HTML version deleted]]
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at stat.math.ethz.ch
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>
> >>>
> >>
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at stat.math.ethz.ch
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >
> >
> > --
> > Matthew C Keller
> > Postdoctoral Fellow
> > Virginia Institute for Psychiatric and Behavioral Genetics
> >
> >
>
>


From jameskyle at ucla.edu  Tue Aug 14 20:39:27 2007
From: jameskyle at ucla.edu (James Kyle)
Date: Tue, 14 Aug 2007 11:39:27 -0700
Subject: [R-SIG-Mac] Compiling 2.5.1 on OSX Panther (James Kyle)
In-Reply-To: <3F129DE1-E4A1-4922-8D23-4D4DE31E3D9E@ucla.edu>
References: <mailman.13.1186740009.5552.r-sig-mac@stat.math.ethz.ch>
	<AC1306FE-00AE-4760-AF2F-923F75CB4F5A@wright.edu>
	<46BC72E0.6080903@web.de>
	<E610DF6E-7C8A-4F25-A285-8594AE7DA8A9@ucla.edu>
	<50BB63DA-68DA-4246-A01C-4BCCC37622EB@r-project.org>
	<3F129DE1-E4A1-4922-8D23-4D4DE31E3D9E@ucla.edu>
Message-ID: <3AAFB126-2344-45BF-AE29-074C5DB510DC@ucla.edu>

I've been able to resolve the symbol errors in my previous post. I  
modified the makefile for src/extras/blas on line #33. First I  
changed the link order of complxblas.o and blas.o. This eliminated  
the _z_abs_ symbol error. Next, I began searching for where xerbal  
was defined:

find $R -name *.o -or *.a -exec nm -f {} \; | grep xerbla

Nothing turned up, so I figured it was in the system vecLib library  
(which it is). I then added -framework path/to/vecLib. I now get a  
lot of "warning: multiple definitions of" type outptut, but it compiles.

The final compile looked like this:


> $(Rblas_la): blas.o  cmplxblas.o
>   $(DYLIB_LINK) -framework /System/Library/Frameworks/ 
> vecLib.framework/vecLib cmplxblas.o blas.o -o $(Rblas_la) $ 
> (Rblas_la_LIBADD)

Next error to rear its head is:

> gcc -std=gnu99 -I../../src/extra/zlib -I../../src/extra/bzip2 - 
> I../../src/extra/pcre  -I. -I../../src/include -I../../src/include - 
> I/usr/local/gcc36/include -I/opt/local/include -DHAVE_CONFIG_H   - 
> fPIC -fno-common  -g -O2 -c complex.c -o complex.o
> complex.c: In function `do_cmathfuns':
> complex.c:332: error: incompatible type for argument 1 of `cabs'
> make[3]: *** [complex.o] Error 1
> make[3]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory `/opt/sandbox/R-2.5.1/src/main'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/opt/sandbox/R-2.5.1/src'
> make: *** [R] Error 1

I'll continue to document my progress on the list for anyone else who  
may need to do this in the future.

cheers,

james a kyle


From bxf4 at u.washington.edu  Fri Aug 17 07:43:20 2007
From: bxf4 at u.washington.edu (Brian Flaherty)
Date: Thu, 16 Aug 2007 22:43:20 -0700
Subject: [R-SIG-Mac] R and spotlight question
Message-ID: <46C53578.10109@u.washington.edu>

Hello,

I searched a bit for this, but didn't see any reference to it.  I've 
downloaded the R-Metadata-Importer that Carlos Ungil created.  (Thank 
you, Carlos!)  My understanding is that it indexes files ending in R.  I 
use the R extension for R source and *.Rout for R output files and R 
session transcripts.  The R-Metadata-Importer package includes the 
source, but I have no idea where to look to add the Rout extension.  Can 
anyone here tell me how I'd add it or at least where to look among the 
source files?

Thank you for your time and help.

Brian Flaherty


From byron.ellis at gmail.com  Fri Aug 17 07:55:18 2007
From: byron.ellis at gmail.com (Byron Ellis)
Date: Thu, 16 Aug 2007 22:55:18 -0700
Subject: [R-SIG-Mac] R and spotlight question
In-Reply-To: <46C53578.10109@u.washington.edu>
References: <46C53578.10109@u.washington.edu>
Message-ID: <7098abec0708162255g4506494fs2a95dcc391af1d82@mail.gmail.com>

It's in the Info.plist for the Spotlight importer.

On 8/16/07, Brian Flaherty <bxf4 at u.washington.edu> wrote:
> Hello,
>
> I searched a bit for this, but didn't see any reference to it.  I've
> downloaded the R-Metadata-Importer that Carlos Ungil created.  (Thank
> you, Carlos!)  My understanding is that it indexes files ending in R.  I
> use the R extension for R source and *.Rout for R output files and R
> session transcripts.  The R-Metadata-Importer package includes the
> source, but I have no idea where to look to add the Rout extension.  Can
> anyone here tell me how I'd add it or at least where to look among the
> source files?
>
> Thank you for your time and help.
>
> Brian Flaherty
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Byron Ellis (byron.ellis at gmail.com)
"Oook" -- The Librarian


From napaxton at fas.harvard.edu  Fri Aug 17 19:18:24 2007
From: napaxton at fas.harvard.edu (Nathan Paxton)
Date: Fri, 17 Aug 2007 13:18:24 -0400
Subject: [R-SIG-Mac] R for Mac GUI
Message-ID: <7C195706-76D0-42C5-ACC7-75D068A38027@fas.harvard.edu>

	All,

	When I startup R 2.5.1 on my PB G4 OS X 10.4.10, I get the following  
message:
2007-08-17 13:15:17.229 R[4274] tossing reply message sequence 1 on  
thread 0x5168ee0

	it doesn't seem to affect the way R runs, but it shows up almost  
every time i load the GUI (R.app).

-Nathan
----------
Nathan A. Paxton
Ph.D. Candidate
Dept. of Government, Harvard University

Resident Tutor
John Winthrop House, Harvard University

napaxton AT fas DOT harvard DOT edu
http://www.fas.harvard.edu/~napaxton
======================================================================== 
===============================
When you have to stay eight years away from California, you live in a  
perpetual state of homesickness.
         - Ronald Reagan

The most courageous act is still to think for yourself.  Aloud.
         -Coco Chanel


From simon.urbanek at r-project.org  Fri Aug 17 23:53:34 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 17 Aug 2007 17:53:34 -0400
Subject: [R-SIG-Mac] R for Mac GUI
In-Reply-To: <7C195706-76D0-42C5-ACC7-75D068A38027@fas.harvard.edu>
References: <7C195706-76D0-42C5-ACC7-75D068A38027@fas.harvard.edu>
Message-ID: <FE8D2B1F-8427-4321-B0D1-797A9EB5C1A9@r-project.org>

Nathan,

please read the list before posting (no excuses, the relevant post is  
the first hit in Google ... ;)) this has been fixed a while ago (and  
the post explains the details as of when you can still see it). Also  
it is in general a good idea to test the most recent version before  
reporting bugs (and please state the exact version of the GUI).

Thanks,
Simon


On Aug 17, 2007, at 1:18 PM, Nathan Paxton wrote:

> 	All,
>
> 	When I startup R 2.5.1 on my PB G4 OS X 10.4.10, I get the following
> message:
> 2007-08-17 13:15:17.229 R[4274] tossing reply message sequence 1 on
> thread 0x5168ee0
>
> 	it doesn't seem to affect the way R runs, but it shows up almost
> every time i load the GUI (R.app).
>
> -Nathan
> ----------
> Nathan A. Paxton
> Ph.D. Candidate
> Dept. of Government, Harvard University
>
> Resident Tutor
> John Winthrop House, Harvard University
>
> napaxton AT fas DOT harvard DOT edu
> http://www.fas.harvard.edu/~napaxton
> ====================================================================== 
> ==
> ===============================
> When you have to stay eight years away from California, you live in a
> perpetual state of homesickness.
>          - Ronald Reagan
>
> The most courageous act is still to think for yourself.  Aloud.
>          -Coco Chanel
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From napaxton at fas.harvard.edu  Sat Aug 18 01:36:13 2007
From: napaxton at fas.harvard.edu (Nathan Paxton)
Date: Fri, 17 Aug 2007 19:36:13 -0400
Subject: [R-SIG-Mac] R for Mac GUI
In-Reply-To: <FE8D2B1F-8427-4321-B0D1-797A9EB5C1A9@r-project.org>
References: <7C195706-76D0-42C5-ACC7-75D068A38027@fas.harvard.edu>
	<FE8D2B1F-8427-4321-B0D1-797A9EB5C1A9@r-project.org>
Message-ID: <1372F48F-D357-41B5-AA41-46B568BF79CC@fas.harvard.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20070817/0ec7f7be/attachment.pl 

From simon.urbanek at r-project.org  Sat Aug 18 17:51:33 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 18 Aug 2007 11:51:33 -0400
Subject: [R-SIG-Mac] R for Mac GUI
In-Reply-To: <1372F48F-D357-41B5-AA41-46B568BF79CC@fas.harvard.edu>
References: <7C195706-76D0-42C5-ACC7-75D068A38027@fas.harvard.edu>
	<FE8D2B1F-8427-4321-B0D1-797A9EB5C1A9@r-project.org>
	<1372F48F-D357-41B5-AA41-46B568BF79CC@fas.harvard.edu>
Message-ID: <E06D81D0-76DE-4FED-88E0-D71C07B2FBDB@r-project.org>


On Aug 17, 2007, at 7:36 PM, Nathan Paxton wrote:

> 	Simon,
>
> 	Thanks for the reply.
>
> 	I can see that the problem is harmless. So that's one thing not to  
> worry about.
>
> 	I have GUI version 1.20 (4535), which I assume is what came with  
> 2.5.1. I'm a little hesitant to test nightlies, to be honest.  is  
> this fixed in the 4746 (which I assume is a newer version)?
>

Yes, it was fixed in 4532.

As of nightlies, there is no reason to be worried, they are bugfix  
versions only, large development is done in a separate branch, so the  
nightlies are in most cases more stable than the release - it's very  
much like R-patched. Besides, you can run the GUI just from the image  
(or anywhere else), so you can have as many parallel versions of the  
GUI as you wish, so there is really no need to worry.

Cheers,
Simon


> -N
> On 17 Aug 2007, at 5:53 PM, Simon Urbanek wrote:
>
>> Nathan,
>>
>> please read the list before posting (no excuses, the relevant post  
>> is the first hit in Google ... ;)) this has been fixed a while ago  
>> (and the post explains the details as of when you can still see  
>> it). Also it is in general a good idea to test the most recent  
>> version before reporting bugs (and please state the exact version  
>> of the GUI).
>>
>> Thanks,
>> Simon
>>
>>
>> On Aug 17, 2007, at 1:18 PM, Nathan Paxton wrote:
>>
>>> 	All,
>>>
>>> 	When I startup R 2.5.1 on my PB G4 OS X 10.4.10, I get the  
>>> following
>>> message:
>>> 2007-08-17 13:15:17.229 R[4274] tossing reply message sequence 1 on
>>> thread 0x5168ee0
>>>
>>> 	it doesn't seem to affect the way R runs, but it shows up almost
>>> every time i load the GUI (R.app).
>>>
>>> -Nathan
>>> ----------
>>> Nathan A. Paxton
>>> Ph.D. Candidate
>>> Dept. of Government, Harvard University
>>>
>>> Resident Tutor
>>> John Winthrop House, Harvard University
>>>
>>> napaxton AT fas DOT harvard DOT edu
>>> http://www.fas.harvard.edu/~napaxton
>>> ==================================================================== 
>>> ====
>>> ===============================
>>> When you have to stay eight years away from California, you live  
>>> in a
>>> perpetual state of homesickness.
>>>          - Ronald Reagan
>>>
>>> The most courageous act is still to think for yourself.  Aloud.
>>>          -Coco Chanel
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>
> ----------
> Nathan A. Paxton
> Ph.D. Candidate
> Dept. of Government, Harvard University
>
> Resident Tutor
> John Winthrop House, Harvard University
>
> napaxton AT fas DOT harvard DOT edu
> http://www.fas.harvard.edu/~napaxton
> ====================================================================== 
> =================================
> When you have to stay eight years away from California, you live in  
> a perpetual state of homesickness.
>         - Ronald Reagan
>
> The most courageous act is still to think for yourself.  Aloud.
>         -Coco Chanel
> ====================================================================== 
> =================================
>
>
>


From keithlj at suddenlink.net  Sat Aug 18 19:46:10 2007
From: keithlj at suddenlink.net (Keith Jones)
Date: Sat, 18 Aug 2007 12:46:10 -0500
Subject: [R-SIG-Mac] File.choose()
Message-ID: <p06240800c2ecde7e954e@[192.168.0.2]>

Hi Y'all,

Is there a way to tell the file.choose() command to look in a 
directory other that the current working directory or the last 
directory that was used to open or store a file?  I have created an 
automatic scripting file that performs calculations and stores the 
graphical results in PDF files.  Since these PDF files may not be 
saved in the same directory as the previous one I would like to 
automate the directory that the save dialog box opens to.

Part Two:  Is there a way to determine the size of the dialog box 
that opens?  My dialog box opens in a very small size and I have to 
resize it or do a lot of scrolling.

Thanks,

Keith Jones


From sashag at stanford.edu  Mon Aug 20 04:19:51 2007
From: sashag at stanford.edu (Sasha Goodman)
Date: Sun, 19 Aug 2007 19:19:51 -0700
Subject: [R-SIG-Mac] crash
Message-ID: <e6820af20708191919s69fb729bxd84029190cf05b56@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20070819/82c41c6a/attachment.pl 

From murdoch at stats.uwo.ca  Tue Aug 21 13:24:03 2007
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 21 Aug 2007 07:24:03 -0400
Subject: [R-SIG-Mac] File.choose()
In-Reply-To: <p06240800c2ecde7e954e@[192.168.0.2]>
References: <p06240800c2ecde7e954e@[192.168.0.2]>
Message-ID: <46CACB53.8070909@stats.uwo.ca>

Keith Jones wrote:
> Hi Y'all,
>
> Is there a way to tell the file.choose() command to look in a 
> directory other that the current working directory or the last 
> directory that was used to open or store a file?  

You don't say what platform you're on.  The comments below apply to Windows.

Choose.files() has more options.  For example,

choose.files("c:/temp/*.*", multi=F)

is something close to file.choose() in the c:/temp directory.

> I have created an 
> automatic scripting file that performs calculations and stores the 
> graphical results in PDF files.  Since these PDF files may not be 
> saved in the same directory as the previous one I would like to 
> automate the directory that the save dialog box opens to.
>
> Part Two:  Is there a way to determine the size of the dialog box 
> that opens?  My dialog box opens in a very small size and I have to 
> resize it or do a lot of scrolling.
>   
No, that's something Windows controls.  There are ways to change it, but 
that's not a normal thing to do in Windows applications.

Duncan Murdoch
> Thanks,
>
> Keith Jones
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From mfero at fhcrc.org  Tue Aug 21 18:40:22 2007
From: mfero at fhcrc.org (Matthew Fero)
Date: Tue, 21 Aug 2007 09:40:22 -0700
Subject: [R-SIG-Mac] unable to install rimage
Message-ID: <13C26AAF-7368-4E88-9EC4-8BDCEFE8DF99@fhcrc.org>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20070821/5b8a0466/attachment.pl 

From j.van_den_hoff at fzd.de  Wed Aug 22 17:20:35 2007
From: j.van_den_hoff at fzd.de (Joerg van den Hoff)
Date: Wed, 22 Aug 2007 17:20:35 +0200
Subject: [R-SIG-Mac] flushing of stdout
Message-ID: <20070822152035.GA9303@marco.fz-rossendorf.de>

hello,

I post this here, since maybe it's only a Mac problem.


I noted only now an apparent change of behaviour in 2.5.0 relative
to older times:

I use `cat' to stdout from within a long running loop to report
the loop count to the user. this output is now delayed until the program
completes (i.e. the output is buffered) and, thus, does not make much sense
anymore...

issuing `flush(stdout())' after the `cat' does not help.

is this really so or am I missing something?

regards,

joerg


From simon.urbanek at r-project.org  Wed Aug 22 20:52:55 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 22 Aug 2007 14:52:55 -0400
Subject: [R-SIG-Mac] flushing of stdout
In-Reply-To: <20070822152035.GA9303@marco.fz-rossendorf.de>
References: <20070822152035.GA9303@marco.fz-rossendorf.de>
Message-ID: <EE8A6DC4-FFB1-4CF2-A22C-800BEAAAD069@r-project.org>

Joerg,

On Aug 22, 2007, at 11:20 AM, Joerg van den Hoff wrote:

> I post this here, since maybe it's only a Mac problem.
>
>
> I noted only now an apparent change of behaviour in 2.5.0 relative  
> to older times:
>

I'm not aware of any such change. For me the output is still shown  
progressively, e.g.:

for (i in 1:10) { cat("foo",i,"\n"); rnorm(1e7); }

Can you, please, send us a reproducible example?


> I use `cat' to stdout from within a long running loop to report
> the loop count to the user. this output is now delayed until the  
> program
> completes (i.e. the output is buffered) and, thus, does not make  
> much sense
> anymore...
>
> issuing `flush(stdout())' after the `cat' does not help.
>

.. and it's not meant to (since the R console has nothing to do with  
stdout) - try flush.console() instead ...

Cheers,
Simon


From j.van_den_hoff at fzd.de  Thu Aug 23 10:24:16 2007
From: j.van_den_hoff at fzd.de (Joerg van den Hoff)
Date: Thu, 23 Aug 2007 10:24:16 +0200
Subject: [R-SIG-Mac] flushing of stdout
In-Reply-To: <EE8A6DC4-FFB1-4CF2-A22C-800BEAAAD069@r-project.org>
References: <20070822152035.GA9303@marco.fz-rossendorf.de>
	<EE8A6DC4-FFB1-4CF2-A22C-800BEAAAD069@r-project.org>
Message-ID: <20070823082416.GB11654@marco.fz-rossendorf.de>

On Wed, Aug 22, 2007 at 02:52:55PM -0400, Simon Urbanek wrote:
> Joerg,
> 
> On Aug 22, 2007, at 11:20 AM, Joerg van den Hoff wrote:
> 
> >I post this here, since maybe it's only a Mac problem.
> >
> >
> >I noted only now an apparent change of behaviour in 2.5.0 relative
> >to older times:
> >
> 
> I'm not aware of any such change. For me the output is still shown  
> progressively, e.g.:
> 
> for (i in 1:10) { cat("foo",i,"\n"); rnorm(1e7); }
> 
> Can you, please, send us a reproducible example?
> 
> 
> >I use `cat' to stdout from within a long running loop to report
> >the loop count to the user. this output is now delayed until the  
> >program
> >completes (i.e. the output is buffered) and, thus, does not make  
> >much sense
> >anymore...
> >
> >issuing `flush(stdout())' after the `cat' does not help.
> >
> 
> .. and it's not meant to (since the R console has nothing to do with  
> stdout) - try flush.console() instead ...
> 
yeah,  sorry for being inprecise: I'm actually using R frequently
in a terminal/xterm. 

in the R GUI console flush.console() (as also proposed by kevin
middleton: many thanks) actually achieves the desired flushing (without
it: same thing)

so the problem persists in the terminal/xterm. try, e.g.,


for (i in 1:10) {
   for (j in 1:20000) log(j)
   cat(i, " ")
   flush(stdout())
}
cat("\n")


to see the effect. this only occurs if the first `cat' does not contain a
newline (I use this in situations with a large outer loop count to inform the
user how much the simulation run has progressed and it's simply nicer without
too many newlines). 

the behaviour was definitely different in older versions of R.


regards,

joerg


From simon.urbanek at r-project.org  Fri Aug 24 23:57:31 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 24 Aug 2007 17:57:31 -0400
Subject: [R-SIG-Mac] flushing of stdout
In-Reply-To: <20070823082416.GB11654@marco.fz-rossendorf.de>
References: <20070822152035.GA9303@marco.fz-rossendorf.de>
	<EE8A6DC4-FFB1-4CF2-A22C-800BEAAAD069@r-project.org>
	<20070823082416.GB11654@marco.fz-rossendorf.de>
Message-ID: <16761F25-04B2-4B13-9337-E8A95AE0AB8F@r-project.org>


On Aug 23, 2007, at 4:24 AM, Joerg van den Hoff wrote:

> On Wed, Aug 22, 2007 at 02:52:55PM -0400, Simon Urbanek wrote:
>> Joerg,
>>
>> On Aug 22, 2007, at 11:20 AM, Joerg van den Hoff wrote:
>>
>>> I post this here, since maybe it's only a Mac problem.
>>>
>>>
>>> I noted only now an apparent change of behaviour in 2.5.0 relative
>>> to older times:
>>>
>>
>> I'm not aware of any such change. For me the output is still shown
>> progressively, e.g.:
>>
>> for (i in 1:10) { cat("foo",i,"\n"); rnorm(1e7); }
>>
>> Can you, please, send us a reproducible example?
>>
>>
>>> I use `cat' to stdout from within a long running loop to report
>>> the loop count to the user. this output is now delayed until the
>>> program
>>> completes (i.e. the output is buffered) and, thus, does not make
>>> much sense
>>> anymore...
>>>
>>> issuing `flush(stdout())' after the `cat' does not help.
>>>
>>
>> .. and it's not meant to (since the R console has nothing to do with
>> stdout) - try flush.console() instead ...
>>
> yeah,  sorry for being inprecise: I'm actually using R frequently
> in a terminal/xterm.
>
> in the R GUI console flush.console() (as also proposed by kevin
> middleton: many thanks) actually achieves the desired flushing  
> (without
> it: same thing)
>
> so the problem persists in the terminal/xterm. try, e.g.,
>

Ah, that's a different story. You can avoid that by setting TERM=dumb  
(what ESS uses).
The change is actually much older (pre-2.5). In theory flush.console  
should help here, but apparently it doesn't - I'll see if I can fix  
that.

Cheers,
Simon


>
> for (i in 1:10) {
>    for (j in 1:20000) log(j)
>    cat(i, " ")
>    flush(stdout())
> }
> cat("\n")
>
>
> to see the effect. this only occurs if the first `cat' does not  
> contain a
> newline (I use this in situations with a large outer loop count to  
> inform the
> user how much the simulation run has progressed and it's simply  
> nicer without
> too many newlines).
>
> the behaviour was definitely different in older versions of R.
>
>
> regards,
>
> joerg
>
>


From bullard at berkeley.edu  Mon Aug 27 23:35:18 2007
From: bullard at berkeley.edu (James Bullard)
Date: Mon, 27 Aug 2007 14:35:18 -0700
Subject: [R-SIG-Mac] configuring R-2.6.0 for speed
Message-ID: <4F2BEE94-8C52-4235-9FD9-C57916BBC9D2@berkeley.edu>

Hi

I have checked out R-devel from subversion and configured it with the  
following command

./configure --with-blas='-framework vecLib' CFLAGS="-g -O2 - 
march=nocona" CXXFLAGS="-g -O2 -march=nocona" FFLAGS="-g -O2 - 
march=nocona" FCFLAGS="-g -O2 -march=nocona"

followed by make && make install. This works in the sense that R  
starts up fine. However, my session seems to be very slow compared to  
R-2.5.1 (which I had installed from the binaries at CRAN). Slow means  
for example that loading a large RData file takes much longer. Is  
there any configure flag I am missing? What are the exact configure  
command used to build the CRAN binary?

(I am using the latest version of OS X on an Intel MacBook with the  
newest Xcode and the gfortran from CRAN).

Jim


From simon.urbanek at r-project.org  Mon Aug 27 23:46:35 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 27 Aug 2007 17:46:35 -0400
Subject: [R-SIG-Mac] configuring R-2.6.0 for speed
In-Reply-To: <4F2BEE94-8C52-4235-9FD9-C57916BBC9D2@berkeley.edu>
References: <4F2BEE94-8C52-4235-9FD9-C57916BBC9D2@berkeley.edu>
Message-ID: <9461F59C-B67D-4CA2-A5BD-AEB25AFEC753@r-project.org>

James,

On Aug 27, 2007, at 5:35 PM, James Bullard wrote:

> I have checked out R-devel from subversion and configured it with  
> the following command
>
> ./configure --with-blas='-framework vecLib' CFLAGS="-g -O2 - 
> march=nocona" CXXFLAGS="-g -O2 -march=nocona" FFLAGS="-g -O2 - 
> march=nocona" FCFLAGS="-g -O2 -march=nocona"
>
> followed by make && make install. This works in the sense that R  
> starts up fine. However, my session seems to be very slow compared  
> to R-2.5.1 (which I had installed from the binaries at CRAN). Slow  
> means for example that loading a large RData file takes much  
> longer. Is there any configure flag I am missing? What are the  
> exact configure command used to build the CRAN binary?
>

I don't think it should be any slower - actually is should be faster,  
because the CRAN binary has memory profiling enabled. There were some  
changes in R-devel that can make it slower, but not noticeably I  
suppose. Can you test the CRAN binary of R-devel (from http:// 
r.research.att.com) to see if it exhibits the same slow-down?

FWIW the full flags used for the CRAN i386 build are the following:

CC="gcc-4.0 -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk"  
CXX="g++-4.0 -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk"  
F77="gfortran-4.0 -arch i386  -isysroot /Developer/SDKs/ 
MacOSX10.4u.sdk" FC="gfortran-4.0 -arch i386  -isysroot /Developer/ 
SDKs/MacOSX10.4u.sdk" CPPFLAGS=-msse3 CFLAGS="-g -O2 -std=gnu99 - 
march=nocona" CXXFLAGS="-g -O2 -march=nocona" FFLAGS="-g -O2 - 
march=nocona" FCFLAGS="-g -O2 -march=nocona" --enable-BLAS-shlib -- 
with-system-zlib --enable-memory-profiling

Using the universal SDK supposedly results in faster executables, but  
I didn't test it ...

Cheers,
Simon


> (I am using the latest version of OS X on an Intel MacBook with the
> newest Xcode and the gfortran from CRAN).
>
> Jim
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From bullard at berkeley.edu  Tue Aug 28 07:01:01 2007
From: bullard at berkeley.edu (James Bullard)
Date: Mon, 27 Aug 2007 22:01:01 -0700
Subject: [R-SIG-Mac] configuring R-2.6.0 for speed
In-Reply-To: <9461F59C-B67D-4CA2-A5BD-AEB25AFEC753@r-project.org>
References: <4F2BEE94-8C52-4235-9FD9-C57916BBC9D2@berkeley.edu>
	<9461F59C-B67D-4CA2-A5BD-AEB25AFEC753@r-project.org>
Message-ID: <CFB8692F-5863-43AA-B618-9EFCC5CD9F8C@berkeley.edu>

Ok, so I have done a *tiny* amount of benchmarking ... I first  
thought that the problem was that I didn't compile it with --system- 
zlib (which probably was a problem), but It is clear that the "data"  
call is taking much longer in 2.6. I have seen this with "load" as  
well and on a variety of objects, note neither of these I compiled  
myself. All objects which I have tried to load were constructed with  
2.5.1, so I'll probably try to construct a couple of objects with 2.5  
and 2.6 and see if that is an issue, unless someone chimes and says:  
"thats definitely [not] an issue"

thanks for all of the help... jim

== R-2.6.0 (http://r.research.att.com/R-devel-42657.dmg) ==

 > system.time(data(davidTiling))
    user  system elapsed
135.607   2.355 138.219

 > system.time({ davidRaw <- log2(exprs(davidTiling)[,4:6]) ;
+               davidDNA <- log2(exprs(davidTiling[,1:3])) })
    user  system elapsed
11.981   2.203  24.346

 > system.time({ rm(davidTiling); gc() })
    user  system elapsed
   1.520   0.093   1.643

== R-2.5.1 (Obtained from a CRAN mirror today) ==

 > system.time(data(davidTiling))
    user  system elapsed
61.909   2.388  84.032
 > system.time({ davidRaw <- log2(exprs(davidTiling)[,4:6]) ;
+               davidDNA <- log2(exprs(davidTiling[,1:3])) })
    user  system elapsed
   8.667   2.130  27.041
 > system.time({ rm(davidTiling); gc() })
    user  system elapsed
   0.667   0.047   0.715




On Aug 27, 2007, at 2:46 PM, Simon Urbanek wrote:

> James,
>
> On Aug 27, 2007, at 5:35 PM, James Bullard wrote:
>
>> I have checked out R-devel from subversion and configured it with  
>> the following command
>>
>> ./configure --with-blas='-framework vecLib' CFLAGS="-g -O2 - 
>> march=nocona" CXXFLAGS="-g -O2 -march=nocona" FFLAGS="-g -O2 - 
>> march=nocona" FCFLAGS="-g -O2 -march=nocona"
>>
>> followed by make && make install. This works in the sense that R  
>> starts up fine. However, my session seems to be very slow compared  
>> to R-2.5.1 (which I had installed from the binaries at CRAN). Slow  
>> means for example that loading a large RData file takes much  
>> longer. Is there any configure flag I am missing? What are the  
>> exact configure command used to build the CRAN binary?
>>
>
> I don't think it should be any slower - actually is should be  
> faster, because the CRAN binary has memory profiling enabled. There  
> were some changes in R-devel that can make it slower, but not  
> noticeably I suppose. Can you test the CRAN binary of R-devel (from  
> http://r.research.att.com) to see if it exhibits the same slow-down?
>
> FWIW the full flags used for the CRAN i386 build are the following:
>
> CC="gcc-4.0 -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk"  
> CXX="g++-4.0 -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk"  
> F77="gfortran-4.0 -arch i386  -isysroot /Developer/SDKs/ 
> MacOSX10.4u.sdk" FC="gfortran-4.0 -arch i386  -isysroot /Developer/ 
> SDKs/MacOSX10.4u.sdk" CPPFLAGS=-msse3 CFLAGS="-g -O2 -std=gnu99 - 
> march=nocona" CXXFLAGS="-g -O2 -march=nocona" FFLAGS="-g -O2 - 
> march=nocona" FCFLAGS="-g -O2 -march=nocona" --enable-BLAS-shlib -- 
> with-system-zlib --enable-memory-profiling
>
> Using the universal SDK supposedly results in faster executables,  
> but I didn't test it ...
>
> Cheers,
> Simon
>
>
>> (I am using the latest version of OS X on an Intel MacBook with the
>> newest Xcode and the gfortran from CRAN).
>>
>> Jim
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>


From mfero at fhcrc.org  Tue Aug 28 07:31:49 2007
From: mfero at fhcrc.org (Matthew Fero)
Date: Mon, 27 Aug 2007 22:31:49 -0700
Subject: [R-SIG-Mac] Black text
Message-ID: <3BCB0D98-8D5C-487A-85FD-DBF5A845380C@fhcrc.org>

I've noticed that R.app occasionally creates windows with black text  
rather than a color set by the user in Preferences.   For example,
data(package="MASS")
produces a new window with the background color chosen under  
Preferences > Console > Background.  However the the text color is  
always black.  A bit of a nuisance if one uses a black background.   
(Quick fix = 'Select All' -- the highlight color will provide  
contrast against the black making the text visible).

Matthew


From SayanP at alleninstitute.org  Tue Aug 28 23:53:12 2007
From: SayanP at alleninstitute.org (Sayan Pathak)
Date: Tue, 28 Aug 2007 14:53:12 -0700
Subject: [R-SIG-Mac] 64-bit R-build on Intel Mac
Message-ID: <3ACA63EA-0933-4F08-A9FC-20685BC8BB15@alleninstitute.org>

Hi,
I was trying to build the R build using the directions given at  
http://r.research.att.com/exp/.

I got through most of the steps till it asked me to run ./configure.  
My question is where is this file located? I am looking at /Library/ 
Frameworks/R.framework. I tried searching for file titled "configure"  
but got an empty return.

Is this the right place for me to look> Could someone please point me  
to the steps I should take.
Thanks,
Sayan


From sdavis2 at mail.nih.gov  Wed Aug 29 14:58:38 2007
From: sdavis2 at mail.nih.gov (Sean Davis)
Date: Wed, 29 Aug 2007 08:58:38 -0400
Subject: [R-SIG-Mac] 64-bit R-build on Intel Mac
In-Reply-To: <3ACA63EA-0933-4F08-A9FC-20685BC8BB15@alleninstitute.org>
References: <3ACA63EA-0933-4F08-A9FC-20685BC8BB15@alleninstitute.org>
Message-ID: <46D56D7E.5000306@mail.nih.gov>

Sayan Pathak wrote:
> Hi,
> I was trying to build the R build using the directions given at  
> http://r.research.att.com/exp/.
> 
> I got through most of the steps till it asked me to run ./configure.  
> My question is where is this file located? I am looking at /Library/ 
> Frameworks/R.framework. I tried searching for file titled "configure"  
> but got an empty return.
> 
> Is this the right place for me to look> Could someone please point me  
> to the steps I should take.

Sayan,

You will need to download the SOURCE code, not the mac binary.  This is
a tar.gz file.  Once uncompressed, you will find configure in the top
level directory.

Sean


From simon.urbanek at r-project.org  Wed Aug 29 15:02:56 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 29 Aug 2007 09:02:56 -0400
Subject: [R-SIG-Mac] 64-bit R-build on Intel Mac
In-Reply-To: <3ACA63EA-0933-4F08-A9FC-20685BC8BB15@alleninstitute.org>
References: <3ACA63EA-0933-4F08-A9FC-20685BC8BB15@alleninstitute.org>
Message-ID: <14B7C557-59BE-4639-A7AD-4F617E433006@r-project.org>


On Aug 28, 2007, at 5:53 PM, Sayan Pathak wrote:

> I was trying to build the R build using the directions given at
> http://r.research.att.com/exp/.
>
> I got through most of the steps till it asked me to run ./configure.
> My question is where is this file located? I am looking at /Library/
> Frameworks/R.framework. I tried searching for file titled "configure"
> but got an empty return.
>

You're looking at the already installed *binary* verison of R. In  
order to compile R you need it in its *source* form. You can get it  
from CRAN, for example
http://cran.us.r-project.org/src/base/R-2/R-2.5.1.tar.gz

Cheers,
Simon


From simon.urbanek at r-project.org  Wed Aug 29 21:14:31 2007
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 29 Aug 2007 15:14:31 -0400
Subject: [R-SIG-Mac] 64-bit R-build on Intel Mac
In-Reply-To: <666CEE7E-39F3-4815-BFA7-EA89CB180DF1@alleninstitute.org>
References: <3ACA63EA-0933-4F08-A9FC-20685BC8BB15@alleninstitute.org>
	<14B7C557-59BE-4639-A7AD-4F617E433006@r-project.org>
	<666CEE7E-39F3-4815-BFA7-EA89CB180DF1@alleninstitute.org>
Message-ID: <76FEBCB2-DC48-47AB-9706-77F567FD6645@r-project.org>

Sayan,

On Aug 29, 2007, at 2:34 PM, Sayan Pathak wrote:

> Thanks for the fast response.
>
> I downloaded the tar ball and uncompressed it. Then ran the  
> configure script under R-2.5.1
> as suggested in the http://r.research.att.com/exp/
>
> I am getting the following messages after the configure script goes  
> on and just before it stalls.
>
> >> checking for cblas_cdotu_sub in vecLib framework... -framework  
> vecLib
> >> checking for dgemm_ in -framework vecLib... yes
> >> checking whether double complex BLAS can be used... no
> >> checking whether the BLAS is complete... yes
> >> checking for zgeev_... yes
> >> checking iconv.h usability... yes
> >> checking iconv.h presence... yes
> >> checking for iconv.h... yes
> >> checking for iconv... no
> >> checking for iconvlist... no
> >> configure: error: --with-iconv=yes (default) and a suitable iconv  
> is not available
>
> I have no idea what iconv is.

man iconv will tell you


> My apologies if this is a naive question. I am new to Mac and also  
> compiling R from source for the first time. Could you please suggest  
> what should I be doing?


Use --without-iconv (or compile 64-bit libiconv from Apple sources if  
you know how). Tiger has 32-bit iconv only, so you have either to  
disable iconv support or to get the 64-bit version.

Cheers,
Simon


>
> On Aug 29, 2007, at 6:02 AM, Simon Urbanek wrote:
>
>>
>> On Aug 28, 2007, at 5:53 PM, Sayan Pathak wrote:
>>
>>> I was trying to build the R build using the directions given at
>>> http://r.research.att.com/exp/.
>>>
>>> I got through most of the steps till it asked me to run ./configure.
>>> My question is where is this file located? I am looking at /Library/
>>> Frameworks/R.framework. I tried searching for file titled  
>>> "configure"
>>> but got an empty return.
>>>
>>
>> You're looking at the already installed *binary* verison of R. In  
>> order to compile R you need it in its *source* form. You can get it  
>> from CRAN, for example
>> http://cran.us.r-project.org/src/base/R-2/R-2.5.1.tar.gz
>>
>> Cheers,
>> Simon
>>
>>
>
>


From SayanP at alleninstitute.org  Wed Aug 29 20:34:19 2007
From: SayanP at alleninstitute.org (Sayan Pathak)
Date: Wed, 29 Aug 2007 11:34:19 -0700
Subject: [R-SIG-Mac] 64-bit R-build on Intel Mac
In-Reply-To: <14B7C557-59BE-4639-A7AD-4F617E433006@r-project.org>
References: <3ACA63EA-0933-4F08-A9FC-20685BC8BB15@alleninstitute.org>
	<14B7C557-59BE-4639-A7AD-4F617E433006@r-project.org>
Message-ID: <666CEE7E-39F3-4815-BFA7-EA89CB180DF1@alleninstitute.org>

Hi Simon,
Thanks for the fast response.

I downloaded the tar ball and uncompressed it. Then ran the configure  
script under R-2.5.1
as suggested in the http://r.research.att.com/exp/

I am getting the following messages after the configure script goes  
on and just before it stalls.

 >> checking for cblas_cdotu_sub in vecLib framework... -framework  
vecLib
 >> checking for dgemm_ in -framework vecLib... yes
 >> checking whether double complex BLAS can be used... no
 >> checking whether the BLAS is complete... yes
 >> checking for zgeev_... yes
 >> checking iconv.h usability... yes
 >> checking iconv.h presence... yes
 >> checking for iconv.h... yes
 >> checking for iconv... no
 >> checking for iconvlist... no
 >> configure: error: --with-iconv=yes (default) and a suitable iconv  
is not available

I have no idea what iconv is. My apologies if this is a naive  
question. I am new to Mac and also compiling R from source for the  
first time. Could you please suggest what should I be doing?
I appreciate your help.

Thanks,
Sayan




On Aug 29, 2007, at 6:02 AM, Simon Urbanek wrote:

>
> On Aug 28, 2007, at 5:53 PM, Sayan Pathak wrote:
>
>> I was trying to build the R build using the directions given at
>> http://r.research.att.com/exp/.
>>
>> I got through most of the steps till it asked me to run ./configure.
>> My question is where is this file located? I am looking at /Library/
>> Frameworks/R.framework. I tried searching for file titled "configure"
>> but got an empty return.
>>
>
> You're looking at the already installed *binary* verison of R. In  
> order to compile R you need it in its *source* form. You can get it  
> from CRAN, for example
> http://cran.us.r-project.org/src/base/R-2/R-2.5.1.tar.gz
>
> Cheers,
> Simon
>
>


From iit512 at yandex.ru  Thu Aug 30 21:52:17 2007
From: iit512 at yandex.ru (iit512)
Date: Thu, 30 Aug 2007 23:52:17 +0400
Subject: [R-SIG-Mac] .C interface to R: problem with compilation
Message-ID: <12341188503537@webmail14.yandex.ru>

Dear all,

I am trying to reproduce the simple example from Peng & Leeuw article (http://www.biostat.jhsph.edu/~rpeng/docs/interface.pdf) but have multiple errors which I cannot resolve.

The example file is hello.c:

===
#include <R.h>
void hello(int *n)
{
        int i;
        for(i=0; i < *n; i++) {
                Rprintf("Hello, world!\n");
        }
}
===

I try to compile it via
> R CMD SHLIB hello.c
and get this message:

===
gcc-4.0 -arch ppc -isysroot /Developer/SDKs/MacOSX10.4u.sdk -std=gnu99 -no-cpp-precomp -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/ppc  -I/usr/local/include    -fPIC  -g -O2 -c hello.c -o hello.o
In file included from hello.c:1:
/Library/Frameworks/R.framework/Resources/include/R.h:31:20: error: stddef.h: No such file or directory
... (lot more errors)
===

I thought that the error is in "-I/usr/local/include" because I have stddef.h in /usr/include. So I tried following:

===
> MAKEFLAGS="CPPFLAGS=-I/usr/include" R CMD SHLIB hello.c

gcc-4.0 -arch ppc -isysroot /Developer/SDKs/MacOSX10.4u.sdk -std=gnu99 -no-cpp-precomp -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/ppc  -I/usr/include    -fPIC  -g -O2 -c hello.c -o hello.o
In file included from /Library/Frameworks/R.framework/Resources/include/R.h:35,
                 from hello.c:1:
/usr/include/float.h:8:24: error: no include path in which to search for float.h
... (and lot more errors)
===

System: R 2.5.1 /  Darwin Kernel Version 8.10.0 : Wed May 23 16:50:59 PDT 2007; root:xnu-792.21.3~1/RELEASE_PPC Power Macintosh powerpc / Mac OS X 10.4.10 (8R218) / PowerPC G4  (2.1)

How to resolve the problem? Any help will be appreciated.

With best wishes,

Alexey Shipunov


From iit512 at yandex.ru  Thu Aug 30 23:16:58 2007
From: iit512 at yandex.ru (iit512)
Date: Fri, 31 Aug 2007 01:16:58 +0400
Subject: [R-SIG-Mac] .C interface to R: problem with compilation
Message-ID: <12411188508618@webmail10.yandex.ru>

Dear all,

My apologies for too fast posting. I replaced the outdated XCode with new one (2.4.1) and found that now everything is OK. 

With best wishes,

Alexey Shipunov


