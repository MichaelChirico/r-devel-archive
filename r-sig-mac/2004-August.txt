From bellis at hsph.harvard.edu  Tue Aug  3 21:49:47 2004
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Tue Aug  3 21:49:48 2004
Subject: [R-SIG-Mac] The diff as promised
Message-ID: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>

Here is my diff for the cocoa interface that lets the Cocoa bundle take 
over the graphics device. I ended up taking the "most effort" route 
with respect to the Cocoa developer and overriding 
innerQuartzDeviceDriver rather than the individual functions as I had 
originally intended. The reason for this is that I won't necessarily be 
allocating an entire view to rendering the graphics. I may be using an 
NSCell as my Device, which would share its context with its parent 
NSView. You also might want to do something amusing like composite onto 
a Quicktime movie for something.

I also wired up the various little widgets (like the workspace browser) 
so that Cocoa can take control of those as well.

The diff is against a subversion checkout from yesterday I believe. My 
bundle that works against this diff be posted soon. Details to follow.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: cocoa.diff
Type: application/octet-stream
Size: 6022 bytes
Desc: not available
Url : https://www.stat.math.ethz.ch/pipermail/r-sig-mac/attachments/20040803/1804e7b1/cocoa.obj
-------------- next part --------------

---
Byron Ellis (bellis@hsph.harvard.edu)
"Oook" -- The Librarian
From stefano.iacus at unimi.it  Tue Aug  3 22:15:41 2004
From: stefano.iacus at unimi.it (stefano iacus)
Date: Tue Aug  3 22:15:50 2004
Subject: [R-SIG-Mac] The diff as promised
In-Reply-To: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
Message-ID: <E4CCBE7D-E589-11D8-80B6-000A95C87F66@unimi.it>

Byron,
thanks. I'll have a look.
I've been able to embed R inside a pure Cocoa app with Simon's 
suggestions but without using threads and controlling over the R event 
loop.
At this point all the widgets (workspace browser etc) will be rewritten 
in Cocoa.
Sometime in august I'll release the xcode project so that other people 
can contribute with their work.
I'm also thinking about entirely replace the quartz device witha  pure 
cocoa one, so if you have already some code ready it would be nice to 
look at it as well.

stefano

On Aug 3, 2004, at 9:49 PM, Byron Ellis wrote:

> Here is my diff for the cocoa interface that lets the Cocoa bundle 
> take over the graphics device. I ended up taking the "most effort" 
> route with respect to the Cocoa developer and overriding 
> innerQuartzDeviceDriver rather than the individual functions as I had 
> originally intended. The reason for this is that I won't necessarily 
> be allocating an entire view to rendering the graphics. I may be using 
> an NSCell as my Device, which would share its context with its parent 
> NSView. You also might want to do something amusing like composite 
> onto a Quicktime movie for something.
>
> I also wired up the various little widgets (like the workspace 
> browser) so that Cocoa can take control of those as well.
>
> The diff is against a subversion checkout from yesterday I believe. My 
> bundle that works against this diff be posted soon. Details to follow.
>
>
> <cocoa.diff>
> ---
> Byron Ellis (bellis@hsph.harvard.edu)
> "Oook" -- The Librarian
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac

From bellis at hsph.harvard.edu  Wed Aug  4 07:38:41 2004
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Wed Aug  4 07:38:36 2004
Subject: [R-SIG-Mac] The diff as promised
In-Reply-To: <E4CCBE7D-E589-11D8-80B6-000A95C87F66@unimi.it>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
	<E4CCBE7D-E589-11D8-80B6-000A95C87F66@unimi.it>
Message-ID: <8B227BF2-E5D8-11D8-9F2F-000D93C24D64@hsph.harvard.edu>

Cool, it was a lot more complex but it eventually got to the point 
where it would become a maintenance nightmare, so I backed it out and 
just had Cocoa take complete control of the graphics device. More work 
for me in some sense, but easier to maintain I think.

Do you mean R will run without having to use the Cocoa bundle to 
bootstrap the code? I'd be curious to see how that worked. I guess I 
will in August :-)

I've got my quartz device mostly working. I think my font layout code 
is still slightly off for rotated text (R and Cocoa seem to have 
different ideas of where the baseline is located), but its basically 
all there and completely written in Cocoa--it uses NSLayoutManagers for 
the layout and NSFontManagers for font selection and so on. 
Additionally, I haven't figured out how/where to set fontfamily in 
R_GE_gcontext, which devPS seems to use so it defaults to Helvetica no 
matter which family is used so far. At any rate, I've checked the 
entire project into the StatPaper CVS repository:

  cvs -z3 -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/statpaper co 
StatPaperBundle

or browse at

http://sourceforge.net/projects/statpaper/

most of the device is implemented in GraphicsDeviceManager.m with 
support in *+R.h/.m for handling R<->NSColor and R<->NSBezierPath. 
Since I just checked it in, I haven't updated the licensing block 
properly in the code nor given proper credit to yourself and Simon yet, 
hope you aren't too offended ;-)



On Aug 3, 2004, at 4:15 PM, stefano iacus wrote:

> Byron,
> thanks. I'll have a look.
> I've been able to embed R inside a pure Cocoa app with Simon's 
> suggestions but without using threads and controlling over the R event 
> loop.
> At this point all the widgets (workspace browser etc) will be 
> rewritten in Cocoa.
> Sometime in august I'll release the xcode project so that other people 
> can contribute with their work.
> I'm also thinking about entirely replace the quartz device witha  pure 
> cocoa one, so if you have already some code ready it would be nice to 
> look at it as well.
>
> stefano
>
> On Aug 3, 2004, at 9:49 PM, Byron Ellis wrote:
>
>> Here is my diff for the cocoa interface that lets the Cocoa bundle 
>> take over the graphics device. I ended up taking the "most effort" 
>> route with respect to the Cocoa developer and overriding 
>> innerQuartzDeviceDriver rather than the individual functions as I had 
>> originally intended. The reason for this is that I won't necessarily 
>> be allocating an entire view to rendering the graphics. I may be 
>> using an NSCell as my Device, which would share its context with its 
>> parent NSView. You also might want to do something amusing like 
>> composite onto a Quicktime movie for something.
>>
>> I also wired up the various little widgets (like the workspace 
>> browser) so that Cocoa can take control of those as well.
>>
>> The diff is against a subversion checkout from yesterday I believe. 
>> My bundle that works against this diff be posted soon. Details to 
>> follow.
>>
>>
>> <cocoa.diff>
>> ---
>> Byron Ellis (bellis@hsph.harvard.edu)
>> "Oook" -- The Librarian
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac@stat.math.ethz.ch
>> https://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>
---
Byron Ellis (bellis@hsph.harvard.edu)
"Oook" -- The Librarian

From simon.urbanek at math.uni-augsburg.de  Wed Aug  4 12:43:05 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Wed Aug  4 12:43:10 2004
Subject: [R-SIG-Mac] The diff as promised
In-Reply-To: <8B227BF2-E5D8-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
	<E4CCBE7D-E589-11D8-80B6-000A95C87F66@unimi.it>
	<8B227BF2-E5D8-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
Message-ID: <10EA743E-E603-11D8-89F4-000A959F327E@math.uni-augsburg.de>

On Aug 4, 2004, at 7:38 AM, Byron Ellis wrote:

> Do you mean R will run without having to use the Cocoa bundle to 
> bootstrap the code? I'd be curious to see how that worked. I guess I 
> will in August :-)

That code exist for more than a year now ;), it's part of the Obj-C 
interface to R I mentioned a while ago.

There are two approaches - the old one using a single thread (that's 
what my old Cocoa Rgui used - this has several limitations because R 
can block the entire interface) and the more recent one which runs R 
and its loop in a separate thread (very much like JGR). Both are in the 
CVS. The option of using R as a framework instead of plugging Cocoa 
into R has the advantage that the application is a "real" application, 
nut just a wrapper to the R script, which caused quite some problems.

> I've got my quartz device mostly working.

Sounds good :).

> how/where to set fontfamily in R_GE_gcontext,

AFAIR so far it works in grid only, using gp=gpar(fontfamily="...")). 
JavaGD respects this flag as well as the alpha transparency.

Unfortunately I'll be very busy in the next two weeks, so I won't have 
time to look at it until later this month :(.

Cheers,
Simon

From bellis at hsph.harvard.edu  Thu Aug  5 08:17:25 2004
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Thu Aug  5 08:17:34 2004
Subject: [R-SIG-Mac] The diff as promised
In-Reply-To: <10EA743E-E603-11D8-89F4-000A959F327E@math.uni-augsburg.de>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
	<E4CCBE7D-E589-11D8-80B6-000A95C87F66@unimi.it>
	<8B227BF2-E5D8-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
	<10EA743E-E603-11D8-89F4-000A959F327E@math.uni-augsburg.de>
Message-ID: <1EC2E955-E6A7-11D8-9F2F-000D93C24D64@hsph.harvard.edu>


On Aug 4, 2004, at 6:43 AM, Simon Urbanek wrote:

> On Aug 4, 2004, at 7:38 AM, Byron Ellis wrote:
>
>> Do you mean R will run without having to use the Cocoa bundle to 
>> bootstrap the code? I'd be curious to see how that worked. I guess I 
>> will in August :-)
>
> That code exist for more than a year now ;), it's part of the Obj-C 
> interface to R I mentioned a while ago.
>
Just goes to show how much I've been paying attention :-)

> There are two approaches - the old one using a single thread (that's 
> what my old Cocoa Rgui used - this has several limitations because R 
> can block the entire interface) and the more recent one which runs R 
> and its loop in a separate thread (very much like JGR). Both are in 
> the CVS. The option of using R as a framework instead of plugging 
> Cocoa into R has the advantage that the application is a "real" 
> application, nut just a wrapper to the R script, which caused quite 
> some problems.
>

Yeah, my bundle does the former and just lets the entire thing block 
(it doesn't bother me all that much since the other GUIs do 
more-or-less the same thing). The big disadvantage is that I can't 
interrupt execution because keyboard events don't get passed. I agree 
about making R/Cocoa (not to be confused with R/CoCo) a "real" 
application---the wrapper script drives me crazy. There's no way to 
debug except through using lots of NSLog statements and spending a lot 
of time in the Crash Log! But, now the question becomes, which CVS 
repository would that be? The main R (now SVN) repository?!


>> I've got my quartz device mostly working.
>
> Sounds good :).
>
>> how/where to set fontfamily in R_GE_gcontext,
>
> AFAIR so far it works in grid only, using gp=gpar(fontfamily="...")). 
> JavaGD respects this flag as well as the alpha transparency.
>

Yup, I saw your other email and fixed it. Also fixed font colors while 
I was at it. Transparency just works (yay Quartz!).


> Unfortunately I'll be very busy in the next two weeks, so I won't have 
> time to look at it until later this month :(.

Everybody here is out of town heading to the JSMs early but me, so I've 
had some time alone to work on things. :-) (I don't get to go---too 
bad, I've never been to Toronto).

At any rate, it'll be sitting in CVS when you get back. :-)


>
> Cheers,
> Simon
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>
---
Byron Ellis (bellis@hsph.harvard.edu)
"Oook" -- The Librarian

From a.beckerman at sheffield.ac.uk  Thu Aug  5 12:55:39 2004
From: a.beckerman at sheffield.ac.uk (Andrew Beckerman)
Date: Thu Aug  5 12:55:47 2004
Subject: [R-SIG-Mac] lme4 crashes R
Message-ID: <FCE11E18-E6CD-11D8-A1AA-000A95CD7F02@sheffield.ac.uk>

Hi -

has anyone had success at building and running the source distribution  
of lme4 from CRAN on OSX?  I find that it builds, and will load as a  
library, but running the lme example in lme4 causes R to crash - the  
data file loads, the model appears to run, but attempting a summary()  
or print() causes the crash.  I notice that there is a binary of an old  
version of lme4, but nothing up to date.

Running R in X-windows fails as well, producing a Bus Error.

OSX 10.3.4, R1.9.1, Dev Tools installed, g77 from HPC;
lme4_0.6-4.tar.gz.; Matrix  version 0.8-10

Below is the R.bin.crash.log file.

Cheers
andrew

**********

Host Name:      dyn094076.shef.ac.uk
Date/Time:      2004-08-05 11:28:33 +0100
OS Version:     10.3.4 (Build 7H63)
Report Version: 2

Command: R.bin
Path:    /Library/Frameworks/R.framework/Resources/bin/R.bin
Version: 1.9.1 (R 1.9.1)
PID:     6947
Thread:  0

Exception:  EXC_BAD_ACCESS (0x0001)
Codes:      KERN_PROTECTION_FAILURE (0x0002) at 0x00000000

Thread 0 Crashed:
0   R.bin      	0x000ecef0 Rf_isVectorAtomic + 0 (util.c:340)
1   R.bin      	0x000ec578 Rf_asLogical + 0x28 (util.c:93)
2   Matrix.so  	0x06511414 ssclme_sigma + 0xb0 (ssclme.c:884)
3   R.bin      	0x00045024 do_dotcall + 0x2f0 (dotcode.c:521)
4   R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
5   R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
6   R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
7   R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
8   R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
9   R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
10  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
11  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
12  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
13  R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
14  R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
15  methods.so 	0x0535bef8 R_standardGeneric + 0x298  
(methods_list_dispatch.c:610)
16  R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
17  R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
18  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
19  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
20  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
21  R.bin      	0x0005d684 Rf_eval + 0x24c (eval.c:342)
22  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
23  R.bin      	0x0005d684 Rf_eval + 0x24c (eval.c:342)
24  R.bin      	0x0005fbf4 Rf_evalList + 0x128 (eval.c:1360)
25  R.bin      	0x0005d984 Rf_eval + 0x54c (eval.c:396)
26  R.bin      	0x00060698 Rf_DispatchOrEval + 0x118 (eval.c:1664)
27  R.bin      	0x000e7ad8 do_subset2 + 0x48 (subset.c:681)
28  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
29  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
30  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
31  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
32  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
33  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
34  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
35  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
36  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
37  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
38  R.bin      	0x0005d684 Rf_eval + 0x24c (eval.c:342)
39  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
40  R.bin      	0x0005d684 Rf_eval + 0x24c (eval.c:342)
41  R.bin      	0x0005fbf4 Rf_evalList + 0x128 (eval.c:1360)
42  R.bin      	0x0005d984 Rf_eval + 0x54c (eval.c:396)
43  R.bin      	0x00060698 Rf_DispatchOrEval + 0x118 (eval.c:1664)
44  R.bin      	0x000e7ad8 do_subset2 + 0x48 (subset.c:681)
45  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
46  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
47  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
48  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
49  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
50  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
51  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
52  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
53  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
54  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
55  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
56  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
57  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
58  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
59  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
60  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
61  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
62  R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
63  R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
64  methods.so 	0x0535bef8 R_standardGeneric + 0x298  
(methods_list_dispatch.c:610)
65  R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
66  R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
67  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
68  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
69  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
70  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
71  R.bin      	0x0005fb84 Rf_evalList + 0xb8 (eval.c:1350)
72  R.bin      	0x0005d984 Rf_eval + 0x54c (eval.c:396)
73  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
74  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
75  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
76  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
77  R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
78  R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
79  methods.so 	0x0535bef8 R_standardGeneric + 0x298  
(methods_list_dispatch.c:610)
80  R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
81  R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
82  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
83  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
84  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
85  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
86  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
87  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
88  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
89  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
90  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
91  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
92  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
93  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
94  R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
95  R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
96  methods.so 	0x0535bef8 R_standardGeneric + 0x298  
(methods_list_dispatch.c:610)
97  R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
98  R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
99  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
100 R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
101 R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
102 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
103 R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
104 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
105 R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
106 R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
107 methods.so 	0x0535bef8 R_standardGeneric + 0x298  
(methods_list_dispatch.c:610)
108 R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
109 R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
110 R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
111 R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
112 R.bin      	0x000bf4ac do_printdefault + 0x2a0 (print.c:220)
113 R.bin      	0x000907e4 do_internal + 0x170 (names.c:1057)
114 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
115 R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
116 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
117 R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
118 R.bin      	0x00090c78 applyMethod + 0x1d8 (objects.c:119)
119 R.bin      	0x00091514 Rf_usemethod + 0x5b4 (objects.c:326)
120 R.bin      	0x00091754 do_usemethod + 0x1f4 (objects.c:389)
121 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
122 R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
123 R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
124 R.bin      	0x000c09a4 Rf_PrintValueEnv + 0x7c (print.c:776)
125 R.bin      	0x00082a60 Rf_ReplIteration + 0x1f8 (main.c:255)
126 R.bin      	0x00082b80 R_ReplConsole + 0x88 (main.c:299)
127 R.bin      	0x00083530 run_Rmainloop + 0x78 (main.c:657)
128 R.bin      	0x000ef5a4 main + 0x14 (system.c:102)
129 R.bin      	0x0000205c _start + 0x17c (crt.c:267)
130 R.bin      	0x00001edc start + 0x30

PPC Thread State:
   srr0: 0x000ecef0 srr1: 0x0200f030                vrsave: 0x00000000
     cr: 0x42022244  xer: 0x20000004   lr: 0x000ec578  ctr: 0x000ec550
     r0: 0x00000000   r1: 0xbffeade0   r2: 0x08920868   r3: 0x00000000
     r4: 0x40cdb6c6   r5: 0x00000000   r6: 0xbffeabf8   r7: 0x00000002
     r8: 0x065054f8   r9: 0x00000034  r10: 0x0008a45c  r11: 0x065310f8
    r12: 0x000ec550  r13: 0x001ab3a0  r14: 0x00180f68  r15: 0x0888948c
    r16: 0x00152ad4  r17: 0x0017e12c  r18: 0x0017e12c  r19: 0x0017d440
    r20: 0x0017d440  r21: 0x000000a4  r22: 0x069a0d48  r23: 0x06511364
    r24: 0x06d64364  r25: 0x00174d3c  r26: 0x00000000  r27: 0x089207d0
    r28: 0x08920860  r29: 0x000008ef  r30: 0x00000000  r31: 0x000ec558

Binary Images Description:
     0x1000 -   0x16ffff R.bin  
	/Library/Frameworks/R.framework/Resources/bin/R.bin
   0x483000 -   0x497fff R_aqua.so  
	/Library/Frameworks/R.framework/Resources/modules/R_aqua.so
   0x605000 -   0x62ffff libreadline.4.3.dylib  
	/Library/Frameworks/R.framework/Resources/bin/Frameworks/ 
libreadline.4.3.dylib
  0x2008000 -  0x217dfff libR.dylib  
	/Library/Frameworks/R.framework/Resources/bin/libR.dylib
  0x533e000 -  0x533ffff lattice.so  
	/Users/apb/Library/R/library/lattice/libs/lattice.so
  0x534f000 -  0x5352fff MASS.so  
	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/MASS/ 
libs/MASS.so
  0x535a000 -  0x535dfff methods.so  
	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/ 
methods/libs/methods.so
  0x536c000 -  0x5379fff grid.so  
	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/grid/ 
libs/grid.so
  0x539a000 -  0x539bfff tools.so  
	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/ 
tools/libs/tools.so
  0x5422000 -  0x544cfff stats.so  
	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/ 
stats/libs/stats.so
  0x6505000 -  0x6530fff Matrix.so  
	/Users/apb/Library/R/library/Matrix/libs/Matrix.so
0x8fe00000 - 0x8fe4ffff dyld 	/usr/lib/dyld
0x90000000 - 0x90122fff libSystem.B.dylib 	/usr/lib/libSystem.B.dylib
0x90190000 - 0x9023dfff com.apple.CoreFoundation 6.3.4  
(299.31)	/System/Library/Frameworks/CoreFoundation.framework/Versions/ 
A/CoreFoundation
0x90280000 - 0x904f9fff com.apple.CoreServices.CarbonCore  
10.3.4	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
Frameworks/CarbonCore.framework/Versions/A/CarbonCore
0x90570000 - 0x905defff com.apple.framework.IOKit 1.3.2  
(???)	/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x90610000 - 0x9069afff com.apple.CoreServices.OSServices  
3.0.1	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
Frameworks/OSServices.framework/Versions/A/OSServices
0x90700000 - 0x90700fff com.apple.CoreServices 10.3  
(???)	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
CoreServices
0x90720000 - 0x90787fff com.apple.audio.CoreAudio  
2.1.2	/System/Library/Frameworks/CoreAudio.framework/Versions/A/ 
CoreAudio
0x907f0000 - 0x907f9fff com.apple.DiskArbitration  
2.0.3	/System/Library/PrivateFrameworks/DiskArbitration.framework/ 
Versions/A/DiskArbitration
0x90810000 - 0x90810fff com.apple.ApplicationServices 1.0  
(???)	/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/ApplicationServices
0x90910000 - 0x90983fff com.apple.DesktopServices  
1.2.2	/System/Library/PrivateFrameworks/DesktopServicesPriv.framework/ 
Versions/A/DesktopServicesPriv
0x90d00000 - 0x90d1bfff com.apple.SystemConfiguration 1.7.1  
(???)	/System/Library/Frameworks/SystemConfiguration.framework/ 
Versions/A/SystemConfiguration
0x90d40000 - 0x90d40fff com.apple.Carbon 10.3  
(???)	/System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
0x910b0000 - 0x910fffff com.apple.bom 1.2.4  
(63)	/System/Library/PrivateFrameworks/Bom.framework/Versions/A/Bom
0x912a0000 - 0x912bdfff com.apple.audio.SoundManager  
3.8	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
CarbonSound.framework/Versions/A/CarbonSound
0x912e0000 - 0x912f7fff com.apple.LangAnalysis  
1.5.4	/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
0x91320000 - 0x913defff ColorSync  
	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/ColorSync.framework/Versions/A/ColorSync
0x91460000 - 0x91473fff com.apple.speech.synthesis.framework  
3.2	/System/Library/Frameworks/ApplicationServices.framework/Versions/ 
A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
0x914a0000 - 0x91509fff com.apple.htmlrendering  
1.1.2	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
Frameworks/HTMLRendering.framework/Versions/A/HTMLRendering
0x91560000 - 0x91619fff com.apple.QD 3.4.64  
(???)	/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/QD.framework/Versions/A/QD
0x91670000 - 0x916a8fff com.apple.AE  
1.3.2	/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/AE.framework/Versions/A/AE
0x916e0000 - 0x91773fff com.apple.print.framework.PrintCore  
3.3	/System/Library/Frameworks/ApplicationServices.framework/Versions/ 
A/Frameworks/PrintCore.framework/Versions/A/PrintCore
0x917e0000 - 0x917f0fff com.apple.speech.recognition.framework  
3.3	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
SpeechRecognition.framework/Versions/A/SpeechRecognition
0x91810000 - 0x9182afff com.apple.openscripting 1.2.1  
(???)	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
Frameworks/OpenScripting.framework/Versions/A/OpenScripting
0x91850000 - 0x91860fff com.apple.ImageCapture  
2.1.0	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
Frameworks/ImageCapture.framework/Versions/A/ImageCapture
0x91890000 - 0x9189cfff com.apple.help  
1.0.1	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
Frameworks/Help.framework/Versions/A/Help
0x918c0000 - 0x918cdfff com.apple.CommonPanels 1.2.1  
(1.0)	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
Frameworks/CommonPanels.framework/Versions/A/CommonPanels
0x918f0000 - 0x9193efff com.apple.print.framework.Print  
3.3	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
Print.framework/Versions/A/Print
0x91990000 - 0x9199bfff com.apple.securityhi 1.2  
(90)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
SecurityHI.framework/Versions/A/SecurityHI
0x919c0000 - 0x91a33fff com.apple.NavigationServices  
3.3.1	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
Frameworks/NavigationServices.framework/Versions/A/NavigationServices
0x91ab0000 - 0x91ac4fff libCGATS.A.dylib  
	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
0x91ae0000 - 0x91aebfff libCSync.A.dylib  
	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
0x91b10000 - 0x91b2afff libPDFRIP.A.dylib  
	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreGraphics.framework/Versions/A/Resources/ 
libPDFRIP.A.dylib
0x91b50000 - 0x91b5ffff libPSRIP.A.dylib  
	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreGraphics.framework/Versions/A/Resources/libPSRIP.A.dylib
0x91b80000 - 0x91b93fff libRIP.A.dylib  
	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
0x91bb0000 - 0x91d45fff com.apple.QuickTime  
6.5.1	/System/Library/Frameworks/QuickTime.framework/Versions/A/ 
QuickTime
0x92070000 - 0x92096fff com.apple.FindByContent 1.4  
(1.2)	/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/FindByContent.framework/Versions/A/FindByContent
0x920c0000 - 0x922a7fff com.apple.security 2.3  
(176)	/System/Library/Frameworks/Security.framework/Versions/A/Security
0x92430000 - 0x92468fff com.apple.LaunchServices 10.3.4  
(98.2)	/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/LaunchServices.framework/Versions/A/ 
LaunchServices
0x92740000 - 0x92777fff com.apple.CFNetwork 1.2.1  
(7)	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
Frameworks/CFNetwork.framework/Versions/A/CFNetwork
0x927d0000 - 0x92b54fff com.apple.HIToolbox 1.3.3  
(???)	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
Frameworks/HIToolbox.framework/Versions/A/HIToolbox
0x92d30000 - 0x92d80fff com.apple.HIServices 1.4.1  
(0.0.1d1)	/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
0x935d0000 - 0x938a8fff com.apple.CoreGraphics 1.203.20  
(???)	/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
0x939a0000 - 0x939b4fff libcups.2.dylib 	/usr/lib/libcups.2.dylib
0x939d0000 - 0x939d4fff libmathCommon.A.dylib  
	/usr/lib/system/libmathCommon.A.dylib
0x94060000 - 0x94078fff com.apple.WebServices 1.1.1  
(1.1.0)	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
Frameworks/WebServicesCore.framework/Versions/A/WebServicesCore
0x94120000 - 0x9414bfff libncurses.5.dylib 	/usr/lib/libncurses.5.dylib
0x945b0000 - 0x945b9fff libz.1.dylib 	/usr/lib/libz.1.dylib
0x94610000 - 0x9462afff libresolv.9.dylib 	/usr/lib/libresolv.9.dylib
0x94650000 - 0x946affff com.apple.SearchKit  
1.0.2	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
Frameworks/SearchKit.framework/Versions/A/SearchKit
0x94b20000 - 0x94badfff com.apple.ink.framework  
55.8	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
Ink.framework/Versions/A/Ink
0x954c0000 - 0x95ac6fff libBLAS.dylib  
	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
vecLib.framework/Versions/A/libBLAS.dylib
0x95b20000 - 0x95df0fff libLAPACK.dylib  
	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
vecLib.framework/Versions/A/libLAPACK.dylib
0x95e40000 - 0x95eadfff libvDSP.dylib  
	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
vecLib.framework/Versions/A/libvDSP.dylib
0x95f00000 - 0x95f20fff libvMisc.dylib  
	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
vecLib.framework/Versions/A/libvMisc.dylib
0x968d0000 - 0x969b2fff libicucore.A.dylib 	/usr/lib/libicucore.A.dylib
0x96a20000 - 0x96ae2fff libcrypto.0.9.7.dylib  
	/usr/lib/libcrypto.0.9.7.dylib
0x96b40000 - 0x96b6efff libssl.0.9.7.dylib 	/usr/lib/libssl.0.9.7.dylib
0x96bf0000 - 0x96c7ffff ATS  
	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/ATS.framework/Versions/A/ATS
0x96e80000 - 0x96e90fff com.apple.vecLib 3.0.1 (vecLib  
3.0.1)	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
0x97510000 - 0x97518fff libbsm.dylib 	/usr/lib/libbsm.dylib

From john.maindonald at anu.edu.au  Thu Aug  5 13:31:01 2004
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Thu Aug  5 13:31:22 2004
Subject: [R-SIG-Mac] lme4 crashes R
In-Reply-To: <FCE11E18-E6CD-11D8-A1AA-000A95CD7F02@sheffield.ac.uk>
References: <FCE11E18-E6CD-11D8-A1AA-000A95CD7F02@sheffield.ac.uk>
Message-ID: <EDD9D02B-E6D2-11D8-BA24-000A95CDA0F2@anu.edu.au>

Hi Andrew -
I had a problem when I tried to run it, also. It seems likely to me that
some modification is required to the code so that the compiler will
do the right thing.
John Maindonald.

 > library(DAAG)
 > library(lme4)
 > tinting$id <- factor(tinting$id)
 > tinting.lme <- lme(log(it) ~ sex+tint+target+agegp, random=~1|id,
+ data=tinting)
 > print(tinting.lme)
Linear mixed-effects model fit by   Data: NULL
   Log-likelihood: NULL
   Fixed: list()
NULL

Length  Class   Mode
      0   NULL   NULL
Number of Observations:
Number of Groups: Error in 1:dd$Q : NA/NaN argument
 > summary(tinting.lme)

Process R bus error at Thu Jul 22 10:41:31 2004



--please do not edit the information below--

Version:
  platform = powerpc-apple-darwin6.8
  arch = powerpc
  os = darwin6.8
  system = powerpc, darwin6.8
  status =
  major = 1
  minor = 9.1
  year = 2004
  month = 06
  day = 21
  language = R

Search Path:
  .GlobalEnv, package:DAAG, package:lme4, package:Matrix,  
package:methods, package:stats, package:graphics, package:utils,  
Autoloads, package:base



On 5 Aug 2004, at 8:55 PM, Andrew Beckerman wrote:

> Hi -
>
> has anyone had success at building and running the source distribution  
> of lme4 from CRAN on OSX?  I find that it builds, and will load as a  
> library, but running the lme example in lme4 causes R to crash - the  
> data file loads, the model appears to run, but attempting a summary()  
> or print() causes the crash.  I notice that there is a binary of an  
> old version of lme4, but nothing up to date.
>
> Running R in X-windows fails as well, producing a Bus Error.
>
> OSX 10.3.4, R1.9.1, Dev Tools installed, g77 from HPC;
> lme4_0.6-4.tar.gz.; Matrix  version 0.8-10
>
> Below is the R.bin.crash.log file.
>
> Cheers
> andrew
>
> **********
>
> Host Name:      dyn094076.shef.ac.uk
> Date/Time:      2004-08-05 11:28:33 +0100
> OS Version:     10.3.4 (Build 7H63)
> Report Version: 2
>
> Command: R.bin
> Path:    /Library/Frameworks/R.framework/Resources/bin/R.bin
> Version: 1.9.1 (R 1.9.1)
> PID:     6947
> Thread:  0
>
> Exception:  EXC_BAD_ACCESS (0x0001)
> Codes:      KERN_PROTECTION_FAILURE (0x0002) at 0x00000000
>
> Thread 0 Crashed:
> 0   R.bin      	0x000ecef0 Rf_isVectorAtomic + 0 (util.c:340)
> 1   R.bin      	0x000ec578 Rf_asLogical + 0x28 (util.c:93)
> 2   Matrix.so  	0x06511414 ssclme_sigma + 0xb0 (ssclme.c:884)
> 3   R.bin      	0x00045024 do_dotcall + 0x2f0 (dotcode.c:521)
> 4   R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
> 5   R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
> 6   R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 7   R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 8   R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 9   R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 10  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 11  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 12  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 13  R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
> 14  R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
> 15  methods.so 	0x0535bef8 R_standardGeneric + 0x298  
> (methods_list_dispatch.c:610)
> 16  R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
> 17  R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
> 18  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 19  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 20  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
> 21  R.bin      	0x0005d684 Rf_eval + 0x24c (eval.c:342)
> 22  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
> 23  R.bin      	0x0005d684 Rf_eval + 0x24c (eval.c:342)
> 24  R.bin      	0x0005fbf4 Rf_evalList + 0x128 (eval.c:1360)
> 25  R.bin      	0x0005d984 Rf_eval + 0x54c (eval.c:396)
> 26  R.bin      	0x00060698 Rf_DispatchOrEval + 0x118 (eval.c:1664)
> 27  R.bin      	0x000e7ad8 do_subset2 + 0x48 (subset.c:681)
> 28  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 29  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 30  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 31  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
> 32  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 33  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 34  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 35  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 36  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 37  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
> 38  R.bin      	0x0005d684 Rf_eval + 0x24c (eval.c:342)
> 39  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
> 40  R.bin      	0x0005d684 Rf_eval + 0x24c (eval.c:342)
> 41  R.bin      	0x0005fbf4 Rf_evalList + 0x128 (eval.c:1360)
> 42  R.bin      	0x0005d984 Rf_eval + 0x54c (eval.c:396)
> 43  R.bin      	0x00060698 Rf_DispatchOrEval + 0x118 (eval.c:1664)
> 44  R.bin      	0x000e7ad8 do_subset2 + 0x48 (subset.c:681)
> 45  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 46  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 47  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 48  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
> 49  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 50  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 51  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 52  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 53  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 54  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
> 55  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 56  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 57  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 58  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 59  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 60  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 61  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 62  R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
> 63  R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
> 64  methods.so 	0x0535bef8 R_standardGeneric + 0x298  
> (methods_list_dispatch.c:610)
> 65  R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
> 66  R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
> 67  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 68  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 69  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
> 70  R.bin      	0x0005d724 Rf_eval + 0x2ec (eval.c:355)
> 71  R.bin      	0x0005fb84 Rf_evalList + 0xb8 (eval.c:1350)
> 72  R.bin      	0x0005d984 Rf_eval + 0x54c (eval.c:396)
> 73  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
> 74  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 75  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 76  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 77  R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
> 78  R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
> 79  methods.so 	0x0535bef8 R_standardGeneric + 0x298  
> (methods_list_dispatch.c:610)
> 80  R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
> 81  R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
> 82  R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
> 83  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 84  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 85  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 86  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 87  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 88  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 89  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 90  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 91  R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 92  R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 93  R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 94  R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
> 95  R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
> 96  methods.so 	0x0535bef8 R_standardGeneric + 0x298  
> (methods_list_dispatch.c:610)
> 97  R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
> 98  R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
> 99  R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 100 R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 101 R.bin      	0x0005f944 do_set + 0xe0 (eval.c:1287)
> 102 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 103 R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 104 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 105 R.bin      	0x0005e0cc R_execClosure + 0x1fc (eval.c:651)
> 106 R.bin      	0x0005e3e8 R_execMethod + 0x2c4 (eval.c:753)
> 107 methods.so 	0x0535bef8 R_standardGeneric + 0x298  
> (methods_list_dispatch.c:610)
> 108 R.bin      	0x00092fa0 do_standardGeneric + 0xcc (objects.c:982)
> 109 R.bin      	0x0005da10 Rf_eval + 0x5d8 (eval.c:398)
> 110 R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 111 R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 112 R.bin      	0x000bf4ac do_printdefault + 0x2a0 (print.c:220)
> 113 R.bin      	0x000907e4 do_internal + 0x170 (names.c:1057)
> 114 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 115 R.bin      	0x0005f12c do_begin + 0x88 (eval.c:1047)
> 116 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 117 R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 118 R.bin      	0x00090c78 applyMethod + 0x1d8 (objects.c:119)
> 119 R.bin      	0x00091514 Rf_usemethod + 0x5b4 (objects.c:326)
> 120 R.bin      	0x00091754 do_usemethod + 0x1f4 (objects.c:389)
> 121 R.bin      	0x0005d85c Rf_eval + 0x424 (eval.c:375)
> 122 R.bin      	0x0005de78 Rf_applyClosure + 0x390 (eval.c:566)
> 123 R.bin      	0x0005da88 Rf_eval + 0x650 (eval.c:410)
> 124 R.bin      	0x000c09a4 Rf_PrintValueEnv + 0x7c (print.c:776)
> 125 R.bin      	0x00082a60 Rf_ReplIteration + 0x1f8 (main.c:255)
> 126 R.bin      	0x00082b80 R_ReplConsole + 0x88 (main.c:299)
> 127 R.bin      	0x00083530 run_Rmainloop + 0x78 (main.c:657)
> 128 R.bin      	0x000ef5a4 main + 0x14 (system.c:102)
> 129 R.bin      	0x0000205c _start + 0x17c (crt.c:267)
> 130 R.bin      	0x00001edc start + 0x30
>
> PPC Thread State:
>   srr0: 0x000ecef0 srr1: 0x0200f030                vrsave: 0x00000000
>     cr: 0x42022244  xer: 0x20000004   lr: 0x000ec578  ctr: 0x000ec550
>     r0: 0x00000000   r1: 0xbffeade0   r2: 0x08920868   r3: 0x00000000
>     r4: 0x40cdb6c6   r5: 0x00000000   r6: 0xbffeabf8   r7: 0x00000002
>     r8: 0x065054f8   r9: 0x00000034  r10: 0x0008a45c  r11: 0x065310f8
>    r12: 0x000ec550  r13: 0x001ab3a0  r14: 0x00180f68  r15: 0x0888948c
>    r16: 0x00152ad4  r17: 0x0017e12c  r18: 0x0017e12c  r19: 0x0017d440
>    r20: 0x0017d440  r21: 0x000000a4  r22: 0x069a0d48  r23: 0x06511364
>    r24: 0x06d64364  r25: 0x00174d3c  r26: 0x00000000  r27: 0x089207d0
>    r28: 0x08920860  r29: 0x000008ef  r30: 0x00000000  r31: 0x000ec558
>
> Binary Images Description:
>     0x1000 -   0x16ffff R.bin  
> 	/Library/Frameworks/R.framework/Resources/bin/R.bin
>   0x483000 -   0x497fff R_aqua.so  
> 	/Library/Frameworks/R.framework/Resources/modules/R_aqua.so
>   0x605000 -   0x62ffff libreadline.4.3.dylib  
> 	/Library/Frameworks/R.framework/Resources/bin/Frameworks/ 
> libreadline.4.3.dylib
>  0x2008000 -  0x217dfff libR.dylib  
> 	/Library/Frameworks/R.framework/Resources/bin/libR.dylib
>  0x533e000 -  0x533ffff lattice.so  
> 	/Users/apb/Library/R/library/lattice/libs/lattice.so
>  0x534f000 -  0x5352fff MASS.so  
> 	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/ 
> MASS/libs/MASS.so
>  0x535a000 -  0x535dfff methods.so  
> 	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/ 
> methods/libs/methods.so
>  0x536c000 -  0x5379fff grid.so  
> 	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/ 
> grid/libs/grid.so
>  0x539a000 -  0x539bfff tools.so  
> 	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/ 
> tools/libs/tools.so
>  0x5422000 -  0x544cfff stats.so  
> 	/Library/Frameworks/R.framework/Versions/1.9.1/Resources/library/ 
> stats/libs/stats.so
>  0x6505000 -  0x6530fff Matrix.so  
> 	/Users/apb/Library/R/library/Matrix/libs/Matrix.so
> 0x8fe00000 - 0x8fe4ffff dyld 	/usr/lib/dyld
> 0x90000000 - 0x90122fff libSystem.B.dylib 	/usr/lib/libSystem.B.dylib
> 0x90190000 - 0x9023dfff com.apple.CoreFoundation 6.3.4  
> (299.31)	/System/Library/Frameworks/CoreFoundation.framework/Versions/ 
> A/CoreFoundation
> 0x90280000 - 0x904f9fff com.apple.CoreServices.CarbonCore  
> 10.3.4	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/CarbonCore.framework/Versions/A/CarbonCore
> 0x90570000 - 0x905defff com.apple.framework.IOKit 1.3.2  
> (???)	/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
> 0x90610000 - 0x9069afff com.apple.CoreServices.OSServices  
> 3.0.1	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/OSServices.framework/Versions/A/OSServices
> 0x90700000 - 0x90700fff com.apple.CoreServices 10.3  
> (???)	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> CoreServices
> 0x90720000 - 0x90787fff com.apple.audio.CoreAudio  
> 2.1.2	/System/Library/Frameworks/CoreAudio.framework/Versions/A/ 
> CoreAudio
> 0x907f0000 - 0x907f9fff com.apple.DiskArbitration  
> 2.0.3	/System/Library/PrivateFrameworks/DiskArbitration.framework/ 
> Versions/A/DiskArbitration
> 0x90810000 - 0x90810fff com.apple.ApplicationServices 1.0  
> (???)	/System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/ApplicationServices
> 0x90910000 - 0x90983fff com.apple.DesktopServices  
> 1.2.2	/System/Library/PrivateFrameworks/DesktopServicesPriv.framework/ 
> Versions/A/DesktopServicesPriv
> 0x90d00000 - 0x90d1bfff com.apple.SystemConfiguration 1.7.1  
> (???)	/System/Library/Frameworks/SystemConfiguration.framework/ 
> Versions/A/SystemConfiguration
> 0x90d40000 - 0x90d40fff com.apple.Carbon 10.3  
> (???)	/System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
> 0x910b0000 - 0x910fffff com.apple.bom 1.2.4  
> (63)	/System/Library/PrivateFrameworks/Bom.framework/Versions/A/Bom
> 0x912a0000 - 0x912bdfff com.apple.audio.SoundManager  
> 3.8	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> CarbonSound.framework/Versions/A/CarbonSound
> 0x912e0000 - 0x912f7fff com.apple.LangAnalysis  
> 1.5.4	/System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
> 0x91320000 - 0x913defff ColorSync  
> 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/ColorSync.framework/Versions/A/ColorSync
> 0x91460000 - 0x91473fff com.apple.speech.synthesis.framework  
> 3.2	/System/Library/Frameworks/ApplicationServices.framework/Versions/ 
> A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
> 0x914a0000 - 0x91509fff com.apple.htmlrendering  
> 1.1.2	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/HTMLRendering.framework/Versions/A/HTMLRendering
> 0x91560000 - 0x91619fff com.apple.QD 3.4.64  
> (???)	/System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/Frameworks/QD.framework/Versions/A/QD
> 0x91670000 - 0x916a8fff com.apple.AE  
> 1.3.2	/System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/Frameworks/AE.framework/Versions/A/AE
> 0x916e0000 - 0x91773fff com.apple.print.framework.PrintCore  
> 3.3	/System/Library/Frameworks/ApplicationServices.framework/Versions/ 
> A/Frameworks/PrintCore.framework/Versions/A/PrintCore
> 0x917e0000 - 0x917f0fff com.apple.speech.recognition.framework  
> 3.3	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> SpeechRecognition.framework/Versions/A/SpeechRecognition
> 0x91810000 - 0x9182afff com.apple.openscripting 1.2.1  
> (???)	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/OpenScripting.framework/Versions/A/OpenScripting
> 0x91850000 - 0x91860fff com.apple.ImageCapture  
> 2.1.0	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/ImageCapture.framework/Versions/A/ImageCapture
> 0x91890000 - 0x9189cfff com.apple.help  
> 1.0.1	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/Help.framework/Versions/A/Help
> 0x918c0000 - 0x918cdfff com.apple.CommonPanels 1.2.1  
> (1.0)	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/CommonPanels.framework/Versions/A/CommonPanels
> 0x918f0000 - 0x9193efff com.apple.print.framework.Print  
> 3.3	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> Print.framework/Versions/A/Print
> 0x91990000 - 0x9199bfff com.apple.securityhi 1.2  
> (90)	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/SecurityHI.framework/Versions/A/SecurityHI
> 0x919c0000 - 0x91a33fff com.apple.NavigationServices  
> 3.3.1	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/NavigationServices.framework/Versions/A/NavigationServices
> 0x91ab0000 - 0x91ac4fff libCGATS.A.dylib  
> 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/CoreGraphics.framework/Versions/A/Resources/ 
> libCGATS.A.dylib
> 0x91ae0000 - 0x91aebfff libCSync.A.dylib  
> 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/CoreGraphics.framework/Versions/A/Resources/ 
> libCSync.A.dylib
> 0x91b10000 - 0x91b2afff libPDFRIP.A.dylib  
> 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/CoreGraphics.framework/Versions/A/Resources/ 
> libPDFRIP.A.dylib
> 0x91b50000 - 0x91b5ffff libPSRIP.A.dylib  
> 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/CoreGraphics.framework/Versions/A/Resources/ 
> libPSRIP.A.dylib
> 0x91b80000 - 0x91b93fff libRIP.A.dylib  
> 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
> 0x91bb0000 - 0x91d45fff com.apple.QuickTime  
> 6.5.1	/System/Library/Frameworks/QuickTime.framework/Versions/A/ 
> QuickTime
> 0x92070000 - 0x92096fff com.apple.FindByContent 1.4  
> (1.2)	/System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/Frameworks/FindByContent.framework/Versions/A/FindByContent
> 0x920c0000 - 0x922a7fff com.apple.security 2.3  
> (176)	/System/Library/Frameworks/Security.framework/Versions/A/ 
> Security
> 0x92430000 - 0x92468fff com.apple.LaunchServices 10.3.4  
> (98.2)	/System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/Frameworks/LaunchServices.framework/Versions/A/ 
> LaunchServices
> 0x92740000 - 0x92777fff com.apple.CFNetwork 1.2.1  
> (7)	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/CFNetwork.framework/Versions/A/CFNetwork
> 0x927d0000 - 0x92b54fff com.apple.HIToolbox 1.3.3  
> (???)	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/HIToolbox.framework/Versions/A/HIToolbox
> 0x92d30000 - 0x92d80fff com.apple.HIServices 1.4.1  
> (0.0.1d1)	/System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
> 0x935d0000 - 0x938a8fff com.apple.CoreGraphics 1.203.20  
> (???)	/System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
> 0x939a0000 - 0x939b4fff libcups.2.dylib 	/usr/lib/libcups.2.dylib
> 0x939d0000 - 0x939d4fff libmathCommon.A.dylib  
> 	/usr/lib/system/libmathCommon.A.dylib
> 0x94060000 - 0x94078fff com.apple.WebServices 1.1.1  
> (1.1.0)	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/WebServicesCore.framework/Versions/A/WebServicesCore
> 0x94120000 - 0x9414bfff libncurses.5.dylib 	/usr/lib/libncurses.5.dylib
> 0x945b0000 - 0x945b9fff libz.1.dylib 	/usr/lib/libz.1.dylib
> 0x94610000 - 0x9462afff libresolv.9.dylib 	/usr/lib/libresolv.9.dylib
> 0x94650000 - 0x946affff com.apple.SearchKit  
> 1.0.2	/System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/SearchKit.framework/Versions/A/SearchKit
> 0x94b20000 - 0x94badfff com.apple.ink.framework  
> 55.8	/System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/Ink.framework/Versions/A/Ink
> 0x954c0000 - 0x95ac6fff libBLAS.dylib  
> 	/System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
> 0x95b20000 - 0x95df0fff libLAPACK.dylib  
> 	/System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
> 0x95e40000 - 0x95eadfff libvDSP.dylib  
> 	/System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
> 0x95f00000 - 0x95f20fff libvMisc.dylib  
> 	/System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
> 0x968d0000 - 0x969b2fff libicucore.A.dylib 	/usr/lib/libicucore.A.dylib
> 0x96a20000 - 0x96ae2fff libcrypto.0.9.7.dylib  
> 	/usr/lib/libcrypto.0.9.7.dylib
> 0x96b40000 - 0x96b6efff libssl.0.9.7.dylib 	/usr/lib/libssl.0.9.7.dylib
> 0x96bf0000 - 0x96c7ffff ATS  
> 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/ATS.framework/Versions/A/ATS
> 0x96e80000 - 0x96e90fff com.apple.vecLib 3.0.1 (vecLib  
> 3.0.1)	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
> 0x97510000 - 0x97518fff libbsm.dylib 	/usr/lib/libbsm.dylib
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>
>
John Maindonald             email: john.maindonald@anu.edu.au
phone : +61 2 (6125)3473    fax  : +61 2(6125)5549
Centre for Bioinformation Science, Room 1194,
John Dedman Mathematical Sciences Building (Building 27)
Australian National University, Canberra ACT 0200.

From simon.urbanek at math.uni-augsburg.de  Thu Aug  5 20:14:49 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Thu Aug  5 20:15:24 2004
Subject: [R-SIG-Mac] lme4 crashes R
In-Reply-To: <FCE11E18-E6CD-11D8-A1AA-000A95CD7F02@sheffield.ac.uk>
References: <FCE11E18-E6CD-11D8-A1AA-000A95CD7F02@sheffield.ac.uk>
Message-ID: <56C70598-E70B-11D8-89F4-000A959F327E@math.uni-augsburg.de>

On Aug 5, 2004, at 12:55 PM, Andrew Beckerman wrote:

> has anyone had success at building and running the source distribution 
> of lme4 from CRAN on OSX?  I find that it builds, and will load as a 
> library, but running the lme example in lme4 causes R to crash - the 
> data file loads, the model appears to run, but attempting a summary() 
> or print() causes the crash.

It's a bug which is not OS X specific. Attached you'll find a patch 
with the fix. I suspect that the reason is that lme4 uses direct calls 
to C code of Matrix (why doesn't Matrix provide R-level interface for 
this? I thought calling C code of another package is strongly 
discouraged...), the interface changed and one of those calls was not 
fixed.

Cheers,
Simon

(CC to maintainers in case they didn't find out yet ;)).

-------------- next part --------------
A non-text attachment was scrubbed...
Name: lme4.fix.diff
Type: application/octet-stream
Size: 562 bytes
Desc: not available
Url : https://www.stat.math.ethz.ch/pipermail/r-sig-mac/attachments/20040805/5a9d5eb4/lme4.fix.obj
From a.beckerman at sheffield.ac.uk  Fri Aug  6 09:39:48 2004
From: a.beckerman at sheffield.ac.uk (Andrew Beckerman)
Date: Fri Aug  6 09:40:23 2004
Subject: [R-SIG-Mac] lme4 crashes R
In-Reply-To: <56C70598-E70B-11D8-89F4-000A959F327E@math.uni-augsburg.de>
References: <FCE11E18-E6CD-11D8-A1AA-000A95CD7F02@sheffield.ac.uk>
	<56C70598-E70B-11D8-89F4-000A959F327E@math.uni-augsburg.de>
Message-ID: <CB8E11C8-E77B-11D8-A515-000A95CD7F02@sheffield.ac.uk>

Thanks to all of you..... even if the details are a bit over my head.   
As for using lme4, the fix that simon has provided.... what does it  
replace? the lme4 file in library/lme4/R/?

many thanks
a


On 5 Aug 2004, at 19:14, Simon Urbanek wrote:

> On Aug 5, 2004, at 12:55 PM, Andrew Beckerman wrote:
>
>> has anyone had success at building and running the source  
>> distribution of lme4 from CRAN on OSX?  I find that it builds, and  
>> will load as a library, but running the lme example in lme4 causes R  
>> to crash - the data file loads, the model appears to run, but  
>> attempting a summary() or print() causes the crash.
>
> It's a bug which is not OS X specific. Attached you'll find a patch  
> with the fix. I suspect that the reason is that lme4 uses direct calls  
> to C code of Matrix (why doesn't Matrix provide R-level interface for  
> this? I thought calling C code of another package is strongly  
> discouraged...), the interface changed and one of those calls was not  
> fixed.
>
> Cheers,
> Simon
>
> (CC to maintainers in case they didn't find out yet ;)).
>
> <lme4.fix.diff>
------------------------------------------------------------------------ 
---------
Dr. Andrew Beckerman
Department of Animal and Plant Sciences, University of Sheffield,
Alfred Denny Building, Western Bank, Sheffield S10 2TN, UK
ph +44 (0)114 222 0026; fx +44 (0)114 222 0002
http://www.shef.ac.uk/beckslab
------------------------------------------------------------------------ 
----------

From bates at wisc.edu  Thu Aug  5 22:36:37 2004
From: bates at wisc.edu (Douglas Bates)
Date: Fri Aug  6 14:03:59 2004
Subject: [R-SIG-Mac] lme4 crashes R
In-Reply-To: <56C70598-E70B-11D8-89F4-000A959F327E@math.uni-augsburg.de>
References: <FCE11E18-E6CD-11D8-A1AA-000A95CD7F02@sheffield.ac.uk>
	<56C70598-E70B-11D8-89F4-000A959F327E@math.uni-augsburg.de>
Message-ID: <41129A55.7070001@wisc.edu>

Simon Urbanek wrote:
> On Aug 5, 2004, at 12:55 PM, Andrew Beckerman wrote:
> 
>> has anyone had success at building and running the source distribution 
>> of lme4 from CRAN on OSX?  I find that it builds, and will load as a 
>> library, but running the lme example in lme4 causes R to crash - the 
>> data file loads, the model appears to run, but attempting a summary() 
>> or print() causes the crash.
> 
> 
> It's a bug which is not OS X specific. Attached you'll find a patch with 
> the fix. I suspect that the reason is that lme4 uses direct calls to C 
> code of Matrix (why doesn't Matrix provide R-level interface for this? I 
> thought calling C code of another package is strongly discouraged...), 
> the interface changed and one of those calls was not fixed.

The reason that the R code in lme4 calls C code from the Matrix package 
directly is the usual reason - efficiency - and an unusual reason - some 
of the C code in for use with the lme4 models requires access to some of 
the sparse matrix code in C.  You can have an R function in package A 
call a C function in package B but you can't have a C function in 
package A call a C function in package B.  Thus we need to put all the C 
code for the lme4 package in the Matrix package.

Thanks for the reminder.

From duncan at wald.ucdavis.edu  Fri Aug  6 14:17:52 2004
From: duncan at wald.ucdavis.edu (Duncan Temple Lang)
Date: Fri Aug  6 14:17:58 2004
Subject: [R-SIG-Mac] lme4 crashes R
In-Reply-To: <41129A55.7070001@wisc.edu>
References: <FCE11E18-E6CD-11D8-A1AA-000A95CD7F02@sheffield.ac.uk>
	<56C70598-E70B-11D8-89F4-000A959F327E@math.uni-augsburg.de>
	<41129A55.7070001@wisc.edu>
Message-ID: <20040806121752.GA3636@wald.ucdavis.edu>

For what its worth, I'll just mention the small point that this is
place where the registration mechanism for routines 
access via the .Call/.C/.Fortran/.External would help.

The change is
-          sc = .Call("ssclme_sigma", object, PACKAGE = "Matrix")
+          sc = .Call("ssclme_sigma", object, REML, PACKAGE = "Matrix")
and if ssclme_sigma  were registered with the entry

  {"ssclme_sigma", (DL_FUNC) &ssclme_sigma, 2}

the .Call() mechanism would throw an error in the case that the routine was called
with only one argument.  Type information is also specifiable.

As I say, just a small point.

 D.


Douglas Bates wrote:
> Simon Urbanek wrote:
> >On Aug 5, 2004, at 12:55 PM, Andrew Beckerman wrote:
> >
> >>has anyone had success at building and running the source distribution 
> >>of lme4 from CRAN on OSX?  I find that it builds, and will load as a 
> >>library, but running the lme example in lme4 causes R to crash - the 
> >>data file loads, the model appears to run, but attempting a summary() 
> >>or print() causes the crash.
> >
> >
> >It's a bug which is not OS X specific. Attached you'll find a patch with 
> >the fix. I suspect that the reason is that lme4 uses direct calls to C 
> >code of Matrix (why doesn't Matrix provide R-level interface for this? I 
> >thought calling C code of another package is strongly discouraged...), 
> >the interface changed and one of those calls was not fixed.
> 
> The reason that the R code in lme4 calls C code from the Matrix package 
> directly is the usual reason - efficiency - and an unusual reason - some 
> of the C code in for use with the lme4 models requires access to some of 
> the sparse matrix code in C.  You can have an R function in package A 
> call a C function in package B but you can't have a C function in 
> package A call a C function in package B.  Thus we need to put all the C 
> code for the lme4 package in the Matrix package.
> 
> Thanks for the reminder.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Duncan Temple Lang                        duncan@wald.ucdavis.edu
 371, Kerr Hall
 University of California at Davis

Phone: (530) 752-4782
FAX:   (530) 752-7099


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 184 bytes
Desc: not available
Url : https://www.stat.math.ethz.ch/pipermail/r-sig-mac/attachments/20040806/cbe7b006/attachment.bin
From deleeuw at stat.ucla.edu  Tue Aug 10 19:20:31 2004
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Tue Aug 10 19:20:35 2004
Subject: [R-SIG-Mac] Two pieces of news
Message-ID: <94DDC936-EAF1-11D8-8CDF-000A95A67E82@stat.ucla.edu>

From: Robert van de Geijn <rvdg@cs.utexas.edu>
===
We have been building a mechanism that will allow us to now quickly  
redevelop LAPACK from scratch.  We will slowly add functionality, as  
time goes on.
Right now, we have a lot of functionality, but only the dgeqrf lapack  
to flame interface.  So, if you want to take a faster dgeqrf for a  
spin, check out
http://www.cs.utexas.edu/users/flame/Downloads

If you would like to create ".a" files for the G5 for us, we would be  
happy to provide source!
===
We are very pleased to announce that Kazushige Goto, of GOTO BLAS fame,  
has decided to rejoin The University of Texas at Austin as a permanent  
member of the Texas Advanced Computing Center (TACC).
Many of you have used his BLAS.  What few people know is that while  
Kazushige worked full-time on these libraries during the 2002-2003  
academic year (when he visited me at UT-Austin), he has only had the  
chance to work on them as a hobby since his return to Japan.  Kazushige  
has had a full-time job unrelated to High-Performance Computing during  
the day.  He has commuted three hours a day to this job.  And he has a  
two year old child who enjoys unplugging his numerous workstations in  
his apartment.  As a result, he has worked his magic only a few hours a  
week.  Yet he has demonstrated that his libraries are superior to all  
academic efforts and to most industrial efforts, on essentially all  
platforms.  It will be interesting to see what happens to his  
productivity when he can unleash his talents full-time.  Needless to  
say, we await his return with anticipation.

For additional information, kindly visit http://www.tacc.utexas.edu/  
and look under "Press" for the press release.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 8130 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From deleeuw at stat.ucla.edu  Wed Aug 11 19:03:11 2004
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Wed Aug 11 19:03:18 2004
Subject: [R-SIG-Mac] Fwd: auto-vectorizing gcc 3.5
Message-ID: <536EF8C5-EBB8-11D8-95D5-000A95A67E82@stat.ucla.edu>

This is gcc-3.5 and gfortran-3.5 with altivec
auto-vectorization.

http://hpc.sourceforge.net/

Begin forwarded message:

> From: Gaurav Khanna <gkhanna@UMassD.Edu>
> Date: August 11, 2004 9:37:09 AM PDT
> To: deleeuw@stat.ucla.edu
> Subject: auto-vectorizing gcc 3.5
>
> Jan
>
> I have placed some binaries that can vectorize
> simple code on hpc.sf.net .. I recall that you had
> expressed some interest in that.
>
> Take a look, when you get a chance. I also have
> a link to current information regarding this
> effort. It is indeed the case, that Apple and IBM
> are taking the lead in developing auto-vectorizing
> compilers for the PowerPC with AltiVec.
>
> Best
> Gaurav
>
>
>
>
> Assistant Professor
> Physics, UMassD.
> 508-910-6605
>
> "Black holes are where God divided by zero."  - Steven Wright
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 8130 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 1754 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20040811/ea39ef22/attachment.bin
From bellis at hsph.harvard.edu  Fri Aug 13 21:53:32 2004
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Fri Aug 13 21:53:37 2004
Subject: [R-SIG-Mac] R/Cocoa and DYLD_LIBRARY_PATH
Message-ID: <743B4572-ED62-11D8-AC26-000D93C24D64@hsph.harvard.edu>

So, I've been playing around with the R/Cocoa that Stefano posted and I 
think I have a reasonable solution to the DYLD_LIBRARY_PATH problem. 
For those playing along with our home game the basic problem is that 
the packages built pre-install are linked against 'libR.dylib' rather 
than a full path, as is the case with post-install packages which are 
linked against the installed framework (so they have a full path). The 
problem is that you cannot set DYLD_LIBRARY_PATH from within your 
program---dyld reads and processes DYLD_LIBRARY_PATH and friends before 
main() executes. While you can set an environment variable in the 
debugger, real users won't be running in the debugger.

To get around this problem in my personal install I went through (by 
hand *sigh*) and used install_name_tool to change libR.dylib to 
/Library/Frameworks/R.framework/Versions/2.0.0/lib/libR.dylib. This 
seems to do the trick and it seems like it would be pretty easy to add 
to the install process.

---
Byron Ellis (bellis@hsph.harvard.edu)
"Oook" -- The Librarian

From simon.urbanek at math.uni-augsburg.de  Sat Aug 14 00:05:57 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Sat Aug 14 00:06:01 2004
Subject: [R-SIG-Mac] R/Cocoa and DYLD_LIBRARY_PATH
In-Reply-To: <743B4572-ED62-11D8-AC26-000D93C24D64@hsph.harvard.edu>
References: <743B4572-ED62-11D8-AC26-000D93C24D64@hsph.harvard.edu>
Message-ID: <F41513D6-ED74-11D8-B76B-000A959F327E@math.uni-augsburg.de>

On Aug 13, 2004, at 9:53 PM, Byron Ellis wrote:

> So, I've been playing around with the R/Cocoa that Stefano posted and 
> I think I have a reasonable solution to the DYLD_LIBRARY_PATH problem.
> [...]
> To get around this problem in my personal install I went through (by 
> hand *sigh*) and used install_name_tool to change libR.dylib to 
> /Library/Frameworks/R.framework/Versions/2.0.0/lib/libR.dylib. This 
> seems to do the trick and it seems like it would be pretty easy to add 
> to the install process.

Well, the problem here is that the missing full path is actually 
deliberate. The fact that newly compiled packages have the full path 
could be considered a bug. The original idea was to allow relocatable 
R.framework. In fact the first framework builds of R contained the full 
paths and we fixed it to make it more flexible (thought the 
post-install linking is not fixed yet).

I'm still not sure if all R users can have write access to 
/Library/Frameworks (our default fixed location), so I think the 
relocation is a good idea. The main problem is due to the binary 
distribution - regular Mac users don't even have dev tools installed, 
so they'll use pre-compiled binaries and using fixed paths in binaries 
has its issues.

So what are the options? Using a stub that sets all appropriate 
variables ... well I hope that we can do without it, but it's 
definitely the ultima ratio. Should we use environment.plist? Well, 
that would solve it for specific users, but that's probably not a good 
idea in most multi-user environments. Should we set the variable 
globally? Theoretically this could affect some other applications and 
practically it makes the use of multiple R versions rather cumbersome.

IMHO the optimal solution is to use LSEnvironment dictionary in the 
bundle - this allows us to set the path directly in the .app. This has 
one big benefit: the app will determine which framework will be used. 
This way you can have multiple apps, each using a different framework 
even though the binary is the same. Personally I'd supply R_HOME, too, 
to avoid the hacks for determining R_HOME from the used library. I 
think this solution is quite clean and allows relocatable framework (of 
course we'll have to fix the compiling of new packages so it doesn't 
use the full path).

This is an example from the Info.plist of my RCocoa.app that works:
         <key>LSEnvironment</key>
         <dict>
                 <key>R_HOME</key>
                 
<string>/Library/Frameworks/R.framework/Resources</string>
                 <key>DYLD_FALLBACK_LIBRARY_PATH</key>
                 
<string>/Library/Frameworks/R.framework/Resources/bin</string>
                 <key>DYLD_LIBRARY_PATH</key>
                 
<string>/Library/Frameworks/R.framework/Resources/bin</string>
         </dict>
In practice we may want to use the full absolute paths during the 
installation of RCocoa.app - the above simply takes the "Current" 
version - dunno if that's what we'll supply in the end...

Cheers,
Simon

---
Simon Urbanek
Department of computer oriented statistics and data analysis
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2280

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 3403 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20040814/87f089d3/attachment.bin
From jago at mclink.it  Sat Aug 14 01:37:52 2004
From: jago at mclink.it (stefano iacus)
Date: Sat Aug 14 01:38:08 2004
Subject: [R-SIG-Mac] R/Cocoa and DYLD_LIBRARY_PATH
In-Reply-To: <F41513D6-ED74-11D8-B76B-000A959F327E@math.uni-augsburg.de>
References: <743B4572-ED62-11D8-AC26-000D93C24D64@hsph.harvard.edu>
	<F41513D6-ED74-11D8-B76B-000A959F327E@math.uni-augsburg.de>
Message-ID: <CB962F0A-ED81-11D8-A176-000A95C87F66@mclink.it>


On Aug 14, 2004, at 12:05 AM, Simon Urbanek wrote:

> On Aug 13, 2004, at 9:53 PM, Byron Ellis wrote:
>
>> So, I've been playing around with the R/Cocoa that Stefano posted and 
>> I think I have a reasonable solution to the DYLD_LIBRARY_PATH 
>> problem.
>> [...]
>> To get around this problem in my personal install I went through (by 
>> hand *sigh*) and used install_name_tool to change libR.dylib to 
>> /Library/Frameworks/R.framework/Versions/2.0.0/lib/libR.dylib. This 
>> seems to do the trick and it seems like it would be pretty easy to 
>> add to the install process.
>
> Well, the problem here is that the missing full path is actually 
> deliberate. The fact that newly compiled packages have the full path 
> could be considered a bug. The original idea was to allow relocatable 
> R.framework. In fact the first framework builds of R contained the 
> full paths and we fixed it to make it more flexible (thought the 
> post-install linking is not fixed yet).
>
> I'm still not sure if all R users can have write access to 
> /Library/Frameworks (our default fixed location), so I think the 
> relocation is a good idea. The main problem is due to the binary 
> distribution - regular Mac users don't even have dev tools installed, 
> so they'll use pre-compiled binaries and using fixed paths in binaries 
> has its issues.
>
> So what are the options? Using a stub that sets all appropriate 
> variables ... well I hope that we can do without it, but it's 
> definitely the ultima ratio. Should we use environment.plist? Well, 
> that would solve it for specific users, but that's probably not a good 
> idea in most multi-user environments. Should we set the variable 
> globally? Theoretically this could affect some other applications and 
> practically it makes the use of multiple R versions rather cumbersome.
>
> IMHO the optimal solution is to use LSEnvironment dictionary in the 
> bundle - this allows us to set the path directly in the .app.

Yes, absolutely.

> This has one big benefit: the app will determine which framework will 
> be used. This way you can have multiple apps, each using a different 
> framework even though the binary is the same. Personally I'd supply 
> R_HOME, too, to avoid the hacks for determining R_HOME from the used 
> library. I think this solution is quite clean and allows relocatable 
> framework (of course we'll have to fix the compiling of new packages 
> so it doesn't use the full path).
>
> This is an example from the Info.plist of my RCocoa.app that works:
>         <key>LSEnvironment</key>
>         <dict>
>                 <key>R_HOME</key>
>                 
> <string>/Library/Frameworks/R.framework/Resources</string>
>                 <key>DYLD_FALLBACK_LIBRARY_PATH</key>
>                 
> <string>/Library/Frameworks/R.framework/Resources/bin</string>
>                 <key>DYLD_LIBRARY_PATH</key>
>                 
> <string>/Library/Frameworks/R.framework/Resources/bin</string>
>         </dict>
> In practice we may want to use the full absolute paths during the 
> installation of RCocoa.app - the above simply takes the "Current" 
> version - dunno if that's what we'll supply in the end...

Well, I think that for the distributed binary we need to assume the 
"standard" location. The above works for me too.
I think we need to assume that binary distribution of both the 
application and the packages, is for average Mac users not aware of 
what a compiler is, nor an environment variable. So we need to provide 
an installer with the framework, the R.app and binary packages on CRAN 
should fit with this.
Expert users can build their versions of the the R.framework, of the 
R.app and the packages.


BTW, I've uploaded a new version (only the project, 214KB). I've 
implemented few things in due curse (tool bar, clickable history, etc) 
and I've re-implemented the buffered output writing asin the Carbon 
R.app, which speeds up the thing a lot. I still did not write the code 
for menus, but the whole setup seems ok to me.

To get it, go directly at http://www.economia.unimi.it/R/RApp.dmg   as 
I did not yet prepared a text on that page.

stefano

>
> Cheers,
> Simon
>
> ---
> Simon Urbanek
> Department of computer oriented statistics and data analysis
> Universit?tsstr. 14
> 86135 Augsburg
> Germany
>
> Tel: +49-821-598-2236
> Fax: +49-821-598-2280
>
> Simon.Urbanek@Math.Uni-Augsburg.de
> http://simon.urbanek.info
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

From bellis at hsph.harvard.edu  Sat Aug 14 02:23:12 2004
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Sat Aug 14 02:23:28 2004
Subject: [R-SIG-Mac] R/Cocoa and DYLD_LIBRARY_PATH
In-Reply-To: <F41513D6-ED74-11D8-B76B-000A959F327E@math.uni-augsburg.de>
References: <743B4572-ED62-11D8-AC26-000D93C24D64@hsph.harvard.edu>
	<F41513D6-ED74-11D8-B76B-000A959F327E@math.uni-augsburg.de>
Message-ID: <2073EC91-ED88-11D8-AC26-000D93C24D64@hsph.harvard.edu>

AHHHH! I spent some time trying to figure out if such a beast existed, 
but I didn't see it. Thats much better than messing with install_name 
paths and the like.


On Aug 13, 2004, at 6:05 PM, Simon Urbanek wrote:

>
> IMHO the optimal solution is to use LSEnvironment dictionary in the 
> bundle - this allows us to set the path directly in the .app. This has 
> one big benefit: the app will determine which framework will be used. 
> This way you can have multiple apps, each using a different framework 
> even though the binary is the same. Personally I'd supply R_HOME, too, 
> to avoid the hacks for determining R_HOME from the used library. I 
> think this solution is quite clean and allows relocatable framework 
> (of course we'll have to fix the compiling of new packages so it 
> doesn't use the full path).
>
> This is an example from the Info.plist of my RCocoa.app that works:
>         <key>LSEnvironment</key>
>         <dict>
>                 <key>R_HOME</key>
>                 
> <string>/Library/Frameworks/R.framework/Resources</string>
>                 <key>DYLD_FALLBACK_LIBRARY_PATH</key>
>                 
> <string>/Library/Frameworks/R.framework/Resources/bin</string>
>                 <key>DYLD_LIBRARY_PATH</key>
>                 
> <string>/Library/Frameworks/R.framework/Resources/bin</string>
>         </dict>
> In practice we may want to use the full absolute paths during the 
> installation of RCocoa.app - the above simply takes the "Current" 
> version - dunno if that's what we'll supply in the end...
>
> Cheers,
> Simon
>
> ---
> Simon Urbanek
> Department of computer oriented statistics and data analysis
> Universit?tsstr. 14
> 86135 Augsburg
> Germany
>
> Tel: +49-821-598-2236
> Fax: +49-821-598-2280
>
> Simon.Urbanek@Math.Uni-Augsburg.de
> http://simon.urbanek.info
>
---
Byron Ellis (bellis@hsph.harvard.edu)
"Oook" -- The Librarian

From tiago17 at socrates.Berkeley.EDU  Mon Aug 16 00:51:05 2004
From: tiago17 at socrates.Berkeley.EDU (Tiago R Magalhaes)
Date: Mon Aug 16 00:51:17 2004
Subject: [R-SIG-Mac] R in ESS. Add R functions to menu with the init.el file.
Message-ID: <p06100500bd456fb7a89c@[83.132.28.132]>

Hi to you all

I have tried to have R working in Xemacs/ESS. I have installed both 
programs, tried to use R. I wanted to have some basic functions in 
the menu: change directory, load packages, save workspace, load 
worspace and such and wanted to have a init file that would allow me 
to do that.

I came across John Fox's init file (www. ) and that seems to be what 
I want, installing a new menu with functions as load packages, save 
workspace, change directory and so on.

I tried to use this as init file, but the file was done for PCs and 
althought I thought that ESS was platform independent I can't make 
the file to work. (Some of it works, but most of it and specially the 
new R menu isn't there)

If anyone has a "Mac John Fox" file or any file that would do this 
type of  R customization it would be wonderfully welcomed!

Thank you very much for any help.

I'm using a PowerBook G4 using Panther OS X. Xemacs 21.4 and ESS is 5.2.2.

From simon.urbanek at math.uni-augsburg.de  Wed Aug 18 15:47:08 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Wed Aug 18 15:47:16 2004
Subject: [R-SIG-Mac] PDF-viewer device?
In-Reply-To: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
Message-ID: <19294574-F11D-11D8-B535-000A959F327E@math.uni-augsburg.de>

Byron,

since you had a look at that Cocoa graphics device - I have an idea for 
you :). The main drawback of all devices so far is that you have no way 
of getting consistent good-quality output of the plot. You can take a 
snapshot (bad quality) or you can re-run the display list in another 
device (different results), but you have never a true WYSIWYG. However 
on a Mac we can get this: use the regular PDF graphics device and 
render the file output in a widget. The big advantage is that you can 
tweak your plot commands so the plot looks the way you like it, you see 
the result and furthermore you know this is what you get in print, too. 
Presumably it should be possible to build a NSView (or whatever basis 
is convenient) to display a PDF file. The device itself would just 
generate the PDF via the pdf device and display it. Resizing etc. 
should work as expected thus giving you a true WYSIWYG experience. What 
do you think? Sure it's not the most efficient way, but finally I could 
actually see what my plot would look like in the publication - 
something which is a pain atm :). I wanted to look into this myself, 
but I have no time atm :( But maybe your Cocoa basis device would allow 
this easily if slightly modified.. or even your existing device could 
maybe switch between the "native" and PDF mode ...

Cheers,
Simon

From bellis at hsph.harvard.edu  Wed Aug 18 17:00:11 2004
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Wed Aug 18 17:00:23 2004
Subject: [R-SIG-Mac] PDF-viewer device?
In-Reply-To: <19294574-F11D-11D8-B535-000A959F327E@math.uni-augsburg.de>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
	<19294574-F11D-11D8-B535-000A959F327E@math.uni-augsburg.de>
Message-ID: <4DC3998A-F127-11D8-9C70-000D93C24D64@hsph.harvard.edu>

I agree, I want to drag things into Illustrator or Keynote and have 
everything look pretty. I have little hope for Word though. :-)

Actually, this is what the original StatPaper (from more than a year 
ago) did---it actually stored everything in an NSPDFImageRep and then 
just threw it up on the screen. It should be easy to make the current 
Cocoa device to do this since we can grab a real PDF from the NSView I 
think. failing that we can just double buffer and use the NSPDFImageRep 
(and maybe turn off NSView's offscreen buffer to save some memory), the 
actual graphics calls remain identical---we just [lock] and [unlock] a 
different context. Towards this end I've also been trying to exactly 
match the PDF device with the Cocoa device (whose commandline in the 
version I'm moving to R-Cocoa lets you specify the ObjC class used for 
the calls, which is kinda cool)


On Aug 18, 2004, at 9:47 AM, Simon Urbanek wrote:

> Byron,
>
> since you had a look at that Cocoa graphics device - I have an idea 
> for you :). The main drawback of all devices so far is that you have 
> no way of getting consistent good-quality output of the plot. You can 
> take a snapshot (bad quality) or you can re-run the display list in 
> another device (different results), but you have never a true WYSIWYG. 
> However on a Mac we can get this: use the regular PDF graphics device 
> and render the file output in a widget. The big advantage is that you 
> can tweak your plot commands so the plot looks the way you like it, 
> you see the result and furthermore you know this is what you get in 
> print, too. Presumably it should be possible to build a NSView (or 
> whatever basis is convenient) to display a PDF file. The device itself 
> would just generate the PDF via the pdf device and display it. 
> Resizing etc. should work as expected thus giving you a true WYSIWYG 
> experience. What do you think? Sure it's not the most efficient way, 
> but finally I could actually see what my plot would look like in the 
> publication - something which is a pain atm :). I wanted to look into 
> this myself, but I have no time atm :( But maybe your Cocoa basis 
> device would allow this easily if slightly modified.. or even your 
> existing device could maybe switch between the "native" and PDF mode 
> ...
>
> Cheers,
> Simon
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
---
Byron Ellis (bellis@hsph.harvard.edu)
"Oook" -- The Librarian

From stefano.iacus at unimi.it  Wed Aug 18 18:53:23 2004
From: stefano.iacus at unimi.it (stefano iacus)
Date: Wed Aug 18 18:53:42 2004
Subject: [R-SIG-Mac] PDF-viewer device?
In-Reply-To: <4DC3998A-F127-11D8-9C70-000D93C24D64@hsph.harvard.edu>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
	<19294574-F11D-11D8-B535-000A959F327E@math.uni-augsburg.de>
	<4DC3998A-F127-11D8-9C70-000D93C24D64@hsph.harvard.edu>
Message-ID: <1DD7D765-F137-11D8-BE58-000A95C87F66@unimi.it>

What about interaction? i.e. locator() ?
stefano
On Aug 18, 2004, at 5:00 PM, Byron Ellis wrote:

> I agree, I want to drag things into Illustrator or Keynote and have 
> everything look pretty. I have little hope for Word though. :-)
>
> Actually, this is what the original StatPaper (from more than a year 
> ago) did---it actually stored everything in an NSPDFImageRep and then 
> just threw it up on the screen. It should be easy to make the current 
> Cocoa device to do this since we can grab a real PDF from the NSView I 
> think. failing that we can just double buffer and use the 
> NSPDFImageRep (and maybe turn off NSView's offscreen buffer to save 
> some memory), the actual graphics calls remain identical---we just 
> [lock] and [unlock] a different context. Towards this end I've also 
> been trying to exactly match the PDF device with the Cocoa device 
> (whose commandline in the version I'm moving to R-Cocoa lets you 
> specify the ObjC class used for the calls, which is kinda cool)
>
>
> On Aug 18, 2004, at 9:47 AM, Simon Urbanek wrote:
>
>> Byron,
>>
>> since you had a look at that Cocoa graphics device - I have an idea 
>> for you :). The main drawback of all devices so far is that you have 
>> no way of getting consistent good-quality output of the plot. You can 
>> take a snapshot (bad quality) or you can re-run the display list in 
>> another device (different results), but you have never a true 
>> WYSIWYG. However on a Mac we can get this: use the regular PDF 
>> graphics device and render the file output in a widget. The big 
>> advantage is that you can tweak your plot commands so the plot looks 
>> the way you like it, you see the result and furthermore you know this 
>> is what you get in print, too. Presumably it should be possible to 
>> build a NSView (or whatever basis is convenient) to display a PDF 
>> file. The device itself would just generate the PDF via the pdf 
>> device and display it. Resizing etc. should work as expected thus 
>> giving you a true WYSIWYG experience. What do you think? Sure it's 
>> not the most efficient way, but finally I could actually see what my 
>> plot would look like in the publication - something which is a pain 
>> atm :). I wanted to look into this myself, but I have no time atm :( 
>> But maybe your Cocoa basis device would allow this easily if slightly 
>> modified.. or even your existing device could maybe switch between 
>> the "native" and PDF mode ...
>>
>> Cheers,
>> Simon
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac@stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
> ---
> Byron Ellis (bellis@hsph.harvard.edu)
> "Oook" -- The Librarian
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

From jago at mclink.it  Wed Aug 18 19:02:50 2004
From: jago at mclink.it (stefano iacus)
Date: Wed Aug 18 19:03:00 2004
Subject: [R-SIG-Mac] PDF-viewer device?
In-Reply-To: <4DC3998A-F127-11D8-9C70-000D93C24D64@hsph.harvard.edu>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
	<19294574-F11D-11D8-B535-000A959F327E@math.uni-augsburg.de>
	<4DC3998A-F127-11D8-9C70-000D93C24D64@hsph.harvard.edu>
Message-ID: <6FC31DDB-F138-11D8-BE58-000A95C87F66@mclink.it>

Let me also add this, that I wrote only to Simon:
One other reason, that comes to my mind now is that you cannot rended 
pdf until you close the device, this means that you cannot add 
interactively objects to the graph without rerending everything which 
seems not really efficient for me. Using pdf instead of quartz was my 
original idea, but this is one of the reasons that discouraged me...
We can probably add an "export" function when saving the quartz device 
graphics also for the clipboard copy. Ill add it to my to-do list.

stefano

On Aug 18, 2004, at 5:00 PM, Byron Ellis wrote:

> I agree, I want to drag things into Illustrator or Keynote and have 
> everything look pretty. I have little hope for Word though. :-)
>
> Actually, this is what the original StatPaper (from more than a year 
> ago) did---it actually stored everything in an NSPDFImageRep and then 
> just threw it up on the screen. It should be easy to make the current 
> Cocoa device to do this since we can grab a real PDF from the NSView I 
> think. failing that we can just double buffer and use the 
> NSPDFImageRep (and maybe turn off NSView's offscreen buffer to save 
> some memory), the actual graphics calls remain identical---we just 
> [lock] and [unlock] a different context. Towards this end I've also 
> been trying to exactly match the PDF device with the Cocoa device 
> (whose commandline in the version I'm moving to R-Cocoa lets you 
> specify the ObjC class used for the calls, which is kinda cool)
>
>
> On Aug 18, 2004, at 9:47 AM, Simon Urbanek wrote:
>
>> Byron,
>>
>> since you had a look at that Cocoa graphics device - I have an idea 
>> for you :). The main drawback of all devices so far is that you have 
>> no way of getting consistent good-quality output of the plot. You can 
>> take a snapshot (bad quality) or you can re-run the display list in 
>> another device (different results), but you have never a true 
>> WYSIWYG. However on a Mac we can get this: use the regular PDF 
>> graphics device and render the file output in a widget. The big 
>> advantage is that you can tweak your plot commands so the plot looks 
>> the way you like it, you see the result and furthermore you know this 
>> is what you get in print, too. Presumably it should be possible to 
>> build a NSView (or whatever basis is convenient) to display a PDF 
>> file. The device itself would just generate the PDF via the pdf 
>> device and display it. Resizing etc. should work as expected thus 
>> giving you a true WYSIWYG experience. What do you think? Sure it's 
>> not the most efficient way, but finally I could actually see what my 
>> plot would look like in the publication - something which is a pain 
>> atm :). I wanted to look into this myself, but I have no time atm :( 
>> But maybe your Cocoa basis device would allow this easily if slightly 
>> modified.. or even your existing device could maybe switch between 
>> the "native" and PDF mode ...
>>
>> Cheers,
>> Simon
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac@stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
> ---
> Byron Ellis (bellis@hsph.harvard.edu)
> "Oook" -- The Librarian
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

From bellis at hsph.harvard.edu  Thu Aug 19 18:11:54 2004
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Thu Aug 19 18:12:05 2004
Subject: [R-SIG-Mac] PDF-viewer device?
In-Reply-To: <6FC31DDB-F138-11D8-BE58-000A95C87F66@mclink.it>
References: <4695CE88-E586-11D8-9F2F-000D93C24D64@hsph.harvard.edu>
	<19294574-F11D-11D8-B535-000A959F327E@math.uni-augsburg.de>
	<4DC3998A-F127-11D8-9C70-000D93C24D64@hsph.harvard.edu>
	<6FC31DDB-F138-11D8-BE58-000A95C87F66@mclink.it>
Message-ID: <7D11849D-F1FA-11D8-9C70-000D93C24D64@hsph.harvard.edu>

I may actually have a way around this problem, hopefully I'll finish 
coding it today and let you know. It should also be completely general 
s.t. graphics device need not live in their own NSWindows (or even 
their own NSViews).

On Aug 18, 2004, at 1:02 PM, stefano iacus wrote:

> Let me also add this, that I wrote only to Simon:
> One other reason, that comes to my mind now is that you cannot rended 
> pdf until you close the device, this means that you cannot add 
> interactively objects to the graph without rerending everything which 
> seems not really efficient for me. Using pdf instead of quartz was my 
> original idea, but this is one of the reasons that discouraged me...
> We can probably add an "export" function when saving the quartz device 
> graphics also for the clipboard copy. Ill add it to my to-do list.
>
> stefano
>
> On Aug 18, 2004, at 5:00 PM, Byron Ellis wrote:
>
>> I agree, I want to drag things into Illustrator or Keynote and have 
>> everything look pretty. I have little hope for Word though. :-)
>>
>> Actually, this is what the original StatPaper (from more than a year 
>> ago) did---it actually stored everything in an NSPDFImageRep and then 
>> just threw it up on the screen. It should be easy to make the current 
>> Cocoa device to do this since we can grab a real PDF from the NSView 
>> I think. failing that we can just double buffer and use the 
>> NSPDFImageRep (and maybe turn off NSView's offscreen buffer to save 
>> some memory), the actual graphics calls remain identical---we just 
>> [lock] and [unlock] a different context. Towards this end I've also 
>> been trying to exactly match the PDF device with the Cocoa device 
>> (whose commandline in the version I'm moving to R-Cocoa lets you 
>> specify the ObjC class used for the calls, which is kinda cool)
>>
>>
>> On Aug 18, 2004, at 9:47 AM, Simon Urbanek wrote:
>>
>>> Byron,
>>>
>>> since you had a look at that Cocoa graphics device - I have an idea 
>>> for you :). The main drawback of all devices so far is that you have 
>>> no way of getting consistent good-quality output of the plot. You 
>>> can take a snapshot (bad quality) or you can re-run the display list 
>>> in another device (different results), but you have never a true 
>>> WYSIWYG. However on a Mac we can get this: use the regular PDF 
>>> graphics device and render the file output in a widget. The big 
>>> advantage is that you can tweak your plot commands so the plot looks 
>>> the way you like it, you see the result and furthermore you know 
>>> this is what you get in print, too. Presumably it should be possible 
>>> to build a NSView (or whatever basis is convenient) to display a PDF 
>>> file. The device itself would just generate the PDF via the pdf 
>>> device and display it. Resizing etc. should work as expected thus 
>>> giving you a true WYSIWYG experience. What do you think? Sure it's 
>>> not the most efficient way, but finally I could actually see what my 
>>> plot would look like in the publication - something which is a pain 
>>> atm :). I wanted to look into this myself, but I have no time atm :( 
>>> But maybe your Cocoa basis device would allow this easily if 
>>> slightly modified.. or even your existing device could maybe switch 
>>> between the "native" and PDF mode ...
>>>
>>> Cheers,
>>> Simon
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac@stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>> ---
>> Byron Ellis (bellis@hsph.harvard.edu)
>> "Oook" -- The Librarian
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac@stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
---
Byron Ellis (bellis@hsph.harvard.edu)
"Oook" -- The Librarian

From stefano.iacus at unimi.it  Sat Aug 28 08:58:03 2004
From: stefano.iacus at unimi.it (stefano iacus)
Date: Sat Aug 28 08:58:15 2004
Subject: [R-SIG-Mac] latest Cocoa GUI for R
Message-ID: <9B3CBA6A-F8BF-11D8-9085-000A95C87F66@unimi.it>

The latest snapshot of the new Cocoa GUI for R is available at 
http://www.economia.unimi.it/R

The new package installer is the most interesting news and some 
feedback on its use/bugs is welcome before release.

stefano

