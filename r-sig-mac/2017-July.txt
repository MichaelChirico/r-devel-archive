From simon.urbanek at r-project.org  Wed Jul  5 09:16:05 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 5 Jul 2017 09:16:05 +0200
Subject: [R-SIG-Mac] Package sf 0.5-0 on El Capitan or higher
In-Reply-To: <D0E4A476-36C2-4871-B327-D343D9327DA6@noaa.gov>
References: <E9E3814B-AB02-489C-86A6-9EE7CF3BAAA4@noaa.gov>
 <D0E4A476-36C2-4871-B327-D343D9327DA6@noaa.gov>
Message-ID: <46DE7B76-89A4-430B-8765-171BABBE4AFD@r-project.org>

Roy,

the reason sf binary is not on CRAN is that it fails checks:
https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/sf-00check.html

When/if this is addressed the binary will appear.

Cheers,
Simon



> On Jun 20, 2017, at 5:32 PM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> Hi All:
> 
> My apologies.  Some days the brain kicks in more slowly than others.  I was able to answer my own question.  Since a binary is not on CRAN,  I thought I would document what worked.
> 
> 1.  Get the needed frameworks from:
> 
> http://www.kyngchaos.com/software/frameworks
> 
> Make certain you have GDAL, GEOS and PROJ installed.  By default they are installed in /Library/Frameworks.
> 
> 2.  Download the source file from CRAN. 
> 
> 3. In a terminal, change directory to where the source file is located.
> 
> 4.  R CMD INSTALL sf_0.5-0.tar.gz --configure-args='-with-gdal-config=/Library/Frameworks/GDAL.framework/Versions/2.1/unix/bin/gdal-config -with-geos-config=/Library/Frameworks/GEOS.framework/Versions/3/unix/bin/geos-config'
> 
> If your version of the GDAL framework is different,  make the obvious change.
> 
> Is they any way to just directly get a binary on CRAN,  or only if they can build it on the CRAN machine?
> 
> Thanks,
> 
> -Roy
> 
>> On Jun 20, 2017, at 8:12 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>> 
>> Hi All:
>> 
>> I am interesting in getting the latest version of the package SF running on my Mac (macOS Sierra,  10.12.5, R version 3.4).  On CRAN only source is available for El Capitan or higher.  There are several places that suggest SF can be compiled after doing the necessary installs using "brew"  but I found that given my version of OS,  one or more of the brew packages failed.  I believe I have all the packages needed installed using the stuff from Kyngchaos,  but my efforts to set the compile directories correctly have not worked.
>> 
>> Has anyone been able to build this,  or have any suggestions on how to build it?
>> 
>> Thanks,
>> 
>> -Roy
>> 
>> 
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From macqueen1 at llnl.gov  Thu Jul  6 23:21:52 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Thu, 6 Jul 2017 21:21:52 +0000
Subject: [R-SIG-Mac] R 3.4.1 precompiled binary for Mac?
Message-ID: <23D89CC1-B971-4A99-B02D-52E67CE80420@llnl.gov>

Sorry, I first sent this to
   r-sig-mac-bounces at r-project.org
by mistake. Apologies for any spam-like effect.
-Don

Hi, the newest precompiled binary for Mac that I have been able to find on a CRAN mirror is 3.4.0. This wouldn?t be much of a concern; I don?t mind waiting. Except that:

(running in R 3.4.0)

require(sp)
Loading required package: sp
Warning message:
package 'sp' was built under R version 3.4.1

So, what are the prospects for a 3.4.1 binary on CRAN? Or am I somehow doing something wrong? I?ve hit ?Refresh? many times in my browser. Or am I just being impatient? (only about a week since R 3.4.1 was released)


The sp package was a binary install:

install.packages('sp')
Installing package into '/Users/macqueen1/Library/R/3.4/library'
(as 'lib' is unspecified)
--- Please select a CRAN mirror for use in this session ---
trying URL 'https://cran.cnr.berkeley.edu/bin/macosx/el-capitan/contrib/3.4/sp_1.2-5.tgz'
Content type 'application/x-gzip' length 1545668 bytes (1.5 MB)
==================================================
downloaded 1.5 MB

The downloaded binary packages are in
        /var/folders/ts/p_9qz7b54kb5sy2sfs7vtdwh001k0_/T//RtmpXfXSP3/downloaded_packages



Thanks
-Don

--
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062




-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062



From marc_schwartz at me.com  Thu Jul  6 23:34:54 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 06 Jul 2017 16:34:54 -0500
Subject: [R-SIG-Mac] R 3.4.1 precompiled binary for Mac?
In-Reply-To: <23D89CC1-B971-4A99-B02D-52E67CE80420@llnl.gov>
References: <23D89CC1-B971-4A99-B02D-52E67CE80420@llnl.gov>
Message-ID: <4701B737-60CA-434E-B9C0-CF1BB25C92F5@me.com>


> On Jul 6, 2017, at 4:21 PM, MacQueen, Don <macqueen1 at llnl.gov> wrote:
> 
> Sorry, I first sent this to
>   r-sig-mac-bounces at r-project.org
> by mistake. Apologies for any spam-like effect.
> -Don
> 
> Hi, the newest precompiled binary for Mac that I have been able to find on a CRAN mirror is 3.4.0. This wouldn?t be much of a concern; I don?t mind waiting. Except that:
> 
> (running in R 3.4.0)
> 
> require(sp)
> Loading required package: sp
> Warning message:
> package 'sp' was built under R version 3.4.1
> 
> So, what are the prospects for a 3.4.1 binary on CRAN? Or am I somehow doing something wrong? I?ve hit ?Refresh? many times in my browser. Or am I just being impatient? (only about a week since R 3.4.1 was released)
> 
> 
> The sp package was a binary install:
> 
> install.packages('sp')
> Installing package into '/Users/macqueen1/Library/R/3.4/library'
> (as 'lib' is unspecified)
> --- Please select a CRAN mirror for use in this session ---
> trying URL 'https://cran.cnr.berkeley.edu/bin/macosx/el-capitan/contrib/3.4/sp_1.2-5.tgz'
> Content type 'application/x-gzip' length 1545668 bytes (1.5 MB)
> ==================================================
> downloaded 1.5 MB
> 
> The downloaded binary packages are in
>        /var/folders/ts/p_9qz7b54kb5sy2sfs7vtdwh001k0_/T//RtmpXfXSP3/downloaded_packages
> 
> 
> 
> Thanks
> -Don



Hi Don,

I would imagine that it should be up soon. 

I might expect that with useR! 2017 going on in Brussels this week, along with DSC and R Foundation meetings, the binary build process for 3.4.1 may be delayed.

Regards,

Marc Schwartz


From macqueen1 at llnl.gov  Thu Jul  6 23:38:03 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Thu, 6 Jul 2017 21:38:03 +0000
Subject: [R-SIG-Mac] R 3.4.1 precompiled binary for Mac?
In-Reply-To: <4701B737-60CA-434E-B9C0-CF1BB25C92F5@me.com>
References: <23D89CC1-B971-4A99-B02D-52E67CE80420@llnl.gov>
 <4701B737-60CA-434E-B9C0-CF1BB25C92F5@me.com>
Message-ID: <9BA27B44-27E0-4F82-886D-887A491D91E8@llnl.gov>

That makes sense; thanks.
-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062


On 7/6/17, 2:34 PM, "Marc Schwartz" <marc_schwartz at me.com> wrote:

    
    > On Jul 6, 2017, at 4:21 PM, MacQueen, Don <macqueen1 at llnl.gov> wrote:
    > 
    > Sorry, I first sent this to
    >   r-sig-mac-bounces at r-project.org
    > by mistake. Apologies for any spam-like effect.
    > -Don
    > 
    > Hi, the newest precompiled binary for Mac that I have been able to find on a CRAN mirror is 3.4.0. This wouldn?t be much of a concern; I don?t mind waiting. Except that:
    > 
    > (running in R 3.4.0)
    > 
    > require(sp)
    > Loading required package: sp
    > Warning message:
    > package 'sp' was built under R version 3.4.1
    > 
    > So, what are the prospects for a 3.4.1 binary on CRAN? Or am I somehow doing something wrong? I?ve hit ?Refresh? many times in my browser. Or am I just being impatient? (only about a week since R 3.4.1 was released)
    > 
    > 
    > The sp package was a binary install:
    > 
    > install.packages('sp')
    > Installing package into '/Users/macqueen1/Library/R/3.4/library'
    > (as 'lib' is unspecified)
    > --- Please select a CRAN mirror for use in this session ---
    > trying URL 'https://cran.cnr.berkeley.edu/bin/macosx/el-capitan/contrib/3.4/sp_1.2-5.tgz'
    > Content type 'application/x-gzip' length 1545668 bytes (1.5 MB)
    > ==================================================
    > downloaded 1.5 MB
    > 
    > The downloaded binary packages are in
    >        /var/folders/ts/p_9qz7b54kb5sy2sfs7vtdwh001k0_/T//RtmpXfXSP3/downloaded_packages
    > 
    > 
    > 
    > Thanks
    > -Don
    
    
    
    Hi Don,
    
    I would imagine that it should be up soon. 
    
    I might expect that with useR! 2017 going on in Brussels this week, along with DSC and R Foundation meetings, the binary build process for 3.4.1 may be delayed.
    
    Regards,
    
    Marc Schwartz
    
    


From tim.bates at ed.ac.uk  Thu Jul  6 23:41:50 2017
From: tim.bates at ed.ac.uk (BATES Timothy)
Date: Thu, 6 Jul 2017 21:41:50 +0000
Subject: [R-SIG-Mac] http requests in help window blocked as insecure
Message-ID: <893ADA84-6F0A-4971-AB04-AFEC00234FC0@ed.ac.uk>

fyi, clicking on an http:// link in a help window (say a manual pdf) yields a deprecation warning now, so too does cmd+

starting httpd help server ... done
2017-07-06 22:27:11.219 R[33716:3185341] -deltaZ is deprecated for NSEventTypeMagnify.  Please use -magnification.
2017-07-06 22:30:46.726 R[33716:3190570] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.


PS: I am getting the freezeing behavior others have mentioned if dumping something big into the console, like a dataframe

tim
-- 
The University of Edinburgh is a charitable body, registered in
Scotland, with registration number SC005336.


From simon.urbanek at r-project.org  Fri Jul  7 13:18:25 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 7 Jul 2017 13:18:25 +0200
Subject: [R-SIG-Mac] R 3.4.1 precompiled binary for Mac?
In-Reply-To: <23D89CC1-B971-4A99-B02D-52E67CE80420@llnl.gov>
References: <23D89CC1-B971-4A99-B02D-52E67CE80420@llnl.gov>
Message-ID: <C8664D32-85FA-4298-91B5-5100A6A47553@r-project.org>

Don,

apologies for the delay, I was traveling (DSC/useR!) and we had an issue with the package signing of the R installer package that required direct access to the build machine so it couldn't be resolved until today. You can always use the nightly build from r.research.att.com (which doesn't require signing) - that one is used for the package builds.

Anyway, R 3.4.1 is now available from the main Mac server http://r.research.att.com/bin/macosx and will propagate to mirrors as they sync with the master.

Cheers,
Simon


> On Jul 6, 2017, at 11:21 PM, MacQueen, Don <macqueen1 at llnl.gov> wrote:
> 
> Sorry, I first sent this to
>   r-sig-mac-bounces at r-project.org
> by mistake. Apologies for any spam-like effect.
> -Don
> 
> Hi, the newest precompiled binary for Mac that I have been able to find on a CRAN mirror is 3.4.0. This wouldn?t be much of a concern; I don?t mind waiting. Except that:
> 
> (running in R 3.4.0)
> 
> require(sp)
> Loading required package: sp
> Warning message:
> package 'sp' was built under R version 3.4.1
> 
> So, what are the prospects for a 3.4.1 binary on CRAN? Or am I somehow doing something wrong? I?ve hit ?Refresh? many times in my browser. Or am I just being impatient? (only about a week since R 3.4.1 was released)
> 
> 
> The sp package was a binary install:
> 
> install.packages('sp')
> Installing package into '/Users/macqueen1/Library/R/3.4/library'
> (as 'lib' is unspecified)
> --- Please select a CRAN mirror for use in this session ---
> trying URL 'https://cran.cnr.berkeley.edu/bin/macosx/el-capitan/contrib/3.4/sp_1.2-5.tgz'
> Content type 'application/x-gzip' length 1545668 bytes (1.5 MB)
> ==================================================
> downloaded 1.5 MB
> 
> The downloaded binary packages are in
>        /var/folders/ts/p_9qz7b54kb5sy2sfs7vtdwh001k0_/T//RtmpXfXSP3/downloaded_packages
> 
> 
> 
> Thanks
> -Don
> 
> --
> Don MacQueen
> 
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> 
> 
> 
> 
> -- 
> Don MacQueen
> 
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From simon.urbanek at r-project.org  Fri Jul  7 13:22:11 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 7 Jul 2017 13:22:11 +0200
Subject: [R-SIG-Mac] http requests in help window blocked as insecure
In-Reply-To: <893ADA84-6F0A-4971-AB04-AFEC00234FC0@ed.ac.uk>
References: <893ADA84-6F0A-4971-AB04-AFEC00234FC0@ed.ac.uk>
Message-ID: <CD8F3988-378B-4DC1-A5FD-834C050A8026@r-project.org>


> On Jul 6, 2017, at 11:41 PM, BATES Timothy <tim.bates at ed.ac.uk> wrote:
> 
> fyi, clicking on an http:// link in a help window (say a manual pdf) yields a deprecation warning now, so too does cmd+
> 
> starting httpd help server ... done
> 2017-07-06 22:27:11.219 R[33716:3185341] -deltaZ is deprecated for NSEventTypeMagnify.  Please use -magnification.
> 2017-07-06 22:30:46.726 R[33716:3190570] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.
> 

Yes, for security reasons Apple doesn't allow http anymore - that's a system-wide setting. We use an exception for R help itself, but anything other than our help is not allowed and has to use SSL.


> PS: I am getting the freezeing behavior others have mentioned if dumping something big into the console, like a dataframe
> 

As noted this seems to be regression in macOS Sierra and Xcode 8.3, unfortunately. AFAICS it is an issue in the system/compiler and not in the GUI itself. I'll try to see if there is a a work-around we could use.

Thanks,
Simon


From simon.urbanek at r-project.org  Fri Jul  7 13:39:14 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 7 Jul 2017 13:39:14 +0200
Subject: [R-SIG-Mac] R commander fonts on R 3.4.0
In-Reply-To: <8AF15F28-9173-459E-82DE-15ED8D2DA102@r-project.org>
References: <A7AF5B04-73F7-4C51-9845-A1012B74FB13@upr.edu>
 <25322_1494369971_v49MkAbP032131_B9A2013C-D5EC-46D9-A1C5-CC8EA315539D@comcast.net>
 <D537E927.72B8%jfox@mcmaster.ca>
 <A1EF8067-15B5-4970-B83C-DC632B9E4C49@r-project.org>
 <FE3D31ED-E677-4D53-9E50-CABC328685BE@upr.edu>
 <A0054686-E83D-4C70-AC3B-A42A074F17A4@upr.edu>
 <9B2C2259-32A0-481C-9596-416615E69B1A@upr.edu>
 <FA20D234-368D-4C02-9057-68E9A69EAC1B@upr.edu>
 <8605F648-B967-408A-AF01-9443A2790CF9@upr.edu>
 <ACD1644AA6C67E4FBD0C350625508EC836668824@FHSDB2D11-2.csu.mcmaster.ca>
 <2E799797-8456-43C6-B681-BB2465F11A14@gmail.com>
 <57C6706E-6773-47F3-9051-A5FD3097CC07@gmail.com>
 <474B2FF5-5435-4F4D-9F67-BF2027D9E1C8@gmail.com>
 <AB3E7E39-449E-4B40-AD4C-7FE55FD44239@gmail.com>
 <8AF15F28-9173-459E-82DE-15ED8D2DA102@r-project.org>
Message-ID: <A6F0357B-7FDC-4922-86E8-4A3B21E2E145@r-project.org>

FWIW the issue should be resolved in R 3.4.1 - the default in Tcl/Tk is to build without Xft so for R 3.4.1 we have now re-build Tcl/Tk 8.6.6 binary with explicitly enabled Xft.

Cheers,
Simon


> On May 16, 2017, at 7:30 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> 
>> On May 16, 2017, at 12:20 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> Mystery solved after looking into the actual .pkg files. They simply contain a full Tcl/Tk which installs into /usr/local, which obviously affects anything that links it dynamically. I somehow thought that they would install somewhere separate. (Stop grinning, Simon!)
>> 
> 
> I'm not sure I understand the "they" - is it us? The difference in R 3.4.0 is that we are using everything from the system (and XQuartz) whereas before we were building dependencies ourselves before.
> 
> 
>> Anyways, the way forward must be to get Tcl/Tk compiled exactly as they were in 3.3.x.
>> 
> 
> R before 3.4.0 we used Tcl/Tk 8.6.0 for OS X Mavericks from 2013, for R 3.4.0 we are using Tcl/Tk 8.6.6 for El Capitan.
> 
> FWIW the config flags were
> --disable-corefoundation --disable-framework --disable-aqua --enable-64bit --with-tcl=/usr/local/lib --with-x --x-includes=/opt/X11/include --x-libraries=/opt/X11/lib CC=clang CXX=clang++
> 
> I have no idea what you are talking about here so if anyone has suggestions to test, let me know.
> 
> Cheers,
> Simon
> 
> 
> 
>> -pd
>> 
>> 
>> 
>> 
>>> On 16 May 2017, at 15:18 , peter dalgaard <pdalgd at gmail.com> wrote:
>>> 
>>> Double-checked: Indeed, installing 3.3-branch-mavericks.pkg enables xft on my local builds of R-patched and R-devel. Hmmmm......
>>> 
>>> -pd 
>>> 
>>>> On 16 May 2017, at 14:55 , peter dalgaard <pdalgd at gmail.com> wrote:
>>>> 
>>>> Curiouser and curiouser, now my local build of R-devel stopped using xft _without any recompile_ I swear that it worked before I installed R-3.4.0.pkg....
>>>> 
>>>> I have both /opt/local/ and /usr/local variants of Tcl/Tk 8.6 and only the former has wish8.6 understanding the tk::pkgconfig stuff, so there is plenty of room for confusion. The latter seems to be from Simon's site; the other one could be a MacPorts relic...
>>>> 
>>>> -pd
>>>> 
>>>>> On 16 May 2017, at 13:28 , peter dalgaard <pdalgd at gmail.com> wrote:
>>>>> 
>>>>> It's a build issue relating to Tcl/Tk, not specifically Rcmdr (Rcmdr does something slightly weird[*] with the fonts too, but this seems to be orthogonal to the ugly-font issue).
>>>>> 
>>>>> To see the issue quickly, try 
>>>>> 
>>>>> library(tcltk)
>>>>> .Tcl("::tk::pkgconfig get fontsystem")
>>>>> 
>>>>> With CRAN 3.3.3, I get 
>>>>> 
>>>>> <Tcl> xft 
>>>>> 
>>>>> and likewise with a local nightly build of R-devel, but CRAN 3.4.0 says
>>>>> 
>>>>>> .Tcl("::tk::pkgconfig get fontsystem")
>>>>> Error in .Tcl("::tk::pkgconfig get fontsystem") : 
>>>>> could not find function ".Tcl"
>>>>> 
>>>>> as does a local build of R-patched (???!!!). 
>>>>> 
>>>>> This is pretty weird. I'll see if I can dig up some more about where the difference is.
>>>>> 
>>>>> -pd
>>>>> 
>>>>> 
>>>>> 
>>>>> [*] Try library(tcltk); demo(tkfaq)  then library(Rcmdr) and watch the font change in the tkfaq window.
>>>>> 
>>>>> 
>>>>>> On 15 May 2017, at 23:17 , Fox, John <jfox at mcmaster.ca> wrote:
>>>>>> 
>>>>>> Dear Jose,
>>>>>> 
>>>>>> It's a bit difficult to respond to your latest messages because you sent so many of them.
>>>>>> 
>>>>>> I'm not entirely sure what's producing your font problems -- perhaps Simon will have some additional ideas -- but you should be aware that you can't load the Rcmdr package -- or, more generally, the tcltk package -- without XQuartz (or another X11 system). Normally, XQuartz should start automatically when the Rcmdr (or tcltk) package is loaded. That is, you should not have to start it separately.
>>>>>> 
>>>>>> It may help to know that the Rcmdr package selects its default dialog font by querying the default Tk font, via the command
>>>>>> 
>>>>>> 	tclvalue(.Tcl("font actual TkDefaultFont -family"))
>>>>>> 
>>>>>> and sets the font for commands and output by querying the default Tk fixed-width font:
>>>>>> 
>>>>>> 	tclvalue(.Tcl("font actual TkFixedFont -family"))
>>>>>> 
>>>>>> On my Macs, these are respectively the helvetica and courier fonts.
>>>>>> 
>>>>>> In any event, I'm glad that you seem to have solved your problem.
>>>>>> 
>>>>>> John
>>>>>> 
>>>>>>> -----Original Message-----
>>>>>>> From: Jose G Conde Santiago [mailto:jose.conde1 at upr.edu]
>>>>>>> Sent: Monday, May 15, 2017 3:18 PM
>>>>>>> To: Simon Urbanek <simon.urbanek at r-project.org>; Fox, John
>>>>>>> <jfox at mcmaster.ca>; r-sig-mac at r-project.org
>>>>>>> Subject: Re: [R-SIG-Mac] R commander fonts on R 3.4.0
>>>>>>> 
>>>>>>> When I run R without XQuartz, the text from the help screen renders
>>>>>>> well. I think the problem seems to be related to XQuartz.
>>>>>>> 
>>>>>>> Jos?
>>>>>>> 
>>>>>>> 
>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>> Professor, School of Medicine
>>>>>>> Director, CentIT2
>>>>>>> UPR Medical Sciences Campus
>>>>>>> 
>>>>>>> Tel  (787) 763-9401 Fax (787) 758-5206
>>>>>>> 
>>>>>>> Email: jose.conde1 at upr.edu
>>>>>>> 
>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>> 
>>>>>>>> On May 15, 2017, at 2:16 PM, Jose G Conde Santiago
>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>> 
>>>>>>>> ? and the same I get the same issue with R ?help? screens in my iMac.
>>>>>>> I cannot reproduce this in the macBook.
>>>>>>>> 
>>>>>>>> Jos?
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> <R help .png>
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>>> Catedr?tico, Escuela de Medicina
>>>>>>>> Director, CentIT2
>>>>>>>> Recinto de Ciencias M?dicas, UPR
>>>>>>>> 
>>>>>>>> Tel  (787) 763-9401  Fax (787) 758-5206
>>>>>>>> 
>>>>>>>> Correo electr?nico: jose.conde1 at upr.edu
>>>>>>>> 
>>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>>> 
>>>>>>>>> On May 15, 2017, at 2:14 PM, Jose G Conde Santiago
>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>>> 
>>>>>>>>> This is the actual resolutions.
>>>>>>>>> 
>>>>>>>>> Jos?
>>>>>>>>> 
>>>>>>>>> <Fonts 20 points.png>
>>>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>>>> Professor, School of Medicine
>>>>>>>>> Director, CentIT2
>>>>>>>>> UPR Medical Sciences Campus
>>>>>>>>> 
>>>>>>>>> Tel  (787) 763-9401 Fax (787) 758-5206
>>>>>>>>> 
>>>>>>>>> Email: jose.conde1 at upr.edu
>>>>>>>>> 
>>>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>>>> 
>>>>>>>>>> On May 15, 2017, at 12:31 PM, Jose G Conde Santiago
>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>>>> 
>>>>>>>>>> <Fonts 20 points.png>
>>>>>>>>> 
>>>>>>>> 
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>>> -- 
>>>>> Peter Dalgaard, Professor,
>>>>> Center for Statistics, Copenhagen Business School
>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>> Phone: (+45)38153501
>>>>> Office: A 4.23
>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> -- 
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>> 
>>> -- 
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From jose.conde1 at upr.edu  Fri Jul  7 17:55:14 2017
From: jose.conde1 at upr.edu (Jose G Conde Santiago)
Date: Fri, 7 Jul 2017 11:55:14 -0400
Subject: [R-SIG-Mac] R commander fonts on R 3.4.0
In-Reply-To: <A6F0357B-7FDC-4922-86E8-4A3B21E2E145@r-project.org>
References: <A7AF5B04-73F7-4C51-9845-A1012B74FB13@upr.edu>
 <25322_1494369971_v49MkAbP032131_B9A2013C-D5EC-46D9-A1C5-CC8EA315539D@comcast.net>
 <D537E927.72B8%jfox@mcmaster.ca>
 <A1EF8067-15B5-4970-B83C-DC632B9E4C49@r-project.org>
 <FE3D31ED-E677-4D53-9E50-CABC328685BE@upr.edu>
 <A0054686-E83D-4C70-AC3B-A42A074F17A4@upr.edu>
 <9B2C2259-32A0-481C-9596-416615E69B1A@upr.edu>
 <FA20D234-368D-4C02-9057-68E9A69EAC1B@upr.edu>
 <8605F648-B967-408A-AF01-9443A2790CF9@upr.edu>
 <ACD1644AA6C67E4FBD0C350625508EC836668824@FHSDB2D11-2.csu.mcmaster.ca>
 <2E799797-8456-43C6-B681-BB2465F11A14@gmail.com>
 <57C6706E-6773-47F3-9051-A5FD3097CC07@gmail.com>
 <474B2FF5-5435-4F4D-9F67-BF2027D9E1C8@gmail.com>
 <AB3E7E39-449E-4B40-AD4C-7FE55FD44239@gmail.com>
 <8AF15F28-9173-459E-82DE-15ED8D2DA102@r-project.org>
 <A6F0357B-7FDC-4922-86E8-4A3B21E2E145@r-project.org>
Message-ID: <7CC9A269-90C4-486A-89F0-929D7A435BD5@upr.edu>

Great.

Thank you Peter, Simon, David, John, and all.

Jos?

Jos? G. Conde, MD, MPH
Professor, School of Medicine
Director, CentIT2
UPR Medical Sciences Campus 

Tel  (787) 763-9401 Fax (787) 758-5206

Email: jose.conde1 at upr.edu

URL: http://rcmi.rcm.upr.edu

> On Jul 7, 2017, at 7:39 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> FWIW the issue should be resolved in R 3.4.1 - the default in Tcl/Tk is to build without Xft so for R 3.4.1 we have now re-build Tcl/Tk 8.6.6 binary with explicitly enabled Xft.
> 
> Cheers,
> Simon
> 
> 
>> On May 16, 2017, at 7:30 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> 
>>> On May 16, 2017, at 12:20 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>>> 
>>> Mystery solved after looking into the actual .pkg files. They simply contain a full Tcl/Tk which installs into /usr/local, which obviously affects anything that links it dynamically. I somehow thought that they would install somewhere separate. (Stop grinning, Simon!)
>>> 
>> 
>> I'm not sure I understand the "they" - is it us? The difference in R 3.4.0 is that we are using everything from the system (and XQuartz) whereas before we were building dependencies ourselves before.
>> 
>> 
>>> Anyways, the way forward must be to get Tcl/Tk compiled exactly as they were in 3.3.x.
>>> 
>> 
>> R before 3.4.0 we used Tcl/Tk 8.6.0 for OS X Mavericks from 2013, for R 3.4.0 we are using Tcl/Tk 8.6.6 for El Capitan.
>> 
>> FWIW the config flags were
>> --disable-corefoundation --disable-framework --disable-aqua --enable-64bit --with-tcl=/usr/local/lib --with-x --x-includes=/opt/X11/include --x-libraries=/opt/X11/lib CC=clang CXX=clang++
>> 
>> I have no idea what you are talking about here so if anyone has suggestions to test, let me know.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> -pd
>>> 
>>> 
>>> 
>>> 
>>>> On 16 May 2017, at 15:18 , peter dalgaard <pdalgd at gmail.com> wrote:
>>>> 
>>>> Double-checked: Indeed, installing 3.3-branch-mavericks.pkg enables xft on my local builds of R-patched and R-devel. Hmmmm......
>>>> 
>>>> -pd 
>>>> 
>>>>> On 16 May 2017, at 14:55 , peter dalgaard <pdalgd at gmail.com> wrote:
>>>>> 
>>>>> Curiouser and curiouser, now my local build of R-devel stopped using xft _without any recompile_ I swear that it worked before I installed R-3.4.0.pkg....
>>>>> 
>>>>> I have both /opt/local/ and /usr/local variants of Tcl/Tk 8.6 and only the former has wish8.6 understanding the tk::pkgconfig stuff, so there is plenty of room for confusion. The latter seems to be from Simon's site; the other one could be a MacPorts relic...
>>>>> 
>>>>> -pd
>>>>> 
>>>>>> On 16 May 2017, at 13:28 , peter dalgaard <pdalgd at gmail.com> wrote:
>>>>>> 
>>>>>> It's a build issue relating to Tcl/Tk, not specifically Rcmdr (Rcmdr does something slightly weird[*] with the fonts too, but this seems to be orthogonal to the ugly-font issue).
>>>>>> 
>>>>>> To see the issue quickly, try 
>>>>>> 
>>>>>> library(tcltk)
>>>>>> .Tcl("::tk::pkgconfig get fontsystem")
>>>>>> 
>>>>>> With CRAN 3.3.3, I get 
>>>>>> 
>>>>>> <Tcl> xft 
>>>>>> 
>>>>>> and likewise with a local nightly build of R-devel, but CRAN 3.4.0 says
>>>>>> 
>>>>>>> .Tcl("::tk::pkgconfig get fontsystem")
>>>>>> Error in .Tcl("::tk::pkgconfig get fontsystem") : 
>>>>>> could not find function ".Tcl"
>>>>>> 
>>>>>> as does a local build of R-patched (???!!!). 
>>>>>> 
>>>>>> This is pretty weird. I'll see if I can dig up some more about where the difference is.
>>>>>> 
>>>>>> -pd
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> [*] Try library(tcltk); demo(tkfaq)  then library(Rcmdr) and watch the font change in the tkfaq window.
>>>>>> 
>>>>>> 
>>>>>>> On 15 May 2017, at 23:17 , Fox, John <jfox at mcmaster.ca> wrote:
>>>>>>> 
>>>>>>> Dear Jose,
>>>>>>> 
>>>>>>> It's a bit difficult to respond to your latest messages because you sent so many of them.
>>>>>>> 
>>>>>>> I'm not entirely sure what's producing your font problems -- perhaps Simon will have some additional ideas -- but you should be aware that you can't load the Rcmdr package -- or, more generally, the tcltk package -- without XQuartz (or another X11 system). Normally, XQuartz should start automatically when the Rcmdr (or tcltk) package is loaded. That is, you should not have to start it separately.
>>>>>>> 
>>>>>>> It may help to know that the Rcmdr package selects its default dialog font by querying the default Tk font, via the command
>>>>>>> 
>>>>>>> 	tclvalue(.Tcl("font actual TkDefaultFont -family"))
>>>>>>> 
>>>>>>> and sets the font for commands and output by querying the default Tk fixed-width font:
>>>>>>> 
>>>>>>> 	tclvalue(.Tcl("font actual TkFixedFont -family"))
>>>>>>> 
>>>>>>> On my Macs, these are respectively the helvetica and courier fonts.
>>>>>>> 
>>>>>>> In any event, I'm glad that you seem to have solved your problem.
>>>>>>> 
>>>>>>> John
>>>>>>> 
>>>>>>>> -----Original Message-----
>>>>>>>> From: Jose G Conde Santiago [mailto:jose.conde1 at upr.edu]
>>>>>>>> Sent: Monday, May 15, 2017 3:18 PM
>>>>>>>> To: Simon Urbanek <simon.urbanek at r-project.org>; Fox, John
>>>>>>>> <jfox at mcmaster.ca>; r-sig-mac at r-project.org
>>>>>>>> Subject: Re: [R-SIG-Mac] R commander fonts on R 3.4.0
>>>>>>>> 
>>>>>>>> When I run R without XQuartz, the text from the help screen renders
>>>>>>>> well. I think the problem seems to be related to XQuartz.
>>>>>>>> 
>>>>>>>> Jos?
>>>>>>>> 
>>>>>>>> 
>>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>>> Professor, School of Medicine
>>>>>>>> Director, CentIT2
>>>>>>>> UPR Medical Sciences Campus
>>>>>>>> 
>>>>>>>> Tel  (787) 763-9401 Fax (787) 758-5206
>>>>>>>> 
>>>>>>>> Email: jose.conde1 at upr.edu
>>>>>>>> 
>>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>>> 
>>>>>>>>> On May 15, 2017, at 2:16 PM, Jose G Conde Santiago
>>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>>> 
>>>>>>>>> ? and the same I get the same issue with R ?help? screens in my iMac.
>>>>>>>> I cannot reproduce this in the macBook.
>>>>>>>>> 
>>>>>>>>> Jos?
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> <R help .png>
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>>>> Catedr?tico, Escuela de Medicina
>>>>>>>>> Director, CentIT2
>>>>>>>>> Recinto de Ciencias M?dicas, UPR
>>>>>>>>> 
>>>>>>>>> Tel  (787) 763-9401  Fax (787) 758-5206
>>>>>>>>> 
>>>>>>>>> Correo electr?nico: jose.conde1 at upr.edu
>>>>>>>>> 
>>>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>>>> 
>>>>>>>>>> On May 15, 2017, at 2:14 PM, Jose G Conde Santiago
>>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>>>> 
>>>>>>>>>> This is the actual resolutions.
>>>>>>>>>> 
>>>>>>>>>> Jos?
>>>>>>>>>> 
>>>>>>>>>> <Fonts 20 points.png>
>>>>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>>>>> Professor, School of Medicine
>>>>>>>>>> Director, CentIT2
>>>>>>>>>> UPR Medical Sciences Campus
>>>>>>>>>> 
>>>>>>>>>> Tel  (787) 763-9401 Fax (787) 758-5206
>>>>>>>>>> 
>>>>>>>>>> Email: jose.conde1 at upr.edu
>>>>>>>>>> 
>>>>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>>>>> 
>>>>>>>>>>> On May 15, 2017, at 12:31 PM, Jose G Conde Santiago
>>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>>>>> 
>>>>>>>>>>> <Fonts 20 points.png>
>>>>>>>>>> 
>>>>>>>>> 
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>>> -- 
>>>>>> Peter Dalgaard, Professor,
>>>>>> Center for Statistics, Copenhagen Business School
>>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>>> Phone: (+45)38153501
>>>>>> Office: A 4.23
>>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> -- 
>>>>> Peter Dalgaard, Professor,
>>>>> Center for Statistics, Copenhagen Business School
>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>> Phone: (+45)38153501
>>>>> Office: A 4.23
>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> -- 
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>> 
>>> -- 
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From jfox at mcmaster.ca  Fri Jul  7 19:16:19 2017
From: jfox at mcmaster.ca (Fox, John)
Date: Fri, 7 Jul 2017 17:16:19 +0000
Subject: [R-SIG-Mac] R commander fonts on R 3.4.0
In-Reply-To: <4027_1499427575_v67BdY9W021938_A6F0357B-7FDC-4922-86E8-4A3B21E2E145@r-project.org>
References: <A7AF5B04-73F7-4C51-9845-A1012B74FB13@upr.edu>
 <25322_1494369971_v49MkAbP032131_B9A2013C-D5EC-46D9-A1C5-CC8EA315539D@comcast.net>
 <D537E927.72B8%jfox@mcmaster.ca>
 <A1EF8067-15B5-4970-B83C-DC632B9E4C49@r-project.org>
 <FE3D31ED-E677-4D53-9E50-CABC328685BE@upr.edu>
 <A0054686-E83D-4C70-AC3B-A42A074F17A4@upr.edu>
 <9B2C2259-32A0-481C-9596-416615E69B1A@upr.edu>
 <FA20D234-368D-4C02-9057-68E9A69EAC1B@upr.edu>
 <8605F648-B967-408A-AF01-9443A2790CF9@upr.edu>
 <ACD1644AA6C67E4FBD0C350625508EC836668824@FHSDB2D11-2.csu.mcmaster.ca>
 <2E799797-8456-43C6-B681-BB2465F11A14@gmail.com>
 <57C6706E-6773-47F3-9051-A5FD3097CC07@gmail.com>
 <474B2FF5-5435-4F4D-9F67-BF2027D9E1C8@gmail.com>
 <AB3E7E39-449E-4B40-AD4C-7FE55FD44239@gmail.com>
 <8AF15F28-9173-459E-82DE-15ED8D2DA102@r-project.org>,
 <4027_1499427575_v67BdY9W021938_A6F0357B-7FDC-4922-86E8-4A3B21E2E145@r-project.org>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC836696441@FHSDB4H16-2.csu.mcmaster.ca>

Dear Simon and Peter,

Thank you very much for taking care of this -- the fonts look much better now.

Best,
 John

-----------------------------
John Fox, Professor
McMaster University
Hamilton, Ontario
Canada L8S 4M4
web: socserv.mcmaster.ca/jfox


________________________________________
From: R-SIG-Mac [r-sig-mac-bounces at r-project.org] on behalf of Simon Urbanek [simon.urbanek at r-project.org]
Sent: July 7, 2017 7:39 AM
To: peter dalgaard
Cc: r-sig-mac at r-project.org
Subject: Re: [R-SIG-Mac] R commander fonts on R 3.4.0

FWIW the issue should be resolved in R 3.4.1 - the default in Tcl/Tk is to build without Xft so for R 3.4.1 we have now re-build Tcl/Tk 8.6.6 binary with explicitly enabled Xft.

Cheers,
Simon


> On May 16, 2017, at 7:30 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>
>
>> On May 16, 2017, at 12:20 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>>
>> Mystery solved after looking into the actual .pkg files. They simply contain a full Tcl/Tk which installs into /usr/local, which obviously affects anything that links it dynamically. I somehow thought that they would install somewhere separate. (Stop grinning, Simon!)
>>
>
> I'm not sure I understand the "they" - is it us? The difference in R 3.4.0 is that we are using everything from the system (and XQuartz) whereas before we were building dependencies ourselves before.
>
>
>> Anyways, the way forward must be to get Tcl/Tk compiled exactly as they were in 3.3.x.
>>
>
> R before 3.4.0 we used Tcl/Tk 8.6.0 for OS X Mavericks from 2013, for R 3.4.0 we are using Tcl/Tk 8.6.6 for El Capitan.
>
> FWIW the config flags were
> --disable-corefoundation --disable-framework --disable-aqua --enable-64bit --with-tcl=/usr/local/lib --with-x --x-includes=/opt/X11/include --x-libraries=/opt/X11/lib CC=clang CXX=clang++
>
> I have no idea what you are talking about here so if anyone has suggestions to test, let me know.
>
> Cheers,
> Simon
>
>
>
>> -pd
>>
>>
>>
>>
>>> On 16 May 2017, at 15:18 , peter dalgaard <pdalgd at gmail.com> wrote:
>>>
>>> Double-checked: Indeed, installing 3.3-branch-mavericks.pkg enables xft on my local builds of R-patched and R-devel. Hmmmm......
>>>
>>> -pd
>>>
>>>> On 16 May 2017, at 14:55 , peter dalgaard <pdalgd at gmail.com> wrote:
>>>>
>>>> Curiouser and curiouser, now my local build of R-devel stopped using xft _without any recompile_ I swear that it worked before I installed R-3.4.0.pkg....
>>>>
>>>> I have both /opt/local/ and /usr/local variants of Tcl/Tk 8.6 and only the former has wish8.6 understanding the tk::pkgconfig stuff, so there is plenty of room for confusion. The latter seems to be from Simon's site; the other one could be a MacPorts relic...
>>>>
>>>> -pd
>>>>
>>>>> On 16 May 2017, at 13:28 , peter dalgaard <pdalgd at gmail.com> wrote:
>>>>>
>>>>> It's a build issue relating to Tcl/Tk, not specifically Rcmdr (Rcmdr does something slightly weird[*] with the fonts too, but this seems to be orthogonal to the ugly-font issue).
>>>>>
>>>>> To see the issue quickly, try
>>>>>
>>>>> library(tcltk)
>>>>> .Tcl("::tk::pkgconfig get fontsystem")
>>>>>
>>>>> With CRAN 3.3.3, I get
>>>>>
>>>>> <Tcl> xft
>>>>>
>>>>> and likewise with a local nightly build of R-devel, but CRAN 3.4.0 says
>>>>>
>>>>>> .Tcl("::tk::pkgconfig get fontsystem")
>>>>> Error in .Tcl("::tk::pkgconfig get fontsystem") :
>>>>> could not find function ".Tcl"
>>>>>
>>>>> as does a local build of R-patched (???!!!).
>>>>>
>>>>> This is pretty weird. I'll see if I can dig up some more about where the difference is.
>>>>>
>>>>> -pd
>>>>>
>>>>>
>>>>>
>>>>> [*] Try library(tcltk); demo(tkfaq)  then library(Rcmdr) and watch the font change in the tkfaq window.
>>>>>
>>>>>
>>>>>> On 15 May 2017, at 23:17 , Fox, John <jfox at mcmaster.ca> wrote:
>>>>>>
>>>>>> Dear Jose,
>>>>>>
>>>>>> It's a bit difficult to respond to your latest messages because you sent so many of them.
>>>>>>
>>>>>> I'm not entirely sure what's producing your font problems -- perhaps Simon will have some additional ideas -- but you should be aware that you can't load the Rcmdr package -- or, more generally, the tcltk package -- without XQuartz (or another X11 system). Normally, XQuartz should start automatically when the Rcmdr (or tcltk) package is loaded. That is, you should not have to start it separately.
>>>>>>
>>>>>> It may help to know that the Rcmdr package selects its default dialog font by querying the default Tk font, via the command
>>>>>>
>>>>>>  tclvalue(.Tcl("font actual TkDefaultFont -family"))
>>>>>>
>>>>>> and sets the font for commands and output by querying the default Tk fixed-width font:
>>>>>>
>>>>>>  tclvalue(.Tcl("font actual TkFixedFont -family"))
>>>>>>
>>>>>> On my Macs, these are respectively the helvetica and courier fonts.
>>>>>>
>>>>>> In any event, I'm glad that you seem to have solved your problem.
>>>>>>
>>>>>> John
>>>>>>
>>>>>>> -----Original Message-----
>>>>>>> From: Jose G Conde Santiago [mailto:jose.conde1 at upr.edu]
>>>>>>> Sent: Monday, May 15, 2017 3:18 PM
>>>>>>> To: Simon Urbanek <simon.urbanek at r-project.org>; Fox, John
>>>>>>> <jfox at mcmaster.ca>; r-sig-mac at r-project.org
>>>>>>> Subject: Re: [R-SIG-Mac] R commander fonts on R 3.4.0
>>>>>>>
>>>>>>> When I run R without XQuartz, the text from the help screen renders
>>>>>>> well. I think the problem seems to be related to XQuartz.
>>>>>>>
>>>>>>> Jos?
>>>>>>>
>>>>>>>
>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>> Professor, School of Medicine
>>>>>>> Director, CentIT2
>>>>>>> UPR Medical Sciences Campus
>>>>>>>
>>>>>>> Tel  (787) 763-9401 Fax (787) 758-5206
>>>>>>>
>>>>>>> Email: jose.conde1 at upr.edu
>>>>>>>
>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>>
>>>>>>>> On May 15, 2017, at 2:16 PM, Jose G Conde Santiago
>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>>
>>>>>>>> ? and the same I get the same issue with R ?help? screens in my iMac.
>>>>>>> I cannot reproduce this in the macBook.
>>>>>>>>
>>>>>>>> Jos?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> <R help .png>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>>> Catedr?tico, Escuela de Medicina
>>>>>>>> Director, CentIT2
>>>>>>>> Recinto de Ciencias M?dicas, UPR
>>>>>>>>
>>>>>>>> Tel  (787) 763-9401  Fax (787) 758-5206
>>>>>>>>
>>>>>>>> Correo electr?nico: jose.conde1 at upr.edu
>>>>>>>>
>>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>>>
>>>>>>>>> On May 15, 2017, at 2:14 PM, Jose G Conde Santiago
>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>>>
>>>>>>>>> This is the actual resolutions.
>>>>>>>>>
>>>>>>>>> Jos?
>>>>>>>>>
>>>>>>>>> <Fonts 20 points.png>
>>>>>>>>> Jos? G. Conde, MD, MPH
>>>>>>>>> Professor, School of Medicine
>>>>>>>>> Director, CentIT2
>>>>>>>>> UPR Medical Sciences Campus
>>>>>>>>>
>>>>>>>>> Tel  (787) 763-9401 Fax (787) 758-5206
>>>>>>>>>
>>>>>>>>> Email: jose.conde1 at upr.edu
>>>>>>>>>
>>>>>>>>> URL: http://rcmi.rcm.upr.edu
>>>>>>>>>
>>>>>>>>>> On May 15, 2017, at 12:31 PM, Jose G Conde Santiago
>>>>>>> <jose.conde1 at upr.edu> wrote:
>>>>>>>>>>
>>>>>>>>>> <Fonts 20 points.png>
>>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>
>>>>> --
>>>>> Peter Dalgaard, Professor,
>>>>> Center for Statistics, Copenhagen Business School
>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>> Phone: (+45)38153501
>>>>> Office: A 4.23
>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> --
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From Ashley.Betts at saltbushsoftware.com  Sun Jul  9 12:45:40 2017
From: Ashley.Betts at saltbushsoftware.com (Ashley Betts)
Date: Sun, 9 Jul 2017 20:45:40 +1000
Subject: [R-SIG-Mac] Poor plotting performance on Mac OS X
Message-ID: <7699A607-2DE4-4A35-A334-CEB4076A187D@saltbushsoftware.com>

Hi All,
   I'm quite new to R and recently started investigating the geospatial plotting capabilities of R via ggplot2. I started by using some of the publicly available datasets from the Australian Bureau of Statistics. Plotting the Level 3 Statistical Area boundaries took over 2 hours on my 2012 Mac Book Pro. As there were over 3M rows in the fortify?ed data frame I initially thought this was just how long it must take. I then ran the exact same script on my work laptop which is similarly spec?ed and it ran in approximately 30 seconds. This now has me extremely disappointed in the performance on the Mac which is where I use R the most. I changed my BLAS library to the Accelerate library in a whim that this might make a difference. It did not. Whilst I primarily use RStudio I also ran the same script in R.app and if there was any improvement it was not noticeable. I did notice in the Windows run that it seemed to use multiple cores (which is what made me investigate the BLAS change) whilst the Mac seems to stay bound to a single core. My initial thoughts were that it must be something to do with ggplot but after sampling the rsession process a number of times (see attached Sample of rsession.txt) it appears to be spending most of it?s time in CGContextDrawPath in Apples CoreGraphics so I assume it is a Graphics related issue. I?m running R 3.4 on my Mac and 3.3.2 on the Windows machine. I?ve attached the script and have screen dumps of the process sample text and a number of others which I can supply if helpful in analysing the issue. Could someone possibly let me know if this is PEBCAK issue or an actual problem with R. If the later how do I go about getting the issue resolved?

The SA3 boundary data is available here:

http://www.abs.gov.au/AUSSTATS/abs at .nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument

as 'Statistical Area Level 3 (SA3) ASGS Ed 2016 Digital Boundaries in ESRI Shapefile Format?

Regards,

Ashley

-------------- next part --------------
A non-text attachment was scrubbed...
Name: aus_pop_analysis.R
Type: application/octet-stream
Size: 2843 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170709/9b81fcae/attachment.obj>
-------------- next part --------------





From pdalgd at gmail.com  Sun Jul  9 13:35:14 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Sun, 9 Jul 2017 13:35:14 +0200
Subject: [R-SIG-Mac] Poor plotting performance on Mac OS X
In-Reply-To: <7699A607-2DE4-4A35-A334-CEB4076A187D@saltbushsoftware.com>
References: <7699A607-2DE4-4A35-A334-CEB4076A187D@saltbushsoftware.com>
Message-ID: <35E7A05E-FD0F-416B-B850-E2E8B7DF8A54@gmail.com>

Hmm, you're not telling us much about where the time is being spent. Some more detailed timing using system.time() could be useful.

If it is a graphics device issue, I would expect almost everything in the final print(plt). You could try switching graphics device, e.g. to pdf() which should be pretty much the same on all platforms. You might also try creating PDF files on one machine and displaying on the other. 

-pd 

> On 9 Jul 2017, at 12:45 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
> 
> Hi All,
>   I'm quite new to R and recently started investigating the geospatial plotting capabilities of R via ggplot2. I started by using some of the publicly available datasets from the Australian Bureau of Statistics. Plotting the Level 3 Statistical Area boundaries took over 2 hours on my 2012 Mac Book Pro. As there were over 3M rows in the fortify?ed data frame I initially thought this was just how long it must take. I then ran the exact same script on my work laptop which is similarly spec?ed and it ran in approximately 30 seconds. This now has me extremely disappointed in the performance on the Mac which is where I use R the most. I changed my BLAS library to the Accelerate library in a whim that this might make a difference. It did not. Whilst I primarily use RStudio I also ran the same script in R.app and if there was any improvement it was not noticeable. I did notice in the Windows run that it seemed to use multiple cores (which is what made me investigate the BLAS change) whilst the Mac seems to stay bound to a single core. My initial thoughts were that it must be something to do with ggplot but after sampling the rsession process a number of times (see attached Sample of rsession.txt) it appears to be spending most of it?s time in CGContextDrawPath in Apples CoreGraphics so I assume it is a Graphics related issue. I?m running R 3.4 on my Mac and 3.3.2 on the Windows machine. I?ve attached the script and have screen dumps of the process sample text and a number of others which I can supply if helpful in analysing the issue. Could someone possibly let me know if this is PEBCAK issue or an actual problem with R. If the later how do I go about getting the issue resolved?
> 
> The SA3 boundary data is available here:
> 
> http://www.abs.gov.au/AUSSTATS/abs at .nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument
> 
> as 'Statistical Area Level 3 (SA3) ASGS Ed 2016 Digital Boundaries in ESRI Shapefile Format?
> 
> Regards,
> 
> Ashley
> 
> <aus_pop_analysis.R>
> 
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From Ashley.Betts at saltbushsoftware.com  Mon Jul 10 00:05:13 2017
From: Ashley.Betts at saltbushsoftware.com (Ashley Betts)
Date: Mon, 10 Jul 2017 08:05:13 +1000
Subject: [R-SIG-Mac] Poor plotting performance on Mac OS X
In-Reply-To: <35E7A05E-FD0F-416B-B850-E2E8B7DF8A54@gmail.com>
References: <7699A607-2DE4-4A35-A334-CEB4076A187D@saltbushsoftware.com>
 <35E7A05E-FD0F-416B-B850-E2E8B7DF8A54@gmail.com>
Message-ID: <54637E55-9EB1-4416-8C29-61C8070ADD77@saltbushsoftware.com>

Oh yes, sorry about that. I originally had screen shots attached showing the timings but the email ended up being too large. All of the time is in the print. Nearly all other commands run within seconds. Oddly, after approximately half hour the prompt returns which I get one Sys.time() to execute but then the prompt hangs when I enter the second Sys.time() for the best part of an hour and half.

I tried to profile but that failed. I tried sampling the process a number of times and every time I sampled execution was buried in CGContextDrawPath
GEPolygon  (in libR.dylib) + 127  [0x101cb54df]  engine.c:0
    +                                                                                                                                                                               2502 clipPolygon  (in libR.dylib) + 571  [0x101cb574b]  engine.c:1080
    +                                                                                                                                                                                 2502 CGContextDrawPath  (in CoreGraphics) + 181  [0x7fff8d433e59]
    +                                                                                                                                                                                   2502 ripc_DrawPath  (in libRIP.A.dylib) + 417  [0x7fff8ec631a3]
    +                                                                                                                                                                                     2502 ripc_Render  (in libRIP.A.dylib) + 380  [0x7fff8ec4f750]
    +                                                                                                                                                                                       2502 RIPRenderCoverage  (in libRIP.A.dylib) + 1844  [0x7fff8ec4ff84]


Regards,

Ashley




> On 9 Jul 2017, at 9:35 PM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Hmm, you're not telling us much about where the time is being spent. Some more detailed timing using system.time() could be useful.
> 
> If it is a graphics device issue, I would expect almost everything in the final print(plt). You could try switching graphics device, e.g. to pdf() which should be pretty much the same on all platforms. You might also try creating PDF files on one machine and displaying on the other. 
> 
> -pd 
> 
>> On 9 Jul 2017, at 12:45 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
>> 
>> Hi All,
>>  I'm quite new to R and recently started investigating the geospatial plotting capabilities of R via ggplot2. I started by using some of the publicly available datasets from the Australian Bureau of Statistics. Plotting the Level 3 Statistical Area boundaries took over 2 hours on my 2012 Mac Book Pro. As there were over 3M rows in the fortify?ed data frame I initially thought this was just how long it must take. I then ran the exact same script on my work laptop which is similarly spec?ed and it ran in approximately 30 seconds. This now has me extremely disappointed in the performance on the Mac which is where I use R the most. I changed my BLAS library to the Accelerate library in a whim that this might make a difference. It did not. Whilst I primarily use RStudio I also ran the same script in R.app and if there was any improvement it was not noticeable. I did notice in the Windows run that it seemed to use multiple cores (which is what made me investigate the BLAS change) whilst the Mac seems to stay bound to a single core. My initial thoughts were that it must be something to do with ggplot but after sampling the rsession process a number of times (see attached Sample of rsession.txt) it appears to be spending most of it?s time in CGContextDrawPath in Apples CoreGraphics so I assume it is a Graphics related issue. I?m running R 3.4 on my Mac and 3.3.2 on the Windows machine. I?ve attached the script and have screen dumps of the process sample text and a number of others which I can supply if helpful in analysing the issue. Could someone possibly let me know if this is PEBCAK issue or an actual problem with R. If the later how do I go about getting the issue resolved?
>> 
>> The SA3 boundary data is available here:
>> 
>> http://www.abs.gov.au/AUSSTATS/abs at .nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument
>> 
>> as 'Statistical Area Level 3 (SA3) ASGS Ed 2016 Digital Boundaries in ESRI Shapefile Format?
>> 
>> Regards,
>> 
>> Ashley
>> 
>> <aus_pop_analysis.R>
>> 
>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 

Ashley Betts

Saltbush Software
Excellence in Software Engineering Practices

email: Ashley.Betts at saltbushsoftware.com
	      Ashley.Betts at sbsw.com.au
web:   http://www.saltbushsoftware.com
	      http://www.sbsw.com.au

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170710/6a99d460/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: macplottimes.jpg
Type: image/jpeg
Size: 57090 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170710/6a99d460/attachment-0001.jpg>

From pdalgd at gmail.com  Mon Jul 10 10:21:06 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 10 Jul 2017 10:21:06 +0200
Subject: [R-SIG-Mac] Poor plotting performance on Mac OS X
In-Reply-To: <54637E55-9EB1-4416-8C29-61C8070ADD77@saltbushsoftware.com>
References: <7699A607-2DE4-4A35-A334-CEB4076A187D@saltbushsoftware.com>
 <35E7A05E-FD0F-416B-B850-E2E8B7DF8A54@gmail.com>
 <54637E55-9EB1-4416-8C29-61C8070ADD77@saltbushsoftware.com>
Message-ID: <2679D8C4-2482-4099-9AFF-EE9A8248A950@gmail.com>

Pretty clear that the process is getting stuck in Apple-graphics land, then. This could be inefficiency of the device driver, but also just ... Apple. Could you try running the same thing to a PDF (AFAIR, just open the device with pdf(file="myplot.pdf"), then print(plt), then dev.off()). It would be good to know if this is fast, and also whether viewing the resulting PDF in Preview is slow (in which case it is Not Our Problem).

Also, does running the Activity Monitor give any clues? Like, perhaps you are running out of memory. 

-pd

> On 10 Jul 2017, at 00:05 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
> 
> Oh yes, sorry about that. I originally had screen shots attached showing the timings but the email ended up being too large. All of the time is in the print. Nearly all other commands run within seconds. Oddly, after approximately half hour the prompt returns which I get one Sys.time() to execute but then the prompt hangs when I enter the second Sys.time() for the best part of an hour and half.
> 
> I tried to profile but that failed. I tried sampling the process a number of times and every time I sampled execution was buried in CGContextDrawPath
> GEPolygon  (in libR.dylib) + 127  [0x101cb54df]  engine.c:0
>     +                                                                                                                                                                               2502 clipPolygon  (in libR.dylib) + 571  [0x101cb574b]  engine.c:1080
>     +                                                                                                                                                                                 2502 CGContextDrawPath  (in CoreGraphics) + 181  [0x7fff8d433e59]
>     +                                                                                                                                                                                   2502 ripc_DrawPath  (in libRIP.A.dylib) + 417  [0x7fff8ec631a3]
>     +                                                                                                                                                                                     2502 ripc_Render  (in libRIP.A.dylib) + 380  [0x7fff8ec4f750]
>     +                                                                                                                                                                                       2502 RIPRenderCoverage  (in libRIP.A.dylib) + 1844  [0x7fff8ec4ff84]
> 
> 
> Regards,
> 
> Ashley
> 
> <macplottimes.jpg>
> 
> 
>> On 9 Jul 2017, at 9:35 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> Hmm, you're not telling us much about where the time is being spent. Some more detailed timing using system.time() could be useful.
>> 
>> If it is a graphics device issue, I would expect almost everything in the final print(plt). You could try switching graphics device, e.g. to pdf() which should be pretty much the same on all platforms. You might also try creating PDF files on one machine and displaying on the other. 
>> 
>> -pd 
>> 
>>> On 9 Jul 2017, at 12:45 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
>>> 
>>> Hi All,
>>>  I'm quite new to R and recently started investigating the geospatial plotting capabilities of R via ggplot2. I started by using some of the publicly available datasets from the Australian Bureau of Statistics. Plotting the Level 3 Statistical Area boundaries took over 2 hours on my 2012 Mac Book Pro. As there were over 3M rows in the fortify?ed data frame I initially thought this was just how long it must take. I then ran the exact same script on my work laptop which is similarly spec?ed and it ran in approximately 30 seconds. This now has me extremely disappointed in the performance on the Mac which is where I use R the most. I changed my BLAS library to the Accelerate library in a whim that this might make a difference. It did not. Whilst I primarily use RStudio I also ran the same script in R.app and if there was any improvement it was not noticeable. I did notice in the Windows run that it seemed to use multiple cores (which is what made me investigate the BLAS change) whilst the Mac seems to stay bound to a single core. My initial thoughts were that it must be something to do with ggplot but after sampling the rsession process a number of times (see attached Sample of rsession.txt) it appears to be spending most of it?s time in CGContextDrawPath in Apples CoreGraphics so I assume it is a Graphics related issue. I?m running R 3.4 on my Mac and 3.3.2 on the Windows machine. I?ve attached the script and have screen dumps of the process sample text and a number of others which I can supply if helpful in analysing the issue. Could someone possibly let me know if this is PEBCAK issue or an actual problem with R. If the later how do I go about getting the issue resolved?
>>> 
>>> The SA3 boundary data is available here:
>>> 
>>> http://www.abs.gov.au/AUSSTATS/abs at .nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument
>>> 
>>> as 'Statistical Area Level 3 (SA3) ASGS Ed 2016 Digital Boundaries in ESRI Shapefile Format?
>>> 
>>> Regards,
>>> 
>>> Ashley
>>> 
>>> <aus_pop_analysis.R>
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
> 
> Ashley Betts
> 
> Saltbush Software
> Excellence in Software Engineering Practices
> 
> email: Ashley.Betts at saltbushsoftware.com
> 	      Ashley.Betts at sbsw.com.au
> web:   http://www.saltbushsoftware.com
> 	      http://www.sbsw.com.au
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From Ashley.Betts at saltbushsoftware.com  Mon Jul 10 13:40:19 2017
From: Ashley.Betts at saltbushsoftware.com (Ashley Betts)
Date: Mon, 10 Jul 2017 21:40:19 +1000
Subject: [R-SIG-Mac] Poor plotting performance on Mac OS X
In-Reply-To: <2679D8C4-2482-4099-9AFF-EE9A8248A950@gmail.com>
References: <7699A607-2DE4-4A35-A334-CEB4076A187D@saltbushsoftware.com>
 <35E7A05E-FD0F-416B-B850-E2E8B7DF8A54@gmail.com>
 <54637E55-9EB1-4416-8C29-61C8070ADD77@saltbushsoftware.com>
 <2679D8C4-2482-4099-9AFF-EE9A8248A950@gmail.com>
Message-ID: <1AD66CAA-D6A0-4A5B-B0F3-823C91361CA0@saltbushsoftware.com>

Hi Peter, outputting to PDF made a huge difference! It ran for only 15 seconds and there was no trailing unresponsive prompt. The PDF ended up being around 2Mb and opened and displayed almost immediately in Preview.

I did watch the system when I was outputting to the quartz device last time and the process was steadily consuming a single core. When I watched it on the Windows machines I saw it use most of the cores but not to capacity. After seeing this I read up on multithreading libraries on Mac and finally setup R to use the Accelerate library. I?ve verified this library is being loaded by sampling the process. It make zero difference however and the print(plt) still only consumes a single core.

Regards,

Ashley

> On 10 Jul 2017, at 6:21 PM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Pretty clear that the process is getting stuck in Apple-graphics land, then. This could be inefficiency of the device driver, but also just ... Apple. Could you try running the same thing to a PDF (AFAIR, just open the device with pdf(file="myplot.pdf"), then print(plt), then dev.off()). It would be good to know if this is fast, and also whether viewing the resulting PDF in Preview is slow (in which case it is Not Our Problem).
> 
> Also, does running the Activity Monitor give any clues? Like, perhaps you are running out of memory. 
> 
> -pd
> 
>> On 10 Jul 2017, at 00:05 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
>> 
>> Oh yes, sorry about that. I originally had screen shots attached showing the timings but the email ended up being too large. All of the time is in the print. Nearly all other commands run within seconds. Oddly, after approximately half hour the prompt returns which I get one Sys.time() to execute but then the prompt hangs when I enter the second Sys.time() for the best part of an hour and half.
>> 
>> I tried to profile but that failed. I tried sampling the process a number of times and every time I sampled execution was buried in CGContextDrawPath
>> GEPolygon  (in libR.dylib) + 127  [0x101cb54df]  engine.c:0
>>    +                                                                                                                                                                               2502 clipPolygon  (in libR.dylib) + 571  [0x101cb574b]  engine.c:1080
>>    +                                                                                                                                                                                 2502 CGContextDrawPath  (in CoreGraphics) + 181  [0x7fff8d433e59]
>>    +                                                                                                                                                                                   2502 ripc_DrawPath  (in libRIP.A.dylib) + 417  [0x7fff8ec631a3]
>>    +                                                                                                                                                                                     2502 ripc_Render  (in libRIP.A.dylib) + 380  [0x7fff8ec4f750]
>>    +                                                                                                                                                                                       2502 RIPRenderCoverage  (in libRIP.A.dylib) + 1844  [0x7fff8ec4ff84]
>> 
>> 
>> Regards,
>> 
>> Ashley
>> 
>> <macplottimes.jpg>
>> 
>> 
>>> On 9 Jul 2017, at 9:35 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>>> 
>>> Hmm, you're not telling us much about where the time is being spent. Some more detailed timing using system.time() could be useful.
>>> 
>>> If it is a graphics device issue, I would expect almost everything in the final print(plt). You could try switching graphics device, e.g. to pdf() which should be pretty much the same on all platforms. You might also try creating PDF files on one machine and displaying on the other. 
>>> 
>>> -pd 
>>> 
>>>> On 9 Jul 2017, at 12:45 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
>>>> 
>>>> Hi All,
>>>> I'm quite new to R and recently started investigating the geospatial plotting capabilities of R via ggplot2. I started by using some of the publicly available datasets from the Australian Bureau of Statistics. Plotting the Level 3 Statistical Area boundaries took over 2 hours on my 2012 Mac Book Pro. As there were over 3M rows in the fortify?ed data frame I initially thought this was just how long it must take. I then ran the exact same script on my work laptop which is similarly spec?ed and it ran in approximately 30 seconds. This now has me extremely disappointed in the performance on the Mac which is where I use R the most. I changed my BLAS library to the Accelerate library in a whim that this might make a difference. It did not. Whilst I primarily use RStudio I also ran the same script in R.app and if there was any improvement it was not noticeable. I did notice in the Windows run that it seemed to use multiple cores (which is what made me investigate the BLAS change) whilst the Mac seems to stay bound to a single core. My initial thoughts were that it must be something to do with ggplot but after sampling the rsession process a number of times (see attached Sample of rsession.txt) it appears to be spending most of it?s time in CGContextDrawPath in Apples CoreGraphics so I assume it is a Graphics related issue. I?m running R 3.4 on my Mac and 3.3.2 on the Windows machine. I?ve attached the script and have screen dumps of the process sample text and a number of others which I can supply if helpful in analysing the issue. Could someone possibly let me know if this is PEBCAK issue or an actual problem with R. If the later how do I go about getting the issue resolved?
>>>> 
>>>> The SA3 boundary data is available here:
>>>> 
>>>> http://www.abs.gov.au/AUSSTATS/abs at .nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument
>>>> 
>>>> as 'Statistical Area Level 3 (SA3) ASGS Ed 2016 Digital Boundaries in ESRI Shapefile Format?
>>>> 
>>>> Regards,
>>>> 
>>>> Ashley
>>>> 
>>>> <aus_pop_analysis.R>
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> -- 
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>> 
>> Ashley Betts
>> 
>> Saltbush Software
>> Excellence in Software Engineering Practices
>> 
>> email: Ashley.Betts at saltbushsoftware.com
>> 	      Ashley.Betts at sbsw.com.au
>> web:   http://www.saltbushsoftware.com
>> 	      http://www.sbsw.com.au
>> 
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 

Ashley Betts

Saltbush Software
Excellence in Software Engineering Practices

email: Ashley.Betts at saltbushsoftware.com
	      Ashley.Betts at sbsw.com.au
web:   http://www.saltbushsoftware.com
	      http://www.sbsw.com.au


	[[alternative HTML version deleted]]


From macqueen1 at llnl.gov  Mon Jul 10 19:59:40 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 10 Jul 2017 17:59:40 +0000
Subject: [R-SIG-Mac] Poor plotting performance on Mac OS X
In-Reply-To: <1AD66CAA-D6A0-4A5B-B0F3-823C91361CA0@saltbushsoftware.com>
References: <7699A607-2DE4-4A35-A334-CEB4076A187D@saltbushsoftware.com>
 <35E7A05E-FD0F-416B-B850-E2E8B7DF8A54@gmail.com>
 <54637E55-9EB1-4416-8C29-61C8070ADD77@saltbushsoftware.com>
 <2679D8C4-2482-4099-9AFF-EE9A8248A950@gmail.com>
 <1AD66CAA-D6A0-4A5B-B0F3-823C91361CA0@saltbushsoftware.com>
Message-ID: <418C24EE-C1C4-4C77-92D0-2FE03793EC46@llnl.gov>

For what it's worth, here is my experience on a late 2013 Mac Pro.
(I normally run R from an xterm shell within an X Windows context)

The best performance for displaying the image on-screen uses cairographics and Polypath. It's the only one fast enough to be satisfactory for interactive use, in my opinion [though x11(type='Xlib') could be tolerated]. pdf() is even faster.

-Don

> nsw <- readOGR('data','SA3_2016_AUST', stringsAsFactors=FALSE)
OGR data source with driver: ESRI Shapefile 
Source: "data", layer: "SA3_2016_AUST"
with 358 features
It has 9 fields
Warning message:
In readOGR("data", "SA3_2016_AUST", stringsAsFactors = FALSE) :
  Dropping null geometries: 93, 94, 161, 162, 245, 246, 275, 276, 311, 312, 328, 329, 339, 340, 351, 352, 357, 358

## The "original" X windows device (does not support Polypath)
> x11(type='Xlib')
> system.time( plot(nsw, usePolypath=FALSE) )
   user  system elapsed 
  0.882   0.512  99.618 

## a more "modern" version of the X windows device
> x11(type='cairo')
> system.time( plot(nsw, usePolypath=FALSE) )
   user  system elapsed 
  2.233   5.007  68.410 


## Polypath gives large improvement
> x11(type='cairo')
> system.time( plot(nsw, usePolypath=TRUE) )
   user  system elapsed 
  1.772   0.461   5.785 

## Same R session as above, but using the quartz device
> quartz()
> system.time( plot(nsw) )
    user   system  elapsed 
1135.606    1.556 1137.445 

> pdf('test.pdf')
> system.time( plot(nsw) )
   user  system elapsed 
  2.029   0.200   2.248 
> dev.off()


> sessionInfo()
R version 3.4.1 (2017-06-30)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: OS X El Capitan 10.11.6

Matrix products: default
BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] rgdal_1.2-8 sp_1.2-5   

loaded via a namespace (and not attached):
[1] compiler_3.4.1  tools_3.4.1     grid_3.4.1      lattice_0.20-35


-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062


On 7/10/17, 4:40 AM, "R-SIG-Mac on behalf of Ashley Betts" <r-sig-mac-bounces at r-project.org on behalf of Ashley.Betts at saltbushsoftware.com> wrote:

    Hi Peter, outputting to PDF made a huge difference! It ran for only 15 seconds and there was no trailing unresponsive prompt. The PDF ended up being around 2Mb and opened and displayed almost immediately in Preview.
    
    I did watch the system when I was outputting to the quartz device last time and the process was steadily consuming a single core. When I watched it on the Windows machines I saw it use most of the cores but not to capacity. After seeing this I read up on multithreading libraries on Mac and finally setup R to use the Accelerate library. I?ve verified this library is being loaded by sampling the process. It make zero difference however and the print(plt) still only consumes a single core.
    
    Regards,
    
    Ashley
    
    > On 10 Jul 2017, at 6:21 PM, peter dalgaard <pdalgd at gmail.com> wrote:
    > 
    > Pretty clear that the process is getting stuck in Apple-graphics land, then. This could be inefficiency of the device driver, but also just ... Apple. Could you try running the same thing to a PDF (AFAIR, just open the device with pdf(file="myplot.pdf"), then print(plt), then dev.off()). It would be good to know if this is fast, and also whether viewing the resulting PDF in Preview is slow (in which case it is Not Our Problem).
    > 
    > Also, does running the Activity Monitor give any clues? Like, perhaps you are running out of memory. 
    > 
    > -pd
    > 
    >> On 10 Jul 2017, at 00:05 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
    >> 
    >> Oh yes, sorry about that. I originally had screen shots attached showing the timings but the email ended up being too large. All of the time is in the print. Nearly all other commands run within seconds. Oddly, after approximately half hour the prompt returns which I get one Sys.time() to execute but then the prompt hangs when I enter the second Sys.time() for the best part of an hour and half.
    >> 
    >> I tried to profile but that failed. I tried sampling the process a number of times and every time I sampled execution was buried in CGContextDrawPath
    >> GEPolygon  (in libR.dylib) + 127  [0x101cb54df]  engine.c:0
    >>    +                                                                                                                                                                               2502 clipPolygon  (in libR.dylib) + 571  [0x101cb574b]  engine.c:1080
    >>    +                                                                                                                                                                                 2502 CGContextDrawPath  (in CoreGraphics) + 181  [0x7fff8d433e59]
    >>    +                                                                                                                                                                                   2502 ripc_DrawPath  (in libRIP.A.dylib) + 417  [0x7fff8ec631a3]
    >>    +                                                                                                                                                                                     2502 ripc_Render  (in libRIP.A.dylib) + 380  [0x7fff8ec4f750]
    >>    +                                                                                                                                                                                       2502 RIPRenderCoverage  (in libRIP.A.dylib) + 1844  [0x7fff8ec4ff84]
    >> 
    >> 
    >> Regards,
    >> 
    >> Ashley
    >> 
    >> <macplottimes.jpg>
    >> 
    >> 
    >>> On 9 Jul 2017, at 9:35 PM, peter dalgaard <pdalgd at gmail.com> wrote:
    >>> 
    >>> Hmm, you're not telling us much about where the time is being spent. Some more detailed timing using system.time() could be useful.
    >>> 
    >>> If it is a graphics device issue, I would expect almost everything in the final print(plt). You could try switching graphics device, e.g. to pdf() which should be pretty much the same on all platforms. You might also try creating PDF files on one machine and displaying on the other. 
    >>> 
    >>> -pd 
    >>> 
    >>>> On 9 Jul 2017, at 12:45 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
    >>>> 
    >>>> Hi All,
    >>>> I'm quite new to R and recently started investigating the geospatial plotting capabilities of R via ggplot2. I started by using some of the publicly available datasets from the Australian Bureau of Statistics. Plotting the Level 3 Statistical Area boundaries took over 2 hours on my 2012 Mac Book Pro. As there were over 3M rows in the fortify?ed data frame I initially thought this was just how long it must take. I then ran the exact same script on my work laptop which is similarly spec?ed and it ran in approximately 30 seconds. This now has me extremely disappointed in the performance on the Mac which is where I use R the most. I changed my BLAS library to the Accelerate library in a whim that this might make a difference. It did not. Whilst I primarily use RStudio I also ran the same script in R.app and if there was any improvement it was not noticeable. I did notice in the Windows run that it seemed to use multiple cores (which is what made me investigate the BLAS change) whilst the Mac seems to stay bound to a single core. My initial thoughts were that it must be something to do with ggplot but after sampling the rsession process a number of times (see attached Sample of rsession.txt) it appears to be spending most of it?s time in CGContextDrawPath in Apples CoreGraphics so I assume it is a Graphics related issue. I?m running R 3.4 on my Mac and 3.3.2 on the Windows machine. I?ve attached the script and have screen dumps of the process sample text and a number of others which I can supply if helpful in analysing the issue. Could someone possibly let me know if this is PEBCAK issue or an actual problem with R. If the later how do I go about getting the issue resolved?
    >>>> 
    >>>> The SA3 boundary data is available here:
    >>>> 
    >>>> http://www.abs.gov.au/AUSSTATS/abs at .nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument
    >>>> 
    >>>> as 'Statistical Area Level 3 (SA3) ASGS Ed 2016 Digital Boundaries in ESRI Shapefile Format?
    >>>> 
    >>>> Regards,
    >>>> 
    >>>> Ashley
    >>>> 
    >>>> <aus_pop_analysis.R>
    >>>> 
    >>>> 
    >>>> 
    >>>> _______________________________________________
    >>>> R-SIG-Mac mailing list
    >>>> R-SIG-Mac at r-project.org
    >>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    >>> 
    >>> -- 
    >>> Peter Dalgaard, Professor,
    >>> Center for Statistics, Copenhagen Business School
    >>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
    >>> Phone: (+45)38153501
    >>> Office: A 4.23
    >>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
    >>> 
    >>> 
    >>> 
    >>> 
    >>> 
    >>> 
    >>> 
    >>> 
    >>> 
    >> 
    >> Ashley Betts
    >> 
    >> Saltbush Software
    >> Excellence in Software Engineering Practices
    >> 
    >> email: Ashley.Betts at saltbushsoftware.com
    >> 	      Ashley.Betts at sbsw.com.au
    >> web:   http://www.saltbushsoftware.com
    >> 	      http://www.sbsw.com.au
    >> 
    > 
    > -- 
    > Peter Dalgaard, Professor,
    > Center for Statistics, Copenhagen Business School
    > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
    > Phone: (+45)38153501
    > Office: A 4.23
    > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
    > 
    > 
    > 
    > 
    > 
    > 
    > 
    > 
    > 
    
    Ashley Betts
    
    Saltbush Software
    Excellence in Software Engineering Practices
    
    email: Ashley.Betts at saltbushsoftware.com
    	      Ashley.Betts at sbsw.com.au
    web:   http://www.saltbushsoftware.com
    	      http://www.sbsw.com.au
    
    
    	[[alternative HTML version deleted]]
    
    _______________________________________________
    R-SIG-Mac mailing list
    R-SIG-Mac at r-project.org
    https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From bogaso.christofer at gmail.com  Mon Jul 10 23:02:03 2017
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 11 Jul 2017 02:32:03 +0530
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
Message-ID: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>

Hi,

I wanted R to open any Help page in html permanently.

So 1st I created .Rprofile file with below code in terminal:

touch ~/.Rprofile

open -a Textedit ~/.Rprofile


And then in the .Rprofile file, I wrote below code :

options(help_type = ?html?)

However after that when I start R (from Terminal) I get below error on loading R

Error: 1:20: unexpected input

1: options(help_type = ?

                       ^

[Previously saved workspace restored]


>

Can someone please point me on where I made mistake.

Thanks for your time.


From pdalgd at gmail.com  Mon Jul 10 23:35:26 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 10 Jul 2017 23:35:26 +0200
Subject: [R-SIG-Mac] Poor plotting performance on Mac OS X
In-Reply-To: <418C24EE-C1C4-4C77-92D0-2FE03793EC46@llnl.gov>
References: <7699A607-2DE4-4A35-A334-CEB4076A187D@saltbushsoftware.com>
 <35E7A05E-FD0F-416B-B850-E2E8B7DF8A54@gmail.com>
 <54637E55-9EB1-4416-8C29-61C8070ADD77@saltbushsoftware.com>
 <2679D8C4-2482-4099-9AFF-EE9A8248A950@gmail.com>
 <1AD66CAA-D6A0-4A5B-B0F3-823C91361CA0@saltbushsoftware.com>
 <418C24EE-C1C4-4C77-92D0-2FE03793EC46@llnl.gov>
Message-ID: <9AF2B052-3B64-4C0B-A07D-7B870C187C84@gmail.com>

Thanks Don,

Can you perhaps make that a little closer to being reproducible for people who might want to try it on newer hardware? (packages, location of input file).

(And by the way, xterm? What did Terminal.app do to you?)

This, along with a thread from 2014 that Google dug up, strongly suggests that quartz() is the culprit. It might not be our fault though, as it seems that "matplotlib" (Python) has had similar problems. In the latter case, it seems to have worked to "switch to the agg backend", whatever that means. (AGG is AntiGrain Geometry, which is apparently so stable that it hasn't changed since 2006. Its author died suddenly in 2013, it seems.)

-pd


> On 10 Jul 2017, at 19:59 , MacQueen, Don <macqueen1 at llnl.gov> wrote:
> 
> For what it's worth, here is my experience on a late 2013 Mac Pro.
> (I normally run R from an xterm shell within an X Windows context)
> 
> The best performance for displaying the image on-screen uses cairographics and Polypath. It's the only one fast enough to be satisfactory for interactive use, in my opinion [though x11(type='Xlib') could be tolerated]. pdf() is even faster.
> 
> -Don
> 
>> nsw <- readOGR('data','SA3_2016_AUST', stringsAsFactors=FALSE)
> OGR data source with driver: ESRI Shapefile 
> Source: "data", layer: "SA3_2016_AUST"
> with 358 features
> It has 9 fields
> Warning message:
> In readOGR("data", "SA3_2016_AUST", stringsAsFactors = FALSE) :
>  Dropping null geometries: 93, 94, 161, 162, 245, 246, 275, 276, 311, 312, 328, 329, 339, 340, 351, 352, 357, 358
> 
> ## The "original" X windows device (does not support Polypath)
>> x11(type='Xlib')
>> system.time( plot(nsw, usePolypath=FALSE) )
>   user  system elapsed 
>  0.882   0.512  99.618 
> 
> ## a more "modern" version of the X windows device
>> x11(type='cairo')
>> system.time( plot(nsw, usePolypath=FALSE) )
>   user  system elapsed 
>  2.233   5.007  68.410 
> 
> 
> ## Polypath gives large improvement
>> x11(type='cairo')
>> system.time( plot(nsw, usePolypath=TRUE) )
>   user  system elapsed 
>  1.772   0.461   5.785 
> 
> ## Same R session as above, but using the quartz device
>> quartz()
>> system.time( plot(nsw) )
>    user   system  elapsed 
> 1135.606    1.556 1137.445 
> 
>> pdf('test.pdf')
>> system.time( plot(nsw) )
>   user  system elapsed 
>  2.029   0.200   2.248 
>> dev.off()
> 
> 
>> sessionInfo()
> R version 3.4.1 (2017-06-30)
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> Running under: OS X El Capitan 10.11.6
> 
> Matrix products: default
> BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] C
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> other attached packages:
> [1] rgdal_1.2-8 sp_1.2-5   
> 
> loaded via a namespace (and not attached):
> [1] compiler_3.4.1  tools_3.4.1     grid_3.4.1      lattice_0.20-35
> 
> 
> -- 
> Don MacQueen
> 
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> 
> 
> On 7/10/17, 4:40 AM, "R-SIG-Mac on behalf of Ashley Betts" <r-sig-mac-bounces at r-project.org on behalf of Ashley.Betts at saltbushsoftware.com> wrote:
> 
>    Hi Peter, outputting to PDF made a huge difference! It ran for only 15 seconds and there was no trailing unresponsive prompt. The PDF ended up being around 2Mb and opened and displayed almost immediately in Preview.
> 
>    I did watch the system when I was outputting to the quartz device last time and the process was steadily consuming a single core. When I watched it on the Windows machines I saw it use most of the cores but not to capacity. After seeing this I read up on multithreading libraries on Mac and finally setup R to use the Accelerate library. I?ve verified this library is being loaded by sampling the process. It make zero difference however and the print(plt) still only consumes a single core.
> 
>    Regards,
> 
>    Ashley
> 
>> On 10 Jul 2017, at 6:21 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> Pretty clear that the process is getting stuck in Apple-graphics land, then. This could be inefficiency of the device driver, but also just ... Apple. Could you try running the same thing to a PDF (AFAIR, just open the device with pdf(file="myplot.pdf"), then print(plt), then dev.off()). It would be good to know if this is fast, and also whether viewing the resulting PDF in Preview is slow (in which case it is Not Our Problem).
>> 
>> Also, does running the Activity Monitor give any clues? Like, perhaps you are running out of memory. 
>> 
>> -pd
>> 
>>> On 10 Jul 2017, at 00:05 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
>>> 
>>> Oh yes, sorry about that. I originally had screen shots attached showing the timings but the email ended up being too large. All of the time is in the print. Nearly all other commands run within seconds. Oddly, after approximately half hour the prompt returns which I get one Sys.time() to execute but then the prompt hangs when I enter the second Sys.time() for the best part of an hour and half.
>>> 
>>> I tried to profile but that failed. I tried sampling the process a number of times and every time I sampled execution was buried in CGContextDrawPath
>>> GEPolygon  (in libR.dylib) + 127  [0x101cb54df]  engine.c:0
>>>   +                                                                                                                                                                               2502 clipPolygon  (in libR.dylib) + 571  [0x101cb574b]  engine.c:1080
>>>   +                                                                                                                                                                                 2502 CGContextDrawPath  (in CoreGraphics) + 181  [0x7fff8d433e59]
>>>   +                                                                                                                                                                                   2502 ripc_DrawPath  (in libRIP.A.dylib) + 417  [0x7fff8ec631a3]
>>>   +                                                                                                                                                                                     2502 ripc_Render  (in libRIP.A.dylib) + 380  [0x7fff8ec4f750]
>>>   +                                                                                                                                                                                       2502 RIPRenderCoverage  (in libRIP.A.dylib) + 1844  [0x7fff8ec4ff84]
>>> 
>>> 
>>> Regards,
>>> 
>>> Ashley
>>> 
>>> <macplottimes.jpg>
>>> 
>>> 
>>>> On 9 Jul 2017, at 9:35 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>>>> 
>>>> Hmm, you're not telling us much about where the time is being spent. Some more detailed timing using system.time() could be useful.
>>>> 
>>>> If it is a graphics device issue, I would expect almost everything in the final print(plt). You could try switching graphics device, e.g. to pdf() which should be pretty much the same on all platforms. You might also try creating PDF files on one machine and displaying on the other. 
>>>> 
>>>> -pd 
>>>> 
>>>>> On 9 Jul 2017, at 12:45 , Ashley Betts <Ashley.Betts at saltbushsoftware.com> wrote:
>>>>> 
>>>>> Hi All,
>>>>> I'm quite new to R and recently started investigating the geospatial plotting capabilities of R via ggplot2. I started by using some of the publicly available datasets from the Australian Bureau of Statistics. Plotting the Level 3 Statistical Area boundaries took over 2 hours on my 2012 Mac Book Pro. As there were over 3M rows in the fortify?ed data frame I initially thought this was just how long it must take. I then ran the exact same script on my work laptop which is similarly spec?ed and it ran in approximately 30 seconds. This now has me extremely disappointed in the performance on the Mac which is where I use R the most. I changed my BLAS library to the Accelerate library in a whim that this might make a difference. It did not. Whilst I primarily use RStudio I also ran the same script in R.app and if there was any improvement it was not noticeable. I did notice in the Windows run that it seemed to use multiple cores (which is what made me investigate the BLAS change) whilst the Mac seems to stay bound to a single core. My initial thoughts were that it must be something to do with ggplot but after sampling the rsession process a number of times (see attached Sample of rsession.txt) it appears to be spending most of it?s time in CGContextDrawPath in Apples CoreGraphics so I assume it is a Graphics related issue. I?m running R 3.4 on my Mac and 3.3.2 on the Windows machine. I?ve attached the script and have screen dumps of the process sample text and a number of others which I can supply if helpful in analysing the issue. Could someone possibly let me know if this is PEBCAK issue or an actual problem with R. If the later how do I go about getting the issue resolved?
>>>>> 
>>>>> The SA3 boundary data is available here:
>>>>> 
>>>>> http://www.abs.gov.au/AUSSTATS/abs at .nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument
>>>>> 
>>>>> as 'Statistical Area Level 3 (SA3) ASGS Ed 2016 Digital Boundaries in ESRI Shapefile Format?
>>>>> 
>>>>> Regards,
>>>>> 
>>>>> Ashley
>>>>> 
>>>>> <aus_pop_analysis.R>
>>>>> 
>>>>> 
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> -- 
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>> 
>>> Ashley Betts
>>> 
>>> Saltbush Software
>>> Excellence in Software Engineering Practices
>>> 
>>> email: Ashley.Betts at saltbushsoftware.com
>>> 	      Ashley.Betts at sbsw.com.au
>>> web:   http://www.saltbushsoftware.com
>>> 	      http://www.sbsw.com.au
>>> 
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
> 
>    Ashley Betts
> 
>    Saltbush Software
>    Excellence in Software Engineering Practices
> 
>    email: Ashley.Betts at saltbushsoftware.com
>    	      Ashley.Betts at sbsw.com.au
>    web:   http://www.saltbushsoftware.com
>    	      http://www.sbsw.com.au
> 
> 
>    	[[alternative HTML version deleted]]
> 
>    _______________________________________________
>    R-SIG-Mac mailing list
>    R-SIG-Mac at r-project.org
>    https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch.duncan at gmail.com  Tue Jul 11 00:19:07 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 10 Jul 2017 18:19:07 -0400
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
Message-ID: <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>

On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
> Hi,
>
> I wanted R to open any Help page in html permanently.
>
> So 1st I created .Rprofile file with below code in terminal:
>
> touch ~/.Rprofile
>
> open -a Textedit ~/.Rprofile
>
>
> And then in the .Rprofile file, I wrote below code :
>
> options(help_type = ?html?)
>
> However after that when I start R (from Terminal) I get below error on loading R
>
> Error: 1:20: unexpected input
>
> 1: options(help_type = ?
>
>                        ^

Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, 
and it won't put in funny "smart quotes".

Duncan Murdoch

>
> [Previously saved workspace restored]
>
>
>>
>
> Can someone please point me on where I made mistake.
>
> Thanks for your time.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From marc_schwartz at me.com  Tue Jul 11 03:58:11 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Mon, 10 Jul 2017 20:58:11 -0500
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
Message-ID: <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>


> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>> Hi,
>> 
>> I wanted R to open any Help page in html permanently.
>> 
>> So 1st I created .Rprofile file with below code in terminal:
>> 
>> touch ~/.Rprofile
>> 
>> open -a Textedit ~/.Rprofile
>> 
>> 
>> And then in the .Rprofile file, I wrote below code :
>> 
>> options(help_type = ?html?)
>> 
>> However after that when I start R (from Terminal) I get below error on loading R
>> 
>> Error: 1:20: unexpected input
>> 
>> 1: options(help_type = ?
>> 
>>                       ^
> 
> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".


Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:

  Preferences -> New Document

There is a checkbox under Options for Smart quotes. Uncheck it.

Regards,

Marc Schwartz


> 
> Duncan Murdoch
> 
>> 
>> [Previously saved workspace restored]
>> 
>> 
>>> 
>> 
>> Can someone please point me on where I made mistake.
>> 
>> Thanks for your time.


From bogaso.christofer at gmail.com  Tue Jul 11 05:33:27 2017
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 11 Jul 2017 09:03:27 +0530
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
Message-ID: <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>

Performed steps according to Marc's suggestions :

But not help page is not openning in Browser.

On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>
>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>> Hi,
>>>
>>> I wanted R to open any Help page in html permanently.
>>>
>>> So 1st I created .Rprofile file with below code in terminal:
>>>
>>> touch ~/.Rprofile
>>>
>>> open -a Textedit ~/.Rprofile
>>>
>>>
>>> And then in the .Rprofile file, I wrote below code :
>>>
>>> options(help_type = ?html?)
>>>
>>> However after that when I start R (from Terminal) I get below error on loading R
>>>
>>> Error: 1:20: unexpected input
>>>
>>> 1: options(help_type = ?
>>>
>>>                       ^
>>
>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>
>
> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>
>   Preferences -> New Document
>
> There is a checkbox under Options for Smart quotes. Uncheck it.
>
> Regards,
>
> Marc Schwartz
>
>
>>
>> Duncan Murdoch
>>
>>>
>>> [Previously saved workspace restored]
>>>
>>>
>>>>
>>>
>>> Can someone please point me on where I made mistake.
>>>
>>> Thanks for your time.
>


From marc_schwartz at me.com  Tue Jul 11 13:46:33 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Tue, 11 Jul 2017 06:46:33 -0500
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
Message-ID: <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>


> On Jul 10, 2017, at 10:33 PM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
> 
> Performed steps according to Marc's suggestions :
> 
> But not help page is not openning in Browser.


Are you getting the same error as before?

Do the single quotes still look like smart quotes or regular ASCII quotes?

Marc


> 
> On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>> 
>>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> 
>>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>>> Hi,
>>>> 
>>>> I wanted R to open any Help page in html permanently.
>>>> 
>>>> So 1st I created .Rprofile file with below code in terminal:
>>>> 
>>>> touch ~/.Rprofile
>>>> 
>>>> open -a Textedit ~/.Rprofile
>>>> 
>>>> 
>>>> And then in the .Rprofile file, I wrote below code :
>>>> 
>>>> options(help_type = ?html?)
>>>> 
>>>> However after that when I start R (from Terminal) I get below error on loading R
>>>> 
>>>> Error: 1:20: unexpected input
>>>> 
>>>> 1: options(help_type = ?
>>>> 
>>>>                      ^
>>> 
>>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>> 
>> 
>> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>> 
>>  Preferences -> New Document
>> 
>> There is a checkbox under Options for Smart quotes. Uncheck it.
>> 
>> Regards,
>> 
>> Marc Schwartz
>> 
>> 
>>> 
>>> Duncan Murdoch
>>> 
>>>> 
>>>> [Previously saved workspace restored]
>>>> 
>>>> 
>>>>> 
>>>> 
>>>> Can someone please point me on where I made mistake.
>>>> 
>>>> Thanks for your time.
>> 


From bogaso.christofer at gmail.com  Tue Jul 11 16:10:29 2017
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 11 Jul 2017 19:40:29 +0530
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
 <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
Message-ID: <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>

I am not getting error.

However help page is not opening in html.

On Tue, Jul 11, 2017 at 5:16 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>
>> On Jul 10, 2017, at 10:33 PM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>
>> Performed steps according to Marc's suggestions :
>>
>> But not help page is not openning in Browser.
>
>
> Are you getting the same error as before?
>
> Do the single quotes still look like smart quotes or regular ASCII quotes?
>
> Marc
>
>
>>
>> On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>
>>>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>
>>>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>>>> Hi,
>>>>>
>>>>> I wanted R to open any Help page in html permanently.
>>>>>
>>>>> So 1st I created .Rprofile file with below code in terminal:
>>>>>
>>>>> touch ~/.Rprofile
>>>>>
>>>>> open -a Textedit ~/.Rprofile
>>>>>
>>>>>
>>>>> And then in the .Rprofile file, I wrote below code :
>>>>>
>>>>> options(help_type = ?html?)
>>>>>
>>>>> However after that when I start R (from Terminal) I get below error on loading R
>>>>>
>>>>> Error: 1:20: unexpected input
>>>>>
>>>>> 1: options(help_type = ?
>>>>>
>>>>>                      ^
>>>>
>>>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>>>
>>>
>>> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>>>
>>>  Preferences -> New Document
>>>
>>> There is a checkbox under Options for Smart quotes. Uncheck it.
>>>
>>> Regards,
>>>
>>> Marc Schwartz
>>>
>>>
>>>>
>>>> Duncan Murdoch
>>>>
>>>>>
>>>>> [Previously saved workspace restored]
>>>>>
>>>>>
>>>>>>
>>>>>
>>>>> Can someone please point me on where I made mistake.
>>>>>
>>>>> Thanks for your time.
>>>
>


From btupper at bigelow.org  Tue Jul 11 16:15:36 2017
From: btupper at bigelow.org (Ben Tupper)
Date: Tue, 11 Jul 2017 10:15:36 -0400
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
 <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
 <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>
Message-ID: <FB09B387-0F70-446A-89D0-D13F60C993E5@bigelow.org>

Hi,

I'm curious about what happens if you start a plain R session at the command line (not R.app) and set the option within the session.  Something like the following that open help in my browser.

$ R --vanilla

R version 3.3.1 (2016-06-21) -- "Bug in Your Hair"
Copyright (C) 2016 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin13.4.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> options(help_type = 'html')
> ?source
starting httpd help server ... done

Ben





> On Jul 11, 2017, at 10:10 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
> 
> I am not getting error.
> 
> However help page is not opening in html.
> 
> On Tue, Jul 11, 2017 at 5:16 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>> 
>>> On Jul 10, 2017, at 10:33 PM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>> 
>>> Performed steps according to Marc's suggestions :
>>> 
>>> But not help page is not openning in Browser.
>> 
>> 
>> Are you getting the same error as before?
>> 
>> Do the single quotes still look like smart quotes or regular ASCII quotes?
>> 
>> Marc
>> 
>> 
>>> 
>>> On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>> 
>>>>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>> 
>>>>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>>>>> Hi,
>>>>>> 
>>>>>> I wanted R to open any Help page in html permanently.
>>>>>> 
>>>>>> So 1st I created .Rprofile file with below code in terminal:
>>>>>> 
>>>>>> touch ~/.Rprofile
>>>>>> 
>>>>>> open -a Textedit ~/.Rprofile
>>>>>> 
>>>>>> 
>>>>>> And then in the .Rprofile file, I wrote below code :
>>>>>> 
>>>>>> options(help_type = ?html?)
>>>>>> 
>>>>>> However after that when I start R (from Terminal) I get below error on loading R
>>>>>> 
>>>>>> Error: 1:20: unexpected input
>>>>>> 
>>>>>> 1: options(help_type = ?
>>>>>> 
>>>>>>                     ^
>>>>> 
>>>>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>>>> 
>>>> 
>>>> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>>>> 
>>>> Preferences -> New Document
>>>> 
>>>> There is a checkbox under Options for Smart quotes. Uncheck it.
>>>> 
>>>> Regards,
>>>> 
>>>> Marc Schwartz
>>>> 
>>>> 
>>>>> 
>>>>> Duncan Murdoch
>>>>> 
>>>>>> 
>>>>>> [Previously saved workspace restored]
>>>>>> 
>>>>>> 
>>>>>>> 
>>>>>> 
>>>>>> Can someone please point me on where I made mistake.
>>>>>> 
>>>>>> Thanks for your time.
>>>> 
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecocast Reports: http://seascapemodeling.org/ecocast.html
Tick Reports: https://report.bigelow.org/tick/
Jellyfish Reports: https://jellyfish.bigelow.org/jellyfish/


From bogaso.christofer at gmail.com  Tue Jul 11 16:48:59 2017
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 11 Jul 2017 20:18:59 +0530
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <FB09B387-0F70-446A-89D0-D13F60C993E5@bigelow.org>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
 <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
 <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>
 <FB09B387-0F70-446A-89D0-D13F60C993E5@bigelow.org>
Message-ID: <CA+dpOJnkfv+eEOL03RFqGoBD164r=MOrL6diOVPFNxwhbg1Y8Q@mail.gmail.com>

Hi Ben,

I work with R from Terminal only.

If I explicitly set ' options(help_type = 'html')' after opening R in
terminal, it works perfectly. Means, help page opens in Browser.

However I do not want to have this code ' options(help_type = 'html')'
every time I open R. So I want R to set this option all time. Thats
why I chose to create .RProfile file and put that code there. However
in that case, it is not working.

Below is the snapshot like yours :

R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"

Copyright (C) 2017 The R Foundation for Statistical Computing

Platform: x86_64-apple-darwin15.6.0 (64-bit)


R is free software and comes with ABSOLUTELY NO WARRANTY.

You are welcome to redistribute it under certain conditions.

Type 'license()' or 'licence()' for distribution details.


  Natural language support but running in an English locale


R is a collaborative project with many contributors.

Type 'contributors()' for more information and

'citation()' on how to cite R or R packages in publications.


Type 'demo()' for some demos, 'help()' for on-line help, or

'help.start()' for an HTML browser interface to help.

Type 'q()' to quit R.


[Previously saved workspace restored]


> ?sum































sum                    package:base                    R Documentation


Sum of Vector Elements


Description:


     ?sum? returns the sum of all the values present in its arguments.


Usage:


     sum(..., na.rm = FALSE)



On Tue, Jul 11, 2017 at 7:45 PM, Ben Tupper <btupper at bigelow.org> wrote:
> Hi,
>
> I'm curious about what happens if you start a plain R session at the command line (not R.app) and set the option within the session.  Something like the following that open help in my browser.
>
> $ R --vanilla
>
> R version 3.3.1 (2016-06-21) -- "Bug in Your Hair"
> Copyright (C) 2016 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>   Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
>> options(help_type = 'html')
>> ?source
> starting httpd help server ... done
>
> Ben
>
>
>
>
>
>> On Jul 11, 2017, at 10:10 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>
>> I am not getting error.
>>
>> However help page is not opening in html.
>>
>> On Tue, Jul 11, 2017 at 5:16 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>
>>>> On Jul 10, 2017, at 10:33 PM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>
>>>> Performed steps according to Marc's suggestions :
>>>>
>>>> But not help page is not openning in Browser.
>>>
>>>
>>> Are you getting the same error as before?
>>>
>>> Do the single quotes still look like smart quotes or regular ASCII quotes?
>>>
>>> Marc
>>>
>>>
>>>>
>>>> On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>>>
>>>>>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>>>
>>>>>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>>>>>> Hi,
>>>>>>>
>>>>>>> I wanted R to open any Help page in html permanently.
>>>>>>>
>>>>>>> So 1st I created .Rprofile file with below code in terminal:
>>>>>>>
>>>>>>> touch ~/.Rprofile
>>>>>>>
>>>>>>> open -a Textedit ~/.Rprofile
>>>>>>>
>>>>>>>
>>>>>>> And then in the .Rprofile file, I wrote below code :
>>>>>>>
>>>>>>> options(help_type = ?html?)
>>>>>>>
>>>>>>> However after that when I start R (from Terminal) I get below error on loading R
>>>>>>>
>>>>>>> Error: 1:20: unexpected input
>>>>>>>
>>>>>>> 1: options(help_type = ?
>>>>>>>
>>>>>>>                     ^
>>>>>>
>>>>>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>>>>>
>>>>>
>>>>> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>>>>>
>>>>> Preferences -> New Document
>>>>>
>>>>> There is a checkbox under Options for Smart quotes. Uncheck it.
>>>>>
>>>>> Regards,
>>>>>
>>>>> Marc Schwartz
>>>>>
>>>>>
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>>>
>>>>>>> [Previously saved workspace restored]
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> Can someone please point me on where I made mistake.
>>>>>>>
>>>>>>> Thanks for your time.
>>>>>
>>>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
> Ecocast Reports: http://seascapemodeling.org/ecocast.html
> Tick Reports: https://report.bigelow.org/tick/
> Jellyfish Reports: https://jellyfish.bigelow.org/jellyfish/
>
>
>


From marc_schwartz at me.com  Tue Jul 11 16:51:50 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Tue, 11 Jul 2017 09:51:50 -0500
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <CA+dpOJnkfv+eEOL03RFqGoBD164r=MOrL6diOVPFNxwhbg1Y8Q@mail.gmail.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
 <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
 <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>
 <FB09B387-0F70-446A-89D0-D13F60C993E5@bigelow.org>
 <CA+dpOJnkfv+eEOL03RFqGoBD164r=MOrL6diOVPFNxwhbg1Y8Q@mail.gmail.com>
Message-ID: <806EA055-ACD7-4DC4-B17D-419FD248627C@me.com>

Christofer,

Can you post your .Rprofile file someplace online (e.g. Dropbox) so that we can take a look at it?

Marc


> On Jul 11, 2017, at 9:48 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
> 
> Hi Ben,
> 
> I work with R from Terminal only.
> 
> If I explicitly set ' options(help_type = 'html')' after opening R in
> terminal, it works perfectly. Means, help page opens in Browser.
> 
> However I do not want to have this code ' options(help_type = 'html')'
> every time I open R. So I want R to set this option all time. Thats
> why I chose to create .RProfile file and put that code there. However
> in that case, it is not working.
> 
> Below is the snapshot like yours :
> 
> R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
> 
> Copyright (C) 2017 The R Foundation for Statistical Computing
> 
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> 
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> 
> You are welcome to redistribute it under certain conditions.
> 
> Type 'license()' or 'licence()' for distribution details.
> 
> 
>  Natural language support but running in an English locale
> 
> 
> R is a collaborative project with many contributors.
> 
> Type 'contributors()' for more information and
> 
> 'citation()' on how to cite R or R packages in publications.
> 
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 
> 'help.start()' for an HTML browser interface to help.
> 
> Type 'q()' to quit R.
> 
> 
> [Previously saved workspace restored]
> 
> 
>> ?sum
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> sum                    package:base                    R Documentation
> 
> 
> Sum of Vector Elements
> 
> 
> Description:
> 
> 
>     ?sum? returns the sum of all the values present in its arguments.
> 
> 
> Usage:
> 
> 
>     sum(..., na.rm = FALSE)
> 
> 
> 
> On Tue, Jul 11, 2017 at 7:45 PM, Ben Tupper <btupper at bigelow.org> wrote:
>> Hi,
>> 
>> I'm curious about what happens if you start a plain R session at the command line (not R.app) and set the option within the session.  Something like the following that open help in my browser.
>> 
>> $ R --vanilla
>> 
>> R version 3.3.1 (2016-06-21) -- "Bug in Your Hair"
>> Copyright (C) 2016 The R Foundation for Statistical Computing
>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>> 
>>  Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>>> options(help_type = 'html')
>>> ?source
>> starting httpd help server ... done
>> 
>> Ben
>> 
>> 
>> 
>> 
>> 
>>> On Jul 11, 2017, at 10:10 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>> 
>>> I am not getting error.
>>> 
>>> However help page is not opening in html.
>>> 
>>> On Tue, Jul 11, 2017 at 5:16 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>> 
>>>>> On Jul 10, 2017, at 10:33 PM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>> 
>>>>> Performed steps according to Marc's suggestions :
>>>>> 
>>>>> But not help page is not openning in Browser.
>>>> 
>>>> 
>>>> Are you getting the same error as before?
>>>> 
>>>> Do the single quotes still look like smart quotes or regular ASCII quotes?
>>>> 
>>>> Marc
>>>> 
>>>> 
>>>>> 
>>>>> On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>>>> 
>>>>>>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>>>> 
>>>>>>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>>>>>>> Hi,
>>>>>>>> 
>>>>>>>> I wanted R to open any Help page in html permanently.
>>>>>>>> 
>>>>>>>> So 1st I created .Rprofile file with below code in terminal:
>>>>>>>> 
>>>>>>>> touch ~/.Rprofile
>>>>>>>> 
>>>>>>>> open -a Textedit ~/.Rprofile
>>>>>>>> 
>>>>>>>> 
>>>>>>>> And then in the .Rprofile file, I wrote below code :
>>>>>>>> 
>>>>>>>> options(help_type = ?html?)
>>>>>>>> 
>>>>>>>> However after that when I start R (from Terminal) I get below error on loading R
>>>>>>>> 
>>>>>>>> Error: 1:20: unexpected input
>>>>>>>> 
>>>>>>>> 1: options(help_type = ?
>>>>>>>> 
>>>>>>>>                    ^
>>>>>>> 
>>>>>>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>>>>>> 
>>>>>> 
>>>>>> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>>>>>> 
>>>>>> Preferences -> New Document
>>>>>> 
>>>>>> There is a checkbox under Options for Smart quotes. Uncheck it.
>>>>>> 
>>>>>> Regards,
>>>>>> 
>>>>>> Marc Schwartz
>>>>>> 
>>>>>> 
>>>>>>> 
>>>>>>> Duncan Murdoch
>>>>>>> 
>>>>>>>> 
>>>>>>>> [Previously saved workspace restored]
>>>>>>>> 
>>>>>>>> 
>>>>>>>>> 
>>>>>>>> 
>>>>>>>> Can someone please point me on where I made mistake.
>>>>>>>> 
>>>>>>>> Thanks for your time.
>>>>>> 
>>>> 


From bogaso.christofer at gmail.com  Tue Jul 11 16:52:58 2017
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 11 Jul 2017 20:22:58 +0530
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <806EA055-ACD7-4DC4-B17D-419FD248627C@me.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
 <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
 <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>
 <FB09B387-0F70-446A-89D0-D13F60C993E5@bigelow.org>
 <CA+dpOJnkfv+eEOL03RFqGoBD164r=MOrL6diOVPFNxwhbg1Y8Q@mail.gmail.com>
 <806EA055-ACD7-4DC4-B17D-419FD248627C@me.com>
Message-ID: <CA+dpOJmstscn1DvpUUu49LNj3rEDOhboauD2JjwgdH94WKcRHw@mail.gmail.com>

Hi,

I just put options(help_type = "html") inside .First <- function() {}
and now it works. Help page is now opening in Browser.

Thanks all for your time and help. Regards,



On Tue, Jul 11, 2017 at 8:21 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
> Christofer,
>
> Can you post your .Rprofile file someplace online (e.g. Dropbox) so that we can take a look at it?
>
> Marc
>
>
>> On Jul 11, 2017, at 9:48 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>
>> Hi Ben,
>>
>> I work with R from Terminal only.
>>
>> If I explicitly set ' options(help_type = 'html')' after opening R in
>> terminal, it works perfectly. Means, help page opens in Browser.
>>
>> However I do not want to have this code ' options(help_type = 'html')'
>> every time I open R. So I want R to set this option all time. Thats
>> why I chose to create .RProfile file and put that code there. However
>> in that case, it is not working.
>>
>> Below is the snapshot like yours :
>>
>> R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
>>
>> Copyright (C) 2017 The R Foundation for Statistical Computing
>>
>> Platform: x86_64-apple-darwin15.6.0 (64-bit)
>>
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>
>> You are welcome to redistribute it under certain conditions.
>>
>> Type 'license()' or 'licence()' for distribution details.
>>
>>
>>  Natural language support but running in an English locale
>>
>>
>> R is a collaborative project with many contributors.
>>
>> Type 'contributors()' for more information and
>>
>> 'citation()' on how to cite R or R packages in publications.
>>
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>
>> 'help.start()' for an HTML browser interface to help.
>>
>> Type 'q()' to quit R.
>>
>>
>> [Previously saved workspace restored]
>>
>>
>>> ?sum
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> sum                    package:base                    R Documentation
>>
>>
>> Sum of Vector Elements
>>
>>
>> Description:
>>
>>
>>     ?sum? returns the sum of all the values present in its arguments.
>>
>>
>> Usage:
>>
>>
>>     sum(..., na.rm = FALSE)
>>
>>
>>
>> On Tue, Jul 11, 2017 at 7:45 PM, Ben Tupper <btupper at bigelow.org> wrote:
>>> Hi,
>>>
>>> I'm curious about what happens if you start a plain R session at the command line (not R.app) and set the option within the session.  Something like the following that open help in my browser.
>>>
>>> $ R --vanilla
>>>
>>> R version 3.3.1 (2016-06-21) -- "Bug in Your Hair"
>>> Copyright (C) 2016 The R Foundation for Statistical Computing
>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>>
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>>
>>>  Natural language support but running in an English locale
>>>
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>>
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>>
>>>> options(help_type = 'html')
>>>> ?source
>>> starting httpd help server ... done
>>>
>>> Ben
>>>
>>>
>>>
>>>
>>>
>>>> On Jul 11, 2017, at 10:10 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>
>>>> I am not getting error.
>>>>
>>>> However help page is not opening in html.
>>>>
>>>> On Tue, Jul 11, 2017 at 5:16 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>>>
>>>>>> On Jul 10, 2017, at 10:33 PM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>>>
>>>>>> Performed steps according to Marc's suggestions :
>>>>>>
>>>>>> But not help page is not openning in Browser.
>>>>>
>>>>>
>>>>> Are you getting the same error as before?
>>>>>
>>>>> Do the single quotes still look like smart quotes or regular ASCII quotes?
>>>>>
>>>>> Marc
>>>>>
>>>>>
>>>>>>
>>>>>> On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>>>>>
>>>>>>>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>>>>>
>>>>>>>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>>>>>>>> Hi,
>>>>>>>>>
>>>>>>>>> I wanted R to open any Help page in html permanently.
>>>>>>>>>
>>>>>>>>> So 1st I created .Rprofile file with below code in terminal:
>>>>>>>>>
>>>>>>>>> touch ~/.Rprofile
>>>>>>>>>
>>>>>>>>> open -a Textedit ~/.Rprofile
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> And then in the .Rprofile file, I wrote below code :
>>>>>>>>>
>>>>>>>>> options(help_type = ?html?)
>>>>>>>>>
>>>>>>>>> However after that when I start R (from Terminal) I get below error on loading R
>>>>>>>>>
>>>>>>>>> Error: 1:20: unexpected input
>>>>>>>>>
>>>>>>>>> 1: options(help_type = ?
>>>>>>>>>
>>>>>>>>>                    ^
>>>>>>>>
>>>>>>>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>>>>>>>
>>>>>>>
>>>>>>> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>>>>>>>
>>>>>>> Preferences -> New Document
>>>>>>>
>>>>>>> There is a checkbox under Options for Smart quotes. Uncheck it.
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Marc Schwartz
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>> Duncan Murdoch
>>>>>>>>
>>>>>>>>>
>>>>>>>>> [Previously saved workspace restored]
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Can someone please point me on where I made mistake.
>>>>>>>>>
>>>>>>>>> Thanks for your time.
>>>>>>>
>>>>>
>


From marc_schwartz at me.com  Tue Jul 11 16:59:50 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Tue, 11 Jul 2017 09:59:50 -0500
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <CA+dpOJmstscn1DvpUUu49LNj3rEDOhboauD2JjwgdH94WKcRHw@mail.gmail.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
 <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
 <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>
 <FB09B387-0F70-446A-89D0-D13F60C993E5@bigelow.org>
 <CA+dpOJnkfv+eEOL03RFqGoBD164r=MOrL6diOVPFNxwhbg1Y8Q@mail.gmail.com>
 <806EA055-ACD7-4DC4-B17D-419FD248627C@me.com>
 <CA+dpOJmstscn1DvpUUu49LNj3rEDOhboauD2JjwgdH94WKcRHw@mail.gmail.com>
Message-ID: <E7ECC2B4-5F99-4729-8237-DB6930492798@me.com>

Christofer,

The thing is that you really don't need to do that (use .First), which makes this situation curious and why it would be helpful to see the full content of your .Rprofile file, to be sure that there is not a conflict in content or structure someplace.

An extra set of eyes might be helpful.

Marc

> On Jul 11, 2017, at 9:52 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
> 
> Hi,
> 
> I just put options(help_type = "html") inside .First <- function() {}
> and now it works. Help page is now opening in Browser.
> 
> Thanks all for your time and help. Regards,
> 
> 
> 
> On Tue, Jul 11, 2017 at 8:21 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>> Christofer,
>> 
>> Can you post your .Rprofile file someplace online (e.g. Dropbox) so that we can take a look at it?
>> 
>> Marc
>> 
>> 
>>> On Jul 11, 2017, at 9:48 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>> 
>>> Hi Ben,
>>> 
>>> I work with R from Terminal only.
>>> 
>>> If I explicitly set ' options(help_type = 'html')' after opening R in
>>> terminal, it works perfectly. Means, help page opens in Browser.
>>> 
>>> However I do not want to have this code ' options(help_type = 'html')'
>>> every time I open R. So I want R to set this option all time. Thats
>>> why I chose to create .RProfile file and put that code there. However
>>> in that case, it is not working.
>>> 
>>> Below is the snapshot like yours :
>>> 
>>> R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
>>> 
>>> Copyright (C) 2017 The R Foundation for Statistical Computing
>>> 
>>> Platform: x86_64-apple-darwin15.6.0 (64-bit)
>>> 
>>> 
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> 
>>> You are welcome to redistribute it under certain conditions.
>>> 
>>> Type 'license()' or 'licence()' for distribution details.
>>> 
>>> 
>>> Natural language support but running in an English locale
>>> 
>>> 
>>> R is a collaborative project with many contributors.
>>> 
>>> Type 'contributors()' for more information and
>>> 
>>> 'citation()' on how to cite R or R packages in publications.
>>> 
>>> 
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 
>>> 'help.start()' for an HTML browser interface to help.
>>> 
>>> Type 'q()' to quit R.
>>> 
>>> 
>>> [Previously saved workspace restored]
>>> 
>>> 
>>>> ?sum
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> sum                    package:base                    R Documentation
>>> 
>>> 
>>> Sum of Vector Elements
>>> 
>>> 
>>> Description:
>>> 
>>> 
>>>    ?sum? returns the sum of all the values present in its arguments.
>>> 
>>> 
>>> Usage:
>>> 
>>> 
>>>    sum(..., na.rm = FALSE)
>>> 
>>> 
>>> 
>>> On Tue, Jul 11, 2017 at 7:45 PM, Ben Tupper <btupper at bigelow.org> wrote:
>>>> Hi,
>>>> 
>>>> I'm curious about what happens if you start a plain R session at the command line (not R.app) and set the option within the session.  Something like the following that open help in my browser.
>>>> 
>>>> $ R --vanilla
>>>> 
>>>> R version 3.3.1 (2016-06-21) -- "Bug in Your Hair"
>>>> Copyright (C) 2016 The R Foundation for Statistical Computing
>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>>> 
>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>> You are welcome to redistribute it under certain conditions.
>>>> Type 'license()' or 'licence()' for distribution details.
>>>> 
>>>> Natural language support but running in an English locale
>>>> 
>>>> R is a collaborative project with many contributors.
>>>> Type 'contributors()' for more information and
>>>> 'citation()' on how to cite R or R packages in publications.
>>>> 
>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>> 'help.start()' for an HTML browser interface to help.
>>>> Type 'q()' to quit R.
>>>> 
>>>>> options(help_type = 'html')
>>>>> ?source
>>>> starting httpd help server ... done
>>>> 
>>>> Ben
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>>> On Jul 11, 2017, at 10:10 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>> 
>>>>> I am not getting error.
>>>>> 
>>>>> However help page is not opening in html.
>>>>> 
>>>>> On Tue, Jul 11, 2017 at 5:16 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>>>> 
>>>>>>> On Jul 10, 2017, at 10:33 PM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>>>> 
>>>>>>> Performed steps according to Marc's suggestions :
>>>>>>> 
>>>>>>> But not help page is not openning in Browser.
>>>>>> 
>>>>>> 
>>>>>> Are you getting the same error as before?
>>>>>> 
>>>>>> Do the single quotes still look like smart quotes or regular ASCII quotes?
>>>>>> 
>>>>>> Marc
>>>>>> 
>>>>>> 
>>>>>>> 
>>>>>>> On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>>>>>> 
>>>>>>>>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>>>>>> 
>>>>>>>>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>>>>>>>>> Hi,
>>>>>>>>>> 
>>>>>>>>>> I wanted R to open any Help page in html permanently.
>>>>>>>>>> 
>>>>>>>>>> So 1st I created .Rprofile file with below code in terminal:
>>>>>>>>>> 
>>>>>>>>>> touch ~/.Rprofile
>>>>>>>>>> 
>>>>>>>>>> open -a Textedit ~/.Rprofile
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> And then in the .Rprofile file, I wrote below code :
>>>>>>>>>> 
>>>>>>>>>> options(help_type = ?html?)
>>>>>>>>>> 
>>>>>>>>>> However after that when I start R (from Terminal) I get below error on loading R
>>>>>>>>>> 
>>>>>>>>>> Error: 1:20: unexpected input
>>>>>>>>>> 
>>>>>>>>>> 1: options(help_type = ?
>>>>>>>>>> 
>>>>>>>>>>                   ^
>>>>>>>>> 
>>>>>>>>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>>>>>>>> 
>>>>>>>> 
>>>>>>>> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>>>>>>>> 
>>>>>>>> Preferences -> New Document
>>>>>>>> 
>>>>>>>> There is a checkbox under Options for Smart quotes. Uncheck it.
>>>>>>>> 
>>>>>>>> Regards,
>>>>>>>> 
>>>>>>>> Marc Schwartz
>>>>>>>> 
>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> Duncan Murdoch
>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> [Previously saved workspace restored]
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> Can someone please point me on where I made mistake.
>>>>>>>>>> 
>>>>>>>>>> Thanks for your time.
>>>>>>>> 
>>>>>> 
>> 


From bogaso.christofer at gmail.com  Tue Jul 11 17:55:46 2017
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 11 Jul 2017 21:25:46 +0530
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <E7ECC2B4-5F99-4729-8237-DB6930492798@me.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
 <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
 <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>
 <FB09B387-0F70-446A-89D0-D13F60C993E5@bigelow.org>
 <CA+dpOJnkfv+eEOL03RFqGoBD164r=MOrL6diOVPFNxwhbg1Y8Q@mail.gmail.com>
 <806EA055-ACD7-4DC4-B17D-419FD248627C@me.com>
 <CA+dpOJmstscn1DvpUUu49LNj3rEDOhboauD2JjwgdH94WKcRHw@mail.gmail.com>
 <E7ECC2B4-5F99-4729-8237-DB6930492798@me.com>
Message-ID: <CA+dpOJ=WMQN0SYgd+3Sm82wTii1UfvbrB3HKu159YXysACETLQ@mail.gmail.com>

Hi Marc,

When I enter 'open -a Textedit ~/.Rprofile' in Terminal .RProfie file
opens. Below is the content of that file :

.First <- function() {
    options("repos" = c(CRAN = "http://cran.r-project.org/"))
    options(help_type = "html")
}

An the R window looks like below :

R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"

Copyright (C) 2017 The R Foundation for Statistical Computing

Platform: x86_64-apple-darwin15.6.0 (64-bit)


R is free software and comes with ABSOLUTELY NO WARRANTY.

You are welcome to redistribute it under certain conditions.

Type 'license()' or 'licence()' for distribution details.


  Natural language support but running in an English locale


R is a collaborative project with many contributors.

Type 'contributors()' for more information and

'citation()' on how to cite R or R packages in publications.


Type 'demo()' for some demos, 'help()' for on-line help, or

'help.start()' for an HTML browser interface to help.

Type 'q()' to quit R.


[Previously saved workspace restored]


> ?sum

starting httpd help server ... done

>


Please let me know if you need anything else.

Thanks,

On Tue, Jul 11, 2017 at 8:29 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
> Christofer,
>
> The thing is that you really don't need to do that (use .First), which makes this situation curious and why it would be helpful to see the full content of your .Rprofile file, to be sure that there is not a conflict in content or structure someplace.
>
> An extra set of eyes might be helpful.
>
> Marc
>
>> On Jul 11, 2017, at 9:52 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>
>> Hi,
>>
>> I just put options(help_type = "html") inside .First <- function() {}
>> and now it works. Help page is now opening in Browser.
>>
>> Thanks all for your time and help. Regards,
>>
>>
>>
>> On Tue, Jul 11, 2017 at 8:21 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>> Christofer,
>>>
>>> Can you post your .Rprofile file someplace online (e.g. Dropbox) so that we can take a look at it?
>>>
>>> Marc
>>>
>>>
>>>> On Jul 11, 2017, at 9:48 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>
>>>> Hi Ben,
>>>>
>>>> I work with R from Terminal only.
>>>>
>>>> If I explicitly set ' options(help_type = 'html')' after opening R in
>>>> terminal, it works perfectly. Means, help page opens in Browser.
>>>>
>>>> However I do not want to have this code ' options(help_type = 'html')'
>>>> every time I open R. So I want R to set this option all time. Thats
>>>> why I chose to create .RProfile file and put that code there. However
>>>> in that case, it is not working.
>>>>
>>>> Below is the snapshot like yours :
>>>>
>>>> R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
>>>>
>>>> Copyright (C) 2017 The R Foundation for Statistical Computing
>>>>
>>>> Platform: x86_64-apple-darwin15.6.0 (64-bit)
>>>>
>>>>
>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>>
>>>> You are welcome to redistribute it under certain conditions.
>>>>
>>>> Type 'license()' or 'licence()' for distribution details.
>>>>
>>>>
>>>> Natural language support but running in an English locale
>>>>
>>>>
>>>> R is a collaborative project with many contributors.
>>>>
>>>> Type 'contributors()' for more information and
>>>>
>>>> 'citation()' on how to cite R or R packages in publications.
>>>>
>>>>
>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>>
>>>> 'help.start()' for an HTML browser interface to help.
>>>>
>>>> Type 'q()' to quit R.
>>>>
>>>>
>>>> [Previously saved workspace restored]
>>>>
>>>>
>>>>> ?sum
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> sum                    package:base                    R Documentation
>>>>
>>>>
>>>> Sum of Vector Elements
>>>>
>>>>
>>>> Description:
>>>>
>>>>
>>>>    ?sum? returns the sum of all the values present in its arguments.
>>>>
>>>>
>>>> Usage:
>>>>
>>>>
>>>>    sum(..., na.rm = FALSE)
>>>>
>>>>
>>>>
>>>> On Tue, Jul 11, 2017 at 7:45 PM, Ben Tupper <btupper at bigelow.org> wrote:
>>>>> Hi,
>>>>>
>>>>> I'm curious about what happens if you start a plain R session at the command line (not R.app) and set the option within the session.  Something like the following that open help in my browser.
>>>>>
>>>>> $ R --vanilla
>>>>>
>>>>> R version 3.3.1 (2016-06-21) -- "Bug in Your Hair"
>>>>> Copyright (C) 2016 The R Foundation for Statistical Computing
>>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>>>>
>>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>>> You are welcome to redistribute it under certain conditions.
>>>>> Type 'license()' or 'licence()' for distribution details.
>>>>>
>>>>> Natural language support but running in an English locale
>>>>>
>>>>> R is a collaborative project with many contributors.
>>>>> Type 'contributors()' for more information and
>>>>> 'citation()' on how to cite R or R packages in publications.
>>>>>
>>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>>> 'help.start()' for an HTML browser interface to help.
>>>>> Type 'q()' to quit R.
>>>>>
>>>>>> options(help_type = 'html')
>>>>>> ?source
>>>>> starting httpd help server ... done
>>>>>
>>>>> Ben
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> On Jul 11, 2017, at 10:10 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>>>
>>>>>> I am not getting error.
>>>>>>
>>>>>> However help page is not opening in html.
>>>>>>
>>>>>> On Tue, Jul 11, 2017 at 5:16 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>>>>>
>>>>>>>> On Jul 10, 2017, at 10:33 PM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>>>>>>>
>>>>>>>> Performed steps according to Marc's suggestions :
>>>>>>>>
>>>>>>>> But not help page is not openning in Browser.
>>>>>>>
>>>>>>>
>>>>>>> Are you getting the same error as before?
>>>>>>>
>>>>>>> Do the single quotes still look like smart quotes or regular ASCII quotes?
>>>>>>>
>>>>>>> Marc
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>> On Tue, Jul 11, 2017 at 7:28 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>>>>>>>>>
>>>>>>>>>> On Jul 10, 2017, at 5:19 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>>>>>>>
>>>>>>>>>> On 10/07/2017 5:02 PM, Christofer Bogaso wrote:
>>>>>>>>>>> Hi,
>>>>>>>>>>>
>>>>>>>>>>> I wanted R to open any Help page in html permanently.
>>>>>>>>>>>
>>>>>>>>>>> So 1st I created .Rprofile file with below code in terminal:
>>>>>>>>>>>
>>>>>>>>>>> touch ~/.Rprofile
>>>>>>>>>>>
>>>>>>>>>>> open -a Textedit ~/.Rprofile
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> And then in the .Rprofile file, I wrote below code :
>>>>>>>>>>>
>>>>>>>>>>> options(help_type = ?html?)
>>>>>>>>>>>
>>>>>>>>>>> However after that when I start R (from Terminal) I get below error on loading R
>>>>>>>>>>>
>>>>>>>>>>> Error: 1:20: unexpected input
>>>>>>>>>>>
>>>>>>>>>>> 1: options(help_type = ?
>>>>>>>>>>>
>>>>>>>>>>>                   ^
>>>>>>>>>>
>>>>>>>>>> Those don't look like ASCII quotes.  Use the R.app editor, not Textedit, and it won't put in funny "smart quotes".
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Alternatively, you can set TextEdit to not use "Smart quotes"  by disabling them in:
>>>>>>>>>
>>>>>>>>> Preferences -> New Document
>>>>>>>>>
>>>>>>>>> There is a checkbox under Options for Smart quotes. Uncheck it.
>>>>>>>>>
>>>>>>>>> Regards,
>>>>>>>>>
>>>>>>>>> Marc Schwartz
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Duncan Murdoch
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> [Previously saved workspace restored]
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Can someone please point me on where I made mistake.
>>>>>>>>>>>
>>>>>>>>>>> Thanks for your time.
>>>>>>>>>
>>>>>>>
>>>
>


From marc_schwartz at me.com  Tue Jul 11 18:42:53 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Tue, 11 Jul 2017 11:42:53 -0500
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <CA+dpOJ=WMQN0SYgd+3Sm82wTii1UfvbrB3HKu159YXysACETLQ@mail.gmail.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
 <a3764691-6f40-5e73-319b-a592ce864d79@gmail.com>
 <8E591D13-9FE0-4536-80AF-6A56940A1C10@me.com>
 <CA+dpOJ=LLB0LOym-o104zhgtboWXE-Ahaz_f+L-wv+_arEH5jA@mail.gmail.com>
 <27934ABD-D009-4278-8DE4-456C4F7EAED2@me.com>
 <CA+dpOJ=0ePqmXsaGNpXVzoxcdUugzG2AWRuW_LMdXFakGMShZg@mail.gmail.com>
 <FB09B387-0F70-446A-89D0-D13F60C993E5@bigelow.org>
 <CA+dpOJnkfv+eEOL03RFqGoBD164r=MOrL6diOVPFNxwhbg1Y8Q@mail.gmail.com>
 <806EA055-ACD7-4DC4-B17D-419FD248627C@me.com>
 <CA+dpOJmstscn1DvpUUu49LNj3rEDOhboauD2JjwgdH94WKcRHw@mail.gmail.com>
 <E7ECC2B4-5F99-4729-8237-DB6930492798@me.com>
 <CA+dpOJ=WMQN0SYgd+3Sm82wTii1UfvbrB3HKu159YXysACETLQ@mail.gmail.com>
Message-ID: <66530DDE-46C1-488E-B273-6BBA9E49D945@me.com>

Hi Christofer,

Here is the content of my fairly simple .Rprofile:

options(help_type = "html")
local({r <- getOption("repos")
       r["CRAN"] <- "http://cran.us.r-project.org"
       options(repos=r)
})
options(papersize = "letter")
options(show.signif.stars = FALSE)
options(device = "quartz")
options(width = 72)


Note that I do not have a .First function defined and HTML based help works just fine for me in a Terminal session.

The setting of my CRAN repo is based upon the examples in ?Startup.

Another thought, which may be a long shot. Check to see if there is a .RData file in your home directory and if so, move it to the Desktop or some other location and try a new R session without it being present. Alternatively start a new R session from the Terminal using:

  R --no-restore-data

It may be possible that there is some level of corruption in the .RData file or something was saved in the image file from a prior session that is causing a conflict.

Regards,

Marc

> On Jul 11, 2017, at 10:55 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
> 
> Hi Marc,
> 
> When I enter 'open -a Textedit ~/.Rprofile' in Terminal .RProfie file
> opens. Below is the content of that file :
> 
> .First <- function() {
>    options("repos" = c(CRAN = "http://cran.r-project.org/"))
>    options(help_type = "html")
> }
> 
> An the R window looks like below :
> 
> R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
> 
> Copyright (C) 2017 The R Foundation for Statistical Computing
> 
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> 
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> 
> You are welcome to redistribute it under certain conditions.
> 
> Type 'license()' or 'licence()' for distribution details.
> 
> 
>  Natural language support but running in an English locale
> 
> 
> R is a collaborative project with many contributors.
> 
> Type 'contributors()' for more information and
> 
> 'citation()' on how to cite R or R packages in publications.
> 
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 
> 'help.start()' for an HTML browser interface to help.
> 
> Type 'q()' to quit R.
> 
> 
> [Previously saved workspace restored]
> 
> 
>> ?sum
> 
> starting httpd help server ... done
> 
>> 
> 
> 
> Please let me know if you need anything else.
> 
> Thanks,
> 
> On Tue, Jul 11, 2017 at 8:29 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
>> Christofer,
>> 
>> The thing is that you really don't need to do that (use .First), which makes this situation curious and why it would be helpful to see the full content of your .Rprofile file, to be sure that there is not a conflict in content or structure someplace.
>> 
>> An extra set of eyes might be helpful.
>> 
>> Marc
>> 
>>> On Jul 11, 2017, at 9:52 AM, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>>> 
>>> Hi,
>>> 
>>> I just put options(help_type = "html") inside .First <- function() {}
>>> and now it works. Help page is now opening in Browser.
>>> 
>>> Thanks all for your time and help. Regards,
>>> 
>>> 


From macqueen1 at llnl.gov  Wed Jul 12 20:06:20 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Wed, 12 Jul 2017 18:06:20 +0000
Subject: [R-SIG-Mac] Permanently fix R to open Help page in html
In-Reply-To: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
References: <CA+dpOJ=vLV7z=_+rSf7R1552yWXX6E52HKi5=PtJyAG01dWtgw@mail.gmail.com>
Message-ID: <2D509F70-A10E-4A83-9A2F-0409B1C0F51E@llnl.gov>

The first thing I would do is go to the ?Format? menu in Textedit, and make sure ?Make Plain Text? is selected. Textedit?s default format is RTF, which is not what you want.

(Apologies if someone else already suggested this and I missed it)

-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062


On 7/10/17, 2:02 PM, "R-SIG-Mac on behalf of Christofer Bogaso" <r-sig-mac-bounces at r-project.org on behalf of bogaso.christofer at gmail.com> wrote:

    Hi,
    
    I wanted R to open any Help page in html permanently.
    
    So 1st I created .Rprofile file with below code in terminal:
    
    touch ~/.Rprofile
    
    open -a Textedit ~/.Rprofile
    
    
    And then in the .Rprofile file, I wrote below code :
    
    options(help_type = ?html?)
    
    However after that when I start R (from Terminal) I get below error on loading R
    
    Error: 1:20: unexpected input
    
    1: options(help_type = ?
    
                           ^
    
    [Previously saved workspace restored]
    
    
    >
    
    Can someone please point me on where I made mistake.
    
    Thanks for your time.
    
    _______________________________________________
    R-SIG-Mac mailing list
    R-SIG-Mac at r-project.org
    https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From bhh at xs4all.nl  Wed Jul 19 10:05:53 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Wed, 19 Jul 2017 10:05:53 +0200
Subject: [R-SIG-Mac] El Capitan binary package of nleqslv 3.3.1 not available
Message-ID: <FE9BD4F2-9317-4160-AC7D-FE96F4783780@xs4all.nl>

Hi,

On July 6/7th the latest version of my package nleqslv version 3.3.1 appeared on CRAN.
Since then binary packages have become available for Windows and OS X Mavericks.

However there is no binary package for OS X El Capitan, even though no errors have been reported building the package.
What's going on?


regards,

Berend hasselman

From mspinola10 at gmail.com  Wed Jul 19 17:34:11 2017
From: mspinola10 at gmail.com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Wed, 19 Jul 2017 09:34:11 -0600
Subject: [R-SIG-Mac] rJava problem in Mac OS Sierra 10.12.5
Message-ID: <CABkCotTpQrbOAHFJx2hCJqow4zhWdjg_6a6RB8=-s-dAZ9FraQ@mail.gmail.com>

Dear list members,

I have problem loading some packages because rJava cannot be loaded.  I
have the latest version of java, R and rJava.

> library(glmulti)
Unable to find any JVMs matching version "(null)".
No Java runtime present, try --request to install.
running command '/usr/libexec/java_home' had status 1Error: package ?rJava?
could not be loaded

What I need to do to load the packages that depend on rJava?

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Wed Jul 19 18:30:39 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Wed, 19 Jul 2017 09:30:39 -0700
Subject: [R-SIG-Mac] rJava problem in Mac OS Sierra 10.12.5
In-Reply-To: <CABkCotTpQrbOAHFJx2hCJqow4zhWdjg_6a6RB8=-s-dAZ9FraQ@mail.gmail.com>
References: <CABkCotTpQrbOAHFJx2hCJqow4zhWdjg_6a6RB8=-s-dAZ9FraQ@mail.gmail.com>
Message-ID: <9A9AB71B-87B0-4DB4-B263-35320E3152D4@comcast.net>


> On Jul 19, 2017, at 8:34 AM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
> 
> Dear list members,
> 
> I have problem loading some packages because rJava cannot be loaded.  I
> have the latest version of java, R and rJava.
> 
>> library(glmulti)
> Unable to find any JVMs matching version "(null)".
> No Java runtime present, try --request to install.
> running command '/usr/libexec/java_home' had status 1Error: package ?rJava?
> could not be loaded
> 
> What I need to do to load the packages that depend on rJava?

I don't think you have provided enough information to know what to advise, but you might try looking through the r-sig-mac archives using one of the search engines:

http://markmail.org/search/?q=+list%3Aorg.r-project.r-sig-mac+No+Java+runtime+present%2C+try+--request+to+install

... although I found no questions reporting that exact error message, or you can use the StackOverflow search facilities:

https://stackoverflow.com/search?q=%5Br%5D+osx+rjava+install

People generally do have a Java runtime engine installed somewhere. Here's what I see at a Terminal session:

dw-mac-pro:~ davidwinsemius$ which java
/usr/bin/java


dw-mac-pro:~ davidwinsemius$ java -version
java version "1.8.0_131"
Java(TM) SE Runtime Environment (build 1.8.0_131-b11)
Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)

rJava says it only requires a much older version:

SystemRequirements: Java JDK 1.2 or higher (for JRI/REngine JDK 1.4 or
        higher), GNU make

I think some packages do require the more recent Java runtime package, though.

Most people are running Yosemite or higher so the SO answer to this question may be helpful:

http://stackoverflow.com/questions/30738974/rjava-load-error-in-rstudio-r-after-upgrading-to-osx-yosemite

> 
> -- 
> *Manuel Sp?nola, Ph.D.*
> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> 

> 
> 	[[alternative HTML version deleted]]

Your question will have a better chance of coming through correctly if you use palin text for R mailing list submissions.

> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

David Winsemius
Alameda, CA, USA


From tim.bates at ed.ac.uk  Thu Jul 20 19:29:26 2017
From: tim.bates at ed.ac.uk (BATES Timothy)
Date: Thu, 20 Jul 2017 17:29:26 +0000
Subject: [R-SIG-Mac] Sys.timezone == NA?
Message-ID: <397577ED-9AF0-4AC9-AD83-60DCFE6513D1@ed.ac.uk>

Hi,
On R 3.40, I've been getting some Warnings about timezone, e.g.

Warning message: In as.POSIXlt.POSIXct(x, tz) : unknown timezone 'default/Europe/London'

But also Sys.timezone returns NA.... Is this a bug? was there a change in tz moving to 3.4.0?
 
Sys.timezone()
[1] NA

R version: R version 3.4.0 Patched (2017-05-02 r72651)
Platform: x86_64-apple-darwin15.6.0 
MacOS: 10.13

-- 
The University of Edinburgh is a charitable body, registered in
Scotland, with registration number SC005336.


From roy.mendelssohn at noaa.gov  Thu Jul 20 19:33:02 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 20 Jul 2017 10:33:02 -0700
Subject: [R-SIG-Mac] Sys.timezone == NA?
In-Reply-To: <397577ED-9AF0-4AC9-AD83-60DCFE6513D1@ed.ac.uk>
References: <397577ED-9AF0-4AC9-AD83-60DCFE6513D1@ed.ac.uk>
Message-ID: <9FF0FAC4-84BF-44B8-A97E-DEC1FE2FB3A6@noaa.gov>

R version 3.4.1 (2017-06-30) -- "Single Candle"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin15.6.0 (64-bit)

> Sys.timezone()
[1] "America/Los_Angeles"

-Roy


> On Jul 20, 2017, at 10:29 AM, BATES Timothy <tim.bates at ed.ac.uk> wrote:
> 
> Sys.timezone()

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From pdalgd at gmail.com  Thu Jul 20 23:29:37 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 20 Jul 2017 23:29:37 +0200
Subject: [R-SIG-Mac] Sys.timezone == NA?
In-Reply-To: <397577ED-9AF0-4AC9-AD83-60DCFE6513D1@ed.ac.uk>
References: <397577ED-9AF0-4AC9-AD83-60DCFE6513D1@ed.ac.uk>
Message-ID: <6D9DE76A-82E5-4D6E-9C53-9C7C335EEB52@gmail.com>


> On 20 Jul 2017, at 19:29 , BATES Timothy <tim.bates at ed.ac.uk> wrote:
> 
> Hi,
> On R 3.40, I've been getting some Warnings about timezone, e.g.
> 
> Warning message: In as.POSIXlt.POSIXct(x, tz) : unknown timezone 'default/Europe/London'
> 
> But also Sys.timezone returns NA.... Is this a bug? was there a change in tz moving to 3.4.0?

No, but there seems to have been a bug introduced in MacOS 10.13 _beta_ (!!). We might have to work around it if it persists in the final release, but until then we assume that it is Apple's problem. See also PR#17307.

-pd


> 
> Sys.timezone()
> [1] NA
> 
> R version: R version 3.4.0 Patched (2017-05-02 r72651)
> Platform: x86_64-apple-darwin15.6.0 
> MacOS: 10.13
> 
> -- 
> The University of Edinburgh is a charitable body, registered in
> Scotland, with registration number SC005336.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From tim.bates at ed.ac.uk  Fri Jul 21 02:35:34 2017
From: tim.bates at ed.ac.uk (BATES Timothy)
Date: Fri, 21 Jul 2017 00:35:34 +0000
Subject: [R-SIG-Mac] Sys.timezone == NA?
In-Reply-To: <6D9DE76A-82E5-4D6E-9C53-9C7C335EEB52@gmail.com>
References: <397577ED-9AF0-4AC9-AD83-60DCFE6513D1@ed.ac.uk>
 <6D9DE76A-82E5-4D6E-9C53-9C7C335EEB52@gmail.com>
Message-ID: <9C825B11-64F2-46B4-9F63-BD4C06D773C7@ed.ac.uk>

Thanks all. I updated to 3.4.1 and still get NA. So, in-lnline with Peter?s explanation, ii?s OS 10.13. beta specific.

However? In this process, I pressed cmd minus to reduce the text size in my R.app console and got this set of warnings, which seem worth passing on as well:


2017-07-21 01:29:15.835 R[81838:2478070] -[NSNull bytes]: unrecognized selector sent to instance 0x7fffe0a44250
2017-07-21 01:29:15.841 R[81838:2478070] *** RController: caught ObjC exception while processing system events. Update to the latest GUI version and consider reporting this properly (see FAQ) if it persists and is not known. 
*** reason: -[NSNull bytes]: unrecognized selector sent to instance 0x7fffe0a44250
*** name: NSInvalidArgumentException, info: (null)
*** Version: R 3.4.1 (72865) R.app R 3.4.1 GUI 1.70 El Capitan build
Consider saving your work soon in case this develops into a problem.
2017-07-21 01:29:15.861 R[81838:2478070] -[NSNull bytes]: unrecognized selector sent to instance 0x7fffe0a44250
2017-07-21 01:29:15.862 R[81838:2478070] *** RController: caught ObjC exception while processing system events. Update to the latest GUI version and consider reporting this properly (see FAQ) if it persists and is not known. 
*** reason: -[NSNull bytes]: unrecognized selector sent to instance 0x7fffe0a44250
*** name: NSInvalidArgumentException, info: (null)
*** Version: R 3.4.1 (72865) R.app R 3.4.1 GUI 1.70 El Capitan build
Consider saving your work soon in case this develops into a problem.


> On 20 Jul 2017, at 10:29 pm, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> 
>> On 20 Jul 2017, at 19:29 , BATES Timothy <tim.bates at ed.ac.uk> wrote:
>> 
>> Hi,
>> On R 3.40, I've been getting some Warnings about timezone, e.g.
>> 
>> Warning message: In as.POSIXlt.POSIXct(x, tz) : unknown timezone 'default/Europe/London'
>> 
>> But also Sys.timezone returns NA.... Is this a bug? was there a change in tz moving to 3.4.0?
> 
> No, but there seems to have been a bug introduced in MacOS 10.13 _beta_ (!!). We might have to work around it if it persists in the final release, but until then we assume that it is Apple's problem. See also PR#17307.
> 
> -pd
> 
> 
>> 
>> Sys.timezone()
>> [1] NA
>> 
>> R version: R version 3.4.0 Patched (2017-05-02 r72651)
>> Platform: x86_64-apple-darwin15.6.0 
>> MacOS: 10.13
>> 
>> -- 
>> The University of Edinburgh is a charitable body, registered in
>> Scotland, with registration number SC005336.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
The University of Edinburgh is a charitable body, registered in
Scotland, with registration number SC005336.


From Ashley.Betts at saltbushsoftware.com  Thu Jul  6 13:13:03 2017
From: Ashley.Betts at saltbushsoftware.com (Ashley Betts)
Date: Thu, 06 Jul 2017 11:13:03 -0000
Subject: [R-SIG-Mac] Poor plotting performance on Mac OS X
Message-ID: <CBFF824B-D96A-4E6E-AA3D-ECE7DF8EA0E4@saltbushsoftware.com>

Hi All,
    I'm quite new to R and recently started investigating the geospatial plotting capabilities of R via ggplot2. I started by using some of the publicly available datasets from the Australian Bureau of Statistics. Plotting the Level 3 Statistical Area boundaries took over 2 hours on my 2012 Mac Book Pro. As there were over 3M rows in the fortify?ed data frame I initially thought this was just how long it must take. I then ran the exact same script on my work laptop which is similarly spec?ed and it ran in approximately 30 seconds. This now has me extremely disappointed in the performance on the Mac which is where I use R the most. I changed my BLAS library to the Accelerate library in a whim that this might make a difference. It did not. Whilst I primarily use RStudio I also ran the same script in R.app and if there was any improvement it was not noticeable. I did notice in the Windows run that it seemed to use multiple cores (which is what made me investigate the BLAS change) whilst the Mac seems to stay bound to a single core. My initial thoughts were that it must be something to do with ggplot but after sampling the rsession process a number of times (see attached Sample of rsession.txt) it appears to be spending most of it?s time in CGContextDrawPath in Apples CoreGraphics so I assume it is a Graphics related issue. I?m running R 3.4 on my Mac and 3.3.2 on the Windows machine. I?ve attached the script, process sample text and a number of screen shots that I hope will be helpful in analysing the issue. Could someone possibly let me know if this is PEBKAC issue or an actual problem with R. If the later how do I go about getting the issue resolved?

The SA3 boundary data is available here:

http://www.abs.gov.au/AUSSTATS/abs at .nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument

as 'Statistical Area Level 3 (SA3) ASGS Ed 2016 Digital Boundaries in ESRI Shapefile Format?

Regards,

Ashley


-------------- next part --------------
A non-text attachment was scrubbed...
Name: aus_pop_analysis.R
Type: application/octet-stream
Size: 2843 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: macplottimes.tiff
Type: image/tiff
Size: 190178 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0003.tiff>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: macsessioninfo.tiff
Type: image/tiff
Size: 321732 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0004.tiff>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MacSysSpec.tiff
Type: image/tiff
Size: 64430 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0005.tiff>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Sample of R.txt
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0002.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Sample of rsession.txt
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0003.txt>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: WinCallStack.PNG
Type: image/png
Size: 51034 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: winplottimes.PNG
Type: image/png
Size: 13331 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: winprofile.PNG
Type: image/png
Size: 28479 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: WinSessionInfo.PNG
Type: image/png
Size: 24825 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: WinSysSpec.PNG
Type: image/png
Size: 7198 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170706/007f7b8c/attachment-0009.png>

From thibault.vatter at gmail.com  Fri Jul 14 16:06:21 2017
From: thibault.vatter at gmail.com (Thibault Vatter)
Date: Fri, 14 Jul 2017 14:06:21 -0000
Subject: [R-SIG-Mac] building R with external Lapack
In-Reply-To: <CANLFJPrxScByONGwo92Y0YQRHumoJPg5wGSWy27BKg31GqqSag@mail.gmail.com>
References: <CANLFJPrMNYMMCLcfx7s-rm5VStTF7h40NirHt5=a0FA5rgHbCg@mail.gmail.com>
 <CANLFJPrxScByONGwo92Y0YQRHumoJPg5wGSWy27BKg31GqqSag@mail.gmail.com>
Message-ID: <1c4d4115-1489-4e80-a309-64636afd6e28@googlegroups.com>

I wonder whether this is actually needed, see 
https://gist.github.com/nicebread/6920c8287d7bffb03007

If you have found a solution in the meantime, I would be interested.

On Sunday, March 6, 2016 at 1:27:52 AM UTC-5, Baptiste Auguie wrote:
>
> Hi again,
>
> Following my previous message, I've made some progress after finding hints
> on the list archives that the flag CPPFLAGS="-D__ACCELERATE__"  should help
> direct R to use the Accelerate framework. It does help in this regard, as
> ./configure now confirms,
>
>   External libraries:        readline, BLAS(Accelerate), LAPACK(in blas),
> zlib, bzlib, PCRE, curl
>
> Unfortunately, make fails because of a missing lzma.h, even though it
> exists and lives in /usr/local/include/lzma.h. I have xz installed via 
> brew.
>
> Ideally I would like to be able to build R from source on my mac, but that
> has proved harder than I anticipated. Alternatively,
>
> - is there a way to redirect R's Lapack after installation, the same way as
> for BLAS?
> ( as in
> cd /Library/Frameworks/R.framework/Resources/lib
> ln -sf
>
> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/Versions/Current/libBLAS.dylib
> libRblas.dylib)
>
> - could I somehow silence RcppArmadillo's solve() warning? (this is more of
> a Rcpp-dev question, I'll ask there if it comes to that)
>
> Thanks,
>
> baptiste
>
>
> On 5 March 2016 at 18:24, Baptiste Auguie <baptist... at gmail.com 
> <javascript:>> wrote:
>
> > Dear list,
> >
> > I have a package using RcppArmadillo for linear algebra; at some point in
> > the calculation it solves a linear system. I understand the c++ Armadillo
> > library hands this operation over to Lapack  Unfortunately, somewhere in 
> my
> > toolchain Armadillo has been configured to use R's internal subset
> > of Lapack, which triggers the following warning every time I call the R
> > function,
> >
> > warning: solve(): refinement and/or equilibration not done due to 
> crippled
> > LAPACK
> >
> > This doesn't sound very good, and is also a real nuisance in the terminal
> > as I'm calling the function hundreds of times in a loop. I've installed 
> the
> > latest build from https://r.research.att.com, built and installed the
> > latest version of RcppArmadillo, but the problem persists.
> >
> > I'm not sure if it's relevant to this question, but I've had some success
> > with the related issue of switching from R's internal BLAS to the vecLib
> > one,
> >
> > cd /Library/Frameworks/R.framework/Resources/lib
> > ln -sf
> > 
> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/Versions/Current/libBLAS.dylib
> > libRblas.dylib
> >
> > giving me a considerable boost in performance. I'm not sure if something
> > similar can be done for Lapack.
> >
> > The next step I've taken was to try and build R myself, with explicit
> > flags telling R to use an external Lapack from Apple's Accelerate 
> (vecLib?)
> > framework. I have not had any luck with that, every time some kind of 
> error
> > appears, and I could not find a recent tutorial with step-by-step
> > instructions to build R on a Mac.
> >
> > I've downloaded the R source, followed by
> >
> > ./configure SHELL='/bin/bash' r_arch=x86_64 CC="gcc -arch x86_64
> > -std=gnu99" CXX="g++ -arch x86_64" OBJC="gcc -arch x86_64" F77="gfortran
> > -arch x86_64" FC="gfortran -arch x86_64" --with-system-zlib
> > --with-blas='-framework vecLib' --with-lapack
> >
> > with this summary at the end:
> >
> > R is now configured for x86_64-apple-darwin15.3.0
> >
> >   Source directory:          .
> >   Installation directory:    /Library/Frameworks
> >
> >   C compiler:                gcc -arch x86_64 -std=gnu99
> >  -I/usr/local/include
> >   Fortran 77 compiler:       gfortran -arch x86_64  -g -O2
> >
> >   C++ compiler:              g++ -arch x86_64  -g -O2
> >   C++ 11 compiler:           g++ -arch x86_64  -std=c++11 -g -O2
> >   Fortran 90/95 compiler:    gfortran -arch x86_64 -g -O2
> >   Obj-C compiler:     gcc -arch x86_64 -g -O2 -fobjc-exceptions
> >
> >   Interfaces supported:      X11, aqua, tcltk
> >   External libraries:        readline, zlib, bzlib, lzma, PCRE, curl
> >   Additional capabilities:   NLS, ICU
> >   Options enabled:           framework, shared BLAS, R profiling
> >
> >   Capabilities skipped:      PNG, JPEG, TIFF, cairo
> >   Options not enabled:       memory profiling
> >
> >   Recommended packages:      yes
> >
> > make
> >
> > gives me this error:
> >
> > byte-compiling package 'grDevices'
> > Warning in solve.default(rgb) :
> >   unable to load shared object
> > '/Users/baptiste/Downloads/R-rc/modules/x86_64/lapack.so':
> >   dlopen(/Users/baptiste/Downloads/R-rc/modules/x86_64/lapack.so, 6):
> > Symbol not found: __gfortran_compare_string
> >
> > I've tried quite a few variations, but I'm shooting in the dark since I
> > don't understand the issue. If I've missed a standard tutorial, please 
> let
> > me know.
> >
> > Best regards,
> >
> > baptiste
> >
> > PS: my sessionInfo() using CRAN's R-devel
> > R Under development (unstable) (2016-03-02 r70268)
> > Platform: x86_64-apple-darwin13.4.0 (64-bit)
> > Running under: OS X 10.11.3 (El Capitan)
> > locale:
> > [1] en_NZ.UTF-8/en_NZ.UTF-8/en_NZ.UTF-8/C/en_NZ.UTF-8/en_NZ.UTF-8
> >
> > gfortran -v
> > gfortran: warning: couldn?t understand kern.osversion ?15.3.0
> > Using built-in specs.
> > COLLECT_GCC=gfortran
> >
> > 
> COLLECT_LTO_WRAPPER=/usr/local/libexec/gcc/x86_64-apple-darwin13.0.0/4.8.2/lto-wrapper
> > Target: x86_64-apple-darwin13.0.0
> > Configured with: /Builds/gcc-4.8/gcc-4.8.2/configure CC=clang CXX=clang++
> > --enable-languages=fortran
> > Thread model: posix
> > gcc version 4.8.2 (GCC)
> >
> >
> >
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SI... at r-project.org <javascript:>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170714/964d30ab/attachment.html>

