From hadley at rice.edu  Thu Sep  1 21:15:39 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Thu, 1 Sep 2011 14:15:39 -0500
Subject: [R-SIG-Mac] Lion and latex
Message-ID: <CABdHhvELgTdjfzV0NJmC5AuxF_T9u==YCaTVn4EyzNQpkFcABw@mail.gmail.com>

Hi all,

I recently upgraded to lion, and now when checking packages I get:

* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
* checking PDF version of manual without hyperrefs or index ... ERROR
Re-running with no redirection of stdout/stderr.
Hmm ... looks like a package
Error in texi2dvi("Rd2.tex", pdf = (out_ext == "pdf"), quiet = FALSE,  :
  pdflatex is not available
Error in running tools::texi2dvi
You may want to clean up by 'rm -rf /tmp/RtmpBfIezv/Rd2pdf7957c6f4'

I've tried reinstalling mactex but no luck.  pdflatex is available on
the path and works when I run it by hand.  Any ideas?

Thanks!

Hadley


-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From bhh at xs4all.nl  Thu Sep  1 21:25:44 2011
From: bhh at xs4all.nl (Berend Hasselman)
Date: Thu, 1 Sep 2011 21:25:44 +0200
Subject: [R-SIG-Mac] Lion and latex
In-Reply-To: <CABdHhvELgTdjfzV0NJmC5AuxF_T9u==YCaTVn4EyzNQpkFcABw@mail.gmail.com>
References: <CABdHhvELgTdjfzV0NJmC5AuxF_T9u==YCaTVn4EyzNQpkFcABw@mail.gmail.com>
Message-ID: <D0785C0F-06E7-44A7-A8B3-190F4FFCE61D@xs4all.nl>


On 01-09-2011, at 21:15, Hadley Wickham wrote:

> Hi all,
> 
> I recently upgraded to lion, and now when checking packages I get:
> 
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> * checking PDF version of manual without hyperrefs or index ... ERROR
> Re-running with no redirection of stdout/stderr.
> Hmm ... looks like a package
> Error in texi2dvi("Rd2.tex", pdf = (out_ext == "pdf"), quiet = FALSE,  :
>  pdflatex is not available
> Error in running tools::texi2dvi
> You may want to clean up by 'rm -rf /tmp/RtmpBfIezv/Rd2pdf7957c6f4'
> 
> I've tried reinstalling mactex but no luck.  pdflatex is available on
> the path and works when I run it by hand.  Any ideas?

After (re)installing MacTeX (2011?) did you run FixMacTeX2011?
See
http://www.tug.org/mactex/2011/prefpane.html

Berend


From hadley at rice.edu  Thu Sep  1 21:55:52 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Thu, 1 Sep 2011 14:55:52 -0500
Subject: [R-SIG-Mac] Lion and latex
In-Reply-To: <D0785C0F-06E7-44A7-A8B3-190F4FFCE61D@xs4all.nl>
References: <CABdHhvELgTdjfzV0NJmC5AuxF_T9u==YCaTVn4EyzNQpkFcABw@mail.gmail.com>
	<D0785C0F-06E7-44A7-A8B3-190F4FFCE61D@xs4all.nl>
Message-ID: <CABdHhvHHYLyOymgaspycsgHtE+_xuxacdxsooigt7XdpsGtmCA@mail.gmail.com>

>> I've tried reinstalling mactex but no luck. ?pdflatex is available on
>> the path and works when I run it by hand. ?Any ideas?
>
> After (re)installing MacTeX (2011?) did you run FixMacTeX2011?
> See
> http://www.tug.org/mactex/2011/prefpane.html

Nope, but I just tried and it didn't seem to have any impact.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From bhh at xs4all.nl  Fri Sep  2 11:01:31 2011
From: bhh at xs4all.nl (Berend Hasselman)
Date: Fri, 2 Sep 2011 11:01:31 +0200
Subject: [R-SIG-Mac] Lion and latex
In-Reply-To: <CABdHhvHHYLyOymgaspycsgHtE+_xuxacdxsooigt7XdpsGtmCA@mail.gmail.com>
References: <CABdHhvELgTdjfzV0NJmC5AuxF_T9u==YCaTVn4EyzNQpkFcABw@mail.gmail.com>
	<D0785C0F-06E7-44A7-A8B3-190F4FFCE61D@xs4all.nl>
	<CABdHhvHHYLyOymgaspycsgHtE+_xuxacdxsooigt7XdpsGtmCA@mail.gmail.com>
Message-ID: <FE8AB20F-4F68-45C2-B268-25194841A215@xs4all.nl>


On 01-09-2011, at 21:55, Hadley Wickham wrote:

>>> I've tried reinstalling mactex but no luck.  pdflatex is available on
>>> the path and works when I run it by hand.  Any ideas?
>> 
>> After (re)installing MacTeX (2011?) did you run FixMacTeX2011?
>> See
>> http://www.tug.org/mactex/2011/prefpane.html
> 
> Nope, but I just tried and it didn't seem to have any impact.

Weird. But I think you should logout and login and possibly even restart computer.

After migrating stuff (including MacTeX 2010) to my Air with Lion I only had to run the FixMacTeX2011 package to get the PATH settings and  the TeX distribution pane back.
R CMD check <package> works fine.

Assuming you are doing the checking in a Terminal window, I would suggest starting R on the commandline and seeing what Sys.getenv("PATH") returns. Maybe something with  .Renviron or a saved workspace?
I'm just guessing.

Berend

From grubio at mat.upv.es  Fri Sep  2 15:42:11 2011
From: grubio at mat.upv.es (Gregorio Rubio Navarro)
Date: Fri,  2 Sep 2011 15:42:11 +0200
Subject: [R-SIG-Mac] R, C, Fortan and Mac OSX Lion
Message-ID: <1314970931.4e60dd3344c89@webmail.upv.es>



-- 
Hi:

I am trying to use a package made of R files and C-code on a Mac OS X Lion
10.7.1. This software was tested with R 2.1.1, gcc 3.2.3 and gsl 1.6, both on
linux and Mac (older than 10.7). I have installed   R-2.13-patched (precompiled
binaries), gfortran-lion, and gsl-1.15, in the Mac OS X Lion 10.7.1

The following error occurs:

make: f77: No such file or directory

and the program fails.

Can anybody help me?

Gregorio Rubio
Universidad Polit?cnica de Valencia
Spain


From simon.urbanek at r-project.org  Fri Sep  2 15:54:56 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 2 Sep 2011 09:54:56 -0400
Subject: [R-SIG-Mac] R, C, Fortan and Mac OSX Lion
In-Reply-To: <1314970931.4e60dd3344c89@webmail.upv.es>
References: <1314970931.4e60dd3344c89@webmail.upv.es>
Message-ID: <0F21BA38-3718-463B-B813-450D941407C5@r-project.org>

On Sep 2, 2011, at 9:42 AM, Gregorio Rubio Navarro wrote:

> -- 
> Hi:
> 
> I am trying to use a package made of R files and C-code on a Mac OS X Lion 10.7.1. This software was tested with R 2.1.1, gcc 3.2.3 and gsl 1.6,

Wow - this is an unbelievably ancient setup (over 6 years old!) ..


> both on linux and Mac (older than 10.7). I have installed   R-2.13-patched (precompiled binaries), gfortran-lion, and gsl-1.15, in the Mac OS X Lion 10.7.1
> 
> The following error occurs:
> 
> make: f77: No such file or directory
> 
> and the program fails.
> 
> Can anybody help me?
> 

This seems like a bug in the package - it's using the wrong compiler. You should not write your own compilation targets and make sure you get compiler flags from R. You'd have to provide your package sources if you want us to give you more specific advice.

Cheers,
Simon


From hadley at rice.edu  Fri Sep  2 16:48:56 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Fri, 2 Sep 2011 09:48:56 -0500
Subject: [R-SIG-Mac] Lion and latex
In-Reply-To: <FE8AB20F-4F68-45C2-B268-25194841A215@xs4all.nl>
References: <CABdHhvELgTdjfzV0NJmC5AuxF_T9u==YCaTVn4EyzNQpkFcABw@mail.gmail.com>
	<D0785C0F-06E7-44A7-A8B3-190F4FFCE61D@xs4all.nl>
	<CABdHhvHHYLyOymgaspycsgHtE+_xuxacdxsooigt7XdpsGtmCA@mail.gmail.com>
	<FE8AB20F-4F68-45C2-B268-25194841A215@xs4all.nl>
Message-ID: <CABdHhvGTTJwMjFP-Fjw=Hi96Q6iAPO8iAnq6bsiwUdciMCyZeQ@mail.gmail.com>

> Weird. But I think you should logout and login and possibly even restart computer.

A restart seemed to do the trick.  Thanks for the help!

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From simon.urbanek at r-project.org  Fri Sep  2 16:50:03 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 2 Sep 2011 10:50:03 -0400
Subject: [R-SIG-Mac] R, C, Fortan and Mac OSX Lion
In-Reply-To: <1314973288.4e60e6681666a@webmail.upv.es>
References: <1314970931.4e60dd3344c89@webmail.upv.es>
	<0F21BA38-3718-463B-B813-450D941407C5@r-project.org>
	<1314973288.4e60e6681666a@webmail.upv.es>
Message-ID: <94DD5F40-5756-462B-80BF-CC709B99D71E@r-project.org>

Gregorio,

what you sent is not an R package at all!
It's just a heap of R scripts and sources. The implication is that you may need to hand-tweak the Makefile to match your system. I had a quick look and the only modification I had to make was to add -fnested-functions to CFLAGS. Other than that is worked:

ginaz:$ cd sources/Flowgraph_Analysis_Threaded/msm_ss_sp
ginaz:msm_ss_sp$ Rscript saddlept_ss.r 
Read 314 items
gcc -fPIC -O2 -fnested-functions   -c -o ../optimize.o ../optimize.c
gcc -fPIC -O2 -fnested-functions   -c -o post.o post.c
[...]
Thread = 3, i = 5, q = 27.6653
rm -f *.so
ginaz:msm_ss_sp$ 

There is no reference to Fortran at all so I have no clue where you got that error from ...
(This is using GSL from http://r.research.att.com/libs/ )

Cheers,
Simon


On Sep 2, 2011, at 10:21 AM, Gregorio Rubio Navarro wrote:

> 
> The work directory is msm_ss_sp, and the source file is saddlept_ss.r.
> 
> Thank you!
> 
> 
> Mensaje citado por Simon Urbanek <simon.urbanek at r-project.org>:
> 
>> On Sep 2, 2011, at 9:42 AM, Gregorio Rubio Navarro wrote:
>> 
>>> --
>>> Hi:
>>> 
>>> I am trying to use a package made of R files and C-code on a Mac OS X Lion
>> 10.7.1. This software was tested with R 2.1.1, gcc 3.2.3 and gsl 1.6,
>> 
>> Wow - this is an unbelievably ancient setup (over 6 years old!) ..
>> 
>> 
>>> both on linux and Mac (older than 10.7). I have installed   R-2.13-patched
>> (precompiled binaries), gfortran-lion, and gsl-1.15, in the Mac OS X Lion
>> 10.7.1
>>> 
>>> The following error occurs:
>>> 
>>> make: f77: No such file or directory
>>> 
>>> and the program fails.
>>> 
>>> Can anybody help me?
>>> 
>> 
>> This seems like a bug in the package - it's using the wrong compiler. You
>> should not write your own compilation targets and make sure you get compiler
>> flags from R. You'd have to provide your package sources if you want us to
>> give you more specific advice.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
> 
> 
> -- 
> <sources.zip>


From charles.sharpsteen at gmail.com  Fri Sep  2 21:38:52 2011
From: charles.sharpsteen at gmail.com (Charlie Sharpsteen)
Date: Fri, 2 Sep 2011 12:38:52 -0700 (PDT)
Subject: [R-SIG-Mac] R 2.13.1-patched, vecLib problem on Lion
In-Reply-To: <F0B7E6EA-934E-4F83-82AA-82894B9D2679@me.com>
References: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
	<93C22257-7393-4D0C-8CF0-AD84E610A0E6@xs4all.nl>
	<F0B7E6EA-934E-4F83-82AA-82894B9D2679@me.com>
Message-ID: <32733725.4633.1314992332240.JavaMail.geo-discussion-forums@prfq4>

On Saturday, August 20, 2011 6:32:39 AM UTC-7, Yan Zhou wrote:
>
> > The problem occurs when running R 64 bit.
> > The 32 bit R doesn't have the problem.
> > 
> Em, I tried it for 32 bit too, it runs fine. I guess it may be a linking 
> problem. 
>
> Yan
>
Not sure if this is the cause, but there was a bug in VecLib that affected 
64-bit programs on Snow Leopard. Lion appears to have fixed this bug which 
may break any program that was used to the Snow Leopard bug.

More info:

  https://github.com/mxcl/homebrew/issues/6649

That presents the bug in context of getting Octave to build, but it contains 
many links that fill in the background behind the issue.

Hope it helps!

-Charlie 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110902/6a6780bb/attachment-0002.html>

From grubio at mat.upv.es  Fri Sep  2 16:21:28 2011
From: grubio at mat.upv.es (Gregorio Rubio Navarro)
Date: Fri,  2 Sep 2011 16:21:28 +0200
Subject: [R-SIG-Mac] R, C, Fortan and Mac OSX Lion
In-Reply-To: <0F21BA38-3718-463B-B813-450D941407C5@r-project.org>
References: <1314970931.4e60dd3344c89@webmail.upv.es>
	<0F21BA38-3718-463B-B813-450D941407C5@r-project.org>
Message-ID: <1314973288.4e60e6681666a@webmail.upv.es>


The work directory is msm_ss_sp, and the source file is saddlept_ss.r.

Thank you!


Mensaje citado por Simon Urbanek <simon.urbanek at r-project.org>:

> On Sep 2, 2011, at 9:42 AM, Gregorio Rubio Navarro wrote:
>
> > --
> > Hi:
> >
> > I am trying to use a package made of R files and C-code on a Mac OS X Lion
> 10.7.1. This software was tested with R 2.1.1, gcc 3.2.3 and gsl 1.6,
>
> Wow - this is an unbelievably ancient setup (over 6 years old!) ..
>
>
> > both on linux and Mac (older than 10.7). I have installed   R-2.13-patched
> (precompiled binaries), gfortran-lion, and gsl-1.15, in the Mac OS X Lion
> 10.7.1
> >
> > The following error occurs:
> >
> > make: f77: No such file or directory
> >
> > and the program fails.
> >
> > Can anybody help me?
> >
>
> This seems like a bug in the package - it's using the wrong compiler. You
> should not write your own compilation targets and make sure you get compiler
> flags from R. You'd have to provide your package sources if you want us to
> give you more specific advice.
>
> Cheers,
> Simon
>
>
>


-- 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sources.zip
Type: application/zip
Size: 539905 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110902/76566b2f/attachment-0001.zip>

From charles.sharpsteen at gmail.com  Fri Sep  2 21:38:52 2011
From: charles.sharpsteen at gmail.com (Charlie Sharpsteen)
Date: Fri, 2 Sep 2011 12:38:52 -0700
Subject: [R-SIG-Mac] R 2.13.1-patched, vecLib problem on Lion
In-Reply-To: <F0B7E6EA-934E-4F83-82AA-82894B9D2679@me.com>
References: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
	<93C22257-7393-4D0C-8CF0-AD84E610A0E6@xs4all.nl>
	<F0B7E6EA-934E-4F83-82AA-82894B9D2679@me.com>
Message-ID: <32733725.4633.1314992332240.JavaMail.geo-discussion-forums@prfq4>

On Saturday, August 20, 2011 6:32:39 AM UTC-7, Yan Zhou wrote:
>
> > The problem occurs when running R 64 bit.
> > The 32 bit R doesn't have the problem.
> > 
> Em, I tried it for 32 bit too, it runs fine. I guess it may be a linking 
> problem. 
>
> Yan
>
Not sure if this is the cause, but there was a bug in VecLib that affected 
64-bit programs on Snow Leopard. Lion appears to have fixed this bug which 
may break any program that was used to the Snow Leopard bug.

More info:

  https://github.com/mxcl/homebrew/issues/6649

That presents the bug in context of getting Octave to build, but it contains 
many links that fill in the background behind the issue.

Hope it helps!

-Charlie 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110902/6a6780bb/attachment-0003.html>

From anirbanm at smu.edu.sg  Sat Sep  3 14:34:03 2011
From: anirbanm at smu.edu.sg (Anirban Mukherjee)
Date: Sat, 3 Sep 2011 20:34:03 +0800
Subject: [R-SIG-Mac] Lion 10.7.1. Bug with Eigen. 64 bit.
Message-ID: <CA+LiLBjwHPYhSmpNmPbsBYBfSH=+eiiHeQUNdzonEOO3DuhVjg@mail.gmail.com>

Hi all,

I upgraded the OS to Mac OS Lion (10.7.1). Using a Mac Pro, dual
hexacore processors. In R (64 bit), the following computes very
quickly.

# --- CODE ---
require(Matrix)??? ??? # Optimized matrix operations
require(SuppDists)??? # Optimized random number generators
Rnorm <- rziggurat??? # The fast normal number generator

a <- array(Rnorm(500*500), dim = c(500, 500))       ###NOTE:
DIMENSIONS ARE 500 ###

eigen(a, symmetric=FALSE, only.values=TRUE)$Value
# --- CODE ---

In R (64 bit), the following leads to a spinning wheel. I left it for
a few minutes but R remained non-responsive. Checked on both Rterm and
Rgui. Only change is a slight change in dimensions from 500 to 501.

# --- CODE ---
require(Matrix)??? ??? # Optimized matrix operations
require(SuppDists)??? # Optimized random number generators
Rnorm <- rziggurat??? # The fast normal number generator

a <- array(Rnorm(501*501), dim = c(501, 501))      ###NOTE: DIMENSIONS
ARE 501 ###

eigen(a, symmetric=FALSE, only.values=TRUE)$Value
# --- CODE ---

Using R (32 bit), both snippets compute very quickly.

Best, Anirban

--
For Rgui 64 bit:

> R.Version()
$platform
[1] "x86_64-apple-darwin9.8.0"

$arch
[1] "x86_64"

$os
[1] "darwin9.8.0"

$system
[1] "x86_64, darwin9.8.0"

$status
[1] "Patched"

$major
[1] "2"

$minor
[1] "13.1"

$year
[1] "2011"

$month
[1] "09"

$day
[1] "02"

$`svn rev`
[1] "56906"

$language
[1] "R"

$version.string
[1] "R version 2.13.1 Patched (2011-09-02 r56906)"

> sessionInfo()
R version 2.13.1 Patched (2011-09-02 r56906)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets? methods?? base

other attached packages:
[1] SuppDists_1.1-8??? Matrix_0.9996875-3 lattice_0.19-33

loaded via a namespace (and not attached):
[1] grid_2.13.1

----
For Rgui 32 bit:

> R.Version()
$platform
[1] "i386-apple-darwin9.8.0"

$arch
[1] "i386"

$os
[1] "darwin9.8.0"

$system
[1] "i386, darwin9.8.0"

$status
[1] "Patched"

$major
[1] "2"

$minor
[1] "13.1"

$year
[1] "2011"

$month
[1] "09"

$day
[1] "02"

$`svn rev`
[1] "56906"

$language
[1] "R"

$version.string
[1] "R version 2.13.1 Patched (2011-09-02 r56906)"

> sessionInfo()
R version 2.13.1 Patched (2011-09-02 r56906)
Platform: i386-apple-darwin9.8.0/i386 (32-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] SuppDists_1.1-8    Matrix_0.9996875-3 lattice_0.19-33

loaded via a namespace (and not attached):
[1] grid_2.13.1


From anirbanm at smu.edu.sg  Sat Sep  3 18:23:09 2011
From: anirbanm at smu.edu.sg (Anirban Mukherjee)
Date: Sun, 4 Sep 2011 00:23:09 +0800
Subject: [R-SIG-Mac] Lion 10.7.1. Bug with Eigen. 64 bit.
In-Reply-To: <CA+LiLBjwHPYhSmpNmPbsBYBfSH=+eiiHeQUNdzonEOO3DuhVjg@mail.gmail.com>
References: <CA+LiLBjwHPYhSmpNmPbsBYBfSH=+eiiHeQUNdzonEOO3DuhVjg@mail.gmail.com>
Message-ID: <CA+LiLBiveM+H9uF_GX0FrYCdvoUxzmV9KQREtD3_o5GOWP=Kig@mail.gmail.com>

Shoot. Sorry. Just saw Yan Zhou's post from a few days earlier. Apologize.

As far as I can tell, this is a problem only for a matrix larger than 500 * 500.

A

On Sat, Sep 3, 2011 at 8:34 PM, Anirban Mukherjee <anirbanm at smu.edu.sg> wrote:
> Hi all,
>
> I upgraded the OS to Mac OS Lion (10.7.1). Using a Mac Pro, dual
> hexacore processors. In R (64 bit), the following computes very
> quickly.
>
> # --- CODE ---
> require(Matrix)??? ??? # Optimized matrix operations
> require(SuppDists)??? # Optimized random number generators
> Rnorm <- rziggurat??? # The fast normal number generator
>
> a <- array(Rnorm(500*500), dim = c(500, 500)) ? ? ? ###NOTE:
> DIMENSIONS ARE 500 ###
>
> eigen(a, symmetric=FALSE, only.values=TRUE)$Value
> # --- CODE ---
>
> In R (64 bit), the following leads to a spinning wheel. I left it for
> a few minutes but R remained non-responsive. Checked on both Rterm and
> Rgui. Only change is a slight change in dimensions from 500 to 501.
>
> # --- CODE ---
> require(Matrix)??? ??? # Optimized matrix operations
> require(SuppDists)??? # Optimized random number generators
> Rnorm <- rziggurat??? # The fast normal number generator
>
> a <- array(Rnorm(501*501), dim = c(501, 501)) ? ? ?###NOTE: DIMENSIONS
> ARE 501 ###
>
> eigen(a, symmetric=FALSE, only.values=TRUE)$Value
> # --- CODE ---
>
> Using R (32 bit), both snippets compute very quickly.
>
> Best, Anirban
>
> --
> For Rgui 64 bit:
>
>> R.Version()
> $platform
> [1] "x86_64-apple-darwin9.8.0"
>
> $arch
> [1] "x86_64"
>
> $os
> [1] "darwin9.8.0"
>
> $system
> [1] "x86_64, darwin9.8.0"
>
> $status
> [1] "Patched"
>
> $major
> [1] "2"
>
> $minor
> [1] "13.1"
>
> $year
> [1] "2011"
>
> $month
> [1] "09"
>
> $day
> [1] "02"
>
> $`svn rev`
> [1] "56906"
>
> $language
> [1] "R"
>
> $version.string
> [1] "R version 2.13.1 Patched (2011-09-02 r56906)"
>
>> sessionInfo()
> R version 2.13.1 Patched (2011-09-02 r56906)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
>
> other attached packages:
> [1] SuppDists_1.1-8??? Matrix_0.9996875-3 lattice_0.19-33
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1
>
> ----
> For Rgui 32 bit:
>
>> R.Version()
> $platform
> [1] "i386-apple-darwin9.8.0"
>
> $arch
> [1] "i386"
>
> $os
> [1] "darwin9.8.0"
>
> $system
> [1] "i386, darwin9.8.0"
>
> $status
> [1] "Patched"
>
> $major
> [1] "2"
>
> $minor
> [1] "13.1"
>
> $year
> [1] "2011"
>
> $month
> [1] "09"
>
> $day
> [1] "02"
>
> $`svn rev`
> [1] "56906"
>
> $language
> [1] "R"
>
> $version.string
> [1] "R version 2.13.1 Patched (2011-09-02 r56906)"
>
>> sessionInfo()
> R version 2.13.1 Patched (2011-09-02 r56906)
> Platform: i386-apple-darwin9.8.0/i386 (32-bit)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] SuppDists_1.1-8 ? ?Matrix_0.9996875-3 lattice_0.19-33
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1
>


From murdoch.duncan at gmail.com  Sat Sep  3 18:47:17 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 3 Sep 2011 12:47:17 -0400
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
Message-ID: <4E625A15.5010107@gmail.com>

With a current R-patched (2.13.1 Patched (2011-09-02 r56906)), the 
following code generates plots missing the bottom labels:

par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
for (i in 1:20) plot(1)

If I resize the plot at all, it's redrawn correctly, with all margins 
showing.  After resizing, repetitions in the old window are fine, but if 
I close it and try again, the error re-surfaces.

I'm on Mac OSX 10.6.8.

Duncan Murdoch


From kasperdanielhansen at gmail.com  Sat Sep  3 23:03:40 2011
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Sat, 3 Sep 2011 17:03:40 -0400
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <4E625A15.5010107@gmail.com>
References: <4E625A15.5010107@gmail.com>
Message-ID: <CAC2h7uuCiRqHHSN3cq2e9NvXPVE=GYHg51UiDcBzcKH0NZ-j7g@mail.gmail.com>

On Sat, Sep 3, 2011 at 12:47 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> With a current R-patched (2.13.1 Patched (2011-09-02 r56906)), the following
> code generates plots missing the bottom labels:
>
> par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
> for (i in 1:20) plot(1)
>
> If I resize the plot at all, it's redrawn correctly, with all margins
> showing. ?After resizing, repetitions in the old window are fine, but if I
> close it and try again, the error re-surfaces.
>
> I'm on Mac OSX 10.6.8.

I have often seen the issue missing bottom labels on the default
window on my old 13in macbook.  I have always assumed (and I could be
wrong) that this had something to do with the actual dimensions of the
screen.  Recently I switched to a 15in macbook pro and I have never
had this problem (and I never observed it when I connected my 13in to
an external display).  I have various incoherent theories about why
this happens, but I will just state my observation: this only happens
on the native screen of a smaller laptop.

Kasper


From murdoch.duncan at gmail.com  Sun Sep  4 00:37:37 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 3 Sep 2011 18:37:37 -0400
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <CAC2h7uuCiRqHHSN3cq2e9NvXPVE=GYHg51UiDcBzcKH0NZ-j7g@mail.gmail.com>
References: <4E625A15.5010107@gmail.com>
	<CAC2h7uuCiRqHHSN3cq2e9NvXPVE=GYHg51UiDcBzcKH0NZ-j7g@mail.gmail.com>
Message-ID: <4E62AC31.3080400@gmail.com>

On 11-09-03 5:03 PM, Kasper Daniel Hansen wrote:
> On Sat, Sep 3, 2011 at 12:47 PM, Duncan Murdoch
> <murdoch.duncan at gmail.com>  wrote:
>> With a current R-patched (2.13.1 Patched (2011-09-02 r56906)), the following
>> code generates plots missing the bottom labels:
>>
>> par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
>> for (i in 1:20) plot(1)
>>
>> If I resize the plot at all, it's redrawn correctly, with all margins
>> showing.  After resizing, repetitions in the old window are fine, but if I
>> close it and try again, the error re-surfaces.
>>
>> I'm on Mac OSX 10.6.8.
>
> I have often seen the issue missing bottom labels on the default
> window on my old 13in macbook.  I have always assumed (and I could be
> wrong) that this had something to do with the actual dimensions of the
> screen.  Recently I switched to a 15in macbook pro and I have never
> had this problem (and I never observed it when I connected my 13in to
> an external display).  I have various incoherent theories about why
> this happens, but I will just state my observation: this only happens
> on the native screen of a smaller laptop.

I'm using a Macbook Air with a 1440 x 900 screen.  If I resize the 
screen to 1024 x 768, it does look a little worse.

Duncan Murdoch


From lists at remoteinformation.com.au  Sun Sep  4 16:18:21 2011
From: lists at remoteinformation.com.au (Ben Madin)
Date: Sun, 4 Sep 2011 22:18:21 +0800
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <4E625A15.5010107@gmail.com>
References: <4E625A15.5010107@gmail.com>
Message-ID: <B4561504-47AE-4880-AE3D-EE33D54A5D89@remoteinformation.com.au>

If it helps, on 15" MBP, I can't generate this problem whether at 1024 x 768 or higher 1680 x 1050

> par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
> for (i in 1:20) plot(1)
> sessionInfo()
R version 2.13.1 Patched (2011-07-25 r56499)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_AU.UTF-8/en_AU.UTF-8/C/C/en_AU.UTF-8/en_AU.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
Sun Sep  4 22:14:05 warrambat.local R[3618] <Error>: kCGErrorIllegalArgument: CGSShapeWindow
Sun Sep  4 22:14:05 warrambat.local R[3618] <Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.


I've attached the error messages to show what happens when I resize the screen, even with no quartz device open. 

Were you in the GUI or in the terminal?

cheers

Ben


On 04/09/2011, at 12:47 AM, Duncan Murdoch wrote:

> With a current R-patched (2.13.1 Patched (2011-09-02 r56906)), the following code generates plots missing the bottom labels:
> 
> par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
> for (i in 1:20) plot(1)
> 
> If I resize the plot at all, it's redrawn correctly, with all margins showing.  After resizing, repetitions in the old window are fine, but if I close it and try again, the error re-surfaces.
> 
> I'm on Mac OSX 10.6.8.
> 
> Duncan Murdoch
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From lachmann at eva.mpg.de  Sun Sep  4 20:45:42 2011
From: lachmann at eva.mpg.de (Michael Lachmann)
Date: Sun, 4 Sep 2011 20:45:42 +0200
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <B4561504-47AE-4880-AE3D-EE33D54A5D89@remoteinformation.com.au>
References: <4E625A15.5010107@gmail.com>
	<B4561504-47AE-4880-AE3D-EE33D54A5D89@remoteinformation.com.au>
Message-ID: <679A7F1A-9C6C-4950-97F4-F31081C0E196@eva.mpg.de>

I have a white macbook, and see the problem, on a simple plot(1:10), without an external screen.
When I have a second screen attached, 1680x1050, and it is the main screen, the problem disappears, and when the LCD is the main screen (1280x800) the problem is there.

R version 2.13.1 (2011-07-08)
Copyright (C) 2011 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

On 10.6.7

Michael

On 4 Sep 2011, at 4:18PM, Ben Madin wrote:

> If it helps, on 15" MBP, I can't generate this problem whether at 1024 x 768 or higher 1680 x 1050
> 
>> par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
>> for (i in 1:20) plot(1)
>> sessionInfo()
> R version 2.13.1 Patched (2011-07-25 r56499)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
> locale:
> [1] en_AU.UTF-8/en_AU.UTF-8/C/C/en_AU.UTF-8/en_AU.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> Sun Sep  4 22:14:05 warrambat.local R[3618] <Error>: kCGErrorIllegalArgument: CGSShapeWindow
> Sun Sep  4 22:14:05 warrambat.local R[3618] <Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.
> 
> 
> I've attached the error messages to show what happens when I resize the screen, even with no quartz device open. 
> 
> Were you in the GUI or in the terminal?
> 
> cheers
> 
> Ben
> 
> 
> On 04/09/2011, at 12:47 AM, Duncan Murdoch wrote:
> 
>> With a current R-patched (2.13.1 Patched (2011-09-02 r56906)), the following code generates plots missing the bottom labels:
>> 
>> par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
>> for (i in 1:20) plot(1)
>> 
>> If I resize the plot at all, it's redrawn correctly, with all margins showing.  After resizing, repetitions in the old window are fine, but if I close it and try again, the error re-surfaces.
>> 
>> I'm on Mac OSX 10.6.8.
>> 
>> Duncan Murdoch
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 


From Peter.Kupfer at hki-jena.de  Tue Sep  6 10:42:31 2011
From: Peter.Kupfer at hki-jena.de (Peter Kupfer)
Date: Tue, 06 Sep 2011 10:42:31 +0200
Subject: [R-SIG-Mac] Old packages
Message-ID: <4E65F9170200008E0000875F@fulda.hki-jena.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110906/68248353/attachment.pl>

From ripley at stats.ox.ac.uk  Tue Sep  6 10:53:31 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Sep 2011 09:53:31 +0100 (BST)
Subject: [R-SIG-Mac] Old (versions of) packages
In-Reply-To: <4E65F9170200008E0000875F@fulda.hki-jena.de>
References: <4E65F9170200008E0000875F@fulda.hki-jena.de>
Message-ID: <alpine.LFD.2.02.1109060950040.31768@gannet.stats.ox.ac.uk>

You can transfer installed packages without compiled code from one 
platform to another.

For packages with compiled code, you will need to get the old versions 
and compile from the sources.  For CRAN old versions are available at
http://cran.r-project.org/src/contrib/Archive

Just what part of this is not in the R manuals/CRAN pages?

On Tue, 6 Sep 2011, Peter Kupfer wrote:

>
> Dear all,

> after a crash of my MacBook I had to install a new R version on the 
> new book. In the meantime i worked with a Linux workstation.  For 
> sure, in the last 24 month several packages were updated and I have 
> no glue about installing old packages (older versions) of these. I 
> searched in the internet but found no reliable tutorials or manuals. 
> So I want to ask, if anybody can help me out: Is there any possible 
> solution to install old packages in an easy way? Maybe transfer the 
> used packages from the Linux PC to the MacBook? I am looking for an 
> easy solution and I would be superb if anybody can help me out.

> Thanks in advance and all the best
> Peter
>
>
>
>
> The information contained in this email and any attachments is confidential and may be subject to copyright or other intellectual property protection. If you are not the intended recipient, you are not authorized to use or disclose this information, and we request that you notify us by reply mail or telephone and delete the original message from your mail system.
> 	[[alternative HTML version deleted]]

Please do as we ask in the posting guide.

> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From simon.urbanek at r-project.org  Tue Sep  6 15:33:40 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 6 Sep 2011 09:33:40 -0400
Subject: [R-SIG-Mac] Old packages
In-Reply-To: <4E65F9170200008E0000875F@fulda.hki-jena.de>
References: <4E65F9170200008E0000875F@fulda.hki-jena.de>
Message-ID: <931F3CAE-94E6-446A-8184-FDE4E44C2CF4@r-project.org>


On Sep 6, 2011, at 4:42 AM, Peter Kupfer wrote:

> 
> Dear all,
> after a crash of my MacBook I had to install a new R version on the new book. In the meantime i worked with a Linux workstation.  For sure, in the last 24 month several packages were updated and I have no glue about installing old packages (older versions) of these. I searched in the internet but found no reliable tutorials or manuals. 
> So I want to ask, if anybody can help me out: Is there any possible solution to install old packages in an easy way? Maybe transfer the used packages from the Linux PC to the MacBook? I am looking for an easy solution and I would be superb if anybody can help me out.

If I were you, I'd simply re-install the same packages (you can use .packages(TRUE) on the Linux machine which you then simply use in install.packages in the Mac). In general older versions of packages don't necessarily work in newer versions of R so it may not be possible. You could try and see how far you get (read versions from the old library and then fetch the corresponding package sources from the CRAN archive and compile them), but it's very error prone and may not even work.

It's beyond me why you want to use old versions of packages with new R -- I understand that some people "freeze" their configuration for reproducibility reasons, but that won't work when you update R so you may as well just install the most recent versions of packages.

Cheers,
Simon


From dmsilv at gmail.com  Wed Sep  7 04:51:38 2011
From: dmsilv at gmail.com (Daniel Marcelino)
Date: Tue, 6 Sep 2011 22:51:38 -0400
Subject: [R-SIG-Mac] Run R through Stata
Message-ID: <CAAjbdiLT8uoNOSXumwy1udstN-SG0Oe2A+-w_E1qPaTRZZu8pQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110906/861afdcc/attachment.pl>

From simon.urbanek at r-project.org  Wed Sep  7 06:11:02 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 7 Sep 2011 00:11:02 -0400
Subject: [R-SIG-Mac] Run R through Stata
In-Reply-To: <CAAjbdiLT8uoNOSXumwy1udstN-SG0Oe2A+-w_E1qPaTRZZu8pQ@mail.gmail.com>
References: <CAAjbdiLT8uoNOSXumwy1udstN-SG0Oe2A+-w_E1qPaTRZZu8pQ@mail.gmail.com>
Message-ID: <4B20C3E6-34F0-4858-8F80-CB0A0E72BB7B@r-project.org>


On Sep 6, 2011, at 10:51 PM, Daniel Marcelino wrote:

> Hi all,
> 
> I'm trying to figure out how 'rsource' - a user written package for Stata
> could works on Mac. Basically, this package send R commands through Stata
> interface. To do so, it needs to find and execute R on background.
> The command works fine on Windows, however, under Mac environment I'm not
> able to get it working.
> I've asked the guy who wrote the Stata package, but unfortunately he
> doesn't have a clue on this.
> I wondering if anybody in the list have seen it before. The following line
> tells Stata to find the R application and run it, however, I got no answer
> in the screen.
> 
> 
> 
> global Rterm_path "/Applications/R64.app/Contents/MacOS/R"
> 
> global Rterm_options `"--vanilla"'
> 

That is most certainly wrong, because you're pointing it to the R.app GUI and not to R. Also note that if you installed R from CRAN then stata would have to go into considerable lengths to *not* find it, because it's in /usr/bin/R which is certainly on the PATH ...

Cheers,
Simon



> rsource using mytest.R
> 
> 
> 
> Daniel
> 
> 
> 
> -- 
> About me: http://danielmarcelino.zip.net/
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 


From hbissell at wisc.edu  Thu Sep  8 16:50:32 2011
From: hbissell at wisc.edu (Heidi Bissell)
Date: Thu, 8 Sep 2011 10:50:32 -0400
Subject: [R-SIG-Mac] Questions about .Rdata, .Rprofile and workspaces
Message-ID: <CAGYFHL=R+rQoawKmx8GjQ3sv2O91tfsheOzbX1ijbexvjwmk=w@mail.gmail.com>

I've been fiddling with some of the default R locations and settings
and have created a muddle. ?I'm using the R.app GUI.

My questions:

1) When I start a new session, hitting the up arrow once gives me one
long printout of every command from my previous session, rather than
taking me back one command at a time like it does within the current
session. ?How can I get the one-line-at-a-time-type history from the
previous session?

2) When I created my .Rprofile file (in my default working directory,
see below), I added a few items.  Each time I open the R.app, those
original items load.  However, I have since edited the .Rprofile file
to include some additional settings and these never load.  If I open
the .Rprofile text file, it includes the new commands. Did R save my
original .Rprofile somewhere else?  I know (but don't really
understand) that there is a hierarchy of .Rprofile files, but I don't
know where to look for them.  There aren't in my ~/Library/R folder.
The only place I can find a .Rprofile is where I manually created it
in my working directory.

Thank you,

Heidi

Mac OS X 7.0 (Lion)
R 32 bit GUI 2.13.1

In Preferences > Startup:
   Directory: ~Documents/Stats (always apply)
   History: (checked) Read history file on startup, location is
~/Documents/Stats/.Rapp.history (nothing else checked)
   Save Workspace on Exit: No


From robjgoedman at me.com  Thu Sep  8 18:33:09 2011
From: robjgoedman at me.com (Rob Goedman)
Date: Thu, 08 Sep 2011 09:33:09 -0700
Subject: [R-SIG-Mac] Questions about .Rdata, .Rprofile and workspaces
In-Reply-To: <CAGYFHLm_xCNNvx28Z+myReCfsxXB=MBN5w+THzJhuKYRynSxFg@mail.gmail.com>
References: <CAGYFHL=R+rQoawKmx8GjQ3sv2O91tfsheOzbX1ijbexvjwmk=w@mail.gmail.com>
	<1FAED490-AA89-44BA-B49E-1066F70EBA3A@me.com>
	<CAGYFHLm_xCNNvx28Z+myReCfsxXB=MBN5w+THzJhuKYRynSxFg@mail.gmail.com>
Message-ID: <296C2D70-01EF-4722-A1C9-2BCB51B4B960@me.com>

Hi Heidi,

On Sep 8, 2011, at 8:42 AM, Heidi Bissell wrote:

> Hi Rob,
> 
>> 
>> 1) Can you try to set the 'Clean up history items'?
> 
> Yes!  That did the trick!  Thank you.

Great.

>> 2) Move .Rprofile to your home directory (not your R working directory).
> 
> This also worked (along with setting R preferences to default to that
> directory as well),

You mean the R.app preferences? That should not be necessary if there is no .Rprofile in your R.app working dir.

I believe your understanding as expressed in your first email is correct:

R (not R.app) will indeed search in the current directory and then in your home directory for a .Rprofile.
R.app will change to the specified working dir before invoking R so if there is a .Rprofile in your R.app working dir that would take precedence.

So something fishy is going on here.

Are the permissions for .Rprofile in your home and working dirs identical? Can you send me the 2 .Rprofile files?

Rob



> but I'd really rather have all my R files together
> somewhere for ease in backing up and transferring to different
> computers.  Would a better way be to create a source file to read in
> at the beginning of each session?  Actually, I thought that's what a
> .Rprofile was.  I read that you could put a different .Rprofile in
> each project directory and initialize your sessions with the proper
> settings for each project that way (by dragging and dropping a
> directory onto the Rapp icon, it would start up ready to work on that
> project).  At the moment, all my projects use the same settings, but I
> can see that changing in the future.  What's the best way to do this?

> Thanks for your speedy and helpful reply!
> 
> Heidi
> 
> 
>> 
>> Regards,
>> Rob
>> 
>> 
>> On Sep 8, 2011, at 7:50 AM, Heidi Bissell wrote:
>> 
>>> I've been fiddling with some of the default R locations and settings
>>> and have created a muddle.  I'm using the R.app GUI.
>>> 
>>> My questions:
>>> 
>>> 1) When I start a new session, hitting the up arrow once gives me one
>>> long printout of every command from my previous session, rather than
>>> taking me back one command at a time like it does within the current
>>> session.  How can I get the one-line-at-a-time-type history from the
>>> previous session?
>>> 
>>> 2) When I created my .Rprofile file (in my default working directory,
>>> see below), I added a few items.  Each time I open the R.app, those
>>> original items load.  However, I have since edited the .Rprofile file
>>> to include some additional settings and these never load.  If I open
>>> the .Rprofile text file, it includes the new commands. Did R save my
>>> original .Rprofile somewhere else?  I know (but don't really
>>> understand) that there is a hierarchy of .Rprofile files, but I don't
>>> know where to look for them.  There aren't in my ~/Library/R folder.
>>> The only place I can find a .Rprofile is where I manually created it
>>> in my working directory.
>>> 
>>> Thank you,
>>> 
>>> Heidi
>>> 
>>> Mac OS X 7.0 (Lion)
>>> R 32 bit GUI 2.13.1
>>> 
>>> In Preferences > Startup:
>>>   Directory: ~Documents/Stats (always apply)
>>>   History: (checked) Read history file on startup, location is
>>> ~/Documents/Stats/.Rapp.history (nothing else checked)
>>>   Save Workspace on Exit: No
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
> 
> 
> 
> -- 
> Heidi Bissell ??
> Doctoral Candidate
> Department of Zoology
> University of Wisconsin-Madison
> https://mywebspace.wisc.edu/hbissell/web/


From fisher at plessthan.com  Mon Sep 12 20:43:45 2011
From: fisher at plessthan.com (Dennis Fisher)
Date: Mon, 12 Sep 2011 11:43:45 -0700
Subject: [R-SIG-Mac] Word / OS X / R
Message-ID: <A1048D73-7084-4358-B58A-383AC8B53976@plessthan.com>

R 2.13.1
OS X. 10.6.8
Colleagues,

I just encountered an interesting Word / OS X / R interaction problem.  Situation is:
	1.  I have an open RTF file
	2.  From R:
		a.  I delete the file (confirmed)
		b.  I create a new RTF file with the same name (successfully)
		c.  I attempt to open the new RTF file
Word hangs (a recursive message that it can't open the file -- it must be corrupt), presumably because the original file was open in Word, despite being deleted from the drive.  

Any ideas on how to solve this?  Is there some method (from R or from the OS) to detect which files Word has open?   If so, I could avoid creating the new file if the original one was open.
Interestingly, I presume that this would not happen in Windows because step 2a could not happen if the file were open.

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone: 1-866-PLessThan (1-866-753-7784)
Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com


From dwinsemius at comcast.net  Tue Sep 13 00:26:32 2011
From: dwinsemius at comcast.net (David Winsemius)
Date: Mon, 12 Sep 2011 18:26:32 -0400
Subject: [R-SIG-Mac] Word / OS X / R
In-Reply-To: <A1048D73-7084-4358-B58A-383AC8B53976@plessthan.com>
References: <A1048D73-7084-4358-B58A-383AC8B53976@plessthan.com>
Message-ID: <251C2DA7-2E6F-416F-BE2B-6AB4075D0862@comcast.net>


On Sep 12, 2011, at 2:43 PM, Dennis Fisher wrote:

> R 2.13.1
> OS X. 10.6.8
> Colleagues,
>
> I just encountered an interesting Word / OS X / R interaction  
> problem.  Situation is:
> 	1.  I have an open RTF file
> 	2.  From R:
> 		a.  I delete the file (confirmed)
> 		b.  I create a new RTF file with the same name (successfully)
> 		c.  I attempt to open the new RTF file
> Word hangs (a recursive message that it can't open the file -- it  
> must be corrupt), presumably because the original file was open in  
> Word, despite being deleted from the drive.

Sounds more like a Microsoft error. File locking (or lack thereof)  
varies across OSes. BSD is more permissive than System V. It is not  
the default on BSD Unix.

>
> Any ideas on how to solve this?  Is there some method (from R or  
> from the OS) to detect which files Word has open?   If so, I could  
> avoid creating the new file if the original one was open.
> Interestingly, I presume that this would not happen in Windows  
> because step 2a could not happen if the file were open.


http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ 
ManPages/10.5/man2/flock.2.html

I suppose you need to determine by experimentation whether MS-Word  
sets any flags that system utilities can access.


> Dennis
>

-- 

David Winsemius, MD
West Hartford, CT


From bpbond at gmail.com  Tue Sep 13 02:21:43 2011
From: bpbond at gmail.com (Ben Bond-Lamberty)
Date: Mon, 12 Sep 2011 20:21:43 -0400
Subject: [R-SIG-Mac] Word / OS X / R
In-Reply-To: <251C2DA7-2E6F-416F-BE2B-6AB4075D0862@comcast.net>
References: <A1048D73-7084-4358-B58A-383AC8B53976@plessthan.com>
	<251C2DA7-2E6F-416F-BE2B-6AB4075D0862@comcast.net>
Message-ID: <CAGg1N9LwjLzwuL1s2d+woYbDzPpsNH0z72wOycQu1GWtey1FCQ@mail.gmail.com>

On Mon, Sep 12, 2011 at 6:26 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>
> On Sep 12, 2011, at 2:43 PM, Dennis Fisher wrote:
>
>> R 2.13.1
>> OS X. 10.6.8
>> Colleagues,
>>
>> I just encountered an interesting Word / OS X / R interaction problem.
>> ?Situation is:
>> ? ? ? ?1. ?I have an open RTF file
>> ? ? ? ?2. ?From R:
>> ? ? ? ? ? ? ? ?a. ?I delete the file (confirmed)
>> ? ? ? ? ? ? ? ?b. ?I create a new RTF file with the same name
>> (successfully)
>> ? ? ? ? ? ? ? ?c. ?I attempt to open the new RTF file
>> Word hangs (a recursive message that it can't open the file -- it must be
>> corrupt), presumably because the original file was open in Word, despite
>> being deleted from the drive.
>
> Sounds more like a Microsoft error. File locking (or lack thereof) varies
> across OSes. BSD is more permissive than System V. It is not the default on
> BSD Unix.
>
>>
>> Any ideas on how to solve this? ?Is there some method (from R or from the
>> OS) to detect which files Word has open? ? If so, I could avoid creating the
>> new file if the original one was open.
>> Interestingly, I presume that this would not happen in Windows because
>> step 2a could not happen if the file were open.
>
>
> http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/10.5/man2/flock.2.html
>
> I suppose you need to determine by experimentation whether MS-Word sets any
> flags that system utilities can access.
>
>
>> Dennis

I can't reproduce this using Word 2011 (v14.1.2 (110505)), R 2.13.1,
and 10.6.8. Word closes and re-opens the file without complaint.

> I suppose you need to determine by experimentation whether MS-Word sets any
> flags that system utilities can access.

You could also, from R, call lsof (e.g., "system( "lsof | grep foo" )
) to explicitly check if Word, or any other program, has the file
open.

Ben


From marius.hofert at math.ethz.ch  Wed Sep 14 20:25:28 2011
From: marius.hofert at math.ethz.ch (Hofert  Jan Marius)
Date: Wed, 14 Sep 2011 18:25:28 +0000
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac (in
	emacs)?
Message-ID: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>

Dear expeRts,

I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame. 

On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started. 

The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway... 

Cheers,

Marius


From simon.urbanek at r-project.org  Wed Sep 14 20:39:36 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 14 Sep 2011 14:39:36 -0400
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
	(in emacs)?
In-Reply-To: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
Message-ID: <643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>


On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:

> Dear expeRts,
> 
> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame. 
> 
> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started. 
> 
> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway... 
> 


For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like

sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13

This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f

Cheers,
Simon


From marius.hofert at math.ethz.ch  Wed Sep 14 21:02:00 2011
From: marius.hofert at math.ethz.ch (Hofert  Jan Marius)
Date: Wed, 14 Sep 2011 19:02:00 +0000
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
 (in emacs)?
In-Reply-To: <643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
Message-ID: <FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>

Dear Simon,

thanks for your help, that clarified a lot. 
As I could read it is not "recommended" to make the adjustment. 

Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient. 

Cheers,

Marius

On 2011-09-14, at 20:39 , Simon Urbanek wrote:

> 
> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
> 
>> Dear expeRts,
>> 
>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame. 
>> 
>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started. 
>> 
>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway... 
>> 
> 
> 
> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
> 
> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
> 
> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
> 
> Cheers,
> Simon
> 


From simon.urbanek at r-project.org  Fri Sep 16 02:30:48 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 15 Sep 2011 20:30:48 -0400
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
	(in emacs)?
In-Reply-To: <FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
	<FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
Message-ID: <3E732189-FEB8-46D4-934B-25934404922F@r-project.org>


On Sep 14, 2011, at 3:02 PM, Hofert Jan Marius wrote:

> Dear Simon,
> 
> thanks for your help, that clarified a lot. 
> As I could read it is not "recommended" to make the adjustment. 
> 
> Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient. 
> 

Actually, it's the other way around - switching versions is trivial from the command line simply using "ln" (see the FAQ) so obviously you can do that in the script. RSwitch is just a wrapper that allows you to do that from the GUI. But note that the issue is that the Current link can only be correct for one version, so you can use one or the other but not both at the same time. Setting R home to the versioned version allows you to use both at the same time but some issues remain (compiling packages etc.).

Cheers,
Simon


> 
> On 2011-09-14, at 20:39 , Simon Urbanek wrote:
> 
>> 
>> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
>> 
>>> Dear expeRts,
>>> 
>>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame. 
>>> 
>>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started. 
>>> 
>>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway... 
>>> 
>> 
>> 
>> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
>> 
>> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
>> 
>> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
>> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
>> 
>> Cheers,
>> Simon
>> 
> 
> 
> 


From marius.hofert at math.ethz.ch  Fri Sep 16 06:57:58 2011
From: marius.hofert at math.ethz.ch (Hofert  Jan Marius)
Date: Fri, 16 Sep 2011 04:57:58 +0000
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
 (in emacs)?
In-Reply-To: <3E732189-FEB8-46D4-934B-25934404922F@r-project.org>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
	<FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
	<3E732189-FEB8-46D4-934B-25934404922F@r-project.org>
Message-ID: <AA52C4AE-0696-44A8-972F-4B2C6860603E@math.ethz.ch>


On 2011-09-16, at 02:30 , Simon Urbanek wrote:

> 
> On Sep 14, 2011, at 3:02 PM, Hofert Jan Marius wrote:
> 
>> Dear Simon,
>> 
>> thanks for your help, that clarified a lot. 
>> As I could read it is not "recommended" to make the adjustment. 
>> 
>> Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient. 
>> 
> 
> Actually, it's the other way around - switching versions is trivial from the command line simply using "ln" (see the FAQ) so obviously you can do that in the script. RSwitch is just a wrapper that allows you to do that from the GUI. But note that the issue is that the Current link can only be correct for one version, so you can use one or the other but not both at the same time. Setting R home to the versioned version allows you to use both at the same time but some issues remain (compiling packages etc.).
> 
> Cheers,
> Simon

Dear Simon,

thanks for helping.

I realized that setting it with ln is just a convenience [not having to click anything], but of course that does not imply that one can suddenly open two versions. I even tried and one runs into problems quite quickly.
That's a pity, I have to admit that this is the first time that the Mac is not behaving nicely and inferior to Linux. I don't have Linux installed but as far as I know from Linux users, they can have multiple versions installed *and* work with them in parallel. As one can read on http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f : "The advanatage of this setup is that it is possible to install multiple R versions in parallel and they all will be fully functional ...". Obviously it is not an advantage in comparison to Linux systems. I was wondering about that, that's why I asked.

Cheers,

Marius 


> 
> 
>> 
>> On 2011-09-14, at 20:39 , Simon Urbanek wrote:
>> 
>>> 
>>> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
>>> 
>>>> Dear expeRts,
>>>> 
>>>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame. 
>>>> 
>>>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started. 
>>>> 
>>>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway... 
>>>> 
>>> 
>>> 
>>> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
>>> 
>>> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
>>> 
>>> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
>>> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
>>> 
>>> Cheers,
>>> Simon
>>> 
>> 
>> 
>> 
> 


From simon.urbanek at r-project.org  Fri Sep 16 15:18:40 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 16 Sep 2011 09:18:40 -0400
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
	(in emacs)?
In-Reply-To: <AA52C4AE-0696-44A8-972F-4B2C6860603E@math.ethz.ch>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
	<FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
	<3E732189-FEB8-46D4-934B-25934404922F@r-project.org>
	<AA52C4AE-0696-44A8-972F-4B2C6860603E@math.ethz.ch>
Message-ID: <33CE9DBB-5362-4377-A373-A4762526FEA8@r-project.org>


On Sep 16, 2011, at 12:57 AM, Hofert Jan Marius wrote:

> 
> On 2011-09-16, at 02:30 , Simon Urbanek wrote:
> 
>> 
>> On Sep 14, 2011, at 3:02 PM, Hofert Jan Marius wrote:
>> 
>>> Dear Simon,
>>> 
>>> thanks for your help, that clarified a lot. 
>>> As I could read it is not "recommended" to make the adjustment. 
>>> 
>>> Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient. 
>>> 
>> 
>> Actually, it's the other way around - switching versions is trivial from the command line simply using "ln" (see the FAQ) so obviously you can do that in the script. RSwitch is just a wrapper that allows you to do that from the GUI. But note that the issue is that the Current link can only be correct for one version, so you can use one or the other but not both at the same time. Setting R home to the versioned version allows you to use both at the same time but some issues remain (compiling packages etc.).
>> 
>> Cheers,
>> Simon
> 
> Dear Simon,
> 
> thanks for helping.
> 
> I realized that setting it with ln is just a convenience [not having to click anything], but of course that does not imply that one can suddenly open two versions. I even tried and one runs into problems quite quickly.
> That's a pity, I have to admit that this is the first time that the Mac is not behaving nicely and inferior to Linux. I don't have Linux installed but as far as I know from Linux users, they can have multiple versions installed *and* work with them in parallel. As one can read on http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f : "The advanatage of this setup is that it is possible to install multiple R versions in parallel and they all will be fully functional ...". Obviously it is not an advantage in comparison to Linux systems. I was wondering about that, that's why I asked.
> 

I think you may have missed my first e-mail -- if you change the R home path to the *versioned* path then your home is no longer dependent on the Current link and thus you get the same setup as on Linux.

The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...

Cheers,
Simon


> 
> 
>> 
>> 
>>> 
>>> On 2011-09-14, at 20:39 , Simon Urbanek wrote:
>>> 
>>>> 
>>>> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
>>>> 
>>>>> Dear expeRts,
>>>>> 
>>>>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame. 
>>>>> 
>>>>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started. 
>>>>> 
>>>>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway... 
>>>>> 
>>>> 
>>>> 
>>>> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
>>>> 
>>>> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
>>>> 
>>>> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
>>>> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
>>>> 
>>>> Cheers,
>>>> Simon
>>>> 
>>> 
>>> 
>>> 
>> 
> 
> 
> 


From mailinglist.honeypot at gmail.com  Fri Sep 16 17:03:42 2011
From: mailinglist.honeypot at gmail.com (Steve Lianoglou)
Date: Fri, 16 Sep 2011 11:03:42 -0400
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
	(in emacs)?
In-Reply-To: <33CE9DBB-5362-4377-A373-A4762526FEA8@r-project.org>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
	<FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
	<3E732189-FEB8-46D4-934B-25934404922F@r-project.org>
	<AA52C4AE-0696-44A8-972F-4B2C6860603E@math.ethz.ch>
	<33CE9DBB-5362-4377-A373-A4762526FEA8@r-project.org>
Message-ID: <CAHA9McMwvoGXKFZNsyX3S-=tzL0ZQySOU59-C4eYkO6-7YE74g@mail.gmail.com>

Hi,

There is also a (somehow recent) post on the bioc-devel mailing list
from Kasper that can help here, too:

https://stat.ethz.ch/pipermail/bioc-devel/2011-July/002684.html

He assumes you've downloaded R-2.13 and and R-devel binaries from
r.research.att.net and install via the `tar fvxz R*.tar.gz -C /`

He then has a shell script (which you need to fix the line wrapping on
-- I provide fixed version as a gist below) that does some minor
surgery to symbolic links and changes some relative paths to absolute
ones in the various ".../Resources/bin/R" files.

At the end of the day, you will have R-2.13.1 installed and invokable
from the cmd line as "R" (or R-2.13), and the devel branch is
invokable as R-devel.

I just used that for the R-devel bits (ie, I commented out things that
have to do w/ R-2.13) and successfully compiled a mixed R/C package
from source in the R-devel that I just downloaded and "relinked". I
made a gist of the script from Kasper's post and commented out the
lines that were messing around with R-2.13 for now:

https://gist.github.com/1222291

Perhaps you will find it helpful and hopefully not too dangerous, but
use at your own risk, of course. Please be sure to read Kasper's
original post and don't just run the script I linked to in the gist
without understanding what it does. If there are any unintended
side-effects, you'll have to reinstall your R versions from scratch,
or fix your installed `.../Resources/bin/R` scripts by hand.

HTH,
-steve


On Fri, Sep 16, 2011 at 9:18 AM, Simon Urbanek
<simon.urbanek at r-project.org> wrote:
>
> On Sep 16, 2011, at 12:57 AM, Hofert Jan Marius wrote:
>
>>
>> On 2011-09-16, at 02:30 , Simon Urbanek wrote:
>>
>>>
>>> On Sep 14, 2011, at 3:02 PM, Hofert Jan Marius wrote:
>>>
>>>> Dear Simon,
>>>>
>>>> thanks for your help, that clarified a lot.
>>>> As I could read it is not "recommended" to make the adjustment.
>>>>
>>>> Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient.
>>>>
>>>
>>> Actually, it's the other way around - switching versions is trivial from the command line simply using "ln" (see the FAQ) so obviously you can do that in the script. RSwitch is just a wrapper that allows you to do that from the GUI. But note that the issue is that the Current link can only be correct for one version, so you can use one or the other but not both at the same time. Setting R home to the versioned version allows you to use both at the same time but some issues remain (compiling packages etc.).
>>>
>>> Cheers,
>>> Simon
>>
>> Dear Simon,
>>
>> thanks for helping.
>>
>> I realized that setting it with ln is just a convenience [not having to click anything], but of course that does not imply that one can suddenly open two versions. I even tried and one runs into problems quite quickly.
>> That's a pity, I have to admit that this is the first time that the Mac is not behaving nicely and inferior to Linux. I don't have Linux installed but as far as I know from Linux users, they can have multiple versions installed *and* work with them in parallel. As one can read on http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f : "The advanatage of this setup is that it is possible to install multiple R versions in parallel and they all will be fully functional ...". Obviously it is not an advantage in comparison to Linux systems. I was wondering about that, that's why I asked.
>>
>
> I think you may have missed my first e-mail -- if you change the R home path to the *versioned* path then your home is no longer dependent on the Current link and thus you get the same setup as on Linux.
>
> The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...
>
> Cheers,
> Simon
>
>
>>
>>
>>>
>>>
>>>>
>>>> On 2011-09-14, at 20:39 , Simon Urbanek wrote:
>>>>
>>>>>
>>>>> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
>>>>>
>>>>>> Dear expeRts,
>>>>>>
>>>>>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame.
>>>>>>
>>>>>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started.
>>>>>>
>>>>>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway...
>>>>>>
>>>>>
>>>>>
>>>>> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
>>>>>
>>>>> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
>>>>>
>>>>> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
>>>>> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
>>>>>
>>>>> Cheers,
>>>>> Simon
>>>>>
>>>>
>>>>
>>>>
>>>
>>
>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>



-- 
Steve Lianoglou
Graduate Student: Computational Systems Biology
?| Memorial Sloan-Kettering Cancer Center
?| Weill Medical College of Cornell University
Contact Info: http://cbio.mskcc.org/~lianos/contact


From simon.urbanek at r-project.org  Fri Sep 16 17:15:46 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 16 Sep 2011 11:15:46 -0400
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
	(in emacs)?
In-Reply-To: <CAHA9McMwvoGXKFZNsyX3S-=tzL0ZQySOU59-C4eYkO6-7YE74g@mail.gmail.com>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
	<FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
	<3E732189-FEB8-46D4-934B-25934404922F@r-project.org>
	<AA52C4AE-0696-44A8-972F-4B2C6860603E@math.ethz.ch>
	<33CE9DBB-5362-4377-A373-A4762526FEA8@r-project.org>
	<CAHA9McMwvoGXKFZNsyX3S-=tzL0ZQySOU59-C4eYkO6-7YE74g@mail.gmail.com>
Message-ID: <747D5DDE-8F7A-4ECD-A2A5-3D2F673F34A6@r-project.org>

Just a quick heads-up on that guide -- installing nightlies from tar balls has some consequences you may want to be aware of. Most notably the installer scripts in the .pkg make sure R architectures match your system, but if you install the tar balls (which are designed for OS X 10.5) that will not be the case. This is an issue for OS X 10.6 and 10.7 since they no longer support ppc. If you really want to install the tar balls (there is no real reason to do so) you should either know what you are doing or run the postflight script (As root) *before* you mess with the Current link:
https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/packaging/leopard/scripts/postflight

Note that the guide and the script you posted essentially does what I posted here except it fails to mention the package compiling issues ;).

Cheers,
Simon


On Sep 16, 2011, at 11:03 AM, Steve Lianoglou wrote:

> Hi,
> 
> There is also a (somehow recent) post on the bioc-devel mailing list
> from Kasper that can help here, too:
> 
> https://stat.ethz.ch/pipermail/bioc-devel/2011-July/002684.html
> 
> He assumes you've downloaded R-2.13 and and R-devel binaries from
> r.research.att.net and install via the `tar fvxz R*.tar.gz -C /`
> 
> He then has a shell script (which you need to fix the line wrapping on
> -- I provide fixed version as a gist below) that does some minor
> surgery to symbolic links and changes some relative paths to absolute
> ones in the various ".../Resources/bin/R" files.
> 
> At the end of the day, you will have R-2.13.1 installed and invokable
> from the cmd line as "R" (or R-2.13), and the devel branch is
> invokable as R-devel.
> 
> I just used that for the R-devel bits (ie, I commented out things that
> have to do w/ R-2.13) and successfully compiled a mixed R/C package
> from source in the R-devel that I just downloaded and "relinked". I
> made a gist of the script from Kasper's post and commented out the
> lines that were messing around with R-2.13 for now:
> 
> https://gist.github.com/1222291
> 
> Perhaps you will find it helpful and hopefully not too dangerous, but
> use at your own risk, of course. Please be sure to read Kasper's
> original post and don't just run the script I linked to in the gist
> without understanding what it does. If there are any unintended
> side-effects, you'll have to reinstall your R versions from scratch,
> or fix your installed `.../Resources/bin/R` scripts by hand.
> 
> HTH,
> -steve
> 
> 
> On Fri, Sep 16, 2011 at 9:18 AM, Simon Urbanek
> <simon.urbanek at r-project.org> wrote:
>> 
>> On Sep 16, 2011, at 12:57 AM, Hofert Jan Marius wrote:
>> 
>>> 
>>> On 2011-09-16, at 02:30 , Simon Urbanek wrote:
>>> 
>>>> 
>>>> On Sep 14, 2011, at 3:02 PM, Hofert Jan Marius wrote:
>>>> 
>>>>> Dear Simon,
>>>>> 
>>>>> thanks for your help, that clarified a lot.
>>>>> As I could read it is not "recommended" to make the adjustment.
>>>>> 
>>>>> Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient.
>>>>> 
>>>> 
>>>> Actually, it's the other way around - switching versions is trivial from the command line simply using "ln" (see the FAQ) so obviously you can do that in the script. RSwitch is just a wrapper that allows you to do that from the GUI. But note that the issue is that the Current link can only be correct for one version, so you can use one or the other but not both at the same time. Setting R home to the versioned version allows you to use both at the same time but some issues remain (compiling packages etc.).
>>>> 
>>>> Cheers,
>>>> Simon
>>> 
>>> Dear Simon,
>>> 
>>> thanks for helping.
>>> 
>>> I realized that setting it with ln is just a convenience [not having to click anything], but of course that does not imply that one can suddenly open two versions. I even tried and one runs into problems quite quickly.
>>> That's a pity, I have to admit that this is the first time that the Mac is not behaving nicely and inferior to Linux. I don't have Linux installed but as far as I know from Linux users, they can have multiple versions installed *and* work with them in parallel. As one can read on http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f : "The advanatage of this setup is that it is possible to install multiple R versions in parallel and they all will be fully functional ...". Obviously it is not an advantage in comparison to Linux systems. I was wondering about that, that's why I asked.
>>> 
>> 
>> I think you may have missed my first e-mail -- if you change the R home path to the *versioned* path then your home is no longer dependent on the Current link and thus you get the same setup as on Linux.
>> 
>> The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...
>> 
>> Cheers,
>> Simon
>> 
>> 
>>> 
>>> 
>>>> 
>>>> 
>>>>> 
>>>>> On 2011-09-14, at 20:39 , Simon Urbanek wrote:
>>>>> 
>>>>>> 
>>>>>> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
>>>>>> 
>>>>>>> Dear expeRts,
>>>>>>> 
>>>>>>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame.
>>>>>>> 
>>>>>>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started.
>>>>>>> 
>>>>>>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway...
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
>>>>>> 
>>>>>> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
>>>>>> 
>>>>>> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
>>>>>> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
>>>>>> 
>>>>>> Cheers,
>>>>>> Simon
>>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>> 
>>> 
>>> 
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> 
> -- 
> Steve Lianoglou
> Graduate Student: Computational Systems Biology
>  | Memorial Sloan-Kettering Cancer Center
>  | Weill Medical College of Cornell University
> Contact Info: http://cbio.mskcc.org/~lianos/contact
> 
> 


From mailinglist.honeypot at gmail.com  Fri Sep 16 17:46:50 2011
From: mailinglist.honeypot at gmail.com (Steve Lianoglou)
Date: Fri, 16 Sep 2011 11:46:50 -0400
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
	(in emacs)?
In-Reply-To: <747D5DDE-8F7A-4ECD-A2A5-3D2F673F34A6@r-project.org>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
	<FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
	<3E732189-FEB8-46D4-934B-25934404922F@r-project.org>
	<AA52C4AE-0696-44A8-972F-4B2C6860603E@math.ethz.ch>
	<33CE9DBB-5362-4377-A373-A4762526FEA8@r-project.org>
	<CAHA9McMwvoGXKFZNsyX3S-=tzL0ZQySOU59-C4eYkO6-7YE74g@mail.gmail.com>
	<747D5DDE-8F7A-4ECD-A2A5-3D2F673F34A6@r-project.org>
Message-ID: <CAHA9McPvGMZjxriZrB7JaA0CJR0C0uQG2OqHsDGu52k1-tH8Hw@mail.gmail.com>

Hi Simon,

Thanks for the quick reply ... very informative.

I don't exactly follow on what the compiling issues are, though.

You said:

> The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...

What do you mean by "running it in place" and "this only makes sense
if you want to build packages in two different R versions at exactly
the same time"?

Let's say I'm running R-devel in this "Kasper-fashion" and fire an
`install.packages('whatever', by='source')`, are you saying that the
package will be linking against the wrong libR? Or is there a problem
if I'm running R-2.13 in one window, and R-devel in another, then I
try to make them install/compile packages at the same time? I mean,
that sounds like a weird scenario, and I'm not sure why that would
matter anyway, but I'm trying to make sense of the "exactly the same
time" thing here, too.

Sorry if I'm missing something obvious,

-steve




On Fri, Sep 16, 2011 at 11:15 AM, Simon Urbanek
<simon.urbanek at r-project.org> wrote:
> Just a quick heads-up on that guide -- installing nightlies from tar balls has some consequences you may want to be aware of. Most notably the installer scripts in the .pkg make sure R architectures match your system, but if you install the tar balls (which are designed for OS X 10.5) that will not be the case. This is an issue for OS X 10.6 and 10.7 since they no longer support ppc. If you really want to install the tar balls (there is no real reason to do so) you should either know what you are doing or run the postflight script (As root) *before* you mess with the Current link:
> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/packaging/leopard/scripts/postflight
>
> Note that the guide and the script you posted essentially does what I posted here except it fails to mention the package compiling issues ;).
>
> Cheers,
> Simon
>
>
> On Sep 16, 2011, at 11:03 AM, Steve Lianoglou wrote:
>
>> Hi,
>>
>> There is also a (somehow recent) post on the bioc-devel mailing list
>> from Kasper that can help here, too:
>>
>> https://stat.ethz.ch/pipermail/bioc-devel/2011-July/002684.html
>>
>> He assumes you've downloaded R-2.13 and and R-devel binaries from
>> r.research.att.net and install via the `tar fvxz R*.tar.gz -C /`
>>
>> He then has a shell script (which you need to fix the line wrapping on
>> -- I provide fixed version as a gist below) that does some minor
>> surgery to symbolic links and changes some relative paths to absolute
>> ones in the various ".../Resources/bin/R" files.
>>
>> At the end of the day, you will have R-2.13.1 installed and invokable
>> from the cmd line as "R" (or R-2.13), and the devel branch is
>> invokable as R-devel.
>>
>> I just used that for the R-devel bits (ie, I commented out things that
>> have to do w/ R-2.13) and successfully compiled a mixed R/C package
>> from source in the R-devel that I just downloaded and "relinked". I
>> made a gist of the script from Kasper's post and commented out the
>> lines that were messing around with R-2.13 for now:
>>
>> https://gist.github.com/1222291
>>
>> Perhaps you will find it helpful and hopefully not too dangerous, but
>> use at your own risk, of course. Please be sure to read Kasper's
>> original post and don't just run the script I linked to in the gist
>> without understanding what it does. If there are any unintended
>> side-effects, you'll have to reinstall your R versions from scratch,
>> or fix your installed `.../Resources/bin/R` scripts by hand.
>>
>> HTH,
>> -steve
>>
>>
>> On Fri, Sep 16, 2011 at 9:18 AM, Simon Urbanek
>> <simon.urbanek at r-project.org> wrote:
>>>
>>> On Sep 16, 2011, at 12:57 AM, Hofert Jan Marius wrote:
>>>
>>>>
>>>> On 2011-09-16, at 02:30 , Simon Urbanek wrote:
>>>>
>>>>>
>>>>> On Sep 14, 2011, at 3:02 PM, Hofert Jan Marius wrote:
>>>>>
>>>>>> Dear Simon,
>>>>>>
>>>>>> thanks for your help, that clarified a lot.
>>>>>> As I could read it is not "recommended" to make the adjustment.
>>>>>>
>>>>>> Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient.
>>>>>>
>>>>>
>>>>> Actually, it's the other way around - switching versions is trivial from the command line simply using "ln" (see the FAQ) so obviously you can do that in the script. RSwitch is just a wrapper that allows you to do that from the GUI. But note that the issue is that the Current link can only be correct for one version, so you can use one or the other but not both at the same time. Setting R home to the versioned version allows you to use both at the same time but some issues remain (compiling packages etc.).
>>>>>
>>>>> Cheers,
>>>>> Simon
>>>>
>>>> Dear Simon,
>>>>
>>>> thanks for helping.
>>>>
>>>> I realized that setting it with ln is just a convenience [not having to click anything], but of course that does not imply that one can suddenly open two versions. I even tried and one runs into problems quite quickly.
>>>> That's a pity, I have to admit that this is the first time that the Mac is not behaving nicely and inferior to Linux. I don't have Linux installed but as far as I know from Linux users, they can have multiple versions installed *and* work with them in parallel. As one can read on http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f : "The advanatage of this setup is that it is possible to install multiple R versions in parallel and they all will be fully functional ...". Obviously it is not an advantage in comparison to Linux systems. I was wondering about that, that's why I asked.
>>>>
>>>
>>> I think you may have missed my first e-mail -- if you change the R home path to the *versioned* path then your home is no longer dependent on the Current link and thus you get the same setup as on Linux.
>>>
>>> The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...
>>>
>>> Cheers,
>>> Simon
>>>
>>>
>>>>
>>>>
>>>>>
>>>>>
>>>>>>
>>>>>> On 2011-09-14, at 20:39 , Simon Urbanek wrote:
>>>>>>
>>>>>>>
>>>>>>> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
>>>>>>>
>>>>>>>> Dear expeRts,
>>>>>>>>
>>>>>>>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame.
>>>>>>>>
>>>>>>>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started.
>>>>>>>>
>>>>>>>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway...
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
>>>>>>>
>>>>>>> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
>>>>>>>
>>>>>>> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
>>>>>>> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
>>>>>>>
>>>>>>> Cheers,
>>>>>>> Simon
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>
>>
>>
>> --
>> Steve Lianoglou
>> Graduate Student: Computational Systems Biology
>> ?| Memorial Sloan-Kettering Cancer Center
>> ?| Weill Medical College of Cornell University
>> Contact Info: http://cbio.mskcc.org/~lianos/contact
>>
>>
>
>



-- 
Steve Lianoglou
Graduate Student: Computational Systems Biology
?| Memorial Sloan-Kettering Cancer Center
?| Weill Medical College of Cornell University
Contact Info: http://cbio.mskcc.org/~lianos/contact


From simon.urbanek at r-project.org  Fri Sep 16 17:56:08 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 16 Sep 2011 11:56:08 -0400
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
	(in emacs)?
In-Reply-To: <CAHA9McPvGMZjxriZrB7JaA0CJR0C0uQG2OqHsDGu52k1-tH8Hw@mail.gmail.com>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
	<FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
	<3E732189-FEB8-46D4-934B-25934404922F@r-project.org>
	<AA52C4AE-0696-44A8-972F-4B2C6860603E@math.ethz.ch>
	<33CE9DBB-5362-4377-A373-A4762526FEA8@r-project.org>
	<CAHA9McMwvoGXKFZNsyX3S-=tzL0ZQySOU59-C4eYkO6-7YE74g@mail.gmail.com>
	<747D5DDE-8F7A-4ECD-A2A5-3D2F673F34A6@r-project.org>
	<CAHA9McPvGMZjxriZrB7JaA0CJR0C0uQG2OqHsDGu52k1-tH8Hw@mail.gmail.com>
Message-ID: <E73BDC28-FF30-4FDF-900A-460C3A267EB6@r-project.org>


On Sep 16, 2011, at 11:46 AM, Steve Lianoglou wrote:

> Hi Simon,
> 
> Thanks for the quick reply ... very informative.
> 
> I don't exactly follow on what the compiling issues are, though.
> 
> You said:
> 
>> The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...
> 
> What do you mean by "running it in place" and "this only makes sense
> if you want to build packages in two different R versions at exactly
> the same time"?
> 
> Let's say I'm running R-devel in this "Kasper-fashion" and fire an
> `install.packages('whatever', by='source')`, are you saying that the
> package will be linking against the wrong libR?

Yes. The linking is done via "-framework R" so that does respect the Current symlink. As I said in the previous e-mail one of the options is to go back to
LIBR = -L$(R_HOME)/lib$(R_ARCH) -lR -dylib_file libRblas.dylib:$(R_HOME)/lib$(R_ARCH)/libRblas.dylib
which is what R uses until you install it into a framework.


> Or is there a problem
> if I'm running R-2.13 in one window, and R-devel in another, then I
> try to make them install/compile packages at the same time? I mean,
> that sounds like a weird scenario, and I'm not sure why that would
> matter anyway, but I'm trying to make sense of the "exactly the same
> time" thing here, too.
> 

I meant that compiling is the only time when it matters, so you can set the symlink properly only for one compilation but not for two in parallel. So let's say if you set the symlink in the R script then it's safe in any scenario except for the case where you run R-2.13 CMD INSTALL followed by R-devel CMD INSTALL before R-2.13 CMD INSTALL finishes.

Cheers,
Simon


> 
> 
> 
> On Fri, Sep 16, 2011 at 11:15 AM, Simon Urbanek
> <simon.urbanek at r-project.org> wrote:
>> Just a quick heads-up on that guide -- installing nightlies from tar balls has some consequences you may want to be aware of. Most notably the installer scripts in the .pkg make sure R architectures match your system, but if you install the tar balls (which are designed for OS X 10.5) that will not be the case. This is an issue for OS X 10.6 and 10.7 since they no longer support ppc. If you really want to install the tar balls (there is no real reason to do so) you should either know what you are doing or run the postflight script (As root) *before* you mess with the Current link:
>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/packaging/leopard/scripts/postflight
>> 
>> Note that the guide and the script you posted essentially does what I posted here except it fails to mention the package compiling issues ;).
>> 
>> Cheers,
>> Simon
>> 
>> 
>> On Sep 16, 2011, at 11:03 AM, Steve Lianoglou wrote:
>> 
>>> Hi,
>>> 
>>> There is also a (somehow recent) post on the bioc-devel mailing list
>>> from Kasper that can help here, too:
>>> 
>>> https://stat.ethz.ch/pipermail/bioc-devel/2011-July/002684.html
>>> 
>>> He assumes you've downloaded R-2.13 and and R-devel binaries from
>>> r.research.att.net and install via the `tar fvxz R*.tar.gz -C /`
>>> 
>>> He then has a shell script (which you need to fix the line wrapping on
>>> -- I provide fixed version as a gist below) that does some minor
>>> surgery to symbolic links and changes some relative paths to absolute
>>> ones in the various ".../Resources/bin/R" files.
>>> 
>>> At the end of the day, you will have R-2.13.1 installed and invokable
>>> from the cmd line as "R" (or R-2.13), and the devel branch is
>>> invokable as R-devel.
>>> 
>>> I just used that for the R-devel bits (ie, I commented out things that
>>> have to do w/ R-2.13) and successfully compiled a mixed R/C package
>>> from source in the R-devel that I just downloaded and "relinked". I
>>> made a gist of the script from Kasper's post and commented out the
>>> lines that were messing around with R-2.13 for now:
>>> 
>>> https://gist.github.com/1222291
>>> 
>>> Perhaps you will find it helpful and hopefully not too dangerous, but
>>> use at your own risk, of course. Please be sure to read Kasper's
>>> original post and don't just run the script I linked to in the gist
>>> without understanding what it does. If there are any unintended
>>> side-effects, you'll have to reinstall your R versions from scratch,
>>> or fix your installed `.../Resources/bin/R` scripts by hand.
>>> 
>>> HTH,
>>> -steve
>>> 
>>> 
>>> On Fri, Sep 16, 2011 at 9:18 AM, Simon Urbanek
>>> <simon.urbanek at r-project.org> wrote:
>>>> 
>>>> On Sep 16, 2011, at 12:57 AM, Hofert Jan Marius wrote:
>>>> 
>>>>> 
>>>>> On 2011-09-16, at 02:30 , Simon Urbanek wrote:
>>>>> 
>>>>>> 
>>>>>> On Sep 14, 2011, at 3:02 PM, Hofert Jan Marius wrote:
>>>>>> 
>>>>>>> Dear Simon,
>>>>>>> 
>>>>>>> thanks for your help, that clarified a lot.
>>>>>>> As I could read it is not "recommended" to make the adjustment.
>>>>>>> 
>>>>>>> Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient.
>>>>>>> 
>>>>>> 
>>>>>> Actually, it's the other way around - switching versions is trivial from the command line simply using "ln" (see the FAQ) so obviously you can do that in the script. RSwitch is just a wrapper that allows you to do that from the GUI. But note that the issue is that the Current link can only be correct for one version, so you can use one or the other but not both at the same time. Setting R home to the versioned version allows you to use both at the same time but some issues remain (compiling packages etc.).
>>>>>> 
>>>>>> Cheers,
>>>>>> Simon
>>>>> 
>>>>> Dear Simon,
>>>>> 
>>>>> thanks for helping.
>>>>> 
>>>>> I realized that setting it with ln is just a convenience [not having to click anything], but of course that does not imply that one can suddenly open two versions. I even tried and one runs into problems quite quickly.
>>>>> That's a pity, I have to admit that this is the first time that the Mac is not behaving nicely and inferior to Linux. I don't have Linux installed but as far as I know from Linux users, they can have multiple versions installed *and* work with them in parallel. As one can read on http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f : "The advanatage of this setup is that it is possible to install multiple R versions in parallel and they all will be fully functional ...". Obviously it is not an advantage in comparison to Linux systems. I was wondering about that, that's why I asked.
>>>>> 
>>>> 
>>>> I think you may have missed my first e-mail -- if you change the R home path to the *versioned* path then your home is no longer dependent on the Current link and thus you get the same setup as on Linux.
>>>> 
>>>> The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...
>>>> 
>>>> Cheers,
>>>> Simon
>>>> 
>>>> 
>>>>> 
>>>>> 
>>>>>> 
>>>>>> 
>>>>>>> 
>>>>>>> On 2011-09-14, at 20:39 , Simon Urbanek wrote:
>>>>>>> 
>>>>>>>> 
>>>>>>>> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
>>>>>>>> 
>>>>>>>>> Dear expeRts,
>>>>>>>>> 
>>>>>>>>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame.
>>>>>>>>> 
>>>>>>>>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started.
>>>>>>>>> 
>>>>>>>>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway...
>>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
>>>>>>>> 
>>>>>>>> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
>>>>>>>> 
>>>>>>>> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
>>>>>>>> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
>>>>>>>> 
>>>>>>>> Cheers,
>>>>>>>> Simon
>>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>>> 
>>> 
>>> --
>>> Steve Lianoglou
>>> Graduate Student: Computational Systems Biology
>>>  | Memorial Sloan-Kettering Cancer Center
>>>  | Weill Medical College of Cornell University
>>> Contact Info: http://cbio.mskcc.org/~lianos/contact
>>> 
>>> 
>> 
>> 
> 
> 
> 
> -- 
> Steve Lianoglou
> Graduate Student: Computational Systems Biology
>  | Memorial Sloan-Kettering Cancer Center
>  | Weill Medical College of Cornell University
> Contact Info: http://cbio.mskcc.org/~lianos/contact
> 
> 


From simon.urbanek at r-project.org  Fri Sep 16 18:06:11 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 16 Sep 2011 12:06:11 -0400
Subject: [R-SIG-Mac] How to start two different versions of R on a Mac
	(in emacs)?
In-Reply-To: <E73BDC28-FF30-4FDF-900A-460C3A267EB6@r-project.org>
References: <101E9E97-2F3B-4229-B2D3-5201EBF0CC92@math.ethz.ch>
	<643DA967-81AF-4911-956D-610FAEA032AB@r-project.org>
	<FE7644BC-23CA-438B-B84F-3D3040704C1C@math.ethz.ch>
	<3E732189-FEB8-46D4-934B-25934404922F@r-project.org>
	<AA52C4AE-0696-44A8-972F-4B2C6860603E@math.ethz.ch>
	<33CE9DBB-5362-4377-A373-A4762526FEA8@r-project.org>
	<CAHA9McMwvoGXKFZNsyX3S-=tzL0ZQySOU59-C4eYkO6-7YE74g@mail.gmail.com>
	<747D5DDE-8F7A-4ECD-A2A5-3D2F673F34A6@r-project.org>
	<CAHA9McPvGMZjxriZrB7JaA0CJR0C0uQG2OqHsDGu52k1-tH8Hw@mail.gmail.com>
	<E73BDC28-FF30-4FDF-900A-460C3A267EB6@r-project.org>
Message-ID: <8AD794CD-7546-43A1-A10D-B6FFBF1D5B0C@r-project.org>


On Sep 16, 2011, at 11:56 AM, Simon Urbanek wrote:

> 
> On Sep 16, 2011, at 11:46 AM, Steve Lianoglou wrote:
> 
>> Hi Simon,
>> 
>> Thanks for the quick reply ... very informative.
>> 
>> I don't exactly follow on what the compiling issues are, though.
>> 
>> You said:
>> 
>>> The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...
>> 
>> What do you mean by "running it in place" and "this only makes sense
>> if you want to build packages in two different R versions at exactly
>> the same time"?
>> 
>> Let's say I'm running R-devel in this "Kasper-fashion" and fire an
>> `install.packages('whatever', by='source')`, are you saying that the
>> package will be linking against the wrong libR?
> 
> Yes. The linking is done via "-framework R" so that does respect the Current symlink. As I said in the previous e-mail one of the options is to go back to
> LIBR = -L$(R_HOME)/lib$(R_ARCH) -lR -dylib_file libRblas.dylib:$(R_HOME)/lib$(R_ARCH)/libRblas.dylib
> which is what R uses until you install it into a framework.
> 
> 
>> Or is there a problem
>> if I'm running R-2.13 in one window, and R-devel in another, then I
>> try to make them install/compile packages at the same time? I mean,
>> that sounds like a weird scenario, and I'm not sure why that would
>> matter anyway, but I'm trying to make sense of the "exactly the same
>> time" thing here, too.
>> 
> 
> I meant that compiling is the only time when it matters, so you can set the symlink properly only for one compilation but not for two in parallel. So let's say if you set the symlink in the R script then it's safe in any scenario except for the case where you run R-2.13 CMD INSTALL followed by R-devel CMD INSTALL before R-2.13 CMD INSTALL finishes.
> 

Ok, just to be really explicit to avoid further confusion: 
If you want to use CRAN R builds in parallel then the safest approach is to modify the R script by:
a) changing unversioned framework paths to versioned ones
*and*
b) set the Current symlink to the version that is being started

This is as safe as you can get with pre-built binaries, but it has the limitation I mentioned (no concurrent package compilation with different versions in parallel). All this will *only* work on the command line and you will still have issues with things that have been built on R with with non-versioned paths (i.e., CRAN) which include hard-coded paths (but this should be very rare).

For anything more safe you'll have to build R yourself (either without a framework or without installing it into a framework).

Cheers,
Simon



> 
>> 
>> 
>> 
>> On Fri, Sep 16, 2011 at 11:15 AM, Simon Urbanek
>> <simon.urbanek at r-project.org> wrote:
>>> Just a quick heads-up on that guide -- installing nightlies from tar balls has some consequences you may want to be aware of. Most notably the installer scripts in the .pkg make sure R architectures match your system, but if you install the tar balls (which are designed for OS X 10.5) that will not be the case. This is an issue for OS X 10.6 and 10.7 since they no longer support ppc. If you really want to install the tar balls (there is no real reason to do so) you should either know what you are doing or run the postflight script (As root) *before* you mess with the Current link:
>>> https://svn.r-project.org/R-dev-web/trunk/QA/Simon/R-build/packaging/leopard/scripts/postflight
>>> 
>>> Note that the guide and the script you posted essentially does what I posted here except it fails to mention the package compiling issues ;).
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> On Sep 16, 2011, at 11:03 AM, Steve Lianoglou wrote:
>>> 
>>>> Hi,
>>>> 
>>>> There is also a (somehow recent) post on the bioc-devel mailing list
>>>> from Kasper that can help here, too:
>>>> 
>>>> https://stat.ethz.ch/pipermail/bioc-devel/2011-July/002684.html
>>>> 
>>>> He assumes you've downloaded R-2.13 and and R-devel binaries from
>>>> r.research.att.net and install via the `tar fvxz R*.tar.gz -C /`
>>>> 
>>>> He then has a shell script (which you need to fix the line wrapping on
>>>> -- I provide fixed version as a gist below) that does some minor
>>>> surgery to symbolic links and changes some relative paths to absolute
>>>> ones in the various ".../Resources/bin/R" files.
>>>> 
>>>> At the end of the day, you will have R-2.13.1 installed and invokable
>>>> from the cmd line as "R" (or R-2.13), and the devel branch is
>>>> invokable as R-devel.
>>>> 
>>>> I just used that for the R-devel bits (ie, I commented out things that
>>>> have to do w/ R-2.13) and successfully compiled a mixed R/C package
>>>> from source in the R-devel that I just downloaded and "relinked". I
>>>> made a gist of the script from Kasper's post and commented out the
>>>> lines that were messing around with R-2.13 for now:
>>>> 
>>>> https://gist.github.com/1222291
>>>> 
>>>> Perhaps you will find it helpful and hopefully not too dangerous, but
>>>> use at your own risk, of course. Please be sure to read Kasper's
>>>> original post and don't just run the script I linked to in the gist
>>>> without understanding what it does. If there are any unintended
>>>> side-effects, you'll have to reinstall your R versions from scratch,
>>>> or fix your installed `.../Resources/bin/R` scripts by hand.
>>>> 
>>>> HTH,
>>>> -steve
>>>> 
>>>> 
>>>> On Fri, Sep 16, 2011 at 9:18 AM, Simon Urbanek
>>>> <simon.urbanek at r-project.org> wrote:
>>>>> 
>>>>> On Sep 16, 2011, at 12:57 AM, Hofert Jan Marius wrote:
>>>>> 
>>>>>> 
>>>>>> On 2011-09-16, at 02:30 , Simon Urbanek wrote:
>>>>>> 
>>>>>>> 
>>>>>>> On Sep 14, 2011, at 3:02 PM, Hofert Jan Marius wrote:
>>>>>>> 
>>>>>>>> Dear Simon,
>>>>>>>> 
>>>>>>>> thanks for your help, that clarified a lot.
>>>>>>>> As I could read it is not "recommended" to make the adjustment.
>>>>>>>> 
>>>>>>>> Can RSwitch be called from the command line? If so, one could at least create a command (or alias) "R-2.13" that first calls RSwitch and sets the version accordingly and then starts R. That would be quite convenient.
>>>>>>>> 
>>>>>>> 
>>>>>>> Actually, it's the other way around - switching versions is trivial from the command line simply using "ln" (see the FAQ) so obviously you can do that in the script. RSwitch is just a wrapper that allows you to do that from the GUI. But note that the issue is that the Current link can only be correct for one version, so you can use one or the other but not both at the same time. Setting R home to the versioned version allows you to use both at the same time but some issues remain (compiling packages etc.).
>>>>>>> 
>>>>>>> Cheers,
>>>>>>> Simon
>>>>>> 
>>>>>> Dear Simon,
>>>>>> 
>>>>>> thanks for helping.
>>>>>> 
>>>>>> I realized that setting it with ln is just a convenience [not having to click anything], but of course that does not imply that one can suddenly open two versions. I even tried and one runs into problems quite quickly.
>>>>>> That's a pity, I have to admit that this is the first time that the Mac is not behaving nicely and inferior to Linux. I don't have Linux installed but as far as I know from Linux users, they can have multiple versions installed *and* work with them in parallel. As one can read on http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f : "The advanatage of this setup is that it is possible to install multiple R versions in parallel and they all will be fully functional ...". Obviously it is not an advantage in comparison to Linux systems. I was wondering about that, that's why I asked.
>>>>>> 
>>>>> 
>>>>> I think you may have missed my first e-mail -- if you change the R home path to the *versioned* path then your home is no longer dependent on the Current link and thus you get the same setup as on Linux.
>>>>> 
>>>>> The only remaining difference is compilation of packages which uses the R framework and thus that does rely on the Current link. You have several choices there - you can build R without a framework (that's how it's built on Linux and some people prefer to use it that way on the Mac as well), or you can run it in place or you can change the flags of your installed R to link libR directly. Obviously, this only makes sense if you want to build packages in two different R versions at exactly the same time ...
>>>>> 
>>>>> Cheers,
>>>>> Simon
>>>>> 
>>>>> 
>>>>>> 
>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>>> 
>>>>>>>> On 2011-09-14, at 20:39 , Simon Urbanek wrote:
>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> On Sep 14, 2011, at 2:25 PM, Hofert Jan Marius wrote:
>>>>>>>>> 
>>>>>>>>>> Dear expeRts,
>>>>>>>>>> 
>>>>>>>>>> I recently switched to emacs (aquamacs) and I am amazed by its capabilities. I used to use RSwitch to switch between R-2.13 and R-2.14. Since I am now able to start R in different frames of emacs, I was wondering if I can simply start R-2.13 in one frame and R-2.14 in another frame.
>>>>>>>>>> 
>>>>>>>>>> On experimenting, the first thing I realized was that in a terminal, I only have "R", "R32" and "R64" available; so no "R-2.13.32bit", "R-2.14.32bit", "R-2.13.64bit", "R-2.14.64bit" [or similar]. If I start "R", it starts the version that RSwitch has selected. But that means I can't start different R versions at the same time... However, I know that it works on Linux, so is there a Mac solution, too? It would be nice if one is not required to use RSwitch but can simply choose in emacs which R version should be started.
>>>>>>>>>> 
>>>>>>>>>> The first step seems to be to locate the different installed R versions, which should probably be in /Library/Frameworks/R.framework/Versions/2.13/Resources and /Library/Frameworks/R.framework/Versions/2.14/Resources. But if RSwitch points to R-2.14 and I start the R version in the former directory (so R-2.13), it starts R-2.14 anyway...
>>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> For the command-line R (and only the command line R!) you can simply create a copy of the R launcher script and replace all occurrences of the R home path with the full *versioned* home path, so for example for 2.13 you would use something like
>>>>>>>>> 
>>>>>>>>> sed 's:/Library/Frameworks/R.framework/Resources:/Library/Frameworks/R.framework/Versions/2.13/Resources:g' R > R-2.13
>>>>>>>>> 
>>>>>>>>> This will make your R script independent of the current framework version. However, note that some things will break - for example you won't be able to compile packages properly. For details see the FAQ:
>>>>>>>>> http://r.research.att.com/bin/macosx/RMacOSX-FAQ.html#Why-is-R_002ehome_0028_0029-not-versioned_003f
>>>>>>>>> 
>>>>>>>>> Cheers,
>>>>>>>>> Simon
>>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>>> 
>>>> 
>>>> --
>>>> Steve Lianoglou
>>>> Graduate Student: Computational Systems Biology
>>>> | Memorial Sloan-Kettering Cancer Center
>>>> | Weill Medical College of Cornell University
>>>> Contact Info: http://cbio.mskcc.org/~lianos/contact
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
>> 
>> -- 
>> Steve Lianoglou
>> Graduate Student: Computational Systems Biology
>> | Memorial Sloan-Kettering Cancer Center
>> | Weill Medical College of Cornell University
>> Contact Info: http://cbio.mskcc.org/~lianos/contact
>> 
>> 
> 


From ww2243 at columbia.edu  Fri Sep 16 19:40:46 2011
From: ww2243 at columbia.edu (Wei Wang)
Date: Fri, 16 Sep 2011 13:40:46 -0400
Subject: [R-SIG-Mac] cannot load rjags package on Mac
Message-ID: <CANRUmi8gj2ehivzxuCpeU+5nG8Q0uxT001HWZ30eXZU0r1henQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110916/9a31af5a/attachment.pl>

From simon.urbanek at r-project.org  Fri Sep 16 20:41:04 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 16 Sep 2011 14:41:04 -0400
Subject: [R-SIG-Mac] cannot load rjags package on Mac
In-Reply-To: <CANRUmi8gj2ehivzxuCpeU+5nG8Q0uxT001HWZ30eXZU0r1henQ@mail.gmail.com>
References: <CANRUmi8gj2ehivzxuCpeU+5nG8Q0uxT001HWZ30eXZU0r1henQ@mail.gmail.com>
Message-ID: <ED922383-F76E-4A23-9661-6AF2463F0340@r-project.org>

Wei,

the CRAN binary uses JAGS 2.x so you'll have to download and install JAGS 2.2.0.

Currently, JAGS 3.x is unsupported because we there is no official JAGS 3.x binary for ppc anymore which is a requirement for rjags to be built on CRAN.

I will have a look at JAGS later today to see if there is hope to have JAGS shipped with the package.

Cheers,
Simon


On Sep 16, 2011, at 1:40 PM, Wei Wang wrote:

> Dear list,
> 
> I ran into problem trying to load rjags on my Macbook Air running OS X
> 10.7.1.
> 
> I installed JAGS 3.1.0 through binary and it seems OK.
> 
>  $ jags
>  Welcome to JAGS 3.1.0 on Fri Sep 16 13:27:03 2011
>  JAGS is free software and comes with ABSOLUTELY NO WARRANTY
>  Loading module: basemod: ok
>  Loading module: bugs: ok
> 
> Then I installed rjags through CRAN,
> 
>> install.packages("rjags")
>  --- Please select a CRAN mirror for use in this session ---
>  Loading Tcl/Tk interface ... done
>  trying URL '
> http://lib.stat.cmu.edu/R/CRAN/bin/macosx/leopard/contrib/2.13/rjags_2.2.0-4.tgz
> '
>  Content type 'application/x-gzip' length 328998 bytes (321 Kb)
>  opened URL
>  ==================================================
>  downloaded 321 Kb
> 
> 
>  The downloaded packages are in
> 
> /var/folders/bx/_rsnmqdx03x20z3clnt5d8xh0000gn/T//RtmpWZ4yIZ/downloaded_packages
> 
> But when I tried to load it, I got the following errors.
> 
>> library(rjags)
>  Error : .onLoad failed in loadNamespace() for 'rjags', details:
>    call: dyn.load(file, DLLpath = DLLpath, ...)
>    error: unable to load shared object
> 
> '/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rjags/libs/x86_64/rjags.so':
> 
> dlopen(/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rjags/libs/x86_64/rjags.so,
> 10): Library not loaded: /usr/local/lib/libjags.2.dylib
>  Referenced from:
> 
> /Library/Frameworks/R.framework/Versions/2.13/Resources/library/rjags/libs/x86_64/rjags.so
>    Reason: image not found
>  Error: package/namespace load failed for 'rjags'
> 
> My sessionInfo is as follows
> 
>> sessionInfo()
>  R version 2.13.1 Patched (2011-09-01 r56880)
>  Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
>  locale:
>  [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
> 
>  attached base packages:
>  [1] stats     graphics  grDevices utils     datasets  methods   base
> 
>  other attached packages:
>  [1] R2WinBUGS_2.1-18 coda_0.14-4      lattice_0.19-33
> 
>  loaded via a namespace (and not attached):
>  [1] grid_2.13.1  tcltk_2.13.1 tools_2.13.1
> 
> Thank you in advance for your help.
> 
> Best,
> Wei
> 
> -- 
> Wei Wang
> Doctoral Student
> Department of Statistics, Columbia University
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 


From ww2243 at columbia.edu  Fri Sep 16 22:08:21 2011
From: ww2243 at columbia.edu (Wei Wang)
Date: Fri, 16 Sep 2011 16:08:21 -0400
Subject: [R-SIG-Mac] cannot load rjags package on Mac
In-Reply-To: <ED922383-F76E-4A23-9661-6AF2463F0340@r-project.org>
References: <CANRUmi8gj2ehivzxuCpeU+5nG8Q0uxT001HWZ30eXZU0r1henQ@mail.gmail.com>
	<ED922383-F76E-4A23-9661-6AF2463F0340@r-project.org>
Message-ID: <CANRUmi8kGvGbeZRmPdGUtrhFU1TwTDTmGTJ9Vkz___quKh1+Ww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110916/d783bb03/attachment.pl>

From bby2103 at columbia.edu  Sun Sep 18 22:20:18 2011
From: bby2103 at columbia.edu (bby2103 at columbia.edu)
Date: Sun, 18 Sep 2011 16:20:18 -0400
Subject: [R-SIG-Mac] graph bugs using R on MAC
Message-ID: <20110918162018.kdwu84bqsgcowo0k@cubmail.cc.columbia.edu>

This is has been bugging me for a long time. Nobody around me seems to  
have this problem.
I hope someone on the forum could help me.

When I generate a R graph and want to bring the image into Word. I  
cannot copy and paste
it like many of my classmates can do. The "Select" in Edit menu have  
all options grayed
out. So what I ended up doing is to save it as pdf file and bring it  
into Word. But if I
use "Identify" in the Plot statement, there will be values labels on  
the graph when you
click on the observation. For some reason, these labels don't show up  
in the pdf file.

So the last resort I have is prinscreen, which always have irrelevant  
things showing.

I've tried updating R/OS and all softwares on my MAC, but nothing  
seems to do anything. I
have OX 10.6.8. Does this problem sound familiar to anyone?

Thanks in advance!

Bonnie Yuan


From kent.manley at att.net  Sun Sep 18 23:32:49 2011
From: kent.manley at att.net (Kent Manley)
Date: Sun, 18 Sep 2011 17:32:49 -0400
Subject: [R-SIG-Mac] graph bugs using R on MAC
In-Reply-To: <20110918162018.kdwu84bqsgcowo0k@cubmail.cc.columbia.edu>
References: <20110918162018.kdwu84bqsgcowo0k@cubmail.cc.columbia.edu>
Message-ID: <AA9CC4B1-DB6C-47AD-AE52-3F7EF9B31628@att.net>

When doing this, I have turned on a graphics device prior to the plotting commands, for instance,

jpeg(file="somename.jpg")
plot....
dev.off()

I have also begun using TeXShop and Sweave implementations, which create good-looking PDFs instead of Word documents, but that is another story.

Good luck!

Kent

On Sep 18, 2011, at 4:20 PM, bby2103 at columbia.edu wrote:

> This is has been bugging me for a long time. Nobody around me seems to have this problem.
> I hope someone on the forum could help me.
> 
> When I generate a R graph and want to bring the image into Word. I cannot copy and paste
> it like many of my classmates can do. The "Select" in Edit menu have all options grayed
> out. So what I ended up doing is to save it as pdf file and bring it into Word. But if I
> use "Identify" in the Plot statement, there will be values labels on the graph when you
> click on the observation. For some reason, these labels don't show up in the pdf file.
> 
> So the last resort I have is prinscreen, which always have irrelevant things showing.
> 
> I've tried updating R/OS and all softwares on my MAC, but nothing seems to do anything. I
> have OX 10.6.8. Does this problem sound familiar to anyone?
> 
> Thanks in advance!
> 
> Bonnie Yuan
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From bby2103 at columbia.edu  Sun Sep 18 23:43:09 2011
From: bby2103 at columbia.edu (bby2103 at columbia.edu)
Date: Sun, 18 Sep 2011 17:43:09 -0400
Subject: [R-SIG-Mac] graph bugs using R on MAC
In-Reply-To: <AA9CC4B1-DB6C-47AD-AE52-3F7EF9B31628@att.net>
References: <20110918162018.kdwu84bqsgcowo0k@cubmail.cc.columbia.edu>
	<AA9CC4B1-DB6C-47AD-AE52-3F7EF9B31628@att.net>
Message-ID: <20110918174309.dlcd5h7v4844ow0g@cubmail.cc.columbia.edu>

Hi Kent,

Thanks for the tip.

This works, up to the same point where I can save pdf into Word using  
the menu.
In other words, as long as I don't use the Identify function, I can  
get the graph I need. But it can't be in an interactive mode which the  
Identify function needs to be in. So whatever labels I need to show on  
the graph will not be there.

Bonnie


Quoting Kent Manley <kent.manley at att.net>:

> When doing this, I have turned on a graphics device prior to the   
> plotting commands, for instance,
>
> jpeg(file="somename.jpg")
> plot....
> dev.off()
>
> I have also begun using TeXShop and Sweave implementations, which   
> create good-looking PDFs instead of Word documents, but that is   
> another story.
>
> Good luck!
>
> Kent
>
> On Sep 18, 2011, at 4:20 PM, bby2103 at columbia.edu wrote:
>
>> This is has been bugging me for a long time. Nobody around me seems  
>>  to have this problem.
>> I hope someone on the forum could help me.
>>
>> When I generate a R graph and want to bring the image into Word. I   
>> cannot copy and paste
>> it like many of my classmates can do. The "Select" in Edit menu   
>> have all options grayed
>> out. So what I ended up doing is to save it as pdf file and bring   
>> it into Word. But if I
>> use "Identify" in the Plot statement, there will be values labels   
>> on the graph when you
>> click on the observation. For some reason, these labels don't show   
>> up in the pdf file.
>>
>> So the last resort I have is prinscreen, which always have   
>> irrelevant things showing.
>>
>> I've tried updating R/OS and all softwares on my MAC, but nothing   
>> seems to do anything. I
>> have OX 10.6.8. Does this problem sound familiar to anyone?
>>
>> Thanks in advance!
>>
>> Bonnie Yuan
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
>


From w.northcott at unsw.edu.au  Mon Sep 19 01:53:43 2011
From: w.northcott at unsw.edu.au (William Northcott)
Date: Mon, 19 Sep 2011 09:53:43 +1000
Subject: [R-SIG-Mac] cannot load rjags package on Mac
In-Reply-To: <mailman.1845.1316194860.8921.r-sig-mac@r-project.org>
References: <mailman.1845.1316194860.8921.r-sig-mac@r-project.org>
Message-ID: <36CABD7F-F645-415A-9A62-623DBAB58ED6@unsw.edu.au>

Hi Wei

I only got the 3.1 binary built last week and I don't think Simon has had time to get the CRAN version of rjags updated.

The current CRAN rjags binary and sources are not compatible with JAGS 3.1.

As far as I know the old version 2.2 binary of JAGS should run on Lion, or you could build rjags from sources but not the CRAN ones.

Bill Northcott

On 17/09/2011, at 3:41 AM, r-sig-mac-request at r-project.org wrote:

> From: Wei Wang <ww2243 at columbia.edu>
> Subject: [R-SIG-Mac] cannot load rjags package on Mac
> .......

> '/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rjags/libs/x86_64/rjags.so':
> 
> dlopen(/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rjags/libs/x86_64/rjags.so,
> 10): Library not loaded: /usr/local/lib/libjags.2.dylib
>  Referenced from:
> 
> /Library/Frameworks/R.framework/Versions/2.13/Resources/library/rjags/libs/x86_64/rjags.so
>    Reason: image not found
>  Error: package/namespace load failed for 'rjags'


From w.northcott at unsw.edu.au  Mon Sep 19 02:05:19 2011
From: w.northcott at unsw.edu.au (William Northcott)
Date: Mon, 19 Sep 2011 10:05:19 +1000
Subject: [R-SIG-Mac] cannot load rjags package on Mac
In-Reply-To: <mailman.17.1316253606.26677.r-sig-mac@r-project.org>
References: <mailman.17.1316253606.26677.r-sig-mac@r-project.org>
Message-ID: <5CE2F743-3795-4B89-9BA3-5CABBD757B5B@unsw.edu.au>

I really did not want to support Leopard, which is now well out of date, with the default JAGS binary.

Since Snow Leopard and Lion won't run on ppc. I dropped the ppc build.  Hopefully that might happen in R before too long.<g>  The most recent PPC hardware must be coming up for its 5th birthday.

If you really need an OS X 10.5 4-way fat build, I will knock one up.

Bill

On 17/09/2011, at 8:00 PM, simon.urbanek at r-project.org wrote:
> the CRAN binary uses JAGS 2.x so you'll have to download and install JAGS 2.2.0.
> 
> Currently, JAGS 3.x is unsupported because we there is no official JAGS 3.x binary for ppc anymore which is a requirement for rjags to be built on CRAN.
> 
> I will have a look at JAGS later today to see if there is hope to have JAGS shipped with the package.


From lists at remoteinformation.com.au  Mon Sep 19 02:53:07 2011
From: lists at remoteinformation.com.au (Ben Madin)
Date: Mon, 19 Sep 2011 08:53:07 +0800
Subject: [R-SIG-Mac] graph bugs using R on MAC
In-Reply-To: <20110918174309.dlcd5h7v4844ow0g@cubmail.cc.columbia.edu>
References: <20110918162018.kdwu84bqsgcowo0k@cubmail.cc.columbia.edu>
	<AA9CC4B1-DB6C-47AD-AE52-3F7EF9B31628@att.net>
	<20110918174309.dlcd5h7v4844ow0g@cubmail.cc.columbia.edu>
Message-ID: <D7011943-CAAA-43F5-8C4A-CBC80A09AF4D@remoteinformation.com.au>

Bonnie,

You will need to identify the points where you want your labels on the normal screen first, then code them into the script before producing the output... it is probably good practice in terms of being able to reproduce graphs consistently.

I also find the pdf(file='somename.pdf') useful as the images are vectors, so can be resized easily and cleanly.

cheers

Ben




On 19/09/2011, at 5:43 AM, bby2103 at columbia.edu wrote:

> Hi Kent,
> 
> Thanks for the tip.
> 
> This works, up to the same point where I can save pdf into Word using the menu.
> In other words, as long as I don't use the Identify function, I can get the graph I need. But it can't be in an interactive mode which the Identify function needs to be in. So whatever labels I need to show on the graph will not be there.
> 
> Bonnie
> 
> 
> Quoting Kent Manley <kent.manley at att.net>:
> 
>> When doing this, I have turned on a graphics device prior to the  plotting commands, for instance,
>> 
>> jpeg(file="somename.jpg")
>> plot....
>> dev.off()
>> 
>> I have also begun using TeXShop and Sweave implementations, which  create good-looking PDFs instead of Word documents, but that is  another story.
>> 
>> Good luck!
>> 
>> Kent
>> 
>> On Sep 18, 2011, at 4:20 PM, bby2103 at columbia.edu wrote:
>> 
>>> This is has been bugging me for a long time. Nobody around me seems  to have this problem.
>>> I hope someone on the forum could help me.
>>> 
>>> When I generate a R graph and want to bring the image into Word. I  cannot copy and paste
>>> it like many of my classmates can do. The "Select" in Edit menu  have all options grayed
>>> out. So what I ended up doing is to save it as pdf file and bring  it into Word. But if I
>>> use "Identify" in the Plot statement, there will be values labels  on the graph when you
>>> click on the observation. For some reason, these labels don't show  up in the pdf file.
>>> 
>>> So the last resort I have is prinscreen, which always have  irrelevant things showing.
>>> 
>>> I've tried updating R/OS and all softwares on my MAC, but nothing  seems to do anything. I
>>> have OX 10.6.8. Does this problem sound familiar to anyone?
>>> 
>>> Thanks in advance!
>>> 
>>> Bonnie Yuan
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From michael.denslow at gmail.com  Mon Sep 19 19:08:57 2011
From: michael.denslow at gmail.com (Michael Denslow)
Date: Mon, 19 Sep 2011 13:08:57 -0400
Subject: [R-SIG-Mac] bg= arg. in quartz.save()
Message-ID: <CAEewEphh43yRvmVzbAYyRkYCVePLDOB0sT6Qhq5-CbO992B-GA@mail.gmail.com>

Dear List,

I am having a problem with a .tiff file that I have made using
quartz.save(). I am not convinced that this is an R problem but I
thought I might take a chance and ask the list.
Here is an example:
plot(1)
quartz.save("MyGreatTiff.tiff","tiff", bg = 'white', dpi=300)

I need to upload the file for a publication (.tiff and 300 dpi are
required) and when the file gets uploaded and converted to html and
pdf it shows the background as black. The FAQ at Manuscript Central,
the website that handles the upload, says that it is a problem with
the software used to make the .tiff. However, most software that I use
to view it shows it as white (actually Preview.app displays it as
grey). I have also tried bg = 'transparent' and get the same results
from the website.

Any ideas? Am I doing something wrong here?
Thanks in advance,
Michael


-- 
Michael Denslow

I.W. Carpenter Jr. Herbarium [BOON]
Department of Biology
Appalachian State University
Boone, North Carolina U.S.A.
-- AND --
Communications Manager
Southeast Regional Network of Expertise and Collections
sernec.org

36.214177, -81.681480 +/- 3103 meters


From erich.neuwirth at univie.ac.at  Mon Sep 19 19:04:09 2011
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Mon, 19 Sep 2011 19:04:09 +0200
Subject: [R-SIG-Mac] three dot problem
Message-ID: <4F8E3CF1-B287-4E77-8F9E-CF55A5B88164@univie.ac.at>

When I define functions using the tree dot tool,
R64.app has problems

> innerfun <- function(...) print(...)
> 
> ??

When I sate the one line definition above into R64.app,
R prints what you see above, including the three dots, and I need to press return to be able to continue 
to work. 
Do other users have the same experience?


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 163 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110919/5f819935/attachment.bin>

From simon.urbanek at r-project.org  Mon Sep 19 23:53:33 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 19 Sep 2011 17:53:33 -0400
Subject: [R-SIG-Mac] three dot problem
In-Reply-To: <4F8E3CF1-B287-4E77-8F9E-CF55A5B88164@univie.ac.at>
References: <4F8E3CF1-B287-4E77-8F9E-CF55A5B88164@univie.ac.at>
Message-ID: <5754F61F-B9FB-4E5A-87FD-A3BD169543BF@r-project.org>


On Sep 19, 2011, at 1:04 PM, Erich Neuwirth wrote:

> When I define functions using the tree dot tool,
> R64.app has problems
> 
>> innerfun <- function(...) print(...)
>> 
>> ??
> 
> When I sate the one line definition above into R64.app,
> R prints what you see above, including the three dots, and I need to press return to be able to continue 
> to work. 
> Do other users have the same experience?
> 

It is your Lion system setting - go to System Preferences  -> Language & Text -> Text and disable "Symbol and Text Substitiution" for ... (or all together, really ;))

Cheers,
Simon


From braunm at mit.edu  Tue Sep 20 02:23:15 2011
From: braunm at mit.edu (Michael Braun)
Date: Mon, 19 Sep 2011 20:23:15 -0400
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran code
Message-ID: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>

I am creating an R package that includes some C++ code that I have written, and some "legacy" Fortran code from another source.  I am able to build and run this package on my own machine (OSX Lion 10.7.1) with no problem.  However, I would like some colleagues to test the package before I post it on CRAN.  Unfortunately, what I have created does not appear to be portable, and I would appreciate some guidance.

Ideally, I would not expect my users to have the Apple developer tools, or an R-friendly version of gfortran installed.  So I thought I would compile a binary myself, and link to the gfortran libraries statically.  My Makevars file has exactly two lines.  One is a PKG_CPPFLAGS definition, to point to headers.  The other is PKG_LIBS=/usr/local/lib/libgfortran.a  .  I then build the binary using R CMD INSTALL --binary.  The compiler then does it's thing, and when it gets to the link step, I see:

g++-4.2 -arch x86_64 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -o mypkg.so mypkg.o  /usr/local/lib/libgfortran.a -lgfortran -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation

Note that there is a -lgfortran that I did not include myself.

Of course, I want to follow the R manuals as closely as possible.  In Section 1.7.2 of "Writing R Extensions," there is advice to be aware of any dependencies.  So I then ran R CMD otool -L mypkg.so , and got the following:

mypkg.so:
	mypkg.so (compatibility version 0.0.0, current version 0.0.0)
	/usr/local/lib/libgfortran.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libR.dylib (compatibility version 2.13.0, current version 2.13.1)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.0.0)
	/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.0.0)

So it looks like there are still some dependencies that, at least according to Section 1.7.2, I don't want.  But I do not know how to get rid of them.  And when my colleague loads the file, of course there is an error, because R cannot find the correct libgfortran dynamic library.

I also tried something else.  I know that R comes packaged with libgfortran.2.dylib in the $R_HOME/lib directory.  So what I thought I would do is add -L$(R_HOME)/lib to PKG_LIBS *instead* of doing the static linking thing.  The idea is that all users would have that version of gfortran in the same place.  But when I do that, the linker still seems to want to link to the libgfortran.3.dylib that is in /usr/local/lib, and not the libgfortran.2.dylib that is in $R_HOME/lib.  This happens even if I change the dynamic link of libgfortran.dylib to .2 instead of .3.  When my colleague tries to load mypkg.so, he gets an error that includes:  Library not loaded: /usr/local/lib/libgfortran.3.dylib

So really, all I want to do is create a binary someone can just load, without needing to preinstall lots of other stuff.  It doesn't matter to me if it involves static linking to runtime libraries, or telling the loader where to find the dynamic libraries.

Thanks in advance for your help with this.  It is much appreciated.



Michael Braun 
MIT Sloan School of Management
braunm at mit.edu
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1844 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110919/4a9ad797/attachment.bin>

From simon.urbanek at r-project.org  Tue Sep 20 04:41:08 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 19 Sep 2011 22:41:08 -0400
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
	code
In-Reply-To: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
References: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
Message-ID: <CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>

Michael,

the problem has nothing to do with your package (you should not be touching any flags at all), but rather the Fortran you use.

If you have both static and dynamic fortran runtime, the dynamic one has always precedence. So there are essentially two possible ways forward:

a) use static Fortran runtime. It simply means moving /usr/local/lib/libgfortran.dylib aside.

b) if you use dynamic Fortran runtime, take the one from R. Since you have R 2.13.x it is shipped in /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/ so you can use it along the lines of
cd /usr/local/lib
sudo ln -sfn /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libgfortran.2.dylib .
sudo ln -sfn libgfortran.2.dylib libgfortran.dylib
Alternatively you can simply use install_name_tool to point your package to R's runtime.

Note also that the more recent Fortran for Lion does not live in /usr/local so if you used that instead, you'd probably not have any issues. 

Cheers,
Simon



On Sep 19, 2011, at 8:23 PM, Michael Braun wrote:

> I am creating an R package that includes some C++ code that I have written, and some "legacy" Fortran code from another source.  I am able to build and run this package on my own machine (OSX Lion 10.7.1) with no problem.  However, I would like some colleagues to test the package before I post it on CRAN.  Unfortunately, what I have created does not appear to be portable, and I would appreciate some guidance.
> 
> Ideally, I would not expect my users to have the Apple developer tools, or an R-friendly version of gfortran installed.  So I thought I would compile a binary myself, and link to the gfortran libraries statically.  My Makevars file has exactly two lines.  One is a PKG_CPPFLAGS definition, to point to headers.  The other is PKG_LIBS=/usr/local/lib/libgfortran.a  .  I then build the binary using R CMD INSTALL --binary.  The compiler then does it's thing, and when it gets to the link step, I see:
> 
> g++-4.2 -arch x86_64 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -o mypkg.so mypkg.o  /usr/local/lib/libgfortran.a -lgfortran -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
> 
> Note that there is a -lgfortran that I did not include myself.
> 
> Of course, I want to follow the R manuals as closely as possible.  In Section 1.7.2 of "Writing R Extensions," there is advice to be aware of any dependencies.  So I then ran R CMD otool -L mypkg.so , and got the following:
> 
> mypkg.so:
> 	mypkg.so (compatibility version 0.0.0, current version 0.0.0)
> 	/usr/local/lib/libgfortran.2.dylib (compatibility version 3.0.0, current version 3.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libR.dylib (compatibility version 2.13.0, current version 2.13.1)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.0.0)
> 	/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.0.0)
> 
> So it looks like there are still some dependencies that, at least according to Section 1.7.2, I don't want.  But I do not know how to get rid of them.  And when my colleague loads the file, of course there is an error, because R cannot find the correct libgfortran dynamic library.
> 
> I also tried something else.  I know that R comes packaged with libgfortran.2.dylib in the $R_HOME/lib directory.  So what I thought I would do is add -L$(R_HOME)/lib to PKG_LIBS *instead* of doing the static linking thing.  The idea is that all users would have that version of gfortran in the same place.  But when I do that, the linker still seems to want to link to the libgfortran.3.dylib that is in /usr/local/lib, and not the libgfortran.2.dylib that is in $R_HOME/lib.  This happens even if I change the dynamic link of libgfortran.dylib to .2 instead of .3.  When my colleague tries to load mypkg.so, he gets an error that includes:  Library not loaded: /usr/local/lib/libgfortran.3.dylib
> 
> So really, all I want to do is create a binary someone can just load, without needing to preinstall lots of other stuff.  It doesn't matter to me if it involves static linking to runtime libraries, or telling the loader where to find the dynamic libraries.
> 
> Thanks in advance for your help with this.  It is much appreciated.
> 
> 
> 
> Michael Braun 
> MIT Sloan School of Management
> braunm at mit.edu
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From mailinglist.honeypot at gmail.com  Tue Sep 20 04:41:57 2011
From: mailinglist.honeypot at gmail.com (Steve Lianoglou)
Date: Mon, 19 Sep 2011 22:41:57 -0400
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
	code
In-Reply-To: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
References: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
Message-ID: <CAHA9McO7sa0C76xKqxmhUHVqLgaTb4EQeHfwgZPsLQY+KrAywg@mail.gmail.com>

Hi,

On Mon, Sep 19, 2011 at 8:23 PM, Michael Braun <braunm at mit.edu> wrote:
> I am creating an R package that includes some C++ code that I have written, and some "legacy" Fortran code from another source. ?I am able to build and run this package on my own machine (OSX Lion 10.7.1) with no problem. ?However, I would like some colleagues to test the package before I post it on CRAN. ?Unfortunately, what I have created does not appear to be portable, and I would appreciate some guidance.
>
> Ideally, I would not expect my users to have the Apple developer tools, or an R-friendly version of gfortran installed. ?So I thought I would compile a binary myself, and link to the gfortran libraries statically.

Are your colleagues also running OS X?

I think you should be able to make your life a lot easier by simply
running an `R CMD BUILD yourpkg` which (if I'm not mistaken) will
compile your package into a form your end-users/colleagues will be
able to just `R CMD INSTALL` without requiring any compilers -- just
like they can download binaries of R packages from CRAN w/o needing to
compile it themselves.

Does that help?

-steve


 ?My Makevars file has exactly two lines. ?One is a PKG_CPPFLAGS
definition, to point to headers. ?The other is
PKG_LIBS=/usr/local/lib/libgfortran.a ?. ?I then build the binary
using R CMD INSTALL --binary. ?The compiler then does it's thing, and
when it gets to the link step, I see:
>
> g++-4.2 -arch x86_64 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -o mypkg.so mypkg.o ?/usr/local/lib/libgfortran.a -lgfortran -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>
> Note that there is a -lgfortran that I did not include myself.
>
> Of course, I want to follow the R manuals as closely as possible. ?In Section 1.7.2 of "Writing R Extensions," there is advice to be aware of any dependencies. ?So I then ran R CMD otool -L mypkg.so , and got the following:
>
> mypkg.so:
> ? ? ? ?mypkg.so (compatibility version 0.0.0, current version 0.0.0)
> ? ? ? ?/usr/local/lib/libgfortran.2.dylib (compatibility version 3.0.0, current version 3.0.0)
> ? ? ? ?/Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libR.dylib (compatibility version 2.13.0, current version 2.13.1)
> ? ? ? ?/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.0.0)
> ? ? ? ?/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
> ? ? ? ?/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.0.0)
>
> So it looks like there are still some dependencies that, at least according to Section 1.7.2, I don't want. ?But I do not know how to get rid of them. ?And when my colleague loads the file, of course there is an error, because R cannot find the correct libgfortran dynamic library.
>
> I also tried something else. ?I know that R comes packaged with libgfortran.2.dylib in the $R_HOME/lib directory. ?So what I thought I would do is add -L$(R_HOME)/lib to PKG_LIBS *instead* of doing the static linking thing. ?The idea is that all users would have that version of gfortran in the same place. ?But when I do that, the linker still seems to want to link to the libgfortran.3.dylib that is in /usr/local/lib, and not the libgfortran.2.dylib that is in $R_HOME/lib. ?This happens even if I change the dynamic link of libgfortran.dylib to .2 instead of .3. ?When my colleague tries to load mypkg.so, he gets an error that includes: ?Library not loaded: /usr/local/lib/libgfortran.3.dylib
>
> So really, all I want to do is create a binary someone can just load, without needing to preinstall lots of other stuff. ?It doesn't matter to me if it involves static linking to runtime libraries, or telling the loader where to find the dynamic libraries.
>
> Thanks in advance for your help with this. ?It is much appreciated.
>
>
>
> Michael Braun
> MIT Sloan School of Management
> braunm at mit.edu
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>



-- 
Steve Lianoglou
Graduate Student: Computational Systems Biology
?| Memorial Sloan-Kettering Cancer Center
?| Weill Medical College of Cornell University
Contact Info: http://cbio.mskcc.org/~lianos/contact


From braunm at mit.edu  Tue Sep 20 05:06:01 2011
From: braunm at mit.edu (Michael Braun)
Date: Mon, 19 Sep 2011 23:06:01 -0400
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
 code
In-Reply-To: <CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
References: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
	<CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
Message-ID: <A31E51AD-A00D-4464-B647-A70E60DB8B93@mit.edu>

Simon:

Thanks for your response.  Either I was not clear in my question, or I am misunderstanding your answer.

The problem is not the version or location of the gfortran runtimes on my machine.  I can compile and run the package myself with a simple R CMD INSTALL -- build.  But what happens if the person I'm giving the package to has neither the developer tools nor a non-R gfortran?  Is there anything I can do to compile a binary for them to make this a simple install on the other end? It would seem like static linking would be the way to go.  But I don't know what you mean by "moving ... aside". I would prefer to not start renaming and delete libraries on my system for just one project.

Is there any other way I could tell R to build with the R gfortran for just this one project? And is there anything else I need to do to be sure that R will find gfortran on the end-user's system?

I know these must seem like ridiculously basic questions, so I appreciate your patience with them.

Michael





Sent from my iPad

On Sep 19, 2011, at 10:41 PM, "Simon Urbanek" <simon.urbanek at r-project.org> wrote:

> Michael,
> 
> the problem has nothing to do with your package (you should not be touching any flags at all), but rather the Fortran you use.
> 
> If you have both static and dynamic fortran runtime, the dynamic one has always precedence. So there are essentially two possible ways forward:
> 
> a) use static Fortran runtime. It simply means moving /usr/local/lib/libgfortran.dylib aside.
> 
> b) if you use dynamic Fortran runtime, take the one from R. Since you have R 2.13.x it is shipped in /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/ so you can use it along the lines of
> cd /usr/local/lib
> sudo ln -sfn /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libgfortran.2.dylib .
> sudo ln -sfn libgfortran.2.dylib libgfortran.dylib
> Alternatively you can simply use install_name_tool to point your package to R's runtime.
> 
> Note also that the more recent Fortran for Lion does not live in /usr/local so if you used that instead, you'd probably not have any issues. 
> 
> Cheers,
> Simon
> 
> 
> 
> On Sep 19, 2011, at 8:23 PM, Michael Braun wrote:
> 
>> I am creating an R package that includes some C++ code that I have written, and some "legacy" Fortran code from another source.  I am able to build and run this package on my own machine (OSX Lion 10.7.1) with no problem.  However, I would like some colleagues to test the package before I post it on CRAN.  Unfortunately, what I have created does not appear to be portable, and I would appreciate some guidance.
>> 
>> Ideally, I would not expect my users to have the Apple developer tools, or an R-friendly version of gfortran installed.  So I thought I would compile a binary myself, and link to the gfortran libraries statically.  My Makevars file has exactly two lines.  One is a PKG_CPPFLAGS definition, to point to headers.  The other is PKG_LIBS=/usr/local/lib/libgfortran.a  .  I then build the binary using R CMD INSTALL --binary.  The compiler then does it's thing, and when it gets to the link step, I see:
>> 
>> g++-4.2 -arch x86_64 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -o mypkg.so mypkg.o  /usr/local/lib/libgfortran.a -lgfortran -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>> 
>> Note that there is a -lgfortran that I did not include myself.
>> 
>> Of course, I want to follow the R manuals as closely as possible.  In Section 1.7.2 of "Writing R Extensions," there is advice to be aware of any dependencies.  So I then ran R CMD otool -L mypkg.so , and got the following:
>> 
>> mypkg.so:
>>    mypkg.so (compatibility version 0.0.0, current version 0.0.0)
>>    /usr/local/lib/libgfortran.2.dylib (compatibility version 3.0.0, current version 3.0.0)
>>    /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libR.dylib (compatibility version 2.13.0, current version 2.13.1)
>>    /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.0.0)
>>    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
>>    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.0.0)
>> 
>> So it looks like there are still some dependencies that, at least according to Section 1.7.2, I don't want.  But I do not know how to get rid of them.  And when my colleague loads the file, of course there is an error, because R cannot find the correct libgfortran dynamic library.
>> 
>> I also tried something else.  I know that R comes packaged with libgfortran.2.dylib in the $R_HOME/lib directory.  So what I thought I would do is add -L$(R_HOME)/lib to PKG_LIBS *instead* of doing the static linking thing.  The idea is that all users would have that version of gfortran in the same place.  But when I do that, the linker still seems to want to link to the libgfortran.3.dylib that is in /usr/local/lib, and not the libgfortran.2.dylib that is in $R_HOME/lib.  This happens even if I change the dynamic link of libgfortran.dylib to .2 instead of .3.  When my colleague tries to load mypkg.so, he gets an error that includes:  Library not loaded: /usr/local/lib/libgfortran.3.dylib
>> 
>> So really, all I want to do is create a binary someone can just load, without needing to preinstall lots of other stuff.  It doesn't matter to me if it involves static linking to runtime libraries, or telling the loader where to find the dynamic libraries.
>> 
>> Thanks in advance for your help with this.  It is much appreciated.
>> 
>> 
>> 
>> Michael Braun 
>> MIT Sloan School of Management
>> braunm at mit.edu
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From armstrong.usu at gmail.com  Wed Sep 14 15:33:11 2011
From: armstrong.usu at gmail.com (Andrea Armstrong)
Date: Wed, 14 Sep 2011 07:33:11 -0600
Subject: [R-SIG-Mac] lme4 package with Mac Lion
Message-ID: <2B8D5D5D-F3E5-4B10-9E07-FFEFBDDC487F@gmail.com>

I am unable to run the lme4 package on my MacBook Pro with the Lion operating system.  Is there a workaround for this package? Is one under development? 

Thanks, Andrea

From Mike.Lawrence at dal.ca  Tue Sep 20 12:28:23 2011
From: Mike.Lawrence at dal.ca (Mike Lawrence)
Date: Tue, 20 Sep 2011 07:28:23 -0300
Subject: [R-SIG-Mac] lme4 package with Mac Lion
In-Reply-To: <2B8D5D5D-F3E5-4B10-9E07-FFEFBDDC487F@gmail.com>
References: <2B8D5D5D-F3E5-4B10-9E07-FFEFBDDC487F@gmail.com>
Message-ID: <CAB+QPJAg-5R47G+6=rS3_TfOefm462X1awhtNU4BW_nBzMYbJA@mail.gmail.com>

lme4 works fine for me on my air running Lion. What version of R are
you running? The Matrix package was recently updated, which warned
that users should subsequently update lme4, so maybe try
install.packages("Matrix") then install.packages("lme4").

Here's my sessionInfo()

R version 2.13.1 (2011-07-08)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/C/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] lme4_0.999375-40   Matrix_0.999375-50 lattice_0.19-30

loaded via a namespace (and not attached):
[1] grid_2.13.1   nlme_3.1-101  stats4_2.13.1




On Wed, Sep 14, 2011 at 10:33 AM, Andrea Armstrong
<armstrong.usu at gmail.com> wrote:
> I am unable to run the lme4 package on my MacBook Pro with the Lion operating system. ?Is there a workaround for this package? Is one under development?
>
> Thanks, Andrea
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From simon.urbanek at r-project.org  Tue Sep 20 15:34:53 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 20 Sep 2011 09:34:53 -0400
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
	code
In-Reply-To: <A31E51AD-A00D-4464-B647-A70E60DB8B93@mit.edu>
References: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
	<CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
	<A31E51AD-A00D-4464-B647-A70E60DB8B93@mit.edu>
Message-ID: <1F5293DF-89CE-40AE-92F1-ACF138F4C555@r-project.org>

Michael,

On Sep 19, 2011, at 11:06 PM, Michael Braun wrote:

> Simon:
> 
> Thanks for your response.  Either I was not clear in my question, or I am misunderstanding your answer.
> 

I think the latter - I was addressing how to create package binaries that you can distribute.


> The problem is not the version or location of the gfortran runtimes on my machine.  I can compile and run the package myself with a simple R CMD INSTALL -- build.  But what happens if the person I'm giving the package to has neither the developer tools nor a non-R gfortran?  Is there anything I can do to compile a binary for them to make this a simple install on the other end?

Follow the instructions I sent. There are four options you can choose from [b) was really listing two options and the fourth is using Lion Fortran].


> It would seem like static linking would be the way to go.  But I don't know what you mean by "moving ... aside". I would prefer to not start renaming and delete libraries on my system for just one project.
> 
> Is there any other way I could tell R to build with the R gfortran for just this one project? And is there anything else I need to do to be sure that R will find gfortran on the end-user's system?
> 

The problem is really your Fortran as I was explaining. If you insist on using it as-is then you have to tell your users to install it as well - it's that simple. That is the "feature" of your current setup. As I was saying it is not a setup I would choose myself and I would not recommend it if you want to produce binaries for others, but it's your choice.

Cheers,
Simon



> I know these must seem like ridiculously basic questions, so I appreciate your patience with them.
> 
> Michael
> 
> 
> 
> 
> 
> Sent from my iPad
> 
> On Sep 19, 2011, at 10:41 PM, "Simon Urbanek" <simon.urbanek at r-project.org> wrote:
> 
>> Michael,
>> 
>> the problem has nothing to do with your package (you should not be touching any flags at all), but rather the Fortran you use.
>> 
>> If you have both static and dynamic fortran runtime, the dynamic one has always precedence. So there are essentially two possible ways forward:
>> 
>> a) use static Fortran runtime. It simply means moving /usr/local/lib/libgfortran.dylib aside.
>> 
>> b) if you use dynamic Fortran runtime, take the one from R. Since you have R 2.13.x it is shipped in /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/ so you can use it along the lines of
>> cd /usr/local/lib
>> sudo ln -sfn /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libgfortran.2.dylib .
>> sudo ln -sfn libgfortran.2.dylib libgfortran.dylib
>> Alternatively you can simply use install_name_tool to point your package to R's runtime.
>> 
>> Note also that the more recent Fortran for Lion does not live in /usr/local so if you used that instead, you'd probably not have any issues. 
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>> On Sep 19, 2011, at 8:23 PM, Michael Braun wrote:
>> 
>>> I am creating an R package that includes some C++ code that I have written, and some "legacy" Fortran code from another source.  I am able to build and run this package on my own machine (OSX Lion 10.7.1) with no problem.  However, I would like some colleagues to test the package before I post it on CRAN.  Unfortunately, what I have created does not appear to be portable, and I would appreciate some guidance.
>>> 
>>> Ideally, I would not expect my users to have the Apple developer tools, or an R-friendly version of gfortran installed.  So I thought I would compile a binary myself, and link to the gfortran libraries statically.  My Makevars file has exactly two lines.  One is a PKG_CPPFLAGS definition, to point to headers.  The other is PKG_LIBS=/usr/local/lib/libgfortran.a  .  I then build the binary using R CMD INSTALL --binary.  The compiler then does it's thing, and when it gets to the link step, I see:
>>> 
>>> g++-4.2 -arch x86_64 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -o mypkg.so mypkg.o  /usr/local/lib/libgfortran.a -lgfortran -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>>> 
>>> Note that there is a -lgfortran that I did not include myself.
>>> 
>>> Of course, I want to follow the R manuals as closely as possible.  In Section 1.7.2 of "Writing R Extensions," there is advice to be aware of any dependencies.  So I then ran R CMD otool -L mypkg.so , and got the following:
>>> 
>>> mypkg.so:
>>>   mypkg.so (compatibility version 0.0.0, current version 0.0.0)
>>>   /usr/local/lib/libgfortran.2.dylib (compatibility version 3.0.0, current version 3.0.0)
>>>   /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libR.dylib (compatibility version 2.13.0, current version 2.13.1)
>>>   /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.0.0)
>>>   /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
>>>   /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.0.0)
>>> 
>>> So it looks like there are still some dependencies that, at least according to Section 1.7.2, I don't want.  But I do not know how to get rid of them.  And when my colleague loads the file, of course there is an error, because R cannot find the correct libgfortran dynamic library.
>>> 
>>> I also tried something else.  I know that R comes packaged with libgfortran.2.dylib in the $R_HOME/lib directory.  So what I thought I would do is add -L$(R_HOME)/lib to PKG_LIBS *instead* of doing the static linking thing.  The idea is that all users would have that version of gfortran in the same place.  But when I do that, the linker still seems to want to link to the libgfortran.3.dylib that is in /usr/local/lib, and not the libgfortran.2.dylib that is in $R_HOME/lib.  This happens even if I change the dynamic link of libgfortran.dylib to .2 instead of .3.  When my colleague tries to load mypkg.so, he gets an error that includes:  Library not loaded: /usr/local/lib/libgfortran.3.dylib
>>> 
>>> So really, all I want to do is create a binary someone can just load, without needing to preinstall lots of other stuff.  It doesn't matter to me if it involves static linking to runtime libraries, or telling the loader where to find the dynamic libraries.
>>> 
>>> Thanks in advance for your help with this.  It is much appreciated.
>>> 
>>> 
>>> 
>>> Michael Braun 
>>> MIT Sloan School of Management
>>> braunm at mit.edu
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 


From charles.sharpsteen at gmail.com  Tue Sep 20 20:09:35 2011
From: charles.sharpsteen at gmail.com (Charlie Sharpsteen)
Date: Tue, 20 Sep 2011 11:09:35 -0700 (PDT)
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
 code
In-Reply-To: <CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
References: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
	<CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
Message-ID: <2422203.1116.1316542175183.JavaMail.geo-discussion-forums@prhv38>

On Monday, September 19, 2011 7:41:08 PM UTC-7, Simon Urbanek wrote:
>
> Michael,
>
> the problem has nothing to do with your package (you should not be touching 
> any flags at all), but rather the Fortran you use.
>
> If you have both static and dynamic fortran runtime, the dynamic one has 
> always precedence. So there are essentially two possible ways forward:
>
> a) use static Fortran runtime. It simply means moving 
> /usr/local/lib/libgfortran.dylib aside.
>
> b) if you use dynamic Fortran runtime, take the one from R. Since you have 
> R 2.13.x it is shipped in 
> /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/ so you can use 
> it along the lines of
> cd /usr/local/lib
> sudo ln -sfn 
> /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libgfortran.2.dylib 
> .
> sudo ln -sfn libgfortran.2.dylib libgfortran.dylib
> Alternatively you can simply use install_name_tool to point your package to 
> R's runtime.
>

Note that GFortran also has a `-static-libgfortran` flag that will force the 
compiler to select the static runtime library over the dynamic one. Using 
this flag should remove any need to move libraries around or muck about with 
`install_name_tool` (unless your package has other dynamic dependencies).

Hope that helps!

-Charlie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110920/abf0dff5/attachment.html>

From charles.sharpsteen at gmail.com  Tue Sep 20 20:09:35 2011
From: charles.sharpsteen at gmail.com (Charlie Sharpsteen)
Date: Tue, 20 Sep 2011 11:09:35 -0700
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
 code
In-Reply-To: <CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
References: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
	<CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
Message-ID: <2422203.1116.1316542175183.JavaMail.geo-discussion-forums@prhv38>

On Monday, September 19, 2011 7:41:08 PM UTC-7, Simon Urbanek wrote:
>
> Michael,
>
> the problem has nothing to do with your package (you should not be touching 
> any flags at all), but rather the Fortran you use.
>
> If you have both static and dynamic fortran runtime, the dynamic one has 
> always precedence. So there are essentially two possible ways forward:
>
> a) use static Fortran runtime. It simply means moving 
> /usr/local/lib/libgfortran.dylib aside.
>
> b) if you use dynamic Fortran runtime, take the one from R. Since you have 
> R 2.13.x it is shipped in 
> /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/ so you can use 
> it along the lines of
> cd /usr/local/lib
> sudo ln -sfn 
> /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libgfortran.2.dylib 
> .
> sudo ln -sfn libgfortran.2.dylib libgfortran.dylib
> Alternatively you can simply use install_name_tool to point your package to 
> R's runtime.
>

Note that GFortran also has a `-static-libgfortran` flag that will force the 
compiler to select the static runtime library over the dynamic one. Using 
this flag should remove any need to move libraries around or muck about with 
`install_name_tool` (unless your package has other dynamic dependencies).

Hope that helps!

-Charlie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110920/abf0dff5/attachment-0001.html>

From simon.urbanek at r-project.org  Tue Sep 20 20:24:40 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 20 Sep 2011 14:24:40 -0400
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
	code
In-Reply-To: <2422203.1116.1316542175183.JavaMail.geo-discussion-forums@prhv38>
References: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
	<CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
	<2422203.1116.1316542175183.JavaMail.geo-discussion-forums@prhv38>
Message-ID: <38C14DF5-C0DC-4BBD-A80E-38BCC7F661EC@r-project.org>


On Sep 20, 2011, at 2:09 PM, Charlie Sharpsteen wrote:

> On Monday, September 19, 2011 7:41:08 PM UTC-7, Simon Urbanek wrote:
> Michael,
> the problem has nothing to do with your package (you should not be touching any flags at all), but rather the Fortran you use.
> 
> If you have both static and dynamic fortran runtime, the dynamic one has always precedence. So there are essentially two possible ways forward:
> 
> a) use static Fortran runtime. It simply means moving /usr/local/lib/libgfortran.dylib aside.
> 
> b) if you use dynamic Fortran runtime, take the one from R. Since you have R 2.13.x it is shipped in /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/ so you can use it along the lines of
> cd /usr/local/lib
> sudo ln -sfn /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libgfortran.2.dylib .
> sudo ln -sfn libgfortran.2.dylib libgfortran.dylib
> Alternatively you can simply use install_name_tool to point your package to R's runtime.
> 
> 
> Note that GFortran also has a `-static-libgfortran` flag that will force the compiler to select the static runtime library over the dynamic one. Using this flag should remove any need to move libraries around or muck about with `install_name_tool` (unless your package has other dynamic dependencies).
> 
> Hope that helps!
> 

Not in this case, because this linking is not done by gfortran so the flag has no effect. The problem with linking mixed code is that you have to use g++ for linking so the Fortran runtime must be linked "by hand". R takes care of this but it means you get your fortran used at configure time which in Michael's case is dynamic linking.

Cheers,
Simon


From erich.neuwirth at univie.ac.at  Wed Sep 21 00:01:27 2011
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Wed, 21 Sep 2011 00:01:27 +0200
Subject: [R-SIG-Mac] Some bugs?
Message-ID: <06484FC1-6DE2-4137-A0FC-E6445F84E6E6@univie.ac.at>

I just installed R-2.13.2beta and I am getting errors I already had in earlier version.

quartz device: the bottom part of a chart us cut off. Resizing the window by a minimal about
solves the problem, but initially, the bottom part of graphics is cut off.

three dots.
When I paste a function definition using three dots into R64.app,
I get the following:
> myfun1 <- function(...) print(...)
> ??
Error: unexpected input in "?"
> 
> myfun1
function(...) print(...)
> 

The definition works, but the console output is very strange.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 163 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110921/7968cbe4/attachment.bin>

From simon.urbanek at r-project.org  Wed Sep 21 00:11:03 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 20 Sep 2011 18:11:03 -0400
Subject: [R-SIG-Mac] Some bugs?
In-Reply-To: <06484FC1-6DE2-4137-A0FC-E6445F84E6E6@univie.ac.at>
References: <06484FC1-6DE2-4137-A0FC-E6445F84E6E6@univie.ac.at>
Message-ID: <24C8D33B-C33C-4660-BCAB-74951056735A@r-project.org>

Erich,

On Sep 20, 2011, at 6:01 PM, Erich Neuwirth wrote:

> I just installed R-2.13.2beta and I am getting errors I already had in earlier version.
> 
> quartz device: the bottom part of a chart us cut off. Resizing the window by a minimal about
> solves the problem, but initially, the bottom part of graphics is cut off.
> 

This was reported (you may want to comment on the appropriate thread) but could not be reproduced ...
Can you, please, provide details (beyond sesisonInfo() in this case also your hardware and display details).


> three dots.
> When I paste a function definition using three dots into R64.app,
> I get the following:
>> myfun1 <- function(...) print(...)
>> ??
> Error: unexpected input in "?"
>> 
>> myfun1
> function(...) print(...)
>> 
> 
> The definition works, but the console output is very strange.
> 

You are probably on Lion (you didn't mention) and have text substitution enabled (you asked already once and I did reply to you ... ).

Cheers,
Simon


From erich.neuwirth at univie.ac.at  Wed Sep 21 00:41:27 2011
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Wed, 21 Sep 2011 00:41:27 +0200
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <4E625A15.5010107@gmail.com>
References: <4E625A15.5010107@gmail.com>
Message-ID: <35EDFE01-60E5-45D3-B541-4A594919BC8B@univie.ac.at>

quartz device bug:
bottom of graphics gets cut off.
When I do a 4x3 panel graph with 0 margin around the single graphs,
about half of the graphs in the last row get cut off,
not just the labels as Duncan mentioned.
The graphics is OK after resizing it with the mouse.

Here are my specifics:

R version 2.13.2 beta (2011-09-19 r57030)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
 [1] tcltk     grid      splines   stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] ENmisc_1.2-0         RColorBrewer_1.0-5   gWidgetstcltk_0.0-45 digest_0.5.0         tcltk2_1.1-5        
 [6] gWidgets_0.0-46      vcd_1.2-12           colorspace_1.1-0     MASS_7.3-14          Hmisc_3.8-3         
[11] survival_2.36-9     

loaded via a namespace (and not attached):
[1] cluster_1.14.0  lattice_0.19-33 tools_2.13.2   


MacBook Air second generation, OSX 10.7.1 Lion

Model Name:	MacBook Air
  Model Identifier:	MacBookAir3,2
  Processor Name:	Intel Core 2 Duo
  Processor Speed:	2.13 GHz
  Number of Processors:	1
  Total Number of Cores:	2
  L2 Cache:	6 MB
  Memory:	4 GB
  Bus Speed:	1.07 GHz
  Boot ROM Version:	MBA31.0061.B01
  SMC Version (system):	1.66f54
  Serial Number (system):	C02DQ0BYDDR4
  Hardware UUID:	9560C38B-9445-53E1-890C-49D94C34DB75

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110921/961a4b5d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 163 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110921/961a4b5d/attachment.bin>

From erich.neuwirth at univie.ac.at  Wed Sep 21 00:50:16 2011
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Wed, 21 Sep 2011 00:50:16 +0200
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <B4561504-47AE-4880-AE3D-EE33D54A5D89@remoteinformation.com.au>
References: <4E625A15.5010107@gmail.com>
	<B4561504-47AE-4880-AE3D-EE33D54A5D89@remoteinformation.com.au>
Message-ID: <2902CE20-CF09-4904-8944-E4FA4943E9B1@univie.ac.at>

OK, 
here is what really happens!
When the quartz window is higher that the screen,
the displayed windows does not extend below the screen, but it ends about a centimeter above the screen edge.
The graphics is drawn as if the unmutilated larger windows were available.
So the problem was I used
quartz(height=7) and that is too high.

quartz(height=6) 
solves the problem.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 163 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110921/0f5f353d/attachment.bin>

From kasperdanielhansen at gmail.com  Wed Sep 21 14:13:08 2011
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Wed, 21 Sep 2011 12:13:08 +0000
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <2902CE20-CF09-4904-8944-E4FA4943E9B1@univie.ac.at>
References: <4E625A15.5010107@gmail.com>
	<B4561504-47AE-4880-AE3D-EE33D54A5D89@remoteinformation.com.au>
	<2902CE20-CF09-4904-8944-E4FA4943E9B1@univie.ac.at>
Message-ID: <CAC2h7uvFt4s8xjCV-kCmVLRX02n+zfXYMBjnHYb-ByW2xSF-0Q@mail.gmail.com>

This is what I have been saying as well.

My guess is that your "a centimeter above the screen edge) is because
of the Dock.  I have my Dock set to hiding and I get the window going
all the way down to the bottom of the screen.

In an earlier post I stated that I have not seen this on my 15"
Macbook Pro, presumably because the screen is bigger (I see it on my
old 13" Macbook).  If I do
  quartz(width = 10, height = 10)
on my 15", I get the same issue: the plot window is not square
(presumably because 10" is to high) and the plot is being cut off (R
is plotting as if the window was 10x10 but since the window is only
Yx10 we only see Y (with Y somewhat less than 10).).  For this
situation, I don't see the x-axis at all.

Kasper

On Tue, Sep 20, 2011 at 10:50 PM, Erich Neuwirth
<erich.neuwirth at univie.ac.at> wrote:
> OK,
> here is what really happens!
> When the quartz window is higher that the screen,
> the displayed windows does not extend below the screen, but it ends about a centimeter above the screen edge.
> The graphics is drawn as if the unmutilated larger windows were available.
> So the problem was I used
> quartz(height=7) and that is too high.
>
> quartz(height=6)
> solves the problem.
>
>
>
> -----BEGIN PGP SIGNATURE-----
>
> iEYEARECAAYFAk55GKgACgkQ+NXNFnPEeU9U7ACfZyn7OH+tjySGUBLV7EU4aAHR
> P3AAnjCnox72LJ6z9K+oNiJPLP/yhA2N
> =G4JH
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From erich.neuwirth at univie.ac.at  Wed Sep 21 17:20:58 2011
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Wed, 21 Sep 2011 17:20:58 +0200
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <4E62AC31.3080400@gmail.com>
References: <4E625A15.5010107@gmail.com>
	<CAC2h7uuCiRqHHSN3cq2e9NvXPVE=GYHg51UiDcBzcKH0NZ-j7g@mail.gmail.com>
	<4E62AC31.3080400@gmail.com>
Message-ID: <B3C23E20-D931-4445-A368-C8925F4B6B0C@univie.ac.at>

I am on the road, so I cannot test this on my 27" screen at the moment.
The problem also happens without setting height and width for the quartz window.
The graphics is cut off at the bottom, it seems the engine doing the drawing gets incorrect information about the
window size.
If I set height=6 explicitly, I do not see the problem.



On Sep 4, 2011, at 12:37 AM, Duncan Murdoch wrote:

> On 11-09-03 5:03 PM, Kasper Daniel Hansen wrote:
>> On Sat, Sep 3, 2011 at 12:47 PM, Duncan Murdoch
>> <murdoch.duncan at gmail.com>  wrote:
>>> With a current R-patched (2.13.1 Patched (2011-09-02 r56906)), the following
>>> code generates plots missing the bottom labels:
>>> 
>>> par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
>>> for (i in 1:20) plot(1)
>>> 
>>> If I resize the plot at all, it's redrawn correctly, with all margins
>>> showing.  After resizing, repetitions in the old window are fine, but if I
>>> close it and try again, the error re-surfaces.
>>> 
>>> I'm on Mac OSX 10.6.8.
>> 
>> I have often seen the issue missing bottom labels on the default
>> window on my old 13in macbook.  I have always assumed (and I could be
>> wrong) that this had something to do with the actual dimensions of the
>> screen.  Recently I switched to a 15in macbook pro and I have never
>> had this problem (and I never observed it when I connected my 13in to
>> an external display).  I have various incoherent theories about why
>> this happens, but I will just state my observation: this only happens
>> on the native screen of a smaller laptop.
> 
> I'm using a Macbook Air with a 1440 x 900 screen.  If I resize the screen to 1024 x 768, it does look a little worse.
> 
> Duncan Murdoch
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 163 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110921/c876ce62/attachment.bin>

From braunm at mit.edu  Wed Sep 21 17:50:22 2011
From: braunm at mit.edu (Michael Braun)
Date: Wed, 21 Sep 2011 11:50:22 -0400
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
 code
In-Reply-To: <38C14DF5-C0DC-4BBD-A80E-38BCC7F661EC@r-project.org>
References: <523D387B-47AD-45F6-95DC-7F625A9B9DBD@mit.edu>
	<CD13EF4A-C144-4811-9E75-A53586A95DDF@r-project.org>
	<2422203.1116.1316542175183.JavaMail.geo-discussion-forums@prhv38>
	<38C14DF5-C0DC-4BBD-A80E-38BCC7F661EC@r-project.org>
Message-ID: <749FEA1C-B007-4318-8B2C-62570AEC8050@mit.edu>

Thanks for these helpful suggestions.  Changing the symbolic link for libgfortran worked.  Also, I did convert the Fortran code to C using f2c, and that worked as well.


On Sep 20, 2011, at 2:24 PM, Simon Urbanek wrote:

> 
> On Sep 20, 2011, at 2:09 PM, Charlie Sharpsteen wrote:
> 
>> On Monday, September 19, 2011 7:41:08 PM UTC-7, Simon Urbanek wrote:
>> Michael,
>> the problem has nothing to do with your package (you should not be touching any flags at all), but rather the Fortran you use.
>> 
>> If you have both static and dynamic fortran runtime, the dynamic one has always precedence. So there are essentially two possible ways forward:
>> 
>> a) use static Fortran runtime. It simply means moving /usr/local/lib/libgfortran.dylib aside.
>> 
>> b) if you use dynamic Fortran runtime, take the one from R. Since you have R 2.13.x it is shipped in /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/ so you can use it along the lines of
>> cd /usr/local/lib
>> sudo ln -sfn /Library/Frameworks/R.framework/Versions/2.13/Resources/lib/libgfortran.2.dylib .
>> sudo ln -sfn libgfortran.2.dylib libgfortran.dylib
>> Alternatively you can simply use install_name_tool to point your package to R's runtime.
>> 
>> 
>> Note that GFortran also has a `-static-libgfortran` flag that will force the compiler to select the static runtime library over the dynamic one. Using this flag should remove any need to move libraries around or muck about with `install_name_tool` (unless your package has other dynamic dependencies).
>> 
>> Hope that helps!
>> 
> 
> Not in this case, because this linking is not done by gfortran so the flag has no effect. The problem with linking mixed code is that you have to use g++ for linking so the Fortran runtime must be linked "by hand". R takes care of this but it means you get your fortran used at configure time which in Michael's case is dynamic linking.
> 
> Cheers,
> Simon
> 

Michael Braun 
MIT Sloan School of Management
braunm at mit.edu
-------------------------------------------------- 
View my research at
http://braunm.scripts.mit.edu/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110921/e5f0c083/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1844 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110921/e5f0c083/attachment.bin>

From kasperdanielhansen at gmail.com  Wed Sep 21 19:21:18 2011
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Wed, 21 Sep 2011 17:21:18 +0000
Subject: [R-SIG-Mac] Minor bug in Quartz sizing
In-Reply-To: <B3C23E20-D931-4445-A368-C8925F4B6B0C@univie.ac.at>
References: <4E625A15.5010107@gmail.com>
	<CAC2h7uuCiRqHHSN3cq2e9NvXPVE=GYHg51UiDcBzcKH0NZ-j7g@mail.gmail.com>
	<4E62AC31.3080400@gmail.com>
	<B3C23E20-D931-4445-A368-C8925F4B6B0C@univie.ac.at>
Message-ID: <CAC2h7usEpL6hHkpus9TtskcSj5HcYdBDQ=hPHm4802F6EXnH3w@mail.gmail.com>

I get the same behaviour on a 30" external Apple monitor using a
width/height of 25.

Kasper

On Wed, Sep 21, 2011 at 3:20 PM, Erich Neuwirth
<erich.neuwirth at univie.ac.at> wrote:
> I am on the road, so I cannot test this on my 27" screen at the moment.
> The problem also happens without setting height and width for the quartz window.
> The graphics is cut off at the bottom, it seems the engine doing the drawing gets incorrect information about the
> window size.
> If I set height=6 explicitly, I do not see the problem.
>
>
>
> On Sep 4, 2011, at 12:37 AM, Duncan Murdoch wrote:
>
>> On 11-09-03 5:03 PM, Kasper Daniel Hansen wrote:
>>> On Sat, Sep 3, 2011 at 12:47 PM, Duncan Murdoch
>>> <murdoch.duncan at gmail.com> ?wrote:
>>>> With a current R-patched (2.13.1 Patched (2011-09-02 r56906)), the following
>>>> code generates plots missing the bottom labels:
>>>>
>>>> par(mfrow = c(4, 5), mar = c(2.1, 2.1, 4.1, 1.1))
>>>> for (i in 1:20) plot(1)
>>>>
>>>> If I resize the plot at all, it's redrawn correctly, with all margins
>>>> showing. ?After resizing, repetitions in the old window are fine, but if I
>>>> close it and try again, the error re-surfaces.
>>>>
>>>> I'm on Mac OSX 10.6.8.
>>>
>>> I have often seen the issue missing bottom labels on the default
>>> window on my old 13in macbook. ?I have always assumed (and I could be
>>> wrong) that this had something to do with the actual dimensions of the
>>> screen. ?Recently I switched to a 15in macbook pro and I have never
>>> had this problem (and I never observed it when I connected my 13in to
>>> an external display). ?I have various incoherent theories about why
>>> this happens, but I will just state my observation: this only happens
>>> on the native screen of a smaller laptop.
>>
>> I'm using a Macbook Air with a 1440 x 900 screen. ?If I resize the screen to 1024 x 768, it does look a little worse.
>>
>> Duncan Murdoch
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
>
> -----BEGIN PGP SIGNATURE-----
>
> iEUEARECAAYFAk56ANoACgkQ+NXNFnPEeU+aCwCWPAO2IIZBM/OtYcEIKkA430Yy
> tACgtJpGnT1eSEGSW7xAFDYokkk22ps=
> =WAnc
> -----END PGP SIGNATURE-----
>
>


From jfox at mcmaster.ca  Fri Sep 23 00:54:28 2011
From: jfox at mcmaster.ca (John Fox)
Date: Thu, 22 Sep 2011 18:54:28 -0400
Subject: [R-SIG-Mac] package-install problem on Mac OS X lion
Message-ID: <web-372391040@cgpsrv2.cis.mcmaster.ca>

Dear all,

After upgrading my MacBook Pro to OS X lion, I find that I'm unable to check or install the Rcmdr package, getting the following error:

---------- snip ---------

John-Foxs-MacBook-Pro:workspace jfox$ R CMD INSTALL Rcmdr
* installing to library ?/Library/Frameworks/R.framework/Versions/2.13/Resources/library?
* installing *source* package ?Rcmdr? ...
** libs
*** arch - i386
sh: make: command not found
ERROR: compilation failed for package ?Rcmdr?
* removing ?/Library/Frameworks/R.framework/Versions/2.13/Resources/library/Rcmdr?
* restoring previous ?/Library/Frameworks/R.framework/Versions/2.13/Resources/library/Rcmdr?

---------- snip ---------

I am able to install from source other packages that don't have any compiled code, and so I hypothesize that this is due to some C code in the Rcmdr package. The Rcmdr installs fine on my Windows system and is built without error on R-Forge. As well, I was able to install the package from source before the OS upgrade.

I've installed the current development version of R 2.13.2, gfortran 4.2.3 (probably not relevant because there's no fortran code in the package), and Xcode for lion from the Apple app store.

Here are some more details of my system:

---------- snip ---------

> Sys.info()
                                                                                           sysname 
                                                                                          "Darwin" 
                                                                                           release 
                                                                                          "11.1.0" 
                                                                                           version 
"Darwin Kernel Version 11.1.0: Tue Jul 26 16:07:11 PDT 2011; root:xnu-1699.22.81~1/RELEASE_X86_64" 
                                                                                          nodename 
                                                                     "John-Foxs-MacBook-Pro.local" 
                                                                                           machine 
                                                                                          "x86_64" 
                                                                                             login 
                                                                                            "jfox" 
                                                                                              user 
                                                                                            "jfox" 

> R.Version()
$platform
[1] "x86_64-apple-darwin9.8.0"

$arch
[1] "x86_64"

$os
[1] "darwin9.8.0"

$system
[1] "x86_64, darwin9.8.0"

$status
[1] "beta"

$major
[1] "2"

$minor
[1] "13.2"

$year
[1] "2011"

$month
[1] "09"

$day
[1] "19"

$`svn rev`
[1] "57033"

$language
[1] "R"

$version.string
[1] "R version 2.13.2 beta (2011-09-19 r57033)" 

---------- snip ---------

Any help would be appreciated.

Thanks,
 John

------------------------------------------------
John Fox
Sen. William McMaster Prof. of Social Statistics
Department of Sociology
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From kasperdanielhansen at gmail.com  Fri Sep 23 01:07:15 2011
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Thu, 22 Sep 2011 19:07:15 -0400
Subject: [R-SIG-Mac] package-install problem on Mac OS X lion
In-Reply-To: <web-372391040@cgpsrv2.cis.mcmaster.ca>
References: <web-372391040@cgpsrv2.cis.mcmaster.ca>
Message-ID: <CAC2h7uuh-SAcHGi+vGbFODpFe3vYeBhXDKvFomvLG=TRPj9-Qw@mail.gmail.com>

Based on this output

On Thu, Sep 22, 2011 at 6:54 PM, John Fox <jfox at mcmaster.ca> wrote:
> sh: make: command not found

I would hypothesize you need to (re)install the developer tools.

Kasper


From kasperdanielhansen at gmail.com  Fri Sep 23 02:11:23 2011
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Thu, 22 Sep 2011 20:11:23 -0400
Subject: [R-SIG-Mac] use of optional 3rd party libs
Message-ID: <CAC2h7uswHHfn2om2ShA8OHEi0YD-XfnU=JT+q5k9YjPJrTz6Dg@mail.gmail.com>

This is just a FYI.

If I use the cairo lib from the optional 3rd party libs from
http://R.research.att.com/libs/ and I compile R-2.13 (patched) from
scratch I do not get cairo support out of the box because I do not
have pkg-config.  This is clearly stated in config.log but it was a
surprise to me.

pkg-config is easy to install on Snow Leopard, but the newest version
0.26 needs glib as well, whereas earlier versions (0.25 and earlier)
includes glib.  Everything seems to work with pkg-config version 0.25.

Kasper


From robjgoedman at me.com  Fri Sep 23 02:33:41 2011
From: robjgoedman at me.com (Rob Goedman)
Date: Thu, 22 Sep 2011 17:33:41 -0700
Subject: [R-SIG-Mac] package-install problem on Mac OS X lion
In-Reply-To: <web-372391040@cgpsrv2.cis.mcmaster.ca>
References: <web-372391040@cgpsrv2.cis.mcmaster.ca>
Message-ID: <093D0432-2844-493F-B938-F58295D47A98@me.com>

John,

If re-installing Xcode doesn't fix this, what version of Xcode are you using? On my system 'which make' shows below symbolic link and version info.

Initially I had all kind of issues after installing Lion, but since switching to a prerelease version of IOS + Xcode 4.2 development tools the issues disappeared. My Xcode version is below.

With that setup, both 1.7-1, which I use, and 1.7-0 versions of Rcmdr  compile and install fine, so I doubt there is anything wrong with the C code.

The other thing I noticed in the install output (below) is that the arch (i386) differs, but it looks like your install doesn't even get that far.

I do install from within R.app. From the command line, below output shows Rcmdr will compile, but can't find package 'car' (I probably need to specify the default library path).

I use R-devel. The Sys.info() and R.Version() look similar (also below).

Regards,
Rob

----------make------------------------------------------------------

Robs-Intel:Downloads rob$ which make
/usr/bin/make
Robs-Intel:Downloads rob$ ls -lia /usr/bin/make
98707895 lrwxr-xr-x  1 root  wheel  7 Aug 10 17:42 /usr/bin/make -> gnumake

Robs-Intel:Downloads rob$ make --v
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-apple-darwin11.0

----------Xcode---------------------------------------------------

Version 4.2 (4D151a)

-----------Installing source of Rcmdr in R.app--------------------------

trying URL 'http://R-Forge.R-project.org/src/contrib/Rcmdr_1.7-1.tar.gz'
Content type 'application/x-gzip' length 2963563 bytes (2.8 Mb)
opened URL
==================================================
downloaded 2.8 Mb

* installing *source* package ?Rcmdr? ...
** libs
*** arch - x86_64
gcc-4.2 -arch x86_64 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64  -I/usr/local/include    -fPIC  -g -O2 -c ismdi.c -o ismdi.o
gcc-4.2 -arch x86_64 -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/usr/local/lib -o Rcmdr.so ismdi.o -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
installing to /Users/rob/Library/R/2.14/library/Rcmdr/libs/x86_64
** R
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices ...
** testing if installed package can be loaded
The Commander GUI is launched only in interactive sessions

* DONE (Rcmdr)

------Installing from command line-------------------------------

Robs-Intel:Downloads rob$ R_ARCH=/x86_64 R CMD INSTALL Rcmdr_1.7-0.tar.gz 
* installing to library ?/Users/rob/Library/R/2.14/library?
* installing *source* package ?Rcmdr? ...
** libs
*** arch - x86_64
gcc-4.2 -arch x86_64 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64  -I/usr/local/include    -fPIC  -g -O2 -c ismdi.c -o ismdi.o
gcc-4.2 -arch x86_64 -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/usr/local/lib -o Rcmdr.so ismdi.o -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
installing to /Users/rob/Library/R/2.14/library/Rcmdr/libs/x86_64
** R
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices ...
** testing if installed package can be loaded
Error : package ?car? required by ?Rcmdr? could not be found
Error: loading failed
Execution halted
ERROR: loading failed
* removing ?/Users/rob/Library/R/2.14/library/Rcmdr?
* restoring previous ?/Users/rob/Library/R/2.14/library/Rcmdr?


------R.Version()------------------------------------------------

> R.Version()
$platform
[1] "x86_64-apple-darwin9.8.0"

$arch
[1] "x86_64"

$os
[1] "darwin9.8.0"

$system
[1] "x86_64, darwin9.8.0"

$status
[1] "Under development (unstable)"

$major
[1] "2"

$minor
[1] "14.0"

$year
[1] "2011"

$month
[1] "09"

$day
[1] "20"

$`svn rev`
[1] "57033"

$language
[1] "R"

$version.string
[1] "R Under development (unstable) (2011-09-20 r57033)"

> Sys.info()
                                                                                           sysname 
                                                                                          "Darwin" 
                                                                                           release 
                                                                                          "11.1.0" 
                                                                                           version 
"Darwin Kernel Version 11.1.0: Tue Jul 26 16:07:11 PDT 2011; root:xnu-1699.22.81~1/RELEASE_X86_64" 
                                                                                          nodename 
                                                                                "Robs-Intel.local" 
                                                                                           machine 
                                                                                          "x86_64" 
                                                                                             login 
                                                                                             "rob" 
                                                                                              user 
                                                                                             "rob" 
                                                                                    effective_user 
                                                                                             "rob" 


On Sep 22, 2011, at 3:54 PM, John Fox wrote:

> Dear all,
> 
> After upgrading my MacBook Pro to OS X lion, I find that I'm unable to check or install the Rcmdr package, getting the following error:
> 
> ---------- snip ---------
> 
> John-Foxs-MacBook-Pro:workspace jfox$ R CMD INSTALL Rcmdr
> * installing to library ?/Library/Frameworks/R.framework/Versions/2.13/Resources/library?
> * installing *source* package ?Rcmdr? ...
> ** libs
> *** arch - i386
> sh: make: command not found
> ERROR: compilation failed for package ?Rcmdr?
> * removing ?/Library/Frameworks/R.framework/Versions/2.13/Resources/library/Rcmdr?
> * restoring previous ?/Library/Frameworks/R.framework/Versions/2.13/Resources/library/Rcmdr?
> 
> ---------- snip ---------
> 
> I am able to install from source other packages that don't have any compiled code, and so I hypothesize that this is due to some C code in the Rcmdr package. The Rcmdr installs fine on my Windows system and is built without error on R-Forge. As well, I was able to install the package from source before the OS upgrade.
> 
> I've installed the current development version of R 2.13.2, gfortran 4.2.3 (probably not relevant because there's no fortran code in the package), and Xcode for lion from the Apple app store.
> 
> Here are some more details of my system:
> 
> ---------- snip ---------
> 
>> Sys.info()
>                                                                                           sysname 
>                                                                                          "Darwin" 
>                                                                                           release 
>                                                                                          "11.1.0" 
>                                                                                           version 
> "Darwin Kernel Version 11.1.0: Tue Jul 26 16:07:11 PDT 2011; root:xnu-1699.22.81~1/RELEASE_X86_64" 
>                                                                                          nodename 
>                                                                     "John-Foxs-MacBook-Pro.local" 
>                                                                                           machine 
>                                                                                          "x86_64" 
>                                                                                             login 
>                                                                                            "jfox" 
>                                                                                              user 
>                                                                                            "jfox" 
> 
>> R.Version()
> $platform
> [1] "x86_64-apple-darwin9.8.0"
> 
> $arch
> [1] "x86_64"
> 
> $os
> [1] "darwin9.8.0"
> 
> $system
> [1] "x86_64, darwin9.8.0"
> 
> $status
> [1] "beta"
> 
> $major
> [1] "2"
> 
> $minor
> [1] "13.2"
> 
> $year
> [1] "2011"
> 
> $month
> [1] "09"
> 
> $day
> [1] "19"
> 
> $`svn rev`
> [1] "57033"
> 
> $language
> [1] "R"
> 
> $version.string
> [1] "R version 2.13.2 beta (2011-09-19 r57033)" 
> 
> ---------- snip ---------
> 
> Any help would be appreciated.
> 
> Thanks,
> John
> 
> ------------------------------------------------
> John Fox
> Sen. William McMaster Prof. of Social Statistics
> Department of Sociology
> McMaster University
> Hamilton, Ontario, Canada
> http://socserv.mcmaster.ca/jfox/
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From simon.urbanek at r-project.org  Fri Sep 23 02:36:21 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 22 Sep 2011 20:36:21 -0400
Subject: [R-SIG-Mac] use of optional 3rd party libs
In-Reply-To: <CAC2h7uswHHfn2om2ShA8OHEi0YD-XfnU=JT+q5k9YjPJrTz6Dg@mail.gmail.com>
References: <CAC2h7uswHHfn2om2ShA8OHEi0YD-XfnU=JT+q5k9YjPJrTz6Dg@mail.gmail.com>
Message-ID: <6C96D579-499A-47CC-9789-AF5BF7883FAE@r-project.org>

Kasper,

On Sep 22, 2011, at 8:11 PM, Kasper Daniel Hansen wrote:

> This is just a FYI.
> 
> If I use the cairo lib from the optional 3rd party libs from
> http://R.research.att.com/libs/ and I compile R-2.13 (patched) from
> scratch I do not get cairo support out of the box because I do not
> have pkg-config.  This is clearly stated in config.log but it was a
> surprise to me.
> 
> pkg-config is easy to install on Snow Leopard, but the newest version
> 0.26 needs glib as well, whereas earlier versions (0.25 and earlier)
> includes glib.  Everything seems to work with pkg-config version 0.25.
> 

thanks, that is a good observation. Some 3rd party libs require pkg-config and in fact some of them (including cairo) actually need tweaked .pc files to support static linking properly plus some stubs for system libraries. Ill see if I can package the CRAN setup into an easy bundle tomorrow which that I can put in the libs as well.

Thanks,
Simon


From jfox at mcmaster.ca  Fri Sep 23 03:32:50 2011
From: jfox at mcmaster.ca (John Fox)
Date: Thu, 22 Sep 2011 21:32:50 -0400
Subject: [R-SIG-Mac] package-install problem on Mac OS X lion
In-Reply-To: <CAC2h7uuh-SAcHGi+vGbFODpFe3vYeBhXDKvFomvLG=TRPj9-Qw@mail.gmail.com>
References: <web-372391040@cgpsrv2.cis.mcmaster.ca>
	<CAC2h7uuh-SAcHGi+vGbFODpFe3vYeBhXDKvFomvLG=TRPj9-Qw@mail.gmail.com>
Message-ID: <007001cc7990$b54e97a0$1febc6e0$@mcmaster.ca>

Dear Kasper,

Thanks -- that gave me the hint I needed. Although the Mac app store said
that Xcode was "installed," and I checked that previously since I thought it
might be the problem, it turned out that the installer had only been
downloaded. Completing the installation solved the problem.

Thanks again,
 John

> -----Original Message-----
> From: Kasper Daniel Hansen [mailto:kasperdanielhansen at gmail.com]
> Sent: September-22-11 7:07 PM
> To: John Fox
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] package-install problem on Mac OS X lion
> 
> Based on this output
> 
> On Thu, Sep 22, 2011 at 6:54 PM, John Fox <jfox at mcmaster.ca> wrote:
> > sh: make: command not found
> 
> I would hypothesize you need to (re)install the developer tools.
> 
> Kasper


From nalimilan at club.fr  Fri Sep 23 10:38:39 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Fri, 23 Sep 2011 10:38:39 +0200
Subject: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
Message-ID: <1316767120.12296.14.camel@milan>

Hi all!

Title says most of my question. ;-) This is something I'm experiencing
when using Rcmdr. For a probably good reason, it is run inside X11
instead of being a native Mac application. I guess this is why Tk
doesn't detect it would better use the Aqua Tile theme[1], which would
look much better on Macs than the default Tk theme.

I think even if R keeps using X11 for Tcl/Tk GUIs, it would be a nice
enhancement to set the default theme to Aqua in tcltk mac packages. Do
you think it's just a matter of changing a setting in packages?


Thanks for your help


1: http://tktable.sourceforge.net/tile/screenshots/macosx.html


From ripley at stats.ox.ac.uk  Fri Sep 23 11:01:59 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 23 Sep 2011 10:01:59 +0100 (BST)
Subject: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
In-Reply-To: <1316767120.12296.14.camel@milan>
References: <1316767120.12296.14.camel@milan>
Message-ID: <alpine.LFD.2.02.1109230954590.28619@gannet.stats.ox.ac.uk>

On Fri, 23 Sep 2011, Milan Bouchet-Valat wrote:

> Hi all!
>
> Title says most of my question. ;-) This is something I'm experiencing
> when using Rcmdr. For a probably good reason, it is run inside X11
> instead of being a native Mac application. I guess this is why Tk
> doesn't detect it would better use the Aqua Tile theme[1], which would
> look much better on Macs than the default Tk theme.
>
> I think even if R keeps using X11 for Tcl/Tk GUIs, it would be a nice
> enhancement to set the default theme to Aqua in tcltk mac packages. Do
> you think it's just a matter of changing a setting in packages?

That theme is only available in Mac builds of Tk, not X11 ones.  You 
can build R for yourself to use Mac Tcl/Tk (I tend to use the 
ActiveTcl distribution), and then the Mac theme is the default.  But 
you will then need to use command-line R and not R.app (which is quite 
sensible if you are using Rcmdr as your console).

(If you do build against Mac Tcl/Tk and run R.app, R.app and Tk fight 
over the menu line.)

>
>
> Thanks for your help
>
>
> 1: http://tktable.sourceforge.net/tile/screenshots/macosx.html
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From nalimilan at club.fr  Fri Sep 23 11:07:34 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Fri, 23 Sep 2011 11:07:34 +0200
Subject: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
In-Reply-To: <alpine.LFD.2.02.1109230954590.28619@gannet.stats.ox.ac.uk>
References: <1316767120.12296.14.camel@milan>
	<alpine.LFD.2.02.1109230954590.28619@gannet.stats.ox.ac.uk>
Message-ID: <1316768855.12296.19.camel@milan>

Le vendredi 23 septembre 2011 ? 10:01 +0100, Prof Brian Ripley a ?crit :
> That theme is only available in Mac builds of Tk, not X11 ones.
Ah, I see. Sad. :-/

> You can build R for yourself to use Mac Tcl/Tk (I tend to use the 
> ActiveTcl distribution), and then the Mac theme is the default.  But 
> you will then need to use command-line R and not R.app (which is quite 
> sensible if you are using Rcmdr as your console).
Indeed, it would make sense, but care more about users than about my own
setup (I'm on Linux anyway), and building a custom R isn't really an
option there.

> (If you do build against Mac Tcl/Tk and run R.app, R.app and Tk fight 
> over the menu line.)
Isn't that something that can be fixed? Maybe Tk shouldn't try to
control the menu bar if no Tk GUI is trying to create menus? I can file
a bug in their bug tracker if that would be a solution.

Thanks for your reply


From ripley at stats.ox.ac.uk  Fri Sep 23 11:55:07 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 23 Sep 2011 10:55:07 +0100 (BST)
Subject: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
In-Reply-To: <1316768855.12296.19.camel@milan>
References: <1316767120.12296.14.camel@milan>
	<alpine.LFD.2.02.1109230954590.28619@gannet.stats.ox.ac.uk>
	<1316768855.12296.19.camel@milan>
Message-ID: <alpine.LFD.2.02.1109231053160.3202@toucan.stats.ox.ac.uk>

On Fri, 23 Sep 2011, Milan Bouchet-Valat wrote:

> Le vendredi 23 septembre 2011 ? 10:01 +0100, Prof Brian Ripley a ?crit :
>> That theme is only available in Mac builds of Tk, not X11 ones.
> Ah, I see. Sad. :-/
>
>> You can build R for yourself to use Mac Tcl/Tk (I tend to use the
>> ActiveTcl distribution), and then the Mac theme is the default.  But
>> you will then need to use command-line R and not R.app (which is quite
>> sensible if you are using Rcmdr as your console).
> Indeed, it would make sense, but care more about users than about my own
> setup (I'm on Linux anyway), and building a custom R isn't really an
> option there.

Why not?  It's easy on Mac OS X (as easy as on Linux).

>> (If you do build against Mac Tcl/Tk and run R.app, R.app and Tk fight
>> over the menu line.)
> Isn't that something that can be fixed? Maybe Tk shouldn't try to
> control the menu bar if no Tk GUI is trying to create menus? I can file
> a bug in their bug tracker if that would be a solution.

You are welcome to contribute a fix.  Simon will no doubt chip in with 
more details.

> Thanks for your reply
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From nalimilan at club.fr  Fri Sep 23 12:12:55 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Fri, 23 Sep 2011 12:12:55 +0200
Subject: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
In-Reply-To: <alpine.LFD.2.02.1109231053160.3202@toucan.stats.ox.ac.uk>
References: <1316767120.12296.14.camel@milan>
	<alpine.LFD.2.02.1109230954590.28619@gannet.stats.ox.ac.uk>
	<1316768855.12296.19.camel@milan>
	<alpine.LFD.2.02.1109231053160.3202@toucan.stats.ox.ac.uk>
Message-ID: <1316772776.12296.26.camel@milan>

Le vendredi 23 septembre 2011 ? 10:55 +0100, Prof Brian Ripley a ?crit :
> Why not?  It's easy on Mac OS X (as easy as on Linux).
"As easy as on Linux" means "much too hard" for my intended audience. :-)

I'm creating a Rcmdr plugin that I'd like people to install without
typing more than two lines of code, and if possible none at all. But I
don't care that much about the look of the GUI, that would only be a
nice improvement.

> You are welcome to contribute a fix.  Simon will no doubt chip in with 
> more details.
I'll see what I can do, being totally ignorant of Mac OS X programming.
A first step is identifying where the bug is, or where it's easier to
fix (R or Tk). But let's hear what Simon says.


Thanks!


From simon.urbanek at r-project.org  Fri Sep 23 16:09:44 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 23 Sep 2011 10:09:44 -0400
Subject: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
In-Reply-To: <1316772776.12296.26.camel@milan>
References: <1316767120.12296.14.camel@milan>
	<alpine.LFD.2.02.1109230954590.28619@gannet.stats.ox.ac.uk>
	<1316768855.12296.19.camel@milan>
	<alpine.LFD.2.02.1109231053160.3202@toucan.stats.ox.ac.uk>
	<1316772776.12296.26.camel@milan>
Message-ID: <1C3E8418-D3E4-42A0-A4C6-3462EF57501B@r-project.org>


On Sep 23, 2011, at 6:12 AM, Milan Bouchet-Valat wrote:

> Le vendredi 23 septembre 2011 ? 10:55 +0100, Prof Brian Ripley a ?crit :
>> Why not?  It's easy on Mac OS X (as easy as on Linux).
> "As easy as on Linux" means "much too hard" for my intended audience. :-)
> 
> I'm creating a Rcmdr plugin that I'd like people to install without
> typing more than two lines of code, and if possible none at all. But I
> don't care that much about the look of the GUI, that would only be a
> nice improvement.
> 
>> You are welcome to contribute a fix.  Simon will no doubt chip in with 
>> more details.
> I'll see what I can do, being totally ignorant of Mac OS X programming.
> A first step is identifying where the bug is, or where it's easier to
> fix (R or Tk). But let's hear what Simon says.
> 

I didn't check the most recent version of native Tk, but the design of the native Tk was that it assumes that it will be the one driving the UI  - it didn't even check that it is being loaded into an existing application that has already initialized Cocoa. There were additional issues with the event loop, but more recently I think Brian had some success on that front.
In a spare minute (at the earliest next week) I'll see if I an get my knowledge on that issue up to date..

Cheers,
Simon


From jfox at mcmaster.ca  Fri Sep 23 16:23:48 2011
From: jfox at mcmaster.ca (John Fox)
Date: Fri, 23 Sep 2011 10:23:48 -0400
Subject: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
In-Reply-To: <1C3E8418-D3E4-42A0-A4C6-3462EF57501B@r-project.org>
References: <1316767120.12296.14.camel@milan>	<alpine.LFD.2.02.1109230954590.28619@gannet.stats.ox.ac.uk>	<1316768855.12296.19.camel@milan>	<alpine.LFD.2.02.1109231053160.3202@toucan.stats.ox.ac.uk>	<1316772776.12296.26.camel@milan>
	<1C3E8418-D3E4-42A0-A4C6-3462EF57501B@r-project.org>
Message-ID: <003b01cc79fc$697ef830$3c7ce890$@mcmaster.ca>

Dear Simon,

As you know, I have an interest in Tcl/Tk as developer of the Rcmdr package.
It would be nice if use of R Tcl/Tk applications could be made as convenient
and aesthetically pleasing for Mac users as for Windows users.

Thanks,
 John

> -----Original Message-----
> From: r-sig-mac-bounces at r-project.org [mailto:r-sig-mac-bounces at r-
> project.org] On Behalf Of Simon Urbanek
> Sent: September-23-11 10:10 AM
> To: Milan Bouchet-Valat
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
> 
> 
> On Sep 23, 2011, at 6:12 AM, Milan Bouchet-Valat wrote:
> 
> > Le vendredi 23 septembre 2011 ? 10:55 +0100, Prof Brian Ripley a ?crit :
> >> Why not?  It's easy on Mac OS X (as easy as on Linux).
> > "As easy as on Linux" means "much too hard" for my intended audience.
> > :-)
> >
> > I'm creating a Rcmdr plugin that I'd like people to install without
> > typing more than two lines of code, and if possible none at all. But I
> > don't care that much about the look of the GUI, that would only be a
> > nice improvement.
> >
> >> You are welcome to contribute a fix.  Simon will no doubt chip in
> >> with more details.
> > I'll see what I can do, being totally ignorant of Mac OS X programming.
> > A first step is identifying where the bug is, or where it's easier to
> > fix (R or Tk). But let's hear what Simon says.
> >
> 
> I didn't check the most recent version of native Tk, but the design of the
> native Tk was that it assumes that it will be the one driving the UI  - it
> didn't even check that it is being loaded into an existing application
that
> has already initialized Cocoa. There were additional issues with the event
> loop, but more recently I think Brian had some success on that front.
> In a spare minute (at the earliest next week) I'll see if I an get my
> knowledge on that issue up to date..
> 
> Cheers,
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From nalimilan at club.fr  Fri Sep 23 16:34:18 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Fri, 23 Sep 2011 16:34:18 +0200
Subject: [R-SIG-Mac] Using the Aqua Tcl/Tk theme by default on Mac OS
In-Reply-To: <1C3E8418-D3E4-42A0-A4C6-3462EF57501B@r-project.org>
References: <1316767120.12296.14.camel@milan>
	<alpine.LFD.2.02.1109230954590.28619@gannet.stats.ox.ac.uk>
	<1316768855.12296.19.camel@milan>
	<alpine.LFD.2.02.1109231053160.3202@toucan.stats.ox.ac.uk>
	<1316772776.12296.26.camel@milan>
	<1C3E8418-D3E4-42A0-A4C6-3462EF57501B@r-project.org>
Message-ID: <1316788471.12296.28.camel@milan>

Le vendredi 23 septembre 2011 ? 10:09 -0400, Simon Urbanek a ?crit :
> I didn't check the most recent version of native Tk, but the design of
> the native Tk was that it assumes that it will be the one driving the
> UI  - it didn't even check that it is being loaded into an existing
> application that has already initialized Cocoa. There were additional
> issues with the event loop, but more recently I think Brian had some
> success on that front.
So that would be Tk's fault. ;-)

> In a spare minute (at the earliest next week) I'll see if I an get my
> knowledge on that issue up to date..
That's great, thanks - and there's no real hurry!


From erich.neuwirth at univie.ac.at  Sun Sep 25 15:12:08 2011
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Sun, 25 Sep 2011 15:12:08 +0200
Subject: [R-SIG-Mac] RGtk, rattle, and GTK+ on Lion
Message-ID: <851081D3-336F-43DC-B27B-66185A7F638D@univie.ac.at>

As a few people have noticed rattle does not run on R on Lion. The reason is that it needs a newer version of gtk
than the one we have thanks to Simon (downloadable from the att R site).
I have read in quite a few different places that building gtk on the Mac is messy.
Nevertheless, I tried, and I have been able to build a version in Lion which allows
to  build everything and tin the gtk-demo included in the source package.
I have to overcome two bugs in the distribution.
This new version lives in ~/gtk/inst and the contents are very similar to Simon's
/Library/Frameworks/GTK+.framework/Versions/2.18.X11/Resources
I am not experienced in developing on OSX, so I am not able to build
an installable pkg file which would install this version of gtk as a replacement 
of Simon's current version.
Perhaps somebody experienced in creating Mac packages is willing to start
where I had to stop and create such a package.
I think that some other readers of this mailing list even might be as eager as I to learn
how this can be done in an email short course over the list ;-)

I also do not know if we need to recompile RGtk2 (and possible more packages)

And now the hints to overcome the errors in the build process

-=-=-=-=-=-==-=

Bulding GTK+ version 2.24.0 on Lion
Basically follow instructions on
http://live.gnome.org/GTK%2B/OSX/Building
outlined in section Procedure.
There will be 2 problems, so here is the description of
how to overcome the problems.

In your home directory download 
http://git.gnome.org/browse/gtk-osx/plain/gtk-osx-build-setup.sh
add /User/neuwirth/.local/bin
to your path by creating a file named jhbuild in
/etc/paths.d/
containing just the line
/Users/_yourname_/.local/bin

Then back to your home directory
jhbuild bootstrap

You will get an error when building module gettext
in step 2/12.
You can stop the build by entering Cntl-C at the prompt
with the menu offering choices for continuing.


Now in ~/gtk/gettext-0.18.1.1/gettext-tools/gnulib-lib/
open the file stpncpy.c in an editor and
replace the line 19 (or close)
    # define __stpncpy stpncpy
by
    //# define __stpncpy stpncpy
Run
jhbuild bootstrap
again, the build should complete now

Run 
jhbuild meta-gtk-osx-bootstrap
this should work.
Then run
Run jhbuild meta-gtk-osx-core
You will get an error when building gtk+ at step 10/12
 At the error, stop the build process and do the following:
in ~/gtk/source/gtk+-2.24.0/tests/
in Makefile in line 95 (or close)
replace
	autotestkeywords_LDADD = $(LDADD) 
by
    autotestkeywords_LDADD = $(LDADDS)

In your home directory again run 
Run jhbuild meta-gtk-osx-core
The build should finish without errors.
You will have the gtk binaries and all the additional components (docs, headers, ....)
~/gtk/inst





-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 163 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110925/eff075a2/attachment.bin>

From khayden at berkeley.edu  Mon Sep 26 04:17:47 2011
From: khayden at berkeley.edu (Katherine Hayden)
Date: Sun, 25 Sep 2011 19:17:47 -0700
Subject: [R-SIG-Mac] lme4 in Lion?
Message-ID: <CAFoCwutkqqzcoBaT-Uj4Via1cfA0ugL_zeA4E-afemi1vGu9ZA@mail.gmail.com>

Hi,

Is lme4 working well in Lion? I haven't been able to get it to load on
my 0S 10.7 Mac, and I haven't been able to make the fixes I've seen
elsewhere work for me. I have installed XCode 4.1.1 (including running
the installer the AppStore installed!), as well as GNU fortran 4.2.4
for Lion from r.research.att.com.

I've installed lme4 as type="source" from CRAN, but when I'm trying to
load the library in R (64-bit, 2.13.1 Patched) I get this error:

Error in dyn.load(file, DLLpath = DLLpath, ...) :
  unable to load shared object
'/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/x86_64/lme4.so':
  dlopen(/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/x86_64/lme4.so,
6): Library not loaded: libRblas.dylib
  Referenced from:
/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/x86_64/lme4.so
  Reason: image not found
Error: package/namespace load failed for 'lme4'

If I try loading it the 32-bit R.app, there's an extra line in the
error message, with something about Version 2.5:

Error in dyn.load(file, DLLpath = DLLpath, ...) :
  unable to load shared object
'/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/i386/lme4.so':
  dlopen(/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/i386/lme4.so,
6): Library not loaded:
/Library/Frameworks/R.framework/Versions/2.5/Resources/lib/libRblas.dylib
  Referenced from:
/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/i386/lme4.so
  Reason: image not found
Error: package/namespace load failed for 'lme4'

Following Simon Urbanek's suggestion from a similar question last year
(https://stat.ethz.ch/pipermail/r-sig-mac/2010-July/007601.html), I
also tried installing the package from his untested binary, but it
seems it's not available for this version:

> install.packages("lme4",,"http://r.research.att.com/",type='mac.binary.untested')
Warning: unable to access index for repository
http://r.research.att.com/bin/macosx/untested/contrib/2.13
Warning message:
In getDependencies(pkgs, dependencies, available, lib) :
  package ?lme4? is not available (for R version 2.13.1 Patched)

Any suggestions will be appreciated!
-- 
Katherine Hayden
Postdoctoral Researcher
Forest Pathology & Mycology Lab
University of California, Berkeley


From armstrong.usu at gmail.com  Tue Sep 20 19:07:46 2011
From: armstrong.usu at gmail.com (Andrea Armstrong)
Date: Tue, 20 Sep 2011 11:07:46 -0600
Subject: [R-SIG-Mac] lme4 package with Mac Lion
In-Reply-To: <CAB+QPJAg-5R47G+6=rS3_TfOefm462X1awhtNU4BW_nBzMYbJA@mail.gmail.com>
References: <2B8D5D5D-F3E5-4B10-9E07-FFEFBDDC487F@gmail.com>
	<CAB+QPJAg-5R47G+6=rS3_TfOefm462X1awhtNU4BW_nBzMYbJA@mail.gmail.com>
Message-ID: <CAFqnwTng49tBrh4Bq0OKLz+1O-vxDtqXoW=m0dcd0UzN-LSB-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110920/02e77ae7/attachment.pl>

From simon.urbanek at r-project.org  Mon Sep 26 04:58:24 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 25 Sep 2011 22:58:24 -0400
Subject: [R-SIG-Mac] lme4 in Lion?
In-Reply-To: <CAFoCwutkqqzcoBaT-Uj4Via1cfA0ugL_zeA4E-afemi1vGu9ZA@mail.gmail.com>
References: <CAFoCwutkqqzcoBaT-Uj4Via1cfA0ugL_zeA4E-afemi1vGu9ZA@mail.gmail.com>
Message-ID: <8E81E880-E637-4DA4-8EA8-C5292168342E@r-project.org>

Katherine,

On Sep 25, 2011, at 10:17 PM, Katherine Hayden wrote:

> Hi,
> 
> Is lme4 working well in Lion?

Yes.


> I haven't been able to get it to load on
> my 0S 10.7 Mac,

How did you install it? Try
install.packages("lme4")
that works for me on Lion without problems. If you have some particular problem with it, please let us know.


> and I haven't been able to make the fixes I've seen
> elsewhere work for me. I have installed XCode 4.1.1 (including running
> the installer the AppStore installed!), as well as GNU fortran 4.2.4
> for Lion from r.research.att.com.
> 
> I've installed lme4 as type="source" from CRAN, but when I'm trying to
> load the library in R (64-bit, 2.13.1 Patched) I get this error:


I do not recommend it since we do provide a binary, but if you insist, please make sure you switched to R BLAS first as mentioned in the thread you quote.

Cheers,
Simon


> 
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>  unable to load shared object
> '/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/x86_64/lme4.so':
>  dlopen(/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/x86_64/lme4.so,
> 6): Library not loaded: libRblas.dylib
>  Referenced from:
> /Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/x86_64/lme4.so
>  Reason: image not found
> Error: package/namespace load failed for 'lme4'
> 
> If I try loading it the 32-bit R.app, there's an extra line in the
> error message, with something about Version 2.5:
> 
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>  unable to load shared object
> '/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/i386/lme4.so':
>  dlopen(/Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/i386/lme4.so,
> 6): Library not loaded:
> /Library/Frameworks/R.framework/Versions/2.5/Resources/lib/libRblas.dylib
>  Referenced from:
> /Library/Frameworks/R.framework/Versions/2.13/Resources/library/lme4/libs/i386/lme4.so
>  Reason: image not found
> Error: package/namespace load failed for 'lme4'
> 
> Following Simon Urbanek's suggestion from a similar question last year
> (https://stat.ethz.ch/pipermail/r-sig-mac/2010-July/007601.html), I
> also tried installing the package from his untested binary, but it
> seems it's not available for this version:
> 
>> install.packages("lme4",,"http://r.research.att.com/",type='mac.binary.untested')
> Warning: unable to access index for repository
> http://r.research.att.com/bin/macosx/untested/contrib/2.13
> Warning message:
> In getDependencies(pkgs, dependencies, available, lib) :
>  package ?lme4? is not available (for R version 2.13.1 Patched)
> 
> Any suggestions will be appreciated!
> -- 
> Katherine Hayden
> Postdoctoral Researcher
> Forest Pathology & Mycology Lab
> University of California, Berkeley
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 


From charles.sharpsteen at gmail.com  Mon Sep 26 06:17:40 2011
From: charles.sharpsteen at gmail.com (Charlie Sharpsteen)
Date: Sun, 25 Sep 2011 21:17:40 -0700
Subject: [R-SIG-Mac] RGtk, rattle, and GTK+ on Lion
In-Reply-To: <851081D3-336F-43DC-B27B-66185A7F638D@univie.ac.at>
References: <851081D3-336F-43DC-B27B-66185A7F638D@univie.ac.at>
Message-ID: <12675195.1573.1317010660824.JavaMail.geo-discussion-forums@prhv38>

On Sunday, September 25, 2011 6:12:08 AM UTC-7, Erich Neuwirth wrote:
>
> As a few people have noticed rattle does not run on R on Lion. The reason 
> is that it needs a newer version of gtk
> than the one we have thanks to Simon (downloadable from the att R site).
> I have read in quite a few different places that building gtk on the Mac is 
> messy.
> Nevertheless, I tried, and I have been able to build a version in Lion 
> which allows
> to  build everything and tin the gtk-demo included in the source package.
> I have to overcome two bugs in the distribution.
> This new version lives in ~/gtk/inst and the contents are very similar to 
> Simon's
> /Library/Frameworks/GTK+.framework/Versions/2.18.X11/Resources
> I am not experienced in developing on OSX, so I am not able to build
> an installable pkg file which would install this version of gtk as a 
> replacement 
> of Simon's current version.
> Perhaps somebody experienced in creating Mac packages is willing to start
> where I had to stop and create such a package.
> I think that some other readers of this mailing list even might be as eager 
> as I to learn
> how this can be done in an email short course over the list ;-)
>
> I also do not know if we need to recompile RGtk2 (and possible more 
> packages)
>

A package manager could help with this.

For example, install Homebrew:

  http://mxcl.github.com/homebrew

Install GFortran and R:

  brew install gfortran
  brew install R

You might be able to skip this step and use the R binaries from CRAN---the 
only caveat I can think of is that Homebrew doesn't build a Universal GTK+ 
(it gives you x86_64) and CRAN R might want to build both i386 and x86_64 
versions of packages.

Install GTK+:

  brew install gtk+

Run R and install rattle:

  install.packages('rattle')

Hope this helps!

-Charlie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110925/6782b1b4/attachment.html>

From khayden at berkeley.edu  Mon Sep 26 22:37:07 2011
From: khayden at berkeley.edu (Katherine Hayden)
Date: Mon, 26 Sep 2011 13:37:07 -0700
Subject: [R-SIG-Mac] lme4 in Lion?
In-Reply-To: <8E81E880-E637-4DA4-8EA8-C5292168342E@r-project.org>
References: <CAFoCwutkqqzcoBaT-Uj4Via1cfA0ugL_zeA4E-afemi1vGu9ZA@mail.gmail.com>
	<8E81E880-E637-4DA4-8EA8-C5292168342E@r-project.org>
Message-ID: <CAFoCwuv=wXXBSR6FNXTLBKFAebUR8De=oZ-_-yPfnt12xasMyg@mail.gmail.com>

Simon,

Thanks very much for your help!
>
> How did you install it? Try
> install.packages("lme4")
> that works for me on Lion without problems. If you have some particular problem with it, please let us know.

I tried that and got yet another error. But something finally clicked:
I was using gfortran 4.2.4, which installs in /usr/bin. Of course R
was looking for it in /usr/local/bin. I installed 4.2.3 in the default
location, and everything's working beautifully.

Thanks again for your quick response, and for these great resources.

Katy Hayden


From bhh at xs4all.nl  Tue Sep 27 09:15:51 2011
From: bhh at xs4all.nl (Berend Hasselman)
Date: Tue, 27 Sep 2011 09:15:51 +0200
Subject: [R-SIG-Mac] lme4 in Lion?
In-Reply-To: <CAFoCwuv=wXXBSR6FNXTLBKFAebUR8De=oZ-_-yPfnt12xasMyg@mail.gmail.com>
References: <CAFoCwutkqqzcoBaT-Uj4Via1cfA0ugL_zeA4E-afemi1vGu9ZA@mail.gmail.com>
	<8E81E880-E637-4DA4-8EA8-C5292168342E@r-project.org>
	<CAFoCwuv=wXXBSR6FNXTLBKFAebUR8De=oZ-_-yPfnt12xasMyg@mail.gmail.com>
Message-ID: <9EDA0FCE-262D-4A54-8DAC-F7D98DE8D26B@xs4all.nl>


On 26-09-2011, at 22:37, Katherine Hayden wrote:

> Simon,
> 
> Thanks very much for your help!
>> 
>> How did you install it? Try
>> install.packages("lme4")
>> that works for me on Lion without problems. If you have some particular problem with it, please let us know.
> 
> I tried that and got yet another error. But something finally clicked:
> I was using gfortran 4.2.4, which installs in /usr/bin. Of course R
> was looking for it in /usr/local/bin. I installed 4.2.3 in the default
> location, and everything's working beautifully.

I don't understand this at all. Yet another error? What error?

To check I tried to install lme4 from source.

I am using Lion 10.7.1 and  Xcode 4.1. gfortran from gfortran-lion-5666-3.pkg which installs gfortran into /usr/bin. And R 2..13.1 (2011-07-08). Blas library is linked to libRblas.dylib

R downloaded the latest Matrix source, compiled it and did the same for lme4.
No errors.

Loading lme4 and running example(lmer) went smoothly.
No errors at all.


Berend


From bhh at xs4all.nl  Tue Sep 27 09:24:04 2011
From: bhh at xs4all.nl (Berend Hasselman)
Date: Tue, 27 Sep 2011 09:24:04 +0200
Subject: [R-SIG-Mac] lme4 in Lion?
In-Reply-To: <9EDA0FCE-262D-4A54-8DAC-F7D98DE8D26B@xs4all.nl>
References: <CAFoCwutkqqzcoBaT-Uj4Via1cfA0ugL_zeA4E-afemi1vGu9ZA@mail.gmail.com>
	<8E81E880-E637-4DA4-8EA8-C5292168342E@r-project.org>
	<CAFoCwuv=wXXBSR6FNXTLBKFAebUR8De=oZ-_-yPfnt12xasMyg@mail.gmail.com>
	<9EDA0FCE-262D-4A54-8DAC-F7D98DE8D26B@xs4all.nl>
Message-ID: <6818F4C7-439D-4E34-9F04-D110AB68900D@xs4all.nl>


On 27-09-2011, at 09:15, Berend Hasselman wrote:

> 
> 
> I am using Lion 10.7.1 and  Xcode 4.1. gfortran from gfortran-lion-5666-3.pkg which installs gfortran into /usr/bin. And R 2..13.1 (2011-07-08). Blas library is linked to libRblas.dylib

I meant linked to libRblas.0.dylib 

Berend


From khayden at berkeley.edu  Wed Sep 28 01:12:57 2011
From: khayden at berkeley.edu (Katherine Hayden)
Date: Tue, 27 Sep 2011 16:12:57 -0700
Subject: [R-SIG-Mac] lme4 in Lion?
In-Reply-To: <9EDA0FCE-262D-4A54-8DAC-F7D98DE8D26B@xs4all.nl>
References: <CAFoCwutkqqzcoBaT-Uj4Via1cfA0ugL_zeA4E-afemi1vGu9ZA@mail.gmail.com>
	<8E81E880-E637-4DA4-8EA8-C5292168342E@r-project.org>
	<CAFoCwuv=wXXBSR6FNXTLBKFAebUR8De=oZ-_-yPfnt12xasMyg@mail.gmail.com>
	<9EDA0FCE-262D-4A54-8DAC-F7D98DE8D26B@xs4all.nl>
Message-ID: <CAFoCwuvf5JqQ71a9egL1hh+ex440kgha4nAWLGc3pWywpGiJ=w@mail.gmail.com>

> I don't understand this at all. Yet another error? What error?

Unfortunately, the one error message I didn't save. It looked like
another dynamic loading error. Please let me know if it will be
helpful, and I will un-do the fixes and try to recreate it. The
software is now working as perfectly for me as it is for you, after
linking to lib.Rblas.0.dylib.

Simon also had written that if I insist on building the package from
the source, I should to switch to R BLAS first. I'm happy to work with
the binary, and installing gfortran in /usr/local/bin allowed me to do
that, so I hadn't followed up on the suggestion prior to my last
message. I didn't find a reference to switching to R BLAS in the
thread I quoted, and so I hadn't tried it earlier, either. Now that
you both have pointed me in the right direction, I see the references
in other threads. It is certainly a more elegant solution than my
earlier fix, and it's also working perfectly.

In the terminal, I used the command exactly as in the FAQ (from Simon,
correct? Thanks for posting that.) to link libRbls0.dylib to
libRblas.dylib. I uninstalled g fortran v. 4.2.3, and with only g
fortran 4.2.4 in /usr/bin, I am able to install lme4 from source or
from the binary and run example(lmer) with no errors.

Thank you for your help!
Katy

-- 
Katherine Hayden
Postdoctoral Researcher
Forest Pathology & Mycology Lab
University of California, Berkeley


From michael.m.spiegel at gmail.com  Fri Sep 30 22:04:22 2011
From: michael.m.spiegel at gmail.com (Michael Spiegel)
Date: Fri, 30 Sep 2011 16:04:22 -0400
Subject: [R-SIG-Mac] OpenMP in R 2.13.1
Message-ID: <CANwu5-oC-3X12yhyKpHcvSN5yDLrMizAsrd=tvTk4ybM5DdTrg@mail.gmail.com>

I apologize for cross-posting from R-SIG-hpc, but I realized this
group is likely to have more mac users than the other group. Can
someone with a Mac go ahead and check in
/Library/Frameworks/R.framework/Resources/etc/x86_64/Makeconf and
confirm that the value for SHLIB_OPENMP_CFLAGS is empty when running R
2.13.1 and set to ?-fopenmp? when running R 2.13.0? I this is bug, but
I just want independent confirmation before I report this behavior.

--Michael


From simon.urbanek at r-project.org  Fri Sep 30 22:14:41 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 30 Sep 2011 16:14:41 -0400
Subject: [R-SIG-Mac] OpenMP in R 2.13.1
In-Reply-To: <CANwu5-oC-3X12yhyKpHcvSN5yDLrMizAsrd=tvTk4ybM5DdTrg@mail.gmail.com>
References: <CANwu5-oC-3X12yhyKpHcvSN5yDLrMizAsrd=tvTk4ybM5DdTrg@mail.gmail.com>
Message-ID: <85C3D494-78A4-439E-B1C1-D1999939B7F9@r-project.org>

Michael,

On Sep 30, 2011, at 4:04 PM, Michael Spiegel wrote:

> I apologize for cross-posting from R-SIG-hpc, but I realized this
> group is likely to have more mac users than the other group. Can
> someone with a Mac go ahead and check in
> /Library/Frameworks/R.framework/Resources/etc/x86_64/Makeconf and
> confirm that the value for SHLIB_OPENMP_CFLAGS is empty when running R
> 2.13.1 and set to ?-fopenmp? when running R 2.13.0? I this is bug, but
> I just want independent confirmation before I report this behavior.
> 

It's not a bug -- the gomp used by Apple's gcc is buggy and crashes when other threads are involved, so it is disabled in the R distribution (this was discovered after the 2.13.0 release). This is just one of many problems in the gomp on OS X, so if you need OpenMP for a particular package, you may be better off testing that it will work in your case and enable it for your build of the package in question using PKG_xx flags.

Cheers,
Simon


