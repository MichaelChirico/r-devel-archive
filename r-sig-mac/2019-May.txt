From p@v|o2 @end|ng |rom gm@||@com  Wed May  1 00:50:47 2019
From: p@v|o2 @end|ng |rom gm@||@com (Ryan Pavlovicz)
Date: Tue, 30 Apr 2019 15:50:47 -0700
Subject: [R-SIG-Mac] error in postscript -- unknown family 'Arial'
Message-ID: <CAC9O94Q2u+aj_W+zgwQOq9Mt-fZoYwjGBjsrHbtptpp9UsMUsg@mail.gmail.com>

Hi,

I am a new R user and am trying to run another person's data analysis
script that is failing with the following:

Error in postscript("Fig.eps", FALSE, "Arial", width = 13.83,  :

  unknown family 'Arial'


I am running with Mojave 10.14.4 if that matters. Any help would be much
appreciated!

Thanks!

-ryan

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Wed May  1 15:48:00 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 1 May 2019 09:48:00 -0400
Subject: [R-SIG-Mac] error in postscript -- unknown family 'Arial'
In-Reply-To: <CAC9O94Q2u+aj_W+zgwQOq9Mt-fZoYwjGBjsrHbtptpp9UsMUsg@mail.gmail.com>
References: <CAC9O94Q2u+aj_W+zgwQOq9Mt-fZoYwjGBjsrHbtptpp9UsMUsg@mail.gmail.com>
Message-ID: <A7CE6200-8909-4C3C-9917-B5EE13551E33@R-project.org>

You likely don't have "Arial" installed (or it's corrupted). Use a font that you have present in your system (see Font Book under Applications).

Cheers,
Simon



> On Apr 30, 2019, at 6:50 PM, Ryan Pavlovicz <pavlo2 at gmail.com> wrote:
> 
> Hi,
> 
> I am a new R user and am trying to run another person's data analysis
> script that is failing with the following:
> 
> Error in postscript("Fig.eps", FALSE, "Arial", width = 13.83,  :
> 
>  unknown family 'Arial'
> 
> 
> I am running with Mojave 10.14.4 if that matters. Any help would be much
> appreciated!
> 
> Thanks!
> 
> -ryan
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From m@rc_@chw@rtz @end|ng |rom me@com  Wed May  1 15:56:26 2019
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Wed, 1 May 2019 09:56:26 -0400
Subject: [R-SIG-Mac] error in postscript -- unknown family 'Arial'
In-Reply-To: <A7CE6200-8909-4C3C-9917-B5EE13551E33@R-project.org>
References: <CAC9O94Q2u+aj_W+zgwQOq9Mt-fZoYwjGBjsrHbtptpp9UsMUsg@mail.gmail.com>
 <A7CE6200-8909-4C3C-9917-B5EE13551E33@R-project.org>
Message-ID: <A39AAD2D-D53A-4DED-914F-D902010E3440@me.com>

Hi, 

An additional pointer that might be helpful:

  https://support.apple.com/guide/font-book/install-and-validate-fonts-fntbk1000/mac <https://support.apple.com/guide/font-book/install-and-validate-fonts-fntbk1000/mac>


Regards,

Marc Schwartz


> On May 1, 2019, at 9:48 AM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> You likely don't have "Arial" installed (or it's corrupted). Use a font that you have present in your system (see Font Book under Applications).
> 
> Cheers,
> Simon
> 
> 
> 
>> On Apr 30, 2019, at 6:50 PM, Ryan Pavlovicz <pavlo2 at gmail.com> wrote:
>> 
>> Hi,
>> 
>> I am a new R user and am trying to run another person's data analysis
>> script that is failing with the following:
>> 
>> Error in postscript("Fig.eps", FALSE, "Arial", width = 13.83,  :
>> 
>> unknown family 'Arial'
>> 
>> 
>> I am running with Mojave 10.14.4 if that matters. Any help would be much
>> appreciated!
>> 
>> Thanks!
>> 
>> -ryan


	[[alternative HTML version deleted]]


From k|rk|ucy @end|ng |rom m@c@com  Thu May  2 13:54:36 2019
From: k|rk|ucy @end|ng |rom m@c@com (Kirk Steyer)
Date: Thu, 2 May 2019 06:54:36 -0500
Subject: [R-SIG-Mac] Help Topic Search banner will not close
Message-ID: <842EEADC-85E9-471D-8E61-DA78FB760E63@mac.com>

In R version 3.5.3 (2019-03-11) 
Platform: x86_64-apple-darwin15.6.0 (64-bit)
[R.app GUI 1.70 (7632) x86_64-apple-darwin15.6.0]

when doing a search query in R help and after selecting ?Yes?, once returning from http://127.0.0.1:15299/doc/html/Search?results=1 to R.app the Help window will not close when selecting ?No?





Only two things are infinite, the Universe and Human stupidity, and I am not sure about the Universe.

Albert Einstein


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20190502/06c80d4c/attachment-0001.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screen Shot 2019-05-02 at 06.46.39.png
Type: image/png
Size: 175234 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20190502/06c80d4c/attachment-0001.png>

From t|m@b@te@ @end|ng |rom ed@@c@uk  Fri May  3 13:59:34 2019
From: t|m@b@te@ @end|ng |rom ed@@c@uk (BATES Timothy)
Date: Fri, 3 May 2019 11:59:34 +0000
Subject: [R-SIG-Mac] Help Topic Search banner will not close
In-Reply-To: <842EEADC-85E9-471D-8E61-DA78FB760E63@mac.com>
References: <842EEADC-85E9-471D-8E61-DA78FB760E63@mac.com>
Message-ID: <83FAAD52-BCDB-40C9-88AF-3B258FCB9BBD@ed.ac.uk>

Just to say can replicate this problem: the button text is erased and the expand search window can?t be closed and neither button responds to user input once yes is chosen.

Happens every time. was present for a couple of versions ago.

R version: R version 3.6.0 (2019-04-26)

On 2 May 2019, at 07:54, Kirk Steyer via R-SIG-Mac <r-sig-mac at r-project.org<mailto:r-sig-mac at r-project.org>> wrote:

In R version 3.5.3 (2019-03-11)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
[R.app GUI 1.70 (7632) x86_64-apple-darwin15.6.0]

when doing a search query in R help and after selecting ?Yes?, once returning from http://127.0.0.1:15299/doc/html/Search?results=1 to R.app the Help window will not close when selecting ?No?


The University of Edinburgh is a charitable body, registered in Scotland, with registration number SC005336.

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Tue May  7 01:16:43 2019
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Mon, 6 May 2019 18:16:43 -0500
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
Message-ID: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>

Hello, All:


 ????? I'm getting "clang: error: unsupported option '-fopenmp'" when 
trying to build "https://github.com/helske/bssm" under macOS 10.14.14 
with R 3.6.0;? see below.


 ????? What do you suggest?


 ????? Thanks,
 ????? Spencer Graves


p.s.? Helske told me he thought my compiler was out of date. However, 
I've so far been unable to find instructions that are sufficiently 
current to convince me I might not do more harm than good following them.


> R CMD build bssm
* checking for file ?bssm/DESCRIPTION? ... OK
* preparing ?bssm?:
* checking DESCRIPTION meta-information ... OK
* cleaning src
* installing the package to build vignettes
 ????? -----------------------------------
* installing *source* package ?bssm? ...
** using staged installation
** libs
clang++ -std=gnu++11 
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include" 
-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk 
-I/usr/local/include -fopenmp -fPIC? -Wall -g -O2? -c R_approx.cpp -o 
R_approx.o
clang: error: unsupported option '-fopenmp'
make: *** [R_approx.o] Error 1
ERROR: compilation failed for package ?bssm?
* removing 
?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
 ????? -----------------------------------
ERROR: package installation failed


From byron@e|||@ @end|ng |rom gm@||@com  Tue May  7 01:19:11 2019
From: byron@e|||@ @end|ng |rom gm@||@com (Byron Ellis)
Date: Mon, 6 May 2019 16:19:11 -0700
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
In-Reply-To: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
Message-ID: <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>

Hi Spencer,

You'll want to get the compiler tools from
https://cran.r-project.org/bin/macosx/tools/ to build properly.

Best,
B



On Mon, May 6, 2019 at 4:17 PM Spencer Graves <spencer.graves at prodsyse.com>
wrote:

> Hello, All:
>
>
>        I'm getting "clang: error: unsupported option '-fopenmp'" when
> trying to build "https://github.com/helske/bssm" under macOS 10.14.14
> with R 3.6.0;  see below.
>
>
>        What do you suggest?
>
>
>        Thanks,
>        Spencer Graves
>
>
> p.s.  Helske told me he thought my compiler was out of date. However,
> I've so far been unable to find instructions that are sufficiently
> current to convince me I might not do more harm than good following them.
>
>
> > R CMD build bssm
> * checking for file ?bssm/DESCRIPTION? ... OK
> * preparing ?bssm?:
> * checking DESCRIPTION meta-information ... OK
> * cleaning src
> * installing the package to build vignettes
>        -----------------------------------
> * installing *source* package ?bssm? ...
> ** using staged installation
> ** libs
> clang++ -std=gnu++11
> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
>
> -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
> -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
> R_approx.o
> clang: error: unsupported option '-fopenmp'
> make: *** [R_approx.o] Error 1
> ERROR: compilation failed for package ?bssm?
> * removing
>
> ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
>        -----------------------------------
> ERROR: package installation failed
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Byron Ellis (byron.ellis at gmail.com)
"Oook" -- The Librarian

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue May  7 01:21:54 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 6 May 2019 16:21:54 -0700
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
In-Reply-To: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
Message-ID: <EF8EBD42-A7CB-43C6-8CA2-B5153FA88F65@noaa.gov>

Um you didn't mention what version of the compiler and where you downloaded it from.  The last couple of versions available through the tools links have supported OpenMP.  I have compiled that package,  but I am using R 3.5.3 and clang 6,  I believe R 3.6.0 uses clang 7, but that also supports openmp

HTH,

-Roy

> On May 6, 2019, at 4:16 PM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
> 
> Hello, All:
> 
> 
>       I'm getting "clang: error: unsupported option '-fopenmp'" when trying to build "https://github.com/helske/bssm" under macOS 10.14.14 with R 3.6.0;  see below.
> 
> 
>       What do you suggest?
> 
> 
>       Thanks,
>       Spencer Graves
> 
> 
> p.s.  Helske told me he thought my compiler was out of date. However, I've so far been unable to find instructions that are sufficiently current to convince me I might not do more harm than good following them.
> 
> 
>> R CMD build bssm
> * checking for file ?bssm/DESCRIPTION? ... OK
> * preparing ?bssm?:
> * checking DESCRIPTION meta-information ... OK
> * cleaning src
> * installing the package to build vignettes
>       -----------------------------------
> * installing *source* package ?bssm? ...
> ** using staged installation
> ** libs
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include" -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include" -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include" -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include" -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include" -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o R_approx.o
> clang: error: unsupported option '-fopenmp'
> make: *** [R_approx.o] Error 1
> ERROR: compilation failed for package ?bssm?
> * removing ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
>       -----------------------------------
> ERROR: package installation failed
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Tue May  7 15:33:58 2019
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Tue, 7 May 2019 08:33:58 -0500
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
In-Reply-To: <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
 <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
Message-ID: <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>

Hi, Bryon et al.:


 ????? Thanks.? I did that and got virtually the same response ending 
with "clang: error: unsupported option '-fopenmp'".


 ????? Specifically, I started by looking for a "clang" subdirectory 
under "/usr/local/", which is where clang-8.0.0.pkg from 
"https://cran.r-project.org/bin/macosx/tools/" installed.? I did not 
find one.? I then downloaded and installed Clang8, and it appeared in 
directory "/usr/local/clang8".? I then rebooted and tried "R CMD build 
bssm" as before with the following results:


 > R CMD build bssm
* checking for file ?bssm/DESCRIPTION? ... OK
* preparing ?bssm?:
* checking DESCRIPTION meta-information ... OK
* cleaning src
* installing the package to build vignettes
 ????? -----------------------------------
* installing *source* package ?bssm? ...
** using staged installation
** libs
clang++ -std=gnu++11 
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include" 
-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk 
-I/usr/local/include -fopenmp -fPIC? -Wall -g -O2? -c R_approx.cpp -o 
R_approx.o
clang: error: unsupported option '-fopenmp'
make: *** [R_approx.o] Error 1
ERROR: compilation failed for package ?bssm?
* removing 
?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/Rtmp7TLdXk/Rinst6842b1d5fb3/bssm?
 ????? -----------------------------------
ERROR: package installation failed


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer


On 2019-05-06 18:19, Byron Ellis wrote:
> Hi Spencer,
>
> You'll want to get the compiler tools from 
> https://cran.r-project.org/bin/macosx/tools/?to build properly.
>
> Best,
> B
>
>
>
> On Mon, May 6, 2019 at 4:17 PM Spencer Graves 
> <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>
>     Hello, All:
>
>
>     ?????? I'm getting "clang: error: unsupported option '-fopenmp'" when
>     trying to build "https://github.com/helske/bssm" under macOS 10.14.14
>     with R 3.6.0;? see below.
>
>
>     ?????? What do you suggest?
>
>
>     ?????? Thanks,
>     ?????? Spencer Graves
>
>
>     p.s.? Helske told me he thought my compiler was out of date. However,
>     I've so far been unable to find instructions that are sufficiently
>     current to convince me I might not do more harm than good
>     following them.
>
>
>     > R CMD build bssm
>     * checking for file ?bssm/DESCRIPTION? ... OK
>     * preparing ?bssm?:
>     * checking DESCRIPTION meta-information ... OK
>     * cleaning src
>     * installing the package to build vignettes
>     ?????? -----------------------------------
>     * installing *source* package ?bssm? ...
>     ** using staged installation
>     ** libs
>     clang++ -std=gnu++11
>     -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>
>     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>
>     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>
>     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>
>     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
>
>     -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>     -I/usr/local/include -fopenmp -fPIC? -Wall -g -O2? -c R_approx.cpp -o
>     R_approx.o
>     clang: error: unsupported option '-fopenmp'
>     make: *** [R_approx.o] Error 1
>     ERROR: compilation failed for package ?bssm?
>     * removing
>     ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
>     ?????? -----------------------------------
>     ERROR: package installation failed
>
>     _______________________________________________
>     R-SIG-Mac mailing list
>     R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>     https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
>
> -- 
> Byron Ellis (byron.ellis at gmail.com <mailto:byron.ellis at gmail.com>)
> "Oook" -- The Librarian


	[[alternative HTML version deleted]]


From b@|@mut2 @end|ng |rom ||||no|@@edu  Tue May  7 15:56:22 2019
From: b@|@mut2 @end|ng |rom ||||no|@@edu (Balamuta, James Joseph)
Date: Tue, 7 May 2019 13:56:22 +0000
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
In-Reply-To: <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
 <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
 <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>
Message-ID: <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>

Greetings and Salutations All,

For R 3.6.x, you want:

https://cran.r-project.org/bin/macosx/tools/clang-7.0.0.pkg

To let R know about the complier, we need to modify the ~/.Renviron. You may need to create the file by running in Terminal (Applications -> Utilities):

touch ~/.Renviron

Then, inside of ~/.Renviron add:

PATH="/usr/local/clang7/bin:${PATH}"

More details can be found here (disclaimer: I wrote it):

http://thecoatlessprofessor.com/programming/r-compiler-tools-for-rcpp-on-macos/ 

I'm working on updating a bash-script installer to autodetect and install the appropriate toolchain based on the installed version of R here:

https://github.com/rmacoslib/r-macos-rtools 

I'll update the list-serv when I've released a new version for R 3.6.x. 

Sincerely,

JJB



?On 5/7/19, 8:34 AM, "R-SIG-Mac on behalf of Spencer Graves" <r-sig-mac-bounces at r-project.org on behalf of spencer.graves at prodsyse.com> wrote:

    Hi, Bryon et al.:
    
    
           Thanks.  I did that and got virtually the same response ending 
    with "clang: error: unsupported option '-fopenmp'".
    
    
           Specifically, I started by looking for a "clang" subdirectory 
    under "/usr/local/", which is where clang-8.0.0.pkg from 
    "https://cran.r-project.org/bin/macosx/tools/" installed.  I did not 
    find one.  I then downloaded and installed Clang8, and it appeared in 
    directory "/usr/local/clang8".  I then rebooted and tried "R CMD build 
    bssm" as before with the following results:
    
    
     > R CMD build bssm
    * checking for file ?bssm/DESCRIPTION? ... OK
    * preparing ?bssm?:
    * checking DESCRIPTION meta-information ... OK
    * cleaning src
    * installing the package to build vignettes
           -----------------------------------
    * installing *source* package ?bssm? ...
    ** using staged installation
    ** libs
    clang++ -std=gnu++11 
    -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG 
    -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include" 
    -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include" 
    -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include" 
    -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include" 
    -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include" 
    -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk 
    -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o 
    R_approx.o
    clang: error: unsupported option '-fopenmp'
    make: *** [R_approx.o] Error 1
    ERROR: compilation failed for package ?bssm?
    * removing 
    ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/Rtmp7TLdXk/Rinst6842b1d5fb3/bssm?
           -----------------------------------
    ERROR: package installation failed
    
    
           Suggestions?
           Thanks,
           Spencer
    
    
    On 2019-05-06 18:19, Byron Ellis wrote:
    > Hi Spencer,
    >
    > You'll want to get the compiler tools from 
    > https://cran.r-project.org/bin/macosx/tools/ to build properly.
    >
    > Best,
    > B
    >
    >
    >
    > On Mon, May 6, 2019 at 4:17 PM Spencer Graves 
    > <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
    >
    >     Hello, All:
    >
    >
    >            I'm getting "clang: error: unsupported option '-fopenmp'" when
    >     trying to build "https://github.com/helske/bssm" under macOS 10.14.14
    >     with R 3.6.0;  see below.
    >
    >
    >            What do you suggest?
    >
    >
    >            Thanks,
    >            Spencer Graves
    >
    >
    >     p.s.  Helske told me he thought my compiler was out of date. However,
    >     I've so far been unable to find instructions that are sufficiently
    >     current to convince me I might not do more harm than good
    >     following them.
    >
    >
    >     > R CMD build bssm
    >     * checking for file ?bssm/DESCRIPTION? ... OK
    >     * preparing ?bssm?:
    >     * checking DESCRIPTION meta-information ... OK
    >     * cleaning src
    >     * installing the package to build vignettes
    >            -----------------------------------
    >     * installing *source* package ?bssm? ...
    >     ** using staged installation
    >     ** libs
    >     clang++ -std=gnu++11
    >     -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
    >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
    >
    >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
    >
    >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
    >
    >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
    >
    >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
    >
    >     -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
    >     -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
    >     R_approx.o
    >     clang: error: unsupported option '-fopenmp'
    >     make: *** [R_approx.o] Error 1
    >     ERROR: compilation failed for package ?bssm?
    >     * removing
    >     ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
    >            -----------------------------------
    >     ERROR: package installation failed
    >
    >     _______________________________________________
    >     R-SIG-Mac mailing list
    >     R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
    >     https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    >
    >
    >
    > -- 
    > Byron Ellis (byron.ellis at gmail.com <mailto:byron.ellis at gmail.com>)
    > "Oook" -- The Librarian
    
    
    	[[alternative HTML version deleted]]
    
    _______________________________________________
    R-SIG-Mac mailing list
    R-SIG-Mac at r-project.org
    https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    


From t|m@b@te@ @end|ng |rom ed@@c@uk  Tue May  7 16:10:53 2019
From: t|m@b@te@ @end|ng |rom ed@@c@uk (BATES Timothy)
Date: Tue, 7 May 2019 14:10:53 +0000
Subject: [R-SIG-Mac] mac build of R 3.7 to test out?
In-Reply-To: <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
 <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
 <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>
 <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>
Message-ID: <00232ECF-1D21-42BA-885D-B73059299EE9@ed.ac.uk>

Related to the discussion of R-build specific clangs (3.5 -> clang 6; 3.6-> clang 7; 3.7 -> clang 8)

Is there a mac build of R 3.7 to test out yet (which would use clang 8)?

Looked on http://mac.r-project.org/#nightly and didn?t see one.

I pulled down clang 8 the other day thinking it would work with the released R 3.6, but getting headers not found (.e.g algorithms), which is perhaps because the R 3.6 is expecting clang 7 still (but also perhaps because compiling a package that uses C++14).

tim


On 7 May 2019, at 09:56, Balamuta, James Joseph <balamut2 at illinois.edu<mailto:balamut2 at illinois.edu>> wrote:
Greetings and Salutations All,
For R 3.6.x, you want:
https://cran.r-project.org/bin/macosx/tools/clang-7.0.0.pkg

The University of Edinburgh is a charitable body, registered in Scotland, with registration number SC005336.

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Tue May  7 17:23:52 2019
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Tue, 7 May 2019 10:23:52 -0500
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
In-Reply-To: <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
 <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
 <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>
 <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>
Message-ID: <3e134332-3e44-6efe-6d80-ce795ee9a834@prodsyse.com>

Hi, JJB:


 ????? Thanks.? Upon reading more carefully 
"https://cran.r-project.org/bin/macosx/tools/", I see that I need 
clang7, not the clang8 that I previously installed.? I downloaded and 
installed it, but I'm confused about how to modify my path, and I'm 
still getting the same error as before without that.? I don't recall 
ever modifying a path on a Mac before, and I don't find the 
"~/.Renviron" file you mentioned.


 ????? Thanks,
 ????? Spencer Graves


p.s.? I'm also a little spooked by your instructions to remove gfortran, 
because it might be used by something else.? I don't find 
"/usr/local/gfortran" that you mention, but I do find files (not 
folders) "/usr/local/bin/gfortran" and "/usr/local/bin/gfortran-4.8".? 
??? Thanks again.


On 2019-05-07 08:56, Balamuta, James Joseph wrote:
> Greetings and Salutations All,
>
> For R 3.6.x, you want:
>
> https://cran.r-project.org/bin/macosx/tools/clang-7.0.0.pkg
>
> To let R know about the complier, we need to modify the ~/.Renviron. You may need to create the file by running in Terminal (Applications -> Utilities):
>
> touch ~/.Renviron
>
> Then, inside of ~/.Renviron add:
>
> PATH="/usr/local/clang7/bin:${PATH}"
>
> More details can be found here (disclaimer: I wrote it):
>
> http://thecoatlessprofessor.com/programming/r-compiler-tools-for-rcpp-on-macos/
>
> I'm working on updating a bash-script installer to autodetect and install the appropriate toolchain based on the installed version of R here:
>
> https://github.com/rmacoslib/r-macos-rtools
>
> I'll update the list-serv when I've released a new version for R 3.6.x.
>
> Sincerely,
>
> JJB
>
>
>
> ?On 5/7/19, 8:34 AM, "R-SIG-Mac on behalf of Spencer Graves" <r-sig-mac-bounces at r-project.org on behalf of spencer.graves at prodsyse.com> wrote:
>
>      Hi, Bryon et al.:
>      
>      
>             Thanks.  I did that and got virtually the same response ending
>      with "clang: error: unsupported option '-fopenmp'".
>      
>      
>             Specifically, I started by looking for a "clang" subdirectory
>      under "/usr/local/", which is where clang-8.0.0.pkg from
>      "https://cran.r-project.org/bin/macosx/tools/" installed.  I did not
>      find one.  I then downloaded and installed Clang8, and it appeared in
>      directory "/usr/local/clang8".  I then rebooted and tried "R CMD build
>      bssm" as before with the following results:
>      
>      
>       > R CMD build bssm
>      * checking for file ?bssm/DESCRIPTION? ... OK
>      * preparing ?bssm?:
>      * checking DESCRIPTION meta-information ... OK
>      * cleaning src
>      * installing the package to build vignettes
>             -----------------------------------
>      * installing *source* package ?bssm? ...
>      ** using staged installation
>      ** libs
>      clang++ -std=gnu++11
>      -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
>      -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>      -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
>      R_approx.o
>      clang: error: unsupported option '-fopenmp'
>      make: *** [R_approx.o] Error 1
>      ERROR: compilation failed for package ?bssm?
>      * removing
>      ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/Rtmp7TLdXk/Rinst6842b1d5fb3/bssm?
>             -----------------------------------
>      ERROR: package installation failed
>      
>      
>             Suggestions?
>             Thanks,
>             Spencer
>      
>      
>      On 2019-05-06 18:19, Byron Ellis wrote:
>      > Hi Spencer,
>      >
>      > You'll want to get the compiler tools from
>      > https://cran.r-project.org/bin/macosx/tools/ to build properly.
>      >
>      > Best,
>      > B
>      >
>      >
>      >
>      > On Mon, May 6, 2019 at 4:17 PM Spencer Graves
>      > <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>      >
>      >     Hello, All:
>      >
>      >
>      >            I'm getting "clang: error: unsupported option '-fopenmp'" when
>      >     trying to build "https://github.com/helske/bssm" under macOS 10.14.14
>      >     with R 3.6.0;  see below.
>      >
>      >
>      >            What do you suggest?
>      >
>      >
>      >            Thanks,
>      >            Spencer Graves
>      >
>      >
>      >     p.s.  Helske told me he thought my compiler was out of date. However,
>      >     I've so far been unable to find instructions that are sufficiently
>      >     current to convince me I might not do more harm than good
>      >     following them.
>      >
>      >
>      >     > R CMD build bssm
>      >     * checking for file ?bssm/DESCRIPTION? ... OK
>      >     * preparing ?bssm?:
>      >     * checking DESCRIPTION meta-information ... OK
>      >     * cleaning src
>      >     * installing the package to build vignettes
>      >            -----------------------------------
>      >     * installing *source* package ?bssm? ...
>      >     ** using staged installation
>      >     ** libs
>      >     clang++ -std=gnu++11
>      >     -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>      >
>      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>      >
>      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>      >
>      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>      >
>      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
>      >
>      >     -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>      >     -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
>      >     R_approx.o
>      >     clang: error: unsupported option '-fopenmp'
>      >     make: *** [R_approx.o] Error 1
>      >     ERROR: compilation failed for package ?bssm?
>      >     * removing
>      >     ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
>      >            -----------------------------------
>      >     ERROR: package installation failed
>      >
>      >     _______________________________________________
>      >     R-SIG-Mac mailing list
>      >     R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>      >     https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>      >
>      >
>      >
>      > --
>      > Byron Ellis (byron.ellis at gmail.com <mailto:byron.ellis at gmail.com>)
>      > "Oook" -- The Librarian
>      
>      
>      	[[alternative HTML version deleted]]
>      
>      _______________________________________________
>      R-SIG-Mac mailing list
>      R-SIG-Mac at r-project.org
>      https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>      
>


From b@|@mut2 @end|ng |rom ||||no|@@edu  Tue May  7 18:18:55 2019
From: b@|@mut2 @end|ng |rom ||||no|@@edu (Balamuta, James Joseph)
Date: Tue, 7 May 2019 16:18:55 +0000
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
In-Reply-To: <3e134332-3e44-6efe-6d80-ce795ee9a834@prodsyse.com>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
 <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
 <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>
 <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>
 <3e134332-3e44-6efe-6d80-ce795ee9a834@prodsyse.com>
Message-ID: <CCAA6D03-FB24-48F4-815F-A5E3DD147602@illinois.edu>

Greetings and Salutations Spencer,

Modifying the path traditionally was done in `~/.R/Makevars` by setting the implicit variables: `CXX`, `CXX11` , ... 
I've found a better approach is to modify the `~/.Renviron` file. Since `.Renviron` is a "dot file", macOS will hide it by default. 

You can view the .Renviron file within Finder if you enable showing dot files by using the keyboard shortcut: CMD + SHIFT + . 

From terminal, the file must be created using: 

touch ~/.Renviron
vi ~/.Renviron

Inside the file, add a line with:

PATH="/usr/local/clang7/bin:${PATH}"

Once done, leave `vi` by pressing the ESC key and, then, typing ":wq" in the prompt.

Regarding the gfortran uninstall, this is because there were old artifacts lying around on some users systems.
It was easier to clean the system and, then, install the toolchain relative to R.

Sincerely,

JJB


?On 5/7/19, 10:24 AM, "Spencer Graves" <spencer.graves at prodsyse.com> wrote:

    Hi, JJB:
    
    
           Thanks.  Upon reading more carefully 
    "https://cran.r-project.org/bin/macosx/tools/", I see that I need 
    clang7, not the clang8 that I previously installed.  I downloaded and 
    installed it, but I'm confused about how to modify my path, and I'm 
    still getting the same error as before without that.  I don't recall 
    ever modifying a path on a Mac before, and I don't find the 
    "~/.Renviron" file you mentioned.
    
    
           Thanks,
           Spencer Graves
    
    
    p.s.  I'm also a little spooked by your instructions to remove gfortran, 
    because it might be used by something else.  I don't find 
    "/usr/local/gfortran" that you mention, but I do find files (not 
    folders) "/usr/local/bin/gfortran" and "/usr/local/bin/gfortran-4.8".  
    ??? Thanks again.
    
    
    On 2019-05-07 08:56, Balamuta, James Joseph wrote:
    > Greetings and Salutations All,
    >
    > For R 3.6.x, you want:
    >
    > https://cran.r-project.org/bin/macosx/tools/clang-7.0.0.pkg
    >
    > To let R know about the complier, we need to modify the ~/.Renviron. You may need to create the file by running in Terminal (Applications -> Utilities):
    >
    > touch ~/.Renviron
    >
    > Then, inside of ~/.Renviron add:
    >
    > PATH="/usr/local/clang7/bin:${PATH}"
    >
    > More details can be found here (disclaimer: I wrote it):
    >
    > http://thecoatlessprofessor.com/programming/r-compiler-tools-for-rcpp-on-macos/
    >
    > I'm working on updating a bash-script installer to autodetect and install the appropriate toolchain based on the installed version of R here:
    >
    > https://github.com/rmacoslib/r-macos-rtools
    >
    > I'll update the list-serv when I've released a new version for R 3.6.x.
    >
    > Sincerely,
    >
    > JJB
    >
    >
    >
    > On 5/7/19, 8:34 AM, "R-SIG-Mac on behalf of Spencer Graves" <r-sig-mac-bounces at r-project.org on behalf of spencer.graves at prodsyse.com> wrote:
    >
    >      Hi, Bryon et al.:
    >      
    >      
    >             Thanks.  I did that and got virtually the same response ending
    >      with "clang: error: unsupported option '-fopenmp'".
    >      
    >      
    >             Specifically, I started by looking for a "clang" subdirectory
    >      under "/usr/local/", which is where clang-8.0.0.pkg from
    >      "https://cran.r-project.org/bin/macosx/tools/" installed.  I did not
    >      find one.  I then downloaded and installed Clang8, and it appeared in
    >      directory "/usr/local/clang8".  I then rebooted and tried "R CMD build
    >      bssm" as before with the following results:
    >      
    >      
    >       > R CMD build bssm
    >      * checking for file ?bssm/DESCRIPTION? ... OK
    >      * preparing ?bssm?:
    >      * checking DESCRIPTION meta-information ... OK
    >      * cleaning src
    >      * installing the package to build vignettes
    >             -----------------------------------
    >      * installing *source* package ?bssm? ...
    >      ** using staged installation
    >      ** libs
    >      clang++ -std=gnu++11
    >      -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
    >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
    >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
    >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
    >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
    >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
    >      -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
    >      -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
    >      R_approx.o
    >      clang: error: unsupported option '-fopenmp'
    >      make: *** [R_approx.o] Error 1
    >      ERROR: compilation failed for package ?bssm?
    >      * removing
    >      ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/Rtmp7TLdXk/Rinst6842b1d5fb3/bssm?
    >             -----------------------------------
    >      ERROR: package installation failed
    >      
    >      
    >             Suggestions?
    >             Thanks,
    >             Spencer
    >      
    >      
    >      On 2019-05-06 18:19, Byron Ellis wrote:
    >      > Hi Spencer,
    >      >
    >      > You'll want to get the compiler tools from
    >      > https://cran.r-project.org/bin/macosx/tools/ to build properly.
    >      >
    >      > Best,
    >      > B
    >      >
    >      >
    >      >
    >      > On Mon, May 6, 2019 at 4:17 PM Spencer Graves
    >      > <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
    >      >
    >      >     Hello, All:
    >      >
    >      >
    >      >            I'm getting "clang: error: unsupported option '-fopenmp'" when
    >      >     trying to build "https://github.com/helske/bssm" under macOS 10.14.14
    >      >     with R 3.6.0;  see below.
    >      >
    >      >
    >      >            What do you suggest?
    >      >
    >      >
    >      >            Thanks,
    >      >            Spencer Graves
    >      >
    >      >
    >      >     p.s.  Helske told me he thought my compiler was out of date. However,
    >      >     I've so far been unable to find instructions that are sufficiently
    >      >     current to convince me I might not do more harm than good
    >      >     following them.
    >      >
    >      >
    >      >     > R CMD build bssm
    >      >     * checking for file ?bssm/DESCRIPTION? ... OK
    >      >     * preparing ?bssm?:
    >      >     * checking DESCRIPTION meta-information ... OK
    >      >     * cleaning src
    >      >     * installing the package to build vignettes
    >      >            -----------------------------------
    >      >     * installing *source* package ?bssm? ...
    >      >     ** using staged installation
    >      >     ** libs
    >      >     clang++ -std=gnu++11
    >      >     -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
    >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
    >      >
    >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
    >      >
    >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
    >      >
    >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
    >      >
    >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
    >      >
    >      >     -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
    >      >     -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
    >      >     R_approx.o
    >      >     clang: error: unsupported option '-fopenmp'
    >      >     make: *** [R_approx.o] Error 1
    >      >     ERROR: compilation failed for package ?bssm?
    >      >     * removing
    >      >     ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
    >      >            -----------------------------------
    >      >     ERROR: package installation failed
    >      >
    >      >     _______________________________________________
    >      >     R-SIG-Mac mailing list
    >      >     R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
    >      >     https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    >      >
    >      >
    >      >
    >      > --
    >      > Byron Ellis (byron.ellis at gmail.com <mailto:byron.ellis at gmail.com>)
    >      > "Oook" -- The Librarian
    >      
    >      
    >      	[[alternative HTML version deleted]]
    >      
    >      _______________________________________________
    >      R-SIG-Mac mailing list
    >      R-SIG-Mac at r-project.org
    >      https://stat.ethz.ch/mailman/listinfo/r-sig-mac
    >      
    >
    
    


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Tue May  7 19:20:23 2019
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Tue, 7 May 2019 12:20:23 -0500
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
In-Reply-To: <CCAA6D03-FB24-48F4-815F-A5E3DD147602@illinois.edu>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
 <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
 <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>
 <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>
 <3e134332-3e44-6efe-6d80-ce795ee9a834@prodsyse.com>
 <CCAA6D03-FB24-48F4-815F-A5E3DD147602@illinois.edu>
Message-ID: <f876abfe-0f6c-4847-608f-631b38e82370@prodsyse.com>

Adding .Renviron as you described solved the problem.? Thanks. Spencer


On 2019-05-07 11:18, Balamuta, James Joseph wrote:
> Greetings and Salutations Spencer,
>
> Modifying the path traditionally was done in `~/.R/Makevars` by setting the implicit variables: `CXX`, `CXX11` , ...
> I've found a better approach is to modify the `~/.Renviron` file. Since `.Renviron` is a "dot file", macOS will hide it by default.
>
> You can view the .Renviron file within Finder if you enable showing dot files by using the keyboard shortcut: CMD + SHIFT + .
>
>  From terminal, the file must be created using:
>
> touch ~/.Renviron
> vi ~/.Renviron
>
> Inside the file, add a line with:
>
> PATH="/usr/local/clang7/bin:${PATH}"
>
> Once done, leave `vi` by pressing the ESC key and, then, typing ":wq" in the prompt.
>
> Regarding the gfortran uninstall, this is because there were old artifacts lying around on some users systems.
> It was easier to clean the system and, then, install the toolchain relative to R.
>
> Sincerely,
>
> JJB
>
>
> ?On 5/7/19, 10:24 AM, "Spencer Graves" <spencer.graves at prodsyse.com> wrote:
>
>      Hi, JJB:
>      
>      
>             Thanks.  Upon reading more carefully
>      "https://cran.r-project.org/bin/macosx/tools/", I see that I need
>      clang7, not the clang8 that I previously installed.  I downloaded and
>      installed it, but I'm confused about how to modify my path, and I'm
>      still getting the same error as before without that.  I don't recall
>      ever modifying a path on a Mac before, and I don't find the
>      "~/.Renviron" file you mentioned.
>      
>      
>             Thanks,
>             Spencer Graves
>      
>      
>      p.s.  I'm also a little spooked by your instructions to remove gfortran,
>      because it might be used by something else.  I don't find
>      "/usr/local/gfortran" that you mention, but I do find files (not
>      folders) "/usr/local/bin/gfortran" and "/usr/local/bin/gfortran-4.8".
>      ??? Thanks again.
>      
>      
>      On 2019-05-07 08:56, Balamuta, James Joseph wrote:
>      > Greetings and Salutations All,
>      >
>      > For R 3.6.x, you want:
>      >
>      > https://cran.r-project.org/bin/macosx/tools/clang-7.0.0.pkg
>      >
>      > To let R know about the complier, we need to modify the ~/.Renviron. You may need to create the file by running in Terminal (Applications -> Utilities):
>      >
>      > touch ~/.Renviron
>      >
>      > Then, inside of ~/.Renviron add:
>      >
>      > PATH="/usr/local/clang7/bin:${PATH}"
>      >
>      > More details can be found here (disclaimer: I wrote it):
>      >
>      > http://thecoatlessprofessor.com/programming/r-compiler-tools-for-rcpp-on-macos/
>      >
>      > I'm working on updating a bash-script installer to autodetect and install the appropriate toolchain based on the installed version of R here:
>      >
>      > https://github.com/rmacoslib/r-macos-rtools
>      >
>      > I'll update the list-serv when I've released a new version for R 3.6.x.
>      >
>      > Sincerely,
>      >
>      > JJB
>      >
>      >
>      >
>      > On 5/7/19, 8:34 AM, "R-SIG-Mac on behalf of Spencer Graves" <r-sig-mac-bounces at r-project.org on behalf of spencer.graves at prodsyse.com> wrote:
>      >
>      >      Hi, Bryon et al.:
>      >
>      >
>      >             Thanks.  I did that and got virtually the same response ending
>      >      with "clang: error: unsupported option '-fopenmp'".
>      >
>      >
>      >             Specifically, I started by looking for a "clang" subdirectory
>      >      under "/usr/local/", which is where clang-8.0.0.pkg from
>      >      "https://cran.r-project.org/bin/macosx/tools/" installed.  I did not
>      >      find one.  I then downloaded and installed Clang8, and it appeared in
>      >      directory "/usr/local/clang8".  I then rebooted and tried "R CMD build
>      >      bssm" as before with the following results:
>      >
>      >
>      >       > R CMD build bssm
>      >      * checking for file ?bssm/DESCRIPTION? ... OK
>      >      * preparing ?bssm?:
>      >      * checking DESCRIPTION meta-information ... OK
>      >      * cleaning src
>      >      * installing the package to build vignettes
>      >             -----------------------------------
>      >      * installing *source* package ?bssm? ...
>      >      ** using staged installation
>      >      ** libs
>      >      clang++ -std=gnu++11
>      >      -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>      >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>      >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>      >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>      >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>      >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
>      >      -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>      >      -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
>      >      R_approx.o
>      >      clang: error: unsupported option '-fopenmp'
>      >      make: *** [R_approx.o] Error 1
>      >      ERROR: compilation failed for package ?bssm?
>      >      * removing
>      >      ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/Rtmp7TLdXk/Rinst6842b1d5fb3/bssm?
>      >             -----------------------------------
>      >      ERROR: package installation failed
>      >
>      >
>      >             Suggestions?
>      >             Thanks,
>      >             Spencer
>      >
>      >
>      >      On 2019-05-06 18:19, Byron Ellis wrote:
>      >      > Hi Spencer,
>      >      >
>      >      > You'll want to get the compiler tools from
>      >      > https://cran.r-project.org/bin/macosx/tools/ to build properly.
>      >      >
>      >      > Best,
>      >      > B
>      >      >
>      >      >
>      >      >
>      >      > On Mon, May 6, 2019 at 4:17 PM Spencer Graves
>      >      > <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>      >      >
>      >      >     Hello, All:
>      >      >
>      >      >
>      >      >            I'm getting "clang: error: unsupported option '-fopenmp'" when
>      >      >     trying to build "https://github.com/helske/bssm" under macOS 10.14.14
>      >      >     with R 3.6.0;  see below.
>      >      >
>      >      >
>      >      >            What do you suggest?
>      >      >
>      >      >
>      >      >            Thanks,
>      >      >            Spencer Graves
>      >      >
>      >      >
>      >      >     p.s.  Helske told me he thought my compiler was out of date. However,
>      >      >     I've so far been unable to find instructions that are sufficiently
>      >      >     current to convince me I might not do more harm than good
>      >      >     following them.
>      >      >
>      >      >
>      >      >     > R CMD build bssm
>      >      >     * checking for file ?bssm/DESCRIPTION? ... OK
>      >      >     * preparing ?bssm?:
>      >      >     * checking DESCRIPTION meta-information ... OK
>      >      >     * cleaning src
>      >      >     * installing the package to build vignettes
>      >      >            -----------------------------------
>      >      >     * installing *source* package ?bssm? ...
>      >      >     ** using staged installation
>      >      >     ** libs
>      >      >     clang++ -std=gnu++11
>      >      >     -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>      >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>      >      >
>      >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>      >      >
>      >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>      >      >
>      >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>      >      >
>      >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
>      >      >
>      >      >     -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>      >      >     -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
>      >      >     R_approx.o
>      >      >     clang: error: unsupported option '-fopenmp'
>      >      >     make: *** [R_approx.o] Error 1
>      >      >     ERROR: compilation failed for package ?bssm?
>      >      >     * removing
>      >      >     ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
>      >      >            -----------------------------------
>      >      >     ERROR: package installation failed
>      >      >
>      >      >     _______________________________________________
>      >      >     R-SIG-Mac mailing list
>      >      >     R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>      >      >     https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>      >      >
>      >      >
>      >      >
>      >      > --
>      >      > Byron Ellis (byron.ellis at gmail.com <mailto:byron.ellis at gmail.com>)
>      >      > "Oook" -- The Librarian
>      >
>      >
>      >      	[[alternative HTML version deleted]]
>      >
>      >      _______________________________________________
>      >      R-SIG-Mac mailing list
>      >      R-SIG-Mac at r-project.org
>      >      https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>      >
>      >
>      
>      
>


From @|mon@urb@nek @end|ng |rom R-project@org  Wed May 15 04:48:19 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 14 May 2019 22:48:19 -0400
Subject: [R-SIG-Mac] clang: error: unsupported option '-fopenmp'
In-Reply-To: <f876abfe-0f6c-4847-608f-631b38e82370@prodsyse.com>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
 <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
 <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>
 <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>
 <3e134332-3e44-6efe-6d80-ce795ee9a834@prodsyse.com>
 <CCAA6D03-FB24-48F4-815F-A5E3DD147602@illinois.edu>
 <f876abfe-0f6c-4847-608f-631b38e82370@prodsyse.com>
Message-ID: <2D62D033-784D-4BF6-BB7B-A1541A99372D@R-project.org>

Just for completeness - this is in R for Mac FAQ 10.15
https://mac.r-project.org/bin/macosx/RMacOSX-FAQ.html
and in detail in R-admin 6.3.2 
https://mac.r-project.org/man/R-admin.html#macOS-packages

Cheers,
Simon


> On May 7, 2019, at 13:20, Spencer Graves <spencer.graves at prodsyse.com> wrote:
> 
> Adding .Renviron as you described solved the problem.  Thanks. Spencer
> 
> 
> On 2019-05-07 11:18, Balamuta, James Joseph wrote:
>> Greetings and Salutations Spencer,
>> 
>> Modifying the path traditionally was done in `~/.R/Makevars` by setting the implicit variables: `CXX`, `CXX11` , ...
>> I've found a better approach is to modify the `~/.Renviron` file. Since `.Renviron` is a "dot file", macOS will hide it by default.
>> 
>> You can view the .Renviron file within Finder if you enable showing dot files by using the keyboard shortcut: CMD + SHIFT + .
>> 
>> From terminal, the file must be created using:
>> 
>> touch ~/.Renviron
>> vi ~/.Renviron
>> 
>> Inside the file, add a line with:
>> 
>> PATH="/usr/local/clang7/bin:${PATH}"
>> 
>> Once done, leave `vi` by pressing the ESC key and, then, typing ":wq" in the prompt.
>> 
>> Regarding the gfortran uninstall, this is because there were old artifacts lying around on some users systems.
>> It was easier to clean the system and, then, install the toolchain relative to R.
>> 
>> Sincerely,
>> 
>> JJB
>> 
>> 
>> ?On 5/7/19, 10:24 AM, "Spencer Graves" <spencer.graves at prodsyse.com> wrote:
>> 
>>     Hi, JJB:
>>                      Thanks.  Upon reading more carefully
>>     "https://cran.r-project.org/bin/macosx/tools/", I see that I need
>>     clang7, not the clang8 that I previously installed.  I downloaded and
>>     installed it, but I'm confused about how to modify my path, and I'm
>>     still getting the same error as before without that.  I don't recall
>>     ever modifying a path on a Mac before, and I don't find the
>>     "~/.Renviron" file you mentioned.
>>                      Thanks,
>>            Spencer Graves
>>               p.s.  I'm also a little spooked by your instructions to remove gfortran,
>>     because it might be used by something else.  I don't find
>>     "/usr/local/gfortran" that you mention, but I do find files (not
>>     folders) "/usr/local/bin/gfortran" and "/usr/local/bin/gfortran-4.8".
>>     ??? Thanks again.
>>               On 2019-05-07 08:56, Balamuta, James Joseph wrote:
>>     > Greetings and Salutations All,
>>     >
>>     > For R 3.6.x, you want:
>>     >
>>     > https://cran.r-project.org/bin/macosx/tools/clang-7.0.0.pkg
>>     >
>>     > To let R know about the complier, we need to modify the ~/.Renviron. You may need to create the file by running in Terminal (Applications -> Utilities):
>>     >
>>     > touch ~/.Renviron
>>     >
>>     > Then, inside of ~/.Renviron add:
>>     >
>>     > PATH="/usr/local/clang7/bin:${PATH}"
>>     >
>>     > More details can be found here (disclaimer: I wrote it):
>>     >
>>     > http://thecoatlessprofessor.com/programming/r-compiler-tools-for-rcpp-on-macos/
>>     >
>>     > I'm working on updating a bash-script installer to autodetect and install the appropriate toolchain based on the installed version of R here:
>>     >
>>     > https://github.com/rmacoslib/r-macos-rtools
>>     >
>>     > I'll update the list-serv when I've released a new version for R 3.6.x.
>>     >
>>     > Sincerely,
>>     >
>>     > JJB
>>     >
>>     >
>>     >
>>     > On 5/7/19, 8:34 AM, "R-SIG-Mac on behalf of Spencer Graves" <r-sig-mac-bounces at r-project.org on behalf of spencer.graves at prodsyse.com> wrote:
>>     >
>>     >      Hi, Bryon et al.:
>>     >
>>     >
>>     >             Thanks.  I did that and got virtually the same response ending
>>     >      with "clang: error: unsupported option '-fopenmp'".
>>     >
>>     >
>>     >             Specifically, I started by looking for a "clang" subdirectory
>>     >      under "/usr/local/", which is where clang-8.0.0.pkg from
>>     >      "https://cran.r-project.org/bin/macosx/tools/" installed.  I did not
>>     >      find one.  I then downloaded and installed Clang8, and it appeared in
>>     >      directory "/usr/local/clang8".  I then rebooted and tried "R CMD build
>>     >      bssm" as before with the following results:
>>     >
>>     >
>>     >       > R CMD build bssm
>>     >      * checking for file ?bssm/DESCRIPTION? ... OK
>>     >      * preparing ?bssm?:
>>     >      * checking DESCRIPTION meta-information ... OK
>>     >      * cleaning src
>>     >      * installing the package to build vignettes
>>     >             -----------------------------------
>>     >      * installing *source* package ?bssm? ...
>>     >      ** using staged installation
>>     >      ** libs
>>     >      clang++ -std=gnu++11
>>     >      -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>     >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>>     >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>>     >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>>     >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>>     >      -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
>>     >      -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>>     >      -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
>>     >      R_approx.o
>>     >      clang: error: unsupported option '-fopenmp'
>>     >      make: *** [R_approx.o] Error 1
>>     >      ERROR: compilation failed for package ?bssm?
>>     >      * removing
>>     >      ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/Rtmp7TLdXk/Rinst6842b1d5fb3/bssm?
>>     >             -----------------------------------
>>     >      ERROR: package installation failed
>>     >
>>     >
>>     >             Suggestions?
>>     >             Thanks,
>>     >             Spencer
>>     >
>>     >
>>     >      On 2019-05-06 18:19, Byron Ellis wrote:
>>     >      > Hi Spencer,
>>     >      >
>>     >      > You'll want to get the compiler tools from
>>     >      > https://cran.r-project.org/bin/macosx/tools/ to build properly.
>>     >      >
>>     >      > Best,
>>     >      > B
>>     >      >
>>     >      >
>>     >      >
>>     >      > On Mon, May 6, 2019 at 4:17 PM Spencer Graves
>>     >      > <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>     >      >
>>     >      >     Hello, All:
>>     >      >
>>     >      >
>>     >      >            I'm getting "clang: error: unsupported option '-fopenmp'" when
>>     >      >     trying to build "https://github.com/helske/bssm" under macOS 10.14.14
>>     >      >     with R 3.6.0;  see below.
>>     >      >
>>     >      >
>>     >      >            What do you suggest?
>>     >      >
>>     >      >
>>     >      >            Thanks,
>>     >      >            Spencer Graves
>>     >      >
>>     >      >
>>     >      >     p.s.  Helske told me he thought my compiler was out of date. However,
>>     >      >     I've so far been unable to find instructions that are sufficiently
>>     >      >     current to convince me I might not do more harm than good
>>     >      >     following them.
>>     >      >
>>     >      >
>>     >      >     > R CMD build bssm
>>     >      >     * checking for file ?bssm/DESCRIPTION? ... OK
>>     >      >     * preparing ?bssm?:
>>     >      >     * checking DESCRIPTION meta-information ... OK
>>     >      >     * cleaning src
>>     >      >     * installing the package to build vignettes
>>     >      >            -----------------------------------
>>     >      >     * installing *source* package ?bssm? ...
>>     >      >     ** using staged installation
>>     >      >     ** libs
>>     >      >     clang++ -std=gnu++11
>>     >      >     -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>>     >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>>     >      >
>>     >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>>     >      >
>>     >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>>     >      >
>>     >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>>     >      >
>>     >      >     -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
>>     >      >
>>     >      >     -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
>>     >      >     -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
>>     >      >     R_approx.o
>>     >      >     clang: error: unsupported option '-fopenmp'
>>     >      >     make: *** [R_approx.o] Error 1
>>     >      >     ERROR: compilation failed for package ?bssm?
>>     >      >     * removing
>>     >      >     ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
>>     >      >            -----------------------------------
>>     >      >     ERROR: package installation failed
>>     >      >
>>     >      >     _______________________________________________
>>     >      >     R-SIG-Mac mailing list
>>     >      >     R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>     >      >     https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>     >      >
>>     >      >
>>     >      >
>>     >      > --
>>     >      > Byron Ellis (byron.ellis at gmail.com <mailto:byron.ellis at gmail.com>)
>>     >      > "Oook" -- The Librarian
>>     >
>>     >
>>     >      	[[alternative HTML version deleted]]
>>     >
>>     >      _______________________________________________
>>     >      R-SIG-Mac mailing list
>>     >      R-SIG-Mac at r-project.org
>>     >      https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>     >
>>     >
>>          
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From @|mon@urb@nek @end|ng |rom R-project@org  Mon May 27 03:37:33 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 26 May 2019 21:37:33 -0400
Subject: [R-SIG-Mac] mac build of R 3.7 to test out?
In-Reply-To: <00232ECF-1D21-42BA-885D-B73059299EE9@ed.ac.uk>
References: <66f671a6-fb38-2c52-cb21-2c6265aa273e@prodsyse.com>
 <CAL=G+rSCfUjdU7WPZr8oaUSFmsaHH1L8ZJZ4HH6QLs3JMSWCNw@mail.gmail.com>
 <d0c73195-b492-3b60-4016-5ac1296ea9c6@prodsyse.com>
 <546B4023-C5B9-468D-BFA5-4CBA994E10B8@illinois.edu>
 <00232ECF-1D21-42BA-885D-B73059299EE9@ed.ac.uk>
Message-ID: <8EF16056-CDBB-4F01-A40F-7A9844DD9220@R-project.org>

Tim,

if you see any issues please report them to me - the compilers should still work. If you are compiling R on your own, make sure you add -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk to CPPFLAGS or else on recent systems you won't be able to see any headers as Apple has removed them from the system location.

Following you query, I have enabled R-devel for the next nightly build - at least for R itself, not for packages yet due to capacity concerns.

Cheers,
Simon



> On May 7, 2019, at 10:10 AM, BATES Timothy <tim.bates at ed.ac.uk> wrote:
> 
> Related to the discussion of R-build specific clangs (3.5 -> clang 6; 3.6-> clang 7; 3.7 -> clang 8)
> 
> Is there a mac build of R 3.7 to test out yet (which would use clang 8)?
> 
> Looked on http://mac.r-project.org/#nightly and didn?t see one.
> 
> I pulled down clang 8 the other day thinking it would work with the released R 3.6, but getting headers not found (.e.g algorithms), which is perhaps because the R 3.6 is expecting clang 7 still (but also perhaps because compiling a package that uses C++14).
> 
> tim
> 
> 
> On 7 May 2019, at 09:56, Balamuta, James Joseph <balamut2 at illinois.edu<mailto:balamut2 at illinois.edu>> wrote:
> Greetings and Salutations All,
> For R 3.6.x, you want:
> https://cran.r-project.org/bin/macosx/tools/clang-7.0.0.pkg
> 
> The University of Edinburgh is a charitable body, registered in Scotland, with registration number SC005336.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From kev|nu@hey @end|ng |rom gm@||@com  Thu May 30 18:11:50 2019
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Thu, 30 May 2019 09:11:50 -0700
Subject: [R-SIG-Mac] trouble loading C++-using packages on El Capitan
Message-ID: <CAJXgQP0F25tEjWx6sX68RCyrae9pHzHB8K38nCzG=jkvXOmA4Q@mail.gmail.com>

Hi,

Some users have reported issues when attempting to load packages using
C++ code on El Capitan -- for example:

Error: package or namespace load failed for ?readr? in dyn.load(file,
DLLpath = DLLpath, ...):
unable to load shared object
'/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/libs/Rcpp.so':
dlopen(/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/libs/Rcpp.so,
6): Symbol not found: ___cxa_uncaught_exceptions
Referenced from:
/Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libc++.1.dylib
Expected in: /usr/lib/libc++abi.dylib
in /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libc++.1.dylib

The main thing that stands out to me is that /usr/lib/libc++abi.dylib
is being requested, rather than the libc++abi library that's
distributed with the macOS R binaries. I can confirm as much in my R
3.6.0 installation:

kevin at cdrv:/Library/Frameworks/R.framework/Resources/lib
$ otool -L libc++.1.dylib
libc++.1.dylib:
        /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libc++.1.dylib
(compatibility version 1.0.0, current version 1.0.0)
        /usr/lib/libc++abi.dylib (compatibility version 1.0.0, current
version 400.17.0)
        /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libc++abi.1.dylib
(compatibility version 1.0.0, current version 1.0.0)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0,
current version 1252.200.5)

This can be changed with install_name_tool; e.g.

install_name_tool -change \
    /usr/lib/libc++abi.dylib \
    /Library/Frameworks/R.framework/Resources/lib/libc++abi.1.dylib \
    /Library/Frameworks/R.framework/Resources/lib/libc++.1.dylib

And this did fix the issue for one user
(https://community.rstudio.com/t/installing-packages-after-update-to-3-6-same-problem/31824)

My question is: is the usage of the system's libc++abi intentional, or
should that be pointing to the bundled libc++abi?

Thanks,
Kevin


