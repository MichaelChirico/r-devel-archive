From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  7 16:07:28 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jun 2021 10:07:28 -0400
Subject: [R-SIG-Mac] Minor bug in R.app GUI
Message-ID: <e32fb688-c012-0c6e-1f4c-882845d3220a@gmail.com>

When running in R.app (sessionInfo below; this is not quite the latest, 
sorry) I see the following minor issue:

When typing in the console, entering an opening paren causes the GUI to 
insert a matching closing paren.  When it does this, the text in the 
display all drops down half a line.  As soon as I type anything else, it 
pops back up.

Duncan Murdoch

Sessioninfo:


R version 4.0.5 Patched (2021-04-30 r80294)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Catalina 10.15.7

Matrix products: default
BLAS: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.0.5


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Jun  7 16:22:35 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Mon, 7 Jun 2021 14:22:35 +0000
Subject: [R-SIG-Mac] Grids not showing
Message-ID: <BN7PR08MB4114FBE44ECD64BDAFB40809D0389@BN7PR08MB4114.namprd08.prod.outlook.com>

Avi Gross has been helping me with ggplot lattice plots.  When he sends me graphs he has created (on a windows computer I think), if I view those on my iPad I can see a vague grid in the background on each panel.  I would like to have that effect in the graphs I produce.  However, when I view his graphs on my iMac, or if I use his code to produce a graph on my iMac, the grids disappear.  How can I get the grids to show in the graphs I produce?

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Jun  7 22:45:54 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 8 Jun 2021 08:45:54 +1200
Subject: [R-SIG-Mac] Grids not showing
In-Reply-To: <BN7PR08MB4114FBE44ECD64BDAFB40809D0389@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114FBE44ECD64BDAFB40809D0389@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <DC99259D-C401-42AE-8414-B757FEE0A6C7@R-project.org>


You may want to ask the ggplot help - since you provided zero details we can't tell (you didn't even say what kind of output you're looking at). I have no idea if that is related (since you didn't provide any code), but one common mistake is to use lwd=0 which leads to undefined behavior across devices (as documented).

Cheers,
Simon


> On Jun 8, 2021, at 2:22 AM, Parkhurst, David <parkhurs at indiana.edu> wrote:
> 
> Avi Gross has been helping me with ggplot lattice plots.  When he sends me graphs he has created (on a windows computer I think), if I view those on my iPad I can see a vague grid in the background on each panel.  I would like to have that effect in the graphs I produce.  However, when I view his graphs on my iMac, or if I use his code to produce a graph on my iMac, the grids disappear.  How can I get the grids to show in the graphs I produce?
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Jun  7 22:57:37 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Mon, 7 Jun 2021 20:57:37 +0000
Subject: [R-SIG-Mac] Grids not showing
In-Reply-To: <DC99259D-C401-42AE-8414-B757FEE0A6C7@R-project.org>
References: <BN7PR08MB4114FBE44ECD64BDAFB40809D0389@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <DC99259D-C401-42AE-8414-B757FEE0A6C7@R-project.org>
Message-ID: <BN7PR08MB4114F6FD9D79D16E37602820D0389@BN7PR08MB4114.namprd08.prod.outlook.com>

Ok, thanks.  As it happens, my old eyes are now seeing grids in the plots produced by and printed from my iMac.  I?d like to get them a little more prominent, and asking for ggplot help looks the way to go.

From: Simon Urbanek <simon.urbanek at R-project.org>
Date: Monday, June 7, 2021 at 4:46 PM
To: Parkhurst, David <parkhurs at indiana.edu>
Cc: r-sig-mac at r-project.org <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] Grids not showing
You may want to ask the ggplot help - since you provided zero details we can't tell (you didn't even say what kind of output you're looking at). I have no idea if that is related (since you didn't provide any code), but one common mistake is to use lwd=0 which leads to undefined behavior across devices (as documented).

Cheers,
Simon


> On Jun 8, 2021, at 2:22 AM, Parkhurst, David <parkhurs at indiana.edu> wrote:
>
> Avi Gross has been helping me with ggplot lattice plots.  When he sends me graphs he has created (on a windows computer I think), if I view those on my iPad I can see a vague grid in the background on each panel.  I would like to have that effect in the graphs I produce.  However, when I view his graphs on my iMac, or if I use his code to produce a graph on my iMac, the grids disappear.  How can I get the grids to show in the graphs I produce?
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun  8 15:24:07 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 8 Jun 2021 09:24:07 -0400
Subject: [R-SIG-Mac] Minor bug in R.app GUI
In-Reply-To: <e32fb688-c012-0c6e-1f4c-882845d3220a@gmail.com>
References: <e32fb688-c012-0c6e-1f4c-882845d3220a@gmail.com>
Message-ID: <76dd028d-1dad-1797-e58c-0e961a11948b@gmail.com>

Just updated to R 4.1.0 and R.app 1.76 (7976), and this has apparently 
been fixed.  Sorry for the noise!

Duncan Murdoch

On 07/06/2021 10:07 a.m., Duncan Murdoch wrote:
> When running in R.app (sessionInfo below; this is not quite the latest,
> sorry) I see the following minor issue:
> 
> When typing in the console, entering an opening paren causes the GUI to
> insert a matching closing paren.  When it does this, the text in the
> display all drops down half a line.  As soon as I type anything else, it
> pops back up.
> 
> Duncan Murdoch
> 
> Sessioninfo:
> 
> 
> R version 4.0.5 Patched (2021-04-30 r80294)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Catalina 10.15.7
> 
> Matrix products: default
> BLAS:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.5
>


From mgu|umbe @end|ng |rom hotm@||@com  Tue Jun  8 16:58:04 2021
From: mgu|umbe @end|ng |rom hotm@||@com (Shehu Usman Gulumbe)
Date: Tue, 8 Jun 2021 15:58:04 +0100
Subject: [R-SIG-Mac] I cannot download "updateR" package for macOS
Message-ID: <VI1SPR01MB03549BDB43728F820EA61CEFC3379@VI1SPR01MB0354.eurprd07.prod.outlook.com>

I have trying to download the ?updateR? package for my Mac Pro but have been getting the following error message :

> library(devtools)
> install_github("andreacirilloac/updateR")
Downloading GitHub repo andreacirilloac/updateR at HEAD
Error in utils::download.file(url, path, method = method, quiet = quiet,  : 
  download from 'https://api.github.com/repos/andreacirilloac/updateR/tarball/HEAD? failed


I would appreciate any help on this.


Usman
	[[alternative HTML version deleted]]


From mo|ep@2 @end|ng |rom gm@||@com  Tue Jun  8 22:46:35 2021
From: mo|ep@2 @end|ng |rom gm@||@com (moleps islon)
Date: Tue, 8 Jun 2021 22:46:35 +0200
Subject: [R-SIG-Mac] Corrupt R installation
Message-ID: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>

Copied from SO (
https://stackoverflow.com/questions/67892321/major-r-installation-corruption)
and sent here instead at the suggestion of  Dirk Eddelbuettel
<https://stackoverflow.com/users/143305/dirk-eddelbuettel>

I have no idea why, but my R installation (Mac OS X - Big Sur)
automatically updates causing havoc with my libraries each time. My Mac is
under administration from the university and their software center, but
they claim it is not their fault - but I still suspect them for causing all
the trouble.

Anyhow - after that last update to 4.1.0 the packages were again all lost.
I tried a dirty hack just symlinking to the old version and updating (I
know-- very stupid, but I didnt have time for a major update of all the
packages), but after this my R-installation has been totally chaos for the
past week. I?ve reinstalled everything multiple times (brew, llvm, gcc,
CLI, X-code -- you name it) and I?ve finally managed to get data.table
working again with openMP support using the instructions at SO
<https://stackoverflow.com/questions/65251887/clang-7-error-linker-command-failed-with-exit-code-1-for-macos-big-sur/65334247#65334247>
 (
https://stackoverflow.com/questions/65251887/clang-7-error-linker-command-failed-with-exit-code-1-for-macos-big-sur/65334247#65334247
).

However I still get the following error message when installing data.table
from source:

dylib (/usr/local/opt/llvm/lib/libunwind.dylib) was built for newer macOS
version (11.0) than being linked (10.16)
Does it matter? Any idea how I can fix it?

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Jun  9 02:00:00 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 9 Jun 2021 12:00:00 +1200
Subject: [R-SIG-Mac] I cannot download "updateR" package for macOS
In-Reply-To: <VI1SPR01MB03549BDB43728F820EA61CEFC3379@VI1SPR01MB0354.eurprd07.prod.outlook.com>
References: <VI1SPR01MB03549BDB43728F820EA61CEFC3379@VI1SPR01MB0354.eurprd07.prod.outlook.com>
Message-ID: <7CCA2B9F-3751-4A63-A807-7F77530C2159@R-project.org>


None of the tools you are mentioning are maintained or recommended by CRAN, please use untrusted sources at your own risk and contact the corresponding authors if you have questions. (Brief look at the URL leaves me absolutely horrified at the security implications).

Cheers,
Simon



> On 9/06/2021, at 2:58 AM, Shehu Usman Gulumbe <mgulumbe at hotmail.com> wrote:
> 
> I have trying to download the ?updateR? package for my Mac Pro but have been getting the following error message :
> 
>> library(devtools)
>> install_github("andreacirilloac/updateR")
> Downloading GitHub repo andreacirilloac/updateR at HEAD
> Error in utils::download.file(url, path, method = method, quiet = quiet,  : 
>  download from 'https://api.github.com/repos/andreacirilloac/updateR/tarball/HEAD? failed
> 
> 
> I would appreciate any help on this.
> 
> 
> Usman
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Jun  9 02:07:28 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 9 Jun 2021 12:07:28 +1200
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
Message-ID: <008799F8-74C0-4C27-AF64-C2ED15E28CB1@R-project.org>


You seem to have entirely non-standard setup that you're on your own and I assume you're not using CRAN R since you involve homebrew (which explains the chaos) so presumably you re-compiled R yourself and all packages, but I'd like to point out that if all you are after is OpenMP support then you don't need any of that fragile mess as explained at https://mac.r-project.org/openmp/

Cheers,
Simon


> On 9/06/2021, at 8:46 AM, moleps islon <moleps2 at gmail.com> wrote:
> 
> Copied from SO (
> https://stackoverflow.com/questions/67892321/major-r-installation-corruption)
> and sent here instead at the suggestion of  Dirk Eddelbuettel
> <https://stackoverflow.com/users/143305/dirk-eddelbuettel>
> 
> I have no idea why, but my R installation (Mac OS X - Big Sur)
> automatically updates causing havoc with my libraries each time. My Mac is
> under administration from the university and their software center, but
> they claim it is not their fault - but I still suspect them for causing all
> the trouble.
> 
> Anyhow - after that last update to 4.1.0 the packages were again all lost.
> I tried a dirty hack just symlinking to the old version and updating (I
> know-- very stupid, but I didnt have time for a major update of all the
> packages), but after this my R-installation has been totally chaos for the
> past week. I?ve reinstalled everything multiple times (brew, llvm, gcc,
> CLI, X-code -- you name it) and I?ve finally managed to get data.table
> working again with openMP support using the instructions at SO
> <https://stackoverflow.com/questions/65251887/clang-7-error-linker-command-failed-with-exit-code-1-for-macos-big-sur/65334247#65334247>
> (
> https://stackoverflow.com/questions/65251887/clang-7-error-linker-command-failed-with-exit-code-1-for-macos-big-sur/65334247#65334247
> ).
> 
> However I still get the following error message when installing data.table
> from source:
> 
> dylib (/usr/local/opt/llvm/lib/libunwind.dylib) was built for newer macOS
> version (11.0) than being linked (10.16)
> Does it matter? Any idea how I can fix it?
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun  9 03:16:05 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 08 Jun 2021 18:16:05 -0700
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <008799F8-74C0-4C27-AF64-C2ED15E28CB1@R-project.org>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
 <008799F8-74C0-4C27-AF64-C2ED15E28CB1@R-project.org>
Message-ID: <39D422F3-C263-401E-A4F7-3F404CA64AED@dcn.davis.ca.us>

Also, symlinking an X.Y R version package library to any other major-minor version is never supported (even if it sometimes works). Re-install your packages when the minor version Y increments.

On June 8, 2021 5:07:28 PM PDT, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>
>You seem to have entirely non-standard setup that you're on your own
>and I assume you're not using CRAN R since you involve homebrew (which
>explains the chaos) so presumably you re-compiled R yourself and all
>packages, but I'd like to point out that if all you are after is OpenMP
>support then you don't need any of that fragile mess as explained at
>https://mac.r-project.org/openmp/
>
>Cheers,
>Simon
>
>
>> On 9/06/2021, at 8:46 AM, moleps islon <moleps2 at gmail.com> wrote:
>> 
>> Copied from SO (
>>
>https://stackoverflow.com/questions/67892321/major-r-installation-corruption)
>> and sent here instead at the suggestion of  Dirk Eddelbuettel
>> <https://stackoverflow.com/users/143305/dirk-eddelbuettel>
>> 
>> I have no idea why, but my R installation (Mac OS X - Big Sur)
>> automatically updates causing havoc with my libraries each time. My
>Mac is
>> under administration from the university and their software center,
>but
>> they claim it is not their fault - but I still suspect them for
>causing all
>> the trouble.
>> 
>> Anyhow - after that last update to 4.1.0 the packages were again all
>lost.
>> I tried a dirty hack just symlinking to the old version and updating
>(I
>> know-- very stupid, but I didnt have time for a major update of all
>the
>> packages), but after this my R-installation has been totally chaos
>for the
>> past week. I?ve reinstalled everything multiple times (brew, llvm,
>gcc,
>> CLI, X-code -- you name it) and I?ve finally managed to get
>data.table
>> working again with openMP support using the instructions at SO
>>
><https://stackoverflow.com/questions/65251887/clang-7-error-linker-command-failed-with-exit-code-1-for-macos-big-sur/65334247#65334247>
>> (
>>
>https://stackoverflow.com/questions/65251887/clang-7-error-linker-command-failed-with-exit-code-1-for-macos-big-sur/65334247#65334247
>> ).
>> 
>> However I still get the following error message when installing
>data.table
>> from source:
>> 
>> dylib (/usr/local/opt/llvm/lib/libunwind.dylib) was built for newer
>macOS
>> version (11.0) than being linked (10.16)
>> Does it matter? Any idea how I can fix it?
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Sent from my phone. Please excuse my brevity.


From no@p@m @end|ng |rom ||@@e@NA  Wed Jun  9 10:55:03 2021
From: no@p@m @end|ng |rom ||@@e@NA (Dr Eberhard Lisse)
Date: Wed, 9 Jun 2021 10:55:03 +0200
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
Message-ID: <s9pvl8$ugc$1@ciao.gmane.io>

On 08/06/2021 22:46, moleps islon wrote:
[...]
> I have no idea why, but my R installation (Mac OS X - Big Sur)
> automatically updates causing havoc with my libraries each time.  My
> Mac is under administration from the university and their software
> center, but they claim it is not their fault - but I still suspect
> them for causing all the trouble.
[...]

Sounds like Homebrew to me.  If so, or anyway, create a file (before
updating) which contains something like

	 #!/usr/bin/env Rscript --vanilla
	 #
	 # set the Mirror
	 #
	 local({
		r <- getOption("repos")
		 r["CRAN"] <- "https://cloud.r-project.org/"
		options(repos = r)
	 })
	 install.packages(c(
		  "lubridate",
		  "tidyverse"
	 ), dependencies = TRUE)


or similar and run it if the additional libraries disappear.

You can fill this with something like

	 grep -h library *R \
	 |awk -F 'library' '{print $2}' \
	 |sed 's/(//g;s/)//g' \
	 |sort -u \
	 |awk '{print "\"" $1 "\","}'
	 |sed '$ s/,$//'

or in a few lines of the language of your choice generate the whole
script. And of course refine to your liking with something like

	 find ~/R -name '*.R' -exec grep -h library {} ';' \
	 ...

greetings, el

-- 
To email me replace 'nospam' with 'el'


From no@p@m @end|ng |rom ||@@e@NA  Wed Jun  9 11:00:19 2021
From: no@p@m @end|ng |rom ||@@e@NA (Dr Eberhard Lisse)
Date: Wed, 9 Jun 2021 11:00:19 +0200
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <008799F8-74C0-4C27-AF64-C2ED15E28CB1@R-project.org>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
 <008799F8-74C0-4C27-AF64-C2ED15E28CB1@R-project.org>
Message-ID: <s9pvv4$h94$1@ciao.gmane.io>

Besides that Homebrew does not explain any chaos and does not do a
fragile mess, he clearly stated that his installation is
managed/controlled by his University, so the below isn't helpful.

See my other response in this thread about how to automagically
re-install packages after Homebrew updates.

el

On 09/06/2021 02:07, Simon Urbanek wrote:
> 
> You seem to have entirely non-standard setup that you're on your own
> and I assume you're not using CRAN R since you involve homebrew (which
> explains the chaos) so presumably you re-compiled R yourself and all
> packages, but I'd like to point out that if all you are after is
> OpenMP support then you don't need any of that fragile mess as
> explained at https://mac.r-project.org/openmp/
> 
> Cheers,
> Simon
> 
> 
>> On 9/06/2021, at 8:46 AM, moleps islon <moleps2 at gmail.com> wrote:
[...]
>> I have no idea why, but my R installation (Mac OS X - Big Sur)
>> automatically updates causing havoc with my libraries each time. My Mac is
>> under administration from the university and their software center, but
>> they claim it is not their fault - but I still suspect them for causing all
>> the trouble.
[...]

-- 
To email me replace 'nospam' with 'el'


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Jun 10 00:26:45 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 10 Jun 2021 10:26:45 +1200
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <s9pvl8$ugc$1@ciao.gmane.io>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
 <s9pvl8$ugc$1@ciao.gmane.io>
Message-ID: <E53EE34A-1943-4DDD-9306-A58CBAE049A9@R-project.org>


Um, this is actually a lot easier purely with R - if you want to keep track of your favorite packages it is as simple as

pkgs = rownames(installed.packages())
writeLines(pkgs, "packages.txt")

and oyu have a list of all packages that you can edit if desired. if you ever want to re-install then simply

pkgs = readLines("packages.txt")
install.packages(pkgs)

and if you only want to install missing it's simply

missing.pkgs = pkgs[!pkgs %in% rownames(installed.packages())]
install.packages(missing.pkgs)

All trivially done in R. It is always beyond me why people come up with incredibly convoluted solutions to simple things ..

Cheers,
Simon



> On 9/06/2021, at 8:55 PM, Dr Eberhard Lisse <nospam at lisse.NA> wrote:
> 
> On 08/06/2021 22:46, moleps islon wrote:
> [...]
>> I have no idea why, but my R installation (Mac OS X - Big Sur)
>> automatically updates causing havoc with my libraries each time.  My
>> Mac is under administration from the university and their software
>> center, but they claim it is not their fault - but I still suspect
>> them for causing all the trouble.
> [...]
> 
> Sounds like Homebrew to me.  If so, or anyway, create a file (before
> updating) which contains something like
> 
> 	 #!/usr/bin/env Rscript --vanilla
> 	 #
> 	 # set the Mirror
> 	 #
> 	 local({
> 		r <- getOption("repos")
> 		 r["CRAN"] <- "https://cloud.r-project.org/"
> 		options(repos = r)
> 	 })
> 	 install.packages(c(
> 		  "lubridate",
> 		  "tidyverse"
> 	 ), dependencies = TRUE)
> 
> 
> or similar and run it if the additional libraries disappear.
> 
> You can fill this with something like
> 
> 	 grep -h library *R \
> 	 |awk -F 'library' '{print $2}' \
> 	 |sed 's/(//g;s/)//g' \
> 	 |sort -u \
> 	 |awk '{print "\"" $1 "\","}'
> 	 |sed '$ s/,$//'
> 
> or in a few lines of the language of your choice generate the whole
> script. And of course refine to your liking with something like
> 
> 	 find ~/R -name '*.R' -exec grep -h library {} ';' \
> 	 ...
> 
> greetings, el
> 
> -- 
> To email me replace 'nospam' with 'el'
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From pd@|gd @end|ng |rom gm@||@com  Thu Jun 10 08:33:14 2021
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 10 Jun 2021 08:33:14 +0200
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <E53EE34A-1943-4DDD-9306-A58CBAE049A9@R-project.org>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
 <s9pvl8$ugc$1@ciao.gmane.io>
 <E53EE34A-1943-4DDD-9306-A58CBAE049A9@R-project.org>
Message-ID: <65C6C451-D059-4E6E-9F9C-498E6B7C98E4@gmail.com>

Yep. (In the first form, you likely want a stoplist for base and recommended packages.)

You can also base it on a listing of the library directory. This has the advantage that you can fairly easily twiddle it to look at older versions after the upgrade.

> .libPaths()
[1] "/Library/Frameworks/R.framework/Versions/4.0/Resources/library"
> list.files("/Library/Frameworks/R.framework/Versions")
[1] "3.0"     "3.1"     "3.2"     "3.3"     "3.4"     "3.5"     "3.6"    
[8] "4.0"     "Current"
> list.files("/Library/Frameworks/R.framework/Versions/3.6/Resources/library")
  [1] "assertthat"            "backports"             "base"                 
  [4] "base64enc"             "BH"                    "bitops"               
  [7] "boot"                  "caTools"               "chron"                
 ...
> setdiff(list.files("/Library/Frameworks/R.framework/Versions/3.6/Resources/library"),rownames(installed.packages()))
[1] "caTools"      "dplyr"        "plogr"        "translations"

(Notice that "translations" is not a package, so  a red herring in this context)

-pd

> On 10 Jun 2021, at 00:26 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> 
> Um, this is actually a lot easier purely with R - if you want to keep track of your favorite packages it is as simple as
> 
> pkgs = rownames(installed.packages())
> writeLines(pkgs, "packages.txt")
> 
> and oyu have a list of all packages that you can edit if desired. if you ever want to re-install then simply
> 
> pkgs = readLines("packages.txt")
> install.packages(pkgs)
> 
> and if you only want to install missing it's simply
> 
> missing.pkgs = pkgs[!pkgs %in% rownames(installed.packages())]
> install.packages(missing.pkgs)
> 
> All trivially done in R. It is always beyond me why people come up with incredibly convoluted solutions to simple things ..
> 
> Cheers,
> Simon
> 
> 
> 
>> On 9/06/2021, at 8:55 PM, Dr Eberhard Lisse <nospam at lisse.NA> wrote:
>> 
>> On 08/06/2021 22:46, moleps islon wrote:
>> [...]
>>> I have no idea why, but my R installation (Mac OS X - Big Sur)
>>> automatically updates causing havoc with my libraries each time.  My
>>> Mac is under administration from the university and their software
>>> center, but they claim it is not their fault - but I still suspect
>>> them for causing all the trouble.
>> [...]
>> 
>> Sounds like Homebrew to me.  If so, or anyway, create a file (before
>> updating) which contains something like
>> 
>> 	 #!/usr/bin/env Rscript --vanilla
>> 	 #
>> 	 # set the Mirror
>> 	 #
>> 	 local({
>> 		r <- getOption("repos")
>> 		 r["CRAN"] <- "https://cloud.r-project.org/"
>> 		options(repos = r)
>> 	 })
>> 	 install.packages(c(
>> 		  "lubridate",
>> 		  "tidyverse"
>> 	 ), dependencies = TRUE)
>> 
>> 
>> or similar and run it if the additional libraries disappear.
>> 
>> You can fill this with something like
>> 
>> 	 grep -h library *R \
>> 	 |awk -F 'library' '{print $2}' \
>> 	 |sed 's/(//g;s/)//g' \
>> 	 |sort -u \
>> 	 |awk '{print "\"" $1 "\","}'
>> 	 |sed '$ s/,$//'
>> 
>> or in a few lines of the language of your choice generate the whole
>> script. And of course refine to your liking with something like
>> 
>> 	 find ~/R -name '*.R' -exec grep -h library {} ';' \
>> 	 ...
>> 
>> greetings, el
>> 
>> -- 
>> To email me replace 'nospam' with 'el'
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From mo|ep@2 @end|ng |rom gm@||@com  Fri Jun 11 00:01:05 2021
From: mo|ep@2 @end|ng |rom gm@||@com (moleps islon)
Date: Fri, 11 Jun 2021 00:01:05 +0200
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <65C6C451-D059-4E6E-9F9C-498E6B7C98E4@gmail.com>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
 <s9pvl8$ugc$1@ciao.gmane.io>
 <E53EE34A-1943-4DDD-9306-A58CBAE049A9@R-project.org>
 <65C6C451-D059-4E6E-9F9C-498E6B7C98E4@gmail.com>
Message-ID: <CACxze+bOxFxAipnh3abc0T+eaj_wK7Eaw8j7hvALLxB56XysDg@mail.gmail.com>

Allright - I?m way beyond believing I could save my packages and ended up
removing everything (including all versions in R.framework dir.) I
reinstalled from CRAN. But there is still something out of the ordinary.
After installing some of them : Some work, others (meaning most) display

"Error: package or namespace load failed for ?tidyr? in dyn.load(file,
DLLpath = DLLpath, ...):
 unable to load shared object
'/Users/Misha/Library/R/4.0/library/glue/libs/glue.so':
  dlopen(/Users/Misha/Library/R/4.0/library/glue/libs/glue.so, 6): Library
not loaded: /usr/local/opt/r/lib/R/lib/libR.dylib
  Referenced from: /Users/Misha/Library/R/4.0/library/glue/libs/glue.so
  Reason: image not found"

- but the library is listed both when I run installed.packages() from R and
when I enter the correct directory from the terminal. Moreover - all
privileges are OK within the directory.

I promise I?ll never try another shortcut in updating R--must have taken me
better part of a week to try and sort this out.




On Thu, Jun 10, 2021 at 8:34 AM peter dalgaard <pdalgd at gmail.com> wrote:

> Yep. (In the first form, you likely want a stoplist for base and
> recommended packages.)
>
> You can also base it on a listing of the library directory. This has the
> advantage that you can fairly easily twiddle it to look at older versions
> after the upgrade.
>
> > .libPaths()
> [1] "/Library/Frameworks/R.framework/Versions/4.0/Resources/library"
> > list.files("/Library/Frameworks/R.framework/Versions")
> [1] "3.0"     "3.1"     "3.2"     "3.3"     "3.4"     "3.5"     "3.6"
> [8] "4.0"     "Current"
> >
> list.files("/Library/Frameworks/R.framework/Versions/3.6/Resources/library")
>   [1] "assertthat"            "backports"             "base"
>
>   [4] "base64enc"             "BH"                    "bitops"
>
>   [7] "boot"                  "caTools"               "chron"
>
>  ...
> >
> setdiff(list.files("/Library/Frameworks/R.framework/Versions/3.6/Resources/library"),rownames(installed.packages()))
> [1] "caTools"      "dplyr"        "plogr"        "translations"
>
> (Notice that "translations" is not a package, so  a red herring in this
> context)
>
> -pd
>
> > On 10 Jun 2021, at 00:26 , Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> >
> >
> > Um, this is actually a lot easier purely with R - if you want to keep
> track of your favorite packages it is as simple as
> >
> > pkgs = rownames(installed.packages())
> > writeLines(pkgs, "packages.txt")
> >
> > and oyu have a list of all packages that you can edit if desired. if you
> ever want to re-install then simply
> >
> > pkgs = readLines("packages.txt")
> > install.packages(pkgs)
> >
> > and if you only want to install missing it's simply
> >
> > missing.pkgs = pkgs[!pkgs %in% rownames(installed.packages())]
> > install.packages(missing.pkgs)
> >
> > All trivially done in R. It is always beyond me why people come up with
> incredibly convoluted solutions to simple things ..
> >
> > Cheers,
> > Simon
> >
> >
> >
> >> On 9/06/2021, at 8:55 PM, Dr Eberhard Lisse <nospam at lisse.NA> wrote:
> >>
> >> On 08/06/2021 22:46, moleps islon wrote:
> >> [...]
> >>> I have no idea why, but my R installation (Mac OS X - Big Sur)
> >>> automatically updates causing havoc with my libraries each time.  My
> >>> Mac is under administration from the university and their software
> >>> center, but they claim it is not their fault - but I still suspect
> >>> them for causing all the trouble.
> >> [...]
> >>
> >> Sounds like Homebrew to me.  If so, or anyway, create a file (before
> >> updating) which contains something like
> >>
> >>       #!/usr/bin/env Rscript --vanilla
> >>       #
> >>       # set the Mirror
> >>       #
> >>       local({
> >>              r <- getOption("repos")
> >>               r["CRAN"] <- "https://cloud.r-project.org/"
> >>              options(repos = r)
> >>       })
> >>       install.packages(c(
> >>                "lubridate",
> >>                "tidyverse"
> >>       ), dependencies = TRUE)
> >>
> >>
> >> or similar and run it if the additional libraries disappear.
> >>
> >> You can fill this with something like
> >>
> >>       grep -h library *R \
> >>       |awk -F 'library' '{print $2}' \
> >>       |sed 's/(//g;s/)//g' \
> >>       |sort -u \
> >>       |awk '{print "\"" $1 "\","}'
> >>       |sed '$ s/,$//'
> >>
> >> or in a few lines of the language of your choice generate the whole
> >> script. And of course refine to your liking with something like
> >>
> >>       find ~/R -name '*.R' -exec grep -h library {} ';' \
> >>       ...
> >>
> >> greetings, el
> >>
> >> --
> >> To email me replace 'nospam' with 'el'
> >>
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Jun 11 00:07:38 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 11 Jun 2021 10:07:38 +1200
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <CACxze+bOxFxAipnh3abc0T+eaj_wK7Eaw8j7hvALLxB56XysDg@mail.gmail.com>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
 <s9pvl8$ugc$1@ciao.gmane.io>
 <E53EE34A-1943-4DDD-9306-A58CBAE049A9@R-project.org>
 <65C6C451-D059-4E6E-9F9C-498E6B7C98E4@gmail.com>
 <CACxze+bOxFxAipnh3abc0T+eaj_wK7Eaw8j7hvALLxB56XysDg@mail.gmail.com>
Message-ID: <A56285F4-39B0-4693-8AB1-009D6D3EC012@R-project.org>


Those errors come from packages that you didn't re-install - anything that uses /usr/local is not from CRAN. So check 
/Users/Misha/Library/R/4.0/library/
Best way is to move the entire tree aside (Eg. rename "library" to "old") to make sure you don't pick up old stuff.

BTW: you can list packages from a tree even if it's not used by R by using lib.loc, so if you renamed the library as above, you can still list all packages in there by using

pkg=rownames(installed.packages(lib.loc="/Users/Misha/Library/R/4.0/old"))

Cheers,
Simon

PS: just an aside, avoid using RStudio to perform upgrades as it has issues when packages that it is using get upgraded, using R is safer.


> On 11/06/2021, at 10:01 AM, moleps islon <moleps2 at gmail.com> wrote:
> 
> Allright - I?m way beyond believing I could save my packages and ended up removing everything (including all versions in R.framework dir.) I reinstalled from CRAN. But there is still something out of the ordinary. After installing some of them : Some work, others (meaning most) display 
> 
> "Error: package or namespace load failed for ?tidyr? in dyn.load(file, DLLpath = DLLpath, ...):
>  unable to load shared object '/Users/Misha/Library/R/4.0/library/glue/libs/glue.so':
>   dlopen(/Users/Misha/Library/R/4.0/library/glue/libs/glue.so, 6): Library not loaded: /usr/local/opt/r/lib/R/lib/libR.dylib
>   Referenced from: /Users/Misha/Library/R/4.0/library/glue/libs/glue.so
>   Reason: image not found"
> 
> - but the library is listed both when I run installed.packages() from R and when I enter the correct directory from the terminal. Moreover - all privileges are OK within the directory. 
> 
> I promise I?ll never try another shortcut in updating R--must have taken me better part of a week to try and sort this out.
> 
> 
> 
> 
> On Thu, Jun 10, 2021 at 8:34 AM peter dalgaard <pdalgd at gmail.com> wrote:
> Yep. (In the first form, you likely want a stoplist for base and recommended packages.)
> 
> You can also base it on a listing of the library directory. This has the advantage that you can fairly easily twiddle it to look at older versions after the upgrade.
> 
> > .libPaths()
> [1] "/Library/Frameworks/R.framework/Versions/4.0/Resources/library"
> > list.files("/Library/Frameworks/R.framework/Versions")
> [1] "3.0"     "3.1"     "3.2"     "3.3"     "3.4"     "3.5"     "3.6"    
> [8] "4.0"     "Current"
> > list.files("/Library/Frameworks/R.framework/Versions/3.6/Resources/library")
>   [1] "assertthat"            "backports"             "base"                 
>   [4] "base64enc"             "BH"                    "bitops"               
>   [7] "boot"                  "caTools"               "chron"                
>  ...
> > setdiff(list.files("/Library/Frameworks/R.framework/Versions/3.6/Resources/library"),rownames(installed.packages()))
> [1] "caTools"      "dplyr"        "plogr"        "translations"
> 
> (Notice that "translations" is not a package, so  a red herring in this context)
> 
> -pd
> 
> > On 10 Jun 2021, at 00:26 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
> > 
> > 
> > Um, this is actually a lot easier purely with R - if you want to keep track of your favorite packages it is as simple as
> > 
> > pkgs = rownames(installed.packages())
> > writeLines(pkgs, "packages.txt")
> > 
> > and oyu have a list of all packages that you can edit if desired. if you ever want to re-install then simply
> > 
> > pkgs = readLines("packages.txt")
> > install.packages(pkgs)
> > 
> > and if you only want to install missing it's simply
> > 
> > missing.pkgs = pkgs[!pkgs %in% rownames(installed.packages())]
> > install.packages(missing.pkgs)
> > 
> > All trivially done in R. It is always beyond me why people come up with incredibly convoluted solutions to simple things ..
> > 
> > Cheers,
> > Simon
> > 
> > 
> > 
> >> On 9/06/2021, at 8:55 PM, Dr Eberhard Lisse <nospam at lisse.NA> wrote:
> >> 
> >> On 08/06/2021 22:46, moleps islon wrote:
> >> [...]
> >>> I have no idea why, but my R installation (Mac OS X - Big Sur)
> >>> automatically updates causing havoc with my libraries each time.  My
> >>> Mac is under administration from the university and their software
> >>> center, but they claim it is not their fault - but I still suspect
> >>> them for causing all the trouble.
> >> [...]
> >> 
> >> Sounds like Homebrew to me.  If so, or anyway, create a file (before
> >> updating) which contains something like
> >> 
> >>       #!/usr/bin/env Rscript --vanilla
> >>       #
> >>       # set the Mirror
> >>       #
> >>       local({
> >>              r <- getOption("repos")
> >>               r["CRAN"] <- "https://cloud.r-project.org/"
> >>              options(repos = r)
> >>       })
> >>       install.packages(c(
> >>                "lubridate",
> >>                "tidyverse"
> >>       ), dependencies = TRUE)
> >> 
> >> 
> >> or similar and run it if the additional libraries disappear.
> >> 
> >> You can fill this with something like
> >> 
> >>       grep -h library *R \
> >>       |awk -F 'library' '{print $2}' \
> >>       |sed 's/(//g;s/)//g' \
> >>       |sort -u \
> >>       |awk '{print "\"" $1 "\","}'
> >>       |sed '$ s/,$//'
> >> 
> >> or in a few lines of the language of your choice generate the whole
> >> script. And of course refine to your liking with something like
> >> 
> >>       find ~/R -name '*.R' -exec grep -h library {} ';' \
> >>       ...
> >> 
> >> greetings, el
> >> 
> >> -- 
> >> To email me replace 'nospam' with 'el'
> >> 
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > 
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ken @end|ng |rom kjbe@th@com@@u  Fri Jun 11 02:44:32 2021
From: ken @end|ng |rom kjbe@th@com@@u (Ken Beath)
Date: Fri, 11 Jun 2021 10:44:32 +1000
Subject: [R-SIG-Mac] Corrupt R installation
In-Reply-To: <A56285F4-39B0-4693-8AB1-009D6D3EC012@R-project.org>
References: <CACxze+aoDVZOuFr-FVgt5MVuhOLmPQMqNFmNO+JQaerd3SJZWw@mail.gmail.com>
 <s9pvl8$ugc$1@ciao.gmane.io>
 <E53EE34A-1943-4DDD-9306-A58CBAE049A9@R-project.org>
 <65C6C451-D059-4E6E-9F9C-498E6B7C98E4@gmail.com>
 <CACxze+bOxFxAipnh3abc0T+eaj_wK7Eaw8j7hvALLxB56XysDg@mail.gmail.com>
 <A56285F4-39B0-4693-8AB1-009D6D3EC012@R-project.org>
Message-ID: <BBB86A23-F46C-441D-AB06-E9173F3CAF49@kjbeath.com.au>

With RStudio I just quit, restart and then update the packages.

Ken

> On 11 Jun 2021, at 8:07 am, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> 
> Those errors come from packages that you didn't re-install - anything that uses /usr/local is not from CRAN. So check 
> /Users/Misha/Library/R/4.0/library/
> Best way is to move the entire tree aside (Eg. rename "library" to "old") to make sure you don't pick up old stuff.
> 
> BTW: you can list packages from a tree even if it's not used by R by using lib.loc, so if you renamed the library as above, you can still list all packages in there by using
> 
> pkg=rownames(installed.packages(lib.loc="/Users/Misha/Library/R/4.0/old"))
> 
> Cheers,
> Simon
> 
> PS: just an aside, avoid using RStudio to perform upgrades as it has issues when packages that it is using get upgraded, using R is safer.
> 
> 
>> On 11/06/2021, at 10:01 AM, moleps islon <moleps2 at gmail.com> wrote:
>> 
>> Allright - I?m way beyond believing I could save my packages and ended up removing everything (including all versions in R.framework dir.) I reinstalled from CRAN. But there is still something out of the ordinary. After installing some of them : Some work, others (meaning most) display 
>> 
>> "Error: package or namespace load failed for ?tidyr? in dyn.load(file, DLLpath = DLLpath, ...):
>> unable to load shared object '/Users/Misha/Library/R/4.0/library/glue/libs/glue.so':
>>  dlopen(/Users/Misha/Library/R/4.0/library/glue/libs/glue.so, 6): Library not loaded: /usr/local/opt/r/lib/R/lib/libR.dylib
>>  Referenced from: /Users/Misha/Library/R/4.0/library/glue/libs/glue.so
>>  Reason: image not found"
>> 
>> - but the library is listed both when I run installed.packages() from R and when I enter the correct directory from the terminal. Moreover - all privileges are OK within the directory. 
>> 
>> I promise I?ll never try another shortcut in updating R--must have taken me better part of a week to try and sort this out.
>> 
>> 
>> 
>> 
>> On Thu, Jun 10, 2021 at 8:34 AM peter dalgaard <pdalgd at gmail.com> wrote:
>> Yep. (In the first form, you likely want a stoplist for base and recommended packages.)
>> 
>> You can also base it on a listing of the library directory. This has the advantage that you can fairly easily twiddle it to look at older versions after the upgrade.
>> 
>>> .libPaths()
>> [1] "/Library/Frameworks/R.framework/Versions/4.0/Resources/library"
>>> list.files("/Library/Frameworks/R.framework/Versions")
>> [1] "3.0"     "3.1"     "3.2"     "3.3"     "3.4"     "3.5"     "3.6"    
>> [8] "4.0"     "Current"
>>> list.files("/Library/Frameworks/R.framework/Versions/3.6/Resources/library")
>>  [1] "assertthat"            "backports"             "base"                 
>>  [4] "base64enc"             "BH"                    "bitops"               
>>  [7] "boot"                  "caTools"               "chron"                
>> ...
>>> setdiff(list.files("/Library/Frameworks/R.framework/Versions/3.6/Resources/library"),rownames(installed.packages()))
>> [1] "caTools"      "dplyr"        "plogr"        "translations"
>> 
>> (Notice that "translations" is not a package, so  a red herring in this context)
>> 
>> -pd
>> 
>>> On 10 Jun 2021, at 00:26 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>> 
>>> Um, this is actually a lot easier purely with R - if you want to keep track of your favorite packages it is as simple as
>>> 
>>> pkgs = rownames(installed.packages())
>>> writeLines(pkgs, "packages.txt")
>>> 
>>> and oyu have a list of all packages that you can edit if desired. if you ever want to re-install then simply
>>> 
>>> pkgs = readLines("packages.txt")
>>> install.packages(pkgs)
>>> 
>>> and if you only want to install missing it's simply
>>> 
>>> missing.pkgs = pkgs[!pkgs %in% rownames(installed.packages())]
>>> install.packages(missing.pkgs)
>>> 
>>> All trivially done in R. It is always beyond me why people come up with incredibly convoluted solutions to simple things ..
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>>> On 9/06/2021, at 8:55 PM, Dr Eberhard Lisse <nospam at lisse.NA> wrote:
>>>> 
>>>> On 08/06/2021 22:46, moleps islon wrote:
>>>> [...]
>>>>> I have no idea why, but my R installation (Mac OS X - Big Sur)
>>>>> automatically updates causing havoc with my libraries each time.  My
>>>>> Mac is under administration from the university and their software
>>>>> center, but they claim it is not their fault - but I still suspect
>>>>> them for causing all the trouble.
>>>> [...]
>>>> 
>>>> Sounds like Homebrew to me.  If so, or anyway, create a file (before
>>>> updating) which contains something like
>>>> 
>>>>      #!/usr/bin/env Rscript --vanilla
>>>>      #
>>>>      # set the Mirror
>>>>      #
>>>>      local({
>>>>             r <- getOption("repos")
>>>>              r["CRAN"] <- "https://cloud.r-project.org/"
>>>>             options(repos = r)
>>>>      })
>>>>      install.packages(c(
>>>>               "lubridate",
>>>>               "tidyverse"
>>>>      ), dependencies = TRUE)
>>>> 
>>>> 
>>>> or similar and run it if the additional libraries disappear.
>>>> 
>>>> You can fill this with something like
>>>> 
>>>>      grep -h library *R \
>>>>      |awk -F 'library' '{print $2}' \
>>>>      |sed 's/(//g;s/)//g' \
>>>>      |sort -u \
>>>>      |awk '{print "\"" $1 "\","}'
>>>>      |sed '$ s/,$//'
>>>> 
>>>> or in a few lines of the language of your choice generate the whole
>>>> script. And of course refine to your liking with something like
>>>> 
>>>>      find ~/R -name '*.R' -exec grep -h library {} ';' \
>>>>      ...
>>>> 
>>>> greetings, el
>>>> 
>>>> -- 
>>>> To email me replace 'nospam' with 'el'
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @@d2007 @end|ng |rom med@corne||@edu  Mon Jun 14 23:43:00 2021
From: @@d2007 @end|ng |rom med@corne||@edu (Ashley Stephen Doane)
Date: Mon, 14 Jun 2021 21:43:00 +0000
Subject: [R-SIG-Mac] BLAS veclib in R 4.1
Message-ID: <MN2PR06MB6128E1CFC1A0F9B876D44503E4319@MN2PR06MB6128.namprd06.prod.outlook.com>

Hi,

I would like to use blas from Apple?s Accelerate framework instead of the reference R blas in R 4.1.0.  The FAQ<https://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Which-BLAS-is-used-and-how-can-it-be-changed_003f> indicates that two Rblas shared libraries are supplied, libRblas.vecLib.dylib which uses vecLib BLAS and libRblas.0.dylib which uses reference BLAS from R.  However, in the current release 4.1 and 4.1-patched binaries, I only see the reference blas.  Does the answer in the FAQ no longer apply?  I am on Mac OS 11.4, and installed in the default location and looking for the blas libraries here: /Library/Frameworks/R.framework/Versions/Current/Resources/lib.  I am looking in the wrong place?

Best,
Ashley

Ashley Stephen Doane, Ph.D.
Postdoctoral Research Associate

Weill Cornell Medicine
Elemento Lab
Institute for Computaional Biomedicine
asd2007 at med.cornell.edu


	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Jun 15 01:33:15 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 15 Jun 2021 11:33:15 +1200
Subject: [R-SIG-Mac] BLAS veclib in R 4.1
In-Reply-To: <MN2PR06MB6128E1CFC1A0F9B876D44503E4319@MN2PR06MB6128.namprd06.prod.outlook.com>
References: <MN2PR06MB6128E1CFC1A0F9B876D44503E4319@MN2PR06MB6128.namprd06.prod.outlook.com>
Message-ID: <4BD453EB-EDD4-46F4-9D76-9334F268B3A8@R-project.org>


Ashley,

parallel BLAS has been know to cause issues in precision, stability (when mixed with other parallel use) and rarely performance. The vecLib stub has not been part of the distribution for some time now, however, you can download it and enable it as follows:

curl -O https://mac.r-project.org/libs-4/libRblas-vecLib-signed.tar.gz 
tar fxzP libRblas-vecLib-signed.tar.gz -C /
cd /Library/Frameworks/R.framework/Resources/lib
mv libRblas.dylib libRblas.0.dylib
ln -s  libRblas.vecLib.dylib libRblas.dylib

You can also choose to use the unsigned version for debugging or if you want to change its id. Use at your own risk as this setup has not been tested.

Cheers,
Simon



> On 15/06/2021, at 9:43 AM, Ashley Stephen Doane via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Hi,
> 
> I would like to use blas from Apple?s Accelerate framework instead of the reference R blas in R 4.1.0.  The FAQ<https://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Which-BLAS-is-used-and-how-can-it-be-changed_003f> indicates that two Rblas shared libraries are supplied, libRblas.vecLib.dylib which uses vecLib BLAS and libRblas.0.dylib which uses reference BLAS from R.  However, in the current release 4.1 and 4.1-patched binaries, I only see the reference blas.  Does the answer in the FAQ no longer apply?  I am on Mac OS 11.4, and installed in the default location and looking for the blas libraries here: /Library/Frameworks/R.framework/Versions/Current/Resources/lib.  I am looking in the wrong place?
> 
> Best,
> Ashley
> 
> Ashley Stephen Doane, Ph.D.
> Postdoctoral Research Associate
> 
> Weill Cornell Medicine
> Elemento Lab
> Institute for Computaional Biomedicine
> asd2007 at med.cornell.edu
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


