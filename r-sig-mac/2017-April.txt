From bhh at xs4all.nl  Fri Apr  7 11:11:10 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Fri, 7 Apr 2017 11:11:10 +0200
Subject: [R-SIG-Mac] Problem with Rcpp on R-3.4 beta (r72492)
Message-ID: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>


Hi,

I have downloaded and installed R from R-3.4-r72492-branch-el-capitan.pkg.
My OS: OS X El Capitan (10.11.6)

My packages and all additional tests of these are working correctly.

I can install Rcpp.
Packages requiring Rcpp however don't seem to install or run.


Running otool -L on /Library/Frameworks/R.framework/Versions/3.4/Resources/library/Rcpp/libs/Rcpp.so
gives

Rcpp.so:
	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
	/usr/local/clang4/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)


I don't have  /usr/local/clang4/lib/libc++.1.dylib.
I wouldn't know where to get it from. AFAIK The macOS Commandline Tools do not install stuff in /usr/local.
If this isn't a mishap: where do we get the necessary libc++.1.dylib from?

Berend Hasselman


From bhh at xs4all.nl  Sat Apr  8 11:18:21 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Sat, 8 Apr 2017 11:18:21 +0200
Subject: [R-SIG-Mac] More problems with R-3.4.0 beta (R version 3.4.0 beta
	(2017-04-07 r72496)
Message-ID: <29C07AED-1818-4D12-A65F-E787FDCA9DCA@xs4all.nl>


Hi,

My OS: OS X El Capitan (10.11.6)

I installed R version 3.4.0 beta (2017-04-07 r72496) today  from the package  R-3.4-branch-el-capitan.pkg obtained from http://r.research.att.com.

There are several problems with the beta version of R 3.4.0 on macOS.

Problem 1
------------
There appears to be "problem" with R.app 1.70. See this copy from a small session in R.app (first time)
> history()
Error in .External2(C_savehistory, file) : 
  'savehistory' is not currently implemented
> ?history
starting httpd help server ... done
2017-04-08 09:03:40.230 R[2137:30477] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.
> ?mean

Nothing but blank/empty help pages display.

And R.app's history file was zeroed.

Problem 2
---------
I restored R.app's history file (from a Time Machine backup) to it's correct place.

Second time startup of R.app 1.70. And then I issued a history() call. Result

> ?history
starting httpd help server ... done
2017-04-08 09:26:42.001 R[3017:38891] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.


Third time starting R.app did not zero out the history file.

Problem 3
----------
The problem I mentioned yesterday about Rcpp is still there; it appears when I run R in a Terminal.
But when I do library(Rcpp) in R.app no error message is issued. See https://stat.ethz.ch/pipermail/r-sig-mac/2017-April/012287.html.


Berend


From bhh at xs4all.nl  Sat Apr  8 21:45:47 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Sat, 8 Apr 2017 21:45:47 +0200
Subject: [R-SIG-Mac] Fwd: More problems with R-3.4.0 beta (R version 3.4.0
	beta (2017-04-07 r72496)
References: <AA70B78B-2C13-4421-88E1-F21873D5E7DC@contoso.com>
Message-ID: <E3379777-1648-4316-ADE8-4764822845A5@xs4all.nl>


Forwarding this message from Rodney Sparapani about my post "More problems ...".

Berend Hasselman


> Begin forwarded message:
> 
> From: "Sparapani, Rodney" <rsparapa at mcw.edu>
> Subject: [R-SIG-Mac] More problems with R-3.4.0 beta (R version 3.4.0 beta (2017-04-07 r72496)
> Date: 8 April 2017 at 21:16:56 GMT+2
> To: "bhh at xs4all.nl" <bhh at xs4all.nl>
> 
> FYI: I?m on Sierra.  But, I see issues with the latest beta too.
> No help pages for example.  Whereas the alpha
> (R version 3.4.0 alpha (2017-04-01 r72465)
> seemed to work fine.
> 
> --
> Rodney Sparapani, PhD
> Assistant Professor of Biostatistics
> Medical College of Wisconsin, Milwaukee


From hankin.robin at gmail.com  Mon Apr 10 23:12:19 2017
From: hankin.robin at gmail.com (robin hankin)
Date: Tue, 11 Apr 2017 09:12:19 +1200
Subject: [R-SIG-Mac] R CMD build problems
Message-ID: <CAHHjBM4kmk213HZJ05C5=PqL94m5c-LS1TiowC9-mwQuwA5WTw@mail.gmail.com>

Hi, macosx 10.10.5, R-3.3.3.

I am having difficulty building one of my packages:

trunk % R --version
R version 3.3.3 (2017-03-06) -- "Another Canoe"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin14.5.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under the terms of the
GNU General Public License versions 2 or 3.
For more information about these matters see
http://www.gnu.org/licenses/.

trunk % R CMD build ./hyperdirichlet
* checking for file ?./hyperdirichlet/DESCRIPTION? ... OK
* preparing ?hyperdirichlet?:
* checking DESCRIPTION meta-information ... OK
* installing the package to build vignettes
      -----------------------------------
* installing *source* package ?hyperdirichlet? ...
** R
** data
** inst
** preparing package for lazy loading

 *** caught segfault ***
address 0x18, cause 'memory not mapped'

Traceback:
 1: dyn.load(file, DLLpath = DLLpath, ...)
 2: library.dynam(lib, package, package.lib)
 3: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck =
vI[[j]])
 4: asNamespace(ns)
 5: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc,
.libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
 6: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck =
vI[[j]])
 7: asNamespace(ns)
 8: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc,
.libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
 9: loadNamespace(package, lib.loc, keep.source, partial = TRUE)
10: withCallingHandlers(expr, packageStartupMessage = function(c)
invokeRestart("muffleMessage"))
11: suppressPackageStartupMessages(loadNamespace(package, lib.loc,
keep.source, partial = TRUE))
12: code2LazyLoadDB(package, lib.loc = lib.loc, keep.source =
keep.source,     compress = compress)
13: makeLazyLoading(pkg_name, lib, keep.source = keep.source)
14: doTryCatch(return(expr), name, parentenv, handler)
15: tryCatchOne(expr, names, parentenv, handlers[[1L]])
16: tryCatchList(expr, classes, parentenv, handlers)
17: tryCatch(expr, error = function(e) {    call <- conditionCall(e)    if
(!is.null(call)) {        if (identical(call[[1L]],
quote(doTryCatch)))             call <- sys.call(-4L)        dcall <-
deparse(call)[1L]        prefix <- paste("Error in", dcall, ": ")
LONG <- 75L        msg <- conditionMessage(e)        sm <- strsplit(msg,
"\n")[[1L]]        w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type
= "w")        if (is.na(w))             w <- 14L + nchar(dcall, type = "b")
+ nchar(sm[1L],                 type = "b")        if (w >
LONG)             prefix <- paste0(prefix, "\n  ")    }    else prefix <-
"Error : "    msg <- paste0(prefix, conditionMessage(e), "\n")
.Internal(seterrmessage(msg[1L]))    if (!silent &&
identical(getOption("show.error.messages"),         TRUE)) {
cat(msg, file = stderr())        .Internal(printDeferredWarnings())    }
invisible(structure(msg, class = "try-error", condition = e))})


Can anyone advise?



-- 
Robin Hankin
Neutral theorist
hankin.robin at gmail.com

	[[alternative HTML version deleted]]


From bgould at msu.edu  Tue Apr 11 20:43:15 2017
From: bgould at msu.edu (Billie Gould)
Date: Tue, 11 Apr 2017 14:43:15 -0400
Subject: [R-SIG-Mac] OSX Sierra, R crash when loading library WGCNA
Message-ID: <9F51EC45-5279-4C3D-8C3C-97E6637E71A7@msu.edu>

Hello fellow Macs,
I?m hoping to ask your help. I?m an R user with MacOSX Sierra (v10.12.3) and I am encountering R (v3.3.3) crash problems loading a specific package for genetic analysis: WGCNA (https://cran.r-project.org/web/packages/WGCNA/index.html <https://cran.r-project.org/web/packages/WGCNA/index.html>). I?ve contacted the authors of the package and they suggested someone here might know something. 
Basically the package installs fine, but loading the library causes immediate crash with the following error output: 
>
>> library("WGCNA")
> Loading required package: dynamicTreeCut
> Loading required package: fastcluster
> 
> Attaching package: ?fastcluster?
> 
> The following object is masked from ?package:stats?:
> 
>    hclust
> 
> 
> *** caught segfault ***
> address 0x18, cause 'memory not mapped'
> 
> Traceback:
> 1: dyn.load(file, DLLpath = DLLpath, ...)
> 2: library.dynam(lib, package, package.lib)
> 3: loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
> 4: namespaceImport(ns, loadNamespace(i, c(lib.loc, .libPaths()),
> versionCheck = vI[[i]]), from = package)
> 5: loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
> 6: namespaceImport(ns, loadNamespace(i, c(lib.loc, .libPaths()),
> versionCheck = vI[[i]]), from = package)
> 7: loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
> 8: namespaceImport(ns, loadNamespace(i, c(lib.loc, .libPaths()),
> versionCheck = vI[[i]]), from = package)
> 9: loadNamespace(package, lib.loc)
> 10: doTryCatch(return(expr), name, parentenv, handler)
> 11: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 12: tryCatchList(expr, classes, parentenv, handlers)
> 13: tryCatch(expr, error = function(e) {    call <- conditionCall(e)    if
> (!is.null(call)) {        if (identical(call[[1L]], quote(doTryCatch)))
> call <- sys.call(-4L)        dcall <- deparse(call)[1L]        prefix <-
> paste("Error in", dcall, ": ")        LONG <- 75L        msg <-
> conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <- 14L +
> nchar(dcall, type = "w") + nchar(sm[1L], type = "w")        if (is.na(w))
> w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],                 type =
> "b")        if (w > LONG)             prefix <- paste0(prefix, "\n  ")    }
> else prefix <- "Error : "    msg <- paste0(prefix, conditionMessage(e),
> "\n")    .Internal(seterrmessage(msg[1L]))    if (!silent &&
> identical(getOption("show.error.messages"),         TRUE)) {        cat(msg,
> file = stderr())        .Internal(printDeferredWarnings())    }
> invisible(structure(msg, class = "try-error", condition = e))})
> 14: try({    attr(package, "LibPath") <- which.lib.loc    ns <-
> loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
> deps)})
> 15: library("WGCNA?)

Is anyone here perhaps familiar with this issue or something similar on OSX Sierra? 
Any suggestions would be much appreciated. 

Thanks very much,

Billie


	[[alternative HTML version deleted]]


From brandon.hurr at gmail.com  Tue Apr 11 20:58:27 2017
From: brandon.hurr at gmail.com (Brandon Hurr)
Date: Tue, 11 Apr 2017 11:58:27 -0700
Subject: [R-SIG-Mac] OSX Sierra, R crash when loading library WGCNA
In-Reply-To: <9F51EC45-5279-4C3D-8C3C-97E6637E71A7@msu.edu>
References: <9F51EC45-5279-4C3D-8C3C-97E6637E71A7@msu.edu>
Message-ID: <CAG2OMvtkBQ1VL+hp1Su61LPwZyiSyEMDtUSSsvRjCpn43e5ugg@mail.gmail.com>

Billie,

I'm not having issues loading WGCNA on my iMac. macOS Sierra 10.12.4 (16E195).

Entire session below:


R version 3.3.3 (2017-03-06) -- "Another Canoe"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin13.4.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[R.app GUI 1.69 (7328) x86_64-apple-darwin13.4.0]

[History restored from /Users/brandonhurr/.Rapp.history]

> library(WGCNA)
Loading required package: dynamicTreeCut
Loading required package: fastcluster

Attaching package: ?fastcluster?

The following object is masked from ?package:stats?:

    hclust

==========================================================================
*
*  Package WGCNA 1.51 loaded.
*
*    Important note: It appears that your system supports multi-threading,
*    but it is not enabled within WGCNA in R.
*    To allow multi-threading within WGCNA with all available cores, use
*
*          allowWGCNAThreads()
*
*    within R. Use disableWGCNAThreads() to disable threading if necessary.
*    Alternatively, set the following environment variable on your system:
*
*          ALLOW_WGCNA_THREADS=<number_of_processors>
*
*    for example
*
*          ALLOW_WGCNA_THREADS=8
*
*    To set the environment variable in linux bash shell, type
*
*           export ALLOW_WGCNA_THREADS=8
*
*     before running R. Other operating systems or shells will
*     have a similar command to achieve the same aim.
*
==========================================================================



Attaching package: ?WGCNA?

The following object is masked from ?package:stats?:

    cor

> devtools::session_info()
Session info ----------------------------------------------------------------------
 setting  value
 version  R version 3.3.3 (2017-03-06)
 system   x86_64, darwin13.4.0
 ui       AQUA
 language (EN)
 collate  en_US.UTF-8
 tz       America/Los_Angeles
 date     2017-04-11

Packages --------------------------------------------------------------------------
 package        * version     date       source
 acepack          1.3-3.3     2014-11-24 CRAN (R 3.3.0)
 AnnotationDbi    1.34.2      2016-05-16 Bioconductor
 Biobase          2.32.0      2016-05-04 Bioconductor
 BiocGenerics     0.18.0      2016-05-04 Bioconductor
 cluster          2.0.5       2016-10-08 CRAN (R 3.3.3)
 codetools        0.2-15      2016-10-05 CRAN (R 3.3.3)
 colorspace       1.3-2       2016-12-14 cran (@1.3-2)
 data.table       1.9.7       2016-05-10 Github (Rdatatable/data.table at be96b6f)
 DBI              0.6-1       2017-04-01 cran (@0.6-1)
 devtools         1.12.0.9000 2017-03-24 Github (hadley/devtools at d8ab190)
 digest           0.6.12      2017-01-27 cran (@0.6.12)
 doParallel       1.0.10      2015-10-14 CRAN (R 3.3.0)
 dynamicTreeCut * 1.63-1      2016-03-11 CRAN (R 3.3.0)
 fastcluster    * 1.1.20      2016-03-31 CRAN (R 3.3.0)
 foreach          1.4.3       2015-10-13 CRAN (R 3.3.0)
 foreign          0.8-67      2016-09-13 CRAN (R 3.3.3)
 Formula          1.2-1       2015-04-07 CRAN (R 3.3.0)
 ggplot2          2.2.1.9000  2017-04-10 Github (tidyverse/ggplot2 at f4398b6)
 GO.db            3.3.0       2016-05-19 Bioconductor
 gridExtra        2.2.1       2016-02-29 CRAN (R 3.3.0)
 gtable           0.2.0       2016-02-26 CRAN (R 3.3.0)
 Hmisc            3.17-4      2016-05-02 CRAN (R 3.3.0)
 impute           1.46.0      2016-05-04 Bioconductor
 IRanges          2.6.0       2016-05-04 Bioconductor
 iterators        1.0.8       2015-10-13 CRAN (R 3.3.0)
 lattice          0.20-34     2016-09-06 CRAN (R 3.3.3)
 latticeExtra     0.6-28      2016-02-09 CRAN (R 3.3.0)
 lazyeval         0.2.0       2016-06-12 CRAN (R 3.3.0)
 Matrix           1.2-8       2017-01-20 CRAN (R 3.3.3)
 matrixStats      0.50.2      2016-04-24 CRAN (R 3.3.0)
 memoise          1.0.0       2016-01-29 CRAN (R 3.3.0)
 munsell          0.4.3       2016-02-13 CRAN (R 3.3.0)
 nnet             7.3-12      2016-02-02 CRAN (R 3.3.3)
 pkgbuild         0.0.0.9000  2017-03-24 Github (r-pkgs/pkgbuild at 5ed87aa)
 pkgload          0.0.0.9000  2017-03-24 Github (r-pkgs/pkgload at 3a96cf2)
 plyr             1.8.4       2016-06-08 CRAN (R 3.3.0)
 preprocessCore   1.34.0      2016-05-04 Bioconductor
 RColorBrewer     1.1-2       2014-12-07 CRAN (R 3.3.0)
 Rcpp             0.12.10     2017-03-19 cran (@0.12.10)
 rpart            4.1-10      2015-06-29 CRAN (R 3.3.3)
 RSQLite          1.0.0       2014-10-25 CRAN (R 3.3.0)
 S4Vectors        0.10.0      2016-05-04 Bioconductor
 scales           0.4.1       2016-11-09 CRAN (R 3.3.2)
 survival         2.40-1      2016-10-30 CRAN (R 3.3.3)
 tibble           1.3.0       2017-04-01 cran (@1.3.0)
 WGCNA          * 1.51        2016-03-15 CRAN (R 3.3.0)
 withr            1.0.2       2016-06-20 CRAN (R 3.3.0)

On Tue, Apr 11, 2017 at 11:43 AM, Billie Gould <bgould at msu.edu> wrote:
> Hello fellow Macs,
> I?m hoping to ask your help. I?m an R user with MacOSX Sierra (v10.12.3) and I am encountering R (v3.3.3) crash problems loading a specific package for genetic analysis: WGCNA (https://cran.r-project.org/web/packages/WGCNA/index.html <https://cran.r-project.org/web/packages/WGCNA/index.html>). I?ve contacted the authors of the package and they suggested someone here might know something.
> Basically the package installs fine, but loading the library causes immediate crash with the following error output:
>>
>>> library("WGCNA")
>> Loading required package: dynamicTreeCut
>> Loading required package: fastcluster
>>
>> Attaching package: ?fastcluster?
>>
>> The following object is masked from ?package:stats?:
>>
>>    hclust
>>
>>
>> *** caught segfault ***
>> address 0x18, cause 'memory not mapped'
>>
>> Traceback:
>> 1: dyn.load(file, DLLpath = DLLpath, ...)
>> 2: library.dynam(lib, package, package.lib)
>> 3: loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
>> 4: namespaceImport(ns, loadNamespace(i, c(lib.loc, .libPaths()),
>> versionCheck = vI[[i]]), from = package)
>> 5: loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
>> 6: namespaceImport(ns, loadNamespace(i, c(lib.loc, .libPaths()),
>> versionCheck = vI[[i]]), from = package)
>> 7: loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
>> 8: namespaceImport(ns, loadNamespace(i, c(lib.loc, .libPaths()),
>> versionCheck = vI[[i]]), from = package)
>> 9: loadNamespace(package, lib.loc)
>> 10: doTryCatch(return(expr), name, parentenv, handler)
>> 11: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>> 12: tryCatchList(expr, classes, parentenv, handlers)
>> 13: tryCatch(expr, error = function(e) {    call <- conditionCall(e)    if
>> (!is.null(call)) {        if (identical(call[[1L]], quote(doTryCatch)))
>> call <- sys.call(-4L)        dcall <- deparse(call)[1L]        prefix <-
>> paste("Error in", dcall, ": ")        LONG <- 75L        msg <-
>> conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <- 14L +
>> nchar(dcall, type = "w") + nchar(sm[1L], type = "w")        if (is.na(w))
>> w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],                 type =
>> "b")        if (w > LONG)             prefix <- paste0(prefix, "\n  ")    }
>> else prefix <- "Error : "    msg <- paste0(prefix, conditionMessage(e),
>> "\n")    .Internal(seterrmessage(msg[1L]))    if (!silent &&
>> identical(getOption("show.error.messages"),         TRUE)) {        cat(msg,
>> file = stderr())        .Internal(printDeferredWarnings())    }
>> invisible(structure(msg, class = "try-error", condition = e))})
>> 14: try({    attr(package, "LibPath") <- which.lib.loc    ns <-
>> loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
>> deps)})
>> 15: library("WGCNA?)
>
> Is anyone here perhaps familiar with this issue or something similar on OSX Sierra?
> Any suggestions would be much appreciated.
>
> Thanks very much,
>
> Billie
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From M.Hagens at uu.nl  Wed Apr 12 09:08:04 2017
From: M.Hagens at uu.nl (Hagens, M. (Mathilde))
Date: Wed, 12 Apr 2017 07:08:04 +0000
Subject: [R-SIG-Mac] Problem with loading compiled code into R
Message-ID: <4AA361BB-49D4-42AF-B1A1-96763580FFBD@uu.nl>

Dear all,

I?ve asked this question on the R-sig-dyn-mod mailing list before and was suggested to post it here as well, so apologies to those of you who?ve seen it before.
I?m using compiled code (written in C) in combination with the deSolve package to run a one-dimensional reactive transport model in R. On a server I use running on Linux this works flawlessly, but on a MacBook Pro (macOS 10.12.4) I have problems loading the compiled code into R (version 3.3.3, deSolve 1.14).

The output I get when compiling the code in R using
system("R CMD SHLIB Model.c?)
is:
clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG  -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2 -c Model.c -o Model.o
clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o Model.so Model.o -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation

However, when I try to load the resulting shared object via
dyn.load(paste("Model", .Platform$dynlib.ext, sep = ""))
I get:
Error in dyn.load(paste("Model", .Platform$dynlib.ext, sep = "")) :
 unable to load shared object '/Users/mathilde/Model.so':
 dlopen(/Users/mathilde/Model.so, 6): Symbol not found: _dH_dt
 Referenced from: /Users/mathilde/Model.so
 Expected in: flat namespace
in /Users/mathilde/Model.so

The shared object created after compiling seems to look fine. Also, I tried compiling directly from the Terminal, but that doesn?t make a difference. Strangely, when I ran this model on a Mac in the past (~1 year ago) it also worked without problems, leaving me wondering whether it may be due to an R / macOS update. However, switching to an older R version (2.15.2) didn?t solve the issue either. Has anyone experienced similar behaviour and/or knows of a possible solution? I have installed R via the package on one of the CRAN mirrors, and know therefore that it should be compiled using clang, the same compiler I use for compiling the C code. But I am still learning about the compiler flags, perhaps there is something that needs to be changed here?

Best wishes,
Mathilde


From rainer_krug at icloud.com  Wed Apr 12 09:18:41 2017
From: rainer_krug at icloud.com (Rainer Krug)
Date: Wed, 12 Apr 2017 09:18:41 +0200
Subject: [R-SIG-Mac] Problem with loading compiled code into R
In-Reply-To: <4AA361BB-49D4-42AF-B1A1-96763580FFBD@uu.nl>
References: <4AA361BB-49D4-42AF-B1A1-96763580FFBD@uu.nl>
Message-ID: <AC4D2F4F-0145-4BE1-809A-8DDCE6EF1477@icloud.com>

Hi

I might be completely off, but might it be a problem if R and your library are build using different compiler / versions of compilers? 

If this could be the case, you could try to install R from source using home-brew and than compile your library using the same compiler and versions for R.

Cheers,


Rainer


> On 12 Apr 2017, at 09:08, Hagens, M. (Mathilde) <M.Hagens at uu.nl> wrote:
> 
> Dear all,
> 
> I?ve asked this question on the R-sig-dyn-mod mailing list before and was suggested to post it here as well, so apologies to those of you who?ve seen it before.
> I?m using compiled code (written in C) in combination with the deSolve package to run a one-dimensional reactive transport model in R. On a server I use running on Linux this works flawlessly, but on a MacBook Pro (macOS 10.12.4) I have problems loading the compiled code into R (version 3.3.3, deSolve 1.14).
> 
> The output I get when compiling the code in R using
> system("R CMD SHLIB Model.c?)
> is:
> clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG  -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2 -c Model.c -o Model.o
> clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o Model.so Model.o -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
> 
> However, when I try to load the resulting shared object via
> dyn.load(paste("Model", .Platform$dynlib.ext, sep = ""))
> I get:
> Error in dyn.load(paste("Model", .Platform$dynlib.ext, sep = "")) :
> unable to load shared object '/Users/mathilde/Model.so':
> dlopen(/Users/mathilde/Model.so, 6): Symbol not found: _dH_dt
> Referenced from: /Users/mathilde/Model.so
> Expected in: flat namespace
> in /Users/mathilde/Model.so
> 
> The shared object created after compiling seems to look fine. Also, I tried compiling directly from the Terminal, but that doesn?t make a difference. Strangely, when I ran this model on a Mac in the past (~1 year ago) it also worked without problems, leaving me wondering whether it may be due to an R / macOS update. However, switching to an older R version (2.15.2) didn?t solve the issue either. Has anyone experienced similar behaviour and/or knows of a possible solution? I have installed R via the package on one of the CRAN mirrors, and know therefore that it should be compiled using clang, the same compiler I use for compiling the C code. But I am still learning about the compiler flags, perhaps there is something that needs to be changed here?
> 
> Best wishes,
> Mathilde
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From thomas.obadia at gmail.com  Wed Apr 12 10:30:02 2017
From: thomas.obadia at gmail.com (Thomas Obadia)
Date: Wed, 12 Apr 2017 10:30:02 +0200
Subject: [R-SIG-Mac] R.app fails to run under non-Sierra OSX versions
Message-ID: <CALQCL_8JE_9vFdpTXJygtc2m4yLfKXAev8xmN+gdcH_L+7SOyQ@mail.gmail.com>

Dear R team,

I've recently come across a strange bug which seems undocumented and
contradicts the INSTALL instructions from the sources of R-GUI.

Running El Capitan, I usually install all my distributions using Homebrew
and keep everything up-to-date (except for the OS which is not Sierra yet).
The current R.app 1.6.8 fails to run on El Capitan, with a warning "You're
running 10.11.6. This app requires 10.12".

My first thought was a Homebrew mix-up in the binary distribution, but the
Github issue pointed to somthing else (see:
https://github.com/Homebrew/homebrew-science/issues/5411#issuecomment-293030482).
The binary they build is using -target R -configuration Release

The install instructions from Mac-GUI-1.68.tar.gz seem to be out of date as
they still detail SnowLeopard64 build which seem not included anymore. Is
there any reason why a normal build of R.app would not run on OSX versions
other than Sierra ?

All the best,
Thomas

	[[alternative HTML version deleted]]


From tmrsg11 at gmail.com  Fri Apr 14 15:58:52 2017
From: tmrsg11 at gmail.com (C W)
Date: Fri, 14 Apr 2017 09:58:52 -0400
Subject: [R-SIG-Mac] R.app crashes at startup on MacOS Sierra
In-Reply-To: <507c8944-79cd-4c65-8bca-4d6cf8431963@googlegroups.com>
References: <CAJCuCMOiwu00eziKLxcGUWt5BfVYq-06XyDn6JNr4W2_wnbuxA@mail.gmail.com>
 <68039c86-5428-4049-b84b-da567998770b@googlegroups.com>
 <6FC4064C-792C-458B-AFAB-789DD4236E27@kjbeath.com.au>
 <507c8944-79cd-4c65-8bca-4d6cf8431963@googlegroups.com>
Message-ID: <CAE2FW2mXp=6NVJ9jN9EBDGeSDj4PjRRDhq_QQdKdqPQLmnhh_w@mail.gmail.com>

Hi everyone,

I am having the same problem as reported above. I have a few try.

This message showed up


?

2017-04-14 09:52:56.964 R[21302:286348] -[_NSViewAuxiliary
setRuleThickness:]: unrecognized selector sent to instance 0x7fdadeef26f0
2017-04-14 09:52:56.976 R[21302:286348] *** RController: caught ObjC
exception while processing system events. Update to the latest GUI version
and consider reporting this properly (see FAQ) if it persists and is not
known.
*** reason: -[_NSViewAuxiliary setRuleThickness:]: unrecognized selector
sent to instance 0x7fdadeef26f0
*** name: NSInvalidArgumentException, info: (null)
*** Version: R 3.3.2 (71607) R.app R 3.3.2 GUI 1.68 Mavericks build
Consider saving your work soon in case this develops into a problem.


Thank you!

On Sun, Mar 5, 2017 at 12:00 PM, David Diez <david.m.diez at gmail.com> wrote:

> I reinstalled macOS yesterday as well as R and MacTeX, and everything is
> working again!
> Killed half a day, but I'm excited to have things back :)
> The reinstallation instructions I followed are at
> https://support.apple.com/kb/PH25649?locale=en_US
>
> *I'm curious what machines others who are encountering issues are using.*
> Here are the two machines where I encountered problems:
>
>    - My personal machine: Macbook Pro Retina Mid 2014 (13-inch). Fixed
>    after macOS Sierra reinstall!
>    - My work machine: Macbook Pro Retina Mid 2014 (15-inch). I haven't
>    tried reinstalling macOS Sierra on this machine.
>
>
> My suspicion at this point is that the macOS Sierra update is at fault:
>
>    - Reinstalling programs before the full macOS reinstall did not fix
>    the problems.
>    - Going nuclear and reinstalling macOS, then reinstalling the same
>    programs did solve the problems.
>    - I have not changed any of the files I was using or changed what
>    programs I use.
>
>
> For the record, here are the exact programs where I was running into
> issues:
>
>    - Regular R installation and R GUI from CRAN. I ran into problems when
>    I'd open an .R text file when R was not already open.
>    - MacTeX installation and the TeXShop editor. The errors I encountered
>    were when using BIbTeX in particular -- typesetting using BibTeX worked
>    fine, but the files it generated would cause a failure when going back to
>    the regular LaTeX typesetting.
>
> Given that none of my colleagues seem to have been hit with the issue,
> guessing that only a small minority of machines are affected.
>
>
>
> On Friday, March 3, 2017 at 5:27:09 PM UTC-8, Ken Beath wrote:
>>
>> I?ve had no trouble with using RStudio so it is definitely a GUI problem.
>> I?ve also had no trouble with TeXShop so I assume that whatever LaTex
>> editor you are using is the problem.
>>
>> Ken
>>
>> > On 1 Mar 2017, at 4:42 pm, David Diez <david.... at gmail.com> wrote:
>> >
>> > Anyone have any luck with figuring this out? I have the same problem on
>> both my personal and work computers immediately after installing Sierra.
>> >
>> > I'm not sure if it's related, but LaTeX has also been giving me issues
>> ever since I installed Sierra on my personal machine.
>> >
>> > I'm close to completely wiping my personal machine to try to fix the R
>> and LaTeX issues. If I do, I'll report back on if it fixes the issue.
>> >
>> > Thanks,
>> > David
>> >
>> >
>> > On Sunday, February 5, 2017 at 1:37:10 AM UTC-8, Patricia Gouzien wrote:
>> > Hello,
>> >
>> > I am experiencing the following issues:
>> > R version 3.3.2 (2016-10-31) -- "Sincere Pumpkin Patch"
>> > Copyright (C) 2016 The R Foundation for Statistical Computing
>> > Platform: x86_64-apple-darwin13.4.0 (64-bit)
>> >
>> > R is free software and comes with ABSOLUTELY NO WARRANTY.
>> > You are welcome to redistribute it under certain conditions.
>> > Type 'license()' or 'licence()' for distribution details.
>> >
>> >   Natural language support but running in an English locale
>> >
>> > R is a collaborative project with many contributors.
>> > Type 'contributors()' for more information and
>> > 'citation()' on how to cite R or R packages in publications.
>> >
>> > Type 'demo()' for some demos, 'help()' for on-line help, or
>> > 'help.start()' for an HTML browser interface to help.
>> > Type 'q()' to quit R.
>> >
>> > [R.app GUI 1.68 (7288) x86_64-apple-darwin13.4.0]
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> > Selection:
>> >
>> > R crashes. Any help on this is greatly appreciated.
>> > Sierra 10.12.2
>> >
>> > Thanks so much!
>> > Pat
>> > _______________________________________________
>> > R-SIG-Mac mailing list
>> > R-SI... at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SI... at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170414/f945a002/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screen Shot 2017-04-14 at 9.57.41 AM.png
Type: image/png
Size: 93340 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170414/f945a002/attachment-0001.png>

From simon.urbanek at r-project.org  Tue Apr 18 16:01:51 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 18 Apr 2017 10:01:51 -0400
Subject: [R-SIG-Mac] R.app crashes at startup on MacOS Sierra
In-Reply-To: <CAE2FW2mXp=6NVJ9jN9EBDGeSDj4PjRRDhq_QQdKdqPQLmnhh_w@mail.gmail.com>
References: <CAJCuCMOiwu00eziKLxcGUWt5BfVYq-06XyDn6JNr4W2_wnbuxA@mail.gmail.com>
 <68039c86-5428-4049-b84b-da567998770b@googlegroups.com>
 <6FC4064C-792C-458B-AFAB-789DD4236E27@kjbeath.com.au>
 <507c8944-79cd-4c65-8bca-4d6cf8431963@googlegroups.com>
 <CAE2FW2mXp=6NVJ9jN9EBDGeSDj4PjRRDhq_QQdKdqPQLmnhh_w@mail.gmail.com>
Message-ID: <36C1BD43-9994-4F23-A20E-E512B7475D50@r-project.org>

This has been fixed in more recent R versions, please upgrade you R.

Cheers,
Simon


> On Apr 14, 2017, at 9:58 AM, C W <tmrsg11 at gmail.com> wrote:
> 
> Hi everyone,
> 
> I am having the same problem as reported above. I have a few try.
> 
> This message showed up
> 
> <Screen Shot 2017-04-14 at 9.57.41 AM.png>
> ?
> 
> 2017-04-14 09:52:56.964 R[21302:286348] -[_NSViewAuxiliary setRuleThickness:]: unrecognized selector sent to instance 0x7fdadeef26f0
> 2017-04-14 09:52:56.976 R[21302:286348] *** RController: caught ObjC exception while processing system events. Update to the latest GUI version and consider reporting this properly (see FAQ) if it persists and is not known. 
> *** reason: -[_NSViewAuxiliary setRuleThickness:]: unrecognized selector sent to instance 0x7fdadeef26f0
> *** name: NSInvalidArgumentException, info: (null)
> *** Version: R 3.3.2 (71607) R.app R 3.3.2 GUI 1.68 Mavericks build
> Consider saving your work soon in case this develops into a problem.
> 
> 
> Thank you!
> 
> On Sun, Mar 5, 2017 at 12:00 PM, David Diez <david.m.diez at gmail.com> wrote:
> I reinstalled macOS yesterday as well as R and MacTeX, and everything is working again!
> Killed half a day, but I'm excited to have things back :)
> The reinstallation instructions I followed are at
> https://support.apple.com/kb/PH25649?locale=en_US
> 
> I'm curious what machines others who are encountering issues are using. Here are the two machines where I encountered problems:
> 	? My personal machine: Macbook Pro Retina Mid 2014 (13-inch). Fixed after macOS Sierra reinstall!
> 	? My work machine: Macbook Pro Retina Mid 2014 (15-inch). I haven't tried reinstalling macOS Sierra on this machine.
> 
> My suspicion at this point is that the macOS Sierra update is at fault:
> 	? Reinstalling programs before the full macOS reinstall did not fix the problems.
> 	? Going nuclear and reinstalling macOS, then reinstalling the same programs did solve the problems.
> 	? I have not changed any of the files I was using or changed what programs I use.
> 
> For the record, here are the exact programs where I was running into issues:
> 	? Regular R installation and R GUI from CRAN. I ran into problems when I'd open an .R text file when R was not already open.
> 	? MacTeX installation and the TeXShop editor. The errors I encountered were when using BIbTeX in particular -- typesetting using BibTeX worked fine, but the files it generated would cause a failure when going back to the regular LaTeX typesetting.
> Given that none of my colleagues seem to have been hit with the issue, guessing that only a small minority of machines are affected.
> 
> 
> 
> On Friday, March 3, 2017 at 5:27:09 PM UTC-8, Ken Beath wrote:
> I?ve had no trouble with using RStudio so it is definitely a GUI problem. I?ve also had no trouble with TeXShop so I assume that whatever LaTex editor you are using is the problem.
> Ken
> 
> 
> > On 1 Mar 2017, at 4:42 pm, David Diez <david.... at gmail.com> wrote:
> > 
> > Anyone have any luck with figuring this out? I have the same problem on both my personal and work computers immediately after installing Sierra.
> > 
> > I'm not sure if it's related, but LaTeX has also been giving me issues ever since I installed Sierra on my personal machine.
> > 
> > I'm close to completely wiping my personal machine to try to fix the R and LaTeX issues. If I do, I'll report back on if it fixes the issue.
> > 
> > Thanks,
> > David
> > 
> > 
> > On Sunday, February 5, 2017 at 1:37:10 AM UTC-8, Patricia Gouzien wrote:
> > Hello,
> > 
> > I am experiencing the following issues:
> > R version 3.3.2 (2016-10-31) -- "Sincere Pumpkin Patch"
> > Copyright (C) 2016 The R Foundation for Statistical Computing
> > Platform: x86_64-apple-darwin13.4.0 (64-bit)
> > 
> > R is free software and comes with ABSOLUTELY NO WARRANTY.
> > You are welcome to redistribute it under certain conditions.
> > Type 'license()' or 'licence()' for distribution details.
> > 
> >   Natural language support but running in an English locale
> > 
> > R is a collaborative project with many contributors.
> > Type 'contributors()' for more information and
> > 'citation()' on how to cite R or R packages in publications.
> > 
> > Type 'demo()' for some demos, 'help()' for on-line help, or
> > 'help.start()' for an HTML browser interface to help.
> > Type 'q()' to quit R.
> > 
> > [R.app GUI 1.68 (7288) x86_64-apple-darwin13.4.0]
> > 
> > 
> >  
> > 
> > 
> > 
> > 
> > Selection: 
> > 
> > R crashes. Any help on this is greatly appreciated.
> > Sierra 10.12.2
> > 
> > Thanks so much!
> > Pat
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SI... at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SI... at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From simon.urbanek at r-project.org  Tue Apr 18 16:06:49 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 18 Apr 2017 10:06:49 -0400
Subject: [R-SIG-Mac] Problem with Rcpp on R-3.4 beta (r72492)
In-Reply-To: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
References: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
Message-ID: <C28B53BE-9977-49A0-912F-14B121F0A60A@r-project.org>

Berend,

R for El Capitan is using clang 4.0.0 - you may need to install it from
http://r.research.att.com/libs/clang-4.0.0-darwin15.6-Release.tar.gz
In most cases you may get away with Apple clang, but likely not for new C++ features.

We will provide an official package soon with the R release.

Please keep testing and report issues - the changes for R 3.4.0 have been more radical as we target more recent macOS for better performance and features.

Thanks,
Simon


> On Apr 7, 2017, at 5:11 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> 
> Hi,
> 
> I have downloaded and installed R from R-3.4-r72492-branch-el-capitan.pkg.
> My OS: OS X El Capitan (10.11.6)
> 
> My packages and all additional tests of these are working correctly.
> 
> I can install Rcpp.
> Packages requiring Rcpp however don't seem to install or run.
> 
> 
> Running otool -L on /Library/Frameworks/R.framework/Versions/3.4/Resources/library/Rcpp/libs/Rcpp.so
> gives
> 
> Rcpp.so:
> 	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
> 	/usr/local/clang4/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
> 
> 
> I don't have  /usr/local/clang4/lib/libc++.1.dylib.
> I wouldn't know where to get it from. AFAIK The macOS Commandline Tools do not install stuff in /usr/local.
> If this isn't a mishap: where do we get the necessary libc++.1.dylib from?
> 
> Berend Hasselman
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From tmrsg11 at gmail.com  Tue Apr 18 17:50:38 2017
From: tmrsg11 at gmail.com (C W)
Date: Tue, 18 Apr 2017 11:50:38 -0400
Subject: [R-SIG-Mac] R.app crashes at startup on MacOS Sierra
In-Reply-To: <36C1BD43-9994-4F23-A20E-E512B7475D50@r-project.org>
References: <CAJCuCMOiwu00eziKLxcGUWt5BfVYq-06XyDn6JNr4W2_wnbuxA@mail.gmail.com>
 <68039c86-5428-4049-b84b-da567998770b@googlegroups.com>
 <6FC4064C-792C-458B-AFAB-789DD4236E27@kjbeath.com.au>
 <507c8944-79cd-4c65-8bca-4d6cf8431963@googlegroups.com>
 <CAE2FW2mXp=6NVJ9jN9EBDGeSDj4PjRRDhq_QQdKdqPQLmnhh_w@mail.gmail.com>
 <36C1BD43-9994-4F23-A20E-E512B7475D50@r-project.org>
Message-ID: <CAE2FW2mBQNJFXO9GKpuKiD7BviJVhqf0zbwkwV31-0BXV1=01g@mail.gmail.com>

Great, thank you sooooo much!

On Tue, Apr 18, 2017 at 10:01 AM, Simon Urbanek <simon.urbanek at r-project.org
> wrote:

> This has been fixed in more recent R versions, please upgrade you R.
>
> Cheers,
> Simon
>
>
> > On Apr 14, 2017, at 9:58 AM, C W <tmrsg11 at gmail.com> wrote:
> >
> > Hi everyone,
> >
> > I am having the same problem as reported above. I have a few try.
> >
> > This message showed up
> >
> > <Screen Shot 2017-04-14 at 9.57.41 AM.png>
> > ?
> >
> > 2017-04-14 09:52:56.964 R[21302:286348] -[_NSViewAuxiliary
> setRuleThickness:]: unrecognized selector sent to instance 0x7fdadeef26f0
> > 2017-04-14 09:52:56.976 R[21302:286348] *** RController: caught ObjC
> exception while processing system events. Update to the latest GUI version
> and consider reporting this properly (see FAQ) if it persists and is not
> known.
> > *** reason: -[_NSViewAuxiliary setRuleThickness:]: unrecognized selector
> sent to instance 0x7fdadeef26f0
> > *** name: NSInvalidArgumentException, info: (null)
> > *** Version: R 3.3.2 (71607) R.app R 3.3.2 GUI 1.68 Mavericks build
> > Consider saving your work soon in case this develops into a problem.
> >
> >
> > Thank you!
> >
> > On Sun, Mar 5, 2017 at 12:00 PM, David Diez <david.m.diez at gmail.com>
> wrote:
> > I reinstalled macOS yesterday as well as R and MacTeX, and everything is
> working again!
> > Killed half a day, but I'm excited to have things back :)
> > The reinstallation instructions I followed are at
> > https://support.apple.com/kb/PH25649?locale=en_US
> >
> > I'm curious what machines others who are encountering issues are using.
> Here are the two machines where I encountered problems:
> >       ? My personal machine: Macbook Pro Retina Mid 2014 (13-inch).
> Fixed after macOS Sierra reinstall!
> >       ? My work machine: Macbook Pro Retina Mid 2014 (15-inch). I
> haven't tried reinstalling macOS Sierra on this machine.
> >
> > My suspicion at this point is that the macOS Sierra update is at fault:
> >       ? Reinstalling programs before the full macOS reinstall did not
> fix the problems.
> >       ? Going nuclear and reinstalling macOS, then reinstalling the same
> programs did solve the problems.
> >       ? I have not changed any of the files I was using or changed what
> programs I use.
> >
> > For the record, here are the exact programs where I was running into
> issues:
> >       ? Regular R installation and R GUI from CRAN. I ran into problems
> when I'd open an .R text file when R was not already open.
> >       ? MacTeX installation and the TeXShop editor. The errors I
> encountered were when using BIbTeX in particular -- typesetting using
> BibTeX worked fine, but the files it generated would cause a failure when
> going back to the regular LaTeX typesetting.
> > Given that none of my colleagues seem to have been hit with the issue,
> guessing that only a small minority of machines are affected.
> >
> >
> >
> > On Friday, March 3, 2017 at 5:27:09 PM UTC-8, Ken Beath wrote:
> > I?ve had no trouble with using RStudio so it is definitely a GUI
> problem. I?ve also had no trouble with TeXShop so I assume that whatever
> LaTex editor you are using is the problem.
> > Ken
> >
> >
> > > On 1 Mar 2017, at 4:42 pm, David Diez <david.... at gmail.com> wrote:
> > >
> > > Anyone have any luck with figuring this out? I have the same problem
> on both my personal and work computers immediately after installing Sierra.
> > >
> > > I'm not sure if it's related, but LaTeX has also been giving me issues
> ever since I installed Sierra on my personal machine.
> > >
> > > I'm close to completely wiping my personal machine to try to fix the R
> and LaTeX issues. If I do, I'll report back on if it fixes the issue.
> > >
> > > Thanks,
> > > David
> > >
> > >
> > > On Sunday, February 5, 2017 at 1:37:10 AM UTC-8, Patricia Gouzien
> wrote:
> > > Hello,
> > >
> > > I am experiencing the following issues:
> > > R version 3.3.2 (2016-10-31) -- "Sincere Pumpkin Patch"
> > > Copyright (C) 2016 The R Foundation for Statistical Computing
> > > Platform: x86_64-apple-darwin13.4.0 (64-bit)
> > >
> > > R is free software and comes with ABSOLUTELY NO WARRANTY.
> > > You are welcome to redistribute it under certain conditions.
> > > Type 'license()' or 'licence()' for distribution details.
> > >
> > >   Natural language support but running in an English locale
> > >
> > > R is a collaborative project with many contributors.
> > > Type 'contributors()' for more information and
> > > 'citation()' on how to cite R or R packages in publications.
> > >
> > > Type 'demo()' for some demos, 'help()' for on-line help, or
> > > 'help.start()' for an HTML browser interface to help.
> > > Type 'q()' to quit R.
> > >
> > > [R.app GUI 1.68 (7288) x86_64-apple-darwin13.4.0]
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > Selection:
> > >
> > > R crashes. Any help on this is greatly appreciated.
> > > Sierra 10.12.2
> > >
> > > Thanks so much!
> > > Pat
> > > _______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SI... at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SI... at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> >
> >
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>

	[[alternative HTML version deleted]]


From bhh at xs4all.nl  Tue Apr 18 19:24:47 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Tue, 18 Apr 2017 19:24:47 +0200
Subject: [R-SIG-Mac] Problem with Rcpp on R-3.4 beta (r72492)
In-Reply-To: <C28B53BE-9977-49A0-912F-14B121F0A60A@r-project.org>
References: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
 <C28B53BE-9977-49A0-912F-14B121F0A60A@r-project.org>
Message-ID: <50B3C967-B8CB-4A41-A207-B3E2B8441AFB@xs4all.nl>


Simon,

Thanks for the info.
I have downloaded R 3.4.0 RC r72531.
And installed clang 4.0.0 as you advised.

I already had Coudert's gfortran 6.1.

My Fortran packages checked without any problems; to be expected.

I am also in the possession of a private package (made by an ex colleague) that uses C++.
I did notice that this particular package linked to /usr/lib/libc++.1.dylib and NOT the one the binary version of Rcpp links to (/usr/local/clang4/lib/libc++.1.dylib).

However the "official" version of my package nleqslv which uses Fortran links to (a.o.) /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libgfortran.3.dylib as one would expect.

I also got the impression that R CMD check/INSTALL still uses Apple's clang++ and not the clang4 version..

What do I need to do (e.g. in my Makevars) to get  C++ stuff for R to use clang4 and its dylibs?
Or will this be "fixed" in the final release of R 3.4.0?  And just wait for the official release and package for R3.4.0?

Berend



> On 18 Apr 2017, at 16:06, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Berend,
> 
> R for El Capitan is using clang 4.0.0 - you may need to install it from
> http://r.research.att.com/libs/clang-4.0.0-darwin15.6-Release.tar.gz
> In most cases you may get away with Apple clang, but likely not for new C++ features.
> 
> We will provide an official package soon with the R release.
> 
> Please keep testing and report issues - the changes for R 3.4.0 have been more radical as we target more recent macOS for better performance and features.
> 
> Thanks,
> Simon
> 
> 
>> On Apr 7, 2017, at 5:11 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
>> 
>> 
>> Hi,
>> 
>> I have downloaded and installed R from R-3.4-r72492-branch-el-capitan.pkg.
>> My OS: OS X El Capitan (10.11.6)
>> 
>> My packages and all additional tests of these are working correctly.
>> 
>> I can install Rcpp.
>> Packages requiring Rcpp however don't seem to install or run.
>> 
>> 
>> Running otool -L on /Library/Frameworks/R.framework/Versions/3.4/Resources/library/Rcpp/libs/Rcpp.so
>> gives
>> 
>> Rcpp.so:
>> 	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
>> 	/usr/local/clang4/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>> 
>> 
>> I don't have  /usr/local/clang4/lib/libc++.1.dylib.
>> I wouldn't know where to get it from. AFAIK The macOS Commandline Tools do not install stuff in /usr/local.
>> If this isn't a mishap: where do we get the necessary libc++.1.dylib from?
>> 
>> Berend Hasselman
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From simon.urbanek at r-project.org  Tue Apr 18 19:35:41 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 18 Apr 2017 13:35:41 -0400
Subject: [R-SIG-Mac] Problem with Rcpp on R-3.4 beta (r72492)
In-Reply-To: <50B3C967-B8CB-4A41-A207-B3E2B8441AFB@xs4all.nl>
References: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
 <C28B53BE-9977-49A0-912F-14B121F0A60A@r-project.org>
 <50B3C967-B8CB-4A41-A207-B3E2B8441AFB@xs4all.nl>
Message-ID: <DFEF0E43-5DE0-449B-987D-50665CD59969@r-project.org>

Berend,


> On Apr 18, 2017, at 1:24 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> 
> Simon,
> 
> Thanks for the info.
> I have downloaded R 3.4.0 RC r72531.
> And installed clang 4.0.0 as you advised.
> 
> I already had Coudert's gfortran 6.1.
> 
> My Fortran packages checked without any problems; to be expected.
> 
> I am also in the possession of a private package (made by an ex colleague) that uses C++.
> I did notice that this particular package linked to /usr/lib/libc++.1.dylib and NOT the one the binary version of Rcpp links to (/usr/local/clang4/lib/libc++.1.dylib).
> 
> However the "official" version of my package nleqslv which uses Fortran links to (a.o.) /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libgfortran.3.dylib as one would expect.
> 
> I also got the impression that R CMD check/INSTALL still uses Apple's clang++ and not the clang4 version..
> 
> What do I need to do (e.g. in my Makevars) to get  C++ stuff for R to use clang4 and its dylibs?


Either
export PATH=/usr/local/clang4/bin:$PATH
for general purpose of for R specifically in ~/.R/Makevars
CC=/usr/local/clang4/bin/clang
CXX=/usr/local/clang4/bin/clang++

The main difference is that clang 4.0.0 supports C++17 features and OpenMP -- neither of which is supported by Apple clang.


> Or will this be "fixed" in the final release of R 3.4.0?


There was just one fix - the path in Rcpp (and other C++ packages) should not have been /usr/local - it should point to libc++ in R - that has been fixed and should be available in the next nightly build. The libc++ was mistakenly not copied.


>  And just wait for the official release and package for R3.4.0?
> 

No, please, keep checking the nightlies from

http://r.research.att.com

the release will be exactly the same, so we have to make sure we'll find all the bugs *before* there release so please keep testing and reporting.

Thanks,
Simon




> Berend
> 
> 
> 
>> On 18 Apr 2017, at 16:06, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> Berend,
>> 
>> R for El Capitan is using clang 4.0.0 - you may need to install it from
>> http://r.research.att.com/libs/clang-4.0.0-darwin15.6-Release.tar.gz
>> In most cases you may get away with Apple clang, but likely not for new C++ features.
>> 
>> We will provide an official package soon with the R release.
>> 
>> Please keep testing and report issues - the changes for R 3.4.0 have been more radical as we target more recent macOS for better performance and features.
>> 
>> Thanks,
>> Simon
>> 
>> 
>>> On Apr 7, 2017, at 5:11 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
>>> 
>>> 
>>> Hi,
>>> 
>>> I have downloaded and installed R from R-3.4-r72492-branch-el-capitan.pkg.
>>> My OS: OS X El Capitan (10.11.6)
>>> 
>>> My packages and all additional tests of these are working correctly.
>>> 
>>> I can install Rcpp.
>>> Packages requiring Rcpp however don't seem to install or run.
>>> 
>>> 
>>> Running otool -L on /Library/Frameworks/R.framework/Versions/3.4/Resources/library/Rcpp/libs/Rcpp.so
>>> gives
>>> 
>>> Rcpp.so:
>>> 	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
>>> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
>>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
>>> 	/usr/local/clang4/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
>>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>>> 
>>> 
>>> I don't have  /usr/local/clang4/lib/libc++.1.dylib.
>>> I wouldn't know where to get it from. AFAIK The macOS Commandline Tools do not install stuff in /usr/local.
>>> If this isn't a mishap: where do we get the necessary libc++.1.dylib from?
>>> 
>>> Berend Hasselman
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 


From simon.urbanek at r-project.org  Tue Apr 18 19:44:42 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 18 Apr 2017 13:44:42 -0400
Subject: [R-SIG-Mac] R.app fails to run under non-Sierra OSX versions
In-Reply-To: <CALQCL_8JE_9vFdpTXJygtc2m4yLfKXAev8xmN+gdcH_L+7SOyQ@mail.gmail.com>
References: <CALQCL_8JE_9vFdpTXJygtc2m4yLfKXAev8xmN+gdcH_L+7SOyQ@mail.gmail.com>
Message-ID: <4C10C75B-98CD-4D2B-85D4-E1236DA0A453@r-project.org>

Thomas,


> On Apr 12, 2017, at 4:30 AM, Thomas Obadia <thomas.obadia at gmail.com> wrote:
> 
> Dear R team,
> 
> I've recently come across a strange bug which seems undocumented and
> contradicts the INSTALL instructions from the sources of R-GUI.
> 
> Running El Capitan, I usually install all my distributions using Homebrew
> and keep everything up-to-date (except for the OS which is not Sierra yet).
> The current R.app 1.6.8 fails to run on El Capitan, with a warning "You're
> running 10.11.6. This app requires 10.12".
> 
> My first thought was a Homebrew mix-up in the binary distribution, but the
> Github issue pointed to somthing else (see:
> https://github.com/Homebrew/homebrew-science/issues/5411#issuecomment-293030482).
> The binary they build is using -target R -configuration Release
> 
> The install instructions from Mac-GUI-1.68.tar.gz seem to be out of date as
> they still detail SnowLeopard64 build which seem not included anymore. Is
> there any reason why a normal build of R.app would not run on OSX versions
> other than Sierra ?
> 

No, it's entirely up to your Xcode setup - Xcode alone determines the target macOS version. As you will see our CRAN binaries work just fine on El Capitan (where they are built). In fact, the Release target simply uses whatever SDK your Xcode provides - it can be anything as old as 10.6, there is not restriction on the macOS version in the sources. So if you use 10.12 SDK the target will be Sierra, if you use 10.6 SDK the target will be Snow Leopard etc. - for CRAN we use 10.11 SDK to target El Capitan.

Cheers,
Simon



> All the best,
> Thomas
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From bhh at xs4all.nl  Tue Apr 18 19:57:46 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Tue, 18 Apr 2017 19:57:46 +0200
Subject: [R-SIG-Mac] Problem with Rcpp on R-3.4 beta (r72492)
In-Reply-To: <DFEF0E43-5DE0-449B-987D-50665CD59969@r-project.org>
References: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
 <C28B53BE-9977-49A0-912F-14B121F0A60A@r-project.org>
 <50B3C967-B8CB-4A41-A207-B3E2B8441AFB@xs4all.nl>
 <DFEF0E43-5DE0-449B-987D-50665CD59969@r-project.org>
Message-ID: <1A54C6A3-7FE9-4A2C-95E3-7677B74CCC91@xs4all.nl>

Simon,

I have just checked the private package I mentioned in my previous post.
It is now made with clang4.

But the resulting .so (still) links to Apple's /usr/lib/libc++.1.dylib

I'll continue checking tomorrow. And check some packages using C++ link to R's libc++.

Berend


> On 18 Apr 2017, at 19:35, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Berend,
> 
> 
>> On Apr 18, 2017, at 1:24 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
>> 
>> 
>> Simon,
>> 
>> Thanks for the info.
>> I have downloaded R 3.4.0 RC r72531.
>> And installed clang 4.0.0 as you advised.
>> 
>> I already had Coudert's gfortran 6.1.
>> 
>> My Fortran packages checked without any problems; to be expected.
>> 
>> I am also in the possession of a private package (made by an ex colleague) that uses C++.
>> I did notice that this particular package linked to /usr/lib/libc++.1.dylib and NOT the one the binary version of Rcpp links to (/usr/local/clang4/lib/libc++.1.dylib).
>> 
>> However the "official" version of my package nleqslv which uses Fortran links to (a.o.) /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libgfortran.3.dylib as one would expect.
>> 
>> I also got the impression that R CMD check/INSTALL still uses Apple's clang++ and not the clang4 version..
>> 
>> What do I need to do (e.g. in my Makevars) to get  C++ stuff for R to use clang4 and its dylibs?
> 
> 
> Either
> export PATH=/usr/local/clang4/bin:$PATH
> for general purpose of for R specifically in ~/.R/Makevars
> CC=/usr/local/clang4/bin/clang
> CXX=/usr/local/clang4/bin/clang++
> 
> The main difference is that clang 4.0.0 supports C++17 features and OpenMP -- neither of which is supported by Apple clang.
> 
> 
>> Or will this be "fixed" in the final release of R 3.4.0?
> 
> 
> There was just one fix - the path in Rcpp (and other C++ packages) should not have been /usr/local - it should point to libc++ in R - that has been fixed and should be available in the next nightly build. The libc++ was mistakenly not copied.
> 
> 
>> And just wait for the official release and package for R3.4.0?
>> 
> 
> No, please, keep checking the nightlies from
> 
> http://r.research.att.com
> 
> the release will be exactly the same, so we have to make sure we'll find all the bugs *before* there release so please keep testing and reporting.
> 
> Thanks,
> Simon
> 
> 
> 
> 
>> Berend
>> 
>> 
>> 
>>> On 18 Apr 2017, at 16:06, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>> Berend,
>>> 
>>> R for El Capitan is using clang 4.0.0 - you may need to install it from
>>> http://r.research.att.com/libs/clang-4.0.0-darwin15.6-Release.tar.gz
>>> In most cases you may get away with Apple clang, but likely not for new C++ features.
>>> 
>>> We will provide an official package soon with the R release.
>>> 
>>> Please keep testing and report issues - the changes for R 3.4.0 have been more radical as we target more recent macOS for better performance and features.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>>> On Apr 7, 2017, at 5:11 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
>>>> 
>>>> 
>>>> Hi,
>>>> 
>>>> I have downloaded and installed R from R-3.4-r72492-branch-el-capitan.pkg.
>>>> My OS: OS X El Capitan (10.11.6)
>>>> 
>>>> My packages and all additional tests of these are working correctly.
>>>> 
>>>> I can install Rcpp.
>>>> Packages requiring Rcpp however don't seem to install or run.
>>>> 
>>>> 
>>>> Running otool -L on /Library/Frameworks/R.framework/Versions/3.4/Resources/library/Rcpp/libs/Rcpp.so
>>>> gives
>>>> 
>>>> Rcpp.so:
>>>> 	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
>>>> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
>>>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
>>>> 	/usr/local/clang4/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
>>>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>>>> 
>>>> 
>>>> I don't have  /usr/local/clang4/lib/libc++.1.dylib.
>>>> I wouldn't know where to get it from. AFAIK The macOS Commandline Tools do not install stuff in /usr/local.
>>>> If this isn't a mishap: where do we get the necessary libc++.1.dylib from?
>>>> 
>>>> Berend Hasselman
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From bhh at xs4all.nl  Tue Apr 18 20:20:26 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Tue, 18 Apr 2017 20:20:26 +0200
Subject: [R-SIG-Mac] Problem with R.app 1.70 on macOS El Capitan
Message-ID: <D27DF791-5021-4751-892E-77E273DA1D55@xs4all.nl>


More testing of R 3.4.0:

R version 3.4.0 RC (2017-04-17 r72531) -- "You Stupid Darkness"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin15.6.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]


I did this

??update.packages

and got this message

starting httpd help server ... done
2017-04-18 20:09:42.918 R[12625:113901] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.

Then I did 

?update.packages

and got a blank help page.

help.start()  takes me to the browser with the index page.
But searching for anything is very slow.

Berend


From bhh at xs4all.nl  Wed Apr 19 10:21:20 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Wed, 19 Apr 2017 10:21:20 +0200
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
Message-ID: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>


Most of the problems I mentioned yesterday with R 3.4.0 RC still exist.
(see thread https://stat.ethz.ch/pipermail/r-sig-mac/2017-April/012287.html).

There is now a libc++ in the R framework: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib

1.

Rcpp was not updated and thus still links to /usr/local/clang4/lib/libc++.1.dylib and not to
/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib

2.

The private  package using C++ still links to Apple's libc++.1.dylib and not the one from clang4.
Nor to the libc++.1.dylib in the R framework.
It is however being built with clang4 using the method suggested by Simon.

Output from otool -L ..:

regts.so:
	regts.so (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/3.3/Resources/lib/libR.dylib (compatibility version 3.3.0, current version 3.3.3)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 120.1.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)

3.

The problem with help pages in R.app I mentioned in my second mail still exist.
(using [R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]).

For example after ?ls this message appears.

starting httpd help server ... done
2017-04-19 10:14:31.505 R[3447:52508] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.

And the window displaying the help is blank.
Any request for help using ? of help() shows a blank window.

Berend


From thomas.obadia at gmail.com  Wed Apr 19 10:49:00 2017
From: thomas.obadia at gmail.com (Thomas Obadia)
Date: Wed, 19 Apr 2017 10:49:00 +0200
Subject: [R-SIG-Mac] R.app fails to run under non-Sierra OSX versions
In-Reply-To: <4C10C75B-98CD-4D2B-85D4-E1236DA0A453@r-project.org>
References: <CALQCL_8JE_9vFdpTXJygtc2m4yLfKXAev8xmN+gdcH_L+7SOyQ@mail.gmail.com>
 <4C10C75B-98CD-4D2B-85D4-E1236DA0A453@r-project.org>
Message-ID: <CALQCL_8tORXf5+MknWbuS8xhS3TftBYEHrKya8BapQi0oS68NA@mail.gmail.com>

Simon,

Thanks for the reply. It seems to be even more complicated than that
(although I'm not so familiar with Xcode, for this exact kind of reasons).
Building from source on my machine the Mac-GUI-1.68.tar.gz with :

xcodebuild -target R -configuration Release SYMROOT=build
HEADER_SEARCH_PATHS=/usr/local/opt/r/R.framework/Headers
OTHER_LDFLAGS=-F/usr/local/opt/r

successfully compiles a binary... which is then impossible to execute. I'm
thinking more and more it has to do with the fact that Xcode 8.2.1 (with
CLT 8.2.0.xxxxxx) will fail to compile anything other than Sierra binaries,
even when run on a non-Sierra environment.

If that's the case then there's nothing I can do really.

Best,
Thomas

2017-04-18 19:44 GMT+02:00 Simon Urbanek <simon.urbanek at r-project.org>:

> Thomas,
>
>
> > On Apr 12, 2017, at 4:30 AM, Thomas Obadia <thomas.obadia at gmail.com>
> wrote:
> >
> > Dear R team,
> >
> > I've recently come across a strange bug which seems undocumented and
> > contradicts the INSTALL instructions from the sources of R-GUI.
> >
> > Running El Capitan, I usually install all my distributions using Homebrew
> > and keep everything up-to-date (except for the OS which is not Sierra
> yet).
> > The current R.app 1.6.8 fails to run on El Capitan, with a warning
> "You're
> > running 10.11.6. This app requires 10.12".
> >
> > My first thought was a Homebrew mix-up in the binary distribution, but
> the
> > Github issue pointed to somthing else (see:
> > https://github.com/Homebrew/homebrew-science/issues/5411#
> issuecomment-293030482).
> > The binary they build is using -target R -configuration Release
> >
> > The install instructions from Mac-GUI-1.68.tar.gz seem to be out of date
> as
> > they still detail SnowLeopard64 build which seem not included anymore. Is
> > there any reason why a normal build of R.app would not run on OSX
> versions
> > other than Sierra ?
> >
>
> No, it's entirely up to your Xcode setup - Xcode alone determines the
> target macOS version. As you will see our CRAN binaries work just fine on
> El Capitan (where they are built). In fact, the Release target simply uses
> whatever SDK your Xcode provides - it can be anything as old as 10.6, there
> is not restriction on the macOS version in the sources. So if you use 10.12
> SDK the target will be Sierra, if you use 10.6 SDK the target will be Snow
> Leopard etc. - for CRAN we use 10.11 SDK to target El Capitan.
>
> Cheers,
> Simon
>
>
>
> > All the best,
> > Thomas
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>
>

	[[alternative HTML version deleted]]


From simon.urbanek at r-project.org  Wed Apr 19 14:26:28 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 19 Apr 2017 08:26:28 -0400
Subject: [R-SIG-Mac] R.app fails to run under non-Sierra OSX versions
In-Reply-To: <CALQCL_8tORXf5+MknWbuS8xhS3TftBYEHrKya8BapQi0oS68NA@mail.gmail.com>
References: <CALQCL_8JE_9vFdpTXJygtc2m4yLfKXAev8xmN+gdcH_L+7SOyQ@mail.gmail.com>
 <4C10C75B-98CD-4D2B-85D4-E1236DA0A453@r-project.org>
 <CALQCL_8tORXf5+MknWbuS8xhS3TftBYEHrKya8BapQi0oS68NA@mail.gmail.com>
Message-ID: <99B3AED5-E907-4B27-9DD5-0C697D4F43E3@r-project.org>


> On Apr 19, 2017, at 4:49 AM, Thomas Obadia <thomas.obadia at gmail.com> wrote:
> 
> Simon,
> 
> Thanks for the reply. It seems to be even more complicated than that (although I'm not so familiar with Xcode, for this exact kind of reasons). Building from source on my machine the Mac-GUI-1.68.tar.gz with :
> 
> xcodebuild -target R -configuration Release SYMROOT=build HEADER_SEARCH_PATHS=/usr/local/opt/r/R.framework/Headers OTHER_LDFLAGS=-F/usr/local/opt/r
> 
> successfully compiles a binary... which is then impossible to execute. I'm thinking more and more it has to do with the fact that Xcode 8.2.1 (with CLT 8.2.0.xxxxxx) will fail to compile anything other than Sierra binaries, even when run on a non-Sierra environment. 
> 
> If that's the case then there's nothing I can do really. 
> 

If you don't have 10.11 SDK you can try

MACOSX_DEPLOYMENT_TARGET=10.11

Cheers,
Simon



> Best,
> Thomas
> 
> 2017-04-18 19:44 GMT+02:00 Simon Urbanek <simon.urbanek at r-project.org>:
> Thomas,
> 
> 
> > On Apr 12, 2017, at 4:30 AM, Thomas Obadia <thomas.obadia at gmail.com> wrote:
> >
> > Dear R team,
> >
> > I've recently come across a strange bug which seems undocumented and
> > contradicts the INSTALL instructions from the sources of R-GUI.
> >
> > Running El Capitan, I usually install all my distributions using Homebrew
> > and keep everything up-to-date (except for the OS which is not Sierra yet).
> > The current R.app 1.6.8 fails to run on El Capitan, with a warning "You're
> > running 10.11.6. This app requires 10.12".
> >
> > My first thought was a Homebrew mix-up in the binary distribution, but the
> > Github issue pointed to somthing else (see:
> > https://github.com/Homebrew/homebrew-science/issues/5411#issuecomment-293030482).
> > The binary they build is using -target R -configuration Release
> >
> > The install instructions from Mac-GUI-1.68.tar.gz seem to be out of date as
> > they still detail SnowLeopard64 build which seem not included anymore. Is
> > there any reason why a normal build of R.app would not run on OSX versions
> > other than Sierra ?
> >
> 
> No, it's entirely up to your Xcode setup - Xcode alone determines the target macOS version. As you will see our CRAN binaries work just fine on El Capitan (where they are built). In fact, the Release target simply uses whatever SDK your Xcode provides - it can be anything as old as 10.6, there is not restriction on the macOS version in the sources. So if you use 10.12 SDK the target will be Sierra, if you use 10.6 SDK the target will be Snow Leopard etc. - for CRAN we use 10.11 SDK to target El Capitan.
> 
> Cheers,
> Simon
> 
> 
> 
> > All the best,
> > Thomas
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> 
> 


From thomas.obadia at gmail.com  Wed Apr 19 14:55:16 2017
From: thomas.obadia at gmail.com (Thomas Obadia)
Date: Wed, 19 Apr 2017 14:55:16 +0200
Subject: [R-SIG-Mac] R.app fails to run under non-Sierra OSX versions
In-Reply-To: <99B3AED5-E907-4B27-9DD5-0C697D4F43E3@r-project.org>
References: <CALQCL_8JE_9vFdpTXJygtc2m4yLfKXAev8xmN+gdcH_L+7SOyQ@mail.gmail.com>
 <4C10C75B-98CD-4D2B-85D4-E1236DA0A453@r-project.org>
 <CALQCL_8tORXf5+MknWbuS8xhS3TftBYEHrKya8BapQi0oS68NA@mail.gmail.com>
 <99B3AED5-E907-4B27-9DD5-0C697D4F43E3@r-project.org>
Message-ID: <CALQCL_-N_RXYbgyJkLMAMH8a6MH-h0LseMopXT801DK7CCXY-g@mail.gmail.com>

Hi Simon,

Indeed, this seems to do the trick. Another flag to pass to xcodebuild
then. Interecting to see that the SDK distirbuted with Xcode does not
necessarily match the version of the OS installed on the machine.

Thanks and cheers,
Thomas

2017-04-19 14:26 GMT+02:00 Simon Urbanek <simon.urbanek at r-project.org>:

>
> > On Apr 19, 2017, at 4:49 AM, Thomas Obadia <thomas.obadia at gmail.com>
> wrote:
> >
> > Simon,
> >
> > Thanks for the reply. It seems to be even more complicated than that
> (although I'm not so familiar with Xcode, for this exact kind of reasons).
> Building from source on my machine the Mac-GUI-1.68.tar.gz with :
> >
> > xcodebuild -target R -configuration Release SYMROOT=build
> HEADER_SEARCH_PATHS=/usr/local/opt/r/R.framework/Headers
> OTHER_LDFLAGS=-F/usr/local/opt/r
> >
> > successfully compiles a binary... which is then impossible to execute.
> I'm thinking more and more it has to do with the fact that Xcode 8.2.1
> (with CLT 8.2.0.xxxxxx) will fail to compile anything other than Sierra
> binaries, even when run on a non-Sierra environment.
> >
> > If that's the case then there's nothing I can do really.
> >
>
> If you don't have 10.11 SDK you can try
>
> MACOSX_DEPLOYMENT_TARGET=10.11
>
> Cheers,
> Simon
>
>
>
> > Best,
> > Thomas
> >
> > 2017-04-18 19:44 GMT+02:00 Simon Urbanek <simon.urbanek at r-project.org>:
> > Thomas,
> >
> >
> > > On Apr 12, 2017, at 4:30 AM, Thomas Obadia <thomas.obadia at gmail.com>
> wrote:
> > >
> > > Dear R team,
> > >
> > > I've recently come across a strange bug which seems undocumented and
> > > contradicts the INSTALL instructions from the sources of R-GUI.
> > >
> > > Running El Capitan, I usually install all my distributions using
> Homebrew
> > > and keep everything up-to-date (except for the OS which is not Sierra
> yet).
> > > The current R.app 1.6.8 fails to run on El Capitan, with a warning
> "You're
> > > running 10.11.6. This app requires 10.12".
> > >
> > > My first thought was a Homebrew mix-up in the binary distribution, but
> the
> > > Github issue pointed to somthing else (see:
> > > https://github.com/Homebrew/homebrew-science/issues/5411#
> issuecomment-293030482).
> > > The binary they build is using -target R -configuration Release
> > >
> > > The install instructions from Mac-GUI-1.68.tar.gz seem to be out of
> date as
> > > they still detail SnowLeopard64 build which seem not included anymore.
> Is
> > > there any reason why a normal build of R.app would not run on OSX
> versions
> > > other than Sierra ?
> > >
> >
> > No, it's entirely up to your Xcode setup - Xcode alone determines the
> target macOS version. As you will see our CRAN binaries work just fine on
> El Capitan (where they are built). In fact, the Release target simply uses
> whatever SDK your Xcode provides - it can be anything as old as 10.6, there
> is not restriction on the macOS version in the sources. So if you use 10.12
> SDK the target will be Sierra, if you use 10.6 SDK the target will be Snow
> Leopard etc. - for CRAN we use 10.11 SDK to target El Capitan.
> >
> > Cheers,
> > Simon
> >
> >
> >
> > > All the best,
> > > Thomas
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SIG-Mac at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > >
> >
> >
>
>

	[[alternative HTML version deleted]]


From simon.urbanek at r-project.org  Wed Apr 19 15:44:34 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 19 Apr 2017 09:44:34 -0400
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
In-Reply-To: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
References: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
Message-ID: <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>


> On Apr 19, 2017, at 4:21 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> 
> Most of the problems I mentioned yesterday with R 3.4.0 RC still exist.
> (see thread https://stat.ethz.ch/pipermail/r-sig-mac/2017-April/012287.html).
> 
> There is now a libc++ in the R framework: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib
> 
> 1.
> 
> Rcpp was not updated and thus still links to /usr/local/clang4/lib/libc++.1.dylib and not to
> /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib
> 

It has been updated, but so you're likely using a mirror that has not synced yet:

$ otool -L libs/Rcpp.so
libs/Rcpp.so:
	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)



> 2.
> 
> The private  package using C++ still links to Apple's libc++.1.dylib and not the one from clang4.
> Nor to the libc++.1.dylib in the R framework.
> It is however being built with clang4 using the method suggested by Simon.
> 
> Output from otool -L ..:
> 
> regts.so:
> 	regts.so (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/3.3/Resources/lib/libR.dylib (compatibility version 3.3.0, current version 3.3.3)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
> 	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 120.1.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
> 

Regular look up rules apply, so you probably want to add -L/usr/local/clang4/lib to your Makevars when you're setting CC/CXX to clang4. Another alternative is to symlink libc++/c++abi from clang into /usr/local/lib (then you may as well symlink clang/clang++ to /usr/local/bin and don't need any extra flags at all).



> 3.
> 
> The problem with help pages in R.app I mentioned in my second mail still exist.
> (using [R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]).
> 
> For example after ?ls this message appears.
> 
> starting httpd help server ... done
> 2017-04-19 10:14:31.505 R[3447:52508] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.
> 
> And the window displaying the help is blank.
> Any request for help using ? of help() shows a blank window.
> 

Are you building R.app yourself or is this from the binary? The CRAN binary should have this problem fixed since 2017/03/23 and I'm not seeing it on my test Sierra machine. However, I have only committed it into the SVN sources today so if you build from source the fix wouldn't show up until today.

Thanks,
Simon



> Berend
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From simon.urbanek at r-project.org  Wed Apr 19 16:24:58 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 19 Apr 2017 10:24:58 -0400
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
In-Reply-To: <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
References: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
 <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
Message-ID: <5FD7159F-FC30-41DF-AD72-A46741EF8442@r-project.org>

Ok, found the issue with 3. -- it works just fine on Sierra, but there is a bug in El Capitan which fails to accept 127.0.0.1 in the ATS exception list so it's in fact impossible to white-list it. Apple has fixed that bug in Sierra but not in El Capitan, so I have added a work-around by forcing the use of localhost instead. I have also kicked-off another build so the latest RC with the fix (GUI r7337) should be up in another 15 mins at http://R.research.att.com.

Thanks,
Simon




> On Apr 19, 2017, at 9:44 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> 
>> On Apr 19, 2017, at 4:21 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
>> 
>> 
>> Most of the problems I mentioned yesterday with R 3.4.0 RC still exist.
>> (see thread https://stat.ethz.ch/pipermail/r-sig-mac/2017-April/012287.html).
>> 
>> There is now a libc++ in the R framework: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib
>> 
>> 1.
>> 
>> Rcpp was not updated and thus still links to /usr/local/clang4/lib/libc++.1.dylib and not to
>> /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib
>> 
> 
> It has been updated, but so you're likely using a mirror that has not synced yet:
> 
> $ otool -L libs/Rcpp.so
> libs/Rcpp.so:
> 	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
> 
> 
> 
>> 2.
>> 
>> The private  package using C++ still links to Apple's libc++.1.dylib and not the one from clang4.
>> Nor to the libc++.1.dylib in the R framework.
>> It is however being built with clang4 using the method suggested by Simon.
>> 
>> Output from otool -L ..:
>> 
>> regts.so:
>> 	regts.so (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/3.3/Resources/lib/libR.dylib (compatibility version 3.3.0, current version 3.3.3)
>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
>> 	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 120.1.0)
>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>> 
> 
> Regular look up rules apply, so you probably want to add -L/usr/local/clang4/lib to your Makevars when you're setting CC/CXX to clang4. Another alternative is to symlink libc++/c++abi from clang into /usr/local/lib (then you may as well symlink clang/clang++ to /usr/local/bin and don't need any extra flags at all).
> 
> 
> 
>> 3.
>> 
>> The problem with help pages in R.app I mentioned in my second mail still exist.
>> (using [R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]).
>> 
>> For example after ?ls this message appears.
>> 
>> starting httpd help server ... done
>> 2017-04-19 10:14:31.505 R[3447:52508] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.
>> 
>> And the window displaying the help is blank.
>> Any request for help using ? of help() shows a blank window.
>> 
> 
> Are you building R.app yourself or is this from the binary? The CRAN binary should have this problem fixed since 2017/03/23 and I'm not seeing it on my test Sierra machine. However, I have only committed it into the SVN sources today so if you build from source the fix wouldn't show up until today.
> 
> Thanks,
> Simon
> 
> 
> 
>> Berend
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From bhh at xs4all.nl  Wed Apr 19 18:53:25 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Wed, 19 Apr 2017 18:53:25 +0200
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
In-Reply-To: <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
References: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
 <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
Message-ID: <ABF6F894-37C6-4185-9080-921E77F0FF94@xs4all.nl>

Simon,


> On 19 Apr 2017, at 15:44, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> 
>> On Apr 19, 2017, at 4:21 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
>> 
>> 
>> Most of the problems I mentioned yesterday with R 3.4.0 RC still exist.
>> (see thread https://stat.ethz.ch/pipermail/r-sig-mac/2017-April/012287.html).
>> 
>> There is now a libc++ in the R framework: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib
>> 
>> 1.
>> 
>> Rcpp was not updated and thus still links to /usr/local/clang4/lib/libc++.1.dylib and not to
>> /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib
>> 
> 
> It has been updated, but so you're likely using a mirror that has not synced yet:
> 

I'm using https://cran.r-project.org  in R.app
I'll wait and try later or tomorrow.

> $ otool -L libs/Rcpp.so
> libs/Rcpp.so:
> 	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
> 
> 
> 
>> 2.
>> 
>> The private  package using C++ still links to Apple's libc++.1.dylib and not the one from clang4.
>> Nor to the libc++.1.dylib in the R framework.
>> It is however being built with clang4 using the method suggested by Simon.
>> 
>> Output from otool -L ..:
>> 
>> regts.so:
>> 	regts.so (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/3.3/Resources/lib/libR.dylib (compatibility version 3.3.0, current version 3.3.3)
>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
>> 	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 120.1.0)
>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>> 
> 
> Regular look up rules apply, so you probably want to add -L/usr/local/clang4/lib to your Makevars when you're setting CC/CXX to clang4. Another alternative is to symlink libc++/c++abi from clang into /usr/local/lib (then you may as well symlink clang/clang++ to /usr/local/bin and don't need any extra flags at all).
> 
> 

I've used your suggestion for symlinks.
The .so of the private package mentioned earlier now links correctly to  /usr/local/clang4/lib/libc++.1.dylib

Would it be possible to have the symlinks done automatically in a package for installing clang4 with a script to make the symlinks?

> 
>> 3.
>> 
>> The problem with help pages in R.app I mentioned in my second mail still exist.
>> (using [R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]).
>> 
>> For example after ?ls this message appears.
>> 
>> starting httpd help server ... done
>> 2017-04-19 10:14:31.505 R[3447:52508] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.
>> 
>> And the window displaying the help is blank.
>> Any request for help using ? of help() shows a blank window.
>> 
> 
> Are you building R.app yourself or is this from the binary? The CRAN binary should have this problem fixed since 2017/03/23 and I'm not seeing it on my test Sierra machine. However, I have only committed it into the SVN sources today so if you build from source the fix wouldn't show up until today.
> 

R.app is from the binary. From the release candidate .pkg on r.research.att.com
I don't compile R or R.app in macOS.
I am running macOS El-Capitan 10.11.6.

Berend


From simon.urbanek at r-project.org  Wed Apr 19 19:11:55 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 19 Apr 2017 13:11:55 -0400
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
In-Reply-To: <ABF6F894-37C6-4185-9080-921E77F0FF94@xs4all.nl>
References: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
 <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
 <ABF6F894-37C6-4185-9080-921E77F0FF94@xs4all.nl>
Message-ID: <A7296438-B0EC-4546-AA93-DAFD57822535@r-project.org>


> On Apr 19, 2017, at 12:53 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> Simon,
> 
> 
>> On 19 Apr 2017, at 15:44, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>>> 
>>> On Apr 19, 2017, at 4:21 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
>>> 
>>> 
>>> Most of the problems I mentioned yesterday with R 3.4.0 RC still exist.
>>> (see thread https://stat.ethz.ch/pipermail/r-sig-mac/2017-April/012287.html).
>>> 
>>> There is now a libc++ in the R framework: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib
>>> 
>>> 1.
>>> 
>>> Rcpp was not updated and thus still links to /usr/local/clang4/lib/libc++.1.dylib and not to
>>> /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib
>>> 
>> 
>> It has been updated, but so you're likely using a mirror that has not synced yet:
>> 
> 
> I'm using https://cran.r-project.org  in R.app
> I'll wait and try later or tomorrow.
> 

Or use http://r.research.att.com as your CRAN mirror (it is the master for Mac binaries).


>> $ otool -L libs/Rcpp.so
>> libs/Rcpp.so:
>> 	Rcpp.so (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib (compatibility version 3.4.0, current version 3.4.0)
>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
>> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>> 
>> 
>> 
>>> 2.
>>> 
>>> The private  package using C++ still links to Apple's libc++.1.dylib and not the one from clang4.
>>> Nor to the libc++.1.dylib in the R framework.
>>> It is however being built with clang4 using the method suggested by Simon.
>>> 
>>> Output from otool -L ..:
>>> 
>>> regts.so:
>>> 	regts.so (compatibility version 0.0.0, current version 0.0.0)
>>> 	/Library/Frameworks/R.framework/Versions/3.3/Resources/lib/libR.dylib (compatibility version 3.3.0, current version 3.3.3)
>>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1259.0.0)
>>> 	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 120.1.0)
>>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
>>> 
>> 
>> Regular look up rules apply, so you probably want to add -L/usr/local/clang4/lib to your Makevars when you're setting CC/CXX to clang4. Another alternative is to symlink libc++/c++abi from clang into /usr/local/lib (then you may as well symlink clang/clang++ to /usr/local/bin and don't need any extra flags at all).
>> 
>> 
> 
> I've used your suggestion for symlinks.
> The .so of the private package mentioned earlier now links correctly to  /usr/local/clang4/lib/libc++.1.dylib
> 
> Would it be possible to have the symlinks done automatically in a package for installing clang4 with a script to make the symlinks?
> 

The main problem is that it's really a user choice. If you want to make clang4 your system-wide default then you can create the symlinks, but if you want to keep both Apple clang and clang4 in parallel then you would use CC/CXX/LDFLAGS to adjust it instead. I'm not sure what is the best way to handle this - different people may have different preferences.



>> 
>>> 3.
>>> 
>>> The problem with help pages in R.app I mentioned in my second mail still exist.
>>> (using [R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]).
>>> 
>>> For example after ?ls this message appears.
>>> 
>>> starting httpd help server ... done
>>> 2017-04-19 10:14:31.505 R[3447:52508] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.
>>> 
>>> And the window displaying the help is blank.
>>> Any request for help using ? of help() shows a blank window.
>>> 
>> 
>> Are you building R.app yourself or is this from the binary? The CRAN binary should have this problem fixed since 2017/03/23 and I'm not seeing it on my test Sierra machine. However, I have only committed it into the SVN sources today so if you build from source the fix wouldn't show up until today.
>> 
> 
> R.app is from the binary. From the release candidate .pkg on r.research.att.com
> I don't compile R or R.app in macOS.
> I am running macOS El-Capitan 10.11.6.
> 

Thanks, like I said in the follow-up email it turned out to be 10.11 bug (which is why I didn't see it in 10.12) and the current binary should have the fix.

Thanks,
Simon


> Berend
> 


From bhh at xs4all.nl  Wed Apr 19 19:46:09 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Wed, 19 Apr 2017 19:46:09 +0200
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
In-Reply-To: <A7296438-B0EC-4546-AA93-DAFD57822535@r-project.org>
References: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
 <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
 <ABF6F894-37C6-4185-9080-921E77F0FF94@xs4all.nl>
 <A7296438-B0EC-4546-AA93-DAFD57822535@r-project.org>
Message-ID: <F001745F-9CA3-445F-BEEB-F4E69B9EDE00@xs4all.nl>


> On 19 Apr 2017, at 19:11, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>>> ......
>> 
>> I'm using https://cran.r-project.org  in R.app
>> I'll wait and try later or tomorrow.
>> 
> 
> Or use http://r.research.att.com as your CRAN mirror (it is the master for Mac binaries).
> 
> 

Done that.
Rcpp.so now links to libc++.1.dylib in the R framework.

> 
> The main problem is that it's really a user choice. If you want to make clang4 your system-wide default then you can create the symlinks, but if you want to keep both Apple clang and clang4 in parallel then you would use CC/CXX/LDFLAGS to adjust it instead. I'm not sure what is the best way to handle this - different people may have different preferences.
> 
> 
I've now done this in my Makevars. And all is well.

Thanks  for all of your efforts.

Berend


From bhh at xs4all.nl  Wed Apr 19 19:48:37 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Wed, 19 Apr 2017 19:48:37 +0200
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
In-Reply-To: <5FD7159F-FC30-41DF-AD72-A46741EF8442@r-project.org>
References: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
 <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
 <5FD7159F-FC30-41DF-AD72-A46741EF8442@r-project.org>
Message-ID: <0814E750-2D97-4168-B6F2-C3AD77659FDB@xs4all.nl>


> On 19 Apr 2017, at 16:24, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Ok, found the issue with 3. -- it works just fine on Sierra, but there is a bug in El Capitan which fails to accept 127.0.0.1 in the ATS exception list so it's in fact impossible to white-list it. Apple has fixed that bug in Sierra but not in El Capitan, so I have added a work-around by forcing the use of localhost instead. I have also kicked-off another build so the latest RC with the fix (GUI r7337) should be up in another 15 mins at http://R.research.att.com.
> 

I just downloaded http://r.research.att.com/el-capitan/R-3.4-branch/R-3.4-branch-el-capitan-signed.pkg.

When I start up R.app I still get:

[R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]

thanks,

Berend


From simon.urbanek at r-project.org  Wed Apr 19 21:43:13 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 19 Apr 2017 15:43:13 -0400
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
In-Reply-To: <0814E750-2D97-4168-B6F2-C3AD77659FDB@xs4all.nl>
References: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
 <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
 <5FD7159F-FC30-41DF-AD72-A46741EF8442@r-project.org>
 <0814E750-2D97-4168-B6F2-C3AD77659FDB@xs4all.nl>
Message-ID: <93699CB8-0A06-446F-8413-AB93E89B2F2E@r-project.org>


> On Apr 19, 2017, at 1:48 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> 
>> On 19 Apr 2017, at 16:24, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> Ok, found the issue with 3. -- it works just fine on Sierra, but there is a bug in El Capitan which fails to accept 127.0.0.1 in the ATS exception list so it's in fact impossible to white-list it. Apple has fixed that bug in Sierra but not in El Capitan, so I have added a work-around by forcing the use of localhost instead. I have also kicked-off another build so the latest RC with the fix (GUI r7337) should be up in another 15 mins at http://R.research.att.com.
>> 
> 
> I just downloaded http://r.research.att.com/el-capitan/R-3.4-branch/R-3.4-branch-el-capitan-signed.pkg.
> 
> When I start up R.app I still get:
> 
> [R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]
> 

I'm not sure why the first pass didn't update, but it should be up to date now.

Thanks,
Simon


From bhh at xs4all.nl  Wed Apr 19 22:02:51 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Wed, 19 Apr 2017 22:02:51 +0200
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72542
In-Reply-To: <93699CB8-0A06-446F-8413-AB93E89B2F2E@r-project.org>
References: <9FAA5B69-C254-4CF1-93D6-252571F5C1E9@xs4all.nl>
 <BFF8AE9A-6D58-4267-AA9B-56FD30EB36E9@r-project.org>
 <5FD7159F-FC30-41DF-AD72-A46741EF8442@r-project.org>
 <0814E750-2D97-4168-B6F2-C3AD77659FDB@xs4all.nl>
 <93699CB8-0A06-446F-8413-AB93E89B2F2E@r-project.org>
Message-ID: <431F1B2D-013D-4ADC-B999-EC1FEA8F7615@xs4all.nl>

Simon,

> On 19 Apr 2017, at 21:43, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> 
>> On Apr 19, 2017, at 1:48 PM, Berend Hasselman <bhh at xs4all.nl> wrote:
>> 
>> 
>>> On 19 Apr 2017, at 16:24, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>> Ok, found the issue with 3. -- it works just fine on Sierra, but there is a bug in El Capitan which fails to accept 127.0.0.1 in the ATS exception list so it's in fact impossible to white-list it. Apple has fixed that bug in Sierra but not in El Capitan, so I have added a work-around by forcing the use of localhost instead. I have also kicked-off another build so the latest RC with the fix (GUI r7337) should be up in another 15 mins at http://R.research.att.com.
>>> 
>> 
>> I just downloaded http://r.research.att.com/el-capitan/R-3.4-branch/R-3.4-branch-el-capitan-signed.pkg.
>> 
>> When I start up R.app I still get:
>> 
>> [R.app GUI 1.70 (7334) x86_64-apple-darwin15.6.0]
>> 
> 
> I'm not sure why the first pass didn't update, but it should be up to date now.
> 

Thank you. For example  ?ls now shows the relevant help page.

BTW. I have noticed that several R packages (such as dplyr) using C++ still link to /usr/local/clang4/lib/.

But for example caTools and cubature link to the libc++.1.dylib in the R framework.

I'll try again tomorrow.

Thanks again.

Berend


> Thanks,
> Simon


From bhh at xs4all.nl  Thu Apr 20 09:23:51 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Thu, 20 Apr 2017 09:23:51 +0200
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72556
Message-ID: <1DA6C7A4-3850-4DE6-A940-CBD036E9C5D1@xs4all.nl>


The issues I have had with R 3.4.0 RC appear to have mostly been resolved macOS El Capitan.
(release candidate r72556 from http://r.research.att.com)

Many packages using Rcpp now do link to the libc++.1.dylib in the R framework.
The following packages using Rcpp that I have installed  are still linking to /usr/local/clang4/lib/libc++.1.dylib:

dplyr
e1071
forecast
htmltools
igraph
lme4
NMF
RandomFields
RcppEigen
readr
reshape2
rgl
roxygen2
RSpectra
RSQLite
scales
sem
spatstat
testthat
trustOptim


That's 20 out of the 43 packages using Rcpp that I have installed.
I have not checked all available packages  using Rcpp.

I always install binary packages.

I don't really or urgently need to have clang4 installed so I would prefer all C++ using packages to link to the libc++.1.dylib in the R framework.
The private package I referred to in  previous mails works fine with Apple's libc++.1.dylib

Berend


From simon.urbanek at r-project.org  Thu Apr 20 16:49:01 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 20 Apr 2017 10:49:01 -0400
Subject: [R-SIG-Mac] Testing R 3.4.0 RC  r72556
In-Reply-To: <1DA6C7A4-3850-4DE6-A940-CBD036E9C5D1@xs4all.nl>
References: <1DA6C7A4-3850-4DE6-A940-CBD036E9C5D1@xs4all.nl>
Message-ID: <04CF40A7-33E7-4426-9A68-CAD3EFE6277D@r-project.org>

Berend,

what you are listing are simply packages that have not been build recently - we'll do a full re-build of all packages for the release.

Thanks,
Simon
 


> On Apr 20, 2017, at 3:23 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> 
> The issues I have had with R 3.4.0 RC appear to have mostly been resolved macOS El Capitan.
> (release candidate r72556 from http://r.research.att.com)
> 
> Many packages using Rcpp now do link to the libc++.1.dylib in the R framework.
> The following packages using Rcpp that I have installed  are still linking to /usr/local/clang4/lib/libc++.1.dylib:
> 
> dplyr
> e1071
> forecast
> htmltools
> igraph
> lme4
> NMF
> RandomFields
> RcppEigen
> readr
> reshape2
> rgl
> roxygen2
> RSpectra
> RSQLite
> scales
> sem
> spatstat
> testthat
> trustOptim
> 
> 
> That's 20 out of the 43 packages using Rcpp that I have installed.
> I have not checked all available packages  using Rcpp.
> 
> I always install binary packages.
> 
> I don't really or urgently need to have clang4 installed so I would prefer all C++ using packages to link to the libc++.1.dylib in the R framework.
> The private package I referred to in  previous mails works fine with Apple's libc++.1.dylib
> 
> Berend
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From roy.mendelssohn at noaa.gov  Sun Apr 23 05:49:15 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 22 Apr 2017 20:49:15 -0700
Subject: [R-SIG-Mac] R3.4.0 Upgrade from R3.3.3
Message-ID: <A7FF97C6-C7CB-4513-9DC0-4AD41C3197BA@noaa.gov>

I keep forgetting.  So if I jump from R3.3.3 to R3.4.0 is it necessary (or at least advisable) to re-install packages?

Thanks,

-Roy

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From pdalgd at gmail.com  Sun Apr 23 10:35:31 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Sun, 23 Apr 2017 10:35:31 +0200
Subject: [R-SIG-Mac] R3.4.0 Upgrade from R3.3.3
In-Reply-To: <A7FF97C6-C7CB-4513-9DC0-4AD41C3197BA@noaa.gov>
References: <A7FF97C6-C7CB-4513-9DC0-4AD41C3197BA@noaa.gov>
Message-ID: <073E7EFC-03D8-4732-8C02-BF7EE1AF65E7@gmail.com>

Yes, especially this time, since the toolchain has been updated.

My favourite procedure for this goes like

(pkgs <- .libPaths())
(pkgs.old <- sub("3.4", "3.3", pkgs, fixed=TRUE))
(pkgs.new <- setdiff(list.files(pkgs.old), list.files(pkgs)))

Check for sanity(!), then install.packages(pkgs.new). Things may need modification if yor setup involves personalized libraries, multiple repos, etc.

Just copying the entire directory followed by update.packages(checkBuilt=TRUE) will overwrite packages from the installation of 3.4 and not all of those are CRAN based.

[To tell the truth, I don't usually practice what I preach. I just install the missing packages when it turns out that I need them...] 

-pd

> On 23 Apr 2017, at 05:49 , Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> I keep forgetting.  So if I jump from R3.3.3 to R3.4.0 is it necessary (or at least advisable) to re-install packages?
> 
> Thanks,
> 
> -Roy
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ripley at stats.ox.ac.uk  Sun Apr 23 16:09:26 2017
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 23 Apr 2017 15:09:26 +0100
Subject: [R-SIG-Mac] R3.4.0 Upgrade from R3.3.3
In-Reply-To: <073E7EFC-03D8-4732-8C02-BF7EE1AF65E7@gmail.com>
References: <A7FF97C6-C7CB-4513-9DC0-4AD41C3197BA@noaa.gov>
 <073E7EFC-03D8-4732-8C02-BF7EE1AF65E7@gmail.com>
Message-ID: <b02367df-bc7b-cff1-2146-b7f0fdf0e1ca@stats.ox.ac.uk>

Note that at the moment there are many missing binary packages for 
3.4.0, and BioC will update all their versions when BioC 3.5 is released 
this coming week.  So I would wait a few days before updating, 
especially if you prefer to use binary packages.

 > nrow(available.packages(, type="source"))
[1] 10477
 > nrow(available.packages(, type="binary"))
[1] 9779

whereas for 3.3.3 10356 are available.

On 23/04/2017 09:35, peter dalgaard wrote:
> Yes, especially this time, since the toolchain has been updated.
> 
> My favourite procedure for this goes like
> 
> (pkgs <- .libPaths())
> (pkgs.old <- sub("3.4", "3.3", pkgs, fixed=TRUE))
> (pkgs.new <- setdiff(list.files(pkgs.old), list.files(pkgs)))
> 
> Check for sanity(!), then install.packages(pkgs.new). Things may need modification if yor setup involves personalized libraries, multiple repos, etc.
> 
> Just copying the entire directory followed by update.packages(checkBuilt=TRUE) will overwrite packages from the installation of 3.4 and not all of those are CRAN based.
> 
> [To tell the truth, I don't usually practice what I preach. I just install the missing packages when it turns out that I need them...]
> 
> -pd
> 
>> On 23 Apr 2017, at 05:49 , Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>>
>> I keep forgetting.  So if I jump from R3.3.3 to R3.4.0 is it necessary (or at least advisable) to re-install packages?
>>
>> Thanks,
>>
>> -Roy


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From roy.mendelssohn at noaa.gov  Sun Apr 23 16:47:55 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Sun, 23 Apr 2017 07:47:55 -0700
Subject: [R-SIG-Mac] R3.4.0 Upgrade from R3.3.3
In-Reply-To: <b02367df-bc7b-cff1-2146-b7f0fdf0e1ca@stats.ox.ac.uk>
References: <A7FF97C6-C7CB-4513-9DC0-4AD41C3197BA@noaa.gov>
 <073E7EFC-03D8-4732-8C02-BF7EE1AF65E7@gmail.com>
 <b02367df-bc7b-cff1-2146-b7f0fdf0e1ca@stats.ox.ac.uk>
Message-ID: <B2BFED6A-A51C-44CC-8F90-11A6CAFD96AE@noaa.gov>

Thanks to all, particularly the script to aid in the update.  In the past when I just copied,  I had problems with some packages.

-Roy

> On Apr 23, 2017, at 7:09 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> 
> Note that at the moment there are many missing binary packages for 3.4.0, and BioC will update all their versions when BioC 3.5 is released this coming week.  So I would wait a few days before updating, especially if you prefer to use binary packages.
> 
> > nrow(available.packages(, type="source"))
> [1] 10477
> > nrow(available.packages(, type="binary"))
> [1] 9779
> 
> whereas for 3.3.3 10356 are available.
> 
> On 23/04/2017 09:35, peter dalgaard wrote:
>> Yes, especially this time, since the toolchain has been updated.
>> My favourite procedure for this goes like
>> (pkgs <- .libPaths())
>> (pkgs.old <- sub("3.4", "3.3", pkgs, fixed=TRUE))
>> (pkgs.new <- setdiff(list.files(pkgs.old), list.files(pkgs)))
>> Check for sanity(!), then install.packages(pkgs.new). Things may need modification if yor setup involves personalized libraries, multiple repos, etc.
>> Just copying the entire directory followed by update.packages(checkBuilt=TRUE) will overwrite packages from the installation of 3.4 and not all of those are CRAN based.
>> [To tell the truth, I don't usually practice what I preach. I just install the missing packages when it turns out that I need them...]
>> -pd
>>> On 23 Apr 2017, at 05:49 , Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>>> 
>>> I keep forgetting.  So if I jump from R3.3.3 to R3.4.0 is it necessary (or at least advisable) to re-install packages?
>>> 
>>> Thanks,
>>> 
>>> -Roy
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From simon.urbanek at r-project.org  Mon Apr 24 02:16:28 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 23 Apr 2017 20:16:28 -0400
Subject: [R-SIG-Mac] R3.4.0 Upgrade from R3.3.3
In-Reply-To: <B2BFED6A-A51C-44CC-8F90-11A6CAFD96AE@noaa.gov>
References: <A7FF97C6-C7CB-4513-9DC0-4AD41C3197BA@noaa.gov>
 <073E7EFC-03D8-4732-8C02-BF7EE1AF65E7@gmail.com>
 <b02367df-bc7b-cff1-2146-b7f0fdf0e1ca@stats.ox.ac.uk>
 <B2BFED6A-A51C-44CC-8F90-11A6CAFD96AE@noaa.gov>
Message-ID: <72B4C385-5FCF-4065-95F6-57E23E28CE3D@r-project.org>

Note that if you use R.app and standard locations you can simply select "Select packages from R 3.3" in the package installer search box and hit Install Selected.

Cheers,
Simon



> On Apr 23, 2017, at 10:47 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> Thanks to all, particularly the script to aid in the update.  In the past when I just copied,  I had problems with some packages.
> 
> -Roy
> 
>> On Apr 23, 2017, at 7:09 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>> 
>> Note that at the moment there are many missing binary packages for 3.4.0, and BioC will update all their versions when BioC 3.5 is released this coming week.  So I would wait a few days before updating, especially if you prefer to use binary packages.
>> 
>>> nrow(available.packages(, type="source"))
>> [1] 10477
>>> nrow(available.packages(, type="binary"))
>> [1] 9779
>> 
>> whereas for 3.3.3 10356 are available.
>> 
>> On 23/04/2017 09:35, peter dalgaard wrote:
>>> Yes, especially this time, since the toolchain has been updated.
>>> My favourite procedure for this goes like
>>> (pkgs <- .libPaths())
>>> (pkgs.old <- sub("3.4", "3.3", pkgs, fixed=TRUE))
>>> (pkgs.new <- setdiff(list.files(pkgs.old), list.files(pkgs)))
>>> Check for sanity(!), then install.packages(pkgs.new). Things may need modification if yor setup involves personalized libraries, multiple repos, etc.
>>> Just copying the entire directory followed by update.packages(checkBuilt=TRUE) will overwrite packages from the installation of 3.4 and not all of those are CRAN based.
>>> [To tell the truth, I don't usually practice what I preach. I just install the missing packages when it turns out that I need them...]
>>> -pd
>>>> On 23 Apr 2017, at 05:49 , Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>>>> 
>>>> I keep forgetting.  So if I jump from R3.3.3 to R3.4.0 is it necessary (or at least advisable) to re-install packages?
>>>> 
>>>> Thanks,
>>>> 
>>>> -Roy
>> 
>> 
>> -- 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Emeritus Professor of Applied Statistics, University of Oxford
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From roy.mendelssohn at noaa.gov  Mon Apr 24 03:16:41 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Sun, 23 Apr 2017 18:16:41 -0700
Subject: [R-SIG-Mac] R3.4.0 Upgrade from R3.3.3
In-Reply-To: <72B4C385-5FCF-4065-95F6-57E23E28CE3D@r-project.org>
References: <A7FF97C6-C7CB-4513-9DC0-4AD41C3197BA@noaa.gov>
 <073E7EFC-03D8-4732-8C02-BF7EE1AF65E7@gmail.com>
 <b02367df-bc7b-cff1-2146-b7f0fdf0e1ca@stats.ox.ac.uk>
 <B2BFED6A-A51C-44CC-8F90-11A6CAFD96AE@noaa.gov>
 <72B4C385-5FCF-4065-95F6-57E23E28CE3D@r-project.org>
Message-ID: <468DF30C-3DA5-42E0-B4AB-942AD5261972@noaa.gov>

Thanks.  Very nice touch.

-Roy

> On Apr 23, 2017, at 5:16 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Note that if you use R.app and standard locations you can simply select "Select packages from R 3.3" in the package installer search box and hit Install Selected.
> 
> Cheers,
> Simon
> 
> 
> 
>> On Apr 23, 2017, at 10:47 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>> 
>> Thanks to all, particularly the script to aid in the update.  In the past when I just copied,  I had problems with some packages.
>> 
>> -Roy
>> 
>>> On Apr 23, 2017, at 7:09 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>> 
>>> Note that at the moment there are many missing binary packages for 3.4.0, and BioC will update all their versions when BioC 3.5 is released this coming week.  So I would wait a few days before updating, especially if you prefer to use binary packages.
>>> 
>>>> nrow(available.packages(, type="source"))
>>> [1] 10477
>>>> nrow(available.packages(, type="binary"))
>>> [1] 9779
>>> 
>>> whereas for 3.3.3 10356 are available.
>>> 
>>> On 23/04/2017 09:35, peter dalgaard wrote:
>>>> Yes, especially this time, since the toolchain has been updated.
>>>> My favourite procedure for this goes like
>>>> (pkgs <- .libPaths())
>>>> (pkgs.old <- sub("3.4", "3.3", pkgs, fixed=TRUE))
>>>> (pkgs.new <- setdiff(list.files(pkgs.old), list.files(pkgs)))
>>>> Check for sanity(!), then install.packages(pkgs.new). Things may need modification if yor setup involves personalized libraries, multiple repos, etc.
>>>> Just copying the entire directory followed by update.packages(checkBuilt=TRUE) will overwrite packages from the installation of 3.4 and not all of those are CRAN based.
>>>> [To tell the truth, I don't usually practice what I preach. I just install the missing packages when it turns out that I need them...]
>>>> -pd
>>>>> On 23 Apr 2017, at 05:49 , Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>>>>> 
>>>>> I keep forgetting.  So if I jump from R3.3.3 to R3.4.0 is it necessary (or at least advisable) to re-install packages?
>>>>> 
>>>>> Thanks,
>>>>> 
>>>>> -Roy
>>> 
>>> 
>>> -- 
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Emeritus Professor of Applied Statistics, University of Oxford
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From pdalgd at gmail.com  Mon Apr 24 09:38:10 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 24 Apr 2017 09:38:10 +0200
Subject: [R-SIG-Mac] R3.4.0 Upgrade from R3.3.3
In-Reply-To: <72B4C385-5FCF-4065-95F6-57E23E28CE3D@r-project.org>
References: <A7FF97C6-C7CB-4513-9DC0-4AD41C3197BA@noaa.gov>
 <073E7EFC-03D8-4732-8C02-BF7EE1AF65E7@gmail.com>
 <b02367df-bc7b-cff1-2146-b7f0fdf0e1ca@stats.ox.ac.uk>
 <B2BFED6A-A51C-44CC-8F90-11A6CAFD96AE@noaa.gov>
 <72B4C385-5FCF-4065-95F6-57E23E28CE3D@r-project.org>
Message-ID: <B0FA7DB4-C3ED-4F9A-97B4-53CA34FE7528@gmail.com>

Missed that one, Simon. Usually I go straight for the Terminal or the Rstudio embedding. Do we have a command line variant of this already? 

-pd

> On 24 Apr 2017, at 02:16 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Note that if you use R.app and standard locations you can simply select "Select packages from R 3.3" in the package installer search box and hit Install Selected.
> 
> Cheers,
> Simon
> 
> 
> 
>> On Apr 23, 2017, at 10:47 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>> 
>> Thanks to all, particularly the script to aid in the update.  In the past when I just copied,  I had problems with some packages.
>> 
>> -Roy
>> 
>>> On Apr 23, 2017, at 7:09 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>> 
>>> Note that at the moment there are many missing binary packages for 3.4.0, and BioC will update all their versions when BioC 3.5 is released this coming week.  So I would wait a few days before updating, especially if you prefer to use binary packages.
>>> 
>>>> nrow(available.packages(, type="source"))
>>> [1] 10477
>>>> nrow(available.packages(, type="binary"))
>>> [1] 9779
>>> 
>>> whereas for 3.3.3 10356 are available.
>>> 
>>> On 23/04/2017 09:35, peter dalgaard wrote:
>>>> Yes, especially this time, since the toolchain has been updated.
>>>> My favourite procedure for this goes like
>>>> (pkgs <- .libPaths())
>>>> (pkgs.old <- sub("3.4", "3.3", pkgs, fixed=TRUE))
>>>> (pkgs.new <- setdiff(list.files(pkgs.old), list.files(pkgs)))
>>>> Check for sanity(!), then install.packages(pkgs.new). Things may need modification if yor setup involves personalized libraries, multiple repos, etc.
>>>> Just copying the entire directory followed by update.packages(checkBuilt=TRUE) will overwrite packages from the installation of 3.4 and not all of those are CRAN based.
>>>> [To tell the truth, I don't usually practice what I preach. I just install the missing packages when it turns out that I need them...]
>>>> -pd
>>>>> On 23 Apr 2017, at 05:49 , Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
>>>>> 
>>>>> I keep forgetting.  So if I jump from R3.3.3 to R3.4.0 is it necessary (or at least advisable) to re-install packages?
>>>>> 
>>>>> Thanks,
>>>>> 
>>>>> -Roy
>>> 
>>> 
>>> -- 
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Emeritus Professor of Applied Statistics, University of Oxford
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From bhh at xs4all.nl  Mon Apr 24 11:32:44 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Mon, 24 Apr 2017 11:32:44 +0200
Subject: [R-SIG-Mac] Wrong link on CRAN Mac subpage
Message-ID: <3A55B6AA-4A97-4957-A6EE-9CFC3A5FDEA7@xs4all.nl>



On the CRAN page: https://cran.r-project.org/bin/macosx/tools/
in the first important note: there is this sentence

<....>
We are also providing Clang 4.0.0 binaries for OS X 10.11 and higer in our libs directory (note that the offical Clang 4.0.0 binaries on support macOS 10.12) and will provide an Apple Installer package here soon.
</...>

1. The link in "in our libs directory" refers to http://r.research.att.com/lib which should be http://r.research.att.com/libs

2. higer ==> higher  (and maybe change OS X into macOS ?. Apple seems to do that on https://developer.apple.com/download/more/?=command%20line%20tools since December 12, 2016)

3.  In the text "(note that the offical Clang 4.0.0 binaries on support macOS 10.12)" 
     - offical ==> official
     - I don't understand  ... binaries on ... ; shouldn't "on" be "only"?

Apologies for nitpicking but the link to libs didn't "work".

Berend Hasselman


From ALPEROVYCH at em-lyon.com  Mon Apr 24 14:46:25 2017
From: ALPEROVYCH at em-lyon.com (ALPEROVYCH Yan)
Date: Mon, 24 Apr 2017 14:46:25 +0200
Subject: [R-SIG-Mac] Issue corrected on 3.1.1 came back?
References: <26F01093-A811-47B8-B5E3-5B77E0941B3B@r-project.org>
Message-ID: <FAA267E0-4FBB-45FF-AF0B-1E62368104FD@em-lyon.com>

Hi all,
The slow GUI came back with version 3.4 both official and patched. It is not present in 3.3.3.
Yan

Begin forwarded message:

From: Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>
Subject: Re: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
Date: March 13, 2015 at 3:10:37 PM GMT+1
To: ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>>
Cc: David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>>, "r-sig-mac at stat.math.ethz.ch<mailto:r-sig-mac at stat.math.ethz.ch>" <r-sig-mac at stat.math.ethz.ch<mailto:r-sig-mac at stat.math.ethz.ch>>

I have more evidence that points at Xcode. If you use the R.app GUI that was compiled at the time of R 3.1.1 - available here:

http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg

then all is well. As we discussed earlier, the code did not change at all and the underlying R version is irrelevant, so the only piece that changed since July last year when this was built was the Xcode version (and thus the compilers used). It's not clear to me at all how the Xcode version can affect NSTextView so badly, so this will require some more digging. In the meantime, please use the above R.app binary.

Cheers,
Simon



On Mar 11, 2015, at 6:39 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:

Yes Simon, the 3.1.1 version works perfectly on Yosemite. This behavior started from 3.1.2 and now is through in 3.1.3.
Cheers,
Yan

On Mar 11, 2015, at 11:07 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:

I can confirm the problem does not occur in 3.1.1 and only started with 3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833, so it seems like some regression was possible between builds within GUI version 1.65? Build 6912 in 3.1.3 for Mavericks still exhibits the behavior as Yan mentioned.

Best,

David

On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:

On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:

Hi Simon,

It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well?


Yes it should, since the code didn't change since 3.1.1.


I tried also to run R from the terminal and found no rendering issues there,

That has nothing to do with it - R is not using any Cocoa for text on the command line - and Terminal is not likely to use NSTextView.


which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?


Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be odd - I'll check tomorrow when I'm back at a Yosemite machine.

Cheers,
Simon



Cheers,
Yan

On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:

On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:

Hello Yan,

I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.


There were no code changes on our end.

AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.

It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.

Cheers,
Simon



Best,

David

PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!

On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
Hi Simon & David,

Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.

Best,

Yan Alperovych, Ph.D.
Associate Professor of Finance
EMLYON Business School
Tel.: +33 4 72 18 29 11<tel:%2B33%204%2072%2018%2029%2011>
E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com><mailto:alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>>
LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/><http://fr.linkedin.com/in/yanalperovych/>

On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:

Thank you both, I'll look into this as soon as I get back from travels.
Simon


On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:

Dear Simon,

Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:

<Screen Shot 2015-02-23 at 4.12.35 PM.png>

As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):

<Screen Shot 2015-02-23 at 4.13.09 PM.png>

More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:

options(max.print=99999)
temp <- data.frame(1:100000, 1:100000)
temp

This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).

It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.

I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.

Best,

David



On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).

Cheers,
S


On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:

Dear Yan,

Are you still seeing this issue? It has been bothering me for months now,
and I even found an instance where using progress_bar with underlying
output to the GUI will cause so much slowdown as to crash R given
sufficient time (i.e., as hidden printed output piles
up in the background, the whole process slows to a crawl).

Best,

David

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac





--
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073<tel:434-535-6073>
dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac



----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.




--
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073<tel:434-535-6073>
dd2es at virginia.edu<mailto:dd2es at virginia.edu>



----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.




--
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073
dd2es at virginia.edu<mailto:dd2es at virginia.edu>


----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.


----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

From simon.urbanek at r-project.org  Mon Apr 24 18:26:54 2017
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 24 Apr 2017 12:26:54 -0400
Subject: [R-SIG-Mac] Wrong link on CRAN Mac subpage
In-Reply-To: <3A55B6AA-4A97-4957-A6EE-9CFC3A5FDEA7@xs4all.nl>
References: <3A55B6AA-4A97-4957-A6EE-9CFC3A5FDEA7@xs4all.nl>
Message-ID: <1D9896C8-9B7F-459F-B987-FB12D5E54773@r-project.org>


> On Apr 24, 2017, at 5:32 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
> 
> 
> 
> On the CRAN page: https://cran.r-project.org/bin/macosx/tools/
> in the first important note: there is this sentence
> 
> <....>
> We are also providing Clang 4.0.0 binaries for OS X 10.11 and higer in our libs directory (note that the offical Clang 4.0.0 binaries on support macOS 10.12) and will provide an Apple Installer package here soon.
> </...>
> 
> 1. The link in "in our libs directory" refers to http://r.research.att.com/lib which should be http://r.research.att.com/libs
> 
> 2. higer ==> higher


thanks


>  (and maybe change OS X into macOS ?. Apple seems to do that on https://developer.apple.com/download/more/?=command%20line%20tools since December 12, 2016)
> 


The names are OS X 10.11 and macOS 10.12 (as Apple uses them) so we try to be consistent with that.


> 3.  In the text "(note that the offical Clang 4.0.0 binaries on support macOS 10.12)" 
>     - offical ==> official
>     - I don't understand  ... binaries on ... ; shouldn't "on" be "only"?
> 

yes, thanks


> Apologies for nitpicking but the link to libs didn't "work".
> 
> Berend Hasselman
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From ALPEROVYCH at em-lyon.com  Wed Apr 26 07:43:38 2017
From: ALPEROVYCH at em-lyon.com (ALPEROVYCH Yan)
Date: Wed, 26 Apr 2017 07:43:38 +0200
Subject: [R-SIG-Mac] Issue corrected on 3.1.1 came back?
In-Reply-To: <FAA267E0-4FBB-45FF-AF0B-1E62368104FD@em-lyon.com>
References: <26F01093-A811-47B8-B5E3-5B77E0941B3B@r-project.org>
 <FAA267E0-4FBB-45FF-AF0B-1E62368104FD@em-lyon.com>
Message-ID: <C806E9BA-557A-42A3-B8B7-04798398713F@em-lyon.com>

A quick question relative to this issue. Since R.app GUI 1.69 (7328) is not showing signs of this problem, I was trying to use the R 3.4 with the 1.69 to no avail. Is this possible and if yes, how to do it properly?

Thanks in advance,
Yan

On Apr 24, 2017, at 2:46 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:

Hi all,
The slow GUI came back with version 3.4 both official and patched. It is not present in 3.3.3.
Yan

Begin forwarded message:

From: Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>
Subject: Re: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
Date: March 13, 2015 at 3:10:37 PM GMT+1
To: ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>>
Cc: David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>>, "r-sig-mac at stat.math.ethz.ch<mailto:r-sig-mac at stat.math.ethz.ch>" <r-sig-mac at stat.math.ethz.ch<mailto:r-sig-mac at stat.math.ethz.ch>>

I have more evidence that points at Xcode. If you use the R.app GUI that was compiled at the time of R 3.1.1 - available here:

http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg

then all is well. As we discussed earlier, the code did not change at all and the underlying R version is irrelevant, so the only piece that changed since July last year when this was built was the Xcode version (and thus the compilers used). It's not clear to me at all how the Xcode version can affect NSTextView so badly, so this will require some more digging. In the meantime, please use the above R.app binary.

Cheers,
Simon



On Mar 11, 2015, at 6:39 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:

Yes Simon, the 3.1.1 version works perfectly on Yosemite. This behavior started from 3.1.2 and now is through in 3.1.3.
Cheers,
Yan

On Mar 11, 2015, at 11:07 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu>> wrote:

I can confirm the problem does not occur in 3.1.1 and only started with 3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833, so it seems like some regression was possible between builds within GUI version 1.65? Build 6912 in 3.1.3 for Mavericks still exhibits the behavior as Yan mentioned.

Best,

David

On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org>> wrote:

On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:

Hi Simon,

It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well?


Yes it should, since the code didn't change since 3.1.1.


I tried also to run R from the terminal and found no rendering issues there,

That has nothing to do with it - R is not using any Cocoa for text on the command line - and Terminal is not likely to use NSTextView.


which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?


Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be odd - I'll check tomorrow when I'm back at a Yosemite machine.

Cheers,
Simon



Cheers,
Yan

On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org>> wrote:

On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu>> wrote:

Hello Yan,

I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.


There were no code changes on our end.

AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.

It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.

Cheers,
Simon



Best,

David

PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!

On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com><mailto:ALPEROVYCH at em-lyon.com>> wrote:
Hi Simon & David,

Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.

Best,

Yan Alperovych, Ph.D.
Associate Professor of Finance
EMLYON Business School
Tel.: +33 4 72 18 29 11<tel:%2B33%204%2072%2018%2029%2011>
E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com><mailto:alperovych at em-lyon.com><mailto:alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>>
LinkedIN: fr.linkedin.com/in/yanalperovych<http://fr.linkedin.com/in/yanalperovych>/<http://fr.linkedin.com/in/yanalperovych/><http://fr.linkedin.com/in/yanalperovych/>

On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:

Thank you both, I'll look into this as soon as I get back from travels.
Simon


On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:

Dear Simon,

Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:

<Screen Shot 2015-02-23 at 4.12.35 PM.png>

As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):

<Screen Shot 2015-02-23 at 4.13.09 PM.png>

More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:

options(max.print=99999)
temp <- data.frame(1:100000, 1:100000)
temp

This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).

It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.

I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.

Best,

David



On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).

Cheers,
S


On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:

Dear Yan,

Are you still seeing this issue? It has been bothering me for months now,
and I even found an instance where using progress_bar with underlying
output to the GUI will cause so much slowdown as to crash R given
sufficient time (i.e., as hidden printed output piles
up in the background, the whole process slows to a crawl).

Best,

David

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac





--
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073<tel:434-535-6073>
dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac



----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.




--
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073<tel:434-535-6073>
dd2es at virginia.edu<mailto:dd2es at virginia.edu>



----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.




--
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073
dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu>


----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.



----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.

From bhh at xs4all.nl  Wed Apr 26 08:59:38 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Wed, 26 Apr 2017 08:59:38 +0200
Subject: [R-SIG-Mac] Packages gmp and Rmpfr
Message-ID: <F999B800-CBD1-43FF-AC33-86696AD219D0@xs4all.nl>


Packages gmp and Rmpfr are currently not available as el Capitan binaries (for R-3.4.0).

Will they be available for R-3.4.0 or do we have to build the packages ourselves from scratch?

Berend Hasselman


From james.f.hester at gmail.com  Wed Apr 26 18:16:16 2017
From: james.f.hester at gmail.com (Jim Hester)
Date: Wed, 26 Apr 2017 12:16:16 -0400
Subject: [R-SIG-Mac] R-3.3.3.pkg not archived after R-3.4.0 release
Message-ID: <CAD6tx96=tnhe8KLjpknVEObAvJ-EDV=eoYi6GMPDacEQdh+H9Q@mail.gmail.com>

Could R-3.3.3.pkg be moved into the `
https://cloud.r-project.org/bin/macosx/old/` directory with the other past
releases? We look for the `.pkg` file for past releases there in the travis
script, and R-3.3.3 has not been copied there yet. (see also
https://github.com/travis-ci/travis-ci/issues/7665)

Thanks,

Jim

	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Wed Apr 26 18:32:27 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Wed, 26 Apr 2017 10:32:27 -0600
Subject: [R-SIG-Mac] R-3.3.3.pkg not archived after R-3.4.0 release
In-Reply-To: <CAD6tx96=tnhe8KLjpknVEObAvJ-EDV=eoYi6GMPDacEQdh+H9Q@mail.gmail.com>
References: <CAD6tx96=tnhe8KLjpknVEObAvJ-EDV=eoYi6GMPDacEQdh+H9Q@mail.gmail.com>
Message-ID: <29ACE2E2-663A-4C68-A951-F9C83DC90751@comcast.net>

I don't think CRAN administers that repo.

> On Apr 26, 2017, at 10:16 AM, Jim Hester <james.f.hester at gmail.com> wrote:
> 
> Could R-3.3.3.pkg be moved into the `
> https://cloud.r-project.org/bin/macosx/old/` directory with the other past
> releases? We look for the `.pkg` file for past releases there in the travis
> script, and R-3.3.3 has not been copied there yet. (see also
> https://github.com/travis-ci/travis-ci/issues/7665)
> 
> Thanks,
> 
> Jim
> 
>    [[alternative HTML version deleted]]
> 

And rhelp is plain text.

David
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From dwinsemius at comcast.net  Wed Apr 26 18:54:26 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Wed, 26 Apr 2017 10:54:26 -0600
Subject: [R-SIG-Mac] R-3.3.3.pkg not archived after R-3.4.0 release
In-Reply-To: <CAD6tx96=tnhe8KLjpknVEObAvJ-EDV=eoYi6GMPDacEQdh+H9Q@mail.gmail.com>
References: <CAD6tx96=tnhe8KLjpknVEObAvJ-EDV=eoYi6GMPDacEQdh+H9Q@mail.gmail.com>
Message-ID: <1EB04E6B-280D-4C9B-B108-045542BDFCE8@comcast.net>



Sent from my iPhone

> On Apr 26, 2017, at 10:16 AM, Jim Hester <james.f.hester at gmail.com> wrote:
> 
> Could R-3.3.3.pkg be moved into the `
> https://cloud.r-project.org/bin/macosx/old/` directory with the other past
> releases? We look for the `.pkg` file for past releases there in the travis
> script, and R-3.3.3 has not been copied there yet. (see also
> https://github.com/travis-ci/travis-ci/issues/7665)

If you need it in the meantime, you can get it here:

https://r.research.att.com/

David
> 
> Thanks,
> 
> Jim
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

	[[alternative HTML version deleted]]


From tuexy.xiaojie at gmail.com  Wed Apr 12 17:25:04 2017
From: tuexy.xiaojie at gmail.com (Qiu Xiaojie)
Date: Wed, 12 Apr 2017 15:25:04 -0000
Subject: [R-SIG-Mac] Problem with Rcpp on R-3.4 beta (r72492)
In-Reply-To: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
References: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
Message-ID: <a9e57797-5bdd-4d72-b3be-7ced6e41d7e5@googlegroups.com>


Hi R developers, 

We see the same problem and found that re-install all package with the 
argument "type = 'source" solves this problem. I don't know what is the 
reason for this but someone may answer it. 

On Friday, April 7, 2017 at 2:11:26 AM UTC-7, Berend Hasselman wrote:
>
>
> Hi, 
>
> I have downloaded and installed R from R-3.4-r72492-branch-el-capitan.pkg. 
> My OS: OS X El Capitan (10.11.6) 
>
> My packages and all additional tests of these are working correctly. 
>
> I can install Rcpp. 
> Packages requiring Rcpp however don't seem to install or run. 
>
>
> Running otool -L on 
> /Library/Frameworks/R.framework/Versions/3.4/Resources/library/Rcpp/libs/Rcpp.so 
>
> gives 
>
> Rcpp.so: 
>         Rcpp.so (compatibility version 0.0.0, current version 0.0.0) 
>         /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib 
> (compatibility version 3.4.0, current version 3.4.0) 
>         /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation 
> (compatibility version 150.0.0, current version 1259.0.0) 
>         /usr/local/clang4/lib/libc++.1.dylib (compatibility version 1.0.0, 
> current version 1.0.0) 
>         /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current 
> version 1226.10.1) 
>
>
> I don't have  /usr/local/clang4/lib/libc++.1.dylib. 
> I wouldn't know where to get it from. AFAIK The macOS Commandline Tools do 
> not install stuff in /usr/local. 
> If this isn't a mishap: where do we get the necessary libc++.1.dylib from? 
>
> Berend Hasselman 
>
> _______________________________________________ 
> R-SIG-Mac mailing list 
> R-SI... at r-project.org <javascript:> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170412/054e96e0/attachment-0002.html>

From tuexy.xiaojie at gmail.com  Wed Apr 12 17:25:08 2017
From: tuexy.xiaojie at gmail.com (Qiu Xiaojie)
Date: Wed, 12 Apr 2017 15:25:08 -0000
Subject: [R-SIG-Mac] Problem with Rcpp on R-3.4 beta (r72492)
In-Reply-To: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
References: <60E6F4BF-CF51-44DB-8921-B6911936D445@xs4all.nl>
Message-ID: <a9e57797-5bdd-4d72-b3be-7ced6e41d7e5@googlegroups.com>


Hi R developers, 

We see the same problem and found that re-install all package with the 
argument "type = 'source" solves this problem. I don't know what is the 
reason for this but someone may answer it. 

On Friday, April 7, 2017 at 2:11:26 AM UTC-7, Berend Hasselman wrote:
>
>
> Hi, 
>
> I have downloaded and installed R from R-3.4-r72492-branch-el-capitan.pkg. 
> My OS: OS X El Capitan (10.11.6) 
>
> My packages and all additional tests of these are working correctly. 
>
> I can install Rcpp. 
> Packages requiring Rcpp however don't seem to install or run. 
>
>
> Running otool -L on 
> /Library/Frameworks/R.framework/Versions/3.4/Resources/library/Rcpp/libs/Rcpp.so 
>
> gives 
>
> Rcpp.so: 
>         Rcpp.so (compatibility version 0.0.0, current version 0.0.0) 
>         /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib 
> (compatibility version 3.4.0, current version 3.4.0) 
>         /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation 
> (compatibility version 150.0.0, current version 1259.0.0) 
>         /usr/local/clang4/lib/libc++.1.dylib (compatibility version 1.0.0, 
> current version 1.0.0) 
>         /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current 
> version 1226.10.1) 
>
>
> I don't have  /usr/local/clang4/lib/libc++.1.dylib. 
> I wouldn't know where to get it from. AFAIK The macOS Commandline Tools do 
> not install stuff in /usr/local. 
> If this isn't a mishap: where do we get the necessary libc++.1.dylib from? 
>
> Berend Hasselman 
>
> _______________________________________________ 
> R-SIG-Mac mailing list 
> R-SI... at r-project.org <javascript:> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20170412/054e96e0/attachment-0003.html>

From catalinroibu at gmail.com  Tue Apr 25 08:49:33 2017
From: catalinroibu at gmail.com (catalin roibu)
Date: Tue, 25 Apr 2017 06:49:33 -0000
Subject: [R-SIG-Mac] R 3.4.0 problem
Message-ID: <CAEW+BD+YYibt97NEv79yFB3zhg4gzxeHn5LNnPNYoKvBB00cuw@mail.gmail.com>

Dear all,

I have a problem with the newest R version. I'm trying to install a
specific package dplR who need the gpm package and I have this error on my
macbook (OS Sierra):

> install.packages("dplR")
also installing the dependency ?gmp?

Packages which are only available in source form, and may
  need compilation of C/C++/Fortran: ?gmp? ?dplR?
Do you want to attempt to install these from sources?
y/n: y
installing the source packages ?gmp?, ?dplR?

trying URL 'https://cran.rstudio.com/src/contrib/gmp_0.5-13.1.tar.gz'
Content type 'application/x-gzip' length 131321 bytes (128 KB)
==================================================
downloaded 128 KB

trying URL 'https://cran.rstudio.com/src/contrib/dplR_1.6.5.tar.gz'
Content type 'application/x-gzip' length 1672999 bytes (1.6 MB)
==================================================
downloaded 1.6 MB

* installing *source* package ?gmp? ...
** package ?gmp? successfully unpacked and MD5 sums checked
creating cache ./config.cache
checking for __gmpz_ui_sub in -lgmp... no
configure: error: GNU MP not found, or not 4.1.4 or up, see
http://gmplib.org
ERROR: configuration failed for package ?gmp?
* removing ?/Library/Frameworks/R.framework/Versions/3.4/
Resources/library/gmp?
Warning in install.packages :
  installation of package ?gmp? had non-zero exit status
ERROR: dependency ?gmp? is not available for package ?dplR?
* removing ?/Library/Frameworks/R.framework/Versions/3.4/
Resources/library/dplR?
Warning in install.packages :
  installation of package ?dplR? had non-zero exit status

The downloaded source packages are in
?/private/var/folders/c5/6g4vbk5x55586m8ky2v_6pbc0000gn/T/RtmprYzSE8/
downloaded_packages?


All the other packages work in good conditions.
Please help me to solve this annoying situation.

Best regards!

CR


-- 

-
-
Catalin-Constantin ROIBU
?
Lecturer PhD, Forestry engineer
Forestry Faculty of Suceava
Str. Universitatii no. 13, Suceava, 720229, Romania
office phone      +4 0230 52 29 78, ext. 531
mobile phone    +4 0745 53 18 01
FAX:                +4 0230 52 16 64
silvic.usv.ro <http://www.usv.ro/>



  <https://mailtrack.io/> Sent with Mailtrack
<https://mailtrack.io/install?source=signature&lang=en&referral=catalinroibu at gmail.com&idSignature=22>
<#>

	[[alternative HTML version deleted]]


From luisabahnemann at gmx.de  Wed Apr 26 18:39:44 2017
From: luisabahnemann at gmx.de (Luisa Bahnemann)
Date: Wed, 26 Apr 2017 16:39:44 -0000
Subject: [R-SIG-Mac] Please help! Package Installer doesn't work.
Message-ID: <F52DCBFF-AC62-4135-B806-DA687DCF4D61@gmx.de>

Hello ,
I?ve only installed R (R 3.4.0 GUI 1.70 El Capitan build (7338))
a few days ago . Now every time I try to install a package I can?t even see the list of packages and R completely freezes.
Then it shows this :

Warnung: unable to access index for repository https://mirrors.cicku.me/CRAN/bin/macosx/el-capitan/contrib/3.4:
  kann URL 'https://mirrors.cicku.me/CRAN/bin/macosx/el-capitan/contrib/3.4/PACKAGES' nicht ?ffnen

Could you please help me?
I already reinstalled but it didn?t help.

Thankyou !
Luisa Bahnemann

