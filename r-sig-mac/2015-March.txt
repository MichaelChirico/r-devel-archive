From behrman at stanford.edu  Tue Mar 10 01:18:51 2015
From: behrman at stanford.edu (Bill Behrman)
Date: Mon, 9 Mar 2015 17:18:51 -0700
Subject: [R-SIG-Mac] Fixing configure scripts for rgeos and rgdal for OS X
Message-ID: <1470F471-3343-40A0-A2F8-008664E077A5@stanford.edu>



CRAN does not currently offer binaries for rgeos or rgdal for OS X Maverick+, and the configure scripts do not work for compiling these packages from source.

With a Mac running OS 10.9.5 and GDAL 1.11 Complete downloaded from

http://www.kyngchaos.com/software/frameworks

I was able to compile these packages with configure.args set as follows

rgeos:

--with-geos-config=/Library/Frameworks/GEOS.framework/Versions/Current/unix/bin/geos-config

rgdal:

--with-gdal-config=/Library/Frameworks/GDAL.framework/Versions/Current/unix/bin/gdal-config
--with-proj-include=/Library/Frameworks/PROJ.framework/unix/include
--with-proj-lib=/Library/Frameworks/PROJ.framework/unix/lib
--with-proj-share=/Library/Frameworks/PROJ.framework/unix/share/proj

If the configure scripts for rgeos and rgdal could be updated to appropriately set these arguments, this may enable binaries to be available from CRAN.

Kind wishes,

Bill



	[[alternative HTML version deleted]]


From ripley at stats.ox.ac.uk  Tue Mar 10 07:17:40 2015
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 10 Mar 2015 06:17:40 +0000
Subject: [R-SIG-Mac] Fixing configure scripts for rgeos and rgdal for OS
 X
In-Reply-To: <1470F471-3343-40A0-A2F8-008664E077A5@stanford.edu>
References: <1470F471-3343-40A0-A2F8-008664E077A5@stanford.edu>
Message-ID: <54FE8C84.80608@stats.ox.ac.uk>

On 10/03/2015 00:18, Bill Behrman wrote:
>
>
> CRAN does not currently offer binaries for rgeos or rgdal for OS X Maverick+, and the configure scripts do not work for compiling these packages from source.

Not true: see the 'mavericks' lines in the CRAN check summaries for 
those packages, and

 > setRepositories(ind=6)
 > available.packages()
       Package Version  Priority Depends
rgdal "rgdal" "0.8-16" NA       "R (>= 2.14.0), methods, sp (>= 1.0-9)"
rgeos "rgeos" "0.3-4"  NA       "R (>= 2.14.0)"
....



> With a Mac running OS 10.9.5 and GDAL 1.11 Complete downloaded from
>
> http://www.kyngchaos.com/software/frameworks
>
> I was able to compile these packages with configure.args set as follows
>
> rgeos:
>
> --with-geos-config=/Library/Frameworks/GEOS.framework/Versions/Current/unix/bin/geos-config
>
> rgdal:
>
> --with-gdal-config=/Library/Frameworks/GDAL.framework/Versions/Current/unix/bin/gdal-config
> --with-proj-include=/Library/Frameworks/PROJ.framework/unix/include
> --with-proj-lib=/Library/Frameworks/PROJ.framework/unix/lib
> --with-proj-share=/Library/Frameworks/PROJ.framework/unix/share/proj
>
> If the configure scripts for rgeos and rgdal could be updated to appropriately set these arguments, this may enable binaries to be available from CRAN.

It is not appropriate to set values for just one version of the external 
binaries.  Like almost all other packages, the ones on CRAN(xtras) are 
built with static libraries (and unchanged packages).

> Kind wishes,
>
> Bill
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford
1 South Parks Road, Oxford OX1 3TG, UK


From ALPEROVYCH at em-lyon.com  Wed Mar 11 10:44:17 2015
From: ALPEROVYCH at em-lyon.com (ALPEROVYCH Yan)
Date: Wed, 11 Mar 2015 10:44:17 +0100
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
Message-ID: <55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>

Hi Simon & David,

Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.

Best,

Yan Alperovych, Ph.D.
Associate Professor of Finance
EMLYON Business School
Tel.: +33 4 72 18 29 11
E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>
LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/>

On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:

Thank you both, I'll look into this as soon as I get back from travels.
Simon


On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:

Dear Simon,

Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:

<Screen Shot 2015-02-23 at 4.12.35 PM.png>

As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):

<Screen Shot 2015-02-23 at 4.13.09 PM.png>

More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:

options(max.print=99999)
temp <- data.frame(1:100000, 1:100000)
temp

This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).

It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.

I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.

Best,

David



On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).

Cheers,
S


On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:

Dear Yan,

Are you still seeing this issue? It has been bothering me for months now,
and I even found an instance where using progress_bar with underlying
output to the GUI will cause so much slowdown as to crash R given
sufficient time (i.e., as hidden printed output piles
up in the background, the whole process slows to a crawl).

Best,

David

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac





--
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073
dd2es at virginia.edu<mailto:dd2es at virginia.edu>

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-------------- next part --------------

----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confide...{{dropped:11}}

From simon.urbanek at r-project.org  Wed Mar 11 21:21:02 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 11 Mar 2015 16:21:02 -0400
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
Message-ID: <0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>

On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu> wrote:
> 
> Hello Yan,
> 
> I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.
> 

There were no code changes on our end.

AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.

It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.

Cheers,
Simon



> Best,
> 
> David
> 
> PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!
> 
> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> Hi Simon & David,
> 
> Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.
> 
> Best,
> 
> Yan Alperovych, Ph.D.
> Associate Professor of Finance
> EMLYON Business School
> Tel.: +33 4 72 18 29 11
> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>
> LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/>
> 
> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> 
> Thank you both, I'll look into this as soon as I get back from travels.
> Simon
> 
> 
> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
> 
> Dear Simon,
> 
> Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:
> 
> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
> 
> As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):
> 
> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
> 
> More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:
> 
> options(max.print=99999)
> temp <- data.frame(1:100000, 1:100000)
> temp
> 
> This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).
> 
> It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.
> 
> I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.
> 
> Best,
> 
> David
> 
> 
> 
> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).
> 
> Cheers,
> S
> 
> 
> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
> 
> Dear Yan,
> 
> Are you still seeing this issue? It has been bothering me for months now,
> and I even found an instance where using progress_bar with underlying
> output to the GUI will cause so much slowdown as to crash R given
> sufficient time (i.e., as hidden printed output piles
> up in the background, the whole process slows to a crawl).
> 
> Best,
> 
> David
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 
> 
> 
> --
> David Dobolyi, M.A.
> PhD Candidate
> Cognitive Psychology
> University of Virginia
> 434-535-6073
> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 
> ----
> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
> 
> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> 
> 
> 
> -- 
> David Dobolyi, M.A.
> PhD Candidate
> Cognitive Psychology
> University of Virginia
> 434-535-6073
> dd2es at virginia.edu


From ALPEROVYCH at em-lyon.com  Wed Mar 11 22:17:37 2015
From: ALPEROVYCH at em-lyon.com (ALPEROVYCH Yan)
Date: Wed, 11 Mar 2015 22:17:37 +0100
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
Message-ID: <8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>

Hi Simon, 

It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well? 

I tried also to run R from the terminal and found no rendering issues there, which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?

Cheers, 
Yan

> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu> wrote:
>> 
>> Hello Yan,
>> 
>> I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.
>> 
> 
> There were no code changes on our end.
> 
> AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.
> 
> It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.
> 
> Cheers,
> Simon
> 
> 
> 
>> Best,
>> 
>> David
>> 
>> PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!
>> 
>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>> Hi Simon & David,
>> 
>> Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.
>> 
>> Best,
>> 
>> Yan Alperovych, Ph.D.
>> Associate Professor of Finance
>> EMLYON Business School
>> Tel.: +33 4 72 18 29 11
>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>
>> LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/>
>> 
>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>> 
>> Thank you both, I'll look into this as soon as I get back from travels.
>> Simon
>> 
>> 
>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>> 
>> Dear Simon,
>> 
>> Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:
>> 
>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
>> 
>> As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):
>> 
>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
>> 
>> More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:
>> 
>> options(max.print=99999)
>> temp <- data.frame(1:100000, 1:100000)
>> temp
>> 
>> This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).
>> 
>> It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.
>> 
>> I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.
>> 
>> Best,
>> 
>> David
>> 
>> 
>> 
>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>> Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).
>> 
>> Cheers,
>> S
>> 
>> 
>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>> 
>> Dear Yan,
>> 
>> Are you still seeing this issue? It has been bothering me for months now,
>> and I even found an instance where using progress_bar with underlying
>> output to the GUI will cause so much slowdown as to crash R given
>> sufficient time (i.e., as hidden printed output piles
>> up in the background, the whole process slows to a crawl).
>> 
>> Best,
>> 
>> David
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> 
>> 
>> 
>> --
>> David Dobolyi, M.A.
>> PhD Candidate
>> Cognitive Psychology
>> University of Virginia
>> 434-535-6073
>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> 
>> ----
>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>> 
>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>> 
>> 
>> 
>> 
>> -- 
>> David Dobolyi, M.A.
>> PhD Candidate
>> Cognitive Psychology
>> University of Virginia
>> 434-535-6073
>> dd2es at virginia.edu
> 


----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden. 

From simon.urbanek at r-project.org  Wed Mar 11 22:58:01 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 11 Mar 2015 17:58:01 -0400
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
	<8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
Message-ID: <24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>


> On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> 
> Hi Simon, 
> 
> It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well? 
> 

Yes it should, since the code didn't change since 3.1.1.


> I tried also to run R from the terminal and found no rendering issues there,

That has nothing to do with it - R is not using any Cocoa for text on the command line - and Terminal is not likely to use NSTextView.


> which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?
> 

Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be odd - I'll check tomorrow when I'm back at a Yosemite machine.

Cheers,
Simon



> Cheers, 
> Yan
> 
>> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu> wrote:
>>> 
>>> Hello Yan,
>>> 
>>> I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.
>>> 
>> 
>> There were no code changes on our end.
>> 
>> AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.
>> 
>> It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> Best,
>>> 
>>> David
>>> 
>>> PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!
>>> 
>>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>>> Hi Simon & David,
>>> 
>>> Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.
>>> 
>>> Best,
>>> 
>>> Yan Alperovych, Ph.D.
>>> Associate Professor of Finance
>>> EMLYON Business School
>>> Tel.: +33 4 72 18 29 11
>>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>
>>> LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/>
>>> 
>>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>>> 
>>> Thank you both, I'll look into this as soon as I get back from travels.
>>> Simon
>>> 
>>> 
>>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>>> 
>>> Dear Simon,
>>> 
>>> Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:
>>> 
>>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
>>> 
>>> As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):
>>> 
>>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
>>> 
>>> More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:
>>> 
>>> options(max.print=99999)
>>> temp <- data.frame(1:100000, 1:100000)
>>> temp
>>> 
>>> This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).
>>> 
>>> It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.
>>> 
>>> I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.
>>> 
>>> Best,
>>> 
>>> David
>>> 
>>> 
>>> 
>>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>>> Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).
>>> 
>>> Cheers,
>>> S
>>> 
>>> 
>>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>>> 
>>> Dear Yan,
>>> 
>>> Are you still seeing this issue? It has been bothering me for months now,
>>> and I even found an instance where using progress_bar with underlying
>>> output to the GUI will cause so much slowdown as to crash R given
>>> sufficient time (i.e., as hidden printed output piles
>>> up in the background, the whole process slows to a crawl).
>>> 
>>> Best,
>>> 
>>> David
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> 
>>> 
>>> 
>>> 
>>> --
>>> David Dobolyi, M.A.
>>> PhD Candidate
>>> Cognitive Psychology
>>> University of Virginia
>>> 434-535-6073
>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> 
>>> 
>>> ----
>>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>>> 
>>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>> 
>>> 
>>> 
>>> 
>>> -- 
>>> David Dobolyi, M.A.
>>> PhD Candidate
>>> Cognitive Psychology
>>> University of Virginia
>>> 434-535-6073
>>> dd2es at virginia.edu
>> 
> 
> 
> ----
> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
> 
> This email and any files transmitted with it are confi...{{dropped:9}}


From ALPEROVYCH at em-lyon.com  Wed Mar 11 23:39:17 2015
From: ALPEROVYCH at em-lyon.com (ALPEROVYCH Yan)
Date: Wed, 11 Mar 2015 23:39:17 +0100
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
	<8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
	<24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>
	<CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>
Message-ID: <FA81063D-57D6-4584-8800-8D5A7B9B9DE1@em-lyon.com>

Yes Simon, the 3.1.1 version works perfectly on Yosemite. This behavior started from 3.1.2 and now is through in 3.1.3.
Cheers,
Yan

On Mar 11, 2015, at 11:07 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:

I can confirm the problem does not occur in 3.1.1 and only started with 3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833, so it seems like some regression was possible between builds within GUI version 1.65? Build 6912 in 3.1.3 for Mavericks still exhibits the behavior as Yan mentioned.

Best,

David

On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:

> On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>
> Hi Simon,
>
> It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well?
>

Yes it should, since the code didn't change since 3.1.1.


> I tried also to run R from the terminal and found no rendering issues there,

That has nothing to do with it - R is not using any Cocoa for text on the command line - and Terminal is not likely to use NSTextView.


> which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?
>

Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be odd - I'll check tomorrow when I'm back at a Yosemite machine.

Cheers,
Simon



> Cheers,
> Yan
>
>> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>>
>> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>>>
>>> Hello Yan,
>>>
>>> I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.
>>>
>>
>> There were no code changes on our end.
>>
>> AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.
>>
>> It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.
>>
>> Cheers,
>> Simon
>>
>>
>>
>>> Best,
>>>
>>> David
>>>
>>> PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!
>>>
>>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>> Hi Simon & David,
>>>
>>> Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.
>>>
>>> Best,
>>>
>>> Yan Alperovych, Ph.D.
>>> Associate Professor of Finance
>>> EMLYON Business School
>>> Tel.: +33 4 72 18 29 11<tel:%2B33%204%2072%2018%2029%2011>
>>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com><mailto:alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>>
>>> LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/><http://fr.linkedin.com/in/yanalperovych/>
>>>
>>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
>>>
>>> Thank you both, I'll look into this as soon as I get back from travels.
>>> Simon
>>>
>>>
>>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:
>>>
>>> Dear Simon,
>>>
>>> Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:
>>>
>>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
>>>
>>> As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):
>>>
>>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
>>>
>>> More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:
>>>
>>> options(max.print=99999)
>>> temp <- data.frame(1:100000, 1:100000)
>>> temp
>>>
>>> This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).
>>>
>>> It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.
>>>
>>> I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.
>>>
>>> Best,
>>>
>>> David
>>>
>>>
>>>
>>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
>>> Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).
>>>
>>> Cheers,
>>> S
>>>
>>>
>>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:
>>>
>>> Dear Yan,
>>>
>>> Are you still seeing this issue? It has been bothering me for months now,
>>> and I even found an instance where using progress_bar with underlying
>>> output to the GUI will cause so much slowdown as to crash R given
>>> sufficient time (i.e., as hidden printed output piles
>>> up in the background, the whole process slows to a crawl).
>>>
>>> Best,
>>>
>>> David
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>>
>>>
>>>
>>> --
>>> David Dobolyi, M.A.
>>> PhD Candidate
>>> Cognitive Psychology
>>> University of Virginia
>>> 434-535-6073<tel:434-535-6073>
>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>>
>>> ----
>>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>>>
>>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>>
>>>
>>>
>>>
>>> --
>>> David Dobolyi, M.A.
>>> PhD Candidate
>>> Cognitive Psychology
>>> University of Virginia
>>> 434-535-6073<tel:434-535-6073>
>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>>
>
>
> ----
> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>
> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.




--
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073
dd2es at virginia.edu<mailto:dd2es at virginia.edu>


----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden. 

From simon.urbanek at r-project.org  Thu Mar 12 02:06:17 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 11 Mar 2015 21:06:17 -0400
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
	<8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
	<24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>
	<CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>
Message-ID: <97369226-8FC5-427B-9459-30D7B497B0F5@r-project.org>


On Mar 11, 2015, at 6:07 PM, David Dobolyi <dd2es at virginia.edu> wrote:

> I can confirm the problem does not occur in 3.1.1 and only started with 3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833, so it seems like some regression was possible between builds within GUI version 1.65?

No, the SVN revisions are shared with other R packages that why the revisions change even if the sources don't (see svn diff -r 6784).


> Build 6912 in 3.1.3 for Mavericks still exhibits the behavior as Yan mentioned.
> 

That is odd - the only explanation I can think of would be changes in Xcode versions, i.e. in the toolchain. I'll check when I'm back on a Yosemite machine.

Thanks,
Simon


> Best,
> 
> David
> 
> On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> > On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> >
> > Hi Simon,
> >
> > It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well?
> >
> 
> Yes it should, since the code didn't change since 3.1.1.
> 
> 
> > I tried also to run R from the terminal and found no rendering issues there,
> 
> That has nothing to do with it - R is not using any Cocoa for text on the command line - and Terminal is not likely to use NSTextView.
> 
> 
> > which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?
> >
> 
> Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be odd - I'll check tomorrow when I'm back at a Yosemite machine.
> 
> Cheers,
> Simon
> 
> 
> 
> > Cheers,
> > Yan
> >
> >> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> >>
> >> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu> wrote:
> >>>
> >>> Hello Yan,
> >>>
> >>> I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.
> >>>
> >>
> >> There were no code changes on our end.
> >>
> >> AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.
> >>
> >> It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.
> >>
> >> Cheers,
> >> Simon
> >>
> >>
> >>
> >>> Best,
> >>>
> >>> David
> >>>
> >>> PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!
> >>>
> >>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> >>> Hi Simon & David,
> >>>
> >>> Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.
> >>>
> >>> Best,
> >>>
> >>> Yan Alperovych, Ph.D.
> >>> Associate Professor of Finance
> >>> EMLYON Business School
> >>> Tel.: +33 4 72 18 29 11
> >>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>
> >>> LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/>
> >>>
> >>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> >>>
> >>> Thank you both, I'll look into this as soon as I get back from travels.
> >>> Simon
> >>>
> >>>
> >>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
> >>>
> >>> Dear Simon,
> >>>
> >>> Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:
> >>>
> >>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
> >>>
> >>> As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):
> >>>
> >>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
> >>>
> >>> More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:
> >>>
> >>> options(max.print=99999)
> >>> temp <- data.frame(1:100000, 1:100000)
> >>> temp
> >>>
> >>> This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).
> >>>
> >>> It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.
> >>>
> >>> I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.
> >>>
> >>> Best,
> >>>
> >>> David
> >>>
> >>>
> >>>
> >>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> >>> Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).
> >>>
> >>> Cheers,
> >>> S
> >>>
> >>>
> >>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
> >>>
> >>> Dear Yan,
> >>>
> >>> Are you still seeing this issue? It has been bothering me for months now,
> >>> and I even found an instance where using progress_bar with underlying
> >>> output to the GUI will cause so much slowdown as to crash R given
> >>> sufficient time (i.e., as hidden printed output piles
> >>> up in the background, the whole process slows to a crawl).
> >>>
> >>> Best,
> >>>
> >>> David
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> --
> >>> David Dobolyi, M.A.
> >>> PhD Candidate
> >>> Cognitive Psychology
> >>> University of Virginia
> >>> 434-535-6073
> >>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>
> >>>
> >>>
> >>> ----
> >>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
> >>>
> >>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> >>>
> >>>
> >>>
> >>>
> >>> --
> >>> David Dobolyi, M.A.
> >>> PhD Candidate
> >>> Cognitive Psychology
> >>> University of Virginia
> >>> 434-535-6073
> >>> dd2es at virginia.edu
> >>
> >
> >
> > ----
> > Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
> >
> > This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> 
> 
> 
> -- 
> David Dobolyi, M.A.
> PhD Candidate
> Cognitive Psychology
> University of Virginia
> 434-535-6073
> dd2es at virginia.edu


From simon.urbanek at r-project.org  Fri Mar 13 15:10:37 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 13 Mar 2015 10:10:37 -0400
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <FA81063D-57D6-4584-8800-8D5A7B9B9DE1@em-lyon.com>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
	<8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
	<24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>
	<CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>
	<FA81063D-57D6-4584-8800-8D5A7B9B9DE1@em-lyon.com>
Message-ID: <26F01093-A811-47B8-B5E3-5B77E0941B3B@r-project.org>

I have more evidence that points at Xcode. If you use the R.app GUI that was compiled at the time of R 3.1.1 - available here:

http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg

then all is well. As we discussed earlier, the code did not change at all and the underlying R version is irrelevant, so the only piece that changed since July last year when this was built was the Xcode version (and thus the compilers used). It's not clear to me at all how the Xcode version can affect NSTextView so badly, so this will require some more digging. In the meantime, please use the above R.app binary.

Cheers,
Simon



> On Mar 11, 2015, at 6:39 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> 
> Yes Simon, the 3.1.1 version works perfectly on Yosemite. This behavior started from 3.1.2 and now is through in 3.1.3.
> Cheers,
> Yan
> 
> On Mar 11, 2015, at 11:07 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
> 
> I can confirm the problem does not occur in 3.1.1 and only started with 3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833, so it seems like some regression was possible between builds within GUI version 1.65? Build 6912 in 3.1.3 for Mavericks still exhibits the behavior as Yan mentioned.
> 
> Best,
> 
> David
> 
> On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> 
>> On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>> 
>> Hi Simon,
>> 
>> It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well?
>> 
> 
> Yes it should, since the code didn't change since 3.1.1.
> 
> 
>> I tried also to run R from the terminal and found no rendering issues there,
> 
> That has nothing to do with it - R is not using any Cocoa for text on the command line - and Terminal is not likely to use NSTextView.
> 
> 
>> which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?
>> 
> 
> Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be odd - I'll check tomorrow when I'm back at a Yosemite machine.
> 
> Cheers,
> Simon
> 
> 
> 
>> Cheers,
>> Yan
>> 
>>> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>>> 
>>> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>>>> 
>>>> Hello Yan,
>>>> 
>>>> I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.
>>>> 
>>> 
>>> There were no code changes on our end.
>>> 
>>> AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.
>>> 
>>> It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>>> Best,
>>>> 
>>>> David
>>>> 
>>>> PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!
>>>> 
>>>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>>> Hi Simon & David,
>>>> 
>>>> Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.
>>>> 
>>>> Best,
>>>> 
>>>> Yan Alperovych, Ph.D.
>>>> Associate Professor of Finance
>>>> EMLYON Business School
>>>> Tel.: +33 4 72 18 29 11<tel:%2B33%204%2072%2018%2029%2011>
>>>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com><mailto:alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>>
>>>> LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/><http://fr.linkedin.com/in/yanalperovych/>
>>>> 
>>>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
>>>> 
>>>> Thank you both, I'll look into this as soon as I get back from travels.
>>>> Simon
>>>> 
>>>> 
>>>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:
>>>> 
>>>> Dear Simon,
>>>> 
>>>> Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:
>>>> 
>>>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
>>>> 
>>>> As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):
>>>> 
>>>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
>>>> 
>>>> More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:
>>>> 
>>>> options(max.print=99999)
>>>> temp <- data.frame(1:100000, 1:100000)
>>>> temp
>>>> 
>>>> This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).
>>>> 
>>>> It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.
>>>> 
>>>> I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.
>>>> 
>>>> Best,
>>>> 
>>>> David
>>>> 
>>>> 
>>>> 
>>>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
>>>> Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).
>>>> 
>>>> Cheers,
>>>> S
>>>> 
>>>> 
>>>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:
>>>> 
>>>> Dear Yan,
>>>> 
>>>> Are you still seeing this issue? It has been bothering me for months now,
>>>> and I even found an instance where using progress_bar with underlying
>>>> output to the GUI will cause so much slowdown as to crash R given
>>>> sufficient time (i.e., as hidden printed output piles
>>>> up in the background, the whole process slows to a crawl).
>>>> 
>>>> Best,
>>>> 
>>>> David
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> --
>>>> David Dobolyi, M.A.
>>>> PhD Candidate
>>>> Cognitive Psychology
>>>> University of Virginia
>>>> 434-535-6073<tel:434-535-6073>
>>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>>> 
>>>> ----
>>>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>>>> 
>>>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>>> 
>>>> 
>>>> 
>>>> 
>>>> --
>>>> David Dobolyi, M.A.
>>>> PhD Candidate
>>>> Cognitive Psychology
>>>> University of Virginia
>>>> 434-535-6073<tel:434-535-6073>
>>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>>> 
>> 
>> 
>> ----
>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>> 
>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 
> 
> 
> 
> --
> David Dobolyi, M.A.
> PhD Candidate
> Cognitive Psychology
> University of Virginia
> 434-535-6073
> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
> 
> 
> ----
> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
> 
> This email and any files transmitted with it are confi...{{dropped:9}}


From ALPEROVYCH at em-lyon.com  Fri Mar 13 17:58:01 2015
From: ALPEROVYCH at em-lyon.com (ALPEROVYCH Yan)
Date: Fri, 13 Mar 2015 17:58:01 +0100
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <26F01093-A811-47B8-B5E3-5B77E0941B3B@r-project.org>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
	<8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
	<24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>
	<CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>
	<FA81063D-57D6-4584-8800-8D5A7B9B9DE1@em-lyon.com>
	<26F01093-A811-47B8-B5E3-5B77E0941B3B@r-project.org>
Message-ID: <E1450DDB-D2A6-40B7-87CF-4E22CDEC962C@em-lyon.com>

Thank you Simon! I?ve just tried it with 3.1.3 and it works brilliantly!
Yan

> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> I have more evidence that points at Xcode. If you use the R.app GUI that was compiled at the time of R 3.1.1 - available here:
> 
> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
> 
> then all is well. As we discussed earlier, the code did not change at all and the underlying R version is irrelevant, so the only piece that changed since July last year when this was built was the Xcode version (and thus the compilers used). It's not clear to me at all how the Xcode version can affect NSTextView so badly, so this will require some more digging. In the meantime, please use the above R.app binary.
> 
> Cheers,
> Simon
> 
> 
> 
>> On Mar 11, 2015, at 6:39 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>> 
>> Yes Simon, the 3.1.1 version works perfectly on Yosemite. This behavior started from 3.1.2 and now is through in 3.1.3.
>> Cheers,
>> Yan
>> 
>> On Mar 11, 2015, at 11:07 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>> 
>> I can confirm the problem does not occur in 3.1.1 and only started with 3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833, so it seems like some regression was possible between builds within GUI version 1.65? Build 6912 in 3.1.3 for Mavericks still exhibits the behavior as Yan mentioned.
>> 
>> Best,
>> 
>> David
>> 
>> On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>> 
>>> On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>> 
>>> Hi Simon,
>>> 
>>> It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well?
>>> 
>> 
>> Yes it should, since the code didn't change since 3.1.1.
>> 
>> 
>>> I tried also to run R from the terminal and found no rendering issues there,
>> 
>> That has nothing to do with it - R is not using any Cocoa for text on the command line - and Terminal is not likely to use NSTextView.
>> 
>> 
>>> which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?
>>> 
>> 
>> Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be odd - I'll check tomorrow when I'm back at a Yosemite machine.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> Cheers,
>>> Yan
>>> 
>>>> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>>>> 
>>>> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>>>>> 
>>>>> Hello Yan,
>>>>> 
>>>>> I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.
>>>>> 
>>>> 
>>>> There were no code changes on our end.
>>>> 
>>>> AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.
>>>> 
>>>> It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.
>>>> 
>>>> Cheers,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>>> Best,
>>>>> 
>>>>> David
>>>>> 
>>>>> PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!
>>>>> 
>>>>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>>>> Hi Simon & David,
>>>>> 
>>>>> Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.
>>>>> 
>>>>> Best,
>>>>> 
>>>>> Yan Alperovych, Ph.D.
>>>>> Associate Professor of Finance
>>>>> EMLYON Business School
>>>>> Tel.: +33 4 72 18 29 11<tel:%2B33%204%2072%2018%2029%2011>
>>>>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com><mailto:alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>>
>>>>> LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/><http://fr.linkedin.com/in/yanalperovych/>
>>>>> 
>>>>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
>>>>> 
>>>>> Thank you both, I'll look into this as soon as I get back from travels.
>>>>> Simon
>>>>> 
>>>>> 
>>>>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:
>>>>> 
>>>>> Dear Simon,
>>>>> 
>>>>> Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:
>>>>> 
>>>>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
>>>>> 
>>>>> As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):
>>>>> 
>>>>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
>>>>> 
>>>>> More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:
>>>>> 
>>>>> options(max.print=99999)
>>>>> temp <- data.frame(1:100000, 1:100000)
>>>>> temp
>>>>> 
>>>>> This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).
>>>>> 
>>>>> It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.
>>>>> 
>>>>> I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.
>>>>> 
>>>>> Best,
>>>>> 
>>>>> David
>>>>> 
>>>>> 
>>>>> 
>>>>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
>>>>> Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).
>>>>> 
>>>>> Cheers,
>>>>> S
>>>>> 
>>>>> 
>>>>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:
>>>>> 
>>>>> Dear Yan,
>>>>> 
>>>>> Are you still seeing this issue? It has been bothering me for months now,
>>>>> and I even found an instance where using progress_bar with underlying
>>>>> output to the GUI will cause so much slowdown as to crash R given
>>>>> sufficient time (i.e., as hidden printed output piles
>>>>> up in the background, the whole process slows to a crawl).
>>>>> 
>>>>> Best,
>>>>> 
>>>>> David
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> David Dobolyi, M.A.
>>>>> PhD Candidate
>>>>> Cognitive Psychology
>>>>> University of Virginia
>>>>> 434-535-6073<tel:434-535-6073>
>>>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>>> 
>>>>> 
>>>>> ----
>>>>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>>>>> 
>>>>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> David Dobolyi, M.A.
>>>>> PhD Candidate
>>>>> Cognitive Psychology
>>>>> University of Virginia
>>>>> 434-535-6073<tel:434-535-6073>
>>>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>>>> 
>>> 
>>> 
>>> ----
>>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>>> 
>>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>> 
>> 
>> 
>> 
>> --
>> David Dobolyi, M.A.
>> PhD Candidate
>> Cognitive Psychology
>> University of Virginia
>> 434-535-6073
>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>> 
>> 
>> ----
>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>> 
>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
> 


----
Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden. 

From simon.urbanek at r-project.org  Fri Mar 13 19:05:24 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 13 Mar 2015 14:05:24 -0400
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <E1450DDB-D2A6-40B7-87CF-4E22CDEC962C@em-lyon.com>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
	<8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
	<24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>
	<CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>
	<FA81063D-57D6-4584-8800-8D5A7B9B9DE1@em-lyon.com>
	<26F01093-A811-47B8-B5E3-5B77E0941B3B@r-project.org>
	<E1450DDB-D2A6-40B7-87CF-4E22CDEC962C@em-lyon.com>
Message-ID: <BCB2FFE6-65FF-4FAB-892C-F1D49F9CAE76@r-project.org>

I can confirm that building with Xcode 5.1.1 doesn't exhibit the issue, while using Xcode 6.1 does. So I'll switch the build process to force using Xcode 5.1.1 instead of Xcode 6. It means that tomorrow's build should hopefully result in a binary without that bug.

Thanks,
Simon


> On Mar 13, 2015, at 12:58 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
> 
> Thank you Simon! I?ve just tried it with 3.1.3 and it works brilliantly!
> Yan
> 
>> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> I have more evidence that points at Xcode. If you use the R.app GUI that was compiled at the time of R 3.1.1 - available here:
>> 
>> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
>> 
>> then all is well. As we discussed earlier, the code did not change at all and the underlying R version is irrelevant, so the only piece that changed since July last year when this was built was the Xcode version (and thus the compilers used). It's not clear to me at all how the Xcode version can affect NSTextView so badly, so this will require some more digging. In the meantime, please use the above R.app binary.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On Mar 11, 2015, at 6:39 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com> wrote:
>>> 
>>> Yes Simon, the 3.1.1 version works perfectly on Yosemite. This behavior started from 3.1.2 and now is through in 3.1.3.
>>> Cheers,
>>> Yan
>>> 
>>> On Mar 11, 2015, at 11:07 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>>> 
>>> I can confirm the problem does not occur in 3.1.1 and only started with 3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833, so it seems like some regression was possible between builds within GUI version 1.65? Build 6912 in 3.1.3 for Mavericks still exhibits the behavior as Yan mentioned.
>>> 
>>> Best,
>>> 
>>> David
>>> 
>>> On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>>> 
>>>> On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>>> 
>>>> Hi Simon,
>>>> 
>>>> It may be a silly question but shouldn?t this Yosemite bug affect the the 3.1.1 version as well?
>>>> 
>>> 
>>> Yes it should, since the code didn't change since 3.1.1.
>>> 
>>> 
>>>> I tried also to run R from the terminal and found no rendering issues there,
>>> 
>>> That has nothing to do with it - R is not using any Cocoa for text on the command line - and Terminal is not likely to use NSTextView.
>>> 
>>> 
>>>> which points on the GUI - Yosemite related bug as you say. The R 3.1.1 version that I have (and in which this rendering problem is not present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make sense / is it possible to run R 3.1.3 with this particular version of GUI?
>>>> 
>>> 
>>> Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be odd - I'll check tomorrow when I'm back at a Yosemite machine.
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>>> Cheers,
>>>> Yan
>>>> 
>>>>> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
>>>>> 
>>>>> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu>> wrote:
>>>>>> 
>>>>>> Hello Yan,
>>>>>> 
>>>>>> I was curious if the new R update would fix this as well, so thanks for clarifying that it sadly does not.
>>>>>> 
>>>>> 
>>>>> There were no code changes on our end.
>>>>> 
>>>>> AFAICT this seems to be an issue in Apple's NSTextView Cocoa implementation in Yosemite. Pretty much all the time is spent in [NSTextView drawRect:] so Apple must have added some rather bad inefficiency to drawing text area in Yosemite. As you fill the console, the response time goes down as the text filed takes longer and longer to render. You can also see it in the editor if you add many lines. When you clear the console, it's responsible again since you don't have that many lines in the text view.
>>>>> 
>>>>> It seems like a serious bug in Yosemite. We don't control the rendering - it's all in Apple's code, so I don't see immediately how we can work around that bug.
>>>>> 
>>>>> Cheers,
>>>>> Simon
>>>>> 
>>>>> 
>>>>> 
>>>>>> Best,
>>>>>> 
>>>>>> David
>>>>>> 
>>>>>> PS. Simon, regardless of this bug, all of your hard work is very much appreciated on an invaluable program!
>>>>>> 
>>>>>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
>>>>>> Hi Simon & David,
>>>>>> 
>>>>>> Just for the record, I've tried the new 3.1.3 version (on the same Yosemite machine) and the issue is still there.
>>>>>> 
>>>>>> Best,
>>>>>> 
>>>>>> Yan Alperovych, Ph.D.
>>>>>> Associate Professor of Finance
>>>>>> EMLYON Business School
>>>>>> Tel.: +33 4 72 18 29 11<tel:%2B33%204%2072%2018%2029%2011>
>>>>>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com><mailto:alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>>
>>>>>> LinkedIN: fr.linkedin.com/in/yanalperovych/<http://fr.linkedin.com/in/yanalperovych/><http://fr.linkedin.com/in/yanalperovych/>
>>>>>> 
>>>>>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
>>>>>> 
>>>>>> Thank you both, I'll look into this as soon as I get back from travels.
>>>>>> Simon
>>>>>> 
>>>>>> 
>>>>>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:
>>>>>> 
>>>>>> Dear Simon,
>>>>>> 
>>>>>> Thank you for your reply. I am using the Mavericks build (running on latest Yosemite), and have noticed this issue ever since I upgraded to 3.1.2:
>>>>>> 
>>>>>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
>>>>>> 
>>>>>> As an aside, I occasionally see errors in the GUI like this, and they seem to come from other apps (e.g., Dropbox):
>>>>>> 
>>>>>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
>>>>>> 
>>>>>> More importantly, I wrote Yan about a workaround, which involves changing the max.print option from the default and limiting it to 1000. This reliably stops R from slowing down over time (although how long, I don't know). However, I can replicate the basic issue easily in R with the following code:
>>>>>> 
>>>>>> options(max.print=99999)
>>>>>> temp <- data.frame(1:100000, 1:100000)
>>>>>> temp
>>>>>> 
>>>>>> This should eventually turn up on screen, and after try typing anything in the console. Typing will be extremely delayed (e.g., type hello and it will take several seconds for each letter to show up, one at a time).
>>>>>> 
>>>>>> It's even possible to crash the GUI if you print something in a function called in a bootstrap, and then invoke a progress bar (e.g., the pROC package). Progress will be steady and then suddenly R will lock up. The moment you remove the print statement (which isn't actually printing since the progress bar is present), the same call works perfectly.
>>>>>> 
>>>>>> I'd love to have a real fix for this other than reducing max.print. I'd dig into the source myself but can't commit the time at the moment.
>>>>>> 
>>>>>> Best,
>>>>>> 
>>>>>> David
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
>>>>>> Are you using the Mavericks build of R? The SL build will do that, because SL has no AppNap support - but then you can also disable AppNap (see the corresponding threads here).
>>>>>> 
>>>>>> Cheers,
>>>>>> S
>>>>>> 
>>>>>> 
>>>>>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>> wrote:
>>>>>> 
>>>>>> Dear Yan,
>>>>>> 
>>>>>> Are you still seeing this issue? It has been bothering me for months now,
>>>>>> and I even found an instance where using progress_bar with underlying
>>>>>> output to the GUI will cause so much slowdown as to crash R given
>>>>>> sufficient time (i.e., as hidden printed output piles
>>>>>> up in the background, the whole process slows to a crawl).
>>>>>> 
>>>>>> Best,
>>>>>> 
>>>>>> David
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> --
>>>>>> David Dobolyi, M.A.
>>>>>> PhD Candidate
>>>>>> Cognitive Psychology
>>>>>> University of Virginia
>>>>>> 434-535-6073<tel:434-535-6073>
>>>>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:dd2es at virginia.edu>>
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> ----
>>>>>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>>>>>> 
>>>>>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> --
>>>>>> David Dobolyi, M.A.
>>>>>> PhD Candidate
>>>>>> Cognitive Psychology
>>>>>> University of Virginia
>>>>>> 434-535-6073<tel:434-535-6073>
>>>>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>>>>> 
>>>> 
>>>> 
>>>> ----
>>>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>>>> 
>>>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>>> 
>>> 
>>> 
>>> 
>>> --
>>> David Dobolyi, M.A.
>>> PhD Candidate
>>> Cognitive Psychology
>>> University of Virginia
>>> 434-535-6073
>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>>> 
>>> 
>>> ----
>>> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
>>> 
>>> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please return it to the sender. The ideas and views expressed in this email are solely those of its author, and do not necessarily represent the views of the institution or company of which the author is an employee. Unauthorized publication, use, distribution, printing or copying of this e-mail or any attached files is strictly forbidden.
>> 
> 
> 
> ----
> Ce message electronique et tous les fichiers attaches qu'il contient sont confidentiels et destines exclusivement ? l'usage de la personne ? laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci de le retourner ? son metteur. Les idees et opinions presentees dans ce message sont celles de son auteur, et ne representent pas necessairement celles de l'institution ou entite affiliee dont l'auteur est l'employe. La publication, l'usage, la distribution, l'impression ou la copie non autorisee de ce message et des attachements qu'il contient sont strictement interdits.
> 
> This email and any files transmitted with it are confi...{{dropped:9}}


From bluebarbarossa at hotmail.com  Tue Mar 10 17:30:21 2015
From: bluebarbarossa at hotmail.com (White Sky)
Date: Tue, 10 Mar 2015 16:30:21 +0000
Subject: [R-SIG-Mac] R 3.1.3 install Mac OSX 10.9.5
Message-ID: <DUB122-W7D3B25499A6A62FC61F01DF180@phx.gbl>

I've got a problem installing R 3.1.3 from source on Mac OSX 10.9.5 with gcc-4.9-bin.tar.gz

./configure ends with:
?R is now configured for x86_64-apple-darwin13.4.0
? Source directory: ? ? ? ? ?.
? Installation directory: ? ?/Library/Frameworks
? C compiler: ? ? ? ? ? ? ? ?gcc ?-g -O2
? Fortran 77 compiler: ? ? ? gfortran ?-g -O2
? C++ compiler: ? ? ? ? ? ? ?g++ ?-g -O2
? C++ 11 compiler: ? ? ? ? ? g++ ?-std=c++11 -g -O2
? Fortran 90/95 compiler: ? ?gfortran -g -O2
? Obj-C compiler:	 ? ?gcc -g -O2 -fobjc-exceptions
? Interfaces supported: ? ? ?X11, aqua, tcltk
? External libraries: ? ? ? ?readline
? Additional capabilities: ? NLS, ICU
? Options enabled: ? ? ? ? ? framework, shared BLAS, R profiling
? Capabilities skipped: ? ? ?PNG, JPEG, TIFF, cairo
? Options not enabled: ? ? ? memory profiling
? Recommended packages: ? ? ?yes

... although also there is a warning during configure
configure: WARNING: X11/Intrinsic.h: accepted by the compiler, rejected by the preprocessor!
configure: WARNING: X11/Intrinsic.h: proceeding with the compiler's result


'make' generates a lot of time-zone warnings, and ends in Done.


'make check' ends with time-zone related errors.
< Warning messages:
< 1: In strptime(xx, f <- "%Y-%m-%d %H:%M:%OS", tz = tz) :
< ? unknown timezone 'Europe/London'
< 2: In strptime(xx, f <- "%Y-%m-%d %H:%M:%OS", tz = tz) :
< ? unknown timezone 'GMT'
< 3: In strptime(xx, f <- "%Y-%m-%d %H:%M:%OS", tz = tz) :
< ? unknown timezone 'America/New_York'
make[3]: *** [simple-true.Rout] Error 1
make[2]: *** [test-Specific] Error 2
make[1]: *** [test-all-basics] Error 1
make: *** [check] Error 2


'make install' returns

make[1]: Nothing to be done for `install'.
make[1]: Nothing to be done for `install'.
installing doc ...
installing doc/html ...
installing doc/manual ...
installing etc ...
installing share ...
chmod: Unable to change file mode on /Library/Frameworks/R.framework/Versions/3.1/Resources/bin/R: Operation not permitted
make[2]: *** [install] Error 1
make[1]: *** [install] Error 1
make: *** [install] Error 1


I've tried ./configure --without-internal-tzcode ...and it doesn't make much difference.

I've checked my?/usr/share/zoneinfo/ all looks normal I guess.

I'm thinking the problem might be related to gfortran, Xcode (updated recently), or permissions. The time-zone issue might be a result rather than a cause. Any advice would be greatly appreciated. 		 	   		  

From dd2es at virginia.edu  Wed Mar 11 19:11:00 2015
From: dd2es at virginia.edu (David Dobolyi)
Date: Wed, 11 Mar 2015 14:11:00 -0400
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
Message-ID: <CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>

Hello Yan,

I was curious if the new R update would fix this as well, so thanks for
clarifying that it sadly does not.

Best,

David

PS. Simon, regardless of this bug, all of your hard work is very much
appreciated on an invaluable program!

On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com>
wrote:

> Hi Simon & David,
>
> Just for the record, I've tried the new 3.1.3 version (on the same
> Yosemite machine) and the issue is still there.
>
> Best,
>
> Yan Alperovych, Ph.D.
> Associate Professor of Finance
> EMLYON Business School
> Tel.: +33 4 72 18 29 11
> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>
> LinkedIN: fr.linkedin.com/in/yanalperovych/<
> http://fr.linkedin.com/in/yanalperovych/>
>
> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <simon.urbanek at r-project.org
> <mailto:simon.urbanek at r-project.org>> wrote:
>
> Thank you both, I'll look into this as soon as I get back from travels.
> Simon
>
>
> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:
> dd2es at virginia.edu>> wrote:
>
> Dear Simon,
>
> Thank you for your reply. I am using the Mavericks build (running on
> latest Yosemite), and have noticed this issue ever since I upgraded to
> 3.1.2:
>
> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
>
> As an aside, I occasionally see errors in the GUI like this, and they seem
> to come from other apps (e.g., Dropbox):
>
> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
>
> More importantly, I wrote Yan about a workaround, which involves changing
> the max.print option from the default and limiting it to 1000. This
> reliably stops R from slowing down over time (although how long, I don't
> know). However, I can replicate the basic issue easily in R with the
> following code:
>
> options(max.print=99999)
> temp <- data.frame(1:100000, 1:100000)
> temp
>
> This should eventually turn up on screen, and after try typing anything in
> the console. Typing will be extremely delayed (e.g., type hello and it will
> take several seconds for each letter to show up, one at a time).
>
> It's even possible to crash the GUI if you print something in a function
> called in a bootstrap, and then invoke a progress bar (e.g., the pROC
> package). Progress will be steady and then suddenly R will lock up. The
> moment you remove the print statement (which isn't actually printing since
> the progress bar is present), the same call works perfectly.
>
> I'd love to have a real fix for this other than reducing max.print. I'd
> dig into the source myself but can't commit the time at the moment.
>
> Best,
>
> David
>
>
>
> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> Are you using the Mavericks build of R? The SL build will do that, because
> SL has no AppNap support - but then you can also disable AppNap (see the
> corresponding threads here).
>
> Cheers,
> S
>
>
> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu<mailto:
> dd2es at virginia.edu>> wrote:
>
> Dear Yan,
>
> Are you still seeing this issue? It has been bothering me for months now,
> and I even found an instance where using progress_bar with underlying
> output to the GUI will cause so much slowdown as to crash R given
> sufficient time (i.e., as hidden printed output piles
> up in the background, the whole process slows to a crawl).
>
> Best,
>
> David
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
>
>
>
> --
> David Dobolyi, M.A.
> PhD Candidate
> Cognitive Psychology
> University of Virginia
> 434-535-6073
> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
>
> ----
> Ce message electronique et tous les fichiers attaches qu'il contient sont
> confidentiels et destines exclusivement ? l'usage de la personne ? laquelle
> ils sont adresses. Si vous avez re?u ce message par erreur, merci de le
> retourner ? son metteur. Les idees et opinions presentees dans ce message
> sont celles de son auteur, et ne representent pas necessairement celles de
> l'institution ou entite affiliee dont l'auteur est l'employe. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autorisee de ce message et des attachements qu'il contient sont strictement
> interdits.
>
> This email and any files transmitted with it are confidential and intended
> solely for the use of the individual or entity to whom they are addressed.
> If you have received this email in error please return it to the sender.
> The ideas and views expressed in this email are solely those of its author,
> and do not necessarily represent the views of the institution or company of
> which the author is an employee. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
>
>


-- 
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073
dd2es at virginia.edu

	[[alternative HTML version deleted]]


From dd2es at virginia.edu  Wed Mar 11 23:07:58 2015
From: dd2es at virginia.edu (David Dobolyi)
Date: Wed, 11 Mar 2015 18:07:58 -0400
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
	<8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
	<24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>
Message-ID: <CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>

I can confirm the problem does not occur in 3.1.1 and only started with
3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833, so it
seems like some regression was possible between builds within GUI version
1.65? Build 6912 in 3.1.3 for Mavericks still exhibits the behavior as Yan
mentioned.

Best,

David

On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

>
> > On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com>
> wrote:
> >
> > Hi Simon,
> >
> > It may be a silly question but shouldn?t this Yosemite bug affect the
> the 3.1.1 version as well?
> >
>
> Yes it should, since the code didn't change since 3.1.1.
>
>
> > I tried also to run R from the terminal and found no rendering issues
> there,
>
> That has nothing to do with it - R is not using any Cocoa for text on the
> command line - and Terminal is not likely to use NSTextView.
>
>
> > which points on the GUI - Yosemite related bug as you say. The R 3.1.1
> version that I have (and in which this rendering problem is not present)
> runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it make
> sense / is it possible to run R 3.1.3 with this particular version of GUI?
> >
>
> Are you saying the 3.1.1 binary didn't exhibit the behavior? That would be
> odd - I'll check tomorrow when I'm back at a Yosemite machine.
>
> Cheers,
> Simon
>
>
>
> > Cheers,
> > Yan
> >
> >> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> >>
> >> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu> wrote:
> >>>
> >>> Hello Yan,
> >>>
> >>> I was curious if the new R update would fix this as well, so thanks
> for clarifying that it sadly does not.
> >>>
> >>
> >> There were no code changes on our end.
> >>
> >> AFAICT this seems to be an issue in Apple's NSTextView Cocoa
> implementation in Yosemite. Pretty much all the time is spent in
> [NSTextView drawRect:] so Apple must have added some rather bad
> inefficiency to drawing text area in Yosemite. As you fill the console, the
> response time goes down as the text filed takes longer and longer to
> render. You can also see it in the editor if you add many lines. When you
> clear the console, it's responsible again since you don't have that many
> lines in the text view.
> >>
> >> It seems like a serious bug in Yosemite. We don't control the rendering
> - it's all in Apple's code, so I don't see immediately how we can work
> around that bug.
> >>
> >> Cheers,
> >> Simon
> >>
> >>
> >>
> >>> Best,
> >>>
> >>> David
> >>>
> >>> PS. Simon, regardless of this bug, all of your hard work is very much
> appreciated on an invaluable program!
> >>>
> >>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <
> ALPEROVYCH at em-lyon.com> wrote:
> >>> Hi Simon & David,
> >>>
> >>> Just for the record, I've tried the new 3.1.3 version (on the same
> Yosemite machine) and the issue is still there.
> >>>
> >>> Best,
> >>>
> >>> Yan Alperovych, Ph.D.
> >>> Associate Professor of Finance
> >>> EMLYON Business School
> >>> Tel.: +33 4 72 18 29 11
> >>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>
> >>> LinkedIN: fr.linkedin.com/in/yanalperovych/<
> http://fr.linkedin.com/in/yanalperovych/>
> >>>
> >>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> >>>
> >>> Thank you both, I'll look into this as soon as I get back from travels.
> >>> Simon
> >>>
> >>>
> >>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu<mailto:
> dd2es at virginia.edu>> wrote:
> >>>
> >>> Dear Simon,
> >>>
> >>> Thank you for your reply. I am using the Mavericks build (running on
> latest Yosemite), and have noticed this issue ever since I upgraded to
> 3.1.2:
> >>>
> >>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
> >>>
> >>> As an aside, I occasionally see errors in the GUI like this, and they
> seem to come from other apps (e.g., Dropbox):
> >>>
> >>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
> >>>
> >>> More importantly, I wrote Yan about a workaround, which involves
> changing the max.print option from the default and limiting it to 1000.
> This reliably stops R from slowing down over time (although how long, I
> don't know). However, I can replicate the basic issue easily in R with the
> following code:
> >>>
> >>> options(max.print=99999)
> >>> temp <- data.frame(1:100000, 1:100000)
> >>> temp
> >>>
> >>> This should eventually turn up on screen, and after try typing
> anything in the console. Typing will be extremely delayed (e.g., type hello
> and it will take several seconds for each letter to show up, one at a time).
> >>>
> >>> It's even possible to crash the GUI if you print something in a
> function called in a bootstrap, and then invoke a progress bar (e.g., the
> pROC package). Progress will be steady and then suddenly R will lock up.
> The moment you remove the print statement (which isn't actually printing
> since the progress bar is present), the same call works perfectly.
> >>>
> >>> I'd love to have a real fix for this other than reducing max.print.
> I'd dig into the source myself but can't commit the time at the moment.
> >>>
> >>> Best,
> >>>
> >>> David
> >>>
> >>>
> >>>
> >>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> >>> Are you using the Mavericks build of R? The SL build will do that,
> because SL has no AppNap support - but then you can also disable AppNap
> (see the corresponding threads here).
> >>>
> >>> Cheers,
> >>> S
> >>>
> >>>
> >>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu
> <mailto:dd2es at virginia.edu>> wrote:
> >>>
> >>> Dear Yan,
> >>>
> >>> Are you still seeing this issue? It has been bothering me for months
> now,
> >>> and I even found an instance where using progress_bar with underlying
> >>> output to the GUI will cause so much slowdown as to crash R given
> >>> sufficient time (i.e., as hidden printed output piles
> >>> up in the background, the whole process slows to a crawl).
> >>>
> >>> Best,
> >>>
> >>> David
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> --
> >>> David Dobolyi, M.A.
> >>> PhD Candidate
> >>> Cognitive Psychology
> >>> University of Virginia
> >>> 434-535-6073
> >>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>
> >>>
> >>>
> >>> ----
> >>> Ce message electronique et tous les fichiers attaches qu'il contient
> sont confidentiels et destines exclusivement ? l'usage de la personne ?
> laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci
> de le retourner ? son metteur. Les idees et opinions presentees dans ce
> message sont celles de son auteur, et ne representent pas necessairement
> celles de l'institution ou entite affiliee dont l'auteur est l'employe. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autorisee de ce message et des attachements qu'il contient sont strictement
> interdits.
> >>>
> >>> This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they are
> addressed. If you have received this email in error please return it to the
> sender. The ideas and views expressed in this email are solely those of its
> author, and do not necessarily represent the views of the institution or
> company of which the author is an employee. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
> >>>
> >>>
> >>>
> >>>
> >>> --
> >>> David Dobolyi, M.A.
> >>> PhD Candidate
> >>> Cognitive Psychology
> >>> University of Virginia
> >>> 434-535-6073
> >>> dd2es at virginia.edu
> >>
> >
> >
> > ----
> > Ce message electronique et tous les fichiers attaches qu'il contient
> sont confidentiels et destines exclusivement ? l'usage de la personne ?
> laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci
> de le retourner ? son metteur. Les idees et opinions presentees dans ce
> message sont celles de son auteur, et ne representent pas necessairement
> celles de l'institution ou entite affiliee dont l'auteur est l'employe. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autorisee de ce message et des attachements qu'il contient sont strictement
> interdits.
> >
> > This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they are
> addressed. If you have received this email in error please return it to the
> sender. The ideas and views expressed in this email are solely those of its
> author, and do not necessarily represent the views of the institution or
> company of which the author is an employee. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
>
>


-- 
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073
dd2es at virginia.edu

	[[alternative HTML version deleted]]


From dd2es at virginia.edu  Fri Mar 13 22:26:04 2015
From: dd2es at virginia.edu (David Dobolyi)
Date: Fri, 13 Mar 2015 17:26:04 -0400
Subject: [R-SIG-Mac] R 3.1.2 & Yosemite GUI slowness
In-Reply-To: <BCB2FFE6-65FF-4FAB-892C-F1D49F9CAE76@r-project.org>
References: <EDA4098F-20B8-4FCD-B3D9-A4B6B518D937@em-lyon.com>
	<loom.20150214T064022-724@post.gmane.org>
	<02C73119-8DB9-44CF-B1C2-1F5E14237E05@r-project.org>
	<CALuPM3toLERmBzfc6iGHZ_wH+DDQ3Dhr1-X9UagnfVhkXvJT_w@mail.gmail.com>
	<219EC6A4-FAD0-4EF5-998C-0E8E12A455F0@r-project.org>
	<55B0B440-7EEA-4017-87E5-CF0B13CDD797@em-lyon.com>
	<CALuPM3sXEBw-q7fSNnaSMNwfyympJmCEjyPuwFCd6zKimu_-0w@mail.gmail.com>
	<0E72DA5C-883F-4616-9AD4-ED9E153FBC1C@r-project.org>
	<8C1EBC3A-20B2-44CB-A137-1FEB2A67EBCA@em-lyon.com>
	<24567C0C-CED0-4DF5-97D9-142EF02F0F5C@r-project.org>
	<CALuPM3s2Rpg3NtX8AMMq0utF13Oko2OtDdb3DCRrwLSb_D3ZPQ@mail.gmail.com>
	<FA81063D-57D6-4584-8800-8D5A7B9B9DE1@em-lyon.com>
	<26F01093-A811-47B8-B5E3-5B77E0941B3B@r-project.org>
	<E1450DDB-D2A6-40B7-87CF-4E22CDEC962C@em-lyon.com>
	<BCB2FFE6-65FF-4FAB-892C-F1D49F9CAE76@r-project.org>
Message-ID: <CALuPM3to=8_nattpxc0Exgzgotof+oAHcfEqr-wSUhnx==PsYg@mail.gmail.com>

Thank you Simon!

Best,

David

On Fri, Mar 13, 2015 at 2:05 PM, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> I can confirm that building with Xcode 5.1.1 doesn't exhibit the issue,
> while using Xcode 6.1 does. So I'll switch the build process to force using
> Xcode 5.1.1 instead of Xcode 6. It means that tomorrow's build should
> hopefully result in a binary without that bug.
>
> Thanks,
> Simon
>
>
> > On Mar 13, 2015, at 12:58 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com>
> wrote:
> >
> > Thank you Simon! I?ve just tried it with 3.1.3 and it works brilliantly!
> > Yan
> >
> >> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> >>
> >> I have more evidence that points at Xcode. If you use the R.app GUI
> that was compiled at the time of R 3.1.1 - available here:
> >>
> >> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
> >>
> >> then all is well. As we discussed earlier, the code did not change at
> all and the underlying R version is irrelevant, so the only piece that
> changed since July last year when this was built was the Xcode version (and
> thus the compilers used). It's not clear to me at all how the Xcode version
> can affect NSTextView so badly, so this will require some more digging. In
> the meantime, please use the above R.app binary.
> >>
> >> Cheers,
> >> Simon
> >>
> >>
> >>
> >>> On Mar 11, 2015, at 6:39 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com>
> wrote:
> >>>
> >>> Yes Simon, the 3.1.1 version works perfectly on Yosemite. This
> behavior started from 3.1.2 and now is through in 3.1.3.
> >>> Cheers,
> >>> Yan
> >>>
> >>> On Mar 11, 2015, at 11:07 PM, David Dobolyi <dd2es at virginia.edu
> <mailto:dd2es at virginia.edu>> wrote:
> >>>
> >>> I can confirm the problem does not occur in 3.1.1 and only started
> with 3.1.2. The R.app GUI version in 3.1.1 was 6784 and in 3.1.2 was 6833,
> so it seems like some regression was possible between builds within GUI
> version 1.65? Build 6912 in 3.1.3 for Mavericks still exhibits the behavior
> as Yan mentioned.
> >>>
> >>> Best,
> >>>
> >>> David
> >>>
> >>> On Wed, Mar 11, 2015 at 5:58 PM, Simon Urbanek <
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> >>>
> >>>> On Mar 11, 2015, at 5:17 PM, ALPEROVYCH Yan <ALPEROVYCH at em-lyon.com
> <mailto:ALPEROVYCH at em-lyon.com>> wrote:
> >>>>
> >>>> Hi Simon,
> >>>>
> >>>> It may be a silly question but shouldn?t this Yosemite bug affect the
> the 3.1.1 version as well?
> >>>>
> >>>
> >>> Yes it should, since the code didn't change since 3.1.1.
> >>>
> >>>
> >>>> I tried also to run R from the terminal and found no rendering issues
> there,
> >>>
> >>> That has nothing to do with it - R is not using any Cocoa for text on
> the command line - and Terminal is not likely to use NSTextView.
> >>>
> >>>
> >>>> which points on the GUI - Yosemite related bug as you say. The R
> 3.1.1 version that I have (and in which this rendering problem is not
> present) runs with R.app GUI 1.65 (6784) x86_64-apple-darwin13.1.0. Does it
> make sense / is it possible to run R 3.1.3 with this particular version of
> GUI?
> >>>>
> >>>
> >>> Are you saying the 3.1.1 binary didn't exhibit the behavior? That
> would be odd - I'll check tomorrow when I'm back at a Yosemite machine.
> >>>
> >>> Cheers,
> >>> Simon
> >>>
> >>>
> >>>
> >>>> Cheers,
> >>>> Yan
> >>>>
> >>>>> On Mar 11, 2015, at 9:21 PM, Simon Urbanek <
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>> wrote:
> >>>>>
> >>>>> On Mar 11, 2015, at 2:11 PM, David Dobolyi <dd2es at virginia.edu
> <mailto:dd2es at virginia.edu>> wrote:
> >>>>>>
> >>>>>> Hello Yan,
> >>>>>>
> >>>>>> I was curious if the new R update would fix this as well, so thanks
> for clarifying that it sadly does not.
> >>>>>>
> >>>>>
> >>>>> There were no code changes on our end.
> >>>>>
> >>>>> AFAICT this seems to be an issue in Apple's NSTextView Cocoa
> implementation in Yosemite. Pretty much all the time is spent in
> [NSTextView drawRect:] so Apple must have added some rather bad
> inefficiency to drawing text area in Yosemite. As you fill the console, the
> response time goes down as the text filed takes longer and longer to
> render. You can also see it in the editor if you add many lines. When you
> clear the console, it's responsible again since you don't have that many
> lines in the text view.
> >>>>>
> >>>>> It seems like a serious bug in Yosemite. We don't control the
> rendering - it's all in Apple's code, so I don't see immediately how we can
> work around that bug.
> >>>>>
> >>>>> Cheers,
> >>>>> Simon
> >>>>>
> >>>>>
> >>>>>
> >>>>>> Best,
> >>>>>>
> >>>>>> David
> >>>>>>
> >>>>>> PS. Simon, regardless of this bug, all of your hard work is very
> much appreciated on an invaluable program!
> >>>>>>
> >>>>>> On Wed, Mar 11, 2015 at 5:44 AM, ALPEROVYCH Yan <
> ALPEROVYCH at em-lyon.com<mailto:ALPEROVYCH at em-lyon.com>> wrote:
> >>>>>> Hi Simon & David,
> >>>>>>
> >>>>>> Just for the record, I've tried the new 3.1.3 version (on the same
> Yosemite machine) and the issue is still there.
> >>>>>>
> >>>>>> Best,
> >>>>>>
> >>>>>> Yan Alperovych, Ph.D.
> >>>>>> Associate Professor of Finance
> >>>>>> EMLYON Business School
> >>>>>> Tel.: +33 4 72 18 29 11<tel:%2B33%204%2072%2018%2029%2011>
> >>>>>> E-mail: alperovych at em-lyon.com<mailto:alperovych at em-lyon.com
> ><mailto:alperovych at em-lyon.com<mailto:alperovych at em-lyon.com>>
> >>>>>> LinkedIN: fr.linkedin.com/in/yanalperovych/<
> http://fr.linkedin.com/in/yanalperovych/><
> http://fr.linkedin.com/in/yanalperovych/>
> >>>>>>
> >>>>>> On Feb 24, 2015, at 7:28 PM, Simon Urbanek <
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
> >>>>>>
> >>>>>> Thank you both, I'll look into this as soon as I get back from
> travels.
> >>>>>> Simon
> >>>>>>
> >>>>>>
> >>>>>> On Feb 23, 2015, at 4:23 PM, David Dobolyi <dd2es at virginia.edu
> <mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:
> dd2es at virginia.edu>>> wrote:
> >>>>>>
> >>>>>> Dear Simon,
> >>>>>>
> >>>>>> Thank you for your reply. I am using the Mavericks build (running
> on latest Yosemite), and have noticed this issue ever since I upgraded to
> 3.1.2:
> >>>>>>
> >>>>>> <Screen Shot 2015-02-23 at 4.12.35 PM.png>
> >>>>>>
> >>>>>> As an aside, I occasionally see errors in the GUI like this, and
> they seem to come from other apps (e.g., Dropbox):
> >>>>>>
> >>>>>> <Screen Shot 2015-02-23 at 4.13.09 PM.png>
> >>>>>>
> >>>>>> More importantly, I wrote Yan about a workaround, which involves
> changing the max.print option from the default and limiting it to 1000.
> This reliably stops R from slowing down over time (although how long, I
> don't know). However, I can replicate the basic issue easily in R with the
> following code:
> >>>>>>
> >>>>>> options(max.print=99999)
> >>>>>> temp <- data.frame(1:100000, 1:100000)
> >>>>>> temp
> >>>>>>
> >>>>>> This should eventually turn up on screen, and after try typing
> anything in the console. Typing will be extremely delayed (e.g., type hello
> and it will take several seconds for each letter to show up, one at a time).
> >>>>>>
> >>>>>> It's even possible to crash the GUI if you print something in a
> function called in a bootstrap, and then invoke a progress bar (e.g., the
> pROC package). Progress will be steady and then suddenly R will lock up.
> The moment you remove the print statement (which isn't actually printing
> since the progress bar is present), the same call works perfectly.
> >>>>>>
> >>>>>> I'd love to have a real fix for this other than reducing max.print.
> I'd dig into the source myself but can't commit the time at the moment.
> >>>>>>
> >>>>>> Best,
> >>>>>>
> >>>>>> David
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> On Mon, Feb 23, 2015 at 4:00 PM, Simon Urbanek <
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org><mailto:
> simon.urbanek at r-project.org<mailto:simon.urbanek at r-project.org>>> wrote:
> >>>>>> Are you using the Mavericks build of R? The SL build will do that,
> because SL has no AppNap support - but then you can also disable AppNap
> (see the corresponding threads here).
> >>>>>>
> >>>>>> Cheers,
> >>>>>> S
> >>>>>>
> >>>>>>
> >>>>>> On Feb 14, 2015, at 12:43 AM, David Dobolyi <dd2es at virginia.edu
> <mailto:dd2es at virginia.edu><mailto:dd2es at virginia.edu<mailto:
> dd2es at virginia.edu>>> wrote:
> >>>>>>
> >>>>>> Dear Yan,
> >>>>>>
> >>>>>> Are you still seeing this issue? It has been bothering me for
> months now,
> >>>>>> and I even found an instance where using progress_bar with
> underlying
> >>>>>> output to the GUI will cause so much slowdown as to crash R given
> >>>>>> sufficient time (i.e., as hidden printed output piles
> >>>>>> up in the background, the whole process slows to a crawl).
> >>>>>>
> >>>>>> Best,
> >>>>>>
> >>>>>> David
> >>>>>>
> >>>>>> _______________________________________________
> >>>>>> R-SIG-Mac mailing list
> >>>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> --
> >>>>>> David Dobolyi, M.A.
> >>>>>> PhD Candidate
> >>>>>> Cognitive Psychology
> >>>>>> University of Virginia
> >>>>>> 434-535-6073<tel:434-535-6073>
> >>>>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu><mailto:
> dd2es at virginia.edu<mailto:dd2es at virginia.edu>>
> >>>>>>
> >>>>>> _______________________________________________
> >>>>>> R-SIG-Mac mailing list
> >>>>>> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org><mailto:
> R-SIG-Mac at r-project.org<mailto:R-SIG-Mac at r-project.org>>
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> ----
> >>>>>> Ce message electronique et tous les fichiers attaches qu'il
> contient sont confidentiels et destines exclusivement ? l'usage de la
> personne ? laquelle ils sont adresses. Si vous avez re?u ce message par
> erreur, merci de le retourner ? son metteur. Les idees et opinions
> presentees dans ce message sont celles de son auteur, et ne representent
> pas necessairement celles de l'institution ou entite affiliee dont l'auteur
> est l'employe. La publication, l'usage, la distribution, l'impression ou la
> copie non autorisee de ce message et des attachements qu'il contient sont
> strictement interdits.
> >>>>>>
> >>>>>> This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they are
> addressed. If you have received this email in error please return it to the
> sender. The ideas and views expressed in this email are solely those of its
> author, and do not necessarily represent the views of the institution or
> company of which the author is an employee. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> --
> >>>>>> David Dobolyi, M.A.
> >>>>>> PhD Candidate
> >>>>>> Cognitive Psychology
> >>>>>> University of Virginia
> >>>>>> 434-535-6073<tel:434-535-6073>
> >>>>>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
> >>>>>
> >>>>
> >>>>
> >>>> ----
> >>>> Ce message electronique et tous les fichiers attaches qu'il contient
> sont confidentiels et destines exclusivement ? l'usage de la personne ?
> laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci
> de le retourner ? son metteur. Les idees et opinions presentees dans ce
> message sont celles de son auteur, et ne representent pas necessairement
> celles de l'institution ou entite affiliee dont l'auteur est l'employe. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autorisee de ce message et des attachements qu'il contient sont strictement
> interdits.
> >>>>
> >>>> This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they are
> addressed. If you have received this email in error please return it to the
> sender. The ideas and views expressed in this email are solely those of its
> author, and do not necessarily represent the views of the institution or
> company of which the author is an employee. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
> >>>
> >>>
> >>>
> >>>
> >>> --
> >>> David Dobolyi, M.A.
> >>> PhD Candidate
> >>> Cognitive Psychology
> >>> University of Virginia
> >>> 434-535-6073
> >>> dd2es at virginia.edu<mailto:dd2es at virginia.edu>
> >>>
> >>>
> >>> ----
> >>> Ce message electronique et tous les fichiers attaches qu'il contient
> sont confidentiels et destines exclusivement ? l'usage de la personne ?
> laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci
> de le retourner ? son metteur. Les idees et opinions presentees dans ce
> message sont celles de son auteur, et ne representent pas necessairement
> celles de l'institution ou entite affiliee dont l'auteur est l'employe. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autorisee de ce message et des attachements qu'il contient sont strictement
> interdits.
> >>>
> >>> This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they are
> addressed. If you have received this email in error please return it to the
> sender. The ideas and views expressed in this email are solely those of its
> author, and do not necessarily represent the views of the institution or
> company of which the author is an employee. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
> >>
> >
> >
> > ----
> > Ce message electronique et tous les fichiers attaches qu'il contient
> sont confidentiels et destines exclusivement ? l'usage de la personne ?
> laquelle ils sont adresses. Si vous avez re?u ce message par erreur, merci
> de le retourner ? son metteur. Les idees et opinions presentees dans ce
> message sont celles de son auteur, et ne representent pas necessairement
> celles de l'institution ou entite affiliee dont l'auteur est l'employe. La
> publication, l'usage, la distribution, l'impression ou la copie non
> autorisee de ce message et des attachements qu'il contient sont strictement
> interdits.
> >
> > This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they are
> addressed. If you have received this email in error please return it to the
> sender. The ideas and views expressed in this email are solely those of its
> author, and do not necessarily represent the views of the institution or
> company of which the author is an employee. Unauthorized publication, use,
> distribution, printing or copying of this e-mail or any attached files is
> strictly forbidden.
>
>


-- 
David Dobolyi, M.A.
PhD Candidate
Cognitive Psychology
University of Virginia
434-535-6073
dd2es at virginia.edu

	[[alternative HTML version deleted]]


From colin at colinsmith.org  Sun Mar 15 15:11:14 2015
From: colin at colinsmith.org (Colin A. Smith)
Date: Sun, 15 Mar 2015 15:11:14 +0100
Subject: [R-SIG-Mac] R 3.1.3 install Mac OSX 10.9.5
In-Reply-To: <DUB122-W7D3B25499A6A62FC61F01DF180@phx.gbl>
References: <DUB122-W7D3B25499A6A62FC61F01DF180@phx.gbl>
Message-ID: <F8C404FE-1905-42EE-BFD8-AADCF4D5150E@colinsmith.org>

For what it?s worth, I saw the same problem a few days ago when I was compiling R trunk using OS X 10.10.2 and clang from the latest version of Xcode.

Cheers,

Colin

> On Mar 10, 2015, at 17:30, White Sky <bluebarbarossa at hotmail.com> wrote:
> 
> I've got a problem installing R 3.1.3 from source on Mac OSX 10.9.5 with gcc-4.9-bin.tar.gz
> 
> ./configure ends with:
>  R is now configured for x86_64-apple-darwin13.4.0
>   Source directory:          .
>   Installation directory:    /Library/Frameworks
>   C compiler:                gcc  -g -O2
>   Fortran 77 compiler:       gfortran  -g -O2
>   C++ compiler:              g++  -g -O2
>   C++ 11 compiler:           g++  -std=c++11 -g -O2
>   Fortran 90/95 compiler:    gfortran -g -O2
>   Obj-C compiler:	    gcc -g -O2 -fobjc-exceptions
>   Interfaces supported:      X11, aqua, tcltk
>   External libraries:        readline
>   Additional capabilities:   NLS, ICU
>   Options enabled:           framework, shared BLAS, R profiling
>   Capabilities skipped:      PNG, JPEG, TIFF, cairo
>   Options not enabled:       memory profiling
>   Recommended packages:      yes
> 
> ... although also there is a warning during configure
> configure: WARNING: X11/Intrinsic.h: accepted by the compiler, rejected by the preprocessor!
> configure: WARNING: X11/Intrinsic.h: proceeding with the compiler's result
> 
> 
> 'make' generates a lot of time-zone warnings, and ends in Done.
> 
> 
> 'make check' ends with time-zone related errors.
> < Warning messages:
> < 1: In strptime(xx, f <- "%Y-%m-%d %H:%M:%OS", tz = tz) :
> <   unknown timezone 'Europe/London'
> < 2: In strptime(xx, f <- "%Y-%m-%d %H:%M:%OS", tz = tz) :
> <   unknown timezone 'GMT'
> < 3: In strptime(xx, f <- "%Y-%m-%d %H:%M:%OS", tz = tz) :
> <   unknown timezone 'America/New_York'
> make[3]: *** [simple-true.Rout] Error 1
> make[2]: *** [test-Specific] Error 2
> make[1]: *** [test-all-basics] Error 1
> make: *** [check] Error 2
> 
> 
> 'make install' returns
> 
> make[1]: Nothing to be done for `install'.
> make[1]: Nothing to be done for `install'.
> installing doc ...
> installing doc/html ...
> installing doc/manual ...
> installing etc ...
> installing share ...
> chmod: Unable to change file mode on /Library/Frameworks/R.framework/Versions/3.1/Resources/bin/R: Operation not permitted
> make[2]: *** [install] Error 1
> make[1]: *** [install] Error 1
> make: *** [install] Error 1
> 
> 
> I've tried ./configure --without-internal-tzcode ...and it doesn't make much difference.
> 
> I've checked my /usr/share/zoneinfo/ all looks normal I guess.
> 
> I'm thinking the problem might be related to gfortran, Xcode (updated recently), or permissions. The time-zone issue might be a result rather than a cause. Any advice would be greatly appreciated. 		 	   		  
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From jfox at mcmaster.ca  Sun Mar 15 21:46:10 2015
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 15 Mar 2015 16:46:10 -0400
Subject: [R-SIG-Mac] checking for pdflatex
Message-ID: <web-552058643@cgpsrv2.cis.mcmaster.ca>

Dear list members,

I need to determine whether pdflatex is installed and have been doing that via Sys.which("pdflatex"). This works when R is run in a terminal window (or in RStudio):

    > Sys.which("pdflatex")
                  pdflatex 
    "/usr/texbin/pdflatex" 

but not from R.app:

    > Sys.which("pdflatex")
    pdflatex 
          "" 

The session info is the same in both cases:

-------------- snip ----------------

> sessionInfo()
R version 3.1.3 (2015-03-09)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.10.2 (Yosemite)

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

-------------- snip ----------------

Why is the result different? Is there a better way to check for the presence of pdflatex?

Any help would be appreciated.

Thanks,
 John

------------------------------------------------
John Fox, Professor
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From iandgow at gmail.com  Sun Mar 15 22:06:44 2015
From: iandgow at gmail.com (Ian Gow)
Date: Sun, 15 Mar 2015 17:06:44 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <web-552058643@cgpsrv2.cis.mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
Message-ID: <A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>

I think it's driven by the PATH variable, which appears to differ for me 
between RStudio and R from Terminal on the one hand and R.app on the 
other.

> Sys.getenv("PATH")
[1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> Sys.which("pdflatex")
pdflatex
       ""

If I add

Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))

to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).

> Sys.which("pdflatex")
                  pdflatex
"/opt/local/bin/pdflatex"
> Sys.getenv("PATH")
[1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"


On 15 Mar 2015, at 16:46, John Fox wrote:

> Dear list members,
>
> I need to determine whether pdflatex is installed and have been doing 
> that via Sys.which("pdflatex"). This works when R is run in a terminal 
> window (or in RStudio):
>
> > Sys.which("pdflatex")
>            pdflatex
> "/usr/texbin/pdflatex"
>
> but not from R.app:
>
> > Sys.which("pdflatex")
> pdflatex
>    ""
>
> The session info is the same in both cases:
>
> -------------- snip ----------------
>
>> sessionInfo()
> R version 3.1.3 (2015-03-09)
> Platform: x86_64-apple-darwin13.4.0 (64-bit)
> Running under: OS X 10.10.2 (Yosemite)
>
> locale:
> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> -------------- snip ----------------
>
> Why is the result different? Is there a better way to check for the 
> presence of pdflatex?
>
> Any help would be appreciated.
>
> Thanks,
> John
>
> ------------------------------------------------
> John Fox, Professor
> McMaster University
> Hamilton, Ontario, Canada
> http://socserv.mcmaster.ca/jfox/
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From jfox at mcmaster.ca  Sun Mar 15 23:21:52 2015
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 15 Mar 2015 18:21:52 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
Message-ID: <001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>

Dear Ian,

Thanks for this. Please see below:

> -----Original Message-----
> From: Ian Gow [mailto:iandgow at gmail.com]
> Sent: March-15-15 5:07 PM
> To: John Fox
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> I think it's driven by the PATH variable, which appears to differ for me
> between RStudio and R from Terminal on the one hand and R.app on the
> other.

Yes, I understand that, though I don't understand why there's a difference
in the path.

> 
> > Sys.getenv("PATH")
> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> > Sys.which("pdflatex")
> pdflatex
>        ""
> 
> If I add
> 
> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
> 
> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
> 
> > Sys.which("pdflatex")
>                   pdflatex
> "/opt/local/bin/pdflatex"
> > Sys.getenv("PATH")
> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"

The problem for me is to determine whether pdflatex is installed *without*
knowing in advance where it's installed. I haven't described the purpose of
this, and, in the interest of brevity, won't for the time-being, but it may
also prove necessary to determine where pdflatex resides.

Best,
 John

> 
> 
> On 15 Mar 2015, at 16:46, John Fox wrote:
> 
> > Dear list members,
> >
> > I need to determine whether pdflatex is installed and have been doing
> > that via Sys.which("pdflatex"). This works when R is run in a terminal
> > window (or in RStudio):
> >
> > > Sys.which("pdflatex")
> >            pdflatex
> > "/usr/texbin/pdflatex"
> >
> > but not from R.app:
> >
> > > Sys.which("pdflatex")
> > pdflatex
> >    ""
> >
> > The session info is the same in both cases:
> >
> > -------------- snip ----------------
> >
> >> sessionInfo()
> > R version 3.1.3 (2015-03-09)
> > Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
> > 10.10.2 (Yosemite)
> >
> > locale:
> > [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-
> 8
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > -------------- snip ----------------
> >
> > Why is the result different? Is there a better way to check for the
> > presence of pdflatex?
> >
> > Any help would be appreciated.
> >
> > Thanks,
> > John
> >
> > ------------------------------------------------
> > John Fox, Professor
> > McMaster University
> > Hamilton, Ontario, Canada
> > http://socserv.mcmaster.ca/jfox/
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac


---
This email has been checked for viruses by Avast antivirus software.


From jordanmeyer1991 at gmail.com  Mon Mar 16 02:17:53 2015
From: jordanmeyer1991 at gmail.com (Jordan Meyer)
Date: Sun, 15 Mar 2015 21:17:53 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
Message-ID: <CAF+g6rqNs0z6+PA-OpWckyb6cQQzY_1vTnthJnu6ra7t13d2FA@mail.gmail.com>

You may wish to try using the logical.return argument of library(). If it
returns TRUE, you could use find.package() to locate the package you are
looking for. For example:

> library(package = "BEST", logical.return = TRUE)
Loading required package: rjags
Loading required package: coda
Linked to JAGS 3.4.0
Loaded modules: basemod,bugs
[1] TRUE
> find.package(package = "BEST")
[1] "/Library/Frameworks/R.framework/Versions/3.1/Resources/library/BEST"

On Sun, Mar 15, 2015 at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:

> Dear Ian,
>
> Thanks for this. Please see below:
>
> > -----Original Message-----
> > From: Ian Gow [mailto:iandgow at gmail.com]
> > Sent: March-15-15 5:07 PM
> > To: John Fox
> > Cc: r-sig-mac at r-project.org
> > Subject: Re: [R-SIG-Mac] checking for pdflatex
> >
> > I think it's driven by the PATH variable, which appears to differ for me
> > between RStudio and R from Terminal on the one hand and R.app on the
> > other.
>
> Yes, I understand that, though I don't understand why there's a difference
> in the path.
>
> >
> > > Sys.getenv("PATH")
> > [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> > > Sys.which("pdflatex")
> > pdflatex
> >        ""
> >
> > If I add
> >
> > Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
> >
> > to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
> >
> > > Sys.which("pdflatex")
> >                   pdflatex
> > "/opt/local/bin/pdflatex"
> > > Sys.getenv("PATH")
> > [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
>
> The problem for me is to determine whether pdflatex is installed *without*
> knowing in advance where it's installed. I haven't described the purpose of
> this, and, in the interest of brevity, won't for the time-being, but it may
> also prove necessary to determine where pdflatex resides.
>
> Best,
>  John
>
> >
> >
> > On 15 Mar 2015, at 16:46, John Fox wrote:
> >
> > > Dear list members,
> > >
> > > I need to determine whether pdflatex is installed and have been doing
> > > that via Sys.which("pdflatex"). This works when R is run in a terminal
> > > window (or in RStudio):
> > >
> > > > Sys.which("pdflatex")
> > >            pdflatex
> > > "/usr/texbin/pdflatex"
> > >
> > > but not from R.app:
> > >
> > > > Sys.which("pdflatex")
> > > pdflatex
> > >    ""
> > >
> > > The session info is the same in both cases:
> > >
> > > -------------- snip ----------------
> > >
> > >> sessionInfo()
> > > R version 3.1.3 (2015-03-09)
> > > Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
> > > 10.10.2 (Yosemite)
> > >
> > > locale:
> > > [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-
> > 8
> > >
> > > attached base packages:
> > > [1] stats     graphics  grDevices utils     datasets  methods   base
> > >
> > > -------------- snip ----------------
> > >
> > > Why is the result different? Is there a better way to check for the
> > > presence of pdflatex?
> > >
> > > Any help would be appreciated.
> > >
> > > Thanks,
> > > John
> > >
> > > ------------------------------------------------
> > > John Fox, Professor
> > > McMaster University
> > > Hamilton, Ontario, Canada
> > > http://socserv.mcmaster.ca/jfox/
> > >
> > > _______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SIG-Mac at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> ---
> This email has been checked for viruses by Avast antivirus software.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From jfox at mcmaster.ca  Mon Mar 16 02:29:33 2015
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 15 Mar 2015 21:29:33 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <CAF+g6rqNs0z6+PA-OpWckyb6cQQzY_1vTnthJnu6ra7t13d2FA@mail.gmail.com>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<CAF+g6rqNs0z6+PA-OpWckyb6cQQzY_1vTnthJnu6ra7t13d2FA@mail.gmail.com>
Message-ID: <web-552070660@cgpsrv2.cis.mcmaster.ca>

Dear Jordan,

I'm not looking for an R package, I'm looking for the pdflatex program.

Best,
 John

On Sun, 15 Mar 2015 21:17:53 -0400
 Jordan Meyer <jordanmeyer1991 at gmail.com> wrote:
> You may wish to try using the logical.return argument of library(). If it
> returns TRUE, you could use find.package() to locate the package you are
> looking for. For example:
> 
> > library(package = "BEST", logical.return = TRUE)
> Loading required package: rjags
> Loading required package: coda
> Linked to JAGS 3.4.0
> Loaded modules: basemod,bugs
> [1] TRUE
> > find.package(package = "BEST")
> [1] "/Library/Frameworks/R.framework/Versions/3.1/Resources/library/BEST"
> 
> On Sun, Mar 15, 2015 at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
> 
> > Dear Ian,
> >
> > Thanks for this. Please see below:
> >
> > > -----Original Message-----
> > > From: Ian Gow [mailto:iandgow at gmail.com]
> > > Sent: March-15-15 5:07 PM
> > > To: John Fox
> > > Cc: r-sig-mac at r-project.org
> > > Subject: Re: [R-SIG-Mac] checking for pdflatex
> > >
> > > I think it's driven by the PATH variable, which appears to differ for me
> > > between RStudio and R from Terminal on the one hand and R.app on the
> > > other.
> >
> > Yes, I understand that, though I don't understand why there's a difference
> > in the path.
> >
> > >
> > > > Sys.getenv("PATH")
> > > [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> > > > Sys.which("pdflatex")
> > > pdflatex
> > >        ""
> > >
> > > If I add
> > >
> > > Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
> > >
> > > to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
> > >
> > > > Sys.which("pdflatex")
> > >                   pdflatex
> > > "/opt/local/bin/pdflatex"
> > > > Sys.getenv("PATH")
> > > [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
> >
> > The problem for me is to determine whether pdflatex is installed *without*
> > knowing in advance where it's installed. I haven't described the purpose of
> > this, and, in the interest of brevity, won't for the time-being, but it may
> > also prove necessary to determine where pdflatex resides.
> >
> > Best,
> >  John
> >
> > >
> > >
> > > On 15 Mar 2015, at 16:46, John Fox wrote:
> > >
> > > > Dear list members,
> > > >
> > > > I need to determine whether pdflatex is installed and have been doing
> > > > that via Sys.which("pdflatex"). This works when R is run in a terminal
> > > > window (or in RStudio):
> > > >
> > > > > Sys.which("pdflatex")
> > > >            pdflatex
> > > > "/usr/texbin/pdflatex"
> > > >
> > > > but not from R.app:
> > > >
> > > > > Sys.which("pdflatex")
> > > > pdflatex
> > > >    ""
> > > >
> > > > The session info is the same in both cases:
> > > >
> > > > -------------- snip ----------------
> > > >
> > > >> sessionInfo()
> > > > R version 3.1.3 (2015-03-09)
> > > > Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
> > > > 10.10.2 (Yosemite)
> > > >
> > > > locale:
> > > > [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-
> > > 8
> > > >
> > > > attached base packages:
> > > > [1] stats     graphics  grDevices utils     datasets  methods   base
> > > >
> > > > -------------- snip ----------------
> > > >
> > > > Why is the result different? Is there a better way to check for the
> > > > presence of pdflatex?
> > > >
> > > > Any help would be appreciated.
> > > >
> > > > Thanks,
> > > > John
> > > >
> > > > ------------------------------------------------
> > > > John Fox, Professor
> > > > McMaster University
> > > > Hamilton, Ontario, Canada
> > > > http://socserv.mcmaster.ca/jfox/
> > > >
> > > > _______________________________________________
> > > > R-SIG-Mac mailing list
> > > > R-SIG-Mac at r-project.org
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> >
> > ---
> > This email has been checked for viruses by Avast antivirus software.
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >

------------------------------------------------
John Fox, Professor
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From md at sund.ku.dk  Mon Mar 16 09:45:08 2015
From: md at sund.ku.dk (Matt Denwood)
Date: Mon, 16 Mar 2015 08:45:08 +0000
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
Message-ID: <11C6D727-CB00-4258-9D5F-8C6C4B395718@sund.ku.dk>


On 15 Mar 2015, at 23:21, John Fox <jfox at mcmaster.ca> wrote:

> Dear Ian,
> 
> Thanks for this. Please see below:
> 
>> -----Original Message-----
>> From: Ian Gow [mailto:iandgow at gmail.com]
>> Sent: March-15-15 5:07 PM
>> To: John Fox
>> Cc: r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> 
>> I think it's driven by the PATH variable, which appears to differ for me
>> between RStudio and R from Terminal on the one hand and R.app on the
>> other.
> 
> Yes, I understand that, though I don't understand why there's a difference
> in the path.

This has been discussed on this forum before.  In a nutshell:  a (questionable) design decision from Apple over which R.app has no control!  For info:
http://tex.stackexchange.com/questions/208181/why-did-my-tex-related-gui-program-stop-working-in-mac-os-x-yosemite

> 
>> 
>>> Sys.getenv("PATH")
>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>>> Sys.which("pdflatex")
>> pdflatex
>>       ""
>> 
>> If I add
>> 
>> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
>> 
>> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
>> 
>>> Sys.which("pdflatex")
>>                  pdflatex
>> "/opt/local/bin/pdflatex"
>>> Sys.getenv("PATH")
>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
> 
> The problem for me is to determine whether pdflatex is installed *without*
> knowing in advance where it's installed. I haven't described the purpose of
> this, and, in the interest of brevity, won't for the time-being, but it may
> also prove necessary to determine where pdflatex resides.

I don?t think you can, although you can approximate this by setting the PATH to everywhere that pdflatex *might* be installed e.g.:

Sys.setenv(PATH=paste(Sys.getenv('PATH'),"/opt/local/bin:/opt/local/sbin:/usr/texbin:/usr/local/bin: ?. etc ?. ",sep=':?))    
Sys.which("pdflatex")

I realise that this is not an ideal solution, so somebody may have a better one.  You could also theoretically try parsing the .basrc / .profile files, but I?m not sure if this is recommended practice (i.e. the fact that these are not parsed automatically is supposed to be a security measure)???

Cheers,

Matt


> 
> Best,
> John
> 
>> 
>> 
>> On 15 Mar 2015, at 16:46, John Fox wrote:
>> 
>>> Dear list members,
>>> 
>>> I need to determine whether pdflatex is installed and have been doing
>>> that via Sys.which("pdflatex"). This works when R is run in a terminal
>>> window (or in RStudio):
>>> 
>>>> Sys.which("pdflatex")
>>>           pdflatex
>>> "/usr/texbin/pdflatex"
>>> 
>>> but not from R.app:
>>> 
>>>> Sys.which("pdflatex")
>>> pdflatex
>>>   ""
>>> 
>>> The session info is the same in both cases:
>>> 
>>> -------------- snip ----------------
>>> 
>>>> sessionInfo()
>>> R version 3.1.3 (2015-03-09)
>>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
>>> 10.10.2 (Yosemite)
>>> 
>>> locale:
>>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-
>> 8
>>> 
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> 
>>> -------------- snip ----------------
>>> 
>>> Why is the result different? Is there a better way to check for the
>>> presence of pdflatex?
>>> 
>>> Any help would be appreciated.
>>> 
>>> Thanks,
>>> John
>>> 
>>> ------------------------------------------------
>>> John Fox, Professor
>>> McMaster University
>>> Hamilton, Ontario, Canada
>>> http://socserv.mcmaster.ca/jfox/
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From Rainer at krugs.de  Mon Mar 16 10:33:10 2015
From: Rainer at krugs.de (Rainer M Krug)
Date: Mon, 16 Mar 2015 10:33:10 +0100
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <web-552070660@cgpsrv2.cis.mcmaster.ca> (John Fox's message of
	"Sun, 15 Mar 2015 21:29:33 -0400")
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<CAF+g6rqNs0z6+PA-OpWckyb6cQQzY_1vTnthJnu6ra7t13d2FA@mail.gmail.com>
	<web-552070660@cgpsrv2.cis.mcmaster.ca>
Message-ID: <m2h9tl478p.fsf@krugs.de>

"John Fox" <jfox at mcmaster.ca> writes:

> Dear Jordan,
>
> I'm not looking for an R package, I'm looking for the pdflatex program.

Isn't there an R package which requires latex? You might find one and
check how it is done there? knitr[1] comes to mind?

Please post your findings here as it is an interesting question (not
only for latex).

Cheers,

Rainer

>
> Best,
>  John
>
> On Sun, 15 Mar 2015 21:17:53 -0400
>  Jordan Meyer <jordanmeyer1991 at gmail.com> wrote:
>> You may wish to try using the logical.return argument of library(). If it
>> returns TRUE, you could use find.package() to locate the package you are
>> looking for. For example:
>> 
>> > library(package = "BEST", logical.return = TRUE)
>> Loading required package: rjags
>> Loading required package: coda
>> Linked to JAGS 3.4.0
>> Loaded modules: basemod,bugs
>> [1] TRUE
>> > find.package(package = "BEST")
>> [1] "/Library/Frameworks/R.framework/Versions/3.1/Resources/library/BEST"
>> 
>> On Sun, Mar 15, 2015 at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
>> 
>> > Dear Ian,
>> >
>> > Thanks for this. Please see below:
>> >
>> > > -----Original Message-----
>> > > From: Ian Gow [mailto:iandgow at gmail.com]
>> > > Sent: March-15-15 5:07 PM
>> > > To: John Fox
>> > > Cc: r-sig-mac at r-project.org
>> > > Subject: Re: [R-SIG-Mac] checking for pdflatex
>> > >
>> > > I think it's driven by the PATH variable, which appears to differ for me
>> > > between RStudio and R from Terminal on the one hand and R.app on the
>> > > other.
>> >
>> > Yes, I understand that, though I don't understand why there's a difference
>> > in the path.
>> >
>> > >
>> > > > Sys.getenv("PATH")
>> > > [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>> > > > Sys.which("pdflatex")
>> > > pdflatex
>> > >        ""
>> > >
>> > > If I add
>> > >
>> > > Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
>> > >
>> > > to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
>> > >
>> > > > Sys.which("pdflatex")
>> > >                   pdflatex
>> > > "/opt/local/bin/pdflatex"
>> > > > Sys.getenv("PATH")
>> > > [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
>> >
>> > The problem for me is to determine whether pdflatex is installed *without*
>> > knowing in advance where it's installed. I haven't described the purpose of
>> > this, and, in the interest of brevity, won't for the time-being, but it may
>> > also prove necessary to determine where pdflatex resides.
>> >
>> > Best,
>> >  John
>> >
>> > >
>> > >
>> > > On 15 Mar 2015, at 16:46, John Fox wrote:
>> > >
>> > > > Dear list members,
>> > > >
>> > > > I need to determine whether pdflatex is installed and have been doing
>> > > > that via Sys.which("pdflatex"). This works when R is run in a terminal
>> > > > window (or in RStudio):
>> > > >
>> > > > > Sys.which("pdflatex")
>> > > >            pdflatex
>> > > > "/usr/texbin/pdflatex"
>> > > >
>> > > > but not from R.app:
>> > > >
>> > > > > Sys.which("pdflatex")
>> > > > pdflatex
>> > > >    ""
>> > > >
>> > > > The session info is the same in both cases:
>> > > >
>> > > > -------------- snip ----------------
>> > > >
>> > > >> sessionInfo()
>> > > > R version 3.1.3 (2015-03-09)
>> > > > Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
>> > > > 10.10.2 (Yosemite)
>> > > >
>> > > > locale:
>> > > > [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-
>> > > 8
>> > > >
>> > > > attached base packages:
>> > > > [1] stats     graphics  grDevices utils     datasets  methods   base
>> > > >
>> > > > -------------- snip ----------------
>> > > >
>> > > > Why is the result different? Is there a better way to check for the
>> > > > presence of pdflatex?
>> > > >
>> > > > Any help would be appreciated.
>> > > >
>> > > > Thanks,
>> > > > John
>> > > >
>> > > > ------------------------------------------------
>> > > > John Fox, Professor
>> > > > McMaster University
>> > > > Hamilton, Ontario, Canada
>> > > > http://socserv.mcmaster.ca/jfox/
>> > > >
>> > > > _______________________________________________
>> > > > R-SIG-Mac mailing list
>> > > > R-SIG-Mac at r-project.org
>> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> >
>> >
>> > ---
>> > This email has been checked for viruses by Avast antivirus software.
>> >
>> > _______________________________________________
>> > R-SIG-Mac mailing list
>> > R-SIG-Mac at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> >
>
> ------------------------------------------------
> John Fox, Professor
> McMaster University
> Hamilton, Ontario, Canada
> http://socserv.mcmaster.ca/jfox/


Footnotes: 
[1]  http://yihui.name/knitr/

-- 
Rainer M. Krug
email: Rainer<at>krugs<dot>de
PGP: 0x0F52F982
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 494 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20150316/bcf80195/attachment.bin>

From iandgow at gmail.com  Mon Mar 16 11:33:38 2015
From: iandgow at gmail.com (Ian Gow)
Date: Mon, 16 Mar 2015 06:33:38 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
Message-ID: <E0A13736-3A67-4DD6-A464-14C3A936DE19@gmail.com>

John:

It might be useful to see how TeX editors (TeXShop, TeXWorks, Texpad, etc.) do this. I guess if there?s a way, these programs would use it.

Other software I have seen use a ?look in all the usual locations? approach to solve a similar problem.

Finally, I can find a few using locate. It seems I a few versions lying around on my computer:

Mac-Pro:~ igow$ locate pdflatex | grep -e \/pdflatex$
/Volumes/mac_part/opt/local/bin/pdflatex
/Volumes/mac_part/opt/local/libexec/texlive/texbin/pdflatex
/Volumes/mac_part/usr/local/texlive/2011/bin/universal-darwin/pdflatex
/Volumes/mac_part/usr/local/texlive/2011/bin/x86_64-darwin/pdflatex
/opt/local/bin/pdflatex
/opt/local/libexec/texlive/texbin/pdflatex

But in fact, I probably just have two versions. In R:
> pdftexs <- system(" locate pdflatex | grep -e \\/pdflatex$", intern=TRUE)
> 
> 
get_version <- function(path) {

+ 
 return(system(paste(path, " --version"), intern=TRUE)[1])

+ 
}

> 
> 
cbind(pdftexs, unlist(lapply(pdftexs, get_version)))

    pdftexs                                                                 
[1,] "/Volumes/mac_part/opt/local/bin/pdflatex"                              
[2,] "/Volumes/mac_part/opt/local/libexec/texlive/texbin/pdflatex"           
[3,] "/Volumes/mac_part/usr/local/texlive/2011/bin/universal-darwin/pdflatex"
[4,] "/Volumes/mac_part/usr/local/texlive/2011/bin/x86_64-darwin/pdflatex"   
[5,] "/opt/local/bin/pdflatex"                                               
[6,] "/opt/local/libexec/texlive/texbin/pdflatex"                            

[1,] "pdfTeX 3.14159265-2.6-1.40.15 (TeX Live 2014/MacPorts 2014_6)"
[2,] "pdfTeX 3.14159265-2.6-1.40.15 (TeX Live 2014/MacPorts 2014_6)"
[3,] "pdfTeX 3.1415926-2.3-1.40.12 (TeX Live 2011)"                 
[4,] "pdfTeX 3.1415926-2.3-1.40.12 (TeX Live 2011)"                 
[5,] "pdfTeX 3.14159265-2.6-1.40.15 (TeX Live 2014/MacPorts 2014_6)"
[6,] "pdfTeX 3.14159265-2.6-1.40.15 (TeX Live 2014/MacPorts 2014_6)"



-Ian

> On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear Ian,
> 
> Thanks for this. Please see below:
> 
>> -----Original Message-----
>> From: Ian Gow [mailto:iandgow at gmail.com]
>> Sent: March-15-15 5:07 PM
>> To: John Fox
>> Cc: r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> 
>> I think it's driven by the PATH variable, which appears to differ for me
>> between RStudio and R from Terminal on the one hand and R.app on the
>> other.
> 
> Yes, I understand that, though I don't understand why there's a difference
> in the path.
> 
>> 
>>> Sys.getenv("PATH")
>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>>> Sys.which("pdflatex")
>> pdflatex
>>      ""
>> 
>> If I add
>> 
>> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
>> 
>> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
>> 
>>> Sys.which("pdflatex")
>>                 pdflatex
>> "/opt/local/bin/pdflatex"
>>> Sys.getenv("PATH")
>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
> 
> The problem for me is to determine whether pdflatex is installed *without*
> knowing in advance where it's installed. I haven't described the purpose of
> this, and, in the interest of brevity, won't for the time-being, but it may
> also prove necessary to determine where pdflatex resides.
> 
> Best,
> John
> 
>> 
>> 
>> On 15 Mar 2015, at 16:46, John Fox wrote:
>> 
>>> Dear list members,
>>> 
>>> I need to determine whether pdflatex is installed and have been doing
>>> that via Sys.which("pdflatex"). This works when R is run in a terminal
>>> window (or in RStudio):
>>> 
>>>> Sys.which("pdflatex")
>>>          pdflatex
>>> "/usr/texbin/pdflatex"
>>> 
>>> but not from R.app:
>>> 
>>>> Sys.which("pdflatex")
>>> pdflatex
>>>  ""
>>> 
>>> The session info is the same in both cases:
>>> 
>>> -------------- snip ----------------
>>> 
>>>> sessionInfo()
>>> R version 3.1.3 (2015-03-09)
>>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
>>> 10.10.2 (Yosemite)
>>> 
>>> locale:
>>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-
>> 8
>>> 
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> 
>>> -------------- snip ----------------
>>> 
>>> Why is the result different? Is there a better way to check for the
>>> presence of pdflatex?
>>> 
>>> Any help would be appreciated.
>>> 
>>> Thanks,
>>> John
>>> 
>>> ------------------------------------------------
>>> John Fox, Professor
>>> McMaster University
>>> Hamilton, Ontario, Canada
>>> http://socserv.mcmaster.ca/jfox/
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> http://www.avast.com


From simon.urbanek at r-project.org  Mon Mar 16 15:39:15 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 16 Mar 2015 10:39:15 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
Message-ID: <15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>

John,

see R for Mac FAQ 10.13: I get ?command not found? in the GUI yet it works in the Terminal ? why?

Cheers,
Simon


> On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear Ian,
> 
> Thanks for this. Please see below:
> 
>> -----Original Message-----
>> From: Ian Gow [mailto:iandgow at gmail.com]
>> Sent: March-15-15 5:07 PM
>> To: John Fox
>> Cc: r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> 
>> I think it's driven by the PATH variable, which appears to differ for me
>> between RStudio and R from Terminal on the one hand and R.app on the
>> other.
> 
> Yes, I understand that, though I don't understand why there's a difference
> in the path.
> 
>> 
>>> Sys.getenv("PATH")
>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>>> Sys.which("pdflatex")
>> pdflatex
>>       ""
>> 
>> If I add
>> 
>> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
>> 
>> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
>> 
>>> Sys.which("pdflatex")
>>                  pdflatex
>> "/opt/local/bin/pdflatex"
>>> Sys.getenv("PATH")
>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
> 
> The problem for me is to determine whether pdflatex is installed *without*
> knowing in advance where it's installed. I haven't described the purpose of
> this, and, in the interest of brevity, won't for the time-being, but it may
> also prove necessary to determine where pdflatex resides.
> 
> Best,
> John
> 
>> 
>> 
>> On 15 Mar 2015, at 16:46, John Fox wrote:
>> 
>>> Dear list members,
>>> 
>>> I need to determine whether pdflatex is installed and have been doing
>>> that via Sys.which("pdflatex"). This works when R is run in a terminal
>>> window (or in RStudio):
>>> 
>>>> Sys.which("pdflatex")
>>>           pdflatex
>>> "/usr/texbin/pdflatex"
>>> 
>>> but not from R.app:
>>> 
>>>> Sys.which("pdflatex")
>>> pdflatex
>>>   ""
>>> 
>>> The session info is the same in both cases:
>>> 
>>> -------------- snip ----------------
>>> 
>>>> sessionInfo()
>>> R version 3.1.3 (2015-03-09)
>>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
>>> 10.10.2 (Yosemite)
>>> 
>>> locale:
>>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-
>> 8
>>> 
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> 
>>> -------------- snip ----------------
>>> 
>>> Why is the result different? Is there a better way to check for the
>>> presence of pdflatex?
>>> 
>>> Any help would be appreciated.
>>> 
>>> Thanks,
>>> John
>>> 
>>> ------------------------------------------------
>>> John Fox, Professor
>>> McMaster University
>>> Hamilton, Ontario, Canada
>>> http://socserv.mcmaster.ca/jfox/
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From dwinsemius at comcast.net  Mon Mar 16 17:21:11 2015
From: dwinsemius at comcast.net (David Winsemius)
Date: Mon, 16 Mar 2015 09:21:11 -0700
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <web-552070660@cgpsrv2.cis.mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<CAF+g6rqNs0z6+PA-OpWckyb6cQQzY_1vTnthJnu6ra7t13d2FA@mail.gmail.com>
	<web-552070660@cgpsrv2.cis.mcmaster.ca>
Message-ID: <D116486F-93D8-4359-87B1-5550650703DE@comcast.net>


On Mar 15, 2015, at 6:29 PM, John Fox wrote:

> Dear Jordan,
> 
> I'm not looking for an R package, I'm looking for the pdflatex program.

In a Terminal session pdflatex does not appear to be on the bash path:

my-computer-name:~ myusername$ which pdflatex

# Nothing

Whereas in an R.app session (in OSX 10.7.5)

> system("which pdflatex")
/usr/texbin/pdflatex

Conversely when I do this on my Yosemite equipped laptop si the the oppostite. The PATH for The R GUI does not include/usr/texbin/ while the bash PATH does.

Perhaps this helps?

-- 
David.

> 
> Best,
> John
> 
> On Sun, 15 Mar 2015 21:17:53 -0400
> Jordan Meyer <jordanmeyer1991 at gmail.com> wrote:
>> You may wish to try using the logical.return argument of library(). If it
>> returns TRUE, you could use find.package() to locate the package you are
>> looking for. For example:
>> 
>>> library(package = "BEST", logical.return = TRUE)
>> Loading required package: rjags
>> Loading required package: coda
>> Linked to JAGS 3.4.0
>> Loaded modules: basemod,bugs
>> [1] TRUE
>>> find.package(package = "BEST")
>> [1] "/Library/Frameworks/R.framework/Versions/3.1/Resources/library/BEST"
>> 
>> On Sun, Mar 15, 2015 at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
>> 
>>> Dear Ian,
>>> 
>>> Thanks for this. Please see below:
>>> 
>>>> -----Original Message-----
>>>> From: Ian Gow [mailto:iandgow at gmail.com]
>>>> Sent: March-15-15 5:07 PM
>>>> To: John Fox
>>>> Cc: r-sig-mac at r-project.org
>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>>> 
>>>> I think it's driven by the PATH variable, which appears to differ for me
>>>> between RStudio and R from Terminal on the one hand and R.app on the
>>>> other.
>>> 
>>> Yes, I understand that, though I don't understand why there's a difference
>>> in the path.
>>> 
>>>> 
>>>>> Sys.getenv("PATH")
>>>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>>>>> Sys.which("pdflatex")
>>>> pdflatex
>>>>       ""
>>>> 
>>>> If I add
>>>> 
>>>> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
>>>> 
>>>> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
>>>> 
>>>>> Sys.which("pdflatex")
>>>>                  pdflatex
>>>> "/opt/local/bin/pdflatex"
>>>>> Sys.getenv("PATH")
>>>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
>>> 
>>> The problem for me is to determine whether pdflatex is installed *without*
>>> knowing in advance where it's installed. I haven't described the purpose of
>>> this, and, in the interest of brevity, won't for the time-being, but it may
>>> also prove necessary to determine where pdflatex resides.
>>> 
>>> Best,
>>> John
>>> 
>>>> 
>>>> 
>>>> On 15 Mar 2015, at 16:46, John Fox wrote:
>>>> 
>>>>> Dear list members,
>>>>> 
>>>>> I need to determine whether pdflatex is installed and have been doing
>>>>> that via Sys.which("pdflatex"). This works when R is run in a terminal
>>>>> window (or in RStudio):
>>>>> 
>>>>>> Sys.which("pdflatex")
>>>>>           pdflatex
>>>>> "/usr/texbin/pdflatex"
>>>>> 
>>>>> but not from R.app:
>>>>> 
>>>>>> Sys.which("pdflatex")
>>>>> pdflatex
>>>>>   ""
>>>>> 
>>>>> The session info is the same in both cases:
>>>>> 
>>>>> -------------- snip ----------------
>>>>> 
>>>>>> sessionInfo()
>>>>> R version 3.1.3 (2015-03-09)
>>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
>>>>> 10.10.2 (Yosemite)
>>>>> 
>>>>> locale:
>>>>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-
>>>> 8
>>>>> 
>>>>> attached base packages:
>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>> 
>>>>> -------------- snip ----------------
>>>>> 
>>>>> Why is the result different? Is there a better way to check for the
>>>>> presence of pdflatex?
>>>>> 
>>>>> Any help would be appreciated.
>>>>> 
>>>>> Thanks,
>>>>> John
>>>>> 
>>>>> ------------------------------------------------
>>>>> John Fox, Professor
>>>>> McMaster University
>>>>> Hamilton, Ontario, Canada
>>>>> http://socserv.mcmaster.ca/jfox/
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> 
>>> ---
>>> This email has been checked for viruses by Avast antivirus software.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
> 
> ------------------------------------------------
> John Fox, Professor
> McMaster University
> Hamilton, Ontario, Canada
> http://socserv.mcmaster.ca/jfox/
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

David Winsemius
Alameda, CA, USA


From jfox at mcmaster.ca  Mon Mar 16 17:25:47 2015
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 16 Mar 2015 12:25:47 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
Message-ID: <001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>

Dear Simon,

Thanks for this, and to the others who responded to my question. The FAQ and Matt Denwood's response jogged my memory, and reminded me that I encountered this problem before.

In this case, I don't see a good solution, but I'll think about the problem some more. 

Without providing too many tedious details, the development version of the Rcmdr package checks at startup what resources are available to it, including pdflatex, and configures itself accordingly. Having inexperienced users edit, e.g., their .Renviron files is probably a non-starter. The Rcmdr could offer to do this at the user's option (it already provides dialogs that guide the user to locations of missing software like LaTeX and pandoc), but I'd still have to be able to figure out whether pdflatex is available and if so where it's located.

Ian Gow suggested using locate, but I apparently can't rely on a locate database having been compiled -- it wasn't on my Mac -- and the overhead of compiling the locate db is excessive for a start-up check.

Again, thanks for explaining the problem.

John

> -----Original Message-----
> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> Sent: March-16-15 10:39 AM
> To: John Fox
> Cc: Ian Gow; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> John,
> 
> see R for Mac FAQ 10.13: I get ?command not found? in the GUI yet it works
> in the Terminal ? why?
> 
> Cheers,
> Simon
> 
> 
> > On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
> >
> > Dear Ian,
> >
> > Thanks for this. Please see below:
> >
> >> -----Original Message-----
> >> From: Ian Gow [mailto:iandgow at gmail.com]
> >> Sent: March-15-15 5:07 PM
> >> To: John Fox
> >> Cc: r-sig-mac at r-project.org
> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>
> >> I think it's driven by the PATH variable, which appears to differ for
> >> me between RStudio and R from Terminal on the one hand and R.app on
> >> the other.
> >
> > Yes, I understand that, though I don't understand why there's a
> > difference in the path.
> >
> >>
> >>> Sys.getenv("PATH")
> >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> >>> Sys.which("pdflatex")
> >> pdflatex
> >>       ""
> >>
> >> If I add
> >>
> >> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
> >>
> >> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
> >>
> >>> Sys.which("pdflatex")
> >>                  pdflatex
> >> "/opt/local/bin/pdflatex"
> >>> Sys.getenv("PATH")
> >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
> >
> > The problem for me is to determine whether pdflatex is installed
> > *without* knowing in advance where it's installed. I haven't described
> > the purpose of this, and, in the interest of brevity, won't for the
> > time-being, but it may also prove necessary to determine where pdflatex
> resides.
> >
> > Best,
> > John
> >
> >>
> >>
> >> On 15 Mar 2015, at 16:46, John Fox wrote:
> >>
> >>> Dear list members,
> >>>
> >>> I need to determine whether pdflatex is installed and have been
> >>> doing that via Sys.which("pdflatex"). This works when R is run in a
> >>> terminal window (or in RStudio):
> >>>
> >>>> Sys.which("pdflatex")
> >>>           pdflatex
> >>> "/usr/texbin/pdflatex"
> >>>
> >>> but not from R.app:
> >>>
> >>>> Sys.which("pdflatex")
> >>> pdflatex
> >>>   ""
> >>>
> >>> The session info is the same in both cases:
> >>>
> >>> -------------- snip ----------------
> >>>
> >>>> sessionInfo()
> >>> R version 3.1.3 (2015-03-09)
> >>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
> >>> 10.10.2 (Yosemite)
> >>>
> >>> locale:
> >>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-
> 8/en_CA.UTF-
> >> 8
> >>>
> >>> attached base packages:
> >>> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>>
> >>> -------------- snip ----------------
> >>>
> >>> Why is the result different? Is there a better way to check for the
> >>> presence of pdflatex?
> >>>
> >>> Any help would be appreciated.
> >>>
> >>> Thanks,
> >>> John
> >>>
> >>> ------------------------------------------------
> >>> John Fox, Professor
> >>> McMaster University
> >>> Hamilton, Ontario, Canada
> >>> http://socserv.mcmaster.ca/jfox/
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> >
> > ---
> > This email has been checked for viruses by Avast antivirus software.
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >


---
This email has been checked for viruses by Avast antivirus software.


From csardi.gabor at gmail.com  Mon Mar 16 17:38:57 2015
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 16 Mar 2015 12:38:57 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
Message-ID: <CABtg=Kkcz6Ux-cbisFgvvWai80F4NpUzKwaDtLY0Uiv4KWjZTw@mail.gmail.com>

John,

my guess is that on OSX, >95% of the users have https://tug.org/mactex/,
which seems to have pdflatex in /usr/texbin. If it is not there, then most
likely the user does not have pdflatex installed, and you can give a note
or warning about it.

If you want to be sure, you can check other tex distributions for OSX, to
be honest I don't know any other. Based on
http://mactex-wiki.tug.org/wiki/index.php/Distribution_Matrix pretty much
MacTeX is the only player. Maybe people also install TeX with brew, so it
might be worth checking that, too.

Gabor

On Mon, Mar 16, 2015 at 12:25 PM, John Fox <jfox at mcmaster.ca> wrote:

> Dear Simon,
>
> Thanks for this, and to the others who responded to my question. The FAQ
> and Matt Denwood's response jogged my memory, and reminded me that I
> encountered this problem before.
>
> In this case, I don't see a good solution, but I'll think about the
> problem some more.
>
> Without providing too many tedious details, the development version of the
> Rcmdr package checks at startup what resources are available to it,
> including pdflatex, and configures itself accordingly. Having inexperienced
> users edit, e.g., their .Renviron files is probably a non-starter. The
> Rcmdr could offer to do this at the user's option (it already provides
> dialogs that guide the user to locations of missing software like LaTeX and
> pandoc), but I'd still have to be able to figure out whether pdflatex is
> available and if so where it's located.
>
> Ian Gow suggested using locate, but I apparently can't rely on a locate
> database having been compiled -- it wasn't on my Mac -- and the overhead of
> compiling the locate db is excessive for a start-up check.
>
> Again, thanks for explaining the problem.
>
> John
>
> > -----Original Message-----
> > From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> > Sent: March-16-15 10:39 AM
> > To: John Fox
> > Cc: Ian Gow; r-sig-mac at r-project.org
> > Subject: Re: [R-SIG-Mac] checking for pdflatex
> >
> > John,
> >
> > see R for Mac FAQ 10.13: I get ?command not found? in the GUI yet it
> works
> > in the Terminal ? why?
> >
> > Cheers,
> > Simon
> >
> >
> > > On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
> > >
> > > Dear Ian,
> > >
> > > Thanks for this. Please see below:
> > >
> > >> -----Original Message-----
> > >> From: Ian Gow [mailto:iandgow at gmail.com]
> > >> Sent: March-15-15 5:07 PM
> > >> To: John Fox
> > >> Cc: r-sig-mac at r-project.org
> > >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> > >>
> > >> I think it's driven by the PATH variable, which appears to differ for
> > >> me between RStudio and R from Terminal on the one hand and R.app on
> > >> the other.
> > >
> > > Yes, I understand that, though I don't understand why there's a
> > > difference in the path.
> > >
> > >>
> > >>> Sys.getenv("PATH")
> > >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> > >>> Sys.which("pdflatex")
> > >> pdflatex
> > >>       ""
> > >>
> > >> If I add
> > >>
> > >> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
> > >>
> > >> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
> > >>
> > >>> Sys.which("pdflatex")
> > >>                  pdflatex
> > >> "/opt/local/bin/pdflatex"
> > >>> Sys.getenv("PATH")
> > >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
> > >
> > > The problem for me is to determine whether pdflatex is installed
> > > *without* knowing in advance where it's installed. I haven't described
> > > the purpose of this, and, in the interest of brevity, won't for the
> > > time-being, but it may also prove necessary to determine where pdflatex
> > resides.
> > >
> > > Best,
> > > John
> > >
> > >>
> > >>
> > >> On 15 Mar 2015, at 16:46, John Fox wrote:
> > >>
> > >>> Dear list members,
> > >>>
> > >>> I need to determine whether pdflatex is installed and have been
> > >>> doing that via Sys.which("pdflatex"). This works when R is run in a
> > >>> terminal window (or in RStudio):
> > >>>
> > >>>> Sys.which("pdflatex")
> > >>>           pdflatex
> > >>> "/usr/texbin/pdflatex"
> > >>>
> > >>> but not from R.app:
> > >>>
> > >>>> Sys.which("pdflatex")
> > >>> pdflatex
> > >>>   ""
> > >>>
> > >>> The session info is the same in both cases:
> > >>>
> > >>> -------------- snip ----------------
> > >>>
> > >>>> sessionInfo()
> > >>> R version 3.1.3 (2015-03-09)
> > >>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
> > >>> 10.10.2 (Yosemite)
> > >>>
> > >>> locale:
> > >>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-
> > 8/en_CA.UTF-
> > >> 8
> > >>>
> > >>> attached base packages:
> > >>> [1] stats     graphics  grDevices utils     datasets  methods   base
> > >>>
> > >>> -------------- snip ----------------
> > >>>
> > >>> Why is the result different? Is there a better way to check for the
> > >>> presence of pdflatex?
> > >>>
> > >>> Any help would be appreciated.
> > >>>
> > >>> Thanks,
> > >>> John
> > >>>
> > >>> ------------------------------------------------
> > >>> John Fox, Professor
> > >>> McMaster University
> > >>> Hamilton, Ontario, Canada
> > >>> http://socserv.mcmaster.ca/jfox/
> > >>>
> > >>> _______________________________________________
> > >>> R-SIG-Mac mailing list
> > >>> R-SIG-Mac at r-project.org
> > >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > >
> > >
> > > ---
> > > This email has been checked for viruses by Avast antivirus software.
> > >
> > > _______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SIG-Mac at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > >
>
>
> ---
> This email has been checked for viruses by Avast antivirus software.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From bhh at xs4all.nl  Mon Mar 16 18:26:42 2015
From: bhh at xs4all.nl (Berend Hasselman)
Date: Mon, 16 Mar 2015 18:26:42 +0100
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
Message-ID: <6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>


> On 16-03-2015, at 17:25, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear Simon,
> 
> Thanks for this, and to the others who responded to my question. The FAQ and Matt Denwood's response jogged my memory, and reminded me that I encountered this problem before.
> 
> In this case, I don't see a good solution, but I'll think about the problem some more. 
> 
> Without providing too many tedious details, the development version of the Rcmdr package checks at startup what resources are available to it, including pdflatex, and configures itself accordingly. Having inexperienced users edit, e.g., their .Renviron files is probably a non-starter. The Rcmdr could offer to do this at the user's option (it already provides dialogs that guide the user to locations of missing software like LaTeX and pandoc), but I'd still have to be able to figure out whether pdflatex is available and if so where it's located.
> 
> Ian Gow suggested using locate, but I apparently can't rely on a locate database having been compiled -- it wasn't on my Mac -- and the overhead of compiling the locate db is excessive for a start-up check.
> 
> Again, thanks for explaining the problem.

For what it?s worth: I have the following code in the .First function in ~/.Rprofile:
(R 3.1.3 on OS X Yosemite)

    if( .Platform$GUI == "AQUA" ) {
        # this appends /usr/local/bin to what is already in PATH
        # by default this is already in PATH (at least in 10.6.8)
        # so remove any duplicated items
        z <- Sys.getenv("PATH")
        z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
        # add path to MacTeX executables for OS X Yosemite (which has a bug)
        # in Terminal it is added automatically
        z[length(z)+1] <- "/usr/texbin"
        Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
    }

Berend


From jfox at mcmaster.ca  Mon Mar 16 18:48:48 2015
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 16 Mar 2015 13:48:48 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <CABtg=Kkcz6Ux-cbisFgvvWai80F4NpUzKwaDtLY0Uiv4KWjZTw@mail.gmail.com>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<CABtg=Kkcz6Ux-cbisFgvvWai80F4NpUzKwaDtLY0Uiv4KWjZTw@mail.gmail.com>
Message-ID: <002801d06011$77de1ce0$679a56a0$@mcmaster.ca>

Dear Gabor,

> -----Original Message-----
> From: G?bor Cs?rdi [mailto:csardi.gabor at gmail.com]
> Sent: March-16-15 12:39 PM
> To: John Fox
> Cc: Simon Urbanek; R-SIG-Mac
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> John,
> 
> my guess is that on OSX, >95% of the users have https://tug.org/mactex/,
> which seems to have pdflatex in /usr/texbin. If it is not there, then most
> likely the user does not have pdflatex installed, and you can give a note or
> warning about it.

If that's the case, then this certainly makes sense as a solution. In fact, if the Rcmdr (development version) doesn't detect pdflatex it provides a menu item and dialog under its Tools menu that will take the user to <http://www.tug.org/mactex/>.

> 
> If you want to be sure, you can check other tex distributions for OSX, to be
> honest I don't know any other. Based on http://mactex-
> wiki.tug.org/wiki/index.php/Distribution_Matrix pretty much MacTeX is the
> only player. Maybe people also install TeX with brew, so it might be worth
> checking that, too.

I think that I'll initially go for the simpler solution. I suspect that most Rcmdr Mac OS X users won't have LaTeX installed prior to installing the Rcmdr package. I can put an explanation in the help page for the dialog.

Thanks for the suggestion,
 John

> 
> Gabor
> 
> On Mon, Mar 16, 2015 at 12:25 PM, John Fox <jfox at mcmaster.ca> wrote:
> 
> 
> 	Dear Simon,
> 
> 	Thanks for this, and to the others who responded to my question.
> The FAQ and Matt Denwood's response jogged my memory, and reminded
> me that I encountered this problem before.
> 
> 	In this case, I don't see a good solution, but I'll think about the
> problem some more.
> 
> 	Without providing too many tedious details, the development
> version of the Rcmdr package checks at startup what resources are available
> to it, including pdflatex, and configures itself accordingly. Having
> inexperienced users edit, e.g., their .Renviron files is probably a non-starter.
> The Rcmdr could offer to do this at the user's option (it already provides
> dialogs that guide the user to locations of missing software like LaTeX and
> pandoc), but I'd still have to be able to figure out whether pdflatex is
> available and if so where it's located.
> 
> 	Ian Gow suggested using locate, but I apparently can't rely on a
> locate database having been compiled -- it wasn't on my Mac -- and the
> overhead of compiling the locate db is excessive for a start-up check.
> 
> 	Again, thanks for explaining the problem.
> 
> 	John
> 
> 	> -----Original Message-----
> 	> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> 	> Sent: March-16-15 10:39 AM
> 	> To: John Fox
> 	> Cc: Ian Gow; r-sig-mac at r-project.org
> 	> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 	>
> 	> John,
> 	>
> 	> see R for Mac FAQ 10.13: I get ?command not found? in the GUI yet
> it works
> 	> in the Terminal ? why?
> 	>
> 	> Cheers,
> 	> Simon
> 	>
> 	>
> 	> > On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca>
> wrote:
> 	> >
> 	> > Dear Ian,
> 	> >
> 	> > Thanks for this. Please see below:
> 	> >
> 	> >> -----Original Message-----
> 	> >> From: Ian Gow [mailto:iandgow at gmail.com]
> 	> >> Sent: March-15-15 5:07 PM
> 	> >> To: John Fox
> 	> >> Cc: r-sig-mac at r-project.org
> 	> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 	> >>
> 	> >> I think it's driven by the PATH variable, which appears to differ
> for
> 	> >> me between RStudio and R from Terminal on the one hand and
> R.app on
> 	> >> the other.
> 	> >
> 	> > Yes, I understand that, though I don't understand why there's a
> 	> > difference in the path.
> 	> >
> 	> >>
> 	> >>> Sys.getenv("PATH")
> 	> >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> 	> >>> Sys.which("pdflatex")
> 	> >> pdflatex
> 	> >>       ""
> 	> >>
> 	> >> If I add
> 	> >>
> 	> >> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin",
> sep=":"))
> 	> >>
> 	> >> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my
> case).
> 	> >>
> 	> >>> Sys.which("pdflatex")
> 	> >>                  pdflatex
> 	> >> "/opt/local/bin/pdflatex"
> 	> >>> Sys.getenv("PATH")
> 	> >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
> 	> >
> 	> > The problem for me is to determine whether pdflatex is installed
> 	> > *without* knowing in advance where it's installed. I haven't
> described
> 	> > the purpose of this, and, in the interest of brevity, won't for the
> 	> > time-being, but it may also prove necessary to determine where
> pdflatex
> 	> resides.
> 	> >
> 	> > Best,
> 	> > John
> 	> >
> 	> >>
> 	> >>
> 	> >> On 15 Mar 2015, at 16:46, John Fox wrote:
> 	> >>
> 	> >>> Dear list members,
> 	> >>>
> 	> >>> I need to determine whether pdflatex is installed and have
> been
> 	> >>> doing that via Sys.which("pdflatex"). This works when R is run
> in a
> 	> >>> terminal window (or in RStudio):
> 	> >>>
> 	> >>>> Sys.which("pdflatex")
> 	> >>>           pdflatex
> 	> >>> "/usr/texbin/pdflatex"
> 	> >>>
> 	> >>> but not from R.app:
> 	> >>>
> 	> >>>> Sys.which("pdflatex")
> 	> >>> pdflatex
> 	> >>>   ""
> 	> >>>
> 	> >>> The session info is the same in both cases:
> 	> >>>
> 	> >>> -------------- snip ----------------
> 	> >>>
> 	> >>>> sessionInfo()
> 	> >>> R version 3.1.3 (2015-03-09)
> 	> >>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under:
> OS X
> 	> >>> 10.10.2 (Yosemite)
> 	> >>>
> 	> >>> locale:
> 	> >>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-
> 	> 8/en_CA.UTF-
> 	> >> 8
> 	> >>>
> 	> >>> attached base packages:
> 	> >>> [1] stats     graphics  grDevices utils     datasets  methods   base
> 	> >>>
> 	> >>> -------------- snip ----------------
> 	> >>>
> 	> >>> Why is the result different? Is there a better way to check for
> the
> 	> >>> presence of pdflatex?
> 	> >>>
> 	> >>> Any help would be appreciated.
> 	> >>>
> 	> >>> Thanks,
> 	> >>> John
> 	> >>>
> 	> >>> ------------------------------------------------
> 	> >>> John Fox, Professor
> 	> >>> McMaster University
> 	> >>> Hamilton, Ontario, Canada
> 	> >>> http://socserv.mcmaster.ca/jfox/
> 	> >>>
> 	> >>> _______________________________________________
> 	> >>> R-SIG-Mac mailing list
> 	> >>> R-SIG-Mac at r-project.org
> 	> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 	> >
> 	> >
> 	> > ---
> 	> > This email has been checked for viruses by Avast antivirus
> software.
> 	> >
> 	> > _______________________________________________
> 	> > R-SIG-Mac mailing list
> 	> > R-SIG-Mac at r-project.org
> 	> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 	> >
> 
> 
> 	---
> 	This email has been checked for viruses by Avast antivirus software.
> 
> 	_______________________________________________
> 	R-SIG-Mac mailing list
> 	R-SIG-Mac at r-project.org
> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 



---
This email has been checked for viruses by Avast antivirus software.


From simon.urbanek at r-project.org  Mon Mar 16 18:50:45 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 16 Mar 2015 13:50:45 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
Message-ID: <ADE7E0A2-FCA4-48AC-B5BC-DC58830E4108@r-project.org>


> On Mar 16, 2015, at 12:25 PM, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear Simon,
> 
> Thanks for this, and to the others who responded to my question. The FAQ and Matt Denwood's response jogged my memory, and reminded me that I encountered this problem before.
> 
> In this case, I don't see a good solution, but I'll think about the problem some more.
> 
> Without providing too many tedious details, the development version of the Rcmdr package checks at startup what resources are available to it, including pdflatex, and configures itself accordingly. Having inexperienced users edit, e.g., their .Renviron files is probably a non-starter. The Rcmdr could offer to do this at the user's option (it already provides dialogs that guide the user to locations of missing software like LaTeX and pandoc), but I'd still have to be able to figure out whether pdflatex is available and if so where it's located.
> 
> Ian Gow suggested using locate, but I apparently can't rely on a locate database having been compiled -- it wasn't on my Mac -- and the overhead of compiling the locate db is excessive for a start-up check.
> 

Apple maintains a database of installed software in the system - see pkgutil. The trouble is that the add-on projects like MacPort or brew ignore it completely and don't register with it. As Gabor pointed out there is essentially only one player in the field - MacTeX and it does register.

Anyway, if you want to retrieve the PATH used by shells, you can try

/usr/libexec/path_helper -s

which gives the corresponding entry for bash-like shells.

Cheers,
Simon



> Again, thanks for explaining the problem.
> 
> John
> 
>> -----Original Message-----
>> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
>> Sent: March-16-15 10:39 AM
>> To: John Fox
>> Cc: Ian Gow; r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> 
>> John,
>> 
>> see R for Mac FAQ 10.13: I get ?command not found? in the GUI yet it works
>> in the Terminal ? why?
>> 
>> Cheers,
>> Simon
>> 
>> 
>>> On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
>>> 
>>> Dear Ian,
>>> 
>>> Thanks for this. Please see below:
>>> 
>>>> -----Original Message-----
>>>> From: Ian Gow [mailto:iandgow at gmail.com]
>>>> Sent: March-15-15 5:07 PM
>>>> To: John Fox
>>>> Cc: r-sig-mac at r-project.org
>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>>> 
>>>> I think it's driven by the PATH variable, which appears to differ for
>>>> me between RStudio and R from Terminal on the one hand and R.app on
>>>> the other.
>>> 
>>> Yes, I understand that, though I don't understand why there's a
>>> difference in the path.
>>> 
>>>> 
>>>>> Sys.getenv("PATH")
>>>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>>>>> Sys.which("pdflatex")
>>>> pdflatex
>>>>      ""
>>>> 
>>>> If I add
>>>> 
>>>> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
>>>> 
>>>> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
>>>> 
>>>>> Sys.which("pdflatex")
>>>>                 pdflatex
>>>> "/opt/local/bin/pdflatex"
>>>>> Sys.getenv("PATH")
>>>> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
>>> 
>>> The problem for me is to determine whether pdflatex is installed
>>> *without* knowing in advance where it's installed. I haven't described
>>> the purpose of this, and, in the interest of brevity, won't for the
>>> time-being, but it may also prove necessary to determine where pdflatex
>> resides.
>>> 
>>> Best,
>>> John
>>> 
>>>> 
>>>> 
>>>> On 15 Mar 2015, at 16:46, John Fox wrote:
>>>> 
>>>>> Dear list members,
>>>>> 
>>>>> I need to determine whether pdflatex is installed and have been
>>>>> doing that via Sys.which("pdflatex"). This works when R is run in a
>>>>> terminal window (or in RStudio):
>>>>> 
>>>>>> Sys.which("pdflatex")
>>>>>          pdflatex
>>>>> "/usr/texbin/pdflatex"
>>>>> 
>>>>> but not from R.app:
>>>>> 
>>>>>> Sys.which("pdflatex")
>>>>> pdflatex
>>>>>  ""
>>>>> 
>>>>> The session info is the same in both cases:
>>>>> 
>>>>> -------------- snip ----------------
>>>>> 
>>>>>> sessionInfo()
>>>>> R version 3.1.3 (2015-03-09)
>>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
>>>>> 10.10.2 (Yosemite)
>>>>> 
>>>>> locale:
>>>>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-
>> 8/en_CA.UTF-
>>>> 8
>>>>> 
>>>>> attached base packages:
>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>> 
>>>>> -------------- snip ----------------
>>>>> 
>>>>> Why is the result different? Is there a better way to check for the
>>>>> presence of pdflatex?
>>>>> 
>>>>> Any help would be appreciated.
>>>>> 
>>>>> Thanks,
>>>>> John
>>>>> 
>>>>> ------------------------------------------------
>>>>> John Fox, Professor
>>>>> McMaster University
>>>>> Hamilton, Ontario, Canada
>>>>> http://socserv.mcmaster.ca/jfox/
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> 
>>> ---
>>> This email has been checked for viruses by Avast antivirus software.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> http://www.avast.com
> 


From jfox at mcmaster.ca  Mon Mar 16 18:53:20 2015
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 16 Mar 2015 13:53:20 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
Message-ID: <002901d06012$17baa490$472fedb0$@mcmaster.ca>

Dear Berend,

> -----Original Message-----
> From: Berend Hasselman [mailto:bhh at xs4all.nl]
> Sent: March-16-15 1:27 PM
> To: jfox at mcmaster.ca
> Cc: Simon Urbanek; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> 
> > On 16-03-2015, at 17:25, John Fox <jfox at mcmaster.ca> wrote:
> >
> > Dear Simon,
> >
> > Thanks for this, and to the others who responded to my question. The FAQ
> and Matt Denwood's response jogged my memory, and reminded me that I
> encountered this problem before.
> >
> > In this case, I don't see a good solution, but I'll think about the problem
> some more.
> >
> > Without providing too many tedious details, the development version of
> the Rcmdr package checks at startup what resources are available to it,
> including pdflatex, and configures itself accordingly. Having inexperienced
> users edit, e.g., their .Renviron files is probably a non-starter. The Rcmdr
> could offer to do this at the user's option (it already provides dialogs that
> guide the user to locations of missing software like LaTeX and pandoc), but
> I'd still have to be able to figure out whether pdflatex is available and if so
> where it's located.
> >
> > Ian Gow suggested using locate, but I apparently can't rely on a locate
> database having been compiled -- it wasn't on my Mac -- and the overhead
> of compiling the locate db is excessive for a start-up check.
> >
> > Again, thanks for explaining the problem.
> 
> For what it?s worth: I have the following code in the .First function in
> ~/.Rprofile:
> (R 3.1.3 on OS X Yosemite)
> 
>     if( .Platform$GUI == "AQUA" ) {
>         # this appends /usr/local/bin to what is already in PATH
>         # by default this is already in PATH (at least in 10.6.8)
>         # so remove any duplicated items
>         z <- Sys.getenv("PATH")
>         z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
>         # add path to MacTeX executables for OS X Yosemite (which has a bug)
>         # in Terminal it is added automatically
>         z[length(z)+1] <- "/usr/texbin"
>         Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
>     }

This should work fine if pdflatex is in /usr/texbin, which I now understand is by far the most common case (and is the case on my Mac).

Do you mind if I adapt your code for the Rcmdr? I can fix the path in this manner at startup of the Rcmdr GUI and restore it to its initial value on exit from the GUI.

Thanks for this,
 John

> 
> Berend


---
This email has been checked for viruses by Avast antivirus software.


From bhh at xs4all.nl  Mon Mar 16 19:33:40 2015
From: bhh at xs4all.nl (Berend Hasselman)
Date: Mon, 16 Mar 2015 19:33:40 +0100
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <002901d06012$17baa490$472fedb0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
Message-ID: <F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>

John,

> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear Berend,
> ?.
>> 
>> For what it?s worth: I have the following code in the .First function in
>> ~/.Rprofile:
>> (R 3.1.3 on OS X Yosemite)
>> 
>>    if( .Platform$GUI == "AQUA" ) {
>>        # this appends /usr/local/bin to what is already in PATH
>>        # by default this is already in PATH (at least in 10.6.8)
>>        # so remove any duplicated items
>>        z <- Sys.getenv("PATH")
>>        z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
>>        # add path to MacTeX executables for OS X Yosemite (which has a bug)
>>        # in Terminal it is added automatically
>>        z[length(z)+1] <- "/usr/texbin"
>>        Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
>>    }
> 
> This should work fine if pdflatex is in /usr/texbin, which I now understand is by far the most common case (and is the case on my Mac).
> 
> Do you mind if I adapt your code for the Rcmdr? I can fix the path in this manner at startup of the Rcmdr GUI and restore it to its initial value on exit from the GUI.
> 

Go right ahead. Don?t forget it assumes MacTeX.

But do also have a look Simon?s suggestion of using path_helper, which seems more flexible than my solution:

I tried this in R-GUI

system2("/usr/libexec/path_helper","-s", stdout=TRUE)

and got this answer

[1] "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr/texbin\"; export PATH;?

which will have to be fiddled with to get something that is usable. 

Berend


> Thanks for this,
> John
> 
>> 
>> Berend
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> http://www.avast.com
> 


From iandgow at gmail.com  Mon Mar 16 19:38:28 2015
From: iandgow at gmail.com (Ian Gow)
Date: Mon, 16 Mar 2015 14:38:28 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <002801d06011$77de1ce0$679a56a0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<CABtg=Kkcz6Ux-cbisFgvvWai80F4NpUzKwaDtLY0Uiv4KWjZTw@mail.gmail.com>
	<002801d06011$77de1ce0$679a56a0$@mcmaster.ca>
Message-ID: <11A985EC-BD10-475E-BD7C-77147A3CA4E1@gmail.com>



On 16 Mar 2015, at 13:48, John Fox wrote:

> Dear Gabor,
>
>> -----Original Message-----
>> From: G?bor Cs?rdi [mailto:csardi.gabor at gmail.com]
>> Sent: March-16-15 12:39 PM
>> To: John Fox
>> Cc: Simon Urbanek; R-SIG-Mac
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>
>> John,
>>
>> my guess is that on OSX, >95% of the users have 
>> https://tug.org/mactex/,
>> which seems to have pdflatex in /usr/texbin. If it is not there, then 
>> most
>> likely the user does not have pdflatex installed, and you can give a 
>> note or
>> warning about it.
>
> If that's the case, then this certainly makes sense as a solution. In 
> fact, if the Rcmdr (development version) doesn't detect pdflatex it 
> provides a menu item and dialog under its Tools menu that will take 
> the user to <http://www.tug.org/mactex/>.

That's what Texpad does (https://www.texpadapp.com).

>
>>
>> If you want to be sure, you can check other tex distributions for 
>> OSX, to be
>> honest I don't know any other. Based on http://mactex-
>> wiki.tug.org/wiki/index.php/Distribution_Matrix pretty much MacTeX is 
>> the
>> only player. Maybe people also install TeX with brew, so it might be 
>> worth
>> checking that, too.
>
> I think that I'll initially go for the simpler solution. I suspect 
> that most Rcmdr Mac OS X users won't have LaTeX installed prior to 
> installing the Rcmdr package. I can put an explanation in the help 
> page for the dialog.
>
> Thanks for the suggestion,
> John
>
>>
>> Gabor
>>
>> On Mon, Mar 16, 2015 at 12:25 PM, John Fox <jfox at mcmaster.ca> wrote:
>>
>>
>> 	Dear Simon,
>>
>> 	Thanks for this, and to the others who responded to my question.
>> The FAQ and Matt Denwood's response jogged my memory, and reminded
>> me that I encountered this problem before.
>>
>> 	In this case, I don't see a good solution, but I'll think about the
>> problem some more.
>>
>> 	Without providing too many tedious details, the development
>> version of the Rcmdr package checks at startup what resources are 
>> available
>> to it, including pdflatex, and configures itself accordingly. Having
>> inexperienced users edit, e.g., their .Renviron files is probably a 
>> non-starter.
>> The Rcmdr could offer to do this at the user's option (it already 
>> provides
>> dialogs that guide the user to locations of missing software like 
>> LaTeX and
>> pandoc), but I'd still have to be able to figure out whether pdflatex 
>> is
>> available and if so where it's located.
>>
>> 	Ian Gow suggested using locate, but I apparently can't rely on a
>> locate database having been compiled -- it wasn't on my Mac -- and 
>> the
>> overhead of compiling the locate db is excessive for a start-up 
>> check.
>>
>> 	Again, thanks for explaining the problem.
>>
>> 	John
>>
>> 	> -----Original Message-----
>> 	> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
>> 	> Sent: March-16-15 10:39 AM
>> 	> To: John Fox
>> 	> Cc: Ian Gow; r-sig-mac at r-project.org
>> 	> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> 	>
>> 	> John,
>> 	>
>> 	> see R for Mac FAQ 10.13: I get ?command not found? in the GUI 
>> yet
>> it works
>> 	> in the Terminal ? why?
>> 	>
>> 	> Cheers,
>> 	> Simon
>> 	>
>> 	>
>> 	> > On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca>
>> wrote:
>> 	> >
>> 	> > Dear Ian,
>> 	> >
>> 	> > Thanks for this. Please see below:
>> 	> >
>> 	> >> -----Original Message-----
>> 	> >> From: Ian Gow [mailto:iandgow at gmail.com]
>> 	> >> Sent: March-15-15 5:07 PM
>> 	> >> To: John Fox
>> 	> >> Cc: r-sig-mac at r-project.org
>> 	> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> 	> >>
>> 	> >> I think it's driven by the PATH variable, which appears to 
>> differ
>> for
>> 	> >> me between RStudio and R from Terminal on the one hand and
>> R.app on
>> 	> >> the other.
>> 	> >
>> 	> > Yes, I understand that, though I don't understand why there's a
>> 	> > difference in the path.
>> 	> >
>> 	> >>
>> 	> >>> Sys.getenv("PATH")
>> 	> >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>> 	> >>> Sys.which("pdflatex")
>> 	> >> pdflatex
>> 	> >>       ""
>> 	> >>
>> 	> >> If I add
>> 	> >>
>> 	> >> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin",
>> sep=":"))
>> 	> >>
>> 	> >> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my
>> case).
>> 	> >>
>> 	> >>> Sys.which("pdflatex")
>> 	> >>                  pdflatex
>> 	> >> "/opt/local/bin/pdflatex"
>> 	> >>> Sys.getenv("PATH")
>> 	> >> [1] 
>> "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
>> 	> >
>> 	> > The problem for me is to determine whether pdflatex is installed
>> 	> > *without* knowing in advance where it's installed. I haven't
>> described
>> 	> > the purpose of this, and, in the interest of brevity, won't for 
>> the
>> 	> > time-being, but it may also prove necessary to determine where
>> pdflatex
>> 	> resides.
>> 	> >
>> 	> > Best,
>> 	> > John
>> 	> >
>> 	> >>
>> 	> >>
>> 	> >> On 15 Mar 2015, at 16:46, John Fox wrote:
>> 	> >>
>> 	> >>> Dear list members,
>> 	> >>>
>> 	> >>> I need to determine whether pdflatex is installed and have
>> been
>> 	> >>> doing that via Sys.which("pdflatex"). This works when R is run
>> in a
>> 	> >>> terminal window (or in RStudio):
>> 	> >>>
>> 	> >>>> Sys.which("pdflatex")
>> 	> >>>           pdflatex
>> 	> >>> "/usr/texbin/pdflatex"
>> 	> >>>
>> 	> >>> but not from R.app:
>> 	> >>>
>> 	> >>>> Sys.which("pdflatex")
>> 	> >>> pdflatex
>> 	> >>>   ""
>> 	> >>>
>> 	> >>> The session info is the same in both cases:
>> 	> >>>
>> 	> >>> -------------- snip ----------------
>> 	> >>>
>> 	> >>>> sessionInfo()
>> 	> >>> R version 3.1.3 (2015-03-09)
>> 	> >>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under:
>> OS X
>> 	> >>> 10.10.2 (Yosemite)
>> 	> >>>
>> 	> >>> locale:
>> 	> >>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-
>> 	> 8/en_CA.UTF-
>> 	> >> 8
>> 	> >>>
>> 	> >>> attached base packages:
>> 	> >>> [1] stats     graphics  grDevices utils     datasets  methods  
>>  base
>> 	> >>>
>> 	> >>> -------------- snip ----------------
>> 	> >>>
>> 	> >>> Why is the result different? Is there a better way to check 
>> for
>> the
>> 	> >>> presence of pdflatex?
>> 	> >>>
>> 	> >>> Any help would be appreciated.
>> 	> >>>
>> 	> >>> Thanks,
>> 	> >>> John
>> 	> >>>
>> 	> >>> ------------------------------------------------
>> 	> >>> John Fox, Professor
>> 	> >>> McMaster University
>> 	> >>> Hamilton, Ontario, Canada
>> 	> >>> http://socserv.mcmaster.ca/jfox/
>> 	> >>>
>> 	> >>> _______________________________________________
>> 	> >>> R-SIG-Mac mailing list
>> 	> >>> R-SIG-Mac at r-project.org
>> 	> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 	> >
>> 	> >
>> 	> > ---
>> 	> > This email has been checked for viruses by Avast antivirus
>> software.
>> 	> >
>> 	> > _______________________________________________
>> 	> > R-SIG-Mac mailing list
>> 	> > R-SIG-Mac at r-project.org
>> 	> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 	> >
>>
>>
>> 	---
>> 	This email has been checked for viruses by Avast antivirus software.
>>
>> 	_______________________________________________
>> 	R-SIG-Mac mailing list
>> 	R-SIG-Mac at r-project.org
>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>
>
>
> ---
> This email has been checked for viruses by Avast antivirus software.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

	[[alternative HTML version deleted]]


From jfox at mcmaster.ca  Mon Mar 16 19:44:57 2015
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 16 Mar 2015 14:44:57 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
Message-ID: <002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>

Dear Berend and Simon,

I've now tried Berend's solution and it appears to work fine: If necessary, I add /usr/texbin to the path when the Rcmdr GUI starts up and restore the path to its previous state when it closes.

I agree that Simon's solution will be more flexible since it should work if pdflatex is located elsewhere (as long as it's on the path reported by path_helper), and I'll give that a try as well.

Thanks again for all the help,
 John

> -----Original Message-----
> From: Berend Hasselman [mailto:bhh at xs4all.nl]
> Sent: March-16-15 2:34 PM
> To: jfox at mcmaster.ca
> Cc: Simon Urbanek; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> John,
> 
> > On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
> >
> > Dear Berend,
> > ?.
> >>
> >> For what it?s worth: I have the following code in the .First function in
> >> ~/.Rprofile:
> >> (R 3.1.3 on OS X Yosemite)
> >>
> >>    if( .Platform$GUI == "AQUA" ) {
> >>        # this appends /usr/local/bin to what is already in PATH
> >>        # by default this is already in PATH (at least in 10.6.8)
> >>        # so remove any duplicated items
> >>        z <- Sys.getenv("PATH")
> >>        z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
> >>        # add path to MacTeX executables for OS X Yosemite (which has a
> bug)
> >>        # in Terminal it is added automatically
> >>        z[length(z)+1] <- "/usr/texbin"
> >>
> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
> >>    }
> >
> > This should work fine if pdflatex is in /usr/texbin, which I now understand is
> by far the most common case (and is the case on my Mac).
> >
> > Do you mind if I adapt your code for the Rcmdr? I can fix the path in this
> manner at startup of the Rcmdr GUI and restore it to its initial value on exit
> from the GUI.
> >
> 
> Go right ahead. Don?t forget it assumes MacTeX.
> 
> But do also have a look Simon?s suggestion of using path_helper, which
> seems more flexible than my solution:
> 
> I tried this in R-GUI
> 
> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
> 
> and got this answer
> 
> [1]
> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr/texbi
> n\"; export PATH;?
> 
> which will have to be fiddled with to get something that is usable.
> 
> Berend
> 
> 
> > Thanks for this,
> > John
> >
> >>
> >> Berend
> >
> >
> > ---
> > This email has been checked for viruses by Avast antivirus software.
> > http://www.avast.com
> >


---
This email has been checked for viruses by Avast antivirus software.


From jfox at mcmaster.ca  Mon Mar 16 20:43:04 2015
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 16 Mar 2015 15:43:04 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>	<002901d06012$17baa490$472fedb0$@mcmaster.ca>	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
Message-ID: <003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>

Dear all,

I've now implemented Simon's solution, setting the path in the .onLoad() function of the Rcmdr package and resetting it to its pre-existing value in .onUnload(). This seems to work fine for me and, I hope, will be a more robust solution.

Thanks again to everyone for their help.

John

> -----Original Message-----
> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On Behalf Of
> John Fox
> Sent: March-16-15 2:45 PM
> To: 'Berend Hasselman'
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> Dear Berend and Simon,
> 
> I've now tried Berend's solution and it appears to work fine: If necessary, I
> add /usr/texbin to the path when the Rcmdr GUI starts up and restore the
> path to its previous state when it closes.
> 
> I agree that Simon's solution will be more flexible since it should work if
> pdflatex is located elsewhere (as long as it's on the path reported by
> path_helper), and I'll give that a try as well.
> 
> Thanks again for all the help,
>  John
> 
> > -----Original Message-----
> > From: Berend Hasselman [mailto:bhh at xs4all.nl]
> > Sent: March-16-15 2:34 PM
> > To: jfox at mcmaster.ca
> > Cc: Simon Urbanek; r-sig-mac at r-project.org
> > Subject: Re: [R-SIG-Mac] checking for pdflatex
> >
> > John,
> >
> > > On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
> > >
> > > Dear Berend,
> > > ?.
> > >>
> > >> For what it?s worth: I have the following code in the .First
> > >> function in
> > >> ~/.Rprofile:
> > >> (R 3.1.3 on OS X Yosemite)
> > >>
> > >>    if( .Platform$GUI == "AQUA" ) {
> > >>        # this appends /usr/local/bin to what is already in PATH
> > >>        # by default this is already in PATH (at least in 10.6.8)
> > >>        # so remove any duplicated items
> > >>        z <- Sys.getenv("PATH")
> > >>        z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
> > >>        # add path to MacTeX executables for OS X Yosemite (which
> > >> has a
> > bug)
> > >>        # in Terminal it is added automatically
> > >>        z[length(z)+1] <- "/usr/texbin"
> > >>
> > Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
> > >>    }
> > >
> > > This should work fine if pdflatex is in /usr/texbin, which I now
> > > understand is
> > by far the most common case (and is the case on my Mac).
> > >
> > > Do you mind if I adapt your code for the Rcmdr? I can fix the path
> > > in this
> > manner at startup of the Rcmdr GUI and restore it to its initial value
> > on exit from the GUI.
> > >
> >
> > Go right ahead. Don?t forget it assumes MacTeX.
> >
> > But do also have a look Simon?s suggestion of using path_helper, which
> > seems more flexible than my solution:
> >
> > I tried this in R-GUI
> >
> > system2("/usr/libexec/path_helper","-s", stdout=TRUE)
> >
> > and got this answer
> >
> > [1]
> > "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr
> > /texbi
> > n\"; export PATH;?
> >
> > which will have to be fiddled with to get something that is usable.
> >
> > Berend
> >
> >
> > > Thanks for this,
> > > John
> > >
> > >>
> > >> Berend
> > >
> > >
> > > ---
> > > This email has been checked for viruses by Avast antivirus software.
> > > http://www.avast.com
> > >
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


---
This email has been checked for viruses by Avast antivirus software.


From ripley at stats.ox.ac.uk  Mon Mar 16 20:55:43 2015
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 16 Mar 2015 19:55:43 +0000
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>	<002901d06012$17baa490$472fedb0$@mcmaster.ca>	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
Message-ID: <5507353F.7010502@stats.ox.ac.uk>

Note that it not just MacTex which uses /usr/texbin.  /usr/texbin is a 
link to /Library/TeX/Distributions/Programs/texbin which is an 
/etc/alternatives scheme to manage multiple TeX distributions which used 
(prior to Yosemite, at least) to be controlled by a Systems Preferences 
widget.  See https://tug.org/mactex/multipletexdistributions.html .

That does not apply to e.g. Fink or MacPorts distributions of TeX, but 
people using those are not likely to be using R.app.

/usr/libexec/path_helper is not the whole story either: it reads system 
versions of PATH which might not apply to a user's shell: it does not 
get my settings completely correct (in particular it has /usr/texbin too 
far down the PATH and I had moved it because the system path found the 
wrong 'makeindex').


On 16/03/2015 18:44, John Fox wrote:
> Dear Berend and Simon,
>
> I've now tried Berend's solution and it appears to work fine: If necessary, I add /usr/texbin to the path when the Rcmdr GUI starts up and restore the path to its previous state when it closes.
>
> I agree that Simon's solution will be more flexible since it should work if pdflatex is located elsewhere (as long as it's on the path reported by path_helper), and I'll give that a try as well.
>
> Thanks again for all the help,
>   John
>
>> -----Original Message-----
>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
>> Sent: March-16-15 2:34 PM
>> To: jfox at mcmaster.ca
>> Cc: Simon Urbanek; r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>
>> John,
>>
>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
>>>
>>> Dear Berend,
>>> ?.
>>>>
>>>> For what it?s worth: I have the following code in the .First function in
>>>> ~/.Rprofile:
>>>> (R 3.1.3 on OS X Yosemite)
>>>>
>>>>     if( .Platform$GUI == "AQUA" ) {
>>>>         # this appends /usr/local/bin to what is already in PATH
>>>>         # by default this is already in PATH (at least in 10.6.8)
>>>>         # so remove any duplicated items
>>>>         z <- Sys.getenv("PATH")
>>>>         z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
>>>>         # add path to MacTeX executables for OS X Yosemite (which has a
>> bug)
>>>>         # in Terminal it is added automatically
>>>>         z[length(z)+1] <- "/usr/texbin"
>>>>
>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
>>>>     }
>>>
>>> This should work fine if pdflatex is in /usr/texbin, which I now understand is
>> by far the most common case (and is the case on my Mac).
>>>
>>> Do you mind if I adapt your code for the Rcmdr? I can fix the path in this
>> manner at startup of the Rcmdr GUI and restore it to its initial value on exit
>> from the GUI.
>>>
>>
>> Go right ahead. Don?t forget it assumes MacTeX.
>>
>> But do also have a look Simon?s suggestion of using path_helper, which
>> seems more flexible than my solution:
>>
>> I tried this in R-GUI
>>
>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
>>
>> and got this answer
>>
>> [1]
>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr/texbi
>> n\"; export PATH;?
>>
>> which will have to be fiddled with to get something that is usable.
>>
>> Berend
>>
>>
>>> Thanks for this,
>>> John
>>>
>>>>
>>>> Berend
>>>
>>>
>>> ---
>>> This email has been checked for viruses by Avast antivirus software.
>>> http://www.avast.com
>>>
>
>
> ---
> This email has been checked for viruses by Avast antivirus software.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford
1 South Parks Road, Oxford OX1 3TG, UK


From simon.urbanek at r-project.org  Mon Mar 16 20:57:01 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 16 Mar 2015 15:57:01 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
Message-ID: <6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>


> On Mar 16, 2015, at 3:43 PM, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear all,
> 
> I've now implemented Simon's solution, setting the path in the .onLoad() function of the Rcmdr package and resetting it to its pre-existing value in .onUnload(). This seems to work fine for me and, I hope, will be a more robust solution.
> 

I don't think messing with PATH of the R process is a good idea - as a user I'd be somewhat unpleasantly surprised if you changed the PATH of my running session. I'm not quite sure what's your intention, but I would suggest using the setting to locate the binary to run it explicitly - that is what R does normally. If you rely on some scripts that you don't control, then I would suggest setting it in the shell that you start the script with, but not in the R process itself.

Cheers,
Simon



> Thanks again to everyone for their help.
> 
> John
> 
>> -----Original Message-----
>> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On Behalf Of
>> John Fox
>> Sent: March-16-15 2:45 PM
>> To: 'Berend Hasselman'
>> Cc: r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> 
>> Dear Berend and Simon,
>> 
>> I've now tried Berend's solution and it appears to work fine: If necessary, I
>> add /usr/texbin to the path when the Rcmdr GUI starts up and restore the
>> path to its previous state when it closes.
>> 
>> I agree that Simon's solution will be more flexible since it should work if
>> pdflatex is located elsewhere (as long as it's on the path reported by
>> path_helper), and I'll give that a try as well.
>> 
>> Thanks again for all the help,
>> John
>> 
>>> -----Original Message-----
>>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
>>> Sent: March-16-15 2:34 PM
>>> To: jfox at mcmaster.ca
>>> Cc: Simon Urbanek; r-sig-mac at r-project.org
>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>> 
>>> John,
>>> 
>>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
>>>> 
>>>> Dear Berend,
>>>> ?.
>>>>> 
>>>>> For what it?s worth: I have the following code in the .First
>>>>> function in
>>>>> ~/.Rprofile:
>>>>> (R 3.1.3 on OS X Yosemite)
>>>>> 
>>>>>   if( .Platform$GUI == "AQUA" ) {
>>>>>       # this appends /usr/local/bin to what is already in PATH
>>>>>       # by default this is already in PATH (at least in 10.6.8)
>>>>>       # so remove any duplicated items
>>>>>       z <- Sys.getenv("PATH")
>>>>>       z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
>>>>>       # add path to MacTeX executables for OS X Yosemite (which
>>>>> has a
>>> bug)
>>>>>       # in Terminal it is added automatically
>>>>>       z[length(z)+1] <- "/usr/texbin"
>>>>> 
>>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
>>>>>   }
>>>> 
>>>> This should work fine if pdflatex is in /usr/texbin, which I now
>>>> understand is
>>> by far the most common case (and is the case on my Mac).
>>>> 
>>>> Do you mind if I adapt your code for the Rcmdr? I can fix the path
>>>> in this
>>> manner at startup of the Rcmdr GUI and restore it to its initial value
>>> on exit from the GUI.
>>>> 
>>> 
>>> Go right ahead. Don?t forget it assumes MacTeX.
>>> 
>>> But do also have a look Simon?s suggestion of using path_helper, which
>>> seems more flexible than my solution:
>>> 
>>> I tried this in R-GUI
>>> 
>>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
>>> 
>>> and got this answer
>>> 
>>> [1]
>>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr
>>> /texbi
>>> n\"; export PATH;?
>>> 
>>> which will have to be fiddled with to get something that is usable.
>>> 
>>> Berend
>>> 
>>> 
>>>> Thanks for this,
>>>> John
>>>> 
>>>>> 
>>>>> Berend
>>>> 
>>>> 
>>>> ---
>>>> This email has been checked for viruses by Avast antivirus software.
>>>> http://www.avast.com
>>>> 
>> 
>> 
>> ---
>> This email has been checked for viruses by Avast antivirus software.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> http://www.avast.com
> 


From jfox at mcmaster.ca  Tue Mar 17 02:12:07 2015
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 16 Mar 2015 21:12:07 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
Message-ID: <004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>

Dear Simon,

> -----Original Message-----
> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> Sent: March-16-15 3:57 PM
> To: jfox at mcmaster.ca
> Cc: Berend Hasselman; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> 
> > On Mar 16, 2015, at 3:43 PM, John Fox <jfox at mcmaster.ca> wrote:
> >
> > Dear all,
> >
> > I've now implemented Simon's solution, setting the path in the .onLoad()
> function of the Rcmdr package and resetting it to its pre-existing value in
> .onUnload(). This seems to work fine for me and, I hope, will be a more
> robust solution.
> >
> 
> I don't think messing with PATH of the R process is a good idea - as a user I'd
> be somewhat unpleasantly surprised if you changed the PATH of my running
> session. I'm not quite sure what's your intention, but I would suggest using
> the setting to locate the binary to run it explicitly - that is what R does
> normally. If you rely on some scripts that you don't control, then I would
> suggest setting it in the shell that you start the script with, but not in the R
> process itself.

That occurred to me, but the problem arises when a function in the rmarkdown package calls pandoc and pandoc fails to run pdflatex. I don't think that I have control over this. 

I'm cc'ing J. J. Alaire, the maintainer of the rmarkdown package in case he sees a solution in that package. The problem doesn't of course occur when rmarkdown is run from RStudio (or a terminal) but only from R.app, as I explained initially.  (J.J.: Please let me know if this is unclear, and I can send you the rest of this thread.)

OTOH, I doubt whether Rcmdr users will care that the package alters the PATH of the R process (though it would be better to avoid that).

Best,
 John

> 
> Cheers,
> Simon
> 
> 
> 
> > Thanks again to everyone for their help.
> >
> > John
> >
> >> -----Original Message-----
> >> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On Behalf Of
> >> John Fox
> >> Sent: March-16-15 2:45 PM
> >> To: 'Berend Hasselman'
> >> Cc: r-sig-mac at r-project.org
> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>
> >> Dear Berend and Simon,
> >>
> >> I've now tried Berend's solution and it appears to work fine: If
> >> necessary, I add /usr/texbin to the path when the Rcmdr GUI starts up
> >> and restore the path to its previous state when it closes.
> >>
> >> I agree that Simon's solution will be more flexible since it should
> >> work if pdflatex is located elsewhere (as long as it's on the path
> >> reported by path_helper), and I'll give that a try as well.
> >>
> >> Thanks again for all the help,
> >> John
> >>
> >>> -----Original Message-----
> >>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
> >>> Sent: March-16-15 2:34 PM
> >>> To: jfox at mcmaster.ca
> >>> Cc: Simon Urbanek; r-sig-mac at r-project.org
> >>> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>>
> >>> John,
> >>>
> >>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
> >>>>
> >>>> Dear Berend,
> >>>> ?.
> >>>>>
> >>>>> For what it?s worth: I have the following code in the .First
> >>>>> function in
> >>>>> ~/.Rprofile:
> >>>>> (R 3.1.3 on OS X Yosemite)
> >>>>>
> >>>>>   if( .Platform$GUI == "AQUA" ) {
> >>>>>       # this appends /usr/local/bin to what is already in PATH
> >>>>>       # by default this is already in PATH (at least in 10.6.8)
> >>>>>       # so remove any duplicated items
> >>>>>       z <- Sys.getenv("PATH")
> >>>>>       z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
> >>>>>       # add path to MacTeX executables for OS X Yosemite (which
> >>>>> has a
> >>> bug)
> >>>>>       # in Terminal it is added automatically
> >>>>>       z[length(z)+1] <- "/usr/texbin"
> >>>>>
> >>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep)
> >>> )
> >>>>>   }
> >>>>
> >>>> This should work fine if pdflatex is in /usr/texbin, which I now
> >>>> understand is
> >>> by far the most common case (and is the case on my Mac).
> >>>>
> >>>> Do you mind if I adapt your code for the Rcmdr? I can fix the path
> >>>> in this
> >>> manner at startup of the Rcmdr GUI and restore it to its initial
> >>> value on exit from the GUI.
> >>>>
> >>>
> >>> Go right ahead. Don?t forget it assumes MacTeX.
> >>>
> >>> But do also have a look Simon?s suggestion of using path_helper,
> >>> which seems more flexible than my solution:
> >>>
> >>> I tried this in R-GUI
> >>>
> >>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
> >>>
> >>> and got this answer
> >>>
> >>> [1]
> >>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/u
> >>> sr
> >>> /texbi
> >>> n\"; export PATH;?
> >>>
> >>> which will have to be fiddled with to get something that is usable.
> >>>
> >>> Berend
> >>>
> >>>
> >>>> Thanks for this,
> >>>> John
> >>>>
> >>>>>
> >>>>> Berend
> >>>>
> >>>>
> >>>> ---
> >>>> This email has been checked for viruses by Avast antivirus software.
> >>>> http://www.avast.com
> >>>>
> >>
> >>
> >> ---
> >> This email has been checked for viruses by Avast antivirus software.
> >>
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> >
> > ---
> > This email has been checked for viruses by Avast antivirus software.
> > http://www.avast.com
> >


---
This email has been checked for viruses by Avast antivirus software.


From Rainer at krugs.de  Tue Mar 17 12:02:39 2015
From: Rainer at krugs.de (Rainer M Krug)
Date: Tue, 17 Mar 2015 12:02:39 +0100
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <CABtg=Kkcz6Ux-cbisFgvvWai80F4NpUzKwaDtLY0Uiv4KWjZTw@mail.gmail.com>
	(=?utf-8?Q?=22G=C3=A1bor_Cs=C3=A1rdi=22's?= message of "Mon, 16 Mar 2015
	12:38:57 -0400")
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<CABtg=Kkcz6Ux-cbisFgvvWai80F4NpUzKwaDtLY0Uiv4KWjZTw@mail.gmail.com>
Message-ID: <m2619z7upc.fsf@krugs.de>

G?bor Cs?rdi <csardi.gabor at gmail.com> writes:

> John,
>
> my guess is that on OSX, >95% of the users have https://tug.org/mactex/,
> which seems to have pdflatex in /usr/texbin. If it is not there, then most
> likely the user does not have pdflatex installed, and you can give a note
> or warning about it.
>
> If you want to be sure, you can check other tex distributions for OSX, to
> be honest I don't know any other. Based on
> http://mactex-wiki.tug.org/wiki/index.php/Distribution_Matrix pretty much
> MacTeX is the only player. Maybe people also install TeX with brew, so it
> might be worth checking that, too.

Brew does not support LaTeX, as there is MacTex. But brew-cask does, but
it installs the originally binary and also links the binaries to
/usr/texbin/.

Cheers,

Rainer

>
> Gabor
>
> On Mon, Mar 16, 2015 at 12:25 PM, John Fox <jfox at mcmaster.ca> wrote:
>
>> Dear Simon,
>>
>> Thanks for this, and to the others who responded to my question. The FAQ
>> and Matt Denwood's response jogged my memory, and reminded me that I
>> encountered this problem before.
>>
>> In this case, I don't see a good solution, but I'll think about the
>> problem some more.
>>
>> Without providing too many tedious details, the development version of the
>> Rcmdr package checks at startup what resources are available to it,
>> including pdflatex, and configures itself accordingly. Having inexperienced
>> users edit, e.g., their .Renviron files is probably a non-starter. The
>> Rcmdr could offer to do this at the user's option (it already provides
>> dialogs that guide the user to locations of missing software like LaTeX and
>> pandoc), but I'd still have to be able to figure out whether pdflatex is
>> available and if so where it's located.
>>
>> Ian Gow suggested using locate, but I apparently can't rely on a locate
>> database having been compiled -- it wasn't on my Mac -- and the overhead of
>> compiling the locate db is excessive for a start-up check.
>>
>> Again, thanks for explaining the problem.
>>
>> John
>>
>> > -----Original Message-----
>> > From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
>> > Sent: March-16-15 10:39 AM
>> > To: John Fox
>> > Cc: Ian Gow; r-sig-mac at r-project.org
>> > Subject: Re: [R-SIG-Mac] checking for pdflatex
>> >
>> > John,
>> >
>> > see R for Mac FAQ 10.13: I get ?command not found? in the GUI yet it
>> works
>> > in the Terminal ? why?
>> >
>> > Cheers,
>> > Simon
>> >
>> >
>> > > On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
>> > >
>> > > Dear Ian,
>> > >
>> > > Thanks for this. Please see below:
>> > >
>> > >> -----Original Message-----
>> > >> From: Ian Gow [mailto:iandgow at gmail.com]
>> > >> Sent: March-15-15 5:07 PM
>> > >> To: John Fox
>> > >> Cc: r-sig-mac at r-project.org
>> > >> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> > >>
>> > >> I think it's driven by the PATH variable, which appears to differ for
>> > >> me between RStudio and R from Terminal on the one hand and R.app on
>> > >> the other.
>> > >
>> > > Yes, I understand that, though I don't understand why there's a
>> > > difference in the path.
>> > >
>> > >>
>> > >>> Sys.getenv("PATH")
>> > >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>> > >>> Sys.which("pdflatex")
>> > >> pdflatex
>> > >>       ""
>> > >>
>> > >> If I add
>> > >>
>> > >> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
>> > >>
>> > >> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
>> > >>
>> > >>> Sys.which("pdflatex")
>> > >>                  pdflatex
>> > >> "/opt/local/bin/pdflatex"
>> > >>> Sys.getenv("PATH")
>> > >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
>> > >
>> > > The problem for me is to determine whether pdflatex is installed
>> > > *without* knowing in advance where it's installed. I haven't described
>> > > the purpose of this, and, in the interest of brevity, won't for the
>> > > time-being, but it may also prove necessary to determine where pdflatex
>> > resides.
>> > >
>> > > Best,
>> > > John
>> > >
>> > >>
>> > >>
>> > >> On 15 Mar 2015, at 16:46, John Fox wrote:
>> > >>
>> > >>> Dear list members,
>> > >>>
>> > >>> I need to determine whether pdflatex is installed and have been
>> > >>> doing that via Sys.which("pdflatex"). This works when R is run in a
>> > >>> terminal window (or in RStudio):
>> > >>>
>> > >>>> Sys.which("pdflatex")
>> > >>>           pdflatex
>> > >>> "/usr/texbin/pdflatex"
>> > >>>
>> > >>> but not from R.app:
>> > >>>
>> > >>>> Sys.which("pdflatex")
>> > >>> pdflatex
>> > >>>   ""
>> > >>>
>> > >>> The session info is the same in both cases:
>> > >>>
>> > >>> -------------- snip ----------------
>> > >>>
>> > >>>> sessionInfo()
>> > >>> R version 3.1.3 (2015-03-09)
>> > >>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
>> > >>> 10.10.2 (Yosemite)
>> > >>>
>> > >>> locale:
>> > >>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-
>> > 8/en_CA.UTF-
>> > >> 8
>> > >>>
>> > >>> attached base packages:
>> > >>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> > >>>
>> > >>> -------------- snip ----------------
>> > >>>
>> > >>> Why is the result different? Is there a better way to check for the
>> > >>> presence of pdflatex?
>> > >>>
>> > >>> Any help would be appreciated.
>> > >>>
>> > >>> Thanks,
>> > >>> John
>> > >>>
>> > >>> ------------------------------------------------
>> > >>> John Fox, Professor
>> > >>> McMaster University
>> > >>> Hamilton, Ontario, Canada
>> > >>> http://socserv.mcmaster.ca/jfox/
>> > >>>
>> > >>> _______________________________________________
>> > >>> R-SIG-Mac mailing list
>> > >>> R-SIG-Mac at r-project.org
>> > >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> > >
>> > >
>> > > ---
>> > > This email has been checked for viruses by Avast antivirus software.
>> > >
>> > > _______________________________________________
>> > > R-SIG-Mac mailing list
>> > > R-SIG-Mac at r-project.org
>> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> > >
>>
>>
>> ---
>> This email has been checked for viruses by Avast antivirus software.
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Rainer M. Krug
email: Rainer<at>krugs<dot>de
PGP: 0x0F52F982
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 494 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20150317/c3af0109/attachment.bin>

From jfox at mcmaster.ca  Tue Mar 17 14:15:48 2015
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 17 Mar 2015 09:15:48 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
Message-ID: <web-552276731@cgpsrv2.cis.mcmaster.ca>

Dear JJ,

I apologize for not providing more context: I think that we all understand the source of the problem, and I've already read the webpage that you reference and have looked at the RStudio fix.

I've put code in the development version of the Rcmdr that resets the PATH so that it's the same as for R run from a terminal or RStudio, but that may violate CRAN policies and would override a PATH that a user deliberately sets. I thought that there might be a simple way to modify the rmarkdown package so that it doesn't rely on pdflatex being present on the PATH to produce pdf output, but that might not prove feasible.

It's not clear to me why Simon hasn't adopted a fix for R.app similar to the one implemented by RStudio. That would deal with the problem more generally, but perhaps there's some consideration of which I'm unaware.

Best,
 John

On Tue, 17 Mar 2015 06:21:14 -0400
 JJ Allaire <jj at rstudio.com> wrote:
> Sounds like this may be targeted at fixing the OS X Yosemite bug
> wherein some environment variables for GUI applications are
> duplicated:
> 
> http://tex.stackexchange.com/questions/208181/why-did-my-tex-related-gui-program-stop-working-in-mac-os-x-yosemite
> 
> Until Apple fixes this issue I think that GUI applications need to
> clean the duplicated environment variables received at launch time.
> Here's what we do in RStudio:
> 
> https://github.com/rstudio/rstudio/commit/09c9be12
> 
> 
> 
> 
> On Mon, Mar 16, 2015 at 9:12 PM, John Fox <jfox at mcmaster.ca> wrote:
> > Dear Simon,
> >
> >> -----Original Message-----
> >> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> >> Sent: March-16-15 3:57 PM
> >> To: jfox at mcmaster.ca
> >> Cc: Berend Hasselman; r-sig-mac at r-project.org
> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>
> >>
> >> > On Mar 16, 2015, at 3:43 PM, John Fox <jfox at mcmaster.ca> wrote:
> >> >
> >> > Dear all,
> >> >
> >> > I've now implemented Simon's solution, setting the path in the .onLoad()
> >> function of the Rcmdr package and resetting it to its pre-existing value in
> >> .onUnload(). This seems to work fine for me and, I hope, will be a more
> >> robust solution.
> >> >
> >>
> >> I don't think messing with PATH of the R process is a good idea - as a user I'd
> >> be somewhat unpleasantly surprised if you changed the PATH of my running
> >> session. I'm not quite sure what's your intention, but I would suggest using
> >> the setting to locate the binary to run it explicitly - that is what R does
> >> normally. If you rely on some scripts that you don't control, then I would
> >> suggest setting it in the shell that you start the script with, but not in the R
> >> process itself.
> >
> > That occurred to me, but the problem arises when a function in the rmarkdown package calls pandoc and pandoc fails to run pdflatex. I don't think that I have control over this.
> >
> > I'm cc'ing J. J. Alaire, the maintainer of the rmarkdown package in case he sees a solution in that package. The problem doesn't of course occur when rmarkdown is run from RStudio (or a terminal) but only from R.app, as I explained initially.  (J.J.: Please let me know if this is unclear, and I can send you the rest of this thread.)
> >
> > OTOH, I doubt whether Rcmdr users will care that the package alters the PATH of the R process (though it would be better to avoid that).
> >
> > Best,
> >  John
> >
> >>
> >> Cheers,
> >> Simon
> >>
> >>
> >>
> >> > Thanks again to everyone for their help.
> >> >
> >> > John
> >> >
> >> >> -----Original Message-----
> >> >> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On Behalf Of
> >> >> John Fox
> >> >> Sent: March-16-15 2:45 PM
> >> >> To: 'Berend Hasselman'
> >> >> Cc: r-sig-mac at r-project.org
> >> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >> >>
> >> >> Dear Berend and Simon,
> >> >>
> >> >> I've now tried Berend's solution and it appears to work fine: If
> >> >> necessary, I add /usr/texbin to the path when the Rcmdr GUI starts up
> >> >> and restore the path to its previous state when it closes.
> >> >>
> >> >> I agree that Simon's solution will be more flexible since it should
> >> >> work if pdflatex is located elsewhere (as long as it's on the path
> >> >> reported by path_helper), and I'll give that a try as well.
> >> >>
> >> >> Thanks again for all the help,
> >> >> John
> >> >>
> >> >>> -----Original Message-----
> >> >>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
> >> >>> Sent: March-16-15 2:34 PM
> >> >>> To: jfox at mcmaster.ca
> >> >>> Cc: Simon Urbanek; r-sig-mac at r-project.org
> >> >>> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >> >>>
> >> >>> John,
> >> >>>
> >> >>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
> >> >>>>
> >> >>>> Dear Berend,
> >> >>>> 
.
> >> >>>>>
> >> >>>>> For what it?s worth: I have the following code in the .First
> >> >>>>> function in
> >> >>>>> ~/.Rprofile:
> >> >>>>> (R 3.1.3 on OS X Yosemite)
> >> >>>>>
> >> >>>>>   if( .Platform$GUI == "AQUA" ) {
> >> >>>>>       # this appends /usr/local/bin to what is already in PATH
> >> >>>>>       # by default this is already in PATH (at least in 10.6.8)
> >> >>>>>       # so remove any duplicated items
> >> >>>>>       z <- Sys.getenv("PATH")
> >> >>>>>       z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
> >> >>>>>       # add path to MacTeX executables for OS X Yosemite (which
> >> >>>>> has a
> >> >>> bug)
> >> >>>>>       # in Terminal it is added automatically
> >> >>>>>       z[length(z)+1] <- "/usr/texbin"
> >> >>>>>
> >> >>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep)
> >> >>> )
> >> >>>>>   }
> >> >>>>
> >> >>>> This should work fine if pdflatex is in /usr/texbin, which I now
> >> >>>> understand is
> >> >>> by far the most common case (and is the case on my Mac).
> >> >>>>
> >> >>>> Do you mind if I adapt your code for the Rcmdr? I can fix the path
> >> >>>> in this
> >> >>> manner at startup of the Rcmdr GUI and restore it to its initial
> >> >>> value on exit from the GUI.
> >> >>>>
> >> >>>
> >> >>> Go right ahead. Don?t forget it assumes MacTeX.
> >> >>>
> >> >>> But do also have a look Simon?s suggestion of using path_helper,
> >> >>> which seems more flexible than my solution:
> >> >>>
> >> >>> I tried this in R-GUI
> >> >>>
> >> >>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
> >> >>>
> >> >>> and got this answer
> >> >>>
> >> >>> [1]
> >> >>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/u
> >> >>> sr
> >> >>> /texbi
> >> >>> n\"; export PATH;?
> >> >>>
> >> >>> which will have to be fiddled with to get something that is usable.
> >> >>>
> >> >>> Berend
> >> >>>
> >> >>>
> >> >>>> Thanks for this,
> >> >>>> John
> >> >>>>
> >> >>>>>
> >> >>>>> Berend
> >> >>>>
> >> >>>>
> >> >>>> ---
> >> >>>> This email has been checked for viruses by Avast antivirus software.
> >> >>>> http://www.avast.com
> >> >>>>
> >> >>
> >> >>
> >> >> ---
> >> >> This email has been checked for viruses by Avast antivirus software.
> >> >>
> >> >> _______________________________________________
> >> >> R-SIG-Mac mailing list
> >> >> R-SIG-Mac at r-project.org
> >> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >> >
> >> >
> >> > ---
> >> > This email has been checked for viruses by Avast antivirus software.
> >> > http://www.avast.com
> >> >
> >
> >
> > ---
> > This email has been checked for viruses by Avast antivirus software.
> > http://www.avast.com
> >


From jfox at mcmaster.ca  Tue Mar 17 14:18:19 2015
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 17 Mar 2015 09:18:19 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <m2619z7upc.fsf@krugs.de>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<CABtg=Kkcz6Ux-cbisFgvvWai80F4NpUzKwaDtLY0Uiv4KWjZTw@mail.gmail.com>
	<m2619z7upc.fsf@krugs.de>
Message-ID: <web-552277373@cgpsrv2.cis.mcmaster.ca>

Dear Rainer,

Thanks for this. I already have a more general fix that followed from one of Simon Urbanek's posts yesterday. The sticking point now is having a CRAN package -- the Rcmdr -- mess with the PATH for the R process.

Best,
 John

On Tue, 17 Mar 2015 12:02:39 +0100
 Rainer M Krug <Rainer at krugs.de> wrote:
> G?bor Cs?rdi <csardi.gabor at gmail.com> writes:
> 
> > John,
> >
> > my guess is that on OSX, >95% of the users have https://tug.org/mactex/,
> > which seems to have pdflatex in /usr/texbin. If it is not there, then most
> > likely the user does not have pdflatex installed, and you can give a note
> > or warning about it.
> >
> > If you want to be sure, you can check other tex distributions for OSX, to
> > be honest I don't know any other. Based on
> > http://mactex-wiki.tug.org/wiki/index.php/Distribution_Matrix pretty much
> > MacTeX is the only player. Maybe people also install TeX with brew, so it
> > might be worth checking that, too.
> 
> Brew does not support LaTeX, as there is MacTex. But brew-cask does, but
> it installs the originally binary and also links the binaries to
> /usr/texbin/.
> 
> Cheers,
> 
> Rainer
> 
> >
> > Gabor
> >
> > On Mon, Mar 16, 2015 at 12:25 PM, John Fox <jfox at mcmaster.ca> wrote:
> >
> >> Dear Simon,
> >>
> >> Thanks for this, and to the others who responded to my question. The FAQ
> >> and Matt Denwood's response jogged my memory, and reminded me that I
> >> encountered this problem before.
> >>
> >> In this case, I don't see a good solution, but I'll think about the
> >> problem some more.
> >>
> >> Without providing too many tedious details, the development version of the
> >> Rcmdr package checks at startup what resources are available to it,
> >> including pdflatex, and configures itself accordingly. Having inexperienced
> >> users edit, e.g., their .Renviron files is probably a non-starter. The
> >> Rcmdr could offer to do this at the user's option (it already provides
> >> dialogs that guide the user to locations of missing software like LaTeX and
> >> pandoc), but I'd still have to be able to figure out whether pdflatex is
> >> available and if so where it's located.
> >>
> >> Ian Gow suggested using locate, but I apparently can't rely on a locate
> >> database having been compiled -- it wasn't on my Mac -- and the overhead of
> >> compiling the locate db is excessive for a start-up check.
> >>
> >> Again, thanks for explaining the problem.
> >>
> >> John
> >>
> >> > -----Original Message-----
> >> > From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> >> > Sent: March-16-15 10:39 AM
> >> > To: John Fox
> >> > Cc: Ian Gow; r-sig-mac at r-project.org
> >> > Subject: Re: [R-SIG-Mac] checking for pdflatex
> >> >
> >> > John,
> >> >
> >> > see R for Mac FAQ 10.13: I get ?command not found? in the GUI yet it
> >> works
> >> > in the Terminal ? why?
> >> >
> >> > Cheers,
> >> > Simon
> >> >
> >> >
> >> > > On Mar 15, 2015, at 6:21 PM, John Fox <jfox at mcmaster.ca> wrote:
> >> > >
> >> > > Dear Ian,
> >> > >
> >> > > Thanks for this. Please see below:
> >> > >
> >> > >> -----Original Message-----
> >> > >> From: Ian Gow [mailto:iandgow at gmail.com]
> >> > >> Sent: March-15-15 5:07 PM
> >> > >> To: John Fox
> >> > >> Cc: r-sig-mac at r-project.org
> >> > >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >> > >>
> >> > >> I think it's driven by the PATH variable, which appears to differ for
> >> > >> me between RStudio and R from Terminal on the one hand and R.app on
> >> > >> the other.
> >> > >
> >> > > Yes, I understand that, though I don't understand why there's a
> >> > > difference in the path.
> >> > >
> >> > >>
> >> > >>> Sys.getenv("PATH")
> >> > >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> >> > >>> Sys.which("pdflatex")
> >> > >> pdflatex
> >> > >>       ""
> >> > >>
> >> > >> If I add
> >> > >>
> >> > >> Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))
> >> > >>
> >> > >> to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).
> >> > >>
> >> > >>> Sys.which("pdflatex")
> >> > >>                  pdflatex
> >> > >> "/opt/local/bin/pdflatex"
> >> > >>> Sys.getenv("PATH")
> >> > >> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"
> >> > >
> >> > > The problem for me is to determine whether pdflatex is installed
> >> > > *without* knowing in advance where it's installed. I haven't described
> >> > > the purpose of this, and, in the interest of brevity, won't for the
> >> > > time-being, but it may also prove necessary to determine where pdflatex
> >> > resides.
> >> > >
> >> > > Best,
> >> > > John
> >> > >
> >> > >>
> >> > >>
> >> > >> On 15 Mar 2015, at 16:46, John Fox wrote:
> >> > >>
> >> > >>> Dear list members,
> >> > >>>
> >> > >>> I need to determine whether pdflatex is installed and have been
> >> > >>> doing that via Sys.which("pdflatex"). This works when R is run in a
> >> > >>> terminal window (or in RStudio):
> >> > >>>
> >> > >>>> Sys.which("pdflatex")
> >> > >>>           pdflatex
> >> > >>> "/usr/texbin/pdflatex"
> >> > >>>
> >> > >>> but not from R.app:
> >> > >>>
> >> > >>>> Sys.which("pdflatex")
> >> > >>> pdflatex
> >> > >>>   ""
> >> > >>>
> >> > >>> The session info is the same in both cases:
> >> > >>>
> >> > >>> -------------- snip ----------------
> >> > >>>
> >> > >>>> sessionInfo()
> >> > >>> R version 3.1.3 (2015-03-09)
> >> > >>> Platform: x86_64-apple-darwin13.4.0 (64-bit) Running under: OS X
> >> > >>> 10.10.2 (Yosemite)
> >> > >>>
> >> > >>> locale:
> >> > >>> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-
> >> > 8/en_CA.UTF-
> >> > >> 8
> >> > >>>
> >> > >>> attached base packages:
> >> > >>> [1] stats     graphics  grDevices utils     datasets  methods   base
> >> > >>>
> >> > >>> -------------- snip ----------------
> >> > >>>
> >> > >>> Why is the result different? Is there a better way to check for the
> >> > >>> presence of pdflatex?
> >> > >>>
> >> > >>> Any help would be appreciated.
> >> > >>>
> >> > >>> Thanks,
> >> > >>> John
> >> > >>>
> >> > >>> ------------------------------------------------
> >> > >>> John Fox, Professor
> >> > >>> McMaster University
> >> > >>> Hamilton, Ontario, Canada
> >> > >>> http://socserv.mcmaster.ca/jfox/
> >> > >>>
> >> > >>> _______________________________________________
> >> > >>> R-SIG-Mac mailing list
> >> > >>> R-SIG-Mac at r-project.org
> >> > >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >> > >
> >> > >
> >> > > ---
> >> > > This email has been checked for viruses by Avast antivirus software.
> >> > >
> >> > > _______________________________________________
> >> > > R-SIG-Mac mailing list
> >> > > R-SIG-Mac at r-project.org
> >> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >> > >
> >>
> >>
> >> ---
> >> This email has been checked for viruses by Avast antivirus software.
> >>
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >
> > 	[[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Rainer M. Krug
> email: Rainer<at>krugs<dot>de
> PGP: 0x0F52F982


From simon.urbanek at r-project.org  Tue Mar 17 15:34:03 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 17 Mar 2015 10:34:03 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
Message-ID: <F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>

JJ,

this is unrelated - this is about apps started via LS not using shell profiles. (The issue you refer to has been fixed long time ago on our end).

Cheers,
Simon



> On Mar 17, 2015, at 6:21 AM, JJ Allaire <jj at rstudio.com> wrote:
> 
> Sounds like this may be targeted at fixing the OS X Yosemite bug
> wherein some environment variables for GUI applications are
> duplicated:
> 
> http://tex.stackexchange.com/questions/208181/why-did-my-tex-related-gui-program-stop-working-in-mac-os-x-yosemite
> 
> Until Apple fixes this issue I think that GUI applications need to
> clean the duplicated environment variables received at launch time.
> Here's what we do in RStudio:
> 
> https://github.com/rstudio/rstudio/commit/09c9be12
> 
> 
> 
> 
> On Mon, Mar 16, 2015 at 9:12 PM, John Fox <jfox at mcmaster.ca> wrote:
>> Dear Simon,
>> 
>>> -----Original Message-----
>>> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
>>> Sent: March-16-15 3:57 PM
>>> To: jfox at mcmaster.ca
>>> Cc: Berend Hasselman; r-sig-mac at r-project.org
>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>> 
>>> 
>>>> On Mar 16, 2015, at 3:43 PM, John Fox <jfox at mcmaster.ca> wrote:
>>>> 
>>>> Dear all,
>>>> 
>>>> I've now implemented Simon's solution, setting the path in the .onLoad()
>>> function of the Rcmdr package and resetting it to its pre-existing value in
>>> .onUnload(). This seems to work fine for me and, I hope, will be a more
>>> robust solution.
>>>> 
>>> 
>>> I don't think messing with PATH of the R process is a good idea - as a user I'd
>>> be somewhat unpleasantly surprised if you changed the PATH of my running
>>> session. I'm not quite sure what's your intention, but I would suggest using
>>> the setting to locate the binary to run it explicitly - that is what R does
>>> normally. If you rely on some scripts that you don't control, then I would
>>> suggest setting it in the shell that you start the script with, but not in the R
>>> process itself.
>> 
>> That occurred to me, but the problem arises when a function in the rmarkdown package calls pandoc and pandoc fails to run pdflatex. I don't think that I have control over this.
>> 
>> I'm cc'ing J. J. Alaire, the maintainer of the rmarkdown package in case he sees a solution in that package. The problem doesn't of course occur when rmarkdown is run from RStudio (or a terminal) but only from R.app, as I explained initially.  (J.J.: Please let me know if this is unclear, and I can send you the rest of this thread.)
>> 
>> OTOH, I doubt whether Rcmdr users will care that the package alters the PATH of the R process (though it would be better to avoid that).
>> 
>> Best,
>> John
>> 
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>>> Thanks again to everyone for their help.
>>>> 
>>>> John
>>>> 
>>>>> -----Original Message-----
>>>>> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On Behalf Of
>>>>> John Fox
>>>>> Sent: March-16-15 2:45 PM
>>>>> To: 'Berend Hasselman'
>>>>> Cc: r-sig-mac at r-project.org
>>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>>>> 
>>>>> Dear Berend and Simon,
>>>>> 
>>>>> I've now tried Berend's solution and it appears to work fine: If
>>>>> necessary, I add /usr/texbin to the path when the Rcmdr GUI starts up
>>>>> and restore the path to its previous state when it closes.
>>>>> 
>>>>> I agree that Simon's solution will be more flexible since it should
>>>>> work if pdflatex is located elsewhere (as long as it's on the path
>>>>> reported by path_helper), and I'll give that a try as well.
>>>>> 
>>>>> Thanks again for all the help,
>>>>> John
>>>>> 
>>>>>> -----Original Message-----
>>>>>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
>>>>>> Sent: March-16-15 2:34 PM
>>>>>> To: jfox at mcmaster.ca
>>>>>> Cc: Simon Urbanek; r-sig-mac at r-project.org
>>>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>>>>> 
>>>>>> John,
>>>>>> 
>>>>>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
>>>>>>> 
>>>>>>> Dear Berend,
>>>>>>> ?.
>>>>>>>> 
>>>>>>>> For what it?s worth: I have the following code in the .First
>>>>>>>> function in
>>>>>>>> ~/.Rprofile:
>>>>>>>> (R 3.1.3 on OS X Yosemite)
>>>>>>>> 
>>>>>>>>  if( .Platform$GUI == "AQUA" ) {
>>>>>>>>      # this appends /usr/local/bin to what is already in PATH
>>>>>>>>      # by default this is already in PATH (at least in 10.6.8)
>>>>>>>>      # so remove any duplicated items
>>>>>>>>      z <- Sys.getenv("PATH")
>>>>>>>>      z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
>>>>>>>>      # add path to MacTeX executables for OS X Yosemite (which
>>>>>>>> has a
>>>>>> bug)
>>>>>>>>      # in Terminal it is added automatically
>>>>>>>>      z[length(z)+1] <- "/usr/texbin"
>>>>>>>> 
>>>>>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep)
>>>>>> )
>>>>>>>>  }
>>>>>>> 
>>>>>>> This should work fine if pdflatex is in /usr/texbin, which I now
>>>>>>> understand is
>>>>>> by far the most common case (and is the case on my Mac).
>>>>>>> 
>>>>>>> Do you mind if I adapt your code for the Rcmdr? I can fix the path
>>>>>>> in this
>>>>>> manner at startup of the Rcmdr GUI and restore it to its initial
>>>>>> value on exit from the GUI.
>>>>>>> 
>>>>>> 
>>>>>> Go right ahead. Don?t forget it assumes MacTeX.
>>>>>> 
>>>>>> But do also have a look Simon?s suggestion of using path_helper,
>>>>>> which seems more flexible than my solution:
>>>>>> 
>>>>>> I tried this in R-GUI
>>>>>> 
>>>>>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
>>>>>> 
>>>>>> and got this answer
>>>>>> 
>>>>>> [1]
>>>>>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/u
>>>>>> sr
>>>>>> /texbi
>>>>>> n\"; export PATH;?
>>>>>> 
>>>>>> which will have to be fiddled with to get something that is usable.
>>>>>> 
>>>>>> Berend
>>>>>> 
>>>>>> 
>>>>>>> Thanks for this,
>>>>>>> John
>>>>>>> 
>>>>>>>> 
>>>>>>>> Berend
>>>>>>> 
>>>>>>> 
>>>>>>> ---
>>>>>>> This email has been checked for viruses by Avast antivirus software.
>>>>>>> http://www.avast.com
>>>>>>> 
>>>>> 
>>>>> 
>>>>> ---
>>>>> This email has been checked for viruses by Avast antivirus software.
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>>> ---
>>>> This email has been checked for viruses by Avast antivirus software.
>>>> http://www.avast.com
>>>> 
>> 
>> 
>> ---
>> This email has been checked for viruses by Avast antivirus software.
>> http://www.avast.com
>> 
> 


From jfox at mcmaster.ca  Tue Mar 17 15:41:54 2015
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 17 Mar 2015 10:41:54 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
	<F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>
Message-ID: <001001d060c0$83b6b180$8b241480$@mcmaster.ca>

Dear Simon,

Sorry to prolong this, but I have two additional questions:

(1) Is there a reason that R.app uses a different default PATH than R in a terminal window does? That is, why not make them the same? I suspect that there's a consideration that I'm not aware of.

(2) Would it still be objectionable if I reverted to the previous solution of having the Rcmdr package add "/usr/texbin" to the current PATH if it's not already present rather than replacing the PATH? Though that wouldn't be as bullet-proof, it would cover the large majority of cases,  and wouldn't potentially surprise a user by removing a directory from the PATH.

Thanks,
 John

> -----Original Message-----
> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> Sent: March-17-15 10:34 AM
> To: JJ Allaire
> Cc: jfox at mcmaster.ca; Berend Hasselman; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> JJ,
> 
> this is unrelated - this is about apps started via LS not using shell profiles. (The
> issue you refer to has been fixed long time ago on our end).
> 
> Cheers,
> Simon
> 
> 
> 
> > On Mar 17, 2015, at 6:21 AM, JJ Allaire <jj at rstudio.com> wrote:
> >
> > Sounds like this may be targeted at fixing the OS X Yosemite bug
> > wherein some environment variables for GUI applications are
> > duplicated:
> >
> > http://tex.stackexchange.com/questions/208181/why-did-my-tex-related-
> g
> > ui-program-stop-working-in-mac-os-x-yosemite
> >
> > Until Apple fixes this issue I think that GUI applications need to
> > clean the duplicated environment variables received at launch time.
> > Here's what we do in RStudio:
> >
> > https://github.com/rstudio/rstudio/commit/09c9be12
> >
> >
> >
> >
> > On Mon, Mar 16, 2015 at 9:12 PM, John Fox <jfox at mcmaster.ca> wrote:
> >> Dear Simon,
> >>
> >>> -----Original Message-----
> >>> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> >>> Sent: March-16-15 3:57 PM
> >>> To: jfox at mcmaster.ca
> >>> Cc: Berend Hasselman; r-sig-mac at r-project.org
> >>> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>>
> >>>
> >>>> On Mar 16, 2015, at 3:43 PM, John Fox <jfox at mcmaster.ca> wrote:
> >>>>
> >>>> Dear all,
> >>>>
> >>>> I've now implemented Simon's solution, setting the path in the
> >>>> .onLoad()
> >>> function of the Rcmdr package and resetting it to its pre-existing
> >>> value in .onUnload(). This seems to work fine for me and, I hope,
> >>> will be a more robust solution.
> >>>>
> >>>
> >>> I don't think messing with PATH of the R process is a good idea - as
> >>> a user I'd be somewhat unpleasantly surprised if you changed the
> >>> PATH of my running session. I'm not quite sure what's your
> >>> intention, but I would suggest using the setting to locate the
> >>> binary to run it explicitly - that is what R does normally. If you
> >>> rely on some scripts that you don't control, then I would suggest
> >>> setting it in the shell that you start the script with, but not in the R
> process itself.
> >>
> >> That occurred to me, but the problem arises when a function in the
> rmarkdown package calls pandoc and pandoc fails to run pdflatex. I don't
> think that I have control over this.
> >>
> >> I'm cc'ing J. J. Alaire, the maintainer of the rmarkdown package in
> >> case he sees a solution in that package. The problem doesn't of
> >> course occur when rmarkdown is run from RStudio (or a terminal) but
> >> only from R.app, as I explained initially.  (J.J.: Please let me know
> >> if this is unclear, and I can send you the rest of this thread.)
> >>
> >> OTOH, I doubt whether Rcmdr users will care that the package alters the
> PATH of the R process (though it would be better to avoid that).
> >>
> >> Best,
> >> John
> >>
> >>>
> >>> Cheers,
> >>> Simon
> >>>
> >>>
> >>>
> >>>> Thanks again to everyone for their help.
> >>>>
> >>>> John
> >>>>
> >>>>> -----Original Message-----
> >>>>> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On Behalf
> >>>>> Of John Fox
> >>>>> Sent: March-16-15 2:45 PM
> >>>>> To: 'Berend Hasselman'
> >>>>> Cc: r-sig-mac at r-project.org
> >>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>>>>
> >>>>> Dear Berend and Simon,
> >>>>>
> >>>>> I've now tried Berend's solution and it appears to work fine: If
> >>>>> necessary, I add /usr/texbin to the path when the Rcmdr GUI starts
> >>>>> up and restore the path to its previous state when it closes.
> >>>>>
> >>>>> I agree that Simon's solution will be more flexible since it
> >>>>> should work if pdflatex is located elsewhere (as long as it's on
> >>>>> the path reported by path_helper), and I'll give that a try as well.
> >>>>>
> >>>>> Thanks again for all the help,
> >>>>> John
> >>>>>
> >>>>>> -----Original Message-----
> >>>>>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
> >>>>>> Sent: March-16-15 2:34 PM
> >>>>>> To: jfox at mcmaster.ca
> >>>>>> Cc: Simon Urbanek; r-sig-mac at r-project.org
> >>>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>>>>>
> >>>>>> John,
> >>>>>>
> >>>>>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
> >>>>>>>
> >>>>>>> Dear Berend,
> >>>>>>> ?.
> >>>>>>>>
> >>>>>>>> For what it?s worth: I have the following code in the .First
> >>>>>>>> function in
> >>>>>>>> ~/.Rprofile:
> >>>>>>>> (R 3.1.3 on OS X Yosemite)
> >>>>>>>>
> >>>>>>>>  if( .Platform$GUI == "AQUA" ) {
> >>>>>>>>      # this appends /usr/local/bin to what is already in PATH
> >>>>>>>>      # by default this is already in PATH (at least in 10.6.8)
> >>>>>>>>      # so remove any duplicated items
> >>>>>>>>      z <- Sys.getenv("PATH")
> >>>>>>>>      z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
> >>>>>>>>      # add path to MacTeX executables for OS X Yosemite (which
> >>>>>>>> has a
> >>>>>> bug)
> >>>>>>>>      # in Terminal it is added automatically
> >>>>>>>>      z[length(z)+1] <- "/usr/texbin"
> >>>>>>>>
> >>>>>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.s
> >>>>>> ep)
> >>>>>> )
> >>>>>>>>  }
> >>>>>>>
> >>>>>>> This should work fine if pdflatex is in /usr/texbin, which I now
> >>>>>>> understand is
> >>>>>> by far the most common case (and is the case on my Mac).
> >>>>>>>
> >>>>>>> Do you mind if I adapt your code for the Rcmdr? I can fix the
> >>>>>>> path in this
> >>>>>> manner at startup of the Rcmdr GUI and restore it to its initial
> >>>>>> value on exit from the GUI.
> >>>>>>>
> >>>>>>
> >>>>>> Go right ahead. Don?t forget it assumes MacTeX.
> >>>>>>
> >>>>>> But do also have a look Simon?s suggestion of using path_helper,
> >>>>>> which seems more flexible than my solution:
> >>>>>>
> >>>>>> I tried this in R-GUI
> >>>>>>
> >>>>>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
> >>>>>>
> >>>>>> and got this answer
> >>>>>>
> >>>>>> [1]
> >>>>>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin
> >>>>>> :/u
> >>>>>> sr
> >>>>>> /texbi
> >>>>>> n\"; export PATH;?
> >>>>>>
> >>>>>> which will have to be fiddled with to get something that is usable.
> >>>>>>
> >>>>>> Berend
> >>>>>>
> >>>>>>
> >>>>>>> Thanks for this,
> >>>>>>> John
> >>>>>>>
> >>>>>>>>
> >>>>>>>> Berend
> >>>>>>>
> >>>>>>>
> >>>>>>> ---
> >>>>>>> This email has been checked for viruses by Avast antivirus
> software.
> >>>>>>> http://www.avast.com
> >>>>>>>
> >>>>>
> >>>>>
> >>>>> ---
> >>>>> This email has been checked for viruses by Avast antivirus software.
> >>>>>
> >>>>> _______________________________________________
> >>>>> R-SIG-Mac mailing list
> >>>>> R-SIG-Mac at r-project.org
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>
> >>>>
> >>>> ---
> >>>> This email has been checked for viruses by Avast antivirus software.
> >>>> http://www.avast.com
> >>>>
> >>
> >>
> >> ---
> >> This email has been checked for viruses by Avast antivirus software.
> >> http://www.avast.com
> >>
> >


---
This email has been checked for viruses by Avast antivirus software.


From simon.urbanek at r-project.org  Tue Mar 17 15:47:57 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 17 Mar 2015 10:47:57 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001001d060c0$83b6b180$8b241480$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
	<F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>
	<001001d060c0$83b6b180$8b241480$@mcmaster.ca>
Message-ID: <88172F93-EC5C-4C87-87B1-FD5116057EFD@r-project.org>


> On Mar 17, 2015, at 10:41 AM, John Fox <jfox at mcmaster.ca> wrote:
> 
> Dear Simon,
> 
> Sorry to prolong this, but I have two additional questions:
> 
> (1) Is there a reason that R.app uses a different default PATH than R in a terminal window does? That is, why not make them the same? I suspect that there's a consideration that I'm not aware of.
> 

See the FAQ I was pointing to.


> (2) Would it still be objectionable if I reverted to the previous solution of having the Rcmdr package add "/usr/texbin" to the current PATH if it's not already present rather than replacing the PATH? Though that wouldn't be as bullet-proof, it would cover the large majority of cases,  and wouldn't potentially surprise a user by removing a directory from the PATH.
> 

I guess that would be less disruptive. If the user has picked a custom order at least it would be preserved. But as noted earlier I also think that this should be better fixed in rmarkdown - preferably by using the full path so it doesn't depend on PATH. I'm told RStudio is providing pandoc binaries so I would guess it's easy for them to guarantee the functionality but JJ is included so he can weigh in.

Cheers,
Simon



> Thanks,
> John
> 
>> -----Original Message-----
>> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
>> Sent: March-17-15 10:34 AM
>> To: JJ Allaire
>> Cc: jfox at mcmaster.ca; Berend Hasselman; r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> 
>> JJ,
>> 
>> this is unrelated - this is about apps started via LS not using shell profiles. (The
>> issue you refer to has been fixed long time ago on our end).
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>> On Mar 17, 2015, at 6:21 AM, JJ Allaire <jj at rstudio.com> wrote:
>>> 
>>> Sounds like this may be targeted at fixing the OS X Yosemite bug
>>> wherein some environment variables for GUI applications are
>>> duplicated:
>>> 
>>> http://tex.stackexchange.com/questions/208181/why-did-my-tex-related-
>> g
>>> ui-program-stop-working-in-mac-os-x-yosemite
>>> 
>>> Until Apple fixes this issue I think that GUI applications need to
>>> clean the duplicated environment variables received at launch time.
>>> Here's what we do in RStudio:
>>> 
>>> https://github.com/rstudio/rstudio/commit/09c9be12
>>> 
>>> 
>>> 
>>> 
>>> On Mon, Mar 16, 2015 at 9:12 PM, John Fox <jfox at mcmaster.ca> wrote:
>>>> Dear Simon,
>>>> 
>>>>> -----Original Message-----
>>>>> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
>>>>> Sent: March-16-15 3:57 PM
>>>>> To: jfox at mcmaster.ca
>>>>> Cc: Berend Hasselman; r-sig-mac at r-project.org
>>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>>>> 
>>>>> 
>>>>>> On Mar 16, 2015, at 3:43 PM, John Fox <jfox at mcmaster.ca> wrote:
>>>>>> 
>>>>>> Dear all,
>>>>>> 
>>>>>> I've now implemented Simon's solution, setting the path in the
>>>>>> .onLoad()
>>>>> function of the Rcmdr package and resetting it to its pre-existing
>>>>> value in .onUnload(). This seems to work fine for me and, I hope,
>>>>> will be a more robust solution.
>>>>>> 
>>>>> 
>>>>> I don't think messing with PATH of the R process is a good idea - as
>>>>> a user I'd be somewhat unpleasantly surprised if you changed the
>>>>> PATH of my running session. I'm not quite sure what's your
>>>>> intention, but I would suggest using the setting to locate the
>>>>> binary to run it explicitly - that is what R does normally. If you
>>>>> rely on some scripts that you don't control, then I would suggest
>>>>> setting it in the shell that you start the script with, but not in the R
>> process itself.
>>>> 
>>>> That occurred to me, but the problem arises when a function in the
>> rmarkdown package calls pandoc and pandoc fails to run pdflatex. I don't
>> think that I have control over this.
>>>> 
>>>> I'm cc'ing J. J. Alaire, the maintainer of the rmarkdown package in
>>>> case he sees a solution in that package. The problem doesn't of
>>>> course occur when rmarkdown is run from RStudio (or a terminal) but
>>>> only from R.app, as I explained initially.  (J.J.: Please let me know
>>>> if this is unclear, and I can send you the rest of this thread.)
>>>> 
>>>> OTOH, I doubt whether Rcmdr users will care that the package alters the
>> PATH of the R process (though it would be better to avoid that).
>>>> 
>>>> Best,
>>>> John
>>>> 
>>>>> 
>>>>> Cheers,
>>>>> Simon
>>>>> 
>>>>> 
>>>>> 
>>>>>> Thanks again to everyone for their help.
>>>>>> 
>>>>>> John
>>>>>> 
>>>>>>> -----Original Message-----
>>>>>>> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On Behalf
>>>>>>> Of John Fox
>>>>>>> Sent: March-16-15 2:45 PM
>>>>>>> To: 'Berend Hasselman'
>>>>>>> Cc: r-sig-mac at r-project.org
>>>>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>>>>>> 
>>>>>>> Dear Berend and Simon,
>>>>>>> 
>>>>>>> I've now tried Berend's solution and it appears to work fine: If
>>>>>>> necessary, I add /usr/texbin to the path when the Rcmdr GUI starts
>>>>>>> up and restore the path to its previous state when it closes.
>>>>>>> 
>>>>>>> I agree that Simon's solution will be more flexible since it
>>>>>>> should work if pdflatex is located elsewhere (as long as it's on
>>>>>>> the path reported by path_helper), and I'll give that a try as well.
>>>>>>> 
>>>>>>> Thanks again for all the help,
>>>>>>> John
>>>>>>> 
>>>>>>>> -----Original Message-----
>>>>>>>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
>>>>>>>> Sent: March-16-15 2:34 PM
>>>>>>>> To: jfox at mcmaster.ca
>>>>>>>> Cc: Simon Urbanek; r-sig-mac at r-project.org
>>>>>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>>>>>>> 
>>>>>>>> John,
>>>>>>>> 
>>>>>>>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
>>>>>>>>> 
>>>>>>>>> Dear Berend,
>>>>>>>>> ?.
>>>>>>>>>> 
>>>>>>>>>> For what it?s worth: I have the following code in the .First
>>>>>>>>>> function in
>>>>>>>>>> ~/.Rprofile:
>>>>>>>>>> (R 3.1.3 on OS X Yosemite)
>>>>>>>>>> 
>>>>>>>>>> if( .Platform$GUI == "AQUA" ) {
>>>>>>>>>>     # this appends /usr/local/bin to what is already in PATH
>>>>>>>>>>     # by default this is already in PATH (at least in 10.6.8)
>>>>>>>>>>     # so remove any duplicated items
>>>>>>>>>>     z <- Sys.getenv("PATH")
>>>>>>>>>>     z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
>>>>>>>>>>     # add path to MacTeX executables for OS X Yosemite (which
>>>>>>>>>> has a
>>>>>>>> bug)
>>>>>>>>>>     # in Terminal it is added automatically
>>>>>>>>>>     z[length(z)+1] <- "/usr/texbin"
>>>>>>>>>> 
>>>>>>>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.s
>>>>>>>> ep)
>>>>>>>> )
>>>>>>>>>> }
>>>>>>>>> 
>>>>>>>>> This should work fine if pdflatex is in /usr/texbin, which I now
>>>>>>>>> understand is
>>>>>>>> by far the most common case (and is the case on my Mac).
>>>>>>>>> 
>>>>>>>>> Do you mind if I adapt your code for the Rcmdr? I can fix the
>>>>>>>>> path in this
>>>>>>>> manner at startup of the Rcmdr GUI and restore it to its initial
>>>>>>>> value on exit from the GUI.
>>>>>>>>> 
>>>>>>>> 
>>>>>>>> Go right ahead. Don?t forget it assumes MacTeX.
>>>>>>>> 
>>>>>>>> But do also have a look Simon?s suggestion of using path_helper,
>>>>>>>> which seems more flexible than my solution:
>>>>>>>> 
>>>>>>>> I tried this in R-GUI
>>>>>>>> 
>>>>>>>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
>>>>>>>> 
>>>>>>>> and got this answer
>>>>>>>> 
>>>>>>>> [1]
>>>>>>>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin
>>>>>>>> :/u
>>>>>>>> sr
>>>>>>>> /texbi
>>>>>>>> n\"; export PATH;?
>>>>>>>> 
>>>>>>>> which will have to be fiddled with to get something that is usable.
>>>>>>>> 
>>>>>>>> Berend
>>>>>>>> 
>>>>>>>> 
>>>>>>>>> Thanks for this,
>>>>>>>>> John
>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> Berend
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> ---
>>>>>>>>> This email has been checked for viruses by Avast antivirus
>> software.
>>>>>>>>> http://www.avast.com
>>>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> ---
>>>>>>> This email has been checked for viruses by Avast antivirus software.
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>>> 
>>>>>> ---
>>>>>> This email has been checked for viruses by Avast antivirus software.
>>>>>> http://www.avast.com
>>>>>> 
>>>> 
>>>> 
>>>> ---
>>>> This email has been checked for viruses by Avast antivirus software.
>>>> http://www.avast.com
>>>> 
>>> 
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> http://www.avast.com
> 


From jfox at mcmaster.ca  Tue Mar 17 16:24:14 2015
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 17 Mar 2015 11:24:14 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <88172F93-EC5C-4C87-87B1-FD5116057EFD@r-project.org>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
	<F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>
	<001001d060c0$83b6b180$8b241480$@mcmaster.ca>
	<88172F93-EC5C-4C87-87B1-FD5116057EFD@r-project.org>
Message-ID: <001801d060c6$6e1efca0$4a5cf5e0$@mcmaster.ca>

Dear Simon,

> -----Original Message-----
> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> Sent: March-17-15 10:48 AM
> To: jfox at mcmaster.ca
> Cc: JJ Allaire; Berend Hasselman; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> 
> > On Mar 17, 2015, at 10:41 AM, John Fox <jfox at mcmaster.ca> wrote:
> >
> > Dear Simon,
> >
> > Sorry to prolong this, but I have two additional questions:
> >
> > (1) Is there a reason that R.app uses a different default PATH than R in a
> terminal window does? That is, why not make them the same? I suspect that
> there's a consideration that I'm not aware of.
> >
> 
> See the FAQ I was pointing to.

Yes, I did read that, but it's really more an explanation of *what* happens rather than *why* R.app doesn't circumvent this behaviour, and the Apple technical Q&A linked to is labelled "Retired Document." 

> 
> 
> > (2) Would it still be objectionable if I reverted to the previous solution of
> having the Rcmdr package add "/usr/texbin" to the current PATH if it's not
> already present rather than replacing the PATH? Though that wouldn't be as
> bullet-proof, it would cover the large majority of cases,  and wouldn't
> potentially surprise a user by removing a directory from the PATH.
> >
> 
> I guess that would be less disruptive. If the user has picked a custom order at
> least it would be preserved. But as noted earlier I also think that this should
> be better fixed in rmarkdown - preferably by using the full path so it doesn't
> depend on PATH. I'm told RStudio is providing pandoc binaries so I would
> guess it's easy for them to guarantee the functionality but JJ is included so he
> can weigh in.

Yes, and RStudio also uses a PATH that includes pdflatex. But rmarkdown is intended to work outside of RStudio too and won't under R.app if pdflatex isn't on the PATH.

No need to respond further.

Thanks again for your time.

John

> 
> Cheers,
> Simon
> 
> 
> 
> > Thanks,
> > John
> >
> >> -----Original Message-----
> >> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> >> Sent: March-17-15 10:34 AM
> >> To: JJ Allaire
> >> Cc: jfox at mcmaster.ca; Berend Hasselman; r-sig-mac at r-project.org
> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>
> >> JJ,
> >>
> >> this is unrelated - this is about apps started via LS not using shell
> >> profiles. (The issue you refer to has been fixed long time ago on our end).
> >>
> >> Cheers,
> >> Simon
> >>
> >>
> >>
> >>> On Mar 17, 2015, at 6:21 AM, JJ Allaire <jj at rstudio.com> wrote:
> >>>
> >>> Sounds like this may be targeted at fixing the OS X Yosemite bug
> >>> wherein some environment variables for GUI applications are
> >>> duplicated:
> >>>
> >>> http://tex.stackexchange.com/questions/208181/why-did-my-tex-
> related
> >>> -
> >> g
> >>> ui-program-stop-working-in-mac-os-x-yosemite
> >>>
> >>> Until Apple fixes this issue I think that GUI applications need to
> >>> clean the duplicated environment variables received at launch time.
> >>> Here's what we do in RStudio:
> >>>
> >>> https://github.com/rstudio/rstudio/commit/09c9be12
> >>>
> >>>
> >>>
> >>>
> >>> On Mon, Mar 16, 2015 at 9:12 PM, John Fox <jfox at mcmaster.ca> wrote:
> >>>> Dear Simon,
> >>>>
> >>>>> -----Original Message-----
> >>>>> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> >>>>> Sent: March-16-15 3:57 PM
> >>>>> To: jfox at mcmaster.ca
> >>>>> Cc: Berend Hasselman; r-sig-mac at r-project.org
> >>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>>>>
> >>>>>
> >>>>>> On Mar 16, 2015, at 3:43 PM, John Fox <jfox at mcmaster.ca> wrote:
> >>>>>>
> >>>>>> Dear all,
> >>>>>>
> >>>>>> I've now implemented Simon's solution, setting the path in the
> >>>>>> .onLoad()
> >>>>> function of the Rcmdr package and resetting it to its pre-existing
> >>>>> value in .onUnload(). This seems to work fine for me and, I hope,
> >>>>> will be a more robust solution.
> >>>>>>
> >>>>>
> >>>>> I don't think messing with PATH of the R process is a good idea -
> >>>>> as a user I'd be somewhat unpleasantly surprised if you changed
> >>>>> the PATH of my running session. I'm not quite sure what's your
> >>>>> intention, but I would suggest using the setting to locate the
> >>>>> binary to run it explicitly - that is what R does normally. If you
> >>>>> rely on some scripts that you don't control, then I would suggest
> >>>>> setting it in the shell that you start the script with, but not in
> >>>>> the R
> >> process itself.
> >>>>
> >>>> That occurred to me, but the problem arises when a function in the
> >> rmarkdown package calls pandoc and pandoc fails to run pdflatex. I
> >> don't think that I have control over this.
> >>>>
> >>>> I'm cc'ing J. J. Alaire, the maintainer of the rmarkdown package in
> >>>> case he sees a solution in that package. The problem doesn't of
> >>>> course occur when rmarkdown is run from RStudio (or a terminal) but
> >>>> only from R.app, as I explained initially.  (J.J.: Please let me
> >>>> know if this is unclear, and I can send you the rest of this
> >>>> thread.)
> >>>>
> >>>> OTOH, I doubt whether Rcmdr users will care that the package alters
> >>>> the
> >> PATH of the R process (though it would be better to avoid that).
> >>>>
> >>>> Best,
> >>>> John
> >>>>
> >>>>>
> >>>>> Cheers,
> >>>>> Simon
> >>>>>
> >>>>>
> >>>>>
> >>>>>> Thanks again to everyone for their help.
> >>>>>>
> >>>>>> John
> >>>>>>
> >>>>>>> -----Original Message-----
> >>>>>>> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On
> >>>>>>> Behalf Of John Fox
> >>>>>>> Sent: March-16-15 2:45 PM
> >>>>>>> To: 'Berend Hasselman'
> >>>>>>> Cc: r-sig-mac at r-project.org
> >>>>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>>>>>>
> >>>>>>> Dear Berend and Simon,
> >>>>>>>
> >>>>>>> I've now tried Berend's solution and it appears to work fine: If
> >>>>>>> necessary, I add /usr/texbin to the path when the Rcmdr GUI
> >>>>>>> starts up and restore the path to its previous state when it closes.
> >>>>>>>
> >>>>>>> I agree that Simon's solution will be more flexible since it
> >>>>>>> should work if pdflatex is located elsewhere (as long as it's on
> >>>>>>> the path reported by path_helper), and I'll give that a try as well.
> >>>>>>>
> >>>>>>> Thanks again for all the help,
> >>>>>>> John
> >>>>>>>
> >>>>>>>> -----Original Message-----
> >>>>>>>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
> >>>>>>>> Sent: March-16-15 2:34 PM
> >>>>>>>> To: jfox at mcmaster.ca
> >>>>>>>> Cc: Simon Urbanek; r-sig-mac at r-project.org
> >>>>>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>>>>>>>
> >>>>>>>> John,
> >>>>>>>>
> >>>>>>>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
> >>>>>>>>>
> >>>>>>>>> Dear Berend,
> >>>>>>>>> ?.
> >>>>>>>>>>
> >>>>>>>>>> For what it?s worth: I have the following code in the .First
> >>>>>>>>>> function in
> >>>>>>>>>> ~/.Rprofile:
> >>>>>>>>>> (R 3.1.3 on OS X Yosemite)
> >>>>>>>>>>
> >>>>>>>>>> if( .Platform$GUI == "AQUA" ) {
> >>>>>>>>>>     # this appends /usr/local/bin to what is already in PATH
> >>>>>>>>>>     # by default this is already in PATH (at least in 10.6.8)
> >>>>>>>>>>     # so remove any duplicated items
> >>>>>>>>>>     z <- Sys.getenv("PATH")
> >>>>>>>>>>     z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
> >>>>>>>>>>     # add path to MacTeX executables for OS X Yosemite (which
> >>>>>>>>>> has a
> >>>>>>>> bug)
> >>>>>>>>>>     # in Terminal it is added automatically
> >>>>>>>>>>     z[length(z)+1] <- "/usr/texbin"
> >>>>>>>>>>
> >>>>>>>>
> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path
> >>>>>>>> .s
> >>>>>>>> ep)
> >>>>>>>> )
> >>>>>>>>>> }
> >>>>>>>>>
> >>>>>>>>> This should work fine if pdflatex is in /usr/texbin, which I
> >>>>>>>>> now understand is
> >>>>>>>> by far the most common case (and is the case on my Mac).
> >>>>>>>>>
> >>>>>>>>> Do you mind if I adapt your code for the Rcmdr? I can fix the
> >>>>>>>>> path in this
> >>>>>>>> manner at startup of the Rcmdr GUI and restore it to its
> >>>>>>>> initial value on exit from the GUI.
> >>>>>>>>>
> >>>>>>>>
> >>>>>>>> Go right ahead. Don?t forget it assumes MacTeX.
> >>>>>>>>
> >>>>>>>> But do also have a look Simon?s suggestion of using
> >>>>>>>> path_helper, which seems more flexible than my solution:
> >>>>>>>>
> >>>>>>>> I tried this in R-GUI
> >>>>>>>>
> >>>>>>>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
> >>>>>>>>
> >>>>>>>> and got this answer
> >>>>>>>>
> >>>>>>>> [1]
> >>>>>>>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/b
> >>>>>>>> in
> >>>>>>>> :/u
> >>>>>>>> sr
> >>>>>>>> /texbi
> >>>>>>>> n\"; export PATH;?
> >>>>>>>>
> >>>>>>>> which will have to be fiddled with to get something that is usable.
> >>>>>>>>
> >>>>>>>> Berend
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>> Thanks for this,
> >>>>>>>>> John
> >>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>> Berend
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> ---
> >>>>>>>>> This email has been checked for viruses by Avast antivirus
> >> software.
> >>>>>>>>> http://www.avast.com
> >>>>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>> ---
> >>>>>>> This email has been checked for viruses by Avast antivirus
> software.
> >>>>>>>
> >>>>>>> _______________________________________________
> >>>>>>> R-SIG-Mac mailing list
> >>>>>>> R-SIG-Mac at r-project.org
> >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>>>
> >>>>>>
> >>>>>> ---
> >>>>>> This email has been checked for viruses by Avast antivirus software.
> >>>>>> http://www.avast.com
> >>>>>>
> >>>>
> >>>>
> >>>> ---
> >>>> This email has been checked for viruses by Avast antivirus software.
> >>>> http://www.avast.com
> >>>>
> >>>
> >
> >
> > ---
> > This email has been checked for viruses by Avast antivirus software.
> > http://www.avast.com
> >


---
This email has been checked for viruses by Avast antivirus software.


From jfox at mcmaster.ca  Tue Mar 17 16:29:38 2015
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 17 Mar 2015 11:29:38 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <5507353F.7010502@stats.ox.ac.uk>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>	<002901d06012$17baa490$472fedb0$@mcmaster.ca>	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<5507353F.7010502@stats.ox.ac.uk>
Message-ID: <001901d060c7$2ee25e50$8ca71af0$@mcmaster.ca>

Dear Brian,

Would it be acceptable to CRAN for the Rcmdr package to add /user/texbin to the end of the PATH of the R process is it's not already there, restoring the PATH to its previous state when the Commander() function exits, closing the Rcmdr GUI?

That seems innocuous to me. I could add a dialog that asks the user's permission unless an Rcmdr option for this behaviour is set, though for most users that would mean that the dialog would appear every time the Rcmdr is started.

Thanks,
 John

> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: March-16-15 3:56 PM
> To: jfox at mcmaster.ca; 'Berend Hasselman'
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> Note that it not just MacTex which uses /usr/texbin.  /usr/texbin is a link to
> /Library/TeX/Distributions/Programs/texbin which is an /etc/alternatives
> scheme to manage multiple TeX distributions which used (prior to Yosemite,
> at least) to be controlled by a Systems Preferences widget.  See
> https://tug.org/mactex/multipletexdistributions.html .
> 
> That does not apply to e.g. Fink or MacPorts distributions of TeX, but people
> using those are not likely to be using R.app.
> 
> /usr/libexec/path_helper is not the whole story either: it reads system
> versions of PATH which might not apply to a user's shell: it does not get my
> settings completely correct (in particular it has /usr/texbin too far down the
> PATH and I had moved it because the system path found the wrong
> 'makeindex').
> 
> 
> On 16/03/2015 18:44, John Fox wrote:
> > Dear Berend and Simon,
> >
> > I've now tried Berend's solution and it appears to work fine: If necessary, I
> add /usr/texbin to the path when the Rcmdr GUI starts up and restore the
> path to its previous state when it closes.
> >
> > I agree that Simon's solution will be more flexible since it should work if
> pdflatex is located elsewhere (as long as it's on the path reported by
> path_helper), and I'll give that a try as well.
> >
> > Thanks again for all the help,
> >   John
> >
> >> -----Original Message-----
> >> From: Berend Hasselman [mailto:bhh at xs4all.nl]
> >> Sent: March-16-15 2:34 PM
> >> To: jfox at mcmaster.ca
> >> Cc: Simon Urbanek; r-sig-mac at r-project.org
> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
> >>
> >> John,
> >>
> >>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
> >>>
> >>> Dear Berend,
> >>> ?.
> >>>>
> >>>> For what it?s worth: I have the following code in the .First
> >>>> function in
> >>>> ~/.Rprofile:
> >>>> (R 3.1.3 on OS X Yosemite)
> >>>>
> >>>>     if( .Platform$GUI == "AQUA" ) {
> >>>>         # this appends /usr/local/bin to what is already in PATH
> >>>>         # by default this is already in PATH (at least in 10.6.8)
> >>>>         # so remove any duplicated items
> >>>>         z <- Sys.getenv("PATH")
> >>>>         z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
> >>>>         # add path to MacTeX executables for OS X Yosemite (which
> >>>> has a
> >> bug)
> >>>>         # in Terminal it is added automatically
> >>>>         z[length(z)+1] <- "/usr/texbin"
> >>>>
> >> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
> >>>>     }
> >>>
> >>> This should work fine if pdflatex is in /usr/texbin, which I now
> >>> understand is
> >> by far the most common case (and is the case on my Mac).
> >>>
> >>> Do you mind if I adapt your code for the Rcmdr? I can fix the path
> >>> in this
> >> manner at startup of the Rcmdr GUI and restore it to its initial
> >> value on exit from the GUI.
> >>>
> >>
> >> Go right ahead. Don?t forget it assumes MacTeX.
> >>
> >> But do also have a look Simon?s suggestion of using path_helper,
> >> which seems more flexible than my solution:
> >>
> >> I tried this in R-GUI
> >>
> >> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
> >>
> >> and got this answer
> >>
> >> [1]
> >> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/us
> >> r/texbi
> >> n\"; export PATH;?
> >>
> >> which will have to be fiddled with to get something that is usable.
> >>
> >> Berend
> >>
> >>
> >>> Thanks for this,
> >>> John
> >>>
> >>>>
> >>>> Berend
> >>>
> >>>
> >>> ---
> >>> This email has been checked for viruses by Avast antivirus software.
> >>> http://www.avast.com
> >>>
> >
> >
> > ---
> > This email has been checked for viruses by Avast antivirus software.
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> 
> 
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
> 1 South Parks Road, Oxford OX1 3TG, UK


---
This email has been checked for viruses by Avast antivirus software.


From jfox at mcmaster.ca  Tue Mar 17 16:50:27 2015
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 17 Mar 2015 11:50:27 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <CAKw=oCx-Z7y1WmndanxsBPDgjnsKawwheWCmokQd55PqRShbfw@mail.gmail.com>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>	<002901d06012$17baa490$472fedb0$@mcmaster.ca>	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>	<F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>	<001001d060c0$83b6b180$8b241480$@mcmaster.ca>	<88172F93-EC5C-4C87-87B1-FD5116057EFD@r-project.org>
	<CAKw=oCx-Z7y1WmndanxsBPDgjnsKawwheWCmokQd55PqRShbfw@mail.gmail.com>
Message-ID: <002001d060ca$17451cd0$45cf5670$@mcmaster.ca>

Dear JJ,

> -----Original Message-----
> From: JJ Allaire [mailto:jj at rstudio.com]
> Sent: March-17-15 11:33 AM
> To: Simon Urbanek
> Cc: John Fox; Berend Hasselman; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> >
> > I guess that would be less disruptive. If the user has picked a custom order
> at least it would be preserved. But as noted earlier I also think that this
> should be better fixed in rmarkdown - preferably by using the full path so it
> doesn't depend on PATH. I'm told RStudio is providing pandoc binaries so I
> would guess it's easy for them to guarantee the functionality but JJ is
> included so he can weigh in.
> 
> rmarkdown calls pandoc which in turn calls pdflatex. We have some logic to
> discover the path to pdflatex and forward that on to pandoc
> here:
> 
> https://github.com/rstudio/rmarkdown/blob/master/R/util.R#L186-L203
> 
> I'm not sure in this particular case why the right version isn't found. What
> happens if you call rmarkdown:::find_program("pdflatex")
> from the R prompt.

Actually, I already looked at the code in rmarkdown and tried exactly this. On my Mac under R.app, where the default path is

> Sys.getenv("PATH")
[1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"

 I get

> rmarkdown:::find_program("pdflatex")
[1] ""

Best,
 John

> 
> Would be happy to make any change you suggest to the way we forward
> paths on to pandoc in order to make this work.


---
This email has been checked for viruses by Avast antivirus software.


From ripley at stats.ox.ac.uk  Tue Mar 17 16:56:41 2015
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Mar 2015 15:56:41 +0000
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <001901d060c7$2ee25e50$8ca71af0$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>	<002901d06012$17baa490$472fedb0$@mcmaster.ca>	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<5507353F.7010502@stats.ox.ac.uk>
	<001901d060c7$2ee25e50$8ca71af0$@mcmaster.ca>
Message-ID: <55084EB9.7030803@stats.ox.ac.uk>

On 17/03/2015 15:29, John Fox wrote:
> Dear Brian,
>
> Would it be acceptable to CRAN for the Rcmdr package to add /user/texbin to the end of the PATH of the R process is it's not already there, restoring the PATH to its previous state when the Commander() function exits, closing the Rcmdr GUI?

It seems fine to me.

> That seems innocuous to me. I could add a dialog that asks the user's permission unless an Rcmdr option for this behaviour is set, though for most users that would mean that the dialog would appear every time the Rcmdr is started.
>
> Thanks,
>   John
>
>> -----Original Message-----
>> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
>> Sent: March-16-15 3:56 PM
>> To: jfox at mcmaster.ca; 'Berend Hasselman'
>> Cc: r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>
>> Note that it not just MacTex which uses /usr/texbin.  /usr/texbin is a link to
>> /Library/TeX/Distributions/Programs/texbin which is an /etc/alternatives
>> scheme to manage multiple TeX distributions which used (prior to Yosemite,
>> at least) to be controlled by a Systems Preferences widget.  See
>> https://tug.org/mactex/multipletexdistributions.html .
>>
>> That does not apply to e.g. Fink or MacPorts distributions of TeX, but people
>> using those are not likely to be using R.app.
>>
>> /usr/libexec/path_helper is not the whole story either: it reads system
>> versions of PATH which might not apply to a user's shell: it does not get my
>> settings completely correct (in particular it has /usr/texbin too far down the
>> PATH and I had moved it because the system path found the wrong
>> 'makeindex').
>>
>>
>> On 16/03/2015 18:44, John Fox wrote:
>>> Dear Berend and Simon,
>>>
>>> I've now tried Berend's solution and it appears to work fine: If necessary, I
>> add /usr/texbin to the path when the Rcmdr GUI starts up and restore the
>> path to its previous state when it closes.
>>>
>>> I agree that Simon's solution will be more flexible since it should work if
>> pdflatex is located elsewhere (as long as it's on the path reported by
>> path_helper), and I'll give that a try as well.
>>>
>>> Thanks again for all the help,
>>>    John
>>>
>>>> -----Original Message-----
>>>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
>>>> Sent: March-16-15 2:34 PM
>>>> To: jfox at mcmaster.ca
>>>> Cc: Simon Urbanek; r-sig-mac at r-project.org
>>>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>>>
>>>> John,
>>>>
>>>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
>>>>>
>>>>> Dear Berend,
>>>>> ?.
>>>>>>
>>>>>> For what it?s worth: I have the following code in the .First
>>>>>> function in
>>>>>> ~/.Rprofile:
>>>>>> (R 3.1.3 on OS X Yosemite)
>>>>>>
>>>>>>      if( .Platform$GUI == "AQUA" ) {
>>>>>>          # this appends /usr/local/bin to what is already in PATH
>>>>>>          # by default this is already in PATH (at least in 10.6.8)
>>>>>>          # so remove any duplicated items
>>>>>>          z <- Sys.getenv("PATH")
>>>>>>          z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
>>>>>>          # add path to MacTeX executables for OS X Yosemite (which
>>>>>> has a
>>>> bug)
>>>>>>          # in Terminal it is added automatically
>>>>>>          z[length(z)+1] <- "/usr/texbin"
>>>>>>
>>>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep))
>>>>>>      }
>>>>>
>>>>> This should work fine if pdflatex is in /usr/texbin, which I now
>>>>> understand is
>>>> by far the most common case (and is the case on my Mac).
>>>>>
>>>>> Do you mind if I adapt your code for the Rcmdr? I can fix the path
>>>>> in this
>>>> manner at startup of the Rcmdr GUI and restore it to its initial
>>>> value on exit from the GUI.
>>>>>
>>>>
>>>> Go right ahead. Don?t forget it assumes MacTeX.
>>>>
>>>> But do also have a look Simon?s suggestion of using path_helper,
>>>> which seems more flexible than my solution:
>>>>
>>>> I tried this in R-GUI
>>>>
>>>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
>>>>
>>>> and got this answer
>>>>
>>>> [1]
>>>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/us
>>>> r/texbi
>>>> n\"; export PATH;?
>>>>
>>>> which will have to be fiddled with to get something that is usable.
>>>>
>>>> Berend
>>>>
>>>>
>>>>> Thanks for this,
>>>>> John
>>>>>
>>>>>>
>>>>>> Berend
>>>>>
>>>>>
>>>>> ---
>>>>> This email has been checked for viruses by Avast antivirus software.
>>>>> http://www.avast.com
>>>>>
>>>
>>>
>>> ---
>>> This email has been checked for viruses by Avast antivirus software.
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Emeritus Professor of Applied Statistics, University of Oxford
>> 1 South Parks Road, Oxford OX1 3TG, UK
>
>
> ---
> This email has been checked for viruses by Avast antivirus software.
> http://www.avast.com
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford
1 South Parks Road, Oxford OX1 3TG, UK


From jfox at mcmaster.ca  Tue Mar 17 17:33:52 2015
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 17 Mar 2015 12:33:52 -0400
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <CAKw=oCw0iw1eZrTzVvqATbSkDkt1z9TN3XHj6Y7AG20CERW0AA@mail.gmail.com>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>	<002901d06012$17baa490$472fedb0$@mcmaster.ca>	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>	<F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>	<001001d060c0$83b6b180$8b241480$@mcmaster.ca>	<88172F93-EC5C-4C87-87B1-FD5116057EFD@r-project.org>	<CAKw=oCx-Z7y1WmndanxsBPDgjnsKawwheWCmokQd55PqRShbfw@mail.gmail.com>	<002001d060ca$17451cd0$45cf5670$@mcmaster.ca>
	<CAKw=oCw0iw1eZrTzVvqATbSkDkt1z9TN3XHj6Y! 7AG20CERW0AA@mail.gmail
	.com>
Message-ID: <002e01d060d0$285445e0$78fcd1a0$@mcmaster.ca>

Dear JJ,

> -----Original Message-----
> From: JJ Allaire [mailto:jj at rstudio.com]
> Sent: March-17-15 12:20 PM
> To: John Fox
> Cc: Simon Urbanek; Berend Hasselman; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] checking for pdflatex
> 
> >
> > Actually, I already looked at the code in rmarkdown and tried exactly
> > this. On my Mac under R.app, where the default path is
> >
> >> Sys.getenv("PATH")
> > [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> >
> >  I get
> >
> >> rmarkdown:::find_program("pdflatex")
> > [1] ""
> >
> 
> Sorry if this was part of the thread already, but where is your pdflatex? In my
> configuration based on MacTeX it's in /usr/texbin. In RStudio we get this on
> the PATH by reading the OSX PATH configuration (i.e. /etc/paths and
> /etc/paths.d/*).

No need to apologize.

Yes, for me pdflatex is in /usr/texbin, and this seems to be reasonably standard.

As you may have seen, Brian Ripley says that it's OK for me to add /usr/texbin to the PATH if it's not already there, and that's what I've now done in the Rcmdr package. This solves the problem for the Rcmdr running under R.app but not the more general problem of rmarkdown failing under R.app outside of its use in the Rcmdr.

Best,
 John


---
This email has been checked for viruses by Avast antivirus software.


From zlistserv at gmail.com  Tue Mar 17 18:09:41 2015
From: zlistserv at gmail.com (zListserv)
Date: Tue, 17 Mar 2015 13:09:41 -0400
Subject: [R-SIG-Mac] R-GUI-6783-3.1-mavericks-Release.dmg requires X11?
Message-ID: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>

Following Simon's instructions (abstract below), I installed R-GUI-6783-3.1-mavericks-Release.dmg.

Starting R.app yields a message that it requires X11.  I neither need nor want X11.  How do I get rid of this requirement and the message?

> >> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> >>
> >> I have more evidence that points at Xcode. If you use the R.app GUI
> that was compiled at the time of R 3.1.1 - available here:
> >>
> >> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
> >>
> >> then all is well. As we discussed earlier, the code did not change at
> all and the underlying R version is irrelevant, so the only piece that
> changed since July last year when this was built was the Xcode version (and
> thus the compilers used). It's not clear to me at all how the Xcode version
> can affect NSTextView so badly, so this will require some more digging. In
> the meantime, please use the above R.app binary.
> >>


From zlistserv at gmail.com  Tue Mar 17 18:19:59 2015
From: zlistserv at gmail.com (zListserv)
Date: Tue, 17 Mar 2015 13:19:59 -0400
Subject: [R-SIG-Mac] After installing R-GUI-6783-3.1-mavericks-Release.dmg
In-Reply-To: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
References: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
Message-ID: <0DB465F0-46E5-49E9-8FEF-9285EBB0B340@gmail.com>

Does anyone know what this means and how to fix it?

2015-03-17 13:18:30.644 R[4195:264820] Layout still needs update after calling -[NSScrollView layout].  NSScrollView or one of its superclasses may have overridden -layout without calling super. Or, something may have dirtied layout in the middle of updating it.  Both are programming errors in Cocoa Autolayout.  The former is pretty likely to arise if some pre-Cocoa Autolayout class had a method called layout, but it should be fixed.


From zlistserv at gmail.com  Wed Mar 18 20:06:35 2015
From: zlistserv at gmail.com (zListserv)
Date: Wed, 18 Mar 2015 15:06:35 -0400
Subject: [R-SIG-Mac] R-GUI-6783-3.1-mavericks-Release.dmg requires X11?
In-Reply-To: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
References: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
Message-ID: <6502C4A3-1A6A-492D-A99D-59E83AC35693@gmail.com>

Apologies.  I neglected to provide any system information:

R version 3.1.3 (2015-03-09)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.10.2 (Yosemite)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] grDevices utils     datasets  grid      graphics  stats     methods   base     

other attached packages:
[1] zUtil_0.70      HANDLS_0.27     Hmisc_3.15-0    ggplot2_1.0.0   Formula_1.2-0   survival_2.38-1
[7] lattice_0.20-30 foreign_0.8-63  car_2.0-25     

loaded via a namespace (and not attached):
 [1] acepack_1.3-3.3     chron_2.3-45        cluster_2.0.1       colorspace_1.2-5    DBI_0.3.1          
 [6] digest_0.6.8        gsubfn_0.6-6        gtable_0.1.2        latticeExtra_0.6-26 lme4_1.1-7        
[11] MASS_7.3-39         Matrix_1.1-5        mgcv_1.8-4          minqa_1.2.4         munsell_0.4.2      
[16] nlme_3.1-120        nloptr_1.0.4        nnet_7.3-9          parallel_3.1.3      pbkrtest_0.4-2     
[21] plyr_1.8.1          proto_0.3-10        quantreg_5.11       RColorBrewer_1.1-2  Rcpp_0.11.5        
[26] reshape2_1.4.1      rpart_4.1-9         RSQLite_1.0.0       scales_0.2.4        SparseM_1.6        
[31] splines_3.1.3       sqldf_0.4-10        stringr_0.6.2       tcltk_3.1.3         tools_3.1.3        
[36] xtable_1.7-4


> On 2015-03-17, at 13:09, zListserv <zlistserv at gmail.com> wrote:
> 
> Following Simon's instructions (abstract below), I installed R-GUI-6783-3.1-mavericks-Release.dmg.
> 
> Starting R.app yields a message that it requires X11.  I neither need nor want X11.  How do I get rid of this requirement and the message?
> 
>>>> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org>
>> wrote:
>>>> 
>>>> I have more evidence that points at Xcode. If you use the R.app GUI
>> that was compiled at the time of R 3.1.1 - available here:
>>>> 
>>>> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
>>>> 
>>>> then all is well. As we discussed earlier, the code did not change at
>> all and the underlying R version is irrelevant, so the only piece that
>> changed since July last year when this was built was the Xcode version (and
>> thus the compilers used). It's not clear to me at all how the Xcode version
>> can affect NSTextView so badly, so this will require some more digging. In
>> the meantime, please use the above R.app binary.
>>>> 
> 


From simon.urbanek at r-project.org  Wed Mar 18 22:13:29 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 18 Mar 2015 17:13:29 -0400
Subject: [R-SIG-Mac] R-GUI-6783-3.1-mavericks-Release.dmg requires X11?
In-Reply-To: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
References: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
Message-ID: <610E14BD-BE8E-44E3-9D2A-EF27AF68490C@r-project.org>


> On Mar 17, 2015, at 1:09 PM, zListserv <zlistserv at gmail.com> wrote:
> 
> Following Simon's instructions (abstract below), I installed R-GUI-6783-3.1-mavericks-Release.dmg.
> 
> Starting R.app yields a message that it requires X11.  I neither need nor want X11.  How do I get rid of this requirement and the message?
> 

R.app doesn't need X11, but R does since it comes with X11 support.

BTW: The nightly binaries are now updated so they have the correct R.app and so does the CRAN binary for R 3.1.3.

Cheers,
Simon



>>>> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org>
>> wrote:
>>>> 
>>>> I have more evidence that points at Xcode. If you use the R.app GUI
>> that was compiled at the time of R 3.1.1 - available here:
>>>> 
>>>> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
>>>> 
>>>> then all is well. As we discussed earlier, the code did not change at
>> all and the underlying R version is irrelevant, so the only piece that
>> changed since July last year when this was built was the Xcode version (and
>> thus the compilers used). It's not clear to me at all how the Xcode version
>> can affect NSTextView so badly, so this will require some more digging. In
>> the meantime, please use the above R.app binary.
>>>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From zlistserv at gmail.com  Wed Mar 18 22:17:49 2015
From: zlistserv at gmail.com (zListserv)
Date: Wed, 18 Mar 2015 17:17:49 -0400
Subject: [R-SIG-Mac] R-GUI-6783-3.1-mavericks-Release.dmg requires X11?
In-Reply-To: <610E14BD-BE8E-44E3-9D2A-EF27AF68490C@r-project.org>
References: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
	<610E14BD-BE8E-44E3-9D2A-EF27AF68490C@r-project.org>
Message-ID: <45474C9D-08F7-4EF8-8DBC-3F3498AB3AC7@gmail.com>

Simon

Quick follow-up.

Does this mean that X11 starts automatically whenever R.app is launched?

It seems like a waste of resources to have X11 (besides having to wait for it to start).

> On 2015-03-18, at 17:13, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> 
>> On Mar 17, 2015, at 1:09 PM, zListserv <zlistserv at gmail.com> wrote:
>> 
>> Following Simon's instructions (abstract below), I installed R-GUI-6783-3.1-mavericks-Release.dmg.
>> 
>> Starting R.app yields a message that it requires X11.  I neither need nor want X11.  How do I get rid of this requirement and the message?
>> 
> 
> R.app doesn't need X11, but R does since it comes with X11 support.
> 
> BTW: The nightly binaries are now updated so they have the correct R.app and so does the CRAN binary for R 3.1.3.
> 
> Cheers,
> Simon
> 
> 
> 
>>>>> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org>
>>> wrote:
>>>>> 
>>>>> I have more evidence that points at Xcode. If you use the R.app GUI
>>> that was compiled at the time of R 3.1.1 - available here:
>>>>> 
>>>>> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
>>>>> 
>>>>> then all is well. As we discussed earlier, the code did not change at
>>> all and the underlying R version is irrelevant, so the only piece that
>>> changed since July last year when this was built was the Xcode version (and
>>> thus the compilers used). It's not clear to me at all how the Xcode version
>>> can affect NSTextView so badly, so this will require some more digging. In
>>> the meantime, please use the above R.app binary.
>>>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From simon.urbanek at r-project.org  Thu Mar 19 00:51:24 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 18 Mar 2015 19:51:24 -0400
Subject: [R-SIG-Mac] R-GUI-6783-3.1-mavericks-Release.dmg requires X11?
In-Reply-To: <45474C9D-08F7-4EF8-8DBC-3F3498AB3AC7@gmail.com>
References: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
	<610E14BD-BE8E-44E3-9D2A-EF27AF68490C@r-project.org>
	<45474C9D-08F7-4EF8-8DBC-3F3498AB3AC7@gmail.com>
Message-ID: <6488004A-BD98-428D-86C2-715659D2AE23@r-project.org>

On Mar 18, 2015, at 5:17 PM, zListserv <zlistserv at gmail.com> wrote:

> Simon
> 
> Quick follow-up.
> 
> Does this mean that X11 starts automatically whenever R.app is launched?
> 

No

Cheers,
Simon


> It seems like a waste of resources to have X11 (besides having to wait for it to start).
> 
>> On 2015-03-18, at 17:13, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> 
>>> On Mar 17, 2015, at 1:09 PM, zListserv <zlistserv at gmail.com> wrote:
>>> 
>>> Following Simon's instructions (abstract below), I installed R-GUI-6783-3.1-mavericks-Release.dmg.
>>> 
>>> Starting R.app yields a message that it requires X11.  I neither need nor want X11.  How do I get rid of this requirement and the message?
>>> 
>> 
>> R.app doesn't need X11, but R does since it comes with X11 support.
>> 
>> BTW: The nightly binaries are now updated so they have the correct R.app and so does the CRAN binary for R 3.1.3.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>>>>>> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org>
>>>> wrote:
>>>>>> 
>>>>>> I have more evidence that points at Xcode. If you use the R.app GUI
>>>> that was compiled at the time of R 3.1.1 - available here:
>>>>>> 
>>>>>> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
>>>>>> 
>>>>>> then all is well. As we discussed earlier, the code did not change at
>>>> all and the underlying R version is irrelevant, so the only piece that
>>>> changed since July last year when this was built was the Xcode version (and
>>>> thus the compilers used). It's not clear to me at all how the Xcode version
>>>> can affect NSTextView so badly, so this will require some more digging. In
>>>> the meantime, please use the above R.app binary.
>>>>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 


From zlistserv at gmail.com  Thu Mar 19 11:15:30 2015
From: zlistserv at gmail.com (zListserv)
Date: Thu, 19 Mar 2015 06:15:30 -0400
Subject: [R-SIG-Mac] R-GUI-6783-3.1-mavericks-Release.dmg requires X11?
In-Reply-To: <6488004A-BD98-428D-86C2-715659D2AE23@r-project.org>
References: <9E8AB449-7DD0-4AA0-8485-A7F022410C03@gmail.com>
	<610E14BD-BE8E-44E3-9D2A-EF27AF68490C@r-project.org>
	<45474C9D-08F7-4EF8-8DBC-3F3498AB3AC7@gmail.com>
	<6488004A-BD98-428D-86C2-715659D2AE23@r-project.org>
Message-ID: <3A48E429-6B83-4B24-B6F5-99BD197A80F2@gmail.com>

Then how do I prevent X11 from starting automatically (which it started to do after I installed R-GUI-6783-3.1-mavericks-Release.dmg, and continued to do so after I reinstalled R from CRAN)?

> On 2015-03-18, at 19:51, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> On Mar 18, 2015, at 5:17 PM, zListserv <zlistserv at gmail.com> wrote:
> 
>> Simon
>> 
>> Quick follow-up.
>> 
>> Does this mean that X11 starts automatically whenever R.app is launched?
>> 
> 
> No
> 
> Cheers,
> Simon
> 
> 
>> It seems like a waste of resources to have X11 (besides having to wait for it to start).
>> 
>>> On 2015-03-18, at 17:13, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>> 
>>>> On Mar 17, 2015, at 1:09 PM, zListserv <zlistserv at gmail.com> wrote:
>>>> 
>>>> Following Simon's instructions (abstract below), I installed R-GUI-6783-3.1-mavericks-Release.dmg.
>>>> 
>>>> Starting R.app yields a message that it requires X11.  I neither need nor want X11.  How do I get rid of this requirement and the message?
>>>> 
>>> 
>>> R.app doesn't need X11, but R does since it comes with X11 support.
>>> 
>>> BTW: The nightly binaries are now updated so they have the correct R.app and so does the CRAN binary for R 3.1.3.
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>>>>>> On Mar 13, 2015, at 3:10 PM, Simon Urbanek <simon.urbanek at r-project.org>
>>>>> wrote:
>>>>>>> 
>>>>>>> I have more evidence that points at Xcode. If you use the R.app GUI
>>>>> that was compiled at the time of R 3.1.1 - available here:
>>>>>>> 
>>>>>>> http://r.research.att.com/R-GUI-6783-3.1-mavericks-Release.dmg
>>>>>>> 
>>>>>>> then all is well. As we discussed earlier, the code did not change at
>>>>> all and the underlying R version is irrelevant, so the only piece that
>>>>> changed since July last year when this was built was the Xcode version (and
>>>>> thus the compilers used). It's not clear to me at all how the Xcode version
>>>>> can affect NSTextView so badly, so this will require some more digging. In
>>>>> the meantime, please use the above R.app binary.
>>>>>>> 
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>> 
> 


From dusa.adrian at unibuc.ro  Sat Mar 21 11:32:50 2015
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Sat, 21 Mar 2015 12:32:50 +0200
Subject: [R-SIG-Mac] latex errors, Rd problems
Message-ID: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>

Hi everyone,

Not sure if this is the right list, but it seems like a Mac related problem
(version OS X 10.9.5, haven't upgraded to Yosemite just yet).

I'm getting a warning when building a package (with R 3.1.3), relating to
LaTeX and Rd problems:

* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
* checking PDF version of manual without hyperrefs or index ... OK
* DONE

The final .pdf file looks alright, so it gets created after all despite
this warning.

I've tried to search in the .Rd files for anything suspicious but could not
find anything. Also, searched over the web for anything related, only found
a post referring to a missing "inconsolata.sty" but doesn't seem to be my
case.

I also tried R CMD Rd2pdf (in the command line), and I get this at the end:

Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
  Running 'texi2dvi' on 'Rd2.tex' failed.
Messages:
sh: /usr/local/bin/texi2dvi: No such file or directory

It might boil down to this missing texi2dvi, but I have the full
MacTeX-2014 (fresh reinstall today) on my system and it should be there.

Might also be a path issue: here's is the difference between R.gui and
terminal:

> Sys.getenv("PATH")
[1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin"

Adrians-MBP:~ dusadrian$ $PATH
-bash:
/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/MacGPG2/bin:/usr/texbin:
No such file or directory

Thanks very much for any hint, below my R version.

> R.version
               _
platform       x86_64-apple-darwin13.4.0
arch           x86_64
os             darwin13.4.0
system         x86_64, darwin13.4.0
status
major          3
minor          1.3
year           2015
month          03
day            09
svn rev        67962
language       R
version.string R version 3.1.3 (2015-03-09)
nickname       Smooth Sidewalk

Best wishes,
Adrian

-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr.90
050663 Bucharest sector 5
Romania

	[[alternative HTML version deleted]]


From ripley at stats.ox.ac.uk  Sat Mar 21 11:57:52 2015
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 21 Mar 2015 10:57:52 +0000
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
Message-ID: <550D4EB0.7060609@stats.ox.ac.uk>

On 21/03/2015 10:32, Adrian Du?a wrote:
> Hi everyone,
>
> Not sure if this is the right list, but it seems like a Mac related problem
> (version OS X 10.9.5, haven't upgraded to Yosemite just yet).
>
> I'm getting a warning when building a package (with R 3.1.3), relating to
> LaTeX and Rd problems:

That looks like checking not building.  Do tell us exactly what you did, 
not quote selected output.

> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> * checking PDF version of manual without hyperrefs or index ... OK
> * DONE
>
> The final .pdf file looks alright, so it gets created after all despite
> this warning.

But it will not have hyperrefs nor an index ....

> I've tried to search in the .Rd files for anything suspicious but could not
> find anything. Also, searched over the web for anything related, only found
> a post referring to a missing "inconsolata.sty" but doesn't seem to be my
> case.
>
> I also tried R CMD Rd2pdf (in the command line), and I get this at the end:
>
> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>    Running 'texi2dvi' on 'Rd2.tex' failed.
> Messages:
> sh: /usr/local/bin/texi2dvi: No such file or directory
>
> It might boil down to this missing texi2dvi, but I have the full
> MacTeX-2014 (fresh reinstall today) on my system and it should be there.

> Might also be a path issue: here's is the difference between R.gui and
> terminal:

What does R.app (there is no R.gui to my knowledge) have to do with 
this?  See the comment above about 'exactly what you did'.

>
>> Sys.getenv("PATH")
> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin"
>
> Adrians-MBP:~ dusadrian$ $PATH
> -bash:
> /usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/MacGPG2/bin:/usr/texbin:
> No such file or directory
>
> Thanks very much for any hint, below my R version.
>
>> R.version
>                 _
> platform       x86_64-apple-darwin13.4.0
> arch           x86_64
> os             darwin13.4.0
> system         x86_64, darwin13.4.0
> status
> major          3
> minor          1.3
> year           2015
> month          03
> day            09
> svn rev        67962
> language       R
> version.string R version 3.1.3 (2015-03-09)
> nickname       Smooth Sidewalk
>
> Best wishes,
> Adrian
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford
1 South Parks Road, Oxford OX1 3TG, UK


From dusa.adrian at unibuc.ro  Sat Mar 21 13:38:51 2015
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Sat, 21 Mar 2015 14:38:51 +0200
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <550D4EB0.7060609@stats.ox.ac.uk>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
Message-ID: <CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>

On Sat, Mar 21, 2015 at 12:57 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
wrote:

> [...]
>>
>> I also tried R CMD Rd2pdf (in the command line), and I get this at the
>> end:
>>
>> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,
>> :
>>    Running 'texi2dvi' on 'Rd2.tex' failed.
>> Messages:
>> sh: /usr/local/bin/texi2dvi: No such file or directory
>>
>> It might boil down to this missing texi2dvi, but I have the full
>> MacTeX-2014 (fresh reinstall today) on my system and it should be there.
>>
>
>  Might also be a path issue: here's is the difference between R.gui and
>> terminal:
>>
>
> What does R.app (there is no R.gui to my knowledge) have to do with this?
> See the comment above about 'exactly what you did'.
>

Oh, that's right.
I used R.app as well because I have also tried the devtools package which
has a check() function... same result (just to test if it was a path issue).

Indeed, this error comes from the R CMD check command in terminal (sorry to
confuse "building" with the command R CMD build), with the complete
messages below:

Adrians-MBP:~ dusadrian$ R CMD check --as-cran DDIwR_0.2-5.tar.gz
* using log directory ?/Users/dusadrian/DDIwR.Rcheck?
* using R version 3.1.3 (2015-03-09)
* using platform: x86_64-apple-darwin13.4.0 (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?DDIwR/DESCRIPTION? ... OK
* this is package ?DDIwR? version ?0.2-5?
* checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
Maintainer: ?Adrian Dusa <dusa.adrian at unibuc.ro>?
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?DDIwR? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ...
OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking contents of ?data? directory ... OK
* checking data for non-ASCII characters ... OK
* checking data for ASCII and uncompressed saves ... OK
* checking examples ... OK
* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
* checking PDF version of manual without hyperrefs or index ... OK
* DONE

WARNING: There was 1 warning.
See
  ?/Users/dusadrian/DDIwR.Rcheck/00check.log?
for details.


There is nothing more in the 00check.log file, just indicating Rd problems.

Thank you,
Adrian

-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr.90
050663 Bucharest sector 5
Romania

	[[alternative HTML version deleted]]


From ripley at stats.ox.ac.uk  Sat Mar 21 14:09:42 2015
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 21 Mar 2015 13:09:42 +0000
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
	<CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
Message-ID: <550D6D96.7050002@stats.ox.ac.uk>

On 21/03/2015 12:38, Adrian Du?a wrote:
> On Sat, Mar 21, 2015 at 12:57 PM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk>> wrote:
>
>         [...]
>
>         I also tried R CMD Rd2pdf (in the command line), and I get this
>         at the end:
>
>         Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet
>         = quiet,  :
>             Running 'texi2dvi' on 'Rd2.tex' failed.
>         Messages:
>         sh: /usr/local/bin/texi2dvi: No such file or directory
>
>         It might boil down to this missing texi2dvi, but I have the full
>         MacTeX-2014 (fresh reinstall today) on my system and it should
>         be there.
>
>
>         Might also be a path issue: here's is the difference between
>         R.gui and
>         terminal:
>
>
>     What does R.app (there is no R.gui to my knowledge) have to do with
>     this?  See the comment above about 'exactly what you did'.
>
>
> Oh, that's right.
> I used R.app as well because I have also tried the devtools package
> which has a check() function... same result (just to test if it was a
> path issue).
>
> Indeed, this error comes from the R CMD check command in terminal (sorry
> to confuse "building" with the command R CMD build), with the complete
> messages below:
>
> Adrians-MBP:~ dusadrian$ R CMD check --as-cran DDIwR_0.2-5.tar.gz
> * using log directory ?/Users/dusadrian/DDIwR.Rcheck?
> * using R version 3.1.3 (2015-03-09)
> * using platform: x86_64-apple-darwin13.4.0 (64-bit)
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?DDIwR/DESCRIPTION? ... OK
> * this is package ?DDIwR? version ?0.2-5?
> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
> Maintainer: ?Adrian Dusa <dusa.adrian at unibuc.ro
> <mailto:dusa.adrian at unibuc.ro>>?
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package ?DDIwR? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking contents of ?data? directory ... OK
> * checking data for non-ASCII characters ... OK
> * checking data for ASCII and uncompressed saves ... OK
> * checking examples ... OK
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> * checking PDF version of manual without hyperrefs or index ... OK
> * DONE
>
> WARNING: There was 1 warning.
> See
>    ?/Users/dusadrian/DDIwR.Rcheck/00check.log?
> for details.
>
>
> There is nothing more in the 00check.log file, just indicating Rd problems.

There usually is, and the absence indicates no latex log was found.

So the next step is to run R CMD Rd2pdf --no-clean on the unpacked 
package sources and look at the logs in its check directory.  You may 
need to run texi2dvi -D --pdf on the .tex file produced there.

>
> Thank you,
> Adrian
>
> --
> Adrian Dusa
> University of Bucharest
> Romanian Social Data Archive
> Soseaua Panduri nr.90
> 050663 Bucharest sector 5
> Romania


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford
1 South Parks Road, Oxford OX1 3TG, UK


From bob at rudis.net  Sat Mar 21 16:57:31 2015
From: bob at rudis.net (boB Rudis)
Date: Sat, 21 Mar 2015 11:57:31 -0400
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <550D6D96.7050002@stats.ox.ac.uk>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
	<CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
	<550D6D96.7050002@stats.ox.ac.uk>
Message-ID: <CAJ4QxaNQZ_r4h3YuB+YKKqs=u2c8JkqNNqh+ZvXE-3w_eccL8A@mail.gmail.com>

Since I just encountered similar issues in a package I'm working to get
submitted, here's the output (just included the warning lines):

(/usr/local/texlive/2014basic/texmf-dist/tex/latex/latexconfig/hyperref.cfg))

Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/local/texlive/2014basic/texmf-dist/tex/latex/hyperref/hpdftex.def
(/usr/local/texlive/2014basic/texmf-dist/tex/latex/oberdiek/rerunfilecheck.sty)
)

Package hyperref Warning: Option `hyperindex' has already been used,
(hyperref)                setting the option has no effect on input line
366.


Package hyperref Warning: Option `pagebackref' has already been used,
(hyperref)                setting the option has no effect on input line
366.

)

...

(/usr/local/texlive/2014basic/texmf-dist/tex/latex/base/utf8.def) [2]
(./Rd2.ind [3]

LaTeX Font Warning: Font shape `T1/zi4/m/it' undefined
(Font)              using `T1/zi4/m/n' instead on input line 8.

[4]) (./Rd2.aux)

LaTeX Font Warning: Some font shapes were not available, defaults
substituted.

 )

I can't speak to whether the issues are similar, but I'll be trying on
Ubuntu soon to see if the errors are there as well. I am doing
__**nothing**__ unusual or wrong in the Rd files.

On Sat, Mar 21, 2015 at 9:09 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
wrote:

> On 21/03/2015 12:38, Adrian Du?a wrote:
>
>> On Sat, Mar 21, 2015 at 12:57 PM, Prof Brian Ripley
>> <ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk>> wrote:
>>
>>         [...]
>>
>>         I also tried R CMD Rd2pdf (in the command line), and I get this
>>         at the end:
>>
>>         Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet
>>         = quiet,  :
>>             Running 'texi2dvi' on 'Rd2.tex' failed.
>>         Messages:
>>         sh: /usr/local/bin/texi2dvi: No such file or directory
>>
>>         It might boil down to this missing texi2dvi, but I have the full
>>         MacTeX-2014 (fresh reinstall today) on my system and it should
>>         be there.
>>
>>
>>         Might also be a path issue: here's is the difference between
>>         R.gui and
>>         terminal:
>>
>>
>>     What does R.app (there is no R.gui to my knowledge) have to do with
>>     this?  See the comment above about 'exactly what you did'.
>>
>>
>> Oh, that's right.
>> I used R.app as well because I have also tried the devtools package
>> which has a check() function... same result (just to test if it was a
>> path issue).
>>
>> Indeed, this error comes from the R CMD check command in terminal (sorry
>> to confuse "building" with the command R CMD build), with the complete
>> messages below:
>>
>> Adrians-MBP:~ dusadrian$ R CMD check --as-cran DDIwR_0.2-5.tar.gz
>> * using log directory ?/Users/dusadrian/DDIwR.Rcheck?
>> * using R version 3.1.3 (2015-03-09)
>> * using platform: x86_64-apple-darwin13.4.0 (64-bit)
>> * using session charset: UTF-8
>> * using option ?--as-cran?
>> * checking for file ?DDIwR/DESCRIPTION? ... OK
>> * this is package ?DDIwR? version ?0.2-5?
>> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
>> Maintainer: ?Adrian Dusa <dusa.adrian at unibuc.ro
>> <mailto:dusa.adrian at unibuc.ro>>?
>>
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for executable files ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking for sufficient/correct file permissions ... OK
>> * checking whether package ?DDIwR? can be installed ... OK
>> * checking installed package size ... OK
>> * checking package directory ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking for left-over files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... OK
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * checking whether the package can be loaded ... OK
>> * checking whether the package can be loaded with stated dependencies ...
>> OK
>> * checking whether the package can be unloaded cleanly ... OK
>> * checking whether the namespace can be loaded with stated dependencies
>> ... OK
>> * checking whether the namespace can be unloaded cleanly ... OK
>> * checking loading without being on the library search path ... OK
>> * checking dependencies in R code ... OK
>> * checking S3 generic/method consistency ... OK
>> * checking replacement functions ... OK
>> * checking foreign function calls ... OK
>> * checking R code for possible problems ... OK
>> * checking Rd files ... OK
>> * checking Rd metadata ... OK
>> * checking Rd line widths ... OK
>> * checking Rd cross-references ... OK
>> * checking for missing documentation entries ... OK
>> * checking for code/documentation mismatches ... OK
>> * checking Rd \usage sections ... OK
>> * checking Rd contents ... OK
>> * checking for unstated dependencies in examples ... OK
>> * checking contents of ?data? directory ... OK
>> * checking data for non-ASCII characters ... OK
>> * checking data for ASCII and uncompressed saves ... OK
>> * checking examples ... OK
>> * checking PDF version of manual ... WARNING
>> LaTeX errors when creating PDF version.
>> This typically indicates Rd problems.
>> * checking PDF version of manual without hyperrefs or index ... OK
>> * DONE
>>
>> WARNING: There was 1 warning.
>> See
>>    ?/Users/dusadrian/DDIwR.Rcheck/00check.log?
>> for details.
>>
>>
>> There is nothing more in the 00check.log file, just indicating Rd
>> problems.
>>
>
> There usually is, and the absence indicates no latex log was found.
>
> So the next step is to run R CMD Rd2pdf --no-clean on the unpacked package
> sources and look at the logs in its check directory.  You may need to run
> texi2dvi -D --pdf on the .tex file produced there.
>
>
>> Thank you,
>> Adrian
>>
>> --
>> Adrian Dusa
>> University of Bucharest
>> Romanian Social Data Archive
>> Soseaua Panduri nr.90
>> 050663 Bucharest sector 5
>> Romania
>>
>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
> 1 South Parks Road, Oxford OX1 3TG, UK
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From dusa.adrian at unibuc.ro  Sat Mar 21 20:02:25 2015
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Sat, 21 Mar 2015 21:02:25 +0200
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <550D6D96.7050002@stats.ox.ac.uk>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
	<CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
	<550D6D96.7050002@stats.ox.ac.uk>
Message-ID: <CAJ=0CtDBRq04E1JKq8r-hBBkQfsKdoijv5zczhkMCnGtZGw+Dw@mail.gmail.com>

On Sat, Mar 21, 2015 at 3:09 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
wrote:

> On 21/03/2015 12:38, Adrian Du?a wrote:
>
>> [...]
>
>
> So the next step is to run R CMD Rd2pdf --no-clean on the unpacked package
> sources and look at the logs in its check directory.  You may need to run
> texi2dvi -D --pdf on the .tex file produced there.


Already tried that (in my first post), and I get:

###
Adrians-MBP:~ dusadrian$ R CMD Rd2pdf --no-clean DDIwR/
Hmm ... looks like a package
Converting Rd files to LaTeX
Creating pdf output from LaTeX ...
Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
  Running 'texi2dvi' on 'Rd2.tex' failed.
Messages:
sh: /usr/local/bin/texi2dvi: No such file or directory
Output:

Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
  Running 'texi2dvi' on 'Rd2.tex' failed.
Messages:
sh: /usr/local/bin/texi2dvi: No such file or directory
Output:

Error in running tools::texi2pdf()
You may want to clean up by 'rm -rf .Rd2pdf19534'
###


My search for this problem boiled down to texi2dvi which doesn't seem to be
found, despite a full reinstall of a fresh MacTeX-2014.
As far as I read, texi2dvi <should> be found, so my next guess was a path
issue, which gives:

Adrians-MBP:~ dusadrian$ $PATH
-bash:
/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/MacGPG2/bin:/usr/texbin:
No such file or directory

"No such file or directory" (probably for /usr/texbin)... and this is where
I got stuck.

Curiously, there <is> a .tex file in the DDIwR.Rcheck directory, and
running texi2dvi (although it previously complained it could not find it)
gives:

###
Adrians-MBP:~ dusadrian$ texi2dvi -D --pdf DDIwR.Rcheck/DDIwR-manual.tex
+ for command_line_filename in '${1+"$@"}'
+ false 'Processing DDIwR.Rcheck/DDIwR-manual.tex ...'
+ echo DDIwR.Rcheck/DDIwR-manual.tex
+ egrep '^(/|[A-z]:/)'
+ command_line_filename=./DDIwR.Rcheck/DDIwR-manual.tex
+ test '!' -r ./DDIwR.Rcheck/DDIwR-manual.tex
++ sed 's!/[^/]*$!!;s!^$!.!'
++ echo ./DDIwR.Rcheck/DDIwR-manual.tex
+ filename_dir=./DDIwR.Rcheck
++ cd ./DDIwR.Rcheck
++ pwd
+ filename_dir=/Users/dusadrian/DDIwR.Rcheck
++ basename ./DDIwR.Rcheck/DDIwR-manual.tex
+ filename_ext=DDIwR-manual.tex
++ echo DDIwR-manual.tex
++ sed 's/\.[^.]*$//'
+ filename_noext=DDIwR-manual
++ echo DDIwR-manual.tex
++ sed 's/^.*\.//'
+ ext=tex
+ tmpdir_src=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src
+
filename_src=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src/DDIwR-manual.tex
+ tmpdir_xtr=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr
+
filename_xtr=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr/DDIwR-manual.tex
+ tmpdir_rcd=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd
+
filename_rcd=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd/DDIwR-manual.tex
+ tmpdir_bak=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/bak
+ mkdir /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src
/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr
/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd
/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/bak
+ common=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
+ for var in '$tex_envvars'
+ eval 'BIBINPUTS=$common$BIBINPUTS_orig'
++ BIBINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
+ export BIBINPUTS
+ for var in '$tex_envvars'
+ eval 'BSTINPUTS=$common$BSTINPUTS_orig'
++ BSTINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
+ export BSTINPUTS
+ for var in '$tex_envvars'
+ eval 'INDEXSTYLE=$common$INDEXSTYLE_orig'
++ INDEXSTYLE=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
+ export INDEXSTYLE
+ for var in '$tex_envvars'
+ eval 'TEXINPUTS=$common$TEXINPUTS_orig'
++ TEXINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
+ export TEXINPUTS
+ replace_empty='-e '\''s/^:/EMPTY:/g'\''                  -e
'\''s/:$/:EMPTY/g'\''                  -e '\''s/::/:EMPTY:/g'\'''
++ echo /Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
++ eval sed -e ''\''s/^:/EMPTY:/g'\''' -e ''\''s/:$/:EMPTY/g'\''' -e
''\''s/::/:EMPTY:/g'\'''
+++ sed -e 's/^:/EMPTY:/g' -e 's/:$/:EMPTY/g' -e s/::/:EMPTY:/g
+ TEXINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:EMPTY
++ echo /Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
++ eval sed -e ''\''s/^:/EMPTY:/g'\''' -e ''\''s/:$/:EMPTY/g'\''' -e
''\''s/::/:EMPTY:/g'\'''
+++ sed -e 's/^:/EMPTY:/g' -e 's/:$/:EMPTY/g' -e s/::/:EMPTY:/g
+ INDEXSTYLE=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:EMPTY
+ save_IFS='
'
+ IFS=:
+ set x /Users/dusadrian /Users/dusadrian/DDIwR.Rcheck EMPTY
+ shift
+ TEXINPUTS=.
+ for dir in '"$@"'
+ case $dir in
+ TEXINPUTS=.:/Users/dusadrian
+ for dir in '"$@"'
+ case $dir in
+ TEXINPUTS=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck
+ for dir in '"$@"'
+ case $dir in
+ TEXINPUTS=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
+ set x /Users/dusadrian /Users/dusadrian/DDIwR.Rcheck EMPTY
+ shift
+ INDEXSTYLE=.
+ for dir in '"$@"'
+ case $dir in
+ INDEXSTYLE=.:/Users/dusadrian
+ for dir in '"$@"'
+ case $dir in
+ INDEXSTYLE=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck
+ for dir in '"$@"'
+ case $dir in
+ INDEXSTYLE=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
+ IFS='
'
+ test -n ''
+ sed 1q ./DDIwR.Rcheck/DDIwR-manual.tex
+ grep 'input texinfo'
+ language=
+ case ${language:-$filename_ext} in
+ language=latex
+ bibtex=bibtex
+ makeinfo=
+ texindex=makeindex
+ textra_cmd=1i
+ test pdf = dvi
+ tex=pdflatex
+ thumbpdf=thumbpdf
++ cd /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553
++ pdflatex --help
+ tex_help='Usage: pdftex [OPTION]... [TEXNAME[.tex]] [COMMANDS]
   or: pdftex [OPTION]... \FIRST-LINE
   or: pdftex [OPTION]... &FMT ARGS
  Run pdfTeX on TEXNAME, usually creating TEXNAME.pdf.
  Any remaining COMMANDS are processed as pdfTeX input, after TEXNAME is
read.
  If the first line of TEXNAME is %&FMT, and FMT is an existing .fmt file,
  use it.  Else use `NAME.fmt'\'', where NAME is the program invocation
name,
  most commonly `pdftex'\''.

  Alternatively, if the first non-option argument begins with a backslash,
  interpret all non-option arguments as a line of pdfTeX input.

  Alternatively, if the first non-option argument begins with a &, the
  next word is taken as the FMT to read, overriding all else.  Any
  remaining arguments are processed as above.

  If no arguments or options are specified, prompt for input.

-draftmode              switch on draft mode (generates no output PDF)
-enc                    enable encTeX extensions such as \mubyte
-etex                   enable e-TeX extensions
[-no]-file-line-error   disable/enable file:line:error style messages
-fmt=FMTNAME            use FMTNAME instead of program name or a %& line
-halt-on-error          stop processing at the first error
-ini                    be pdfinitex, for dumping formats; this is
implicitly
                          true if the program name is `pdfinitex'\''
-interaction=STRING     set interaction mode (STRING=batchmode/nonstopmode/
                          scrollmode/errorstopmode)
-ipc                    send DVI output to a socket as well as the usual
                          output file
-ipc-start              as -ipc, and also start the server at the other end
-jobname=STRING         set the job name to STRING
-kpathsea-debug=NUMBER  set path searching debugging flags according to
                          the bits of NUMBER
[-no]-mktex=FMT         disable/enable mktexFMT generation (FMT=tex/tfm/pk)
-mltex                  enable MLTeX extensions such as \charsubdef
-output-comment=STRING  use STRING for DVI file comment instead of date
                          (no effect for PDF)
-output-directory=DIR   use existing DIR as the directory to write files in
-output-format=FORMAT   use FORMAT for job output; FORMAT is `dvi'\'' or
`pdf'\''
[-no]-parse-first-line  disable/enable parsing of first line of input file
-progname=STRING        set program (and fmt) name to STRING
-recorder               enable filename recorder
[-no]-shell-escape      disable/enable \write18{SHELL COMMAND}
-shell-restricted       enable restricted \write18
-src-specials           insert source specials into the DVI file
-src-specials=WHERE     insert source specials in certain places of
                          the DVI file. WHERE is a comma-separated value
                          list: cr display hbox math par parend vbox
-synctex=NUMBER         generate SyncTeX data for previewers if nonzero
-translate-file=TCXNAME use the TCX file TCXNAME
-8bit                   make all characters printable by default
-help                   display this help and exit
-version                output version information and exit

Email bug reports to pdftex at tug.org.'
+ tex_args=
+ case $tex_help in
+ tex_args=' --file-line-error'
+ false
+ test -n ''
+ test 0 -ne 0
+ test '!' -r
/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src/DDIwR-manual.tex
+ false 'Reverting to ./DDIwR.Rcheck/DDIwR-manual.tex ...'
+ filename_input=/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
+ test -n ''
+ test latex = texinfo
+ test '' = t
+ :
++ get_xref_files DDIwR-manual
++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
++ test -s DDIwR-manual.log
+++ sed -n '1s/^\(.\).*$/\1/p;q' DDIwR-manual.log
++ first_character=T
++ test xT = 'x\'
++ test xT = 'x'\'''
++ test xT = x@
++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
++ test -s DDIwR-manual.aux
++ continue
++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
++ test -s 'DDIwR-manual.??'
++ continue
++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
++ test -s DDIwR-manual.idx
++ continue
++ echo ''
+ orig_xref_files=
+ test -n ''
+ test -n bibtex
+ test -r DDIwR-manual.aux
++ echo ''
++ sed 's!.*\.aux!!g;
                        s!./DDIwR-manual\.[^ ]o[^ ]!!g;
                        s/^[ ]*//;s/[ ]*$//'
+ index_files=
+ test -n makeindex
+ test -n ''
+ cmd='pdflatex  --file-line-error'
+ false 'Running pdflatex  --file-line-error
/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex ...'
+ pdflatex --file-line-error /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
This is pdfTeX, Version 3.14159265-2.6-1.40.15 (TeX Live 2014) (preloaded
format=pdflatex)
 restricted \write18 enabled.
entering extended mode
(/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
LaTeX2e <2014/05/01>
Babel <3.9k> and hyphenation patterns for 78 languages loaded.

(/usr/local/texlive/2014/texmf-dist/tex/latex/base/book.cls
Document Class: book 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2014/texmf-dist/tex/latex/base/bk10.clo))

! LaTeX Error: File `Rd.sty' not found.

Type X to quit or <RETURN> to proceed,
or enter new name. (Default extension: sty)

Enter file name:
/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4: Emergency stop.
<read *>

l.4 \usepackage
               {makeidx}^^M
/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4:  ==> Fatal error
occurred, no
 output PDF file produced!
Transcript written on DDIwR-manual.log.
+ echo '/usr/bin/texi2dvi: pdflatex exited with bad status, quitting.'
/usr/bin/texi2dvi: pdflatex exited with bad status, quitting.
+ echo '/usr/bin/texi2dvi: see DDIwR-manual.log for errors.'
/usr/bin/texi2dvi: see DDIwR-manual.log for errors.
+ test '' = t
+ exit 1
###


This sends me to DDIwR-manual.log, which as far as I can see is related to
not being able to \read from terminal in nonstop modes:

###
/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4: Emergency stop.
<read *>

l.4 \usepackage
               {makeidx}^^M
*** (cannot \read from terminal in nonstop modes)
###

Any further advice is welcome, thank you very much again,
Adrian


-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr.90
050663 Bucharest sector 5
Romania

	[[alternative HTML version deleted]]


From bob at rudis.net  Sat Mar 21 20:10:33 2015
From: bob at rudis.net (boB Rudis)
Date: Sat, 21 Mar 2015 15:10:33 -0400
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <CAJ=0CtDBRq04E1JKq8r-hBBkQfsKdoijv5zczhkMCnGtZGw+Dw@mail.gmail.com>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
	<CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
	<550D6D96.7050002@stats.ox.ac.uk>
	<CAJ=0CtDBRq04E1JKq8r-hBBkQfsKdoijv5zczhkMCnGtZGw+Dw@mail.gmail.com>
Message-ID: <CAJ4QxaPneC-+nNN+q=+9ZRCB7tibLAZDRkjusR3wWL4CmznBHA@mail.gmail.com>

I noticed that there's an obvious hard-coding of /usr/local/bin when
running the command. I had to symlink it from /usr/bin to /usr/local/bin to
get it to go.

I'm pretty sure the OS X Rd build errors are more MacTex related than
R-related at this point.

On Sat, Mar 21, 2015 at 3:02 PM, Adrian Du?a <dusa.adrian at unibuc.ro> wrote:

> On Sat, Mar 21, 2015 at 3:09 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
> wrote:
>
> > On 21/03/2015 12:38, Adrian Du?a wrote:
> >
> >> [...]
> >
> >
> > So the next step is to run R CMD Rd2pdf --no-clean on the unpacked
> package
> > sources and look at the logs in its check directory.  You may need to run
> > texi2dvi -D --pdf on the .tex file produced there.
>
>
> Already tried that (in my first post), and I get:
>
> ###
> Adrians-MBP:~ dusadrian$ R CMD Rd2pdf --no-clean DDIwR/
> Hmm ... looks like a package
> Converting Rd files to LaTeX
> Creating pdf output from LaTeX ...
> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>   Running 'texi2dvi' on 'Rd2.tex' failed.
> Messages:
> sh: /usr/local/bin/texi2dvi: No such file or directory
> Output:
>
> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>   Running 'texi2dvi' on 'Rd2.tex' failed.
> Messages:
> sh: /usr/local/bin/texi2dvi: No such file or directory
> Output:
>
> Error in running tools::texi2pdf()
> You may want to clean up by 'rm -rf .Rd2pdf19534'
> ###
>
>
> My search for this problem boiled down to texi2dvi which doesn't seem to be
> found, despite a full reinstall of a fresh MacTeX-2014.
> As far as I read, texi2dvi <should> be found, so my next guess was a path
> issue, which gives:
>
> Adrians-MBP:~ dusadrian$ $PATH
> -bash:
>
> /usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/MacGPG2/bin:/usr/texbin:
> No such file or directory
>
> "No such file or directory" (probably for /usr/texbin)... and this is where
> I got stuck.
>
> Curiously, there <is> a .tex file in the DDIwR.Rcheck directory, and
> running texi2dvi (although it previously complained it could not find it)
> gives:
>
> ###
> Adrians-MBP:~ dusadrian$ texi2dvi -D --pdf DDIwR.Rcheck/DDIwR-manual.tex
> + for command_line_filename in '${1+"$@"}'
> + false 'Processing DDIwR.Rcheck/DDIwR-manual.tex ...'
> + echo DDIwR.Rcheck/DDIwR-manual.tex
> + egrep '^(/|[A-z]:/)'
> + command_line_filename=./DDIwR.Rcheck/DDIwR-manual.tex
> + test '!' -r ./DDIwR.Rcheck/DDIwR-manual.tex
> ++ sed 's!/[^/]*$!!;s!^$!.!'
> ++ echo ./DDIwR.Rcheck/DDIwR-manual.tex
> + filename_dir=./DDIwR.Rcheck
> ++ cd ./DDIwR.Rcheck
> ++ pwd
> + filename_dir=/Users/dusadrian/DDIwR.Rcheck
> ++ basename ./DDIwR.Rcheck/DDIwR-manual.tex
> + filename_ext=DDIwR-manual.tex
> ++ echo DDIwR-manual.tex
> ++ sed 's/\.[^.]*$//'
> + filename_noext=DDIwR-manual
> ++ echo DDIwR-manual.tex
> ++ sed 's/^.*\.//'
> + ext=tex
> + tmpdir_src=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src
> +
>
> filename_src=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src/DDIwR-manual.tex
> + tmpdir_xtr=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr
> +
>
> filename_xtr=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr/DDIwR-manual.tex
> + tmpdir_rcd=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd
> +
>
> filename_rcd=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd/DDIwR-manual.tex
> + tmpdir_bak=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/bak
> + mkdir /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src
> /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr
> /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd
> /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/bak
> + common=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> + for var in '$tex_envvars'
> + eval 'BIBINPUTS=$common$BIBINPUTS_orig'
> ++ BIBINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> + export BIBINPUTS
> + for var in '$tex_envvars'
> + eval 'BSTINPUTS=$common$BSTINPUTS_orig'
> ++ BSTINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> + export BSTINPUTS
> + for var in '$tex_envvars'
> + eval 'INDEXSTYLE=$common$INDEXSTYLE_orig'
> ++ INDEXSTYLE=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> + export INDEXSTYLE
> + for var in '$tex_envvars'
> + eval 'TEXINPUTS=$common$TEXINPUTS_orig'
> ++ TEXINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> + export TEXINPUTS
> + replace_empty='-e '\''s/^:/EMPTY:/g'\''                  -e
> '\''s/:$/:EMPTY/g'\''                  -e '\''s/::/:EMPTY:/g'\'''
> ++ echo /Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> ++ eval sed -e ''\''s/^:/EMPTY:/g'\''' -e ''\''s/:$/:EMPTY/g'\''' -e
> ''\''s/::/:EMPTY:/g'\'''
> +++ sed -e 's/^:/EMPTY:/g' -e 's/:$/:EMPTY/g' -e s/::/:EMPTY:/g
> + TEXINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:EMPTY
> ++ echo /Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> ++ eval sed -e ''\''s/^:/EMPTY:/g'\''' -e ''\''s/:$/:EMPTY/g'\''' -e
> ''\''s/::/:EMPTY:/g'\'''
> +++ sed -e 's/^:/EMPTY:/g' -e 's/:$/:EMPTY/g' -e s/::/:EMPTY:/g
> + INDEXSTYLE=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:EMPTY
> + save_IFS='
> '
> + IFS=:
> + set x /Users/dusadrian /Users/dusadrian/DDIwR.Rcheck EMPTY
> + shift
> + TEXINPUTS=.
> + for dir in '"$@"'
> + case $dir in
> + TEXINPUTS=.:/Users/dusadrian
> + for dir in '"$@"'
> + case $dir in
> + TEXINPUTS=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck
> + for dir in '"$@"'
> + case $dir in
> + TEXINPUTS=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> + set x /Users/dusadrian /Users/dusadrian/DDIwR.Rcheck EMPTY
> + shift
> + INDEXSTYLE=.
> + for dir in '"$@"'
> + case $dir in
> + INDEXSTYLE=.:/Users/dusadrian
> + for dir in '"$@"'
> + case $dir in
> + INDEXSTYLE=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck
> + for dir in '"$@"'
> + case $dir in
> + INDEXSTYLE=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
> + IFS='
> '
> + test -n ''
> + sed 1q ./DDIwR.Rcheck/DDIwR-manual.tex
> + grep 'input texinfo'
> + language=
> + case ${language:-$filename_ext} in
> + language=latex
> + bibtex=bibtex
> + makeinfo=
> + texindex=makeindex
> + textra_cmd=1i
> + test pdf = dvi
> + tex=pdflatex
> + thumbpdf=thumbpdf
> ++ cd /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553
> ++ pdflatex --help
> + tex_help='Usage: pdftex [OPTION]... [TEXNAME[.tex]] [COMMANDS]
>    or: pdftex [OPTION]... \FIRST-LINE
>    or: pdftex [OPTION]... &FMT ARGS
>   Run pdfTeX on TEXNAME, usually creating TEXNAME.pdf.
>   Any remaining COMMANDS are processed as pdfTeX input, after TEXNAME is
> read.
>   If the first line of TEXNAME is %&FMT, and FMT is an existing .fmt file,
>   use it.  Else use `NAME.fmt'\'', where NAME is the program invocation
> name,
>   most commonly `pdftex'\''.
>
>   Alternatively, if the first non-option argument begins with a backslash,
>   interpret all non-option arguments as a line of pdfTeX input.
>
>   Alternatively, if the first non-option argument begins with a &, the
>   next word is taken as the FMT to read, overriding all else.  Any
>   remaining arguments are processed as above.
>
>   If no arguments or options are specified, prompt for input.
>
> -draftmode              switch on draft mode (generates no output PDF)
> -enc                    enable encTeX extensions such as \mubyte
> -etex                   enable e-TeX extensions
> [-no]-file-line-error   disable/enable file:line:error style messages
> -fmt=FMTNAME            use FMTNAME instead of program name or a %& line
> -halt-on-error          stop processing at the first error
> -ini                    be pdfinitex, for dumping formats; this is
> implicitly
>                           true if the program name is `pdfinitex'\''
> -interaction=STRING     set interaction mode (STRING=batchmode/nonstopmode/
>                           scrollmode/errorstopmode)
> -ipc                    send DVI output to a socket as well as the usual
>                           output file
> -ipc-start              as -ipc, and also start the server at the other end
> -jobname=STRING         set the job name to STRING
> -kpathsea-debug=NUMBER  set path searching debugging flags according to
>                           the bits of NUMBER
> [-no]-mktex=FMT         disable/enable mktexFMT generation (FMT=tex/tfm/pk)
> -mltex                  enable MLTeX extensions such as \charsubdef
> -output-comment=STRING  use STRING for DVI file comment instead of date
>                           (no effect for PDF)
> -output-directory=DIR   use existing DIR as the directory to write files in
> -output-format=FORMAT   use FORMAT for job output; FORMAT is `dvi'\'' or
> `pdf'\''
> [-no]-parse-first-line  disable/enable parsing of first line of input file
> -progname=STRING        set program (and fmt) name to STRING
> -recorder               enable filename recorder
> [-no]-shell-escape      disable/enable \write18{SHELL COMMAND}
> -shell-restricted       enable restricted \write18
> -src-specials           insert source specials into the DVI file
> -src-specials=WHERE     insert source specials in certain places of
>                           the DVI file. WHERE is a comma-separated value
>                           list: cr display hbox math par parend vbox
> -synctex=NUMBER         generate SyncTeX data for previewers if nonzero
> -translate-file=TCXNAME use the TCX file TCXNAME
> -8bit                   make all characters printable by default
> -help                   display this help and exit
> -version                output version information and exit
>
> Email bug reports to pdftex at tug.org.'
> + tex_args=
> + case $tex_help in
> + tex_args=' --file-line-error'
> + false
> + test -n ''
> + test 0 -ne 0
> + test '!' -r
>
> /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src/DDIwR-manual.tex
> + false 'Reverting to ./DDIwR.Rcheck/DDIwR-manual.tex ...'
> + filename_input=/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
> + test -n ''
> + test latex = texinfo
> + test '' = t
> + :
> ++ get_xref_files DDIwR-manual
> ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
> ++ test -s DDIwR-manual.log
> +++ sed -n '1s/^\(.\).*$/\1/p;q' DDIwR-manual.log
> ++ first_character=T
> ++ test xT = 'x\'
> ++ test xT = 'x'\'''
> ++ test xT = x@
> ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
> ++ test -s DDIwR-manual.aux
> ++ continue
> ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
> ++ test -s 'DDIwR-manual.??'
> ++ continue
> ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
> ++ test -s DDIwR-manual.idx
> ++ continue
> ++ echo ''
> + orig_xref_files=
> + test -n ''
> + test -n bibtex
> + test -r DDIwR-manual.aux
> ++ echo ''
> ++ sed 's!.*\.aux!!g;
>                         s!./DDIwR-manual\.[^ ]o[^ ]!!g;
>                         s/^[ ]*//;s/[ ]*$//'
> + index_files=
> + test -n makeindex
> + test -n ''
> + cmd='pdflatex  --file-line-error'
> + false 'Running pdflatex  --file-line-error
> /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex ...'
> + pdflatex --file-line-error /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
> This is pdfTeX, Version 3.14159265-2.6-1.40.15 (TeX Live 2014) (preloaded
> format=pdflatex)
>  restricted \write18 enabled.
> entering extended mode
> (/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
> LaTeX2e <2014/05/01>
> Babel <3.9k> and hyphenation patterns for 78 languages loaded.
>
> (/usr/local/texlive/2014/texmf-dist/tex/latex/base/book.cls
> Document Class: book 2007/10/19 v1.4h Standard LaTeX document class
> (/usr/local/texlive/2014/texmf-dist/tex/latex/base/bk10.clo))
>
> ! LaTeX Error: File `Rd.sty' not found.
>
> Type X to quit or <RETURN> to proceed,
> or enter new name. (Default extension: sty)
>
> Enter file name:
> /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4: Emergency stop.
> <read *>
>
> l.4 \usepackage
>                {makeidx}^^M
> /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4:  ==> Fatal error
> occurred, no
>  output PDF file produced!
> Transcript written on DDIwR-manual.log.
> + echo '/usr/bin/texi2dvi: pdflatex exited with bad status, quitting.'
> /usr/bin/texi2dvi: pdflatex exited with bad status, quitting.
> + echo '/usr/bin/texi2dvi: see DDIwR-manual.log for errors.'
> /usr/bin/texi2dvi: see DDIwR-manual.log for errors.
> + test '' = t
> + exit 1
> ###
>
>
> This sends me to DDIwR-manual.log, which as far as I can see is related to
> not being able to \read from terminal in nonstop modes:
>
> ###
> /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4: Emergency stop.
> <read *>
>
> l.4 \usepackage
>                {makeidx}^^M
> *** (cannot \read from terminal in nonstop modes)
> ###
>
> Any further advice is welcome, thank you very much again,
> Adrian
>
>
> --
> Adrian Dusa
> University of Bucharest
> Romanian Social Data Archive
> Soseaua Panduri nr.90
> 050663 Bucharest sector 5
> Romania
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From ripley at stats.ox.ac.uk  Sat Mar 21 20:18:28 2015
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 21 Mar 2015 19:18:28 +0000
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <CAJ4QxaPneC-+nNN+q=+9ZRCB7tibLAZDRkjusR3wWL4CmznBHA@mail.gmail.com>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
	<CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
	<550D6D96.7050002@stats.ox.ac.uk>
	<CAJ=0CtDBRq04E1JKq8r-hBBkQfsKdoijv5zczhkMCnGtZGw+Dw@mail.gmail.com>
	<CAJ4QxaPneC-+nNN+q=+9ZRCB7tibLAZDRkjusR3wWL4CmznBHA@mail.gmail.com>
Message-ID: <550DC404.30001@stats.ox.ac.uk>

On 21/03/2015 19:10, boB Rudis wrote:
> I noticed that there's an obvious hard-coding of /usr/local/bin when
> running the command. I had to symlink it from /usr/bin to /usr/local/bin
> to get it to go.

It is not hard-coded!  It is set when R is configured: if this was a 
binary distribution of R, using the expected layout.  If you want to 
override it, set the environment variable R_TEXI2DVICMD .  For all such 
variables see /Library/Frameworks/R.framework/Resources/etc/Renviron 
(and the R manuals).

Do follow the posting guide and *not send HTML*.


>
> I'm pretty sure the OS X Rd build errors are more MacTex related than
> R-related at this point.
>
> On Sat, Mar 21, 2015 at 3:02 PM, Adrian Du?a <dusa.adrian at unibuc.ro
> <mailto:dusa.adrian at unibuc.ro>> wrote:
>
>     On Sat, Mar 21, 2015 at 3:09 PM, Prof Brian Ripley
>     <ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk>>
>     wrote:
>
>     > On 21/03/2015 12:38, Adrian Du?a wrote:
>     >
>      >> [...]
>     >
>     >
>     > So the next step is to run R CMD Rd2pdf --no-clean on the unpacked package
>     > sources and look at the logs in its check directory.  You may need to run
>     > texi2dvi -D --pdf on the .tex file produced there.
>
>
>     Already tried that (in my first post), and I get:
>
>     ###
>     Adrians-MBP:~ dusadrian$ R CMD Rd2pdf --no-clean DDIwR/
>     Hmm ... looks like a package
>     Converting Rd files to LaTeX
>     Creating pdf output from LaTeX ...
>     Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
>     quiet,  :
>        Running 'texi2dvi' on 'Rd2.tex' failed.
>     Messages:
>     sh: /usr/local/bin/texi2dvi: No such file or directory
>     Output:
>
>     Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
>     quiet,  :
>        Running 'texi2dvi' on 'Rd2.tex' failed.
>     Messages:
>     sh: /usr/local/bin/texi2dvi: No such file or directory
>     Output:
>
>     Error in running tools::texi2pdf()
>     You may want to clean up by 'rm -rf .Rd2pdf19534'
>     ###
>
>
>     My search for this problem boiled down to texi2dvi which doesn't
>     seem to be
>     found, despite a full reinstall of a fresh MacTeX-2014.
>     As far as I read, texi2dvi <should> be found, so my next guess was a
>     path
>     issue, which gives:
>
>     Adrians-MBP:~ dusadrian$ $PATH
>     -bash:
>     /usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/MacGPG2/bin:/usr/texbin:
>     No such file or directory
>
>     "No such file or directory" (probably for /usr/texbin)... and this
>     is where
>     I got stuck.
>
>     Curiously, there <is> a .tex file in the DDIwR.Rcheck directory, and
>     running texi2dvi (although it previously complained it could not
>     find it)
>     gives:
>
>     ###
>     Adrians-MBP:~ dusadrian$ texi2dvi -D --pdf DDIwR.Rcheck/DDIwR-manual.tex
>     + for command_line_filename in '${1+"$@"}'
>     + false 'Processing DDIwR.Rcheck/DDIwR-manual.tex ...'
>     + echo DDIwR.Rcheck/DDIwR-manual.tex
>     + egrep '^(/|[A-z]:/)'
>     + command_line_filename=./DDIwR.Rcheck/DDIwR-manual.tex
>     + test '!' -r ./DDIwR.Rcheck/DDIwR-manual.tex
>     ++ sed 's!/[^/]*$!!;s!^$!.!'
>     ++ echo ./DDIwR.Rcheck/DDIwR-manual.tex
>     + filename_dir=./DDIwR.Rcheck
>     ++ cd ./DDIwR.Rcheck
>     ++ pwd
>     + filename_dir=/Users/dusadrian/DDIwR.Rcheck
>     ++ basename ./DDIwR.Rcheck/DDIwR-manual.tex
>     + filename_ext=DDIwR-manual.tex
>     ++ echo DDIwR-manual.tex
>     ++ sed 's/\.[^.]*$//'
>     + filename_noext=DDIwR-manual
>     ++ echo DDIwR-manual.tex
>     ++ sed 's/^.*\.//'
>     + ext=tex
>     +
>     tmpdir_src=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src
>     +
>     filename_src=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src/DDIwR-manual.tex
>     +
>     tmpdir_xtr=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr
>     +
>     filename_xtr=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr/DDIwR-manual.tex
>     +
>     tmpdir_rcd=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd
>     +
>     filename_rcd=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd/DDIwR-manual.tex
>     +
>     tmpdir_bak=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/bak
>     + mkdir /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src
>     /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr
>     /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd
>     /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/bak
>     + common=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     + for var in '$tex_envvars'
>     + eval 'BIBINPUTS=$common$BIBINPUTS_orig'
>     ++ BIBINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     + export BIBINPUTS
>     + for var in '$tex_envvars'
>     + eval 'BSTINPUTS=$common$BSTINPUTS_orig'
>     ++ BSTINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     + export BSTINPUTS
>     + for var in '$tex_envvars'
>     + eval 'INDEXSTYLE=$common$INDEXSTYLE_orig'
>     ++ INDEXSTYLE=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     + export INDEXSTYLE
>     + for var in '$tex_envvars'
>     + eval 'TEXINPUTS=$common$TEXINPUTS_orig'
>     ++ TEXINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     + export TEXINPUTS
>     + replace_empty='-e '\''s/^:/EMPTY:/g'\''                  -e
>     '\''s/:$/:EMPTY/g'\''                  -e '\''s/::/:EMPTY:/g'\'''
>     ++ echo /Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     ++ eval sed -e ''\''s/^:/EMPTY:/g'\''' -e ''\''s/:$/:EMPTY/g'\''' -e
>     ''\''s/::/:EMPTY:/g'\'''
>     +++ sed -e 's/^:/EMPTY:/g' -e 's/:$/:EMPTY/g' -e s/::/:EMPTY:/g
>     + TEXINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:EMPTY
>     ++ echo /Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     ++ eval sed -e ''\''s/^:/EMPTY:/g'\''' -e ''\''s/:$/:EMPTY/g'\''' -e
>     ''\''s/::/:EMPTY:/g'\'''
>     +++ sed -e 's/^:/EMPTY:/g' -e 's/:$/:EMPTY/g' -e s/::/:EMPTY:/g
>     + INDEXSTYLE=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:EMPTY
>     + save_IFS='
>     '
>     + IFS=:
>     + set x /Users/dusadrian /Users/dusadrian/DDIwR.Rcheck EMPTY
>     + shift
>     + TEXINPUTS=.
>     + for dir in '"$@"'
>     + case $dir in
>     + TEXINPUTS=.:/Users/dusadrian
>     + for dir in '"$@"'
>     + case $dir in
>     + TEXINPUTS=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck
>     + for dir in '"$@"'
>     + case $dir in
>     + TEXINPUTS=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     + set x /Users/dusadrian /Users/dusadrian/DDIwR.Rcheck EMPTY
>     + shift
>     + INDEXSTYLE=.
>     + for dir in '"$@"'
>     + case $dir in
>     + INDEXSTYLE=.:/Users/dusadrian
>     + for dir in '"$@"'
>     + case $dir in
>     + INDEXSTYLE=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck
>     + for dir in '"$@"'
>     + case $dir in
>     + INDEXSTYLE=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>     + IFS='
>     '
>     + test -n ''
>     + sed 1q ./DDIwR.Rcheck/DDIwR-manual.tex
>     + grep 'input texinfo'
>     + language=
>     + case ${language:-$filename_ext} in
>     + language=latex
>     + bibtex=bibtex
>     + makeinfo=
>     + texindex=makeindex
>     + textra_cmd=1i
>     + test pdf = dvi
>     + tex=pdflatex
>     + thumbpdf=thumbpdf
>     ++ cd /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553
>     ++ pdflatex --help
>     + tex_help='Usage: pdftex [OPTION]... [TEXNAME[.tex]] [COMMANDS]
>         or: pdftex [OPTION]... \FIRST-LINE
>         or: pdftex [OPTION]... &FMT ARGS
>        Run pdfTeX on TEXNAME, usually creating TEXNAME.pdf.
>        Any remaining COMMANDS are processed as pdfTeX input, after
>     TEXNAME is
>     read.
>        If the first line of TEXNAME is %&FMT, and FMT is an existing
>     .fmt file,
>        use it.  Else use `NAME.fmt'\'', where NAME is the program invocation
>     name,
>        most commonly `pdftex'\''.
>
>        Alternatively, if the first non-option argument begins with a
>     backslash,
>        interpret all non-option arguments as a line of pdfTeX input.
>
>        Alternatively, if the first non-option argument begins with a &, the
>        next word is taken as the FMT to read, overriding all else.  Any
>        remaining arguments are processed as above.
>
>        If no arguments or options are specified, prompt for input.
>
>     -draftmode              switch on draft mode (generates no output PDF)
>     -enc                    enable encTeX extensions such as \mubyte
>     -etex                   enable e-TeX extensions
>     [-no]-file-line-error   disable/enable file:line:error style messages
>     -fmt=FMTNAME            use FMTNAME instead of program name or a %& line
>     -halt-on-error          stop processing at the first error
>     -ini                    be pdfinitex, for dumping formats; this is
>     implicitly
>                                true if the program name is `pdfinitex'\''
>     -interaction=STRING     set interaction mode
>     (STRING=batchmode/nonstopmode/
>                                scrollmode/errorstopmode)
>     -ipc                    send DVI output to a socket as well as the usual
>                                output file
>     -ipc-start              as -ipc, and also start the server at the
>     other end
>     -jobname=STRING         set the job name to STRING
>     -kpathsea-debug=NUMBER  set path searching debugging flags according to
>                                the bits of NUMBER
>     [-no]-mktex=FMT         disable/enable mktexFMT generation
>     (FMT=tex/tfm/pk)
>     -mltex                  enable MLTeX extensions such as \charsubdef
>     -output-comment=STRING  use STRING for DVI file comment instead of date
>                                (no effect for PDF)
>     -output-directory=DIR   use existing DIR as the directory to write
>     files in
>     -output-format=FORMAT   use FORMAT for job output; FORMAT is `dvi'\'' or
>     `pdf'\''
>     [-no]-parse-first-line  disable/enable parsing of first line of
>     input file
>     -progname=STRING        set program (and fmt) name to STRING
>     -recorder               enable filename recorder
>     [-no]-shell-escape      disable/enable \write18{SHELL COMMAND}
>     -shell-restricted       enable restricted \write18
>     -src-specials           insert source specials into the DVI file
>     -src-specials=WHERE     insert source specials in certain places of
>                                the DVI file. WHERE is a comma-separated
>     value
>                                list: cr display hbox math par parend vbox
>     -synctex=NUMBER         generate SyncTeX data for previewers if nonzero
>     -translate-file=TCXNAME use the TCX file TCXNAME
>     -8bit                   make all characters printable by default
>     -help                   display this help and exit
>     -version                output version information and exit
>
>     Email bug reports to pdftex at tug.org <mailto:pdftex at tug.org>.'
>     + tex_args=
>     + case $tex_help in
>     + tex_args=' --file-line-error'
>     + false
>     + test -n ''
>     + test 0 -ne 0
>     + test '!' -r
>     /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src/DDIwR-manual.tex
>     + false 'Reverting to ./DDIwR.Rcheck/DDIwR-manual.tex ...'
>     + filename_input=/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
>     + test -n ''
>     + test latex = texinfo
>     + test '' = t
>     + :
>     ++ get_xref_files DDIwR-manual
>     ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
>     ++ test -s DDIwR-manual.log
>     +++ sed -n '1s/^\(.\).*$/\1/p;q' DDIwR-manual.log
>     ++ first_character=T
>     ++ test xT = 'x\'
>     ++ test xT = 'x'\'''
>     ++ test xT = x@
>     ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
>     ++ test -s DDIwR-manual.aux
>     ++ continue
>     ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
>     ++ test -s 'DDIwR-manual.??'
>     ++ continue
>     ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
>     ++ test -s DDIwR-manual.idx
>     ++ continue
>     ++ echo ''
>     + orig_xref_files=
>     + test -n ''
>     + test -n bibtex
>     + test -r DDIwR-manual.aux
>     ++ echo ''
>     ++ sed 's!.*\.aux!!g;
>                              s!./DDIwR-manual\.[^ ]o[^ ]!!g;
>                              s/^[ ]*//;s/[ ]*$//'
>     + index_files=
>     + test -n makeindex
>     + test -n ''
>     + cmd='pdflatex  --file-line-error'
>     + false 'Running pdflatex  --file-line-error
>     /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex ...'
>     + pdflatex --file-line-error
>     /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
>     This is pdfTeX, Version 3.14159265-2.6-1.40.15 (TeX Live 2014)
>     (preloaded
>     format=pdflatex)
>       restricted \write18 enabled.
>     entering extended mode
>     (/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
>     LaTeX2e <2014/05/01>
>     Babel <3.9k> and hyphenation patterns for 78 languages loaded.
>
>     (/usr/local/texlive/2014/texmf-dist/tex/latex/base/book.cls
>     Document Class: book 2007/10/19 v1.4h Standard LaTeX document class
>     (/usr/local/texlive/2014/texmf-dist/tex/latex/base/bk10.clo))
>
>     ! LaTeX Error: File `Rd.sty' not found.
>
>     Type X to quit or <RETURN> to proceed,
>     or enter new name. (Default extension: sty)
>
>     Enter file name:
>     /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4: Emergency stop.
>     <read *>
>
>     l.4 \usepackage
>                     {makeidx}^^M
>     /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4:  ==> Fatal error
>     occurred, no
>       output PDF file produced!
>     Transcript written on DDIwR-manual.log.
>     + echo '/usr/bin/texi2dvi: pdflatex exited with bad status, quitting.'
>     /usr/bin/texi2dvi: pdflatex exited with bad status, quitting.
>     + echo '/usr/bin/texi2dvi: see DDIwR-manual.log for errors.'
>     /usr/bin/texi2dvi: see DDIwR-manual.log for errors.
>     + test '' = t
>     + exit 1
>     ###
>
>
>     This sends me to DDIwR-manual.log, which as far as I can see is
>     related to
>     not being able to \read from terminal in nonstop modes:
>
>     ###
>     /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4: Emergency stop.
>     <read *>
>
>     l.4 \usepackage
>                     {makeidx}^^M
>     *** (cannot \read from terminal in nonstop modes)
>     ###
>
>     Any further advice is welcome, thank you very much again,
>     Adrian
>
>
>     --
>     Adrian Dusa
>     University of Bucharest
>     Romanian Social Data Archive
>     Soseaua Panduri nr.90
>     050663 Bucharest sector 5
>     Romania
>
>              [[alternative HTML version deleted]]
>
>     _______________________________________________
>     R-SIG-Mac mailing list
>     R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>     https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford
1 South Parks Road, Oxford OX1 3TG, UK


From bhh at xs4all.nl  Sat Mar 21 20:29:19 2015
From: bhh at xs4all.nl (Berend Hasselman)
Date: Sat, 21 Mar 2015 20:29:19 +0100
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <CAJ=0CtDBRq04E1JKq8r-hBBkQfsKdoijv5zczhkMCnGtZGw+Dw@mail.gmail.com>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
	<CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
	<550D6D96.7050002@stats.ox.ac.uk>
	<CAJ=0CtDBRq04E1JKq8r-hBBkQfsKdoijv5zczhkMCnGtZGw+Dw@mail.gmail.com>
Message-ID: <96C3D1CE-8B3C-4344-BF50-4E2D9F388003@xs4all.nl>


> 
>> On 21/03/2015 12:38, Adrian Du?a wrote:
>> 
>>> [...]
>> 
>> So the next step is to run R CMD Rd2pdf --no-clean on the unpacked package
>> sources and look at the logs in its check directory.  You may need to run
>> texi2dvi -D --pdf on the .tex file produced there.
> 
> Already tried that (in my first post), and I get:
> ????..
> ###
> Adrians-MBP:~ dusadrian$ R CMD Rd2pdf --no-clean DDIwR/
> Hmm ... looks like a package
> Converting Rd files to LaTeX
> Creating pdf output from LaTeX ...
> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
> Any further advice is welcome, thank you very much again,
> Adrian
> 

Are you using the appropriate version of texinfo?
Have a look at: https://mailman.stat.ethz.ch/pipermail/r-devel/2015-January/070415.html

Berend


From dusa.adrian at unibuc.ro  Sat Mar 21 21:14:20 2015
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Sat, 21 Mar 2015 22:14:20 +0200
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <96C3D1CE-8B3C-4344-BF50-4E2D9F388003@xs4all.nl>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
	<CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
	<550D6D96.7050002@stats.ox.ac.uk>
	<CAJ=0CtDBRq04E1JKq8r-hBBkQfsKdoijv5zczhkMCnGtZGw+Dw@mail.gmail.com>
	<96C3D1CE-8B3C-4344-BF50-4E2D9F388003@xs4all.nl>
Message-ID: <CAJ=0CtBvvPMPODJ=4uJGanGU6nHynSQkth_ZiVaBVFw6L2-rSA@mail.gmail.com>

On Sat, Mar 21, 2015 at 9:29 PM, Berend Hasselman <bhh at xs4all.nl> wrote:

> [...]
>
> Are you using the appropriate version of texinfo?
> Have a look at:
> https://mailman.stat.ethz.ch/pipermail/r-devel/2015-January/070415.html
>

That did it.
I have copied texi2dvi from that .tar.gz file in /usr/local/bin and
everything is now fine.

Thanks very much!
Adrian

-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr.90
050663 Bucharest sector 5
Romania

	[[alternative HTML version deleted]]


From simon.urbanek at r-project.org  Mon Mar 23 14:05:23 2015
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 23 Mar 2015 09:05:23 -0400
Subject: [R-SIG-Mac] latex errors, Rd problems
In-Reply-To: <CAJ4QxaPneC-+nNN+q=+9ZRCB7tibLAZDRkjusR3wWL4CmznBHA@mail.gmail.com>
References: <CAJ=0CtCHoEHKOHoDnHfKc+YZyF2qqvo3ucG1Lw0CNmszj3N=1A@mail.gmail.com>
	<550D4EB0.7060609@stats.ox.ac.uk>
	<CAJ=0CtD-vV7wLsROZXsFRiX0dojECaZQsJuYvS4N-MzJE6V4ZQ@mail.gmail.com>
	<550D6D96.7050002@stats.ox.ac.uk>
	<CAJ=0CtDBRq04E1JKq8r-hBBkQfsKdoijv5zczhkMCnGtZGw+Dw@mail.gmail.com>
	<CAJ4QxaPneC-+nNN+q=+9ZRCB7tibLAZDRkjusR3wWL4CmznBHA@mail.gmail.com>
Message-ID: <10A750E7-EB0A-4FCD-B253-670776307F43@r-project.org>


On Mar 21, 2015, at 3:10 PM, boB Rudis <bob at rudis.net> wrote:

> I noticed that there's an obvious hard-coding of /usr/local/bin when running the command. I had to symlink it from /usr/bin to /usr/local/bin to get it to go.
> 


Bad idea - OS X comes with an ancient texinfo version (over 10 years old, presumably for licensing reasons), but R requires a more recent version. That's why you have to use the more recent one which is what CRAN R does. As Brian pointed out if you don't want to use the one we provide you can set R_TEXI2DVICMD to whichever you prefer.

Cheers,
Simon



> I'm pretty sure the OS X Rd build errors are more MacTex related than
> R-related at this point.
> 
> On Sat, Mar 21, 2015 at 3:02 PM, Adrian Du?a <dusa.adrian at unibuc.ro> wrote:
> 
>> On Sat, Mar 21, 2015 at 3:09 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
>> wrote:
>> 
>>> On 21/03/2015 12:38, Adrian Du?a wrote:
>>> 
>>>> [...]
>>> 
>>> 
>>> So the next step is to run R CMD Rd2pdf --no-clean on the unpacked
>> package
>>> sources and look at the logs in its check directory.  You may need to run
>>> texi2dvi -D --pdf on the .tex file produced there.
>> 
>> 
>> Already tried that (in my first post), and I get:
>> 
>> ###
>> Adrians-MBP:~ dusadrian$ R CMD Rd2pdf --no-clean DDIwR/
>> Hmm ... looks like a package
>> Converting Rd files to LaTeX
>> Creating pdf output from LaTeX ...
>> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>>  Running 'texi2dvi' on 'Rd2.tex' failed.
>> Messages:
>> sh: /usr/local/bin/texi2dvi: No such file or directory
>> Output:
>> 
>> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>>  Running 'texi2dvi' on 'Rd2.tex' failed.
>> Messages:
>> sh: /usr/local/bin/texi2dvi: No such file or directory
>> Output:
>> 
>> Error in running tools::texi2pdf()
>> You may want to clean up by 'rm -rf .Rd2pdf19534'
>> ###
>> 
>> 
>> My search for this problem boiled down to texi2dvi which doesn't seem to be
>> found, despite a full reinstall of a fresh MacTeX-2014.
>> As far as I read, texi2dvi <should> be found, so my next guess was a path
>> issue, which gives:
>> 
>> Adrians-MBP:~ dusadrian$ $PATH
>> -bash:
>> 
>> /usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/MacGPG2/bin:/usr/texbin:
>> No such file or directory
>> 
>> "No such file or directory" (probably for /usr/texbin)... and this is where
>> I got stuck.
>> 
>> Curiously, there <is> a .tex file in the DDIwR.Rcheck directory, and
>> running texi2dvi (although it previously complained it could not find it)
>> gives:
>> 
>> ###
>> Adrians-MBP:~ dusadrian$ texi2dvi -D --pdf DDIwR.Rcheck/DDIwR-manual.tex
>> + for command_line_filename in '${1+"$@"}'
>> + false 'Processing DDIwR.Rcheck/DDIwR-manual.tex ...'
>> + echo DDIwR.Rcheck/DDIwR-manual.tex
>> + egrep '^(/|[A-z]:/)'
>> + command_line_filename=./DDIwR.Rcheck/DDIwR-manual.tex
>> + test '!' -r ./DDIwR.Rcheck/DDIwR-manual.tex
>> ++ sed 's!/[^/]*$!!;s!^$!.!'
>> ++ echo ./DDIwR.Rcheck/DDIwR-manual.tex
>> + filename_dir=./DDIwR.Rcheck
>> ++ cd ./DDIwR.Rcheck
>> ++ pwd
>> + filename_dir=/Users/dusadrian/DDIwR.Rcheck
>> ++ basename ./DDIwR.Rcheck/DDIwR-manual.tex
>> + filename_ext=DDIwR-manual.tex
>> ++ echo DDIwR-manual.tex
>> ++ sed 's/\.[^.]*$//'
>> + filename_noext=DDIwR-manual
>> ++ echo DDIwR-manual.tex
>> ++ sed 's/^.*\.//'
>> + ext=tex
>> + tmpdir_src=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src
>> +
>> 
>> filename_src=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src/DDIwR-manual.tex
>> + tmpdir_xtr=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr
>> +
>> 
>> filename_xtr=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr/DDIwR-manual.tex
>> + tmpdir_rcd=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd
>> +
>> 
>> filename_rcd=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd/DDIwR-manual.tex
>> + tmpdir_bak=/var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/bak
>> + mkdir /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src
>> /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/xtr
>> /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/rcd
>> /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/bak
>> + common=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> + for var in '$tex_envvars'
>> + eval 'BIBINPUTS=$common$BIBINPUTS_orig'
>> ++ BIBINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> + export BIBINPUTS
>> + for var in '$tex_envvars'
>> + eval 'BSTINPUTS=$common$BSTINPUTS_orig'
>> ++ BSTINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> + export BSTINPUTS
>> + for var in '$tex_envvars'
>> + eval 'INDEXSTYLE=$common$INDEXSTYLE_orig'
>> ++ INDEXSTYLE=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> + export INDEXSTYLE
>> + for var in '$tex_envvars'
>> + eval 'TEXINPUTS=$common$TEXINPUTS_orig'
>> ++ TEXINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> + export TEXINPUTS
>> + replace_empty='-e '\''s/^:/EMPTY:/g'\''                  -e
>> '\''s/:$/:EMPTY/g'\''                  -e '\''s/::/:EMPTY:/g'\'''
>> ++ echo /Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> ++ eval sed -e ''\''s/^:/EMPTY:/g'\''' -e ''\''s/:$/:EMPTY/g'\''' -e
>> ''\''s/::/:EMPTY:/g'\'''
>> +++ sed -e 's/^:/EMPTY:/g' -e 's/:$/:EMPTY/g' -e s/::/:EMPTY:/g
>> + TEXINPUTS=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:EMPTY
>> ++ echo /Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> ++ eval sed -e ''\''s/^:/EMPTY:/g'\''' -e ''\''s/:$/:EMPTY/g'\''' -e
>> ''\''s/::/:EMPTY:/g'\'''
>> +++ sed -e 's/^:/EMPTY:/g' -e 's/:$/:EMPTY/g' -e s/::/:EMPTY:/g
>> + INDEXSTYLE=/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:EMPTY
>> + save_IFS='
>> '
>> + IFS=:
>> + set x /Users/dusadrian /Users/dusadrian/DDIwR.Rcheck EMPTY
>> + shift
>> + TEXINPUTS=.
>> + for dir in '"$@"'
>> + case $dir in
>> + TEXINPUTS=.:/Users/dusadrian
>> + for dir in '"$@"'
>> + case $dir in
>> + TEXINPUTS=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck
>> + for dir in '"$@"'
>> + case $dir in
>> + TEXINPUTS=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> + set x /Users/dusadrian /Users/dusadrian/DDIwR.Rcheck EMPTY
>> + shift
>> + INDEXSTYLE=.
>> + for dir in '"$@"'
>> + case $dir in
>> + INDEXSTYLE=.:/Users/dusadrian
>> + for dir in '"$@"'
>> + case $dir in
>> + INDEXSTYLE=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck
>> + for dir in '"$@"'
>> + case $dir in
>> + INDEXSTYLE=.:/Users/dusadrian:/Users/dusadrian/DDIwR.Rcheck:
>> + IFS='
>> '
>> + test -n ''
>> + sed 1q ./DDIwR.Rcheck/DDIwR-manual.tex
>> + grep 'input texinfo'
>> + language=
>> + case ${language:-$filename_ext} in
>> + language=latex
>> + bibtex=bibtex
>> + makeinfo=
>> + texindex=makeindex
>> + textra_cmd=1i
>> + test pdf = dvi
>> + tex=pdflatex
>> + thumbpdf=thumbpdf
>> ++ cd /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553
>> ++ pdflatex --help
>> + tex_help='Usage: pdftex [OPTION]... [TEXNAME[.tex]] [COMMANDS]
>>   or: pdftex [OPTION]... \FIRST-LINE
>>   or: pdftex [OPTION]... &FMT ARGS
>>  Run pdfTeX on TEXNAME, usually creating TEXNAME.pdf.
>>  Any remaining COMMANDS are processed as pdfTeX input, after TEXNAME is
>> read.
>>  If the first line of TEXNAME is %&FMT, and FMT is an existing .fmt file,
>>  use it.  Else use `NAME.fmt'\'', where NAME is the program invocation
>> name,
>>  most commonly `pdftex'\''.
>> 
>>  Alternatively, if the first non-option argument begins with a backslash,
>>  interpret all non-option arguments as a line of pdfTeX input.
>> 
>>  Alternatively, if the first non-option argument begins with a &, the
>>  next word is taken as the FMT to read, overriding all else.  Any
>>  remaining arguments are processed as above.
>> 
>>  If no arguments or options are specified, prompt for input.
>> 
>> -draftmode              switch on draft mode (generates no output PDF)
>> -enc                    enable encTeX extensions such as \mubyte
>> -etex                   enable e-TeX extensions
>> [-no]-file-line-error   disable/enable file:line:error style messages
>> -fmt=FMTNAME            use FMTNAME instead of program name or a %& line
>> -halt-on-error          stop processing at the first error
>> -ini                    be pdfinitex, for dumping formats; this is
>> implicitly
>>                          true if the program name is `pdfinitex'\''
>> -interaction=STRING     set interaction mode (STRING=batchmode/nonstopmode/
>>                          scrollmode/errorstopmode)
>> -ipc                    send DVI output to a socket as well as the usual
>>                          output file
>> -ipc-start              as -ipc, and also start the server at the other end
>> -jobname=STRING         set the job name to STRING
>> -kpathsea-debug=NUMBER  set path searching debugging flags according to
>>                          the bits of NUMBER
>> [-no]-mktex=FMT         disable/enable mktexFMT generation (FMT=tex/tfm/pk)
>> -mltex                  enable MLTeX extensions such as \charsubdef
>> -output-comment=STRING  use STRING for DVI file comment instead of date
>>                          (no effect for PDF)
>> -output-directory=DIR   use existing DIR as the directory to write files in
>> -output-format=FORMAT   use FORMAT for job output; FORMAT is `dvi'\'' or
>> `pdf'\''
>> [-no]-parse-first-line  disable/enable parsing of first line of input file
>> -progname=STRING        set program (and fmt) name to STRING
>> -recorder               enable filename recorder
>> [-no]-shell-escape      disable/enable \write18{SHELL COMMAND}
>> -shell-restricted       enable restricted \write18
>> -src-specials           insert source specials into the DVI file
>> -src-specials=WHERE     insert source specials in certain places of
>>                          the DVI file. WHERE is a comma-separated value
>>                          list: cr display hbox math par parend vbox
>> -synctex=NUMBER         generate SyncTeX data for previewers if nonzero
>> -translate-file=TCXNAME use the TCX file TCXNAME
>> -8bit                   make all characters printable by default
>> -help                   display this help and exit
>> -version                output version information and exit
>> 
>> Email bug reports to pdftex at tug.org.'
>> + tex_args=
>> + case $tex_help in
>> + tex_args=' --file-line-error'
>> + false
>> + test -n ''
>> + test 0 -ne 0
>> + test '!' -r
>> 
>> /var/folders/wl/xtd1693n1jsfff4c_zl06vgw0000gn/T//t2d19553/src/DDIwR-manual.tex
>> + false 'Reverting to ./DDIwR.Rcheck/DDIwR-manual.tex ...'
>> + filename_input=/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
>> + test -n ''
>> + test latex = texinfo
>> + test '' = t
>> + :
>> ++ get_xref_files DDIwR-manual
>> ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
>> ++ test -s DDIwR-manual.log
>> +++ sed -n '1s/^\(.\).*$/\1/p;q' DDIwR-manual.log
>> ++ first_character=T
>> ++ test xT = 'x\'
>> ++ test xT = 'x'\'''
>> ++ test xT = x@
>> ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
>> ++ test -s DDIwR-manual.aux
>> ++ continue
>> ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
>> ++ test -s 'DDIwR-manual.??'
>> ++ continue
>> ++ for this_file in '"$1".?o?' '"$1".aux' '"$1".??' '"$1".idx'
>> ++ test -s DDIwR-manual.idx
>> ++ continue
>> ++ echo ''
>> + orig_xref_files=
>> + test -n ''
>> + test -n bibtex
>> + test -r DDIwR-manual.aux
>> ++ echo ''
>> ++ sed 's!.*\.aux!!g;
>>                        s!./DDIwR-manual\.[^ ]o[^ ]!!g;
>>                        s/^[ ]*//;s/[ ]*$//'
>> + index_files=
>> + test -n makeindex
>> + test -n ''
>> + cmd='pdflatex  --file-line-error'
>> + false 'Running pdflatex  --file-line-error
>> /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex ...'
>> + pdflatex --file-line-error /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
>> This is pdfTeX, Version 3.14159265-2.6-1.40.15 (TeX Live 2014) (preloaded
>> format=pdflatex)
>> restricted \write18 enabled.
>> entering extended mode
>> (/Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex
>> LaTeX2e <2014/05/01>
>> Babel <3.9k> and hyphenation patterns for 78 languages loaded.
>> 
>> (/usr/local/texlive/2014/texmf-dist/tex/latex/base/book.cls
>> Document Class: book 2007/10/19 v1.4h Standard LaTeX document class
>> (/usr/local/texlive/2014/texmf-dist/tex/latex/base/bk10.clo))
>> 
>> ! LaTeX Error: File `Rd.sty' not found.
>> 
>> Type X to quit or <RETURN> to proceed,
>> or enter new name. (Default extension: sty)
>> 
>> Enter file name:
>> /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4: Emergency stop.
>> <read *>
>> 
>> l.4 \usepackage
>>               {makeidx}^^M
>> /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4:  ==> Fatal error
>> occurred, no
>> output PDF file produced!
>> Transcript written on DDIwR-manual.log.
>> + echo '/usr/bin/texi2dvi: pdflatex exited with bad status, quitting.'
>> /usr/bin/texi2dvi: pdflatex exited with bad status, quitting.
>> + echo '/usr/bin/texi2dvi: see DDIwR-manual.log for errors.'
>> /usr/bin/texi2dvi: see DDIwR-manual.log for errors.
>> + test '' = t
>> + exit 1
>> ###
>> 
>> 
>> This sends me to DDIwR-manual.log, which as far as I can see is related to
>> not being able to \read from terminal in nonstop modes:
>> 
>> ###
>> /Users/dusadrian/DDIwR.Rcheck/DDIwR-manual.tex:4: Emergency stop.
>> <read *>
>> 
>> l.4 \usepackage
>>               {makeidx}^^M
>> *** (cannot \read from terminal in nonstop modes)
>> ###
>> 
>> Any further advice is welcome, thank you very much again,
>> Adrian
>> 
>> 
>> --
>> Adrian Dusa
>> University of Bucharest
>> Romanian Social Data Archive
>> Soseaua Panduri nr.90
>> 050663 Bucharest sector 5
>> Romania
>> 
>>        [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From rmh at temple.edu  Mon Mar 30 04:21:17 2015
From: rmh at temple.edu (Richard M. Heiberger)
Date: Sun, 29 Mar 2015 22:21:17 -0400
Subject: [R-SIG-Mac] [R] A problem someone should know about
In-Reply-To: <5518AE15.9030308@auckland.ac.nz>
References: <300ADC7E-A143-4193-8A88-171CA053B721@mensa.org.au>
	<5518AE15.9030308@auckland.ac.nz>
Message-ID: <CAGx1TMBbdDQOf_eFCo0f-AXgwQk0r9VmpocKVqOia8dXkfSxDg@mail.gmail.com>

This looks like a specific Macintosh error that appears at random intervals.
I get it at random, and unreproducible times.  I reported it (or
perhaps a close relative)
to the r-sig-mac list in September 2014.

Rich


On Sun, Mar 29, 2015 at 9:59 PM, Rolf Turner <r.turner at auckland.ac.nz> wrote:
> On 30/03/15 11:52, Ian Lester wrote:
>>
>> I?m a novice and this message looks like it shouldn?t be ignored. Someone
>> who knows what they?re doing should probably take a look.
>> Thanks
>> Ian Lester
>>
>>> logfat.lm<-(lm(body.fat~log(BMI)))
>>> plot(logfat)
>>
>> Error in plot(logfat) : object 'logfat' not found
>>>
>>> plot(logfat.lm)
>>
>> Hit <Return> to see next plot:
>> Hit <Return> to see next plot:
>> Hit <Return> to see next plot:
>> Mar 29 18:10:18 iansimac.gateway rsession[69550] <Error>: Error: this
>> application, or a library it uses, has passed an invalid numeric
>> value (NaN, or not-a-number) to CoreGraphics API. This is a serious
>> error and contributes to an overall degradation of system stability
>> and reliability. This notice is a courtesy: please fix this problem.
>> It will become a fatal error in an upcoming update.
>
>
> Please make your examples *reproducible* as the posting guide requests.
>
> I *presume* that your data are the "fat" data from the "UsingR" package,
> which you did not mention.
>
> After installing and loading "UsingR" I did
>
>> logfat.lm <- lm(body.fat~log(BMI),data=fat)
>> plot(logfat.lm)
>
> and got a sequence of plots, with no error thrown. It would appear that
> whatever is causing the error that you saw is peculiar to your system.
>
> cheers,
>
> Rolf Turner
>
> --
> Rolf Turner
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
> Home phone: +64-9-480-4619
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From iandgow at gmail.com  Sun Mar 15 21:54:42 2015
From: iandgow at gmail.com (Ian Gow)
Date: Sun, 15 Mar 2015 20:54:42 -0000
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <web-552058643@cgpsrv2.cis.mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
Message-ID: <CBA334C0-7821-4B52-921B-00039FA21648@gmail.com>

I think it's driven by the PATH variable, which appears to differ for me 
between RStudio and R from Terminal on the one hand and R.app on the 
other.

> Sys.getenv("PATH")
[1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
> Sys.which("pdflatex")
pdflatex
       ""

If I add

Sys.setenv(PATH=paste(Sys.getenv("PATH"),"/opt/local/bin", sep=":"))

to ~/.Rprofile then R.app finds pdflatex (from MacPorts in my case).

> Sys.which("pdflatex")
                  pdflatex
"/opt/local/bin/pdflatex"
> Sys.getenv("PATH")
[1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/local/bin"


On 15 Mar 2015, at 16:46, John Fox wrote:

> Dear list members,
>
> I need to determine whether pdflatex is installed and have been doing 
> that via Sys.which("pdflatex"). This works when R is run in a terminal 
> window (or in RStudio):
>
>  > Sys.which("pdflatex")
>                pdflatex
>  "/usr/texbin/pdflatex"
>
> but not from R.app:
>
>  > Sys.which("pdflatex")
>  pdflatex
>        ""
>
> The session info is the same in both cases:
>
> -------------- snip ----------------
>
>> sessionInfo()
> R version 3.1.3 (2015-03-09)
> Platform: x86_64-apple-darwin13.4.0 (64-bit)
> Running under: OS X 10.10.2 (Yosemite)
>
> locale:
> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> -------------- snip ----------------
>
> Why is the result different? Is there a better way to check for the 
> presence of pdflatex?
>
> Any help would be appreciated.
>
> Thanks,
> John
>
> ------------------------------------------------
> John Fox, Professor
> McMaster University
> Hamilton, Ontario, Canada
> http://socserv.mcmaster.ca/jfox/
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From jj at rstudio.com  Tue Mar 17 11:21:19 2015
From: jj at rstudio.com (JJ Allaire)
Date: Tue, 17 Mar 2015 10:21:19 -0000
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
Message-ID: <CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>

Sounds like this may be targeted at fixing the OS X Yosemite bug
wherein some environment variables for GUI applications are
duplicated:

http://tex.stackexchange.com/questions/208181/why-did-my-tex-related-gui-program-stop-working-in-mac-os-x-yosemite

Until Apple fixes this issue I think that GUI applications need to
clean the duplicated environment variables received at launch time.
Here's what we do in RStudio:

https://github.com/rstudio/rstudio/commit/09c9be12




On Mon, Mar 16, 2015 at 9:12 PM, John Fox <jfox at mcmaster.ca> wrote:
> Dear Simon,
>
>> -----Original Message-----
>> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
>> Sent: March-16-15 3:57 PM
>> To: jfox at mcmaster.ca
>> Cc: Berend Hasselman; r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>>
>>
>> > On Mar 16, 2015, at 3:43 PM, John Fox <jfox at mcmaster.ca> wrote:
>> >
>> > Dear all,
>> >
>> > I've now implemented Simon's solution, setting the path in the .onLoad()
>> function of the Rcmdr package and resetting it to its pre-existing value in
>> .onUnload(). This seems to work fine for me and, I hope, will be a more
>> robust solution.
>> >
>>
>> I don't think messing with PATH of the R process is a good idea - as a user I'd
>> be somewhat unpleasantly surprised if you changed the PATH of my running
>> session. I'm not quite sure what's your intention, but I would suggest using
>> the setting to locate the binary to run it explicitly - that is what R does
>> normally. If you rely on some scripts that you don't control, then I would
>> suggest setting it in the shell that you start the script with, but not in the R
>> process itself.
>
> That occurred to me, but the problem arises when a function in the rmarkdown package calls pandoc and pandoc fails to run pdflatex. I don't think that I have control over this.
>
> I'm cc'ing J. J. Alaire, the maintainer of the rmarkdown package in case he sees a solution in that package. The problem doesn't of course occur when rmarkdown is run from RStudio (or a terminal) but only from R.app, as I explained initially.  (J.J.: Please let me know if this is unclear, and I can send you the rest of this thread.)
>
> OTOH, I doubt whether Rcmdr users will care that the package alters the PATH of the R process (though it would be better to avoid that).
>
> Best,
>  John
>
>>
>> Cheers,
>> Simon
>>
>>
>>
>> > Thanks again to everyone for their help.
>> >
>> > John
>> >
>> >> -----Original Message-----
>> >> From: R-SIG-Mac [mailto:r-sig-mac-bounces at r-project.org] On Behalf Of
>> >> John Fox
>> >> Sent: March-16-15 2:45 PM
>> >> To: 'Berend Hasselman'
>> >> Cc: r-sig-mac at r-project.org
>> >> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> >>
>> >> Dear Berend and Simon,
>> >>
>> >> I've now tried Berend's solution and it appears to work fine: If
>> >> necessary, I add /usr/texbin to the path when the Rcmdr GUI starts up
>> >> and restore the path to its previous state when it closes.
>> >>
>> >> I agree that Simon's solution will be more flexible since it should
>> >> work if pdflatex is located elsewhere (as long as it's on the path
>> >> reported by path_helper), and I'll give that a try as well.
>> >>
>> >> Thanks again for all the help,
>> >> John
>> >>
>> >>> -----Original Message-----
>> >>> From: Berend Hasselman [mailto:bhh at xs4all.nl]
>> >>> Sent: March-16-15 2:34 PM
>> >>> To: jfox at mcmaster.ca
>> >>> Cc: Simon Urbanek; r-sig-mac at r-project.org
>> >>> Subject: Re: [R-SIG-Mac] checking for pdflatex
>> >>>
>> >>> John,
>> >>>
>> >>>> On 16-03-2015, at 18:53, John Fox <jfox at mcmaster.ca> wrote:
>> >>>>
>> >>>> Dear Berend,
>> >>>> ?.
>> >>>>>
>> >>>>> For what it?s worth: I have the following code in the .First
>> >>>>> function in
>> >>>>> ~/.Rprofile:
>> >>>>> (R 3.1.3 on OS X Yosemite)
>> >>>>>
>> >>>>>   if( .Platform$GUI == "AQUA" ) {
>> >>>>>       # this appends /usr/local/bin to what is already in PATH
>> >>>>>       # by default this is already in PATH (at least in 10.6.8)
>> >>>>>       # so remove any duplicated items
>> >>>>>       z <- Sys.getenv("PATH")
>> >>>>>       z <- unlist(strsplit(z,.Platform$path.sep,fixed=TRUE))
>> >>>>>       # add path to MacTeX executables for OS X Yosemite (which
>> >>>>> has a
>> >>> bug)
>> >>>>>       # in Terminal it is added automatically
>> >>>>>       z[length(z)+1] <- "/usr/texbin"
>> >>>>>
>> >>> Sys.setenv(PATH=paste(z[!duplicated(z)],collapse=.Platform$path.sep)
>> >>> )
>> >>>>>   }
>> >>>>
>> >>>> This should work fine if pdflatex is in /usr/texbin, which I now
>> >>>> understand is
>> >>> by far the most common case (and is the case on my Mac).
>> >>>>
>> >>>> Do you mind if I adapt your code for the Rcmdr? I can fix the path
>> >>>> in this
>> >>> manner at startup of the Rcmdr GUI and restore it to its initial
>> >>> value on exit from the GUI.
>> >>>>
>> >>>
>> >>> Go right ahead. Don?t forget it assumes MacTeX.
>> >>>
>> >>> But do also have a look Simon?s suggestion of using path_helper,
>> >>> which seems more flexible than my solution:
>> >>>
>> >>> I tried this in R-GUI
>> >>>
>> >>> system2("/usr/libexec/path_helper","-s", stdout=TRUE)
>> >>>
>> >>> and got this answer
>> >>>
>> >>> [1]
>> >>> "PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/u
>> >>> sr
>> >>> /texbi
>> >>> n\"; export PATH;?
>> >>>
>> >>> which will have to be fiddled with to get something that is usable.
>> >>>
>> >>> Berend
>> >>>
>> >>>
>> >>>> Thanks for this,
>> >>>> John
>> >>>>
>> >>>>>
>> >>>>> Berend
>> >>>>
>> >>>>
>> >>>> ---
>> >>>> This email has been checked for viruses by Avast antivirus software.
>> >>>> http://www.avast.com
>> >>>>
>> >>
>> >>
>> >> ---
>> >> This email has been checked for viruses by Avast antivirus software.
>> >>
>> >> _______________________________________________
>> >> R-SIG-Mac mailing list
>> >> R-SIG-Mac at r-project.org
>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> >
>> >
>> > ---
>> > This email has been checked for viruses by Avast antivirus software.
>> > http://www.avast.com
>> >
>
>
> ---
> This email has been checked for viruses by Avast antivirus software.
> http://www.avast.com
>


From jj at rstudio.com  Tue Mar 17 16:32:45 2015
From: jj at rstudio.com (JJ Allaire)
Date: Tue, 17 Mar 2015 15:32:45 -0000
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <88172F93-EC5C-4C87-87B1-FD5116057EFD@r-project.org>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
	<F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>
	<001001d060c0$83b6b180$8b241480$@mcmaster.ca>
	<88172F93-EC5C-4C87-87B1-FD5116057EFD@r-project.org>
Message-ID: <CAKw=oCx-Z7y1WmndanxsBPDgjnsKawwheWCmokQd55PqRShbfw@mail.gmail.com>

>
> I guess that would be less disruptive. If the user has picked a custom order at least it would be preserved. But as noted earlier I also think that this should be better fixed in rmarkdown - preferably by using the full path so it doesn't depend on PATH. I'm told RStudio is providing pandoc binaries so I would guess it's easy for them to guarantee the functionality but JJ is included so he can weigh in.

rmarkdown calls pandoc which in turn calls pdflatex. We have some
logic to discover the path to pdflatex and forward that on to pandoc
here:

https://github.com/rstudio/rmarkdown/blob/master/R/util.R#L186-L203

I'm not sure in this particular case why the right version isn't
found. What happens if you call rmarkdown:::find_program("pdflatex")
from the R prompt.

Would be happy to make any change you suggest to the way we forward
paths on to pandoc in order to make this work.


From jj at rstudio.com  Tue Mar 17 17:20:38 2015
From: jj at rstudio.com (JJ Allaire)
Date: Tue, 17 Mar 2015 16:20:38 -0000
Subject: [R-SIG-Mac] checking for pdflatex
In-Reply-To: <002001d060ca$17451cd0$45cf5670$@mcmaster.ca>
References: <web-552058643@cgpsrv2.cis.mcmaster.ca>
	<A075C353-5F44-4D6D-B83E-FB44849173AE@gmail.com>
	<001701d05f6e$7101f7a0$5305e6e0$@mcmaster.ca>
	<15DA4C2E-5DA2-452D-AE89-B5123B2C3604@r-project.org>
	<001201d06005$dcc33cf0$9649b6d0$@mcmaster.ca>
	<6EA4D465-8A5E-4DC6-9E06-B29EBE2C1196@xs4all.nl>
	<002901d06012$17baa490$472fedb0$@mcmaster.ca>
	<F4D0276A-D21D-44EF-B18D-03ECB6AEE937@xs4all.nl>
	<19490_1426531541_t2GIjfOE002405_002e01d06019$4dd2bd90$e97838b0$@mcmaster.ca>
	<003801d06021$6bebd7f0$43c387d0$@mcmaster.ca>
	<6B4AD6F6-3CE9-4D22-B0FD-785FB650F0DC@r-project.org>
	<004e01d0604f$641a4330$2c4ec990$@mcmaster.ca>
	<CAKw=oCxbsojA-DS3vo+sRNHfY9qsDFw=if0p0MnT7QzgHpAHnA@mail.gmail.com>
	<F2BD0102-7571-41AE-AE3B-A13EE548FDD0@r-project.org>
	<001001d060c0$83b6b180$8b241480$@mcmaster.ca>
	<88172F93-EC5C-4C87-87B1-FD5116057EFD@r-project.org>
	<CAKw=oCx-Z7y1WmndanxsBPDgjnsKawwheWCmokQd55PqRShbfw@mail.gmail.com>
	<002001d060ca$17451cd0$45cf5670$@mcmaster.ca>
Message-ID: <CAKw=oCw0iw1eZrTzVvqATbSkDkt1z9TN3XHj6Y7AG20CERW0AA@mail.gmail.com>

>
> Actually, I already looked at the code in rmarkdown and tried exactly this. On my Mac under R.app, where the default path is
>
>> Sys.getenv("PATH")
> [1] "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"
>
>  I get
>
>> rmarkdown:::find_program("pdflatex")
> [1] ""
>

Sorry if this was part of the thread already, but where is your
pdflatex? In my configuration based on MacTeX it's in /usr/texbin. In
RStudio we get this on the PATH by reading the OSX PATH configuration
(i.e. /etc/paths and /etc/paths.d/*).


