From j.van_den_hoff at fzd.de  Thu May  1 13:16:51 2008
From: j.van_den_hoff at fzd.de (Joerg van den Hoff)
Date: Thu, 1 May 2008 13:16:51 +0200
Subject: [R-SIG-Mac] problem with X11() after install of 2.7.0.
In-Reply-To: <32719755-7638-4E46-BAC5-796E7E4C9035@r-project.org>
References: <20080430143432.GA11438@marco.fz-rossendorf.de>
	<2C0D157B-2283-45AD-9AA5-DFEB9ABE2793@r-project.org>
	<20080430153149.GB11438@marco.fz-rossendorf.de>
	<32719755-7638-4E46-BAC5-796E7E4C9035@r-project.org>
Message-ID: <20080501111651.GE19218@claude.fz-rossendorf.de>

On Wed, Apr 30, 2008 at 11:46:45AM -0400, Simon Urbanek wrote:
> 
> On Apr 30, 2008, at 11:31 AM, Joerg van den Hoff wrote:
> 
> >On Wed, Apr 30, 2008 at 10:55:38AM -0400, Simon Urbanek wrote:
> >>
> >>On Apr 30, 2008, at 10:34 AM, Joerg van den Hoff wrote:
> >>
> >>>hi everybody,
> >>>
> >>>today  I  decided  (unwisely,  it  appears) to install 2.7.0
> >>>under MacOS 10.4.7. now, when I  run  R  from  the  terminal
> >>>command line and do something like
> >>>
> >>>plot(1:10)
> >>>
> >>>a  X11 graphic window pops up, the 10 points are drawn on an
> >>>otherwise blank canvas (no axes, no labels, no  ticks  etc),
> >>>CPU  time  goes  to 100% and stays there and R does not come
> >>>back to the prompt ("hangs"). I tried to `ktrace'  this  but
> >>>this  produced a one Gig logfile in a few seconds from which
> >>>a learned nothing ...
> >>>
> >>>a quick search of the  archive  did  not  yield  a  hit.  so
> >>>please: what's going on here?
> >>>
> >>
> >
> >thanks a lot for this "real time" response.
> >
> >>Ancient system? As a very first step for your own good I'd recommend
> >
> >well, no. actually I _have_ 10.4.11 installed (I somehow was sure  
> >it's 10.4.7,
> >still. that's probably alzheimer casting his shadow :-)).
> >>updating your system which is way out of date (the current version
> >>Tiger is 10.4.11). Then if the issue persists, please report your  
> >>full
> >>sessionInfo() and machine used. The above works without problems on
> >>both 10.5.2 and 10.4.11 (Mac Pro and iMac).
> >10.5.2 is no option for me since I need a working fullscreen X11 mode.
> >I now checked it again both on a dual 2Ghz G5 PPC and a 1.5 GHz  
> >power book PPC G4,
> >both running
> >10.4.11: same problem. actually, R hangs only when really plotting. so
> >I can first open the device with X11() and get back to the R prompt.  
> >only
> >when executing the `plot(1:10)' R apparently hangs and everything is  
> >as described
> >in my first mail.
> >
> >here comes the session info:
> >
> >R version 2.7.0 (2008-04-22)
> >powerpc-apple-darwin8.10.1
> >
> 
> Hmm - I have tried even the PowerPC version now and it works without  
> problems for me.
> Are you using Apple's X11 or something else? Also do you get the error  
> in the "regular" (non-root) mode?
> 
> Thanks,
> Simon

simon,

as a follow up: I just stumbled over the  discussion on r-devel
concerning speed of the new X11 etc. devices. I understand cairo graphics
is used now which provides antialiasing but is slow (I'm sufficiently far
on the "want to get my work done with R" side that I'm not in sync with
what's going on in the area of graphic libraries development...).

anyway, in that mail there was a remark that using X11(type=Xlib) restores(?)
the old X11 device behaviour (fast, but "ugly" (I personally don't care for this
"on-screen")).

so: I just tried this with 2.7.0. on my power book: after starting R issue

X11(type="Xlib")
plot(1:10)

this just works as 

X11()
plot(1:10)

did with 2.6.2. that suffices more or less as a work around for me (but probably would imply a lot
of editing of existing code to open X11() everywhere correctly).

now comes the really strange point: since yesterday I've tried repeatedly to use

X11()
plot(1:10)

directly after starting 2.7.0 on both my PPCs with the result 
described in my previous mails to the list. but I now discovered that doing
instead

X11(type="Xlib")
plot(1:10)
graphics.off()
X11()
plot(1:10)

*does* produce the complete plot. and even more strangely, now closing R altogether, 
restarting and issuing directly

plot(1:10)

now works, too. I take every oath that I'm otherwise not seeing white mice
crawling all over the place. the first thing (X11() works after previously
opening X11(type = "Xlib") ) I might comprehend (something goes on in the
running R process) but the latter (now it works directly after restart)
I find really strange: what permanent changes to the file system/run time 
environment have occured?

what's going on here? the effect was definitely there. it now looks like
issuing _once_ X11(type = "Xlib") followed by graphics.off(); X11()
triggered some action which made the "new" X11() device working.
what could this be? 

all in all it seems my problem went away permanently (since now the
plots procede even after restart of R), but I'd say over all the
observed behaviour is sort of alarming. does somebody have any
idea what's happening here? 

regards,

joerg

PS: I just checked that evrything remains OK even after restarting
the X server.


From simorita at ncsu.edu  Thu May  1 14:48:50 2008
From: simorita at ncsu.edu (Shelah Morita)
Date: Thu, 01 May 2008 14:48:50 +0200
Subject: [R-SIG-Mac] [Fwd:  R behind a proxy server]
Message-ID: <4819BC32.9030901@ncsu.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080501/3fc48be8/attachment.pl>

From khansen at stat.Berkeley.EDU  Thu May  1 15:01:36 2008
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Thu, 1 May 2008 06:01:36 -0700
Subject: [R-SIG-Mac] [Fwd:  R behind a proxy server]
In-Reply-To: <4819BC32.9030901@ncsu.edu>
References: <4819BC32.9030901@ncsu.edu>
Message-ID: <23EB87BB-1E2E-4CAA-B5BA-7BD367733989@stat.berkeley.edu>

Read ?download.file - and browse the archives. This question has been  
asked 100s of times (perhaps not on this list but certainly on other R- 
related lists).

Kasper

On May 1, 2008, at 5:48 AM, Shelah Morita wrote:

> Hi,
>
> Does no one have a solution for me? Or does this not make sense?
>
> Hopefully,
>
> Shelah
>
> -------- Original Message --------
> Subject: 	[R-SIG-Mac] R behind a proxy server
> Date: 	Mon, 28 Apr 2008 17:21:14 +0200
> From: 	Shelah Morita <simorita at ncsu.edu>
> Reply-To: 	simorita at ncsu.edu
> Organization: 	NSF International Research Fellow
> To: 	r-sig-mac at stat.math.ethz.ch
>
>
>
> Hi,
>
> I need to update my packages and I cannot seem to connect to CRAN.  I
> get the following error:
>
>> Error in file(con, "r") : unable to open connection
>> In addition: Warning message:
>> In file(con, "r") : unable to connect to 'cran.r-project.org' on  
>> port 80.
> I think it's because I am behind a proxy server here at the  
> university.
>
> Can you please tell me how to fix this?  I am using the gui version  
> and
> can't seem to find a menu with an option to set a proxy server.
>
> Thanks,
>
> Shelah
> -- 
>
> Shelah Morita Ph.D.
> NSF International Research Fellow
> Department of Botany and Zoology
> University of Stellenbosch
> Private Bag X1, Matieland 7602
> SOUTH AFRICA
>
> +27 21 808-3232 Office
> +27 21 808-2405 Fax
> +27 79 774-8372 Cell
> +1 202 684-6849 (Voice Mail)
> Skype:bellamyia
>
> http://pangonid.net
>
>    _ _
>   ( \ !
>    `.\| ,
> <!||)( )(O\______________
>     /|\ `^
>    / / |
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
>
> -- 
>
> Shelah Morita Ph.D.
> NSF International Research Fellow
> Department of Botany and Zoology
> University of Stellenbosch
> Private Bag X1, Matieland 7602
> SOUTH AFRICA
>
> +27 21 808-3232 Office
> +27 21 808-2405 Fax
> +27 79 774-8372 Cell
> +1 202 684-6849 (Voice Mail)
> Skype:bellamyia
>
> http://pangonid.net
>
>    _ _
>   ( \ !
>    `.\| ,
> <!||)( )(O\______________
>     /|\ `^
>    / / |
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From zhujack at mail.nih.gov  Thu May  1 15:13:28 2008
From: zhujack at mail.nih.gov (Jack Zhu)
Date: Thu, 01 May 2008 09:13:28 -0400
Subject: [R-SIG-Mac] Error: package 'Biobase' could not be loaded -
 libiconv.2.dylib problem
In-Reply-To: <mailman.12043.1209317963.4224.r-sig-mac@stat.math.ethz.ch>
Message-ID: <C43F3A38.4E0D%zhujack@mail.nih.gov>

Hi,

After I upgraded the R to 2.7 in my Mac OSX 10.4 and got the following error
message when snapCGH was loaded:

> library(snapCGH)
Loading required package: tilingArray
Loading required package: Biobase
Error in dyn.load(file, DLLpath = DLLpath, ...) :
  unable to load shared library
'/Library/Frameworks/R.framework/Versions/2.7/Resources/library/Biobase/libs
/i386/Biobase.so':
  
dlopen(/Library/Frameworks/R.framework/Versions/2.7/Resources/library/Biobas
e/libs/i386/Biobase.so, 6): Library not loaded: /usr/lib/libiconv.2.dylib
  Referenced from: 
/Library/Frameworks/R.framework/Versions/2.7/Resources/library/Biobase/libs/
i386/Biobase.so
  Reason: Incompatible library version: Biobase.so requires version 7.0.0 or
later, but libiconv.2.dylib provides version 5.0.0
Error: package 'Biobase' could not be loaded

I don't know what exactly was wrong here.  I tried to install
libiconv.2.dylib and did not found the library.

Your help will be greatly appreciated.

Jack
-- 
Yuelin (Jack) Zhu

NIH/NCI/CCR/Genetics Branch
Tel: (301)496-4527
FAX:   (301) 402-3241
E-mail: zhujack at mail.nih.gov
Web: http://meltzerlab.nci.nih.gov/


From simorita at ncsu.edu  Thu May  1 15:39:41 2008
From: simorita at ncsu.edu (Shelah Morita)
Date: Thu, 01 May 2008 15:39:41 +0200
Subject: [R-SIG-Mac] [Fwd:  R behind a proxy server]
In-Reply-To: <23EB87BB-1E2E-4CAA-B5BA-7BD367733989@stat.berkeley.edu>
References: <4819BC32.9030901@ncsu.edu>
	<23EB87BB-1E2E-4CAA-B5BA-7BD367733989@stat.berkeley.edu>
Message-ID: <4819C81D.8020502@ncsu.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080501/6db9fa14/attachment.pl>

From simon.urbanek at r-project.org  Thu May  1 16:11:27 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 1 May 2008 10:11:27 -0400
Subject: [R-SIG-Mac] Error: package 'Biobase' could not be loaded -
	libiconv.2.dylib problem
In-Reply-To: <C43F3A38.4E0D%zhujack@mail.nih.gov>
References: <C43F3A38.4E0D%zhujack@mail.nih.gov>
Message-ID: <6E16B2EB-00CF-49E0-8F2A-C49161F71DDE@r-project.org>

Jack,

please direct this question to a Bioconductor list. I suspect that  
they are building binaries compatible only with Mac OS X 10.5 or  
higher (Tiger comes with iconv v5, Leopard has v7).

Cheers,
Simon


On May 1, 2008, at 9:13 AM, Jack Zhu wrote:

> Hi,
>
> After I upgraded the R to 2.7 in my Mac OSX 10.4 and got the  
> following error
> message when snapCGH was loaded:
>
>> library(snapCGH)
> Loading required package: tilingArray
> Loading required package: Biobase
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>  unable to load shared library
> '/Library/Frameworks/R.framework/Versions/2.7/Resources/library/ 
> Biobase/libs
> /i386/Biobase.so':
>
> dlopen(/Library/Frameworks/R.framework/Versions/2.7/Resources/ 
> library/Biobas
> e/libs/i386/Biobase.so, 6): Library not loaded: /usr/lib/libiconv. 
> 2.dylib
>  Referenced from:
> /Library/Frameworks/R.framework/Versions/2.7/Resources/library/ 
> Biobase/libs/
> i386/Biobase.so
>  Reason: Incompatible library version: Biobase.so requires version  
> 7.0.0 or
> later, but libiconv.2.dylib provides version 5.0.0
> Error: package 'Biobase' could not be loaded
>
> I don't know what exactly was wrong here.  I tried to install
> libiconv.2.dylib and did not found the library.
>
> Your help will be greatly appreciated.
>
> Jack
> -- 
> Yuelin (Jack) Zhu
>
> NIH/NCI/CCR/Genetics Branch
> Tel: (301)496-4527
> FAX:   (301) 402-3241
> E-mail: zhujack at mail.nih.gov
> Web: http://meltzerlab.nci.nih.gov/
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From dds at stowers-institute.org  Thu May  1 17:47:57 2008
From: dds at stowers-institute.org (Stranathan, Dan)
Date: Thu, 1 May 2008 10:47:57 -0500
Subject: [R-SIG-Mac] Question Regarding R, Mac OS X, and Proxy Servers:
Message-ID: <C43F505D.332F%dds@Stowers-Institute.org>

Hello everyone

I have a R question for you. I am new to the wide world of all things R and I am not a scientist or a programmer per se. I'm a Systems Administrator trying to troubleshoot a network issue with R - Specifically related to proxy servers.

Background:
My Institute has a Linus-based Squid proxy server that brokers all http traffic through it. We have 2 versions of the proxy server. One proxy server (used for 99% of our staff) requires the user to manually type a password when prompted. Not all applications are "smart" enough to understand a proxy can since it requires the 2-way process of password negotiation, etc. Our 2nd Proxy server is basically a "wide open door" to the Internet. Only certain managers and the IT dept are allowed to use this proxy. It doesn't require a password at all.

As you may know, the main way to configure proxy settings in OS X is via the System Preferences (the Network Pane has a tab for proxy settings). You can also configure these settings from the Terminal via the networksetup and systemsetup commands too. Both ways achieve the same result. You can also configure your shell session to be "proxy-aware" using the UNIX http_proxy variable in your .bash_profile (I describe this more below)

So far, both Mac OS X 10.4 (Tiger) and 10.5 (Leopard) have worked quite well with our proxy servers. In fact, all "proxy aware" applications such as Safari, iTunes, WebDAV, etc work great (As long as you know your password of course). Even the curl and wget  commands work from the Terminal with once the proper configurations have been made.

My R Problem:
The GUI version of R 2.7.0 (and possibly earlier versions?) does not work with our proxy server correctly. I have tried both of our proxy servers (secure and open) and neither one will allow R to route out to the Internet. Other apps like Safari, curl, etc have no problem getting to the R update site (cran.r-project.org).

Certain command line tools will not honor the Mac OS X global proxy settings. When this happens I usually just add an environmental proxy setting with the "export http_proxy=<my proxy server>" to my .bash_profile, etc and I can get around this problem quite easily. I stumbled across this because the R command line tools (in Terminal and X11) were not honoring the Mac OS X global proxy settings at first, so I had to implement the setting I just described. It works great now. But... I still cant get the R GUI app to peacefully co-exist with my proxy servers, regardless of how I configure the Mac OS X GUI system proxy or the shell environment. Here is the error I get in the R GUI window:

Error in file(con, "r") : cannot open the connection
In addition: Warning message:
In file(con, "r") : unable to connect to 'cran.r-project.org' on port 80.
>



If you can offer any suggestions I would greatly appreciate them!


Thanks!

-Dan


From paboyoun at fhcrc.org  Thu May  1 17:52:23 2008
From: paboyoun at fhcrc.org (Patrick Aboyoun)
Date: Thu, 01 May 2008 08:52:23 -0700
Subject: [R-SIG-Mac] Error: package 'Biobase' could not be loaded
 -	libiconv.2.dylib problem
In-Reply-To: <6E16B2EB-00CF-49E0-8F2A-C49161F71DDE@r-project.org>
References: <C43F3A38.4E0D%zhujack@mail.nih.gov>
	<6E16B2EB-00CF-49E0-8F2A-C49161F71DDE@r-project.org>
Message-ID: <4819E737.8050004@fhcrc.org>

Jack,
Simon is correct. The Mac OS X binaries for BioC 2.2 are built for R 2.7 
on Leopard. I recommend you remove all of the BioC 2.2 packages that you 
have installed and reinstall from source packages using 
biocLite(<<package names>>, type = "source") so the binaries are built 
on your Tiger platform. I would also like to echo Simon's comment and in 
the future please send these comments to the Bioconductor list since 
this is a Bioconductor build issue.


Cheers,
Patrick



Simon Urbanek wrote:
> Jack,
>
> please direct this question to a Bioconductor list. I suspect that 
> they are building binaries compatible only with Mac OS X 10.5 or 
> higher (Tiger comes with iconv v5, Leopard has v7).
>
> Cheers,
> Simon
>
>
> On May 1, 2008, at 9:13 AM, Jack Zhu wrote:
>
>> Hi,
>>
>> After I upgraded the R to 2.7 in my Mac OSX 10.4 and got the 
>> following error
>> message when snapCGH was loaded:
>>
>>> library(snapCGH)
>> Loading required package: tilingArray
>> Loading required package: Biobase
>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>  unable to load shared library
>> '/Library/Frameworks/R.framework/Versions/2.7/Resources/library/Biobase/libs 
>>
>> /i386/Biobase.so':
>>
>> dlopen(/Library/Frameworks/R.framework/Versions/2.7/Resources/library/Biobas 
>>
>> e/libs/i386/Biobase.so, 6): Library not loaded: 
>> /usr/lib/libiconv.2.dylib
>>  Referenced from:
>> /Library/Frameworks/R.framework/Versions/2.7/Resources/library/Biobase/libs/ 
>>
>> i386/Biobase.so
>>  Reason: Incompatible library version: Biobase.so requires version 
>> 7.0.0 or
>> later, but libiconv.2.dylib provides version 5.0.0
>> Error: package 'Biobase' could not be loaded
>>
>> I don't know what exactly was wrong here.  I tried to install
>> libiconv.2.dylib and did not found the library.
>>
>> Your help will be greatly appreciated.
>>
>> Jack
>> -- 
>> Yuelin (Jack) Zhu
>>
>> NIH/NCI/CCR/Genetics Branch
>> Tel: (301)496-4527
>> FAX:   (301) 402-3241
>> E-mail: zhujack at mail.nih.gov
>> Web: http://meltzerlab.nci.nih.gov/
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From khansen at stat.Berkeley.EDU  Thu May  1 18:19:35 2008
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Thu, 1 May 2008 09:19:35 -0700
Subject: [R-SIG-Mac] Question Regarding R, Mac OS X, and Proxy Servers:
In-Reply-To: <C43F505D.332F%dds@Stowers-Institute.org>
References: <C43F505D.332F%dds@Stowers-Institute.org>
Message-ID: <89EE92EA-3BBB-4D16-BE6B-1C7BC6FB6FEA@stat.berkeley.edu>

I am at a loss as to why this does not work anymore, I am sure other  
people will chime in on this.

But regarding the GUI/environment variables, "normal" apps on Mac OS X  
does not see the environment variables you define in (for example)  
~/.bashrc. The recommended way to do this (across all kinds of  
applications) is to create an environment.plist file. A quick Googling  
bought up this page
   http://www.astro.washington.edu/owen/AquaEnvVar.html
which i think is still current.

A more R-centric approach is to use
  R> Sys.setenv("VARIABLE" = "value")
  example: Sys.setenv("DISPLAY" = ":0.0")
which sets an environment variable from inside R. You could place this  
command in (for example) ~/.Rprofile which is a user-based startup   
script location for R. There is also a systems-wide Rprofile.

Kasper


On May 1, 2008, at 8:47 AM, Stranathan, Dan wrote:

> Hello everyone
>
> I have a R question for you. I am new to the wide world of all  
> things R and I am not a scientist or a programmer per se. I'm a  
> Systems Administrator trying to troubleshoot a network issue with R  
> - Specifically related to proxy servers.
>
> Background:
> My Institute has a Linus-based Squid proxy server that brokers all  
> http traffic through it. We have 2 versions of the proxy server. One  
> proxy server (used for 99% of our staff) requires the user to  
> manually type a password when prompted. Not all applications are  
> "smart" enough to understand a proxy can since it requires the 2-way  
> process of password negotiation, etc. Our 2nd Proxy server is  
> basically a "wide open door" to the Internet. Only certain managers  
> and the IT dept are allowed to use this proxy. It doesn't require a  
> password at all.
>
> As you may know, the main way to configure proxy settings in OS X is  
> via the System Preferences (the Network Pane has a tab for proxy  
> settings). You can also configure these settings from the Terminal  
> via the networksetup and systemsetup commands too. Both ways achieve  
> the same result. You can also configure your shell session to be  
> "proxy-aware" using the UNIX http_proxy variable in  
> your .bash_profile (I describe this more below)
>
> So far, both Mac OS X 10.4 (Tiger) and 10.5 (Leopard) have worked  
> quite well with our proxy servers. In fact, all "proxy aware"  
> applications such as Safari, iTunes, WebDAV, etc work great (As long  
> as you know your password of course). Even the curl and wget   
> commands work from the Terminal with once the proper configurations  
> have been made.
>
> My R Problem:
> The GUI version of R 2.7.0 (and possibly earlier versions?) does not  
> work with our proxy server correctly. I have tried both of our proxy  
> servers (secure and open) and neither one will allow R to route out  
> to the Internet. Other apps like Safari, curl, etc have no problem  
> getting to the R update site (cran.r-project.org).
>
> Certain command line tools will not honor the Mac OS X global proxy  
> settings. When this happens I usually just add an environmental  
> proxy setting with the "export http_proxy=<my proxy server>" to  
> my .bash_profile, etc and I can get around this problem quite  
> easily. I stumbled across this because the R command line tools (in  
> Terminal and X11) were not honoring the Mac OS X global proxy  
> settings at first, so I had to implement the setting I just  
> described. It works great now. But... I still cant get the R GUI app  
> to peacefully co-exist with my proxy servers, regardless of how I  
> configure the Mac OS X GUI system proxy or the shell environment.  
> Here is the error I get in the R GUI window:
>
> Error in file(con, "r") : cannot open the connection
> In addition: Warning message:
> In file(con, "r") : unable to connect to 'cran.r-project.org' on  
> port 80.
>>
>
>
>
> If you can offer any suggestions I would greatly appreciate them!
>
>
> Thanks!
>
> -Dan
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From simon.urbanek at r-project.org  Thu May  1 20:03:56 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 1 May 2008 14:03:56 -0400
Subject: [R-SIG-Mac] Question Regarding R, Mac OS X, and Proxy Servers:
In-Reply-To: <C43F505D.332F%dds@Stowers-Institute.org>
References: <C43F505D.332F%dds@Stowers-Institute.org>
Message-ID: <23289B2B-F0A7-4C3F-A073-451AEAC1B330@r-project.org>

Dan,

R is using its own cross-platform code for HTTP/FTP connections and  
relies on the usual http_proxy env variable. Hence your best bet is to  
set http_proxy in .Rprofile as Kasper suggested.

Determining proxy settings from the preferences is very messy and  
unreliable (due to PAC proxies), so the only alternative would be to  
use Apple's CF network API for downloads. Given that it only adds  
complexity (event loop issues etc.) with no obvious functional benefit  
it is questionable whether it's worth the hassle.

Cheers,
Simon


On May 1, 2008, at 11:47 AM, Stranathan, Dan wrote:

> Hello everyone
>
> I have a R question for you. I am new to the wide world of all  
> things R and I am not a scientist or a programmer per se. I'm a  
> Systems Administrator trying to troubleshoot a network issue with R  
> - Specifically related to proxy servers.
>
> Background:
> My Institute has a Linus-based Squid proxy server that brokers all  
> http traffic through it. We have 2 versions of the proxy server. One  
> proxy server (used for 99% of our staff) requires the user to  
> manually type a password when prompted. Not all applications are  
> "smart" enough to understand a proxy can since it requires the 2-way  
> process of password negotiation, etc. Our 2nd Proxy server is  
> basically a "wide open door" to the Internet. Only certain managers  
> and the IT dept are allowed to use this proxy. It doesn't require a  
> password at all.
>
> As you may know, the main way to configure proxy settings in OS X is  
> via the System Preferences (the Network Pane has a tab for proxy  
> settings). You can also configure these settings from the Terminal  
> via the networksetup and systemsetup commands too. Both ways achieve  
> the same result. You can also configure your shell session to be  
> "proxy-aware" using the UNIX http_proxy variable in  
> your .bash_profile (I describe this more below)
>
> So far, both Mac OS X 10.4 (Tiger) and 10.5 (Leopard) have worked  
> quite well with our proxy servers. In fact, all "proxy aware"  
> applications such as Safari, iTunes, WebDAV, etc work great (As long  
> as you know your password of course). Even the curl and wget   
> commands work from the Terminal with once the proper configurations  
> have been made.
>
> My R Problem:
> The GUI version of R 2.7.0 (and possibly earlier versions?) does not  
> work with our proxy server correctly. I have tried both of our proxy  
> servers (secure and open) and neither one will allow R to route out  
> to the Internet. Other apps like Safari, curl, etc have no problem  
> getting to the R update site (cran.r-project.org).
>
> Certain command line tools will not honor the Mac OS X global proxy  
> settings. When this happens I usually just add an environmental  
> proxy setting with the "export http_proxy=<my proxy server>" to  
> my .bash_profile, etc and I can get around this problem quite  
> easily. I stumbled across this because the R command line tools (in  
> Terminal and X11) were not honoring the Mac OS X global proxy  
> settings at first, so I had to implement the setting I just  
> described. It works great now. But... I still cant get the R GUI app  
> to peacefully co-exist with my proxy servers, regardless of how I  
> configure the Mac OS X GUI system proxy or the shell environment.  
> Here is the error I get in the R GUI window:
>
> Error in file(con, "r") : cannot open the connection
> In addition: Warning message:
> In file(con, "r") : unable to connect to 'cran.r-project.org' on  
> port 80.
>>
>
>
>
> If you can offer any suggestions I would greatly appreciate them!
>
>
> Thanks!
>
> -Dan
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From ripley at stats.ox.ac.uk  Thu May  1 20:27:18 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 1 May 2008 19:27:18 +0100 (BST)
Subject: [R-SIG-Mac] Question Regarding R, Mac OS X, and Proxy Servers:
In-Reply-To: <23289B2B-F0A7-4C3F-A073-451AEAC1B330@r-project.org>
References: <C43F505D.332F%dds@Stowers-Institute.org>
	<23289B2B-F0A7-4C3F-A073-451AEAC1B330@r-project.org>
Message-ID: <alpine.LFD.1.10.0805011925350.8357@gannet.stats.ox.ac.uk>

On Thu, 1 May 2008, Simon Urbanek wrote:

> Dan,
>
> R is using its own cross-platform code for HTTP/FTP connections and relies on 
> the usual http_proxy env variable. Hence your best bet is to set http_proxy 
> in .Rprofile as Kasper suggested.

Or (see ?Startup), the environment setting files .Renviron and 
Renviron.site.

>
> Determining proxy settings from the preferences is very messy and unreliable 
> (due to PAC proxies), so the only alternative would be to use Apple's CF 
> network API for downloads. Given that it only adds complexity (event loop 
> issues etc.) with no obvious functional benefit it is questionable whether 
> it's worth the hassle.
>
> Cheers,
> Simon
>
>
> On May 1, 2008, at 11:47 AM, Stranathan, Dan wrote:
>
>> Hello everyone
>> 
>> I have a R question for you. I am new to the wide world of all things R and 
>> I am not a scientist or a programmer per se. I'm a Systems Administrator 
>> trying to troubleshoot a network issue with R - Specifically related to 
>> proxy servers.
>> 
>> Background:
>> My Institute has a Linus-based Squid proxy server that brokers all http 
>> traffic through it. We have 2 versions of the proxy server. One proxy 
>> server (used for 99% of our staff) requires the user to manually type a 
>> password when prompted. Not all applications are "smart" enough to 
>> understand a proxy can since it requires the 2-way process of password 
>> negotiation, etc. Our 2nd Proxy server is basically a "wide open door" to 
>> the Internet. Only certain managers and the IT dept are allowed to use this 
>> proxy. It doesn't require a password at all.
>> 
>> As you may know, the main way to configure proxy settings in OS X is via 
>> the System Preferences (the Network Pane has a tab for proxy settings). You 
>> can also configure these settings from the Terminal via the networksetup 
>> and systemsetup commands too. Both ways achieve the same result. You can 
>> also configure your shell session to be "proxy-aware" using the UNIX 
>> http_proxy variable in your .bash_profile (I describe this more below)
>> 
>> So far, both Mac OS X 10.4 (Tiger) and 10.5 (Leopard) have worked quite 
>> well with our proxy servers. In fact, all "proxy aware" applications such 
>> as Safari, iTunes, WebDAV, etc work great (As long as you know your 
>> password of course). Even the curl and wget  commands work from the 
>> Terminal with once the proper configurations have been made.
>> 
>> My R Problem:
>> The GUI version of R 2.7.0 (and possibly earlier versions?) does not work 
>> with our proxy server correctly. I have tried both of our proxy servers 
>> (secure and open) and neither one will allow R to route out to the 
>> Internet. Other apps like Safari, curl, etc have no problem getting to the 
>> R update site (cran.r-project.org).
>> 
>> Certain command line tools will not honor the Mac OS X global proxy 
>> settings. When this happens I usually just add an environmental proxy 
>> setting with the "export http_proxy=<my proxy server>" to my .bash_profile, 
>> etc and I can get around this problem quite easily. I stumbled across this 
>> because the R command line tools (in Terminal and X11) were not honoring 
>> the Mac OS X global proxy settings at first, so I had to implement the 
>> setting I just described. It works great now. But... I still cant get the R 
>> GUI app to peacefully co-exist with my proxy servers, regardless of how I 
>> configure the Mac OS X GUI system proxy or the shell environment. Here is 
>> the error I get in the R GUI window:
>> 
>> Error in file(con, "r") : cannot open the connection
>> In addition: Warning message:
>> In file(con, "r") : unable to connect to 'cran.r-project.org' on port 80.
>>> 
>> 
>> 
>> 
>> If you can offer any suggestions I would greatly appreciate them!
>> 
>> 
>> Thanks!
>> 
>> -Dan
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From luca at stat.unipg.it  Thu May  1 16:39:22 2008
From: luca at stat.unipg.it (Luca Scrucca)
Date: Thu, 1 May 2008 16:39:22 +0200 (CEST)
Subject: [R-SIG-Mac] quartz crash
Message-ID: <Pine.GSO.4.64.0805011634210.15093@fisher.stat.unipg.it>

Dear R-Mac-users,

I got a crash using strwidth() on a quartz device. For example:

> par(family = "mono")
> strwidth(c("a", "aaa"))

  *** caught bus error ***
address 0x10, cause 'non-existent physical address'

Traceback:
  1: strwidth(text)

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace
Selection:

Please consider that not setting family to "mono" will result in no crash 
when strwidth() is called. Also, using the x11 device works ok.
For example:

> x11()
> par(family = "mono")
> strwidth(c("a", "aaa"))
[1] 6.425911e-297 1.927773e-296

I installed the R binary kindly provided at CRAN, as well as binary 
packages. The OSX is Leopard 10.5.2.
These are my R session infos
> sessionInfo()
R version 2.7.0 (2008-04-22)
i386-apple-darwin8.10.1

locale:
en_GB.UTF-8/en_GB.UTF-8/C/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] graphics  utils     datasets  grDevices stats     methods   base

other attached packages:
[1] RColorBrewer_1.0-2 rgl_0.77

Thanks,

Luca


--------------------------------------------------
Luca Scrucca
Dipartimento di Economia, Finanza e Statistica
Sezione di Statistica
Universit?? degli Studi di Perugia
Via A. Pascoli, 20
06123 PERUGIA  (ITALY)
Tel. +39-075-5855233
Fax: +39-075-5855950
E-mail:   luca at stat.unipg.it
Web page: http://www.stat.unipg.it/luca
--------------------------------------------------

From ripley at stats.ox.ac.uk  Fri May  2 09:28:19 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 2 May 2008 08:28:19 +0100 (BST)
Subject: [R-SIG-Mac] quartz crash
In-Reply-To: <Pine.GSO.4.64.0805011634210.15093@fisher.stat.unipg.it>
References: <Pine.GSO.4.64.0805011634210.15093@fisher.stat.unipg.it>
Message-ID: <alpine.LFD.1.10.0805020823350.25572@auk.stats.ox.ac.uk>

You should not be asking for strwidth() without setting up a coordinate 
system.

> [1] 6.425911e-297 1.927773e-296

is not 'works ok'.  That's not to say that there is not a quartz bug here 
as well.

On Thu, 1 May 2008, Luca Scrucca wrote:

> Dear R-Mac-users,
>
> I got a crash using strwidth() on a quartz device. For example:
>
>> par(family = "mono")
>> strwidth(c("a", "aaa"))
>
> *** caught bus error ***
> address 0x10, cause 'non-existent physical address'
>
> Traceback:
> 1: strwidth(text)
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> Selection:
>
> Please consider that not setting family to "mono" will result in no crash 
> when strwidth() is called. Also, using the x11 device works ok.
> For example:
>
>> x11()
>> par(family = "mono")
>> strwidth(c("a", "aaa"))
> [1] 6.425911e-297 1.927773e-296
>
> I installed the R binary kindly provided at CRAN, as well as binary packages. 
> The OSX is Leopard 10.5.2.
> These are my R session infos
>> sessionInfo()
> R version 2.7.0 (2008-04-22)
> i386-apple-darwin8.10.1
>
> locale:
> en_GB.UTF-8/en_GB.UTF-8/C/C/en_GB.UTF-8/en_GB.UTF-8
>
> attached base packages:
> [1] graphics  utils     datasets  grDevices stats     methods   base
>
> other attached packages:
> [1] RColorBrewer_1.0-2 rgl_0.77
>
> Thanks,
>
> Luca
>
>
> --------------------------------------------------
> Luca Scrucca
> Dipartimento di Economia, Finanza e Statistica
> Sezione di Statistica
> Universit?? degli Studi di Perugia
> Via A. Pascoli, 20
> 06123 PERUGIA  (ITALY)
> Tel. +39-075-5855233
> Fax: +39-075-5855950
> E-mail:   luca at stat.unipg.it
> Web page: http://www.stat.unipg.it/luca
> --------------------------------------------------
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From byron.ellis at gmail.com  Fri May  2 09:45:31 2008
From: byron.ellis at gmail.com (Byron Ellis)
Date: Fri, 2 May 2008 00:45:31 -0700
Subject: [R-SIG-Mac] quartz crash
In-Reply-To: <alpine.LFD.1.10.0805020823350.25572@auk.stats.ox.ac.uk>
References: <Pine.GSO.4.64.0805011634210.15093@fisher.stat.unipg.it>
	<alpine.LFD.1.10.0805020823350.25572@auk.stats.ox.ac.uk>
Message-ID: <7098abec0805020045x75c5b80xf9fbfb7f81b9c3c1@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080502/2db148a1/attachment.pl>

From ripley at stats.ox.ac.uk  Fri May  2 10:12:43 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 2 May 2008 09:12:43 +0100 (BST)
Subject: [R-SIG-Mac] quartz crash
In-Reply-To: <7098abec0805020045x75c5b80xf9fbfb7f81b9c3c1@mail.gmail.com>
References: <Pine.GSO.4.64.0805011634210.15093@fisher.stat.unipg.it>
	<alpine.LFD.1.10.0805020823350.25572@auk.stats.ox.ac.uk>
	<7098abec0805020045x75c5b80xf9fbfb7f81b9c3c1@mail.gmail.com>
Message-ID: <alpine.LFD.1.10.0805020848070.2121@auk.stats.ox.ac.uk>

On Fri, 2 May 2008, Byron Ellis wrote:

> Interestingly, the same test on my system (running under gdb in an
> attempt to catch the crash) results in[1] Inf Inf

Which is what X11() gives for me on Linux, and is what I would expect the 
code to give.  Ross Ihaka removed the test of a valid coordinate system in 
2004, but it needs to be conditionally re-instated.  It is OK to ask for 
strwidth() in non-default units without a user coordinate system.

> which is not sensible, but probably more correct than extremely small
> values. With a coordinate system established, strwidth acts as
> advertised. Interestingly, setting family to "mono" or "serif" causes a
> warning to be raised claiming that font 'print.density' (or
> 'print.coefmat' in the latter case) cannot be found, which sounds like a
> mixup in the string hashtable system. In both cases there is no crash
> either with or without gdb and it returns 0 0 along with the warning.
> However, those arbitrary font names are suspicious.
> 
> 
> 
> On Fri, May 2, 2008 at 12:28 AM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk> wrote:
>       You should not be asking for strwidth() without setting up a
>       coordinate system.
>
>             [1] 6.425911e-297 1.927773e-296
> 
> 
> is not 'works ok'. ?That's not to say that there is not a quartz
> bug here as well.
> 
> 
> On Thu, 1 May 2008, Luca Scrucca wrote:
>
>       Dear R-Mac-users,
>
>       I got a crash using strwidth() on a quartz device. For
>       example:
>
>             par(family = "mono")
>             strwidth(c("a", "aaa"))
> 
>
>       *** caught bus error ***
>       address 0x10, cause 'non-existent physical address'
>
>       Traceback:
>       1: strwidth(text)
>
>       Possible actions:
>       1: abort (with core dump, if enabled)
>       2: normal R exit
>       3: exit R without saving workspace
>       4: exit R saving workspace
>       Selection:
>
>       Please consider that not setting family to "mono" will
>       result in no crash when strwidth() is called. Also,
>       using the x11 device works ok.
>       For example:
>
>             x11()
>             par(family = "mono")
>             strwidth(c("a", "aaa"))
>
>       [1] 6.425911e-297 1.927773e-296
>
>       I installed the R binary kindly provided at CRAN, as
>       well as binary packages. The OSX is Leopard 10.5.2.
>       These are my R session infos
>             sessionInfo()
>
>       R version 2.7.0 (2008-04-22)
>       i386-apple-darwin8.10.1
>
>       locale:
>       en_GB.UTF-8/en_GB.UTF-8/C/C/en_GB.UTF-8/en_GB.UTF-8
>
>       attached base packages:
>       [1] graphics ?utils ? ? datasets ?grDevices stats ? ?
>       methods ? base
>
>       other attached packages:
>       [1] RColorBrewer_1.0-2 rgl_0.77
>
>       Thanks,
>
>       Luca
> 
>
>       --------------------------------------------------
>       Luca Scrucca
>       Dipartimento di Economia, Finanza e Statistica
>       Sezione di Statistica
>       Universit?? degli Studi di Perugia
>       Via A. Pascoli, 20
>       06123 PERUGIA ?(ITALY)
>       Tel. +39-075-5855233
>       Fax: +39-075-5855950
>       E-mail: ? luca at stat.unipg.it
>       Web page: http://www.stat.unipg.it/luca
>       --------------------------------------------------
> 
> 
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics,
> ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 
> 
> --
> Byron Ellis (byron.ellis at gmail.com)
> "Oook" -- The Librarian
> 
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From phgrosjean at sciviews.org  Sun May  4 13:01:47 2008
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sun, 04 May 2008 13:01:47 +0200
Subject: [R-SIG-Mac] Starting tcltk without Tk
Message-ID: <481D979B.9030107@sciviews.org>

Hello,

Up to R 2.6.2, I used to start Tcl *without Tk* (I need only Tcl for 
some part of my work, like a socket server written in Tcl only, for 
instance) with this code under Mac OS X (particularly on this system, 
because I don't want to start X11 just to use Tcl code, which is 
required for Tk!):

 > Sys.unsetenv("DISPLAY")
 > library(tcltk)

I got then the message "no DISPLAY variable so Tk is not available", but 
could work with Tcl without problems.

Now, with R 2.7.0, I got the following and Tcl failed to load:
Loading Tcl/Tk interface ... Error in fun(...) : no display name and no 
$DISPLAY environment variable
Error : .onLoad failed in 'loadNamespace' for 'tcltk'
Error: package/namespace load failed for 'tcltk'

I try to locate the message "no display name and no $DISPLAY environment 
variable" in the code but I cannot find it. Could someone help me please?

I understand that starting Tcl without Tk from R is not an intended 
behaviour, but would it be possible to include an option to do so?

 > sessionInfo()
R version 2.7.0 Patched (2008-04-22 r45460)
i386-apple-darwin8.10.1

locale:
en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

Many thanks,

Philippe Grosjean
-- 
..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Belgium
( ( ( ( (
..............................................................


From ken.knoblauch at inserm.fr  Mon May  5 09:29:45 2008
From: ken.knoblauch at inserm.fr (Kenneth Knoblauch)
Date: Mon,  5 May 2008 09:29:45 +0200
Subject: [R-SIG-Mac] strange interaction of quartz() with videoprojector
Message-ID: <20080505092945.y5vr5i720w044g8k@imp.inserm.fr>

Hi,

The new graphics window defaults in R 2.7.0 are great but I've
noticed a strange phenomenon when I'm using R with my MacBook Pro
connected to a videoprojector.  Under these conditions,
the quartz window that is opened is tiny,
about 1/5 the default size and the line colors are a light
grey (or a light color, at least.  Not 100% sure that it is grey).
As soon as I detach the videoprojector and reset the
display size, everything returns to normal.

The minimal example would be to hook up your portable to
a videoprojector, start R and run

quartz()

Does anyone else see this?

I can get the normal default with

quartz(width = 30, height = 30)

but the text and points are very small.  I can get around this
with cex and col arguments but this is not optimal.  Not great
for teaching.

Thank you for any suggestions.  SessionInfo below.

Ken



R version 2.7.0 Patched (2008-04-30 r45572)
i386-apple-darwin8.10.1

locale:
en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


-- 
Ken Knoblauch
Inserm U846
Institut Cellule Souche et Cerveau
D?partement Neurosciences Int?gratives
18 avenue du Doyen L?pine
69500 Bron
France
tel: +33 (0)4 72 91 34 77
fax: +33 (0)4 72 91 34 61
portable: +33 (0)6 84 10 64 10
http://www.sbri.fr


From ripley at stats.ox.ac.uk  Mon May  5 09:37:50 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 5 May 2008 08:37:50 +0100 (BST)
Subject: [R-SIG-Mac] strange interaction of quartz() with videoprojector
In-Reply-To: <20080505092945.y5vr5i720w044g8k@imp.inserm.fr>
References: <20080505092945.y5vr5i720w044g8k@imp.inserm.fr>
Message-ID: <alpine.LFD.1.10.0805050834040.29970@gannet.stats.ox.ac.uk>

You can set the quartz() argument 'dpi'.  I'm not sure why this is being 
detected wrongly, but it looks as if it is.

On Mon, 5 May 2008, Kenneth Knoblauch wrote:

> Hi,
>
> The new graphics window defaults in R 2.7.0 are great but I've
> noticed a strange phenomenon when I'm using R with my MacBook Pro
> connected to a videoprojector.  Under these conditions,
> the quartz window that is opened is tiny,
> about 1/5 the default size and the line colors are a light
> grey (or a light color, at least.  Not 100% sure that it is grey).

This could be the effect of antialiasing on narrow lines.

> As soon as I detach the videoprojector and reset the
> display size, everything returns to normal.
>
> The minimal example would be to hook up your portable to
> a videoprojector, start R and run
>
> quartz()
>
> Does anyone else see this?
>
> I can get the normal default with
>
> quartz(width = 30, height = 30)
>
> but the text and points are very small.  I can get around this
> with cex and col arguments but this is not optimal.  Not great
> for teaching.
>
> Thank you for any suggestions.  SessionInfo below.
>
> Ken
>
>
>
> R version 2.7.0 Patched (2008-04-30 r45572)
> i386-apple-darwin8.10.1
>
> locale:
> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>
> -- 
> Ken Knoblauch
> Inserm U846
> Institut Cellule Souche et Cerveau
> D?partement Neurosciences Int?gratives
> 18 avenue du Doyen L?pine
> 69500 Bron
> France
> tel: +33 (0)4 72 91 34 77
> fax: +33 (0)4 72 91 34 61
> portable: +33 (0)6 84 10 64 10
> http://www.sbri.fr
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ken.knoblauch at inserm.fr  Mon May  5 10:36:40 2008
From: ken.knoblauch at inserm.fr (Kenneth Knoblauch)
Date: Mon,  5 May 2008 10:36:40 +0200
Subject: [R-SIG-Mac] strange interaction of quartz() with	videoprojector
In-Reply-To: <alpine.LFD.1.10.0805050834040.29970@gannet.stats.ox.ac.uk>
References: <20080505092945.y5vr5i720w044g8k@imp.inserm.fr>
	<alpine.LFD.1.10.0805050834040.29970@gannet.stats.ox.ac.uk>
Message-ID: <20080505103640.ge2jsxi8g8sso0ow@imp.inserm.fr>

A setting of dpi = 1.5 * 72 generates about the right size
graphics and alleviates the light lines problem, which must
have been from the antialiasing, as you proposed.

This seems to be related to the automatic selection of resolution
in System Preferences for Displays.  The values chosen automatically
which generated the small quartz windows are set at
1280 x 1024.  At one point, restarting the machine while
connected to the videoprojector, it started up with a lower
resolution and the quartz window worked fine.  I wasn't
able to reproduce this though by manually reducing the
resolution in the preferences.  I have to experiment
a bit more to see how to get it to start up automatically
in the lower resolution, which would seem to obviate the problem
for the short term.

Thank you for your suggestions.

Ken


Quoting Prof Brian Ripley <ripley at stats.ox.ac.uk>:

> You can set the quartz() argument 'dpi'.  I'm not sure why this is
> being detected wrongly, but it looks as if it is.
>
> On Mon, 5 May 2008, Kenneth Knoblauch wrote:
>
>> Hi,
>>
>> The new graphics window defaults in R 2.7.0 are great but I've
>> noticed a strange phenomenon when I'm using R with my MacBook Pro
>> connected to a videoprojector.  Under these conditions,
>> the quartz window that is opened is tiny,
>> about 1/5 the default size and the line colors are a light
>> grey (or a light color, at least.  Not 100% sure that it is grey).
>
> This could be the effect of antialiasing on narrow lines.
>
>> As soon as I detach the videoprojector and reset the
>> display size, everything returns to normal.
>>
>> The minimal example would be to hook up your portable to
>> a videoprojector, start R and run
>>
>> quartz()
>>
>> Does anyone else see this?
>>
>> I can get the normal default with
>>
>> quartz(width = 30, height = 30)
>>
>> but the text and points are very small.  I can get around this
>> with cex and col arguments but this is not optimal.  Not great
>> for teaching.
>>
>> Thank you for any suggestions.  SessionInfo below.
>>
>> Ken
>>
>>
>>
>> R version 2.7.0 Patched (2008-04-30 r45572)
>> i386-apple-darwin8.10.1
>>
>> locale:
>> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>>
>> -- 
>> Ken Knoblauch
>> Inserm U846
>> Institut Cellule Souche et Cerveau
>> D?partement Neurosciences Int?gratives
>> 18 avenue du Doyen L?pine
>> 69500 Bron
>> France
>> tel: +33 (0)4 72 91 34 77
>> fax: +33 (0)4 72 91 34 61
>> portable: +33 (0)6 84 10 64 10
>> http://www.sbri.fr
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-- 
Ken Knoblauch
Inserm U846
Institut Cellule Souche et Cerveau
D?partement Neurosciences Int?gratives
18 avenue du Doyen L?pine
69500 Bron
France
tel: +33 (0)4 72 91 34 77
fax: +33 (0)4 72 91 34 61
portable: +33 (0)6 84 10 64 10
http://www.sbri.fr


From simon.urbanek at r-project.org  Mon May  5 15:09:33 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 5 May 2008 09:09:33 -0400
Subject: [R-SIG-Mac] strange interaction of quartz() with	videoprojector
In-Reply-To: <20080505103640.ge2jsxi8g8sso0ow@imp.inserm.fr>
References: <20080505092945.y5vr5i720w044g8k@imp.inserm.fr>
	<alpine.LFD.1.10.0805050834040.29970@gannet.stats.ox.ac.uk>
	<20080505103640.ge2jsxi8g8sso0ow@imp.inserm.fr>
Message-ID: <DE4C5C94-2877-4644-9805-5ADCFD69040A@r-project.org>


On May 5, 2008, at 4:36 AM, Kenneth Knoblauch wrote:

> A setting of dpi = 1.5 * 72 generates about the right size graphics  
> and alleviates the light lines problem, which must have been from  
> the antialiasing, as you proposed.
>

1.5*72 is ca. 100 dpi which most displays use. Clearly on a projector  
DPI is not very meaningful since it varies with the projected distance.


> This seems to be related to the automatic selection of resolution in  
> System Preferences for Displays.  The values chosen automatically  
> which generated the small quartz windows are set at 1280 x 1024.  At  
> one point, restarting the machine while connected to the  
> videoprojector, it started up with a lower resolution and the quartz  
> window worked fine.  I wasn't able to reproduce this though by  
> manually reducing the resolution in the preferences.  I have to  
> experiment a bit more to see how to get it to start up automatically  
> in the lower resolution, which would seem to obviate the problem for  
> the short term.
>

FWIW in most cases what you call "automatic" is not very helpful.  
Fortunately the Display settings are smart and will remember the last  
used modes, so if you set up the correct resolution, it will be  
remembered and you can restore it with one click. In most cases I  
recommend using projector's native resolution as it is the only  
resolution that is faithfully represented.

(This is not really Quartz-related, it hold true for any projection  
with the possible exception of video projection).

Cheers,
Simon

>
>
> Quoting Prof Brian Ripley <ripley at stats.ox.ac.uk>:
>
>> You can set the quartz() argument 'dpi'.  I'm not sure why this is
>> being detected wrongly, but it looks as if it is.
>>
>> On Mon, 5 May 2008, Kenneth Knoblauch wrote:
>>
>>> Hi,
>>>
>>> The new graphics window defaults in R 2.7.0 are great but I've
>>> noticed a strange phenomenon when I'm using R with my MacBook Pro
>>> connected to a videoprojector.  Under these conditions,
>>> the quartz window that is opened is tiny,
>>> about 1/5 the default size and the line colors are a light
>>> grey (or a light color, at least.  Not 100% sure that it is grey).
>>
>> This could be the effect of antialiasing on narrow lines.
>>
>>> As soon as I detach the videoprojector and reset the
>>> display size, everything returns to normal.
>>>
>>> The minimal example would be to hook up your portable to
>>> a videoprojector, start R and run
>>>
>>> quartz()
>>>
>>> Does anyone else see this?
>>>
>>> I can get the normal default with
>>>
>>> quartz(width = 30, height = 30)
>>>
>>> but the text and points are very small.  I can get around this
>>> with cex and col arguments but this is not optimal.  Not great
>>> for teaching.
>>>
>>> Thank you for any suggestions.  SessionInfo below.
>>>
>>> Ken
>>>
>>>
>>>
>>> R version 2.7.0 Patched (2008-04-30 r45572)
>>> i386-apple-darwin8.10.1
>>>
>>> locale:
>>> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>> -- 
>>> Ken Knoblauch
>>> Inserm U846
>>> Institut Cellule Souche et Cerveau
>>> D?partement Neurosciences Int?gratives
>>> 18 avenue du Doyen L?pine
>>> 69500 Bron
>>> France
>>> tel: +33 (0)4 72 91 34 77
>>> fax: +33 (0)4 72 91 34 61
>>> portable: +33 (0)6 84 10 64 10
>>> http://www.sbri.fr
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> -- 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
>
> -- 
> Ken Knoblauch
> Inserm U846
> Institut Cellule Souche et Cerveau
> D?partement Neurosciences Int?gratives
> 18 avenue du Doyen L?pine
> 69500 Bron
> France
> tel: +33 (0)4 72 91 34 77
> fax: +33 (0)4 72 91 34 61
> portable: +33 (0)6 84 10 64 10
> http://www.sbri.fr
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From simon.urbanek at r-project.org  Mon May  5 15:12:44 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 5 May 2008 09:12:44 -0400
Subject: [R-SIG-Mac] Starting tcltk without Tk
In-Reply-To: <481D979B.9030107@sciviews.org>
References: <481D979B.9030107@sciviews.org>
Message-ID: <56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>

Philippe,

I'm not quite sure why you are asking on a Mac list, but the error  
comes from Tcl/Tk. I'd suggest asking on R-devel, the Tcl/Tk used in  
the R binary is the same for R 2.6.x and 2.7.0 so it must be a change  
in tcltk.

Cheers,
Simon


On May 4, 2008, at 7:01 AM, Philippe Grosjean wrote:

> Hello,
>
> Up to R 2.6.2, I used to start Tcl *without Tk* (I need only Tcl for  
> some part of my work, like a socket server written in Tcl only, for  
> instance) with this code under Mac OS X (particularly on this  
> system, because I don't want to start X11 just to use Tcl code,  
> which is required for Tk!):
>
> > Sys.unsetenv("DISPLAY")
> > library(tcltk)
>
> I got then the message "no DISPLAY variable so Tk is not available",  
> but could work with Tcl without problems.
>
> Now, with R 2.7.0, I got the following and Tcl failed to load:
> Loading Tcl/Tk interface ... Error in fun(...) : no display name and  
> no $DISPLAY environment variable
> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
> Error: package/namespace load failed for 'tcltk'
>
> I try to locate the message "no display name and no $DISPLAY  
> environment variable" in the code but I cannot find it. Could  
> someone help me please?
>
> I understand that starting Tcl without Tk from R is not an intended  
> behaviour, but would it be possible to include an option to do so?
>
> > sessionInfo()
> R version 2.7.0 Patched (2008-04-22 r45460)
> i386-apple-darwin8.10.1
>
> locale:
> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> Many thanks,
>
> Philippe Grosjean
> -- 
> ..............................................<?}))><........
> ) ) ) ) )
> ( ( ( ( (    Prof. Philippe Grosjean
> ) ) ) ) )
> ( ( ( ( (    Numerical Ecology of Aquatic Systems
> ) ) ) ) )   Mons-Hainaut University, Belgium
> ( ( ( ( (
> ..............................................................
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From ripley at stats.ox.ac.uk  Mon May  5 15:24:35 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 5 May 2008 14:24:35 +0100 (BST)
Subject: [R-SIG-Mac] Starting tcltk without Tk
In-Reply-To: <56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>
References: <481D979B.9030107@sciviews.org>
	<56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>
Message-ID: <alpine.LFD.1.10.0805051422010.19781@gannet.stats.ox.ac.uk>

On Mon, 5 May 2008, Simon Urbanek wrote:

> Philippe,
>
> I'm not quite sure why you are asking on a Mac list, but the error comes from 
> Tcl/Tk. I'd suggest asking on R-devel, the Tcl/Tk used in the R binary is the 
> same for R 2.6.x and 2.7.0 so it must be a change in tcltk.

That's my fault. Only a --with-aqua build of R tries to call Tk_Init if 
there is no DISPLAY set, so what he wants to do is MacOS-specific, AFAICS.

I had already told him (on R-devel) I think his 2.6.2 is a 
non-CRAN-binary.

Brian

>
> Cheers,
> Simon
>
>
> On May 4, 2008, at 7:01 AM, Philippe Grosjean wrote:
>
>> Hello,
>> 
>> Up to R 2.6.2, I used to start Tcl *without Tk* (I need only Tcl for some 
>> part of my work, like a socket server written in Tcl only, for instance) 
>> with this code under Mac OS X (particularly on this system, because I don't 
>> want to start X11 just to use Tcl code, which is required for Tk!):
>> 
>>> Sys.unsetenv("DISPLAY")
>>> library(tcltk)
>> 
>> I got then the message "no DISPLAY variable so Tk is not available", but 
>> could work with Tcl without problems.
>> 
>> Now, with R 2.7.0, I got the following and Tcl failed to load:
>> Loading Tcl/Tk interface ... Error in fun(...) : no display name and no 
>> $DISPLAY environment variable
>> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
>> Error: package/namespace load failed for 'tcltk'
>> 
>> I try to locate the message "no display name and no $DISPLAY environment 
>> variable" in the code but I cannot find it. Could someone help me please?
>> 
>> I understand that starting Tcl without Tk from R is not an intended 
>> behaviour, but would it be possible to include an option to do so?
>> 
>>> sessionInfo()
>> R version 2.7.0 Patched (2008-04-22 r45460)
>> i386-apple-darwin8.10.1
>> 
>> locale:
>> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> Many thanks,
>> 
>> Philippe Grosjean
>> -- 
>> ..............................................<?}))><........
>> ) ) ) ) )
>> ( ( ( ( (    Prof. Philippe Grosjean
>> ) ) ) ) )
>> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>> ) ) ) ) )   Mons-Hainaut University, Belgium
>> ( ( ( ( (
>> ..............................................................
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From j.van_den_hoff at fzd.de  Mon May  5 15:42:10 2008
From: j.van_den_hoff at fzd.de (Joerg van den Hoff)
Date: Mon, 5 May 2008 15:42:10 +0200
Subject: [R-SIG-Mac] problem with X11() after install of 2.7.0.
In-Reply-To: <32719755-7638-4E46-BAC5-796E7E4C9035@r-project.org>
References: <20080430143432.GA11438@marco.fz-rossendorf.de>
	<2C0D157B-2283-45AD-9AA5-DFEB9ABE2793@r-project.org>
	<20080430153149.GB11438@marco.fz-rossendorf.de>
	<32719755-7638-4E46-BAC5-796E7E4C9035@r-project.org>
Message-ID: <20080505134210.GA27572@marco.fz-rossendorf.de>

On Wed, Apr 30, 2008 at 11:46:45AM -0400, Simon Urbanek wrote:
> 
> On Apr 30, 2008, at 11:31 AM, Joerg van den Hoff wrote:
> 
> >On Wed, Apr 30, 2008 at 10:55:38AM -0400, Simon Urbanek wrote:
> >>
> >>On Apr 30, 2008, at 10:34 AM, Joerg van den Hoff wrote:
> >>
> >>>hi everybody,
> >>>
> >>>today  I  decided  (unwisely,  it  appears) to install 2.7.0
> >>>under MacOS 10.4.7. now, when I  run  R  from  the  terminal
> >>>command line and do something like
> >>>
> >>>plot(1:10)
> >>>
> >>>a  X11 graphic window pops up, the 10 points are drawn on an
> >>>otherwise blank canvas (no axes, no labels, no  ticks  etc),
> >>>CPU  time  goes  to 100% and stays there and R does not come
> >>>back to the prompt ("hangs"). I tried to `ktrace'  this  but
> >>>this  produced a one Gig logfile in a few seconds from which
> >>>a learned nothing ...
> >>>
> >>>a quick search of the  archive  did  not  yield  a  hit.  so
> >>>please: what's going on here?
> >>>
> >>
> >
> >thanks a lot for this "real time" response.
> >
> >>Ancient system? As a very first step for your own good I'd recommend
> >
> >well, no. actually I _have_ 10.4.11 installed (I somehow was sure  
> >it's 10.4.7,
> >still. that's probably alzheimer casting his shadow :-)).
> >>updating your system which is way out of date (the current version
> >>Tiger is 10.4.11). Then if the issue persists, please report your  
> >>full
> >>sessionInfo() and machine used. The above works without problems on
> >>both 10.5.2 and 10.4.11 (Mac Pro and iMac).
> >10.5.2 is no option for me since I need a working fullscreen X11 mode.
> >I now checked it again both on a dual 2Ghz G5 PPC and a 1.5 GHz  
> >power book PPC G4,
> >both running
> >10.4.11: same problem. actually, R hangs only when really plotting. so
> >I can first open the device with X11() and get back to the R prompt.  
> >only
> >when executing the `plot(1:10)' R apparently hangs and everything is  
> >as described
> >in my first mail.
> >
> >here comes the session info:
> >
> >R version 2.7.0 (2008-04-22)
> >powerpc-apple-darwin8.10.1
> >
> 
> Hmm - I have tried even the PowerPC version now and it works without  
> problems for me.
> Are you using Apple's X11 or something else? Also do you get the error  
> in the "regular" (non-root) mode?
> 
> Thanks,
> Simon
> 
> 
> >locale:
> >C/de_DE.ISO8859-15/C/C/C/C
> >
> >attached base packages:
> >[1] stats     graphics  grDevices utils     datasets  methods   base
> >
> >other attached packages:
> >[1] micropet_1.7.0 psflib_1.0     pkc_1.1        fzrutils_1.3    
> >roiutils_1.3
> >
> >(identical on both machines).
> >
> >any hint/help really appreciated.
> >
> >regards,
> >
> >joerg
> >
> >
> >>
> >>Thanks,
> >>Simon
> >>
> >>
> >
> >
> 

I'm still experiencing problems with cairo-based graphics and 2.7.0.: 

while the problem somehow went away on my powerbook g4 after having once
explicitly used `x11(type="Xlib")',  i.e. even after restart of R now plotting
procedes as it should, the same procedure was not successful on my tabletop ppc g5 (both
machines with macos 10.4.11.). here the problem persists as described in my
first mail: any plotting command, e.g.

plot(1:10) 

to the default x11 device (i.e. with type = "cairo")
plots only the data points on an otherwise empty canvas, then cpu time goes to
100% and R does not come back to the prompt ("hangs"). at which stage I can only
kill R, e.g. by throwing away the terminal running R.

I hvae not the slightest idea what can go wrong specifically on my machine. any
suggestions what (and how) to log or where to look greatly appreciated.

joerg


From simon.urbanek at r-project.org  Mon May  5 20:22:03 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 5 May 2008 14:22:03 -0400
Subject: [R-SIG-Mac] Starting tcltk without Tk
In-Reply-To: <56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>
References: <481D979B.9030107@sciviews.org>
	<56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>
Message-ID: <49DE98AC-4211-4BC8-8F7F-FA44DBAEA7F8@r-project.org>

It turns out that the behavior of starting just Tcl was actually a  
bug. Apparently the intention was to attempt to start Tk regardless of  
the DISPLAY variable, because some TclTk implementation such as Aqua  
Tcl/Tk don't require DISPLAY and thus would not be loaded. Due to a  
bug (HAVE_AQUA was not included in Rconfig.h before R 2.7.0), though,  
this was not the case. I'll leave it to tcltk users/maintainers to  
decide the right way forward. Essentially I see two options:

1) status quo: tcltk always attempts to load Tk and fails on an error
2) allow some (possibly cross-platform) way of specifying that it is  
ok to not load Tk - essentially make failure to load Tk non-fatal.

Right now there is no (semantically correct) way to inhibit the  
loading of Tk (DISPLAY is a sort of abuse and not a solution).

Cheers,
Simon

(CC to R-devel where this started...)

On May 5, 2008, at 9:12 AM, Simon Urbanek wrote:

> Philippe,
>
> I'm not quite sure why you are asking on a Mac list, but the error  
> comes from Tcl/Tk. I'd suggest asking on R-devel, the Tcl/Tk used in  
> the R binary is the same for R 2.6.x and 2.7.0 so it must be a  
> change in tcltk.
>
> Cheers,
> Simon
>
>
> On May 4, 2008, at 7:01 AM, Philippe Grosjean wrote:
>
>> Hello,
>>
>> Up to R 2.6.2, I used to start Tcl *without Tk* (I need only Tcl  
>> for some part of my work, like a socket server written in Tcl only,  
>> for instance) with this code under Mac OS X (particularly on this  
>> system, because I don't want to start X11 just to use Tcl code,  
>> which is required for Tk!):
>>
>> > Sys.unsetenv("DISPLAY")
>> > library(tcltk)
>>
>> I got then the message "no DISPLAY variable so Tk is not  
>> available", but could work with Tcl without problems.
>>
>> Now, with R 2.7.0, I got the following and Tcl failed to load:
>> Loading Tcl/Tk interface ... Error in fun(...) : no display name  
>> and no $DISPLAY environment variable
>> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
>> Error: package/namespace load failed for 'tcltk'
>>
>> I try to locate the message "no display name and no $DISPLAY  
>> environment variable" in the code but I cannot find it. Could  
>> someone help me please?
>>
>> I understand that starting Tcl without Tk from R is not an intended  
>> behaviour, but would it be possible to include an option to do so?
>>
>> > sessionInfo()
>> R version 2.7.0 Patched (2008-04-22 r45460)
>> i386-apple-darwin8.10.1
>>
>> locale:
>> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> Many thanks,
>>
>> Philippe Grosjean
>> -- 
>> ..............................................<?}))><........
>> ) ) ) ) )
>> ( ( ( ( (    Prof. Philippe Grosjean
>> ) ) ) ) )
>> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>> ) ) ) ) )   Mons-Hainaut University, Belgium
>> ( ( ( ( (
>> ..............................................................
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From edd at debian.org  Mon May  5 20:50:07 2008
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 5 May 2008 13:50:07 -0500
Subject: [R-SIG-Mac] [Rd]  Starting tcltk without Tk
In-Reply-To: <49DE98AC-4211-4BC8-8F7F-FA44DBAEA7F8@r-project.org>
References: <481D979B.9030107@sciviews.org>
	<56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>
	<49DE98AC-4211-4BC8-8F7F-FA44DBAEA7F8@r-project.org>
Message-ID: <20080505185007.GA5563@eddelbuettel.com>

On Mon, May 05, 2008 at 02:22:03PM -0400, Simon Urbanek wrote:
> It turns out that the behavior of starting just Tcl was actually a bug. 
> Apparently the intention was to attempt to start Tk regardless of the 
> DISPLAY variable, because some TclTk implementation such as Aqua Tcl/Tk 
> don't require DISPLAY and thus would not be loaded. Due to a bug 
> (HAVE_AQUA was not included in Rconfig.h before R 2.7.0), though, this 
> was not the case. I'll leave it to tcltk users/maintainers to decide the 
> right way forward. Essentially I see two options:
>
> 1) status quo: tcltk always attempts to load Tk and fails on an error
> 2) allow some (possibly cross-platform) way of specifying that it is ok 
> to not load Tk - essentially make failure to load Tk non-fatal.
>
> Right now there is no (semantically correct) way to inhibit the loading 
> of Tk (DISPLAY is a sort of abuse and not a solution).

FWIW this requirement was also biting Debian's automated builders in
the tail.  A hack remedy was to just remove tcltk from lazy-load.  

A slightly better fix is to run 'R CMD INSTALL ...' with a prefix of
'xvfb-run' which uses the virtual framebuffer x11 driver to make
tcl/tk (or any other user of x11; I think gtk2 may fall in the same
camp) happy whether or not the box is actually headless.

Dirk

-- 
Three out of two people have difficulties with fractions.


From phgrosjean at sciviews.org  Tue May  6 09:06:08 2008
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Tue, 06 May 2008 09:06:08 +0200
Subject: [R-SIG-Mac] Starting tcltk without Tk
In-Reply-To: <49DE98AC-4211-4BC8-8F7F-FA44DBAEA7F8@r-project.org>
References: <481D979B.9030107@sciviews.org>
	<56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>
	<49DE98AC-4211-4BC8-8F7F-FA44DBAEA7F8@r-project.org>
Message-ID: <48200360.7010007@sciviews.org>

Simon Urbanek wrote:
> It turns out that the behavior of starting just Tcl was actually a bug. 

Not completely. At least, loading of tcltk was correct when the "bug" 
was there, but I totally agree that the mechanism used (according to the 
presence or not of the DISPLAY variable is not the best one). It is not 
true that there was no intention to allow loading tcltk without Tk. 
Otherwise, why would you have this (tcltk.c, tcltk_init(), line 643 in 
the R 2.7.0 source):

warning(_("no DISPLAY variable so Tk is not available"));

This message strongly suggests that starting tcltk without Tk is 
allowed, and it also suggests the mechanism: by eliminating the DISPLAY 
environment variable before starting tcltk. It is certainly 
undocumented, most probably underused, and certainly requires a better 
way to specify that the user does want to load Tk,... but at least, it 
worked for me up to now.

> Apparently the intention was to attempt to start Tk regardless of the 
> DISPLAY variable, because some TclTk implementation such as Aqua Tcl/Tk 
> don't require DISPLAY and thus would not be loaded. Due to a bug 
> (HAVE_AQUA was not included in Rconfig.h before R 2.7.0), though, this 
> was not the case. I'll leave it to tcltk users/maintainers to decide the 
> right way forward. Essentially I see two options:
> 
> 1) status quo: tcltk always attempts to load Tk and fails on an error
> 2) allow some (possibly cross-platform) way of specifying that it is ok 
> to not load Tk - essentially make failure to load Tk non-fatal.

I vote for the second option.
Many thanks,

Philippe

> Right now there is no (semantically correct) way to inhibit the loading 
> of Tk (DISPLAY is a sort of abuse and not a solution).
> 
> Cheers,
> Simon
> 
> (CC to R-devel where this started...)
> 
> On May 5, 2008, at 9:12 AM, Simon Urbanek wrote:
> 
>> Philippe,
>>
>> I'm not quite sure why you are asking on a Mac list, but the error 
>> comes from Tcl/Tk. I'd suggest asking on R-devel, the Tcl/Tk used in 
>> the R binary is the same for R 2.6.x and 2.7.0 so it must be a change 
>> in tcltk.
>>
>> Cheers,
>> Simon
>>
>>
>> On May 4, 2008, at 7:01 AM, Philippe Grosjean wrote:
>>
>>> Hello,
>>>
>>> Up to R 2.6.2, I used to start Tcl *without Tk* (I need only Tcl for 
>>> some part of my work, like a socket server written in Tcl only, for 
>>> instance) with this code under Mac OS X (particularly on this system, 
>>> because I don't want to start X11 just to use Tcl code, which is 
>>> required for Tk!):
>>>
>>> > Sys.unsetenv("DISPLAY")
>>> > library(tcltk)
>>>
>>> I got then the message "no DISPLAY variable so Tk is not available", 
>>> but could work with Tcl without problems.
>>>
>>> Now, with R 2.7.0, I got the following and Tcl failed to load:
>>> Loading Tcl/Tk interface ... Error in fun(...) : no display name and 
>>> no $DISPLAY environment variable
>>> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
>>> Error: package/namespace load failed for 'tcltk'
>>>
>>> I try to locate the message "no display name and no $DISPLAY 
>>> environment variable" in the code but I cannot find it. Could someone 
>>> help me please?
>>>
>>> I understand that starting Tcl without Tk from R is not an intended 
>>> behaviour, but would it be possible to include an option to do so?
>>>
>>> > sessionInfo()
>>> R version 2.7.0 Patched (2008-04-22 r45460)
>>> i386-apple-darwin8.10.1
>>>
>>> locale:
>>> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> Many thanks,
>>>
>>> Philippe Grosjean
>>> -- 
>>> ..............................................<?}))><........
>>> ) ) ) ) )
>>> ( ( ( ( (    Prof. Philippe Grosjean
>>> ) ) ) ) )
>>> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>>> ) ) ) ) )   Mons-Hainaut University, Belgium
>>> ( ( ( ( (
>>> ..............................................................
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
> 
>


From ripley at stats.ox.ac.uk  Tue May  6 09:24:03 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 May 2008 08:24:03 +0100 (BST)
Subject: [R-SIG-Mac] Starting tcltk without Tk
In-Reply-To: <48200360.7010007@sciviews.org>
References: <481D979B.9030107@sciviews.org>
	<56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>
	<49DE98AC-4211-4BC8-8F7F-FA44DBAEA7F8@r-project.org>
	<48200360.7010007@sciviews.org>
Message-ID: <alpine.LFD.1.10.0805060815170.9332@gannet.stats.ox.ac.uk>

Returned to just R-sig-mac.

On Tue, 6 May 2008, Philippe Grosjean wrote:

> Simon Urbanek wrote:
>> It turns out that the behavior of starting just Tcl was actually a bug. 
>
> Not completely. At least, loading of tcltk was correct when the "bug" was 
> there, but I totally agree that the mechanism used (according to the presence 
> or not of the DISPLAY variable is not the best one). It is not true that 
> there was no intention to allow loading tcltk without Tk. Otherwise, why 
> would you have this (tcltk.c, tcltk_init(), line 643 in the R 2.7.0 source):
>
> warning(_("no DISPLAY variable so Tk is not available"));
>
> This message strongly suggests that starting tcltk without Tk is allowed, and

'Tolerated' would be more accurate.  It is there to cope with packages 
that loaded tcltk during installation, which is often done headless.
The intention is that the package would load, not that it would do usefule 
things.

The 'bug' was that this worked at all on MacOS --with-aqua builds.  That 
line was not intended to be used in that case.  Simon did state that 
clearly in his next para.

> it also suggests the mechanism: by eliminating the DISPLAY environment 
> variable before starting tcltk. It is certainly undocumented, most probably 
> underused, and certainly requires a better way to specify that the user does 
> want to load Tk,... but at least, it worked for me up to now.
>
>> Apparently the intention was to attempt to start Tk regardless of the 
>> DISPLAY variable, because some TclTk implementation such as Aqua Tcl/Tk 
>> don't require DISPLAY and thus would not be loaded. Due to a bug (HAVE_AQUA 
>> was not included in Rconfig.h before R 2.7.0), though, this was not the 
>> case. I'll leave it to tcltk users/maintainers to decide the right way 
>> forward. Essentially I see two options:
>> 
>> 1) status quo: tcltk always attempts to load Tk and fails on an error
>> 2) allow some (possibly cross-platform) way of specifying that it is ok to 
>> not load Tk - essentially make failure to load Tk non-fatal.
>
> I vote for the second option.

Only those who do the work have votes.  There is another possibility, that 
tcltk on MacOS always attempts to load Tk and warns on error.

> Many thanks,
>
> Philippe
>
>> Right now there is no (semantically correct) way to inhibit the loading of 
>> Tk (DISPLAY is a sort of abuse and not a solution).
>> 
>> Cheers,
>> Simon
>> 
>> (CC to R-devel where this started...)
>> 
>> On May 5, 2008, at 9:12 AM, Simon Urbanek wrote:
>> 
>>> Philippe,
>>> 
>>> I'm not quite sure why you are asking on a Mac list, but the error comes 
>>> from Tcl/Tk. I'd suggest asking on R-devel, the Tcl/Tk used in the R 
>>> binary is the same for R 2.6.x and 2.7.0 so it must be a change in tcltk.
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> On May 4, 2008, at 7:01 AM, Philippe Grosjean wrote:
>>> 
>>>> Hello,
>>>> 
>>>> Up to R 2.6.2, I used to start Tcl *without Tk* (I need only Tcl for some 
>>>> part of my work, like a socket server written in Tcl only, for instance) 
>>>> with this code under Mac OS X (particularly on this system, because I 
>>>> don't want to start X11 just to use Tcl code, which is required for Tk!):
>>>> 
>>>> > Sys.unsetenv("DISPLAY")
>>>> > library(tcltk)
>>>> 
>>>> I got then the message "no DISPLAY variable so Tk is not available", but 
>>>> could work with Tcl without problems.
>>>> 
>>>> Now, with R 2.7.0, I got the following and Tcl failed to load:
>>>> Loading Tcl/Tk interface ... Error in fun(...) : no display name and no 
>>>> $DISPLAY environment variable
>>>> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
>>>> Error: package/namespace load failed for 'tcltk'
>>>> 
>>>> I try to locate the message "no display name and no $DISPLAY environment 
>>>> variable" in the code but I cannot find it. Could someone help me please?
>>>> 
>>>> I understand that starting Tcl without Tk from R is not an intended 
>>>> behaviour, but would it be possible to include an option to do so?
>>>> 
>>>> > sessionInfo()
>>>> R version 2.7.0 Patched (2008-04-22 r45460)
>>>> i386-apple-darwin8.10.1
>>>> 
>>>> locale:
>>>> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> Many thanks,
>>>> 
>>>> Philippe Grosjean
>>>> -- 
>>>> ..............................................<?}))><........
>>>> ) ) ) ) )
>>>> ( ( ( ( (    Prof. Philippe Grosjean
>>>> ) ) ) ) )
>>>> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>>>> ) ) ) ) )   Mons-Hainaut University, Belgium
>>>> ( ( ( ( (
>>>> ..............................................................
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> 
>> 
>> 
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From simon.urbanek at r-project.org  Tue May  6 15:29:56 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 6 May 2008 09:29:56 -0400
Subject: [R-SIG-Mac] Starting tcltk without Tk
In-Reply-To: <48200360.7010007@sciviews.org>
References: <481D979B.9030107@sciviews.org>
	<56155F30-1E17-4440-B380-73EAD0596A3E@r-project.org>
	<49DE98AC-4211-4BC8-8F7F-FA44DBAEA7F8@r-project.org>
	<48200360.7010007@sciviews.org>
Message-ID: <FC0790F1-55FB-413A-8226-EF7DAB1436D8@r-project.org>


On May 6, 2008, at 3:06 AM, Philippe Grosjean wrote:

> Simon Urbanek wrote:
>> It turns out that the behavior of starting just Tcl was actually a  
>> bug.
>
> Not completely. At least, loading of tcltk was correct when the  
> "bug" was there, but I totally agree that the mechanism used  
> (according to the presence or not of the DISPLAY variable is not the  
> best one). It is not true that there was no intention to allow  
> loading tcltk without Tk. Otherwise, why would you have this  
> (tcltk.c, tcltk_init(), line 643 in the R 2.7.0 source):
>
> warning(_("no DISPLAY variable so Tk is not available"));
>
> This message strongly suggests that starting tcltk without Tk is  
> allowed, and it also suggests the mechanism: by eliminating the  
> DISPLAY environment variable before starting tcltk. It is certainly  
> undocumented, most probably underused, and certainly requires a  
> better way to specify that the user does want to load Tk,... but at  
> least, it worked for me up to now.
>

Philippe, you missed the one important line - please read the whole  
code - there is

#if !defined(Win32) && !defined(HAVE_AQUA)

before that and that is the crucial part.

Cheers,
Simon


>> Apparently the intention was to attempt to start Tk regardless of  
>> the DISPLAY variable, because some TclTk implementation such as  
>> Aqua Tcl/Tk don't require DISPLAY and thus would not be loaded. Due  
>> to a bug (HAVE_AQUA was not included in Rconfig.h before R 2.7.0),  
>> though, this was not the case. I'll leave it to tcltk users/ 
>> maintainers to decide the right way forward. Essentially I see two  
>> options:
>> 1) status quo: tcltk always attempts to load Tk and fails on an error
>> 2) allow some (possibly cross-platform) way of specifying that it  
>> is ok to not load Tk - essentially make failure to load Tk non-fatal.
>
> I vote for the second option.
> Many thanks,
>
> Philippe
>
>> Right now there is no (semantically correct) way to inhibit the  
>> loading of Tk (DISPLAY is a sort of abuse and not a solution).
>> Cheers,
>> Simon
>> (CC to R-devel where this started...)
>> On May 5, 2008, at 9:12 AM, Simon Urbanek wrote:
>>> Philippe,
>>>
>>> I'm not quite sure why you are asking on a Mac list, but the error  
>>> comes from Tcl/Tk. I'd suggest asking on R-devel, the Tcl/Tk used  
>>> in the R binary is the same for R 2.6.x and 2.7.0 so it must be a  
>>> change in tcltk.
>>>
>>> Cheers,
>>> Simon
>>>
>>>
>>> On May 4, 2008, at 7:01 AM, Philippe Grosjean wrote:
>>>
>>>> Hello,
>>>>
>>>> Up to R 2.6.2, I used to start Tcl *without Tk* (I need only Tcl  
>>>> for some part of my work, like a socket server written in Tcl  
>>>> only, for instance) with this code under Mac OS X (particularly  
>>>> on this system, because I don't want to start X11 just to use Tcl  
>>>> code, which is required for Tk!):
>>>>
>>>> > Sys.unsetenv("DISPLAY")
>>>> > library(tcltk)
>>>>
>>>> I got then the message "no DISPLAY variable so Tk is not  
>>>> available", but could work with Tcl without problems.
>>>>
>>>> Now, with R 2.7.0, I got the following and Tcl failed to load:
>>>> Loading Tcl/Tk interface ... Error in fun(...) : no display name  
>>>> and no $DISPLAY environment variable
>>>> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
>>>> Error: package/namespace load failed for 'tcltk'
>>>>
>>>> I try to locate the message "no display name and no $DISPLAY  
>>>> environment variable" in the code but I cannot find it. Could  
>>>> someone help me please?
>>>>
>>>> I understand that starting Tcl without Tk from R is not an  
>>>> intended behaviour, but would it be possible to include an option  
>>>> to do so?
>>>>
>>>> > sessionInfo()
>>>> R version 2.7.0 Patched (2008-04-22 r45460)
>>>> i386-apple-darwin8.10.1
>>>>
>>>> locale:
>>>> en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>>>>
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods    
>>>> base
>>>>
>>>> Many thanks,
>>>>
>>>> Philippe Grosjean
>>>> -- 
>>>> ..............................................<?}))><........
>>>> ) ) ) ) )
>>>> ( ( ( ( (    Prof. Philippe Grosjean
>>>> ) ) ) ) )
>>>> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>>>> ) ) ) ) )   Mons-Hainaut University, Belgium
>>>> ( ( ( ( (
>>>> ..............................................................
>>>>
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>
>>>>
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>
>


From boydwaters at mac.com  Wed May  7 07:20:23 2008
From: boydwaters at mac.com (Boyd Waters)
Date: Tue, 6 May 2008 23:20:23 -0600
Subject: [R-SIG-Mac] Compiling assembly instruction on GNU gcc/g++ 4.2.1
	(Apple Inc. build 5531)
Message-ID: <042F7BC5-805E-4BE1-B2AC-6BE37B22E60C@mac.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080506/0602214d/attachment.pl>

From simon.urbanek at r-project.org  Wed May  7 16:28:22 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 7 May 2008 10:28:22 -0400
Subject: [R-SIG-Mac] Compiling assembly instruction on GNU gcc/g++ 4.2.1
	(Apple Inc. build 5531)
In-Reply-To: <042F7BC5-805E-4BE1-B2AC-6BE37B22E60C@mac.com>
References: <042F7BC5-805E-4BE1-B2AC-6BE37B22E60C@mac.com>
Message-ID: <ED438066-449F-4E3D-B9B4-BBBDFF795AB2@r-project.org>

Boyd,

thanks for the hint that Apple released the 5553 sources.
FWIW if you apply the patch from
http://r.research.att.com/gfortran-5531.diff
and add gfortran sources from gcc-4.2.1 (or any later 4.2.x if you  
wish)* you will get gfortran for free with full Apple driver support  
(the patch is against 5531 but it works with 5553 as well).

Cheers,
Simon


* - you can extract gcc/fortran and libgfortran from the FSF gcc  
sources and copy/move it to the Apple's sources - something like:
cd gcc_42-5553
tar fvxj ~/gcc-4.2.3.tar.bz2 gcc-4.2.3/gcc/fortran gcc-4.2.3/libgfortran
mv gcc-4.2.3/gcc/fortran gcc/
mv gcc-4.2.3/libgfortran .
rm -rf gcc-4.2.3


On May 7, 2008, at 1:20 AM, Boyd Waters wrote:

>> Leopard$ g++-4.2 -arch x86_64 -g -O2 -march=nocona -fasm-blocks
>> hello.cpp
>> In file included from hello.cpp:2:
>> hello.hpp: In function 'int atomic_exchange_and_add(int*, int)':
>> hello.hpp:15: error: expected `)' before ':' token
>>
>
> It's a bug in Apple GCC, as near as I can tell.
>
> It might be fixed in the most recent Apple patches to GCC 4.2, which
> have been posted at:
> http://www.opensource.apple.com/darwinsource/DevToolsMar2008/
> gcc_42-5553/
>
> I cobbled up a MacPorts port file that plops these patches on top of
> a "mainline" GCC 4.2.1 and builds C,C++, and Objective-C
> compilers.It's a horrid hack, but it works, and you don't have to
> have an ADC membership to get it, and it works on Tiger, as well as
> Leopard.
>
> (I say "might" because I'm not sure.. I'll have to check, as I'm not
> at my work machine right now.)
>
> The most recent versions of Apple-GCC-4.2.1 -- released with their
> iPhone developer kit -- fix this problem (at least on Intel)... note
> that the iPhone is an ARM platform (not Intel or PowerPC), but as a
> side-effect of updating the compiler for iPhone platform support,
> they fixed the inline-assembly.
>
> Now I'm after them to un-break gfortran after applying their
> Objective-C-2.0 patches...
>
> I'm not sure this helps, but I suggest anyone interested in GCC 4.2
> on Mac to sign up for their (free) Apple ADC and (free) Apple iPhone
> SDK memberships, and download the iPhone SDK.
>
> Best of luck!
>
> - boyd
>
> Boyd Waters
> Scientific Programmer
> National Radio Astronomy Observatory
> (via my .Mac account on my stripped-down test machine...)
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From braunm at MIT.EDU  Wed May  7 22:25:32 2008
From: braunm at MIT.EDU (Michael Braun)
Date: Wed, 7 May 2008 16:25:32 -0400
Subject: [R-SIG-Mac] 2.7.0 for 64-bit running Leopard
Message-ID: <D2508F3F-CF4E-4E2E-987F-4B385C938755@mit.edu>

Is it possible to get some clarification regarding what is considered  
a "release" configuration of R and what is considered "experimental?"   
I would like to run a 64-bit build of R 2.7.0 on an x86_64 Mac Pro  
with 18GB of RAM running Leopard (10.5.2).  When I install the  
precompiled "universal" binary, it appears that I am getting a 32-bit  
build (I think this because I cannot allocate objects of size >3GB and  
because .Platform$r_arch="i386").  I checked out the  
r.research.att.com site, but I am hesitant to install an  
"experimental" build.  Also, I tried compiling R myself, but ran into  
a large number of issues (including not passing make check, which I  
now see is addressed in the FAQ).

So my question is, once 10.5.3 is released, should the binary I  
download from CRAN install a 64-bit version of R?  Will I need to  
compile from source?  Or am I still too far ahead of the curve?

Thanks,

Michael






Michael Braun
Assistant Professor of Management Science (Marketing Group)
MIT Sloan School of Management
One Amherst St., E40-169
Cambridge, MA 02142
braunm at mit.edu
617-253-3436


From khansen at stat.Berkeley.EDU  Thu May  8 06:50:51 2008
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Wed, 7 May 2008 21:50:51 -0700
Subject: [R-SIG-Mac] 2.7.0 for 64-bit running Leopard
In-Reply-To: <D2508F3F-CF4E-4E2E-987F-4B385C938755@mit.edu>
References: <D2508F3F-CF4E-4E2E-987F-4B385C938755@mit.edu>
Message-ID: <978CC973-7846-4031-9341-B132E4688659@stat.berkeley.edu>

Simon might correct me on this.

My belief is that any 64bit build on Mac OS X has been considered  
experimental for a while and probably will in the foreseeable future.  
One of the problems is that if the CRAN build supports x86_64, then  
all binary packages (CRAN and Bioconductor) should be supporting it as  
well.

Having said that, it is perfectly safe to use the builds you are  
mentioning in your post. It does require setting up your system to  
build (including installing a fortran compiler) and it does sometimes  
break a bit (I think, sometimes the builds are failing), so you would  
need to be a bit more forgiving. And you probably need to spend some  
time keeping up to date on what happens (like subscribing to this list  
and reading the FAQs etc).

Kasper

On May 7, 2008, at 1:25 PM, Michael Braun wrote:

> Is it possible to get some clarification regarding what is  
> considered a "release" configuration of R and what is considered  
> "experimental?"  I would like to run a 64-bit build of R 2.7.0 on an  
> x86_64 Mac Pro with 18GB of RAM running Leopard (10.5.2).  When I  
> install the precompiled "universal" binary, it appears that I am  
> getting a 32-bit build (I think this because I cannot allocate  
> objects of size >3GB and because .Platform$r_arch="i386").  I  
> checked out the r.research.att.com site, but I am hesitant to  
> install an "experimental" build.  Also, I tried compiling R myself,  
> but ran into a large number of issues (including not passing make  
> check, which I now see is addressed in the FAQ).
>
> So my question is, once 10.5.3 is released, should the binary I  
> download from CRAN install a 64-bit version of R?  Will I need to  
> compile from source?  Or am I still too far ahead of the curve?
>
> Thanks,
>
> Michael
>
>
>
>
>
>
> Michael Braun
> Assistant Professor of Management Science (Marketing Group)
> MIT Sloan School of Management
> One Amherst St., E40-169
> Cambridge, MA 02142
> braunm at mit.edu
> 617-253-3436
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ripley at stats.ox.ac.uk  Thu May  8 07:24:17 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 8 May 2008 06:24:17 +0100 (BST)
Subject: [R-SIG-Mac] 2.7.0 for 64-bit running Leopard
In-Reply-To: <D2508F3F-CF4E-4E2E-987F-4B385C938755@mit.edu>
References: <D2508F3F-CF4E-4E2E-987F-4B385C938755@mit.edu>
Message-ID: <alpine.LFD.1.10.0805080546080.3094@gannet.stats.ox.ac.uk>

I think you need to distinguish a release of R (which is a source tarball) 
from a binary redistribution.  The sources are set up to allow you to 
build x86_64 on MacOS, and also multiple architectures (and have been for 
some time if you don't want MacOS-specific features such as quartz() -- 
that came in 2.7.0).

On Wed, 7 May 2008, Michael Braun wrote:

> Is it possible to get some clarification regarding what is considered a 
> "release" configuration of R and what is considered "experimental?"  I would 
> like to run a 64-bit build of R 2.7.0 on an x86_64 Mac Pro with 18GB of RAM 
> running Leopard (10.5.2).  When I install the precompiled "universal" binary,

According to the FAQ 2.5, 'universal' means Intel and PowerPC.  The 
package instructions in 5.4 are for i386 and ppc.

> it appears that I am getting a 32-bit build (I think this because I cannot 
> allocate objects of size >3GB and because .Platform$r_arch="i386").

The real test is .Machine$sizeof.pointer .  'r_arch' is just a label.

> I checked out the r.research.att.com site, but I am hesitant to install 
> an "experimental" build.  Also, I tried compiling R myself, but ran into 
> a large number of issues (including not passing make check, which I now 
> see is addressed in the FAQ).

> So my question is, once 10.5.3 is released, should the binary I download from 
> CRAN install a 64-bit version of R?  Will I need to compile from source?  Or 
> am I still too far ahead of the curve?

I suggest you do compile from sources.  I find Apple's compilers flaky and 
that is the issue.  Despite the comment in the FAQ, I've had no problems 
with x86_64 on MacOS 10.5.2 *if I turn optimization off* .  The issue with 
log10 appears to be on-CPU calls and not calls to the log10 in libm.
(OTOH, since I get higher performance from x86_64 Linux and Solaris boxes, 
I haven't done extensive testing.)  Note that this may not be the only 
such issue: gcc 4.3.x has a similar problem with sqrt on x86_64 when 
optimizing.

You'll need to compile everything from sources (including all packages), 
and it does sometimes help to have the same compilers used throughout.


> Thanks,
>
> Michael
>
>
>
>
>
>
> Michael Braun
> Assistant Professor of Management Science (Marketing Group)
> MIT Sloan School of Management
> One Amherst St., E40-169
> Cambridge, MA 02142
> braunm at mit.edu
> 617-253-3436
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From friedman at cancercenter.columbia.edu  Thu May  8 21:54:12 2008
From: friedman at cancercenter.columbia.edu (Richard Friedman)
Date: Thu, 8 May 2008 15:54:12 -0400
Subject: [R-SIG-Mac] accessing older versions of R and Bioconductor libraries
Message-ID: <CDB889CD-731B-49D9-940F-672BC5610413@cancercenter.columbia.edu>

Dear R-sig-mac list

	I just installed R2.7.0 and assorted bioconductor packages on my mac.
For a specific purpose, I wish to use R.2.6 and associated  
bioconductor libraries.
When I click the R Icon on the desktop, i get R2.7. Is there any way  
that I can use 2.6
while keep R2.7.0 installed as well? In R.frameworks I only have the  
library for 2.6.
Please advise.

Thanks and best wishes,
Rich
------------------------------------------------------------
Richard A. Friedman, PhD
Associate Research Scientist,
Biomedical Informatics Shared Resource
Herbert Irving Comprehensive Cancer Center (HICCC)
Lecturer,
Department of Biomedical Informatics (DBMI)
Educational Coordinator,
Center for Computational Biology and Bioinformatics (C2B2)/
National Center for Multiscale Analysis of Genomic Networks (MAGNet)
Box 95, Room 130BB or P&S 1-420C
Columbia University Medical Center
630 W. 168th St.
New York, NY 10032
(212)305-6901 (5-6901) (voice)
friedman at cancercenter.columbia.edu
http://cancercenter.columbia.edu/~friedman/

In Memoriam,
Arthur C. Clarke


From juanitachoo at gmail.com  Thu May  8 22:06:28 2008
From: juanitachoo at gmail.com (juanita choo)
Date: Thu, 8 May 2008 15:06:28 -0500
Subject: [R-SIG-Mac] font size problem
Message-ID: <acd92f140805081306h68c3a96an289298d91483e069@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080508/2084e5bd/attachment.pl>

From pink_molo at hotmail.com  Thu May  8 22:51:39 2008
From: pink_molo at hotmail.com (=?Windows-1252?Q?M=F3nica_Lozano?=)
Date: Thu, 8 May 2008 15:51:39 -0500
Subject: [R-SIG-Mac] Tcl/Tk Problems
Message-ID: <BAY109-W3460DF4CF599B27F5C7E9D8DD00@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080508/c75cbcc5/attachment.pl>

From friedman at cancercenter.columbia.edu  Thu May  8 23:21:52 2008
From: friedman at cancercenter.columbia.edu (Richard Friedman)
Date: Thu, 8 May 2008 17:21:52 -0400
Subject: [R-SIG-Mac] accessing older versions of R and Bioconductor
	libraries
In-Reply-To: <4f4b5f350805081320y63db3b30p8870919aa999c971@mail.gmail.com>
References: <CDB889CD-731B-49D9-940F-672BC5610413@cancercenter.columbia.edu>
	<4f4b5f350805081300y39431bd1oe2d2d481a5992272@mail.gmail.com>
	<677CF7B5-1E14-4604-A1BA-BDA1EC235A68@cancercenter.columbia.edu>
	<4f4b5f350805081320y63db3b30p8870919aa999c971@mail.gmail.com>
Message-ID: <5C354D61-6257-4FD1-9EE9-321A12200CDE@cancercenter.columbia.edu>

Dear Eric and Kasper,

	Thank you for the help. I seem to have managed to recapture version  
2.6 and can access
the relevant libraries.

Best wishes,
Rich

On May 8, 2008, at 4:20 PM, Eric Wooten wrote:

> Yep. If you download the non-installer version of 2.6 from  
> r.research.att.com you should be able to drop that folder structure  
> right into your existing setup. Rswitch will take it from there.
>
> Likewise you can always compile older versions and not hammer the  
> existing stuff, though I forget what commands (if any) are  
> necessary for that at the moment. That information shouldn't be too  
> hard to find, at any rate.
>
> Hope that helps,
> Eric
>
>
> On Thu, May 8, 2008 at 4:14 PM, Richard Friedman  
> <friedman at cancercenter.columbia.edu> wrote:
> Eric,
>
>        Thank you. I have downloaded R-switch and started it.
> My problem is that I want to access R2.6, my previous version,
> for which I only have the library folder. All of the other version  
> folders have
> an R console and folders labeled Headers, ProvateHeaders and  
> Resources.
> It seems that the installation erased much of 2.6. Is there a way  
> to get 2.6 back without
> erasing 7?
>
> THANKS!
> Rich
>
>
>
> On May 8, 2008, at 4:00 PM, Eric Wooten wrote:
>
> RSwitch, located at:
> http://r.research.att.com/#other
>
> will allow you to quickly and painlessly switch between any  
> versions of R you have installed.
>
>
>
> On Thu, May 8, 2008 at 3:54 PM, Richard Friedman  
> <friedman at cancercenter.columbia.edu> wrote:
> Dear R-sig-mac list
>
>       I just installed R2.7.0 and assorted bioconductor packages on  
> my mac.
> For a specific purpose, I wish to use R.2.6 and associated  
> bioconductor libraries.
> When I click the R Icon on the desktop, i get R2.7. Is there any  
> way that I can use 2.6
> while keep R2.7.0 installed as well? In R.frameworks I only have  
> the library for 2.6.
> Please advise.
>
> Thanks and best wishes,
> Rich
> ------------------------------------------------------------
> Richard A. Friedman, PhD
> Associate Research Scientist,
> Biomedical Informatics Shared Resource
> Herbert Irving Comprehensive Cancer Center (HICCC)
> Lecturer,
> Department of Biomedical Informatics (DBMI)
> Educational Coordinator,
> Center for Computational Biology and Bioinformatics (C2B2)/
> National Center for Multiscale Analysis of Genomic Networks (MAGNet)
> Box 95, Room 130BB or P&S 1-420C
> Columbia University Medical Center
> 630 W. 168th St.
> New York, NY 10032
> (212)305-6901 (5-6901) (voice)
> friedman at cancercenter.columbia.edu
> http://cancercenter.columbia.edu/~friedman/
>
> In Memoriam,
> Arthur C. Clarke
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
>


From thatsanicehatyouhave at mac.com  Fri May  9 12:24:29 2008
From: thatsanicehatyouhave at mac.com (thatsanicehatyouhave at mac.com)
Date: Fri, 9 May 2008 11:24:29 +0100
Subject: [R-SIG-Mac] Back to Helvetica?
Message-ID: <B7B77C20-667F-468D-9FFD-4153B43D11A9@mac.com>

Hi,

Is there a way to set the quartz font back to Helvetica as it was  
prior to 2.7? I've tried:

quartz(family="Helvetica")

and

par(family="Helvetica")
quartz()

...but I still get Arial. Also, the docs still say that Helvetica is  
the default.

A second issue I've found is that when you copy a quartz window (i.e.,  
cmd-c), it will erase the window. Resizing it will redraw it, but I  
suspect it's not meant to be erased.

Cheers,

Demitri


From mfero at fhcrc.org  Fri May  9 19:54:58 2008
From: mfero at fhcrc.org (Matthew Fero)
Date: Fri, 9 May 2008 10:54:58 -0700
Subject: [R-SIG-Mac] Graphics from a remote host
Message-ID: <3C48ECF5-8E08-40D1-9516-61F3264D3DDC@fhcrc.org>

Hi,
I'm using ssh to make use of R on a remote unix server.  Currently I  
save graphic output as pdf or ps files.  However, I'd like to be able  
to view some preliminary results in a graphic device before running  
big jobs.  Is it possible, e.g with port mapping, to tunnel graphic  
output from plot() back to my Mac desktop so I can view it directly  
with Apple's X11?

Thanks,

Matthew


From byron.ellis at gmail.com  Fri May  9 19:57:33 2008
From: byron.ellis at gmail.com (Byron Ellis)
Date: Fri, 9 May 2008 10:57:33 -0700
Subject: [R-SIG-Mac] Graphics from a remote host
In-Reply-To: <3C48ECF5-8E08-40D1-9516-61F3264D3DDC@fhcrc.org>
References: <3C48ECF5-8E08-40D1-9516-61F3264D3DDC@fhcrc.org>
Message-ID: <7098abec0805091057v20841e2dv3c7823278a1a8989@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080509/a68abde3/attachment.pl>

From markg at uic.edu  Mon May 12 16:53:33 2008
From: markg at uic.edu (Grant, Mark D.)
Date: Mon, 12 May 2008 09:53:33 -0500 (CDT)
Subject: [R-SIG-Mac] Cannot cahnge working directory
Message-ID: <42267.12.47.15.38.1210604013.squirrel@webmail.uic.edu>

In 2.7.0 I am getting an error with setwd not encountered in 2.6.2


setwd("/Users/markgrant/Documents/_projects/genetic/r")

gives

Error in setwd("/Users/markgrant/Documents/_projects/genetic/r") :
   cannot change working directory

However, I can change the working directory from the GUI

Any ideas?

Mark Grant


From simon.urbanek at r-project.org  Mon May 12 17:34:36 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 12 May 2008 11:34:36 -0400
Subject: [R-SIG-Mac] Cannot cahnge working directory
In-Reply-To: <42267.12.47.15.38.1210604013.squirrel@webmail.uic.edu>
References: <42267.12.47.15.38.1210604013.squirrel@webmail.uic.edu>
Message-ID: <84501214-0BCE-4C8C-A5D0-8A85B4A54363@r-project.org>


On May 12, 2008, at 10:53 AM, Grant, Mark D. wrote:

> In 2.7.0 I am getting an error with setwd not encountered in 2.6.2
>
>
> setwd("/Users/markgrant/Documents/_projects/genetic/r")
>
> gives
>
> Error in setwd("/Users/markgrant/Documents/_projects/genetic/r") :
>   cannot change working directory
>
> However, I can change the working directory from the GUI
>

Not really except that the path may not be correct (I'm not sure what  
you mean "from the GUI" - I'm assuming you mean the interactive  
choice) or you're running the GUI as a different user than the command  
line. Try looking at the permissions - e.g. to the very least try
ls -l /Users/markgrant/Documents/_projects/genetic/r
and if that fails, you know it's wrong and/or you don't have the  
permissions and you probably want to go up along the directory  
structure to find out why(e.g. Document has usually very restrictive  
permissions).

Cheers,
Simon


From arcadiorubiogarcia at gmail.com  Mon May 12 20:29:01 2008
From: arcadiorubiogarcia at gmail.com (=?ISO-8859-1?Q?Arcadio_Rubio_Garc=EDa?=)
Date: Mon, 12 May 2008 20:29:01 +0200
Subject: [R-SIG-Mac] Fonts in Quartz Devices
Message-ID: <EA9C0BA3-8B71-44F3-BBD2-D578C942BCA9@gmail.com>

Hi,

I'm new to R. I'm using a Mac OS X 10.5.2 and R 2.7.0. I'm trying to  
change the font family for a plot in a quartz device.

Simply passing the desired font by using the family argument works  
with other devices, but not with quartz. For instance:

quartz(family="Monaco") or quartz(family="Courier") don't affect the  
font family of the output.

However, both commands work fine on 2.6.2. Is this a bug?

Any help much appreciated.


Regards,

A. Rubio


From marpan at stanford.edu  Mon May 12 21:16:01 2008
From: marpan at stanford.edu (Marcelo Pando)
Date: Mon, 12 May 2008 12:16:01 -0700
Subject: [R-SIG-Mac] Tcl/tk question
Message-ID: <C44DE581.94AB%marpan@stanford.edu>

Hi,
I'm trying to run Rcmdr and I got this message:

> library(Rcmdr)
Loading required package: tcltk
Loading Tcl/Tk interface ... Error in dyn.load(file, DLLpath = DLLpath, ...)
: 
  unable to load shared library
'/Library/Frameworks/R.framework/Versions/2.7/Resources/library/tcltk/libs/i
386/tcltk.so':
  
dlopen(/Library/Frameworks/R.framework/Versions/2.7/Resources/library/tcltk/
libs/i386/tcltk.so, 10): Library not loaded: /usr/X11R6/lib/libX11.6.dylib
  Referenced from: 
/Library/Frameworks/R.framework/Versions/2.7/Resources/library/tcltk/libs/i3
86/tcltk.so
  Reason: no suitable image found.  Did find:
    /usr/X11R6/lib/libX11.6.dylib: mach-o, but wrong architecture
Error : .onLoad failed in 'loadNamespace' for 'tcltk'
Error: package 'tcltk' could not be loaded
> 

I installed the required packages ( abind, car, effects, lmtest, multcomp,
mvtnorm, relimp, sandwich, strucchange, zoo and rgl) and run X11 before
running Rcmdr. But the Rcmdr window doesn't open.

Any suggestion?

Thanks

Marcelo


From simon.urbanek at r-project.org  Mon May 12 21:48:17 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 12 May 2008 15:48:17 -0400
Subject: [R-SIG-Mac] Tcl/tk question
In-Reply-To: <C44DE581.94AB%marpan@stanford.edu>
References: <C44DE581.94AB%marpan@stanford.edu>
Message-ID: <85C7E7A0-A225-450E-B7FA-685A40BF3B12@r-project.org>


On May 12, 2008, at 3:16 PM, Marcelo Pando wrote:

> Hi,
> I'm trying to run Rcmdr and I got this message:
>
>> library(Rcmdr)
> Loading required package: tcltk
> Loading Tcl/Tk interface ... Error in dyn.load(file, DLLpath =  
> DLLpath, ...)
> :
>  unable to load shared library
> '/Library/Frameworks/R.framework/Versions/2.7/Resources/library/ 
> tcltk/libs/i
> 386/tcltk.so':
>
> dlopen(/Library/Frameworks/R.framework/Versions/2.7/Resources/ 
> library/tcltk/
> libs/i386/tcltk.so, 10): Library not loaded: /usr/X11R6/lib/ 
> libX11.6.dylib
>  Referenced from:
> /Library/Frameworks/R.framework/Versions/2.7/Resources/library/tcltk/ 
> libs/i3
> 86/tcltk.so
>  Reason: no suitable image found.  Did find:
>    /usr/X11R6/lib/libX11.6.dylib: mach-o, but wrong architecture


^^^ -- it appears you have wrong X11 installed. The CRAN binary is  
tested only with Apple's X11, so if you have installed anything else,  
you're on your own (although it usually works, too).
If you want any more info, please post exactly what machine you are  
using, what OS version and X11.

Cheers,
Simon


>
> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
> Error: package 'tcltk' could not be loaded
>>
>
> I installed the required packages ( abind, car, effects, lmtest,  
> multcomp,
> mvtnorm, relimp, sandwich, strucchange, zoo and rgl) and run X11  
> before
> running Rcmdr. But the Rcmdr window doesn't open.
>
> Any suggestion?
>
> Thanks
>
> Marcelo
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From marpan at stanford.edu  Mon May 12 22:06:33 2008
From: marpan at stanford.edu (Marcelo Pando)
Date: Mon, 12 May 2008 13:06:33 -0700
Subject: [R-SIG-Mac] Tcl/tk question
Message-ID: <C44DF159.94B0%marpan@stanford.edu>

I found the problem, I updated the X11 (X11_10.4.1) with the X11 update 2006
and Rcmdr started working.
Thanks 

Marcelo

PS.  I'm using a MacBook with OSX 10.4.11


Hi,
I'm trying to run Rcmdr and I got this message:

> library(Rcmdr)
Loading required package: tcltk
Loading Tcl/Tk interface ... Error in dyn.load(file, DLLpath = DLLpath, ...)
: 
  unable to load shared library
'/Library/Frameworks/R.framework/Versions/2.7/Resources/library/tcltk/libs/i
386/tcltk.so':
  
dlopen(/Library/Frameworks/R.framework/Versions/2.7/Resources/library/tcltk/
libs/i386/tcltk.so, 10): Library not loaded: /usr/X11R6/lib/libX11.6.dylib
  Referenced from: 
/Library/Frameworks/R.framework/Versions/2.7/Resources/library/tcltk/libs/i3
86/tcltk.so
  Reason: no suitable image found.  Did find:
    /usr/X11R6/lib/libX11.6.dylib: mach-o, but wrong architecture
Error : .onLoad failed in 'loadNamespace' for 'tcltk'
Error: package 'tcltk' could not be loaded
> 

I installed the required packages ( abind, car, effects, lmtest, multcomp,
mvtnorm, relimp, sandwich, strucchange, zoo and rgl) and run X11 before
running Rcmdr. But the Rcmdr window doesn't open.

Any suggestion?

Thanks

Marcelo


From hinz.adam at gmail.com  Tue May 13 07:53:33 2008
From: hinz.adam at gmail.com (hinz.adam at gmail.com)
Date: Mon, 12 May 2008 22:53:33 -0700 (PDT)
Subject: [R-SIG-Mac] Xcode
Message-ID: <4b833452-b0fa-471f-bc78-c492149be755@27g2000hsf.googlegroups.com>

Hey, I have a question about including the R framework in a file. When
I attempt to use:

#include <R/R.h>

And compile I get the following error:
/Library/Frameworks/R.framework/Headers/R.h:40:21: error: Rconfig.h:
No such file or directory
/Library/Frameworks/R.framework/Headers/R.h:41:57: error: R_ext/
Arith.h: No such file or directory
/Library/Frameworks/R.framework/Headers/R.h:42:50: error: R_ext/
Boolean.h: No such file or directory
/Library/Frameworks/R.framework/Headers/R.h:43:50: error: R_ext/
Complex.h: No such file or directory

What am I doing wrong?

Thanks!
Adam


From ripley at stats.ox.ac.uk  Tue May 13 09:22:05 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 13 May 2008 08:22:05 +0100 (BST)
Subject: [R-SIG-Mac] Xcode
In-Reply-To: <4b833452-b0fa-471f-bc78-c492149be755@27g2000hsf.googlegroups.com>
References: <4b833452-b0fa-471f-bc78-c492149be755@27g2000hsf.googlegroups.com>
Message-ID: <alpine.LFD.1.10.0805130817010.2194@gannet.stats.ox.ac.uk>

On Mon, 12 May 2008, hinz.adam at gmail.com wrote:

> Hey, I have a question about including the R framework in a file. When
> I attempt to use:
>
> #include <R/R.h>

Did you really do that?  It is <R.h> that is documented.

> And compile I get the following error:
> /Library/Frameworks/R.framework/Headers/R.h:40:21: error: Rconfig.h:
> No such file or directory
> /Library/Frameworks/R.framework/Headers/R.h:41:57: error: R_ext/
> Arith.h: No such file or directory
> /Library/Frameworks/R.framework/Headers/R.h:42:50: error: R_ext/
> Boolean.h: No such file or directory
> /Library/Frameworks/R.framework/Headers/R.h:43:50: error: R_ext/
> Complex.h: No such file or directory
>
> What am I doing wrong?

We don't know what you are doing to answer that!  Please provide us with a 
transcript of what you did.  E.g. did you use R CMD SHLIB or R CMD COMPILE 
to do the compilation?  And what compiler command led to those errrors?

>
> Thanks!
> Adam
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From j.van_den_hoff at fzd.de  Tue May 13 14:34:52 2008
From: j.van_den_hoff at fzd.de (Joerg van den Hoff)
Date: Tue, 13 May 2008 14:34:52 +0200
Subject: [R-SIG-Mac] R 2.7.0 hangs after plotting to X11()
Message-ID: <20080513123452.GA106@marco.fz-rossendorf.de>

hi everybody,

some 10 days ago I posted my problems with 2.7.0 when plotting to the X11()
device (with it's new default type "cairo"). here's an excerpt from the previous
mails:

=================================CUT=================================
> >>>hi everybody,
> >>>
> >>>today  I  decided  (unwisely,  it  appears) to install 2.7.0
> >>>under MacOS 10.4.7. now, when I  run  R  from  the  terminal

which actually should read 10.4.11 ...

> >>>command line and do something like
> >>>
> >>>plot(1:10)
> >>>
> >>>a  X11 graphic window pops up, the 10 points are drawn on an
> >>>otherwise blank canvas (no axes, no labels, no  ticks  etc),
> >>>CPU  time  goes  to 100% and stays there and R does not come
> >>>back to the prompt ("hangs"). I tried to `ktrace'  this  but
> >>>this  produced a one Gig logfile in a few seconds from which
> >>>I learned nothing ...
> >>>

I'm still experiencing problems with cairo-based graphics and 2.7.0.: 

while the problem somehow went away on my powerbook g4 after having once
explicitly used `x11(type="Xlib")',  i.e. even after restart of R now plotting
procedes as it should, the same procedure was not successful on my tabletop ppc g5 (both
machines with macos 10.4.11.). here the problem persists as described in my
first mail: any plotting command, e.g.

plot(1:10) 

to the default x11 device (i.e. with type = "cairo")
plots only the data points on an otherwise empty canvas, then cpu time goes to
100% and R does not come back to the prompt ("hangs"). at which stage I can only
kill R, e.g. by throwing away the terminal running R (not responding to Ctrl-C
or Ctrl-D any more).

I have not the slightest idea what can go wrong specifically on my machine. any
suggestions what (and how) to log or where to look greatly appreciated.

joerg

=================================CUT=================================
I really would be thankful if somebody can point me in the right direction.

when I `ktrace' R until after issuing the plot-command I get a _huge_ output
file (a few hundred Meg in very short time) which for the most part shows
something like

10464 R        RET   read 4096/0x1000
10464 R        CALL  lseek(0xc,0x9f4000,0)
10464 R        RET   lseek 0
10464 R        CALL  read(0xc,0x1cd2a00,0x1000)
10464 R        GIO   fd 12 read 4096 bytes

which seemingly repeats infinitely. the strangest thing for me is, that
I first observed the described behaviour on both my machines (table top as well
as labtop ppc). but as explained above, plotting _once_ to X11(type="Xlib") 
"repaired" everything on the labtop: now plotting to X11(type="cairo") works
just fine for whatever reason. the same did _not_ happen on the tabletop
machine. here I `cairo' is definitily not working properly and I have to resort
to an explicit `X11(type="Xlib")' prior to plotting to avoid disaster.

has anybody seen the same behaviour?

help!

joerg


From simon.urbanek at r-project.org  Tue May 13 23:24:06 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 13 May 2008 17:24:06 -0400
Subject: [R-SIG-Mac] 2.7.0 for 64-bit running Leopard
In-Reply-To: <alpine.LFD.1.10.0805080546080.3094@gannet.stats.ox.ac.uk>
References: <D2508F3F-CF4E-4E2E-987F-4B385C938755@mit.edu>
	<alpine.LFD.1.10.0805080546080.3094@gannet.stats.ox.ac.uk>
Message-ID: <24C8596B-3A5D-4C91-9891-97B8133B7D76@r-project.org>

I fully agree with Brian on the points he made, just one technical  
detail inline:

On May 8, 2008, at 1:24 AM, Prof Brian Ripley wrote:
> I think you need to distinguish a release of R (which is a source  
> tarball) from a binary redistribution.  The sources are set up to  
> allow you to build x86_64 on MacOS, and also multiple architectures  
> (and have been for some time if you don't want MacOS-specific  
> features such as quartz() -- that came in 2.7.0).
>
> On Wed, 7 May 2008, Michael Braun wrote:
>
>> Is it possible to get some clarification regarding what is  
>> considered a "release" configuration of R and what is considered  
>> "experimental?"  I would like to run a 64-bit build of R 2.7.0 on  
>> an x86_64 Mac Pro with 18GB of RAM running Leopard (10.5.2).  When  
>> I install the precompiled "universal" binary,
>
> According to the FAQ 2.5, 'universal' means Intel and PowerPC.  The  
> package instructions in 5.4 are for i386 and ppc.
>
>> it appears that I am getting a 32-bit build (I think this because I  
>> cannot allocate objects of size >3GB and because .Platform 
>> $r_arch="i386").
>
> The real test is .Machine$sizeof.pointer .  'r_arch' is just a label.
>
>> I checked out the r.research.att.com site, but I am hesitant to  
>> install an "experimental" build.  Also, I tried compiling R myself,  
>> but ran into a large number of issues (including not passing make  
>> check, which I now see is addressed in the FAQ).
>
>> So my question is, once 10.5.3 is released, should the binary I  
>> download from CRAN install a 64-bit version of R?  Will I need to  
>> compile from source?  Or am I still too far ahead of the curve?
>
> I suggest you do compile from sources.  I find Apple's compilers  
> flaky and that is the issue.  Despite the comment in the FAQ, I've  
> had no problems with x86_64 on MacOS 10.5.2 *if I turn optimization  
> off* .  The issue with log10 appears to be on-CPU calls and not  
> calls to the log10 in libm.


I have to disagree on this point:

ginaz:sandbox$ gcc -m64 l10.c -o l10 -O0 && ./l10
log10(100)=0.000000, log10(10)=1.000000, log10(15)=0.000000

I get the same (incorrect result) regardless of compiler and  
optimization. Allegedly the problem is an ABI mismatch:
http://lists.apple.com/archives/scitech/2008/Mar/msg00032.html
In some code it may accidentally work if the register happened to load  
the same value in previous computations.

Best,
Simon

(PS: Sorry for the late reply, I had a work-around on my machine as  
well as beta compilers, so I had to test it on various other machines  
to make sure it is the "real" behavior. Reportedly only OS X 10.5.2  
libSystem is affected)

l10.c: int main() { printf("log10(100)=%f, log10(10)=%f, log10(15)=%f 
\n", log10(100), log10(10), log10(15)); return 0; }


>
> (OTOH, since I get higher performance from x86_64 Linux and Solaris  
> boxes, I haven't done extensive testing.)  Note that this may not be  
> the only such issue: gcc 4.3.x has a similar problem with sqrt on  
> x86_64 when optimizing.
> You'll need to compile everything from sources (including all  
> packages), and it does sometimes help to have the same compilers  
> used throughout.
>
>
>> Thanks,
>>
>> Michael
>>
>>
>>
>>
>>
>>
>> Michael Braun
>> Assistant Professor of Management Science (Marketing Group)
>> MIT Sloan School of Management
>> One Amherst St., E40-169
>> Cambridge, MA 02142
>> braunm at mit.edu
>> 617-253-3436
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From brant.inman at gmail.com  Wed May 14 05:47:13 2008
From: brant.inman at gmail.com (Brant Inman)
Date: Tue, 13 May 2008 22:47:13 -0500
Subject: [R-SIG-Mac] Executing a single line of code from the MAC text editor
Message-ID: <85ec3d6f0805132047m78142d0di84679fa09161c66c@mail.gmail.com>

R-experts:

I recently made the switch from PC to MAC (tired of Windows problems)
and as a result I am now learning how to use R on a MAC.   One command
that I used all the time in R for windows is <Control-R> to execute a
single line of code from the R text editor.  Is there a similar
command for the MAC text editor? So far, I have had to highlight the
line of code and use <Control-Return>.

Thanks in advance for your help on this simple issue.

Brant Inman
Mayo Clinic


From a.beckerman at sheffield.ac.uk  Wed May 14 09:54:20 2008
From: a.beckerman at sheffield.ac.uk (Andrew Beckerman)
Date: Wed, 14 May 2008 08:54:20 +0100
Subject: [R-SIG-Mac] Executing a single line of code from the MAC text
	editor
In-Reply-To: <85ec3d6f0805132047m78142d0di84679fa09161c66c@mail.gmail.com>
References: <85ec3d6f0805132047m78142d0di84679fa09161c66c@mail.gmail.com>
Message-ID: <4139C047-6CEE-4FB9-BB0B-D10C98E02B4A@sheffield.ac.uk>

Brant -

apple-Return, with the cursor on the line, works in the latest version.

Andrew

On 14 May 2008, at 04:47, Brant Inman wrote:

> R-experts:
>
> I recently made the switch from PC to MAC (tired of Windows problems)
> and as a result I am now learning how to use R on a MAC.   One command
> that I used all the time in R for windows is <Control-R> to execute a
> single line of code from the R text editor.  Is there a similar
> command for the MAC text editor? So far, I have had to highlight the
> line of code and use <Control-Return>.
>
> Thanks in advance for your help on this simple issue.
>
> Brant Inman
> Mayo Clinic
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From carl at witthoft.com  Thu May 15 00:14:30 2008
From: carl at witthoft.com (Carl Witthoft)
Date: Wed, 14 May 2008 18:14:30 -0400
Subject: [R-SIG-Mac] Help request w/ function argument names
In-Reply-To: <mailman.15.1210759204.21497.r-sig-mac@stat.math.ethz.ch>
References: <mailman.15.1210759204.21497.r-sig-mac@stat.math.ethz.ch>
Message-ID: <482B6446.6000106@witthoft.com>

Hi,
I've been trying to figure out if there's a way to return the actual 
names of the arguments passed to a function which uses ellipsis.

There's an example in Vincent Zoonekynd's <zoonek at math.jussieu.fr> 
manual that looks like this:

f <- function (...)
{
l <- list(...) # Put the arguments in a (named) list
for (i in seq(along=l))
{
cat("Argument name:", names(l)[i], "Value:", l[[i]], "
\n")
}
}


I don't know exactly what he thought would happen (or what happens from 
the command line?) but from the Mac Aqua GUI, names(l) evaluates to 
NULL, or possibly the 'names' attribute of the first element of the 
first argument passed to the function, if such exists.   And in fact 'l' 
  contains the values of all elements of the arguments to f.

So, is there any way to have the function 'f'  "know" what the names are 
of the arguments passed to it?  That is, if I type


 > f(foo,bar)

I would like to be able to have the strings 'foo' and 'bar' available 
somehow.

Any advice or comments greatly appreciated.

Carl


From macq at llnl.gov  Thu May 15 05:38:14 2008
From: macq at llnl.gov (Don MacQueen)
Date: Wed, 14 May 2008 20:38:14 -0700
Subject: [R-SIG-Mac] Help request w/ function argument names
In-Reply-To: <482B6446.6000106@witthoft.com>
References: <mailman.15.1210759204.21497.r-sig-mac@stat.math.ethz.ch>
	<482B6446.6000106@witthoft.com>
Message-ID: <p06240804c4515ee1054c@[192.168.11.8]>

Carl,

When I try Vincent's function in my R GUI, it works, and the argument 
names are available as strings:


>  f <- function (...)
+ {
+ l <- list(...) # Put the arguments in a (named) list
+ for (i in seq(along=l))
+ {
+ cat("Argument name:", names(l)[i], "Value:", l[[i]], "
+ \n")
+ }
+ }
>
>  f(x=3,y=2)
Argument name: x Value: 3

Argument name: y Value: 2


However, you do have to supply values along with the arguments:

>  x<-4
>  f(x,y=2)
Argument name:  Value: 4

Argument name: y Value: 2


By the way, this is not a Mac issue. It has to do with environments 
and how arguments are passed.

list(...) has names only for those arguments that are supplied as 
named arguments, and in
      > f(x,y=2)
the second argument is named but the first is not. Well, that is, I 
think I'm using proper terminology.


-Don


At 6:14 PM -0400 5/14/08, Carl Witthoft wrote:
>Hi,
>I've been trying to figure out if there's a way to return the actual 
>names of the arguments passed to a function which uses ellipsis.
>
>There's an example in Vincent Zoonekynd's <zoonek at math.jussieu.fr> 
>manual that looks like this:
>
>f <- function (...)
>{
>l <- list(...) # Put the arguments in a (named) list
>for (i in seq(along=l))
>{
>cat("Argument name:", names(l)[i], "Value:", l[[i]], "
>\n")
>}
>}
>
>
>I don't know exactly what he thought would happen (or what happens 
>from the command line?) but from the Mac Aqua GUI, names(l) 
>evaluates to NULL, or possibly the 'names' attribute of the first 
>element of the first argument passed to the function, if such 
>exists.   And in fact 'l'  contains the values of all elements of 
>the arguments to f.
>
>So, is there any way to have the function 'f'  "know" what the names 
>are of the arguments passed to it?  That is, if I type
>
>
>>  f(foo,bar)
>
>I would like to be able to have the strings 'foo' and 'bar' available somehow.
>
>Any advice or comments greatly appreciated.
>
>Carl
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
---------------------------------
Don MacQueen
Lawrence Livermore National Laboratory
Livermore, CA, USA
925-423-1062
macq at llnl.gov


From smckinney at bccrc.ca  Thu May 15 05:40:46 2008
From: smckinney at bccrc.ca (Steven McKinney)
Date: Wed, 14 May 2008 20:40:46 -0700
Subject: [R-SIG-Mac] Help request w/ function argument names
References: <mailman.15.1210759204.21497.r-sig-mac@stat.math.ethz.ch>
	<482B6446.6000106@witthoft.com>
Message-ID: <0BE438149FF2254DB4199E2682C8DFEB0328A2D3@crcmail1.BCCRC.CA>

Hi Carl,

> Hi,
> I've been trying to figure out if there's a way to return the actual
> names of the arguments passed to a function which uses ellipsis.
> 
> There's an example in Vincent Zoonekynd's <zoonek at math.jussieu.fr>
> manual that looks like this:
> 
> f <- function (...)
> {
> l <- list(...) # Put the arguments in a (named) list
> for (i in seq(along=l))
> {
> cat("Argument name:", names(l)[i], "Value:", l[[i]], "
> \n")
> }
> }
> 
> 
> I don't know exactly what he thought would happen (or what happens from
> the command line?) but from the Mac Aqua GUI, names(l) evaluates to
> NULL, or possibly the 'names' attribute of the first element of the
> first argument passed to the function, if such exists.   And in fact 'l'
>   contains the values of all elements of the arguments to f.


This function only works for arguments which are assigned a value that
exists in scope.


> exists("foo")
[1] FALSE
> exists("bar")
[1] FALSE
> 
> f <- function (...)
+ {
+   l <- list(...) ## Put the arguments in a (named) list
+   for (i in seq(along=l))
+     {
+       cat("Argument name:", names(l)[i], "Value:", l[[i]], "\n")
+     }
+ }
> f(foo = 1, bar = 2)
Argument name: foo Value: 1 
Argument name: bar Value: 2 
> f(foo = bar, bar = 2)
Error in f(foo = bar, bar = 2) : object "bar" not found
> f(foo = 2, bar = foo)
Error in f(foo = 2, bar = foo) : object "foo" not found
> f(foo = baz, bar = 2)
Error in f(foo = baz, bar = 2) : object "baz" not found
> f(foo, bar = 2)
Error in f(foo, bar = 2) : object "foo" not found
> f(foo, bar)
Error in f(foo, bar) : object "foo" not found
> 

The first call to the function worked as the arguments were assigned
known values.  The others did not as an unknown object was encountered.


> 
> So, is there any way to have the function 'f'  "know" what the names are
> of the arguments passed to it?  That is, if I type
> 
> 
>  > f(foo,bar)
> 
> I would like to be able to have the strings 'foo' and 'bar' available
> somehow.

The way to do this is with the match.call() function, and the
deparse() function.  (Put a browser() command inside this function and
you can poke around the various pieces.)

The call object returned by match.call() will have no names if the
arguments comprising ... have no assignments.  The call object
components can be extracted using the list element extractor [[ ]] and
the deparse() wrapper ensures the parser does not try to evaluate the
possibly non-existent argument objects.  (I skipped the first element
of the match.call() return object, which is the name of the function.)



> f <- function (...) {
+   mc <- match.call()
+   mct <- deparse(substitute(mc))
+   ## browser() ## uncomment this browser command to start your evening of fun.
+   cat("\n")
+   cat("deparsed match call:", mct)
+   cat("\n")
+ 
+   if ( length(names(mc)) ) {
+     for ( i in seq(along = names(mc)[-1]) ) {
+       cat("Argument ", i, " name:", names(mc)[i+1], "Value:", deparse(mc[[i+1]]), "\n")
+     }
+   } else {
+     for ( i in seq(length(mc) - 1) ) {
+       cat("Argument ", i, " name:", "", "Value:", deparse(mc[[i+1]]), "\n")
+     }
+   }
+ }
> 
> f(foo, bar)

deparsed match call: f(foo, bar)
Argument  1  name:  Value: foo 
Argument  2  name:  Value: bar 
> f(foo, bar, baz = 1)

deparsed match call: f(foo, bar, baz = 1)
Argument  1  name:  Value: foo 
Argument  2  name:  Value: bar 
Argument  3  name: baz Value: 1 
> f(foo = 1, bar = 2)

deparsed match call: f(foo = 1, bar = 2)
Argument  1  name: foo Value: 1 
Argument  2  name: bar Value: 2 
> f(foo = bar, bar = 2)

deparsed match call: f(foo = bar, bar = 2)
Argument  1  name: foo Value: bar 
Argument  2  name: bar Value: 2 
> f(foo = 2, bar = foo)

deparsed match call: f(foo = 2, bar = foo)
Argument  1  name: foo Value: 2 
Argument  2  name: bar Value: foo 
> f(foo = baz, bar = 2)

deparsed match call: f(foo = baz, bar = 2)
Argument  1  name: foo Value: baz 
Argument  2  name: bar Value: 2 
> 

My session info:

> sessionInfo()
R version 2.7.0 (2008-04-22) 
powerpc-apple-darwin8.10.1 

locale:
C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
> 



Hope this helps.

Steve McKinney


> 
> Any advice or comments greatly appreciated.
> 
> Carl
> 


From pjo at cisunix.unh.edu  Thu May 15 15:39:26 2008
From: pjo at cisunix.unh.edu (Paul J. Ossenbruggen)
Date: Thu, 15 May 2008 09:39:26 -0400
Subject: [R-SIG-Mac] nb2WB and sp2WB
Message-ID: <35CFA3F5-C9FF-434A-9CC3-49719AD65D07@cisunix.unh.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080515/961c8f6d/attachment.pl>

From dkaplan at education.wisc.edu  Thu May 15 22:15:15 2008
From: dkaplan at education.wisc.edu (David Kaplan)
Date: Thu, 15 May 2008 15:15:15 -0500
Subject: [R-SIG-Mac] Error scan update to question
Message-ID: <482C99D3.8090501@education.wisc.edu>

Hi all,

I was asked to provide a bit more information.  Here is the output to 
the problem.  Note that I changed the data format to tab-delimited and 
also used read.table, but to no avail.  The problem is exactly the same 
when I use .csv data and read.csv.  The program I'm using is John Fox's 
SEM program within R for Mac.   The 2123 is the sample size and there 
are no missing data values, or any other peculiarities as far as I can 
see.  The data are clean.



 > ## CFA for Kerry Data Set, Question 3
 > ## load the sem package
 >
 > KerryQ3 <- read.table("~/Desktop/KerryQ3a.txt", header=TRUE)
 > KerryQ3cov <- cov(KerryQ3)
 > model.KerryQ3 <- specify.model()
1: f1 -> calcm, lam11, NA
2: f1 -> phytoc, lam21, NA    
3: f1 -> soypro, lam31, NA
4: f1 -> antiox, lam41, NA
5: f1 -> fiber, lam51, NA
6: f1 -> vitmin, lam61, NA
7: f1 -> protn, lam71, NA
8: f1 -> monoft, lam81, NA
9: f1 -> omega3, lam91, NA
10: f2 -> chol, lam102, NA
11: f2 -> fat, lam112, NA
12: f2 -> sugar, lam122, NA
13: f2 -> calor, lam132, NA
14: f2 -> recarb, lam142, NA
15: f2 -> trnsft, lam152, NA
16: f2 -> sodium, lam162, NA
17: f2 -> satfat, lam172, NA
18: f1 <-> f1, NA, 1
19: f2 <-> f2, NA, 1
20: f1 <-> f2, ph21, NA
21: calcm <-> calcm, th1, NA
22: phytoc <-> phytoc, th2, NA
23: soypro <-> soypro, th3, NA
24: antiox <-> antiox, th4, NA
25: fiber <-> fiber, th5, NA
26: vitmin <-> vitmin, th6, NA
27: protn <-> protn, th7, NA
28: monoft <-> monoft, th8, NA
29: omega3 <-> omega3, th9, NA
30: chol <-> chol, th10, NA
31: fat <-> fat, th11, NA
32: sugar <-> sugar, th12, NA
33: calor <-> calor, th13, NA
34: recarb <-> recarb, th14, NA
35: trnsft <-> trnsft, th15, NA
36: sodium <-> sodium, th16, NA
37: satfat <-> satfat, th17, NA
38: sem.model.KerryQ3 <- sem(model.KerryQ3, KerryQ3cov, 2123)
38: summary (sem.model.KerryQ3)
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, 
na.strings,  :
  scan() expected 'a real', got '2123)'
 > std.KerryQ3 <- standardized.coefficients(sem.model.KerryQ3)
Error in standardized.coefficients(sem.model.KerryQ3) :
  object "sem.model.KerryQ3" not found
 >

-- 
===============================================================
David Kaplan, Ph.D.
Professor
Department of Educational Psychology
University of Wisconsin - Madison
Educational Sciences, Room, 1061
1025 W. Johnson Street
Madison, WI 53706

email: dkaplan at education dot wisc dot edu
homepage:
http://www.education.wisc.edu/edpsych/facstaff/kaplan/kaplan.htm
Phone: 608-262-0836


From carl at witthoft.com  Thu May 15 23:17:56 2008
From: carl at witthoft.com (Carl Witthoft)
Date: Thu, 15 May 2008 17:17:56 -0400
Subject: [R-SIG-Mac] R-SIG-Mac Digest, Vol 63, Issue 13
In-Reply-To: <mailman.13.1210845603.10791.r-sig-mac@stat.math.ethz.ch>
References: <mailman.13.1210845603.10791.r-sig-mac@stat.math.ethz.ch>
Message-ID: <482CA884.1060503@witthoft.com>

(also sent privately)

Thanks to all who explained this to me;

and here's a cheap hack that works pretty well:


Use a 'dummy' variable:

f(...,zznamer=substitute(...))

list<-as.character(zznamer)

and that works pretty well.

r-sig-mac-request at stat.math.ethz.ch wrote:
     1.  Help request w/ function argument names (Carl Witthoft)
>    2. Re:  Help request w/ function argument names (Don MacQueen)
>    3. Re:  Help request w/ function argument names (Steven McKinney)


From kjbeath at kagi.com  Thu May 15 23:19:57 2008
From: kjbeath at kagi.com (Ken Beath)
Date: Fri, 16 May 2008 07:19:57 +1000
Subject: [R-SIG-Mac] Error scan update to question
In-Reply-To: <482C99D3.8090501@education.wisc.edu>
References: <482C99D3.8090501@education.wisc.edu>
Message-ID: <3B389A16-4BB1-47AD-842E-5E3898D89CFC@kagi.com>

Hi,

The problem is that specify.model() is not terminating its input and  
so is reading R commands, see line 38. I have only looked at sem, but  
maybe a blank line will work.

Ken

On 16/05/2008, at 6:15 AM, David Kaplan wrote:

> Hi all,
>
> I was asked to provide a bit more information.  Here is the output  
> to the problem.  Note that I changed the data format to tab- 
> delimited and also used read.table, but to no avail.  The problem is  
> exactly the same when I use .csv data and read.csv.  The program I'm  
> using is John Fox's SEM program within R for Mac.   The 2123 is the  
> sample size and there are no missing data values, or any other  
> peculiarities as far as I can see.  The data are clean.
>
>
>
> > ## CFA for Kerry Data Set, Question 3
> > ## load the sem package
> >
> > KerryQ3 <- read.table("~/Desktop/KerryQ3a.txt", header=TRUE)
> > KerryQ3cov <- cov(KerryQ3)
> > model.KerryQ3 <- specify.model()
> 1: f1 -> calcm, lam11, NA
> 2: f1 -> phytoc, lam21, NA    3: f1 -> soypro, lam31, NA
> 4: f1 -> antiox, lam41, NA
> 5: f1 -> fiber, lam51, NA
> 6: f1 -> vitmin, lam61, NA
> 7: f1 -> protn, lam71, NA
> 8: f1 -> monoft, lam81, NA
> 9: f1 -> omega3, lam91, NA
> 10: f2 -> chol, lam102, NA
> 11: f2 -> fat, lam112, NA
> 12: f2 -> sugar, lam122, NA
> 13: f2 -> calor, lam132, NA
> 14: f2 -> recarb, lam142, NA
> 15: f2 -> trnsft, lam152, NA
> 16: f2 -> sodium, lam162, NA
> 17: f2 -> satfat, lam172, NA
> 18: f1 <-> f1, NA, 1
> 19: f2 <-> f2, NA, 1
> 20: f1 <-> f2, ph21, NA
> 21: calcm <-> calcm, th1, NA
> 22: phytoc <-> phytoc, th2, NA
> 23: soypro <-> soypro, th3, NA
> 24: antiox <-> antiox, th4, NA
> 25: fiber <-> fiber, th5, NA
> 26: vitmin <-> vitmin, th6, NA
> 27: protn <-> protn, th7, NA
> 28: monoft <-> monoft, th8, NA
> 29: omega3 <-> omega3, th9, NA
> 30: chol <-> chol, th10, NA
> 31: fat <-> fat, th11, NA
> 32: sugar <-> sugar, th12, NA
> 33: calor <-> calor, th13, NA
> 34: recarb <-> recarb, th14, NA
> 35: trnsft <-> trnsft, th15, NA
> 36: sodium <-> sodium, th16, NA
> 37: satfat <-> satfat, th17, NA
> 38: sem.model.KerryQ3 <- sem(model.KerryQ3, KerryQ3cov, 2123)
> 38: summary (sem.model.KerryQ3)
> Error in scan(file, what, nmax, sep, dec, quote, skip, nlines,  
> na.strings,  :
> scan() expected 'a real', got '2123)'
> > std.KerryQ3 <- standardized.coefficients(sem.model.KerryQ3)
> Error in standardized.coefficients(sem.model.KerryQ3) :
> object "sem.model.KerryQ3" not found
> >
>
> -- 
> ===============================================================
> David Kaplan, Ph.D.
> Professor
> Department of Educational Psychology
> University of Wisconsin - Madison
> Educational Sciences, Room, 1061
> 1025 W. Johnson Street
> Madison, WI 53706
>
> email: dkaplan at education dot wisc dot edu
> homepage:
> http://www.education.wisc.edu/edpsych/facstaff/kaplan/kaplan.htm
> Phone: 608-262-0836
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From macq at llnl.gov  Fri May 16 18:39:05 2008
From: macq at llnl.gov (Don MacQueen)
Date: Fri, 16 May 2008 09:39:05 -0700
Subject: [R-SIG-Mac] Error scan update to question
In-Reply-To: <3B389A16-4BB1-47AD-842E-5E3898D89CFC@kagi.com>
References: <482C99D3.8090501@education.wisc.edu>
	<3B389A16-4BB1-47AD-842E-5E3898D89CFC@kagi.com>
Message-ID: <p06230901c45367aeb00e@[128.115.92.33]>

It looks to me like Ken is correct.

I you read the help page for specify.model(), it says that when no 
input file is specified (as here), then input comes from the 
"standard input stream" (i.e., the keyboard) and is terminated by a 
blank line.

There is no blank line after input line #37

>>36: sodium <-> sodium, th16, NA
>>37: satfat <-> satfat, th17, NA
>>38: sem.model.KerryQ3 <- sem(model.KerryQ3, KerryQ3cov, 2123)
>>38: summary (sem.model.KerryQ3)


David, did you really type in all those lines of the form
    f1 ->
    f2 ->
and so on???

I'd have at least put them in a file, and then given the file name to 
specify.model() !

-Don

At 7:19 AM +1000 5/16/08, Ken Beath wrote:
>Hi,
>
>The problem is that specify.model() is not terminating its input and 
>so is reading R commands, see line 38. I have only looked at sem, 
>but maybe a blank line will work.
>
>Ken
>
>On 16/05/2008, at 6:15 AM, David Kaplan wrote:
>
>>Hi all,
>>
>>I was asked to provide a bit more information.  Here is the output 
>>to the problem.  Note that I changed the data format to 
>>tab-delimited and also used read.table, but to no avail.  The 
>>problem is exactly the same when I use .csv data and read.csv.  The 
>>program I'm using is John Fox's SEM program within R for Mac.   The 
>>2123 is the sample size and there are no missing data values, or 
>>any other peculiarities as far as I can see.  The data are clean.
>>
>>
>>
>>>  ## CFA for Kerry Data Set, Question 3
>>>  ## load the sem package
>>>
>>>  KerryQ3 <- read.table("~/Desktop/KerryQ3a.txt", header=TRUE)
>>>  KerryQ3cov <- cov(KerryQ3)
>>>  model.KerryQ3 <- specify.model()
>>1: f1 -> calcm, lam11, NA
>>2: f1 -> phytoc, lam21, NA    3: f1 -> soypro, lam31, NA
>>4: f1 -> antiox, lam41, NA
>>5: f1 -> fiber, lam51, NA
>>6: f1 -> vitmin, lam61, NA
>>7: f1 -> protn, lam71, NA
>>8: f1 -> monoft, lam81, NA
>>9: f1 -> omega3, lam91, NA
>>10: f2 -> chol, lam102, NA
>>11: f2 -> fat, lam112, NA
>>12: f2 -> sugar, lam122, NA
>>13: f2 -> calor, lam132, NA
>>14: f2 -> recarb, lam142, NA
>>15: f2 -> trnsft, lam152, NA
>>16: f2 -> sodium, lam162, NA
>>17: f2 -> satfat, lam172, NA
>>18: f1 <-> f1, NA, 1
>>19: f2 <-> f2, NA, 1
>>20: f1 <-> f2, ph21, NA
>>21: calcm <-> calcm, th1, NA
>>22: phytoc <-> phytoc, th2, NA
>>23: soypro <-> soypro, th3, NA
>>24: antiox <-> antiox, th4, NA
>>25: fiber <-> fiber, th5, NA
>>26: vitmin <-> vitmin, th6, NA
>>27: protn <-> protn, th7, NA
>>28: monoft <-> monoft, th8, NA
>>29: omega3 <-> omega3, th9, NA
>>30: chol <-> chol, th10, NA
>>31: fat <-> fat, th11, NA
>>32: sugar <-> sugar, th12, NA
>>33: calor <-> calor, th13, NA
>>34: recarb <-> recarb, th14, NA
>>35: trnsft <-> trnsft, th15, NA
>>36: sodium <-> sodium, th16, NA
>>37: satfat <-> satfat, th17, NA
>>38: sem.model.KerryQ3 <- sem(model.KerryQ3, KerryQ3cov, 2123)
>>38: summary (sem.model.KerryQ3)
>>Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :
>>scan() expected 'a real', got '2123)'
>>>  std.KerryQ3 <- standardized.coefficients(sem.model.KerryQ3)
>>Error in standardized.coefficients(sem.model.KerryQ3) :
>>object "sem.model.KerryQ3" not found
>>>
>>
>>--
>>===============================================================
>>David Kaplan, Ph.D.
>>Professor
>>Department of Educational Psychology
>>University of Wisconsin - Madison
>>Educational Sciences, Room, 1061
>>1025 W. Johnson Street
>>Madison, WI 53706
>>
>>email: dkaplan at education dot wisc dot edu
>>homepage:
>>http://www.education.wisc.edu/edpsych/facstaff/kaplan/kaplan.htm
>>Phone: 608-262-0836
>>
>>_______________________________________________
>>R-SIG-Mac mailing list
>>R-SIG-Mac at stat.math.ethz.ch
>>https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
925-423-1062


From dkaplan at education.wisc.edu  Fri May 16 20:44:49 2008
From: dkaplan at education.wisc.edu (David Kaplan)
Date: Fri, 16 May 2008 13:44:49 -0500
Subject: [R-SIG-Mac] Error scan update to question
In-Reply-To: <p06230901c45367aeb00e@[128.115.92.33]>
References: <482C99D3.8090501@education.wisc.edu>
	<3B389A16-4BB1-47AD-842E-5E3898D89CFC@kagi.com>
	<p06230901c45367aeb00e@[128.115.92.33]>
Message-ID: <482DD621.3070905@education.wisc.edu>

Thanks Don.  This is very helpful.  I know about the input lines, but 
this was for a class assignment.

David


===============================================================
David Kaplan, Ph.D.
Professor
Department of Educational Psychology
University of Wisconsin - Madison
Educational Sciences, Room, 1061
1025 W. Johnson Street
Madison, WI 53706

email: dkaplan at education dot wisc dot edu
homepage:
http://www.education.wisc.edu/edpsych/facstaff/kaplan/kaplan.htm
Phone: 608-262-0836
===============================================================





Don MacQueen wrote:
> It looks to me like Ken is correct.
>
> I you read the help page for specify.model(), it says that when no 
> input file is specified (as here), then input comes from the "standard 
> input stream" (i.e., the keyboard) and is terminated by a blank line.
>
> There is no blank line after input line #37
>
>>> 36: sodium <-> sodium, th16, NA
>>> 37: satfat <-> satfat, th17, NA
>>> 38: sem.model.KerryQ3 <- sem(model.KerryQ3, KerryQ3cov, 2123)
>>> 38: summary (sem.model.KerryQ3)
>
>
> David, did you really type in all those lines of the form
>    f1 ->
>    f2 ->
> and so on???
>
> I'd have at least put them in a file, and then given the file name to 
> specify.model() !
>
> -Don
>
> At 7:19 AM +1000 5/16/08, Ken Beath wrote:
>> Hi,
>>
>> The problem is that specify.model() is not terminating its input and 
>> so is reading R commands, see line 38. I have only looked at sem, but 
>> maybe a blank line will work.
>>
>> Ken
>>
>> On 16/05/2008, at 6:15 AM, David Kaplan wrote:
>>
>>> Hi all,
>>>
>>> I was asked to provide a bit more information.  Here is the output 
>>> to the problem.  Note that I changed the data format to 
>>> tab-delimited and also used read.table, but to no avail.  The 
>>> problem is exactly the same when I use .csv data and read.csv.  The 
>>> program I'm using is John Fox's SEM program within R for Mac.   The 
>>> 2123 is the sample size and there are no missing data values, or any 
>>> other peculiarities as far as I can see.  The data are clean.
>>>
>>>
>>>
>>>>  ## CFA for Kerry Data Set, Question 3
>>>>  ## load the sem package
>>>>
>>>>  KerryQ3 <- read.table("~/Desktop/KerryQ3a.txt", header=TRUE)
>>>>  KerryQ3cov <- cov(KerryQ3)
>>>>  model.KerryQ3 <- specify.model()
>>> 1: f1 -> calcm, lam11, NA
>>> 2: f1 -> phytoc, lam21, NA    3: f1 -> soypro, lam31, NA
>>> 4: f1 -> antiox, lam41, NA
>>> 5: f1 -> fiber, lam51, NA
>>> 6: f1 -> vitmin, lam61, NA
>>> 7: f1 -> protn, lam71, NA
>>> 8: f1 -> monoft, lam81, NA
>>> 9: f1 -> omega3, lam91, NA
>>> 10: f2 -> chol, lam102, NA
>>> 11: f2 -> fat, lam112, NA
>>> 12: f2 -> sugar, lam122, NA
>>> 13: f2 -> calor, lam132, NA
>>> 14: f2 -> recarb, lam142, NA
>>> 15: f2 -> trnsft, lam152, NA
>>> 16: f2 -> sodium, lam162, NA
>>> 17: f2 -> satfat, lam172, NA
>>> 18: f1 <-> f1, NA, 1
>>> 19: f2 <-> f2, NA, 1
>>> 20: f1 <-> f2, ph21, NA
>>> 21: calcm <-> calcm, th1, NA
>>> 22: phytoc <-> phytoc, th2, NA
>>> 23: soypro <-> soypro, th3, NA
>>> 24: antiox <-> antiox, th4, NA
>>> 25: fiber <-> fiber, th5, NA
>>> 26: vitmin <-> vitmin, th6, NA
>>> 27: protn <-> protn, th7, NA
>>> 28: monoft <-> monoft, th8, NA
>>> 29: omega3 <-> omega3, th9, NA
>>> 30: chol <-> chol, th10, NA
>>> 31: fat <-> fat, th11, NA
>>> 32: sugar <-> sugar, th12, NA
>>> 33: calor <-> calor, th13, NA
>>> 34: recarb <-> recarb, th14, NA
>>> 35: trnsft <-> trnsft, th15, NA
>>> 36: sodium <-> sodium, th16, NA
>>> 37: satfat <-> satfat, th17, NA
>>> 38: sem.model.KerryQ3 <- sem(model.KerryQ3, KerryQ3cov, 2123)
>>> 38: summary (sem.model.KerryQ3)
>>> Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, 
>>> na.strings,  :
>>> scan() expected 'a real', got '2123)'
>>>>  std.KerryQ3 <- standardized.coefficients(sem.model.KerryQ3)
>>> Error in standardized.coefficients(sem.model.KerryQ3) :
>>> object "sem.model.KerryQ3" not found
>>>>
>>>
>>> -- 
>>> ===============================================================
>>> David Kaplan, Ph.D.
>>> Professor
>>> Department of Educational Psychology
>>> University of Wisconsin - Madison
>>> Educational Sciences, Room, 1061
>>> 1025 W. Johnson Street
>>> Madison, WI 53706
>>>
>>> email: dkaplan at education dot wisc dot edu
>>> homepage:
>>> http://www.education.wisc.edu/edpsych/facstaff/kaplan/kaplan.htm
>>> Phone: 608-262-0836
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From terhorab at mac.com  Tue May 20 13:32:14 2008
From: terhorab at mac.com (Gerald Jurasinski)
Date: Tue, 20 May 2008 13:32:14 +0200
Subject: [R-SIG-Mac] Saving pdf with transparent background
Message-ID: <CA13485A-C74B-4C9A-B08C-C567B3D78381@mac.com>

Dear List,

Usually I save my current graphics device window to a pdf file. Before  
2.7.0 the resulting file was with transparent background (as desired)  
when I set bg="transparent" for the current on-screen graphics device  
before plotting.

Now this is different. I already read about the new quartz device in  
the help file. And as far as I understood, only the canvas is supposed  
to be opaque and not the background of the plot (at least when it is  
set to "transparent" via par(bg="transparent") or via  
quartz(bg="transparent")). So when it comes to saving the plot from  
the current on-screen graphics device I expect the resulting graphic  
file to have a transparent background. This was the former behavior  
(until 2.6.2). But now the background color of the canvas seems to be  
taken as the background of the resulting pdf.

Only with quartz.save() I can get a transparent background. Is there a  
possibility to save the active on-screen graphics device to a file  
with transparent background? Even better would be the possibility to  
cmd-c / cmd-v a plot with transparent background to use in other  
applications (e.g. keynote and such).

Thanks for your help.
Best regards

Gerald

I'm running R on a MBP 2.2GHz C2D with Mac OS 10.5.2

 > sessionInfo()
R version 2.7.0 (2008-04-22)
i386-apple-darwin8.10.1

locale:
de_DE.UTF-8/de_DE.UTF-8/C/C/de_DE.UTF-8/de_DE.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] simba_0.2-5   plotrix_2.4-1 geoR_1.6-21   sp_0.9-25     gplots_2.6.0
[6] gdata_2.4.1   gtools_2.4.0  vegan_1.11-4

loaded via a namespace (and not attached):
[1] grid_2.7.0     lattice_0.17-6 tools_2.7.0

??????????????????

gerald jurasinski
fahnenstra?e 8
18057 rostock
terhorab at mac.com
+49 381 8774550


From i.visser at uva.nl  Tue May 20 17:05:09 2008
From: i.visser at uva.nl (Ingmar Visser)
Date: Tue, 20 May 2008 17:05:09 +0200
Subject: [R-SIG-Mac] lib location different between GUI and terminal?
Message-ID: <C1230BD4-76FC-4E5B-9CC9-DD9B40874AB3@uva.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080520/81ca9435/attachment.pl>

From simon.urbanek at r-project.org  Tue May 20 17:22:44 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 20 May 2008 11:22:44 -0400
Subject: [R-SIG-Mac] lib location different between GUI and terminal?
In-Reply-To: <C1230BD4-76FC-4E5B-9CC9-DD9B40874AB3@uva.nl>
References: <C1230BD4-76FC-4E5B-9CC9-DD9B40874AB3@uva.nl>
Message-ID: <2695E731-7F3A-4696-B399-3D093CA321B2@r-project.org>


On May 20, 2008, at 11:05 AM, Ingmar Visser wrote:

> Hi all,
>
> I just installed a package using the GUI and install.packages( etc)
>
> The I opened the terminal and ran R from there and tried to load the
> package which
> returned with an error saying the package was not available which
> seemed strange to me.
>
> ?install.packages says that the default location for installing
> packages is
> .libPaths()[1]
>
> but this turns out to be different in the GUI:
>
> "/Users/ivisser/Library/R/2.7/library"
>

Apparently you told the GUI to set it, see R -> Preferences -> Startup  
-> Default Library Paths

That setting is often used by users that either don't have admin  
privileges or want to keep their set of packages separate from the  
system ones. The default is off, so you must have enabled it at some  
point.

Cheers,
Simon



> then when R is run from the terminal, which gives:
>
>> .libPaths()[1]
> [1] "/Library/Frameworks/R.framework/Resources/library"
>
> Is this caused by my settings or is this default behavior? (I don't
> remember
> ever having this problem before).
>
> Best, Ingmar
>
> Ingmar Visser
> Department of Psychology, University of Amsterdam
> Roetersstraat 15
> 1018 WB Amsterdam
> The Netherlands
> t: +31-20-5256723
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From simon.urbanek at r-project.org  Tue May 20 17:36:16 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 20 May 2008 11:36:16 -0400
Subject: [R-SIG-Mac] Saving pdf with transparent background
In-Reply-To: <CA13485A-C74B-4C9A-B08C-C567B3D78381@mac.com>
References: <CA13485A-C74B-4C9A-B08C-C567B3D78381@mac.com>
Message-ID: <B3FDE5B0-FCF0-4CC1-A838-F792EC97C9CA@r-project.org>


On May 20, 2008, at 7:32 AM, Gerald Jurasinski wrote:

> Dear List,
>
> Usually I save my current graphics device window to a pdf file.  
> Before 2.7.0 the resulting file was with transparent background (as  
> desired) when I set bg="transparent" for the current on-screen  
> graphics device before plotting.
>
> Now this is different. I already read about the new quartz device in  
> the help file. And as far as I understood, only the canvas is  
> supposed to be opaque and not the background of the plot (at least  
> when it is set to "transparent" via par(bg="transparent") or via  
> quartz(bg="transparent")). So when it comes to saving the plot from  
> the current on-screen graphics device I expect the resulting graphic  
> file to have a transparent background. This was the former behavior  
> (until 2.6.2). But now the background color of the canvas seems to  
> be taken as the background of the resulting pdf.
>

Yes, the copy/save was really truthful even to the point of using the  
same canvas. I have fixed this to match the previous behavior which  
seems more logical to me.

Thanks,
Simon


> Only with quartz.save() I can get a transparent background. Is there  
> a possibility to save the active on-screen graphics device to a file  
> with transparent background? Even better would be the possibility to  
> cmd-c / cmd-v a plot with transparent background to use in other  
> applications (e.g. keynote and such).
>
> Thanks for your help.
> Best regards
>
> Gerald
>
> I'm running R on a MBP 2.2GHz C2D with Mac OS 10.5.2
>
> > sessionInfo()
> R version 2.7.0 (2008-04-22)
> i386-apple-darwin8.10.1
>
> locale:
> de_DE.UTF-8/de_DE.UTF-8/C/C/de_DE.UTF-8/de_DE.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] simba_0.2-5   plotrix_2.4-1 geoR_1.6-21   sp_0.9-25      
> gplots_2.6.0
> [6] gdata_2.4.1   gtools_2.4.0  vegan_1.11-4
>
> loaded via a namespace (and not attached):
> [1] grid_2.7.0     lattice_0.17-6 tools_2.7.0
>
> ??????????????????
>
> gerald jurasinski
> fahnenstra?e 8
> 18057 rostock
> terhorab at mac.com
> +49 381 8774550
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From i.visser at uva.nl  Tue May 20 18:13:54 2008
From: i.visser at uva.nl (Ingmar Visser)
Date: Tue, 20 May 2008 18:13:54 +0200
Subject: [R-SIG-Mac] lib location different between GUI and terminal?
In-Reply-To: <2695E731-7F3A-4696-B399-3D093CA321B2@r-project.org>
References: <C1230BD4-76FC-4E5B-9CC9-DD9B40874AB3@uva.nl>
	<2695E731-7F3A-4696-B399-3D093CA321B2@r-project.org>
Message-ID: <F7204E13-BAA0-4F00-9D91-B4EE0689222F@uva.nl>

I did not do anything of the sorts, unless it was subconsciously, I  
had just freshly installed 2.7.0
Could it be accidentally set somehow? Through the package installer  
menu?
Just wild guesses here ...
Best, Ingmar

On May 20, 2008, at 5:22 PM, Simon Urbanek wrote:

>
> On May 20, 2008, at 11:05 AM, Ingmar Visser wrote:
>
>> Hi all,
>>
>> I just installed a package using the GUI and install.packages( etc)
>>
>> The I opened the terminal and ran R from there and tried to load the
>> package which
>> returned with an error saying the package was not available which
>> seemed strange to me.
>>
>> ?install.packages says that the default location for installing
>> packages is
>> .libPaths()[1]
>>
>> but this turns out to be different in the GUI:
>>
>> "/Users/ivisser/Library/R/2.7/library"
>>
>
> Apparently you told the GUI to set it, see R -> Preferences ->  
> Startup -> Default Library Paths
>
> That setting is often used by users that either don't have admin  
> privileges or want to keep their set of packages separate from the  
> system ones. The default is off, so you must have enabled it at  
> some point.
>
> Cheers,
> Simon
>
>
>
>> then when R is run from the terminal, which gives:
>>
>>> .libPaths()[1]
>> [1] "/Library/Frameworks/R.framework/Resources/library"
>>
>> Is this caused by my settings or is this default behavior? (I don't
>> remember
>> ever having this problem before).
>>
>> Best, Ingmar
>>
>> Ingmar Visser
>> Department of Psychology, University of Amsterdam
>> Roetersstraat 15
>> 1018 WB Amsterdam
>> The Netherlands
>> t: +31-20-5256723
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>


From i.visser at uva.nl  Tue May 20 19:43:06 2008
From: i.visser at uva.nl (Ingmar Visser)
Date: Tue, 20 May 2008 19:43:06 +0200
Subject: [R-SIG-Mac] lib location different between GUI and terminal?
In-Reply-To: <2695E731-7F3A-4696-B399-3D093CA321B2@r-project.org>
References: <C1230BD4-76FC-4E5B-9CC9-DD9B40874AB3@uva.nl>
	<2695E731-7F3A-4696-B399-3D093CA321B2@r-project.org>
Message-ID: <FC5A7E6C-854C-4274-AEAA-07CF40C13157@uva.nl>

On May 20, 2008, at 5:22 PM, Simon Urbanek wrote:
> On May 20, 2008, at 11:05 AM, Ingmar Visser wrote:
>> Hi all,
>>
>> I just installed a package using the GUI and install.packages( etc)
>>
>> The I opened the terminal and ran R from there and tried to load the
>> package which
>> returned with an error saying the package was not available which
>> seemed strange to me.
>>
>> ?install.packages says that the default location for installing
>> packages is
>> .libPaths()[1]
>>
>> but this turns out to be different in the GUI:
>>
>> "/Users/ivisser/Library/R/2.7/library"
>>
>
> Apparently you told the GUI to set it, see R -> Preferences ->  
> Startup -> Default Library Paths
>
> That setting is often used by users that either don't have admin  
> privileges or want to keep their set of packages separate from the  
> system ones. The default is off, so you must have enabled it at  
> some point.

Dear Simon and R mac fans,

After unsetting the default library paths option in the preferences I  
get:

 > .libPaths()[1]
[1] "/Library/Frameworks/R.framework/Versions/2.6/Resources/library"

And in the terminal I get:

 > .libPaths()
[1] "/Library/Frameworks/R.framework/Resources/library"

After freshly installing 2.7.0 I get in the GUI:

 > .libPaths()
[1] "/Library/Frameworks/R.framework/Versions/2.7/Resources/library"

And after setting the default lib path in the preferences pane:

[1] "/Users/ivisser/Library/R/2.7/library"
[2] "/Library/Frameworks/R.framework/Versions/2.7/Resources/library"

And in the terminal:

 > .libPaths()
[1] "/Library/Frameworks/R.framework/Resources/library"

In the package install menu the default checked option is at "System  
level" meaning in the R framework but it
seems that that could still be one of two possible paths, ie the  
versioned path from the GUI or the unversioned
path from the terminal.

Best, Ingmar


From simon.urbanek at r-project.org  Tue May 20 20:11:18 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 20 May 2008 14:11:18 -0400
Subject: [R-SIG-Mac] lib location different between GUI and terminal?
In-Reply-To: <FC5A7E6C-854C-4274-AEAA-07CF40C13157@uva.nl>
References: <C1230BD4-76FC-4E5B-9CC9-DD9B40874AB3@uva.nl>
	<2695E731-7F3A-4696-B399-3D093CA321B2@r-project.org>
	<FC5A7E6C-854C-4274-AEAA-07CF40C13157@uva.nl>
Message-ID: <14C3A4CB-6F41-43EE-AEA2-FA3453E875BA@r-project.org>


On May 20, 2008, at 1:43 PM, Ingmar Visser wrote:

> On May 20, 2008, at 5:22 PM, Simon Urbanek wrote:
>> On May 20, 2008, at 11:05 AM, Ingmar Visser wrote:
>>> Hi all,
>>>
>>> I just installed a package using the GUI and install.packages( etc)
>>>
>>> The I opened the terminal and ran R from there and tried to load the
>>> package which
>>> returned with an error saying the package was not available which
>>> seemed strange to me.
>>>
>>> ?install.packages says that the default location for installing
>>> packages is
>>> .libPaths()[1]
>>>
>>> but this turns out to be different in the GUI:
>>>
>>> "/Users/ivisser/Library/R/2.7/library"
>>>
>>
>> Apparently you told the GUI to set it, see R -> Preferences ->  
>> Startup -> Default Library Paths
>>
>> That setting is often used by users that either don't have admin  
>> privileges or want to keep their set of packages separate from the  
>> system ones. The default is off, so you must have enabled it at  
>> some point.
>
> Dear Simon and R mac fans,
>
> After unsetting the default library paths option in the preferences  
> I get:
>
> > .libPaths()[1]
> [1] "/Library/Frameworks/R.framework/Versions/2.6/Resources/library"
>
> And in the terminal I get:
>
> > .libPaths()
> [1] "/Library/Frameworks/R.framework/Resources/library"
>
> After freshly installing 2.7.0 I get in the GUI:
>
> > .libPaths()
> [1] "/Library/Frameworks/R.framework/Versions/2.7/Resources/library"
>
> And after setting the default lib path in the preferences pane:
>
> [1] "/Users/ivisser/Library/R/2.7/library"
> [2] "/Library/Frameworks/R.framework/Versions/2.7/Resources/library"
>
> And in the terminal:
>
> > .libPaths()
> [1] "/Library/Frameworks/R.framework/Resources/library"
>
> In the package install menu the default checked option is at "System  
> level" meaning in the R framework but it seems that that could still  
> be one of two possible paths, ie the versioned path from the GUI or  
> the unversioned path from the terminal.
>

They are both the same. The unversioned path is just a symlink to the  
versioned path. The "real" location is always the versioned path.

Cheers,
Simon


From jdmorris18 at gmail.com  Thu May 22 02:29:45 2008
From: jdmorris18 at gmail.com (Jeffrey Morris)
Date: Wed, 21 May 2008 20:29:45 -0400
Subject: [R-SIG-Mac] New User simple question
Message-ID: <8CC4A426-8B43-4C66-B5CF-99C866222BFA@gmail.com>

Just migrated from Win to Mac and have a simple question.  Where the  
heck is the Rprofile file?  I can't find any of the usual folders.
Thanks!
Jeff


From smckinney at bccrc.ca  Thu May 22 03:04:33 2008
From: smckinney at bccrc.ca (Steven McKinney)
Date: Wed, 21 May 2008 18:04:33 -0700
Subject: [R-SIG-Mac] New User simple question
References: <8CC4A426-8B43-4C66-B5CF-99C866222BFA@gmail.com>
Message-ID: <0BE438149FF2254DB4199E2682C8DFEB0328A2F9@crcmail1.BCCRC.CA>

Hi Jeff,

R on the Mac looks for a file
.Rprofile

typically in your user home directory.

.Rprofile won't show in the Mac Finder 
file browser unless you do some modifying.
(The Finder hides all files and directories
whose names start with a period)

You can locate your home directory in a
Terminal command window with the "cd ~"
command

CptrName:SomeDir jmorris$ cd ~
CptrName:~ jmorris$ ls -alF

(CptrName is your computer's name)

You should see .Rprofile in the ls output
if it is there.  If not you can make one
and put your customizations in it.

HTH

Steven McKinney





-----Original Message-----
From: r-sig-mac-bounces at stat.math.ethz.ch on behalf of Jeffrey Morris
Sent: Wed 5/21/2008 5:29 PM
To: r-sig-mac at stat.math.ethz.ch
Subject: [R-SIG-Mac] New User simple question
 
Just migrated from Win to Mac and have a simple question.  Where the  
heck is the Rprofile file?  I can't find any of the usual folders.
Thanks!
Jeff

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From john.maindonald at anu.edu.au  Thu May 22 09:18:29 2008
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Thu, 22 May 2008 17:18:29 +1000
Subject: [R-SIG-Mac] New User simple question
In-Reply-To: <8CC4A426-8B43-4C66-B5CF-99C866222BFA@gmail.com>
References: <8CC4A426-8B43-4C66-B5CF-99C866222BFA@gmail.com>
Message-ID: <0AA02BE5-DE33-49C4-9B69-98835B566112@anu.edu.au>

On my machine -
 > Sys.getenv("R_HOME")
                                      R_HOME
"/Library/Frameworks/R.framework/Resources"

Then open a terminal window:

$ ls /Library/Frameworks/R.framework/Resources/etc
i386		ppc		repositories
$ ls /Library/Frameworks/R.framework/Resources/etc/i386
Makeconf	Renviron	ldpaths

See help(Rprofile) for details of other files which, if present,
may over-ride the entries in this file.

John Maindonald             email: john.maindonald at anu.edu.au
phone : +61 2 (6125)3473    fax  : +61 2(6125)5549
Centre for Mathematics & Its Applications, Room 1194,
John Dedman Mathematical Sciences Building (Building 27)
Australian National University, Canberra ACT 0200.


On 22 May 2008, at 10:29 AM, Jeffrey Morris wrote:

> Just migrated from Win to Mac and have a simple question.  Where the  
> heck is the Rprofile file?  I can't find any of the usual folders.
> Thanks!
> Jeff
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From dlr32 at cornell.edu  Thu May 22 00:10:48 2008
From: dlr32 at cornell.edu (Dan Rabosky)
Date: Wed, 21 May 2008 18:10:48 -0400
Subject: [R-SIG-Mac] R 2.7 mac Quartz problems
Message-ID: <0955951F-0C19-466D-9FC5-E41C5E7EA180@cornell.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080521/a80a5ba9/attachment.pl>

From simon.urbanek at r-project.org  Thu May 22 16:09:59 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 22 May 2008 10:09:59 -0400
Subject: [R-SIG-Mac] R 2.7 mac Quartz problems
In-Reply-To: <0955951F-0C19-466D-9FC5-E41C5E7EA180@cornell.edu>
References: <0955951F-0C19-466D-9FC5-E41C5E7EA180@cornell.edu>
Message-ID: <9AFB7C11-B8E6-4613-A60A-C6519D6E703B@r-project.org>

Dan,

can you, please, send us some examples (screenshots and possibly some  
reproducible code)? More comments inline ..

On May 21, 2008, at 6:10 PM, Dan Rabosky wrote:
> I have two questions concerning R 2.7. I'm running OSX 10.4.11. I
> have simply installed R 2.7 from the pre-compiled binary available on
> CRAN.
>

First, I want to clarify whether you read the R for Mac FAQ 12.8 which  
describes how you can get results consistent with the old Quartz  
behavior:

12.8 Why are Quartz plots much bigger than they used to be?
R versions before 2.7.0 had a Quartz window that was smaller both in  
size and scale. This was caused by two ?bugs?: all devices in R have a  
default size of 7 inches. Quartz used a default of 5 inches and that  
was now changed to match all other devices. In addition, Quartz was  
incorrectly assuming a resolution of 72dpi for all screens. This means  
that a plot was drawn at ca. 3/4 of its intended size (given that most  
modern monitors use 100 dpi or more). The new Quartz device correctly  
detects the resolution of a screen by default and thus the plots will  
appear larger than they used to be. The resolution can be set using  
the dpi parameter of Quartz, i.e. to obtain the old behavior use  
quartz(width=5,height=5,dpi=72) When creating a new Quartz device. If  
you want to make this your default, use quartz.options(width=5,  
height=5, dpi=72). You can also set those options in the Quartz  
Preferences of the R.app GUI.

Let us know whether that addresses your issues or you have something  
else in mind.


> (1) Plot parameters from R 2.6 not compatible with R 2.7:  I have
> many scripts that plot manuscript figures and have invested many
> hours into formatting - particularly margins etc. However, when I run
> my scripts (which worked fine on R 2.6), the margins are bizarre,
> often plotting off the bottom of the quartz window, which doesn't
> make any sense in light of the mar and oma params I've specified. It
> is as though none of the plot parameters that worked for R 2.6 map
> onto R 2.7. I'm concerned by this. Does anyone have a simple
> explanation for this and/or a simple solution for a fix?
>
> In Peter Dalgaard's posting, "CHANGES IN R VERSION 2.7.0", I find the
> following:
>
> "The setting of the line spacing (par("cra")[2]) on the X11() and
>         windows() devices is now comparable with postscript() etc, and
>         roughly 20% smaller than before (it used to depend on the
>         locale for X11).  (So is the pictex() device, now 20% larger.)
>         This affects the margin size in plots, and should result in
>         better-looking plots."
>
> I don't see how this alone can explain the major problems I am
> having. I cannot get the bottom rows of some multi-panel plots to
> even fit in the quartz window.
>
>
> (2) Missing fonts in R 2.7: Can't find the serif fonts, eg, family =
> 'serif' argument causes problems and no text is displayed from mtext
> () or text(). I get the message:
>
> In title(main = main, sub = sub, xlab = xlab, ylab = ylab,  ... :
>   font "Times-Roman" could not be found
>

Yes, this seems to be a Tiger-specific issue. It works fine on  
Leopard. I'll see what we can do about it.

Thanks,
Simon


From charles.hebert at ens.fr  Thu May 22 23:23:17 2008
From: charles.hebert at ens.fr (Charles Hebert)
Date: Thu, 22 May 2008 23:23:17 +0200
Subject: [R-SIG-Mac] [simple question] vertical / horizontal dendogram.
Message-ID: <73A41AA1-C69F-43B3-9EBF-B219C34069F7@ens.fr>

Hi,

I'm trying to use the hclust function... The plot result is vertical,  
I would prefer the horizontal version. Is it possible ?

R version:

i386-apple-darwin9.2.2
"R version 2.7.0 Patched (2008-05-11 r45672)"

Best regards, charles

--
Charles H?bert

Genome Organisation and Dynamics
Regulation of genetic expression, CNRS UMR 8541
Ecole Normale Sup?rieure
46, rue d'Ulm 75005 Paris, France


From plroebuck at mdanderson.org  Thu May 22 18:08:09 2008
From: plroebuck at mdanderson.org (Paul Roebuck)
Date: Thu, 22 May 2008 11:08:09 -0500 (CDT)
Subject: [R-SIG-Mac] Tcl/Tk Problems
In-Reply-To: <BAY109-W3460DF4CF599B27F5C7E9D8DD00@phx.gbl>
References: <BAY109-W3460DF4CF599B27F5C7E9D8DD00@phx.gbl>
Message-ID: <Pine.OSF.4.58.0805221102030.370874@wotan.mdacc.tmc.edu>

On Thu, 8 May 2008, [Windows-1252] M?nica Lozano wrote:

> I'm beginning to work on mac.
> I think that R was successfully installed. I'm working
> with Rclimex, so i need a few packages (ismev, extRemes)
> to work with, but it also need Tcl/Tk. I reed in FAQ
> that it sometimes generates a problem so you have to
> type: Sys.setenv(DISPLAYS=":0") this worked the first
> time and no more.
> Now when I try to load any of the packages, even Tcl/Tk
> this show up:
> Loading Tcl/Tk interface ... Error in fun(...) :
> couldn't connect to display ":0"
> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
> Error: package/namespace load failed for 'tcltk'
> So I don't know what else to do.

Sys.setenv(DISPLAY=":0.0")
library(tcltk)

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From phgrosjean at sciviews.org  Fri May 23 09:09:54 2008
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Fri, 23 May 2008 09:09:54 +0200
Subject: [R-SIG-Mac] Tcl/Tk Problems
In-Reply-To: <Pine.OSF.4.58.0805221102030.370874@wotan.mdacc.tmc.edu>
References: <BAY109-W3460DF4CF599B27F5C7E9D8DD00@phx.gbl>
	<Pine.OSF.4.58.0805221102030.370874@wotan.mdacc.tmc.edu>
Message-ID: <48366DC2.2070002@sciviews.org>

You have to start X11 first (I suppose it is installed, as well as the 
required Tcl/Tk since it worked once on your machine).
Best,

Philippe Grosjean

Paul Roebuck wrote:
> On Thu, 8 May 2008, [Windows-1252] M?nica Lozano wrote:
> 
>> I'm beginning to work on mac.
>> I think that R was successfully installed. I'm working
>> with Rclimex, so i need a few packages (ismev, extRemes)
>> to work with, but it also need Tcl/Tk. I reed in FAQ
>> that it sometimes generates a problem so you have to
>> type: Sys.setenv(DISPLAYS=":0") this worked the first
>> time and no more.
>> Now when I try to load any of the packages, even Tcl/Tk
>> this show up:
>> Loading Tcl/Tk interface ... Error in fun(...) :
>> couldn't connect to display ":0"
>> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
>> Error: package/namespace load failed for 'tcltk'
>> So I don't know what else to do.
> 
> Sys.setenv(DISPLAY=":0.0")
> library(tcltk)
> 
> ----------------------------------------------------------
> SIGSIG -- signature too long (core dumped)
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From simon.urbanek at r-project.org  Fri May 23 15:47:36 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 23 May 2008 09:47:36 -0400
Subject: [R-SIG-Mac] Tcl/Tk Problems
In-Reply-To: <Pine.OSF.4.58.0805221102030.370874@wotan.mdacc.tmc.edu>
References: <BAY109-W3460DF4CF599B27F5C7E9D8DD00@phx.gbl>
	<Pine.OSF.4.58.0805221102030.370874@wotan.mdacc.tmc.edu>
Message-ID: <0C89510F-6335-4DFC-BADE-3237B5B3097A@r-project.org>


On May 22, 2008, at 12:08 PM, Paul Roebuck wrote:

> On Thu, 8 May 2008, [Windows-1252] M?nica Lozano wrote:
>
>> I'm beginning to work on mac.
>> I think that R was successfully installed. I'm working
>> with Rclimex, so i need a few packages (ismev, extRemes)
>> to work with, but it also need Tcl/Tk. I reed in FAQ
>> that it sometimes generates a problem so you have to
>> type: Sys.setenv(DISPLAYS=":0") this worked the first
>> time and no more.
>> Now when I try to load any of the packages, even Tcl/Tk
>> this show up:
>> Loading Tcl/Tk interface ... Error in fun(...) :
>> couldn't connect to display ":0"
>> Error : .onLoad failed in 'loadNamespace' for 'tcltk'
>> Error: package/namespace load failed for 'tcltk'
>> So I don't know what else to do.
>
> Sys.setenv(DISPLAY=":0.0")
> library(tcltk)
>

That won't work (see that display is set already).

M?nica, it all depends on the Mac OS X version you're using. If you  
have Leopard (Mac OS X 10.5) then you should *not* set DISPLAY because  
Leopard uses a special trick to start X11 that doesn't work when you  
change DISPLAY. So on Leopard, make sure DISPLAY is not touched (it  
will look somewhat like "/tmp/launch-RfCsdFs/:0").

However, if you have an older OS version (e.g. Tiger = Mac OS X 10.4),  
then you need to start X11 first and then set DISPLAY to ":0" (or ": 
0.0" it doesn't matter).

If you still have problems, please specify exactly which OS X version  
you are using, how you installed X11 and what machine you're using.

Thanks,
Simon


From per at chicagogsb.edu  Sat May 24 00:19:27 2008
From: per at chicagogsb.edu (Rossi, Peter E.)
Date: Fri, 23 May 2008 17:19:27 -0500
Subject: [R-SIG-Mac] R GUI freeze
Message-ID: <C45CAD1F.C2D9%per@chicagogsb.edu>


R.app (the mac gui) freezes during computations when I use either the stop
sign or <esc>.  I have to force quit the application.

I'm running R 2.6.2 GUI 1.23 (4932) (4932) and MAC OS 10.5.2

thanks!

peter r


From apoon at biomail.ucsd.edu  Sat May 24 00:04:51 2008
From: apoon at biomail.ucsd.edu (Art Poon)
Date: Fri, 23 May 2008 15:04:51 -0700
Subject: [R-SIG-Mac] <ESC> causes R.app to freeze
Message-ID: <8DB7E769-B742-401B-A9DB-8E7D9F9DD5E1@biomail.ucsd.edu>

Hi folks,

I've perused the list archives, but alas...

I'm using R 2.6.2 with GUI 1.23 on a dual G5 Mac.  Hitting <ESC>  
immediately after launch (and at any other point besides) causes R to  
freeze (spinning beach ball of death) with accompanying spike in  
processor activity.

Crash log upon force quitting indicates that R.app hangs on kernel  
task AlignAssist, though I don't have the foggiest notion how this  
relates.

Have not been able to reproduce this error using console R.
Any suggestions much appreciated.

Thanks for your time,
- Art.


From simon.urbanek at r-project.org  Sat May 24 15:14:12 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 24 May 2008 09:14:12 -0400
Subject: [R-SIG-Mac] R GUI freeze
In-Reply-To: <C45CAD1F.C2D9%per@chicagogsb.edu>
References: <C45CAD1F.C2D9%per@chicagogsb.edu>
Message-ID: <39A81DB7-FF50-424F-BFFA-80D7BC32314E@r-project.org>

Peter,
this has been fixed a long time ago and discussed here many times.  
Please read and follow the posting guide.
Thanks,
Simon


On May 23, 2008, at 18:19, "Rossi, Peter E." <per at chicagogsb.edu> wrote:

>
> R.app (the mac gui) freezes during computations when I use either  
> the stop
> sign or <esc>.  I have to force quit the application.
>
> I'm running R 2.6.2 GUI 1.23 (4932) (4932) and MAC OS 10.5.2
>
> thanks!
>
> peter r
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From simon.urbanek at r-project.org  Sat May 24 15:24:39 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 24 May 2008 09:24:39 -0400
Subject: [R-SIG-Mac] <ESC> causes R.app to freeze
In-Reply-To: <8DB7E769-B742-401B-A9DB-8E7D9F9DD5E1@biomail.ucsd.edu>
References: <8DB7E769-B742-401B-A9DB-8E7D9F9DD5E1@biomail.ucsd.edu>
Message-ID: <0B143B91-3421-4686-BC8B-640E75C94C32@r-project.org>


On May 23, 2008, at 6:04 PM, Art Poon wrote:

> Hi folks,
>
> I've perused the list archives, but alas...
>

Now that's a good one - it's the first hit in google and it has been  
discussed in the archives for many times and is really hard to miss.  
But I guess it's not surprising given that you also missed
"Updated R GUI (revision 4944) for R 2.6.0, 2.6.1 and 2.6.2. It is a  
bugfix update to the R GUI supplied with R 2.6.2, most importantly  
fixing a problem where hitting <ESC> has lead to an infinite loop."
on the CRAN download page posted just 5 days after the release you're  
using.


> I'm using R 2.6.2 with GUI 1.23

The current release version of R is 2.7.0, so you're using an old  
version and we ask you explicitly to not report problems on  old  
versions, again you failed to read that as well ...

Cheers,
Simon



> on a dual G5 Mac.  Hitting <ESC> immediately after launch (and at  
> any other point besides) causes R to freeze (spinning beach ball of  
> death) with accompanying spike in processor activity.
>
> Crash log upon force quitting indicates that R.app hangs on kernel  
> task AlignAssist, though I don't have the foggiest notion how this  
> relates.
>
> Have not been able to reproduce this error using console R.
> Any suggestions much appreciated.
>
> Thanks for your time,
> - Art.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From timothy.c.bates at gmail.com  Sat May 24 10:43:14 2008
From: timothy.c.bates at gmail.com (Timothy Bates)
Date: Sat, 24 May 2008 09:43:14 +0100
Subject: [R-SIG-Mac] <ESC> causes R.app to freeze
In-Reply-To: <8DB7E769-B742-401B-A9DB-8E7D9F9DD5E1@biomail.ucsd.edu>
References: <8DB7E769-B742-401B-A9DB-8E7D9F9DD5E1@biomail.ucsd.edu>
Message-ID: <DECCB737-C98B-41CF-A78C-E1416CCB046C@gmail.com>

i get the same thing

On 23 May 2008, at 11:04 PM, Art Poon wrote:

> Hi folks,
>
> I've perused the list archives, but alas...
>
> I'm using R 2.6.2 with GUI 1.23 on a dual G5 Mac.  Hitting <ESC>  
> immediately after launch (and at any other point besides) causes R  
> to freeze (spinning beach ball of death) with accompanying spike in  
> processor activity.
>
> Crash log upon force quitting indicates that R.app hangs on kernel  
> task AlignAssist, though I don't have the foggiest notion how this  
> relates.
>
> Have not been able to reproduce this error using console R.
> Any suggestions much appreciated.
>
> Thanks for your time,
> - Art.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From isidora10 at yahoo.com  Sat May 24 15:52:34 2008
From: isidora10 at yahoo.com (isidora k)
Date: Sat, 24 May 2008 06:52:34 -0700 (PDT)
Subject: [R-SIG-Mac] error message
Message-ID: <517597.80144.qm@web52104.mail.re2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080524/470c91d9/attachment.pl>

From simon.urbanek at r-project.org  Sun May 25 01:11:29 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 24 May 2008 19:11:29 -0400
Subject: [R-SIG-Mac] error message
In-Reply-To: <517597.80144.qm@web52104.mail.re2.yahoo.com>
References: <517597.80144.qm@web52104.mail.re2.yahoo.com>
Message-ID: <BC2623A4-0552-4A20-9257-6E9FE1B6B433@r-project.org>

Isidora,

you're using a very old R version. The current version is R 2.7.0.

Cheers,
Simon

On May 24, 2008, at 9:52 AM, isidora k wrote:

>> hist(phat1000$t)
> 2008-05-24 14:47:33.633 R[252] *** Assertion failure in - 
> [RDeviceView lockFocus], AppKit.subproj/NSView.m:3248
> 2008-05-24 14:47:33.633 R[252] *** REngine.runREPL: caught ObjC  
> exception in the main loop!
> *** Please report the following error on r-sig-mac at r-project.org  
> along with the full description of how to reproduce it:
> *** reason: lockFocus sent to a view whose window is deferred and  
> does not yet have a corresponding platform window
> *** name: NSInternalInconsistencyException, info: (null)
> *** Version: R 2.5.1 (42083) R.app R 2.5.1 GUI 1.20 (4535)/ppc
> Consider saving your work soon in case this problem leads to a full  
> crash.
>
> library(boot)
>
> Binom1321Dat <- c(rep(1,13),rep(0,8))
>
> Binom1921Dat <- c(rep(1,19),0,0)
>
>
>
> # Next define a function which is needed in the 'boot' command.
>
>
>
> phat <- function(d,i) {sum(d[i])/21}
>
>
>
> # Generate 1000 bootstrap samples for the data with hit rate 13/21
>
> # and plot a histogram of the estimate of p for these samples.
>
>
>
> boot(Binom1321Dat,phat,1000)
>
> phat1000 <- boot(Binom1321Dat,phat,1000)
>
> hist(phat1000$t)
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From Roy.Mendelssohn at noaa.gov  Sun May 25 02:27:02 2008
From: Roy.Mendelssohn at noaa.gov (Roy Mendelssohn)
Date: Sat, 24 May 2008 17:27:02 -0700
Subject: [R-SIG-Mac] <ESC> causes R.app to freeze
In-Reply-To: <DECCB737-C98B-41CF-A78C-E1416CCB046C@gmail.com>
References: <8DB7E769-B742-401B-A9DB-8E7D9F9DD5E1@biomail.ucsd.edu>
	<DECCB737-C98B-41CF-A78C-E1416CCB046C@gmail.com>
Message-ID: <2B174AFB-F2BB-4FBD-A0DA-20E24561AC5D@noaa.gov>


On May 24, 2008, at 1:43 AM, Timothy Bates wrote:

> i get the same thing
>
> On 23 May 2008, at 11:04 PM, Art Poon wrote:
>
>> Hi folks,
>>
>> I've perused the list archives, but alas...
>>
>> I'm using R 2.6.2 with GUI 1.23 on a dual G5 Mac.  Hitting <ESC>  
>> immediately after launch (and at any other point besides) causes R  
>> to freeze (spinning beach ball of death) with accompanying spike  
>> in processor activity.
>>
>> Crash log upon force quitting indicates that R.app hangs on kernel  
>> task AlignAssist, though I don't have the foggiest notion how this  
>> relates.
>>
>> Have not been able to reproduce this error using console R.
>> Any suggestions much appreciated.
>>


This is from the archives on Feb. 13 ::

>> Full_Name: C. E. Timothy Paine
>> Version: 2.6.2
>> OS: MAC 10.5.2
>> Submission from: (NULL) (193.51.118.233)
>>
>>
>> Pressing the ESC key, at any time, will cause R to hang. Please help!
>>
>>
>
> Please update to the most current GUI from
> http://r.research.att.com/
> which solves the problem (it was also discussed on R-SIG-Mac  
> yesterday).
>
> Thanks,
> Simon


**********************
"The contents of this message do not reflect any position of the U.S.  
Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division	
Southwest Fisheries Science Center
1352 Lighthouse Avenue
Pacific Grove, CA 93950-2097

e-mail: Roy.Mendelssohn at noaa.gov (Note new e-mail address)
voice: (831)-648-9029
fax: (831)-648-8440
www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."


From statmobile at gmail.com  Mon May 26 03:02:19 2008
From: statmobile at gmail.com (statmobile)
Date: Sun, 25 May 2008 21:02:19 -0400
Subject: [R-SIG-Mac] X11 problem with R 2.7 OS X 10.4.11
Message-ID: <483A0C1B.1000305@gmail.com>

I must have missed these emails being sent around, probably because I 
only just now updated to 2.7.  I noticed here that:

https://stat.ethz.ch/pipermail/r-sig-mac/2008-May/004981.html

Joerg is saying that he's having problems running R plots from the 
command line when the plots are going to X11.  I have the exact same 
problems he is discussing, although issuing the `x11(type="Xlib")' in 
one session does not help me in future sessions.

The main purpose of this email is to assure Joerg and others that he is 
not the only one experiencing this.

I feel that this is a major issue, because I'm a big emacs fan, and 
running R through ESS is essentially running it in the terminal.  So I 
can't run graphs from emacs without this ugly workaround.  Any help over 
the matter would be greatly appreciated.

As a side note, and one I was experiencing with previous versions of R. 
  If you issue the command 'dev.off()' in X11, R instead opens about 3 
other graphic windows.

Thanks in advance for any input on the matter.


From etoffin at ulb.ac.be  Mon May 26 12:56:35 2008
From: etoffin at ulb.ac.be (Etienne Toffin)
Date: Mon, 26 May 2008 12:56:35 +0200
Subject: [R-SIG-Mac] Getting arguments from command line to run a R script
Message-ID: <520147B4-A7B9-40A4-8941-A614E9C001A8@ulb.ac.be>

Hi,

I use a command line C++ program to run stochastic simulations.

With a shell script I run my program several parameter values and use  
the command
R CMD BATCH ../PlotDigging.r
where PlotDigging.r is a R file that plot several graphics from my  
simulation results and write a .png file.

Right now I just enter parameter values both in my shell script and my  
R file : that way I can't launch that much values. So I would like to  
know if there's a way to launch R CMD as I already do and give it the  
parameter values entered in the shell script?

Hope I'm clear enough to get an answer?

Thanks,

Etienne

-------------------------------------------------------------------
Etienne Toffin, PhD Student
Unit of Social Ecology
Universit? Libre de Bruxelles, CP 231
Boulevard du Triomphe
B-1050 Brussels
Belgium

Tel: +32(0)2/650.55.30
Fax: +32(0)/650.59.87
Skype: etienne_titou
http://www.ulb.ac.be/sciences/use/toffin.html


From ripley at stats.ox.ac.uk  Mon May 26 13:39:45 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 May 2008 12:39:45 +0100 (BST)
Subject: [R-SIG-Mac] Getting arguments from command line to run a R
 script
In-Reply-To: <520147B4-A7B9-40A4-8941-A614E9C001A8@ulb.ac.be>
References: <520147B4-A7B9-40A4-8941-A614E9C001A8@ulb.ac.be>
Message-ID: <alpine.LFD.1.10.0805261233450.7298@gannet.stats.ox.ac.uk>

This is not specific to Mac OS X.

See ?commandArgs and the --args argument to R.

Something that is specific to Mac OS X is that the most convenient way to 
do this is to use Rscript, and I understand that is not installed into the 
standard path on the CRAN binary.  It is I think at

/Library/Frameworks/R.framework/Resources/bin/Rscript

See ?Rscript for how to use it.

On Mon, 26 May 2008, Etienne Toffin wrote:

> Hi,
>
> I use a command line C++ program to run stochastic simulations.
>
> With a shell script I run my program several parameter values and use the 
> command
> R CMD BATCH ../PlotDigging.r
> where PlotDigging.r is a R file that plot several graphics from my simulation 
> results and write a .png file.
>
> Right now I just enter parameter values both in my shell script and my R file 
> : that way I can't launch that much values. So I would like to know if 
> there's a way to launch R CMD as I already do and give it the parameter 
> values entered in the shell script?
>
> Hope I'm clear enough to get an answer?
>
> Thanks,
>
> Etienne
>
> -------------------------------------------------------------------
> Etienne Toffin, PhD Student
> Unit of Social Ecology
> Universit? Libre de Bruxelles, CP 231
> Boulevard du Triomphe
> B-1050 Brussels
> Belgium
>
> Tel: +32(0)2/650.55.30
> Fax: +32(0)/650.59.87
> Skype: etienne_titou
> http://www.ulb.ac.be/sciences/use/toffin.html
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From angel at alfomega.es  Mon May 26 16:36:30 2008
From: angel at alfomega.es (=?ISO-8859-1?Q?Angel_Berihuete_Mac=EDas?=)
Date: Mon, 26 May 2008 16:36:30 +0200
Subject: [R-SIG-Mac] Some changes to quartz()
Message-ID: <9800D76B-BD6C-456A-86A0-14C9C76D7647@alfomega.es>

Thanks to Prof Brian Ripley.

In answer to the message "gray grid on quartz()", he wrote

 > Now, considering the use of image() on quartz() in R 2.7.0, there  
is a (equally vague) bug report and thread at
 >
 > https://stat.ethz.ch/pipermail/r-devel/2008-May/049650.html
 >
 > that seems similar to your comments.  Simon Urbanek has made some  
changes to quartz() to alleviate this, so please
 > try a current R-patched  build.

I am working with

platform       powerpc-apple-darwin8.10.1
arch           powerpc
os             darwin8.10.1
system         powerpc, darwin8.10.1
status         Patched
major          2
minor          7.0
year           2008
month          05
day            15
svn rev        45703
language       R
version.string R version 2.7.0 Patched (2008-05-15 r45703)

but the ugly grid still appear when I use image() function.

What's wrong?

Thanks again.

?ngel 

From j.van_den_hoff at fzd.de  Mon May 26 18:19:27 2008
From: j.van_den_hoff at fzd.de (Joerg van den Hoff)
Date: Mon, 26 May 2008 18:19:27 +0200
Subject: [R-SIG-Mac] X11 problem with R 2.7 OS X 10.4.11
In-Reply-To: <483A0C1B.1000305@gmail.com>
References: <483A0C1B.1000305@gmail.com>
Message-ID: <20080526161927.GA12508@marco.fz-rossendorf.de>

On Sun, May 25, 2008 at 09:02:19PM -0400, statmobile wrote:
> I must have missed these emails being sent around, probably because I 
> only just now updated to 2.7.  I noticed here that:
> 
> https://stat.ethz.ch/pipermail/r-sig-mac/2008-May/004981.html
> 
> Joerg is saying that he's having problems running R plots from the 
> command line when the plots are going to X11.  I have the exact same 
> problems he is discussing, although issuing the `x11(type="Xlib")' in 
> one session does not help me in future sessions.
> 
> The main purpose of this email is to assure Joerg and others that he is 
> not the only one experiencing this.
> 
> I feel that this is a major issue, because I'm a big emacs fan, and 
> running R through ESS is essentially running it in the terminal.  So I 
> can't run graphs from emacs without this ugly workaround.  Any help over 
> the matter would be greatly appreciated.
> 
> As a side note, and one I was experiencing with previous versions of R. 
>  If you issue the command 'dev.off()' in X11, R instead opens about 3 
> other graphic windows.
> 
> Thanks in advance for any input on the matter.

I'm thankful for this feedback, since up to now I fast left with the
impression that somehow it must be all me fault :-). 

I posted the problem a second time on may 13, namely:

==============================CUTAGAIN========================================
hi everybody,

some 10 days ago I posted my problems with 2.7.0 when plotting to the X11()
device (with it's new default type "cairo"). here's an excerpt from the previous
mails:

=================================CUT=================================
> >>>hi everybody,
> >>>
> >>>today  I  decided  (unwisely,  it  appears) to install 2.7.0
> >>>under MacOS 10.4.7. now, when I  run  R  from  the  terminal

which actually should read 10.4.11 ...

> >>>command line and do something like
> >>>
> >>>plot(1:10)
> >>>
> >>>a  X11 graphic window pops up, the 10 points are drawn on an
> >>>otherwise blank canvas (no axes, no labels, no  ticks  etc),
> >>>CPU  time  goes  to 100% and stays there and R does not come
> >>>back to the prompt ("hangs"). I tried to `ktrace'  this  but
> >>>this  produced a one Gig logfile in a few seconds from which
> >>>I learned nothing ...
> >>>

I'm still experiencing problems with cairo-based graphics and 2.7.0.: 

while the problem somehow went away on my powerbook g4 after having once
explicitly used `x11(type="Xlib")',  i.e. even after restart of R now plotting
procedes as it should, the same procedure was not successful on my tabletop ppc g5 (both
machines with macos 10.4.11.). here the problem persists as described in my
first mail: any plotting command, e.g.

plot(1:10) 

to the default x11 device (i.e. with type = "cairo")
plots only the data points on an otherwise empty canvas, then cpu time goes to
100% and R does not come back to the prompt ("hangs"). at which stage I can only
kill R, e.g. by throwing away the terminal running R (not responding to Ctrl-C
or Ctrl-D any more).

I have not the slightest idea what can go wrong specifically on my machine. any
suggestions what (and how) to log or where to look greatly appreciated.

joerg

I really would be thankful if somebody can point me in the right direction.

when I `ktrace' R until after issuing the plot-command I get a _huge_ output
file (a few hundred Meg in very short time) which for the most part shows
something like

10464 R        RET   read 4096/0x1000
10464 R        CALL  lseek(0xc,0x9f4000,0)
10464 R        RET   lseek 0
10464 R        CALL  read(0xc,0x1cd2a00,0x1000)
10464 R        GIO   fd 12 read 4096 bytes

which seemingly repeats infinitely. the strangest thing for me is, that
I first observed the described behaviour on both my machines (table top as well
as labtop ppc). but as explained above, plotting _once_ to X11(type="Xlib") 
"repaired" everything on the labtop: now plotting to X11(type="cairo") works
just fine for whatever reason. the same did _not_ happen on the tabletop
machine. here I `cairo' is definitily not working properly and I have to resort
to an explicit `X11(type="Xlib")' prior to plotting to avoid disaster.

has anybody seen the same behaviour?
==============================CUTAGAIN========================================

which shows that I can confirm your observation (using X11(type="Xlib")
does not help for the next R session) for my table top machine --
whereas the labtop now works as it should (as described in my first post
of the problem).

unfortenuately, my second post did no longer yield any response from
the core members which I interpreted being due to being rated 
as "not important enough or problem your fault since nobody 
else confirms your problem". 

hopefully, it is taken now more seriously? and if I can provide any
information needed to localize the source of the problem please let me
know.

currently for me it is really a pain to use R under X11 (forgeting to
explicitely open X11(type="Xlib") prior to plotting requires explicit
kill of the R process in order to regain control over the terminal in
which R was started etc.).

joerg


From khansen at stat.berkeley.edu  Mon May 26 18:31:43 2008
From: khansen at stat.berkeley.edu (Kasper Daniel Hansen)
Date: Mon, 26 May 2008 09:31:43 -0700
Subject: [R-SIG-Mac] X11 problem with R 2.7 OS X 10.4.11
In-Reply-To: <483A0C1B.1000305@gmail.com>
References: <483A0C1B.1000305@gmail.com>
Message-ID: <96B46EF5-42D5-48CA-A9F8-BDE4CE350F01@stat.berkeley.edu>

I had the same problem for one session when I upgraded R. But then it  
disappeared when I quit R and quit X. So from my perspective it was a  
temporary glitch. I am also using ESS so I also depend on this thing  
working well. Btw. you may or may not have noticed that quartz() now  
works from the Terminal (=ESS). While I am loath to suggest such a  
thing, perhaps you could try a reboot.

If you are running Leopard I would make sure that you do not set you  
display variable in either .Rprofile, .Renviron or .profile,.  
bashrc, .bash_login

Kasper

On May 25, 2008, at 6:02 PM, statmobile wrote:

> I must have missed these emails being sent around, probably because  
> I only just now updated to 2.7.  I noticed here that:
>
> https://stat.ethz.ch/pipermail/r-sig-mac/2008-May/004981.html
>
> Joerg is saying that he's having problems running R plots from the  
> command line when the plots are going to X11.  I have the exact same  
> problems he is discussing, although issuing the `x11(type="Xlib")'  
> in one session does not help me in future sessions.
>
> The main purpose of this email is to assure Joerg and others that he  
> is not the only one experiencing this.
>
> I feel that this is a major issue, because I'm a big emacs fan, and  
> running R through ESS is essentially running it in the terminal.  So  
> I can't run graphs from emacs without this ugly workaround.  Any  
> help over the matter would be greatly appreciated.
>
> As a side note, and one I was experiencing with previous versions of  
> R.  If you issue the command 'dev.off()' in X11, R instead opens  
> about 3 other graphic windows.
>
> Thanks in advance for any input on the matter.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From corrado.g at inwind.it  Mon May 26 19:44:56 2008
From: corrado.g at inwind.it (Corrado Giannasca)
Date: Mon, 26 May 2008 19:44:56 +0200
Subject: [R-SIG-Mac] ERROR installing source package RGtk2 on mac os x
	10.4.11
Message-ID: <82C4011C-DFF1-417C-AA6E-077EB832AB0F@inwind.it>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20080526/0e7d2647/attachment.pl>

From simon.urbanek at r-project.org  Mon May 26 22:34:36 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 26 May 2008 16:34:36 -0400
Subject: [R-SIG-Mac] Some changes to quartz()
In-Reply-To: <9800D76B-BD6C-456A-86A0-14C9C76D7647@alfomega.es>
References: <9800D76B-BD6C-456A-86A0-14C9C76D7647@alfomega.es>
Message-ID: <420F55FD-A3C5-4451-B920-55ED58964DA1@r-project.org>


On May 26, 2008, at 10:36 AM, Angel Berihuete Mac?as wrote:

> Thanks to Prof Brian Ripley.
>
> In answer to the message "gray grid on quartz()", he wrote
>
> > Now, considering the use of image() on quartz() in R 2.7.0, there  
> is a (equally vague) bug report and thread at
> >
> > https://stat.ethz.ch/pipermail/r-devel/2008-May/049650.html
> >
> > that seems similar to your comments.  Simon Urbanek has made some  
> changes to quartz() to alleviate this, so please
> > try a current R-patched  build.
>
> I am working with
>
> platform       powerpc-apple-darwin8.10.1
> arch           powerpc
> os             darwin8.10.1
> system         powerpc, darwin8.10.1
> status         Patched
> major          2
> minor          7.0
> year           2008
> month          05
> day            15
> svn rev        45703
> language       R
> version.string R version 2.7.0 Patched (2008-05-15 r45703)
>
> but the ugly grid still appear when I use image() function.
>
> What's wrong?
>

You're using too old R - your version is older than the discussion  
above so clearly it doesn't have the fix you're looking for.

Cheers,
Simon


From angel at alfomega.es  Mon May 26 23:32:30 2008
From: angel at alfomega.es (=?ISO-8859-1?Q?Angel_Berihuete_Mac=EDas?=)
Date: Mon, 26 May 2008 23:32:30 +0200
Subject: [R-SIG-Mac] Some changes to quartz()
In-Reply-To: <420F55FD-A3C5-4451-B920-55ED58964DA1@r-project.org>
References: <9800D76B-BD6C-456A-86A0-14C9C76D7647@alfomega.es>
	<420F55FD-A3C5-4451-B920-55ED58964DA1@r-project.org>
Message-ID: <4444A282-480D-41AA-90FC-9D6F5AF9929F@alfomega.es>

Thanks Simon....and sorry.

I download R-2.7-branch-leopard-universal.tar.gz (28Mb) from the  
"Universal nightly builds for Mac OS X (10.4 Tiger and 10.5 Leopard)"

Thanks again.

?ngel.
El 26/05/2008, a las 22:34, Simon Urbanek escribi?:

>
> On May 26, 2008, at 10:36 AM, Angel Berihuete Mac?as wrote:
>
>> Thanks to Prof Brian Ripley.
>>
>> In answer to the message "gray grid on quartz()", he wrote
>>
>> > Now, considering the use of image() on quartz() in R 2.7.0, there  
>> is a (equally vague) bug report and thread at
>> >
>> > https://stat.ethz.ch/pipermail/r-devel/2008-May/049650.html
>> >
>> > that seems similar to your comments.  Simon Urbanek has made some  
>> changes to quartz() to alleviate this, so please
>> > try a current R-patched  build.
>>
>> I am working with
>>
>> platform       powerpc-apple-darwin8.10.1
>> arch           powerpc
>> os             darwin8.10.1
>> system         powerpc, darwin8.10.1
>> status         Patched
>> major          2
>> minor          7.0
>> year           2008
>> month          05
>> day            15
>> svn rev        45703
>> language       R
>> version.string R version 2.7.0 Patched (2008-05-15 r45703)
>>
>> but the ugly grid still appear when I use image() function.
>>
>> What's wrong?
>>
>
> You're using too old R - your version is older than the discussion  
> above so clearly it doesn't have the fix you're looking for.
>
> Cheers,
> Simon
>
>


From simon.urbanek at r-project.org  Tue May 27 01:08:50 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 26 May 2008 19:08:50 -0400
Subject: [R-SIG-Mac] ERROR installing source package RGtk2 on mac os x
	10.4.11
In-Reply-To: <82C4011C-DFF1-417C-AA6E-077EB832AB0F@inwind.it>
References: <82C4011C-DFF1-417C-AA6E-077EB832AB0F@inwind.it>
Message-ID: <63C2A6B4-6B2A-4977-9198-BFF610E8D3C4@r-project.org>

Corrado,

although you gave use too little information to really help you (we  
need the full error and config.log at least), I'd like to warn you  
first that compiling Gtk and RGtk2 from sources is very, very tedious  
task and only for experts familiar with its intricacies (Gtk has many  
dependencies, cannot be built universally and requires own versions of  
several system libraries). We provide binaries for rggobi, RGtk2 as  
well as Gtk, so unless you have a very good reason for re-compiling  
RGtk, I'd strongly urge you not to try it.

Cheers,
Simon


On May 26, 2008, at 1:44 PM, Corrado Giannasca wrote:

> Dear All,
>
> I'm trying to install the source package RGtk2
> (RGtk2_2.12.5-3.tar.gz) on a i-Mac running os x 10.4.11:
>   Nome modello:	iMac
>   Identificatore modello:	iMac6,1
>   Nome processore:	Intel Core 2 Duo
>   Velocit? processore:	2.16 GHz
>   Numero di processori:	1
>   Numero totale di nuclei:	2
>   L2 Cache (per processore):	4 MB
>   Memoria:	2 GB
>   Velocit? bus:	667 MHz
>   Versione Boot ROM:	IM61.0093.B07
>   Versione SMC:	1.10f3
>
> This is a step needed to use Rattle package, as detailed in:
>
> http://datamining.togaware.com/survivor/Installation_Details.html:
> "...Mac/OSX: download the source package from ggobi,2.12 and run the
> command line install:
> Mac/OSX: $ R CMD INSTALL RGtk2_2.8.6.tar.gz   (30 minutes)
>
> You may not be able to compile RGtk2 via the R GUI on Mac/OSX as the
> GTK libraries can not be found when gcc is called. Once installed
> though, R will detect the package--don't try to load it within the
> GUI as GTK is not a native Mac/OSX application and it will fail. On
> Mac/OSX be sure to run R from the X11 environment. ..."
>
> The installation is performed in a Terminal window with the following
> command:
>
> corradogiannasca$ R CMD INSTALL RGtk2_2.12.5-3.tar.gz
>
> There is a long listing in output and the installation fails with the
> following statement:
>
> ............
> /usr/bin/libtool: internal link edit command failed
> make: *** [RGtk2.so] Error 1
> chmod: /Library/Frameworks/R.framework/Versions/2.7/Resources/library/
> RGtk2/libs/i386/*: No such file or directory
> ERROR: compilation failed for package 'RGtk2'
> ** Removing '/Library/Frameworks/R.framework/Versions/2.7/Resources/
> library/RGtk2'
>
> CAN ANYONE HELP IN RESOLVING THIS ERROR?
>
> Thank you very much for your support.
>
> Corrado Giannasca
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From carl at witthoft.com  Tue May 27 02:42:05 2008
From: carl at witthoft.com (Carl Witthoft)
Date: Mon, 26 May 2008 20:42:05 -0400
Subject: [R-SIG-Mac] Rscript
In-Reply-To: <mailman.2400.1211837574.7819.r-sig-mac@stat.math.ethz.ch>
References: <mailman.2400.1211837574.7819.r-sig-mac@stat.math.ethz.ch>
Message-ID: <483B58DD.6030104@witthoft.com>

So dumb question, but is Rscript relatively new?  I've got R v2.2.1 
loaded on my G4 iMac w/ 10.3.9 because that appeared to be the latest 
version which is compiled for my OS,  and there is no Rscript installed 
anywhere.

Carl


> Message: 2
> Date: Mon, 26 May 2008 12:39:45 +0100 (BST)
> From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
> Subject: Re: [R-SIG-Mac] Getting arguments from command line to run a
> 	R script
> To: Etienne Toffin <etoffin at ulb.ac.be>
> Cc: r-sig-mac at stat.math.ethz.ch
> Message-ID: <alpine.LFD.1.10.0805261233450.7298 at gannet.stats.ox.ac.uk>
> Content-Type: text/plain; charset="windows-1252"; Format="flowed"
> 
> This is not specific to Mac OS X.
> 
> See ?commandArgs and the --args argument to R.
> 
> Something that is specific to Mac OS X is that the most convenient way to 
> do this is to use Rscript, and I understand that is not installed into the 
> standard path on the CRAN binary.  It is I think at
> 
> /Library/Frameworks/R.framework/Resources/bin/Rscript
> 
> See ?Rscript for how to use it.
>


From macq at llnl.gov  Tue May 27 04:16:02 2008
From: macq at llnl.gov (Don MacQueen)
Date: Mon, 26 May 2008 19:16:02 -0700
Subject: [R-SIG-Mac] Rscript
In-Reply-To: <483B58DD.6030104@witthoft.com>
References: <mailman.2400.1211837574.7819.r-sig-mac@stat.math.ethz.ch>
	<483B58DD.6030104@witthoft.com>
Message-ID: <p06240801c4611ede2a32@[192.168.11.8]>

Relative to R 2.2.1, yes it is new.

A current NEWS file (available from CRAN) should indicate the version 
of R with which it was introduced.

-Don

At 8:42 PM -0400 5/26/08, Carl Witthoft wrote:
>So dumb question, but is Rscript relatively new?  I've got R v2.2.1 
>loaded on my G4 iMac w/ 10.3.9 because that appeared to be the 
>latest version which is compiled for my OS,  and there is no Rscript 
>installed anywhere.
>
>Carl
>
>>Message: 2
>>Date: Mon, 26 May 2008 12:39:45 +0100 (BST)
>>From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>Subject: Re: [R-SIG-Mac] Getting arguments from command line to run a
>>	R script
>>To: Etienne Toffin <etoffin at ulb.ac.be>
>>Cc: r-sig-mac at stat.math.ethz.ch
>>Message-ID: <alpine.LFD.1.10.0805261233450.7298 at gannet.stats.ox.ac.uk>
>>Content-Type: text/plain; charset="windows-1252"; Format="flowed"
>>
>>This is not specific to Mac OS X.
>>
>>See ?commandArgs and the --args argument to R.
>>
>>Something that is specific to Mac OS X is that the most convenient 
>>way to do this is to use Rscript, and I understand that is not 
>>installed into the standard path on the CRAN binary.  It is I think 
>>at
>>
>>/Library/Frameworks/R.framework/Resources/bin/Rscript
>>
>>See ?Rscript for how to use it.
>>
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
---------------------------------
Don MacQueen
Lawrence Livermore National Laboratory
Livermore, CA, USA
925-423-1062
macq at llnl.gov


From ripley at stats.ox.ac.uk  Tue May 27 07:48:07 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 27 May 2008 06:48:07 +0100 (BST)
Subject: [R-SIG-Mac] Rscript
In-Reply-To: <p06240801c4611ede2a32@[192.168.11.8]>
References: <mailman.2400.1211837574.7819.r-sig-mac@stat.math.ethz.ch>
	<483B58DD.6030104@witthoft.com>
	<p06240801c4611ede2a32@[192.168.11.8]>
Message-ID: <alpine.LFD.1.10.0805270646320.7719@gannet.stats.ox.ac.uk>

On Mon, 26 May 2008, Don MacQueen wrote:

> Relative to R 2.2.1, yes it is new.
>
> A current NEWS file (available from CRAN) should indicate the version of R 
> with which it was introduced.

R 2.5.0, April 2007.


>
> -Don
>
> At 8:42 PM -0400 5/26/08, Carl Witthoft wrote:
>> So dumb question, but is Rscript relatively new?  I've got R v2.2.1 loaded 
>> on my G4 iMac w/ 10.3.9 because that appeared to be the latest version 
>> which is compiled for my OS,  and there is no Rscript installed anywhere.
>> 
>> Carl
>> 
>>> Message: 2
>>> Date: Mon, 26 May 2008 12:39:45 +0100 (BST)
>>> From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>> Subject: Re: [R-SIG-Mac] Getting arguments from command line to run a
>>> 	R script
>>> To: Etienne Toffin <etoffin at ulb.ac.be>
>>> Cc: r-sig-mac at stat.math.ethz.ch
>>> Message-ID: <alpine.LFD.1.10.0805261233450.7298 at gannet.stats.ox.ac.uk>
>>> Content-Type: text/plain; charset="windows-1252"; Format="flowed"
>>> 
>>> This is not specific to Mac OS X.
>>> 
>>> See ?commandArgs and the --args argument to R.
>>> 
>>> Something that is specific to Mac OS X is that the most convenient way to 
>>> do this is to use Rscript, and I understand that is not installed into the 
>>> standard path on the CRAN binary.  It is I think at
>>> 
>>> /Library/Frameworks/R.framework/Resources/bin/Rscript
>>> 
>>> See ?Rscript for how to use it.
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> -- 
> ---------------------------------
> Don MacQueen
> Lawrence Livermore National Laboratory
> Livermore, CA, USA
> 925-423-1062
> macq at llnl.gov
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ken.knoblauch at inserm.fr  Thu May 29 15:17:28 2008
From: ken.knoblauch at inserm.fr (Kenneth Knoblauch)
Date: Thu, 29 May 2008 15:17:28 +0200
Subject: [R-SIG-Mac] dash spacing and slope in quartz device
Message-ID: <20080529151728.w67jcd5assw0c4gg@imp.inserm.fr>

Hi,

There was some discussion about slowdowns in the new quartz
device a few weeks ago that had to do with line drawing but
I don't think that the following has been mentioned.

I've noticed a "new" behavior in the quartz device that can be seen
by running

xx <- seq(1:100)
plot(xx, xx^2, type = "l", lty = 2)

On my display, the dash spacing disappears for xx < 40
for the default window size.
In addition, the dashes are obliterated by increasing the
line width,

lines(xx, 0.5 * xx^2, lty = 2, lwd = 2)

unless I enlarge the window.  The same occurs for lty = 3.

The dash spacing seems to depend on the slope of the contour.

plot(rep(1, 100), lty = 2, type = "l", ylim = c(0, 100))
lines(xx, lty = 2)
lines(2 * xx, lty = 2)

This did not occur in an earlier version of R that I tried (R 2.2.0)
and does not occur in other graphic devices that I have tried
(x11 and pdf, so far).

sessionInfo()
R version 2.7.0 Patched (2008-05-28 r45808)
i386-apple-darwin8.10.1

locale:
en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

Does anyone else see this?  Apologies in advance if this is normal
behavior.  Thank you.

best,

Ken


-- 
Ken Knoblauch
Inserm U846
Institut Cellule Souche et Cerveau
D?partement Neurosciences Int?gratives
18 avenue du Doyen L?pine
69500 Bron
France
tel: +33 (0)4 72 91 34 77
fax: +33 (0)4 72 91 34 61
portable: +33 (0)6 84 10 64 10
http://www.sbri.fr


From michael.zwinger at gmail.com  Fri May 30 00:28:42 2008
From: michael.zwinger at gmail.com (Michael Zwinger)
Date: Fri, 30 May 2008 00:28:42 +0200
Subject: [R-SIG-Mac] Try to use JRI on OSX 10.5.3
Message-ID: <BDA08E5D-BA1C-4CE7-A1F1-A3775F703552@gmail.com>

Hello Everybody

I' m trying to run JRI von on Mac and I get this message:

R was not built as a library
configure: error: R was not compiled with --enable-R-shlib

*** You must have libR.so or equivalent in order to use JRI ***

I'm im Using R 2.7.0.dmg

I' sorry i can't build R myself - anybody knows where ich can download  
the "right" binarys ?

Thanks for your help

greetings

Michael


From simon.urbanek at r-project.org  Fri May 30 16:02:35 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 30 May 2008 10:02:35 -0400
Subject: [R-SIG-Mac] Try to use JRI on OSX 10.5.3
In-Reply-To: <BDA08E5D-BA1C-4CE7-A1F1-A3775F703552@gmail.com>
References: <BDA08E5D-BA1C-4CE7-A1F1-A3775F703552@gmail.com>
Message-ID: <CEB5A3E4-13D9-4547-A759-F90C5C772998@r-project.org>


On May 29, 2008, at 6:28 PM, Michael Zwinger wrote:

> Hello Everybody
>
> I' m trying to run JRI von on Mac and I get this message:
>
> R was not built as a library
> configure: error: R was not compiled with --enable-R-shlib
>
> *** You must have libR.so or equivalent in order to use JRI ***
>
> I'm im Using R 2.7.0.dmg
>
> I' sorry i can't build R myself - anybody knows where ich can  
> download the "right" binarys ?
>

It's all on CRAN,
install.packages("rJava")
is all you really need (with the regular CRAN R binary)

As for recompiling JRI, can you, please, list exactly the steps you  
are taking and which JRI you are using?

Cheers,
Simon


