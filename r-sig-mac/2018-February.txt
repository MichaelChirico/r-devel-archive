From marc.girondot at u-psud.fr  Thu Feb  1 06:22:00 2018
From: marc.girondot at u-psud.fr (Marc Girondot)
Date: Thu, 1 Feb 2018 06:22:00 +0100
Subject: [R-SIG-Mac] rJava compilation on R 3.5 devel [SOLVED]
In-Reply-To: <CAJXgQP1qkKiTb0pqwf_R-P8z8cFNoU0cd7w6B7m6jjBE18bibw@mail.gmail.com>
References: <655e6baf-da67-731b-62b6-c3de954fa897@yahoo.fr>
 <0E3FDCBC-ADA9-45C5-9BC5-FDE6D5AED11E@nyu.edu>
 <AE1074C5-2260-4C13-9203-E79327F6CADB@nyu.edu>
 <a6e5b062-ec70-afdb-4c74-27b5f4b60583@yahoo.fr>
 <462e1a64-3406-077a-cbcb-cff9ce90cde9@u-psud.fr>
 <EFE8F37B-9380-4822-951B-4485F813D620@nyu.edu>
 <57aed820-1f90-f8bb-859b-3b8299205c71@u-psud.fr>
 <CEC95927-313A-4E4C-9C21-24D0E5F28E02@R-project.org>
 <2f9d945a-3760-31c1-ac9e-d0b856987db2@u-psud.fr>
 <CAJXgQP1qkKiTb0pqwf_R-P8z8cFNoU0cd7w6B7m6jjBE18bibw@mail.gmail.com>
Message-ID: <411ceedd-ecb6-59c9-d38f-354b01d5238f@u-psud.fr>

This is indeed a problem with Rstudio:

I used the Rstudio 1.2.308 (development version) but the same occurred 
with 1.1.419 version;
 > library("rJava")
Erreur : package or namespace load failed for ?rJava?:
 ?.onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
 ? appel : dyn.load(file, DLLpath = DLLpath, ...)
 ? erreur : impossible de charger l'objet partag? 
'/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so, 
6): Library not loaded: @rpath/libjvm.dylib
 ? Referenced from: 
/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
 ? Reason: image not found

1.1.419
Sys.getenv() gives
DYLD_FALLBACK_LIBRARY_PATH
/Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::
1.2.308
Sys.getenv() gives
DYLD_FALLBACK_LIBRARY_PATH
/Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::

R in terminal
Sys.getenv() gives
DYLD_FALLBACK_LIBRARY_PATH
/Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server

I try:

cd /usr/local/lib
sudo ln -s 
/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjsig.dylib 
libjsig.dylib
sudo ln -s 
/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjvm.dylib 
libjvm.dylib

And I can load rJava package in Rstudio also now.

Thanks to everybody for your help !

Marc



Le 01/02/2018 ? 01:23, Kevin Ushey a ?crit?:
> What version of RStudio are you using? This particular issue should be
> fixed in v1.1.419 of RStudio.
>
> On Wed, Jan 31, 2018 at 11:48 AM, Marc Girondot <marc.girondot at u-psud.fr> wrote:
>> Hi Simon,
>>
>> Half solution ! Thanks !
>>
>> I remove JAVA_HOME and when R is ran as root or non-root in terminal, rJava
>> package can be loaded. Great !
>>
>> But in Rstudio, I have still a problem (see bellow).
>>
>> Any suggestion ?
>>
>> Thanks
>>
>> Marc
>>
>>> library(rJava)
>> Erreur : package or namespace load failed for ?rJava?:
>>   .onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
>>    appel : dyn.load(file, DLLpath = DLLpath, ...)
>>    erreur : impossible de charger l'objet partag?
>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>> 6): Library not loaded: @rpath/libjvm.dylib
>>    Referenced from:
>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>    Reason: image not found
>>
>>
>> Here are the Sys.getenv() in the 3 cases (terminal R, root or not, and
>> Rstudio):
>> Rstudio
>>
>> DYLD_FALLBACK_LIBRARY_PATH
>> /Library/Frameworks/R.framework/Resources/lib:/Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::::
>> DYLD_LIBRARY_PATH
>> /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>
>> R (in terminal, non-root)
>>
>> DYLD_FALLBACK_LIBRARY_PATH
>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>
>> R (in terminal, root)
>>
>> DYLD_FALLBACK_LIBRARY_PATH
>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>
>>
>>
>>
>> Le 31/01/2018 ? 19:49, Simon Urbanek a ?crit :
>>> It means that you are likely setting JAVA_HOME incorrectly in your user
>>> account. Don't set JAVA_HOME - you'll only likely break things by doing so.
>>>
>>> Cheers,
>>> Simon
>>>
>>>
>>>
>>>> On Jan 31, 2018, at 10:52 AM, Marc Girondot <marc.girondot at u-psud.fr>
>>>> wrote:
>>>>
>>>> Thanks for your help:
>>>>
>>>> Here are some results; First in terminal:
>>>>
>>>> belinda:~ marcgirondot$ locate libjvm.dylib
>>>> /Applications/Xcode.app/Contents/Applications/Application
>>>> Loader.app/Contents/itms/java/lib/server/libjvm.dylib
>>>> /Library/Internet
>>>> Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/server/libjvm.dylib
>>>>
>>>> /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Libraries/libjvm.dylib
>>>>
>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>
>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>
>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>
>>>> Now in R as non-root:
>>>>
>>>>> Sys.getenv()
>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>>
>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/lib/server
>>>>
>>>> The path of DYLD_FALLBACK_LIBRARY_PATH is wrong. This folder does not
>>>> exist.
>>>>
>>>> And in R as root
>>>>> Sys.getenv()
>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>>
>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>>>
>>>> The path is correct
>>>>
>>>> Strange... but no solution still
>>>>
>>>> Marc
>>>>
>>>>
>>>> Le 31/01/2018 ? 14:39, Keith O'Hara a ?crit :
>>>>> Seems odd that R can?t find libjvm outside of sudo.
>>>>>
>>>>>   From R, run
>>>>>
>>>>> Sys.getenv()
>>>>>
>>>>> and check your DYLD_LIBRARY_PATH and DYLD_FALLBACK_LIBRARY_PATH
>>>>> variables. Should be ?[..]/Home/jre/lib/server? in there somewhere. Check
>>>>> those paths for libjvm.dylib
>>>>>
>>>>>> On Jan 31, 2018, at 8:17 AM, Marc Girondot <marc.girondot at u-psud.fr>
>>>>>> wrote:
>>>>>>
>>>>>> Sorry... bad news. It works only if R is ran as root. If R is ran as
>>>>>> non-root user:
>>>>>>
>>>>>>> library(rJava)
>>>>>> Erreur : package or namespace load failed for ?rJava?:
>>>>>>    .onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
>>>>>>     appel : dyn.load(file, DLLpath = DLLpath, ...)
>>>>>>     erreur : impossible de charger l'objet partag?
>>>>>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>>>>>>
>>>>>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>>>>>> 6): Library not loaded: @rpath/libjvm.dylib
>>>>>>     Referenced from:
>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>>>>>     Reason: image not found
>>>>>>
>>>>>> I will continue to investigate.
>>>>>>
>>>>>> Sorry for this wrong news !
>>>>>>
>>>>>> Marc
>>>>>>
>>>>>>
>>>>>> Le 31/01/2018 ? 14:03, Marc Girondot via R-SIG-Mac a ?crit :
>>>>>>> I have found a solution based on the proposition of Keith. Thanks a
>>>>>>> lot
>>>>>>>
>>>>>>> ############
>>>>>>>
>>>>>>> First I have made some cleaning because I had pieces of clang in many
>>>>>>> places.
>>>>>>>
>>>>>>> Then with a clean version I installed
>>>>>>> clang-4.0.0-darwin15.6-Release.tar.gz using the version in
>>>>>>> http://r.research.att.com/libs/clang-4.0.0-darwin15.6-Release.tar.gz
>>>>>>>
>>>>>>> Note that it produced an error at the end when I run the command:
>>>>>>> sudo tar xvzf clang-4.0.0-darwin15.6-Release.tar.gz -C /
>>>>>>> The error is:
>>>>>>> tar: Error exit delayed from previous errors.
>>>>>>>
>>>>>>> But it seems to be ok
>>>>>>>
>>>>>>> then I create the link as propose by Keith:
>>>>>>> cd /usr/local/lib
>>>>>>> sudo ln -s /usr/local/clang4/lib/libomp.dylib libomp.dylib
>>>>>>>
>>>>>>> And it works perfectly if the install.packages("rJava") is ran as
>>>>>>> root: sudo R
>>>>>>>
>>>>>>> ######################
>>>>>>>
>>>>>>> Now, let try with clang 5.0.1 from homebrew.
>>>>>>>
>>>>>>> First I delete all tracks of previous installation of clang4:
>>>>>>> sudo cd <folder where is clang-4.0.0-darwin15.6-Release.tar.gz)>
>>>>>>> # I use this trick to enter the root password firsttime; after it does
>>>>>>> not ask within the loop
>>>>>>> for file in $(tar tfz clang-4.0.0-darwin15.6-Release.tar.gz); do
>>>>>>>      sudo rm -f /$file;
>>>>>>> done
>>>>>>>
>>>>>>> # Remove empty _folders_ associated with the binary
>>>>>>> for file in $(tar tfz clang-4.0.0-darwin15.6-Release.tar.gz); do
>>>>>>>      sudo rmdir -p /$file;
>>>>>>> done
>>>>>>>
>>>>>>> Then I install llvm with homebrew:
>>>>>>> brew install llvm
>>>>>>>
>>>>>>> in /usr/local/opt/llvm/lib there is no libomp.dylib but libgomp.dylib
>>>>>>> and libiomp5.dylib. I don't know if I can use it instead of libomp.dylib.
>>>>>>>
>>>>>>> But I see one in:
>>>>>>>
>>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libomp.dylib
>>>>>>>
>>>>>>> Better to use this one:
>>>>>>> cd /usr/local/lib
>>>>>>> sudo ln -s
>>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libomp.dylib
>>>>>>> libomp.dylib
>>>>>>>
>>>>>>>
>>>>>>> And the compilation ran correctly.
>>>>>>>
>>>>>>> Thanks a lot !
>>>>>>>
>>>>>>> Marc
>>>>>>>
>>>>>>> Le 31/01/2018 ? 11:52, Keith O'Hara a ?crit :
>>>>>>>> Sorry, ignore the installation question, I missed the ?brew install?
>>>>>>>> line.
>>>>>>>>
>>>>>>>> Try adding a symbolic link from the brew install of libomp to
>>>>>>>> /usr/local/lib.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> On Jan 31, 2018, at 5:38 AM, Keith O'Hara <keith.ohara at nyu.edu>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>> Apple?s LLVM doesn?t support OpenMP, which explains the second
>>>>>>>>> error.
>>>>>>>>>
>>>>>>>>> How did you install clang-5.0.1? If you installed using MacPorts,
>>>>>>>>> then you might need to create a symbolic link to libomp in /usr/local/lib.
>>>>>>>>> Check if the following exists:
>>>>>>>>>
>>>>>>>>> /opt/local/lib/libomp/libomp.dylib
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> On Jan 31, 2018, at 5:22 AM, Marc Girondot via R-SIG-Mac
>>>>>>>>>> <r-sig-mac at r-project.org> wrote:
>>>>>>>>>>
>>>>>>>>>> Dear Experts,
>>>>>>>>>>
>>>>>>>>>> I use now r-3.5 devel as it is stable (from
>>>>>>>>>> http://r.research.att.com , version (2018/01/30, r74185) ) but I have a
>>>>>>>>>> problem with compilation of rJava package.
>>>>>>>>>>
>>>>>>>>>> In short (all the explanations are bellow):
>>>>>>>>>>
>>>>>>>>>> If I use clang 4.0.0 from here: http://r.research.att.com/libs/, I
>>>>>>>>>> get this error: ld: library not found for -lomp
>>>>>>>>>>
>>>>>>>>>> If I use clang from xcode, I get this error: clang: error:
>>>>>>>>>> unsupported option '-fopenmp'
>>>>>>>>>>
>>>>>>>>>> If I use clang 5.0.1, I get this error: ld: library not found for
>>>>>>>>>> -lomp
>>>>>>>>>>
>>>>>>>>>> Any idea to have rJava in r-devel ?
>>>>>>>>>>
>>>>>>>>>> Thanks a lot
>>>>>>>>>>
>>>>>>>>>> Marc
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> First I ran:
>>>>>>>>>>
>>>>>>>>>> sudo R CMD javareconf
>>>>>>>>>>
>>>>>>>>>> I have the Java version     : 1.8.0_162
>>>>>>>>>>
>>>>>>>>>> I need to compile it from source but it failed with clang4
>>>>>>>>>> reporting an error.
>>>>>>>>>>
>>>>>>>>>> I try various origin of clang:
>>>>>>>>>>
>>>>>>>>>> at the beginning of the compilation, it said:
>>>>>>>>>>
>>>>>>>>>> checking for gcc... /usr/local/clang4/bin/clang
>>>>>>>>>>
>>>>>>>>>> I tried several version of clang:
>>>>>>>>>>
>>>>>>>>>> belinda:local marcgirondot$
>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang
>>>>>>>>>> --version
>>>>>>>>>> Apple LLVM version 9.0.0 (clang-900.0.39.2)
>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>> Thread model: posix
>>>>>>>>>> InstalledDir:
>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
>>>>>>>>>>
>>>>>>>>>> or (same version installed by: brew install llvm )
>>>>>>>>>>
>>>>>>>>>> belinda:local marcgirondot$
>>>>>>>>>> /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin/bin/clang --version
>>>>>>>>>> clang version 5.0.1 (tags/RELEASE_501/final)
>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>> Thread model: posix
>>>>>>>>>> InstalledDir:
>>>>>>>>>> /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin/bin
>>>>>>>>>>
>>>>>>>>>> or
>>>>>>>>>>
>>>>>>>>>> belinda:local marcgirondot$ /usr/local/clang4/bin/clang --version
>>>>>>>>>> clang version 4.0.0 (tags/RELEASE_400/final)
>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>> Thread model: posix
>>>>>>>>>> InstalledDir: /usr/local/clang4/bin
>>>>>>>>>>
>>>>>>>>>> If I use the former, I get this error:
>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>> ld: library not found for -lomp
>>>>>>>>>> clang-4.0: error: linker command failed with exit code 1 (use -v to
>>>>>>>>>> see invocation)
>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>
>>>>>>>>>> Then I tried more recent versions:
>>>>>>>>>>
>>>>>>>>>> I make a symbolic link to clang 5.0.1 or the one within xcode:
>>>>>>>>>> cd /usr/local
>>>>>>>>>> sudo ln -s /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin
>>>>>>>>>> clang4
>>>>>>>>>>
>>>>>>>>>> I get this error: (after running sudo R and within R:
>>>>>>>>>> install.packages("rJava")
>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>> ld: library not found for -lomp
>>>>>>>>>> clang-5.0: error: linker command failed with exit code 1 (use -v to
>>>>>>>>>> see invocation)
>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> If I make the symbolic link to
>>>>>>>>>> cd /usr/local
>>>>>>>>>> sudo ln -s
>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr
>>>>>>>>>> clang4
>>>>>>>>>>
>>>>>>>>>> I get this error: (after running sudo R and within R:
>>>>>>>>>> install.packages("rJava")
>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>> clang: error: unsupported option '-fopenmp'
>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>
>>>>>>>>>> _______________________________________________
>>>>>>>>>> R-SIG-Mac mailing list
>>>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> --
>>>>>> __________________________________________________________
>>>>>> Marc Girondot, Pr
>>>>>>
>>>>>> Laboratoire Ecologie, Syst?matique et Evolution
>>>>>> Equipe de Conservation des Populations et des Communaut?s
>>>>>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>>>>>> B?timent 362
>>>>>> 91405 Orsay Cedex, France
>>>>>>
>>>>>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>>>>>> e-mail: marc.girondot at u-psud.fr
>>>>>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>>>>>> Skype: girondot
>>>>>>
>>>> --
>>>> __________________________________________________________
>>>> Marc Girondot, Pr
>>>>
>>>> Laboratoire Ecologie, Syst?matique et Evolution
>>>> Equipe de Conservation des Populations et des Communaut?s
>>>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>>>> B?timent 362
>>>> 91405 Orsay Cedex, France
>>>>
>>>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>>>> e-mail: marc.girondot at u-psud.fr
>>>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>>>> Skype: girondot
>>>>
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>> --
>> __________________________________________________________
>> Marc Girondot, Pr
>>
>> Laboratoire Ecologie, Syst?matique et Evolution
>> Equipe de Conservation des Populations et des Communaut?s
>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>> B?timent 362
>> 91405 Orsay Cedex, France
>>
>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>> e-mail: marc.girondot at u-psud.fr
>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>> Skype: girondot
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
__________________________________________________________
Marc Girondot, Pr

Laboratoire Ecologie, Syst?matique et Evolution
Equipe de Conservation des Populations et des Communaut?s
CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
B?timent 362
91405 Orsay Cedex, France

Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
e-mail: marc.girondot at u-psud.fr
Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
Skype: girondot


From M.Hagens at uu.nl  Thu Feb  1 08:39:03 2018
From: M.Hagens at uu.nl (Hagens, M. (Mathilde))
Date: Thu, 1 Feb 2018 07:39:03 +0000
Subject: [R-SIG-Mac] help: change of e-mail address
Message-ID: <C4631C069A2F2B4F9F44F6A5F556F676640DCD19@WP0047.soliscom.uu.nl>

To whom it may concern,

I've been trying to change my e-mail address unsuccessfully via the World Wide Web. Could you please change my e-mail address to mathilde.hagens at wur.nl? 

Thank you,
Mathilde

Dr. M. (Mathilde) Hagens | Assistant Professor | Department of Soil Quality | Wageningen University & Research | Droevendaalsesteeg 4, 6708 PB Wageningen, the Netherlands | tel. +31 317 487 775 | www.wur.nl/en/Persons/Mathilde-dr.-M-Mathilde-Hagens.htm | Please note new e-mail address: mathilde.hagens at wur.nl


________________________________________
From: R-SIG-Mac [r-sig-mac-bounces at r-project.org] on behalf of r-sig-mac-request at r-project.org [r-sig-mac-request at r-project.org]
Sent: Thursday, February 01, 2018 06:22
To: r-sig-mac at r-project.org
Subject: R-SIG-Mac Digest, Vol 180, Issue 1

Send R-SIG-Mac mailing list submissions to
        r-sig-mac at r-project.org

To subscribe or unsubscribe via the World Wide Web, visit
        https://stat.ethz.ch/mailman/listinfo/r-sig-mac
or, via email, send a message with subject or body 'help' to
        r-sig-mac-request at r-project.org

You can reach the person managing the list at
        r-sig-mac-owner at r-project.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-SIG-Mac digest..."

From pdalgd at gmail.com  Thu Feb  1 11:04:55 2018
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 1 Feb 2018 11:04:55 +0100
Subject: [R-SIG-Mac] help: change of e-mail address
In-Reply-To: <C4631C069A2F2B4F9F44F6A5F556F676640DCD19@WP0047.soliscom.uu.nl>
References: <C4631C069A2F2B4F9F44F6A5F556F676640DCD19@WP0047.soliscom.uu.nl>
Message-ID: <4D8169A6-FDCF-4510-A9F1-87871CBA181B@gmail.com>

Um, no we can't! 

You are writing to all subscribers of the list and we cannot mess with eachother's subscriptions. 

In case of administrative trouble, you need 

>  r-sig-mac-owner at r-project.org

However, are you _sure_ that it didn't work to follow the instructions at https://stat.ethz.ch/mailman/listinfo/r-sig-mac ?

Notice in particular that the system cannot retroactively change recipients on things that have already been sent, and that mails can sit in mailer queues for some time. I.e., you may recieve mails to the old address for a while until the new address takes effect.

-pd

> On 1 Feb 2018, at 08:39 , Hagens, M. (Mathilde) <M.Hagens at uu.nl> wrote:
> 
> To whom it may concern,
> 
> I've been trying to change my e-mail address unsuccessfully via the World Wide Web. Could you please change my e-mail address to mathilde.hagens at wur.nl? 
> 
> Thank you,
> Mathilde
> 
> Dr. M. (Mathilde) Hagens | Assistant Professor | Department of Soil Quality | Wageningen University & Research | Droevendaalsesteeg 4, 6708 PB Wageningen, the Netherlands | tel. +31 317 487 775 | www.wur.nl/en/Persons/Mathilde-dr.-M-Mathilde-Hagens.htm | Please note new e-mail address: mathilde.hagens at wur.nl
> 
> 
> ________________________________________
> From: R-SIG-Mac [r-sig-mac-bounces at r-project.org] on behalf of r-sig-mac-request at r-project.org [r-sig-mac-request at r-project.org]
> Sent: Thursday, February 01, 2018 06:22
> To: r-sig-mac at r-project.org
> Subject: R-SIG-Mac Digest, Vol 180, Issue 1
> 
> Send R-SIG-Mac mailing list submissions to
>        r-sig-mac at r-project.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
>        https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> or, via email, send a message with subject or body 'help' to
>        r-sig-mac-request at r-project.org
> 
> You can reach the person managing the list at
>        r-sig-mac-owner at r-project.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Mac digest..."
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From keith.ohara at nyu.edu  Thu Feb  1 12:02:39 2018
From: keith.ohara at nyu.edu (Keith O'Hara)
Date: Thu, 1 Feb 2018 06:02:39 -0500
Subject: [R-SIG-Mac] rJava compilation on R 3.5 devel [SOLVED]
In-Reply-To: <411ceedd-ecb6-59c9-d38f-354b01d5238f@u-psud.fr>
References: <655e6baf-da67-731b-62b6-c3de954fa897@yahoo.fr>
 <0E3FDCBC-ADA9-45C5-9BC5-FDE6D5AED11E@nyu.edu>
 <AE1074C5-2260-4C13-9203-E79327F6CADB@nyu.edu>
 <a6e5b062-ec70-afdb-4c74-27b5f4b60583@yahoo.fr>
 <462e1a64-3406-077a-cbcb-cff9ce90cde9@u-psud.fr>
 <EFE8F37B-9380-4822-951B-4485F813D620@nyu.edu>
 <57aed820-1f90-f8bb-859b-3b8299205c71@u-psud.fr>
 <CEC95927-313A-4E4C-9C21-24D0E5F28E02@R-project.org>
 <2f9d945a-3760-31c1-ac9e-d0b856987db2@u-psud.fr>
 <CAJXgQP1qkKiTb0pqwf_R-P8z8cFNoU0cd7w6B7m6jjBE18bibw@mail.gmail.com>
 <411ceedd-ecb6-59c9-d38f-354b01d5238f@u-psud.fr>
Message-ID: <3E3BC8C1-CD64-46AE-AF9A-F46045CA6CC1@nyu.edu>

That looks like a bad idea to me?unless I am mistaken, you will need to update your link with every update to the JDK, otherwise R and RStudio could be out of sync when building/loading rJava.

(Consider contacting the RStudio people for a more permanent solution, as Simon suggested.)

> On Feb 1, 2018, at 12:22 AM, Marc Girondot <marc.girondot at u-psud.fr> wrote:
> 
> This is indeed a problem with Rstudio:
> 
> I used the Rstudio 1.2.308 (development version) but the same occurred with 1.1.419 version;
> > library("rJava")
> Erreur : package or namespace load failed for ?rJava?:
>  .onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
>   appel : dyn.load(file, DLLpath = DLLpath, ...)
>   erreur : impossible de charger l'objet partag? '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so, 6): Library not loaded: @rpath/libjvm.dylib
>   Referenced from: /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>   Reason: image not found
> 
> 1.1.419
> Sys.getenv() gives
> DYLD_FALLBACK_LIBRARY_PATH
> /Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::
> 1.2.308
> Sys.getenv() gives
> DYLD_FALLBACK_LIBRARY_PATH
> /Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::
> 
> R in terminal
> Sys.getenv() gives
> DYLD_FALLBACK_LIBRARY_PATH
> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
> 
> I try:
> 
> cd /usr/local/lib
> sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjsig.dylib libjsig.dylib
> sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjvm.dylib libjvm.dylib
> 
> And I can load rJava package in Rstudio also now.
> 
> Thanks to everybody for your help !
> 
> Marc
> 
> 
> 
> Le 01/02/2018 ? 01:23, Kevin Ushey a ?crit :
>> What version of RStudio are you using? This particular issue should be
>> fixed in v1.1.419 of RStudio.
>> 
>> On Wed, Jan 31, 2018 at 11:48 AM, Marc Girondot <marc.girondot at u-psud.fr> wrote:
>>> Hi Simon,
>>> 
>>> Half solution ! Thanks !
>>> 
>>> I remove JAVA_HOME and when R is ran as root or non-root in terminal, rJava
>>> package can be loaded. Great !
>>> 
>>> But in Rstudio, I have still a problem (see bellow).
>>> 
>>> Any suggestion ?
>>> 
>>> Thanks
>>> 
>>> Marc
>>> 
>>>> library(rJava)
>>> Erreur : package or namespace load failed for ?rJava?:
>>>  .onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
>>>   appel : dyn.load(file, DLLpath = DLLpath, ...)
>>>   erreur : impossible de charger l'objet partag?
>>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>>> 6): Library not loaded: @rpath/libjvm.dylib
>>>   Referenced from:
>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>>   Reason: image not found
>>> 
>>> 
>>> Here are the Sys.getenv() in the 3 cases (terminal R, root or not, and
>>> Rstudio):
>>> Rstudio
>>> 
>>> DYLD_FALLBACK_LIBRARY_PATH
>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::::
>>> DYLD_LIBRARY_PATH
>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>> 
>>> R (in terminal, non-root)
>>> 
>>> DYLD_FALLBACK_LIBRARY_PATH
>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>> 
>>> R (in terminal, root)
>>> 
>>> DYLD_FALLBACK_LIBRARY_PATH
>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>> 
>>> 
>>> 
>>> 
>>> Le 31/01/2018 ? 19:49, Simon Urbanek a ?crit :
>>>> It means that you are likely setting JAVA_HOME incorrectly in your user
>>>> account. Don't set JAVA_HOME - you'll only likely break things by doing so.
>>>> 
>>>> Cheers,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>>> On Jan 31, 2018, at 10:52 AM, Marc Girondot <marc.girondot at u-psud.fr>
>>>>> wrote:
>>>>> 
>>>>> Thanks for your help:
>>>>> 
>>>>> Here are some results; First in terminal:
>>>>> 
>>>>> belinda:~ marcgirondot$ locate libjvm.dylib
>>>>> /Applications/Xcode.app/Contents/Applications/Application
>>>>> Loader.app/Contents/itms/java/lib/server/libjvm.dylib
>>>>> /Library/Internet
>>>>> Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/server/libjvm.dylib
>>>>> 
>>>>> /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Libraries/libjvm.dylib
>>>>> 
>>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>> 
>>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>> 
>>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>> 
>>>>> Now in R as non-root:
>>>>> 
>>>>>> Sys.getenv()
>>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>>> 
>>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/lib/server
>>>>> 
>>>>> The path of DYLD_FALLBACK_LIBRARY_PATH is wrong. This folder does not
>>>>> exist.
>>>>> 
>>>>> And in R as root
>>>>>> Sys.getenv()
>>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>>> 
>>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>>>> 
>>>>> The path is correct
>>>>> 
>>>>> Strange... but no solution still
>>>>> 
>>>>> Marc
>>>>> 
>>>>> 
>>>>> Le 31/01/2018 ? 14:39, Keith O'Hara a ?crit :
>>>>>> Seems odd that R can?t find libjvm outside of sudo.
>>>>>> 
>>>>>>  From R, run
>>>>>> 
>>>>>> Sys.getenv()
>>>>>> 
>>>>>> and check your DYLD_LIBRARY_PATH and DYLD_FALLBACK_LIBRARY_PATH
>>>>>> variables. Should be ?[..]/Home/jre/lib/server? in there somewhere. Check
>>>>>> those paths for libjvm.dylib
>>>>>> 
>>>>>>> On Jan 31, 2018, at 8:17 AM, Marc Girondot <marc.girondot at u-psud.fr>
>>>>>>> wrote:
>>>>>>> 
>>>>>>> Sorry... bad news. It works only if R is ran as root. If R is ran as
>>>>>>> non-root user:
>>>>>>> 
>>>>>>>> library(rJava)
>>>>>>> Erreur : package or namespace load failed for ?rJava?:
>>>>>>>   .onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
>>>>>>>    appel : dyn.load(file, DLLpath = DLLpath, ...)
>>>>>>>    erreur : impossible de charger l'objet partag?
>>>>>>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>>>>>>> 
>>>>>>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>>>>>>> 6): Library not loaded: @rpath/libjvm.dylib
>>>>>>>    Referenced from:
>>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>>>>>>    Reason: image not found
>>>>>>> 
>>>>>>> I will continue to investigate.
>>>>>>> 
>>>>>>> Sorry for this wrong news !
>>>>>>> 
>>>>>>> Marc
>>>>>>> 
>>>>>>> 
>>>>>>> Le 31/01/2018 ? 14:03, Marc Girondot via R-SIG-Mac a ?crit :
>>>>>>>> I have found a solution based on the proposition of Keith. Thanks a
>>>>>>>> lot
>>>>>>>> 
>>>>>>>> ############
>>>>>>>> 
>>>>>>>> First I have made some cleaning because I had pieces of clang in many
>>>>>>>> places.
>>>>>>>> 
>>>>>>>> Then with a clean version I installed
>>>>>>>> clang-4.0.0-darwin15.6-Release.tar.gz using the version in
>>>>>>>> http://r.research.att.com/libs/clang-4.0.0-darwin15.6-Release.tar.gz
>>>>>>>> 
>>>>>>>> Note that it produced an error at the end when I run the command:
>>>>>>>> sudo tar xvzf clang-4.0.0-darwin15.6-Release.tar.gz -C /
>>>>>>>> The error is:
>>>>>>>> tar: Error exit delayed from previous errors.
>>>>>>>> 
>>>>>>>> But it seems to be ok
>>>>>>>> 
>>>>>>>> then I create the link as propose by Keith:
>>>>>>>> cd /usr/local/lib
>>>>>>>> sudo ln -s /usr/local/clang4/lib/libomp.dylib libomp.dylib
>>>>>>>> 
>>>>>>>> And it works perfectly if the install.packages("rJava") is ran as
>>>>>>>> root: sudo R
>>>>>>>> 
>>>>>>>> ######################
>>>>>>>> 
>>>>>>>> Now, let try with clang 5.0.1 from homebrew.
>>>>>>>> 
>>>>>>>> First I delete all tracks of previous installation of clang4:
>>>>>>>> sudo cd <folder where is clang-4.0.0-darwin15.6-Release.tar.gz)>
>>>>>>>> # I use this trick to enter the root password firsttime; after it does
>>>>>>>> not ask within the loop
>>>>>>>> for file in $(tar tfz clang-4.0.0-darwin15.6-Release.tar.gz); do
>>>>>>>>     sudo rm -f /$file;
>>>>>>>> done
>>>>>>>> 
>>>>>>>> # Remove empty _folders_ associated with the binary
>>>>>>>> for file in $(tar tfz clang-4.0.0-darwin15.6-Release.tar.gz); do
>>>>>>>>     sudo rmdir -p /$file;
>>>>>>>> done
>>>>>>>> 
>>>>>>>> Then I install llvm with homebrew:
>>>>>>>> brew install llvm
>>>>>>>> 
>>>>>>>> in /usr/local/opt/llvm/lib there is no libomp.dylib but libgomp.dylib
>>>>>>>> and libiomp5.dylib. I don't know if I can use it instead of libomp.dylib.
>>>>>>>> 
>>>>>>>> But I see one in:
>>>>>>>> 
>>>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libomp.dylib
>>>>>>>> 
>>>>>>>> Better to use this one:
>>>>>>>> cd /usr/local/lib
>>>>>>>> sudo ln -s
>>>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libomp.dylib
>>>>>>>> libomp.dylib
>>>>>>>> 
>>>>>>>> 
>>>>>>>> And the compilation ran correctly.
>>>>>>>> 
>>>>>>>> Thanks a lot !
>>>>>>>> 
>>>>>>>> Marc
>>>>>>>> 
>>>>>>>> Le 31/01/2018 ? 11:52, Keith O'Hara a ?crit :
>>>>>>>>> Sorry, ignore the installation question, I missed the ?brew install?
>>>>>>>>> line.
>>>>>>>>> 
>>>>>>>>> Try adding a symbolic link from the brew install of libomp to
>>>>>>>>> /usr/local/lib.
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>>> On Jan 31, 2018, at 5:38 AM, Keith O'Hara <keith.ohara at nyu.edu>
>>>>>>>>>> wrote:
>>>>>>>>>> 
>>>>>>>>>> Apple?s LLVM doesn?t support OpenMP, which explains the second
>>>>>>>>>> error.
>>>>>>>>>> 
>>>>>>>>>> How did you install clang-5.0.1? If you installed using MacPorts,
>>>>>>>>>> then you might need to create a symbolic link to libomp in /usr/local/lib.
>>>>>>>>>> Check if the following exists:
>>>>>>>>>> 
>>>>>>>>>> /opt/local/lib/libomp/libomp.dylib
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>>> On Jan 31, 2018, at 5:22 AM, Marc Girondot via R-SIG-Mac
>>>>>>>>>>> <r-sig-mac at r-project.org> wrote:
>>>>>>>>>>> 
>>>>>>>>>>> Dear Experts,
>>>>>>>>>>> 
>>>>>>>>>>> I use now r-3.5 devel as it is stable (from
>>>>>>>>>>> http://r.research.att.com , version (2018/01/30, r74185) ) but I have a
>>>>>>>>>>> problem with compilation of rJava package.
>>>>>>>>>>> 
>>>>>>>>>>> In short (all the explanations are bellow):
>>>>>>>>>>> 
>>>>>>>>>>> If I use clang 4.0.0 from here: http://r.research.att.com/libs/, I
>>>>>>>>>>> get this error: ld: library not found for -lomp
>>>>>>>>>>> 
>>>>>>>>>>> If I use clang from xcode, I get this error: clang: error:
>>>>>>>>>>> unsupported option '-fopenmp'
>>>>>>>>>>> 
>>>>>>>>>>> If I use clang 5.0.1, I get this error: ld: library not found for
>>>>>>>>>>> -lomp
>>>>>>>>>>> 
>>>>>>>>>>> Any idea to have rJava in r-devel ?
>>>>>>>>>>> 
>>>>>>>>>>> Thanks a lot
>>>>>>>>>>> 
>>>>>>>>>>> Marc
>>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>>> First I ran:
>>>>>>>>>>> 
>>>>>>>>>>> sudo R CMD javareconf
>>>>>>>>>>> 
>>>>>>>>>>> I have the Java version     : 1.8.0_162
>>>>>>>>>>> 
>>>>>>>>>>> I need to compile it from source but it failed with clang4
>>>>>>>>>>> reporting an error.
>>>>>>>>>>> 
>>>>>>>>>>> I try various origin of clang:
>>>>>>>>>>> 
>>>>>>>>>>> at the beginning of the compilation, it said:
>>>>>>>>>>> 
>>>>>>>>>>> checking for gcc... /usr/local/clang4/bin/clang
>>>>>>>>>>> 
>>>>>>>>>>> I tried several version of clang:
>>>>>>>>>>> 
>>>>>>>>>>> belinda:local marcgirondot$
>>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang
>>>>>>>>>>> --version
>>>>>>>>>>> Apple LLVM version 9.0.0 (clang-900.0.39.2)
>>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>>> Thread model: posix
>>>>>>>>>>> InstalledDir:
>>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
>>>>>>>>>>> 
>>>>>>>>>>> or (same version installed by: brew install llvm )
>>>>>>>>>>> 
>>>>>>>>>>> belinda:local marcgirondot$
>>>>>>>>>>> /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin/bin/clang --version
>>>>>>>>>>> clang version 5.0.1 (tags/RELEASE_501/final)
>>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>>> Thread model: posix
>>>>>>>>>>> InstalledDir:
>>>>>>>>>>> /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin/bin
>>>>>>>>>>> 
>>>>>>>>>>> or
>>>>>>>>>>> 
>>>>>>>>>>> belinda:local marcgirondot$ /usr/local/clang4/bin/clang --version
>>>>>>>>>>> clang version 4.0.0 (tags/RELEASE_400/final)
>>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>>> Thread model: posix
>>>>>>>>>>> InstalledDir: /usr/local/clang4/bin
>>>>>>>>>>> 
>>>>>>>>>>> If I use the former, I get this error:
>>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>>> ld: library not found for -lomp
>>>>>>>>>>> clang-4.0: error: linker command failed with exit code 1 (use -v to
>>>>>>>>>>> see invocation)
>>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>> 
>>>>>>>>>>> Then I tried more recent versions:
>>>>>>>>>>> 
>>>>>>>>>>> I make a symbolic link to clang 5.0.1 or the one within xcode:
>>>>>>>>>>> cd /usr/local
>>>>>>>>>>> sudo ln -s /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin
>>>>>>>>>>> clang4
>>>>>>>>>>> 
>>>>>>>>>>> I get this error: (after running sudo R and within R:
>>>>>>>>>>> install.packages("rJava")
>>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>>> ld: library not found for -lomp
>>>>>>>>>>> clang-5.0: error: linker command failed with exit code 1 (use -v to
>>>>>>>>>>> see invocation)
>>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>>> If I make the symbolic link to
>>>>>>>>>>> cd /usr/local
>>>>>>>>>>> sudo ln -s
>>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr
>>>>>>>>>>> clang4
>>>>>>>>>>> 
>>>>>>>>>>> I get this error: (after running sudo R and within R:
>>>>>>>>>>> install.packages("rJava")
>>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>>> clang: error: unsupported option '-fopenmp'
>>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>> 
>>>>>>>>>>> _______________________________________________
>>>>>>>>>>> R-SIG-Mac mailing list
>>>>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>> _______________________________________________
>>>>>>>> R-SIG-Mac mailing list
>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>> --
>>>>>>> __________________________________________________________
>>>>>>> Marc Girondot, Pr
>>>>>>> 
>>>>>>> Laboratoire Ecologie, Syst?matique et Evolution
>>>>>>> Equipe de Conservation des Populations et des Communaut?s
>>>>>>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>>>>>>> B?timent 362
>>>>>>> 91405 Orsay Cedex, France
>>>>>>> 
>>>>>>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>>>>>>> e-mail: marc.girondot at u-psud.fr
>>>>>>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>>>>>>> Skype: girondot
>>>>>>> 
>>>>> --
>>>>> __________________________________________________________
>>>>> Marc Girondot, Pr
>>>>> 
>>>>> Laboratoire Ecologie, Syst?matique et Evolution
>>>>> Equipe de Conservation des Populations et des Communaut?s
>>>>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>>>>> B?timent 362
>>>>> 91405 Orsay Cedex, France
>>>>> 
>>>>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>>>>> e-mail: marc.girondot at u-psud.fr
>>>>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>>>>> Skype: girondot
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> 
>>> --
>>> __________________________________________________________
>>> Marc Girondot, Pr
>>> 
>>> Laboratoire Ecologie, Syst?matique et Evolution
>>> Equipe de Conservation des Populations et des Communaut?s
>>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>>> B?timent 362
>>> 91405 Orsay Cedex, France
>>> 
>>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>>> e-mail: marc.girondot at u-psud.fr
>>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>>> Skype: girondot
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> -- 
> __________________________________________________________
> Marc Girondot, Pr
> 
> Laboratoire Ecologie, Syst?matique et Evolution
> Equipe de Conservation des Populations et des Communaut?s
> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
> B?timent 362
> 91405 Orsay Cedex, France
> 
> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
> e-mail: marc.girondot at u-psud.fr
> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
> Skype: girondot
> 


From simon.urbanek at R-project.org  Thu Feb  1 19:53:45 2018
From: simon.urbanek at R-project.org (Simon Urbanek)
Date: Thu, 1 Feb 2018 13:53:45 -0500
Subject: [R-SIG-Mac] rJava compilation on R 3.5 devel [SOLVED]
In-Reply-To: <3E3BC8C1-CD64-46AE-AF9A-F46045CA6CC1@nyu.edu>
References: <655e6baf-da67-731b-62b6-c3de954fa897@yahoo.fr>
 <0E3FDCBC-ADA9-45C5-9BC5-FDE6D5AED11E@nyu.edu>
 <AE1074C5-2260-4C13-9203-E79327F6CADB@nyu.edu>
 <a6e5b062-ec70-afdb-4c74-27b5f4b60583@yahoo.fr>
 <462e1a64-3406-077a-cbcb-cff9ce90cde9@u-psud.fr>
 <EFE8F37B-9380-4822-951B-4485F813D620@nyu.edu>
 <57aed820-1f90-f8bb-859b-3b8299205c71@u-psud.fr>
 <CEC95927-313A-4E4C-9C21-24D0E5F28E02@R-project.org>
 <2f9d945a-3760-31c1-ac9e-d0b856987db2@u-psud.fr>
 <CAJXgQP1qkKiTb0pqwf_R-P8z8cFNoU0cd7w6B7m6jjBE18bibw@mail.gmail.com>
 <411ceedd-ecb6-59c9-d38f-354b01d5238f@u-psud.fr>
 <3E3BC8C1-CD64-46AE-AF9A-F46045CA6CC1@nyu.edu>
Message-ID: <96401254-C1E7-4203-9A5D-F85F8B3EC152@R-project.org>

That is, unfortunately, the reality of Oracle taking over Java. They have no idea what they are doing on macOS so once Apple stopped supporting system Java you have to re-run
R CMD javareconf
every time you upgrade Java version since they their binaries are broken. There is no way to link to Oracle Java as it changes paths without embedding the ID. It is sad that Oracle (unlike Apple) is not capable of providing a working solution, but since corporate Java is all you get on macOS there is no real choice and we have to live with it and its limitations.

Cheers,
Simon



> On Feb 1, 2018, at 6:02 AM, Keith O'Hara <keith.ohara at nyu.edu> wrote:
> 
> That looks like a bad idea to me?unless I am mistaken, you will need to update your link with every update to the JDK, otherwise R and RStudio could be out of sync when building/loading rJava.
> 
> (Consider contacting the RStudio people for a more permanent solution, as Simon suggested.)
> 
>> On Feb 1, 2018, at 12:22 AM, Marc Girondot <marc.girondot at u-psud.fr> wrote:
>> 
>> This is indeed a problem with Rstudio:
>> 
>> I used the Rstudio 1.2.308 (development version) but the same occurred with 1.1.419 version;
>>> library("rJava")
>> Erreur : package or namespace load failed for ?rJava?:
>> .onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
>>  appel : dyn.load(file, DLLpath = DLLpath, ...)
>>  erreur : impossible de charger l'objet partag? '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so, 6): Library not loaded: @rpath/libjvm.dylib
>>  Referenced from: /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>  Reason: image not found
>> 
>> 1.1.419
>> Sys.getenv() gives
>> DYLD_FALLBACK_LIBRARY_PATH
>> /Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::
>> 1.2.308
>> Sys.getenv() gives
>> DYLD_FALLBACK_LIBRARY_PATH
>> /Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::
>> 
>> R in terminal
>> Sys.getenv() gives
>> DYLD_FALLBACK_LIBRARY_PATH
>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>> 
>> I try:
>> 
>> cd /usr/local/lib
>> sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjsig.dylib libjsig.dylib
>> sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjvm.dylib libjvm.dylib
>> 
>> And I can load rJava package in Rstudio also now.
>> 
>> Thanks to everybody for your help !
>> 
>> Marc
>> 
>> 
>> 
>> Le 01/02/2018 ? 01:23, Kevin Ushey a ?crit :
>>> What version of RStudio are you using? This particular issue should be
>>> fixed in v1.1.419 of RStudio.
>>> 
>>> On Wed, Jan 31, 2018 at 11:48 AM, Marc Girondot <marc.girondot at u-psud.fr> wrote:
>>>> Hi Simon,
>>>> 
>>>> Half solution ! Thanks !
>>>> 
>>>> I remove JAVA_HOME and when R is ran as root or non-root in terminal, rJava
>>>> package can be loaded. Great !
>>>> 
>>>> But in Rstudio, I have still a problem (see bellow).
>>>> 
>>>> Any suggestion ?
>>>> 
>>>> Thanks
>>>> 
>>>> Marc
>>>> 
>>>>> library(rJava)
>>>> Erreur : package or namespace load failed for ?rJava?:
>>>> .onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
>>>>  appel : dyn.load(file, DLLpath = DLLpath, ...)
>>>>  erreur : impossible de charger l'objet partag?
>>>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>>>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>>>> 6): Library not loaded: @rpath/libjvm.dylib
>>>>  Referenced from:
>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>>>  Reason: image not found
>>>> 
>>>> 
>>>> Here are the Sys.getenv() in the 3 cases (terminal R, root or not, and
>>>> Rstudio):
>>>> Rstudio
>>>> 
>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Frameworks/R.framework/Resources/lib:/Users/marcgirondot/lib:/usr/local/lib:/usr/lib::::
>>>> DYLD_LIBRARY_PATH
>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>>> 
>>>> R (in terminal, non-root)
>>>> 
>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>>> 
>>>> R (in terminal, root)
>>>> 
>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>>> 
>>>> 
>>>> 
>>>> 
>>>> Le 31/01/2018 ? 19:49, Simon Urbanek a ?crit :
>>>>> It means that you are likely setting JAVA_HOME incorrectly in your user
>>>>> account. Don't set JAVA_HOME - you'll only likely break things by doing so.
>>>>> 
>>>>> Cheers,
>>>>> Simon
>>>>> 
>>>>> 
>>>>> 
>>>>>> On Jan 31, 2018, at 10:52 AM, Marc Girondot <marc.girondot at u-psud.fr>
>>>>>> wrote:
>>>>>> 
>>>>>> Thanks for your help:
>>>>>> 
>>>>>> Here are some results; First in terminal:
>>>>>> 
>>>>>> belinda:~ marcgirondot$ locate libjvm.dylib
>>>>>> /Applications/Xcode.app/Contents/Applications/Application
>>>>>> Loader.app/Contents/itms/java/lib/server/libjvm.dylib
>>>>>> /Library/Internet
>>>>>> Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/server/libjvm.dylib
>>>>>> 
>>>>>> /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Libraries/libjvm.dylib
>>>>>> 
>>>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>>> 
>>>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>>> 
>>>>>> /Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjvm.dylib
>>>>>> 
>>>>>> Now in R as non-root:
>>>>>> 
>>>>>>> Sys.getenv()
>>>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>>>> 
>>>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/lib/server
>>>>>> 
>>>>>> The path of DYLD_FALLBACK_LIBRARY_PATH is wrong. This folder does not
>>>>>> exist.
>>>>>> 
>>>>>> And in R as root
>>>>>>> Sys.getenv()
>>>>>> DYLD_FALLBACK_LIBRARY_PATH
>>>>>> 
>>>>>> /Library/Frameworks/R.framework/Resources/lib:/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server
>>>>>> 
>>>>>> The path is correct
>>>>>> 
>>>>>> Strange... but no solution still
>>>>>> 
>>>>>> Marc
>>>>>> 
>>>>>> 
>>>>>> Le 31/01/2018 ? 14:39, Keith O'Hara a ?crit :
>>>>>>> Seems odd that R can?t find libjvm outside of sudo.
>>>>>>> 
>>>>>>> From R, run
>>>>>>> 
>>>>>>> Sys.getenv()
>>>>>>> 
>>>>>>> and check your DYLD_LIBRARY_PATH and DYLD_FALLBACK_LIBRARY_PATH
>>>>>>> variables. Should be ?[..]/Home/jre/lib/server? in there somewhere. Check
>>>>>>> those paths for libjvm.dylib
>>>>>>> 
>>>>>>>> On Jan 31, 2018, at 8:17 AM, Marc Girondot <marc.girondot at u-psud.fr>
>>>>>>>> wrote:
>>>>>>>> 
>>>>>>>> Sorry... bad news. It works only if R is ran as root. If R is ran as
>>>>>>>> non-root user:
>>>>>>>> 
>>>>>>>>> library(rJava)
>>>>>>>> Erreur : package or namespace load failed for ?rJava?:
>>>>>>>>  .onLoad a ?chou? dans loadNamespace() pour 'rJava', d?tails :
>>>>>>>>   appel : dyn.load(file, DLLpath = DLLpath, ...)
>>>>>>>>   erreur : impossible de charger l'objet partag?
>>>>>>>> '/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so':
>>>>>>>> 
>>>>>>>> dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so,
>>>>>>>> 6): Library not loaded: @rpath/libjvm.dylib
>>>>>>>>   Referenced from:
>>>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs/rJava.so
>>>>>>>>   Reason: image not found
>>>>>>>> 
>>>>>>>> I will continue to investigate.
>>>>>>>> 
>>>>>>>> Sorry for this wrong news !
>>>>>>>> 
>>>>>>>> Marc
>>>>>>>> 
>>>>>>>> 
>>>>>>>> Le 31/01/2018 ? 14:03, Marc Girondot via R-SIG-Mac a ?crit :
>>>>>>>>> I have found a solution based on the proposition of Keith. Thanks a
>>>>>>>>> lot
>>>>>>>>> 
>>>>>>>>> ############
>>>>>>>>> 
>>>>>>>>> First I have made some cleaning because I had pieces of clang in many
>>>>>>>>> places.
>>>>>>>>> 
>>>>>>>>> Then with a clean version I installed
>>>>>>>>> clang-4.0.0-darwin15.6-Release.tar.gz using the version in
>>>>>>>>> http://r.research.att.com/libs/clang-4.0.0-darwin15.6-Release.tar.gz
>>>>>>>>> 
>>>>>>>>> Note that it produced an error at the end when I run the command:
>>>>>>>>> sudo tar xvzf clang-4.0.0-darwin15.6-Release.tar.gz -C /
>>>>>>>>> The error is:
>>>>>>>>> tar: Error exit delayed from previous errors.
>>>>>>>>> 
>>>>>>>>> But it seems to be ok
>>>>>>>>> 
>>>>>>>>> then I create the link as propose by Keith:
>>>>>>>>> cd /usr/local/lib
>>>>>>>>> sudo ln -s /usr/local/clang4/lib/libomp.dylib libomp.dylib
>>>>>>>>> 
>>>>>>>>> And it works perfectly if the install.packages("rJava") is ran as
>>>>>>>>> root: sudo R
>>>>>>>>> 
>>>>>>>>> ######################
>>>>>>>>> 
>>>>>>>>> Now, let try with clang 5.0.1 from homebrew.
>>>>>>>>> 
>>>>>>>>> First I delete all tracks of previous installation of clang4:
>>>>>>>>> sudo cd <folder where is clang-4.0.0-darwin15.6-Release.tar.gz)>
>>>>>>>>> # I use this trick to enter the root password firsttime; after it does
>>>>>>>>> not ask within the loop
>>>>>>>>> for file in $(tar tfz clang-4.0.0-darwin15.6-Release.tar.gz); do
>>>>>>>>>    sudo rm -f /$file;
>>>>>>>>> done
>>>>>>>>> 
>>>>>>>>> # Remove empty _folders_ associated with the binary
>>>>>>>>> for file in $(tar tfz clang-4.0.0-darwin15.6-Release.tar.gz); do
>>>>>>>>>    sudo rmdir -p /$file;
>>>>>>>>> done
>>>>>>>>> 
>>>>>>>>> Then I install llvm with homebrew:
>>>>>>>>> brew install llvm
>>>>>>>>> 
>>>>>>>>> in /usr/local/opt/llvm/lib there is no libomp.dylib but libgomp.dylib
>>>>>>>>> and libiomp5.dylib. I don't know if I can use it instead of libomp.dylib.
>>>>>>>>> 
>>>>>>>>> But I see one in:
>>>>>>>>> 
>>>>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libomp.dylib
>>>>>>>>> 
>>>>>>>>> Better to use this one:
>>>>>>>>> cd /usr/local/lib
>>>>>>>>> sudo ln -s
>>>>>>>>> /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libomp.dylib
>>>>>>>>> libomp.dylib
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> And the compilation ran correctly.
>>>>>>>>> 
>>>>>>>>> Thanks a lot !
>>>>>>>>> 
>>>>>>>>> Marc
>>>>>>>>> 
>>>>>>>>> Le 31/01/2018 ? 11:52, Keith O'Hara a ?crit :
>>>>>>>>>> Sorry, ignore the installation question, I missed the ?brew install?
>>>>>>>>>> line.
>>>>>>>>>> 
>>>>>>>>>> Try adding a symbolic link from the brew install of libomp to
>>>>>>>>>> /usr/local/lib.
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>>> On Jan 31, 2018, at 5:38 AM, Keith O'Hara <keith.ohara at nyu.edu>
>>>>>>>>>>> wrote:
>>>>>>>>>>> 
>>>>>>>>>>> Apple?s LLVM doesn?t support OpenMP, which explains the second
>>>>>>>>>>> error.
>>>>>>>>>>> 
>>>>>>>>>>> How did you install clang-5.0.1? If you installed using MacPorts,
>>>>>>>>>>> then you might need to create a symbolic link to libomp in /usr/local/lib.
>>>>>>>>>>> Check if the following exists:
>>>>>>>>>>> 
>>>>>>>>>>> /opt/local/lib/libomp/libomp.dylib
>>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>>>> On Jan 31, 2018, at 5:22 AM, Marc Girondot via R-SIG-Mac
>>>>>>>>>>>> <r-sig-mac at r-project.org> wrote:
>>>>>>>>>>>> 
>>>>>>>>>>>> Dear Experts,
>>>>>>>>>>>> 
>>>>>>>>>>>> I use now r-3.5 devel as it is stable (from
>>>>>>>>>>>> http://r.research.att.com , version (2018/01/30, r74185) ) but I have a
>>>>>>>>>>>> problem with compilation of rJava package.
>>>>>>>>>>>> 
>>>>>>>>>>>> In short (all the explanations are bellow):
>>>>>>>>>>>> 
>>>>>>>>>>>> If I use clang 4.0.0 from here: http://r.research.att.com/libs/, I
>>>>>>>>>>>> get this error: ld: library not found for -lomp
>>>>>>>>>>>> 
>>>>>>>>>>>> If I use clang from xcode, I get this error: clang: error:
>>>>>>>>>>>> unsupported option '-fopenmp'
>>>>>>>>>>>> 
>>>>>>>>>>>> If I use clang 5.0.1, I get this error: ld: library not found for
>>>>>>>>>>>> -lomp
>>>>>>>>>>>> 
>>>>>>>>>>>> Any idea to have rJava in r-devel ?
>>>>>>>>>>>> 
>>>>>>>>>>>> Thanks a lot
>>>>>>>>>>>> 
>>>>>>>>>>>> Marc
>>>>>>>>>>>> 
>>>>>>>>>>>> 
>>>>>>>>>>>> 
>>>>>>>>>>>> First I ran:
>>>>>>>>>>>> 
>>>>>>>>>>>> sudo R CMD javareconf
>>>>>>>>>>>> 
>>>>>>>>>>>> I have the Java version     : 1.8.0_162
>>>>>>>>>>>> 
>>>>>>>>>>>> I need to compile it from source but it failed with clang4
>>>>>>>>>>>> reporting an error.
>>>>>>>>>>>> 
>>>>>>>>>>>> I try various origin of clang:
>>>>>>>>>>>> 
>>>>>>>>>>>> at the beginning of the compilation, it said:
>>>>>>>>>>>> 
>>>>>>>>>>>> checking for gcc... /usr/local/clang4/bin/clang
>>>>>>>>>>>> 
>>>>>>>>>>>> I tried several version of clang:
>>>>>>>>>>>> 
>>>>>>>>>>>> belinda:local marcgirondot$
>>>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang
>>>>>>>>>>>> --version
>>>>>>>>>>>> Apple LLVM version 9.0.0 (clang-900.0.39.2)
>>>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>>>> Thread model: posix
>>>>>>>>>>>> InstalledDir:
>>>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
>>>>>>>>>>>> 
>>>>>>>>>>>> or (same version installed by: brew install llvm )
>>>>>>>>>>>> 
>>>>>>>>>>>> belinda:local marcgirondot$
>>>>>>>>>>>> /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin/bin/clang --version
>>>>>>>>>>>> clang version 5.0.1 (tags/RELEASE_501/final)
>>>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>>>> Thread model: posix
>>>>>>>>>>>> InstalledDir:
>>>>>>>>>>>> /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin/bin
>>>>>>>>>>>> 
>>>>>>>>>>>> or
>>>>>>>>>>>> 
>>>>>>>>>>>> belinda:local marcgirondot$ /usr/local/clang4/bin/clang --version
>>>>>>>>>>>> clang version 4.0.0 (tags/RELEASE_400/final)
>>>>>>>>>>>> Target: x86_64-apple-darwin17.3.0
>>>>>>>>>>>> Thread model: posix
>>>>>>>>>>>> InstalledDir: /usr/local/clang4/bin
>>>>>>>>>>>> 
>>>>>>>>>>>> If I use the former, I get this error:
>>>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>>>> ld: library not found for -lomp
>>>>>>>>>>>> clang-4.0: error: linker command failed with exit code 1 (use -v to
>>>>>>>>>>>> see invocation)
>>>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>>> 
>>>>>>>>>>>> Then I tried more recent versions:
>>>>>>>>>>>> 
>>>>>>>>>>>> I make a symbolic link to clang 5.0.1 or the one within xcode:
>>>>>>>>>>>> cd /usr/local
>>>>>>>>>>>> sudo ln -s /Applications/clang+llvm-5.0.1-final-x86_64-apple-darwin
>>>>>>>>>>>> clang4
>>>>>>>>>>>> 
>>>>>>>>>>>> I get this error: (after running sudo R and within R:
>>>>>>>>>>>> install.packages("rJava")
>>>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>>>> ld: library not found for -lomp
>>>>>>>>>>>> clang-5.0: error: linker command failed with exit code 1 (use -v to
>>>>>>>>>>>> see invocation)
>>>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>>> 
>>>>>>>>>>>> 
>>>>>>>>>>>> If I make the symbolic link to
>>>>>>>>>>>> cd /usr/local
>>>>>>>>>>>> sudo ln -s
>>>>>>>>>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr
>>>>>>>>>>>> clang4
>>>>>>>>>>>> 
>>>>>>>>>>>> I get this error: (after running sudo R and within R:
>>>>>>>>>>>> install.packages("rJava")
>>>>>>>>>>>> /usr/local/clang4/bin/clang -o libjri.jnilib Rengine.o jri.o
>>>>>>>>>>>> Rcallbacks.o Rinit.o globals.o rjava.o  -dynamiclib -framework JavaVM
>>>>>>>>>>>> -fopenmp -L/usr/local/lib -F/Library/Frameworks/R.framework/.. -framework R
>>>>>>>>>>>> -lpcre -llzma -lbz2 -lz -licucore -lm -liconv
>>>>>>>>>>>> clang: error: unsupported option '-fopenmp'
>>>>>>>>>>>> make[2]: *** [libjri.jnilib] Error 1
>>>>>>>>>>>> make[1]: *** [src/JRI.jar] Error 2
>>>>>>>>>>>> make: *** [jri] Error 2
>>>>>>>>>>>> ERROR: compilation failed for package ?rJava?
>>>>>>>>>>>> 
>>>>>>>>>>>> _______________________________________________
>>>>>>>>>>>> R-SIG-Mac mailing list
>>>>>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>>> _______________________________________________
>>>>>>>>> R-SIG-Mac mailing list
>>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>> --
>>>>>>>> __________________________________________________________
>>>>>>>> Marc Girondot, Pr
>>>>>>>> 
>>>>>>>> Laboratoire Ecologie, Syst?matique et Evolution
>>>>>>>> Equipe de Conservation des Populations et des Communaut?s
>>>>>>>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>>>>>>>> B?timent 362
>>>>>>>> 91405 Orsay Cedex, France
>>>>>>>> 
>>>>>>>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>>>>>>>> e-mail: marc.girondot at u-psud.fr
>>>>>>>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>>>>>>>> Skype: girondot
>>>>>>>> 
>>>>>> --
>>>>>> __________________________________________________________
>>>>>> Marc Girondot, Pr
>>>>>> 
>>>>>> Laboratoire Ecologie, Syst?matique et Evolution
>>>>>> Equipe de Conservation des Populations et des Communaut?s
>>>>>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>>>>>> B?timent 362
>>>>>> 91405 Orsay Cedex, France
>>>>>> 
>>>>>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>>>>>> e-mail: marc.girondot at u-psud.fr
>>>>>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>>>>>> Skype: girondot
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>>> --
>>>> __________________________________________________________
>>>> Marc Girondot, Pr
>>>> 
>>>> Laboratoire Ecologie, Syst?matique et Evolution
>>>> Equipe de Conservation des Populations et des Communaut?s
>>>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>>>> B?timent 362
>>>> 91405 Orsay Cedex, France
>>>> 
>>>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>>>> e-mail: marc.girondot at u-psud.fr
>>>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>>>> Skype: girondot
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> -- 
>> __________________________________________________________
>> Marc Girondot, Pr
>> 
>> Laboratoire Ecologie, Syst?matique et Evolution
>> Equipe de Conservation des Populations et des Communaut?s
>> CNRS, AgroParisTech et Universit? Paris-Sud 11 , UMR 8079
>> B?timent 362
>> 91405 Orsay Cedex, France
>> 
>> Tel:  33 1 (0)1.69.15.72.30   Fax: 33 1 (0)1.69.15.73.53
>> e-mail: marc.girondot at u-psud.fr
>> Web: http://www.ese.u-psud.fr/epc/conservation/Marc.html
>> Skype: girondot
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From marc_grt at yahoo.fr  Wed Feb 14 14:43:48 2018
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Wed, 14 Feb 2018 14:43:48 +0100
Subject: [R-SIG-Mac] Update of RcppParallel failed
Message-ID: <3eb3afd8-935d-d448-0416-c4dd6a182bac@yahoo.fr>

This morning I had an update to apply for RcppParallel but it failed

Here are some information:

 > update.packages()
RcppParallel :
 ?Version 4.3.20 installed in 
/Library/Frameworks/R.framework/Versions/3.5/Resources/library
 ?Version 4.3.20.1 available at https://cran.r-project.org
....
During instal, I had this error

error: invalid argument '-std=gnu++11' not allowed with 'C'

It failed with the two versions of clang that I have installed:

clang++ --version
clang version 5.0.1 (tags/RELEASE_501/final)
Target: x86_64-apple-darwin17.4.0
Thread model: posix
InstalledDir: /usr/local/opt/llvm/bin

or

clang++ --version
Apple LLVM version 9.0.0 (clang-900.0.39.2)
Target: x86_64-apple-darwin17.4.0
Thread model: posix
InstalledDir: 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin

Do you have some idea about what's happened and how to solve this problem ?

Thanks

Marc

_________________

Information on my R version:

 > R.Version()
$platform
[1] "x86_64-apple-darwin15.6.0"

$arch
[1] "x86_64"

$os
[1] "darwin15.6.0"

$system
[1] "x86_64, darwin15.6.0"

$status
[1] "Under development (unstable)"

$major
[1] "3"

$minor
[1] "5.0"

$year
[1] "2018"

$month
[1] "02"

$day
[1] "13"

$`svn rev`
[1] "74247"

$language
[1] "R"

$version.string
[1] "R Under development (unstable) (2018-02-13 r74247)"

$nickname
[1] "Unsuffered Consequences"


From keith.ohara at nyu.edu  Wed Feb 14 15:01:10 2018
From: keith.ohara at nyu.edu (Keith O'Hara)
Date: Wed, 14 Feb 2018 09:01:10 -0500
Subject: [R-SIG-Mac] Update of RcppParallel failed
In-Reply-To: <3eb3afd8-935d-d448-0416-c4dd6a182bac@yahoo.fr>
References: <3eb3afd8-935d-d448-0416-c4dd6a182bac@yahoo.fr>
Message-ID: <BE10F5B4-F58B-44FF-A0D5-7208854A92B3@nyu.edu>

This looks like an issue to bring up with the Rcpp guys, not R? but can you provide a full printout of the error? I?m guessing this failed when compiling a C file, not C++.

> On Feb 14, 2018, at 8:43 AM, Marc Girondot via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> This morning I had an update to apply for RcppParallel but it failed
> 
> Here are some information:
> 
> > update.packages()
> RcppParallel :
>  Version 4.3.20 installed in /Library/Frameworks/R.framework/Versions/3.5/Resources/library
>  Version 4.3.20.1 available at https://cran.r-project.org
> ....
> During instal, I had this error
> 
> error: invalid argument '-std=gnu++11' not allowed with 'C'
> 
> It failed with the two versions of clang that I have installed:
> 
> clang++ --version
> clang version 5.0.1 (tags/RELEASE_501/final)
> Target: x86_64-apple-darwin17.4.0
> Thread model: posix
> InstalledDir: /usr/local/opt/llvm/bin
> 
> or
> 
> clang++ --version
> Apple LLVM version 9.0.0 (clang-900.0.39.2)
> Target: x86_64-apple-darwin17.4.0
> Thread model: posix
> InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
> 
> Do you have some idea about what's happened and how to solve this problem ?
> 
> Thanks
> 
> Marc
> 
> _________________
> 
> Information on my R version:
> 
> > R.Version()
> $platform
> [1] "x86_64-apple-darwin15.6.0"
> 
> $arch
> [1] "x86_64"
> 
> $os
> [1] "darwin15.6.0"
> 
> $system
> [1] "x86_64, darwin15.6.0"
> 
> $status
> [1] "Under development (unstable)"
> 
> $major
> [1] "3"
> 
> $minor
> [1] "5.0"
> 
> $year
> [1] "2018"
> 
> $month
> [1] "02"
> 
> $day
> [1] "13"
> 
> $`svn rev`
> [1] "74247"
> 
> $language
> [1] "R"
> 
> $version.string
> [1] "R Under development (unstable) (2018-02-13 r74247)"
> 
> $nickname
> [1] "Unsuffered Consequences"
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ripley at stats.ox.ac.uk  Wed Feb 14 15:29:17 2018
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 14 Feb 2018 14:29:17 +0000
Subject: [R-SIG-Mac] Update of RcppParallel failed
In-Reply-To: <BE10F5B4-F58B-44FF-A0D5-7208854A92B3@nyu.edu>
References: <3eb3afd8-935d-d448-0416-c4dd6a182bac@yahoo.fr>
 <BE10F5B4-F58B-44FF-A0D5-7208854A92B3@nyu.edu>
Message-ID: <a62eecc0-e69c-b636-56fc-f86bdeb1dbd4@stats.ox.ac.uk>

On 14/02/2018 14:01, Keith O'Hara wrote:
> This looks like an issue to bring up with the Rcpp guys, not R? but can you provide a full printout of the error? I?m guessing this failed when compiling a C file, not C++.

RcppParalllel is not part of Rcpp, and orphaned.  It seems to be a 
mac-specific issue (it is not happening on other platforms with clang).

There is a bug in src/Makevars.  The line

PKG_CPPFLAGS += $(CXX1XSTD) -I../inst/include/

should refer to PKG_CXXFLAGS.  I'll fix that after testing as version 
4.3.20.2.




>> On Feb 14, 2018, at 8:43 AM, Marc Girondot via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>
>> This morning I had an update to apply for RcppParallel but it failed
>>
>> Here are some information:
>>
>>> update.packages()
>> RcppParallel :
>>   Version 4.3.20 installed in /Library/Frameworks/R.framework/Versions/3.5/Resources/library
>>   Version 4.3.20.1 available at https://cran.r-project.org
>> ....
>> During instal, I had this error
>>
>> error: invalid argument '-std=gnu++11' not allowed with 'C'
>>
>> It failed with the two versions of clang that I have installed:
>>
>> clang++ --version
>> clang version 5.0.1 (tags/RELEASE_501/final)
>> Target: x86_64-apple-darwin17.4.0
>> Thread model: posix
>> InstalledDir: /usr/local/opt/llvm/bin
>>
>> or
>>
>> clang++ --version
>> Apple LLVM version 9.0.0 (clang-900.0.39.2)
>> Target: x86_64-apple-darwin17.4.0
>> Thread model: posix
>> InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
>>
>> Do you have some idea about what's happened and how to solve this problem ?
>>
>> Thanks
>>
>> Marc
>>
>> _________________
>>
>> Information on my R version:
>>
>>> R.Version()
>> $platform
>> [1] "x86_64-apple-darwin15.6.0"
>>
>> $arch
>> [1] "x86_64"
>>
>> $os
>> [1] "darwin15.6.0"
>>
>> $system
>> [1] "x86_64, darwin15.6.0"
>>
>> $status
>> [1] "Under development (unstable)"
>>
>> $major
>> [1] "3"
>>
>> $minor
>> [1] "5.0"
>>
>> $year
>> [1] "2018"
>>
>> $month
>> [1] "02"
>>
>> $day
>> [1] "13"
>>
>> $`svn rev`
>> [1] "74247"
>>
>> $language
>> [1] "R"
>>
>> $version.string
>> [1] "R Under development (unstable) (2018-02-13 r74247)"
>>
>> $nickname
>> [1] "Unsuffered Consequences"
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From keith.ohara at nyu.edu  Wed Feb 14 15:46:30 2018
From: keith.ohara at nyu.edu (Keith O'Hara)
Date: Wed, 14 Feb 2018 09:46:30 -0500
Subject: [R-SIG-Mac] Update of RcppParallel failed
In-Reply-To: <a62eecc0-e69c-b636-56fc-f86bdeb1dbd4@stats.ox.ac.uk>
References: <3eb3afd8-935d-d448-0416-c4dd6a182bac@yahoo.fr>
 <BE10F5B4-F58B-44FF-A0D5-7208854A92B3@nyu.edu>
 <a62eecc0-e69c-b636-56fc-f86bdeb1dbd4@stats.ox.ac.uk>
Message-ID: <6DD93C14-C7F0-41E0-9FF7-357B2842F6AF@nyu.edu>

(It?s under the RcppCore banner, so I figured it was Dirk and co.)

The package installed fine for me (on a Mac), but the build doesn?t seem to import the CC and CXX settings from ~.R/Makevars or Makeconf for some reason. Bug on my end, or is there a reason for this?

> On Feb 14, 2018, at 9:29 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> 
> On 14/02/2018 14:01, Keith O'Hara wrote:
>> This looks like an issue to bring up with the Rcpp guys, not R? but can you provide a full printout of the error? I?m guessing this failed when compiling a C file, not C++.
> 
> RcppParalllel is not part of Rcpp, and orphaned.  It seems to be a mac-specific issue (it is not happening on other platforms with clang).
> 
> There is a bug in src/Makevars.  The line
> 
> PKG_CPPFLAGS += $(CXX1XSTD) -I../inst/include/
> 
> should refer to PKG_CXXFLAGS.  I'll fix that after testing as version 4.3.20.2.
> 
> 
> 
> 
>>> On Feb 14, 2018, at 8:43 AM, Marc Girondot via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> This morning I had an update to apply for RcppParallel but it failed
>>> 
>>> Here are some information:
>>> 
>>>> update.packages()
>>> RcppParallel :
>>>  Version 4.3.20 installed in /Library/Frameworks/R.framework/Versions/3.5/Resources/library
>>>  Version 4.3.20.1 available at https://cran.r-project.org
>>> ....
>>> During instal, I had this error
>>> 
>>> error: invalid argument '-std=gnu++11' not allowed with 'C'
>>> 
>>> It failed with the two versions of clang that I have installed:
>>> 
>>> clang++ --version
>>> clang version 5.0.1 (tags/RELEASE_501/final)
>>> Target: x86_64-apple-darwin17.4.0
>>> Thread model: posix
>>> InstalledDir: /usr/local/opt/llvm/bin
>>> 
>>> or
>>> 
>>> clang++ --version
>>> Apple LLVM version 9.0.0 (clang-900.0.39.2)
>>> Target: x86_64-apple-darwin17.4.0
>>> Thread model: posix
>>> InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
>>> 
>>> Do you have some idea about what's happened and how to solve this problem ?
>>> 
>>> Thanks
>>> 
>>> Marc
>>> 
>>> _________________
>>> 
>>> Information on my R version:
>>> 
>>>> R.Version()
>>> $platform
>>> [1] "x86_64-apple-darwin15.6.0"
>>> 
>>> $arch
>>> [1] "x86_64"
>>> 
>>> $os
>>> [1] "darwin15.6.0"
>>> 
>>> $system
>>> [1] "x86_64, darwin15.6.0"
>>> 
>>> $status
>>> [1] "Under development (unstable)"
>>> 
>>> $major
>>> [1] "3"
>>> 
>>> $minor
>>> [1] "5.0"
>>> 
>>> $year
>>> [1] "2018"
>>> 
>>> $month
>>> [1] "02"
>>> 
>>> $day
>>> [1] "13"
>>> 
>>> $`svn rev`
>>> [1] "74247"
>>> 
>>> $language
>>> [1] "R"
>>> 
>>> $version.string
>>> [1] "R Under development (unstable) (2018-02-13 r74247)"
>>> 
>>> $nickname
>>> [1] "Unsuffered Consequences"
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac <https://stat.ethz.ch/mailman/listinfo/r-sig-mac>
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk>
> Emeritus Professor of Applied Statistics, University of Oxford
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac <https://stat.ethz.ch/mailman/listinfo/r-sig-mac>

	[[alternative HTML version deleted]]


From kevinushey at gmail.com  Wed Feb 14 15:58:43 2018
From: kevinushey at gmail.com (Kevin Ushey)
Date: Wed, 14 Feb 2018 06:58:43 -0800
Subject: [R-SIG-Mac] Update of RcppParallel failed
In-Reply-To: <6DD93C14-C7F0-41E0-9FF7-357B2842F6AF@nyu.edu>
References: <3eb3afd8-935d-d448-0416-c4dd6a182bac@yahoo.fr>
 <BE10F5B4-F58B-44FF-A0D5-7208854A92B3@nyu.edu>
 <a62eecc0-e69c-b636-56fc-f86bdeb1dbd4@stats.ox.ac.uk>
 <6DD93C14-C7F0-41E0-9FF7-357B2842F6AF@nyu.edu>
Message-ID: <CAJXgQP1opxWQuYcNMBkpwLcgF=M8Wji3PLHnN+OYDa1YoHSA2g@mail.gmail.com>

RcppParallel is indeed a package produced and maintained by the Rcpp
core team, but RcppParallel is now considered ORPHANED on CRAN:

https://cran.r-project.org/package=RcppParallel

This is in spite of my repeated attempts to submit updates of this
package to CRAN (as the package maintainer); submissions which were
ignored and received no response from the CRAN team. This also
includes posts I made to the R-package-devel mailing list, where I
tried to ask what I needed to do to get RcppParallel back on CRAN.
Also ignored.

Professor Ripley and the CRAN team are currently the 'de facto'
maintainers of the version of RcppParallel you see on CRAN. I guess
you can ask them if you're having trouble installing the CRAN version,
until we've sorted out CRAN maintainership of the package.

Thanks,
Kevin

On Wed, Feb 14, 2018 at 6:46 AM, Keith O'Hara <keith.ohara at nyu.edu> wrote:
> (It?s under the RcppCore banner, so I figured it was Dirk and co.)
>
> The package installed fine for me (on a Mac), but the build doesn?t seem to import the CC and CXX settings from ~.R/Makevars or Makeconf for some reason. Bug on my end, or is there a reason for this?
>
>> On Feb 14, 2018, at 9:29 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>
>> On 14/02/2018 14:01, Keith O'Hara wrote:
>>> This looks like an issue to bring up with the Rcpp guys, not R? but can you provide a full printout of the error? I?m guessing this failed when compiling a C file, not C++.
>>
>> RcppParalllel is not part of Rcpp, and orphaned.  It seems to be a mac-specific issue (it is not happening on other platforms with clang).
>>
>> There is a bug in src/Makevars.  The line
>>
>> PKG_CPPFLAGS += $(CXX1XSTD) -I../inst/include/
>>
>> should refer to PKG_CXXFLAGS.  I'll fix that after testing as version 4.3.20.2.
>>
>>
>>
>>
>>>> On Feb 14, 2018, at 8:43 AM, Marc Girondot via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>>>
>>>> This morning I had an update to apply for RcppParallel but it failed
>>>>
>>>> Here are some information:
>>>>
>>>>> update.packages()
>>>> RcppParallel :
>>>>  Version 4.3.20 installed in /Library/Frameworks/R.framework/Versions/3.5/Resources/library
>>>>  Version 4.3.20.1 available at https://cran.r-project.org
>>>> ....
>>>> During instal, I had this error
>>>>
>>>> error: invalid argument '-std=gnu++11' not allowed with 'C'
>>>>
>>>> It failed with the two versions of clang that I have installed:
>>>>
>>>> clang++ --version
>>>> clang version 5.0.1 (tags/RELEASE_501/final)
>>>> Target: x86_64-apple-darwin17.4.0
>>>> Thread model: posix
>>>> InstalledDir: /usr/local/opt/llvm/bin
>>>>
>>>> or
>>>>
>>>> clang++ --version
>>>> Apple LLVM version 9.0.0 (clang-900.0.39.2)
>>>> Target: x86_64-apple-darwin17.4.0
>>>> Thread model: posix
>>>> InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
>>>>
>>>> Do you have some idea about what's happened and how to solve this problem ?
>>>>
>>>> Thanks
>>>>
>>>> Marc
>>>>
>>>> _________________
>>>>
>>>> Information on my R version:
>>>>
>>>>> R.Version()
>>>> $platform
>>>> [1] "x86_64-apple-darwin15.6.0"
>>>>
>>>> $arch
>>>> [1] "x86_64"
>>>>
>>>> $os
>>>> [1] "darwin15.6.0"
>>>>
>>>> $system
>>>> [1] "x86_64, darwin15.6.0"
>>>>
>>>> $status
>>>> [1] "Under development (unstable)"
>>>>
>>>> $major
>>>> [1] "3"
>>>>
>>>> $minor
>>>> [1] "5.0"
>>>>
>>>> $year
>>>> [1] "2018"
>>>>
>>>> $month
>>>> [1] "02"
>>>>
>>>> $day
>>>> [1] "13"
>>>>
>>>> $`svn rev`
>>>> [1] "74247"
>>>>
>>>> $language
>>>> [1] "R"
>>>>
>>>> $version.string
>>>> [1] "R Under development (unstable) (2018-02-13 r74247)"
>>>>
>>>> $nickname
>>>> [1] "Unsuffered Consequences"
>>>>
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac <https://stat.ethz.ch/mailman/listinfo/r-sig-mac>
>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk>
>> Emeritus Professor of Applied Statistics, University of Oxford
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac <https://stat.ethz.ch/mailman/listinfo/r-sig-mac>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From Paul.Ossenbruggen at unh.edu  Wed Feb 14 16:01:46 2018
From: Paul.Ossenbruggen at unh.edu (Ossenbruggen, Paul)
Date: Wed, 14 Feb 2018 15:01:46 +0000
Subject: [R-SIG-Mac] R installation error caused by a bogus file.
Message-ID: <0B742675-F1EB-4F2B-9F5D-F8587D399278@unh.edu>

I receive the following error whenever I restart R and reload R onto my computer:

Error: object 'CF.mb' not found
[R.app GUI 1.70 (7463) x86_64-apple-darwin15.6.0]

The object 'CF.mb? file is a bogus file. In actually, it does not and should not exist and R should not attempting to load it.

I suspect that I created it by mistake when I worked with RStudio in creating a R package called ?CF?. Most likely I typed ?CF.mb" instead of ?CF.md.? The extension ?.md? makes sense. It is extension for a Markdown file. ?.mb? stands for some animation program extension, which I am not using. 

QUESTION: How do I stop R from looking for this object?

Apparently, R has saved a call to the 'CF.mb?  file somewhere in its memory. My guess if I erase this call, I will be running R the way it is designed.

Thanks,

Paul


 




From marc_grt at yahoo.fr  Wed Feb 14 16:11:11 2018
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Wed, 14 Feb 2018 16:11:11 +0100
Subject: [R-SIG-Mac] Update of RcppParallel failed
In-Reply-To: <76B4FEA7-6E0F-4E43-89BF-737CFD017571@nyu.edu>
References: <3eb3afd8-935d-d448-0416-c4dd6a182bac@yahoo.fr>
 <76B4FEA7-6E0F-4E43-89BF-737CFD017571@nyu.edu>
Message-ID: <14a19e19-d1aa-d189-961d-dc0f988dc9db@yahoo.fr>

Hi Keith,

When I try just now, a new version of RcppParallel was available 
(4.3.20.2; previous one was 4.3.20.1):

essai de l'URL 'https://cran.r-project.org/src/contrib/RcppParallel_4.3.20.2.tar.gz'

And it compiles without problem !

So the problem is solved !

Thanks

Marc




Le 14/02/2018 ? 14:58, Keith O'Hara a ?crit?:
> This looks like an issue to bring up with the Rcpp guys, not R? but can you provide a full printout of the error? I?m guessing this failed when compiling a C file, not C++.
>
>
>> On Feb 14, 2018, at 8:43 AM, Marc Girondot via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>
>> This morning I had an update to apply for RcppParallel but it failed
>>
>> Here are some information:
>>
>>> update.packages()
>> RcppParallel :
>>   Version 4.3.20 installed in /Library/Frameworks/R.framework/Versions/3.5/Resources/library
>>   Version 4.3.20.1 available at https://cran.r-project.org
>> ....
>> During instal, I had this error
>>
>> error: invalid argument '-std=gnu++11' not allowed with 'C'
>>
>> It failed with the two versions of clang that I have installed:
>>
>> clang++ --version
>> clang version 5.0.1 (tags/RELEASE_501/final)
>> Target: x86_64-apple-darwin17.4.0
>> Thread model: posix
>> InstalledDir: /usr/local/opt/llvm/bin
>>
>> or
>>
>> clang++ --version
>> Apple LLVM version 9.0.0 (clang-900.0.39.2)
>> Target: x86_64-apple-darwin17.4.0
>> Thread model: posix
>> InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
>>
>> Do you have some idea about what's happened and how to solve this problem ?
>>
>> Thanks
>>
>> Marc
>>
>> _________________
>>
>> Information on my R version:
>>
>>> R.Version()
>> $platform
>> [1] "x86_64-apple-darwin15.6.0"
>>
>> $arch
>> [1] "x86_64"
>>
>> $os
>> [1] "darwin15.6.0"
>>
>> $system
>> [1] "x86_64, darwin15.6.0"
>>
>> $status
>> [1] "Under development (unstable)"
>>
>> $major
>> [1] "3"
>>
>> $minor
>> [1] "5.0"
>>
>> $year
>> [1] "2018"
>>
>> $month
>> [1] "02"
>>
>> $day
>> [1] "13"
>>
>> $`svn rev`
>> [1] "74247"
>>
>> $language
>> [1] "R"
>>
>> $version.string
>> [1] "R Under development (unstable) (2018-02-13 r74247)"
>>
>> $nickname
>> [1] "Unsuffered Consequences"
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From dwinsemius at comcast.net  Wed Feb 14 17:26:38 2018
From: dwinsemius at comcast.net (David Winsemius)
Date: Wed, 14 Feb 2018 08:26:38 -0800
Subject: [R-SIG-Mac] R installation error caused by a bogus file.
In-Reply-To: <0B742675-F1EB-4F2B-9F5D-F8587D399278@unh.edu>
References: <0B742675-F1EB-4F2B-9F5D-F8587D399278@unh.edu>
Message-ID: <F149708C-6939-4CC1-ACE0-D042E0FFB64C@comcast.net>


> On Feb 14, 2018, at 7:01 AM, Ossenbruggen, Paul <Paul.Ossenbruggen at unh.edu> wrote:
> 
> I receive the following error whenever I restart R and reload R onto my computer:
> 
> Error: object 'CF.mb' not found
> [R.app GUI 1.70 (7463) x86_64-apple-darwin15.6.0]
> 
> The object 'CF.mb? file is a bogus file. In actually, it does not and should not exist and R should not attempting to load it.
> 
> I suspect that I created it by mistake when I worked with RStudio in creating a R package called ?CF?. Most likely I typed ?CF.mb" instead of ?CF.md.? The extension ?.md? makes sense. It is extension for a Markdown file. ?.mb? stands for some animation program extension, which I am not using. 
> 
> QUESTION: How do I stop R from looking for this object?
> 
> Apparently, R has saved a call to the 'CF.mb?  file somewhere in its memory. My guess if I erase this call, I will be running R the way it is designed.
> 

Have you deleted your `.Rdata` file? It's an invisible file and you may need to use Terminal.app to remove it from you startup directory. Where exactly that might be depends on how Rstudio is configured.

--
David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From Paul.Ossenbruggen at unh.edu  Thu Feb 15 15:18:45 2018
From: Paul.Ossenbruggen at unh.edu (Ossenbruggen, Paul)
Date: Thu, 15 Feb 2018 14:18:45 +0000
Subject: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
In-Reply-To: <mailman.12858.3.1518692401.55052.r-sig-mac@r-project.org>
References: <mailman.12858.3.1518692401.55052.r-sig-mac@r-project.org>
Message-ID: <E70BF2CE-F724-4D3B-AAA4-276387E6890E@unh.edu>

Given David Winsemius? reply, I obtained the following information:


PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".*" -ls

52645352       24 -rw-r--r--    1 PJO              staff                8196 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//.DS_Store

52645353       16 -rw-r--r--    1 PJO              staff                6148 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//extdata/.DS_Store

The following
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.Rdata" -ls
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.mb" -ls
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".mb" -ls
return nothing or
PJO:SDE PJO$ 

I hope this information is of some use.

Thanks,
Paul

> On Feb 15, 2018, at 6:00 AM, r-sig-mac-request at r-project.org wrote:
> 
> Caution - External Email;
> 
> ********************************************************************************************************************************************
> Send R-SIG-Mac mailing list submissions to
> 	r-sig-mac at r-project.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> 	https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=
> or, via email, send a message with subject or body 'help' to
> 	r-sig-mac-request at r-project.org
> 
> You can reach the person managing the list at
> 	r-sig-mac-owner at r-project.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Mac digest..."
> 
> 
> Today's Topics:
> 
>   1.  R installation error caused by a bogus file. (Ossenbruggen, Paul)
>   2. Re:  Update of RcppParallel failed (Marc Girondot)
>   3. Re:  R installation error caused by a bogus file.
>      (David Winsemius)
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Wed, 14 Feb 2018 15:01:46 +0000
> From: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
> To: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Subject: [R-SIG-Mac] R installation error caused by a bogus file.
> Message-ID: <0B742675-F1EB-4F2B-9F5D-F8587D399278 at unh.edu>
> Content-Type: text/plain; charset="utf-8"
> 
> I receive the following error whenever I restart R and reload R onto my computer:
> 
> Error: object 'CF.mb' not found
> [R.app GUI 1.70 (7463) x86_64-apple-darwin15.6.0]
> 
> The object 'CF.mb? file is a bogus file. In actually, it does not and should not exist and R should not attempting to load it.
> 
> I suspect that I created it by mistake when I worked with RStudio in creating a R package called ?CF?. Most likely I typed ?CF.mb" instead of ?CF.md.? The extension ?.md? makes sense. It is extension for a Markdown file. ?.mb? stands for some animation program extension, which I am not using. 
> 
> QUESTION: How do I stop R from looking for this object?
> 
> Apparently, R has saved a call to the 'CF.mb?  file somewhere in its memory. My guess if I erase this call, I will be running R the way it is designed.
> 
> Thanks,
> 
> Paul
> 
> 
> 
> 
> 
> 
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Wed, 14 Feb 2018 16:11:11 +0100
> From: Marc Girondot <marc_grt at yahoo.fr>
> To: Keith O'Hara <keith.ohara at nyu.edu>, r-sig-mac R
> 	<r-sig-mac at r-project.org>
> Subject: Re: [R-SIG-Mac] Update of RcppParallel failed
> Message-ID: <14a19e19-d1aa-d189-961d-dc0f988dc9db at yahoo.fr>
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
> 
> Hi Keith,
> 
> When I try just now, a new version of RcppParallel was available 
> (4.3.20.2; previous one was 4.3.20.1):
> 
> essai de l'URL 'https://urldefense.proofpoint.com/v2/url?u=https-3A__cran.r-2Dproject.org_src_contrib_RcppParallel-5F4.3.20.2.tar.gz&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=tR-Ab93uBbFJM8JTcIhOKJjwcpsCBojt9HslLckRpD0&e='
> 
> And it compiles without problem !
> 
> So the problem is solved !
> 
> Thanks
> 
> Marc
> 
> 
> 
> 
> Le 14/02/2018 ? 14:58, Keith O'Hara a ?crit :
>> This looks like an issue to bring up with the Rcpp guys, not R? but can you provide a full printout of the error? I?m guessing this failed when compiling a C file, not C++.
>> 
>> 
>>> On Feb 14, 2018, at 8:43 AM, Marc Girondot via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> This morning I had an update to apply for RcppParallel but it failed
>>> 
>>> Here are some information:
>>> 
>>>> update.packages()
>>> RcppParallel :
>>>  Version 4.3.20 installed in /Library/Frameworks/R.framework/Versions/3.5/Resources/library
>>>  Version 4.3.20.1 available at https://urldefense.proofpoint.com/v2/url?u=https-3A__cran.r-2Dproject.org&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=Q1PNswfQSKGd9Ow-GalzQ1NXiyozpmVIw8u15cvI6vo&e=
>>> ....
>>> During instal, I had this error
>>> 
>>> error: invalid argument '-std=gnu++11' not allowed with 'C'
>>> 
>>> It failed with the two versions of clang that I have installed:
>>> 
>>> clang++ --version
>>> clang version 5.0.1 (tags/RELEASE_501/final)
>>> Target: x86_64-apple-darwin17.4.0
>>> Thread model: posix
>>> InstalledDir: /usr/local/opt/llvm/bin
>>> 
>>> or
>>> 
>>> clang++ --version
>>> Apple LLVM version 9.0.0 (clang-900.0.39.2)
>>> Target: x86_64-apple-darwin17.4.0
>>> Thread model: posix
>>> InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
>>> 
>>> Do you have some idea about what's happened and how to solve this problem ?
>>> 
>>> Thanks
>>> 
>>> Marc
>>> 
>>> _________________
>>> 
>>> Information on my R version:
>>> 
>>>> R.Version()
>>> $platform
>>> [1] "x86_64-apple-darwin15.6.0"
>>> 
>>> $arch
>>> [1] "x86_64"
>>> 
>>> $os
>>> [1] "darwin15.6.0"
>>> 
>>> $system
>>> [1] "x86_64, darwin15.6.0"
>>> 
>>> $status
>>> [1] "Under development (unstable)"
>>> 
>>> $major
>>> [1] "3"
>>> 
>>> $minor
>>> [1] "5.0"
>>> 
>>> $year
>>> [1] "2018"
>>> 
>>> $month
>>> [1] "02"
>>> 
>>> $day
>>> [1] "13"
>>> 
>>> $`svn rev`
>>> [1] "74247"
>>> 
>>> $language
>>> [1] "R"
>>> 
>>> $version.string
>>> [1] "R Under development (unstable) (2018-02-13 r74247)"
>>> 
>>> $nickname
>>> [1] "Unsuffered Consequences"
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=
> 
> 
> 
> 
> ------------------------------
> 
> Message: 3
> Date: Wed, 14 Feb 2018 08:26:38 -0800
> From: David Winsemius <dwinsemius at comcast.net>
> To: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
> Cc: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Subject: Re: [R-SIG-Mac] R installation error caused by a bogus file.
> Message-ID: <F149708C-6939-4CC1-ACE0-D042E0FFB64C at comcast.net>
> Content-Type: text/plain; charset="utf-8"
> 
> 
>> On Feb 14, 2018, at 7:01 AM, Ossenbruggen, Paul <Paul.Ossenbruggen at unh.edu> wrote:
>> 
>> I receive the following error whenever I restart R and reload R onto my computer:
>> 
>> Error: object 'CF.mb' not found
>> [R.app GUI 1.70 (7463) x86_64-apple-darwin15.6.0]
>> 
>> The object 'CF.mb? file is a bogus file. In actually, it does not and should not exist and R should not attempting to load it.
>> 
>> I suspect that I created it by mistake when I worked with RStudio in creating a R package called ?CF?. Most likely I typed ?CF.mb" instead of ?CF.md.? The extension ?.md? makes sense. It is extension for a Markdown file. ?.mb? stands for some animation program extension, which I am not using. 
>> 
>> QUESTION: How do I stop R from looking for this object?
>> 
>> Apparently, R has saved a call to the 'CF.mb?  file somewhere in its memory. My guess if I erase this call, I will be running R the way it is designed.
>> 
> 
> Have you deleted your `.Rdata` file? It's an invisible file and you may need to use Terminal.app to remove it from you startup directory. Where exactly that might be depends on how Rstudio is configured.
> 
> --
> David Winsemius
> Alameda, CA, USA
> 
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
> 
> 
> 
> 
> ------------------------------
> 
> Subject: Digest Footer
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=
> 
> 
> ------------------------------
> 
> End of R-SIG-Mac Digest, Vol 180, Issue 5
> *****************************************


From dwinsemius at comcast.net  Thu Feb 15 17:42:47 2018
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 15 Feb 2018 08:42:47 -0800
Subject: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
In-Reply-To: <E70BF2CE-F724-4D3B-AAA4-276387E6890E@unh.edu>
References: <mailman.12858.3.1518692401.55052.r-sig-mac@r-project.org>
 <E70BF2CE-F724-4D3B-AAA4-276387E6890E@unh.edu>
Message-ID: <71215AC9-0AF2-444E-9B3F-96D6B5672F91@comcast.net>


> On Feb 15, 2018, at 6:18 AM, Ossenbruggen, Paul <Paul.Ossenbruggen at unh.edu> wrote:
> 
> Given David Winsemius? reply, I obtained the following information:
> 
> 
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".*" -ls
> 
> 52645352       24 -rw-r--r--    1 PJO              staff                8196 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//.DS_Store
> 
> 52645353       16 -rw-r--r--    1 PJO              staff                6148 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//extdata/.DS_Store
> 
> The following
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.Rdata" -ls
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.mb" -ls
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".mb" -ls
> return nothing or
> PJO:SDE PJO$ 
> 
> I hope this information is of some use.

1) When you reply to a posting you get from mailing list you should aggressively trim the stuff that is not needed to understand you query.

2) My approach to managing my invisible files in the MacOS is to make thm visible with this at a Terminal session:

defaults write com.apple.finder AppleShowAllFiles YES

Then you can find .Rdata files in whatever directory they might reside. I say "they" becaus you might have one in any directory that was your working directory at the time of a shutdown where you accept the R.app's offer to save work.

So, don't just look at your Library sub directory, which is not a typical place to house a working directory. Instead look everywhere:

find /Users/username/ -iname ".R*"




> 
> Thanks,
> Paul
> 
>> 

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From brandon.hurr at gmail.com  Fri Feb 16 00:13:52 2018
From: brandon.hurr at gmail.com (Brandon Hurr)
Date: Thu, 15 Feb 2018 15:13:52 -0800
Subject: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
In-Reply-To: <71215AC9-0AF2-444E-9B3F-96D6B5672F91@comcast.net>
References: <mailman.12858.3.1518692401.55052.r-sig-mac@r-project.org>
 <E70BF2CE-F724-4D3B-AAA4-276387E6890E@unh.edu>
 <71215AC9-0AF2-444E-9B3F-96D6B5672F91@comcast.net>
Message-ID: <CAG2OMvujVXfVPG3e9n1iFSCN1gh1Q3XipQ5QWhw_Yz3p0EXXQQ@mail.gmail.com>

A newish shortcut also makes this easier.

CMD + Shift + .

This toggles hidden files without using terminal.

> 2) My approach to managing my invisible files in the MacOS is to make thm visible with this at a Terminal session:
>
> defaults write com.apple.finder AppleShowAllFiles YES
>


From Paul.Ossenbruggen at unh.edu  Fri Feb 16 20:15:18 2018
From: Paul.Ossenbruggen at unh.edu (Ossenbruggen, Paul)
Date: Fri, 16 Feb 2018 19:15:18 +0000
Subject: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 6
In-Reply-To: <mailman.12861.3.1518778801.44770.r-sig-mac@r-project.org>
References: <mailman.12861.3.1518778801.44770.r-sig-mac@r-project.org>
Message-ID: <D1670A6B-3E7B-4F3B-9604-2F20FFC00F3C@unh.edu>

First of all, I want to thank David Wensemius and Brandon Hurr.

Next, I want to say that my problem was more complicated than removing the invisible file, .RData. After removal and startup of RStudio, I received:

Error: object 'CF.mb' not found.

I removed the following files: .Rhistory .Rprfile .Rprofile .Rdata. After removing them, my error message went away.

Paul



On Feb 16, 2018, at 6:00 AM, r-sig-mac-request at r-project.org<mailto:r-sig-mac-request at r-project.org> wrote:



********************************************************************************************************************************************
Send R-SIG-Mac mailing list submissions to
r-sig-mac at r-project.org<mailto:r-sig-mac at r-project.org>

To subscribe or unsubscribe via the World Wide Web, visit
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=S86paWuTkKAFxU7d9pmaDrGf5fQvUDN4lTfSAFihUSI&s=5USUZGu_N566kZFSUUNPm__bJ6mBMkTahr2mCeIwDXw&e=
or, via email, send a message with subject or body 'help' to
r-sig-mac-request at r-project.org

You can reach the person managing the list at
r-sig-mac-owner at r-project.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-SIG-Mac digest..."


Today's Topics:

  1. Re:  R-SIG-Mac Digest, Vol 180, Issue 5 (Ossenbruggen, Paul)
  2. Re:  R-SIG-Mac Digest, Vol 180, Issue 5 (David Winsemius)
  3. Re:  R-SIG-Mac Digest, Vol 180, Issue 5 (Brandon Hurr)

----------------------------------------------------------------------

Message: 1
Date: Thu, 15 Feb 2018 14:18:45 +0000
From: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
To: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
Message-ID: <E70BF2CE-F724-4D3B-AAA4-276387E6890E at unh.edu>
Content-Type: text/plain; charset="utf-8"

Given David Winsemius? reply, I obtained the following information:


PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".*" -ls

52645352       24 -rw-r--r--    1 PJO              staff                8196 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//.DS_Store

52645353       16 -rw-r--r--    1 PJO              staff                6148 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//extdata/.DS_Store

The following
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.Rdata" -ls
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.mb" -ls
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".mb" -ls
return nothing or
PJO:SDE PJO$

I hope this information is of some use.

Thanks,
Paul

On Feb 15, 2018, at 6:00 AM, r-sig-mac-request at r-project.org wrote:

Caution - External Email;

********************************************************************************************************************************************
Send R-SIG-Mac mailing list submissions to
r-sig-mac at r-project.org

To subscribe or unsubscribe via the World Wide Web, visit
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=
or, via email, send a message with subject or body 'help' to
r-sig-mac-request at r-project.org

You can reach the person managing the list at
r-sig-mac-owner at r-project.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-SIG-Mac digest..."


Today's Topics:

 1.  R installation error caused by a bogus file. (Ossenbruggen, Paul)
 2. Re:  Update of RcppParallel failed (Marc Girondot)
 3. Re:  R installation error caused by a bogus file.
    (David Winsemius)

----------------------------------------------------------------------

Message: 1
Date: Wed, 14 Feb 2018 15:01:46 +0000
From: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
To: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
Subject: [R-SIG-Mac] R installation error caused by a bogus file.
Message-ID: <0B742675-F1EB-4F2B-9F5D-F8587D399278 at unh.edu>
Content-Type: text/plain; charset="utf-8"

I receive the following error whenever I restart R and reload R onto my computer:

Error: object 'CF.mb' not found
[R.app GUI 1.70 (7463) x86_64-apple-darwin15.6.0]

The object 'CF.mb? file is a bogus file. In actually, it does not and should not exist and R should not attempting to load it.

I suspect that I created it by mistake when I worked with RStudio in creating a R package called ?CF?. Most likely I typed ?CF.mb" instead of ?CF.md.? The extension ?.md? makes sense. It is extension for a Markdown file. ?.mb? stands for some animation program extension, which I am not using.

QUESTION: How do I stop R from looking for this object?

Apparently, R has saved a call to the 'CF.mb?  file somewhere in its memory. My guess if I erase this call, I will be running R the way it is designed.

Thanks,

Paul








------------------------------

Message: 2
Date: Wed, 14 Feb 2018 16:11:11 +0100
From: Marc Girondot <marc_grt at yahoo.fr>
To: Keith O'Hara <keith.ohara at nyu.edu>, r-sig-mac R
<r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] Update of RcppParallel failed
Message-ID: <14a19e19-d1aa-d189-961d-dc0f988dc9db at yahoo.fr>
Content-Type: text/plain; charset="utf-8"; Format="flowed"

Hi Keith,

When I try just now, a new version of RcppParallel was available
(4.3.20.2; previous one was 4.3.20.1):

essai de l'URL 'https://urldefense.proofpoint.com/v2/url?u=https-3A__cran.r-2Dproject.org_src_contrib_RcppParallel-5F4.3.20.2.tar.gz&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=tR-Ab93uBbFJM8JTcIhOKJjwcpsCBojt9HslLckRpD0&e='

And it compiles without problem !

So the problem is solved !

Thanks

Marc




Le 14/02/2018 ? 14:58, Keith O'Hara a ?crit :
This looks like an issue to bring up with the Rcpp guys, not R? but can you provide a full printout of the error? I?m guessing this failed when compiling a C file, not C++.


On Feb 14, 2018, at 8:43 AM, Marc Girondot via R-SIG-Mac <r-sig-mac at r-project.org> wrote:

This morning I had an update to apply for RcppParallel but it failed

Here are some information:

update.packages()
RcppParallel :
Version 4.3.20 installed in /Library/Frameworks/R.framework/Versions/3.5/Resources/library
Version 4.3.20.1 available at https://urldefense.proofpoint.com/v2/url?u=https-3A__cran.r-2Dproject.org&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=Q1PNswfQSKGd9Ow-GalzQ1NXiyozpmVIw8u15cvI6vo&e=
....
During instal, I had this error

error: invalid argument '-std=gnu++11' not allowed with 'C'

It failed with the two versions of clang that I have installed:

clang++ --version
clang version 5.0.1 (tags/RELEASE_501/final)
Target: x86_64-apple-darwin17.4.0
Thread model: posix
InstalledDir: /usr/local/opt/llvm/bin

or

clang++ --version
Apple LLVM version 9.0.0 (clang-900.0.39.2)
Target: x86_64-apple-darwin17.4.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin

Do you have some idea about what's happened and how to solve this problem ?

Thanks

Marc

_________________

Information on my R version:

R.Version()
$platform
[1] "x86_64-apple-darwin15.6.0"

$arch
[1] "x86_64"

$os
[1] "darwin15.6.0"

$system
[1] "x86_64, darwin15.6.0"

$status
[1] "Under development (unstable)"

$major
[1] "3"

$minor
[1] "5.0"

$year
[1] "2018"

$month
[1] "02"

$day
[1] "13"

$`svn rev`
[1] "74247"

$language
[1] "R"

$version.string
[1] "R Under development (unstable) (2018-02-13 r74247)"

$nickname
[1] "Unsuffered Consequences"

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=




------------------------------

Message: 3
Date: Wed, 14 Feb 2018 08:26:38 -0800
From: David Winsemius <dwinsemius at comcast.net>
To: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
Cc: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] R installation error caused by a bogus file.
Message-ID: <F149708C-6939-4CC1-ACE0-D042E0FFB64C at comcast.net>
Content-Type: text/plain; charset="utf-8"


On Feb 14, 2018, at 7:01 AM, Ossenbruggen, Paul <Paul.Ossenbruggen at unh.edu> wrote:

I receive the following error whenever I restart R and reload R onto my computer:

Error: object 'CF.mb' not found
[R.app GUI 1.70 (7463) x86_64-apple-darwin15.6.0]

The object 'CF.mb? file is a bogus file. In actually, it does not and should not exist and R should not attempting to load it.

I suspect that I created it by mistake when I worked with RStudio in creating a R package called ?CF?. Most likely I typed ?CF.mb" instead of ?CF.md.? The extension ?.md? makes sense. It is extension for a Markdown file. ?.mb? stands for some animation program extension, which I am not using.

QUESTION: How do I stop R from looking for this object?

Apparently, R has saved a call to the 'CF.mb?  file somewhere in its memory. My guess if I erase this call, I will be running R the way it is designed.


Have you deleted your `.Rdata` file? It's an invisible file and you may need to use Terminal.app to remove it from you startup directory. Where exactly that might be depends on how Rstudio is configured.

--
David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law




------------------------------

Subject: Digest Footer

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=


------------------------------

End of R-SIG-Mac Digest, Vol 180, Issue 5
*****************************************



------------------------------

Message: 2
Date: Thu, 15 Feb 2018 08:42:47 -0800
From: David Winsemius <dwinsemius at comcast.net>
To: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
Cc: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
Message-ID: <71215AC9-0AF2-444E-9B3F-96D6B5672F91 at comcast.net>
Content-Type: text/plain; charset="utf-8"


On Feb 15, 2018, at 6:18 AM, Ossenbruggen, Paul <Paul.Ossenbruggen at unh.edu> wrote:

Given David Winsemius? reply, I obtained the following information:


PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".*" -ls

52645352       24 -rw-r--r--    1 PJO              staff                8196 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//.DS_Store

52645353       16 -rw-r--r--    1 PJO              staff                6148 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//extdata/.DS_Store

The following
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.Rdata" -ls
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.mb" -ls
PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".mb" -ls
return nothing or
PJO:SDE PJO$

I hope this information is of some use.

1) When you reply to a posting you get from mailing list you should aggressively trim the stuff that is not needed to understand you query.

2) My approach to managing my invisible files in the MacOS is to make thm visible with this at a Terminal session:

defaults write com.apple.finder AppleShowAllFiles YES

Then you can find .Rdata files in whatever directory they might reside. I say "they" becaus you might have one in any directory that was your working directory at the time of a shutdown where you accept the R.app's offer to save work.

So, don't just look at your Library sub directory, which is not a typical place to house a working directory. Instead look everywhere:

find /Users/username/ -iname ".R*"





Thanks,
Paul



David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law




------------------------------

Message: 3
Date: Thu, 15 Feb 2018 15:13:52 -0800
From: Brandon Hurr <brandon.hurr at gmail.com>
To: David Winsemius <dwinsemius at comcast.net>
Cc: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>,
"r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
Subject: Re: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
Message-ID:
<CAG2OMvujVXfVPG3e9n1iFSCN1gh1Q3XipQ5QWhw_Yz3p0EXXQQ at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

A newish shortcut also makes this easier.

CMD + Shift + .

This toggles hidden files without using terminal.

2) My approach to managing my invisible files in the MacOS is to make thm visible with this at a Terminal session:

defaults write com.apple.finder AppleShowAllFiles YES





------------------------------

Subject: Digest Footer

_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=S86paWuTkKAFxU7d9pmaDrGf5fQvUDN4lTfSAFihUSI&s=5USUZGu_N566kZFSUUNPm__bJ6mBMkTahr2mCeIwDXw&e=


------------------------------

End of R-SIG-Mac Digest, Vol 180, Issue 6
*****************************************


	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Fri Feb 16 22:11:30 2018
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 16 Feb 2018 13:11:30 -0800
Subject: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 6
In-Reply-To: <D1670A6B-3E7B-4F3B-9604-2F20FFC00F3C@unh.edu>
References: <mailman.12861.3.1518778801.44770.r-sig-mac@r-project.org>
 <D1670A6B-3E7B-4F3B-9604-2F20FFC00F3C@unh.edu>
Message-ID: <225056CC-7C77-4FC4-B65E-128B2A28EF65@comcast.net>


> On Feb 16, 2018, at 11:15 AM, Ossenbruggen, Paul <Paul.Ossenbruggen at unh.edu> wrote:
> 
> First of all, I want to thank David Wensemius and Brandon Hurr.
> 
> Next, I want to say that my problem was more complicated than removing the invisible file, .RData. After removal and startup of RStudio, I received:
> 
> Error: object 'CF.mb' not found.
> 
> I removed the following files: .Rhistory .Rprfile .Rprofile .Rdata. After removing them, my error message went away.

That makes sense. The history files can get corrupted as well. You can also get a clean load of R by running from the command line with the --vanilla flag.

For those using the R.app GUI, the history file in use is .Rapp.history rather than .Rhistory. See the R-MAC-FAQ.

David.
> 
> Paul
> 
> 
> 
> On Feb 16, 2018, at 6:00 AM, r-sig-mac-request at r-project.org<mailto:r-sig-mac-request at r-project.org> wrote:
> 
> 
> 
> ********************************************************************************************************************************************
> Send R-SIG-Mac mailing list submissions to
> r-sig-mac at r-project.org<mailto:r-sig-mac at r-project.org>
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=S86paWuTkKAFxU7d9pmaDrGf5fQvUDN4lTfSAFihUSI&s=5USUZGu_N566kZFSUUNPm__bJ6mBMkTahr2mCeIwDXw&e=
> or, via email, send a message with subject or body 'help' to
> r-sig-mac-request at r-project.org
> 
> You can reach the person managing the list at
> r-sig-mac-owner at r-project.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Mac digest..."
> 
> 
> Today's Topics:
> 
>  1. Re:  R-SIG-Mac Digest, Vol 180, Issue 5 (Ossenbruggen, Paul)
>  2. Re:  R-SIG-Mac Digest, Vol 180, Issue 5 (David Winsemius)
>  3. Re:  R-SIG-Mac Digest, Vol 180, Issue 5 (Brandon Hurr)
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Thu, 15 Feb 2018 14:18:45 +0000
> From: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
> To: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Subject: Re: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
> Message-ID: <E70BF2CE-F724-4D3B-AAA4-276387E6890E at unh.edu>
> Content-Type: text/plain; charset="utf-8"
> 
> Given David Winsemius? reply, I obtained the following information:
> 
> 
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".*" -ls
> 
> 52645352       24 -rw-r--r--    1 PJO              staff                8196 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//.DS_Store
> 
> 52645353       16 -rw-r--r--    1 PJO              staff                6148 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//extdata/.DS_Store
> 
> The following
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.Rdata" -ls
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.mb" -ls
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".mb" -ls
> return nothing or
> PJO:SDE PJO$
> 
> I hope this information is of some use.
> 
> Thanks,
> Paul
> 
> On Feb 15, 2018, at 6:00 AM, r-sig-mac-request at r-project.org wrote:
> 
> Caution - External Email;
> 
> ********************************************************************************************************************************************
> Send R-SIG-Mac mailing list submissions to
> r-sig-mac at r-project.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=
> or, via email, send a message with subject or body 'help' to
> r-sig-mac-request at r-project.org
> 
> You can reach the person managing the list at
> r-sig-mac-owner at r-project.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Mac digest..."
> 
> 
> Today's Topics:
> 
> 1.  R installation error caused by a bogus file. (Ossenbruggen, Paul)
> 2. Re:  Update of RcppParallel failed (Marc Girondot)
> 3. Re:  R installation error caused by a bogus file.
>    (David Winsemius)
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Wed, 14 Feb 2018 15:01:46 +0000
> From: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
> To: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Subject: [R-SIG-Mac] R installation error caused by a bogus file.
> Message-ID: <0B742675-F1EB-4F2B-9F5D-F8587D399278 at unh.edu>
> Content-Type: text/plain; charset="utf-8"
> 
> I receive the following error whenever I restart R and reload R onto my computer:
> 
> Error: object 'CF.mb' not found
> [R.app GUI 1.70 (7463) x86_64-apple-darwin15.6.0]
> 
> The object 'CF.mb? file is a bogus file. In actually, it does not and should not exist and R should not attempting to load it.
> 
> I suspect that I created it by mistake when I worked with RStudio in creating a R package called ?CF?. Most likely I typed ?CF.mb" instead of ?CF.md.? The extension ?.md? makes sense. It is extension for a Markdown file. ?.mb? stands for some animation program extension, which I am not using.
> 
> QUESTION: How do I stop R from looking for this object?
> 
> Apparently, R has saved a call to the 'CF.mb?  file somewhere in its memory. My guess if I erase this call, I will be running R the way it is designed.
> 
> Thanks,
> 
> Paul
> 
> 
> 
> 
> 
> 
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Wed, 14 Feb 2018 16:11:11 +0100
> From: Marc Girondot <marc_grt at yahoo.fr>
> To: Keith O'Hara <keith.ohara at nyu.edu>, r-sig-mac R
> <r-sig-mac at r-project.org>
> Subject: Re: [R-SIG-Mac] Update of RcppParallel failed
> Message-ID: <14a19e19-d1aa-d189-961d-dc0f988dc9db at yahoo.fr>
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
> 
> Hi Keith,
> 
> When I try just now, a new version of RcppParallel was available
> (4.3.20.2; previous one was 4.3.20.1):
> 
> essai de l'URL 'https://urldefense.proofpoint.com/v2/url?u=https-3A__cran.r-2Dproject.org_src_contrib_RcppParallel-5F4.3.20.2.tar.gz&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=tR-Ab93uBbFJM8JTcIhOKJjwcpsCBojt9HslLckRpD0&e='
> 
> And it compiles without problem !
> 
> So the problem is solved !
> 
> Thanks
> 
> Marc
> 
> 
> 
> 
> Le 14/02/2018 ? 14:58, Keith O'Hara a ?crit :
> This looks like an issue to bring up with the Rcpp guys, not R? but can you provide a full printout of the error? I?m guessing this failed when compiling a C file, not C++.
> 
> 
> On Feb 14, 2018, at 8:43 AM, Marc Girondot via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> This morning I had an update to apply for RcppParallel but it failed
> 
> Here are some information:
> 
> update.packages()
> RcppParallel :
> Version 4.3.20 installed in /Library/Frameworks/R.framework/Versions/3.5/Resources/library
> Version 4.3.20.1 available at https://urldefense.proofpoint.com/v2/url?u=https-3A__cran.r-2Dproject.org&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=Q1PNswfQSKGd9Ow-GalzQ1NXiyozpmVIw8u15cvI6vo&e=
> ....
> During instal, I had this error
> 
> error: invalid argument '-std=gnu++11' not allowed with 'C'
> 
> It failed with the two versions of clang that I have installed:
> 
> clang++ --version
> clang version 5.0.1 (tags/RELEASE_501/final)
> Target: x86_64-apple-darwin17.4.0
> Thread model: posix
> InstalledDir: /usr/local/opt/llvm/bin
> 
> or
> 
> clang++ --version
> Apple LLVM version 9.0.0 (clang-900.0.39.2)
> Target: x86_64-apple-darwin17.4.0
> Thread model: posix
> InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
> 
> Do you have some idea about what's happened and how to solve this problem ?
> 
> Thanks
> 
> Marc
> 
> _________________
> 
> Information on my R version:
> 
> R.Version()
> $platform
> [1] "x86_64-apple-darwin15.6.0"
> 
> $arch
> [1] "x86_64"
> 
> $os
> [1] "darwin15.6.0"
> 
> $system
> [1] "x86_64, darwin15.6.0"
> 
> $status
> [1] "Under development (unstable)"
> 
> $major
> [1] "3"
> 
> $minor
> [1] "5.0"
> 
> $year
> [1] "2018"
> 
> $month
> [1] "02"
> 
> $day
> [1] "13"
> 
> $`svn rev`
> [1] "74247"
> 
> $language
> [1] "R"
> 
> $version.string
> [1] "R Under development (unstable) (2018-02-13 r74247)"
> 
> $nickname
> [1] "Unsuffered Consequences"
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=
> 
> 
> 
> 
> ------------------------------
> 
> Message: 3
> Date: Wed, 14 Feb 2018 08:26:38 -0800
> From: David Winsemius <dwinsemius at comcast.net>
> To: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
> Cc: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Subject: Re: [R-SIG-Mac] R installation error caused by a bogus file.
> Message-ID: <F149708C-6939-4CC1-ACE0-D042E0FFB64C at comcast.net>
> Content-Type: text/plain; charset="utf-8"
> 
> 
> On Feb 14, 2018, at 7:01 AM, Ossenbruggen, Paul <Paul.Ossenbruggen at unh.edu> wrote:
> 
> I receive the following error whenever I restart R and reload R onto my computer:
> 
> Error: object 'CF.mb' not found
> [R.app GUI 1.70 (7463) x86_64-apple-darwin15.6.0]
> 
> The object 'CF.mb? file is a bogus file. In actually, it does not and should not exist and R should not attempting to load it.
> 
> I suspect that I created it by mistake when I worked with RStudio in creating a R package called ?CF?. Most likely I typed ?CF.mb" instead of ?CF.md.? The extension ?.md? makes sense. It is extension for a Markdown file. ?.mb? stands for some animation program extension, which I am not using.
> 
> QUESTION: How do I stop R from looking for this object?
> 
> Apparently, R has saved a call to the 'CF.mb?  file somewhere in its memory. My guess if I erase this call, I will be running R the way it is designed.
> 
> 
> Have you deleted your `.Rdata` file? It's an invisible file and you may need to use Terminal.app to remove it from you startup directory. Where exactly that might be depends on how Rstudio is configured.
> 
> --
> David Winsemius
> Alameda, CA, USA
> 
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
> 
> 
> 
> 
> ------------------------------
> 
> Subject: Digest Footer
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=cb_FXbPhkXtSllNWIRAvnjDKHGCFqirdYqn2-fCXn3E&s=lWzj9K1TzXbvPZJx5dD70IvjNFcxTS-iuZY36R4qlDo&e=
> 
> 
> ------------------------------
> 
> End of R-SIG-Mac Digest, Vol 180, Issue 5
> *****************************************
> 
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Thu, 15 Feb 2018 08:42:47 -0800
> From: David Winsemius <dwinsemius at comcast.net>
> To: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>
> Cc: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Subject: Re: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
> Message-ID: <71215AC9-0AF2-444E-9B3F-96D6B5672F91 at comcast.net>
> Content-Type: text/plain; charset="utf-8"
> 
> 
> On Feb 15, 2018, at 6:18 AM, Ossenbruggen, Paul <Paul.Ossenbruggen at unh.edu> wrote:
> 
> Given David Winsemius? reply, I obtained the following information:
> 
> 
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".*" -ls
> 
> 52645352       24 -rw-r--r--    1 PJO              staff                8196 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//.DS_Store
> 
> 52645353       16 -rw-r--r--    1 PJO              staff                6148 Feb  9 13:20 /Users/PJO/Library/R/3.4/library/CF//extdata/.DS_Store
> 
> The following
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.Rdata" -ls
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname "CF.mb" -ls
> PJO:SDE PJO$ find /Users/PJO/Library/R/3.4/library/CF/ -type f -iname ".mb" -ls
> return nothing or
> PJO:SDE PJO$
> 
> I hope this information is of some use.
> 
> 1) When you reply to a posting you get from mailing list you should aggressively trim the stuff that is not needed to understand you query.
> 
> 2) My approach to managing my invisible files in the MacOS is to make thm visible with this at a Terminal session:
> 
> defaults write com.apple.finder AppleShowAllFiles YES
> 
> Then you can find .Rdata files in whatever directory they might reside. I say "they" becaus you might have one in any directory that was your working directory at the time of a shutdown where you accept the R.app's offer to save work.
> 
> So, don't just look at your Library sub directory, which is not a typical place to house a working directory. Instead look everywhere:
> 
> find /Users/username/ -iname ".R*"
> 
> 
> 
> 
> 
> Thanks,
> Paul
> 
> 
> 
> David Winsemius
> Alameda, CA, USA
> 
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
> 
> 
> 
> 
> ------------------------------
> 
> Message: 3
> Date: Thu, 15 Feb 2018 15:13:52 -0800
> From: Brandon Hurr <brandon.hurr at gmail.com>
> To: David Winsemius <dwinsemius at comcast.net>
> Cc: "Ossenbruggen, Paul" <Paul.Ossenbruggen at unh.edu>,
> "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Subject: Re: [R-SIG-Mac] R-SIG-Mac Digest, Vol 180, Issue 5
> Message-ID:
> <CAG2OMvujVXfVPG3e9n1iFSCN1gh1Q3XipQ5QWhw_Yz3p0EXXQQ at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
> 
> A newish shortcut also makes this easier.
> 
> CMD + Shift + .
> 
> This toggles hidden files without using terminal.
> 
> 2) My approach to managing my invisible files in the MacOS is to make thm visible with this at a Terminal session:
> 
> defaults write com.apple.finder AppleShowAllFiles YES
> 
> 
> 
> 
> 
> ------------------------------
> 
> Subject: Digest Footer
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dmac&d=DwIGaQ&c=c6MrceVCY5m5A_KAUkrdoA&r=vXaWf90_eNvgohBfU4b0GVo02vigVp6lPSTKMqr0RwQ&m=S86paWuTkKAFxU7d9pmaDrGf5fQvUDN4lTfSAFihUSI&s=5USUZGu_N566kZFSUUNPm__bJ6mBMkTahr2mCeIwDXw&e=
> 
> 
> ------------------------------
> 
> End of R-SIG-Mac Digest, Vol 180, Issue 6
> *****************************************
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From james.f.hester at gmail.com  Mon Feb 19 15:23:13 2018
From: james.f.hester at gmail.com (Jim Hester)
Date: Mon, 19 Feb 2018 09:23:13 -0500
Subject: [R-SIG-Mac] Replication runtime error on MacOS build machines
Message-ID: <CAD6tx948AuoyB9uvi3AcUaYi-64+zqYigMT1YcuYbjpueug+Eg@mail.gmail.com>

I maintain the fs package, which is currently failing _only_ on CRANs
MacOS build machine.
<https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/fs-00check.html>

I have been trying to replicate this error and unfortunately have been
unable to do so, the package works as expected locally (MacOS 10.12.6)
and for numerous other people using El Capitan (as used on CRAN's
system) <https://twitter.com/jimhester_/status/964513974942420994>. I
also tested it on a El Capitan VM without reproducing the failure.

The main difference I am aware of on CRAN's systems is the newer
(4.0.0) clang/llvm toolchain than that shipped with XCode. I tested
compiling / running fs with this toolchain however and did not
reproduce the crash.

If anyone has an idea of what could be causing the crash on CRAN's
system I would be grateful. I would really like to fix this so we can
have MacOS binaries for fs.

Jim


From ralf.stubner at r-institute.com  Fri Feb 23 10:16:02 2018
From: ralf.stubner at r-institute.com (Ralf Stubner)
Date: Fri, 23 Feb 2018 10:16:02 +0100
Subject: [R-SIG-Mac] Problems with runtime linking of R-extension
Message-ID: <c2555a94-ae9f-e627-31ea-555f163ab5a2@r-institute.com>

Hi all,

I am trying to port RcppArrayFire
(https://github.com/RInstitute/rcpparrayfire) to Mac OS, but I am having
some troubles with resolving linked libraries. I have tried to reduce
the issue as much as possible, i.e. no Rcpp and no package structure. It
seems to be MacOS specific since the same code works on Linux (as does
RcppArrayFire). I also asked this on stackoverflow
(https://stackoverflow.com/questions/48705490/runtime-linking-r-extension-on-macos),
but that did not draw a lot of attention. Maybe someone on this list can
shed some light on this:

When I install ArrayFire (http://arrayfire.com/) on MacOS using the
binary installer, the libraries are installed in /usr/local/lib with an
install name starting with @rpath:

$ otool -L /usr/local/lib/libaf.dylib /usr/local/lib/libaf.dylib:
	@rpath/libaf.3.dylib (compatibility version 3.0.0, current version 3.5.1)
	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version
120.1.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
version 1226.10.1)

 I can compile, link and run simple examples, e.g.

#include <arrayfire.h>
#include <stdio.h>

int main() {
  unsigned int count;
  at_get_backend_count(&count);
  printf("backends: %d\n", count);
  return 0;
}

gives

$ /usr/local/clang4/bin/clang -laf -o minimal minimal.c
$ otool -L minimal
minimal:
	@rpath/libaf.3.dylib (compatibility version 3.0.0, current version 3.5.1)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
version 1252.0.0)
$ ./minimal
backends: 2


To do the same from R I use

#include <arrayfire.h>
#include <Rinternals.h>
SEXP count_backends() {
  unsigned int count;
  af_get_backend_count(&count);
  Rprintf("backends: %d\n", count);
  return R_NilValue;
}

And compile it with

$ PKG_LIBS=-laf R CMD SHLIB minimal.c /usr/local/clang4/bin/clang
-I/Library/Frameworks/R.framework/Resources/include -DNDEBUG
-I/usr/local/include   -fPIC  -Wall -g -O2  -c minimal.c -o minimal.o
/usr/local/clang4/bin/clang -dynamiclib -Wl,-headerpad_max_install_names
-undefined dynamic_lookup -single_module -multiply_defined suppress
-L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/clang4/lib
-o minimal.so minimal.o -laf -F/Library/Frameworks/R.framework/..
-framework R -Wl,-framework -Wl,CoreFoundation
$ otool -L minimal.so  minimal.so:
	minimal.so (compatibility version 0.0.0, current version 0.0.0)
	@rpath/libaf.3.dylib (compatibility version 3.0.0, current version 3.5.1)
	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib
(compatibility version 3.4.0, current version 3.4.3)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1451.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
version 1252.0.0)

If I then try to load the resulting library, I get this error message:

R> dyn.load("minimal.so")
Error in dyn.load("minimal.so") :   unable to load shared object
'/Users/ralf/Documents/af-simple/minimalR/minimal.so':
  dlopen(/Users/ralf/Documents/af-simple/minimalR/minimal.so, 6):
Library not loaded: @rpath/libaf.3.dylib
  Referenced from: /Users/ralf/Documents/af-simple/minimalR/minimal.so
  Reason: image not found
Execution halted


Both the binary and the R-extension library refer to the external
library using the same install name, but for the R-extension this
reference cannot be resolved. Why is this the case?

Thanks
Ralf

PS: Used versions:
* Mac OS High Siearra
* R 3.4.3
* clang 4.0.0 from https://cran.r-project.org/bin/macosx/tools/

-- 
Ralf Stubner
Senior Software Engineer / Trainer

R Institute GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 70 81 66
F: +49 331 23 70 81 67
M: +49 162 20 91 196

Mail: ralf.stubner at r-institute.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966 P
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Prof. Dr. Dr. Karl-Kuno Kunze



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4008 bytes
Desc: S/MIME Cryptographic Signature
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20180223/d2283ebe/attachment.p7s>

From keith.ohara at nyu.edu  Fri Feb 23 11:14:37 2018
From: keith.ohara at nyu.edu (Keith O'Hara)
Date: Fri, 23 Feb 2018 05:14:37 -0500
Subject: [R-SIG-Mac] Problems with runtime linking of R-extension
In-Reply-To: <c2555a94-ae9f-e627-31ea-555f163ab5a2@r-institute.com>
References: <c2555a94-ae9f-e627-31ea-555f163ab5a2@r-institute.com>
Message-ID: <0AABEB04-F9B3-4EBB-88E8-C60502BBE6BD@nyu.edu>

Try adding '/usr/local/lib' to DYLD_LIBRARY_PATH and DYLD_FALLBACK_LIBRARY_PATH. If that doesn't fix the problem, try modifying the install name of libaf to include /usr/local/lib. Something like:

sudo install_name_tool -id /usr/local/lib/libaf.dylib /usr/local/lib/libaf.dylib

or

sudo install_name_tool -id /usr/local/lib/libaf.3.dylib /usr/local/lib/libaf.3.dylib

This has fixed runtime path issues for me in the past.

Keith


> On Feb 23, 2018, at 4:16 AM, Ralf Stubner <ralf.stubner at r-institute.com> wrote:
> 
> Hi all,
> 
> I am trying to port RcppArrayFire
> (https://github.com/RInstitute/rcpparrayfire) to Mac OS, but I am having
> some troubles with resolving linked libraries. I have tried to reduce
> the issue as much as possible, i.e. no Rcpp and no package structure. It
> seems to be MacOS specific since the same code works on Linux (as does
> RcppArrayFire). I also asked this on stackoverflow
> (https://stackoverflow.com/questions/48705490/runtime-linking-r-extension-on-macos),
> but that did not draw a lot of attention. Maybe someone on this list can
> shed some light on this:
> 
> When I install ArrayFire (http://arrayfire.com/) on MacOS using the
> binary installer, the libraries are installed in /usr/local/lib with an
> install name starting with @rpath:
> 
> $ otool -L /usr/local/lib/libaf.dylib /usr/local/lib/libaf.dylib:
> 	@rpath/libaf.3.dylib (compatibility version 3.0.0, current version 3.5.1)
> 	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version
> 120.1.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
> version 1226.10.1)
> 
> I can compile, link and run simple examples, e.g.
> 
> #include <arrayfire.h>
> #include <stdio.h>
> 
> int main() {
>  unsigned int count;
>  at_get_backend_count(&count);
>  printf("backends: %d\n", count);
>  return 0;
> }
> 
> gives
> 
> $ /usr/local/clang4/bin/clang -laf -o minimal minimal.c
> $ otool -L minimal
> minimal:
> 	@rpath/libaf.3.dylib (compatibility version 3.0.0, current version 3.5.1)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
> version 1252.0.0)
> $ ./minimal
> backends: 2
> 
> 
> To do the same from R I use
> 
> #include <arrayfire.h>
> #include <Rinternals.h>
> SEXP count_backends() {
>  unsigned int count;
>  af_get_backend_count(&count);
>  Rprintf("backends: %d\n", count);
>  return R_NilValue;
> }
> 
> And compile it with
> 
> $ PKG_LIBS=-laf R CMD SHLIB minimal.c /usr/local/clang4/bin/clang
> -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG
> -I/usr/local/include   -fPIC  -Wall -g -O2  -c minimal.c -o minimal.o
> /usr/local/clang4/bin/clang -dynamiclib -Wl,-headerpad_max_install_names
> -undefined dynamic_lookup -single_module -multiply_defined suppress
> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/clang4/lib
> -o minimal.so minimal.o -laf -F/Library/Frameworks/R.framework/..
> -framework R -Wl,-framework -Wl,CoreFoundation
> $ otool -L minimal.so  minimal.so:
> 	minimal.so (compatibility version 0.0.0, current version 0.0.0)
> 	@rpath/libaf.3.dylib (compatibility version 3.0.0, current version 3.5.1)
> 	/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libR.dylib
> (compatibility version 3.4.0, current version 3.4.3)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1451.0.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
> version 1252.0.0)
> 
> If I then try to load the resulting library, I get this error message:
> 
> R> dyn.load("minimal.so")
> Error in dyn.load("minimal.so") :   unable to load shared object
> '/Users/ralf/Documents/af-simple/minimalR/minimal.so':
>  dlopen(/Users/ralf/Documents/af-simple/minimalR/minimal.so, 6):
> Library not loaded: @rpath/libaf.3.dylib
>  Referenced from: /Users/ralf/Documents/af-simple/minimalR/minimal.so
>  Reason: image not found
> Execution halted
> 
> 
> Both the binary and the R-extension library refer to the external
> library using the same install name, but for the R-extension this
> reference cannot be resolved. Why is this the case?
> 
> Thanks
> Ralf
> 
> PS: Used versions:
> * Mac OS High Siearra
> * R 3.4.3
> * clang 4.0.0 from https://cran.r-project.org/bin/macosx/tools/
> 
> -- 
> Ralf Stubner
> Senior Software Engineer / Trainer
> 
> R Institute GmbH
> Dortustra?e 48
> 14467 Potsdam
> 
> T: +49 331 23 70 81 66
> F: +49 331 23 70 81 67
> M: +49 162 20 91 196
> 
> Mail: ralf.stubner at r-institute.com
> 
> Sitz: Potsdam
> Register: AG Potsdam HRB 27966 P
> Ust.-IdNr.: DE300072622
> Gesch?ftsf?hrer: Prof. Dr. Dr. Karl-Kuno Kunze
> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From matt.plowman93 at xtra.co.nz  Sat Feb  3 11:53:15 2018
From: matt.plowman93 at xtra.co.nz (Matt Plowman)
Date: Sat, 03 Feb 2018 10:53:15 -0000
Subject: [R-SIG-Mac] R 3.2.1 installation failure on OS X 10.6.8
Message-ID: <5AB147F6-F63B-4308-9FF7-D1F99F639C83@xtra.co.nz>

Hi

Recently, I tried to install R 3.2.1 on my MacBook (v. 10.6.8). I received a message: "The installation failed. An unknown installation error occurred. The Installer encountered an error that caused the installation to fail. Contact the software manufacturer for assistance."

Would anybody have any suggestions as to what might be causing this issue?

Regards
Matt

From alsergbox at gmail.com  Mon Feb 19 21:27:04 2018
From: alsergbox at gmail.com (Alexey Sergushichev)
Date: Mon, 19 Feb 2018 23:27:04 +0300
Subject: [R-SIG-Mac] OS X builds for R-devel
Message-ID: <CAMGHQ945AmimtVLby8NUbC1DhtHRfXqvegCCCNYZxerm3nS+ww@mail.gmail.com>

Dear all,

Are there any plans on having package build for r-devel on CRAN? I
understand it's far from the highest priority but it would be good to have
any estimates. I'm aware of several packages on Bioconoductor-devel that
fail builds due to absence of binary versions of some packages (
http://bioconductor.org/checkResults/devel/bioc-LATEST/ChemmineR/merida2-buildsrc.html
http://bioconductor.org/checkResults/devel/bioc-LATEST/cbaf/merida2-buildsrc.html
).

Thanks,
Alexey Sergushichev

	[[alternative HTML version deleted]]


From ralf.stubner at r-institute.com  Fri Feb 23 17:34:52 2018
From: ralf.stubner at r-institute.com (Ralf Stubner)
Date: Fri, 23 Feb 2018 17:34:52 +0100
Subject: [R-SIG-Mac] Problems with runtime linking of R-extension
In-Reply-To: <0AABEB04-F9B3-4EBB-88E8-C60502BBE6BD@nyu.edu>
References: <c2555a94-ae9f-e627-31ea-555f163ab5a2@r-institute.com>
 <0AABEB04-F9B3-4EBB-88E8-C60502BBE6BD@nyu.edu>
Message-ID: <BD93D62D-393A-4930-83DD-3AD2F5585EE4@r-institute.com>


> Am 23.02.2018 um 11:14 schrieb Keith O'Hara <keith.ohara at nyu.edu>:
> 
> Try adding '/usr/local/lib' to DYLD_LIBRARY_PATH and DYLD_FALLBACK_LIBRARY_PATH.

Unfortunately setting these variables (or LD_LIBRARY_PATH) to /usr/local/lib does not help with the error message. 

> If that doesn't fix the problem, try modifying the install name of libaf to include /usr/local/lib. Something like:
> 
> sudo install_name_tool -id /usr/local/lib/libaf.dylib /usr/local/lib/libaf.dylib
> 
> or
> 
> sudo install_name_tool -id /usr/local/lib/libaf.3.dylib /usr/local/lib/libaf.3.dylib

This helps to some extend, similar to adding ?-rpath /usr/local/lib? to PKG_LIBS. I am then able to load the library. However, ArrayFire does not find/load its backend libraries libafcpu.dynlib and libafopencl.dynlib, which are also located in /usr/local/lib and therefore reports ?backends: 0". This does not happen with the plain C program that correctly finds two available backends.

To make things even stranger, the above is true when I start R from the Terminal. When using R.app or RStudio, I can load minimal.so (even without rpath option or manipulating the install name)  and calling the count_backends function gives the correct result. 

What does R.app and RStudio to differently from R in the Terminal?

Thanks
Ralf

From dwinsemius at comcast.net  Fri Feb 23 18:01:58 2018
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 23 Feb 2018 09:01:58 -0800
Subject: [R-SIG-Mac] OS X builds for R-devel
In-Reply-To: <CAMGHQ945AmimtVLby8NUbC1DhtHRfXqvegCCCNYZxerm3nS+ww@mail.gmail.com>
References: <CAMGHQ945AmimtVLby8NUbC1DhtHRfXqvegCCCNYZxerm3nS+ww@mail.gmail.com>
Message-ID: <EA388F1A-11F7-4216-B8C5-07F5964832B7@comcast.net>


> On Feb 19, 2018, at 12:27 PM, Alexey Sergushichev <alsergbox at gmail.com> wrote:
> 
> Dear all,
> 
> Are there any plans on having package build for r-devel on CRAN? I
> understand it's far from the highest priority but it would be good to have
> any estimates. I'm aware of several packages on Bioconoductor-devel that
> fail builds due to absence of binary versions of some packages (
> http://bioconductor.org/checkResults/devel/bioc-LATEST/ChemmineR/merida2-buildsrc.html
> http://bioconductor.org/checkResults/devel/bioc-LATEST/cbaf/merida2-buildsrc.html
> ).
> 
> Thanks,
> Alexey Sergushichev
> 
> 	[[alternative HTML version deleted]]

The fact that you post in HTML and make no effort to describe your setup makes me suspect you may also have missed the instructions about installing XCode and configuring R for compiling source packages. This can still be done with the binary distribution versions of R and R.app, and do not require that you build R from sources. See the CRAN-Mac-tools page:

https://cran.r-project.org/bin/macosx/tools/

It used to be the case that one needed Xcode and Command Line Tools installed. (I do have them.) I cannot tell from the current Mac-devel page whether that is still the case. I have a current version of R running in El Capitan. This is my ~/.R/Makevars file:

# created by rstan at Thu Mar 19 11:26:15 2015 
CXXFLAGS = -mtune=core2 -O3 $(LTO)  #set_by_rstan
R_XTRA_CPPFLAGS =  -I$(R_INCLUDE_DIR)   #set_by_rstan
CC=/usr/local/clang4/bin/clang
CXX=/usr/local/clang4/bin/clang++
LDFLAGS=-L/usr/local/clang4/libI 

I just executed the following commands in the R.app environment.

source("https://bioconductor.org/biocLite.R")
biocLite()
# declined the offer to update packages
 biocLite(c("ChemmineR"), type="source", dependencies=TRUE)

It then tried to install all the dependencies (failing for ChemmineOB because the OpenBabel system requirement was not met) and got a  report of success with ChemmineR and the package was capable of loading. So I've successfully tested my theory that the only barriers to successful compilation of ChemmineR from source are lack of knowledge of the R and Bioconductor ecosystem (and lack of one external package.) I'm not that interested in getting a full package installed, so haven't taken the time to install OpenBabel and recompile ChemmineOB.


Hope this helps;
David.

> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From unwin at math.uni-augsburg.de  Sat Feb 24 09:10:06 2018
From: unwin at math.uni-augsburg.de (Antony Unwin)
Date: Sat, 24 Feb 2018 09:10:06 +0100
Subject: [R-SIG-Mac] CRAN checks for r-oldrel-osx-x86_64
Message-ID: <9174F580-99FC-4F1E-BB07-0258D48BDB6A@math.uni-augsburg.de>

I released a new version of my package OutliersO3 recently, 0.5.4.  All the CRAN checks are fine except for r-oldrel-osx-x86_64.  That still checks the previous CRAN version, 0.2.1, and finds an error because I had said it depended on R?3.4.0 (which is overly strict, the new version has R?3.3.0, which is doubtless overly strict too).

Why is the new version not checked and what can I do to remove the reported error?

Antony

Antony Unwin
University of Augsburg


From wolzkevin at gmail.com  Mon Feb 26 20:36:20 2018
From: wolzkevin at gmail.com (Kevin Wolz)
Date: Mon, 26 Feb 2018 20:36:20 +0100
Subject: [R-SIG-Mac] library(rgl) (v0.99.9) hangs in OSX Sierra
Message-ID: <CAG2-Wy8DvvDHzQCtjg8tJrqgLqh4O0TqGT6mScqMObQLxRdaiA@mail.gmail.com>

It seems like this has been a recurring question on this list over the
years, but I can't seem to find an answer that works for me and I haven't
seen it asked for recent versons. library(rgl) (installed version
0.99.9) hangs in both RStudio and R.app in OSX Sierra.

Here's my sessionInfo():

R version 3.4.3 (2017-11-30)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Sierra 10.12.6

Matrix products: default
BLAS:
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK:
/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.4.3 tools_3.4.3

Kevin
--
Kevin J. Wolz, PhD
Post-Doctoral Researcher, French National Institute for Agricultural
Research
Co-Executive Director, Savanna Institute
US Phone: +1 (708) 476-9929

	[[alternative HTML version deleted]]


From alsergbox at gmail.com  Tue Feb 27 10:45:05 2018
From: alsergbox at gmail.com (Alexey Sergushichev)
Date: Tue, 27 Feb 2018 12:45:05 +0300
Subject: [R-SIG-Mac] OS X builds for R-devel
In-Reply-To: <EA388F1A-11F7-4216-B8C5-07F5964832B7@comcast.net>
References: <CAMGHQ945AmimtVLby8NUbC1DhtHRfXqvegCCCNYZxerm3nS+ww@mail.gmail.com>
 <EA388F1A-11F7-4216-B8C5-07F5964832B7@comcast.net>
Message-ID: <CAMGHQ96phUoAbuGz3_4rQDrzAr0mVfTQ2M+Q-FNLoJg56VpxbQ@mail.gmail.com>

Hi David,

My question was not about installing r-devel on Mac, but whether there are
plans on having the packages available on CRAN web-site. I'm asking this,
because Bioconductor build system depends on availability of OS X binaries
of some packages on CRAN.

--
Alexey

On Fri, Feb 23, 2018 at 8:01 PM, David Winsemius <dwinsemius at comcast.net>
wrote:

>
> > On Feb 19, 2018, at 12:27 PM, Alexey Sergushichev <alsergbox at gmail.com>
> wrote:
> >
> > Dear all,
> >
> > Are there any plans on having package build for r-devel on CRAN? I
> > understand it's far from the highest priority but it would be good to
> have
> > any estimates. I'm aware of several packages on Bioconoductor-devel that
> > fail builds due to absence of binary versions of some packages (
> > http://bioconductor.org/checkResults/devel/bioc-
> LATEST/ChemmineR/merida2-buildsrc.html
> > http://bioconductor.org/checkResults/devel/bioc-
> LATEST/cbaf/merida2-buildsrc.html
> > ).
> >
> > Thanks,
> > Alexey Sergushichev
> >
> >       [[alternative HTML version deleted]]
>
> The fact that you post in HTML and make no effort to describe your setup
> makes me suspect you may also have missed the instructions about installing
> XCode and configuring R for compiling source packages. This can still be
> done with the binary distribution versions of R and R.app, and do not
> require that you build R from sources. See the CRAN-Mac-tools page:
>
> https://cran.r-project.org/bin/macosx/tools/
>
> It used to be the case that one needed Xcode and Command Line Tools
> installed. (I do have them.) I cannot tell from the current Mac-devel page
> whether that is still the case. I have a current version of R running in El
> Capitan. This is my ~/.R/Makevars file:
>
> # created by rstan at Thu Mar 19 11:26:15 2015
> CXXFLAGS = -mtune=core2 -O3 $(LTO)  #set_by_rstan
> R_XTRA_CPPFLAGS =  -I$(R_INCLUDE_DIR)   #set_by_rstan
> CC=/usr/local/clang4/bin/clang
> CXX=/usr/local/clang4/bin/clang++
> LDFLAGS=-L/usr/local/clang4/libI
>
> I just executed the following commands in the R.app environment.
>
> source("https://bioconductor.org/biocLite.R")
> biocLite()
> # declined the offer to update packages
>  biocLite(c("ChemmineR"), type="source", dependencies=TRUE)
>
> It then tried to install all the dependencies (failing for ChemmineOB
> because the OpenBabel system requirement was not met) and got a  report of
> success with ChemmineR and the package was capable of loading. So I've
> successfully tested my theory that the only barriers to successful
> compilation of ChemmineR from source are lack of knowledge of the R and
> Bioconductor ecosystem (and lack of one external package.) I'm not that
> interested in getting a full package installed, so haven't taken the time
> to install OpenBabel and recompile ChemmineOB.
>
>
> Hope this helps;
> David.
>
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> David Winsemius
> Alameda, CA, USA
>
> 'Any technology distinguishable from magic is insufficiently advanced.'
>  -Gehm's Corollary to Clarke's Third Law
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Tue Feb 27 17:30:42 2018
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 27 Feb 2018 08:30:42 -0800
Subject: [R-SIG-Mac] OS X builds for R-devel
In-Reply-To: <CAMGHQ96phUoAbuGz3_4rQDrzAr0mVfTQ2M+Q-FNLoJg56VpxbQ@mail.gmail.com>
References: <CAMGHQ945AmimtVLby8NUbC1DhtHRfXqvegCCCNYZxerm3nS+ww@mail.gmail.com>
 <EA388F1A-11F7-4216-B8C5-07F5964832B7@comcast.net>
 <CAMGHQ96phUoAbuGz3_4rQDrzAr0mVfTQ2M+Q-FNLoJg56VpxbQ@mail.gmail.com>
Message-ID: <E329D588-4205-4241-8F1B-63E166FB9A8E@comcast.net>


> On Feb 27, 2018, at 1:45 AM, Alexey Sergushichev <alsergbox at gmail.com> wrote:
> 
> Hi David,
> 
> My question was not about installing r-devel on Mac, but whether there are plans on having the packages available on CRAN web-site. I'm asking this, because Bioconductor build system depends on availability of OS X binaries of some packages on CRAN.

You should specify which packages you feel are not available that should be available. The two references you made were to two efforts at building packages. One of them (re: ChemmineR) was a warning, not a report of failure. And it was not a warning about a missing CRAN hosted package but rather a warning about C code in the package itself:

---
* checking whether package ?ChemmineR? can be installed ... WARNING
Found the following significant warnings:
  r_wrap.cc:1689:14: warning: explicitly assigning value of variable of type 'void *' to itself [-Wself-assign]
See ?/Users/biocbuild/bbs-3.7-bioc/meat/ChemmineR.Rcheck/00install.out? for details.
---

The other  ( re: cbaf) was a report of error, but the error was the absence on the build machine of the 'xlsx'-package. Why that package is missing on that particular machine is surely not something that the maintainers of the Mac fork can be expected to know. That package has been available on CRAN for many years and continues to be available. Its Package Description file does not indicate any need for compilation.


-- 
David.


> 
> --
> Alexey
> 
> On Fri, Feb 23, 2018 at 8:01 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> > On Feb 19, 2018, at 12:27 PM, Alexey Sergushichev <alsergbox at gmail.com> wrote:
> >
> > Dear all,
> >
> > Are there any plans on having package build for r-devel on CRAN? I
> > understand it's far from the highest priority but it would be good to have
> > any estimates. I'm aware of several packages on Bioconoductor-devel that
> > fail builds due to absence of binary versions of some packages (
> > http://bioconductor.org/checkResults/devel/bioc-LATEST/ChemmineR/merida2-buildsrc.html
> > http://bioconductor.org/checkResults/devel/bioc-LATEST/cbaf/merida2-buildsrc.html
> > ).
> >
> > Thanks,
> > Alexey Sergushichev
> >
> >       [[alternative HTML version deleted]]
> 
> The fact that you post in HTML and make no effort to describe your setup makes me suspect you may also have missed the instructions about installing XCode and configuring R for compiling source packages. This can still be done with the binary distribution versions of R and R.app, and do not require that you build R from sources. See the CRAN-Mac-tools page:
> 
> https://cran.r-project.org/bin/macosx/tools/
> 
> It used to be the case that one needed Xcode and Command Line Tools installed. (I do have them.) I cannot tell from the current Mac-devel page whether that is still the case. I have a current version of R running in El Capitan. This is my ~/.R/Makevars file:
> 
> # created by rstan at Thu Mar 19 11:26:15 2015
> CXXFLAGS = -mtune=core2 -O3 $(LTO)  #set_by_rstan
> R_XTRA_CPPFLAGS =  -I$(R_INCLUDE_DIR)   #set_by_rstan
> CC=/usr/local/clang4/bin/clang
> CXX=/usr/local/clang4/bin/clang++
> LDFLAGS=-L/usr/local/clang4/libI
> 
> I just executed the following commands in the R.app environment.
> 
> source("https://bioconductor.org/biocLite.R")
> biocLite()
> # declined the offer to update packages
>  biocLite(c("ChemmineR"), type="source", dependencies=TRUE)
> 
> It then tried to install all the dependencies (failing for ChemmineOB because the OpenBabel system requirement was not met) and got a  report of success with ChemmineR and the package was capable of loading. So I've successfully tested my theory that the only barriers to successful compilation of ChemmineR from source are lack of knowledge of the R and Bioconductor ecosystem (and lack of one external package.) I'm not that interested in getting a full package installed, so haven't taken the time to install OpenBabel and recompile ChemmineOB.
> 
> 
> Hope this helps;
> David.
> 
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> David Winsemius
> Alameda, CA, USA
> 
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
> 
> 
> 
> 
> 
> 

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


