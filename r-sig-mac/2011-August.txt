From Ross.Darnell at csiro.au  Mon Aug  1 06:15:25 2011
From: Ross.Darnell at csiro.au (Ross.Darnell at csiro.au)
Date: Mon, 1 Aug 2011 14:15:25 +1000
Subject: [R-SIG-Mac] R.app cannot see tar but R (console) can
Message-ID: <CA5C657D.4A62%ross.darnell@csiro.au>

If I run

> system('tar')
within the console version of R I get

> system('tar')
tar: Must specify one of -c, -r, -t, -u, -x

If I try using R.app  I get

R version 2.13.1 (2011-07-08)
Copyright (C) 2011 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[R.app GUI 1.41 (5874) x86_64-apple-darwin9.8.0]

[Workspace restored from /Users/dar143/.RData]
[History restored from /Users/dar143/.Rapp.history]

> system(tar)
Error in system(tar) : non-empty character argument expected

Same problem running R within Emacs/ESS
So the  path for tar is not known to R.app.  What is the best way to fix this?

Regards
Ross Darnell


From bhh at xs4all.nl  Mon Aug  1 07:41:00 2011
From: bhh at xs4all.nl (Berend Hasselman)
Date: Mon, 1 Aug 2011 07:41:00 +0200
Subject: [R-SIG-Mac] R.app cannot see tar but R (console) can
In-Reply-To: <CA5C657D.4A62%ross.darnell@csiro.au>
References: <CA5C657D.4A62%ross.darnell@csiro.au>
Message-ID: <F4BCE593-33DB-4CFD-B886-E52D38CD3614@xs4all.nl>


On 01-08-2011, at 06:15, <Ross.Darnell at csiro.au> <Ross.Darnell at csiro.au> wrote:

> If I run
> 
>> system('tar')
> within the console version of R I get
> 
>> system('tar')
> tar: Must specify one of -c, -r, -t, -u, -x
> 
> If I try using R.app  I get
> 
> R version 2.13.1 (2011-07-08)
> Copyright (C) 2011 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
>  Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
> [R.app GUI 1.41 (5874) x86_64-apple-darwin9.8.0]
> 
> [Workspace restored from /Users/dar143/.RData]
> [History restored from /Users/dar143/.Rapp.history]
> 
>> system(tar)
> Error in system(tar) : non-empty character argument expected

1. You should have done system("tar"). Now R is looking for an object tar which is empty.

2. GUI applications in Mac OS X don't inherit/receive  the environment used in Terminal.

You can check this in R.app with Sys.getenv("PATH").
You could use Sys.setenv(PATH="...") in R.app to set PATH for that session.

If you want GUI applications to always receive certain environment variables then  see

http://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x
http://developer.apple.com/library/mac/#qa/qa1067/_index.html
http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html

If you would like to set environment variables for GUI applications in a "nice" way (would also work for Emacs I think) you can use RCenvironment which provides a preference pane for setting environment variables for GUI applications. See

http://www.rubicode.com/Software/RCEnvironment/

best

Berend

From ripley at stats.ox.ac.uk  Mon Aug  1 08:27:50 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 1 Aug 2011 07:27:50 +0100 (BST)
Subject: [R-SIG-Mac] R.app cannot see tar but R (console) can
In-Reply-To: <F4BCE593-33DB-4CFD-B886-E52D38CD3614@xs4all.nl>
References: <CA5C657D.4A62%ross.darnell@csiro.au>
	<F4BCE593-33DB-4CFD-B886-E52D38CD3614@xs4all.nl>
Message-ID: <alpine.LFD.2.02.1108010724560.4028@gannet.stats.ox.ac.uk>

And R itself (on any Unix-alike) sets the standard environment 
variable TAR, so why not simply use it, e.g.

system2(Sys.getenv("TAR"), <character vector of args>))

Or use utils::untar etc.

On Mon, 1 Aug 2011, Berend Hasselman wrote:

>
> On 01-08-2011, at 06:15, <Ross.Darnell at csiro.au> <Ross.Darnell at csiro.au> wrote:
>
>> If I run
>>
>>> system('tar')
>> within the console version of R I get
>>
>>> system('tar')
>> tar: Must specify one of -c, -r, -t, -u, -x
>>
>> If I try using R.app  I get
>>
>> R version 2.13.1 (2011-07-08)
>> Copyright (C) 2011 The R Foundation for Statistical Computing
>> ISBN 3-900051-07-0
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>  Natural language support but running in an English locale
>>
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>>
>> [R.app GUI 1.41 (5874) x86_64-apple-darwin9.8.0]
>>
>> [Workspace restored from /Users/dar143/.RData]
>> [History restored from /Users/dar143/.Rapp.history]
>>
>>> system(tar)
>> Error in system(tar) : non-empty character argument expected
>
> 1. You should have done system("tar"). Now R is looking for an object tar which is empty.
>
> 2. GUI applications in Mac OS X don't inherit/receive  the environment used in Terminal.
>
> You can check this in R.app with Sys.getenv("PATH").
> You could use Sys.setenv(PATH="...") in R.app to set PATH for that session.
>
> If you want GUI applications to always receive certain environment variables then  see
>
> http://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x
> http://developer.apple.com/library/mac/#qa/qa1067/_index.html
> http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html
>
> If you would like to set environment variables for GUI applications in a "nice" way (would also work for Emacs I think) you can use RCenvironment which provides a preference pane for setting environment variables for GUI applications. See
>
> http://www.rubicode.com/Software/RCEnvironment/
>
> best
>
> Berend
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From AKELLY at tcd.ie  Mon Aug  1 14:20:07 2011
From: AKELLY at tcd.ie (Alan Kelly)
Date: Mon, 1 Aug 2011 13:20:07 +0100
Subject: [R-SIG-Mac] problem with loading JGR
In-Reply-To: <mailman.311.1245773596.4459.r-sig-mac@stat.math.ethz.ch>
References: <mailman.311.1245773596.4459.r-sig-mac@stat.math.ethz.ch>
Message-ID: <7B1C123F-39A7-4F10-8603-00DD2065D0A2@tcd.ie>

dear all, my intention was to check-out Deducer for teaching purposes.  Deducer would not load indicating problems with loading "iplots".  The error message is the same as that repoduced below when I try to load JGR.  I've checked the Info.plist file in the R folder and there is no "StartOnFirstThread" command line.
Any advice on how I might proceed?
Many thanks,
Alan Kelly
Trinity College Dublin


> library(JGR)
Loading required package: rJava
Loading required package: JavaGD
Loading required package: iplots
Note: On Mac OS X we strongly recommend using iplots from within JGR.
Proceed at your own risk as iplots cannot resolve potential ev.loop deadlocks.
'Yes' is assumed for all dialogs as they cannot be shown without a deadlock,
also ievent.wait() is disabled.
Error in .jnew("org/rosuda/iplots/Framework") : 
  java.lang.InternalError: Can't start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application's Info.plist or on the command line
Error: package 'iplots' could not be loaded

Session Info
> sessionInfo()
R version 2.13.1 (2011-07-08)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US/en_US/en_US/C/en_US/en_US

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] JavaGD_0.5-4 rJava_0.9-1 

loaded via a namespace (and not attached):
[1] coda_0.14-2     grid_2.13.1     lattice_0.19-30


From bhive01 at gmail.com  Mon Aug  1 14:46:43 2011
From: bhive01 at gmail.com (Brandon Hurr)
Date: Mon, 1 Aug 2011 13:46:43 +0100
Subject: [R-SIG-Mac] problem with loading JGR
In-Reply-To: <7B1C123F-39A7-4F10-8603-00DD2065D0A2@tcd.ie>
References: <mailman.311.1245773596.4459.r-sig-mac@stat.math.ethz.ch>
	<7B1C123F-39A7-4F10-8603-00DD2065D0A2@tcd.ie>
Message-ID: <CAG2OMvuCs_v4kJQzJw2tQHfvHGgkwaYaQeFWZmvPzXRYURA0TA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110801/d2e79061/attachment.pl>

From ian.fellows at stat.ucla.edu  Mon Aug  1 17:31:16 2011
From: ian.fellows at stat.ucla.edu (ian.fellows at stat.ucla.edu)
Date: Mon, 1 Aug 2011 08:31:16 -0700
Subject: [R-SIG-Mac] problem with loading JGR
In-Reply-To: <CAG2OMvuCs_v4kJQzJw2tQHfvHGgkwaYaQeFWZmvPzXRYURA0TA@mail.gmail.com>
References: <mailman.311.1245773596.4459.r-sig-mac@stat.math.ethz.ch>
	<7B1C123F-39A7-4F10-8603-00DD2065D0A2@tcd.ie>
	<CAG2OMvuCs_v4kJQzJw2tQHfvHGgkwaYaQeFWZmvPzXRYURA0TA@mail.gmail.com>
Message-ID: <8bc8242c91c8a42fe47df2ae33eb017e.squirrel@mail.stat.ucla.edu>

on the mac Deducer must be used from within the JGR console. see:
http://www.deducer.org/pmwiki/pmwiki.php?n=Main.MacOSXInstallation

ian


> Funny enough I was trying the same thing today after reading the
> discussion
> in Baptiste's Physicists thread. I get a very similar error when I started
> it in R...
>
>> require(deducer)
> Loading required package: deducer
> Warning message:
> In library(package, lib.loc = lib.loc, character.only = TRUE,
> logical.return
> = TRUE,  :
>   there is no package called 'deducer'
>> require(Deducer)
> Loading required package: Deducer
> Loading required package: rJava
> Loading required package: JGR
> Loading required package: JavaGD
> Loading required package: iplots
> Note: On Mac OS X we strongly recommend using iplots from within JGR.
> Proceed at your own risk as iplots cannot resolve potential ev.loop
> deadlocks.
> 'Yes' is assumed for all dialogs as they cannot be shown without a
> deadlock,
> also ievent.wait() is disabled.
> Error : .onLoad failed in loadNamespace() for 'iplots', details:
>   call: .jnew("org/rosuda/iplots/Framework")
>   error: java.lang.InternalError: Can't start the AWT because Java was
> started on the first thread.  Make sure StartOnFirstThread is not
> specified
> in your application's Info.plist or on the command line
> Failed with error:  ?package 'iplots' could not be loaded?
>
>> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] grid      stats     graphics  grDevices utils     datasets  methods
> base
>
> other attached packages:
>  [1] JavaGD_0.5-4    rJava_0.9-1     edgeR_2.2.5     quantmod_0.3-15
> TTR_0.20-2      xts_0.8-0
>  [7] zoo_1.7-2       Defaults_1.1-1  tis_1.17        ggplot2_0.8.9
> proto_0.3-9.2   reshape_0.8.4
> [13] plyr_1.6
>
> loaded via a namespace (and not attached):
> [1] digest_0.5.0    lattice_0.19-30 limma_3.8.2     tools_2.13.1
>
>
> But I downloaded the application from JGR directly and ran it. In JGR it
> loaded all the packages just fine. http://www.rforge.net/JGR/files/
>
> I can't say I know how to use it yet though... Just need to RTFM I guess.
>
> Brandon
>
>
>
>
>
> On Mon, Aug 1, 2011 at 13:20, Alan Kelly <AKELLY at tcd.ie> wrote:
>
>> dear all, my intention was to check-out Deducer for teaching purposes.
>>  Deducer would not load indicating problems with loading "iplots".  The
>> error message is the same as that repoduced below when I try to load
>> JGR.
>>  I've checked the Info.plist file in the R folder and there is no
>> "StartOnFirstThread" command line.
>> Any advice on how I might proceed?
>> Many thanks,
>> Alan Kelly
>> Trinity College Dublin
>>
>>
>> > library(JGR)
>> Loading required package: rJava
>> Loading required package: JavaGD
>> Loading required package: iplots
>> Note: On Mac OS X we strongly recommend using iplots from within JGR.
>> Proceed at your own risk as iplots cannot resolve potential ev.loop
>> deadlocks.
>> 'Yes' is assumed for all dialogs as they cannot be shown without a
>> deadlock,
>> also ievent.wait() is disabled.
>> Error in .jnew("org/rosuda/iplots/Framework") :
>>  java.lang.InternalError: Can't start the AWT because Java was started
>> on
>> the first thread.  Make sure StartOnFirstThread is not specified in your
>> application's Info.plist or on the command line
>> Error: package 'iplots' could not be loaded
>>
>> Session Info
>> > sessionInfo()
>> R version 2.13.1 (2011-07-08)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>> locale:
>> [1] en_US/en_US/en_US/C/en_US/en_US
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] JavaGD_0.5-4 rJava_0.9-1
>>
>> loaded via a namespace (and not attached):
>> [1] coda_0.14-2     grid_2.13.1     lattice_0.19-30
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From ian.fellows at stat.ucla.edu  Mon Aug  1 17:34:31 2011
From: ian.fellows at stat.ucla.edu (ian.fellows at stat.ucla.edu)
Date: Mon, 1 Aug 2011 08:34:31 -0700
Subject: [R-SIG-Mac] problem with loading JGR
In-Reply-To: <CAG2OMvuCs_v4kJQzJw2tQHfvHGgkwaYaQeFWZmvPzXRYURA0TA@mail.gmail.com>
References: <mailman.311.1245773596.4459.r-sig-mac@stat.math.ethz.ch>
	<7B1C123F-39A7-4F10-8603-00DD2065D0A2@tcd.ie>
	<CAG2OMvuCs_v4kJQzJw2tQHfvHGgkwaYaQeFWZmvPzXRYURA0TA@mail.gmail.com>
Message-ID: <a41563219cb9c684d8a00c5772242c75.squirrel@mail.stat.ucla.edu>

on the mac Deducer must be used from within the JGR console. see:
http://www.deducer.org/pmwiki/pmwiki.php?n=Main.MacOSXInstallation

There is quite a bit of information to get you started in the manual:
http://www.deducer.org/pmwiki/pmwiki.php?n=Main.DeducerManual

ian


> Funny enough I was trying the same thing today after reading the
> discussion
> in Baptiste's Physicists thread. I get a very similar error when I started
> it in R...
>
>> require(deducer)
> Loading required package: deducer
> Warning message:
> In library(package, lib.loc = lib.loc, character.only = TRUE,
> logical.return
> = TRUE,  :
>   there is no package called 'deducer'
>> require(Deducer)
> Loading required package: Deducer
> Loading required package: rJava
> Loading required package: JGR
> Loading required package: JavaGD
> Loading required package: iplots
> Note: On Mac OS X we strongly recommend using iplots from within JGR.
> Proceed at your own risk as iplots cannot resolve potential ev.loop
> deadlocks.
> 'Yes' is assumed for all dialogs as they cannot be shown without a
> deadlock,
> also ievent.wait() is disabled.
> Error : .onLoad failed in loadNamespace() for 'iplots', details:
>   call: .jnew("org/rosuda/iplots/Framework")
>   error: java.lang.InternalError: Can't start the AWT because Java was
> started on the first thread.  Make sure StartOnFirstThread is not
> specified
> in your application's Info.plist or on the command line
> Failed with error:  ?package 'iplots' could not be loaded?
>
>> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] grid      stats     graphics  grDevices utils     datasets  methods
> base
>
> other attached packages:
>  [1] JavaGD_0.5-4    rJava_0.9-1     edgeR_2.2.5     quantmod_0.3-15
> TTR_0.20-2      xts_0.8-0
>  [7] zoo_1.7-2       Defaults_1.1-1  tis_1.17        ggplot2_0.8.9
> proto_0.3-9.2   reshape_0.8.4
> [13] plyr_1.6
>
> loaded via a namespace (and not attached):
> [1] digest_0.5.0    lattice_0.19-30 limma_3.8.2     tools_2.13.1
>
>
> But I downloaded the application from JGR directly and ran it. In JGR it
> loaded all the packages just fine. http://www.rforge.net/JGR/files/
>
> I can't say I know how to use it yet though... Just need to RTFM I guess.
>
> Brandon
>
>
>
>
>
> On Mon, Aug 1, 2011 at 13:20, Alan Kelly <AKELLY at tcd.ie> wrote:
>
>> dear all, my intention was to check-out Deducer for teaching purposes.
>>  Deducer would not load indicating problems with loading "iplots".  The
>> error message is the same as that repoduced below when I try to load
>> JGR.
>>  I've checked the Info.plist file in the R folder and there is no
>> "StartOnFirstThread" command line.
>> Any advice on how I might proceed?
>> Many thanks,
>> Alan Kelly
>> Trinity College Dublin
>>
>>
>> > library(JGR)
>> Loading required package: rJava
>> Loading required package: JavaGD
>> Loading required package: iplots
>> Note: On Mac OS X we strongly recommend using iplots from within JGR.
>> Proceed at your own risk as iplots cannot resolve potential ev.loop
>> deadlocks.
>> 'Yes' is assumed for all dialogs as they cannot be shown without a
>> deadlock,
>> also ievent.wait() is disabled.
>> Error in .jnew("org/rosuda/iplots/Framework") :
>>  java.lang.InternalError: Can't start the AWT because Java was started
>> on
>> the first thread.  Make sure StartOnFirstThread is not specified in your
>> application's Info.plist or on the command line
>> Error: package 'iplots' could not be loaded
>>
>> Session Info
>> > sessionInfo()
>> R version 2.13.1 (2011-07-08)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>> locale:
>> [1] en_US/en_US/en_US/C/en_US/en_US
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] JavaGD_0.5-4 rJava_0.9-1
>>
>> loaded via a namespace (and not attached):
>> [1] coda_0.14-2     grid_2.13.1     lattice_0.19-30
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From AKELLY at tcd.ie  Mon Aug  1 18:29:55 2011
From: AKELLY at tcd.ie (Alan Kelly)
Date: Mon, 1 Aug 2011 17:29:55 +0100
Subject: [R-SIG-Mac] problem with loading JGR
In-Reply-To: <CAG2OMvtuJ0rmiGdnF4-7XfmWud-W0FryyUiNTLE8JbXmzZLzdQ@mail.gmail.com>
References: <mailman.311.1245773596.4459.r-sig-mac@stat.math.ethz.ch>
	<7B1C123F-39A7-4F10-8603-00DD2065D0A2@tcd.ie>
	<CAG2OMvuCs_v4kJQzJw2tQHfvHGgkwaYaQeFWZmvPzXRYURA0TA@mail.gmail.com>
	<FCE8AEA3-33C8-42EE-BE94-22A21B0ABFEE@tcd.ie>
	<CAG2OMvu-=OdbX_gqThmSdnBJMvr=b-fC+T2gRhk3P_nFWawNGg@mail.gmail.com>
	<958E304C-C865-4CF5-A891-3508B0A4D2DD@tcd.ie>
	<CAG2OMvtuJ0rmiGdnF4-7XfmWud-W0FryyUiNTLE8JbXmzZLzdQ@mail.gmail.com>
Message-ID: <8551C23F-161B-4870-82B5-C3A233F5A251@tcd.ie>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110801/879bc47b/attachment.pl>

From simon.urbanek at r-project.org  Mon Aug  1 19:26:21 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 1 Aug 2011 13:26:21 -0400
Subject: [R-SIG-Mac] R.app cannot see tar but R (console) can
In-Reply-To: <F4BCE593-33DB-4CFD-B886-E52D38CD3614@xs4all.nl>
References: <CA5C657D.4A62%ross.darnell@csiro.au>
	<F4BCE593-33DB-4CFD-B886-E52D38CD3614@xs4all.nl>
Message-ID: <E220BCCF-6869-4C15-813B-5621F8FBC6F1@r-project.org>


On Aug 1, 2011, at 1:41 AM, Berend Hasselman <bhh at xs4all.nl> wrote:

> 
> On 01-08-2011, at 06:15, <Ross.Darnell at csiro.au> <Ross.Darnell at csiro.au> wrote:
> 
>> If I run
>> 
>>> system('tar')
>> within the console version of R I get
>> 
>>> system('tar')
>> tar: Must specify one of -c, -r, -t, -u, -x
>> 
>> If I try using R.app  I get
>> 
>> R version 2.13.1 (2011-07-08)
>> Copyright (C) 2011 The R Foundation for Statistical Computing
>> ISBN 3-900051-07-0
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>> 
>> Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>> [R.app GUI 1.41 (5874) x86_64-apple-darwin9.8.0]
>> 
>> [Workspace restored from /Users/dar143/.RData]
>> [History restored from /Users/dar143/.Rapp.history]
>> 
>>> system(tar)
>> Error in system(tar) : non-empty character argument expected
> 
> 1. You should have done system("tar"). Now R is looking for an object tar which is empty.
> 
> 2. GUI applications in Mac OS X don't inherit/receive  the environment used in Terminal.
> 
> You can check this in R.app with Sys.getenv("PATH").
> You could use Sys.setenv(PATH="...") in R.app to set PATH for that session.
> 
> If you want GUI applications to always receive certain environment variables then  see
> 

I would prefer references to canonical sources (R for Mac FAQ 12.19)


> http://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x
> http://developer.apple.com/library/mac/#qa/qa1067/_index.html
> http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html
> 
> If you would like to set environment variables for GUI applications in a "nice" way (would also work for Emacs I think) you can use RCenvironment which provides a preference pane for setting environment variables for GUI applications. See
> 
> http://www.rubicode.com/Software/RCEnvironment/
> 
> best
> 
> Berend
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 


From batholdy at googlemail.com  Wed Aug  3 22:41:19 2011
From: batholdy at googlemail.com (Martin Batholdy)
Date: Wed, 3 Aug 2011 22:41:19 +0200
Subject: [R-SIG-Mac] GUI problems (opening files, workspace, font-size)
Message-ID: <CE3FD5D0-FBFD-4C41-AC23-CD04CC65C8D6@googlemail.com>

Hi,


I just clean installed my entire system and upgraded to mac OS lion.

Now I have two (minor) GUI-related issues with the newest R-installation for mac OS (2.13.1).
I don't know if that is lion related, but perhaps someone can help me;

First, I am not able to open R-scripts with a double-click in the finder.
Instead of opening the file in the built-in R-editor, it seems like that the console tries to execute the code on startup.
And therefore I get some error messages.

When R is already open, double-clicking on an R-file in the finder opens the file in a new editor-window,
but if R is closed, it tries to open the code directly in the console.

How can I change this behavior?

Also it seems like that R tries to restore the last session, although I explicitly set the option to not save the workspace in the preferences.



And secondly, how can I change the font-size in the console-window of the R-GUI?
I can do a pinch-gesture to increase the font-size, but on the next start of R I again have a rather small font-size.



thanks!

From a.jaffe at imperial.ac.uk  Wed Aug  3 13:19:27 2011
From: a.jaffe at imperial.ac.uk (Jaffe, Andrew H)
Date: Wed, 3 Aug 2011 11:19:27 +0000
Subject: [R-SIG-Mac] gfortran for lion
Message-ID: <3F750D8B-A4BB-467C-903C-E9263A9B2E5B@imperial.ac.uk>

Dear all,

I was attempting to install the latest gfortran for OS X 10.7 Lion. 

I note that there is an Xcode add-on version for Lion. Its readme screen does indeed claim that this "GNU Fortran 4.2.4 for Xcode 4.1".

However:

 * the "file list" in the package says "GNU Fortran 4.2.4 for Xcode 3.2.3" 
 * the files themselves are labelled ./usr/bin/i686-apple-darwin11-gfortran-4.2.1.
 * gfortran --version gives "GNU Fortran (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)"

So, which is it? (And can/should I use the old 2008 CRAN version instead?)

Yours,

Andrew


From bjhjansen at gmail.com  Fri Aug  5 13:29:30 2011
From: bjhjansen at gmail.com (Bas Jansen)
Date: Fri, 5 Aug 2011 13:29:30 +0200
Subject: [R-SIG-Mac] gfortran for lion
Message-ID: <CAOP8_44v_Ot2tZP1_CtFrvBLQ8FPRVj=8wZ-0ZJAgV7jHrXw_w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110805/0edaa4fa/attachment.pl>

From w.northcott at unsw.edu.au  Sat Aug  6 11:34:36 2011
From: w.northcott at unsw.edu.au (William Northcott)
Date: Sat, 6 Aug 2011 19:34:36 +1000
Subject: [R-SIG-Mac] gfortran for lion
In-Reply-To: <mailman.21.1312538406.10421.r-sig-mac@r-project.org>
References: <mailman.21.1312538406.10421.r-sig-mac@r-project.org>
Message-ID: <BC62CA82-E21A-4671-ADF7-3D6602A1C018@unsw.edu.au>

> From: "Jaffe, Andrew H" <a.jaffe at imperial.ac.uk>
> Dear all,
> 
> I was attempting to install the latest gfortran for OS X 10.7 Lion. 
> 
> I note that there is an Xcode add-on version for Lion. Its readme screen does indeed claim that this "GNU Fortran 4.2.4 for Xcode 4.1".
> 
> However:
> 
> * the "file list" in the package says "GNU Fortran 4.2.4 for Xcode 3.2.3" 
> * the files themselves are labelled ./usr/bin/i686-apple-darwin11-gfortran-4.2.1.
> * gfortran --version gives "GNU Fortran (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)"

This last version works for me with Xcode 4.1.

Bill Northcott


From simon.urbanek at r-project.org  Sat Aug  6 16:17:26 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 6 Aug 2011 10:17:26 -0400
Subject: [R-SIG-Mac] gfortran for lion
In-Reply-To: <3F750D8B-A4BB-467C-903C-E9263A9B2E5B@imperial.ac.uk>
References: <3F750D8B-A4BB-467C-903C-E9263A9B2E5B@imperial.ac.uk>
Message-ID: <5E093C2B-CD69-4B85-8E91-15E097000AA4@r-project.org>


On Aug 3, 2011, at 7:19 AM, Jaffe, Andrew H wrote:

> Dear all,
> 
> I was attempting to install the latest gfortran for OS X 10.7 Lion. 
> 
> I note that there is an Xcode add-on version for Lion. Its readme screen does indeed claim that this "GNU Fortran 4.2.4 for Xcode 4.1".
> 
> However:
> 
> * the "file list" in the package says "GNU Fortran 4.2.4 for Xcode 3.2.3" 
> * the files themselves are labelled ./usr/bin/i686-apple-darwin11-gfortran-4.2.1.
> * gfortran --version gives "GNU Fortran (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)"
> 
> So, which is it? (And can/should I use the old 2008 CRAN version instead?)
> 

I have no idea what you mean by "file list", but everything else is exactly as it should be. It's GNU Fortran 4.2.4 compiled in Apple's gcc 4.2.1 (build 5666.3) branch - which is what Xcode 4.1 is (see gcc-4.2 --version).

You can use either (as the post said). The differences from the CRAN Fortran are the same as for any of the Leopard and Snow Leopard Xcode add-ons, nothing changed since.

Cheers,
Simon


From a.jaffe at imperial.ac.uk  Fri Aug  5 13:35:27 2011
From: a.jaffe at imperial.ac.uk (Jaffe, Andrew H)
Date: Fri, 5 Aug 2011 11:35:27 +0000
Subject: [R-SIG-Mac] gfortran for lion
In-Reply-To: <CAOP8_44v_Ot2tZP1_CtFrvBLQ8FPRVj=8wZ-0ZJAgV7jHrXw_w@mail.gmail.com>
References: <CAOP8_44v_Ot2tZP1_CtFrvBLQ8FPRVj=8wZ-0ZJAgV7jHrXw_w@mail.gmail.com>
Message-ID: <8A9F507A-CA39-4826-83AA-6043E1973365@imperial.ac.uk>

Bas et al,

Sorry if I wasn't clear: my point was that this file does not appear to actually contain Gnu Fortran 4.2.4 for Mac OS X 10.7, despite the filename (and indeed the readme file!)

Yours,

Andrew


On 5 Aug 2011, at 12:29, Bas Jansen wrote:

> Hi Andrew:
> 
> I went to http://r.research.att.com/tools/, where you can find  gfortran-lion-5666-3.pkg (GNU Fortran 4.2.4 for Mac OS X 10.7 (Lion))
> 
> Kind regards,
> Bas
> 
> On Fri, Aug 5, 2011 at 12:00 PM, <r-sig-mac-request at r-project.org> wrote:
> Send R-SIG-Mac mailing list submissions to
>        r-sig-mac at r-project.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
>        https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> or, via email, send a message with subject or body 'help' to
>        r-sig-mac-request at r-project.org
> 
> You can reach the person managing the list at
>        r-sig-mac-owner at r-project.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Mac digest..."
> 
> 
> Today's Topics:
> 
>   1.  gfortran for lion (Jaffe, Andrew H)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Wed, 3 Aug 2011 11:19:27 +0000
> From: "Jaffe, Andrew H" <a.jaffe at imperial.ac.uk>
> To: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Cc: "Jaffe, Andrew H" <a.jaffe at imperial.ac.uk>
> Subject: [R-SIG-Mac] gfortran for lion
> Message-ID: <3F750D8B-A4BB-467C-903C-E9263A9B2E5B at imperial.ac.uk>
> Content-Type: text/plain; charset="us-ascii"
> 
> Dear all,
> 
> I was attempting to install the latest gfortran for OS X 10.7 Lion.
> 
> I note that there is an Xcode add-on version for Lion. Its readme screen does indeed claim that this "GNU Fortran 4.2.4 for Xcode 4.1".
> 
> However:
> 
>  * the "file list" in the package says "GNU Fortran 4.2.4 for Xcode 3.2.3"
>  * the files themselves are labelled ./usr/bin/i686-apple-darwin11-gfortran-4.2.1.
>  * gfortran --version gives "GNU Fortran (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)"
> 
> So, which is it? (And can/should I use the old 2008 CRAN version instead?)
> 
> Yours,
> 
> Andrew
> 
> 
> 
> ------------------------------
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> End of R-SIG-Mac Digest, Vol 102, Issue 5
> *****************************************
> 


From fjproenza at gmail.com  Sat Aug  6 07:38:14 2011
From: fjproenza at gmail.com (FJProenza)
Date: Sat, 06 Aug 2011 13:38:14 +0800
Subject: [R-SIG-Mac] Installing R on Lion
Message-ID: <4E3CD346.9020606@e-ForAll.org>

Most of the instructions appearing on the FAQs for Mac apply to earlier 
versions of the ope rating system.

I recently installed Lion on my Intel Power Mac and would appreciate any 
advice regarding important differences in the installation and build up 
procedure.

Thanks,

FJP


From a.jaffe at imperial.ac.uk  Sat Aug  6 16:33:07 2011
From: a.jaffe at imperial.ac.uk (Jaffe, Andrew H)
Date: Sat, 6 Aug 2011 14:33:07 +0000
Subject: [R-SIG-Mac] gfortran for lion
In-Reply-To: <5E093C2B-CD69-4B85-8E91-15E097000AA4@r-project.org>
References: <3F750D8B-A4BB-467C-903C-E9263A9B2E5B@imperial.ac.uk>
	<5E093C2B-CD69-4B85-8E91-15E097000AA4@r-project.org>
Message-ID: <9E3B033D-4B60-48FB-8B5C-2F4C914946FE@imperial.ac.uk>

Dear Simon,

On 6 Aug 2011, at 15:17, Simon Urbanek wrote:

> On Aug 3, 2011, at 7:19 AM, Jaffe, Andrew H wrote:
> 
>> I was attempting to install the latest gfortran for OS X 10.7 Lion. 
>> 
>> I note that there is an Xcode add-on version for Lion. Its readme screen does indeed claim that this "GNU Fortran 4.2.4 for Xcode 4.1".
>> 
>> However:
>> 
>> * the "file list" in the package says "GNU Fortran 4.2.4 for Xcode 3.2.3" 
>> * the files themselves are labelled ./usr/bin/i686-apple-darwin11-gfortran-4.2.1.
>> * gfortran --version gives "GNU Fortran (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)"
>> 
>> So, which is it? (And can/should I use the old 2008 CRAN version instead?)
>> 
> 
> I have no idea what you mean by "file list", but everything else is exactly as it should be. It's GNU Fortran 4.2.4 compiled in Apple's gcc 4.2.1 (build 5666.3) branch - which is what Xcode 4.1 is (see gcc-4.2 --version).

Thanks for the clarification. 

By "file list" I meant what you get from the menu item "Show Files" in the installer. 

But I admit that it's all still a bit confusing. Nowhere does it say "4.2.4", just "4.2.1" which I think I now understand is the gcc version used to compile it, not the gfortran version. Should "--version" give the version of the program you're using?

> You can use either (as the post said). The differences from the CRAN Fortran are the same as for any of the Leopard and Snow Leopard Xcode add-ons, nothing changed since.
> 
> Cheers,
> Simon

Yours,

Andrew


From simon.urbanek at r-project.org  Sat Aug  6 16:46:56 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 6 Aug 2011 10:46:56 -0400
Subject: [R-SIG-Mac] gfortran for lion
In-Reply-To: <9E3B033D-4B60-48FB-8B5C-2F4C914946FE@imperial.ac.uk>
References: <3F750D8B-A4BB-467C-903C-E9263A9B2E5B@imperial.ac.uk>
	<5E093C2B-CD69-4B85-8E91-15E097000AA4@r-project.org>
	<9E3B033D-4B60-48FB-8B5C-2F4C914946FE@imperial.ac.uk>
Message-ID: <EE041355-0074-4B00-856E-7C2D56FABB8F@r-project.org>


On Aug 6, 2011, at 10:33 AM, Jaffe, Andrew H wrote:

> Dear Simon,
> 
> On 6 Aug 2011, at 15:17, Simon Urbanek wrote:
> 
>> On Aug 3, 2011, at 7:19 AM, Jaffe, Andrew H wrote:
>> 
>>> I was attempting to install the latest gfortran for OS X 10.7 Lion. 
>>> 
>>> I note that there is an Xcode add-on version for Lion. Its readme screen does indeed claim that this "GNU Fortran 4.2.4 for Xcode 4.1".
>>> 
>>> However:
>>> 
>>> * the "file list" in the package says "GNU Fortran 4.2.4 for Xcode 3.2.3" 
>>> * the files themselves are labelled ./usr/bin/i686-apple-darwin11-gfortran-4.2.1.
>>> * gfortran --version gives "GNU Fortran (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)"
>>> 
>>> So, which is it? (And can/should I use the old 2008 CRAN version instead?)
>>> 
>> 
>> I have no idea what you mean by "file list", but everything else is exactly as it should be. It's GNU Fortran 4.2.4 compiled in Apple's gcc 4.2.1 (build 5666.3) branch - which is what Xcode 4.1 is (see gcc-4.2 --version).
> 
> Thanks for the clarification. 
> 
> By "file list" I meant what you get from the menu item "Show Files" in the installer. 
> 

I'm not on Lion right now so I'll check later, but I don't think I'll be re-packaging it for that ;).


> But I admit that it's all still a bit confusing. Nowhere does it say "4.2.4", just "4.2.1" which I think I now understand is the gcc version used to compile it, not the gfortran version. Should "--version" give the version of the program you're using?
> 

It does - your'e using Apple's gcc 4.2.1 with Fortran front-end from gcc 4.2.4 (i.e. the back-end is still gcc-4.2.1). Obviously, it's something that the authors didn't anticipate so there is no provision for labeling that mix ;) - the build simply shows the branch version which is gcc-4.2.1 5666.3. Given that Apple has no Fortran in their branch, there is really no "corresponding" Fortran.

Cheers,
Simon


>> You can use either (as the post said). The differences from the CRAN Fortran are the same as for any of the Leopard and Snow Leopard Xcode add-ons, nothing changed since.
>> 
>> Cheers,
>> Simon
> 
> Yours,
> 
> Andrew
> 
> 


From simon.urbanek at r-project.org  Sat Aug  6 16:51:12 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 6 Aug 2011 10:51:12 -0400
Subject: [R-SIG-Mac] Installing R on Lion
In-Reply-To: <4E3CD346.9020606@e-ForAll.org>
References: <4E3CD346.9020606@e-ForAll.org>
Message-ID: <AC0372D7-B1B4-44C0-A5F6-035425683498@r-project.org>


On Aug 6, 2011, at 1:38 AM, FJProenza wrote:

> Most of the instructions appearing on the FAQs for Mac apply to earlier versions of the ope rating system.
> 

What makes you think so?


> I recently installed Lion on my Intel Power Mac and would appreciate any advice regarding important differences in the installation and build up procedure.
> 

Why should they be different? There are no real technical differences since 10.5 (Leopard) - the binary package is the same and if you want to build R from sources, you simply have to follow the instructions - it's not different, either.

Cheers,
Simon


From fjproenza at gmail.com  Mon Aug  8 01:26:07 2011
From: fjproenza at gmail.com (Francisco J. Proenza)
Date: Mon, 08 Aug 2011 07:26:07 +0800
Subject: [R-SIG-Mac] R for Mac
Message-ID: <4E3F1F0F.3030800@upf.edu>

On Aug 6, 2011, at 1:38 AM, FJProenza wrote:

Dear Simon:

 > > Most of the instructions appearing on the FAQs for Mac apply to 
earlier versions of the ope rating system.
 > >
What makes you think so?

The fact that the instructions make no mention of Lion, only the 
previous OS versions (e.g. Leopard) are mentioned.

 > > I recently installed Lion on my Intel Power Mac and would 
appreciate any advice regarding important differences in the 
installation and build up procedure.
 > >
Why should they be different? There are no real technical differences 
since 10.5 (Leopard) - the binary package is the same and if you want to 
build R from sources, you simply have to follow the instructions - it's 
not different, either.

Good to know.

Thanks,

Francisco


From schmidt at lone-star.de  Tue Aug  9 18:34:18 2011
From: schmidt at lone-star.de (Sebastian Schmidt)
Date: Tue, 09 Aug 2011 18:34:18 +0200
Subject: [R-SIG-Mac] Multicore and as.POSIXct on MacOS Lion
Message-ID: <CA672E2A.4877%schmidt@lone-star.de>

Multicore and/or as.POSIXct seems to have problems with MacOS Lion.

The following program (from the pvec help) runs fine:

dates <- sprintf('%04d-%02d-%02d', as.integer(2000+rnorm(1e5)),
                  as.integer(runif(1e5,1,12)), as.integer(runif(1e5,1,28)))


system.time(a <- as.POSIXct(dates))

but

system.time(b <- pvec(dates, as.POSIXct))

blocks all cpu cores and does not terminate on both my Apple machines. I
tested that on MacOS Lion with multicore 1.5 and 1.6 under R 2.13.1 and R
2.12.2. On snow leopard everything ran smooth.

Is this a problem with R libraries or with the OS? Are there any known
workarounds?

Thank you very much,
Sebastian


From simon.urbanek at r-project.org  Thu Aug 11 16:26:23 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 11 Aug 2011 10:26:23 -0400
Subject: [R-SIG-Mac] Multicore and as.POSIXct on MacOS Lion
In-Reply-To: <CA672E2A.4877%schmidt@lone-star.de>
References: <CA672E2A.4877%schmidt@lone-star.de>
Message-ID: <9D93A979-F444-4369-885B-EDB32618B6EC@r-project.org>


On Aug 9, 2011, at 12:34 PM, Sebastian Schmidt wrote:

> Multicore and/or as.POSIXct seems to have problems with MacOS Lion.
> 
> The following program (from the pvec help) runs fine:
> 
> dates <- sprintf('%04d-%02d-%02d', as.integer(2000+rnorm(1e5)),
>                  as.integer(runif(1e5,1,12)), as.integer(runif(1e5,1,28)))
> 
> 
> system.time(a <- as.POSIXct(dates))
> 
> but
> 
> system.time(b <- pvec(dates, as.POSIXct))
> 
> blocks all cpu cores and does not terminate on both my Apple machines. I
> tested that on MacOS Lion with multicore 1.5 and 1.6 under R 2.13.1 and R
> 2.12.2. On snow leopard everything ran smooth.
> 
> Is this a problem with R libraries or with the OS? Are there any known
> workarounds?
> 

I had a report from someone (ah, Sebastian, now I see it was you :)) that there are certain system calls that block on Lion - and I think they were date/time related. It seems to be a bug in Lion. I did have time to have a closer look yet (mainly because I avoid Lion until it gets more stable so I can use it on my regular machines), but I doubt there is much we can do - more likely Apple needs to fix it.

Cheers,
Simon


From mhoban at ucsc.edu  Thu Aug 11 20:35:37 2011
From: mhoban at ucsc.edu (Michael Hoban)
Date: Thu, 11 Aug 2011 11:35:37 -0700
Subject: [R-SIG-Mac] Unicode characters in script?
Message-ID: <CAB5rbyV6GsN-+_0wp91ka3g3ELBSpb2o-P8iB9UZSoz0-v5U6w@mail.gmail.com>

Hi all-

I tried searching before posting, but this is one of those tricky
questions to search for. My issue is this: within the R.app gui, I can
use extended characters in plot labels without any issue (specifically
in my case the ?, lowercase delta), for example:

> plot(c(1:10) ~ c(1:10), main="?foobie bletch?")

However, when I try to do the same in a script from the terminal
(interpreted by Rscript), I get a bunch of errors related to character
encoding:
  ....
  conversion failure on '?foobie bletch?' in 'mbcsToSbcs': dot
substituted for <e2>
  ....

Is there a way to make this work? Or is Rscript not equipped to handle
multibyte characters?

thanks in advance,

_mykle


From raerickson at gmail.com  Thu Aug 11 22:26:04 2011
From: raerickson at gmail.com (R Erickson)
Date: Thu, 11 Aug 2011 15:26:04 -0500
Subject: [R-SIG-Mac] Unicode characters in script?
In-Reply-To: <CAB5rbyV6GsN-+_0wp91ka3g3ELBSpb2o-P8iB9UZSoz0-v5U6w@mail.gmail.com>
References: <CAB5rbyV6GsN-+_0wp91ka3g3ELBSpb2o-P8iB9UZSoz0-v5U6w@mail.gmail.com>
Message-ID: <CAMOc9Smg7SRBuXJatkwbjCSnyciT8PXq2tOW7t3NRDWR2Wv_2A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110811/2208e2a6/attachment.pl>

From mhoban at ucsc.edu  Thu Aug 11 22:40:49 2011
From: mhoban at ucsc.edu (Michael Hoban)
Date: Thu, 11 Aug 2011 13:40:49 -0700
Subject: [R-SIG-Mac] Unicode characters in script?
In-Reply-To: <CAMOc9Smg7SRBuXJatkwbjCSnyciT8PXq2tOW7t3NRDWR2Wv_2A@mail.gmail.com>
References: <CAB5rbyV6GsN-+_0wp91ka3g3ELBSpb2o-P8iB9UZSoz0-v5U6w@mail.gmail.com>
	<CAMOc9Smg7SRBuXJatkwbjCSnyciT8PXq2tOW7t3NRDWR2Wv_2A@mail.gmail.com>
Message-ID: <CAB5rbyVtqsY1-G3mFF4tFNCZR4g0r6EWWBNGpyqCHuanODsxfA@mail.gmail.com>

I have, it doesn't seem to make a difference. It looks like the
problem concerns the PDF output device being used from Rscript as
opposed to quartz in R.app.

On Thu, Aug 11, 2011 at 1:26 PM, R Erickson <raerickson at gmail.com> wrote:
> Mylke,
>
> Have you tried using the "\u###" tool, where ### is the Unicode number? For
> example,
>
> plot(c(1:10) ~ c(1:10), main="\u2202 foobie bletch \u0192")
>
> produces a del character and italics function "f". You may wish to use
> different Unicode characters, but these were the first character codes I
> found.
>
> To look up the Unicode numbers, I personally like to use the "insert special
> characters" tool in Pages, which may be found at:
>
> Edit -> Special characters
>
> Alternatively, a web search for "Unicode characters" should give you several
> sites to find this information at as well.
>
> Hope this helps!
>
> Richard Erickson
>
> On Thu, Aug 11, 2011 at 1:35 PM, Michael Hoban <mhoban at ucsc.edu> wrote:
>>
>> Hi all-
>>
>> I tried searching before posting, but this is one of those tricky
>> questions to search for. My issue is this: within the R.app gui, I can
>> use extended characters in plot labels without any issue (specifically
>> in my case the ?, lowercase delta), for example:
>>
>> > plot(c(1:10) ~ c(1:10), main="?foobie bletch?")
>>
>> However, when I try to do the same in a script from the terminal
>> (interpreted by Rscript), I get a bunch of errors related to character
>> encoding:
>> ?....
>> ?conversion failure on '?foobie bletch?' in 'mbcsToSbcs': dot
>> substituted for <e2>
>> ?....
>>
>> Is there a way to make this work? Or is Rscript not equipped to handle
>> multibyte characters?
>>
>> thanks in advance,
>>
>> _mykle
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From simon.urbanek at r-project.org  Fri Aug 12 03:13:41 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 11 Aug 2011 21:13:41 -0400
Subject: [R-SIG-Mac] Unicode characters in script?
In-Reply-To: <CAB5rbyV6GsN-+_0wp91ka3g3ELBSpb2o-P8iB9UZSoz0-v5U6w@mail.gmail.com>
References: <CAB5rbyV6GsN-+_0wp91ka3g3ELBSpb2o-P8iB9UZSoz0-v5U6w@mail.gmail.com>
Message-ID: <14BBEE00-C54A-463F-B5B4-43C10675A6AF@r-project.org>


On Aug 11, 2011, at 2:35 PM, Michael Hoban wrote:

> Hi all-
> 
> I tried searching before posting, but this is one of those tricky
> questions to search for. My issue is this: within the R.app gui, I can
> use extended characters in plot labels without any issue (specifically
> in my case the ?, lowercase delta), for example:
> 
>> plot(c(1:10) ~ c(1:10), main="?foobie bletch?")
> 
> However, when I try to do the same in a script from the terminal
> (interpreted by Rscript), I get a bunch of errors related to character
> encoding:
>  ....
>  conversion failure on '?foobie bletch?' in 'mbcsToSbcs': dot
> substituted for <e2>
>  ....
> 
> Is there a way to make this work? Or is Rscript not equipped to handle
> multibyte characters?
> 

It seems your'e running Rscript in a locale that doesn't support unicode (probably C). Make sure you use UTF-8 locale (e.g. LANG=en_US.UTF-8)

Cheers,
Simon


From ripley at stats.ox.ac.uk  Fri Aug 12 08:23:03 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 12 Aug 2011 07:23:03 +0100 (BST)
Subject: [R-SIG-Mac] Unicode characters in script?
In-Reply-To: <14BBEE00-C54A-463F-B5B4-43C10675A6AF@r-project.org>
References: <CAB5rbyV6GsN-+_0wp91ka3g3ELBSpb2o-P8iB9UZSoz0-v5U6w@mail.gmail.com>
	<14BBEE00-C54A-463F-B5B4-43C10675A6AF@r-project.org>
Message-ID: <alpine.LFD.2.02.1108120713580.5116@gannet.stats.ox.ac.uk>

On Thu, 11 Aug 2011, Simon Urbanek wrote:

>
> On Aug 11, 2011, at 2:35 PM, Michael Hoban wrote:
>
>> Hi all-
>>
>> I tried searching before posting, but this is one of those tricky
>> questions to search for. My issue is this: within the R.app gui, I can
>> use extended characters in plot labels without any issue (specifically
>> in my case the ?, lowercase delta), for example:
>>
>>> plot(c(1:10) ~ c(1:10), main="?foobie bletch?")
>>
>> However, when I try to do the same in a script from the terminal
>> (interpreted by Rscript), I get a bunch of errors related to character
>> encoding:
>>  ....
>>  conversion failure on '?foobie bletch?' in 'mbcsToSbcs': dot
>> substituted for <e2>
>>  ....
>>
>> Is there a way to make this work? Or is Rscript not equipped to handle
>> multibyte characters?
>>
>
> It seems your'e running Rscript in a locale that doesn't support 
> unicode (probably C). Make sure you use UTF-8 locale (e.g. 
> LANG=en_US.UTF-8)

Maybe: but because he blatently ignored the posting guide, we don't 
know.

Another possibility is that he is using a graphics device that does 
not support those characters (and again, we have not been told).

Using Greek characters requires the postscript() and pdf() devices to 
be told to work in Greek, as their help pages (and the R manuals) 
makes clear.  It is those graphics languages (and not Rscript) which 
do not support Unicode.  You will also need viewers that support the 
Greek characters ....


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From mhoban at ucsc.edu  Fri Aug 12 08:36:31 2011
From: mhoban at ucsc.edu (Michael Hoban)
Date: Thu, 11 Aug 2011 23:36:31 -0700
Subject: [R-SIG-Mac] Unicode characters in script?
In-Reply-To: <alpine.LFD.2.02.1108120713580.5116@gannet.stats.ox.ac.uk>
References: <CAB5rbyV6GsN-+_0wp91ka3g3ELBSpb2o-P8iB9UZSoz0-v5U6w@mail.gmail.com>
	<14BBEE00-C54A-463F-B5B4-43C10675A6AF@r-project.org>
	<alpine.LFD.2.02.1108120713580.5116@gannet.stats.ox.ac.uk>
Message-ID: <CAB5rbyWVGusMsksWG9eW_h96_LDfKwMrwV4XEPX0qAyr7TOkbA@mail.gmail.com>

In my first posting, I didn't know there were two different graphics
output mechanisms at work. In my second, I had found that out. The
same code in two places uses different back-ends, and produces
different output results, and it was by no means immediately apparent
that that's the case. I meant no slight against Rscript itself or by
extension its author. In all of the documentation I read, there was
nothing that explicitly said that the figures produced by R.app were
fundamentally different from those generated from the command line
(especially as the default format for saving from R.app figures is
pdf). Also, if I generate the figure from within R.app and save it as
a PDF, it "just works," further leading me to assume it should "just
work" from the command line. Sorry for the confusion.




On Thu, Aug 11, 2011 at 11:23 PM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> On Thu, 11 Aug 2011, Simon Urbanek wrote:
>
>>
>> On Aug 11, 2011, at 2:35 PM, Michael Hoban wrote:
>>
>>> Hi all-
>>>
>>> I tried searching before posting, but this is one of those tricky
>>> questions to search for. My issue is this: within the R.app gui, I can
>>> use extended characters in plot labels without any issue (specifically
>>> in my case the ?, lowercase delta), for example:
>>>
>>>> plot(c(1:10) ~ c(1:10), main="?foobie bletch?")
>>>
>>> However, when I try to do the same in a script from the terminal
>>> (interpreted by Rscript), I get a bunch of errors related to character
>>> encoding:
>>> ?....
>>> ?conversion failure on '?foobie bletch?' in 'mbcsToSbcs': dot
>>> substituted for <e2>
>>> ?....
>>>
>>> Is there a way to make this work? Or is Rscript not equipped to handle
>>> multibyte characters?
>>>
>>
>> It seems your'e running Rscript in a locale that doesn't support unicode
>> (probably C). Make sure you use UTF-8 locale (e.g. LANG=en_US.UTF-8)
>
> Maybe: but because he blatently ignored the posting guide, we don't know.
>
> Another possibility is that he is using a graphics device that does not
> support those characters (and again, we have not been told).
>
> Using Greek characters requires the postscript() and pdf() devices to be
> told to work in Greek, as their help pages (and the R manuals) makes clear.
> ?It is those graphics languages (and not Rscript) which do not support
> Unicode. ?You will also need viewers that support the Greek characters ....
>
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595


From timothy.c.bates at gmail.com  Fri Aug 12 19:48:32 2011
From: timothy.c.bates at gmail.com (Timothy Bates)
Date: Fri, 12 Aug 2011 18:48:32 +0100
Subject: [R-SIG-Mac] service to run R from mail.app?
Message-ID: <F7539357-91F1-4DB7-9235-BD23E8431D3A@gmail.com>

hi all,
i wonder if anyone has made a service to send an email selection  to R and run it?

Would be nice to be able to cmd-return click and have this work, as in textmate. Especially with all the example code coming through mail lists...

If no one's done it, I'll have a go.

t

From m_hofert at web.de  Mon Aug 15 15:35:38 2011
From: m_hofert at web.de (Marius Hofert)
Date: Mon, 15 Aug 2011 15:35:38 +0200
Subject: [R-SIG-Mac] Install multiple versions of R on Mac
Message-ID: <84E1B5F8-8D5E-40D6-B580-A15D48664370@web.de>

Dear expeRts,

I would like to run R 2.13 and R 2.14 on a MacBook Pro (2.53 GHz Intel Core 2 Duo, 4 GB 1067 MHz DDR3) with Mac OS X 10.6.8. I installed Rswitch to switch between the two versions. On installing the second version (2.14), I executed
sudo pkgutil --forget org.r-project.R.Leopard.fw.pkg
in the Terminal as suggested on the installation process. Then I finished the installation. 2.14 runs great (64-bit), but when I switch to R 2.13 and start R, I get the output below. 

What did I do wrong?

Note: I previously had only R 2.14 running. Then I installed R 2.13 (because some things are not available for 2.14). On the installation I missed the fact that R 2.14 is not available anymore [I missed the note on using pkgutil...], so I only had R 2.13 (also running fine). After that I downloaded R 2.14 and executed the pkgutil command during the installation process. I'm not sure if this matters (I guess not, since that's probably the more typical way [first having 2.13 installed and then 2.14 :-)]). 

Cheers,

Marius


 *** caught segfault ***
address 0x54d8, cause 'memory not mapped'

Traceback:
 1: .Call("R_initMethodDispatch", as.environment(where), PACKAGE = "methods")
 2: initMethodDispatch(where)
 3: ..First.lib(libname, pkgName, env)
 4: fun(...)
 5: doTryCatch(return(expr), name, parentenv, handler)
 6: tryCatchOne(expr, names, parentenv, handlers[[1L]])
 7: tryCatchList(expr, classes, parentenv, handlers)
 8: tryCatch(fun(...), error = identity)
 9: runHook(".onLoad", package, env, package.lib, package)
10: loadNamespace(package, c(which.lib.loc, lib.loc), keep.source = keep.source)
11: doTryCatch(return(expr), name, parentenv, handler)
12: tryCatchOne(expr, names, parentenv, handlers[[1L]])
13: tryCatchList(expr, classes, parentenv, handlers)
14: tryCatch(expr, error = function(e) {    call <- conditionCall(e)    if (!is.null(call)) {        if (identical(call[[1L]], quote(doTryCatch)))             call <- sys.call(-4L)        dcall <- deparse(call)[1L]        prefix <- paste("Error in", dcall, ": ")        LONG <- 75L        msg <- conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")        if (is.na(w))             w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],                 type = "b")        if (w > LONG)             prefix <- paste(prefix, "\n  ", sep = "")    }    else prefix <- "Error : "    msg <- paste(prefix, conditionMessage(e), "\n", sep = "")    .Internal(seterrmessage(msg[1L]))    if (!silent && identical(getOption("show.error.messages"),         TRUE)) {        cat(msg, file = stderr())        .Internal(printDeferredWarnings())    }    invisible(structure(msg, class = "try-error"))})
15: try({    ns <- loadNamespace(package, c(which.lib.loc, lib.loc), keep.source = keep.source)    dataPath <- file.path(which.lib.loc, package, "data")    env <- attachNamespace(ns, pos = pos, dataPath = dataPath,         deps)})
16: library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,     warn.conflicts = warn.conflicts, quietly = quietly, keep.source = keep.source)
17: doTryCatch(return(expr), name, parentenv, handler)
18: tryCatchOne(expr, names, parentenv, handlers[[1L]])
19: tryCatchList(expr, classes, parentenv, handlers)
20: tryCatch(library(package, lib.loc = lib.loc, character.only = TRUE,     logical.return = TRUE, warn.conflicts = warn.conflicts, quietly = quietly,     keep.source = keep.source), error = function(e) e)
21: require("methods", quietly = TRUE, warn.conflicts = FALSE, character.only = TRUE)
22: .OptRequireMethods()

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace
Selection: 

From smckinney at bccrc.ca  Mon Aug 15 20:24:17 2011
From: smckinney at bccrc.ca (Steven McKinney)
Date: Mon, 15 Aug 2011 11:24:17 -0700
Subject: [R-SIG-Mac] Install multiple versions of R on Mac
In-Reply-To: <2787_1313415352_1313415352_84E1B5F8-8D5E-40D6-B580-A15D48664370@web.de>
References: <2787_1313415352_1313415352_84E1B5F8-8D5E-40D6-B580-A15D48664370@web.de>
Message-ID: <DCE81E14EB74504B971DAD4D2DB0356B08927807A3@crcmail4.BCCRC.CA>

Hi Marius,

What I have found is that RSwitch does not work if you only have one instance of R.app in
your Applications folder.  RSwitch does not modify R.app in the Applications folder, so after
you switched back to R-2.13.? with RSwitch, the R-2.13 startup is interacting with the
R-2.14 R.app in some fashion that Simon Urbanek might be able to explain but which I
have not yet worked out.

When I needed both R-2.12.2 and R-2.13.1, I made a folder
called "temp" in Applications, then copied the R.app from R-GUI-5732-2.12-leopard_Leopard64.dmg 
to Applications/temp and renamed it R-2.12.2_64bit.app, then moved that to the
Applications folder.  Next I copied the R.app from R-GUI-5885-2.13-leopard-Leopard64.dmg
to Applications/temp, renamed it to R-2.13.1_64bit.app, then moved it to the Applications
folder.  Now after I use RSwitch, if I run the appropriate R-<version>.app the Mac R GUI
initialization and startup works.  See e.g. 

http://www.mail-archive.com/r-sig-mac at r-project.org/msg00559.html

R-GUI-5732-2.12-leopard_Leopard64.dmg and the like available from 
http://r.research.att.com/

Your R.app in the Applications directory is the one from the last R you installed,
which appears to be the current development version.  So rename R.app to
something such as R-2.14.0_devel_64bit.app.  Then reinstall R-2.13.1 or use the strategy
I outlined above, and get the R-2.13.1 R.app renamed to R-2.13.1_64bit.app

Then after you use RSwitch, run the appropriate R-<version>.app


HTH 

Steven McKinney
________________________________________
From: r-sig-mac-bounces at r-project.org [r-sig-mac-bounces at r-project.org] On Behalf Of Marius Hofert [m_hofert at web.de]
Sent: August 15, 2011 6:35 AM
To: Help R
Subject: [R-SIG-Mac] Install multiple versions of R on Mac

Dear expeRts,

I would like to run R 2.13 and R 2.14 on a MacBook Pro (2.53 GHz Intel Core 2 Duo, 4 GB 1067 MHz DDR3) with Mac OS X 10.6.8. I installed Rswitch to switch between the two versions. On installing the second version (2.14), I executed
sudo pkgutil --forget org.r-project.R.Leopard.fw.pkg
in the Terminal as suggested on the installation process. Then I finished the installation. 2.14 runs great (64-bit), but when I switch to R 2.13 and start R, I get the output below.

What did I do wrong?

Note: I previously had only R 2.14 running. Then I installed R 2.13 (because some things are not available for 2.14). On the installation I missed the fact that R 2.14 is not available anymore [I missed the note on using pkgutil...], so I only had R 2.13 (also running fine). After that I downloaded R 2.14 and executed the pkgutil command during the installation process. I'm not sure if this matters (I guess not, since that's probably the more typical way [first having 2.13 installed and then 2.14 :-)]).

Cheers,

Marius


 *** caught segfault ***
address 0x54d8, cause 'memory not mapped'

Traceback:
 1: .Call("R_initMethodDispatch", as.environment(where), PACKAGE = "methods")
 2: initMethodDispatch(where)
 3: ..First.lib(libname, pkgName, env)
 4: fun(...)
 5: doTryCatch(return(expr), name, parentenv, handler)
 6: tryCatchOne(expr, names, parentenv, handlers[[1L]])
 7: tryCatchList(expr, classes, parentenv, handlers)
 8: tryCatch(fun(...), error = identity)
 9: runHook(".onLoad", package, env, package.lib, package)
10: loadNamespace(package, c(which.lib.loc, lib.loc), keep.source = keep.source)
11: doTryCatch(return(expr), name, parentenv, handler)
12: tryCatchOne(expr, names, parentenv, handlers[[1L]])
13: tryCatchList(expr, classes, parentenv, handlers)
14: tryCatch(expr, error = function(e) {    call <- conditionCall(e)    if (!is.null(call)) {        if (identical(call[[1L]], quote(doTryCatch)))             call <- sys.call(-4L)        dcall <- deparse(call)[1L]        prefix <- paste("Error in", dcall, ": ")        LONG <- 75L        msg <- conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")        if (is.na(w))             w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],                 type = "b")        if (w > LONG)             prefix <- paste(prefix, "\n  ", sep = "")    }    else prefix <- "Error : "    msg <- paste(prefix, conditionMessage(e), "\n", sep = "")    .Internal(seterrmessage(msg[1L]))    if (!silent && identical(getOption("show.error.messages"),         TRUE)) {        cat(msg, file = stderr())        .Internal(printDeferredWarnings())    }    invisible(structure(msg, class = "try-error"))})
15: try({    ns <- loadNamespace(package, c(which.lib.loc, lib.loc), keep.source = keep.source)    dataPath <- file.path(which.lib.loc, package, "data")    env <- attachNamespace(ns, pos = pos, dataPath = dataPath,         deps)})
16: library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,     warn.conflicts = warn.conflicts, quietly = quietly, keep.source = keep.source)
17: doTryCatch(return(expr), name, parentenv, handler)
18: tryCatchOne(expr, names, parentenv, handlers[[1L]])
19: tryCatchList(expr, classes, parentenv, handlers)
20: tryCatch(library(package, lib.loc = lib.loc, character.only = TRUE,     logical.return = TRUE, warn.conflicts = warn.conflicts, quietly = quietly,     keep.source = keep.source), error = function(e) e)
21: require("methods", quietly = TRUE, warn.conflicts = FALSE, character.only = TRUE)
22: .OptRequireMethods()

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace
Selection:
_______________________________________________
R-SIG-Mac mailing list
R-SIG-Mac at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From chabotd at globetrotter.net  Mon Aug 15 20:42:26 2011
From: chabotd at globetrotter.net (Denis Chabot)
Date: Mon, 15 Aug 2011 14:42:26 -0400
Subject: [R-SIG-Mac] accented vowels
In-Reply-To: <mailman.282.1313131019.4449.r-sig-mac@r-project.org>
References: <mailman.282.1313131019.4449.r-sig-mac@r-project.org>
Message-ID: <8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>

Hi,

I usually do not give second thought to accented vowels and R handles everything fine thanks to UTF8 being used in my R scripts. But today I have a problem. Accented vowels do not behave properly when they were imported into R using list.files.

Maybe this is because  OS X (I'm using 10.6.8) still uses MacRoman for file names, though visually the names seem to have been read correctly into R.

An example is better than words:

sessionInfo()
R version 2.13.1 (2011-07-08)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] fr_CA.UTF-8/fr_CA.UTF-8/C/C/fr_CA.UTF-8/fr_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     


This does not cause problem:
a = c("1_MO2 crevettes po2crit.Rda", "1_MO2 soles S?te sda.Rda", "1_MO2 turbots po2crit.Rda"); a
[1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"    "1_MO2 turbots po2crit.Rda"  

a2 = gsub(" S?te", "S", a); a2
[1] "1_MO2 crevettes po2crit.Rda" "1_MO2 solesS sda.Rda"        "1_MO2 turbots po2crit.Rda"  


but if instead of creating the vector within the R script, I read it as a series of file names, the substitution does not work. I am sorry that I cannot make this a reproducible example as it requires the 3 files to exist on your computer, but you could create 3 dummy files having the same names in the directory of your choice.

don = file.path("donn?es/")
b = list.files(path = don, pattern = "1_MO2"); b
[1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"  

b2 = gsub(" S?te", "S",  b); b2  
[1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"  

I am puzzled and also "stuck". For now I'll modify the file name, but I need to be able to handle such names at some point.

Any advice?

thanks in advance,

Denis


From smckinney at bccrc.ca  Mon Aug 15 21:58:45 2011
From: smckinney at bccrc.ca (Steven McKinney)
Date: Mon, 15 Aug 2011 12:58:45 -0700
Subject: [R-SIG-Mac] Install multiple versions of R on Mac
In-Reply-To: <CA14920F-F696-4786-9CE8-40C3DB5310ED@web.de>
References: <2787_1313415352_1313415352_84E1B5F8-8D5E-40D6-B580-A15D48664370@web.de>
	<DCE81E14EB74504B971DAD4D2DB0356B08927807A3@crcmail4.BCCRC.CA>
	<CA14920F-F696-4786-9CE8-40C3DB5310ED@web.de>
Message-ID: <DCE81E14EB74504B971DAD4D2DB0356B0892A706EA@crcmail4.BCCRC.CA>



> -----Original Message-----
> From: m_hofert at web.de [mailto:m_hofert at web.de]
> Sent: August-15-11 12:22 PM
> To: Steven McKinney
> Subject: Re: [R-SIG-Mac] Install multiple versions of R on Mac
> 
> Hi Steven,
> 
> thanks a lot for your help. Below are my comments.
> 
> Cheers,
> 
> Marius
> 
> On 2011-08-15, at 20:24 , Steven McKinney wrote:
> 
> > Hi Marius,
> >
> > What I have found is that RSwitch does not work if you only have one instance of R.app in
> > your Applications folder.  RSwitch does not modify R.app in the Applications folder, so after
> > you switched back to R-2.13.? with RSwitch, the R-2.13 startup is interacting with the
> > R-2.14 R.app in some fashion that Simon Urbanek might be able to explain but which I
> > have not yet worked out.
> >
> > When I needed both R-2.12.2 and R-2.13.1, I made a folder
> > called "temp" in Applications, then copied the R.app from R-GUI-5732-2.12-leopard_Leopard64.dmg
> > to Applications/temp and renamed it R-2.12.2_64bit.app, then moved that to the
> > Applications folder.  Next I copied the R.app from R-GUI-5885-2.13-leopard-Leopard64.dmg
> > to Applications/temp, renamed it to R-2.13.1_64bit.app, then moved it to the Applications
> > folder.  Now after I use RSwitch, if I run the appropriate R-<version>.app the Mac R GUI
> > initialization and startup works.  See e.g.
> >
> > http://www.mail-archive.com/r-sig-mac at r-project.org/msg00559.html
> >
> > R-GUI-5732-2.12-leopard_Leopard64.dmg and the like available from
> > http://r.research.att.com/
> >
> > Your R.app in the Applications directory is the one from the last R you installed,
> > which appears to be the current development version.  So rename R.app to
> > something such as R-2.14.0_devel_64bit.app.
> 
> (1) I renamed it to R_2.14_devel_32bit since R.app is the one for 32bit; the R64.app I renamed to
> R_2.14_devel_64bit. Afterwards, I only had R_2.14_devel_32bit.app and R_2.14_devel_64bit.app in the
> Applications folder.
> (2) I then reinstalled R 2.13 (from CRAN) and executed "sudo pkgutil --forget org.r-
> project.R.Leopard.fw.pkg"
> (3) Then, I got another R.app and R64bit.app in the Applications folder (of course)
> (4) I renamed them as R_2.13_32bit and R_2.13_64bit, respectively; so I had four R*.apps in the
> Applications folder
> (5) Then I started Rswitch. It said: 2.13.1 for version 2.13 and <incomplete installation> for 2.14.
> Nevertheless, I chose 2.14 and started R_2.14_devel_64bit.app. It crashed on startup.
> (6) I then realized that this pkgutil command only works for *earlier* versions than the one installed
> (7) So I then installed R 2.14 again (and also again using the pkgutil command)
> (8) If I now start RSwitch, I get: 2.13.1 for version 2.13 and 2.14.0 for version 2.14; looks good,
> right?
> 
> Okay, here is what I figured out:
> - (8) tells me that both versions are correctly installed.
> - If I start one of the versions with its corresponding *.app and RSwitch is set to this version, then
> this version starts fine
> - However, if I start one of the version (with its *.app) with the other version being set in RSwitch,
> then I get this messy segfault output
> 
> So, it seems crucial to use the correct version on startup. It would be nice if RSwitch could select
> this.

Yes, it would be great if RSwitch could be set up in such a 
fashion - I don't know if Simon Urbanek has any plans to do 
so.  I think at this point RSwitch is meant to switch versions 
properly for unix shell command line invocation, but not 
invocation via R.app in the Applications directory (unless you 
manually set up and select the properly renamed R-<version>.app 
as above).

Simon Urbanek is clear about RSwitch:  "The following binaries 
are not maintained or supported by R-core and are provided 
without any guarantee and for convenience only" so use carefully.

> 
> Cheers & many thanks again.
> 
> Marius
> 
> 
> > Then reinstall R-2.13.1 or use the strategy
> > I outlined above, and get the R-2.13.1 R.app renamed to R-2.13.1_64bit.app
> >
> > Then after you use RSwitch, run the appropriate R-<version>.app
> >
> >
> > HTH
> >
> > Steven McKinney
> > ________________________________________
> > From: r-sig-mac-bounces at r-project.org [r-sig-mac-bounces at r-project.org] On Behalf Of Marius Hofert
> [m_hofert at web.de]
> > Sent: August 15, 2011 6:35 AM
> > To: Help R
> > Subject: [R-SIG-Mac] Install multiple versions of R on Mac
> >
> > Dear expeRts,
> >
> > I would like to run R 2.13 and R 2.14 on a MacBook Pro (2.53 GHz Intel Core 2 Duo, 4 GB 1067 MHz
> DDR3) with Mac OS X 10.6.8. I installed Rswitch to switch between the two versions. On installing the
> second version (2.14), I executed
> > sudo pkgutil --forget org.r-project.R.Leopard.fw.pkg
> > in the Terminal as suggested on the installation process. Then I finished the installation. 2.14
> runs great (64-bit), but when I switch to R 2.13 and start R, I get the output below.
> >
> > What did I do wrong?
> >
> > Note: I previously had only R 2.14 running. Then I installed R 2.13 (because some things are not
> available for 2.14). On the installation I missed the fact that R 2.14 is not available anymore [I
> missed the note on using pkgutil...], so I only had R 2.13 (also running fine). After that I
> downloaded R 2.14 and executed the pkgutil command during the installation process. I'm not sure if
> this matters (I guess not, since that's probably the more typical way [first having 2.13 installed and
> then 2.14 :-)]).
> >
> > Cheers,
> >
> > Marius
> >
> >
> > *** caught segfault ***
> > address 0x54d8, cause 'memory not mapped'
> >
> > Traceback:
> > 1: .Call("R_initMethodDispatch", as.environment(where), PACKAGE = "methods")
> > 2: initMethodDispatch(where)
> > 3: ..First.lib(libname, pkgName, env)
> > 4: fun(...)
> > 5: doTryCatch(return(expr), name, parentenv, handler)
> > 6: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> > 7: tryCatchList(expr, classes, parentenv, handlers)
> > 8: tryCatch(fun(...), error = identity)
> > 9: runHook(".onLoad", package, env, package.lib, package)
> > 10: loadNamespace(package, c(which.lib.loc, lib.loc), keep.source = keep.source)
> > 11: doTryCatch(return(expr), name, parentenv, handler)
> > 12: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> > 13: tryCatchList(expr, classes, parentenv, handlers)
> > 14: tryCatch(expr, error = function(e) {    call <- conditionCall(e)    if (!is.null(call)) {
> if (identical(call[[1L]], quote(doTryCatch)))             call <- sys.call(-4L)        dcall <-
> deparse(call)[1L]        prefix <- paste("Error in", dcall, ": ")        LONG <- 75L        msg <-
> conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <- 14L + nchar(dcall, type = "w")
> + nchar(sm[1L], type = "w")        if (is.na(w))             w <- 14L + nchar(dcall, type = "b") +
> nchar(sm[1L],                 type = "b")        if (w > LONG)             prefix <- paste(prefix, "\n
> ", sep = "")    }    else prefix <- "Error : "    msg <- paste(prefix, conditionMessage(e), "\n", sep
> = "")    .Internal(seterrmessage(msg[1L]))    if (!silent &&
> identical(getOption("show.error.messages"),         TRUE)) {        cat(msg, file = stderr())
> .Internal(printDeferredWarnings())    }    invisible(structure(msg, class = "try-error"))})
> > 15: try({    ns <- loadNamespace(package, c(which.lib.loc, lib.loc), keep.source = keep.source)
> dataPath <- file.path(which.lib.loc, package, "data")    env <- attachNamespace(ns, pos = pos,
> dataPath = dataPath,         deps)})
> > 16: library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,
> warn.conflicts = warn.conflicts, quietly = quietly, keep.source = keep.source)
> > 17: doTryCatch(return(expr), name, parentenv, handler)
> > 18: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> > 19: tryCatchList(expr, classes, parentenv, handlers)
> > 20: tryCatch(library(package, lib.loc = lib.loc, character.only = TRUE,     logical.return = TRUE,
> warn.conflicts = warn.conflicts, quietly = quietly,     keep.source = keep.source), error =
> function(e) e)
> > 21: require("methods", quietly = TRUE, warn.conflicts = FALSE, character.only = TRUE)
> > 22: .OptRequireMethods()
> >
> > Possible actions:
> > 1: abort (with core dump, if enabled)
> > 2: normal R exit
> > 3: exit R without saving workspace
> > 4: exit R saving workspace
> > Selection:
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From murdoch.duncan at gmail.com  Tue Aug 16 01:06:29 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 15 Aug 2011 19:06:29 -0400
Subject: [R-SIG-Mac] accented vowels
In-Reply-To: <8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>
References: <mailman.282.1313131019.4449.r-sig-mac@r-project.org>
	<8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>
Message-ID: <4E49A675.20905@gmail.com>

On 11-08-15 2:42 PM, Denis Chabot wrote:
> Hi,
>
> I usually do not give second thought to accented vowels and R handles everything fine thanks to UTF8 being used in my R scripts. But today I have a problem. Accented vowels do not behave properly when they were imported into R using list.files.
>
> Maybe this is because  OS X (I'm using 10.6.8) still uses MacRoman for file names, though visually the names seem to have been read correctly into R.
>
> An example is better than words:
>
> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] fr_CA.UTF-8/fr_CA.UTF-8/C/C/fr_CA.UTF-8/fr_CA.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>
> This does not cause problem:
> a = c("1_MO2 crevettes po2crit.Rda", "1_MO2 soles S?te sda.Rda", "1_MO2 turbots po2crit.Rda"); a
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"    "1_MO2 turbots po2crit.Rda"
>
> a2 = gsub(" S?te", "S", a); a2
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 solesS sda.Rda"        "1_MO2 turbots po2crit.Rda"
>
>
> but if instead of creating the vector within the R script, I read it as a series of file names, the substitution does not work. I am sorry that I cannot make this a reproducible example as it requires the 3 files to exist on your computer, but you could create 3 dummy files having the same names in the directory of your choice.
>
> don = file.path("donn?es/")
> b = list.files(path = don, pattern = "1_MO2"); b
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>
> b2 = gsub(" S?te", "S",  b); b2
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>
> I am puzzled and also "stuck". For now I'll modify the file name, but I need to be able to handle such names at some point.
>
> Any advice?


Possibly your system really is using MacRoman or some other local 
encoding; in that case, iconv(x, "", "UTF-8") should convert from the 
local encoding to UTF-8.

I think declaring everything to be UTF8 may be sufficient.  When I use 
list.files(), I see the encoding listed as "unknown", but

x <- list.files()
Encoding(x) <- "UTF-8"

works.  However, the iconv() method should be safer.

Duncan Murdoch


From chabotd at globetrotter.net  Tue Aug 16 01:48:38 2011
From: chabotd at globetrotter.net (Denis Chabot)
Date: Mon, 15 Aug 2011 19:48:38 -0400
Subject: [R-SIG-Mac] accented vowels
In-Reply-To: <4E49A675.20905@gmail.com>
References: <mailman.282.1313131019.4449.r-sig-mac@r-project.org>
	<8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>
	<4E49A675.20905@gmail.com>
Message-ID: <E8B2E4D4-EAEE-4794-8823-528D7EDFEAB4@globetrotter.net>


Le 2011-08-15 ? 19:06, Duncan Murdoch a ?crit :

> On 11-08-15 2:42 PM, Denis Chabot wrote:
>> Hi,
>> 
>> I usually do not give second thought to accented vowels and R handles everything fine thanks to UTF8 being used in my R scripts. But today I have a problem. Accented vowels do not behave properly when they were imported into R using list.files.
>> 
>> Maybe this is because  OS X (I'm using 10.6.8) still uses MacRoman for file names, though visually the names seem to have been read correctly into R.
>> 
>> An example is better than words:
>> 
>> sessionInfo()
>> R version 2.13.1 (2011-07-08)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>> 
>> locale:
>> [1] fr_CA.UTF-8/fr_CA.UTF-8/C/C/fr_CA.UTF-8/fr_CA.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> 
>> This does not cause problem:
>> a = c("1_MO2 crevettes po2crit.Rda", "1_MO2 soles S?te sda.Rda", "1_MO2 turbots po2crit.Rda"); a
>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"    "1_MO2 turbots po2crit.Rda"
>> 
>> a2 = gsub(" S?te", "S", a); a2
>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 solesS sda.Rda"        "1_MO2 turbots po2crit.Rda"
>> 
>> 
>> but if instead of creating the vector within the R script, I read it as a series of file names, the substitution does not work. I am sorry that I cannot make this a reproducible example as it requires the 3 files to exist on your computer, but you could create 3 dummy files having the same names in the directory of your choice.
>> 
>> don = file.path("donn?es/")
>> b = list.files(path = don, pattern = "1_MO2"); b
>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>> 
>> b2 = gsub(" S?te", "S",  b); b2
>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>> 
>> I am puzzled and also "stuck". For now I'll modify the file name, but I need to be able to handle such names at some point.
>> 
>> Any advice?
> 
> 
> Possibly your system really is using MacRoman or some other local encoding; in that case, iconv(x, "", "UTF-8") should convert from the local encoding to UTF-8.
> 
> I think declaring everything to be UTF8 may be sufficient.  When I use list.files(), I see the encoding listed as "unknown", but
> 
> x <- list.files()
> Encoding(x) <- "UTF-8"
> 
> works.  However, the iconv() method should be safer.
> 
> Duncan Murdoch

Hi Duncan, 

iconv() confirmed what I suspected: there was no problem with the encoding of the result of list.files, and if there had been one, the "?" would not have looked like a "?". Therefore, I got nonsense when treating this "?" as MacRoman to be converted into UTF-8:

iconv(b, from="MacRoman", to="UTF-8")
[1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles Se??te sda.Rda"  "1_MO2 turbots po2crit.Rda"  

It is not clear however that R considered b to be UTF=8:
Encoding(b)
[1] "unknown" "unknown" "unknown"

so I followed your suggestion:

Encoding(b) <- "UTF-8"
Encoding(b)
[1] "unknown" "UTF-8"   "unknown"

but gsub still did not work:
b2 = gsub(" S?te", "S",  b); b2  
[1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"  

I do not know why gsub worked with example "a" but not "b" in the example shown in my original message. Strange and frustrating.

Denis

From murdoch.duncan at gmail.com  Tue Aug 16 04:24:17 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 15 Aug 2011 22:24:17 -0400
Subject: [R-SIG-Mac] accented vowels
In-Reply-To: <E8B2E4D4-EAEE-4794-8823-528D7EDFEAB4@globetrotter.net>
References: <mailman.282.1313131019.4449.r-sig-mac@r-project.org>
	<8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>
	<4E49A675.20905@gmail.com>
	<E8B2E4D4-EAEE-4794-8823-528D7EDFEAB4@globetrotter.net>
Message-ID: <4E49D4D1.2000501@gmail.com>

On 11-08-15 7:48 PM, Denis Chabot wrote:
>
> Le 2011-08-15 ? 19:06, Duncan Murdoch a ?crit :
>
>> On 11-08-15 2:42 PM, Denis Chabot wrote:
>>> Hi,
>>>
>>> I usually do not give second thought to accented vowels and R handles everything fine thanks to UTF8 being used in my R scripts. But today I have a problem. Accented vowels do not behave properly when they were imported into R using list.files.
>>>
>>> Maybe this is because  OS X (I'm using 10.6.8) still uses MacRoman for file names, though visually the names seem to have been read correctly into R.
>>>
>>> An example is better than words:
>>>
>>> sessionInfo()
>>> R version 2.13.1 (2011-07-08)
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>> locale:
>>> [1] fr_CA.UTF-8/fr_CA.UTF-8/C/C/fr_CA.UTF-8/fr_CA.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>> This does not cause problem:
>>> a = c("1_MO2 crevettes po2crit.Rda", "1_MO2 soles S?te sda.Rda", "1_MO2 turbots po2crit.Rda"); a
>>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"    "1_MO2 turbots po2crit.Rda"
>>>
>>> a2 = gsub(" S?te", "S", a); a2
>>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 solesS sda.Rda"        "1_MO2 turbots po2crit.Rda"
>>>
>>>
>>> but if instead of creating the vector within the R script, I read it as a series of file names, the substitution does not work. I am sorry that I cannot make this a reproducible example as it requires the 3 files to exist on your computer, but you could create 3 dummy files having the same names in the directory of your choice.
>>>
>>> don = file.path("donn?es/")
>>> b = list.files(path = don, pattern = "1_MO2"); b
>>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>>>
>>> b2 = gsub(" S?te", "S",  b); b2
>>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>>>
>>> I am puzzled and also "stuck". For now I'll modify the file name, but I need to be able to handle such names at some point.
>>>
>>> Any advice?
>>
>>
>> Possibly your system really is using MacRoman or some other local encoding; in that case, iconv(x, "", "UTF-8") should convert from the local encoding to UTF-8.
>>
>> I think declaring everything to be UTF8 may be sufficient.  When I use list.files(), I see the encoding listed as "unknown", but
>>
>> x<- list.files()
>> Encoding(x)<- "UTF-8"
>>
>> works.  However, the iconv() method should be safer.
>>
>> Duncan Murdoch
>
> Hi Duncan,
>
> iconv() confirmed what I suspected: there was no problem with the encoding of the result of list.files, and if there had been one, the "?" would not have looked like a "?". Therefore, I got nonsense when treating this "?" as MacRoman to be converted into UTF-8:
>
> iconv(b, from="MacRoman", to="UTF-8")
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles Se??te sda.Rda"  "1_MO2 turbots po2crit.Rda"
>
> It is not clear however that R considered b to be UTF=8:
> Encoding(b)
> [1] "unknown" "unknown" "unknown"
>
> so I followed your suggestion:
>
> Encoding(b)<- "UTF-8"
> Encoding(b)
> [1] "unknown" "UTF-8"   "unknown"
>
> but gsub still did not work:
> b2 = gsub(" S?te", "S",  b); b2
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>
> I do not know why gsub worked with example "a" but not "b" in the example shown in my original message. Strange and frustrating.

Unicode sometimes gives different ways to encode what is rendered as the 
same character (e.g. letter + accent versus accented letter).  I think 
(see below) the OS uses one convention, but R chooses the other when it 
parses your text.

Cut and paste did just work for me, in a version of R 2.13.0 Patched 
which predates 2.13.1 by a few weeks; I'm not up to date on my Mac:


 > x <- list.files()
 > x
[1] "1_MO2 soles Se?te sda.Rda"
 > gsub("Se?te", "XXXX", x)
[1] "1_MO2 soles XXXX sda.Rda"



In the second line, I didn't try to type the pattern containing Se?te, I 
just cut and pasted it from the printed version of x.

One other possibility (and perhaps it's the best one, if your 
substitutions are all so simple) is to use the useBytes=TRUE option to 
gsub.  You can use charToRaw to see the bytes in a string, to make sure 
they are what you expect.

When I do that, I see that the e? really is handled differently in the 
two cases:

 > charToRaw("Se?te") # cut and paste from list.files() output
[1] 53 65 cc 80 74 65
 > charToRaw("S?te") # entered on the keyboard
[1] 53 c3 a8 74 65

So your solution is ugly:  you'll need to code all your substitutions 
twice (or more!) to handle all the possible ways the same letter could 
be encoded.  Or maybe iconv() or some other function has an option to 
normalize the encoding.  (I've just read some more about the issue in 
http://en.wikipedia.org/wiki/Unicode_equivalence; normalization is what 
you want to do, but I don't know how to do it.)

Duncan Murdoch


From simon.urbanek at r-project.org  Tue Aug 16 09:15:03 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 16 Aug 2011 08:15:03 +0100
Subject: [R-SIG-Mac] Install multiple versions of R on Mac
In-Reply-To: <DCE81E14EB74504B971DAD4D2DB0356B08927807A3@crcmail4.BCCRC.CA>
References: <2787_1313415352_1313415352_84E1B5F8-8D5E-40D6-B580-A15D48664370@web.de>
	<DCE81E14EB74504B971DAD4D2DB0356B08927807A3@crcmail4.BCCRC.CA>
Message-ID: <B911A884-AB88-4D7D-9AB6-15F710009754@r-project.org>


On Aug 15, 2011, at 7:24 PM, Steven McKinney wrote:

> Hi Marius,
> 
> What I have found is that RSwitch does not work if you only have one instance of R.app in
> your Applications folder.  RSwitch does not modify R.app in the Applications folder, so after
> you switched back to R-2.13.? with RSwitch, the R-2.13 startup is interacting with the
> R-2.14 R.app in some fashion that Simon Urbanek might be able to explain but which I
> have not yet worked out.
> 

R.app is always tied to a particular R version, because it's compiled against R (the path to libR.dylib contains the version). So you can only use R.app with the version of R it was compiled against. RSwitch only makes one of the other frameworks "Current", it has no effect on the R.apps on your machine.

As Steven pointed out you have to move/copy your R.app/R64.app out of the way to keep them separate for each R version. Alternatively you can also download them separately from the R.research.att.com pages. It doesn't matter how you name them or where you put them. The installation process will keep your old R.apps if they are not in Applications (which is not standard on Mac OS X but very useful for having multiple R versions).

Cheers,
Simon


> When I needed both R-2.12.2 and R-2.13.1, I made a folder
> called "temp" in Applications, then copied the R.app from R-GUI-5732-2.12-leopard_Leopard64.dmg 
> to Applications/temp and renamed it R-2.12.2_64bit.app, then moved that to the
> Applications folder.  Next I copied the R.app from R-GUI-5885-2.13-leopard-Leopard64.dmg
> to Applications/temp, renamed it to R-2.13.1_64bit.app, then moved it to the Applications
> folder.  Now after I use RSwitch, if I run the appropriate R-<version>.app the Mac R GUI
> initialization and startup works.  See e.g. 
> 
> http://www.mail-archive.com/r-sig-mac at r-project.org/msg00559.html
> 
> R-GUI-5732-2.12-leopard_Leopard64.dmg and the like available from 
> http://r.research.att.com/
> 
> Your R.app in the Applications directory is the one from the last R you installed,
> which appears to be the current development version.  So rename R.app to
> something such as R-2.14.0_devel_64bit.app.  Then reinstall R-2.13.1 or use the strategy
> I outlined above, and get the R-2.13.1 R.app renamed to R-2.13.1_64bit.app
> 
> Then after you use RSwitch, run the appropriate R-<version>.app
> 
> 
> HTH 
> 
> Steven McKinney
> ________________________________________
> From: r-sig-mac-bounces at r-project.org [r-sig-mac-bounces at r-project.org] On Behalf Of Marius Hofert [m_hofert at web.de]
> Sent: August 15, 2011 6:35 AM
> To: Help R
> Subject: [R-SIG-Mac] Install multiple versions of R on Mac
> 
> Dear expeRts,
> 
> I would like to run R 2.13 and R 2.14 on a MacBook Pro (2.53 GHz Intel Core 2 Duo, 4 GB 1067 MHz DDR3) with Mac OS X 10.6.8. I installed Rswitch to switch between the two versions. On installing the second version (2.14), I executed
> sudo pkgutil --forget org.r-project.R.Leopard.fw.pkg
> in the Terminal as suggested on the installation process. Then I finished the installation. 2.14 runs great (64-bit), but when I switch to R 2.13 and start R, I get the output below.
> 
> What did I do wrong?
> 
> Note: I previously had only R 2.14 running. Then I installed R 2.13 (because some things are not available for 2.14). On the installation I missed the fact that R 2.14 is not available anymore [I missed the note on using pkgutil...], so I only had R 2.13 (also running fine). After that I downloaded R 2.14 and executed the pkgutil command during the installation process. I'm not sure if this matters (I guess not, since that's probably the more typical way [first having 2.13 installed and then 2.14 :-)]).
> 
> Cheers,
> 
> Marius
> 
> 
> *** caught segfault ***
> address 0x54d8, cause 'memory not mapped'
> 
> Traceback:
> 1: .Call("R_initMethodDispatch", as.environment(where), PACKAGE = "methods")
> 2: initMethodDispatch(where)
> 3: ..First.lib(libname, pkgName, env)
> 4: fun(...)
> 5: doTryCatch(return(expr), name, parentenv, handler)
> 6: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 7: tryCatchList(expr, classes, parentenv, handlers)
> 8: tryCatch(fun(...), error = identity)
> 9: runHook(".onLoad", package, env, package.lib, package)
> 10: loadNamespace(package, c(which.lib.loc, lib.loc), keep.source = keep.source)
> 11: doTryCatch(return(expr), name, parentenv, handler)
> 12: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 13: tryCatchList(expr, classes, parentenv, handlers)
> 14: tryCatch(expr, error = function(e) {    call <- conditionCall(e)    if (!is.null(call)) {        if (identical(call[[1L]], quote(doTryCatch)))             call <- sys.call(-4L)        dcall <- deparse(call)[1L]        prefix <- paste("Error in", dcall, ": ")        LONG <- 75L        msg <- conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")        if (is.na(w))             w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],                 type = "b")        if (w > LONG)             prefix <- paste(prefix, "\n  ", sep = "")    }    else prefix <- "Error : "    msg <- paste(prefix, conditionMessage(e), "\n", sep = "")    .Internal(seterrmessage(msg[1L]))    if (!silent && identical(getOption("show.error.messages"),         TRUE)) {        cat(msg, file = stderr())        .Internal(printDeferredWarnings())    }    invisible(structure(msg, class = "try-error"))})
> 15: try({    ns <- loadNamespace(package, c(which.lib.loc, lib.loc), keep.source = keep.source)    dataPath <- file.path(which.lib.loc, package, "data")    env <- attachNamespace(ns, pos = pos, dataPath = dataPath,         deps)})
> 16: library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,     warn.conflicts = warn.conflicts, quietly = quietly, keep.source = keep.source)
> 17: doTryCatch(return(expr), name, parentenv, handler)
> 18: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 19: tryCatchList(expr, classes, parentenv, handlers)
> 20: tryCatch(library(package, lib.loc = lib.loc, character.only = TRUE,     logical.return = TRUE, warn.conflicts = warn.conflicts, quietly = quietly,     keep.source = keep.source), error = function(e) e)
> 21: require("methods", quietly = TRUE, warn.conflicts = FALSE, character.only = TRUE)
> 22: .OptRequireMethods()
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> Selection:
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 


From chabotd at globetrotter.net  Tue Aug 16 12:16:21 2011
From: chabotd at globetrotter.net (Denis Chabot)
Date: Tue, 16 Aug 2011 06:16:21 -0400
Subject: [R-SIG-Mac] accented vowels
In-Reply-To: <4E49D4D1.2000501@gmail.com>
References: <mailman.282.1313131019.4449.r-sig-mac@r-project.org>
	<8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>
	<4E49A675.20905@gmail.com>
	<E8B2E4D4-EAEE-4794-8823-528D7EDFEAB4@globetrotter.net>
	<4E49D4D1.2000501@gmail.com>
Message-ID: <D3B69037-F357-4CD5-9690-49E58AB398C1@globetrotter.net>


Le 2011-08-15 ? 22:24, Duncan Murdoch a ?crit :

> On 11-08-15 7:48 PM, Denis Chabot wrote:
>> 
>> Le 2011-08-15 ? 19:06, Duncan Murdoch a ?crit :
>> 
>>> On 11-08-15 2:42 PM, Denis Chabot wrote:
>>>> Hi,
>>>> 
>>>> I usually do not give second thought to accented vowels and R handles everything fine thanks to UTF8 being used in my R scripts. But today I have a problem. Accented vowels do not behave properly when they were imported into R using list.files.
>>>> 
>>>> Maybe this is because  OS X (I'm using 10.6.8) still uses MacRoman for file names, though visually the names seem to have been read correctly into R.
>>>> 
>>>> An example is better than words:
>>>> 
>>>> sessionInfo()
>>>> R version 2.13.1 (2011-07-08)
>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>> 
>>>> locale:
>>>> [1] fr_CA.UTF-8/fr_CA.UTF-8/C/C/fr_CA.UTF-8/fr_CA.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> 
>>>> This does not cause problem:
>>>> a = c("1_MO2 crevettes po2crit.Rda", "1_MO2 soles S?te sda.Rda", "1_MO2 turbots po2crit.Rda"); a
>>>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"    "1_MO2 turbots po2crit.Rda"
>>>> 
>>>> a2 = gsub(" S?te", "S", a); a2
>>>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 solesS sda.Rda"        "1_MO2 turbots po2crit.Rda"
>>>> 
>>>> 
>>>> but if instead of creating the vector within the R script, I read it as a series of file names, the substitution does not work. I am sorry that I cannot make this a reproducible example as it requires the 3 files to exist on your computer, but you could create 3 dummy files having the same names in the directory of your choice.
>>>> 
>>>> don = file.path("donn?es/")
>>>> b = list.files(path = don, pattern = "1_MO2"); b
>>>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>>>> 
>>>> b2 = gsub(" S?te", "S",  b); b2
>>>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>>>> 
>>>> I am puzzled and also "stuck". For now I'll modify the file name, but I need to be able to handle such names at some point.
>>>> 
>>>> Any advice?
>>> 
>>> 
>>> Possibly your system really is using MacRoman or some other local encoding; in that case, iconv(x, "", "UTF-8") should convert from the local encoding to UTF-8.
>>> 
>>> I think declaring everything to be UTF8 may be sufficient.  When I use list.files(), I see the encoding listed as "unknown", but
>>> 
>>> x<- list.files()
>>> Encoding(x)<- "UTF-8"
>>> 
>>> works.  However, the iconv() method should be safer.
>>> 
>>> Duncan Murdoch
>> 
>> Hi Duncan,
>> 
>> iconv() confirmed what I suspected: there was no problem with the encoding of the result of list.files, and if there had been one, the "?" would not have looked like a "?". Therefore, I got nonsense when treating this "?" as MacRoman to be converted into UTF-8:
>> 
>> iconv(b, from="MacRoman", to="UTF-8")
>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles Se??te sda.Rda"  "1_MO2 turbots po2crit.Rda"
>> 
>> It is not clear however that R considered b to be UTF=8:
>> Encoding(b)
>> [1] "unknown" "unknown" "unknown"
>> 
>> so I followed your suggestion:
>> 
>> Encoding(b)<- "UTF-8"
>> Encoding(b)
>> [1] "unknown" "UTF-8"   "unknown"
>> 
>> but gsub still did not work:
>> b2 = gsub(" S?te", "S",  b); b2
>> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"
>> 
>> I do not know why gsub worked with example "a" but not "b" in the example shown in my original message. Strange and frustrating.
> 
> Unicode sometimes gives different ways to encode what is rendered as the same character (e.g. letter + accent versus accented letter).  I think (see below) the OS uses one convention, but R chooses the other when it parses your text.
> 
> Cut and paste did just work for me, in a version of R 2.13.0 Patched which predates 2.13.1 by a few weeks; I'm not up to date on my Mac:
> 
> 
> > x <- list.files()
> > x
> [1] "1_MO2 soles S?te sda.Rda"
> > gsub("S?te", "XXXX", x)
> [1] "1_MO2 soles XXXX sda.Rda"
> 
> 
> 
> In the second line, I didn't try to type the pattern containing S?te, I just cut and pasted it from the printed version of x.
> 
> One other possibility (and perhaps it's the best one, if your substitutions are all so simple) is to use the useBytes=TRUE option to gsub.  You can use charToRaw to see the bytes in a string, to make sure they are what you expect.
> 
> When I do that, I see that the ? really is handled differently in the two cases:
> 
> > charToRaw("S?te") # cut and paste from list.files() output
> [1] 53 65 cc 80 74 65
> > charToRaw("S?te") # entered on the keyboard
> [1] 53 c3 a8 74 65
> 
> So your solution is ugly:  you'll need to code all your substitutions twice (or more!) to handle all the possible ways the same letter could be encoded.  Or maybe iconv() or some other function has an option to normalize the encoding.  (I've just read some more about the issue in http://en.wikipedia.org/wiki/Unicode_equivalence; normalization is what you want to do, but I don't know how to do it.)
> 
> Duncan Murdoch

Hi again Duncan,

the "Errors due to normalization differences" part of the article you referred to seems to confirm your suspicion. 

I can get this to work but it is messy:

S?tefileraw = charToRaw(substr(b[2],13,17))
S?tefile = rawToChar(S?tefileraw)

S?tekbraw = charToRaw(substr(a[2],13,16))
S?tekb = rawToChar(S?tekbraw)

c = b
c = gsub(S?tefile, S?tekb, c)
at this point, S?te has become the "keyboard" version and the rest of the script can work
c2 = gsub(" S?te", "S", c); c2
[1] "1_MO2 crevettes po2crit.Rda" "1_MO2 solesS sda.Rda"        "1_MO2 turbots po2crit.Rda"  

I'll keep accented vowels out of file names for this project whenever I'll have to use gsub on them!

Thanks again,

Denis

From chabotd at globetrotter.net  Tue Aug 16 14:07:18 2011
From: chabotd at globetrotter.net (Denis Chabot)
Date: Tue, 16 Aug 2011 08:07:18 -0400
Subject: [R-SIG-Mac] accented vowels
In-Reply-To: <4E49D4D1.2000501@gmail.com>
References: <mailman.282.1313131019.4449.r-sig-mac@r-project.org>
	<8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>
	<4E49A675.20905@gmail.com>
	<E8B2E4D4-EAEE-4794-8823-528D7EDFEAB4@globetrotter.net>
	<4E49D4D1.2000501@gmail.com>
Message-ID: <7B014BA5-1E22-443A-97C0-790720A555C5@globetrotter.net>

Duncan, I think I'll avoid the problem in another manner, leaving me free to choose whatever file names I want or need.

The reason I used gsub on file names is that I want to collate a series of data.frames using rbind (or rbind.fill). For this, I need to know the names of the data.frames I just read and this depends on the files that were in the directory I choose to read.

I therefore use a bunch of gsub to extract data.frame names from file names (file names were constructed to make this possible).

But I did this only because I did not know how to find the name of a data.frame after it is loaded. I searched on the net to see if this was feasible. I did not find a way to do this (short of doing a ls() before and after each load to see what has changed) but I found something close, thanks to you actually, in an answer you gave to another user!

> Aug 12, 2011; 3:23pmRe: Getting data from an *.RData file into a data.frame object.
> On 12/08/2011 3:12 PM, Ed Heaton wrote:
> 
> > Hi, all. 
> > 
> > I'm new to R.  I've been a SAS programmer for 20 years. 
> > 
> > I seem to be having trouble with the most basic task - bringing a table in 
> > an *.RData file into a data.frame object. 
> > 
> > Here's how I created the *.RData file. 
> > 
> > library(RODBC) 
> > db<- odbcConnect("*******") 
> > df<- sqlQuery( 
> >      db 
> >    , "select * from schema.table where year(someDate)=2006" 
> > ) 
> > save( 
> >      df 
> >    , file="C:/Documents and Settings/userName/My Documents/table2006.RData" 
> > ) 
> > dim(df) 
> > remove(df) 
> > odbcClose(db) 
> > remove(db) 
> > detach("package:RODBC") 
> > 
> > Next, I moved that data file (table2006.RData) to another workstation - not 
> > at the client site. 
> > 
> > Now, I need to get that data file into a data.frame object.  I know this 
> > should be simple, but I can't seem to find out how to do that.  I tried the 
> > following.  First, after opening R without doing anything, RGui used 35,008 
> > KB of memory.  I submitted the following. 
> > 
> > >  debt2006<- load("T:/R.Data/table2006.RData") 
> > 
> > Memory used by RGui jumped to 191,512 KB.  So, it looks like the data 
> > loaded.  However, debt2005 is of type character instead of data.frame. 
> > 
> > >  ls() 
> > [1] "debt2005" 
> > >  class(debt2005) 
> > [1] "character" 
> > > 
> > 
> > Help, please.
> ... [show rest of quote]
> 
> save() and load() work with multiple objects, and the objects keep their 
> names.  So your object would be recreated as "df" after the load. 
> 
> If you just want to save the data from one object without its name, use 
> saveRDS() and readRDS(). 
> 
> Duncan Murdoch 

I'll use this in the current project to avoid the situation that led to my initial message. Many thanks!

Denis

From bhima.pandava at gmail.com  Wed Aug 17 09:15:03 2011
From: bhima.pandava at gmail.com (Bhima Pandava)
Date: Wed, 17 Aug 2011 09:15:03 +0200
Subject: [R-SIG-Mac] Help rJava and imaplib.
Message-ID: <4E4B6A77.9060701@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110817/73493123/attachment.pl>

From simon.urbanek at r-project.org  Wed Aug 17 09:33:03 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 17 Aug 2011 08:33:03 +0100
Subject: [R-SIG-Mac] Help rJava and imaplib.
In-Reply-To: <4E4B6A77.9060701@gmail.com>
References: <4E4B6A77.9060701@gmail.com>
Message-ID: <AEEA3943-28C1-4CD9-8863-B2EA1E2A6E2D@r-project.org>


On Aug 17, 2011, at 8:15 AM, Bhima Pandava wrote:

> I am trying to teach myself a little R and recently I found an entry 
> over at R-Bloggers & Expansed, on how to create social graphs from your 
> email 
> <http://expansed.com/2011/08/sna-visualising-an-email-box-with-r/>, that 
> interested me.
> 
> I am using Mac OS Lion, so I installed the R-2.13.1pkg and the R.app 
> R-2.13-patched.  The script requires the Network, rJython, and rJava 
> libraries, so I installed these as binaries.  Mac OS Lion does not come 
> with a Java Development Kit installed,


It does (it will be installed the first time you try to use it). You may want to give it a shot - using MacPorts may be your problem.

Cheers,
Simon


> so I installed one from Mac Ports 
> and then I also tried building it from source based on the 
> instructions.  I then registered the JDK with R using "sudo R CMD 
> javareconf".  The script fails when executed with the following error:
> 
> Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :
>   Traceback (most recent call last):
>   File "<string>", line 1, in <module>
>   File 
> "/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rJython/jython.jar/Lib/imaplib.py", 
> line 437, in fetch
>   File 
> "/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rJython/jython.jar/Lib/imaplib.py", 
> line 1055, in _simple_command
>   File 
> "/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rJython/jython.jar/Lib/imaplib.py", 
> line 892, in _command_complete
> imaplib.error: FETCH command error: BAD ['Could not parse command']
> 
> I have tried many, many different things but I simply can not work out 
> how to make this work.  As other people sound like they have run this, 
> it is a mystery to me.  One of the things I have tried was trying the 
> same thing in a virtual instance of Linux running on my Mac and that 
> segfaults.  Another is installing the rJava library as source, so that 
> it would be compiled on my machine.  This fails due to R expecting a 
> different framework version.  The error returned is:
> 
> checking whether JNI programs can be compiled... configure: error: 
> Cannot compile a simple JNI program. See config.log for details.
> 
> and checking the log I find:
> 
> Dyld Error Message:
>   Library not loaded: 
> /Library/Frameworks/R.framework/Versions/2.12/Resources/lib/libR.dylib
>   Referenced from: /Applications/R.app/Contents/MacOS/R
>   Reason: image not found
> 
> I am using Framework version 2.13, so I do not even have a directory for 
> version 2.12.  The file "libR.dylib" is in the right place for 2.13 but 
> I do not know how to configure R.app to use a particular version of the 
> Framework.  Or even if this is actually the root of the problem above.
> 
> If anyone has any suggestions I would appreciate it... or even if 
> someone could try the script Expansed published and see if it works for 
> them, I would appreciate that as well.
> 
> Thanks!
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 


From denis.chabot at me.com  Mon Aug 15 21:13:10 2011
From: denis.chabot at me.com (Denis Chabot)
Date: Mon, 15 Aug 2011 15:13:10 -0400
Subject: [R-SIG-Mac] accented vowels
In-Reply-To: <8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>
References: <mailman.282.1313131019.4449.r-sig-mac@r-project.org>
	<8BE248EA-761A-4951-BB33-4B1BF2B98302@globetrotter.net>
Message-ID: <58CAAD71-7EE8-4455-ADDA-81F10992DB82@me.com>

As a follow up, I tried this

a[2]
[1] "1_MO2 soles S?te sda.Rda"
b[2]
[1] "1_MO2 soles S?te sda.Rda"
a[2] == b[2]
[1] FALSE

Denis
Le 2011-08-15 ? 14:42, Denis Chabot a ?crit :

> Hi,
> 
> I usually do not give second thought to accented vowels and R handles everything fine thanks to UTF8 being used in my R scripts. But today I have a problem. Accented vowels do not behave properly when they were imported into R using list.files.
> 
> Maybe this is because  OS X (I'm using 10.6.8) still uses MacRoman for file names, though visually the names seem to have been read correctly into R.
> 
> An example is better than words:
> 
> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
> locale:
> [1] fr_CA.UTF-8/fr_CA.UTF-8/C/C/fr_CA.UTF-8/fr_CA.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> 
> This does not cause problem:
> a = c("1_MO2 crevettes po2crit.Rda", "1_MO2 soles S?te sda.Rda", "1_MO2 turbots po2crit.Rda"); a
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"    "1_MO2 turbots po2crit.Rda"  
> 
> a2 = gsub(" S?te", "S", a); a2
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 solesS sda.Rda"        "1_MO2 turbots po2crit.Rda"  
> 
> 
> but if instead of creating the vector within the R script, I read it as a series of file names, the substitution does not work. I am sorry that I cannot make this a reproducible example as it requires the 3 files to exist on your computer, but you could create 3 dummy files having the same names in the directory of your choice.
> 
> don = file.path("donn?es/")
> b = list.files(path = don, pattern = "1_MO2"); b
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"  
> 
> b2 = gsub(" S?te", "S",  b); b2  
> [1] "1_MO2 crevettes po2crit.Rda" "1_MO2 soles S?te sda.Rda"     "1_MO2 turbots po2crit.Rda"  
> 
> I am puzzled and also "stuck". For now I'll modify the file name, but I need to be able to handle such names at some point.
> 
> Any advice?
> 
> thanks in advance,
> 
> Denis
> 


From evan.carson at gmail.com  Fri Aug 19 00:42:26 2011
From: evan.carson at gmail.com (Evan W Carson)
Date: Thu, 18 Aug 2011 16:42:26 -0600
Subject: [R-SIG-Mac] Rpy
Message-ID: <CAHZXMrEXaKrwXA=cfKu7xmh6HV4XBmymX9+qv5L45+tS730H3Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110818/59468eff/attachment.pl>

From evan.carson at gmail.com  Fri Aug 19 01:03:27 2011
From: evan.carson at gmail.com (Evan W Carson)
Date: Thu, 18 Aug 2011 17:03:27 -0600
Subject: [R-SIG-Mac] Rpy
In-Reply-To: <CAHZXMrEXaKrwXA=cfKu7xmh6HV4XBmymX9+qv5L45+tS730H3Q@mail.gmail.com>
References: <CAHZXMrEXaKrwXA=cfKu7xmh6HV4XBmymX9+qv5L45+tS730H3Q@mail.gmail.com>
Message-ID: <CAHZXMrG-a6Fp1nV-B8OoztXjSjces7L1SgGQ5M4iQWdrOiFX9w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110818/2af9c1bd/attachment.pl>

From timothy.c.bates at gmail.com  Wed Aug 17 16:28:29 2011
From: timothy.c.bates at gmail.com (Timothy Bates)
Date: Wed, 17 Aug 2011 15:28:29 +0100
Subject: [R-SIG-Mac] service to run R from mail.app?
In-Reply-To: <F7539357-91F1-4DB7-9235-BD23E8431D3A@gmail.com>
References: <F7539357-91F1-4DB7-9235-BD23E8431D3A@gmail.com>
Message-ID: <35575C8B-0B9A-4483-9676-701426677399@gmail.com>

On 12 Aug 2011, at 6:48 PM, Timothy Bates wrote:
> I wonder if anyone has made a service to send an email selection  to R and run it?

Attached is a service to run selected text in R.

To install. unzip, and move the resulting file as "~/Library/Services/Run selection in R.workflow"

It will then appear in your Services menu. When run, it will send any selected text to R.app (has to be called ?R? - not R64 - and execute it.

You can assign a keyboard shortcut in Keyboard->Services

Have fun,
tim

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Run selection in R.workflow.zip
Type: application/zip
Size: 48020 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110817/d7a07bf6/attachment-0001.zip>

From zhouyan at me.com  Fri Aug 19 22:06:32 2011
From: zhouyan at me.com (Yan Zhou)
Date: Fri, 19 Aug 2011 21:06:32 +0100
Subject: [R-SIG-Mac] R 2.13.1-patched, vecLib problem on Lion
Message-ID: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>

Dear all, 

I have a problem with R 2.31-patched from http://R.research.att.com/. I am using Lion 10.7.1

I did a fresh install of R and I checked that the BLAS library is linked to vecLib. However the following simple code halt on my machine.

	a <- matrix(rnorm(640 * 640), ncol = 640)
	b <- eigen(a)

This should take less than a second. However after an hour R is still halted. I tried a few more times it is reproducible on my machine.

I then built R my self, linked to vecLib, and using Lion's system default tools. The build passed check and the code above runs without a problem.

I am not sure what is wrong here.

The machine I am using is a Mid-2010 MacBook Pro 15", Core i7 2.66GHz.

Does anyone has the same problem or it is that there's something wrong with my machine only?

Best regards,

Yan Zhou


From f.calboli at imperial.ac.uk  Fri Aug 19 22:25:00 2011
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Fri, 19 Aug 2011 21:25:00 +0100
Subject: [R-SIG-Mac] R 2.13.1-patched, vecLib problem on Lion
In-Reply-To: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
References: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
Message-ID: <FE628FB1-FD4E-4906-938C-C8580179D0A4@imperial.ac.uk>

On 19 Aug 2011, at 21:06, Yan Zhou wrote:

> Dear all, 
> 
> I have a problem with R 2.31-patched from http://R.research.att.com/. I am using Lion 10.7.1
> 
> I did a fresh install of R and I checked that the BLAS library is linked to vecLib. However the following simple code halt on my machine.
> 
> 	a <- matrix(rnorm(640 * 640), ncol = 640)
> 	b <- eigen(a)

I can reproduce the problem running the code above.

ls -l /Library/Frameworks/R.framework/Resources/lib/libRblas.dylib points to libRblas.vecLib.dylib

F

--
Federico C. F. Calboli
Department of Epidemiology and Biostatistics
Imperial College, St. Mary's Campus
Norfolk Place, London W2 1PG

Tel +44 (0)20 75941602   Fax +44 (0)20 75943193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com


From f.calboli at imperial.ac.uk  Fri Aug 19 22:42:52 2011
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Fri, 19 Aug 2011 21:42:52 +0100
Subject: [R-SIG-Mac] R 2.13.1-patched, vecLib problem on Lion
In-Reply-To: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
References: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
Message-ID: <F76726FC-6151-4878-8D08-00AFF537920F@imperial.ac.uk>

On 19 Aug 2011, at 21:06, Yan Zhou wrote:

> Dear all, 
> 
> I have a problem with R 2.31-patched from http://R.research.att.com/. I am using Lion 10.7.1
> 
> I did a fresh install of R and I checked that the BLAS library is linked to vecLib. However the following simple code halt on my machine.
> 
> 	a <- matrix(rnorm(640 * 640), ncol = 640)
> 	b <- eigen(a)


I'd like to add that after:

cd /Library/Frameworks/R.framework/Resources/lib
ln -sf libRblas.0.dylib libRblas.dylib

the test above runs fine.

F


--
Federico C. F. Calboli
Department of Epidemiology and Biostatistics
Imperial College, St. Mary's Campus
Norfolk Place, London W2 1PG

Tel +44 (0)20 75941602   Fax +44 (0)20 75943193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com


From zhouyan at me.com  Fri Aug 19 22:47:52 2011
From: zhouyan at me.com (Yan Zhou)
Date: Fri, 19 Aug 2011 21:47:52 +0100
Subject: [R-SIG-Mac] R 2.13.1-patched, vecLib problem on Lion
In-Reply-To: <FE628FB1-FD4E-4906-938C-C8580179D0A4@imperial.ac.uk>
References: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
	<FE628FB1-FD4E-4906-938C-C8580179D0A4@imperial.ac.uk>
Message-ID: <EBCECBAD-CC2D-4CB4-B232-5ACF95956060@me.com>

I know this workaround. However that links R to the reference Blas. What keep me confusing is that when linking the R-patched from http://R.research.att.com to vecLib, it halts, but the home-built R, linked to the same vecLib, runs fine.

Y


On Aug 19, 2011, at 9:25 PM, Federico Calboli wrote:

> On 19 Aug 2011, at 21:06, Yan Zhou wrote:
> 
>> Dear all, 
>> 
>> I have a problem with R 2.31-patched from http://R.research.att.com/. I am using Lion 10.7.1
>> 
>> I did a fresh install of R and I checked that the BLAS library is linked to vecLib. However the following simple code halt on my machine.
>> 
>> 	a <- matrix(rnorm(640 * 640), ncol = 640)
>> 	b <- eigen(a)
> 
> I can reproduce the problem running the code above.
> 
> ls -l /Library/Frameworks/R.framework/Resources/lib/libRblas.dylib points to libRblas.vecLib.dylib
> 
> F
> 
> --
> Federico C. F. Calboli
> Department of Epidemiology and Biostatistics
> Imperial College, St. Mary's Campus
> Norfolk Place, London W2 1PG
> 
> Tel +44 (0)20 75941602   Fax +44 (0)20 75943193
> 
> f.calboli [.a.t] imperial.ac.uk
> f.calboli [.a.t] gmail.com
> 
> 
> 
> 
> 
>


From bhh at xs4all.nl  Sat Aug 20 15:09:17 2011
From: bhh at xs4all.nl (Berend Hasselman)
Date: Sat, 20 Aug 2011 15:09:17 +0200
Subject: [R-SIG-Mac] R 2.13.1-patched, vecLib problem on Lion
In-Reply-To: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
References: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
Message-ID: <93C22257-7393-4D0C-8CF0-AD84E610A0E6@xs4all.nl>


On 19-08-2011, at 22:06, Yan Zhou wrote:

> Dear all, 
> 
> I have a problem with R 2.31-patched from http://R.research.att.com/. I am using Lion 10.7.1
> 
> I did a fresh install of R and I checked that the BLAS library is linked to vecLib. However the following simple code halt on my machine.
> 
> 	a <- matrix(rnorm(640 * 640), ncol = 640)
> 	b <- eigen(a)
> 
> This should take less than a second. However after an hour R is still halted. I tried a few more times it is reproducible on my machine.
> 
> I then built R my self, linked to vecLib, and using Lion's system default tools. The build passed check and the code above runs without a problem.
> 
> I am not sure what is wrong here.
> 
> The machine I am using is a Mid-2010 MacBook Pro 15", Core i7 2.66GHz.
> 
> Does anyone has the same problem or it is that there's something wrong with my machine only?

I have tried this on my MacBook Air 2011 (1.6Ghz i5, 4Gb memory, 128Gb flash) and Mac OS X 10.7.1
Using R 2.13.1 of 2011-07-08.

The problem occurs when running R 64 bit.
The 32 bit R doesn't have the problem.

Berend


From zhouyan at me.com  Sat Aug 20 15:32:39 2011
From: zhouyan at me.com (Yan Zhou)
Date: Sat, 20 Aug 2011 14:32:39 +0100
Subject: [R-SIG-Mac] R 2.13.1-patched, vecLib problem on Lion
In-Reply-To: <93C22257-7393-4D0C-8CF0-AD84E610A0E6@xs4all.nl>
References: <148C6748-2D19-4B5B-94D8-CA34AF861CB4@me.com>
	<93C22257-7393-4D0C-8CF0-AD84E610A0E6@xs4all.nl>
Message-ID: <F0B7E6EA-934E-4F83-82AA-82894B9D2679@me.com>


On Aug 20, 2011, at 2:09 PM, Berend Hasselman wrote:

> 
> On 19-08-2011, at 22:06, Yan Zhou wrote:
> 
>> Dear all, 
>> 
>> I have a problem with R 2.31-patched from http://R.research.att.com/. I am using Lion 10.7.1
>> 
>> I did a fresh install of R and I checked that the BLAS library is linked to vecLib. However the following simple code halt on my machine.
>> 
>> 	a <- matrix(rnorm(640 * 640), ncol = 640)
>> 	b <- eigen(a)
>> 
>> This should take less than a second. However after an hour R is still halted. I tried a few more times it is reproducible on my machine.
>> 
>> I then built R my self, linked to vecLib, and using Lion's system default tools. The build passed check and the code above runs without a problem.
>> 
>> I am not sure what is wrong here.
>> 
>> The machine I am using is a Mid-2010 MacBook Pro 15", Core i7 2.66GHz.
>> 
>> Does anyone has the same problem or it is that there's something wrong with my machine only?
> 
> I have tried this on my MacBook Air 2011 (1.6Ghz i5, 4Gb memory, 128Gb flash) and Mac OS X 10.7.1
> Using R 2.13.1 of 2011-07-08.
> 
> The problem occurs when running R 64 bit.
> The 32 bit R doesn't have the problem.
> 
Em, I tried it for 32 bit too, it runs fine. I guess it may be a linking problem. 

Yan


From bhima.pandava at gmail.com  Sun Aug 21 11:31:44 2011
From: bhima.pandava at gmail.com (Bhima Pandava)
Date: Sun, 21 Aug 2011 11:31:44 +0200
Subject: [R-SIG-Mac] What is the correct method to install a JDK on Mac OS
	Lion?
Message-ID: <4E50D080.7040300@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20110821/60673271/attachment.pl>

From timothy.c.bates at gmail.com  Wed Aug 24 15:37:00 2011
From: timothy.c.bates at gmail.com (Timothy Bates)
Date: Wed, 24 Aug 2011 14:37:00 +0100
Subject: [R-SIG-Mac] turn off text transforms
Message-ID: <EFB4F4CA-6F2A-4BC3-BFAD-58125073DD3A@gmail.com>

hi all,
if I enter the following into R.app

> 1/8 x 248.70

I get
Error: unexpected symbol in "1/8 x?

Because OS text entry is transforming 1/8 into ?.

Is there a way to turn that off selectively for R.app?

tim

From ripley at stats.ox.ac.uk  Thu Aug 25 08:08:42 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 25 Aug 2011 07:08:42 +0100
Subject: [R-SIG-Mac] turn off text transforms
In-Reply-To: <EFB4F4CA-6F2A-4BC3-BFAD-58125073DD3A@gmail.com>
References: <EFB4F4CA-6F2A-4BC3-BFAD-58125073DD3A@gmail.com>
Message-ID: <alpine.LFD.2.02.1108250707120.21926@gannet.stats.ox.ac.uk>

On Wed, 24 Aug 2011, Timothy Bates wrote:

> hi all,
> if I enter the following into R.app
>
>> 1/8 x 248.70
>
> I get
> Error: unexpected symbol in "1/8 x?
>
> Because OS text entry is transforming 1/8 into ?.

I don't think so: do you have any evidence for that?  R.app gives the 
same message as any other version of R.

Your expression is invalid R: use * for multiplication.

>
> Is there a way to turn that off selectively for R.app?
>
> tim
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From simon.urbanek at r-project.org  Thu Aug 25 16:58:50 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 25 Aug 2011 15:58:50 +0100
Subject: [R-SIG-Mac] What is the correct method to install a JDK on Mac
	OS Lion?
In-Reply-To: <4E50D080.7040300@gmail.com>
References: <4E50D080.7040300@gmail.com>
Message-ID: <5396DADF-E924-4335-819A-C95E7E521E2E@r-project.org>


On Aug 21, 2011, at 10:31 AM, Bhima Pandava wrote:

> Hi,
> 
>     I'm using R.app on Mac OS Lion and when I attempt to build the 
> rJava package from source I get the following error:
> 
> Checking whether JNI programs can be compiled... configure: error: 
> Cannot compile a simple JNI program. See *config.log* for details.
> 
> Make sure you have Java Development Kit installed and correctly 
> registered in R.
> If in doubt, re-run "R CMD javareconf" as root.
> 
> ERROR: configuration failed for package 'rJava'
> * removing 
> '/Library/Frameworks/R.framework/Versions/2.14/Resources/library/rJava'
> 
> On a fresh Mac OS install, executing the command: sudo R CMD javareconf 
> fails with:
> 
>  "No Java runtime present, requesting install. Java interpreter doesn't 
> work properly." and then initiates fetching of Apple's Java runtime.
> 
> executing the command, once the Java runtime is finished completes with 
> the following output
> 
> Java interpreter : /usr/bin/java
> Java version     : 1.6.0_26
> Java home path   : 
> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
> Java compiler    : /usr/bin/javac
> Java headers gen.: /usr/bin/javah
> Java archive tool: /usr/bin/jar
> *Java library path:*
> JNI linker flags : -framework JavaVM
> JNI cpp flags    : -I$(JAVA_HOME)/include
> 
> Updating Java configuration in /Library/Frameworks/R.framework/Resources
> Done.
> 
> Attempting to build the rJava package again results in the same error as 
> before.
> 
> This causes me to ask a few questions:
> 
> 1) Is the Java package that my Mac automatically downloaded from Apple 
> the right package?

Yes


>  If not which one should I use?
> 2) Above there is no Java Library path listed, is this part of my problem?

No, OS X doesn't need it


> 3) Where is the config.log that R.app generates?  Dredging around the 
> Console.app and the likely places did not reveal it.
> 

It is deleted after the installation. You want to use the unpacked tar ball.


But to your real issue - Apple doesn't provide headers inside the Java home anymore, so you want to re-run javareconf pointing to the framework:

R CMD javareconf JAVA_CPPFLAGS=-I/System/Library/Frameworks/JavaVM.framework/Headers

(normally you don' t need sudo but if you used it once, you have to use it from then on).

Cheers,
Simon



> For what it is worth I have tried 3 different version of R at this 
> point: (R-2.13-branch, 
> <http://r.research.att.com/R-2.13-branch-leopard.pkg>R-2.13-patched for 
> Lion, R-devel)
> 
> Thanks for any help!
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 


From simon.urbanek at r-project.org  Thu Aug 25 17:04:13 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 25 Aug 2011 16:04:13 +0100
Subject: [R-SIG-Mac] turn off text transforms
In-Reply-To: <EFB4F4CA-6F2A-4BC3-BFAD-58125073DD3A@gmail.com>
References: <EFB4F4CA-6F2A-4BC3-BFAD-58125073DD3A@gmail.com>
Message-ID: <357F44C8-F224-4968-8FF7-AA33FF29CE2A@r-project.org>


On Aug 24, 2011, at 2:37 PM, Timothy Bates wrote:

> hi all,
> if I enter the following into R.app
> 
>> 1/8 x 248.70
> 
> I get
> Error: unexpected symbol in "1/8 x?
> 
> Because OS text entry is transforming 1/8 into ?.
> 
> Is there a way to turn that off selectively for R.app?
> 

Brian is right, but I noticed myself that there is something wonky going on with the editor on Lion - it is translating characters where it should not (e.g. \dots) - and I know only of the global configuration to disable it. I'll have a look if there is some message that could be send to the text view on Lion once I'm back (next week) because its highly annoying ?

Cheers,
Simon


