From f.calboli at imperial.ac.uk  Wed Jun  1 10:54:07 2005
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Wed Jun  1 11:01:44 2005
Subject: [R-SIG-Mac] package building
In-Reply-To: <8859b27f4058fc46ac1bbbde24d4f371@mclink.it>
References: <1117567292.19463.223.camel@localhost.localdomain>
	<8859b27f4058fc46ac1bbbde24d4f371@mclink.it>
Message-ID: <1117616047.19479.261.camel@localhost.localdomain>

Hi All, 

I asked how to build binaries for OSX because the package I maintain
with Alessio Boattini does not have OSX binaries on CRAN and now I have
a PBoook...

I built and uploaded it now.

Cheers,

Federico
-- 
Federico C. F. Calboli
Department of Epidemiology and Public Health
Imperial College, St Mary's Campus
Norfolk Place, London W2 1PG

Tel  +44 (0)20 7594 1602     Fax (+44) 020 7594 3193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com

From stefano.iacus at unimi.it  Wed Jun  1 11:22:36 2005
From: stefano.iacus at unimi.it (stefano iacus)
Date: Wed Jun  1 11:52:57 2005
Subject: [R-SIG-Mac] package building
In-Reply-To: <1117616047.19479.261.camel@localhost.localdomain>
References: <1117567292.19463.223.camel@localhost.localdomain>
	<8859b27f4058fc46ac1bbbde24d4f371@mclink.it>
	<1117616047.19479.261.camel@localhost.localdomain>
Message-ID: <d483573ce9f4c7c9734eea674ef7b2f6@unimi.it>

Federico,
could you point me to the package?
If it is on CRAN as source and it passes MAKE CHECK, then it should 
appear as binary on CRAN under bin/macosx/2.1 if not, you should look 
at http://cran.r-project.org/bin/macosx/2.1/check/checkSummaryOSX.html

you cannot upload directly binaries on CRAN, we will.

stefano
p.s. both Malmig and Biodem are on CRAN.

On 01/giu/05, at 10:54, Federico Calboli wrote:

> Hi All,
>
> I asked how to build binaries for OSX because the package I maintain
> with Alessio Boattini does not have OSX binaries on CRAN and now I have
> a PBoook...
>
> I built and uploaded it now.
>
> Cheers,
>
> Federico
> -- 
> Federico C. F. Calboli
> Department of Epidemiology and Public Health
> Imperial College, St Mary's Campus
> Norfolk Place, London W2 1PG
>
> Tel  +44 (0)20 7594 1602     Fax (+44) 020 7594 3193
>
> f.calboli [.a.t] imperial.ac.uk
> f.calboli [.a.t] gmail.com
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

From f.calboli at imperial.ac.uk  Wed Jun  1 12:02:55 2005
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Wed Jun  1 12:10:55 2005
Subject: [R-SIG-Mac] package building
In-Reply-To: <d483573ce9f4c7c9734eea674ef7b2f6@unimi.it>
References: <1117567292.19463.223.camel@localhost.localdomain>
	<8859b27f4058fc46ac1bbbde24d4f371@mclink.it>
	<1117616047.19479.261.camel@localhost.localdomain>
	<d483573ce9f4c7c9734eea674ef7b2f6@unimi.it>
Message-ID: <1117620175.19463.281.camel@localhost.localdomain>

On Wed, 2005-06-01 at 11:22 +0200, stefano iacus wrote:
> Federico,
> could you point me to the package?

Its in:

ftp://ftp.ci.tuwien.ac.at/incoming/

which I hope is the right place for OSX binaries.

> If it is on CRAN as source and it passes MAKE CHECK, then it should 
> appear as binary on CRAN under bin/macosx/2.1 if not, you should look 
> at http://cran.r-project.org/bin/macosx/2.1/check/checkSummaryOSX.html

It does pass R CMD check on my pbook with Tiger, so it should be fine...

> p.s. both Malmig and Biodem are on CRAN.

Malmig is actually now orphaned because all its functions (and more) are in Biodem.

Thanks for your help.

Federico

-- 
Federico C. F. Calboli
Department of Epidemiology and Public Health
Imperial College, St Mary's Campus
Norfolk Place, London W2 1PG

Tel  +44 (0)20 7594 1602     Fax (+44) 020 7594 3193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com

From jago at mclink.it  Wed Jun  1 12:32:16 2005
From: jago at mclink.it (stefano iacus)
Date: Wed Jun  1 12:32:33 2005
Subject: [R-SIG-Mac] package building
In-Reply-To: <1117620175.19463.281.camel@localhost.localdomain>
References: <1117567292.19463.223.camel@localhost.localdomain>
	<8859b27f4058fc46ac1bbbde24d4f371@mclink.it>
	<1117616047.19479.261.camel@localhost.localdomain>
	<d483573ce9f4c7c9734eea674ef7b2f6@unimi.it>
	<1117620175.19463.281.camel@localhost.localdomain>
Message-ID: <5b62f46128c60b68ddc3e3de92b2e3c9@mclink.it>


On 01/giu/05, at 12:02, Federico Calboli wrote:

> On Wed, 2005-06-01 at 11:22 +0200, stefano iacus wrote:
>> Federico,
>> could you point me to the package?
>
> Its in:
>
> ftp://ftp.ci.tuwien.ac.at/incoming/
>
> which I hope is the right place for OSX binaries.


it isn't, we build binaries and distribute them. I was asking about the 
source package. Which is the name of the package?



>
>> If it is on CRAN as source and it passes MAKE CHECK, then it should
>> appear as binary on CRAN under bin/macosx/2.1 if not, you should look
>> at http://cran.r-project.org/bin/macosx/2.1/check/checkSummaryOSX.html
>
> It does pass R CMD check on my pbook with Tiger, so it should be 
> fine...

did you check the url above?
We only distribute binaries  built on panther currently, but we are 
going to ship a tiger version of R.app+binary packages

stefano

>
>> p.s. both Malmig and Biodem are on CRAN.
>
> Malmig is actually now orphaned because all its functions (and more) 
> are in Biodem.
>
> Thanks for your help.
>
> Federico
>
> -- 
> Federico C. F. Calboli
> Department of Epidemiology and Public Health
> Imperial College, St Mary's Campus
> Norfolk Place, London W2 1PG
>
> Tel  +44 (0)20 7594 1602     Fax (+44) 020 7594 3193
>
> f.calboli [.a.t] imperial.ac.uk
> f.calboli [.a.t] gmail.com
>

From f.calboli at imperial.ac.uk  Wed Jun  1 12:34:12 2005
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Wed Jun  1 12:40:42 2005
Subject: [R-SIG-Mac] package building
In-Reply-To: <5b62f46128c60b68ddc3e3de92b2e3c9@mclink.it>
References: <1117567292.19463.223.camel@localhost.localdomain>
	<8859b27f4058fc46ac1bbbde24d4f371@mclink.it>
	<1117616047.19479.261.camel@localhost.localdomain>
	<d483573ce9f4c7c9734eea674ef7b2f6@unimi.it>
	<1117620175.19463.281.camel@localhost.localdomain>
	<5b62f46128c60b68ddc3e3de92b2e3c9@mclink.it>
Message-ID: <1117622052.19479.287.camel@localhost.localdomain>

On Wed, 2005-06-01 at 12:32 +0200, stefano iacus wrote:

> it isn't, we build binaries and distribute them. I was asking about the 
> source package. Which is the name of the package?


my mistake.. that's where I put stuff build on Debian on intel chips.

> >
> >> If it is on CRAN as source and it passes MAKE CHECK, then it should
> >> appear as binary on CRAN under bin/macosx/2.1 if not, you should look
> >> at http://cran.r-project.org/bin/macosx/2.1/check/checkSummaryOSX.html
> >
> > It does pass R CMD check on my pbook with Tiger, so it should be 
> > fine...
> 
> did you check the url above?

The package is Biodem and it says it's OK. But it was not on the list of
things I could download from the London mirror when I'm using R.app on
Tiger.

> We only distribute binaries  built on panther currently, but we are 
> going to ship a tiger version of R.app+binary packages

Ok, so let's recap (I am a bit lost): once I create a package -on Linux-
and I want to make OSX binaries available as well, what's the
procedure? 

Regards,

Federico
-- 
Federico C. F. Calboli
Department of Epidemiology and Public Health
Imperial College, St Mary's Campus
Norfolk Place, London W2 1PG

Tel  +44 (0)20 7594 1602     Fax (+44) 020 7594 3193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com

From stefano.iacus at unimi.it  Wed Jun  1 14:00:55 2005
From: stefano.iacus at unimi.it (stefano iacus)
Date: Wed Jun  1 14:01:06 2005
Subject: [R-SIG-Mac] package building
In-Reply-To: <1117622052.19479.287.camel@localhost.localdomain>
References: <1117567292.19463.223.camel@localhost.localdomain>
	<8859b27f4058fc46ac1bbbde24d4f371@mclink.it>
	<1117616047.19479.261.camel@localhost.localdomain>
	<d483573ce9f4c7c9734eea674ef7b2f6@unimi.it>
	<1117620175.19463.281.camel@localhost.localdomain>
	<5b62f46128c60b68ddc3e3de92b2e3c9@mclink.it>
	<1117622052.19479.287.camel@localhost.localdomain>
Message-ID: <0238e2f57fcd5f0998b85b892e58f464@unimi.it>


On 01/giu/05, at 12:34, Federico Calboli wrote:

> On Wed, 2005-06-01 at 12:32 +0200, stefano iacus wrote:
>
>> it isn't, we build binaries and distribute them. I was asking about 
>> the
>> source package. Which is the name of the package?
>
>
> my mistake.. that's where I put stuff build on Debian on intel chips.
>
>>>
>>>> If it is on CRAN as source and it passes MAKE CHECK, then it should
>>>> appear as binary on CRAN under bin/macosx/2.1 if not, you should 
>>>> look
>>>> at 
>>>> http://cran.r-project.org/bin/macosx/2.1/check/checkSummaryOSX.html
>>>
>>> It does pass R CMD check on my pbook with Tiger, so it should be
>>> fine...
>>
>> did you check the url above?
>
> The package is Biodem and it says it's OK. But it was not on the list 
> of
> things I could download from the London mirror when I'm using R.app on
> Tiger.

Ok, I'll check this...that's apparently a  bug in my scripts (but it 
isn't as the package is there, see below)
>
>> We only distribute binaries  built on panther currently, but we are
>> going to ship a tiger version of R.app+binary packages
>
> Ok, so let's recap (I am a bit lost): once I create a package -on 
> Linux-
> and I want to make OSX binaries available as well, what's the
> procedure?

nothing. we need to have the sources of the package on CRAN, then daily 
building scripts will run make check and provide binaries under 
CRAN/bin/macosx/2.1

BTW, Biodem 0.1 is there. Try the main CRAN site to retrieve the list 
of binary packages from R.app

stefano


>
> Regards,
>
> Federico
> -- 
> Federico C. F. Calboli
> Department of Epidemiology and Public Health
> Imperial College, St Mary's Campus
> Norfolk Place, London W2 1PG
>
> Tel  +44 (0)20 7594 1602     Fax (+44) 020 7594 3193
>
> f.calboli [.a.t] imperial.ac.uk
> f.calboli [.a.t] gmail.com
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

From jessilbrown at gmail.com  Sat Jun  4 06:12:56 2005
From: jessilbrown at gmail.com (Jessi Brown)
Date: Sat Jun  4 06:13:04 2005
Subject: [R-SIG-Mac] R refuses to run
In-Reply-To: <268703F8-40B1-4709-B920-967268A0D97A@r-project.org>
References: <371904a90504301823598af6ab@mail.gmail.com>
	<268703F8-40B1-4709-B920-967268A0D97A@r-project.org>
Message-ID: <371904a905060321124d7a1576@mail.gmail.com>

Sorry for the huge delay, but I was relying on my office copy of
S-Plus since I needed to get things done! Ok, the problem was
apparently due to the .RData file; I worked through Step 1 and 2
below, and everything was fine. Thanks to everyone for their help.

cheers, Jessi

On 5/2/05, Simon Urbanek <simon.urbanek@r-project.org> wrote:
> Jessi,
> 
> On Apr 30, 2005, at 9:23 PM, Jessi Brown wrote:
> 
> > then closes again), when either selected from the Finder or when
> > prompted in Terminal (R.app).
> 
> Step 1 - check whether R runs at all. Start Terminal and type
> R
> (just R, no app). Does this work?
> 
> Step 2 - remove workspace that may cause trouble
> If you don't mind deleting your current workspace from your home,
> please do so - i.e. type the following in Terminal:
> rm -f .RData ~/.RData
> 
> Step 3 - run the R.app
> Double-clock on the R icon in Applications. If it comes up and
> disappears again, please go to Applications -> Utilities and start
> "Console"
> Depending on your settings you may already see the error message in
> the log. Otherwise look at the other log files in the left menu. If
> there is no list of logs on the left hand side, click on the "Logs"
> icon in the toolbar. The crash logs are usually in ~/Library/Logs ->
> CrashReporter and then R.app
> 
> Please let us know whether you were able to fix the problem or supply
> us with any errors you find in the logs.
> 
> Cheers,
> Simon
> 
>

From f.calboli at imperial.ac.uk  Sat Jun  4 20:18:06 2005
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Sat Jun  4 20:18:15 2005
Subject: [R-SIG-Mac] problem installing packages from terminal
Message-ID: <C0517EC4-86C5-484D-9E42-484FA906D585@imperial.ac.uk>

Hi All,

I tried to install Hmisc from source, but I had errors due to  
permission issues (I enabled root form my box). I tried to install  
from the terminal after su-ing to root, but I get the following:

 > install.packages("locfit")
--- Please select a CRAN mirror for use in this session ---
Loading Tcl/Tk interface ... Error in fun(...) : no display name and  
no $DISPLAY environment variable
Error: .onLoad failed in 'loadNamespace' for 'tcltk'

The same command in Debian Linux opens a tcl/tk widget... How can I  
install stuff from the terminal? I'd rather not log out and log in  
again as root to install stuff that needs g77... (I did for Hmisc,  
and worked like a charm). BTW, I installed all the .dmg packages that  
were bundled with R.app.

Cheers,

Federico


Federico C. F. Calboli
Department of Epidemiology and Public Health
Imperial College, St. Mary's Campus
Norfolk Place, London W2 1PG

Tel +44 (0)20 75941602   Fax +44 (0)20 75943193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com

From simon.urbanek at r-project.org  Sat Jun  4 21:11:04 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat Jun  4 21:11:18 2005
Subject: [R-SIG-Mac] problem installing packages from terminal
In-Reply-To: <C0517EC4-86C5-484D-9E42-484FA906D585@imperial.ac.uk>
References: <C0517EC4-86C5-484D-9E42-484FA906D585@imperial.ac.uk>
Message-ID: <4AAE25ED-BCCD-41B7-A94B-D4D2EB105A55@r-project.org>

Hi Federico,

On Jun 4, 2005, at 2:18 PM, Federico Calboli wrote:

> I tried to install Hmisc from source, but I had errors due to  
> permission issues

Are you sure? Please look at the output more closely.  Hmisc usually  
fails due to compiler problems, not permission issues. If you are  
using R binary from CRAN, you don't need to use root for  
installation, any user with admin privileges will do. The last  
warning about permissions on .css can be safely discarded and has  
nothing to do with the success/failure of a package installation.

Furthermore R.app checks permissions before installation, so it would  
ask for authorization if there were any permission issues.

Finally, you can use R.app to install as root as well - if you want  
to force installation as root, click on the "lock" icon in the tool  
bar, the installation will then be performed as root (but usually  
this is not necessary, see above).

> (I enabled root form my box). I tried to install from the terminal  
> after su-ing to root, but I get the following:
>
> > install.packages("locfit")
> --- Please select a CRAN mirror for use in this session ---

You didn't select CRAN mirror. You should either set it globally or  
supply the url to install.packages. Also note that the default on  
CRAN OS X is binary installation, so what you probably want is rather  
install.packages("Hmisc",repos="http://cran.us.r- 
project.org/",type="source") - of course replace with your mirror of  
choice.

> I'd rather not log out and log in again as root to install stuff  
> that needs g77... (I did for Hmisc, and worked like a charm).

You don't need to - in fact it's not recommended to enable the root  
user on OS X and it's completely unnecessary, because you should be  
using sudo with the same effect without potentially hazardous side- 
effects of enabling root.

Cheers,
Simon

From f.calboli at imperial.ac.uk  Sat Jun  4 21:32:03 2005
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Sat Jun  4 21:36:24 2005
Subject: [R-SIG-Mac] problem installing packages from terminal
In-Reply-To: <4AAE25ED-BCCD-41B7-A94B-D4D2EB105A55@r-project.org>
References: <C0517EC4-86C5-484D-9E42-484FA906D585@imperial.ac.uk>
	<4AAE25ED-BCCD-41B7-A94B-D4D2EB105A55@r-project.org>
Message-ID: <1117913523.32646.65.camel@localhost.localdomain>

Hi Simon, 

Thanks for the very comprehensive explanation... I am new to OSX and to
a number of things done the R.app way.

> You don't need to - in fact it's not recommended to enable the root  
> user on OS X and it's completely unnecessary, because you should be  
> using sudo with the same effect without potentially hazardous side- 
> effects of enabling root.

I am a Linux user at work (and I sysadmin for myself as well), and the
more Linux/Unix like in behaviour I can make OSX the better. The fact
that I have administrative privileges is something I find pretty weird.

Cheers,

Federico

-- 
Federico C. F. Calboli
Department of Epidemiology and Public Health
Imperial College, St Mary's Campus
Norfolk Place, London W2 1PG

Tel  +44 (0)20 7594 1602     Fax (+44) 020 7594 3193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com

From stefano.iacus at unimi.it  Sat Jun  4 22:31:19 2005
From: stefano.iacus at unimi.it (stefano iacus)
Date: Sat Jun  4 22:31:28 2005
Subject: [R-SIG-Mac] problem installing packages from terminal
In-Reply-To: <C0517EC4-86C5-484D-9E42-484FA906D585@imperial.ac.uk>
References: <C0517EC4-86C5-484D-9E42-484FA906D585@imperial.ac.uk>
Message-ID: <9565DFCE-8904-4D18-BD39-94D8B3A5B034@unimi.it>


On 04/giu/05, at 20:18, Federico Calboli wrote:


> Hi All,
>
> I tried to install Hmisc from source, but I had errors due to  
> permission issues (I enabled root form my box). I tried to install  
> from the terminal after su-ing to root, but I get the following:
>
> > install.packages("locfit")
> --- Please select a CRAN mirror for use in this session ---
> Loading Tcl/Tk interface ... Error in fun(...) : no display name  
> and no $DISPLAY environment variable
> Error: .onLoad failed in 'loadNamespace' for 'tcltk'
>
>

the binaries of R for Mac OS X assumes X11 tcltk. You need to start  
the X11 server and either set the DISPLAY var to :0 if you use R from  
the command line. R.app sets the DISPLAY var for you.

Unless you build an aqua version of the tcltk R package (i.e. you  
configure R to use Aqua TclTk headers) you always need to have a X11  
window server running (like on Linux, I would say).

stefano



> The same command in Debian Linux opens a tcl/tk widget... How can I  
> install stuff from the terminal? I'd rather not log out and log in  
> again as root to install stuff that needs g77... (I did for Hmisc,  
> and worked like a charm). BTW, I installed all the .dmg packages  
> that were bundled with R.app.
>
> Cheers,
>
> Federico
>
>
> Federico C. F. Calboli
> Department of Epidemiology and Public Health
> Imperial College, St. Mary's Campus
> Norfolk Place, London W2 1PG
>
> Tel +44 (0)20 75941602   Fax +44 (0)20 75943193
>
> f.calboli [.a.t] imperial.ac.uk
> f.calboli [.a.t] gmail.com
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>

From simon.urbanek at r-project.org  Sat Jun  4 22:42:18 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat Jun  4 22:42:25 2005
Subject: [R-SIG-Mac] problem installing packages from terminal
In-Reply-To: <1117913523.32646.65.camel@localhost.localdomain>
References: <C0517EC4-86C5-484D-9E42-484FA906D585@imperial.ac.uk>
	<4AAE25ED-BCCD-41B7-A94B-D4D2EB105A55@r-project.org>
	<1117913523.32646.65.camel@localhost.localdomain>
Message-ID: <56182ED8-6E7E-4AF8-A652-9735491AA11D@r-project.org>

On Jun 4, 2005, at 3:32 PM, Federico Calboli wrote:

>> You don't need to - in fact it's not recommended to enable the  
>> root  user on OS X and it's completely unnecessary, because you  
>> should be  using sudo with the same effect without potentially  
>> hazardous side-effects of enabling root.
>
> I am a Linux user at work (and I sysadmin for myself as well), and  
> the more Linux/Unix like in behaviour I can make OSX the better.  
> The fact that I have administrative privileges is something I find  
> pretty weird.

What do you mean? This may be just a terminology issue. On OS X  
"administrators" (i.e. users with administrative privileges - or as  
System Preferences call it "users that are allowed to administer this  
computer") are users that can sudo to get root privileges. They are  
also members of the "admin" group. Other than that, they are ordinary  
users, so if you login as one, you (and any program you run) can do  
as little harm as any other regular user. Only if you sudo (either on  
the command line or using Security framework) you get the effective  
permissions of a root. As with any system, you should think twice  
before giving someone admin access ;).

The advantage of this security concept (which you can use on any unix  
system) as opposed to actually logging in as root is that you run  
only very specific tasks with root privileges, thus reducing the  
possibility of damaging the system. This is why root is disabled by  
default on OS X - to make it more secure.
Another nice security aspect is that SF authentication changes only  
euid, therefore it is still possible to trace which user is actually  
using the root privileges.

BTW: A side note on the original topic: if you install a package  
manually as root, it will change its permissions inside the  
framework, so you won't be able to update it as admin user anymore -  
you'll always have to do it as root from that point on. Another  
reason to not do that ;).

Cheers,
Simon

From w.northcott at unsw.edu.au  Mon Jun  6 13:58:45 2005
From: w.northcott at unsw.edu.au (Bill Northcott)
Date: Mon Jun  6 13:59:01 2005
Subject: [R-SIG-Mac] R.app and R-devel (2.2)
Message-ID: <E028FB02-17C8-44BB-B8E1-199855D5173A@unsw.edu.au>

I am trying to build R.app fetched from the subversion repository a  
few hours ago against r-devel (2.2) as of 22 May on MacOS X 10.4.1  
with gcc-4.0 and gfortran.

The build of Reditor is breaking because the definition of  
EncodeElement has been changed in R 2.2:

R 2.1 src/include/Print.h:58

char *EncodeElement(SEXP, int, int);

R 2.2 src/include/Print.h:58

char *EncodeElement(SEXP, int, int, char);

This causes fatal errors in Reditor.m:98 and 106

         strcpy(strp, EncodeElement(invec, vrow, 0));

Before I waste much time grovelling, does anyone know what the fourth  
parameter should be in the Reditor context?

Bill Northcott

From lanceboyle at cwazy.co.uk  Tue Jun  7 10:47:25 2005
From: lanceboyle at cwazy.co.uk (Lance Boyle)
Date: Tue Jun  7 20:18:57 2005
Subject: [R-SIG-Mac] Reporting a bug in Mac GUI
Message-ID: <73926dd729cbf5ffc2d7a2ac8f1d95e9@cwazy.co.uk>

Hi list,

when typing a function name and then an empty set of parentheses, such 
as ls(), if the () are typed very quickly the command window spews a 
couple lines of red stuff with several NSthis and NSthat, then makes a 
line that looks like ls()(    -- with the extra parens  --  and 
processes no further typed input. The app must be quit and restarted in 
order to get unlocked from this stuck mode.

From bennetp at mcmaster.ca  Tue Jun  7 20:11:22 2005
From: bennetp at mcmaster.ca (Patrick Bennett)
Date: Tue Jun  7 20:19:06 2005
Subject: [R-SIG-Mac] problems with history for R on Mac OS X
Message-ID: <be096ecd8d4fcf24941bee0d6df96f5c@mcmaster.ca>

Hello Everyone -

I know that this issue has been discussed on the list, but I still 
can't figure out how to use the history commands.

When I enter loadhistory() in the R Console window, I do indeed load a 
history file, but nothing is shown in the history sheet. Also, 
subsequent calls to savehistory() do not alter the text stored in 
.Rhistory.

Using the buttons on the history sheet, I can save my commands into a 
file, but I am not able to load them into R (pressing the "load 
history" button appears to have no effect).

In short, I can't figure out how to save my commands into a history 
file, or to load history files into R's memory. So, I am totally at a 
loss...

Any tips would be most welcome.


I am using R version 2.1.0 and the version 1.11 of the Aqua GUI on OS-X 
10.4.


cheers,
pjb


Patrick J. Bennett, Ph.D.
Professor & Canada Research Chair
Department of Psychology, Neuroscience & Behaviour
McMaster University
1280 Main St. West
Hamilton, ON L8S 4K1 Canada

Office: 905-525-9140 ext. 23012				FAX: 905-529-6225
URL: www.psychology.mcmaster.ca/bennett/ 		www.chairs.gc.ca

"I understand small business growth. I was one." -- George W. Bush, 
President of the United States of America

From simon.urbanek at r-project.org  Tue Jun  7 20:36:17 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue Jun  7 20:36:26 2005
Subject: [R-SIG-Mac] Reporting a bug in Mac GUI
In-Reply-To: <73926dd729cbf5ffc2d7a2ac8f1d95e9@cwazy.co.uk>
References: <73926dd729cbf5ffc2d7a2ac8f1d95e9@cwazy.co.uk>
Message-ID: <79813FC9-53A1-4F22-B283-A2E62D8CBE00@r-project.org>

Lance,

On Jun 7, 2005, at 4:47 AM, Lance Boyle wrote:

> when typing a function name and then an empty set of parentheses,  
> such as ls(), if the () are typed very quickly the command window  
> spews a couple lines of red stuff with several NSthis and NSthat,

could you, please, send us the "NSthis and NSthat" - without doing so  
your report is pretty much useless. Also you may try to run the build  
1564 or later as there were several important changes wrt to argument  
lookup and code completion. What computer do you use?

> then makes a line that looks like ls()(    -- with the extra  
> parens  --  and processes no further typed input. The app must be  
> quit and restarted in order to get unlocked from this stuck mode.

Did you try to press <Esc>? That can usually help ...

Cheers,
Simon

From simon.urbanek at r-project.org  Wed Jun  8 05:09:15 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed Jun  8 05:09:30 2005
Subject: [R-SIG-Mac] Reporting a bug in Mac GUI
In-Reply-To: <73926dd729cbf5ffc2d7a2ac8f1d95e9@cwazy.co.uk>
References: <73926dd729cbf5ffc2d7a2ac8f1d95e9@cwazy.co.uk>
Message-ID: <8817FC5A-7713-4CA9-A5E0-1AC01627F274@r-project.org>

To follow up on the topic - it seems the problem appeared on slower  
machines with builds before 1564. The current nightly build (1574,  
see http://www.rosuda.org/R/nightly/ ) is reported to not feature  
that problem.

Cheers,
Simon

On Jun 7, 2005, at 4:47 AM, Lance Boyle wrote:

> when typing a function name and then an empty set of parentheses,  
> such as ls(), if the () are typed very quickly the command window  
> spews a couple lines of red stuff with several NSthis and NSthat,  
> then makes a line that looks like ls()(    -- with the extra  
> parens  --  and processes no further typed input. The app must be  
> quit and restarted in order to get unlocked from this stuck mode.

	[[alternative HTML version deleted]]

From goedman at mac.com  Wed Jun  8 05:15:13 2005
From: goedman at mac.com (Rob J Goedman)
Date: Wed Jun  8 05:15:02 2005
Subject: [R-SIG-Mac] problems with history for R on Mac OS X
In-Reply-To: <be096ecd8d4fcf24941bee0d6df96f5c@mcmaster.ca>
References: <be096ecd8d4fcf24941bee0d6df96f5c@mcmaster.ca>
Message-ID: <CE51940D-4917-454D-8124-31F7257F1623@mac.com>

Hi Patrick,

Can you let me know what your settings are in the Startup pref pane  
(Command-, and select Startup).
I'm interested in the History section settings.

Also, when you press the 'load history' button, does a finder window  
show up?

Finally, with Read history file on startup selected and a relative  
path of say ".Rhistory", a history
file should be updated and read in on startup. You can only see the  
file in a terminal with ls -l. Its
in R's working dir (unless an absolute path is specified). The  
contents is visible in the history sheet.

Rob


On Jun 7, 2005, at 11:11 AM, Patrick Bennett wrote:

> Hello Everyone -
>
> I know that this issue has been discussed on the list, but I still  
> can't figure out how to use the history commands.
>
> When I enter loadhistory() in the R Console window, I do indeed  
> load a history file, but nothing is shown in the history sheet.  
> Also, subsequent calls to savehistory() do not alter the text  
> stored in .Rhistory.
>
> Using the buttons on the history sheet, I can save my commands into  
> a file, but I am not able to load them into R (pressing the "load  
> history" button appears to have no effect).
>
> In short, I can't figure out how to save my commands into a history  
> file, or to load history files into R's memory. So, I am totally at  
> a loss...
>
> Any tips would be most welcome.
>
>
> I am using R version 2.1.0 and the version 1.11 of the Aqua GUI on  
> OS-X 10.4.
>
>
> cheers,
> pjb
>
>
> Patrick J. Bennett, Ph.D.
> Professor & Canada Research Chair
> Department of Psychology, Neuroscience & Behaviour
> McMaster University
> 1280 Main St. West
> Hamilton, ON L8S 4K1 Canada
>
> Office: 905-525-9140 ext. 23012                FAX: 905-529-6225
> URL: www.psychology.mcmaster.ca/bennett/         www.chairs.gc.ca
>
> "I understand small business growth. I was one." -- George W. Bush,  
> President of the United States of America
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

From k.hansen at biostat.ku.dk  Thu Jun  9 02:38:36 2005
From: k.hansen at biostat.ku.dk (Kasper Daniel Hansen)
Date: Thu Jun  9 02:38:44 2005
Subject: [R-SIG-Mac] some errors
Message-ID: <20050609003836.GB9993@turmalin.kubism.ku.dk>

Hi

I have recently (some days ago) started working on a Mac, and have a few 
"problems" to report:

So far I have been running R.app under Tiger as well as using R from 
within Emacs

1) In the "Preferences/Startup" menu, there is a spelling mistake: the 
option "Add $HOME/R/Library" should be "Add $HOME/Library/R" (I guess).

2) I tried installing Bioconductor binaries using the package menu. I 
can easily install binaries from CRAN. When I pick "bioconductor 
(binaries)" I can retrieve a list of packages from the mirror I am 
using, but when I click on an individal package and choose "Install 
selected", nothing happens. The console output is below. It seems to 
simply retieve the package list and nothing else. The fact that this 
happens only when I do Bioconductor and not CRAN seems to indicate that 
it is a Mac issue? I have installed the packages through other means, 
this is simply a user-report.

3) Could it be that R does not read environment variables when started 
on the terminal. On the terminal as well as using ESS (Emacs) I can not 
get .libPaths() to include /Users/kdh/Library/R despite the fact that I 
have exported it from ~/.profile and the variable is set (output below). 
I have also tried using ~/.Renviron

How do people solve the last issue: that of adding the user-dependent 
library, when using ESS/terminal.

The questions might be a bit basic, but still...

Kasper
***** Bioconductor install


R is free software and comes with ABSOLUTELY NO 
WARRANTY. You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

trying URL 'http://www.bioconductor.org/bin/macosx/2.1/PACKAGES'
Content type 'text/plain; charset=ISO-8859-1' length 11224 bytes
opened URL
==================================================
downloaded 10Kb

trying URL 'http://www.bioconductor.org/bin/macosx/2.1/PACKAGES'
Content type 'text/plain; charset=ISO-8859-1' length 11224 bytes
opened URL
==================================================
downloaded 10Kb


******* R_LIBS probelm

north-mesh-wlan-87:~ kdh$ echo $R_LIBS
/Users/kdh/Library/R/
north-mesh-wlan-87:~ kdh$ R

R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.1.0 Patched (2005-05-12), ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

> .libPaths()
[1] "/Library/Frameworks/R.framework/Resources/library"
>

From jago at mclink.it  Thu Jun  9 02:54:14 2005
From: jago at mclink.it (stefano iacus)
Date: Thu Jun  9 02:54:41 2005
Subject: [R-SIG-Mac] some errors
In-Reply-To: <20050609003836.GB9993@turmalin.kubism.ku.dk>
References: <20050609003836.GB9993@turmalin.kubism.ku.dk>
Message-ID: <A9FB17FE-0E99-4707-BFDF-2EAE5F43FB09@mclink.it>


On 08/giu/05, at 17:38, Kasper Daniel Hansen wrote:

> Hi
>
> I have recently (some days ago) started working on a Mac, and have  
> a few
> "problems" to report:
>
> So far I have been running R.app under Tiger as well as using R from
> within Emacs
>
> 1) In the "Preferences/Startup" menu, there is a spelling mistake: the
> option "Add $HOME/R/Library" should be "Add $HOME/Library/R" (I  
> guess).
right,

>
> 2) I tried installing Bioconductor binaries using the package menu. I
> can easily install binaries from CRAN. When I pick "bioconductor
> (binaries)" I can retrieve a list of packages from the mirror I am
> using, but when I click on an individal package and choose "Install
> selected", nothing happens. The console output is below. It seems to
> simply retieve the package list and nothing else. The fact that this
> happens only when I do Bioconductor and not CRAN seems to indicate  
> that
> it is a Mac issue? I have installed the packages through other means,
> this is simply a user-report.
>

it's a bug. Use "Specify location" with http://www.bioconductor.org   
as URL, and specify the "binary format".
Then it should work.



> 3) Could it be that R does not read environment variables when started
> on the terminal. On the terminal as well as using ESS (Emacs) I can  
> not
> get .libPaths() to include /Users/kdh/Library/R despite the fact  
> that I
> have exported it from ~/.profile and the variable is set (output  
> below).
> I have also tried using ~/.Renviron
>
> How do people solve the last issue: that of adding the user-dependent
> library, when using ESS/terminal.
>
> The questions might be a bit basic, but still...
>
> Kasper
> ***** Bioconductor install
>
>
> R is free software and comes with ABSOLUTELY NO
> WARRANTY. You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>   Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
>
> trying URL 'http://www.bioconductor.org/bin/macosx/2.1/PACKAGES'
> Content type 'text/plain; charset=ISO-8859-1' length 11224 bytes
> opened URL
> ==================================================
> downloaded 10Kb
>
> trying URL 'http://www.bioconductor.org/bin/macosx/2.1/PACKAGES'
> Content type 'text/plain; charset=ISO-8859-1' length 11224 bytes
> opened URL
> ==================================================
> downloaded 10Kb
>
>
> ******* R_LIBS probelm
>
> north-mesh-wlan-87:~ kdh$ echo $R_LIBS
> /Users/kdh/Library/R/
> north-mesh-wlan-87:~ kdh$ R
>
> R : Copyright 2005, The R Foundation for Statistical Computing
> Version 2.1.0 Patched (2005-05-12), ISBN 3-900051-07-0
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
>
>
>> .libPaths()
>>
> [1] "/Library/Frameworks/R.framework/Resources/library"
>
>>
>>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>

From simon.urbanek at r-project.org  Thu Jun  9 04:10:33 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu Jun  9 04:10:43 2005
Subject: [R-SIG-Mac] some errors
In-Reply-To: <20050609003836.GB9993@turmalin.kubism.ku.dk>
References: <20050609003836.GB9993@turmalin.kubism.ku.dk>
Message-ID: <8840A97C-2F98-42DA-8241-5132CB97FEDF@r-project.org>

Hi Kasper,

On Jun 8, 2005, at 8:38 PM, Kasper Daniel Hansen wrote:

> 1) In the "Preferences/Startup" menu, there is a spelling mistake:  
> the option "Add $HOME/R/Library" should be "Add $HOME/Library/R" (I  
> guess).

Thanks.

> 2) I tried installing Bioconductor binaries using the package menu. I

Stefano answered this one ... I hope to fix it in one of the next  
nightly builds ...

> 3) Could it be that R does not read environment variables when started
> on the terminal.

Reading ~/.profile is the task of the shell, not R, and AFAIR by  
definition it's used for login shells only. ~/.Renviron works for me  
(tested with ESS 5.2.8) - make sure the directory you specify in  
R_LIBS exists, otherwise it will be silently discarded by R.

Cheers,
Simon

From sfalcon at fhcrc.org  Thu Jun  9 05:48:12 2005
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Thu Jun  9 05:48:22 2005
Subject: [R-SIG-Mac] some errors
In-Reply-To: <20050609003836.GB9993@turmalin.kubism.ku.dk> (Kasper Daniel
	Hansen's message of "Thu, 9 Jun 2005 02:38:36 +0200")
References: <20050609003836.GB9993@turmalin.kubism.ku.dk>
Message-ID: <m2vf4ob37n.fsf@macaroni.local>

Hi Kasper,

On  8 Jun 2005, k.hansen@biostat.ku.dk wrote:
> On the terminal as well as using ESS (Emacs) I can not get
> .libPaths() to include /Users/kdh/Library/R despite the fact that I
> have exported it from ~/.profile and the variable is set (output
> below).  I have also tried using ~/.Renviron

I suspect the issue here is that Emacs isn't picking up your
environment.  GUI apps started from the Finder don't get the same
environment (.profile, .bash_profile, etc.) that apps started from the
Terminal do.

My solution: I start my Emacs from Terminal and then it inherits the
proper PATH and other env vars such as R_LIBS.

There is another possible solution that involves editing
~/.MacOSX/environment.plist, but I never managed to get that working
as I wanted.

Best,

+ seth

From ellis at stat.harvard.edu  Thu Jun  9 05:56:00 2005
From: ellis at stat.harvard.edu (Byron Ellis)
Date: Thu Jun  9 05:56:16 2005
Subject: [R-SIG-Mac] some errors
In-Reply-To: <m2vf4ob37n.fsf@macaroni.local>
References: <20050609003836.GB9993@turmalin.kubism.ku.dk>
	<m2vf4ob37n.fsf@macaroni.local>
Message-ID: <D77FD93F-DAB2-4987-9AFA-9C10A554E7B2@stat.harvard.edu>

Or you can just

(setenv "R_LIBS" (format "%s/Library/R/library" (getenv "HOME")))

in your .emacs. You can also set your DISPLAY variable there as well.  
I'm sure if you were VERY enterprising you could write some elisp  
that would snarf your .profile, parse it and then run the elisp  
equivalents.

On Jun 8, 2005, at 8:48 PM, Seth Falcon wrote:

> Hi Kasper,
>
> On  8 Jun 2005, k.hansen@biostat.ku.dk wrote:
>
>> On the terminal as well as using ESS (Emacs) I can not get
>> .libPaths() to include /Users/kdh/Library/R despite the fact that I
>> have exported it from ~/.profile and the variable is set (output
>> below).  I have also tried using ~/.Renviron
>>
>
> I suspect the issue here is that Emacs isn't picking up your
> environment.  GUI apps started from the Finder don't get the same
> environment (.profile, .bash_profile, etc.) that apps started from the
> Terminal do.
>
> My solution: I start my Emacs from Terminal and then it inherits the
> proper PATH and other env vars such as R_LIBS.
>
> There is another possible solution that involves editing
> ~/.MacOSX/environment.plist, but I never managed to get that working
> as I wanted.
>
> Best,
>
> + seth
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

---
Byron Ellis (ellis@stat.harvard.edu)
"Oook" -- The Librarian

From k.hansen at biostat.ku.dk  Thu Jun  9 07:08:32 2005
From: k.hansen at biostat.ku.dk (Kasper Daniel Hansen)
Date: Thu Jun  9 07:08:42 2005
Subject: [R-SIG-Mac] some errors
In-Reply-To: <D77FD93F-DAB2-4987-9AFA-9C10A554E7B2@stat.harvard.edu>
References: <20050609003836.GB9993@turmalin.kubism.ku.dk>
	<m2vf4ob37n.fsf@macaroni.local>
	<D77FD93F-DAB2-4987-9AFA-9C10A554E7B2@stat.harvard.edu>
Message-ID: <20050609050832.GA10889@turmalin.kubism.ku.dk>

Thanks for all the help.

First a summary: amongst the very many help suggestion, the best 
approach seems to be to use ~/.Renviron: in that file it is possible to 
set "environment" variables which are used even if there is no 
environment, such as when start the R GUI. This means that the values 
will be used in every invocation fo R - under shell, in Carbon Emacs, in 
the GUI.

Now, I actually tried that out without success before my post. I have 
done some further research and I think I have found some kind of bug 
(or else something very strange).

First off: I have tried everything on a Linux system running R-2.0.1 
where it works as expected.

My .Renviron is as follows 
 R_LIBS=/Users/kdh/Library/R/library
 R_PAPERSIZE=letter
 R_EDITOR=/usr/bin/nano
It is being parsed begause the settings affect the papersize and the 
editor used by R. The problem is the R_LIBS, and it is quite strange. 
Now, I have removed everything from my .profile as seen by

grue:~ kdh$ echo $R_LIBS

grue:~ kdh$ R

R : Copyright 2005, The R Foundation for Statistical Computing
<SNIP: R elcome message>
> .libPaths()
[1] "/Library/Frameworks/R.framework/Resources/library"
> Sys.getenv("R_LIBS")
                        R_LIBS 
"/Users/kdh/Library/R/library" 
> .libPaths(Sys.getenv("R_LIBS"))
> .libPaths()
[1] "/Users/kdh/Library/R/library"                     
[2] "/Library/Frameworks/R.framework/Resources/library"

What is appearent from the transcript is
1) R_LIBS is actually set as seen by Sys.getenv.
2) This does not affect .libPaths()
3) However, passing R_LIBS to .libPaths() sets up everything correctly.

This baffles me quite a lot... I think it most be a mac bug since it 
works under Linux (ok, on an older version, but still...)

Just for completeness sake: I am running Tiger, with the R-2.1.0 patched 
version. I do not have administration privileges, but it seems to me 
that the permissions on ~/Library/ and subdirectories are as they ought 
to be. R is owned by root.

And finally, I realized that the typo in preferences probably should be 
corrected to $HOME/Library/R/library (although I must add that this 
setting is also not reflected in .libPaths())

Kasper

On Wed, Jun 08, 2005 at 08:56:00PM -0700, Byron Ellis wrote:
> Or you can just
> 
> (setenv "R_LIBS" (format "%s/Library/R/library" (getenv "HOME")))
> 
> in your .emacs. You can also set your DISPLAY variable there as well.  
> I'm sure if you were VERY enterprising you could write some elisp  
> that would snarf your .profile, parse it and then run the elisp  
> equivalents.
> 
> On Jun 8, 2005, at 8:48 PM, Seth Falcon wrote:
> 
> >Hi Kasper,
> >
> >On  8 Jun 2005, k.hansen@biostat.ku.dk wrote:
> >
> >>On the terminal as well as using ESS (Emacs) I can not get
> >>.libPaths() to include /Users/kdh/Library/R despite the fact that I
> >>have exported it from ~/.profile and the variable is set (output
> >>below).  I have also tried using ~/.Renviron
> >>
> >
> >I suspect the issue here is that Emacs isn't picking up your
> >environment.  GUI apps started from the Finder don't get the same
> >environment (.profile, .bash_profile, etc.) that apps started from the
> >Terminal do.
> >
> >My solution: I start my Emacs from Terminal and then it inherits the
> >proper PATH and other env vars such as R_LIBS.
> >
> >There is another possible solution that involves editing
> >~/.MacOSX/environment.plist, but I never managed to get that working
> >as I wanted.
> >
> >Best,
> >
> >+ seth
> >
> >_______________________________________________
> >R-SIG-Mac mailing list
> >R-SIG-Mac@stat.math.ethz.ch
> >https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> 
> ---
> Byron Ellis (ellis@stat.harvard.edu)
> "Oook" -- The Librarian
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Kasper Daniel Hansen, Research Assistant
Department of Biostatistics, University of Copenhagen

From simon.urbanek at r-project.org  Thu Jun  9 18:56:06 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu Jun  9 18:56:16 2005
Subject: [R-SIG-Mac] some errors
In-Reply-To: <20050609050832.GA10889@turmalin.kubism.ku.dk>
References: <20050609003836.GB9993@turmalin.kubism.ku.dk>
	<m2vf4ob37n.fsf@macaroni.local>
	<D77FD93F-DAB2-4987-9AFA-9C10A554E7B2@stat.harvard.edu>
	<20050609050832.GA10889@turmalin.kubism.ku.dk>
Message-ID: <ABE88A1A-27FD-4C28-BE54-F962151A6E17@r-project.org>

Kasper,

On Jun 9, 2005, at 1:08 AM, Kasper Daniel Hansen wrote:

> First a summary: amongst the very many help suggestion, the best  
> approach seems to be to use ~/.Renviron: in that file it is  
> possible to set "environment" variables which are used even if  
> there is no environment, such as when start the R GUI. This means  
> that the values will be used in every invocation fo R - under  
> shell, in Carbon Emacs, in the GUI.

Yes.

> Now, I actually tried that out without success before my post. I  
> have done some further research and I think I have found some kind  
> of bug (or else something very strange).

I still cannot reproduce it - it works perfectly for me:

gammu:urbanek$ uname -srp
Darwin 8.1.0 powerpc
gammu:urbanek$ ls -ld /tmp/bar
drwxr-xr-x   2 urbanek  wheel  68 Jun  9 12:38 /tmp/bar
gammu:urbanek$ cat ~/.Renviron
R_LIBS=/tmp/bar
gammu:urbanek$ echo =$R_LIBS=
==
gammu:urbanek$ R

R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.1.0 Patched (2005-05-12), ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

 > .libPaths()
[1] "/tmp/bar"
[2] "/Library/Frameworks/R.framework/Resources/library"
 > Sys.getenv("R_LIBS")
     R_LIBS
"/tmp/bar"
 >

If you want to try to debug your problem, you may want to look at  
$R_HOME/library/base/R/Rprofile, because that is where .libPaths gets  
set.

> Just for completeness sake: I am running Tiger, with the R-2.1.0  
> patched version. I do not have administration privileges, but it  
> seems to me that the permissions on ~/Library/ and subdirectories  
> are as they ought to be.

Can you, please, check the ls -ld $R_LIBS output?

>>> There is another possible solution that involves editing
>>> ~/.MacOSX/environment.plist, but I never managed to get that working

BTW: That works only for LS-started applications.

Cheers,
Simon

From k.hansen at biostat.ku.dk  Thu Jun  9 20:01:14 2005
From: k.hansen at biostat.ku.dk (Kasper Daniel Hansen)
Date: Thu Jun  9 20:01:23 2005
Subject: [R-SIG-Mac] some errors
In-Reply-To: <ABE88A1A-27FD-4C28-BE54-F962151A6E17@r-project.org>
References: <20050609003836.GB9993@turmalin.kubism.ku.dk>
	<m2vf4ob37n.fsf@macaroni.local>
	<D77FD93F-DAB2-4987-9AFA-9C10A554E7B2@stat.harvard.edu>
	<20050609050832.GA10889@turmalin.kubism.ku.dk>
	<ABE88A1A-27FD-4C28-BE54-F962151A6E17@r-project.org>
Message-ID: <20050609180114.GA12329@turmalin.kubism.ku.dk>

Solved! (This is very embarasing, I had a .Rprofile in my test 
directory... - Thanks for pointing me to 
$R_HOME/library/base/R/Rprofile, allowing me to debug my problem)

Ok, solution: The by far preferred way to set the startup libraries is 
by creating a .Renviron file in ~. The file looks like

R_LIBS=/Users/kdh/Library/R/library

(replace kdh with username). Other environment variables may be placed 
in the file as well, I have R_PAPERSIZE and R_EDITOR. Relevant help 
page: ?Startup

Question: (and I know this is not Mac-specific): where do I find a list 
of environment variables which R respects? Specifically, it is possible 
to make R _not_ save the workspace upon exit by setting something in 
either .Renviron or .Rprofile. I know it can be done by a 
re-compilation. 

Thanks for all the help

Kasper

On Thu, Jun 09, 2005 at 12:56:06PM -0400, Simon Urbanek wrote:
> Kasper,
> 
> On Jun 9, 2005, at 1:08 AM, Kasper Daniel Hansen wrote:
> 
> >First a summary: amongst the very many help suggestion, the best  
> >approach seems to be to use ~/.Renviron: in that file it is  
> >possible to set "environment" variables which are used even if  
> >there is no environment, such as when start the R GUI. This means  
> >that the values will be used in every invocation fo R - under  
> >shell, in Carbon Emacs, in the GUI.
> 
> Yes.
> 
> >Now, I actually tried that out without success before my post. I  
> >have done some further research and I think I have found some kind  
> >of bug (or else something very strange).
> 
> I still cannot reproduce it - it works perfectly for me:
> 
> gammu:urbanek$ uname -srp
> Darwin 8.1.0 powerpc
> gammu:urbanek$ ls -ld /tmp/bar
> drwxr-xr-x   2 urbanek  wheel  68 Jun  9 12:38 /tmp/bar
> gammu:urbanek$ cat ~/.Renviron
> R_LIBS=/tmp/bar
> gammu:urbanek$ echo =$R_LIBS=
> ==
> gammu:urbanek$ R
> 
> R : Copyright 2005, The R Foundation for Statistical Computing
> Version 2.1.0 Patched (2005-05-12), ISBN 3-900051-07-0
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
> 
> > .libPaths()
> [1] "/tmp/bar"
> [2] "/Library/Frameworks/R.framework/Resources/library"
> > Sys.getenv("R_LIBS")
>     R_LIBS
> "/tmp/bar"
> >
> 
> If you want to try to debug your problem, you may want to look at  
> $R_HOME/library/base/R/Rprofile, because that is where .libPaths gets  
> set.
> 
> >Just for completeness sake: I am running Tiger, with the R-2.1.0  
> >patched version. I do not have administration privileges, but it  
> >seems to me that the permissions on ~/Library/ and subdirectories  
> >are as they ought to be.
> 
> Can you, please, check the ls -ld $R_LIBS output?
> 
> >>>There is another possible solution that involves editing
> >>>~/.MacOSX/environment.plist, but I never managed to get that working
> 
> BTW: That works only for LS-started applications.
> 
> Cheers,
> Simon
> 

-- 
Kasper Daniel Hansen, Research Assistant
Department of Biostatistics, University of Copenhagen

From Brian.Beckage at uvm.edu  Fri Jun 10 06:11:49 2005
From: Brian.Beckage at uvm.edu (Brian Beckage)
Date: Fri Jun 10 06:12:03 2005
Subject: [R-SIG-Mac] R Package compilation problem with Fortran
Message-ID: <p06210200becec1737a4b@[10.0.1.3]>

Hello,

I've tried to load a number of packages that require a Fortran 
compiler such as BMA and Hmisc, but I get the following error:

* Installing *source* package 'Hmisc' ...
** libs
g77   -fno-common  -g -O2 -c cidxcn.f -o cidxcn.o
make: g77: Command not found
make: *** [cidxcn.o] Error 127
ERROR: compilation failed for package 'Hmisc'


But I appear to have a Fortran compiler installed:

'which g77' yields '/sw/bin/g77'

>'g77 -v' yields

Reading specs from /sw/lib/gcc/powerpc-apple-darwin7.5.0/3.4.1/specs
Configured with: ../gcc-3.4.1/configure --prefix=/sw 
--enable-languages=f77 --infodir=/share/info --libexecdir=/lib 
--disable-shared
Thread model: posix
gcc version 3.4.1

'echo $PATH' yields:
/sw/bin:/sw/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/brianbeckage:/usr/X11R6/bin:.:/Users/brianbeckage/bin:/usr/local/bin

So g77 should be in the search path.

Any suggestions would be greatly appreciated.  I'm running R 2.1.0 
Patched under OSX 10.3.9.

Thanks,
Brian

-- 
*********************************************************************
Brian Beckage
Department of Botany
University of Vermont
Marsh Life Science Building
Burlington, VT 05405

Phone:  802 656-0197
Fax  :  802 656-0440
email:  Brian.Beckage@uvm.edu
web  :  www.uvm.edu/~bbeckage
*********************************************************************
	[[alternative HTML version deleted]]

From simon.urbanek at r-project.org  Fri Jun 10 16:43:30 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 10 Jun 2005 10:43:30 -0400
Subject: [R-SIG-Mac] R Package compilation problem with Fortran
In-Reply-To: <p06210200becec1737a4b@[10.0.1.3]>
References: <p06210200becec1737a4b@[10.0.1.3]>
Message-ID: <8647C117-237D-4F3B-BB05-B6F5F1DD2FAA@r-project.org>

Brian,

On Jun 10, 2005, at 12:11 AM, Brian Beckage wrote:

> g77   -fno-common  -g -O2 -c cidxcn.f -o cidxcn.o
> make: g77: Command not found
> make: *** [cidxcn.o] Error 127
> ERROR: compilation failed for package 'Hmisc'
>
> But I appear to have a Fortran compiler installed:
>
> 'which g77' yields '/sw/bin/g77'

How did attempt to compile the package? This is clearly an issue with  
setting your PATH correctly. Running R CMD INSTALL (or R itself) in  
the same shell that has the PATH you describe should work. But I  
suspect that's not what you're doing ... therefore it's important to  
know how exactly you try to install it ...

Cheers,
Simon


From Brian.Beckage at uvm.edu  Fri Jun 10 17:38:03 2005
From: Brian.Beckage at uvm.edu (Brian Beckage)
Date: Fri, 10 Jun 2005 11:38:03 -0400
Subject: [R-SIG-Mac] R Package compilation problem with Fortran
In-Reply-To: <8647C117-237D-4F3B-BB05-B6F5F1DD2FAA@r-project.org>
References: <p06210200becec1737a4b@[10.0.1.3]>
	<8647C117-237D-4F3B-BB05-B6F5F1DD2FAA@r-project.org>
Message-ID: <p06210200becf58be9d30@[10.0.1.2]>

I typically use R from within X11 but when installing packages I 
typically used the Aqua GUI...

So from within the GUI...I select 'Packages & Data' --> 'Package 
Installer'  and after selecting the Hmisc package, I then click on 
'Install Selected'.  Then I received the error that g77 is not found.

In addition, from within the R console, typing system('which g77') 
yields '/sw/bin/g77'
>
>How did attempt to compile the package? This is clearly an issue 
>with setting your PATH correctly. Running R CMD INSTALL (or R 
>itself) in the same shell that has the PATH you describe should 
>work. But I suspect that's not what you're doing ... therefore it's 
>important to know how exactly you try to install it ...
>

I have not used R CMD INSTALL before.  So I downloaded the package 
source onto my Desktop, unzipped it, and then typed:  R CMD INSTALL 
/Users/brianbeckage/Desktop/Hmisc

* Installing *source* package 'Hmisc' ...
** libs
g77   -fno-common  -g -O2 -c cidxcn.f -o cidxcn.o
g77   -fno-common  -g -O2 -c cidxcp.f -o cidxcp.o
g77   -fno-common  -g -O2 -c hoeffd.f -o hoeffd.o
g77   -fno-common  -g -O2 -c jacklins.f -o jacklins.o
g77   -fno-common  -g -O2 -c largrec.f -o largrec.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c ranksort.c -o ranksort.o
g77   -fno-common  -g -O2 -c rcorr.f -o rcorr.o
g77   -fno-common  -g -O2 -c wclosest.f -o wclosest.o
gcc-3.3 -bundle -flat_namespace -undefined suppress -L/usr/local/lib 
-o Hmisc.so cidxcn.o cidxcp.o hoeffd.o jacklins.o largrec.o 
ranksort.o rcorr.o wclosest.o 
-L/usr/local/lib/gcc/powerpc-apple-darwin6.8/3.4.2 -lg2c -lSystem 
-lcc_dynamic -framework R
ld: warning -L: directory name 
(/usr/local/lib/gcc/powerpc-apple-darwin6.8/3.4.2) does not exist
ld: can't locate file for: -lg2c
make: *** [Hmisc.so] Error 1
ERROR: compilation failed for package 'Hmisc'
** Removing 
'/Library/Frameworks/R.framework/Versions/2.1.0/Resources/library/Hmisc'
** Restoring previous 
'/Library/Frameworks/R.framework/Versions/2.1.0/Resources/library/Hmisc'

Any ideas?

Thanks again for your help.
Brian




-- 
*********************************************************************
Brian Beckage
Department of Botany
University of Vermont
Marsh Life Science Building
Burlington, VT 05405

Phone:  802 656-0197
Fax  :  802 656-0440
email:  Brian.Beckage at uvm.edu
web  :  www.uvm.edu/~bbeckage


From Brian.Beckage at uvm.edu  Fri Jun 10 19:35:35 2005
From: Brian.Beckage at uvm.edu (Brian Beckage)
Date: Fri, 10 Jun 2005 13:35:35 -0400
Subject: [R-SIG-Mac] Solved: R Package compilation problem with Fortran
In-Reply-To: <8647C117-237D-4F3B-BB05-B6F5F1DD2FAA@r-project.org>
References: <p06210200becec1737a4b@[10.0.1.3]>
	<8647C117-237D-4F3B-BB05-B6F5F1DD2FAA@r-project.org>
Message-ID: <p06210204becf7fa3bad8@[10.0.1.2]>

I solved this problem by installing a newer version of the fortran 
(g77 3.4) compiler from hpc.sourceforge.net into usr/local.

Best,
Brian


>Brian,
>
>On Jun 10, 2005, at 12:11 AM, Brian Beckage wrote:
>
>>g77   -fno-common  -g -O2 -c cidxcn.f -o cidxcn.o
>>make: g77: Command not found
>>make: *** [cidxcn.o] Error 127
>>ERROR: compilation failed for package 'Hmisc'
>>
>>But I appear to have a Fortran compiler installed:
>>
>>'which g77' yields '/sw/bin/g77'
>
>How did attempt to compile the package? This is clearly an issue 
>with setting your PATH correctly. Running R CMD INSTALL (or R 
>itself) in the same shell that has the PATH you describe should 
>work. But I suspect that's not what you're doing ... therefore it's 
>important to know how exactly you try to install it ...
>
>Cheers,
>Simon


-- 
*********************************************************************
Brian Beckage
Department of Botany
University of Vermont
Marsh Life Science Building
Burlington, VT 05405

Phone:  802 656-0197
Fax  :  802 656-0440
email:  Brian.Beckage at uvm.edu
web  :  www.uvm.edu/~bbeckage


From macq at llnl.gov  Fri Jun 10 20:11:05 2005
From: macq at llnl.gov (Don MacQueen)
Date: Fri, 10 Jun 2005 11:11:05 -0700
Subject: [R-SIG-Mac] R Package compilation problem with Fortran
In-Reply-To: <p06210200becec1737a4b@[10.0.1.3]>
References: <p06210200becec1737a4b@[10.0.1.3]>
Message-ID: <p06210215becf85322494@[128.115.153.6]>

My perspective is...

(1) If you build R from sources, and /sw (fink) is present on your 
system at the time you configure R, then R knows (internally, so to 
speak) about /sw, and will later on include it among the places it 
looks for things when you install packages.

(2) The binary version of R for OS X that you downloaded from CRAN 
was built without any dependencies on fink, so it does not 
(internally, so to speak) know about /sw, and does not look there for 
things. This is a good thing, because many, if not most, users of R 
who install the binary will not want to deal with add-on systems like 
fink. The developers/maintainers of R for OS X do not want to impose 
a requirement for fink on R uses, and this is appropriate.

My suggestion is to go to the help pages for the OS X version of R 
(the links are at the bottom of the download page, where it says "You 
may also want to read the R FAQ and R for Mac OS X FAQ or consult the 
developer page of R for Mac OS X."). Follow the instructions there to 
obtain a fortran that installs in /usr/local/bin. For example, on my 
system:

[153]% which g77
/usr/local/bin/g77

If you have g77 there, I am reasonably confident your version of R 
will find it when installing packages.

-Don

At 12:11 AM -0400 6/10/05, Brian Beckage wrote:
>Hello,
>
>I've tried to load a number of packages that require a Fortran
>compiler such as BMA and Hmisc, but I get the following error:
>
>* Installing *source* package 'Hmisc' ...
>** libs
>g77   -fno-common  -g -O2 -c cidxcn.f -o cidxcn.o
>make: g77: Command not found
>make: *** [cidxcn.o] Error 127
>ERROR: compilation failed for package 'Hmisc'
>
>
>But I appear to have a Fortran compiler installed:
>
>'which g77' yields '/sw/bin/g77'
>
>>'g77 -v' yields
>
>Reading specs from /sw/lib/gcc/powerpc-apple-darwin7.5.0/3.4.1/specs
>Configured with: ../gcc-3.4.1/configure --prefix=/sw
>--enable-languages=f77 --infodir=/share/info --libexecdir=/lib
>--disable-shared
>Thread model: posix
>gcc version 3.4.1
>
>'echo $PATH' yields:
>/sw/bin:/sw/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/brianbeckage:/usr/X11R6/bin:.:/Users/brianbeckage/bin:/usr/local/bin
>
>So g77 should be in the search path.
>
>Any suggestions would be greatly appreciated.  I'm running R 2.1.0
>Patched under OSX 10.3.9.
>
>Thanks,
>Brian
>
>--
>*********************************************************************
>Brian Beckage
>Department of Botany
>University of Vermont
>Marsh Life Science Building
>Burlington, VT 05405
>
>Phone:  802 656-0197
>Fax  :  802 656-0440
>email:  Brian.Beckage at uvm.edu
>web  :  www.uvm.edu/~bbeckage
>*********************************************************************
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA


From f.calboli at imperial.ac.uk  Mon Jun 13 20:19:37 2005
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Mon, 13 Jun 2005 19:19:37 +0100
Subject: [R-SIG-Mac] emacs/ess problems
Message-ID: <65504864-BAA4-42E1-BEAC-D95A047AA3AF@imperial.ac.uk>

Hi everybody,

I am having problems getting ess running with emacs... I got the  
latest ess, untarred it, read the readmes... edited my .emacs file  
end nothing works... Mind you, I _never_ got the blasted thing to  
work in any Unix I worked on, with the sole exception of Debian (but  
apt get emacs and ess talk to each other there).

To be honest if I can drop emacs from my life altogether I won't shed  
a tear, but in any case I'd like to ask the list:

1) can anyone give me detailed and OSX specific instructions on how  
to get ess work please?
2) if anyone knows an OSX native editor that is sintax aware for R/C/ 
Python, let me know. As I said, always stuck with emacs, but I'd love  
to drop it forever.

BTW, I am not sending any of my config files because they are  
obviously wrong, or things would work...

Cheers,

Federico

--
Federico C. F. Calboli
Department of Epidemiology and Public Health
Imperial College, St. Mary's Campus
Norfolk Place, London W2 1PG

Tel +44 (0)20 75941602   Fax +44 (0)20 75943193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com


From macq at llnl.gov  Mon Jun 13 20:44:13 2005
From: macq at llnl.gov (Don MacQueen)
Date: Mon, 13 Jun 2005 11:44:13 -0700
Subject: [R-SIG-Mac] emacs/ess problems
In-Reply-To: <65504864-BAA4-42E1-BEAC-D95A047AA3AF@imperial.ac.uk>
References: <65504864-BAA4-42E1-BEAC-D95A047AA3AF@imperial.ac.uk>
Message-ID: <p06210207bed38050036f@[128.115.153.6]>

I'm sorry you are having trouble. I have had very little trouble -- 
but I admit to using ESS only for syntax assistance.

In my home directory, I have a .emacs file. In it is this line:

(load "/erd/statistic/apps/R/ESS/ess-5.2.4/lisp/ess-site")

The first part of the path, /erd/statistic/apps/R/ESS, is a directory 
I created. It could be anything you want.
In that directory I put the ESS distribution file, i.e., 
ess-5.2.4.tar.gz, and unpacked it. This created the directory 
ess-5.2.4 and all of its subdirectories.

I believe that is *all* I have done.

I can use Emacs within an X Windows context (I've chosen to install 
this version of emacs using fink), or a Aqua-GUI version of Emacs 
that I downloaded from somewhere. Both of them recognize my ~/.emacs 
file and load ESS when I open a file with an appropriate suffix.

This same method works for me on both Solaris and OS X. In fact, the 
directory actually resides on a Solaris box and is automounted on my 
OS X box. Emacs loads ESS from the exact same set of ESS files, 
regardless of which host I login to. I don't do anything different on 
OS X than on Solaris, to make ESS available.

-Don

At 7:19 PM +0100 6/13/05, Federico Calboli wrote:
>Hi everybody,
>
>I am having problems getting ess running with emacs... I got the 
>latest ess, untarred it, read the readmes... edited my .emacs file 
>end nothing works... Mind you, I _never_ got the blasted thing to 
>work in any Unix I worked on, with the sole exception of Debian (but 
>apt get emacs and ess talk to each other there).
>
>To be honest if I can drop emacs from my life altogether I won't shed 
>a tear, but in any case I'd like to ask the list:
>
>1) can anyone give me detailed and OSX specific instructions on how 
>to get ess work please?
>2) if anyone knows an OSX native editor that is sintax aware for R/C/
>Python, let me know. As I said, always stuck with emacs, but I'd love 
>to drop it forever.
>
>BTW, I am not sending any of my config files because they are 
>obviously wrong, or things would work...
>
>Cheers,
>
>Federico
>
>--
>Federico C. F. Calboli
>Department of Epidemiology and Public Health
>Imperial College, St. Mary's Campus
>Norfolk Place, London W2 1PG
>
>Tel +44 (0)20 75941602   Fax +44 (0)20 75943193
>
>f.calboli [.a.t] imperial.ac.uk
>f.calboli [.a.t] gmail.com
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA


From simon.urbanek at r-project.org  Mon Jun 13 21:02:54 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 13 Jun 2005 15:02:54 -0400
Subject: [R-SIG-Mac] emacs/ess problems
In-Reply-To: <65504864-BAA4-42E1-BEAC-D95A047AA3AF@imperial.ac.uk>
References: <65504864-BAA4-42E1-BEAC-D95A047AA3AF@imperial.ac.uk>
Message-ID: <FF2174BC-99A1-4CD0-8300-D3386ABD3BA9@r-project.org>

Hi Federico,

On Jun 13, 2005, at 2:19 PM, Federico Calboli wrote:

> 1) can anyone give me detailed and OSX specific instructions on how  
> to get ess work please?

Ok, I assume you have working emacs - if you don't, well, that's  
another story, much longer one ;). I also assume that your have Xcode  
Tools installed.

Now copy/paste the following in Terminal:

cd
curl -O http://stat.ethz.ch/ESS/downloads/ess/ess-5.2.8.tar.gz
tar fvxz ess-5.2.8.tar.gz
rm -f ess
ln -s ess-5.2.8 ess
cd ess
make
cd
rm ess-5.2.8.tar.gz

Now, if you don't have an emacs config file or don't care to kill it  
you can copy/paste this:

cd
echo '(load "~/ess/lisp/ess-site")' > .emacs

If you do have one, just replace the > above with >>, but make sure  
you don't have other conflicting stuff there.

That should do the magic and you have ESS at your fingertips.

If you want to work with emacs, I personally recommend using the  
Carbon version and adding some more lines to .emacs that make your  
life much easier by making it behave as a Mac application (e.g.  
respecting <cmd><w>, <cmd><l> etc.). This is what I have in my .emacs:

(global-font-lock-mode 1)

(set-face-font 'default "-apple-monaco-medium-r-normal--10-100-75-75- 
m-100-mac-roman")
;; remap backspace on keyboard to be sane
;;
(keyboard-translate ?\C-h ?\C-?)

;;; MacOS X specific stuff
(setq mac-command-key-is-meta nil)

;; Define the return key to avoid problems on MacOS X
(define-key function-key-map [return] [13])

(global-set-key [(alt a)] 'mark-whole-buffer)
(global-set-key [(alt v)] 'yank)
(global-set-key [(alt c)] 'kill-ring-save)
(global-set-key [(alt x)] 'kill-region)
(global-set-key [(alt s)] 'save-buffer)
(global-set-key [(alt l)] 'goto-line)
(global-set-key [(alt o)] 'find-file)
(global-set-key [(alt f)] 'isearch-forward)
(global-set-key [(alt g)] 'isearch-repeat-forward)
(global-set-key [(alt w)]
                 (lambda () (interactive) (kill-buffer (current- 
buffer))))
(global-set-key [(alt .)] 'keyboard-quit)

(global-set-key [(alt q)] 'save-buffers-kill-emacs)


> 2) if anyone knows an OSX native editor that is sintax aware for R/ 
> C/Python, let me know. As I said, always stuck with emacs, but I'd  
> love to drop it forever.

Personally I use Xcode for everything (it has C[.*]/Java/Python  
support) except for R files (well, that's why I wrote that R editor  
for the R-GUI ;)) and emacs for .Rd files. However, I'm told that  
SubEthaEdit is a quite good and has a plenty of syntax-aware modules,  
but I never used it myself.

Cheers,
Simon


From simon.urbanek at r-project.org  Wed Jun 15 15:37:52 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 15 Jun 2005 09:37:52 -0400
Subject: [R-SIG-Mac] gfortran binary for Xcode 2.1
Message-ID: <9421A96B-B6FD-4F7E-AD52-8534D2C745E2@r-project.org>

Recently Apple released Xcode 2.1 for Mac OS X 10.4 (Tiger). Beside  
i686 support it also features new version of the gcc4 compiler  
collection. The good news is that finally it's possible to add most  
recent gfortran without touching the other system files. I have  
created a small package doing exactly that - see http:// 
wiki.urbanek.info/index.cgi?TigerGCC It contains gfortran apple build  
5202 with both 32-bit and 64-bit support and a small uninstall script  
so you can remove it at any time.

I highly recommend upgrading to Xcode 2.1 for all Tiger users that  
want to compile their own R using gcc4 (such R passes make check, but  
don't forget to add F77=gfortran FLIBS=/usr/lib/libgfortran.a to  
configure). If you use CRAN release of R, you can safely ignore this  
as the CRAN build uses gcc-3.3 and g77 which is still safer for 32- 
bit version of R and compatible with both Tiger and Panther.

Simon


From nassar at noos.fr  Wed Jun 15 18:36:30 2005
From: nassar at noos.fr (Naji)
Date: Wed, 15 Jun 2005 18:36:30 +0200
Subject: [R-SIG-Mac] Snow package on bi-proc G5
In-Reply-To: <9421A96B-B6FD-4F7E-AD52-8534D2C745E2@r-project.org>
Message-ID: <BED625AE.4670%nassar@noos.fr>

Hi all,

I'm running complex simulations and I'd like to distribute half the
simulation on each processor (one G5 machine)
The R code looks like

For (rep in 1:replications) # 300 replications
{
# the simulations results are stored in an array
dim=c(10,20,replications,100,3)
}

{
Analysis of simulations results
}

Is it possible to distribute the simulations on both proc..?
(G5 2.5 bi-proc, 2GB mem, OS10.4.1, R2.1, Aqua Gui1.11
It's my first experience with calculus distribution, a starting example will
be of great help


TIA
Naji


From simon.urbanek at r-project.org  Wed Jun 15 20:36:23 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 15 Jun 2005 14:36:23 -0400
Subject: [R-SIG-Mac] Snow package on bi-proc G5
In-Reply-To: <BED625AE.4670%nassar@noos.fr>
References: <BED625AE.4670%nassar@noos.fr>
Message-ID: <8D14380F-579A-47DB-B172-B1049CBA8042@r-project.org>

Naji,

On Jun 15, 2005, at 12:36 PM, Naji wrote:

> I'm running complex simulations and I'd like to distribute half the  
> simulation on each processor (one G5 machine)
> The R code looks like
>
> For (rep in 1:replications) # 300 replications
> {
> # the simulations results are stored in an array
> Is it possible to distribute the simulations on both proc..?

Yes.

I use pvm as back-end for snow, but I guess others should work, too.  
Example (very simple and stupid but should illustrate the idea):

 > library(snow)
Loading required package: rpvm
 > cl<-makeCluster(2)  # use 2 CPUs
 > clusterApplyLB(cl,1:6,function(x) mean(x+rnorm(10)))
[[1]]
[1] 0.836866

[[2]]
[1] 1.755120

[[3]]
[1] 3.385007

[[4]]
[1] 3.751311

[[5]]
[1] 4.805047

[[6]]
[1] 5.89379

When running simulations you may want to set the seed differently for  
each process [something like clusterApply(cl, 1:2, set.seed)] or use  
one of the RNG libraries, otherwise both CPUs will give you the same  
results - probably not what you want ;).

Cheers,
Simon


From nassar at noos.fr  Thu Jun 16 01:39:39 2005
From: nassar at noos.fr (Naji)
Date: Thu, 16 Jun 2005 01:39:39 +0200
Subject: [R-SIG-Mac] Re :  Snow package on bi-proc G5
In-Reply-To: <8D14380F-579A-47DB-B172-B1049CBA8042@r-project.org>
Message-ID: <BED688DB.46B5%nassar@noos.fr>

Simon,


Thanks for your quick reply.
Is the following efficient? Comments are welcome

Replicate.vect=1:replications
Results=assay(0,dim=c(replications,design.fact1,dsign.fact2..))
For (ifact1 in 1:design.fact1){
    for (ifact2 in 1:design.fact2){
        # Put the experiment conditions as global parameter
        clusterApplyLB(cl,replicate.vect,SimulateIt)
    }
}

SimulateIt=function(irepl){
Set.seed(1000+irep,kind="Super-Duper")
# simulations given the global variables
results[irepl,ifact1,ifact2,..]=....
}

By the way, thanks for your kiwi pages

Best regards
Naji

Le 15/06/05 20:36, ??Simon Urbanek?? <simon.urbanek at r-project.org> a ?crit?:

> Naji,
> 
> On Jun 15, 2005, at 12:36 PM, Naji wrote:
> 
>> I'm running complex simulations and I'd like to distribute half the
>> simulation on each processor (one G5 machine)
>> The R code looks like
>> 
>> For (rep in 1:replications) # 300 replications
>> {
>> # the simulations results are stored in an array
>> Is it possible to distribute the simulations on both proc..?
> 
> Yes.
> 
> I use pvm as back-end for snow, but I guess others should work, too.
> Example (very simple and stupid but should illustrate the idea):
> 
>> library(snow)
> Loading required package: rpvm
>> cl<-makeCluster(2)  # use 2 CPUs
>> clusterApplyLB(cl,1:6,function(x) mean(x+rnorm(10)))
> [[1]]
> [1] 0.836866
> 
> [[2]]
> [1] 1.755120
> 
> [[3]]
> [1] 3.385007
> 
> [[4]]
> [1] 3.751311
> 
> [[5]]
> [1] 4.805047
> 
> [[6]]
> [1] 5.89379
> 
> When running simulations you may want to set the seed differently for
> each process [something like clusterApply(cl, 1:2, set.seed)] or use
> one of the RNG libraries, otherwise both CPUs will give you the same
> results - probably not what you want ;).
> 
> Cheers,
> Simon
>


From kjbeath at kagi.com  Thu Jun 16 07:09:06 2005
From: kjbeath at kagi.com (Ken Beath)
Date: Thu, 16 Jun 2005 15:09:06 +1000
Subject: [R-SIG-Mac] Differences x86/Mac
Message-ID: <1A4FB01B-483C-49D7-916F-44FAFE09F6C6@kagi.com>

I have an optimisation that gets a different result on an AMD based  
PC to a G5 iMac. I suspect underflow (it involves small  
probabilitiies that need to be summed so can't be logged, next step  
is to rescale), is this likely and if so which is likely to be correct ?

Ken


From nassar at noos.fr  Thu Jun 16 12:56:14 2005
From: nassar at noos.fr (Naji)
Date: Thu, 16 Jun 2005 12:56:14 +0200
Subject: [R-SIG-Mac] Re :  Snow package on bi-proc G5
In-Reply-To: <8D14380F-579A-47DB-B172-B1049CBA8042@r-project.org>
Message-ID: <BED7276E.46DB%nassar@noos.fr>


I launched my simulations and found the both processors occupied at 100%
System 80%
User 20%
R 97.9% of one processor
"kerneltask" 50% of 2nd processor
"Open" task 50% of 2nd processor
-> R is the only user active application
I don't think system application can occupy fully one processor (for more
than 5 hours)..

Is TIGER dispatching the calculus? If yes, is it still worse using the
cluster approach? 


Best regards
Naji

Le 15/06/05 20:36, ??Simon Urbanek?? <simon.urbanek at r-project.org> a ?crit?:

> Naji,
> 
> On Jun 15, 2005, at 12:36 PM, Naji wrote:
> 
>> I'm running complex simulations and I'd like to distribute half the
>> simulation on each processor (one G5 machine)
>> The R code looks like
>> 
>> For (rep in 1:replications) # 300 replications
>> {
>> # the simulations results are stored in an array
>> Is it possible to distribute the simulations on both proc..?
> 
> Yes.
> 
> I use pvm as back-end for snow, but I guess others should work, too.
> Example (very simple and stupid but should illustrate the idea):
> 
>> library(snow)
> Loading required package: rpvm
>> cl<-makeCluster(2)  # use 2 CPUs
>> clusterApplyLB(cl,1:6,function(x) mean(x+rnorm(10)))
> [[1]]
> [1] 0.836866
> 
> [[2]]
> [1] 1.755120
> 
> [[3]]
> [1] 3.385007
> 
> [[4]]
> [1] 3.751311
> 
> [[5]]
> [1] 4.805047
> 
> [[6]]
> [1] 5.89379
> 
> When running simulations you may want to set the seed differently for
> each process [something like clusterApply(cl, 1:2, set.seed)] or use
> one of the RNG libraries, otherwise both CPUs will give you the same
> results - probably not what you want ;).
> 
> Cheers,
> Simon
>


From goedman at mac.com  Fri Jun 17 00:03:41 2005
From: goedman at mac.com (Rob J Goedman)
Date: Thu, 16 Jun 2005 15:03:41 -0700
Subject: [R-SIG-Mac] [Rd] 2.1.0a for Macs (PR#7952)
In-Reply-To: <20050616213019.26B8FA1E7@slim.kubism.ku.dk>
References: <20050616213019.26B8FA1E7@slim.kubism.ku.dk>
Message-ID: <8C6599A1-8ECE-406B-B0D1-A76B05B0D849@mac.com>

Hi Jennifer,

Could you let us know which version of OS X you are running?

Also, Simon responded to that email and indicated that the
nightly build newer than 1564 do not show this behavior (on
slower machines). Can you check on 1 of the machines using the
latest nightly build (1596)?

Its at: http://www.rosuda.org/R/nightly/ at the bottom of the page.
Please use the debug version initially.

Rob

On Jun 16, 2005, at 2:30 PM, jbaltzer at oeb.harvard.edu wrote:

> I am writing regarding serious problems that a number of
> researchers at a workshop held by the Smithsonian Tropical
> Research Institute are encountering with the most recent R
> version for Macs (the patched version of 2.1.0 (2.1.0a) that
> you indicate should be used over 2.1.0).
>
> The following problems are not specific to my computer but are
> being experienced by ALL Mac users at this workshop running
> 2.1.0a to varying degrees. I installed the program about a week
> ago and immediately I started getting a warning messages
> particularly when browsing my files using ls(), search(), gc(),
> etc.  2.1.0a automatically adds an open parentheses at the end
> of any command requiring () (only intermittently, however) and
> then generates a warning in red.  I am afraid that I do not
> have the warning because R no longer will open on my computer
> without reinstallation so I am forced to use a PC.  The same
> warning message has been posted by one other on the help email
> list.  More recently, R has begun to crash for no particular
> reason (no large program running).  Often when I then try to
> restart R 2.1.0a crashes during start up and in order to get it
> functioning again I have to reinstall!  The first time this
> happened I decided to go back to an earlier version of R that I
> knew would be stable but following binary compilation no gui is
> installed on my computer and I can't run the program.  The only
> version my computer can now install properly is 2.1.0a but as
> described above the problems with the program prohibit me from
> using it.
>
> If you could please advise on how to deal with these problems
> (particularly the corruption of my system by 2.1.0a) all the
> Mac users at this conference would be appreciative.
>
> Jennifer Baltzer
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From Ed.Shea at geodecapital.com  Fri Jun 17 21:16:35 2005
From: Ed.Shea at geodecapital.com (Shea, Ed)
Date: Fri, 17 Jun 2005 15:16:35 -0400
Subject: [R-SIG-Mac] 64bit Tiger performance vs 32 bit Wintel vs 32 bit Linux
Message-ID: <1E992CFBFAA4424189FA42EA641BFD0D0336DC0A@MSGBOSCLA2WIN.DMN1.FMR.COM>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20050617/f68d27db/attachment.pl

From simon.urbanek at r-project.org  Sat Jun 18 21:31:28 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 18 Jun 2005 15:31:28 -0400
Subject: [R-SIG-Mac] 64bit Tiger performance vs 32 bit Wintel vs 32 bit
	Linux
In-Reply-To: <1E992CFBFAA4424189FA42EA641BFD0D0336DC0A@MSGBOSCLA2WIN.DMN1.FMR.COM>
References: <1E992CFBFAA4424189FA42EA641BFD0D0336DC0A@MSGBOSCLA2WIN.DMN1.FMR.COM>
Message-ID: <DD0D8F88-E9AB-4F16-9DC8-059BE39B7752@r-project.org>

On Jun 17, 2005, at 3:16 PM, Shea, Ed wrote:

> Has anyone experienced any performance improvements running with a  
> 64bit tiger compiled R.2.* vs the windows and/or Linux versions (on  
> comparable hardware)?

By definition using 64-bit addressing instead of 32-bit is slower,  
simply because all pointers are twice the size and hence twice the  
memory is moved/accessed when dealing with pointers. There is no  
penalty for running 32-bit programs on ppc64 therefore 64-bit  
programs are usually slightly slower than the same 32-bit programs  
and my tests with R confirm this.

It's hard to make any cross-platform claims, because "comparable  
hardware" is a very vague term. If you tell me what you're interested  
in I could run some tests on G5 and amd64 ...

>   Aside from access to more memory, are there any other benefits?

AFAIK, no.

Cheers,
Simon


From simon.urbanek at r-project.org  Sat Jun 18 21:39:18 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 18 Jun 2005 15:39:18 -0400
Subject: [R-SIG-Mac] 64bit Tiger performance vs 32 bit Wintel vs 32 bit
	Linux
In-Reply-To: <DD0D8F88-E9AB-4F16-9DC8-059BE39B7752@r-project.org>
References: <1E992CFBFAA4424189FA42EA641BFD0D0336DC0A@MSGBOSCLA2WIN.DMN1.FMR.COM>
	<DD0D8F88-E9AB-4F16-9DC8-059BE39B7752@r-project.org>
Message-ID: <704CC096-E84E-496F-A215-EF1DDD4E9F97@r-project.org>

On Jun 18, 2005, at 3:31 PM, Simon Urbanek wrote:

>>   Aside from access to more memory, are there any other benefits?
>
> AFAIK, no.

I should add that I meant that there are no other benefits comparing  
32-bit R and 64-bit R on Tiger. Of course comparing 32-bit R on ppc  
Tiger with x86 Windows or Linux is a different story with many  
differences ranging from the CPU architecture, memory management to  
the optimization and available BLAS libraries ... (of course you  
could expand this and compare Linux on a G5 etc.).

Cheers,
Simon


From nassar at noos.fr  Mon Jun 20 03:41:48 2005
From: nassar at noos.fr (Naji)
Date: Mon, 20 Jun 2005 03:41:48 +0200
Subject: [R-SIG-Mac] Re :  Re :  Snow package on bi-proc G5
In-Reply-To: <BED7276E.46DB%nassar@noos.fr>
Message-ID: <BEDBEB7F.4824%nassar@noos.fr>

Hi all,

I finally succeeded installing PVM softwae, RPVM & Snow packages.
Simon example worked perfectly well

I'm encountering 2 problems
- a silly one (how to fix env. var on my machine OS Tiger)
    in order to run PVM (and snow) I need to declare the following
        export PVM_ARCH=darwin
        export PVM_ROOT=$HOME/pvm3
        export PVM_DPATH=$PVM_ROOT/lib/pvmd
        export PATH=$PATH:$PVM_ROOT/lib:$PVM_ROOT/lib/$PVM_ARCH
        export MANPATH=$PVM_ROOT/man
    In which file should I save these commands so the env. var are declared
automatically at login

- the second is adapting a loop for a Cluster (a replication eiher a loop or
a job for one proc)
    The loop code (working fine) & the cluster code giving the following
errors
> z # z is the results of the ClusterApply
[[1]]
[1] "Error in any(shape <= 0) : Object \"pdmabrd\" not found\n"
attr(,"class")
[1] "try-error"

The title array has been initialized


Thanks in advance for your help
Any comments regarding code optimization is highly welcome..

Best regards
Naji


Le 16/06/05 12:56, ??Naji?? <nassar at noos.fr> a ?crit?:

> 
> I launched my simulations and found the both processors occupied at 100%
> System 80%
> User 20%
> R 97.9% of one processor
> "kerneltask" 50% of 2nd processor
> "Open" task 50% of 2nd processor
> -> R is the only user active application
> I don't think system application can occupy fully one processor (for more
> than 5 hours)..
> 
> Is TIGER dispatching the calculus? If yes, is it still worse using the
> cluster approach?
> 
> 
> Best regards
> Naji
> 
> Le 15/06/05 20:36, ??Simon Urbanek?? <simon.urbanek at r-project.org> a ?crit?:
> 
>> Naji,
>> 
>> On Jun 15, 2005, at 12:36 PM, Naji wrote:
>> 
>>> I'm running complex simulations and I'd like to distribute half the
>>> simulation on each processor (one G5 machine)
>>> The R code looks like
>>> 
>>> For (rep in 1:replications) # 300 replications
>>> {
>>> # the simulations results are stored in an array
>>> Is it possible to distribute the simulations on both proc..?
>> 
>> Yes.
>> 
>> I use pvm as back-end for snow, but I guess others should work, too.
>> Example (very simple and stupid but should illustrate the idea):
>> 
>>> library(snow)
>> Loading required package: rpvm
>>> cl<-makeCluster(2)  # use 2 CPUs
>>> clusterApplyLB(cl,1:6,function(x) mean(x+rnorm(10)))
>> [[1]]
>> [1] 0.836866
>> 
>> [[2]]
>> [1] 1.755120
>> 
>> [[3]]
>> [1] 3.385007
>> 
>> [[4]]
>> [1] 3.751311
>> 
>> [[5]]
>> [1] 4.805047
>> 
>> [[6]]
>> [1] 5.89379
>> 
>> When running simulations you may want to set the seed differently for
>> each process [something like clusterApply(cl, 1:2, set.seed)] or use
>> one of the RNG libraries, otherwise both CPUs will give you the same
>> results - probably not what you want ;).
>> 
>> Cheers,
>> Simon
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: loop.pdf
Type: application/octet-stream
Size: 21621 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20050620/3c6ce0c2/loop-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Clustercode.pdf
Type: application/octet-stream
Size: 23932 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20050620/3c6ce0c2/Clustercode-0001.obj

From simon.urbanek at r-project.org  Mon Jun 20 08:07:35 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 20 Jun 2005 02:07:35 -0400
Subject: [R-SIG-Mac] Re :  Re :  Snow package on bi-proc G5
In-Reply-To: <BEDBEB7F.4824%nassar@noos.fr>
References: <BEDBEB7F.4824%nassar@noos.fr>
Message-ID: <0A11038C-5A00-44D0-AB98-B6B84956ACA6@r-project.org>

Hi Naji,

On Jun 19, 2005, at 9:41 PM, Naji wrote:

> I'm encountering 2 problems
> - a silly one (how to fix env. var on my machine OS Tiger)
>     in order to run PVM (and snow) I need to declare the following

You don't need all those - pvm sets them up automatically. The only  
one you really need is PVM_ROOT. You can set it in many places -  
depending how you start R and pvm.  For the shell you can use  
~/.profile - that's sourced by bash and friends (the site version is  
in /etc/profile btw). For R you can use .Renviron (see ?Startup). I'm  
not sure how exactly you setup your PVM, but for a cluster I use  
~/.ssh/environment (see sshd docs for details) - that works on any  
platform and allows inhomogenous clusters.

> - the second is adapting a loop for a Cluster (a replication eiher  
> a loop or a job for one proc)
>     The loop code (working fine) & the cluster code giving the  
> following
> errors

You have to keep in mind that the master node (the one you're running  
interactively) is separate from the working nodes. If you want  
variables to be assigned in other nodes as well, you have to use  
clusterExport (or use assignments in clusterCall and friends). In  
your case all the variables you define on top have to be exported (as  
well as any data you need) - if you don't have too much junk in your  
workspace you could even use something like clusterExport(cl, ls())

Cheers,
Simon


From nassar at noos.fr  Mon Jun 20 15:47:47 2005
From: nassar at noos.fr (Naji)
Date: Mon, 20 Jun 2005 15:47:47 +0200
Subject: [R-SIG-Mac] Re : Re :  Re :  Snow package on bi-proc G5
In-Reply-To: <0A11038C-5A00-44D0-AB98-B6B84956ACA6@r-project.org>
Message-ID: <BEDC95A3.485E%nassar@noos.fr>

Simon, dear all

Thanks for your quick reply.

The first point is fixed, I had put the .profile at /usr directory. I moved
it at $HOME, restarted and it worked perfectly.

I adopted the clusterExport solution.. And it's running quite fine..

Clusterapplylb is sending back a list where each element contains the
results of on replication. I'm only interested with the mean of of those
replications (+ memory limitations)
One solution to circumvent that is a loop (say 10) over cl (say 1:2)
Rather than a cl(1:200).. The first is taking 1min, the 2nd 2min20
for (j in 1:(each/2)){
    sim=clusterApplyLB(cl,1:2,iterate)
    titles=titles+sim[[1]]+sim[[2]]
    }
Rather than
sim=clusterApplyLB(cl,1:each,iterate)

A more elegant solution is highly welcome (for the first solution, I guess
the node occupation won't be optimized in case of lot of nodes. All the
nodes have to finish their job, actualize the list before getting to the
next loop)

Can I define an array that stores the sum of the simulations
 ie in the ClustrApplyLB function:
Iterate=function(iter){
..
Clusterexport(cl,SumSimul)
SumSimul=SumSimul+simul
}
I don't think it would work as clusterapply is at the node level and
clusterexport at the master level, and performance will suffer from
communicating the SumSimul...

Best regards
Naji

Le 20/06/05 8:07, ??Simon Urbanek?? <simon.urbanek at r-project.org> a ?crit?:

> Hi Naji,
> 
> On Jun 19, 2005, at 9:41 PM, Naji wrote:
> 
>> I'm encountering 2 problems
>> - a silly one (how to fix env. var on my machine OS Tiger)
>>     in order to run PVM (and snow) I need to declare the following
> 
> You don't need all those - pvm sets them up automatically. The only
> one you really need is PVM_ROOT. You can set it in many places -
> depending how you start R and pvm.  For the shell you can use
> ~/.profile - that's sourced by bash and friends (the site version is
> in /etc/profile btw). For R you can use .Renviron (see ?Startup). I'm
> not sure how exactly you setup your PVM, but for a cluster I use
> ~/.ssh/environment (see sshd docs for details) - that works on any
> platform and allows inhomogenous clusters.
> 
>> - the second is adapting a loop for a Cluster (a replication eiher
>> a loop or a job for one proc)
>>     The loop code (working fine) & the cluster code giving the
>> following
>> errors
> 
> You have to keep in mind that the master node (the one you're running
> interactively) is separate from the working nodes. If you want
> variables to be assigned in other nodes as well, you have to use
> clusterExport (or use assignments in clusterCall and friends). In
> your case all the variables you define on top have to be exported (as
> well as any data you need) - if you don't have too much junk in your
> workspace you could even use something like clusterExport(cl, ls())
> 
> Cheers,
> Simon
>


From nassar at noos.fr  Wed Jun 22 15:12:16 2005
From: nassar at noos.fr (Naji)
Date: Wed, 22 Jun 2005 15:12:16 +0200
Subject: [R-SIG-Mac] Snow package  --> Results
In-Reply-To: <0A11038C-5A00-44D0-AB98-B6B84956ACA6@r-project.org>
Message-ID: <BEDF3050.4963%nassar@noos.fr>

First, many thanks to Simon Urbanek for his help.

A simulation case (50x34x5x3 & 250 replications) each based on behavior of
2500 consumers takes
- 2h20mins on a laptop (2 MHz, 1Go, WinXp)
- 1h on a G5 bi-proc (2.5 Mhz, 2Go)
A loop was used for the laptop, the same loop was transposed as function for
the Mac

Best regards
Naji


From simon.urbanek at r-project.org  Wed Jun 22 20:08:40 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 22 Jun 2005 14:08:40 -0400
Subject: [R-SIG-Mac] R 2.1.1 for optimized for G5+Tiger
Message-ID: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>

Since several users asked for it, I have compiled R 2.1.1  
aggressively optimized for G5 and Tiger. It comes bundled with the  
latest R.app (build 1608) and gfortran compiler (optional). You can  
download it from
http://wiki.urbanek.info/files/R-2.1.1-G5.dmg

Note that you should install Xcode 2.1 and the supplied gfortran  
compiler (it's optional in the above package, select "custom  
install") in order to be able to compile packages from sources. Since  
there is no optimized G5 packages on CRAN, it's likely that you want  
to compile them from sources.

This is not an official release. We plan to have a Tiger release at  
some point, but we want to offer it with package bundles and we're  
working on that.

Any feedback on this build is highly welcome.

Cheers,
Simon


From wettenhall at wehi.EDU.AU  Thu Jun 23 07:29:39 2005
From: wettenhall at wehi.EDU.AU (James Wettenhall)
Date: Thu, 23 Jun 2005 15:29:39 +1000 (EST)
Subject: [R-SIG-Mac] Just checking - X11 Tcl/Tk is still the default (not
	Aqua), right?
In-Reply-To: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>
References: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>
Message-ID: <4268.144.133.91.34.1119504579.squirrel@homebase.wehi.edu.au>

Hi,

Hopefully this is a simple question.  I'm running a Bioconductor workshop
in which people will bring their own laptops.  I expect most will be using
Windows, but there may be a few using MacOS X.  I need to provide
instructions for how to install the software beforehand, including
R-Tcl/Tk stuff.  So I just wanted to check that the R 2.1.1 for MacOS X
binary from CRAN is still configured by default to use X11 Tcl/Tk, right?

So you would install Tcl/Tk from source in /usr/local/ after having
installed the developer tools and X11SDK from the Xcode CD, then
library(tcltk) should work. Right?

Whereas if you want to use Aqua Tcl/Tk, you would have to build R from
source :-(, or get a binary from somewhere other than the default CRAN
location.  Right?  But then on the upside, at least getting binaries for
Tcl/Tk extensions would be easier than for X11 :-).

Hopefully this won't take up too much of anyone's time.  I think it should
just be a Yes/No answer to this question: X11 Tcl/Tk is still the default
(not Aqua), right?

Best wishes,
James


From simon.urbanek at r-project.org  Thu Jun 23 07:57:53 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 23 Jun 2005 01:57:53 -0400
Subject: [R-SIG-Mac] Just checking - X11 Tcl/Tk is still the default
	(not Aqua), right?
In-Reply-To: <4268.144.133.91.34.1119504579.squirrel@homebase.wehi.edu.au>
References: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>
	<4268.144.133.91.34.1119504579.squirrel@homebase.wehi.edu.au>
Message-ID: <6C3B0696-6976-41B7-94BE-449002E36EE9@r-project.org>

Hi James,

On Jun 23, 2005, at 1:29 AM, James Wettenhall wrote:

> So I just wanted to check that the R 2.1.1 for MacOS X binary from  
> CRAN is still configured by default to use X11 Tcl/Tk, right?

There is currently only R 2.1.0a binary on CRAN which in fact comes  
with X11 Tcl/Tk support. The Tcl/Tk libraries are not installed by  
default, you have to click on 'custom setup' and enable them during  
the installation.

I do have a release candidate binary for R 2.1.1 with the latest  
tcltk 8.4.10 for X11 and the most recent GUI. I can give you the link  
if you want. (It's not yet on CRAN, because we changed the way we  
build the binaries (to make it even more compatible) and persons key  
to the testing and/or release are traveling right now).

> So you would install Tcl/Tk from source in /usr/local/

You don't need that - they come already in the R CRAN binary.

> after having installed the developer tools and X11SDK from the  
> Xcode CD, then library(tcltk) should work. Right?

Strictly speaking you don't need the Xcode/dev tools unless you want  
to compile packages from sources. As long as all packages you need  
are on CRAN as mac binaries, you don't need Xcode. If you want to  
compile packages, then in addition to Xcode you will need a Fortran  
compiler (in fact the 2.1. RC come with one).

> Whereas if you want to use Aqua Tcl/Tk, you would have to build R  
> from source

In fact Aqua Tcl/Tk is shipped with Tiger, so on 10.4 you have it  
already. For older systems there are binaries around. The catch is  
that it doesn't work with the tcltk R package and the GUI (however,  
Jan may have instructions to get it running under some circumstances  
- you may want to look in the SIG-Mac archives).

> Right?  But then on the upside, at least getting binaries for Tcl/ 
> Tk extensions would be easier than for X11 :-).

I suspect that it's the other way round - extensions are more likely  
to work with X11 as this is more widely used, but this is just a  
speculation based on my experience with other toolkits.

> Hopefully this won't take up too much of anyone's time.  I think it  
> should just be a Yes/No answer to this question: X11 Tcl/Tk is  
> still the default (not Aqua), right?

Yes for the reasons above.

Cheers,
Simon


From sstoddar at life.uiuc.edu  Wed Jun 22 23:14:07 2005
From: sstoddar at life.uiuc.edu (Steven T. Stoddard)
Date: Wed, 22 Jun 2005 16:14:07 -0500
Subject: [R-SIG-Mac] load history does not work on OS X
Message-ID: <64860ED0-9C3F-4C53-9EA4-7F1AC6D62E61@life.uiuc.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20050622/a74c8020/attachment.pl

From tadams1 at cinci.rr.com  Thu Jun 23 15:19:37 2005
From: tadams1 at cinci.rr.com (Thomas Adams)
Date: Thu, 23 Jun 2005 09:19:37 -0400
Subject: [R-SIG-Mac] R 2.1.1 for optimized for G5+Tiger
In-Reply-To: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>
References: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>
Message-ID: <92214510-C14C-47FF-B94B-57F3F6349081@cinci.rr.com>

Simon,

Is there any advantage for G4 Mac R users to use this release, or  
should it be avoided?

Regards,
Tom


On Jun 22, 2005, at 2:08 PM, Simon Urbanek wrote:

> Since several users asked for it, I have compiled R 2.1.1
> aggressively optimized for G5 and Tiger. It comes bundled with the
> latest R.app (build 1608) and gfortran compiler (optional). You can
> download it from
> http://wiki.urbanek.info/files/R-2.1.1-G5.dmg
>
> Note that you should install Xcode 2.1 and the supplied gfortran
> compiler (it's optional in the above package, select "custom
> install") in order to be able to compile packages from sources. Since
> there is no optimized G5 packages on CRAN, it's likely that you want
> to compile them from sources.
>
> This is not an official release. We plan to have a Tiger release at
> some point, but we want to offer it with package bundles and we're
> working on that.
>
> Any feedback on this build is highly welcome.
>
> Cheers,
> Simon
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From simon.urbanek at r-project.org  Thu Jun 23 16:02:34 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 23 Jun 2005 10:02:34 -0400
Subject: [R-SIG-Mac] R 2.1.1 for optimized for G5+Tiger
In-Reply-To: <92214510-C14C-47FF-B94B-57F3F6349081@cinci.rr.com>
References: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>
	<92214510-C14C-47FF-B94B-57F3F6349081@cinci.rr.com>
Message-ID: <47F90514-492D-4B0D-9313-DE3D64485F35@r-project.org>

Thomas,

On Jun 23, 2005, at 9:19 AM, Thomas Adams wrote:

> Is there any advantage for G4 Mac R users to use this release, or  
> should it be avoided?

In theory it should not work on a G4 at all, because it may be using  
instructions that are supported only by the G5 CPUs. This optimized  
release is meant for G5 only.
In practice I didn't check it on a G4, so I don't know, but at any  
rate G4 users are better off using a G4 optimized version. I didn't  
bother compiling such a beast, because whoever needs high performance  
probably has (or should get) G5 anyway ;). The difference between G4  
and G5 is huge (more than twice as fast on similar clock speed - I  
remember posting some rough timings here). At this point I should  
probably mention that Tiger's vecLib is much more reliable and faster  
that Panther's so the upgrade is almost a must for heavy computing  
applications (if you're reluctant to upgrade completely (i.e. you  
install both on a machine), you can actually use Tiger's vecLib in  
Panther with some minor tweaks ...).

Cheers,
Simon


From nassar at noos.fr  Thu Jun 23 17:44:18 2005
From: nassar at noos.fr (Naji)
Date: Thu, 23 Jun 2005 17:44:18 +0200
Subject: [R-SIG-Mac] Re :  R 2.1.1 for optimized for G5+Tiger
In-Reply-To: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>
Message-ID: <BEE0A572.4A07%nassar@noos.fr>


A simulation case (50x34x5x3 & 250 replications) each based on behavior of
2500 consumers takes
- 1h with the 'old' version 2.1.0
- 35min using 2.1.1 for G5&Tiger
on a G5 bi-proc (2.5 Mhz, 2Go)
(both after restarting the MAC)

 Well done Simon

Naji

Le 22/06/05 20:08, ??Simon Urbanek?? <simon.urbanek at r-project.org> a ?crit?:
> Since several users asked for it, I have compiled R 2.1.1
> aggressively optimized for G5 and Tiger. It comes bundled with the
> latest R.app (build 1608) and gfortran compiler (optional). You can
> download it from
> http://wiki.urbanek.info/files/R-2.1.1-G5.dmg
> 
> Note that you should install Xcode 2.1 and the supplied gfortran
> compiler (it's optional in the above package, select "custom
> install") in order to be able to compile packages from sources. Since
> there is no optimized G5 packages on CRAN, it's likely that you want
> to compile them from sources.
> 
> This is not an official release. We plan to have a Tiger release at
> some point, but we want to offer it with package bundles and we're
> working on that.
> 
> Any feedback on this build is highly welcome.
> 
> Cheers,
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From j.van_den_hoff at fz-rossendorf.de  Thu Jun 23 18:14:28 2005
From: j.van_den_hoff at fz-rossendorf.de (joerg van den hoff)
Date: Thu, 23 Jun 2005 18:14:28 +0200
Subject: [R-SIG-Mac]  Re :  R 2.1.1 for optimized for G5+Tiger
Message-ID: <42BADFE4.4000505@fz-rossendorf.de>


> Since several users asked for it, I have compiled R 2.1.1
> aggressively optimized for G5 and Tiger. It comes bundled with the
> latest R.app (build 1608) and gfortran compiler (optional). You can
> download it from
> http://wiki.urbanek.info/files/R-2.1.1-G5.dmg
> 
> Note that you should install Xcode 2.1 and the supplied gfortran
> compiler (it's optional in the above package, select "custom
> install") in order to be able to compile packages from sources. Since
> there is no optimized G5 packages on CRAN, it's likely that you want
> to compile them from sources.
> 
> This is not an official release. We plan to have a Tiger release at
> some point, but we want to offer it with package bundles and we're
> working on that.
> 
> Any feedback on this build is highly welcome.
> 
> Cheers,
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

I tried  a run of 1000 non-linear fits (i.e. all the time is spent in 
"nls" and friends).
I found no significant difference in the system.time() output (2.1.1. 
seemed even a bit slower). both took about 22-24 sec. did a miss something?

(I installed only the framework and used the terminal version).

a question on the side: would it be a bad idea to install the 
R.framework with a name including the release (i.e. R.2.1.1.framework) 
and than use a place holder symlink R.framework? in this way switching 
between releases would  be a bit easier.


one more observation: the readline functionality is not complete, i.e. 
ctr-R does not work for accessing the command history.


best wishes

joerg


From simon.urbanek at r-project.org  Thu Jun 23 18:57:40 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 23 Jun 2005 12:57:40 -0400
Subject: [R-SIG-Mac] Re :  R 2.1.1 for optimized for G5+Tiger
In-Reply-To: <42BADFE4.4000505@fz-rossendorf.de>
References: <42BADFE4.4000505@fz-rossendorf.de>
Message-ID: <E6EA3B3E-2731-4C71-B3CA-2918B6EA73A3@r-project.org>

Hi J?rg,

On Jun 23, 2005, at 12:14 PM, joerg van den hoff wrote:

> I tried  a run of 1000 non-linear fits (i.e. all the time is spent  
> in "nls" and friends).
> I found no significant difference in the system.time() output  
> (2.1.1. seemed even a bit slower). both took about 22-24 sec. did a  
> miss something?

I didn't look at the implementation of nls, but If the time is spent  
mostly in vecLib or R code, there should be no difference. The  
optimization usually gains only a few percent. I suspect that Naji's  
speed up is due to the update of R.app, because it's running the  
event loop less frequently (there should be posts about that on the  
archives) - it used to slow down R. Unfortunately most of the really  
fast optimizations don't apply to R, because R uses doubles most of  
the time and they cannot be vectorized. Still, C/C++ code should  
benefit from the optimization (I wonder why it should run slower,  
that's really startling).

> a question on the side: would it be a bad idea to install the  
> R.framework with a name including the release (i.e. R. 
> 2.1.1.framework) and than use a place holder symlink R.framework?  
> in this way switching between releases would  be a bit easier.

The idea of the framework is actually to have support for multiple  
releases - just look in R.framework/Versions. If you want to switch  
versions, all you have to do is to change the "Current" symlink. This  
is the way frameworks work and I think it's really convenient. [BTW:  
if you set R_HOME to the full path including the version, you can  
actually run multiple R versions even without changing the symlink,  
because all packages and libraries are linked with the full path.]

> one more observation: the readline functionality is not complete,  
> i.e. ctr-R does not work for accessing the command history.

It's using libedit which comes with Tiger, not readline, so the  
differences are simply in what each library provides. Apple cannot  
ship the system with readline due to licensing issues (readline is  
not LGPL).

Cheers,
Simon


From joel3000 at gmail.com  Thu Jun 23 21:39:44 2005
From: joel3000 at gmail.com (Joel Bremson)
Date: Thu, 23 Jun 2005 12:39:44 -0700
Subject: [R-SIG-Mac] Fwd: os x / g95 package namespace load problem
In-Reply-To: <1253d67a050623122066eb8662@mail.gmail.com>
References: <1253d67a050623122066eb8662@mail.gmail.com>
Message-ID: <1253d67a05062312392112e0c2@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20050623/a0bf80a1/attachment.pl

From simon.urbanek at r-project.org  Thu Jun 23 23:03:22 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 23 Jun 2005 17:03:22 -0400
Subject: [R-SIG-Mac] Fwd: os x / g95 package namespace load problem
In-Reply-To: <1253d67a05062312392112e0c2@mail.gmail.com>
References: <1253d67a050623122066eb8662@mail.gmail.com>
	<1253d67a05062312392112e0c2@mail.gmail.com>
Message-ID: <9CA7ADDB-1825-4C8D-BCB2-71597D17B2F1@r-project.org>

Joel,

On Jun 23, 2005, at 3:39 PM, Joel Bremson wrote:

> I have a working package for linux, including fortran 95 code  
> compiled with g95, that I need to port to OS X. The package works  
> on Linux and seems to load on the Mac,but when I try to run a  
> function that calls C or Fortran I'm told that the symbol is not  
> loaded.

A high-level question first: what are you trying to do here? (I'm  
assuming you're the author of the package - if not, send all this to  
the author ;)). Using a fixed Makefile is a really bad idea, because  
you lose all the flags that R configuration conveniently detected for  
you, so that package is likely to run only on one specific system and  
nowhere else. In most cases you don't need any Makefile at all,  
because R supplies all that is needed. You can still specify any  
additional flags or dependencies using Makevars. Finally, even if you  
have a very complex setting, it's easier to use configure and  
Makevars than building the entire Makefile (which involves using  
autoconf anyway). Actually from the Makefile you provided it seems to  
me that it's entirely superfluous, because you use no complex  
settings at all.

> I was told to use the .dylib extension instead of .so

Who told you that? If you used the regular process for compiling  
package code that R provides, you'd see that libraries in packages  
still use .so, because they are loaded using dlopen so the name  
doesn't have to conform to OS' conventions.

Please consult 'Writing R Extensions' ( http://cran.r-project.org/doc/ 
manuals/R-exts.html ) - it provides guidance and examples. Is also  
says "Note that this mechanism [using Makevars] should be general  
enough to eliminate the need for a package-specific Makefile. If such  
a file is to be distributed, considerable care is needed to make it  
general enough to work on all R platforms".

Cheers,
Simon


From deleeuw at stat.ucla.edu  Thu Jun 23 23:22:22 2005
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Thu, 23 Jun 2005 14:22:22 -0700
Subject: [R-SIG-Mac] Fwd: os x / g95 package namespace load problem
In-Reply-To: <9CA7ADDB-1825-4C8D-BCB2-71597D17B2F1@r-project.org>
References: <1253d67a050623122066eb8662@mail.gmail.com>
	<1253d67a05062312392112e0c2@mail.gmail.com>
	<9CA7ADDB-1825-4C8D-BCB2-71597D17B2F1@r-project.org>
Message-ID: <4ADCF2F3-6253-4B0E-BF94-4740C5A2ABC9@stat.ucla.edu>

An exception to this rule: packages such as tkrplot must be
loaded into the running tcltk process provided by tcltk.so. They
need to be linked as dylibs with flag -dynamic.  Even for X11
tcltk.so. I seem to remember there was one other such package,
but they are very rare.

On Jun 23, 2005, at 14:03 , Simon Urbanek wrote:

>> I was told to use the .dylib extension instead of .so
>>
>
> Who told you that? If you used the regular process for compiling
> package code that R provides, you'd see that libraries in packages
> still use .so, because they are loaded using dlopen so the name
> doesn't have to conform to OS' conventions.
>

===
Jan de Leeuw; Distinguished Professor and Chair, UCLA Department of  
Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 8130 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw at stat.ucla.edu
.mac: jdeleeuw ++++++  aim: deleeuwjan ++++++ skype: j_deleeuw
homepages: http://gifi.stat.ucla.edu ++++++ http://www.cuddyvalley.org
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au


From deleeuw at stat.ucla.edu  Thu Jun 23 23:42:58 2005
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Thu, 23 Jun 2005 14:42:58 -0700
Subject: [R-SIG-Mac] R with Aqua Tcl/Tk
Message-ID: <1FB0D4E2-1E9C-42AE-9F6A-37A1DD49234E@stat.ucla.edu>

If you compile R on Tiger with

configure --with-aqua --with-blas='-framework vecLib' --with-lapack

it uses the included Aqua Tcl/Tk. This has some good consequences
and some bad ones.

1. If you load tcltk.so at the beginning of your session you will see  
that R
opens a window in the dock and a bunch of menus. If you look a bit  
closer
you will find R thinks it is a (Carbon) Tcl/Tk application.

2. Because it thinks (mistakingly) that it is an application, it will  
allow
you to start quartz() and interact with the graphics windows, even if
you start R from the terminal or from Emacs/ESS. This is the good
thing. demo(tkdensity) shows only Aqua windows.

3. The menus, however, are useless, because R is not really a Tcl/Tk
application, and in particular you cannot copy or save the quartz
graphics (you have to use pdf or command-shift 3 or 4). The "source"
menu. moreover,  expects you to run tcl scripts.

4. You cannot use the Aqua GUI, because R gets very confused about the
various event loops that are going on.

5. You cannot really use X11, although I think that if you start an
X11 device before loading tcltk and before starting quartz you can
switch devices and not get into trouble. But trying to open an X11
device after loading tcltk and starting quartz produces a bomb
(well, the modern equivalent of a bomb).

So the good thing is quartz graphics from Terminal.app and Emacs.app,
being able to interact with quartz graphics windows (foreground and
background). No X11 ugliness. The bad things are no GUI, no
saving of graphics  windows, and doing something non-standard
and rather shaky.

===
Jan de Leeuw; Distinguished Professor and Chair, UCLA Department of  
Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 8130 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw at stat.ucla.edu
.mac: jdeleeuw ++++++  aim: deleeuwjan ++++++ skype: j_deleeuw
homepages: http://gifi.stat.ucla.edu ++++++ http://www.cuddyvalley.org
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au


From joel3000 at gmail.com  Fri Jun 24 01:52:11 2005
From: joel3000 at gmail.com (Joel Bremson)
Date: Thu, 23 Jun 2005 16:52:11 -0700
Subject: [R-SIG-Mac] Fwd: os x / g95 package namespace load problem
In-Reply-To: <9CA7ADDB-1825-4C8D-BCB2-71597D17B2F1@r-project.org>
References: <1253d67a050623122066eb8662@mail.gmail.com>
	<1253d67a05062312392112e0c2@mail.gmail.com>
	<9CA7ADDB-1825-4C8D-BCB2-71597D17B2F1@r-project.org>
Message-ID: <1253d67a05062316523ea2f10a@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20050623/45ade374/attachment.pl

From simon.urbanek at r-project.org  Fri Jun 24 02:28:30 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 23 Jun 2005 20:28:30 -0400
Subject: [R-SIG-Mac] Fwd: os x / g95 package namespace load problem
In-Reply-To: <1253d67a05062316523ea2f10a@mail.gmail.com>
References: <1253d67a050623122066eb8662@mail.gmail.com>
	<1253d67a05062312392112e0c2@mail.gmail.com>
	<9CA7ADDB-1825-4C8D-BCB2-71597D17B2F1@r-project.org>
	<1253d67a05062316523ea2f10a@mail.gmail.com>
Message-ID: <DDEA8D12-3E3D-4644-B1B6-108114A38EF7@r-project.org>

Joel,

On Jun 23, 2005, at 7:52 PM, Joel Bremson wrote:

> The reason I'm using the Makefile is the code which needs to be  
> compiled under g95. It appears to me that a build with Makevars  
> will use gcc-3.3 for linking, and completely ignores my f90 files:

R ignores .f90 files because it supports only generic fortran files  
with .f extension (which are assumed to be f77). From the output it  
is evident that you're using the CRAN binary which was build with and  
for gcc3. There is no g90/95 compiler in gcc3 so R is not configured  
to support it - you can use Fortran 77 code only.

If you need f90/95, you may want to use gcc4 instead, because it has  
a Fortran 95 compiler. Currently R doesn't support separate f77 and  
f90/95 compilers directly, so the easiest way is to simply use  
gfortran from gcc4 as if it was f77. As for Macs - you can either  
compile R yourself using gcc4 or use the Tiger G5 binary that I  
posted on the this list recently (if you have a G5). Even if you  
don't have a G5, you can still install the compiler from that binary,  
because it works on a G4 as well. If you configure R to use f90/95  
compiler as default, then all you need to do is to rename .f90 to .f  
and R will compile the package for you.

Actually, which compiler did you try to use? Apple provides no  
Fortran compiler at all, so I wonder what you choose.

You may try your luck with some other g90/95 compiler, but then  
you're really on your own. The problem is that each Fortran compiler  
has a set of supporting libraries, specific flags and behavior. The  
only reliable way to use such separate f77 and f90/95 compilers is to  
use autoconf to determine all necessary flags - you could use  
modified parts of R's Fortran detection code to do that. If you  
decide to do the latter, I can try to help you there if you send me  
the necessary files.

FWIW: What we are discussing here is pretty much platform- 
independent. You could ignore all this if all you want to is have one- 
shot solution (then just configure R with gfortran and copy the flags  
to your Makefile), but others wouldn't be able to use your package.

Cheers,
Simon


From kye at aecom.yu.edu  Thu Jun 23 21:19:24 2005
From: kye at aecom.yu.edu (Kenny Ye)
Date: Thu, 23 Jun 2005 15:19:24 -0400
Subject: [R-SIG-Mac] [R] compiling gap on mac os x
In-Reply-To: <Pine.LNX.4.61.0506231958140.13281@gannet.stats>
References: <42BAFD46.9000601@aecom.yu.edu>
	<Pine.LNX.4.61.0506231958140.13281@gannet.stats>
Message-ID: <42BB0B3C.5020407@aecom.yu.edu>


Hi, any help is greatly appreciated.

Prof Brian Ripley wrote:

> Isn't this the age-old story of the MacOS X Fortran compiler not fully 
> supporting compilation for dynamic libraries?  Looks like the same
> sort of problem it has with LAPACK code.  You could try rewriting the 
> code to avoid DATA statements.
>
> Asking MacOS-specific questions on the r-sig-mac is a better idea than 
> using a general list.
>
> On Thu, 23 Jun 2005, Kenny Ye wrote:
>
>> Hi, I am having trouble compiling package gap
>> http://www.hgmp.mrc.ac.uk/~jzhao/r-progs.htm on Tiger. I have installed
>> XcodeTools 2.1. The binary version of gap currently available on CRAN
>> has some bug and is fixed in the latest version.
>>
>> The message I get from R is below. Any help is greatly appreciated.
>>
>> best regards,
>>
>> Kenny Ye
>>
>> tar: Read 1536 bytes from -
>> * Installing *source* package 'gap' ...
>> ** libs
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c 2k.c -o 2k.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c 2ld.c -o 2ld.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c cline.c -o cline.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c gc.c -o gc.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c gcontrol.c -o gcontrol.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c gif.c -o gif.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c hap.c -o hap.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c hwe.hardy.c -o hwe.hardy.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c kin.morgan.c -o 
>> kin.morgan.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c makeped.c -o makeped.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c mia.c -o mia.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c muvar.c -o muvar.o
>> g77   -fno-common  -g -O2 -c pfc.f -o pfc.o
>> g77   -fno-common  -g -O2 -c pfc.sim.f -o pfc.sim.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c pgc.c -o pgc.o
>> gcc-3.3 -no-cpp-precomp
>> -I/Library/Frameworks/R.framework/Resources/include
>> -I/usr/local/include   -fno-common  -g -O2 -c whscore.c -o whscore.o
>> gcc-3.3 -bundle -flat_namespace -undefined suppress -L/usr/local/lib -o
>> gap.so 2k.o 2ld.o cline.o gc.o gcontrol.o gif.o hap.o hwe.hardy.o
>> kin.morgan.o makeped.o mia.o muvar.o pfc.o pfc.sim.o pgc.o whscore.o
>> -L/usr/local/lib/gcc/powerpc-apple-darwin6.8/3.4.2 -lg2c -lSystem
>> -framework R
>> ** Removing
>> '/Library/Frameworks/R.framework/Versions/2.1.0/Resources/library/gap'
>>    npackage installation failed
>> ld: warning multiple definitions of symbol _i1mach_
>> pfc.sim.o definition of _i1mach_ in section (__TEXT,__text)
>> /Library/Frameworks/R.framework/R(i1mach.lo) definition of _i1mach_
>> ld: 2ld.o has external relocation entries in non-writable section
>> (__TEXT,__text) for symbols:
>> restFP
>> saveFP
>> make: *** [gap.so] Error 1
>> ERROR: compilation failed for package 'gap'
>> ** Restoring previous
>> '/Library/Frameworks/R.framework/Versions/2.1.0/Resources/library/gap'
>> ** Removing
>> '/Library/Frameworks/R.framework/Versions/2.1.0/Resources/library/pathmix' 
>>
>> ** Removing
>> '/Library/Frameworks/R.framework/Versions/2.1.0/Resources/library/pointer' 
>>
>>
>> ______________________________________________
>> R-help at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide! 
>> http://www.R-project.org/posting-guide.html
>>
>


From kye at aecom.yu.edu  Fri Jun 24 05:03:47 2005
From: kye at aecom.yu.edu (Kenny Ye)
Date: Thu, 23 Jun 2005 23:03:47 -0400
Subject: [R-SIG-Mac] compiling R 2.1.1
Message-ID: <42BB7813.6090000@aecom.yu.edu>

I tried to compile 2.1.1 on Tiger with XcodeTool 2.1. The compiling 
failed with the following message:

ld: Undefined symbols:
restFP
saveFP

A google search showed that it is a common problem. Any solutions? many 
thanks.

Best Regards,

Kenny Ye


From wettenhall at wehi.EDU.AU  Fri Jun 24 08:52:34 2005
From: wettenhall at wehi.EDU.AU (James Wettenhall)
Date: Fri, 24 Jun 2005 16:52:34 +1000 (EST)
Subject: [R-SIG-Mac] Just checking - X11 Tcl/Tk is still the default
 (not Aqua), right?
In-Reply-To: <6C3B0696-6976-41B7-94BE-449002E36EE9@r-project.org>
References: <C2DB76CA-3D4B-435C-9C77-D0C6AE05C65A@r-project.org>
	<4268.144.133.91.34.1119504579.squirrel@homebase.wehi.edu.au>
	<6C3B0696-6976-41B7-94BE-449002E36EE9@r-project.org>
Message-ID: <55752.192.168.97.37.1119595954.squirrel@homebase.wehi.edu.au>

Hi,

Thanks Simon and Jan for very useful advice about R-Tcl/Tk in R 2.1.x for
MacO S X.  I think I can give some pretty clear instructions to Mac users
wanting to install software for our Bioconductor workshop now.

Regards,
James


From j.van_den_hoff at fz-rossendorf.de  Fri Jun 24 10:14:30 2005
From: j.van_den_hoff at fz-rossendorf.de (joerg van den hoff)
Date: Fri, 24 Jun 2005 10:14:30 +0200
Subject: [R-SIG-Mac] Re :  R 2.1.1 for optimized for G5+Tiger
In-Reply-To: <E6EA3B3E-2731-4C71-B3CA-2918B6EA73A3@r-project.org>
References: <42BADFE4.4000505@fz-rossendorf.de>
	<E6EA3B3E-2731-4C71-B3CA-2918B6EA73A3@r-project.org>
Message-ID: <42BBC0E6.2090803@fz-rossendorf.de>

Simon Urbanek wrote:
> Hi J?rg,
> 
> On Jun 23, 2005, at 12:14 PM, joerg van den hoff wrote:
> 
>> I tried  a run of 1000 non-linear fits (i.e. all the time is spent  in 
>> "nls" and friends).
>> I found no significant difference in the system.time() output  (2.1.1. 
>> seemed even a bit slower). both took about 22-24 sec. did a  miss 
>> something?
> 
> 
> I didn't look at the implementation of nls, but If the time is spent  
> mostly in vecLib or R code, there should be no difference. The  
> optimization usually gains only a few percent. I suspect that Naji's  
> speed up is due to the update of R.app, because it's running the  event 
> loop less frequently (there should be posts about that on the  archives) 
> - it used to slow down R. Unfortunately most of the really  fast 
> optimizations don't apply to R, because R uses doubles most of  the time 
> and they cannot be vectorized. Still, C/C++ code should  benefit from 
> the optimization (I wonder why it should run slower,  that's really 
> startling).

hi simon,

if this is of interest: here's (part of) the summaryRprof() output:

$by.self
                           self.time self.pct total.time total.pct
"names"                        0.80      6.5       0.94       7.6
"$"                            0.60      4.9       0.60       4.9
"<Anonymous>"                  0.38      3.1       5.42      44.0
"as.double"                    0.38      3.1       0.64       5.2
"eval"                         0.36      2.9       2.66      21.6
"lapply"                       0.34      2.8       1.26      10.2
"assign"                       0.30      2.4       1.58      12.8
"names<-"                      0.30      2.4       0.38       3.1
"summary.nls"                  0.28      2.3       1.94      15.7
"seq"                          0.26      2.1       0.72       5.8
"seq.default"                  0.26      2.1       0.46       3.7
"nlsModel"                     0.24      1.9       1.52      12.3
"[<-.data.frame"               0.24      1.9       1.08       8.8
"paste"                        0.24      1.9       0.52       4.2
"as.integer"                   0.24      1.9       0.38       3.1
"confidence"                   0.22      1.8      12.32     100.0
".Call"                        0.20      1.6       4.92      39.9
"qr.coef"                      0.20      1.6       1.32      10.7
"qr"                           0.20      1.6       0.70       5.7
"inherits"                     0.20      1.6       0.30       2.4
"=="                           0.20      1.6       0.20       1.6
"model.frame.default"          0.18      1.5       1.12       9.1
"storage.mode<-"               0.18      1.5       0.94       7.6
"array"                        0.18      1.5       0.66       5.4
"as.double.default"            0.18      1.5       0.18       1.5
"as.matrix"                    0.16      1.3       0.42       3.4
"[.data.frame"                 0.16      1.3       0.34       2.8
".Fortran"                     0.14      1.1       0.14       1.1
"names.default"                0.14      1.1       0.14       1.1

which of these are compiled code I don't know in detail, but most of 
them (except 'confidence', 'nlsModel', summary.nls) probably are 
('names', '$', '.Call', 'qr', '.Fortran' ...).

"slow down": well, the difference was insignificant ( ~ 24 vs. 22.5 s, 
which lies more ore less within the natural fluctuation for repeated 
runs anyway). so, there seems to be no (positive or negative) effect of 
the optimization as far as the above situation is  concerned.

regards,
joerg


From jago at mclink.it  Fri Jun 24 11:06:44 2005
From: jago at mclink.it (stefano iacus)
Date: Fri, 24 Jun 2005 11:06:44 +0200
Subject: [R-SIG-Mac] compiling R 2.1.1
In-Reply-To: <42BB7813.6090000@aecom.yu.edu>
References: <42BB7813.6090000@aecom.yu.edu>
Message-ID: <6779830A-B5F2-444C-83DB-D67292D4644E@mclink.it>

It seems to be a compiler mismatch version of gcc and g77.
Please read the Mac OS X FAQ as well A Simon Urbanek's TigeR wiki  
page (just google for it).
Also, you should try to read the messages appeared during last month  
on r-sig-mac

stefano

On 24/giu/05, at 05:03, Kenny Ye wrote:


> I tried to compile 2.1.1 on Tiger with XcodeTool 2.1. The compiling
> failed with the following message:
>
> ld: Undefined symbols:
> restFP
> saveFP
>
> A google search showed that it is a common problem. Any solutions?  
> many
> thanks.
>
> Best Regards,
>
> Kenny Ye
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
>


From f.calboli at imperial.ac.uk  Fri Jun 24 17:39:15 2005
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Fri, 24 Jun 2005 16:39:15 +0100
Subject: [R-SIG-Mac] cannot read demo() window
Message-ID: <D2A73AFE-AA7B-4C2F-AA18-E26A5B5362E0@imperial.ac.uk>

Hi All,

I have changed the default colours to have a black background and  
light text, but when I type

demo()

the window displayed is completely black (black on black) and there  
is no way I can ready anything. The same happens for

library()

How can I set the text colour to white for demo()/library()?

Cheers,

Federico

--
Federico C. F. Calboli
Department of Epidemiology and Public Health
Imperial College, St. Mary's Campus
Norfolk Place, London W2 1PG

Tel +44 (0)20 75941602   Fax +44 (0)20 75943193

f.calboli [.a.t] imperial.ac.uk
f.calboli [.a.t] gmail.com


From kye at aecom.yu.edu  Fri Jun 24 16:35:44 2005
From: kye at aecom.yu.edu (Kenny Ye)
Date: Fri, 24 Jun 2005 10:35:44 -0400
Subject: [R-SIG-Mac] compiling R 2.1.1
In-Reply-To: <6779830A-B5F2-444C-83DB-D67292D4644E@mclink.it>
References: <42BB7813.6090000@aecom.yu.edu>
	<6779830A-B5F2-444C-83DB-D67292D4644E@mclink.it>
Message-ID: <42BC1A40.2030103@aecom.yu.edu>


Stefano, thanks. I had success in compiling 2.1.1 following Simon's wiki 
page.

However, tcltk refuse to load and gives the following message

 > library(tcltk)
Loading Tcl/Tk interface ... Error in fun(...) : this isn't a Tk 
applicationcouldn't connect to display ":0"
Error: .onLoad failed in 'loadNamespace' for 'tcltk'
Error: package/namespace load failed for 'tcltk'

any thoughts?

Kenny


stefano iacus wrote:

> It seems to be a compiler mismatch version of gcc and g77.
> Please read the Mac OS X FAQ as well A Simon Urbanek's TigeR wiki  
> page (just google for it).
> Also, you should try to read the messages appeared during last month  
> on r-sig-mac
>
> stefano
>
> On 24/giu/05, at 05:03, Kenny Ye wrote:
>
>
>> I tried to compile 2.1.1 on Tiger with XcodeTool 2.1. The compiling
>> failed with the following message:
>>
>> ld: Undefined symbols:
>> restFP
>> saveFP
>>
>> A google search showed that it is a common problem. Any solutions?  many
>> thanks.
>>
>> Best Regards,
>>
>> Kenny Ye
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>>
>
>


From jago at mclink.it  Sat Jun 25 09:48:25 2005
From: jago at mclink.it (stefano iacus)
Date: Sat, 25 Jun 2005 09:48:25 +0200
Subject: [R-SIG-Mac] compiling R 2.1.1
In-Reply-To: <42BC1A40.2030103@aecom.yu.edu>
References: <42BB7813.6090000@aecom.yu.edu>
	<6779830A-B5F2-444C-83DB-D67292D4644E@mclink.it>
	<42BC1A40.2030103@aecom.yu.edu>
Message-ID: <ED1CE48D-5C71-456B-8E79-FE291286517C@mclink.it>

You should run the X11 window server (X11.app) application first.
If you've not installed it, you should find it as additional install  
in Apple's installer of OS X distributions.
stefano

On 24/giu/05, at 16:35, Kenny Ye wrote:

>
> Stefano, thanks. I had success in compiling 2.1.1 following Simon's  
> wiki page.
>
> However, tcltk refuse to load and gives the following message
>
> > library(tcltk)
> Loading Tcl/Tk interface ... Error in fun(...) : this isn't a Tk  
> applicationcouldn't connect to display ":0"
> Error: .onLoad failed in 'loadNamespace' for 'tcltk'
> Error: package/namespace load failed for 'tcltk'
>
> any thoughts?
>
> Kenny
>
>
> stefano iacus wrote:
>
>
>> It seems to be a compiler mismatch version of gcc and g77.
>> Please read the Mac OS X FAQ as well A Simon Urbanek's TigeR wiki   
>> page (just google for it).
>> Also, you should try to read the messages appeared during last  
>> month  on r-sig-mac
>>
>> stefano
>>
>> On 24/giu/05, at 05:03, Kenny Ye wrote:
>>
>>
>>
>>> I tried to compile 2.1.1 on Tiger with XcodeTool 2.1. The compiling
>>> failed with the following message:
>>>
>>> ld: Undefined symbols:
>>> restFP
>>> saveFP
>>>
>>> A google search showed that it is a common problem. Any  
>>> solutions?  many
>>> thanks.
>>>
>>> Best Regards,
>>>
>>> Kenny Ye
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>>
>>>
>>
>>
>>
>
>


From kjbeath at kagi.com  Sun Jun 26 11:32:01 2005
From: kjbeath at kagi.com (Ken Beath)
Date: Sun, 26 Jun 2005 19:32:01 +1000
Subject: [R-SIG-Mac] R Stop Icon Bug
Message-ID: <3161A628-06B8-458A-8324-EE6D33C07B33@kagi.com>

Congratulations on an excellent program. A minor bug, if while  
executing a R source file, I start up the HTML help system and then  
close it, the STOP icon in the console window remains dimmed. The  
only way of stopping the current execution is to quit R.

I'm running the G5 2.1.1 version under MacOS X 10.4.1 but I'm certain  
it occurred with previous versions.

Ken


From simon.urbanek at r-project.org  Sun Jun 26 19:36:32 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 26 Jun 2005 13:36:32 -0400
Subject: [R-SIG-Mac] R Stop Icon Bug
In-Reply-To: <3161A628-06B8-458A-8324-EE6D33C07B33@kagi.com>
References: <3161A628-06B8-458A-8324-EE6D33C07B33@kagi.com>
Message-ID: <14D9AC22-DD22-4312-A410-CA10055D4718@r-project.org>

Ken,

On Jun 26, 2005, at 5:32 AM, Ken Beath wrote:

> Congratulations on an excellent program. A minor bug, if while
> executing a R source file, I start up the HTML help system and then
> close it, the STOP icon in the console window remains dimmed.

Thanks for the report.

> The only way of stopping the current execution is to quit R.

 From the GUI, yes (in fact, I'm surprised <Esc> doesn't work - I'll  
look into that). Instead of quitting R you can still send the INT  
signal to R which is equal to pressing "Stop", in Terminal type:
killall -INT R

Cheers,
Simon


From j.van_den_hoff at fz-rossendorf.de  Mon Jun 27 11:38:54 2005
From: j.van_den_hoff at fz-rossendorf.de (joerg van den hoff)
Date: Mon, 27 Jun 2005 11:38:54 +0200
Subject: [R-SIG-Mac] tcl/tk
Message-ID: <42BFC92E.1030109@fz-rossendorf.de>

a probably trivial problem:

R (from the binary distribution) expects tcl8.4 in /usr/lib or 
/usr/local/lib, but it resides in /sw/lib.

adding a corresponding link to /usr/local/lib does not solve the problem 
(further things are again expected in /usr/...).

question: have I to compile from source or can this be configured otherwise?

thanks
joerg


From thatsanicehatyouhave at mac.com  Mon Jun 27 18:32:34 2005
From: thatsanicehatyouhave at mac.com (Demitri Muna)
Date: Mon, 27 Jun 2005 17:32:34 +0100
Subject: [R-SIG-Mac] Call R framework from my own Cocoa app?
Message-ID: <761B0648-A1E5-44F1-8883-4CB404C71366@mac.com>

Hello,

I recently started using R and have found it quite interesting. One  
thing that I would like to do is be able to work with it in a more  
interactive fashion. I have a huge amount of data to view, and I'm  
envisioning some kind of GUI to more easily navigate it.

Is it possible to write a Cocoa application for the gui? I am an  
experienced Mac programmer and can write a front end very quickly.  
The question I have is how to control the R display from my app. I  
can think of two ways to do it:

1 - Send the R commands to (R.app? command line R?) to be displayed  
on an X11 window (or possibly in R.app?).

2 - Is there a reasonably easy way to call the R framework from my  
app, create a script internally, and display the result it in my own  
NSView?

I'd *love* to be able to do no. 2. :)

Cheers,

Demitri


From stefano.iacus at unimi.it  Mon Jun 27 18:48:48 2005
From: stefano.iacus at unimi.it (stefano iacus)
Date: Mon, 27 Jun 2005 18:48:48 +0200
Subject: [R-SIG-Mac] Call R framework from my own Cocoa app?
In-Reply-To: <761B0648-A1E5-44F1-8883-4CB404C71366@mac.com>
References: <761B0648-A1E5-44F1-8883-4CB404C71366@mac.com>
Message-ID: <1B62B0D4-00C4-4ABC-9A92-247107240047@unimi.it>

You should try to have a look at the Mac-GUI code


svn co https://svn.R-project.org/R-packages/trunk/Mac-GUI Mac-GUI

REngine classes is probably what you want to use.

It would be nice to have you "on board" if you want to contribute.

stefano

On 27/giu/05, at 18:32, Demitri Muna wrote:


> Hello,
>
> I recently started using R and have found it quite interesting. One
> thing that I would like to do is be able to work with it in a more
> interactive fashion. I have a huge amount of data to view, and I'm
> envisioning some kind of GUI to more easily navigate it.
>
> Is it possible to write a Cocoa application for the gui? I am an
> experienced Mac programmer and can write a front end very quickly.
> The question I have is how to control the R display from my app. I
> can think of two ways to do it:
>
> 1 - Send the R commands to (R.app? command line R?) to be displayed
> on an X11 window (or possibly in R.app?).
>
> 2 - Is there a reasonably easy way to call the R framework from my
> app, create a script internally, and display the result it in my own
> NSView?
>
> I'd *love* to be able to do no. 2. :)
>
> Cheers,
>
> Demitri
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From simon.urbanek at r-project.org  Mon Jun 27 19:12:38 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 27 Jun 2005 13:12:38 -0400
Subject: [R-SIG-Mac] Call R framework from my own Cocoa app?
In-Reply-To: <761B0648-A1E5-44F1-8883-4CB404C71366@mac.com>
References: <761B0648-A1E5-44F1-8883-4CB404C71366@mac.com>
Message-ID: <E57AFBD5-9E69-4E29-AE7E-C58BEC4B6140@r-project.org>

Hi Demitri,

On Jun 27, 2005, at 12:32 PM, Demitri Muna wrote:

> Is it possible to write a Cocoa application for the gui?

Yes=write Cocoa application for R, no=write Cocoa application for GUI  
(although it's not quite clear what you mean by that).

It is possible to write any GUI in Cocoa for the R framework. The  
current R.app GUI shows how to do it. You may want to 'borrow' the  
REngine Obj-C classes from R.app - they are meant to be application  
independent and in long term should go into the framework.

But we have currently no API to interact with the GUI. You can, of  
course, look at the R.app sources and use the classes we provide, but  
they are not guaranteed to stay as-is (in fact we have some plans for  
major re-structuring). You can also enhance the GUI for your purposes  
using the sources as they are licensed under GPL. We can always use  
experienced Cocoa programmers - they are rather rare so far ;).

Now, in some detail:

> 1 - Send the R commands to (R.app? command line R?) to be displayed  
> on an X11 window (or possibly in R.app?).

You could use AppleScript for R.app to achieve this very easily.

> 2 - Is there a reasonably easy way to call the R framework from my  
> app, create a script internally, and display the result it in my  
> own NSView?

What do you mean by "result"? Text? R graphics? As of text, REngine  
gives you full control over the console, so you're free to use  
whatever you want. As of R graphics, that's more tricky, because you  
will have you write a R device or use the Quartz devices as R.app  
does - look in the R.app sources for details, in principle you could  
use any NSView for that.

Cheers,
Simon


From simon.urbanek at r-project.org  Tue Jun 28 01:32:55 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 27 Jun 2005 19:32:55 -0400
Subject: [R-SIG-Mac] tcl/tk
In-Reply-To: <42BFC92E.1030109@fz-rossendorf.de>
References: <42BFC92E.1030109@fz-rossendorf.de>
Message-ID: <8ED140B0-E3D7-41DF-AA37-2B77744A7486@r-project.org>

J?rg,

On Jun 27, 2005, at 5:38 AM, joerg van den hoff wrote:

> a probably trivial problem:
>
> R (from the binary distribution) expects tcl8.4 in /usr/lib or /usr/ 
> local/lib, but it resides in /sw/lib.

The corresponding tcltk libraries for /usr/local are included in the  
Mac R CRAN distribution, so all you have to do is to enable it during  
installation. If you don't want to bother you can also install it  
separately - it's tcltk.pkg in the Packages folder.

If you want to use a different version you may need to recompile R.

Cheers,
Simon


From thatsanicehatyouhave at mac.com  Tue Jun 28 15:29:58 2005
From: thatsanicehatyouhave at mac.com (Demitri Muna)
Date: Tue, 28 Jun 2005 14:29:58 +0100
Subject: [R-SIG-Mac] Call R framework from my own Cocoa app?
Message-ID: <03B427D8-4AC4-4A3B-9536-E13552E3FF04@mac.com>

Thanks to both Stefano and Simon for your quick replies! I've been  
poring through the code, and have found it very interesting.

On 27 Jun 2005, at 18:12, Simon Urbanek wrote:

> Yes=write Cocoa application for R, no=write Cocoa application for  
> GUI (although it's not quite clear what you mean by that).

Basically, I was optimistically hoping to be able to write a Cocoa  
app that would construct small R scripts, pass them to a black box,  
and get the image back. I'm not trying to reinvent (your) wheel, just  
hide all the details from the user.

I was not really expecting to interact with the existing gui,  
although the AppleScript suggestion is very interesting. With a Cocoa  
app generating the scripts based on user input, this may pretty much  
solve what I'd like to do. Not as self-contained as initially  
envisioned, but probably easier. :)

I've already had a stab at it, and have a bare bones Cocoa app  
sending scripts to R via AppleScript and generating plots. It's  
working quite well (although debugging the AppleScripts is not as  
clean as I'd like!). The biggest problem I've come across is speed. I  
have 10,000 data points I'd like to plot, so in the AppleScript I do  
something like this:

y = c(0, 1, 2, ...., 9999) # not a sequence, but real data

I can't read the data from a file since I'm getting it live from a  
remote web site. It takes about 0.5-0.9s to read the data from the  
server, and 2-5 seconds to execute the AppleScript (on a 450MHz G4 -  
hey, I love my Cube!). It's taking a fair bit longer (up to 10-12  
seconds) beyond this to see the plot. My guess is that it is taking a  
while to print all 10,000 values in the R document window, which it  
does before plotting. Can anyone suggest a improvement here? While  
this is bad, I actually need to plot 18,000 points (18 of these arrays).

> We can always use experienced Cocoa programmers - they are rather  
> rare so far ;).

Ah.. but the opportunities. :) Unfortunately, I don't have a lot of  
time to spend on another project (so many unfinished ones...plus grad  
school...). However, I would be curious to see how difficult it would  
be to make the R framework standalone. An app could link against it,  
talk to R directly, and maybe even use something like Aquaterm (or  
your custom view) to produce the plots. I think R.app is great as it  
is for interactive use, but it would be interesting to see the input  
completely wrapped by Cocoa for custom uses.

I spent a few minutes trying to add REngine to my app, but the  
dependencies grew pretty quickly. :)

Thanks again for your help!

Cheers,

Demitri


From simon.urbanek at r-project.org  Tue Jun 28 16:40:49 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 28 Jun 2005 10:40:49 -0400
Subject: [R-SIG-Mac] Call R framework from my own Cocoa app?
In-Reply-To: <03B427D8-4AC4-4A3B-9536-E13552E3FF04@mac.com>
References: <03B427D8-4AC4-4A3B-9536-E13552E3FF04@mac.com>
Message-ID: <1DC963B1-EA26-4E76-84CC-4B68CFD04DC3@r-project.org>

Hi Demitri,

On Jun 28, 2005, at 9:29 AM, Demitri Muna wrote:

> Basically, I was optimistically hoping to be able to write a Cocoa   
> app that would construct small R scripts, pass them to a black  
> box,  and get the image back.

you can do that fairly easily just using REngine. I have put together  
a tiny sample project, you can download it from
http://research.att.com/~urbanek/REngineTest.dmg

> clean as I'd like!). The biggest problem I've come across is speed. I
> have 10,000 data points I'd like to plot, so in the AppleScript I do
> something like this:
>
> y = c(0, 1, 2, ...., 9999) # not a sequence, but real data

This is no issue if you use REngine, from the above example (silly,  
but should illustrate the point):

         double a[10] = { 0.5, 1.3, 4.3, 5.3, 2.6, 1.7, 3.5, 3.3,  
2.5, 1.6 };

         RSEXP *ax = [[RSEXP alloc] initWithDoubleArray:a length:10];
         [re assignTo:@"a" value:ax];

This assigns the array directly into R as variable "a", it doesn't  
need to be converted to string or anything like that.

         RSEXP *r = [re evaluateString:@"as.double(c(mean(a), var 
(a)))"];
         double *dr = [r doubleArray];

         [textView insertText:[NSString stringWithFormat:@"mean=%f,  
variance=%f\n", dr[0], dr[1]]];

This will just get and print some results.

REngine supports both - simple evaluation (as illustrated above) and  
full REPL. For the latter look and the <REPLHandler> protocol - if  
you implementa that, you get the full control over the console and  
callbacks.

>> We can always use experienced Cocoa programmers - they are rather
>> rare so far ;).
>>
>
> Ah.. but the opportunities. :) Unfortunately, I don't have a lot of  
> time to spend on another project (so many unfinished ones...plus  
> grad school...). However, I would be curious to see how difficult  
> it would be to make the R framework standalone.

It *is* stand-alone and any application can links against it. You can  
use all C-level API that R offers and this is what all R packages do.

Only the Obj-C wrapper (REngine) is currently not part of the  
framework for several reasons ranging from Obj-C support in R in  
general to the fact that the Obj-C API is far from complete.

> I spent a few minutes trying to add REngine to my app, but the   
> dependencies grew pretty quickly. :)

All you need now is R installed as framework in /Library/Frameworks.  
The demo app above includes REngine that is independent of the R.app.  
Quartz won't work with that, though - you'd have to get the Quartz  
classes from R.app (but it's possible).

Cheers,
Simon


From thatsanicehatyouhave at mac.com  Tue Jun 28 20:14:56 2005
From: thatsanicehatyouhave at mac.com (Demitri Muna)
Date: Tue, 28 Jun 2005 19:14:56 +0100
Subject: [R-SIG-Mac] Call R framework from my own Cocoa app?
In-Reply-To: <1DC963B1-EA26-4E76-84CC-4B68CFD04DC3@r-project.org>
References: <03B427D8-4AC4-4A3B-9536-E13552E3FF04@mac.com>
	<1DC963B1-EA26-4E76-84CC-4B68CFD04DC3@r-project.org>
Message-ID: <DEA2686A-9233-4EA4-BC51-5580E56EBA3E@mac.com>

Hi Simon,


On 28 Jun 2005, at 15:40, Simon Urbanek wrote:

> you can do that fairly easily just using REngine. I have put  
> together a tiny sample project, you can download it from
> http://research.att.com/~urbanek/REngineTest.dmg

That is absolutely brilliant - it's exactly what I was hoping to do.  
Thanks for the sample app; it worked perfectly and it's very  
illustrative. With that I can experiment with the rest of the API.

Now, the final step for me is to display a plot.

> All you need now is R installed as framework in /Library/ 
> Frameworks. The demo app above includes REngine that is independent  
> of the R.app. Quartz won't work with that, though - you'd have to  
> get the Quartz classes from R.app (but it's possible).

I copied the following classes into the REngineTest you gave me:  
devQuartz.h/c, RQuartz.h/m, QuartzDevice.h/m, RDeviceView.h/m,  
RGUI.h, Preferences.h/m, PreferenceKeys.h, and RQuartz.nib. With a  
few minor changes (mainly commenting out "#import "../RController.h"  
lines), it compiled successfully.

These seemed to be the minimum number of classes needed to include  
RQuartz, RDeviceView, and QuartzDevice. RQuartz.nib looks like the  
graphic window containing the custom NSView. I then tried to find  
where an RQuartz is instantiated (either directly or via  
loadNibNamed:@"RQuartz"), but I was not able to find it. I'm guessing  
that it's in QuartzDevice, innerQuartzDevice:, but I'm not sure where  
*that* is called from (or at least, how a plot command triggers it).  
I copied newQuartzDevice: from RController, but there was no result.  
What am I missing to be able to connect the R engine in my app to the  
Quartz view?

It then struck me that I could just as easily use X11 displays, and  
that worked the first time I tried it. the only problem - the display  
does not refresh on a resize. I noted that X11 displays do refresh  
when called from R.app - what is the callback that will let me know  
when to redraw the window? Do you buffer it or actually resubmit the  
plot command(s)?

Thank you very much for all your help. I'm really pleased with the  
results!

Cheers,

Demitri


From jago at mclink.it  Tue Jun 28 22:11:38 2005
From: jago at mclink.it (stefano iacus)
Date: Tue, 28 Jun 2005 22:11:38 +0200
Subject: [R-SIG-Mac] Call R framework from my own Cocoa app?
In-Reply-To: <DEA2686A-9233-4EA4-BC51-5580E56EBA3E@mac.com>
References: <03B427D8-4AC4-4A3B-9536-E13552E3FF04@mac.com>
	<1DC963B1-EA26-4E76-84CC-4B68CFD04DC3@r-project.org>
	<DEA2686A-9233-4EA4-BC51-5580E56EBA3E@mac.com>
Message-ID: <23DA3AD5-6848-4585-9216-33B4C9CAE838@mclink.it>


On 28/giu/05, at 20:14, Demitri Muna wrote:

> Hi Simon,
>
>
> On 28 Jun 2005, at 15:40, Simon Urbanek wrote:
>
>
>> you can do that fairly easily just using REngine. I have put
>> together a tiny sample project, you can download it from
>> http://research.att.com/~urbanek/REngineTest.dmg
>>
>
> That is absolutely brilliant - it's exactly what I was hoping to do.
> Thanks for the sample app; it worked perfectly and it's very
> illustrative. With that I can experiment with the rest of the API.
>
> Now, the final step for me is to display a plot.
>
>
>> All you need now is R installed as framework in /Library/
>> Frameworks. The demo app above includes REngine that is independent
>> of the R.app. Quartz won't work with that, though - you'd have to
>> get the Quartz classes from R.app (but it's possible).
>>
>
> I copied the following classes into the REngineTest you gave me:
> devQuartz.h/c, RQuartz.h/m, QuartzDevice.h/m, RDeviceView.h/m,
> RGUI.h, Preferences.h/m, PreferenceKeys.h, and RQuartz.nib. With a
> few minor changes (mainly commenting out "#import "../RController.h"
> lines), it compiled successfully.
>
> These seemed to be the minimum number of classes needed to include
> RQuartz, RDeviceView, and QuartzDevice. RQuartz.nib looks like the
> graphic window containing the custom NSView. I then tried to find
> where an RQuartz is instantiated (either directly or via
> loadNibNamed:@"RQuartz"), but I was not able to find it. I'm guessing
> that it's in QuartzDevice, innerQuartzDevice:, but I'm not sure where
> *that* is called from (or at least, how a plot command triggers it).

these are called by R when you try to open the quartz device. The  
code is inside src/library/grDevices/src/devQuartz.c  in the main R  
sources.
you just need to provide the callbacks and then ask R to open the  
quartz device as any other device, i.e. using R commands (i.e. quartz 
() instead of x11() that you tried)


> I copied newQuartzDevice: from RController, but there was no result.
> What am I missing to be able to connect the R engine in my app to the
> Quartz view?
>
> It then struck me that I could just as easily use X11 displays, and
> that worked the first time I tried it. the only problem - the display
> does not refresh on a resize. I noted that X11 displays do refresh
> when called from R.app - what is the callback that will let me know
> when to redraw the window?


if you look at Rcontroller.m (in R.app sources)

you need to fire a timer to check for X11 activity. The relevant code is

timer = [NSTimer scheduledTimerWithTimeInterval:0.05
                                              target:self
                                            selector:@selector 
(otherEventLoops:)
                                            userInfo:0
                                             repeats:YES];


- (IBAction)otherEventLoops:(id)sender {
     R_runHandlers(R_InputHandlers, R_checkActivity(0, 1));
}




> Do you buffer it or actually resubmit the
> plot command(s)?
no, R (interactive) devices now how to re-plot their content upon  
resize etc,

btw, don't rely too much on the current structure of the quartz  
device or at least check from time to time R.app sources. We have  
planned to do major changes to the quartz device to allow for more  
interactivity


stefano

>
> Thank you very much for all your help. I'm really pleased with the
> results!
>
> Cheers,
>
> Demitri
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>


From simon.urbanek at r-project.org  Tue Jun 28 22:15:49 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 28 Jun 2005 16:15:49 -0400
Subject: [R-SIG-Mac] Call R framework from my own Cocoa app?
In-Reply-To: <DEA2686A-9233-4EA4-BC51-5580E56EBA3E@mac.com>
References: <03B427D8-4AC4-4A3B-9536-E13552E3FF04@mac.com>
	<1DC963B1-EA26-4E76-84CC-4B68CFD04DC3@r-project.org>
	<DEA2686A-9233-4EA4-BC51-5580E56EBA3E@mac.com>
Message-ID: <3EA39941-0B43-4267-A33D-BFA924485357@r-project.org>

Hi Demitri,

On Jun 28, 2005, at 2:14 PM, Demitri Muna wrote:

> These seemed to be the minimum number of classes needed to include  
> RQuartz, RDeviceView, and QuartzDevice. RQuartz.nib looks like the  
> graphic window containing the custom NSView. I then tried to find  
> where an RQuartz is instantiated (either directly or via  
> loadNibNamed:@"RQuartz"), but I was not able to find it.

In REngine/RCallbacks.m in the REngineTest sources at the bottom of  
the file there are two dummy callbacks for innerQuartzDevice and  
getQuartzParameters - please remove them both, they should come from  
the Quartz classes you copied. I put them there so that the test  
works even without Quartz.

R.app is a document-based application, and if you look in the  
QuartzDevice.m sources you will see:
         newDocument = [[NSDocumentController sharedDocumentController]
                                                  
openUntitledDocumentOfType:@"pdf" display:NO];
So you have either to change that to explicit window creation or  
change the application to be document-based and add a document class  
for the type "pdf".

> It then struck me that I could just as easily use X11 displays, and  
> that worked the first time I tried it. the only problem - the  
> display does not refresh on a resize.

This is the case because you're not running the R event loop. In  
order to run the event loop you must implement the <REPLHandler>  
protocol, especially handleProcessEvents for handling CF events and  
then use runREPL method of REngine to start R's event loop (see  
RController in the R.app, but that file is historically a big mess,  
so you want to pick and choose).

Cheers,
Simon


From j.van_den_hoff at fz-rossendorf.de  Wed Jun 29 18:33:08 2005
From: j.van_den_hoff at fz-rossendorf.de (joerg van den hoff)
Date: Wed, 29 Jun 2005 18:33:08 +0200
Subject: [R-SIG-Mac] install of nls.lm failed
Message-ID: <42C2CD44.3090906@fz-rossendorf.de>

hi everybody,

trying to install nls.lm  under R.2.1.0 and Tiger I got:

======================cut============================
* Installing *source* package 'minpack.lm' ...
** libs
g77   -fno-common  -g -O2 -c chkder.f -o chkder.o
g77   -fno-common  -g -O2 -c dogleg.f -o dogleg.o
g77   -fno-common  -g -O2 -c dpmpar.f -o dpmpar.o
g77   -fno-common  -g -O2 -c enorm.f -o enorm.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c fcn_lmder.c -o fcn_lmder.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c fcn_lmdif.c -o fcn_lmdif.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c fcn_message.c -o fcn_message.o
g77   -fno-common  -g -O2 -c fdjac2.f -o fdjac2.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c get_element.c -o get_element.o
g77   -fno-common  -g -O2 -c lmder.f -o lmder.o
g77   -fno-common  -g -O2 -c lmdif.f -o lmdif.o
g77   -fno-common  -g -O2 -c lmpar.f -o lmpar.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c nls_lm.c -o nls_lm.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c prod.c -o prod.o
g77   -fno-common  -g -O2 -c qform.f -o qform.o
g77   -fno-common  -g -O2 -c qrfac.f -o qrfac.o
g77   -fno-common  -g -O2 -c qrsolv.f -o qrsolv.o
g77   -fno-common  -g -O2 -c r1mpyq.f -o r1mpyq.o
g77   -fno-common  -g -O2 -c r1updt.f -o r1updt.o
g77   -fno-common  -g -O2 -c rwupdt.f -o rwupdt.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c transpose.c -o transpose.o
gcc-3.3 -no-cpp-precomp 
-I/Library/Frameworks/R.framework/Resources/include 
-I/usr/local/include   -fno-common  -g -O2 -c vector.c -o vector.o
gcc-3.3 -bundle -flat_namespace -undefined suppress -L/usr/local/lib -o 
minpack.lm.so chkder.o dogleg.o dpmpar.o enorm.o fcn_lmder.o fcn_lmdif.o 
fcn_message.o fdjac2.o get_element.o lmder.o lmdif.o lmpar.o nls_lm.o 
prod.o qform.o qrfac.o qrsolv.o r1mpyq.o r1updt.o rwupdt.o transpose.o 
vector.o -framework vecLib 
-L/usr/local/lib/gcc/powerpc-apple-darwin6.8/3.4.2 -lg2c -lSystem 
-framework R
ld: warning -L: directory name 
(/usr/local/lib/gcc/powerpc-apple-darwin6.8/3.4.2) does not exist
ld: can't locate file for: -lg2c
make: *** [minpack.lm.so] Error 1
ERROR: compilation failed for package 'minpack.lm'
======================cut============================
indeed, (/usr/local/lib/gcc/powerpc-apple-darwin6.8/3.4.2) does not 
exist (rather, there only is a /usr/lib/gcc/powerpc-apple-darwin6.8/4.0.0).

since the library path seems to be set by R CMD INSTALL, not by the 
package content itself (no Makefile ...), I would be grateful if someone 
could help me out: is the lib-path somehow  hardcoded in the binary 
(.dmg) of R?


regards,

joerg


From simon.urbanek at r-project.org  Wed Jun 29 18:47:24 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 29 Jun 2005 12:47:24 -0400
Subject: [R-SIG-Mac] install of nls.lm failed
In-Reply-To: <42C2CD44.3090906@fz-rossendorf.de>
References: <42C2CD44.3090906@fz-rossendorf.de>
Message-ID: <65FA4416-38F9-4C54-9A97-EBEB85EE4DE4@r-project.org>

On Jun 29, 2005, at 12:33 PM, joerg van den hoff wrote:

> hi everybody,
>
> trying to install nls.lm  under R.2.1.0 and Tiger I got:

You didn't tell us what Fortran compiler you are using, but my wild  
guess is that you use the one from fink. If that turns out to be true  
and you insist on using that one, you'll need to compile your own R  
(or you can try to patch the paths in various places or specify  
additional flags for the package to find your libg2c ...). The CRAN  
binary requires g77 3.4.2 in /usr/local which you don't have.

Cheers,
Simon


From joel3000 at gmail.com  Wed Jun 29 22:38:02 2005
From: joel3000 at gmail.com (Joel Bremson)
Date: Wed, 29 Jun 2005 13:38:02 -0700
Subject: [R-SIG-Mac] Fwd: gcc4 R binary?
In-Reply-To: <1253d67a050629133498c7e8a@mail.gmail.com>
References: <1253d67a050629133498c7e8a@mail.gmail.com>
Message-ID: <1253d67a050629133874c5e736@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20050629/881975a2/attachment.pl

From simon.urbanek at r-project.org  Wed Jun 29 22:52:18 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 29 Jun 2005 16:52:18 -0400
Subject: [R-SIG-Mac] Fwd: gcc4 R binary?
In-Reply-To: <1253d67a050629133874c5e736@mail.gmail.com>
References: <1253d67a050629133498c7e8a@mail.gmail.com>
	<1253d67a050629133874c5e736@mail.gmail.com>
Message-ID: <F949C883-D84A-4919-B273-7A1C97960F5F@r-project.org>

Joel,

On Jun 29, 2005, at 4:38 PM, Joel Bremson wrote:

> I'm looking for for the gcc-4.0 compiled binary for OSX.

What exactly are referring to? If by "the [...] binary" you mean CRAN  
binary then there is no such thing, because gcc4 (mostly the fortran  
part of it) is still very experimental and instable to produce an  
official binary. Also note that it is reported that binaries compiled  
by gfortran tend to be slower than those complied using g77, so we  
stick with gcc3 for now as there are no immediate benefits (except  
maybe for building 64-bit version, but that is surely not useful for  
the mainstream until all parts of OS X are 64-bit).

There are some 3rd-party gcc4 binaries around and you'll find them if  
you look into the recent archives of this list.

Cheers,
Simon


From kaha at biostat.ku.dk  Thu Jun 30 02:08:30 2005
From: kaha at biostat.ku.dk (Kasper Daniel Hansen)
Date: Thu, 30 Jun 2005 02:08:30 +0200 (CEST)
Subject: [R-SIG-Mac] R problem (fwd)
Message-ID: <Pine.LNX.4.61.0506300201550.28369@turmalin.kubism.ku.dk>

Hi All

A collaborater has problems loading the grDevices package in the 
basic dmg install of R (Tiger).

To be precise: he has problems loading the grDevices packages when he 
starts R on the commandline (in a terminal window), but _not_ when he 
starts the GUI (!). He has manually installed some graphics libraries (see 
below). At first I thought "ok, messing up the graphics libraries of 
course breaks something", but then I noticed that everything works in 
the R gui (R.app) loads perfectly. Any ideas on how to make the terminal 
version of R work?

The error message from R when I try to load grDevices (it seems that it 
has a probelm with some jpeg stuff - which I also find kind of odd since 
capabilities(jpeg) is FALSE)

> library(grDevices)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library
'/Library/Frameworks/R.framework/Resources/library/grDevices/libs/grDevices.
so':
  
dlopen(/Library/Frameworks/R.framework/Resources/library/grDevices/libs/grDe
vices.so, 6): Symbol not found: __cg_jpeg_resync_to_restart
  Referenced from: 
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Framewor
ks/ImageIO.framework/Versions/A/ImageIO
  Expected in: /usr/local/lib/libJPEG.dylib
Error: package/namespace load failed for 'grDevices'

And this is a list of the installed libraries:


Might come from previous instalation of the GDlib library which required
installatio of 

zlib
http://www.gzip.org/zlib/
libpng
http://www.libpng.org/pub/png/libpng.html
libjpeg
ftp://ftp.uu.net/graphics/jpeg/jpegsrc.v6b.tar.gz
freetype2
http://freetype.sourceforge.net/download.html
GD
http://www.boutell.com/gd/

A description of the flag used can be found at
http://www.paginar.net/matias/articles/gd_x_howto.html


From stefano.iacus at unimi.it  Thu Jun 30 09:20:19 2005
From: stefano.iacus at unimi.it (stefano iacus)
Date: Thu, 30 Jun 2005 09:20:19 +0200
Subject: [R-SIG-Mac] Fwd: [Rd] Does not run under Mac OS X 10.3.9 (PR#7975)
References: <5b7603e6f609d860e82101853729b9f1@macnews.de>
Message-ID: <33A64506-0660-4604-AA72-430461FB3E9D@unimi.it>



Begin forwarded message:


> From: Matthias Wahl <matthias.wahl at macnews.de>
> Date: 28 giugno 2005 18:05:54 GMT+02:00
> To: stefano iacus <jago at mclink.it>
> Subject: Re: [Rd] Does not run under Mac OS X 10.3.9 (PR#7975)
>
>
> I don' have a folder 'Utilities' in applications, however here is  
> what I get when I chose
> 'send error report to Apple'. Maybe that helps you, too.
>
> Date/Time:      2005-06-28 18:03:45 +0200
> OS Version:     10.3.9 (Build 7W98)
> Report Version: 2
>
> Command: R
> Path:    /Applications/R.app/Contents/MacOS/R
> Version: 1.11 (1.11)
> PID:     374
> Thread:  0
>
> Exception:  EXC_BAD_ACCESS (0x0001)
> Codes:      KERN_INVALID_ADDRESS (0x0001) at 0x80000006
>
> Thread 0 Crashed:
> 0   com.apple.CoreFoundation     0x901c0f74 CFRetain + 0x20
> 1   com.apple.CoreFoundation     0x901dcc74 CFArrayCreate + 0x144
> 2   com.apple.Foundation         0x90a6c5e4 -[NSArray  
> initWithObjects:] + 0xbc
> 3   org.R-project.R              0x000032e4 -[RController init] +  
> 0x174
> 4   com.apple.AppKit             0x92f6bca8 -[NSCustomObject  
> nibInstantiate] + 0x10c
> 5   com.apple.AppKit             0x92e9ae54 -[NSIBObjectData  
> instantiateObject:] + 0xbc
> 6   com.apple.AppKit             0x92ea1e80 -[NSIBObjectData  
> nibInstantiateWithOwner:topLevelObjects:] + 0x88
> 7   com.apple.AppKit             0x92f93c2c loadNib + 0xfc
> 8   com.apple.AppKit             0x92eeae24 +[NSBundle 
> (NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 0x2e8
> 9   com.apple.AppKit             0x92f69d28 +[NSBundle 
> (NSNibLoading) loadNibFile:externalNameTable:withZone:] + 0x9c
> 10  com.apple.AppKit             0x92f7b51c +[NSBundle 
> (NSNibLoading) loadNibNamed:owner:] + 0x174
> 11  com.apple.AppKit             0x92f69b90 NSApplicationMain + 0x174
> 12  org.R-project.R              0x00002ba0 _start + 0x188 (crt.c:267)
> 13  dyld                         0x8fe1a278 _dyld_start + 0x64
>
> PPC Thread State:
>   srr0: 0x901c0f74 srr1: 0x0200f030                vrsave: 0x00000000
>     cr: 0x22000448  xer: 0x00000002   lr: 0x901c0f6c  ctr: 0x901c5acc
>     r0: 0x901dcc74   r1: 0xbffff5f0   r2: 0x22000448   r3: 0x80000000
>     r4: 0x80000000   r5: 0xbffff584   r6: 0x0003a348   r7: 0x0003a348
>     r8: 0x0003a348   r9: 0x00000008  r10: 0xffffffff  r11: 0xa0a21114
>    r12: 0x901c5acc  r13: 0x00000000  r14: 0x00000000  r15: 0x00000000
>    r16: 0x00311f50  r17: 0xa2eaab3c  r18: 0xa2e9ab3c  r19: 0xa2eaab3c
>    r20: 0xa2eaab3c  r21: 0x0003bf18  r22: 0x00000000  r23: 0x00000009
>    r24: 0xbffff720  r25: 0xbffff724  r26: 0x003a14c0  r27: 0xa01c2e94
>    r28: 0x00000009  r29: 0x003a1490  r30: 0x003a14bc  r31: 0x901c0f6c
>
> Binary Images Description:
>     0x1000 -    0x38fff org.R-project.R 1.11    /Applications/R.app/ 
> Contents/MacOS/R
>   0x205000 -   0x226fff libreadline.5.0.dylib     /Library/ 
> Frameworks/R.framework/Resources/lib/libreadline.5.0.dylib
>  0x1008000 -  0x1195fff libR.dylib     /Library/Frameworks/ 
> R.framework/Resources/lib/libR.dylib
> 0x806c0000 - 0x806e9fff libxslt.1.dylib     /usr/lib/libxslt.1.dylib
> 0x80830000 - 0x8090efff libxml2.2.dylib     /usr/lib/libxml2.2.dylib
> 0x8ed60000 - 0x8ed62fff com.apple.ExceptionHandling 1.2 (???)    / 
> System/Library/Frameworks/ExceptionHandling.framework/Versions/A/ 
> ExceptionHandling
> 0x8fe00000 - 0x8fe4ffff dyld     /usr/lib/dyld
> 0x90000000 - 0x9014ffff libSystem.B.dylib     /usr/lib/ 
> libSystem.B.dylib
> 0x901c0000 - 0x9026dfff com.apple.CoreFoundation 6.3.7 (299.35)    / 
> System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
> CoreFoundation
> 0x902b0000 - 0x90529fff com.apple.CoreServices.CarbonCore  
> 10.3.7    /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
> 0x90584000 - 0x905f3fff com.apple.framework.IOKit 1.3.6 (???)    / 
> System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
> 0x90610000 - 0x9069afff com.apple.CoreServices.OSServices 3.0.1    / 
> System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/OSServices.framework/Versions/A/OSServices
> 0x90700000 - 0x90700fff com.apple.CoreServices 10.3 (???)    / 
> System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> CoreServices
> 0x907c7000 - 0x907d2fff libCSync.A.dylib     /System/Library/ 
> Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
> 0x907f0000 - 0x907f9fff com.apple.DiskArbitration 2.0.5    /System/ 
> Library/PrivateFrameworks/DiskArbitration.framework/Versions/A/ 
> DiskArbitration
> 0x90810000 - 0x90810fff com.apple.ApplicationServices 1.0 (???)    / 
> System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> ApplicationServices
> 0x90830000 - 0x9089ffff libobjc.A.dylib     /usr/lib/libobjc.A.dylib
> 0x90940000 - 0x909b3fff com.apple.DesktopServices 1.2.5    /System/ 
> Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/ 
> DesktopServicesPriv
> 0x90a20000 - 0x90b7bfff com.apple.Foundation 6.3.7 (500.59)    / 
> System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
> 0x90d20000 - 0x90d3bfff com.apple.SystemConfiguration 1.7.1  
> (???)    /System/Library/Frameworks/SystemConfiguration.framework/ 
> Versions/A/SystemConfiguration
> 0x90ec0000 - 0x90ec0fff com.apple.Cocoa 6.3 (???)    /System/ 
> Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
> 0x910b0000 - 0x91101fff com.apple.bom 1.2.5 (63.2)    /System/ 
> Library/PrivateFrameworks/Bom.framework/Versions/A/Bom
> 0x913a0000 - 0x9145ffff ColorSync     /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> ColorSync.framework/Versions/A/ColorSync
> 0x914ad000 - 0x914c1fff libCGATS.A.dylib     /System/Library/ 
> Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
> 0x914e0000 - 0x91549fff com.apple.htmlrendering 1.1.2    /System/ 
> Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> HTMLRendering.framework/Versions/A/HTMLRendering
> 0x915e0000 - 0x91699fff com.apple.QD 3.4.67 (???)    /System/ 
> Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/QD.framework/Versions/A/QD
> 0x91720000 - 0x917b3fff com.apple.print.framework.PrintCore 3.3    / 
> System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/PrintCore.framework/Versions/A/PrintCore
> 0x91820000 - 0x91830fff com.apple.speech.recognition.framework  
> 3.3    /System/Library/Frameworks/Carbon.framework/Versions/A/ 
> Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
> 0x91850000 - 0x9186afff com.apple.openscripting 1.2.1 (???)    / 
> System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> OpenScripting.framework/Versions/A/OpenScripting
> 0x91890000 - 0x918a0fff com.apple.ImageCapture 2.1.5    /System/ 
> Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> ImageCapture.framework/Versions/A/ImageCapture
> 0x918d0000 - 0x918dcfff com.apple.help 1.0.1    /System/Library/ 
> Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/ 
> Versions/A/Help
> 0x91900000 - 0x9190dfff com.apple.CommonPanels 1.2.1 (1.0)    / 
> System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> CommonPanels.framework/Versions/A/CommonPanels
> 0x91930000 - 0x9197efff com.apple.print.framework.Print 3.3    / 
> System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> Print.framework/Versions/A/Print
> 0x919a7000 - 0x919c1fff libresolv.9.dylib     /usr/lib/libresolv. 
> 9.dylib
> 0x919d0000 - 0x919dbfff com.apple.securityhi 1.2 (90)    /System/ 
> Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> SecurityHI.framework/Versions/A/SecurityHI
> 0x919e3000 - 0x91a1bfff com.apple.AE 1.4    /System/Library/ 
> Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
> AE.framework/Versions/A/AE
> 0x91a40000 - 0x91ab3fff com.apple.NavigationServices 3.3.3    / 
> System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> NavigationServices.framework/Versions/A/NavigationServices
> 0x91b10000 - 0x91b2afff libPDFRIP.A.dylib     /System/Library/ 
> Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libPDFRIP.A.dylib
> 0x91b50000 - 0x91b5ffff libPSRIP.A.dylib     /System/Library/ 
> Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libPSRIP.A.dylib
> 0x91f0d000 - 0x91f0dfff com.apple.Carbon 10.3 (???)    /System/ 
> Library/Frameworks/Carbon.framework/Versions/A/Carbon
> 0x92056000 - 0x9206dfff com.apple.LangAnalysis 1.5.4    /System/ 
> Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
> 0x920f0000 - 0x92116fff com.apple.FindByContent 1.4 (1.2)    / 
> System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/FindByContent.framework/Versions/A/FindByContent
> 0x92140000 - 0x92327fff com.apple.security 2.4 (177)    /System/ 
> Library/Frameworks/Security.framework/Versions/A/Security
> 0x924b0000 - 0x924e8fff com.apple.LaunchServices 10.3.5 (98.4)    / 
> System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/LaunchServices.framework/Versions/A/LaunchServices
> 0x927b6000 - 0x927d3fff com.apple.audio.SoundManager 3.9    /System/ 
> Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> CarbonSound.framework/Versions/A/CarbonSound
> 0x927f0000 - 0x92827fff com.apple.CFNetwork 1.2.1 (7)    /System/ 
> Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
> CFNetwork.framework/Versions/A/CFNetwork
> 0x92880000 - 0x92c05fff com.apple.HIToolbox 1.3.6 (???)    /System/ 
> Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> HIToolbox.framework/Versions/A/HIToolbox
> 0x92e70000 - 0x9336ffff com.apple.AppKit 6.3.8 (743.39)    /System/ 
> Library/Frameworks/AppKit.framework/Versions/C/AppKit
> 0x9398f000 - 0x939fcfff libvDSP.dylib     /System/Library/ 
> Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
> vecLib.framework/Versions/A/libvDSP.dylib
> 0x93a20000 - 0x93a34fff libcups.2.dylib     /usr/lib/libcups.2.dylib
> 0x93a50000 - 0x93a54fff libmathCommon.A.dylib     /usr/lib/system/ 
> libmathCommon.A.dylib
> 0x940f0000 - 0x94108fff com.apple.WebServices 1.1.1 (1.1.0)    / 
> System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/WebServicesCore.framework/Versions/A/WebServicesCore
> 0x941b0000 - 0x941dbfff libncurses.5.dylib     /usr/lib/libncurses. 
> 5.dylib
> 0x944c0000 - 0x94556fff com.apple.WebKit 312.1    /System/Library/ 
> Frameworks/WebKit.framework/Versions/A/WebKit
> 0x94640000 - 0x94649fff libz.1.dylib     /usr/lib/libz.1.dylib
> 0x9464c000 - 0x9469cfff com.apple.HIServices 1.4.1 (0.0.1d1)    / 
> System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/HIServices.framework/Versions/A/HIServices
> 0x946e0000 - 0x9473ffff com.apple.SearchKit 1.0.2    /System/ 
> Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
> SearchKit.framework/Versions/A/SearchKit
> 0x9477d000 - 0x94790fff com.apple.speech.synthesis.framework  
> 3.2    /System/Library/Frameworks/ApplicationServices.framework/ 
> Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/ 
> SpeechSynthesis
> 0x94800000 - 0x9488cfff com.apple.ink.framework 101.1.4 (55.12)    / 
> System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> Ink.framework/Versions/A/Ink
> 0x948fa000 - 0x94961fff com.apple.audio.CoreAudio 2.1.3    /System/ 
> Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
> 0x949ba000 - 0x949cdfff libRIP.A.dylib     /System/Library/ 
> Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
> 0x94ea0000 - 0x954a6fff libBLAS.dylib     /System/Library/ 
> Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
> vecLib.framework/Versions/A/libBLAS.dylib
> 0x95500000 - 0x957d0fff libLAPACK.dylib     /System/Library/ 
> Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
> vecLib.framework/Versions/A/libLAPACK.dylib
> 0x958e0000 - 0x95900fff libvMisc.dylib     /System/Library/ 
> Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
> vecLib.framework/Versions/A/libvMisc.dylib
> 0x95b50000 - 0x95c32fff libicucore.A.dylib     /usr/lib/ 
> libicucore.A.dylib
> 0x95ca0000 - 0x95d62fff libcrypto.0.9.7.dylib     /usr/lib/ 
> libcrypto.0.9.7.dylib
> 0x95dc0000 - 0x95deefff libssl.0.9.7.dylib     /usr/lib/libssl. 
> 0.9.7.dylib
> 0x95dfe000 - 0x95eb6fff com.apple.audio.toolbox.AudioToolbox  
> 1.3.3    /System/Library/Frameworks/AudioToolbox.framework/Versions/ 
> A/AudioToolbox
> 0x95f30000 - 0x9601efff libiconv.2.dylib     /usr/lib/libiconv.2.dylib
> 0x961b0000 - 0x96292fff com.apple.JavaScriptCore 312    /System/ 
> Library/Frameworks/WebKit.framework/Versions/A/Frameworks/ 
> JavaScriptCore.framework/Versions/A/JavaScriptCore
> 0x962e6000 - 0x965befff com.apple.CoreGraphics 1.203.30 (???)    / 
> System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
> 0x96b50000 - 0x96bdffff ATS     /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/ 
> Versions/A/ATS
> 0x96e80000 - 0x96e90fff com.apple.vecLib 3.0.3 (vecLib 3.0.3)    / 
> System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
> 0x970f0000 - 0x970f8fff libbsm.dylib     /usr/lib/libbsm.dylib
> 0x973e0000 - 0x976c6fff com.apple.WebCore 315    /System/Library/ 
> Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/ 
> Versions/A/WebCore
> 0x9798b000 - 0x9798bfff com.apple.audio.units.AudioUnit 1.3.3    / 
> System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
>
>
>
>
> Am 28.06.2005 um 16:53 schrieb stefano iacus:
>
>
>
>> You should give us more feedback if you want us to be of any help  
>> to you.
>> Could you please send us the crash report of R? (See Console.app  
>> in /Applications/Utilities )
>> stefano
>>
>> On 28/giu/05, at 06:23, matthias.wahl at macnews.de wrote:
>>
>>
>>
>>> Full_Name: Matthias Wahl
>>> Version: 2.0.1 and 2.1.0a
>>> OS: Mac OS X 10.3.9
>>> Submission from: (NULL) (84.159.39.159)
>>>
>>>
>>> Version 2.1.0a does get installed, R is available under  
>>> applications,
>>> however when trying to start R I get an error message that R is  
>>> terminated
>>> due to an error and that's it. Re-installing didn't help at all.
>>>
>>> Then I tried Version 2.0.1. and there I don't even get an icon to  
>>> start R.
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
>
>


From j.van_den_hoff at fz-rossendorf.de  Thu Jun 30 11:24:41 2005
From: j.van_den_hoff at fz-rossendorf.de (joerg van den hoff)
Date: Thu, 30 Jun 2005 11:24:41 +0200
Subject: [R-SIG-Mac] install of nls.lm failed
In-Reply-To: <65FA4416-38F9-4C54-9A97-EBEB85EE4DE4@r-project.org>
References: <42C2CD44.3090906@fz-rossendorf.de>
	<65FA4416-38F9-4C54-9A97-EBEB85EE4DE4@r-project.org>
Message-ID: <42C3BA59.20705@fz-rossendorf.de>

Simon Urbanek wrote:
> On Jun 29, 2005, at 12:33 PM, joerg van den hoff wrote:
> 
>> hi everybody,
>>
>> trying to install nls.lm  under R.2.1.0 and Tiger I got:
> 
> 
> You didn't tell us what Fortran compiler you are using, but my wild  
> guess is that you use the one from fink. If that turns out to be true  
> and you insist on using that one, you'll need to compile your own R  (or 

simon,
thanks for your response.
your "wild guess" is correct and, well, I insist on nothing like that, 
but it's simply the only g77 which materialized/was required at some 
point of installing packages via fink.

> you can try to patch the paths in various places or specify  additional 
> flags for the package to find your libg2c ...).

after some false starts: the only thing which seems necessary is:

- mkdir /usr/local/lib/gcc/powerpc-apple-darwin6.8
- ln -s /sw/lib 3.4.2

after this the package installed and seems(...) to run without problems.

> The CRAN  binary 
> requires g77 3.4.2 in /usr/local which you don't have.

and since g77 seems not to be installed as part of the DevTools, this 
would mean to recompile/reinstall gcc from scratch? would it not be a 
better idea to use environment variables instead of hardcoding the path 
into the binary which seems, after all, not to be a standard setup? or 
am I wrong (apart from the "given infinite time, one could do 
everything" problem)?
> 
> Cheers,
> Simon
> 
> 
regards,
joerg


From simon.urbanek at r-project.org  Thu Jun 30 18:26:54 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 30 Jun 2005 12:26:54 -0400
Subject: [R-SIG-Mac] install of nls.lm failed
In-Reply-To: <42C3BA59.20705@fz-rossendorf.de>
References: <42C2CD44.3090906@fz-rossendorf.de>
	<65FA4416-38F9-4C54-9A97-EBEB85EE4DE4@r-project.org>
	<42C3BA59.20705@fz-rossendorf.de>
Message-ID: <70EBA1CA-EF6B-48E8-AFEB-4273564A7CD4@r-project.org>

On Jun 30, 2005, at 5:24 AM, joerg van den hoff wrote:

> and since g77 seems not to be installed as part of the DevTools,  
> this would mean to recompile/reinstall gcc from scratch?

Not necessarily - see the R for Mac FAQ - there are several places  
where you can get just the g77 compiler.

> would it not be a better idea to use environment variables instead  
> of hardcoding the path into the binary which seems, after all, not  
> to be a standard setup? or am I wrong (apart from the "given  
> infinite time, one could do everything" problem)?

By design R on unix platforms determines compiler settings at  
configure/build time (and for a good reason). If you use a binary,  
you have to make sure all parts of the system (including compilers)  
are exactly same as at build time. It's not just the paths - it is  
not guaranteed that the fink compiler uses the same includes and  
libraries (in fact it often doesn't), so all other flags have to be  
set accordingly as well. Users reported several problems with the  
fink g77 so the only 'clean' solution is to re-compile R, because  
that is the only guarantee that all flags are determined correctly.

Cheers,
Simon


From simon.urbanek at r-project.org  Thu Jun 30 18:35:00 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 30 Jun 2005 12:35:00 -0400
Subject: [R-SIG-Mac] R problem (fwd)
In-Reply-To: <Pine.LNX.4.61.0506300201550.28369@turmalin.kubism.ku.dk>
References: <Pine.LNX.4.61.0506300201550.28369@turmalin.kubism.ku.dk>
Message-ID: <13E7FFA3-FE24-4105-B1CA-309BFF1EF951@r-project.org>

On Jun 29, 2005, at 8:08 PM, Kasper Daniel Hansen wrote:

> The error message from R when I try to load grDevices (it seems  
> that it has a probelm with some jpeg stuff - which I also find kind  
> of odd since capabilities(jpeg) is FALSE)

By default R before 2.1.1 added /usr/local/lib to DYLD_LIBRARY_PATH  
which overrides the search sequence for dynamic libraries.

You will have to remove /usr/local/lib/libjpeg.dylib because it  
conflicts with system's ImageIO framework - it should be a just a  
symlink anyway so it shouldn't affect other applications. (see http:// 
wiki.urbanek.info/index.cgi?TigeR for details) This is fixed in R 2.1.1.

Cheers,
Simon


From kaha at biostat.ku.dk  Thu Jun 30 20:15:27 2005
From: kaha at biostat.ku.dk (Kasper Daniel Hansen)
Date: Thu, 30 Jun 2005 20:15:27 +0200 (CEST)
Subject: [R-SIG-Mac] R problem (fwd)
In-Reply-To: <13E7FFA3-FE24-4105-B1CA-309BFF1EF951@r-project.org>
References: <Pine.LNX.4.61.0506300201550.28369@turmalin.kubism.ku.dk>
	<13E7FFA3-FE24-4105-B1CA-309BFF1EF951@r-project.org>
Message-ID: <Pine.LNX.4.61.0506302014150.7629@turmalin.kubism.ku.dk>

Yeah, thanks. Speaking of R-2.1.1 - is it normal that you do not provide 
new binaries for a new version? Or is it because the patched version was 
so recent anyway?

Kasper

On Thu, 30 Jun 2005, Simon Urbanek wrote:

> On Jun 29, 2005, at 8:08 PM, Kasper Daniel Hansen wrote:
> 
> > The error message from R when I try to load grDevices (it seems that it
> > has a probelm with some jpeg stuff - which I also find kind of odd since
> > capabilities(jpeg) is FALSE)
> 
> By default R before 2.1.1 added /usr/local/lib to DYLD_LIBRARY_PATH which
> overrides the search sequence for dynamic libraries.
> 
> You will have to remove /usr/local/lib/libjpeg.dylib because it conflicts with
> system's ImageIO framework - it should be a just a symlink anyway so it
> shouldn't affect other applications. (see http://
> wiki.urbanek.info/index.cgi?TigeR for details) This is fixed in R 2.1.1.
> 
> Cheers,
> Simon
> 
>


From mblanche at uclink.berkeley.edu  Thu Jun 30 19:40:18 2005
From: mblanche at uclink.berkeley.edu (Marco Blanchette)
Date: Thu, 30 Jun 2005 10:40:18 -0700
Subject: [R-SIG-Mac] R problem
In-Reply-To: <13E7FFA3-FE24-4105-B1CA-309BFF1EF951@r-project.org>
Message-ID: <BEE97C92.35C7%mblanche@uclink.berkeley.edu>

Many tx guys... Removed the conflicting  libXXX.dylib symlink in
/usr/local/bin and everything is back to normal.


On 6/30/05 9:35 AM, "Simon Urbanek" <simon.urbanek at r-project.org> wrote:

> wiki.urbanek.info/index.cgi?TigeR for details


Marco Blanchette, Ph.D.

mblanche at uclink.berkeley.edu

Donald C. Rio's lab
Department of Molecular and Cell Biology
16 Barker Hall
University of California
Berkeley, CA 94720-3204

Tel: (510) 642-1084
Cell: (510) 847-0996
Fax: (510) 642-6062


