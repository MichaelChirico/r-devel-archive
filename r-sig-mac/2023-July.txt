From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Thu Jul  6 07:16:22 2023
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Thu, 6 Jul 2023 00:16:22 -0500
Subject: [R-SIG-Mac] gfortran: command not found
Message-ID: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>

Hello, All:


	  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will 
run on my aging Mac) complains "gfortran: command not found".


	  I just upgraded to R 4.3.1 and installed 
"gfortran-12.2-universal.pkg" per 
"https://cran.r-project.org/bin/macosx/tools/".  I expected this to 
solve the problem.  It didn't.


	  Suggestions?
	  Thanks,
	  Spencer Graves


p.s.  This is my fork of KFAS, available at 
"https://github.com/sbgraves237/KFAS".  "sessionInfo()" appears below.


##########


  sessionInfo()
R version 4.3.1 (2023-06-16)
Platform: x86_64-apple-darwin20 (64-bit)
Running under: macOS Big Sur 11.7.8

Matrix products: default
BLAS: 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 

LAPACK: 
/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib; 
  LAPACK version 3.11.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Chicago
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
  [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
  [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
  [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
[13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
[17] purrr_1.0.1
 >


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Jul  6 07:42:32 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 6 Jul 2023 17:42:32 +1200
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
Message-ID: <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>

Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:

To quote from the page you downloaded R from:

This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.r-project.org/tools>. 



> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
> 
> Hello, All:
> 
> 
> 	  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
> 
> 
> 	  I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/".  I expected this to solve the problem.  It didn't.
> 
> 
> 	  Suggestions?
> 	  Thanks,
> 	  Spencer Graves
> 
> 
> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS".  "sessionInfo()" appears below.
> 
> 
> ##########
> 
> 
> sessionInfo()
> R version 4.3.1 (2023-06-16)
> Platform: x86_64-apple-darwin20 (64-bit)
> Running under: macOS Big Sur 11.7.8
> 
> Matrix products: default
> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 
> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> time zone: America/Chicago
> tzcode source: internal
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
> [17] purrr_1.0.1
> >
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Thu Jul  6 13:45:27 2023
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Thu, 6 Jul 2023 13:45:27 +0200
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
Message-ID: <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>

AFAICT, Spencer followed the implied instructions and it still didn't work. 

There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?

-pd  

> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
> 
> To quote from the page you downloaded R from:
> 
> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.r-project.org/tools>. 
> 
> 
> 
>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>> 
>> Hello, All:
>> 
>> 
>> 	  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>> 
>> 
>> 	  I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/".  I expected this to solve the problem.  It didn't.
>> 
>> 
>> 	  Suggestions?
>> 	  Thanks,
>> 	  Spencer Graves
>> 
>> 
>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS".  "sessionInfo()" appears below.
>> 
>> 
>> ##########
>> 
>> 
>> sessionInfo()
>> R version 4.3.1 (2023-06-16)
>> Platform: x86_64-apple-darwin20 (64-bit)
>> Running under: macOS Big Sur 11.7.8
>> 
>> Matrix products: default
>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 
>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> 
>> time zone: America/Chicago
>> tzcode source: internal
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> loaded via a namespace (and not attached):
>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>> [17] purrr_1.0.1
>>> 
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Thu Jul  6 17:07:48 2023
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Thu, 6 Jul 2023 10:07:48 -0500
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
Message-ID: <6f97bdcb-9608-e065-ac9f-ff324612e56b@prodsyse.com>

Hi, Peter et al.:


On 7/6/23 6:45 AM, Peter Dalgaard wrote:
> AFAICT, Spencer followed the implied instructions and it still didn't work.
> 
> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?


	  The default install went to "/opt/gfortran", and gcc is in "/usr/bin".


	  What should I do to fix this?


	  I downloaded and reinstalled "gfortran-12.2-universal.pkg". I did NOT 
see an option to install it anyplace else.


	  Thanks,
	  Spencer Graves

> 
> -pd
> 
>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>
>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>
>> To quote from the page you downloaded R from:
>>
>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.r-project.org/tools>.
>>
>>
>>
>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>>
>>> Hello, All:
>>>
>>>
>>> 	  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>
>>>
>>> 	  I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/".  I expected this to solve the problem.  It didn't.
>>>
>>>
>>> 	  Suggestions?
>>> 	  Thanks,
>>> 	  Spencer Graves
>>>
>>>
>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS".  "sessionInfo()" appears below.
>>>
>>>
>>> ##########
>>>
>>>
>>> sessionInfo()
>>> R version 4.3.1 (2023-06-16)
>>> Platform: x86_64-apple-darwin20 (64-bit)
>>> Running under: macOS Big Sur 11.7.8
>>>
>>> Matrix products: default
>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> time zone: America/Chicago
>>> tzcode source: internal
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> loaded via a namespace (and not attached):
>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>> [17] purrr_1.0.1
>>>>
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Jul  6 18:01:36 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 7 Jul 2023 04:01:36 +1200
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
Message-ID: <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>

AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.

The installer says:

The resulting compiler will live in /opt/gfortran and can be called with
/opt/gfortran/bin/gfortran

so it's advisable to have /opt/gfortran/bin on the PATH.

(Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).

Cheers,
Simon



> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com> wrote:
> 
> AFAICT, Spencer followed the implied instructions and it still didn't work. 
> 
> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
> 
> -pd  
> 
>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>> 
>> To quote from the page you downloaded R from:
>> 
>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.r-project.org/tools>. 
>> 
>> 
>> 
>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>> 
>>> Hello, All:
>>> 
>>> 
>>> 	  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>> 
>>> 
>>> 	  I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/".  I expected this to solve the problem.  It didn't.
>>> 
>>> 
>>> 	  Suggestions?
>>> 	  Thanks,
>>> 	  Spencer Graves
>>> 
>>> 
>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS".  "sessionInfo()" appears below.
>>> 
>>> 
>>> ##########
>>> 
>>> 
>>> sessionInfo()
>>> R version 4.3.1 (2023-06-16)
>>> Platform: x86_64-apple-darwin20 (64-bit)
>>> Running under: macOS Big Sur 11.7.8
>>> 
>>> Matrix products: default
>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 
>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>> 
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>> 
>>> time zone: America/Chicago
>>> tzcode source: internal
>>> 
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> 
>>> loaded via a namespace (and not attached):
>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>> [17] purrr_1.0.1
>>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 


	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Thu Jul  6 19:58:51 2023
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Thu, 6 Jul 2023 12:58:51 -0500
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
Message-ID: <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>

1.  I need to apologize to Simon:  I failed to see his reply to the 
original post.  Then I found the instructions and installed 
gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.


2.  I'm not finding clear instructions on how to update the path on 
macOS 11.7.8, which is the latest version available for my 2014 MacBook 
Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with 
differing instructions.  I found one in "support.apple.com" that 
recommended something that didn't work.[2]


	  Further suggestions?
	

	  Thanks again very much.
	  Spencer Graves


[2] "support.apple.com" recommended 
"PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", 
then "env".  I did "env" to get the current path, than appended 
":/opt/gfortran/bin" to that and executed the revised 
"PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with 
"env" again, the change was not displayed.  I rebooted with the same 
result.


https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac


On 7/6/23 11:01 AM, Simon Urbanek wrote:
> AFACT he didn't say so, there was no response, just double-posting of 
> the same question after is was answered.
> 
> The installer says:
> 
> The resulting compiler will live in /opt/gfortran and can be called with
> /opt/gfortran/bin/gfortran
> 
> so it's advisable to have /opt/gfortran/bin on the PATH.
> 
> (Side note: the arm64 build of R uses the full path, but some people 
> have been objecting to that since they wanted to use other compilers for 
> the legacy Intel builds, but as I suspected that causes other issues, so 
> I'll change that for the next release).
> 
> Cheers,
> Simon
> 
> 
> 
>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com 
>> <mailto:pdalgd at gmail.com>> wrote:
>>
>> AFAICT, Spencer followed the implied instructions and it still didn't 
>> work.
>>
>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> 
>> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>
>> -pd
>>
>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org 
>>> <mailto:simon.urbanek at r-project.org>> wrote:
>>>
>>> Already answered to you and on R-pkg-devel [9 mins after you posted 
>>> there - now more than 5h ago...]:
>>>
>>> To quote from the page you downloaded R from:
>>>
>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish 
>>> to compile R packages which contain Fortran code, you may need to 
>>> download the corresponding GNU Fortran compiler from 
>>> https://mac.R-project.org/tools <https://mac.R-project.org/tools> 
>>> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>
>>>
>>>
>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves 
>>>> <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> 
>>>> wrote:
>>>>
>>>> Hello, All:
>>>>
>>>>
>>>> ?"R CMD check KFAS" under macOS 11.7.8 (the latest version that will 
>>>> run on my aging Mac) complains "gfortran: command not found".
>>>>
>>>>
>>>> ?I just upgraded to R 4.3.1 and installed 
>>>> "gfortran-12.2-universal.pkg" per 
>>>> "https://cran.r-project.org/bin/macosx/tools/ 
>>>> <https://cran.r-project.org/bin/macosx/tools/>". ?I expected this to 
>>>> solve the problem. ?It didn't.
>>>>
>>>>
>>>> ?Suggestions?
>>>> ?Thanks,
>>>> ?Spencer Graves
>>>>
>>>>
>>>> p.s. ?This is my fork of KFAS, available at 
>>>> "https://github.com/sbgraves237/KFAS 
>>>> <https://github.com/sbgraves237/KFAS>". ?"sessionInfo()" appears below.
>>>>
>>>>
>>>> ##########
>>>>
>>>>
>>>> sessionInfo()
>>>> R version 4.3.1 (2023-06-16)
>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>> Running under: macOS Big Sur 11.7.8
>>>>
>>>> Matrix products: default
>>>> BLAS: 
>>>> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>> LAPACK: 
>>>> /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib; ?LAPACK version 3.11.0
>>>>
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>
>>>> time zone: America/Chicago
>>>> tzcode source: internal
>>>>
>>>> attached base packages:
>>>> [1] stats ????graphics ?grDevices utils ????datasets ?methods ??base
>>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] compiler_4.3.1 ?R6_2.5.1 ???????magrittr_2.0.3 ?cli_3.6.1
>>>> [5] tools_4.3.1 ????glue_1.6.2 ?????rstudioapi_0.14 roxygen2_7.2.3
>>>> [9] xml2_1.3.4 ?????vctrs_0.6.2 ????stringi_1.7.12 ?knitr_1.42
>>>> [13] xfun_0.39 ??????stringr_1.5.0 ??lifecycle_1.0.3 rlang_1.1.1
>>>> [17] purrr_1.0.1
>>>>>
>>>>
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>
>>>
>>>
>>> [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk> ?Priv: PDalgd at gmail.com 
>> <mailto:PDalgd at gmail.com>
>>
>


From pd@|gd @end|ng |rom gm@||@com  Thu Jul  6 20:15:40 2023
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Thu, 6 Jul 2023 20:15:40 +0200
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
Message-ID: <0D40A4AC-82C6-4615-8D75-2AF66D9DBC75@gmail.com>

I think the cleanest way is to diddle the /etc/paths.d structure. I have

PeterDaardsiMac:R pd$ ls /etc/paths.d
40-XQuartz	R		TeX		clang8		gfortran
PeterDaardsiMac:R pd$ cat /etc/paths.d/gfortran 
/usr/local/gfortran/bin
PeterDaardsiMac:R pd$ cat /etc/paths
/usr/local/bin
/usr/bin
/bin
/usr/sbin
/sbin

and the latter would want to be /opt/gfortran/bin for 12.2 (I still have 8.2 for now).

Two things to note:

1. The directories in paths.d/* are added to those in /etc/paths in alphabetical order, so careful with older versions in /usr/local/bin.

2. You (probably) need to logout and back in for the changes to take effect in your Terminal windows.

Alternatively, you can twiddle the shell startup files (~/.profile /etc/profile /etc/bashrc ....) directly. The trouble I have with that, is that I never feel sure that I am doing it in the right place.

- Peter D.

> On 6 Jul 2023, at 19:58 , Spencer Graves <spencer.graves at prodsyse.com> wrote:
> 
> 1.  I need to apologize to Simon:  I failed to see his reply to the original post.  Then I found the instructions and installed gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.
> 
> 
> 2.  I'm not finding clear instructions on how to update the path on macOS 11.7.8, which is the latest version available for my 2014 MacBook Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with differing instructions.  I found one in "support.apple.com" that recommended something that didn't work.[2]
> 
> 
> 	  Further suggestions?
> 	
> 
> 	  Thanks again very much.
> 	  Spencer Graves
> 
> 
> [2] "support.apple.com" recommended "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", then "env".  I did "env" to get the current path, than appended ":/opt/gfortran/bin" to that and executed the revised "PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with "env" again, the change was not displayed.  I rebooted with the same result.
> 
> 
> https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac
> 
> 
> On 7/6/23 11:01 AM, Simon Urbanek wrote:
>> AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.
>> The installer says:
>> The resulting compiler will live in /opt/gfortran and can be called with
>> /opt/gfortran/bin/gfortran
>> so it's advisable to have /opt/gfortran/bin on the PATH.
>> (Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).
>> Cheers,
>> Simon
>>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com <mailto:pdalgd at gmail.com>> wrote:
>>> 
>>> AFAICT, Spencer followed the implied instructions and it still didn't work.
>>> 
>>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>> 
>>> -pd
>>> 
>>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>> wrote:
>>>> 
>>>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>>> 
>>>> To quote from the page you downloaded R from:
>>>> 
>>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.R-project.org/tools> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>> 
>>>> 
>>>> 
>>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>>>> 
>>>>> Hello, All:
>>>>> 
>>>>> 
>>>>>  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>>> 
>>>>> 
>>>>>  I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/<https://cran.r-project.org/bin/macosx/tools/>".  I expected this to solve the problem.  It didn't.
>>>>> 
>>>>> 
>>>>>  Suggestions?
>>>>>  Thanks,
>>>>>  Spencer Graves
>>>>> 
>>>>> 
>>>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS <https://github.com/sbgraves237/KFAS>".  "sessionInfo()" appears below.
>>>>> 
>>>>> 
>>>>> ##########
>>>>> 
>>>>> 
>>>>> sessionInfo()
>>>>> R version 4.3.1 (2023-06-16)
>>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>>> Running under: macOS Big Sur 11.7.8
>>>>> 
>>>>> Matrix products: default
>>>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>>> 
>>>>> locale:
>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>> 
>>>>> time zone: America/Chicago
>>>>> tzcode source: internal
>>>>> 
>>>>> attached base packages:
>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>> 
>>>>> loaded via a namespace (and not attached):
>>>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>>>> [17] purrr_1.0.1
>>>>>> 
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>>> 
>>>> [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> -- 
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com <mailto:PDalgd at gmail.com>

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Thu Jul  6 21:29:51 2023
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Thu, 6 Jul 2023 14:29:51 -0500
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <0D40A4AC-82C6-4615-8D75-2AF66D9DBC75@gmail.com>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
 <0D40A4AC-82C6-4615-8D75-2AF66D9DBC75@gmail.com>
Message-ID: <62dd9856-8547-ee3b-8f81-bc62c0e9df04@prodsyse.com>

Hi, Peter et al.:


On 7/6/23 1:15 PM, Peter Dalgaard wrote:
> I think the cleanest way is to diddle the /etc/paths.d structure. I have
> 
> PeterDaardsiMac:R pd$ ls /etc/paths.d
> 40-XQuartz	R		TeX		clang8		gfortran
> PeterDaardsiMac:R pd$ cat /etc/paths.d/gfortran
> /usr/local/gfortran/bin
> PeterDaardsiMac:R pd$ cat /etc/paths
> /usr/local/bin
> /usr/bin
> /bin
> /usr/sbin
> /sbin
> 
> and the latter would want to be /opt/gfortran/bin for 12.2 (I still have 8.2 for now).


	  I could not figure out how "to diddle the /etc/paths.d structure", 
but I was successful by appending "/opt/gfortran/bin" to etc/paths using 
"sudo vi etc/paths".  It didn't work immediately nor after I exited and 
restarted Terminal, but it did after I rebooted.


	  There's till a lot I do not understand about this. 
readLines('/etc/paths') now returns a character vector of length 8, with 
the last string being the one I appended. Meanwhile, "echo $PATH" at a 
prompt returned a path with 13 components with "/opt/gfortran/bin" being 
number 11, and 'Sys.getenv("PATH")' returned a path with 18 components, 
with "/opt/gfortran/bin" being number 12.


	  Anyway, thanks again to Simon and Peter.


	  Best Wishes,
	  Spencer Graves

> 
> Two things to note:
> 
> 1. The directories in paths.d/* are added to those in /etc/paths in alphabetical order, so careful with older versions in /usr/local/bin.
> 
> 2. You (probably) need to logout and back in for the changes to take effect in your Terminal windows.
> 
> Alternatively, you can twiddle the shell startup files (~/.profile /etc/profile /etc/bashrc ....) directly. The trouble I have with that, is that I never feel sure that I am doing it in the right place.
> 
> - Peter D.
> 
>> On 6 Jul 2023, at 19:58 , Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>
>> 1.  I need to apologize to Simon:  I failed to see his reply to the original post.  Then I found the instructions and installed gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.
>>
>>
>> 2.  I'm not finding clear instructions on how to update the path on macOS 11.7.8, which is the latest version available for my 2014 MacBook Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with differing instructions.  I found one in "support.apple.com" that recommended something that didn't work.[2]
>>
>>
>> 	  Further suggestions?
>> 	
>>
>> 	  Thanks again very much.
>> 	  Spencer Graves
>>
>>
>> [2] "support.apple.com" recommended "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", then "env".  I did "env" to get the current path, than appended ":/opt/gfortran/bin" to that and executed the revised "PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with "env" again, the change was not displayed.  I rebooted with the same result.
>>
>>
>> https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac
>>
>>
>> On 7/6/23 11:01 AM, Simon Urbanek wrote:
>>> AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.
>>> The installer says:
>>> The resulting compiler will live in /opt/gfortran and can be called with
>>> /opt/gfortran/bin/gfortran
>>> so it's advisable to have /opt/gfortran/bin on the PATH.
>>> (Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).
>>> Cheers,
>>> Simon
>>>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com <mailto:pdalgd at gmail.com>> wrote:
>>>>
>>>> AFAICT, Spencer followed the implied instructions and it still didn't work.
>>>>
>>>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>>>
>>>> -pd
>>>>
>>>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>> wrote:
>>>>>
>>>>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>>>>
>>>>> To quote from the page you downloaded R from:
>>>>>
>>>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.R-project.org/tools> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>>>
>>>>>
>>>>>
>>>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>>>>>
>>>>>> Hello, All:
>>>>>>
>>>>>>
>>>>>>   "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>>>>
>>>>>>
>>>>>>   I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/<https://cran.r-project.org/bin/macosx/tools/>".  I expected this to solve the problem.  It didn't.
>>>>>>
>>>>>>
>>>>>>   Suggestions?
>>>>>>   Thanks,
>>>>>>   Spencer Graves
>>>>>>
>>>>>>
>>>>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS <https://github.com/sbgraves237/KFAS>".  "sessionInfo()" appears below.
>>>>>>
>>>>>>
>>>>>> ##########
>>>>>>
>>>>>>
>>>>>> sessionInfo()
>>>>>> R version 4.3.1 (2023-06-16)
>>>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>>>> Running under: macOS Big Sur 11.7.8
>>>>>>
>>>>>> Matrix products: default
>>>>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>>>>
>>>>>> locale:
>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>
>>>>>> time zone: America/Chicago
>>>>>> tzcode source: internal
>>>>>>
>>>>>> attached base packages:
>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>
>>>>>> loaded via a namespace (and not attached):
>>>>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>>>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>>>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>>>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>>>>> [17] purrr_1.0.1
>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>
>>>>>
>>>>>
>>>>> [[alternative HTML version deleted]]
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>
>>>> -- 
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com <mailto:PDalgd at gmail.com>
>


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Jul  6 23:52:46 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 7 Jul 2023 09:52:46 +1200
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
Message-ID: <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>

In the shell:

PATH=/opt/gfortran/bin:$PATH R CMD INSTALL ...

in R if using install.packages()

Sys.setenv(PATH=paste0("/opt/gfortran/bin:", Sys.getenv("PATH")))



> On Jul 7, 2023, at 5:58 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
> 
> 1.  I need to apologize to Simon:  I failed to see his reply to the original post.  Then I found the instructions and installed gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.
> 
> 
> 2.  I'm not finding clear instructions on how to update the path on macOS 11.7.8, which is the latest version available for my 2014 MacBook Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with differing instructions.  I found one in "support.apple.com" that recommended something that didn't work.[2]
> 
> 
> 	  Further suggestions?
> 	
> 
> 	  Thanks again very much.
> 	  Spencer Graves
> 
> 
> [2] "support.apple.com" recommended "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", then "env".  I did "env" to get the current path, than appended ":/opt/gfortran/bin" to that and executed the revised "PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with "env" again, the change was not displayed.  I rebooted with the same result.
> 
> 
> https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac
> 
> 
> On 7/6/23 11:01 AM, Simon Urbanek wrote:
>> AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.
>> The installer says:
>> The resulting compiler will live in /opt/gfortran and can be called with
>> /opt/gfortran/bin/gfortran
>> so it's advisable to have /opt/gfortran/bin on the PATH.
>> (Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).
>> Cheers,
>> Simon
>>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com <mailto:pdalgd at gmail.com>> wrote:
>>> 
>>> AFAICT, Spencer followed the implied instructions and it still didn't work.
>>> 
>>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>> 
>>> -pd
>>> 
>>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>> wrote:
>>>> 
>>>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>>> 
>>>> To quote from the page you downloaded R from:
>>>> 
>>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.R-project.org/tools> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>> 
>>>> 
>>>> 
>>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>>>> 
>>>>> Hello, All:
>>>>> 
>>>>> 
>>>>>  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>>> 
>>>>> 
>>>>>  I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/ <https://cran.r-project.org/bin/macosx/tools/>".  I expected this to solve the problem.  It didn't.
>>>>> 
>>>>> 
>>>>>  Suggestions?
>>>>>  Thanks,
>>>>>  Spencer Graves
>>>>> 
>>>>> 
>>>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS <https://github.com/sbgraves237/KFAS>".  "sessionInfo()" appears below.
>>>>> 
>>>>> 
>>>>> ##########
>>>>> 
>>>>> 
>>>>> sessionInfo()
>>>>> R version 4.3.1 (2023-06-16)
>>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>>> Running under: macOS Big Sur 11.7.8
>>>>> 
>>>>> Matrix products: default
>>>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>>> 
>>>>> locale:
>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>> 
>>>>> time zone: America/Chicago
>>>>> tzcode source: internal
>>>>> 
>>>>> attached base packages:
>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>> 
>>>>> loaded via a namespace (and not attached):
>>>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>>>> [17] purrr_1.0.1
>>>>>> 
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>>> 
>>>> [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> -- 
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com <mailto:PDalgd at gmail.com>
>>> 
> 


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Fri Jul  7 00:15:39 2023
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Thu, 6 Jul 2023 17:15:39 -0500
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
 <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>
Message-ID: <8dabccd3-2117-d971-36e4-4d72ca2152cf@prodsyse.com>

Hi, Simon:


	  Thanks for this.  I have more questions:


On 7/6/23 4:52 PM, Simon Urbanek wrote:
> In the shell:
> 
> PATH=/opt/gfortran/bin:$PATH R CMD INSTALL ...


	  Please excuse my ignorance, but I don't understand this.  I 
previously tried "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ 
export PATH", recommended on a page associated with support.apple.com, 
as mentioned below.  That did not seem to work for me.


	  How is this different?  What did I do wrong before that this would 
fix?  [Or feel free to ignore this question:  My immediate problem seems 
to be fixed, and I'm not eager to do more experimentation with this now 
;-]

> 
> in R if using install.packages()
> 
> Sys.setenv(PATH=paste0("/opt/gfortran/bin:", Sys.getenv("PATH")))


	  If I set this in RStudio, will it affect what I do in "Terminal" on 
my Mac and vice versa?


	  This looks like a potentially similar thing to do from what I did. 
Is the effect of this different?  If so, how? [Again, please feel free 
to ignore this question.  I'm not eager to practice my "do-it-myself 
lobotomy" skills ;-]


	  Thanks,
	  Spencer Graves>
> 
>> On Jul 7, 2023, at 5:58 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>
>> 1.  I need to apologize to Simon:  I failed to see his reply to the original post.  Then I found the instructions and installed gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.
>>
>>
>> 2.  I'm not finding clear instructions on how to update the path on macOS 11.7.8, which is the latest version available for my 2014 MacBook Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with differing instructions.  I found one in "support.apple.com" that recommended something that didn't work.[2]
>>
>>
>> 	  Further suggestions?
>> 	
>>
>> 	  Thanks again very much.
>> 	  Spencer Graves
>>
>>
>> [2] "support.apple.com" recommended "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", then "env".  I did "env" to get the current path, than appended ":/opt/gfortran/bin" to that and executed the revised "PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with "env" again, the change was not displayed.  I rebooted with the same result.
>>
>>
>> https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac
>>
>>
>> On 7/6/23 11:01 AM, Simon Urbanek wrote:
>>> AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.
>>> The installer says:
>>> The resulting compiler will live in /opt/gfortran and can be called with
>>> /opt/gfortran/bin/gfortran
>>> so it's advisable to have /opt/gfortran/bin on the PATH.
>>> (Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).
>>> Cheers,
>>> Simon
>>>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com <mailto:pdalgd at gmail.com>> wrote:
>>>>
>>>> AFAICT, Spencer followed the implied instructions and it still didn't work.
>>>>
>>>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>>>
>>>> -pd
>>>>
>>>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>> wrote:
>>>>>
>>>>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>>>>
>>>>> To quote from the page you downloaded R from:
>>>>>
>>>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.R-project.org/tools> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>>>
>>>>>
>>>>>
>>>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>>>>>
>>>>>> Hello, All:
>>>>>>
>>>>>>
>>>>>>   "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>>>>
>>>>>>
>>>>>>   I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/ <https://cran.r-project.org/bin/macosx/tools/>".  I expected this to solve the problem.  It didn't.
>>>>>>
>>>>>>
>>>>>>   Suggestions?
>>>>>>   Thanks,
>>>>>>   Spencer Graves
>>>>>>
>>>>>>
>>>>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS <https://github.com/sbgraves237/KFAS>".  "sessionInfo()" appears below.
>>>>>>
>>>>>>
>>>>>> ##########
>>>>>>
>>>>>>
>>>>>> sessionInfo()
>>>>>> R version 4.3.1 (2023-06-16)
>>>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>>>> Running under: macOS Big Sur 11.7.8
>>>>>>
>>>>>> Matrix products: default
>>>>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>>>>
>>>>>> locale:
>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>
>>>>>> time zone: America/Chicago
>>>>>> tzcode source: internal
>>>>>>
>>>>>> attached base packages:
>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>
>>>>>> loaded via a namespace (and not attached):
>>>>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>>>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>>>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>>>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>>>>> [17] purrr_1.0.1
>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>
>>>>>
>>>>>
>>>>> [[alternative HTML version deleted]]
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>
>>>> -- 
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com <mailto:PDalgd at gmail.com>
>>>>
>>
>


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Jul  7 01:07:18 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 7 Jul 2023 11:07:18 +1200
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <8dabccd3-2117-d971-36e4-4d72ca2152cf@prodsyse.com>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
 <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>
 <8dabccd3-2117-d971-36e4-4d72ca2152cf@prodsyse.com>
Message-ID: <CD66B94D-F4E9-4C4E-A0C7-DE9BF4FA6080@R-project.org>



> On 7/07/2023, at 10:15 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
> 
> Hi, Simon:
> 
> 
> 	  Thanks for this.  I have more questions:
> 
> 
> On 7/6/23 4:52 PM, Simon Urbanek wrote:
>> In the shell:
>> PATH=/opt/gfortran/bin:$PATH R CMD INSTALL ...
> 
> 
> 	  Please excuse my ignorance, but I don't understand this.  I previously tried "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", recommended on a page associated with support.apple.com, as mentioned below.  That did not seem to work for me.
> 

That one sets the specified fixed path and then exports it. Setting a fixed PATH by hand is typically a bad idea since it removes all existing entries - and the one you listed didn't even have gfortran on it. Exporting is another alternative if you want to set the PATH for all subsequent commands.

The line I sent just prepends the /opt/gfortran/bin to the PATH for the one R CMD command, but doesn't affect anything else. I would recommend reading a basic tutorial on unix shell if you really want to know more (actually a good idea if you ever want to use the Terminal and not kill your machine).


> 	  How is this different?  What did I do wrong before that this would fix?  [Or feel free to ignore this question:  My immediate problem seems to be fixed, and I'm not eager to do more experimentation with this now ;-]
> 
>> in R if using install.packages()
>> Sys.setenv(PATH=paste0("/opt/gfortran/bin:", Sys.getenv("PATH")))
> 
> 
> 	  If I set this in RStudio, will it affect what I do in "Terminal" on my Mac and vice versa?
> 

No, it is only valid for the current R session (and I don't know about RStudio - it's not R so sometimes R rules don't apply), that's why I said it's for the case where you run install.packages() in the R session.


Note that another alternative is to simply symlink gfortran to your /usr/local/bin since that is on the PATH on macOS by default, i.e., you only need to run this in the Terminal once (requires admin access):

sudo ln -sfn /opt/gfortran/bin/gfortran /usr/local/bin/gfortran

Cheers,
Simon




> 
> 	  This looks like a potentially similar thing to do from what I did. Is the effect of this different?  If so, how? [Again, please feel free to ignore this question.  I'm not eager to practice my "do-it-myself lobotomy" skills ;-]
> 
> 
> 	  Thanks,
> 	  Spencer Graves>
>>> On Jul 7, 2023, at 5:58 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>> 
>>> 1.  I need to apologize to Simon:  I failed to see his reply to the original post.  Then I found the instructions and installed gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.
>>> 
>>> 
>>> 2.  I'm not finding clear instructions on how to update the path on macOS 11.7.8, which is the latest version available for my 2014 MacBook Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with differing instructions.  I found one in "support.apple.com" that recommended something that didn't work.[2]
>>> 
>>> 
>>> 	  Further suggestions?
>>> 	
>>> 
>>> 	  Thanks again very much.
>>> 	  Spencer Graves
>>> 
>>> 
>>> [2] "support.apple.com" recommended "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", then "env".  I did "env" to get the current path, than appended ":/opt/gfortran/bin" to that and executed the revised "PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with "env" again, the change was not displayed.  I rebooted with the same result.
>>> 
>>> 
>>> https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac
>>> 
>>> 
>>> On 7/6/23 11:01 AM, Simon Urbanek wrote:
>>>> AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.
>>>> The installer says:
>>>> The resulting compiler will live in /opt/gfortran and can be called with
>>>> /opt/gfortran/bin/gfortran
>>>> so it's advisable to have /opt/gfortran/bin on the PATH.
>>>> (Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).
>>>> Cheers,
>>>> Simon
>>>>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com <mailto:pdalgd at gmail.com>> wrote:
>>>>> 
>>>>> AFAICT, Spencer followed the implied instructions and it still didn't work.
>>>>> 
>>>>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>>>> 
>>>>> -pd
>>>>> 
>>>>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>> wrote:
>>>>>> 
>>>>>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>>>>> 
>>>>>> To quote from the page you downloaded R from:
>>>>>> 
>>>>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.R-project.org/tools> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>>>>>> 
>>>>>>> Hello, All:
>>>>>>> 
>>>>>>> 
>>>>>>>  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>>>>> 
>>>>>>> 
>>>>>>>  I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/ <https://cran.r-project.org/bin/macosx/tools/>".  I expected this to solve the problem.  It didn't.
>>>>>>> 
>>>>>>> 
>>>>>>>  Suggestions?
>>>>>>>  Thanks,
>>>>>>>  Spencer Graves
>>>>>>> 
>>>>>>> 
>>>>>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS <https://github.com/sbgraves237/KFAS>".  "sessionInfo()" appears below.
>>>>>>> 
>>>>>>> 
>>>>>>> ##########
>>>>>>> 
>>>>>>> 
>>>>>>> sessionInfo()
>>>>>>> R version 4.3.1 (2023-06-16)
>>>>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>>>>> Running under: macOS Big Sur 11.7.8
>>>>>>> 
>>>>>>> Matrix products: default
>>>>>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>>>>> 
>>>>>>> locale:
>>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>> 
>>>>>>> time zone: America/Chicago
>>>>>>> tzcode source: internal
>>>>>>> 
>>>>>>> attached base packages:
>>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>> 
>>>>>>> loaded via a namespace (and not attached):
>>>>>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>>>>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>>>>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>>>>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>>>>>> [17] purrr_1.0.1
>>>>>>>> 
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> [[alternative HTML version deleted]]
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>>> -- 
>>>>> Peter Dalgaard, Professor,
>>>>> Center for Statistics, Copenhagen Business School
>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>> Phone: (+45)38153501
>>>>> Office: A 4.23
>>>>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com <mailto:PDalgd at gmail.com>
>>>>> 
>>> 
> 


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Fri Jul  7 08:54:51 2023
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Fri, 7 Jul 2023 07:54:51 +0100
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <CD66B94D-F4E9-4C4E-A0C7-DE9BF4FA6080@R-project.org>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
 <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>
 <8dabccd3-2117-d971-36e4-4d72ca2152cf@prodsyse.com>
 <CD66B94D-F4E9-4C4E-A0C7-DE9BF4FA6080@R-project.org>
Message-ID: <428ad845-060e-64f5-30ff-70a65d5ae36b@stats.ox.ac.uk>

An alternative is not to have gfortran on the path and use a personal 
Makevars file, as documented at 
https://cran.r-project.org/doc/manuals/r-devel/R-admin.html#macOS-packages .

Reasons to do it that way include

a) GCC builds have included other compilers including gcc in the same 
directory as gfortran, and I have been caught in the past by 
badly-written software looking for gcc as a C compiler and finding that 
one rather than Apple's gcc which is a wrapper for clang.  (The current 
gfortran distribution only includes x86_64-apple-darwin20.0-gcc and 
similar.)

b) If the gfortran you have installed differs from that used to build R, 
you may need to set FLIBS, and this has happened as different CRAN 
distributions have been built with different versions of gfortran.

When I do want gfortran on the path, for example to build other 
software, I do symlink it to somewhere on my path.

I would prefer if Simon continues to give the full path as FC in 
etc/Makeconf: anyone who wants a different compiler can use a personal 
Makevars.  (Continues at least for arm64, and I would prefer consistency.)


On 07/07/2023 00:07, Simon Urbanek wrote:
> 
> 
>> On 7/07/2023, at 10:15 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>
>> Hi, Simon:
>>
>>
>> 	  Thanks for this.  I have more questions:
>>
>>
>> On 7/6/23 4:52 PM, Simon Urbanek wrote:
>>> In the shell:
>>> PATH=/opt/gfortran/bin:$PATH R CMD INSTALL ...
>>
>>
>> 	  Please excuse my ignorance, but I don't understand this.  I previously tried "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", recommended on a page associated with support.apple.com, as mentioned below.  That did not seem to work for me.
>>
> 
> That one sets the specified fixed path and then exports it. Setting a fixed PATH by hand is typically a bad idea since it removes all existing entries - and the one you listed didn't even have gfortran on it. Exporting is another alternative if you want to set the PATH for all subsequent commands.
> 
> The line I sent just prepends the /opt/gfortran/bin to the PATH for the one R CMD command, but doesn't affect anything else. I would recommend reading a basic tutorial on unix shell if you really want to know more (actually a good idea if you ever want to use the Terminal and not kill your machine).
> 
> 
>> 	  How is this different?  What did I do wrong before that this would fix?  [Or feel free to ignore this question:  My immediate problem seems to be fixed, and I'm not eager to do more experimentation with this now ;-]
>>
>>> in R if using install.packages()
>>> Sys.setenv(PATH=paste0("/opt/gfortran/bin:", Sys.getenv("PATH")))
>>
>>
>> 	  If I set this in RStudio, will it affect what I do in "Terminal" on my Mac and vice versa?
>>
> 
> No, it is only valid for the current R session (and I don't know about RStudio - it's not R so sometimes R rules don't apply), that's why I said it's for the case where you run install.packages() in the R session.
> 
> 
> Note that another alternative is to simply symlink gfortran to your /usr/local/bin since that is on the PATH on macOS by default, i.e., you only need to run this in the Terminal once (requires admin access):
> 
> sudo ln -sfn /opt/gfortran/bin/gfortran /usr/local/bin/gfortran
> 
> Cheers,
> Simon
> 
> 
> 
> 
>>
>> 	  This looks like a potentially similar thing to do from what I did. Is the effect of this different?  If so, how? [Again, please feel free to ignore this question.  I'm not eager to practice my "do-it-myself lobotomy" skills ;-]
>>
>>
>> 	  Thanks,
>> 	  Spencer Graves>
>>>> On Jul 7, 2023, at 5:58 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>>>
>>>> 1.  I need to apologize to Simon:  I failed to see his reply to the original post.  Then I found the instructions and installed gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.
>>>>
>>>>
>>>> 2.  I'm not finding clear instructions on how to update the path on macOS 11.7.8, which is the latest version available for my 2014 MacBook Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with differing instructions.  I found one in "support.apple.com" that recommended something that didn't work.[2]
>>>>
>>>>
>>>> 	  Further suggestions?
>>>> 	
>>>>
>>>> 	  Thanks again very much.
>>>> 	  Spencer Graves
>>>>
>>>>
>>>> [2] "support.apple.com" recommended "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", then "env".  I did "env" to get the current path, than appended ":/opt/gfortran/bin" to that and executed the revised "PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with "env" again, the change was not displayed.  I rebooted with the same result.
>>>>
>>>>
>>>> https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac
>>>>
>>>>
>>>> On 7/6/23 11:01 AM, Simon Urbanek wrote:
>>>>> AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.
>>>>> The installer says:
>>>>> The resulting compiler will live in /opt/gfortran and can be called with
>>>>> /opt/gfortran/bin/gfortran
>>>>> so it's advisable to have /opt/gfortran/bin on the PATH.
>>>>> (Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).
>>>>> Cheers,
>>>>> Simon
>>>>>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com <mailto:pdalgd at gmail.com>> wrote:
>>>>>>
>>>>>> AFAICT, Spencer followed the implied instructions and it still didn't work.
>>>>>>
>>>>>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>>>>>
>>>>>> -pd
>>>>>>
>>>>>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>> wrote:
>>>>>>>
>>>>>>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>>>>>>
>>>>>>> To quote from the page you downloaded R from:
>>>>>>>
>>>>>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.R-project.org/tools> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>>>>>>>
>>>>>>>> Hello, All:
>>>>>>>>
>>>>>>>>
>>>>>>>>   "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>>>>>>
>>>>>>>>
>>>>>>>>   I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/ <https://cran.r-project.org/bin/macosx/tools/>".  I expected this to solve the problem.  It didn't.
>>>>>>>>
>>>>>>>>
>>>>>>>>   Suggestions?
>>>>>>>>   Thanks,
>>>>>>>>   Spencer Graves
>>>>>>>>
>>>>>>>>
>>>>>>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS <https://github.com/sbgraves237/KFAS>".  "sessionInfo()" appears below.
>>>>>>>>
>>>>>>>>
>>>>>>>> ##########
>>>>>>>>
>>>>>>>>
>>>>>>>> sessionInfo()
>>>>>>>> R version 4.3.1 (2023-06-16)
>>>>>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>>>>>> Running under: macOS Big Sur 11.7.8
>>>>>>>>
>>>>>>>> Matrix products: default
>>>>>>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>>>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>>>>>>
>>>>>>>> locale:
>>>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>>>
>>>>>>>> time zone: America/Chicago
>>>>>>>> tzcode source: internal
>>>>>>>>
>>>>>>>> attached base packages:
>>>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>>>
>>>>>>>> loaded via a namespace (and not attached):
>>>>>>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>>>>>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>>>>>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>>>>>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>>>>>>> [17] purrr_1.0.1
>>>>>>>>>
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> R-SIG-Mac mailing list
>>>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>
>>>>>> -- 
>>>>>> Peter Dalgaard, Professor,
>>>>>> Center for Statistics, Copenhagen Business School
>>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>>> Phone: (+45)38153501
>>>>>> Office: A 4.23
>>>>>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com <mailto:PDalgd at gmail.com>
>>>>>>
>>>>
>>
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Jul  7 11:21:58 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 7 Jul 2023 21:21:58 +1200
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <428ad845-060e-64f5-30ff-70a65d5ae36b@stats.ox.ac.uk>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
 <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>
 <8dabccd3-2117-d971-36e4-4d72ca2152cf@prodsyse.com>
 <CD66B94D-F4E9-4C4E-A0C7-DE9BF4FA6080@R-project.org>
 <428ad845-060e-64f5-30ff-70a65d5ae36b@stats.ox.ac.uk>
Message-ID: <50FD8FAA-838C-48A5-97B8-C72AAE8654C4@R-project.org>



> On Jul 7, 2023, at 6:54 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> 
> An alternative is not to have gfortran on the path and use a personal Makevars file, as documented at https://cran.r-project.org/doc/manuals/r-devel/R-admin.html#macOS-packages .
> 
> Reasons to do it that way include
> 
> a) GCC builds have included other compilers including gcc in the same directory as gfortran, and I have been caught in the past by badly-written software looking for gcc as a C compiler and finding that one rather than Apple's gcc which is a wrapper for clang.  (The current gfortran distribution only includes x86_64-apple-darwin20.0-gcc and similar.)
> 
> b) If the gfortran you have installed differs from that used to build R, you may need to set FLIBS, and this has happened as different CRAN distributions have been built with different versions of gfortran.
> 
> When I do want gfortran on the path, for example to build other software, I do symlink it to somewhere on my path.
> 
> I would prefer if Simon continues to give the full path as FC in etc/Makeconf: anyone who wants a different compiler can use a personal Makevars.  (Continues at least for arm64, and I would prefer consistency.)
> 


I agree - it wasn't entirely intentional (it's really historical), but then there was request for a PATH-less gfortran settings. After this discussion I agree that it's not a good idea since the instructions on CRAN should be fully self-sufficient *and* we want to avoid other incompatible Fortran compilers. (I have trouble reaching the x86_64 build machine from home right now, so I'll change it on Monday).

Thanks,
Simon


> 
> On 07/07/2023 00:07, Simon Urbanek wrote:
>>> On 7/07/2023, at 10:15 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>> 
>>> Hi, Simon:
>>> 
>>> 
>>> 	  Thanks for this.  I have more questions:
>>> 
>>> 
>>> On 7/6/23 4:52 PM, Simon Urbanek wrote:
>>>> In the shell:
>>>> PATH=/opt/gfortran/bin:$PATH R CMD INSTALL ...
>>> 
>>> 
>>> 	  Please excuse my ignorance, but I don't understand this.  I previously tried "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", recommended on a page associated with support.apple.com, as mentioned below.  That did not seem to work for me.
>>> 
>> That one sets the specified fixed path and then exports it. Setting a fixed PATH by hand is typically a bad idea since it removes all existing entries - and the one you listed didn't even have gfortran on it. Exporting is another alternative if you want to set the PATH for all subsequent commands.
>> The line I sent just prepends the /opt/gfortran/bin to the PATH for the one R CMD command, but doesn't affect anything else. I would recommend reading a basic tutorial on unix shell if you really want to know more (actually a good idea if you ever want to use the Terminal and not kill your machine).
>>> 	  How is this different?  What did I do wrong before that this would fix?  [Or feel free to ignore this question:  My immediate problem seems to be fixed, and I'm not eager to do more experimentation with this now ;-]
>>> 
>>>> in R if using install.packages()
>>>> Sys.setenv(PATH=paste0("/opt/gfortran/bin:", Sys.getenv("PATH")))
>>> 
>>> 
>>> 	  If I set this in RStudio, will it affect what I do in "Terminal" on my Mac and vice versa?
>>> 
>> No, it is only valid for the current R session (and I don't know about RStudio - it's not R so sometimes R rules don't apply), that's why I said it's for the case where you run install.packages() in the R session.
>> Note that another alternative is to simply symlink gfortran to your /usr/local/bin since that is on the PATH on macOS by default, i.e., you only need to run this in the Terminal once (requires admin access):
>> sudo ln -sfn /opt/gfortran/bin/gfortran /usr/local/bin/gfortran
>> Cheers,
>> Simon
>>> 
>>> 	  This looks like a potentially similar thing to do from what I did. Is the effect of this different?  If so, how? [Again, please feel free to ignore this question.  I'm not eager to practice my "do-it-myself lobotomy" skills ;-]
>>> 
>>> 
>>> 	  Thanks,
>>> 	  Spencer Graves>
>>>>> On Jul 7, 2023, at 5:58 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>>>> 
>>>>> 1.  I need to apologize to Simon:  I failed to see his reply to the original post.  Then I found the instructions and installed gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.
>>>>> 
>>>>> 
>>>>> 2.  I'm not finding clear instructions on how to update the path on macOS 11.7.8, which is the latest version available for my 2014 MacBook Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with differing instructions.  I found one in "support.apple.com" that recommended something that didn't work.[2]
>>>>> 
>>>>> 
>>>>> 	  Further suggestions?
>>>>> 	
>>>>> 
>>>>> 	  Thanks again very much.
>>>>> 	  Spencer Graves
>>>>> 
>>>>> 
>>>>> [2] "support.apple.com" recommended "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", then "env".  I did "env" to get the current path, than appended ":/opt/gfortran/bin" to that and executed the revised "PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with "env" again, the change was not displayed.  I rebooted with the same result.
>>>>> 
>>>>> 
>>>>> https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac
>>>>> 
>>>>> 
>>>>> On 7/6/23 11:01 AM, Simon Urbanek wrote:
>>>>>> AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.
>>>>>> The installer says:
>>>>>> The resulting compiler will live in /opt/gfortran and can be called with
>>>>>> /opt/gfortran/bin/gfortran
>>>>>> so it's advisable to have /opt/gfortran/bin on the PATH.
>>>>>> (Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).
>>>>>> Cheers,
>>>>>> Simon
>>>>>>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com <mailto:pdalgd at gmail.com>> wrote:
>>>>>>> 
>>>>>>> AFAICT, Spencer followed the implied instructions and it still didn't work.
>>>>>>> 
>>>>>>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>>>>>> 
>>>>>>> -pd
>>>>>>> 
>>>>>>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>> wrote:
>>>>>>>> 
>>>>>>>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>>>>>>> 
>>>>>>>> To quote from the page you downloaded R from:
>>>>>>>> 
>>>>>>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.R-project.org/tools> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>>>>>>>> 
>>>>>>>>> Hello, All:
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>>  "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>>  I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/ <https://cran.r-project.org/bin/macosx/tools/>".  I expected this to solve the problem.  It didn't.
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>>  Suggestions?
>>>>>>>>>  Thanks,
>>>>>>>>>  Spencer Graves
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS <https://github.com/sbgraves237/KFAS>".  "sessionInfo()" appears below.
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> ##########
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> sessionInfo()
>>>>>>>>> R version 4.3.1 (2023-06-16)
>>>>>>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>>>>>>> Running under: macOS Big Sur 11.7.8
>>>>>>>>> 
>>>>>>>>> Matrix products: default
>>>>>>>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>>>>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>>>>>>> 
>>>>>>>>> locale:
>>>>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>>>> 
>>>>>>>>> time zone: America/Chicago
>>>>>>>>> tzcode source: internal
>>>>>>>>> 
>>>>>>>>> attached base packages:
>>>>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>>>> 
>>>>>>>>> loaded via a namespace (and not attached):
>>>>>>>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>>>>>>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>>>>>>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>>>>>>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>>>>>>>> [17] purrr_1.0.1
>>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> _______________________________________________
>>>>>>>>> R-SIG-Mac mailing list
>>>>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> [[alternative HTML version deleted]]
>>>>>>>> 
>>>>>>>> _______________________________________________
>>>>>>>> R-SIG-Mac mailing list
>>>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>> 
>>>>>>> -- 
>>>>>>> Peter Dalgaard, Professor,
>>>>>>> Center for Statistics, Copenhagen Business School
>>>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>>>> Phone: (+45)38153501
>>>>>>> Office: A 4.23
>>>>>>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com <mailto:PDalgd at gmail.com>
>>>>>>> 
>>>>> 
>>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
> 


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Sat Jul  8 01:41:11 2023
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Fri, 7 Jul 2023 18:41:11 -0500
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <50FD8FAA-838C-48A5-97B8-C72AAE8654C4@R-project.org>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
 <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>
 <8dabccd3-2117-d971-36e4-4d72ca2152cf@prodsyse.com>
 <CD66B94D-F4E9-4C4E-A0C7-DE9BF4FA6080@R-project.org>
 <428ad845-060e-64f5-30ff-70a65d5ae36b@stats.ox.ac.uk>
 <50FD8FAA-838C-48A5-97B8-C72AAE8654C4@R-project.org>
Message-ID: <2377603a-7a73-b50e-99d3-d06077dc52f0@prodsyse.com>

Hello, Simon Urbanek and Professor Ripley:


On 7/7/23 4:21 AM, Simon Urbanek wrote:
> 
> 
>> On Jul 7, 2023, at 6:54 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>
>> An alternative is not to have gfortran on the path and use a personal Makevars file, as documented at https://cran.r-project.org/doc/manuals/r-devel/R-admin.html#macOS-packages .
>>
>> Reasons to do it that way include
>>
>> a) GCC builds have included other compilers including gcc in the same directory as gfortran, and I have been caught in the past by badly-written software looking for gcc as a C compiler and finding that one rather than Apple's gcc which is a wrapper for clang.  (The current gfortran distribution only includes x86_64-apple-darwin20.0-gcc and similar.)
>>
>> b) If the gfortran you have installed differs from that used to build R, you may need to set FLIBS, and this has happened as different CRAN distributions have been built with different versions of gfortran.
>>
>> When I do want gfortran on the path, for example to build other software, I do symlink it to somewhere on my path.
>>
>> I would prefer if Simon continues to give the full path as FC in etc/Makeconf: anyone who wants a different compiler can use a personal Makevars.  (Continues at least for arm64, and I would prefer consistency.)
>>
> 
> 
> I agree - it wasn't entirely intentional (it's really historical), but then there was request for a PATH-less gfortran settings. After this discussion I agree that it's not a good idea since the instructions on CRAN should be fully self-sufficient *and* we want to avoid other incompatible Fortran compilers. (I have trouble reaching the x86_64 build machine from home right now, so I'll change it on Monday).


	  Might it be feasible and appropriate for me to try to do this on my 
2014 MacBook Pro running macOS 11.7.8?


	  I ask, because I have so far not been able to parse the instructions 
in the link Prof. Ripley provided above.  I found a ".r" subdirectory in 
my default directory, but its contents seems to be only 
"crashpad_database".  I did not see anything that looked to me like, 
"HOME/.R/Makevars-R_PLATFORM".  ???


	  Thanks,
	  Spencer Graves

> 
> Thanks,
> Simon
> 
> 
>>
>> On 07/07/2023 00:07, Simon Urbanek wrote:
>>>> On 7/07/2023, at 10:15 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>>>
>>>> Hi, Simon:
>>>>
>>>>
>>>> 	  Thanks for this.  I have more questions:
>>>>
>>>>
>>>> On 7/6/23 4:52 PM, Simon Urbanek wrote:
>>>>> In the shell:
>>>>> PATH=/opt/gfortran/bin:$PATH R CMD INSTALL ...
>>>>
>>>>
>>>> 	  Please excuse my ignorance, but I don't understand this.  I previously tried "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", recommended on a page associated with support.apple.com, as mentioned below.  That did not seem to work for me.
>>>>
>>> That one sets the specified fixed path and then exports it. Setting a fixed PATH by hand is typically a bad idea since it removes all existing entries - and the one you listed didn't even have gfortran on it. Exporting is another alternative if you want to set the PATH for all subsequent commands.
>>> The line I sent just prepends the /opt/gfortran/bin to the PATH for the one R CMD command, but doesn't affect anything else. I would recommend reading a basic tutorial on unix shell if you really want to know more (actually a good idea if you ever want to use the Terminal and not kill your machine).
>>>> 	  How is this different?  What did I do wrong before that this would fix?  [Or feel free to ignore this question:  My immediate problem seems to be fixed, and I'm not eager to do more experimentation with this now ;-]
>>>>
>>>>> in R if using install.packages()
>>>>> Sys.setenv(PATH=paste0("/opt/gfortran/bin:", Sys.getenv("PATH")))
>>>>
>>>>
>>>> 	  If I set this in RStudio, will it affect what I do in "Terminal" on my Mac and vice versa?
>>>>
>>> No, it is only valid for the current R session (and I don't know about RStudio - it's not R so sometimes R rules don't apply), that's why I said it's for the case where you run install.packages() in the R session.
>>> Note that another alternative is to simply symlink gfortran to your /usr/local/bin since that is on the PATH on macOS by default, i.e., you only need to run this in the Terminal once (requires admin access):
>>> sudo ln -sfn /opt/gfortran/bin/gfortran /usr/local/bin/gfortran
>>> Cheers,
>>> Simon
>>>>
>>>> 	  This looks like a potentially similar thing to do from what I did. Is the effect of this different?  If so, how? [Again, please feel free to ignore this question.  I'm not eager to practice my "do-it-myself lobotomy" skills ;-]
>>>>
>>>>
>>>> 	  Thanks,
>>>> 	  Spencer Graves>
>>>>>> On Jul 7, 2023, at 5:58 AM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>>>>>
>>>>>> 1.  I need to apologize to Simon:  I failed to see his reply to the original post.  Then I found the instructions and installed gfortran-12.2-universal.pkg, as indicated there, but it still didn't work.
>>>>>>
>>>>>>
>>>>>> 2.  I'm not finding clear instructions on how to update the path on macOS 11.7.8, which is the latest version available for my 2014 MacBook Pro with a 2.8 GHz Quad-Core Intel Core i7.  I found several pages with differing instructions.  I found one in "support.apple.com" that recommended something that didn't work.[2]
>>>>>>
>>>>>>
>>>>>> 	  Further suggestions?
>>>>>> 	
>>>>>>
>>>>>> 	  Thanks again very much.
>>>>>> 	  Spencer Graves
>>>>>>
>>>>>>
>>>>>> [2] "support.apple.com" recommended "PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH", then "env".  I did "env" to get the current path, than appended ":/opt/gfortran/bin" to that and executed the revised "PATH=...:/opt/gfortran/bin export PATH".  However, when I checked with "env" again, the change was not displayed.  I rebooted with the same result.
>>>>>>
>>>>>>
>>>>>> https://support.apple.com/guide/terminal/use-environment-variables-apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac
>>>>>>
>>>>>>
>>>>>> On 7/6/23 11:01 AM, Simon Urbanek wrote:
>>>>>>> AFACT he didn't say so, there was no response, just double-posting of the same question after is was answered.
>>>>>>> The installer says:
>>>>>>> The resulting compiler will live in /opt/gfortran and can be called with
>>>>>>> /opt/gfortran/bin/gfortran
>>>>>>> so it's advisable to have /opt/gfortran/bin on the PATH.
>>>>>>> (Side note: the arm64 build of R uses the full path, but some people have been objecting to that since they wanted to use other compilers for the legacy Intel builds, but as I suspected that causes other issues, so I'll change that for the next release).
>>>>>>> Cheers,
>>>>>>> Simon
>>>>>>>> On Jul 6, 2023, at 11:45 PM, Peter Dalgaard <pdalgd at gmail.com <mailto:pdalgd at gmail.com>> wrote:
>>>>>>>>
>>>>>>>> AFAICT, Spencer followed the implied instructions and it still didn't work.
>>>>>>>>
>>>>>>>> There may also be a PATH issue when upgrading to 4.3.x, /usr/local -> /opt/R/<arch> Does gfortran 12.2 install to /opt/R/.../bin ?
>>>>>>>>
>>>>>>>> -pd
>>>>>>>>
>>>>>>>>> On 6 Jul 2023, at 07:42 , Simon Urbanek <simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>> wrote:
>>>>>>>>>
>>>>>>>>> Already answered to you and on R-pkg-devel [9 mins after you posted there - now more than 5h ago...]:
>>>>>>>>>
>>>>>>>>> To quote from the page you downloaded R from:
>>>>>>>>>
>>>>>>>>> This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools <https://mac.R-project.org/tools> <https://mac.r-project.org/tools <https://mac.r-project.org/tools>>.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> On Jul 6, 2023, at 5:16 PM, Spencer Graves <spencer.graves at prodsyse.com <mailto:spencer.graves at prodsyse.com>> wrote:
>>>>>>>>>>
>>>>>>>>>> Hello, All:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>   "R CMD check KFAS" under macOS 11.7.8 (the latest version that will run on my aging Mac) complains "gfortran: command not found".
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>   I just upgraded to R 4.3.1 and installed "gfortran-12.2-universal.pkg" per "https://cran.r-project.org/bin/macosx/tools/ <https://cran.r-project.org/bin/macosx/tools/>".  I expected this to solve the problem.  It didn't.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>   Suggestions?
>>>>>>>>>>   Thanks,
>>>>>>>>>>   Spencer Graves
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> p.s.  This is my fork of KFAS, available at "https://github.com/sbgraves237/KFAS <https://github.com/sbgraves237/KFAS>".  "sessionInfo()" appears below.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ##########
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> sessionInfo()
>>>>>>>>>> R version 4.3.1 (2023-06-16)
>>>>>>>>>> Platform: x86_64-apple-darwin20 (64-bit)
>>>>>>>>>> Running under: macOS Big Sur 11.7.8
>>>>>>>>>>
>>>>>>>>>> Matrix products: default
>>>>>>>>>> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>>>>>>>>> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
>>>>>>>>>>
>>>>>>>>>> locale:
>>>>>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>>>>>
>>>>>>>>>> time zone: America/Chicago
>>>>>>>>>> tzcode source: internal
>>>>>>>>>>
>>>>>>>>>> attached base packages:
>>>>>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>>>>>
>>>>>>>>>> loaded via a namespace (and not attached):
>>>>>>>>>> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
>>>>>>>>>> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
>>>>>>>>>> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
>>>>>>>>>> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
>>>>>>>>>> [17] purrr_1.0.1
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> _______________________________________________
>>>>>>>>>> R-SIG-Mac mailing list
>>>>>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> [[alternative HTML version deleted]]
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> R-SIG-Mac mailing list
>>>>>>>>> R-SIG-Mac at r-project.org <mailto:R-SIG-Mac at r-project.org>
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>>
>>>>>>>> -- 
>>>>>>>> Peter Dalgaard, Professor,
>>>>>>>> Center for Statistics, Copenhagen Business School
>>>>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>>>>> Phone: (+45)38153501
>>>>>>>> Office: A 4.23
>>>>>>>> Email: pd.mes at cbs.dk <mailto:pd.mes at cbs.dk>  Priv: PDalgd at gmail.com <mailto:PDalgd at gmail.com>
>>>>>>>>
>>>>>>
>>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>> -- 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Emeritus Professor of Applied Statistics, University of Oxford
>>
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Sat Jul  8 08:16:19 2023
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Sat, 8 Jul 2023 07:16:19 +0100
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <2377603a-7a73-b50e-99d3-d06077dc52f0@prodsyse.com>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
 <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>
 <8dabccd3-2117-d971-36e4-4d72ca2152cf@prodsyse.com>
 <CD66B94D-F4E9-4C4E-A0C7-DE9BF4FA6080@R-project.org>
 <428ad845-060e-64f5-30ff-70a65d5ae36b@stats.ox.ac.uk>
 <50FD8FAA-838C-48A5-97B8-C72AAE8654C4@R-project.org>
 <2377603a-7a73-b50e-99d3-d06077dc52f0@prodsyse.com>
Message-ID: <0a8543cc-31ea-694f-7ef5-fa8d7a38daf9@stats.ox.ac.uk>

On 08/07/2023 00:41, Spencer Graves wrote:
> Hello, Simon Urbanek and Professor Ripley:
> 
> 
> On 7/7/23 4:21 AM, Simon Urbanek wrote:
>>
>>
>>> On Jul 7, 2023, at 6:54 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk> 
>>> wrote:
>>>
>>> An alternative is not to have gfortran on the path and use a personal 
>>> Makevars file, as documented at 
>>> https://cran.r-project.org/doc/manuals/r-devel/R-admin.html#macOS-packages .
>>>
>>> Reasons to do it that way include
>>>
>>> a) GCC builds have included other compilers including gcc in the same 
>>> directory as gfortran, and I have been caught in the past by 
>>> badly-written software looking for gcc as a C compiler and finding 
>>> that one rather than Apple's gcc which is a wrapper for clang.? (The 
>>> current gfortran distribution only includes 
>>> x86_64-apple-darwin20.0-gcc and similar.)
>>>
>>> b) If the gfortran you have installed differs from that used to build 
>>> R, you may need to set FLIBS, and this has happened as different CRAN 
>>> distributions have been built with different versions of gfortran.
>>>
>>> When I do want gfortran on the path, for example to build other 
>>> software, I do symlink it to somewhere on my path.
>>>
>>> I would prefer if Simon continues to give the full path as FC in 
>>> etc/Makeconf: anyone who wants a different compiler can use a 
>>> personal Makevars.? (Continues at least for arm64, and I would prefer 
>>> consistency.)
>>>
>>
>>
>> I agree - it wasn't entirely intentional (it's really historical), but 
>> then there was request for a PATH-less gfortran settings. After this 
>> discussion I agree that it's not a good idea since the instructions on 
>> CRAN should be fully self-sufficient *and* we want to avoid other 
>> incompatible Fortran compilers. (I have trouble reaching the x86_64 
>> build machine from home right now, so I'll change it on Monday).
> 
> 
>  ????? Might it be feasible and appropriate for me to try to do this on 
> my 2014 MacBook Pro running macOS 11.7.8?
> 
> 
>  ????? I ask, because I have so far not been able to parse the 
> instructions in the link Prof. Ripley provided above.? I found a ".r" 
> subdirectory in my default directory, but its contents seems to be only 
> "crashpad_database".? I did not see anything that looked to me like, 
> "HOME/.R/Makevars-R_PLATFORM".? ???

You need to create the file (which is called ~/.R/Makevars in the 
section I referred you to).   Using a case-insenstive file system does 
not help (I had no idea what created ~/.r/crashpad_database, but 
Googling suggests RStudio).

(If you did not have ~/.r, you would need mkdir ~/.R in a Terminal.)
Then use your favourite editor to create a file ~/.r/Makevars containing 
the single line

FC=/opt/gfortran/bin/gfortran


The only issue is if you ever install a new gfortran you will need to 
edit/remove this file -- it is easily forgotten.  As Simon says he is 
changing this soon, I would make a note to remove the file when you 
update R.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Sat Jul  8 15:24:55 2023
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Sat, 8 Jul 2023 08:24:55 -0500
Subject: [R-SIG-Mac] gfortran: command not found
In-Reply-To: <0a8543cc-31ea-694f-7ef5-fa8d7a38daf9@stats.ox.ac.uk>
References: <01cca8d5-11f7-64ef-1c98-4c83f6f6d5e7@prodsyse.com>
 <D07204B2-D30F-42E7-9813-BC041940D480@R-project.org>
 <DF15C99C-4ECA-40F4-B2A3-88E2602F193A@gmail.com>
 <DC68C9A8-0EFF-467F-B234-CDFA47C0A524@R-project.org>
 <5289a0e5-5c9a-75fd-19b3-af2912c4d05f@prodsyse.com>
 <AE4E972E-7812-4845-B0B9-C9EA47D5741B@R-project.org>
 <8dabccd3-2117-d971-36e4-4d72ca2152cf@prodsyse.com>
 <CD66B94D-F4E9-4C4E-A0C7-DE9BF4FA6080@R-project.org>
 <428ad845-060e-64f5-30ff-70a65d5ae36b@stats.ox.ac.uk>
 <50FD8FAA-838C-48A5-97B8-C72AAE8654C4@R-project.org>
 <2377603a-7a73-b50e-99d3-d06077dc52f0@prodsyse.com>
 <0a8543cc-31ea-694f-7ef5-fa8d7a38daf9@stats.ox.ac.uk>
Message-ID: <eaa2c669-6a8d-9d33-99ed-364b4c14f8b0@prodsyse.com>

Dear Prof. Ripley et al.:


On 7/8/23 1:16 AM, Prof Brian Ripley wrote:
> On 08/07/2023 00:41, Spencer Graves wrote:
>> Hello, Simon Urbanek and Professor Ripley:
>>
>>
>> On 7/7/23 4:21 AM, Simon Urbanek wrote:
>>>
>>>
>>>> On Jul 7, 2023, at 6:54 PM, Prof Brian Ripley 
>>>> <ripley at stats.ox.ac.uk> wrote:
>>>>
>>>> An alternative is not to have gfortran on the path and use a 
>>>> personal Makevars file, as documented at 
>>>> https://cran.r-project.org/doc/manuals/r-devel/R-admin.html#macOS-packages .
>>>>
>>>> Reasons to do it that way include
>>>>
>>>> a) GCC builds have included other compilers including gcc in the 
>>>> same directory as gfortran, and I have been caught in the past by 
>>>> badly-written software looking for gcc as a C compiler and finding 
>>>> that one rather than Apple's gcc which is a wrapper for clang.? (The 
>>>> current gfortran distribution only includes 
>>>> x86_64-apple-darwin20.0-gcc and similar.)
>>>>
>>>> b) If the gfortran you have installed differs from that used to 
>>>> build R, you may need to set FLIBS, and this has happened as 
>>>> different CRAN distributions have been built with different versions 
>>>> of gfortran.
>>>>
>>>> When I do want gfortran on the path, for example to build other 
>>>> software, I do symlink it to somewhere on my path.
>>>>
>>>> I would prefer if Simon continues to give the full path as FC in 
>>>> etc/Makeconf: anyone who wants a different compiler can use a 
>>>> personal Makevars.? (Continues at least for arm64, and I would 
>>>> prefer consistency.)
>>>>
>>>
>>>
>>> I agree - it wasn't entirely intentional (it's really historical), 
>>> but then there was request for a PATH-less gfortran settings. After 
>>> this discussion I agree that it's not a good idea since the 
>>> instructions on CRAN should be fully self-sufficient *and* we want to 
>>> avoid other incompatible Fortran compilers. (I have trouble reaching 
>>> the x86_64 build machine from home right now, so I'll change it on 
>>> Monday).
>>
>>
>> ?????? Might it be feasible and appropriate for me to try to do this 
>> on my 2014 MacBook Pro running macOS 11.7.8?
>>
>>
>> ?????? I ask, because I have so far not been able to parse the 
>> instructions in the link Prof. Ripley provided above.? I found a ".r" 
>> subdirectory in my default directory, but its contents seems to be 
>> only "crashpad_database".? I did not see anything that looked to me 
>> like, "HOME/.R/Makevars-R_PLATFORM".? ???
> 
> You need to create the file (which is called ~/.R/Makevars in the 
> section I referred you to).?? Using a case-insenstive file system does 
> not help (I had no idea what created ~/.r/crashpad_database, but 
> Googling suggests RStudio).
> 
> (If you did not have ~/.r, you would need mkdir ~/.R in a Terminal.)
> Then use your favourite editor to create a file ~/.r/Makevars containing 
> the single line
> 
> FC=/opt/gfortran/bin/gfortran
> 
> 
> The only issue is if you ever install a new gfortran you will need to 
> edit/remove this file -- it is easily forgotten.? As Simon says he is 
> changing this soon, I would make a note to remove the file when you 
> update R.


	  For now, I've added a file "~/.r/Makevars" containing this single 
line and deleted the corresponding reference from "/etc/paths".  I 
rebooted and confirmed that it works.  Thanks very much.  Spencer Graves
>


From c@r| @end|ng |rom w|ttho|t@com  Sat Jul 22 22:29:59 2023
From: c@r| @end|ng |rom w|ttho|t@com (Carl Witthoft)
Date: Sat, 22 Jul 2023 16:29:59 -0400
Subject: [R-SIG-Mac] R 4.3.1 fails to load
Message-ID: <fddd144b-412b-7907-c3d3-96c83f4cfa02@witthoft.com>

Neither R.app Gui nor R from command line will work.
This is 4.3.1 ,  MacOS 13.4  on an x86 (and yes, that's the version I 
installed).

  Heres the error traceback from the command line:

*** caught segfault ***
address 0x0, cause 'memory not mapped'

Traceback:
  1: as.bigz(NA)
  2: fun(libname, pkgname)
  3: doTryCatch(return(expr), name, parentenv, handler)
  4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
  5: tryCatchList(expr, classes, parentenv, handlers)
  6: tryCatch(fun(libname, pkgname), error = identity)
  7: runHook(".onLoad", env, package.lib, package)
  8: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = 
vI[[j]])
  9: asNamespace(ns)
10: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc, 
.libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
11: loadNamespace(package, lib.loc)
12: doTryCatch(return(expr), name, parentenv, handler)
13: tryCatchOne(expr, names, parentenv, handlers[[1L]])
14: tryCatchList(expr, classes, parentenv, handlers)
15: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <- 
loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos, 
deps, exclude, include.only)}, error = function(e) {    P <- if 
(!is.null(cc <- conditionCall(e)))         paste(" in", deparse(cc)[1L]) 
    else ""    msg <- gettextf("package or namespace load failed for 
%s%s:\n %s",         sQuote(package), P, conditionMessage(e))    if 
(logical.return && !quietly)         message(paste("Error:", msg), 
domain = NA)    else stop(msg, call. = FALSE, domain = NA)})
16: library(cgwtools)

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace


-- 
Carl Witthoft
personal: carl at witthoft.com
The Witthoft Group, Consulting
https://witthoftgroup.weebly.com/


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Jul 22 22:41:35 2023
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 22 Jul 2023 13:41:35 -0700
Subject: [R-SIG-Mac] R 4.3.1 fails to load
In-Reply-To: <fddd144b-412b-7907-c3d3-96c83f4cfa02@witthoft.com>
References: <fddd144b-412b-7907-c3d3-96c83f4cfa02@witthoft.com>
Message-ID: <dea455d8-4774-6588-02ee-a735bb414374@comcast.net>


On 7/22/23 13:29, Carl Witthoft wrote:
> Neither R.app Gui nor R from command line will work.
> This is 4.3.1 ,? MacOS 13.4? on an x86 (and yes, that's the version I 
> installed).
>
> ?Heres the error traceback from the command line:
>
> *** caught segfault ***
> address 0x0, cause 'memory not mapped'
>
> Traceback:
> ?1: as.bigz(NA)


Seems you are executing a non-base function call when this cascade of 
calls leading to the segfault begins. Perhaps this is something being 
done by an out-of-date .Rdata file load? Did you remove all `.Rdata` 
files from the potential sites of auto-loading? Did you run 
`update.packages(checkBuilt=TRUE)` after the R installation.


Best of luck---

David.

> ?2: fun(libname, pkgname)
> ?3: doTryCatch(return(expr), name, parentenv, handler)
> ?4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> ?5: tryCatchList(expr, classes, parentenv, handlers)
> ?6: tryCatch(fun(libname, pkgname), error = identity)
> ?7: runHook(".onLoad", env, package.lib, package)
> ?8: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck 
> = vI[[j]])
> ?9: asNamespace(ns)
> 10: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc, 
> .libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
> 11: loadNamespace(package, lib.loc)
> 12: doTryCatch(return(expr), name, parentenv, handler)
> 13: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 14: tryCatchList(expr, classes, parentenv, handlers)
> 15: tryCatch({??? attr(package, "LibPath") <- which.lib.loc ns <- 
> loadNamespace(package, lib.loc)??? env <- attachNamespace(ns, pos = 
> pos, deps, exclude, include.only)}, error = function(e) {??? P <- if 
> (!is.null(cc <- conditionCall(e)))???????? paste(" in", 
> deparse(cc)[1L]) ?? else ""??? msg <- gettextf("package or namespace 
> load failed for %s%s:\n %s",???????? sQuote(package), P, 
> conditionMessage(e)) if (logical.return && !quietly) 
> message(paste("Error:", msg), domain = NA)??? else stop(msg, call. = 
> FALSE, domain = NA)})
> 16: library(cgwtools)
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
>
>


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Jul 22 22:42:56 2023
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 22 Jul 2023 13:42:56 -0700
Subject: [R-SIG-Mac] R 4.3.1 fails to load
In-Reply-To: <fddd144b-412b-7907-c3d3-96c83f4cfa02@witthoft.com>
References: <fddd144b-412b-7907-c3d3-96c83f4cfa02@witthoft.com>
Message-ID: <2bb13ccc-1419-f86d-8f4b-35fe0da29643@comcast.net>

And I forgot to ask .... what's in your .Rprofile file?

On 7/22/23 13:29, Carl Witthoft wrote:
> Neither R.app Gui nor R from command line will work.
> This is 4.3.1 ,? MacOS 13.4? on an x86 (and yes, that's the version I 
> installed).
>
> ?Heres the error traceback from the command line:
>
> *** caught segfault ***
> address 0x0, cause 'memory not mapped'
>
> Traceback:
> ?1: as.bigz(NA)
> ?2: fun(libname, pkgname)
> ?3: doTryCatch(return(expr), name, parentenv, handler)
> ?4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> ?5: tryCatchList(expr, classes, parentenv, handlers)
> ?6: tryCatch(fun(libname, pkgname), error = identity)
> ?7: runHook(".onLoad", env, package.lib, package)
> ?8: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck 
> = vI[[j]])
> ?9: asNamespace(ns)
> 10: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc, 
> .libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
> 11: loadNamespace(package, lib.loc)
> 12: doTryCatch(return(expr), name, parentenv, handler)
> 13: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 14: tryCatchList(expr, classes, parentenv, handlers)
> 15: tryCatch({??? attr(package, "LibPath") <- which.lib.loc ns <- 
> loadNamespace(package, lib.loc)??? env <- attachNamespace(ns, pos = 
> pos, deps, exclude, include.only)}, error = function(e) {??? P <- if 
> (!is.null(cc <- conditionCall(e)))???????? paste(" in", 
> deparse(cc)[1L]) ?? else ""??? msg <- gettextf("package or namespace 
> load failed for %s%s:\n %s",???????? sQuote(package), P, 
> conditionMessage(e)) if (logical.return && !quietly) 
> message(paste("Error:", msg), domain = NA)??? else stop(msg, call. = 
> FALSE, domain = NA)})
> 16: library(cgwtools)
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
>
>


From c@r| @end|ng |rom w|ttho|t@com  Sun Jul 23 01:54:06 2023
From: c@r| @end|ng |rom w|ttho|t@com (Carl Witthoft)
Date: Sat, 22 Jul 2023 19:54:06 -0400
Subject: [R-SIG-Mac] R 4.3.1 fails to load
In-Reply-To: <2bb13ccc-1419-f86d-8f4b-35fe0da29643@comcast.net>
References: <fddd144b-412b-7907-c3d3-96c83f4cfa02@witthoft.com>
 <2bb13ccc-1419-f86d-8f4b-35fe0da29643@comcast.net>
Message-ID: <a4b67173-34d1-ff05-a6cd-9807f4f468d8@witthoft.com>



On 7/22/23 4:42 PM, David Winsemius wrote:
> And I forgot to ask .... what's in your .Rprofile file?
Nothing that ever caused trouble in the past, but FWIW, here it is:

setwd('~/Rgames')
#print('diagnostic: ~/.Rprofile ran')
#doubt this'l work... 'quartz' not recognized by startup sequence
#quartz(family='Times',points=24)
#I think fontsize is OK on the iMac -- needed par() on 10.4
#library(graphics)
#par(cex=0.7)
#I don't know what mechanism "stuffed" a value inside the 'function()" 
inside
# the definition of 'prev' , but putting in ellipsis cleaned it up
invisible(makeActiveBinding("prev", function(...) .Last.value, .GlobalEnv))

#change this list if other items desired
srclist<-c( 'mytoys.R')
for (dafile in srclist) {
source(dafile)
}
rm(dafile)
rm(srclist)
# load things I always want
if (length(find.package('cgwtools'))) library(cgwtools)


# will this fix history
#.Last <- function() if(interactive()) 
try(savehistory("~/Rgames/.Rhistory"))
# change prompt
options(prompt=paste(basename(getwd()),'> ',sep=""))

cat("Gosh, boss, it's great to see you again.\n\n")
print(fortunes::fortune())
> 
> On 7/22/23 13:29, Carl Witthoft wrote:
>> Neither R.app Gui nor R from command line will work.
>> This is 4.3.1 ,? MacOS 13.4? on an x86 (and yes, that's the version I 
>> installed).
>>
>> ?Heres the error traceback from the command line:
>>
>> *** caught segfault ***
>> address 0x0, cause 'memory not mapped'
>>
>> Traceback:
>> ?1: as.bigz(NA)
>> ?2: fun(libname, pkgname)
>> ?3: doTryCatch(return(expr), name, parentenv, handler)
>> ?4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>> ?5: tryCatchList(expr, classes, parentenv, handlers)
>> ?6: tryCatch(fun(libname, pkgname), error = identity)
>> ?7: runHook(".onLoad", env, package.lib, package)
>> ?8: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck 
>> = vI[[j]])
>> ?9: asNamespace(ns)
>> 10: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc, 
>> .libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
>> 11: loadNamespace(package, lib.loc)
>> 12: doTryCatch(return(expr), name, parentenv, handler)
>> 13: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>> 14: tryCatchList(expr, classes, parentenv, handlers)
>> 15: tryCatch({??? attr(package, "LibPath") <- which.lib.loc ns <- 
>> loadNamespace(package, lib.loc)??? env <- attachNamespace(ns, pos = 
>> pos, deps, exclude, include.only)}, error = function(e) {??? P <- if 
>> (!is.null(cc <- conditionCall(e)))???????? paste(" in", 
>> deparse(cc)[1L]) ?? else ""??? msg <- gettextf("package or namespace 
>> load failed for %s%s:\n %s",???????? sQuote(package), P, 
>> conditionMessage(e)) if (logical.return && !quietly) 
>> message(paste("Error:", msg), domain = NA)??? else stop(msg, call. = 
>> FALSE, domain = NA)})
>> 16: library(cgwtools)
>>
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>>
>>

-- 
Carl Witthoft
personal: carl at witthoft.com
The Witthoft Group, Consulting
https://witthoftgroup.weebly.com/


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jul 23 02:09:21 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 22 Jul 2023 20:09:21 -0400
Subject: [R-SIG-Mac] R 4.3.1 fails to load
In-Reply-To: <fddd144b-412b-7907-c3d3-96c83f4cfa02@witthoft.com>
References: <fddd144b-412b-7907-c3d3-96c83f4cfa02@witthoft.com>
Message-ID: <fec14073-09b8-cc77-4f0c-8301794994b1@gmail.com>

Do you know where the `library(cgwtools)` call came from?  It appears to 
be the culprit.

I'd try (command line)

   R --vanilla

for a minimal load, then update packages, etc.  Then try the regular 
load.  If it still fails, go back to vanilla, and source your .Rprofile 
with echo = TRUE to see which line in it is causing this (if it is 
actually .Rprofile that is the problem).

Duncan Murdoch

On 22/07/2023 4:29 p.m., Carl Witthoft wrote:
> Neither R.app Gui nor R from command line will work.
> This is 4.3.1 ,  MacOS 13.4  on an x86 (and yes, that's the version I
> installed).
> 
>    Heres the error traceback from the command line:
> 
> *** caught segfault ***
> address 0x0, cause 'memory not mapped'
> 
> Traceback:
>    1: as.bigz(NA)
>    2: fun(libname, pkgname)
>    3: doTryCatch(return(expr), name, parentenv, handler)
>    4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>    5: tryCatchList(expr, classes, parentenv, handlers)
>    6: tryCatch(fun(libname, pkgname), error = identity)
>    7: runHook(".onLoad", env, package.lib, package)
>    8: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck =
> vI[[j]])
>    9: asNamespace(ns)
> 10: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc,
> .libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
> 11: loadNamespace(package, lib.loc)
> 12: doTryCatch(return(expr), name, parentenv, handler)
> 13: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 14: tryCatchList(expr, classes, parentenv, handlers)
> 15: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <-
> loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
> deps, exclude, include.only)}, error = function(e) {    P <- if
> (!is.null(cc <- conditionCall(e)))         paste(" in", deparse(cc)[1L])
>      else ""    msg <- gettextf("package or namespace load failed for
> %s%s:\n %s",         sQuote(package), P, conditionMessage(e))    if
> (logical.return && !quietly)         message(paste("Error:", msg),
> domain = NA)    else stop(msg, call. = FALSE, domain = NA)})
> 16: library(cgwtools)
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> 
>


From c@r| @end|ng |rom w|ttho|t@com  Sun Jul 23 17:51:55 2023
From: c@r| @end|ng |rom w|ttho|t@com (Carl Witthoft)
Date: Sun, 23 Jul 2023 11:51:55 -0400
Subject: [R-SIG-Mac] 4.3.1 fails to load
In-Reply-To: <mailman.15041.3549.1690070976.1361.r-sig-mac@r-project.org>
References: <mailman.15041.3549.1690070976.1361.r-sig-mac@r-project.org>
Message-ID: <e46c4ae5-4de2-e58a-5cd2-6cc753efdcaf@witthoft.com>

Problem fixed but not solved.
On previous updates to R, I always copied all the packages (that aren't 
part of the base installation) from the previous version's Library 
folder to the new version's Library folder, and then updated when I 
actually use them.
The fix for my problem was to run "Update All" before trying to load any 
library.
The problem remains not-solved, because (prior to updating everything), 
any attempt to run

 >>  library(any_package)

would cause  failure similar to those I posted previously.  So, while 
I'm reasonably confident that R 4.3.1 doesn't play nicely with 4.2 - 
level libraries, I most definitely cannot point to any particular 
library.  The deepest level of the traceback report for  ggplot2 was

1: dyn.load(file, DLLpath = DLLpath, ...)

but when trying to load gmp, get the traceback quoted below.


carl




On 7/22/23 8:09 PM, r-sig-mac-request at r-project.org wrote:
> Send R-SIG-Mac mailing list submissions to
> 	r-sig-mac at r-project.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> or, via email, send a message with subject or body 'help' to
> 	r-sig-mac-request at r-project.org
> 
> You can reach the person managing the list at
> 	r-sig-mac-owner at r-project.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Mac digest..."
> 
> 
> Today's Topics:
> 
>     1.  R 4.3.1 fails to load (Carl Witthoft)
>     2. Re:  R 4.3.1 fails to load (David Winsemius)
>     3. Re:  R 4.3.1 fails to load (David Winsemius)
>     4. Re:  R 4.3.1 fails to load (Carl Witthoft)
>     5. Re:  R 4.3.1 fails to load (Duncan Murdoch)
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Sat, 22 Jul 2023 16:29:59 -0400
> From: Carl Witthoft <carl at witthoft.com>
> To: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
> Subject: [R-SIG-Mac] R 4.3.1 fails to load
> Message-ID: <fddd144b-412b-7907-c3d3-96c83f4cfa02 at witthoft.com>
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
> 
> Neither R.app Gui nor R from command line will work.
> This is 4.3.1 ,  MacOS 13.4  on an x86 (and yes, that's the version I
> installed).
> 
>    Heres the error traceback from the command line:
> 
> *** caught segfault ***
> address 0x0, cause 'memory not mapped'
> 
> Traceback:
>    1: as.bigz(NA)
>    2: fun(libname, pkgname)
>    3: doTryCatch(return(expr), name, parentenv, handler)
>    4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>    5: tryCatchList(expr, classes, parentenv, handlers)
>    6: tryCatch(fun(libname, pkgname), error = identity)
>    7: runHook(".onLoad", env, package.lib, package)
>    8: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck =
> vI[[j]])
>    9: asNamespace(ns)
> 10: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc,
> .libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
> 11: loadNamespace(package, lib.loc)
> 12: doTryCatch(return(expr), name, parentenv, handler)
> 13: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 14: tryCatchList(expr, classes, parentenv, handlers)
> 15: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <-
> loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
> deps, exclude, include.only)}, error = function(e) {    P <- if
> (!is.null(cc <- conditionCall(e)))         paste(" in", deparse(cc)[1L])
>      else ""    msg <- gettextf("package or namespace load failed for
> %s%s:\n %s",         sQuote(package), P, conditionMessage(e))    if
> (logical.return && !quietly)         message(paste("Error:", msg),
> domain = NA)    else stop(msg, call. = FALSE, domain = NA)})
> 16: library(cgwtools)
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> 
> 

-- 
Carl Witthoft
personal: carl at witthoft.com
The Witthoft Group, Consulting
https://witthoftgroup.weebly.com/


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jul 23 18:00:12 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 23 Jul 2023 12:00:12 -0400
Subject: [R-SIG-Mac] 4.3.1 fails to load
In-Reply-To: <e46c4ae5-4de2-e58a-5cd2-6cc753efdcaf@witthoft.com>
References: <mailman.15041.3549.1690070976.1361.r-sig-mac@r-project.org>
 <e46c4ae5-4de2-e58a-5cd2-6cc753efdcaf@witthoft.com>
Message-ID: <62938497-6b9b-2576-b792-3a3c111822a6@gmail.com>

On 23/07/2023 11:51 a.m., Carl Witthoft wrote:
> Problem fixed but not solved.
> On previous updates to R, I always copied all the packages (that aren't
> part of the base installation) from the previous version's Library
> folder to the new version's Library folder, and then updated when I
> actually use them.
> The fix for my problem was to run "Update All" before trying to load any
> library.

You should run

  update.packages(ask = FALSE, checkBuilt = TRUE)

to make sure all packages are properly installed for 4.3.1.  In general, 
installing a package for x.y.z should let it work in x.y.(z+1), but not 
in x.(y+1).z'.  Errors like that are what "checkBuilt" is looking for. 
I don't know what "Update All" is doing; that's some front end calling R.

Duncan Murdoch


> The problem remains not-solved, because (prior to updating everything),
> any attempt to run
> 
>   >>  library(any_package)
> 
> would cause  failure similar to those I posted previously.  So, while
> I'm reasonably confident that R 4.3.1 doesn't play nicely with 4.2 -
> level libraries, I most definitely cannot point to any particular
> library.  The deepest level of the traceback report for  ggplot2 was
> 
> 1: dyn.load(file, DLLpath = DLLpath, ...)
> 
> but when trying to load gmp, get the traceback quoted below.
> 
> 
> carl
> 
> 
> 
> 
> On 7/22/23 8:09 PM, r-sig-mac-request at r-project.org wrote:
>> Send R-SIG-Mac mailing list submissions to
>> 	r-sig-mac at r-project.org
>>
>> To subscribe or unsubscribe via the World Wide Web, visit
>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> or, via email, send a message with subject or body 'help' to
>> 	r-sig-mac-request at r-project.org
>>
>> You can reach the person managing the list at
>> 	r-sig-mac-owner at r-project.org
>>
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of R-SIG-Mac digest..."
>>
>>
>> Today's Topics:
>>
>>      1.  R 4.3.1 fails to load (Carl Witthoft)
>>      2. Re:  R 4.3.1 fails to load (David Winsemius)
>>      3. Re:  R 4.3.1 fails to load (David Winsemius)
>>      4. Re:  R 4.3.1 fails to load (Carl Witthoft)
>>      5. Re:  R 4.3.1 fails to load (Duncan Murdoch)
>>
>> ----------------------------------------------------------------------
>>
>> Message: 1
>> Date: Sat, 22 Jul 2023 16:29:59 -0400
>> From: Carl Witthoft <carl at witthoft.com>
>> To: "r-sig-mac at r-project.org" <r-sig-mac at r-project.org>
>> Subject: [R-SIG-Mac] R 4.3.1 fails to load
>> Message-ID: <fddd144b-412b-7907-c3d3-96c83f4cfa02 at witthoft.com>
>> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>>
>> Neither R.app Gui nor R from command line will work.
>> This is 4.3.1 ,  MacOS 13.4  on an x86 (and yes, that's the version I
>> installed).
>>
>>     Heres the error traceback from the command line:
>>
>> *** caught segfault ***
>> address 0x0, cause 'memory not mapped'
>>
>> Traceback:
>>     1: as.bigz(NA)
>>     2: fun(libname, pkgname)
>>     3: doTryCatch(return(expr), name, parentenv, handler)
>>     4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>>     5: tryCatchList(expr, classes, parentenv, handlers)
>>     6: tryCatch(fun(libname, pkgname), error = identity)
>>     7: runHook(".onLoad", env, package.lib, package)
>>     8: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck =
>> vI[[j]])
>>     9: asNamespace(ns)
>> 10: namespaceImportFrom(ns, loadNamespace(j <- i[[1L]], c(lib.loc,
>> .libPaths()), versionCheck = vI[[j]]), i[[2L]], from = package)
>> 11: loadNamespace(package, lib.loc)
>> 12: doTryCatch(return(expr), name, parentenv, handler)
>> 13: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>> 14: tryCatchList(expr, classes, parentenv, handlers)
>> 15: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <-
>> loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
>> deps, exclude, include.only)}, error = function(e) {    P <- if
>> (!is.null(cc <- conditionCall(e)))         paste(" in", deparse(cc)[1L])
>>       else ""    msg <- gettextf("package or namespace load failed for
>> %s%s:\n %s",         sQuote(package), P, conditionMessage(e))    if
>> (logical.return && !quietly)         message(paste("Error:", msg),
>> domain = NA)    else stop(msg, call. = FALSE, domain = NA)})
>> 16: library(cgwtools)
>>
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>>
>>
>


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Thu Jul 20 21:56:44 2023
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Thu, 20 Jul 2023 22:56:44 +0300
Subject: [R-SIG-Mac] Macbuilder appears down again
Message-ID: <CAL6gwnKG+cLTAdoyaUB9yN-S-xm5q641g0bUOKsqpoN29=bBKw@mail.gmail.com>

Hello,

I fear that the builder [1] is down again as my submissions consistently
return a 404 error.

Thank you,

Avi

[1] https://mac.r-project.org/macbuilder/submit.html

	[[alternative HTML version deleted]]


From @@br|n@drou@@y @end|ng |rom gm@||@com  Sat Jul 22 14:20:52 2023
From: @@br|n@drou@@y @end|ng |rom gm@||@com (Sabrina Droussy)
Date: Sat, 22 Jul 2023 14:20:52 +0200
Subject: [R-SIG-Mac] Fwd: Rcmdr
References: <A1CCF140-8F4C-4EE6-969F-41830EA64C22@gmail.com>
Message-ID: <1FDEBFFB-7BA7-4561-8838-B113F7945A05@gmail.com>


> ?
> Hello,
> I have a big problem with R. I hope you can help me please.
> I didn?t use R for some months and wanted to use it again to prepare an exam. I can?t open Rcmdr anymore. I tried several things : install packages, delete and reinstall R. It isn?t working.
> 
> Here is the message I get :
> error reading package index file / Library/ Frameworks / R. Framework/ Versions/ 4.2/ Resources/ library/tcltk2/tklibs/ttktheme_radiance/pkgIndex.tcl: can?t find package tile
> error reading package index file / Library/ Frameworks / R. Framework/ Versions/ 4.2/ Resources/ library/tcltk2/tklibs/ttktheme_clearlooks/pkgIndex.tcl: too many nested evaluations (infinite loop ? )  
> 
> Best regards 
> 
> Envoy? de mon iPhone


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Jul 25 03:57:36 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 25 Jul 2023 13:57:36 +1200
Subject: [R-SIG-Mac] Macbuilder appears down again
In-Reply-To: <CAL6gwnKG+cLTAdoyaUB9yN-S-xm5q641g0bUOKsqpoN29=bBKw@mail.gmail.com>
References: <CAL6gwnKG+cLTAdoyaUB9yN-S-xm5q641g0bUOKsqpoN29=bBKw@mail.gmail.com>
Message-ID: <4D3455EB-52C5-43EA-91C8-BF4001D53E15@R-project.org>

Avi,

thanks. Everything seems to work for me. 404 for the link shown in the response will occur if the job has not yet been picked up, because the system is somewhat optimistic about assuming a job will be picked up faster than you can click on the link. The result page is only generated as the first step of the job (before the actual check). If you can submit at all it means the submission system is running fine. Should you get 404 for a prolonged period of time, let me know. There is a time limit for each package check, so a package should not be able to block the system.

Cheers,
Simon



> On 21/07/2023, at 7:56 AM, Avraham Adler <avraham.adler at gmail.com> wrote:
> 
> Hello,
> 
> I fear that the builder [1] is down again as my submissions consistently
> return a 404 error.
> 
> Thank you,
> 
> Avi
> 
> [1] https://mac.r-project.org/macbuilder/submit.html
> 


From d@n|e|@@@b@ne@_bove @end|ng |rom roche@com  Tue Jul 25 15:50:21 2023
From: d@n|e|@@@b@ne@_bove @end|ng |rom roche@com (Sabanes Bove, Daniel)
Date: Tue, 25 Jul 2023 15:50:21 +0200
Subject: [R-SIG-Mac] M1+ R package test failures (local and Mac Builder)
Message-ID: <CADCbuo1M60fV2AD3oR=j=WHho=FsLXRrt2C_wXc=s2vJumSSAg@mail.gmail.com>

Hi R at Mac developers,

I switched yesterday to a new M2 MacBook, coming from a 3+ year old Intel
MacBook.
The concrete problem is that my R package mmrm (including C++ and in
particular Eigen/TMB code) successfully compiles, but the tests fail, i.e.
the compiled and installed R package does not behave correctly.

First I thought that this is just my local toolchain which is not yet
appropriately configured, but I tried to read more on that and got OpenMP
and gfortran and it should be ok.
So I thought ok, maybe I will try the Mac Builder website and find out in
which commit the R package broke.

Unfortunately, the problem is that the Mac Builder does not help us
sufficiently here, because even the current CRAN release (0.2.2, where
tests based on CRAN binary pass fine locally and on CRAN) leads to test
failures on Mac Builder.

I do see a few differences between the CRAN reported setup and the mac
Builder:
- CRAN is running under macOS Big Sur 11.6.7, while Mac Builder is running
under macOS Ventura 13.3.1 (same as my local machine)
- CRAN uses C++ compiler ?Apple clang version 13.0.0 (clang-1300.0.29.30)?
(and not 14.0.0 as used for the R compilation!) for the package build,
while Mac Builder uses ?Apple clang version 14.0.3 (clang-1403.0.22.14.1)?
(this is the same as on my local machine)

At least Mac Builder and my local machine thus use a similar setup it
seems (even though M1 vs M2 difference exists)

My question is: what are your tips on how to move forward here? How can we
set up the Apple clang version and maybe other build flags locally - as
well as on Mac Builder for the whole community - to really match the CRAN
configuration sufficiently well and thus allow for successful package
builds?

Thanks all,
best regards
Daniel

	[[alternative HTML version deleted]]


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Wed Jul 26 09:03:05 2023
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Wed, 26 Jul 2023 08:03:05 +0100
Subject: [R-SIG-Mac] M1+ R package test failures (local and Mac Builder)
In-Reply-To: <CADCbuo1M60fV2AD3oR=j=WHho=FsLXRrt2C_wXc=s2vJumSSAg@mail.gmail.com>
References: <CADCbuo1M60fV2AD3oR=j=WHho=FsLXRrt2C_wXc=s2vJumSSAg@mail.gmail.com>
Message-ID: <261e87d9-9345-613b-5369-3caf01303f93@stats.ox.ac.uk>

Apple Clang 14.0.3 and its associated SDK change to MacOSX13.3.sdk broke 
about 25 CRAN packages (3 with segfaults) and 17 remain broken (and also 
with Xcode/CLT 15 beta 4 which uses a newer build of 14.0.3).  But in my 
checks mmrm 0.2.2 is not one of them.

Packages should aim to be platform-independent. So rather than expect 
all check systems to run the same toolchain, make sure your package 
works on all that are available.  I believe mac-builder uses different 
ones for 'release' and for 'development' but you write as if it uses 
just one -- and I know that there have been changes since R 4.3.0 was 
released.

It is possible to download different CLTs from 
https://developer.apple.com/download/all/ and switch between them (for 
the compiler you will need to install them in turn but you can switch 
between installed SDKs).  I have 14.2, 14.3.1 and 15 beta 4 downloaded 
and switch between them.

Given the several recent security alerts, if you are running macOS 
13.3.1 I would suggest you update to 13.5.

On 25/07/2023 14:50, Sabanes Bove, Daniel via R-SIG-Mac wrote:
> Hi R at Mac developers,
> 
> I switched yesterday to a new M2 MacBook, coming from a 3+ year old Intel
> MacBook.
> The concrete problem is that my R package mmrm (including C++ and in
> particular Eigen/TMB code) successfully compiles, but the tests fail, i.e.
> the compiled and installed R package does not behave correctly.

You give us no idea of the problems.  Please do re-read the posting guide.

> First I thought that this is just my local toolchain which is not yet
> appropriately configured, but I tried to read more on that and got OpenMP
> and gfortran and it should be ok.
> So I thought ok, maybe I will try the Mac Builder website and find out in
> which commit the R package broke.
> 
> Unfortunately, the problem is that the Mac Builder does not help us
> sufficiently here, because even the current CRAN release (0.2.2, where
> tests based on CRAN binary pass fine locally and on CRAN) leads to test
> failures on Mac Builder.
> 
> I do see a few differences between the CRAN reported setup and the mac
> Builder:
> - CRAN is running under macOS Big Sur 11.6.7, while Mac Builder is running
> under macOS Ventura 13.3.1 (same as my local machine)
> - CRAN uses C++ compiler ?Apple clang version 13.0.0 (clang-1300.0.29.30)?
> (and not 14.0.0 as used for the R compilation!) for the package build,
> while Mac Builder uses ?Apple clang version 14.0.3 (clang-1403.0.22.14.1)?
> (this is the same as on my local machine)
> 
> At least Mac Builder and my local machine thus use a similar setup it
> seems (even though M1 vs M2 difference exists)
> 
> My question is: what are your tips on how to move forward here? How can we
> set up the Apple clang version and maybe other build flags locally - as
> well as on Mac Builder for the whole community - to really match the CRAN
> configuration sufficiently well and thus allow for successful package
> builds?
> 
> Thanks all,
> best regards
> Daniel
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Jul 26 23:55:57 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 27 Jul 2023 09:55:57 +1200
Subject: [R-SIG-Mac] M1+ R package test failures (local and Mac Builder)
In-Reply-To: <CADCbuo1M60fV2AD3oR=j=WHho=FsLXRrt2C_wXc=s2vJumSSAg@mail.gmail.com>
References: <CADCbuo1M60fV2AD3oR=j=WHho=FsLXRrt2C_wXc=s2vJumSSAg@mail.gmail.com>
Message-ID: <B02D0604-4486-4F31-9149-6D30BB1C0B2E@R-project.org>

Daniel,

I'm not sure I understand your question. The package mmrm 0.2.2 fails its tests for me as well. If you can reproduce the problem locally (as you indicated), then that's good as you should be in the position to fix it.

Cheers,
Simon


> On 26/07/2023, at 1:50 AM, Sabanes Bove, Daniel via R-SIG-Mac <r-sig-mac at r-project.org> wrote:
> 
> Hi R at Mac developers,
> 
> I switched yesterday to a new M2 MacBook, coming from a 3+ year old Intel
> MacBook.
> The concrete problem is that my R package mmrm (including C++ and in
> particular Eigen/TMB code) successfully compiles, but the tests fail, i.e.
> the compiled and installed R package does not behave correctly.
> 
> First I thought that this is just my local toolchain which is not yet
> appropriately configured, but I tried to read more on that and got OpenMP
> and gfortran and it should be ok.
> So I thought ok, maybe I will try the Mac Builder website and find out in
> which commit the R package broke.
> 
> Unfortunately, the problem is that the Mac Builder does not help us
> sufficiently here, because even the current CRAN release (0.2.2, where
> tests based on CRAN binary pass fine locally and on CRAN) leads to test
> failures on Mac Builder.
> 
> I do see a few differences between the CRAN reported setup and the mac
> Builder:
> - CRAN is running under macOS Big Sur 11.6.7, while Mac Builder is running
> under macOS Ventura 13.3.1 (same as my local machine)
> - CRAN uses C++ compiler ?Apple clang version 13.0.0 (clang-1300.0.29.30)?
> (and not 14.0.0 as used for the R compilation!) for the package build,
> while Mac Builder uses ?Apple clang version 14.0.3 (clang-1403.0.22.14.1)?
> (this is the same as on my local machine)
> 
> At least Mac Builder and my local machine thus use a similar setup it
> seems (even though M1 vs M2 difference exists)
> 
> My question is: what are your tips on how to move forward here? How can we
> set up the Apple clang version and maybe other build flags locally - as
> well as on Mac Builder for the whole community - to really match the CRAN
> configuration sufficiently well and thus allow for successful package
> builds?
> 
> Thanks all,
> best regards
> Daniel
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From pd@|gd @end|ng |rom gm@||@com  Mon Jul 31 15:18:25 2023
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 31 Jul 2023 15:18:25 +0200
Subject: [R-SIG-Mac] Rcmdr
In-Reply-To: <1FDEBFFB-7BA7-4561-8838-B113F7945A05@gmail.com>
References: <A1CCF140-8F4C-4EE6-969F-41830EA64C22@gmail.com>
 <1FDEBFFB-7BA7-4561-8838-B113F7945A05@gmail.com>
Message-ID: <E99F6CE8-1800-4CB9-95D4-19FEB393DF7A@gmail.com>

Hum.. Not happening here with 4.3.1 from CRAN. Why are you getting errors relating to 4.2? Also puzzling is library/tcltk2, which I don't seem to have (only tcltk). 

A hunch is that the tcltk2 package could be involved, but even installing that, I don't see a directory of that name under R.framework.

- pd

> On 22 Jul 2023, at 14:20 , Sabrina Droussy <sabrinadroussy at gmail.com> wrote:
> 
> 
>> ?
>> Hello,
>> I have a big problem with R. I hope you can help me please.
>> I didn?t use R for some months and wanted to use it again to prepare an exam. I can?t open Rcmdr anymore. I tried several things : install packages, delete and reinstall R. It isn?t working.
>> 
>> Here is the message I get :
>> error reading package index file / Library/ Frameworks / R. Framework/ Versions/ 4.2/ Resources/ library/tcltk2/tklibs/ttktheme_radiance/pkgIndex.tcl: can?t find package tile
>> error reading package index file / Library/ Frameworks / R. Framework/ Versions/ 4.2/ Resources/ library/tcltk2/tklibs/ttktheme_clearlooks/pkgIndex.tcl: too many nested evaluations (infinite loop ? )  
>> 
>> Best regards 
>> 
>> Envoy? de mon iPhone
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


