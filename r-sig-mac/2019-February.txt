From bret@chr @end|ng |rom x@4@||@n|  Tue Feb 19 19:39:17 2019
From: bret@chr @end|ng |rom x@4@||@n| (bretschr)
Date: Tue, 19 Feb 2019 19:39:17 +0100
Subject: [R-SIG-Mac] character set problem
Message-ID: <7358F75D-3176-49DD-9429-D3A42A3C4036@xs4all.nl>

Dear R-users,


Last week I installed R 3.5.2 on a new MacBook Air.

I got error messages for the wrong locale (character set).
And simple math proved not to work:
Upon typing this, I got:
> 2?2
Error: unexpected input in "2?"
> 

The character visible as a caret is apparently coded as something very different.

Then I changed things according to the FAQ, chapter 7, (switching all settings to English),
and executed the recommended line:

defaults write org.R-project.R force.LANG en_US.UTF-8

The error messages disappeared, but the problem remained.

A fresh install of R 3.5.2 also didn't help: 

Here its startup messages, then a line testing the caret:

> R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
> Copyright (C) 2018 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
> Natural language support but running in an English locale
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
> [R.app GUI 1.70 (7612) x86_64-apple-darwin15.6.0]
> 
> [History restored from /Users/fb/.Rapp.history]
> 
>> 2?2
> Error: unexpected input in "2?"
>> 



Does anyone know how to get R (R.app) to interpret a caret as a caret?

Thanks in advance,



Franklin Bretschneider
Utrecht University
Utrecht, The Netherlands


From kev|nu@hey @end|ng |rom gm@||@com  Tue Feb 19 20:16:44 2019
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Tue, 19 Feb 2019 11:16:44 -0800
Subject: [R-SIG-Mac] character set problem
In-Reply-To: <7358F75D-3176-49DD-9429-D3A42A3C4036@xs4all.nl>
References: <7358F75D-3176-49DD-9429-D3A42A3C4036@xs4all.nl>
Message-ID: <CAJXgQP3QmtjGoEwrEphw-hMi_V6zcm=RdoAXyFTUfyFA4Nkt7g@mail.gmail.com>

If I understand correctly, the problem is that the character your keyboard
is inserting is not a regular caret (^, \u0053); rather, it's a 'modifier
character circumflex accent' (?, \u02c6).

How are you inserting the carat on your laptop? For what it's worth, I get
a 'regular' caret with Shift + 6, and that particular accent character with
Alt + I.

On Tue, Feb 19, 2019 at 10:40 AM bretschr <bretschr at xs4all.nl> wrote:

> Dear R-users,
>
>
> Last week I installed R 3.5.2 on a new MacBook Air.
>
> I got error messages for the wrong locale (character set).
> And simple math proved not to work:
> Upon typing this, I got:
> > 2?2
> Error: unexpected input in "2?"
> >
>
> The character visible as a caret is apparently coded as something very
> different.
>
> Then I changed things according to the FAQ, chapter 7, (switching all
> settings to English),
> and executed the recommended line:
>
> defaults write org.R-project.R force.LANG en_US.UTF-8
>
> The error messages disappeared, but the problem remained.
>
> A fresh install of R 3.5.2 also didn't help:
>
> Here its startup messages, then a line testing the caret:
>
> > R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
> > Copyright (C) 2018 The R Foundation for Statistical Computing
> > Platform: x86_64-apple-darwin15.6.0 (64-bit)
> >
> > R is free software and comes with ABSOLUTELY NO WARRANTY.
> > You are welcome to redistribute it under certain conditions.
> > Type 'license()' or 'licence()' for distribution details.
> >
> > Natural language support but running in an English locale
> >
> > R is a collaborative project with many contributors.
> > Type 'contributors()' for more information and
> > 'citation()' on how to cite R or R packages in publications.
> >
> > Type 'demo()' for some demos, 'help()' for on-line help, or
> > 'help.start()' for an HTML browser interface to help.
> > Type 'q()' to quit R.
> >
> > [R.app GUI 1.70 (7612) x86_64-apple-darwin15.6.0]
> >
> > [History restored from /Users/fb/.Rapp.history]
> >
> >> 2?2
> > Error: unexpected input in "2?"
> >>
>
>
>
> Does anyone know how to get R (R.app) to interpret a caret as a caret?
>
> Thanks in advance,
>
>
>
> Franklin Bretschneider
> Utrecht University
> Utrecht, The Netherlands
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>

	[[alternative HTML version deleted]]


From bret@chr @end|ng |rom x@4@||@n|  Tue Feb 19 20:58:39 2019
From: bret@chr @end|ng |rom x@4@||@n| (bretschr)
Date: Tue, 19 Feb 2019 20:58:39 +0100
Subject: [R-SIG-Mac] character set problem
In-Reply-To: <CAJXgQP3QmtjGoEwrEphw-hMi_V6zcm=RdoAXyFTUfyFA4Nkt7g@mail.gmail.com>
References: <7358F75D-3176-49DD-9429-D3A42A3C4036@xs4all.nl>
 <CAJXgQP3QmtjGoEwrEphw-hMi_V6zcm=RdoAXyFTUfyFA4Nkt7g@mail.gmail.com>
Message-ID: <E9D6F747-B3FA-48F6-B0F2-67F75FFCD60D@xs4all.nl>

Dear Kevin Ushey,

Re:

> On 19 Feb 2019, at 20:16, Kevin Ushey <kevinushey at gmail.com> wrote:
> 
> If I understand correctly, the problem is that the character your keyboard is inserting is not a regular caret (^, \u0053); rather, it's a 'modifier character circumflex accent' (?, \u02c6).
> 
> How are you inserting the carat on your laptop? For what it's worth, I get a 'regular' caret with Shift + 6, and that particular accent character with Alt + I.


Thanks.  Indeed I just type the normal shift-6, and get this strange circumflex character. With alt-i I get this same character.

I can produce a normal caret by typing 

rawToChar(as.raw(94))

in the console, but that's of course rather clumsy.

How to "tame" the editor to produce the normal ASCII caret?
The other symbols in that row, like % and &, are the normal ASCII characters.
Strange why this single character on my keyboard is a two-byte character.

Any clue appreciated.


Franklin




Franklin Bretschneider
Utrecht University
Utrecht, The Netherlands


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Tue Feb 19 23:39:33 2019
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Tue, 19 Feb 2019 16:39:33 -0600
Subject: [R-SIG-Mac] How can I find the "sh" application used by "R CMD
 check" on a Mac?
Message-ID: <7155e447-cb1c-3440-c14c-a8a8aab3ef9c@prodsyse.com>




 ????? How can I find the "sh" application used by "R CMD check" on a Mac?


 ????? I need to know to be able to add it to the "Application Access" 
list maintained by the "Anti-Ransomware" feature of my Bitdefender 
Antivirus for Mac.? With that feature on, "R CMD check Ecfun" stopped 
with the following:


 ????? ????? checking whether package ?Ecfun? can be installed ...sh: 
... Permission denied


 ????? When I saw that, I also got a popup from Bitdefender that would 
only allow me to allow this once but not permanently.? To allow it 
permanently, I need to know where it is on my hard drive.


 ????? Thanks,
 ????? Spencer Graves


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb 20 01:44:00 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 19 Feb 2019 19:44:00 -0500
Subject: [R-SIG-Mac] How can I find the "sh" application used by "R CMD
 check" on a Mac?
In-Reply-To: <7155e447-cb1c-3440-c14c-a8a8aab3ef9c@prodsyse.com>
References: <7155e447-cb1c-3440-c14c-a8a8aab3ef9c@prodsyse.com>
Message-ID: <06c36575-d2fd-630a-208f-325f2473623d@gmail.com>

On 19/02/2019 5:39 p.m., Spencer Graves wrote:
> 
> 
> 
>   ????? How can I find the "sh" application used by "R CMD check" on a Mac?
> 
> 
>   ????? I need to know to be able to add it to the "Application Access"
> list maintained by the "Anti-Ransomware" feature of my Bitdefender
> Antivirus for Mac.? With that feature on, "R CMD check Ecfun" stopped
> with the following:
> 
> 
>   ????? ????? checking whether package ?Ecfun? can be installed ...sh:
> ... Permission denied
> 
> 
>   ????? When I saw that, I also got a popup from Bitdefender that would
> only allow me to allow this once but not permanently.? To allow it
> permanently, I need to know where it is on my hard drive.

 From a console, run "which sh".  I get "/bin/sh".

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom prod@y@e@com  Wed Feb 20 02:45:55 2019
From: @pencer@gr@ve@ @end|ng |rom prod@y@e@com (Spencer Graves)
Date: Tue, 19 Feb 2019 19:45:55 -0600
Subject: [R-SIG-Mac] How can I find the "sh" application used by "R CMD
 check" on a Mac?
In-Reply-To: <06c36575-d2fd-630a-208f-325f2473623d@gmail.com>
References: <7155e447-cb1c-3440-c14c-a8a8aab3ef9c@prodsyse.com>
 <06c36575-d2fd-630a-208f-325f2473623d@gmail.com>
Message-ID: <b2a730ba-12e0-f58c-40ae-4ddebf3b262b@prodsyse.com>



On 2019-02-19 18:44, Duncan Murdoch wrote:
> On 19/02/2019 5:39 p.m., Spencer Graves wrote:
>>
>>
>>
>> ? ????? How can I find the "sh" application used by "R CMD check" on 
>> a Mac?
>>
>>
>> ? ????? I need to know to be able to add it to the "Application Access"
>> list maintained by the "Anti-Ransomware" feature of my Bitdefender
>> Antivirus for Mac.? With that feature on, "R CMD check Ecfun" stopped
>> with the following:
>>
>>
>> ? ????? ????? checking whether package ?Ecfun? can be installed ...sh:
>> ... Permission denied
>>
>>
>> ? ????? When I saw that, I also got a popup from Bitdefender that would
>> only allow me to allow this once but not permanently.? To allow it
>> permanently, I need to know where it is on my hard drive.
>
> From a console, run "which sh".? I get "/bin/sh".


 ????? Thanks.? That answered my question to R-SIG-Mac.


 ????? That did not solve my problem with Bitdefender, but it got me to 
second tier tech support there.


 ????? Thanks again,
 ????? Spencer Graves

>
> Duncan Murdoch
>


From bret@chr @end|ng |rom x@4@||@n|  Wed Feb 20 09:29:48 2019
From: bret@chr @end|ng |rom x@4@||@n| (bretschr)
Date: Wed, 20 Feb 2019 09:29:48 +0100
Subject: [R-SIG-Mac] [R]  character set problem
In-Reply-To: <0fec0584-d68e-5262-e462-9524d07d0c65@kit.edu>
References: <7358F75D-3176-49DD-9429-D3A42A3C4036@xs4all.nl>
 <CAJXgQP3QmtjGoEwrEphw-hMi_V6zcm=RdoAXyFTUfyFA4Nkt7g@mail.gmail.com>
 <E9D6F747-B3FA-48F6-B0F2-67F75FFCD60D@xs4all.nl>
 <7a4d37e3-5161-01f0-e6df-6bc814a6100b@kit.edu>
 <0fec0584-d68e-5262-e462-9524d07d0c65@kit.edu>
Message-ID: <B4D69D43-2162-4499-A0DB-B69A10E3BC1C@xs4all.nl>

Dear Peter Anthoni,


Re:

> On 20 Feb 2019, at 07:22, Peter Anthoni <peter.anthoni at kit.edu> wrote:
> 
> is your keyboard type US. International -PC, that will insert the weird caret.
> 
> <bfmoeahenojamlch.png>
> 
> cheers
> 
> Peter



That 's it!!!  What I thought to be the most universal keyboard proved to be the culprit.
Changed to simple "US" (SystemPreferences, Language and region, Keyboard preferences) and all is OK.
Thanks a lot.
With best regards,

Franklin
- - - - - 


Franklin Bretschneider
Utrecht University
Utrecht, The Netherlands

From bgunter@4567 @end|ng |rom gm@||@com  Tue Feb 19 20:36:09 2019
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 19 Feb 2019 11:36:09 -0800
Subject: [R-SIG-Mac] [R] character set problem
In-Reply-To: <7358F75D-3176-49DD-9429-D3A42A3C4036@xs4all.nl>
References: <7358F75D-3176-49DD-9429-D3A42A3C4036@xs4all.nl>
Message-ID: <CAGxFJbSKnyUDGJ2mNf3NBnfBn+zcAw3jexMYJyKaXwVMfuT2ag@mail.gmail.com>

You might try posting this on r-sig-mac if you don't get resolution here.

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Feb 19, 2019 at 10:55 AM bretschr <bretschr at xs4all.nl> wrote:

> Dear R-users,
>
>
> Last week I installed R 3.5.2 on a new MacBook Air.
>
> I got error messages for the wrong locale (character set).
> And simple math proved not to work:
> Upon typing this, I got:
> > 2?2
> Error: unexpected input in "2?"
> >
>
> The character visible as a caret is apparently coded as something very
> different.
>
> Then I changed things according to the FAQ, chapter 7, (switching all
> settings to English),
> and executed the recommended line:
>
> defaults write org.R-project.R force.LANG en_US.UTF-8
>
> The error messages disappeared, but the problem remained.
>
> A fresh install of R 3.5.2 also didn't help:
>
> Here its startup messages, then a line testing the caret:
>
> > R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
> > Copyright (C) 2018 The R Foundation for Statistical Computing
> > Platform: x86_64-apple-darwin15.6.0 (64-bit)
> >
> > R is free software and comes with ABSOLUTELY NO WARRANTY.
> > You are welcome to redistribute it under certain conditions.
> > Type 'license()' or 'licence()' for distribution details.
> >
> > Natural language support but running in an English locale
> >
> > R is a collaborative project with many contributors.
> > Type 'contributors()' for more information and
> > 'citation()' on how to cite R or R packages in publications.
> >
> > Type 'demo()' for some demos, 'help()' for on-line help, or
> > 'help.start()' for an HTML browser interface to help.
> > Type 'q()' to quit R.
> >
> > [R.app GUI 1.70 (7612) x86_64-apple-darwin15.6.0]
> >
> > [History restored from /Users/fb/.Rapp.history]
> >
> >> 2?2
> > Error: unexpected input in "2?"
> >>
>
>
>
> Does anyone know how to get R (R.app) to interpret a caret as a caret?
>
> Thanks in advance,
>
>
>
> Franklin Bretschneider
> Utrecht University
> Utrecht, The Netherlands
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Feb 19 20:37:38 2019
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 19 Feb 2019 11:37:38 -0800
Subject: [R-SIG-Mac] [R] character set problem
In-Reply-To: <CAGxFJbSKnyUDGJ2mNf3NBnfBn+zcAw3jexMYJyKaXwVMfuT2ag@mail.gmail.com>
References: <7358F75D-3176-49DD-9429-D3A42A3C4036@xs4all.nl>
 <CAGxFJbSKnyUDGJ2mNf3NBnfBn+zcAw3jexMYJyKaXwVMfuT2ag@mail.gmail.com>
Message-ID: <CAGxFJbS1OojpW67ym=enZQcj9M2cC0ccQjzRzqnv2020_OioFw@mail.gmail.com>

Oops, you already seem to have done this! My bad.

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Feb 19, 2019 at 11:36 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> You might try posting this on r-sig-mac if you don't get resolution here.
>
> -- Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Feb 19, 2019 at 10:55 AM bretschr <bretschr at xs4all.nl> wrote:
>
>> Dear R-users,
>>
>>
>> Last week I installed R 3.5.2 on a new MacBook Air.
>>
>> I got error messages for the wrong locale (character set).
>> And simple math proved not to work:
>> Upon typing this, I got:
>> > 2?2
>> Error: unexpected input in "2?"
>> >
>>
>> The character visible as a caret is apparently coded as something very
>> different.
>>
>> Then I changed things according to the FAQ, chapter 7, (switching all
>> settings to English),
>> and executed the recommended line:
>>
>> defaults write org.R-project.R force.LANG en_US.UTF-8
>>
>> The error messages disappeared, but the problem remained.
>>
>> A fresh install of R 3.5.2 also didn't help:
>>
>> Here its startup messages, then a line testing the caret:
>>
>> > R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
>> > Copyright (C) 2018 The R Foundation for Statistical Computing
>> > Platform: x86_64-apple-darwin15.6.0 (64-bit)
>> >
>> > R is free software and comes with ABSOLUTELY NO WARRANTY.
>> > You are welcome to redistribute it under certain conditions.
>> > Type 'license()' or 'licence()' for distribution details.
>> >
>> > Natural language support but running in an English locale
>> >
>> > R is a collaborative project with many contributors.
>> > Type 'contributors()' for more information and
>> > 'citation()' on how to cite R or R packages in publications.
>> >
>> > Type 'demo()' for some demos, 'help()' for on-line help, or
>> > 'help.start()' for an HTML browser interface to help.
>> > Type 'q()' to quit R.
>> >
>> > [R.app GUI 1.70 (7612) x86_64-apple-darwin15.6.0]
>> >
>> > [History restored from /Users/fb/.Rapp.history]
>> >
>> >> 2?2
>> > Error: unexpected input in "2?"
>> >>
>>
>>
>>
>> Does anyone know how to get R (R.app) to interpret a caret as a caret?
>>
>> Thanks in advance,
>>
>>
>>
>> Franklin Bretschneider
>> Utrecht University
>> Utrecht, The Netherlands
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From h@nk|n@rob|n @end|ng |rom gm@||@com  Sun Feb 24 22:45:31 2019
From: h@nk|n@rob|n @end|ng |rom gm@||@com (robin hankin)
Date: Mon, 25 Feb 2019 10:45:31 +1300
Subject: [R-SIG-Mac] libcurl
Message-ID: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>

Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.

./configure
[snip]

checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
checking libcurl version ... 7.63.0
checking curl/curl.h usability... yes
checking curl/curl.h presence... yes
checking for curl/curl.h... yes
checking if libcurl is version 7 and >= 7.22.0... no
configure: error: libcurl >= 7.22.0 library and headers are required
with support for https

if we have libcurl 7.63, as it says in the output, why the error?  How
to proceed?

hankin.robin at gmail.com


From pd@|gd @end|ng |rom gm@||@com  Sun Feb 24 23:41:37 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Sun, 24 Feb 2019 23:41:37 +0100
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
Message-ID: <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>

It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.

The detective work needed could take off from config.log, region around this:

configure:39937: checking if libcurl is version 7 and >= 7.22.0
configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
configure:39966: $? = 0
configure:39966: ./conftest
configure:39966: $? = 0
configure:39976: result: yes

That's for a succesful build, a failed one will usually give more info including the failing program code.

-pd

> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
> 
> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
> 
> ./configure
> [snip]
> 
> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
> checking libcurl version ... 7.63.0
> checking curl/curl.h usability... yes
> checking curl/curl.h presence... yes
> checking for curl/curl.h... yes
> checking if libcurl is version 7 and >= 7.22.0... no
> configure: error: libcurl >= 7.22.0 library and headers are required
> with support for https
> 
> if we have libcurl 7.63, as it says in the output, why the error?  How
> to proceed?
> 
> hankin.robin at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From h@nk|n@rob|n @end|ng |rom gm@||@com  Mon Feb 25 01:28:39 2019
From: h@nk|n@rob|n @end|ng |rom gm@||@com (robin hankin)
Date: Mon, 25 Feb 2019 13:28:39 +1300
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
Message-ID: <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>

thanks for this Peter, my config.log file looks like this:

configure:42615: result: yes
configure:42629: checking if libcurl is version 7 and >= 7.22.0
configure:42658: gcc -o conftest  -g -O2
-I/Users/rhankin/anaconda3/include -I/usr/local/include
-I/usr/local/include  -L/usr/local/lib conftest.c
-L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
-lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
/local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
configure:42658: $? = 0
configure:42658: ./conftest
dyld: Library not loaded: @rpath/libcurl.4.dylib
  Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
  Reason: image not found
./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
configure:42658: $? = 134
configure: program exited with status 134
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "R"
| #define PACKAGE_TARNAME "R"



Best wishes


Robin


hankin.robin at gmail.com



hankin.robin at gmail.com




On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
>
> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
>
> The detective work needed could take off from config.log, region around this:
>
> configure:39937: checking if libcurl is version 7 and >= 7.22.0
> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
> configure:39966: $? = 0
> configure:39966: ./conftest
> configure:39966: $? = 0
> configure:39976: result: yes
>
> That's for a succesful build, a failed one will usually give more info including the failing program code.
>
> -pd
>
> > On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
> >
> > Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
> >
> > ./configure
> > [snip]
> >
> > checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
> > checking libcurl version ... 7.63.0
> > checking curl/curl.h usability... yes
> > checking curl/curl.h presence... yes
> > checking for curl/curl.h... yes
> > checking if libcurl is version 7 and >= 7.22.0... no
> > configure: error: libcurl >= 7.22.0 library and headers are required
> > with support for https
> >
> > if we have libcurl 7.63, as it says in the output, why the error?  How
> > to proceed?
> >
> > hankin.robin at gmail.com
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>
>


From pd@|gd @end|ng |rom gm@||@com  Mon Feb 25 10:28:46 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 25 Feb 2019 10:28:46 +0100
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
Message-ID: <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>

Hmm, how did "@rpath" get in there? I don't see it anywhere in my build and source dirs. Looks like something that should have been substituted (by perl?) with the appropriate path.

Is your library (...anaconda3/lib) correctly installed? I have, for the system libcurl:

pd$ ls -l /usr/lib/*curl*
lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.3.dylib -> libcurl.4.dylib
-rwxr-xr-x  1 root  wheel  854208 Nov 30 08:37 /usr/lib/libcurl.4.dylib
lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.dylib -> libcurl.4.dylib

-pd


> On 25 Feb 2019, at 01:28 , robin hankin <hankin.robin at gmail.com> wrote:
> 
> thanks for this Peter, my config.log file looks like this:
> 
> configure:42615: result: yes
> configure:42629: checking if libcurl is version 7 and >= 7.22.0
> configure:42658: gcc -o conftest  -g -O2
> -I/Users/rhankin/anaconda3/include -I/usr/local/include
> -I/usr/local/include  -L/usr/local/lib conftest.c
> -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
> -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
> /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
> configure:42658: $? = 0
> configure:42658: ./conftest
> dyld: Library not loaded: @rpath/libcurl.4.dylib
>  Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
>  Reason: image not found
> ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
> configure:42658: $? = 134
> configure: program exited with status 134
> configure: failed program was:
> | /* confdefs.h */
> | #define PACKAGE_NAME "R"
> | #define PACKAGE_TARNAME "R"
> 
> 
> 
> Best wishes
> 
> 
> Robin
> 
> 
> hankin.robin at gmail.com
> 
> 
> 
> hankin.robin at gmail.com
> 
> 
> 
> 
> On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
>> 
>> The detective work needed could take off from config.log, region around this:
>> 
>> configure:39937: checking if libcurl is version 7 and >= 7.22.0
>> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
>> configure:39966: $? = 0
>> configure:39966: ./conftest
>> configure:39966: $? = 0
>> configure:39976: result: yes
>> 
>> That's for a succesful build, a failed one will usually give more info including the failing program code.
>> 
>> -pd
>> 
>>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
>>> 
>>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
>>> 
>>> ./configure
>>> [snip]
>>> 
>>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
>>> checking libcurl version ... 7.63.0
>>> checking curl/curl.h usability... yes
>>> checking curl/curl.h presence... yes
>>> checking for curl/curl.h... yes
>>> checking if libcurl is version 7 and >= 7.22.0... no
>>> configure: error: libcurl >= 7.22.0 library and headers are required
>>> with support for https
>>> 
>>> if we have libcurl 7.63, as it says in the output, why the error?  How
>>> to proceed?
>>> 
>>> hankin.robin at gmail.com
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From h@nk|n@rob|n @end|ng |rom gm@||@com  Mon Feb 25 19:24:55 2019
From: h@nk|n@rob|n @end|ng |rom gm@||@com (robin hankin)
Date: Tue, 26 Feb 2019 07:24:55 +1300
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
 <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>
Message-ID: <CAHHjBM538G4oo0OhkpUFWycQgAm9eVzEp0S=3Uy4FhBSB3ay6w@mail.gmail.com>

thanks Peter, my results are:


rstudio % ls -l /usr/lib/*curl*
lrwxr-xr-x  1 root  wheel      15  4 Dec  2017
/usr/lib/libcurl.3.dylib -> libcurl.4.dylib
-rwxr-xr-x  1 root  wheel  854416  4 Jul  2018 /usr/lib/libcurl.4.dylib
lrwxr-xr-x  1 root  wheel      15  4 Dec  2017 /usr/lib/libcurl.dylib
-> libcurl.4.dylib
rstudio %

not quite the same version of libcurl4.dylib but otherwise the same



hankin.robin at gmail.com



hankin.robin at gmail.com




On Mon, Feb 25, 2019 at 10:28 PM peter dalgaard <pdalgd at gmail.com> wrote:
>
> Hmm, how did "@rpath" get in there? I don't see it anywhere in my build and source dirs. Looks like something that should have been substituted (by perl?) with the appropriate path.
>
> Is your library (...anaconda3/lib) correctly installed? I have, for the system libcurl:
>
> pd$ ls -l /usr/lib/*curl*
> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.3.dylib -> libcurl.4.dylib
> -rwxr-xr-x  1 root  wheel  854208 Nov 30 08:37 /usr/lib/libcurl.4.dylib
> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.dylib -> libcurl.4.dylib
>
> -pd
>
>
> > On 25 Feb 2019, at 01:28 , robin hankin <hankin.robin at gmail.com> wrote:
> >
> > thanks for this Peter, my config.log file looks like this:
> >
> > configure:42615: result: yes
> > configure:42629: checking if libcurl is version 7 and >= 7.22.0
> > configure:42658: gcc -o conftest  -g -O2
> > -I/Users/rhankin/anaconda3/include -I/usr/local/include
> > -I/usr/local/include  -L/usr/local/lib conftest.c
> > -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
> > -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
> > /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
> > configure:42658: $? = 0
> > configure:42658: ./conftest
> > dyld: Library not loaded: @rpath/libcurl.4.dylib
> >  Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
> >  Reason: image not found
> > ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
> > configure:42658: $? = 134
> > configure: program exited with status 134
> > configure: failed program was:
> > | /* confdefs.h */
> > | #define PACKAGE_NAME "R"
> > | #define PACKAGE_TARNAME "R"
> >
> >
> >
> > Best wishes
> >
> >
> > Robin
> >
> >
> > hankin.robin at gmail.com
> >
> >
> >
> > hankin.robin at gmail.com
> >
> >
> >
> >
> > On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
> >>
> >> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
> >>
> >> The detective work needed could take off from config.log, region around this:
> >>
> >> configure:39937: checking if libcurl is version 7 and >= 7.22.0
> >> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
> >> configure:39966: $? = 0
> >> configure:39966: ./conftest
> >> configure:39966: $? = 0
> >> configure:39976: result: yes
> >>
> >> That's for a succesful build, a failed one will usually give more info including the failing program code.
> >>
> >> -pd
> >>
> >>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
> >>>
> >>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
> >>>
> >>> ./configure
> >>> [snip]
> >>>
> >>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
> >>> checking libcurl version ... 7.63.0
> >>> checking curl/curl.h usability... yes
> >>> checking curl/curl.h presence... yes
> >>> checking for curl/curl.h... yes
> >>> checking if libcurl is version 7 and >= 7.22.0... no
> >>> configure: error: libcurl >= 7.22.0 library and headers are required
> >>> with support for https
> >>>
> >>> if we have libcurl 7.63, as it says in the output, why the error?  How
> >>> to proceed?
> >>>
> >>> hankin.robin at gmail.com
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >> --
> >> Peter Dalgaard, Professor,
> >> Center for Statistics, Copenhagen Business School
> >> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >> Phone: (+45)38153501
> >> Office: A 4.23
> >> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>
>


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Feb 25 19:47:37 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 25 Feb 2019 13:47:37 -0500
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
Message-ID: <8808A8B5-A66F-4FFF-BCD6-808033F1A515@R-project.org>

You're apparently using anaconda - it means you have to activate it first because it doesn't include paths in its binaries so ti won't work without explicit path override. Also note that anaconda is by design incompatible with the system libraries, so you'll have to make sure everything you use comes from anacoda or else it won't work. I'd very strongly suggest not using anaconda when compiling - it pretty much only works if you use their binaries but nothing else will.

Cheers,
Simon


> On Feb 24, 2019, at 7:28 PM, robin hankin <hankin.robin at gmail.com> wrote:
> 
> thanks for this Peter, my config.log file looks like this:
> 
> configure:42615: result: yes
> configure:42629: checking if libcurl is version 7 and >= 7.22.0
> configure:42658: gcc -o conftest  -g -O2
> -I/Users/rhankin/anaconda3/include -I/usr/local/include
> -I/usr/local/include  -L/usr/local/lib conftest.c
> -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
> -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
> /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
> configure:42658: $? = 0
> configure:42658: ./conftest
> dyld: Library not loaded: @rpath/libcurl.4.dylib
>  Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
>  Reason: image not found
> ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
> configure:42658: $? = 134
> configure: program exited with status 134
> configure: failed program was:
> | /* confdefs.h */
> | #define PACKAGE_NAME "R"
> | #define PACKAGE_TARNAME "R"
> 
> 
> 
> Best wishes
> 
> 
> Robin
> 
> 
> hankin.robin at gmail.com
> 
> 
> 
> hankin.robin at gmail.com
> 
> 
> 
> 
> On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
>> 
>> The detective work needed could take off from config.log, region around this:
>> 
>> configure:39937: checking if libcurl is version 7 and >= 7.22.0
>> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
>> configure:39966: $? = 0
>> configure:39966: ./conftest
>> configure:39966: $? = 0
>> configure:39976: result: yes
>> 
>> That's for a succesful build, a failed one will usually give more info including the failing program code.
>> 
>> -pd
>> 
>>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
>>> 
>>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
>>> 
>>> ./configure
>>> [snip]
>>> 
>>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
>>> checking libcurl version ... 7.63.0
>>> checking curl/curl.h usability... yes
>>> checking curl/curl.h presence... yes
>>> checking for curl/curl.h... yes
>>> checking if libcurl is version 7 and >= 7.22.0... no
>>> configure: error: libcurl >= 7.22.0 library and headers are required
>>> with support for https
>>> 
>>> if we have libcurl 7.63, as it says in the output, why the error?  How
>>> to proceed?
>>> 
>>> hankin.robin at gmail.com
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From h@nk|n@rob|n @end|ng |rom gm@||@com  Tue Feb 26 02:28:58 2019
From: h@nk|n@rob|n @end|ng |rom gm@||@com (robin hankin)
Date: Tue, 26 Feb 2019 14:28:58 +1300
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <8808A8B5-A66F-4FFF-BCD6-808033F1A515@R-project.org>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
 <8808A8B5-A66F-4FFF-BCD6-808033F1A515@R-project.org>
Message-ID: <CAHHjBM7C+NCQv5atzzN3AWfd5xj8YenzPJpjg2b35tGMgj5m_A@mail.gmail.com>

Simon, thanks for this.  Can we add your comment to the mac os x FAQ
please?    What is the recommended way to install libcurl?

My feeling is that I have somehow messed up my system so badly that
reimaging is the only way forward.

hankin.robin at gmail.com



hankin.robin at gmail.com




On Tue, Feb 26, 2019 at 12:32 PM Simon Urbanek
<simon.urbanek at r-project.org> wrote:
>
> You're apparently using anaconda - it means you have to activate it first because it doesn't include paths in its binaries so ti won't work without explicit path override. Also note that anaconda is by design incompatible with the system libraries, so you'll have to make sure everything you use comes from anacoda or else it won't work. I'd very strongly suggest not using anaconda when compiling - it pretty much only works if you use their binaries but nothing else will.
>
> Cheers,
> Simon
>
>
> > On Feb 24, 2019, at 7:28 PM, robin hankin <hankin.robin at gmail.com> wrote:
> >
> > thanks for this Peter, my config.log file looks like this:
> >
> > configure:42615: result: yes
> > configure:42629: checking if libcurl is version 7 and >= 7.22.0
> > configure:42658: gcc -o conftest  -g -O2
> > -I/Users/rhankin/anaconda3/include -I/usr/local/include
> > -I/usr/local/include  -L/usr/local/lib conftest.c
> > -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
> > -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
> > /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
> > configure:42658: $? = 0
> > configure:42658: ./conftest
> > dyld: Library not loaded: @rpath/libcurl.4.dylib
> >  Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
> >  Reason: image not found
> > ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
> > configure:42658: $? = 134
> > configure: program exited with status 134
> > configure: failed program was:
> > | /* confdefs.h */
> > | #define PACKAGE_NAME "R"
> > | #define PACKAGE_TARNAME "R"
> >
> >
> >
> > Best wishes
> >
> >
> > Robin
> >
> >
> > hankin.robin at gmail.com
> >
> >
> >
> > hankin.robin at gmail.com
> >
> >
> >
> >
> > On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
> >>
> >> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
> >>
> >> The detective work needed could take off from config.log, region around this:
> >>
> >> configure:39937: checking if libcurl is version 7 and >= 7.22.0
> >> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
> >> configure:39966: $? = 0
> >> configure:39966: ./conftest
> >> configure:39966: $? = 0
> >> configure:39976: result: yes
> >>
> >> That's for a succesful build, a failed one will usually give more info including the failing program code.
> >>
> >> -pd
> >>
> >>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
> >>>
> >>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
> >>>
> >>> ./configure
> >>> [snip]
> >>>
> >>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
> >>> checking libcurl version ... 7.63.0
> >>> checking curl/curl.h usability... yes
> >>> checking curl/curl.h presence... yes
> >>> checking for curl/curl.h... yes
> >>> checking if libcurl is version 7 and >= 7.22.0... no
> >>> configure: error: libcurl >= 7.22.0 library and headers are required
> >>> with support for https
> >>>
> >>> if we have libcurl 7.63, as it says in the output, why the error?  How
> >>> to proceed?
> >>>
> >>> hankin.robin at gmail.com
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >> --
> >> Peter Dalgaard, Professor,
> >> Center for Statistics, Copenhagen Business School
> >> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >> Phone: (+45)38153501
> >> Office: A 4.23
> >> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Feb 26 03:07:54 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 25 Feb 2019 18:07:54 -0800
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <CAHHjBM7C+NCQv5atzzN3AWfd5xj8YenzPJpjg2b35tGMgj5m_A@mail.gmail.com>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
 <8808A8B5-A66F-4FFF-BCD6-808033F1A515@R-project.org>
 <CAHHjBM7C+NCQv5atzzN3AWfd5xj8YenzPJpjg2b35tGMgj5m_A@mail.gmail.com>
Message-ID: <9104D94C-E817-490F-AB6A-C6698792C6B8@dcn.davis.ca.us>

If your goal is to interoperate with Python (esp. when using numpy and friends) then Anaconda is actually a good option... just learn how activate a conda environment before doing anything within that ecosystem and remember that each conda environment you create will be independent of all others. [1] Sadly, it is just a PITA if you are not looking for those interoperability benefits and fail to get on the conda tool bandwagon, so don't take this as advocating for Anaconda in general.

FWIW I run both the standard distribution of R and an Anaconda distribution on the same machine, and only use the Anaconda version when I have to... but I have avoided installing R (or any custom Python libraries) into the default Anaconda environment, which may be a key point that makes this work.

[1] https://samrelton.wordpress.com/2015/07/02/rconda/amp/

On February 25, 2019 5:28:58 PM PST, robin hankin <hankin.robin at gmail.com> wrote:
>Simon, thanks for this.  Can we add your comment to the mac os x FAQ
>please?    What is the recommended way to install libcurl?
>
>My feeling is that I have somehow messed up my system so badly that
>reimaging is the only way forward.
>
>hankin.robin at gmail.com
>
>
>
>hankin.robin at gmail.com
>
>
>
>
>On Tue, Feb 26, 2019 at 12:32 PM Simon Urbanek
><simon.urbanek at r-project.org> wrote:
>>
>> You're apparently using anaconda - it means you have to activate it
>first because it doesn't include paths in its binaries so ti won't work
>without explicit path override. Also note that anaconda is by design
>incompatible with the system libraries, so you'll have to make sure
>everything you use comes from anacoda or else it won't work. I'd very
>strongly suggest not using anaconda when compiling - it pretty much
>only works if you use their binaries but nothing else will.
>>
>> Cheers,
>> Simon
>>
>>
>> > On Feb 24, 2019, at 7:28 PM, robin hankin <hankin.robin at gmail.com>
>wrote:
>> >
>> > thanks for this Peter, my config.log file looks like this:
>> >
>> > configure:42615: result: yes
>> > configure:42629: checking if libcurl is version 7 and >= 7.22.0
>> > configure:42658: gcc -o conftest  -g -O2
>> > -I/Users/rhankin/anaconda3/include -I/usr/local/include
>> > -I/usr/local/include  -L/usr/local/lib conftest.c
>> > -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
>> > -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
>> > /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm 
>-liconv >&5
>> > configure:42658: $? = 0
>> > configure:42658: ./conftest
>> > dyld: Library not loaded: @rpath/libcurl.4.dylib
>> >  Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
>> >  Reason: image not found
>> > ./configure: line 2254: 73408 Abort trap: 6          
>./conftest$ac_exeext
>> > configure:42658: $? = 134
>> > configure: program exited with status 134
>> > configure: failed program was:
>> > | /* confdefs.h */
>> > | #define PACKAGE_NAME "R"
>> > | #define PACKAGE_TARNAME "R"
>> >
>> >
>> >
>> > Best wishes
>> >
>> >
>> > Robin
>> >
>> >
>> > hankin.robin at gmail.com
>> >
>> >
>> >
>> > hankin.robin at gmail.com
>> >
>> >
>> >
>> >
>> > On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com>
>wrote:
>> >>
>> >> It doesn't usually happen on 10.13.6... Best guess is that somehow
>you are picking up an older library (e.g. in /usr/local/lib) even if
>you are using curl-config from a newer version.
>> >>
>> >> The detective work needed could take off from config.log, region
>around this:
>> >>
>> >> configure:39937: checking if libcurl is version 7 and >= 7.22.0
>> >> configure:39966: gcc -arch x86_64 -o conftest -g -O2  
>-I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma
>-lbz2 -lz -licucore -lm  -liconv >&5
>> >> configure:39966: $? = 0
>> >> configure:39966: ./conftest
>> >> configure:39966: $? = 0
>> >> configure:39976: result: yes
>> >>
>> >> That's for a succesful build, a failed one will usually give more
>info including the failing program code.
>> >>
>> >> -pd
>> >>
>> >>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com>
>wrote:
>> >>>
>> >>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
>> >>>
>> >>> ./configure
>> >>> [snip]
>> >>>
>> >>> checking for curl-config...
>/Users/rhankin/anaconda3/bin/curl-config
>> >>> checking libcurl version ... 7.63.0
>> >>> checking curl/curl.h usability... yes
>> >>> checking curl/curl.h presence... yes
>> >>> checking for curl/curl.h... yes
>> >>> checking if libcurl is version 7 and >= 7.22.0... no
>> >>> configure: error: libcurl >= 7.22.0 library and headers are
>required
>> >>> with support for https
>> >>>
>> >>> if we have libcurl 7.63, as it says in the output, why the error?
> How
>> >>> to proceed?
>> >>>
>> >>> hankin.robin at gmail.com
>> >>>
>> >>> _______________________________________________
>> >>> R-SIG-Mac mailing list
>> >>> R-SIG-Mac at r-project.org
>> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> >>
>> >> --
>> >> Peter Dalgaard, Professor,
>> >> Center for Statistics, Copenhagen Business School
>> >> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> >> Phone: (+45)38153501
>> >> Office: A 4.23
>> >> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >
>> > _______________________________________________
>> > R-SIG-Mac mailing list
>> > R-SIG-Mac at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> >
>>
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Sent from my phone. Please excuse my brevity.


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Feb 28 02:32:29 2019
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 27 Feb 2019 20:32:29 -0500
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
 <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>
Message-ID: <4D846A77-65A1-4C38-9731-E44BA6F3004F@R-project.org>

That's anaconda - they don't include paths which is why it breaks everything until you insert a manual override via DYLD_LIBRARY_PATH. See Robin's e-mail he is NOT using the system curl, but rather a custom version from anaconda ("/Users/rhankin/anaconda3/lib").

Cheers,
Simon



> On Feb 25, 2019, at 04:28, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Hmm, how did "@rpath" get in there? I don't see it anywhere in my build and source dirs. Looks like something that should have been substituted (by perl?) with the appropriate path.
> 
> Is your library (...anaconda3/lib) correctly installed? I have, for the system libcurl:
> 
> pd$ ls -l /usr/lib/*curl*
> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.3.dylib -> libcurl.4.dylib
> -rwxr-xr-x  1 root  wheel  854208 Nov 30 08:37 /usr/lib/libcurl.4.dylib
> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.dylib -> libcurl.4.dylib
> 
> -pd
> 
> 
>> On 25 Feb 2019, at 01:28 , robin hankin <hankin.robin at gmail.com> wrote:
>> 
>> thanks for this Peter, my config.log file looks like this:
>> 
>> configure:42615: result: yes
>> configure:42629: checking if libcurl is version 7 and >= 7.22.0
>> configure:42658: gcc -o conftest  -g -O2
>> -I/Users/rhankin/anaconda3/include -I/usr/local/include
>> -I/usr/local/include  -L/usr/local/lib conftest.c
>> -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
>> -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
>> /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
>> configure:42658: $? = 0
>> configure:42658: ./conftest
>> dyld: Library not loaded: @rpath/libcurl.4.dylib
>> Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
>> Reason: image not found
>> ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
>> configure:42658: $? = 134
>> configure: program exited with status 134
>> configure: failed program was:
>> | /* confdefs.h */
>> | #define PACKAGE_NAME "R"
>> | #define PACKAGE_TARNAME "R"
>> 
>> 
>> 
>> Best wishes
>> 
>> 
>> Robin
>> 
>> 
>> hankin.robin at gmail.com
>> 
>> 
>> 
>> hankin.robin at gmail.com
>> 
>> 
>> 
>> 
>> On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
>>> 
>>> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
>>> 
>>> The detective work needed could take off from config.log, region around this:
>>> 
>>> configure:39937: checking if libcurl is version 7 and >= 7.22.0
>>> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
>>> configure:39966: $? = 0
>>> configure:39966: ./conftest
>>> configure:39966: $? = 0
>>> configure:39976: result: yes
>>> 
>>> That's for a succesful build, a failed one will usually give more info including the failing program code.
>>> 
>>> -pd
>>> 
>>>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
>>>> 
>>>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
>>>> 
>>>> ./configure
>>>> [snip]
>>>> 
>>>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
>>>> checking libcurl version ... 7.63.0
>>>> checking curl/curl.h usability... yes
>>>> checking curl/curl.h presence... yes
>>>> checking for curl/curl.h... yes
>>>> checking if libcurl is version 7 and >= 7.22.0... no
>>>> configure: error: libcurl >= 7.22.0 library and headers are required
>>>> with support for https
>>>> 
>>>> if we have libcurl 7.63, as it says in the output, why the error?  How
>>>> to proceed?
>>>> 
>>>> hankin.robin at gmail.com
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> --
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Feb 28 02:46:48 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 27 Feb 2019 17:46:48 -0800
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <4D846A77-65A1-4C38-9731-E44BA6F3004F@R-project.org>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
 <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>
 <4D846A77-65A1-4C38-9731-E44BA6F3004F@R-project.org>
Message-ID: <3C512057-4EAF-4F20-9499-8D9CDE1693D2@noaa.gov>

Anaconda adds code to the end of your ,.profile that can really play havoc with paths in other programs/settings - and off I remember correctly it puts the changes at the front of your $PATH..  I moved that code in .profile to a separate file.  When I want anaconda,  I just source the file.  Makes problems such as that described  much less likely.  If you are using iTerm2 or the like,  then you can easily have a tab with the Anaconda paths and the rest of the tabs the more "usual" paths.

HTH,

-Roy


> On Feb 27, 2019, at 5:32 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> That's anaconda - they don't include paths which is why it breaks everything until you insert a manual override via DYLD_LIBRARY_PATH. See Robin's e-mail he is NOT using the system curl, but rather a custom version from anaconda ("/Users/rhankin/anaconda3/lib").
> 
> Cheers,
> Simon
> 
> 
> 
>> On Feb 25, 2019, at 04:28, peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> Hmm, how did "@rpath" get in there? I don't see it anywhere in my build and source dirs. Looks like something that should have been substituted (by perl?) with the appropriate path.
>> 
>> Is your library (...anaconda3/lib) correctly installed? I have, for the system libcurl:
>> 
>> pd$ ls -l /usr/lib/*curl*
>> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.3.dylib -> libcurl.4.dylib
>> -rwxr-xr-x  1 root  wheel  854208 Nov 30 08:37 /usr/lib/libcurl.4.dylib
>> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.dylib -> libcurl.4.dylib
>> 
>> -pd
>> 
>> 
>>> On 25 Feb 2019, at 01:28 , robin hankin <hankin.robin at gmail.com> wrote:
>>> 
>>> thanks for this Peter, my config.log file looks like this:
>>> 
>>> configure:42615: result: yes
>>> configure:42629: checking if libcurl is version 7 and >= 7.22.0
>>> configure:42658: gcc -o conftest  -g -O2
>>> -I/Users/rhankin/anaconda3/include -I/usr/local/include
>>> -I/usr/local/include  -L/usr/local/lib conftest.c
>>> -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
>>> -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
>>> /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
>>> configure:42658: $? = 0
>>> configure:42658: ./conftest
>>> dyld: Library not loaded: @rpath/libcurl.4.dylib
>>> Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
>>> Reason: image not found
>>> ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
>>> configure:42658: $? = 134
>>> configure: program exited with status 134
>>> configure: failed program was:
>>> | /* confdefs.h */
>>> | #define PACKAGE_NAME "R"
>>> | #define PACKAGE_TARNAME "R"
>>> 
>>> 
>>> 
>>> Best wishes
>>> 
>>> 
>>> Robin
>>> 
>>> 
>>> hankin.robin at gmail.com
>>> 
>>> 
>>> 
>>> hankin.robin at gmail.com
>>> 
>>> 
>>> 
>>> 
>>> On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
>>>> 
>>>> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
>>>> 
>>>> The detective work needed could take off from config.log, region around this:
>>>> 
>>>> configure:39937: checking if libcurl is version 7 and >= 7.22.0
>>>> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
>>>> configure:39966: $? = 0
>>>> configure:39966: ./conftest
>>>> configure:39966: $? = 0
>>>> configure:39976: result: yes
>>>> 
>>>> That's for a succesful build, a failed one will usually give more info including the failing program code.
>>>> 
>>>> -pd
>>>> 
>>>>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
>>>>> 
>>>>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
>>>>> 
>>>>> ./configure
>>>>> [snip]
>>>>> 
>>>>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
>>>>> checking libcurl version ... 7.63.0
>>>>> checking curl/curl.h usability... yes
>>>>> checking curl/curl.h presence... yes
>>>>> checking for curl/curl.h... yes
>>>>> checking if libcurl is version 7 and >= 7.22.0... no
>>>>> configure: error: libcurl >= 7.22.0 library and headers are required
>>>>> with support for https
>>>>> 
>>>>> if we have libcurl 7.63, as it says in the output, why the error?  How
>>>>> to proceed?
>>>>> 
>>>>> hankin.robin at gmail.com
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> --
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From h@nk|n@rob|n @end|ng |rom gm@||@com  Thu Feb 28 02:57:52 2019
From: h@nk|n@rob|n @end|ng |rom gm@||@com (robin hankin)
Date: Thu, 28 Feb 2019 14:57:52 +1300
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <3C512057-4EAF-4F20-9499-8D9CDE1693D2@noaa.gov>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
 <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>
 <4D846A77-65A1-4C38-9731-E44BA6F3004F@R-project.org>
 <3C512057-4EAF-4F20-9499-8D9CDE1693D2@noaa.gov>
Message-ID: <CAHHjBM4=9Wu6tb32o2-+sDmY59n4Dt7BD-+FowCayi_3SaU9Pg@mail.gmail.com>

Roy, thanks for this!  Your insight explains a great deal of my
problems.  And indeed I see a whole bunch of PATH additions which were
created by anaconda (these are in  .bash_profile, certainly not put
there by me!).

Just to clarify, I'm not using anaconda by choice, it seems to have
been installed inadvertently.

stop press:  configure works!  Thanks!


Best wishes

Robin



hankin.robin at gmail.com



hankin.robin at gmail.com




On Thu, Feb 28, 2019 at 2:47 PM Roy Mendelssohn - NOAA Federal via
R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>
> Anaconda adds code to the end of your ,.profile that can really play havoc with paths in other programs/settings - and off I remember correctly it puts the changes at the front of your $PATH..  I moved that code in .profile to a separate file.  When I want anaconda,  I just source the file.  Makes problems such as that described  much less likely.  If you are using iTerm2 or the like,  then you can easily have a tab with the Anaconda paths and the rest of the tabs the more "usual" paths.
>
> HTH,
>
> -Roy
>
>
> > On Feb 27, 2019, at 5:32 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> >
> > That's anaconda - they don't include paths which is why it breaks everything until you insert a manual override via DYLD_LIBRARY_PATH. See Robin's e-mail he is NOT using the system curl, but rather a custom version from anaconda ("/Users/rhankin/anaconda3/lib").
> >
> > Cheers,
> > Simon
> >
> >
> >
> >> On Feb 25, 2019, at 04:28, peter dalgaard <pdalgd at gmail.com> wrote:
> >>
> >> Hmm, how did "@rpath" get in there? I don't see it anywhere in my build and source dirs. Looks like something that should have been substituted (by perl?) with the appropriate path.
> >>
> >> Is your library (...anaconda3/lib) correctly installed? I have, for the system libcurl:
> >>
> >> pd$ ls -l /usr/lib/*curl*
> >> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.3.dylib -> libcurl.4.dylib
> >> -rwxr-xr-x  1 root  wheel  854208 Nov 30 08:37 /usr/lib/libcurl.4.dylib
> >> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.dylib -> libcurl.4.dylib
> >>
> >> -pd
> >>
> >>
> >>> On 25 Feb 2019, at 01:28 , robin hankin <hankin.robin at gmail.com> wrote:
> >>>
> >>> thanks for this Peter, my config.log file looks like this:
> >>>
> >>> configure:42615: result: yes
> >>> configure:42629: checking if libcurl is version 7 and >= 7.22.0
> >>> configure:42658: gcc -o conftest  -g -O2
> >>> -I/Users/rhankin/anaconda3/include -I/usr/local/include
> >>> -I/usr/local/include  -L/usr/local/lib conftest.c
> >>> -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
> >>> -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
> >>> /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
> >>> configure:42658: $? = 0
> >>> configure:42658: ./conftest
> >>> dyld: Library not loaded: @rpath/libcurl.4.dylib
> >>> Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
> >>> Reason: image not found
> >>> ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
> >>> configure:42658: $? = 134
> >>> configure: program exited with status 134
> >>> configure: failed program was:
> >>> | /* confdefs.h */
> >>> | #define PACKAGE_NAME "R"
> >>> | #define PACKAGE_TARNAME "R"
> >>>
> >>>
> >>>
> >>> Best wishes
> >>>
> >>>
> >>> Robin
> >>>
> >>>
> >>> hankin.robin at gmail.com
> >>>
> >>>
> >>>
> >>> hankin.robin at gmail.com
> >>>
> >>>
> >>>
> >>>
> >>> On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
> >>>>
> >>>> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
> >>>>
> >>>> The detective work needed could take off from config.log, region around this:
> >>>>
> >>>> configure:39937: checking if libcurl is version 7 and >= 7.22.0
> >>>> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
> >>>> configure:39966: $? = 0
> >>>> configure:39966: ./conftest
> >>>> configure:39966: $? = 0
> >>>> configure:39976: result: yes
> >>>>
> >>>> That's for a succesful build, a failed one will usually give more info including the failing program code.
> >>>>
> >>>> -pd
> >>>>
> >>>>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
> >>>>>
> >>>>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
> >>>>>
> >>>>> ./configure
> >>>>> [snip]
> >>>>>
> >>>>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
> >>>>> checking libcurl version ... 7.63.0
> >>>>> checking curl/curl.h usability... yes
> >>>>> checking curl/curl.h presence... yes
> >>>>> checking for curl/curl.h... yes
> >>>>> checking if libcurl is version 7 and >= 7.22.0... no
> >>>>> configure: error: libcurl >= 7.22.0 library and headers are required
> >>>>> with support for https
> >>>>>
> >>>>> if we have libcurl 7.63, as it says in the output, why the error?  How
> >>>>> to proceed?
> >>>>>
> >>>>> hankin.robin at gmail.com
> >>>>>
> >>>>> _______________________________________________
> >>>>> R-SIG-Mac mailing list
> >>>>> R-SIG-Mac at r-project.org
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>
> >>>> --
> >>>> Peter Dalgaard, Professor,
> >>>> Center for Statistics, Copenhagen Business School
> >>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >>>> Phone: (+45)38153501
> >>>> Office: A 4.23
> >>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>
> >> --
> >> Peter Dalgaard, Professor,
> >> Center for Statistics, Copenhagen Business School
> >> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >> Phone: (+45)38153501
> >> Office: A 4.23
> >> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >>
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Feb 28 03:09:15 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 27 Feb 2019 18:09:15 -0800
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <CAHHjBM4=9Wu6tb32o2-+sDmY59n4Dt7BD-+FowCayi_3SaU9Pg@mail.gmail.com>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
 <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>
 <4D846A77-65A1-4C38-9731-E44BA6F3004F@R-project.org>
 <3C512057-4EAF-4F20-9499-8D9CDE1693D2@noaa.gov>
 <CAHHjBM4=9Wu6tb32o2-+sDmY59n4Dt7BD-+FowCayi_3SaU9Pg@mail.gmail.com>
Message-ID: <EA29111A-6872-4230-B864-D2E2872545F9@noaa.gov>

You are welcome  (my one good deed for the day - I guess I can go to bed now!!!)  Anaconda is a great product, I use it  for my Python work,  they actually ask you if you want them to modify the .profile, but people say yes without realizing the implications.  First time I installed it, I said yes but then looked at what was added to the file,  and realized that could cause conflicts.  But since it is so easy to copy that part to another file and then source it as needed,  you can keep things separate.  One of the main things is anything in /usr/bin and /usr/local/bin that had similar things in Anaconda were finding the Anaconda version.

-Roy

> On Feb 27, 2019, at 5:57 PM, robin hankin <hankin.robin at gmail.com> wrote:
> 
> Roy, thanks for this!  Your insight explains a great deal of my
> problems.  And indeed I see a whole bunch of PATH additions which were
> created by anaconda (these are in  .bash_profile, certainly not put
> there by me!).
> 
> Just to clarify, I'm not using anaconda by choice, it seems to have
> been installed inadvertently.
> 
> stop press:  configure works!  Thanks!
> 
> 
> Best wishes
> 
> Robin
> 
> 
> 
> hankin.robin at gmail.com
> 
> 
> 
> hankin.robin at gmail.com
> 
> 
> 
> 
> On Thu, Feb 28, 2019 at 2:47 PM Roy Mendelssohn - NOAA Federal via
> R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>> 
>> Anaconda adds code to the end of your ,.profile that can really play havoc with paths in other programs/settings - and off I remember correctly it puts the changes at the front of your $PATH..  I moved that code in .profile to a separate file.  When I want anaconda,  I just source the file.  Makes problems such as that described  much less likely.  If you are using iTerm2 or the like,  then you can easily have a tab with the Anaconda paths and the rest of the tabs the more "usual" paths.
>> 
>> HTH,
>> 
>> -Roy
>> 
>> 
>>> On Feb 27, 2019, at 5:32 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>> 
>>> That's anaconda - they don't include paths which is why it breaks everything until you insert a manual override via DYLD_LIBRARY_PATH. See Robin's e-mail he is NOT using the system curl, but rather a custom version from anaconda ("/Users/rhankin/anaconda3/lib").
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>>> On Feb 25, 2019, at 04:28, peter dalgaard <pdalgd at gmail.com> wrote:
>>>> 
>>>> Hmm, how did "@rpath" get in there? I don't see it anywhere in my build and source dirs. Looks like something that should have been substituted (by perl?) with the appropriate path.
>>>> 
>>>> Is your library (...anaconda3/lib) correctly installed? I have, for the system libcurl:
>>>> 
>>>> pd$ ls -l /usr/lib/*curl*
>>>> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.3.dylib -> libcurl.4.dylib
>>>> -rwxr-xr-x  1 root  wheel  854208 Nov 30 08:37 /usr/lib/libcurl.4.dylib
>>>> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.dylib -> libcurl.4.dylib
>>>> 
>>>> -pd
>>>> 
>>>> 
>>>>> On 25 Feb 2019, at 01:28 , robin hankin <hankin.robin at gmail.com> wrote:
>>>>> 
>>>>> thanks for this Peter, my config.log file looks like this:
>>>>> 
>>>>> configure:42615: result: yes
>>>>> configure:42629: checking if libcurl is version 7 and >= 7.22.0
>>>>> configure:42658: gcc -o conftest  -g -O2
>>>>> -I/Users/rhankin/anaconda3/include -I/usr/local/include
>>>>> -I/usr/local/include  -L/usr/local/lib conftest.c
>>>>> -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
>>>>> -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
>>>>> /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
>>>>> configure:42658: $? = 0
>>>>> configure:42658: ./conftest
>>>>> dyld: Library not loaded: @rpath/libcurl.4.dylib
>>>>> Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
>>>>> Reason: image not found
>>>>> ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
>>>>> configure:42658: $? = 134
>>>>> configure: program exited with status 134
>>>>> configure: failed program was:
>>>>> | /* confdefs.h */
>>>>> | #define PACKAGE_NAME "R"
>>>>> | #define PACKAGE_TARNAME "R"
>>>>> 
>>>>> 
>>>>> 
>>>>> Best wishes
>>>>> 
>>>>> 
>>>>> Robin
>>>>> 
>>>>> 
>>>>> hankin.robin at gmail.com
>>>>> 
>>>>> 
>>>>> 
>>>>> hankin.robin at gmail.com
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
>>>>>> 
>>>>>> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
>>>>>> 
>>>>>> The detective work needed could take off from config.log, region around this:
>>>>>> 
>>>>>> configure:39937: checking if libcurl is version 7 and >= 7.22.0
>>>>>> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
>>>>>> configure:39966: $? = 0
>>>>>> configure:39966: ./conftest
>>>>>> configure:39966: $? = 0
>>>>>> configure:39976: result: yes
>>>>>> 
>>>>>> That's for a succesful build, a failed one will usually give more info including the failing program code.
>>>>>> 
>>>>>> -pd
>>>>>> 
>>>>>>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
>>>>>>> 
>>>>>>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
>>>>>>> 
>>>>>>> ./configure
>>>>>>> [snip]
>>>>>>> 
>>>>>>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
>>>>>>> checking libcurl version ... 7.63.0
>>>>>>> checking curl/curl.h usability... yes
>>>>>>> checking curl/curl.h presence... yes
>>>>>>> checking for curl/curl.h... yes
>>>>>>> checking if libcurl is version 7 and >= 7.22.0... no
>>>>>>> configure: error: libcurl >= 7.22.0 library and headers are required
>>>>>>> with support for https
>>>>>>> 
>>>>>>> if we have libcurl 7.63, as it says in the output, why the error?  How
>>>>>>> to proceed?
>>>>>>> 
>>>>>>> hankin.robin at gmail.com
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>>> --
>>>>>> Peter Dalgaard, Professor,
>>>>>> Center for Statistics, Copenhagen Business School
>>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>>> Phone: (+45)38153501
>>>>>> Office: A 4.23
>>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>> 
>>>> --
>>>> Peter Dalgaard, Professor,
>>>> Center for Statistics, Copenhagen Business School
>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>> Phone: (+45)38153501
>>>> Office: A 4.23
>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Feb 28 06:43:42 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 27 Feb 2019 21:43:42 -0800
Subject: [R-SIG-Mac] libcurl
In-Reply-To: <EA29111A-6872-4230-B864-D2E2872545F9@noaa.gov>
References: <CAHHjBM7Vm6bNE8ns4tLWxD=x_SZMg-A0JJ7js_hCEHLQLQZH-g@mail.gmail.com>
 <CF9E792E-367A-4DD4-9A77-0A16952E817C@gmail.com>
 <CAHHjBM7jOmN7T-U_ZBk_7_5GgFHW81mgNzH+R7N7ih7YK0=LKw@mail.gmail.com>
 <555F7DE6-35FB-446A-B695-26CFACB99CDD@gmail.com>
 <4D846A77-65A1-4C38-9731-E44BA6F3004F@R-project.org>
 <3C512057-4EAF-4F20-9499-8D9CDE1693D2@noaa.gov>
 <CAHHjBM4=9Wu6tb32o2-+sDmY59n4Dt7BD-+FowCayi_3SaU9Pg@mail.gmail.com>
 <EA29111A-6872-4230-B864-D2E2872545F9@noaa.gov>
Message-ID: <FA735278-FFDB-4DD9-886D-D1F1854CDF72@noaa.gov>

BTW - I should add that my memory is that there is at least one package for having R interact with Python that does an Anaconda install without you really knowing it.  Personally  I consider that bad practice.  It may be more convenient but can lead to unexpected trouble down the line just because of issues like this.  I have also seen R and Julia packages install things under the covers using Homebrew. I also consider this bad practice, again because it can lead to conflicts that leave the user bewildered . (Homebrew installs is its own directory, but you must be careful about setting Paths, and path priority).   This was particularly true when building from source.

I have submitted to CRAN and while it can be an utter pain in the butt,  I also appreciate what CRAN does for users of the package - they can install with reasonable assurance that the needed pieces will work together and there won't be any hidden gotchas, and that is worth a lot to users, at least in my experience.  I recently spent a week in hell with conda-forge where different packages used the same library (by name) but the recipes installed different versions,  and they kept on crashing each other.

So the tl;dr version is you likely installed a package for interop between R and Python,  say from source or Github,  and undercover it installed Anaconda.  And as people have mentioned,  Anaconda has its own R environment,  which may or may not interfere with the standard R install. I check my .profile or .bash_profile after installs just in case.  If there is a setting I will need to use some software,  I move that to a separate file to be sourced when needed.  Since I have started doing that,  a lot of conflicts have disappeared.

HTH,

-Roy



> On Feb 27, 2019, at 6:09 PM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> You are welcome  (my one good deed for the day - I guess I can go to bed now!!!)  Anaconda is a great product, I use it  for my Python work,  they actually ask you if you want them to modify the .profile, but people say yes without realizing the implications.  First time I installed it, I said yes but then looked at what was added to the file,  and realized that could cause conflicts.  But since it is so easy to copy that part to another file and then source it as needed,  you can keep things separate.  One of the main things is anything in /usr/bin and /usr/local/bin that had similar things in Anaconda were finding the Anaconda version.
> 
> -Roy
> 
>> On Feb 27, 2019, at 5:57 PM, robin hankin <hankin.robin at gmail.com> wrote:
>> 
>> Roy, thanks for this!  Your insight explains a great deal of my
>> problems.  And indeed I see a whole bunch of PATH additions which were
>> created by anaconda (these are in  .bash_profile, certainly not put
>> there by me!).
>> 
>> Just to clarify, I'm not using anaconda by choice, it seems to have
>> been installed inadvertently.
>> 
>> stop press:  configure works!  Thanks!
>> 
>> 
>> Best wishes
>> 
>> Robin
>> 
>> 
>> 
>> hankin.robin at gmail.com
>> 
>> 
>> 
>> hankin.robin at gmail.com
>> 
>> 
>> 
>> 
>> On Thu, Feb 28, 2019 at 2:47 PM Roy Mendelssohn - NOAA Federal via
>> R-SIG-Mac <r-sig-mac at r-project.org> wrote:
>>> 
>>> Anaconda adds code to the end of your ,.profile that can really play havoc with paths in other programs/settings - and off I remember correctly it puts the changes at the front of your $PATH..  I moved that code in .profile to a separate file.  When I want anaconda,  I just source the file.  Makes problems such as that described  much less likely.  If you are using iTerm2 or the like,  then you can easily have a tab with the Anaconda paths and the rest of the tabs the more "usual" paths.
>>> 
>>> HTH,
>>> 
>>> -Roy
>>> 
>>> 
>>>> On Feb 27, 2019, at 5:32 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>>>> 
>>>> That's anaconda - they don't include paths which is why it breaks everything until you insert a manual override via DYLD_LIBRARY_PATH. See Robin's e-mail he is NOT using the system curl, but rather a custom version from anaconda ("/Users/rhankin/anaconda3/lib").
>>>> 
>>>> Cheers,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>>> On Feb 25, 2019, at 04:28, peter dalgaard <pdalgd at gmail.com> wrote:
>>>>> 
>>>>> Hmm, how did "@rpath" get in there? I don't see it anywhere in my build and source dirs. Looks like something that should have been substituted (by perl?) with the appropriate path.
>>>>> 
>>>>> Is your library (...anaconda3/lib) correctly installed? I have, for the system libcurl:
>>>>> 
>>>>> pd$ ls -l /usr/lib/*curl*
>>>>> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.3.dylib -> libcurl.4.dylib
>>>>> -rwxr-xr-x  1 root  wheel  854208 Nov 30 08:37 /usr/lib/libcurl.4.dylib
>>>>> lrwxr-xr-x  1 root  wheel      15 Nov 14 14:36 /usr/lib/libcurl.dylib -> libcurl.4.dylib
>>>>> 
>>>>> -pd
>>>>> 
>>>>> 
>>>>>> On 25 Feb 2019, at 01:28 , robin hankin <hankin.robin at gmail.com> wrote:
>>>>>> 
>>>>>> thanks for this Peter, my config.log file looks like this:
>>>>>> 
>>>>>> configure:42615: result: yes
>>>>>> configure:42629: checking if libcurl is version 7 and >= 7.22.0
>>>>>> configure:42658: gcc -o conftest  -g -O2
>>>>>> -I/Users/rhankin/anaconda3/include -I/usr/local/include
>>>>>> -I/usr/local/include  -L/usr/local/lib conftest.c
>>>>>> -L/Users/rhankin/anaconda3/lib -lcurl -lssh2 -lssh2 -lssl -lcrypto
>>>>>> -lssl -lcrypto -lgssapi_krb5 -lresolv -lz -L/usr\
>>>>>> /local/lib -lpcre2-8 -lpcre -llzma -lbz2 -lz -licucore -ldl -lm  -liconv >&5
>>>>>> configure:42658: $? = 0
>>>>>> configure:42658: ./conftest
>>>>>> dyld: Library not loaded: @rpath/libcurl.4.dylib
>>>>>> Referenced from: /Users/rhankin/Downloads/R-devel/./conftest
>>>>>> Reason: image not found
>>>>>> ./configure: line 2254: 73408 Abort trap: 6           ./conftest$ac_exeext
>>>>>> configure:42658: $? = 134
>>>>>> configure: program exited with status 134
>>>>>> configure: failed program was:
>>>>>> | /* confdefs.h */
>>>>>> | #define PACKAGE_NAME "R"
>>>>>> | #define PACKAGE_TARNAME "R"
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> Best wishes
>>>>>> 
>>>>>> 
>>>>>> Robin
>>>>>> 
>>>>>> 
>>>>>> hankin.robin at gmail.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> hankin.robin at gmail.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> On Mon, Feb 25, 2019 at 11:41 AM peter dalgaard <pdalgd at gmail.com> wrote:
>>>>>>> 
>>>>>>> It doesn't usually happen on 10.13.6... Best guess is that somehow you are picking up an older library (e.g. in /usr/local/lib) even if you are using curl-config from a newer version.
>>>>>>> 
>>>>>>> The detective work needed could take off from config.log, region around this:
>>>>>>> 
>>>>>>> configure:39937: checking if libcurl is version 7 and >= 7.22.0
>>>>>>> configure:39966: gcc -arch x86_64 -o conftest -g -O2   -I/usr/local/include  -L/usr/local/lib conftest.c -lcurl -lpcre -llzma -lbz2 -lz -licucore -lm  -liconv >&5
>>>>>>> configure:39966: $? = 0
>>>>>>> configure:39966: ./conftest
>>>>>>> configure:39966: $? = 0
>>>>>>> configure:39976: result: yes
>>>>>>> 
>>>>>>> That's for a succesful build, a failed one will usually give more info including the failing program code.
>>>>>>> 
>>>>>>> -pd
>>>>>>> 
>>>>>>>> On 24 Feb 2019, at 22:45 , robin hankin <hankin.robin at gmail.com> wrote:
>>>>>>>> 
>>>>>>>> Hi,  macos 10.13.6, trying to compile 3.6.0, revision 76152.
>>>>>>>> 
>>>>>>>> ./configure
>>>>>>>> [snip]
>>>>>>>> 
>>>>>>>> checking for curl-config... /Users/rhankin/anaconda3/bin/curl-config
>>>>>>>> checking libcurl version ... 7.63.0
>>>>>>>> checking curl/curl.h usability... yes
>>>>>>>> checking curl/curl.h presence... yes
>>>>>>>> checking for curl/curl.h... yes
>>>>>>>> checking if libcurl is version 7 and >= 7.22.0... no
>>>>>>>> configure: error: libcurl >= 7.22.0 library and headers are required
>>>>>>>> with support for https
>>>>>>>> 
>>>>>>>> if we have libcurl 7.63, as it says in the output, why the error?  How
>>>>>>>> to proceed?
>>>>>>>> 
>>>>>>>> hankin.robin at gmail.com
>>>>>>>> 
>>>>>>>> _______________________________________________
>>>>>>>> R-SIG-Mac mailing list
>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>> 
>>>>>>> --
>>>>>>> Peter Dalgaard, Professor,
>>>>>>> Center for Statistics, Copenhagen Business School
>>>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>>>> Phone: (+45)38153501
>>>>>>> Office: A 4.23
>>>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>> 
>>>>> --
>>>>> Peter Dalgaard, Professor,
>>>>> Center for Statistics, Copenhagen Business School
>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>> Phone: (+45)38153501
>>>>> Office: A 4.23
>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected"
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


