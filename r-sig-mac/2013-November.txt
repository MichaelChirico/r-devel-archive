From pdalgd at gmail.com  Fri Nov  1 11:17:24 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 1 Nov 2013 11:17:24 +0100
Subject: [R-SIG-Mac] Updating to Mavericks
In-Reply-To: <5272D76C.2030401@stats.ox.ac.uk>
References: <527119C8.3060700@stats.ox.ac.uk>
	<BEE3E475-BEB3-44B3-96D2-73634C93AB8D@gmail.com>
	<5272D76C.2030401@stats.ox.ac.uk>
Message-ID: <BD4BABF5-7951-4E91-B28F-F2E9AB6B7506@gmail.com>


On 31 Oct 2013, at 23:19 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> On 31/10/2013 14:57, peter dalgaard wrote:
>> Thanks Brian.
>> 
>> One more item: If building from SVN, you may need to run "svn upgrade" in the source directory (at top level).
>> 
>> I suppose that's a consequence of upgrading Xcode rather than Mavericks per se, but might as well mention it here.
> 
> Yes.  A quick poll of systems I have access to has svn 1.6.x on 10.7, 1.7.x on 10.8 and 10.9.  As AFAICS it is part of Xcode, it depends on the version you had installed and I believe those machines were all fully updated.

At any rate, "svn up" tells you what to do, the only slight confusion is that make claims that your source directory is not an svn checkout until you have upgraded it.

One further issue is that gnutar seems to have gone AWOL. We have, in the CRAN binary, 

/Library/Frameworks/R.framework/Resources/etc/Renviron:TAR=${TAR-'/usr/bin/gnutar'}

so this affects R CMD INSTALL --build. I suppose people might discover this when a teaching package has gotten archived at CRAN. (A colleague bumped into it with languageR.) Looks like the obvious workaround does work around it:

TAR=/usr/bin/tar R CMD etc.





>> Do we have any authoritative advice as to what should go into config.site? Mine seems to work unchanged, but I'm not sure I have a clue about what they are doing anymore.
> 
> I have
> 
> % cat config.site
> CC="clang -mtune=native"
> OBJC=$CC
> F77="gfortran-4.2 -arch x86_64 -mtune=native"
> FC=$F77
> CXX="clang++ -mtune=native"
> CFLAGS="-g -O2 -Wall -pedantic -Wconversion -Wno-sign-conversion"
> 
> Those are rather picky C flags, of course: intended to pick up issues with long vectors.
> 
> gcc/g++ are not the same as clang/clang++, although the only differences I have detected are what they report themselves as.  As I don't know if there are any material differences I chose to use clang explicitly. Similarly calling gfortran-4.2 explicitly to avoid any other versions (and I would even consider using /usr/local/bin/gfortran-4.2).
> 
>> -pd
>> 
>> On 30 Oct 2013, at 15:38 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>> 
>>> This is an attempt to collect together various pieces of advice.
>>> 
>>> If you update to Mavericks and want to compile packages (or run some) with the CRAN binary R, you will need to
>>> 
>>> - Update R to 3.0.2 or later if you use R.app.
>>> 
>>> - Re-install XQuartz.  The Mavericks update re-populates /usr/X11 with links which tell you to install XQuartz (even if it is currently installed).
>>> 
>>> - Re-install the Apple Java 6 runtime if you use rJava.  Try any of the rJava examples and you will be prompted for an install.
>>> 
>>> - Install Xcode 5.0.1 if you had not previously done so.
>>> 
>>> - Re-install the Xcode command-line tools.  Xcode for Mavericks has moved most things inside Xcode (specifically under /Applications/Xcode.app/Contents/Developer) and the command-line tools previously installed seemed almost to work, but not entirely.
>>> 
>>> xcode-select --install
>>> 
>>> seems to be the recommended way to do so under Mavericks.
>>> 
>>> 
>>> If you previously had them installed, the Xcode 4.6.3 compilers (such as llvm-g++-4.2) should still work.  Otherwise you could select clang as your compiler: see http://cran.r-project.org/doc/manuals/r-release/R-admin.html#OS-X-packages . There are also compilers called 'gcc' and 'g++' in Xcode 5.0.1: these are clang-based but are not quite the same as clang/clang++.  Although g++ reports
>>> 
>>> % g++ --version
>>> Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
>>> 
>>> it looks at the libcxx headers at
>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/ .  And the packages which do not compile under clang++ do not compile under g++ .
>>> 
>>> Packages using a C++ interface may need re-compiling if you use clang++ (or g++) as your C++ compiler.  The external software at http://r.research.att.com/libs/ which I know does is gdal and zeromq. It would be prudent to compile Rcpp with the same compiler as a Rcpp-using package, although not always necessary.
>>> 
>>> 
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jgrn at illinois.edu  Fri Nov  1 15:10:03 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Fri, 1 Nov 2013 09:10:03 -0500
Subject: [R-SIG-Mac] Updating to Mavericks
In-Reply-To: <BD4BABF5-7951-4E91-B28F-F2E9AB6B7506@gmail.com>
References: <527119C8.3060700@stats.ox.ac.uk>
	<BEE3E475-BEB3-44B3-96D2-73634C93AB8D@gmail.com>
	<5272D76C.2030401@stats.ox.ac.uk>
	<BD4BABF5-7951-4E91-B28F-F2E9AB6B7506@gmail.com>
Message-ID: <CABG0rftP5yc0BE_-6KZQbe3v8J=iYJvQ_shUk=9vFtA_KZbYOg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131101/50a7f0d5/attachment.pl>

From randy.cs.lai at gmail.com  Sat Nov  2 05:55:51 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Fri, 1 Nov 2013 21:55:51 -0700
Subject: [R-SIG-Mac] a bug in R Mac GUI
Message-ID: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>

Hi guys,

I have fixed a bug in R Mac GUI that the comment symbol # is trimmed when cleanup history entries is checked.
This only works for R 3.0.x for Mac.

 A complied version can be found in the following link.

the fix: https://github.com/randy3k/R-Mac-GUI/commit/d8d387236b208d49b3cda9a3d82ca72e70b40110
the binary: https://github.com/randy3k/R-Mac-GUI/releases


From simon.urbanek at r-project.org  Tue Nov  5 14:49:08 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 5 Nov 2013 08:49:08 -0500
Subject: [R-SIG-Mac] Fwd:  a bug in R Mac GUI
References: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>
Message-ID: <AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>

I'm CCig Rob since he designed the history code so he may comment on whether it's by design or not. I dimly remember that this was intended, but I'm not 100% sure.

Thanks,
Simon


Begin forwarded message:

> From: Randy Lai <randy.cs.lai at gmail.com>
> Subject: [R-SIG-Mac] a bug in R Mac GUI
> Date: November 2, 2013 at 12:55:51 AM EDT
> To: r-sig-mac at r-project.org
> 
> Hi guys,
> 
> I have fixed a bug in R Mac GUI that the comment symbol # is trimmed when cleanup history entries is checked.
> This only works for R 3.0.x for Mac.
> 
> A complied version can be found in the following link.
> 
> the fix: https://github.com/randy3k/R-Mac-GUI/commit/d8d387236b208d49b3cda9a3d82ca72e70b40110
> the binary: https://github.com/randy3k/R-Mac-GUI/releases
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From randy.cs.lai at gmail.com  Tue Nov  5 18:34:10 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Tue, 5 Nov 2013 09:34:10 -0800
Subject: [R-SIG-Mac] a bug in R Mac GUI
In-Reply-To: <AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>
References: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>
	<AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>
Message-ID: <429EAB32-2F5C-4C5F-8AD2-B50EE240FACB@gmail.com>

I would rather think that it is a bug. It happens when "clean up history entries" is on but ?strip comment? is off.

If I have a history of two lines:
# this is a comment
a = 100

the current version of GUI would returns
this is a comment
a = 100


On Nov 5, 2013, at 5:49 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> I'm CCig Rob since he designed the history code so he may comment on whether it's by design or not. I dimly remember that this was intended, but I'm not 100% sure.
> 
> Thanks,
> Simon
> 
> 
> Begin forwarded message:
> 
>> From: Randy Lai <randy.cs.lai at gmail.com>
>> Subject: [R-SIG-Mac] a bug in R Mac GUI
>> Date: November 2, 2013 at 12:55:51 AM EDT
>> To: r-sig-mac at r-project.org
>> 
>> Hi guys,
>> 
>> I have fixed a bug in R Mac GUI that the comment symbol # is trimmed when cleanup history entries is checked.
>> This only works for R 3.0.x for Mac.
>> 
>> A complied version can be found in the following link.
>> 
>> the fix: https://github.com/randy3k/R-Mac-GUI/commit/d8d387236b208d49b3cda9a3d82ca72e70b40110
>> the binary: https://github.com/randy3k/R-Mac-GUI/releases
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From goedman at icloud.com  Tue Nov  5 19:15:45 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Tue, 05 Nov 2013 10:15:45 -0800
Subject: [R-SIG-Mac] a bug in R Mac GUI
In-Reply-To: <429EAB32-2F5C-4C5F-8AD2-B50EE240FACB@gmail.com>
References: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>
	<AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>
	<429EAB32-2F5C-4C5F-8AD2-B50EE240FACB@gmail.com>
Message-ID: <937883DA-1FFF-49C7-98B0-9796FAEAC095@icloud.com>

Hi Simon and Randy,

Randy, what do you mean with 'I have a history'? How did you create your example? I can't reproduce the problem (but I'm on R-devel and compile everything locally, including R.app). 

That would indeed be pretty serious as most of my source files contain comments as in your example.

Simon, I'm not 100% sure either (h?, it was 10 years ago!), but I think we decided to stay as close as possible to the behavior of the Carbon version of R.app, although I believe I opted for removing comment-only lines. Of course, that's just a decision. And different from Randy's example just now.

Rob J. Goedman
goedman at icloud.com



On Nov 5, 2013, at 9:34 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:

> I would rather think that it is a bug. It happens when "clean up history entries" is on but ?strip comment? is off.
> 
> If I have a history of two lines:
> # this is a comment
> a = 100
> 
> the current version of GUI would returns
> this is a comment
> a = 100
> 
> 
> On Nov 5, 2013, at 5:49 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> I'm CCig Rob since he designed the history code so he may comment on whether it's by design or not. I dimly remember that this was intended, but I'm not 100% sure.
>> 
>> Thanks,
>> Simon
>> 
>> 
>> Begin forwarded message:
>> 
>>> From: Randy Lai <randy.cs.lai at gmail.com>
>>> Subject: [R-SIG-Mac] a bug in R Mac GUI
>>> Date: November 2, 2013 at 12:55:51 AM EDT
>>> To: r-sig-mac at r-project.org
>>> 
>>> Hi guys,
>>> 
>>> I have fixed a bug in R Mac GUI that the comment symbol # is trimmed when cleanup history entries is checked.
>>> This only works for R 3.0.x for Mac.
>>> 
>>> A complied version can be found in the following link.
>>> 
>>> the fix: https://github.com/randy3k/R-Mac-GUI/commit/d8d387236b208d49b3cda9a3d82ca72e70b40110
>>> the binary: https://github.com/randy3k/R-Mac-GUI/releases
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 


From randy.cs.lai at gmail.com  Tue Nov  5 19:57:18 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Tue, 5 Nov 2013 10:57:18 -0800
Subject: [R-SIG-Mac] a bug in R Mac GUI
In-Reply-To: <937883DA-1FFF-49C7-98B0-9796FAEAC095@icloud.com>
References: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>
	<AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>
	<429EAB32-2F5C-4C5F-8AD2-B50EE240FACB@gmail.com>
	<937883DA-1FFF-49C7-98B0-9796FAEAC095@icloud.com>
Message-ID: <36144D7F-D596-4EFB-A410-C47548A9F03C@gmail.com>

I have made a youtube video to explain the bug.
http://www.youtube.com/watch?v=-9Qtjq7ratE


On Nov 5, 2013, at 10:15 AM, Robert J Goedman <goedman at icloud.com> wrote:

> Hi Simon and Randy,
> 
> Randy, what do you mean with 'I have a history'? How did you create your example? I can't reproduce the problem (but I'm on R-devel and compile everything locally, including R.app). 
> 
> That would indeed be pretty serious as most of my source files contain comments as in your example.
> 
> Simon, I'm not 100% sure either (h?, it was 10 years ago!), but I think we decided to stay as close as possible to the behavior of the Carbon version of R.app, although I believe I opted for removing comment-only lines. Of course, that's just a decision. And different from Randy's example just now.
> 
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> On Nov 5, 2013, at 9:34 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
> 
>> I would rather think that it is a bug. It happens when "clean up history entries" is on but ?strip comment? is off.
>> 
>> If I have a history of two lines:
>> # this is a comment
>> a = 100
>> 
>> the current version of GUI would returns
>> this is a comment
>> a = 100
>> 
>> 
>> On Nov 5, 2013, at 5:49 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>>> I'm CCig Rob since he designed the history code so he may comment on whether it's by design or not. I dimly remember that this was intended, but I'm not 100% sure.
>>> 
>>> Thanks,
>>> Simon
>>> 
>>> 
>>> Begin forwarded message:
>>> 
>>>> From: Randy Lai <randy.cs.lai at gmail.com>
>>>> Subject: [R-SIG-Mac] a bug in R Mac GUI
>>>> Date: November 2, 2013 at 12:55:51 AM EDT
>>>> To: r-sig-mac at r-project.org
>>>> 
>>>> Hi guys,
>>>> 
>>>> I have fixed a bug in R Mac GUI that the comment symbol # is trimmed when cleanup history entries is checked.
>>>> This only works for R 3.0.x for Mac.
>>>> 
>>>> A complied version can be found in the following link.
>>>> 
>>>> the fix: https://github.com/randy3k/R-Mac-GUI/commit/d8d387236b208d49b3cda9a3d82ca72e70b40110
>>>> the binary: https://github.com/randy3k/R-Mac-GUI/releases
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>> 
> 


From szehnder at uni-bonn.de  Tue Nov  5 20:11:26 2013
From: szehnder at uni-bonn.de (Simon Zehnder)
Date: Tue, 5 Nov 2013 20:11:26 +0100
Subject: [R-SIG-Mac] Need for OpenMP
Message-ID: <4A4F3506-DEBD-4AD9-85E9-8CC96A0907AD@uni-bonn.de>

Dear Mac-Users, 

I upgraded to Mavericks - which I consider now as a bad mistake. Instead I should have waited until everything gets stable. 

However, I need to use OpenMP in some R packages. clang does not support OpenMP yet and for the Intel OpenMP Runtime suite I need the intel compiler. Is there a solution that can be considered relatively stable (I never use the R.app - only bash). 

Best
Simon


From randy.cs.lai at gmail.com  Tue Nov  5 20:21:13 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Tue, 5 Nov 2013 11:21:13 -0800
Subject: [R-SIG-Mac] Need for OpenMP
In-Reply-To: <4A4F3506-DEBD-4AD9-85E9-8CC96A0907AD@uni-bonn.de>
References: <4A4F3506-DEBD-4AD9-85E9-8CC96A0907AD@uni-bonn.de>
Message-ID: <7E965571-6D51-4A14-AC70-53634FD4EA31@gmail.com>

I had the same problems too, I managed to handle this by changing to gnu gcc.
See http://rtalks.net/archives/210

On Nov 5, 2013, at 11:11 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:

> Dear Mac-Users, 
> 
> I upgraded to Mavericks - which I consider now as a bad mistake. Instead I should have waited until everything gets stable. 
> 
> However, I need to use OpenMP in some R packages. clang does not support OpenMP yet and for the Intel OpenMP Runtime suite I need the intel compiler. Is there a solution that can be considered relatively stable (I never use the R.app - only bash). 
> 
> Best
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From goedman at icloud.com  Tue Nov  5 20:35:38 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Tue, 05 Nov 2013 11:35:38 -0800
Subject: [R-SIG-Mac] a bug in R Mac GUI
In-Reply-To: <36144D7F-D596-4EFB-A410-C47548A9F03C@gmail.com>
References: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>
	<AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>
	<429EAB32-2F5C-4C5F-8AD2-B50EE240FACB@gmail.com>
	<937883DA-1FFF-49C7-98B0-9796FAEAC095@icloud.com>
	<36144D7F-D596-4EFB-A410-C47548A9F03C@gmail.com>
Message-ID: <A1EADB20-BF30-4DBC-B79C-07F1F48FEE57@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131105/00c560e8/attachment.pl>

From szehnder at uni-bonn.de  Tue Nov  5 20:52:14 2013
From: szehnder at uni-bonn.de (Simon Zehnder)
Date: Tue, 5 Nov 2013 20:52:14 +0100
Subject: [R-SIG-Mac] Need for OpenMP
In-Reply-To: <7E965571-6D51-4A14-AC70-53634FD4EA31@gmail.com>
References: <4A4F3506-DEBD-4AD9-85E9-8CC96A0907AD@uni-bonn.de>
	<7E965571-6D51-4A14-AC70-53634FD4EA31@gmail.com>
Message-ID: <BDCB4466-1D6C-41AC-8CCE-BD4C8371D273@uni-bonn.de>

Randy,

thanks for the link! I gonna try it out!

Best

Simon

On 05 Nov 2013, at 20:21, Randy Lai <randy.cs.lai at gmail.com> wrote:

> I had the same problems too, I managed to handle this by changing to gnu gcc.
> See http://rtalks.net/archives/210
> 
> On Nov 5, 2013, at 11:11 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
> 
>> Dear Mac-Users, 
>> 
>> I upgraded to Mavericks - which I consider now as a bad mistake. Instead I should have waited until everything gets stable. 
>> 
>> However, I need to use OpenMP in some R packages. clang does not support OpenMP yet and for the Intel OpenMP Runtime suite I need the intel compiler. Is there a solution that can be considered relatively stable (I never use the R.app - only bash). 
>> 
>> Best
>> Simon
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From randy.cs.lai at gmail.com  Tue Nov  5 22:12:26 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Tue, 5 Nov 2013 13:12:26 -0800
Subject: [R-SIG-Mac] a bug in R Mac GUI
In-Reply-To: <A1EADB20-BF30-4DBC-B79C-07F1F48FEE57@icloud.com>
References: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>
	<AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>
	<429EAB32-2F5C-4C5F-8AD2-B50EE240FACB@gmail.com>
	<937883DA-1FFF-49C7-98B0-9796FAEAC095@icloud.com>
	<36144D7F-D596-4EFB-A410-C47548A9F03C@gmail.com>
	<A1EADB20-BF30-4DBC-B79C-07F1F48FEE57@icloud.com>
Message-ID: <44D6C354-E43A-4070-BC68-F8A8B476DFDE@gmail.com>

I am using Apple LLVM version 5.0 (clang-500.2.79).


On Nov 5, 2013, at 11:35 AM, Robert J Goedman <goedman at icloud.com> wrote:

> HI Randy,
> 
> Got it, clearly a bug. Not sure why this was never before reported/noticed. Thanks!
> 
> Simon, I've committed Randy's patch with one change (not sure if the 'auto' types in the NSString (TrimmingAdditions) category will work on all systems, so reverted back to the old fashioned way). 
> 
> Which compiler are you using Randy? In fact if I use your versions of the 2 for loops, it still shows the problem and flags both statements for results (location, length) not being used.
> 
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> 
> On Nov 5, 2013, at 10:57 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
> 
>> I have made a youtube video to explain the bug.
>> http://www.youtube.com/watch?v=-9Qtjq7ratE
>> 
>> 
>> On Nov 5, 2013, at 10:15 AM, Robert J Goedman <goedman at icloud.com> wrote:
>> 
>>> Hi Simon and Randy,
>>> 
>>> Randy, what do you mean with 'I have a history'? How did you create your example? I can't reproduce the problem (but I'm on R-devel and compile everything locally, including R.app). 
>>> 
>>> That would indeed be pretty serious as most of my source files contain comments as in your example.
>>> 
>>> Simon, I'm not 100% sure either (h?, it was 10 years ago!), but I think we decided to stay as close as possible to the behavior of the Carbon version of R.app, although I believe I opted for removing comment-only lines. Of course, that's just a decision. And different from Randy's example just now.
>>> 
>>> Rob J. Goedman
>>> goedman at icloud.com
>>> 
>>> 
>>> 
>>> On Nov 5, 2013, at 9:34 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>>> 
>>>> I would rather think that it is a bug. It happens when "clean up history entries" is on but ?strip comment? is off.
>>>> 
>>>> If I have a history of two lines:
>>>> # this is a comment
>>>> a = 100
>>>> 
>>>> the current version of GUI would returns
>>>> this is a comment
>>>> a = 100
>>>> 
>>>> 
>>>> On Nov 5, 2013, at 5:49 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>> 
>>>>> I'm CCig Rob since he designed the history code so he may comment on whether it's by design or not. I dimly remember that this was intended, but I'm not 100% sure.
>>>>> 
>>>>> Thanks,
>>>>> Simon
>>>>> 
>>>>> 
>>>>> Begin forwarded message:
>>>>> 
>>>>>> From: Randy Lai <randy.cs.lai at gmail.com>
>>>>>> Subject: [R-SIG-Mac] a bug in R Mac GUI
>>>>>> Date: November 2, 2013 at 12:55:51 AM EDT
>>>>>> To: r-sig-mac at r-project.org
>>>>>> 
>>>>>> Hi guys,
>>>>>> 
>>>>>> I have fixed a bug in R Mac GUI that the comment symbol # is trimmed when cleanup history entries is checked.
>>>>>> This only works for R 3.0.x for Mac.
>>>>>> 
>>>>>> A complied version can be found in the following link.
>>>>>> 
>>>>>> the fix: https://github.com/randy3k/R-Mac-GUI/commit/d8d387236b208d49b3cda9a3d82ca72e70b40110
>>>>>> the binary: https://github.com/randy3k/R-Mac-GUI/releases
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>> 
>>>> 
>>> 
>> 
> 


From randy.cs.lai at gmail.com  Tue Nov  5 22:19:19 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Tue, 5 Nov 2013 13:19:19 -0800
Subject: [R-SIG-Mac] a bug in R Mac GUI
In-Reply-To: <44D6C354-E43A-4070-BC68-F8A8B476DFDE@gmail.com>
References: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>
	<AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>
	<429EAB32-2F5C-4C5F-8AD2-B50EE240FACB@gmail.com>
	<937883DA-1FFF-49C7-98B0-9796FAEAC095@icloud.com>
	<36144D7F-D596-4EFB-A410-C47548A9F03C@gmail.com>
	<A1EADB20-BF30-4DBC-B79C-07F1F48FEE57@icloud.com>
	<44D6C354-E43A-4070-BC68-F8A8B476DFDE@gmail.com>
Message-ID: <9DDE4A4A-93E0-47F6-8D78-DCD388A2F03E@gmail.com>

Actually, I get the warnings ?Expression result unused? and I don?t understand why there are such flags.

On Nov 5, 2013, at 1:12 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:

> I am using Apple LLVM version 5.0 (clang-500.2.79).
> 
> 
> On Nov 5, 2013, at 11:35 AM, Robert J Goedman <goedman at icloud.com> wrote:
> 
>> HI Randy,
>> 
>> Got it, clearly a bug. Not sure why this was never before reported/noticed. Thanks!
>> 
>> Simon, I've committed Randy's patch with one change (not sure if the 'auto' types in the NSString (TrimmingAdditions) category will work on all systems, so reverted back to the old fashioned way). 
>> 
>> Which compiler are you using Randy? In fact if I use your versions of the 2 for loops, it still shows the problem and flags both statements for results (location, length) not being used.
>> 
>> Rob J. Goedman
>> goedman at icloud.com
>> 
>> 
>> 
>> 
>> On Nov 5, 2013, at 10:57 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>> 
>>> I have made a youtube video to explain the bug.
>>> http://www.youtube.com/watch?v=-9Qtjq7ratE
>>> 
>>> 
>>> On Nov 5, 2013, at 10:15 AM, Robert J Goedman <goedman at icloud.com> wrote:
>>> 
>>>> Hi Simon and Randy,
>>>> 
>>>> Randy, what do you mean with 'I have a history'? How did you create your example? I can't reproduce the problem (but I'm on R-devel and compile everything locally, including R.app). 
>>>> 
>>>> That would indeed be pretty serious as most of my source files contain comments as in your example.
>>>> 
>>>> Simon, I'm not 100% sure either (h?, it was 10 years ago!), but I think we decided to stay as close as possible to the behavior of the Carbon version of R.app, although I believe I opted for removing comment-only lines. Of course, that's just a decision. And different from Randy's example just now.
>>>> 
>>>> Rob J. Goedman
>>>> goedman at icloud.com
>>>> 
>>>> 
>>>> 
>>>> On Nov 5, 2013, at 9:34 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>>>> 
>>>>> I would rather think that it is a bug. It happens when "clean up history entries" is on but ?strip comment? is off.
>>>>> 
>>>>> If I have a history of two lines:
>>>>> # this is a comment
>>>>> a = 100
>>>>> 
>>>>> the current version of GUI would returns
>>>>> this is a comment
>>>>> a = 100
>>>>> 
>>>>> 
>>>>> On Nov 5, 2013, at 5:49 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>>> 
>>>>>> I'm CCig Rob since he designed the history code so he may comment on whether it's by design or not. I dimly remember that this was intended, but I'm not 100% sure.
>>>>>> 
>>>>>> Thanks,
>>>>>> Simon
>>>>>> 
>>>>>> 
>>>>>> Begin forwarded message:
>>>>>> 
>>>>>>> From: Randy Lai <randy.cs.lai at gmail.com>
>>>>>>> Subject: [R-SIG-Mac] a bug in R Mac GUI
>>>>>>> Date: November 2, 2013 at 12:55:51 AM EDT
>>>>>>> To: r-sig-mac at r-project.org
>>>>>>> 
>>>>>>> Hi guys,
>>>>>>> 
>>>>>>> I have fixed a bug in R Mac GUI that the comment symbol # is trimmed when cleanup history entries is checked.
>>>>>>> This only works for R 3.0.x for Mac.
>>>>>>> 
>>>>>>> A complied version can be found in the following link.
>>>>>>> 
>>>>>>> the fix: https://github.com/randy3k/R-Mac-GUI/commit/d8d387236b208d49b3cda9a3d82ca72e70b40110
>>>>>>> the binary: https://github.com/randy3k/R-Mac-GUI/releases
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>> 
>>>>>> 
>>>>> 
>>>> 
>>> 
>> 
> 


From randy.cs.lai at gmail.com  Tue Nov  5 22:36:51 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Tue, 5 Nov 2013 13:36:51 -0800
Subject: [R-SIG-Mac] a bug in R Mac GUI
In-Reply-To: <9DDE4A4A-93E0-47F6-8D78-DCD388A2F03E@gmail.com>
References: <031CC4A1-07C5-450F-834C-3D3ED4BC2B52@gmail.com>
	<AD124DA3-163D-4B67-A6B5-65A2DA01FDC1@r-project.org>
	<429EAB32-2F5C-4C5F-8AD2-B50EE240FACB@gmail.com>
	<937883DA-1FFF-49C7-98B0-9796FAEAC095@icloud.com>
	<36144D7F-D596-4EFB-A410-C47548A9F03C@gmail.com>
	<A1EADB20-BF30-4DBC-B79C-07F1F48FEE57@icloud.com>
	<44D6C354-E43A-4070-BC68-F8A8B476DFDE@gmail.com>
	<9DDE4A4A-93E0-47F6-8D78-DCD388A2F03E@gmail.com>
Message-ID: <5F0CFDAB-B96F-4749-972F-245F4ECBA066@gmail.com>

Well, I guess I know what it meant.

We should ignore the initialization part of the for loop, i.e., to use

    for (; location < length; location++) {

and 

    for (; length > 0; length--) {


Actually, there is an other minor bug.
When both ?clean up history entries? and ?strip comment? are off, an new line symbol is added to every history.



On Nov 5, 2013, at 1:19 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:

> Actually, I get the warnings ?Expression result unused? and I don?t understand why there are such flags.
> 
> On Nov 5, 2013, at 1:12 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:
> 
>> I am using Apple LLVM version 5.0 (clang-500.2.79).
>> 
>> 
>> On Nov 5, 2013, at 11:35 AM, Robert J Goedman <goedman at icloud.com> wrote:
>> 
>>> HI Randy,
>>> 
>>> Got it, clearly a bug. Not sure why this was never before reported/noticed. Thanks!
>>> 
>>> Simon, I've committed Randy's patch with one change (not sure if the 'auto' types in the NSString (TrimmingAdditions) category will work on all systems, so reverted back to the old fashioned way). 
>>> 
>>> Which compiler are you using Randy? In fact if I use your versions of the 2 for loops, it still shows the problem and flags both statements for results (location, length) not being used.
>>> 
>>> Rob J. Goedman
>>> goedman at icloud.com
>>> 
>>> 
>>> 
>>> 
>>> On Nov 5, 2013, at 10:57 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>>> 
>>>> I have made a youtube video to explain the bug.
>>>> http://www.youtube.com/watch?v=-9Qtjq7ratE
>>>> 
>>>> 
>>>> On Nov 5, 2013, at 10:15 AM, Robert J Goedman <goedman at icloud.com> wrote:
>>>> 
>>>>> Hi Simon and Randy,
>>>>> 
>>>>> Randy, what do you mean with 'I have a history'? How did you create your example? I can't reproduce the problem (but I'm on R-devel and compile everything locally, including R.app). 
>>>>> 
>>>>> That would indeed be pretty serious as most of my source files contain comments as in your example.
>>>>> 
>>>>> Simon, I'm not 100% sure either (h?, it was 10 years ago!), but I think we decided to stay as close as possible to the behavior of the Carbon version of R.app, although I believe I opted for removing comment-only lines. Of course, that's just a decision. And different from Randy's example just now.
>>>>> 
>>>>> Rob J. Goedman
>>>>> goedman at icloud.com
>>>>> 
>>>>> 
>>>>> 
>>>>> On Nov 5, 2013, at 9:34 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>>>>> 
>>>>>> I would rather think that it is a bug. It happens when "clean up history entries" is on but ?strip comment? is off.
>>>>>> 
>>>>>> If I have a history of two lines:
>>>>>> # this is a comment
>>>>>> a = 100
>>>>>> 
>>>>>> the current version of GUI would returns
>>>>>> this is a comment
>>>>>> a = 100
>>>>>> 
>>>>>> 
>>>>>> On Nov 5, 2013, at 5:49 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>>>> 
>>>>>>> I'm CCig Rob since he designed the history code so he may comment on whether it's by design or not. I dimly remember that this was intended, but I'm not 100% sure.
>>>>>>> 
>>>>>>> Thanks,
>>>>>>> Simon
>>>>>>> 
>>>>>>> 
>>>>>>> Begin forwarded message:
>>>>>>> 
>>>>>>>> From: Randy Lai <randy.cs.lai at gmail.com>
>>>>>>>> Subject: [R-SIG-Mac] a bug in R Mac GUI
>>>>>>>> Date: November 2, 2013 at 12:55:51 AM EDT
>>>>>>>> To: r-sig-mac at r-project.org
>>>>>>>> 
>>>>>>>> Hi guys,
>>>>>>>> 
>>>>>>>> I have fixed a bug in R Mac GUI that the comment symbol # is trimmed when cleanup history entries is checked.
>>>>>>>> This only works for R 3.0.x for Mac.
>>>>>>>> 
>>>>>>>> A complied version can be found in the following link.
>>>>>>>> 
>>>>>>>> the fix: https://github.com/randy3k/R-Mac-GUI/commit/d8d387236b208d49b3cda9a3d82ca72e70b40110
>>>>>>>> the binary: https://github.com/randy3k/R-Mac-GUI/releases
>>>>>>>> 
>>>>>>>> _______________________________________________
>>>>>>>> R-SIG-Mac mailing list
>>>>>>>> R-SIG-Mac at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>> 
>>>>>>> 
>>>>>> 
>>>>> 
>>>> 
>>> 
>> 
> 


From goedman at icloud.com  Wed Nov  6 01:13:30 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Tue, 05 Nov 2013 16:13:30 -0800
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>
	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
Message-ID: <8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131105/23e0a14d/attachment.pl>

From jeroen.ooms at stat.ucla.edu  Wed Nov  6 18:50:38 2013
From: jeroen.ooms at stat.ucla.edu (Jeroen Ooms)
Date: Wed, 6 Nov 2013 09:50:38 -0800
Subject: [R-SIG-Mac] Forking issues in Mavericks
In-Reply-To: <94ECE4FE-970E-42DE-97CA-8D1B57874839@r-project.org>
References: <CABFfbXskwrZMs2Uk9eftHz9TGtoCnVmm_n16zaQT07X4a5ACyQ@mail.gmail.com>
	<C8261E81-376E-4618-B935-FACBAD2B22C9@r-project.org>
	<CABFfbXs9e1oG7N2xE2daZTfTROGykO5_YfG26FUdE6cS8gQUBQ@mail.gmail.com>
	<3B9F65A1-41A7-45CD-BAC6-2CFF882CC35E@r-project.org>
	<CABFfbXviQzgnd5kgvDoy4eemaSxRqmvOjaR6CWP1ka9k=6zcLg@mail.gmail.com>
	<94ECE4FE-970E-42DE-97CA-8D1B57874839@r-project.org>
Message-ID: <CABFfbXts1Ti7fR1G9dUc-=FBkmma8cnZLbBOrhJB9Mccv59DoQ@mail.gmail.com>

On Thu, Oct 31, 2013 at 6:22 AM, Simon Urbanek
<simon.urbanek at r-project.org> wrote:
> I suspect that there is more involved in your case, so we can take it offline if you want to provide the complete example of your issue.

FYI, the issue is posted here:
https://github.com/rstudio/httpuv/issues/22. Basically it is exactly
the same problem as with R.app: httpuv links in CF, so therefore
forking becomes unsafe afterwards.


From bhive01 at gmail.com  Wed Nov  6 19:12:04 2013
From: bhive01 at gmail.com (Brandon Hurr)
Date: Wed, 6 Nov 2013 18:12:04 +0000
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>
	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>
Message-ID: <CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131106/bf129553/attachment.pl>

From goedman at icloud.com  Thu Nov  7 01:03:57 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Wed, 06 Nov 2013 16:03:57 -0800
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>
	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>
	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
Message-ID: <A7E61B7B-A3BD-4DF7-B55B-34818A11A5D5@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131106/a60cc4d7/attachment.pl>

From john.magnotti at gmail.com  Thu Nov  7 02:17:37 2013
From: john.magnotti at gmail.com (John Magnotti)
Date: Wed, 6 Nov 2013 17:17:37 -0800
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>
	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>
	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
Message-ID: <CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>

I removed my current R.app and installed the one at:
http://r.research.att.com/#GUI
R-3.0-branch-snowleopard-signed.pkg

but I still get an immediate crash when I 1) open the preferences
window and 2) click any of the icons in the main "Show All" screen
(but not the tabs)

I also noticed that switching away from either the Color or the Syntax
tab briefly flashes (open then close) the color wheel selection dialog

> sessionInfo()
R version 3.0.2 Patched (2013-11-04 r64155)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


Is there any other specific information that would help?

Thanks,

John

On Wed, Nov 6, 2013 at 10:12 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
> Robert,
>
> I never could reproduce what Brian, John or Ranier were seeing with my
> install (downloaded from http://r.research.att.com/ .
>
> Perhaps they could chime back in and give you more details.
>
> I'm now running Mavericks and still cannot replicate.
> R version 3.0.2 (2013-09-25)
> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> Brandon
>
>
> On Wed, Nov 6, 2013 at 12:13 AM, Robert J Goedman <goedman at icloud.com>wrote:
>
>> Brandon,
>>
>> Do you still see this problem?
>>
>> Are you using Simon's build?
>>
>> Regards,
>>  Rob J. Goedman
>> goedman at icloud.com
>>
>>
>> On Jan 2, 2013, at 3:28 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
>> wrote:
>>
>> On 01/01/2013 17:48, Robert J Goedman wrote:
>>
>> Thanks for taking a look. I'll dig a bit further after getting back home
>> tomorrow. It only happens through 'Apple-,' and is then not limited to
>> just the Startup preferences (contrary to what I thought earlier).
>>
>>
>> There is a bug report, PR#15017, related to this that we also have not
>> been able to reproduce.
>>
>>
>>
>> Rob J. Goedman
>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>
>>
>>
>>
>> On Jan 1, 2013, at 10:01 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk
>> <mailto:ripley at stats.ox.ac.uk <ripley at stats.ox.ac.uk>>> wrote:
>>
>> Sorry, cannot reproduce (with Simon's build or mine, on Lion).
>>
>> Brian
>>
>> On 31/12/2012 19:37, Robert J Goedman wrote:
>>
>> Simon & Brian,
>>
>> Surely this is not high on your minds today, but I did notice an
>> issue with R.app.
>>
>> Using below versions of R-3.0 and the Lion64 version of R.app I
>> noticed that by immediately invoking the Startup preferences. e.g. by
>> Command/Apple-, R.app will segfault:
>>
>> *** caught segfault ***
>> address 0x10121d000, cause 'memory not mapped'
>> ...
>>
>> Above route seems to always create the crash. I've seen a few other
>> occurrences, always with the Startup preferences screen not being
>> mapped, but less reproducible. Same behavior in Simon's build as in
>> my own build of R.app.
>>
>> A reasonable work around is to get there through the Set Colors icon.
>> I'm on OSX8.3 preview 3 and using Xcode 4.6 dp4. And using the CRAN
>> version of R, did not yet build R myself as outlined in the Install file.
>>
>> Happy New Year, regards,
>> Rob J. Goedman
>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>
>>
>> ------------ my own build----------------------------
>>
>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>> Consequences"
>> Copyright (C) 2012 The R Foundation for Statistical Computing
>> ISBN 3-900051-07-0
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>  Natural language support but running in an English locale
>>
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>>
>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>
>> [Workspace restored from /Users/rob/Projects/.RData]
>> [History restored from /Users/rob/Projects/.Rapp.history]
>>
>> sessionInfo()
>>
>> R Under development (unstable) (2012-12-30 r61489)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>>
>> -------------R.app from
>> Simon---------------------------------------------
>>
>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>> Consequences"
>> Copyright (C) 2012 The R Foundation for Statistical Computing
>> ISBN 3-900051-07-0
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>  Natural language support but running in an English locale
>>
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>>
>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>
>> [Workspace restored from /Users/rob/Projects/.RData]
>> [History restored from /Users/rob/Projects/.Rapp.history]
>>
>> sessionInfo()
>>
>> R Under development (unstable) (2012-12-30 r61489)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>>
>>
>> --
>> Brian D. Ripley, ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk<ripley at stats.ox.ac.uk>
>> >
>> Professor of Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>>
>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>>
>>
>>
>> On Oct 2, 2013, at 6:09 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>>
>> I cannot reproduce on my mac mini (2011). OS X 10.8.5.
>>
>> R version 3.0.2 (2013-09-25)
>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>>
>> On Wed, Oct 2, 2013 at 2:03 PM, John Magnotti <john.magnotti at gmail.com
>> >wrote:
>>
>> Going to the preferences screen in R.app (Command + , or
>> R->preferences) and selecting any of the icons causes R to crash with
>> a segfault. If I click any the tabs at the top of the preferences
>> window R doesn't crash, but if I go back to the  "show all" tab and
>> choose an option it causes an immediate failure.
>>
>> I'm running OS X 10.8.5, sessionInfo pasted below
>>
>> Thoughts?
>>
>> John
>>
>>
>> sessionInfo()
>>
>> R version 3.0.2 (2013-09-25)
>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>> [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From bhive01 at gmail.com  Thu Nov  7 10:07:33 2013
From: bhive01 at gmail.com (Brandon Hurr)
Date: Thu, 7 Nov 2013 09:07:33 +0000
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>
	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>
	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
	<CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
Message-ID: <CAG2OMvv_x2=nzRi=MuTbNLyRG3zyD2G9tNTnOTmVa9Tg5qxzvg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131107/cc1885d3/attachment.pl>

From Rainer at krugs.de  Thu Nov  7 10:19:35 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Thu, 07 Nov 2013 10:19:35 +0100
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
	<CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
Message-ID: <527B5B27.4050903@krugs.de>

I have to confirm both, the crash and the flashing of the colour wheel.


> sessionInfo()
R version 3.0.2 (2013-09-25)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base
> version
               _
platform       x86_64-apple-darwin10.8.0
arch           x86_64
os             darwin10.8.0
system         x86_64, darwin10.8.0
status
major          3
minor          0.2
year           2013
month          09
day            25
svn rev        63987
language       R
version.string R version 3.0.2 (2013-09-25)
nickname       Frisbee Sailing
>

Cheers,

Rainer



On 11/07/13, 02:17 , John Magnotti wrote:
> I removed my current R.app and installed the one at:
> http://r.research.att.com/#GUI
> R-3.0-branch-snowleopard-signed.pkg
> 
> but I still get an immediate crash when I 1) open the preferences
> window and 2) click any of the icons in the main "Show All" screen
> (but not the tabs)
> 
> I also noticed that switching away from either the Color or the Syntax
> tab briefly flashes (open then close) the color wheel selection dialog
> 
>> sessionInfo()
> R version 3.0.2 Patched (2013-11-04 r64155)
> Platform: x86_64-apple-darwin10.8.0 (64-bit)
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> 
> Is there any other specific information that would help?
> 
> Thanks,
> 
> John
> 
> On Wed, Nov 6, 2013 at 10:12 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>> Robert,
>>
>> I never could reproduce what Brian, John or Ranier were seeing with my
>> install (downloaded from http://r.research.att.com/ .
>>
>> Perhaps they could chime back in and give you more details.
>>
>> I'm now running Mavericks and still cannot replicate.
>> R version 3.0.2 (2013-09-25)
>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> Brandon
>>
>>
>> On Wed, Nov 6, 2013 at 12:13 AM, Robert J Goedman <goedman at icloud.com>wrote:
>>
>>> Brandon,
>>>
>>> Do you still see this problem?
>>>
>>> Are you using Simon's build?
>>>
>>> Regards,
>>>  Rob J. Goedman
>>> goedman at icloud.com
>>>
>>>
>>> On Jan 2, 2013, at 3:28 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>> wrote:
>>>
>>> On 01/01/2013 17:48, Robert J Goedman wrote:
>>>
>>> Thanks for taking a look. I'll dig a bit further after getting back home
>>> tomorrow. It only happens through 'Apple-,' and is then not limited to
>>> just the Startup preferences (contrary to what I thought earlier).
>>>
>>>
>>> There is a bug report, PR#15017, related to this that we also have not
>>> been able to reproduce.
>>>
>>>
>>>
>>> Rob J. Goedman
>>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>>
>>>
>>>
>>>
>>> On Jan 1, 2013, at 10:01 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk
>>> <mailto:ripley at stats.ox.ac.uk <ripley at stats.ox.ac.uk>>> wrote:
>>>
>>> Sorry, cannot reproduce (with Simon's build or mine, on Lion).
>>>
>>> Brian
>>>
>>> On 31/12/2012 19:37, Robert J Goedman wrote:
>>>
>>> Simon & Brian,
>>>
>>> Surely this is not high on your minds today, but I did notice an
>>> issue with R.app.
>>>
>>> Using below versions of R-3.0 and the Lion64 version of R.app I
>>> noticed that by immediately invoking the Startup preferences. e.g. by
>>> Command/Apple-, R.app will segfault:
>>>
>>> *** caught segfault ***
>>> address 0x10121d000, cause 'memory not mapped'
>>> ...
>>>
>>> Above route seems to always create the crash. I've seen a few other
>>> occurrences, always with the Startup preferences screen not being
>>> mapped, but less reproducible. Same behavior in Simon's build as in
>>> my own build of R.app.
>>>
>>> A reasonable work around is to get there through the Set Colors icon.
>>> I'm on OSX8.3 preview 3 and using Xcode 4.6 dp4. And using the CRAN
>>> version of R, did not yet build R myself as outlined in the Install file.
>>>
>>> Happy New Year, regards,
>>> Rob J. Goedman
>>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>>
>>>
>>> ------------ my own build----------------------------
>>>
>>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>>> Consequences"
>>> Copyright (C) 2012 The R Foundation for Statistical Computing
>>> ISBN 3-900051-07-0
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>>
>>>  Natural language support but running in an English locale
>>>
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>>
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>>
>>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>>
>>> [Workspace restored from /Users/rob/Projects/.RData]
>>> [History restored from /Users/rob/Projects/.Rapp.history]
>>>
>>> sessionInfo()
>>>
>>> R Under development (unstable) (2012-12-30 r61489)
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>> -------------R.app from
>>> Simon---------------------------------------------
>>>
>>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>>> Consequences"
>>> Copyright (C) 2012 The R Foundation for Statistical Computing
>>> ISBN 3-900051-07-0
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>>
>>>  Natural language support but running in an English locale
>>>
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>>
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>>
>>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>>
>>> [Workspace restored from /Users/rob/Projects/.RData]
>>> [History restored from /Users/rob/Projects/.Rapp.history]
>>>
>>> sessionInfo()
>>>
>>> R Under development (unstable) (2012-12-30 r61489)
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>>
>>> --
>>> Brian D. Ripley, ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk<ripley at stats.ox.ac.uk>
>>>>
>>> Professor of Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>>
>>>
>>>
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>>
>>>
>>>
>>> On Oct 2, 2013, at 6:09 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>>>
>>> I cannot reproduce on my mac mini (2011). OS X 10.8.5.
>>>
>>> R version 3.0.2 (2013-09-25)
>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>> On Wed, Oct 2, 2013 at 2:03 PM, John Magnotti <john.magnotti at gmail.com
>>>> wrote:
>>>
>>> Going to the preferences screen in R.app (Command + , or
>>> R->preferences) and selecting any of the icons causes R to crash with
>>> a segfault. If I click any the tabs at the top of the preferences
>>> window R doesn't crash, but if I go back to the  "show all" tab and
>>> choose an option it causes an immediate failure.
>>>
>>> I'm running OS X 10.8.5, sessionInfo pasted below
>>>
>>> Thoughts?
>>>
>>> John
>>>
>>>
>>> sessionInfo()
>>>
>>> R version 3.0.2 (2013-09-25)
>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>> [[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>>
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
Rainer M. Krug

email: RMKrug<at>gmail<dot>com


From Rainer at krugs.de  Thu Nov  7 10:19:35 2013
From: Rainer at krugs.de (Rainer M Krug)
Date: Thu, 7 Nov 2013 10:19:35 +0100
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
	<CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
Message-ID: <527B5B27.4050903@krugs.de>

I have to confirm both, the crash and the flashing of the colour wheel.


> sessionInfo()
R version 3.0.2 (2013-09-25)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base
> version
               _
platform       x86_64-apple-darwin10.8.0
arch           x86_64
os             darwin10.8.0
system         x86_64, darwin10.8.0
status
major          3
minor          0.2
year           2013
month          09
day            25
svn rev        63987
language       R
version.string R version 3.0.2 (2013-09-25)
nickname       Frisbee Sailing
>

Cheers,

Rainer



On 11/07/13, 02:17 , John Magnotti wrote:
> I removed my current R.app and installed the one at:
> http://r.research.att.com/#GUI
> R-3.0-branch-snowleopard-signed.pkg
> 
> but I still get an immediate crash when I 1) open the preferences
> window and 2) click any of the icons in the main "Show All" screen
> (but not the tabs)
> 
> I also noticed that switching away from either the Color or the Syntax
> tab briefly flashes (open then close) the color wheel selection dialog
> 
>> sessionInfo()
> R version 3.0.2 Patched (2013-11-04 r64155)
> Platform: x86_64-apple-darwin10.8.0 (64-bit)
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> 
> Is there any other specific information that would help?
> 
> Thanks,
> 
> John
> 
> On Wed, Nov 6, 2013 at 10:12 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>> Robert,
>>
>> I never could reproduce what Brian, John or Ranier were seeing with my
>> install (downloaded from http://r.research.att.com/ .
>>
>> Perhaps they could chime back in and give you more details.
>>
>> I'm now running Mavericks and still cannot replicate.
>> R version 3.0.2 (2013-09-25)
>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> Brandon
>>
>>
>> On Wed, Nov 6, 2013 at 12:13 AM, Robert J Goedman <goedman at icloud.com>wrote:
>>
>>> Brandon,
>>>
>>> Do you still see this problem?
>>>
>>> Are you using Simon's build?
>>>
>>> Regards,
>>>  Rob J. Goedman
>>> goedman at icloud.com
>>>
>>>
>>> On Jan 2, 2013, at 3:28 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>> wrote:
>>>
>>> On 01/01/2013 17:48, Robert J Goedman wrote:
>>>
>>> Thanks for taking a look. I'll dig a bit further after getting back home
>>> tomorrow. It only happens through 'Apple-,' and is then not limited to
>>> just the Startup preferences (contrary to what I thought earlier).
>>>
>>>
>>> There is a bug report, PR#15017, related to this that we also have not
>>> been able to reproduce.
>>>
>>>
>>>
>>> Rob J. Goedman
>>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>>
>>>
>>>
>>>
>>> On Jan 1, 2013, at 10:01 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk
>>> <mailto:ripley at stats.ox.ac.uk <ripley at stats.ox.ac.uk>>> wrote:
>>>
>>> Sorry, cannot reproduce (with Simon's build or mine, on Lion).
>>>
>>> Brian
>>>
>>> On 31/12/2012 19:37, Robert J Goedman wrote:
>>>
>>> Simon & Brian,
>>>
>>> Surely this is not high on your minds today, but I did notice an
>>> issue with R.app.
>>>
>>> Using below versions of R-3.0 and the Lion64 version of R.app I
>>> noticed that by immediately invoking the Startup preferences. e.g. by
>>> Command/Apple-, R.app will segfault:
>>>
>>> *** caught segfault ***
>>> address 0x10121d000, cause 'memory not mapped'
>>> ...
>>>
>>> Above route seems to always create the crash. I've seen a few other
>>> occurrences, always with the Startup preferences screen not being
>>> mapped, but less reproducible. Same behavior in Simon's build as in
>>> my own build of R.app.
>>>
>>> A reasonable work around is to get there through the Set Colors icon.
>>> I'm on OSX8.3 preview 3 and using Xcode 4.6 dp4. And using the CRAN
>>> version of R, did not yet build R myself as outlined in the Install file.
>>>
>>> Happy New Year, regards,
>>> Rob J. Goedman
>>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>>
>>>
>>> ------------ my own build----------------------------
>>>
>>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>>> Consequences"
>>> Copyright (C) 2012 The R Foundation for Statistical Computing
>>> ISBN 3-900051-07-0
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>>
>>>  Natural language support but running in an English locale
>>>
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>>
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>>
>>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>>
>>> [Workspace restored from /Users/rob/Projects/.RData]
>>> [History restored from /Users/rob/Projects/.Rapp.history]
>>>
>>> sessionInfo()
>>>
>>> R Under development (unstable) (2012-12-30 r61489)
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>> -------------R.app from
>>> Simon---------------------------------------------
>>>
>>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>>> Consequences"
>>> Copyright (C) 2012 The R Foundation for Statistical Computing
>>> ISBN 3-900051-07-0
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>>
>>>  Natural language support but running in an English locale
>>>
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>>
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>>
>>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>>
>>> [Workspace restored from /Users/rob/Projects/.RData]
>>> [History restored from /Users/rob/Projects/.Rapp.history]
>>>
>>> sessionInfo()
>>>
>>> R Under development (unstable) (2012-12-30 r61489)
>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>>
>>> --
>>> Brian D. Ripley, ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk<ripley at stats.ox.ac.uk>
>>>>
>>> Professor of Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>>
>>>
>>>
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>>
>>>
>>>
>>> On Oct 2, 2013, at 6:09 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>>>
>>> I cannot reproduce on my mac mini (2011). OS X 10.8.5.
>>>
>>> R version 3.0.2 (2013-09-25)
>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>> On Wed, Oct 2, 2013 at 2:03 PM, John Magnotti <john.magnotti at gmail.com
>>>> wrote:
>>>
>>> Going to the preferences screen in R.app (Command + , or
>>> R->preferences) and selecting any of the icons causes R to crash with
>>> a segfault. If I click any the tabs at the top of the preferences
>>> window R doesn't crash, but if I go back to the  "show all" tab and
>>> choose an option it causes an immediate failure.
>>>
>>> I'm running OS X 10.8.5, sessionInfo pasted below
>>>
>>> Thoughts?
>>>
>>> John
>>>
>>>
>>> sessionInfo()
>>>
>>> R version 3.0.2 (2013-09-25)
>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>> [[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>>
>>>
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


-- 
Rainer M. Krug

email: RMKrug<at>gmail<dot>com


From szehnder at uni-bonn.de  Thu Nov  7 13:56:35 2013
From: szehnder at uni-bonn.de (Simon Zehnder)
Date: Thu, 7 Nov 2013 13:56:35 +0100
Subject: [R-SIG-Mac] Build R with Intel Compiler
Message-ID: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>

I am trying to build R with an Intel Compiler (14.0.3). Has anyone before done it and could give me a hint for the configuration? 

I am sourcing the compilervars.sh for Intel and then configure R with 

./R-3.0.2/configure OBJC="clang" --enable-R-framework=/usr/local/R/R-intel --x-includes=/usr/X11/include/ --x-libraries=/usr/X11/lib/ --enable-memory-profiling --with-blas="$MKL" --with-lapack

Further Variables are:

CFLAGS=?-O3 -ipo -openmp -xHost?
CXXFLAGS=?-O3 -ipo -openmp -xHost?
MKL=?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread?!

I get always the same error:

/opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I../../../R-3.0.2/src/extra/zlib -I../../../R-3.0.2/src/extra/bzip2 -I../../../R-3.0.2/src/extra/pcre -I../../../R-3.0.2/src/extra  -I../../../R-3.0.2/src/extra/xz/api -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/local/include -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -c ../../../R-3.0.2/src/main/Rmain.c -o Rmain.o
/opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99  -L/usr/local/lib -o R.bin Rmain.o  -L../../lib -lR
Undefined symbols for architecture x86_64:
  "___kmpc_begin", referenced from:
      _main in ipo_icc4xtjyH.o
  "___kmpc_end", referenced from:
      _main in ipo_icc4xtjyH.o
ld: symbol(s) not found for architecture x86_64

Any clue what this could be? 

Best

Simon


From simon.urbanek at r-project.org  Thu Nov  7 15:33:44 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 7 Nov 2013 09:33:44 -0500
Subject: [R-SIG-Mac] Build R with Intel Compiler
In-Reply-To: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>
References: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>
Message-ID: <1D8F41B0-F265-4F44-A3B6-366EA7244B94@r-project.org>


On Nov 7, 2013, at 7:56 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:

> I am trying to build R with an Intel Compiler (14.0.3). Has anyone before done it and could give me a hint for the configuration? 
> 
> I am sourcing the compilervars.sh for Intel and then configure R with 
> 
> ./R-3.0.2/configure OBJC="clang" --enable-R-framework=/usr/local/R/R-intel --x-includes=/usr/X11/include/ --x-libraries=/usr/X11/lib/ --enable-memory-profiling --with-blas="$MKL" --with-lapack
> 
> Further Variables are:
> 
> CFLAGS=?-O3 -ipo -openmp -xHost?
> CXXFLAGS=?-O3 -ipo -openmp -xHost?
> MKL=?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread?!
> 
> I get always the same error:
> 
> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I../../../R-3.0.2/src/extra/zlib -I../../../R-3.0.2/src/extra/bzip2 -I../../../R-3.0.2/src/extra/pcre -I../../../R-3.0.2/src/extra  -I../../../R-3.0.2/src/extra/xz/api -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/local/include -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -c ../../../R-3.0.2/src/main/Rmain.c -o Rmain.o
> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99  -L/usr/local/lib -o R.bin Rmain.o  -L../../lib -lR
> Undefined symbols for architecture x86_64:
>  "___kmpc_begin", referenced from:
>      _main in ipo_icc4xtjyH.o
>  "___kmpc_end", referenced from:
>      _main in ipo_icc4xtjyH.o
> ld: symbol(s) not found for architecture x86_64
> 
> Any clue what this could be? 
> 

The above certainly won't work, because you're missing linker flags - I'm pretty sure that you must use -openmp in the linker for it to work, I'm not sure about -ipo -- but doesn't R detect all those automatically? I don't think you should put them in manually. The actual error comes from missing libguide link flags, but they may be implicit if you fix the other problem.

Cheers,
S


From szehnder at uni-bonn.de  Thu Nov  7 19:30:20 2013
From: szehnder at uni-bonn.de (Simon Zehnder)
Date: Thu, 7 Nov 2013 19:30:20 +0100
Subject: [R-SIG-Mac] Build R with Intel Compiler
In-Reply-To: <1D8F41B0-F265-4F44-A3B6-366EA7244B94@r-project.org>
References: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>
	<1D8F41B0-F265-4F44-A3B6-366EA7244B94@r-project.org>
Message-ID: <09C1864C-29FE-4F50-8FE4-2E60A7BB86DC@uni-bonn.de>

Your and Brian?s guesses were right: the -openmp linker flag was it. It compiles now fine, though I get errors in make check-all and make install: 

Running a make check-all gives me (with and without flag -ipo)

Running examples in 'mgcv-Ex.R? failed
...
Loading required package: splines
> plot(b,pages=1)
> b<-gamm(y~s(x0,bs="tr",m=2)+s(x1,bs="ps",m=c(1,3))+
+          s(x2,bs="tr",m=3)+s(x3,bs="tr",m=2),data=dat)
> plot(b$gam,pages=1)
Warning in sqrt(rowSums((P$X %*% x$Vp[first:last, first:last, drop = FALSE]) *  :
  NaNs produced
Error in if (se && pd[[i]]$se) { : missing value where TRUE/FALSE needed
Calls: plot -> plot.gam
Execution halted

A sudo make install gives me:

/opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/X11/include/ -D__ACCELERATE__ -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -DR_HOME='"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources"' -o Rscript \
	  ../../../R-3.0.2/src/unix/Rscript.c
installing packages ...
  building HTML index ...
dyld: Library not loaded: libiomp5.dylib
  Referenced from: /Users/simonzehnder/Downloads/build/bin/exec/R
  Reason: image not found
/bin/sh: line 1: 87375 Done                    echo "utils:::make.packages.html(.Library, verbose=FALSE, docdir=\"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources/doc\")"
     87376 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES=NULL LC_ALL=C ../../bin/R --vanilla --slave > /dev/null
make[2]: *** [install] Error 133
make[1]: *** [install] Error 1
make: *** [install] Error 1

It seems that it is connected with the MKL. I have in my MKL variable ?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread. It seems that libiomp5 is not linked to correctly. 

I uploaded also my config.log to https://gist.github.com/simonsays1980/7359508 

Best

Simon

 

On 07 Nov 2013, at 15:33, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> 
> On Nov 7, 2013, at 7:56 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
> 
>> I am trying to build R with an Intel Compiler (14.0.3). Has anyone before done it and could give me a hint for the configuration? 
>> 
>> I am sourcing the compilervars.sh for Intel and then configure R with 
>> 
>> ./R-3.0.2/configure OBJC="clang" --enable-R-framework=/usr/local/R/R-intel --x-includes=/usr/X11/include/ --x-libraries=/usr/X11/lib/ --enable-memory-profiling --with-blas="$MKL" --with-lapack
>> 
>> Further Variables are:
>> 
>> CFLAGS=?-O3 -ipo -openmp -xHost?
>> CXXFLAGS=?-O3 -ipo -openmp -xHost?
>> MKL=?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread?!
>> 
>> I get always the same error:
>> 
>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I../../../R-3.0.2/src/extra/zlib -I../../../R-3.0.2/src/extra/bzip2 -I../../../R-3.0.2/src/extra/pcre -I../../../R-3.0.2/src/extra  -I../../../R-3.0.2/src/extra/xz/api -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/local/include -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -c ../../../R-3.0.2/src/main/Rmain.c -o Rmain.o
>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99  -L/usr/local/lib -o R.bin Rmain.o  -L../../lib -lR
>> Undefined symbols for architecture x86_64:
>> "___kmpc_begin", referenced from:
>>     _main in ipo_icc4xtjyH.o
>> "___kmpc_end", referenced from:
>>     _main in ipo_icc4xtjyH.o
>> ld: symbol(s) not found for architecture x86_64
>> 
>> Any clue what this could be? 
>> 
> 
> The above certainly won't work, because you're missing linker flags - I'm pretty sure that you must use -openmp in the linker for it to work, I'm not sure about -ipo -- but doesn't R detect all those automatically? I don't think you should put them in manually. The actual error comes from missing libguide link flags, but they may be implicit if you fix the other problem.
> 
> Cheers,
> S
> 


From simon.urbanek at r-project.org  Thu Nov  7 19:52:55 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 7 Nov 2013 13:52:55 -0500
Subject: [R-SIG-Mac] Build R with Intel Compiler
In-Reply-To: <09C1864C-29FE-4F50-8FE4-2E60A7BB86DC@uni-bonn.de>
References: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>
	<1D8F41B0-F265-4F44-A3B6-366EA7244B94@r-project.org>
	<09C1864C-29FE-4F50-8FE4-2E60A7BB86DC@uni-bonn.de>
Message-ID: <C1ACFB70-CC93-462E-BAC7-412CCF214196@r-project.org>


On Nov 7, 2013, at 1:30 PM, Simon Zehnder <szehnder at uni-bonn.de> wrote:

> Your and Brian?s guesses were right: the -openmp linker flag was it. It compiles now fine, though I get errors in make check-all and make install: 
> 
> Running a make check-all gives me (with and without flag -ipo)
> 
> Running examples in 'mgcv-Ex.R? failed
> ...
> Loading required package: splines
>> plot(b,pages=1)
>> b<-gamm(y~s(x0,bs="tr",m=2)+s(x1,bs="ps",m=c(1,3))+
> +          s(x2,bs="tr",m=3)+s(x3,bs="tr",m=2),data=dat)
>> plot(b$gam,pages=1)
> Warning in sqrt(rowSums((P$X %*% x$Vp[first:last, first:last, drop = FALSE]) *  :
>  NaNs produced
> Error in if (se && pd[[i]]$se) { : missing value where TRUE/FALSE needed
> Calls: plot -> plot.gam
> Execution halted
> 
> A sudo make install gives me:
> 
> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/X11/include/ -D__ACCELERATE__ -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -DR_HOME='"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources"' -o Rscript \
> 	  ../../../R-3.0.2/src/unix/Rscript.c
> installing packages ...
>  building HTML index ...
> dyld: Library not loaded: libiomp5.dylib

^^ your Intel libs (or at least libiomp5) are missing paths in the id string - probably not installed properly? You can hack around that using DYLD_FALLBACK_LIBRARY_PATH but it's better to fix the issue in libiomp5 directly.


>  Referenced from: /Users/simonzehnder/Downloads/build/bin/exec/R
>  Reason: image not found
> /bin/sh: line 1: 87375 Done                    echo "utils:::make.packages.html(.Library, verbose=FALSE, docdir=\"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources/doc\")"
>     87376 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES=NULL LC_ALL=C ../../bin/R --vanilla --slave > /dev/null
> make[2]: *** [install] Error 133
> make[1]: *** [install] Error 1
> make: *** [install] Error 1
> 
> It seems that it is connected with the MKL. I have in my MKL variable ?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread. It seems that libiomp5 is not linked to correctly. 
> 
> I uploaded also my config.log to https://gist.github.com/simonsays1980/7359508 
> 
> Best
> 
> Simon
> 
> 
> 
> On 07 Nov 2013, at 15:33, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> 
>> On Nov 7, 2013, at 7:56 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>> 
>>> I am trying to build R with an Intel Compiler (14.0.3). Has anyone before done it and could give me a hint for the configuration? 
>>> 
>>> I am sourcing the compilervars.sh for Intel and then configure R with 
>>> 
>>> ./R-3.0.2/configure OBJC="clang" --enable-R-framework=/usr/local/R/R-intel --x-includes=/usr/X11/include/ --x-libraries=/usr/X11/lib/ --enable-memory-profiling --with-blas="$MKL" --with-lapack
>>> 
>>> Further Variables are:
>>> 
>>> CFLAGS=?-O3 -ipo -openmp -xHost?
>>> CXXFLAGS=?-O3 -ipo -openmp -xHost?
>>> MKL=?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread?!
>>> 
>>> I get always the same error:
>>> 
>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I../../../R-3.0.2/src/extra/zlib -I../../../R-3.0.2/src/extra/bzip2 -I../../../R-3.0.2/src/extra/pcre -I../../../R-3.0.2/src/extra  -I../../../R-3.0.2/src/extra/xz/api -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/local/include -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -c ../../../R-3.0.2/src/main/Rmain.c -o Rmain.o
>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99  -L/usr/local/lib -o R.bin Rmain.o  -L../../lib -lR
>>> Undefined symbols for architecture x86_64:
>>> "___kmpc_begin", referenced from:
>>>    _main in ipo_icc4xtjyH.o
>>> "___kmpc_end", referenced from:
>>>    _main in ipo_icc4xtjyH.o
>>> ld: symbol(s) not found for architecture x86_64
>>> 
>>> Any clue what this could be? 
>>> 
>> 
>> The above certainly won't work, because you're missing linker flags - I'm pretty sure that you must use -openmp in the linker for it to work, I'm not sure about -ipo -- but doesn't R detect all those automatically? I don't think you should put them in manually. The actual error comes from missing libguide link flags, but they may be implicit if you fix the other problem.
>> 
>> Cheers,
>> S
>> 
> 


From paciorek at stat.berkeley.edu  Thu Nov  7 23:04:17 2013
From: paciorek at stat.berkeley.edu (Chris Paciorek)
Date: Thu, 7 Nov 2013 14:04:17 -0800
Subject: [R-SIG-Mac] using vecLib BLAS in 3.0
In-Reply-To: <CB5B76D6-73FD-4B23-8A85-10A99CBDAC67@collocations.de>
References: <CAG=M9LpuNL28-Bjyq8cW7u6gVmnC10ajK1jc_mVQQ-NQU+=-gQ@mail.gmail.com>
	<C7BE55D9-6A17-4093-9F1D-4855C699D974@r-project.org>
	<CB5B76D6-73FD-4B23-8A85-10A99CBDAC67@collocations.de>
Message-ID: <CAG=M9LqHUoTJsqi8r-FrXpMNoHgykCehP9o_PenxJhjrMf8GqQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131107/c3f526ed/attachment.pl>

From szehnder at uni-bonn.de  Fri Nov  8 10:05:03 2013
From: szehnder at uni-bonn.de (Simon Zehnder)
Date: Fri, 8 Nov 2013 10:05:03 +0100
Subject: [R-SIG-Mac] Build R with Intel Compiler
In-Reply-To: <C1ACFB70-CC93-462E-BAC7-412CCF214196@r-project.org>
References: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>
	<1D8F41B0-F265-4F44-A3B6-366EA7244B94@r-project.org>
	<09C1864C-29FE-4F50-8FE4-2E60A7BB86DC@uni-bonn.de>
	<C1ACFB70-CC93-462E-BAC7-412CCF214196@r-project.org>
Message-ID: <A5DB21A2-2A39-42CD-8800-03EE270181B1@uni-bonn.de>

Where does R in make install get its libraries/library paths from to be installed? I set DYLD_LIBRARY_PATH and libiomp5.dylib is on that path ? Is there another variable to be set (DYLD_FALLBACK_LIBRARY_PATH I want to use only, if no other possibility remains). 

Best

Simon
On 07 Nov 2013, at 19:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> 
> On Nov 7, 2013, at 1:30 PM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
> 
>> Your and Brian?s guesses were right: the -openmp linker flag was it. It compiles now fine, though I get errors in make check-all and make install: 
>> 
>> Running a make check-all gives me (with and without flag -ipo)
>> 
>> Running examples in 'mgcv-Ex.R? failed
>> ...
>> Loading required package: splines
>>> plot(b,pages=1)
>>> b<-gamm(y~s(x0,bs="tr",m=2)+s(x1,bs="ps",m=c(1,3))+
>> +          s(x2,bs="tr",m=3)+s(x3,bs="tr",m=2),data=dat)
>>> plot(b$gam,pages=1)
>> Warning in sqrt(rowSums((P$X %*% x$Vp[first:last, first:last, drop = FALSE]) *  :
>> NaNs produced
>> Error in if (se && pd[[i]]$se) { : missing value where TRUE/FALSE needed
>> Calls: plot -> plot.gam
>> Execution halted
>> 
>> A sudo make install gives me:
>> 
>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/X11/include/ -D__ACCELERATE__ -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -DR_HOME='"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources"' -o Rscript \
>> 	  ../../../R-3.0.2/src/unix/Rscript.c
>> installing packages ...
>> building HTML index ...
>> dyld: Library not loaded: libiomp5.dylib
> 
> ^^ your Intel libs (or at least libiomp5) are missing paths in the id string - probably not installed properly? You can hack around that using DYLD_FALLBACK_LIBRARY_PATH but it's better to fix the issue in libiomp5 directly.
> 
> 
>> Referenced from: /Users/simonzehnder/Downloads/build/bin/exec/R
>> Reason: image not found
>> /bin/sh: line 1: 87375 Done                    echo "utils:::make.packages.html(.Library, verbose=FALSE, docdir=\"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources/doc\")"
>>    87376 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES=NULL LC_ALL=C ../../bin/R --vanilla --slave > /dev/null
>> make[2]: *** [install] Error 133
>> make[1]: *** [install] Error 1
>> make: *** [install] Error 1
>> 
>> It seems that it is connected with the MKL. I have in my MKL variable ?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread. It seems that libiomp5 is not linked to correctly. 
>> 
>> I uploaded also my config.log to https://gist.github.com/simonsays1980/7359508 
>> 
>> Best
>> 
>> Simon
>> 
>> 
>> 
>> On 07 Nov 2013, at 15:33, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>>> 
>>> On Nov 7, 2013, at 7:56 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>>> 
>>>> I am trying to build R with an Intel Compiler (14.0.3). Has anyone before done it and could give me a hint for the configuration? 
>>>> 
>>>> I am sourcing the compilervars.sh for Intel and then configure R with 
>>>> 
>>>> ./R-3.0.2/configure OBJC="clang" --enable-R-framework=/usr/local/R/R-intel --x-includes=/usr/X11/include/ --x-libraries=/usr/X11/lib/ --enable-memory-profiling --with-blas="$MKL" --with-lapack
>>>> 
>>>> Further Variables are:
>>>> 
>>>> CFLAGS=?-O3 -ipo -openmp -xHost?
>>>> CXXFLAGS=?-O3 -ipo -openmp -xHost?
>>>> MKL=?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread?!
>>>> 
>>>> I get always the same error:
>>>> 
>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I../../../R-3.0.2/src/extra/zlib -I../../../R-3.0.2/src/extra/bzip2 -I../../../R-3.0.2/src/extra/pcre -I../../../R-3.0.2/src/extra  -I../../../R-3.0.2/src/extra/xz/api -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/local/include -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -c ../../../R-3.0.2/src/main/Rmain.c -o Rmain.o
>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99  -L/usr/local/lib -o R.bin Rmain.o  -L../../lib -lR
>>>> Undefined symbols for architecture x86_64:
>>>> "___kmpc_begin", referenced from:
>>>>   _main in ipo_icc4xtjyH.o
>>>> "___kmpc_end", referenced from:
>>>>   _main in ipo_icc4xtjyH.o
>>>> ld: symbol(s) not found for architecture x86_64
>>>> 
>>>> Any clue what this could be? 
>>>> 
>>> 
>>> The above certainly won't work, because you're missing linker flags - I'm pretty sure that you must use -openmp in the linker for it to work, I'm not sure about -ipo -- but doesn't R detect all those automatically? I don't think you should put them in manually. The actual error comes from missing libguide link flags, but they may be implicit if you fix the other problem.
>>> 
>>> Cheers,
>>> S


From pdalgd at gmail.com  Fri Nov  8 12:00:04 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 8 Nov 2013 12:00:04 +0100
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <527B5B27.4050903@krugs.de>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
	<CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
	<527B5B27.4050903@krugs.de>
Message-ID: <D05064DA-60C5-4A24-A527-7B7AEBDA304F@gmail.com>

I was just about to tell you guys that have the problem to try running R.app with gdb attached to the process. Then I realized that gdb has gone in Mavericks to be replaced by lldb, which I don't have much of a clue about how to operate....

However, at least the first few steps seem to be similar to using gdb:

Get the process ID for R.app using

Peters-iMac:~ pd$ ps aux | grep R.app
pd              28620   0.1  0.5  3877356  21724   ??  S     1Nov13   0:43.29 /Applications/R.app/Contents/MacOS/R
pd              74190   0.0  0.0  2432784    596 s005  S+   11:45AM   0:00.01 grep R.app

Then attach to it using

Peters-iMac:~ pd$ lldb -p 28620

give your password to allow the debugger to control the process, then, when lldb fires up, tell it to resume the process

(lldb) continue
Process 28620 resuming

Next, you should try doing whatever it takes to reproduce the crash, figure out how to get a traceback, and report back to the list.

-pd

On 07 Nov 2013, at 10:19 , Rainer M Krug <Rainer at krugs.de> wrote:

> I have to confirm both, the crash and the flashing of the colour wheel.
> 
> 
>> sessionInfo()
> R version 3.0.2 (2013-09-25)
> Platform: x86_64-apple-darwin10.8.0 (64-bit)
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>> version
>               _
> platform       x86_64-apple-darwin10.8.0
> arch           x86_64
> os             darwin10.8.0
> system         x86_64, darwin10.8.0
> status
> major          3
> minor          0.2
> year           2013
> month          09
> day            25
> svn rev        63987
> language       R
> version.string R version 3.0.2 (2013-09-25)
> nickname       Frisbee Sailing
>> 
> 
> Cheers,
> 
> Rainer
> 
> 
> 
> On 11/07/13, 02:17 , John Magnotti wrote:
>> I removed my current R.app and installed the one at:
>> http://r.research.att.com/#GUI
>> R-3.0-branch-snowleopard-signed.pkg
>> 
>> but I still get an immediate crash when I 1) open the preferences
>> window and 2) click any of the icons in the main "Show All" screen
>> (but not the tabs)
>> 
>> I also noticed that switching away from either the Color or the Syntax
>> tab briefly flashes (open then close) the color wheel selection dialog
>> 
>>> sessionInfo()
>> R version 3.0.2 Patched (2013-11-04 r64155)
>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> 
>> Is there any other specific information that would help?
>> 
>> Thanks,
>> 
>> John
>> 
>> On Wed, Nov 6, 2013 at 10:12 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>>> Robert,
>>> 
>>> I never could reproduce what Brian, John or Ranier were seeing with my
>>> install (downloaded from http://r.research.att.com/ .
>>> 
>>> Perhaps they could chime back in and give you more details.
>>> 
>>> I'm now running Mavericks and still cannot replicate.
>>> R version 3.0.2 (2013-09-25)
>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>> 
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>> 
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> 
>>> Brandon
>>> 
>>> 
>>> On Wed, Nov 6, 2013 at 12:13 AM, Robert J Goedman <goedman at icloud.com>wrote:
>>> 
>>>> Brandon,
>>>> 
>>>> Do you still see this problem?
>>>> 
>>>> Are you using Simon's build?
>>>> 
>>>> Regards,
>>>> Rob J. Goedman
>>>> goedman at icloud.com
>>>> 
>>>> 
>>>> On Jan 2, 2013, at 3:28 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>>> wrote:
>>>> 
>>>> On 01/01/2013 17:48, Robert J Goedman wrote:
>>>> 
>>>> Thanks for taking a look. I'll dig a bit further after getting back home
>>>> tomorrow. It only happens through 'Apple-,' and is then not limited to
>>>> just the Startup preferences (contrary to what I thought earlier).
>>>> 
>>>> 
>>>> There is a bug report, PR#15017, related to this that we also have not
>>>> been able to reproduce.
>>>> 
>>>> 
>>>> 
>>>> Rob J. Goedman
>>>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>>> 
>>>> 
>>>> 
>>>> 
>>>> On Jan 1, 2013, at 10:01 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk
>>>> <mailto:ripley at stats.ox.ac.uk <ripley at stats.ox.ac.uk>>> wrote:
>>>> 
>>>> Sorry, cannot reproduce (with Simon's build or mine, on Lion).
>>>> 
>>>> Brian
>>>> 
>>>> On 31/12/2012 19:37, Robert J Goedman wrote:
>>>> 
>>>> Simon & Brian,
>>>> 
>>>> Surely this is not high on your minds today, but I did notice an
>>>> issue with R.app.
>>>> 
>>>> Using below versions of R-3.0 and the Lion64 version of R.app I
>>>> noticed that by immediately invoking the Startup preferences. e.g. by
>>>> Command/Apple-, R.app will segfault:
>>>> 
>>>> *** caught segfault ***
>>>> address 0x10121d000, cause 'memory not mapped'
>>>> ...
>>>> 
>>>> Above route seems to always create the crash. I've seen a few other
>>>> occurrences, always with the Startup preferences screen not being
>>>> mapped, but less reproducible. Same behavior in Simon's build as in
>>>> my own build of R.app.
>>>> 
>>>> A reasonable work around is to get there through the Set Colors icon.
>>>> I'm on OSX8.3 preview 3 and using Xcode 4.6 dp4. And using the CRAN
>>>> version of R, did not yet build R myself as outlined in the Install file.
>>>> 
>>>> Happy New Year, regards,
>>>> Rob J. Goedman
>>>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>>> 
>>>> 
>>>> ------------ my own build----------------------------
>>>> 
>>>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>>>> Consequences"
>>>> Copyright (C) 2012 The R Foundation for Statistical Computing
>>>> ISBN 3-900051-07-0
>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>> 
>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>> You are welcome to redistribute it under certain conditions.
>>>> Type 'license()' or 'licence()' for distribution details.
>>>> 
>>>> Natural language support but running in an English locale
>>>> 
>>>> R is a collaborative project with many contributors.
>>>> Type 'contributors()' for more information and
>>>> 'citation()' on how to cite R or R packages in publications.
>>>> 
>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>> 'help.start()' for an HTML browser interface to help.
>>>> Type 'q()' to quit R.
>>>> 
>>>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>>> 
>>>> [Workspace restored from /Users/rob/Projects/.RData]
>>>> [History restored from /Users/rob/Projects/.Rapp.history]
>>>> 
>>>> sessionInfo()
>>>> 
>>>> R Under development (unstable) (2012-12-30 r61489)
>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>> 
>>>> 
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> 
>>>> -------------R.app from
>>>> Simon---------------------------------------------
>>>> 
>>>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>>>> Consequences"
>>>> Copyright (C) 2012 The R Foundation for Statistical Computing
>>>> ISBN 3-900051-07-0
>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>> 
>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>> You are welcome to redistribute it under certain conditions.
>>>> Type 'license()' or 'licence()' for distribution details.
>>>> 
>>>> Natural language support but running in an English locale
>>>> 
>>>> R is a collaborative project with many contributors.
>>>> Type 'contributors()' for more information and
>>>> 'citation()' on how to cite R or R packages in publications.
>>>> 
>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>> 'help.start()' for an HTML browser interface to help.
>>>> Type 'q()' to quit R.
>>>> 
>>>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>>> 
>>>> [Workspace restored from /Users/rob/Projects/.RData]
>>>> [History restored from /Users/rob/Projects/.Rapp.history]
>>>> 
>>>> sessionInfo()
>>>> 
>>>> R Under development (unstable) (2012-12-30 r61489)
>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>> 
>>>> 
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> 
>>>> 
>>>> --
>>>> Brian D. Ripley, ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk<ripley at stats.ox.ac.uk>
>>>>> 
>>>> Professor of Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
>>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>> 
>>>> 
>>>> 
>>>> 
>>>> --
>>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>> 
>>>> 
>>>> 
>>>> 
>>>> On Oct 2, 2013, at 6:09 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>>>> 
>>>> I cannot reproduce on my mac mini (2011). OS X 10.8.5.
>>>> 
>>>> R version 3.0.2 (2013-09-25)
>>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>> 
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> 
>>>> On Wed, Oct 2, 2013 at 2:03 PM, John Magnotti <john.magnotti at gmail.com
>>>>> wrote:
>>>> 
>>>> Going to the preferences screen in R.app (Command + , or
>>>> R->preferences) and selecting any of the icons causes R to crash with
>>>> a segfault. If I click any the tabs at the top of the preferences
>>>> window R doesn't crash, but if I go back to the  "show all" tab and
>>>> choose an option it causes an immediate failure.
>>>> 
>>>> I'm running OS X 10.8.5, sessionInfo pasted below
>>>> 
>>>> Thoughts?
>>>> 
>>>> John
>>>> 
>>>> 
>>>> sessionInfo()
>>>> 
>>>> R version 3.0.2 (2013-09-25)
>>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>> 
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>>> [[alternative HTML version deleted]]
>>>> 
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>>> 
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> -- 
> Rainer M. Krug
> 
> email: RMKrug<at>gmail<dot>com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From mspinola10 at gmail.com  Fri Nov  8 14:47:10 2013
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Fri, 8 Nov 2013 07:47:10 -0600
Subject: [R-SIG-Mac] Problems with R when connected to a video beam,
	Mavericks
Message-ID: <CABkCotRXBqRBKN0y7AdtpejUF2E=UGKNYkNnbc8SEJx=_r57Hw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131108/1cae0503/attachment.pl>

From simon.urbanek at r-project.org  Fri Nov  8 15:19:47 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 8 Nov 2013 09:19:47 -0500
Subject: [R-SIG-Mac] Build R with Intel Compiler
In-Reply-To: <A5DB21A2-2A39-42CD-8800-03EE270181B1@uni-bonn.de>
References: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>
	<1D8F41B0-F265-4F44-A3B6-366EA7244B94@r-project.org>
	<09C1864C-29FE-4F50-8FE4-2E60A7BB86DC@uni-bonn.de>
	<C1ACFB70-CC93-462E-BAC7-412CCF214196@r-project.org>
	<A5DB21A2-2A39-42CD-8800-03EE270181B1@uni-bonn.de>
Message-ID: <E10B5040-3A99-454E-9F48-02ED589357CA@r-project.org>

On Nov 8, 2013, at 4:05 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:

> Where does R in make install get its libraries/library paths from to be installed? I set DYLD_LIBRARY_PATH and libiomp5.dylib is on that path ? Is there another variable to be set (DYLD_FALLBACK_LIBRARY_PATH I want to use only, if no other possibility remains). 
> 

Well, you really don't want to set DYLD_LIBRARY_PATH since it breaks dependencies, but that's another topic. However, the error tells you that you don't have it on the path, otherwise you wouldn't get "image not found". Either way, as I said, what you really want is to fix the id in the iomp library so you don't get into the path troubles in the first place. Another way to go about it is to put the Intel dependencies into $R_HOME/lib - I wouldn't do that for development but that's a good option if you want to distribute the build to other machines.

Cheers,
Simon


> Best
> 
> Simon
> On 07 Nov 2013, at 19:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> 
>> On Nov 7, 2013, at 1:30 PM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>> 
>>> Your and Brian?s guesses were right: the -openmp linker flag was it. It compiles now fine, though I get errors in make check-all and make install: 
>>> 
>>> Running a make check-all gives me (with and without flag -ipo)
>>> 
>>> Running examples in 'mgcv-Ex.R? failed
>>> ...
>>> Loading required package: splines
>>>> plot(b,pages=1)
>>>> b<-gamm(y~s(x0,bs="tr",m=2)+s(x1,bs="ps",m=c(1,3))+
>>> +          s(x2,bs="tr",m=3)+s(x3,bs="tr",m=2),data=dat)
>>>> plot(b$gam,pages=1)
>>> Warning in sqrt(rowSums((P$X %*% x$Vp[first:last, first:last, drop = FALSE]) *  :
>>> NaNs produced
>>> Error in if (se && pd[[i]]$se) { : missing value where TRUE/FALSE needed
>>> Calls: plot -> plot.gam
>>> Execution halted
>>> 
>>> A sudo make install gives me:
>>> 
>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/X11/include/ -D__ACCELERATE__ -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -DR_HOME='"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources"' -o Rscript \
>>> 	  ../../../R-3.0.2/src/unix/Rscript.c
>>> installing packages ...
>>> building HTML index ...
>>> dyld: Library not loaded: libiomp5.dylib
>> 
>> ^^ your Intel libs (or at least libiomp5) are missing paths in the id string - probably not installed properly? You can hack around that using DYLD_FALLBACK_LIBRARY_PATH but it's better to fix the issue in libiomp5 directly.
>> 
>> 
>>> Referenced from: /Users/simonzehnder/Downloads/build/bin/exec/R
>>> Reason: image not found
>>> /bin/sh: line 1: 87375 Done                    echo "utils:::make.packages.html(.Library, verbose=FALSE, docdir=\"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources/doc\")"
>>>   87376 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES=NULL LC_ALL=C ../../bin/R --vanilla --slave > /dev/null
>>> make[2]: *** [install] Error 133
>>> make[1]: *** [install] Error 1
>>> make: *** [install] Error 1
>>> 
>>> It seems that it is connected with the MKL. I have in my MKL variable ?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread. It seems that libiomp5 is not linked to correctly. 
>>> 
>>> I uploaded also my config.log to https://gist.github.com/simonsays1980/7359508 
>>> 
>>> Best
>>> 
>>> Simon
>>> 
>>> 
>>> 
>>> On 07 Nov 2013, at 15:33, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>>> 
>>>> On Nov 7, 2013, at 7:56 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>>>> 
>>>>> I am trying to build R with an Intel Compiler (14.0.3). Has anyone before done it and could give me a hint for the configuration? 
>>>>> 
>>>>> I am sourcing the compilervars.sh for Intel and then configure R with 
>>>>> 
>>>>> ./R-3.0.2/configure OBJC="clang" --enable-R-framework=/usr/local/R/R-intel --x-includes=/usr/X11/include/ --x-libraries=/usr/X11/lib/ --enable-memory-profiling --with-blas="$MKL" --with-lapack
>>>>> 
>>>>> Further Variables are:
>>>>> 
>>>>> CFLAGS=?-O3 -ipo -openmp -xHost?
>>>>> CXXFLAGS=?-O3 -ipo -openmp -xHost?
>>>>> MKL=?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread?!
>>>>> 
>>>>> I get always the same error:
>>>>> 
>>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I../../../R-3.0.2/src/extra/zlib -I../../../R-3.0.2/src/extra/bzip2 -I../../../R-3.0.2/src/extra/pcre -I../../../R-3.0.2/src/extra  -I../../../R-3.0.2/src/extra/xz/api -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/local/include -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -c ../../../R-3.0.2/src/main/Rmain.c -o Rmain.o
>>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99  -L/usr/local/lib -o R.bin Rmain.o  -L../../lib -lR
>>>>> Undefined symbols for architecture x86_64:
>>>>> "___kmpc_begin", referenced from:
>>>>>  _main in ipo_icc4xtjyH.o
>>>>> "___kmpc_end", referenced from:
>>>>>  _main in ipo_icc4xtjyH.o
>>>>> ld: symbol(s) not found for architecture x86_64
>>>>> 
>>>>> Any clue what this could be? 
>>>>> 
>>>> 
>>>> The above certainly won't work, because you're missing linker flags - I'm pretty sure that you must use -openmp in the linker for it to work, I'm not sure about -ipo -- but doesn't R detect all those automatically? I don't think you should put them in manually. The actual error comes from missing libguide link flags, but they may be implicit if you fix the other problem.
>>>> 
>>>> Cheers,
>>>> S
> 


From goedman at icloud.com  Fri Nov  8 15:58:57 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Fri, 08 Nov 2013 06:58:57 -0800
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <D05064DA-60C5-4A24-A527-7B7AEBDA304F@gmail.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>
	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>
	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
	<CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
	<527B5B27.4050903@krugs.de>
	<D05064DA-60C5-4A24-A527-7B7AEBDA304F@gmail.com>
Message-ID: <1E5AED33-49E2-48F7-8687-7CF341255B6B@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131108/1b240d83/attachment.pl>

From szehnder at uni-bonn.de  Fri Nov  8 16:26:14 2013
From: szehnder at uni-bonn.de (Simon Zehnder)
Date: Fri, 8 Nov 2013 16:26:14 +0100
Subject: [R-SIG-Mac] Build R with Intel Compiler
In-Reply-To: <E10B5040-3A99-454E-9F48-02ED589357CA@r-project.org>
References: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>
	<1D8F41B0-F265-4F44-A3B6-366EA7244B94@r-project.org>
	<09C1864C-29FE-4F50-8FE4-2E60A7BB86DC@uni-bonn.de>
	<C1ACFB70-CC93-462E-BAC7-412CCF214196@r-project.org>
	<A5DB21A2-2A39-42CD-8800-03EE270181B1@uni-bonn.de>
	<E10B5040-3A99-454E-9F48-02ED589357CA@r-project.org>
Message-ID: <D35CE91A-6E9E-42A8-BB06-032065B2EC74@uni-bonn.de>

The DYLD_LIBRARY_PATH gets set by the compilervars.sh from intel and it resolves to:

echo $DYLD_LIBRARY_PATH
/opt/intel/composer_xe_2013_sp1.1.103/compiler/lib:/opt/intel/composer_xe_2013_sp1.1.103/compiler/lib/intel64:/opt/intel:/opt/intel/composer_xe_2013_sp1.1.103/ipp/../compiler/lib:/opt/intel/composer_xe_2013_sp1.1.103/ipp/lib:/opt/intel/composer_xe_2013_sp1.1.103/mkl/lib:/opt/intel/composer_xe_2013_sp1.1.103/tbb/lib

The first path points directly into the directory with the libiomp5.dyiib. So theoretically when following https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/DynamicLibraryUsageGuidelines.html it should be founded during linking. Though looking into libR.dylib with otool -L I see, that the libraries from Intel are referred to only by name not by path. I think this information gets lost as soon as the dynamic library libR.dylib is build. 

So, I hope I understand ?fix the id in the iomp library? correctly: I change via install_name_tool change @executable_path/ ? the relative path to an absolute one? 

Best

Simon



On 08 Nov 2013, at 15:19, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> On Nov 8, 2013, at 4:05 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
> 
>> Where does R in make install get its libraries/library paths from to be installed? I set DYLD_LIBRARY_PATH and libiomp5.dylib is on that path ? Is there another variable to be set (DYLD_FALLBACK_LIBRARY_PATH I want to use only, if no other possibility remains). 
>> 
> 
> Well, you really don't want to set DYLD_LIBRARY_PATH since it breaks dependencies, but that's another topic. However, the error tells you that you don't have it on the path, otherwise you wouldn't get "image not found". Either way, as I said, what you really want is to fix the id in the iomp library so you don't get into the path troubles in the first place. Another way to go about it is to put the Intel dependencies into $R_HOME/lib - I wouldn't do that for development but that's a good option if you want to distribute the build to other machines.
> 
> Cheers,
> Simon
> 
> 
>> Best
>> 
>> Simon
>> On 07 Nov 2013, at 19:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>>> 
>>> On Nov 7, 2013, at 1:30 PM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>>> 
>>>> Your and Brian?s guesses were right: the -openmp linker flag was it. It compiles now fine, though I get errors in make check-all and make install: 
>>>> 
>>>> Running a make check-all gives me (with and without flag -ipo)
>>>> 
>>>> Running examples in 'mgcv-Ex.R? failed
>>>> ...
>>>> Loading required package: splines
>>>>> plot(b,pages=1)
>>>>> b<-gamm(y~s(x0,bs="tr",m=2)+s(x1,bs="ps",m=c(1,3))+
>>>> +          s(x2,bs="tr",m=3)+s(x3,bs="tr",m=2),data=dat)
>>>>> plot(b$gam,pages=1)
>>>> Warning in sqrt(rowSums((P$X %*% x$Vp[first:last, first:last, drop = FALSE]) *  :
>>>> NaNs produced
>>>> Error in if (se && pd[[i]]$se) { : missing value where TRUE/FALSE needed
>>>> Calls: plot -> plot.gam
>>>> Execution halted
>>>> 
>>>> A sudo make install gives me:
>>>> 
>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/X11/include/ -D__ACCELERATE__ -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -DR_HOME='"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources"' -o Rscript \
>>>> 	  ../../../R-3.0.2/src/unix/Rscript.c
>>>> installing packages ...
>>>> building HTML index ...
>>>> dyld: Library not loaded: libiomp5.dylib
>>> 
>>> ^^ your Intel libs (or at least libiomp5) are missing paths in the id string - probably not installed properly? You can hack around that using DYLD_FALLBACK_LIBRARY_PATH but it's better to fix the issue in libiomp5 directly.
>>> 
>>> 
>>>> Referenced from: /Users/simonzehnder/Downloads/build/bin/exec/R
>>>> Reason: image not found
>>>> /bin/sh: line 1: 87375 Done                    echo "utils:::make.packages.html(.Library, verbose=FALSE, docdir=\"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources/doc\")"
>>>>  87376 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES=NULL LC_ALL=C ../../bin/R --vanilla --slave > /dev/null
>>>> make[2]: *** [install] Error 133
>>>> make[1]: *** [install] Error 1
>>>> make: *** [install] Error 1
>>>> 
>>>> It seems that it is connected with the MKL. I have in my MKL variable ?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread. It seems that libiomp5 is not linked to correctly. 
>>>> 
>>>> I uploaded also my config.log to https://gist.github.com/simonsays1980/7359508 
>>>> 
>>>> Best
>>>> 
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>> On 07 Nov 2013, at 15:33, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>> 
>>>>> 
>>>>> On Nov 7, 2013, at 7:56 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>>>>> 
>>>>>> I am trying to build R with an Intel Compiler (14.0.3). Has anyone before done it and could give me a hint for the configuration? 
>>>>>> 
>>>>>> I am sourcing the compilervars.sh for Intel and then configure R with 
>>>>>> 
>>>>>> ./R-3.0.2/configure OBJC="clang" --enable-R-framework=/usr/local/R/R-intel --x-includes=/usr/X11/include/ --x-libraries=/usr/X11/lib/ --enable-memory-profiling --with-blas="$MKL" --with-lapack
>>>>>> 
>>>>>> Further Variables are:
>>>>>> 
>>>>>> CFLAGS=?-O3 -ipo -openmp -xHost?
>>>>>> CXXFLAGS=?-O3 -ipo -openmp -xHost?
>>>>>> MKL=?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread?!
>>>>>> 
>>>>>> I get always the same error:
>>>>>> 
>>>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I../../../R-3.0.2/src/extra/zlib -I../../../R-3.0.2/src/extra/bzip2 -I../../../R-3.0.2/src/extra/pcre -I../../../R-3.0.2/src/extra  -I../../../R-3.0.2/src/extra/xz/api -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/local/include -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -c ../../../R-3.0.2/src/main/Rmain.c -o Rmain.o
>>>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99  -L/usr/local/lib -o R.bin Rmain.o  -L../../lib -lR
>>>>>> Undefined symbols for architecture x86_64:
>>>>>> "___kmpc_begin", referenced from:
>>>>>> _main in ipo_icc4xtjyH.o
>>>>>> "___kmpc_end", referenced from:
>>>>>> _main in ipo_icc4xtjyH.o
>>>>>> ld: symbol(s) not found for architecture x86_64
>>>>>> 
>>>>>> Any clue what this could be? 
>>>>>> 
>>>>> 
>>>>> The above certainly won't work, because you're missing linker flags - I'm pretty sure that you must use -openmp in the linker for it to work, I'm not sure about -ipo -- but doesn't R detect all those automatically? I don't think you should put them in manually. The actual error comes from missing libguide link flags, but they may be implicit if you fix the other problem.
>>>>> 
>>>>> Cheers,
>>>>> S
>> 
> 


From szehnder at uni-bonn.de  Fri Nov  8 16:38:15 2013
From: szehnder at uni-bonn.de (Simon Zehnder)
Date: Fri, 8 Nov 2013 16:38:15 +0100
Subject: [R-SIG-Mac] Build R with Intel Compiler
In-Reply-To: <D35CE91A-6E9E-42A8-BB06-032065B2EC74@uni-bonn.de>
References: <77BE9397-EB98-4090-917F-CA77CFA277DB@uni-bonn.de>
	<1D8F41B0-F265-4F44-A3B6-366EA7244B94@r-project.org>
	<09C1864C-29FE-4F50-8FE4-2E60A7BB86DC@uni-bonn.de>
	<C1ACFB70-CC93-462E-BAC7-412CCF214196@r-project.org>
	<A5DB21A2-2A39-42CD-8800-03EE270181B1@uni-bonn.de>
	<E10B5040-3A99-454E-9F48-02ED589357CA@r-project.org>
	<D35CE91A-6E9E-42A8-BB06-032065B2EC74@uni-bonn.de>
Message-ID: <877648EB-4F2A-47FA-8F4E-963C0D3F448F@uni-bonn.de>

Couldn?t I just tell R to use xild the intel linker instead of ld?

On 08 Nov 2013, at 16:26, Simon Zehnder <szehnder at uni-bonn.de> wrote:

> The DYLD_LIBRARY_PATH gets set by the compilervars.sh from intel and it resolves to:
> 
> echo $DYLD_LIBRARY_PATH
> /opt/intel/composer_xe_2013_sp1.1.103/compiler/lib:/opt/intel/composer_xe_2013_sp1.1.103/compiler/lib/intel64:/opt/intel:/opt/intel/composer_xe_2013_sp1.1.103/ipp/../compiler/lib:/opt/intel/composer_xe_2013_sp1.1.103/ipp/lib:/opt/intel/composer_xe_2013_sp1.1.103/mkl/lib:/opt/intel/composer_xe_2013_sp1.1.103/tbb/lib
> 
> The first path points directly into the directory with the libiomp5.dyiib. So theoretically when following https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/DynamicLibraryUsageGuidelines.html it should be founded during linking. Though looking into libR.dylib with otool -L I see, that the libraries from Intel are referred to only by name not by path. I think this information gets lost as soon as the dynamic library libR.dylib is build. 
> 
> So, I hope I understand ?fix the id in the iomp library? correctly: I change via install_name_tool change @executable_path/ ? the relative path to an absolute one? 
> 
> Best
> 
> Simon
> 
> 
> 
> On 08 Nov 2013, at 15:19, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> On Nov 8, 2013, at 4:05 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>> 
>>> Where does R in make install get its libraries/library paths from to be installed? I set DYLD_LIBRARY_PATH and libiomp5.dylib is on that path ? Is there another variable to be set (DYLD_FALLBACK_LIBRARY_PATH I want to use only, if no other possibility remains). 
>>> 
>> 
>> Well, you really don't want to set DYLD_LIBRARY_PATH since it breaks dependencies, but that's another topic. However, the error tells you that you don't have it on the path, otherwise you wouldn't get "image not found". Either way, as I said, what you really want is to fix the id in the iomp library so you don't get into the path troubles in the first place. Another way to go about it is to put the Intel dependencies into $R_HOME/lib - I wouldn't do that for development but that's a good option if you want to distribute the build to other machines.
>> 
>> Cheers,
>> Simon
>> 
>> 
>>> Best
>>> 
>>> Simon
>>> On 07 Nov 2013, at 19:52, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>>> 
>>>> On Nov 7, 2013, at 1:30 PM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>>>> 
>>>>> Your and Brian?s guesses were right: the -openmp linker flag was it. It compiles now fine, though I get errors in make check-all and make install: 
>>>>> 
>>>>> Running a make check-all gives me (with and without flag -ipo)
>>>>> 
>>>>> Running examples in 'mgcv-Ex.R? failed
>>>>> ...
>>>>> Loading required package: splines
>>>>>> plot(b,pages=1)
>>>>>> b<-gamm(y~s(x0,bs="tr",m=2)+s(x1,bs="ps",m=c(1,3))+
>>>>> +          s(x2,bs="tr",m=3)+s(x3,bs="tr",m=2),data=dat)
>>>>>> plot(b$gam,pages=1)
>>>>> Warning in sqrt(rowSums((P$X %*% x$Vp[first:last, first:last, drop = FALSE]) *  :
>>>>> NaNs produced
>>>>> Error in if (se && pd[[i]]$se) { : missing value where TRUE/FALSE needed
>>>>> Calls: plot -> plot.gam
>>>>> Execution halted
>>>>> 
>>>>> A sudo make install gives me:
>>>>> 
>>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/X11/include/ -D__ACCELERATE__ -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -DR_HOME='"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources"' -o Rscript \
>>>>> 	  ../../../R-3.0.2/src/unix/Rscript.c
>>>>> installing packages ...
>>>>> building HTML index ...
>>>>> dyld: Library not loaded: libiomp5.dylib
>>>> 
>>>> ^^ your Intel libs (or at least libiomp5) are missing paths in the id string - probably not installed properly? You can hack around that using DYLD_FALLBACK_LIBRARY_PATH but it's better to fix the issue in libiomp5 directly.
>>>> 
>>>> 
>>>>> Referenced from: /Users/simonzehnder/Downloads/build/bin/exec/R
>>>>> Reason: image not found
>>>>> /bin/sh: line 1: 87375 Done                    echo "utils:::make.packages.html(.Library, verbose=FALSE, docdir=\"/usr/local/R/R-intel/R.framework/Versions/3.0/Resources/doc\")"
>>>>> 87376 Trace/BPT trap: 5       | R_DEFAULT_PACKAGES=NULL LC_ALL=C ../../bin/R --vanilla --slave > /dev/null
>>>>> make[2]: *** [install] Error 133
>>>>> make[1]: *** [install] Error 1
>>>>> make: *** [install] Error 1
>>>>> 
>>>>> It seems that it is connected with the MKL. I have in my MKL variable ?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread. It seems that libiomp5 is not linked to correctly. 
>>>>> 
>>>>> I uploaded also my config.log to https://gist.github.com/simonsays1980/7359508 
>>>>> 
>>>>> Best
>>>>> 
>>>>> Simon
>>>>> 
>>>>> 
>>>>> 
>>>>> On 07 Nov 2013, at 15:33, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>>> 
>>>>>> 
>>>>>> On Nov 7, 2013, at 7:56 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:
>>>>>> 
>>>>>>> I am trying to build R with an Intel Compiler (14.0.3). Has anyone before done it and could give me a hint for the configuration? 
>>>>>>> 
>>>>>>> I am sourcing the compilervars.sh for Intel and then configure R with 
>>>>>>> 
>>>>>>> ./R-3.0.2/configure OBJC="clang" --enable-R-framework=/usr/local/R/R-intel --x-includes=/usr/X11/include/ --x-libraries=/usr/X11/lib/ --enable-memory-profiling --with-blas="$MKL" --with-lapack
>>>>>>> 
>>>>>>> Further Variables are:
>>>>>>> 
>>>>>>> CFLAGS=?-O3 -ipo -openmp -xHost?
>>>>>>> CXXFLAGS=?-O3 -ipo -openmp -xHost?
>>>>>>> MKL=?-lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread?!
>>>>>>> 
>>>>>>> I get always the same error:
>>>>>>> 
>>>>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99 -I../../../R-3.0.2/src/extra/zlib -I../../../R-3.0.2/src/extra/bzip2 -I../../../R-3.0.2/src/extra/pcre -I../../../R-3.0.2/src/extra  -I../../../R-3.0.2/src/extra/xz/api -I. -I../../src/include -I../../../R-3.0.2/src/include -I/usr/local/include -DHAVE_CONFIG_H    -fPIC  -O3 -ipo -openmp -xHost  -c ../../../R-3.0.2/src/main/Rmain.c -o Rmain.o
>>>>>>> /opt/intel/composer_xe_2013_sp1.1.103/bin/intel64/icc -std=gnu99  -L/usr/local/lib -o R.bin Rmain.o  -L../../lib -lR
>>>>>>> Undefined symbols for architecture x86_64:
>>>>>>> "___kmpc_begin", referenced from:
>>>>>>> _main in ipo_icc4xtjyH.o
>>>>>>> "___kmpc_end", referenced from:
>>>>>>> _main in ipo_icc4xtjyH.o
>>>>>>> ld: symbol(s) not found for architecture x86_64
>>>>>>> 
>>>>>>> Any clue what this could be? 
>>>>>>> 
>>>>>> 
>>>>>> The above certainly won't work, because you're missing linker flags - I'm pretty sure that you must use -openmp in the linker for it to work, I'm not sure about -ipo -- but doesn't R detect all those automatically? I don't think you should put them in manually. The actual error comes from missing libguide link flags, but they may be implicit if you fix the other problem.
>>>>>> 
>>>>>> Cheers,
>>>>>> S
>>> 
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From goedman at icloud.com  Sun Nov 10 18:33:24 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Sun, 10 Nov 2013 09:33:24 -0800
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <1E5AED33-49E2-48F7-8687-7CF341255B6B@icloud.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>
	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>
	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
	<CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
	<527B5B27.4050903@krugs.de>
	<D05064DA-60C5-4A24-A527-7B7AEBDA304F@gmail.com>
	<1E5AED33-49E2-48F7-8687-7CF341255B6B@icloud.com>
Message-ID: <2FF53E41-B966-478C-B5C6-CE5F5258C054@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131110/f5e510e3/attachment.pl>

From john.magnotti at gmail.com  Tue Nov 12 17:38:18 2013
From: john.magnotti at gmail.com (John Magnotti)
Date: Tue, 12 Nov 2013 08:38:18 -0800
Subject: [R-SIG-Mac] R crashes on preferences screen
In-Reply-To: <2FF53E41-B966-478C-B5C6-CE5F5258C054@icloud.com>
References: <CAHT0qpShjNcGkTvXVNhjYWQyGNZjtbKwSd5sME5gHQpiLhJR2g@mail.gmail.com>
	<CAG2OMvt+Z18MorHa85=ufNd83Bcn-XUwu1q4Vwrna7O0MrnOKg@mail.gmail.com>
	<8BA198DE-B31D-418F-9C0B-D0074D059325@icloud.com>
	<CAG2OMvtnKzpV5r9BGRUA=fZhGhko0LA2wGX1q3RS19PEPRHG6w@mail.gmail.com>
	<CAHT0qpTc-zEr6Hd+y-OpihhOBgjvkMvk51BuyWU56AdcMHSLVg@mail.gmail.com>
	<527B5B27.4050903@krugs.de>
	<D05064DA-60C5-4A24-A527-7B7AEBDA304F@gmail.com>
	<1E5AED33-49E2-48F7-8687-7CF341255B6B@icloud.com>
	<2FF53E41-B966-478C-B5C6-CE5F5258C054@icloud.com>
Message-ID: <CAHT0qpT73bu4iAfTynW9NhBA5DkQLeWufTu5g3y9NqwdH9pHMA@mail.gmail.com>

no more crashing for me

thanks!

John

> sessionInfo()
R version 3.0.2 Patched (2013-11-11 r64202)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


On Sun, Nov 10, 2013 at 9:33 AM, Robert J Goedman <goedman at icloud.com> wrote:
> Could someone with the preference problems try the latest nightly build for R.app to see if the patch helps?
>
> Thanks,
> Rob J. Goedman
> goedman at icloud.com
>
>
>
> On Nov 8, 2013, at 6:58 AM, Robert J Goedman <goedman at icloud.com> wrote:
>
>> Hi,
>>
>> Thanks for the feedback/updates. The flashing of the color chooser has been there for a long time but I don't think that is causing this problem.
>>
>> I can trigger the problem in Xcode and it shows clearly where it crashes. Its attempting to darken an icon image, pixel by pixel, but the image has no data if (on our systems at least) the 'Set Color' is not used as the path to get there.
>>
>> From what I've seen, it happens on a range of systems - below my sessionInfo(). The work around is simple and I think innocuous enough that I think I can commit. But it not very satisfactory not to get to the bottom of this and to understand why only some of us encounter this problem.
>>
>> Rob J. Goedman
>> goedman at icloud.com
>>
>>
>>
>> [R.app GUI 1.62 (6588) x86_64-apple-darwin13.0.0]
>>
>> [Workspace restored from /Users/rob/Projects/.RData]
>> [History restored from /Users/rob/Projects/.Rapp.history]
>>
>> 2013-11-08 06:42:18.669 R[65942:707] No data in destData (darkenedImageWithColor.m)
>>> sessionInfo()
>> R Under development (unstable) (2013-10-30 r64123)
>> Platform: x86_64-apple-darwin13.0.0/x86_64 (64-bit)
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> loaded via a namespace (and not attached):
>> [1] coda_0.16-1     grid_3.1.0      inline_0.3.13   lattice_0.20-25 Rcpp_0.10.6     rjags_3-11      rstan_2.0.1
>> [8] stats4_3.1.0
>>>
>>
>>
>> On Nov 8, 2013, at 3:00 AM, peter dalgaard <pdalgd at gmail.com> wrote:
>>
>>> I was just about to tell you guys that have the problem to try running R.app with gdb attached to the process. Then I realized that gdb has gone in Mavericks to be replaced by lldb, which I don't have much of a clue about how to operate....
>>>
>>> However, at least the first few steps seem to be similar to using gdb:
>>>
>>> Get the process ID for R.app using
>>>
>>> Peters-iMac:~ pd$ ps aux | grep R.app
>>> pd              28620   0.1  0.5  3877356  21724   ??  S     1Nov13   0:43.29 /Applications/R.app/Contents/MacOS/R
>>> pd              74190   0.0  0.0  2432784    596 s005  S+   11:45AM   0:00.01 grep R.app
>>>
>>> Then attach to it using
>>>
>>> Peters-iMac:~ pd$ lldb -p 28620
>>>
>>> give your password to allow the debugger to control the process, then, when lldb fires up, tell it to resume the process
>>>
>>> (lldb) continue
>>> Process 28620 resuming
>>>
>>> Next, you should try doing whatever it takes to reproduce the crash, figure out how to get a traceback, and report back to the list.
>>>
>>> -pd
>>>
>>> On 07 Nov 2013, at 10:19 , Rainer M Krug <Rainer at krugs.de> wrote:
>>>
>>>> I have to confirm both, the crash and the flashing of the colour wheel.
>>>>
>>>>
>>>>> sessionInfo()
>>>> R version 3.0.2 (2013-09-25)
>>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>>
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>> version
>>>>             _
>>>> platform       x86_64-apple-darwin10.8.0
>>>> arch           x86_64
>>>> os             darwin10.8.0
>>>> system         x86_64, darwin10.8.0
>>>> status
>>>> major          3
>>>> minor          0.2
>>>> year           2013
>>>> month          09
>>>> day            25
>>>> svn rev        63987
>>>> language       R
>>>> version.string R version 3.0.2 (2013-09-25)
>>>> nickname       Frisbee Sailing
>>>>>
>>>>
>>>> Cheers,
>>>>
>>>> Rainer
>>>>
>>>>
>>>>
>>>> On 11/07/13, 02:17 , John Magnotti wrote:
>>>>> I removed my current R.app and installed the one at:
>>>>> http://r.research.att.com/#GUI
>>>>> R-3.0-branch-snowleopard-signed.pkg
>>>>>
>>>>> but I still get an immediate crash when I 1) open the preferences
>>>>> window and 2) click any of the icons in the main "Show All" screen
>>>>> (but not the tabs)
>>>>>
>>>>> I also noticed that switching away from either the Color or the Syntax
>>>>> tab briefly flashes (open then close) the color wheel selection dialog
>>>>>
>>>>>> sessionInfo()
>>>>> R version 3.0.2 Patched (2013-11-04 r64155)
>>>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>>>
>>>>> locale:
>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>
>>>>> attached base packages:
>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>
>>>>>
>>>>> Is there any other specific information that would help?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> John
>>>>>
>>>>> On Wed, Nov 6, 2013 at 10:12 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>>>>>> Robert,
>>>>>>
>>>>>> I never could reproduce what Brian, John or Ranier were seeing with my
>>>>>> install (downloaded from http://r.research.att.com/ .
>>>>>>
>>>>>> Perhaps they could chime back in and give you more details.
>>>>>>
>>>>>> I'm now running Mavericks and still cannot replicate.
>>>>>> R version 3.0.2 (2013-09-25)
>>>>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>>>>
>>>>>> locale:
>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>
>>>>>> attached base packages:
>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>
>>>>>> Brandon
>>>>>>
>>>>>>
>>>>>> On Wed, Nov 6, 2013 at 12:13 AM, Robert J Goedman <goedman at icloud.com>wrote:
>>>>>>
>>>>>>> Brandon,
>>>>>>>
>>>>>>> Do you still see this problem?
>>>>>>>
>>>>>>> Are you using Simon's build?
>>>>>>>
>>>>>>> Regards,
>>>>>>> Rob J. Goedman
>>>>>>> goedman at icloud.com
>>>>>>>
>>>>>>>
>>>>>>> On Jan 2, 2013, at 3:28 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>>>>>> wrote:
>>>>>>>
>>>>>>> On 01/01/2013 17:48, Robert J Goedman wrote:
>>>>>>>
>>>>>>> Thanks for taking a look. I'll dig a bit further after getting back home
>>>>>>> tomorrow. It only happens through 'Apple-,' and is then not limited to
>>>>>>> just the Startup preferences (contrary to what I thought earlier).
>>>>>>>
>>>>>>>
>>>>>>> There is a bug report, PR#15017, related to this that we also have not
>>>>>>> been able to reproduce.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Rob J. Goedman
>>>>>>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On Jan 1, 2013, at 10:01 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk
>>>>>>> <mailto:ripley at stats.ox.ac.uk <ripley at stats.ox.ac.uk>>> wrote:
>>>>>>>
>>>>>>> Sorry, cannot reproduce (with Simon's build or mine, on Lion).
>>>>>>>
>>>>>>> Brian
>>>>>>>
>>>>>>> On 31/12/2012 19:37, Robert J Goedman wrote:
>>>>>>>
>>>>>>> Simon & Brian,
>>>>>>>
>>>>>>> Surely this is not high on your minds today, but I did notice an
>>>>>>> issue with R.app.
>>>>>>>
>>>>>>> Using below versions of R-3.0 and the Lion64 version of R.app I
>>>>>>> noticed that by immediately invoking the Startup preferences. e.g. by
>>>>>>> Command/Apple-, R.app will segfault:
>>>>>>>
>>>>>>> *** caught segfault ***
>>>>>>> address 0x10121d000, cause 'memory not mapped'
>>>>>>> ...
>>>>>>>
>>>>>>> Above route seems to always create the crash. I've seen a few other
>>>>>>> occurrences, always with the Startup preferences screen not being
>>>>>>> mapped, but less reproducible. Same behavior in Simon's build as in
>>>>>>> my own build of R.app.
>>>>>>>
>>>>>>> A reasonable work around is to get there through the Set Colors icon.
>>>>>>> I'm on OSX8.3 preview 3 and using Xcode 4.6 dp4. And using the CRAN
>>>>>>> version of R, did not yet build R myself as outlined in the Install file.
>>>>>>>
>>>>>>> Happy New Year, regards,
>>>>>>> Rob J. Goedman
>>>>>>> goedman at icloud.com <mailto:goedman at icloud.com <goedman at icloud.com>>
>>>>>>>
>>>>>>>
>>>>>>> ------------ my own build----------------------------
>>>>>>>
>>>>>>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>>>>>>> Consequences"
>>>>>>> Copyright (C) 2012 The R Foundation for Statistical Computing
>>>>>>> ISBN 3-900051-07-0
>>>>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>>>>>
>>>>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>>>>> You are welcome to redistribute it under certain conditions.
>>>>>>> Type 'license()' or 'licence()' for distribution details.
>>>>>>>
>>>>>>> Natural language support but running in an English locale
>>>>>>>
>>>>>>> R is a collaborative project with many contributors.
>>>>>>> Type 'contributors()' for more information and
>>>>>>> 'citation()' on how to cite R or R packages in publications.
>>>>>>>
>>>>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>>>>> 'help.start()' for an HTML browser interface to help.
>>>>>>> Type 'q()' to quit R.
>>>>>>>
>>>>>>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>>>>>>
>>>>>>> [Workspace restored from /Users/rob/Projects/.RData]
>>>>>>> [History restored from /Users/rob/Projects/.Rapp.history]
>>>>>>>
>>>>>>> sessionInfo()
>>>>>>>
>>>>>>> R Under development (unstable) (2012-12-30 r61489)
>>>>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>>>>>
>>>>>>>
>>>>>>> locale:
>>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>>
>>>>>>> attached base packages:
>>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>>
>>>>>>>
>>>>>>> -------------R.app from
>>>>>>> Simon---------------------------------------------
>>>>>>>
>>>>>>> R Under development (unstable) (2012-12-30 r61489) -- "Unsuffered
>>>>>>> Consequences"
>>>>>>> Copyright (C) 2012 The R Foundation for Statistical Computing
>>>>>>> ISBN 3-900051-07-0
>>>>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>>>>>
>>>>>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>>>>>> You are welcome to redistribute it under certain conditions.
>>>>>>> Type 'license()' or 'licence()' for distribution details.
>>>>>>>
>>>>>>> Natural language support but running in an English locale
>>>>>>>
>>>>>>> R is a collaborative project with many contributors.
>>>>>>> Type 'contributors()' for more information and
>>>>>>> 'citation()' on how to cite R or R packages in publications.
>>>>>>>
>>>>>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>>>>>> 'help.start()' for an HTML browser interface to help.
>>>>>>> Type 'q()' to quit R.
>>>>>>>
>>>>>>> [R.app GUI 1.53 (6418) x86_64-apple-darwin9.8.0]
>>>>>>>
>>>>>>> [Workspace restored from /Users/rob/Projects/.RData]
>>>>>>> [History restored from /Users/rob/Projects/.Rapp.history]
>>>>>>>
>>>>>>> sessionInfo()
>>>>>>>
>>>>>>> R Under development (unstable) (2012-12-30 r61489)
>>>>>>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>>>>>>
>>>>>>>
>>>>>>> locale:
>>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>>
>>>>>>> attached base packages:
>>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Brian D. Ripley, ripley at stats.ox.ac.uk <mailto:ripley at stats.ox.ac.uk<ripley at stats.ox.ac.uk>
>>>>>>>>
>>>>>>> Professor of Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
>>>>>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>>>>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>>>>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>>>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>>>>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>>>>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>>>>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On Oct 2, 2013, at 6:09 AM, Brandon Hurr <bhive01 at gmail.com> wrote:
>>>>>>>
>>>>>>> I cannot reproduce on my mac mini (2011). OS X 10.8.5.
>>>>>>>
>>>>>>> R version 3.0.2 (2013-09-25)
>>>>>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>>>>>
>>>>>>> locale:
>>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>>
>>>>>>> attached base packages:
>>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>>
>>>>>>>
>>>>>>> On Wed, Oct 2, 2013 at 2:03 PM, John Magnotti <john.magnotti at gmail.com
>>>>>>>> wrote:
>>>>>>>
>>>>>>> Going to the preferences screen in R.app (Command + , or
>>>>>>> R->preferences) and selecting any of the icons causes R to crash with
>>>>>>> a segfault. If I click any the tabs at the top of the preferences
>>>>>>> window R doesn't crash, but if I go back to the  "show all" tab and
>>>>>>> choose an option it causes an immediate failure.
>>>>>>>
>>>>>>> I'm running OS X 10.8.5, sessionInfo pasted below
>>>>>>>
>>>>>>> Thoughts?
>>>>>>>
>>>>>>> John
>>>>>>>
>>>>>>>
>>>>>>> sessionInfo()
>>>>>>>
>>>>>>> R version 3.0.2 (2013-09-25)
>>>>>>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>>>>>>
>>>>>>> locale:
>>>>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>>>>
>>>>>>> attached base packages:
>>>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>
>>>>>>>
>>>>>>> [[alternative HTML version deleted]]
>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Mac mailing list
>>>>>>> R-SIG-Mac at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>      [[alternative HTML version deleted]]
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>
>>>>
>>>> --
>>>> Rainer M. Krug
>>>>
>>>> email: RMKrug<at>gmail<dot>com
>>>>
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>
>>> --
>>> Peter Dalgaard, Professor
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>>
>>       [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From dinarussia at gmail.com  Tue Nov  5 22:13:40 2013
From: dinarussia at gmail.com (Diego M Salvanha)
Date: Tue, 5 Nov 2013 13:13:40 -0800
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
	code
Message-ID: <B7059A7A-480E-44BD-B359-0CC55842375C@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131105/26bb7ea5/attachment.pl>

From szehnder at uni-bonn.de  Wed Nov 13 10:26:15 2013
From: szehnder at uni-bonn.de (Simon Zehnder)
Date: Wed, 13 Nov 2013 10:26:15 +0100
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
	code
In-Reply-To: <B7059A7A-480E-44BD-B359-0CC55842375C@gmail.com>
References: <B7059A7A-480E-44BD-B359-0CC55842375C@gmail.com>
Message-ID: <61BA983C-F5EF-448F-B760-99BE04461788@uni-bonn.de>

Diego,

if you compiled the binary on your Mac with gfortran installed the library created still links to the libgfortran.3.dylib library. In your package shared object file there is now a link to the libgfortran.3.dylib library and when installing to R, this link is searched for but cannot be found, as it is on your Mac and not on the user?s Mac. I guess, if you include the static library instead of the dynamic things work. 

First look into the shared object file of your package: 
On the Shell type: otool -L yourpackagename.so
There should be a link to libgfortran.3.dylib
Second, check if libgfortran.a exists: 
On The shell type: locate libgfortran 

Now if it does, try the following:
Open your Makevars and add the line
PKG_LIBS = -L/path/to/your/libgfortran.a 

Then recompile and try to install the binary. 
Also look again into the shared object file with tool -L and check if libgfortran is still in there.

May it helps

Simon

On 05 Nov 2013, at 22:13, Diego M Salvanha <dinarussia at gmail.com> wrote:

> Hello-
> 
> I am facing issues generating my package binary for MacOS.
> 
> The generated binary doesn't work on another Macs :( 
> It is missing the libgfortran.3.dylib
> 
> once it's the binary, I'd expect my user doesn't need to have fortran installed !
> 
> Could you please help me ?
> 
> sessionInfo()
> R version 3.0.2 (2013-09-25)
> Platform: x86_64-apple-darwin10.8.0 (64-bit)
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base  
> 
> 
> *****************************************
> installed but doesn't load:
> 
> Error in dyn.load(file, DLLpath = DLLpath, ...) : 
> 
>  unable to load shared object '/Library/Frameworks/R.framework/Versions/3.0/Resources/library/ProbMetab/libs/ProbMetab.so':
> 
>  dlopen(/Library/Frameworks/R.framework/Versions/3.0/Resources/library/ProbMetab/libs/ProbMetab.so, 6): Library not loaded: /usr/local/lib/libgfortran.3.dylib
> 
>  Referenced from: /Library/Frameworks/R.framework/Versions/3.0/Resources/library/ProbMetab/libs/ProbMetab.so
> 
>  Reason: image not found
> 
> In addition: Warning messages:
> 
> 1: package ?ProbMetab? was built under R version 3.0.2 
> 
> 2: package ?Rcpp? was built under R version 3.0.2 
> 
> 3: In fun(libname, pkgname) :
> 
>   mzR has been built against a different Rcpp version
> 
> than is installed on your system. This might lead to errors
> 
> when loading mzR. If you encounter such issues, please send
> 
> a report, including the output of sessionInfo() to the Bioc
> 
> mailing list -- http://www.bioconductor.org/help/mailing-list.
> 
> 4: package ?igraph? was built under R version 3.0.2 
> 
> 
> 
> On Tue, Nov 5, 2013 at 12:19 PM, Diego M Salvanha <dinarussia at gmail.com> wrote:
> OPSS
> 
> the right command is:
> 
> install.packages("ProbMetab_1.0.tgz", repos=NULL)
> 
> without the type="source"
> 
> 
> Cheers.,
> Diego M Salvanha
> Grad. Student Inter-institutional Grad Program on Bioinformatics - University of Sao Paulo
> Member of LabPIB - http://labpib.fmrp.usp.br | Dr. Ricardo Z. N. Vencio
> Visiting Grad Student | Dr. Nitin Baliga's Group
> Institute for Systems Biology
> +1 (206) 732-1415 |  +1 (206) 407-8560
> 
> 
> 
> 
> 
> On Nov 5, 2013, at 12:16 PM, Diego M Salvanha <dinarussia at gmail.com> wrote:
> 
>> <ProbMetab_1.0.tgz>
>> 
>> 
>> you can install with command:
>> 
>> install.packages("ProbMetab_1.0.tgz", repos=NULL, type="source")
>> 
>> it should be ok now.
>> 
>> then, 
>> 
>> library(ProbMetab) and let me know it you get any error.
>> 
>> sorry to bother but I don't have another mac to try :(
>> 
>> 
>> Cheers.,
>> Diego M Salvanha
>> Grad. Student Inter-institutional Grad Program on Bioinformatics - University of Sao Paulo
>> Member of LabPIB - http://labpib.fmrp.usp.br | Dr. Ricardo Z. N. Vencio
>> Visiting Grad Student | Dr. Nitin Baliga's Group
>> Institute for Systems Biology
>> +1 (206) 732-1415 |  +1 (206) 407-8560
>> 
>> 
>> 
>> 
>> 
> 
> 
> 
> 
> 
> 
> 
> Cheers.,
> Diego M Salvanha
> Grad. Student Inter-institutional Grad Program on Bioinformatics - University of Sao Paulo
> Member of LabPIB - http://labpib.fmrp.usp.br | Dr. Ricardo Z. N. Vencio
> Visiting Grad Student | Dr. Nitin Baliga's Group
> Institute for Systems Biology
> +1 (206) 732-1415 |  +1 (206) 407-8560
> 
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From dimitrioschr at gmail.com  Wed Nov 13 10:45:41 2013
From: dimitrioschr at gmail.com (Dimitrios Chryssanthakopoulos)
Date: Wed, 13 Nov 2013 11:45:41 +0200
Subject: [R-SIG-Mac] [r] - R 3.0.2 - Mac OSX 10.8.5 - XML package -
	AntiVirus reports corrupt file
Message-ID: <6AE0E7EC-E646-43A7-8E0C-F10C6950B0E2@gmail.com>

 Hello, 

Sophos AntiVirus reports the following:

2013-11-13 01:58:07 +0200 Corrupt file: /Library/Frameworks/R.framework/Resources/library/XML/exampleData/dtd.zip

Should I worry? I cannot judge the operation or performance of the XML package as I am not an experienced user.

Thank you!



Using Mac OSX 10.8.5

> sessionInfo(package = "XML")
R version 3.0.2 (2013-09-25)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
character(0)

other attached packages:
[1] XML_3.95-0.2

loaded via a namespace (and not attached):
[1] base_3.0.2      datasets_3.0.2  graphics_3.0.2  grDevices_3.0.2 methods_3.0.2   stats_3.0.2    
[7] tools_3.0.2     utils_3.0.2

From ripley at stats.ox.ac.uk  Wed Nov 13 12:46:00 2013
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 13 Nov 2013 11:46:00 +0000
Subject: [R-SIG-Mac] [r] - R 3.0.2 - Mac OSX 10.8.5 - XML package -
 AntiVirus reports corrupt file
In-Reply-To: <6AE0E7EC-E646-43A7-8E0C-F10C6950B0E2@gmail.com>
References: <6AE0E7EC-E646-43A7-8E0C-F10C6950B0E2@gmail.com>
Message-ID: <52836678.7000303@stats.ox.ac.uk>

On 13/11/2013 09:45, Dimitrios Chryssanthakopoulos wrote:
>   Hello,
>
> Sophos AntiVirus reports the following:
>
> 2013-11-13 01:58:07 +0200 Corrupt file: /Library/Frameworks/R.framework/Resources/library/XML/exampleData/dtd.zip
>
> Should I worry? I cannot judge the operation or performance of the XML package as I am not an experienced user.

It is 'exampleData' so only needed for checks.

My dept's Sophos does not complain so there is a chance this is corrupt 
and I would try re-installing.  Preferably from sources, as that is a 
rather old version of the package and the failure on the current version 
was an internet access failure.

Simon: could you retry this?

> Thank you!
>
>
>
> Using Mac OSX 10.8.5
>
>> sessionInfo(package = "XML")
> R version 3.0.2 (2013-09-25)
> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> character(0)
>
> other attached packages:
> [1] XML_3.95-0.2
>
> loaded via a namespace (and not attached):
> [1] base_3.0.2      datasets_3.0.2  graphics_3.0.2  grDevices_3.0.2 methods_3.0.2   stats_3.0.2
> [7] tools_3.0.2     utils_3.0.2
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From randy.cs.lai at gmail.com  Wed Nov 13 12:54:07 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Wed, 13 Nov 2013 03:54:07 -0800
Subject: [R-SIG-Mac] R GUI and Quartz
Message-ID: <74522680-6979-4261-9857-14904E9F9847@gmail.com>

Hi all,

I am studying the R GUI code and I have a question about Quartz.

It seems that R GUI will add a dummy Quartz Cocoa window before the quartz is closed.
What is the reason behind?

I have tried compiled the code without this part, it raises an error for EXC_HAD_ACCESS (code=EXC_i386_GPFLT).

Randy

From ripley at stats.ox.ac.uk  Wed Nov 13 12:54:37 2013
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 13 Nov 2013 11:54:37 +0000
Subject: [R-SIG-Mac] [r] - R 3.0.2 - Mac OSX 10.8.5 - XML package -
 AntiVirus reports corrupt file
In-Reply-To: <52836678.7000303@stats.ox.ac.uk>
References: <6AE0E7EC-E646-43A7-8E0C-F10C6950B0E2@gmail.com>
	<52836678.7000303@stats.ox.ac.uk>
Message-ID: <5283687D.1010904@stats.ox.ac.uk>

On 13/11/2013 11:46, Prof Brian Ripley wrote:
> On 13/11/2013 09:45, Dimitrios Chryssanthakopoulos wrote:
>>   Hello,
>>
>> Sophos AntiVirus reports the following:
>>
>> 2013-11-13 01:58:07 +0200 Corrupt file:
>> /Library/Frameworks/R.framework/Resources/library/XML/exampleData/dtd.zip
>>
>> Should I worry? I cannot judge the operation or performance of the XML
>> package as I am not an experienced user.
>
> It is 'exampleData' so only needed for checks.

zip -T suggests it is corrupt in package sources for the current version:

tystie% zip -T dtd.zip
	zip warning: expected 25 entries but found 24

zip error: Zip file structure invalid (dtd.zip)

so Cc:ing the package maintainer.

>
> My dept's Sophos does not complain so there is a chance this is corrupt
> and I would try re-installing.  Preferably from sources, as that is a
> rather old version of the package and the failure on the current version
> was an internet access failure.
>
> Simon: could you retry this?
>
>> Thank you!
>>
>>
>>
>> Using Mac OSX 10.8.5
>>
>>> sessionInfo(package = "XML")
>> R version 3.0.2 (2013-09-25)
>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> character(0)
>>
>> other attached packages:
>> [1] XML_3.95-0.2
>>
>> loaded via a namespace (and not attached):
>> [1] base_3.0.2      datasets_3.0.2  graphics_3.0.2  grDevices_3.0.2
>> methods_3.0.2   stats_3.0.2
>> [7] tools_3.0.2     utils_3.0.2
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pdalgd at gmail.com  Wed Nov 13 13:02:59 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 13 Nov 2013 13:02:59 +0100
Subject: [R-SIG-Mac] Warning Messages After Installing Mc OS X version
In-Reply-To: <2906BB4E-7D43-4F03-93B9-FB4EC79D2F67@yahoo.com>
References: <2906BB4E-7D43-4F03-93B9-FB4EC79D2F67@yahoo.com>
Message-ID: <D1F949A5-B8B6-4B21-B184-F8F437B75A18@gmail.com>

The recipe is in Section 7 of the R MacOS X FAQ these days.

-pd

On 29 Oct 2013, at 23:01 , Michael Espina <michael_espina at yahoo.com> wrote:

> Dear Sir/Ma'am,
> Would like to seek assistance regarding the warning messages i got after starting the program. I have the mac OS X version installed. I have searched in the FAQ but cannot find about this error.
> 
> Appreciate if you can instruct me how to fix these error.
> 
> Below is the screenshots of the warning messages.
> 
> Thank and Best Regards,
> Michael Espina 
> <PastedGraphic-1.png>_______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From simon.urbanek at r-project.org  Wed Nov 13 15:22:53 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 13 Nov 2013 09:22:53 -0500
Subject: [R-SIG-Mac] Mac OS R/Rcpp/Octave/LLVM/clang/g++ issues
In-Reply-To: <CADUbQ5hgi3kgzvS6bOnDGwBVv81OFWgJ-RhFVhS3k_s8jrc4tQ@mail.gmail.com>
References: <CADUbQ5hgi3kgzvS6bOnDGwBVv81OFWgJ-RhFVhS3k_s8jrc4tQ@mail.gmail.com>
Message-ID: <30EB90D3-968E-44A4-A321-B90B54B21A24@r-project.org>

Dominick,

you may want to follow recent thread on Mavericks here - it discussed the ABI incompatibility of gcc and clang as well as the tools options.

Cheers,
Simon


On Oct 30, 2013, at 11:12 PM, Dominick Samperi <djsamperi at gmail.com> wrote:

> Hello,
> 
> The following strange behavior under Mac OS was distilled from
> attempts to resolve problems with the RcppOctave package, but
> the problem will be illustrated without use of this package.
> 
> Basically, when I try to mix use of the Octave library with
> Rcpp, there is a memory exception when the Mac dlopen() is used to
> open Rcpp.so (the error occurs in loadLibrary()). To reproduce,
> simply drop the two attached files (Makevars and strtest.cpp) into
> Rcpp/src. Then 'R CMD INSTALL Rcpp' will fail with a memory problem,
> at least sometimes?
> 
> I say "sometimes" because this problem did not occur before I
> reinstalled Mac OS X 10.8 (because the update to Mavericks
> failed). On the other hand, it did occur before the update when I
> tried to use an older version of Octave (installed by MacPorts).
> For this test the latest version of Octave (3.6.4) was installed
> using homebrew.
> 
> Note that the trivial source file strtest.cpp defines one function
> that is not actually called! Just instantiating the Octave
> class string_vector is enough to trigger the problem. If the
> line using string_vector is commented out there is no problem.
> It may also not occur if you have older software installed?
> 
> After the OS reinstall, and after installing the latest version of the
> command line tools, there is no llvm-gcc-4.2 and llvm-g++-4.2
> like there was previously?
> 
> The problem is clearly related to how templates are instantiated
> (or not instantiated) when using clang++ or g++, possibly a version
> mismatch, or some Mac OS environmental issue that I have not
> been able to isolate. Static initialization may also be a factor.
> 
> The last post in this link seems to address a related issue...
> https://bugs.launchpad.net/pocl/+bug/1005329
> 
> This messy problem raises the question: what is in store
> for R under Mac OS X going forward? Apple is dropping support
> for gfortran, and even for gcc/g++, so will clang/clang++ be
> used? What about Fortran? DragonEgg?
> 
> Thanks,
> Dominick
> 
> <Makevars><strtest.cpp>_______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From simon.urbanek at r-project.org  Wed Nov 13 15:24:42 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 13 Nov 2013 09:24:42 -0500
Subject: [R-SIG-Mac] Compiling a portable binary that includes Fortran
	code
In-Reply-To: <61BA983C-F5EF-448F-B760-99BE04461788@uni-bonn.de>
References: <B7059A7A-480E-44BD-B359-0CC55842375C@gmail.com>
	<61BA983C-F5EF-448F-B760-99BE04461788@uni-bonn.de>
Message-ID: <9FE0C98F-671C-41F8-8225-23AD12CEC4CC@r-project.org>


On Nov 13, 2013, at 4:26 AM, Simon Zehnder <szehnder at uni-bonn.de> wrote:

> Diego,
> 
> if you compiled the binary on your Mac with gfortran installed the library created still links to the libgfortran.3.dylib library. In your package shared object file there is now a link to the libgfortran.3.dylib library and when installing to R, this link is searched for but cannot be found, as it is on your Mac and not on the user?s Mac. I guess, if you include the static library instead of the dynamic things work. 
> 

FWIW if you use recommended tools then this is non-issue since R ships with libgfortran, so the problem is really in the tools used, not in R nor the package.

Cheers,
Simon


> First look into the shared object file of your package: 
> On the Shell type: otool -L yourpackagename.so
> There should be a link to libgfortran.3.dylib
> Second, check if libgfortran.a exists: 
> On The shell type: locate libgfortran 
> 
> Now if it does, try the following:
> Open your Makevars and add the line
> PKG_LIBS = -L/path/to/your/libgfortran.a 
> 
> Then recompile and try to install the binary. 
> Also look again into the shared object file with tool -L and check if libgfortran is still in there.
> 
> May it helps
> 
> Simon
> 
> On 05 Nov 2013, at 22:13, Diego M Salvanha <dinarussia at gmail.com> wrote:
> 
>> Hello-
>> 
>> I am facing issues generating my package binary for MacOS.
>> 
>> The generated binary doesn't work on another Macs :( 
>> It is missing the libgfortran.3.dylib
>> 
>> once it's the binary, I'd expect my user doesn't need to have fortran installed !
>> 
>> Could you please help me ?
>> 
>> sessionInfo()
>> R version 3.0.2 (2013-09-25)
>> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base  
>> 
>> 
>> *****************************************
>> installed but doesn't load:
>> 
>> Error in dyn.load(file, DLLpath = DLLpath, ...) : 
>> 
>> unable to load shared object '/Library/Frameworks/R.framework/Versions/3.0/Resources/library/ProbMetab/libs/ProbMetab.so':
>> 
>> dlopen(/Library/Frameworks/R.framework/Versions/3.0/Resources/library/ProbMetab/libs/ProbMetab.so, 6): Library not loaded: /usr/local/lib/libgfortran.3.dylib
>> 
>> Referenced from: /Library/Frameworks/R.framework/Versions/3.0/Resources/library/ProbMetab/libs/ProbMetab.so
>> 
>> Reason: image not found
>> 
>> In addition: Warning messages:
>> 
>> 1: package ?ProbMetab? was built under R version 3.0.2 
>> 
>> 2: package ?Rcpp? was built under R version 3.0.2 
>> 
>> 3: In fun(libname, pkgname) :
>> 
>>  mzR has been built against a different Rcpp version
>> 
>> than is installed on your system. This might lead to errors
>> 
>> when loading mzR. If you encounter such issues, please send
>> 
>> a report, including the output of sessionInfo() to the Bioc
>> 
>> mailing list -- http://www.bioconductor.org/help/mailing-list.
>> 
>> 4: package ?igraph? was built under R version 3.0.2 
>> 
>> 
>> 
>> On Tue, Nov 5, 2013 at 12:19 PM, Diego M Salvanha <dinarussia at gmail.com> wrote:
>> OPSS
>> 
>> the right command is:
>> 
>> install.packages("ProbMetab_1.0.tgz", repos=NULL)
>> 
>> without the type="source"
>> 
>> 
>> Cheers.,
>> Diego M Salvanha
>> Grad. Student Inter-institutional Grad Program on Bioinformatics - University of Sao Paulo
>> Member of LabPIB - http://labpib.fmrp.usp.br | Dr. Ricardo Z. N. Vencio
>> Visiting Grad Student | Dr. Nitin Baliga's Group
>> Institute for Systems Biology
>> +1 (206) 732-1415 |  +1 (206) 407-8560
>> 
>> 
>> 
>> 
>> 
>> On Nov 5, 2013, at 12:16 PM, Diego M Salvanha <dinarussia at gmail.com> wrote:
>> 
>>> <ProbMetab_1.0.tgz>
>>> 
>>> 
>>> you can install with command:
>>> 
>>> install.packages("ProbMetab_1.0.tgz", repos=NULL, type="source")
>>> 
>>> it should be ok now.
>>> 
>>> then, 
>>> 
>>> library(ProbMetab) and let me know it you get any error.
>>> 
>>> sorry to bother but I don't have another mac to try :(
>>> 
>>> 
>>> Cheers.,
>>> Diego M Salvanha
>>> Grad. Student Inter-institutional Grad Program on Bioinformatics - University of Sao Paulo
>>> Member of LabPIB - http://labpib.fmrp.usp.br | Dr. Ricardo Z. N. Vencio
>>> Visiting Grad Student | Dr. Nitin Baliga's Group
>>> Institute for Systems Biology
>>> +1 (206) 732-1415 |  +1 (206) 407-8560
>>> 
>>> 
>>> 
>>> 
>>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> Cheers.,
>> Diego M Salvanha
>> Grad. Student Inter-institutional Grad Program on Bioinformatics - University of Sao Paulo
>> Member of LabPIB - http://labpib.fmrp.usp.br | Dr. Ricardo Z. N. Vencio
>> Visiting Grad Student | Dr. Nitin Baliga's Group
>> Institute for Systems Biology
>> +1 (206) 732-1415 |  +1 (206) 407-8560
>> 
>> 
>> 
>> 
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From simon.urbanek at r-project.org  Wed Nov 13 15:26:29 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 13 Nov 2013 09:26:29 -0500
Subject: [R-SIG-Mac] R GUI and Quartz
In-Reply-To: <74522680-6979-4261-9857-14904E9F9847@gmail.com>
References: <74522680-6979-4261-9857-14904E9F9847@gmail.com>
Message-ID: <807AB0FA-E709-449C-9899-C35ABD937D16@r-project.org>

On Nov 13, 2013, at 6:54 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:

> Hi all,
> 
> I am studying the R GUI code and I have a question about Quartz.
> 
> It seems that R GUI will add a dummy Quartz Cocoa window before the quartz is closed.
> What is the reason behind?
> 

Can you supply some details as of what you're looking at? The GUI is no longer driving Quartz, so I'm not sure what code you have in mind.

Cheers,
Simon




> I have tried compiled the code without this part, it raises an error for EXC_HAD_ACCESS (code=EXC_i386_GPFLT).
> 
> Randy
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From djsamperi at gmail.com  Wed Nov 13 17:03:56 2013
From: djsamperi at gmail.com (Dominick Samperi)
Date: Wed, 13 Nov 2013 11:03:56 -0500
Subject: [R-SIG-Mac] Mac OS R/Rcpp/Octave/LLVM/clang/g++ issues
In-Reply-To: <30EB90D3-968E-44A4-A321-B90B54B21A24@r-project.org>
References: <CADUbQ5hgi3kgzvS6bOnDGwBVv81OFWgJ-RhFVhS3k_s8jrc4tQ@mail.gmail.com>
	<30EB90D3-968E-44A4-A321-B90B54B21A24@r-project.org>
Message-ID: <CADUbQ5ibRijxqTCA8=90M0cjORUQDyrRM2aHfLEdZZjDKLeimQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131113/0946c111/attachment.pl>

From djsamperi at gmail.com  Wed Nov 13 17:17:57 2013
From: djsamperi at gmail.com (Dominick Samperi)
Date: Wed, 13 Nov 2013 11:17:57 -0500
Subject: [R-SIG-Mac] Mac OS R/Rcpp/Octave/LLVM/clang/g++ issues
In-Reply-To: <CADUbQ5ibRijxqTCA8=90M0cjORUQDyrRM2aHfLEdZZjDKLeimQ@mail.gmail.com>
References: <CADUbQ5hgi3kgzvS6bOnDGwBVv81OFWgJ-RhFVhS3k_s8jrc4tQ@mail.gmail.com>
	<30EB90D3-968E-44A4-A321-B90B54B21A24@r-project.org>
	<CADUbQ5ibRijxqTCA8=90M0cjORUQDyrRM2aHfLEdZZjDKLeimQ@mail.gmail.com>
Message-ID: <CADUbQ5irt21HBwCj_WJCTZMHXV9Vsa1sVszTJNox_moB6F36Ag@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131113/5d51ac33/attachment.pl>

From randy.cs.lai at gmail.com  Wed Nov 13 21:07:25 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Wed, 13 Nov 2013 12:07:25 -0800
Subject: [R-SIG-Mac] R GUI and Quartz
In-Reply-To: <807AB0FA-E709-449C-9899-C35ABD937D16@r-project.org>
References: <74522680-6979-4261-9857-14904E9F9847@gmail.com>
	<807AB0FA-E709-449C-9899-C35ABD937D16@r-project.org>
Message-ID: <C99BE4B2-FC67-49AA-8E16-E603D5FB3B31@gmail.com>

I meant the method windowWillCloseNotifications in RDocumentController.m

1. change ?QuartzCocoaView? to something otherwise to avoid it being invoked,
2. compile the R GUI
3. run the plot function, e.g. plot(1,1)
4. close the quartz

you will see the error  EXC_HAD_ACCESS (code=EXC_i386_GPFLT).

there may be a memory leak in R code!?


On Nov 13, 2013, at 6:26 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> On Nov 13, 2013, at 6:54 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
> 
>> Hi all,
>> 
>> I am studying the R GUI code and I have a question about Quartz.
>> 
>> It seems that R GUI will add a dummy Quartz Cocoa window before the quartz is closed.
>> What is the reason behind?
>> 
> 
> Can you supply some details as of what you're looking at? The GUI is no longer driving Quartz, so I'm not sure what code you have in mind.
> 
> Cheers,
> Simon
> 
> 
> 
> 
>> I have tried compiled the code without this part, it raises an error for EXC_HAD_ACCESS (code=EXC_i386_GPFLT).
>> 
>> Randy
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 


From randy.cs.lai at gmail.com  Wed Nov 13 23:10:22 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Wed, 13 Nov 2013 14:10:22 -0800
Subject: [R-SIG-Mac] R GUI and Quartz
In-Reply-To: <C99BE4B2-FC67-49AA-8E16-E603D5FB3B31@gmail.com>
References: <74522680-6979-4261-9857-14904E9F9847@gmail.com>
	<807AB0FA-E709-449C-9899-C35ABD937D16@r-project.org>
	<C99BE4B2-FC67-49AA-8E16-E603D5FB3B31@gmail.com>
Message-ID: <2958AD99-65D6-46C3-94D6-3BEBE1469F9A@gmail.com>

I figured it out. The window instance will be released in the main R, so we have to retain the instance until it is released.
Otherwise, the window will be released twice.

- (void)windowWillCloseNotifications:(NSNotification*) aNotification
{

	NSWindow *w = [aNotification object];
    
    if (w && [[(NSObject*)[w delegate] className] isEqualToString:@"QuartzCocoaView"]);
         [w retain];


On Nov 13, 2013, at 12:07 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:

> I meant the method windowWillCloseNotifications in RDocumentController.m
> 
> 1. change ?QuartzCocoaView? to something otherwise to avoid it being invoked,
> 2. compile the R GUI
> 3. run the plot function, e.g. plot(1,1)
> 4. close the quartz
> 
> you will see the error  EXC_HAD_ACCESS (code=EXC_i386_GPFLT).
> 
> there may be a memory leak in R code!?
> 
> 
> On Nov 13, 2013, at 6:26 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> On Nov 13, 2013, at 6:54 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>> 
>>> Hi all,
>>> 
>>> I am studying the R GUI code and I have a question about Quartz.
>>> 
>>> It seems that R GUI will add a dummy Quartz Cocoa window before the quartz is closed.
>>> What is the reason behind?
>>> 
>> 
>> Can you supply some details as of what you're looking at? The GUI is no longer driving Quartz, so I'm not sure what code you have in mind.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> 
>> 
>>> I have tried compiled the code without this part, it raises an error for EXC_HAD_ACCESS (code=EXC_i386_GPFLT).
>>> 
>>> Randy
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 


From randy.cs.lai at gmail.com  Wed Nov 13 23:28:56 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Wed, 13 Nov 2013 14:28:56 -0800
Subject: [R-SIG-Mac] R GUI and Quartz
In-Reply-To: <2958AD99-65D6-46C3-94D6-3BEBE1469F9A@gmail.com>
References: <74522680-6979-4261-9857-14904E9F9847@gmail.com>
	<807AB0FA-E709-449C-9899-C35ABD937D16@r-project.org>
	<C99BE4B2-FC67-49AA-8E16-E603D5FB3B31@gmail.com>
	<2958AD99-65D6-46C3-94D6-3BEBE1469F9A@gmail.com>
Message-ID: <208ABEE2-2B12-4A9E-9C4B-0B098B2F3BFA@gmail.com>

an additional semi colon is the last post.

- (void)windowWillCloseNotifications:(NSNotification*) aNotification
{

	NSWindow *w = [aNotification object];
    
    if (w && [[(NSObject*)[w delegate] className] isEqualToString:@"QuartzCocoaView"])
         [w retain];

On Nov 13, 2013, at 2:10 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:

> I figured it out. The window instance will be released in the main R, so we have to retain the instance until it is released.
> Otherwise, the window will be released twice.
> 
> - (void)windowWillCloseNotifications:(NSNotification*) aNotification
> {
> 
> 	NSWindow *w = [aNotification object];
> 
>    if (w && [[(NSObject*)[w delegate] className] isEqualToString:@"QuartzCocoaView"]);
>         [w retain];
> 
> 
> On Nov 13, 2013, at 12:07 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:
> 
>> I meant the method windowWillCloseNotifications in RDocumentController.m
>> 
>> 1. change ?QuartzCocoaView? to something otherwise to avoid it being invoked,
>> 2. compile the R GUI
>> 3. run the plot function, e.g. plot(1,1)
>> 4. close the quartz
>> 
>> you will see the error  EXC_HAD_ACCESS (code=EXC_i386_GPFLT).
>> 
>> there may be a memory leak in R code!?
>> 
>> 
>> On Nov 13, 2013, at 6:26 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>>> On Nov 13, 2013, at 6:54 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>>> 
>>>> Hi all,
>>>> 
>>>> I am studying the R GUI code and I have a question about Quartz.
>>>> 
>>>> It seems that R GUI will add a dummy Quartz Cocoa window before the quartz is closed.
>>>> What is the reason behind?
>>>> 
>>> 
>>> Can you supply some details as of what you're looking at? The GUI is no longer driving Quartz, so I'm not sure what code you have in mind.
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> 
>>> 
>>> 
>>>> I have tried compiled the code without this part, it raises an error for EXC_HAD_ACCESS (code=EXC_i386_GPFLT).
>>>> 
>>>> Randy
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>> 
>> 
> 


From randy.cs.lai at gmail.com  Thu Nov 14 00:36:45 2013
From: randy.cs.lai at gmail.com (Randy Lai)
Date: Wed, 13 Nov 2013 15:36:45 -0800
Subject: [R-SIG-Mac] R GUI and Quartz
In-Reply-To: <208ABEE2-2B12-4A9E-9C4B-0B098B2F3BFA@gmail.com>
References: <74522680-6979-4261-9857-14904E9F9847@gmail.com>
	<807AB0FA-E709-449C-9899-C35ABD937D16@r-project.org>
	<C99BE4B2-FC67-49AA-8E16-E603D5FB3B31@gmail.com>
	<2958AD99-65D6-46C3-94D6-3BEBE1469F9A@gmail.com>
	<208ABEE2-2B12-4A9E-9C4B-0B098B2F3BFA@gmail.com>
Message-ID: <F26B121F-BBCD-49EC-80E3-19EBB6F17445@gmail.com>

I found a better solution which works in ARC mode

- (void)windowWillCloseNotifications:(NSNotification*) aNotification
{
    NSWindow* w = [aNotification object];

    if (w && [[(NSObject*)[w delegate] className] isEqualToString:@"QuartzCocoaView"]){
        [w setReleasedWhenClosed:NO];
    }

On Nov 13, 2013, at 2:28 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:

> an additional semi colon is the last post.
> 
> - (void)windowWillCloseNotifications:(NSNotification*) aNotification
> {
> 
> 	NSWindow *w = [aNotification object];
> 
>    if (w && [[(NSObject*)[w delegate] className] isEqualToString:@"QuartzCocoaView"])
>         [w retain];
> 
> On Nov 13, 2013, at 2:10 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:
> 
>> I figured it out. The window instance will be released in the main R, so we have to retain the instance until it is released.
>> Otherwise, the window will be released twice.
>> 
>> - (void)windowWillCloseNotifications:(NSNotification*) aNotification
>> {
>> 
>> 	NSWindow *w = [aNotification object];
>> 
>>   if (w && [[(NSObject*)[w delegate] className] isEqualToString:@"QuartzCocoaView"]);
>>        [w retain];
>> 
>> 
>> On Nov 13, 2013, at 12:07 PM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>> 
>>> I meant the method windowWillCloseNotifications in RDocumentController.m
>>> 
>>> 1. change ?QuartzCocoaView? to something otherwise to avoid it being invoked,
>>> 2. compile the R GUI
>>> 3. run the plot function, e.g. plot(1,1)
>>> 4. close the quartz
>>> 
>>> you will see the error  EXC_HAD_ACCESS (code=EXC_i386_GPFLT).
>>> 
>>> there may be a memory leak in R code!?
>>> 
>>> 
>>> On Nov 13, 2013, at 6:26 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>> 
>>>> On Nov 13, 2013, at 6:54 AM, Randy Lai <randy.cs.lai at gmail.com> wrote:
>>>> 
>>>>> Hi all,
>>>>> 
>>>>> I am studying the R GUI code and I have a question about Quartz.
>>>>> 
>>>>> It seems that R GUI will add a dummy Quartz Cocoa window before the quartz is closed.
>>>>> What is the reason behind?
>>>>> 
>>>> 
>>>> Can you supply some details as of what you're looking at? The GUI is no longer driving Quartz, so I'm not sure what code you have in mind.
>>>> 
>>>> Cheers,
>>>> Simon
>>>> 
>>>> 
>>>> 
>>>> 
>>>>> I have tried compiled the code without this part, it raises an error for EXC_HAD_ACCESS (code=EXC_i386_GPFLT).
>>>>> 
>>>>> Randy
>>>>> _______________________________________________
>>>>> R-SIG-Mac mailing list
>>>>> R-SIG-Mac at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>> 
>>> 
>> 
> 


From gsargeant at usgs.gov  Thu Nov 14 18:58:21 2013
From: gsargeant at usgs.gov (Sargeant, Glen)
Date: Thu, 14 Nov 2013 11:58:21 -0600
Subject: [R-SIG-Mac] Installing spatstat 1.34-1
Message-ID: <CAATPAJbKSSr3UwOZnWe6B+NVff_g65_6ebfmarVGTAKYNor1Cg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131114/a369918f/attachment.pl>

From djsamperi at gmail.com  Thu Nov 14 20:12:49 2013
From: djsamperi at gmail.com (Dominick Samperi)
Date: Thu, 14 Nov 2013 14:12:49 -0500
Subject: [R-SIG-Mac] Mac OS R/Rcpp/Octave/LLVM/clang/g++ issues
In-Reply-To: <CADUbQ5irt21HBwCj_WJCTZMHXV9Vsa1sVszTJNox_moB6F36Ag@mail.gmail.com>
References: <CADUbQ5hgi3kgzvS6bOnDGwBVv81OFWgJ-RhFVhS3k_s8jrc4tQ@mail.gmail.com>
	<30EB90D3-968E-44A4-A321-B90B54B21A24@r-project.org>
	<CADUbQ5ibRijxqTCA8=90M0cjORUQDyrRM2aHfLEdZZjDKLeimQ@mail.gmail.com>
	<CADUbQ5irt21HBwCj_WJCTZMHXV9Vsa1sVszTJNox_moB6F36Ag@mail.gmail.com>
Message-ID: <CADUbQ5hyvcmGG96TpWvWpY0n9pYRT_5WziSh-Ym910VTrfzO2A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131114/ecef513d/attachment.pl>

From pdalgd at gmail.com  Thu Nov 14 20:18:51 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 14 Nov 2013 20:18:51 +0100
Subject: [R-SIG-Mac] Installing spatstat 1.34-1
In-Reply-To: <CAATPAJbKSSr3UwOZnWe6B+NVff_g65_6ebfmarVGTAKYNor1Cg@mail.gmail.com>
References: <CAATPAJbKSSr3UwOZnWe6B+NVff_g65_6ebfmarVGTAKYNor1Cg@mail.gmail.com>
Message-ID: <FAC9FFF1-E6AF-4E07-804B-ED004C14850F@gmail.com>


On 14 Nov 2013, at 18:58 , Sargeant, Glen <gsargeant at usgs.gov> wrote:

> The latest release of spatstat 1.34-1 requires R version >= 3.0.2.
> 
> I upgraded my R installation to 3.0.2 and cannot install the new version of
> spatstat.  I strongly suspect this is a Mac-specific issue because I find
> no indication that others are having the same problem.
> 
> I've double-checked package requirements.
> 
> Version:1.34-1Depends:R (? 3.0.2), stats, graphics, grDevices, utils,
> mgcv<http://cran.r-project.org/web/packages/mgcv/index.html>
> , deldir <http://cran.r-project.org/web/packages/deldir/index.html> (?
> 0.0-21), abind <http://cran.r-project.org/web/packages/abind/index.html>,
> tensor <http://cran.r-project.org/web/packages/tensor/index.html>,
> polyclip<http://cran.r-project.org/web/packages/polyclip/index.html>
> 
> I've checked the version of my R installation:
> 
>> R.version
>               _
> platform       x86_64-apple-darwin10.8.0
> arch           x86_64
> os             darwin10.8.0
> system         x86_64, darwin10.8.0
> status
> major          3
> minor          0.2
> year           2013
> month          09
> day            25
> svn rev        63987
> language       R
> version.string R version 3.0.2 (2013-09-25)
> nickname       Frisbee Sailing
> 
> I've installed from CRAN and I get an out-dated version.

Installing from CRAN worked fine for me (same version info):

> library(spatstat)
Loading required package: mgcv
Loading required package: nlme
This is mgcv 1.7-26. For overview type 'help("mgcv-package")'.
Loading required package: deldir
deldir 0.1-1
Loading required package: abind
Loading required package: tensor
Loading required package: polyclip
polyclip 1.1-0

spatstat 1.34-1       (nickname: ?Window Cleaner?) 
For an introduction to spatstat, type ?beginner?

Notice that if you have installs in multiple locations, an older install might be masking a newer one.

> 
> I've downloaded the Mac binary:
> 
>> install.packages("~/Downloads/spatstat_1.34-1.tgz", repos = NULL)
> Warning in install.packages :
>  package ?~/Downloads/spatstat_1.34-1.tgz? is not available (for R version
> 3.0.2)

Did the ?user-friendly? downloader perchance unpack the .tgz file for you?

> 
> Thanks in advance for suggestions or explanations!
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From alexander.guczka at uni-hamburg.de  Fri Nov 15 13:12:08 2013
From: alexander.guczka at uni-hamburg.de (Alexander Guczka)
Date: Fri, 15 Nov 2013 13:12:08 +0100
Subject: [R-SIG-Mac] segfaults while editing code scripts on 10.9 mavericks
Message-ID: <880161A7-00C2-42FF-94D7-3AEB69E4F76F@uni-hamburg.de>

Dear R-SIG,

I have met some Problems since I updated to OSX Mavericks. From time to time does R crash with a "segfault" if I understand it correctly. I think that some of the crashes are associated with the R-GUI.

One recurring (but not completely reproducible) crash happens, when I edit code-documents/scripts and try to search and replace more than one element at a time. I tried to reduce the amount of Elements to "replace all" but with no effect. Some days ago I switched to another code editor because of that.

What happens? R stops working the second I click "replace all" and shows segfault ?  "memory not mapped"

The other editor (sub-etha-edit) warns me that in R-GUI produced .R-scripts have different/not consistent line ending formats and suggest changing all to linux-style LF. Since changing one of my bigger scripts in sub-etha-edit "replace all" works again in R-GUI. Maybe this information helps. 

I had a lot of crashes with 3.0.1 on Mavericks, changed to 3.0.2 which works really good most of the time. Because of the crash problem mentioned above I tried updating to a patched version of 3.0.2 with no significant effect (pun intended). 

current versions:
R version 3.0.2 Patched (2013-11-11 r64202) -- "Frisbee Sailing"
R.app GUI 1.62 (6596) x86_64-apple-darwin10.8.0  


Best wishes,
Alexander Guczka


From djsamperi at gmail.com  Fri Nov 15 23:12:34 2013
From: djsamperi at gmail.com (Dominick Samperi)
Date: Fri, 15 Nov 2013 17:12:34 -0500
Subject: [R-SIG-Mac] Posts to R-SIG-Mac scrubbed?
Message-ID: <CADUbQ5i+5d7hjO2XYDa55wuEgQ7ZXPQP3LRsXWcskOcc=n5NQQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131115/f3157b86/attachment.pl>

From lianoglou.steve at gene.com  Fri Nov 15 23:25:10 2013
From: lianoglou.steve at gene.com (Steve Lianoglou)
Date: Fri, 15 Nov 2013 14:25:10 -0800
Subject: [R-SIG-Mac] Posts to R-SIG-Mac scrubbed?
In-Reply-To: <CADUbQ5i+5d7hjO2XYDa55wuEgQ7ZXPQP3LRsXWcskOcc=n5NQQ@mail.gmail.com>
References: <CADUbQ5i+5d7hjO2XYDa55wuEgQ7ZXPQP3LRsXWcskOcc=n5NQQ@mail.gmail.com>
Message-ID: <CAHA9McORicVcyc2K78DA9SoCX4K+mmcypTbZfxu22a84V33Y+w@mail.gmail.com>

Hi,

On Fri, Nov 15, 2013 at 2:12 PM, Dominick Samperi <djsamperi at gmail.com> wrote:
> Hello,
>
> Several of my posts to R-SIG-Mac have not been forwarded to
> the list, yet have turned up in the archives with the message: "An
> embedded and charset-unspecified text was scrubbed...".
>
> I tried changing my Gmail settings for outgoing email from
> "use default text format" to "use UTF-8 unicode", but this didn't
> change anything.
>
> Any ideas?

>From the looks of it:

>         [[alternative HTML version deleted]]

You are not sending your mails as plain text.

I suspect that if you configure gmail to send as plain test (which,
btw, I believe is a common suggested across all R-* lists), then all
will be Feng Shui

-steve

-- 
Steve Lianoglou
Computational Biologist
Bioinformatics and Computational Biology
Genentech


From djsamperi at gmail.com  Sat Nov 16 00:32:35 2013
From: djsamperi at gmail.com (Dominick Samperi)
Date: Fri, 15 Nov 2013 18:32:35 -0500
Subject: [R-SIG-Mac] Posts to R-SIG-Mac scrubbed?
In-Reply-To: <CAHA9McORicVcyc2K78DA9SoCX4K+mmcypTbZfxu22a84V33Y+w@mail.gmail.com>
References: <CADUbQ5i+5d7hjO2XYDa55wuEgQ7ZXPQP3LRsXWcskOcc=n5NQQ@mail.gmail.com>
	<CAHA9McORicVcyc2K78DA9SoCX4K+mmcypTbZfxu22a84V33Y+w@mail.gmail.com>
Message-ID: <CADUbQ5i_4v6ncYAVmW8SihvEdBtM6OH03dcfxQqDdL4HwZMi4A@mail.gmail.com>

Thanks Steve,
This is being sent in plain text mode...

On Fri, Nov 15, 2013 at 5:25 PM, Steve Lianoglou
<lianoglou.steve at gene.com> wrote:
> Hi,
>
> On Fri, Nov 15, 2013 at 2:12 PM, Dominick Samperi <djsamperi at gmail.com> wrote:
>> Hello,
>>
>> Several of my posts to R-SIG-Mac have not been forwarded to
>> the list, yet have turned up in the archives with the message: "An
>> embedded and charset-unspecified text was scrubbed...".
>>
>> I tried changing my Gmail settings for outgoing email from
>> "use default text format" to "use UTF-8 unicode", but this didn't
>> change anything.
>>
>> Any ideas?
>
> From the looks of it:
>
>>         [[alternative HTML version deleted]]
>
> You are not sending your mails as plain text.
>
> I suspect that if you configure gmail to send as plain test (which,
> btw, I believe is a common suggested across all R-* lists), then all
> will be Feng Shui
>
> -steve
>
> --
> Steve Lianoglou
> Computational Biologist
> Bioinformatics and Computational Biology
> Genentech


From lianoglou.steve at gene.com  Sat Nov 16 00:35:47 2013
From: lianoglou.steve at gene.com (Steve Lianoglou)
Date: Fri, 15 Nov 2013 15:35:47 -0800
Subject: [R-SIG-Mac] Posts to R-SIG-Mac scrubbed?
In-Reply-To: <CADUbQ5i_4v6ncYAVmW8SihvEdBtM6OH03dcfxQqDdL4HwZMi4A@mail.gmail.com>
References: <CADUbQ5i+5d7hjO2XYDa55wuEgQ7ZXPQP3LRsXWcskOcc=n5NQQ@mail.gmail.com>
	<CAHA9McORicVcyc2K78DA9SoCX4K+mmcypTbZfxu22a84V33Y+w@mail.gmail.com>
	<CADUbQ5i_4v6ncYAVmW8SihvEdBtM6OH03dcfxQqDdL4HwZMi4A@mail.gmail.com>
Message-ID: <CAHA9McO7wMSs9VzRe2WRiZj_-t9Coa6MNcqKz3yCky=q0q5WQQ@mail.gmail.com>

On Fri, Nov 15, 2013 at 3:32 PM, Dominick Samperi <djsamperi at gmail.com> wrote:
> Thanks Steve,
> This is being sent in plain text mode...

?Tada!

https://stat.ethz.ch/pipermail/r-sig-mac/2013-November/010511.html

vs. your original question:

https://stat.ethz.ch/pipermail/r-sig-mac/2013-November/010509.html

:-)

-steve

-- 
Steve Lianoglou
Computational Biologist
Bioinformatics and Computational Biology
Genentech


From dwinsemius at comcast.net  Sun Nov 17 04:53:35 2013
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 16 Nov 2013 21:53:35 -0600
Subject: [R-SIG-Mac] Posts to R-SIG-Mac scrubbed?
In-Reply-To: <CAHA9McO7wMSs9VzRe2WRiZj_-t9Coa6MNcqKz3yCky=q0q5WQQ@mail.gmail.com>
References: <CADUbQ5i+5d7hjO2XYDa55wuEgQ7ZXPQP3LRsXWcskOcc=n5NQQ@mail.gmail.com>
	<CAHA9McORicVcyc2K78DA9SoCX4K+mmcypTbZfxu22a84V33Y+w@mail.gmail.com>
	<CADUbQ5i_4v6ncYAVmW8SihvEdBtM6OH03dcfxQqDdL4HwZMi4A@mail.gmail.com>
	<CAHA9McO7wMSs9VzRe2WRiZj_-t9Coa6MNcqKz3yCky=q0q5WQQ@mail.gmail.com>
Message-ID: <238C247A-7C2B-4BB4-841F-A8E512B6420B@comcast.net>


On Nov 15, 2013, at 5:35 PM, Steve Lianoglou wrote:

> On Fri, Nov 15, 2013 at 3:32 PM, Dominick Samperi  
> <djsamperi at gmail.com> wrote:
>> Thanks Steve,
>> This is being sent in plain text mode...
>
> ?Tada!
>
> https://stat.ethz.ch/pipermail/r-sig-mac/2013-November/010511.html
>
> vs. your original question:
>
> https://stat.ethz.ch/pipermail/r-sig-mac/2013-November/010509.html

If that solved the problem then by al means continue sending plain  
text. It will make it easier for readers to view it in the archives  
without having to click through. It is definitely the preferred  
format. But do understand that both massages made it through to the  
list.

-- David.

>
> :-)
>
> -steve
>
> -- 
> Steve Lianoglou
> Computational Biologist
> Bioinformatics and Computational Biology
> Genentech
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

David Winsemius, MD
Alameda, CA, USA


From jfox at mcmaster.ca  Wed Nov 20 12:52:39 2013
From: jfox at mcmaster.ca (John Fox)
Date: Wed, 20 Nov 2013 06:52:39 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
Message-ID: <web-484109293@cgpsrv2.cis.mcmaster.ca>

Dear Jonathan,

I'm afraid that I don't know why you're experiencing this problem. I upgraded my own Mac to Mavericks and the Rcmdr still appears to work fine. Also, no one else has reported this problem to me, which of course doesn't mean that no one else has experienced it. 

I don't doubt that something is wrong on your system but I don't know what it might be. You've already reinstalled all of the relevant software, which is what I would have suggested.

I'm copying this response to the R Mac OS X email list in case someone who reads the list has a suggestion or, perhaps, has also experienced the problem.

I'm sorry that I can't be of more help at this time.

John

On Wed, 20 Nov 2013 00:19:54 -0600
 Jonathan Chapman <petsrme2 at icloud.com> wrote:
> Dr. Fox,
> 
> I am an MPH student at the University of Minnesota.  I was referred to you by Dr. Ann Brearley because I am having issues running Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs slowly, more-so as a lag, after an initial 1-2 minutes of use.  Prior to that 1-2 minutes of use and the subsequent lag in performance, Rcmdr runs perfectly fine via XQuartz.  Once closing out XQuartz and restarting it, Rcmdr runs fine until after 1-2 minutes of use when the lag sets in again.
> I?ve tried to remedy the situation prior to contacting you.  First, I reinstalled XQuartz.  When that failed to solve the problem, I reinstalled XQuartz along with R and Rcmdr.  That attempt also failed.  I do not know what else to do or who/where else to turn.  
> Do you have any incite?  Have you heard of anyone else encountering this problem?
> 
> Jonathan M. Chapman, DVM
> 312-813-1166
> petsrme2 at icloud.com
> 
> 
> 

------------------------------------------------
John Fox
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From ripley at stats.ox.ac.uk  Wed Nov 20 13:42:15 2013
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Nov 2013 12:42:15 +0000
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-484109293@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
Message-ID: <528CAE27.1030501@stats.ox.ac.uk>

Just checking: which version of XQuartz?

Although I have not experienced any problems, people recommended 
updating to 2.7.5 and I got prompted to do that yesterday (it was 
released last week).

On 20/11/2013 11:52, John Fox wrote:
> Dear Jonathan,
>
> I'm afraid that I don't know why you're experiencing this problem. I upgraded my own Mac to Mavericks and the Rcmdr still appears to work fine. Also, no one else has reported this problem to me, which of course doesn't mean that no one else has experienced it.
>
> I don't doubt that something is wrong on your system but I don't know what it might be. You've already reinstalled all of the relevant software, which is what I would have suggested.
>
> I'm copying this response to the R Mac OS X email list in case someone who reads the list has a suggestion or, perhaps, has also experienced the problem.
>
> I'm sorry that I can't be of more help at this time.
>
> John
>
> On Wed, 20 Nov 2013 00:19:54 -0600
>   Jonathan Chapman <petsrme2 at icloud.com> wrote:
>> Dr. Fox,
>>
>> I am an MPH student at the University of Minnesota.  I was referred to you by Dr. Ann Brearley because I am having issues running Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs slowly, more-so as a lag, after an initial 1-2 minutes of use.  Prior to that 1-2 minutes of use and the subsequent lag in performance, Rcmdr runs perfectly fine via XQuartz.  Once closing out XQuartz and restarting it, Rcmdr runs fine until after 1-2 minutes of use when the lag sets in again.
>> I?ve tried to remedy the situation prior to contacting you.  First, I reinstalled XQuartz.  When that failed to solve the problem, I reinstalled XQuartz along with R and Rcmdr.  That attempt also failed.  I do not know what else to do or who/where else to turn.
>> Do you have any incite?  Have you heard of anyone else encountering this problem?
>>
>> Jonathan M. Chapman, DVM
>> 312-813-1166
>> petsrme2 at icloud.com
>>
>>
>>
>
> ------------------------------------------------
> John Fox
> McMaster University
> Hamilton, Ontario, Canada
> http://socserv.mcmaster.ca/jfox/
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From reijo.sund at helsinki.fi  Wed Nov 20 14:28:24 2013
From: reijo.sund at helsinki.fi (Reijo Sund)
Date: Wed, 20 Nov 2013 15:28:24 +0200
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <528CAE27.1030501@stats.ox.ac.uk>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
Message-ID: <8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>

So far I have not had problems with XQuartz, but similar slow-down occasionally happens while using tcltk-applications with the Aqua version of Tcl/Tk (ActiveTcl 8.6.x binary distribution). Unfortunately I have not been able to create a reproducible example. 

Anyhow, if XQuartz update won?t help, maybe it is worth checking if there is any difference while using R.app or command-line R.

- - -

Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> Just checking: which version of XQuartz?
> 
> Although I have not experienced any problems, people recommended updating to 2.7.5 and I got prompted to do that yesterday (it was released last week).
> 
> On 20/11/2013 11:52, John Fox wrote:
>> Dear Jonathan,
>> 
>> I'm afraid that I don't know why you're experiencing this problem. I upgraded my own Mac to Mavericks and the Rcmdr still appears to work fine. Also, no one else has reported this problem to me, which of course doesn't mean that no one else has experienced it.
>> 
>> I don't doubt that something is wrong on your system but I don't know what it might be. You've already reinstalled all of the relevant software, which is what I would have suggested.
>> 
>> I'm copying this response to the R Mac OS X email list in case someone who reads the list has a suggestion or, perhaps, has also experienced the problem.
>> 
>> I'm sorry that I can't be of more help at this time.
>> 
>> John
>> 
>> On Wed, 20 Nov 2013 00:19:54 -0600
>>  Jonathan Chapman <petsrme2 at icloud.com> wrote:
>>> Dr. Fox,
>>> 
>>> I am an MPH student at the University of Minnesota.  I was referred to you by Dr. Ann Brearley because I am having issues running Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs slowly, more-so as a lag, after an initial 1-2 minutes of use.  Prior to that 1-2 minutes of use and the subsequent lag in performance, Rcmdr runs perfectly fine via XQuartz.  Once closing out XQuartz and restarting it, Rcmdr runs fine until after 1-2 minutes of use when the lag sets in again.
>>> I?ve tried to remedy the situation prior to contacting you.  First, I reinstalled XQuartz.  When that failed to solve the problem, I reinstalled XQuartz along with R and Rcmdr.  That attempt also failed.  I do not know what else to do or who/where else to turn.
>>> Do you have any incite?  Have you heard of anyone else encountering this problem?
>>> 
>>> Jonathan M. Chapman, DVM
>>> 312-813-1166
>>> petsrme2 at icloud.com
>>> 


From mspinola10 at gmail.com  Wed Nov 20 17:05:11 2013
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Wed, 20 Nov 2013 10:05:11 -0600
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
Message-ID: <CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131120/a4af0b78/attachment.pl>

From jfox at mcmaster.ca  Wed Nov 20 18:19:04 2013
From: jfox at mcmaster.ca (John Fox)
Date: Wed, 20 Nov 2013 12:19:04 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
Message-ID: <web-484180030@cgpsrv2.cis.mcmaster.ca>

Dear Jonathan et al,

First, thank you to all who responded. As I said, I haven't noticed this problem myself, but I'll try again on my Mac later today when I have some time and see whether I can reproduce it. I suspect that this is a tcltk-related issue, not specific to the Rcmdr, but I don't know that for sure.

In the meantime, here are two things to try:

(1) Reijo Sund suggested trying to run R and the Rcmdr from the command line (i.e., in a terminal window), to see whether the problem manifests itself there. The Rcmdr doesn't need R.app. 

(2) It's possible that the slowdown is caused by the way that the Rcmdr handles R Markdown documents. The overhead gets greater as the session proceeds. To test this possibility, you could suppress the R Markdown tab (via the Rcmdr Tools -> Options menu, Output tab -- uncheck the box for R Markdown) and see whether the problem disappears.

Please let me know what happens.

Best,
 John


On Wed, 20 Nov 2013 10:41:28 -0600
 Jonathan Chapman <petsrme2 at icloud.com> wrote:
> I upgraded to XQuartz 2.7.5, but it still lags.
> 
> Jonathan M. Chapman, DVM
> 312-813-1166
> petsrme2 at icloud.com
> 
> > On Nov 20, 2013, at 10:05 AM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
> > 
> > I also have the same experience (like Jonathan) with Rcmdr in Mac with Mavericks.  After few minutes Rcmdr starts to have time lags.  I updated to XQuartz 2.7.5 but the behavior is the same.
> > 
> > Best,
> > 
> > Manuel
> > 
> > 
> > 2013/11/20 Reijo Sund <reijo.sund at helsinki.fi>
> >> So far I have not had problems with XQuartz, but similar slow-down occasionally happens while using tcltk-applications with the Aqua version of Tcl/Tk (ActiveTcl 8.6.x binary distribution). Unfortunately I have not been able to create a reproducible example.
> >> 
> >> Anyhow, if XQuartz update won?t help, maybe it is worth checking if there is any difference while using R.app or command-line R.
> >> 
> >> - - -
> >> 
> >> Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> >> > Just checking: which version of XQuartz?
> >> >
> >> > Although I have not experienced any problems, people recommended updating to 2.7.5 and I got prompted to do that yesterday (it was released last week).
> >> >
> >> > On 20/11/2013 11:52, John Fox wrote:
> >> >> Dear Jonathan,
> >> >>
> >> >> I'm afraid that I don't know why you're experiencing this problem. I upgraded my own Mac to Mavericks and the Rcmdr still appears to work fine. Also, no one else has reported this problem to me, which of course doesn't mean that no one else has experienced it.
> >> >>
> >> >> I don't doubt that something is wrong on your system but I don't know what it might be. You've already reinstalled all of the relevant software, which is what I would have suggested.
> >> >>
> >> >> I'm copying this response to the R Mac OS X email list in case someone who reads the list has a suggestion or, perhaps, has also experienced the problem.
> >> >>
> >> >> I'm sorry that I can't be of more help at this time.
> >> >>
> >> >> John
> >> >>
> >> >> On Wed, 20 Nov 2013 00:19:54 -0600
> >> >>  Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >> >>> Dr. Fox,
> >> >>>
> >> >>> I am an MPH student at the University of Minnesota.  I was referred to you by Dr. Ann Brearley because I am having issues running Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs slowly, more-so as a lag, after an initial 1-2 minutes of use.  Prior to that 1-2 minutes of use and the subsequent lag in performance, Rcmdr runs perfectly fine via XQuartz.  Once closing out XQuartz and restarting it, Rcmdr runs fine until after 1-2 minutes of use when the lag sets in again.
> >> >>> I?ve tried to remedy the situation prior to contacting you.  First, I reinstalled XQuartz.  When that failed to solve the problem, I reinstalled XQuartz along with R and Rcmdr.  That attempt also failed.  I do not know what else to do or who/where else to turn.
> >> >>> Do you have any incite?  Have you heard of anyone else encountering this problem?
> >> >>>
> >> >>> Jonathan M. Chapman, DVM
> >> >>> 312-813-1166
> >> >>> petsrme2 at icloud.com
> >> >>>
> >> 
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > 
> > 
> > 
> > -- 
> > Manuel Sp?nola, Ph.D. 
> > Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre 
> > Universidad Nacional 
> > Apartado 1350-3000 
> > Heredia 
> > COSTA RICA 
> > mspinola at una.ac.cr 
> > mspinola10 at gmail.com 
> > Tel?fono: (506) 2277-3598 
> > Fax: (506) 2237-7036 
> > Personal website: Lobito de r?o 
> > Institutional website: ICOMVIS


From pdalgd at gmail.com  Wed Nov 20 21:17:40 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 20 Nov 2013 21:17:40 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-484180030@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<web-484180030@cgpsrv2.cis.mcmaster.ca>
Message-ID: <B319AEC8-AEB1-469B-9094-60CF8CE5D876@gmail.com>

Notes inlined below,

-pd


On 20 Nov 2013, at 18:19 , John Fox <jfox at mcmaster.ca> wrote:

> Dear Jonathan et al,
> 
> First, thank you to all who responded. As I said, I haven't noticed this problem myself, but I'll try again on my Mac later today when I have some time and see whether I can reproduce it. I suspect that this is a tcltk-related issue, not specific to the Rcmdr, but I don't know that for sure.
> 

Affirmative. You can get similar behaviour from library(tcltk); demo(tkfaq) in R.app. It doesn?t seem to be happening with R in a Terminal window.

You can snap out of it temporarily by switching to the R console and back.

So a working hypothesis is that something is "backgrounding" the R process after a while, if it doesn?t have input focus. Since the tcltk event loop runs off the keyboard loop, we have the trouble. My take is that someone needs to take a look at how R.app handles keyboard input, in particular the timeout aspect. 


> In the meantime, here are two things to try:
> 
> (1) Reijo Sund suggested trying to run R and the Rcmdr from the command line (i.e., in a terminal window), to see whether the problem manifests itself there. The Rcmdr doesn't need R.app. 
> 
> (2) It's possible that the slowdown is caused by the way that the Rcmdr handles R Markdown documents. The overhead gets greater as the session proceeds. To test this possibility, you could suppress the R Markdown tab (via the Rcmdr Tools -> Options menu, Output tab -- uncheck the box for R Markdown) and see whether the problem disappears.
> 

Negative. I see the issue even with an older Rcmdr version without the Markdown stuff.

> Please let me know what happens.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jfox at mcmaster.ca  Wed Nov 20 21:29:46 2013
From: jfox at mcmaster.ca (John Fox)
Date: Wed, 20 Nov 2013 15:29:46 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-484180030@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<web-484180030@cgpsrv2.cis.mcmaster.ca>
Message-ID: <web-484235992@cgpsrv2.cis.mcmaster.ca>

Dear all,

I was able to reproduce the problem on my Macbook and believe I have a solution, which is to run R and the Rcmdr in a terminal window. When I did this, the Rcmdr behaved normally. I'll investigate further and report my findings back to the list. 

I'm copying this message to Simon Urbanek who maintains R.app in case he has insight into the problem. 

I'm also interested whether running R from a terminal window solves the problem for others who experienced it.

Best,
 John

On Wed, 20 Nov 2013 12:19:04 -0500
 "John Fox" <jfox at mcmaster.ca> wrote:
> Dear Jonathan et al,
> 
> First, thank you to all who responded. As I said, I haven't noticed this problem myself, but I'll try again on my Mac later today when I have some time and see whether I can reproduce it. I suspect that this is a tcltk-related issue, not specific to the Rcmdr, but I don't know that for sure.
> 
> In the meantime, here are two things to try:
> 
> (1) Reijo Sund suggested trying to run R and the Rcmdr from the command line (i.e., in a terminal window), to see whether the problem manifests itself there. The Rcmdr doesn't need R.app. 
> 
> (2) It's possible that the slowdown is caused by the way that the Rcmdr handles R Markdown documents. The overhead gets greater as the session proceeds. To test this possibility, you could suppress the R Markdown tab (via the Rcmdr Tools -> Options menu, Output tab -- uncheck the box for R Markdown) and see whether the problem disappears.
> 
> Please let me know what happens.
> 
> Best,
>  John
> 
> 
> On Wed, 20 Nov 2013 10:41:28 -0600
>  Jonathan Chapman <petsrme2 at icloud.com> wrote:
> > I upgraded to XQuartz 2.7.5, but it still lags.
> > 
> > Jonathan M. Chapman, DVM
> > 312-813-1166
> > petsrme2 at icloud.com
> > 
> > > On Nov 20, 2013, at 10:05 AM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
> > > 
> > > I also have the same experience (like Jonathan) with Rcmdr in Mac with Mavericks.  After few minutes Rcmdr starts to have time lags.  I updated to XQuartz 2.7.5 but the behavior is the same.
> > > 
> > > Best,
> > > 
> > > Manuel
> > > 
> > > 
> > > 2013/11/20 Reijo Sund <reijo.sund at helsinki.fi>
> > >> So far I have not had problems with XQuartz, but similar slow-down occasionally happens while using tcltk-applications with the Aqua version of Tcl/Tk (ActiveTcl 8.6.x binary distribution). Unfortunately I have not been able to create a reproducible example.
> > >> 
> > >> Anyhow, if XQuartz update won?t help, maybe it is worth checking if there is any difference while using R.app or command-line R.
> > >> 
> > >> - - -
> > >> 
> > >> Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> > >> > Just checking: which version of XQuartz?
> > >> >
> > >> > Although I have not experienced any problems, people recommended updating to 2.7.5 and I got prompted to do that yesterday (it was released last week).
> > >> >
> > >> > On 20/11/2013 11:52, John Fox wrote:
> > >> >> Dear Jonathan,
> > >> >>
> > >> >> I'm afraid that I don't know why you're experiencing this problem. I upgraded my own Mac to Mavericks and the Rcmdr still appears to work fine. Also, no one else has reported this problem to me, which of course doesn't mean that no one else has experienced it.
> > >> >>
> > >> >> I don't doubt that something is wrong on your system but I don't know what it might be. You've already reinstalled all of the relevant software, which is what I would have suggested.
> > >> >>
> > >> >> I'm copying this response to the R Mac OS X email list in case someone who reads the list has a suggestion or, perhaps, has also experienced the problem.
> > >> >>
> > >> >> I'm sorry that I can't be of more help at this time.
> > >> >>
> > >> >> John
> > >> >>
> > >> >> On Wed, 20 Nov 2013 00:19:54 -0600
> > >> >>  Jonathan Chapman <petsrme2 at icloud.com> wrote:
> > >> >>> Dr. Fox,
> > >> >>>
> > >> >>> I am an MPH student at the University of Minnesota.  I was referred to you by Dr. Ann Brearley because I am having issues running Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs slowly, more-so as a lag, after an initial 1-2 minutes of use.  Prior to that 1-2 minutes of use and the subsequent lag in performance, Rcmdr runs perfectly fine via XQuartz.  Once closing out XQuartz and restarting it, Rcmdr runs fine until after 1-2 minutes of use when the lag sets in again.
> > >> >>> I?ve tried to remedy the situation prior to contacting you.  First, I reinstalled XQuartz.  When that failed to solve the problem, I reinstalled XQuartz along with R and Rcmdr.  That attempt also failed.  I do not know what else to do or who/where else to turn.
> > >> >>> Do you have any incite?  Have you heard of anyone else encountering this problem?
> > >> >>>
> > >> >>> Jonathan M. Chapman, DVM
> > >> >>> 312-813-1166
> > >> >>> petsrme2 at icloud.com
> > >> >>>
> > >> 
> > >> _______________________________________________
> > >> R-SIG-Mac mailing list
> > >> R-SIG-Mac at r-project.org
> > >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > > 
> > > 
> > > 
> > > -- 
> > > Manuel Sp?nola, Ph.D. 
> > > Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre 
> > > Universidad Nacional 
> > > Apartado 1350-3000 
> > > Heredia 
> > > COSTA RICA 
> > > mspinola at una.ac.cr 
> > > mspinola10 at gmail.com 
> > > Tel?fono: (506) 2277-3598 
> > > Fax: (506) 2237-7036 
> > > Personal website: Lobito de r?o 
> > > Institutional website: ICOMVIS

------------------------------------------------
John Fox
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From jfox at mcmaster.ca  Wed Nov 20 21:31:42 2013
From: jfox at mcmaster.ca (John Fox)
Date: Wed, 20 Nov 2013 15:31:42 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <B319AEC8-AEB1-469B-9094-60CF8CE5D876@gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<web-484180030@cgpsrv2.cis.mcmaster.ca>
	<B319AEC8-AEB1-469B-9094-60CF8CE5D876@gmail.com>
Message-ID: <web-484236480@cgpsrv2.cis.mcmaster.ca>

Dear Peter,

Thank you very much for taking a look at this problem and for confirming that the problem is general to tcltk.

I coincidentally just send a message to the list with the same conclusion -- that the problem occurs in R.app but not in a terminal window.

Best,
 John

On Wed, 20 Nov 2013 21:17:40 +0100
 peter dalgaard <pdalgd at gmail.com> wrote:
> Notes inlined below,
> 
> -pd
> 
> 
> On 20 Nov 2013, at 18:19 , John Fox <jfox at mcmaster.ca> wrote:
> 
> > Dear Jonathan et al,
> > 
> > First, thank you to all who responded. As I said, I haven't noticed this problem myself, but I'll try again on my Mac later today when I have some time and see whether I can reproduce it. I suspect that this is a tcltk-related issue, not specific to the Rcmdr, but I don't know that for sure.
> > 
> 
> Affirmative. You can get similar behaviour from library(tcltk); demo(tkfaq) in R.app. It doesn?t seem to be happening with R in a Terminal window.
> 
> You can snap out of it temporarily by switching to the R console and back.
> 
> So a working hypothesis is that something is "backgrounding" the R process after a while, if it doesn?t have input focus. Since the tcltk event loop runs off the keyboard loop, we have the trouble. My take is that someone needs to take a look at how R.app handles keyboard input, in particular the timeout aspect. 
> 
> 
> > In the meantime, here are two things to try:
> > 
> > (1) Reijo Sund suggested trying to run R and the Rcmdr from the command line (i.e., in a terminal window), to see whether the problem manifests itself there. The Rcmdr doesn't need R.app. 
> > 
> > (2) It's possible that the slowdown is caused by the way that the Rcmdr handles R Markdown documents. The overhead gets greater as the session proceeds. To test this possibility, you could suppress the R Markdown tab (via the Rcmdr Tools -> Options menu, Output tab -- uncheck the box for R Markdown) and see whether the problem disappears.
> > 
> 
> Negative. I see the issue even with an older Rcmdr version without the Markdown stuff.
> 
> > Please let me know what happens.
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 

------------------------------------------------
John Fox
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From tobeycarman at gmail.com  Wed Nov 20 21:49:26 2013
From: tobeycarman at gmail.com (Tobey Carman)
Date: Wed, 20 Nov 2013 11:49:26 -0900
Subject: [R-SIG-Mac] Problem installing ncdf4, in Homebrew R
Message-ID: <CAMAmKPuhstgUoYJ4oMy79QAErNANeo1h5UX__s7XzLvUFcxKLg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131120/cf7f2ea2/attachment.pl>

From mspinola10 at gmail.com  Wed Nov 20 22:24:51 2013
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Wed, 20 Nov 2013 15:24:51 -0600
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-484235992@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<web-484180030@cgpsrv2.cis.mcmaster.ca>
	<web-484235992@cgpsrv2.cis.mcmaster.ca>
Message-ID: <CABkCotQqL80SV4NFFZiPOsw4SUCWumbji8g3Or=FoaX7Av9+gg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131120/e1f00fa5/attachment.pl>

From ripley at stats.ox.ac.uk  Wed Nov 20 22:25:20 2013
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Nov 2013 21:25:20 +0000
Subject: [R-SIG-Mac] Problem installing ncdf4, in Homebrew R
In-Reply-To: <CAMAmKPuhstgUoYJ4oMy79QAErNANeo1h5UX__s7XzLvUFcxKLg@mail.gmail.com>
References: <CAMAmKPuhstgUoYJ4oMy79QAErNANeo1h5UX__s7XzLvUFcxKLg@mail.gmail.com>
Message-ID: <528D28C0.5040301@stats.ox.ac.uk>

On 20/11/2013 20:49, Tobey Carman wrote:
> Hi -
> I am not sure if this is the right place for this question. I am fairly new
> to R and still figuring out how to best manage packages. If this is not the
> best venue for this question, please direct me elsewhere.

It will do, but 'the homebrew version of R' is not anything official and 
you would probably do better to ask on R-devel since you are treating OS 
X as another Unix-alike.

The package has a broken configure, and has been reported to the 
so-called maintainer long ago.

You omitted the line with the error.  On my (native OS X) system you can 
see the log at 
http://www.r-project.org/nosvn/R.check/r-devel-macosx-x86_64/ncdf4-00install.html 
. Note the link command there:

clang -mtune=native -dynamiclib -Wl,-headerpad_max_install_names 
-undefined dynamic_lookup -single_module -multiply_defined suppress 
-L/usr/local/lib -o ncdf4.so ncdf.o ncdf2.o ncdf3.o src_ncdf4.o 
-Wl,-rpath, -L/usr/local/lib -lnetcdf -lhdf5_hl -lhdf5 -lm -lz -lcurl 
-L/Users/ripley/R/R-devel/lib -lR -dylib_file 
libRblas.dylib:/Users/ripley/R/R-devel/lib/libRblas.dylib -Wl,-framework 
-Wl,CoreFoundation

The use of -Wl,-rpath, is simply wrong and swallows -lnetcdf.  So you 
need to correct it.

One way to do so is to unpack the sources, try to install, copy the 
PKG_LIBS from src/Makevars to src/Makevars.in, correct it and try again.

I have in src/Makevars.in

PKG_LIBS= -L/usr/local/lib -lnetcdf -lhdf5_hl -lhdf5 -lm -lz -lcurl

but your mileage may differ (and probably will if you have a dynamic 
libndetcdf).


>
> I am trying to install the ncdf4 R package using:
>
>> install.packages('ncdf4')
>
> This command, downloads the package, finds nc-config, appears to collect
> all the correct settings, and appears to compile ncdf4 with no errors. But
> after compiling, and running a few tests, the command fails during a test
> to load the just-compiled ncdf4 libraries:
>
>> install.packages('ncdf4')
> ...
> skipping lots of output for downloading, nc-config, configuring, compiling,
> testing...
> ...
> ** testing if installed package can be loaded
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>    unable to load shared object
> '/usr/local/Cellar/r/3.0.0/R.framework/Versions/3.0/Resources/library/ncdf4/libs/ncdf4.so':
>
> dlopen(/usr/local/Cellar/r/3.0.0/R.framework/Versions/3.0/Resources/library/ncdf4/libs/ncdf4.so,
> 6): Symbol not found: _nc_close
>    Referenced from:
> /usr/local/Cellar/r/3.0.0/R.framework/Versions/3.0/Resources/library/ncdf4/libs/ncdf4.so
>    Expected in: flat namespace
>   in
> /usr/local/Cellar/r/3.0.0/R.framework/Versions/3.0/Resources/library/ncdf4/libs/ncdf4.so
> Error: loading failed
> Execution halted
> ERROR: loading failed
> * removing
> ?/usr/local/Cellar/r/3.0.0/R.framework/Versions/3.0/Resources/library/ncdf4?
> Warning in install.packages :
>    installation of package ?ncdf4? had non-zero exit status
>>
>
> I am on a Mac, 10.8.2. I am using Homebrew to manage my packages. I have
> the main netcdf library, 4.2.1.1,  that is installed via Homebrew and has
> been working fine in several other applications. Likewise I am using a
> Homebrew version of R.
>
> I am not sure how to keep trouble shooting this. I can provide more output
> if necessary.
> Thanks,
>
> Tobey Carman
>
> Spatial Ecology Lab,
> University of Alaska Fairbanks
>
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From kevinushey at gmail.com  Wed Nov 20 22:29:08 2013
From: kevinushey at gmail.com (Kevin Ushey)
Date: Wed, 20 Nov 2013 13:29:08 -0800
Subject: [R-SIG-Mac] Problem installing ncdf4, in Homebrew R
In-Reply-To: <CAMAmKPuhstgUoYJ4oMy79QAErNANeo1h5UX__s7XzLvUFcxKLg@mail.gmail.com>
References: <CAMAmKPuhstgUoYJ4oMy79QAErNANeo1h5UX__s7XzLvUFcxKLg@mail.gmail.com>
Message-ID: <CAJXgQP15SdJX-XpVxr8CubqE83OJ07P0JKicR7vXhAuu=i9W-Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131120/ff424778/attachment.pl>

From pdalgd at gmail.com  Wed Nov 20 22:53:11 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 20 Nov 2013 22:53:11 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <CABkCotQqL80SV4NFFZiPOsw4SUCWumbji8g3Or=FoaX7Av9+gg@mail.gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<web-484180030@cgpsrv2.cis.mcmaster.ca>
	<web-484235992@cgpsrv2.cis.mcmaster.ca>
	<CABkCotQqL80SV4NFFZiPOsw4SUCWumbji8g3Or=FoaX7Av9+gg@mail.gmail.com>
Message-ID: <D804FFA5-1C87-4B3C-AEDA-749CD417E81B@gmail.com>


On 20 Nov 2013, at 22:24 , Manuel Sp?nola <mspinola10 at gmail.com> wrote:

> Thank you very much John.
> 
> How can I run R and Rcmdr in a terminal window?
> 

[Kids these days...]

Just open the Terminal application (it?s in the Utilities subfolder of the Applications folder) and type R at its prompt. Then library(Rcmdr) at the R prompt.

-pd

> Best,
> 
> Manuel
> 
> 
> 2013/11/20 John Fox <jfox at mcmaster.ca>
> 
>> Dear all,
>> 
>> I was able to reproduce the problem on my Macbook and believe I have a
>> solution, which is to run R and the Rcmdr in a terminal window. When I did
>> this, the Rcmdr behaved normally. I'll investigate further and report my
>> findings back to the list.
>> 
>> I'm copying this message to Simon Urbanek who maintains R.app in case he
>> has insight into the problem.
>> 
>> I'm also interested whether running R from a terminal window solves the
>> problem for others who experienced it.
>> 
>> Best,
>> John
>> 
>> On Wed, 20 Nov 2013 12:19:04 -0500
>> "John Fox" <jfox at mcmaster.ca> wrote:
>>> Dear Jonathan et al,
>>> 
>>> First, thank you to all who responded. As I said, I haven't noticed this
>> problem myself, but I'll try again on my Mac later today when I have some
>> time and see whether I can reproduce it. I suspect that this is a
>> tcltk-related issue, not specific to the Rcmdr, but I don't know that for
>> sure.
>>> 
>>> In the meantime, here are two things to try:
>>> 
>>> (1) Reijo Sund suggested trying to run R and the Rcmdr from the command
>> line (i.e., in a terminal window), to see whether the problem manifests
>> itself there. The Rcmdr doesn't need R.app.
>>> 
>>> (2) It's possible that the slowdown is caused by the way that the Rcmdr
>> handles R Markdown documents. The overhead gets greater as the session
>> proceeds. To test this possibility, you could suppress the R Markdown tab
>> (via the Rcmdr Tools -> Options menu, Output tab -- uncheck the box for R
>> Markdown) and see whether the problem disappears.
>>> 
>>> Please let me know what happens.
>>> 
>>> Best,
>>> John
>>> 
>>> 
>>> On Wed, 20 Nov 2013 10:41:28 -0600
>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
>>>> I upgraded to XQuartz 2.7.5, but it still lags.
>>>> 
>>>> Jonathan M. Chapman, DVM
>>>> 312-813-1166
>>>> petsrme2 at icloud.com
>>>> 
>>>>> On Nov 20, 2013, at 10:05 AM, Manuel Sp?nola <mspinola10 at gmail.com>
>> wrote:
>>>>> 
>>>>> I also have the same experience (like Jonathan) with Rcmdr in Mac
>> with Mavericks.  After few minutes Rcmdr starts to have time lags.  I
>> updated to XQuartz 2.7.5 but the behavior is the same.
>>>>> 
>>>>> Best,
>>>>> 
>>>>> Manuel
>>>>> 
>>>>> 
>>>>> 2013/11/20 Reijo Sund <reijo.sund at helsinki.fi>
>>>>>> So far I have not had problems with XQuartz, but similar slow-down
>> occasionally happens while using tcltk-applications with the Aqua version
>> of Tcl/Tk (ActiveTcl 8.6.x binary distribution). Unfortunately I have not
>> been able to create a reproducible example.
>>>>>> 
>>>>>> Anyhow, if XQuartz update won?t help, maybe it is worth checking if
>> there is any difference while using R.app or command-line R.
>>>>>> 
>>>>>> - - -
>>>>>> 
>>>>>> Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>>>>>> Just checking: which version of XQuartz?
>>>>>>> 
>>>>>>> Although I have not experienced any problems, people recommended
>> updating to 2.7.5 and I got prompted to do that yesterday (it was released
>> last week).
>>>>>>> 
>>>>>>> On 20/11/2013 11:52, John Fox wrote:
>>>>>>>> Dear Jonathan,
>>>>>>>> 
>>>>>>>> I'm afraid that I don't know why you're experiencing this
>> problem. I upgraded my own Mac to Mavericks and the Rcmdr still appears to
>> work fine. Also, no one else has reported this problem to me, which of
>> course doesn't mean that no one else has experienced it.
>>>>>>>> 
>>>>>>>> I don't doubt that something is wrong on your system but I don't
>> know what it might be. You've already reinstalled all of the relevant
>> software, which is what I would have suggested.
>>>>>>>> 
>>>>>>>> I'm copying this response to the R Mac OS X email list in case
>> someone who reads the list has a suggestion or, perhaps, has also
>> experienced the problem.
>>>>>>>> 
>>>>>>>> I'm sorry that I can't be of more help at this time.
>>>>>>>> 
>>>>>>>> John
>>>>>>>> 
>>>>>>>> On Wed, 20 Nov 2013 00:19:54 -0600
>>>>>>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
>>>>>>>>> Dr. Fox,
>>>>>>>>> 
>>>>>>>>> I am an MPH student at the University of Minnesota.  I was
>> referred to you by Dr. Ann Brearley because I am having issues running
>> Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs slowly,
>> more-so as a lag, after an initial 1-2 minutes of use.  Prior to that 1-2
>> minutes of use and the subsequent lag in performance, Rcmdr runs perfectly
>> fine via XQuartz.  Once closing out XQuartz and restarting it, Rcmdr runs
>> fine until after 1-2 minutes of use when the lag sets in again.
>>>>>>>>> I?ve tried to remedy the situation prior to contacting you.
>> First, I reinstalled XQuartz.  When that failed to solve the problem, I
>> reinstalled XQuartz along with R and Rcmdr.  That attempt also failed.  I
>> do not know what else to do or who/where else to turn.
>>>>>>>>> Do you have any incite?  Have you heard of anyone else
>> encountering this problem?
>>>>>>>>> 
>>>>>>>>> Jonathan M. Chapman, DVM
>>>>>>>>> 312-813-1166
>>>>>>>>> petsrme2 at icloud.com
>>>>>>>>> 
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> Manuel Sp?nola, Ph.D.
>>>>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
>>>>> Universidad Nacional
>>>>> Apartado 1350-3000
>>>>> Heredia
>>>>> COSTA RICA
>>>>> mspinola at una.ac.cr
>>>>> mspinola10 at gmail.com
>>>>> Tel?fono: (506) 2277-3598
>>>>> Fax: (506) 2237-7036
>>>>> Personal website: Lobito de r?o
>>>>> Institutional website: ICOMVIS
>> 
>> ------------------------------------------------
>> John Fox
>> McMaster University
>> Hamilton, Ontario, Canada
>> http://socserv.mcmaster.ca/jfox/
>> 
>> 
>> 
> 
> 
> -- 
> *Manuel Sp?nola, Ph.D.*
> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> Universidad Nacional
> Apartado 1350-3000
> Heredia
> COSTA RICA
> mspinola at una.ac.cr
> mspinola10 at gmail.com
> Tel?fono: (506) 2277-3598
> Fax: (506) 2237-7036
> Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
> Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From tobeycarman at gmail.com  Wed Nov 20 22:59:26 2013
From: tobeycarman at gmail.com (Tobey Carman)
Date: Wed, 20 Nov 2013 12:59:26 -0900
Subject: [R-SIG-Mac] Problem installing ncdf4, in Homebrew R
In-Reply-To: <CAJXgQP15SdJX-XpVxr8CubqE83OJ07P0JKicR7vXhAuu=i9W-Q@mail.gmail.com>
References: <CAMAmKPuhstgUoYJ4oMy79QAErNANeo1h5UX__s7XzLvUFcxKLg@mail.gmail.com>
	<CAJXgQP15SdJX-XpVxr8CubqE83OJ07P0JKicR7vXhAuu=i9W-Q@mail.gmail.com>
Message-ID: <CAMAmKPtVs3TU5z60rVN7hdRWrevxH6rHiZ-hwj+Es-PgKHRgYQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131120/e2202a03/attachment.pl>

From jfox at mcmaster.ca  Wed Nov 20 23:16:15 2013
From: jfox at mcmaster.ca (John Fox)
Date: Wed, 20 Nov 2013 17:16:15 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <D804FFA5-1C87-4B3C-AEDA-749CD417E81B@gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<web-484180030@cgpsrv2.cis.mcmaster.ca>
	<web-484235992@cgpsrv2.cis.mcmaster.ca>
	<CABkCotQqL80SV4NFFZiPOsw4SUCWumbji8g3Or=FoaX7Av9+gg@mail.gmail.com>
	<D804FFA5-1C87-4B3C-AEDA-749CD417E81B@gmail.com>
Message-ID: <web-484258900@cgpsrv2.cis.mcmaster.ca>

Dear Peter,

Thank you for fielding this question.

For the time-being, and pending a more general resolution in R.app, I'll add a note to this effect in the Rcmdr installation notes.

Best,
 John

On Wed, 20 Nov 2013 22:53:11 +0100
 peter dalgaard <pdalgd at gmail.com> wrote:
> 
> On 20 Nov 2013, at 22:24 , Manuel Sp?nola <mspinola10 at gmail.com> wrote:
> 
> > Thank you very much John.
> > 
> > How can I run R and Rcmdr in a terminal window?
> > 
> 
> [Kids these days...]
> 
> Just open the Terminal application (it?s in the Utilities subfolder of the Applications folder) and type R at its prompt. Then library(Rcmdr) at the R prompt.
> 
> -pd
> 
> > Best,
> > 
> > Manuel
> > 
> > 
> > 2013/11/20 John Fox <jfox at mcmaster.ca>
> > 
> >> Dear all,
> >> 
> >> I was able to reproduce the problem on my Macbook and believe I have a
> >> solution, which is to run R and the Rcmdr in a terminal window. When I did
> >> this, the Rcmdr behaved normally. I'll investigate further and report my
> >> findings back to the list.
> >> 
> >> I'm copying this message to Simon Urbanek who maintains R.app in case he
> >> has insight into the problem.
> >> 
> >> I'm also interested whether running R from a terminal window solves the
> >> problem for others who experienced it.
> >> 
> >> Best,
> >> John
> >> 
> >> On Wed, 20 Nov 2013 12:19:04 -0500
> >> "John Fox" <jfox at mcmaster.ca> wrote:
> >>> Dear Jonathan et al,
> >>> 
> >>> First, thank you to all who responded. As I said, I haven't noticed this
> >> problem myself, but I'll try again on my Mac later today when I have some
> >> time and see whether I can reproduce it. I suspect that this is a
> >> tcltk-related issue, not specific to the Rcmdr, but I don't know that for
> >> sure.
> >>> 
> >>> In the meantime, here are two things to try:
> >>> 
> >>> (1) Reijo Sund suggested trying to run R and the Rcmdr from the command
> >> line (i.e., in a terminal window), to see whether the problem manifests
> >> itself there. The Rcmdr doesn't need R.app.
> >>> 
> >>> (2) It's possible that the slowdown is caused by the way that the Rcmdr
> >> handles R Markdown documents. The overhead gets greater as the session
> >> proceeds. To test this possibility, you could suppress the R Markdown tab
> >> (via the Rcmdr Tools -> Options menu, Output tab -- uncheck the box for R
> >> Markdown) and see whether the problem disappears.
> >>> 
> >>> Please let me know what happens.
> >>> 
> >>> Best,
> >>> John
> >>> 
> >>> 
> >>> On Wed, 20 Nov 2013 10:41:28 -0600
> >>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >>>> I upgraded to XQuartz 2.7.5, but it still lags.
> >>>> 
> >>>> Jonathan M. Chapman, DVM
> >>>> 312-813-1166
> >>>> petsrme2 at icloud.com
> >>>> 
> >>>>> On Nov 20, 2013, at 10:05 AM, Manuel Sp?nola <mspinola10 at gmail.com>
> >> wrote:
> >>>>> 
> >>>>> I also have the same experience (like Jonathan) with Rcmdr in Mac
> >> with Mavericks.  After few minutes Rcmdr starts to have time lags.  I
> >> updated to XQuartz 2.7.5 but the behavior is the same.
> >>>>> 
> >>>>> Best,
> >>>>> 
> >>>>> Manuel
> >>>>> 
> >>>>> 
> >>>>> 2013/11/20 Reijo Sund <reijo.sund at helsinki.fi>
> >>>>>> So far I have not had problems with XQuartz, but similar slow-down
> >> occasionally happens while using tcltk-applications with the Aqua version
> >> of Tcl/Tk (ActiveTcl 8.6.x binary distribution). Unfortunately I have not
> >> been able to create a reproducible example.
> >>>>>> 
> >>>>>> Anyhow, if XQuartz update won?t help, maybe it is worth checking if
> >> there is any difference while using R.app or command-line R.
> >>>>>> 
> >>>>>> - - -
> >>>>>> 
> >>>>>> Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> >>>>>>> Just checking: which version of XQuartz?
> >>>>>>> 
> >>>>>>> Although I have not experienced any problems, people recommended
> >> updating to 2.7.5 and I got prompted to do that yesterday (it was released
> >> last week).
> >>>>>>> 
> >>>>>>> On 20/11/2013 11:52, John Fox wrote:
> >>>>>>>> Dear Jonathan,
> >>>>>>>> 
> >>>>>>>> I'm afraid that I don't know why you're experiencing this
> >> problem. I upgraded my own Mac to Mavericks and the Rcmdr still appears to
> >> work fine. Also, no one else has reported this problem to me, which of
> >> course doesn't mean that no one else has experienced it.
> >>>>>>>> 
> >>>>>>>> I don't doubt that something is wrong on your system but I don't
> >> know what it might be. You've already reinstalled all of the relevant
> >> software, which is what I would have suggested.
> >>>>>>>> 
> >>>>>>>> I'm copying this response to the R Mac OS X email list in case
> >> someone who reads the list has a suggestion or, perhaps, has also
> >> experienced the problem.
> >>>>>>>> 
> >>>>>>>> I'm sorry that I can't be of more help at this time.
> >>>>>>>> 
> >>>>>>>> John
> >>>>>>>> 
> >>>>>>>> On Wed, 20 Nov 2013 00:19:54 -0600
> >>>>>>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >>>>>>>>> Dr. Fox,
> >>>>>>>>> 
> >>>>>>>>> I am an MPH student at the University of Minnesota.  I was
> >> referred to you by Dr. Ann Brearley because I am having issues running
> >> Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs slowly,
> >> more-so as a lag, after an initial 1-2 minutes of use.  Prior to that 1-2
> >> minutes of use and the subsequent lag in performance, Rcmdr runs perfectly
> >> fine via XQuartz.  Once closing out XQuartz and restarting it, Rcmdr runs
> >> fine until after 1-2 minutes of use when the lag sets in again.
> >>>>>>>>> I?ve tried to remedy the situation prior to contacting you.
> >> First, I reinstalled XQuartz.  When that failed to solve the problem, I
> >> reinstalled XQuartz along with R and Rcmdr.  That attempt also failed.  I
> >> do not know what else to do or who/where else to turn.
> >>>>>>>>> Do you have any incite?  Have you heard of anyone else
> >> encountering this problem?
> >>>>>>>>> 
> >>>>>>>>> Jonathan M. Chapman, DVM
> >>>>>>>>> 312-813-1166
> >>>>>>>>> petsrme2 at icloud.com
> >>>>>>>>> 
> >>>>>> 
> >>>>>> _______________________________________________
> >>>>>> R-SIG-Mac mailing list
> >>>>>> R-SIG-Mac at r-project.org
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>> 
> >>>>> 
> >>>>> 
> >>>>> --
> >>>>> Manuel Sp?nola, Ph.D.
> >>>>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> >>>>> Universidad Nacional
> >>>>> Apartado 1350-3000
> >>>>> Heredia
> >>>>> COSTA RICA
> >>>>> mspinola at una.ac.cr
> >>>>> mspinola10 at gmail.com
> >>>>> Tel?fono: (506) 2277-3598
> >>>>> Fax: (506) 2237-7036
> >>>>> Personal website: Lobito de r?o
> >>>>> Institutional website: ICOMVIS
> >> 
> >> ------------------------------------------------
> >> John Fox
> >> McMaster University
> >> Hamilton, Ontario, Canada
> >> http://socserv.mcmaster.ca/jfox/
> >> 
> >> 
> >> 
> > 
> > 
> > -- 
> > *Manuel Sp?nola, Ph.D.*
> > Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> > Universidad Nacional
> > Apartado 1350-3000
> > Heredia
> > COSTA RICA
> > mspinola at una.ac.cr
> > mspinola10 at gmail.com
> > Tel?fono: (506) 2277-3598
> > Fax: (506) 2237-7036
> > Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
> > Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
> > 
> > 	[[alternative HTML version deleted]]
> > 
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>


From tobeycarman at gmail.com  Thu Nov 21 01:27:27 2013
From: tobeycarman at gmail.com (Tobey Carman)
Date: Wed, 20 Nov 2013 15:27:27 -0900
Subject: [R-SIG-Mac] R-SIG-Mac Digest, Vol 129, Issue 21
In-Reply-To: <mailman.6678.1384984773.4612.r-sig-mac@r-project.org>
References: <mailman.6678.1384984773.4612.r-sig-mac@r-project.org>
Message-ID: <CAMAmKPuySV6BpVTEoEBRmk5yYCQ84ddib8oExm-3NOwiec-YOw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131120/83a279e8/attachment.pl>

From jfox at mcmaster.ca  Thu Nov 21 02:21:10 2013
From: jfox at mcmaster.ca (John Fox)
Date: Wed, 20 Nov 2013 20:21:10 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-484258900@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<web-484180030@cgpsrv2.cis.mcmaster.ca>
	<web-484235992@cgpsrv2.cis.mcmaster.ca>
	<CABkCotQqL80SV4NFFZiPOsw4SUCWumbji8g3Or=FoaX7Av9+gg@mail.gmail.com>
	<D804FFA5-1C87-4B3C-AEDA-749CD417E81B@gmail.com>
	<web-484258900@cgpsrv2.cis.mcmaster.ca>
Message-ID: <003501cee657$f6dec1a0$e49c44e0$@mcmaster.ca>

Dear all,

I've added the following to the Rcmdr installation notes:

---------------- snip -------------

Under Mac OS X 10.9 ("Mavericks"), the R Commander may slow down or
occasionally hesitate to display a menu as your session progresses. This
behaviour appears to be due to a problem general to the tcltk package
running in R.app under Mac OS X 10.9. You can avoid the problem by running R
in a terminal window rather than using R.app:

o Open the Utilities subfolder inside the Applications folder on your Mac.
Click on Terminal.app to open a terminal window.

o At the Unix command prompt in the terminal window, type R and press the
enter (or return) key. On my Mac, the Unix command prompt looks like this:
john-fox-mbp:~ jfox$

o Once R starts up, you'll see the usual initial messages, followed by the R
command prompt, >

o As usual type library(Rcmdr) at the R prompt and press the enter key.

o After you exit from the R Commander, you can safely close the terminal
window, whether or not you have exited from R.

There really is no reason to prefer running the R Commander in R.app, so
using R from a terminal should be perfectly fine.

---------------- snip -------------

And, in the "Mac OS X Trouble-shooting" section:

---------------- snip -------------

If you are using Mac OS X 10.9 ("Mavericks") and the R Commander becomes
slow or unresponsive, you can run R and the R Commander in a terminal window
on your Mac rather than from R.app. See the installation notes above.

---------------- snip -------------

I hope that this helps, at least for the time-being. If and when the
tcltk/R.app problem is solved, I'll remove these instructions.

Best,
John

> -----Original Message-----
> From: John Fox [mailto:jfox at mcmaster.ca]
> Sent: Wednesday, November 20, 2013 5:16 PM
> To: peter dalgaard; Manuel Sp?nola
> Cc: John Fox; r-sig-mac at r-project.org; urbanek at research.att.com;
> Jonathan Chapman
> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> Mavericks
> 
> Dear Peter,
> 
> Thank you for fielding this question.
> 
> For the time-being, and pending a more general resolution in R.app,
> I'll add a note to this effect in the Rcmdr installation notes.
> 
> Best,
>  John
> 
> On Wed, 20 Nov 2013 22:53:11 +0100
>  peter dalgaard <pdalgd at gmail.com> wrote:
> >
> > On 20 Nov 2013, at 22:24 , Manuel Sp?nola <mspinola10 at gmail.com>
> wrote:
> >
> > > Thank you very much John.
> > >
> > > How can I run R and Rcmdr in a terminal window?
> > >
> >
> > [Kids these days...]
> >
> > Just open the Terminal application (it?s in the Utilities subfolder
> of the Applications folder) and type R at its prompt. Then
> library(Rcmdr) at the R prompt.
> >
> > -pd
> >
> > > Best,
> > >
> > > Manuel
> > >
> > >
> > > 2013/11/20 John Fox <jfox at mcmaster.ca>
> > >
> > >> Dear all,
> > >>
> > >> I was able to reproduce the problem on my Macbook and believe I
> have a
> > >> solution, which is to run R and the Rcmdr in a terminal window.
> When I did
> > >> this, the Rcmdr behaved normally. I'll investigate further and
> report my
> > >> findings back to the list.
> > >>
> > >> I'm copying this message to Simon Urbanek who maintains R.app in
> case he
> > >> has insight into the problem.
> > >>
> > >> I'm also interested whether running R from a terminal window
> solves the
> > >> problem for others who experienced it.
> > >>
> > >> Best,
> > >> John
> > >>
> > >> On Wed, 20 Nov 2013 12:19:04 -0500
> > >> "John Fox" <jfox at mcmaster.ca> wrote:
> > >>> Dear Jonathan et al,
> > >>>
> > >>> First, thank you to all who responded. As I said, I haven't
> noticed this
> > >> problem myself, but I'll try again on my Mac later today when I
> have some
> > >> time and see whether I can reproduce it. I suspect that this is a
> > >> tcltk-related issue, not specific to the Rcmdr, but I don't know
> that for
> > >> sure.
> > >>>
> > >>> In the meantime, here are two things to try:
> > >>>
> > >>> (1) Reijo Sund suggested trying to run R and the Rcmdr from the
> command
> > >> line (i.e., in a terminal window), to see whether the problem
> manifests
> > >> itself there. The Rcmdr doesn't need R.app.
> > >>>
> > >>> (2) It's possible that the slowdown is caused by the way that the
> Rcmdr
> > >> handles R Markdown documents. The overhead gets greater as the
> session
> > >> proceeds. To test this possibility, you could suppress the R
> Markdown tab
> > >> (via the Rcmdr Tools -> Options menu, Output tab -- uncheck the
> box for R
> > >> Markdown) and see whether the problem disappears.
> > >>>
> > >>> Please let me know what happens.
> > >>>
> > >>> Best,
> > >>> John
> > >>>
> > >>>
> > >>> On Wed, 20 Nov 2013 10:41:28 -0600
> > >>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> > >>>> I upgraded to XQuartz 2.7.5, but it still lags.
> > >>>>
> > >>>> Jonathan M. Chapman, DVM
> > >>>> 312-813-1166
> > >>>> petsrme2 at icloud.com
> > >>>>
> > >>>>> On Nov 20, 2013, at 10:05 AM, Manuel Sp?nola
> <mspinola10 at gmail.com>
> > >> wrote:
> > >>>>>
> > >>>>> I also have the same experience (like Jonathan) with Rcmdr in
> Mac
> > >> with Mavericks.  After few minutes Rcmdr starts to have time lags.
> I
> > >> updated to XQuartz 2.7.5 but the behavior is the same.
> > >>>>>
> > >>>>> Best,
> > >>>>>
> > >>>>> Manuel
> > >>>>>
> > >>>>>
> > >>>>> 2013/11/20 Reijo Sund <reijo.sund at helsinki.fi>
> > >>>>>> So far I have not had problems with XQuartz, but similar slow-
> down
> > >> occasionally happens while using tcltk-applications with the Aqua
> version
> > >> of Tcl/Tk (ActiveTcl 8.6.x binary distribution). Unfortunately I
> have not
> > >> been able to create a reproducible example.
> > >>>>>>
> > >>>>>> Anyhow, if XQuartz update won?t help, maybe it is worth
> checking if
> > >> there is any difference while using R.app or command-line R.
> > >>>>>>
> > >>>>>> - - -
> > >>>>>>
> > >>>>>> Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> > >>>>>>> Just checking: which version of XQuartz?
> > >>>>>>>
> > >>>>>>> Although I have not experienced any problems, people
> recommended
> > >> updating to 2.7.5 and I got prompted to do that yesterday (it was
> released
> > >> last week).
> > >>>>>>>
> > >>>>>>> On 20/11/2013 11:52, John Fox wrote:
> > >>>>>>>> Dear Jonathan,
> > >>>>>>>>
> > >>>>>>>> I'm afraid that I don't know why you're experiencing this
> > >> problem. I upgraded my own Mac to Mavericks and the Rcmdr still
> appears to
> > >> work fine. Also, no one else has reported this problem to me,
> which of
> > >> course doesn't mean that no one else has experienced it.
> > >>>>>>>>
> > >>>>>>>> I don't doubt that something is wrong on your system but I
> don't
> > >> know what it might be. You've already reinstalled all of the
> relevant
> > >> software, which is what I would have suggested.
> > >>>>>>>>
> > >>>>>>>> I'm copying this response to the R Mac OS X email list in
> case
> > >> someone who reads the list has a suggestion or, perhaps, has also
> > >> experienced the problem.
> > >>>>>>>>
> > >>>>>>>> I'm sorry that I can't be of more help at this time.
> > >>>>>>>>
> > >>>>>>>> John
> > >>>>>>>>
> > >>>>>>>> On Wed, 20 Nov 2013 00:19:54 -0600
> > >>>>>>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> > >>>>>>>>> Dr. Fox,
> > >>>>>>>>>
> > >>>>>>>>> I am an MPH student at the University of Minnesota.  I was
> > >> referred to you by Dr. Ann Brearley because I am having issues
> running
> > >> Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs
> slowly,
> > >> more-so as a lag, after an initial 1-2 minutes of use.  Prior to
> that 1-2
> > >> minutes of use and the subsequent lag in performance, Rcmdr runs
> perfectly
> > >> fine via XQuartz.  Once closing out XQuartz and restarting it,
> Rcmdr runs
> > >> fine until after 1-2 minutes of use when the lag sets in again.
> > >>>>>>>>> I?ve tried to remedy the situation prior to contacting you.
> > >> First, I reinstalled XQuartz.  When that failed to solve the
> problem, I
> > >> reinstalled XQuartz along with R and Rcmdr.  That attempt also
> failed.  I
> > >> do not know what else to do or who/where else to turn.
> > >>>>>>>>> Do you have any incite?  Have you heard of anyone else
> > >> encountering this problem?
> > >>>>>>>>>
> > >>>>>>>>> Jonathan M. Chapman, DVM
> > >>>>>>>>> 312-813-1166
> > >>>>>>>>> petsrme2 at icloud.com
> > >>>>>>>>>
> > >>>>>>
> > >>>>>> _______________________________________________
> > >>>>>> R-SIG-Mac mailing list
> > >>>>>> R-SIG-Mac at r-project.org
> > >>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>> --
> > >>>>> Manuel Sp?nola, Ph.D.
> > >>>>> Instituto Internacional en Conservaci?n y Manejo de Vida
> Silvestre
> > >>>>> Universidad Nacional
> > >>>>> Apartado 1350-3000
> > >>>>> Heredia
> > >>>>> COSTA RICA
> > >>>>> mspinola at una.ac.cr
> > >>>>> mspinola10 at gmail.com
> > >>>>> Tel?fono: (506) 2277-3598
> > >>>>> Fax: (506) 2237-7036
> > >>>>> Personal website: Lobito de r?o
> > >>>>> Institutional website: ICOMVIS
> > >>
> > >> ------------------------------------------------
> > >> John Fox
> > >> McMaster University
> > >> Hamilton, Ontario, Canada
> > >> http://socserv.mcmaster.ca/jfox/
> > >>
> > >>
> > >>
> > >
> > >
> > > --
> > > *Manuel Sp?nola, Ph.D.*
> > > Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> > > Universidad Nacional
> > > Apartado 1350-3000
> > > Heredia
> > > COSTA RICA
> > > mspinola at una.ac.cr
> > > mspinola10 at gmail.com
> > > Tel?fono: (506) 2277-3598
> > > Fax: (506) 2237-7036
> > > Personal website: Lobito de r?o
> <https://sites.google.com/site/lobitoderio/>
> > > Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
> > >
> > > 	[[alternative HTML version deleted]]
> > >
> > > _______________________________________________
> > > R-SIG-Mac mailing list
> > > R-SIG-Mac at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
> > --
> > Peter Dalgaard, Professor,
> > Center for Statistics, Copenhagen Business School
> > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> > Phone: (+45)38153501
> > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >


From ceco2london at yahoo.co.uk  Thu Nov 21 07:49:54 2013
From: ceco2london at yahoo.co.uk (Francesco Novelli)
Date: Thu, 21 Nov 2013 06:49:54 +0000 (GMT)
Subject: [R-SIG-Mac] java quit unexpectedly while opening multiple Quartz
	devices
Message-ID: <1385016594.83273.YahooMailNeo@web171902.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131121/a3618bc7/attachment.pl>

From mspinola10 at gmail.com  Thu Nov 21 14:45:05 2013
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Thu, 21 Nov 2013 07:45:05 -0600
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <D804FFA5-1C87-4B3C-AEDA-749CD417E81B@gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<web-484180030@cgpsrv2.cis.mcmaster.ca>
	<web-484235992@cgpsrv2.cis.mcmaster.ca>
	<CABkCotQqL80SV4NFFZiPOsw4SUCWumbji8g3Or=FoaX7Av9+gg@mail.gmail.com>
	<D804FFA5-1C87-4B3C-AEDA-749CD417E81B@gmail.com>
Message-ID: <CABkCotRPZ1qvu=-h2X01vHmtdbwO9fT5FuV0K1M_KvGiePxJww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131121/c2e3cccf/attachment.pl>

From simon.urbanek at r-project.org  Thu Nov 21 16:02:21 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 21 Nov 2013 10:02:21 -0500
Subject: [R-SIG-Mac] java quit unexpectedly while opening multiple
	Quartz devices
In-Reply-To: <1385016594.83273.YahooMailNeo@web171902.mail.ir2.yahoo.com>
References: <1385016594.83273.YahooMailNeo@web171902.mail.ir2.yahoo.com>
Message-ID: <D3278B6E-0307-445F-813E-093589866BD2@r-project.org>

On Nov 21, 2013, at 1:49 AM, Francesco Novelli <ceco2london at yahoo.co.uk> wrote:

> Hallo everybody,
> 
> I'm doing an econometric analysis with R and I've written a script which automatically opens multiple Quartz devices I need to visually inspect.
> 
> Unfortunately I often (i.e., not always and not following any pattern I'm able to recognize) get a Java error which causes the Java runtime to hang and stops R altogether, obliging me to restart it.
> 

You'll have to elaborate -- Java is not used by Quartz, Apple doesn't allow Java UI to be run from R and Quartz is not supported to be run from Java, so are probably doing something bad in the first place. If you use Java, you have to use JavaGD (or similar) instead of Quartz.

Cheers,
Simon


> The error is not always the same - I've noted these so far:
> 
> java quit unexpectedly while using the graphics.so plug-in
> java quit unexpectedly while using the libjri.jnilib plug-in
> java quit unexpectedly while using the grDevices.so plug-in
> 
> My environment is as follows:
> R 3.0.1 64bit
> 
> Eclipse Platform 4.3.0 with StatET 3.3
> JRE Java SE 6 [1.6.0_51-b11-457]
> OSX 10.8.5
> 
> Has anybody experienced a similar problem and can suggest any workaround I might try?
> 
> 
> By the way, is there a keyboard shortcut to cycle through multiple Quartz windows just like you can do in other OSX applications? I couldn't find any.
> 
> Thank you very much
> Kind regards
> 
> Francesco
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From marc_schwartz at me.com  Thu Nov 21 17:35:17 2013
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 21 Nov 2013 10:35:17 -0600
Subject: [R-SIG-Mac] java quit unexpectedly while opening
 multiple	Quartz devices
In-Reply-To: <D3278B6E-0307-445F-813E-093589866BD2@r-project.org>
References: <1385016594.83273.YahooMailNeo@web171902.mail.ir2.yahoo.com>
	<D3278B6E-0307-445F-813E-093589866BD2@r-project.org>
Message-ID: <0890BE38-2A98-4D2A-92D5-4C793A2123BA@me.com>


On Nov 21, 2013, at 9:02 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> On Nov 21, 2013, at 1:49 AM, Francesco Novelli <ceco2london at yahoo.co.uk> wrote:
> 
>> Hallo everybody,
>> 
>> I'm doing an econometric analysis with R and I've written a script which automatically opens multiple Quartz devices I need to visually inspect.
>> 
>> Unfortunately I often (i.e., not always and not following any pattern I'm able to recognize) get a Java error which causes the Java runtime to hang and stops R altogether, obliging me to restart it.
>> 
> 
> You'll have to elaborate -- Java is not used by Quartz, Apple doesn't allow Java UI to be run from R and Quartz is not supported to be run from Java, so are probably doing something bad in the first place. If you use Java, you have to use JavaGD (or similar) instead of Quartz.
> 
> Cheers,
> Simon


From below, it looks like he is running R in Eclipse/StatET, which is a Java based IDE. That is likely to be the source of the problem.

The problem may be best reported to them, barring additional information to the contrary.

Regards,

Marc Schwartz


> 
> 
>> The error is not always the same - I've noted these so far:
>> 
>> java quit unexpectedly while using the graphics.so plug-in
>> java quit unexpectedly while using the libjri.jnilib plug-in
>> java quit unexpectedly while using the grDevices.so plug-in
>> 
>> My environment is as follows:
>> R 3.0.1 64bit
>> 
>> Eclipse Platform 4.3.0 with StatET 3.3
>> JRE Java SE 6 [1.6.0_51-b11-457]
>> OSX 10.8.5
>> 
>> Has anybody experienced a similar problem and can suggest any workaround I might try?
>> 
>> 
>> By the way, is there a keyboard shortcut to cycle through multiple Quartz windows just like you can do in other OSX applications? I couldn't find any.
>> 
>> Thank you very much
>> Kind regards
>> 
>> Francesco
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ann.summy at gmail.com  Fri Nov 22 02:15:35 2013
From: ann.summy at gmail.com (Ann Summy)
Date: Thu, 21 Nov 2013 17:15:35 -0800
Subject: [R-SIG-Mac] R installation on 32-bit Mac OS X
Message-ID: <CA+mFFDMO3H+KQwSWfbKhXTmGbQTMd5-2NOTi1AQdn8-cOhLNLw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131121/38dd0442/attachment.pl>

From ripley at stats.ox.ac.uk  Fri Nov 22 07:48:11 2013
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 22 Nov 2013 06:48:11 +0000
Subject: [R-SIG-Mac] R installation on 32-bit Mac OS X
In-Reply-To: <CA+mFFDMO3H+KQwSWfbKhXTmGbQTMd5-2NOTi1AQdn8-cOhLNLw@mail.gmail.com>
References: <CA+mFFDMO3H+KQwSWfbKhXTmGbQTMd5-2NOTi1AQdn8-cOhLNLw@mail.gmail.com>
Message-ID: <528EFE2B.40608@stats.ox.ac.uk>

On 22/11/2013 01:15, Ann Summy wrote:
> Why are there separate Mac-GUI-* installation files when the R* pkg files
> contain the R-app GUI already?  I'm looking in this directory
> http://cran.r-project.org/bin/macosx/old/.

You missed http://cran.r-project.org/bin/macosx/old/index-old.html .
>
> Or is the more appropriate question, what is the difference between Mac-GUI
> and R-app GUI?

The Mac-GUI tarballs are sources: the R.app sources are not part of the 
R sources.

>
> 	[[alternative HTML version deleted]]

See the posting guide, which asked you not to do that.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From petsrme2 at icloud.com  Wed Nov 20 17:41:28 2013
From: petsrme2 at icloud.com (Jonathan Chapman)
Date: Wed, 20 Nov 2013 10:41:28 -0600
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
Message-ID: <F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131120/ebbbf4db/attachment.pl>

From simon.urbanek at r-project.org  Fri Nov 22 16:29:27 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 22 Nov 2013 10:29:27 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
Message-ID: <64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>

On Nov 20, 2013, at 11:41 AM, Jonathan Chapman <petsrme2 at icloud.com> wrote:

> I upgraded to XQuartz 2.7.5, but it still lags.
> 

Please read Peter's response - it has nothing to do with XQuartz versions


> Jonathan M. Chapman, DVM
> 312-813-1166
> petsrme2 at icloud.com
> 
>> On Nov 20, 2013, at 10:05 AM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
>> 
>> I also have the same experience (like Jonathan) with Rcmdr in Mac with Mavericks.  After few minutes Rcmdr starts to have time lags.  I updated to XQuartz 2.7.5 but the behavior is the same.
>> 
>> Best,
>> 
>> Manuel
>> 
>> 
>> 2013/11/20 Reijo Sund <reijo.sund at helsinki.fi>
>>> So far I have not had problems with XQuartz, but similar slow-down occasionally happens while using tcltk-applications with the Aqua version of Tcl/Tk (ActiveTcl 8.6.x binary distribution). Unfortunately I have not been able to create a reproducible example.
>>> 
>>> Anyhow, if XQuartz update won?t help, maybe it is worth checking if there is any difference while using R.app or command-line R.
>>> 
>>> - - -
>>> 
>>> Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>>> Just checking: which version of XQuartz?
>>>> 
>>>> Although I have not experienced any problems, people recommended updating to 2.7.5 and I got prompted to do that yesterday (it was released last week).
>>>> 
>>>> On 20/11/2013 11:52, John Fox wrote:
>>>>> Dear Jonathan,
>>>>> 
>>>>> I'm afraid that I don't know why you're experiencing this problem. I upgraded my own Mac to Mavericks and the Rcmdr still appears to work fine. Also, no one else has reported this problem to me, which of course doesn't mean that no one else has experienced it.
>>>>> 
>>>>> I don't doubt that something is wrong on your system but I don't know what it might be. You've already reinstalled all of the relevant software, which is what I would have suggested.
>>>>> 
>>>>> I'm copying this response to the R Mac OS X email list in case someone who reads the list has a suggestion or, perhaps, has also experienced the problem.
>>>>> 
>>>>> I'm sorry that I can't be of more help at this time.
>>>>> 
>>>>> John
>>>>> 
>>>>> On Wed, 20 Nov 2013 00:19:54 -0600
>>>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
>>>>>> Dr. Fox,
>>>>>> 
>>>>>> I am an MPH student at the University of Minnesota.  I was referred to you by Dr. Ann Brearley because I am having issues running Rcmdr in XQuartz since upgrading to OSX Mavericks.  Rcmdr runs slowly, more-so as a lag, after an initial 1-2 minutes of use.  Prior to that 1-2 minutes of use and the subsequent lag in performance, Rcmdr runs perfectly fine via XQuartz.  Once closing out XQuartz and restarting it, Rcmdr runs fine until after 1-2 minutes of use when the lag sets in again.
>>>>>> I?ve tried to remedy the situation prior to contacting you.  First, I reinstalled XQuartz.  When that failed to solve the problem, I reinstalled XQuartz along with R and Rcmdr.  That attempt also failed.  I do not know what else to do or who/where else to turn.
>>>>>> Do you have any incite?  Have you heard of anyone else encountering this problem?
>>>>>> 
>>>>>> Jonathan M. Chapman, DVM
>>>>>> 312-813-1166
>>>>>> petsrme2 at icloud.com
>>>>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> 
>> -- 
>> Manuel Sp?nola, Ph.D. 
>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre 
>> Universidad Nacional 
>> Apartado 1350-3000 
>> Heredia 
>> COSTA RICA 
>> mspinola at una.ac.cr 
>> mspinola10 at gmail.com 
>> Tel?fono: (506) 2277-3598 
>> Fax: (506) 2237-7036 
>> Personal website: Lobito de r?o 
>> Institutional website: ICOMVIS
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From goedman at icloud.com  Fri Nov 22 16:42:57 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Fri, 22 Nov 2013 07:42:57 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
Message-ID: <0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131122/036209ec/attachment.pl>

From simon.urbanek at r-project.org  Fri Nov 22 17:33:54 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 22 Nov 2013 11:33:54 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
Message-ID: <3B844C10-6CB1-4C5C-8967-3C51563CDD16@r-project.org>

Like Peter said, this seems due to the aggressive power-saving in Mavericks so I suspect it will depend on your interaction with the app and your power settings...


On Nov 22, 2013, at 10:42 AM, Robert J Goedman <goedman at icloud.com> wrote:

> Not sure how long it takes to see the lagging (a few minutes someone reported), but I've not been able to reproduce this problem.
> 
> Which makes me wonder if anyone has seen this behavior after rebuilding R.app on Mavericks (from the R.app sources).
> 
> Regards,
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> On Nov 22, 2013, at 7:29 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> On Nov 20, 2013, at 11:41 AM, Jonathan Chapman <petsrme2 at icloud.com> wrote:
>> 
>>> I upgraded to XQuartz 2.7.5, but it still lags.
>>> 
>> 
>> Please read Peter's response - it has nothing to do with XQuartz versions
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From brandon.hurr at gmail.com  Fri Nov 22 18:14:37 2013
From: brandon.hurr at gmail.com (Brandon Hurr)
Date: Fri, 22 Nov 2013 17:14:37 +0000
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <3B844C10-6CB1-4C5C-8967-3C51563CDD16@r-project.org>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<3B844C10-6CB1-4C5C-8967-3C51563CDD16@r-project.org>
Message-ID: <CAG2OMvvNBmrbT1uz0EJ2n2=JJo7gmF078mgvi=p03vSV3t-xeg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131122/ab5dd702/attachment.pl>

From danfbflynn at gmail.com  Fri Nov 22 19:30:47 2013
From: danfbflynn at gmail.com (Dan Flynn)
Date: Fri, 22 Nov 2013 10:30:47 -0800 (PST)
Subject: [R-SIG-Mac] segfaults while editing code scripts on 10.9
 mavericks
In-Reply-To: <880161A7-00C2-42FF-94D7-3AEB69E4F76F@uni-hamburg.de>
References: <880161A7-00C2-42FF-94D7-3AEB69E4F76F@uni-hamburg.de>
Message-ID: <c5209b97-b7c7-4222-b1c4-23f5ed044630@googlegroups.com>

Following hints here for debugged version of R.app is working for me.

http://citizen-statistician.org/2013/10/27/warning-mac-os-10-9-mavericks-and-r-dont-play-nicely/

I had exactly the same problem, as well as more frequent crashes which are 
not obviously replicable.

Dan

On Friday, November 15, 2013 7:12:08 AM UTC-5, Alexander Guczka wrote:
>
> Dear R-SIG, 
>
> I have met some Problems since I updated to OSX Mavericks. From time to 
> time does R crash with a "segfault" if I understand it correctly. I think 
> that some of the crashes are associated with the R-GUI. 
>
> One recurring (but not completely reproducible) crash happens, when I edit 
> code-documents/scripts and try to search and replace more than one element 
> at a time. I tried to reduce the amount of Elements to "replace all" but 
> with no effect. Some days ago I switched to another code editor because of 
> that. 
>
> What happens? R stops working the second I click "replace all" and shows 
> segfault ?  "memory not mapped" 
>
> The other editor (sub-etha-edit) warns me that in R-GUI produced 
> .R-scripts have different/not consistent line ending formats and suggest 
> changing all to linux-style LF. Since changing one of my bigger scripts in 
> sub-etha-edit "replace all" works again in R-GUI. Maybe this information 
> helps. 
>
> I had a lot of crashes with 3.0.1 on Mavericks, changed to 3.0.2 which 
> works really good most of the time. Because of the crash problem mentioned 
> above I tried updating to a patched version of 3.0.2 with no significant 
> effect (pun intended). 
>
> current versions: 
> R version 3.0.2 Patched (2013-11-11 r64202) -- "Frisbee Sailing" 
> R.app GUI 1.62 (6596) x86_64-apple-darwin10.8.0   
>
>
> Best wishes, 
> Alexander Guczka 
>
> _______________________________________________ 
> R-SIG-Mac mailing list 
> R-SI... at r-project.org <javascript:> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac<https://www.google.com/url?q=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&sa=D&sntz=1&usg=AFQjCNEkqAlfGt1yZw-XSwiexZHN9YXtYA> 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131122/d3e0da07/attachment-0002.html>

From danfbflynn at gmail.com  Fri Nov 22 19:30:47 2013
From: danfbflynn at gmail.com (Dan Flynn)
Date: Fri, 22 Nov 2013 10:30:47 -0800
Subject: [R-SIG-Mac] segfaults while editing code scripts on 10.9
 mavericks
In-Reply-To: <880161A7-00C2-42FF-94D7-3AEB69E4F76F@uni-hamburg.de>
References: <880161A7-00C2-42FF-94D7-3AEB69E4F76F@uni-hamburg.de>
Message-ID: <c5209b97-b7c7-4222-b1c4-23f5ed044630@googlegroups.com>

Following hints here for debugged version of R.app is working for me.

http://citizen-statistician.org/2013/10/27/warning-mac-os-10-9-mavericks-and-r-dont-play-nicely/

I had exactly the same problem, as well as more frequent crashes which are 
not obviously replicable.

Dan

On Friday, November 15, 2013 7:12:08 AM UTC-5, Alexander Guczka wrote:
>
> Dear R-SIG, 
>
> I have met some Problems since I updated to OSX Mavericks. From time to 
> time does R crash with a "segfault" if I understand it correctly. I think 
> that some of the crashes are associated with the R-GUI. 
>
> One recurring (but not completely reproducible) crash happens, when I edit 
> code-documents/scripts and try to search and replace more than one element 
> at a time. I tried to reduce the amount of Elements to "replace all" but 
> with no effect. Some days ago I switched to another code editor because of 
> that. 
>
> What happens? R stops working the second I click "replace all" and shows 
> segfault ?  "memory not mapped" 
>
> The other editor (sub-etha-edit) warns me that in R-GUI produced 
> .R-scripts have different/not consistent line ending formats and suggest 
> changing all to linux-style LF. Since changing one of my bigger scripts in 
> sub-etha-edit "replace all" works again in R-GUI. Maybe this information 
> helps. 
>
> I had a lot of crashes with 3.0.1 on Mavericks, changed to 3.0.2 which 
> works really good most of the time. Because of the crash problem mentioned 
> above I tried updating to a patched version of 3.0.2 with no significant 
> effect (pun intended). 
>
> current versions: 
> R version 3.0.2 Patched (2013-11-11 r64202) -- "Frisbee Sailing" 
> R.app GUI 1.62 (6596) x86_64-apple-darwin10.8.0   
>
>
> Best wishes, 
> Alexander Guczka 
>
> _______________________________________________ 
> R-SIG-Mac mailing list 
> R-SI... at r-project.org <javascript:> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac<https://www.google.com/url?q=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-mac&sa=D&sntz=1&usg=AFQjCNEkqAlfGt1yZw-XSwiexZHN9YXtYA> 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131122/d3e0da07/attachment-0003.html>

From pdalgd at gmail.com  Fri Nov 22 22:00:41 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 22 Nov 2013 22:00:41 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
Message-ID: <A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>


On 22 Nov 2013, at 16:42 , Robert J Goedman <goedman at icloud.com> wrote:

> Not sure how long it takes to see the lagging (a few minutes someone reported), but I've not been able to reproduce this problem.

For me, library(tcltk); demo(tkfaq), click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom of the file, Fn-Up to the top, etc. Less than two iteration for me before the effect kicks in.

> 
> Which makes me wonder if anyone has seen this behavior after rebuilding R.app on Mavericks (from the R.app sources).
> 
> Regards,
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> On Nov 22, 2013, at 7:29 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> On Nov 20, 2013, at 11:41 AM, Jonathan Chapman <petsrme2 at icloud.com> wrote:
>> 
>>> I upgraded to XQuartz 2.7.5, but it still lags.
>>> 
>> 
>> Please read Peter's response - it has nothing to do with XQuartz versions
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From goedman at icloud.com  Fri Nov 22 23:42:00 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Fri, 22 Nov 2013 14:42:00 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
Message-ID: <80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131122/594730e6/attachment.pl>

From ann.summy at gmail.com  Sat Nov 23 01:55:58 2013
From: ann.summy at gmail.com (Ann Summy)
Date: Fri, 22 Nov 2013 16:55:58 -0800
Subject: [R-SIG-Mac] morley object?
Message-ID: <CA+mFFDNehh4XtTBk9K+qcGNCq7QO65s5CPnWdRgtTmqQRsBYZQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131122/e497c47a/attachment.pl>

From smckinney at bccrc.ca  Sat Nov 23 02:16:52 2013
From: smckinney at bccrc.ca (Steven McKinney)
Date: Fri, 22 Nov 2013 17:16:52 -0800
Subject: [R-SIG-Mac] morley object?
In-Reply-To: <CA+mFFDNehh4XtTBk9K+qcGNCq7QO65s5CPnWdRgtTmqQRsBYZQ@mail.gmail.com>
References: <CA+mFFDNehh4XtTBk9K+qcGNCq7QO65s5CPnWdRgtTmqQRsBYZQ@mail.gmail.com>
Message-ID: <DCE81E14EB74504B971DAD4D2DB0356B0CB926B118@crcmail4.BCCRC.CA>

Hi Ann

Looks like a typo - I see "moreley.tab" that should be "morley.tab".
Works for me after correcting that.

> filepath <- system.file("data", "moreley.tab", package="datasets")
> filepath
[1] ""
> 
> filepath <- system.file("data", "morley.tab", package="datasets")
> filepath
[1] "C:/PROGRA~1/R/R-30~1.1/library/datasets/data/morley.tab"
> mm <- read.table(filepath)
> head(mm)
    Expt Run Speed
001    1   1   850
002    1   2   740
003    1   3   900
004    1   4  1070
005    1   5   930
006    1   6   850
> 


Steven McKinney

Statistician
Molecular Oncology and Breast Cancer Program
British Columbia Cancer Research Centre





> -----Original Message-----
> From: r-sig-mac-bounces at r-project.org [mailto:r-sig-mac-bounces at r-
> project.org] On Behalf Of Ann Summy
> Sent: November-22-13 4:56 PM
> To: r-sig-mac; r-help
> Subject: [R-SIG-Mac] morley object?
> 
> Brand new to R and not a sys admin or programmer type.  I am trying to work
> through the intro tutorial in the sample session here
> http://cran.r-project.org/doc/manuals/R-intro.html#A-sample-session.
> 
> I have an error when following the instructions below:
> 
> > The next section will look at data from the classical experiment of
> > Michelson to measure the speed of light. This dataset is available in the
> > morley object, but we will read it to illustrate the read.table function.
> > filepath <- system.file("data", "morley.tab" ,
> package="datasets")filepath
> >
> > Get the path to the data file.
> > file.show(filepath)
> >
> > Optional. Look at the file.
> > mm <- read.table(filepath)mm
> >
> > Read in the Michelson data as a data frame, and look at it. There are
> five
> > experiments (column Expt) and each has 20 runs (column Run) and sl is the
> > recorded speed of light, suitably coded.
> >
> Here is my result:
> 
> > > filepath <- system.file("data", "moreley.tab", package="datasets")
> 
> > filepath
> 
> [1] ""
> 
> > file.show(filepath)
> 
> > mm <- read.table(filepath)
> 
> Error in read.table(filepath) : no lines available in input
> 
> In addition: Warning message:
> 
> In file(file, "rt") :
> 
>   file("") only supports open = "w+" and open = "w+b": using the former
> 
> 
> Is it because I am missing this "morley object"?  How do I see a list of
> what objects I have installed?  I installed
> R-2.15.3.pkg<http://cran.r-project.org/bin/macosx/old/R-2.15.3.pkg>,
> because
> I am teaching myself on a 32-bit Macbook.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From ann.summy at gmail.com  Sat Nov 23 02:26:01 2013
From: ann.summy at gmail.com (Ann Summy)
Date: Fri, 22 Nov 2013 17:26:01 -0800
Subject: [R-SIG-Mac] morley object?
In-Reply-To: <DCE81E14EB74504B971DAD4D2DB0356B0CB926B118@crcmail4.BCCRC.CA>
References: <CA+mFFDNehh4XtTBk9K+qcGNCq7QO65s5CPnWdRgtTmqQRsBYZQ@mail.gmail.com>
	<DCE81E14EB74504B971DAD4D2DB0356B0CB926B118@crcmail4.BCCRC.CA>
Message-ID: <CA+mFFDPOh-CXwA7K74C5PQT85TkQZaxYy7KoXvqkjHEac59tMQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131122/8af1304d/attachment.pl>

From jfox at mcmaster.ca  Sat Nov 23 14:43:21 2013
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 23 Nov 2013 08:43:21 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
Message-ID: <web-484670061@cgpsrv2.cis.mcmaster.ca>

Dear Rob et al.,

I'm glad that there's progress in understanding the source of the problem, but I wonder why the problem doesn't manifest itself -- at least in my experience -- when R runs in a terminal window.

Best,
 John

On Fri, 22 Nov 2013 14:42:00 -0800
 Robert J Goedman <goedman at icloud.com> wrote:
> Thansk Peter,
> 
> Now I can reproduce it!
> 
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> 
> On Nov 22, 2013, at 1:00 PM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> > 
> > On 22 Nov 2013, at 16:42 , Robert J Goedman <goedman at icloud.com> wrote:
> > 
> >> Not sure how long it takes to see the lagging (a few minutes someone reported), but I've not been able to reproduce this problem.
> > 
> > For me, library(tcltk); demo(tkfaq), click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom of the file, Fn-Up to the top, etc. Less than two iteration for me before the effect kicks in.
> > 
> >> 
> >> Which makes me wonder if anyone has seen this behavior after rebuilding R.app on Mavericks (from the R.app sources).
> >> 
> >> Regards,
> >> Rob J. Goedman
> >> goedman at icloud.com
> >> 
> >> 
> >> On Nov 22, 2013, at 7:29 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> >> 
> >>> On Nov 20, 2013, at 11:41 AM, Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >>> 
> >>>> I upgraded to XQuartz 2.7.5, but it still lags.
> >>>> 
> >>> 
> >>> Please read Peter's response - it has nothing to do with XQuartz versions
> >> 
> >> 
> >> 	[[alternative HTML version deleted]]
> >> 
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> > 
> > -- 
> > Peter Dalgaard, Professor,
> > Center for Statistics, Copenhagen Business School
> > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> > Phone: (+45)38153501
> > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From goedman at icloud.com  Sun Nov 24 03:59:12 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Sat, 23 Nov 2013 18:59:12 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-484670061@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
Message-ID: <580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>

Hi John,

Looking at Activity Monitor on my system, R will always take up say 2.5% CPU time while R.app will almost go away if it is not active. This might be because in a terminal the process might not be treated as a pure application but maybe more as a traditional Unix process. But that's just a guess from my side.

What surprised me a bit is that we couldn't switch off App Nap, as is possible with several other apps (go to the Info panel of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox). R.app did not show that box, probably a consequence of an older build/project creation?

Anyway, on my system I added that property in the info.plist and disabled the App Nap behavior. It seems to be working fine now. I'll do some more testing to see if I can get the check box on the Info screen show up and check with Simon if it's ok to commit the change. Of course, in that case R.app will also always consume 2.5% CPU. Under the energy tab of the Activity Monitor you can see which apps allow App Nap.

Rob J. Goedman
goedman at icloud.com




On Nov 23, 2013, at 5:43 AM, John Fox <jfox at mcmaster.ca> wrote:

> Dear Rob et al.,
> 
> I'm glad that there's progress in understanding the source of the problem, but I wonder why the problem doesn't manifest itself -- at least in my experience -- when R runs in a terminal window.
> 
> Best,
> John
> 
> On Fri, 22 Nov 2013 14:42:00 -0800
> Robert J Goedman <goedman at icloud.com> wrote:
>> Thansk Peter,
>> 
>> Now I can reproduce it!
>> 
>> Rob J. Goedman
>> goedman at icloud.com
>> 
>> 
>> 
>> 
>> On Nov 22, 2013, at 1:00 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>>> 
>>> On 22 Nov 2013, at 16:42 , Robert J Goedman <goedman at icloud.com> wrote:
>>> 
>>>> Not sure how long it takes to see the lagging (a few minutes someone reported), but I've not been able to reproduce this problem.
>>> 
>>> For me, library(tcltk); demo(tkfaq), click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom of the file, Fn-Up to the top, etc. Less than two iteration for me before the effect kicks in.
>>> 
>>>> 
>>>> Which makes me wonder if anyone has seen this behavior after rebuilding R.app on Mavericks (from the R.app sources).
>>>> 
>>>> Regards,
>>>> Rob J. Goedman
>>>> goedman at icloud.com
>>>> 
>>>> 
>>>> On Nov 22, 2013, at 7:29 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>> 
>>>>> On Nov 20, 2013, at 11:41 AM, Jonathan Chapman <petsrme2 at icloud.com> wrote:
>>>>> 
>>>>>> I upgraded to XQuartz 2.7.5, but it still lags.
>>>>>> 
>>>>> 
>>>>> Please read Peter's response - it has nothing to do with XQuartz versions
>>>> 
>>>> 
>>>> 	[[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>>> -- 
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From jfox at mcmaster.ca  Sun Nov 24 06:06:42 2013
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 24 Nov 2013 00:06:42 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
Message-ID: <web-484711348@cgpsrv2.cis.mcmaster.ca>

Hi Rob,

Thanks for the explanation -- that makes sense of the current behaviour. I think that you know that I'm not very knowledgeable about OS X. A couple of follow-up questions:

If you make this change to R.app, will the default be to disable App Nap or just to provide the check box?

If App Nap isn't disable by R.app by default, would it be possible to disable it under program control, e.g., when the Rcmdr package is loaded? 

Best,
 John

On Sat, 23 Nov 2013 18:59:12 -0800
 Robert J Goedman <goedman at icloud.com> wrote:
> Hi John,
> 
> Looking at Activity Monitor on my system, R will always take up say 2.5% CPU time while R.app will almost go away if it is not active. This might be because in a terminal the process might not be treated as a pure application but maybe more as a traditional Unix process. But that's just a guess from my side.
> 
> What surprised me a bit is that we couldn't switch off App Nap, as is possible with several other apps (go to the Info panel of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox). R.app did not show that box, probably a consequence of an older build/project creation?
> 
> Anyway, on my system I added that property in the info.plist and disabled the App Nap behavior. It seems to be working fine now. I'll do some more testing to see if I can get the check box on the Info screen show up and check with Simon if it's ok to commit the change. Of course, in that case R.app will also always consume 2.5% CPU. Under the energy tab of the Activity Monitor you can see which apps allow App Nap.
> 
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> 
> On Nov 23, 2013, at 5:43 AM, John Fox <jfox at mcmaster.ca> wrote:
> 
> > Dear Rob et al.,
> > 
> > I'm glad that there's progress in understanding the source of the problem, but I wonder why the problem doesn't manifest itself -- at least in my experience -- when R runs in a terminal window.
> > 
> > Best,
> > John
> > 
> > On Fri, 22 Nov 2013 14:42:00 -0800
> > Robert J Goedman <goedman at icloud.com> wrote:
> >> Thansk Peter,
> >> 
> >> Now I can reproduce it!
> >> 
> >> Rob J. Goedman
> >> goedman at icloud.com
> >> 
> >> 
> >> 
> >> 
> >> On Nov 22, 2013, at 1:00 PM, peter dalgaard <pdalgd at gmail.com> wrote:
> >> 
> >>> 
> >>> On 22 Nov 2013, at 16:42 , Robert J Goedman <goedman at icloud.com> wrote:
> >>> 
> >>>> Not sure how long it takes to see the lagging (a few minutes someone reported), but I've not been able to reproduce this problem.
> >>> 
> >>> For me, library(tcltk); demo(tkfaq), click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom of the file, Fn-Up to the top, etc. Less than two iteration for me before the effect kicks in.
> >>> 
> >>>> 
> >>>> Which makes me wonder if anyone has seen this behavior after rebuilding R.app on Mavericks (from the R.app sources).
> >>>> 
> >>>> Regards,
> >>>> Rob J. Goedman
> >>>> goedman at icloud.com
> >>>> 
> >>>> 
> >>>> On Nov 22, 2013, at 7:29 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> >>>> 
> >>>>> On Nov 20, 2013, at 11:41 AM, Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >>>>> 
> >>>>>> I upgraded to XQuartz 2.7.5, but it still lags.
> >>>>>> 
> >>>>> 
> >>>>> Please read Peter's response - it has nothing to do with XQuartz versions
> >>>> 
> >>>> 
> >>>> 	[[alternative HTML version deleted]]
> >>>> 
> >>>> _______________________________________________
> >>>> R-SIG-Mac mailing list
> >>>> R-SIG-Mac at r-project.org
> >>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>> 
> >>> -- 
> >>> Peter Dalgaard, Professor,
> >>> Center for Statistics, Copenhagen Business School
> >>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >>> Phone: (+45)38153501
> >>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >> 
> >> 
> >> 	[[alternative HTML version deleted]]
> >> 
> >> _______________________________________________
> >> R-SIG-Mac mailing list
> >> R-SIG-Mac at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>


From goedman at icloud.com  Sun Nov 24 07:31:49 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Sat, 23 Nov 2013 22:31:49 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-484711348@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
Message-ID: <3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>

Hi John,

I'm just starting, but it look likes 'defaults write ...' can be used to manage the setting. Not elegant, but maybe temporarily ok for tcltk users.

Someone from TexShop (Richard Koch) reported that if R.app is compiled against the 10.9 APIs, the 'Prevent App Nap' check box will not appear. The ultimate solution is for R.app to know when App Nap should not kick in, there is a new API for that.

So, some more homework...

Regards,
Rob J. Goedman
goedman at icloud.com




On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca> wrote:

> Hi Rob,
> 
> Thanks for the explanation -- that makes sense of the current behaviour. I think that you know that I'm not very knowledgeable about OS X. A couple of follow-up questions:
> 
> If you make this change to R.app, will the default be to disable App Nap or just to provide the check box?
> 
> If App Nap isn't disable by R.app by default, would it be possible to disable it under program control, e.g., when the Rcmdr package is loaded? 
> 
> Best,
> John
> 
> On Sat, 23 Nov 2013 18:59:12 -0800
> Robert J Goedman <goedman at icloud.com> wrote:
>> Hi John,
>> 
>> Looking at Activity Monitor on my system, R will always take up say 2.5% CPU time while R.app will almost go away if it is not active. This might be because in a terminal the process might not be treated as a pure application but maybe more as a traditional Unix process. But that's just a guess from my side.
>> 
>> What surprised me a bit is that we couldn't switch off App Nap, as is possible with several other apps (go to the Info panel of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox). R.app did not show that box, probably a consequence of an older build/project creation?
>> 
>> Anyway, on my system I added that property in the info.plist and disabled the App Nap behavior. It seems to be working fine now. I'll do some more testing to see if I can get the check box on the Info screen show up and check with Simon if it's ok to commit the change. Of course, in that case R.app will also always consume 2.5% CPU. Under the energy tab of the Activity Monitor you can see which apps allow App Nap.
>> 
>> Rob J. Goedman
>> goedman at icloud.com
>> 
>> 
>> 
>> 
>> On Nov 23, 2013, at 5:43 AM, John Fox <jfox at mcmaster.ca> wrote:
>> 
>>> Dear Rob et al.,
>>> 
>>> I'm glad that there's progress in understanding the source of the problem, but I wonder why the problem doesn't manifest itself -- at least in my experience -- when R runs in a terminal window.
>>> 
>>> Best,
>>> John
>>> 
>>> On Fri, 22 Nov 2013 14:42:00 -0800
>>> Robert J Goedman <goedman at icloud.com> wrote:
>>>> Thansk Peter,
>>>> 
>>>> Now I can reproduce it!
>>>> 
>>>> Rob J. Goedman
>>>> goedman at icloud.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> On Nov 22, 2013, at 1:00 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>>>> 
>>>>> 
>>>>> On 22 Nov 2013, at 16:42 , Robert J Goedman <goedman at icloud.com> wrote:
>>>>> 
>>>>>> Not sure how long it takes to see the lagging (a few minutes someone reported), but I've not been able to reproduce this problem.
>>>>> 
>>>>> For me, library(tcltk); demo(tkfaq), click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom of the file, Fn-Up to the top, etc. Less than two iteration for me before the effect kicks in.
>>>>> 
>>>>>> 
>>>>>> Which makes me wonder if anyone has seen this behavior after rebuilding R.app on Mavericks (from the R.app sources).
>>>>>> 
>>>>>> Regards,
>>>>>> Rob J. Goedman
>>>>>> goedman at icloud.com
>>>>>> 
>>>>>> 
>>>>>> On Nov 22, 2013, at 7:29 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>>>> 
>>>>>>> On Nov 20, 2013, at 11:41 AM, Jonathan Chapman <petsrme2 at icloud.com> wrote:
>>>>>>> 
>>>>>>>> I upgraded to XQuartz 2.7.5, but it still lags.
>>>>>>>> 
>>>>>>> 
>>>>>>> Please read Peter's response - it has nothing to do with XQuartz versions
>>>>>> 
>>>>>> 
>>>>>> 	[[alternative HTML version deleted]]
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Mac mailing list
>>>>>> R-SIG-Mac at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>> 
>>>>> -- 
>>>>> Peter Dalgaard, Professor,
>>>>> Center for Statistics, Copenhagen Business School
>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>> Phone: (+45)38153501
>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>> 
>>>> 
>>>> 	[[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 


From goedman at icloud.com  Sun Nov 24 16:32:09 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Sun, 24 Nov 2013 07:32:09 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
Message-ID: <427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131124/5240f561/attachment.pl>

From jfox at mcmaster.ca  Sun Nov 24 17:30:38 2013
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 24 Nov 2013 11:30:38 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
Message-ID: <000601cee932$832a7f00$897f7d00$@mcmaster.ca>

Hi Rob,

You've just answered my next question! I was holding off to give you a
chance to address the issue directly in R.app.

Is there any reason for me, at least for the time-being, not to do this from
the Rcmdr via system()? I just tried, and that seems to work. If necessary,
I could check for the existence and (if it exists) the current state of this
key, and restore that when the Commander() exits. Of course, if you plan to
address the issue directly soon, it doesn't make sense for me to do so.

Thanks again for your help.

John

> -----Original Message-----
> From: Robert J Goedman [mailto:goedman at icloud.com]
> Sent: Sunday, November 24, 2013 10:32 AM
> To: John Fox
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> Mavericks
> 
> Hi John,
> 
> If you want to play around with NSAppSleepDisabled yourself, you can,
> in a Terminal:
> 
> defaults write org.R-project.R NSAppSleepDisabled -bool yes
> 
> to check the setting:
> 
> defaults read org.R-project.R NSAppSleepDisabled
> 
> or to re-enable AppNap:
> 
> defaults write org.R-project.R NSAppSleepDisabled -bool no
> 
> or just delete the key:
> 
> defaults delete org.R-project.R NSAppSleepDisabled
> 
> Regards,
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> 
> On Nov 23, 2013, at 10:31 PM, Robert J Goedman <goedman at icloud.com>
> wrote:
> 
> 
> 	Hi John,
> 
> 	I'm just starting, but it look likes 'defaults write ...' can be
> used to manage the setting. Not elegant, but maybe temporarily ok for
> tcltk users.
> 
> 	Someone from TexShop (Richard Koch) reported that if R.app is
> compiled against the 10.9 APIs, the 'Prevent App Nap' check box will
> not appear. The ultimate solution is for R.app to know when App Nap
> should not kick in, there is a new API for that.
> 
> 	So, some more homework...
> 
> 	Regards,
> 	Rob J. Goedman
> 	goedman at icloud.com
> 
> 
> 
> 
> 	On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca> wrote:
> 
> 
> 
> 		Hi Rob,
> 
> 		Thanks for the explanation -- that makes sense of the
current
> behaviour. I think that you know that I'm not very knowledgeable about
> OS X. A couple of follow-up questions:
> 
> 		If you make this change to R.app, will the default be to
> disable App Nap or just to provide the check box?
> 
> 		If App Nap isn't disable by R.app by default, would it be
> possible to disable it under program control, e.g., when the Rcmdr
> package is loaded?
> 
> 		Best,
> 		John
> 
> 		On Sat, 23 Nov 2013 18:59:12 -0800
> 		Robert J Goedman <goedman at icloud.com> wrote:
> 
> 
> 			Hi John,
> 
> 			Looking at Activity Monitor on my system, R will
always
> take up say 2.5% CPU time while R.app will almost go away if it is not
> active. This might be because in a terminal the process might not be
> treated as a pure application but maybe more as a traditional Unix
> process. But that's just a guess from my side.
> 
> 			What surprised me a bit is that we couldn't switch
off
> App Nap, as is possible with several other apps (go to the Info panel
> of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox).
> R.app did not show that box, probably a consequence of an older
> build/project creation?
> 
> 			Anyway, on my system I added that property in the
> info.plist and disabled the App Nap behavior. It seems to be working
> fine now. I'll do some more testing to see if I can get the check box
> on the Info screen show up and check with Simon if it's ok to commit
> the change. Of course, in that case R.app will also always consume 2.5%
> CPU. Under the energy tab of the Activity Monitor you can see which
> apps allow App Nap.
> 
> 			Rob J. Goedman
> 			goedman at icloud.com
> 
> 
> 
> 
> 			On Nov 23, 2013, at 5:43 AM, John Fox
<jfox at mcmaster.ca>
> wrote:
> 
> 
> 
> 				Dear Rob et al.,
> 
> 				I'm glad that there's progress in
understanding
> the source of the problem, but I wonder why the problem doesn't
> manifest itself -- at least in my experience -- when R runs in a
> terminal window.
> 
> 				Best,
> 				John
> 
> 				On Fri, 22 Nov 2013 14:42:00 -0800
> 				Robert J Goedman <goedman at icloud.com> wrote:
> 
> 
> 					Thansk Peter,
> 
> 					Now I can reproduce it!
> 
> 					Rob J. Goedman
> 					goedman at icloud.com
> 
> 
> 
> 
> 					On Nov 22, 2013, at 1:00 PM, peter
dalgaard
> <pdalgd at gmail.com> wrote:
> 
> 
> 
> 
> 						On 22 Nov 2013, at 16:42 ,
Robert J
> Goedman <goedman at icloud.com> wrote:
> 
> 
> 
> 							Not sure how long it
takes to see
> the lagging (a few minutes someone reported), but I've not been able to
> reproduce this problem.
> 
> 
> 
> 						For me, library(tcltk);
demo(tkfaq),
> click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom of
> the file, Fn-Up to the top, etc. Less than two iteration for me before
> the effect kicks in.
> 
> 
> 
> 
> 							Which makes me
wonder if anyone
> has seen this behavior after rebuilding R.app on Mavericks (from the
> R.app sources).
> 
> 							Regards,
> 							Rob J. Goedman
> 							goedman at icloud.com
> 
> 
> 							On Nov 22, 2013, at
7:29 AM, Simon
> Urbanek <simon.urbanek at r-project.org> wrote:
> 
> 
> 
> 								On Nov 20,
2013, at 11:41 AM,
> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> 
> 
> 
> 									I
upgraded to XQuartz
> 2.7.5, but it still lags.
> 
> 
> 
> 
> 								Please read
Peter's response
> - it has nothing to do with XQuartz versions
> 
> 
> 
> 
> 							[[alternative HTML
version
> deleted]]
> 
> 
> 	_______________________________________________
> 							R-SIG-Mac mailing
list
>
R-SIG-Mac at r-project.org
> 
> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 
> 						--
> 						Peter Dalgaard, Professor,
> 						Center for Statistics,
Copenhagen
> Business School
> 						Solbjerg Plads 3, 2000
Frederiksberg,
> Denmark
> 						Phone: (+45)38153501
> 						Email: pd.mes at cbs.dk  Priv:
> PDalgd at gmail.com
> 
> 
> 
> 
> 					[[alternative HTML version deleted]]
> 
> 
> 	_______________________________________________
> 					R-SIG-Mac mailing list
> 					R-SIG-Mac at r-project.org
>
https://stat.ethz.ch/mailman/listinfo/r-sig-
> mac
> 
> 
> 
> 
> 	_______________________________________________
> 	R-SIG-Mac mailing list
> 	R-SIG-Mac at r-project.org
> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
>


From goedman at icloud.com  Sun Nov 24 17:50:19 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Sun, 24 Nov 2013 08:50:19 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <000601cee932$832a7f00$897f7d00$@mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
Message-ID: <79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>

Hi John,

If it's not too much work, I would implement it in Rcmdr because I don't know if there are other consequences of App Nap, so until the dust settles using the defaults system might be ok.

Regards,
Rob J. Goedman
goedman at icloud.com




On Nov 24, 2013, at 8:30 AM, John Fox <jfox at mcmaster.ca> wrote:

> Hi Rob,
> 
> You've just answered my next question! I was holding off to give you a
> chance to address the issue directly in R.app.
> 
> Is there any reason for me, at least for the time-being, not to do this from
> the Rcmdr via system()? I just tried, and that seems to work. If necessary,
> I could check for the existence and (if it exists) the current state of this
> key, and restore that when the Commander() exits. Of course, if you plan to
> address the issue directly soon, it doesn't make sense for me to do so.
> 
> Thanks again for your help.
> 
> John
> 
>> -----Original Message-----
>> From: Robert J Goedman [mailto:goedman at icloud.com]
>> Sent: Sunday, November 24, 2013 10:32 AM
>> To: John Fox
>> Cc: r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
>> Mavericks
>> 
>> Hi John,
>> 
>> If you want to play around with NSAppSleepDisabled yourself, you can,
>> in a Terminal:
>> 
>> defaults write org.R-project.R NSAppSleepDisabled -bool yes
>> 
>> to check the setting:
>> 
>> defaults read org.R-project.R NSAppSleepDisabled
>> 
>> or to re-enable AppNap:
>> 
>> defaults write org.R-project.R NSAppSleepDisabled -bool no
>> 
>> or just delete the key:
>> 
>> defaults delete org.R-project.R NSAppSleepDisabled
>> 
>> Regards,
>> Rob J. Goedman
>> goedman at icloud.com
>> 
>> 
>> 
>> 
>> On Nov 23, 2013, at 10:31 PM, Robert J Goedman <goedman at icloud.com>
>> wrote:
>> 
>> 
>> 	Hi John,
>> 
>> 	I'm just starting, but it look likes 'defaults write ...' can be
>> used to manage the setting. Not elegant, but maybe temporarily ok for
>> tcltk users.
>> 
>> 	Someone from TexShop (Richard Koch) reported that if R.app is
>> compiled against the 10.9 APIs, the 'Prevent App Nap' check box will
>> not appear. The ultimate solution is for R.app to know when App Nap
>> should not kick in, there is a new API for that.
>> 
>> 	So, some more homework...
>> 
>> 	Regards,
>> 	Rob J. Goedman
>> 	goedman at icloud.com
>> 
>> 
>> 
>> 
>> 	On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca> wrote:
>> 
>> 
>> 
>> 		Hi Rob,
>> 
>> 		Thanks for the explanation -- that makes sense of the
> current
>> behaviour. I think that you know that I'm not very knowledgeable about
>> OS X. A couple of follow-up questions:
>> 
>> 		If you make this change to R.app, will the default be to
>> disable App Nap or just to provide the check box?
>> 
>> 		If App Nap isn't disable by R.app by default, would it be
>> possible to disable it under program control, e.g., when the Rcmdr
>> package is loaded?
>> 
>> 		Best,
>> 		John
>> 
>> 		On Sat, 23 Nov 2013 18:59:12 -0800
>> 		Robert J Goedman <goedman at icloud.com> wrote:
>> 
>> 
>> 			Hi John,
>> 
>> 			Looking at Activity Monitor on my system, R will
> always
>> take up say 2.5% CPU time while R.app will almost go away if it is not
>> active. This might be because in a terminal the process might not be
>> treated as a pure application but maybe more as a traditional Unix
>> process. But that's just a guess from my side.
>> 
>> 			What surprised me a bit is that we couldn't switch
> off
>> App Nap, as is possible with several other apps (go to the Info panel
>> of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox).
>> R.app did not show that box, probably a consequence of an older
>> build/project creation?
>> 
>> 			Anyway, on my system I added that property in the
>> info.plist and disabled the App Nap behavior. It seems to be working
>> fine now. I'll do some more testing to see if I can get the check box
>> on the Info screen show up and check with Simon if it's ok to commit
>> the change. Of course, in that case R.app will also always consume 2.5%
>> CPU. Under the energy tab of the Activity Monitor you can see which
>> apps allow App Nap.
>> 
>> 			Rob J. Goedman
>> 			goedman at icloud.com
>> 
>> 
>> 
>> 
>> 			On Nov 23, 2013, at 5:43 AM, John Fox
> <jfox at mcmaster.ca>
>> wrote:
>> 
>> 
>> 
>> 				Dear Rob et al.,
>> 
>> 				I'm glad that there's progress in
> understanding
>> the source of the problem, but I wonder why the problem doesn't
>> manifest itself -- at least in my experience -- when R runs in a
>> terminal window.
>> 
>> 				Best,
>> 				John
>> 
>> 				On Fri, 22 Nov 2013 14:42:00 -0800
>> 				Robert J Goedman <goedman at icloud.com> wrote:
>> 
>> 
>> 					Thansk Peter,
>> 
>> 					Now I can reproduce it!
>> 
>> 					Rob J. Goedman
>> 					goedman at icloud.com
>> 
>> 
>> 
>> 
>> 					On Nov 22, 2013, at 1:00 PM, peter
> dalgaard
>> <pdalgd at gmail.com> wrote:
>> 
>> 
>> 
>> 
>> 						On 22 Nov 2013, at 16:42 ,
> Robert J
>> Goedman <goedman at icloud.com> wrote:
>> 
>> 
>> 
>> 							Not sure how long it
> takes to see
>> the lagging (a few minutes someone reported), but I've not been able to
>> reproduce this problem.
>> 
>> 
>> 
>> 						For me, library(tcltk);
> demo(tkfaq),
>> click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom of
>> the file, Fn-Up to the top, etc. Less than two iteration for me before
>> the effect kicks in.
>> 
>> 
>> 
>> 
>> 							Which makes me
> wonder if anyone
>> has seen this behavior after rebuilding R.app on Mavericks (from the
>> R.app sources).
>> 
>> 							Regards,
>> 							Rob J. Goedman
>> 							goedman at icloud.com
>> 
>> 
>> 							On Nov 22, 2013, at
> 7:29 AM, Simon
>> Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>> 
>> 
>> 								On Nov 20,
> 2013, at 11:41 AM,
>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
>> 
>> 
>> 
>> 									I
> upgraded to XQuartz
>> 2.7.5, but it still lags.
>> 
>> 
>> 
>> 
>> 								Please read
> Peter's response
>> - it has nothing to do with XQuartz versions
>> 
>> 
>> 
>> 
>> 							[[alternative HTML
> version
>> deleted]]
>> 
>> 
>> 	_______________________________________________
>> 							R-SIG-Mac mailing
> list
>> 
> R-SIG-Mac at r-project.org
>> 
>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> 
>> 						--
>> 						Peter Dalgaard, Professor,
>> 						Center for Statistics,
> Copenhagen
>> Business School
>> 						Solbjerg Plads 3, 2000
> Frederiksberg,
>> Denmark
>> 						Phone: (+45)38153501
>> 						Email: pd.mes at cbs.dk  Priv:
>> PDalgd at gmail.com
>> 
>> 
>> 
>> 
>> 					[[alternative HTML version deleted]]
>> 
>> 
>> 	_______________________________________________
>> 					R-SIG-Mac mailing list
>> 					R-SIG-Mac at r-project.org
>> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-
>> mac
>> 
>> 
>> 
>> 
>> 	_______________________________________________
>> 	R-SIG-Mac mailing list
>> 	R-SIG-Mac at r-project.org
>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
> 
> 


From jfox at mcmaster.ca  Sun Nov 24 18:10:33 2013
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 24 Nov 2013 12:10:33 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
Message-ID: <000701cee938$1666a870$4333f950$@mcmaster.ca>

Hi Rob,

OK -- thanks. I'll do that in the development version of the package on
R-Forge when I have a chance, likely sometime this week. I'll then post a
message to this list.

Best,
 John

> -----Original Message-----
> From: Robert J Goedman [mailto:goedman at icloud.com]
> Sent: Sunday, November 24, 2013 11:50 AM
> To: John Fox
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> Mavericks
> 
> Hi John,
> 
> If it's not too much work, I would implement it in Rcmdr because I
> don't know if there are other consequences of App Nap, so until the
> dust settles using the defaults system might be ok.
> 
> Regards,
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> 
> On Nov 24, 2013, at 8:30 AM, John Fox <jfox at mcmaster.ca> wrote:
> 
> > Hi Rob,
> >
> > You've just answered my next question! I was holding off to give you
> a
> > chance to address the issue directly in R.app.
> >
> > Is there any reason for me, at least for the time-being, not to do
> this from
> > the Rcmdr via system()? I just tried, and that seems to work. If
> necessary,
> > I could check for the existence and (if it exists) the current state
> of this
> > key, and restore that when the Commander() exits. Of course, if you
> plan to
> > address the issue directly soon, it doesn't make sense for me to do
> so.
> >
> > Thanks again for your help.
> >
> > John
> >
> >> -----Original Message-----
> >> From: Robert J Goedman [mailto:goedman at icloud.com]
> >> Sent: Sunday, November 24, 2013 10:32 AM
> >> To: John Fox
> >> Cc: r-sig-mac at r-project.org
> >> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> >> Mavericks
> >>
> >> Hi John,
> >>
> >> If you want to play around with NSAppSleepDisabled yourself, you
> can,
> >> in a Terminal:
> >>
> >> defaults write org.R-project.R NSAppSleepDisabled -bool yes
> >>
> >> to check the setting:
> >>
> >> defaults read org.R-project.R NSAppSleepDisabled
> >>
> >> or to re-enable AppNap:
> >>
> >> defaults write org.R-project.R NSAppSleepDisabled -bool no
> >>
> >> or just delete the key:
> >>
> >> defaults delete org.R-project.R NSAppSleepDisabled
> >>
> >> Regards,
> >> Rob J. Goedman
> >> goedman at icloud.com
> >>
> >>
> >>
> >>
> >> On Nov 23, 2013, at 10:31 PM, Robert J Goedman <goedman at icloud.com>
> >> wrote:
> >>
> >>
> >> 	Hi John,
> >>
> >> 	I'm just starting, but it look likes 'defaults write ...' can be
> >> used to manage the setting. Not elegant, but maybe temporarily ok
> for
> >> tcltk users.
> >>
> >> 	Someone from TexShop (Richard Koch) reported that if R.app is
> >> compiled against the 10.9 APIs, the 'Prevent App Nap' check box will
> >> not appear. The ultimate solution is for R.app to know when App Nap
> >> should not kick in, there is a new API for that.
> >>
> >> 	So, some more homework...
> >>
> >> 	Regards,
> >> 	Rob J. Goedman
> >> 	goedman at icloud.com
> >>
> >>
> >>
> >>
> >> 	On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca> wrote:
> >>
> >>
> >>
> >> 		Hi Rob,
> >>
> >> 		Thanks for the explanation -- that makes sense of the
> > current
> >> behaviour. I think that you know that I'm not very knowledgeable
> about
> >> OS X. A couple of follow-up questions:
> >>
> >> 		If you make this change to R.app, will the default be to
> >> disable App Nap or just to provide the check box?
> >>
> >> 		If App Nap isn't disable by R.app by default, would it be
> >> possible to disable it under program control, e.g., when the Rcmdr
> >> package is loaded?
> >>
> >> 		Best,
> >> 		John
> >>
> >> 		On Sat, 23 Nov 2013 18:59:12 -0800
> >> 		Robert J Goedman <goedman at icloud.com> wrote:
> >>
> >>
> >> 			Hi John,
> >>
> >> 			Looking at Activity Monitor on my system, R will
> > always
> >> take up say 2.5% CPU time while R.app will almost go away if it is
> not
> >> active. This might be because in a terminal the process might not be
> >> treated as a pure application but maybe more as a traditional Unix
> >> process. But that's just a guess from my side.
> >>
> >> 			What surprised me a bit is that we couldn't switch
> > off
> >> App Nap, as is possible with several other apps (go to the Info
> panel
> >> of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox).
> >> R.app did not show that box, probably a consequence of an older
> >> build/project creation?
> >>
> >> 			Anyway, on my system I added that property in the
> >> info.plist and disabled the App Nap behavior. It seems to be working
> >> fine now. I'll do some more testing to see if I can get the check
> box
> >> on the Info screen show up and check with Simon if it's ok to commit
> >> the change. Of course, in that case R.app will also always consume
> 2.5%
> >> CPU. Under the energy tab of the Activity Monitor you can see which
> >> apps allow App Nap.
> >>
> >> 			Rob J. Goedman
> >> 			goedman at icloud.com
> >>
> >>
> >>
> >>
> >> 			On Nov 23, 2013, at 5:43 AM, John Fox
> > <jfox at mcmaster.ca>
> >> wrote:
> >>
> >>
> >>
> >> 				Dear Rob et al.,
> >>
> >> 				I'm glad that there's progress in
> > understanding
> >> the source of the problem, but I wonder why the problem doesn't
> >> manifest itself -- at least in my experience -- when R runs in a
> >> terminal window.
> >>
> >> 				Best,
> >> 				John
> >>
> >> 				On Fri, 22 Nov 2013 14:42:00 -0800
> >> 				Robert J Goedman <goedman at icloud.com> wrote:
> >>
> >>
> >> 					Thansk Peter,
> >>
> >> 					Now I can reproduce it!
> >>
> >> 					Rob J. Goedman
> >> 					goedman at icloud.com
> >>
> >>
> >>
> >>
> >> 					On Nov 22, 2013, at 1:00 PM, peter
> > dalgaard
> >> <pdalgd at gmail.com> wrote:
> >>
> >>
> >>
> >>
> >> 						On 22 Nov 2013, at 16:42 ,
> > Robert J
> >> Goedman <goedman at icloud.com> wrote:
> >>
> >>
> >>
> >> 							Not sure how long it
> > takes to see
> >> the lagging (a few minutes someone reported), but I've not been able
> to
> >> reproduce this problem.
> >>
> >>
> >>
> >> 						For me, library(tcltk);
> > demo(tkfaq),
> >> click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom
> of
> >> the file, Fn-Up to the top, etc. Less than two iteration for me
> before
> >> the effect kicks in.
> >>
> >>
> >>
> >>
> >> 							Which makes me
> > wonder if anyone
> >> has seen this behavior after rebuilding R.app on Mavericks (from the
> >> R.app sources).
> >>
> >> 							Regards,
> >> 							Rob J. Goedman
> >> 							goedman at icloud.com
> >>
> >>
> >> 							On Nov 22, 2013, at
> > 7:29 AM, Simon
> >> Urbanek <simon.urbanek at r-project.org> wrote:
> >>
> >>
> >>
> >> 								On Nov 20,
> > 2013, at 11:41 AM,
> >> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >>
> >>
> >>
> >> 									I
> > upgraded to XQuartz
> >> 2.7.5, but it still lags.
> >>
> >>
> >>
> >>
> >> 								Please read
> > Peter's response
> >> - it has nothing to do with XQuartz versions
> >>
> >>
> >>
> >>
> >> 							[[alternative HTML
> > version
> >> deleted]]
> >>
> >>
> >> 	_______________________________________________
> >> 							R-SIG-Mac mailing
> > list
> >>
> > R-SIG-Mac at r-project.org
> >>
> >> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >>
> >>
> >> 						--
> >> 						Peter Dalgaard, Professor,
> >> 						Center for Statistics,
> > Copenhagen
> >> Business School
> >> 						Solbjerg Plads 3, 2000
> > Frederiksberg,
> >> Denmark
> >> 						Phone: (+45)38153501
> >> 						Email: pd.mes at cbs.dk  Priv:
> >> PDalgd at gmail.com
> >>
> >>
> >>
> >>
> >> 					[[alternative HTML version deleted]]
> >>
> >>
> >> 	_______________________________________________
> >> 					R-SIG-Mac mailing list
> >> 					R-SIG-Mac at r-project.org
> >>
> > https://stat.ethz.ch/mailman/listinfo/r-sig-
> >> mac
> >>
> >>
> >>
> >>
> >> 	_______________________________________________
> >> 	R-SIG-Mac mailing list
> >> 	R-SIG-Mac at r-project.org
> >> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >>
> >
> >


From kyleb at metrumrg.com  Wed Nov 27 21:22:26 2013
From: kyleb at metrumrg.com (Kyle Baron)
Date: Wed, 27 Nov 2013 15:22:26 -0500
Subject: [R-SIG-Mac] Problems with dyn.unload of shared object from Fortran
 code and command line R
Message-ID: <CAJ2Cw8T_WXEMR-2YNCJyDjN2XDjjj7V0oFEs=xyNBKjP1q=FFA@mail.gmail.com>

Hi -

I am developing an R package (OSX 10.8.5, R version 3.0.2) with both C
and fortran code  and noticed strange behavior when trying to unload
the
shared-object after dyn.load (part of devtools development workflow).
When I try to dyn.unload,  the R prompt appears again, but I can't run
any more commands and I find the R process is taking 100% cpu (per
htop).

I get the problem behavior when using command line R (but not R.app or
Rstudio) and can't recreate it on Ubuntu.  Also, this only seems to
happen with fortran code, not C code (a simple C example compiles,
loads and unloads fine).

So my package seems to work fine, but I get into trouble with
dyn.unload in the development cycle when fortran code is in the mix.
Wondering why this is happening and how I can setup commandline R on
OSX to handle this dyn.unload more gracefully (as R.app does).

An example and R info below.

Thank you in advance,
Kyle

Kyle Baron
Metrum Research Group
www.metrumrg.com



I was able to recreate the issue using this toy fortran code:

C     *****************************************
C     http://users.stat.umn.edu/~geyer/rc/bar.f
      subroutine bar(n, x)

      integer n
      double precision x(n)
      integer i

      do 100 i = 1, n
          x(i) = x(i) ** 2
  100 continue

      end
C     end bar.f
C     ******************************************


bash$ R CMD SHLIB bar.f
llvm-gcc-4.2 -arch x86_64 -std=gnu99 -dynamiclib
-Wl,-headerpad_max_install_names -undefined dynamic_lookup
-single_module -multiply_defined suppress -L/usr/local/lib
-L/usr/local/lib -o bar.so bar.o
-L/usr/local/lib/gcc/i686-apple-darwin8/4.2.3/x86_64
-L/usr/local/lib/x86_64 -L/usr/local/lib/gcc/i686-apple-darwin8/4.2.3
-lgfortran -F/Library/Frameworks/R.framework/.. -framework R
-Wl,-framework -Wl,CoreFoundation

R:
> dyn.load("bar.so")
> is.loaded("bar")
[1] TRUE
> dyn.unload("bar.so")
> is.loaded("bar") ## FALSE if R.app, Rstudio, can't run the command if commandline R on OSX and must restart R


> sessionInfo()
R version 3.0.2 (2013-09-25)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     grDevices utils     datasets  graphics  methods   base


From jfox at mcmaster.ca  Thu Nov 28 01:46:34 2013
From: jfox at mcmaster.ca (John Fox)
Date: Wed, 27 Nov 2013 19:46:34 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
Message-ID: <000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>

Hi Rob,

I had some time today and so I started to implement this solution in the
Rcmdr. I first tested whether setting

  system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")

fixes the problem; I verified via 

  system("defaults read org.R-project.R NSAppSleepDisabled")

that the key was in fact set properly. 

I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
periodically. Whatever is going on is probably more complicated than
power-saving.

Best,
 John

> -----Original Message-----
> From: Robert J Goedman [mailto:goedman at icloud.com]
> Sent: Sunday, November 24, 2013 11:50 AM
> To: John Fox
> Cc: r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> Mavericks
> 
> Hi John,
> 
> If it's not too much work, I would implement it in Rcmdr because I
> don't know if there are other consequences of App Nap, so until the
> dust settles using the defaults system might be ok.
> 
> Regards,
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> 
> On Nov 24, 2013, at 8:30 AM, John Fox <jfox at mcmaster.ca> wrote:
> 
> > Hi Rob,
> >
> > You've just answered my next question! I was holding off to give you
> a
> > chance to address the issue directly in R.app.
> >
> > Is there any reason for me, at least for the time-being, not to do
> this from
> > the Rcmdr via system()? I just tried, and that seems to work. If
> necessary,
> > I could check for the existence and (if it exists) the current state
> of this
> > key, and restore that when the Commander() exits. Of course, if you
> plan to
> > address the issue directly soon, it doesn't make sense for me to do
> so.
> >
> > Thanks again for your help.
> >
> > John
> >
> >> -----Original Message-----
> >> From: Robert J Goedman [mailto:goedman at icloud.com]
> >> Sent: Sunday, November 24, 2013 10:32 AM
> >> To: John Fox
> >> Cc: r-sig-mac at r-project.org
> >> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> >> Mavericks
> >>
> >> Hi John,
> >>
> >> If you want to play around with NSAppSleepDisabled yourself, you
> can,
> >> in a Terminal:
> >>
> >> defaults write org.R-project.R NSAppSleepDisabled -bool yes
> >>
> >> to check the setting:
> >>
> >> defaults read org.R-project.R NSAppSleepDisabled
> >>
> >> or to re-enable AppNap:
> >>
> >> defaults write org.R-project.R NSAppSleepDisabled -bool no
> >>
> >> or just delete the key:
> >>
> >> defaults delete org.R-project.R NSAppSleepDisabled
> >>
> >> Regards,
> >> Rob J. Goedman
> >> goedman at icloud.com
> >>
> >>
> >>
> >>
> >> On Nov 23, 2013, at 10:31 PM, Robert J Goedman <goedman at icloud.com>
> >> wrote:
> >>
> >>
> >> 	Hi John,
> >>
> >> 	I'm just starting, but it look likes 'defaults write ...' can be
> >> used to manage the setting. Not elegant, but maybe temporarily ok
> for
> >> tcltk users.
> >>
> >> 	Someone from TexShop (Richard Koch) reported that if R.app is
> >> compiled against the 10.9 APIs, the 'Prevent App Nap' check box will
> >> not appear. The ultimate solution is for R.app to know when App Nap
> >> should not kick in, there is a new API for that.
> >>
> >> 	So, some more homework...
> >>
> >> 	Regards,
> >> 	Rob J. Goedman
> >> 	goedman at icloud.com
> >>
> >>
> >>
> >>
> >> 	On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca> wrote:
> >>
> >>
> >>
> >> 		Hi Rob,
> >>
> >> 		Thanks for the explanation -- that makes sense of the
> > current
> >> behaviour. I think that you know that I'm not very knowledgeable
> about
> >> OS X. A couple of follow-up questions:
> >>
> >> 		If you make this change to R.app, will the default be to
> >> disable App Nap or just to provide the check box?
> >>
> >> 		If App Nap isn't disable by R.app by default, would it be
> >> possible to disable it under program control, e.g., when the Rcmdr
> >> package is loaded?
> >>
> >> 		Best,
> >> 		John
> >>
> >> 		On Sat, 23 Nov 2013 18:59:12 -0800
> >> 		Robert J Goedman <goedman at icloud.com> wrote:
> >>
> >>
> >> 			Hi John,
> >>
> >> 			Looking at Activity Monitor on my system, R will
> > always
> >> take up say 2.5% CPU time while R.app will almost go away if it is
> not
> >> active. This might be because in a terminal the process might not be
> >> treated as a pure application but maybe more as a traditional Unix
> >> process. But that's just a guess from my side.
> >>
> >> 			What surprised me a bit is that we couldn't switch
> > off
> >> App Nap, as is possible with several other apps (go to the Info
> panel
> >> of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox).
> >> R.app did not show that box, probably a consequence of an older
> >> build/project creation?
> >>
> >> 			Anyway, on my system I added that property in the
> >> info.plist and disabled the App Nap behavior. It seems to be working
> >> fine now. I'll do some more testing to see if I can get the check
> box
> >> on the Info screen show up and check with Simon if it's ok to commit
> >> the change. Of course, in that case R.app will also always consume
> 2.5%
> >> CPU. Under the energy tab of the Activity Monitor you can see which
> >> apps allow App Nap.
> >>
> >> 			Rob J. Goedman
> >> 			goedman at icloud.com
> >>
> >>
> >>
> >>
> >> 			On Nov 23, 2013, at 5:43 AM, John Fox
> > <jfox at mcmaster.ca>
> >> wrote:
> >>
> >>
> >>
> >> 				Dear Rob et al.,
> >>
> >> 				I'm glad that there's progress in
> > understanding
> >> the source of the problem, but I wonder why the problem doesn't
> >> manifest itself -- at least in my experience -- when R runs in a
> >> terminal window.
> >>
> >> 				Best,
> >> 				John
> >>
> >> 				On Fri, 22 Nov 2013 14:42:00 -0800
> >> 				Robert J Goedman <goedman at icloud.com> wrote:
> >>
> >>
> >> 					Thansk Peter,
> >>
> >> 					Now I can reproduce it!
> >>
> >> 					Rob J. Goedman
> >> 					goedman at icloud.com
> >>
> >>
> >>
> >>
> >> 					On Nov 22, 2013, at 1:00 PM, peter
> > dalgaard
> >> <pdalgd at gmail.com> wrote:
> >>
> >>
> >>
> >>
> >> 						On 22 Nov 2013, at 16:42 ,
> > Robert J
> >> Goedman <goedman at icloud.com> wrote:
> >>
> >>
> >>
> >> 							Not sure how long it
> > takes to see
> >> the lagging (a few minutes someone reported), but I've not been able
> to
> >> reproduce this problem.
> >>
> >>
> >>
> >> 						For me, library(tcltk);
> > demo(tkfaq),
> >> click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom
> of
> >> the file, Fn-Up to the top, etc. Less than two iteration for me
> before
> >> the effect kicks in.
> >>
> >>
> >>
> >>
> >> 							Which makes me
> > wonder if anyone
> >> has seen this behavior after rebuilding R.app on Mavericks (from the
> >> R.app sources).
> >>
> >> 							Regards,
> >> 							Rob J. Goedman
> >> 							goedman at icloud.com
> >>
> >>
> >> 							On Nov 22, 2013, at
> > 7:29 AM, Simon
> >> Urbanek <simon.urbanek at r-project.org> wrote:
> >>
> >>
> >>
> >> 								On Nov 20,
> > 2013, at 11:41 AM,
> >> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >>
> >>
> >>
> >> 									I
> > upgraded to XQuartz
> >> 2.7.5, but it still lags.
> >>
> >>
> >>
> >>
> >> 								Please read
> > Peter's response
> >> - it has nothing to do with XQuartz versions
> >>
> >>
> >>
> >>
> >> 							[[alternative HTML
> > version
> >> deleted]]
> >>
> >>
> >> 	_______________________________________________
> >> 							R-SIG-Mac mailing
> > list
> >>
> > R-SIG-Mac at r-project.org
> >>
> >> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >>
> >>
> >> 						--
> >> 						Peter Dalgaard, Professor,
> >> 						Center for Statistics,
> > Copenhagen
> >> Business School
> >> 						Solbjerg Plads 3, 2000
> > Frederiksberg,
> >> Denmark
> >> 						Phone: (+45)38153501
> >> 						Email: pd.mes at cbs.dk  Priv:
> >> PDalgd at gmail.com
> >>
> >>
> >>
> >>
> >> 					[[alternative HTML version deleted]]
> >>
> >>
> >> 	_______________________________________________
> >> 					R-SIG-Mac mailing list
> >> 					R-SIG-Mac at r-project.org
> >>
> > https://stat.ethz.ch/mailman/listinfo/r-sig-
> >> mac
> >>
> >>
> >>
> >>
> >> 	_______________________________________________
> >> 	R-SIG-Mac mailing list
> >> 	R-SIG-Mac at r-project.org
> >> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >>
> >
> >


From pdalgd at gmail.com  Thu Nov 28 12:00:31 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 28 Nov 2013 12:00:31 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
Message-ID: <74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>


On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:

> Hi Rob,
> 
> I had some time today and so I started to implement this solution in the
> Rcmdr. I first tested whether setting
> 
>  system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")
> 
> fixes the problem; I verified via 
> 
>  system("defaults read org.R-project.R NSAppSleepDisabled")
> 
> that the key was in fact set properly. 
> 
> I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
> periodically. Whatever is going on is probably more complicated than
> power-saving.
> 

Hmm. The tkfaq issue seems to have gone away for me. You did remember to restart R.app after setting the key?

-pd

> Best,
> John
> 
>> -----Original Message-----
>> From: Robert J Goedman [mailto:goedman at icloud.com]
>> Sent: Sunday, November 24, 2013 11:50 AM
>> To: John Fox
>> Cc: r-sig-mac at r-project.org
>> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
>> Mavericks
>> 
>> Hi John,
>> 
>> If it's not too much work, I would implement it in Rcmdr because I
>> don't know if there are other consequences of App Nap, so until the
>> dust settles using the defaults system might be ok.
>> 
>> Regards,
>> Rob J. Goedman
>> goedman at icloud.com
>> 
>> 
>> 
>> 
>> On Nov 24, 2013, at 8:30 AM, John Fox <jfox at mcmaster.ca> wrote:
>> 
>>> Hi Rob,
>>> 
>>> You've just answered my next question! I was holding off to give you
>> a
>>> chance to address the issue directly in R.app.
>>> 
>>> Is there any reason for me, at least for the time-being, not to do
>> this from
>>> the Rcmdr via system()? I just tried, and that seems to work. If
>> necessary,
>>> I could check for the existence and (if it exists) the current state
>> of this
>>> key, and restore that when the Commander() exits. Of course, if you
>> plan to
>>> address the issue directly soon, it doesn't make sense for me to do
>> so.
>>> 
>>> Thanks again for your help.
>>> 
>>> John
>>> 
>>>> -----Original Message-----
>>>> From: Robert J Goedman [mailto:goedman at icloud.com]
>>>> Sent: Sunday, November 24, 2013 10:32 AM
>>>> To: John Fox
>>>> Cc: r-sig-mac at r-project.org
>>>> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
>>>> Mavericks
>>>> 
>>>> Hi John,
>>>> 
>>>> If you want to play around with NSAppSleepDisabled yourself, you
>> can,
>>>> in a Terminal:
>>>> 
>>>> defaults write org.R-project.R NSAppSleepDisabled -bool yes
>>>> 
>>>> to check the setting:
>>>> 
>>>> defaults read org.R-project.R NSAppSleepDisabled
>>>> 
>>>> or to re-enable AppNap:
>>>> 
>>>> defaults write org.R-project.R NSAppSleepDisabled -bool no
>>>> 
>>>> or just delete the key:
>>>> 
>>>> defaults delete org.R-project.R NSAppSleepDisabled
>>>> 
>>>> Regards,
>>>> Rob J. Goedman
>>>> goedman at icloud.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> On Nov 23, 2013, at 10:31 PM, Robert J Goedman <goedman at icloud.com>
>>>> wrote:
>>>> 
>>>> 
>>>> 	Hi John,
>>>> 
>>>> 	I'm just starting, but it look likes 'defaults write ...' can be
>>>> used to manage the setting. Not elegant, but maybe temporarily ok
>> for
>>>> tcltk users.
>>>> 
>>>> 	Someone from TexShop (Richard Koch) reported that if R.app is
>>>> compiled against the 10.9 APIs, the 'Prevent App Nap' check box will
>>>> not appear. The ultimate solution is for R.app to know when App Nap
>>>> should not kick in, there is a new API for that.
>>>> 
>>>> 	So, some more homework...
>>>> 
>>>> 	Regards,
>>>> 	Rob J. Goedman
>>>> 	goedman at icloud.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 	On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca> wrote:
>>>> 
>>>> 
>>>> 
>>>> 		Hi Rob,
>>>> 
>>>> 		Thanks for the explanation -- that makes sense of the
>>> current
>>>> behaviour. I think that you know that I'm not very knowledgeable
>> about
>>>> OS X. A couple of follow-up questions:
>>>> 
>>>> 		If you make this change to R.app, will the default be to
>>>> disable App Nap or just to provide the check box?
>>>> 
>>>> 		If App Nap isn't disable by R.app by default, would it be
>>>> possible to disable it under program control, e.g., when the Rcmdr
>>>> package is loaded?
>>>> 
>>>> 		Best,
>>>> 		John
>>>> 
>>>> 		On Sat, 23 Nov 2013 18:59:12 -0800
>>>> 		Robert J Goedman <goedman at icloud.com> wrote:
>>>> 
>>>> 
>>>> 			Hi John,
>>>> 
>>>> 			Looking at Activity Monitor on my system, R will
>>> always
>>>> take up say 2.5% CPU time while R.app will almost go away if it is
>> not
>>>> active. This might be because in a terminal the process might not be
>>>> treated as a pure application but maybe more as a traditional Unix
>>>> process. But that's just a guess from my side.
>>>> 
>>>> 			What surprised me a bit is that we couldn't switch
>>> off
>>>> App Nap, as is possible with several other apps (go to the Info
>> panel
>>>> of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox).
>>>> R.app did not show that box, probably a consequence of an older
>>>> build/project creation?
>>>> 
>>>> 			Anyway, on my system I added that property in the
>>>> info.plist and disabled the App Nap behavior. It seems to be working
>>>> fine now. I'll do some more testing to see if I can get the check
>> box
>>>> on the Info screen show up and check with Simon if it's ok to commit
>>>> the change. Of course, in that case R.app will also always consume
>> 2.5%
>>>> CPU. Under the energy tab of the Activity Monitor you can see which
>>>> apps allow App Nap.
>>>> 
>>>> 			Rob J. Goedman
>>>> 			goedman at icloud.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 			On Nov 23, 2013, at 5:43 AM, John Fox
>>> <jfox at mcmaster.ca>
>>>> wrote:
>>>> 
>>>> 
>>>> 
>>>> 				Dear Rob et al.,
>>>> 
>>>> 				I'm glad that there's progress in
>>> understanding
>>>> the source of the problem, but I wonder why the problem doesn't
>>>> manifest itself -- at least in my experience -- when R runs in a
>>>> terminal window.
>>>> 
>>>> 				Best,
>>>> 				John
>>>> 
>>>> 				On Fri, 22 Nov 2013 14:42:00 -0800
>>>> 				Robert J Goedman <goedman at icloud.com> wrote:
>>>> 
>>>> 
>>>> 					Thansk Peter,
>>>> 
>>>> 					Now I can reproduce it!
>>>> 
>>>> 					Rob J. Goedman
>>>> 					goedman at icloud.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 					On Nov 22, 2013, at 1:00 PM, peter
>>> dalgaard
>>>> <pdalgd at gmail.com> wrote:
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 						On 22 Nov 2013, at 16:42 ,
>>> Robert J
>>>> Goedman <goedman at icloud.com> wrote:
>>>> 
>>>> 
>>>> 
>>>> 							Not sure how long it
>>> takes to see
>>>> the lagging (a few minutes someone reported), but I've not been able
>> to
>>>> reproduce this problem.
>>>> 
>>>> 
>>>> 
>>>> 						For me, library(tcltk);
>>> demo(tkfaq),
>>>> click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom
>> of
>>>> the file, Fn-Up to the top, etc. Less than two iteration for me
>> before
>>>> the effect kicks in.
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 							Which makes me
>>> wonder if anyone
>>>> has seen this behavior after rebuilding R.app on Mavericks (from the
>>>> R.app sources).
>>>> 
>>>> 							Regards,
>>>> 							Rob J. Goedman
>>>> 							goedman at icloud.com
>>>> 
>>>> 
>>>> 							On Nov 22, 2013, at
>>> 7:29 AM, Simon
>>>> Urbanek <simon.urbanek at r-project.org> wrote:
>>>> 
>>>> 
>>>> 
>>>> 								On Nov 20,
>>> 2013, at 11:41 AM,
>>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
>>>> 
>>>> 
>>>> 
>>>> 									I
>>> upgraded to XQuartz
>>>> 2.7.5, but it still lags.
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 								Please read
>>> Peter's response
>>>> - it has nothing to do with XQuartz versions
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 							[[alternative HTML
>>> version
>>>> deleted]]
>>>> 
>>>> 
>>>> 	_______________________________________________
>>>> 							R-SIG-Mac mailing
>>> list
>>>> 
>>> R-SIG-Mac at r-project.org
>>>> 
>>>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>>> 
>>>> 						--
>>>> 						Peter Dalgaard, Professor,
>>>> 						Center for Statistics,
>>> Copenhagen
>>>> Business School
>>>> 						Solbjerg Plads 3, 2000
>>> Frederiksberg,
>>>> Denmark
>>>> 						Phone: (+45)38153501
>>>> 						Email: pd.mes at cbs.dk  Priv:
>>>> PDalgd at gmail.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 					[[alternative HTML version deleted]]
>>>> 
>>>> 
>>>> 	_______________________________________________
>>>> 					R-SIG-Mac mailing list
>>>> 					R-SIG-Mac at r-project.org
>>>> 
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-
>>>> mac
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 	_______________________________________________
>>>> 	R-SIG-Mac mailing list
>>>> 	R-SIG-Mac at r-project.org
>>>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>> 
>>>> 
>>> 
>>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jfox at mcmaster.ca  Thu Nov 28 14:38:55 2013
From: jfox at mcmaster.ca (John Fox)
Date: Thu, 28 Nov 2013 08:38:55 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
Message-ID: <web-485381672@cgpsrv2.cis.mcmaster.ca>

Dear Peter,

On Thu, 28 Nov 2013 12:00:31 +0100
 peter dalgaard <pdalgd at gmail.com> wrote:
> 
> On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:
> 
> > Hi Rob,
> > 
> > I had some time today and so I started to implement this solution in the
> > Rcmdr. I first tested whether setting
> > 
> >  system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")
> > 
> > fixes the problem; I verified via 
> > 
> >  system("defaults read org.R-project.R NSAppSleepDisabled")
> > 
> > that the key was in fact set properly. 
> > 
> > I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
> > periodically. Whatever is going on is probably more complicated than
> > power-saving.
> > 
> 
> Hmm. The tkfaq issue seems to have gone away for me. You did remember to restart R.app after setting the key?
> 

I didn't "remember" to restart R.app because I didn't know that it was necessary to do so. In fact, the code that I wrote, but didn't commit, for the Rcmdr carefully resets the key to its previous state or deletes it if it didn't previously exist when the Commander is closed.

I think that you've almost surely identified my problem, but the solution also raises a question about what to do. I'm reluctant to have the Rcmdr make a permanent change to users' OS settings. I guess that I could detect whether the NSAppSleepDisabled key is set and pop up a dialog box if it isn't, offering to make the change, and suggesting that the user restart R.app. (BTW, is there an easy way to check whether R is running in R.app or a terminal?) Wouldn't it be better to handle this issue in R.app or even in tcltk, however?

If restarting R.app after setting the NSAppSleepDisabled key doesn't work for me, I'll then pursue Rob's suggestions.

Thanks for this,
 John

> -pd
> 
> > Best,
> > John
> > 
> >> -----Original Message-----
> >> From: Robert J Goedman [mailto:goedman at icloud.com]
> >> Sent: Sunday, November 24, 2013 11:50 AM
> >> To: John Fox
> >> Cc: r-sig-mac at r-project.org
> >> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> >> Mavericks
> >> 
> >> Hi John,
> >> 
> >> If it's not too much work, I would implement it in Rcmdr because I
> >> don't know if there are other consequences of App Nap, so until the
> >> dust settles using the defaults system might be ok.
> >> 
> >> Regards,
> >> Rob J. Goedman
> >> goedman at icloud.com
> >> 
> >> 
> >> 
> >> 
> >> On Nov 24, 2013, at 8:30 AM, John Fox <jfox at mcmaster.ca> wrote:
> >> 
> >>> Hi Rob,
> >>> 
> >>> You've just answered my next question! I was holding off to give you
> >> a
> >>> chance to address the issue directly in R.app.
> >>> 
> >>> Is there any reason for me, at least for the time-being, not to do
> >> this from
> >>> the Rcmdr via system()? I just tried, and that seems to work. If
> >> necessary,
> >>> I could check for the existence and (if it exists) the current state
> >> of this
> >>> key, and restore that when the Commander() exits. Of course, if you
> >> plan to
> >>> address the issue directly soon, it doesn't make sense for me to do
> >> so.
> >>> 
> >>> Thanks again for your help.
> >>> 
> >>> John
> >>> 
> >>>> -----Original Message-----
> >>>> From: Robert J Goedman [mailto:goedman at icloud.com]
> >>>> Sent: Sunday, November 24, 2013 10:32 AM
> >>>> To: John Fox
> >>>> Cc: r-sig-mac at r-project.org
> >>>> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> >>>> Mavericks
> >>>> 
> >>>> Hi John,
> >>>> 
> >>>> If you want to play around with NSAppSleepDisabled yourself, you
> >> can,
> >>>> in a Terminal:
> >>>> 
> >>>> defaults write org.R-project.R NSAppSleepDisabled -bool yes
> >>>> 
> >>>> to check the setting:
> >>>> 
> >>>> defaults read org.R-project.R NSAppSleepDisabled
> >>>> 
> >>>> or to re-enable AppNap:
> >>>> 
> >>>> defaults write org.R-project.R NSAppSleepDisabled -bool no
> >>>> 
> >>>> or just delete the key:
> >>>> 
> >>>> defaults delete org.R-project.R NSAppSleepDisabled
> >>>> 
> >>>> Regards,
> >>>> Rob J. Goedman
> >>>> goedman at icloud.com
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> On Nov 23, 2013, at 10:31 PM, Robert J Goedman <goedman at icloud.com>
> >>>> wrote:
> >>>> 
> >>>> 
> >>>> 	Hi John,
> >>>> 
> >>>> 	I'm just starting, but it look likes 'defaults write ...' can be
> >>>> used to manage the setting. Not elegant, but maybe temporarily ok
> >> for
> >>>> tcltk users.
> >>>> 
> >>>> 	Someone from TexShop (Richard Koch) reported that if R.app is
> >>>> compiled against the 10.9 APIs, the 'Prevent App Nap' check box will
> >>>> not appear. The ultimate solution is for R.app to know when App Nap
> >>>> should not kick in, there is a new API for that.
> >>>> 
> >>>> 	So, some more homework...
> >>>> 
> >>>> 	Regards,
> >>>> 	Rob J. Goedman
> >>>> 	goedman at icloud.com
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 	On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca> wrote:
> >>>> 
> >>>> 
> >>>> 
> >>>> 		Hi Rob,
> >>>> 
> >>>> 		Thanks for the explanation -- that makes sense of the
> >>> current
> >>>> behaviour. I think that you know that I'm not very knowledgeable
> >> about
> >>>> OS X. A couple of follow-up questions:
> >>>> 
> >>>> 		If you make this change to R.app, will the default be to
> >>>> disable App Nap or just to provide the check box?
> >>>> 
> >>>> 		If App Nap isn't disable by R.app by default, would it be
> >>>> possible to disable it under program control, e.g., when the Rcmdr
> >>>> package is loaded?
> >>>> 
> >>>> 		Best,
> >>>> 		John
> >>>> 
> >>>> 		On Sat, 23 Nov 2013 18:59:12 -0800
> >>>> 		Robert J Goedman <goedman at icloud.com> wrote:
> >>>> 
> >>>> 
> >>>> 			Hi John,
> >>>> 
> >>>> 			Looking at Activity Monitor on my system, R will
> >>> always
> >>>> take up say 2.5% CPU time while R.app will almost go away if it is
> >> not
> >>>> active. This might be because in a terminal the process might not be
> >>>> treated as a pure application but maybe more as a traditional Unix
> >>>> process. But that's just a guess from my side.
> >>>> 
> >>>> 			What surprised me a bit is that we couldn't switch
> >>> off
> >>>> App Nap, as is possible with several other apps (go to the Info
> >> panel
> >>>> of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox).
> >>>> R.app did not show that box, probably a consequence of an older
> >>>> build/project creation?
> >>>> 
> >>>> 			Anyway, on my system I added that property in the
> >>>> info.plist and disabled the App Nap behavior. It seems to be working
> >>>> fine now. I'll do some more testing to see if I can get the check
> >> box
> >>>> on the Info screen show up and check with Simon if it's ok to commit
> >>>> the change. Of course, in that case R.app will also always consume
> >> 2.5%
> >>>> CPU. Under the energy tab of the Activity Monitor you can see which
> >>>> apps allow App Nap.
> >>>> 
> >>>> 			Rob J. Goedman
> >>>> 			goedman at icloud.com
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 			On Nov 23, 2013, at 5:43 AM, John Fox
> >>> <jfox at mcmaster.ca>
> >>>> wrote:
> >>>> 
> >>>> 
> >>>> 
> >>>> 				Dear Rob et al.,
> >>>> 
> >>>> 				I'm glad that there's progress in
> >>> understanding
> >>>> the source of the problem, but I wonder why the problem doesn't
> >>>> manifest itself -- at least in my experience -- when R runs in a
> >>>> terminal window.
> >>>> 
> >>>> 				Best,
> >>>> 				John
> >>>> 
> >>>> 				On Fri, 22 Nov 2013 14:42:00 -0800
> >>>> 				Robert J Goedman <goedman at icloud.com> wrote:
> >>>> 
> >>>> 
> >>>> 					Thansk Peter,
> >>>> 
> >>>> 					Now I can reproduce it!
> >>>> 
> >>>> 					Rob J. Goedman
> >>>> 					goedman at icloud.com
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 					On Nov 22, 2013, at 1:00 PM, peter
> >>> dalgaard
> >>>> <pdalgd at gmail.com> wrote:
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 						On 22 Nov 2013, at 16:42 ,
> >>> Robert J
> >>>> Goedman <goedman at icloud.com> wrote:
> >>>> 
> >>>> 
> >>>> 
> >>>> 							Not sure how long it
> >>> takes to see
> >>>> the lagging (a few minutes someone reported), but I've not been able
> >> to
> >>>> reproduce this problem.
> >>>> 
> >>>> 
> >>>> 
> >>>> 						For me, library(tcltk);
> >>> demo(tkfaq),
> >>>> click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom
> >> of
> >>>> the file, Fn-Up to the top, etc. Less than two iteration for me
> >> before
> >>>> the effect kicks in.
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 							Which makes me
> >>> wonder if anyone
> >>>> has seen this behavior after rebuilding R.app on Mavericks (from the
> >>>> R.app sources).
> >>>> 
> >>>> 							Regards,
> >>>> 							Rob J. Goedman
> >>>> 							goedman at icloud.com
> >>>> 
> >>>> 
> >>>> 							On Nov 22, 2013, at
> >>> 7:29 AM, Simon
> >>>> Urbanek <simon.urbanek at r-project.org> wrote:
> >>>> 
> >>>> 
> >>>> 
> >>>> 								On Nov 20,
> >>> 2013, at 11:41 AM,
> >>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >>>> 
> >>>> 
> >>>> 
> >>>> 									I
> >>> upgraded to XQuartz
> >>>> 2.7.5, but it still lags.
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 								Please read
> >>> Peter's response
> >>>> - it has nothing to do with XQuartz versions
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 							[[alternative HTML
> >>> version
> >>>> deleted]]
> >>>> 
> >>>> 
> >>>> 	_______________________________________________
> >>>> 							R-SIG-Mac mailing
> >>> list
> >>>> 
> >>> R-SIG-Mac at r-project.org
> >>>> 
> >>>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>> 
> >>>> 
> >>>> 
> >>>> 						--
> >>>> 						Peter Dalgaard, Professor,
> >>>> 						Center for Statistics,
> >>> Copenhagen
> >>>> Business School
> >>>> 						Solbjerg Plads 3, 2000
> >>> Frederiksberg,
> >>>> Denmark
> >>>> 						Phone: (+45)38153501
> >>>> 						Email: pd.mes at cbs.dk  Priv:
> >>>> PDalgd at gmail.com
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 					[[alternative HTML version deleted]]
> >>>> 
> >>>> 
> >>>> 	_______________________________________________
> >>>> 					R-SIG-Mac mailing list
> >>>> 					R-SIG-Mac at r-project.org
> >>>> 
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-
> >>>> mac
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 	_______________________________________________
> >>>> 	R-SIG-Mac mailing list
> >>>> 	R-SIG-Mac at r-project.org
> >>>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>> 
> >>>> 
> >>> 
> >>> 
> > 
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>


From phgrosjean at sciviews.org  Thu Nov 28 14:54:52 2013
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Thu, 28 Nov 2013 14:54:52 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-485381672@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
Message-ID: <26F600A1-8EC0-4632-8556-EF0815A69F7D@sciviews.org>


On 28 Nov 2013, at 14:38, John Fox <jfox at mcmaster.ca> wrote:

> Dear Peter,
> 
> On Thu, 28 Nov 2013 12:00:31 +0100
> peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:
>> 
>>> Hi Rob,
>>> 
>>> I had some time today and so I started to implement this solution in the
>>> Rcmdr. I first tested whether setting
>>> 
>>> system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")
>>> 
>>> fixes the problem; I verified via 
>>> 
>>> system("defaults read org.R-project.R NSAppSleepDisabled")
>>> 
>>> that the key was in fact set properly. 
>>> 
>>> I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
>>> periodically. Whatever is going on is probably more complicated than
>>> power-saving.
>>> 
>> 
>> Hmm. The tkfaq issue seems to have gone away for me. You did remember to restart R.app after setting the key?
>> 
> 
> I didn't "remember" to restart R.app because I didn't know that it was necessary to do so. In fact, the code that I wrote, but didn't commit, for the Rcmdr carefully resets the key to its previous state or deletes it if it didn't previously exist when the Commander is closed.
> 
> I think that you've almost surely identified my problem, but the solution also raises a question about what to do. I'm reluctant to have the Rcmdr make a permanent change to users' OS settings. I guess that I could detect whether the NSAppSleepDisabled key is set and pop up a dialog box if it isn't, offering to make the change, and suggesting that the user restart R.app. (BTW, is there an easy way to check whether R is running in R.app or a terminal?)

Look at svMisc::isAqua(), which uses indeed .Platform$GUI returning "Aqua" on R.app or "X11" on R under a terminal. I am not sure, however, that R on a terminal returns *always* "X11".
Best,

Philippe

> Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
> 
> If restarting R.app after setting the NSAppSleepDisabled key doesn't work for me, I'll then pursue Rob's suggestions.
> 
> Thanks for this,
> John




[?]

From jfox at mcmaster.ca  Thu Nov 28 15:04:24 2013
From: jfox at mcmaster.ca (John Fox)
Date: Thu, 28 Nov 2013 09:04:24 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <26F600A1-8EC0-4632-8556-EF0815A69F7D@sciviews.org>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
	<26F600A1-8EC0-4632-8556-EF0815A69F7D@sciviews.org>
Message-ID: <web-485386775@cgpsrv2.cis.mcmaster.ca>

Dear Philippe,

Thanks for this. Since I can already tell when R is running under Mac OS X, that should solve the problem of differentiating R.app and R running in a terminal.

Best,
 John

On Thu, 28 Nov 2013 14:54:52 +0100
 Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> 
> On 28 Nov 2013, at 14:38, John Fox <jfox at mcmaster.ca> wrote:
> 
> > Dear Peter,
> > 
> > On Thu, 28 Nov 2013 12:00:31 +0100
> > peter dalgaard <pdalgd at gmail.com> wrote:
> >> 
> >> On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:
> >> 
> >>> Hi Rob,
> >>> 
> >>> I had some time today and so I started to implement this solution in the
> >>> Rcmdr. I first tested whether setting
> >>> 
> >>> system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")
> >>> 
> >>> fixes the problem; I verified via 
> >>> 
> >>> system("defaults read org.R-project.R NSAppSleepDisabled")
> >>> 
> >>> that the key was in fact set properly. 
> >>> 
> >>> I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
> >>> periodically. Whatever is going on is probably more complicated than
> >>> power-saving.
> >>> 
> >> 
> >> Hmm. The tkfaq issue seems to have gone away for me. You did remember to restart R.app after setting the key?
> >> 
> > 
> > I didn't "remember" to restart R.app because I didn't know that it was necessary to do so. In fact, the code that I wrote, but didn't commit, for the Rcmdr carefully resets the key to its previous state or deletes it if it didn't previously exist when the Commander is closed.
> > 
> > I think that you've almost surely identified my problem, but the solution also raises a question about what to do. I'm reluctant to have the Rcmdr make a permanent change to users' OS settings. I guess that I could detect whether the NSAppSleepDisabled key is set and pop up a dialog box if it isn't, offering to make the change, and suggesting that the user restart R.app. (BTW, is there an easy way to check whether R is running in R.app or a terminal?)
> 
> Look at svMisc::isAqua(), which uses indeed .Platform$GUI returning "Aqua" on R.app or "X11" on R under a terminal. I am not sure, however, that R on a terminal returns *always* "X11".
> Best,
> 
> Philippe
> 
> > Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
> > 
> > If restarting R.app after setting the NSAppSleepDisabled key doesn't work for me, I'll then pursue Rob's suggestions.
> > 
> > Thanks for this,
> > John
> 
> 
> 
> 
> [
]


From pdalgd at gmail.com  Thu Nov 28 15:21:29 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 28 Nov 2013 15:21:29 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-485381672@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
Message-ID: <CEBA6486-C05C-4003-93C4-EEB92BEAB017@gmail.com>


On 28 Nov 2013, at 14:38 , John Fox <jfox at mcmaster.ca> wrote:

> Dear Peter,
> 
> On Thu, 28 Nov 2013 12:00:31 +0100
> peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:
>> 
>>> Hi Rob,
>>> 
>>> I had some time today and so I started to implement this solution in the
>>> Rcmdr. I first tested whether setting
>>> 
>>> system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")
>>> 
>>> fixes the problem; I verified via 
>>> 
>>> system("defaults read org.R-project.R NSAppSleepDisabled")
>>> 
>>> that the key was in fact set properly. 
>>> 
>>> I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
>>> periodically. Whatever is going on is probably more complicated than
>>> power-saving.
>>> 
>> 
>> Hmm. The tkfaq issue seems to have gone away for me. You did remember to restart R.app after setting the key?
>> 
> 
> I didn't "remember" to restart R.app because I didn't know that it was necessary to do so. In fact, the code that I wrote, but didn't commit, for the Rcmdr carefully resets the key to its previous state or deletes it if it didn't previously exist when the Commander is closed.
> 
> I think that you've almost surely identified my problem, but the solution also raises a question about what to do. I'm reluctant to have the Rcmdr make a permanent change to users' OS settings. I guess that I could detect whether the NSAppSleepDisabled key is set and pop up a dialog box if it isn't, offering to make the change, and suggesting that the user restart R.app. (BTW, is there an easy way to check whether R is running in R.app or a terminal?) Wouldn't it be better to handle this issue in R.app or even in tcltk, however?

I suspect that this particular option also affects people running simulations from R.app, so that the natural state really should be "disabled" and you need not have qualms about tampering with it. Presumably, we could do the disabling on install. If people have strong reasons to aggressively preserve battery power, they could just turn it back on. 

I think Rob put on his todo list to figure out whether/how you change the setting in an active process, which would open up other possibilities.

-pd 

> 
> If restarting R.app after setting the NSAppSleepDisabled key doesn't work for me, I'll then pursue Rob's suggestions.
> 
> Thanks for this,
> John
-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From goedman at icloud.com  Thu Nov 28 15:35:12 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Thu, 28 Nov 2013 06:35:12 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <CEBA6486-C05C-4003-93C4-EEB92BEAB017@gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
	<CEBA6486-C05C-4003-93C4-EEB92BEAB017@gmail.com>
Message-ID: <6FE3D91E-1E6C-4534-BE15-845F89735670@icloud.com>

Hi, and Happy Thanksgiving for those that celebrate it!

If Peter is right (and I expect he is, but will experiment a bit more if the setting can be updated while R.app is running and take effect immediately), I would suggest for now folks just use 'defaults ...' from a terminal window if they encounter these issues.

Once we understand better what might be affected by allowing the sleep mode we can possibly refine that approach.

Regards,
Rob


Sent from Rob Goedman's iPad ...


> On Nov 28, 2013, at 6:21, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> 
>> On 28 Nov 2013, at 14:38 , John Fox <jfox at mcmaster.ca> wrote:
>> 
>> Dear Peter,
>> 
>> On Thu, 28 Nov 2013 12:00:31 +0100
>> peter dalgaard <pdalgd at gmail.com> wrote:
>>> 
>>>> On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:
>>>> 
>>>> Hi Rob,
>>>> 
>>>> I had some time today and so I started to implement this solution in the
>>>> Rcmdr. I first tested whether setting
>>>> 
>>>> system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")
>>>> 
>>>> fixes the problem; I verified via 
>>>> 
>>>> system("defaults read org.R-project.R NSAppSleepDisabled")
>>>> 
>>>> that the key was in fact set properly. 
>>>> 
>>>> I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
>>>> periodically. Whatever is going on is probably more complicated than
>>>> power-saving.
>>>> 
>>> 
>>> Hmm. The tkfaq issue seems to have gone away for me. You did remember to restart R.app after setting the key?
>>> 
>> 
>> I didn't "remember" to restart R.app because I didn't know that it was necessary to do so. In fact, the code that I wrote, but didn't commit, for the Rcmdr carefully resets the key to its previous state or deletes it if it didn't previously exist when the Commander is closed.
>> 
>> I think that you've almost surely identified my problem, but the solution also raises a question about what to do. I'm reluctant to have the Rcmdr make a permanent change to users' OS settings. I guess that I could detect whether the NSAppSleepDisabled key is set and pop up a dialog box if it isn't, offering to make the change, and suggesting that the user restart R.app. (BTW, is there an easy way to check whether R is running in R.app or a terminal?) Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
> 
> I suspect that this particular option also affects people running simulations from R.app, so that the natural state really should be "disabled" and you need not have qualms about tampering with it. Presumably, we could do the disabling on install. If people have strong reasons to aggressively preserve battery power, they could just turn it back on. 
> 
> I think Rob put on his todo list to figure out whether/how you change the setting in an active process, which would open up other possibilities.
> 
> -pd 
> 
>> 
>> If restarting R.app after setting the NSAppSleepDisabled key doesn't work for me, I'll then pursue Rob's suggestions.
>> 
>> Thanks for this,
>> John
> -- 
> Peter Dalgaard, Professor
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 


From jfox at mcmaster.ca  Thu Nov 28 15:45:02 2013
From: jfox at mcmaster.ca (John Fox)
Date: Thu, 28 Nov 2013 09:45:02 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <6FE3D91E-1E6C-4534-BE15-845F89735670@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
	<CEBA6486-C05C-4003-93C4-EEB92BEAB017@gmail.com>
	<6FE3D91E-1E6C-4534-BE15-845F89735670@icloud.com>
Message-ID: <web-485398170@cgpsrv2.cis.mcmaster.ca>

Dear Rob and Peter,

Thanks for the latest clarifications.

I think that I'll modify the Rmcdr installation notes to suggest either using the Rcmdr from R in a terminal window or setting the NSAppSleepDisabled key permanently in a terminal window -- and hope that in the longer term the problem is solved generally for R.app.

Best,
 John

On Thu, 28 Nov 2013 06:35:12 -0800
 Robert J Goedman <goedman at icloud.com> wrote:
> Hi, and Happy Thanksgiving for those that celebrate it!
> 
> If Peter is right (and I expect he is, but will experiment a bit more if the setting can be updated while R.app is running and take effect immediately), I would suggest for now folks just use 'defaults ...' from a terminal window if they encounter these issues.
> 
> Once we understand better what might be affected by allowing the sleep mode we can possibly refine that approach.
> 
> Regards,
> Rob
> 
> 
> Sent from Rob Goedman's iPad ...
> 
> 
> > On Nov 28, 2013, at 6:21, peter dalgaard <pdalgd at gmail.com> wrote:
> > 
> > 
> >> On 28 Nov 2013, at 14:38 , John Fox <jfox at mcmaster.ca> wrote:
> >> 
> >> Dear Peter,
> >> 
> >> On Thu, 28 Nov 2013 12:00:31 +0100
> >> peter dalgaard <pdalgd at gmail.com> wrote:
> >>> 
> >>>> On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:
> >>>> 
> >>>> Hi Rob,
> >>>> 
> >>>> I had some time today and so I started to implement this solution in the
> >>>> Rcmdr. I first tested whether setting
> >>>> 
> >>>> system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")
> >>>> 
> >>>> fixes the problem; I verified via 
> >>>> 
> >>>> system("defaults read org.R-project.R NSAppSleepDisabled")
> >>>> 
> >>>> that the key was in fact set properly. 
> >>>> 
> >>>> I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
> >>>> periodically. Whatever is going on is probably more complicated than
> >>>> power-saving.
> >>>> 
> >>> 
> >>> Hmm. The tkfaq issue seems to have gone away for me. You did remember to restart R.app after setting the key?
> >>> 
> >> 
> >> I didn't "remember" to restart R.app because I didn't know that it was necessary to do so. In fact, the code that I wrote, but didn't commit, for the Rcmdr carefully resets the key to its previous state or deletes it if it didn't previously exist when the Commander is closed.
> >> 
> >> I think that you've almost surely identified my problem, but the solution also raises a question about what to do. I'm reluctant to have the Rcmdr make a permanent change to users' OS settings. I guess that I could detect whether the NSAppSleepDisabled key is set and pop up a dialog box if it isn't, offering to make the change, and suggesting that the user restart R.app. (BTW, is there an easy way to check whether R is running in R.app or a terminal?) Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
> > 
> > I suspect that this particular option also affects people running simulations from R.app, so that the natural state really should be "disabled" and you need not have qualms about tampering with it. Presumably, we could do the disabling on install. If people have strong reasons to aggressively preserve battery power, they could just turn it back on. 
> > 
> > I think Rob put on his todo list to figure out whether/how you change the setting in an active process, which would open up other possibilities.
> > 
> > -pd 
> > 
> >> 
> >> If restarting R.app after setting the NSAppSleepDisabled key doesn't work for me, I'll then pursue Rob's suggestions.
> >> 
> >> Thanks for this,
> >> John
> > -- 
> > Peter Dalgaard, Professor
> > Center for Statistics, Copenhagen Business School
> > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> > Phone: (+45)38153501
> > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> > 

------------------------------------------------
John Fox
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From gblanchet.list at gmail.com  Thu Nov 28 16:11:19 2013
From: gblanchet.list at gmail.com (Guillaume Blanchet)
Date: Thu, 28 Nov 2013 17:11:19 +0200
Subject: [R-SIG-Mac] Problem compiling packages
Message-ID: <2903FC61-3E56-4C39-BBEF-AD8D4DE1E221@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131128/34ce3db2/attachment.pl>

From goedman at icloud.com  Thu Nov 28 16:17:33 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Thu, 28 Nov 2013 07:17:33 -0800
Subject: [R-SIG-Mac] Problem compiling packages
In-Reply-To: <2903FC61-3E56-4C39-BBEF-AD8D4DE1E221@gmail.com>
References: <2903FC61-3E56-4C39-BBEF-AD8D4DE1E221@gmail.com>
Message-ID: <A96D2B64-A66C-435F-BD5D-A08B383AB217@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131128/65a8934d/attachment.pl>

From goedman at icloud.com  Thu Nov 28 16:32:58 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Thu, 28 Nov 2013 07:32:58 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-485398170@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
	<CEBA6486-C05C-4003-93C4-EEB92BEAB017@gmail.com>
	<6FE3D91E-1E6C-4534-BE15-845F89735670@icloud.com>
	<web-485398170@cgpsrv2.cis.mcmaster.ca>
Message-ID: <4E53CC70-0DD5-439E-9859-E01DB329E8DD@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131128/b2c27164/attachment.pl>

From pdalgd at gmail.com  Thu Nov 28 16:43:36 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 28 Nov 2013 16:43:36 +0100
Subject: [R-SIG-Mac] Problem compiling packages
In-Reply-To: <A96D2B64-A66C-435F-BD5D-A08B383AB217@icloud.com>
References: <2903FC61-3E56-4C39-BBEF-AD8D4DE1E221@gmail.com>
	<A96D2B64-A66C-435F-BD5D-A08B383AB217@icloud.com>
Message-ID: <863F47F7-DBD6-4407-974D-F21803FE6FA0@gmail.com>

Or, as I suggested a while back:

TAR=/usr/bin/tar R CMD etc.

The offender is

/Library/Frameworks/R.framework/Resources/etc/Renviron:TAR=${TAR-'/usr/bin/gnutar'}

which you could beat into submission in the obvious way, and which perhaps "we" (i.e., not me...) could fixup on Mavericks installs.

-pd 


>> Do we have any authoritative advice as to what should go into config.site? Mine seems to work unchanged, but I'm not sure I have a clue about what they are doing anymore.
> 
> I have
> 
> % cat config.site
> CC="clang -mtune=native"
> OBJC=$CC
> F77="gfortran-4.2 -arch x86_64 -mtune=native"
> FC=$F77
> CXX="clang++ -mtune=native"
> CFLAGS="-g -O2 -Wall -pedantic -Wconversion -Wno-sign-conversion"
> 
> Those are rather picky C flags, of course: intended to pick up issues with long vectors.
> 
> gcc/g++ are not the same as clang/clang++, although the only differences I have detected are what they report themselves as.  As I don't know if there are any material differences I chose to use clang explicitly. Similarly calling gfortran-4.2 explicitly to avoid any other versions (and I would even consider using /usr/local/bin/gfortran-4.2).
> 
>> -pd
>> 
>> On 30 Oct 2013, at 15:38 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>> 
>>> This is an attempt to collect together various pieces of advice.
>>> 
>>> If you update to Mavericks and want to compile packages (or run some) with the CRAN binary R, you will need to
>>> 
>>> - Update R to 3.0.2 or later if you use R.app.
>>> 
>>> - Re-install XQuartz.  The Mavericks update re-populates /usr/X11 with links which tell you to install XQuartz (even if it is currently installed).
>>> 
>>> - Re-install the Apple Java 6 runtime if you use rJava.  Try any of the rJava examples and you will be prompted for an install.
>>> 
>>> - Install Xcode 5.0.1 if you had not previously done so.
>>> 
>>> - Re-install the Xcode command-line tools.  Xcode for Mavericks has moved most things inside Xcode (specifically under /Applications/Xcode.app/Contents/Developer) and the command-line tools previously installed seemed almost to work, but not entirely.
>>> 
>>> xcode-select --install
>>> 
>>> seems to be the recommended way to do so under Mavericks.
>>> 
>>> 
>>> If you previously had them installed, the Xcode 4.6.3 compilers (such as llvm-g++-4.2) should still work.  Otherwise you could select clang as your compiler: see http://cran.r-project.org/doc/manuals/r-release/R-admin.html#OS-X-packages . There are also compilers called 'gcc' and 'g++' in Xcode 5.0.1: these are clang-based but are not quite the same as clang/clang++.  Although g++ reports
>>> 
>>> % g++ --version
>>> Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
>>> 
>>> it looks at the libcxx headers at
>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/ .  And the packages which do not compile under clang++ do not compile under g++ .
>>> 
>>> Packages using a C++ interface may need re-compiling if you use clang++ (or g++) as your C++ compiler.  The external software at http://r.research.att.com/libs/ which I know does is gdal and zeromq. It would be prudent to compile Rcpp with the same compiler as a Rcpp-using package, although not always necessary.
>>> 
>>> 
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595



On 28 Nov 2013, at 16:17 , Robert J Goedman <goedman at icloud.com> wrote:

> Guillaume,
> 
> The problem is that R can't find /usr/bin/gnutar. One way of fixing this is to install gnutar or to create a symbolic link to tar, which is available on Mavericks.
> 
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> 
> On Nov 28, 2013, at 7:11 AM, Guillaume Blanchet <gblanchet.list at gmail.com> wrote:
> 
>> Hi ! 
>> 
>> I have recently updated my OS to Maverick and from this moment, I have been unable to compile any packages (with or without C code in them). However, I can install source package on my machine without any problem. In other words, the command line 
>> 
>> R CMD INSTALL pkg
>> 
>> works perfectly fine, where as the command line 
>> 
>> R CMD INSTALL --build pkg
>> 
>> sends me the following insults after trying to compile any package (here for the package spacemakeR):
>> 
>> * installing to library ?/Library/Frameworks/R.framework/Versions/3.0/Resources/library?
>> * installing *source* package ?spacemakeR? ...
>> ** R
>> ** inst
>> ** preparing package for lazy loading
>> ** help
>> *** installing help indices
>> ** building package indices
>> ** installing vignettes
>>  ?tutorial.Rnw? using ?UTF-8? 
>> ** testing if installed package can be loaded
>> sh: /usr/bin/gnutar: No such file or directory
>> gzip: can't stat: /Users/guslevesque/Documents/Recherche/Subversion/sedar/pkg/spacemakeR_0.0-5_R_x86_64-apple-darwin10.8.0.tar (/Users/guslevesque/Documents/Recherche/Subversion/sedar/pkg/spacemakeR_0.0-5_R_x86_64-apple-darwin10.8.0.tar): No such file or directory
>> Avis dans file.rename(file.path(startdir, filename), file.path(startdir,  :
>> impossible de renommer le fichier '/Users/guslevesque/Documents/Recherche/Subversion/sedar/pkg/spacemakeR_0.0-5_R_x86_64-apple-darwin10.8.0.tar.gz' en '/Users/guslevesque/Documents/Recherche/Subversion/sedar/pkg/spacemakeR_0.0-5.tgz', ? cause de 'No such file or directory'
>> packaged installation of ?spacemakeR? as ?spacemakeR_0.0-5.tgz?
>> * DONE (spacemakeR)
>> 
>> 
>> Note that I have carefully followed advices posted on this list and I have install XQuartz, XCode 5.0.2 and XCode command line tools and made following modifications to the ~/.R/Makevars file:
>> 
>> CC=clang
>> CXX=clang++
>> CFLAGS="-mtune=native -g -O2 -Wall -pedantic -Wconversion"
>> CXXFLAGS="-mtune=native -g -O2 -Wall -pedantic -Wconversion"
>> 
>> Any ideas what is causing this problem ?
>> 
>> Thanks in advance for all the help ! 
>> 
>> Guillaume Blanchet
>> 
>> P.S.: I almost forgot, I am working with R 3.0.2
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jfox at mcmaster.ca  Thu Nov 28 17:03:56 2013
From: jfox at mcmaster.ca (John Fox)
Date: Thu, 28 Nov 2013 11:03:56 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <4E53CC70-0DD5-439E-9859-E01DB329E8DD@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca> <CEBA6486-C05C-4003-!
	93C4-EEB92BEAB017@gmail
	.com> <6FE3D91E-1E6C-4534-BE15-845F89735670@icloud.com>
	<web-485398170@cgpsrv2.cis.mcmaster.ca>
	<4E53CC70-0DD5-439E-9859-E01DB329E8DD@icloud.com>
Message-ID: <000001ceec53$71dc3260$55949720$@mcmaster.ca>

Hi Rob,

Please don't feel the need to apologize -- I greatly appreciate your help
with this problem, and all the Mac-related problems with which you've
helped.

Best,
 John

> -----Original Message-----
> From: Robert J Goedman [mailto:goedman at icloud.com]
> Sent: Thursday, November 28, 2013 10:33 AM
> To: John Fox
> Cc: peter dalgaard; r-sig-mac at r-project.org
> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> Mavericks
> 
> John,
> 
> I apologize for suggesting to you to do extra work. As I said, I'll do
> some more testing. The thing that threw me off was that this is an
> addition to an existing API (NSProcessInfo) and hence I assumed it was
> all runtime ...
> 
> Regards,
> 
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> 
> 
> On Nov 28, 2013, at 6:45 AM, John Fox <jfox at mcmaster.ca> wrote:
> 
> 
> 	Dear Rob and Peter,
> 
> 	Thanks for the latest clarifications.
> 
> 	I think that I'll modify the Rmcdr installation notes to suggest
> either using the Rcmdr from R in a terminal window or setting the
> NSAppSleepDisabled key permanently in a terminal window -- and hope
> that in the longer term the problem is solved generally for R.app.
> 
> 	Best,
> 	John
> 
> 	On Thu, 28 Nov 2013 06:35:12 -0800
> 	Robert J Goedman <goedman at icloud.com> wrote:
> 
> 
> 		Hi, and Happy Thanksgiving for those that celebrate it!
> 
> 		If Peter is right (and I expect he is, but will experiment a
> bit more if the setting can be updated while R.app is running and take
> effect immediately), I would suggest for now folks just use 'defaults
> ...' from a terminal window if they encounter these issues.
> 
> 		Once we understand better what might be affected by allowing
> the sleep mode we can possibly refine that approach.
> 
> 		Regards,
> 		Rob
> 
> 
> 		Sent from Rob Goedman's iPad ...
> 
> 
> 
> 
> 			On Nov 28, 2013, at 6:21, peter dalgaard
> <pdalgd at gmail.com> wrote:
> 
> 
> 
> 
> 				On 28 Nov 2013, at 14:38 , John Fox
> <jfox at mcmaster.ca> wrote:
> 
> 				Dear Peter,
> 
> 				On Thu, 28 Nov 2013 12:00:31 +0100
> 				peter dalgaard <pdalgd at gmail.com> wrote:
> 
> 
> 
> 						On 28 Nov 2013, at 01:46 ,
John Fox
> <jfox at mcmaster.ca> wrote:
> 
> 						Hi Rob,
> 
> 						I had some time today and so
I started
> to implement this solution in the
> 						Rcmdr. I first tested
whether setting
> 
> 						system("defaults write
org.R-project.R
> NSAppSleepDisabled -bool yes")
> 
> 						fixes the problem; I
verified via
> 
> 						system("defaults read
org.R-project.R
> NSAppSleepDisabled")
> 
> 						that the key was in fact set
properly.
> 
> 						I'm afraid that even with
> NSAppSleepDisabled set, the Rcmdr still freezes
> 						periodically. Whatever is
going on is
> probably more complicated than
> 						power-saving.
> 
> 
> 
> 
> 					Hmm. The tkfaq issue seems to have
gone away
> for me. You did remember to restart R.app after setting the key?
> 
> 
> 
> 
> 				I didn't "remember" to restart R.app because
I
> didn't know that it was necessary to do so. In fact, the code that I
> wrote, but didn't commit, for the Rcmdr carefully resets the key to its
> previous state or deletes it if it didn't previously exist when the
> Commander is closed.
> 
> 				I think that you've almost surely identified
my
> problem, but the solution also raises a question about what to do. I'm
> reluctant to have the Rcmdr make a permanent change to users' OS
> settings. I guess that I could detect whether the NSAppSleepDisabled
> key is set and pop up a dialog box if it isn't, offering to make the
> change, and suggesting that the user restart R.app. (BTW, is there an
> easy way to check whether R is running in R.app or a terminal?)
> Wouldn't it be better to handle this issue in R.app or even in tcltk,
> however?
> 
> 
> 
> 			I suspect that this particular option also affects
> people running simulations from R.app, so that the natural state really
> should be "disabled" and you need not have qualms about tampering with
> it. Presumably, we could do the disabling on install. If people have
> strong reasons to aggressively preserve battery power, they could just
> turn it back on.
> 
> 			I think Rob put on his todo list to figure out
> whether/how you change the setting in an active process, which would
> open up other possibilities.
> 
> 			-pd
> 
> 
> 
> 
> 				If restarting R.app after setting the
> NSAppSleepDisabled key doesn't work for me, I'll then pursue Rob's
> suggestions.
> 
> 				Thanks for this,
> 				John
> 
> 
> 			--
> 			Peter Dalgaard, Professor
> 			Center for Statistics, Copenhagen Business School
> 			Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> 			Phone: (+45)38153501
> 			Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 	------------------------------------------------
> 	John Fox
> 	McMaster University
> 	Hamilton, Ontario, Canada
> 	http://socserv.mcmaster.ca/jfox/
>


From gblanchet.list at gmail.com  Fri Nov 29 07:52:05 2013
From: gblanchet.list at gmail.com (Guillaume Blanchet)
Date: Fri, 29 Nov 2013 08:52:05 +0200
Subject: [R-SIG-Mac] Problem compiling packages
In-Reply-To: <863F47F7-DBD6-4407-974D-F21803FE6FA0@gmail.com>
References: <2903FC61-3E56-4C39-BBEF-AD8D4DE1E221@gmail.com>
	<A96D2B64-A66C-435F-BD5D-A08B383AB217@icloud.com>
	<863F47F7-DBD6-4407-974D-F21803FE6FA0@gmail.com>
Message-ID: <22674C6B-36F9-440B-A33F-2128C167E078@gmail.com>

Hi Peter and Robert ! 

Thank you very much for the help ! 

Problem solved !! 

Have a good day ! 

Guillaume

Le 2013-11-28 ? 17:43, peter dalgaard <pdalgd at gmail.com> a ?crit :

> Or, as I suggested a while back:
> 
> TAR=/usr/bin/tar R CMD etc.
> 
> The offender is
> 
> /Library/Frameworks/R.framework/Resources/etc/Renviron:TAR=${TAR-'/usr/bin/gnutar'}
> 
> which you could beat into submission in the obvious way, and which perhaps "we" (i.e., not me...) could fixup on Mavericks installs.
> 
> -pd 
> 
> 
>>> Do we have any authoritative advice as to what should go into config.site? Mine seems to work unchanged, but I'm not sure I have a clue about what they are doing anymore.
>> 
>> I have
>> 
>> % cat config.site
>> CC="clang -mtune=native"
>> OBJC=$CC
>> F77="gfortran-4.2 -arch x86_64 -mtune=native"
>> FC=$F77
>> CXX="clang++ -mtune=native"
>> CFLAGS="-g -O2 -Wall -pedantic -Wconversion -Wno-sign-conversion"
>> 
>> Those are rather picky C flags, of course: intended to pick up issues with long vectors.
>> 
>> gcc/g++ are not the same as clang/clang++, although the only differences I have detected are what they report themselves as.  As I don't know if there are any material differences I chose to use clang explicitly. Similarly calling gfortran-4.2 explicitly to avoid any other versions (and I would even consider using /usr/local/bin/gfortran-4.2).
>> 
>>> -pd
>>> 
>>> On 30 Oct 2013, at 15:38 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>> 
>>>> This is an attempt to collect together various pieces of advice.
>>>> 
>>>> If you update to Mavericks and want to compile packages (or run some) with the CRAN binary R, you will need to
>>>> 
>>>> - Update R to 3.0.2 or later if you use R.app.
>>>> 
>>>> - Re-install XQuartz.  The Mavericks update re-populates /usr/X11 with links which tell you to install XQuartz (even if it is currently installed).
>>>> 
>>>> - Re-install the Apple Java 6 runtime if you use rJava.  Try any of the rJava examples and you will be prompted for an install.
>>>> 
>>>> - Install Xcode 5.0.1 if you had not previously done so.
>>>> 
>>>> - Re-install the Xcode command-line tools.  Xcode for Mavericks has moved most things inside Xcode (specifically under /Applications/Xcode.app/Contents/Developer) and the command-line tools previously installed seemed almost to work, but not entirely.
>>>> 
>>>> xcode-select --install
>>>> 
>>>> seems to be the recommended way to do so under Mavericks.
>>>> 
>>>> 
>>>> If you previously had them installed, the Xcode 4.6.3 compilers (such as llvm-g++-4.2) should still work.  Otherwise you could select clang as your compiler: see http://cran.r-project.org/doc/manuals/r-release/R-admin.html#OS-X-packages . There are also compilers called 'gcc' and 'g++' in Xcode 5.0.1: these are clang-based but are not quite the same as clang/clang++.  Although g++ reports
>>>> 
>>>> % g++ --version
>>>> Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
>>>> 
>>>> it looks at the libcxx headers at
>>>> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/ .  And the packages which do not compile under clang++ do not compile under g++ .
>>>> 
>>>> Packages using a C++ interface may need re-compiling if you use clang++ (or g++) as your C++ compiler.  The external software at http://r.research.att.com/libs/ which I know does is gdal and zeromq. It would be prudent to compile Rcpp with the same compiler as a Rcpp-using package, although not always necessary.
>>>> 
>>>> 
>>>> --
>>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Mac mailing list
>>>> R-SIG-Mac at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
>> 
>> -- 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> 
> On 28 Nov 2013, at 16:17 , Robert J Goedman <goedman at icloud.com> wrote:
> 
>> Guillaume,
>> 
>> The problem is that R can't find /usr/bin/gnutar. One way of fixing this is to install gnutar or to create a symbolic link to tar, which is available on Mavericks.
>> 
>> Rob J. Goedman
>> goedman at icloud.com
>> 
>> 
>> 
>> 
>> On Nov 28, 2013, at 7:11 AM, Guillaume Blanchet <gblanchet.list at gmail.com> wrote:
>> 
>>> Hi ! 
>>> 
>>> I have recently updated my OS to Maverick and from this moment, I have been unable to compile any packages (with or without C code in them). However, I can install source package on my machine without any problem. In other words, the command line 
>>> 
>>> R CMD INSTALL pkg
>>> 
>>> works perfectly fine, where as the command line 
>>> 
>>> R CMD INSTALL --build pkg
>>> 
>>> sends me the following insults after trying to compile any package (here for the package spacemakeR):
>>> 
>>> * installing to library ?/Library/Frameworks/R.framework/Versions/3.0/Resources/library?
>>> * installing *source* package ?spacemakeR? ...
>>> ** R
>>> ** inst
>>> ** preparing package for lazy loading
>>> ** help
>>> *** installing help indices
>>> ** building package indices
>>> ** installing vignettes
>>> ?tutorial.Rnw? using ?UTF-8? 
>>> ** testing if installed package can be loaded
>>> sh: /usr/bin/gnutar: No such file or directory
>>> gzip: can't stat: /Users/guslevesque/Documents/Recherche/Subversion/sedar/pkg/spacemakeR_0.0-5_R_x86_64-apple-darwin10.8.0.tar (/Users/guslevesque/Documents/Recherche/Subversion/sedar/pkg/spacemakeR_0.0-5_R_x86_64-apple-darwin10.8.0.tar): No such file or directory
>>> Avis dans file.rename(file.path(startdir, filename), file.path(startdir,  :
>>> impossible de renommer le fichier '/Users/guslevesque/Documents/Recherche/Subversion/sedar/pkg/spacemakeR_0.0-5_R_x86_64-apple-darwin10.8.0.tar.gz' en '/Users/guslevesque/Documents/Recherche/Subversion/sedar/pkg/spacemakeR_0.0-5.tgz', ? cause de 'No such file or directory'
>>> packaged installation of ?spacemakeR? as ?spacemakeR_0.0-5.tgz?
>>> * DONE (spacemakeR)
>>> 
>>> 
>>> Note that I have carefully followed advices posted on this list and I have install XQuartz, XCode 5.0.2 and XCode command line tools and made following modifications to the ~/.R/Makevars file:
>>> 
>>> CC=clang
>>> CXX=clang++
>>> CFLAGS="-mtune=native -g -O2 -Wall -pedantic -Wconversion"
>>> CXXFLAGS="-mtune=native -g -O2 -Wall -pedantic -Wconversion"
>>> 
>>> Any ideas what is causing this problem ?
>>> 
>>> Thanks in advance for all the help ! 
>>> 
>>> Guillaume Blanchet
>>> 
>>> P.S.: I almost forgot, I am working with R 3.0.2
>>> 
>>> 
>>> 	[[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 


From simon.urbanek at r-project.org  Fri Nov 29 16:35:01 2013
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 29 Nov 2013 10:35:01 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <web-485381672@cgpsrv2.cis.mcmaster.ca>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
Message-ID: <E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>


On Nov 28, 2013, at 8:38 AM, John Fox <jfox at mcmaster.ca> wrote:

> Dear Peter,
> 
> On Thu, 28 Nov 2013 12:00:31 +0100
> peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>> On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:
>> 
>>> Hi Rob,
>>> 
>>> I had some time today and so I started to implement this solution in the
>>> Rcmdr. I first tested whether setting
>>> 
>>> system("defaults write org.R-project.R NSAppSleepDisabled -bool yes")
>>> 
>>> fixes the problem; I verified via 
>>> 
>>> system("defaults read org.R-project.R NSAppSleepDisabled")
>>> 
>>> that the key was in fact set properly. 
>>> 
>>> I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still freezes
>>> periodically. Whatever is going on is probably more complicated than
>>> power-saving.
>>> 
>> 
>> Hmm. The tkfaq issue seems to have gone away for me. You did remember to restart R.app after setting the key?
>> 
> 
> I didn't "remember" to restart R.app because I didn't know that it was necessary to do so. In fact, the code that I wrote, but didn't commit, for the Rcmdr carefully resets the key to its previous state or deletes it if it didn't previously exist when the Commander is closed.
> 
> I think that you've almost surely identified my problem, but the solution also raises a question about what to do. I'm reluctant to have the Rcmdr make a permanent change to users' OS settings. I guess that I could detect whether the NSAppSleepDisabled key is set and pop up a dialog box if it isn't, offering to make the change, and suggesting that the user restart R.app. (BTW, is there an easy way to check whether R is running in R.app or a terminal?)

Yes, check for R_GUI_APP_VERSION env var.

But let me say that what has been proposed is very heavy-handed to say it mildly - changing user's configuration files is not something that should be done without user's consent (if at all) - and AFAIK you're not allowed to do it if you plan to put this on CRAN. In addition, it's trying to swat the symptom with a hammer, it doesn't solve the problem (which is why doesn't tcltk wake up sleep with its activity).


> Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
> 

Yes, it should be handled in either of the two - if this problem is tcltk-specific then tcltk should wake up the sleep, if it is something that affects other R code as well, then it may need to be handled in the R event loop.

Cheers,
Simon


> If restarting R.app after setting the NSAppSleepDisabled key doesn't work for me, I'll then pursue Rob's suggestions.
> 
> Thanks for this,
> John
> 
>> -pd
>> 
>>> Best,
>>> John
>>> 
>>>> -----Original Message-----
>>>> From: Robert J Goedman [mailto:goedman at icloud.com]
>>>> Sent: Sunday, November 24, 2013 11:50 AM
>>>> To: John Fox
>>>> Cc: r-sig-mac at r-project.org
>>>> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
>>>> Mavericks
>>>> 
>>>> Hi John,
>>>> 
>>>> If it's not too much work, I would implement it in Rcmdr because I
>>>> don't know if there are other consequences of App Nap, so until the
>>>> dust settles using the defaults system might be ok.
>>>> 
>>>> Regards,
>>>> Rob J. Goedman
>>>> goedman at icloud.com
>>>> 
>>>> 
>>>> 
>>>> 
>>>> On Nov 24, 2013, at 8:30 AM, John Fox <jfox at mcmaster.ca> wrote:
>>>> 
>>>>> Hi Rob,
>>>>> 
>>>>> You've just answered my next question! I was holding off to give you
>>>> a
>>>>> chance to address the issue directly in R.app.
>>>>> 
>>>>> Is there any reason for me, at least for the time-being, not to do
>>>> this from
>>>>> the Rcmdr via system()? I just tried, and that seems to work. If
>>>> necessary,
>>>>> I could check for the existence and (if it exists) the current state
>>>> of this
>>>>> key, and restore that when the Commander() exits. Of course, if you
>>>> plan to
>>>>> address the issue directly soon, it doesn't make sense for me to do
>>>> so.
>>>>> 
>>>>> Thanks again for your help.
>>>>> 
>>>>> John
>>>>> 
>>>>>> -----Original Message-----
>>>>>> From: Robert J Goedman [mailto:goedman at icloud.com]
>>>>>> Sent: Sunday, November 24, 2013 10:32 AM
>>>>>> To: John Fox
>>>>>> Cc: r-sig-mac at r-project.org
>>>>>> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
>>>>>> Mavericks
>>>>>> 
>>>>>> Hi John,
>>>>>> 
>>>>>> If you want to play around with NSAppSleepDisabled yourself, you
>>>> can,
>>>>>> in a Terminal:
>>>>>> 
>>>>>> defaults write org.R-project.R NSAppSleepDisabled -bool yes
>>>>>> 
>>>>>> to check the setting:
>>>>>> 
>>>>>> defaults read org.R-project.R NSAppSleepDisabled
>>>>>> 
>>>>>> or to re-enable AppNap:
>>>>>> 
>>>>>> defaults write org.R-project.R NSAppSleepDisabled -bool no
>>>>>> 
>>>>>> or just delete the key:
>>>>>> 
>>>>>> defaults delete org.R-project.R NSAppSleepDisabled
>>>>>> 
>>>>>> Regards,
>>>>>> Rob J. Goedman
>>>>>> goedman at icloud.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> On Nov 23, 2013, at 10:31 PM, Robert J Goedman <goedman at icloud.com>
>>>>>> wrote:
>>>>>> 
>>>>>> 
>>>>>> 	Hi John,
>>>>>> 
>>>>>> 	I'm just starting, but it look likes 'defaults write ...' can be
>>>>>> used to manage the setting. Not elegant, but maybe temporarily ok
>>>> for
>>>>>> tcltk users.
>>>>>> 
>>>>>> 	Someone from TexShop (Richard Koch) reported that if R.app is
>>>>>> compiled against the 10.9 APIs, the 'Prevent App Nap' check box will
>>>>>> not appear. The ultimate solution is for R.app to know when App Nap
>>>>>> should not kick in, there is a new API for that.
>>>>>> 
>>>>>> 	So, some more homework...
>>>>>> 
>>>>>> 	Regards,
>>>>>> 	Rob J. Goedman
>>>>>> 	goedman at icloud.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 	On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca> wrote:
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 		Hi Rob,
>>>>>> 
>>>>>> 		Thanks for the explanation -- that makes sense of the
>>>>> current
>>>>>> behaviour. I think that you know that I'm not very knowledgeable
>>>> about
>>>>>> OS X. A couple of follow-up questions:
>>>>>> 
>>>>>> 		If you make this change to R.app, will the default be to
>>>>>> disable App Nap or just to provide the check box?
>>>>>> 
>>>>>> 		If App Nap isn't disable by R.app by default, would it be
>>>>>> possible to disable it under program control, e.g., when the Rcmdr
>>>>>> package is loaded?
>>>>>> 
>>>>>> 		Best,
>>>>>> 		John
>>>>>> 
>>>>>> 		On Sat, 23 Nov 2013 18:59:12 -0800
>>>>>> 		Robert J Goedman <goedman at icloud.com> wrote:
>>>>>> 
>>>>>> 
>>>>>> 			Hi John,
>>>>>> 
>>>>>> 			Looking at Activity Monitor on my system, R will
>>>>> always
>>>>>> take up say 2.5% CPU time while R.app will almost go away if it is
>>>> not
>>>>>> active. This might be because in a terminal the process might not be
>>>>>> treated as a pure application but maybe more as a traditional Unix
>>>>>> process. But that's just a guess from my side.
>>>>>> 
>>>>>> 			What surprised me a bit is that we couldn't switch
>>>>> off
>>>>>> App Nap, as is possible with several other apps (go to the Info
>>>> panel
>>>>>> of an app and it should show a 'Prevent App Nap' box, e.g. Dropbox).
>>>>>> R.app did not show that box, probably a consequence of an older
>>>>>> build/project creation?
>>>>>> 
>>>>>> 			Anyway, on my system I added that property in the
>>>>>> info.plist and disabled the App Nap behavior. It seems to be working
>>>>>> fine now. I'll do some more testing to see if I can get the check
>>>> box
>>>>>> on the Info screen show up and check with Simon if it's ok to commit
>>>>>> the change. Of course, in that case R.app will also always consume
>>>> 2.5%
>>>>>> CPU. Under the energy tab of the Activity Monitor you can see which
>>>>>> apps allow App Nap.
>>>>>> 
>>>>>> 			Rob J. Goedman
>>>>>> 			goedman at icloud.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 			On Nov 23, 2013, at 5:43 AM, John Fox
>>>>> <jfox at mcmaster.ca>
>>>>>> wrote:
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 				Dear Rob et al.,
>>>>>> 
>>>>>> 				I'm glad that there's progress in
>>>>> understanding
>>>>>> the source of the problem, but I wonder why the problem doesn't
>>>>>> manifest itself -- at least in my experience -- when R runs in a
>>>>>> terminal window.
>>>>>> 
>>>>>> 				Best,
>>>>>> 				John
>>>>>> 
>>>>>> 				On Fri, 22 Nov 2013 14:42:00 -0800
>>>>>> 				Robert J Goedman <goedman at icloud.com> wrote:
>>>>>> 
>>>>>> 
>>>>>> 					Thansk Peter,
>>>>>> 
>>>>>> 					Now I can reproduce it!
>>>>>> 
>>>>>> 					Rob J. Goedman
>>>>>> 					goedman at icloud.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 					On Nov 22, 2013, at 1:00 PM, peter
>>>>> dalgaard
>>>>>> <pdalgd at gmail.com> wrote:
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 						On 22 Nov 2013, at 16:42 ,
>>>>> Robert J
>>>>>> Goedman <goedman at icloud.com> wrote:
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 							Not sure how long it
>>>>> takes to see
>>>>>> the lagging (a few minutes someone reported), but I've not been able
>>>> to
>>>>>> reproduce this problem.
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 						For me, library(tcltk);
>>>>> demo(tkfaq),
>>>>>> click to focus, then use Fn-Down (i.e. PgDown) to go to the bottom
>>>> of
>>>>>> the file, Fn-Up to the top, etc. Less than two iteration for me
>>>> before
>>>>>> the effect kicks in.
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 							Which makes me
>>>>> wonder if anyone
>>>>>> has seen this behavior after rebuilding R.app on Mavericks (from the
>>>>>> R.app sources).
>>>>>> 
>>>>>> 							Regards,
>>>>>> 							Rob J. Goedman
>>>>>> 							goedman at icloud.com
>>>>>> 
>>>>>> 
>>>>>> 							On Nov 22, 2013, at
>>>>> 7:29 AM, Simon
>>>>>> Urbanek <simon.urbanek at r-project.org> wrote:
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 								On Nov 20,
>>>>> 2013, at 11:41 AM,
>>>>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 									I
>>>>> upgraded to XQuartz
>>>>>> 2.7.5, but it still lags.
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 								Please read
>>>>> Peter's response
>>>>>> - it has nothing to do with XQuartz versions
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 							[[alternative HTML
>>>>> version
>>>>>> deleted]]
>>>>>> 
>>>>>> 
>>>>>> 	_______________________________________________
>>>>>> 							R-SIG-Mac mailing
>>>>> list
>>>>>> 
>>>>> R-SIG-Mac at r-project.org
>>>>>> 
>>>>>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 						--
>>>>>> 						Peter Dalgaard, Professor,
>>>>>> 						Center for Statistics,
>>>>> Copenhagen
>>>>>> Business School
>>>>>> 						Solbjerg Plads 3, 2000
>>>>> Frederiksberg,
>>>>>> Denmark
>>>>>> 						Phone: (+45)38153501
>>>>>> 						Email: pd.mes at cbs.dk  Priv:
>>>>>> PDalgd at gmail.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 					[[alternative HTML version deleted]]
>>>>>> 
>>>>>> 
>>>>>> 	_______________________________________________
>>>>>> 					R-SIG-Mac mailing list
>>>>>> 					R-SIG-Mac at r-project.org
>>>>>> 
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-
>>>>>> mac
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 	_______________________________________________
>>>>>> 	R-SIG-Mac mailing list
>>>>>> 	R-SIG-Mac at r-project.org
>>>>>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>>>>> 
>>>>>> 
>>>>> 
>>>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 
>> -- 
>> Peter Dalgaard, Professor
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From jfox at mcmaster.ca  Fri Nov 29 16:47:02 2013
From: jfox at mcmaster.ca (John Fox)
Date: Fri, 29 Nov 2013 10:47:02 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca> <E694BF98-6944-4F93-!
	89B1-479A6DBDEEB5@r-pro ject.org>
Message-ID: <002101ceed1a$3f9dec90$bed9c5b0$@mcmaster.ca>

Dear Simon,

> -----Original Message-----
> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> Sent: Friday, November 29, 2013 10:35 AM
> To: John Fox
> Cc: peter dalgaard; R-SIG-Mac
> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> Mavericks
> 
> 
> On Nov 28, 2013, at 8:38 AM, John Fox <jfox at mcmaster.ca> wrote:
> 
> > Dear Peter,
> >
> > On Thu, 28 Nov 2013 12:00:31 +0100
> > peter dalgaard <pdalgd at gmail.com> wrote:
> >>
> >> On 28 Nov 2013, at 01:46 , John Fox <jfox at mcmaster.ca> wrote:
> >>
> >>> Hi Rob,
> >>>
> >>> I had some time today and so I started to implement this solution
> in the
> >>> Rcmdr. I first tested whether setting
> >>>
> >>> system("defaults write org.R-project.R NSAppSleepDisabled -bool
> yes")
> >>>
> >>> fixes the problem; I verified via
> >>>
> >>> system("defaults read org.R-project.R NSAppSleepDisabled")
> >>>
> >>> that the key was in fact set properly.
> >>>
> >>> I'm afraid that even with NSAppSleepDisabled set, the Rcmdr still
> freezes
> >>> periodically. Whatever is going on is probably more complicated
> than
> >>> power-saving.
> >>>
> >>
> >> Hmm. The tkfaq issue seems to have gone away for me. You did
> remember to restart R.app after setting the key?
> >>
> >
> > I didn't "remember" to restart R.app because I didn't know that it
> was necessary to do so. In fact, the code that I wrote, but didn't
> commit, for the Rcmdr carefully resets the key to its previous state or
> deletes it if it didn't previously exist when the Commander is closed.
> >
> > I think that you've almost surely identified my problem, but the
> solution also raises a question about what to do. I'm reluctant to have
> the Rcmdr make a permanent change to users' OS settings. I guess that I
> could detect whether the NSAppSleepDisabled key is set and pop up a
> dialog box if it isn't, offering to make the change, and suggesting
> that the user restart R.app. (BTW, is there an easy way to check
> whether R is running in R.app or a terminal?)
> 
> Yes, check for R_GUI_APP_VERSION env var.
> 
> But let me say that what has been proposed is very heavy-handed to say
> it mildly - changing user's configuration files is not something that
> should be done without user's consent (if at all) - and AFAIK you're
> not allowed to do it if you plan to put this on CRAN. In addition, it's
> trying to swat the symptom with a hammer, it doesn't solve the problem
> (which is why doesn't tcltk wake up sleep with its activity).
> 

Well, I was proposing to ask for the user's consent (I thought that was
clear from my message), but, as I said, it would be better to fix this in
either tcltk or R.app, depending upon the nature of the problem. So I think
that we're in agreement. 

Also, I mentioned in a subsequent message that, for the time-being, I'll
simply put a note about NSAppSleepDisabled in the Rcmdr Mac OS X
installation notes.

Best,
 John

> 
> > Wouldn't it be better to handle this issue in R.app or even in tcltk,
> however?
> >
> 
> Yes, it should be handled in either of the two - if this problem is
> tcltk-specific then tcltk should wake up the sleep, if it is something
> that affects other R code as well, then it may need to be handled in
> the R event loop.
> 
> Cheers,
> Simon
> 
> 
> > If restarting R.app after setting the NSAppSleepDisabled key doesn't
> work for me, I'll then pursue Rob's suggestions.
> >
> > Thanks for this,
> > John
> >
> >> -pd
> >>
> >>> Best,
> >>> John
> >>>
> >>>> -----Original Message-----
> >>>> From: Robert J Goedman [mailto:goedman at icloud.com]
> >>>> Sent: Sunday, November 24, 2013 11:50 AM
> >>>> To: John Fox
> >>>> Cc: r-sig-mac at r-project.org
> >>>> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> >>>> Mavericks
> >>>>
> >>>> Hi John,
> >>>>
> >>>> If it's not too much work, I would implement it in Rcmdr because I
> >>>> don't know if there are other consequences of App Nap, so until
> the
> >>>> dust settles using the defaults system might be ok.
> >>>>
> >>>> Regards,
> >>>> Rob J. Goedman
> >>>> goedman at icloud.com
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> On Nov 24, 2013, at 8:30 AM, John Fox <jfox at mcmaster.ca> wrote:
> >>>>
> >>>>> Hi Rob,
> >>>>>
> >>>>> You've just answered my next question! I was holding off to give
> you
> >>>> a
> >>>>> chance to address the issue directly in R.app.
> >>>>>
> >>>>> Is there any reason for me, at least for the time-being, not to
> do
> >>>> this from
> >>>>> the Rcmdr via system()? I just tried, and that seems to work. If
> >>>> necessary,
> >>>>> I could check for the existence and (if it exists) the current
> state
> >>>> of this
> >>>>> key, and restore that when the Commander() exits. Of course, if
> you
> >>>> plan to
> >>>>> address the issue directly soon, it doesn't make sense for me to
> do
> >>>> so.
> >>>>>
> >>>>> Thanks again for your help.
> >>>>>
> >>>>> John
> >>>>>
> >>>>>> -----Original Message-----
> >>>>>> From: Robert J Goedman [mailto:goedman at icloud.com]
> >>>>>> Sent: Sunday, November 24, 2013 10:32 AM
> >>>>>> To: John Fox
> >>>>>> Cc: r-sig-mac at r-project.org
> >>>>>> Subject: Re: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX
> >>>>>> Mavericks
> >>>>>>
> >>>>>> Hi John,
> >>>>>>
> >>>>>> If you want to play around with NSAppSleepDisabled yourself, you
> >>>> can,
> >>>>>> in a Terminal:
> >>>>>>
> >>>>>> defaults write org.R-project.R NSAppSleepDisabled -bool yes
> >>>>>>
> >>>>>> to check the setting:
> >>>>>>
> >>>>>> defaults read org.R-project.R NSAppSleepDisabled
> >>>>>>
> >>>>>> or to re-enable AppNap:
> >>>>>>
> >>>>>> defaults write org.R-project.R NSAppSleepDisabled -bool no
> >>>>>>
> >>>>>> or just delete the key:
> >>>>>>
> >>>>>> defaults delete org.R-project.R NSAppSleepDisabled
> >>>>>>
> >>>>>> Regards,
> >>>>>> Rob J. Goedman
> >>>>>> goedman at icloud.com
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> On Nov 23, 2013, at 10:31 PM, Robert J Goedman
> <goedman at icloud.com>
> >>>>>> wrote:
> >>>>>>
> >>>>>>
> >>>>>> 	Hi John,
> >>>>>>
> >>>>>> 	I'm just starting, but it look likes 'defaults write ...'
can
> be
> >>>>>> used to manage the setting. Not elegant, but maybe temporarily
> ok
> >>>> for
> >>>>>> tcltk users.
> >>>>>>
> >>>>>> 	Someone from TexShop (Richard Koch) reported that if R.app
is
> >>>>>> compiled against the 10.9 APIs, the 'Prevent App Nap' check box
> will
> >>>>>> not appear. The ultimate solution is for R.app to know when App
> Nap
> >>>>>> should not kick in, there is a new API for that.
> >>>>>>
> >>>>>> 	So, some more homework...
> >>>>>>
> >>>>>> 	Regards,
> >>>>>> 	Rob J. Goedman
> >>>>>> 	goedman at icloud.com
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 	On Nov 23, 2013, at 9:06 PM, John Fox <jfox at mcmaster.ca>
> wrote:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 		Hi Rob,
> >>>>>>
> >>>>>> 		Thanks for the explanation -- that makes sense of
the
> >>>>> current
> >>>>>> behaviour. I think that you know that I'm not very knowledgeable
> >>>> about
> >>>>>> OS X. A couple of follow-up questions:
> >>>>>>
> >>>>>> 		If you make this change to R.app, will the default
be to
> >>>>>> disable App Nap or just to provide the check box?
> >>>>>>
> >>>>>> 		If App Nap isn't disable by R.app by default, would
it
> be
> >>>>>> possible to disable it under program control, e.g., when the
> Rcmdr
> >>>>>> package is loaded?
> >>>>>>
> >>>>>> 		Best,
> >>>>>> 		John
> >>>>>>
> >>>>>> 		On Sat, 23 Nov 2013 18:59:12 -0800
> >>>>>> 		Robert J Goedman <goedman at icloud.com> wrote:
> >>>>>>
> >>>>>>
> >>>>>> 			Hi John,
> >>>>>>
> >>>>>> 			Looking at Activity Monitor on my system, R
will
> >>>>> always
> >>>>>> take up say 2.5% CPU time while R.app will almost go away if it
> is
> >>>> not
> >>>>>> active. This might be because in a terminal the process might
> not be
> >>>>>> treated as a pure application but maybe more as a traditional
> Unix
> >>>>>> process. But that's just a guess from my side.
> >>>>>>
> >>>>>> 			What surprised me a bit is that we couldn't
switch
> >>>>> off
> >>>>>> App Nap, as is possible with several other apps (go to the Info
> >>>> panel
> >>>>>> of an app and it should show a 'Prevent App Nap' box, e.g.
> Dropbox).
> >>>>>> R.app did not show that box, probably a consequence of an older
> >>>>>> build/project creation?
> >>>>>>
> >>>>>> 			Anyway, on my system I added that property
in the
> >>>>>> info.plist and disabled the App Nap behavior. It seems to be
> working
> >>>>>> fine now. I'll do some more testing to see if I can get the
> check
> >>>> box
> >>>>>> on the Info screen show up and check with Simon if it's ok to
> commit
> >>>>>> the change. Of course, in that case R.app will also always
> consume
> >>>> 2.5%
> >>>>>> CPU. Under the energy tab of the Activity Monitor you can see
> which
> >>>>>> apps allow App Nap.
> >>>>>>
> >>>>>> 			Rob J. Goedman
> >>>>>> 			goedman at icloud.com
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 			On Nov 23, 2013, at 5:43 AM, John Fox
> >>>>> <jfox at mcmaster.ca>
> >>>>>> wrote:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 				Dear Rob et al.,
> >>>>>>
> >>>>>> 				I'm glad that there's progress in
> >>>>> understanding
> >>>>>> the source of the problem, but I wonder why the problem doesn't
> >>>>>> manifest itself -- at least in my experience -- when R runs in a
> >>>>>> terminal window.
> >>>>>>
> >>>>>> 				Best,
> >>>>>> 				John
> >>>>>>
> >>>>>> 				On Fri, 22 Nov 2013 14:42:00 -0800
> >>>>>> 				Robert J Goedman
<goedman at icloud.com> wrote:
> >>>>>>
> >>>>>>
> >>>>>> 					Thansk Peter,
> >>>>>>
> >>>>>> 					Now I can reproduce it!
> >>>>>>
> >>>>>> 					Rob J. Goedman
> >>>>>> 					goedman at icloud.com
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 					On Nov 22, 2013, at 1:00 PM,
peter
> >>>>> dalgaard
> >>>>>> <pdalgd at gmail.com> wrote:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 						On 22 Nov 2013, at
16:42 ,
> >>>>> Robert J
> >>>>>> Goedman <goedman at icloud.com> wrote:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 							Not sure how
long it
> >>>>> takes to see
> >>>>>> the lagging (a few minutes someone reported), but I've not been
> able
> >>>> to
> >>>>>> reproduce this problem.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 						For me,
library(tcltk);
> >>>>> demo(tkfaq),
> >>>>>> click to focus, then use Fn-Down (i.e. PgDown) to go to the
> bottom
> >>>> of
> >>>>>> the file, Fn-Up to the top, etc. Less than two iteration for me
> >>>> before
> >>>>>> the effect kicks in.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 							Which makes
me
> >>>>> wonder if anyone
> >>>>>> has seen this behavior after rebuilding R.app on Mavericks (from
> the
> >>>>>> R.app sources).
> >>>>>>
> >>>>>> 							Regards,
> >>>>>> 							Rob J.
Goedman
> >>>>>>
goedman at icloud.com
> >>>>>>
> >>>>>>
> >>>>>> 							On Nov 22,
2013, at
> >>>>> 7:29 AM, Simon
> >>>>>> Urbanek <simon.urbanek at r-project.org> wrote:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 								On
Nov 20,
> >>>>> 2013, at 11:41 AM,
> >>>>>> Jonathan Chapman <petsrme2 at icloud.com> wrote:
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
I
> >>>>> upgraded to XQuartz
> >>>>>> 2.7.5, but it still lags.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
Please read
> >>>>> Peter's response
> >>>>>> - it has nothing to do with XQuartz versions
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
[[alternative HTML
> >>>>> version
> >>>>>> deleted]]
> >>>>>>
> >>>>>>
> >>>>>> 	_______________________________________________
> >>>>>> 							R-SIG-Mac
mailing
> >>>>> list
> >>>>>>
> >>>>> R-SIG-Mac at r-project.org
> >>>>>>
> >>>>>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 						--
> >>>>>> 						Peter Dalgaard,
Professor,
> >>>>>> 						Center for
Statistics,
> >>>>> Copenhagen
> >>>>>> Business School
> >>>>>> 						Solbjerg Plads 3,
2000
> >>>>> Frederiksberg,
> >>>>>> Denmark
> >>>>>> 						Phone: (+45)38153501
> >>>>>> 						Email: pd.mes at cbs.dk
Priv:
> >>>>>> PDalgd at gmail.com
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 					[[alternative HTML version
deleted]]
> >>>>>>
> >>>>>>
> >>>>>> 	_______________________________________________
> >>>>>> 					R-SIG-Mac mailing list
> >>>>>> 					R-SIG-Mac at r-project.org
> >>>>>>
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-
> >>>>>> mac
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> 	_______________________________________________
> >>>>>> 	R-SIG-Mac mailing list
> >>>>>> 	R-SIG-Mac at r-project.org
> >>>>>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>>>>>
> >>>>>>
> >>>>>
> >>>>>
> >>>
> >>> _______________________________________________
> >>> R-SIG-Mac mailing list
> >>> R-SIG-Mac at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >>
> >> --
> >> Peter Dalgaard, Professor
> >> Center for Statistics, Copenhagen Business School
> >> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >> Phone: (+45)38153501
> >> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >>
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >


From pdalgd at gmail.com  Sat Nov 30 11:59:01 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 30 Nov 2013 11:59:01 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<web-484109293@cgpsrv2.cis.mcmaster.ca>
	<528CAE27.1030501@stats.ox.ac.uk>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
	<E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>
Message-ID: <A322210A-A7B9-477E-AD59-9F1D4E40741A@gmail.com>


On 29 Nov 2013, at 16:35 , Simon Urbanek <simon.urbanek at r-project.org> wrote:

> 
> But let me say that what has been proposed is very heavy-handed to say it mildly - changing user's configuration files is not something that should be done without user's consent (if at all) - and AFAIK you're not allowed to do it if you plan to put this on CRAN. In addition, it's trying to swat the symptom with a hammer, it doesn't solve the problem (which is why doesn't tcltk wake up sleep with its activity).
> 

On the other hand, the OS is also acting very heavy-handed here! Try this

> for (i in 1:100) print(system.time(replicate(1e4, t.test(rexp(10),mu=1)$statistic))[["elapsed"]])

and go surf the net or something while you wait. The time per iteration shoots up by a factor of 5-6 as R.app goes into App Nap. I.e., the problem is not confined to tcltk. 

> 
>> Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
>> 
> 
> Yes, it should be handled in either of the two - if this problem is tcltk-specific then tcltk should wake up the sleep, if it is something that affects other R code as well, then it may need to be handled in the R event loop.

Looks like it is that latter. Until we figure out how to do that, I think we need to prepare to tell users to set NSAppSleepDisabled, if they want to do something computationally intensive (and be able to go for a cup of coffee in the meantime). Of course it is nicer, OS-wise, to leave App Nap enabled, but it reduces the energy footprint of an inactive R.app from only about 1.5 to nearly 0.0, compared to about 100 when R is actually working.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ripley at stats.ox.ac.uk  Sat Nov 30 12:37:19 2013
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 30 Nov 2013 11:37:19 +0000
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <A322210A-A7B9-477E-AD59-9F1D4E40741A@gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>	<web-484670061@cgpsrv2.cis.mcmaster.ca>	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>	<web-484711348@cgpsrv2.cis.mcmaster.ca>	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>	<web-485381672@cgpsrv2.cis.mcmaster.ca>	<E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>
	<A322210A-A7B9-477E-AD59-9F1D4E40741A@gmail.com>
Message-ID: <5299CDEF.6040608@stats.ox.ac.uk>

This does not happen for me provided R.app is visible.  From

https://developer.apple.com/library/mac/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_9.html

'An app is considered to be a candidate for sleep if:

     It is not visible?if all of an app?s windows are either hidden by 
other windows or minimized in a hidden dock, and the app is not in the 
foreground

(other necessary conditions)'.

which if accurate indicates that keeping the R.app console unhidden 
should suffice.



On 30/11/2013 10:59, peter dalgaard wrote:
>
> On 29 Nov 2013, at 16:35 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
>
>>
>> But let me say that what has been proposed is very heavy-handed to say it mildly - changing user's configuration files is not something that should be done without user's consent (if at all) - and AFAIK you're not allowed to do it if you plan to put this on CRAN. In addition, it's trying to swat the symptom with a hammer, it doesn't solve the problem (which is why doesn't tcltk wake up sleep with its activity).
>>
>
> On the other hand, the OS is also acting very heavy-handed here! Try this
>
>> for (i in 1:100) print(system.time(replicate(1e4, t.test(rexp(10),mu=1)$statistic))[["elapsed"]])
>
> and go surf the net or something while you wait. The time per iteration shoots up by a factor of 5-6 as R.app goes into App Nap. I.e., the problem is not confined to tcltk.
>
>>
>>> Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
>>>
>>
>> Yes, it should be handled in either of the two - if this problem is tcltk-specific then tcltk should wake up the sleep, if it is something that affects other R code as well, then it may need to be handled in the R event loop.
>
> Looks like it is that latter. Until we figure out how to do that, I think we need to prepare to tell users to set NSAppSleepDisabled, if they want to do something computationally intensive (and be able to go for a cup of coffee in the meantime). Of course it is nicer, OS-wise, to leave App Nap enabled, but it reduces the energy footprint of an inactive R.app from only about 1.5 to nearly 0.0, compared to about 100 when R is actually working.
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jfox at mcmaster.ca  Sat Nov 30 15:46:21 2013
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 30 Nov 2013 09:46:21 -0500
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <5299CDEF.6040608@stats.ox.ac.uk>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
	<E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>
	<A322210A-A7B9-477E-AD59-9F1D4E40741A@gmail.com>
	<5299CDEF.6040608@stats.ox.ac.uk>
Message-ID: <web-485719271@cgpsrv2.cis.mcmaster.ca>

Dear Brian,

Keeping R.app visible should deal with the case of a long computation as long as users are conscious of the problem, but it's likely that users of the Rcmdr will normally cover up the R.app window or minimize it.

 Best,
 John

On Sat, 30 Nov 2013 11:37:19 +0000
 Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> This does not happen for me provided R.app is visible.  From
> 
> https://developer.apple.com/library/mac/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_9.html
> 
> 'An app is considered to be a candidate for sleep if:
> 
>      It is not visible?if all of an app?s windows are either hidden by 
> other windows or minimized in a hidden dock, and the app is not in the foreground
> 
> (other necessary conditions)'.
> 
> which if accurate indicates that keeping the R.app console unhidden should suffice.
> 
> 
> 
> On 30/11/2013 10:59, peter dalgaard wrote:
> >
> > On 29 Nov 2013, at 16:35 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
> >
> >>
> >> But let me say that what has been proposed is very heavy-handed to say it mildly - changing user's configuration files is not something that should be done without user's consent (if at all) - and AFAIK you're not allowed to do it if you plan to put this on CRAN. In addition, it's trying to swat the symptom with a hammer, it doesn't solve the problem (which is why doesn't tcltk wake up sleep with its activity).
> >>
> >
> > On the other hand, the OS is also acting very heavy-handed here! Try this
> >
> >> for (i in 1:100) print(system.time(replicate(1e4, t.test(rexp(10),mu=1)$statistic))[["elapsed"]])
> >
> > and go surf the net or something while you wait. The time per iteration shoots up by a factor of 5-6 as R.app goes into App Nap. I.e., the problem is not confined to tcltk.
> >
> >>
> >>> Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
> >>>
> >>
> >> Yes, it should be handled in either of the two - if this problem is tcltk-specific then tcltk should wake up the sleep, if it is something that affects other R code as well, then it may need to be handled in the R event loop.
> >
> > Looks like it is that latter. Until we figure out how to do that, I think we need to prepare to tell users to set NSAppSleepDisabled, if they want to do something computationally intensive (and be able to go for a cup of coffee in the meantime). Of course it is nicer, OS-wise, to leave App Nap enabled, but it reduces the energy footprint of an inactive R.app from only about 1.5 to nearly 0.0, compared to about 100 when R is actually working.
> >
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

------------------------------------------------
John Fox
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From pdalgd at gmail.com  Sat Nov 30 16:00:05 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 30 Nov 2013 16:00:05 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <5299CDEF.6040608@stats.ox.ac.uk>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>	<web-484670061@cgpsrv2.cis.mcmaster.ca>	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>	<web-484711348@cgpsrv2.cis.mcmaster.ca>	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>	<web-485381672@cgpsrv2.cis.mcmaster.ca>	<E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>
	<A322210A-A7B9-477E-AD59-9F1D4E40741A@gmail.com>
	<5299CDEF.6040608@stats.ox.ac.uk>
Message-ID: <5ED00B63-15B4-414A-883B-01D1A8D2863C@gmail.com>


On 30 Nov 2013, at 12:37 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> This does not happen for me provided R.app is visible.  From
> 
> https://developer.apple.com/library/mac/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_9.html
> 
> 'An app is considered to be a candidate for sleep if:
> 
>    It is not visible?if all of an app?s windows are either hidden by other windows or minimized in a hidden dock, and the app is not in the foreground
> 
> (other necessary conditions)'.
> 
> which if accurate indicates that keeping the R.app console unhidden should suffice.
> 
> 

Some experimenting indicates that R.app will nap  with a partially exposed window, if there is no change to the exposed part of the window. If the top right corner is obscured by the Activity Monitor and I change the test command to not generate output, I see

> r <- replicate(50, system.time(replicate(1e4, t.test(rexp(10),mu=1)$statistic))[["elapsed"]])
> r
 [1]  5.853  3.607  3.118  3.037  3.012  2.983  2.962  2.978  2.949  2.956
[11]  2.957 19.882 24.386 26.441 25.563 27.452 21.195 20.823  3.012  2.976
[21]  2.965  2.966  2.969  2.945  3.057  2.958  2.942  2.971  2.976  2.936
[31]  2.978  2.960  2.991  2.991  2.994  3.021  2.991  2.974  3.005  2.985
[41]  3.006  2.991  3.033  3.017  2.978  3.012  2.987  2.997  2.995  3.053

(I got bored and woke it after a couple of minutes, at iteration 18).

It doesn't happen if it is the bottom right corner that is obscured, so that the spinning "I'm working" symbol is visible, so I suppose the logic is tied to window updates.

> 
> On 30/11/2013 10:59, peter dalgaard wrote:
>> 
>> On 29 Nov 2013, at 16:35 , Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>>> 
>>> But let me say that what has been proposed is very heavy-handed to say it mildly - changing user's configuration files is not something that should be done without user's consent (if at all) - and AFAIK you're not allowed to do it if you plan to put this on CRAN. In addition, it's trying to swat the symptom with a hammer, it doesn't solve the problem (which is why doesn't tcltk wake up sleep with its activity).
>>> 
>> 
>> On the other hand, the OS is also acting very heavy-handed here! Try this
>> 
>>> for (i in 1:100) print(system.time(replicate(1e4, t.test(rexp(10),mu=1)$statistic))[["elapsed"]])
>> 
>> and go surf the net or something while you wait. The time per iteration shoots up by a factor of 5-6 as R.app goes into App Nap. I.e., the problem is not confined to tcltk.
>> 
>>> 
>>>> Wouldn't it be better to handle this issue in R.app or even in tcltk, however?
>>>> 
>>> 
>>> Yes, it should be handled in either of the two - if this problem is tcltk-specific then tcltk should wake up the sleep, if it is something that affects other R code as well, then it may need to be handled in the R event loop.
>> 
>> Looks like it is that latter. Until we figure out how to do that, I think we need to prepare to tell users to set NSAppSleepDisabled, if they want to do something computationally intensive (and be able to go for a cup of coffee in the meantime). Of course it is nicer, OS-wise, to leave App Nap enabled, but it reduces the energy footprint of an inactive R.app from only about 1.5 to nearly 0.0, compared to about 100 when R is actually working.
>> 
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From goedman at icloud.com  Sat Nov 30 16:58:43 2013
From: goedman at icloud.com (Robert J Goedman)
Date: Sat, 30 Nov 2013 07:58:43 -0800
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <5ED00B63-15B4-414A-883B-01D1A8D2863C@gmail.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
	<E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>
	<A322210A-A7B9-477E-AD59-9F1D4E40741A@gmail.com>
	<5299CDEF.6040608@stats.ox.ac.uk>
	<5ED00B63-15B4-414A-883B-01D1A8D2863C@gmail.com>
Message-ID: <3C9CB81C-4657-4E5C-9EA7-87CA442D480D@icloud.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-mac/attachments/20131130/f5d4c725/attachment.pl>

From pdalgd at gmail.com  Sat Nov 30 20:09:46 2013
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 30 Nov 2013 20:09:46 +0100
Subject: [R-SIG-Mac] Problems with Rcmdr via XQuartz on OSX Mavericks
In-Reply-To: <3C9CB81C-4657-4E5C-9EA7-87CA442D480D@icloud.com>
References: <27239B81-F232-411B-A138-D1EECADCC28C@icloud.com>
	<8B255786-2DF3-44D3-B5DB-9C8D77E33681@helsinki.fi>
	<CABkCotQiJ4qQ2EXyhuiQMjxyGg6+aQYMXrypCFvsAY0Gb+SbjQ@mail.gmail.com>
	<F050162D-1035-429E-9D60-00B96C602ECD@icloud.com>
	<64FE04BA-8E33-407A-8BA0-F7C482EB986C@r-project.org>
	<0144F335-E32A-4A68-9BE2-F0D8A9C88F68@icloud.com>
	<A3B14A77-BCC8-4C2C-9439-387886E092F1@gmail.com>
	<80D8858F-3D05-4018-921F-FCDFC7D398C2@icloud.com>
	<web-484670061@cgpsrv2.cis.mcmaster.ca>
	<580A54C9-2433-44DF-9B03-490CBFB1428C@icloud.com>
	<web-484711348@cgpsrv2.cis.mcmaster.ca>
	<3E98BF08-F894-4A4C-BA43-EF6339C0BA45@icloud.com>
	<427F98E0-576C-4426-8137-8C8AC5C9A4F7@icloud.com>
	<000601cee932$832a7f00$897f7d00$@mcmaster.ca>
	<79CAF4F3-5C6E-4AE7-86E0-6D0CD03C3E7A@icloud.com>
	<000301ceebd3$4a4621a0$ded264e0$@mcmaster.ca>
	<74981A89-0667-4CE1-AE18-E67EA69B5D67@gmail.com>
	<web-485381672@cgpsrv2.cis.mcmaster.ca>
	<E694BF98-6944-4F93-89B1-479A6DBDEEB5@r-project.org>
	<A322210A-A7B9-477E-AD59-9F1D4E40741A@gmail.com>
	<5299CDEF.6040608@stats.ox.ac.uk>
	<5ED00B63-15B4-414A-883B-01D1A8D2863C@gmail.com>
	<3C9CB81C-4657-4E5C-9EA7-87CA442D480D@icloud.com>
Message-ID: <22ECCD90-D9A4-486C-B49A-F7855D6F5500@gmail.com>


On 30 Nov 2013, at 16:58 , Robert J Goedman <goedman at icloud.com> wrote:

> Yes, I've seen that as well and it is likely not limited to tcltk.
> 
> Question is, for R.app, do we want to ship with NSAppSleepDisabled? I would be in favor (my $0.02).
> 
> If yes I will commit.


One item: I found that there is a tick box "Prevent App Nap" available via Get Info for applications (secondary click in the Applications folder), which is somewhat more intuitive that the "defaults write ..." route. If we make your change, will the same box appear, just selected by default?

> 
> Regards,
> Rob J. Goedman
> goedman at icloud.com
> 
> 
> On Nov 30, 2013, at 7:00 AM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
>> 
>> On 30 Nov 2013, at 12:37 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>> 
>>> This does not happen for me provided R.app is visible.  From
>>> 
>>> https://developer.apple.com/library/mac/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_9.html
>>> 
>>> 'An app is considered to be a candidate for sleep if:
>>> 
>>>  It is not visible?if all of an app?s windows are either hidden by other windows or minimized in a hidden dock, and the app is not in the foreground
>>> 
>>> (other necessary conditions)'.
>>> 
>>> which if accurate indicates that keeping the R.app console unhidden should suffice.
> 
> 
> 
> On Nov 28, 2013, at 6:35 AM, Robert J Goedman <goedman at icloud.com> wrote:
> 
>> Hi, and Happy Thanksgiving for those that celebrate it!
>> 
>> If Peter is right (and I expect he is, but will experiment a bit more if the setting can be updated while R.app is running and take effect immediately), I would suggest for now folks just use 'defaults ...' from a terminal window if they encounter these issues.
>> 
>> Once we understand better what might be affected by allowing the sleep mode we can possibly refine that approach.
>> 
>> Regards,
>> Rob
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From hwborchers at gmail.com  Sat Nov 30 14:54:47 2013
From: hwborchers at gmail.com (Hans W Borchers)
Date: Sat, 30 Nov 2013 14:54:47 +0100
Subject: [R-SIG-Mac] Inaccurate inaccuracies on Mac only?
Message-ID: <CAML4n3M6Gc2o5vycEeYhcUgTjB6eSHQGe0x3u9+ef=-nMBqQGg@mail.gmail.com>

Dear R Mac colleagues,

when I am running the following piece of code on Ubuntu Linux 12.04 LTS or on
Windows 7 -- with R 3.0.2 --, I get the results as indicated:

    set.seed(8237)
    x <- runif(32, -1, 1)
    y <- runif(32, -1, 1)
    u <- cbind(x[1], y[1])

    u1 <- u %*% t(u)
    u2 <- apply(u * u, 1, sum)
    sqrt(u2 + u2 - 2*u1)
    ##      [,1]
    ## [1,]  NaN
    ## Warning message:
    ##    In sqrt(u2 + u2 - 2 * u1) : NaNs produced
    u2 + u2 - 2*u1
    ##               [,1]
    ## [1,] -2.220446e-16

Theoretically, the last value should be zero. Of course, I am *not* surprised
to see this is not the case under finite precision arithmetics.

But what did surprise me was that under Mac OS X 10.6 and R 3.0.2 I get the
following, exact results:

    set.seed(8237)
    x <- runif(32, -1, 1)
    y <- runif(32, -1, 1)
    u <- cbind(x[1], y[1])

    u1 <- u %*% t(u)
    u2 <- apply(u * u, 1, sum)
    sqrt(u2 + u2 - 2*u1)
    ##      [,1]
    ## [1,]    0
    u2 + u2 - 2*u1
    ##      [,1]
    ## [1,]    0

I always thought that all these systems and versions comply to the IEEE
floating point standard and return the same (accurate or inaccurate) answers.

The problem here is: When I test a package on Mac, I cannot be sure it will
run without errors on other systems. Actully, I found this when running some
examples from help pages, written on the Mac.

Was I wrong, or is there something special about the Mac version of R ?

Many thanks
Hans Werner


