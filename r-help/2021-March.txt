From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Mar  1 00:55:08 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Sun, 28 Feb 2021 17:55:08 -0600
Subject: [R] Making model predictions
In-Reply-To: <1a0badbb-14ab-66b5-ff25-702caea57faa@sapo.pt>
References: <002f01d70d16$c0d6c060$42844120$.ref@sbcglobal.net>
 <002f01d70d16$c0d6c060$42844120$@sbcglobal.net>
 <1a0badbb-14ab-66b5-ff25-702caea57faa@sapo.pt>
Message-ID: <001301d70e2d$25f83660$71e8a320$@sbcglobal.net>

Rui

Actually yes.  I was able to work this into my shiny app this afternoon. 

Thank you

Jeff

-----Original Message-----
From: Rui Barradas <ruipbarradas at sapo.pt> 
Sent: Sunday, February 28, 2021 5:26 AM
To: reichmanj at sbcglobal.net; R-help at r-project.org
Subject: Re: [R] Making model predictions

Hello,

Are you looking for this?


newd <- data.frame(
   Class = '1st',
   Sex = 'Male',
   Age = 'Child'
)
predict(m, newdata = newd, type = 'raw')
#            No       Yes
#[1,] 0.3169345 0.6830655


With the default type = 'class' the result is

predict(m, newdata = newd)
#[1] Yes
#Levels: No Yes


Hope this helps,

Rui Barradas

?s 14:42 de 27/02/21, Jeff Reichman escreveu:
> R User Forum
> 
> Is there a better way than grabbing individual cell values from a 
> model output to make predictions. For example the output from the 
> following Na?ve Bayes model
> 
> library(e1071)
> 
> ## Example of using a contingency table:
> data(Titanic)
> m <- naiveBayes(Survived ~ ., data = Titanic) m
> 
> will produce the following results:
> 
> Call:
> naiveBayes.formula(formula = Survived ~ ., data = Titanic)
> 
> A-priori probabilities:
> Survived
>        No      Yes
> 0.676965 0.323035
> 
> Conditional probabilities:
>          Class
> Survived        1st        2nd        3rd       Crew
>       No  0.08187919 0.11208054 0.35436242 0.45167785
>       Yes 0.28551336 0.16596343 0.25035162 0.29817159
> 
>          Sex
> Survived       Male     Female
>       No  0.91543624 0.08456376
>       Yes 0.51617440 0.48382560
> 
>          Age
> Survived      Child      Adult
>       No  0.03489933 0.96510067
>       Yes 0.08016878 0.91983122
> 
> Say I want to calculate the probability of P(survival = No | Class = 
> 1st, Sex = Male, and Age= Child).
> 
> While I  can set an object (e.g. myObj <- m$tables$Class[1,1])  to the 
> respective cell and perform the calculation, there must be a better 
> way, as I continue to learn R.
> 
> Jeff
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From @purd|e@@ @end|ng |rom gm@||@com  Mon Mar  1 01:52:54 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Mon, 1 Mar 2021 13:52:54 +1300
Subject: [R] Image processing in R for BMI calculation
In-Reply-To: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
References: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
Message-ID: <CAB8pepxYz=zrnKSLaPLp3BE9nZz_8qgfw_1qqJ4pVuY2b4LQxQ@mail.gmail.com>

Hi Paul,

If the background is relatively uniform:
Then a simple algorithm could be used, to distinguish foreground from
background points.
Essentially, returning a logical matrix.

Otherwise, I'm assuming that suitable pooling/convolution operations
could be used for this purpose.

Then you could estimate *relative* measures of height and mass from
the logical matrix.
(With more precise measures being possible, if you know the image scales).

There are a number of R packages for reading images.
Currently, I mainly use Simon Urbanek's package, "png".

I'm currently creating a package with support for pooling/convolution
operations, and related utility functions.
However, it's not ready yet.

Another option is Jeroen Ooms' package, "magick".


best,
B.


On Mon, Mar 1, 2021 at 5:39 AM Paul Bernal <paulbernal07 at gmail.com> wrote:
>
> Hello everyone,
>
> Does anyone know about any package for image processing, for example, to
> calculate body mass index pased on a picture, silouette or image.
>
> Any guidance will be greatly appreciated.
>
> Best regards,
>
> Paul
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@oknz @end|ng |rom gm@||@com  Mon Mar  1 12:23:28 2021
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Tue, 2 Mar 2021 00:23:28 +1300
Subject: [R] Image processing in R for BMI calculation
In-Reply-To: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
References: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
Message-ID: <CABcYAdJiC90yT0nRR2ZwgRMZw3Yo=6mNyYdE2y03f-ToXTVLNg@mail.gmail.com>

"Body Mass Index" is a rather bizarre thing:
body.mass.in.kg / height.in.m^2
I have never been able to find any biological
or physical meaning for this.  Yet clinicians
are solemnly advised to measure the weight to
the nearest 0.1kg and the height to the
nearest 0.1cm.

How do you propose to determine the weight from
a single image?  Even an R package cannot perform magic.


On Mon, 1 Mar 2021 at 05:39, Paul Bernal <paulbernal07 at gmail.com> wrote:

> Hello everyone,
>
> Does anyone know about any package for image processing, for example, to
> calculate body mass index pased on a picture, silouette or image.
>
> Any guidance will be greatly appreciated.
>
> Best regards,
>
> Paul
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m||net@ @end|ng |rom tut@@|o  Mon Mar  1 15:17:09 2021
From: m||net@ @end|ng |rom tut@@|o (T. A. Milne)
Date: Mon, 1 Mar 2021 15:17:09 +0100 (CET)
Subject: [R] Image processing in R for BMI calculation
Message-ID: <MUi8_wm--3-2@tuta.io>

"Body Mass Index" is a rather bizarre thing:body.mass.in.kg / height.in.m^2I have never been able to find any biologicalor physical meaning for this.  Yet cliniciansare solemnly advised to measure the weight tothe nearest 0.1kg and the height to thenearest 0.1cm.How do you propose to determine the weight froma single image?  Even an R package cannot perform magic.On Mon, 1 Mar 2021 at 05:39, Paul Bernal <paulbernal07 at gmail.com> <mailto:paulbernal07 at gmail.com> wrote:

> Hello everyone,Does anyone know about any package for image processing, for example, tocalculate body mass index pased on a picture, silouette or image.Any guidance will be greatly appreciated.Best regards,Paul
>

A quick search with the terms "BMI flawed" produces an enormous list of hits pointing out the problems with BMI as an index.? Here's one from a dozen or so years ago:

https://www.npr.org/templates/story/story.php?storyId=106268439

And a quote from that piece:

"The BMI was introduced in the early 19th century by a Belgian named Lambert Adolphe Jacques Quetelet. He was a mathematician, not a physician. He produced the formula to give a quick and easy way to measure the degree of obesity of the general population to assist the government in allocating resources. In other words, it is a 200-year-old hack."
As an index of obesity in individuals, BMI has some glaring flaws.



- T. Arthur Milne


From u@er2021 @end|ng |rom r-project@org  Mon Mar  1 08:34:23 2021
From: u@er2021 @end|ng |rom r-project@org (useR! 2021 global)
Date: Mon, 1 Mar 2021 08:34:23 +0100
Subject: [R] Call for Abstracts: useR! 2021
Message-ID: <CAMZ-NW7UDqnhyVGPN4T50UhpYY7oLvdiPhMwMdVFyL3enSwk1A@mail.gmail.com>

Hello all,

submissions for useR! 2021 are open until March 15th.

You can submit an abstract for a regular talk, an elevator pitch (that
would be the equivalent of a poster at an in-person conference), a panel,
or an incubator session.

Full details here:
https://user2021.r-project.org/participation/call-for-abstracts/

Abstract submission: Jan 25?Mar 15

Deadline for video, blogs, scripts: Jun 20

Registration opens: Apr 15 (rates depend on location and employment, from 0
to 100 USD, https://user2021.r-project.org/participation/registration/)

Conference dates: July 05?09 (virtual)

useR! call for abstracts on Twitter:
https://twitter.com/_useRconf/status/1354352011978956806?s=09

Please share the announcement with relevant units.



Thank you and hope to see you soon!

On behalf of the useR! Program Committee,

Dorothea Hug Peter


-- 

*useR! 2021 - user2021 at r-project.org <user2021 at r-project.org>*
*user2021.r-project.org <http://user2021.r-project.org/> - @_useRConf
<https://twitter.com/_useRConf> - LinkedIn Profile
<https://www.linkedin.com/company/user-conf>*

	[[alternative HTML version deleted]]

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From dc@r|@on @end|ng |rom t@mu@edu  Mon Mar  1 21:29:35 2021
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Mon, 1 Mar 2021 14:29:35 -0600
Subject: [R] Command history
In-Reply-To: <440e200c-1ce9-b05d-87f5-cb83d3947eec@lisse.NA>
References: <9a4dc0afa8944b2f81c7a40c68b73e17@ugent.be>
 <440e200c-1ce9-b05d-87f5-cb83d3947eec@lisse.NA>
Message-ID: <CAE-dL2ot2O=95jKEsnhXmvzsX6JBHvY66zBa7xz3VryScrByfQ@mail.gmail.com>

On the Mac there can be 2 files.  The R Studio uses .Rhistory, but Rapp
uses .Rapp.history.

David L Carlson

On Sun, Feb 28, 2021 at 9:06 AM Dr Eberhard W Lisse <el at lisse.na> wrote:

> On the Mac it is ~/.Rhistory
>
> el
>
> On 2021-02-28 15:39 , Mahmood Naderan-Tahan wrote:
> > Hi
> >
> > May I know where is the location of commands we used in R in the history?
> >
> >
> > Regards,
> > Mahmood--
> Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
> el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
> PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
> 10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!SUf5kuq252PAyFzTK-iHj_UuxwZnkuU_IN9jLFqA2A4KEY2Tg5h4iIQNLWMbd-s$
> PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!SUf5kuq252PAyFzTK-iHj_UuxwZnkuU_IN9jLFqA2A4KEY2Tg5h4iIQNnW6K_7Y$
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From e| @end|ng |rom ||@@e@NA  Mon Mar  1 21:38:18 2021
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Mon, 1 Mar 2021 22:38:18 +0200
Subject: [R] Command history
In-Reply-To: <CAE-dL2ot2O=95jKEsnhXmvzsX6JBHvY66zBa7xz3VryScrByfQ@mail.gmail.com>
References: <9a4dc0afa8944b2f81c7a40c68b73e17@ugent.be>
 <440e200c-1ce9-b05d-87f5-cb83d3947eec@lisse.NA>
 <CAE-dL2ot2O=95jKEsnhXmvzsX6JBHvY66zBa7xz3VryScrByfQ@mail.gmail.com>
Message-ID: <f8c0a705-5e50-b173-5c20-e0969bd7b034@lisse.NA>

I don't use R.app.

And as I wrote later, there are a number of .Rhistory so it depends
on where you start R/RStudio from.


el

On 2021-03-01 22:29 , David Carlson wrote:
> On the Mac there can be 2 files.? The R Studio uses .Rhistory, but Rapp
> uses .Rapp.history.
> 
> David L Carlson
> 
> On Sun, Feb 28, 2021 at 9:06 AM Dr Eberhard W Lisse <el at lisse.na
> <mailto:el at lisse.na>> wrote:
> 
>     On the Mac it is ~/.Rhistory
> 
>     el
> 
>     On 2021-02-28 15:39 , Mahmood Naderan-Tahan wrote:
>     > Hi
>     >
>     > May I know where is the location of commands we used in R in the
>     history?
>     >
>     >
>     > Regards,
>     > Mahmood--
>     Dr. Eberhard W. Lisse? ?\? ? ? ? ?/? ? ? ?Obstetrician & Gynaecologist
>     el at lisse.NA? ? ? ? ? ? ?/ *? ? ? |? Telephone: +264 81 124 6733 (cell)
>     PO Box 8421 Bachbrecht? \? ? ? /? If this email is signed with GPG/PGP
>     10007, Namibia? ? ? ? ? ?;____/ Sect 20 of Act No. 4 of 2019 may apply
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!SUf5kuq252PAyFzTK-iHj_UuxwZnkuU_IN9jLFqA2A4KEY2Tg5h4iIQNLWMbd-s$
>     <https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!SUf5kuq252PAyFzTK-iHj_UuxwZnkuU_IN9jLFqA2A4KEY2Tg5h4iIQNLWMbd-s$>
> 
>     PLEASE do read the posting guide
>     https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!SUf5kuq252PAyFzTK-iHj_UuxwZnkuU_IN9jLFqA2A4KEY2Tg5h4iIQNnW6K_7Y$
>     <https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!SUf5kuq252PAyFzTK-iHj_UuxwZnkuU_IN9jLFqA2A4KEY2Tg5h4iIQNnW6K_7Y$>
> 
>     and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From drj|m|emon @end|ng |rom gm@||@com  Mon Mar  1 22:23:24 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 2 Mar 2021 08:23:24 +1100
Subject: [R] Image processing in R for BMI calculation
In-Reply-To: <CABcYAdJiC90yT0nRR2ZwgRMZw3Yo=6mNyYdE2y03f-ToXTVLNg@mail.gmail.com>
References: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
 <CABcYAdJiC90yT0nRR2ZwgRMZw3Yo=6mNyYdE2y03f-ToXTVLNg@mail.gmail.com>
Message-ID: <CA+8X3fWBDCnHqmS-FfW457SCLAypnjM5mqfn8izCzZO1cMFK+Q@mail.gmail.com>

I must agree with the criticism of BMI as a diagnostic index. It is
easy to tell if a person is - ahem - wide and not very high with a
single glance. These elementary parameters can easily be deduced from
an image of said person. However, it does not convey that essential
ratio of muscle to - ahem - adipose tissue that is the stated reason
for its prominence. I suggest an older, but more valid, index that was
used in the identification of witches. Simply tie the person's hands
behind their back and throw him or her into the deep end of the pool.
Time to drowning is the response variable and I am certain that those
now chastised for their adipose tissue will vastly prefer it.

Jim

On Mon, Mar 1, 2021 at 10:24 PM Richard O'Keefe <raoknz at gmail.com> wrote:
>
> "Body Mass Index" is a rather bizarre thing:
> body.mass.in.kg / height.in.m^2
> I have never been able to find any biological
> or physical meaning for this.  Yet clinicians
> are solemnly advised to measure the weight to
> the nearest 0.1kg and the height to the
> nearest 0.1cm.
>
> How do you propose to determine the weight from
> a single image?  Even an R package cannot perform magic.
>
>
> On Mon, 1 Mar 2021 at 05:39, Paul Bernal <paulbernal07 at gmail.com> wrote:
>
> > Hello everyone,
> >
> > Does anyone know about any package for image processing, for example, to
> > calculate body mass index pased on a picture, silouette or image.
> >
> > Any guidance will be greatly appreciated.
> >
> > Best regards,
> >
> > Paul
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Mar  1 22:42:15 2021
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 1 Mar 2021 21:42:15 +0000
Subject: [R] Image processing in R for BMI calculation
In-Reply-To: <CA+8X3fWBDCnHqmS-FfW457SCLAypnjM5mqfn8izCzZO1cMFK+Q@mail.gmail.com>
References: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
 <CABcYAdJiC90yT0nRR2ZwgRMZw3Yo=6mNyYdE2y03f-ToXTVLNg@mail.gmail.com>,
 <CA+8X3fWBDCnHqmS-FfW457SCLAypnjM5mqfn8izCzZO1cMFK+Q@mail.gmail.com>
Message-ID: <MN2PR03MB51673736D5548A859E648A3CE29A9@MN2PR03MB5167.namprd03.prod.outlook.com>

Colleagues,

BMI has is failures, but it has demonstrated utility. BMI predicts multiple outcome measures including cardiovascular disease and mortality. Don't through out a useful metric because it is not the perfect metric. 

As to why BMI is computed as weight/height^2, it can be shown that dividing height by the square of weight decreases the correlation between weight and height. The optimum exponent (i.e. the power that most effectively minimizes the correlation between weight and height) is not the same in men and women and it differs by race. In general an exponent of 2.0 is best for men; for women an exponent of 2.2 is a bit better than 2.0.

In any event, don't let the perfect get in the way of the good.

John


John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)



________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Jim Lemon <drjimlemon at gmail.com>
Sent: Monday, March 1, 2021 4:23 PM
To: Richard O'Keefe; r-help mailing list
Subject: Re: [R] Image processing in R for BMI calculation

I must agree with the criticism of BMI as a diagnostic index. It is
easy to tell if a person is - ahem - wide and not very high with a
single glance. These elementary parameters can easily be deduced from
an image of said person. However, it does not convey that essential
ratio of muscle to - ahem - adipose tissue that is the stated reason
for its prominence. I suggest an older, but more valid, index that was
used in the identification of witches. Simply tie the person's hands
behind their back and throw him or her into the deep end of the pool.
Time to drowning is the response variable and I am certain that those
now chastised for their adipose tissue will vastly prefer it.

Jim

On Mon, Mar 1, 2021 at 10:24 PM Richard O'Keefe <raoknz at gmail.com> wrote:
>
> "Body Mass Index" is a rather bizarre thing:
> body.mass.in.kg / height.in.m^2
> I have never been able to find any biological
> or physical meaning for this.  Yet clinicians
> are solemnly advised to measure the weight to
> the nearest 0.1kg and the height to the
> nearest 0.1cm.
>
> How do you propose to determine the weight from
> a single image?  Even an R package cannot perform magic.
>
>
> On Mon, 1 Mar 2021 at 05:39, Paul Bernal <paulbernal07 at gmail.com> wrote:
>
> > Hello everyone,
> >
> > Does anyone know about any package for image processing, for example, to
> > calculate body mass index pased on a picture, silouette or image.
> >
> > Any guidance will be greatly appreciated.
> >
> > Best regards,
> >
> > Paul
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432633266%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=h%2FZ9zAI4aad5GEtvB1H9BoN4bxRYnATV%2Fds7r8D2s04%3D&amp;reserved=0
> > PLEASE do read the posting guide
> > https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432633266%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=2IvMsdifWeGaAyBNT%2F7695rmNX6O1Pb3G90%2FlrpU0KA%3D&amp;reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432633266%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=h%2FZ9zAI4aad5GEtvB1H9BoN4bxRYnATV%2Fds7r8D2s04%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432643223%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=Ht2zAvvZpRhQ%2FKwjJXEbPreJd2RleNgzjD%2FhdbXhQc0%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432643223%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=6hUDWapuTlwnbSWTupkoiE6b9%2FyYxZIxjkJitJRZNiE%3D&amp;reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432643223%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=Ht2zAvvZpRhQ%2FKwjJXEbPreJd2RleNgzjD%2FhdbXhQc0%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Mon Mar  1 23:02:34 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 1 Mar 2021 14:02:34 -0800
Subject: [R] Image processing in R for BMI calculation
In-Reply-To: <MN2PR03MB51673736D5548A859E648A3CE29A9@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
 <CABcYAdJiC90yT0nRR2ZwgRMZw3Yo=6mNyYdE2y03f-ToXTVLNg@mail.gmail.com>
 <CA+8X3fWBDCnHqmS-FfW457SCLAypnjM5mqfn8izCzZO1cMFK+Q@mail.gmail.com>
 <MN2PR03MB51673736D5548A859E648A3CE29A9@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <CAGxFJbRKye4t3t7=RtHf8szKTnNt+juWZv00jSpRxMSaKvN45g@mail.gmail.com>

This discussion is completely offr topic here. Please take it elsewhere.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Mar 1, 2021 at 1:42 PM Sorkin, John <jsorkin at som.umaryland.edu>
wrote:

> Colleagues,
>
> BMI has is failures, but it has demonstrated utility. BMI predicts
> multiple outcome measures including cardiovascular disease and mortality.
> Don't through out a useful metric because it is not the perfect metric.
>
> As to why BMI is computed as weight/height^2, it can be shown that
> dividing height by the square of weight decreases the correlation between
> weight and height. The optimum exponent (i.e. the power that most
> effectively minimizes the correlation between weight and height) is not the
> same in men and women and it differs by race. In general an exponent of 2.0
> is best for men; for women an exponent of 2.2 is a bit better than 2.0.
>
> In any event, don't let the perfect get in the way of the good.
>
> John
>
>
> John David Sorkin M.D., Ph.D.
> Professor of Medicine
> Chief, Biostatistics and Informatics
> University of Maryland School of Medicine Division of Gerontology and
> Geriatric Medicine
> Baltimore VA Medical Center
> 10 North Greene Street
> GRECC (BT/18/GR)
> Baltimore, MD 21201-1524
> (Phone) 410-605-7119
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>
>
>
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Jim Lemon <
> drjimlemon at gmail.com>
> Sent: Monday, March 1, 2021 4:23 PM
> To: Richard O'Keefe; r-help mailing list
> Subject: Re: [R] Image processing in R for BMI calculation
>
> I must agree with the criticism of BMI as a diagnostic index. It is
> easy to tell if a person is - ahem - wide and not very high with a
> single glance. These elementary parameters can easily be deduced from
> an image of said person. However, it does not convey that essential
> ratio of muscle to - ahem - adipose tissue that is the stated reason
> for its prominence. I suggest an older, but more valid, index that was
> used in the identification of witches. Simply tie the person's hands
> behind their back and throw him or her into the deep end of the pool.
> Time to drowning is the response variable and I am certain that those
> now chastised for their adipose tissue will vastly prefer it.
>
> Jim
>
> On Mon, Mar 1, 2021 at 10:24 PM Richard O'Keefe <raoknz at gmail.com> wrote:
> >
> > "Body Mass Index" is a rather bizarre thing:
> > body.mass.in.kg / height.in.m^2
> > I have never been able to find any biological
> > or physical meaning for this.  Yet clinicians
> > are solemnly advised to measure the weight to
> > the nearest 0.1kg and the height to the
> > nearest 0.1cm.
> >
> > How do you propose to determine the weight from
> > a single image?  Even an R package cannot perform magic.
> >
> >
> > On Mon, 1 Mar 2021 at 05:39, Paul Bernal <paulbernal07 at gmail.com> wrote:
> >
> > > Hello everyone,
> > >
> > > Does anyone know about any package for image processing, for example,
> to
> > > calculate body mass index pased on a picture, silouette or image.
> > >
> > > Any guidance will be greatly appreciated.
> > >
> > > Best regards,
> > >
> > > Paul
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432633266%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=h%2FZ9zAI4aad5GEtvB1H9BoN4bxRYnATV%2Fds7r8D2s04%3D&amp;reserved=0
> > > PLEASE do read the posting guide
> > >
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432633266%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=2IvMsdifWeGaAyBNT%2F7695rmNX6O1Pb3G90%2FlrpU0KA%3D&amp;reserved=0
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432633266%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=h%2FZ9zAI4aad5GEtvB1H9BoN4bxRYnATV%2Fds7r8D2s04%3D&amp;reserved=0
> > PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432643223%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=Ht2zAvvZpRhQ%2FKwjJXEbPreJd2RleNgzjD%2FhdbXhQc0%3D&amp;reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432643223%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=6hUDWapuTlwnbSWTupkoiE6b9%2FyYxZIxjkJitJRZNiE%3D&amp;reserved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C58f4e3f9226c4ac456cf08d8dcf8532e%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502306432643223%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=Ht2zAvvZpRhQ%2FKwjJXEbPreJd2RleNgzjD%2FhdbXhQc0%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Mon Mar  1 23:02:01 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Tue, 2 Mar 2021 11:02:01 +1300
Subject: [R] Image processing in R for BMI calculation
In-Reply-To: <MN2PR03MB51673736D5548A859E648A3CE29A9@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
 <CABcYAdJiC90yT0nRR2ZwgRMZw3Yo=6mNyYdE2y03f-ToXTVLNg@mail.gmail.com>
 <CA+8X3fWBDCnHqmS-FfW457SCLAypnjM5mqfn8izCzZO1cMFK+Q@mail.gmail.com>
 <MN2PR03MB51673736D5548A859E648A3CE29A9@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <CAB8pepx_h6NEoJ9toiUXHYT4hXdhn1zt2CbpUhGYsAo-LzK-4w@mail.gmail.com>

I can't help but feel that a discussion on the merit of BMI is a
digression, from the OP's question.
In addition, to being of no relevance to "R Programming".

In relation to Richard's technical comments:
As per my previous post, it is possible to get *relative" measures.
(Assuming the images are not on a standardized scale, which they could be).

In relation to Jim's anatomical comments:
An improved algorithm could evaluate a subject's body type.
In addition to factoring in gender, ethnic characteristics and age.

In any case, I don't see why image-based classification is any less
worthwhile than conclusions based on timeseries plots and
scatterplots...


From @v|gro@@ @end|ng |rom ver|zon@net  Tue Mar  2 01:04:46 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 1 Mar 2021 19:04:46 -0500
Subject: [R] Help Required for R Markdown function.
In-Reply-To: <79258e3d-f3df-450b-a131-ad35cf9a01c3@email.android.com>
References: <078a01d70e1d$bd9cf6a0$38d6e3e0$@verizon.net>
 <79258e3d-f3df-450b-a131-ad35cf9a01c3@email.android.com>
Message-ID: <071a01d70ef7$a7dda230$f798e690$@verizon.net>

Calum,

 

Thanks for your thoughts. As mentioned, I fixed the problem. I actually was using require() and also tried library() but the problem was elsewhere as my R installation and startup seemed to no longer have variables set properly to find packages remotely or locally.

 

And yes, I made a new empty markdown but as it asks for nothing, it has no problems ?

 

 

From: CALUM POLWART <cpolwart at chemo.org.uk> 
Sent: Monday, March 1, 2021 2:31 AM
To: Avi Gross <avigross at verizon.net>
Cc: 'R. Help Mailing List' <r-help at r-project.org>
Subject: Re: [R] Help Required for R Markdown function.

 

Sounds like you have an install.packages("tidyverse") line in your Rmd rather than library (tidyverse)

 

Does this happen on a Rmd example created by doing File/New/R Markdown

 

With no changes?

 

 

 

On 28 Feb 2021 22:04, Avi Gross via R-help <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:

I am sure you can get more done with a caret than a stick. I need a stick for another problem, though. 

A serious question. I somehow upset my R/RSTUDIO setup while trying to see why a markdown only allowed me to save an HTML version, not PDF and DOC as it used to. It now fails on any such document with a code that indicates it is not set to find a CRAN mirror: 

It seems to be upset by a simple call to get the tidyverse loaded and may succeed in one sense but not continue: 

" Installing package into ?C:/Users/avid2016/Documents/R/win-library/4.0? 
(as ?lib? is unspecified) 
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.0/tidyverse_1.3.0.zip' 
Content type 'application/zip' length 439972 bytes (429 KB) 
downloaded 429 KB 

package ?tidyverse? successfully unpacked and MD5 sums checked 
..." 

The R Markdown lower console window says: 

"Error in contrib.url(repos, "source") : trying to use CRAN without setting a mirror calls <Anonymous> ... 
withVisible -> eval -> eval install.packages -> contrib.url Exection halted" 

I have done some work that failed. I am running on windows with the latest versions of both R and RSTUDIO after removing all old versions and re-installing both. I have seen hints I need to set some definitions in a .Rprofile or so and tried but it continues to fail. So I now can knit nothing! 

Anyone have a pointer on problems like this? My next attempt would be to reinstall the programs on another hard disk entirely in case the problem is in my folder structure of ~/R and below but I dod not want to toss years of work because of one errant configuration file or the lack thereof. 

Thanks in advance for any advice. It may be something trivial such as kit not knowing where to place a library so it puts it into a temp area? 

Avi 

-----Original Message----- 
From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of John Kane 
Sent: Saturday, February 27, 2021 3:07 PM 
To: Kishor raut <rautkishor01 at gmail.com <mailto:rautkishor01 at gmail.com> > 
Cc: R. Help Mailing List <r-help at r-project.org <mailto:r-help at r-project.org> > 
Subject: Re: [R] Help Required for R Markdown function. 

The "confusionMatrix" function appears to be from the 'caret' package. 
Have you loaded 'caret' with the library(caret) command? 

On Sat, 27 Feb 2021 at 14:20, Kishor raut <rautkishor01 at gmail.com <mailto:rautkishor01 at gmail.com> > wrote: 

> Respected Sir, 
> 
> I Mr Kishor Tried to get help online but wont found the solution so 
> writting an email. 
> 
> Step1: While writting in rmarkdown all codes get executted very well 
> till the fuction Confusionmatrix were written on it. 
> 
> Step2: As confusionmatrix command inserted following error is on 
> screen board 
> 
> 
> processing file: RMarkdown.Rmd 
>   |.....                                                                 | 
>   7% 
>   ordinary text without R code 
> 
>   |.........                                                             | 
>  13% 
> label: unnamed-chunk-1 
>   |..............                                                        | 
>  20% 
>   ordinary text without R code 
> 
>   |...................                                                   | 
>  27% 
> label: unnamed-chunk-2 
>   |.......................                                               | 
>  33% 
>   ordinary text without R code 
> 
>   |............................                                          | 
>  40% 
> label: unnamed-chunk-3 
>   |.................................                                     | 
>  47% 
>   ordinary text without R code 
> 
>   |.....................................                                 | 
>  53% 
> label: unnamed-chunk-4 
>   |..........................................                            | 
>  60% 
>   ordinary text without R code 
> 
>   |...............................................                       | 
>  67% 
> label: unnamed-chunk-5 
>   |...................................................                   | 
>  73% 
>   ordinary text without R code 
> 
>   |........................................................              | 
>  80% 
> label: unnamed-chunk-6 
>   |.............................................................         | 
>  87% 
>   ordinary text without R code 
> 
>   |.................................................................     | 
>  93% 
> label: unnamed-chunk-7 
> Quitting from lines 98-104 (RMarkdown.Rmd) Error in 
> confusionMatrix(p1, train$CTestresult) : 
>   could not find function "confusionMatrix" 
> Calls: <Anonymous> ... handle -> withCallingHandlers -> withVisible -> 
> eval 
> -> eval 
> 
> Execution halted 
> 
> Step4: As codes were written these 
> 
> 
> Using function ?sample? the data takes into sample of the specified 
> size from the stored data ```{r} 
> set.seed(1234) 
> ind<-sample(2,nrow(FEVER1),replace=TRUE, pro = c(0.7,0.3)) 
> train<-FEVER1[ind==1,] test<-FEVER1[ind==2,] ``` 
> 
> Application of Random Forest 
> 
> ```{r} 
> library(randomForest) 
> set.seed(123) 
> rfmodel<-randomForest(CTestresult~.,data = train,prox=TRUE)    # Random 
> Forest Model 
> plot(rfmodel,main="RandomForest Model") 
> print(rfmodel,train)                    # Printing Outcome of 'model for 
> Training Data 
> 
> ``` 
> 
> Prediction using Randome Forest Model 
> ```{r} 
> # Prediction  of RandomForest Intial Model for Test and Train Data 
> 
> ptrain1<-predict(rfmodel,train)              # Predicting model Prediction 
> On Training Data 
>   # First Six Outcomes with prediction 
> head(ptrain1)                              # Printing First Six Prediction 
> using Random Forest Model 
> head(train$CTestresult)                       # Printing First Six (6) 
> Actual outcomes 
> 
> ``` 
> 
> 
> Tuning Model: 
> Tuning of Machine learning model is important step for building good 
> model for best outcome of research. 
> 
> ```{r} 
> # Tunning RandomForest  Model using Algorithm 
> 
> t<-tuneRF(train[,-11],train$CTestresult, mtryStart = 2,ntreeTry = 100, 
> stepFactor =2,improve = 0.051,trace = TRUE, plot = TRUE, doBest=TRUE) 
> 
> 
> ``` 
> 
> Building New Model: 
> 
> New model was build on the basis of tunned model parameters and controls. 
> 
> ```{r} 
> # New Model After Tuning Random Forest Model 
> 
> rf1<-randomForest(CTestresult~.,data = train,ntree = 100, mtry = 8, 
> importance = TRUE,proximity = TRUE) 
> 
> print(rf1) 
> ``` 
> 
> Prediction and Confusion MAtrix: 
> 
> outcome of model will mesuare with the help of predictive outcomes 
> with the help of confusion matrix. 
> 
> ```{r} 
> # Prediction using Random Forest and Confusion Matrix for Train Data 
> p1<-predict(rf1,train) 
> cmatrix<-confusionMatrix(p1,train$CTestresult) 
> cmatrix 
> 
> 
> ``` 
> 
> 
> I will great thank full if you will help me for to remove the error. 
> 
> 
> 
> 
> -- 
> *Kind Regards* 
> 
> Kishor Raut 
> *Cell No.-07387706552* 
> 
>         [[alternative HTML version deleted]] 
> 
> ______________________________________________ 
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help 
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> and provide commented, minimal, self-contained, reproducible code. 
> 


-- 
John Kane 
Kingston ON Canada 

[[alternative HTML version deleted]] 

______________________________________________ 
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help 
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html 
and provide commented, minimal, self-contained, reproducible code. 

______________________________________________ 
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see 
https://stat.ethz.ch/mailman/listinfo/r-help 
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html 
and provide commented, minimal, self-contained, reproducible code. 




	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Mar  2 01:25:00 2021
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 2 Mar 2021 00:25:00 +0000
Subject: [R] Image processing in R for BMI calculation
In-Reply-To: <27e9c398-5425-f0ef-4cfa-63a7ba1b478a@gmx.at>
References: <CAMOcQfOPo9B3qDZhZvP8bz7eEBBB6_ds+J02W-0rEcWg6MnuUw@mail.gmail.com>
 <CABcYAdJiC90yT0nRR2ZwgRMZw3Yo=6mNyYdE2y03f-ToXTVLNg@mail.gmail.com>
 <CA+8X3fWBDCnHqmS-FfW457SCLAypnjM5mqfn8izCzZO1cMFK+Q@mail.gmail.com>
 <MN2PR03MB51673736D5548A859E648A3CE29A9@MN2PR03MB5167.namprd03.prod.outlook.com>,
 <27e9c398-5425-f0ef-4cfa-63a7ba1b478a@gmx.at>
Message-ID: <MN2PR03MB51674492139F5CBDB9A12F66E2999@MN2PR03MB5167.namprd03.prod.outlook.com>

Heinz,

I can't tell you how much I appreciated your email. I firmly believe that the rules and norms of the R-help mailing list need to be respected and followed. Nevertheless, I feared that if the comments were left unquestioned people who are not familiar with BMI, its strengths weakness, and its history, might assume from the comments that the metric is worthless, and that all studies that have used it are by extension worthless. It is for this reason, and because I thought it important the people understand that the exponent of 2 in the denominator is not a arbitrary value, but rather a value with a reason that I replied. 

I hope that the larger list community will forgive the liberty I have taken with the listerver's norms. I also hope that none of the people who were part of the email chain were personally offended by my comments.

John




John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)



________________________________________
From: Heinz Tuechler <tuechler at gmx.at>
Sent: Monday, March 1, 2021 6:26 PM
To: Sorkin, John; Jim Lemon; Richard O'Keefe; T. A. Milne via R-help; Abby Spurdle
Subject: Re: [R] Image processing in R for BMI calculation

Dear All,

since Bert Gunter correctly stated that the discussion is off topic, I
answer to you only.
In my view John and Abby made very reasonable comments, while
particularly the link
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.npr.org%2Ftemplates%2Fstory%2Fstory.php%3FstoryId%3D106268439&amp;data=04%7C01%7Cjsorkin%40som.umaryland.edu%7Cd5d29291516a4b5c84d408d8dd096c00%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637502379829397742%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=MKCnjEzFyRmCrO6Efxo0s%2BTJ4cV%2B3m1FPy61MPwptE8%3D&amp;reserved=0
mentioned in the note of T. Arthur Milne seems remarkably superficial -
maybe it's just a joke?

Some examples:
"Moreover, it ignores waist size, which is a clear indicator of obesity
level." Without reference to hip?

"Because the majority of people today (and in Quetelet's time) lead
fairly sedentary lives ..." 200 years ago?

"Because the BMI is a single number between 1 and 100 (like a
percentage) ..." Try to imagine a BMI of 1, or of 100. The BMI will be
between 1 and 100, but 1 to 100 will not be its range.

"It suggests there are distinct categories of underweight, ideal,
overweight and obese, with sharp boundaries that hinge on a decimal
place." Why should categories be implied by the BMI itself?

"It is embarrassing for one of the most scientifically, technologically
and medicinally advanced nations in the world ..." That's true, at least
for my eyes. When I visited the USA, I had the impression that in many
cases you don't need a measure at all.

best regards,

Heinz

Sorkin, John wrote/hat geschrieben on/am 01.03.2021 22:42:
> Colleagues,
>
> BMI has is failures, but it has demonstrated utility. BMI predicts multiple outcome measures including cardiovascular disease and mortality. Don't through out a useful metric because it is not the perfect metric.
>
> As to why BMI is computed as weight/height^2, it can be shown that dividing height by the square of weight decreases the correlation between weight and height. The optimum exponent (i.e. the power that most effectively minimizes the correlation between weight and height) is not the same in men and women and it differs by race. In general an exponent of 2.0 is best for men; for women an exponent of 2.2 is a bit better than 2.0.
>
> In any event, don't let the perfect get in the way of the good.
>
> John
>
>
> John David Sorkin M.D., Ph.D.
> Professor of Medicine
> Chief, Biostatistics and Informatics
> University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
> Baltimore VA Medical Center
> 10 North Greene Street
> GRECC (BT/18/GR)
> Baltimore, MD 21201-1524
> (Phone) 410-605-7119
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>
>
>
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Jim Lemon <drjimlemon at gmail.com>
> Sent: Monday, March 1, 2021 4:23 PM
> To: Richard O'Keefe; r-help mailing list
> Subject: Re: [R] Image processing in R for BMI calculation
>
> I must agree with the criticism of BMI as a diagnostic index. It is
> easy to tell if a person is - ahem - wide and not very high with a
> single glance. These elementary parameters can easily be deduced from
> an image of said person. However, it does not convey that essential
> ratio of muscle to - ahem - adipose tissue that is the stated reason
> for its prominence. I suggest an older, but more valid, index that was
> used in the identification of witches. Simply tie the person's hands
> behind their back and throw him or her into the deep end of the pool.
> Time to drowning is the response variable and I am certain that those
> now chastised for their adipose tissue will vastly prefer it.
>
> Jim
>
> On Mon, Mar 1, 2021 at 10:24 PM Richard O'Keefe <raoknz at gmail.com> wrote:
>>
>> "Body Mass Index" is a rather bizarre thing:
>> body.mass.in.kg / height.in.m^2
>> I have never been able to find any biological
>> or physical meaning for this.  Yet clinicians
>> are solemnly advised to measure the weight to
>> the nearest 0.1kg and the height to the
>> nearest 0.1cm.
>>
>> How do you propose to determine the weight from
>> a single image?  Even an R package cannot perform magic.
>>
>>
>> On Mon, 1 Mar 2021 at 05:39, Paul Bernal <paulbernal07 at gmail.com> wrote:
>>
>>> Hello everyone,
>>>
>>> Does anyone know about any package for image processing, for example, to
>>> calculate body mass index pased on a picture, silouette or image.
>>>
>>> Any guidance will be greatly appreciated.
>>>
>>> Best regards,
>>>
>>> Paul
>>>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Mar  2 02:55:18 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 01 Mar 2021 17:55:18 -0800
Subject: [R] Help Required for R Markdown function.
In-Reply-To: <078a01d70e1d$bd9cf6a0$38d6e3e0$@verizon.net>
References: <CANDYgEO8V+q0YL8qNV5bHefD2zhcqPEYMz7KDJ5uA5NOWsbOHw@mail.gmail.com>
 <CAKZQJMBjRG2HSNYmQdKEy9DMC8ZnzUuKTaL2h1inrcfQJRtL0A@mail.gmail.com>
 <078a01d70e1d$bd9cf6a0$38d6e3e0$@verizon.net>
Message-ID: <E4F3964C-B7E2-4332-854C-63DF2A38CD75@dcn.davis.ca.us>

It is standard for install.packages to download packages into a temporary directory before actually installing them. That message has been there for many many years every time you install a contributed package.

You have not provided a complete copy of the errors that were generated... I am certain something else happened that was in the output you failed to show us.

While I think RStudio is a fine tool, it does sometimes make non-trivial changes to standard outputs... I recommend that you try things in RGui or R from the command line (in this case the install.packages call) and describe them as such when asking for help here to reduce possible confusion as to where the problem is coming from. If it works in RGui but not in RStudio then you probably need to get help in their community forum.

Also, don't hijack conversation threads... start your own to ask a question, and reply to it as needed. Even changing the subject line doesn't disconnect your question from the original thread in the archive (or most email programs).

On February 28, 2021 2:04:52 PM PST, Avi Gross via R-help <r-help at r-project.org> wrote:
>I am sure you can get more done with a caret than a stick. I need a
>stick for another problem, though.
>
>A serious question. I somehow upset my R/RSTUDIO setup while trying to
>see why a markdown only allowed me to save an HTML version, not PDF and
>DOC as it used to. It now fails on any such document with a code that
>indicates it is not set to find a CRAN mirror:
>
>It seems to be upset by a simple call to get the tidyverse loaded and
>may succeed in one sense but not continue:
>
>" Installing package into
>?C:/Users/avid2016/Documents/R/win-library/4.0?
>(as ?lib? is unspecified)
>trying URL
>'https://cran.rstudio.com/bin/windows/contrib/4.0/tidyverse_1.3.0.zip'
>Content type 'application/zip' length 439972 bytes (429 KB)
>downloaded 429 KB
>
>package ?tidyverse? successfully unpacked and MD5 sums checked
>..."
>
>The R Markdown lower console window says:
>
>"Error in contrib.url(repos, "source") : trying to use CRAN without
>setting a mirror calls <Anonymous> ...
>withVisible -> eval -> eval install.packages -> contrib.url Exection
>halted"
>
>I have done some work that failed. I am running on windows with the
>latest versions of both R and RSTUDIO after removing all old versions
>and re-installing both. I have seen hints I need to set some
>definitions in a .Rprofile or so and tried but it continues to fail. So
>I now can knit nothing!
>
>Anyone have a pointer on problems like this? My next attempt would be
>to reinstall the programs on another hard disk entirely in case the
>problem is in my folder structure of ~/R and below but I dod not want
>to toss years of work because of one errant configuration file or the
>lack thereof.
>
>Thanks in advance for any advice. It may be something trivial such as
>kit not knowing where to place a library so it puts it into a temp
>area?
>
>Avi
>
>-----Original Message-----
>From: R-help <r-help-bounces at r-project.org> On Behalf Of John Kane
>Sent: Saturday, February 27, 2021 3:07 PM
>To: Kishor raut <rautkishor01 at gmail.com>
>Cc: R. Help Mailing List <r-help at r-project.org>
>Subject: Re: [R] Help Required for R Markdown function.
>
>The "confusionMatrix" function appears to be from the 'caret' package.
>Have you loaded 'caret' with the library(caret) command?
>
>On Sat, 27 Feb 2021 at 14:20, Kishor raut <rautkishor01 at gmail.com>
>wrote:
>
>> Respected Sir,
>>
>> I Mr Kishor Tried to get help online but wont found the solution so 
>> writting an email.
>>
>> Step1: While writting in rmarkdown all codes get executted very well 
>> till the fuction Confusionmatrix were written on it.
>>
>> Step2: As confusionmatrix command inserted following error is on 
>> screen board
>>
>>
>> processing file: RMarkdown.Rmd
>>   |.....                                                             
>   |
>>   7%
>>   ordinary text without R code
>>
>>   |.........                                                         
>   |
>>  13%
>> label: unnamed-chunk-1
>>   |..............                                                    
>   |
>>  20%
>>   ordinary text without R code
>>
>>   |...................                                               
>   |
>>  27%
>> label: unnamed-chunk-2
>>   |.......................                                           
>   |
>>  33%
>>   ordinary text without R code
>>
>>   |............................                                      
>   |
>>  40%
>> label: unnamed-chunk-3
>>   |.................................                                 
>   |
>>  47%
>>   ordinary text without R code
>>
>>   |.....................................                             
>   |
>>  53%
>> label: unnamed-chunk-4
>>   |..........................................                        
>   |
>>  60%
>>   ordinary text without R code
>>
>>   |...............................................                   
>   |
>>  67%
>> label: unnamed-chunk-5
>>   |...................................................               
>   |
>>  73%
>>   ordinary text without R code
>>
>>   |........................................................          
>   |
>>  80%
>> label: unnamed-chunk-6
>>   |.............................................................     
>   |
>>  87%
>>   ordinary text without R code
>>
>>   |................................................................. 
>   |
>>  93%
>> label: unnamed-chunk-7
>> Quitting from lines 98-104 (RMarkdown.Rmd) Error in 
>> confusionMatrix(p1, train$CTestresult) :
>>   could not find function "confusionMatrix"
>> Calls: <Anonymous> ... handle -> withCallingHandlers -> withVisible
>-> 
>> eval
>> -> eval
>>
>> Execution halted
>>
>> Step4: As codes were written these
>>
>>
>> Using function ?sample? the data takes into sample of the specified 
>> size from the stored data ```{r}
>> set.seed(1234)
>> ind<-sample(2,nrow(FEVER1),replace=TRUE, pro = c(0.7,0.3)) 
>> train<-FEVER1[ind==1,] test<-FEVER1[ind==2,] ```
>>
>> Application of Random Forest
>>
>> ```{r}
>> library(randomForest)
>> set.seed(123)
>> rfmodel<-randomForest(CTestresult~.,data = train,prox=TRUE)    #
>Random
>> Forest Model
>> plot(rfmodel,main="RandomForest Model")
>> print(rfmodel,train)                    # Printing Outcome of 'model
>for
>> Training Data
>>
>> ```
>>
>> Prediction using Randome Forest Model
>> ```{r}
>> # Prediction  of RandomForest Intial Model for Test and Train Data
>>
>> ptrain1<-predict(rfmodel,train)              # Predicting model
>Prediction
>> On Training Data
>>   # First Six Outcomes with prediction
>> head(ptrain1)                              # Printing First Six
>Prediction
>> using Random Forest Model
>> head(train$CTestresult)                       # Printing First Six
>(6)
>> Actual outcomes
>>
>> ```
>>
>>
>> Tuning Model:
>> Tuning of Machine learning model is important step for building good 
>> model for best outcome of research.
>>
>> ```{r}
>> # Tunning RandomForest  Model using Algorithm
>>
>> t<-tuneRF(train[,-11],train$CTestresult, mtryStart = 2,ntreeTry =
>100, 
>> stepFactor =2,improve = 0.051,trace = TRUE, plot = TRUE, doBest=TRUE)
>>
>>
>> ```
>>
>> Building New Model:
>>
>> New model was build on the basis of tunned model parameters and
>controls.
>>
>> ```{r}
>> # New Model After Tuning Random Forest Model
>>
>> rf1<-randomForest(CTestresult~.,data = train,ntree = 100, mtry = 8, 
>> importance = TRUE,proximity = TRUE)
>>
>> print(rf1)
>> ```
>>
>> Prediction and Confusion MAtrix:
>>
>> outcome of model will mesuare with the help of predictive outcomes 
>> with the help of confusion matrix.
>>
>> ```{r}
>> # Prediction using Random Forest and Confusion Matrix for Train Data
>> p1<-predict(rf1,train)
>> cmatrix<-confusionMatrix(p1,train$CTestresult)
>> cmatrix
>>
>>
>> ```
>>
>>
>> I will great thank full if you will help me for to remove the error.
>>
>>
>>
>>
>> --
>> *Kind Regards*
>>
>> Kishor Raut
>> *Cell No.-07387706552*
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
>--
>John Kane
>Kingston ON Canada
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From nz@h@@m @end|ng |rom gm@||@com  Tue Mar  2 08:38:58 2021
From: nz@h@@m @end|ng |rom gm@||@com (Shaami)
Date: Tue, 2 Mar 2021 12:38:58 +0500
Subject: [R] vector values substitution in an expression using label_bquote
 in ggplot()
Message-ID: <CAGR+MS7Z+DCa6OeH=oe6ikNwXaBk0VhvKmeOG=f+cTt5FZ1cGw@mail.gmail.com>

Dear Sir

I am using label_bquote() for labeling facet plots in ggplot(). I need to
write the expression a_[12], a_[13] etc for each plot. I am writing as

ggplot() + facet_grid(..., labeller=label_bquote(rows = a[1, 2:3])

The above exemplary code writes only a_[12] for each facet plot.

Could anyone please guide me about that?
Thank you

Shaami

	[[alternative HTML version deleted]]


From @tyen @end|ng |rom ntu@edu@tw  Wed Mar  3 12:00:08 2021
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Wed, 3 Mar 2021 19:00:08 +0800
Subject: [R] Column-by-column division
Message-ID: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>

I have a 10 x 2 matrix x. Like to divide the first column by s[1] and 
second column by s[2]. The following lines work but are clumsy. Any 
idea? Thanks.

 > x
 ????? [,1] [,2]
 ?[1,]??? 1?? 11
 ?[2,]??? 2?? 12
 ?[3,]??? 3?? 13
 ?[4,]??? 4?? 14
 ?[5,]??? 5?? 15
 ?[6,]??? 6?? 16
 ?[7,]??? 7?? 17
 ?[8,]??? 8?? 18
 ?[9,]??? 9?? 19
[10,]?? 10?? 20
 > s
[1] 1 2
 > t(t(x)/s)
 ????? [,1] [,2]
 ?[1,]??? 1? 5.5
 ?[2,]??? 2? 6.0
 ?[3,]??? 3? 6.5
 ?[4,]??? 4? 7.0
 ?[5,]??? 5? 7.5
 ?[6,]??? 6? 8.0
 ?[7,]??? 7? 8.5
 ?[8,]??? 8? 9.0
 ?[9,]??? 9? 9.5
[10,]?? 10 10.0


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Mar  3 12:12:57 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 3 Mar 2021 11:12:57 +0000
Subject: [R] Column-by-column division
In-Reply-To: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>
References: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>
Message-ID: <912227ef-441e-b5f6-8ed7-6af6164f17b5@sapo.pt>

Hello,

Maybe define an infix operator?


`%!%` <- function(x, y) {
   stopifnot(ncol(x) == length(y))
   t(t(x)/y)
}

x <- matrix(1:20, ncol = 2)
s <- 1:2

x %!% s
x %!% 1:4


Hope this helps,

Rui Barradas

?s 11:00 de 03/03/21, Steven Yen escreveu:
> I have a 10 x 2 matrix x. Like to divide the first column by s[1] and 
> second column by s[2]. The following lines work but are clumsy. Any 
> idea? Thanks.
> 
>  > x
>  ????? [,1] [,2]
>  ?[1,]??? 1?? 11
>  ?[2,]??? 2?? 12
>  ?[3,]??? 3?? 13
>  ?[4,]??? 4?? 14
>  ?[5,]??? 5?? 15
>  ?[6,]??? 6?? 16
>  ?[7,]??? 7?? 17
>  ?[8,]??? 8?? 18
>  ?[9,]??? 9?? 19
> [10,]?? 10?? 20
>  > s
> [1] 1 2
>  > t(t(x)/s)
>  ????? [,1] [,2]
>  ?[1,]??? 1? 5.5
>  ?[2,]??? 2? 6.0
>  ?[3,]??? 3? 6.5
>  ?[4,]??? 4? 7.0
>  ?[5,]??? 5? 7.5
>  ?[6,]??? 6? 8.0
>  ?[7,]??? 7? 8.5
>  ?[8,]??? 8? 9.0
>  ?[9,]??? 9? 9.5
> [10,]?? 10 10.0
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Mar  3 12:16:39 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 3 Mar 2021 11:16:39 +0000
Subject: [R] Column-by-column division
In-Reply-To: <912227ef-441e-b5f6-8ed7-6af6164f17b5@sapo.pt>
References: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>
 <912227ef-441e-b5f6-8ed7-6af6164f17b5@sapo.pt>
Message-ID: <f880a902-b1ff-4f21-e63c-37135c0160ac@sapo.pt>

Hello,

I forgot about sweep:


sweep(x, 2, s, '/')
sweep(x, 2, 1:4, '/')


Hope this helps,

Rui Barradas

?s 11:12 de 03/03/21, Rui Barradas escreveu:
> Hello,
> 
> Maybe define an infix operator?
> 
> 
> `%!%` <- function(x, y) {
>  ? stopifnot(ncol(x) == length(y))
>  ? t(t(x)/y)
> }
> 
> x <- matrix(1:20, ncol = 2)
> s <- 1:2
> 
> x %!% s
> x %!% 1:4
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 11:00 de 03/03/21, Steven Yen escreveu:
>> I have a 10 x 2 matrix x. Like to divide the first column by s[1] and 
>> second column by s[2]. The following lines work but are clumsy. Any 
>> idea? Thanks.
>>
>> ?> x
>> ?????? [,1] [,2]
>> ??[1,]??? 1?? 11
>> ??[2,]??? 2?? 12
>> ??[3,]??? 3?? 13
>> ??[4,]??? 4?? 14
>> ??[5,]??? 5?? 15
>> ??[6,]??? 6?? 16
>> ??[7,]??? 7?? 17
>> ??[8,]??? 8?? 18
>> ??[9,]??? 9?? 19
>> [10,]?? 10?? 20
>> ?> s
>> [1] 1 2
>> ?> t(t(x)/s)
>> ?????? [,1] [,2]
>> ??[1,]??? 1? 5.5
>> ??[2,]??? 2? 6.0
>> ??[3,]??? 3? 6.5
>> ??[4,]??? 4? 7.0
>> ??[5,]??? 5? 7.5
>> ??[6,]??? 6? 8.0
>> ??[7,]??? 7? 8.5
>> ??[8,]??? 8? 9.0
>> ??[9,]??? 9? 9.5
>> [10,]?? 10 10.0
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Wed Mar  3 12:40:17 2021
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Wed, 3 Mar 2021 19:40:17 +0800
Subject: [R] Column-by-column division
In-Reply-To: <f880a902-b1ff-4f21-e63c-37135c0160ac@sapo.pt>
References: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>
 <912227ef-441e-b5f6-8ed7-6af6164f17b5@sapo.pt>
 <f880a902-b1ff-4f21-e63c-37135c0160ac@sapo.pt>
Message-ID: <bc80bd3b-3925-d755-0b37-f290e9bec4e8@ntu.edu.tw>

Thanks to all. sweep is convenient.

On 2021/3/3 ?? 07:16, Rui Barradas wrote:
> Hello,
>
> I forgot about sweep:
>
>
> sweep(x, 2, s, '/')
> sweep(x, 2, 1:4, '/')
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 11:12 de 03/03/21, Rui Barradas escreveu:
>> Hello,
>>
>> Maybe define an infix operator?
>>
>>
>> `%!%` <- function(x, y) {
>> ?? stopifnot(ncol(x) == length(y))
>> ?? t(t(x)/y)
>> }
>>
>> x <- matrix(1:20, ncol = 2)
>> s <- 1:2
>>
>> x %!% s
>> x %!% 1:4
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 11:00 de 03/03/21, Steven Yen escreveu:
>>> I have a 10 x 2 matrix x. Like to divide the first column by s[1] 
>>> and second column by s[2]. The following lines work but are clumsy. 
>>> Any idea? Thanks.
>>>
>>> ?> x
>>> ?????? [,1] [,2]
>>> ??[1,]??? 1?? 11
>>> ??[2,]??? 2?? 12
>>> ??[3,]??? 3?? 13
>>> ??[4,]??? 4?? 14
>>> ??[5,]??? 5?? 15
>>> ??[6,]??? 6?? 16
>>> ??[7,]??? 7?? 17
>>> ??[8,]??? 8?? 18
>>> ??[9,]??? 9?? 19
>>> [10,]?? 10?? 20
>>> ?> s
>>> [1] 1 2
>>> ?> t(t(x)/s)
>>> ?????? [,1] [,2]
>>> ??[1,]??? 1? 5.5
>>> ??[2,]??? 2? 6.0
>>> ??[3,]??? 3? 6.5
>>> ??[4,]??? 4? 7.0
>>> ??[5,]??? 5? 7.5
>>> ??[6,]??? 6? 8.0
>>> ??[7,]??? 7? 8.5
>>> ??[8,]??? 8? 9.0
>>> ??[9,]??? 9? 9.5
>>> [10,]?? 10 10.0
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From h@ro|d@dor@n @end|ng |rom c@mb|um@@@e@@ment@com  Wed Mar  3 12:15:36 2021
From: h@ro|d@dor@n @end|ng |rom c@mb|um@@@e@@ment@com (Harold Doran)
Date: Wed, 3 Mar 2021 11:15:36 +0000
Subject: [R] Column-by-column division
In-Reply-To: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>
References: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>
Message-ID: <cc9cf8ca4c7a4a4381dabfde18a7602f@cambiumassessment.com>

To make sure the scalar is used instead of using the recycled vector s, maybe like this 

x <- matrix(1:20, nrow=10)
s <- c(1,2)
sapply(1:2, function(i) x[,i]/s[i])

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
Sent: Wednesday, March 3, 2021 6:00 AM
To: R-help Mailing List <r-help at r-project.org>
Subject: [R] Column-by-column division

I have a 10 x 2 matrix x. Like to divide the first column by s[1] and second column by s[2]. The following lines work but are clumsy. Any idea? Thanks.

 > x
 ????? [,1] [,2]
 ?[1,]??? 1?? 11
 ?[2,]??? 2?? 12
 ?[3,]??? 3?? 13
 ?[4,]??? 4?? 14
 ?[5,]??? 5?? 15
 ?[6,]??? 6?? 16
 ?[7,]??? 7?? 17
 ?[8,]??? 8?? 18
 ?[9,]??? 9?? 19
[10,]?? 10?? 20
 > s
[1] 1 2
 > t(t(x)/s)
 ????? [,1] [,2]
 ?[1,]??? 1? 5.5
 ?[2,]??? 2? 6.0
 ?[3,]??? 3? 6.5
 ?[4,]??? 4? 7.0
 ?[5,]??? 5? 7.5
 ?[6,]??? 6? 8.0
 ?[7,]??? 7? 8.5
 ?[8,]??? 8? 9.0
 ?[9,]??? 9? 9.5
[10,]?? 10 10.0

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com  Wed Mar  3 16:24:37 2021
From: g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com (Gayathri Nagarajan)
Date: Wed, 3 Mar 2021 07:24:37 -0800
Subject: [R] A tibble with date column appears different in shiny
Message-ID: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>

Hi Team

I have a tibble like the below :

class(us_counties)
[1] "tbl_df"     "tbl"        "data.frame"

head(us_counties)
# A tibble: 6 x 8
  date       deaths Todays_deaths county state fips
  <date>      <dbl>         <dbl> <chr>  <chr> <chr>
1 2020-03-19      0             0 Abbev~ Sout~ 45001
2 2020-03-20      0             0 Abbev~ Sout~ 45001
3 2020-03-21      0             0 Abbev~ Sout~ 45001
4 2020-03-22      0             0 Abbev~ Sout~ 45001
5 2020-03-23      0             0 Abbev~ Sout~ 45001
6 2020-03-24      0             0 Abbev~ Sout~ 45001

str(us_counties)
tibble [1,082,715 x 8] (S3: tbl_df/tbl/data.frame)
 $ date         : Date[1:1082715], format: "2020-03-19" ...
 $ deaths       : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
 $ Todays_deaths: num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
 $ county       : chr [1:1082715] "Abbeville" "Abbeville" "Abbeville"
"Abbeville" ...
 $ state        : chr [1:1082715] "South Carolina" "South Carolina" "South
Carolina" "South Carolina" ...
 $ fips         : chr [1:1082715] "45001" "45001" "45001" "45001" ...
 $ cases        : num [1:1082715] 1 1 1 1 1 1 3 4 4 4 ...
 $ Todays_cases : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
 - attr(*, "spec")=
  .. cols(
  ..   date = col_date(format = ""),
  ..   county = col_character(),
  ..   state = col_character(),
  ..   fips = col_character(),
  ..   cases = col_double(),
  ..   deaths = col_double()
  .. )
 - attr(*, ".internal.selfref")=<externalptr>
>



Now when I display this in shiny UI using a simple  command:


   # Generate an HTML table view of the data ----
   output$ttable <- renderTable({
       head(us_counties
            , n = input$obs)
   })


I get a display like the below

datedeathsTodays_deathscountystatefipscasesTodays_cases
18679.00 34.00 0.00 Abbeville South Carolina 45001 2184.00 0.00
18680.00 34.00 0.00 Abbeville South Carolina 45001 2191.00 0.00
18681.00 34.00 0.00 Abbeville South Carolina 45001 2192.00 0.00

This is the change I made

old code
========
 #x <- getURL("
https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
")
  #us_counties <- read.csv(text = x)
  # 855612 Rows , 6 columns class(us_counties)


this stopped working, so I changed to below


  urlfile="
https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
"
  #GN added 3/3
  us_counties<-read_csv(url(urlfile),col_types = list(date = col_date()))

 Please let me know how to correct this

Regards
Gayathri

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Mar  3 17:25:04 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 3 Mar 2021 16:25:04 +0000
Subject: [R] A tibble with date column appears different in shiny
In-Reply-To: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>
References: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>
Message-ID: <6a952e4a-dde4-f1d0-fa0d-43df77510326@sapo.pt>

Hello,

Your col_types argument is wrong, you only have col_date.


library(tidyverse)

urlfile <- 
"https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv"
#GN added 3/3
cols_spec <- cols(
   date = col_date(format = ""),
   county = col_character(),
   state = col_character(),
   fips = col_character(),
   cases = col_double(),
   deaths = col_double()
)

us_counties <- read_csv(url(urlfile), col_types = cols_spec)


Hope this helps,

Rui Barradas

?s 15:24 de 03/03/21, Gayathri Nagarajan escreveu:
> Hi Team
> 
> I have a tibble like the below :
> 
> class(us_counties)
> [1] "tbl_df"     "tbl"        "data.frame"
> 
> head(us_counties)
> # A tibble: 6 x 8
>    date       deaths Todays_deaths county state fips
>    <date>      <dbl>         <dbl> <chr>  <chr> <chr>
> 1 2020-03-19      0             0 Abbev~ Sout~ 45001
> 2 2020-03-20      0             0 Abbev~ Sout~ 45001
> 3 2020-03-21      0             0 Abbev~ Sout~ 45001
> 4 2020-03-22      0             0 Abbev~ Sout~ 45001
> 5 2020-03-23      0             0 Abbev~ Sout~ 45001
> 6 2020-03-24      0             0 Abbev~ Sout~ 45001
> 
> str(us_counties)
> tibble [1,082,715 x 8] (S3: tbl_df/tbl/data.frame)
>   $ date         : Date[1:1082715], format: "2020-03-19" ...
>   $ deaths       : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>   $ Todays_deaths: num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>   $ county       : chr [1:1082715] "Abbeville" "Abbeville" "Abbeville"
> "Abbeville" ...
>   $ state        : chr [1:1082715] "South Carolina" "South Carolina" "South
> Carolina" "South Carolina" ...
>   $ fips         : chr [1:1082715] "45001" "45001" "45001" "45001" ...
>   $ cases        : num [1:1082715] 1 1 1 1 1 1 3 4 4 4 ...
>   $ Todays_cases : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>   - attr(*, "spec")=
>    .. cols(
>    ..   date = col_date(format = ""),
>    ..   county = col_character(),
>    ..   state = col_character(),
>    ..   fips = col_character(),
>    ..   cases = col_double(),
>    ..   deaths = col_double()
>    .. )
>   - attr(*, ".internal.selfref")=<externalptr>
>>
> 
> 
> 
> Now when I display this in shiny UI using a simple  command:
> 
> 
>     # Generate an HTML table view of the data ----
>     output$ttable <- renderTable({
>         head(us_counties
>              , n = input$obs)
>     })
> 
> 
> I get a display like the below
> 
> datedeathsTodays_deathscountystatefipscasesTodays_cases
> 18679.00 34.00 0.00 Abbeville South Carolina 45001 2184.00 0.00
> 18680.00 34.00 0.00 Abbeville South Carolina 45001 2191.00 0.00
> 18681.00 34.00 0.00 Abbeville South Carolina 45001 2192.00 0.00
> 
> This is the change I made
> 
> old code
> ========
>   #x <- getURL("
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> ")
>    #us_counties <- read.csv(text = x)
>    # 855612 Rows , 6 columns class(us_counties)
> 
> 
> this stopped working, so I changed to below
> 
> 
>    urlfile="
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> "
>    #GN added 3/3
>    us_counties<-read_csv(url(urlfile),col_types = list(date = col_date()))
> 
>   Please let me know how to correct this
> 
> Regards
> Gayathri
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From er|cjberger @end|ng |rom gm@||@com  Wed Mar  3 21:18:35 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 3 Mar 2021 15:18:35 -0500
Subject: [R] Column-by-column division
In-Reply-To: <cc9cf8ca4c7a4a4381dabfde18a7602f@cambiumassessment.com>
References: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>
 <cc9cf8ca4c7a4a4381dabfde18a7602f@cambiumassessment.com>
Message-ID: <CAGgJW74qkxXSTt9rCJ7zpYE8ju6brdh=gfqHF6aFWc3N5efsOQ@mail.gmail.com>

Why not use standard matrix multiplication which is straightforward here:

x %*% diag(1/s)

HTH,
Eric


On Wed, Mar 3, 2021 at 7:13 AM Harold Doran <
harold.doran at cambiumassessment.com> wrote:

> To make sure the scalar is used instead of using the recycled vector s,
> maybe like this
>
> x <- matrix(1:20, nrow=10)
> s <- c(1,2)
> sapply(1:2, function(i) x[,i]/s[i])
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
> Sent: Wednesday, March 3, 2021 6:00 AM
> To: R-help Mailing List <r-help at r-project.org>
> Subject: [R] Column-by-column division
>
> I have a 10 x 2 matrix x. Like to divide the first column by s[1] and
> second column by s[2]. The following lines work but are clumsy. Any idea?
> Thanks.
>
>  > x
>        [,1] [,2]
>   [1,]    1   11
>   [2,]    2   12
>   [3,]    3   13
>   [4,]    4   14
>   [5,]    5   15
>   [6,]    6   16
>   [7,]    7   17
>   [8,]    8   18
>   [9,]    9   19
> [10,]   10   20
>  > s
> [1] 1 2
>  > t(t(x)/s)
>        [,1] [,2]
>   [1,]    1  5.5
>   [2,]    2  6.0
>   [3,]    3  6.5
>   [4,]    4  7.0
>   [5,]    5  7.5
>   [6,]    6  8.0
>   [7,]    7  8.5
>   [8,]    8  9.0
>   [9,]    9  9.5
> [10,]   10 10.0
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From h@ro|d@dor@n @end|ng |rom c@mb|um@@@e@@ment@com  Wed Mar  3 21:46:50 2021
From: h@ro|d@dor@n @end|ng |rom c@mb|um@@@e@@ment@com (Harold Doran)
Date: Wed, 3 Mar 2021 20:46:50 +0000
Subject: [R] Column-by-column division
In-Reply-To: <CAGgJW74qkxXSTt9rCJ7zpYE8ju6brdh=gfqHF6aFWc3N5efsOQ@mail.gmail.com>
References: <97051aa1-865c-6a8c-cf75-947a2cb8e34e@ntu.edu.tw>
 <cc9cf8ca4c7a4a4381dabfde18a7602f@cambiumassessment.com>
 <CAGgJW74qkxXSTt9rCJ7zpYE8ju6brdh=gfqHF6aFWc3N5efsOQ@mail.gmail.com>
Message-ID: <a481267462cc4f719189133e95bb4df8@cambiumassessment.com>

Some timings of the different suggestions below

> library(microbenchmark)
> x <- matrix(1:20, nrow=10)
> s <- c(1,2)
> option1 <- sapply(1:2, function(i) x[,i]/s[i])
> option2 <- x %*% diag(1/s)
> option3 <- sweep(x, 2, s, '/')
> all.equal(option1,option2)
[1] TRUE
> all.equal(option2,option3)
[1] TRUE
> microbenchmark(sapply(1:2, function(i) x[,i]/s[i]), x %*% diag(1/s), sweep(x, 2, s, '/'))
Unit: microseconds
                                 expr    min      lq     mean  median     uq      max neval
sapply(1:2, function(i) x[, i]/s[i]) 18.425 19.8800 37.42147 21.5765 22.789 1583.518   100
                      x %*% diag(1/s)  1.456  2.1830  2.86150  2.9100  3.395    9.213   100
                  sweep(x, 2, s, "/") 32.486 34.1825 37.31964 35.3950 36.364  131.395   100

From: Eric Berger <ericjberger at gmail.com>
Sent: Wednesday, March 3, 2021 3:19 PM
To: Harold Doran <harold.doran at cambiumassessment.com>
Cc: Steven Yen <styen at ntu.edu.tw>; R-help Mailing List <r-help at r-project.org>
Subject: Re: [R] Column-by-column division

Why not use standard matrix multiplication which is straightforward here:

x %*% diag(1/s)

HTH,
Eric


On Wed, Mar 3, 2021 at 7:13 AM Harold Doran <harold.doran at cambiumassessment.com<mailto:harold.doran at cambiumassessment.com>> wrote:
To make sure the scalar is used instead of using the recycled vector s, maybe like this

x <- matrix(1:20, nrow=10)
s <- c(1,2)
sapply(1:2, function(i) x[,i]/s[i])

-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of Steven Yen
Sent: Wednesday, March 3, 2021 6:00 AM
To: R-help Mailing List <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: [R] Column-by-column division

I have a 10 x 2 matrix x. Like to divide the first column by s[1] and second column by s[2]. The following lines work but are clumsy. Any idea? Thanks.

 > x
       [,1] [,2]
  [1,]    1   11
  [2,]    2   12
  [3,]    3   13
  [4,]    4   14
  [5,]    5   15
  [6,]    6   16
  [7,]    7   17
  [8,]    8   18
  [9,]    9   19
[10,]   10   20
 > s
[1] 1 2
 > t(t(x)/s)
       [,1] [,2]
  [1,]    1  5.5
  [2,]    2  6.0
  [3,]    3  6.5
  [4,]    4  7.0
  [5,]    5  7.5
  [6,]    6  8.0
  [7,]    7  8.5
  [8,]    8  9.0
  [9,]    9  9.5
[10,]   10 10.0

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From dr@@|@m@o|@ng| @end|ng |rom gm@||@com  Thu Mar  4 10:52:28 2021
From: dr@@|@m@o|@ng| @end|ng |rom gm@||@com (Shah Alam)
Date: Thu, 4 Mar 2021 10:52:28 +0100
Subject: [R] Warning messages while parallel computing
Message-ID: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>

Hello everyone,

I am using the "parallel" R package for parallel computation.

Code:

   # set number of cores
    cl <- makeCluster(8, type = "PSOCK")  # Mac/Linux need to set as "FORK"

      # pass functions and objects to the cluster environment and set seed
      # all the items exported need to stay in the global environment!!
      clusterCall(cl, function() { source("xx.R" )})
      clusterExport(cl, list("a", "b", "c", "d",
                             "5"))
      clusterSetRNGStream(cl, 1)

While parallel processing, I receive the following warning signs.  Do I
need to ignore these signs or do they potentially slow the whole process?

 *  Warning signs:*
Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 19
Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 18
Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 17
Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 16
Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 15
Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 14
Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 13
Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 12

Best regards,
Shah Alam

	[[alternative HTML version deleted]]


From @zwj|08 @end|ng |rom gm@||@com  Thu Mar  4 13:36:06 2021
From: @zwj|08 @end|ng |rom gm@||@com (Jiefei Wang)
Date: Thu, 4 Mar 2021 20:36:06 +0800
Subject: [R] Warning messages while parallel computing
In-Reply-To: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>
References: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>
Message-ID: <CAGiFhPMQEahzJoNTEm-T3m3f-GmHCwpkreU7uKhPhgjB9gVghQ@mail.gmail.com>

Hi Shah,

The error usually means you started a cluster and forgot to close it. From
the code you post, I cannot see any problem. Maybe you run `makeCluster`
twice by accident?

Best,
Jiefei

On Thu, Mar 4, 2021 at 5:53 PM Shah Alam <dr.alamsolangi at gmail.com> wrote:

> Hello everyone,
>
> I am using the "parallel" R package for parallel computation.
>
> Code:
>
>    # set number of cores
>     cl <- makeCluster(8, type = "PSOCK")  # Mac/Linux need to set as "FORK"
>
>       # pass functions and objects to the cluster environment and set seed
>       # all the items exported need to stay in the global environment!!
>       clusterCall(cl, function() { source("xx.R" )})
>       clusterExport(cl, list("a", "b", "c", "d",
>                              "5"))
>       clusterSetRNGStream(cl, 1)
>
> While parallel processing, I receive the following warning signs.  Do I
> need to ignore these signs or do they potentially slow the whole process?
>
>  *  Warning signs:*
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 19
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 18
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 17
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 16
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 15
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 14
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 13
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 12
>
> Best regards,
> Shah Alam
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com  Thu Mar  4 14:53:54 2021
From: g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com (Gayathri Nagarajan)
Date: Thu, 4 Mar 2021 05:53:54 -0800
Subject: [R] A tibble with date column appears different in shiny
In-Reply-To: <6a952e4a-dde4-f1d0-fa0d-43df77510326@sapo.pt>
References: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>
 <6a952e4a-dde4-f1d0-fa0d-43df77510326@sapo.pt>
Message-ID: <CANt+qPh129LnG=u5jfSF+ZAbU_wKdj5_O+PyBHxNTj_fMMVx9g@mail.gmail.com>

Hi Rui

I have tried the same but this is not working.

when I do head(us_counties), I clearly see this is a date,in R studio
console

head(us_counties)
         date deaths Todays_deaths    county          state  fips
1: 2020-03-19      0             0 Abbeville South Carolina 45001
2: 2020-03-20      0             0 Abbeville South Carolina 45001
3: 2020-03-21      0             0 Abbeville South Carolina 45001
4: 2020-03-22      0             0 Abbeville South Carolina 45001
5: 2020-03-23      0             0 Abbeville South Carolina 45001
6: 2020-03-24      0             0 Abbeville South Carolina 45001
   cases Todays_cases

But the moment this appears in shiny UI, this displays like

date deaths Todays_deaths county state fips cases Todays_cases
18340.00 0.00 0.00 Abbeville South Carolina 45001 1.00 0.00
18341.00 0.00 0.00 Abbeville South Carolina 45001 1.00 0.00



Regards
Gayathri


On Wed, 3 Mar 2021 at 08:25, Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Your col_types argument is wrong, you only have col_date.
>
>
> library(tidyverse)
>
> urlfile <-
> "
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> "
> #GN added 3/3
> cols_spec <- cols(
>    date = col_date(format = ""),
>    county = col_character(),
>    state = col_character(),
>    fips = col_character(),
>    cases = col_double(),
>    deaths = col_double()
> )
>
> us_counties <- read_csv(url(urlfile), col_types = cols_spec)
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 15:24 de 03/03/21, Gayathri Nagarajan escreveu:
> > Hi Team
> >
> > I have a tibble like the below :
> >
> > class(us_counties)
> > [1] "tbl_df"     "tbl"        "data.frame"
> >
> > head(us_counties)
> > # A tibble: 6 x 8
> >    date       deaths Todays_deaths county state fips
> >    <date>      <dbl>         <dbl> <chr>  <chr> <chr>
> > 1 2020-03-19      0             0 Abbev~ Sout~ 45001
> > 2 2020-03-20      0             0 Abbev~ Sout~ 45001
> > 3 2020-03-21      0             0 Abbev~ Sout~ 45001
> > 4 2020-03-22      0             0 Abbev~ Sout~ 45001
> > 5 2020-03-23      0             0 Abbev~ Sout~ 45001
> > 6 2020-03-24      0             0 Abbev~ Sout~ 45001
> >
> > str(us_counties)
> > tibble [1,082,715 x 8] (S3: tbl_df/tbl/data.frame)
> >   $ date         : Date[1:1082715], format: "2020-03-19" ...
> >   $ deaths       : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
> >   $ Todays_deaths: num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
> >   $ county       : chr [1:1082715] "Abbeville" "Abbeville" "Abbeville"
> > "Abbeville" ...
> >   $ state        : chr [1:1082715] "South Carolina" "South Carolina"
> "South
> > Carolina" "South Carolina" ...
> >   $ fips         : chr [1:1082715] "45001" "45001" "45001" "45001" ...
> >   $ cases        : num [1:1082715] 1 1 1 1 1 1 3 4 4 4 ...
> >   $ Todays_cases : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
> >   - attr(*, "spec")=
> >    .. cols(
> >    ..   date = col_date(format = ""),
> >    ..   county = col_character(),
> >    ..   state = col_character(),
> >    ..   fips = col_character(),
> >    ..   cases = col_double(),
> >    ..   deaths = col_double()
> >    .. )
> >   - attr(*, ".internal.selfref")=<externalptr>
> >>
> >
> >
> >
> > Now when I display this in shiny UI using a simple  command:
> >
> >
> >     # Generate an HTML table view of the data ----
> >     output$ttable <- renderTable({
> >         head(us_counties
> >              , n = input$obs)
> >     })
> >
> >
> > I get a display like the below
> >
> > datedeathsTodays_deathscountystatefipscasesTodays_cases
> > 18679.00 34.00 0.00 Abbeville South Carolina 45001 2184.00 0.00
> > 18680.00 34.00 0.00 Abbeville South Carolina 45001 2191.00 0.00
> > 18681.00 34.00 0.00 Abbeville South Carolina 45001 2192.00 0.00
> >
> > This is the change I made
> >
> > old code
> > ========
> >   #x <- getURL("
> >
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> > ")
> >    #us_counties <- read.csv(text = x)
> >    # 855612 Rows , 6 columns class(us_counties)
> >
> >
> > this stopped working, so I changed to below
> >
> >
> >    urlfile="
> >
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> > "
> >    #GN added 3/3
> >    us_counties<-read_csv(url(urlfile),col_types = list(date =
> col_date()))
> >
> >   Please let me know how to correct this
> >
> > Regards
> > Gayathri
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Mar  4 17:40:59 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 4 Mar 2021 16:40:59 +0000
Subject: [R] A tibble with date column appears different in shiny
In-Reply-To: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>
References: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>
Message-ID: <0c6a1e8c-8695-bd75-e589-b1b7ac26fbcb@sapo.pt>

Hello,

This is a known issue with renderTable. Show the results with 
renderDataTable instead.

Hope this helps,

Rui Barradas

?s 15:24 de 03/03/21, Gayathri Nagarajan escreveu:
> Hi Team
> 
> I have a tibble like the below :
> 
> class(us_counties)
> [1] "tbl_df"     "tbl"        "data.frame"
> 
> head(us_counties)
> # A tibble: 6 x 8
>    date       deaths Todays_deaths county state fips
>    <date>      <dbl>         <dbl> <chr>  <chr> <chr>
> 1 2020-03-19      0             0 Abbev~ Sout~ 45001
> 2 2020-03-20      0             0 Abbev~ Sout~ 45001
> 3 2020-03-21      0             0 Abbev~ Sout~ 45001
> 4 2020-03-22      0             0 Abbev~ Sout~ 45001
> 5 2020-03-23      0             0 Abbev~ Sout~ 45001
> 6 2020-03-24      0             0 Abbev~ Sout~ 45001
> 
> str(us_counties)
> tibble [1,082,715 x 8] (S3: tbl_df/tbl/data.frame)
>   $ date         : Date[1:1082715], format: "2020-03-19" ...
>   $ deaths       : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>   $ Todays_deaths: num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>   $ county       : chr [1:1082715] "Abbeville" "Abbeville" "Abbeville"
> "Abbeville" ...
>   $ state        : chr [1:1082715] "South Carolina" "South Carolina" "South
> Carolina" "South Carolina" ...
>   $ fips         : chr [1:1082715] "45001" "45001" "45001" "45001" ...
>   $ cases        : num [1:1082715] 1 1 1 1 1 1 3 4 4 4 ...
>   $ Todays_cases : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>   - attr(*, "spec")=
>    .. cols(
>    ..   date = col_date(format = ""),
>    ..   county = col_character(),
>    ..   state = col_character(),
>    ..   fips = col_character(),
>    ..   cases = col_double(),
>    ..   deaths = col_double()
>    .. )
>   - attr(*, ".internal.selfref")=<externalptr>
>>
> 
> 
> 
> Now when I display this in shiny UI using a simple  command:
> 
> 
>     # Generate an HTML table view of the data ----
>     output$ttable <- renderTable({
>         head(us_counties
>              , n = input$obs)
>     })
> 
> 
> I get a display like the below
> 
> datedeathsTodays_deathscountystatefipscasesTodays_cases
> 18679.00 34.00 0.00 Abbeville South Carolina 45001 2184.00 0.00
> 18680.00 34.00 0.00 Abbeville South Carolina 45001 2191.00 0.00
> 18681.00 34.00 0.00 Abbeville South Carolina 45001 2192.00 0.00
> 
> This is the change I made
> 
> old code
> ========
>   #x <- getURL("
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> ")
>    #us_counties <- read.csv(text = x)
>    # 855612 Rows , 6 columns class(us_counties)
> 
> 
> this stopped working, so I changed to below
> 
> 
>    urlfile="
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> "
>    #GN added 3/3
>    us_counties<-read_csv(url(urlfile),col_types = list(date = col_date()))
> 
>   Please let me know how to correct this
> 
> Regards
> Gayathri
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From dyk|m7411 @end|ng |rom gm@||@com  Thu Mar  4 14:41:42 2021
From: dyk|m7411 @end|ng |rom gm@||@com (DY Kim)
Date: Thu, 4 Mar 2021 08:41:42 -0500
Subject: [R] Adding a title to a plot
Message-ID: <CADmwX-Jy3tT3LeagyBrKfcy70h4SJdLTLcUraR9H+PnmUxw=uQ@mail.gmail.com>

Greetings!

I am currently using R x64 4.0.4.

I used the box-cox power transformation to create a range of lambdas and
log-likelihood values using the equation.

b1=boxcox (DV ~ IV1 + IV2, data= newdata)

The above codes automatically created a plot with lambdas and
log-likelihood values.

I want to add a main and subtitle to the plot. Would you please provide me
with codes? Any help would be appreciated. Thank you.

	[[alternative HTML version deleted]]


From dm@thew@63 @end|ng |rom e@rth||nk@net  Thu Mar  4 17:02:43 2021
From: dm@thew@63 @end|ng |rom e@rth||nk@net (Dick Mathews)
Date: Thu, 4 Mar 2021 08:02:43 -0800
Subject: [R] problem downloading R
Message-ID: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>

I am trying to download the Windows version of R. This computer is Win7, 
I do have Win10 computers also.

Tried R4.0.4, got message these files are corrupted.

Then tried R4.0.3, got same message as above.

Tried the next, R4.0.2, got same message.

I checked to see if I was downloading the proper version, seems okay.

What is the problem? Can anybody help me with this?

Dick Mathews


From er|cjberger @end|ng |rom gm@||@com  Thu Mar  4 18:05:06 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 4 Mar 2021 12:05:06 -0500
Subject: [R] Adding a title to a plot
In-Reply-To: <CADmwX-Jy3tT3LeagyBrKfcy70h4SJdLTLcUraR9H+PnmUxw=uQ@mail.gmail.com>
References: <CADmwX-Jy3tT3LeagyBrKfcy70h4SJdLTLcUraR9H+PnmUxw=uQ@mail.gmail.com>
Message-ID: <CAGgJW77GOGays2xzrZ=sPo=fAY3a91a_j6XeXYRA672SoV87ww@mail.gmail.com>

Untested

b1=boxcox( DV ~ IV1 + IV2, data= newdata, main="My main title\n My
Subtitle")



On Thu, Mar 4, 2021 at 11:56 AM DY Kim <dykim7411 at gmail.com> wrote:

> Greetings!
>
> I am currently using R x64 4.0.4.
>
> I used the box-cox power transformation to create a range of lambdas and
> log-likelihood values using the equation.
>
> b1=boxcox (DV ~ IV1 + IV2, data= newdata)
>
> The above codes automatically created a plot with lambdas and
> log-likelihood values.
>
> I want to add a main and subtitle to the plot. Would you please provide me
> with codes? Any help would be appreciated. Thank you.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Mar  4 18:17:42 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 04 Mar 2021 09:17:42 -0800
Subject: [R] problem downloading R
In-Reply-To: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>
References: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>
Message-ID: <0E0AEE48-E3FB-41D8-89CF-ABF3FADC7348@dcn.davis.ca.us>

Not much. Try a different mirror site. Try disabling anti-virus download filters. If you are using a cloud-backed directory like OneDrive, try downloading and installing on a standard local disk.

On March 4, 2021 8:02:43 AM PST, Dick Mathews <dmathews63 at earthlink.net> wrote:
>I am trying to download the Windows version of R. This computer is
>Win7, 
>I do have Win10 computers also.
>
>Tried R4.0.4, got message these files are corrupted.
>
>Then tried R4.0.3, got same message as above.
>
>Tried the next, R4.0.2, got same message.
>
>I checked to see if I was downloading the proper version, seems okay.
>
>What is the problem? Can anybody help me with this?
>
>Dick Mathews
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar  4 18:21:46 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Mar 2021 12:21:46 -0500
Subject: [R] problem downloading R
In-Reply-To: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>
References: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>
Message-ID: <11fd4149-4372-5962-4a9c-476750bd4e8e@gmail.com>

On 04/03/2021 11:02 a.m., Dick Mathews wrote:
> I am trying to download the Windows version of R. This computer is Win7,
> I do have Win10 computers also.
> 
> Tried R4.0.4, got message these files are corrupted.
> 
> Then tried R4.0.3, got same message as above.
> 
> Tried the next, R4.0.2, got same message.
> 
> I checked to see if I was downloading the proper version, seems okay.
> 
> What is the problem? Can anybody help me with this?

Which mirror are you using?  I'd recommend using cloud.r-project.org . 
If you get the same problem on that mirror, then you've likely got 
something interfering with your download.  You could try using a 
different machine to download, and install from a USB stick or some 
other non-network method.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar  4 18:30:07 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Mar 2021 12:30:07 -0500
Subject: [R] Adding a title to a plot
In-Reply-To: <CADmwX-Jy3tT3LeagyBrKfcy70h4SJdLTLcUraR9H+PnmUxw=uQ@mail.gmail.com>
References: <CADmwX-Jy3tT3LeagyBrKfcy70h4SJdLTLcUraR9H+PnmUxw=uQ@mail.gmail.com>
Message-ID: <d53f25cc-781f-93e1-9974-368bb358d845@gmail.com>

On 04/03/2021 8:41 a.m., DY Kim wrote:
> Greetings!
> 
> I am currently using R x64 4.0.4.
> 
> I used the box-cox power transformation to create a range of lambdas and
> log-likelihood values using the equation.
> 
> b1=boxcox (DV ~ IV1 + IV2, data= newdata)
> 
> The above codes automatically created a plot with lambdas and
> log-likelihood values.
> 
> I want to add a main and subtitle to the plot. Would you please provide me
> with codes? Any help would be appreciated. Thank you.

The MASS:::boxcox.default method doesn't support adding a title.  If you 
want one, you'll have to edit the function to put in a title in the call 
to plot().  For example:

   boxcox.default <- MASS:::boxcox.default
   fix(boxcox.default)

and then edit this line

   plot(xl, loglik, xlab = xlab, ylab = ylab, type = "l",
             ylim = range(loglik, lim))

to

   plot(xl, loglik, xlab = xlab, ylab = ylab, type = "l",
             ylim = range(loglik, lim), main = "My title")

and save the result.  (You could make a slightly more sophisticated 
change such as adding "main" as an argument to the function, and using 
"main = main" in the call to plot(). )

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar  4 18:38:23 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Mar 2021 12:38:23 -0500
Subject: [R] Adding a title to a plot
In-Reply-To: <d53f25cc-781f-93e1-9974-368bb358d845@gmail.com>
References: <CADmwX-Jy3tT3LeagyBrKfcy70h4SJdLTLcUraR9H+PnmUxw=uQ@mail.gmail.com>
 <d53f25cc-781f-93e1-9974-368bb358d845@gmail.com>
Message-ID: <5c6b5fc8-6442-f8fd-581f-589aa1a78d2c@gmail.com>

Wow, that was an unnecessarily complicated suggestion.

Just run

  title("My title")

after running boxcox().

Duncan Murdoch

On 04/03/2021 12:30 p.m., Duncan Murdoch wrote:
> On 04/03/2021 8:41 a.m., DY Kim wrote:
>> Greetings!
>>
>> I am currently using R x64 4.0.4.
>>
>> I used the box-cox power transformation to create a range of lambdas and
>> log-likelihood values using the equation.
>>
>> b1=boxcox (DV ~ IV1 + IV2, data= newdata)
>>
>> The above codes automatically created a plot with lambdas and
>> log-likelihood values.
>>
>> I want to add a main and subtitle to the plot. Would you please provide me
>> with codes? Any help would be appreciated. Thank you.
> 
> The MASS:::boxcox.default method doesn't support adding a title.  If you
> want one, you'll have to edit the function to put in a title in the call
> to plot().  For example:
> 
>     boxcox.default <- MASS:::boxcox.default
>     fix(boxcox.default)
> 
> and then edit this line
> 
>     plot(xl, loglik, xlab = xlab, ylab = ylab, type = "l",
>               ylim = range(loglik, lim))
> 
> to
> 
>     plot(xl, loglik, xlab = xlab, ylab = ylab, type = "l",
>               ylim = range(loglik, lim), main = "My title")
> 
> and save the result.  (You could make a slightly more sophisticated
> change such as adding "main" as an argument to the function, and using
> "main = main" in the call to plot(). )
> 
> Duncan Murdoch
>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Mar  4 18:57:45 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 4 Mar 2021 09:57:45 -0800
Subject: [R] Warning messages while parallel computing
In-Reply-To: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>
References: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>
Message-ID: <CAHqSRuRCC8ywM8UusCHfKgvtFt_-C-56WAGjEn+YVvb7PwGRpQ@mail.gmail.com>

To avoid the warnings from gc(), call parallel::stopCluster(cl) before
removing or overwriting cl.

-Bill

On Thu, Mar 4, 2021 at 1:52 AM Shah Alam <dr.alamsolangi at gmail.com> wrote:
>
> Hello everyone,
>
> I am using the "parallel" R package for parallel computation.
>
> Code:
>
>    # set number of cores
>     cl <- makeCluster(8, type = "PSOCK")  # Mac/Linux need to set as "FORK"
>
>       # pass functions and objects to the cluster environment and set seed
>       # all the items exported need to stay in the global environment!!
>       clusterCall(cl, function() { source("xx.R" )})
>       clusterExport(cl, list("a", "b", "c", "d",
>                              "5"))
>       clusterSetRNGStream(cl, 1)
>
> While parallel processing, I receive the following warning signs.  Do I
> need to ignore these signs or do they potentially slow the whole process?
>
>  *  Warning signs:*
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 19
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 18
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 17
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 16
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 15
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 14
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 13
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 12
>
> Best regards,
> Shah Alam
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu Mar  4 19:12:34 2021
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 4 Mar 2021 10:12:34 -0800
Subject: [R] Warning messages while parallel computing
In-Reply-To: <CAHqSRuRCC8ywM8UusCHfKgvtFt_-C-56WAGjEn+YVvb7PwGRpQ@mail.gmail.com>
References: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>
 <CAHqSRuRCC8ywM8UusCHfKgvtFt_-C-56WAGjEn+YVvb7PwGRpQ@mail.gmail.com>
Message-ID: <CAFDcVCThe0tjfu++uBfE_XtyzOC-nSjZHeS0gdAXh_fLKfXn2w@mail.gmail.com>

I don't think 'parallel' is to blame in this case. Those warnings:

Warning in for (i in seq_len(Ne + echo)) { :
  closing unused connection 19

come from base::source()
[https://github.com/wch/r-source/blob/9caddc1eaad1f480283f1e98af34a328699d1869/src/library/base/R/source.R#L166-L244].

Unless there's a bug in source() that leaves connections open, which
is unlikely, I think there's something in the 'xx.R' script that opens
a connection but doesn't close it.  Possibly multiple times.  A good
check is to see if the same warnings are produced when calling
source("xx.R") sequentially in a for() loop or an lapply() call.

Hope this helps,

Henrik

On Thu, Mar 4, 2021 at 9:58 AM Bill Dunlap <williamwdunlap at gmail.com> wrote:
>
> To avoid the warnings from gc(), call parallel::stopCluster(cl) before
> removing or overwriting cl.
>
> -Bill
>
> On Thu, Mar 4, 2021 at 1:52 AM Shah Alam <dr.alamsolangi at gmail.com> wrote:
> >
> > Hello everyone,
> >
> > I am using the "parallel" R package for parallel computation.
> >
> > Code:
> >
> >    # set number of cores
> >     cl <- makeCluster(8, type = "PSOCK")  # Mac/Linux need to set as "FORK"
> >
> >       # pass functions and objects to the cluster environment and set seed
> >       # all the items exported need to stay in the global environment!!
> >       clusterCall(cl, function() { source("xx.R" )})
> >       clusterExport(cl, list("a", "b", "c", "d",
> >                              "5"))
> >       clusterSetRNGStream(cl, 1)
> >
> > While parallel processing, I receive the following warning signs.  Do I
> > need to ignore these signs or do they potentially slow the whole process?
> >
> >  *  Warning signs:*
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 19
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 18
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 17
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 16
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 15
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 14
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 13
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 12
> >
> > Best regards,
> > Shah Alam
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Mar  4 19:20:32 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 4 Mar 2021 10:20:32 -0800
Subject: [R] Warning messages while parallel computing
In-Reply-To: <CAFDcVCThe0tjfu++uBfE_XtyzOC-nSjZHeS0gdAXh_fLKfXn2w@mail.gmail.com>
References: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>
 <CAHqSRuRCC8ywM8UusCHfKgvtFt_-C-56WAGjEn+YVvb7PwGRpQ@mail.gmail.com>
 <CAFDcVCThe0tjfu++uBfE_XtyzOC-nSjZHeS0gdAXh_fLKfXn2w@mail.gmail.com>
Message-ID: <CAHqSRuQA4quaB+Gc1p3juECq6116GROLwTQNXpgjn79PChqYOA@mail.gmail.com>

The warnings come from the garbage collector, which may be called from
almost anywhere.  It is possible that the file that is sourced causes
the problem, but if you don't call parallel::stopCluster before
removing the cluster object you will get those warnings.

> cl <- parallel::makeCluster(3, type="PSOCK")
> invisible(gc())
> rm(cl)
> invisible(gc())
Warning messages:
1: In .Internal(gc(verbose, reset, full)) :
  closing unused connection 6 (<-Bill-T490:11216)
2: In .Internal(gc(verbose, reset, full)) :
  closing unused connection 5 (<-Bill-T490:11216)
3: In .Internal(gc(verbose, reset, full)) :
  closing unused connection 4 (<-Bill-T490:11216)
>
>
> cl <- parallel::makeCluster(3, type="PSOCK")
> invisible(gc())
> parallel::stopCluster(cl)
> invisible(gc())
> rm(cl)
> invisible(gc())
>

The fact that he got 8 warnings when playing a cluster of size 8 makes
me suspect that omitting stopCluster is the problem.

-Bill

On Thu, Mar 4, 2021 at 10:12 AM Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> I don't think 'parallel' is to blame in this case. Those warnings:
>
> Warning in for (i in seq_len(Ne + echo)) { :
>   closing unused connection 19
>
> come from base::source()
> [https://github.com/wch/r-source/blob/9caddc1eaad1f480283f1e98af34a328699d1869/src/library/base/R/source.R#L166-L244].
>
> Unless there's a bug in source() that leaves connections open, which
> is unlikely, I think there's something in the 'xx.R' script that opens
> a connection but doesn't close it.  Possibly multiple times.  A good
> check is to see if the same warnings are produced when calling
> source("xx.R") sequentially in a for() loop or an lapply() call.
>
> Hope this helps,
>
> Henrik
>
> On Thu, Mar 4, 2021 at 9:58 AM Bill Dunlap <williamwdunlap at gmail.com> wrote:
> >
> > To avoid the warnings from gc(), call parallel::stopCluster(cl) before
> > removing or overwriting cl.
> >
> > -Bill
> >
> > On Thu, Mar 4, 2021 at 1:52 AM Shah Alam <dr.alamsolangi at gmail.com> wrote:
> > >
> > > Hello everyone,
> > >
> > > I am using the "parallel" R package for parallel computation.
> > >
> > > Code:
> > >
> > >    # set number of cores
> > >     cl <- makeCluster(8, type = "PSOCK")  # Mac/Linux need to set as "FORK"
> > >
> > >       # pass functions and objects to the cluster environment and set seed
> > >       # all the items exported need to stay in the global environment!!
> > >       clusterCall(cl, function() { source("xx.R" )})
> > >       clusterExport(cl, list("a", "b", "c", "d",
> > >                              "5"))
> > >       clusterSetRNGStream(cl, 1)
> > >
> > > While parallel processing, I receive the following warning signs.  Do I
> > > need to ignore these signs or do they potentially slow the whole process?
> > >
> > >  *  Warning signs:*
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 19
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 18
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 17
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 16
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 15
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 14
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 13
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 12
> > >
> > > Best regards,
> > > Shah Alam
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Thu Mar  4 20:23:34 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Thu, 4 Mar 2021 13:23:34 -0600
Subject: [R] Adding a title to a plot
In-Reply-To: <CADmwX-Jy3tT3LeagyBrKfcy70h4SJdLTLcUraR9H+PnmUxw=uQ@mail.gmail.com>
References: <CADmwX-Jy3tT3LeagyBrKfcy70h4SJdLTLcUraR9H+PnmUxw=uQ@mail.gmail.com>
Message-ID: <009d01d7112b$dee6c2d0$9cb44870$@sbcglobal.net>

Kim

See plot.boxcox function which has main = NULL, sub = NULL arguments

Jeff

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of DY Kim
Sent: Thursday, March 4, 2021 7:42 AM
To: r-help at r-project.org
Subject: [R] Adding a title to a plot

Greetings!

I am currently using R x64 4.0.4.

I used the box-cox power transformation to create a range of lambdas and
log-likelihood values using the equation.

b1=boxcox (DV ~ IV1 + IV2, data= newdata)

The above codes automatically created a plot with lambdas and log-likelihood
values.

I want to add a main and subtitle to the plot. Would you please provide me
with codes? Any help would be appreciated. Thank you.

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu Mar  4 20:27:58 2021
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 4 Mar 2021 11:27:58 -0800
Subject: [R] Warning messages while parallel computing
In-Reply-To: <CAHqSRuQA4quaB+Gc1p3juECq6116GROLwTQNXpgjn79PChqYOA@mail.gmail.com>
References: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>
 <CAHqSRuRCC8ywM8UusCHfKgvtFt_-C-56WAGjEn+YVvb7PwGRpQ@mail.gmail.com>
 <CAFDcVCThe0tjfu++uBfE_XtyzOC-nSjZHeS0gdAXh_fLKfXn2w@mail.gmail.com>
 <CAHqSRuQA4quaB+Gc1p3juECq6116GROLwTQNXpgjn79PChqYOA@mail.gmail.com>
Message-ID: <CAFDcVCRFWEGK3i-5pNMYyiuWpEO2zX7AzE1gx9wbBMGRgeNsqw@mail.gmail.com>

Test with:

clusterCall(cl, function() { suppressWarnings(source("xx.R")) })

If the warnings disappear, then the warnings are produced on the
workers from source():ing the file.

/Henrik

On Thu, Mar 4, 2021 at 10:20 AM Bill Dunlap <williamwdunlap at gmail.com> wrote:
>
> The warnings come from the garbage collector, which may be called from
> almost anywhere.  It is possible that the file that is sourced causes
> the problem, but if you don't call parallel::stopCluster before
> removing the cluster object you will get those warnings.
>
> > cl <- parallel::makeCluster(3, type="PSOCK")
> > invisible(gc())
> > rm(cl)
> > invisible(gc())
> Warning messages:
> 1: In .Internal(gc(verbose, reset, full)) :
>   closing unused connection 6 (<-Bill-T490:11216)
> 2: In .Internal(gc(verbose, reset, full)) :
>   closing unused connection 5 (<-Bill-T490:11216)
> 3: In .Internal(gc(verbose, reset, full)) :
>   closing unused connection 4 (<-Bill-T490:11216)
> >
> >
> > cl <- parallel::makeCluster(3, type="PSOCK")
> > invisible(gc())
> > parallel::stopCluster(cl)
> > invisible(gc())
> > rm(cl)
> > invisible(gc())
> >
>
> The fact that he got 8 warnings when playing a cluster of size 8 makes
> me suspect that omitting stopCluster is the problem.
>
> -Bill
>
> On Thu, Mar 4, 2021 at 10:12 AM Henrik Bengtsson
> <henrik.bengtsson at gmail.com> wrote:
> >
> > I don't think 'parallel' is to blame in this case. Those warnings:
> >
> > Warning in for (i in seq_len(Ne + echo)) { :
> >   closing unused connection 19
> >
> > come from base::source()
> > [https://github.com/wch/r-source/blob/9caddc1eaad1f480283f1e98af34a328699d1869/src/library/base/R/source.R#L166-L244].
> >
> > Unless there's a bug in source() that leaves connections open, which
> > is unlikely, I think there's something in the 'xx.R' script that opens
> > a connection but doesn't close it.  Possibly multiple times.  A good
> > check is to see if the same warnings are produced when calling
> > source("xx.R") sequentially in a for() loop or an lapply() call.
> >
> > Hope this helps,
> >
> > Henrik
> >
> > On Thu, Mar 4, 2021 at 9:58 AM Bill Dunlap <williamwdunlap at gmail.com> wrote:
> > >
> > > To avoid the warnings from gc(), call parallel::stopCluster(cl) before
> > > removing or overwriting cl.
> > >
> > > -Bill
> > >
> > > On Thu, Mar 4, 2021 at 1:52 AM Shah Alam <dr.alamsolangi at gmail.com> wrote:
> > > >
> > > > Hello everyone,
> > > >
> > > > I am using the "parallel" R package for parallel computation.
> > > >
> > > > Code:
> > > >
> > > >    # set number of cores
> > > >     cl <- makeCluster(8, type = "PSOCK")  # Mac/Linux need to set as "FORK"
> > > >
> > > >       # pass functions and objects to the cluster environment and set seed
> > > >       # all the items exported need to stay in the global environment!!
> > > >       clusterCall(cl, function() { source("xx.R" )})
> > > >       clusterExport(cl, list("a", "b", "c", "d",
> > > >                              "5"))
> > > >       clusterSetRNGStream(cl, 1)
> > > >
> > > > While parallel processing, I receive the following warning signs.  Do I
> > > > need to ignore these signs or do they potentially slow the whole process?
> > > >
> > > >  *  Warning signs:*
> > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > >   closing unused connection 19
> > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > >   closing unused connection 18
> > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > >   closing unused connection 17
> > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > >   closing unused connection 16
> > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > >   closing unused connection 15
> > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > >   closing unused connection 14
> > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > >   closing unused connection 13
> > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > >   closing unused connection 12
> > > >
> > > > Best regards,
> > > > Shah Alam
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Mar  4 20:37:15 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 4 Mar 2021 11:37:15 -0800
Subject: [R] Warning messages while parallel computing
In-Reply-To: <CAFDcVCRFWEGK3i-5pNMYyiuWpEO2zX7AzE1gx9wbBMGRgeNsqw@mail.gmail.com>
References: <CA+bivFhiWAcs9=_-qQM4OZvdt9xjbtsBcqkCd=nJrryeUy-dCQ@mail.gmail.com>
 <CAHqSRuRCC8ywM8UusCHfKgvtFt_-C-56WAGjEn+YVvb7PwGRpQ@mail.gmail.com>
 <CAFDcVCThe0tjfu++uBfE_XtyzOC-nSjZHeS0gdAXh_fLKfXn2w@mail.gmail.com>
 <CAHqSRuQA4quaB+Gc1p3juECq6116GROLwTQNXpgjn79PChqYOA@mail.gmail.com>
 <CAFDcVCRFWEGK3i-5pNMYyiuWpEO2zX7AzE1gx9wbBMGRgeNsqw@mail.gmail.com>
Message-ID: <CAHqSRuT8cEggHLn4PYjoDyXikR82SBk=HZDQmxiS97Hc-aHZ6Q@mail.gmail.com>

Perhaps just try
    source("xx.R")
    invisible(gc()) # do warnings appear after this?
It does seem likely that the sourced file causes the problem, since
parallel::createCluster labels the connections "<host name>:<process
id>" and that label would show up in the warning.

On Thu, Mar 4, 2021 at 11:28 AM Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> Test with:
>
> clusterCall(cl, function() { suppressWarnings(source("xx.R")) })
>
> If the warnings disappear, then the warnings are produced on the
> workers from source():ing the file.
>
> /Henrik
>
> On Thu, Mar 4, 2021 at 10:20 AM Bill Dunlap <williamwdunlap at gmail.com> wrote:
> >
> > The warnings come from the garbage collector, which may be called from
> > almost anywhere.  It is possible that the file that is sourced causes
> > the problem, but if you don't call parallel::stopCluster before
> > removing the cluster object you will get those warnings.
> >
> > > cl <- parallel::makeCluster(3, type="PSOCK")
> > > invisible(gc())
> > > rm(cl)
> > > invisible(gc())
> > Warning messages:
> > 1: In .Internal(gc(verbose, reset, full)) :
> >   closing unused connection 6 (<-Bill-T490:11216)
> > 2: In .Internal(gc(verbose, reset, full)) :
> >   closing unused connection 5 (<-Bill-T490:11216)
> > 3: In .Internal(gc(verbose, reset, full)) :
> >   closing unused connection 4 (<-Bill-T490:11216)
> > >
> > >
> > > cl <- parallel::makeCluster(3, type="PSOCK")
> > > invisible(gc())
> > > parallel::stopCluster(cl)
> > > invisible(gc())
> > > rm(cl)
> > > invisible(gc())
> > >
> >
> > The fact that he got 8 warnings when playing a cluster of size 8 makes
> > me suspect that omitting stopCluster is the problem.
> >
> > -Bill
> >
> > On Thu, Mar 4, 2021 at 10:12 AM Henrik Bengtsson
> > <henrik.bengtsson at gmail.com> wrote:
> > >
> > > I don't think 'parallel' is to blame in this case. Those warnings:
> > >
> > > Warning in for (i in seq_len(Ne + echo)) { :
> > >   closing unused connection 19
> > >
> > > come from base::source()
> > > [https://github.com/wch/r-source/blob/9caddc1eaad1f480283f1e98af34a328699d1869/src/library/base/R/source.R#L166-L244].
> > >
> > > Unless there's a bug in source() that leaves connections open, which
> > > is unlikely, I think there's something in the 'xx.R' script that opens
> > > a connection but doesn't close it.  Possibly multiple times.  A good
> > > check is to see if the same warnings are produced when calling
> > > source("xx.R") sequentially in a for() loop or an lapply() call.
> > >
> > > Hope this helps,
> > >
> > > Henrik
> > >
> > > On Thu, Mar 4, 2021 at 9:58 AM Bill Dunlap <williamwdunlap at gmail.com> wrote:
> > > >
> > > > To avoid the warnings from gc(), call parallel::stopCluster(cl) before
> > > > removing or overwriting cl.
> > > >
> > > > -Bill
> > > >
> > > > On Thu, Mar 4, 2021 at 1:52 AM Shah Alam <dr.alamsolangi at gmail.com> wrote:
> > > > >
> > > > > Hello everyone,
> > > > >
> > > > > I am using the "parallel" R package for parallel computation.
> > > > >
> > > > > Code:
> > > > >
> > > > >    # set number of cores
> > > > >     cl <- makeCluster(8, type = "PSOCK")  # Mac/Linux need to set as "FORK"
> > > > >
> > > > >       # pass functions and objects to the cluster environment and set seed
> > > > >       # all the items exported need to stay in the global environment!!
> > > > >       clusterCall(cl, function() { source("xx.R" )})
> > > > >       clusterExport(cl, list("a", "b", "c", "d",
> > > > >                              "5"))
> > > > >       clusterSetRNGStream(cl, 1)
> > > > >
> > > > > While parallel processing, I receive the following warning signs.  Do I
> > > > > need to ignore these signs or do they potentially slow the whole process?
> > > > >
> > > > >  *  Warning signs:*
> > > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > > >   closing unused connection 19
> > > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > > >   closing unused connection 18
> > > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > > >   closing unused connection 17
> > > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > > >   closing unused connection 16
> > > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > > >   closing unused connection 15
> > > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > > >   closing unused connection 14
> > > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > > >   closing unused connection 13
> > > > > Warning in for (i in seq_len(Ne + echo)) { :
> > > > >   closing unused connection 12
> > > > >
> > > > > Best regards,
> > > > > Shah Alam
> > > > >
> > > > >         [[alternative HTML version deleted]]
> > > > >
> > > > > ______________________________________________
> > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > > and provide commented, minimal, self-contained, reproducible code.
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.


From g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com  Fri Mar  5 06:51:05 2021
From: g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com (Gayathri Nagarajan)
Date: Thu, 4 Mar 2021 21:51:05 -0800
Subject: [R] A tibble with date column appears different in shiny
In-Reply-To: <0c6a1e8c-8695-bd75-e589-b1b7ac26fbcb@sapo.pt>
References: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>
 <0c6a1e8c-8695-bd75-e589-b1b7ac26fbcb@sapo.pt>
Message-ID: <CANt+qPichHQE9P-SEGb71Q5=WhgY-fy6TK+yJOvxROX9ZKO7Xg@mail.gmail.com>

Hi Rui

Tried renderDatatable, but now my shiny UI shows Blank for my tibble. Not
sure what Iam missing suddenly when this was working fine a day back.

The one change I did was:

x <- getURL("
https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
")
us_counties <- read.csv(text = x)

Error in function (type, msg, asError = TRUE)  :
  error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol
version

Hence had to change this to :


  urlfile="
https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
"
  #GN added 3/3
  #GN comment 3/4
  #us_counties<-read_csv(url(urlfile),col_types = list(date = col_date()))
  #GN Add 3/4
  #GN added 3/3
  cols_spec <- cols(
    date = col_date(format = ""),
    county = col_character(),
    state = col_character(),
    fips = col_character(),
    cases = col_double(),
    deaths = col_double()
  )

  us_counties <- read_csv(url(urlfile), col_types = cols_spec)
 ===========================


Regards
Gayathri


On Thu, 4 Mar 2021 at 08:41, Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> This is a known issue with renderTable. Show the results with
> renderDataTable instead.
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 15:24 de 03/03/21, Gayathri Nagarajan escreveu:
> > Hi Team
> >
> > I have a tibble like the below :
> >
> > class(us_counties)
> > [1] "tbl_df"     "tbl"        "data.frame"
> >
> > head(us_counties)
> > # A tibble: 6 x 8
> >    date       deaths Todays_deaths county state fips
> >    <date>      <dbl>         <dbl> <chr>  <chr> <chr>
> > 1 2020-03-19      0             0 Abbev~ Sout~ 45001
> > 2 2020-03-20      0             0 Abbev~ Sout~ 45001
> > 3 2020-03-21      0             0 Abbev~ Sout~ 45001
> > 4 2020-03-22      0             0 Abbev~ Sout~ 45001
> > 5 2020-03-23      0             0 Abbev~ Sout~ 45001
> > 6 2020-03-24      0             0 Abbev~ Sout~ 45001
> >
> > str(us_counties)
> > tibble [1,082,715 x 8] (S3: tbl_df/tbl/data.frame)
> >   $ date         : Date[1:1082715], format: "2020-03-19" ...
> >   $ deaths       : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
> >   $ Todays_deaths: num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
> >   $ county       : chr [1:1082715] "Abbeville" "Abbeville" "Abbeville"
> > "Abbeville" ...
> >   $ state        : chr [1:1082715] "South Carolina" "South Carolina"
> "South
> > Carolina" "South Carolina" ...
> >   $ fips         : chr [1:1082715] "45001" "45001" "45001" "45001" ...
> >   $ cases        : num [1:1082715] 1 1 1 1 1 1 3 4 4 4 ...
> >   $ Todays_cases : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
> >   - attr(*, "spec")=
> >    .. cols(
> >    ..   date = col_date(format = ""),
> >    ..   county = col_character(),
> >    ..   state = col_character(),
> >    ..   fips = col_character(),
> >    ..   cases = col_double(),
> >    ..   deaths = col_double()
> >    .. )
> >   - attr(*, ".internal.selfref")=<externalptr>
> >>
> >
> >
> >
> > Now when I display this in shiny UI using a simple  command:
> >
> >
> >     # Generate an HTML table view of the data ----
> >     output$ttable <- renderTable({
> >         head(us_counties
> >              , n = input$obs)
> >     })
> >
> >
> > I get a display like the below
> >
> > datedeathsTodays_deathscountystatefipscasesTodays_cases
> > 18679.00 34.00 0.00 Abbeville South Carolina 45001 2184.00 0.00
> > 18680.00 34.00 0.00 Abbeville South Carolina 45001 2191.00 0.00
> > 18681.00 34.00 0.00 Abbeville South Carolina 45001 2192.00 0.00
> >
> > This is the change I made
> >
> > old code
> > ========
> >   #x <- getURL("
> >
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> > ")
> >    #us_counties <- read.csv(text = x)
> >    # 855612 Rows , 6 columns class(us_counties)
> >
> >
> > this stopped working, so I changed to below
> >
> >
> >    urlfile="
> >
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> > "
> >    #GN added 3/3
> >    us_counties<-read_csv(url(urlfile),col_types = list(date =
> col_date()))
> >
> >   Please let me know how to correct this
> >
> > Regards
> > Gayathri
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Fri Mar  5 08:58:10 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 5 Mar 2021 20:58:10 +1300
Subject: [R] problem downloading R
In-Reply-To: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>
References: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>
Message-ID: <CAB8pepwgyQKffpqsFKVxSVXfbi83_4Hh3x3v+OttcEv5VV2cpQ@mail.gmail.com>

Does the following sound familiar?

The Windows installer starts installing (or decompressing) R, flashing
one file name at a time.
And then, part way through, says XXXX file is corrupt, and gives you
the choice to ignore.
And if you click ignore, then the next file does the same thing.
And one quickly realizes, that every subsequent file will have the same message.

Then if you re-download the installation file, the same thing happens.
Except that the first file flagged as corrupted, is not necessarily
the same file.


On Fri, Mar 5, 2021 at 5:55 AM Dick Mathews <dmathews63 at earthlink.net> wrote:
>
> I am trying to download the Windows version of R. This computer is Win7,
> I do have Win10 computers also.
>
> Tried R4.0.4, got message these files are corrupted.
>
> Then tried R4.0.3, got same message as above.
>
> Tried the next, R4.0.2, got same message.
>
> I checked to see if I was downloading the proper version, seems okay.
>
> What is the problem? Can anybody help me with this?
>
> Dick Mathews
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Mar  5 09:30:33 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 5 Mar 2021 09:30:33 +0100
Subject: [R] problem downloading R
In-Reply-To: <CAB8pepwgyQKffpqsFKVxSVXfbi83_4Hh3x3v+OttcEv5VV2cpQ@mail.gmail.com>
References: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>
 <CAB8pepwgyQKffpqsFKVxSVXfbi83_4Hh3x3v+OttcEv5VV2cpQ@mail.gmail.com>
Message-ID: <c0f9b062-5e0e-9592-e705-54059d638181@statistik.tu-dortmund.de>

Sounds like you always got corrupted vesions. Either an issue with your 
connection or the mirror. What happens if you try another mirror and 
clear your browser caches?

Best,
Uwe Ligges

On 05.03.2021 08:58, Abby Spurdle wrote:
> Does the following sound familiar?
> 
> The Windows installer starts installing (or decompressing) R, flashing
> one file name at a time.
> And then, part way through, says XXXX file is corrupt, and gives you
> the choice to ignore.
> And if you click ignore, then the next file does the same thing.
> And one quickly realizes, that every subsequent file will have the same message.
> 
> Then if you re-download the installation file, the same thing happens.
> Except that the first file flagged as corrupted, is not necessarily
> the same file.
> 
> 
> On Fri, Mar 5, 2021 at 5:55 AM Dick Mathews <dmathews63 at earthlink.net> wrote:
>>
>> I am trying to download the Windows version of R. This computer is Win7,
>> I do have Win10 computers also.
>>
>> Tried R4.0.4, got message these files are corrupted.
>>
>> Then tried R4.0.3, got same message as above.
>>
>> Tried the next, R4.0.2, got same message.
>>
>> I checked to see if I was downloading the proper version, seems okay.
>>
>> What is the problem? Can anybody help me with this?
>>
>> Dick Mathews
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Mar  5 10:14:22 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 5 Mar 2021 09:14:22 +0000
Subject: [R] quantile from quantile table calculation without original data
Message-ID: <1614935662799.60644@precheza.cz>

Dear all

I have table of quantiles, probably from lognormal distribution

 dput(temp)
temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069,
0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1,
0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
), row.names = c(NA, -9L), class = "data.frame")

and I need to calculate quantile for size 0.1

plot(temp$size, temp$percent, pch=19, xlim=c(0,2))
ss <- approxfun(temp$size, temp$percent)
points((0:100)/50, ss((0:100)/50))
abline(v=.1)

If I had original data it would be quite easy with ecdf/quantile function but without it I am lost what function I could use for such task.

Please, give me some hint where to look.


Best regards

Petr
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner's personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl?en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


	[[alternative HTML version deleted]]


From ruipb@rr@d@s m@iii@g oii s@po@pt  Fri Mar  5 10:15:47 2021
From: ruipb@rr@d@s m@iii@g oii s@po@pt (ruipb@rr@d@s m@iii@g oii s@po@pt)
Date: Fri, 05 Mar 2021 09:15:47 +0000
Subject: [R] A tibble with date column appears different in shiny
In-Reply-To: <CANt+qPichHQE9P-SEGb71Q5=WhgY-fy6TK+yJOvxROX9ZKO7Xg@mail.gmail.com>
References: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>
 <0c6a1e8c-8695-bd75-e589-b1b7ac26fbcb@sapo.pt>
 <CANt+qPichHQE9P-SEGb71Q5=WhgY-fy6TK+yJOvxROX9ZKO7Xg@mail.gmail.com>
Message-ID: <20210305091547.Horde.RrbcliW0q7gxhZAA-ILmEz3@mail.sapo.pt>

Hello,

In

us_counties <- read.csv(text = x)

remove 'text=', you are reading from a url, not from a text string.

Hope this helps,

Rui Barradas

----- Mensagem de Gayathri Nagarajan <gayathri.nagarajan at gmail.com> ---------

  Data: Thu, 4 Mar 2021 21:51:05 -0800

  De: Gayathri Nagarajan <gayathri.nagarajan at gmail.com>

  Assunto: Re: [R] A tibble with date column appears different in shiny

  Para: Rui Barradas <ruipbarradas at sapo.pt>

> Hi Rui
>
> Tried renderDatatable, but now my shiny UI shows Blank for my  
> tibble. Not sure what Iam missing suddenly when this was working  
> fine a day back.
>
> The one change I did was:
>
> x <-  
> getURL("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv")
>
>  us_counties <- read.csv(text = x)
>
> Error in function (type, msg, asError = TRUE) ?:
>
>  ? error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert  
> protocol version
>
> Hence had to change this to :
>
> ?  
> urlfile="https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv"
>
>  ? #GN added 3/3
>
>  ? #GN comment 3/4
>
>  ? #us_counties<-read_csv(url(urlfile),col_types = list(date = col_date()))
>
>  ? #GN Add 3/4
>
>  ? #GN added 3/3
>
>  ? cols_spec <- cols(
>
>  ? ? date = col_date(format = ""),
>
>  ? ? county = col_character(),
>
>  ? ? state = col_character(),
>
>  ? ? fips = col_character(),
>
>  ? ? cases = col_double(),
>
>  ? ? deaths = col_double()
>
>  ? )
>
>  ?
>
>  ? us_counties <- read_csv(url(urlfile), col_types = cols_spec)
>
>  ?===========================
>
> ?
>
> ?
>
>
>
> Regards
>
> Gayathri
>
> On Thu, 4 Mar 2021 at 08:41, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> Hello,
>>
>>
>>
>>  This is a known issue with renderTable. Show the results with
>>
>>  renderDataTable instead.
>>
>>
>>
>>  Hope this helps,
>>
>>
>>
>>  Rui Barradas
>>
>>
>>
>>  ?s 15:24 de 03/03/21, Gayathri Nagarajan escreveu:
>>
>>  > Hi Team
>>
>>  >
>>
>>  > I have a tibble like the below :
>>
>>  >
>>
>>  > class(us_counties)
>>
>>  > [1] "tbl_df"? ? ?"tbl"? ? ? ? "data.frame"
>>
>>  >
>>
>>  > head(us_counties)
>>
>>  > # A tibble: 6 x 8
>>
>>  >? ? date? ? ? ?deaths Todays_deaths county state fips
>>
>>  >? ? <date>? ? ? <dbl>? ? ? ? ?<dbl> <chr>? <chr> <chr>
>>
>>  > 1 2020-03-19? ? ? 0? ? ? ? ? ? ?0 Abbev~ Sout~ 45001
>>
>>  > 2 2020-03-20? ? ? 0? ? ? ? ? ? ?0 Abbev~ Sout~ 45001
>>
>>  > 3 2020-03-21? ? ? 0? ? ? ? ? ? ?0 Abbev~ Sout~ 45001
>>
>>  > 4 2020-03-22? ? ? 0? ? ? ? ? ? ?0 Abbev~ Sout~ 45001
>>
>>  > 5 2020-03-23? ? ? 0? ? ? ? ? ? ?0 Abbev~ Sout~ 45001
>>
>>  > 6 2020-03-24? ? ? 0? ? ? ? ? ? ?0 Abbev~ Sout~ 45001
>>
>>  >
>>
>>  > str(us_counties)
>>
>>  > tibble [1,082,715 x 8] (S3: tbl_df/tbl/data.frame)
>>
>>  >? ?$ date? ? ? ? ?: Date[1:1082715], format: "2020-03-19" ...
>>
>>  >? ?$ deaths? ? ? ?: num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>>
>>  >? ?$ Todays_deaths: num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>>
>>  >? ?$ county? ? ? ?: chr [1:1082715] "Abbeville" "Abbeville" "Abbeville"
>>
>>  > "Abbeville" ...
>>
>>  >? ?$ state? ? ? ? : chr [1:1082715] "South Carolina" "South  
>> Carolina" "South
>>
>>  > Carolina" "South Carolina" ...
>>
>>  >? ?$ fips? ? ? ? ?: chr [1:1082715] "45001" "45001" "45001" "45001" ...
>>
>>  >? ?$ cases? ? ? ? : num [1:1082715] 1 1 1 1 1 1 3 4 4 4 ...
>>
>>  >? ?$ Todays_cases : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>>
>>  >? ?- attr(*, "spec")=
>>
>>  >? ? .. cols(
>>
>>  >? ? ..? ?date = col_date(format = ""),
>>
>>  >? ? ..? ?county = col_character(),
>>
>>  >? ? ..? ?state = col_character(),
>>
>>  >? ? ..? ?fips = col_character(),
>>
>>  >? ? ..? ?cases = col_double(),
>>
>>  >? ? ..? ?deaths = col_double()
>>
>>  >? ? .. )
>>
>>  >? ?- attr(*, ".internal.selfref")=<externalptr>
>>
>>  >>
>>
>>  >
>>
>>  >
>>
>>  >
>>
>>  > Now when I display this in shiny UI using a simple? command:
>>
>>  >
>>
>>  >
>>
>>  >? ? ?# Generate an HTML table view of the data ----
>>
>>  >? ? ?output$ttable <- renderTable({
>>
>>  >? ? ? ? ?head(us_counties
>>
>>  >? ? ? ? ? ? ? , n = input$obs)
>>
>>  >? ? ?})
>>
>>  >
>>
>>  >
>>
>>  > I get a display like the below
>>
>>  >
>>
>>  > datedeathsTodays_deathscountystatefipscasesTodays_cases
>>
>>  > 18679.00 34.00 0.00 Abbeville South Carolina 45001 2184.00 0.00
>>
>>  > 18680.00 34.00 0.00 Abbeville South Carolina 45001 2191.00 0.00
>>
>>  > 18681.00 34.00 0.00 Abbeville South Carolina 45001 2192.00 0.00
>>
>>  >
>>
>>  > This is the change I made
>>
>>  >
>>
>>  > old code
>>
>>  > ========
>>
>>  >? ?#x <- getURL("
>>
>>  >  
>> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
>>
>>  > ")
>>
>>  >? ? #us_counties <- read.csv(text = x)
>>
>>  >? ? # 855612 Rows , 6 columns class(us_counties)
>>
>>  >
>>
>>  >
>>
>>  > this stopped working, so I changed to below
>>
>>  >
>>
>>  >
>>
>>  >? ? urlfile="
>>
>>  >  
>> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
>>
>>  > "
>>
>>  >? ? #GN added 3/3
>>
>>  >? ? us_counties<-read_csv(url(urlfile),col_types = list(date =  
>> col_date()))
>>
>>  >
>>
>>  >? ?Please let me know how to correct this
>>
>>  >
>>
>>  > Regards
>>
>>  > Gayathri
>>
>>  >
>>
>>  >? ? ? ?[[alternative HTML version deleted]]
>>
>>  >
>>
>>  > ______________________________________________
>>
>>  > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>
>>  > https://stat.ethz.ch/mailman/listinfo/r-help
>>
>>  > PLEASE do read the posting guide  
>> http://www.R-project.org/posting-guide.html
>>
>>  > and provide commented, minimal, self-contained, reproducible code.
>>
>>  >

----- Fim da mensagem de Gayathri Nagarajan  
<gayathri.nagarajan at gmail.com> -----

	[[alternative HTML version deleted]]


From tr@xp|@yer @end|ng |rom gm@||@com  Fri Mar  5 14:25:16 2021
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Fri, 5 Mar 2021 14:25:16 +0100
Subject: [R] "global parameter" warning using data.table in package.
Message-ID: <CAGAA5beG=kcQJMmnYsGMkxymPGLi=q+5akGggutAdG2n4m7E6Q@mail.gmail.com>

Hi,

  I am converting a couple of functions into a R-package. Many of the
functions use data.table.
  I have two questions using data.table in my own package.
  Normally I would put each question in separate emails but I think they
might be connected.

First question is short and I think the answer is yes.
1. Do I always need to prefix data.table each time I use something from
that package?
Eg. DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
v=1:9)

Second question is longer.
2.  In this small example code:
hello <- function() {
  DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
v=1:9)
  DT[, .(sum(v))]
}

I get these warnings from R CMD check:
hello: no visible global function definition for ?.?
hello: no visible binding for global variable ?v?
Undefined global functions or variables:
  . v

According to: vignette("datatable-importing", package = "data.table")
The solution is
hello <- function() {
  v <- NULL
  . <- NULL

And it works but looks a bit weird.
Is there a better solution?

Regards
Martin

	[[alternative HTML version deleted]]


From tr@xp|@yer @end|ng |rom gm@||@com  Fri Mar  5 14:26:32 2021
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Fri, 5 Mar 2021 14:26:32 +0100
Subject: [R] "global parameter" warning using data.table in package.
In-Reply-To: <CAGAA5beG=kcQJMmnYsGMkxymPGLi=q+5akGggutAdG2n4m7E6Q@mail.gmail.com>
References: <CAGAA5beG=kcQJMmnYsGMkxymPGLi=q+5akGggutAdG2n4m7E6Q@mail.gmail.com>
Message-ID: <CAGAA5be7Hk-ikGpnekyoDo0AjEzLa18Pn-n=xs+h-kXWPrUL5g@mail.gmail.com>

Please ignore my previous email. I just found the R-package-devel mailing
list.

On Fri, 5 Mar 2021 at 14:25, Martin M?ller Skarbiniks Pedersen <
traxplayer at gmail.com> wrote:

> Hi,
>
>   I am converting a couple of functions into a R-package. Many of the
> functions use data.table.
>   I have two questions using data.table in my own package.
>   Normally I would put each question in separate emails but I think they
> might be connected.
>
> First question is short and I think the answer is yes.
> 1. Do I always need to prefix data.table each time I use something from
> that package?
> Eg. DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
> v=1:9)
>
> Second question is longer.
> 2.  In this small example code:
> hello <- function() {
>   DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
> v=1:9)
>   DT[, .(sum(v))]
> }
>
> I get these warnings from R CMD check:
> hello: no visible global function definition for ?.?
> hello: no visible binding for global variable ?v?
> Undefined global functions or variables:
>   . v
>
> According to: vignette("datatable-importing", package = "data.table")
> The solution is
> hello <- function() {
>   v <- NULL
>   . <- NULL
>
> And it works but looks a bit weird.
> Is there a better solution?
>
> Regards
> Martin
>


-- 
Til uvedkommende, der l?ser med: Der er ingen grund til at l?se min
mail. Jeg har intet at g?re med FARC, al-Jihad, al-Qaida, Hamas, Hizb
al-Mujahidin eller ETA. Jeg har aldrig gjort Zakat, g?r ikke ind for
Istishad, har ikke lavet en bilbombe eller kernev?ben og jeg ved
d?rligt nok, hvad Al Manar og ????? betyder.  Men tak for den udviste
interesse.

Leve Ligemageriet!
Styrk p?belv?ldet!
Bevar misundelsesafgifterne og cafepengene!
Hurra for ?ldrebyrden!

	[[alternative HTML version deleted]]


From @co|we|| @end|ng |rom uogue|ph@c@  Fri Mar  5 14:42:45 2021
From: @co|we|| @end|ng |rom uogue|ph@c@ (Scott Colwell)
Date: Fri, 5 Mar 2021 13:42:45 +0000
Subject: [R] poLCA problem
Message-ID: <YT1PR01MB244344ADE1C28B38DE1EF2F8CE969@YT1PR01MB2443.CANPRD01.PROD.OUTLOOK.COM>

Good morning everyone,

I am running into errors with poLCA as follows:

Error in round(mf) : non-numeric argument to mathematical function.

Here is what I have. Both variables are coded as 1, 2, 3

df <- as.data.frame(data)

items <- c("x1", "x2")  <- there are more variables but shortened for this
purpose

df2 <- df[items]

i <- cbind(x1, x2)~1

poLCA (i, df2, nclass=2, maxiter=100, nrep=10, verbose =TRUE)

It is after the poLCA that I get the error. Any thoughts on what is causing
this?

Thanks,

Scott

	[[alternative HTML version deleted]]


From g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com  Fri Mar  5 15:35:58 2021
From: g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com (Gayathri Nagarajan)
Date: Fri, 5 Mar 2021 06:35:58 -0800
Subject: [R] A tibble with date column appears different in shiny
In-Reply-To: <CANt+qPichHQE9P-SEGb71Q5=WhgY-fy6TK+yJOvxROX9ZKO7Xg@mail.gmail.com>
References: <CANt+qPj00J5Fqza7Y9qXrHXCUGhseYFYP4Qsb1G8XjYnvMaA0w@mail.gmail.com>
 <0c6a1e8c-8695-bd75-e589-b1b7ac26fbcb@sapo.pt>
 <CANt+qPichHQE9P-SEGb71Q5=WhgY-fy6TK+yJOvxROX9ZKO7Xg@mail.gmail.com>
Message-ID: <CANt+qPhhP9ju5Gkyj+o7N0a6R3RP8LUpxKKUCXk8RtyoQ8YSDQ@mail.gmail.com>

Hi Rui

Alas, at last this worked and this is what I did :

1) I stopped debugging and started a fresh new table to display in shiny UI
using this example-https://shiny.rstudio.com/gallery/basic-datatable.html
2) Now instead of the table mpg, I plugged in my us_counties above at first
and it worked :-)

I really don't have an answer as to how this was working fine till 2 days
back with the reactive inputs I had in Shiny UI or the read.csv
<https://stackoverflow.com/questions/14441729/read-a-csv-from-github-into-r>
command for the .csv file in GITHUB.


Thanks so much to you for your help as you tried to relentlessly help me
out the past three days.
*So the conclusion is - Starting afresh with DT::dataTableOutput solved the
issue*

*Code  change*
*===============*

In UI.R:
    tabPanel(strong("Table"),DT::dataTableOutput("dumtable"))

In Server.R
output$dumtable <- DT::renderDataTable(DT::datatable({
     data <- us_counties
       data <- data[data$state == input$state,]


       data <- data[data$county == input$county,]

       data <- data[data$date >= input$date2,]

        head(data,n=input$obs)
   }))
   ====================



Regards
Gayathri


On Thu, 4 Mar 2021 at 21:51, Gayathri Nagarajan <
gayathri.nagarajan at gmail.com> wrote:

> Hi Rui
>
> Tried renderDatatable, but now my shiny UI shows Blank for my tibble. Not
> sure what Iam missing suddenly when this was working fine a day back.
>
> The one change I did was:
>
> x <- getURL("
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> ")
> us_counties <- read.csv(text = x)
>
> Error in function (type, msg, asError = TRUE)  :
>   error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol
> version
>
> Hence had to change this to :
>
>
>   urlfile="
> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
> "
>   #GN added 3/3
>   #GN comment 3/4
>   #us_counties<-read_csv(url(urlfile),col_types = list(date = col_date()))
>   #GN Add 3/4
>   #GN added 3/3
>   cols_spec <- cols(
>     date = col_date(format = ""),
>     county = col_character(),
>     state = col_character(),
>     fips = col_character(),
>     cases = col_double(),
>     deaths = col_double()
>   )
>
>   us_counties <- read_csv(url(urlfile), col_types = cols_spec)
>  ===========================
>
>
> Regards
> Gayathri
>
>
> On Thu, 4 Mar 2021 at 08:41, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> Hello,
>>
>> This is a known issue with renderTable. Show the results with
>> renderDataTable instead.
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 15:24 de 03/03/21, Gayathri Nagarajan escreveu:
>> > Hi Team
>> >
>> > I have a tibble like the below :
>> >
>> > class(us_counties)
>> > [1] "tbl_df"     "tbl"        "data.frame"
>> >
>> > head(us_counties)
>> > # A tibble: 6 x 8
>> >    date       deaths Todays_deaths county state fips
>> >    <date>      <dbl>         <dbl> <chr>  <chr> <chr>
>> > 1 2020-03-19      0             0 Abbev~ Sout~ 45001
>> > 2 2020-03-20      0             0 Abbev~ Sout~ 45001
>> > 3 2020-03-21      0             0 Abbev~ Sout~ 45001
>> > 4 2020-03-22      0             0 Abbev~ Sout~ 45001
>> > 5 2020-03-23      0             0 Abbev~ Sout~ 45001
>> > 6 2020-03-24      0             0 Abbev~ Sout~ 45001
>> >
>> > str(us_counties)
>> > tibble [1,082,715 x 8] (S3: tbl_df/tbl/data.frame)
>> >   $ date         : Date[1:1082715], format: "2020-03-19" ...
>> >   $ deaths       : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>> >   $ Todays_deaths: num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>> >   $ county       : chr [1:1082715] "Abbeville" "Abbeville" "Abbeville"
>> > "Abbeville" ...
>> >   $ state        : chr [1:1082715] "South Carolina" "South Carolina"
>> "South
>> > Carolina" "South Carolina" ...
>> >   $ fips         : chr [1:1082715] "45001" "45001" "45001" "45001" ...
>> >   $ cases        : num [1:1082715] 1 1 1 1 1 1 3 4 4 4 ...
>> >   $ Todays_cases : num [1:1082715] 0 0 0 0 0 0 0 0 0 0 ...
>> >   - attr(*, "spec")=
>> >    .. cols(
>> >    ..   date = col_date(format = ""),
>> >    ..   county = col_character(),
>> >    ..   state = col_character(),
>> >    ..   fips = col_character(),
>> >    ..   cases = col_double(),
>> >    ..   deaths = col_double()
>> >    .. )
>> >   - attr(*, ".internal.selfref")=<externalptr>
>> >>
>> >
>> >
>> >
>> > Now when I display this in shiny UI using a simple  command:
>> >
>> >
>> >     # Generate an HTML table view of the data ----
>> >     output$ttable <- renderTable({
>> >         head(us_counties
>> >              , n = input$obs)
>> >     })
>> >
>> >
>> > I get a display like the below
>> >
>> > datedeathsTodays_deathscountystatefipscasesTodays_cases
>> > 18679.00 34.00 0.00 Abbeville South Carolina 45001 2184.00 0.00
>> > 18680.00 34.00 0.00 Abbeville South Carolina 45001 2191.00 0.00
>> > 18681.00 34.00 0.00 Abbeville South Carolina 45001 2192.00 0.00
>> >
>> > This is the change I made
>> >
>> > old code
>> > ========
>> >   #x <- getURL("
>> >
>> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
>> > ")
>> >    #us_counties <- read.csv(text = x)
>> >    # 855612 Rows , 6 columns class(us_counties)
>> >
>> >
>> > this stopped working, so I changed to below
>> >
>> >
>> >    urlfile="
>> >
>> https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv
>> > "
>> >    #GN added 3/3
>> >    us_counties<-read_csv(url(urlfile),col_types = list(date =
>> col_date()))
>> >
>> >   Please let me know how to correct this
>> >
>> > Regards
>> > Gayathri
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Mar  5 16:28:20 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 5 Mar 2021 07:28:20 -0800
Subject: [R] "global parameter" warning using data.table in package.
In-Reply-To: <CAGAA5beG=kcQJMmnYsGMkxymPGLi=q+5akGggutAdG2n4m7E6Q@mail.gmail.com>
References: <CAGAA5beG=kcQJMmnYsGMkxymPGLi=q+5akGggutAdG2n4m7E6Q@mail.gmail.com>
Message-ID: <CAGxFJbRjcM_X9cAZ3GgS0p-pAFOGbKXpBnddHdZ=E4EOwuxSpQ@mail.gmail.com>

I believe these questions belong on r-package-devel, not here.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Mar 5, 2021 at 5:25 AM Martin M?ller Skarbiniks Pedersen <
traxplayer at gmail.com> wrote:

> Hi,
>
>   I am converting a couple of functions into a R-package. Many of the
> functions use data.table.
>   I have two questions using data.table in my own package.
>   Normally I would put each question in separate emails but I think they
> might be connected.
>
> First question is short and I think the answer is yes.
> 1. Do I always need to prefix data.table each time I use something from
> that package?
> Eg. DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
> v=1:9)
>
> Second question is longer.
> 2.  In this small example code:
> hello <- function() {
>   DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
> v=1:9)
>   DT[, .(sum(v))]
> }
>
> I get these warnings from R CMD check:
> hello: no visible global function definition for ?.?
> hello: no visible binding for global variable ?v?
> Undefined global functions or variables:
>   . v
>
> According to: vignette("datatable-importing", package = "data.table")
> The solution is
> hello <- function() {
>   v <- NULL
>   . <- NULL
>
> And it works but looks a bit weird.
> Is there a better solution?
>
> Regards
> Martin
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Mar  5 19:09:41 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 05 Mar 2021 10:09:41 -0800
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <1614935662799.60644@precheza.cz>
References: <1614935662799.60644@precheza.cz>
Message-ID: <CE56E5CE-E1DE-4D26-8B39-0B6C95977BCD@dcn.davis.ca.us>

Your example could probably be resolved with approx. If you want a more robust solution, it looks like the fBasics package can do spline interpolation. You may want to spline on the log  of your size variable and use exp on the output if you want to avoid negative results.

On March 5, 2021 1:14:22 AM PST, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>Dear all
>
>I have table of quantiles, probably from lognormal distribution
>
> dput(temp)
>temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069,
>0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1,
>0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
>), row.names = c(NA, -9L), class = "data.frame")
>
>and I need to calculate quantile for size 0.1
>
>plot(temp$size, temp$percent, pch=19, xlim=c(0,2))
>ss <- approxfun(temp$size, temp$percent)
>points((0:100)/50, ss((0:100)/50))
>abline(v=.1)
>
>If I had original data it would be quite easy with ecdf/quantile
>function but without it I am lost what function I could use for such
>task.
>
>Please, give me some hint where to look.
>
>
>Best regards
>
>Petr
>Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>about processing and protection of business partner's personal data are
>available on website:
>https://www.precheza.cz/en/personal-data-protection-principles/
>D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl?en? o vylou?en?
>odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
>documents attached to it may be confidential and are subject to the
>legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>
>
>	[[alternative HTML version deleted]]

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Fri Mar  5 19:23:40 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 5 Mar 2021 10:23:40 -0800
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <1614935662799.60644@precheza.cz>
References: <1614935662799.60644@precheza.cz>
Message-ID: <72ca63c3-3b22-cc38-5d39-85d39d211500@comcast.net>


On 3/5/21 1:14 AM, PIKAL Petr wrote:
> Dear all
>
> I have table of quantiles, probably from lognormal distribution
>
>   dput(temp)
> temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069,
> 0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1,
> 0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
> ), row.names = c(NA, -9L), class = "data.frame")
>
> and I need to calculate quantile for size 0.1
>
> plot(temp$size, temp$percent, pch=19, xlim=c(0,2))
> ss <- approxfun(temp$size, temp$percent)
> points((0:100)/50, ss((0:100)/50))
> abline(v=.1)
>
> If I had original data it would be quite easy with ecdf/quantile function but without it I am lost what function I could use for such task.

The quantiles are in reverse order so tryoing to match the data to 
quantiles from candidate parameters requires subtracting them from unity:

 > temp$size
[1] 1.6000 0.9466 0.8062 0.6477 0.5069 0.3781 0.3047 0.2681 0.1907
 > qlnorm(1-temp$percent, -.5)
[1] 6.21116124 3.14198142 2.18485959 1.19063854 0.60653066 0.30897659 
0.16837670 0.11708517 0.05922877
 > qlnorm(1-temp$percent, -.9)
[1] 4.16346589 2.10613313 1.46455518 0.79810888 0.40656966 0.20711321 
0.11286628 0.07848454 0.03970223
 > qlnorm(1-temp$percent, -2)
[1] 1.38589740 0.70107082 0.48750807 0.26566737 0.13533528 0.06894200 
0.03756992 0.02612523 0.01321572
 > qlnorm(1-temp$percent, -1.6)
[1] 2.06751597 1.04587476 0.72727658 0.39632914 0.20189652 0.10284937 
0.05604773 0.03897427 0.01971554
 > qlnorm(1-temp$percent, -1.6, .5)
[1] 0.64608380 0.45951983 0.38319004 0.28287360 0.20189652 0.14410042 
0.10637595 0.08870608 0.06309120
 > qlnorm(1-temp$percent, -1, .5)
[1] 1.1772414 0.8372997 0.6982178 0.5154293 0.3678794 0.2625681 
0.1938296 0.1616330 0.1149597
 > qlnorm(1-temp$percent, -1, .4)
[1] 0.9328967 0.7103066 0.6142340 0.4818106 0.3678794 0.2808889 
0.2203318 0.1905308 0.1450700
 > qlnorm(1-temp$percent, -0.5, .4)
[1] 1.5380866 1.1710976 1.0127006 0.7943715 0.6065307 0.4631076 
0.3632657 0.3141322 0.2391799
 > qlnorm(1-temp$percent, -0.55, .4)
[1] 1.4630732 1.1139825 0.9633106 0.7556295 0.5769498 0.4405216 
0.3455491 0.2988118 0.2275150
 > qlnorm(1-temp$percent, -0.55, .35)
[1] 1.3024170 1.0260318 0.9035201 0.7305712 0.5769498 0.4556313 
0.3684158 0.3244257 0.2555795
 > qlnorm(1-temp$percent, -0.55, .45)
[1] 1.6435467 1.2094723 1.0270578 0.7815473 0.5769498 0.4259129 
0.3241016 0.2752201 0.2025322
 > qlnorm(1-temp$percent, -0.53, .45)
[1] 1.6767486 1.2339052 1.0478057 0.7973356 0.5886050 0.4345169 
0.3306489 0.2807799 0.2066236
 > qlnorm(1-temp$percent, -0.57, .45)
[1] 1.6110023 1.1855231 1.0067207 0.7660716 0.5655254 0.4174793 
0.3176840 0.2697704 0.1985218

Seems like it might be an acceptable fit. modulo the underlying data 
gathering situation which really should be considered.

You can fiddle with that result. My statistical hat (not of PhD level 
certification) says that the middle quantiles in this sequence probably 
have the lowest sampling error for a lognormal, but I'm rather unsure 
about that. A counter-argument might be that since there is a hard lower 
bound of 0 for the 0-th quantile that you should be more worried about 
matching the 0.1907 value to the 0.01 order statistic, since 99% of the 
data is know to be above it. Seems like efforts at matching the 0.50 
quantile to 0.5069 for the logmean parameter and matching the 0.01 
quantile 0.1907 for estimation of? the variance estimate might be 
preferred to worrying too much about the 1.6 value which would be in the 
right tail (and far away from your region of extrapolation.)


Further trial and error:


 > qlnorm(1-temp$percent, -0.58, .47)
[1] 1.6709353 1.2129813 1.0225804 0.7687497 0.5598984 0.4077870 
0.3065638 0.2584427 0.1876112
 > qlnorm(1-temp$percent, -0.65, .47)
[1] 1.5579697 1.1309763 0.9534476 0.7167775 0.5220458 0.3802181 
0.2858382 0.2409704 0.1749275
 > qlnorm(1-temp$percent, -0.65, .5)
[1] 1.6705851 1.1881849 0.9908182 0.7314290 0.5220458 0.3726018 
0.2750573 0.2293682 0.1631355
 > qlnorm(1-temp$percent, -0.65, .4)
[1] 1.3238434 1.0079731 0.8716395 0.6837218 0.5220458 0.3986004 
0.3126657 0.2703761 0.2058641
 > qlnorm(1-temp$percent, -0.68, .4)
[1] 1.2847179 0.9781830 0.8458786 0.6635148 0.5066170 0.3868200 
0.3034251 0.2623852 0.1997799
 > qlnorm(1-temp$percent, -0.65, .39)
[1] 1.2934016 0.9915290 0.8605402 0.6791257 0.5220458 0.4012980 
0.3166985 0.2748601 0.2107093
 >
 > qlnorm(1-temp$percent, -0.65, .42)
[1] 1.3868932 1.0416839 0.8942693 0.6930076 0.5220458 0.3932595 
0.3047536 0.2616262 0.1965053
 > qlnorm(1-temp$percent, -0.68, .42)
[1] 1.3459043 1.0108975 0.8678396 0.6725261 0.5066170 0.3816369 
0.2957468 0.2538940 0.1906976


(I did make an effort at searching for quantile matching as a method for 
distribution fitting, but came up empty.)


-- 

David.

>
> Please, give me some hint where to look.
>
>
> Best regards
>
> Petr
 >[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Fri Mar  5 20:17:59 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 6 Mar 2021 08:17:59 +1300
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <1614935662799.60644@precheza.cz>
References: <1614935662799.60644@precheza.cz>
Message-ID: <CAB8pepzwR97maS4PuF9UYPPGuONqwPfQ4e4AxmyxFAoipXBZYA@mail.gmail.com>

I note three problems with your data:
(1) The name "percent" is misleading, perhaps you want "probability"?
(2) There are straight (or near-straight) regions, each of which, is
equally (or near-equally) spaced, which is not what I would expect in
problems involving "quantiles".
(3) Your plot (approximating the distribution function) is
back-the-front (as per what is customary).


On Fri, Mar 5, 2021 at 10:14 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Dear all
>
> I have table of quantiles, probably from lognormal distribution
>
>  dput(temp)
> temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069,
> 0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1,
> 0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
> ), row.names = c(NA, -9L), class = "data.frame")
>
> and I need to calculate quantile for size 0.1
>
> plot(temp$size, temp$percent, pch=19, xlim=c(0,2))
> ss <- approxfun(temp$size, temp$percent)
> points((0:100)/50, ss((0:100)/50))
> abline(v=.1)
>
> If I had original data it would be quite easy with ecdf/quantile function but without it I am lost what function I could use for such task.
>
> Please, give me some hint where to look.
>
>
> Best regards
>
> Petr
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner's personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @purd|e@@ @end|ng |rom gm@||@com  Fri Mar  5 22:08:36 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 6 Mar 2021 10:08:36 +1300
Subject: [R] problem downloading R
In-Reply-To: <c0f9b062-5e0e-9592-e705-54059d638181@statistik.tu-dortmund.de>
References: <960232bc-c4e3-25ce-e607-ec047cc22af1@earthlink.net>
 <CAB8pepwgyQKffpqsFKVxSVXfbi83_4Hh3x3v+OttcEv5VV2cpQ@mail.gmail.com>
 <c0f9b062-5e0e-9592-e705-54059d638181@statistik.tu-dortmund.de>
Message-ID: <CAB8pepzNQ8iZfhXitKXwhez1PJDOvkAMS7kex-GQVzNy0RO5pA@mail.gmail.com>

This was quite some time ago.
Namely, 2019.

At the time, I was using a mix of old Windows 8 and 9 computers.
The problem happened on Windows 8, but not Windows 9.

Note that I was trying to help the OP.
Beyond that, I'm not concerned about it.


On Fri, Mar 5, 2021 at 9:30 PM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
> Sounds like you always got corrupted vesions. Either an issue with your
> connection or the mirror. What happens if you try another mirror and
> clear your browser caches?
>
> Best,
> Uwe Ligges
>
> On 05.03.2021 08:58, Abby Spurdle wrote:
> > Does the following sound familiar?
> >
> > The Windows installer starts installing (or decompressing) R, flashing
> > one file name at a time.
> > And then, part way through, says XXXX file is corrupt, and gives you
> > the choice to ignore.
> > And if you click ignore, then the next file does the same thing.
> > And one quickly realizes, that every subsequent file will have the same message.
> >
> > Then if you re-download the installation file, the same thing happens.
> > Except that the first file flagged as corrupted, is not necessarily
> > the same file.
> >
> >
> > On Fri, Mar 5, 2021 at 5:55 AM Dick Mathews <dmathews63 at earthlink.net> wrote:
> >>
> >> I am trying to download the Windows version of R. This computer is Win7,
> >> I do have Win10 computers also.
> >>
> >> Tried R4.0.4, got message these files are corrupted.
> >>
> >> Then tried R4.0.3, got same message as above.
> >>
> >> Tried the next, R4.0.2, got same message.
> >>
> >> I checked to see if I was downloading the proper version, seems okay.
> >>
> >> What is the problem? Can anybody help me with this?
> >>
> >> Dick Mathews
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >


From @purd|e@@ @end|ng |rom gm@||@com  Sat Mar  6 08:09:41 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 6 Mar 2021 20:09:41 +1300
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <CAB8pepzwR97maS4PuF9UYPPGuONqwPfQ4e4AxmyxFAoipXBZYA@mail.gmail.com>
References: <1614935662799.60644@precheza.cz>
 <CAB8pepzwR97maS4PuF9UYPPGuONqwPfQ4e4AxmyxFAoipXBZYA@mail.gmail.com>
Message-ID: <CAB8pepzddGaX5NFnzqSJq6YR3t+-cwKAg=rfH9a=1pEt08ATwQ@mail.gmail.com>

I'm sorry.
I misread your example, this morning.
(I didn't read the code after the line that calls plot).

After looking at this problem again, interpolation doesn't apply, and
extrapolation would be a last resort.
If you can assume your data comes from a particular type of
distribution, such as a lognormal distribution, then a better approach
would be to find the most likely parameters.

i.e.
This falls within the broader scope of maximum likelihood.
(Except that you're dealing with a table of quantile-probability
pairs, rather than raw observational data).

I suspect that there's a relatively easy way of finding the parameters.

I'll think about it...
But someone else may come back with an answer first...


On Sat, Mar 6, 2021 at 8:17 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> I note three problems with your data:
> (1) The name "percent" is misleading, perhaps you want "probability"?
> (2) There are straight (or near-straight) regions, each of which, is
> equally (or near-equally) spaced, which is not what I would expect in
> problems involving "quantiles".
> (3) Your plot (approximating the distribution function) is
> back-the-front (as per what is customary).
>
>
> On Fri, Mar 5, 2021 at 10:14 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Dear all
> >
> > I have table of quantiles, probably from lognormal distribution
> >
> >  dput(temp)
> > temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069,
> > 0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1,
> > 0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
> > ), row.names = c(NA, -9L), class = "data.frame")
> >
> > and I need to calculate quantile for size 0.1
> >
> > plot(temp$size, temp$percent, pch=19, xlim=c(0,2))
> > ss <- approxfun(temp$size, temp$percent)
> > points((0:100)/50, ss((0:100)/50))
> > abline(v=.1)
> >
> > If I had original data it would be quite easy with ecdf/quantile function but without it I am lost what function I could use for such task.
> >
> > Please, give me some hint where to look.
> >
> >
> > Best regards
> >
> > Petr
> > Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner's personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
> > D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From @purd|e@@ @end|ng |rom gm@||@com  Sat Mar  6 10:02:25 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 6 Mar 2021 22:02:25 +1300
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <CAB8pepzddGaX5NFnzqSJq6YR3t+-cwKAg=rfH9a=1pEt08ATwQ@mail.gmail.com>
References: <1614935662799.60644@precheza.cz>
 <CAB8pepzwR97maS4PuF9UYPPGuONqwPfQ4e4AxmyxFAoipXBZYA@mail.gmail.com>
 <CAB8pepzddGaX5NFnzqSJq6YR3t+-cwKAg=rfH9a=1pEt08ATwQ@mail.gmail.com>
Message-ID: <CAB8pepwdDhdozwPwa7E5QuQ_B_1BWDP28uj46YJVNEioWLsbkw@mail.gmail.com>

I came up with a solution.
But not necessarily the best solution.

I used a spline to approximate the quantile function.
Then use that to generate a large sample.
(I don't see any need for the sample to be random, as such).
Then compute the sample mean and sd, on a log scale.
Finally, plug everything into the plnorm function:

p <- seq (0.01, 0.99,, 1e6)
Fht <- splinefun (temp$percent, temp$size)
x <- log (Fht (p) )
psolution <- plnorm (0.1, mean (x), sd (x), FALSE)
psolution

The value of the solution is very close to one.
Which is not a surprise.

Here's a plot of everything:

u <- seq (0.000001, 1.65,, 200)
v <- plnorm (u, mean (x), sd (x), FALSE)
plot (u, v, type="l", ylim = c (0, 1) )
points (temp$size, temp$percent, pch=16)
points (0.1, psolution, pch=16, col="blue")


On Sat, Mar 6, 2021 at 8:09 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> I'm sorry.
> I misread your example, this morning.
> (I didn't read the code after the line that calls plot).
>
> After looking at this problem again, interpolation doesn't apply, and
> extrapolation would be a last resort.
> If you can assume your data comes from a particular type of
> distribution, such as a lognormal distribution, then a better approach
> would be to find the most likely parameters.
>
> i.e.
> This falls within the broader scope of maximum likelihood.
> (Except that you're dealing with a table of quantile-probability
> pairs, rather than raw observational data).
>
> I suspect that there's a relatively easy way of finding the parameters.
>
> I'll think about it...
> But someone else may come back with an answer first...
>
>
> On Sat, Mar 6, 2021 at 8:17 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
> >
> > I note three problems with your data:
> > (1) The name "percent" is misleading, perhaps you want "probability"?
> > (2) There are straight (or near-straight) regions, each of which, is
> > equally (or near-equally) spaced, which is not what I would expect in
> > problems involving "quantiles".
> > (3) Your plot (approximating the distribution function) is
> > back-the-front (as per what is customary).
> >
> >
> > On Fri, Mar 5, 2021 at 10:14 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> > >
> > > Dear all
> > >
> > > I have table of quantiles, probably from lognormal distribution
> > >
> > >  dput(temp)
> > > temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069,
> > > 0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1,
> > > 0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
> > > ), row.names = c(NA, -9L), class = "data.frame")
> > >
> > > and I need to calculate quantile for size 0.1
> > >
> > > plot(temp$size, temp$percent, pch=19, xlim=c(0,2))
> > > ss <- approxfun(temp$size, temp$percent)
> > > points((0:100)/50, ss((0:100)/50))
> > > abline(v=.1)
> > >
> > > If I had original data it would be quite easy with ecdf/quantile function but without it I am lost what function I could use for such task.
> > >
> > > Please, give me some hint where to look.
> > >
> > >
> > > Best regards
> > >
> > > Petr
> > > Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner's personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
> > > D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> > >
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Mar  7 01:32:33 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 6 Mar 2021 16:32:33 -0800
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <CAB8pepwdDhdozwPwa7E5QuQ_B_1BWDP28uj46YJVNEioWLsbkw@mail.gmail.com>
References: <1614935662799.60644@precheza.cz>
 <CAB8pepzwR97maS4PuF9UYPPGuONqwPfQ4e4AxmyxFAoipXBZYA@mail.gmail.com>
 <CAB8pepzddGaX5NFnzqSJq6YR3t+-cwKAg=rfH9a=1pEt08ATwQ@mail.gmail.com>
 <CAB8pepwdDhdozwPwa7E5QuQ_B_1BWDP28uj46YJVNEioWLsbkw@mail.gmail.com>
Message-ID: <362ec2a4-8c88-36ac-1b1b-19ab97362515@comcast.net>


On 3/6/21 1:02 AM, Abby Spurdle wrote:
> I came up with a solution.
> But not necessarily the best solution.
>
> I used a spline to approximate the quantile function.
> Then use that to generate a large sample.
> (I don't see any need for the sample to be random, as such).
> Then compute the sample mean and sd, on a log scale.
> Finally, plug everything into the plnorm function:
>
> p <- seq (0.01, 0.99,, 1e6)
> Fht <- splinefun (temp$percent, temp$size)
> x <- log (Fht (p) )
> psolution <- plnorm (0.1, mean (x), sd (x), FALSE)
> psolution
>
> The value of the solution is very close to one.
> Which is not a surprise.
>
> Here's a plot of everything:
>
> u <- seq (0.000001, 1.65,, 200)
> v <- plnorm (u, mean (x), sd (x), FALSE)
> plot (u, v, type="l", ylim = c (0, 1) )
> points (temp$size, temp$percent, pch=16)
> points (0.1, psolution, pch=16, col="blue")

Here's another approach, which uses minimization of the squared error to 
get the parameters for a lognormal distribution.

temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069,
0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1,
0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
), row.names = c(NA, -9L), class = "data.frame")

obj <- function(x) {sum( qlnorm(1-temp$percent, x[[1]], 
x[[2]])-temp$size )^2}

# Note the inversion of the poorly named and flipped "percent" column,

optim( list(a=-0.65, b=0.42), obj)

#--------------------

$par
 ???????? a????????? b
-0.7020649? 0.4678656

$value
[1] 3.110316e-12

$counts
function gradient
 ????? 51?????? NA

$convergence
[1] 0

$message
NULL


I'm not sure how principled this might be. There's no consideration in 
this approach for expected sampling error at the right tail where the 
magnitudes of the observed values will create much larger contributions 
to the sum of squares.

-- 

David.

>
>
> On Sat, Mar 6, 2021 at 8:09 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>> I'm sorry.
>> I misread your example, this morning.
>> (I didn't read the code after the line that calls plot).
>>
>> After looking at this problem again, interpolation doesn't apply, and
>> extrapolation would be a last resort.
>> If you can assume your data comes from a particular type of
>> distribution, such as a lognormal distribution, then a better approach
>> would be to find the most likely parameters.
>>
>> i.e.
>> This falls within the broader scope of maximum likelihood.
>> (Except that you're dealing with a table of quantile-probability
>> pairs, rather than raw observational data).
>>
>> I suspect that there's a relatively easy way of finding the parameters.
>>
>> I'll think about it...
>> But someone else may come back with an answer first...
>>
>>
>> On Sat, Mar 6, 2021 at 8:17 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
>>> I note three problems with your data:
>>> (1) The name "percent" is misleading, perhaps you want "probability"?
>>> (2) There are straight (or near-straight) regions, each of which, is
>>> equally (or near-equally) spaced, which is not what I would expect in
>>> problems involving "quantiles".
>>> (3) Your plot (approximating the distribution function) is
>>> back-the-front (as per what is customary).
>>>
>>>
>>> On Fri, Mar 5, 2021 at 10:14 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>>>> Dear all
>>>>
>>>> I have table of quantiles, probably from lognormal distribution
>>>>
>>>>   dput(temp)
>>>> temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069,
>>>> 0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1,
>>>> 0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
>>>> ), row.names = c(NA, -9L), class = "data.frame")
>>>>
>>>> and I need to calculate quantile for size 0.1
>>>>
>>>> plot(temp$size, temp$percent, pch=19, xlim=c(0,2))
>>>> ss <- approxfun(temp$size, temp$percent)
>>>> points((0:100)/50, ss((0:100)/50))
>>>> abline(v=.1)
>>>>
>>>> If I had original data it would be quite easy with ecdf/quantile function but without it I am lost what function I could use for such task.
>>>>
>>>> Please, give me some hint where to look.
>>>>
>>>>
>>>> Best regards
>>>>
>>>> Petr
>>>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner's personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
>>>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>>>>
>>>>
>>>>          [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From roger@bo@ @end|ng |rom gm@||@com  Sun Mar  7 01:07:33 2021
From: roger@bo@ @end|ng |rom gm@||@com (Roger Bos)
Date: Sat, 6 Mar 2021 19:07:33 -0500
Subject: [R] mpfr function in Rmpfr crashes R
Message-ID: <CAPV07m-Dxt-2BHOR1oxeSW5dfB1o3dJK8s9HRvuy-QxtyqLPkg@mail.gmail.com>

All,

The following code crashes by R on my mac with a message "R session
aborted.  A fatal error occured".

```
library(Rmpfr)
Rmpfr::mpfr(pi, 120)
```

Does anyone have any suggestions?   My session info is below:

R version 4.0.3 (2020-10-10)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
LAPACK:
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] datasets  utils     stats     graphics  grDevices methods   base

other attached packages:
 [1] alphavantager_0.1.2 googlesheets4_0.2.0 googledrive_1.0.1
clipr_0.7.1
 [5] jsonlite_1.7.2      stringi_1.5.3       dtplyr_1.0.1
 data.table_1.13.6
 [9] dplyr_1.0.4         plyr_1.8.6          testthat_3.0.1
 lubridate_1.7.9.2
[13] timeDate_3043.102   sendmailR_1.2-1     rmarkdown_2.6
devtools_2.3.2
[17] usethis_2.0.0       xts_0.12.1          zoo_1.8-8
MASS_7.3-53
[21] fortunes_1.5-4

loaded via a namespace (and not attached):
 [1] tinytex_0.29      tidyselect_1.1.0  xfun_0.20         remotes_2.2.0
  purrr_0.3.4
 [6] gargle_0.5.0      lattice_0.20-41   generics_0.1.0    vctrs_0.3.6
  htmltools_0.5.1.1
[11] base64enc_0.1-3   rlang_0.4.10      pkgbuild_1.2.0    pillar_1.4.7
 glue_1.4.2
[16] withr_2.4.1       DBI_1.1.1         sessioninfo_1.1.1 lifecycle_0.2.0
  cellranger_1.1.0
[21] evaluate_0.14     memoise_2.0.0     knitr_1.31        callr_3.5.1
  fastmap_1.1.0
[26] ps_1.5.0          curl_4.3          Rcpp_1.0.6        openssl_1.4.3
  cachem_1.0.1
[31] desc_1.2.0        pkgload_1.1.0     fs_1.5.0          askpass_1.1
  digest_0.6.27
[36] processx_3.4.5    grid_4.0.3        rprojroot_2.0.2   cli_2.3.0
  tools_4.0.3
[41] magrittr_2.0.1    tibble_3.0.6      crayon_1.4.0      pkgconfig_2.0.3
  ellipsis_0.3.1
[46] prettyunits_1.1.1 httr_1.4.2        assertthat_0.2.1  R6_2.5.0
 compiler_4.0.3
19:05:52  >

Thanks,

Roger

	[[alternative HTML version deleted]]


From neotrop|c@|@b@t@ @end|ng |rom gm@||@com  Sun Mar  7 14:03:20 2021
From: neotrop|c@|@b@t@ @end|ng |rom gm@||@com (Neotropical bat risk assessments and acoustic tools)
Date: Sun, 7 Mar 2021 06:03:20 -0700
Subject: [R] Package to generate moon phase - SR-SS
In-Reply-To: <mailman.362419.1.1615114801.64193.r-help@r-project.org>
References: <mailman.362419.1.1615114801.64193.r-help@r-project.org>
Message-ID: <52ae8c5f-5162-847f-8178-2dcc1eb5ffea@gmail.com>

Hi all

I have not found a package by Googling, but assume there must be at 
least one out there.
I need to generate/write sun rise-sun set times (civil twilight) and 
moon phase/illumination.

I would like to add a start date and end date along with location 
coordinates and have a table generated like below.
This is from a legacy program acquired some 30 years ago and is no 
longer available.? This can only generate 1 month at a time (subset 
below).? But for a year at a time both historical and for future dates 
and locations.

For this legacy program I enter the date and select a location I have in 
a simple TXT location file location with time-zone and X-Y coordinates 
and it will generate a month at a time.? this can be dumped to the 
clipboard but not written as a TXT or delimited file.

I am hoping there will be an elegant way to do this in R and have the 
results written to a file for import into an Access DB.
Tnx for any suggestions? on package(s).

Sample below.

 ??????????????????? Sun and Moon Data for March 2021
 ???????????????????????? 17.05?N? 88.57?W? 5hrW
 ????????????????????? Standard Time? Civil Twilight

 ??????????????????????????? Sun???????????????????????? Moon
 ????? Date??? Twi.? Rise? Transit? Set??? Twi.? Rise? Transit Set??? %

 ?? 3/1/2021? 06:50? 07:12? 13:07? 19:01? 19:23? 21:36? 02:52? 09:04 92
 ?? 3/2/2021? 06:50? 07:11? 13:06? 19:01? 19:23? 22:35? 03:43? 09:47 85
 ?? 3/3/2021? 06:49? 07:11? 13:06? 19:02? 19:23? 23:35? 04:35? 10:31 76
 ?? 3/4/2021? 06:48? 07:10? 13:06? 19:02? 19:24? *****? 05:28? 11:18 65

-- 
Bruce W. Miller, PhD.
Neotropical bat risk and acoustic assessments
Conservation Fellow - Wildlife Conservation Society
Research Associate, American Museum of Natural History

If we lose the bats, we may lose much of the tropical vegetation and the lungs of the planet

Using acoustic sampling to identify and map species distributions
and pioneering acoustic tools for ecology and conservation of bats for >25 years.

Key projects include providing free interactive identification keys and call fact sheets for the vocal signatures of New World Bats


From j|ox @end|ng |rom mcm@@ter@c@  Sun Mar  7 15:54:57 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Sun, 7 Mar 2021 09:54:57 -0500
Subject: [R] mpfr function in Rmpfr crashes R
In-Reply-To: <1555_1615120206_127CU5fl026596_CAPV07m-Dxt-2BHOR1oxeSW5dfB1o3dJK8s9HRvuy-QxtyqLPkg@mail.gmail.com>
References: <1555_1615120206_127CU5fl026596_CAPV07m-Dxt-2BHOR1oxeSW5dfB1o3dJK8s9HRvuy-QxtyqLPkg@mail.gmail.com>
Message-ID: <2e996c6a-edd5-ef14-03c8-5a716c6d552e@mcmaster.ca>

Dear Roger,

This works perfectly fine for me on an apparently similar system, with 
the exceptions that I'm running R 4.0.4, have many fewer packages 
loaded, and am in a slightly different locale:

--------------- snip ------------

 > Rmpfr::mpfr(pi, 120)
1 'mpfr' number of precision  120   bits
[1] 3.1415926535897931159979634685441851616

 > sessionInfo()
R version 4.0.4 (2021-02-15)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Rmpfr_0.8-2 gmp_0.6-2

loaded via a namespace (and not attached):
  [1] compiler_4.0.4    htmltools_0.5.1.1 tools_4.0.4       yaml_2.2.1 
       rmarkdown_2.6
  [6] knitr_1.31        xfun_0.21         digest_0.6.27 
packrat_0.5.0     rlang_0.4.10
[11] evaluate_0.14

--------------- snip ------------

You might try updating R or running Rmpfr in a cleaner session.

I hope this helps,
  John

John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2021-03-06 7:07 p.m., Roger Bos wrote:
> All,
> 
> The following code crashes by R on my mac with a message "R session
> aborted.  A fatal error occured".
> 
> ```
> library(Rmpfr)
> Rmpfr::mpfr(pi, 120)
> ```
> 
> Does anyone have any suggestions?   My session info is below:
> 
> R version 4.0.3 (2020-10-10)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] datasets  utils     stats     graphics  grDevices methods   base
> 
> other attached packages:
>   [1] alphavantager_0.1.2 googlesheets4_0.2.0 googledrive_1.0.1
> clipr_0.7.1
>   [5] jsonlite_1.7.2      stringi_1.5.3       dtplyr_1.0.1
>   data.table_1.13.6
>   [9] dplyr_1.0.4         plyr_1.8.6          testthat_3.0.1
>   lubridate_1.7.9.2
> [13] timeDate_3043.102   sendmailR_1.2-1     rmarkdown_2.6
> devtools_2.3.2
> [17] usethis_2.0.0       xts_0.12.1          zoo_1.8-8
> MASS_7.3-53
> [21] fortunes_1.5-4
> 
> loaded via a namespace (and not attached):
>   [1] tinytex_0.29      tidyselect_1.1.0  xfun_0.20         remotes_2.2.0
>    purrr_0.3.4
>   [6] gargle_0.5.0      lattice_0.20-41   generics_0.1.0    vctrs_0.3.6
>    htmltools_0.5.1.1
> [11] base64enc_0.1-3   rlang_0.4.10      pkgbuild_1.2.0    pillar_1.4.7
>   glue_1.4.2
> [16] withr_2.4.1       DBI_1.1.1         sessioninfo_1.1.1 lifecycle_0.2.0
>    cellranger_1.1.0
> [21] evaluate_0.14     memoise_2.0.0     knitr_1.31        callr_3.5.1
>    fastmap_1.1.0
> [26] ps_1.5.0          curl_4.3          Rcpp_1.0.6        openssl_1.4.3
>    cachem_1.0.1
> [31] desc_1.2.0        pkgload_1.1.0     fs_1.5.0          askpass_1.1
>    digest_0.6.27
> [36] processx_3.4.5    grid_4.0.3        rprojroot_2.0.2   cli_2.3.0
>    tools_4.0.3
> [41] magrittr_2.0.1    tibble_3.0.6      crayon_1.4.0      pkgconfig_2.0.3
>    ellipsis_0.3.1
> [46] prettyunits_1.1.1 httr_1.4.2        assertthat_0.2.1  R6_2.5.0
>   compiler_4.0.3
> 19:05:52  >
> 
> Thanks,
> 
> Roger
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar  7 16:37:06 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 07 Mar 2021 07:37:06 -0800
Subject: [R] Package to generate moon phase - SR-SS
In-Reply-To: <52ae8c5f-5162-847f-8178-2dcc1eb5ffea@gmail.com>
References: <mailman.362419.1.1615114801.64193.r-help@r-project.org>
 <52ae8c5f-5162-847f-8178-2dcc1eb5ffea@gmail.com>
Message-ID: <C0F7A3B1-945D-4A74-8344-9670E2990A32@dcn.davis.ca.us>

Odd.. came right up for me. Perhaps you might find rseek.org easier to use?

On March 7, 2021 5:03:20 AM PST, Neotropical bat risk assessments and acoustic tools <neotropical.bats at gmail.com> wrote:
>Hi all
>
>I have not found a package by Googling, but assume there must be at 
>least one out there.
>I need to generate/write sun rise-sun set times (civil twilight) and 
>moon phase/illumination.
>
>I would like to add a start date and end date along with location 
>coordinates and have a table generated like below.
>This is from a legacy program acquired some 30 years ago and is no 
>longer available.? This can only generate 1 month at a time (subset 
>below).? But for a year at a time both historical and for future dates 
>and locations.
>
>For this legacy program I enter the date and select a location I have
>in 
>a simple TXT location file location with time-zone and X-Y coordinates 
>and it will generate a month at a time.? this can be dumped to the 
>clipboard but not written as a TXT or delimited file.
>
>I am hoping there will be an elegant way to do this in R and have the 
>results written to a file for import into an Access DB.
>Tnx for any suggestions? on package(s).
>
>Sample below.
>
> ??????????????????? Sun and Moon Data for March 2021
> ???????????????????????? 17.05?N? 88.57?W? 5hrW
> ????????????????????? Standard Time? Civil Twilight
>
> ??????????????????????????? Sun???????????????????????? Moon
> ????? Date??? Twi.? Rise? Transit? Set??? Twi.? Rise? Transit Set??? %
>
> ?? 3/1/2021? 06:50? 07:12? 13:07? 19:01? 19:23? 21:36? 02:52? 09:04 92
> ?? 3/2/2021? 06:50? 07:11? 13:06? 19:01? 19:23? 22:35? 03:43? 09:47 85
> ?? 3/3/2021? 06:49? 07:11? 13:06? 19:02? 19:23? 23:35? 04:35? 10:31 76
> ?? 3/4/2021? 06:48? 07:10? 13:06? 19:02? 19:24? *****? 05:28? 11:18 65

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar  7 19:03:26 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Mar 2021 13:03:26 -0500
Subject: [R] mpfr function in Rmpfr crashes R
In-Reply-To: <CAPV07m-Dxt-2BHOR1oxeSW5dfB1o3dJK8s9HRvuy-QxtyqLPkg@mail.gmail.com>
References: <CAPV07m-Dxt-2BHOR1oxeSW5dfB1o3dJK8s9HRvuy-QxtyqLPkg@mail.gmail.com>
Message-ID: <acc38cdc-487f-bbf7-20df-c87d747b8099@gmail.com>

It works for me, on a slightly different system than yours:

 > Rmpfr::mpfr(pi, 120)
1 'mpfr' number of precision  120   bits
[1] 3.1415926535897931159979634685441851616
 > sessionInfo()
R version 4.0.3 Patched (2021-01-30 r79912)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Catalina 10.15.7

Matrix products: default
BLAS: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Rmpfr_0.8-2 gmp_0.6-1

loaded via a namespace (and not attached):
[1] compiler_4.0.3


On 06/03/2021 7:07 p.m., Roger Bos wrote:
> All,
> 
> The following code crashes by R on my mac with a message "R session
> aborted.  A fatal error occured".
> 
> ```
> library(Rmpfr)
> Rmpfr::mpfr(pi, 120)
> ```
> 
> Does anyone have any suggestions?   My session info is below:
> 
> R version 4.0.3 (2020-10-10)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] datasets  utils     stats     graphics  grDevices methods   base
> 
> other attached packages:
>   [1] alphavantager_0.1.2 googlesheets4_0.2.0 googledrive_1.0.1
> clipr_0.7.1
>   [5] jsonlite_1.7.2      stringi_1.5.3       dtplyr_1.0.1
>   data.table_1.13.6
>   [9] dplyr_1.0.4         plyr_1.8.6          testthat_3.0.1
>   lubridate_1.7.9.2
> [13] timeDate_3043.102   sendmailR_1.2-1     rmarkdown_2.6
> devtools_2.3.2
> [17] usethis_2.0.0       xts_0.12.1          zoo_1.8-8
> MASS_7.3-53
> [21] fortunes_1.5-4
> 
> loaded via a namespace (and not attached):
>   [1] tinytex_0.29      tidyselect_1.1.0  xfun_0.20         remotes_2.2.0
>    purrr_0.3.4
>   [6] gargle_0.5.0      lattice_0.20-41   generics_0.1.0    vctrs_0.3.6
>    htmltools_0.5.1.1
> [11] base64enc_0.1-3   rlang_0.4.10      pkgbuild_1.2.0    pillar_1.4.7
>   glue_1.4.2
> [16] withr_2.4.1       DBI_1.1.1         sessioninfo_1.1.1 lifecycle_0.2.0
>    cellranger_1.1.0
> [21] evaluate_0.14     memoise_2.0.0     knitr_1.31        callr_3.5.1
>    fastmap_1.1.0
> [26] ps_1.5.0          curl_4.3          Rcpp_1.0.6        openssl_1.4.3
>    cachem_1.0.1
> [31] desc_1.2.0        pkgload_1.1.0     fs_1.5.0          askpass_1.1
>    digest_0.6.27
> [36] processx_3.4.5    grid_4.0.3        rprojroot_2.0.2   cli_2.3.0
>    tools_4.0.3
> [41] magrittr_2.0.1    tibble_3.0.6      crayon_1.4.0      pkgconfig_2.0.3
>    ellipsis_0.3.1
> [46] prettyunits_1.1.1 httr_1.4.2        assertthat_0.2.1  R6_2.5.0
>   compiler_4.0.3
> 19:05:52  >
> 
> Thanks,
> 
> Roger
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar  7 19:06:58 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Mar 2021 13:06:58 -0500
Subject: [R] Package to generate moon phase - SR-SS
In-Reply-To: <C0F7A3B1-945D-4A74-8344-9670E2990A32@dcn.davis.ca.us>
References: <mailman.362419.1.1615114801.64193.r-help@r-project.org>
 <52ae8c5f-5162-847f-8178-2dcc1eb5ffea@gmail.com>
 <C0F7A3B1-945D-4A74-8344-9670E2990A32@dcn.davis.ca.us>
Message-ID: <4ad24a9b-cdd6-1675-113b-5066e47a43ed@gmail.com>

For me too:  suncalc is the package.

Duncan Murdoc

On 07/03/2021 10:37 a.m., Jeff Newmiller wrote:
> Odd.. came right up for me. Perhaps you might find rseek.org easier to use?
> 
> On March 7, 2021 5:03:20 AM PST, Neotropical bat risk assessments and acoustic tools <neotropical.bats at gmail.com> wrote:
>> Hi all
>>
>> I have not found a package by Googling, but assume there must be at
>> least one out there.
>> I need to generate/write sun rise-sun set times (civil twilight) and
>> moon phase/illumination.
>>
>> I would like to add a start date and end date along with location
>> coordinates and have a table generated like below.
>> This is from a legacy program acquired some 30 years ago and is no
>> longer available.? This can only generate 1 month at a time (subset
>> below).? But for a year at a time both historical and for future dates
>> and locations.
>>
>> For this legacy program I enter the date and select a location I have
>> in
>> a simple TXT location file location with time-zone and X-Y coordinates
>> and it will generate a month at a time.? this can be dumped to the
>> clipboard but not written as a TXT or delimited file.
>>
>> I am hoping there will be an elegant way to do this in R and have the
>> results written to a file for import into an Access DB.
>> Tnx for any suggestions? on package(s).
>>
>> Sample below.
>>
>>  ??????????????????? Sun and Moon Data for March 2021
>>  ???????????????????????? 17.05?N? 88.57?W? 5hrW
>>  ????????????????????? Standard Time? Civil Twilight
>>
>>  ??????????????????????????? Sun???????????????????????? Moon
>>  ????? Date??? Twi.? Rise? Transit? Set??? Twi.? Rise? Transit Set??? %
>>
>>  ?? 3/1/2021? 06:50? 07:12? 13:07? 19:01? 19:23? 21:36? 02:52? 09:04 92
>>  ?? 3/2/2021? 06:50? 07:11? 13:06? 19:01? 19:23? 22:35? 03:43? 09:47 85
>>  ?? 3/3/2021? 06:49? 07:11? 13:06? 19:02? 19:23? 23:35? 04:35? 10:31 76
>>  ?? 3/4/2021? 06:48? 07:10? 13:06? 19:02? 19:24? *****? 05:28? 11:18 65
>


From rmh @end|ng |rom temp|e@edu  Sun Mar  7 19:33:11 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sun, 7 Mar 2021 18:33:11 +0000
Subject: [R] [External] Re:  mpfr function in Rmpfr crashes R
In-Reply-To: <acc38cdc-487f-bbf7-20df-c87d747b8099@gmail.com>
References: <CAPV07m-Dxt-2BHOR1oxeSW5dfB1o3dJK8s9HRvuy-QxtyqLPkg@mail.gmail.com>,
 <acc38cdc-487f-bbf7-20df-c87d747b8099@gmail.com>
Message-ID: <SA2PR11MB51158EF968D62812B48EED2FD2949@SA2PR11MB5115.namprd11.prod.outlook.com>

this is probably a Mac M1.
The problem and potential solution is described here:

https://stat.ethz.ch/pipermail/r-sig-mac/2021-February/014003.html

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Sunday, March 7, 2021 13:03
To: Roger Bos; r-help at r-project.org
Subject: [External] Re: [R] mpfr function in Rmpfr crashes R

It works for me, on a slightly different system than yours:

 > Rmpfr::mpfr(pi, 120)
1 'mpfr' number of precision  120   bits
[1] 3.1415926535897931159979634685441851616
 > sessionInfo()
R version 4.0.3 Patched (2021-01-30 r79912)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Catalina 10.15.7

Matrix products: default
BLAS:
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK:
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Rmpfr_0.8-2 gmp_0.6-1

loaded via a namespace (and not attached):
[1] compiler_4.0.3


On 06/03/2021 7:07 p.m., Roger Bos wrote:
> All,
>
> The following code crashes by R on my mac with a message "R session
> aborted.  A fatal error occured".
>
> ```
> library(Rmpfr)
> Rmpfr::mpfr(pi, 120)
> ```
>
> Does anyone have any suggestions?   My session info is below:
>
> R version 4.0.3 (2020-10-10)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
>
> Matrix products: default
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] datasets  utils     stats     graphics  grDevices methods   base
>
> other attached packages:
>   [1] alphavantager_0.1.2 googlesheets4_0.2.0 googledrive_1.0.1
> clipr_0.7.1
>   [5] jsonlite_1.7.2      stringi_1.5.3       dtplyr_1.0.1
>   data.table_1.13.6
>   [9] dplyr_1.0.4         plyr_1.8.6          testthat_3.0.1
>   lubridate_1.7.9.2
> [13] timeDate_3043.102   sendmailR_1.2-1     rmarkdown_2.6
> devtools_2.3.2
> [17] usethis_2.0.0       xts_0.12.1          zoo_1.8-8
> MASS_7.3-53
> [21] fortunes_1.5-4
>
> loaded via a namespace (and not attached):
>   [1] tinytex_0.29      tidyselect_1.1.0  xfun_0.20         remotes_2.2.0
>    purrr_0.3.4
>   [6] gargle_0.5.0      lattice_0.20-41   generics_0.1.0    vctrs_0.3.6
>    htmltools_0.5.1.1
> [11] base64enc_0.1-3   rlang_0.4.10      pkgbuild_1.2.0    pillar_1.4.7
>   glue_1.4.2
> [16] withr_2.4.1       DBI_1.1.1         sessioninfo_1.1.1 lifecycle_0.2.0
>    cellranger_1.1.0
> [21] evaluate_0.14     memoise_2.0.0     knitr_1.31        callr_3.5.1
>    fastmap_1.1.0
> [26] ps_1.5.0          curl_4.3          Rcpp_1.0.6        openssl_1.4.3
>    cachem_1.0.1
> [31] desc_1.2.0        pkgload_1.1.0     fs_1.5.0          askpass_1.1
>    digest_0.6.27
> [36] processx_3.4.5    grid_4.0.3        rprojroot_2.0.2   cli_2.3.0
>    tools_4.0.3
> [41] magrittr_2.0.1    tibble_3.0.6      crayon_1.4.0      pkgconfig_2.0.3
>    ellipsis_0.3.1
> [46] prettyunits_1.1.1 httr_1.4.2        assertthat_0.2.1  R6_2.5.0
>   compiler_4.0.3
> 19:05:52  >
>
> Thanks,
>
> Roger
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From roger@bo@ @end|ng |rom gm@||@com  Sun Mar  7 22:10:30 2021
From: roger@bo@ @end|ng |rom gm@||@com (Roger Bos)
Date: Sun, 7 Mar 2021 16:10:30 -0500
Subject: [R] [External] Re:  mpfr function in Rmpfr crashes R
In-Reply-To: <SA2PR11MB51158EF968D62812B48EED2FD2949@SA2PR11MB5115.namprd11.prod.outlook.com>
References: <CAPV07m-Dxt-2BHOR1oxeSW5dfB1o3dJK8s9HRvuy-QxtyqLPkg@mail.gmail.com>
 <acc38cdc-487f-bbf7-20df-c87d747b8099@gmail.com>
 <SA2PR11MB51158EF968D62812B48EED2FD2949@SA2PR11MB5115.namprd11.prod.outlook.com>
Message-ID: <CAPV07m88cADgj+S+AZ9TATPkv8y9pNPX4N5izptePwPq8vRnJA@mail.gmail.com>

Richard,

Yes, I am on an M1, sorry I didn't mention it.  Sounds like I just have to
wait a bit until the problem is fixed in Rosetta2 (whatever that is).
Thanks for bringing this to my attention.

Roger


On Sun, Mar 7, 2021 at 1:33 PM Richard M. Heiberger <rmh at temple.edu> wrote:

> this is probably a Mac M1.
> The problem and potential solution is described here:
>
> https://stat.ethz.ch/pipermail/r-sig-mac/2021-February/014003.html
>
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Duncan Murdoch <
> murdoch.duncan at gmail.com>
> Sent: Sunday, March 7, 2021 13:03
> To: Roger Bos; r-help at r-project.org
> Subject: [External] Re: [R] mpfr function in Rmpfr crashes R
>
> It works for me, on a slightly different system than yours:
>
>  > Rmpfr::mpfr(pi, 120)
> 1 'mpfr' number of precision  120   bits
> [1] 3.1415926535897931159979634685441851616
>  > sessionInfo()
> R version 4.0.3 Patched (2021-01-30 r79912)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Catalina 10.15.7
>
> Matrix products: default
> BLAS:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] Rmpfr_0.8-2 gmp_0.6-1
>
> loaded via a namespace (and not attached):
> [1] compiler_4.0.3
>
>
> On 06/03/2021 7:07 p.m., Roger Bos wrote:
> > All,
> >
> > The following code crashes by R on my mac with a message "R session
> > aborted.  A fatal error occured".
> >
> > ```
> > library(Rmpfr)
> > Rmpfr::mpfr(pi, 120)
> > ```
> >
> > Does anyone have any suggestions?   My session info is below:
> >
> > R version 4.0.3 (2020-10-10)
> > Platform: x86_64-apple-darwin17.0 (64-bit)
> > Running under: macOS Big Sur 10.16
> >
> > Matrix products: default
> > LAPACK:
> >
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> >
> > locale:
> > [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> >
> > attached base packages:
> > [1] datasets  utils     stats     graphics  grDevices methods   base
> >
> > other attached packages:
> >   [1] alphavantager_0.1.2 googlesheets4_0.2.0 googledrive_1.0.1
> > clipr_0.7.1
> >   [5] jsonlite_1.7.2      stringi_1.5.3       dtplyr_1.0.1
> >   data.table_1.13.6
> >   [9] dplyr_1.0.4         plyr_1.8.6          testthat_3.0.1
> >   lubridate_1.7.9.2
> > [13] timeDate_3043.102   sendmailR_1.2-1     rmarkdown_2.6
> > devtools_2.3.2
> > [17] usethis_2.0.0       xts_0.12.1          zoo_1.8-8
> > MASS_7.3-53
> > [21] fortunes_1.5-4
> >
> > loaded via a namespace (and not attached):
> >   [1] tinytex_0.29      tidyselect_1.1.0  xfun_0.20         remotes_2.2.0
> >    purrr_0.3.4
> >   [6] gargle_0.5.0      lattice_0.20-41   generics_0.1.0    vctrs_0.3.6
> >    htmltools_0.5.1.1
> > [11] base64enc_0.1-3   rlang_0.4.10      pkgbuild_1.2.0    pillar_1.4.7
> >   glue_1.4.2
> > [16] withr_2.4.1       DBI_1.1.1         sessioninfo_1.1.1
> lifecycle_0.2.0
> >    cellranger_1.1.0
> > [21] evaluate_0.14     memoise_2.0.0     knitr_1.31        callr_3.5.1
> >    fastmap_1.1.0
> > [26] ps_1.5.0          curl_4.3          Rcpp_1.0.6        openssl_1.4.3
> >    cachem_1.0.1
> > [31] desc_1.2.0        pkgload_1.1.0     fs_1.5.0          askpass_1.1
> >    digest_0.6.27
> > [36] processx_3.4.5    grid_4.0.3        rprojroot_2.0.2   cli_2.3.0
> >    tools_4.0.3
> > [41] magrittr_2.0.1    tibble_3.0.6      crayon_1.4.0
> pkgconfig_2.0.3
> >    ellipsis_0.3.1
> > [46] prettyunits_1.1.1 httr_1.4.2        assertthat_0.2.1  R6_2.5.0
> >   compiler_4.0.3
> > 19:05:52  >
> >
> > Thanks,
> >
> > Roger
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Mar  8 09:41:40 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 8 Mar 2021 09:41:40 +0100
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <CE56E5CE-E1DE-4D26-8B39-0B6C95977BCD@dcn.davis.ca.us>
References: <1614935662799.60644@precheza.cz>
 <CE56E5CE-E1DE-4D26-8B39-0B6C95977BCD@dcn.davis.ca.us>
Message-ID: <24645.58180.611192.607936@stat.math.ethz.ch>

>>>>> Jeff Newmiller 
>>>>>     on Fri, 05 Mar 2021 10:09:41 -0800 writes:

    > Your example could probably be resolved with approx. If
    > you want a more robust solution, it looks like the fBasics
    > package can do spline interpolation. 

base R's  spline package does spline interpolation !!

Martin


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Mar  8 10:12:17 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 08 Mar 2021 01:12:17 -0800
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <24645.58180.611192.607936@stat.math.ethz.ch>
References: <1614935662799.60644@precheza.cz>
 <CE56E5CE-E1DE-4D26-8B39-0B6C95977BCD@dcn.davis.ca.us>
 <24645.58180.611192.607936@stat.math.ethz.ch>
Message-ID: <347A5C1F-49D6-4FD7-AE6E-23D2C0F86FFD@dcn.davis.ca.us>

I am aware of that... I have my own functions for this purpose that use splinefun. But if you are trying to also do other aspects of probability distribution calculations, it looked like using fBasics would be easier than re-inventing the wheel. I could be wrong, though, since I haven't used fBasics myself.

On March 8, 2021 12:41:40 AM PST, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>>>>>> Jeff Newmiller 
>>>>>>     on Fri, 05 Mar 2021 10:09:41 -0800 writes:
>
>    > Your example could probably be resolved with approx. If
>    > you want a more robust solution, it looks like the fBasics
>    > package can do spline interpolation. 
>
>base R's  spline package does spline interpolation !!
>
>Martin

-- 
Sent from my phone. Please excuse my brevity.


From j@b@y@t194 @end|ng |rom gm@||@com  Mon Mar  8 11:05:17 2021
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Mon, 8 Mar 2021 13:35:17 +0330
Subject: [R] Split Dataframe into several
Message-ID: <CANTxAmLzQcAmQLQ1gMQiq0iD2A8iuWmBzv2rBvKHWEkPj7k5-w@mail.gmail.com>

Dear R users;
Hi.
I have a problem with splitting dataframe into several.
I have a large dataframe (Length of 61000). It has 4 Columns as below:
"
               Date             Cases          Country
1            2020-12-14     746            Country1
2            2020-12-15      324           Country1
..
6000      2020-12-13      298            Country2
.
.
"
Each country has a different number of rows and their related dates are
different. What I want to do is: Extract rows for each country and make a
new column for that case of the country.
"
             Date             Cases_Country1      Cases_Country2
 Cases_Country3 ......
1           2020-12-14     746                      25
                65
2           2020-12-15      324
..
6000      2020-12-13      298                      352
              75
"
I used split function, but it create a list and I cannot use the data.
Please help me to fix this problem.
Sincerely



-- 
Best Regards
Javad Bayat
M.Sc. Environment Engineering
Alternative Mail: bayat194 at yahoo.com

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Mon Mar  8 14:17:32 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 8 Mar 2021 14:17:32 +0100
Subject: [R] Split Dataframe into several
In-Reply-To: <CANTxAmLzQcAmQLQ1gMQiq0iD2A8iuWmBzv2rBvKHWEkPj7k5-w@mail.gmail.com>
References: <CANTxAmLzQcAmQLQ1gMQiq0iD2A8iuWmBzv2rBvKHWEkPj7k5-w@mail.gmail.com>
Message-ID: <YEYj7MZmifap9InJ@posteo.no>

Dear Javad,

	data <- "Date Cases Country
	2020-12-14 746 Country1
	2020-12-15 324 Country1
	2020-12-15   1 Country3
	2020-12-13 298 Country2"
	data <- read.table(text=data, header=T)
	x <- reshape(
	  data=data,
	  timevar = "Country",
	  idvar = "Date",
	  direction = "wide")
	data
	x

yields

	        Date Cases  Country
	1 2020-12-14   746 Country1
	2 2020-12-15   324 Country1
	3 2020-12-15     1 Country3
	4 2020-12-13   298 Country2
	        Date Cases.Country1
	1 2020-12-14            746
	2 2020-12-15            324
	4 2020-12-13             NA
	  Cases.Country3 Cases.Country2
	1             NA             NA
	2              1             NA
	4             NA            298

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210308/3b88debe/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Mon Mar  8 14:50:07 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 8 Mar 2021 14:50:07 +0100
Subject: [R] Split Dataframe into several
In-Reply-To: <CANTxAmLzfLeBm4m_Dd9eBkVBUs5F8U4qFQufHuiSv4t-0XBxRQ@mail.gmail.com>
References: <CANTxAmLzQcAmQLQ1gMQiq0iD2A8iuWmBzv2rBvKHWEkPj7k5-w@mail.gmail.com>
 <YEYj7MZmifap9InJ@posteo.no>
 <CANTxAmLzfLeBm4m_Dd9eBkVBUs5F8U4qFQufHuiSv4t-0XBxRQ@mail.gmail.com>
Message-ID: <YEYrj6i5iph1mb9J@posteo.no>

On 2021-03-08 17:14 +0330, javad bayat wrote:
> Dear Rasmus;
> Many thanks. It works for me.
> Sincerely yours

Great :)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210308/1d5e9620/attachment.sig>

From petr@p|k@| @end|ng |rom prechez@@cz  Mon Mar  8 14:52:03 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 8 Mar 2021 13:52:03 +0000
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <362ec2a4-8c88-36ac-1b1b-19ab97362515@comcast.net>
References: <1614935662799.60644@precheza.cz>
 <CAB8pepzwR97maS4PuF9UYPPGuONqwPfQ4e4AxmyxFAoipXBZYA@mail.gmail.com>
 <CAB8pepzddGaX5NFnzqSJq6YR3t+-cwKAg=rfH9a=1pEt08ATwQ@mail.gmail.com>
 <CAB8pepwdDhdozwPwa7E5QuQ_B_1BWDP28uj46YJVNEioWLsbkw@mail.gmail.com>
 <362ec2a4-8c88-36ac-1b1b-19ab97362515@comcast.net>
Message-ID: <a49f19e7a79641f7878f11ba478f0773@SRVEXCHCM1302.precheza.cz>

Hallo David, Abby and Bert

Thank you for your solutions. In the meantime I found package rriskDistributions, which was able to calculate values for lognormal distribution from quantiles.

Abby
> 1-psolution
[1] 9.980823e-06

David
> plnorm(0.1, -.7020649, .4678656)
[1] 0.0003120744

rriskDistributions
> plnorm(0.1, -.6937355, .3881209)
[1] 1.697379e-05

Bert suggested to ask for original data before quantile calculation what is probably the best but also the most problematic solution. Actually, maybe original data are unavailable as it is the result from particle size measurement, where the software always twist the original data and spits only descriptive results.

All your results are quite consistent with the available values as they are close to 1, so for me, each approach works.

Thank you again.

Best regards.
Petr

> -----Original Message-----
> From: David Winsemius <dwinsemius at comcast.net>
> Sent: Sunday, March 7, 2021 1:33 AM
> To: Abby Spurdle <spurdle.a at gmail.com>; PIKAL Petr
> <petr.pikal at precheza.cz>
> Cc: r-help at r-project.org
> Subject: Re: [R] quantile from quantile table calculation without original data
> 
> 
> On 3/6/21 1:02 AM, Abby Spurdle wrote:
> > I came up with a solution.
> > But not necessarily the best solution.
> >
> > I used a spline to approximate the quantile function.
> > Then use that to generate a large sample.
> > (I don't see any need for the sample to be random, as such).
> > Then compute the sample mean and sd, on a log scale.
> > Finally, plug everything into the plnorm function:
> >
> > p <- seq (0.01, 0.99,, 1e6)
> > Fht <- splinefun (temp$percent, temp$size) x <- log (Fht (p) )
> > psolution <- plnorm (0.1, mean (x), sd (x), FALSE) psolution
> >
> > The value of the solution is very close to one.
> > Which is not a surprise.
> >
> > Here's a plot of everything:
> >
> > u <- seq (0.000001, 1.65,, 200)
> > v <- plnorm (u, mean (x), sd (x), FALSE) plot (u, v, type="l", ylim =
> > c (0, 1) ) points (temp$size, temp$percent, pch=16) points (0.1,
> > psolution, pch=16, col="blue")
> 
> Here's another approach, which uses minimization of the squared error to
> get the parameters for a lognormal distribution.
> 
> temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069, 0.3781,
> 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95,
> 0.99)), .Names = c("size", "percent"
> ), row.names = c(NA, -9L), class = "data.frame")
> 
> obj <- function(x) {sum( qlnorm(1-temp$percent, x[[1]], x[[2]])-temp$size
> )^2}
> 
> # Note the inversion of the poorly named and flipped "percent" column,
> 
> optim( list(a=-0.65, b=0.42), obj)
> 
> #--------------------
> 
> $par
>           a          b
> -0.7020649  0.4678656
> 
> $value
> [1] 3.110316e-12
> 
> $counts
> function gradient
>        51       NA
> 
> $convergence
> [1] 0
> 
> $message
> NULL
> 
> 
> I'm not sure how principled this might be. There's no consideration in this
> approach for expected sampling error at the right tail where the magnitudes
> of the observed values will create much larger contributions to the sum of
> squares.
> 
> --
> 
> David.
> 
> >
> >
> > On Sat, Mar 6, 2021 at 8:09 PM Abby Spurdle <spurdle.a at gmail.com>
> wrote:
> >> I'm sorry.
> >> I misread your example, this morning.
> >> (I didn't read the code after the line that calls plot).
> >>
> >> After looking at this problem again, interpolation doesn't apply, and
> >> extrapolation would be a last resort.
> >> If you can assume your data comes from a particular type of
> >> distribution, such as a lognormal distribution, then a better
> >> approach would be to find the most likely parameters.
> >>
> >> i.e.
> >> This falls within the broader scope of maximum likelihood.
> >> (Except that you're dealing with a table of quantile-probability
> >> pairs, rather than raw observational data).
> >>
> >> I suspect that there's a relatively easy way of finding the parameters.
> >>
> >> I'll think about it...
> >> But someone else may come back with an answer first...
> >>
> >>
> >> On Sat, Mar 6, 2021 at 8:17 AM Abby Spurdle <spurdle.a at gmail.com>
> wrote:
> >>> I note three problems with your data:
> >>> (1) The name "percent" is misleading, perhaps you want "probability"?
> >>> (2) There are straight (or near-straight) regions, each of which, is
> >>> equally (or near-equally) spaced, which is not what I would expect
> >>> in problems involving "quantiles".
> >>> (3) Your plot (approximating the distribution function) is
> >>> back-the-front (as per what is customary).
> >>>
> >>>
> >>> On Fri, Mar 5, 2021 at 10:14 PM PIKAL Petr <petr.pikal at precheza.cz>
> wrote:
> >>>> Dear all
> >>>>
> >>>> I have table of quantiles, probably from lognormal distribution
> >>>>
> >>>>   dput(temp)
> >>>> temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477,
> >>>> 0.5069, 0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05,
> >>>> 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
> >>>> ), row.names = c(NA, -9L), class = "data.frame")
> >>>>
> >>>> and I need to calculate quantile for size 0.1
> >>>>
> >>>> plot(temp$size, temp$percent, pch=19, xlim=c(0,2)) ss <-
> >>>> approxfun(temp$size, temp$percent) points((0:100)/50,
> >>>> ss((0:100)/50))
> >>>> abline(v=.1)
> >>>>
> >>>> If I had original data it would be quite easy with ecdf/quantile function
> but without it I am lost what function I could use for such task.
> >>>>
> >>>> Please, give me some hint where to look.
> >>>>
> >>>>
> >>>> Best regards
> >>>>
> >>>> Petr
> >>>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
> >>>> obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
> >>>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ |
> >>>> Information about processing and protection of business partner's
> >>>> personal data are available on website:
> >>>> https://www.precheza.cz/en/personal-data-protection-principles/
> >>>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> >>>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> >>>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and
> >>>> any documents attached to it may be confidential and are subject to
> >>>> the legally binding disclaimer:
> >>>> https://www.precheza.cz/en/01-disclaimer/
> >>>>
> >>>>
> >>>>          [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

From c@ghpm @end|ng |rom gm@||@com  Mon Mar  8 21:52:49 2021
From: c@ghpm @end|ng |rom gm@||@com (Carlos Gonzalez)
Date: Mon, 8 Mar 2021 17:52:49 -0300
Subject: [R] read_csv not recognized
Message-ID: <CAGa55hTyTrfp1LsUUv1fLdDpDdpktJWuAGe_E032EfEZOekhyQ@mail.gmail.com>

Hi everybody,

I've load tidyverse:

library(tidyverse)

and then try to use the function read_csv() but  it didn't recognize it.

Thanks!

-- 
Saludos / Regards

Carlos A. Gonzalez
Mobile +598 94 234 653
caghpm at gmail.com

	[[alternative HTML version deleted]]


From h@@@n@d|w@n @end|ng |rom gm@||@com  Mon Mar  8 21:56:58 2021
From: h@@@n@d|w@n @end|ng |rom gm@||@com (Hasan Diwan)
Date: Mon, 8 Mar 2021 12:56:58 -0800
Subject: [R] read_csv not recognized
In-Reply-To: <CAGa55hTyTrfp1LsUUv1fLdDpDdpktJWuAGe_E032EfEZOekhyQ@mail.gmail.com>
References: <CAGa55hTyTrfp1LsUUv1fLdDpDdpktJWuAGe_E032EfEZOekhyQ@mail.gmail.com>
Message-ID: <CAP+bYWD13iC6-DdBsSnzHSJUMDrVCERQ-7ba6z38+REV=Vrq7g@mail.gmail.com>

function (file, col_names = TRUE, col_types = NULL, locale =
default_locale(),
    na = c("", "NA"), quoted_na = TRUE, quote = "\"", comment = "",
    trim_ws = TRUE, skip = 0, n_max = Inf, guess_max = min(1000,
        n_max), progress = show_progress(), skip_empty_rows = TRUE)
{
    tokenizer <- tokenizer_csv(na = na, quoted_na = quoted_na,
        quote = quote, comment = comment, trim_ws = trim_ws,
        skip_empty_rows = skip_empty_rows)
    read_delimited(file, tokenizer, col_names = col_names, col_types =
col_types,
        locale = locale, skip = skip, skip_empty_rows = skip_empty_rows,
        comment = comment, n_max = n_max, guess_max = guess_max,
        progress = progress)
}

Is the source from my copy of tidyverse. Not too involved to copy/paste
into one's .Rprofile or type into the console session. -- H

On Mon, 8 Mar 2021 at 12:53, Carlos Gonzalez <caghpm at gmail.com> wrote:

> Hi everybody,
>
> I've load tidyverse:
>
> library(tidyverse)
>
> and then try to use the function read_csv() but  it didn't recognize it.
>
> Thanks!
>
> --
> Saludos / Regards
>
> Carlos A. Gonzalez
> Mobile +598 94 234 653
> caghpm at gmail.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
OpenPGP: https://hasan.d8u.us/openpgp.asc
If you wish to request my time, please do so using
*bit.ly/hd1AppointmentRequest
<http://bit.ly/hd1AppointmentRequest>*.
Si vous voudrais faire connnaisance, allez a *bit.ly/hd1AppointmentRequest
<http://bit.ly/hd1AppointmentRequest>*.

<https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1>Sent
from my mobile device
Envoye de mon portable

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Mar  8 22:23:45 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 8 Mar 2021 16:23:45 -0500
Subject: [R] read_csv not recognized
In-Reply-To: <CAP+bYWD13iC6-DdBsSnzHSJUMDrVCERQ-7ba6z38+REV=Vrq7g@mail.gmail.com>
References: <CAGa55hTyTrfp1LsUUv1fLdDpDdpktJWuAGe_E032EfEZOekhyQ@mail.gmail.com>
 <CAP+bYWD13iC6-DdBsSnzHSJUMDrVCERQ-7ba6z38+REV=Vrq7g@mail.gmail.com>
Message-ID: <CAGgJW75hCpPvetZ87c-VCoWQt_hT5_=oMj_5p4Cn0Eo5Yxa-7g@mail.gmail.com>

Hi Carlos,
That is strange. The function read_csv is in the readr package.
You could try

library(readr)
readr::read_csv(etc)

Let us know what happens.
Eric


On Mon, Mar 8, 2021 at 3:57 PM Hasan Diwan <hasan.diwan at gmail.com> wrote:

> function (file, col_names = TRUE, col_types = NULL, locale =
> default_locale(),
>     na = c("", "NA"), quoted_na = TRUE, quote = "\"", comment = "",
>     trim_ws = TRUE, skip = 0, n_max = Inf, guess_max = min(1000,
>         n_max), progress = show_progress(), skip_empty_rows = TRUE)
> {
>     tokenizer <- tokenizer_csv(na = na, quoted_na = quoted_na,
>         quote = quote, comment = comment, trim_ws = trim_ws,
>         skip_empty_rows = skip_empty_rows)
>     read_delimited(file, tokenizer, col_names = col_names, col_types =
> col_types,
>         locale = locale, skip = skip, skip_empty_rows = skip_empty_rows,
>         comment = comment, n_max = n_max, guess_max = guess_max,
>         progress = progress)
> }
>
> Is the source from my copy of tidyverse. Not too involved to copy/paste
> into one's .Rprofile or type into the console session. -- H
>
> On Mon, 8 Mar 2021 at 12:53, Carlos Gonzalez <caghpm at gmail.com> wrote:
>
> > Hi everybody,
> >
> > I've load tidyverse:
> >
> > library(tidyverse)
> >
> > and then try to use the function read_csv() but  it didn't recognize it.
> >
> > Thanks!
> >
> > --
> > Saludos / Regards
> >
> > Carlos A. Gonzalez
> > Mobile +598 94 234 653
> > caghpm at gmail.com
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
> --
> OpenPGP: https://hasan.d8u.us/openpgp.asc
> If you wish to request my time, please do so using
> *bit.ly/hd1AppointmentRequest
> <http://bit.ly/hd1AppointmentRequest>*.
> Si vous voudrais faire connnaisance, allez a *bit.ly/hd1AppointmentRequest
> <http://bit.ly/hd1AppointmentRequest>*.
>
> <https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1
> >Sent
> from my mobile device
> Envoye de mon portable
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From c@ghpm @end|ng |rom gm@||@com  Mon Mar  8 22:38:29 2021
From: c@ghpm @end|ng |rom gm@||@com (Carlos Gonzalez)
Date: Mon, 8 Mar 2021 18:38:29 -0300
Subject: [R] read_csv not recognized
In-Reply-To: <CAGgJW75hCpPvetZ87c-VCoWQt_hT5_=oMj_5p4Cn0Eo5Yxa-7g@mail.gmail.com>
References: <CAGa55hTyTrfp1LsUUv1fLdDpDdpktJWuAGe_E032EfEZOekhyQ@mail.gmail.com>
 <CAP+bYWD13iC6-DdBsSnzHSJUMDrVCERQ-7ba6z38+REV=Vrq7g@mail.gmail.com>
 <CAGgJW75hCpPvetZ87c-VCoWQt_hT5_=oMj_5p4Cn0Eo5Yxa-7g@mail.gmail.com>
Message-ID: <CAGa55hQZCqn8G0qzFTb1syGmgZhyFBYxGkr3K+0AuhmxsiwePg@mail.gmail.com>

Thank you!

The problem was that tidyverse has not been loaded correctly. Sorry!

El lun, 8 de mar. de 2021 a la(s) 18:24, Eric Berger (ericjberger at gmail.com)
escribi?:

> Hi Carlos,
> That is strange. The function read_csv is in the readr package.
> You could try
>
> library(readr)
> readr::read_csv(etc)
>
> Let us know what happens.
> Eric
>
>
> On Mon, Mar 8, 2021 at 3:57 PM Hasan Diwan <hasan.diwan at gmail.com> wrote:
>
> > function (file, col_names = TRUE, col_types = NULL, locale =
> > default_locale(),
> >     na = c("", "NA"), quoted_na = TRUE, quote = "\"", comment = "",
> >     trim_ws = TRUE, skip = 0, n_max = Inf, guess_max = min(1000,
> >         n_max), progress = show_progress(), skip_empty_rows = TRUE)
> > {
> >     tokenizer <- tokenizer_csv(na = na, quoted_na = quoted_na,
> >         quote = quote, comment = comment, trim_ws = trim_ws,
> >         skip_empty_rows = skip_empty_rows)
> >     read_delimited(file, tokenizer, col_names = col_names, col_types =
> > col_types,
> >         locale = locale, skip = skip, skip_empty_rows = skip_empty_rows,
> >         comment = comment, n_max = n_max, guess_max = guess_max,
> >         progress = progress)
> > }
> >
> > Is the source from my copy of tidyverse. Not too involved to copy/paste
> > into one's .Rprofile or type into the console session. -- H
> >
> > On Mon, 8 Mar 2021 at 12:53, Carlos Gonzalez <caghpm at gmail.com> wrote:
> >
> > > Hi everybody,
> > >
> > > I've load tidyverse:
> > >
> > > library(tidyverse)
> > >
> > > and then try to use the function read_csv() but  it didn't recognize
> it.
> > >
> > > Thanks!
> > >
> > > --
> > > Saludos / Regards
> > >
> > > Carlos A. Gonzalez
> > > Mobile +598 94 234 653
> > > caghpm at gmail.com
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > OpenPGP: https://hasan.d8u.us/openpgp.asc
> > If you wish to request my time, please do so using
> > *bit.ly/hd1AppointmentRequest
> > <http://bit.ly/hd1AppointmentRequest>*.
> > Si vous voudrais faire connnaisance, allez a *
> bit.ly/hd1AppointmentRequest
> > <http://bit.ly/hd1AppointmentRequest>*.
> >
> > <https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1
> > >Sent
> > from my mobile device
> > Envoye de mon portable
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Saludos / Regards

Carlos A. Gonzalez
Mobile +598 94 234 653
caghpm at gmail.com

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Mar  9 00:15:40 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 8 Mar 2021 15:15:40 -0800
Subject: [R] hist from a list
In-Reply-To: <CAB-TgNucrY+Qxp=Nn6-FJ2rWkbdPL2g4QK+G5FNmON5EgujBjg@mail.gmail.com>
References: <CAB-TgNv88YE29BkrXg9teFoMGXVOGfrYtDWy+Ltb8znRK9_OFQ@mail.gmail.com>
 <42a74b91-08ed-f5f2-b621-193e447dd824@dewey.myzen.co.uk>
 <70ef6db0-8a9d-d140-8347-b4e8b758f640@sapo.pt>
 <CAPPM_gQTOQwXdiMQtD_smhZDJ7uAjwyfT65TR_J-0Vhh+xhYqg@mail.gmail.com>
 <20200731162847.GB106339@posteo.no>
 <CAB-TgNucrY+Qxp=Nn6-FJ2rWkbdPL2g4QK+G5FNmON5EgujBjg@mail.gmail.com>
Message-ID: <a47100fe-a2da-0196-b4b6-407e1f72b914@comcast.net>


On 8/3/20 11:48 AM, Pedro p?ramo wrote:
> Hi Rasmus, Josh and Rui,
>
> First of all many thanks in advance about your help.
>
> The first thig is sometimes you say " you are posting in HTML and that
> makes the
> post unreadable as this is a plain text list" how can I put the code in the
> correct way, not html (attaching in txt?)

Set your gmail client to deliver in plain text.

Attached is a png file that is a screen shot of a Chrome mediated effort 
at composing a message and clicking the three-stacked-dots icon at the 
lower right corner. (Learn to use your chosen software tools by reading 
manuals or searching.)


-- 

David.

>
> The second about the code:
>
> I have used this:
>
> bwc <- cbind(bwfinal2,bwfinal)
> colnames(bwc)=c("Accion","reval")
> df <- matrix(unlist(bwc), nrow=nrow(bwc), byrow=F)
> colnames(bwchist)=c("Accion","reval")
> bwchist <-as.data.frame(bwc[order(df[,2]), ])
>
> bwchist is the ordered cum stock returns in the year but because is a list
> it is not possible to plot and histogram with x (names of stocks) and the x
> axist the value of cum stocks (reval)
>
> when I put dput(bwchist) the console says:
>
> dput(bwchist)
> structure(list(Accion = list("REE", "Enagas", "Grifols", "Ferrovial",
>      "Acerinox", "Naturgy", "Inditex", "Bankia", "ENCE", "Aena",
>      "Bankinter", "Mapfre", "CaixaBank", "CIE", "Colonial", "Almirall",
>      "Indra", "ArcelorMittal", "ACS", "Telefonica", "Amadeus",
>      "BBVA", "Merlin", "Santander", "Repsol", "Melia", "Sabadell",
>      "IAG", "Acciona", "Endesa", "MasMovil", "Iberdrola", "SGamesa",
>      "Viscofan", "Cellnex"), reval = list(-0.0200827282700085,
>      -0.0590294115600855, -0.214126598790964, -0.220773677809979,
>      -0.229653300324357, -0.257944379583984, -0.283942789063822,
>      -0.285159347392533, -0.303814713896458, -0.30734460425763,
>      -0.309408155539818, -0.319912221435868, -0.322790949659181,
>      -0.344047579452905, -0.347919538415482, -0.356898907103825,
>      -0.374263261296661, -0.40147247119078, -0.405150043834815,
>      -0.406022775042175, -0.413786100987797, -0.440679109311707,
>      -0.442603156492871, -0.491634140733524, -0.499254932434042,
>      -0.6, -0.709737357505148, -0.724461258850966, 0.0220528711420083,
>      0.0462767672643172, 0.115044247787611, 0.238734548714937,
>      0.274578114644054, 0.343422896082666, 0.387826126094928)), class =
> "data.frame", row.names = c(NA,
> -35L))
>
> I try to make an hist or barplot but because it is a list no way to obtain
> the plot.
>
> Many thanks again for your help.
>
> I have printed two manuals to improve my level, but if you can help me, I
> would be very very gratefull.
>
>
>
> El vie., 31 jul. 2020 a las 18:28, Rasmus Liland (<jral at posteo.no>)
> escribi?:
>
>> On 2020-07-31 10:07 -0500, Joshua Ulrich wrote:
>> | On Fri, Jul 31, 2020 at 9:55 AM Rui Barradas wrote:
>> | | ?s 15:44 de 31/07/2020, Michael Dewey escreveu:
>> | | | Dear Pedro
>> | | |
>> | | | Some comments in-line
>> | | |
>> | | | On 30/07/2020 21:16, Pedro p?ramo wrote:
>> | | | | Hi all,
>> | | | |
>> | | | | I attach my code, the think is I
>> | | | | want to make a bar plot the last
>> | | | | variable called "bwchist" so the
>> | | | | X axis are "Accion" and the y
>> | | | | axis are "reval" values.
>> | | | |
>> | | | | I have prove class(bwchist) and
>> | | | | says dataframe but its still a
>> | | | | list because it says me I have
>> | | | | prove to unlist, but it doesnt
>> | | | | work
>> | | | |
>> | | | | hist(bwchist)
>> | | | | Error in hist.default(bwchist) : 'x' must be numeric
>> | | |
>> | | | So bwchist is not a numeric
>> | | | variable as hist needs. Aboce you
>> | | | said it is a data frame but data
>> | | | frames are not numeric.
>> | | |
>> | | | For future reference your example
>> | | | is way too long for anyone to go
>> | | | through and try to help you. Try
>> | | | next time to reduce it to the
>> | | | absolute minimum by removing
>> | | | sections while you still get the
>> | | | error.  It is also easier to get
>> | | | help if you can remove unnecessary
>> | | | packages.
>> | | |
>> | | | It is also unreadable because you
>> | | | are posting in HTML and that makes
>> | | | the post unreadable as this is a
>> | | | plain text list.
>> | |
>> | | Hello,
>> | |
>> | | I second Michael's opinion. When the
>> | | post's code is very long, there is a
>> | | tendency to have less answers.
>> | |
>> | | Please post the output of
>> | |
>> | |     dput(head(bwchist, 30))
>> | |
>> | | It's much shorter code and it
>> | | recreates the data so we will be
>> | | able to see what's wrong and try to
>> | | find a solution.
>> |
>> | Hi Pedro,
>> |
>> | Another 'best practice' and polite
>> | thing to do is link to other places
>> | you may have cross-posted.  That will
>> | give people the opportunity to see if
>> | your questions has been answered in
>> | another forum.
>> |
>> | I saw your post on R-SIG-Finance
>> | (https://stat.ethz.ch/pipermail/r-sig-finance/2020q3/014979.html),
>> | and started to work on a solution.
>> |
>> | I don't know how to do this in
>> | tidyquant, but here's how you can do
>> | it with quantmod:
>> |
>> | # all tickers
>> | tk <- c("ANA.MC", "ACS.MC", "AENA.MC", "AMS.MC", "MTS.MC", "BBVA.MC", "
>> SAB.MC",
>> |   "SAN.MC", "BKT.MC", "CABK.MC", "CLNX.MC", "ENG.MC", "ENC.MC", "ELE.MC
>> ",
>> |   "FER.MC", "GRF.MC", "IBE.MC", "ITX.MC", "COL.MC", "IAG.MC", "MAP.MC",
>> |   "MEL.MC", "MRL.MC", "NTGY.MC", "REE.MC", "REP.MC", "SGRE.MC", "TEF.MC
>> ",
>> |   "VIS.MC", "ACX.MC", "BKIA.MC", "CIE.MC", "MAS.MC", "ALM.MC", "IDR.MC")
>> |
>> | # download them into an environment ('e')
>> | require(quantmod)
>> | getSymbols(tk, from = "2019-12-31", env = (e <- new.env()))
>> |
>> | # extract adjusted close column
>> | adj <- lapply(e, Ad)
>> | # calculate daily returns from adjusted data,
>> | # merge into a xts matrix, and fill NA with 0
>> | ret <- do.call(merge, c(lapply(adj, dailyReturn), fill = 0))
>> | # cumulative returns
>> | cumret <- cumprod(1 + ret) - 1
>> | # set names
>> | colnames(cumret) <- names(adj)
>> | last(cumret)
>> | # calculate histogram for period-to-date returns
>> | hist(drop(last(cumret)))
>> |
>> | I'm not sure that's the histogram
>> | you're looking for, but I hope it
>> | gives you a start toward a solution.
>> |
>> | Best,
>> | Josh
>>
>> Wow Josh!  That's very elegant.
>>
>> Myself now, I just plowed through the
>> original code to make it simpler, but am
>> at a loss as to how this histogram looks
>> ...
>>
>>          x <- c("ANA.MC", "ACS.MC", "AENA.MC", "AMS.MC", "MTS.MC", "BBVA.MC
>> ",
>>            "SAB.MC", "SAN.MC", "BKT.MC", "CABK.MC", "CLNX.MC", "ENG.MC",
>>            "ENC.MC", "ELE.MC", "FER.MC", "GRF.MC", "IBE.MC", "ITX.MC",
>>            "COL.MC", "IAG.MC", "MAP.MC", "MEL.MC", "MRL.MC", "NTGY.MC",
>>            "REE.MC", "REP.MC", "SGRE.MC", "TEF.MC", "VIS.MC", "ACX.MC",
>>            "BKIA.MC", "CIE.MC", "MAS.MC", "ALM.MC", "IDR.MC")
>>          stock.prices <-
>>            lapply(x, function(stock) {
>>              tidyquant::tq_get(x=stock,from = '2019-12-31',get =
>> "stock.prices")
>>            })
>>          names(stock.prices) <- x
>>
>>          library(tidyquant)
>>
>>          returns <- lapply(stock.prices, function(data) {
>>            tab <-
>>              tq_transmute(
>>                data = data,
>>                select = adjusted,           # this specifies which column
>> to select
>>                mutate_fun = periodReturn,   # This specifies what to do
>> with that column
>>                period = "daily",            # This argument calculates
>> Daily returns
>>                col_rename = "idr_returns")  # renames the column
>>            tab[,"cr"] <- cumprod(1 + tab[,"idr_returns"])
>>            tab[,"cumulative_returns"] <- tab[,"cr"] - 1
>>
>>            dplyr::pull(
>>              tab[nrow(tab[,"cumulative_returns"]),
>>                            "cumulative_returns"]
>>            )
>>          })
>>
>>          bestworst <- simplify2array(returns)
>>
>>          namebw <-
>>            c("Acciona", "ACS", "Aena", "Amadeus",
>>              "ArcelorMittal", "BBVA", "Sabadell",
>>              "Santander", "Bankinter",
>>              "CaixaBank", "Cellnex", "Enagas",
>>              "ENCE", "Endesa", "Ferrovial",
>>              "Grifols", "Iberdrola", "Inditex",
>>              "Colonial", "IAG", "Mapfre",
>>              "Melia", "Merlin", "Naturgy", "REE",
>>              "Repsol", "SGamesa", "Telefonica",
>>              "Viscofan", "Acerinox", "Bankia",
>>              "CIE", "MasMovil", "Almirall",
>>              "Indra")
>>
>>          bwc <- data.frame(
>>            symbol=names(bestworst),
>>            Accion=namebw,
>>            reval=bestworst)
>>
>> | | | | bwc<-cbind(bwfinal2,bwfinal)
>> | | | | colnames(bwc)=c("Accion","reval")
>> | | | | bwc <- as.data.frame(bwc)
>>
>> ... aaaand you know something's
>> happening between here (where bwchist is
>> created), but you don't know what it is,
>> do you, Mr p?ramo?
>>
>> | | | | colnames(bwchist)=c("Accion","reval")
>> | | | | bwchist <-as.data.frame(bwc[order(bwc$reval), ])
>>
>> Best,
>> Rasmus
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot from 2021-03-08 15-12-07.png
Type: image/png
Size: 32747 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210308/d52ce55d/attachment.png>

From phii m@iii@g oii phiiipsmith@c@  Tue Mar  9 05:05:52 2021
From: phii m@iii@g oii phiiipsmith@c@ (phii m@iii@g oii phiiipsmith@c@)
Date: Mon, 08 Mar 2021 23:05:52 -0500
Subject: [R] Gradient plots in ggplot2
Message-ID: <4aef82068c893777dd89dcfa2cabcd84@philipsmith.ca>

I am having trouble with a gradient fill application in ggplot2, caused 
by outlier values. In my reprex, most of the values are between 2 and 
-2, but there are two outliers, 10 and -15. The outliers stand out well, 
which is good, but all the other numbers show almost no colour 
variation. I would like to continue with bold colours for the outliers, 
while having a more variable gradient, perhaps but not necessarily in a 
different colour, for the values between 2 nd -2. Any ideas on how this 
can be done?


library(ggplot2)
a <- c(rep(1,6),rep(2,6),rep(3,6),rep(4,6))
b <- c(0.1, 0.5,-0.3, 1.2,-0.4,-1.2,
        0.7, 0.8,-1.2,-0.5,10.0, 0.3,
        0.2,-0.4,-15.,-0.4,-0.9,  NA,
        0.1, 1.3,-1.4, 0.5,-0.5, 0.1)
c <- c(rep(c("a","b","c","d","e","f"),4))
df <- data.frame(a,b)
ggplot(df,aes(x=a,y=c,fill=b))+
   geom_tile()+
   geom_text(label=paste0(round(b,1),"%"),
     size=10,colour="gold")+
   scale_fill_gradient(low="red",high="blue",na.value="grey50")


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Mar  9 05:44:10 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 08 Mar 2021 20:44:10 -0800
Subject: [R] Gradient plots in ggplot2
In-Reply-To: <4aef82068c893777dd89dcfa2cabcd84@philipsmith.ca>
References: <4aef82068c893777dd89dcfa2cabcd84@philipsmith.ca>
Message-ID: <5A4F5B33-E946-4570-A940-29D74B6B34AA@dcn.davis.ca.us>

Perhaps scale_fill_gradientn() would be useful.

On March 8, 2021 8:05:52 PM PST, phil at philipsmith.ca wrote:
>I am having trouble with a gradient fill application in ggplot2, caused
>
>by outlier values. In my reprex, most of the values are between 2 and 
>-2, but there are two outliers, 10 and -15. The outliers stand out
>well, 
>which is good, but all the other numbers show almost no colour 
>variation. I would like to continue with bold colours for the outliers,
>
>while having a more variable gradient, perhaps but not necessarily in a
>
>different colour, for the values between 2 nd -2. Any ideas on how this
>
>can be done?
>
>
>library(ggplot2)
>a <- c(rep(1,6),rep(2,6),rep(3,6),rep(4,6))
>b <- c(0.1, 0.5,-0.3, 1.2,-0.4,-1.2,
>        0.7, 0.8,-1.2,-0.5,10.0, 0.3,
>        0.2,-0.4,-15.,-0.4,-0.9,  NA,
>        0.1, 1.3,-1.4, 0.5,-0.5, 0.1)
>c <- c(rep(c("a","b","c","d","e","f"),4))
>df <- data.frame(a,b)
>ggplot(df,aes(x=a,y=c,fill=b))+
>   geom_tile()+
>   geom_text(label=paste0(round(b,1),"%"),
>     size=10,colour="gold")+
>   scale_fill_gradient(low="red",high="blue",na.value="grey50")
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Mar  9 08:30:17 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 9 Mar 2021 07:30:17 +0000
Subject: [R] Gradient plots in ggplot2
In-Reply-To: <4aef82068c893777dd89dcfa2cabcd84@philipsmith.ca>
References: <4aef82068c893777dd89dcfa2cabcd84@philipsmith.ca>
Message-ID: <cd44709b2ad848c086e3a30e526cf12b@SRVEXCHCM1302.precheza.cz>

Hi Phillip.

You could try some transformations of your data. Either directly in
scale_fill_gradient or in original data. log transition would be OK but not
with negative data. You could play with some transitions from scales
package. I think that you could also use rescaler function, but I do not
know how.

ggplot(df,aes(x=a,y=c,fill=b))+
   geom_tile()+
   geom_text(label=paste0(round(b,1),"%"),
     size=10,colour="gold")+
   scale_fill_gradient(low="red",high="blue",na.value="grey50", trans="log")

Cheers.
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of
> phil at philipsmith.ca
> Sent: Tuesday, March 9, 2021 5:06 AM
> To: r-help at r-project.org
> Subject: [R] Gradient plots in ggplot2
> 
> I am having trouble with a gradient fill application in ggplot2, caused
> by outlier values. In my reprex, most of the values are between 2 and
> -2, but there are two outliers, 10 and -15. The outliers stand out well,
> which is good, but all the other numbers show almost no colour
> variation. I would like to continue with bold colours for the outliers,
> while having a more variable gradient, perhaps but not necessarily in a
> different colour, for the values between 2 nd -2. Any ideas on how this
> can be done?
> 
> 
> library(ggplot2)
> a <- c(rep(1,6),rep(2,6),rep(3,6),rep(4,6))
> b <- c(0.1, 0.5,-0.3, 1.2,-0.4,-1.2,
>         0.7, 0.8,-1.2,-0.5,10.0, 0.3,
>         0.2,-0.4,-15.,-0.4,-0.9,  NA,
>         0.1, 1.3,-1.4, 0.5,-0.5, 0.1)
> c <- c(rep(c("a","b","c","d","e","f"),4))
> df <- data.frame(a,b)
> ggplot(df,aes(x=a,y=c,fill=b))+
>    geom_tile()+
>    geom_text(label=paste0(round(b,1),"%"),
>      size=10,colour="gold")+
>    scale_fill_gradient(low="red",high="blue",na.value="grey50")
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From nev||@@mo@ @end|ng |rom gm@||@com  Tue Mar  9 08:42:21 2021
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Tue, 9 Mar 2021 18:42:21 +1100
Subject: [R] Plot_ly bar plots - bars span sevral x values when there are
 missing values.
Message-ID: <CAN9eD7nitpaX07SoaE2yN6Hicr6BzV6owViqqBQRjQVeZUTg7Q@mail.gmail.com>

I need to plot a number of bar charts as part of a shiny app.

I am using ploty ly

x and y  values are both numeric x being consecutive integer values.

there are often missing values in the data I wish to plot - each plot needs
to have a fixed x range.

When there are more than a few missing values  the bars for the remaining
values are being plotted much wider spanning several x values ( see example
2)

curiously when there is a single remaining value the bar width is correct
(example 3)

how can I maintain a constant bar width regardless of number of missing
values? I cannot find a bar-width setting.


df<-data.frame(x=1:20,y=rnorm(20)^2)

#twenty bars each centred above a single x value:
df%>%plot_ly(
  x =  ~ x,
  y =  ~ y,
  type = "bar")%>%
  layout(xaxis = list(range = c(0,20)),
         title = "example 1")

# this produces wide bars first one spread x= 0-6 second x= 8-14
# expected two column same width as in example 1 centred above x=3 and x=11
df[c(3,11),]%>%plot_ly(
  x =  ~ x,
  y =  ~ y,
  type = "bar")%>%
  layout(xaxis = list(range = c(0,20)),
         title = "example 2 column width expands across multiple x values")

# when only a single bar is present it is again the correct width - in this
case centred above x=3
df[3,]%>%plot_ly(
  x =  ~ x,
  y =  ~ y,
  type = "bar")%>%
  layout(xaxis = list(range = c(0,20)),
         title = "example 3 correct columns again")

	[[alternative HTML version deleted]]


From me @end|ng |rom n@nx@me  Tue Mar  9 00:04:28 2021
From: me @end|ng |rom n@nx@me (Nan Xiao)
Date: Mon, 08 Mar 2021 18:04:28 -0500
Subject: [R] [R-pkgs] pkglite: Compact Package Representations
Message-ID: <07d7001b-45b0-4b0d-88cf-7fcea46de017@www.fastmail.com>

Dear all,

I am happy to announce that {pkglite} is now on CRAN. It aims to offer a tool, grammar, and standard to represent and exchange R packages as text files. It can convert one or more source packages to a text file and restore the package structures from the file.

I hope you find it helpful. Please feel free to reach out with feedback or questions.

CRAN: https://cran.r-project.org/package=pkglite
Documentation: https://merck.github.io/pkglite/

Thanks,
-Nan

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From m@hmood@n@der@n @end|ng |rom ugent@be  Tue Mar  9 13:11:15 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Tue, 9 Mar 2021 12:11:15 +0000
Subject: [R] Specifying plot file name in the rscript
Message-ID: <ca0e55f6d10a49d8bdde0855d688f647@ugent.be>

Hi

I use the following R script to plot two graphs.


library(FactoMineR)
mydata <- read.csv('test.csv', header=T,row.names=1)
res.pca = PCA(mydata, quali.sup=5, graph=F)
plot(res.pca, choix="var", axes=c(1,2))
dev.new()
plot(res.pca, choix="ind", axes=c(1,2))

After running "Rscript my.r", I see two pdf files Rplots.pdf and Rplots1.pdf.
I would like to specify file names in the script as well. How can I do that?


Regards,
Mahmood

	[[alternative HTML version deleted]]


From m@hmood@n@der@n @end|ng |rom ugent@be  Tue Mar  9 13:43:34 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Tue, 9 Mar 2021 12:43:34 +0000
Subject: [R] Changing chart border's color
Message-ID: <48d3f6393e8447efa2578d2ded7b7daa@ugent.be>

Hi

I would like to make the color of the chart border to black. However, the following command doesn't work


plot(res.pca, choix="ind", border="black")


Any way to fix that?

Regards,
Mahmood

	[[alternative HTML version deleted]]


From btupper @end|ng |rom b|ge|ow@org  Tue Mar  9 14:58:17 2021
From: btupper @end|ng |rom b|ge|ow@org (Ben Tupper)
Date: Tue, 9 Mar 2021 08:58:17 -0500
Subject: [R] Specifying plot file name in the rscript
In-Reply-To: <ca0e55f6d10a49d8bdde0855d688f647@ugent.be>
References: <ca0e55f6d10a49d8bdde0855d688f647@ugent.be>
Message-ID: <CALrbzg34F1qv=h6hk9Sre8=tg88dDVThu5+t6EuJK0ivYytr3Q@mail.gmail.com>

Hi,

When you call plot() it will draw to the default device - in your case
the pdf() device. When the default device results in a file, R selects
a filename for you unless you tell it otherwise.  You can specify the
filename by explicitly calling pdf() first.

pdf("var_plot.pdf")
plot(res.pca, choix="var", axes=c(1,2))
dev.off()

pdf("ind_plot.pdf")
plot(res.pca, choix="ind", axes=c(1,2))
dev.off()

See ?device for a listing of available devices.

Ben


On Tue, Mar 9, 2021 at 7:11 AM Mahmood Naderan-Tahan
<mahmood.naderan at ugent.be> wrote:
>
> Hi
>
> I use the following R script to plot two graphs.
>
>
> library(FactoMineR)
> mydata <- read.csv('test.csv', header=T,row.names=1)
> res.pca = PCA(mydata, quali.sup=5, graph=F)
> plot(res.pca, choix="var", axes=c(1,2))
> dev.new()
> plot(res.pca, choix="ind", axes=c(1,2))
>
> After running "Rscript my.r", I see two pdf files Rplots.pdf and Rplots1.pdf.
> I would like to specify file names in the script as well. How can I do that?
>
>
> Regards,
> Mahmood
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Ben Tupper
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org


From m@hmood@n@der@n @end|ng |rom ugent@be  Tue Mar  9 15:58:21 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Tue, 9 Mar 2021 14:58:21 +0000
Subject: [R] Specifying plot file name in the rscript
In-Reply-To: <CALrbzg34F1qv=h6hk9Sre8=tg88dDVThu5+t6EuJK0ivYytr3Q@mail.gmail.com>
References: <ca0e55f6d10a49d8bdde0855d688f647@ugent.be>,
 <CALrbzg34F1qv=h6hk9Sre8=tg88dDVThu5+t6EuJK0ivYytr3Q@mail.gmail.com>
Message-ID: <b7fcdb8394e94722a2cd0972824122f9@ugent.be>

Right. Thank you very much.


Regards,
Mahmood

________________________________
From: Ben Tupper <btupper at bigelow.org>
Sent: Tuesday, March 9, 2021 2:58:17 PM
To: Mahmood Naderan-Tahan
Cc: r-help at r-project.org
Subject: Re: [R] Specifying plot file name in the rscript

Hi,

When you call plot() it will draw to the default device - in your case
the pdf() device. When the default device results in a file, R selects
a filename for you unless you tell it otherwise.  You can specify the
filename by explicitly calling pdf() first.

pdf("var_plot.pdf")
plot(res.pca, choix="var", axes=c(1,2))
dev.off()

pdf("ind_plot.pdf")
plot(res.pca, choix="ind", axes=c(1,2))
dev.off()

See ?device for a listing of available devices.

Ben


On Tue, Mar 9, 2021 at 7:11 AM Mahmood Naderan-Tahan
<mahmood.naderan at ugent.be> wrote:
>
> Hi
>
> I use the following R script to plot two graphs.
>
>
> library(FactoMineR)
> mydata <- read.csv('test.csv', header=T,row.names=1)
> res.pca = PCA(mydata, quali.sup=5, graph=F)
> plot(res.pca, choix="var", axes=c(1,2))
> dev.new()
> plot(res.pca, choix="ind", axes=c(1,2))
>
> After running "Rscript my.r", I see two pdf files Rplots.pdf and Rplots1.pdf.
> I would like to specify file names in the script as well. How can I do that?
>
>
> Regards,
> Mahmood
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Ben Tupper
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org

	[[alternative HTML version deleted]]


From phii m@iii@g oii phiiipsmith@c@  Tue Mar  9 16:36:42 2021
From: phii m@iii@g oii phiiipsmith@c@ (phii m@iii@g oii phiiipsmith@c@)
Date: Tue, 09 Mar 2021 10:36:42 -0500
Subject: [R] Gradient plots in ggplot2
In-Reply-To: <5A4F5B33-E946-4570-A940-29D74B6B34AA@dcn.davis.ca.us>
References: <4aef82068c893777dd89dcfa2cabcd84@philipsmith.ca>
 <5A4F5B33-E946-4570-A940-29D74B6B34AA@dcn.davis.ca.us>
Message-ID: <fc9bb088326bba6b57dd132ae78783ca@philipsmith.ca>

Thank you for your suggestions. I found, after much experimentation, 
that scale_fill_gradientn did indeed provide a good solution, as below.

library(ggplot2)
a <- c(rep(1,6),rep(2,6),rep(3,6),rep(4,6))
b <- c(0.1, 0.5,-0.3, 1.2,-0.4,-1.2,
        0.7, 0.8,-1.2,-0.5,10.0, 0.3,
        0.2,-0.4,-15.,-0.4,-0.9,  NA,
        0.1, 1.3,-1.4, 0.5,-0.5, 0.1)
c <- c(rep(c("a","b","c","d","e","f"),4))
df <- data.frame(a,b)
ggplot(df,aes(x=a,y=c,fill=b))+
   geom_tile()+
   geom_text(label=ifelse(is.na(b),"NA",paste0(round(b,1),"%")),
     size=10,colour="black")+
   scale_fill_gradientn(colours=c("yellow","green","red","lightblue"),
     values=c(0.0,0.5,0.7,1.0),na.value="white")

Philip


On 2021-03-08 23:44, Jeff Newmiller wrote:

> Perhaps scale_fill_gradientn() would be useful.
> 
> On March 8, 2021 8:05:52 PM PST, phil at philipsmith.ca wrote:
>> I am having trouble with a gradient fill application in ggplot2, 
>> caused
>> 
>> by outlier values. In my reprex, most of the values are between 2 and
>> -2, but there are two outliers, 10 and -15. The outliers stand out
>> well,
>> which is good, but all the other numbers show almost no colour
>> variation. I would like to continue with bold colours for the 
>> outliers,
>> 
>> while having a more variable gradient, perhaps but not necessarily in 
>> a
>> 
>> different colour, for the values between 2 nd -2. Any ideas on how 
>> this
>> 
>> can be done?
>> 
>> 
>> library(ggplot2)
>> a <- c(rep(1,6),rep(2,6),rep(3,6),rep(4,6))
>> b <- c(0.1, 0.5,-0.3, 1.2,-0.4,-1.2,
>>        0.7, 0.8,-1.2,-0.5,10.0, 0.3,
>>        0.2,-0.4,-15.,-0.4,-0.9,  NA,
>>        0.1, 1.3,-1.4, 0.5,-0.5, 0.1)
>> c <- c(rep(c("a","b","c","d","e","f"),4))
>> df <- data.frame(a,b)
>> ggplot(df,aes(x=a,y=c,fill=b))+
>>   geom_tile()+
>>   geom_text(label=paste0(round(b,1),"%"),
>>     size=10,colour="gold")+
>>   scale_fill_gradient(low="red",high="blue",na.value="grey50")
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Tue Mar  9 19:57:17 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 9 Mar 2021 19:57:17 +0100
Subject: [R] 
 Plot_ly bar plots - bars span sevral x values when there are
 missing values.
In-Reply-To: <CAN9eD7nitpaX07SoaE2yN6Hicr6BzV6owViqqBQRjQVeZUTg7Q@mail.gmail.com>
References: <CAN9eD7nitpaX07SoaE2yN6Hicr6BzV6owViqqBQRjQVeZUTg7Q@mail.gmail.com>
Message-ID: <YEfFDTrhBW3Lr+99@posteo.no>

Dear Nevil,

Although I am a bit unfamiliar with 
plotly, it seems it is possible to plot 
two bars side by side at least:

	h <- df[3:4,]
	p <- plotly::plot_ly(
	  data = h,
	  x =  ~ x,
	  y =  ~ y,
	  type = "bar")
	p <- plotly::layout(p=p,
	  xaxis = list(range = c(0,20)),
	  title = "example 4 two bars side by side")
	plotly::orca(p=p, file="amos4.png")

Thus, if you want to only plot x=3 and 
x=11 you need to set y=0 when x=4:10:

	h <- df[c(3, 11),]
	h <- rbind(h, cbind(x=4:10, y=0))
	p <- plotly::plot_ly(
	  data = h,
	  x =  ~ x,
	  y =  ~ y,
	  type = "bar")
	p <- plotly::layout(p=p,
	  xaxis = list(range = c(0,20)),
	  title = "example 2 corrected")
	plotly::orca(p=p, file="amos2.png")

I think this has to do with the xaxis 
option in plotly::layout there, and not 
with the bar width.

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210309/61ad8b56/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Tue Mar  9 20:16:24 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 9 Mar 2021 20:16:24 +0100
Subject: [R] Changing chart border's color
In-Reply-To: <48d3f6393e8447efa2578d2ded7b7daa@ugent.be>
References: <48d3f6393e8447efa2578d2ded7b7daa@ugent.be>
Message-ID: <YEfJiL0000c9uLy4@posteo.no>

Hi,  it would be useful to know how you 
created res.pca.   
https://rdrr.io/r/graphics/box.html

Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210309/02f945e5/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Tue Mar  9 20:37:03 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 9 Mar 2021 20:37:03 +0100
Subject: [R] poLCA problem
In-Reply-To: <YT1PR01MB244344ADE1C28B38DE1EF2F8CE969@YT1PR01MB2443.CANPRD01.PROD.OUTLOOK.COM>
References: <YT1PR01MB244344ADE1C28B38DE1EF2F8CE969@YT1PR01MB2443.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <YEfOX2vGZr1yJ/FR@posteo.no>

Dear Scott,

I think the issue here is you need to 
form a correct formula poLCA::poLCA can 
accept.

The help page ?poLCA::election has this 
example:

	# Latent class models with one (loglinear independence) to three classes
	data(election)
	f <- cbind(MORALG,CARESG,KNOWG,LEADG,DISHONG,INTELG,
	           MORALB,CARESB,KNOWB,LEADB,DISHONB,INTELB)~1
	nes1 <- poLCA(f,election,nclass=1)  # log-likelihood: -18647.31
	nes2 <- poLCA(f,election,nclass=2)  # log-likelihood: -17344.92
	nes3 <- poLCA(f,election,nclass=3)  # log-likelihood: -16714.66

Perhaps if you export df first using 
data() and try to use cbind(x1, x2)~1 as 
the formula ... 

	data(df2)
	f <- cbind(x1, x2)~1
	poLCA(f, df2, nclass=2, maxiter=100, nrep=10, verbose =TRUE)

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210309/6d3664f7/attachment.sig>

From m@hmood@n@der@n @end|ng |rom ugent@be  Tue Mar  9 21:43:44 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Tue, 9 Mar 2021 20:43:44 +0000
Subject: [R] Changing chart border's color
In-Reply-To: <YEfJiL0000c9uLy4@posteo.no>
References: <48d3f6393e8447efa2578d2ded7b7daa@ugent.be>,
 <YEfJiL0000c9uLy4@posteo.no>
Message-ID: <c426e42c89ff490495c2419bf974de1e@ugent.be>

Hi Rasmus,

Please see the following commands. The box fails.


> library("FactoMineR")
> mydata <- read.csv('test.csv', header=T,row.names=1)
> res.pca = PCA(mydata, quali.sup=5, graph=F)
> plot(res.pca, choix="ind")
> box(col='black')
Error in box(col = "black") : plot.new has not been called yet




Regards,
Mahmood

________________________________
From: Rasmus Liland <jral at posteo.no>
Sent: Tuesday, March 9, 2021 8:16:24 PM
To: Mahmood Naderan-Tahan
Cc: r-help at r-project.org
Subject: Re: [R] Changing chart border's color

Hi,  it would be useful to know how you
created res.pca.
https://rdrr.io/r/graphics/box.html

Rasmus

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Tue Mar  9 22:50:06 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 09 Mar 2021 22:50:06 +0100
Subject: [R] Changing chart border's color
In-Reply-To: <c426e42c89ff490495c2419bf974de1e@ugent.be>
References: <48d3f6393e8447efa2578d2ded7b7daa@ugent.be>,
 <YEfJiL0000c9uLy4@posteo.no>
 <c426e42c89ff490495c2419bf974de1e@ugent.be>
Message-ID: <3E4B336A-C73C-4319-A448-DBE546477CF1@posteo.no>

Please add test.csv using dput ?


From jr@| @end|ng |rom po@teo@no  Wed Mar 10 01:23:13 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Mar 2021 01:23:13 +0100
Subject: [R] Changing chart border's color
In-Reply-To: <c426e42c89ff490495c2419bf974de1e@ugent.be>
References: <48d3f6393e8447efa2578d2ded7b7daa@ugent.be>
 <YEfJiL0000c9uLy4@posteo.no>
 <c426e42c89ff490495c2419bf974de1e@ugent.be>
Message-ID: <YEgRcf/r2tAzslNt@posteo.no>

Right, adding a black border around a 
plot in R is meaningless.  

There is also another circular plot 
being created everytime FactoMineR::PCA 
runs.  

It might be (perhaps, idk) fruitful for 
you to look at the contents of res.pca 
using str and create the PCA plot 
yourself using ggplot2 ...  or maybe 
plotly inside a shiny app ....

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210310/b201c9ab/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Wed Mar 10 02:46:31 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Mar 2021 02:46:31 +0100
Subject: [R] Extract data from .nc file
In-Reply-To: <AC81C13F-22AA-4A41-911A-13AF5A9A99CD@noaa.gov>
References: <CAMUcscBQ42wYxn4wWA3LRT0hjf+berdnpayrYx_foEFqrizZRg@mail.gmail.com>
 <AC81C13F-22AA-4A41-911A-13AF5A9A99CD@noaa.gov>
Message-ID: <YEgk9w0uM9TAyeQY@posteo.no>

Dear Shailendra and Roy,

Yes, the info ncvar_get retrieves is of 
different lengths.  soi_final does not 
have a time variable for the x axis, and 
tt is a integer vector 
int [1:2001(1d)] 0 365 730 1095 1460 1825 2190 2555 2920 3285 ...

The file is a HDF5 file:

	rasmus at twosixty ~ % file posterior_climate_indices_MCruns_ensemble_full_LMRv2.1.nc
	posterior_climate_indices_MCruns_ensemble_full_LMRv2.1.nc: Hierarchical Data Format (version 5) data

I have read the HDF5 files dsk 
https://github.com/GATB/dsk creates 
before using hdf5r.  It's more 
detailed for digging around in there:

	fname <- "posterior_climate_indices_MCruns_ensemble_full_LMRv2.1.nc"
	file <- hdf5r::h5file(fname, mode = "a")
	hdf5r::list.datasets(file)
	str(file)
	names(file)
	file[["lon_npac"]][["key_info"]][["space"]]
	names(file[["lon_npac"]][["key_info"]])
	file$close_all()

But, I think you perhaps don't want more 
level of detail ...

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210310/74fef9ac/attachment.sig>

From R@H@un@ch||d @end|ng |rom |k|@mpg@de  Wed Mar 10 14:08:11 2021
From: R@H@un@ch||d @end|ng |rom |k|@mpg@de (Dr. Robin Haunschild)
Date: Wed, 10 Mar 2021 14:08:11 +0100
Subject: [R] Color in stripchart
Message-ID: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>

Dear fellow R users,

I'd like to color individual points in a stripchart. This works well as
long as I have only a single value per y axis category:

df <- data.frame(year = seq(2011, 2018), value = seq(10,80, 10))
df$color <- 'black'
df[df$value<33,]$color <- 'blue'
df[df$value>66,]$color <- 'red'
stripchart(df$value ~ df$year, pch=18, col=df$color, method='stack')

When I use multiple values per y axis category, all points in a specific
y axis category have the same color:

set.seed(20210310)
years <- sample(x=seq(2011, 2018), size = 365*8, replace = TRUE)
values <- sample(x=seq(0,100), size = 365*8, replace = TRUE)
df <- data.frame(year = years, value = values)
df$color <- 'black'
df[df$value<33,]$color <- 'blue'
df[df$value>66,]$color <- 'red'
stripchart(df$value ~ df$year, pch=18, col=df$color, method='stack')

I'd expect to see all points with a value below 33 in blue color, all
points with a value above 66 in red color, and the remaining points in
black color.

I can use a black stripchart plot as basis and plot blue and red points
over the black ones, but I do not get the stacking right:

stripchart(df$value ~ df$year, pch=18, method='stack')
points(df[df$color=='blue',]$value, df[df$color=='blue',]$year-2010,
type='p', pch=18, col='blue')
points(df[df$color=='red',]$value, df[df$color=='red',]$year-2010,
type='p', pch=18, col='red')

Am I somehow misusing the stripchart function?


Best regards,

Robin
-- 
Dr. Robin Haunschild
Max Planck Institute for Solid State Research
Heisenbergstr. 1
D-70569 Stuttgart (Germany)
phone: +49 (0) 711-689-1285
fax:   +49 (0) 711-689-1292
email: R.Haunschild at fkf.mpg.de
http://www.fkf.mpg.de/ivs
Publons: https://publons.com/researcher/2845202/robin-haunschild/
GS: https://scholar.google.de/citations?user=kDfateQAAAAJ&hl=de&oi=ao


From gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de  Wed Mar 10 15:04:05 2021
From: gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de (Gerrit Eichner)
Date: Wed, 10 Mar 2021 15:04:05 +0100
Subject: [R] Color in stripchart
In-Reply-To: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>
References: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>
Message-ID: <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>

Dear Robin,

if you study stripchart's code (graphics:::stripchart) carefully
you will find out that the elements of the vector provided to the
col-argument (and the pch-argument as well) are selected by iterating
along the groups (in your case year). I don't seen easy solution for
your problem using stripchart, but you may want to look at the
examples of function beeswarm in package beeswarm.

  Hth  --  Gerrit

---------------------------------------------------------------------
Dr. Gerrit Eichner                   Mathematical Institute, Room 212
gerrit.eichner at math.uni-giessen.de   Justus-Liebig-University Giessen
Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
http://www.uni-giessen.de/eichner
---------------------------------------------------------------------

Am 10.03.2021 um 14:08 schrieb Dr. Robin Haunschild:
> Dear fellow R users,
> 
> I'd like to color individual points in a stripchart. This works well as
> long as I have only a single value per y axis category:
> 
> df <- data.frame(year = seq(2011, 2018), value = seq(10,80, 10))
> df$color <- 'black'
> df[df$value<33,]$color <- 'blue'
> df[df$value>66,]$color <- 'red'
> stripchart(df$value ~ df$year, pch=18, col=df$color, method='stack')
> 
> When I use multiple values per y axis category, all points in a specific
> y axis category have the same color:
> 
> set.seed(20210310)
> years <- sample(x=seq(2011, 2018), size = 365*8, replace = TRUE)
> values <- sample(x=seq(0,100), size = 365*8, replace = TRUE)
> df <- data.frame(year = years, value = values)
> df$color <- 'black'
> df[df$value<33,]$color <- 'blue'
> df[df$value>66,]$color <- 'red'
> stripchart(df$value ~ df$year, pch=18, col=df$color, method='stack')
> 
> I'd expect to see all points with a value below 33 in blue color, all
> points with a value above 66 in red color, and the remaining points in
> black color.
> 
> I can use a black stripchart plot as basis and plot blue and red points
> over the black ones, but I do not get the stacking right:
> 
> stripchart(df$value ~ df$year, pch=18, method='stack')
> points(df[df$color=='blue',]$value, df[df$color=='blue',]$year-2010,
> type='p', pch=18, col='blue')
> points(df[df$color=='red',]$value, df[df$color=='red',]$year-2010,
> type='p', pch=18, col='red')
> 
> Am I somehow misusing the stripchart function?
> 
> 
> Best regards,
> 
> Robin
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jr@| @end|ng |rom po@teo@no  Wed Mar 10 15:15:06 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Mar 2021 15:15:06 +0100
Subject: [R] Color in stripchart
In-Reply-To: <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>
References: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>
 <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>
Message-ID: <YEjUaj4o/3yqk5+x@posteo.no>

Dear Robin and Gerrit,

I am unable to see the difference in the 
plot in the two cases ... 

	df <- data.frame(year = seq(2011, 2018), value = seq(10, 80, 10))
	df$color <- 'black'
	df[df$value<33,]$color <- 'blue'
	df[df$value>66,]$color <- 'red'
	
	file <- "/tmp/robin.png"
	width <- 1000
	height <- 1000
	res <- 150
	png(file=file, width=width, height=height, res=res)
	par(mfrow=c(2,1))
	
	stripchart(df$value ~ df$year, pch=18, col=df$color, method='stack', main="stripchart with color column as col")
	
	stripchart(df$value ~ df$year, pch=18, method='stack', main="stripchart with black basis")
	points(df[df$color=='blue',]$value, df[df$color=='blue',]$year-2010,
	type='p', pch=18, col='blue')
	points(df[df$color=='red',]$value, df[df$color=='red',]$year-2010,
	type='p', pch=18, col='red')
	
	dev.off()

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: robin.png
Type: image/png
Size: 38927 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210310/5862f5ba/attachment.png>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210310/5862f5ba/attachment.sig>

From R@H@un@ch||d @end|ng |rom |k|@mpg@de  Wed Mar 10 15:49:05 2021
From: R@H@un@ch||d @end|ng |rom |k|@mpg@de (Dr. Robin Haunschild)
Date: Wed, 10 Mar 2021 15:49:05 +0100
Subject: [R] Color in stripchart
In-Reply-To: <YEjUaj4o/3yqk5+x@posteo.no>
References: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>
 <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>
 <YEjUaj4o/3yqk5+x@posteo.no>
Message-ID: <7981c1d9-4c64-5f87-a4cd-47ceba19e254@fkf.mpg.de>

Dear Rasmus,

there is no difference in the small exmaple, because there is only one
point per year.

If you use the example with multiple points per year, you will see the
difference.

Best, Robin


On 3/10/21 3:15 PM, Rasmus Liland wrote:
> Dear Robin and Gerrit,
> 
> I am unable to see the difference in the 
> plot in the two cases ... 
> 
> 	df <- data.frame(year = seq(2011, 2018), value = seq(10, 80, 10))
> 	df$color <- 'black'
> 	df[df$value<33,]$color <- 'blue'
> 	df[df$value>66,]$color <- 'red'
> 	
> 	file <- "/tmp/robin.png"
> 	width <- 1000
> 	height <- 1000
> 	res <- 150
> 	png(file=file, width=width, height=height, res=res)
> 	par(mfrow=c(2,1))
> 	
> 	stripchart(df$value ~ df$year, pch=18, col=df$color, method='stack', main="stripchart with color column as col")
> 	
> 	stripchart(df$value ~ df$year, pch=18, method='stack', main="stripchart with black basis")
> 	points(df[df$color=='blue',]$value, df[df$color=='blue',]$year-2010,
> 	type='p', pch=18, col='blue')
> 	points(df[df$color=='red',]$value, df[df$color=='red',]$year-2010,
> 	type='p', pch=18, col='red')
> 	
> 	dev.off()
> 
> Best,
> Rasmus
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


-- 
Dr. Robin Haunschild
Max Planck Institute for Solid State Research
Heisenbergstr. 1
D-70569 Stuttgart (Germany)
phone: +49 (0) 711-689-1285
fax:   +49 (0) 711-689-1292
email: R.Haunschild at fkf.mpg.de
http://www.fkf.mpg.de/ivs
Publons: https://publons.com/researcher/2845202/robin-haunschild/
GS: https://scholar.google.de/citations?user=kDfateQAAAAJ&hl=de&oi=ao


From R@H@un@ch||d @end|ng |rom |k|@mpg@de  Wed Mar 10 17:17:22 2021
From: R@H@un@ch||d @end|ng |rom |k|@mpg@de (Dr. Robin Haunschild)
Date: Wed, 10 Mar 2021 17:17:22 +0100
Subject: [R] Color in stripchart
In-Reply-To: <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>
References: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>
 <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>
Message-ID: <7aead6f6-f592-5c32-9221-30b4be36f56e@fkf.mpg.de>

Dear Gerrit,

thanks a lot; it works with beeswarm and pwcol=df$color.

Best, Robin


On 3/10/21 3:04 PM, Gerrit Eichner wrote:
> Dear Robin,
> 
> if you study stripchart's code (graphics:::stripchart) carefully
> you will find out that the elements of the vector provided to the
> col-argument (and the pch-argument as well) are selected by iterating
> along the groups (in your case year). I don't seen easy solution for
> your problem using stripchart, but you may want to look at the
> examples of function beeswarm in package beeswarm.
> 
> ?Hth? --? Gerrit
> 
> ---------------------------------------------------------------------
> Dr. Gerrit Eichner?????????????????? Mathematical Institute, Room 212
> gerrit.eichner at math.uni-giessen.de?? Justus-Liebig-University Giessen
> Tel: +49-(0)641-99-32104????????? Arndtstr. 2, 35392 Giessen, Germany
> http://www.uni-giessen.de/eichner
> ---------------------------------------------------------------------
> 
> Am 10.03.2021 um 14:08 schrieb Dr. Robin Haunschild:
>> Dear fellow R users,
>>
>> I'd like to color individual points in a stripchart. This works well as
>> long as I have only a single value per y axis category:
>>
>> df <- data.frame(year = seq(2011, 2018), value = seq(10,80, 10))
>> df$color <- 'black'
>> df[df$value<33,]$color <- 'blue'
>> df[df$value>66,]$color <- 'red'
>> stripchart(df$value ~ df$year, pch=18, col=df$color, method='stack')
>>
>> When I use multiple values per y axis category, all points in a specific
>> y axis category have the same color:
>>
>> set.seed(20210310)
>> years <- sample(x=seq(2011, 2018), size = 365*8, replace = TRUE)
>> values <- sample(x=seq(0,100), size = 365*8, replace = TRUE)
>> df <- data.frame(year = years, value = values)
>> df$color <- 'black'
>> df[df$value<33,]$color <- 'blue'
>> df[df$value>66,]$color <- 'red'
>> stripchart(df$value ~ df$year, pch=18, col=df$color, method='stack')
>>
>> I'd expect to see all points with a value below 33 in blue color, all
>> points with a value above 66 in red color, and the remaining points in
>> black color.
>>
>> I can use a black stripchart plot as basis and plot blue and red points
>> over the black ones, but I do not get the stacking right:
>>
>> stripchart(df$value ~ df$year, pch=18, method='stack')
>> points(df[df$color=='blue',]$value, df[df$color=='blue',]$year-2010,
>> type='p', pch=18, col='blue')
>> points(df[df$color=='red',]$value, df[df$color=='red',]$year-2010,
>> type='p', pch=18, col='red')
>>
>> Am I somehow misusing the stripchart function?
>>
>>
>> Best regards,
>>
>> Robin
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Dr. Robin Haunschild
Max Planck Institute for Solid State Research
Heisenbergstr. 1
D-70569 Stuttgart (Germany)
phone: +49 (0) 711-689-1285
fax:   +49 (0) 711-689-1292
email: R.Haunschild at fkf.mpg.de
http://www.fkf.mpg.de/ivs
Publons: https://publons.com/researcher/2845202/robin-haunschild/
GS: https://scholar.google.de/citations?user=kDfateQAAAAJ&hl=de&oi=ao


From jr@| @end|ng |rom po@teo@no  Wed Mar 10 17:22:54 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Mar 2021 17:22:54 +0100
Subject: [R] Color in stripchart
In-Reply-To: <7981c1d9-4c64-5f87-a4cd-47ceba19e254@fkf.mpg.de>
References: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>
 <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>
 <YEjUaj4o/3yqk5+x@posteo.no>
 <7981c1d9-4c64-5f87-a4cd-47ceba19e254@fkf.mpg.de>
Message-ID: <YEjyXhVuF6m3Idpa@posteo.no>

Hello there again,

Sorry, I missed that part in the middle 
about set.seed.  As per [1], you need to 
run stripchart again with the add 
argument set to TRUE, and slicing the df 
according to the color, like so

	set.seed(20210310)
	years <- sample(x=seq(2011, 2018), size = 365*8, replace = TRUE)
	values <- sample(x=seq(0,100), size = 365*8, replace = TRUE)
	df <- data.frame(year = years, value = values)
	df$color <- 'black'
	df[df$value<33,]$color <- 'blue'
	df[df$value>66,]$color <- 'red'
	
	stripchart(value ~ year, pch=18, method='stack', data=df)
	for (color in unique(df$color)) {
	  stripchart(value ~ year, pch=18, method='stack', data=df[df$color==color,], col=color, add=TRUE)
	}

Best,
Rasmus

[1] https://stackoverflow.com/questions/32833210/define-color-for-each-datapoint-in-a-stripchart-separately

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210310/f42f0e5a/attachment.sig>

From R@H@un@ch||d @end|ng |rom |k|@mpg@de  Wed Mar 10 17:35:43 2021
From: R@H@un@ch||d @end|ng |rom |k|@mpg@de (Dr. Robin Haunschild)
Date: Wed, 10 Mar 2021 17:35:43 +0100
Subject: [R] Color in stripchart
In-Reply-To: <YEjyXhVuF6m3Idpa@posteo.no>
References: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>
 <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>
 <YEjUaj4o/3yqk5+x@posteo.no>
 <7981c1d9-4c64-5f87-a4cd-47ceba19e254@fkf.mpg.de>
 <YEjyXhVuF6m3Idpa@posteo.no>
Message-ID: <a22ff195-366b-9484-cd96-c4ccb4df3c26@fkf.mpg.de>

Dear Rasmus,

thanks, that works, too.

Great!

Best, Robin


On 3/10/21 5:22 PM, Rasmus Liland wrote:
> Hello there again,
> 
> Sorry, I missed that part in the middle 
> about set.seed.  As per [1], you need to 
> run stripchart again with the add 
> argument set to TRUE, and slicing the df 
> according to the color, like so
> 
> 	set.seed(20210310)
> 	years <- sample(x=seq(2011, 2018), size = 365*8, replace = TRUE)
> 	values <- sample(x=seq(0,100), size = 365*8, replace = TRUE)
> 	df <- data.frame(year = years, value = values)
> 	df$color <- 'black'
> 	df[df$value<33,]$color <- 'blue'
> 	df[df$value>66,]$color <- 'red'
> 	
> 	stripchart(value ~ year, pch=18, method='stack', data=df)
> 	for (color in unique(df$color)) {
> 	  stripchart(value ~ year, pch=18, method='stack', data=df[df$color==color,], col=color, add=TRUE)
> 	}
> 
> Best,
> Rasmus
> 
> [1] https://stackoverflow.com/questions/32833210/define-color-for-each-datapoint-in-a-stripchart-separately
> 


-- 
Dr. Robin Haunschild
Max Planck Institute for Solid State Research
Heisenbergstr. 1
D-70569 Stuttgart (Germany)
phone: +49 (0) 711-689-1285
fax:   +49 (0) 711-689-1292
email: R.Haunschild at fkf.mpg.de
http://www.fkf.mpg.de/ivs
Publons: https://publons.com/researcher/2845202/robin-haunschild/
GS: https://scholar.google.de/citations?user=kDfateQAAAAJ&hl=de&oi=ao


From j@cobg314 @end|ng |rom hotm@||@com  Wed Mar 10 08:36:30 2021
From: j@cobg314 @end|ng |rom hotm@||@com (Jacob Goldsmith)
Date: Wed, 10 Mar 2021 07:36:30 +0000
Subject: [R] [R-pkgs] {peruse}
Message-ID: <CO2PR04MB2231845593028B6FF61BC86FFB919@CO2PR04MB2231.namprd04.prod.outlook.com>

Hello all,

R package {peruse 0.3.1} is on CRAN. {peruse} provides simple tools for sequence iteration and set comprehension. It is especially useful for analyzing recursively generated sequences, including any stochastic process. The main page at https://jacgoldsm.github.io/peruse/ provides in-depth examples and extensive explanation of how to use the tool.

CRAN link:
https://CRAN.R-project.org/package=peruse<https://cran.r-project.org/package=peruse>


Best,
Jacob Goldsmith




	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From @ret|p@nopou|ou @end|ng |rom gm@||@com  Wed Mar 10 19:29:11 2021
From: @ret|p@nopou|ou @end|ng |rom gm@||@com (Areti Panopoulou)
Date: Wed, 10 Mar 2021 18:29:11 +0000
Subject: [R] Help please
Message-ID: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>

Hello,

I am trying to make a stacked barplot with different behaviours
("inactive", "active", "foraging" etc) on different substrates ("tree",
"ground" etc). I have found this function:

# Stacked Bar Plot with Colors and Legend
counts <- table(mtcars$vs, mtcars$gear)
barplot(counts, main="Car Distribution by Gears and VS",
  xlab="Number of Gears", col=c("darkblue","red"),
  legend = rownames(counts))

But don't know how to apply it. Can anybody help me apply the function to
work with my variables ( I can send more information if necessary, or make
any clarifications).

This is a great help, thanks a lot.

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Wed Mar 10 23:58:56 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 10 Mar 2021 22:58:56 +0000
Subject: [R] [External]  Help please
In-Reply-To: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
Message-ID: <CO1PR11MB51070A027154D704B30AE61BD2919@CO1PR11MB5107.namprd11.prod.outlook.com>

install.packages("HH")
library(HH)
?likert

>From your description, I think your data is set up to work with likert()

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Areti Panopoulou <aretipanopoulou at gmail.com>
Sent: Wednesday, March 10, 2021 13:29
To: r-help at r-project.org
Subject: [External] [R] Help please

Hello,

I am trying to make a stacked barplot with different behaviours
("inactive", "active", "foraging" etc) on different substrates ("tree",
"ground" etc). I have found this function:

# Stacked Bar Plot with Colors and Legend
counts <- table(mtcars$vs, mtcars$gear)
barplot(counts, main="Car Distribution by Gears and VS",
  xlab="Number of Gears", col=c("darkblue","red"),
  legend = rownames(counts))

But don't know how to apply it. Can anybody help me apply the function to
work with my variables ( I can send more information if necessary, or make
any clarifications).

This is a great help, thanks a lot.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Mar 11 00:01:20 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 10 Mar 2021 23:01:20 +0000
Subject: [R] Help please
In-Reply-To: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
Message-ID: <48cb4eed-7c20-c02d-de34-418db4fe040c@sapo.pt>

Hello,

Please read the posting guide at the end of this and every R-Help mail.
You should post the output of

dput(data)

or, if the data set 'data' is too big, the output of

dput(head(data, 20))

for us to be able to help you.

Rui Barradas

?s 18:29 de 10/03/21, Areti Panopoulou escreveu:
> Hello,
> 
> I am trying to make a stacked barplot with different behaviours
> ("inactive", "active", "foraging" etc) on different substrates ("tree",
> "ground" etc). I have found this function:
> 
> # Stacked Bar Plot with Colors and Legend
> counts <- table(mtcars$vs, mtcars$gear)
> barplot(counts, main="Car Distribution by Gears and VS",
>    xlab="Number of Gears", col=c("darkblue","red"),
>    legend = rownames(counts))
> 
> But don't know how to apply it. Can anybody help me apply the function to
> work with my variables ( I can send more information if necessary, or make
> any clarifications).
> 
> This is a great help, thanks a lot.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From rmh @end|ng |rom temp|e@edu  Thu Mar 11 01:19:20 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 11 Mar 2021 00:19:20 +0000
Subject: [R] [External]  Help please
In-Reply-To: <CO1PR11MB51070A027154D704B30AE61BD2919@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>,
 <CO1PR11MB51070A027154D704B30AE61BD2919@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <CO1PR11MB5107625EF956757E9BB37D71D2909@CO1PR11MB5107.namprd11.prod.outlook.com>

> counts <- with(mtcars, table(gear, vs))
> counts
    vs
gear  0  1
   3 12  3
   4  2 10
   5  4  1
> likert(counts)
>

If this isn't enough, ask a more specific question.

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Richard M. Heiberger <rmh at temple.edu>
Sent: Wednesday, March 10, 2021 17:58
To: Areti Panopoulou; r-help at r-project.org
Subject: Re: [R] [External]  Help please

install.packages("HH")
library(HH)
?likert

>From your description, I think your data is set up to work with likert()

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Areti Panopoulou <aretipanopoulou at gmail.com>
Sent: Wednesday, March 10, 2021 13:29
To: r-help at r-project.org
Subject: [External] [R] Help please

Hello,

I am trying to make a stacked barplot with different behaviours
("inactive", "active", "foraging" etc) on different substrates ("tree",
"ground" etc). I have found this function:

# Stacked Bar Plot with Colors and Legend
counts <- table(mtcars$vs, mtcars$gear)
barplot(counts, main="Car Distribution by Gears and VS",
  xlab="Number of Gears", col=c("darkblue","red"),
  legend = rownames(counts))

But don't know how to apply it. Can anybody help me apply the function to
work with my variables ( I can send more information if necessary, or make
any clarifications).

This is a great help, thanks a lot.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Thu Mar 11 01:35:51 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 11 Mar 2021 11:35:51 +1100
Subject: [R] Help please
In-Reply-To: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
Message-ID: <CA+8X3fWOuq6+NJet7dLVX4gkbHAt_gjM_UbxU_52n_ngW2XS1g@mail.gmail.com>

Hi Areti,
Maybe this will help:

scrounging<-data.frame(
 behav=sample(c("inactive","active","foraging","snoozing"),50,TRUE),
 substr=sample(c("tree","ground","vine","air"),50,TRUE))
scrounge.tab<-table(scrounging)
barplot(scrounge.tab)
legend(3.8,14,c("inactive","active","foraging","snoozing"),
 fill=c("gray80","gray60","gray40","gray20"))

Jim

On Thu, Mar 11, 2021 at 9:54 AM Areti Panopoulou
<aretipanopoulou at gmail.com> wrote:
>
> Hello,
>
> I am trying to make a stacked barplot with different behaviours
> ("inactive", "active", "foraging" etc) on different substrates ("tree",
> "ground" etc). I have found this function:
>
> # Stacked Bar Plot with Colors and Legend
> counts <- table(mtcars$vs, mtcars$gear)
> barplot(counts, main="Car Distribution by Gears and VS",
>   xlab="Number of Gears", col=c("darkblue","red"),
>   legend = rownames(counts))
>
> But don't know how to apply it. Can anybody help me apply the function to
> work with my variables ( I can send more information if necessary, or make
> any clarifications).
>
> This is a great help, thanks a lot.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rmh @end|ng |rom temp|e@edu  Thu Mar 11 01:54:00 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 11 Mar 2021 00:54:00 +0000
Subject: [R] [External] Re:  Help please
In-Reply-To: <CA+8X3fWOuq6+NJet7dLVX4gkbHAt_gjM_UbxU_52n_ngW2XS1g@mail.gmail.com>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>,
 <CA+8X3fWOuq6+NJet7dLVX4gkbHAt_gjM_UbxU_52n_ngW2XS1g@mail.gmail.com>
Message-ID: <CO1PR11MB5107360278AB43B3DF1B6DE0D2909@CO1PR11MB5107.namprd11.prod.outlook.com>

> table(scrounging)
          substr
behav      air ground tree vine
  active     1      5    3    6
  foraging   2      6    3    0
  inactive   6      1    1    3
  snoozing   2      1    3    7
> likert(t(table(scrounging)))

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Jim Lemon <drjimlemon at gmail.com>
Sent: Wednesday, March 10, 2021 19:35
To: Areti Panopoulou; r-help mailing list
Subject: [External] Re: [R] Help please

Hi Areti,
Maybe this will help:

scrounging<-data.frame(
 behav=sample(c("inactive","active","foraging","snoozing"),50,TRUE),
 substr=sample(c("tree","ground","vine","air"),50,TRUE))
scrounge.tab<-table(scrounging)
barplot(scrounge.tab)
legend(3.8,14,c("inactive","active","foraging","snoozing"),
 fill=c("gray80","gray60","gray40","gray20"))

Jim

On Thu, Mar 11, 2021 at 9:54 AM Areti Panopoulou
<aretipanopoulou at gmail.com> wrote:
>
> Hello,
>
> I am trying to make a stacked barplot with different behaviours
> ("inactive", "active", "foraging" etc) on different substrates ("tree",
> "ground" etc). I have found this function:
>
> # Stacked Bar Plot with Colors and Legend
> counts <- table(mtcars$vs, mtcars$gear)
> barplot(counts, main="Car Distribution by Gears and VS",
>   xlab="Number of Gears", col=c("darkblue","red"),
>   legend = rownames(counts))
>
> But don't know how to apply it. Can anybody help me apply the function to
> work with my variables ( I can send more information if necessary, or make
> any clarifications).
>
> This is a great help, thanks a lot.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Thu Mar 11 12:30:59 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 11 Mar 2021 12:30:59 +0100
Subject: [R] Color in stripchart
In-Reply-To: <a22ff195-366b-9484-cd96-c4ccb4df3c26@fkf.mpg.de>
References: <5479650c-1324-87a2-0cd5-ecc792c5844d@fkf.mpg.de>
 <8a2ed06b-dff2-17ea-1bee-785b420a3c74@math.uni-giessen.de>
 <YEjUaj4o/3yqk5+x@posteo.no>
 <7981c1d9-4c64-5f87-a4cd-47ceba19e254@fkf.mpg.de>
 <YEjyXhVuF6m3Idpa@posteo.no>
 <a22ff195-366b-9484-cd96-c4ccb4df3c26@fkf.mpg.de>
Message-ID: <YEn/c2by9z/TxQP7@posteo.no>

Good for you!


From jr@| @end|ng |rom po@teo@no  Thu Mar 11 15:03:05 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 11 Mar 2021 15:03:05 +0100
Subject: [R] [External] Re:  Help please
In-Reply-To: <CO1PR11MB5107360278AB43B3DF1B6DE0D2909@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
 <CA+8X3fWOuq6+NJet7dLVX4gkbHAt_gjM_UbxU_52n_ngW2XS1g@mail.gmail.com>
 <CO1PR11MB5107360278AB43B3DF1B6DE0D2909@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <YEojGReE43FIEgS/@posteo.no>

Dear Areti,

this dcast data.frame presents the same 
info as Jim's barplot

	reshape2::dcast(data=scrounging, formula=behav~substr, fun.aggregate=length)

yielding

	     behav air ground tree vine
	1   active   5      4    3    3
	2 foraging   2      1    3    4
	3 inactive   0      4    4    5
	4 snoozing   3      5    1    3

I tried to use likert by the example in 
the example in ?likert::likert

	library(likert)
	data(pisaitems)
	items29 <- pisaitems[,substr(names(pisaitems), 1,5) == 'ST25Q']
	names(items29) <- c("Magazines", "Comic books", "Fiction",
	                   "Non-fiction books", "Newspapers")
	l29 <- likert(items29)
	l29
	lapply(items29, levels)

like this 

	u <- unique(scrounging$behav)
	levels.behav <- c("inactive", u[u!="inactive"])
	scrounging$behav <- factor(x=scrounging$behav, levels=levels.behav)
	u <- unique(scrounging$substr)
	levels.substr <- c("ground", u[u!="ground"])
	scrounging$substr <- factor(x=scrounging$substr, levels=levels.substr)
	likert::likert(scrounging)

yielding

	    Item inactive active foraging snoozing
	1  behav       36     20       20       24
	2 substr       20     28       30       22

but I doubt this is meaningful ... 

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210311/5e5a412e/attachment.sig>

From rmh @end|ng |rom temp|e@edu  Thu Mar 11 19:48:46 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 11 Mar 2021 18:48:46 +0000
Subject: [R] [External] Re:  [External] Re:  Help please
In-Reply-To: <YEojGReE43FIEgS/@posteo.no>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
 <CA+8X3fWOuq6+NJet7dLVX4gkbHAt_gjM_UbxU_52n_ngW2XS1g@mail.gmail.com>
 <CO1PR11MB5107360278AB43B3DF1B6DE0D2909@CO1PR11MB5107.namprd11.prod.outlook.com>,
 <YEojGReE43FIEgS/@posteo.no>
Message-ID: <CO1PR11MB51075B4DB7DB513BC9F77DD1D2909@CO1PR11MB5107.namprd11.prod.outlook.com>

The likert() function in library(likert) is not the same as
the likert() function in library(HH).

The likert function in the likert package creates an object that needs to be plotted.
For the likert package you left out the line
        plot(likert::likert(scrounging))
This plot is not consistent with what your initial email said it was looking for.


Both Jim Lemon and I gave you plots that are consistent with your description.
You could probably get a similar plot from likert::likert(), but not by the lines you are using.
The likert::likert() function does not work with the table that HH::likert() and barplot() are using.
look at str(l29) to see what it needs

The likert package and the HH package cannot be loaded simultaneously.
Their use the same function names in incompatible ways.

How to get the ?likert::likert plot using HH:

HH::likert(t(sapply(items29, table)), as.percent=TRUE, positive.order=TRUE)

Here is a complete example using Jim Lemon's data.



## NO library() statements!
## The likert and HH packages have incompatible usage
## of the same function names.

## this is the example from ?likert::likert
data(pisaitems, package="likert")
items29 <- pisaitems[,substr(names(pisaitems), 1,5) == 'ST25Q']
names(items29) <- c("Magazines", "Comic books", "Fiction",
                    "Non-fiction books", "Newspapers")
## plot using likert package
l29 <- likert::likert(items29)
likert:::plot.likert(l29)


## plot using HH package
HH::likert(t(sapply(items29, table)), as.percent=TRUE,
           positive.order=TRUE, main="HH::likert")

HH::likert(t(sapply(items29, table)), as.percent=TRUE,
           positive.order=TRUE, main="HH::likert",
           auto.key=list(columns=2),
           scales=list(y=list(tck=c(0,2)))) ## prettier



## Jim Lemon's example
scrounging <- data.frame(
  behav=sample(c("inactive","active","foraging","snoozing"),50,TRUE),
  substr=sample(c("tree","ground","vine","air"),50,TRUE))

scroungeTable <- t(table(scrounging))
scroungeTable
HH::likert(scroungeTable)

## I don't think Jim Lemon's example can be used directly in the likert package.
## look at
str(l29)
## and notice that it must include both raw data and the table
l29$results
head(l29$items)


## For any further discussion on this list please include the output from
dput(head(yourRealData))
## in the body of the email.

## Jim's example is based on base graphics barplot
## The HH likert() function is based on lattice barchart.
## the likert package's likert:::plot.likert() function is based on ggplot.


________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Rasmus Liland <jral at posteo.no>
Sent: Thursday, March 11, 2021 09:03
To: Areti Panopoulou
Cc: r-help
Subject: [External] Re: [R] [External] Re:  Help please

Dear Areti,

this dcast data.frame presents the same
info as Jim's barplot

        reshape2::dcast(data=scrounging, formula=behav~substr, fun.aggregate=length)

yielding

             behav air ground tree vine
        1   active   5      4    3    3
        2 foraging   2      1    3    4
        3 inactive   0      4    4    5
        4 snoozing   3      5    1    3

I tried to use likert by the example in
the example in ?likert::likert

        library(likert)
        data(pisaitems)
        items29 <- pisaitems[,substr(names(pisaitems), 1,5) == 'ST25Q']
        names(items29) <- c("Magazines", "Comic books", "Fiction",
                           "Non-fiction books", "Newspapers")
        l29 <- likert(items29)
        l29
        lapply(items29, levels)

like this

        u <- unique(scrounging$behav)
        levels.behav <- c("inactive", u[u!="inactive"])
        scrounging$behav <- factor(x=scrounging$behav, levels=levels.behav)
        u <- unique(scrounging$substr)
        levels.substr <- c("ground", u[u!="ground"])
        scrounging$substr <- factor(x=scrounging$substr, levels=levels.substr)
        likert::likert(scrounging)

yielding

            Item inactive active foraging snoozing
        1  behav       36     20       20       24
        2 substr       20     28       30       22

but I doubt this is meaningful ...

Best,
Rasmus


From jr@| @end|ng |rom po@teo@no  Thu Mar 11 23:32:59 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 11 Mar 2021 23:32:59 +0100
Subject: [R] [External] Re:  [External] Re:  Help please
In-Reply-To: <CO1PR11MB51075B4DB7DB513BC9F77DD1D2909@CO1PR11MB5107.namprd11.prod.outlook.com>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
 <CA+8X3fWOuq6+NJet7dLVX4gkbHAt_gjM_UbxU_52n_ngW2XS1g@mail.gmail.com>
 <CO1PR11MB5107360278AB43B3DF1B6DE0D2909@CO1PR11MB5107.namprd11.prod.outlook.com>
 <YEojGReE43FIEgS/@posteo.no>
 <CO1PR11MB51075B4DB7DB513BC9F77DD1D2909@CO1PR11MB5107.namprd11.prod.outlook.com>
Message-ID: <YEqamzGPSD0xhevH@posteo.no>

That is such a nice email crammed with 
useful info I'm sure Areti Panopoulou 
appreciates.  JR

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210311/5f964368/attachment.sig>

From @purd|e@@ @end|ng |rom gm@||@com  Fri Mar 12 10:22:39 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 12 Mar 2021 22:22:39 +1300
Subject: [R] 
 quantile from quantile table calculation without original data
In-Reply-To: <a49f19e7a79641f7878f11ba478f0773@SRVEXCHCM1302.precheza.cz>
References: <1614935662799.60644@precheza.cz>
 <CAB8pepzwR97maS4PuF9UYPPGuONqwPfQ4e4AxmyxFAoipXBZYA@mail.gmail.com>
 <CAB8pepzddGaX5NFnzqSJq6YR3t+-cwKAg=rfH9a=1pEt08ATwQ@mail.gmail.com>
 <CAB8pepwdDhdozwPwa7E5QuQ_B_1BWDP28uj46YJVNEioWLsbkw@mail.gmail.com>
 <362ec2a4-8c88-36ac-1b1b-19ab97362515@comcast.net>
 <a49f19e7a79641f7878f11ba478f0773@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAB8pepy2m_jjXZeHisS4UfuyFnV8RA2w51fOecGdV+a-3PW4DQ@mail.gmail.com>

Hi Petr,

In principle, I like David's approach the best.
However, I note that there's a bug in the squared step.
Furthemore, the variance of the sample quantiles should increase as
they move away from the modal region.

I've built on David's approach, but changed it to a two stage
optimization algorithm.
The parameter estimates from the first stage are used to compute density values.
Then the second stage is weighted, using the scaled density values.

I tried to create an iteratively reweighted algorithm.
However, it didn't converge.
(But that doesn't necessarily mean it can't be done).

The following code returns the value: 1.648416e-05

qfit.lnorm <- function (p, q, lower.tail=TRUE, ...,
    par0 = c (-0.5, 0.5) )
{   n <- length (p)
    qsample <- q

    objf <- function (par)
    {   qmodel <- qlnorm (p, par [1], par [2], lower.tail)
        sum ( (qmodel - qsample)^2) / n
    }
    objf.w <- function (wpar, w)
    {   qmodel <- qlnorm (p, wpar [1], wpar [2], lower.tail)
        sum (w * (qmodel - qsample)^2)
    }

    wpar0 <- optim (par0, objf)$par
    w <- dlnorm (p, wpar0 [1], wpar0 [2], lower.tail)
    optim (wpar0, objf.w,, w=w)
}

par <- qfit.lnorm (temp$percent, temp$size, FALSE)$par
plnorm (0.1, par [1], par [2])


On Tue, Mar 9, 2021 at 2:52 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hallo David, Abby and Bert
>
> Thank you for your solutions. In the meantime I found package rriskDistributions, which was able to calculate values for lognormal distribution from quantiles.
>
> Abby
> > 1-psolution
> [1] 9.980823e-06
>
> David
> > plnorm(0.1, -.7020649, .4678656)
> [1] 0.0003120744
>
> rriskDistributions
> > plnorm(0.1, -.6937355, .3881209)
> [1] 1.697379e-05
>
> Bert suggested to ask for original data before quantile calculation what is probably the best but also the most problematic solution. Actually, maybe original data are unavailable as it is the result from particle size measurement, where the software always twist the original data and spits only descriptive results.
>
> All your results are quite consistent with the available values as they are close to 1, so for me, each approach works.
>
> Thank you again.
>
> Best regards.
> Petr
>
> > -----Original Message-----
> > From: David Winsemius <dwinsemius at comcast.net>
> > Sent: Sunday, March 7, 2021 1:33 AM
> > To: Abby Spurdle <spurdle.a at gmail.com>; PIKAL Petr
> > <petr.pikal at precheza.cz>
> > Cc: r-help at r-project.org
> > Subject: Re: [R] quantile from quantile table calculation without original data
> >
> >
> > On 3/6/21 1:02 AM, Abby Spurdle wrote:
> > > I came up with a solution.
> > > But not necessarily the best solution.
> > >
> > > I used a spline to approximate the quantile function.
> > > Then use that to generate a large sample.
> > > (I don't see any need for the sample to be random, as such).
> > > Then compute the sample mean and sd, on a log scale.
> > > Finally, plug everything into the plnorm function:
> > >
> > > p <- seq (0.01, 0.99,, 1e6)
> > > Fht <- splinefun (temp$percent, temp$size) x <- log (Fht (p) )
> > > psolution <- plnorm (0.1, mean (x), sd (x), FALSE) psolution
> > >
> > > The value of the solution is very close to one.
> > > Which is not a surprise.
> > >
> > > Here's a plot of everything:
> > >
> > > u <- seq (0.000001, 1.65,, 200)
> > > v <- plnorm (u, mean (x), sd (x), FALSE) plot (u, v, type="l", ylim =
> > > c (0, 1) ) points (temp$size, temp$percent, pch=16) points (0.1,
> > > psolution, pch=16, col="blue")
> >
> > Here's another approach, which uses minimization of the squared error to
> > get the parameters for a lognormal distribution.
> >
> > temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477, 0.5069, 0.3781,
> > 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95,
> > 0.99)), .Names = c("size", "percent"
> > ), row.names = c(NA, -9L), class = "data.frame")
> >
> > obj <- function(x) {sum( qlnorm(1-temp$percent, x[[1]], x[[2]])-temp$size
> > )^2}
> >
> > # Note the inversion of the poorly named and flipped "percent" column,
> >
> > optim( list(a=-0.65, b=0.42), obj)
> >
> > #--------------------
> >
> > $par
> >           a          b
> > -0.7020649  0.4678656
> >
> > $value
> > [1] 3.110316e-12
> >
> > $counts
> > function gradient
> >        51       NA
> >
> > $convergence
> > [1] 0
> >
> > $message
> > NULL
> >
> >
> > I'm not sure how principled this might be. There's no consideration in this
> > approach for expected sampling error at the right tail where the magnitudes
> > of the observed values will create much larger contributions to the sum of
> > squares.
> >
> > --
> >
> > David.
> >
> > >
> > >
> > > On Sat, Mar 6, 2021 at 8:09 PM Abby Spurdle <spurdle.a at gmail.com>
> > wrote:
> > >> I'm sorry.
> > >> I misread your example, this morning.
> > >> (I didn't read the code after the line that calls plot).
> > >>
> > >> After looking at this problem again, interpolation doesn't apply, and
> > >> extrapolation would be a last resort.
> > >> If you can assume your data comes from a particular type of
> > >> distribution, such as a lognormal distribution, then a better
> > >> approach would be to find the most likely parameters.
> > >>
> > >> i.e.
> > >> This falls within the broader scope of maximum likelihood.
> > >> (Except that you're dealing with a table of quantile-probability
> > >> pairs, rather than raw observational data).
> > >>
> > >> I suspect that there's a relatively easy way of finding the parameters.
> > >>
> > >> I'll think about it...
> > >> But someone else may come back with an answer first...
> > >>
> > >>
> > >> On Sat, Mar 6, 2021 at 8:17 AM Abby Spurdle <spurdle.a at gmail.com>
> > wrote:
> > >>> I note three problems with your data:
> > >>> (1) The name "percent" is misleading, perhaps you want "probability"?
> > >>> (2) There are straight (or near-straight) regions, each of which, is
> > >>> equally (or near-equally) spaced, which is not what I would expect
> > >>> in problems involving "quantiles".
> > >>> (3) Your plot (approximating the distribution function) is
> > >>> back-the-front (as per what is customary).
> > >>>
> > >>>
> > >>> On Fri, Mar 5, 2021 at 10:14 PM PIKAL Petr <petr.pikal at precheza.cz>
> > wrote:
> > >>>> Dear all
> > >>>>
> > >>>> I have table of quantiles, probably from lognormal distribution
> > >>>>
> > >>>>   dput(temp)
> > >>>> temp <- structure(list(size = c(1.6, 0.9466, 0.8062, 0.6477,
> > >>>> 0.5069, 0.3781, 0.3047, 0.2681, 0.1907), percent = c(0.01, 0.05,
> > >>>> 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99)), .Names = c("size", "percent"
> > >>>> ), row.names = c(NA, -9L), class = "data.frame")
> > >>>>
> > >>>> and I need to calculate quantile for size 0.1
> > >>>>
> > >>>> plot(temp$size, temp$percent, pch=19, xlim=c(0,2)) ss <-
> > >>>> approxfun(temp$size, temp$percent) points((0:100)/50,
> > >>>> ss((0:100)/50))
> > >>>> abline(v=.1)
> > >>>>
> > >>>> If I had original data it would be quite easy with ecdf/quantile function
> > but without it I am lost what function I could use for such task.
> > >>>>
> > >>>> Please, give me some hint where to look.
> > >>>>
> > >>>>
> > >>>> Best regards
> > >>>>
> > >>>> Petr
> > >>>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
> > >>>> obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
> > >>>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ |
> > >>>> Information about processing and protection of business partner's
> > >>>> personal data are available on website:
> > >>>> https://www.precheza.cz/en/personal-data-protection-principles/
> > >>>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> > >>>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> > >>>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and
> > >>>> any documents attached to it may be confidential and are subject to
> > >>>> the legally binding disclaimer:
> > >>>> https://www.precheza.cz/en/01-disclaimer/
> > >>>>
> > >>>>
> > >>>>          [[alternative HTML version deleted]]
> > >>>>
> > >>>> ______________________________________________
> > >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>>> PLEASE do read the posting guide
> > >>>> http://www.R-project.org/posting-guide.html
> > >>>> and provide commented, minimal, self-contained, reproducible code.
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From @ret|p@nopou|ou @end|ng |rom gm@||@com  Fri Mar 12 14:42:28 2021
From: @ret|p@nopou|ou @end|ng |rom gm@||@com (Areti Panopoulou)
Date: Fri, 12 Mar 2021 13:42:28 +0000
Subject: [R] [External] Re:  [External] Re: Help please
In-Reply-To: <YEqamzGPSD0xhevH@posteo.no>
References: <CAGFDBznpBL9QsPVrR=i1+rawAN10dsAC0KoYq+z_wfc22ubokg@mail.gmail.com>
 <CA+8X3fWOuq6+NJet7dLVX4gkbHAt_gjM_UbxU_52n_ngW2XS1g@mail.gmail.com>
 <CO1PR11MB5107360278AB43B3DF1B6DE0D2909@CO1PR11MB5107.namprd11.prod.outlook.com>
 <YEojGReE43FIEgS/@posteo.no>
 <CO1PR11MB51075B4DB7DB513BC9F77DD1D2909@CO1PR11MB5107.namprd11.prod.outlook.com>
 <YEqamzGPSD0xhevH@posteo.no>
Message-ID: <CAGFDBz=Vu_nJQx9Qaz-vwUma8+9AOuJuO+goNNje5sNt4EVoYA@mail.gmail.com>

Thank you so much everyone for your time and help! I really appreciate it.

Kind Regards,
Areti

On Thu, Mar 11, 2021 at 10:34 PM Rasmus Liland <jral at posteo.no> wrote:

> That is such a nice email crammed with
> useful info I'm sure Areti Panopoulou
> appreciates.  JR
>

	[[alternative HTML version deleted]]


From x|@oy@n@yu @end|ng |rom gm@||@com  Fri Mar 12 18:13:23 2021
From: x|@oy@n@yu @end|ng |rom gm@||@com (xiaoyan yu)
Date: Fri, 12 Mar 2021 12:13:23 -0500
Subject: [R] R extension memory leak detection question
Message-ID: <CANjVfJ1mAeXDLp43nYrtEoKFiqP-4xpc17nz4XYuNaY8qQw+_A@mail.gmail.com>

I am writing C++ program based on R extensions and also try to test the
program with google address sanitizer.

I thought if we don't protect the variable from the allocation API such as
Rf_allocVector, there will be a memory leak. However, the address sanitizer
didn't report it. Is my understanding correct? Or I will see the memory
leak only if I compile R source code with the address sanitizer.

 Please help!

Thanks,
Xiaoyan

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Mar 12 18:35:38 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 12 Mar 2021 09:35:38 -0800
Subject: [R] R extension memory leak detection question
In-Reply-To: <CANjVfJ1mAeXDLp43nYrtEoKFiqP-4xpc17nz4XYuNaY8qQw+_A@mail.gmail.com>
References: <CANjVfJ1mAeXDLp43nYrtEoKFiqP-4xpc17nz4XYuNaY8qQw+_A@mail.gmail.com>
Message-ID: <CAGxFJbTtjwoBG=rMf3e2g3+emNQcLwTauRQqgb8Rkqw3cvEVpw@mail.gmail.com>

This is the wrong list for such questions. Post to r-devel instead.

Cheers,

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Mar 12, 2021 at 9:13 AM xiaoyan yu <xiaoyan.yu at gmail.com> wrote:

> I am writing C++ program based on R extensions and also try to test the
> program with google address sanitizer.
>
> I thought if we don't protect the variable from the allocation API such as
> Rf_allocVector, there will be a memory leak. However, the address sanitizer
> didn't report it. Is my understanding correct? Or I will see the memory
> leak only if I compile R source code with the address sanitizer.
>
>  Please help!
>
> Thanks,
> Xiaoyan
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar 12 18:37:00 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 12 Mar 2021 12:37:00 -0500
Subject: [R] R extension memory leak detection question
In-Reply-To: <CANjVfJ1mAeXDLp43nYrtEoKFiqP-4xpc17nz4XYuNaY8qQw+_A@mail.gmail.com>
References: <CANjVfJ1mAeXDLp43nYrtEoKFiqP-4xpc17nz4XYuNaY8qQw+_A@mail.gmail.com>
Message-ID: <bd2d1667-75ca-f745-548d-ad15f96e41fb@gmail.com>

On 12/03/2021 12:13 p.m., xiaoyan yu wrote:
> I am writing C++ program based on R extensions and also try to test the
> program with google address sanitizer.
> 
> I thought if we don't protect the variable from the allocation API such as
> Rf_allocVector, there will be a memory leak. However, the address sanitizer
> didn't report it. Is my understanding correct? Or I will see the memory
> leak only if I compile R source code with the address sanitizer.
> 

Your question is unclear without an actual example.  It all depends on 
how the variable was created and how you use it.

If your real code is only a few lines, post it here.  Otherwise, please 
put together a minimal working example that contains the essence of what 
you are doing in a few lines.  Check that it compiles, and we can 
provide advice about whether it is doing dangerous things.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar 12 18:38:51 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 12 Mar 2021 12:38:51 -0500
Subject: [R] R extension memory leak detection question
In-Reply-To: <bd2d1667-75ca-f745-548d-ad15f96e41fb@gmail.com>
References: <CANjVfJ1mAeXDLp43nYrtEoKFiqP-4xpc17nz4XYuNaY8qQw+_A@mail.gmail.com>
 <bd2d1667-75ca-f745-548d-ad15f96e41fb@gmail.com>
Message-ID: <dbd92a6d-76eb-a276-20d1-043f9ac93905@gmail.com>

On 12/03/2021 12:37 p.m., Duncan Murdoch wrote:
> On 12/03/2021 12:13 p.m., xiaoyan yu wrote:
>> I am writing C++ program based on R extensions and also try to test the
>> program with google address sanitizer.
>>
>> I thought if we don't protect the variable from the allocation API such as
>> Rf_allocVector, there will be a memory leak. However, the address sanitizer
>> didn't report it. Is my understanding correct? Or I will see the memory
>> leak only if I compile R source code with the address sanitizer.
>>
> 
> Your question is unclear without an actual example.  It all depends on
> how the variable was created and how you use it.
> 
> If your real code is only a few lines, post it here. 

Sorry, to R-devel, not here.


  Otherwise, please
> put together a minimal working example that contains the essence of what
> you are doing in a few lines.  Check that it compiles, and we can
> provide advice about whether it is doing dangerous things.
> 
> Duncan Murdoch
>


From |by409014519 @end|ng |rom |c|oud@com  Fri Mar 12 05:32:17 2021
From: |by409014519 @end|ng |rom |c|oud@com (=?gb2312?B?sc+3vMTd?=)
Date: Fri, 12 Mar 2021 12:32:17 +0800
Subject: [R] Very slow optim(): solved
Message-ID: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>

Dear list, 
 I am using optim() to estimate over 60 thousans of parameters, and use the server to run the program.But it took me 5 hours and there was just no result coming out.How could I do to show some results that have been calculated by optim()?

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Mar 13 03:31:26 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 12 Mar 2021 18:31:26 -0800
Subject: [R] Very slow optim(): solved
In-Reply-To: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>
References: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>
Message-ID: <B94D51F0-2DFE-458F-A4AA-3E132006B098@dcn.davis.ca.us>

Calculate fewer of them?

If you don't setup your code to save intermediate results, then you cannot see intermediate results.

On March 11, 2021 8:32:17 PM PST, "??? via R-help" <r-help at r-project.org> wrote:
>Dear list, 
>I am using optim() to estimate over 60 thousans of parameters, and use
>the server to run the program.But it took me 5 hours and there was just
>no result coming out.How could I do to show some results that have been
>calculated by optim()?
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From pro|jcn@@h @end|ng |rom gm@||@com  Sat Mar 13 03:53:26 2021
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 12 Mar 2021 21:53:26 -0500
Subject: [R] Very slow optim()
In-Reply-To: <B94D51F0-2DFE-458F-A4AA-3E132006B098@dcn.davis.ca.us>
References: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>
 <B94D51F0-2DFE-458F-A4AA-3E132006B098@dcn.davis.ca.us>
Message-ID: <64210cd0-d1d4-586c-f57f-b5adf80b1f23@gmail.com>

optim() has no method really suitable for very large numbers of parameters.

- CG as set up has never worked very well in any of its implementations
  (I wrote it, so am allowed to say so!). Rcgmin in optimx package works
  better, as does Rtnmin. Neither are really intended for 60K parameters
  however.

- optim::L-BFGS-B is reasonable, but my experience is that it still is not
  intended for more than a couple of hundred parameters.

JN



On 2021-03-12 9:31 p.m., Jeff Newmiller wrote:
> Calculate fewer of them?
> 
> If you don't setup your code to save intermediate results, then you cannot see intermediate results.
> 
> On March 11, 2021 8:32:17 PM PST, "??? via R-help" <r-help at r-project.org> wrote:
>> Dear list, 
>> I am using optim() to estimate over 60 thousans of parameters, and use
>> the server to run the program.But it took me 5 hours and there was just
>> no result coming out.How could I do to show some results that have been
>> calculated by optim()?
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Mar 13 05:38:22 2021
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 12 Mar 2021 22:38:22 -0600
Subject: [R] Very slow optim()
In-Reply-To: <64210cd0-d1d4-586c-f57f-b5adf80b1f23@gmail.com>
References: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>
 <B94D51F0-2DFE-458F-A4AA-3E132006B098@dcn.davis.ca.us>
 <64210cd0-d1d4-586c-f57f-b5adf80b1f23@gmail.com>
Message-ID: <a0ac02d0-7f9c-75ba-fd9b-94f206a1ac41@effectivedefense.org>

TWO COMMENTS:


1.  DID YOU ASSIGN THE OUTPUT OF "optim" to an object, like "est <- 
optim(...)"?  If yes and if "optim" terminated normally, the 60,000+ 
paramters should be there as est$par.  See the documentation on "optim".


2.  WHAT PROBLEM ARE YOU TRYING TO SOLVE?


	  I hope you will forgive me for being blunt (or perhaps bigoted), but 
I'm skeptical about anyone wanting to use optim to estimate 60,000+ 
parameters.  With a situation like that, I think you would be wise to 
recast the problem as one in which those 60,000+ parameters are sampled 
from some hyperdistribution characterized by a small number of 
hyperparameters.  Then write a model where your observations are sampled 
from distribution(s) controlled by these random parameters.  Then 
multiply the likelihood of the observations by the likelihood of the 
hyperdistribution and integrate out the 60,000+ parameters, leaving only 
a small number hyperparameters.


	  When everything is linear and all the random variables / random 
effects and observation errors follow normal distributions, this is the 
classic linear, mixed-effects situation that is routinely handled well 
for most such situations by the nlme package, documented with in 
companion book Pinhiero and Bates (2000) Mixed-Effects Models in S and 
S-PLUS (Springer).  If the models are nonlinear but with curvature that 
is reasonably well behaved and the random variables / random effects and 
observation errors are still normal, the nlme package and Pinhiero and 
Bates still provide a great approach to most such situations, as far as 
I know.  When the observations are non-normally distributed, then the 
best software I know is the lme4 package.  I have not used it recently, 
but it was written and being maintained by some of the leading experts 
in this area as far as I know.


CONCLUSION:


	  If you are short on time and "1" will work for you, do that. 
Obviously, you will need to do some further analysis to understand the 
60,000+ parameters you estimated -- which implies by itself that you 
really should be using approach "2".  However, if I'm short on time and 
need an answer, then I'd ignore "2" and hope to get something by 
plotting and doing other things with the 60,000+ parameters that should 
be in "est$par" if "optim" actually ended normally.


	  However, if the problem is sufficiently important to justify more 
work, then I'd want to cast it as some kind if mixed-effects model, per 
"2" -- perhaps using an analysis of "1" as a first step towards "2".


	  Hope this helps.
	  Spencer


On 2021-03-12 20:53, J C Nash wrote:
> optim() has no method really suitable for very large numbers of parameters.
> 
> - CG as set up has never worked very well in any of its implementations
>    (I wrote it, so am allowed to say so!). Rcgmin in optimx package works
>    better, as does Rtnmin. Neither are really intended for 60K parameters
>    however.
> 
> - optim::L-BFGS-B is reasonable, but my experience is that it still is not
>    intended for more than a couple of hundred parameters.
> 
> JN
> 
> 
> 
> On 2021-03-12 9:31 p.m., Jeff Newmiller wrote:
>> Calculate fewer of them?
>>
>> If you don't setup your code to save intermediate results, then you cannot see intermediate results.
>>
>> On March 11, 2021 8:32:17 PM PST, "??? via R-help" <r-help at r-project.org> wrote:
>>> Dear list,
>>> I am using optim() to estimate over 60 thousans of parameters, and use
>>> the server to run the program.But it took me 5 hours and there was just
>>> no result coming out.How could I do to show some results that have been
>>> calculated by optim()?
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sat Mar 13 08:27:57 2021
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sat, 13 Mar 2021 12:57:57 +0530
Subject: [R] Very slow optim()
In-Reply-To: <a0ac02d0-7f9c-75ba-fd9b-94f206a1ac41@effectivedefense.org>
References: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>
 <B94D51F0-2DFE-458F-A4AA-3E132006B098@dcn.davis.ca.us>
 <64210cd0-d1d4-586c-f57f-b5adf80b1f23@gmail.com>
 <a0ac02d0-7f9c-75ba-fd9b-94f206a1ac41@effectivedefense.org>
Message-ID: <CADfFDC51pfwfkDQMEjmtKUitJV=0Y+q334RQEqSwGBp3B=yMgQ@mail.gmail.com>

On Sat, Mar 13, 2021 at 10:08 AM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> TWO COMMENTS:
>
>
> 1.  DID YOU ASSIGN THE OUTPUT OF "optim" to an object, like "est <-
> optim(...)"?  If yes and if "optim" terminated normally, the 60,000+
> paramters should be there as est$par.  See the documentation on "optim".
>
>
> 2.  WHAT PROBLEM ARE YOU TRYING TO SOLVE?
>
>
>           I hope you will forgive me for being blunt (or perhaps bigoted), but
> I'm skeptical about anyone wanting to use optim to estimate 60,000+
> parameters.  With a situation like that, I think you would be wise to
> recast the problem as one in which those 60,000+ parameters are sampled
> from some hyperdistribution characterized by a small number of
> hyperparameters.  Then write a model where your observations are sampled
> from distribution(s) controlled by these random parameters.  Then
> multiply the likelihood of the observations by the likelihood of the
> hyperdistribution and integrate out the 60,000+ parameters, leaving only
> a small number hyperparameters.

Just a comment on this comment: I think it's perfectly reasonable to
optimize 60k+ parameters with conjugate gradient. CG was originally
developed to solve linear equations of the form Ax=b. If x was not
large in size, one would just use solve(A, b) instead of an iterative
method.

Use of CG is quite common in image processing. A relatively small
300x300 image will give you 90k parameters.

-Deepayan


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Mar 13 12:03:48 2021
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sat, 13 Mar 2021 05:03:48 -0600
Subject: [R] Very slow optim()
In-Reply-To: <CADfFDC51pfwfkDQMEjmtKUitJV=0Y+q334RQEqSwGBp3B=yMgQ@mail.gmail.com>
References: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>
 <B94D51F0-2DFE-458F-A4AA-3E132006B098@dcn.davis.ca.us>
 <64210cd0-d1d4-586c-f57f-b5adf80b1f23@gmail.com>
 <a0ac02d0-7f9c-75ba-fd9b-94f206a1ac41@effectivedefense.org>
 <CADfFDC51pfwfkDQMEjmtKUitJV=0Y+q334RQEqSwGBp3B=yMgQ@mail.gmail.com>
Message-ID: <9d250158-5f94-71fb-8163-26252ceb1dba@effectivedefense.org>

Hi, Deepayan:


On 2021-03-13 01:27, Deepayan Sarkar wrote:
> On Sat, Mar 13, 2021 at 10:08 AM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>>
>> TWO COMMENTS:
>>
>>
>> 1.  DID YOU ASSIGN THE OUTPUT OF "optim" to an object, like "est <-
>> optim(...)"?  If yes and if "optim" terminated normally, the 60,000+
>> paramters should be there as est$par.  See the documentation on "optim".
>>
>>
>> 2.  WHAT PROBLEM ARE YOU TRYING TO SOLVE?
>>
>>
>>            I hope you will forgive me for being blunt (or perhaps bigoted), but
>> I'm skeptical about anyone wanting to use optim to estimate 60,000+
>> parameters.  With a situation like that, I think you would be wise to
>> recast the problem as one in which those 60,000+ parameters are sampled
>> from some hyperdistribution characterized by a small number of
>> hyperparameters.  Then write a model where your observations are sampled
>> from distribution(s) controlled by these random parameters.  Then
>> multiply the likelihood of the observations by the likelihood of the
>> hyperdistribution and integrate out the 60,000+ parameters, leaving only
>> a small number hyperparameters.
> 
> Just a comment on this comment: I think it's perfectly reasonable to
> optimize 60k+ parameters with conjugate gradient. CG was originally
> developed to solve linear equations of the form Ax=b. If x was not
> large in size, one would just use solve(A, b) instead of an iterative
> method.
> 
> Use of CG is quite common in image processing. A relatively small
> 300x300 image will give you 90k parameters.
> 
> -Deepayan
> 

	  Thanks for this.


	  If both A and b are 300x300, then x will also be 300x300.


	  What do you do in this case if A is not square or even ill conditioned?


	  Do you care if you get only one of many possible or approximate 
solutions, and the algorithm spends most of its time making adjustments 
in a singular subspace that would have best been avoided?


	  Spencer


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sat Mar 13 12:56:08 2021
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sat, 13 Mar 2021 17:26:08 +0530
Subject: [R] Very slow optim()
In-Reply-To: <9d250158-5f94-71fb-8163-26252ceb1dba@effectivedefense.org>
References: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>
 <B94D51F0-2DFE-458F-A4AA-3E132006B098@dcn.davis.ca.us>
 <64210cd0-d1d4-586c-f57f-b5adf80b1f23@gmail.com>
 <a0ac02d0-7f9c-75ba-fd9b-94f206a1ac41@effectivedefense.org>
 <CADfFDC51pfwfkDQMEjmtKUitJV=0Y+q334RQEqSwGBp3B=yMgQ@mail.gmail.com>
 <9d250158-5f94-71fb-8163-26252ceb1dba@effectivedefense.org>
Message-ID: <CADfFDC6o2V=aWk6aqhYWqAbihZ7K6tynMUWPOOsF-eDypNXLLg@mail.gmail.com>

On Sat, Mar 13, 2021 at 4:33 PM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hi, Deepayan:
>
>
> On 2021-03-13 01:27, Deepayan Sarkar wrote:
> > On Sat, Mar 13, 2021 at 10:08 AM Spencer Graves
> > <spencer.graves at effectivedefense.org> wrote:
> >>
> >> TWO COMMENTS:
> >>
> >>
> >> 1.  DID YOU ASSIGN THE OUTPUT OF "optim" to an object, like "est <-
> >> optim(...)"?  If yes and if "optim" terminated normally, the 60,000+
> >> paramters should be there as est$par.  See the documentation on "optim".
> >>
> >>
> >> 2.  WHAT PROBLEM ARE YOU TRYING TO SOLVE?
> >>
> >>
> >>            I hope you will forgive me for being blunt (or perhaps bigoted), but
> >> I'm skeptical about anyone wanting to use optim to estimate 60,000+
> >> parameters.  With a situation like that, I think you would be wise to
> >> recast the problem as one in which those 60,000+ parameters are sampled
> >> from some hyperdistribution characterized by a small number of
> >> hyperparameters.  Then write a model where your observations are sampled
> >> from distribution(s) controlled by these random parameters.  Then
> >> multiply the likelihood of the observations by the likelihood of the
> >> hyperdistribution and integrate out the 60,000+ parameters, leaving only
> >> a small number hyperparameters.
> >
> > Just a comment on this comment: I think it's perfectly reasonable to
> > optimize 60k+ parameters with conjugate gradient. CG was originally
> > developed to solve linear equations of the form Ax=b. If x was not
> > large in size, one would just use solve(A, b) instead of an iterative
> > method.
> >
> > Use of CG is quite common in image processing. A relatively small
> > 300x300 image will give you 90k parameters.
> >
> > -Deepayan
> >
>
>           Thanks for this.
>
>
>           If both A and b are 300x300, then x will also be 300x300.

Sorry for being unclear: the images themselves (b or x) are viewed as
a vector, so would be 90000x1. A would be 90000x90000, so essentially
impossible to construct. CG can solve Ax=b as long as Ax can be
evaluated (for arbitrary x).

>           What do you do in this case if A is not square or even ill conditioned?

A has to be p.d.

>           Do you care if you get only one of many possible or approximate
> solutions, and the algorithm spends most of its time making adjustments
> in a singular subspace that would have best been avoided?

Well, in my experience, optim(method="CG") behaves quite badly if A is
not full-rank. I don't think other implementations will be any better,
but I am not sure.

If you are interested in practical uses of this, we can discuss more off-list.

-Deepayan


>           Spencer
>
>
>


From pro|jcn@@h @end|ng |rom gm@||@com  Sat Mar 13 15:05:45 2021
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Sat, 13 Mar 2021 09:05:45 -0500
Subject: [R] Very slow optim()
In-Reply-To: <CADfFDC6o2V=aWk6aqhYWqAbihZ7K6tynMUWPOOsF-eDypNXLLg@mail.gmail.com>
References: <C194FBAA-9935-415A-9448-EBCE42CEFB0D@icloud.com>
 <B94D51F0-2DFE-458F-A4AA-3E132006B098@dcn.davis.ca.us>
 <64210cd0-d1d4-586c-f57f-b5adf80b1f23@gmail.com>
 <a0ac02d0-7f9c-75ba-fd9b-94f206a1ac41@effectivedefense.org>
 <CADfFDC51pfwfkDQMEjmtKUitJV=0Y+q334RQEqSwGBp3B=yMgQ@mail.gmail.com>
 <9d250158-5f94-71fb-8163-26252ceb1dba@effectivedefense.org>
 <CADfFDC6o2V=aWk6aqhYWqAbihZ7K6tynMUWPOOsF-eDypNXLLg@mail.gmail.com>
Message-ID: <8d8911e0-6f1f-2a98-c37a-f81a2b6345fe@gmail.com>

As per my post on this, it is important to distinguish between
"CG" as a general approach and optim::CG. The latter -- my algorithm 22
from Compact Numerical Methods for Computers in 1979 -- never worked
terribly well. But Rcgmin and Rtnmin from optimx often (but not always)
perform quite well.

There are some developments that I've poked at a few times. If the
optimization of very large numbers of parameters as a general (rather
than specific problem type), then this would be worth pursuing for R.
However, we need some representative, and easy to set up, test problems.
Otherwise we get this very hand-waving list discussion.

JN


On 2021-03-13 6:56 a.m., Deepayan Sarkar wrote:
> On Sat, Mar 13, 2021 at 4:33 PM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>>
>> Hi, Deepayan:
>>
>>
>> On 2021-03-13 01:27, Deepayan Sarkar wrote:
>>> On Sat, Mar 13, 2021 at 10:08 AM Spencer Graves
>>> <spencer.graves at effectivedefense.org> wrote:
>>>>
>>>> TWO COMMENTS:
>>>>
>>>>
>>>> 1.  DID YOU ASSIGN THE OUTPUT OF "optim" to an object, like "est <-
>>>> optim(...)"?  If yes and if "optim" terminated normally, the 60,000+
>>>> paramters should be there as est$par.  See the documentation on "optim".
>>>>
>>>>
>>>> 2.  WHAT PROBLEM ARE YOU TRYING TO SOLVE?
>>>>
>>>>
>>>>            I hope you will forgive me for being blunt (or perhaps bigoted), but
>>>> I'm skeptical about anyone wanting to use optim to estimate 60,000+
>>>> parameters.  With a situation like that, I think you would be wise to
>>>> recast the problem as one in which those 60,000+ parameters are sampled
>>>> from some hyperdistribution characterized by a small number of
>>>> hyperparameters.  Then write a model where your observations are sampled
>>>> from distribution(s) controlled by these random parameters.  Then
>>>> multiply the likelihood of the observations by the likelihood of the
>>>> hyperdistribution and integrate out the 60,000+ parameters, leaving only
>>>> a small number hyperparameters.
>>>
>>> Just a comment on this comment: I think it's perfectly reasonable to
>>> optimize 60k+ parameters with conjugate gradient. CG was originally
>>> developed to solve linear equations of the form Ax=b. If x was not
>>> large in size, one would just use solve(A, b) instead of an iterative
>>> method.
>>>
>>> Use of CG is quite common in image processing. A relatively small
>>> 300x300 image will give you 90k parameters.
>>>
>>> -Deepayan
>>>
>>
>>           Thanks for this.
>>
>>
>>           If both A and b are 300x300, then x will also be 300x300.
> 
> Sorry for being unclear: the images themselves (b or x) are viewed as
> a vector, so would be 90000x1. A would be 90000x90000, so essentially
> impossible to construct. CG can solve Ax=b as long as Ax can be
> evaluated (for arbitrary x).
> 
>>           What do you do in this case if A is not square or even ill conditioned?
> 
> A has to be p.d.
> 
>>           Do you care if you get only one of many possible or approximate
>> solutions, and the algorithm spends most of its time making adjustments
>> in a singular subspace that would have best been avoided?
> 
> Well, in my experience, optim(method="CG") behaves quite badly if A is
> not full-rank. I don't think other implementations will be any better,
> but I am not sure.
> 
> If you are interested in practical uses of this, we can discuss more off-list.
> 
> -Deepayan
> 
> 
>>           Spencer
>>
>>
>>


