From drj|m|emon @end|ng |rom gm@||@com  Wed Apr  1 00:45:27 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 1 Apr 2020 09:45:27 +1100
Subject: [R] How to match strings in two files and replace strings?
In-Reply-To: <20200331034255.GC498099@jrl.uk.to>
References: <CAF9-5jOTxXFB81PLfqS_w9=Jx5yy_bMHkrUQDFvhmKphAP303g@mail.gmail.com>
 <CA+8X3fWDycMX8yCMKeiFbKP+jG=EOK8SEUUekEVRsy=1RgjBAg@mail.gmail.com>
 <CAF9-5jPaBP94dRWmo2TrXW1x8Qg=iDtxttgDv4fP5wFWJBF7=Q@mail.gmail.com>
 <20200331034255.GC498099@jrl.uk.to>
Message-ID: <CA+8X3fXtOCu7eyf_uLtj+KHwsjDvnqLZY3Gw52FohVhNhnRuxQ@mail.gmail.com>

Nice improvement.

Jim

On Wed, Apr 1, 2020 at 3:18 AM Rasmus Liland
<jensrli at student.ikos.uio.no> wrote:
>
> On 2020-03-30 21:43 -0500, Ana Marija wrote:
> > I did run your workflow and this is what I got:
> >
> > > newout<-merge(output11.frq,marker_info[,c("V5","match_col")],by="match_col")
> > Error in `[.data.frame`(marker_info, , c("V5", "match_col")) :
> >   undefined columns selected
> >
> > this is how marker-info looks like:
>
> Hi Ana,
>
> perhaps adding comment.char="#" as an argument to read.csv might
> help?
>
> Making the output11.frq$match_col column might perhaps be easier
> using gsub, have a look:
>
> marker_info <- "#Column Description:
> #Column is separated by ','.
> #Chr:   Chromosome on NCBI reference genome.
> #Pos:   chromosome position when snp has unique hit on reference genome. Otherwise this field is NULL.
> #Submitter_snp_name:    The string identifier of snp on the platform.  This is the dbSNP local_snp_id.
> #Ss#:   dbSNP submitted snp Id. Each snp sequence on the platform gets a unique ss#.
> #Rs#:   refSNP cluster accession. Rs# for the dbSNP refSNP cluster that the sequence for this ss# maps to.
> #Genome_build_id:       Genome build used to map the SNP (a string)
> #ALLELE1_genome_orient: genome orientation allele1, same as which genotypes are reported.
> #ALLELE2_genome_orient: genome orientation allele2, same as which genotypes are reported.
> #ALLELE1_orig_assay_orient:     original reported orientation for the SNP assay, will correspond to CEL files and the ss_id.
> #ALLELE2_orig_assay_orient:     original reported orientation for the SNP assay, will correspond to CEL files and the ss_id.
> #QC_TYPE:       A-autosomal and P-pseudo-autosomal; X: X-linked; Y-Y-linked;NA-disable QC for this snp.
> #SNP_flank_sequence:    snp sequence on the reference genome orientation. 40bp on each side of variation.
> #SOURCE:         Platform specific string identifying assay (e.g. HBA_CHIP)
> #Ss2rs_orientation:     ss to rs orientation. +: same; -: opposite strand.
> #Rs2genome_orienation:  Orientation of rs flanking sequence to reference genome. +: same orientation, -: opposite.
> #Orien_flipped_assay_to_genome: y/n: this column would be the value of the exclusive OR from ss2rs_orientation  XOR rs2genome_orientation.
> #Probe_id:       NCBI probe_id.
> #neighbor_snp_list:     List of neighbor snp and position within 40kb up/downstream.
> #dbSNP_build_id:        dbSNP build id.
> #study_id:      unique id with prefix: phs.
> #
> # Chr,Pos,Submitter_snp_name,Ss#,Rs#,Genome_build_id,ALLELE1_genome_orient,ALLELE2_genome_orient,ALLELE1_orig_assay_orient,ALLELE2_orig_assay_orient,QC_TYPE,SNP_flank_sequence,SOURCE,Ss2rs_orientation,Rs2genome_orienation,Orien_flipped_assay_to_genome,Probe_id,neighbor_snp_list,dbSNP_build_id,study_id
> 1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
> 1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
> 1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
> "
> marker_info <-
>   read.csv(text=marker_info,
>     header=FALSE,
>     stringsAsFactors=FALSE,
>     comment.char="#")
>
> output11.frq <-
> "CHR  SNP A1 A2  MAF  NCHROBS
> 1      1:775852:T:C    T    C       0.1707     3444
> 1     1:1120590:A:C    C    A      0.08753     3496
> 1     1:1145994:T:C    C    T       0.1765     3496
> 1     1:1148494:A:G    A    G       0.1059     3464
> 1     1:1201155:C:T    T    C      0.07923     3496"
> output11.frq <-
>   read.table(text=output11.frq, header=TRUE,
>     stringsAsFactors=FALSE)
>
> output11.frq$match_col <-
>   gsub("^([0-9]+):([0-9]+).*", "\\1:\\2",
>        output11.frq$SNP)
>
> marker_info$match_col <-
>   apply(marker_info[,1:2], 1, paste,
>         collapse=":")
>
> merge(x=output11.frq,
>       y=marker_info[,c("V5", "match_col")],
>       by="match_col")
>
>
> Regards,
> Rasmus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Wed Apr  1 00:46:58 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 31 Mar 2020 22:46:58 +0000
Subject: [R] Problems using predict with GEE
Message-ID: <MN2PR03MB51675A0015FC4BF1436E61BFE2C80@MN2PR03MB5167.namprd03.prod.outlook.com>

I am running gee with a an offset followed by predict to get predicted values. The GEE analysis runs without error. When I run the predict function, I get the following error message:

Error in seq_len(p) : argument must be coercible to non-negative integer
In addition: Warning messages:
1: In predict.lm(object, newdata, se.fit, scale = 1, type = if (type ==  :
  calling predict.lm(<fake-lm-object>) ...
2: In seq_len(p) : first element used of 'length.out' argument

The error does not appear to be related to the offset values.

I hope someone can help me correct the error. Reproducible code follows:

Thank you,
John


install.packages("gee")
library(gee)

myData2 <- structure(list(HG = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 0, 0),
                          Group = structure(c(1L,
                                              1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
                                              1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
                                              1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
                                              2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
                                              2L, 2L, 2L, 2L, 2L, 2L, 2L),
                                            .Label = c("Group1", "Group2"), class = "factor")),
                     class = "data.frame", row.names = c(NA,-72L))
myData2
# Define offset
FU <- 1
# Run GEE wiht offset
fitGEE <- gee(HG+offset(log(FU))~Group,family=quasi,
              data=myData2,id=AllData$"Subject ID",corstr="exchangeable",subset=subset)
print(summary(fitGEE))

# Create a dataframe with data used in predict.
# FU =1
new.data <- data.frame(Group=c("Group1","Group2"),FU=1)
cat("These are the data used by predict\n")
print(new.data)
# This predict fails
LogPtEst <- predict(fitGEE,newdata=new.data)

# Create a dataframe with data used in predict.
# FU =0
new.data <- data.frame(Group=c("Group1","Group2"),FU=0)
cat("These are the data used by predict\n")
print(new.data)
# This predict also fails
LogPtEst <- predict(fitGEE,newdata=new.data)

Many thanks,
John


John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)


	[[alternative HTML version deleted]]


From g@@@uu| @end|ng |rom gm@||@com  Wed Apr  1 02:54:27 2020
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Wed, 1 Apr 2020 09:54:27 +0900
Subject: [R] Mapping of countries
In-Reply-To: <CAGsroM3Hxq9xx-YgLqpOsE9fY2dAvPfNQmOWwDKigCd3TZOdRQ@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>
 <CAGsroM1hppxCmg3xfmdsWGP=XvEHjyVAaHAboOwF=FcyhrZzeg@mail.gmail.com>
 <CAGsroM3Hxq9xx-YgLqpOsE9fY2dAvPfNQmOWwDKigCd3TZOdRQ@mail.gmail.com>
Message-ID: <CAHXS41xr+Zo-T3rrTYGpFAQxbu+mJo_yg6P8xEPMoyv44iU0QA@mail.gmail.com>

Maybe simply add:


points(station$Lon, station$Lat, col="red", pch=16, label="Your Country")
text(station$Lon, station$Lat,"Your Country",
     col="black", pos=3, cex=1)

station$Lon and Lat in your coordinate position.

Regards,
Ani


On Tue, Mar 31, 2020 at 10:58 PM george brida <george.brida at gmail.com> wrote:
>
> Dear Jim,
>
> Is it possible to add also a title to this map?
>
> Many thanks
>
>
>
> On Tue, Mar 31, 2020 at 2:29 PM george brida <george.brida at gmail.com> wrote:
>
> > Dear Jim,
> >
> > Thank you very much. I obtained now the required map. I would like to know
> > how to add the names of the countries.
> >
> > Best
> > George
> >
> > On Tue, Mar 31, 2020 at 10:10 AM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> >> Hi George,
> >> Try this:
> >>
> >> library(maps)
> >> map("world",xlim=c(34.353,60.369),ylim=c(16.7,32.193),
> >>  regions="Saudi Arabia",col="yellow",fill=TRUE)
> >> map("world",regions="Bahrain",col="yellow",fill=TRUE,add=TRUE)
> >> map("world",regions="Kuwait",col="lightblue",fill=TRUE,add=TRUE)
> >> map("world",regions="Qatar",col="yellow",fill=TRUE,add=TRUE)
> >> map("world",regions="United Arab
> >> Emirates",col="lightblue",fill=TRUE,add=TRUE)
> >> map("world",regions="Oman",col="lightgreen",fill=TRUE,add=TRUE)
> >>
> >> Jim
> >>
> >> On Tue, Mar 31, 2020 at 12:39 PM george brida <george.brida at gmail.com>
> >> wrote:
> >> >
> >> > Dear R users,
> >> >
> >> > i would like to plot the maps of the Gulf Cooperation Council (GCC)
> >> > countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> >> > constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
> >> > Kuweit and UAE with the same face color and iii/Oman  with another face
> >> > color. Is there any code in R doing this task.
> >> >
> >> > Many thanks.
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From nev||@@mo@ @end|ng |rom gm@||@com  Wed Apr  1 03:18:37 2020
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Wed, 1 Apr 2020 12:18:37 +1100
Subject: [R] repeat rows of matrix by number (k) in one colummatrix adding
 column j with values 1:k
Message-ID: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>

Hi

I can achieve this using two for loops but it is slow  I need to do this on
many matrices with tens of millions of rows of x,y,z and k

What is a faster method to achieve this, I cannot use rep as j changes in
each row of the new matrix
###############################################
M<-matrix(c(1,2,3,4,1,2,3,4,1,2,3,4, 2, 1, 3, 2
), 4,4, dimnames = list(NULL, c("x", "y", "z","k")))

Print(M)
#Create matrix (Mout) in this case 8 rows with x,y,z in each row of M
#repeated k times with column j numbered from 1:k
# ! can do with nested loops but this is very slow ( example below)
#How do I acheive this quickly without loops?
Mout<-NULL

for(i in 1:nrow(M)){
  a=M[i,c("x","y","z")]
  for (j in 1:M[i,"k"]){
    b=c(a,j)
    Mout<-rbind(Mout,b)
    }
}
colnames(Mout)[4]<-"j"
print(Mout)

#########################################################

Thanks

Nevil Amos

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Apr  1 03:33:10 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 31 Mar 2020 18:33:10 -0700
Subject: [R] 
 repeat rows of matrix by number (k) in one colummatrix adding
 column j with values 1:k
In-Reply-To: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
References: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
Message-ID: <36E14856-9EAC-4401-9C39-CD08059B8D7F@dcn.davis.ca.us>

False premise: rep works fine

Mout2 <- cbind(M[ rep(seq.int(nrow(M)),M[,"k"]), c("x","y","z")],unlist(lapply(M[,"k"],seq.int)))

On March 31, 2020 6:18:37 PM PDT, nevil amos <nevil.amos at gmail.com> wrote:
>Hi
>
>I can achieve this using two for loops but it is slow  I need to do
>this on
>many matrices with tens of millions of rows of x,y,z and k
>
>What is a faster method to achieve this, I cannot use rep as j changes
>in
>each row of the new matrix
>###############################################
>M<-matrix(c(1,2,3,4,1,2,3,4,1,2,3,4, 2, 1, 3, 2
>), 4,4, dimnames = list(NULL, c("x", "y", "z","k")))
>
>Print(M)
>#Create matrix (Mout) in this case 8 rows with x,y,z in each row of M
>#repeated k times with column j numbered from 1:k
># ! can do with nested loops but this is very slow ( example below)
>#How do I acheive this quickly without loops?
>Mout<-NULL
>
>for(i in 1:nrow(M)){
>  a=M[i,c("x","y","z")]
>  for (j in 1:M[i,"k"]){
>    b=c(a,j)
>    Mout<-rbind(Mout,b)
>    }
>}
>colnames(Mout)[4]<-"j"
>print(Mout)
>
>#########################################################
>
>Thanks
>
>Nevil Amos
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From nev||@@mo@ @end|ng |rom gm@||@com  Wed Apr  1 04:42:07 2020
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Wed, 1 Apr 2020 13:42:07 +1100
Subject: [R] 
 repeat rows of matrix by number (k) in one colummatrix adding
 column j with values 1:k
In-Reply-To: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
References: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
Message-ID: <CAN9eD7kfBmK1pF1fOh+TgpDf3M1BA5=JDTUJN4KsHCVo6o9bpw@mail.gmail.com>

Well,
I found a way to do it partly using rep(), and one loop that makes it 10x
or more faster however would still be good to do without the loop at all
matrix made slightly beigger (10000 rows):

M<-matrix(c(1:30000
), 10000,3)
M<-cbind(M,sample(1:5,size = 10000,replace = T))
#Print(M)
#Create matrix (Mout) in this case 8 rows with x,y,z in each row of M
#repeated k times with column j numbered from 1:k
# ! can do with nested loops but this is very slow ( example below)
#How do I acheive this quickly without loops?
print("double loop")
print(system.time({
Mout<-NULL

for(i in 1:nrow(M)){
  a=M[i,1:3]
  k=M[i,4]
  for (j in 1:k){
    b=c(a,j)
    Mout<-rbind(Mout,b)
    }
}
colnames(Mout)<-c("x","y","z","j")
}))

print("rep and single loop")
print(system.time({
  j<-NULL
  MOut<-NULL
  MOut<-M[,1:3][rep(1:nrow(M), times = M[,4]), ]
  for(i in M[,4])(j<-c(j,1:i))
  MOut<-cbind(MOut,j)
  colnames(Mout)<-c("x","y","z","j")
}))

On Wed, 1 Apr 2020 at 12:18, nevil amos <nevil.amos at gmail.com> wrote:

> Hi
>
> I can achieve this using two for loops but it is slow  I need to do this
> on many matrices with tens of millions of rows of x,y,z and k
>
> What is a faster method to achieve this, I cannot use rep as j changes in
> each row of the new matrix
> ###############################################
> M<-matrix(c(1,2,3,4,1,2,3,4,1,2,3,4, 2, 1, 3, 2
> ), 4,4, dimnames = list(NULL, c("x", "y", "z","k")))
>
> Print(M)
> #Create matrix (Mout) in this case 8 rows with x,y,z in each row of M
> #repeated k times with column j numbered from 1:k
> # ! can do with nested loops but this is very slow ( example below)
> #How do I acheive this quickly without loops?
> Mout<-NULL
>
> for(i in 1:nrow(M)){
>   a=M[i,c("x","y","z")]
>   for (j in 1:M[i,"k"]){
>     b=c(a,j)
>     Mout<-rbind(Mout,b)
>     }
> }
> colnames(Mout)[4]<-"j"
> print(Mout)
>
> #########################################################
>
> Thanks
>
> Nevil Amos
>

	[[alternative HTML version deleted]]


From nev||@@mo@ @end|ng |rom gm@||@com  Wed Apr  1 05:00:55 2020
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Wed, 1 Apr 2020 14:00:55 +1100
Subject: [R] 
 repeat rows of matrix by number (k) in one colummatrix adding
 column j with values 1:k
In-Reply-To: <CAN9eD7kfBmK1pF1fOh+TgpDf3M1BA5=JDTUJN4KsHCVo6o9bpw@mail.gmail.com>
References: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
 <CAN9eD7kfBmK1pF1fOh+TgpDf3M1BA5=JDTUJN4KsHCVo6o9bpw@mail.gmail.com>
Message-ID: <CAN9eD7mgpXZgZSM47SHYfD9CLu-nc8xaZrcT6sjffjve-oxeeA@mail.gmail.com>

OK sorted - hope these postings might help someone else

Any even faster options would be appreciated still

#seq() does not work but  sequence() does
print("rep and sequence")
print(system.time({
  j<-NULL
  MOut<-NULL
  MOut<-M[rep(1:nrow(M), times = M[,4]), ]
  j<-sequence(M[,4])
  MOut<-cbind(MOut,j)
  colnames(Mout)<-c("x","y","z","j")
}))

On Wed, 1 Apr 2020 at 13:42, nevil amos <nevil.amos at gmail.com> wrote:

> Well,
> I found a way to do it partly using rep(), and one loop that makes it 10x
> or more faster however would still be good to do without the loop at all
> matrix made slightly beigger (10000 rows):
>
> M<-matrix(c(1:30000
> ), 10000,3)
> M<-cbind(M,sample(1:5,size = 10000,replace = T))
> #Print(M)
> #Create matrix (Mout) in this case 8 rows with x,y,z in each row of M
> #repeated k times with column j numbered from 1:k
> # ! can do with nested loops but this is very slow ( example below)
> #How do I acheive this quickly without loops?
> print("double loop")
> print(system.time({
> Mout<-NULL
>
> for(i in 1:nrow(M)){
>   a=M[i,1:3]
>   k=M[i,4]
>   for (j in 1:k){
>     b=c(a,j)
>     Mout<-rbind(Mout,b)
>     }
> }
> colnames(Mout)<-c("x","y","z","j")
> }))
>
> print("rep and single loop")
> print(system.time({
>   j<-NULL
>   MOut<-NULL
>   MOut<-M[,1:3][rep(1:nrow(M), times = M[,4]), ]
>   for(i in M[,4])(j<-c(j,1:i))
>   MOut<-cbind(MOut,j)
>   colnames(Mout)<-c("x","y","z","j")
> }))
>
> On Wed, 1 Apr 2020 at 12:18, nevil amos <nevil.amos at gmail.com> wrote:
>
>> Hi
>>
>> I can achieve this using two for loops but it is slow  I need to do this
>> on many matrices with tens of millions of rows of x,y,z and k
>>
>> What is a faster method to achieve this, I cannot use rep as j changes in
>> each row of the new matrix
>> ###############################################
>> M<-matrix(c(1,2,3,4,1,2,3,4,1,2,3,4, 2, 1, 3, 2
>> ), 4,4, dimnames = list(NULL, c("x", "y", "z","k")))
>>
>> Print(M)
>> #Create matrix (Mout) in this case 8 rows with x,y,z in each row of M
>> #repeated k times with column j numbered from 1:k
>> # ! can do with nested loops but this is very slow ( example below)
>> #How do I acheive this quickly without loops?
>> Mout<-NULL
>>
>> for(i in 1:nrow(M)){
>>   a=M[i,c("x","y","z")]
>>   for (j in 1:M[i,"k"]){
>>     b=c(a,j)
>>     Mout<-rbind(Mout,b)
>>     }
>> }
>> colnames(Mout)[4]<-"j"
>> print(Mout)
>>
>> #########################################################
>>
>> Thanks
>>
>> Nevil Amos
>>
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Wed Apr  1 06:33:39 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 1 Apr 2020 15:33:39 +1100
Subject: [R] 
 repeat rows of matrix by number (k) in one colummatrix adding
 column j with values 1:k
In-Reply-To: <CAN9eD7kfBmK1pF1fOh+TgpDf3M1BA5=JDTUJN4KsHCVo6o9bpw@mail.gmail.com>
References: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
 <CAN9eD7kfBmK1pF1fOh+TgpDf3M1BA5=JDTUJN4KsHCVo6o9bpw@mail.gmail.com>
Message-ID: <CA+8X3fV2NVMPdkdu_HhgVqwqjPPt-j2Qn0UqzbQ4z-Kz61ROSA@mail.gmail.com>

Hi Nevil,
It's a nasty piece of work, but:

M<-matrix(c(1,2,3,4,1,2,3,4,1,2,3,4,2,1,3,2),4,4,
dimnames = list(NULL, c("x", "y", "z","k")))
M
reprow<-function(x)
 return(matrix(rep(x,x[length(x)]),nrow=x[length(x)],byrow=TRUE))
toseq<-function(x) return(1:x)
j<-unlist(sapply(M[,"k"],toseq))
Mlist<-apply(M,1,reprow)
Mlist
newM<-Mlist[[1]]
for(i in 2:length(Mlist)) newM<-rbind(newM,Mlist[[i]])
newM
newM<-cbind(newM,j)
colnames(newM)<-c(colnames(M),"j")
newM

Jim

On Wed, Apr 1, 2020 at 1:43 PM nevil amos <nevil.amos at gmail.com> wrote:
>
> Well,
> I found a way to do it partly using rep(), and one loop that makes it 10x
> or more faster however would still be good to do without the loop at all
> matrix made slightly beigger (10000 rows):
>
> M<-matrix(c(1:30000
> ), 10000,3)
> M<-cbind(M,sample(1:5,size = 10000,replace = T))
> #Print(M)
> #Create matrix (Mout) in this case 8 rows with x,y,z in each row of M
> #repeated k times with column j numbered from 1:k
> # ! can do with nested loops but this is very slow ( example below)
> #How do I acheive this quickly without loops?
> print("double loop")
> print(system.time({
> Mout<-NULL
>
> for(i in 1:nrow(M)){
>   a=M[i,1:3]
>   k=M[i,4]
>   for (j in 1:k){
>     b=c(a,j)
>     Mout<-rbind(Mout,b)
>     }
> }
> colnames(Mout)<-c("x","y","z","j")
> }))
>
> print("rep and single loop")
> print(system.time({
>   j<-NULL
>   MOut<-NULL
>   MOut<-M[,1:3][rep(1:nrow(M), times = M[,4]), ]
>   for(i in M[,4])(j<-c(j,1:i))
>   MOut<-cbind(MOut,j)
>   colnames(Mout)<-c("x","y","z","j")
> }))
>
> On Wed, 1 Apr 2020 at 12:18, nevil amos <nevil.amos at gmail.com> wrote:
>
> > Hi
> >
> > I can achieve this using two for loops but it is slow  I need to do this
> > on many matrices with tens of millions of rows of x,y,z and k
> >
> > What is a faster method to achieve this, I cannot use rep as j changes in
> > each row of the new matrix
> > ###############################################
> > M<-matrix(c(1,2,3,4,1,2,3,4,1,2,3,4, 2, 1, 3, 2
> > ), 4,4, dimnames = list(NULL, c("x", "y", "z","k")))
> >
> > Print(M)
> > #Create matrix (Mout) in this case 8 rows with x,y,z in each row of M
> > #repeated k times with column j numbered from 1:k
> > # ! can do with nested loops but this is very slow ( example below)
> > #How do I acheive this quickly without loops?
> > Mout<-NULL
> >
> > for(i in 1:nrow(M)){
> >   a=M[i,c("x","y","z")]
> >   for (j in 1:M[i,"k"]){
> >     b=c(a,j)
> >     Mout<-rbind(Mout,b)
> >     }
> > }
> > colnames(Mout)[4]<-"j"
> > print(Mout)
> >
> > #########################################################
> >
> > Thanks
> >
> > Nevil Amos
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From george@br|d@ @end|ng |rom gm@||@com  Wed Apr  1 20:57:28 2020
From: george@br|d@ @end|ng |rom gm@||@com (george brida)
Date: Wed, 1 Apr 2020 20:57:28 +0200
Subject: [R] Mapping of countries
In-Reply-To: <CAHXS41xr+Zo-T3rrTYGpFAQxbu+mJo_yg6P8xEPMoyv44iU0QA@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>
 <CAGsroM1hppxCmg3xfmdsWGP=XvEHjyVAaHAboOwF=FcyhrZzeg@mail.gmail.com>
 <CAGsroM3Hxq9xx-YgLqpOsE9fY2dAvPfNQmOWwDKigCd3TZOdRQ@mail.gmail.com>
 <CAHXS41xr+Zo-T3rrTYGpFAQxbu+mJo_yg6P8xEPMoyv44iU0QA@mail.gmail.com>
Message-ID: <CAGsroM2f7eu7T1r_d1p73770MDXsg4KcsgMaoE1yr2fh7Vkh2w@mail.gmail.com>

Thanks a lot Jim..

Thank you Ani and Rasmus.

Best

On Wed, Apr 1, 2020 at 2:54 AM ani jaya <gaaauul at gmail.com> wrote:

> Maybe simply add:
>
>
> points(station$Lon, station$Lat, col="red", pch=16, label="Your Country")
> text(station$Lon, station$Lat,"Your Country",
>      col="black", pos=3, cex=1)
>
> station$Lon and Lat in your coordinate position.
>
> Regards,
> Ani
>
>
> On Tue, Mar 31, 2020 at 10:58 PM george brida <george.brida at gmail.com>
> wrote:
> >
> > Dear Jim,
> >
> > Is it possible to add also a title to this map?
> >
> > Many thanks
> >
> >
> >
> > On Tue, Mar 31, 2020 at 2:29 PM george brida <george.brida at gmail.com>
> wrote:
> >
> > > Dear Jim,
> > >
> > > Thank you very much. I obtained now the required map. I would like to
> know
> > > how to add the names of the countries.
> > >
> > > Best
> > > George
> > >
> > > On Tue, Mar 31, 2020 at 10:10 AM Jim Lemon <drjimlemon at gmail.com>
> wrote:
> > >
> > >> Hi George,
> > >> Try this:
> > >>
> > >> library(maps)
> > >> map("world",xlim=c(34.353,60.369),ylim=c(16.7,32.193),
> > >>  regions="Saudi Arabia",col="yellow",fill=TRUE)
> > >> map("world",regions="Bahrain",col="yellow",fill=TRUE,add=TRUE)
> > >> map("world",regions="Kuwait",col="lightblue",fill=TRUE,add=TRUE)
> > >> map("world",regions="Qatar",col="yellow",fill=TRUE,add=TRUE)
> > >> map("world",regions="United Arab
> > >> Emirates",col="lightblue",fill=TRUE,add=TRUE)
> > >> map("world",regions="Oman",col="lightgreen",fill=TRUE,add=TRUE)
> > >>
> > >> Jim
> > >>
> > >> On Tue, Mar 31, 2020 at 12:39 PM george brida <george.brida at gmail.com
> >
> > >> wrote:
> > >> >
> > >> > Dear R users,
> > >> >
> > >> > i would like to plot the maps of the Gulf Cooperation Council (GCC)
> > >> > countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> > >> > constraints: i/ KSA , Qatar and Bahrain have the same face color ,
> ii/
> > >> > Kuweit and UAE with the same face color and iii/Oman  with another
> face
> > >> > color. Is there any code in R doing this task.
> > >> >
> > >> > Many thanks.
> > >> >
> > >> >         [[alternative HTML version deleted]]
> > >> >
> > >> > ______________________________________________
> > >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> > https://stat.ethz.ch/mailman/listinfo/r-help
> > >> > PLEASE do read the posting guide
> > >> http://www.R-project.org/posting-guide.html
> > >> > and provide commented, minimal, self-contained, reproducible code.
> > >>
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From c@|@ndr@ @end|ng |rom rgzm@de  Thu Apr  2 10:30:29 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 2 Apr 2020 10:30:29 +0200
Subject: [R] project path in Rmd
Message-ID: <239110ee-781d-be75-9d97-306296816233@rgzm.de>

Dear useRs,

I believe this is R code so appropriate for this list, but let me know
if this relates more to RStudio itself.

I am working on an RStudio project. In that project directory, I have a
folder called 'analysis' and in there a folder called 'scripts'
('~/analysis/scripts').
My data files needed for the scripts are in '~/analysis/raw_data' and
the output should be in '~/analysis/derived_data'.

My scripts are Rmd files, so when I knit them, their working directory
is where they are located, i.e. '~/analysis/scripts'. The problem I then
have is to specify the path for 'raw_data' and 'derived_data' since
during the rendering I am not relative to the project directory anymore.
And these folders are not subfolders of the working directory?
'~/analysis/scripts'.
I hope I am clear here...

I would like to avoid absolute paths of course, but I do not know how to
proceed.
What would be nice is a way to get the project directory in the scripts,
rather than their working directory.
Does that make sense?

Thank you in advance
Best,
Ivan

-- 
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Apr  2 10:37:59 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 02 Apr 2020 01:37:59 -0700
Subject: [R] project path in Rmd
In-Reply-To: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
Message-ID: <CA2DCCC8-A281-4A94-BF67-634A4EA88A11@dcn.davis.ca.us>

I recommend not using setwd. Then you can always assume your current working directory is your project directory and reference relative to that.

On April 2, 2020 1:30:29 AM PDT, Ivan Calandra <calandra at rgzm.de> wrote:
>Dear useRs,
>
>I believe this is R code so appropriate for this list, but let me know
>if this relates more to RStudio itself.
>
>I am working on an RStudio project. In that project directory, I have a
>folder called 'analysis' and in there a folder called 'scripts'
>('~/analysis/scripts').
>My data files needed for the scripts are in '~/analysis/raw_data' and
>the output should be in '~/analysis/derived_data'.
>
>My scripts are Rmd files, so when I knit them, their working directory
>is where they are located, i.e. '~/analysis/scripts'. The problem I
>then
>have is to specify the path for 'raw_data' and 'derived_data' since
>during the rendering I am not relative to the project directory
>anymore.
>And these folders are not subfolders of the working directory?
>'~/analysis/scripts'.
>I hope I am clear here...
>
>I would like to avoid absolute paths of course, but I do not know how
>to
>proceed.
>What would be nice is a way to get the project directory in the
>scripts,
>rather than their working directory.
>Does that make sense?
>
>Thank you in advance
>Best,
>Ivan

-- 
Sent from my phone. Please excuse my brevity.


From c@|@ndr@ @end|ng |rom rgzm@de  Thu Apr  2 10:40:07 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 2 Apr 2020 10:40:07 +0200
Subject: [R] project path in Rmd
In-Reply-To: <CA2DCCC8-A281-4A94-BF67-634A4EA88A11@dcn.davis.ca.us>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <CA2DCCC8-A281-4A94-BF67-634A4EA88A11@dcn.davis.ca.us>
Message-ID: <0319b44a-a2ae-70aa-4cd8-f457b10e02df@rgzm.de>

Hi Jeff,

But if I do not use setwd(), the current working directory is NOT the
project directory.

That's what my problem is about... I guess I was not clear in my email...

Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 02/04/2020 10:37, Jeff Newmiller wrote:
> I recommend not using setwd. Then you can always assume your current working directory is your project directory and reference relative to that.
>
> On April 2, 2020 1:30:29 AM PDT, Ivan Calandra <calandra at rgzm.de> wrote:
>> Dear useRs,
>>
>> I believe this is R code so appropriate for this list, but let me know
>> if this relates more to RStudio itself.
>>
>> I am working on an RStudio project. In that project directory, I have a
>> folder called 'analysis' and in there a folder called 'scripts'
>> ('~/analysis/scripts').
>> My data files needed for the scripts are in '~/analysis/raw_data' and
>> the output should be in '~/analysis/derived_data'.
>>
>> My scripts are Rmd files, so when I knit them, their working directory
>> is where they are located, i.e. '~/analysis/scripts'. The problem I
>> then
>> have is to specify the path for 'raw_data' and 'derived_data' since
>> during the rendering I am not relative to the project directory
>> anymore.
>> And these folders are not subfolders of the working directory?
>> '~/analysis/scripts'.
>> I hope I am clear here...
>>
>> I would like to avoid absolute paths of course, but I do not know how
>> to
>> proceed.
>> What would be nice is a way to get the project directory in the
>> scripts,
>> rather than their working directory.
>> Does that make sense?
>>
>> Thank you in advance
>> Best,
>> Ivan


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Apr  2 10:56:14 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 02 Apr 2020 01:56:14 -0700
Subject: [R] project path in Rmd
In-Reply-To: <0319b44a-a2ae-70aa-4cd8-f457b10e02df@rgzm.de>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <CA2DCCC8-A281-4A94-BF67-634A4EA88A11@dcn.davis.ca.us>
 <0319b44a-a2ae-70aa-4cd8-f457b10e02df@rgzm.de>
Message-ID: <94BDC03F-4996-447E-91FD-D165A324A8A9@dcn.davis.ca.us>

Make it so. Outside R.

At the command line, use cd before you start R. This should feel natural.

In a GUI file browser, double clicking on a file type assigned to a program by default sets the containing directory to be current directory before kicking off the program, so double-clicking on an empty Project.RData file will do it. Or you can use RStudio Project.Rproj files the same way.

On April 2, 2020 1:40:07 AM PDT, Ivan Calandra <calandra at rgzm.de> wrote:
>Hi Jeff,
>
>But if I do not use setwd(), the current working directory is NOT the
>project directory.
>
>That's what my problem is about... I guess I was not clear in my
>email...
>
>Ivan
>
>--
>Dr. Ivan Calandra
>TraCEr, laboratory for Traceology and Controlled Experiments
>MONREPOS Archaeological Research Centre and
>Museum for Human Behavioural Evolution
>Schloss Monrepos
>56567 Neuwied, Germany
>+49 (0) 2631 9772-243
>https://www.researchgate.net/profile/Ivan_Calandra
>
>On 02/04/2020 10:37, Jeff Newmiller wrote:
>> I recommend not using setwd. Then you can always assume your current
>working directory is your project directory and reference relative to
>that.
>>
>> On April 2, 2020 1:30:29 AM PDT, Ivan Calandra <calandra at rgzm.de>
>wrote:
>>> Dear useRs,
>>>
>>> I believe this is R code so appropriate for this list, but let me
>know
>>> if this relates more to RStudio itself.
>>>
>>> I am working on an RStudio project. In that project directory, I
>have a
>>> folder called 'analysis' and in there a folder called 'scripts'
>>> ('~/analysis/scripts').
>>> My data files needed for the scripts are in '~/analysis/raw_data'
>and
>>> the output should be in '~/analysis/derived_data'.
>>>
>>> My scripts are Rmd files, so when I knit them, their working
>directory
>>> is where they are located, i.e. '~/analysis/scripts'. The problem I
>>> then
>>> have is to specify the path for 'raw_data' and 'derived_data' since
>>> during the rendering I am not relative to the project directory
>>> anymore.
>>> And these folders are not subfolders of the working directory?
>>> '~/analysis/scripts'.
>>> I hope I am clear here...
>>>
>>> I would like to avoid absolute paths of course, but I do not know
>how
>>> to
>>> proceed.
>>> What would be nice is a way to get the project directory in the
>>> scripts,
>>> rather than their working directory.
>>> Does that make sense?
>>>
>>> Thank you in advance
>>> Best,
>>> Ivan
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From c@|@ndr@ @end|ng |rom rgzm@de  Thu Apr  2 10:59:03 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 2 Apr 2020 10:59:03 +0200
Subject: [R] project path in Rmd
In-Reply-To: <94BDC03F-4996-447E-91FD-D165A324A8A9@dcn.davis.ca.us>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <CA2DCCC8-A281-4A94-BF67-634A4EA88A11@dcn.davis.ca.us>
 <0319b44a-a2ae-70aa-4cd8-f457b10e02df@rgzm.de>
 <94BDC03F-4996-447E-91FD-D165A324A8A9@dcn.davis.ca.us>
Message-ID: <5dc0f14a-017b-7870-477b-457a013cbd1e@rgzm.de>

So what you're saying is that I should have scripts in the project
directory and not in a subfolder within it, right?

But what if I need (or at least want) to?

Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 02/04/2020 10:56, Jeff Newmiller wrote:
> Make it so. Outside R.
>
> At the command line, use cd before you start R. This should feel natural.
>
> In a GUI file browser, double clicking on a file type assigned to a program by default sets the containing directory to be current directory before kicking off the program, so double-clicking on an empty Project.RData file will do it. Or you can use RStudio Project.Rproj files the same way.
>
> On April 2, 2020 1:40:07 AM PDT, Ivan Calandra <calandra at rgzm.de> wrote:
>> Hi Jeff,
>>
>> But if I do not use setwd(), the current working directory is NOT the
>> project directory.
>>
>> That's what my problem is about... I guess I was not clear in my
>> email...
>>
>> Ivan
>>
>> --
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments
>> MONREPOS Archaeological Research Centre and
>> Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>>
>> On 02/04/2020 10:37, Jeff Newmiller wrote:
>>> I recommend not using setwd. Then you can always assume your current
>> working directory is your project directory and reference relative to
>> that.
>>> On April 2, 2020 1:30:29 AM PDT, Ivan Calandra <calandra at rgzm.de>
>> wrote:
>>>> Dear useRs,
>>>>
>>>> I believe this is R code so appropriate for this list, but let me
>> know
>>>> if this relates more to RStudio itself.
>>>>
>>>> I am working on an RStudio project. In that project directory, I
>> have a
>>>> folder called 'analysis' and in there a folder called 'scripts'
>>>> ('~/analysis/scripts').
>>>> My data files needed for the scripts are in '~/analysis/raw_data'
>> and
>>>> the output should be in '~/analysis/derived_data'.
>>>>
>>>> My scripts are Rmd files, so when I knit them, their working
>> directory
>>>> is where they are located, i.e. '~/analysis/scripts'. The problem I
>>>> then
>>>> have is to specify the path for 'raw_data' and 'derived_data' since
>>>> during the rendering I am not relative to the project directory
>>>> anymore.
>>>> And these folders are not subfolders of the working directory?
>>>> '~/analysis/scripts'.
>>>> I hope I am clear here...
>>>>
>>>> I would like to avoid absolute paths of course, but I do not know
>> how
>>>> to
>>>> proceed.
>>>> What would be nice is a way to get the project directory in the
>>>> scripts,
>>>> rather than their working directory.
>>>> Does that make sense?
>>>>
>>>> Thank you in advance
>>>> Best,
>>>> Ivan
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Apr  2 10:54:55 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 2 Apr 2020 11:54:55 +0300
Subject: [R] project path in Rmd
In-Reply-To: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
Message-ID: <20200402115455.2ff55c1f@Tarkus>

On Thu, 2 Apr 2020 10:30:29 +0200
Ivan Calandra <calandra at rgzm.de> wrote:

> The problem I then have is to specify the path for 'raw_data' and
> 'derived_data' <...> And these folders are not subfolders of
> the working directory '~/analysis/scripts'.
 
> I would like to avoid absolute paths of course

Is there a reason to avoid relative paths built using '..' to access
parent directories?

-- 
Best regards,
Ivan


From c@|@ndr@ @end|ng |rom rgzm@de  Thu Apr  2 11:02:56 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 2 Apr 2020 11:02:56 +0200
Subject: [R] project path in Rmd
In-Reply-To: <20200402115455.2ff55c1f@Tarkus>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <20200402115455.2ff55c1f@Tarkus>
Message-ID: <3b3b4384-cea9-5a72-542d-88c5db564b82@rgzm.de>

I do not know this ".." command (could you please show me how to use it
in a relative path?), but it sounds like a good start.

But it implies that I know in advance how many folders up the parent
directory is. I guess in most cases it will always be the same, but it
would be even better if it could be applied generically.

As I said, ideally, I would like to get the project directory from a
script located in a subfolder.

Thanks!
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 02/04/2020 10:54, Ivan Krylov wrote:
> On Thu, 2 Apr 2020 10:30:29 +0200
> Ivan Calandra <calandra at rgzm.de> wrote:
>
>> The problem I then have is to specify the path for 'raw_data' and
>> 'derived_data' <...> And these folders are not subfolders of
>> the working directory '~/analysis/scripts'.
>  
>> I would like to avoid absolute paths of course
> Is there a reason to avoid relative paths built using '..' to access
> parent directories?
>


From c@|@ndr@ @end|ng |rom rgzm@de  Thu Apr  2 11:08:58 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 2 Apr 2020 11:08:58 +0200
Subject: [R] project path in Rmd
In-Reply-To: <3b3b4384-cea9-5a72-542d-88c5db564b82@rgzm.de>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <20200402115455.2ff55c1f@Tarkus>
 <3b3b4384-cea9-5a72-542d-88c5db564b82@rgzm.de>
Message-ID: <7a52ee1a-54b9-f9ed-d785-2b9c3e917af6@rgzm.de>

What about searching for the .Rproj file and using its path as the new
working directory using setwd()?
But I know that it is indeed not recommended in knitted files (FAQ #5
<https://yihui.org/knitr/faq/>).

And I do not know how to search up the folder structure anyway...

Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 02/04/2020 11:02, Ivan Calandra wrote:
> I do not know this ".." command (could you please show me how to use it
> in a relative path?), but it sounds like a good start.
>
> But it implies that I know in advance how many folders up the parent
> directory is. I guess in most cases it will always be the same, but it
> would be even better if it could be applied generically.
>
> As I said, ideally, I would like to get the project directory from a
> script located in a subfolder.
>
> Thanks!
> Ivan
>
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
>
> On 02/04/2020 10:54, Ivan Krylov wrote:
>> On Thu, 2 Apr 2020 10:30:29 +0200
>> Ivan Calandra <calandra at rgzm.de> wrote:
>>
>>> The problem I then have is to specify the path for 'raw_data' and
>>> 'derived_data' <...> And these folders are not subfolders of
>>> the working directory '~/analysis/scripts'.
>>  
>>> I would like to avoid absolute paths of course
>> Is there a reason to avoid relative paths built using '..' to access
>> parent directories?
>>


From nev||@@mo@ @end|ng |rom gm@||@com  Thu Apr  2 11:16:53 2020
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Thu, 2 Apr 2020 20:16:53 +1100
Subject: [R] disk.frame change default directory that disk.frames are saved
 in?
Message-ID: <CAN9eD7niuyC9tYNWD1pmiPK7x+kEhkALS+oqq2OTu-TQobAFtA@mail.gmail.com>

I would like to change the default  directory within which all disk frames
are saved  to a directory on an SSD, which is not the drive there the r
tempdir is located. for example instead of saving all disk.frames in
tempdir the are all saved in ./media/SSDdrive/DF?


Thanks

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  2 11:21:47 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 2 Apr 2020 10:21:47 +0100
Subject: [R] project path in Rmd
In-Reply-To: <3b3b4384-cea9-5a72-542d-88c5db564b82@rgzm.de>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <20200402115455.2ff55c1f@Tarkus>
 <3b3b4384-cea9-5a72-542d-88c5db564b82@rgzm.de>
Message-ID: <09f30516-7af5-fee7-5efd-e6db69c75fb3@sapo.pt>

Hello,

This is not an answer to the original problem, it's about '..'. (And a 
bit more.)

About '..', see if the following sequence of instructions can help.
Subdirectories '~/tmp' and '~/snap' exist on my PC, change to 
'~/analysis/scripts' or to what makes sense on yours.

od <- getwd()          # save this for later

setwd('~/tmp')         #
list.files('../snap')  # goes up one level and
                        # executes a SO/files related command
curr <- getwd()
basename(curr)         # these two instructions are meant to show that
dirname(curr)          # you don't need to know how many levels you have
                        # to go up, you can parse 'curr' if basename and
                        # dirname are not enough

setwd(od)              # back to where I was


Hope this helps,

Rui Barradas

?s 10:02 de 02/04/20, Ivan Calandra escreveu:
> I do not know this ".." command (could you please show me how to use it
> in a relative path?), but it sounds like a good start.
> 
> But it implies that I know in advance how many folders up the parent
> directory is. I guess in most cases it will always be the same, but it
> would be even better if it could be applied generically.
> 
> As I said, ideally, I would like to get the project directory from a
> script located in a subfolder.
> 
> Thanks!
> Ivan
> 
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
> 
> On 02/04/2020 10:54, Ivan Krylov wrote:
>> On Thu, 2 Apr 2020 10:30:29 +0200
>> Ivan Calandra <calandra at rgzm.de> wrote:
>>
>>> The problem I then have is to specify the path for 'raw_data' and
>>> 'derived_data' <...> And these folders are not subfolders of
>>> the working directory '~/analysis/scripts'.
>>   
>>> I would like to avoid absolute paths of course
>> Is there a reason to avoid relative paths built using '..' to access
>> parent directories?
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Apr  2 11:34:05 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 2 Apr 2020 12:34:05 +0300
Subject: [R] project path in Rmd
In-Reply-To: <3b3b4384-cea9-5a72-542d-88c5db564b82@rgzm.de>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <20200402115455.2ff55c1f@Tarkus>
 <3b3b4384-cea9-5a72-542d-88c5db564b82@rgzm.de>
Message-ID: <20200402123405.6fafdc8d@Tarkus>

On Thu, 2 Apr 2020 11:02:56 +0200
Ivan Calandra <calandra at rgzm.de> wrote:

> I do not know this ".." command (could you please show me how to use
> it in a relative path?), but it sounds like a good start.

Each '..' in the path moves you up one level in the directory tree.
Here I use '..' once to access the sibling of the current directory,
then verify my assumption using the absolute path:

setwd('~/temp')
setwd('../archive')
getwd() == path.expand('~/archive')
# [1] TRUE

A related thing is using '.' to mean the *current* directory (i.e. the
value of getwd()). It is sometimes useful e.g. if you have a file named
'~' in your current directory and want to avoid expanding it to your
home directory.

> But it implies that I know in advance how many folders up the parent
> directory is.

Yes, I think that hardcoding some part of *within-project* directory
structure is unavoidable. But it shouldn't cause any troubles as long
as the project (analysis/{scripts,raw_data,derived_data}) is considered
as a whole.

-- 
Best regards,
Ivan


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  2 12:58:33 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 2 Apr 2020 11:58:33 +0100
Subject: [R] 
 disk.frame change default directory that disk.frames are saved in?
In-Reply-To: <CAN9eD7niuyC9tYNWD1pmiPK7x+kEhkALS+oqq2OTu-TQobAFtA@mail.gmail.com>
References: <CAN9eD7niuyC9tYNWD1pmiPK7x+kEhkALS+oqq2OTu-TQobAFtA@mail.gmail.com>
Message-ID: <05442e64-a3d0-928e-8f0a-b3c9b8a3be90@sapo.pt>

Hello,

This is SO dependent, see if this StackOverflow post can be of help.

https://stackoverflow.com/questions/17107206/change-temporary-directory

Hope this helps,

Rui Barradas

?s 10:16 de 02/04/20, nevil amos escreveu:
> I would like to change the default  directory within which all disk frames
> are saved  to a directory on an SSD, which is not the drive there the r
> tempdir is located. for example instead of saving all disk.frames in
> tempdir the are all saved in ./media/SSDdrive/DF?
> 
> 
> Thanks
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From tr|ng @end|ng |rom gvdnet@dk  Thu Apr  2 13:07:51 2020
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Thu, 2 Apr 2020 13:07:51 +0200
Subject: [R] nls problem
Message-ID: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>

Dear friends - I'm on Win10 with R 6.3.1 and have a very simple problem with
nls which apparently gives a decent fit to the parable below, even without
starting values. But when I then think I know the meaning of the three
parameters a, b, and d it goes very wrong. I guess I am again overlooking
something easy but cannot spot it.

BW
Troels Ring,

Aalborg, Denmark

 

 

aedf <- structure(list(Flux = c(-0.141256, -0.154709, -0.215247, -0.302691, 

            -0.32287, -0.511211, -0.605381, -0.813901, -1.11659, -1.76906

), pH = c(7.06273, 7.11182, 7.16182, 7.18818, 7.21455, 7.23818, 

          7.26273, 7.28455, 7.31182, 7.34364)), class = "data.frame",
row.names = c(NA, 

 
-10L))

m <- with(aedf,nls(Flux~a + b*pH + d*pH^2))

 

with(aedf,plot(pH,Flux))

with(aedf,lines(pH,fitted(m),lty=1,col="red",lwd=3))

 

m

# a        b        d 

# -1630.70   457.67   -32.11 

 

fitted(m)

# 1] -0.22087053 -0.09989926 -0.13579690 -0.21936385 -0.34761742 -0.50048799

# [7] -0.69729602 -0.90471194 -1.20692552 -1.61994657

 

FPG <- function(pH) -1630.70 + 457.67*pH -32.11*pH^2

 

FPG(aedf$pH)

# [1] -0.016359649  0.107602395  0.074773375 -0.007166685 -0.133786467

# [6] -0.285187665 -0.480463769 -0.686513537 -0.987013685 -1.398026917

 

# So why aren't fitted(m) and FPG(aedf$pH) not closer ("equal")?

 


This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com
<http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
p&url=/> 

	[[alternative HTML version deleted]]


From t|m@how@rd @end|ng |rom dec@ny@gov  Thu Apr  2 13:08:21 2020
From: t|m@how@rd @end|ng |rom dec@ny@gov (Howard, Tim G (DEC))
Date: Thu, 2 Apr 2020 11:08:21 +0000
Subject: [R] project path in Rmd (Ivan Calandra)
In-Reply-To: <mailman.358172.1.1585821936.37868.r-help@r-project.org>
References: <mailman.358172.1.1585821936.37868.r-help@r-project.org>
Message-ID: <BL0PR0901MB2996CE08C66147139CD22C1CA8C60@BL0PR0901MB2996.namprd09.prod.outlook.com>

You also should be able to reference locations from the 'root' of your project using the here() package. 

https://here.r-lib.org/

Best, 
Tim Howard


> Date: Thu, 2 Apr 2020 10:21:47 +0100

> From: Rui Barradas <ruipbarradas at sapo.pt>

> To: Ivan Calandra <calandra at rgzm.de>

> Cc: "r-help at r-project.org" <r-help at r-project.org>

> Subject: Re: [R] project path in Rmd

> Message-ID: <09f30516-7af5-fee7-5efd-e6db69c75fb3 at sapo.pt>

> Content-Type: text/plain; charset="utf-8"; Format="flowed"

> 

> Hello,

> 

> This is not an answer to the original problem, it's about '..'. (And a

> bit more.)

> 

> About '..', see if the following sequence of instructions can help.

> Subdirectories '~/tmp' and '~/snap' exist on my PC, change to

> '~/analysis/scripts' or to what makes sense on yours.

> 

> od <- getwd()????????? # save this for later

> 

> setwd('~/tmp')???????? #

> list.files('../snap')? # goes up one level and

> ??????????????????????? # executes a SO/files related command

> curr <- getwd()

> basename(curr)???????? # these two instructions are meant to show that

> dirname(curr)????????? # you don't need to know how many levels you have

> ??????????????????????? # to go up, you can parse 'curr' if basename and

> ??????????????????????? # dirname are not enough

> 

> setwd(od)????????????? # back to where I was

> 

> 

> Hope this helps,

> Rui Barradas

> ?s 10:02 de 02/04/20, Ivan Calandra escreveu:

> I do not know this ".." command (could you please show me how to use it

> in a relative path?), but it sounds like a good start.

>

> But it implies that I know in advance how many folders up the parent

> directory is. I guess in most cases it will always be the same, but it

> would be even better if it could be applied generically.

>

> As I said, ideally, I would like to get the project directory from a

> script located in a subfolder.

>

> Thanks!

> Ivan

>

> --

> Dr. Ivan Calandra

> TraCEr, laboratory for Traceology and Controlled Experiments

> MONREPOS Archaeological Research Centre and

> Museum for Human Behavioural Evolution

> Schloss Monrepos

> 56567 Neuwied, Germany

> +49 (0) 2631 9772-243

> https://www.researchgate.net/profile/Ivan_Calandra

>

> On 02/04/2020 10:54, Ivan Krylov wrote:

>> On Thu, 2 Apr 2020 10:30:29 +0200

>> Ivan Calandra <calandra at rgzm.de> wrote:

>>

>>> The problem I then have is to specify the path for 'raw_data' and

>>> 'derived_data' <...> And these folders are not subfolders of

>>> the working directory '~/analysis/scripts'.

>>

>>> I would like to avoid absolute paths of course

>> Is there a reason to avoid relative paths built using '..' to access

>> parent directories?

>>

>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  2 13:30:33 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 2 Apr 2020 12:30:33 +0100
Subject: [R] nls problem
In-Reply-To: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>
References: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>
Message-ID: <0ec086b1-7710-8ebc-8293-5a5ac47fc7be@sapo.pt>

Hello,

Tip: in a formula, pH^2 = pH*pH is an interaction.

pH^2 = pH*pH = pH + pH + pH:pH = pH

Try I(pH^2)

Hope this helps,

Rui Barradas

?s 12:07 de 02/04/20, Troels Ring escreveu:
> Dear friends - I'm on Win10 with R 6.3.1 and have a very simple problem with
> nls which apparently gives a decent fit to the parable below, even without
> starting values. But when I then think I know the meaning of the three
> parameters a, b, and d it goes very wrong. I guess I am again overlooking
> something easy but cannot spot it.
> 
> BW
> Troels Ring,
> 
> Aalborg, Denmark
> 
>   
> 
>   
> 
> aedf <- structure(list(Flux = c(-0.141256, -0.154709, -0.215247, -0.302691,
> 
>              -0.32287, -0.511211, -0.605381, -0.813901, -1.11659, -1.76906
> 
> ), pH = c(7.06273, 7.11182, 7.16182, 7.18818, 7.21455, 7.23818,
> 
>            7.26273, 7.28455, 7.31182, 7.34364)), class = "data.frame",
> row.names = c(NA,
> 
>   
> -10L))
> 
> m <- with(aedf,nls(Flux~a + b*pH + d*pH^2))
> 
>   
> 
> with(aedf,plot(pH,Flux))
> 
> with(aedf,lines(pH,fitted(m),lty=1,col="red",lwd=3))
> 
>   
> 
> m
> 
> # a        b        d
> 
> # -1630.70   457.67   -32.11
> 
>   
> 
> fitted(m)
> 
> # 1] -0.22087053 -0.09989926 -0.13579690 -0.21936385 -0.34761742 -0.50048799
> 
> # [7] -0.69729602 -0.90471194 -1.20692552 -1.61994657
> 
>   
> 
> FPG <- function(pH) -1630.70 + 457.67*pH -32.11*pH^2
> 
>   
> 
> FPG(aedf$pH)
> 
> # [1] -0.016359649  0.107602395  0.074773375 -0.007166685 -0.133786467
> 
> # [6] -0.285187665 -0.480463769 -0.686513537 -0.987013685 -1.398026917
> 
>   
> 
> # So why aren't fitted(m) and FPG(aedf$pH) not closer ("equal")?
> 
>   
> 
> 
> This email has been scanned by BullGuard antivirus protection.
> For more info visit www.bullguard.com
> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
> p&url=/>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From c@|@ndr@ @end|ng |rom rgzm@de  Thu Apr  2 13:41:44 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 2 Apr 2020 13:41:44 +0200
Subject: [R] project path in Rmd (Ivan Calandra)
In-Reply-To: <BL0PR0901MB2996CE08C66147139CD22C1CA8C60@BL0PR0901MB2996.namprd09.prod.outlook.com>
References: <mailman.358172.1.1585821936.37868.r-help@r-project.org>
 <BL0PR0901MB2996CE08C66147139CD22C1CA8C60@BL0PR0901MB2996.namprd09.prod.outlook.com>
Message-ID: <e58b44fc-1be7-6761-d6bf-f047b0e0c04b@rgzm.de>

Thanks Tim, that's exactly what I needed.

I came across the here package before, but I didn't see the point of
using it since RStudio already deals with relative paths and sets up the
working directory where the file is.

I didn't notice the functionality of getting the project directory with
the here package. IMHO, this functionality should be more advertised;
this seems to me to be the greatest advantage of using it!

Best,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 02/04/2020 13:08, Howard, Tim G (DEC) wrote:
> You also should be able to reference locations from the 'root' of your project using the here() package. 
>
> https://here.r-lib.org/
>
> Best, 
> Tim Howard
>
>
>> Date: Thu, 2 Apr 2020 10:21:47 +0100
>> From: Rui Barradas <ruipbarradas at sapo.pt>
>> To: Ivan Calandra <calandra at rgzm.de>
>> Cc: "r-help at r-project.org" <r-help at r-project.org>
>> Subject: Re: [R] project path in Rmd
>> Message-ID: <09f30516-7af5-fee7-5efd-e6db69c75fb3 at sapo.pt>
>> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>> Hello,
>> This is not an answer to the original problem, it's about '..'. (And a
>> bit more.)
>> About '..', see if the following sequence of instructions can help.
>> Subdirectories '~/tmp' and '~/snap' exist on my PC, change to
>> '~/analysis/scripts' or to what makes sense on yours.
>> od <- getwd()????????? # save this for later
>> setwd('~/tmp')???????? #
>> list.files('../snap')? # goes up one level and
>> ??????????????????????? # executes a SO/files related command
>> curr <- getwd()
>> basename(curr)???????? # these two instructions are meant to show that
>> dirname(curr)????????? # you don't need to know how many levels you have
>> ??????????????????????? # to go up, you can parse 'curr' if basename and
>> ??????????????????????? # dirname are not enough
>> setwd(od)????????????? # back to where I was
>> Hope this helps,
>> Rui Barradas
>> ?s 10:02 de 02/04/20, Ivan Calandra escreveu:
>> I do not know this ".." command (could you please show me how to use it
>> in a relative path?), but it sounds like a good start.
>> But it implies that I know in advance how many folders up the parent
>> directory is. I guess in most cases it will always be the same, but it
>> would be even better if it could be applied generically.
>> As I said, ideally, I would like to get the project directory from a
>> script located in a subfolder.
>> Thanks!
>> Ivan
>> --
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments
>> MONREPOS Archaeological Research Centre and
>> Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>> On 02/04/2020 10:54, Ivan Krylov wrote:
>>> On Thu, 2 Apr 2020 10:30:29 +0200
>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>> The problem I then have is to specify the path for 'raw_data' and
>>>> 'derived_data' <...> And these folders are not subfolders of
>>>> the working directory '~/analysis/scripts'.
>>>> I would like to avoid absolute paths of course
>>> Is there a reason to avoid relative paths built using '..' to access
>>> parent directories?


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  2 13:56:40 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 2 Apr 2020 12:56:40 +0100
Subject: [R] nls problem
In-Reply-To: <0ec086b1-7710-8ebc-8293-5a5ac47fc7be@sapo.pt>
References: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>
 <0ec086b1-7710-8ebc-8293-5a5ac47fc7be@sapo.pt>
Message-ID: <4047c739-bd0d-9139-8f10-2e252fd9a2bf@sapo.pt>

Hello,

Sorry, disregard my previous e-mail.
Instead of your FPG function try


FPG <- function(pH, model) {
   coef(model)[1] + coef(model)[2]*pH + coef(model)[3]*pH^2
}

FPG(aedf$pH, m)
fitted(m)


Hope this helps,

Rui Barradas

?s 12:30 de 02/04/20, Rui Barradas escreveu:
> Hello,
> 
> Tip: in a formula, pH^2 = pH*pH is an interaction.
> 
> pH^2 = pH*pH = pH + pH + pH:pH = pH
> 
> Try I(pH^2)
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 12:07 de 02/04/20, Troels Ring escreveu:
>> Dear friends - I'm on Win10 with R 6.3.1 and have a very simple 
>> problem with
>> nls which apparently gives a decent fit to the parable below, even 
>> without
>> starting values. But when I then think I know the meaning of the three
>> parameters a, b, and d it goes very wrong. I guess I am again overlooking
>> something easy but cannot spot it.
>>
>> BW
>> Troels Ring,
>>
>> Aalborg, Denmark
>>
>>
>>
>> aedf <- structure(list(Flux = c(-0.141256, -0.154709, -0.215247, 
>> -0.302691,
>>
>> ???????????? -0.32287, -0.511211, -0.605381, -0.813901, -1.11659, 
>> -1.76906
>>
>> ), pH = c(7.06273, 7.11182, 7.16182, 7.18818, 7.21455, 7.23818,
>>
>> ?????????? 7.26273, 7.28455, 7.31182, 7.34364)), class = "data.frame",
>> row.names = c(NA,
>>
>> -10L))
>>
>> m <- with(aedf,nls(Flux~a + b*pH + d*pH^2))
>>
>>
>> with(aedf,plot(pH,Flux))
>>
>> with(aedf,lines(pH,fitted(m),lty=1,col="red",lwd=3))
>>
>>
>> m
>>
>> # a??????? b??????? d
>>
>> # -1630.70?? 457.67?? -32.11
>>
>>
>> fitted(m)
>>
>> # 1] -0.22087053 -0.09989926 -0.13579690 -0.21936385 -0.34761742 
>> -0.50048799
>>
>> # [7] -0.69729602 -0.90471194 -1.20692552 -1.61994657
>>
>>
>> FPG <- function(pH) -1630.70 + 457.67*pH -32.11*pH^2
>>
>>
>> FPG(aedf$pH)
>>
>> # [1] -0.016359649? 0.107602395? 0.074773375 -0.007166685 -0.133786467
>>
>> # [6] -0.285187665 -0.480463769 -0.686513537 -0.987013685 -1.398026917
>>
>>
>> # So why aren't fitted(m) and FPG(aedf$pH) not closer ("equal")?
>>
>>
>>
>> This email has been scanned by BullGuard antivirus protection.
>> For more info visit www.bullguard.com
>> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt 
>>
>> p&url=/>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  2 14:01:16 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 2 Apr 2020 13:01:16 +0100
Subject: [R] nls problem
In-Reply-To: <4047c739-bd0d-9139-8f10-2e252fd9a2bf@sapo.pt>
References: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>
 <0ec086b1-7710-8ebc-8293-5a5ac47fc7be@sapo.pt>
 <4047c739-bd0d-9139-8f10-2e252fd9a2bf@sapo.pt>
Message-ID: <1658ebed-e765-9858-8545-402b43ad5901@sapo.pt>

Simpler:


FPG2 <- function(x, model){
   as.vector(cbind(1, x, x^2) %*% coef(model))
}


Hope this helps,

Rui Barradas

?s 12:56 de 02/04/20, Rui Barradas escreveu:
> Hello,
> 
> Sorry, disregard my previous e-mail.
> Instead of your FPG function try
> 
> 
> FPG <- function(pH, model) {
>  ? coef(model)[1] + coef(model)[2]*pH + coef(model)[3]*pH^2
> }
> 
> FPG(aedf$pH, m)
> fitted(m)
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 12:30 de 02/04/20, Rui Barradas escreveu:
>> Hello,
>>
>> Tip: in a formula, pH^2 = pH*pH is an interaction.
>>
>> pH^2 = pH*pH = pH + pH + pH:pH = pH
>>
>> Try I(pH^2)
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 12:07 de 02/04/20, Troels Ring escreveu:
>>> Dear friends - I'm on Win10 with R 6.3.1 and have a very simple 
>>> problem with
>>> nls which apparently gives a decent fit to the parable below, even 
>>> without
>>> starting values. But when I then think I know the meaning of the three
>>> parameters a, b, and d it goes very wrong. I guess I am again 
>>> overlooking
>>> something easy but cannot spot it.
>>>
>>> BW
>>> Troels Ring,
>>>
>>> Aalborg, Denmark
>>>
>>>
>>>
>>> aedf <- structure(list(Flux = c(-0.141256, -0.154709, -0.215247, 
>>> -0.302691,
>>>
>>> ???????????? -0.32287, -0.511211, -0.605381, -0.813901, -1.11659, 
>>> -1.76906
>>>
>>> ), pH = c(7.06273, 7.11182, 7.16182, 7.18818, 7.21455, 7.23818,
>>>
>>> ?????????? 7.26273, 7.28455, 7.31182, 7.34364)), class = "data.frame",
>>> row.names = c(NA,
>>>
>>> -10L))
>>>
>>> m <- with(aedf,nls(Flux~a + b*pH + d*pH^2))
>>>
>>>
>>> with(aedf,plot(pH,Flux))
>>>
>>> with(aedf,lines(pH,fitted(m),lty=1,col="red",lwd=3))
>>>
>>>
>>> m
>>>
>>> # a??????? b??????? d
>>>
>>> # -1630.70?? 457.67?? -32.11
>>>
>>>
>>> fitted(m)
>>>
>>> # 1] -0.22087053 -0.09989926 -0.13579690 -0.21936385 -0.34761742 
>>> -0.50048799
>>>
>>> # [7] -0.69729602 -0.90471194 -1.20692552 -1.61994657
>>>
>>>
>>> FPG <- function(pH) -1630.70 + 457.67*pH -32.11*pH^2
>>>
>>>
>>> FPG(aedf$pH)
>>>
>>> # [1] -0.016359649? 0.107602395? 0.074773375 -0.007166685 -0.133786467
>>>
>>> # [6] -0.285187665 -0.480463769 -0.686513537 -0.987013685 -1.398026917
>>>
>>>
>>> # So why aren't fitted(m) and FPG(aedf$pH) not closer ("equal")?
>>>
>>>
>>>
>>> This email has been scanned by BullGuard antivirus protection.
>>> For more info visit www.bullguard.com
>>> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt 
>>>
>>> p&url=/>
>>>
>>> ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Apr  2 14:39:53 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 2 Apr 2020 12:39:53 +0000
Subject: [R] ggplot stat smooth and poly
Message-ID: <37de34217e244f10bcc7b5e5215609de@SRVEXCHCM1302.precheza.cz>

Dear all

I am not sure, but I believe that in past it was possible to add smoothing
lines in ggplot even if some group did not have enough points to perform
calculation (although I did not find any version which could deliver it).

Here is the code and data

library(ggplot2)
p <- ggplot(test, aes(x=one, y=two, colour=three))
p+geom_point(size=5)+stat_smooth(method="lm")
***line added to each group

p+geom_point(size=5)+stat_smooth(method="lm", formula=y~poly(x,2))
Warning message:
Computation failed in `stat_smooth()`:
'degree' must be less than number of unique points 
***no line added to any group

test <- structure(list(one = 1:20, two = c(1L, 4L, 9L, 16L, 25L, 36L, 
49L, 64L, 81L, 100L, 121L, 144L, 169L, 196L, 225L, 256L, 289L, 
324L, 361L, 400L), three = c("a", "a", "a", "a", "b", "b", "b", 
"b", "c", "c", "c", "c", "c", "d", "d", "e", "e", "e", "e", "e"
)), class = "data.frame", row.names = c(NA, -20L))

My question:  
Is it possible to add smoothing line just to the groups where it can be
added? I know that I could exclude "d" level from my data but I would prefer
to keep them and add only smoothing lines where they could be computed.

Best regards
Petr

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Apr  2 15:40:07 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 02 Apr 2020 06:40:07 -0700
Subject: [R] project path in Rmd
In-Reply-To: <5dc0f14a-017b-7870-477b-457a013cbd1e@rgzm.de>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <CA2DCCC8-A281-4A94-BF67-634A4EA88A11@dcn.davis.ca.us>
 <0319b44a-a2ae-70aa-4cd8-f457b10e02df@rgzm.de>
 <94BDC03F-4996-447E-91FD-D165A324A8A9@dcn.davis.ca.us>
 <5dc0f14a-017b-7870-477b-457a013cbd1e@rgzm.de>
Message-ID: <5567F296-7EEB-415A-AB43-A313516556A3@dcn.davis.ca.us>

Where did this false dichotomy come from? The rmarkdown::render function has quite flexible parameters for compiling rmarkdown files in subdirectories without changing the current directory. And RStudio has a Global configuration to enable compiling using the Project directory as "current" under the RMarkdown settings.

On April 2, 2020 1:59:03 AM PDT, Ivan Calandra <calandra at rgzm.de> wrote:
>So what you're saying is that I should have scripts in the project
>directory and not in a subfolder within it, right?
>
>But what if I need (or at least want) to?
>
>Ivan
>
>--
>Dr. Ivan Calandra
>TraCEr, laboratory for Traceology and Controlled Experiments
>MONREPOS Archaeological Research Centre and
>Museum for Human Behavioural Evolution
>Schloss Monrepos
>56567 Neuwied, Germany
>+49 (0) 2631 9772-243
>https://www.researchgate.net/profile/Ivan_Calandra
>
>On 02/04/2020 10:56, Jeff Newmiller wrote:
>> Make it so. Outside R.
>>
>> At the command line, use cd before you start R. This should feel
>natural.
>>
>> In a GUI file browser, double clicking on a file type assigned to a
>program by default sets the containing directory to be current
>directory before kicking off the program, so double-clicking on an
>empty Project.RData file will do it. Or you can use RStudio
>Project.Rproj files the same way.
>>
>> On April 2, 2020 1:40:07 AM PDT, Ivan Calandra <calandra at rgzm.de>
>wrote:
>>> Hi Jeff,
>>>
>>> But if I do not use setwd(), the current working directory is NOT
>the
>>> project directory.
>>>
>>> That's what my problem is about... I guess I was not clear in my
>>> email...
>>>
>>> Ivan
>>>
>>> --
>>> Dr. Ivan Calandra
>>> TraCEr, laboratory for Traceology and Controlled Experiments
>>> MONREPOS Archaeological Research Centre and
>>> Museum for Human Behavioural Evolution
>>> Schloss Monrepos
>>> 56567 Neuwied, Germany
>>> +49 (0) 2631 9772-243
>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>
>>> On 02/04/2020 10:37, Jeff Newmiller wrote:
>>>> I recommend not using setwd. Then you can always assume your
>current
>>> working directory is your project directory and reference relative
>to
>>> that.
>>>> On April 2, 2020 1:30:29 AM PDT, Ivan Calandra <calandra at rgzm.de>
>>> wrote:
>>>>> Dear useRs,
>>>>>
>>>>> I believe this is R code so appropriate for this list, but let me
>>> know
>>>>> if this relates more to RStudio itself.
>>>>>
>>>>> I am working on an RStudio project. In that project directory, I
>>> have a
>>>>> folder called 'analysis' and in there a folder called 'scripts'
>>>>> ('~/analysis/scripts').
>>>>> My data files needed for the scripts are in '~/analysis/raw_data'
>>> and
>>>>> the output should be in '~/analysis/derived_data'.
>>>>>
>>>>> My scripts are Rmd files, so when I knit them, their working
>>> directory
>>>>> is where they are located, i.e. '~/analysis/scripts'. The problem
>I
>>>>> then
>>>>> have is to specify the path for 'raw_data' and 'derived_data'
>since
>>>>> during the rendering I am not relative to the project directory
>>>>> anymore.
>>>>> And these folders are not subfolders of the working directory?
>>>>> '~/analysis/scripts'.
>>>>> I hope I am clear here...
>>>>>
>>>>> I would like to avoid absolute paths of course, but I do not know
>>> how
>>>>> to
>>>>> proceed.
>>>>> What would be nice is a way to get the project directory in the
>>>>> scripts,
>>>>> rather than their working directory.
>>>>> Does that make sense?
>>>>>
>>>>> Thank you in advance
>>>>> Best,
>>>>> Ivan
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From c@|@ndr@ @end|ng |rom rgzm@de  Thu Apr  2 15:42:28 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 2 Apr 2020 15:42:28 +0200
Subject: [R] project path in Rmd
In-Reply-To: <5567F296-7EEB-415A-AB43-A313516556A3@dcn.davis.ca.us>
References: <239110ee-781d-be75-9d97-306296816233@rgzm.de>
 <CA2DCCC8-A281-4A94-BF67-634A4EA88A11@dcn.davis.ca.us>
 <0319b44a-a2ae-70aa-4cd8-f457b10e02df@rgzm.de>
 <94BDC03F-4996-447E-91FD-D165A324A8A9@dcn.davis.ca.us>
 <5dc0f14a-017b-7870-477b-457a013cbd1e@rgzm.de>
 <5567F296-7EEB-415A-AB43-A313516556A3@dcn.davis.ca.us>
Message-ID: <d33fa2eb-a46c-a2a1-b864-6ce4f8f51f43@rgzm.de>

Thanks Jeff,

I was just completely unaware of these options! Now I know.

Best,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 02/04/2020 15:40, Jeff Newmiller wrote:
> Where did this false dichotomy come from? The rmarkdown::render function has quite flexible parameters for compiling rmarkdown files in subdirectories without changing the current directory. And RStudio has a Global configuration to enable compiling using the Project directory as "current" under the RMarkdown settings.
>
> On April 2, 2020 1:59:03 AM PDT, Ivan Calandra <calandra at rgzm.de> wrote:
>> So what you're saying is that I should have scripts in the project
>> directory and not in a subfolder within it, right?
>>
>> But what if I need (or at least want) to?
>>
>> Ivan
>>
>> --
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments
>> MONREPOS Archaeological Research Centre and
>> Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>>
>> On 02/04/2020 10:56, Jeff Newmiller wrote:
>>> Make it so. Outside R.
>>>
>>> At the command line, use cd before you start R. This should feel
>> natural.
>>> In a GUI file browser, double clicking on a file type assigned to a
>> program by default sets the containing directory to be current
>> directory before kicking off the program, so double-clicking on an
>> empty Project.RData file will do it. Or you can use RStudio
>> Project.Rproj files the same way.
>>> On April 2, 2020 1:40:07 AM PDT, Ivan Calandra <calandra at rgzm.de>
>> wrote:
>>>> Hi Jeff,
>>>>
>>>> But if I do not use setwd(), the current working directory is NOT
>> the
>>>> project directory.
>>>>
>>>> That's what my problem is about... I guess I was not clear in my
>>>> email...
>>>>
>>>> Ivan
>>>>
>>>> --
>>>> Dr. Ivan Calandra
>>>> TraCEr, laboratory for Traceology and Controlled Experiments
>>>> MONREPOS Archaeological Research Centre and
>>>> Museum for Human Behavioural Evolution
>>>> Schloss Monrepos
>>>> 56567 Neuwied, Germany
>>>> +49 (0) 2631 9772-243
>>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>>
>>>> On 02/04/2020 10:37, Jeff Newmiller wrote:
>>>>> I recommend not using setwd. Then you can always assume your
>> current
>>>> working directory is your project directory and reference relative
>> to
>>>> that.
>>>>> On April 2, 2020 1:30:29 AM PDT, Ivan Calandra <calandra at rgzm.de>
>>>> wrote:
>>>>>> Dear useRs,
>>>>>>
>>>>>> I believe this is R code so appropriate for this list, but let me
>>>> know
>>>>>> if this relates more to RStudio itself.
>>>>>>
>>>>>> I am working on an RStudio project. In that project directory, I
>>>> have a
>>>>>> folder called 'analysis' and in there a folder called 'scripts'
>>>>>> ('~/analysis/scripts').
>>>>>> My data files needed for the scripts are in '~/analysis/raw_data'
>>>> and
>>>>>> the output should be in '~/analysis/derived_data'.
>>>>>>
>>>>>> My scripts are Rmd files, so when I knit them, their working
>>>> directory
>>>>>> is where they are located, i.e. '~/analysis/scripts'. The problem
>> I
>>>>>> then
>>>>>> have is to specify the path for 'raw_data' and 'derived_data'
>> since
>>>>>> during the rendering I am not relative to the project directory
>>>>>> anymore.
>>>>>> And these folders are not subfolders of the working directory?
>>>>>> '~/analysis/scripts'.
>>>>>> I hope I am clear here...
>>>>>>
>>>>>> I would like to avoid absolute paths of course, but I do not know
>>>> how
>>>>>> to
>>>>>> proceed.
>>>>>> What would be nice is a way to get the project directory in the
>>>>>> scripts,
>>>>>> rather than their working directory.
>>>>>> Does that make sense?
>>>>>>
>>>>>> Thank you in advance
>>>>>> Best,
>>>>>> Ivan
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Apr  2 15:58:40 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 02 Apr 2020 06:58:40 -0700
Subject: [R] 
 disk.frame change default directory that disk.frames are saved in?
In-Reply-To: <05442e64-a3d0-928e-8f0a-b3c9b8a3be90@sapo.pt>
References: <CAN9eD7niuyC9tYNWD1pmiPK7x+kEhkALS+oqq2OTu-TQobAFtA@mail.gmail.com>
 <05442e64-a3d0-928e-8f0a-b3c9b8a3be90@sapo.pt>
Message-ID: <4B0050B8-21C9-4722-8181-FFAC1345F306@dcn.davis.ca.us>

What does SO dependent mean? Cross posted with Stack Overflow?

The question appears to be to be about a contributed package called disk.frame, which I don't use. The examples I see explicitly call out using the tmpdir function... so simply replacing the use of not the tmpdir function with an R variable seems like an obvious solution.

On April 2, 2020 3:58:33 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>Hello,
>
>This is SO dependent, see if this StackOverflow post can be of help.
>
>https://stackoverflow.com/questions/17107206/change-temporary-directory
>
>Hope this helps,
>
>Rui Barradas
>
>?s 10:16 de 02/04/20, nevil amos escreveu:
>> I would like to change the default  directory within which all disk
>frames
>> are saved  to a directory on an SSD, which is not the drive there the
>r
>> tempdir is located. for example instead of saving all disk.frames in
>> tempdir the are all saved in ./media/SSDdrive/DF?
>> 
>> 
>> Thanks
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From er|cjberger @end|ng |rom gm@||@com  Thu Apr  2 16:53:24 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 2 Apr 2020 17:53:24 +0300
Subject: [R] 
 disk.frame change default directory that disk.frames are saved in?
In-Reply-To: <4B0050B8-21C9-4722-8181-FFAC1345F306@dcn.davis.ca.us>
References: <CAN9eD7niuyC9tYNWD1pmiPK7x+kEhkALS+oqq2OTu-TQobAFtA@mail.gmail.com>
 <05442e64-a3d0-928e-8f0a-b3c9b8a3be90@sapo.pt>
 <4B0050B8-21C9-4722-8181-FFAC1345F306@dcn.davis.ca.us>
Message-ID: <CAGgJW75n7o35UiN+hWdZVtVsz8KUpd-J1kZ+KpshiAkhZzNSow@mail.gmail.com>

Rui wrote: " This is SO dependent,"
I think it's a typo. He meant to write
"This is OS dependent"
The Stack Overflow link he provided has info for both Windows and Linux.


On Thu, Apr 2, 2020 at 4:59 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> What does SO dependent mean? Cross posted with Stack Overflow?
>
> The question appears to be to be about a contributed package called
> disk.frame, which I don't use. The examples I see explicitly call out using
> the tmpdir function... so simply replacing the use of not the tmpdir
> function with an R variable seems like an obvious solution.
>
> On April 2, 2020 3:58:33 AM PDT, Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >Hello,
> >
> >This is SO dependent, see if this StackOverflow post can be of help.
> >
> >https://stackoverflow.com/questions/17107206/change-temporary-directory
> >
> >Hope this helps,
> >
> >Rui Barradas
> >
> >?s 10:16 de 02/04/20, nevil amos escreveu:
> >> I would like to change the default  directory within which all disk
> >frames
> >> are saved  to a directory on an SSD, which is not the drive there the
> >r
> >> tempdir is located. for example instead of saving all disk.frames in
> >> tempdir the are all saved in ./media/SSDdrive/DF?
> >>
> >>
> >> Thanks
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  2 17:25:10 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 2 Apr 2020 16:25:10 +0100
Subject: [R] 
 disk.frame change default directory that disk.frames are saved in?
In-Reply-To: <CAGgJW75n7o35UiN+hWdZVtVsz8KUpd-J1kZ+KpshiAkhZzNSow@mail.gmail.com>
References: <CAN9eD7niuyC9tYNWD1pmiPK7x+kEhkALS+oqq2OTu-TQobAFtA@mail.gmail.com>
 <05442e64-a3d0-928e-8f0a-b3c9b8a3be90@sapo.pt>
 <4B0050B8-21C9-4722-8181-FFAC1345F306@dcn.davis.ca.us>
 <CAGgJW75n7o35UiN+hWdZVtVsz8KUpd-J1kZ+KpshiAkhZzNSow@mail.gmail.com>
Message-ID: <8808c49f-25a8-2016-7b7e-0e6b7f397874@sapo.pt>

Hello,



?s 15:53 de 02/04/20, Eric Berger escreveu:
> Rui wrote: " This is SO dependent,"
> I think it's a typo. He meant to write
> "This is OS dependent"

Right. SO is Portuguese :(.
Sorry for the mess.

Rui Barradas

> The Stack Overflow link he provided has info for both Windows and Linux.
> 
> 
> On Thu, Apr 2, 2020 at 4:59 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us 
> <mailto:jdnewmil at dcn.davis.ca.us>> wrote:
> 
>     What does SO dependent mean? Cross posted with Stack Overflow?
> 
>     The question appears to be to be about a contributed package called
>     disk.frame, which I don't use. The examples I see explicitly call
>     out using the tmpdir function... so simply replacing the use of not
>     the tmpdir function with an R variable seems like an obvious solution.
> 
>     On April 2, 2020 3:58:33 AM PDT, Rui Barradas <ruipbarradas at sapo.pt
>     <mailto:ruipbarradas at sapo.pt>> wrote:
>      >Hello,
>      >
>      >This is SO dependent, see if this StackOverflow post can be of help.
>      >
>      >https://stackoverflow.com/questions/17107206/change-temporary-directory
>      >
>      >Hope this helps,
>      >
>      >Rui Barradas
>      >
>      >?s 10:16 de 02/04/20, nevil amos escreveu:
>      >> I would like to change the default? directory within which all disk
>      >frames
>      >> are saved? to a directory on an SSD, which is not the drive
>     there the
>      >r
>      >> tempdir is located. for example instead of saving all disk.frames in
>      >> tempdir the are all saved in ./media/SSDdrive/DF?
>      >>
>      >>
>      >> Thanks
>      >>
>      >>? ? ? [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      >> https://stat.ethz.ch/mailman/listinfo/r-help
>      >> PLEASE do read the posting guide
>      >http://www.R-project.org/posting-guide.html
>      >> and provide commented, minimal, self-contained, reproducible code.
>      >>
>      >
>      >______________________________________________
>      >R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>      >https://stat.ethz.ch/mailman/listinfo/r-help
>      >PLEASE do read the posting guide
>      >http://www.R-project.org/posting-guide.html
>      >and provide commented, minimal, self-contained, reproducible code.
> 
>     -- 
>     Sent from my phone. Please excuse my brevity.
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>


From wdun|@p @end|ng |rom t|bco@com  Thu Apr  2 18:50:05 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Thu, 2 Apr 2020 09:50:05 -0700
Subject: [R] nls problem
In-Reply-To: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>
References: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>
Message-ID: <CAF8bMcYy_FP4-zNbcyh=vACNL2KutXJLRcTq+RxaNu5e+1BP4g@mail.gmail.com>

Roundoff/cancelation error: compare the following.  The first is equivalent
to your function, the last to fitted().

> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=2)))
            [,1]      [,2]       [,3]         [,4]       [,5]       [,6]
    [,7]       [,8]       [,9]     [,10]
[1,] -0.01635965 0.1076024 0.07477337 -0.007166685 -0.1337865 -0.2851877
-0.4804638 -0.6865135 -0.9870137 -1.398027
> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=4)))
           [,1]        [,2]       [,3]       [,4]       [,5]       [,6]
  [,7]      [,8]      [,9]     [,10]
[1,] -0.2196286 -0.09864071 -0.1345213 -0.2180792 -0.3463237 -0.4991861
-0.6959856 -0.903394 -1.205598 -1.618608
> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=16)))
           [,1]        [,2]       [,3]       [,4]       [,5]      [,6]
 [,7]       [,8]      [,9]     [,10]
[1,] -0.2208705 -0.09989926 -0.1357969 -0.2193638 -0.3476174 -0.500488
-0.697296 -0.9047119 -1.206926 -1.619947

Note that your model is linear and could be fitted with
   lm(data=aedf, Flux ~ pH + I(pH^2))
   lm(data=aedf, Flux ~ poly(pH, 2))
The latter uses a more stable parameterization.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Thu, Apr 2, 2020 at 4:15 AM Troels Ring <tring at gvdnet.dk> wrote:

> Dear friends - I'm on Win10 with R 6.3.1 and have a very simple problem
> with
> nls which apparently gives a decent fit to the parable below, even without
> starting values. But when I then think I know the meaning of the three
> parameters a, b, and d it goes very wrong. I guess I am again overlooking
> something easy but cannot spot it.
>
> BW
> Troels Ring,
>
> Aalborg, Denmark
>
>
>
>
>
> aedf <- structure(list(Flux = c(-0.141256, -0.154709, -0.215247,
> -0.302691,
>
>             -0.32287, -0.511211, -0.605381, -0.813901, -1.11659, -1.76906
>
> ), pH = c(7.06273, 7.11182, 7.16182, 7.18818, 7.21455, 7.23818,
>
>           7.26273, 7.28455, 7.31182, 7.34364)), class = "data.frame",
> row.names = c(NA,
>
>
> -10L))
>
> m <- with(aedf,nls(Flux~a + b*pH + d*pH^2))
>
>
>
> with(aedf,plot(pH,Flux))
>
> with(aedf,lines(pH,fitted(m),lty=1,col="red",lwd=3))
>
>
>
> m
>
> # a        b        d
>
> # -1630.70   457.67   -32.11
>
>
>
> fitted(m)
>
> # 1] -0.22087053 -0.09989926 -0.13579690 -0.21936385 -0.34761742
> -0.50048799
>
> # [7] -0.69729602 -0.90471194 -1.20692552 -1.61994657
>
>
>
> FPG <- function(pH) -1630.70 + 457.67*pH -32.11*pH^2
>
>
>
> FPG(aedf$pH)
>
> # [1] -0.016359649  0.107602395  0.074773375 -0.007166685 -0.133786467
>
> # [6] -0.285187665 -0.480463769 -0.686513537 -0.987013685 -1.398026917
>
>
>
> # So why aren't fitted(m) and FPG(aedf$pH) not closer ("equal")?
>
>
>
>
> This email has been scanned by BullGuard antivirus protection.
> For more info visit www.bullguard.com
> <
> http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
> p&url=/
> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smtp&url=/>>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From pro|jcn@@h @end|ng |rom gm@||@com  Thu Apr  2 20:06:01 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Thu, 2 Apr 2020 14:06:01 -0400
Subject: [R] nls problem
In-Reply-To: <CAF8bMcYy_FP4-zNbcyh=vACNL2KutXJLRcTq+RxaNu5e+1BP4g@mail.gmail.com>
References: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>
 <CAF8bMcYy_FP4-zNbcyh=vACNL2KutXJLRcTq+RxaNu5e+1BP4g@mail.gmail.com>
Message-ID: <36551789-6b4b-a7bb-8421-c34571f968d8@gmail.com>

Yes, I was waiting to see how long before it would be noticed that this is
not the sort of problem for which nls() is appropriate.

And I'll beat the drum again that nls() uses a simple (and generally
deprecated) forward difference derivative approximation that gets into
trouble a VERY high proportion of applications. Duncan Murdoch and I
published nlsr to overcome several of the weaknesses in nls(). nls()
was very advanced when it first appeared, but I've always felt it was
intended for use by very advanced craftsmen rather than general users.
Indeed, it can do some things nlsr won't do, but usually only if handled
skillfully.

JN


On 2020-04-02 12:50 p.m., William Dunlap via R-help wrote:
> Roundoff/cancelation error: compare the following.  The first is equivalent
> to your function, the last to fitted().
> 
>> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=2)))
>             [,1]      [,2]       [,3]         [,4]       [,5]       [,6]
>     [,7]       [,8]       [,9]     [,10]
> [1,] -0.01635965 0.1076024 0.07477337 -0.007166685 -0.1337865 -0.2851877
> -0.4804638 -0.6865135 -0.9870137 -1.398027
>> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=4)))
>            [,1]        [,2]       [,3]       [,4]       [,5]       [,6]
>   [,7]      [,8]      [,9]     [,10]
> [1,] -0.2196286 -0.09864071 -0.1345213 -0.2180792 -0.3463237 -0.4991861
> -0.6959856 -0.903394 -1.205598 -1.618608
>> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=16)))
>            [,1]        [,2]       [,3]       [,4]       [,5]      [,6]
>  [,7]       [,8]      [,9]     [,10]
> [1,] -0.2208705 -0.09989926 -0.1357969 -0.2193638 -0.3476174 -0.500488
> -0.697296 -0.9047119 -1.206926 -1.619947
> 
> Note that your model is linear and could be fitted with
>    lm(data=aedf, Flux ~ pH + I(pH^2))
>    lm(data=aedf, Flux ~ poly(pH, 2))
> The latter uses a more stable parameterization.
> 
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
> 
> 
> On Thu, Apr 2, 2020 at 4:15 AM Troels Ring <tring at gvdnet.dk> wrote:
> 
>> Dear friends - I'm on Win10 with R 6.3.1 and have a very simple problem
>> with
>> nls which apparently gives a decent fit to the parable below, even without
>> starting values. But when I then think I know the meaning of the three
>> parameters a, b, and d it goes very wrong. I guess I am again overlooking
>> something easy but cannot spot it.
>>
>> BW
>> Troels Ring,
>>
>> Aalborg, Denmark
>>
>>
>>
>>
>>
>> aedf <- structure(list(Flux = c(-0.141256, -0.154709, -0.215247,
>> -0.302691,
>>
>>             -0.32287, -0.511211, -0.605381, -0.813901, -1.11659, -1.76906
>>
>> ), pH = c(7.06273, 7.11182, 7.16182, 7.18818, 7.21455, 7.23818,
>>
>>           7.26273, 7.28455, 7.31182, 7.34364)), class = "data.frame",
>> row.names = c(NA,
>>
>>
>> -10L))
>>
>> m <- with(aedf,nls(Flux~a + b*pH + d*pH^2))
>>
>>
>>
>> with(aedf,plot(pH,Flux))
>>
>> with(aedf,lines(pH,fitted(m),lty=1,col="red",lwd=3))
>>
>>
>>
>> m
>>
>> # a        b        d
>>
>> # -1630.70   457.67   -32.11
>>
>>
>>
>> fitted(m)
>>
>> # 1] -0.22087053 -0.09989926 -0.13579690 -0.21936385 -0.34761742
>> -0.50048799
>>
>> # [7] -0.69729602 -0.90471194 -1.20692552 -1.61994657
>>
>>
>>
>> FPG <- function(pH) -1630.70 + 457.67*pH -32.11*pH^2
>>
>>
>>
>> FPG(aedf$pH)
>>
>> # [1] -0.016359649  0.107602395  0.074773375 -0.007166685 -0.133786467
>>
>> # [6] -0.285187665 -0.480463769 -0.686513537 -0.987013685 -1.398026917
>>
>>
>>
>> # So why aren't fitted(m) and FPG(aedf$pH) not closer ("equal")?
>>
>>
>>
>>
>> This email has been scanned by BullGuard antivirus protection.
>> For more info visit www.bullguard.com
>> <
>> http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
>> p&url=/
>> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smtp&url=/>>
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From h||m @end|ng |rom gm@c@com  Thu Apr  2 12:26:07 2020
From: h||m @end|ng |rom gm@c@com (Lim, Hwanggyu)
Date: Thu, 2 Apr 2020 10:26:07 +0000
Subject: [R] Question about nlminb function
Message-ID: <BL0PR05MB4788929E27A04D79A97FB7EFBDC60@BL0PR05MB4788.namprd05.prod.outlook.com>

Hello,

My name is Hwanggyu Lim. I am working estimating parameters of non-negative function, which has local maximums. For example, the function has three parameters (e.g., f(a, b, c)) and I need to estimate them.
For this, I am using nlminb optimization function and it works fine.

Here is my question. I want to specify the absolute difference stopping tolerance (or stopping criterion) to stop the iteration of estimation algorithm. For example, when n-1th estimates and nth estimates have absolute differences less than 0.001 for all three parameters, the iteration must stop. In this case, is there any way that I can do? I know that nlminb function has several control parameters to specify the tolerance. But, I am not sure how I can specify the absolute difference stopping tolerance. (I think that abs.tol argument is not relevant to my question because it only works for functions whose minimum is 0.

Could you please provide any idea about my situation if you have? Thanks!

Best,
Hwanggyu
The information in this transmission is confidential and intended only for the recipient listed above. If you are not the intended recipient, please advise the sender immediately by reply e-mail and delete this message and any attachments without retaining a copy. If you are not the intended recipient, you are hereby notified that any disclosure, copying or distribution of this message, or the taking of any action based upon it, is strictly prohibited.

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Apr  2 22:39:29 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 3 Apr 2020 07:39:29 +1100
Subject: [R] 
 repeat rows of matrix by number (k) in one colummatrix adding
 column j with values 1:k
In-Reply-To: <20200402200447.GA1856@jrl.uk.to>
References: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
 <CAN9eD7kfBmK1pF1fOh+TgpDf3M1BA5=JDTUJN4KsHCVo6o9bpw@mail.gmail.com>
 <CA+8X3fV2NVMPdkdu_HhgVqwqjPPt-j2Qn0UqzbQ4z-Kz61ROSA@mail.gmail.com>
 <20200402200447.GA1856@jrl.uk.to>
Message-ID: <CA+8X3fU6g0HsKn71-8Xt1Yxcq-a4WwAFjKjDRtZSP6qyeLGoQg@mail.gmail.com>

Hi Rasmus,
Very nice. The R help list is a bit like a quiz show where the
contestants must balance the alacrity with which they press their
buttons with the confidence that they have the correct answer. A slow
motion game of wits in which the prizes are self-awarded.

Jim

On Fri, Apr 3, 2020 at 7:04 AM Rasmus Liland <jensrasmus at gmail.com> wrote:
>
> On 2020-04-01 15:33 +1100, Jim Lemon wrote:
> > Hi Nevil,
> > It's a nasty piece of work, but:
>
> Hi!  How about this one:
>
>     data <- c(rep(1:4, times=3), 2, 1, 3, 2)
>     dimnames <- list(NULL, c("x", "y", "z", "k"))
>     ncol <- length(data)/4
>     M <- matrix(data=data, nrow=ncol, ncol=ncol, dimnames=dimnames)
>
>     FUN <- function(x) {
>       out <- matrix(rep(x[1:3], times=x[4]),
>                     byrow=TRUE, nrow=x[4])
>       return(cbind(out, x[4]))
>     }
>     newM <- do.call(rbind, apply(X=M, MARGIN=1, FUN=FUN))
>     dimnames(newM) <- list(NULL, c("x", "y", "z", "k"))
>     newM <- cbind(newM, "j"=sequence(M[,"k"]))
>     newM
>
> Regards,
> Rasmus


From cry@n @end|ng |rom b|ngh@mton@edu  Thu Apr  2 23:23:22 2020
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher W. Ryan)
Date: Thu, 2 Apr 2020 17:23:22 -0400
Subject: [R] arranging multiple lattice graphs on a page
Message-ID: <1297a2fd-e1a6-698d-ebf8-29c75f03e161@binghamton.edu>

I would like to place two separate plots, one above the other, something
like this (MWE for illustration):

library(lattice)
data(iris)
layout(matrix(c(1,2), 2, 1, byrow = TRUE))
with(iris, (plot(Sepal.Length ~ Petal.Length)))
with(iris, (plot(Sepal.Length ~ Petal.Width)))

but with lattice, so one of the plots can have panels. So something like
this:

library(lattice)
data(iris)
layout(matrix(c(1,2), 2, 1, byrow = TRUE))
xyplot(Sepal.Length ~ Petal.Length, data = iris)
xyplot(Sepal.Length ~ Petal.Width | Species, data = iris, layout = c(3,1))

But the latter does not accomplish my goal. Appreciate any advice.

Thanks.

--Chris Ryan
SUNY Upstate Medical University
Binghamton, NY


From bgunter@4567 @end|ng |rom gm@||@com  Fri Apr  3 00:45:58 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 2 Apr 2020 15:45:58 -0700
Subject: [R] arranging multiple lattice graphs on a page
In-Reply-To: <1297a2fd-e1a6-698d-ebf8-29c75f03e161@binghamton.edu>
References: <1297a2fd-e1a6-698d-ebf8-29c75f03e161@binghamton.edu>
Message-ID: <CAGxFJbSCUbRAsSxO4DCvrO=+gE=UKXr8EQLxwmpAdjXym8pxsA@mail.gmail.com>

See ?print.trellis, especially the "split" argument.


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Thu, Apr 2, 2020 at 2:23 PM Christopher W. Ryan <cryan at binghamton.edu> wrote:
>
> I would like to place two separate plots, one above the other, something
> like this (MWE for illustration):
>
> library(lattice)
> data(iris)
> layout(matrix(c(1,2), 2, 1, byrow = TRUE))
> with(iris, (plot(Sepal.Length ~ Petal.Length)))
> with(iris, (plot(Sepal.Length ~ Petal.Width)))
>
> but with lattice, so one of the plots can have panels. So something like
> this:
>
> library(lattice)
> data(iris)
> layout(matrix(c(1,2), 2, 1, byrow = TRUE))
> xyplot(Sepal.Length ~ Petal.Length, data = iris)
> xyplot(Sepal.Length ~ Petal.Width | Species, data = iris, layout = c(3,1))
>
> But the latter does not accomplish my goal. Appreciate any advice.
>
> Thanks.
>
> --Chris Ryan
> SUNY Upstate Medical University
> Binghamton, NY
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jen@r@@mu@ @end|ng |rom gm@||@com  Thu Apr  2 22:04:47 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Thu, 2 Apr 2020 22:04:47 +0200
Subject: [R] 
 repeat rows of matrix by number (k) in one colummatrix adding
 column j with values 1:k
In-Reply-To: <CA+8X3fV2NVMPdkdu_HhgVqwqjPPt-j2Qn0UqzbQ4z-Kz61ROSA@mail.gmail.com>
References: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
 <CAN9eD7kfBmK1pF1fOh+TgpDf3M1BA5=JDTUJN4KsHCVo6o9bpw@mail.gmail.com>
 <CA+8X3fV2NVMPdkdu_HhgVqwqjPPt-j2Qn0UqzbQ4z-Kz61ROSA@mail.gmail.com>
Message-ID: <20200402200447.GA1856@jrl.uk.to>

On 2020-04-01 15:33 +1100, Jim Lemon wrote:
> Hi Nevil,
> It's a nasty piece of work, but:

Hi!  How about this one:

    data <- c(rep(1:4, times=3), 2, 1, 3, 2)
    dimnames <- list(NULL, c("x", "y", "z", "k"))
    ncol <- length(data)/4
    M <- matrix(data=data, nrow=ncol, ncol=ncol, dimnames=dimnames)
    
    FUN <- function(x) {
      out <- matrix(rep(x[1:3], times=x[4]),
                    byrow=TRUE, nrow=x[4])
      return(cbind(out, x[4]))
    }
    newM <- do.call(rbind, apply(X=M, MARGIN=1, FUN=FUN))
    dimnames(newM) <- list(NULL, c("x", "y", "z", "k"))
    newM <- cbind(newM, "j"=sequence(M[,"k"]))
    newM

Regards,
Rasmus


From jen@r@@mu@ @end|ng |rom gm@||@com  Thu Apr  2 23:06:07 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Thu, 2 Apr 2020 23:06:07 +0200
Subject: [R] 
 repeat rows of matrix by number (k) in one colummatrix adding
 column j with values 1:k
In-Reply-To: <CA+8X3fU6g0HsKn71-8Xt1Yxcq-a4WwAFjKjDRtZSP6qyeLGoQg@mail.gmail.com>
References: <CAN9eD7=nXQP0KycwDBfoUWHUMc_Y+cPcmyRaFBWDx2ZC+OzjKQ@mail.gmail.com>
 <CAN9eD7kfBmK1pF1fOh+TgpDf3M1BA5=JDTUJN4KsHCVo6o9bpw@mail.gmail.com>
 <CA+8X3fV2NVMPdkdu_HhgVqwqjPPt-j2Qn0UqzbQ4z-Kz61ROSA@mail.gmail.com>
 <20200402200447.GA1856@jrl.uk.to>
 <CA+8X3fU6g0HsKn71-8Xt1Yxcq-a4WwAFjKjDRtZSP6qyeLGoQg@mail.gmail.com>
Message-ID: <20200402210607.GB1856@jrl.uk.to>

On 2020-04-03 07:39 +1100, Jim Lemon wrote:
| 
| Hi Rasmus,
| Very nice. The R help list is a bit like a 
| quiz show where the contestants must 
| balance the alacrity with which they press 
| their buttons with the confidence that they 
| have the correct answer. A slow motion game 
| of wits in which the prizes are 
| self-awarded.

Hi Jim,
Thank you.  I try my best to understand the 
question at hand, and thus can only hope to 
nail a right balance on this 
alacrity-confidence quiz show scale or yours 
:)  I'm glad if this could help us understand 
R better.

Regards,
Rasmus


From cry@n @end|ng |rom b|ngh@mton@edu  Fri Apr  3 01:52:27 2020
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher W. Ryan)
Date: Thu, 02 Apr 2020 19:52:27 -0400
Subject: [R] [External Email] Re: arranging multiple lattice graphs on a
 page
In-Reply-To: <CAGxFJbSCUbRAsSxO4DCvrO=+gE=UKXr8EQLxwmpAdjXym8pxsA@mail.gmail.com>
References: <1297a2fd-e1a6-698d-ebf8-29c75f03e161@binghamton.edu>
 <CAGxFJbSCUbRAsSxO4DCvrO=+gE=UKXr8EQLxwmpAdjXym8pxsA@mail.gmail.com>
Message-ID: <277B790C-87D1-4FF3-ABD6-BBD5B444D3EF@binghamton.edu>

Thanks, I'll take a look. I also finally came across gridExtra, which allows me to do it as well.

--Chris Ryan

On April 2, 2020 6:45:58 PM EDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>See ?print.trellis, especially the "split" argument.
>
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>On Thu, Apr 2, 2020 at 2:23 PM Christopher W. Ryan
><cryan at binghamton.edu> wrote:
>>
>> I would like to place two separate plots, one above the other,
>something
>> like this (MWE for illustration):
>>
>> library(lattice)
>> data(iris)
>> layout(matrix(c(1,2), 2, 1, byrow = TRUE))
>> with(iris, (plot(Sepal.Length ~ Petal.Length)))
>> with(iris, (plot(Sepal.Length ~ Petal.Width)))
>>
>> but with lattice, so one of the plots can have panels. So something
>like
>> this:
>>
>> library(lattice)
>> data(iris)
>> layout(matrix(c(1,2), 2, 1, byrow = TRUE))
>> xyplot(Sepal.Length ~ Petal.Length, data = iris)
>> xyplot(Sepal.Length ~ Petal.Width | Species, data = iris, layout =
>c(3,1))
>>
>> But the latter does not accomplish my goal. Appreciate any advice.
>>
>> Thanks.
>>
>> --Chris Ryan
>> SUNY Upstate Medical University
>> Binghamton, NY
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my Android device with K-9 Mail. Please excuse my brevity.
	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Fri Apr  3 02:18:24 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 2 Apr 2020 20:18:24 -0400
Subject: [R] [External Email] Re: arranging multiple lattice graphs on a
 page
In-Reply-To: <277B790C-87D1-4FF3-ABD6-BBD5B444D3EF@binghamton.edu>
References: <1297a2fd-e1a6-698d-ebf8-29c75f03e161@binghamton.edu>
 <CAGxFJbSCUbRAsSxO4DCvrO=+gE=UKXr8EQLxwmpAdjXym8pxsA@mail.gmail.com>
 <277B790C-87D1-4FF3-ABD6-BBD5B444D3EF@binghamton.edu>
Message-ID: <CAGx1TMCZRkdtMGbi-FD3f3P4qRZqskQPn7WiNW5y1E1=6iT7qQ@mail.gmail.com>

don't forget
library(latticeExtra)

latticeExtra provides many very useful user-level functions.

On Thu, Apr 2, 2020 at 7:52 PM Christopher W. Ryan <cryan at binghamton.edu> wrote:
>
> Thanks, I'll take a look. I also finally came across gridExtra, which allows me to do it as well.
>
> --Chris Ryan
>
> On April 2, 2020 6:45:58 PM EDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >See ?print.trellis, especially the "split" argument.
> >
> >
> >Bert Gunter
> >
> >"The trouble with having an open mind is that people keep coming along
> >and sticking things into it."
> >-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >On Thu, Apr 2, 2020 at 2:23 PM Christopher W. Ryan
> ><cryan at binghamton.edu> wrote:
> >>
> >> I would like to place two separate plots, one above the other,
> >something
> >> like this (MWE for illustration):
> >>
> >> library(lattice)
> >> data(iris)
> >> layout(matrix(c(1,2), 2, 1, byrow = TRUE))
> >> with(iris, (plot(Sepal.Length ~ Petal.Length)))
> >> with(iris, (plot(Sepal.Length ~ Petal.Width)))
> >>
> >> but with lattice, so one of the plots can have panels. So something
> >like
> >> this:
> >>
> >> library(lattice)
> >> data(iris)
> >> layout(matrix(c(1,2), 2, 1, byrow = TRUE))
> >> xyplot(Sepal.Length ~ Petal.Length, data = iris)
> >> xyplot(Sepal.Length ~ Petal.Width | Species, data = iris, layout =
> >c(3,1))
> >>
> >> But the latter does not accomplish my goal. Appreciate any advice.
> >>
> >> Thanks.
> >>
> >> --Chris Ryan
> >> SUNY Upstate Medical University
> >> Binghamton, NY
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my Android device with K-9 Mail. Please excuse my brevity.
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@|kremk @end|ng |rom gm@||@com  Fri Apr  3 04:29:24 2020
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Thu, 2 Apr 2020 21:29:24 -0500
Subject: [R] Label
Message-ID: <CAJOiR6Y8vjmt_yqoKiuuYqrs6hjC-We1KhOXZuigFiA-Eu5tvg@mail.gmail.com>

Hi all,

I have a sample of data set,

dat <- read.table(header=TRUE, text='Lab count
A 24
B 19
C 30
D 18')

barplot(dat$count, names.arg=c("A", "B", "C","D"),
        col="blue",
        ylim = c(0,30),
        ylab = "Count",
        xlab = "Grade")

I want add the number of counts at the top of each bar plot. How can I do that?
Thank you in advance


From drj|m|emon @end|ng |rom gm@||@com  Fri Apr  3 04:37:48 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 3 Apr 2020 13:37:48 +1100
Subject: [R] Label
In-Reply-To: <CAJOiR6Y8vjmt_yqoKiuuYqrs6hjC-We1KhOXZuigFiA-Eu5tvg@mail.gmail.com>
References: <CAJOiR6Y8vjmt_yqoKiuuYqrs6hjC-We1KhOXZuigFiA-Eu5tvg@mail.gmail.com>
Message-ID: <CA+8X3fXV6ozXs29=2mWo7RkaYZXqZK1ScsrWUvrpABH0j_N80A@mail.gmail.com>

Hi Val,

library(plotrix)
barpos<-barplot(dat$count, names.arg=c("A", "B", "C","D"),
         col="blue",
         ylim = c(0,30),
         ylab = "Count",
         xlab = "Grade")
barlabels(barpos,dat$count,prop=1)

Jim

On Fri, Apr 3, 2020 at 1:31 PM Val <valkremk at gmail.com> wrote:
>
> Hi all,
>
> I have a sample of data set,
>
> dat <- read.table(header=TRUE, text='Lab count
> A 24
> B 19
> C 30
> D 18')
>
> barplot(dat$count, names.arg=c("A", "B", "C","D"),
>         col="blue",
>         ylim = c(0,30),
>         ylab = "Count",
>         xlab = "Grade")
>
> I want add the number of counts at the top of each bar plot. How can I do that?
> Thank you in advance
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tr|ng @end|ng |rom gvdnet@dk  Fri Apr  3 06:43:47 2020
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 3 Apr 2020 06:43:47 +0200
Subject: [R] nls problem
In-Reply-To: K32njLQyQXsnsK32oj0izu
References: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk> K32njLQyQXsnsK32oj0izu
Message-ID: <000001d60972$77a397e0$66eac7a0$@gvdnet.dk>

Thank you ? yes indeed, on suggestion from Rui I noticed that the problem was mainly that I took the parameters from ?m? instead of coef(m) i.e

a        b        d 

-1630.71   457.68   -32.11

Instead of

          a           b           d 
-1630.70993   457.67555   -32.11469 

 

And that alone saves me. 

BW
Troels

 

Fra: William Dunlap <wdunlap at tibco.com> 
Sendt: 2. april 2020 18:50
Til: Troels Ring <tring at gvdnet.dk>
Cc: r-help mailing list <r-help at r-project.org>
Emne: Re: [R] nls problem

 

Roundoff/cancelation error: compare the following.  The first is equivalent to your function, the last to fitted().  

 

> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=2)))
            [,1]      [,2]       [,3]         [,4]       [,5]       [,6]       [,7]       [,8]       [,9]     [,10]
[1,] -0.01635965 0.1076024 0.07477337 -0.007166685 -0.1337865 -0.2851877 -0.4804638 -0.6865135 -0.9870137 -1.398027
> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=4)))
           [,1]        [,2]       [,3]       [,4]       [,5]       [,6]       [,7]      [,8]      [,9]     [,10]
[1,] -0.2196286 -0.09864071 -0.1345213 -0.2180792 -0.3463237 -0.4991861 -0.6959856 -0.903394 -1.205598 -1.618608
> with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=16)))
           [,1]        [,2]       [,3]       [,4]       [,5]      [,6]      [,7]       [,8]      [,9]     [,10]
[1,] -0.2208705 -0.09989926 -0.1357969 -0.2193638 -0.3476174 -0.500488 -0.697296 -0.9047119 -1.206926 -1.619947

 

Note that your model is linear and could be fitted with

   lm(data=aedf, Flux ~ pH + I(pH^2))

   lm(data=aedf, Flux ~ poly(pH, 2))
The latter uses a more stable parameterization.




Bill Dunlap
TIBCO Software
wdunlap tibco.com <http://tibco.com> 

 

 

On Thu, Apr 2, 2020 at 4:15 AM Troels Ring <tring at gvdnet.dk <mailto:tring at gvdnet.dk> > wrote:

Dear friends - I'm on Win10 with R 6.3.1 and have a very simple problem with
nls which apparently gives a decent fit to the parable below, even without
starting values. But when I then think I know the meaning of the three
parameters a, b, and d it goes very wrong. I guess I am again overlooking
something easy but cannot spot it.

BW
Troels Ring,

Aalborg, Denmark





aedf <- structure(list(Flux = c(-0.141256, -0.154709, -0.215247, -0.302691, 

            -0.32287, -0.511211, -0.605381, -0.813901, -1.11659, -1.76906

), pH = c(7.06273, 7.11182, 7.16182, 7.18818, 7.21455, 7.23818, 

          7.26273, 7.28455, 7.31182, 7.34364)), class = "data.frame",
row.names = c(NA, 


-10L))

m <- with(aedf,nls(Flux~a + b*pH + d*pH^2))



with(aedf,plot(pH,Flux))

with(aedf,lines(pH,fitted(m),lty=1,col="red",lwd=3))



m

# a        b        d 

# -1630.70   457.67   -32.11 



fitted(m)

# 1] -0.22087053 -0.09989926 -0.13579690 -0.21936385 -0.34761742 -0.50048799

# [7] -0.69729602 -0.90471194 -1.20692552 -1.61994657



FPG <- function(pH) -1630.70 + 457.67*pH -32.11*pH^2



FPG(aedf$pH)

# [1] -0.016359649  0.107602395  0.074773375 -0.007166685 -0.133786467

# [6] -0.285187665 -0.480463769 -0.686513537 -0.987013685 -1.398026917



# So why aren't fitted(m) and FPG(aedf$pH) not closer ("equal")?




This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com <http://www.bullguard.com> 
<http://www.bullguard.com/tracking.aspx?affiliate=bullguard <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smtp&url=/> &buyaffiliate=smt
p&url=/> 

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smtp&url=/> 

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Apr  3 11:24:56 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 3 Apr 2020 12:24:56 +0300
Subject: [R] Question about nlminb function
In-Reply-To: <BL0PR05MB4788929E27A04D79A97FB7EFBDC60@BL0PR05MB4788.namprd05.prod.outlook.com>
References: <BL0PR05MB4788929E27A04D79A97FB7EFBDC60@BL0PR05MB4788.namprd05.prod.outlook.com>
Message-ID: <20200403122456.6e2073ea@Tarkus>

On Thu, 2 Apr 2020 10:26:07 +0000
"Lim, Hwanggyu" <hlim at gmac.com> wrote:

> when n-1th estimates and nth estimates have absolute differences
> less than 0.001 for all three parameters, the iteration must stop

> I am using nlminb optimization function

nlminb function uses the PORT library. According to [1], the closest
thing PORT has to what you want is the notion of X-convergence, namely,
stopping when max(scale * abs(x - xstar))/max(scale * abs(x + xstar)) is
considered to be below control$x.tol (with xstar being supposed local
minimiser and scale being all ones by default). Using it as an absolute
stopping criterion in x requires knowledge of at least order of
magnitude of xstar, though, so it might not be feasible.

Note that ?nlminb says in the description that it is there "for
historical compatibility."

The nloptr package offers an xtol_abs option [2] that results in the
behaviour you want.

-- 
Best regards,
Ivan

[1] David M. Gay, Usage Summary for Selected Optimization Routines.
<http://web.archive.org/web/20070508140716/http://netlib.bell-labs.com/cm/cs/cstr/153.pdf>

[2]
https://nlopt.readthedocs.io/en/latest/NLopt_Reference/#stopping-criteria


From pro|jcn@@h @end|ng |rom gm@||@com  Fri Apr  3 15:48:32 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 3 Apr 2020 09:48:32 -0400
Subject: [R] Question about nlminb function
In-Reply-To: <20200403122456.6e2073ea@Tarkus>
References: <BL0PR05MB4788929E27A04D79A97FB7EFBDC60@BL0PR05MB4788.namprd05.prod.outlook.com>
 <20200403122456.6e2073ea@Tarkus>
Message-ID: <a3f6f60e-bf7f-2863-fe39-6de1a20f0a3d@gmail.com>

This thread points out the important and often overlooked
difference between "convergence" of an algorithm and "termination"
of a program. I've been pushing this button for over 30 years,
and I suspect that it will continue to come up from time to time.

Sometimes it is helpful to put termination criteria actually into
the user function. Alternatively try a different optimizer. The optimx
package wraps several, including a few for bounds constrained optimization.
Note that a new version will go up once revdeps have been checked. Dylan
Beijers noted a minor glitch if users want to "maximize".

If the termination criteria are really critical, some of the methods now
merged into optimx (Rvmmin, Rcgmin, Rtnmin) are all in R. I won't pretend
that diving in and making changes is easy, though I've tried to move the
code more and more to maintainability and transparency. If anyone is
interested in pursuing that sort of thing, I'll be willing to advise or
help as long as the requests aren't too strident.

For information, while all-R programs used to be much slower than those
in Fortran or C or C++, users should time their problems rather than just
assume a great penalty for running things completely in R. The human time
saving is generally more important.

Best, John Nash


On 2020-04-03 5:24 a.m., Ivan Krylov wrote:
> On Thu, 2 Apr 2020 10:26:07 +0000
> "Lim, Hwanggyu" <hlim at gmac.com> wrote:
> 
>> when n-1th estimates and nth estimates have absolute differences
>> less than 0.001 for all three parameters, the iteration must stop
> 
>> I am using nlminb optimization function
> 
> nlminb function uses the PORT library. According to [1], the closest
> thing PORT has to what you want is the notion of X-convergence, namely,
> stopping when max(scale * abs(x - xstar))/max(scale * abs(x + xstar)) is
> considered to be below control$x.tol (with xstar being supposed local
> minimiser and scale being all ones by default). Using it as an absolute
> stopping criterion in x requires knowledge of at least order of
> magnitude of xstar, though, so it might not be feasible.
> 
> Note that ?nlminb says in the description that it is there "for
> historical compatibility."
> 
> The nloptr package offers an xtol_abs option [2] that results in the
> behaviour you want.
>


From wdun|@p @end|ng |rom t|bco@com  Fri Apr  3 16:46:27 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 3 Apr 2020 07:46:27 -0700
Subject: [R] nls problem
In-Reply-To: <000001d60972$77a397e0$66eac7a0$@gvdnet.dk>
References: <2ce8c01d608de$f3e4d330$dbae7990$@gvdnet.dk>
 <000001d60972$77a397e0$66eac7a0$@gvdnet.dk>
Message-ID: <CAF8bMcZ20eWon4KDDT=bp==E3GPU1LUcOvRqux9eaX1xv_pmCA@mail.gmail.com>

If you will be copying the printed coefficients into your function (instead
of just using fitted() or predict()), then use dput(coef(m)) to get them
printed to full precision.

Also, if you regress on pH-7 instead of pH you don't have to worry so much
about the roundoff or cancellation error.  This is akin to what
poly(pH,degree) does.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Thu, Apr 2, 2020 at 9:44 PM Troels Ring <tring at gvdnet.dk> wrote:

> Thank you ? yes indeed, on suggestion from Rui I noticed that the problem
> was mainly that I took the parameters from ?m? instead of coef(m) i.e
>
> a        b        d
>
> -1630.71   457.68   -32.11
>
> Instead of
>
>           a           b           d
>
> -1630.70993   457.67555   -32.11469
>
>
>
> And that alone saves me.
>
> BW
> Troels
>
>
>
> *Fra:* William Dunlap <wdunlap at tibco.com>
> *Sendt:* 2. april 2020 18:50
> *Til:* Troels Ring <tring at gvdnet.dk>
> *Cc:* r-help mailing list <r-help at r-project.org>
> *Emne:* Re: [R] nls problem
>
>
>
> Roundoff/cancelation error: compare the following.  The first is
> equivalent to your function, the last to fitted().
>
>
>
> > with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=2)))
>             [,1]      [,2]       [,3]         [,4]       [,5]       [,6]
>     [,7]       [,8]       [,9]     [,10]
> [1,] -0.01635965 0.1076024 0.07477337 -0.007166685 -0.1337865 -0.2851877
> -0.4804638 -0.6865135 -0.9870137 -1.398027
> > with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=4)))
>            [,1]        [,2]       [,3]       [,4]       [,5]       [,6]
>     [,7]      [,8]      [,9]     [,10]
> [1,] -0.2196286 -0.09864071 -0.1345213 -0.2180792 -0.3463237 -0.4991861
> -0.6959856 -0.903394 -1.205598 -1.618608
> > with(aedf, t(cbind(1, pH, pH^2) %*% round(coef(m), digits=16)))
>            [,1]        [,2]       [,3]       [,4]       [,5]      [,6]
>  [,7]       [,8]      [,9]     [,10]
> [1,] -0.2208705 -0.09989926 -0.1357969 -0.2193638 -0.3476174 -0.500488
> -0.697296 -0.9047119 -1.206926 -1.619947
>
>
>
> Note that your model is linear and could be fitted with
>
>    lm(data=aedf, Flux ~ pH + I(pH^2))
>
>    lm(data=aedf, Flux ~ poly(pH, 2))
> The latter uses a more stable parameterization.
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
>
>
>
> On Thu, Apr 2, 2020 at 4:15 AM Troels Ring <tring at gvdnet.dk> wrote:
>
> Dear friends - I'm on Win10 with R 6.3.1 and have a very simple problem
> with
> nls which apparently gives a decent fit to the parable below, even without
> starting values. But when I then think I know the meaning of the three
> parameters a, b, and d it goes very wrong. I guess I am again overlooking
> something easy but cannot spot it.
>
> BW
> Troels Ring,
>
> Aalborg, Denmark
>
>
>
>
>
> aedf <- structure(list(Flux = c(-0.141256, -0.154709, -0.215247,
> -0.302691,
>
>             -0.32287, -0.511211, -0.605381, -0.813901, -1.11659, -1.76906
>
> ), pH = c(7.06273, 7.11182, 7.16182, 7.18818, 7.21455, 7.23818,
>
>           7.26273, 7.28455, 7.31182, 7.34364)), class = "data.frame",
> row.names = c(NA,
>
>
> -10L))
>
> m <- with(aedf,nls(Flux~a + b*pH + d*pH^2))
>
>
>
> with(aedf,plot(pH,Flux))
>
> with(aedf,lines(pH,fitted(m),lty=1,col="red",lwd=3))
>
>
>
> m
>
> # a        b        d
>
> # -1630.70   457.67   -32.11
>
>
>
> fitted(m)
>
> # 1] -0.22087053 -0.09989926 -0.13579690 -0.21936385 -0.34761742
> -0.50048799
>
> # [7] -0.69729602 -0.90471194 -1.20692552 -1.61994657
>
>
>
> FPG <- function(pH) -1630.70 + 457.67*pH -32.11*pH^2
>
>
>
> FPG(aedf$pH)
>
> # [1] -0.016359649  0.107602395  0.074773375 -0.007166685 -0.133786467
>
> # [6] -0.285187665 -0.480463769 -0.686513537 -0.987013685 -1.398026917
>
>
>
> # So why aren't fitted(m) and FPG(aedf$pH) not closer ("equal")?
>
>
>
>
> This email has been scanned by BullGuard antivirus protection.
> For more info visit www.bullguard.com
> <
> http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
> p&url=/>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
> This email has been scanned by BullGuard antivirus protection.
> For more info visit www.bullguard.com
> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smtp&url=/>
>

	[[alternative HTML version deleted]]


From 538280 @end|ng |rom gm@||@com  Fri Apr  3 17:45:20 2020
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Fri, 3 Apr 2020 09:45:20 -0600
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <20200331170009.6240febb@Tarkus>
 <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
Message-ID: <CAFEqCdy+GYz5ZXD16tjLR2ipnO46uY=yoYYmM+0jw-xKuvL7DA@mail.gmail.com>

As others have pointed out, ncol calls the length function, so you are
pretty safe in terms of output of getting the same result when applied
to the results of functions like read.csv (there will be a big
difference if you ever apply those functions to a matrix or some other
data structures).

One thing that I have not seen yet is a comparison on timing, so here goes:

> library(microbenchmark)
> microbenchmark(
+ length = length(iris),
+ ncol = ncol(iris)
+ )
Unit: nanoseconds
   expr  min   lq mean median   uq   max neval
 length  700  750  869    800  800  7400   100
   ncol 2400 2500 2981   2600 2700 31900   100

So ncol takes about 3 times as long to run as length on the iris data
frame (5 columns), you can rerun the above code with data frames more
the size that you will be using to see if that makes any difference.
But also notice that the units are nanoseconds, so the median time for
ncol to run is less than the time it takes light to travel a kilometer
in a vacuum, or about the time it takes light to go 1/3 of a mile
through a fiber optic cable (en.wikipedia.org/wiki/Microsecond).  If
this is used as part of a simulation or other repeated procedure and
it is done one million times then you will add about 2 seconds to the
overall run.  If this is just part of code where length/ncol will be
called fewer than 10 times then nobody is going to notice.

So the trade-off of moving from length to ncol is a slight decrease in
speed for an increase of readability.  I think that I would go with
the readability myself.

On Tue, Mar 31, 2020 at 8:11 AM Ivan Calandra <calandra at rgzm.de> wrote:
>
> Thanks Ivan for the answer.
>
> So it confirms my first thought that these two functions are equivalent
> when applied to a "simple" data.frame.
>
> The reason I was asking is because I have gotten used to use length() in
> my scripts. It works perfectly and I understand it easily. But to be
> honest, ncol() is more intuitive to most users (especially the novice)
> so I was thinking about switching to using this function instead (all my
> data.frames are created from read.csv() or similar functions so there
> should not be any issue). But before doing that, I want to be sure that
> it is not going to create unexpected results.
>
> Thank you,
> Ivan
>
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
>
> On 31/03/2020 16:00, Ivan Krylov wrote:
> > On Tue, 31 Mar 2020 14:47:54 +0200
> > Ivan Calandra <calandra at rgzm.de> wrote:
> >
> >> On a simple data.frame (i.e. each element is a vector), ncol() and
> >> length() will give the same result.
> >> Are they just equivalent on such objects, or are they differences in
> >> some cases?
> > I am not aware of any exceptions to ncol(dataframe)==length(dataframe)
> > (in fact, ncol(x) is dim(x)[2L] and ?dim says that dim(dataframe)
> > returns c(length(attr(dataframe, 'row.names')), length(dataframe))), but
> > watch out for AsIs columns which can have columns of their own:
> >
> > x <- data.frame(I(volcano))
> > dim(x)
> > # [1] 87  1
> > length(x)
> > # [1] 1
> > dim(x[,1])
> > # [1] 87 61
> >
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From v@|kremk @end|ng |rom gm@||@com  Fri Apr  3 20:19:22 2020
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 3 Apr 2020 13:19:22 -0500
Subject: [R] Label
In-Reply-To: <CA+8X3fXV6ozXs29=2mWo7RkaYZXqZK1ScsrWUvrpABH0j_N80A@mail.gmail.com>
References: <CAJOiR6Y8vjmt_yqoKiuuYqrs6hjC-We1KhOXZuigFiA-Eu5tvg@mail.gmail.com>
 <CA+8X3fXV6ozXs29=2mWo7RkaYZXqZK1ScsrWUvrpABH0j_N80A@mail.gmail.com>
Message-ID: <CAJOiR6Z8jjcYdwsuNM4rpkJxr24q_oSaabR3creuf6drXcnfyw@mail.gmail.com>

Thank you Jim,

Is it possible to format the label box? The labels(numbers) are
surrounded by a big square and wanted to remove it. I just want
display only the number.  I searched up the documentation  for
"barlabels" and there is no such example

barlabels(xpos,ypos,labels=NULL,cex=1,prop=0.5,miny=0,offset=0,...)

Thank you.

On Thu, Apr 2, 2020 at 9:38 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Val,
>
> library(plotrix)
> barpos<-barplot(dat$count, names.arg=c("A", "B", "C","D"),
>          col="blue",
>          ylim = c(0,30),
>          ylab = "Count",
>          xlab = "Grade")
> barlabels(barpos,dat$count,prop=1)
>
> Jim
>
> On Fri, Apr 3, 2020 at 1:31 PM Val <valkremk at gmail.com> wrote:
> >
> > Hi all,
> >
> > I have a sample of data set,
> >
> > dat <- read.table(header=TRUE, text='Lab count
> > A 24
> > B 19
> > C 30
> > D 18')
> >
> > barplot(dat$count, names.arg=c("A", "B", "C","D"),
> >         col="blue",
> >         ylim = c(0,30),
> >         ylab = "Count",
> >         xlab = "Grade")
> >
> > I want add the number of counts at the top of each bar plot. How can I do that?
> > Thank you in advance
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From ycd|ng @end|ng |rom coh@org  Fri Apr  3 20:57:28 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Fri, 3 Apr 2020 18:57:28 +0000
Subject: [R] a simple reshape
Message-ID: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>

Hi R users,

I want to do a data reshape from long to wide, I thought it was easy using tidyverse spread function, but it did not work well. Can you help me?

Thank you,

Ding

test1 data frame is long file and test2 is the wide file I want to get

test1 <- data.frame (vntr1=c("v1","v1", "v2","v2","v2","v2"),
                     val =c(0.98,0.02, 0.59,0.12,0.11,0.04))

test2  <- data.frame(vntr1=c("v1","v2"),
                     a1 =c(0.98, 0.5693),
                     a2 = c(0.02, 0.12),
                     a3 =c(NA, 0.11),
                     a4=c(NA, 0.04))

the following code does not work
test2 <-test1 %>%spread(vntr1, val)

 Error: Each row of output must be identified by a unique combination of keys.
Keys are shared for 6 rows:
* 1, 2
* 3, 4, 5, 6
Do you need to create unique ID with tibble::rowid_to_column()?
Call `rlang::last_error()` to see a backtrace 

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Apr  3 21:08:01 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 3 Apr 2020 20:08:01 +0100
Subject: [R] a simple reshape
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>
Message-ID: <4f017a7b-e5ed-a954-e252-ba03d34f08bc@sapo.pt>

Hello,

It's a bit more complicated than you have coded it.
I will use pivot_wider, it's now the natural way of doing it.


test1 %>%
   group_by(vntr1) %>%
   mutate(group = row_number()) %>%
   ungroup() %>%
   pivot_wider(
     id_cols ="vntr1",
     names_from = "group",
     names_prefix = "a",
     values_from = "val"
   )


Hope this helps,

Rui Barradas

?s 19:57 de 03/04/20, Yuan Chun Ding escreveu:
> Hi R users,
> 
> I want to do a data reshape from long to wide, I thought it was easy using tidyverse spread function, but it did not work well. Can you help me?
> 
> Thank you,
> 
> Ding
> 
> test1 data frame is long file and test2 is the wide file I want to get
> 
> test1 <- data.frame (vntr1=c("v1","v1", "v2","v2","v2","v2"),
>                       val =c(0.98,0.02, 0.59,0.12,0.11,0.04))
> 
> test2  <- data.frame(vntr1=c("v1","v2"),
>                       a1 =c(0.98, 0.5693),
>                       a2 = c(0.02, 0.12),
>                       a3 =c(NA, 0.11),
>                       a4=c(NA, 0.04))
> 
> the following code does not work
> test2 <-test1 %>%spread(vntr1, val)
> 
>   Error: Each row of output must be identified by a unique combination of keys.
> Keys are shared for 6 rows:
> * 1, 2
> * 3, 4, 5, 6
> Do you need to create unique ID with tibble::rowid_to_column()?
> Call `rlang::last_error()` to see a backtrace
> 
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
> 
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

From ycd|ng @end|ng |rom coh@org  Fri Apr  3 21:17:54 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Fri, 3 Apr 2020 19:17:54 +0000
Subject: [R] a simple reshape
In-Reply-To: <4f017a7b-e5ed-a954-e252-ba03d34f08bc@sapo.pt>
References: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>,
 <4f017a7b-e5ed-a954-e252-ba03d34f08bc@sapo.pt>
Message-ID: <A86C6438FB909A409DDEF926277952B6113D8111@PPWEXCH2KX14.coh.org>

Hi Rui,

Thanks a lot,

i got this error, I have library(tidyverse).

Ding

 Error in pivot_wider(., id_cols = "vntr1", names_from = "group", names_prefix = "a",  : 
  could not find function "pivot_wider" 
________________________________________
From: Rui Barradas [ruipbarradas at sapo.pt]
Sent: Friday, April 3, 2020 12:08 PM
To: Yuan Chun Ding; r-help mailing list
Subject: Re: [R] a simple reshape

Hello,

It's a bit more complicated than you have coded it.
I will use pivot_wider, it's now the natural way of doing it.


test1 %>%
   group_by(vntr1) %>%
   mutate(group = row_number()) %>%
   ungroup() %>%
   pivot_wider(
     id_cols ="vntr1",
     names_from = "group",
     names_prefix = "a",
     values_from = "val"
   )


Hope this helps,

Rui Barradas

?s 19:57 de 03/04/20, Yuan Chun Ding escreveu:
> Hi R users,
>
> I want to do a data reshape from long to wide, I thought it was easy using tidyverse spread function, but it did not work well. Can you help me?
>
> Thank you,
>
> Ding
>
> test1 data frame is long file and test2 is the wide file I want to get
>
> test1 <- data.frame (vntr1=c("v1","v1", "v2","v2","v2","v2"),
>                       val =c(0.98,0.02, 0.59,0.12,0.11,0.04))
>
> test2  <- data.frame(vntr1=c("v1","v2"),
>                       a1 =c(0.98, 0.5693),
>                       a2 = c(0.02, 0.12),
>                       a3 =c(NA, 0.11),
>                       a4=c(NA, 0.04))
>
> the following code does not work
> test2 <-test1 %>%spread(vntr1, val)
>
>   Error: Each row of output must be identified by a unique combination of keys.
> Keys are shared for 6 rows:
> * 1, 2
> * 3, 4, 5, 6
> Do you need to create unique ID with tibble::rowid_to_column()?
> Call `rlang::last_error()` to see a backtrace
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!5JdwuHJ-WxfEwZqhEKnPmaGJJqCVHrJXr2iVwpKZ8UBKwdjSGRA4oSGZ-U4t$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!5JdwuHJ-WxfEwZqhEKnPmaGJJqCVHrJXr2iVwpKZ8UBKwdjSGRA4oR2DUtwI$
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Apr  3 21:26:00 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 03 Apr 2020 12:26:00 -0700
Subject: [R] a simple reshape
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113D8111@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>,
 <4f017a7b-e5ed-a954-e252-ba03d34f08bc@sapo.pt>
 <A86C6438FB909A409DDEF926277952B6113D8111@PPWEXCH2KX14.coh.org>
Message-ID: <03AF5FC4-B790-4315-95CE-453A613DC879@dcn.davis.ca.us>

Update your packages. If you still have issues post the output of sessionInfo().

On April 3, 2020 12:17:54 PM PDT, Yuan Chun Ding <ycding at coh.org> wrote:
>Hi Rui,
>
>Thanks a lot,
>
>i got this error, I have library(tidyverse).
>
>Ding
>
>Error in pivot_wider(., id_cols = "vntr1", names_from = "group",
>names_prefix = "a",  : 
>  could not find function "pivot_wider" 
>________________________________________
>From: Rui Barradas [ruipbarradas at sapo.pt]
>Sent: Friday, April 3, 2020 12:08 PM
>To: Yuan Chun Ding; r-help mailing list
>Subject: Re: [R] a simple reshape
>
>Hello,
>
>It's a bit more complicated than you have coded it.
>I will use pivot_wider, it's now the natural way of doing it.
>
>
>test1 %>%
>   group_by(vntr1) %>%
>   mutate(group = row_number()) %>%
>   ungroup() %>%
>   pivot_wider(
>     id_cols ="vntr1",
>     names_from = "group",
>     names_prefix = "a",
>     values_from = "val"
>   )
>
>
>Hope this helps,
>
>Rui Barradas
>
>?s 19:57 de 03/04/20, Yuan Chun Ding escreveu:
>> Hi R users,
>>
>> I want to do a data reshape from long to wide, I thought it was easy
>using tidyverse spread function, but it did not work well. Can you help
>me?
>>
>> Thank you,
>>
>> Ding
>>
>> test1 data frame is long file and test2 is the wide file I want to
>get
>>
>> test1 <- data.frame (vntr1=c("v1","v1", "v2","v2","v2","v2"),
>>                       val =c(0.98,0.02, 0.59,0.12,0.11,0.04))
>>
>> test2  <- data.frame(vntr1=c("v1","v2"),
>>                       a1 =c(0.98, 0.5693),
>>                       a2 = c(0.02, 0.12),
>>                       a3 =c(NA, 0.11),
>>                       a4=c(NA, 0.04))
>>
>> the following code does not work
>> test2 <-test1 %>%spread(vntr1, val)
>>
>>   Error: Each row of output must be identified by a unique
>combination of keys.
>> Keys are shared for 6 rows:
>> * 1, 2
>> * 3, 4, 5, 6
>> Do you need to create unique ID with tibble::rowid_to_column()?
>> Call `rlang::last_error()` to see a backtrace
>>
>>
>----------------------------------------------------------------------
>> ------------------------------------------------------------
>> -SECURITY/CONFIDENTIALITY WARNING-
>>
>> This message and any attachments are intended solely for the
>individual or entity to which they are addressed. This communication
>may contain information that is privileged, confidential, or exempt
>from disclosure under applicable law (e.g., personal health
>information, research data, financial information). Because this e-mail
>has been sent without encryption, individuals other than the intended
>recipient may be able to view the information, forward it to others or
>tamper with the information without the knowledge or consent of the
>sender. If you are not the intended recipient, or the employee or
>person responsible for delivering the message to the intended
>recipient, any dissemination, distribution or copying of the
>communication is strictly prohibited. If you received the communication
>in error, please notify the sender immediately by replying to this
>message and deleting the message and any accompanying files from your
>system. If, due to the security risks, you do not wish to receive
>further communications via e-mail, please reply to this message and
>inform the sender that you do not wish to receive further e-mail from
>the sender. (LCP301)
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>
>https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!5JdwuHJ-WxfEwZqhEKnPmaGJJqCVHrJXr2iVwpKZ8UBKwdjSGRA4oSGZ-U4t$
>> PLEASE do read the posting guide
>https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!5JdwuHJ-WxfEwZqhEKnPmaGJJqCVHrJXr2iVwpKZ8UBKwdjSGRA4oR2DUtwI$
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Apr  3 23:30:07 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 3 Apr 2020 22:30:07 +0100
Subject: [R] a simple reshape
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113D8111@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>
 <4f017a7b-e5ed-a954-e252-ba03d34f08bc@sapo.pt>
 <A86C6438FB909A409DDEF926277952B6113D8111@PPWEXCH2KX14.coh.org>
Message-ID: <b2c4e697-a4f9-7952-fe04-56bfbec3769f@sapo.pt>

Hello,

That function is new (tidyr 1.0.0) and exists in

packageVersion('tidyverse')
#[1] ?1.3.0?
packageVersion('tidyr')
#[1] ?1.0.2?

 From the help page ?pivot_wider:

Details

pivot_wider() is an updated approach to spread(), designed to be both 
simpler to use and to handle more use cases. We recommend you use 
pivot_wider() for new code; spread() isn't going away but is no longer 
under active development.


So you must update your packages.

Hope this helps,

Rui Barradas


?s 20:17 de 03/04/20, Yuan Chun Ding escreveu:
> Hi Rui,
> 
> Thanks a lot,
> 
> i got this error, I have library(tidyverse).
> 
> Ding
> 
>   Error in pivot_wider(., id_cols = "vntr1", names_from = "group", names_prefix = "a",  :
>    could not find function "pivot_wider"
> ________________________________________
> From: Rui Barradas [ruipbarradas at sapo.pt]
> Sent: Friday, April 3, 2020 12:08 PM
> To: Yuan Chun Ding; r-help mailing list
> Subject: Re: [R] a simple reshape
> 
> Hello,
> 
> It's a bit more complicated than you have coded it.
> I will use pivot_wider, it's now the natural way of doing it.
> 
> 
> test1 %>%
>     group_by(vntr1) %>%
>     mutate(group = row_number()) %>%
>     ungroup() %>%
>     pivot_wider(
>       id_cols ="vntr1",
>       names_from = "group",
>       names_prefix = "a",
>       values_from = "val"
>     )
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 19:57 de 03/04/20, Yuan Chun Ding escreveu:
>> Hi R users,
>>
>> I want to do a data reshape from long to wide, I thought it was easy using tidyverse spread function, but it did not work well. Can you help me?
>>
>> Thank you,
>>
>> Ding
>>
>> test1 data frame is long file and test2 is the wide file I want to get
>>
>> test1 <- data.frame (vntr1=c("v1","v1", "v2","v2","v2","v2"),
>>                        val =c(0.98,0.02, 0.59,0.12,0.11,0.04))
>>
>> test2  <- data.frame(vntr1=c("v1","v2"),
>>                        a1 =c(0.98, 0.5693),
>>                        a2 = c(0.02, 0.12),
>>                        a3 =c(NA, 0.11),
>>                        a4=c(NA, 0.04))
>>
>> the following code does not work
>> test2 <-test1 %>%spread(vntr1, val)
>>
>>    Error: Each row of output must be identified by a unique combination of keys.
>> Keys are shared for 6 rows:
>> * 1, 2
>> * 3, 4, 5, 6
>> Do you need to create unique ID with tibble::rowid_to_column()?
>> Call `rlang::last_error()` to see a backtrace
>>
>> ----------------------------------------------------------------------
>> ------------------------------------------------------------
>> -SECURITY/CONFIDENTIALITY WARNING-
>>
>> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!5JdwuHJ-WxfEwZqhEKnPmaGJJqCVHrJXr2iVwpKZ8UBKwdjSGRA4oSGZ-U4t$
>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!5JdwuHJ-WxfEwZqhEKnPmaGJJqCVHrJXr2iVwpKZ8UBKwdjSGRA4oR2DUtwI$
>> and provide commented, minimal, self-contained, reproducible code.
>>

From drj|m|emon @end|ng |rom gm@||@com  Fri Apr  3 23:36:25 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 4 Apr 2020 08:36:25 +1100
Subject: [R] Label
In-Reply-To: <CAJOiR6Z8jjcYdwsuNM4rpkJxr24q_oSaabR3creuf6drXcnfyw@mail.gmail.com>
References: <CAJOiR6Y8vjmt_yqoKiuuYqrs6hjC-We1KhOXZuigFiA-Eu5tvg@mail.gmail.com>
 <CA+8X3fXV6ozXs29=2mWo7RkaYZXqZK1ScsrWUvrpABH0j_N80A@mail.gmail.com>
 <CAJOiR6Z8jjcYdwsuNM4rpkJxr24q_oSaabR3creuf6drXcnfyw@mail.gmail.com>
Message-ID: <CA+8X3fUEjFnTWZf_DwxOhwrAMViD3pZjHg4OP47U_nCN9wc9CA@mail.gmail.com>

Hi Val,
A good suggestion. The revised code is below and it will be in the
next version of plotrix.

barlabels<-function(xpos,ypos,labels=NULL,cex=1,prop=0.5,miny=0,offset=0,
 nobox=FALSE,...) {

 if(is.data.frame(ypos)) ypos<-as.matrix(ypos)
 if(is.null(labels)) labels<-ypos
 # usually don't want to display zero labels
 display<-ypos > miny
 if(is.matrix(ypos)) {
  # prop is within the scope of the current environment
  cumcenter<-function(x,pos) return(cumsum(x)-x*prop)
  stacked<-length(xpos) < length(ypos)
  if(stacked) {
   # replicate the x positions one by one, but the offsets group by group
   xpos<-rep(xpos,each=length(ypos)/length(xpos))+
    rep(c(-offset,offset),length(ypos)/(2*length(xpos)))
   ypos<-apply(ypos,2,cumcenter)
  }
  else ypos<-ypos*prop
 }
 else ypos<-ypos*prop
 # allow labels to extend beyond the plot area
 par(xpd=TRUE)
 if(nobox) text(xpos[display],ypos[display],labels[display],cex=cex,...)
 else boxed.labels(xpos[display],ypos[display],labels[display],cex=cex,...)
 par(xpd=FALSE)
}

Just set "nobox" to TRUE. You can add a "col=" argument at the end and
it will be passed to "text".

Jim

On Sat, Apr 4, 2020 at 5:20 AM Val <valkremk at gmail.com> wrote:
>
> Thank you Jim,
>
> Is it possible to format the label box? The labels(numbers) are
> surrounded by a big square and wanted to remove it. I just want
> display only the number.  I searched up the documentation  for
> "barlabels" and there is no such example
>
> barlabels(xpos,ypos,labels=NULL,cex=1,prop=0.5,miny=0,offset=0,...)
>
> Thank you.
>
> On Thu, Apr 2, 2020 at 9:38 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Val,
> >
> > library(plotrix)
> > barpos<-barplot(dat$count, names.arg=c("A", "B", "C","D"),
> >          col="blue",
> >          ylim = c(0,30),
> >          ylab = "Count",
> >          xlab = "Grade")
> > barlabels(barpos,dat$count,prop=1)
> >
> > Jim
> >
> > On Fri, Apr 3, 2020 at 1:31 PM Val <valkremk at gmail.com> wrote:
> > >
> > > Hi all,
> > >
> > > I have a sample of data set,
> > >
> > > dat <- read.table(header=TRUE, text='Lab count
> > > A 24
> > > B 19
> > > C 30
> > > D 18')
> > >
> > > barplot(dat$count, names.arg=c("A", "B", "C","D"),
> > >         col="blue",
> > >         ylim = c(0,30),
> > >         ylab = "Count",
> > >         xlab = "Grade")
> > >
> > > I want add the number of counts at the top of each bar plot. How can I do that?
> > > Thank you in advance
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Fri Apr  3 23:44:03 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 4 Apr 2020 08:44:03 +1100
Subject: [R] a simple reshape
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>
Message-ID: <CA+8X3fWdhT2yW4pYT3AJj2SowJAdY5KropOd5cnro2w=VedZeA@mail.gmail.com>

Hi Ding,
If you are still having trouble, perhaps:

library(prettyR)
stretch_df(test1,"vntr1","val")

Jim

On Sat, Apr 4, 2020 at 5:58 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Hi R users,
>
> I want to do a data reshape from long to wide, I thought it was easy using tidyverse spread function, but it did not work well. Can you help me?
>
> Thank you,
>
> Ding
>
> test1 data frame is long file and test2 is the wide file I want to get
>
> test1 <- data.frame (vntr1=c("v1","v1", "v2","v2","v2","v2"),
>                      val =c(0.98,0.02, 0.59,0.12,0.11,0.04))
>
> test2  <- data.frame(vntr1=c("v1","v2"),
>                      a1 =c(0.98, 0.5693),
>                      a2 = c(0.02, 0.12),
>                      a3 =c(NA, 0.11),
>                      a4=c(NA, 0.04))
>
> the following code does not work
> test2 <-test1 %>%spread(vntr1, val)
>
>  Error: Each row of output must be identified by a unique combination of keys.
> Keys are shared for 6 rows:
> * 1, 2
> * 3, 4, 5, 6
> Do you need to create unique ID with tibble::rowid_to_column()?
> Call `rlang::last_error()` to see a backtrace
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sat Apr  4 12:10:48 2020
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sat, 4 Apr 2020 15:40:48 +0530
Subject: [R] a simple reshape
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>
Message-ID: <CADfFDC56GLwW45BN=jmHpStVS-CHbLvTWBMe3q3S=QVtdS1D-w@mail.gmail.com>

Hi,

[For a non-tidyverse solution:]

Your problem is ambiguous without a 'time' variable; e.g., why should
the answer not be

test2  <- data.frame(vntr1=c("v1","v2"),
                     a1 =c(NA, 0.5693),
                     a2 = c(0.02, 0.12),
                     a3 =c(NA, 0.11),
                     a4=c(0.98, 0.04))

? If you do add an artificial time variable, say using

test1 <- transform(test1,
    time = unsplit(lapply(split(vntr1, vntr1), seq_along), vntr1))

to give

> test1
 vntr1  val time
1    v1 0.98    1
2    v1 0.02    2
3    v2 0.59    1
4    v2 0.12    2
5    v2 0.11    3
6    v2 0.04    4

then either reshape() or dcast() easily gives you what you want:

> reshape(test1, v.names = "val", idvar = "vntr1", direction = "wide", timevar = "time")
 vntr1 val.1 val.2 val.3 val.4
1    v1  0.98  0.02    NA    NA
3    v2  0.59  0.12  0.11  0.04

> reshape2::dcast(test1, vntr1 ~ time, value.var="val")
 vntr1    1    2    3    4
1    v1 0.98 0.02   NA   NA
2    v2 0.59 0.12 0.11 0.04

-Deepayan

On Sat, Apr 4, 2020 at 12:28 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Hi R users,
>
> I want to do a data reshape from long to wide, I thought it was easy using tidyverse spread function, but it did not work well. Can you help me?
>
> Thank you,
>
> Ding
>
> test1 data frame is long file and test2 is the wide file I want to get
>
> test1 <- data.frame (vntr1=c("v1","v1", "v2","v2","v2","v2"),
>                      val =c(0.98,0.02, 0.59,0.12,0.11,0.04))
>
> test2  <- data.frame(vntr1=c("v1","v2"),
>                      a1 =c(0.98, 0.5693),
>                      a2 = c(0.02, 0.12),
>                      a3 =c(NA, 0.11),
>                      a4=c(NA, 0.04))
>
> the following code does not work
> test2 <-test1 %>%spread(vntr1, val)
>
>  Error: Each row of output must be identified by a unique combination of keys.
> Keys are shared for 6 rows:
> * 1, 2
> * 3, 4, 5, 6
> Do you need to create unique ID with tibble::rowid_to_column()?
> Call `rlang::last_error()` to see a backtrace
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From megh@@j456 @end|ng |rom gm@||@com  Thu Apr  2 00:46:47 2020
From: megh@@j456 @end|ng |rom gm@||@com (Megha Joshi)
Date: Wed, 1 Apr 2020 17:46:47 -0500
Subject: [R] [R-pkgs] simhelpers: Helper Functions for Simulation Studies
Message-ID: <CAC1PbYRmsFor1_5bf9reOpBQHrq3qNP7B9PVsZLx9t=ZDZgPmw@mail.gmail.com>

Hi :)

Hope you are doing well!

I have been working on an R package that has helper functions for
simulation studies. First version of the package is on CRAN now ?
Here is the website for the package:
https://meghapsimatrix.github.io/simhelpers/index.html

Hope it is useful to you for running simulations in R :)

Hope you are safe and healthy!!


-- 
Megha Joshi
(she/her/hers)
meghapsimatrix.com
Doctoral student
Quantitative Methods
*The University of Texas at Austin*

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From or|@ndomontre@| @end|ng |rom y@hoo@com  Thu Apr  2 18:27:48 2020
From: or|@ndomontre@| @end|ng |rom y@hoo@com (Orlando Ramirez)
Date: Thu, 2 Apr 2020 16:27:48 +0000 (UTC)
Subject: [R] error:  Error in if (any(DF[A, ] != DF[B,
 ])) { :    missing value where TRUE/FALSE needed
References: <1144438423.1020445.1585844868171.ref@mail.yahoo.com>
Message-ID: <1144438423.1020445.1585844868171@mail.yahoo.com>

Hello this is my code and then i show you the result...please how i reapir this error...thanks lot off
library(igraph)
#################################################
# Lecture du fichier 0. edges
MyGraphData <- read.graph ( file = "0.edges" , directed = FALSE )
# Nombre de noeuds dans le graphe
Nb_noeuds <- vcount ( MyGraphData )
Nb_noeuds
# [1] 348
# Pour enlever les doublons et les boucles dans le graphe
MyGraphData <- simplify ( MyGraphData , remove.multiple = TRUE , remove.loops = TRUE )
# Nombre d ' arr?tes dans le graphe
Nb_arretes <- ecount ( MyGraphData )
Nb_arretes
# [1] 2519
# Structure hi?rarchique des noeuds
cluster <- edge.betweenness.community ( MyGraphData )
cluster
# > cluster
# # les noeuds dans chaque communaut?
# IGRAPH clustering edge betweenness, groups: 51, mod: 0.42
# + groups:
#?? $`1`
# [1] 1
# 
# $`2`
# [1]?? 2? 25? 49? 54? 58? 74? 81? 93? 95 102 127 131 181 188 192 195 197 205 243 250 255 267 300
# [24] 301 303 331 347
# 
# $`3`
# [1]?? 3? 15? 18? 20? 21? 29? 33? 42? 45? 94 112 113 116 117 138 139 141 145 150 152 163 168 175
# [24] 215 217 221 227 244 263 280 290 294 306 311 313 327 334 338 344
# + ... omitted several groups/vertices
# fc <- cluster_fast_greedy(MyGraphData)
#? plot_dendrogram(fc)
# Visualisation
plot_dendrogram (cluster? ) 
Error in if (any(DF[A, ] != DF[B, ])) { : 
? missing value where TRUE/FALSE needed



? ???????????????????????????????????  ?
????  ? ?
	[[alternative HTML version deleted]]


From @nj@|ygmenon9 @end|ng |rom gm@||@com  Fri Apr  3 02:45:30 2020
From: @nj@|ygmenon9 @end|ng |rom gm@||@com (anjaly menon)
Date: Fri, 3 Apr 2020 12:45:30 +1200
Subject: [R] MAP HELP
Message-ID: <CAJxCbFY=LfymhXhK3=+iQo4-WzeW35b4EnVn728q2BCTN8ortA@mail.gmail.com>

Hello,

I have a dataset with latitude, longitude, station serial numbers of my
fish samples collected from the Barents Sea. I need to plot out from where
the samples are coming from using the latitude and longitude and the range
of body sizes (length of fishes) using R.
I installed packages like sp, maptools, mapdata, rgdal,shape, maps. Is
there any code to do this task? Please let me know.

Cheers

-- 
*Anjaly Govindankutty Menon*
Erasmus Mundus Scholar
Universite de Bordeaux, France

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sat Apr  4 22:30:15 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Sat, 4 Apr 2020 14:30:15 -0600
Subject: [R] MAP HELP
In-Reply-To: <CAJxCbFY=LfymhXhK3=+iQo4-WzeW35b4EnVn728q2BCTN8ortA@mail.gmail.com>
References: <CAJxCbFY=LfymhXhK3=+iQo4-WzeW35b4EnVn728q2BCTN8ortA@mail.gmail.com>
Message-ID: <CACxE24kt=CTY8U91SqYci6GmBNcgLRe6BN5pfsmJD0Esj6S9GQ@mail.gmail.com>

Hi!

What kind of a map are you looking for?  Google Earth, Open Street map or
something else, please?

Is your data in a data frame?

Thanks,
Erin


On Sat, Apr 4, 2020 at 2:10 PM anjaly menon <anjalygmenon9 at gmail.com> wrote:

> Hello,
>
> I have a dataset with latitude, longitude, station serial numbers of my
> fish samples collected from the Barents Sea. I need to plot out from where
> the samples are coming from using the latitude and longitude and the range
> of body sizes (length of fishes) using R.
> I installed packages like sp, maptools, mapdata, rgdal,shape, maps. Is
> there any code to do this task? Please let me know.
>
> Cheers
>
> --
> *Anjaly Govindankutty Menon*
> Erasmus Mundus Scholar
> Universite de Bordeaux, France
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sun Apr  5 00:53:52 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 5 Apr 2020 08:53:52 +1000
Subject: [R] MAP HELP
In-Reply-To: <CAJxCbFY=LfymhXhK3=+iQo4-WzeW35b4EnVn728q2BCTN8ortA@mail.gmail.com>
References: <CAJxCbFY=LfymhXhK3=+iQo4-WzeW35b4EnVn728q2BCTN8ortA@mail.gmail.com>
Message-ID: <CA+8X3fXG=W0KLLe1p0DB99vu5k4Sw3kt=LEeK_vrXjwfFte75w@mail.gmail.com>

Hi Anjaly,
Here is a very simple way to plot something like this. There are many
ways to do this and of course easier ways to automate the placement of
the points and labels.

library(maps)
library(plotrix)
map("world",xlim=c(13.548932,53.407331),ylim=c(70.824046,78.764113))
box()
segments(20,76,25,77)
points(25,77,pch=19)
boxed.labels(20,76,"Kraken\nn=2\nlat=20 lon=76\nlength=10-20M")
segments(40,72,51,71)
points(51,71,pch=19)
boxed.labels(40,72,"Herring\nn=20000\nlat=51 lon=70\nlength=15-20cm")

Jim

On Sun, Apr 5, 2020 at 6:10 AM anjaly menon <anjalygmenon9 at gmail.com> wrote:
>
> Hello,
>
> I have a dataset with latitude, longitude, station serial numbers of my
> fish samples collected from the Barents Sea. I need to plot out from where
> the samples are coming from using the latitude and longitude and the range
> of body sizes (length of fishes) using R.
> I installed packages like sp, maptools, mapdata, rgdal,shape, maps. Is
> there any code to do this task? Please let me know.
>
> Cheers
>
> --
> *Anjaly Govindankutty Menon*
> Erasmus Mundus Scholar
> Universite de Bordeaux, France
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ycd|ng @end|ng |rom coh@org  Sun Apr  5 01:48:29 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Sat, 4 Apr 2020 23:48:29 +0000
Subject: [R] a simple reshape
In-Reply-To: <CADfFDC56GLwW45BN=jmHpStVS-CHbLvTWBMe3q3S=QVtdS1D-w@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113D80E4@PPWEXCH2KX14.coh.org>,
 <CADfFDC56GLwW45BN=jmHpStVS-CHbLvTWBMe3q3S=QVtdS1D-w@mail.gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113D82BA@PPWEXCH2KX14.coh.org>

Hi Deepayan,

Thank you very much!! Yes, your method also works very well,  I thought about creating an extra time variable, but did not know how to do it.

Ding
________________________________________
From: Deepayan Sarkar [deepayan.sarkar at gmail.com]
Sent: Saturday, April 4, 2020 3:10 AM
To: Yuan Chun Ding
Cc: r-help mailing list
Subject: Re: [R] a simple reshape

Hi,

[For a non-tidyverse solution:]

Your problem is ambiguous without a 'time' variable; e.g., why should
the answer not be

test2  <- data.frame(vntr1=c("v1","v2"),
                     a1 =c(NA, 0.5693),
                     a2 = c(0.02, 0.12),
                     a3 =c(NA, 0.11),
                     a4=c(0.98, 0.04))

? If you do add an artificial time variable, say using

test1 <- transform(test1,
    time = unsplit(lapply(split(vntr1, vntr1), seq_along), vntr1))

to give

> test1
 vntr1  val time
1    v1 0.98    1
2    v1 0.02    2
3    v2 0.59    1
4    v2 0.12    2
5    v2 0.11    3
6    v2 0.04    4

then either reshape() or dcast() easily gives you what you want:

> reshape(test1, v.names = "val", idvar = "vntr1", direction = "wide", timevar = "time")
 vntr1 val.1 val.2 val.3 val.4
1    v1  0.98  0.02    NA    NA
3    v2  0.59  0.12  0.11  0.04

> reshape2::dcast(test1, vntr1 ~ time, value.var="val")
 vntr1    1    2    3    4
1    v1 0.98 0.02   NA   NA
2    v2 0.59 0.12 0.11 0.04

-Deepayan

On Sat, Apr 4, 2020 at 12:28 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Hi R users,
>
> I want to do a data reshape from long to wide, I thought it was easy using tidyverse spread function, but it did not work well. Can you help me?
>
> Thank you,
>
> Ding
>
> test1 data frame is long file and test2 is the wide file I want to get
>
> test1 <- data.frame (vntr1=c("v1","v1", "v2","v2","v2","v2"),
>                      val =c(0.98,0.02, 0.59,0.12,0.11,0.04))
>
> test2  <- data.frame(vntr1=c("v1","v2"),
>                      a1 =c(0.98, 0.5693),
>                      a2 = c(0.02, 0.12),
>                      a3 =c(NA, 0.11),
>                      a4=c(NA, 0.04))
>
> the following code does not work
> test2 <-test1 %>%spread(vntr1, val)
>
>  Error: Each row of output must be identified by a unique combination of keys.
> Keys are shared for 6 rows:
> * 1, 2
> * 3, 4, 5, 6
> Do you need to create unique ID with tibble::rowid_to_column()?
> Call `rlang::last_error()` to see a backtrace
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!_gFkJ_Cf4ZEMwLhfpOwr3W8LB2SUv3_s6vPFDW1_kVUN891RfsB4KvcZNHBM$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!_gFkJ_Cf4ZEMwLhfpOwr3W8LB2SUv3_s6vPFDW1_kVUN891RfsB4KkMsIU01$
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Sun Apr  5 06:25:34 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sun, 5 Apr 2020 07:25:34 +0300
Subject: [R] error: Error in if (any(DF[A, ] != DF[B,
 ])) { : missing value where TRUE/FALSE needed
In-Reply-To: <1144438423.1020445.1585844868171@mail.yahoo.com>
References: <1144438423.1020445.1585844868171.ref@mail.yahoo.com>
 <1144438423.1020445.1585844868171@mail.yahoo.com>
Message-ID: <CAGgJW77z19uePjYKF6o-nh4Km5TkKSADrzfqvGcb_SUM+FKuLQ@mail.gmail.com>

Hi Orlando,
This is not a reproducible example because of the line
MyGraphData <- read.graph ( file = "0.edges" , directed = FALSE )
We don't have the file   "0.edges" .

But here's an example that reproduces the error message. Maybe it will help
you find your problem.

DF <- data.frame( x=NA, y=5 )
if ( any( DF[1,] != DF[2,]) ) cat("hello world\n")

#  Error in if ( any( DF[1,] != DF[2,]) ) cat("hello world\n") :
#     missing value where TRUE/FALSE needed

HTH,
Eric


On Sat, Apr 4, 2020 at 11:10 PM Orlando Ramirez via R-help <
r-help at r-project.org> wrote:

> Hello this is my code and then i show you the result...please how i reapir
> this error...thanks lot off
> library(igraph)
> #################################################
> # Lecture du fichier 0. edges
> MyGraphData <- read.graph ( file = "0.edges" , directed = FALSE )
> # Nombre de noeuds dans le graphe
> Nb_noeuds <- vcount ( MyGraphData )
> Nb_noeuds
> # [1] 348
> # Pour enlever les doublons et les boucles dans le graphe
> MyGraphData <- simplify ( MyGraphData , remove.multiple = TRUE ,
> remove.loops = TRUE )
> # Nombre d ' arr?tes dans le graphe
> Nb_arretes <- ecount ( MyGraphData )
> Nb_arretes
> # [1] 2519
> # Structure hi?rarchique des noeuds
> cluster <- edge.betweenness.community ( MyGraphData )
> cluster
> # > cluster
> # # les noeuds dans chaque communaut?
> # IGRAPH clustering edge betweenness, groups: 51, mod: 0.42
> # + groups:
> #   $`1`
> # [1] 1
> #
> # $`2`
> # [1]   2  25  49  54  58  74  81  93  95 102 127 131 181 188 192 195 197
> 205 243 250 255 267 300
> # [24] 301 303 331 347
> #
> # $`3`
> # [1]   3  15  18  20  21  29  33  42  45  94 112 113 116 117 138 139 141
> 145 150 152 163 168 175
> # [24] 215 217 221 227 244 263 280 290 294 306 311 313 327 334 338 344
> # + ... omitted several groups/vertices
> # fc <- cluster_fast_greedy(MyGraphData)
> #  plot_dendrogram(fc)
> # Visualisation
> plot_dendrogram (cluster  )
> Error in if (any(DF[A, ] != DF[B, ])) { :
>   missing value where TRUE/FALSE needed
>
>
>
>                                        ?
> ?
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sun Apr  5 13:46:11 2020
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sun, 5 Apr 2020 17:16:11 +0530
Subject: [R] ggplot stat smooth and poly
In-Reply-To: <37de34217e244f10bcc7b5e5215609de@SRVEXCHCM1302.precheza.cz>
References: <37de34217e244f10bcc7b5e5215609de@SRVEXCHCM1302.precheza.cz>
Message-ID: <CADfFDC5aSOu9MNND-2UOLg8GjgKWaihJVKw5CyftYAzvsZYwdw@mail.gmail.com>

On Thu, Apr 2, 2020 at 6:10 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Dear all
>
> I am not sure, but I believe that in past it was possible to add smoothing
> lines in ggplot even if some group did not have enough points to perform
> calculation (although I did not find any version which could deliver it).
>
> Here is the code and data
>
> library(ggplot2)
> p <- ggplot(test, aes(x=one, y=two, colour=three))
> p+geom_point(size=5)+stat_smooth(method="lm")
> ***line added to each group
>
> p+geom_point(size=5)+stat_smooth(method="lm", formula=y~poly(x,2))
> Warning message:
> Computation failed in `stat_smooth()`:
> 'degree' must be less than number of unique points
> ***no line added to any group
>
> test <- structure(list(one = 1:20, two = c(1L, 4L, 9L, 16L, 25L, 36L,
> 49L, 64L, 81L, 100L, 121L, 144L, 169L, 196L, 225L, 256L, 289L,
> 324L, 361L, 400L), three = c("a", "a", "a", "a", "b", "b", "b",
> "b", "c", "c", "c", "c", "c", "d", "d", "e", "e", "e", "e", "e"
> )), class = "data.frame", row.names = c(NA, -20L))
>
> My question:
> Is it possible to add smoothing line just to the groups where it can be
> added? I know that I could exclude "d" level from my data but I would
> prefer
> to keep them and add only smoothing lines where they could be computed.
>

Looks like there's a tryCatch around each panel, but not for each group
within panel. So this would work:

p + geom_point(size=2) + facet_wrap(~three) +
    stat_smooth(method="lm", formula=y~poly(x,2))

but one problematic group is enough to make a whole panel fail.

Other than rewriting StatSmooth$compute_panel to protect each per-group
call, a workaround could be to replace method="lm" by a safe wrapper, e.g.,:

plm <- function(formula, data, ...)
{
    ocall <- match.call(expand.dots = TRUE)
    ocall[[1]] <- quote(lm)
    fm <- try(eval(ocall, parent.frame()), silent = TRUE)
    if (inherits(fm, "try-error"))
    {
        ocall[[2]] <- y ~ x
        fm <- eval(ocall, parent.frame())
    }
    fm
}

p + geom_point(size=2) + stat_smooth(method=plm, formula=y~poly(x,2))

-Deepayan

Best regards
> Petr
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mcg@rvey@bern@rd @end|ng |rom comc@@t@net  Sun Apr  5 20:53:10 2020
From: mcg@rvey@bern@rd @end|ng |rom comc@@t@net (Bernard Comcast)
Date: Sun, 5 Apr 2020 14:53:10 -0400
Subject: [R] Curve fitting
Message-ID: <DEBA84FA-98F9-4B53-BA6C-CFD18322F45E@comcast.net>

Any recommendations on an R package to fit data to a nonlinear model Y=f(x) with a single x and y variable? 

I want to be able to generate parameter uncertainty estimates and prediction uncertainties if possible.

Bernard
Sent from my iPhone so please excuse the spelling!"

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr  5 21:14:15 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 05 Apr 2020 12:14:15 -0700
Subject: [R] Curve fitting
In-Reply-To: <DEBA84FA-98F9-4B53-BA6C-CFD18322F45E@comcast.net>
References: <DEBA84FA-98F9-4B53-BA6C-CFD18322F45E@comcast.net>
Message-ID: <168557D3-3746-4E56-A1DB-D41903C93A30@dcn.davis.ca.us>

stats::nlm?

On April 5, 2020 11:53:10 AM PDT, Bernard Comcast <mcgarvey.bernard at comcast.net> wrote:
>Any recommendations on an R package to fit data to a nonlinear model
>Y=f(x) with a single x and y variable? 
>
>I want to be able to generate parameter uncertainty estimates and
>prediction uncertainties if possible.
>
>Bernard
>Sent from my iPhone so please excuse the spelling!"
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr  5 21:20:58 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 05 Apr 2020 12:20:58 -0700
Subject: [R] Curve fitting
In-Reply-To: <168557D3-3746-4E56-A1DB-D41903C93A30@dcn.davis.ca.us>
References: <DEBA84FA-98F9-4B53-BA6C-CFD18322F45E@comcast.net>
 <168557D3-3746-4E56-A1DB-D41903C93A30@dcn.davis.ca.us>
Message-ID: <851C25D9-A5CA-4FAF-9CE9-78DE14680F80@dcn.davis.ca.us>

err... stats::nls...

On April 5, 2020 12:14:15 PM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>stats::nlm?
>
>On April 5, 2020 11:53:10 AM PDT, Bernard Comcast
><mcgarvey.bernard at comcast.net> wrote:
>>Any recommendations on an R package to fit data to a nonlinear model
>>Y=f(x) with a single x and y variable? 
>>
>>I want to be able to generate parameter uncertainty estimates and
>>prediction uncertainties if possible.
>>
>>Bernard
>>Sent from my iPhone so please excuse the spelling!"
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From mcg@rvey@bern@rd @end|ng |rom comc@@t@net  Sun Apr  5 21:50:28 2020
From: mcg@rvey@bern@rd @end|ng |rom comc@@t@net (Bernard Comcast)
Date: Sun, 5 Apr 2020 15:50:28 -0400
Subject: [R] Curve fitting
In-Reply-To: <168557D3-3746-4E56-A1DB-D41903C93A30@dcn.davis.ca.us>
References: <168557D3-3746-4E56-A1DB-D41903C93A30@dcn.davis.ca.us>
Message-ID: <794B36B9-1891-45F1-A104-82240C2C5D92@comcast.net>

Thanks Jeff

Bernard
Sent from my iPhone so please excuse the spelling!"

> On Apr 5, 2020, at 3:14 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> ?stats::nlm?
> 
>> On April 5, 2020 11:53:10 AM PDT, Bernard Comcast <mcgarvey.bernard at comcast.net> wrote:
>> Any recommendations on an R package to fit data to a nonlinear model
>> Y=f(x) with a single x and y variable? 
>> 
>> I want to be able to generate parameter uncertainty estimates and
>> prediction uncertainties if possible.
>> 
>> Bernard
>> Sent from my iPhone so please excuse the spelling!"
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Sent from my phone. Please excuse my brevity.


From pro|jcn@@h @end|ng |rom gm@||@com  Sun Apr  5 23:18:46 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Sun, 5 Apr 2020 17:18:46 -0400
Subject: [R] Curve fitting
In-Reply-To: <851C25D9-A5CA-4FAF-9CE9-78DE14680F80@dcn.davis.ca.us>
References: <DEBA84FA-98F9-4B53-BA6C-CFD18322F45E@comcast.net>
 <168557D3-3746-4E56-A1DB-D41903C93A30@dcn.davis.ca.us>
 <851C25D9-A5CA-4FAF-9CE9-78DE14680F80@dcn.davis.ca.us>
Message-ID: <3394ac1d-b1b4-5790-b89b-67e952e34dad@gmail.com>

Generally nlsr package has better reliability in getting parameter estimates
because it tries to use automatic derivatives rather than a rather poor numerical
estimate, and also uses a Levenberg-Marquardt stabilization of the linearized
model. However, nls() can sometimes be a bit more flexible.

JN

On 2020-04-05 3:20 p.m., Jeff Newmiller wrote:
> err... stats::nls...
> 
> On April 5, 2020 12:14:15 PM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>> stats::nlm?
>>
>> On April 5, 2020 11:53:10 AM PDT, Bernard Comcast
>> <mcgarvey.bernard at comcast.net> wrote:
>>> Any recommendations on an R package to fit data to a nonlinear model
>>> Y=f(x) with a single x and y variable? 
>>>
>>> I want to be able to generate parameter uncertainty estimates and
>>> prediction uncertainties if possible.
>>>
>>> Bernard
>>> Sent from my iPhone so please excuse the spelling!"
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>


From bj@@m|@r@ @end|ng |rom gm@||@com  Mon Apr  6 06:27:08 2020
From: bj@@m|@r@ @end|ng |rom gm@||@com (Bijesh Mishra)
Date: Sun, 5 Apr 2020 23:27:08 -0500
Subject: [R] Help needed: gdal-configuration to install sf package in Mac OS
 Catalina
Message-ID: <CAJ5oOKWwDiFa=y7fecW4xrCNz6AtsFeQ-by-4ke_w2qqThJ8Zg@mail.gmail.com>

Hi,
I am using R in Mac. I was trying to install sf package but could not and
got error. Detail message of error is under this email. It seems like I
have to run gdal- configuration, but not sure what that means. Do you have
any idea about that?

This is the message I got while installing SF package:

configure: error: gdal-config not found or not executable.
ERROR: configuration failed for package ?sf?
* removing
?/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sf?
Error: Failed to install 'sf' from GitHub:
  (converted from warning) installation of package
?/var/folders/5_/74nhx31d521cjc_gjz58nh8r0000gn/T//RtmpO7v2bW/filea6321afd2c24/sf_0.9-1.tar.gz?
had non-zero exit status

-- 
Kind Regards,
Bijesh Mishra.
***********************************************************************************************

	[[alternative HTML version deleted]]


From c@|@ndr@ @end|ng |rom rgzm@de  Mon Apr  6 08:48:23 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Mon, 6 Apr 2020 08:48:23 +0200
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <CAFEqCdy+GYz5ZXD16tjLR2ipnO46uY=yoYYmM+0jw-xKuvL7DA@mail.gmail.com>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <20200331170009.6240febb@Tarkus>
 <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
 <CAFEqCdy+GYz5ZXD16tjLR2ipnO46uY=yoYYmM+0jw-xKuvL7DA@mail.gmail.com>
Message-ID: <3622ef9d-55f8-c2c4-490f-cadc30294a3d@rgzm.de>

Thank you Greg for the insights!

I agree with you that the decrease in speed is not worth the decrease in
readability, and I'll change my length() calls to ncol().

Best,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 03/04/2020 17:45, Greg Snow wrote:
> As others have pointed out, ncol calls the length function, so you are
> pretty safe in terms of output of getting the same result when applied
> to the results of functions like read.csv (there will be a big
> difference if you ever apply those functions to a matrix or some other
> data structures).
>
> One thing that I have not seen yet is a comparison on timing, so here goes:
>
>> library(microbenchmark)
>> microbenchmark(
> + length = length(iris),
> + ncol = ncol(iris)
> + )
> Unit: nanoseconds
>    expr  min   lq mean median   uq   max neval
>  length  700  750  869    800  800  7400   100
>    ncol 2400 2500 2981   2600 2700 31900   100
>
> So ncol takes about 3 times as long to run as length on the iris data
> frame (5 columns), you can rerun the above code with data frames more
> the size that you will be using to see if that makes any difference.
> But also notice that the units are nanoseconds, so the median time for
> ncol to run is less than the time it takes light to travel a kilometer
> in a vacuum, or about the time it takes light to go 1/3 of a mile
> through a fiber optic cable (en.wikipedia.org/wiki/Microsecond).  If
> this is used as part of a simulation or other repeated procedure and
> it is done one million times then you will add about 2 seconds to the
> overall run.  If this is just part of code where length/ncol will be
> called fewer than 10 times then nobody is going to notice.
>
> So the trade-off of moving from length to ncol is a slight decrease in
> speed for an increase of readability.  I think that I would go with
> the readability myself.
>
> On Tue, Mar 31, 2020 at 8:11 AM Ivan Calandra <calandra at rgzm.de> wrote:
>> Thanks Ivan for the answer.
>>
>> So it confirms my first thought that these two functions are equivalent
>> when applied to a "simple" data.frame.
>>
>> The reason I was asking is because I have gotten used to use length() in
>> my scripts. It works perfectly and I understand it easily. But to be
>> honest, ncol() is more intuitive to most users (especially the novice)
>> so I was thinking about switching to using this function instead (all my
>> data.frames are created from read.csv() or similar functions so there
>> should not be any issue). But before doing that, I want to be sure that
>> it is not going to create unexpected results.
>>
>> Thank you,
>> Ivan
>>
>> --
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments
>> MONREPOS Archaeological Research Centre and
>> Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>>
>> On 31/03/2020 16:00, Ivan Krylov wrote:
>>> On Tue, 31 Mar 2020 14:47:54 +0200
>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>
>>>> On a simple data.frame (i.e. each element is a vector), ncol() and
>>>> length() will give the same result.
>>>> Are they just equivalent on such objects, or are they differences in
>>>> some cases?
>>> I am not aware of any exceptions to ncol(dataframe)==length(dataframe)
>>> (in fact, ncol(x) is dim(x)[2L] and ?dim says that dim(dataframe)
>>> returns c(length(attr(dataframe, 'row.names')), length(dataframe))), but
>>> watch out for AsIs columns which can have columns of their own:
>>>
>>> x <- data.frame(I(volcano))
>>> dim(x)
>>> # [1] 87  1
>>> length(x)
>>> # [1] 1
>>> dim(x[,1])
>>> # [1] 87 61
>>>
>>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Apr  6 09:11:27 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 6 Apr 2020 10:11:27 +0300
Subject: [R] 
 Help needed: gdal-configuration to install sf package in Mac OS
 Catalina
In-Reply-To: <CAJ5oOKWwDiFa=y7fecW4xrCNz6AtsFeQ-by-4ke_w2qqThJ8Zg@mail.gmail.com>
References: <CAJ5oOKWwDiFa=y7fecW4xrCNz6AtsFeQ-by-4ke_w2qqThJ8Zg@mail.gmail.com>
Message-ID: <20200406101127.63958cc7@Tarkus>

On Sun, 5 Apr 2020 23:27:08 -0500
Bijesh Mishra <bjs.misra at gmail.com> wrote:

> configure: error: gdal-config not found or not executable.

This would mean that gdal [1], which is a dependency of the sf package,
is not installed (or not available on $PATH, or...). If you use
Homebrew [2], try running 'brew install gdal'. If you are still having
problems, consider asking on R-SIG-Mac list [3].

-- 
Best regards,
Ivan

[1] https://gdal.org/

[2] https://brew.sh/

[3] https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Mon Apr  6 10:29:30 2020
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Mon, 6 Apr 2020 08:29:30 +0000
Subject: [R] nearest lower and higher integers to a multiple of another
 integer
Message-ID: <8B435C9568170B469AE31E8891E8CC4F809A13C3@ESINO.regionemarche.intra>

Dear R list members,
given an integer x, I would need to find the nearest lower and higher integers (xmin and xmax) to a multiple of another integer n.

Example: if x is -2 and n is 4, xmin becomes -4 and xmax is 0.

I tried to manage it with simple "if" statements, but this is not efficient at all.
Could please somebody help me to find an easy way to implement it?

Thank you for your attention and your help
Stefano Sofia

         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Civil Protection - Marche Region
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
This message was scanned by Libra ESVA and is believed to be clean.


	[[alternative HTML version deleted]]


From gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de  Mon Apr  6 10:45:52 2020
From: gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de (Gerrit Eichner)
Date: Mon, 6 Apr 2020 10:45:52 +0200
Subject: [R] nearest lower and higher integers to a multiple of another
 integer
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F809A13C3@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F809A13C3@ESINO.regionemarche.intra>
Message-ID: <ddba8722-bd0f-93ea-3fc2-3bd3ace42590@math.uni-giessen.de>

Hi Stefano,

maybe floor(x / n) * n and ceiling(x / n) * n does what you want?

  Best regards  --  Gerrit

---------------------------------------------------------------------
Dr. Gerrit Eichner                   Mathematical Institute, Room 212
gerrit.eichner at math.uni-giessen.de   Justus-Liebig-University Giessen
Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
http://www.uni-giessen.de/eichner
---------------------------------------------------------------------

Am 06.04.2020 um 10:29 schrieb Stefano Sofia:
> Dear R list members,
> given an integer x, I would need to find the nearest lower and higher integers (xmin and xmax) to a multiple of another integer n.
> 
> Example: if x is -2 and n is 4, xmin becomes -4 and xmax is 0.
> 
> I tried to manage it with simple "if" statements, but this is not efficient at all.
> Could please somebody help me to find an easy way to implement it?
> 
> Thank you for your attention and your help
> Stefano Sofia
> 
>           (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Civil Protection - Marche Region
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> 
> --
> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> This message was scanned by Libra ESVA and is believed to be clean.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Apr  6 10:45:29 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 06 Apr 2020 01:45:29 -0700
Subject: [R] nearest lower and higher integers to a multiple of another
 integer
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F809A13C3@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F809A13C3@ESINO.regionemarche.intra>
Message-ID: <FCC13E41-DC42-4850-96D4-687283BAB6CB@dcn.davis.ca.us>

x <- -2
xi <- x %/% 4
xmin <- 4 * xi
xmax <- 4 * ( 1 + xi )

On April 6, 2020 1:29:30 AM PDT, Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>Dear R list members,
>given an integer x, I would need to find the nearest lower and higher
>integers (xmin and xmax) to a multiple of another integer n.
>
>Example: if x is -2 and n is 4, xmin becomes -4 and xmax is 0.
>
>I tried to manage it with simple "if" statements, but this is not
>efficient at all.
>Could please somebody help me to find an easy way to implement it?
>
>Thank you for your attention and your help
>Stefano Sofia
>
>         (oo)
>--oOO--( )--OOo----------------
>Stefano Sofia PhD
>Civil Protection - Marche Region
>Meteo Section
>Snow Section
>Via del Colle Ameno 5
>60126 Torrette di Ancona, Ancona
>Uff: 071 806 7743
>E-mail: stefano.sofia at regione.marche.it
>---Oo---------oO----------------
>
>________________________________
>
>AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
>informazioni confidenziali, pertanto ? destinato solo a persone
>autorizzate alla ricezione. I messaggi di posta elettronica per i
>client di Regione Marche possono contenere informazioni confidenziali e
>con privilegi legali. Se non si ? il destinatario specificato, non
>leggere, copiare, inoltrare o archiviare questo messaggio. Se si ?
>ricevuto questo messaggio per errore, inoltrarlo al mittente ed
>eliminarlo completamente dal sistema del proprio computer. Ai sensi
>dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit?
>ed urgenza, la risposta al presente messaggio di posta elettronica pu?
>essere visionata da persone estranee al destinatario.
>IMPORTANT NOTICE: This e-mail message is intended to be received only
>by persons entitled to receive the confidential information it may
>contain. E-mail messages to clients of Regione Marche may contain
>information that is confidential and legally privileged. Please do not
>read, copy, forward, or store this message unless you are an intended
>recipient of it. If you have received this message in error, please
>forward it to the sender and delete it completely from your computer
>system.
>
>--
>Questo messaggio  stato analizzato da Libra ESVA ed  risultato non
>infetto.
>This message was scanned by Libra ESVA and is believed to be clean.
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Mon Apr  6 11:31:47 2020
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Mon, 6 Apr 2020 09:31:47 +0000
Subject: [R] nearest lower and higher integers to a multiple of another
 integer
In-Reply-To: <FCC13E41-DC42-4850-96D4-687283BAB6CB@dcn.davis.ca.us>
References: <8B435C9568170B469AE31E8891E8CC4F809A13C3@ESINO.regionemarche.intra>,
 <FCC13E41-DC42-4850-96D4-687283BAB6CB@dcn.davis.ca.us>
Message-ID: <8B435C9568170B469AE31E8891E8CC4F809A13E1@ESINO.regionemarche.intra>

Thank you very much.
Stefano

         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Civil Protection - Marche Region
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------

________________________________________
Da: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
Inviato: luned? 6 aprile 2020 10.45
A: r-help at r-project.org; Stefano Sofia; r-help at r-project.org
Oggetto: Re: [R] nearest lower and higher integers to a multiple of another integer

x <- -2
xi <- x %/% 4
xmin <- 4 * xi
xmax <- 4 * ( 1 + xi )

On April 6, 2020 1:29:30 AM PDT, Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>Dear R list members,
>given an integer x, I would need to find the nearest lower and higher
>integers (xmin and xmax) to a multiple of another integer n.
>
>Example: if x is -2 and n is 4, xmin becomes -4 and xmax is 0.
>
>I tried to manage it with simple "if" statements, but this is not
>efficient at all.
>Could please somebody help me to find an easy way to implement it?
>
>Thank you for your attention and your help
>Stefano Sofia
>
>         (oo)
>--oOO--( )--OOo----------------
>Stefano Sofia PhD
>Civil Protection - Marche Region
>Meteo Section
>Snow Section
>Via del Colle Ameno 5
>60126 Torrette di Ancona, Ancona
>Uff: 071 806 7743
>E-mail: stefano.sofia at regione.marche.it
>---Oo---------oO----------------
>
>________________________________
>
>AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
>informazioni confidenziali, pertanto ? destinato solo a persone
>autorizzate alla ricezione. I messaggi di posta elettronica per i
>client di Regione Marche possono contenere informazioni confidenziali e
>con privilegi legali. Se non si ? il destinatario specificato, non
>leggere, copiare, inoltrare o archiviare questo messaggio. Se si ?
>ricevuto questo messaggio per errore, inoltrarlo al mittente ed
>eliminarlo completamente dal sistema del proprio computer. Ai sensi
>dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit?
>ed urgenza, la risposta al presente messaggio di posta elettronica pu?
>essere visionata da persone estranee al destinatario.
>IMPORTANT NOTICE: This e-mail message is intended to be received only
>by persons entitled to receive the confidential information it may
>contain. E-mail messages to clients of Regione Marche may contain
>information that is confidential and legally privileged. Please do not
>read, copy, forward, or store this message unless you are an intended
>recipient of it. If you have received this message in error, please
>forward it to the sender and delete it completely from your computer
>system.
>
>--
>Questo messaggio  stato analizzato da Libra ESVA ed  risultato non
>infetto.
>This message was scanned by Libra ESVA and is believed to be clean.
>
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=52342f8a&h=d46bc785&f=y&p=y
>PLEASE do read the posting guide
> https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=52342f8a&h=9b25bfd5&f=y&p=y
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

--

Questo messaggio  stato analizzato con Libra ESVA ed  risultato non infetto.


________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
This message was scanned by Libra ESVA and is believed to be clean.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Mon Apr  6 15:26:24 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Mon, 6 Apr 2020 15:26:24 +0200
Subject: [R] correlated metrics using AutoSpearman
Message-ID: <CA+nrPnuLLUPQoa7_tXF4R7u-jspOhG2bdn4wPGMWipAdc5RLWw@mail.gmail.com>

Hello

I am using feature selection using AutoSpearman but I have no idea what to
do after the 'plotVarClus' function, which is just a graph and red bars are
going out of the input metrics.

My question is what is the next step to perform the feature selection
(exclude correlated metrics).

I used the following code.

library("Rnalytica")
Data = loadDefectDataset("eclipse-2.0")
plotVarClus(dataset = Data$data, metrics = Data$indep,
             correlation = "spearman",
             correlation.threshold = 0.7, vif.threshold = 5)

	[[alternative HTML version deleted]]


From @co|we|| @end|ng |rom uogue|ph@c@  Mon Apr  6 18:37:18 2020
From: @co|we|| @end|ng |rom uogue|ph@c@ (Scott Colwell)
Date: Mon, 6 Apr 2020 16:37:18 +0000
Subject: [R] Quantitative Methods Workshops in May 2020
Message-ID: <D153B79E-82FE-4A0B-8FF3-5B034094EE8B@uoguelph.ca>

FORWARDED ? The following message has been forwarded and is not related to the University of Guelph.

Apologies for the cross-posting.

Good morning everyone. We sincerely hope you are all keeping safe and healthy while we all endure this pandemic.

As a result of the restrictions on public gatherings, we are going to be delivering our May 2020 workshops via online live streaming now as opposed to face-to-face at McMaster University. We will be providing materials ahead of time for all participants and will still include time for individual consultation regarding your own data (which can be scheduled at the live-stream workshop).

Each workshop provides a hands-on opportunity to learn using both R (with R-Studio) and Mplus.

For further information and to register, please go to: https://workshops.enablytics.com/


[1] Introduction to Structural Equation Modeling

This one-day hands-on workshop covers various introductory topics in structural equation modeling with continuous and categorical variables. Topics include, assumptions and data considerations, model creation, identification, and evaluation, multiple regression vs path analysis, path analysis, testing direct and indirect effects, and confirmatory factor analysis. Examples will be demonstrated in both R (using R-Studio) and Mplus. Syntax and output for both programs will be provided for all examples covered in the workshop.

[2] Advanced Structural Equation Modeling

This one-day hands-on workshop covers various advanced topics in structural equation modeling with continuous and categorical variables. Topics include, model creation, identification, and evaluation, testing moderation, mediation and moderated mediation, multiple group modeling, handling missing data, measurement invariance and power analysis. Examples will be demonstrated in both R (using R-Studio) and Mplus. Syntax and output for both programs will be provided for all examples covered in the workshop.

[3] Growth Modeling

This one-day hands-on workshop covers various topics in growth modeling (longitudinal modeling) with continuous and categorical variables. Topics include, growth modeling without covariates, growth modeling with time invariant and varying covariates, centering points, piecewise growth modeling, missing data and power analysis. Examples will be demonstrated in both R (using R-Studio) and Mplus. Syntax and output for both programs will be provided for all examples covered in the workshop.

[4] Multilevel Modeling

This two day hands-on workshop covers various topics in multilevel modeling with continuous and categorical variables. Topics include, when multilevel analysis is necessary, multilevel regression, random slopes and cross-level effects, multilevel confirmatory factor analysis and the MIMIC model, multilevel path analysis, multilevel mediation and moderation, multilevel latent variable modeling, longitudinal data, and power analysis. Examples will be demonstrated in both R (using R-Studio) and Mplus. Syntax and output for both programs will be provided for all examples covered in the workshop.

Thank you,

Scott





	[[alternative HTML version deleted]]


From hp@ge@ @end|ng |rom |redhutch@org  Tue Apr  7 02:56:57 2020
From: hp@ge@ @end|ng |rom |redhutch@org (=?UTF-8?B?SGVydsOpIFBhZ8Oocw==?=)
Date: Mon, 6 Apr 2020 17:56:57 -0700
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <eca60220-bc69-09b0-163a-73c7427a4296@rgzm.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <CAGgJW75awWd+ebqGuXEEaXg3i-7z3U5FpgWUxOuz7HauvFCXxw@mail.gmail.com>
 <6838c19f-5d00-bc0d-5a08-c1ba26fe1705@rgzm.de>
 <CAGgJW77jmY4=YhOt2Ye=1x2niLx-nBS9O0+kd8tfNdXuZE_t2Q@mail.gmail.com>
 <eca60220-bc69-09b0-163a-73c7427a4296@rgzm.de>
Message-ID: <3998dab7-eb58-e738-baa5-6ecfcad9eed8@fredhutch.org>

Hi Ivan,

On 3/31/20 06:44, Ivan Calandra wrote:
> That's exactly why I was asking if it really is equivalent and if there
> are issues using one function or the other

Not that I know. It's mostly a matter of taste and code readability.

Either use the 2D interface:

    ncol(df), colnames(df), df[ , "somecol"], cbind(), etc...

or the list interface:

    length(df), names(df), df[["somecol"]], c(), etc...

to operate on your data.frames. They're equivalent. One advantage of 
using the latter though is that your code would also work on list 
objects that are not data.frames. But maybe you don't need or care about 
that in which case using one interface or the other makes no difference.

Note that the 2D interface is richer because it has nrow(), rownames(), 
rbind() that are not part of the list interface.

 From a code readability point of view I think one should be consistent 
and avoid mixing the 2 styles. For example IMO using length(df) and 
colnames(df) in the same function body is not good style. Either use 
length(df) and names(df), or use ncol(df) and colnames(df). If in the 
same function body you need to also access the rownames() then it would 
make sense to stick to the 2D interface throughout the entire body of 
your function.

Cheers,
H.

> 
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://urldefense.proofpoint.com/v2/url?u=https-3A__www.researchgate.net_profile_Ivan-5FCalandra&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=rSFaISqU4VRbZBhLtnKvwJmxwkKQ0kAN0sIAfSBWUkw&e=
> 
> On 31/03/2020 15:39, Eric Berger wrote:
>> Yes it does because?length(list) gives you the number of elements of
>> the list. And in the case of a data frame object that is the number of
>> columns, or ncol().
>>
>> On Tue, Mar 31, 2020 at 4:37 PM Ivan Calandra <calandra at rgzm.de
>> <mailto:calandra at rgzm.de>> wrote:
>>
>>      Thanks Eric,
>>
>>      I know that, but that doesn't really answer my question, does it?
>>
>>      Ivan
>>
>>      --
>>      Dr. Ivan Calandra
>>      TraCEr, laboratory for Traceology and Controlled Experiments
>>      MONREPOS Archaeological Research Centre and
>>      Museum for Human Behavioural Evolution
>>      Schloss Monrepos
>>      56567 Neuwied, Germany
>>      +49 (0) 2631 9772-243
>>      https://urldefense.proofpoint.com/v2/url?u=https-3A__www.researchgate.net_profile_Ivan-5FCalandra&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=rSFaISqU4VRbZBhLtnKvwJmxwkKQ0kAN0sIAfSBWUkw&e=
>>
>>      On 31/03/2020 15:26, Eric Berger wrote:
>>      > A data frame is a special case of a list. It is a list of its
>>      columns.
>>      >
>>      > > is.list( your_data_frame )
>>      >
>>      > # TRUE
>>      >
>>      >
>>      > On Tue, Mar 31, 2020 at 4:04 PM Ivan Calandra <calandra at rgzm.de
>>      <mailto:calandra at rgzm.de>
>>      > <mailto:calandra at rgzm.de <mailto:calandra at rgzm.de>>> wrote:
>>      >
>>      >? ? ?Dear useRs,
>>      >
>>      >? ? ?I have a very simple question:
>>      >? ? ?On a simple data.frame (i.e. each element is a vector),
>>      ncol() and
>>      >? ? ?length() will give the same result.
>>      >
>>      >? ? ?Are they just equivalent on such objects, or are they
>>      differences in
>>      >? ? ?some cases?
>>      >? ? ?Is one of them to be preferred for whatever reason?
>>      >
>>      >? ? ?Thanks you,
>>      >? ? ?Ivan
>>      >
>>      >? ? ?--
>>      >? ? ?Dr. Ivan Calandra
>>      >? ? ?TraCEr, laboratory for Traceology and Controlled Experiments
>>      >? ? ?MONREPOS Archaeological Research Centre and
>>      >? ? ?Museum for Human Behavioural Evolution
>>      >? ? ?Schloss Monrepos
>>      >? ? ?56567 Neuwied, Germany
>>      >? ? ?+49 (0) 2631 9772-243
>>      >? ? ?https://urldefense.proofpoint.com/v2/url?u=https-3A__www.researchgate.net_profile_Ivan-5FCalandra&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=rSFaISqU4VRbZBhLtnKvwJmxwkKQ0kAN0sIAfSBWUkw&e=
>>      >
>>      >? ? ?______________________________________________
>>      >? ? ?R-help at r-project.org <mailto:R-help at r-project.org>
>>      <mailto:R-help at r-project.org <mailto:R-help at r-project.org>>
>>      mailing list --
>>      >? ? ?To UNSUBSCRIBE and more, see
>>      >? ? ?https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=RzvpfqevFgNjYNRLX0nYF8un-5x7k-QG5h0465YA7mQ&e=
>>      >? ? ?PLEASE do read the posting guide
>>      >? ? ?https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=kL6q9dyo4ScG-oZCxbTTWwVV389KO1pOpXMWZWd15bs&e=
>>      >? ? ?and provide commented, minimal, self-contained, reproducible
>>      code.
>>      >
>>
>>      ______________________________________________
>>      R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>>      To UNSUBSCRIBE and more, see
>>      https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=RzvpfqevFgNjYNRLX0nYF8un-5x7k-QG5h0465YA7mQ&e=
>>      PLEASE do read the posting guide
>>      https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=kL6q9dyo4ScG-oZCxbTTWwVV389KO1pOpXMWZWd15bs&e=
>>      and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=RzvpfqevFgNjYNRLX0nYF8un-5x7k-QG5h0465YA7mQ&e=
> PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=kL6q9dyo4ScG-oZCxbTTWwVV389KO1pOpXMWZWd15bs&e=
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fredhutch.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Apr  7 08:46:42 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 7 Apr 2020 08:46:42 +0200
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <3998dab7-eb58-e738-baa5-6ecfcad9eed8@fredhutch.org>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <CAGgJW75awWd+ebqGuXEEaXg3i-7z3U5FpgWUxOuz7HauvFCXxw@mail.gmail.com>
 <6838c19f-5d00-bc0d-5a08-c1ba26fe1705@rgzm.de>
 <CAGgJW77jmY4=YhOt2Ye=1x2niLx-nBS9O0+kd8tfNdXuZE_t2Q@mail.gmail.com>
 <eca60220-bc69-09b0-163a-73c7427a4296@rgzm.de>
 <3998dab7-eb58-e738-baa5-6ecfcad9eed8@fredhutch.org>
Message-ID: <0b658d90-c02f-8b66-feb0-2e9b8cca6b19@rgzm.de>

Dear Herv?,

This is indeed a wise recommendation; I hadn't thought about colnames()
vs. names(), and in general 2D vs. list notations.
I will have to edit a bit more than I thought.

Thank you all for all these hints!

Best,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 07/04/2020 02:56, Herv? Pag?s wrote:
> Hi Ivan,
>
> On 3/31/20 06:44, Ivan Calandra wrote:
>> That's exactly why I was asking if it really is equivalent and if there
>> are issues using one function or the other
>
> Not that I know. It's mostly a matter of taste and code readability.
>
> Either use the 2D interface:
>
> ?? ncol(df), colnames(df), df[ , "somecol"], cbind(), etc...
>
> or the list interface:
>
> ?? length(df), names(df), df[["somecol"]], c(), etc...
>
> to operate on your data.frames. They're equivalent. One advantage of
> using the latter though is that your code would also work on list
> objects that are not data.frames. But maybe you don't need or care
> about that in which case using one interface or the other makes no
> difference.
>
> Note that the 2D interface is richer because it has nrow(),
> rownames(), rbind() that are not part of the list interface.
>
> From a code readability point of view I think one should be consistent
> and avoid mixing the 2 styles. For example IMO using length(df) and
> colnames(df) in the same function body is not good style. Either use
> length(df) and names(df), or use ncol(df) and colnames(df). If in the
> same function body you need to also access the rownames() then it
> would make sense to stick to the 2D interface throughout the entire
> body of your function.
>
> Cheers,
> H.
>
>>
>> -- 
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments
>> MONREPOS Archaeological Research Centre and
>> Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://urldefense.proofpoint.com/v2/url?u=https-3A__www.researchgate.net_profile_Ivan-5FCalandra&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=rSFaISqU4VRbZBhLtnKvwJmxwkKQ0kAN0sIAfSBWUkw&e=
>>
>>
>> On 31/03/2020 15:39, Eric Berger wrote:
>>> Yes it does because?length(list) gives you the number of elements of
>>> the list. And in the case of a data frame object that is the number of
>>> columns, or ncol().
>>>
>>> On Tue, Mar 31, 2020 at 4:37 PM Ivan Calandra <calandra at rgzm.de
>>> <mailto:calandra at rgzm.de>> wrote:
>>>
>>> ???? Thanks Eric,
>>>
>>> ???? I know that, but that doesn't really answer my question, does it?
>>>
>>> ???? Ivan
>>>
>>> ???? --
>>> ???? Dr. Ivan Calandra
>>> ???? TraCEr, laboratory for Traceology and Controlled Experiments
>>> ???? MONREPOS Archaeological Research Centre and
>>> ???? Museum for Human Behavioural Evolution
>>> ???? Schloss Monrepos
>>> ???? 56567 Neuwied, Germany
>>> ???? +49 (0) 2631 9772-243
>>> ????
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__www.researchgate.net_profile_Ivan-5FCalandra&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=rSFaISqU4VRbZBhLtnKvwJmxwkKQ0kAN0sIAfSBWUkw&e=
>>>
>>> ???? On 31/03/2020 15:26, Eric Berger wrote:
>>> ???? > A data frame is a special case of a list. It is a list of its
>>> ???? columns.
>>> ???? >
>>> ???? > > is.list( your_data_frame )
>>> ???? >
>>> ???? > # TRUE
>>> ???? >
>>> ???? >
>>> ???? > On Tue, Mar 31, 2020 at 4:04 PM Ivan Calandra <calandra at rgzm.de
>>> ???? <mailto:calandra at rgzm.de>
>>> ???? > <mailto:calandra at rgzm.de <mailto:calandra at rgzm.de>>> wrote:
>>> ???? >
>>> ???? >? ? ?Dear useRs,
>>> ???? >
>>> ???? >? ? ?I have a very simple question:
>>> ???? >? ? ?On a simple data.frame (i.e. each element is a vector),
>>> ???? ncol() and
>>> ???? >? ? ?length() will give the same result.
>>> ???? >
>>> ???? >? ? ?Are they just equivalent on such objects, or are they
>>> ???? differences in
>>> ???? >? ? ?some cases?
>>> ???? >? ? ?Is one of them to be preferred for whatever reason?
>>> ???? >
>>> ???? >? ? ?Thanks you,
>>> ???? >? ? ?Ivan
>>> ???? >
>>> ???? >? ? ?--
>>> ???? >? ? ?Dr. Ivan Calandra
>>> ???? >? ? ?TraCEr, laboratory for Traceology and Controlled Experiments
>>> ???? >? ? ?MONREPOS Archaeological Research Centre and
>>> ???? >? ? ?Museum for Human Behavioural Evolution
>>> ???? >? ? ?Schloss Monrepos
>>> ???? >? ? ?56567 Neuwied, Germany
>>> ???? >? ? ?+49 (0) 2631 9772-243
>>> ???? >? ?
>>> ?https://urldefense.proofpoint.com/v2/url?u=https-3A__www.researchgate.net_profile_Ivan-5FCalandra&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=rSFaISqU4VRbZBhLtnKvwJmxwkKQ0kAN0sIAfSBWUkw&e=
>>> ???? >
>>> ???? >? ? ?______________________________________________
>>> ???? >? ? ?R-help at r-project.org <mailto:R-help at r-project.org>
>>> ???? <mailto:R-help at r-project.org <mailto:R-help at r-project.org>>
>>> ???? mailing list --
>>> ???? >? ? ?To UNSUBSCRIBE and more, see
>>> ???? >? ?
>>> ?https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=RzvpfqevFgNjYNRLX0nYF8un-5x7k-QG5h0465YA7mQ&e=
>>> ???? >? ? ?PLEASE do read the posting guide
>>> ???? >? ?
>>> ?https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=kL6q9dyo4ScG-oZCxbTTWwVV389KO1pOpXMWZWd15bs&e=
>>> ???? >? ? ?and provide commented, minimal, self-contained, reproducible
>>> ???? code.
>>> ???? >
>>>
>>> ???? ______________________________________________
>>> ???? R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>>> ???? To UNSUBSCRIBE and more, see
>>> ????
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=RzvpfqevFgNjYNRLX0nYF8un-5x7k-QG5h0465YA7mQ&e=
>>> ???? PLEASE do read the posting guide
>>> ????
>>> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=kL6q9dyo4ScG-oZCxbTTWwVV389KO1pOpXMWZWd15bs&e=
>>> ???? and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=RzvpfqevFgNjYNRLX0nYF8un-5x7k-QG5h0465YA7mQ&e=
>>
>> PLEASE do read the posting guide
>> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=yZXfRqVdJeNf73bgLhzIctzOWowNX-0ccnNHdReiprw&s=kL6q9dyo4ScG-oZCxbTTWwVV389KO1pOpXMWZWd15bs&e=
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From drj|m|emon @end|ng |rom gm@||@com  Tue Apr  7 11:52:01 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 7 Apr 2020 19:52:01 +1000
Subject: [R] MAP HELP
In-Reply-To: <CAJxCbFY4RXuXit_HXou2ChpFbUNbG=AbY0Yu8-Sm2HTMpp62jA@mail.gmail.com>
References: <CAJxCbFY=LfymhXhK3=+iQo4-WzeW35b4EnVn728q2BCTN8ortA@mail.gmail.com>
 <CA+8X3fXG=W0KLLe1p0DB99vu5k4Sw3kt=LEeK_vrXjwfFte75w@mail.gmail.com>
 <CAJxCbFZZadH4DYKO_h4Cz8U-i7Bqt72nJ4AXv+0kNDQzU+RrfQ@mail.gmail.com>
 <CA+8X3fWgRaFo7yx4Y0QfsPQqLwxHiPmt4KXNLVKcqsZ-Xsj8Tg@mail.gmail.com>
 <CAJxCbFY3rC__OLGKhVgTiFPQqZLVu255hHQNgWDzZzQ2JZ6SnA@mail.gmail.com>
 <CA+8X3fUCLvXrQA0pEFwdVyBkQRP2V-5kL7XUsWVuaRi1o=q2wg@mail.gmail.com>
 <CAJxCbFY4RXuXit_HXou2ChpFbUNbG=AbY0Yu8-Sm2HTMpp62jA@mail.gmail.com>
Message-ID: <CA+8X3fXbJUwK6O4YsHgKVSpycuNi+_u=fpnuRr2WVyPxoLo0dQ@mail.gmail.com>

Hi Anjaly,
I think that replacing the "geom_point" argument with "geom_text" will
do what you want. Unfortunately I can't get an example to work (as
usual) so I'm copying this back the the R help list in the hope that
someone will provide the answer for you.

Jim

On Tue, Apr 7, 2020 at 7:29 PM anjaly menon <anjalygmenon9 at gmail.com> wrote:
>
> I'll show you the dataset with long and lat. There are 184 observations. The number of fishes collected is one per observation.
> I am attaching the codes too
> library(tidyverse)
> library(rnaturalearth)
> library(rnaturalearthdata)
> library(sf)
> world <- ne_countries(scale = "medium", returnclass = "sf")
> geo1 <- read_csv(file = "geo1.csv")
> varNumber <- geo1 %>% group_by(lat, long) %>% summarize(Number_sum = sum (Number))
> ggplot(data = world) +
>   geom_sf() +
>   xlab("Longitude") + ylab("Latitude") +
>   coord_sf(xlim = c(15, 37), ylim = c(69, 76), expand = FALSE) +
>   geom_point(data = varNumber, aes(x = long, y = lat, size = Number_sum))
>
> My task is "how many fish are sampled in each location (plotting symbol sizes by number)
> I am not sure whether what I did on my map is correct or not.
> Could you please improve the script and make those changes?
> Instead of the dots, numbers!
>


From g@br|e|@ho||m@n @end|ng |rom m@@m@edu  Tue Apr  7 16:23:29 2020
From: g@br|e|@ho||m@n @end|ng |rom m@@m@edu (Hoffman, Gabriel)
Date: Tue, 7 Apr 2020 14:23:29 +0000
Subject: [R] Basic XML function not working
Message-ID: <629AADA4-D51E-4D40-AAED-5DD03C048029@contoso.com>

I am having an issue with the XML package failing on a basic function.  This makes packages that depend on this function also fail:

> library(XML)
> newXMLNode("bob")
I/O error : flush error

I can?t find any reference to the error online

> sessionInfo()
R version 3.6.0 (2019-04-26)
Platform: x86_64-apple-darwin18.6.0 (64-bit)
Running under: macOS  10.15.3

Matrix products: default
BLAS:   /Users/gabrielhoffman/Downloads/R-3.6.0/lib/libRblas.dylib
LAPACK: /Users/gabrielhoffman/Downloads/R-3.6.0/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base

other attached packages:
[1] XML_3.99-0.3

loaded via a namespace (and not attached):
[1] compiler_3.6.0 tools_3.6.0    tcltk_3.6.0

# The expected result is: <bob/>
# This works fine in R 3.5.1 on the same machine

> sessionInfo()
R version 3.5.1 (2018-07-02)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS  10.15.3

Matrix products: default
BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] XML_3.99-0.3

loaded via a namespace (and not attached):
[1] compiler_3.5.1 tools_3.5.1

# It also fails on R development version
> sessionInfo()
R Under development (unstable) (2020-03-16 r77979)
Platform: x86_64-apple-darwin19.3.0 (64-bit)
Running under: macOS Catalina 10.15.3

Matrix products: default
BLAS:   /Users/gabrielhoffman/Downloads/R-devel/lib/libRblas.dylib
LAPACK: /Users/gabrielhoffman/Downloads/R-devel/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base

other attached packages:
[1] XML_3.99-0.3

loaded via a namespace (and not attached):
[1] compiler_4.0.0


Best
- Gabriel


	[[alternative HTML version deleted]]


From e@||e@jen @end|ng |rom gm@||@com  Mon Apr  6 21:49:42 2020
From: e@||e@jen @end|ng |rom gm@||@com (Stefi Killing)
Date: Mon, 6 Apr 2020 21:49:42 +0200
Subject: [R] Fwd: Sensitivity+Uncertainty Analysis//Evaporation//Markdown
In-Reply-To: <CAJyvPA9S-JE2wy2ATS2w9TjHgqBqcExs7YSL746z=rG84DFtmg@mail.gmail.com>
References: <CAJyvPA9S-JE2wy2ATS2w9TjHgqBqcExs7YSL746z=rG84DFtmg@mail.gmail.com>
Message-ID: <CAJyvPA_Ho1k_D4VYm22z1JH-6aPmsujyAYp=cgB39s=paRh0Xw@mail.gmail.com>

Dear helpers,

my script for my* Sensitivity + Uncertainty Analysis* concerning *evaporation
processes *with the *Matt Shuttleworth-Equation* is not knitting to *markdown
*completely. There are some problems with the figures I guess. May somebody
help me?

I would be very very grateful!

Yours,
Stef

From J4T5U8 @end|ng |rom protonm@||@com  Tue Apr  7 16:22:07 2020
From: J4T5U8 @end|ng |rom protonm@||@com (J4T5U8)
Date: Tue, 07 Apr 2020 14:22:07 +0000
Subject: [R] Error using R caret package (train) with C5.0 decision tree to
 do K-fold cross validation
Message-ID: <Hcs58Tg7irCszsZa0DBHlWXZU9XChgpQymLzlOoW4HBlRhlldRTzx159aNxIpK62szbQodTYogcBcRLSNv7Uf7ds8dGkuLXMDjnZspT4MDc=@protonmail.com>

I'm trying to use the caret package to do repeated k-fold cross validation with C5.0 decision trees.

The following code generates a working C5.0 decision tree (68% accuracy on confusion matrix):

    > model <- C5.0(as.factor(OneGM) ~., data=OneT.train)
    > results <- predict(object=model, newdata=OneT.test, type="class")

The caret package code gives these errors:

    > train_control <- trainControl(method="repeatedcv", number=10, repeats=10)

    > model <- train(as.factor(OneGM) ~., data=OneT.train, trControl=train_control, method="C5.0")
    Error in na.fail.default(list(`as.factor(OneGM)` = c(1L, 1L, 1L, 1L,  : missing values in object

    > model <- train(OneGM ~., data=OneT.train, trControl=train_control, method="C5.0")
    Error in na.fail.default(list(OneGM = c(FALSE, FALSE, FALSE, FALSE,  : missing values in object

The data is loaded from a .csv file, and OneGM is either TRUE or FALSE (a text column in the .csv).

I would like to use the one-line caret package approach above (which I've seen used in multiple places), and I'm not looking for solutions that do cross validation manually.

Thanks for any help.
	[[alternative HTML version deleted]]


From jen@r@@mu@ @end|ng |rom gm@||@com  Tue Apr  7 16:56:08 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Tue, 7 Apr 2020 16:56:08 +0200
Subject: [R] Basic XML function not working
In-Reply-To: <629AADA4-D51E-4D40-AAED-5DD03C048029@contoso.com>
References: <629AADA4-D51E-4D40-AAED-5DD03C048029@contoso.com>
Message-ID: <20200407145608.GA187643@jrl.uk.to>

On 2020-04-07 14:23 +0000, Hoffman, Gabriel wrote:
| I am having an issue with the XML package 
| failing on a basic function.  This makes 
| packages that depend on this function also 
| fail:

Hi!  So XML::newXMLNode("bob") only works on 
the R 3.5.1, or r77979 as well?

So the question might be what is the 
difference between the R versions in 
Accelerate.framework compared to those in 
~/Downloads ?  Maybe the different versions 
of apple-darwin has something to do with it, 
but this remains speculation on my part ... 
quoted from your email:

| R version 3.6.0 (2019-04-26)
| Platform: x86_64-apple-darwin18.6.0 (64-bit)
| 
| R version 3.5.1 (2018-07-02)
| Platform: x86_64-apple-darwin15.6.0 (64-bit)
| 
| R Under development (unstable) (2020-03-16 r77979)
| Platform: x86_64-apple-darwin19.3.0 (64-bit)


This might not matter much, but I get the 
expected result here on 3.6.3 ...:

> XML::newXMLNode("bob")
<bob/>
> sessionInfo()
R version 3.6.3 (2020-02-29)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Arch Linux

Matrix products: default
BLAS:   /usr/lib/libopenblasp-r0.3.9.so
LAPACK: /usr/lib/liblapack.so.3.9.0

locale:
 [1] LC_CTYPE=en_GB.UTF-8
 [2] LC_NUMERIC=C
 [3] LC_TIME=en_DK.UTF-8
 [4] LC_COLLATE=en_GB.UTF-8
 [5] LC_MONETARY=nb_NO.UTF-8
 [6] LC_MESSAGES=en_GB.UTF-8
 [7] LC_PAPER=nb_NO.UTF-8
 [8] LC_NAME=C
 [9] LC_ADDRESS=C
[10] LC_TELEPHONE=C
[11] LC_MEASUREMENT=nb_NO.UTF-8
[12] LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils
[5] datasets  methods   base

other attached packages:
[1] XML_3.99-0.3

loaded via a namespace (and not attached):
[1] compiler_3.6.3 tools_3.6.3
> system("uname -a")
Linux twentyfive 5.5.10-arch1-1 #1 SMP PREEMPT Wed, 18 Mar 2020 08:40:35 +0000 x86_64 GNU/Linux

Best,
Rasmus


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Apr  7 18:19:25 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 7 Apr 2020 09:19:25 -0700
Subject: [R] 
 Help needed: gdal-configuration to install sf package in Mac OS
 Catalina
In-Reply-To: <CAJ5oOKWwDiFa=y7fecW4xrCNz6AtsFeQ-by-4ke_w2qqThJ8Zg@mail.gmail.com>
References: <CAJ5oOKWwDiFa=y7fecW4xrCNz6AtsFeQ-by-4ke_w2qqThJ8Zg@mail.gmail.com>
Message-ID: <cbb1193a-5870-ec4a-3420-d3a09caf1d08@comcast.net>


On 4/5/20 9:27 PM, Bijesh Mishra wrote:
> Hi,
> I am using R in Mac. I was trying to install sf package but could not and
> got error. Detail message of error is under this email. It seems like I
> have to run gdal- configuration, but not sure what that means. Do you have
> any idea about that?


GDAL is an external system resource for spatial modeling. The advice to 
install using homebrew might not succeed if you are not skilled in 
managing Mac Unix facilities, as it appears you are not. My 
recommendation would be to first try installing GDAL from the Kingchaos 
Frameworks website: https://www.kyngchaos.com/software/frameworks/

As mentioned you have posted to the wrong mailing list and this should 
have been posted to the R-SIG-Mac list. Instructions fro subscribing can 
be found here: https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 

David.

>
> This is the message I got while installing SF package:
>
> configure: error: gdal-config not found or not executable.
> ERROR: configuration failed for package ?sf?
> * removing
> ?/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sf?
> Error: Failed to install 'sf' from GitHub:
>    (converted from warning) installation of package
> ?/var/folders/5_/74nhx31d521cjc_gjz58nh8r0000gn/T//RtmpO7v2bW/filea6321afd2c24/sf_0.9-1.tar.gz?
> had non-zero exit status
>


From ycd|ng @end|ng |rom coh@org  Tue Apr  7 20:34:37 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Tue, 7 Apr 2020 18:34:37 +0000
Subject: [R] to create a new variable based on values in other variables
Message-ID: <A86C6438FB909A409DDEF926277952B6113D89DD@PPWEXCH2KX14.coh.org>

Hi R users,


I want to create a new variable, Ravg, in data frame tem2 based on values of two other variables m1 and m2.

the condition:

if m1 = 23 and m2 =23 then Ravg =23; 
else if m1 != 23 and m2=23 then Ravg =m1;
else if m1 =23 and m2 !=23 then Ravg=m2;
else Ravg=average of m1 and m2;

the Ravg variable should be  same as  m3 variable in the following small example.

my R code did not generate errors but not generate a new variable.

Ravg <- "rare_allele"
  tem2 <-data.frame(m1=c(12, 23, 22, 23), m2=c(23, 23, 3, 5), m3 =c(12, 23, 12.5, 5))
  for (r in 1:nrow(tem2)) { 
  if (tem2$m1[r] ==23 & tem2$m2[r] ==23) {
    tem2[[Ravg]][r] ==23} else if(tem2$m1[r] ==23 & tem2$m2[r] !=23){
    tem2[[Ravg]][r] ==tem2$m2[r]} else if (tem2$m1[r] !=23 & tem2$m2[r] ==23) {
    tem2[[Ravg]][r] ==tem2$m1[r]} else {
    tem2[[Ravg]][r] == mean(tem2$m1[r] + tem2$m2[r])}
                          }

Thank you,

Ding

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)


From th|erry@onke||nx @end|ng |rom |nbo@be  Tue Apr  7 20:48:12 2020
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Tue, 7 Apr 2020 20:48:12 +0200
Subject: [R] to create a new variable based on values in other variables
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113D89DD@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113D89DD@PPWEXCH2KX14.coh.org>
Message-ID: <CAJuCY5xsV+GBcNQmGJSwrFCPipv90yTWxRbJf-=BRMxxQNPRSA@mail.gmail.com>

Dear Ding,

It seems that you are looking for the ifelse() function. Clear use of
pmax() and pmin() reduces the number of if statements.

m1 <- c(12, 23, 22, 23)
m2 <- c(23, 23, 3, 5)

Ravg <- ifelse(
  pmax(m1, m2) == 23,
  pmin(m1, m2),
  (m1 + m2) / 2
)

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op di 7 apr. 2020 om 20:35 schreef Yuan Chun Ding <ycding at coh.org>:

> Hi R users,
>
>
> I want to create a new variable, Ravg, in data frame tem2 based on values
> of two other variables m1 and m2.
>
> the condition:
>
> if m1 = 23 and m2 =23 then Ravg =23;
> else if m1 != 23 and m2=23 then Ravg =m1;
> else if m1 =23 and m2 !=23 then Ravg=m2;
> else Ravg=average of m1 and m2;
>
> the Ravg variable should be  same as  m3 variable in the following small
> example.
>
> my R code did not generate errors but not generate a new variable.
>
> Ravg <- "rare_allele"
>   tem2 <-data.frame(m1=c(12, 23, 22, 23), m2=c(23, 23, 3, 5), m3 =c(12,
> 23, 12.5, 5))
>   for (r in 1:nrow(tem2)) {
>   if (tem2$m1[r] ==23 & tem2$m2[r] ==23) {
>     tem2[[Ravg]][r] ==23} else if(tem2$m1[r] ==23 & tem2$m2[r] !=23){
>     tem2[[Ravg]][r] ==tem2$m2[r]} else if (tem2$m1[r] !=23 & tem2$m2[r]
> ==23) {
>     tem2[[Ravg]][r] ==tem2$m1[r]} else {
>     tem2[[Ravg]][r] == mean(tem2$m1[r] + tem2$m2[r])}
>                           }
>
> Thank you,
>
> Ding
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or
> entity to which they are addressed. This communication may contain
> information that is privileged, confidential, or exempt from disclosure
> under applicable law (e.g., personal health information, research data,
> financial information). Because this e-mail has been sent without
> encryption, individuals other than the intended recipient may be able to
> view the information, forward it to others or tamper with the information
> without the knowledge or consent of the sender. If you are not the intended
> recipient, or the employee or person responsible for delivering the message
> to the intended recipient, any dissemination, distribution or copying of
> the communication is strictly prohibited. If you received the communication
> in error, please notify the sender immediately by replying to this message
> and deleting the message and any accompanying files from your system. If,
> due to the security risks, you do not wish to receive further
> communications via e-mail, please reply to this message and inform the
> sender that you do not wish to receive further e-mail from the sender.
> (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Tue Apr  7 21:05:32 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Tue, 7 Apr 2020 19:05:32 +0000
Subject: [R] to create a new variable based on values in other variables
In-Reply-To: <CAJuCY5xsV+GBcNQmGJSwrFCPipv90yTWxRbJf-=BRMxxQNPRSA@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113D89DD@PPWEXCH2KX14.coh.org>,
 <CAJuCY5xsV+GBcNQmGJSwrFCPipv90yTWxRbJf-=BRMxxQNPRSA@mail.gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113D8A2B@PPWEXCH2KX14.coh.org>


Hi Thierry,

the values in the example data frame are fake numbers, my original data frame has hundreds of row and values are in wide range, not min or max of two variables, also the number 23 is also different in different data frames.

I agree I need to use vectorized ifelse, but I got confused when there are more than two conditions inside of ifelse function. I will look into ifelse function

Thank you,

Ding



From: Thierry Onkelinx [thierry.onkelinx at inbo.be]

Sent: Tuesday, April 7, 2020 11:48 AM

To: Yuan Chun Ding

Cc: r-help mailing list

Subject: Re: [R] to create a new variable based on values in other variables


Dear Ding,

It seems that you are looking for the ifelse() function. Clear use of pmax() and pmin() reduces the number of if statements.

m1 <- c(12, 23, 22, 23)
m2 <- c(23, 23, 3, 5)

Ravg <- ifelse(

  pmax(m1, m2) == 23,

  pmin(m1, m2),

  (m1 + m2) / 2

)

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders

INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND FOREST

Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance 

thierry.onkelinx at inbo.be

Havenlaan 88 bus 73, 1000 Brussel

www.inbo.be




///////////////////////////////////////////////////////////////////////////////////////////

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data. ~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data. ~ John Tukey

///////////////////////////////////////////////////////////////////////////////////////////






























Op di 7 apr. 2020 om 20:35 schreef Yuan Chun Ding <ycding at coh.org>:



Hi R users,





I want to create a new variable, Ravg, in data frame tem2 based on values of two other variables m1 and m2.



the condition:



if m1 = 23 and m2 =23 then Ravg =23; 

else if m1 != 23 and m2=23 then Ravg =m1;

else if m1 =23 and m2 !=23 then Ravg=m2;

else Ravg=average of m1 and m2;



the Ravg variable should be  same as  m3 variable in the following small example.



my R code did not generate errors but not generate a new variable.



Ravg <- "rare_allele"

  tem2 <-data.frame(m1=c(12, 23, 22, 23), m2=c(23, 23, 3, 5), m3 =c(12, 23, 12.5, 5))

  for (r in 1:nrow(tem2)) { 

  if (tem2$m1[r] ==23 & tem2$m2[r] ==23) {

    tem2[[Ravg]][r] ==23} else if(tem2$m1[r] ==23 & tem2$m2[r] !=23){

    tem2[[Ravg]][r] ==tem2$m2[r]} else if (tem2$m1[r] !=23 & tem2$m2[r] ==23) {

    tem2[[Ravg]][r] ==tem2$m1[r]} else {

    tem2[[Ravg]][r] == mean(tem2$m1[r] + tem2$m2[r])}

                          }



Thank you,



Ding



----------------------------------------------------------------------

------------------------------------------------------------

-SECURITY/CONFIDENTIALITY WARNING-  



This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health
 information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge
 or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received
 the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail,
 please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)



______________________________________________

R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see

https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.








From bgunter@4567 @end|ng |rom gm@||@com  Tue Apr  7 21:53:19 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 7 Apr 2020 12:53:19 -0700
Subject: [R] to create a new variable based on values in other variables
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113D89DD@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113D89DD@PPWEXCH2KX14.coh.org>
Message-ID: <CAGxFJbRMJc+YBH8DCqPYc8M3qKDfStFh9LiPrZxVH54+dMkxOg@mail.gmail.com>

You can use subscripting to generalize and avoid multiply nested
ifelse's which, I agree, can be a nightmare. However, you have to be
very careful about the logic of the conditions you create and the
order in which you apply them. It is very easy to wipe out an earlier
relationship with a later one (I speak from sad experience here). Note
that because the following uses subscripting, it's vectorized. But you
of course have to set up all your conditions manually. Note that your
last example condition is redundant, btw. As Thierry indicated,
depending on what you do, there can be shortcuts. To keep the solution
generalizable, I have not used any.

> tem2 <-data.frame(m1=c(12, 23, 22, 23), m2=c(23, 23, 3, 5), m3 =c(12, 23, 12.5, 5))
> tem2$ravg <- rowMeans(tem2[,c("m1","m2")])
## or use with() or within() for more complex functions that  you have
to code yourself.
> cond1 <- with(tem2,m1!= 23 & m2 == 23)
> cond2  <- with(tem2, m1 == 23 & m2 != 23)
## etc.
> tem2 <- within(tem2,{
+       ravg[cond1] <- m1[cond1]
+       ravg[cond2] <- m2[cond2]
+    })
>
> tem2
  m1 m2   m3 ravg
1 12 23 12.0 12.0
2 23 23 23.0 23.0
3 22  3 12.5 12.5
4 23  5  5.0  5.0


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Tue, Apr 7, 2020 at 11:34 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Hi R users,
>
>
> I want to create a new variable, Ravg, in data frame tem2 based on values of two other variables m1 and m2.
>
> the condition:
>
> if m1 = 23 and m2 =23 then Ravg =23;
> else if m1 != 23 and m2=23 then Ravg =m1;
> else if m1 =23 and m2 !=23 then Ravg=m2;
> else Ravg=average of m1 and m2;
>
> the Ravg variable should be  same as  m3 variable in the following small example.
>
> my R code did not generate errors but not generate a new variable.
>
> Ravg <- "rare_allele"
>   tem2 <-data.frame(m1=c(12, 23, 22, 23), m2=c(23, 23, 3, 5), m3 =c(12, 23, 12.5, 5))
>   for (r in 1:nrow(tem2)) {
>   if (tem2$m1[r] ==23 & tem2$m2[r] ==23) {
>     tem2[[Ravg]][r] ==23} else if(tem2$m1[r] ==23 & tem2$m2[r] !=23){
>     tem2[[Ravg]][r] ==tem2$m2[r]} else if (tem2$m1[r] !=23 & tem2$m2[r] ==23) {
>     tem2[[Ravg]][r] ==tem2$m1[r]} else {
>     tem2[[Ravg]][r] == mean(tem2$m1[r] + tem2$m2[r])}
>                           }
>
> Thank you,
>
> Ding
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From h||m @end|ng |rom gm@c@com  Tue Apr  7 21:34:20 2020
From: h||m @end|ng |rom gm@c@com (Lim, Hwanggyu)
Date: Tue, 7 Apr 2020 19:34:20 +0000
Subject: [R] Question about nlminb function
In-Reply-To: <20200403122456.6e2073ea@Tarkus>
References: <BL0PR05MB4788929E27A04D79A97FB7EFBDC60@BL0PR05MB4788.namprd05.prod.outlook.com>
 <20200403122456.6e2073ea@Tarkus>
Message-ID: <BL0PR05MB47888DA69B0E861504B61B8DBDC30@BL0PR05MB4788.namprd05.prod.outlook.com>

Hello Ivan,

Thank you so much for your valuable comments. I will definitely look at the R package of nloptr you introduced.

Best,
Hwanggyu



-----Original Message-----
From: Ivan Krylov <krylov.r00t at gmail.com>
Sent: Friday, April 3, 2020 5:25 AM
To: Lim, Hwanggyu <hlim at gmac.com>
Cc: r-help at r-project.org
Subject: Re: [R] Question about nlminb function

On Thu, 2 Apr 2020 10:26:07 +0000
"Lim, Hwanggyu" <hlim at gmac.com> wrote:

> when n-1th estimates and nth estimates have absolute differences less
> than 0.001 for all three parameters, the iteration must stop

> I am using nlminb optimization function

nlminb function uses the PORT library. According to [1], the closest thing PORT has to what you want is the notion of X-convergence, namely, stopping when max(scale * abs(x - xstar))/max(scale * abs(x + xstar)) is considered to be below control$x.tol (with xstar being supposed local minimiser and scale being all ones by default). Using it as an absolute stopping criterion in x requires knowledge of at least order of magnitude of xstar, though, so it might not be feasible.

Note that ?nlminb says in the description that it is there "for historical compatibility."

The nloptr package offers an xtol_abs option [2] that results in the behaviour you want.

--
Best regards,
Ivan

[1] David M. Gay, Usage Summary for Selected Optimization Routines.
<http://web.archive.org/web/20070508140716/http://netlib.bell-labs.com/cm/cs/cstr/153.pdf>

[2]
https://nlopt.readthedocs.io/en/latest/NLopt_Reference/#stopping-criteria
The information in this transmission is confidential and intended only for the recipient listed above. If you are not the intended recipient, please advise the sender immediately by reply e-mail and delete this message and any attachments without retaining a copy. If you are not the intended recipient, you are hereby notified that any disclosure, copying or distribution of this message, or the taking of any action based upon it, is strictly prohibited.


From h||m @end|ng |rom gm@c@com  Tue Apr  7 21:38:44 2020
From: h||m @end|ng |rom gm@c@com (Lim, Hwanggyu)
Date: Tue, 7 Apr 2020 19:38:44 +0000
Subject: [R] Question about nlminb function
In-Reply-To: <a3f6f60e-bf7f-2863-fe39-6de1a20f0a3d@gmail.com>
References: <BL0PR05MB4788929E27A04D79A97FB7EFBDC60@BL0PR05MB4788.namprd05.prod.outlook.com>
 <20200403122456.6e2073ea@Tarkus>
 <a3f6f60e-bf7f-2863-fe39-6de1a20f0a3d@gmail.com>
Message-ID: <BL0PR05MB4788F5C855CAFB9B5EC15CEEBDC30@BL0PR05MB4788.namprd05.prod.outlook.com>

Hello John,

Thank you so much for your valuable response. I think using several new optimization function (e.g., Rvmmin) would be a good option for me. I will dive into those function. Thank you again!

Best,
Hwanggyu

-----Original Message-----
From: J C Nash <profjcnash at gmail.com>
Sent: Friday, April 3, 2020 9:49 AM
To: Ivan Krylov <krylov.r00t at gmail.com>; Lim, Hwanggyu <hlim at gmac.com>
Cc: r-help at r-project.org
Subject: Re: [R] Question about nlminb function

This thread points out the important and often overlooked difference between "convergence" of an algorithm and "termination"
of a program. I've been pushing this button for over 30 years, and I suspect that it will continue to come up from time to time.

Sometimes it is helpful to put termination criteria actually into the user function. Alternatively try a different optimizer. The optimx package wraps several, including a few for bounds constrained optimization.
Note that a new version will go up once revdeps have been checked. Dylan Beijers noted a minor glitch if users want to "maximize".

If the termination criteria are really critical, some of the methods now merged into optimx (Rvmmin, Rcgmin, Rtnmin) are all in R. I won't pretend that diving in and making changes is easy, though I've tried to move the code more and more to maintainability and transparency. If anyone is interested in pursuing that sort of thing, I'll be willing to advise or help as long as the requests aren't too strident.

For information, while all-R programs used to be much slower than those in Fortran or C or C++, users should time their problems rather than just assume a great penalty for running things completely in R. The human time saving is generally more important.

Best, John Nash


On 2020-04-03 5:24 a.m., Ivan Krylov wrote:
> On Thu, 2 Apr 2020 10:26:07 +0000
> "Lim, Hwanggyu" <hlim at gmac.com> wrote:
>
>> when n-1th estimates and nth estimates have absolute differences less
>> than 0.001 for all three parameters, the iteration must stop
>
>> I am using nlminb optimization function
>
> nlminb function uses the PORT library. According to [1], the closest
> thing PORT has to what you want is the notion of X-convergence,
> namely, stopping when max(scale * abs(x - xstar))/max(scale * abs(x +
> xstar)) is considered to be below control$x.tol (with xstar being
> supposed local minimiser and scale being all ones by default). Using
> it as an absolute stopping criterion in x requires knowledge of at
> least order of magnitude of xstar, though, so it might not be feasible.
>
> Note that ?nlminb says in the description that it is there "for
> historical compatibility."
>
> The nloptr package offers an xtol_abs option [2] that results in the
> behaviour you want.
>
The information in this transmission is confidential and intended only for the recipient listed above. If you are not the intended recipient, please advise the sender immediately by reply e-mail and delete this message and any attachments without retaining a copy. If you are not the intended recipient, you are hereby notified that any disclosure, copying or distribution of this message, or the taking of any action based upon it, is strictly prohibited.

From ycd|ng @end|ng |rom coh@org  Wed Apr  8 02:04:45 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Wed, 8 Apr 2020 00:04:45 +0000
Subject: [R] to create a new variable based on values in other variables
In-Reply-To: <CAGxFJbRMJc+YBH8DCqPYc8M3qKDfStFh9LiPrZxVH54+dMkxOg@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113D89DD@PPWEXCH2KX14.coh.org>,
 <CAGxFJbRMJc+YBH8DCqPYc8M3qKDfStFh9LiPrZxVH54+dMkxOg@mail.gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113D8A9C@PPWEXCH2KX14.coh.org>

Hi Bert,

your code worked perfect.  you always make me learn new R code skills!

Thank you so much!!

Ding
________________________________________
From: Bert Gunter [bgunter.4567 at gmail.com]
Sent: Tuesday, April 7, 2020 12:53 PM
To: Yuan Chun Ding
Cc: r-help mailing list
Subject: Re: [R] to create a new variable based on values in other variables

You can use subscripting to generalize and avoid multiply nested
ifelse's which, I agree, can be a nightmare. However, you have to be
very careful about the logic of the conditions you create and the
order in which you apply them. It is very easy to wipe out an earlier
relationship with a later one (I speak from sad experience here). Note
that because the following uses subscripting, it's vectorized. But you
of course have to set up all your conditions manually. Note that your
last example condition is redundant, btw. As Thierry indicated,
depending on what you do, there can be shortcuts. To keep the solution
generalizable, I have not used any.

> tem2 <-data.frame(m1=c(12, 23, 22, 23), m2=c(23, 23, 3, 5), m3 =c(12, 23, 12.5, 5))
> tem2$ravg <- rowMeans(tem2[,c("m1","m2")])
## or use with() or within() for more complex functions that  you have
to code yourself.
> cond1 <- with(tem2,m1!= 23 & m2 == 23)
> cond2  <- with(tem2, m1 == 23 & m2 != 23)
## etc.
> tem2 <- within(tem2,{
+       ravg[cond1] <- m1[cond1]
+       ravg[cond2] <- m2[cond2]
+    })
>
> tem2
  m1 m2   m3 ravg
1 12 23 12.0 12.0
2 23 23 23.0 23.0
3 22  3 12.5 12.5
4 23  5  5.0  5.0


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Tue, Apr 7, 2020 at 11:34 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Hi R users,
>
>
> I want to create a new variable, Ravg, in data frame tem2 based on values of two other variables m1 and m2.
>
> the condition:
>
> if m1 = 23 and m2 =23 then Ravg =23;
> else if m1 != 23 and m2=23 then Ravg =m1;
> else if m1 =23 and m2 !=23 then Ravg=m2;
> else Ravg=average of m1 and m2;
>
> the Ravg variable should be  same as  m3 variable in the following small example.
>
> my R code did not generate errors but not generate a new variable.
>
> Ravg <- "rare_allele"
>   tem2 <-data.frame(m1=c(12, 23, 22, 23), m2=c(23, 23, 3, 5), m3 =c(12, 23, 12.5, 5))
>   for (r in 1:nrow(tem2)) {
>   if (tem2$m1[r] ==23 & tem2$m2[r] ==23) {
>     tem2[[Ravg]][r] ==23} else if(tem2$m1[r] ==23 & tem2$m2[r] !=23){
>     tem2[[Ravg]][r] ==tem2$m2[r]} else if (tem2$m1[r] !=23 & tem2$m2[r] ==23) {
>     tem2[[Ravg]][r] ==tem2$m1[r]} else {
>     tem2[[Ravg]][r] == mean(tem2$m1[r] + tem2$m2[r])}
>                           }
>
> Thank you,
>
> Ding
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!5Ho4zb8Yy0d9gaWdgkNkC1NGMpUUY6kjUlH-XhJmj9UzTaeukRr5IuBRIePx$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!5Ho4zb8Yy0d9gaWdgkNkC1NGMpUUY6kjUlH-XhJmj9UzTaeukRr5Io0-e-EB$
> and provide commented, minimal, self-contained, reproducible code.


From p_conno||y @end|ng |rom @||ng@hot@co@nz  Wed Apr  8 07:19:38 2020
From: p_conno||y @end|ng |rom @||ng@hot@co@nz (Patrick Connolly)
Date: Wed, 8 Apr 2020 17:19:38 +1200
Subject: [R] TWITTER API environment variables
Message-ID: <20200408051938.GA4690@slingshot.co.nz>

I'm using the rtweet package which makes use of the Twitter API which
requires a token alluded to by an environment variable.

That environment variable is automatically set up from the Twitter web
site and takes the name TWITTER_<username> (where <username> is the
name of the user in block letters).  That worked fine on my work
computer where my username is 'work'.  When I copied that working
directory to my home computer, the environment variable became
TWITTER_HOME but the rtweet package was looking for
TWITTER_WORK. There was no error message: just a null result from the
search_users() function.

I tried editing the ~/.Renviron entry to
TWITTER_WORK=/home/home/.rtweet_token.rds

That worked for a short time but soon ceased working.  Then I noticed
a new entry had been automatically added to ~/.Renviron

TWITTER_HOME=/home/home/.rtweet_token1.rds

So now I had two environment variables which also worked for a short
time.

Recommendations please.

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From m@||||@t@ @end|ng |rom pp@|net@||  Wed Apr  8 07:55:31 2020
From: m@||||@t@ @end|ng |rom pp@|net@|| (K. Elo)
Date: Wed, 08 Apr 2020 08:55:31 +0300
Subject: [R] TWITTER API environment variables
In-Reply-To: <20200408051938.GA4690@slingshot.co.nz>
References: <20200408051938.GA4690@slingshot.co.nz>
Message-ID: <130bd81aa540ab1f8a9715f9cd5190c7642050c7.camel@pp.inet.fi>

Hi!

Have you already read this:

https://cran.r-project.org/web/packages/rtweet/vignettes/auth.html

I think they explain rather well how to use Twitter tokens with
rtweet...

HTH,
Kimmo

ke, 2020-04-08 kello 17:19 +1200, Patrick Connolly kirjoitti:
> I'm using the rtweet package which makes use of the Twitter API which
> requires a token alluded to by an environment variable.
> 
> That environment variable is automatically set up from the Twitter
> web
> site and takes the name TWITTER_<username> (where <username> is the
> name of the user in block letters).  That worked fine on my work
> computer where my username is 'work'.  When I copied that working
> directory to my home computer, the environment variable became
> TWITTER_HOME but the rtweet package was looking for
> TWITTER_WORK. There was no error message: just a null result from the
> search_users() function.
> 
> I tried editing the ~/.Renviron entry to
> TWITTER_WORK=/home/home/.rtweet_token.rds
> 
> That worked for a short time but soon ceased working.  Then I noticed
> a new entry had been automatically added to ~/.Renviron
> 
> TWITTER_HOME=/home/home/.rtweet_token1.rds
> 
> So now I had two environment variables which also worked for a short
> time.
> 
> Recommendations please.
>


From p_conno||y @end|ng |rom @||ng@hot@co@nz  Wed Apr  8 09:02:06 2020
From: p_conno||y @end|ng |rom @||ng@hot@co@nz (Patrick Connolly)
Date: Wed, 8 Apr 2020 19:02:06 +1200
Subject: [R] TWITTER API environment variables
In-Reply-To: <130bd81aa540ab1f8a9715f9cd5190c7642050c7.camel@pp.inet.fi>
References: <20200408051938.GA4690@slingshot.co.nz>
 <130bd81aa540ab1f8a9715f9cd5190c7642050c7.camel@pp.inet.fi>
Message-ID: <20200408070206.GB4690@slingshot.co.nz>

Hello Kimmo,

Yes.  I did that and it worked fine -- as far as it goes.  But it
didn't cover what to do when using the same twitter account on a
computer with a different user name -- which is what my question was
about.


On Wed, 08-Apr-2020 at 08:55AM +0300, K. Elo wrote:

|> Hi!
|> 
|> Have you already read this:
|> 
|> https://cran.r-project.org/web/packages/rtweet/vignettes/auth.html
|> 
|> I think they explain rather well how to use Twitter tokens with
|> rtweet...
|> 
|> HTH,
|> Kimmo
|> 
|> ke, 2020-04-08 kello 17:19 +1200, Patrick Connolly kirjoitti:
|> > I'm using the rtweet package which makes use of the Twitter API which
|> > requires a token alluded to by an environment variable.
|> > 
|> > That environment variable is automatically set up from the Twitter
|> > web
|> > site and takes the name TWITTER_<username> (where <username> is the
|> > name of the user in block letters).  That worked fine on my work
|> > computer where my username is 'work'.  When I copied that working
|> > directory to my home computer, the environment variable became
|> > TWITTER_HOME but the rtweet package was looking for
|> > TWITTER_WORK. There was no error message: just a null result from the
|> > search_users() function.
|> > 
|> > I tried editing the ~/.Renviron entry to
|> > TWITTER_WORK=/home/home/.rtweet_token.rds
|> > 
|> > That worked for a short time but soon ceased working.  Then I noticed
|> > a new entry had been automatically added to ~/.Renviron
|> > 
|> > TWITTER_HOME=/home/home/.rtweet_token1.rds
|> > 
|> > So now I had two environment variables which also worked for a short
|> > time.
|> > 
|> > Recommendations please.
|> >
|> 
|> ______________________________________________
|> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
|> https://stat.ethz.ch/mailman/listinfo/r-help
|> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
|> and provide commented, minimal, self-contained, reproducible code.

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Wed Apr  8 09:31:44 2020
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Wed, 8 Apr 2020 09:31:44 +0200
Subject: [R] R Markdown & chunk extraction in R
Message-ID: <5f56fff0-c4a2-1e55-0d39-583cc8b0a5b8@wiwi.hu-berlin.de>

Hi,

exists a possibility to extract chunks from a R Markdown file and to 
return them as (named) list in R?

Thanks Sigbert

-- 
https://hu.berlin/sk
https://hu.berlin/mmstat3


From @@h|mk@poor @end|ng |rom gm@||@com  Wed Apr  8 09:43:24 2020
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Wed, 8 Apr 2020 13:13:24 +0530
Subject: [R] R Markdown & chunk extraction in R
In-Reply-To: <5f56fff0-c4a2-1e55-0d39-583cc8b0a5b8@wiwi.hu-berlin.de>
References: <5f56fff0-c4a2-1e55-0d39-583cc8b0a5b8@wiwi.hu-berlin.de>
Message-ID: <CAC8=1eo4W408mSh6jmOMaZv_S+y3SteWF3wmT3Q3FrHcAeie6w@mail.gmail.com>

Dear Sigbert,

Please see this.

https://bookdown.org/yihui/rmarkdown-cookbook/purl.html

Best,
Ashim

On Wed, Apr 8, 2020 at 1:02 PM Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
wrote:

> Hi,
>
> exists a possibility to extract chunks from a R Markdown file and to
> return them as (named) list in R?
>
> Thanks Sigbert
>
> --
> https://hu.berlin/sk
> https://hu.berlin/mmstat3
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @@h|mk@poor @end|ng |rom gm@||@com  Wed Apr  8 09:53:04 2020
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Wed, 8 Apr 2020 13:23:04 +0530
Subject: [R] R Markdown & chunk extraction in R
In-Reply-To: <CAC8=1eo4W408mSh6jmOMaZv_S+y3SteWF3wmT3Q3FrHcAeie6w@mail.gmail.com>
References: <5f56fff0-c4a2-1e55-0d39-583cc8b0a5b8@wiwi.hu-berlin.de>
 <CAC8=1eo4W408mSh6jmOMaZv_S+y3SteWF3wmT3Q3FrHcAeie6w@mail.gmail.com>
Message-ID: <CAC8=1er471jZx_aGkSSA8Q6fMu7f28mew-Srx1GBC_2FsUN+ng@mail.gmail.com>

Dear Sigbert,

Also see this :-

https://www.rdocumentation.org/packages/knitr/versions/1.28/topics/knit_code

Best,
Ashim

On Wed, Apr 8, 2020 at 1:13 PM Ashim Kapoor <ashimkapoor at gmail.com> wrote:

> Dear Sigbert,
>
> Please see this.
>
> https://bookdown.org/yihui/rmarkdown-cookbook/purl.html
>
> Best,
> Ashim
>
> On Wed, Apr 8, 2020 at 1:02 PM Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
> wrote:
>
>> Hi,
>>
>> exists a possibility to extract chunks from a R Markdown file and to
>> return them as (named) list in R?
>>
>> Thanks Sigbert
>>
>> --
>> https://hu.berlin/sk
>> https://hu.berlin/mmstat3
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From m@||||@t@ @end|ng |rom pp@|net@||  Wed Apr  8 11:32:04 2020
From: m@||||@t@ @end|ng |rom pp@|net@|| (K. Elo)
Date: Wed, 08 Apr 2020 12:32:04 +0300
Subject: [R] TWITTER API environment variables
In-Reply-To: <20200408070206.GB4690@slingshot.co.nz>
References: <20200408051938.GA4690@slingshot.co.nz>
 <130bd81aa540ab1f8a9715f9cd5190c7642050c7.camel@pp.inet.fi>
 <20200408070206.GB4690@slingshot.co.nz>
Message-ID: <24de83f433d028f764716b6140f33ab3a3ff7918.camel@pp.inet.fi>

Hi again,

ok, I see. How about repeating the steps described in the tutorial on
your second computer instead of cloning the settings from the computer
#1? There might be some other settings not correctly copied.

HTH,
Kimmo

ke, 2020-04-08 kello 19:02 +1200, Patrick Connolly kirjoitti:
> Hello Kimmo,
> 
> Yes.  I did that and it worked fine -- as far as it goes.  But it
> didn't cover what to do when using the same twitter account on a
> computer with a different user name -- which is what my question was
> about.
> 
> 
> On Wed, 08-Apr-2020 at 08:55AM +0300, K. Elo wrote:
> 
> > > Hi!
> > > 
> > > Have you already read this:
> > > 
> > > 
https://cran.r-project.org/web/packages/rtweet/vignettes/auth.html
> > > 
> > > I think they explain rather well how to use Twitter tokens with
> > > rtweet...
> > > 
> > > HTH,
> > > Kimmo
> > > 
> > > ke, 2020-04-08 kello 17:19 +1200, Patrick Connolly kirjoitti:
> > > > I'm using the rtweet package which makes use of the Twitter API
> > > > which
> > > > requires a token alluded to by an environment variable.
> > > > 
> > > > That environment variable is automatically set up from the
> > > > Twitter
> > > > web
> > > > site and takes the name TWITTER_<username> (where <username> is
> > > > the
> > > > name of the user in block letters).  That worked fine on my
> > > > work
> > > > computer where my username is 'work'.  When I copied that
> > > > working
> > > > directory to my home computer, the environment variable became
> > > > TWITTER_HOME but the rtweet package was looking for
> > > > TWITTER_WORK. There was no error message: just a null result
> > > > from the
> > > > search_users() function.
> > > > 
> > > > I tried editing the ~/.Renviron entry to
> > > > TWITTER_WORK=/home/home/.rtweet_token.rds
> > > > 
> > > > That worked for a short time but soon ceased working.  Then I
> > > > noticed
> > > > a new entry had been automatically added to ~/.Renviron
> > > > 
> > > > TWITTER_HOME=/home/home/.rtweet_token1.rds
> > > > 
> > > > So now I had two environment variables which also worked for a
> > > > short
> > > > time.
> > > > 
> > > > Recommendations please.
> > > > 
> > > 
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide 
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible
> > > code.
> 
>


From x|e @end|ng |rom y|hu|@n@me  Wed Apr  8 17:17:25 2020
From: x|e @end|ng |rom y|hu|@n@me (Yihui Xie)
Date: Wed, 8 Apr 2020 10:17:25 -0500
Subject: [R] R Markdown & chunk extraction in R
In-Reply-To: <CAC8=1er471jZx_aGkSSA8Q6fMu7f28mew-Srx1GBC_2FsUN+ng@mail.gmail.com>
References: <5f56fff0-c4a2-1e55-0d39-583cc8b0a5b8@wiwi.hu-berlin.de>
 <CAC8=1eo4W408mSh6jmOMaZv_S+y3SteWF3wmT3Q3FrHcAeie6w@mail.gmail.com>
 <CAC8=1er471jZx_aGkSSA8Q6fMu7f28mew-Srx1GBC_2FsUN+ng@mail.gmail.com>
Message-ID: <CANROs4d9zvdQqEryv5+9Py+ar5LikptsNhxH-i-5EHcT1T6XJA@mail.gmail.com>

And please note that knitr::knit_code$get() only works (i.e. returns a
named list of code chunks) inside a knitr document when the document
_is being knitted_. It doesn't work outside the document. Ideally, you
should use the document parser of knitr, but it is not exported.

Regards,
Yihui
--
https://yihui.org

On Wed, Apr 8, 2020 at 2:54 AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
>
> Dear Sigbert,
>
> Also see this :-
>
> https://www.rdocumentation.org/packages/knitr/versions/1.28/topics/knit_code
>
> Best,
> Ashim
>
> On Wed, Apr 8, 2020 at 1:13 PM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
>
> > Dear Sigbert,
> >
> > Please see this.
> >
> > https://bookdown.org/yihui/rmarkdown-cookbook/purl.html
> >
> > Best,
> > Ashim
> >
> > On Wed, Apr 8, 2020 at 1:02 PM Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
> > wrote:
> >
> >> Hi,
> >>
> >> exists a possibility to extract chunks from a R Markdown file and to
> >> return them as (named) list in R?
> >>
> >> Thanks Sigbert
> >>
> >> --
> >> https://hu.berlin/sk
> >> https://hu.berlin/mmstat3
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @@h|mk@poor @end|ng |rom gm@||@com  Wed Apr  8 17:24:17 2020
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Wed, 8 Apr 2020 20:54:17 +0530
Subject: [R] R Markdown & chunk extraction in R
In-Reply-To: <CANROs4d9zvdQqEryv5+9Py+ar5LikptsNhxH-i-5EHcT1T6XJA@mail.gmail.com>
References: <5f56fff0-c4a2-1e55-0d39-583cc8b0a5b8@wiwi.hu-berlin.de>
 <CAC8=1eo4W408mSh6jmOMaZv_S+y3SteWF3wmT3Q3FrHcAeie6w@mail.gmail.com>
 <CAC8=1er471jZx_aGkSSA8Q6fMu7f28mew-Srx1GBC_2FsUN+ng@mail.gmail.com>
 <CANROs4d9zvdQqEryv5+9Py+ar5LikptsNhxH-i-5EHcT1T6XJA@mail.gmail.com>
Message-ID: <CAC8=1epN-FssVEmuFK9aLVMaz5-Xn+ksT+rVUKW4nHkT3UiP6A@mail.gmail.com>

Dear Yihui,

Can we not 1st use read_chunk to import an Rmd and then do knit_code()$get
? I could be mistaken. Please correct me if I am wrong.

Best,
Ashim

On Wed, Apr 8, 2020 at 8:47 PM Yihui Xie <xie at yihui.name> wrote:

> And please note that knitr::knit_code$get() only works (i.e. returns a
> named list of code chunks) inside a knitr document when the document
> _is being knitted_. It doesn't work outside the document. Ideally, you
> should use the document parser of knitr, but it is not exported.
>
> Regards,
> Yihui
> --
> https://yihui.org
>
> On Wed, Apr 8, 2020 at 2:54 AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
> >
> > Dear Sigbert,
> >
> > Also see this :-
> >
> >
> https://www.rdocumentation.org/packages/knitr/versions/1.28/topics/knit_code
> >
> > Best,
> > Ashim
> >
> > On Wed, Apr 8, 2020 at 1:13 PM Ashim Kapoor <ashimkapoor at gmail.com>
> wrote:
> >
> > > Dear Sigbert,
> > >
> > > Please see this.
> > >
> > > https://bookdown.org/yihui/rmarkdown-cookbook/purl.html
> > >
> > > Best,
> > > Ashim
> > >
> > > On Wed, Apr 8, 2020 at 1:02 PM Sigbert Klinke <
> sigbert at wiwi.hu-berlin.de>
> > > wrote:
> > >
> > >> Hi,
> > >>
> > >> exists a possibility to extract chunks from a R Markdown file and to
> > >> return them as (named) list in R?
> > >>
> > >> Thanks Sigbert
> > >>
> > >> --
> > >> https://hu.berlin/sk
> > >> https://hu.berlin/mmstat3
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > >> http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> > >>
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jeremyc|@rkb|o @end|ng |rom gm@||@com  Wed Apr  8 18:22:28 2020
From: jeremyc|@rkb|o @end|ng |rom gm@||@com (A Biologist)
Date: Wed, 8 Apr 2020 18:22:28 +0200
Subject: [R] R create .docx file ?
Message-ID: <CACyTWRZvrrVnmZaV31rXp-pz8KuWz0ys4TY74WB=CUBcCvuqyw@mail.gmail.com>

Dear All,

Mac Catalina - R 3.6.3 - all up-to-date packages.
I would like to re-create the functionality which was found in the package
{ReporteRs} by creating a .docx file in a folder on my computer from within
R - which can subsequently be used by the {officer} function read_docx.
The function read_docx on my system does NOT create a new document, and
neither does the following code:
new.word.doc=function(){ report = read_docx(path ..name.. ".docx"))
return(report) }
doc=new.word.doc()

I can use {base} file.create to create a file with an extension .docx - but
apparently this is not a .docx file - and read_docx can't read it.
Is there another R package or function which I can use in order to create
(and then close the link to R so that it can be used by another package) a
.docx file ?

Many thanks in advance.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Apr  8 18:31:41 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 8 Apr 2020 09:31:41 -0700
Subject: [R] R create .docx file ?
In-Reply-To: <CACyTWRZvrrVnmZaV31rXp-pz8KuWz0ys4TY74WB=CUBcCvuqyw@mail.gmail.com>
References: <CACyTWRZvrrVnmZaV31rXp-pz8KuWz0ys4TY74WB=CUBcCvuqyw@mail.gmail.com>
Message-ID: <CAGxFJbR=TZi4i2LXcuLoFq+dgJVRp-O3cfJEOs48kUo__jWgfQ@mail.gmail.com>

This sounds like the sort of specialized question that should be directed
to the maintainer (?maintainer) rather than to a general Help list such as
this.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Apr 8, 2020 at 9:23 AM A Biologist <jeremyclarkbio at gmail.com> wrote:

> Dear All,
>
> Mac Catalina - R 3.6.3 - all up-to-date packages.
> I would like to re-create the functionality which was found in the package
> {ReporteRs} by creating a .docx file in a folder on my computer from within
> R - which can subsequently be used by the {officer} function read_docx.
> The function read_docx on my system does NOT create a new document, and
> neither does the following code:
> new.word.doc=function(){ report = read_docx(path ..name.. ".docx"))
> return(report) }
> doc=new.word.doc()
>
> I can use {base} file.create to create a file with an extension .docx - but
> apparently this is not a .docx file - and read_docx can't read it.
> Is there another R package or function which I can use in order to create
> (and then close the link to R so that it can be used by another package) a
> .docx file ?
>
> Many thanks in advance.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Apr  8 18:56:04 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 08 Apr 2020 09:56:04 -0700
Subject: [R] R create .docx file ?
In-Reply-To: <CAGxFJbR=TZi4i2LXcuLoFq+dgJVRp-O3cfJEOs48kUo__jWgfQ@mail.gmail.com>
References: <CACyTWRZvrrVnmZaV31rXp-pz8KuWz0ys4TY74WB=CUBcCvuqyw@mail.gmail.com>
 <CAGxFJbR=TZi4i2LXcuLoFq+dgJVRp-O3cfJEOs48kUo__jWgfQ@mail.gmail.com>
Message-ID: <8E5526F2-4B61-4EDD-81E6-E1F0D4DEB0B4@dcn.davis.ca.us>

But before hassling the maintainer the OP should read the package vignettes and run some examples... read_docx does not write to any files, so complaining that it doesn't will be fruitless. 

On April 8, 2020 9:31:41 AM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>This sounds like the sort of specialized question that should be
>directed
>to the maintainer (?maintainer) rather than to a general Help list such
>as
>this.
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Wed, Apr 8, 2020 at 9:23 AM A Biologist <jeremyclarkbio at gmail.com>
>wrote:
>
>> Dear All,
>>
>> Mac Catalina - R 3.6.3 - all up-to-date packages.
>> I would like to re-create the functionality which was found in the
>package
>> {ReporteRs} by creating a .docx file in a folder on my computer from
>within
>> R - which can subsequently be used by the {officer} function
>read_docx.
>> The function read_docx on my system does NOT create a new document,
>and
>> neither does the following code:
>> new.word.doc=function(){ report = read_docx(path ..name.. ".docx"))
>> return(report) }
>> doc=new.word.doc()
>>
>> I can use {base} file.create to create a file with an extension .docx
>- but
>> apparently this is not a .docx file - and read_docx can't read it.
>> Is there another R package or function which I can use in order to
>create
>> (and then close the link to R so that it can be used by another
>package) a
>> .docx file ?
>>
>> Many thanks in advance.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Apr  8 19:08:09 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 8 Apr 2020 10:08:09 -0700
Subject: [R] R create .docx file ?
In-Reply-To: <8E5526F2-4B61-4EDD-81E6-E1F0D4DEB0B4@dcn.davis.ca.us>
References: <CACyTWRZvrrVnmZaV31rXp-pz8KuWz0ys4TY74WB=CUBcCvuqyw@mail.gmail.com>
 <CAGxFJbR=TZi4i2LXcuLoFq+dgJVRp-O3cfJEOs48kUo__jWgfQ@mail.gmail.com>
 <8E5526F2-4B61-4EDD-81E6-E1F0D4DEB0B4@dcn.davis.ca.us>
Message-ID: <CAGxFJbRvzg=nKyDThGeSasJNznA5dgN9D8SOw8uQr7zTdD+EoA@mail.gmail.com>

But the OP explicitly notes that the read_docx package does *not* write
files and asks whether there are *other* packages or functions that provide
that functionality. It still seems to me that the ReporteR maintainer might
be the best place to go for that info, although there is certainly no
assurance that he can provide it.

Bert

On Wed, Apr 8, 2020 at 9:56 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> But before hassling the maintainer the OP should read the package
> vignettes and run some examples... read_docx does not write to any files,
> so complaining that it doesn't will be fruitless.
>
> On April 8, 2020 9:31:41 AM PDT, Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
> >This sounds like the sort of specialized question that should be
> >directed
> >to the maintainer (?maintainer) rather than to a general Help list such
> >as
> >this.
> >
> >Bert Gunter
> >
> >"The trouble with having an open mind is that people keep coming along
> >and
> >sticking things into it."
> >-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> >On Wed, Apr 8, 2020 at 9:23 AM A Biologist <jeremyclarkbio at gmail.com>
> >wrote:
> >
> >> Dear All,
> >>
> >> Mac Catalina - R 3.6.3 - all up-to-date packages.
> >> I would like to re-create the functionality which was found in the
> >package
> >> {ReporteRs} by creating a .docx file in a folder on my computer from
> >within
> >> R - which can subsequently be used by the {officer} function
> >read_docx.
> >> The function read_docx on my system does NOT create a new document,
> >and
> >> neither does the following code:
> >> new.word.doc=function(){ report = read_docx(path ..name.. ".docx"))
> >> return(report) }
> >> doc=new.word.doc()
> >>
> >> I can use {base} file.create to create a file with an extension .docx
> >- but
> >> apparently this is not a .docx file - and read_docx can't read it.
> >> Is there another R package or function which I can use in order to
> >create
> >> (and then close the link to R so that it can be used by another
> >package) a
> >> .docx file ?
> >>
> >> Many thanks in advance.
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Apr  8 19:21:49 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 08 Apr 2020 10:21:49 -0700
Subject: [R] R create .docx file ?
In-Reply-To: <CAGxFJbRvzg=nKyDThGeSasJNznA5dgN9D8SOw8uQr7zTdD+EoA@mail.gmail.com>
References: <CACyTWRZvrrVnmZaV31rXp-pz8KuWz0ys4TY74WB=CUBcCvuqyw@mail.gmail.com>
 <CAGxFJbR=TZi4i2LXcuLoFq+dgJVRp-O3cfJEOs48kUo__jWgfQ@mail.gmail.com>
 <8E5526F2-4B61-4EDD-81E6-E1F0D4DEB0B4@dcn.davis.ca.us>
 <CAGxFJbRvzg=nKyDThGeSasJNznA5dgN9D8SOw8uQr7zTdD+EoA@mail.gmail.com>
Message-ID: <E2A1D3A9-5818-434F-BA93-38A95B815D35@dcn.davis.ca.us>

The OP clearly hasn't followed the excellent documentation... this is not a maintainer problem. It is the act of printing the completed object that puts a file on disk.

However, the package author recommends in the README that help be requested from stackoverflow, as the mailing list Posting Guidelines do warn that contributed packages are not technically on topic in R-help. (Simply from a practicality standpoint... there are thousands of them, each with potentially voluminous details to distract from the R language itself.)

On April 8, 2020 10:08:09 AM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>But the OP explicitly notes that the read_docx package does *not* write
>files and asks whether there are *other* packages or functions that
>provide
>that functionality. It still seems to me that the ReporteR maintainer
>might
>be the best place to go for that info, although there is certainly no
>assurance that he can provide it.
>
>Bert
>
>On Wed, Apr 8, 2020 at 9:56 AM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> But before hassling the maintainer the OP should read the package
>> vignettes and run some examples... read_docx does not write to any
>files,
>> so complaining that it doesn't will be fruitless.
>>
>> On April 8, 2020 9:31:41 AM PDT, Bert Gunter <bgunter.4567 at gmail.com>
>> wrote:
>> >This sounds like the sort of specialized question that should be
>> >directed
>> >to the maintainer (?maintainer) rather than to a general Help list
>such
>> >as
>> >this.
>> >
>> >Bert Gunter
>> >
>> >"The trouble with having an open mind is that people keep coming
>along
>> >and
>> >sticking things into it."
>> >-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>> >
>> >
>> >On Wed, Apr 8, 2020 at 9:23 AM A Biologist
><jeremyclarkbio at gmail.com>
>> >wrote:
>> >
>> >> Dear All,
>> >>
>> >> Mac Catalina - R 3.6.3 - all up-to-date packages.
>> >> I would like to re-create the functionality which was found in the
>> >package
>> >> {ReporteRs} by creating a .docx file in a folder on my computer
>from
>> >within
>> >> R - which can subsequently be used by the {officer} function
>> >read_docx.
>> >> The function read_docx on my system does NOT create a new
>document,
>> >and
>> >> neither does the following code:
>> >> new.word.doc=function(){ report = read_docx(path ..name..
>".docx"))
>> >> return(report) }
>> >> doc=new.word.doc()
>> >>
>> >> I can use {base} file.create to create a file with an extension
>.docx
>> >- but
>> >> apparently this is not a .docx file - and read_docx can't read it.
>> >> Is there another R package or function which I can use in order to
>> >create
>> >> (and then close the link to R so that it can be used by another
>> >package) a
>> >> .docx file ?
>> >>
>> >> Many thanks in advance.
>> >>
>> >>         [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >>
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> >______________________________________________
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >https://stat.ethz.ch/mailman/listinfo/r-help
>> >PLEASE do read the posting guide
>> >http://www.R-project.org/posting-guide.html
>> >and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>

-- 
Sent from my phone. Please excuse my brevity.


From x|e @end|ng |rom y|hu|@n@me  Wed Apr  8 21:45:42 2020
From: x|e @end|ng |rom y|hu|@n@me (Yihui Xie)
Date: Wed, 8 Apr 2020 14:45:42 -0500
Subject: [R] R Markdown & chunk extraction in R
In-Reply-To: <CAC8=1epN-FssVEmuFK9aLVMaz5-Xn+ksT+rVUKW4nHkT3UiP6A@mail.gmail.com>
References: <5f56fff0-c4a2-1e55-0d39-583cc8b0a5b8@wiwi.hu-berlin.de>
 <CAC8=1eo4W408mSh6jmOMaZv_S+y3SteWF3wmT3Q3FrHcAeie6w@mail.gmail.com>
 <CAC8=1er471jZx_aGkSSA8Q6fMu7f28mew-Srx1GBC_2FsUN+ng@mail.gmail.com>
 <CANROs4d9zvdQqEryv5+9Py+ar5LikptsNhxH-i-5EHcT1T6XJA@mail.gmail.com>
 <CAC8=1epN-FssVEmuFK9aLVMaz5-Xn+ksT+rVUKW4nHkT3UiP6A@mail.gmail.com>
Message-ID: <CANROs4coPgpXjmxYn=0kYqLE4oqsz_NioN_4TXqT962cwR+T7w@mail.gmail.com>

Hi Ashim,

read_chunk() can only read R scripts.

Regards,
Yihui
--
https://yihui.org

On Wed, Apr 8, 2020 at 10:24 AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
>
> Dear Yihui,
>
> Can we not 1st use read_chunk to import an Rmd and then do knit_code()$get ? I could be mistaken. Please correct me if I am wrong.
>
> Best,
> Ashim
>
> On Wed, Apr 8, 2020 at 8:47 PM Yihui Xie <xie at yihui.name> wrote:
>>
>> And please note that knitr::knit_code$get() only works (i.e. returns a
>> named list of code chunks) inside a knitr document when the document
>> _is being knitted_. It doesn't work outside the document. Ideally, you
>> should use the document parser of knitr, but it is not exported.
>>
>> Regards,
>> Yihui
>> --
>> https://yihui.org
>>
>> On Wed, Apr 8, 2020 at 2:54 AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
>> >
>> > Dear Sigbert,
>> >
>> > Also see this :-
>> >
>> > https://www.rdocumentation.org/packages/knitr/versions/1.28/topics/knit_code
>> >
>> > Best,
>> > Ashim
>> >
>> > On Wed, Apr 8, 2020 at 1:13 PM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
>> >
>> > > Dear Sigbert,
>> > >
>> > > Please see this.
>> > >
>> > > https://bookdown.org/yihui/rmarkdown-cookbook/purl.html
>> > >
>> > > Best,
>> > > Ashim
>> > >
>> > > On Wed, Apr 8, 2020 at 1:02 PM Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
>> > > wrote:
>> > >
>> > >> Hi,
>> > >>
>> > >> exists a possibility to extract chunks from a R Markdown file and to
>> > >> return them as (named) list in R?
>> > >>
>> > >> Thanks Sigbert
>> > >>
>> > >> --
>> > >> https://hu.berlin/sk
>> > >> https://hu.berlin/mmstat3
>> > >>
>> > >> ______________________________________________
>> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > >> https://stat.ethz.ch/mailman/listinfo/r-help
>> > >> PLEASE do read the posting guide
>> > >> http://www.R-project.org/posting-guide.html
>> > >> and provide commented, minimal, self-contained, reproducible code.
>> > >>
>> > >
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Apr  8 22:17:38 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Wed, 8 Apr 2020 15:17:38 -0500
Subject: [R] how to create a new column with conditions
Message-ID: <CAF9-5jN6E7=Qqsh+z0Y_4TQnOF-fxQB1B+XtPbnUsSEX0rtOrQ@mail.gmail.com>

Hi,

I have a data frame like this:

> head(a)
            FID LASER2 CURRELIG PLASER RTNPTHY
1 fam1000_G1000      1        1      1       1
2 fam1001_G1001      1        1      1       1
3 fam1003_G1003      2        1      2       2
4 fam1005_G1005      1        1      1       2
5 fam1009_G1009      1        1      1       2
6 fam1052_G1052      1        1      1       2
...

I would like to create a new column called PHENO which would satisfy these
conditions:

if CURRELIG=1 and RTNPTHY=1 than PHENO=1
if PLASER=2 than PHENO=2
otherwise is -9

Thanks
Ana

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Apr  8 22:31:45 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 08 Apr 2020 13:31:45 -0700
Subject: [R] how to create a new column with conditions
In-Reply-To: <CAF9-5jN6E7=Qqsh+z0Y_4TQnOF-fxQB1B+XtPbnUsSEX0rtOrQ@mail.gmail.com>
References: <CAF9-5jN6E7=Qqsh+z0Y_4TQnOF-fxQB1B+XtPbnUsSEX0rtOrQ@mail.gmail.com>
Message-ID: <43733584-5519-4DFD-AADB-8DBF11595B45@dcn.davis.ca.us>

Now that you have been shown how to do this, post your (non-working) code next time. And configure your email program to send plain text so we will see what you saw.

a$PHENO <- ifelse( a$CURRELIG==1
                 & a$RTNPTHY==1
                 , 1
                 ,  ifelse( a$PLASER==2
                          , 2
                          , -9 ) )

or

a$PHENO <- with( a
               , ifelse( CURRELIG==1
                       & RTNPTHY==1
                       , 1
                       , ifelse( PLASER==2
                               , 2
                               , -9 ) ) )


On April 8, 2020 1:17:38 PM PDT, Ana Marija <sokovic.anamarija at gmail.com> wrote:
>Hi,
>
>I have a data frame like this:
>
>> head(a)
>            FID LASER2 CURRELIG PLASER RTNPTHY
>1 fam1000_G1000      1        1      1       1
>2 fam1001_G1001      1        1      1       1
>3 fam1003_G1003      2        1      2       2
>4 fam1005_G1005      1        1      1       2
>5 fam1009_G1009      1        1      1       2
>6 fam1052_G1052      1        1      1       2
>...
>
>I would like to create a new column called PHENO which would satisfy
>these
>conditions:
>
>if CURRELIG=1 and RTNPTHY=1 than PHENO=1
>if PLASER=2 than PHENO=2
>otherwise is -9
>
>Thanks
>Ana
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From wdun|@p @end|ng |rom t|bco@com  Wed Apr  8 23:06:35 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 8 Apr 2020 14:06:35 -0700
Subject: [R] how to create a new column with conditions
In-Reply-To: <43733584-5519-4DFD-AADB-8DBF11595B45@dcn.davis.ca.us>
References: <CAF9-5jN6E7=Qqsh+z0Y_4TQnOF-fxQB1B+XtPbnUsSEX0rtOrQ@mail.gmail.com>
 <43733584-5519-4DFD-AADB-8DBF11595B45@dcn.davis.ca.us>
Message-ID: <CAF8bMcbqMHz68mVEe7371e7A0UddJGPFpNXNFRfJt3MMLJ0Xvw@mail.gmail.com>

>I would like to create a new column called PHENO which would satisfy
>these
>conditions:
>
>if CURRELIG=1 and RTNPTHY=1 than PHENO=1
>if PLASER=2 than PHENO=2
>otherwise is -9

I assume that if CURRELIG==1 and RNPTHY==1 and PLASER==2 then PHENO should
be 1.  Or should that case flag a data error?.

In the former case try
a$PHENO <- with(a, {
    tmp <- rep(-9, length(CURRELIG)),
    tmp[CURRELIG==1 & RTNPTHY==1] <- 1
    tmp[PLASER==2] <- 2
    tmp})

In the latter case add some calls to stop() or warning() if any of the
"impossible" cases are seen.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Wed, Apr 8, 2020 at 1:32 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Now that you have been shown how to do this, post your (non-working) code
> next time. And configure your email program to send plain text so we will
> see what you saw.
>
> a$PHENO <- ifelse( a$CURRELIG==1
>                  & a$RTNPTHY==1
>                  , 1
>                  ,  ifelse( a$PLASER==2
>                           , 2
>                           , -9 ) )
>
> or
>
> a$PHENO <- with( a
>                , ifelse( CURRELIG==1
>                        & RTNPTHY==1
>                        , 1
>                        , ifelse( PLASER==2
>                                , 2
>                                , -9 ) ) )
>
>
> On April 8, 2020 1:17:38 PM PDT, Ana Marija <sokovic.anamarija at gmail.com>
> wrote:
> >Hi,
> >
> >I have a data frame like this:
> >
> >> head(a)
> >            FID LASER2 CURRELIG PLASER RTNPTHY
> >1 fam1000_G1000      1        1      1       1
> >2 fam1001_G1001      1        1      1       1
> >3 fam1003_G1003      2        1      2       2
> >4 fam1005_G1005      1        1      1       2
> >5 fam1009_G1009      1        1      1       2
> >6 fam1052_G1052      1        1      1       2
> >...
> >
> >I would like to create a new column called PHENO which would satisfy
> >these
> >conditions:
> >
> >if CURRELIG=1 and RTNPTHY=1 than PHENO=1
> >if PLASER=2 than PHENO=2
> >otherwise is -9
> >
> >Thanks
> >Ana
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jen@r@@mu@ @end|ng |rom gm@||@com  Wed Apr  8 23:33:52 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Wed, 8 Apr 2020 23:33:52 +0200
Subject: [R] how to create a new column with conditions
In-Reply-To: <CAF8bMcbqMHz68mVEe7371e7A0UddJGPFpNXNFRfJt3MMLJ0Xvw@mail.gmail.com>
References: <CAF9-5jN6E7=Qqsh+z0Y_4TQnOF-fxQB1B+XtPbnUsSEX0rtOrQ@mail.gmail.com>
 <43733584-5519-4DFD-AADB-8DBF11595B45@dcn.davis.ca.us>
 <CAF8bMcbqMHz68mVEe7371e7A0UddJGPFpNXNFRfJt3MMLJ0Xvw@mail.gmail.com>
Message-ID: <20200408213352.GB187643@jrl.uk.to>

On April 8, 2020 1:17:38 PM PDT, Ana Marija wrote:
| Hi,
| 
| I have a data frame like this:

Or ... *drum-roll* ... you could use plain 
old indexing.  Have a look:

a <-
"FID	LASER2	CURRELIG	PLASER	RTNPTHY
fam1000_G1000	1	1	1	1
fam1001_G1001	1	1	1	1
fam1003_G1003	2	1	2	2
fam1005_G1005	1	1	1	2
fam1009_G1009	1	1	1	2
fam1052_G1052	1	1	1	2"
a <- read.delim(text=a)

a$PHENO <- -9
a[a$CURRELIG==1 & a$RTNPTHY==1,"PHENO"] <- 1
a[a$PLASER==2,"PHENO"] <- 2

Best,
Rasmus


From p_conno||y @end|ng |rom @||ng@hot@co@nz  Thu Apr  9 01:00:29 2020
From: p_conno||y @end|ng |rom @||ng@hot@co@nz (Patrick Connolly)
Date: Thu, 9 Apr 2020 11:00:29 +1200
Subject: [R] TWITTER API environment variables
In-Reply-To: <24de83f433d028f764716b6140f33ab3a3ff7918.camel@pp.inet.fi>
References: <20200408051938.GA4690@slingshot.co.nz>
 <130bd81aa540ab1f8a9715f9cd5190c7642050c7.camel@pp.inet.fi>
 <20200408070206.GB4690@slingshot.co.nz>
 <24de83f433d028f764716b6140f33ab3a3ff7918.camel@pp.inet.fi>
Message-ID: <20200408230029.GC4690@slingshot.co.nz>



Apart from allowing the twitter app access, I didn't do anything to
adjust the settings other than editing the ~/.Renviron file which set up
the environment variable/s.

It appears to me that they are appropriate since they work if I use R
from the bash prompt or Rstudio.  The problem is apparantly with ESS.
I really don't want to use Rstudio.  It's so clunky to edit and debug
functions, and of course, the bash CLI is even more clunky.

I'll ask on the ESS list.



On Wed, 08-Apr-2020 at 12:32PM +0300, K. Elo wrote:

|> Hi again,
|> 
|> ok, I see. How about repeating the steps described in the tutorial on
|> your second computer instead of cloning the settings from the computer
|> #1? There might be some other settings not correctly copied.
|> 
|> HTH,
|> Kimmo
|> 
|> ke, 2020-04-08 kello 19:02 +1200, Patrick Connolly kirjoitti:
|> > Hello Kimmo,
|> > 
|> > Yes.  I did that and it worked fine -- as far as it goes.  But it
|> > didn't cover what to do when using the same twitter account on a
|> > computer with a different user name -- which is what my question was
|> > about.
|> > 
|> > 
|> > On Wed, 08-Apr-2020 at 08:55AM +0300, K. Elo wrote:
|> > 
|> > > > Hi!
|> > > > 
|> > > > Have you already read this:
|> > > > 
|> > > > 
|> https://cran.r-project.org/web/packages/rtweet/vignettes/auth.html
|> > > > 
|> > > > I think they explain rather well how to use Twitter tokens with
|> > > > rtweet...
|> > > > 
|> > > > HTH,
|> > > > Kimmo
|> > > > 
|> > > > ke, 2020-04-08 kello 17:19 +1200, Patrick Connolly kirjoitti:
|> > > > > I'm using the rtweet package which makes use of the Twitter API
|> > > > > which
|> > > > > requires a token alluded to by an environment variable.
|> > > > > 
|> > > > > That environment variable is automatically set up from the
|> > > > > Twitter
|> > > > > web
|> > > > > site and takes the name TWITTER_<username> (where <username> is
|> > > > > the
|> > > > > name of the user in block letters).  That worked fine on my
|> > > > > work
|> > > > > computer where my username is 'work'.  When I copied that
|> > > > > working
|> > > > > directory to my home computer, the environment variable became
|> > > > > TWITTER_HOME but the rtweet package was looking for
|> > > > > TWITTER_WORK. There was no error message: just a null result
|> > > > > from the
|> > > > > search_users() function.
|> > > > > 
|> > > > > I tried editing the ~/.Renviron entry to
|> > > > > TWITTER_WORK=/home/home/.rtweet_token.rds
|> > > > > 
|> > > > > That worked for a short time but soon ceased working.  Then I
|> > > > > noticed
|> > > > > a new entry had been automatically added to ~/.Renviron
|> > > > > 
|> > > > > TWITTER_HOME=/home/home/.rtweet_token1.rds
|> > > > > 
|> > > > > So now I had two environment variables which also worked for a
|> > > > > short
|> > > > > time.
|> > > > > 
|> > > > > Recommendations please.

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Apr  9 17:12:04 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 09 Apr 2020 08:12:04 -0700
Subject: [R] R create .docx file ?
In-Reply-To: <b9061db7-3821-400f-81d9-0965580af6db@email.android.com>
References: <b9061db7-3821-400f-81d9-0965580af6db@email.android.com>
Message-ID: <58D36CD1-BDA6-4E16-8D76-AEACCFA21A81@dcn.davis.ca.us>

Rmarkdown is my first choice as well... but the options available there for controlling PDF output via LaTeX macros are incredibly powerful, while the options available for controlling Word output from Rmarkdown are extremely limited by comparison. ReporteRs and officeR provide considerably more fine-grained control over Word formatting and layout than Rmarkdown supports, so for meshing R output into an existing Word-based workflow without lots of manual tweaking there is no comparison.

On April 8, 2020 10:12:36 PM PDT, cpolwart at chemo.org.uk wrote:
>DocX is quite a complex file..it's actually a zip file which contains
>an XML file describing the text and sub folders with other content such
>as images.
>
>
>The description of need is a little vague - but may be the way it is
>described. Rmarkdown For instance can generate output to word. 
>ODFweave (now discontinued I think) can output to odx which can be
>opened in word. Although it starts with a odx file and generated a new
>version of it.
>
>
>I use Rmarkdown to generate reports (mine are PDF) and if someone said
>could I do a word document report I'd start with markdown...
>
>
>
>
>
>On 8 Apr 2020 18:08, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>But the OP explicitly notes that the read_docx package does *not* write
>
>files and asks whether there are *other* packages or functions that
>provide 
>that functionality. It still seems to me that the ReporteR maintainer
>might 
>be the best place to go for that info, although there is certainly no 
>assurance that he can provide it. 
>
>Bert 
>
>On Wed, Apr 8, 2020 at 9:56 AM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us> 
>wrote: 
>
>> But before hassling the maintainer the OP should read the package 
>> vignettes and run some examples... read_docx does not write to any
>files, 
>> so complaining that it doesn't will be fruitless. 
>> 
>> On April 8, 2020 9:31:41 AM PDT, Bert Gunter <bgunter.4567 at gmail.com>
>
>> wrote: 
>> >This sounds like the sort of specialized question that should be 
>> >directed 
>> >to the maintainer (?maintainer) rather than to a general Help list
>such 
>> >as 
>> >this. 
>> > 
>> >Bert Gunter 
>> > 
>> >"The trouble with having an open mind is that people keep coming
>along 
>> >and 
>> >sticking things into it." 
>> >-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip ) 
>> > 
>> > 
>> >On Wed, Apr 8, 2020 at 9:23 AM A Biologist
><jeremyclarkbio at gmail.com> 
>> >wrote: 
>> > 
>> >> Dear All, 
>> >> 
>> >> Mac Catalina - R 3.6.3 - all up-to-date packages. 
>> >> I would like to re-create the functionality which was found in the
>
>> >package 
>> >> {ReporteRs} by creating a .docx file in a folder on my computer
>from 
>> >within 
>> >> R - which can subsequently be used by the {officer} function 
>> >read_docx. 
>> >> The function read_docx on my system does NOT create a new
>document, 
>> >and 
>> >> neither does the following code: 
>> >> new.word.doc=function(){ report = read_docx(path ..name..
>".docx")) 
>> >> return(report) } 
>> >> doc=new.word.doc() 
>> >> 
>> >> I can use {base} file.create to create a file with an extension
>.docx 
>> >- but 
>> >> apparently this is not a .docx file - and read_docx can't read it.
>
>> >> Is there another R package or function which I can use in order to
>
>> >create 
>> >> (and then close the link to R so that it can be used by another 
>> >package) a 
>> >> .docx file ? 
>> >> 
>> >> Many thanks in advance. 
>> >> 
>> >>         [[alternative HTML version deleted]] 
>> >> 
>> >> ______________________________________________ 
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> >> https://stat.ethz.ch/mailman/listinfo/r-help 
>> >> PLEASE do read the posting guide 
>> >> http://www.R-project.org/posting-guide.html 
>> >> and provide commented, minimal, self-contained, reproducible code.
>
>> >> 
>> > 
>> >       [[alternative HTML version deleted]] 
>> > 
>> >______________________________________________ 
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> >https://stat.ethz.ch/mailman/listinfo/r-help 
>> >PLEASE do read the posting guide 
>> >http://www.R-project.org/posting-guide.html 
>> >and provide commented, minimal, self-contained, reproducible code. 
>> 
>> -- 
>> Sent from my phone. Please excuse my brevity. 
>> 
>
>	[[alternative HTML version deleted]] 
>
>______________________________________________ 
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>https://stat.ethz.ch/mailman/listinfo/r-help 
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html 
>and provide commented, minimal, self-contained, reproducible code. 

-- 
Sent from my phone. Please excuse my brevity.


From ||9212001 @end|ng |rom y@hoo@com  Thu Apr  9 17:00:31 2020
From: ||9212001 @end|ng |rom y@hoo@com (aiguo li)
Date: Thu, 9 Apr 2020 15:00:31 +0000 (UTC)
Subject: [R] create a r list from dataframe using the first column as list
 names
References: <561222591.3082527.1586444431196.ref@mail.yahoo.com>
Message-ID: <561222591.3082527.1586444431196@mail.yahoo.com>

Hello allI need to create a r list with each row as a list object and named with the element in the first column.? Illustrated below:> a<- as.data.frame(matrix(LETTERS[1:16],nrow = 4))> a? V1 V2 V3 V41 ?A ?E ?I ?M2 ?B ?F ?J ?N3 ?C ?G ?K ?O4 ?D ?H ?L ?P
I want the list looks like$A[1] E I MLevels: E I M
$B[1] F J NLevels: F J N
$C[1] G K OLevels: G K O
$D[1] H L PLevels: H L P

I used the script below, it does not work the way I wantlapply(split(a,a$V1), function(x) as.list(a[-1]))?
any help would be greatly appreciated!
Anna
	[[alternative HTML version deleted]]


From jeremyc|@rkb|o @end|ng |rom gm@||@com  Thu Apr  9 19:15:39 2020
From: jeremyc|@rkb|o @end|ng |rom gm@||@com (A Biologist)
Date: Thu, 9 Apr 2020 19:15:39 +0200
Subject: [R] R create .docx file ?
In-Reply-To: <58D36CD1-BDA6-4E16-8D76-AEACCFA21A81@dcn.davis.ca.us>
References: <b9061db7-3821-400f-81d9-0965580af6db@email.android.com>
 <58D36CD1-BDA6-4E16-8D76-AEACCFA21A81@dcn.davis.ca.us>
Message-ID: <CACyTWRaf=q9fy20DhgUa7NVb-jOL+tg7DLYazjg88-ZoDEhHqw@mail.gmail.com>

Many thanks ! Bert Gunter's answer is of course correct. The maintainer
suggests Stackoverflow or commercial advice - which is worrying as I have
some further questions concerning lists in [officer} - but first I'll do
some more research !


On Thu, Apr 9, 2020 at 5:12 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Rmarkdown is my first choice as well... but the options available there
> for controlling PDF output via LaTeX macros are incredibly powerful, while
> the options available for controlling Word output from Rmarkdown are
> extremely limited by comparison. ReporteRs and officeR provide considerably
> more fine-grained control over Word formatting and layout than Rmarkdown
> supports, so for meshing R output into an existing Word-based workflow
> without lots of manual tweaking there is no comparison.
>
> On April 8, 2020 10:12:36 PM PDT, cpolwart at chemo.org.uk wrote:
> >DocX is quite a complex file..it's actually a zip file which contains
> >an XML file describing the text and sub folders with other content such
> >as images.
> >
> >
> >The description of need is a little vague - but may be the way it is
> >described. Rmarkdown For instance can generate output to word.
> >ODFweave (now discontinued I think) can output to odx which can be
> >opened in word. Although it starts with a odx file and generated a new
> >version of it.
> >
> >
> >I use Rmarkdown to generate reports (mine are PDF) and if someone said
> >could I do a word document report I'd start with markdown...
> >
> >
> >
> >
> >
> >On 8 Apr 2020 18:08, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> >But the OP explicitly notes that the read_docx package does *not* write
> >
> >files and asks whether there are *other* packages or functions that
> >provide
> >that functionality. It still seems to me that the ReporteR maintainer
> >might
> >be the best place to go for that info, although there is certainly no
> >assurance that he can provide it.
> >
> >Bert
> >
> >On Wed, Apr 8, 2020 at 9:56 AM Jeff Newmiller
> ><jdnewmil at dcn.davis.ca.us>
> >wrote:
> >
> >> But before hassling the maintainer the OP should read the package
> >> vignettes and run some examples... read_docx does not write to any
> >files,
> >> so complaining that it doesn't will be fruitless.
> >>
> >> On April 8, 2020 9:31:41 AM PDT, Bert Gunter <bgunter.4567 at gmail.com>
> >
> >> wrote:
> >> >This sounds like the sort of specialized question that should be
> >> >directed
> >> >to the maintainer (?maintainer) rather than to a general Help list
> >such
> >> >as
> >> >this.
> >> >
> >> >Bert Gunter
> >> >
> >> >"The trouble with having an open mind is that people keep coming
> >along
> >> >and
> >> >sticking things into it."
> >> >-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >> >
> >> >
> >> >On Wed, Apr 8, 2020 at 9:23 AM A Biologist
> ><jeremyclarkbio at gmail.com>
> >> >wrote:
> >> >
> >> >> Dear All,
> >> >>
> >> >> Mac Catalina - R 3.6.3 - all up-to-date packages.
> >> >> I would like to re-create the functionality which was found in the
> >
> >> >package
> >> >> {ReporteRs} by creating a .docx file in a folder on my computer
> >from
> >> >within
> >> >> R - which can subsequently be used by the {officer} function
> >> >read_docx.
> >> >> The function read_docx on my system does NOT create a new
> >document,
> >> >and
> >> >> neither does the following code:
> >> >> new.word.doc=function(){ report = read_docx(path ..name..
> >".docx"))
> >> >> return(report) }
> >> >> doc=new.word.doc()
> >> >>
> >> >> I can use {base} file.create to create a file with an extension
> >.docx
> >> >- but
> >> >> apparently this is not a .docx file - and read_docx can't read it.
> >
> >> >> Is there another R package or function which I can use in order to
> >
> >> >create
> >> >> (and then close the link to R so that it can be used by another
> >> >package) a
> >> >> .docx file ?
> >> >>
> >> >> Many thanks in advance.
> >> >>
> >> >>         [[alternative HTML version deleted]]
> >> >>
> >> >> ______________________________________________
> >> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> >> PLEASE do read the posting guide
> >> >> http://www.R-project.org/posting-guide.html
> >> >> and provide commented, minimal, self-contained, reproducible code.
> >
> >> >>
> >> >
> >> >       [[alternative HTML version deleted]]
> >> >
> >> >______________________________________________
> >> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> >https://stat.ethz.ch/mailman/listinfo/r-help
> >> >PLEASE do read the posting guide
> >> >http://www.R-project.org/posting-guide.html
> >> >and provide commented, minimal, self-contained, reproducible code.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>


-- 

dr hab. n. med. Jeremy Clark, prof. PUM,

Department of Clinical & Molecular Biochemistry,

Pomeranian Medical University in Szczecin; Pomorski Uniwersytet Medyczny w
Szczecinie,

Zak?ad Biochemii Klinicznej i Molekularnej,

ul. Powstancow Wlkp. 72, 70-111 Szczecin, Poland.

Tel. 0048 570112192; Tel. 004891 4661490; Fax. 004891 4661492

Email:   jeremyclarkbio at gmail.com

	[[alternative HTML version deleted]]


From jen@r@@mu@ @end|ng |rom gm@||@com  Thu Apr  9 19:28:57 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Thu, 9 Apr 2020 19:28:57 +0200
Subject: [R] 
 create a r list from dataframe using the first column as list names
In-Reply-To: <561222591.3082527.1586444431196@mail.yahoo.com>
References: <561222591.3082527.1586444431196.ref@mail.yahoo.com>
 <561222591.3082527.1586444431196@mail.yahoo.com>
Message-ID: <20200409172857.GC187643@jrl.uk.to>

On 2020-04-09 15:00 +0000, aiguo li via R-help wrote:
| Hello allI need to create a r list with 
| each row as a list object and named with 
| the element in the first column.? 

Dear aiguo,

Perhaps this fits your bill?

  a <- matrix(LETTERS[1:16], nrow = 4)
  FUN <- function(x) { as.factor(x[-1]) }
  lapply(X=split(a, a[,1]), FUN=FUN)

Best,
Rasmus


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  9 19:50:24 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 9 Apr 2020 18:50:24 +0100
Subject: [R] 
 create a r list from dataframe using the first column as list names
In-Reply-To: <561222591.3082527.1586444431196@mail.yahoo.com>
References: <561222591.3082527.1586444431196.ref@mail.yahoo.com>
 <561222591.3082527.1586444431196@mail.yahoo.com>
Message-ID: <e528bfc4-0033-2e7f-497b-6478459d16b8@sapo.pt>

Hello,

Your post is unreadable, please repost in *plain text*, not HTML.

Rui Barradas

?s 16:00 de 09/04/20, aiguo li via R-help escreveu:
> Hello allI need to create a r list with each row as a list object and named with the element in the first column.? Illustrated below:> a<- as.data.frame(matrix(LETTERS[1:16],nrow = 4))> a? V1 V2 V3 V41 ?A ?E ?I ?M2 ?B ?F ?J ?N3 ?C ?G ?K ?O4 ?D ?H ?L ?P
> I want the list looks like$A[1] E I MLevels: E I M
> $B[1] F J NLevels: F J N
> $C[1] G K OLevels: G K O
> $D[1] H L PLevels: H L P
> 
> I used the script below, it does not work the way I wantlapply(split(a,a$V1), function(x) as.list(a[-1]))
> any help would be greatly appreciated!
> Anna
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jen@r@@mu@ @end|ng |rom gm@||@com  Thu Apr  9 20:21:39 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Thu, 9 Apr 2020 20:21:39 +0200
Subject: [R] 
 create a r list from dataframe using the first column as list names
In-Reply-To: <e528bfc4-0033-2e7f-497b-6478459d16b8@sapo.pt>
References: <561222591.3082527.1586444431196.ref@mail.yahoo.com>
 <561222591.3082527.1586444431196@mail.yahoo.com>
 <e528bfc4-0033-2e7f-497b-6478459d16b8@sapo.pt>
Message-ID: <20200409182139.GD187643@jrl.uk.to>

On 2020-04-09 18:50 +0100, Rui Barradas wrote:
| Hello,
| 
| Your post is unreadable, please repost in 
| *plain text*, not HTML.

Hi!  It was not so bad?  I was able to 
extract out the core parts at least to 
prepare an answer ... maybe a bit hard with 
no line breaks, but ... 

Best,
Rasmus


From jen@r@@mu@ @end|ng |rom gm@||@com  Thu Apr  9 20:23:16 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Thu, 9 Apr 2020 20:23:16 +0200
Subject: [R] 
 create a r list from dataframe using the first column as list names
In-Reply-To: <268200624.3334981.1586455221416@mail.yahoo.com>
References: <561222591.3082527.1586444431196.ref@mail.yahoo.com>
 <561222591.3082527.1586444431196@mail.yahoo.com>
 <20200409172857.GC187643@jrl.uk.to>
 <268200624.3334981.1586455221416@mail.yahoo.com>
Message-ID: <20200409182316.GE187643@jrl.uk.to>

On 2020-04-09 18:00 +0000, aiguo li wrote:
| That is awesome!  Thanks.

I'm glad this was helpful for you!


From j@vedbtk111 @end|ng |rom gm@||@com  Fri Apr 10 00:49:44 2020
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Fri, 10 Apr 2020 00:49:44 +0200
Subject: [R] different validation methods produce same results
Message-ID: <CAJhui+uW5u70ugPhLRrX3Piry8jg2iXb=a2TtRM=BkxFYUZ4uQ@mail.gmail.com>

I am using different validation methods (mentioned below in code) for
software defect prediction dataset. I am using them for Random and Grid
searches and all the validation methods produce same results i.e. random
search with all validation methods produce same results and same is the
case with grid search.

Am I doing something wrong?


ct_rand <- trainControl(method = "repeatedcv", number=10, repeats=10,index
= index_2, search="random")
ct_grid <- trainControl(method = "repeatedcv", number=10, repeats=10,index
= index_2, search="grid")


ct_boot1 <- trainControl(method = "boot", number=100,  index = index_2,
search="random")
ct_boot2 <- trainControl(method = "boot", number=100,  index = index_2,
search="grid")

ct_locv <- trainControl(method = "LOOCV",  search="random")
ct_locv2 <- trainControl(method = "LOOCV",   search="grid")

ct_rand5CV <- trainControl(method = "repeatedcv", number=5,
repeats=10,index = index_2, search="random")
ct_grid5CV <- trainControl(method = "repeatedcv", number=5,
repeats=10,index = index_2, search="grid")

	[[alternative HTML version deleted]]


From r|@ngu@ge22 @end|ng |rom gm@||@com  Thu Apr  9 23:42:06 2020
From: r|@ngu@ge22 @end|ng |rom gm@||@com (Kumar t)
Date: Thu, 9 Apr 2020 16:42:06 -0500
Subject: [R] Learning Shinny
Message-ID: <CAPEb7FQ=3cWiNh=Ee_FAFozC-OE0YX_YeRcY+xy59faoNKHOcQ@mail.gmail.com>

Hello all ,

Very sorry to ask you question that might have been answered earlier . I
could not able to find right answer .

My requirement is get decent level of proficiency  in the R-Shiny . Is
there path ( I mean do I need to have knowledge of Dplyr to get data in
right format )  that I need to follow . Any good references to  papers  or
books or online resources .

I am new learner to R language .

Thanks
Phani

	[[alternative HTML version deleted]]


From p@m|rnov2000 @end|ng |rom gm@||@com  Fri Apr 10 00:59:04 2020
From: p@m|rnov2000 @end|ng |rom gm@||@com (petr smirnov)
Date: Thu, 9 Apr 2020 18:59:04 -0400
Subject: [R] Having trouble understanding the sapply/vapply documentation
 and behaviour of USE.NAMES
Message-ID: <CABAj7xcXm=NaApNSPtym8ajha9BRmZ5FMxAgc=FFHi5fP8FvLA@mail.gmail.com>

I am having trouble parsing the documentation for sapply and vapply,
and I cannot understand if it explains the different behaviour of
USE.NAMES between the two.

I noticed the following different behaviour between the two functions:

> sapply(c("1"=1, "2"=2, "3"=3), function(x) {r <- list(x); r}, USE.NAMES=FALSE)
$`1`
[1] 1

$`2`
[1] 2

$`3`
[1] 3

> vapply(c("1"=1, "2"=2, "3"=3), function(x) { r <- list(x); r}, FUN.VALUE=list(1), USE.NAMES=FALSE)
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

In the sapply case, the names of the input vector are retained. In the
vapply case, they are dropped. Note that this is not true when
USE.NAMES=TRUE:

> vapply(c("1"=1, "2"=2, "3"=3), function(x) { r <- list(x); r}, FUN.VALUE=list(1), USE.NAMES=TRUE)
$`1`
[1] 1

$`2`
[1] 2

$`3`
[1] 3

The manual page explains this for the names of the result of vapply:

The (Dim)names of the array value are taken from the FUN.VALUE if it
is named, otherwise from the result of the first function call. Column
names of the matrix or more generally the names of the last dimension
of the array value or names of the vector value are set from X as in
sapply.


If this explains the behaviour, could someone break it down for me and
help me understand the reasoning?
Otherwise, is this different behaviour intentional? Should it be
documented more clearly?

Thank you in advance!
-- 
Petr Smirnov
Department of Medical Biophysics, University of Toronto
Princess Margaret Cancer Centre, University Health Network


From mcg@rvey@bern@rd @end|ng |rom comc@@t@net  Fri Apr 10 02:09:25 2020
From: mcg@rvey@bern@rd @end|ng |rom comc@@t@net (Bernard Comcast)
Date: Thu, 9 Apr 2020 20:09:25 -0400
Subject: [R] Correlated sampling
Message-ID: <69491F7B-E289-4962-B524-4799F761F78A@comcast.net>

I want to create a Monte Carlo simulation with 4 input parameters that are correlated with each other. The parameters have normal distributions and the variance/covariance matrix is known. Are there any R functions available to generate such correlated normal random variables?

Bernard
Sent from my iPhone so please excuse the spelling!"

From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Apr 10 02:23:49 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 10 Apr 2020 12:23:49 +1200
Subject: [R] [FORGED] Having trouble understanding the sapply/vapply
 documentation and behaviour of USE.NAMES
In-Reply-To: <CABAj7xcXm=NaApNSPtym8ajha9BRmZ5FMxAgc=FFHi5fP8FvLA@mail.gmail.com>
References: <CABAj7xcXm=NaApNSPtym8ajha9BRmZ5FMxAgc=FFHi5fP8FvLA@mail.gmail.com>
Message-ID: <4b61dc7f-b5e2-dcc8-a44d-9a581a5de5ff@auckland.ac.nz>


On 10/04/20 10:59 am, petr smirnov wrote:

> I am having trouble parsing the documentation for sapply and vapply,
> and I cannot understand if it explains the different behaviour of
> USE.NAMES between the two.
> 
> I noticed the following different behaviour between the two functions:
> 
>> sapply(c("1"=1, "2"=2, "3"=3), function(x) {r <- list(x); r}, USE.NAMES=FALSE)
> $`1`
> [1] 1
> 
> $`2`
> [1] 2
> 
> $`3`
> [1] 3
> 
>> vapply(c("1"=1, "2"=2, "3"=3), function(x) { r <- list(x); r}, FUN.VALUE=list(1), USE.NAMES=FALSE)
> [[1]]
> [1] 1
> 
> [[2]]
> [1] 2
> 
> [[3]]
> [1] 3
> 
> In the sapply case, the names of the input vector are retained. In the
> vapply case, they are dropped. Note that this is not true when
> USE.NAMES=TRUE:
> 
>> vapply(c("1"=1, "2"=2, "3"=3), function(x) { r <- list(x); r}, FUN.VALUE=list(1), USE.NAMES=TRUE)
> $`1`
> [1] 1
> 
> $`2`
> [1] 2
> 
> $`3`
> [1] 3
> 
> The manual page explains this for the names of the result of vapply:
> 
> The (Dim)names of the array value are taken from the FUN.VALUE if it
> is named, otherwise from the result of the first function call. Column
> names of the matrix or more generally the names of the last dimension
> of the array value or names of the vector value are set from X as in
> sapply.
> 
> 
> If this explains the behaviour, could someone break it down for me and
> help me understand the reasoning?
> Otherwise, is this different behaviour intentional? Should it be
> documented more clearly?

IMHO there is an error in the documentation here.  Clearly USE.NAMES has 
a different impact on vapply() than it has on sapply() and the 
documentation does not indicate this, in fact quite the opposite.

It might be appropriate to submit a bug report (see
https://www.r-project.org/bugs.html) but it's probably not worth the 
hassle.  It's a pretty minor error.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Apr 10 03:19:45 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 10 Apr 2020 13:19:45 +1200
Subject: [R] [FORGED]  Correlated sampling
In-Reply-To: <69491F7B-E289-4962-B524-4799F761F78A@comcast.net>
References: <69491F7B-E289-4962-B524-4799F761F78A@comcast.net>
Message-ID: <7b98a85d-ccea-7f08-702d-625ce1167441@auckland.ac.nz>


On 10/04/20 12:09 pm, Bernard Comcast wrote:

> I want to create a Monte Carlo simulation with 4 input parameters
> that are correlated with each other. The parameters have normal
> distributions and the variance/covariance matrix is known. Are there
> any R functions available to generate such correlated normal random
> variables?

?MASS::mvrnorm

?mvtnorm::rmvnorm

There may be others!

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jen@r@@mu@ @end|ng |rom gm@||@com  Fri Apr 10 18:14:32 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Fri, 10 Apr 2020 18:14:32 +0200
Subject: [R] 
 create a r list from dataframe using the first column as list names
In-Reply-To: <268200624.3334981.1586455221416@mail.yahoo.com>
References: <561222591.3082527.1586444431196.ref@mail.yahoo.com>
 <561222591.3082527.1586444431196@mail.yahoo.com>
 <20200409172857.GC187643@jrl.uk.to>
 <268200624.3334981.1586455221416@mail.yahoo.com>
Message-ID: <20200410161432.GF187643@jrl.uk.to>

On 2020-04-09 18:00 +0000, aiguo li wrote:
| That is awesome!  Thanks.

Dear AiGuo,

I thought: why make this overly 
complicated, when this is also 
possible:

  a <- matrix(LETTERS[1:16], nrow=4)
  X <- split(x=a[,-1], f=a[,1])
  lapply(X=X, FUN=as.factor)

Best,
Rasmus


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Apr 10 18:15:45 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 11:15:45 -0500
Subject: [R] how to get all strings in a data frame that start with a
 particular string
Message-ID: <CAF9-5jNTAHSSP9n=a9kNUOe5zEAayF1QR8=4VS-mFBrTcgyYfA@mail.gmail.com>

Hello,

Hello,

I have a data frame (tot) with about 2000 columns. How can I extract
from it all strings that start with E14?

I tried this:
e14 <- sapply(tot, function(x) grepl("^E14", x))

but this returns me just TRUE and FALSE vector, how do I get actual
strings that start with E14?

Thanks
Ana


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri Apr 10 18:43:01 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 10 Apr 2020 17:43:01 +0100
Subject: [R] how to get all strings in a data frame that start with a
 particular string
In-Reply-To: <CAF9-5jNTAHSSP9n=a9kNUOe5zEAayF1QR8=4VS-mFBrTcgyYfA@mail.gmail.com>
References: <CAF9-5jNTAHSSP9n=a9kNUOe5zEAayF1QR8=4VS-mFBrTcgyYfA@mail.gmail.com>
Message-ID: <3f544cc9-d3b7-05d1-613b-c02a59bb32ec@dewey.myzen.co.uk>

Dear Ana

Would it not be possible to use grep instead of grepl and get the values 
using the value = TRUE parameter?

Michael

On 10/04/2020 17:15, Ana Marija wrote:
> Hello,
> 
> Hello,
> 
> I have a data frame (tot) with about 2000 columns. How can I extract
> from it all strings that start with E14?
> 
> I tried this:
> e14 <- sapply(tot, function(x) grepl("^E14", x))
> 
> but this returns me just TRUE and FALSE vector, how do I get actual
> strings that start with E14?
> 
> Thanks
> Ana
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From jen@r@@mu@ @end|ng |rom gm@||@com  Fri Apr 10 19:00:48 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Fri, 10 Apr 2020 19:00:48 +0200
Subject: [R] how to get all strings in a data frame that start with a
 particular string
In-Reply-To: <CAF9-5jNTAHSSP9n=a9kNUOe5zEAayF1QR8=4VS-mFBrTcgyYfA@mail.gmail.com>
References: <CAF9-5jNTAHSSP9n=a9kNUOe5zEAayF1QR8=4VS-mFBrTcgyYfA@mail.gmail.com>
Message-ID: <20200410170048.GG187643@jrl.uk.to>

On 2020-04-10 11:15 -0500, Ana Marija wrote:
> I have a data frame (tot) with about 
> 2000 columns. How can I extract from 
> it all strings that start with E14?
> 
> I tried this:
> e14 <- sapply(tot, function(x) grepl("^E14", x))
> 
> but this returns me just TRUE and 
> FALSE vector, how do I get actual 
> strings that start with E14?

Dear Ana,

perhaps you thought of something along 
the lines of this:

  ncol <- 2000
  nrow <- 3
  line <-
    c("a", "b",
      "some text E14 bla bla some more text",
      "d",
      "E14 ... hey this starts and also ends with E14",
      "E14 something-something",
      "another string")
  tot <-
    as.data.frame(matrix(rep(line,
      times=ncol*nrow),
      ncol=ncol,
      byrow=T))
  
  # Now, tot is a df with some cells
  # containing replicates of line, some
  # cells there are now starting with E14
  # ... so we need to convert it to a
  # character matrix to be able to find
  # the indecies of the cells starting
  # with E14:
  
  tot <- as.matrix(tot)
  idx <- grepl("^E14", tot)
  tot[idx]

Best,
Rasmus


From bgunter@4567 @end|ng |rom gm@||@com  Fri Apr 10 20:07:47 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 10 Apr 2020 11:07:47 -0700
Subject: [R] 
 create a r list from dataframe using the first column as list names
In-Reply-To: <20200410161432.GF187643@jrl.uk.to>
References: <561222591.3082527.1586444431196.ref@mail.yahoo.com>
 <561222591.3082527.1586444431196@mail.yahoo.com>
 <20200409172857.GC187643@jrl.uk.to>
 <268200624.3334981.1586455221416@mail.yahoo.com>
 <20200410161432.GF187643@jrl.uk.to>
Message-ID: <CAGxFJbQmQpWm+tVzsUAgK1ZJZw0SLX-TPTb6DYVRkHb=TeAYCg@mail.gmail.com>

"I thought: why make this overly complicated,..."

Indeed, though "complicated" is in the eyes of the beholder.
One wonders whether any of this is necessary, though: see ?apply , as in
apply(a, 1, whatever...)
to do things rowwise.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Apr 10, 2020 at 9:14 AM Rasmus Liland <jensrasmus at gmail.com> wrote:

> On 2020-04-09 18:00 +0000, aiguo li wrote:
> | That is awesome!  Thanks.
>
> Dear AiGuo,
>
> I thought: why make this overly
> complicated, when this is also
> possible:
>
>   a <- matrix(LETTERS[1:16], nrow=4)
>   X <- split(x=a[,-1], f=a[,1])
>   lapply(X=X, FUN=as.factor)
>
> Best,
> Rasmus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Apr 10 20:14:15 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 13:14:15 -0500
Subject: [R] how to get all strings in a data frame that start with a
 particular string
In-Reply-To: <20200410170048.GG187643@jrl.uk.to>
References: <CAF9-5jNTAHSSP9n=a9kNUOe5zEAayF1QR8=4VS-mFBrTcgyYfA@mail.gmail.com>
 <20200410170048.GG187643@jrl.uk.to>
Message-ID: <CAF9-5jMdKyEhDz-2-ArA3g-Smzcr3p4Q5MtQNYd6nfC3pMK==w@mail.gmail.com>

Thank you so much!

On Fri, Apr 10, 2020 at 12:00 PM Rasmus Liland <jensrasmus at gmail.com> wrote:
>
> On 2020-04-10 11:15 -0500, Ana Marija wrote:
> > I have a data frame (tot) with about
> > 2000 columns. How can I extract from
> > it all strings that start with E14?
> >
> > I tried this:
> > e14 <- sapply(tot, function(x) grepl("^E14", x))
> >
> > but this returns me just TRUE and
> > FALSE vector, how do I get actual
> > strings that start with E14?
>
> Dear Ana,
>
> perhaps you thought of something along
> the lines of this:
>
>   ncol <- 2000
>   nrow <- 3
>   line <-
>     c("a", "b",
>       "some text E14 bla bla some more text",
>       "d",
>       "E14 ... hey this starts and also ends with E14",
>       "E14 something-something",
>       "another string")
>   tot <-
>     as.data.frame(matrix(rep(line,
>       times=ncol*nrow),
>       ncol=ncol,
>       byrow=T))
>
>   # Now, tot is a df with some cells
>   # containing replicates of line, some
>   # cells there are now starting with E14
>   # ... so we need to convert it to a
>   # character matrix to be able to find
>   # the indecies of the cells starting
>   # with E14:
>
>   tot <- as.matrix(tot)
>   idx <- grepl("^E14", tot)
>   tot[idx]
>
> Best,
> Rasmus


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Apr 10 21:46:18 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 14:46:18 -0500
Subject: [R] question about system.file()
Message-ID: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>

Hello,

I would like to try this example in this link:
https://www.rdocumentation.org/packages/SNPRelate/versions/1.6.4/topics/snpgdsBED2GDS

for example this line:

bed.fn <- system.file("extdata", "plinkhapmap.bed.gz", package="SNPRelate")

I have in current directory from where I would run this function a
file named output4.bed

in order to run the above, can I just run this:
bed.fn <- system.file("output4.bed", package="SNPRelate")

what is "extdata" ? Do I need it if my output4.bed is in the directory
from where I am running this?

Also do I need to have .gz format of output4.bed?

Thanks
Ana


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Apr 10 21:49:03 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 14:49:03 -0500
Subject: [R] question about system.file()
In-Reply-To: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
References: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
Message-ID: <CAF9-5jOHBghSvMGPDeV+MPVZBH+LTMGQ-PCqU2BbAgyirKdE_w@mail.gmail.com>

I tried to do this but I got this error:

> bed.fn <- system.file("output4.bed", package="SNPRelate")
> dim(bed.fn)
NULL
> fam.fn <- system.file("output4.fam", package="SNPRelate")
> bim.fn <- system.file("output4.bim", package="SNPRelate")
> snpgdsBED2GDS(bed.fn, fam.fn, bim.fn, "HapMap.gds")
Start file conversion from PLINK BED to SNP GDS ...
Error in (function (con, what, n = 1L, size = NA_integer_, signed = TRUE,  :
  can only read from a binary connection
In addition: Warning message:
In file(filename, "rb") :
  file("") only supports open = "w+" and open = "w+b": using the former

On Fri, Apr 10, 2020 at 2:46 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Hello,
>
> I would like to try this example in this link:
> https://www.rdocumentation.org/packages/SNPRelate/versions/1.6.4/topics/snpgdsBED2GDS
>
> for example this line:
>
> bed.fn <- system.file("extdata", "plinkhapmap.bed.gz", package="SNPRelate")
>
> I have in current directory from where I would run this function a
> file named output4.bed
>
> in order to run the above, can I just run this:
> bed.fn <- system.file("output4.bed", package="SNPRelate")
>
> what is "extdata" ? Do I need it if my output4.bed is in the directory
> from where I am running this?
>
> Also do I need to have .gz format of output4.bed?
>
> Thanks
> Ana


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Apr 10 21:54:48 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 10 Apr 2020 15:54:48 -0400
Subject: [R] question about system.file()
In-Reply-To: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
References: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
Message-ID: <0a96ac94-7b17-1959-bdd4-74193a359844@gmail.com>

On 10/04/2020 3:46 p.m., Ana Marija wrote:
> Hello,
> 
> I would like to try this example in this link:
> https://www.rdocumentation.org/packages/SNPRelate/versions/1.6.4/topics/snpgdsBED2GDS
> 
> for example this line:
> 
> bed.fn <- system.file("extdata", "plinkhapmap.bed.gz", package="SNPRelate")
> 
> I have in current directory from where I would run this function a
> file named output4.bed

Just use "output4.bed" as the filename.  The system.file() function is 
for working out the filename of files installed in packages.

Duncan Murdoch

> 
> in order to run the above, can I just run this:
> bed.fn <- system.file("output4.bed", package="SNPRelate")
> 
> what is "extdata" ? Do I need it if my output4.bed is in the directory
> from where I am running this?
> 
> Also do I need to have .gz format of output4.bed?
> 
> Thanks
> Ana
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Apr 10 22:14:05 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 15:14:05 -0500
Subject: [R] question about system.file()
In-Reply-To: <0a96ac94-7b17-1959-bdd4-74193a359844@gmail.com>
References: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
 <0a96ac94-7b17-1959-bdd4-74193a359844@gmail.com>
Message-ID: <CAF9-5jN9zwoShza3u6poXYqi9Bd-a-EkoVGchY_jybAyGWLE3Q@mail.gmail.com>

Got it, thanks!

On Fri, Apr 10, 2020 at 2:54 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 10/04/2020 3:46 p.m., Ana Marija wrote:
> > Hello,
> >
> > I would like to try this example in this link:
> > https://www.rdocumentation.org/packages/SNPRelate/versions/1.6.4/topics/snpgdsBED2GDS
> >
> > for example this line:
> >
> > bed.fn <- system.file("extdata", "plinkhapmap.bed.gz", package="SNPRelate")
> >
> > I have in current directory from where I would run this function a
> > file named output4.bed
>
> Just use "output4.bed" as the filename.  The system.file() function is
> for working out the filename of files installed in packages.
>
> Duncan Murdoch
>
> >
> > in order to run the above, can I just run this:
> > bed.fn <- system.file("output4.bed", package="SNPRelate")
> >
> > what is "extdata" ? Do I need it if my output4.bed is in the directory
> > from where I am running this?
> >
> > Also do I need to have .gz format of output4.bed?
> >
> > Thanks
> > Ana
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Apr 10 22:38:28 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 15:38:28 -0500
Subject: [R] matching doesn't work
Message-ID: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>

Hi,

I have this code:

library(SNPRelate)

# get PLINK output
plink.genome <- read.table("plink.genome", header=TRUE)

> head(plink.genome)
     FID1  IID1    FID2  IID2 RT EZ     Z0     Z1     Z2 PI_HAT PHE      DST
1 fam1054 G1054 fam1054  G700 OT  0 0.0045 0.9938 0.0017 0.4986  -1 0.839150
2 fam1054 G1054 fam1054  G701 OT  0 0.0000 1.0000 0.0000 0.5000  -1 0.838381
3 fam1079 G1079 fam2484 G2484 UN NA 0.0000 0.0007 0.9993 0.9997  -1 0.999889
4 fam1245 G1237 fam1245 G1245 OT  0 0.0036 0.9964 0.0000 0.4982  -1 0.838770
5 fam1245 G1241 fam1245 G1245 OT  0 0.0042 0.9854 0.0104 0.5031  -1 0.840569
6 fam0176  G174 fam0176  G176 OT  0 0.0000 1.0000 0.0000 0.5000  -1 0.837799

> head(plink.genome$IID1)
[1] G1054 G1054 G1079 G1237 G1241 G174
33 Levels: G1054 G1079 G1237 G1241 G174 G175 G177 G178 G1818 G2007 ... G578

snpgdsBED2GDS("output4.bed", "output4.fam","output4.bim", "HapMap.gds")
genofile <- snpgdsOpen("HapMap.gds")

# get SNPRelate output
ibd <- snpgdsIBDMoM(genofile, remove.monosnp=FALSE, kinship=TRUE)
head(ibdlist <- snpgdsIBDSelection(ibd))
   ID1   ID2        k0         k1     kinship
1 G1000 G1001 1.0000000 0.00000000 0.000000000
2 G1000 G1003 0.9938901 0.00000000 0.003054932
3 G1000 G1005 1.0000000 0.00000000 0.000000000
4 G1000 G1009 1.0000000 0.00000000 0.000000000

# adjust for the orders of sample pair
pair.samp <- paste(ibdlist$ID1, ibdlist$ID2, sep=" ")
 head(pair.samp)
[1] "G1000 G1001" "G1000 G1003" "G1000 G1005" "G1000 G1009" "G1000 G1052"
[6] "G1000 G1054"

plink.genome <- plink.genome[match(
    paste(plink.genome$IID1, plink.genome$IID2, sep=" "), pair.samp), ]
> head(plink.genome)
     FID1 IID1 FID2 IID2   RT EZ Z0 Z1 Z2 PI_HAT PHE DST PPC RATIO IBS0 IBS1
NA   <NA> <NA> <NA> <NA> <NA> NA NA NA NA     NA  NA  NA  NA    NA   NA   NA
NA.1 <NA> <NA> <NA> <NA> <NA> NA NA NA NA     NA  NA  NA  NA    NA   NA   NA
NA.2 <NA> <NA> <NA> <NA> <NA> NA NA NA NA     NA  NA  NA  NA    NA   NA   NA
NA.3 <NA> <NA> <NA> <NA> <NA> NA NA NA NA     NA  NA  NA  NA    NA   NA   NA
NA.4 <NA> <NA> <NA> <NA> <NA> NA NA NA NA     NA  NA  NA  NA    NA   NA   NA
NA.5 <NA> <NA> <NA> <NA> <NA> NA NA NA NA     NA  NA  NA  NA    NA   NA   NA

So nothing is matching here. Can you please advise,

Thanks
Ana


From jen@r@@mu@ @end|ng |rom gm@||@com  Fri Apr 10 22:45:19 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Fri, 10 Apr 2020 22:45:19 +0200
Subject: [R] question about system.file()
In-Reply-To: <CAF9-5jN9zwoShza3u6poXYqi9Bd-a-EkoVGchY_jybAyGWLE3Q@mail.gmail.com>
References: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
 <0a96ac94-7b17-1959-bdd4-74193a359844@gmail.com>
 <CAF9-5jN9zwoShza3u6poXYqi9Bd-a-EkoVGchY_jybAyGWLE3Q@mail.gmail.com>
Message-ID: <20200410204519.GH187643@jrl.uk.to>

On Fri, Apr 10, 2020 at 2:54 PM Duncan Murdoch wrote:
> On 10/04/2020 3:46 p.m., Ana Marija wrote:
> > I have in current directory from 
> > where I would run this function a 
> > file named output4.bed
>
> Just use "output4.bed" as the 
> filename.  The system.file() function 
> is for working out the filename of 
> files installed in packages.
>
> > what is "extdata" ? Do I need it if 
> > my output4.bed is in the directory 
> > from where I am running this?

"extdata" is a directory of five example 
files from the SNPRelate package: 
hapmap_geno.gds, plinkhapmap.bed.gz, 
plinkhapmap.bim.gz, plinkhapmap.fam.gz, 
and sequence.vcf.  On my system the 
directory is in 
~/R/x86_64-pc-linux-gnu-library/3.6/SNPRelate/extdata 
...

> > Also do I need to have .gz format of 
> > output4.bed?

Not if the files were not gzipped, you 
do not.  Example files in packages are 
compressed to save space for example 
code you will maybe will try only once, 
four of the files in that directory are 
gzipped, I do not know about that vCard 
file ...  Just input your own paths.

Try to find your files using 
list.files(".", "bed$") or something 
...

On 2020-04-10 14:49 -0500, Ana Marija wrote:
> I tried to do this but I got this 

Thus, try this:

  bed.fn <- "output4.bed"
  fam.fn <- "output4.fam"
  bim.fn <- "output4.bim"
  SNPRelate::snpgdsBED2GDS(bed.fn, fam.fn, bim.fn, "output4.gds")

Best,
Rasmus


From jen@r@@mu@ @end|ng |rom gm@||@com  Fri Apr 10 23:24:16 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Fri, 10 Apr 2020 23:24:16 +0200
Subject: [R] matching doesn't work
In-Reply-To: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>
References: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>
Message-ID: <20200410212416.GI187643@jrl.uk.to>

On 2020-04-10 15:38 -0500, Ana Marija wrote:
| Hi,
| 
| I have this code:

Dear Ana,

none of the ID tuples in the head 
outputs you provided matches, so I added 
two lines in ibdlist that matches up;  
perhaps if you provided more lines that 
would have matched in a pastebin 
somewhere ...


options(stringsAsFactors=FALSE)
plink.genome <-
"FID1	IID1	FID2	IID2	RT	EZ	Z0	Z1	Z2	PI_HAT	PHE	DST
fam1054	G1054	fam1054	G700	OT	0	0.0045	0.9938	0.0017	0.4986	-1	0.839150
fam1054	G1054	fam1054	G701	OT	0	0.0000	1.0000	0.0000	0.5000	-1	0.838381
fam1079	G1079	fam2484	G2484	UN		0.0000	0.0007	0.9993	0.9997	-1	0.999889
fam1245	G1237	fam1245	G1245	OT	0	0.0036	0.9964	0.0000	0.4982	-1	0.838770
fam1245	G1241	fam1245	G1245	OT	0	0.0042	0.9854	0.0104	0.5031	-1	0.840569
fam0176	G174	fam0176	G176	OT	0	0.0000	1.0000	0.0000	0.5000	-1	0.837799"

plink.genome <-
read.delim(text=plink.genome, header=TRUE)

ibdlist <-
"ID1	ID2	k0	k1	kinship
G1000	G1001	1.0000000	0.00000000	0.000000000
G1000	G1003	0.9938901	0.00000000	0.003054932
G1241	G1245	1.0000000	0.00000000	0.000000000
G1000	G1005	1.0000000	0.00000000	0.000000000
G1079	G2484	0.9938901	0.00000000	0.003054932
G1000	G1009	1.0000000	0.00000000	0.000000000"
ibdlist <-
read.delim(text=ibdlist)

idx <-
match(paste(plink.genome$IID1, plink.genome$IID2),
  paste(ibdlist$ID1, ibdlist$ID2))
plink.genome[idx,]


See if this fits the rest of your 
data.frames ...  Did I nail it here, or?  

Best,
Rasmus


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Sat Apr 11 00:05:19 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 17:05:19 -0500
Subject: [R] matching doesn't work
In-Reply-To: <20200410212416.GI187643@jrl.uk.to>
References: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>
 <20200410212416.GI187643@jrl.uk.to>
Message-ID: <CAF9-5jN5Kd91_oaSPQ7-sqtZg19kPDr35A-tPVpZTZAsi7_igg@mail.gmail.com>

it didn't work unfortunately with your example:

> plink.genome[idx,]
character(0)

here is my whole:
plink.genome <- read.table("plink.genome", header=TRUE)

    FID1   IID1     FID2   IID2 RT    EZ      Z0      Z1      Z2
PI_HAT PHE       DST     PPC   RATIO    IBS0    IBS1    IBS2  HOMHOM
HETHET
  fam1054  G1054  fam1054   G700 OT     0  0.0045  0.9938  0.0017
0.4986  -1  0.839150  1.0000 209.7368     103  118630  250667 19.0000
3985.0000
  fam1054  G1054  fam1054   G701 OT     0  0.0000  1.0000  0.0000
0.5000  -1  0.838381  1.0000 266.0667      81  119124  249829 15.0000
3991.0000
  fam1079  G1079  fam2484  G2484 UN    NA  0.0000  0.0007  0.9993
0.9997  -1  0.999889  1.0000      NA       0      82  370250  0.0000
4591.0000
  fam1245  G1237  fam1245  G1245 OT     0  0.0036  0.9964  0.0000
0.4982  -1  0.838770  1.0000 188.4762      83  118647  249728 21.0000
3958.0000
  fam1245  G1241  fam1245  G1245 OT     0  0.0042  0.9854  0.0104
0.5031  -1  0.840569  1.0000 265.8667      97  117116  250690 15.0000
3988.0000
  fam0176   G174  fam0176   G176 OT     0  0.0000  1.0000  0.0000
0.5000  -1  0.837799  1.0000 190.0476     107  118306  246937 21.0000
3991.0000
  fam0176   G175  fam0176   G176 OT     0  0.0045  0.9909  0.0046
0.5001  -1  0.839611  1.0000 198.6500     102  117026  248327 20.0000
3973.0000
  fam0179   G177  fam0179   G179 OT     0  0.0091  0.9903  0.0006
0.4958  -1  0.838517  1.0000 116.5000     207  117568  247532 34.0000
3961.0000
  fam0179   G178  fam0179   G179 OT     0  0.0098  0.9902  0.0000
0.4951  -1  0.838160  1.0000 90.4318     224  117440  246548 44.0000
3979.0000
  fam1818  G1818  fam1818  G1819 OT     0  0.0050  0.9884  0.0066
0.5008  -1  0.839882  1.0000 208.8947     115  117679  250401 19.0000
3969.0000
  fam1818  G1818  fam1818  G1820 OT     0  0.0050  0.9950  0.0000
0.4975  -1  0.838709  1.0000 208.6842     115  119083  250671 19.0000
3965.0000
  fam2450  G2007  fam2450  G2450 OT     0  0.0000  1.0000  0.0000
0.5000  -1  0.831786  1.0000 79.0196     278  120248  238553 51.0000
4030.0000
  fam2450  G2024  fam2450  G2450 OT     0  0.0000  1.0000  0.0000
0.5000  -1  0.832052  1.0000 104.6750     242  118317  235124 40.0000
4187.0000
  fam2181  G2181  fam5745  G5745 UN    NA  0.0002  0.0034  0.9964
0.9981  -1  0.999402  1.0000      NA       4     432  367475  0.0000
4613.0000
  fam2183  G2183  fam2183  G2184 OT     0  0.0058  0.9836  0.0106
0.5024  -1  0.840452  1.0000 164.9583     133  117858  252192 24.0000
3959.0000
  fam2183  G2183  fam2183  G2185 OT     0  0.0045  0.9929  0.0026
0.4990  -1  0.839280  1.0000 136.2414     105  118760  251251 29.0000
3951.0000
  fam2280  G2280  fam2280  G2281 OT     0  0.0042  0.9893  0.0065
0.5011  -1  0.839937  1.0000 248.7500      97  117600  250265 16.0000
3980.0000
  fam2280  G2280  fam2280  G2282 OT     0  0.0033  0.9885  0.0082
0.5024  -1  0.840294  1.0000 264.8000      76  117095  249900 15.0000
3972.0000
  fam2286  G2284  fam2286  G2286 OT     0  0.0048  0.9952  0.0000
0.4976  -1  0.838745  1.0000 179.5909     112  118986  250534 22.0000
3951.0000
  fam2286  G2285  fam2286  G2286 OT     0  0.0046  0.9846  0.0108
0.5031  -1  0.840586  1.0000 331.4167     105  116441  249328 12.0000
3977.0000
  fam2813  G2813  fam4274  G4274 UN    NA  0.0058  0.0495  0.9447
0.9695  -1  0.990555  1.0000 239.2105     131    6616  357351 19.0000
4545.0000
  fam3238  G3237  fam3238  G3238 OT     0  0.0055  0.9913  0.0033
0.4989  -1  0.839299  1.0000 160.6800     125  117652  249060 25.0000
4017.0000
  fam3238  G3238  fam3238  G3264 OT     0  0.0035  0.9855  0.0110
0.5037  -1  0.840733  1.0000 173.3043      81  116986  250706 23.0000
3986.0000
  fam4257  G4257  fam0891   G891 UN    NA  0.2323  0.4978  0.2699
0.5188  -1  0.859862  1.0000 10.1332    5314   92050  268982 383.0000
3881.0000
  fam4275  G4275  fam4275  G4304 OT     0  0.0053  0.9947  0.0000
0.4973  -1  0.837959  1.0000 136.0345     122  118563  247910 29.0000
3945.0000
  fam4275  G4275  fam4275  G4352 OT     0  0.0048  0.9798  0.0154
0.5053  -1  0.841317  1.0000 209.3684     110  116482  251129 19.0000
3978.0000
  fam4454  G4452  fam4454  G4454 OT     0  0.0055  0.9840  0.0104
0.5024  -1  0.840440  1.0000 136.8966     127  116709  249681 29.0000
3970.0000
  fam4454  G4453  fam4454  G4454 OT     0  0.0057  0.9842  0.0101
0.5022  -1  0.840379  1.0000 160.0000     130  116255  248588 25.0000
4000.0000
  fam4666  G4666  fam0686   G686 UN    NA  0.0000  0.0026  0.9974
0.9987  -1  0.999576  1.0000      NA       0     312  367735  0.0000
4580.0000
  fam4691  G4691  fam4722  G4722 UN    NA  0.3986  0.4841  0.1173
0.3593  -1  0.818992  1.0000  5.9269    9073  113787  241580 602.0000
3568.0000
  fam5092  G5089  fam5092  G5092 OT     0  0.0051  0.9928  0.0022
0.4985  -1  0.839156  1.0000 234.4706     117  118225  249900 17.0000
3986.0000
  fam5092  G5092  fam5092  G5097 OT     0  0.0000  1.0000  0.0000
0.5000  -1  0.837560  1.0000 218.9444     100  119554  248956 18.0000
3941.0000
  fam5365  G5106  fam5365  G5365 OT     0  0.0057  0.9916  0.0027
0.4985  -1  0.839191  1.0000 208.0000     131  118747  251154 19.0000
3952.0000
  fam5365  G5118  fam5365  G5365 OT     0  0.0052  0.9886  0.0061
0.5004  -1  0.839781  1.0000 164.8750     121  118035  250954 24.0000
3957.0000
  fam0523   G523  fam0523   G551 OT     0  0.0037  0.9829  0.0135
0.5049  -1  0.841107  1.0000 180.6818      85  116769  251126 22.0000
3975.0000
  fam0523   G523  fam0523   G552 OT     0  0.0000  1.0000  0.0000
0.5000  -1  0.838173  1.0000 225.2353      81  119148  249406 17.0000
3829.0000
  fam5282  G5282  fam5282  G5328 OT     0  0.0033  0.9933  0.0035
0.5001  -1  0.839545  1.0000 232.1765      75  117898  249882 17.0000
3947.0000
  fam5681  G5681  fam0587   G587 UN    NA  0.0035  0.9871  0.0094
0.5030  -1  0.840482  1.0000 188.9524      79  116708  249522 21.0000
3968.0000
  fam0578   G578  fam6039  G6039 UN    NA  0.0000  0.0095  0.9905
0.9952  -1  0.998462  1.0000 4553.0000       1    1123  364629  1.0000
4553.0000

On Fri, Apr 10, 2020 at 4:24 PM Rasmus Liland <jensrasmus at gmail.com> wrote:
>
> On 2020-04-10 15:38 -0500, Ana Marija wrote:
> | Hi,
> |
> | I have this code:
>
> Dear Ana,
>
> none of the ID tuples in the head
> outputs you provided matches, so I added
> two lines in ibdlist that matches up;
> perhaps if you provided more lines that
> would have matched in a pastebin
> somewhere ...
>
>
> options(stringsAsFactors=FALSE)
> plink.genome <-
> "FID1   IID1    FID2    IID2    RT      EZ      Z0      Z1      Z2      PI_HAT  PHE     DST
> fam1054 G1054   fam1054 G700    OT      0       0.0045  0.9938  0.0017  0.4986  -1      0.839150
> fam1054 G1054   fam1054 G701    OT      0       0.0000  1.0000  0.0000  0.5000  -1      0.838381
> fam1079 G1079   fam2484 G2484   UN              0.0000  0.0007  0.9993  0.9997  -1      0.999889
> fam1245 G1237   fam1245 G1245   OT      0       0.0036  0.9964  0.0000  0.4982  -1      0.838770
> fam1245 G1241   fam1245 G1245   OT      0       0.0042  0.9854  0.0104  0.5031  -1      0.840569
> fam0176 G174    fam0176 G176    OT      0       0.0000  1.0000  0.0000  0.5000  -1      0.837799"
>
> plink.genome <-
> read.delim(text=plink.genome, header=TRUE)
>
> ibdlist <-
> "ID1    ID2     k0      k1      kinship
> G1000   G1001   1.0000000       0.00000000      0.000000000
> G1000   G1003   0.9938901       0.00000000      0.003054932
> G1241   G1245   1.0000000       0.00000000      0.000000000
> G1000   G1005   1.0000000       0.00000000      0.000000000
> G1079   G2484   0.9938901       0.00000000      0.003054932
> G1000   G1009   1.0000000       0.00000000      0.000000000"
> ibdlist <-
> read.delim(text=ibdlist)
>
> idx <-
> match(paste(plink.genome$IID1, plink.genome$IID2),
>   paste(ibdlist$ID1, ibdlist$ID2))
> plink.genome[idx,]
>
>
> See if this fits the rest of your
> data.frames ...  Did I nail it here, or?
>
> Best,
> Rasmus


From jen@r@@mu@ @end|ng |rom gm@||@com  Sat Apr 11 01:03:21 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Sat, 11 Apr 2020 01:03:21 +0200
Subject: [R] matching doesn't work
In-Reply-To: <CAF9-5jN5Kd91_oaSPQ7-sqtZg19kPDr35A-tPVpZTZAsi7_igg@mail.gmail.com>
References: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>
 <20200410212416.GI187643@jrl.uk.to>
 <CAF9-5jN5Kd91_oaSPQ7-sqtZg19kPDr35A-tPVpZTZAsi7_igg@mail.gmail.com>
Message-ID: <20200410230321.GJ187643@jrl.uk.to>

On 2020-04-10 17:05 -0500, Ana Marija wrote:
> it didn't work unfortunately with your 
> example:
> 
> > plink.genome[idx,]
> character(0)

Hi!  Perhaps csv formatting are better 
suited for these emails ... the two 
ibdlist lines I added still matches in 
this example, added lookup for kinship 
... see if this works for you:


plink.genome <- "FID1,IID1,FID2,IID2,RT,EZ,Z0,Z1,Z2,PI_HAT,PHE,DST,PPC,RATIO,IBS0,IBS1,IBS2,HOMHOM,HETHET
fam1054,G1054,fam1054,G700,OT,0,0.0045,0.9938,0.0017,0.4986,-1,0.839150,1.0000,209.7368,103,118630,250667,19.0000,3985.0000
fam1054,G1054,fam1054,G701,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.838381,1.0000,266.0667,81,119124,249829,15.0000,3991.0000
fam1079,G1079,fam2484,G2484,UN,NA,0.0000,0.0007,0.9993,0.9997,-1,0.999889,1.0000,NA,0,82,370250,0.0000,4591.0000
fam1245,G1237,fam1245,G1245,OT,0,0.0036,0.9964,0.0000,0.4982,-1,0.838770,1.0000,188.4762,83,118647,249728,21.0000,3958.0000
fam1245,G1241,fam1245,G1245,OT,0,0.0042,0.9854,0.0104,0.5031,-1,0.840569,1.0000,265.8667,97,117116,250690,15.0000,3988.0000
fam0176,G174,fam0176,G176,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.837799,1.0000,190.0476,107,118306,246937,21.0000,3991.0000
fam0176,G175,fam0176,G176,OT,0,0.0045,0.9909,0.0046,0.5001,-1,0.839611,1.0000,198.6500,102,117026,248327,20.0000,3973.0000
fam0179,G177,fam0179,G179,OT,0,0.0091,0.9903,0.0006,0.4958,-1,0.838517,1.0000,116.5000,207,117568,247532,34.0000,3961.0000
fam0179,G178,fam0179,G179,OT,0,0.0098,0.9902,0.0000,0.4951,-1,0.838160,1.0000,90.4318,224,117440,246548,44.0000,3979.0000
fam1818,G1818,fam1818,G1819,OT,0,0.0050,0.9884,0.0066,0.5008,-1,0.839882,1.0000,208.8947,115,117679,250401,19.0000,3969.0000
fam1818,G1818,fam1818,G1820,OT,0,0.0050,0.9950,0.0000,0.4975,-1,0.838709,1.0000,208.6842,115,119083,250671,19.0000,3965.0000
fam2450,G2007,fam2450,G2450,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.831786,1.0000,79.0196,278,120248,238553,51.0000,4030.0000
fam2450,G2024,fam2450,G2450,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.832052,1.0000,104.6750,242,118317,235124,40.0000,4187.0000
fam2181,G2181,fam5745,G5745,UN,NA,0.0002,0.0034,0.9964,0.9981,-1,0.999402,1.0000,NA,4,432,367475,0.0000,4613.0000
fam2183,G2183,fam2183,G2184,OT,0,0.0058,0.9836,0.0106,0.5024,-1,0.840452,1.0000,164.9583,133,117858,252192,24.0000,3959.0000
fam2183,G2183,fam2183,G2185,OT,0,0.0045,0.9929,0.0026,0.4990,-1,0.839280,1.0000,136.2414,105,118760,251251,29.0000,3951.0000
fam2280,G2280,fam2280,G2281,OT,0,0.0042,0.9893,0.0065,0.5011,-1,0.839937,1.0000,248.7500,97,117600,250265,16.0000,3980.0000
fam2280,G2280,fam2280,G2282,OT,0,0.0033,0.9885,0.0082,0.5024,-1,0.840294,1.0000,264.8000,76,117095,249900,15.0000,3972.0000
fam2286,G2284,fam2286,G2286,OT,0,0.0048,0.9952,0.0000,0.4976,-1,0.838745,1.0000,179.5909,112,118986,250534,22.0000,3951.0000
fam2286,G2285,fam2286,G2286,OT,0,0.0046,0.9846,0.0108,0.5031,-1,0.840586,1.0000,331.4167,105,116441,249328,12.0000,3977.0000
fam2813,G2813,fam4274,G4274,UN,NA,0.0058,0.0495,0.9447,0.9695,-1,0.990555,1.0000,239.2105,131,6616,357351,19.0000,4545.0000
fam3238,G3237,fam3238,G3238,OT,0,0.0055,0.9913,0.0033,0.4989,-1,0.839299,1.0000,160.6800,125,117652,249060,25.0000,4017.0000
fam3238,G3238,fam3238,G3264,OT,0,0.0035,0.9855,0.0110,0.5037,-1,0.840733,1.0000,173.3043,81,116986,250706,23.0000,3986.0000
fam4257,G4257,fam0891,G891,UN,NA,0.2323,0.4978,0.2699,0.5188,-1,0.859862,1.0000,10.1332,5314,92050,268982,383.0000,3881.0000
fam4275,G4275,fam4275,G4304,OT,0,0.0053,0.9947,0.0000,0.4973,-1,0.837959,1.0000,136.0345,122,118563,247910,29.0000,3945.0000
fam4275,G4275,fam4275,G4352,OT,0,0.0048,0.9798,0.0154,0.5053,-1,0.841317,1.0000,209.3684,110,116482,251129,19.0000,3978.0000
fam4454,G4452,fam4454,G4454,OT,0,0.0055,0.9840,0.0104,0.5024,-1,0.840440,1.0000,136.8966,127,116709,249681,29.0000,3970.0000
fam4454,G4453,fam4454,G4454,OT,0,0.0057,0.9842,0.0101,0.5022,-1,0.840379,1.0000,160.0000,130,116255,248588,25.0000,4000.0000
fam4666,G4666,fam0686,G686,UN,NA,0.0000,0.0026,0.9974,0.9987,-1,0.999576,1.0000,NA,0,312,367735,0.0000,4580.0000
fam4691,G4691,fam4722,G4722,UN,NA,0.3986,0.4841,0.1173,0.3593,-1,0.818992,1.0000,5.9269,9073,113787,241580,602.0000,3568.0000
fam5092,G5089,fam5092,G5092,OT,0,0.0051,0.9928,0.0022,0.4985,-1,0.839156,1.0000,234.4706,117,118225,249900,17.0000,3986.0000
fam5092,G5092,fam5092,G5097,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.837560,1.0000,218.9444,100,119554,248956,18.0000,3941.0000
fam5365,G5106,fam5365,G5365,OT,0,0.0057,0.9916,0.0027,0.4985,-1,0.839191,1.0000,208.0000,131,118747,251154,19.0000,3952.0000
fam5365,G5118,fam5365,G5365,OT,0,0.0052,0.9886,0.0061,0.5004,-1,0.839781,1.0000,164.8750,121,118035,250954,24.0000,3957.0000
fam0523,G523,fam0523,G551,OT,0,0.0037,0.9829,0.0135,0.5049,-1,0.841107,1.0000,180.6818,85,116769,251126,22.0000,3975.0000
fam0523,G523,fam0523,G552,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.838173,1.0000,225.2353,81,119148,249406,17.0000,3829.0000
fam5282,G5282,fam5282,G5328,OT,0,0.0033,0.9933,0.0035,0.5001,-1,0.839545,1.0000,232.1765,75,117898,249882,17.0000,3947.0000
fam5681,G5681,fam0587,G587,UN,NA,0.0035,0.9871,0.0094,0.5030,-1,0.840482,1.0000,188.9524,79,116708,249522,21.0000,3968.0000
fam0578,G578,fam6039,G6039,UN,NA,0.0000,0.0095,0.9905,0.9952,-1,0.998462,1.0000,4553.0000,1,1123,364629,1.0000,4553.0000"
plink.genome <- read.csv(text=plink.genome)

ibdlist <- "ID1,ID2,k0,k1,kinship
G1000,G1001,1.0000000,0.00000000,0.000000000
G1000,G1003,0.9938901,0.00000000,0.003054932
G1241,G1245,1.0000000,0.00000000,0.000000000
G1000,G1005,1.0000000,0.00000000,0.000000000
G1079,G2484,0.9938901,0.00000000,0.003054932
G1000,G1009,1.0000000,0.00000000,0.000000000"
ibdlist <- read.csv(text=ibdlist)

x <- paste(plink.genome$IID1, plink.genome$IID2)
table <- paste(ibdlist$ID1, ibdlist$ID2)
idx <- match(x=x, table=table)
ibdlist[idx,"kinship"]


Best,
Rasmus


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Sat Apr 11 01:46:03 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 18:46:03 -0500
Subject: [R] matching doesn't work
In-Reply-To: <20200410230321.GJ187643@jrl.uk.to>
References: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>
 <20200410212416.GI187643@jrl.uk.to>
 <CAF9-5jN5Kd91_oaSPQ7-sqtZg19kPDr35A-tPVpZTZAsi7_igg@mail.gmail.com>
 <20200410230321.GJ187643@jrl.uk.to>
Message-ID: <CAF9-5jME3zCJr6Bn5fwEibik5fVWrpqDNCLUb4X=dXgYXGpJUA@mail.gmail.com>

so if I understand correctly you would just remove sep=" " from my codes?

Thank you so much for working on this.
Is there is any chance you can change my original code (pasted bellow)
with changes you think should work?

library(SNPRelate)

# get PLINK output
plink.genome <- read.table("plink.genome", header=TRUE)

snpgdsBED2GDS("output4.bed", "output4.fam","output4.bim", "HapMap.gds")
genofile <- snpgdsOpen("HapMap.gds")

# get SNPRelate output
ibd <- snpgdsIBDMoM(genofile, remove.monosnp=FALSE, kinship=TRUE)

# adjust for the orders of sample pair
pair.samp <- paste(ibdlist$ID1, ibdlist$ID2, sep=" ")
plink.genome <- plink.genome[match(
    paste(plink.genome$IID1, plink.genome$IID2, sep=" "), pair.samp), ]

On Fri, Apr 10, 2020 at 6:03 PM Rasmus Liland <jensrasmus at gmail.com> wrote:
>
> On 2020-04-10 17:05 -0500, Ana Marija wrote:
> > it didn't work unfortunately with your
> > example:
> >
> > > plink.genome[idx,]
> > character(0)
>
> Hi!  Perhaps csv formatting are better
> suited for these emails ... the two
> ibdlist lines I added still matches in
> this example, added lookup for kinship
> ... see if this works for you:
>
>
> plink.genome <- "FID1,IID1,FID2,IID2,RT,EZ,Z0,Z1,Z2,PI_HAT,PHE,DST,PPC,RATIO,IBS0,IBS1,IBS2,HOMHOM,HETHET
> fam1054,G1054,fam1054,G700,OT,0,0.0045,0.9938,0.0017,0.4986,-1,0.839150,1.0000,209.7368,103,118630,250667,19.0000,3985.0000
> fam1054,G1054,fam1054,G701,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.838381,1.0000,266.0667,81,119124,249829,15.0000,3991.0000
> fam1079,G1079,fam2484,G2484,UN,NA,0.0000,0.0007,0.9993,0.9997,-1,0.999889,1.0000,NA,0,82,370250,0.0000,4591.0000
> fam1245,G1237,fam1245,G1245,OT,0,0.0036,0.9964,0.0000,0.4982,-1,0.838770,1.0000,188.4762,83,118647,249728,21.0000,3958.0000
> fam1245,G1241,fam1245,G1245,OT,0,0.0042,0.9854,0.0104,0.5031,-1,0.840569,1.0000,265.8667,97,117116,250690,15.0000,3988.0000
> fam0176,G174,fam0176,G176,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.837799,1.0000,190.0476,107,118306,246937,21.0000,3991.0000
> fam0176,G175,fam0176,G176,OT,0,0.0045,0.9909,0.0046,0.5001,-1,0.839611,1.0000,198.6500,102,117026,248327,20.0000,3973.0000
> fam0179,G177,fam0179,G179,OT,0,0.0091,0.9903,0.0006,0.4958,-1,0.838517,1.0000,116.5000,207,117568,247532,34.0000,3961.0000
> fam0179,G178,fam0179,G179,OT,0,0.0098,0.9902,0.0000,0.4951,-1,0.838160,1.0000,90.4318,224,117440,246548,44.0000,3979.0000
> fam1818,G1818,fam1818,G1819,OT,0,0.0050,0.9884,0.0066,0.5008,-1,0.839882,1.0000,208.8947,115,117679,250401,19.0000,3969.0000
> fam1818,G1818,fam1818,G1820,OT,0,0.0050,0.9950,0.0000,0.4975,-1,0.838709,1.0000,208.6842,115,119083,250671,19.0000,3965.0000
> fam2450,G2007,fam2450,G2450,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.831786,1.0000,79.0196,278,120248,238553,51.0000,4030.0000
> fam2450,G2024,fam2450,G2450,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.832052,1.0000,104.6750,242,118317,235124,40.0000,4187.0000
> fam2181,G2181,fam5745,G5745,UN,NA,0.0002,0.0034,0.9964,0.9981,-1,0.999402,1.0000,NA,4,432,367475,0.0000,4613.0000
> fam2183,G2183,fam2183,G2184,OT,0,0.0058,0.9836,0.0106,0.5024,-1,0.840452,1.0000,164.9583,133,117858,252192,24.0000,3959.0000
> fam2183,G2183,fam2183,G2185,OT,0,0.0045,0.9929,0.0026,0.4990,-1,0.839280,1.0000,136.2414,105,118760,251251,29.0000,3951.0000
> fam2280,G2280,fam2280,G2281,OT,0,0.0042,0.9893,0.0065,0.5011,-1,0.839937,1.0000,248.7500,97,117600,250265,16.0000,3980.0000
> fam2280,G2280,fam2280,G2282,OT,0,0.0033,0.9885,0.0082,0.5024,-1,0.840294,1.0000,264.8000,76,117095,249900,15.0000,3972.0000
> fam2286,G2284,fam2286,G2286,OT,0,0.0048,0.9952,0.0000,0.4976,-1,0.838745,1.0000,179.5909,112,118986,250534,22.0000,3951.0000
> fam2286,G2285,fam2286,G2286,OT,0,0.0046,0.9846,0.0108,0.5031,-1,0.840586,1.0000,331.4167,105,116441,249328,12.0000,3977.0000
> fam2813,G2813,fam4274,G4274,UN,NA,0.0058,0.0495,0.9447,0.9695,-1,0.990555,1.0000,239.2105,131,6616,357351,19.0000,4545.0000
> fam3238,G3237,fam3238,G3238,OT,0,0.0055,0.9913,0.0033,0.4989,-1,0.839299,1.0000,160.6800,125,117652,249060,25.0000,4017.0000
> fam3238,G3238,fam3238,G3264,OT,0,0.0035,0.9855,0.0110,0.5037,-1,0.840733,1.0000,173.3043,81,116986,250706,23.0000,3986.0000
> fam4257,G4257,fam0891,G891,UN,NA,0.2323,0.4978,0.2699,0.5188,-1,0.859862,1.0000,10.1332,5314,92050,268982,383.0000,3881.0000
> fam4275,G4275,fam4275,G4304,OT,0,0.0053,0.9947,0.0000,0.4973,-1,0.837959,1.0000,136.0345,122,118563,247910,29.0000,3945.0000
> fam4275,G4275,fam4275,G4352,OT,0,0.0048,0.9798,0.0154,0.5053,-1,0.841317,1.0000,209.3684,110,116482,251129,19.0000,3978.0000
> fam4454,G4452,fam4454,G4454,OT,0,0.0055,0.9840,0.0104,0.5024,-1,0.840440,1.0000,136.8966,127,116709,249681,29.0000,3970.0000
> fam4454,G4453,fam4454,G4454,OT,0,0.0057,0.9842,0.0101,0.5022,-1,0.840379,1.0000,160.0000,130,116255,248588,25.0000,4000.0000
> fam4666,G4666,fam0686,G686,UN,NA,0.0000,0.0026,0.9974,0.9987,-1,0.999576,1.0000,NA,0,312,367735,0.0000,4580.0000
> fam4691,G4691,fam4722,G4722,UN,NA,0.3986,0.4841,0.1173,0.3593,-1,0.818992,1.0000,5.9269,9073,113787,241580,602.0000,3568.0000
> fam5092,G5089,fam5092,G5092,OT,0,0.0051,0.9928,0.0022,0.4985,-1,0.839156,1.0000,234.4706,117,118225,249900,17.0000,3986.0000
> fam5092,G5092,fam5092,G5097,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.837560,1.0000,218.9444,100,119554,248956,18.0000,3941.0000
> fam5365,G5106,fam5365,G5365,OT,0,0.0057,0.9916,0.0027,0.4985,-1,0.839191,1.0000,208.0000,131,118747,251154,19.0000,3952.0000
> fam5365,G5118,fam5365,G5365,OT,0,0.0052,0.9886,0.0061,0.5004,-1,0.839781,1.0000,164.8750,121,118035,250954,24.0000,3957.0000
> fam0523,G523,fam0523,G551,OT,0,0.0037,0.9829,0.0135,0.5049,-1,0.841107,1.0000,180.6818,85,116769,251126,22.0000,3975.0000
> fam0523,G523,fam0523,G552,OT,0,0.0000,1.0000,0.0000,0.5000,-1,0.838173,1.0000,225.2353,81,119148,249406,17.0000,3829.0000
> fam5282,G5282,fam5282,G5328,OT,0,0.0033,0.9933,0.0035,0.5001,-1,0.839545,1.0000,232.1765,75,117898,249882,17.0000,3947.0000
> fam5681,G5681,fam0587,G587,UN,NA,0.0035,0.9871,0.0094,0.5030,-1,0.840482,1.0000,188.9524,79,116708,249522,21.0000,3968.0000
> fam0578,G578,fam6039,G6039,UN,NA,0.0000,0.0095,0.9905,0.9952,-1,0.998462,1.0000,4553.0000,1,1123,364629,1.0000,4553.0000"
> plink.genome <- read.csv(text=plink.genome)
>
> ibdlist <- "ID1,ID2,k0,k1,kinship
> G1000,G1001,1.0000000,0.00000000,0.000000000
> G1000,G1003,0.9938901,0.00000000,0.003054932
> G1241,G1245,1.0000000,0.00000000,0.000000000
> G1000,G1005,1.0000000,0.00000000,0.000000000
> G1079,G2484,0.9938901,0.00000000,0.003054932
> G1000,G1009,1.0000000,0.00000000,0.000000000"
> ibdlist <- read.csv(text=ibdlist)
>
> x <- paste(plink.genome$IID1, plink.genome$IID2)
> table <- paste(ibdlist$ID1, ibdlist$ID2)
> idx <- match(x=x, table=table)
> ibdlist[idx,"kinship"]
>
>
> Best,
> Rasmus


From jen@r@@mu@ @end|ng |rom gm@||@com  Sat Apr 11 02:01:15 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Sat, 11 Apr 2020 02:01:15 +0200
Subject: [R] matching doesn't work
In-Reply-To: <CAF9-5jME3zCJr6Bn5fwEibik5fVWrpqDNCLUb4X=dXgYXGpJUA@mail.gmail.com>
References: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>
 <20200410212416.GI187643@jrl.uk.to>
 <CAF9-5jN5Kd91_oaSPQ7-sqtZg19kPDr35A-tPVpZTZAsi7_igg@mail.gmail.com>
 <20200410230321.GJ187643@jrl.uk.to>
 <CAF9-5jME3zCJr6Bn5fwEibik5fVWrpqDNCLUb4X=dXgYXGpJUA@mail.gmail.com>
Message-ID: <20200411000115.GA452264@jrl.uk.to>

On 2020-04-10 18:46 -0500, Ana Marija wrote:
> so if I understand correctly you would just remove sep=" " from my codes?
> 
> Thank you so much for working on this.
> Is there is any chance you can change my original code (pasted bellow)
> with changes you think should work?
> 
> library(SNPRelate)
> 
> # get PLINK output
> plink.genome <- read.table("plink.genome", header=TRUE)
> 
> snpgdsBED2GDS("output4.bed", "output4.fam","output4.bim", "HapMap.gds")
> genofile <- snpgdsOpen("HapMap.gds")
> 
> # get SNPRelate output
> ibd <- snpgdsIBDMoM(genofile, remove.monosnp=FALSE, kinship=TRUE)
> 
> # adjust for the orders of sample pair
> pair.samp <- paste(ibdlist$ID1, ibdlist$ID2, sep=" ")
> plink.genome <- plink.genome[match(
>     paste(plink.genome$IID1, plink.genome$IID2, sep=" "), pair.samp), ]

Yes, it seems like my tab separated values got converted to 
spaces ... so comma separated values seemed like a sane choice 
...

But ... I do not have all those specific files called here ... 
this seems very similar to what you had before ... what is it 
that does not work?  Do you get any errors here at all, or?


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Sat Apr 11 02:05:32 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 10 Apr 2020 19:05:32 -0500
Subject: [R] matching doesn't work
In-Reply-To: <20200411000115.GA452264@jrl.uk.to>
References: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>
 <20200410212416.GI187643@jrl.uk.to>
 <CAF9-5jN5Kd91_oaSPQ7-sqtZg19kPDr35A-tPVpZTZAsi7_igg@mail.gmail.com>
 <20200410230321.GJ187643@jrl.uk.to>
 <CAF9-5jME3zCJr6Bn5fwEibik5fVWrpqDNCLUb4X=dXgYXGpJUA@mail.gmail.com>
 <20200411000115.GA452264@jrl.uk.to>
Message-ID: <CAF9-5jOByR-vaT3ShY0vjrb0s1XUBGqdqKY_uBzZY8JQ3abfLg@mail.gmail.com>

I am not sure what I am suppose to run from your codes.
Can you just send me lines of codes which I should run? (without part
where you are loading your data frames)
(assuming my files are as I showed them)

Or the whole idea was to remove sep=" " from everywhere?

On Fri, Apr 10, 2020 at 7:01 PM Rasmus Liland <jensrasmus at gmail.com> wrote:
>
> On 2020-04-10 18:46 -0500, Ana Marija wrote:
> > so if I understand correctly you would just remove sep=" " from my codes?
> >
> > Thank you so much for working on this.
> > Is there is any chance you can change my original code (pasted bellow)
> > with changes you think should work?
> >
> > library(SNPRelate)
> >
> > # get PLINK output
> > plink.genome <- read.table("plink.genome", header=TRUE)
> >
> > snpgdsBED2GDS("output4.bed", "output4.fam","output4.bim", "HapMap.gds")
> > genofile <- snpgdsOpen("HapMap.gds")
> >
> > # get SNPRelate output
> > ibd <- snpgdsIBDMoM(genofile, remove.monosnp=FALSE, kinship=TRUE)
> >
> > # adjust for the orders of sample pair
> > pair.samp <- paste(ibdlist$ID1, ibdlist$ID2, sep=" ")
> > plink.genome <- plink.genome[match(
> >     paste(plink.genome$IID1, plink.genome$IID2, sep=" "), pair.samp), ]
>
> Yes, it seems like my tab separated values got converted to
> spaces ... so comma separated values seemed like a sane choice
> ...
>
> But ... I do not have all those specific files called here ...
> this seems very similar to what you had before ... what is it
> that does not work?  Do you get any errors here at all, or?


From @n@ndmenon@12 @end|ng |rom gm@||@com  Sat Apr 11 05:33:41 2020
From: @n@ndmenon@12 @end|ng |rom gm@||@com (Anand Menon)
Date: Fri, 10 Apr 2020 23:33:41 -0400
Subject: [R] question about system.file()
In-Reply-To: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
References: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
Message-ID: <CAGmqtKjwfMWxkNxqHi-rzyzGa2n8-CCbq7z5=T3D0Q5hCngjHw@mail.gmail.com>

Hello, Could you please help unsubscribe me from these emails. Thank you.

Kind Regards,
Anand K Menon
Cell: 1-416-939-3671


On Fri, Apr 10, 2020 at 3:46 PM Ana Marija <sokovic.anamarija at gmail.com>
wrote:

> Hello,
>
> I would like to try this example in this link:
>
> https://www.rdocumentation.org/packages/SNPRelate/versions/1.6.4/topics/snpgdsBED2GDS
>
> for example this line:
>
> bed.fn <- system.file("extdata", "plinkhapmap.bed.gz", package="SNPRelate")
>
> I have in current directory from where I would run this function a
> file named output4.bed
>
> in order to run the above, can I just run this:
> bed.fn <- system.file("output4.bed", package="SNPRelate")
>
> what is "extdata" ? Do I need it if my output4.bed is in the directory
> from where I am running this?
>
> Also do I need to have .gz format of output4.bed?
>
> Thanks
> Ana
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Apr 11 12:41:09 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 11 Apr 2020 11:41:09 +0100
Subject: [R] question about system.file()
In-Reply-To: <CAGmqtKjwfMWxkNxqHi-rzyzGa2n8-CCbq7z5=T3D0Q5hCngjHw@mail.gmail.com>
References: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
 <CAGmqtKjwfMWxkNxqHi-rzyzGa2n8-CCbq7z5=T3D0Q5hCngjHw@mail.gmail.com>
Message-ID: <f0627d3d-fbfd-a9ae-a661-f5f981fbb18f@sapo.pt>

Hello,

There are instructions to unsubscribe at the bottom of this e-mail and 
of every R-Help e-mail, see the all capital letters word.

Hope this helps,

Rui Barradas

?s 04:33 de 11/04/20, Anand Menon escreveu:
> Hello, Could you please help unsubscribe me from these emails. Thank you.
> 
> Kind Regards,
> Anand K Menon
> Cell: 1-416-939-3671
> 
> 
> On Fri, Apr 10, 2020 at 3:46 PM Ana Marija <sokovic.anamarija at gmail.com>
> wrote:
> 
>> Hello,
>>
>> I would like to try this example in this link:
>>
>> https://www.rdocumentation.org/packages/SNPRelate/versions/1.6.4/topics/snpgdsBED2GDS
>>
>> for example this line:
>>
>> bed.fn <- system.file("extdata", "plinkhapmap.bed.gz", package="SNPRelate")
>>
>> I have in current directory from where I would run this function a
>> file named output4.bed
>>
>> in order to run the above, can I just run this:
>> bed.fn <- system.file("output4.bed", package="SNPRelate")
>>
>> what is "extdata" ? Do I need it if my output4.bed is in the directory
>> from where I am running this?
>>
>> Also do I need to have .gz format of output4.bed?
>>
>> Thanks
>> Ana
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From t@n@@@ @end|ng |rom gm@||@com  Sat Apr 11 12:44:51 2020
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Sat, 11 Apr 2020 03:44:51 -0700
Subject: [R] 2 docker containers with R ?
Message-ID: <CA+JEM019LpDXGfbfS-BOJfLuzo-8RjKr=AE-SdxSbXE66O4T+A@mail.gmail.com>

Dear all,

we wish everyone a safe and healthy time !

i'm looking forward to have you suggestions please : I am using a R package
that is called Seurat for scRNA-seq analysis (https://satijalab.org/seurat/)
that has two versions (version 2 or version3 with distinct functions);

i'd appreciate if you could please let me know how could I have Seurat2 and
Seurat3 on the same machine, and preferentially run either Seurat2 or
Seurat3 ? I believe that I could use 2 docker containers (how could install
R in 2 different containers ?), or is there another solution ? thanks a lot
!

-- bogdan

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Apr 11 13:16:29 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 11 Apr 2020 14:16:29 +0300
Subject: [R] 2 docker containers with R ?
In-Reply-To: <CA+JEM019LpDXGfbfS-BOJfLuzo-8RjKr=AE-SdxSbXE66O4T+A@mail.gmail.com>
References: <CA+JEM019LpDXGfbfS-BOJfLuzo-8RjKr=AE-SdxSbXE66O4T+A@mail.gmail.com>
Message-ID: <20200411141629.40d9aa8f@Tarkus>

On Sat, 11 Apr 2020 03:44:51 -0700
Bogdan Tanasa <tanasa at gmail.com> wrote:

> how could I have Seurat2 and Seurat3 on the same machine

What I would try first is to install Seurat2 and Seurat3 in separate
library directories: add the `lib` argument to install.packages when
installing a given version and `lib.loc` when loading it using
library().

While Docker is definitely able to solve this problem, in my opinion,
virtualising a whole operating system is overkill in this case.

-- 
Best regards,
Ivan


From @@h|mk@poor @end|ng |rom gm@||@com  Sat Apr 11 13:25:04 2020
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Sat, 11 Apr 2020 16:55:04 +0530
Subject: [R] 2 docker containers with R ?
In-Reply-To: <20200411141629.40d9aa8f@Tarkus>
References: <CA+JEM019LpDXGfbfS-BOJfLuzo-8RjKr=AE-SdxSbXE66O4T+A@mail.gmail.com>
 <20200411141629.40d9aa8f@Tarkus>
Message-ID: <CAC8=1eosbeZRtFP6No_64Evc1nsnB0ESojyeK9vz1V9vs4G-=w@mail.gmail.com>

Dear Bogdan,

Perhaps

https://rstudio.github.io/packrat/

can be of help?

Best,
Ashim

On Sat, Apr 11, 2020 at 4:47 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Sat, 11 Apr 2020 03:44:51 -0700
> Bogdan Tanasa <tanasa at gmail.com> wrote:
>
> > how could I have Seurat2 and Seurat3 on the same machine
>
> What I would try first is to install Seurat2 and Seurat3 in separate
> library directories: add the `lib` argument to install.packages when
> installing a given version and `lib.loc` when loading it using
> library().
>
> While Docker is definitely able to solve this problem, in my opinion,
> virtualising a whole operating system is overkill in this case.
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Apr 11 14:43:08 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 11 Apr 2020 05:43:08 -0700
Subject: [R] question about system.file()
In-Reply-To: <CAGmqtKjwfMWxkNxqHi-rzyzGa2n8-CCbq7z5=T3D0Q5hCngjHw@mail.gmail.com>
References: <CAF9-5jOyu_d9=MTWtdxrfuS3+txEfzet_cR7E4hvCNHKT-jyJg@mail.gmail.com>
 <CAGmqtKjwfMWxkNxqHi-rzyzGa2n8-CCbq7z5=T3D0Q5hCngjHw@mail.gmail.com>
Message-ID: <DAFAE256-722A-4151-8C0E-23EA17420210@dcn.davis.ca.us>

Only you have the power to solve your problem. Follow the instructions in the footer of any R-help email.

On April 10, 2020 8:33:41 PM PDT, Anand Menon <anandmenon.12 at gmail.com> wrote:
>Hello, Could you please help unsubscribe me from these emails. Thank
>you.
>
>Kind Regards,
>Anand K Menon
>Cell: 1-416-939-3671
>
>
>On Fri, Apr 10, 2020 at 3:46 PM Ana Marija
><sokovic.anamarija at gmail.com>
>wrote:
>
>> Hello,
>>
>> I would like to try this example in this link:
>>
>>
>https://www.rdocumentation.org/packages/SNPRelate/versions/1.6.4/topics/snpgdsBED2GDS
>>
>> for example this line:
>>
>> bed.fn <- system.file("extdata", "plinkhapmap.bed.gz",
>package="SNPRelate")
>>
>> I have in current directory from where I would run this function a
>> file named output4.bed
>>
>> in order to run the above, can I just run this:
>> bed.fn <- system.file("output4.bed", package="SNPRelate")
>>
>> what is "extdata" ? Do I need it if my output4.bed is in the
>directory
>> from where I am running this?
>>
>> Also do I need to have .gz format of output4.bed?
>>
>> Thanks
>> Ana
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Apr 11 16:00:21 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 11 Apr 2020 14:00:21 +0000 (UTC)
Subject: [R] Add Gauss normal curve ?
References: <560631430.7107376.1586613621651.ref@mail.yahoo.com>
Message-ID: <560631430.7107376.1586613621651@mail.yahoo.com>

Dear R-experts,

Here below my reproducible example. I would like to fit/add the Gauss normal curve to this data. 
I don't get it. There is no error message but I don't get what I am looking for. 
Many thanks for your help.

############################################################
mydates <- as.Date(c("2020-03-15", "2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10"))

nc<-c(1,1,2,7,3,6,6,20,17,46,67,71,56,70,85,93,301,339,325,226,608,546,1069,1264,1340,813,608)

plot(as.Date(mydates),nc,pch=16,type="o",col="blue",ylim=c(1,1400), xlim=c(min(as.Date(mydates)),max(as.Date(mydates))))

x <- seq(min(mydates), max(mydates), 0.1) 

curve(dnorm(x, mean(nc), sd(nc)), add=TRUE, col="red", lwd=2)
############################################################


From jen@r@@mu@ @end|ng |rom gm@||@com  Sat Apr 11 16:51:22 2020
From: jen@r@@mu@ @end|ng |rom gm@||@com (Rasmus Liland)
Date: Sat, 11 Apr 2020 16:51:22 +0200
Subject: [R] matching doesn't work
In-Reply-To: <CAF9-5jOByR-vaT3ShY0vjrb0s1XUBGqdqKY_uBzZY8JQ3abfLg@mail.gmail.com>
References: <CAF9-5jNcj0F4=kp-DfoU-VMkQuBC_dDCj_taLQ8vb2dhG5ic1w@mail.gmail.com>
 <20200410212416.GI187643@jrl.uk.to>
 <CAF9-5jN5Kd91_oaSPQ7-sqtZg19kPDr35A-tPVpZTZAsi7_igg@mail.gmail.com>
 <20200410230321.GJ187643@jrl.uk.to>
 <CAF9-5jME3zCJr6Bn5fwEibik5fVWrpqDNCLUb4X=dXgYXGpJUA@mail.gmail.com>
 <20200411000115.GA452264@jrl.uk.to>
 <CAF9-5jOByR-vaT3ShY0vjrb0s1XUBGqdqKY_uBzZY8JQ3abfLg@mail.gmail.com>
Message-ID: <20200411145122.GK187643@jrl.uk.to>

On 2020-04-10 19:05 -0500, Ana Marija wrote:
> I am not sure what I am suppose to run 
> from your codes.  Can you just send me 
> lines of codes which I should run? 
> (without part where you are loading 
> your data frames) (assuming my files 
> are as I showed them)

Dear Ana,

try these lines:


plink.genome <-
  read.table("plink.genome", header=TRUE)
SNPRelate::snpgdsBED2GDS(
  "output4.bed",
  "output4.fam",
  "output4.bim",
  "HapMap.gds")
genofile <-
  SNPRelate::snpgdsOpen("HapMap.gds")
ibd <- SNPRelate::snpgdsIBDMoM(
  genofile,
  remove.monosnp=FALSE,
  kinship=TRUE)
x <- paste(plink.genome$IID1,
           plink.genome$IID2)
table <- paste(ibd$ID1, ibd$ID2)
idx <- match(x=x, table=table)
plink.genome[idx,]


Best,
Rasmus


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Apr 11 17:00:45 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 11 Apr 2020 08:00:45 -0700
Subject: [R] Add Gauss normal curve ?
In-Reply-To: <560631430.7107376.1586613621651@mail.yahoo.com>
References: <560631430.7107376.1586613621651.ref@mail.yahoo.com>
 <560631430.7107376.1586613621651@mail.yahoo.com>
Message-ID: <44feecb3-1e4f-ca45-d04e-1563f172ace3@comcast.net>


On 4/11/20 7:00 AM, varin sacha via R-help wrote:
> Dear R-experts,
>
> Here below my reproducible example. I would like to fit/add the Gauss normal curve to this data.
> I don't get it. There is no error message but I don't get what I am looking for.
> Many thanks for your help.
>
> ############################################################
> mydates <- as.Date(c("2020-03-15", "2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10"))
>
> nc<-c(1,1,2,7,3,6,6,20,17,46,67,71,56,70,85,93,301,339,325,226,608,546,1069,1264,1340,813,608)
>
> plot(as.Date(mydates),nc,pch=16,type="o",col="blue",ylim=c(1,1400), xlim=c(min(as.Date(mydates)),max(as.Date(mydates))))
>
> x <- seq(min(mydates), max(mydates), 0.1)
>
> curve(dnorm(x, mean(nc), sd(nc)), add=TRUE, col="red", lwd=2)


(I infer) The values in the `nc` vector are not taken from observations 
that are interpretable as independent sampling from a continuous random 
vector. They are counts, i.e. "new cases".


Furthermore, the "x" value in your plot is not the `nc` vector but 
rather it is the the ""y"-vector, so even if it were appropriate to use 
a Normal curve for fitting you would need to take the `nc` vector as 
corresponding to a density along the time axis.

You could probably do as well by "eyeballing" where you want the 
"normal" curve to sit, since there would be no theoretical support for 
more refined curve fitting efforts. You might also need to scale the 
density values so they would appear as something other than a flat line.

And the `curve` function does need an expression but it would be 
plotting that result far to the left of your current plotting range 
which is set by the integer values of those dates, i.e values in the 
tens of thousands. Use the `lines` function for better control.


lines( x= as.numeric(mydates),

 ? ? ? ? ? ? ? ? ? # 3000 was eyeball guess as to a scaling factor that 
might work

 ????????????????? # but needed a larger number to make the curves 
commensurate

 ?????? y=10000* dnorm( x= as.numeric(mydates),? #set a proper x scale

 ??????????????? ? ? ?? mean= as.numeric( mydates[ which.max(nc) ]),? 
#use location of max

 ???????????????? ? ? ? sd= 7) )


Might need to use smaller value for the "standard deviation" and higher 
scaling factor to improve the eyeball fit.You might like a value of 
sd=4, but it would remain an unsupportable effort from a statistical 
viewpoint.



-- 

David

> ############################################################
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pd@|gd @end|ng |rom gm@||@com  Sat Apr 11 17:02:33 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Sat, 11 Apr 2020 17:02:33 +0200
Subject: [R] Add Gauss normal curve ?
In-Reply-To: <560631430.7107376.1586613621651@mail.yahoo.com>
References: <560631430.7107376.1586613621651.ref@mail.yahoo.com>
 <560631430.7107376.1586613621651@mail.yahoo.com>
Message-ID: <DD5E081F-BC95-4928-91F9-10D34EC401DC@gmail.com>

Two obvious problems: 

1. mean(nc) is a count, not a date, sd likewise
2. the scale of dnorm() is density, not count

So (slightly inefficient, but who cares...):

y <- rep(mydates, nc)
n <- sum(nc)
curve(n*dnorm(x, mean(y), sd(y)), add=TRUE, col="red", lwd=2)

-pd

> On 11 Apr 2020, at 16:00 , varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Dear R-experts,
> 
> Here below my reproducible example. I would like to fit/add the Gauss normal curve to this data. 
> I don't get it. There is no error message but I don't get what I am looking for. 
> Many thanks for your help.
> 
> ############################################################
> mydates <- as.Date(c("2020-03-15", "2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10"))
> 
> nc<-c(1,1,2,7,3,6,6,20,17,46,67,71,56,70,85,93,301,339,325,226,608,546,1069,1264,1340,813,608)
> 
> plot(as.Date(mydates),nc,pch=16,type="o",col="blue",ylim=c(1,1400), xlim=c(min(as.Date(mydates)),max(as.Date(mydates))))
> 
> x <- seq(min(mydates), max(mydates), 0.1) 
> 
> curve(dnorm(x, mean(nc), sd(nc)), add=TRUE, col="red", lwd=2)
> ############################################################
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Apr 11 17:36:41 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 11 Apr 2020 15:36:41 +0000 (UTC)
Subject: [R] Add Gauss normal curve ?
In-Reply-To: <DD5E081F-BC95-4928-91F9-10D34EC401DC@gmail.com>
References: <560631430.7107376.1586613621651.ref@mail.yahoo.com>
 <560631430.7107376.1586613621651@mail.yahoo.com>
 <DD5E081F-BC95-4928-91F9-10D34EC401DC@gmail.com>
Message-ID: <1023087292.7101722.1586619401718@mail.yahoo.com>

Dear Peter, 
Dear David,

Many thanks for your response. 
Indeed, counts do not have a Gaussian distribution, even if.... sometimes one approximates the distribution by a Gaussian one, usually using the argument of the Central Limit Theorem.

Here below the reproducible example. 
One last thing. Now if I want to move my red Gaussian curve to the right or to the left, for example on the graph I can see that the Gaussian curve is centered around the 5th of April.

Is it possible to move the Gaussian curve to make the center of the Gaussian curve on the 30th of March for example ? If yes, how to do ?

############################################################
mydates <- as.Date(c("2020-03-15", "2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10"))

nc<-c(1,1,2,7,3,6,6,20,17,46,67,71,56,70,85,93,301,339,325,226,608,546,1069,1264,1340,813,608)

plot(as.Date(mydates),nc,pch=16,type="o",col="blue",ylim=c(1,1400), xlim=c(min(as.Date(mydates)),max(as.Date(mydates))))

y <- rep(mydates, nc)
n <- sum(nc)
curve(n*dnorm(x, mean(y), sd(y)), add=TRUE, col="red", lwd=2)
############################################################







Le samedi 11 avril 2020 ? 17:02:36 UTC+2, peter dalgaard <pdalgd at gmail.com> a ?crit : 





Two obvious problems: 

1. mean(nc) is a count, not a date, sd likewise
2. the scale of dnorm() is density, not count

So (slightly inefficient, but who cares...):

y <- rep(mydates, nc)
n <- sum(nc)
curve(n*dnorm(x, mean(y), sd(y)), add=TRUE, col="red", lwd=2)

-pd

> On 11 Apr 2020, at 16:00 , varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Dear R-experts,
> 
> Here below my reproducible example. I would like to fit/add the Gauss normal curve to this data. 
> I don't get it. There is no error message but I don't get what I am looking for. 
> Many thanks for your help.
> 
> ############################################################
> mydates <- as.Date(c("2020-03-15", "2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10"))
> 
> nc<-c(1,1,2,7,3,6,6,20,17,46,67,71,56,70,85,93,301,339,325,226,608,546,1069,1264,1340,813,608)
> 
> plot(as.Date(mydates),nc,pch=16,type="o",col="blue",ylim=c(1,1400), xlim=c(min(as.Date(mydates)),max(as.Date(mydates))))
> 
> x <- seq(min(mydates), max(mydates), 0.1) 
> 
> curve(dnorm(x, mean(nc), sd(nc)), add=TRUE, col="red", lwd=2)
> ############################################################
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk? Priv: PDalgd at gmail.com


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Sat Apr 11 20:09:07 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Sat, 11 Apr 2020 20:09:07 +0200
Subject: [R] 
 Having trouble understanding the sapply/vapply documentation
 and behaviour of USE.NAMES
In-Reply-To: <4b61dc7f-b5e2-dcc8-a44d-9a581a5de5ff@auckland.ac.nz>
References: <CABAj7xcXm=NaApNSPtym8ajha9BRmZ5FMxAgc=FFHi5fP8FvLA@mail.gmail.com>
 <4b61dc7f-b5e2-dcc8-a44d-9a581a5de5ff@auckland.ac.nz>
Message-ID: <24210.1987.386863.744269@stat.math.ethz.ch>

>>>>> Rolf Turner 
>>>>>     on Fri, 10 Apr 2020 12:23:49 +1200 writes:

    > On 10/04/20 10:59 am, petr smirnov wrote:

    >> I am having trouble parsing the documentation for sapply
    >> and vapply, and I cannot understand if it explains the
    >> different behaviour of USE.NAMES between the two.
    >> 
    >> I noticed the following different behaviour between the
    >> two functions:
    >> 
    >>> sapply(c("1"=1, "2"=2, "3"=3), function(x) {r <-
    >>> list(x); r}, USE.NAMES=FALSE)
    >> $`1` [1] 1
    >> 
    >> $`2` [1] 2
    >> 
    >> $`3` [1] 3
    >> 
    >>> vapply(c("1"=1, "2"=2, "3"=3), function(x) { r <-
    >>> list(x); r}, FUN.VALUE=list(1), USE.NAMES=FALSE)
    >> [[1]] [1] 1
    >> 
    >> [[2]] [1] 2
    >> 
    >> [[3]] [1] 3
    >> 
    >> In the sapply case, the names of the input vector are
    >> retained. In the vapply case, they are dropped. Note that
    >> this is not true when USE.NAMES=TRUE:
    >> 
    >>> vapply(c("1"=1, "2"=2, "3"=3), function(x) { r <-
    >>> list(x); r}, FUN.VALUE=list(1), USE.NAMES=TRUE)
    >> $`1` [1] 1
    >> 
    >> $`2` [1] 2
    >> 
    >> $`3` [1] 3
    >> 
    >> The manual page explains this for the names of the result
    >> of vapply:
    >> 
    >> The (Dim)names of the array value are taken from the
    >> FUN.VALUE if it is named, otherwise from the result of
    >> the first function call. Column names of the matrix or
    >> more generally the names of the last dimension of the
    >> array value or names of the vector value are set from X
    >> as in sapply.
    >> 
    >> If this explains the behaviour, could someone break it
    >> down for me and help me understand the reasoning?

1) sapply() exists longer than R  with the current semantic:

  If the original list (or named vector or..) already *has* 'names',
  they are not explicitly removed, and so  USE.NAMES has no
  effect for sapply().

  This is "logical" if you think what sapply() had been created
  for:  sapply(..) := "simplified lapply(..)"
  and then it got the *new* option to *add* names when there
  were none in the original lapply() result:

 The very first paragraph on the help page where 'sapply' is
 mentioned reads (with line breaks modified to be even clearer here) :

    'sapply' is a user-friendly version and wrapper of 'lapply' by
    default returning a vector, matrix or, if 'simplify = "array"', an
    array if appropriate, by applying 'simplify2array()'.  
    'sapply(x, f, simplify = FALSE, USE.NAMES = FALSE)'   is the same as
    'lapply(x, f)'.

 From this alone (and some thinking about reasonable lapply() semantics)
 it's easy to conclude that indeed  sapply(*, USE.NAMES=FALSE)
 should *not* remove names that were there already after lapply().

 {One possibility would be to allow a new *third* option for
  USE.NAMES, say  USE.NAMES="never" .. but I'd tend to consider
  that superfluous and hence just an unnecessary complication}

2) vapply()  had been proposed and introduced about two
   decennia after sapply() [had been introduced into S, R's precursor].

   For that, it's implementor must have chosen to use
   'USE.NAMES' more intuitively... and in that case, it also
   makes a *lot* of sense implementation wise, because vapply()
   does *not* go via lapply().

    >> Otherwise, is this different behaviour intentional?

yes, see above.


    >> Should it be documented more clearly?

If both you and Rolf find the current help page confusing about
this, I'd  agree that it probably could be improved.
Improvement is not easy so:  As we observe help pages are very
very rarely read carefully nowadays (not even by you in this
case (!), see below),  so it's not entirely obvious if adding
verbosity to an existing help page is any improvement.

    > IMHO there is an error in the documentation here.  Clearly
    > USE.NAMES has a different impact on vapply() than it has
    > on sapply() and the documentation does not indicate this,
    > in fact quite the opposite.

Strictly speaking, that is not true; there is *NO* error:
The documentation never explicitly says what happens with USE.NAMES=FALSE,
whereas it clearly and correctly specifies the effect of  USE.NAMES=TRUE,
and everything it says is correct (and as mentioned initially,
it notably indirectly specifies that sapply(*, USE.NAMES=FALSE)
would *not* remove existing names.

  [....]

    > cheers,
    > Rolf Turner
n
    > -- 
    > Honorary Research Fellow Department of Statistics
    > University of Auckland Phone: +64-9-373-7599 ext. 88276


From djnord|und @end|ng |rom gm@||@com  Sat Apr 11 20:37:37 2020
From: djnord|und @end|ng |rom gm@||@com (Daniel Nordlund)
Date: Sat, 11 Apr 2020 11:37:37 -0700
Subject: [R] Add Gauss normal curve ?
In-Reply-To: <1023087292.7101722.1586619401718@mail.yahoo.com>
References: <560631430.7107376.1586613621651.ref@mail.yahoo.com>
 <560631430.7107376.1586613621651@mail.yahoo.com>
 <DD5E081F-BC95-4928-91F9-10D34EC401DC@gmail.com>
 <1023087292.7101722.1586619401718@mail.yahoo.com>
Message-ID: <797a8ee8-142f-12f0-ad50-7b0f5663b282@gmail.com>

Just replace 'mean(y)' in your curve() function with 
as.Date("whatever-date")

curve(n*dnorm(x, as.Date("2020-03-30"), sd(y)), add=TRUE, col="red", lwd=2)

Dan

On 4/11/2020 8:36 AM, varin sacha via R-help wrote:
> Dear Peter,
> Dear David,
>
> Many thanks for your response.
> Indeed, counts do not have a Gaussian distribution, even if.... sometimes one approximates the distribution by a Gaussian one, usually using the argument of the Central Limit Theorem.
>
> Here below the reproducible example.
> One last thing. Now if I want to move my red Gaussian curve to the right or to the left, for example on the graph I can see that the Gaussian curve is centered around the 5th of April.
>
> Is it possible to move the Gaussian curve to make the center of the Gaussian curve on the 30th of March for example ? If yes, how to do ?
>
> ############################################################
> mydates <- as.Date(c("2020-03-15", "2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10"))
>
> nc<-c(1,1,2,7,3,6,6,20,17,46,67,71,56,70,85,93,301,339,325,226,608,546,1069,1264,1340,813,608)
>
> plot(as.Date(mydates),nc,pch=16,type="o",col="blue",ylim=c(1,1400), xlim=c(min(as.Date(mydates)),max(as.Date(mydates))))
>
> y <- rep(mydates, nc)
> n <- sum(nc)
> curve(n*dnorm(x, mean(y), sd(y)), add=TRUE, col="red", lwd=2)
> ############################################################
>
>
>
>
>
>
>
> Le samedi 11 avril 2020 ? 17:02:36 UTC+2, peter dalgaard <pdalgd at gmail.com> a ?crit :
>
>
>
>
>
> Two obvious problems:
>
> 1. mean(nc) is a count, not a date, sd likewise
> 2. the scale of dnorm() is density, not count
>
> So (slightly inefficient, but who cares...):
>
> y <- rep(mydates, nc)
> n <- sum(nc)
> curve(n*dnorm(x, mean(y), sd(y)), add=TRUE, col="red", lwd=2)
>
> -pd
>
>> On 11 Apr 2020, at 16:00 , varin sacha via R-help <r-help at r-project.org> wrote:
>>
>> Dear R-experts,
>>
>> Here below my reproducible example. I would like to fit/add the Gauss normal curve to this data.
>> I don't get it. There is no error message but I don't get what I am looking for.
>> Many thanks for your help.
>>
>> ############################################################
>> mydates <- as.Date(c("2020-03-15", "2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10"))
>>
>> nc<-c(1,1,2,7,3,6,6,20,17,46,67,71,56,70,85,93,301,339,325,226,608,546,1069,1264,1340,813,608)
>>
>> plot(as.Date(mydates),nc,pch=16,type="o",col="blue",ylim=c(1,1400), xlim=c(min(as.Date(mydates)),max(as.Date(mydates))))
>>
>> x <- seq(min(mydates), max(mydates), 0.1)
>>
>> curve(dnorm(x, mean(nc), sd(nc)), add=TRUE, col="red", lwd=2)
>> ############################################################
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Daniel Nordlund
Port Townsend, WA  USA


From g|ennm@chu|tz @end|ng |rom me@com  Sat Apr 11 15:52:54 2020
From: g|ennm@chu|tz @end|ng |rom me@com (Glenn Schultz)
Date: Sat, 11 Apr 2020 13:52:54 -0000
Subject: [R] setting serialization
Message-ID: <323f5cc7-88e5-46da-aa17-b4a68f360549@me.com>

All,

I have a set up as shown below. ?Everything works fine but the new serialization default is 3, I would like it to serialize to version = 2. ?I've tried a couple of different ways to set version and googled around but so far I've had no luck. ?The package builds fine but then sets dependency to R(>= 3.5.0) this no backward compatibility. ?Actually, I don't mind this personally but is there a way with the below set-up to avoid this?

Best,
Glenn

zzz.r file as below
???????.onAttach <- function(libname, pkgname){
??????packageStartupMessage(
??????"Bond Lab is a registered trademark of Bond Lab Technologies.")
??????BondLabSetUp()
??????}

A file in my inst directory with functions that I serialize on load an example of which is below.
?????????Scenario(
?????????Name = "NCs",
?????????Type = "Immediate",
?????????ShiftType = "Parallel",
?????????Shiftbps = "0",
?????????Formula = function(rates.data = vector(), Shiftbps = "character"){
?????????yield.basis = 100
?????????pmax(0.01, as.numeric(rates.data) + (as.numeric(Shiftbps)/yield.basis))
?????????})

A .R file?BondLabSetUp.R #' Setup function for the R package BondLab to create the needed objects
#' 
#' @export
BondLabSetUp <- function(){

do.call(source, 
list(file = paste(system.file(package = "BondLab"), 
"/Scenario/Scenario_SpotCurve", sep = ""),
local = TRUE))


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Apr 12 03:04:48 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 12 Apr 2020 13:04:48 +1200
Subject: [R] 
 Having trouble understanding the sapply/vapply documentation
 and behaviour of USE.NAMES
In-Reply-To: <24210.1987.386863.744269@stat.math.ethz.ch>
References: <CABAj7xcXm=NaApNSPtym8ajha9BRmZ5FMxAgc=FFHi5fP8FvLA@mail.gmail.com>
 <4b61dc7f-b5e2-dcc8-a44d-9a581a5de5ff@auckland.ac.nz>
 <24210.1987.386863.744269@stat.math.ethz.ch>
Message-ID: <54ce7d6b-c320-50b9-38f3-c18df214f9f0@auckland.ac.nz>


On 12/04/20 6:09 am, Martin Maechler wrote:

>>>>>> Rolf Turner
>>>>>>      on Fri, 10 Apr 2020 12:23:49 +1200 writes:

<SNIP>

> 
>      > IMHO there is an error in the documentation here.  Clearly
>      > USE.NAMES has a different impact on vapply() than it has
>      > on sapply() and the documentation does not indicate this,
>      > in fact quite the opposite.
> 
> Strictly speaking, that is not true; there is *NO* error:
> The documentation never explicitly says what happens with USE.NAMES=FALSE,
> whereas it clearly and correctly specifies the effect of  USE.NAMES=TRUE,
> and everything it says is correct (and as mentioned initially,
> it notably indirectly specifies that sapply(*, USE.NAMES=FALSE)
> would *not* remove existing names.

<SNIP>

This reminds me slightly of fortunes::fortune(313). :-)

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From t@n@@@ @end|ng |rom gm@||@com  Sun Apr 12 04:06:21 2020
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Sat, 11 Apr 2020 19:06:21 -0700
Subject: [R] 2 docker containers with R ?
In-Reply-To: <CAC8=1eosbeZRtFP6No_64Evc1nsnB0ESojyeK9vz1V9vs4G-=w@mail.gmail.com>
References: <CA+JEM019LpDXGfbfS-BOJfLuzo-8RjKr=AE-SdxSbXE66O4T+A@mail.gmail.com>
 <20200411141629.40d9aa8f@Tarkus>
 <CAC8=1eosbeZRtFP6No_64Evc1nsnB0ESojyeK9vz1V9vs4G-=w@mail.gmail.com>
Message-ID: <CA+JEM00Gydo_U0J-xHrM-q2eZDMtccQQig1eqv0jYPTzs+aD5w@mail.gmail.com>

thanks a lot, Ashim, and Ivan !

On Sat, Apr 11, 2020 at 4:25 AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:

> Dear Bogdan,
>
> Perhaps
>
> https://rstudio.github.io/packrat/
>
> can be of help?
>
> Best,
> Ashim
>
> On Sat, Apr 11, 2020 at 4:47 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
>> On Sat, 11 Apr 2020 03:44:51 -0700
>> Bogdan Tanasa <tanasa at gmail.com> wrote:
>>
>> > how could I have Seurat2 and Seurat3 on the same machine
>>
>> What I would try first is to install Seurat2 and Seurat3 in separate
>> library directories: add the `lib` argument to install.packages when
>> installing a given version and `lib.loc` when loading it using
>> library().
>>
>> While Docker is definitely able to solve this problem, in my opinion,
>> virtualising a whole operating system is overkill in this case.
>>
>> --
>> Best regards,
>> Ivan
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From jte||er|@@rproject @end|ng |rom gm@||@com  Sun Apr 12 17:04:28 2020
From: jte||er|@@rproject @end|ng |rom gm@||@com (Juan Telleria Ruiz de Aguirre)
Date: Sun, 12 Apr 2020 17:04:28 +0200
Subject: [R] Learning Shinny
In-Reply-To: <CAPEb7FQ=3cWiNh=Ee_FAFozC-OE0YX_YeRcY+xy59faoNKHOcQ@mail.gmail.com>
References: <CAPEb7FQ=3cWiNh=Ee_FAFozC-OE0YX_YeRcY+xy59faoNKHOcQ@mail.gmail.com>
Message-ID: <CAJXDcw2ieAut2Qx=KPzL1wz6h8aDB9X+JVdnzkBjg=QN5YoA7g@mail.gmail.com>

You could use the following rmarkdown book, with last chapter debited to
shiny :)

https://bookdown.org/yihui/rmarkdown/

El jueves, 9 de abril de 2020, Kumar t <rlanguage22 at gmail.com> escribi?:

> Hello all ,
>
> Very sorry to ask you question that might have been answered earlier . I
> could not able to find right answer .
>
> My requirement is get decent level of proficiency  in the R-Shiny . Is
> there path ( I mean do I need to have knowledge of Dplyr to get data in
> right format )  that I need to follow . Any good references to  papers  or
> books or online resources .
>
> I am new learner to R language .
>
> Thanks
> Phani
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr 12 17:20:38 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 12 Apr 2020 08:20:38 -0700
Subject: [R] Learning Shinny
In-Reply-To: <CAPEb7FQ=3cWiNh=Ee_FAFozC-OE0YX_YeRcY+xy59faoNKHOcQ@mail.gmail.com>
References: <CAPEb7FQ=3cWiNh=Ee_FAFozC-OE0YX_YeRcY+xy59faoNKHOcQ@mail.gmail.com>
Message-ID: <9302B10A-2576-4EFB-A209-CB2C4AB3A5C5@dcn.davis.ca.us>

Your best bet is to become proficient in R. The dplyr contributed package is _not_ a requirement, though you may also find it useful. Shiny is a way to run R interactively, so if you have nothing you know how to _do_ with R then Shiny won't be very useful.

But you should also read the Posting Guide... this mailing list is about R language, and Shiny is a contributed package that is not technically on-topic here. The Shiny package README [1] directs you to the RStudio forum for questions about Shiny.

[1] https://cran.r-project.org/web/packages/shiny/readme/README.html

On April 9, 2020 2:42:06 PM PDT, Kumar t <rlanguage22 at gmail.com> wrote:
>Hello all ,
>
>Very sorry to ask you question that might have been answered earlier .
>I
>could not able to find right answer .
>
>My requirement is get decent level of proficiency  in the R-Shiny . Is
>there path ( I mean do I need to have knowledge of Dplyr to get data in
>right format )  that I need to follow . Any good references to  papers 
>or
>books or online resources .
>
>I am new learner to R language .
>
>Thanks
>Phani
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Sun Apr 12 21:06:29 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Sun, 12 Apr 2020 21:06:29 +0200
Subject: [R] About bootstrap validation method
Message-ID: <CA+nrPnvmO_NUkcORwrv19TSvysXhYUh3ksWiGYrOzOaZEfGbxw@mail.gmail.com>

If we have to perform 100 iterations of the out-of-sample bootstrap, do we
need to just enter the number 100 as:

trainControl (method="boot", number = 100)

Regards

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Apr 13 01:30:09 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 12 Apr 2020 16:30:09 -0700
Subject: [R] A stopifnot() nastiness, even if not a bug
Message-ID: <CAGxFJbSAA1t7GF6=2Sv+43syUQtjq1pY-DBppsqE+OE5Rnvp5Q@mail.gmail.com>

Don't know if this has come up before, but ...

> x <- c(0,0)
> length(x)
[1] 2
## but
> stopifnot(length(x))
Error: length(x) is not TRUE
Called from: top level
## but
> stopifnot(length(x) > 0)  ## not an error;  nor is
> stopifnot(as.logical(length(x)))
## Ouch!

Maybe the man page should say something about not assuming automatic
coercion to logical, which is the usual expectation. Or fix this.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Apr 13 11:15:54 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 13 Apr 2020 11:15:54 +0200
Subject: [R] A stopifnot() nastiness, even if not a bug
In-Reply-To: <CAGxFJbSAA1t7GF6=2Sv+43syUQtjq1pY-DBppsqE+OE5Rnvp5Q@mail.gmail.com>
References: <CAGxFJbSAA1t7GF6=2Sv+43syUQtjq1pY-DBppsqE+OE5Rnvp5Q@mail.gmail.com>
Message-ID: <24212.11722.632757.269523@stat.math.ethz.ch>

>>>>> Bert Gunter 
>>>>>     on Sun, 12 Apr 2020 16:30:09 -0700 writes:

    > Don't know if this has come up before, but ...
    >> x <- c(0,0)
    >> length(x)
    > [1] 2
    > ## but
    >> stopifnot(length(x))
    > Error: length(x) is not TRUE
    > Called from: top level
    > ## but
    >> stopifnot(length(x) > 0)  ## not an error;  nor is
    >> stopifnot(as.logical(length(x)))
    > ## Ouch!

    > Maybe the man page should say something about not assuming automatic
    > coercion to logical, which is the usual expectation. Or fix this.

    > Bert Gunter

Well, what about the top most paragraph of the help page is not clear here ?

> Description:

>      If any of the expressions (in '...' or 'exprs') are not 'all'
>      'TRUE', 'stop' is called, producing an error message indicating
>      the _first_ expression which was not ('all') true.

If useR's expectations alone would guide the behavior of a
computer language, the language would have to behave
"personalized" and give different results depending on the user,
which may be desirable in medicine or psychotherapy but not with R.

Martin


From pd@|gd @end|ng |rom gm@||@com  Mon Apr 13 12:00:38 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 13 Apr 2020 12:00:38 +0200
Subject: [R] A stopifnot() nastiness, even if not a bug
In-Reply-To: <24212.11722.632757.269523@stat.math.ethz.ch>
References: <CAGxFJbSAA1t7GF6=2Sv+43syUQtjq1pY-DBppsqE+OE5Rnvp5Q@mail.gmail.com>
 <24212.11722.632757.269523@stat.math.ethz.ch>
Message-ID: <AA9D2F47-252B-4D37-9F75-027818AE810E@gmail.com>

Inline...

> On 13 Apr 2020, at 11:15 , Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> 
>>>>>> Bert Gunter 
>>>>>>    on Sun, 12 Apr 2020 16:30:09 -0700 writes:
> 
>> Don't know if this has come up before, but ...
>>> x <- c(0,0)
>>> length(x)
>> [1] 2
>> ## but
>>> stopifnot(length(x))
>> Error: length(x) is not TRUE
>> Called from: top level
>> ## but
>>> stopifnot(length(x) > 0)  ## not an error;  nor is
>>> stopifnot(as.logical(length(x)))
>> ## Ouch!
> 
>> Maybe the man page should say something about not assuming automatic
>> coercion to logical, which is the usual expectation. Or fix this.
> 
>> Bert Gunter
> 
> Well, what about the top most paragraph of the help page is not clear here ?
> 
>> Description:
> 
>>     If any of the expressions (in '...' or 'exprs') are not 'all'
>>     'TRUE', 'stop' is called, producing an error message indicating
>>     the _first_ expression which was not ('all') true.
> 

This, however, is somewhat less clear:

..., exprs: any number of (typically but not necessarily ?logical?) R
          expressions, which should each evaluate to (a logical vector
          of all) ?TRUE?.  Use _either_ ?...? _or_ ?exprs?, the latter
   
What does it mean, "typically but not necessarily ?logical?"? The code actually tests explicitly with is.logical, as far as I can tell.

This creates a discrepancy between if(!...)stop(...) and stopifnot(), as in

> f <- function (x) if (!x) stop(paste(deparse(substitute(x)), "is not TRUE"))
> f(0)
Error in f(0) : 0 is not TRUE
> f(1)
> stopifnot(0)
Error: 0 is not TRUE
> stopifnot(1)
Error: 1 is not TRUE

-pd


> If useR's expectations alone would guide the behavior of a
> computer language, the language would have to behave
> "personalized" and give different results depending on the user,
> which may be desirable in medicine or psychotherapy but not with R.
> 
> Martin
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Apr 13 14:30:18 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 13 Apr 2020 14:30:18 +0200
Subject: [R] A stopifnot() nastiness, even if not a bug
In-Reply-To: <AA9D2F47-252B-4D37-9F75-027818AE810E@gmail.com>
References: <CAGxFJbSAA1t7GF6=2Sv+43syUQtjq1pY-DBppsqE+OE5Rnvp5Q@mail.gmail.com>
 <24212.11722.632757.269523@stat.math.ethz.ch>
 <AA9D2F47-252B-4D37-9F75-027818AE810E@gmail.com>
Message-ID: <24212.23386.542411.93591@stat.math.ethz.ch>

>>>>> peter dalgaard 
>>>>>     on Mon, 13 Apr 2020 12:00:38 +0200 writes:

    > Inline...
    >> On 13 Apr 2020, at 11:15 , Martin Maechler <maechler at stat.math.ethz.ch> wrote:
    >> 
    >>>>>>> Bert Gunter 
    >>>>>>> on Sun, 12 Apr 2020 16:30:09 -0700 writes:
    >> 
    >>> Don't know if this has come up before, but ...
    >>>> x <- c(0,0)
    >>>> length(x)
    >>> [1] 2
    >>> ## but
    >>>> stopifnot(length(x))
    >>> Error: length(x) is not TRUE
    >>> Called from: top level
    >>> ## but
    >>>> stopifnot(length(x) > 0)  ## not an error;  nor is
    >>>> stopifnot(as.logical(length(x)))
    >>> ## Ouch!
    >> 
    >>> Maybe the man page should say something about not assuming automatic
    >>> coercion to logical, which is the usual expectation. Or fix this.
    >> 
    >>> Bert Gunter
    >> 
    >> Well, what about the top most paragraph of the help page is not clear here ?
    >> 
    >>> Description:
    >> 
    >>> If any of the expressions (in '...' or 'exprs') are not 'all'
    >>> 'TRUE', 'stop' is called, producing an error message indicating
    >>> the _first_ expression which was not ('all') true.
    >> 

    > This, however, is somewhat less clear:

    > ..., exprs: any number of (typically but not necessarily ?logical?) R
    > expressions, which should each evaluate to (a logical vector
    > of all) ?TRUE?.  Use _either_ ?...? _or_ ?exprs?, the latter
   
    > What does it mean, "typically but not necessarily ?logical?"? 

That's a good question: The '(....)' must have been put there a while ago.
I agree that it's not at all helpful. Strictly, we are really
dealing with unevaluated expressions anyway ("promises"), but
definitely all of them must evaluate to logical (vector or
array..) of all TRUE values.  In the very beginning of
stopifnot(), I had thought that it should also work in other
cases, e.g.,  for    Matrix(TRUE, 4,5)  {from the Matrix package} etc,
but several use cases had convinced us / me that stopifnot
should be stricter...

    > The code actually tests explicitly with is.logical, as far as I can tell.

    > This creates a discrepancy between if(!...)stop(...) and stopifnot(), 

yes indeed, on purpose now, for a very long time ...

There's another discrepancy, more dangerous I think,
as shown in the following
{Note this discrepancy has been noted for a long time .. also on
 this R-devel list} :

  m <- matrix(1:12, 3,4)
  i <- (1:4) %% 2 == 1  & (0:3) %% 5 == 0

  stopifnot(dim(m[,i]) == c(3,1))       # seems fine
  
  if(dim(m[,i]) != c(3,1)) stop("wrong dim") # gives an error (but not ..)


Martin

    >> as in
    >> f <- function (x) if (!x) stop(paste(deparse(substitute(x)), "is not TRUE"))
    >> f(0)
    > Error in f(0) : 0 is not TRUE
    >> f(1)
    >> stopifnot(0)
    > Error: 0 is not TRUE
    >> stopifnot(1)
    > Error: 1 is not TRUE

    > -pd


    >> If useR's expectations alone would guide the behavior of a
    >> computer language, the language would have to behave
    >> "personalized" and give different results depending on the user,
    >> which may be desirable in medicine or psychotherapy but not with R.
    >> 
    >> Martin
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >> and provide commented, minimal, self-contained, reproducible code.

    > -- 
    > Peter Dalgaard, Professor,
    > Center for Statistics, Copenhagen Business School
    > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
    > Phone: (+45)38153501
    > Office: A 4.23
    > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From hp@ge@ @end|ng |rom |redhutch@org  Mon Apr 13 18:27:37 2020
From: hp@ge@ @end|ng |rom |redhutch@org (=?UTF-8?B?SGVydsOpIFBhZ8Oocw==?=)
Date: Mon, 13 Apr 2020 09:27:37 -0700
Subject: [R] A stopifnot() nastiness, even if not a bug
In-Reply-To: <24212.23386.542411.93591@stat.math.ethz.ch>
References: <CAGxFJbSAA1t7GF6=2Sv+43syUQtjq1pY-DBppsqE+OE5Rnvp5Q@mail.gmail.com>
 <24212.11722.632757.269523@stat.math.ethz.ch>
 <AA9D2F47-252B-4D37-9F75-027818AE810E@gmail.com>
 <24212.23386.542411.93591@stat.math.ethz.ch>
Message-ID: <93676b28-7b79-b70e-f2e4-1f1527fb80e6@fredhutch.org>



On 4/13/20 05:30, Martin Maechler wrote:
>>>>>> peter dalgaard
>>>>>>      on Mon, 13 Apr 2020 12:00:38 +0200 writes:
> 
>      > Inline...
>      >> On 13 Apr 2020, at 11:15 , Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>      >>
>      >>>>>>> Bert Gunter
>      >>>>>>> on Sun, 12 Apr 2020 16:30:09 -0700 writes:
>      >>
>      >>> Don't know if this has come up before, but ...
>      >>>> x <- c(0,0)
>      >>>> length(x)
>      >>> [1] 2
>      >>> ## but
>      >>>> stopifnot(length(x))
>      >>> Error: length(x) is not TRUE
>      >>> Called from: top level
>      >>> ## but
>      >>>> stopifnot(length(x) > 0)  ## not an error;  nor is
>      >>>> stopifnot(as.logical(length(x)))
>      >>> ## Ouch!
>      >>
>      >>> Maybe the man page should say something about not assuming automatic
>      >>> coercion to logical, which is the usual expectation. Or fix this.
>      >>
>      >>> Bert Gunter
>      >>
>      >> Well, what about the top most paragraph of the help page is not clear here ?
>      >>
>      >>> Description:
>      >>
>      >>> If any of the expressions (in '...' or 'exprs') are not 'all'
>      >>> 'TRUE', 'stop' is called, producing an error message indicating
>      >>> the _first_ expression which was not ('all') true.
>      >>
> 
>      > This, however, is somewhat less clear:
> 
>      > ..., exprs: any number of (typically but not necessarily ?logical?) R
>      > expressions, which should each evaluate to (a logical vector
>      > of all) ?TRUE?.  Use _either_ ?...? _or_ ?exprs?, the latter
>     
>      > What does it mean, "typically but not necessarily ?logical?"?
> 
> That's a good question: The '(....)' must have been put there a while ago.
> I agree that it's not at all helpful. Strictly, we are really
> dealing with unevaluated expressions anyway ("promises"), but
> definitely all of them must evaluate to logical (vector or
> array..) of all TRUE values.  In the very beginning of
> stopifnot(), I had thought that it should also work in other
> cases, e.g.,  for    Matrix(TRUE, 4,5)  {from the Matrix package} etc,
> but several use cases had convinced us / me that stopifnot
> should be stricter...
> 
>      > The code actually tests explicitly with is.logical, as far as I can tell.
> 
>      > This creates a discrepancy between if(!...)stop(...) and stopifnot(),
> 
> yes indeed, on purpose now, for a very long time ...
> 
> There's another discrepancy, more dangerous I think,
> as shown in the following
> {Note this discrepancy has been noted for a long time .. also on
>   this R-devel list} :
> 
>    m <- matrix(1:12, 3,4)
>    i <- (1:4) %% 2 == 1  & (0:3) %% 5 == 0
> 
>    stopifnot(dim(m[,i]) == c(3,1))       # seems fine
>    
>    if(dim(m[,i]) != c(3,1)) stop("wrong dim") # gives an error (but not ..)

mmh... that is not good. I was under the impression that we could at 
least expect 'stopifnot(x)' to be equivalent to 'if (!isTRUE(x)) 
stop(...)'. I'll have to revisit my use of stopifnot() in many many 
places... again :-/ Or may be just stop using it and use 'if 
(!isTRUE(...))' instead.

H.

> 
> 
> Martin
> 
>      >> as in
>      >> f <- function (x) if (!x) stop(paste(deparse(substitute(x)), "is not TRUE"))
>      >> f(0)
>      > Error in f(0) : 0 is not TRUE
>      >> f(1)
>      >> stopifnot(0)
>      > Error: 0 is not TRUE
>      >> stopifnot(1)
>      > Error: 1 is not TRUE
> 
>      > -pd
> 
> 
>      >> If useR's expectations alone would guide the behavior of a
>      >> computer language, the language would have to behave
>      >> "personalized" and give different results depending on the user,
>      >> which may be desirable in medicine or psychotherapy but not with R.
>      >>
>      >> Martin
>      >>
>      >> ______________________________________________
>      >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>      >> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=W8I5sRKBBKZgSjXrQC_PQw6XXUApw5h2DI5EUoDdl9w&e=
>      >> PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=ADWOmjdAMLWT3rJRMz411RnDjrc6Vyj4NNmZMoM3Sck&e=
>      >> and provide commented, minimal, self-contained, reproducible code.
> 
>      > --
>      > Peter Dalgaard, Professor,
>      > Center for Statistics, Copenhagen Business School
>      > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>      > Phone: (+45)38153501
>      > Office: A 4.23
>      > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=W8I5sRKBBKZgSjXrQC_PQw6XXUApw5h2DI5EUoDdl9w&e=
> PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=ADWOmjdAMLWT3rJRMz411RnDjrc6Vyj4NNmZMoM3Sck&e=
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fredhutch.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From wdun|@p @end|ng |rom t|bco@com  Mon Apr 13 18:57:11 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Mon, 13 Apr 2020 09:57:11 -0700
Subject: [R] A stopifnot() nastiness, even if not a bug
In-Reply-To: <93676b28-7b79-b70e-f2e4-1f1527fb80e6@fredhutch.org>
References: <CAGxFJbSAA1t7GF6=2Sv+43syUQtjq1pY-DBppsqE+OE5Rnvp5Q@mail.gmail.com>
 <24212.11722.632757.269523@stat.math.ethz.ch>
 <AA9D2F47-252B-4D37-9F75-027818AE810E@gmail.com>
 <24212.23386.542411.93591@stat.math.ethz.ch>
 <93676b28-7b79-b70e-f2e4-1f1527fb80e6@fredhutch.org>
Message-ID: <CAF8bMcZD12+L606rwH7+KRUCqzpEFTrnkbm09u+MWGxhSrh5FQ@mail.gmail.com>

You can avoid the problem in Martin's example by only giving scalars to
stopifnot().  E.g., using stopifnot(all(x>0)) or stopifnot(length(x)==1,
x>0) instead of stopifnot(x>0).  I think having stopifnot call
all(predicate) if length(predicate)!=1 was probably a mistake.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Mon, Apr 13, 2020 at 9:28 AM Herv? Pag?s <hpages at fredhutch.org> wrote:

>
>
> On 4/13/20 05:30, Martin Maechler wrote:
> >>>>>> peter dalgaard
> >>>>>>      on Mon, 13 Apr 2020 12:00:38 +0200 writes:
> >
> >      > Inline...
> >      >> On 13 Apr 2020, at 11:15 , Martin Maechler <
> maechler at stat.math.ethz.ch> wrote:
> >      >>
> >      >>>>>>> Bert Gunter
> >      >>>>>>> on Sun, 12 Apr 2020 16:30:09 -0700 writes:
> >      >>
> >      >>> Don't know if this has come up before, but ...
> >      >>>> x <- c(0,0)
> >      >>>> length(x)
> >      >>> [1] 2
> >      >>> ## but
> >      >>>> stopifnot(length(x))
> >      >>> Error: length(x) is not TRUE
> >      >>> Called from: top level
> >      >>> ## but
> >      >>>> stopifnot(length(x) > 0)  ## not an error;  nor is
> >      >>>> stopifnot(as.logical(length(x)))
> >      >>> ## Ouch!
> >      >>
> >      >>> Maybe the man page should say something about not assuming
> automatic
> >      >>> coercion to logical, which is the usual expectation. Or fix
> this.
> >      >>
> >      >>> Bert Gunter
> >      >>
> >      >> Well, what about the top most paragraph of the help page is not
> clear here ?
> >      >>
> >      >>> Description:
> >      >>
> >      >>> If any of the expressions (in '...' or 'exprs') are not 'all'
> >      >>> 'TRUE', 'stop' is called, producing an error message indicating
> >      >>> the _first_ expression which was not ('all') true.
> >      >>
> >
> >      > This, however, is somewhat less clear:
> >
> >      > ..., exprs: any number of (typically but not necessarily
> ?logical?) R
> >      > expressions, which should each evaluate to (a logical vector
> >      > of all) ?TRUE?.  Use _either_ ?...? _or_ ?exprs?, the latter
> >
> >      > What does it mean, "typically but not necessarily ?logical?"?
> >
> > That's a good question: The '(....)' must have been put there a while
> ago.
> > I agree that it's not at all helpful. Strictly, we are really
> > dealing with unevaluated expressions anyway ("promises"), but
> > definitely all of them must evaluate to logical (vector or
> > array..) of all TRUE values.  In the very beginning of
> > stopifnot(), I had thought that it should also work in other
> > cases, e.g.,  for    Matrix(TRUE, 4,5)  {from the Matrix package} etc,
> > but several use cases had convinced us / me that stopifnot
> > should be stricter...
> >
> >      > The code actually tests explicitly with is.logical, as far as I
> can tell.
> >
> >      > This creates a discrepancy between if(!...)stop(...) and
> stopifnot(),
> >
> > yes indeed, on purpose now, for a very long time ...
> >
> > There's another discrepancy, more dangerous I think,
> > as shown in the following
> > {Note this discrepancy has been noted for a long time .. also on
> >   this R-devel list} :
> >
> >    m <- matrix(1:12, 3,4)
> >    i <- (1:4) %% 2 == 1  & (0:3) %% 5 == 0
> >
> >    stopifnot(dim(m[,i]) == c(3,1))       # seems fine
> >
> >    if(dim(m[,i]) != c(3,1)) stop("wrong dim") # gives an error (but not
> ..)
>
> mmh... that is not good. I was under the impression that we could at
> least expect 'stopifnot(x)' to be equivalent to 'if (!isTRUE(x))
> stop(...)'. I'll have to revisit my use of stopifnot() in many many
> places... again :-/ Or may be just stop using it and use 'if
> (!isTRUE(...))' instead.
>
> H.
>
> >
> >
> > Martin
> >
> >      >> as in
> >      >> f <- function (x) if (!x) stop(paste(deparse(substitute(x)), "is
> not TRUE"))
> >      >> f(0)
> >      > Error in f(0) : 0 is not TRUE
> >      >> f(1)
> >      >> stopifnot(0)
> >      > Error: 0 is not TRUE
> >      >> stopifnot(1)
> >      > Error: 1 is not TRUE
> >
> >      > -pd
> >
> >
> >      >> If useR's expectations alone would guide the behavior of a
> >      >> computer language, the language would have to behave
> >      >> "personalized" and give different results depending on the user,
> >      >> which may be desirable in medicine or psychotherapy but not with
> R.
> >      >>
> >      >> Martin
> >      >>
> >      >> ______________________________________________
> >      >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> >      >>
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=W8I5sRKBBKZgSjXrQC_PQw6XXUApw5h2DI5EUoDdl9w&e=
> >      >> PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=ADWOmjdAMLWT3rJRMz411RnDjrc6Vyj4NNmZMoM3Sck&e=
> >      >> and provide commented, minimal, self-contained, reproducible
> code.
> >
> >      > --
> >      > Peter Dalgaard, Professor,
> >      > Center for Statistics, Copenhagen Business School
> >      > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >      > Phone: (+45)38153501
> >      > Office: A 4.23
> >      > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=W8I5sRKBBKZgSjXrQC_PQw6XXUApw5h2DI5EUoDdl9w&e=
> > PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=ADWOmjdAMLWT3rJRMz411RnDjrc6Vyj4NNmZMoM3Sck&e=
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Herv? Pag?s
>
> Program in Computational Biology
> Division of Public Health Sciences
> Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N, M1-B514
> P.O. Box 19024
> Seattle, WA 98109-1024
>
> E-mail: hpages at fredhutch.org
> Phone:  (206) 667-5791
> Fax:    (206) 667-1319
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From Iurii@Cher@i@ti@ m@iii@g oii t-systems@com  Mon Apr 13 20:50:16 2020
From: Iurii@Cher@i@ti@ m@iii@g oii t-systems@com (Iurii@Cher@i@ti@ m@iii@g oii t-systems@com)
Date: Mon, 13 Apr 2020 18:50:16 +0000
Subject: [R] Error with devTools
Message-ID: <24c858c1252a4c12bbfabfb51542c892@HE202260.emea2.cds.t-internal.com>

Hi everyone!
Could somebody help me, I`m trying to run devtools::test() from R-console and it doesn't` work, but it works via RStudio if I will remove devtools before.

 Error from console:


Loading space
Error in (function (command = NULL, args = character(), error_on_status = TRUE,  :
  System command 'Rcmd.exe' failed, exit status: 1, stdout + stderr:
E> * installing *source* package 'space' ...
E> ** using staged installation
E> ** libs
E> no DLL was created
E> ERROR: compilation failed for package 'space'
E> * removing 'C:/Users/user/AppData/Local/Temp/RtmpSESXUZ/devtools_install_3f9853f01a48/space'
Type .Last.error.trace to see where the error occured
>
>
>
> .Last.error.trace

Stack trace:

1. devtools::test()
2. devtools:::load_all(pkg$path, quiet = TRUE, export_all = export_all)
3. pkgload::load_all(path = path, reset = reset, recompile = recompile,  ...
4. pkgbuild::compile_dll(path, quiet = quiet)
5. withr::with_makevars(compiler_flags(TRUE), assignment = "+=",  ...
6. withr:::with_envvar(c(R_MAKEVARS_USER = makevars_file), { ...
7. base:::force(code)
8. base:::force(code)
9. pkgbuild:::install_min(path, dest = install_dir, components = "libs",  ...
10. pkgbuild:::rcmd_build_tools("INSTALL", c(path, paste("--library=",  ...
11. pkgbuild:::with_build_tools(callr::rcmd_safe(..., env = env,  ...
12. withr::with_path(rtools_path(), code)
13. base:::force(code)
14. callr::rcmd_safe(..., env = env, spinner = FALSE, show = FALSE,  ...
15. callr:::run_r(options)
16. base:::with(options, with_envvar(env, do.call(processx::run,  ...
17. base:::with.default(options, with_envvar(env, do.call(processx::run,  ...
18. base:::eval(substitute(expr), data, enclos = parent.frame())
19. base:::eval(substitute(expr), data, enclos = parent.frame())
20. callr:::with_envvar(env, do.call(processx::run, c(list(bin, args = real_cmd ...
21. base:::force(code)
22. base:::do.call(processx::run, c(list(bin, args = real_cmdargs,  ...
23. (function (command = NULL, args = character(), error_on_status = TRUE,  ...
24. throw(new_process_error(res, call = sys.call(), echo = echo,  ...

x System command 'Rcmd.exe' failed, exit status: 1, stdout + stderr:
E> * installing *source* package 'space' ...
E> ** using staged installation
E> ** libs
E> no DLL was created
E> ERROR: compilation failed for package 'space'
E> * removing 'C:/Users/user/AppData/Local/Temp/RtmpSESXUZ/devtools_install_3f9853f01a48/space'



Environment:

1)     Windows 10 X64

2)     R lib : 3.6.3

3)     R-Studio 1.2.5042


	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Apr 13 22:30:35 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 13 Apr 2020 22:30:35 +0200
Subject: [R] A stopifnot() nastiness, even if not a bug
In-Reply-To: <CAF8bMcZD12+L606rwH7+KRUCqzpEFTrnkbm09u+MWGxhSrh5FQ@mail.gmail.com>
References: <CAGxFJbSAA1t7GF6=2Sv+43syUQtjq1pY-DBppsqE+OE5Rnvp5Q@mail.gmail.com>
 <24212.11722.632757.269523@stat.math.ethz.ch>
 <AA9D2F47-252B-4D37-9F75-027818AE810E@gmail.com>
 <24212.23386.542411.93591@stat.math.ethz.ch>
 <93676b28-7b79-b70e-f2e4-1f1527fb80e6@fredhutch.org>
 <CAF8bMcZD12+L606rwH7+KRUCqzpEFTrnkbm09u+MWGxhSrh5FQ@mail.gmail.com>
Message-ID: <24212.52203.211594.608671@stat.math.ethz.ch>

>>>>> William Dunlap 
>>>>>     on Mon, 13 Apr 2020 09:57:11 -0700 writes:

    > You can avoid the problem in Martin's example by only giving scalars to
    > stopifnot().  E.g., using stopifnot(all(x>0)) or stopifnot(length(x)==1,
    x> 0) instead of stopifnot(x>0).  I think having stopifnot call
    > all(predicate) if length(predicate)!=1 was probably a mistake.

well, maybe.
As I brougth up the 0-length example:  One could think of making
an exception for  logical(0)  and treat that as non-TRUE.

(for R-devel only, but still probably not this close before
 releasing R 4.0.0)

Martin

    > Bill Dunlap
    > TIBCO Software
    > wdunlap tibco.com


    > On Mon, Apr 13, 2020 at 9:28 AM Herv? Pag?s <hpages at fredhutch.org> wrote:

    >> 
    >> 
    >> On 4/13/20 05:30, Martin Maechler wrote:
    >> >>>>>> peter dalgaard
    >> >>>>>>      on Mon, 13 Apr 2020 12:00:38 +0200 writes:
    >> >
    >> >      > Inline...
    >> >      >> On 13 Apr 2020, at 11:15 , Martin Maechler <
    >> maechler at stat.math.ethz.ch> wrote:
    >> >      >>
    >> >      >>>>>>> Bert Gunter
    >> >      >>>>>>> on Sun, 12 Apr 2020 16:30:09 -0700 writes:
    >> >      >>
    >> >      >>> Don't know if this has come up before, but ...
    >> >      >>>> x <- c(0,0)
    >> >      >>>> length(x)
    >> >      >>> [1] 2
    >> >      >>> ## but
    >> >      >>>> stopifnot(length(x))
    >> >      >>> Error: length(x) is not TRUE
    >> >      >>> Called from: top level
    >> >      >>> ## but
    >> >      >>>> stopifnot(length(x) > 0)  ## not an error;  nor is
    >> >      >>>> stopifnot(as.logical(length(x)))
    >> >      >>> ## Ouch!
    >> >      >>
    >> >      >>> Maybe the man page should say something about not assuming
    >> automatic
    >> >      >>> coercion to logical, which is the usual expectation. Or fix
    >> this.
    >> >      >>
    >> >      >>> Bert Gunter
    >> >      >>
    >> >      >> Well, what about the top most paragraph of the help page is not
    >> clear here ?
    >> >      >>
    >> >      >>> Description:
    >> >      >>
    >> >      >>> If any of the expressions (in '...' or 'exprs') are not 'all'
    >> >      >>> 'TRUE', 'stop' is called, producing an error message indicating
    >> >      >>> the _first_ expression which was not ('all') true.
    >> >      >>
    >> >
    >> >      > This, however, is somewhat less clear:
    >> >
    >> >      > ..., exprs: any number of (typically but not necessarily
    >> ?logical?) R
    >> >      > expressions, which should each evaluate to (a logical vector
    >> >      > of all) ?TRUE?.  Use _either_ ?...? _or_ ?exprs?, the latter
    >> >
    >> >      > What does it mean, "typically but not necessarily ?logical?"?
    >> >
    >> > That's a good question: The '(....)' must have been put there a while
    >> ago.
    >> > I agree that it's not at all helpful. Strictly, we are really
    >> > dealing with unevaluated expressions anyway ("promises"), but
    >> > definitely all of them must evaluate to logical (vector or
    >> > array..) of all TRUE values.  In the very beginning of
    >> > stopifnot(), I had thought that it should also work in other
    >> > cases, e.g.,  for    Matrix(TRUE, 4,5)  {from the Matrix package} etc,
    >> > but several use cases had convinced us / me that stopifnot
    >> > should be stricter...
    >> >
    >> >      > The code actually tests explicitly with is.logical, as far as I
    >> can tell.
    >> >
    >> >      > This creates a discrepancy between if(!...)stop(...) and
    >> stopifnot(),
    >> >
    >> > yes indeed, on purpose now, for a very long time ...
    >> >
    >> > There's another discrepancy, more dangerous I think,
    >> > as shown in the following
    >> > {Note this discrepancy has been noted for a long time .. also on
    >> >   this R-devel list} :
    >> >
    >> >    m <- matrix(1:12, 3,4)
    >> >    i <- (1:4) %% 2 == 1  & (0:3) %% 5 == 0
    >> >
    >> >    stopifnot(dim(m[,i]) == c(3,1))       # seems fine
    >> >
    >> >    if(dim(m[,i]) != c(3,1)) stop("wrong dim") # gives an error (but not
    >> ..)
    >> 
    >> mmh... that is not good. I was under the impression that we could at
    >> least expect 'stopifnot(x)' to be equivalent to 'if (!isTRUE(x))
    >> stop(...)'. I'll have to revisit my use of stopifnot() in many many
    >> places... again :-/ Or may be just stop using it and use 'if
    >> (!isTRUE(...))' instead.
    >> 
    >> H.
    >> 
    >> >
    >> >
    >> > Martin
    >> >
    >> >      >> as in
    >> >      >> f <- function (x) if (!x) stop(paste(deparse(substitute(x)), "is
    >> not TRUE"))
    >> >      >> f(0)
    >> >      > Error in f(0) : 0 is not TRUE
    >> >      >> f(1)
    >> >      >> stopifnot(0)
    >> >      > Error: 0 is not TRUE
    >> >      >> stopifnot(1)
    >> >      > Error: 1 is not TRUE
    >> >
    >> >      > -pd
    >> >
    >> >
    >> >      >> If useR's expectations alone would guide the behavior of a
    >> >      >> computer language, the language would have to behave
    >> >      >> "personalized" and give different results depending on the user,
    >> >      >> which may be desirable in medicine or psychotherapy but not with
    >> R.
    >> >      >>
    >> >      >> Martin
    >> >      >>
    >> >      >> ______________________________________________
    >> >      >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
    >> see
    >> >      >>
    >> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=W8I5sRKBBKZgSjXrQC_PQw6XXUApw5h2DI5EUoDdl9w&e=
    >> >      >> PLEASE do read the posting guide
    >> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=ADWOmjdAMLWT3rJRMz411RnDjrc6Vyj4NNmZMoM3Sck&e=
    >> >      >> and provide commented, minimal, self-contained, reproducible
    >> code.
    >> >
    >> >      > --
    >> >      > Peter Dalgaard, Professor,
    >> >      > Center for Statistics, Copenhagen Business School
    >> >      > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
    >> >      > Phone: (+45)38153501
    >> >      > Office: A 4.23
    >> >      > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
    >> >
    >> > ______________________________________________
    >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> >
    >> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=W8I5sRKBBKZgSjXrQC_PQw6XXUApw5h2DI5EUoDdl9w&e=
    >> > PLEASE do read the posting guide
    >> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=2kAPk_-c9XEQGS0BB1rf03oPxqQtflyqhqi-0BT8bWE&s=ADWOmjdAMLWT3rJRMz411RnDjrc6Vyj4NNmZMoM3Sck&e=
    >> > and provide commented, minimal, self-contained, reproducible code.
    >> >
    >> 
    >> --
    >> Herv? Pag?s
    >> 
    >> Program in Computational Biology
    >> Division of Public Health Sciences
    >> Fred Hutchinson Cancer Research Center
    >> 1100 Fairview Ave. N, M1-B514
    >> P.O. Box 19024
    >> Seattle, WA 98109-1024
    >> 
    >> E-mail: hpages at fredhutch.org
    >> Phone:  (206) 667-5791
    >> Fax:    (206) 667-1319
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide
    >> http://www.R-project.org/posting-guide.html
    >> and provide commented, minimal, self-contained, reproducible code.
    >>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr 13 22:32:30 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 13 Apr 2020 16:32:30 -0400
Subject: [R] Error with devTools
In-Reply-To: <24c858c1252a4c12bbfabfb51542c892@HE202260.emea2.cds.t-internal.com>
References: <24c858c1252a4c12bbfabfb51542c892@HE202260.emea2.cds.t-internal.com>
Message-ID: <5969c0c8-0df7-8440-c3b0-00fd7fcc7803@gmail.com>

On 13/04/2020 2:50 p.m., Iurii.Cherniatin at t-systems.com wrote:
> Hi everyone!
> Could somebody help me, I`m trying to run devtools::test() from R-console and it doesn't` work, but it works via RStudio if I will remove devtools before.

I'd guess you don't have the PATH set properly so compilers etc can't be 
found, but devtools::test hides the information that would confirm that, 
because it compiles with quiet = TRUE hard coded.

Duncan Murdoch

> 
>   Error from console:
> 
> 
> Loading space
> Error in (function (command = NULL, args = character(), error_on_status = TRUE,  :
>    System command 'Rcmd.exe' failed, exit status: 1, stdout + stderr:
> E> * installing *source* package 'space' ...
> E> ** using staged installation
> E> ** libs
> E> no DLL was created
> E> ERROR: compilation failed for package 'space'
> E> * removing 'C:/Users/user/AppData/Local/Temp/RtmpSESXUZ/devtools_install_3f9853f01a48/space'
> Type .Last.error.trace to see where the error occured
>>
>>
>>
>> .Last.error.trace
> 
> Stack trace:
> 
> 1. devtools::test()
> 2. devtools:::load_all(pkg$path, quiet = TRUE, export_all = export_all)
> 3. pkgload::load_all(path = path, reset = reset, recompile = recompile,  ...
> 4. pkgbuild::compile_dll(path, quiet = quiet)
> 5. withr::with_makevars(compiler_flags(TRUE), assignment = "+=",  ...
> 6. withr:::with_envvar(c(R_MAKEVARS_USER = makevars_file), { ...
> 7. base:::force(code)
> 8. base:::force(code)
> 9. pkgbuild:::install_min(path, dest = install_dir, components = "libs",  ...
> 10. pkgbuild:::rcmd_build_tools("INSTALL", c(path, paste("--library=",  ...
> 11. pkgbuild:::with_build_tools(callr::rcmd_safe(..., env = env,  ...
> 12. withr::with_path(rtools_path(), code)
> 13. base:::force(code)
> 14. callr::rcmd_safe(..., env = env, spinner = FALSE, show = FALSE,  ...
> 15. callr:::run_r(options)
> 16. base:::with(options, with_envvar(env, do.call(processx::run,  ...
> 17. base:::with.default(options, with_envvar(env, do.call(processx::run,  ...
> 18. base:::eval(substitute(expr), data, enclos = parent.frame())
> 19. base:::eval(substitute(expr), data, enclos = parent.frame())
> 20. callr:::with_envvar(env, do.call(processx::run, c(list(bin, args = real_cmd ...
> 21. base:::force(code)
> 22. base:::do.call(processx::run, c(list(bin, args = real_cmdargs,  ...
> 23. (function (command = NULL, args = character(), error_on_status = TRUE,  ...
> 24. throw(new_process_error(res, call = sys.call(), echo = echo,  ...
> 
> x System command 'Rcmd.exe' failed, exit status: 1, stdout + stderr:
> E> * installing *source* package 'space' ...
> E> ** using staged installation
> E> ** libs
> E> no DLL was created
> E> ERROR: compilation failed for package 'space'
> E> * removing 'C:/Users/user/AppData/Local/Temp/RtmpSESXUZ/devtools_install_3f9853f01a48/space'
> 
> 
> 
> Environment:
> 
> 1)     Windows 10 X64
> 
> 2)     R lib : 3.6.3
> 
> 3)     R-Studio 1.2.5042
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


