From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Feb  1 07:00:55 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 31 Jan 2021 22:00:55 -0800
Subject: [R] dependent nested for loops in R
In-Reply-To: <4937A207-12C7-4877-85D9-1F6DCDDC50B8@health.ucsd.edu>
References: <CAGR+MS5S=KTu13mn=ze_jMS2dhA790Q07CkRL8WYtEc6ZUXeKQ@mail.gmail.com>
 <faee43e7-8503-e0cc-dba1-adcf008cf1a2@comcast.net>
 <CAGR+MS7bo1+PpYhk+bG2qtmO5nYx4A8c0jtmVoDhdBREA+u3rQ@mail.gmail.com>
 <4937A207-12C7-4877-85D9-1F6DCDDC50B8@health.ucsd.edu>
Message-ID: <c58e930a-fdd0-fb96-3b73-e9341801a2a7@comcast.net>


On 1/31/21 1:26 PM, Berry, Charles wrote:
>
>> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
>>
>> Hi
>> I have made the sample code again. Could you please guide how to use
>> vectorization for variables whose next value depends on the previous one?
>>

I agree with Charles that I suspect your results are not what you 
expect. You should try using cat or print to output intermediate results 
to the console. I would suggest you limit your examination to a more 
manageable length, say the first 10 results while you are working out 
your logic. After you have the logic debugged, you can move on to long 
sequences.


This is my suggestion for a more compact solution (at least for the 
inner loop calculation):

set.seed(123)

x <- rnorm(2000)

z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)

w<- numeric(2000)

w <-? (1:2000)[ z >4 | z < 1 ]? # In your version the w values get 
overwritten and end up all being 2000


I would also advise making a natural language statement of the problem 
and goals. I'm thinking that you may be missing certain aspects of the 
underying problem.

-- 

David.

>
> Glad to help.
>
> First, it could help you to trace your code.  I suspect that the results are not at all what you want and tracing would help you see that.
>
> I suggest running this revision and printing out x, z, and w.
>
> #+begin_src R
>    w = NULL
>    for(j in 1:2)
>    {
>      z = NULL
>      x = rnorm(10)
>      z[1] = x[1]
>      for(i in 2:10)
>      {
>        z[i] = x[i]+5*z[i-1]
>        if(z[i]>4 | z[i]<1) {
> 	w[j]=i
>        } else {
> 	w[j] = 0
>        }
>      }
>    }
> #+end_src
>
>
> You should be able to see that the value of w can easily be obtained outside of the `i' loop.
>


From |@@u|o @end|ng |rom |@t@t@|t  Mon Feb  1 11:46:35 2021
From: |@@u|o @end|ng |rom |@t@t@|t (Andrea Fasulo)
Date: Mon, 1 Feb 2021 11:46:35 +0100 (CET)
Subject: [R] [R-pkgs] R2BEAT 1.0.2
Message-ID: <2040941607.16696839.1612176395579.JavaMail.zimbra@istat.it>

Dear R users:

R2BEAT 1.0.2 is now available on CRAN 
[ https://cran.r-project.org/web/packages/R2BEAT/index.html | https://cran.r-project.org/web/packages/R2BEAT/index.html ] 
This package covers the two-stage stratified sample design,
offering functions for determining the optimal allocation of both Primary and Secondary stage units,
and for the selection of PSUs with pps, in such a way that the  final sample of SSU is almost self-weighting.

Full documentation and vignettes on: [ https://barcaroli.github.io/R2BEAT/ | https://barcaroli.github.io/R2BEAT/ ] Hope this can be useful,
Regards

Andrea Fasulo 

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From nz@h@@m @end|ng |rom gm@||@com  Mon Feb  1 13:03:55 2021
From: nz@h@@m @end|ng |rom gm@||@com (Shaami)
Date: Mon, 1 Feb 2021 17:03:55 +0500
Subject: [R] dependent nested for loops in R
In-Reply-To: <c58e930a-fdd0-fb96-3b73-e9341801a2a7@comcast.net>
References: <CAGR+MS5S=KTu13mn=ze_jMS2dhA790Q07CkRL8WYtEc6ZUXeKQ@mail.gmail.com>
 <faee43e7-8503-e0cc-dba1-adcf008cf1a2@comcast.net>
 <CAGR+MS7bo1+PpYhk+bG2qtmO5nYx4A8c0jtmVoDhdBREA+u3rQ@mail.gmail.com>
 <4937A207-12C7-4877-85D9-1F6DCDDC50B8@health.ucsd.edu>
 <c58e930a-fdd0-fb96-3b73-e9341801a2a7@comcast.net>
Message-ID: <CAGR+MS6aTWhCCgVOGSEnpkx_n69Ga0f2WbcnhQqTxqHzXhr9Eg@mail.gmail.com>

Hi David and Charles

Your suggestions helped me a lot. Could you please suggest how I could
vectorize the following for loop?
z = NULL
p = 0.25
x = rnorm(100)
z[1] = p*x[1] + (1-p)*5
for(i in 2:100)
{
  z[i] = p*x[i]+(1-p)*z[i-1]
}
 Thank you

Regards

On Mon, Feb 1, 2021 at 11:01 AM David Winsemius <dwinsemius at comcast.net>
wrote:

>
> On 1/31/21 1:26 PM, Berry, Charles wrote:
> >
> >> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
> >>
> >> Hi
> >> I have made the sample code again. Could you please guide how to use
> >> vectorization for variables whose next value depends on the previous
> one?
> >>
>
> I agree with Charles that I suspect your results are not what you
> expect. You should try using cat or print to output intermediate results
> to the console. I would suggest you limit your examination to a more
> manageable length, say the first 10 results while you are working out
> your logic. After you have the logic debugged, you can move on to long
> sequences.
>
>
> This is my suggestion for a more compact solution (at least for the
> inner loop calculation):
>
> set.seed(123)
>
> x <- rnorm(2000)
>
> z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)
>
> w<- numeric(2000)
>
> w <-  (1:2000)[ z >4 | z < 1 ]  # In your version the w values get
> overwritten and end up all being 2000
>
>
> I would also advise making a natural language statement of the problem
> and goals. I'm thinking that you may be missing certain aspects of the
> underying problem.
>
> --
>
> David.
>
> >
> > Glad to help.
> >
> > First, it could help you to trace your code.  I suspect that the results
> are not at all what you want and tracing would help you see that.
> >
> > I suggest running this revision and printing out x, z, and w.
> >
> > #+begin_src R
> >    w = NULL
> >    for(j in 1:2)
> >    {
> >      z = NULL
> >      x = rnorm(10)
> >      z[1] = x[1]
> >      for(i in 2:10)
> >      {
> >        z[i] = x[i]+5*z[i-1]
> >        if(z[i]>4 | z[i]<1) {
> >       w[j]=i
> >        } else {
> >       w[j] = 0
> >        }
> >      }
> >    }
> > #+end_src
> >
> >
> > You should be able to see that the value of w can easily be obtained
> outside of the `i' loop.
> >
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb  1 14:26:36 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 1 Feb 2021 08:26:36 -0500
Subject: [R] dependent nested for loops in R
In-Reply-To: <CAGR+MS6aTWhCCgVOGSEnpkx_n69Ga0f2WbcnhQqTxqHzXhr9Eg@mail.gmail.com>
References: <CAGR+MS5S=KTu13mn=ze_jMS2dhA790Q07CkRL8WYtEc6ZUXeKQ@mail.gmail.com>
 <faee43e7-8503-e0cc-dba1-adcf008cf1a2@comcast.net>
 <CAGR+MS7bo1+PpYhk+bG2qtmO5nYx4A8c0jtmVoDhdBREA+u3rQ@mail.gmail.com>
 <4937A207-12C7-4877-85D9-1F6DCDDC50B8@health.ucsd.edu>
 <c58e930a-fdd0-fb96-3b73-e9341801a2a7@comcast.net>
 <CAGR+MS6aTWhCCgVOGSEnpkx_n69Ga0f2WbcnhQqTxqHzXhr9Eg@mail.gmail.com>
Message-ID: <3acd79cd-b144-b50f-65ce-1e90415e3d37@gmail.com>

On 01/02/2021 7:03 a.m., Shaami wrote:
> z = NULL
> p = 0.25
> x = rnorm(100)
> z[1] = p*x[1] + (1-p)*5
> for(i in 2:100)
> {
>    z[i] = p*x[i]+(1-p)*z[i-1]
> }

That's the same as

p <- 0.25
x <- rnorm(100)
z <- stats::filter(p*x, 1-p, init = 5, method="recursive")

This leaves z as a time series; if that causes trouble, follow it with

z <- as.numeric(z)

Duncan Murdoch


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Feb  1 22:48:03 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 1 Feb 2021 22:48:03 +0100
Subject: [R] arima/fixed
In-Reply-To: <24597.16682.487740.434293@stat.math.ethz.ch>
References: <DBBPR03MB705015D3199567874B4564158EB99@DBBPR03MB7050.eurprd03.prod.outlook.com>
 <20210130161132.47004808@rolf-Latitude-E7470>
 <24597.16682.487740.434293@stat.math.ethz.ch>
Message-ID: <24600.30483.78822.545846@stat.math.ethz.ch>

>>>>> Martin Maechler 
>>>>>     on Sat, 30 Jan 2021 12:21:14 +0100 writes:

>>>>> Rolf Turner 
>>>>>     on Sat, 30 Jan 2021 16:11:32 +1300 writes:

    >> On Fri, 29 Jan 2021 12:47:25 +0000 Nasia Petsa
    >> <petsa.athanasia at hotmail.gr> wrote:

    >>> Dear all,
    >>> 
    >>> I have the following problem with determining the
    >>> argument fixed in arima function. What is the length of
    >>> argument fixed for an ARIMA(1,0,0)(0,1,1) and what is
    >>> the correct order for the parameters

    >> Hmm.  The help is indeed pretty opaque, isn't it?

    > Can you propose improvements?

    > Here(*) is the source code of the help page

    >   http://svn.r-project.org/R/trunk/src/library/stats/man/arima.Rd

    > We (and future R users) would be glad for less opaque (and
    > still concise) wording, notably in simple enough English
    > for the 90% non-natively English speaking R users ..

    > Thank you in advance!  Martin

In the mean time, Rolf sent me a nicely enhanced arima.Rd
which is now part of R  (R-devel at least):

------------------------------------------------------------------------
r79918 | maechler | 2021-02-01 15:07:32 +0100 (Mon, 01 Feb 2021) | 1 line
Changed paths:
   M src/library/stats/man/arima.Rd
   M tests/Examples/stats-Ex.Rout.save

extended for `fixed` arg, plus ex., thanks to Rolf Turner
------------------------------------------------------------------------

(Unfortunately, I added 1 stray character when slightly editing
 Rolf's version.)

Such _careful_ contributions are welcome, thank you again!

---
Martin


From @|obo@|eu @end|ng |rom gm@||@com  Mon Feb  1 16:45:21 2021
From: @|obo@|eu @end|ng |rom gm@||@com (Agustin Lobo)
Date: Mon, 1 Feb 2021 16:45:21 +0100
Subject: [R] Distance used in lda()
Message-ID: <CALPC6DMockUrsUY1xO=RAttx6CZc3zhEAzAz2LfYsEoExdTTaw@mail.gmail.com>

Whenever using lda(...,CV=TRUE), or if using lda.predict(), a
classification is returned.
Which distance is used in order to allocate a given individual to a
class, once the original data have been transformed into discriminant
components?

Thanks

Agustin Lobo
aloboaleu at gmail.com


From nz@h@@m @end|ng |rom gm@||@com  Mon Feb  1 17:54:28 2021
From: nz@h@@m @end|ng |rom gm@||@com (Shaami)
Date: Mon, 1 Feb 2021 21:54:28 +0500
Subject: [R] dependent nested for loops in R
In-Reply-To: <3acd79cd-b144-b50f-65ce-1e90415e3d37@gmail.com>
References: <CAGR+MS5S=KTu13mn=ze_jMS2dhA790Q07CkRL8WYtEc6ZUXeKQ@mail.gmail.com>
 <faee43e7-8503-e0cc-dba1-adcf008cf1a2@comcast.net>
 <CAGR+MS7bo1+PpYhk+bG2qtmO5nYx4A8c0jtmVoDhdBREA+u3rQ@mail.gmail.com>
 <4937A207-12C7-4877-85D9-1F6DCDDC50B8@health.ucsd.edu>
 <c58e930a-fdd0-fb96-3b73-e9341801a2a7@comcast.net>
 <CAGR+MS6aTWhCCgVOGSEnpkx_n69Ga0f2WbcnhQqTxqHzXhr9Eg@mail.gmail.com>
 <3acd79cd-b144-b50f-65ce-1e90415e3d37@gmail.com>
Message-ID: <CAGR+MS4RmAY2hh0+hMrXQHUUYCGepaOG1tj9wfVyjFX8A=4=wA@mail.gmail.com>

Hi Duncan

It worked. Thank you.

Best Regards

On Mon, Feb 1, 2021 at 6:26 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 01/02/2021 7:03 a.m., Shaami wrote:
> > z = NULL
> > p = 0.25
> > x = rnorm(100)
> > z[1] = p*x[1] + (1-p)*5
> > for(i in 2:100)
> > {
> >    z[i] = p*x[i]+(1-p)*z[i-1]
> > }
>
> That's the same as
>
> p <- 0.25
> x <- rnorm(100)
> z <- stats::filter(p*x, 1-p, init = 5, method="recursive")
>
> This leaves z as a time series; if that causes trouble, follow it with
>
> z <- as.numeric(z)
>
> Duncan Murdoch
>
>
>

	[[alternative HTML version deleted]]


From ho@@@|nmm @end|ng |rom jun|v@edu  Tue Feb  2 00:31:50 2021
From: ho@@@|nmm @end|ng |rom jun|v@edu (Md. Moyazzem Hossain)
Date: Mon, 1 Feb 2021 23:31:50 +0000
Subject: [R] Regarding fitted value
In-Reply-To: <03978895-a544-c325-ed23-97315e7fc4e1@sapo.pt>
References: <CAO29qn7eZZjsBUtF1y+oZzhkiWi51+Yp46uEVUSAJZedOqtwQA@mail.gmail.com>
 <03978895-a544-c325-ed23-97315e7fc4e1@sapo.pt>
Message-ID: <CAO29qn5jfkoutyads9b1a=f3_UdfQcvpO-OXqcaEY2sWzcwRyQ@mail.gmail.com>

Dear Rui Barradas

Thank you very much for your reply.

However, still now, I have a confusion whether I get the fitted value for
the year 2000, 2001, ..., 2020 or 2001, 2002, ..., 2021.

Need any more help.

Thanks in advance.

Md

On Thu, Jan 28, 2021 at 4:47 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
>  From help('forecast::fitted.Arima'):
>
> h       The number of steps to forecast ahead.
>
>
> So you have the default h = 1 step ahead forecast for your model.
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 12:13 de 28/01/21, Md. Moyazzem Hossain escreveu:
> >   Dear R-experts,
> >
> > I hope that all of you are doing well. I got the filled value from the
> > ARIMA model.
> >
> > I use the following working code. But I am not clear whether I got the
> > fitted value for each *corresponding time* of the original data point
> like
> > 2000, 2001, 2020 or get a *one-step-ahead* fitted value. Please suggest
> me
> > any reference for further reading to my understanding.
> >
> > ########################
> >
> y<-c(120,340,250,430,125,324,763,458,763,905,765,456,234,345,654,654,567,876,907,456)
> > library(forecast)
> > library(tseries)
> > yy=ts(y, start=c(2000,1))
> >
> > model1=Arima(yy,order=c(0,2,1), lambda = NULL,method='ML')
> > model1
> >
> > f <- fitted( model1)
> > plot(yy)
> > plot(f)
> >
> > Thanks in advance.
> >
>


-- 
Best Regards,
Md. Moyazzem Hossain
Associate Professor
Department of Statistics
Jahangirnagar University
Savar, Dhaka-1342
Bangladesh
Website: http://www.juniv.edu/teachers/hossainmm
Research: *Google Scholar
<https://scholar.google.com/citations?user=-U03XCgAAAAJ&hl=en&oi=ao>*;
*ResearchGate
<https://www.researchgate.net/profile/Md_Hossain107>*; *ORCID iD
<https://orcid.org/0000-0003-3593-6936>*

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Feb  2 06:16:01 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 1 Feb 2021 21:16:01 -0800
Subject: [R] dependent nested for loops in R
In-Reply-To: <CAGR+MS5KVUrbrwgtuUjAGzHj_Gg6cX8dsx-94TJu5ium8JSzHw@mail.gmail.com>
References: <CAGR+MS5KVUrbrwgtuUjAGzHj_Gg6cX8dsx-94TJu5ium8JSzHw@mail.gmail.com>
Message-ID: <2ED6DCE6-FC1A-43D8-B760-797293586625@comcast.net>

Cc?ed the list as should always be your practice. 

Here?s one way (untested):

W <- +(z>4| z<2) # assume z is of length 20

? 
David

Sent from my iPhone

> On Feb 1, 2021, at 7:08 PM, Shaami <nzshaam at gmail.com> wrote:
> 
> ?
> Hi Prof. David
> 
> In the following state
> 
> W = (1:2000)[z >4|z<2)
> 
> Could you please guide how  I can assign zero if condition is not satisfied?
> 
> Best Regards 
> 
> Shaami
> 
>> On Mon, 1 Feb 2021, 11:01 am David Winsemius, <dwinsemius at comcast.net> wrote:
>> 
>> On 1/31/21 1:26 PM, Berry, Charles wrote:
>> >
>> >> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
>> >>
>> >> Hi
>> >> I have made the sample code again. Could you please guide how to use
>> >> vectorization for variables whose next value depends on the previous one?
>> >>
>> 
>> I agree with Charles that I suspect your results are not what you 
>> expect. You should try using cat or print to output intermediate results 
>> to the console. I would suggest you limit your examination to a more 
>> manageable length, say the first 10 results while you are working out 
>> your logic. After you have the logic debugged, you can move on to long 
>> sequences.
>> 
>> 
>> This is my suggestion for a more compact solution (at least for the 
>> inner loop calculation):
>> 
>> set.seed(123)
>> 
>> x <- rnorm(2000)
>> 
>> z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)
>> 
>> w<- numeric(2000)
>> 
>> w <-  (1:2000)[ z >4 | z < 1 ]  # In your version the w values get 
>> overwritten and end up all being 2000
>> 
>> 
>> I would also advise making a natural language statement of the problem 
>> and goals. I'm thinking that you may be missing certain aspects of the 
>> underying problem.
>> 
>> -- 
>> 
>> David.
>> 
>> >
>> > Glad to help.
>> >
>> > First, it could help you to trace your code.  I suspect that the results are not at all what you want and tracing would help you see that.
>> >
>> > I suggest running this revision and printing out x, z, and w.
>> >
>> > #+begin_src R
>> >    w = NULL
>> >    for(j in 1:2)
>> >    {
>> >      z = NULL
>> >      x = rnorm(10)
>> >      z[1] = x[1]
>> >      for(i in 2:10)
>> >      {
>> >        z[i] = x[i]+5*z[i-1]
>> >        if(z[i]>4 | z[i]<1) {
>> >       w[j]=i
>> >        } else {
>> >       w[j] = 0
>> >        }
>> >      }
>> >    }
>> > #+end_src
>> >
>> >
>> > You should be able to see that the value of w can easily be obtained outside of the `i' loop.
>> >

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Feb  2 06:19:29 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 1 Feb 2021 21:19:29 -0800
Subject: [R] dependent nested for loops in R
In-Reply-To: <2ED6DCE6-FC1A-43D8-B760-797293586625@comcast.net>
References: <2ED6DCE6-FC1A-43D8-B760-797293586625@comcast.net>
Message-ID: <37A95B0C-068A-4FEB-8198-7C0994B4038A@comcast.net>

IMTS length 2000

Sent from my iPhone

> On Feb 1, 2021, at 9:16 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> ?Cc?ed the list as should always be your practice. 
> 
> Here?s one way (untested):
> 
> W <- +(z>4| z<2) # assume z is of length 20
> 
> ? 
> David
> 
> Sent from my iPhone
> 
>>> On Feb 1, 2021, at 7:08 PM, Shaami <nzshaam at gmail.com> wrote:
>>> 
>> ?
>> Hi Prof. David
>> 
>> In the following state
>> 
>> W = (1:2000)[z >4|z<2)
>> 
>> Could you please guide how  I can assign zero if condition is not satisfied?
>> 
>> Best Regards 
>> 
>> Shaami
>> 
>>> On Mon, 1 Feb 2021, 11:01 am David Winsemius, <dwinsemius at comcast.net> wrote:
>>> 
>>> On 1/31/21 1:26 PM, Berry, Charles wrote:
>>> >
>>> >> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
>>> >>
>>> >> Hi
>>> >> I have made the sample code again. Could you please guide how to use
>>> >> vectorization for variables whose next value depends on the previous one?
>>> >>
>>> 
>>> I agree with Charles that I suspect your results are not what you 
>>> expect. You should try using cat or print to output intermediate results 
>>> to the console. I would suggest you limit your examination to a more 
>>> manageable length, say the first 10 results while you are working out 
>>> your logic. After you have the logic debugged, you can move on to long 
>>> sequences.
>>> 
>>> 
>>> This is my suggestion for a more compact solution (at least for the 
>>> inner loop calculation):
>>> 
>>> set.seed(123)
>>> 
>>> x <- rnorm(2000)
>>> 
>>> z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)
>>> 
>>> w<- numeric(2000)
>>> 
>>> w <-  (1:2000)[ z >4 | z < 1 ]  # In your version the w values get 
>>> overwritten and end up all being 2000
>>> 
>>> 
>>> I would also advise making a natural language statement of the problem 
>>> and goals. I'm thinking that you may be missing certain aspects of the 
>>> underying problem.
>>> 
>>> -- 
>>> 
>>> David.
>>> 
>>> >
>>> > Glad to help.
>>> >
>>> > First, it could help you to trace your code.  I suspect that the results are not at all what you want and tracing would help you see that.
>>> >
>>> > I suggest running this revision and printing out x, z, and w.
>>> >
>>> > #+begin_src R
>>> >    w = NULL
>>> >    for(j in 1:2)
>>> >    {
>>> >      z = NULL
>>> >      x = rnorm(10)
>>> >      z[1] = x[1]
>>> >      for(i in 2:10)
>>> >      {
>>> >        z[i] = x[i]+5*z[i-1]
>>> >        if(z[i]>4 | z[i]<1) {
>>> >       w[j]=i
>>> >        } else {
>>> >       w[j] = 0
>>> >        }
>>> >      }
>>> >    }
>>> > #+end_src
>>> >
>>> >
>>> > You should be able to see that the value of w can easily be obtained outside of the `i' loop.
>>> >

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Feb  2 06:41:34 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 1 Feb 2021 21:41:34 -0800
Subject: [R] dependent nested for loops in R
In-Reply-To: <CAGR+MS6nsme783vi5x1+UU2K_YvKsx8vP-QUtgeSe7WbPn+M4Q@mail.gmail.com>
References: <CAGR+MS6nsme783vi5x1+UU2K_YvKsx8vP-QUtgeSe7WbPn+M4Q@mail.gmail.com>
Message-ID: <808E702B-B7AC-4405-BE0D-787041F51997@comcast.net>

Just drop the ?+? if you want logical. 

Sent from my iPhone

> On Feb 1, 2021, at 9:36 PM, Shaami <nzshaam at gmail.com> wrote:
> 
> ?
> Hi Prof. David
> 
> Thank you. I will always follow your advice. The suggested code worked. It gives either 1 or 0 depending on the condition to be true. I want index of z for which the condition is true (instead of 1) else zero. Could you please suggest? 
> 
> Thank you
> 
> Shaami
> 
>> On Tue, Feb 2, 2021 at 10:16 AM David Winsemius <dwinsemius at comcast.net> wrote:
>> Cc?ed the list as should always be your practice. 
>> 
>> Here?s one way (untested):
>> 
>> W <- +(z>4| z<2) # assume z is of length 20
>> 
>> ? 
>> David
>> 
>> Sent from my iPhone
>> 
>>>> On Feb 1, 2021, at 7:08 PM, Shaami <nzshaam at gmail.com> wrote:
>>>> 
>>> ?
>>> Hi Prof. David
>>> 
>>> In the following state
>>> 
>>> W = (1:2000)[z >4|z<2)
>>> 
>>> Could you please guide how  I can assign zero if condition is not satisfied?
>>> 
>>> Best Regards 
>>> 
>>> Shaami
>>> 
>>>> On Mon, 1 Feb 2021, 11:01 am David Winsemius, <dwinsemius at comcast.net> wrote:
>>>> 
>>>> On 1/31/21 1:26 PM, Berry, Charles wrote:
>>>> >
>>>> >> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
>>>> >>
>>>> >> Hi
>>>> >> I have made the sample code again. Could you please guide how to use
>>>> >> vectorization for variables whose next value depends on the previous one?
>>>> >>
>>>> 
>>>> I agree with Charles that I suspect your results are not what you 
>>>> expect. You should try using cat or print to output intermediate results 
>>>> to the console. I would suggest you limit your examination to a more 
>>>> manageable length, say the first 10 results while you are working out 
>>>> your logic. After you have the logic debugged, you can move on to long 
>>>> sequences.
>>>> 
>>>> 
>>>> This is my suggestion for a more compact solution (at least for the 
>>>> inner loop calculation):
>>>> 
>>>> set.seed(123)
>>>> 
>>>> x <- rnorm(2000)
>>>> 
>>>> z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)
>>>> 
>>>> w<- numeric(2000)
>>>> 
>>>> w <-  (1:2000)[ z >4 | z < 1 ]  # In your version the w values get 
>>>> overwritten and end up all being 2000
>>>> 
>>>> 
>>>> I would also advise making a natural language statement of the problem 
>>>> and goals. I'm thinking that you may be missing certain aspects of the 
>>>> underying problem.
>>>> 
>>>> -- 
>>>> 
>>>> David.
>>>> 
>>>> >
>>>> > Glad to help.
>>>> >
>>>> > First, it could help you to trace your code.  I suspect that the results are not at all what you want and tracing would help you see that.
>>>> >
>>>> > I suggest running this revision and printing out x, z, and w.
>>>> >
>>>> > #+begin_src R
>>>> >    w = NULL
>>>> >    for(j in 1:2)
>>>> >    {
>>>> >      z = NULL
>>>> >      x = rnorm(10)
>>>> >      z[1] = x[1]
>>>> >      for(i in 2:10)
>>>> >      {
>>>> >        z[i] = x[i]+5*z[i-1]
>>>> >        if(z[i]>4 | z[i]<1) {
>>>> >       w[j]=i
>>>> >        } else {
>>>> >       w[j] = 0
>>>> >        }
>>>> >      }
>>>> >    }
>>>> > #+end_src
>>>> >
>>>> >
>>>> > You should be able to see that the value of w can easily be obtained outside of the `i' loop.
>>>> >

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Feb  2 06:56:45 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 1 Feb 2021 21:56:45 -0800
Subject: [R] dependent nested for loops in R
In-Reply-To: <808E702B-B7AC-4405-BE0D-787041F51997@comcast.net>
References: <808E702B-B7AC-4405-BE0D-787041F51997@comcast.net>
Message-ID: <88674B09-2DDF-4244-9B12-953408A02CE1@comcast.net>

Or perhaps you wanted:

W <- z
W[z>4|z<2] <- 0

Sent from my iPhone

> On Feb 1, 2021, at 9:41 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> ?Just drop the ?+? if you want logical. 
> 
> Sent from my iPhone
> 
>>> On Feb 1, 2021, at 9:36 PM, Shaami <nzshaam at gmail.com> wrote:
>>> 
>> ?
>> Hi Prof. David
>> 
>> Thank you. I will always follow your advice. The suggested code worked. It gives either 1 or 0 depending on the condition to be true. I want index of z for which the condition is true (instead of 1) else zero. Could you please suggest? 
>> 
>> Thank you
>> 
>> Shaami
>> 
>>> On Tue, Feb 2, 2021 at 10:16 AM David Winsemius <dwinsemius at comcast.net> wrote:
>>> Cc?ed the list as should always be your practice. 
>>> 
>>> Here?s one way (untested):
>>> 
>>> W <- +(z>4| z<2) # assume z is of length 20
>>> 
>>> ? 
>>> David
>>> 
>>> Sent from my iPhone
>>> 
>>>>> On Feb 1, 2021, at 7:08 PM, Shaami <nzshaam at gmail.com> wrote:
>>>>> 
>>>> ?
>>>> Hi Prof. David
>>>> 
>>>> In the following state
>>>> 
>>>> W = (1:2000)[z >4|z<2)
>>>> 
>>>> Could you please guide how  I can assign zero if condition is not satisfied?
>>>> 
>>>> Best Regards 
>>>> 
>>>> Shaami
>>>> 
>>>>> On Mon, 1 Feb 2021, 11:01 am David Winsemius, <dwinsemius at comcast.net> wrote:
>>>>> 
>>>>> On 1/31/21 1:26 PM, Berry, Charles wrote:
>>>>> >
>>>>> >> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
>>>>> >>
>>>>> >> Hi
>>>>> >> I have made the sample code again. Could you please guide how to use
>>>>> >> vectorization for variables whose next value depends on the previous one?
>>>>> >>
>>>>> 
>>>>> I agree with Charles that I suspect your results are not what you 
>>>>> expect. You should try using cat or print to output intermediate results 
>>>>> to the console. I would suggest you limit your examination to a more 
>>>>> manageable length, say the first 10 results while you are working out 
>>>>> your logic. After you have the logic debugged, you can move on to long 
>>>>> sequences.
>>>>> 
>>>>> 
>>>>> This is my suggestion for a more compact solution (at least for the 
>>>>> inner loop calculation):
>>>>> 
>>>>> set.seed(123)
>>>>> 
>>>>> x <- rnorm(2000)
>>>>> 
>>>>> z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)
>>>>> 
>>>>> w<- numeric(2000)
>>>>> 
>>>>> w <-  (1:2000)[ z >4 | z < 1 ]  # In your version the w values get 
>>>>> overwritten and end up all being 2000
>>>>> 
>>>>> 
>>>>> I would also advise making a natural language statement of the problem 
>>>>> and goals. I'm thinking that you may be missing certain aspects of the 
>>>>> underying problem.
>>>>> 
>>>>> -- 
>>>>> 
>>>>> David.
>>>>> 
>>>>> >
>>>>> > Glad to help.
>>>>> >
>>>>> > First, it could help you to trace your code.  I suspect that the results are not at all what you want and tracing would help you see that.
>>>>> >
>>>>> > I suggest running this revision and printing out x, z, and w.
>>>>> >
>>>>> > #+begin_src R
>>>>> >    w = NULL
>>>>> >    for(j in 1:2)
>>>>> >    {
>>>>> >      z = NULL
>>>>> >      x = rnorm(10)
>>>>> >      z[1] = x[1]
>>>>> >      for(i in 2:10)
>>>>> >      {
>>>>> >        z[i] = x[i]+5*z[i-1]
>>>>> >        if(z[i]>4 | z[i]<1) {
>>>>> >       w[j]=i
>>>>> >        } else {
>>>>> >       w[j] = 0
>>>>> >        }
>>>>> >      }
>>>>> >    }
>>>>> > #+end_src
>>>>> >
>>>>> >
>>>>> > You should be able to see that the value of w can easily be obtained outside of the `i' loop.
>>>>> >

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Feb  2 07:15:57 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 1 Feb 2021 22:15:57 -0800
Subject: [R] dependent nested for loops in R
In-Reply-To: <88674B09-2DDF-4244-9B12-953408A02CE1@comcast.net>
References: <88674B09-2DDF-4244-9B12-953408A02CE1@comcast.net>
Message-ID: <101D14F3-58D5-4B43-99BD-E5E94C3EEB5E@comcast.net>

Or perhaps: 

W <- 1:2000
W[z>4|z<2] <- 0

Sent from my iPhone

> On Feb 1, 2021, at 9:56 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> ?Or perhaps you wanted:
> 
> W <- z
> W[z>4|z<2] <- 0
> 
> Sent from my iPhone
> 
>>> On Feb 1, 2021, at 9:41 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>>> 
>> ?Just drop the ?+? if you want logical. 
>> 
>> Sent from my iPhone
>> 
>>>> On Feb 1, 2021, at 9:36 PM, Shaami <nzshaam at gmail.com> wrote:
>>>> 
>>> ?
>>> Hi Prof. David
>>> 
>>> Thank you. I will always follow your advice. The suggested code worked. It gives either 1 or 0 depending on the condition to be true. I want index of z for which the condition is true (instead of 1) else zero. Could you please suggest? 
>>> 
>>> Thank you
>>> 
>>> Shaami
>>> 
>>>> On Tue, Feb 2, 2021 at 10:16 AM David Winsemius <dwinsemius at comcast.net> wrote:
>>>> Cc?ed the list as should always be your practice. 
>>>> 
>>>> Here?s one way (untested):
>>>> 
>>>> W <- +(z>4| z<2) # assume z is of length 20
>>>> 
>>>> ? 
>>>> David
>>>> 
>>>> Sent from my iPhone
>>>> 
>>>>>> On Feb 1, 2021, at 7:08 PM, Shaami <nzshaam at gmail.com> wrote:
>>>>>> 
>>>>> ?
>>>>> Hi Prof. David
>>>>> 
>>>>> In the following state
>>>>> 
>>>>> W = (1:2000)[z >4|z<2)
>>>>> 
>>>>> Could you please guide how  I can assign zero if condition is not satisfied?
>>>>> 
>>>>> Best Regards 
>>>>> 
>>>>> Shaami
>>>>> 
>>>>>> On Mon, 1 Feb 2021, 11:01 am David Winsemius, <dwinsemius at comcast.net> wrote:
>>>>>> 
>>>>>> On 1/31/21 1:26 PM, Berry, Charles wrote:
>>>>>> >
>>>>>> >> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
>>>>>> >>
>>>>>> >> Hi
>>>>>> >> I have made the sample code again. Could you please guide how to use
>>>>>> >> vectorization for variables whose next value depends on the previous one?
>>>>>> >>
>>>>>> 
>>>>>> I agree with Charles that I suspect your results are not what you 
>>>>>> expect. You should try using cat or print to output intermediate results 
>>>>>> to the console. I would suggest you limit your examination to a more 
>>>>>> manageable length, say the first 10 results while you are working out 
>>>>>> your logic. After you have the logic debugged, you can move on to long 
>>>>>> sequences.
>>>>>> 
>>>>>> 
>>>>>> This is my suggestion for a more compact solution (at least for the 
>>>>>> inner loop calculation):
>>>>>> 
>>>>>> set.seed(123)
>>>>>> 
>>>>>> x <- rnorm(2000)
>>>>>> 
>>>>>> z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)
>>>>>> 
>>>>>> w<- numeric(2000)
>>>>>> 
>>>>>> w <-  (1:2000)[ z >4 | z < 1 ]  # In your version the w values get 
>>>>>> overwritten and end up all being 2000
>>>>>> 
>>>>>> 
>>>>>> I would also advise making a natural language statement of the problem 
>>>>>> and goals. I'm thinking that you may be missing certain aspects of the 
>>>>>> underying problem.
>>>>>> 
>>>>>> -- 
>>>>>> 
>>>>>> David.
>>>>>> 
>>>>>> >
>>>>>> > Glad to help.
>>>>>> >
>>>>>> > First, it could help you to trace your code.  I suspect that the results are not at all what you want and tracing would help you see that.
>>>>>> >
>>>>>> > I suggest running this revision and printing out x, z, and w.
>>>>>> >
>>>>>> > #+begin_src R
>>>>>> >    w = NULL
>>>>>> >    for(j in 1:2)
>>>>>> >    {
>>>>>> >      z = NULL
>>>>>> >      x = rnorm(10)
>>>>>> >      z[1] = x[1]
>>>>>> >      for(i in 2:10)
>>>>>> >      {
>>>>>> >        z[i] = x[i]+5*z[i-1]
>>>>>> >        if(z[i]>4 | z[i]<1) {
>>>>>> >       w[j]=i
>>>>>> >        } else {
>>>>>> >       w[j] = 0
>>>>>> >        }
>>>>>> >      }
>>>>>> >    }
>>>>>> > #+end_src
>>>>>> >
>>>>>> >
>>>>>> > You should be able to see that the value of w can easily be obtained outside of the `i' loop.
>>>>>> >

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Feb  2 07:48:02 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 1 Feb 2021 22:48:02 -0800
Subject: [R] dependent nested for loops in R
In-Reply-To: <101D14F3-58D5-4B43-99BD-E5E94C3EEB5E@comcast.net>
References: <101D14F3-58D5-4B43-99BD-E5E94C3EEB5E@comcast.net>
Message-ID: <729F6B9A-F04B-4ED9-B720-485DA05C08F6@comcast.net>



Sent from my iPhone

> On Feb 1, 2021, at 10:16 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> ?Or perhaps: 
> 
> W <- 1:2000
> W[z>4|z<2] <- 0

Another way:

W <- (1:2000)*(z>4|z<2)

As I said earlier you really should study logical class vectors and the operators that use them and how to apply them as indices. 
> Sent from my iPhone
> 
>>> On Feb 1, 2021, at 9:56 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>>> 
>> ?Or perhaps you wanted:
>> 
>> W <- z
>> W[z>4|z<2] <- 0
>> 
>> Sent from my iPhone
>> 
>>>> On Feb 1, 2021, at 9:41 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>>>> 
>>> ?Just drop the ?+? if you want logical. 
>>> 
>>> Sent from my iPhone
>>> 
>>>>> On Feb 1, 2021, at 9:36 PM, Shaami <nzshaam at gmail.com> wrote:
>>>>> 
>>>> ?
>>>> Hi Prof. David
>>>> 
>>>> Thank you. I will always follow your advice. The suggested code worked. It gives either 1 or 0 depending on the condition to be true. I want index of z for which the condition is true (instead of 1) else zero. Could you please suggest? 
>>>> 
>>>> Thank you
>>>> 
>>>> Shaami
>>>> 
>>>>> On Tue, Feb 2, 2021 at 10:16 AM David Winsemius <dwinsemius at comcast.net> wrote:
>>>>> Cc?ed the list as should always be your practice. 
>>>>> 
>>>>> Here?s one way (untested):
>>>>> 
>>>>> W <- +(z>4| z<2) # assume z is of length 20
>>>>> 
>>>>> ? 
>>>>> David
>>>>> 
>>>>> Sent from my iPhone
>>>>> 
>>>>>>> On Feb 1, 2021, at 7:08 PM, Shaami <nzshaam at gmail.com> wrote:
>>>>>>> 
>>>>>> ?
>>>>>> Hi Prof. David
>>>>>> 
>>>>>> In the following state
>>>>>> 
>>>>>> W = (1:2000)[z >4|z<2)
>>>>>> 
>>>>>> Could you please guide how  I can assign zero if condition is not satisfied?
>>>>>> 
>>>>>> Best Regards 
>>>>>> 
>>>>>> Shaami
>>>>>> 
>>>>>>> On Mon, 1 Feb 2021, 11:01 am David Winsemius, <dwinsemius at comcast.net> wrote:
>>>>>>> 
>>>>>>> On 1/31/21 1:26 PM, Berry, Charles wrote:
>>>>>>> >
>>>>>>> >> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
>>>>>>> >>
>>>>>>> >> Hi
>>>>>>> >> I have made the sample code again. Could you please guide how to use
>>>>>>> >> vectorization for variables whose next value depends on the previous one?
>>>>>>> >>
>>>>>>> 
>>>>>>> I agree with Charles that I suspect your results are not what you 
>>>>>>> expect. You should try using cat or print to output intermediate results 
>>>>>>> to the console. I would suggest you limit your examination to a more 
>>>>>>> manageable length, say the first 10 results while you are working out 
>>>>>>> your logic. After you have the logic debugged, you can move on to long 
>>>>>>> sequences.
>>>>>>> 
>>>>>>> 
>>>>>>> This is my suggestion for a more compact solution (at least for the 
>>>>>>> inner loop calculation):
>>>>>>> 
>>>>>>> set.seed(123)
>>>>>>> 
>>>>>>> x <- rnorm(2000)
>>>>>>> 
>>>>>>> z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)
>>>>>>> 
>>>>>>> w<- numeric(2000)
>>>>>>> 
>>>>>>> w <-  (1:2000)[ z >4 | z < 1 ]  # In your version the w values get 
>>>>>>> overwritten and end up all being 2000
>>>>>>> 
>>>>>>> 
>>>>>>> I would also advise making a natural language statement of the problem 
>>>>>>> and goals. I'm thinking that you may be missing certain aspects of the 
>>>>>>> underying problem.
>>>>>>> 
>>>>>>> -- 
>>>>>>> 
>>>>>>> David.
>>>>>>> 
>>>>>>> >
>>>>>>> > Glad to help.
>>>>>>> >
>>>>>>> > First, it could help you to trace your code.  I suspect that the results are not at all what you want and tracing would help you see that.
>>>>>>> >
>>>>>>> > I suggest running this revision and printing out x, z, and w.
>>>>>>> >
>>>>>>> > #+begin_src R
>>>>>>> >    w = NULL
>>>>>>> >    for(j in 1:2)
>>>>>>> >    {
>>>>>>> >      z = NULL
>>>>>>> >      x = rnorm(10)
>>>>>>> >      z[1] = x[1]
>>>>>>> >      for(i in 2:10)
>>>>>>> >      {
>>>>>>> >        z[i] = x[i]+5*z[i-1]
>>>>>>> >        if(z[i]>4 | z[i]<1) {
>>>>>>> >       w[j]=i
>>>>>>> >        } else {
>>>>>>> >       w[j] = 0
>>>>>>> >        }
>>>>>>> >      }
>>>>>>> >    }
>>>>>>> > #+end_src
>>>>>>> >
>>>>>>> >
>>>>>>> > You should be able to see that the value of w can easily be obtained outside of the `i' loop.
>>>>>>> >

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Feb  2 07:52:30 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 2 Feb 2021 06:52:30 +0000
Subject: [R] Regarding fitted value
In-Reply-To: <CAO29qn5jfkoutyads9b1a=f3_UdfQcvpO-OXqcaEY2sWzcwRyQ@mail.gmail.com>
References: <CAO29qn7eZZjsBUtF1y+oZzhkiWi51+Yp46uEVUSAJZedOqtwQA@mail.gmail.com>
 <03978895-a544-c325-ed23-97315e7fc4e1@sapo.pt>
 <CAO29qn5jfkoutyads9b1a=f3_UdfQcvpO-OXqcaEY2sWzcwRyQ@mail.gmail.com>
Message-ID: <050ce427-2f8a-c973-57a5-8f96124947dd@sapo.pt>

Hello,

You get the fitted values for years 2000, ..., 2019.
Those values are the original series minus the residuals:

f <- fitted(model1)
g <- yy - resid(model1)
identical(f, g)          # returns TRUE


If you want to *forecast*, this will give you the default h = 10
forecasts.

fc <- forecast(model1)
plot(fc)


Hope this helps,

Rui Barradas

?s 23:31 de 01/02/21, Md. Moyazzem Hossain escreveu:
> Dear Rui Barradas
> 
> Thank you very much for your reply.
> 
> However, still now, I have a confusion whether I get the fitted value 
> for the year 2000, 2001, ..., 2020 or 2001, 2002, ..., 2021.
> 
> Need any more help.
> 
> Thanks in advance.
> 
> Md
> 
> On Thu, Jan 28, 2021 at 4:47 PM Rui Barradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>      ?From help('forecast::fitted.Arima'):
> 
>     h? ? ? ?The number of steps to forecast ahead.
> 
> 
>     So you have the default h = 1 step ahead forecast for your model.
> 
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
>     ?s 12:13 de 28/01/21, Md. Moyazzem Hossain escreveu:
>      >? ?Dear R-experts,
>      >
>      > I hope that all of you are doing well. I got the filled value
>     from the
>      > ARIMA model.
>      >
>      > I use the following working code. But I am not clear whether I
>     got the
>      > fitted value for each *corresponding time* of the original data
>     point like
>      > 2000, 2001, 2020 or get a *one-step-ahead* fitted value. Please
>     suggest me
>      > any reference for further reading to my understanding.
>      >
>      > ########################
>      >
>     y<-c(120,340,250,430,125,324,763,458,763,905,765,456,234,345,654,654,567,876,907,456)
>      > library(forecast)
>      > library(tseries)
>      > yy=ts(y, start=c(2000,1))
>      >
>      > model1=Arima(yy,order=c(0,2,1), lambda = NULL,method='ML')
>      > model1
>      >
>      > f <- fitted( model1)
>      > plot(yy)
>      > plot(f)
>      >
>      > Thanks in advance.
>      >
> 
> 
> 
> -- 
> Best Regards,
> Md. Moyazzem Hossain
> Associate Professor
> Department of Statistics
> Jahangirnagar University
> Savar, Dhaka-1342
> Bangladesh
> Website: http://www.juniv.edu/teachers/hossainmm
> Research: *Google Scholar 
> <https://scholar.google.com/citations?user=-U03XCgAAAAJ&hl=en&oi=ao>*; 
> *ResearchGate <https://www.researchgate.net/profile/Md_Hossain107>*; 
> *ORCID iD <https://orcid.org/0000-0003-3593-6936>*


From p@rtho@@@ @end|ng |rom gm@||@com  Tue Feb  2 12:36:42 2021
From: p@rtho@@@ @end|ng |rom gm@||@com (Partho Sarkar)
Date: Tue, 2 Feb 2021 17:06:42 +0530
Subject: [R] Regarding fitted value
In-Reply-To: <050ce427-2f8a-c973-57a5-8f96124947dd@sapo.pt>
References: <CAO29qn7eZZjsBUtF1y+oZzhkiWi51+Yp46uEVUSAJZedOqtwQA@mail.gmail.com>
 <03978895-a544-c325-ed23-97315e7fc4e1@sapo.pt>
 <CAO29qn5jfkoutyads9b1a=f3_UdfQcvpO-OXqcaEY2sWzcwRyQ@mail.gmail.com>
 <050ce427-2f8a-c973-57a5-8f96124947dd@sapo.pt>
Message-ID: <CAJUZ7XQmLrpT_v8ztGQEFMPJzew68_O6MRZD6559kWY2B4ae5g@mail.gmail.com>

In case further clarification is needed, this from Rob Hyndman, author of
the Forecast package, may be helpful:

"fitted produces one-step in-sample (i.e., training data) "forecasts". That
is, it gives a forecast of observation t using observations up to time t-1
for each t in the data. ... So fitted(fit) gives one-step forecasts of
observations 1, 2, ... It is possible to produce a "forecast" for
observation 1 as a forecast is simply the expected value of that
observation given the model and any preceding history."

From Hyndman's answer in this thread
<a href="
https://stats.stackexchange.com/questions/217955/difference-between-first-one-step-ahead-forecast-and-first-forecast-from-fitted?rq=1
">
https://stats.stackexchange.com/questions/217955/difference-between-first-one-step-ahead-forecast-and-first-forecast-from-fitted?rq=1
</a>

See also <a href="
https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/">
https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/</a>
<https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/>

[A quick search on the stackexchange forum will turn up several similar
questions & answers]

HTH,

*Best regards,*
*Partho Sarkar*

On Tue, Feb 2, 2021 at 12:28 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> You get the fitted values for years 2000, ..., 2019.
> Those values are the original series minus the residuals:
>
> f <- fitted(model1)
> g <- yy - resid(model1)
> identical(f, g)          # returns TRUE
>
>
> If you want to *forecast*, this will give you the default h = 10
> forecasts.
>
> fc <- forecast(model1)
> plot(fc)
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 23:31 de 01/02/21, Md. Moyazzem Hossain escreveu:
> > Dear Rui Barradas
> >
> > Thank you very much for your reply.
> >
> > However, still now, I have a confusion whether I get the fitted value
> > for the year 2000, 2001, ..., 2020 or 2001, 2002, ..., 2021.
> >
> > Need any more help.
> >
> > Thanks in advance.
> >
> > Md
> >
> > On Thu, Jan 28, 2021 at 4:47 PM Rui Barradas <ruipbarradas at sapo.pt
> > <mailto:ruipbarradas at sapo.pt>> wrote:
> >
> >     Hello,
> >
> >       From help('forecast::fitted.Arima'):
> >
> >     h       The number of steps to forecast ahead.
> >
> >
> >     So you have the default h = 1 step ahead forecast for your model.
> >
> >
> >     Hope this helps,
> >
> >     Rui Barradas
> >
> >     ?s 12:13 de 28/01/21, Md. Moyazzem Hossain escreveu:
> >      >   Dear R-experts,
> >      >
> >      > I hope that all of you are doing well. I got the filled value
> >     from the
> >      > ARIMA model.
> >      >
> >      > I use the following working code. But I am not clear whether I
> >     got the
> >      > fitted value for each *corresponding time* of the original data
> >     point like
> >      > 2000, 2001, 2020 or get a *one-step-ahead* fitted value. Please
> >     suggest me
> >      > any reference for further reading to my understanding.
> >      >
> >      > ########################
> >      >
> >
>  y<-c(120,340,250,430,125,324,763,458,763,905,765,456,234,345,654,654,567,876,907,456)
> >      > library(forecast)
> >      > library(tseries)
> >      > yy=ts(y, start=c(2000,1))
> >      >
> >      > model1=Arima(yy,order=c(0,2,1), lambda = NULL,method='ML')
> >      > model1
> >      >
> >      > f <- fitted( model1)
> >      > plot(yy)
> >      > plot(f)
> >      >
> >      > Thanks in advance.
> >      >
> >
> >
> >
> > --
> > Best Regards,
> > Md. Moyazzem Hossain
> > Associate Professor
> > Department of Statistics
> > Jahangirnagar University
> > Savar, Dhaka-1342
> > Bangladesh
> > Website: http://www.juniv.edu/teachers/hossainmm
> > Research: *Google Scholar
> > <https://scholar.google.com/citations?user=-U03XCgAAAAJ&hl=en&oi=ao>*;
> > *ResearchGate <https://www.researchgate.net/profile/Md_Hossain107>*;
> > *ORCID iD <https://orcid.org/0000-0003-3593-6936>*
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Feb  2 13:25:42 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 2 Feb 2021 12:25:42 +0000
Subject: [R] Regarding fitted value
In-Reply-To: <CAJUZ7XQmLrpT_v8ztGQEFMPJzew68_O6MRZD6559kWY2B4ae5g@mail.gmail.com>
References: <CAO29qn7eZZjsBUtF1y+oZzhkiWi51+Yp46uEVUSAJZedOqtwQA@mail.gmail.com>
 <03978895-a544-c325-ed23-97315e7fc4e1@sapo.pt>
 <CAO29qn5jfkoutyads9b1a=f3_UdfQcvpO-OXqcaEY2sWzcwRyQ@mail.gmail.com>
 <050ce427-2f8a-c973-57a5-8f96124947dd@sapo.pt>
 <CAJUZ7XQmLrpT_v8ztGQEFMPJzew68_O6MRZD6559kWY2B4ae5g@mail.gmail.com>
Message-ID: <9ff6ebc2-06af-222e-ea8b-abfa52325933@sapo.pt>

Hello,

Thanks for the links, they are very helpful.

Rui Barradas

?s 11:36 de 02/02/21, Partho Sarkar escreveu:
> In case further clarification is needed, this from Rob Hyndman, author 
> of the Forecast package, may be helpful:
> 
> "fitted produces one-step in-sample (i.e., training data) "forecasts". 
> That is, it gives a forecast of observation t using observations up to 
> time t-1 for each t in the data. ... So fitted(fit) gives one-step 
> forecasts of observations 1, 2, ... It is possible to produce a 
> "forecast" for observation 1 as a forecast is simply the expected value 
> of that observation given the model and any preceding history."
> 
>  From Hyndman's answer in this thread
> <a 
> href="https://stats.stackexchange.com/questions/217955/difference-between-first-one-step-ahead-forecast-and-first-forecast-from-fitted?rq=1">https://stats.stackexchange.com/questions/217955/difference-between-first-one-step-ahead-forecast-and-first-forecast-from-fitted?rq=1</a>
> 
> See also <a 
> href="https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/">https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/</a><https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/>
> 
> [A quick search on the stackexchange forum will turn up several similar 
> questions & answers]
> 
> HTH,
> 
> /
> Best regards,
> /
> /
> Partho Sarkar
> /
> 
> On Tue, Feb 2, 2021 at 12:28 PM Rui Barradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>     You get the fitted values for years 2000, ..., 2019.
>     Those values are the original series minus the residuals:
> 
>     f <- fitted(model1)
>     g <- yy - resid(model1)
>     identical(f, g)? ? ? ? ? # returns TRUE
> 
> 
>     If you want to *forecast*, this will give you the default h = 10
>     forecasts.
> 
>     fc <- forecast(model1)
>     plot(fc)
> 
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
>     ?s 23:31 de 01/02/21, Md. Moyazzem Hossain escreveu:
>      > Dear Rui Barradas
>      >
>      > Thank you very much for your reply.
>      >
>      > However, still now, I have a confusion whether I get the fitted
>     value
>      > for the year 2000, 2001, ..., 2020 or 2001, 2002, ..., 2021.
>      >
>      > Need any more help.
>      >
>      > Thanks in advance.
>      >
>      > Md
>      >
>      > On Thu, Jan 28, 2021 at 4:47 PM Rui Barradas
>     <ruipbarradas at sapo.pt <mailto:ruipbarradas at sapo.pt>
>      > <mailto:ruipbarradas at sapo.pt <mailto:ruipbarradas at sapo.pt>>> wrote:
>      >
>      >? ? ?Hello,
>      >
>      >? ? ? ?From help('forecast::fitted.Arima'):
>      >
>      >? ? ?h? ? ? ?The number of steps to forecast ahead.
>      >
>      >
>      >? ? ?So you have the default h = 1 step ahead forecast for your model.
>      >
>      >
>      >? ? ?Hope this helps,
>      >
>      >? ? ?Rui Barradas
>      >
>      >? ? ??s 12:13 de 28/01/21, Md. Moyazzem Hossain escreveu:
>      >? ? ? >? ?Dear R-experts,
>      >? ? ? >
>      >? ? ? > I hope that all of you are doing well. I got the filled value
>      >? ? ?from the
>      >? ? ? > ARIMA model.
>      >? ? ? >
>      >? ? ? > I use the following working code. But I am not clear whether I
>      >? ? ?got the
>      >? ? ? > fitted value for each *corresponding time* of the original
>     data
>      >? ? ?point like
>      >? ? ? > 2000, 2001, 2020 or get a *one-step-ahead* fitted value.
>     Please
>      >? ? ?suggest me
>      >? ? ? > any reference for further reading to my understanding.
>      >? ? ? >
>      >? ? ? > ########################
>      >? ? ? >
>      >   
>      ?y<-c(120,340,250,430,125,324,763,458,763,905,765,456,234,345,654,654,567,876,907,456)
>      >? ? ? > library(forecast)
>      >? ? ? > library(tseries)
>      >? ? ? > yy=ts(y, start=c(2000,1))
>      >? ? ? >
>      >? ? ? > model1=Arima(yy,order=c(0,2,1), lambda = NULL,method='ML')
>      >? ? ? > model1
>      >? ? ? >
>      >? ? ? > f <- fitted( model1)
>      >? ? ? > plot(yy)
>      >? ? ? > plot(f)
>      >? ? ? >
>      >? ? ? > Thanks in advance.
>      >? ? ? >
>      >
>      >
>      >
>      > --
>      > Best Regards,
>      > Md. Moyazzem Hossain
>      > Associate Professor
>      > Department of Statistics
>      > Jahangirnagar University
>      > Savar, Dhaka-1342
>      > Bangladesh
>      > Website: http://www.juniv.edu/teachers/hossainmm
>      > Research: *Google Scholar
>      >
>     <https://scholar.google.com/citations?user=-U03XCgAAAAJ&hl=en&oi=ao>*;
>      > *ResearchGate <https://www.researchgate.net/profile/Md_Hossain107>*;
>      > *ORCID iD <https://orcid.org/0000-0003-3593-6936>*
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>


From p@rtho@@@ @end|ng |rom gm@||@com  Tue Feb  2 13:33:54 2021
From: p@rtho@@@ @end|ng |rom gm@||@com (Partho Sarkar)
Date: Tue, 2 Feb 2021 18:03:54 +0530
Subject: [R] Regarding fitted value
In-Reply-To: <9ff6ebc2-06af-222e-ea8b-abfa52325933@sapo.pt>
References: <CAO29qn7eZZjsBUtF1y+oZzhkiWi51+Yp46uEVUSAJZedOqtwQA@mail.gmail.com>
 <03978895-a544-c325-ed23-97315e7fc4e1@sapo.pt>
 <CAO29qn5jfkoutyads9b1a=f3_UdfQcvpO-OXqcaEY2sWzcwRyQ@mail.gmail.com>
 <050ce427-2f8a-c973-57a5-8f96124947dd@sapo.pt>
 <CAJUZ7XQmLrpT_v8ztGQEFMPJzew68_O6MRZD6559kWY2B4ae5g@mail.gmail.com>
 <9ff6ebc2-06af-222e-ea8b-abfa52325933@sapo.pt>
Message-ID: <CAJUZ7XTdn2UUEpEZLFViiMuquTFzabKH1NqtiruT8Cs0=b-yjg@mail.gmail.com>

My pleasure!

*Best regards,*
*Partho Sarkar*

On Tue, Feb 2, 2021 at 5:55 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Thanks for the links, they are very helpful.
>
> Rui Barradas
>
> ?s 11:36 de 02/02/21, Partho Sarkar escreveu:
> > In case further clarification is needed, this from Rob Hyndman, author
> > of the Forecast package, may be helpful:
> >
> > "fitted produces one-step in-sample (i.e., training data) "forecasts".
> > That is, it gives a forecast of observation t using observations up to
> > time t-1 for each t in the data. ... So fitted(fit) gives one-step
> > forecasts of observations 1, 2, ... It is possible to produce a
> > "forecast" for observation 1 as a forecast is simply the expected value
> > of that observation given the model and any preceding history."
> >
> >  From Hyndman's answer in this thread
> > <a
> > href="
> https://stats.stackexchange.com/questions/217955/difference-between-first-one-step-ahead-forecast-and-first-forecast-from-fitted?rq=1
> ">
> https://stats.stackexchange.com/questions/217955/difference-between-first-one-step-ahead-forecast-and-first-forecast-from-fitted?rq=1
> </a>
> >
> > See also <a
> > href="
> https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/">
> https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/</a><
> https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/>
> >
> > [A quick search on the stackexchange forum will turn up several similar
> > questions & answers]
> >
> > HTH,
> >
> > /
> > Best regards,
> > /
> > /
> > Partho Sarkar
> > /
> >
> > On Tue, Feb 2, 2021 at 12:28 PM Rui Barradas <ruipbarradas at sapo.pt
> > <mailto:ruipbarradas at sapo.pt>> wrote:
> >
> >     Hello,
> >
> >     You get the fitted values for years 2000, ..., 2019.
> >     Those values are the original series minus the residuals:
> >
> >     f <- fitted(model1)
> >     g <- yy - resid(model1)
> >     identical(f, g)          # returns TRUE
> >
> >
> >     If you want to *forecast*, this will give you the default h = 10
> >     forecasts.
> >
> >     fc <- forecast(model1)
> >     plot(fc)
> >
> >
> >     Hope this helps,
> >
> >     Rui Barradas
> >
> >     ?s 23:31 de 01/02/21, Md. Moyazzem Hossain escreveu:
> >      > Dear Rui Barradas
> >      >
> >      > Thank you very much for your reply.
> >      >
> >      > However, still now, I have a confusion whether I get the fitted
> >     value
> >      > for the year 2000, 2001, ..., 2020 or 2001, 2002, ..., 2021.
> >      >
> >      > Need any more help.
> >      >
> >      > Thanks in advance.
> >      >
> >      > Md
> >      >
> >      > On Thu, Jan 28, 2021 at 4:47 PM Rui Barradas
> >     <ruipbarradas at sapo.pt <mailto:ruipbarradas at sapo.pt>
> >      > <mailto:ruipbarradas at sapo.pt <mailto:ruipbarradas at sapo.pt>>>
> wrote:
> >      >
> >      >     Hello,
> >      >
> >      >       From help('forecast::fitted.Arima'):
> >      >
> >      >     h       The number of steps to forecast ahead.
> >      >
> >      >
> >      >     So you have the default h = 1 step ahead forecast for your
> model.
> >      >
> >      >
> >      >     Hope this helps,
> >      >
> >      >     Rui Barradas
> >      >
> >      >     ?s 12:13 de 28/01/21, Md. Moyazzem Hossain escreveu:
> >      >      >   Dear R-experts,
> >      >      >
> >      >      > I hope that all of you are doing well. I got the filled
> value
> >      >     from the
> >      >      > ARIMA model.
> >      >      >
> >      >      > I use the following working code. But I am not clear
> whether I
> >      >     got the
> >      >      > fitted value for each *corresponding time* of the original
> >     data
> >      >     point like
> >      >      > 2000, 2001, 2020 or get a *one-step-ahead* fitted value.
> >     Please
> >      >     suggest me
> >      >      > any reference for further reading to my understanding.
> >      >      >
> >      >      > ########################
> >      >      >
> >      >
> >
>  y<-c(120,340,250,430,125,324,763,458,763,905,765,456,234,345,654,654,567,876,907,456)
> >      >      > library(forecast)
> >      >      > library(tseries)
> >      >      > yy=ts(y, start=c(2000,1))
> >      >      >
> >      >      > model1=Arima(yy,order=c(0,2,1), lambda = NULL,method='ML')
> >      >      > model1
> >      >      >
> >      >      > f <- fitted( model1)
> >      >      > plot(yy)
> >      >      > plot(f)
> >      >      >
> >      >      > Thanks in advance.
> >      >      >
> >      >
> >      >
> >      >
> >      > --
> >      > Best Regards,
> >      > Md. Moyazzem Hossain
> >      > Associate Professor
> >      > Department of Statistics
> >      > Jahangirnagar University
> >      > Savar, Dhaka-1342
> >      > Bangladesh
> >      > Website: http://www.juniv.edu/teachers/hossainmm
> >      > Research: *Google Scholar
> >      >
> >     <https://scholar.google.com/citations?user=-U03XCgAAAAJ&hl=en&oi=ao
> >*;
> >      > *ResearchGate <https://www.researchgate.net/profile/Md_Hossain107
> >*;
> >      > *ORCID iD <https://orcid.org/0000-0003-3593-6936>*
> >
> >     ______________________________________________
> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> >     To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From nz@h@@m @end|ng |rom gm@||@com  Tue Feb  2 06:36:25 2021
From: nz@h@@m @end|ng |rom gm@||@com (Shaami)
Date: Tue, 2 Feb 2021 10:36:25 +0500
Subject: [R] dependent nested for loops in R
In-Reply-To: <2ED6DCE6-FC1A-43D8-B760-797293586625@comcast.net>
References: <CAGR+MS5KVUrbrwgtuUjAGzHj_Gg6cX8dsx-94TJu5ium8JSzHw@mail.gmail.com>
 <2ED6DCE6-FC1A-43D8-B760-797293586625@comcast.net>
Message-ID: <CAGR+MS6nsme783vi5x1+UU2K_YvKsx8vP-QUtgeSe7WbPn+M4Q@mail.gmail.com>

Hi Prof. David

Thank you. I will always follow your advice. The suggested code worked. It
gives either 1 or 0 depending on the condition to be true. I want index of
z for which the condition is true (instead of 1) else zero. Could you
please suggest?

Thank you

Shaami

On Tue, Feb 2, 2021 at 10:16 AM David Winsemius <dwinsemius at comcast.net>
wrote:

> Cc?ed the list as should always be your practice.
>
> Here?s one way (untested):
>
> W <- +(z>4| z<2) # assume z is of length 20
>
> ?
> David
>
> Sent from my iPhone
>
> On Feb 1, 2021, at 7:08 PM, Shaami <nzshaam at gmail.com> wrote:
>
> ?
> Hi Prof. David
>
> In the following state
>
> W = (1:2000)[z >4|z<2)
>
> Could you please guide how  I can assign zero if condition is not
> satisfied?
>
> Best Regards
>
> Shaami
>
> On Mon, 1 Feb 2021, 11:01 am David Winsemius, <dwinsemius at comcast.net>
> wrote:
>
>>
>> On 1/31/21 1:26 PM, Berry, Charles wrote:
>> >
>> >> On Jan 30, 2021, at 9:32 PM, Shaami <nzshaam at gmail.com> wrote:
>> >>
>> >> Hi
>> >> I have made the sample code again. Could you please guide how to use
>> >> vectorization for variables whose next value depends on the previous
>> one?
>> >>
>>
>> I agree with Charles that I suspect your results are not what you
>> expect. You should try using cat or print to output intermediate results
>> to the console. I would suggest you limit your examination to a more
>> manageable length, say the first 10 results while you are working out
>> your logic. After you have the logic debugged, you can move on to long
>> sequences.
>>
>>
>> This is my suggestion for a more compact solution (at least for the
>> inner loop calculation):
>>
>> set.seed(123)
>>
>> x <- rnorm(2000)
>>
>> z <- Reduce( function(x,y) { sum(y+5*x) }, x, accumulate=TRUE)
>>
>> w<- numeric(2000)
>>
>> w <-  (1:2000)[ z >4 | z < 1 ]  # In your version the w values get
>> overwritten and end up all being 2000
>>
>>
>> I would also advise making a natural language statement of the problem
>> and goals. I'm thinking that you may be missing certain aspects of the
>> underying problem.
>>
>> --
>>
>> David.
>>
>> >
>> > Glad to help.
>> >
>> > First, it could help you to trace your code.  I suspect that the
>> results are not at all what you want and tracing would help you see that.
>> >
>> > I suggest running this revision and printing out x, z, and w.
>> >
>> > #+begin_src R
>> >    w = NULL
>> >    for(j in 1:2)
>> >    {
>> >      z = NULL
>> >      x = rnorm(10)
>> >      z[1] = x[1]
>> >      for(i in 2:10)
>> >      {
>> >        z[i] = x[i]+5*z[i-1]
>> >        if(z[i]>4 | z[i]<1) {
>> >       w[j]=i
>> >        } else {
>> >       w[j] = 0
>> >        }
>> >      }
>> >    }
>> > #+end_src
>> >
>> >
>> > You should be able to see that the value of w can easily be obtained
>> outside of the `i' loop.
>> >
>>
>

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Feb  2 14:49:23 2021
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 2 Feb 2021 14:49:23 +0100
Subject: [R] Error when calling (R 4.0.x on Windows) from Python
In-Reply-To: <8721759c-e3d8-5e23-dcb5-89b2d4f00ff0@gmail.com>
References: <3cf33078e38cd82eaa62af315c5c6795@mail.infomaniak.com>
 <24591.65302.527022.733577@stat.math.ethz.ch>
 <24593.9866.492194.548636@stat.math.ethz.ch>
 <dce1a81a-a543-bbbc-24f3-54d64eae2b80@gmail.com>
 <aa6df17c-8684-3140-a545-65d217882c1b@gmail.com>
 <CAHqSRuTFc8x=mox=55s7HZHpWeOdzaR_oMev6kv=Yp8XiNzsSQ@mail.gmail.com>
 <37bf94d0-873a-5bef-87ee-60bd572c8545@gmail.com>
 <CAHqSRuSOYk=aWzKg9Ub4LN+hXTZ8ptZDw7gzrxt67957kNDwXQ@mail.gmail.com>
 <25b589b25af628379c5a9ac502580552@mail.infomaniak.com>
 <8721759c-e3d8-5e23-dcb5-89b2d4f00ff0@gmail.com>
Message-ID: <746561ef-73d9-d87c-cd58-5396dc4fbced@gmail.com>

A reproducible example:

system("\"C:\\Program Files\\R\\R-4.0.3\\bin\\R.exe\" -e commandArgs() 
 >out")? # does not create "out"
system("\"C:\\Program Files\\R\\R-3.6.3\\bin\\R.exe\" -e commandArgs() 
 >out")? # creates "out"

Note that this does not create "out", either:

system("\"C:\\Program Files\\R\\R-3.6.3\\bin\\x64\\Rterm.exe\" -e 
commandArgs() >out")

I think redirections should be left to the shell, so e.g. those calls 
from Python should use "os.system" if they needed redirection, as Duncan 
suggested.

I see that both R.exe and Rterm.exe give "Usage: Rterm [options] [< 
infile] [> outfile] [EnvVars]", which may be confusing to programmers 
invoking R without a shell, but then talking there about invocation via 
shell could confuse typical users, instead.

My best guess is that the redirection in R.exe in 3.6 worked rather by 
accident, as a consequence of that R.exe internally invoked (and still 
invokes) Rterm.exe via the shell, but R.exe did not protect all 
arguments from expansions from that internal shell invocation. If 
redirection was meant to work without external shell, it would have 
instead been implemented explicitly also in Rterm.exe.

My change 77926 made sure that all arguments to that internal shell 
invocation were protected, following bug reports such as PR#17709, where 
users had "&" in their file names. Therefore, this works, executing file 
code&.r

system("\"C:\\Program Files\\R\\R-4.0.3\\bin\\R.exe\" -f code&.r")

but not with 3.6.3, and I would not be surprised if even more special 
characters became popular, soon.

After all, what if someone wanted to pass an argument to R including 
">", that should work, too:

---- t.r ----
cat("Header: ", commandArgs(TRUE)[1], "\n")
-------------

system("\"C:\\Program Files\\R\\R-4.0.3\\bin\\R.exe\" -f t.r --args 
<html>") # prints Header:? <html>
system("\"C:\\Program Files\\R\\R-3.6.3\\bin\\R.exe\" -f t.r --args 
<html>") # fails with? The syntax of the command is incorrect.

So in summary, I don't agree this is a bug.

Best
Tomas

On 1/29/21 11:19 AM, Duncan Murdoch wrote:
> On 29/01/2021 3:57 a.m., Marcel Baumgartner wrote:
>> Dear Bill, Duncan and Martin,
>>
>> thanks for your investigation. Can you clarify on next steps? Is this 
>> now an official bug, or have you found a workaround? For your 
>> information: the issue showed up the first time when I called R 4.0.2 
>> from within a software called "IDEA" (from Caseware Analytics), using 
>> their scripting language (similar to Visual Basic). With my colleague 
>> we then simply reproduce the error calling R from Python, so that we 
>> could share it more easily. When we run this command directly on the 
>> CMD in Windows, all works fine. The issue only happens when R is 
>> called within another software.
>>
>
> I would say this is a bug, with two workarounds.? These are only 
> needed (and will only work) on Windows.
>
> 1.? If you want to include redirection in the command line, then call 
> cmd.exe yourself, and have it call Rterm.exe.? I think your original 
> command
>
> R.exe -f code.R --args "~/file.txt" 1> "~/log.txt" 2>&1"
>
> could be written as
>
> cmd.exe 1>log.txt 2>&1 /C R.exe -f code.R --args "~/file.txt"
>
> (but I haven't tested it).? You could also use the slightly more 
> efficient
>
> cmd.exe 1>log.txt 2>&1 /C Rterm.exe -f code.R --args "~/file.txt"
>
> if Rterm.exe is on your path; by default I don't think it will be.
>
> 2.? Change the Python code to a different function call than 
> subprocess.call.? It should be one that's equivalent to the C system() 
> function; I believe os.system() is what you want, so you'd use
>
> os.system("R.exe -f code.R --args "~/file.txt" 1> "~/log.txt" 2>&1")
>
> and the redirection would be handled by the implicit shell that is 
> called by os.system.? Again, replacing R.exe by Rterm.exe would be a 
> tiny bit more efficient, but it might not be on the path.
>
> Duncan Murdoch
>
>> Best regards
>>
>> Marcel
>>
>>
>> Le 2021-01-27T23:14:36.000+01:00, Bill Dunlap 
>> <williamwdunlap at gmail.com> a ?crit :
>>
>> ??? I tried the following change, that adds quotes if the argument does
>> ??? not include ">".
>> ??? Index: front-ends/rcmdfn.c
>> ===================================================================
>> ??? --- front-ends/rcmdfn.c (revision 79883)
>> ??? +++ front-ends/rcmdfn.c (working copy)
>> ??? @@ -173,9 +173,13 @@
>> ??? fprintf(stderr, "command line too long\n");
>> ??? return(27);
>> ??? }
>> ??? - strcat(cmd, "\"");
>> ??? + if (!strchr(argv[i], '>')) {
>> ??? + strcat(cmd, "\"");
>> ??? + }
>> ??? strcat(cmd, argv[i]);
>> ??? - strcat(cmd, "\"");
>> ??? + if (!strchr(argv[i], '>')) {
>> ??? + strcat(cmd, "\"");
>> ??? + }
>> ??? }
>> ??? /* the outermost double quotes are needed for cmd.exe */
>> ??? strcat(cmd, "\"");
>>
>> ??? It lets the python example work. I am not sure that quoting all the
>> ??? arguments buys you much, as shQuote() is still needed for arguments
>> ??? that include spaces. E.g., with 3.6.3, 4.0.3, and my development
>> ??? build with the above patch we get
>>
>> ??????? stopifnot(dir.create(dirname <- file.path(tempfile(), "A
>> ??????? SPACE"), recursive=TRUE))
>> ??????? logname <- file.path(dirname, "log.txt")
>> ??????? unlink(logname)
>> ??????? system(paste( "C:\\R\\R-3.6.3\\bin\\R.exe --quiet --vanilla -e
>> ??????? \"commandArgs()\" 1>", logname))
>>
>> ??? ARGUMENT 'SPACE/log.txt' __ignored__
>>
>> ??? [1] 0
>>
>> ??????? tryCatch(readLines(logname), 
>> error=function(e)conditionMessage(e))
>>
>> ??? [1] "cannot open the connection"
>> ??? Warning message:
>> ??? In file(con, "r") :
>> ??? cannot open file
>> 'C:\Users\willi\AppData\Local\Temp\RtmpM5tsC7\file1a1068734a49/A
>> ??? SPACE/log.txt': No such file or directory
>>
>>
>> ??????? system(paste( "C:\\R\\R-4.0.3\\bin\\R.exe --quiet --vanilla -e
>> ??????? \"commandArgs()\" 1>", logname))
>> ??????? commandArgs()
>>
>> ??? [1] "C:\\R\\R-40~1.3/bin/x64/Rterm.exe"
>> ??? [2] "--quiet"
>> ??? [3] "--vanilla"
>> ??? [4] "-e"
>> ??? [5] "commandArgs()"
>> ??? [6] "1>"
>> ??? [7]
>> "C:\\Users\\willi\\AppData\\Local\\Temp\\RtmpM5tsC7\\file1a1068734a49/A"
>> ??? [8] "SPACE/log.txt"
>>
>>
>> ??? [1] 0
>>
>> ??????? tryCatch(readLines(logname), 
>> error=function(e)conditionMessage(e))
>>
>> ??? [1] "cannot open the connection"
>> ??? Warning message:
>> ??? In file(con, "r") :
>> ??? cannot open file
>> 'C:\Users\willi\AppData\Local\Temp\RtmpM5tsC7\file1a1068734a49/A
>> ??? SPACE/log.txt': No such file or directory
>>
>>
>> ??????? unlink(logname)
>> ??????? system(paste(
>> ??????? "C:\\msys64\\home\\willi\\ucrt3\\r\\trunk\\bin\\R.exe --quiet
>> ??????? --vanilla -e \"commandArgs()\" 1>", logname))
>>
>> ??? [1] 0
>>
>> ??????? tryCatch(readLines(logname), 
>> error=function(e)conditionMessage(e))
>>
>> ??? [1] "cannot open the connection"
>> ??? Warning message:
>> ??? In file(con, "r") :
>> ??? cannot open file
>> 'C:\Users\willi\AppData\Local\Temp\RtmpM5tsC7\file1a1068734a49/A
>> ??? SPACE/log.txt': No such file or directory
>>
>> ??????? tryCatch(readLines(sub(" .*$", "", logname)),
>> ??????? error=function(e)conditionMessage(e))
>>
>> ??? [1] "> commandArgs()"
>> ??? "[1]
>> \"C:\\\\msys64\\\\home\\\\willi\\\\ucrt3\\\\r\\\\trunk/bin/x64/Rterm.exe\""
>> ??? [3] "[2] \"--quiet\"
>> ??? " "[3] \"--vanilla\"
>> ??? "
>> ??? [5] "[4] \"-e\"
>> ??? " "[5] \"commandArgs()\"
>> ??? "
>> ??? [7] "[6] \"SPACE/log.txt\"
>> ??? " "> "
>> ??? [9] "> "
>>
>>
>> ??????? unlink(logname)
>> ??????? system(paste(
>> ??????? "C:\\msys64\\home\\willi\\ucrt3\\r\\trunk\\bin\\R.exe --quiet
>> ??????? --vanilla -e \"commandArgs()\" 1>", shQuote(logname)))
>>
>> ??? [1] 0
>>
>> ??????? tryCatch(readLines(logname), 
>> error=function(e)conditionMessage(e))
>>
>> ??? [1] "> commandArgs()"
>> ??? "[1]
>> \"C:\\\\msys64\\\\home\\\\willi\\\\ucrt3\\\\r\\\\trunk/bin/x64/Rterm.exe\""
>> ??? [3] "[2] \"--quiet\"
>> ??? " "[3] \"--vanilla\"
>> ??? "
>> ??? [5] "[4] \"-e\"
>> ??? " "[5] \"commandArgs()\"
>> ??? "
>> ??? [7] "> "
>> ??? "> "
>>
>> ??? -Bill
>>
>> ??? On Wed, Jan 27, 2021 at 1:25 PM Duncan Murdoch
>> ??? <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>>
>> ??????? On 27/01/2021 3:40 p.m., Bill Dunlap wrote:
>>
>> ??????????? I believe the problem is from svn 77925 in
>> ??????????? gnuwin/front-ends/rcmdfn.c,
>> ??????????? which was committed a few days after 3.6.3 was released.
>> ??????????? Rterm used
>> ??????????? to put double quotes around a command line argument only 
>> if it
>> ??????????? contained a space, now it double quotes all arguments. It
>> ??????????? sees shell
>> ??????????? constructs like "1>" and the following file name as
>> ??????????? arguments and
>> ??????????? double quoting them hides them from the shell, leading to 
>> this
>> ??????????? problem. I think we may have to rely on the user supplying
>> ??????????? quotes as
>> ??????????? needed instead of blindly adding them.
>>
>>
>> ??????? Okay, now I see what you mean.
>>
>> ??????? If you invoke R using R.exe, it asks cmd.exe to run Rterm.exe,
>> ??????? so it is
>> ??????? possible that redirection would be handled.
>>
>> ??????? If you invoke R directly using Rterm.exe, then my description
>> ??????? down below
>> ??????? would be correct.
>>
>> ??????? Duncan Murdoch
>>
>>
>>
>> ??????????? -Bill
>>
>> ??????????? On Wed, Jan 27, 2021 at 12:28 PM Duncan Murdoch
>> ??????????? <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
>> ??????????? wrote:
>>
>>
>> ??????????????? On 27/01/2021 3:17 p.m., Duncan Murdoch wrote:
>>
>> ??????????????????? On 27/01/2021 3:38 a.m., Martin Maechler wrote:
>>
>> ??????????????????????????????????????????? Martin Maechler
>> ??????????????????????????????????????????? on Tue, 26 Jan 2021 12:37:58
>> ??????????????????????????????????????????? +0100 writes:
>>
>>
>> ??????????????????????????????????????????? Marcel Baumgartner
>> ??????????????????????????????????????????? on Tue, 26 Jan 2021 08:55:48
>> ??????????????????????????????????????????? +0100 writes:
>>
>>
>> ??????????????????????? Dear all, my colleague posted our issue on
>> ??????????????????????? stackoverflow:
>>
>> ??????????????????????? Calling R script from Python does not save log
>> ??????????????????????? file in
>> ??????????????????????? version 4 - Stack Overflow
>> ??????????????????????? [stackoverflow.com/questions...
>> <https://stackoverflow.com/questions/65887485/calling-r-script-from-python-does-not-save-log-file-in-version-4>]
>>
>> ??????????????????????? It is about this kind of call to R:
>>
>> ??????????????????????? R.exe -f code.R --args "~/file.txt" 1>
>> ??????????????????????? "~/log.txt" 2>&1".
>>
>> ??????????????????????? The issue is that the log.txt file is not
>> ??????????????????????? created when
>> ??????????????????????? running R 4.x.x. The same code works perfectly
>> ??????????????????????? fine with
>> ??????????????????????? R 3.6.x.
>>
>> ??????????????????????? Any idea what's going wrong as of version 4? 
>> Regards
>> ??????????????????????? Marcel
>>
>> ??????????????????????? Dear Marcel, I think the solution is 
>> embarrassingly
>> ??????????????????????? simple:
>>
>> ???????????????????????? From the SO post, where she showed a bit more
>> ??????????????????????? detail than you
>> ??????????????????????? show here, it's clear you have confused 
>> 'R.exe' and
>> ??????????????????????? 'Rscript.exe' and what you say above is not 
>> true:
>>
>> ??????????????????????? 'R.exe' was used for R 3.6.0 but for R 4.0.3,
>> ??????????????????????? you/she used
>> ??????????????????????? 'Rscript.exe' instead.
>>
>>
>> ??????????????????????? ... as you've noticed now, they do behave
>> ??????????????????????? differently,
>> ??????????????????????? indeed!
>>
>> ??????????????????????? Well, this was not the solution to their --
>> ??????????????????????? Windows-only -- problem.
>> ??????????????????????? The problem *is* indeed visible if they only use
>> ??????????????????????? R.exe (also
>> ??????????????????????? for R 4.0.3).
>>
>> ??????????????????????? I've commented more on the SO issue (see above),
>> ??????????????????????? notably asking for a *minimal* repr.ex.
>> ??????????????????????? (reproducible example),
>> ??????????????????????? and one *not* using "<YOUR PATH>" and setwd() ..
>>
>>
>> ??????????????????? Isn't this purely a Python or user problem? R
>> ??????????????????? shouldn't process
>> ??????????????????? redirection directives like
>>
>> ??????????????????? 1> "~/log.txt" 2>&1
>>
>> ??????????????????? because it's the shell's job to process those. If
>> ??????????????????? Python is acting as
>> ??????????????????? the shell, it needs to handle those things. If R was
>> ??????????????????? handling the
>> ??????????????????? command via
>>
>>
>> ??????????????? Oops, sent before finishing:
>>
>> ??????????????? If R was handling the command via system() or system2(),
>> ??????????????? it would handle
>> ??????????????? redirection itself. If it was using the Windows-only
>> ??????????????? shell(), it would
>> ??????????????? call cmd.exe (by default) to handle redirection. (This
>> ??????????????? is a difference
>> ??????????????? between R on Windows and R in Unix: in Unix a shell is
>> ??????????????? always used.)
>>
>> ??????????????? Duncan Murdoch
>>
>> ??????????????? ______________________________________________
>> ??????????????? R-help at r-project.org <mailto:R-help at r-project.org>
>> ??????????????? mailing list -- To UNSUBSCRIBE and more, see
>> ??????????????? stat.ethz.ch/mailman/listin...
>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> ??????????????? PLEASE do read the posting guide
>> ??????????????? www.R-project.org/posting-g...
>> <http://www.R-project.org/posting-guide.html>
>> ??????????????? and provide commented, minimal, self-contained,
>> ??????????????? reproducible code.
>>
>>
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From p@ych@o||u @end|ng |rom gm@||@com  Tue Feb  2 15:31:53 2021
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Tue, 2 Feb 2021 09:31:53 -0500
Subject: [R] Alternative to mapply to select samples
Message-ID: <CACCU-vMyrs2A+9Vfmk4COXDozCrFT_RhG5p1k3ZHtibg_RQNfw@mail.gmail.com>

Dear R-Help,

I created a mapply function to select samples from a dataset but are there
any faster ways to do it by avoiding mapply because it is slow and I have a
larger dataset? My goal is to use more matrix / vector operations and less
in terms of lists (the format of the output can be flexible). Ideally, I
would like to stick to base R methods without the aid of parallel process
or packages. Any ideas will be appreciated!

#A list of a set of data to be selected
bl <- list(list(c(1, 2),c(2, 3), c(3, 4), c(4, 5), c(5, 6), c(6, 7), c(7,
8), c(8, 9)),
         list(c(1, 2, 3), c(2, 3, 4), c(3, 4, 5), c(4, 5, 6), c(5, 6, 7),
c(6, 7, 8)),
         list(c(1, 2, 3, 4, 5), c(2, 3, 4, 5, 6), c(3, 4, 5, 6, 7), c(4, 5,
6, 7, 8), c(5, 6, 7, 8, 9)))
#Number of elements to be selected
kn <- c(5, 4, 3)
#Total number of elements in each set
nb <- c(8, 6, 5)
#This output a list but preferably I would like a matrix
bl_func <- function() mapply(function(x, y, z) {
  x[sample.int(y, z, replace = TRUE)]
}, bl, nb, kn, SIMPLIFY = FALSE)

Best,

Chao
?

	[[alternative HTML version deleted]]


From wh|tney@cory @end|ng |rom gm@||@com  Tue Feb  2 12:33:16 2021
From: wh|tney@cory @end|ng |rom gm@||@com (Cory Whitney)
Date: Tue, 2 Feb 2021 12:33:16 +0100
Subject: [R] [R-pkgs] ethnobotanyR 0.1.8
Message-ID: <9491E023-38EC-461C-95E8-81704FD9441F@gmail.com>

The newest release of the ethnobotanyR package (v0.1.8) calculates common quantitative ethnobotany indices to assess the cultural significance of plant species based on informant consensus. The package closely follows two papers, one on cultural importance indices (Tardio and Pardo-de-Santayana 2008) and another on agrobiodiversity valuation (Whitney, Bahati, and Gebauer 2018). The newest version of ethnobotanyR (0.1.8) has been released with a number of new features:

The goal is to provide an easy-to-use platform for ethnobotanists to work with quantitative ethnobotany assessments. 

Install the released version of ethnobotanyR from CRAN with 
install.packages("ethnobotanyR")

Install the working version of ethnobotanyR from GitHub with 
devtools::install_github("CWWhitney/ethnobotanyR")

Vignettes:	https://cran.r-project.org/web/packages/ethnobotanyR/vignettes/ethnobotanyr_vignette.html

Tardio, Javier, and Manuel Pardo-de-Santayana. 2008. ?Cultural Importance Indices: A Comparative Analysis Based on the Useful Wild Plants of Southern Cantabria (Northern Spain) 1.? Economic Botany 62 (1): 24?39.

Whitney, Cory W., Joseph Bahati, and J. Gebauer. 2018. ?Ethnobotany and Agrobiodiversity; Valuation of Plants in the Homegardens of Southwestern Uganda.? Ethnobiology Letters 9 (2): 90?100. https://doi.org/10.14237/ebl.9.2.2018.503.
_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Feb  2 17:01:05 2021
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 2 Feb 2021 17:01:05 +0100
Subject: [R] md5sum issues
Message-ID: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>

Dear useRs,

I have some kind of a weird issue with md5sum() and I'm not sure where I 
should start.

I have a repository on GitHub, with a local Git installation and 
connected with RStudio.
I am working on Windows 10 and a colleague of mine works on Linux.
We both pull the latest commits of all files, but the checksums are 
different.
Even stranger (to me at least), I get a different checksum from the 
local file (downloaded through Git via pulling) and the same file that I 
manually download from GitHub. The checksum of the manual download from 
GitHub is the same as that of my colleague on Linux.
This happens to all text-based files (Rmd, MD, CSV...) but not to 
non-editable files (PDF, XLSX...).

For example (I have shortened the paths):
 > library(tools)

 > md5sum(file.choose()) # local repo
D:\\...\\SSFAcomparisonPaper\\README.md
"e3b08fc2ab8b3c8b57e681f862a77f32"

 > md5sum(file.choose()) # downloaded from GitHub
C:\\Users\\...\\Downloads\\README.md
"05fab51e18b962a9f3266c7b79016ce6"

 > md5sum(file.choose()) # local repo
D:\\...\\SSFAcomparisonPaper\\...\\SSFA_GuineaPigs_plot.pdf
"d9b331642bfd0d192e4eff5808b2a30f"

 > md5sum(file.choose()) # downloaded from GitHub
C:\\Users\\...\\Downloads\\SSFA_GuineaPigs_plot.pdf
"d9b331642bfd0d192e4eff5808b2a30f"

I am not sure whether it is an issue with the algorithm of md5sum(), 
whether it's a R/RStudio/Git/GitHub/Windows issue, so I would be 
grateful if you could help me sorting it out.

Thank you in advance,
Ivan

-- 

Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Feb  2 17:05:56 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 02 Feb 2021 08:05:56 -0800
Subject: [R] md5sum issues
In-Reply-To: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
Message-ID: <9F617264-45DF-4995-97EF-71873D774534@dcn.davis.ca.us>

Sounds like a newline discrepancy issue. Highly unlikely to be an R issue.

On February 2, 2021 8:01:05 AM PST, Ivan Calandra <calandra at rgzm.de> wrote:
>Dear useRs,
>
>I have some kind of a weird issue with md5sum() and I'm not sure where
>I 
>should start.
>
>I have a repository on GitHub, with a local Git installation and 
>connected with RStudio.
>I am working on Windows 10 and a colleague of mine works on Linux.
>We both pull the latest commits of all files, but the checksums are 
>different.
>Even stranger (to me at least), I get a different checksum from the 
>local file (downloaded through Git via pulling) and the same file that
>I 
>manually download from GitHub. The checksum of the manual download from
>
>GitHub is the same as that of my colleague on Linux.
>This happens to all text-based files (Rmd, MD, CSV...) but not to 
>non-editable files (PDF, XLSX...).
>
>For example (I have shortened the paths):
> > library(tools)
>
> > md5sum(file.choose()) # local repo
>D:\\...\\SSFAcomparisonPaper\\README.md
>"e3b08fc2ab8b3c8b57e681f862a77f32"
>
> > md5sum(file.choose()) # downloaded from GitHub
>C:\\Users\\...\\Downloads\\README.md
>"05fab51e18b962a9f3266c7b79016ce6"
>
> > md5sum(file.choose()) # local repo
>D:\\...\\SSFAcomparisonPaper\\...\\SSFA_GuineaPigs_plot.pdf
>"d9b331642bfd0d192e4eff5808b2a30f"
>
> > md5sum(file.choose()) # downloaded from GitHub
>C:\\Users\\...\\Downloads\\SSFA_GuineaPigs_plot.pdf
>"d9b331642bfd0d192e4eff5808b2a30f"
>
>I am not sure whether it is an issue with the algorithm of md5sum(), 
>whether it's a R/RStudio/Git/GitHub/Windows issue, so I would be 
>grateful if you could help me sorting it out.
>
>Thank you in advance,
>Ivan

-- 
Sent from my phone. Please excuse my brevity.


From ho@@@|nmm @end|ng |rom jun|v@edu  Tue Feb  2 17:26:45 2021
From: ho@@@|nmm @end|ng |rom jun|v@edu (Md. Moyazzem Hossain)
Date: Tue, 2 Feb 2021 16:26:45 +0000
Subject: [R] Regarding fitted value
In-Reply-To: <CAJUZ7XTdn2UUEpEZLFViiMuquTFzabKH1NqtiruT8Cs0=b-yjg@mail.gmail.com>
References: <CAO29qn7eZZjsBUtF1y+oZzhkiWi51+Yp46uEVUSAJZedOqtwQA@mail.gmail.com>
 <03978895-a544-c325-ed23-97315e7fc4e1@sapo.pt>
 <CAO29qn5jfkoutyads9b1a=f3_UdfQcvpO-OXqcaEY2sWzcwRyQ@mail.gmail.com>
 <050ce427-2f8a-c973-57a5-8f96124947dd@sapo.pt>
 <CAJUZ7XQmLrpT_v8ztGQEFMPJzew68_O6MRZD6559kWY2B4ae5g@mail.gmail.com>
 <9ff6ebc2-06af-222e-ea8b-abfa52325933@sapo.pt>
 <CAJUZ7XTdn2UUEpEZLFViiMuquTFzabKH1NqtiruT8Cs0=b-yjg@mail.gmail.com>
Message-ID: <CAO29qn4fnc7n30Hgky9eusSa8xCzggbLf_KkqyvSeVx2ygKUMQ@mail.gmail.com>

Dear Partho Sarkar and Rui Barradas

Thanks a lot.

Take care.

On Tue, Feb 2, 2021 at 12:34 PM Partho Sarkar <partho.ss at gmail.com> wrote:

> My pleasure!
>
> *Best regards,*
> *Partho Sarkar*
>
> On Tue, Feb 2, 2021 at 5:55 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> Hello,
>>
>> Thanks for the links, they are very helpful.
>>
>> Rui Barradas
>>
>> ?s 11:36 de 02/02/21, Partho Sarkar escreveu:
>> > In case further clarification is needed, this from Rob Hyndman, author
>> > of the Forecast package, may be helpful:
>> >
>> > "fitted produces one-step in-sample (i.e., training data) "forecasts".
>> > That is, it gives a forecast of observation t using observations up to
>> > time t-1 for each t in the data. ... So fitted(fit) gives one-step
>> > forecasts of observations 1, 2, ... It is possible to produce a
>> > "forecast" for observation 1 as a forecast is simply the expected value
>> > of that observation given the model and any preceding history."
>> >
>> >  From Hyndman's answer in this thread
>> > <a
>> > href="
>> https://stats.stackexchange.com/questions/217955/difference-between-first-one-step-ahead-forecast-and-first-forecast-from-fitted?rq=1
>> ">
>> https://stats.stackexchange.com/questions/217955/difference-between-first-one-step-ahead-forecast-and-first-forecast-from-fitted?rq=1
>> </a>
>> >
>> > See also <a
>> > href="
>> https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/">
>> https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/</a><
>> https://robjhyndman.com/hyndsight/out-of-sample-one-step-forecasts/>
>> >
>> > [A quick search on the stackexchange forum will turn up several similar
>> > questions & answers]
>> >
>> > HTH,
>> >
>> > /
>> > Best regards,
>> > /
>> > /
>> > Partho Sarkar
>> > /
>> >
>> > On Tue, Feb 2, 2021 at 12:28 PM Rui Barradas <ruipbarradas at sapo.pt
>> > <mailto:ruipbarradas at sapo.pt>> wrote:
>> >
>> >     Hello,
>> >
>> >     You get the fitted values for years 2000, ..., 2019.
>> >     Those values are the original series minus the residuals:
>> >
>> >     f <- fitted(model1)
>> >     g <- yy - resid(model1)
>> >     identical(f, g)          # returns TRUE
>> >
>> >
>> >     If you want to *forecast*, this will give you the default h = 10
>> >     forecasts.
>> >
>> >     fc <- forecast(model1)
>> >     plot(fc)
>> >
>> >
>> >     Hope this helps,
>> >
>> >     Rui Barradas
>> >
>> >     ?s 23:31 de 01/02/21, Md. Moyazzem Hossain escreveu:
>> >      > Dear Rui Barradas
>> >      >
>> >      > Thank you very much for your reply.
>> >      >
>> >      > However, still now, I have a confusion whether I get the fitted
>> >     value
>> >      > for the year 2000, 2001, ..., 2020 or 2001, 2002, ..., 2021.
>> >      >
>> >      > Need any more help.
>> >      >
>> >      > Thanks in advance.
>> >      >
>> >      > Md
>> >      >
>> >      > On Thu, Jan 28, 2021 at 4:47 PM Rui Barradas
>> >     <ruipbarradas at sapo.pt <mailto:ruipbarradas at sapo.pt>
>> >      > <mailto:ruipbarradas at sapo.pt <mailto:ruipbarradas at sapo.pt>>>
>> wrote:
>> >      >
>> >      >     Hello,
>> >      >
>> >      >       From help('forecast::fitted.Arima'):
>> >      >
>> >      >     h       The number of steps to forecast ahead.
>> >      >
>> >      >
>> >      >     So you have the default h = 1 step ahead forecast for your
>> model.
>> >      >
>> >      >
>> >      >     Hope this helps,
>> >      >
>> >      >     Rui Barradas
>> >      >
>> >      >     ?s 12:13 de 28/01/21, Md. Moyazzem Hossain escreveu:
>> >      >      >   Dear R-experts,
>> >      >      >
>> >      >      > I hope that all of you are doing well. I got the filled
>> value
>> >      >     from the
>> >      >      > ARIMA model.
>> >      >      >
>> >      >      > I use the following working code. But I am not clear
>> whether I
>> >      >     got the
>> >      >      > fitted value for each *corresponding time* of the original
>> >     data
>> >      >     point like
>> >      >      > 2000, 2001, 2020 or get a *one-step-ahead* fitted value.
>> >     Please
>> >      >     suggest me
>> >      >      > any reference for further reading to my understanding.
>> >      >      >
>> >      >      > ########################
>> >      >      >
>> >      >
>> >
>>  y<-c(120,340,250,430,125,324,763,458,763,905,765,456,234,345,654,654,567,876,907,456)
>> >      >      > library(forecast)
>> >      >      > library(tseries)
>> >      >      > yy=ts(y, start=c(2000,1))
>> >      >      >
>> >      >      > model1=Arima(yy,order=c(0,2,1), lambda = NULL,method='ML')
>> >      >      > model1
>> >      >      >
>> >      >      > f <- fitted( model1)
>> >      >      > plot(yy)
>> >      >      > plot(f)
>> >      >      >
>> >      >      > Thanks in advance.
>> >      >      >
>> >      >
>> >      >
>> >      >
>> >      > --
>> >      > Best Regards,
>> >      > Md. Moyazzem Hossain
>> >      > Associate Professor
>> >      > Department of Statistics
>> >      > Jahangirnagar University
>> >      > Savar, Dhaka-1342
>> >      > Bangladesh
>> >      > Website: http://www.juniv.edu/teachers/hossainmm
>> >      > Research: *Google Scholar
>> >      >
>> >     <https://scholar.google.com/citations?user=-U03XCgAAAAJ&hl=en&oi=ao
>> >*;
>> >      > *ResearchGate <
>> https://www.researchgate.net/profile/Md_Hossain107>*;
>> >      > *ORCID iD <https://orcid.org/0000-0003-3593-6936>*
>> >
>> >     ______________________________________________
>> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>> >     To UNSUBSCRIBE and more, see
>> >     https://stat.ethz.ch/mailman/listinfo/r-help
>> >     PLEASE do read the posting guide
>> >     http://www.R-project.org/posting-guide.html
>> >     and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>

-- 
Best Regards,
Md. Moyazzem Hossain
Associate Professor
Department of Statistics
Jahangirnagar University
Savar, Dhaka-1342
Bangladesh
Website: http://www.juniv.edu/teachers/hossainmm
Research: *Google Scholar
<https://scholar.google.com/citations?user=-U03XCgAAAAJ&hl=en&oi=ao>*;
*ResearchGate
<https://www.researchgate.net/profile/Md_Hossain107>*; *ORCID iD
<https://orcid.org/0000-0003-3593-6936>*

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Tue Feb  2 19:32:39 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Tue, 2 Feb 2021 10:32:39 -0800
Subject: [R] Error when calling (R 4.0.x on Windows) from Python
In-Reply-To: <746561ef-73d9-d87c-cd58-5396dc4fbced@gmail.com>
References: <3cf33078e38cd82eaa62af315c5c6795@mail.infomaniak.com>
 <24591.65302.527022.733577@stat.math.ethz.ch>
 <24593.9866.492194.548636@stat.math.ethz.ch>
 <dce1a81a-a543-bbbc-24f3-54d64eae2b80@gmail.com>
 <aa6df17c-8684-3140-a545-65d217882c1b@gmail.com>
 <CAHqSRuTFc8x=mox=55s7HZHpWeOdzaR_oMev6kv=Yp8XiNzsSQ@mail.gmail.com>
 <37bf94d0-873a-5bef-87ee-60bd572c8545@gmail.com>
 <CAHqSRuSOYk=aWzKg9Ub4LN+hXTZ8ptZDw7gzrxt67957kNDwXQ@mail.gmail.com>
 <25b589b25af628379c5a9ac502580552@mail.infomaniak.com>
 <8721759c-e3d8-5e23-dcb5-89b2d4f00ff0@gmail.com>
 <746561ef-73d9-d87c-cd58-5396dc4fbced@gmail.com>
Message-ID: <CAHqSRuR=5E25uEvF1J=E4eCbLohN3Y7jsULsO35NpnJtLj-dbA@mail.gmail.com>

R/Rterm now has shell-independent ways to specify its standard input
file, --file=file.R, and environment variables, VAR=VALUE.  Should it
also have shell-independent arguments to specify files to contain
stdout and stderr or both?  Then its help message could omit the '>
output' (it can already leave out the '< infile').

The help message could then say that if those arguments are omitted
then Rterm uses stdin, stdout, and stderr.  Thus the user could come
up with the shell syntax if the user needed to use pipes or output
stream merging, etc.

-Bill

On Tue, Feb 2, 2021 at 5:49 AM Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
>
> A reproducible example:
>
> system("\"C:\\Program Files\\R\\R-4.0.3\\bin\\R.exe\" -e commandArgs()
>  >out")  # does not create "out"
> system("\"C:\\Program Files\\R\\R-3.6.3\\bin\\R.exe\" -e commandArgs()
>  >out")  # creates "out"
>
> Note that this does not create "out", either:
>
> system("\"C:\\Program Files\\R\\R-3.6.3\\bin\\x64\\Rterm.exe\" -e
> commandArgs() >out")
>
> I think redirections should be left to the shell, so e.g. those calls
> from Python should use "os.system" if they needed redirection, as Duncan
> suggested.
>
> I see that both R.exe and Rterm.exe give "Usage: Rterm [options] [<
> infile] [> outfile] [EnvVars]", which may be confusing to programmers
> invoking R without a shell, but then talking there about invocation via
> shell could confuse typical users, instead.
>
> My best guess is that the redirection in R.exe in 3.6 worked rather by
> accident, as a consequence of that R.exe internally invoked (and still
> invokes) Rterm.exe via the shell, but R.exe did not protect all
> arguments from expansions from that internal shell invocation. If
> redirection was meant to work without external shell, it would have
> instead been implemented explicitly also in Rterm.exe.
>
> My change 77926 made sure that all arguments to that internal shell
> invocation were protected, following bug reports such as PR#17709, where
> users had "&" in their file names. Therefore, this works, executing file
> code&.r
>
> system("\"C:\\Program Files\\R\\R-4.0.3\\bin\\R.exe\" -f code&.r")
>
> but not with 3.6.3, and I would not be surprised if even more special
> characters became popular, soon.
>
> After all, what if someone wanted to pass an argument to R including
> ">", that should work, too:
>
> ---- t.r ----
> cat("Header: ", commandArgs(TRUE)[1], "\n")
> -------------
>
> system("\"C:\\Program Files\\R\\R-4.0.3\\bin\\R.exe\" -f t.r --args
> <html>") # prints Header:  <html>
> system("\"C:\\Program Files\\R\\R-3.6.3\\bin\\R.exe\" -f t.r --args
> <html>") # fails with  The syntax of the command is incorrect.
>
> So in summary, I don't agree this is a bug.
>
> Best
> Tomas
>
> On 1/29/21 11:19 AM, Duncan Murdoch wrote:
> > On 29/01/2021 3:57 a.m., Marcel Baumgartner wrote:
> >> Dear Bill, Duncan and Martin,
> >>
> >> thanks for your investigation. Can you clarify on next steps? Is this
> >> now an official bug, or have you found a workaround? For your
> >> information: the issue showed up the first time when I called R 4.0.2
> >> from within a software called "IDEA" (from Caseware Analytics), using
> >> their scripting language (similar to Visual Basic). With my colleague
> >> we then simply reproduce the error calling R from Python, so that we
> >> could share it more easily. When we run this command directly on the
> >> CMD in Windows, all works fine. The issue only happens when R is
> >> called within another software.
> >>
> >
> > I would say this is a bug, with two workarounds.  These are only
> > needed (and will only work) on Windows.
> >
> > 1.  If you want to include redirection in the command line, then call
> > cmd.exe yourself, and have it call Rterm.exe.  I think your original
> > command
> >
> > R.exe -f code.R --args "~/file.txt" 1> "~/log.txt" 2>&1"
> >
> > could be written as
> >
> > cmd.exe 1>log.txt 2>&1 /C R.exe -f code.R --args "~/file.txt"
> >
> > (but I haven't tested it).  You could also use the slightly more
> > efficient
> >
> > cmd.exe 1>log.txt 2>&1 /C Rterm.exe -f code.R --args "~/file.txt"
> >
> > if Rterm.exe is on your path; by default I don't think it will be.
> >
> > 2.  Change the Python code to a different function call than
> > subprocess.call.  It should be one that's equivalent to the C system()
> > function; I believe os.system() is what you want, so you'd use
> >
> > os.system("R.exe -f code.R --args "~/file.txt" 1> "~/log.txt" 2>&1")
> >
> > and the redirection would be handled by the implicit shell that is
> > called by os.system.  Again, replacing R.exe by Rterm.exe would be a
> > tiny bit more efficient, but it might not be on the path.
> >
> > Duncan Murdoch
> >
> >> Best regards
> >>
> >> Marcel
> >>
> >>
> >> Le 2021-01-27T23:14:36.000+01:00, Bill Dunlap
> >> <williamwdunlap at gmail.com> a ?crit :
> >>
> >>     I tried the following change, that adds quotes if the argument does
> >>     not include ">".
> >>     Index: front-ends/rcmdfn.c
> >> ===================================================================
> >>     --- front-ends/rcmdfn.c (revision 79883)
> >>     +++ front-ends/rcmdfn.c (working copy)
> >>     @@ -173,9 +173,13 @@
> >>     fprintf(stderr, "command line too long\n");
> >>     return(27);
> >>     }
> >>     - strcat(cmd, "\"");
> >>     + if (!strchr(argv[i], '>')) {
> >>     + strcat(cmd, "\"");
> >>     + }
> >>     strcat(cmd, argv[i]);
> >>     - strcat(cmd, "\"");
> >>     + if (!strchr(argv[i], '>')) {
> >>     + strcat(cmd, "\"");
> >>     + }
> >>     }
> >>     /* the outermost double quotes are needed for cmd.exe */
> >>     strcat(cmd, "\"");
> >>
> >>     It lets the python example work. I am not sure that quoting all the
> >>     arguments buys you much, as shQuote() is still needed for arguments
> >>     that include spaces. E.g., with 3.6.3, 4.0.3, and my development
> >>     build with the above patch we get
> >>
> >>         stopifnot(dir.create(dirname <- file.path(tempfile(), "A
> >>         SPACE"), recursive=TRUE))
> >>         logname <- file.path(dirname, "log.txt")
> >>         unlink(logname)
> >>         system(paste( "C:\\R\\R-3.6.3\\bin\\R.exe --quiet --vanilla -e
> >>         \"commandArgs()\" 1>", logname))
> >>
> >>     ARGUMENT 'SPACE/log.txt' __ignored__
> >>
> >>     [1] 0
> >>
> >>         tryCatch(readLines(logname),
> >> error=function(e)conditionMessage(e))
> >>
> >>     [1] "cannot open the connection"
> >>     Warning message:
> >>     In file(con, "r") :
> >>     cannot open file
> >> 'C:\Users\willi\AppData\Local\Temp\RtmpM5tsC7\file1a1068734a49/A
> >>     SPACE/log.txt': No such file or directory
> >>
> >>
> >>         system(paste( "C:\\R\\R-4.0.3\\bin\\R.exe --quiet --vanilla -e
> >>         \"commandArgs()\" 1>", logname))
> >>         commandArgs()
> >>
> >>     [1] "C:\\R\\R-40~1.3/bin/x64/Rterm.exe"
> >>     [2] "--quiet"
> >>     [3] "--vanilla"
> >>     [4] "-e"
> >>     [5] "commandArgs()"
> >>     [6] "1>"
> >>     [7]
> >> "C:\\Users\\willi\\AppData\\Local\\Temp\\RtmpM5tsC7\\file1a1068734a49/A"
> >>     [8] "SPACE/log.txt"
> >>
> >>
> >>     [1] 0
> >>
> >>         tryCatch(readLines(logname),
> >> error=function(e)conditionMessage(e))
> >>
> >>     [1] "cannot open the connection"
> >>     Warning message:
> >>     In file(con, "r") :
> >>     cannot open file
> >> 'C:\Users\willi\AppData\Local\Temp\RtmpM5tsC7\file1a1068734a49/A
> >>     SPACE/log.txt': No such file or directory
> >>
> >>
> >>         unlink(logname)
> >>         system(paste(
> >>         "C:\\msys64\\home\\willi\\ucrt3\\r\\trunk\\bin\\R.exe --quiet
> >>         --vanilla -e \"commandArgs()\" 1>", logname))
> >>
> >>     [1] 0
> >>
> >>         tryCatch(readLines(logname),
> >> error=function(e)conditionMessage(e))
> >>
> >>     [1] "cannot open the connection"
> >>     Warning message:
> >>     In file(con, "r") :
> >>     cannot open file
> >> 'C:\Users\willi\AppData\Local\Temp\RtmpM5tsC7\file1a1068734a49/A
> >>     SPACE/log.txt': No such file or directory
> >>
> >>         tryCatch(readLines(sub(" .*$", "", logname)),
> >>         error=function(e)conditionMessage(e))
> >>
> >>     [1] "> commandArgs()"
> >>     "[1]
> >> \"C:\\\\msys64\\\\home\\\\willi\\\\ucrt3\\\\r\\\\trunk/bin/x64/Rterm.exe\""
> >>     [3] "[2] \"--quiet\"
> >>     " "[3] \"--vanilla\"
> >>     "
> >>     [5] "[4] \"-e\"
> >>     " "[5] \"commandArgs()\"
> >>     "
> >>     [7] "[6] \"SPACE/log.txt\"
> >>     " "> "
> >>     [9] "> "
> >>
> >>
> >>         unlink(logname)
> >>         system(paste(
> >>         "C:\\msys64\\home\\willi\\ucrt3\\r\\trunk\\bin\\R.exe --quiet
> >>         --vanilla -e \"commandArgs()\" 1>", shQuote(logname)))
> >>
> >>     [1] 0
> >>
> >>         tryCatch(readLines(logname),
> >> error=function(e)conditionMessage(e))
> >>
> >>     [1] "> commandArgs()"
> >>     "[1]
> >> \"C:\\\\msys64\\\\home\\\\willi\\\\ucrt3\\\\r\\\\trunk/bin/x64/Rterm.exe\""
> >>     [3] "[2] \"--quiet\"
> >>     " "[3] \"--vanilla\"
> >>     "
> >>     [5] "[4] \"-e\"
> >>     " "[5] \"commandArgs()\"
> >>     "
> >>     [7] "> "
> >>     "> "
> >>
> >>     -Bill
> >>
> >>     On Wed, Jan 27, 2021 at 1:25 PM Duncan Murdoch
> >>     <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
> >>
> >>
> >>         On 27/01/2021 3:40 p.m., Bill Dunlap wrote:
> >>
> >>             I believe the problem is from svn 77925 in
> >>             gnuwin/front-ends/rcmdfn.c,
> >>             which was committed a few days after 3.6.3 was released.
> >>             Rterm used
> >>             to put double quotes around a command line argument only
> >> if it
> >>             contained a space, now it double quotes all arguments. It
> >>             sees shell
> >>             constructs like "1>" and the following file name as
> >>             arguments and
> >>             double quoting them hides them from the shell, leading to
> >> this
> >>             problem. I think we may have to rely on the user supplying
> >>             quotes as
> >>             needed instead of blindly adding them.
> >>
> >>
> >>         Okay, now I see what you mean.
> >>
> >>         If you invoke R using R.exe, it asks cmd.exe to run Rterm.exe,
> >>         so it is
> >>         possible that redirection would be handled.
> >>
> >>         If you invoke R directly using Rterm.exe, then my description
> >>         down below
> >>         would be correct.
> >>
> >>         Duncan Murdoch
> >>
> >>
> >>
> >>             -Bill
> >>
> >>             On Wed, Jan 27, 2021 at 12:28 PM Duncan Murdoch
> >>             <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
> >>             wrote:
> >>
> >>
> >>                 On 27/01/2021 3:17 p.m., Duncan Murdoch wrote:
> >>
> >>                     On 27/01/2021 3:38 a.m., Martin Maechler wrote:
> >>
> >>                                             Martin Maechler
> >>                                             on Tue, 26 Jan 2021 12:37:58
> >>                                             +0100 writes:
> >>
> >>
> >>                                             Marcel Baumgartner
> >>                                             on Tue, 26 Jan 2021 08:55:48
> >>                                             +0100 writes:
> >>
> >>
> >>                         Dear all, my colleague posted our issue on
> >>                         stackoverflow:
> >>
> >>                         Calling R script from Python does not save log
> >>                         file in
> >>                         version 4 - Stack Overflow
> >>                         [stackoverflow.com/questions...
> >> <https://stackoverflow.com/questions/65887485/calling-r-script-from-python-does-not-save-log-file-in-version-4>]
> >>
> >>                         It is about this kind of call to R:
> >>
> >>                         R.exe -f code.R --args "~/file.txt" 1>
> >>                         "~/log.txt" 2>&1".
> >>
> >>                         The issue is that the log.txt file is not
> >>                         created when
> >>                         running R 4.x.x. The same code works perfectly
> >>                         fine with
> >>                         R 3.6.x.
> >>
> >>                         Any idea what's going wrong as of version 4?
> >> Regards
> >>                         Marcel
> >>
> >>                         Dear Marcel, I think the solution is
> >> embarrassingly
> >>                         simple:
> >>
> >>                          From the SO post, where she showed a bit more
> >>                         detail than you
> >>                         show here, it's clear you have confused
> >> 'R.exe' and
> >>                         'Rscript.exe' and what you say above is not
> >> true:
> >>
> >>                         'R.exe' was used for R 3.6.0 but for R 4.0.3,
> >>                         you/she used
> >>                         'Rscript.exe' instead.
> >>
> >>
> >>                         ... as you've noticed now, they do behave
> >>                         differently,
> >>                         indeed!
> >>
> >>                         Well, this was not the solution to their --
> >>                         Windows-only -- problem.
> >>                         The problem *is* indeed visible if they only use
> >>                         R.exe (also
> >>                         for R 4.0.3).
> >>
> >>                         I've commented more on the SO issue (see above),
> >>                         notably asking for a *minimal* repr.ex.
> >>                         (reproducible example),
> >>                         and one *not* using "<YOUR PATH>" and setwd() ..
> >>
> >>
> >>                     Isn't this purely a Python or user problem? R
> >>                     shouldn't process
> >>                     redirection directives like
> >>
> >>                     1> "~/log.txt" 2>&1
> >>
> >>                     because it's the shell's job to process those. If
> >>                     Python is acting as
> >>                     the shell, it needs to handle those things. If R was
> >>                     handling the
> >>                     command via
> >>
> >>
> >>                 Oops, sent before finishing:
> >>
> >>                 If R was handling the command via system() or system2(),
> >>                 it would handle
> >>                 redirection itself. If it was using the Windows-only
> >>                 shell(), it would
> >>                 call cmd.exe (by default) to handle redirection. (This
> >>                 is a difference
> >>                 between R on Windows and R in Unix: in Unix a shell is
> >>                 always used.)
> >>
> >>                 Duncan Murdoch
> >>
> >>                 ______________________________________________
> >>                 R-help at r-project.org <mailto:R-help at r-project.org>
> >>                 mailing list -- To UNSUBSCRIBE and more, see
> >>                 stat.ethz.ch/mailman/listin...
> >> <https://stat.ethz.ch/mailman/listinfo/r-help>
> >>                 PLEASE do read the posting guide
> >>                 www.R-project.org/posting-g...
> >> <http://www.R-project.org/posting-guide.html>
> >>                 and provide commented, minimal, self-contained,
> >>                 reproducible code.
> >>
> >>
> >>
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Feb  2 20:31:53 2021
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 2 Feb 2021 20:31:53 +0100
Subject: [R] Dalex function in mlr3
Message-ID: <CA+nrPnuo3nCUKyAMYTDS-D4k7V+utqjGD+LMqjqeGg90Yky6dw@mail.gmail.com>

Hi to everyone

I just wanted to know if the dalex package of the mlr3 provides the same
functions (i.e. variable importance) as provided by the scott-knott-esd
test?

Warm regards

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Feb  2 23:08:27 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 2 Feb 2021 14:08:27 -0800
Subject: [R] Dalex function in mlr3
In-Reply-To: <CA+nrPnuo3nCUKyAMYTDS-D4k7V+utqjGD+LMqjqeGg90Yky6dw@mail.gmail.com>
References: <CA+nrPnuo3nCUKyAMYTDS-D4k7V+utqjGD+LMqjqeGg90Yky6dw@mail.gmail.com>
Message-ID: <CAGxFJbQ8aA54krGZwH4vQFBSVvGPhQ+4F2pNLATj_YvHiXt-gA@mail.gmail.com>

Please note per the posting guide linked below:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

As you do not appear to have done this -- if you have, please say so -- do
not be surprised if you do not receive (helpful) assistance here. You
might, but .... For perspective, there are about 25,000 R packages "out
there", and this list cannot possibly support them all.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Feb 2, 2021 at 11:32 AM Neha gupta <neha.bologna90 at gmail.com> wrote:

> Hi to everyone
>
> I just wanted to know if the dalex package of the mlr3 provides the same
> functions (i.e. variable importance) as provided by the scott-knott-esd
> test?
>
> Warm regards
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From c@|@ndr@ @end|ng |rom rgzm@de  Wed Feb  3 07:48:38 2021
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Wed, 3 Feb 2021 07:48:38 +0100
Subject: [R] md5sum issues
In-Reply-To: <9F617264-45DF-4995-97EF-71873D774534@dcn.davis.ca.us>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <9F617264-45DF-4995-97EF-71873D774534@dcn.davis.ca.us>
Message-ID: <b3c84d9b-e3ce-f769-672d-261d57f2d6fe@rgzm.de>

Thank you Jeff for the pointer.

If it's not an R issue, I guess it will be difficult to solve...
But maybe there is a workaround using R, like using another function or 
editing the files...? Does anyone have any idea?

Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 02/02/2021 17:05, Jeff Newmiller wrote:
> Sounds like a newline discrepancy issue. Highly unlikely to be an R issue.
>
> On February 2, 2021 8:01:05 AM PST, Ivan Calandra <calandra at rgzm.de> wrote:
>> Dear useRs,
>>
>> I have some kind of a weird issue with md5sum() and I'm not sure where
>> I
>> should start.
>>
>> I have a repository on GitHub, with a local Git installation and
>> connected with RStudio.
>> I am working on Windows 10 and a colleague of mine works on Linux.
>> We both pull the latest commits of all files, but the checksums are
>> different.
>> Even stranger (to me at least), I get a different checksum from the
>> local file (downloaded through Git via pulling) and the same file that
>> I
>> manually download from GitHub. The checksum of the manual download from
>>
>> GitHub is the same as that of my colleague on Linux.
>> This happens to all text-based files (Rmd, MD, CSV...) but not to
>> non-editable files (PDF, XLSX...).
>>
>> For example (I have shortened the paths):
>>> library(tools)
>>> md5sum(file.choose()) # local repo
>> D:\\...\\SSFAcomparisonPaper\\README.md
>> "e3b08fc2ab8b3c8b57e681f862a77f32"
>>
>>> md5sum(file.choose()) # downloaded from GitHub
>> C:\\Users\\...\\Downloads\\README.md
>> "05fab51e18b962a9f3266c7b79016ce6"
>>
>>> md5sum(file.choose()) # local repo
>> D:\\...\\SSFAcomparisonPaper\\...\\SSFA_GuineaPigs_plot.pdf
>> "d9b331642bfd0d192e4eff5808b2a30f"
>>
>>> md5sum(file.choose()) # downloaded from GitHub
>> C:\\Users\\...\\Downloads\\SSFA_GuineaPigs_plot.pdf
>> "d9b331642bfd0d192e4eff5808b2a30f"
>>
>> I am not sure whether it is an issue with the algorithm of md5sum(),
>> whether it's a R/RStudio/Git/GitHub/Windows issue, so I would be
>> grateful if you could help me sorting it out.
>>
>> Thank you in advance,
>> Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Feb  3 08:14:14 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 3 Feb 2021 10:14:14 +0300
Subject: [R] md5sum issues
In-Reply-To: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
Message-ID: <20210203101414.4efa99b8@Tarkus>

On Tue, 2 Feb 2021 17:01:05 +0100
Ivan Calandra <calandra at rgzm.de> wrote:

> This happens to all text-based files (Rmd, MD, CSV...) but not to 
> non-editable files (PDF, XLSX...).

This is probably caused by Git helpfully converting text files from LF
(0x10) line endings to CR LF (0x13 0x10) when checking out the
repository clone on Windows (and back when checking in).

This configuration option is described in Pro Git:
https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb  3 10:06:42 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 3 Feb 2021 04:06:42 -0500
Subject: [R] md5sum issues
In-Reply-To: <20210203101414.4efa99b8@Tarkus>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
Message-ID: <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>

On 03/02/2021 2:14 a.m., Ivan Krylov wrote:
> On Tue, 2 Feb 2021 17:01:05 +0100
> Ivan Calandra <calandra at rgzm.de> wrote:
> 
>> This happens to all text-based files (Rmd, MD, CSV...) but not to
>> non-editable files (PDF, XLSX...).
> 
> This is probably caused by Git helpfully converting text files from LF
> (0x10) line endings to CR LF (0x13 0x10) when checking out the
> repository clone on Windows (and back when checking in).
> 
> This configuration option is described in Pro Git:
> https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf

I agree with Ivan K, but don't agree with the advice in that book.

It's best to just leave files alone, not to convert between LF and 
CR-LF.  I don't think this confuses many Windows editors these days, but 
if your editor forces files into CR-LF form, you should fix the editor, 
not try to work around it.

In my opinion everyone should run

  git config --global core.autocrlf false

Some more arguments for this (in the context of Github Actions) are here:

 
https://github.community/t/git-config-core-autocrlf-should-default-to-false/16140

Duncan Murdoch


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Feb  3 10:32:21 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 3 Feb 2021 09:32:21 +0000
Subject: [R] Alternative to mapply to select samples
In-Reply-To: <CACCU-vMyrs2A+9Vfmk4COXDozCrFT_RhG5p1k3ZHtibg_RQNfw@mail.gmail.com>
References: <CACCU-vMyrs2A+9Vfmk4COXDozCrFT_RhG5p1k3ZHtibg_RQNfw@mail.gmail.com>
Message-ID: <87b6a1a54f4b4d05ad4b40cd4c8a1d9c@SRVEXCHCM1302.precheza.cz>

Hi

I am not sure if I understand your function but simple mapply gives you probably the same result and may be quicker.

> set.seed(111)
> blf <- bl_func()
> set.seed(111)
> blm <- mapply(sample, bl, kn, replace=TRUE)
> all.equal(blf, blm)
[1] TRUE
 
> Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Chao Liu
> Sent: Tuesday, February 2, 2021 3:32 PM
> To: r-help <r-help at r-project.org>
> Subject: [R] Alternative to mapply to select samples
> 
> Dear R-Help,
> 
> I created a mapply function to select samples from a dataset but are there
> any faster ways to do it by avoiding mapply because it is slow and I have a
> larger dataset? My goal is to use more matrix / vector operations and less
> in terms of lists (the format of the output can be flexible). Ideally, I
> would like to stick to base R methods without the aid of parallel process
> or packages. Any ideas will be appreciated!
> 
> #A list of a set of data to be selected
> bl <- list(list(c(1, 2),c(2, 3), c(3, 4), c(4, 5), c(5, 6), c(6, 7), c(7,
> 8), c(8, 9)),
>          list(c(1, 2, 3), c(2, 3, 4), c(3, 4, 5), c(4, 5, 6), c(5, 6, 7),
> c(6, 7, 8)),
>          list(c(1, 2, 3, 4, 5), c(2, 3, 4, 5, 6), c(3, 4, 5, 6, 7), c(4, 5,
> 6, 7, 8), c(5, 6, 7, 8, 9)))
> #Number of elements to be selected
> kn <- c(5, 4, 3)
> #Total number of elements in each set
> nb <- c(8, 6, 5)
> #This output a list but preferably I would like a matrix
> bl_func <- function() mapply(function(x, y, z) {
>   x[sample.int(y, z, replace = TRUE)]
> }, bl, nb, kn, SIMPLIFY = FALSE)
> 
> Best,
> 
> Chao
> ?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From c@|@ndr@ @end|ng |rom rgzm@de  Wed Feb  3 10:42:16 2021
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Wed, 3 Feb 2021 10:42:16 +0100
Subject: [R] md5sum issues
In-Reply-To: <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
 <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
Message-ID: <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>

Thank you Ivan and Duncan for your help.

I understand your point Duncan, but the thing is that I do have an issue 
here.
Is it then due to RStudio or even Windows? If it is, I can forget about 
a solution on that end, so I would focus on what I can do, and this Git 
setting seems to be the best place to start.

Or am I missing something (I am still a newbie on these things...)?

Ivan C

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 03/02/2021 10:06, Duncan Murdoch wrote:
> On 03/02/2021 2:14 a.m., Ivan Krylov wrote:
>> On Tue, 2 Feb 2021 17:01:05 +0100
>> Ivan Calandra <calandra at rgzm.de> wrote:
>>
>>> This happens to all text-based files (Rmd, MD, CSV...) but not to
>>> non-editable files (PDF, XLSX...).
>>
>> This is probably caused by Git helpfully converting text files from LF
>> (0x10) line endings to CR LF (0x13 0x10) when checking out the
>> repository clone on Windows (and back when checking in).
>>
>> This configuration option is described in Pro Git:
>> https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf 
>>
>
> I agree with Ivan K, but don't agree with the advice in that book.
>
> It's best to just leave files alone, not to convert between LF and 
> CR-LF.? I don't think this confuses many Windows editors these days, 
> but if your editor forces files into CR-LF form, you should fix the 
> editor, not try to work around it.
>
> In my opinion everyone should run
>
> ?git config --global core.autocrlf false
>
> Some more arguments for this (in the context of Github Actions) are here:
>
>
> https://github.community/t/git-config-core-autocrlf-should-default-to-false/16140 
>
>
> Duncan Murdoch
>
>
>
>
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb  3 11:48:56 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 3 Feb 2021 05:48:56 -0500
Subject: [R] md5sum issues
In-Reply-To: <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
 <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
 <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>
Message-ID: <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>

On 03/02/2021 4:42 a.m., Ivan Calandra wrote:
> Thank you Ivan and Duncan for your help.
> 
> I understand your point Duncan, but the thing is that I do have an issue
> here.
> Is it then due to RStudio or even Windows? If it is, I can forget about
> a solution on that end, so I would focus on what I can do, and this Git
> setting seems to be the best place to start.

In my opinion, you should run

  git config --global core.autocrlf false

in an RStudio terminal session.  That will set the git options so they 
don't mess up the md5sum values.

You should also go to the RStudio options, and in the Code section, 
Saving tab, choose Serialization to be Posix (LF) and default text 
encoding to be UTF-8.

Unfortunately, RStudio will still mess up the .Rproj file (see 
https://github.com/rstudio/rstudio/issues/1929); there's not much you 
can do about that.  Just try not to commit the Windows version to the 
repository if any non-Windows users are sharing it.

But do note that other people have different opinions.  They argue that 
files should be converted to Windows native format by git.  That works 
in some narrow use cases, but as soon as you try to extract a file from 
git on one system and work on it on another, it breaks.

Duncan Murdoch


> 
> Or am I missing something (I am still a newbie on these things...)?
> 
> Ivan C
> 
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
> 
> On 03/02/2021 10:06, Duncan Murdoch wrote:
>> On 03/02/2021 2:14 a.m., Ivan Krylov wrote:
>>> On Tue, 2 Feb 2021 17:01:05 +0100
>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>
>>>> This happens to all text-based files (Rmd, MD, CSV...) but not to
>>>> non-editable files (PDF, XLSX...).
>>>
>>> This is probably caused by Git helpfully converting text files from LF
>>> (0x10) line endings to CR LF (0x13 0x10) when checking out the
>>> repository clone on Windows (and back when checking in).
>>>
>>> This configuration option is described in Pro Git:
>>> https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf
>>>
>>
>> I agree with Ivan K, but don't agree with the advice in that book.
>>
>> It's best to just leave files alone, not to convert between LF and
>> CR-LF.? I don't think this confuses many Windows editors these days,
>> but if your editor forces files into CR-LF form, you should fix the
>> editor, not try to work around it.
>>
>> In my opinion everyone should run
>>
>>  ?git config --global core.autocrlf false
>>
>> Some more arguments for this (in the context of Github Actions) are here:
>>
>>
>> https://github.community/t/git-config-core-autocrlf-should-default-to-false/16140
>>
>>
>> Duncan Murdoch
>>
>>
>>
>>
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From c@|@ndr@ @end|ng |rom rgzm@de  Wed Feb  3 11:55:20 2021
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Wed, 3 Feb 2021 11:55:20 +0100
Subject: [R] md5sum issues
In-Reply-To: <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
 <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
 <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>
 <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>
Message-ID: <a86ff5fc-2e69-aa07-abbc-c24fcfa64cf3@rgzm.de>

Thank you very much Duncan for your help. I'll try that.

Best,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 03/02/2021 11:48, Duncan Murdoch wrote:
> In my opinion, you should run
>
> ?git config --global core.autocrlf false
>
> in an RStudio terminal session.? That will set the git options so they 
> don't mess up the md5sum values.
>
> You should also go to the RStudio options, and in the Code section, 
> Saving tab, choose Serialization to be Posix (LF) and default text 
> encoding to be UTF-8.
>
> Unfortunately, RStudio will still mess up the .Rproj file (see 
> https://github.com/rstudio/rstudio/issues/1929); there's not much you 
> can do about that.? Just try not to commit the Windows version to the 
> repository if any non-Windows users are sharing it.
>
> But do note that other people have different opinions.? They argue 
> that files should be converted to Windows native format by git. That 
> works in some narrow use cases, but as soon as you try to extract a 
> file from git on one system and work on it on another, it breaks.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Feb  3 17:15:16 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 03 Feb 2021 08:15:16 -0800
Subject: [R] md5sum issues
In-Reply-To: <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
 <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
 <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>
 <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>
Message-ID: <0777E250-A553-48E9-89B5-07EE6D47C2BC@dcn.davis.ca.us>

This CR vs LF vs CRLF newline discrepancy has been around since the 70s and the CP/M operating system. And it remains an issue in over-the-wire internet text protocols today, which actually use the CRLF version like Windows. Sorry, UNIX... world domination of LF encoding failed.

The problem with pretending there is no issue as Duncan is advocating is that text is treated differently than binary, and every time you pretend it isn't it comes back to bite you. Applying binary algorithms like MD5 to text is one of these areas where your expectation that this will be successful is what creates the problem in the first place. A similar issue occurs in file encoding.. two files may both contain the word "Hello" but if they are encoded in UCS16 and UTF8 respectively then the MD5 results will be different.

Git does not (currently) support differences in encoding, but it does support text vs non-text (newline) differences because they are unavoidable. Pushing forward with your expectation that text files should compare the same in binary by assuming text will always be like UNIX text just defers the problem for another day.

Since I don't know what problem you are actually trying to solve, I cannot offer a concrete solution. But I would begin by not assuming that MD5 works the same on text and binary files... because it doesn't.

On February 3, 2021 2:48:56 AM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 03/02/2021 4:42 a.m., Ivan Calandra wrote:
>> Thank you Ivan and Duncan for your help.
>> 
>> I understand your point Duncan, but the thing is that I do have an
>issue
>> here.
>> Is it then due to RStudio or even Windows? If it is, I can forget
>about
>> a solution on that end, so I would focus on what I can do, and this
>Git
>> setting seems to be the best place to start.
>
>In my opinion, you should run
>
>  git config --global core.autocrlf false
>
>in an RStudio terminal session.  That will set the git options so they 
>don't mess up the md5sum values.
>
>You should also go to the RStudio options, and in the Code section, 
>Saving tab, choose Serialization to be Posix (LF) and default text 
>encoding to be UTF-8.
>
>Unfortunately, RStudio will still mess up the .Rproj file (see 
>https://github.com/rstudio/rstudio/issues/1929); there's not much you 
>can do about that.  Just try not to commit the Windows version to the 
>repository if any non-Windows users are sharing it.
>
>But do note that other people have different opinions.  They argue that
>
>files should be converted to Windows native format by git.  That works 
>in some narrow use cases, but as soon as you try to extract a file from
>
>git on one system and work on it on another, it breaks.
>
>Duncan Murdoch
>
>
>> 
>> Or am I missing something (I am still a newbie on these things...)?
>> 
>> Ivan C
>> 
>> --
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments
>> MONREPOS Archaeological Research Centre and
>> Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>> 
>> On 03/02/2021 10:06, Duncan Murdoch wrote:
>>> On 03/02/2021 2:14 a.m., Ivan Krylov wrote:
>>>> On Tue, 2 Feb 2021 17:01:05 +0100
>>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>>
>>>>> This happens to all text-based files (Rmd, MD, CSV...) but not to
>>>>> non-editable files (PDF, XLSX...).
>>>>
>>>> This is probably caused by Git helpfully converting text files from
>LF
>>>> (0x10) line endings to CR LF (0x13 0x10) when checking out the
>>>> repository clone on Windows (and back when checking in).
>>>>
>>>> This configuration option is described in Pro Git:
>>>>
>https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf
>>>>
>>>
>>> I agree with Ivan K, but don't agree with the advice in that book.
>>>
>>> It's best to just leave files alone, not to convert between LF and
>>> CR-LF.? I don't think this confuses many Windows editors these days,
>>> but if your editor forces files into CR-LF form, you should fix the
>>> editor, not try to work around it.
>>>
>>> In my opinion everyone should run
>>>
>>>  ?git config --global core.autocrlf false
>>>
>>> Some more arguments for this (in the context of Github Actions) are
>here:
>>>
>>>
>>>
>https://github.community/t/git-config-core-autocrlf-should-default-to-false/16140
>>>
>>>
>>> Duncan Murdoch
>>>
>>>
>>>
>>>
>>>
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From c@|@ndr@ @end|ng |rom rgzm@de  Wed Feb  3 17:25:33 2021
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Wed, 3 Feb 2021 17:25:33 +0100
Subject: [R] md5sum issues
In-Reply-To: <0777E250-A553-48E9-89B5-07EE6D47C2BC@dcn.davis.ca.us>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
 <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
 <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>
 <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>
 <0777E250-A553-48E9-89B5-07EE6D47C2BC@dcn.davis.ca.us>
Message-ID: <bee9c10d-0fe5-072a-134c-6911bb5b2476@rgzm.de>

Dear Jeff,

If I understood you correctly, it makes sense that I explain more about 
my goal here:

I am trying to find ways to have analyses that are as reproducible as 
possible (knowing that it is not going to be perfect). One part is to 
show which file(s) I use as input and what output was created, so that 
potential readers/users of my analysis can check that the file they have 
is indeed the same that I use (and not a corrupted or modified version).
Does that make sense?

And for this purpose, I originally used file information (like creation 
time and so on), but I quickly realized this doesn't help much. Then I 
tried with MD5 and I thought it was solved, but it was obviously not solved.

Duncan solution seems to work (I have not fully checked yet, though), 
but I am really open to other, more robust alternatives.

Thanks for the input!
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 03/02/2021 17:15, Jeff Newmiller wrote:
> This CR vs LF vs CRLF newline discrepancy has been around since the 70s and the CP/M operating system. And it remains an issue in over-the-wire internet text protocols today, which actually use the CRLF version like Windows. Sorry, UNIX... world domination of LF encoding failed.
>
> The problem with pretending there is no issue as Duncan is advocating is that text is treated differently than binary, and every time you pretend it isn't it comes back to bite you. Applying binary algorithms like MD5 to text is one of these areas where your expectation that this will be successful is what creates the problem in the first place. A similar issue occurs in file encoding.. two files may both contain the word "Hello" but if they are encoded in UCS16 and UTF8 respectively then the MD5 results will be different.
>
> Git does not (currently) support differences in encoding, but it does support text vs non-text (newline) differences because they are unavoidable. Pushing forward with your expectation that text files should compare the same in binary by assuming text will always be like UNIX text just defers the problem for another day.
>
> Since I don't know what problem you are actually trying to solve, I cannot offer a concrete solution. But I would begin by not assuming that MD5 works the same on text and binary files... because it doesn't.
>
> On February 3, 2021 2:48:56 AM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 03/02/2021 4:42 a.m., Ivan Calandra wrote:
>>> Thank you Ivan and Duncan for your help.
>>>
>>> I understand your point Duncan, but the thing is that I do have an
>> issue
>>> here.
>>> Is it then due to RStudio or even Windows? If it is, I can forget
>> about
>>> a solution on that end, so I would focus on what I can do, and this
>> Git
>>> setting seems to be the best place to start.
>> In my opinion, you should run
>>
>>   git config --global core.autocrlf false
>>
>> in an RStudio terminal session.  That will set the git options so they
>> don't mess up the md5sum values.
>>
>> You should also go to the RStudio options, and in the Code section,
>> Saving tab, choose Serialization to be Posix (LF) and default text
>> encoding to be UTF-8.
>>
>> Unfortunately, RStudio will still mess up the .Rproj file (see
>> https://github.com/rstudio/rstudio/issues/1929); there's not much you
>> can do about that.  Just try not to commit the Windows version to the
>> repository if any non-Windows users are sharing it.
>>
>> But do note that other people have different opinions.  They argue that
>>
>> files should be converted to Windows native format by git.  That works
>> in some narrow use cases, but as soon as you try to extract a file from
>>
>> git on one system and work on it on another, it breaks.
>>
>> Duncan Murdoch
>>
>>
>>> Or am I missing something (I am still a newbie on these things...)?
>>>
>>> Ivan C
>>>
>>> --
>>> Dr. Ivan Calandra
>>> TraCEr, laboratory for Traceology and Controlled Experiments
>>> MONREPOS Archaeological Research Centre and
>>> Museum for Human Behavioural Evolution
>>> Schloss Monrepos
>>> 56567 Neuwied, Germany
>>> +49 (0) 2631 9772-243
>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>
>>> On 03/02/2021 10:06, Duncan Murdoch wrote:
>>>> On 03/02/2021 2:14 a.m., Ivan Krylov wrote:
>>>>> On Tue, 2 Feb 2021 17:01:05 +0100
>>>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>>>
>>>>>> This happens to all text-based files (Rmd, MD, CSV...) but not to
>>>>>> non-editable files (PDF, XLSX...).
>>>>> This is probably caused by Git helpfully converting text files from
>> LF
>>>>> (0x10) line endings to CR LF (0x13 0x10) when checking out the
>>>>> repository clone on Windows (and back when checking in).
>>>>>
>>>>> This configuration option is described in Pro Git:
>>>>>
>> https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf
>>>> I agree with Ivan K, but don't agree with the advice in that book.
>>>>
>>>> It's best to just leave files alone, not to convert between LF and
>>>> CR-LF.? I don't think this confuses many Windows editors these days,
>>>> but if your editor forces files into CR-LF form, you should fix the
>>>> editor, not try to work around it.
>>>>
>>>> In my opinion everyone should run
>>>>
>>>>   ?git config --global core.autocrlf false
>>>>
>>>> Some more arguments for this (in the context of Github Actions) are
>> here:
>>>>
>>>>
>> https://github.community/t/git-config-core-autocrlf-should-default-to-false/16140
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>>
>>>>
>>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb  3 18:02:47 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 3 Feb 2021 12:02:47 -0500
Subject: [R] md5sum issues
In-Reply-To: <0777E250-A553-48E9-89B5-07EE6D47C2BC@dcn.davis.ca.us>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
 <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
 <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>
 <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>
 <0777E250-A553-48E9-89B5-07EE6D47C2BC@dcn.davis.ca.us>
Message-ID: <1a9495fa-9ad5-4084-203b-123f2f67aaf0@gmail.com>

On 03/02/2021 11:15 a.m., Jeff Newmiller wrote:
> This CR vs LF vs CRLF newline discrepancy has been around since the 70s and the CP/M operating system. And it remains an issue in over-the-wire internet text protocols today, which actually use the CRLF version like Windows. Sorry, UNIX... world domination of LF encoding failed.
> 
> The problem with pretending there is no issue as Duncan is advocating 

That misrepresents my position.  Obviously there's an issue.  I'm 
suggesting a simple solution.

Duncan Murdoch

is that text is treated differently than binary, and every time you 
pretend it isn't it comes back to bite you. Applying binary algorithms 
like MD5 to text is one of these areas where your expectation that this 
will be successful is what creates the problem in the first place. A 
similar issue occurs in file encoding.. two files may both contain the 
word "Hello" but if they are encoded in UCS16 and UTF8 respectively then 
the MD5 results will be different.
> 
> Git does not (currently) support differences in encoding, but it does support text vs non-text (newline) differences because they are unavoidable. Pushing forward with your expectation that text files should compare the same in binary by assuming text will always be like UNIX text just defers the problem for another day.
> 
> Since I don't know what problem you are actually trying to solve, I cannot offer a concrete solution. But I would begin by not assuming that MD5 works the same on text and binary files... because it doesn't.
> 
> On February 3, 2021 2:48:56 AM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 03/02/2021 4:42 a.m., Ivan Calandra wrote:
>>> Thank you Ivan and Duncan for your help.
>>>
>>> I understand your point Duncan, but the thing is that I do have an
>> issue
>>> here.
>>> Is it then due to RStudio or even Windows? If it is, I can forget
>> about
>>> a solution on that end, so I would focus on what I can do, and this
>> Git
>>> setting seems to be the best place to start.
>>
>> In my opinion, you should run
>>
>>   git config --global core.autocrlf false
>>
>> in an RStudio terminal session.  That will set the git options so they
>> don't mess up the md5sum values.
>>
>> You should also go to the RStudio options, and in the Code section,
>> Saving tab, choose Serialization to be Posix (LF) and default text
>> encoding to be UTF-8.
>>
>> Unfortunately, RStudio will still mess up the .Rproj file (see
>> https://github.com/rstudio/rstudio/issues/1929); there's not much you
>> can do about that.  Just try not to commit the Windows version to the
>> repository if any non-Windows users are sharing it.
>>
>> But do note that other people have different opinions.  They argue that
>>
>> files should be converted to Windows native format by git.  That works
>> in some narrow use cases, but as soon as you try to extract a file from
>>
>> git on one system and work on it on another, it breaks.
>>
>> Duncan Murdoch
>>
>>
>>>
>>> Or am I missing something (I am still a newbie on these things...)?
>>>
>>> Ivan C
>>>
>>> --
>>> Dr. Ivan Calandra
>>> TraCEr, laboratory for Traceology and Controlled Experiments
>>> MONREPOS Archaeological Research Centre and
>>> Museum for Human Behavioural Evolution
>>> Schloss Monrepos
>>> 56567 Neuwied, Germany
>>> +49 (0) 2631 9772-243
>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>
>>> On 03/02/2021 10:06, Duncan Murdoch wrote:
>>>> On 03/02/2021 2:14 a.m., Ivan Krylov wrote:
>>>>> On Tue, 2 Feb 2021 17:01:05 +0100
>>>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>>>
>>>>>> This happens to all text-based files (Rmd, MD, CSV...) but not to
>>>>>> non-editable files (PDF, XLSX...).
>>>>>
>>>>> This is probably caused by Git helpfully converting text files from
>> LF
>>>>> (0x10) line endings to CR LF (0x13 0x10) when checking out the
>>>>> repository clone on Windows (and back when checking in).
>>>>>
>>>>> This configuration option is described in Pro Git:
>>>>>
>> https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf
>>>>>
>>>>
>>>> I agree with Ivan K, but don't agree with the advice in that book.
>>>>
>>>> It's best to just leave files alone, not to convert between LF and
>>>> CR-LF.? I don't think this confuses many Windows editors these days,
>>>> but if your editor forces files into CR-LF form, you should fix the
>>>> editor, not try to work around it.
>>>>
>>>> In my opinion everyone should run
>>>>
>>>>   ?git config --global core.autocrlf false
>>>>
>>>> Some more arguments for this (in the context of Github Actions) are
>> here:
>>>>
>>>>
>>>>
>> https://github.community/t/git-config-core-autocrlf-should-default-to-false/16140
>>>>
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Feb  3 18:05:49 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 03 Feb 2021 09:05:49 -0800
Subject: [R] md5sum issues
In-Reply-To: <bee9c10d-0fe5-072a-134c-6911bb5b2476@rgzm.de>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
 <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
 <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>
 <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>
 <0777E250-A553-48E9-89B5-07EE6D47C2BC@dcn.davis.ca.us>
 <bee9c10d-0fe5-072a-134c-6911bb5b2476@rgzm.de>
Message-ID: <BFB06817-D0D3-4539-980C-2D157C937C2E@dcn.davis.ca.us>

Well, you can use binary input files like RDS, qs, or parquet. But you already have your code and data in Git, so checking your input is redundant... just put in a binary output reference file and a test that verifies it.

On February 3, 2021 8:25:33 AM PST, Ivan Calandra <calandra at rgzm.de> wrote:
>Dear Jeff,
>
>If I understood you correctly, it makes sense that I explain more about
>
>my goal here:
>
>I am trying to find ways to have analyses that are as reproducible as 
>possible (knowing that it is not going to be perfect). One part is to 
>show which file(s) I use as input and what output was created, so that 
>potential readers/users of my analysis can check that the file they
>have 
>is indeed the same that I use (and not a corrupted or modified
>version).
>Does that make sense?
>
>And for this purpose, I originally used file information (like creation
>
>time and so on), but I quickly realized this doesn't help much. Then I 
>tried with MD5 and I thought it was solved, but it was obviously not
>solved.
>
>Duncan solution seems to work (I have not fully checked yet, though), 
>but I am really open to other, more robust alternatives.
>
>Thanks for the input!
>Ivan
>
>--
>Dr. Ivan Calandra
>TraCEr, laboratory for Traceology and Controlled Experiments
>MONREPOS Archaeological Research Centre and
>Museum for Human Behavioural Evolution
>Schloss Monrepos
>56567 Neuwied, Germany
>+49 (0) 2631 9772-243
>https://www.researchgate.net/profile/Ivan_Calandra
>
>On 03/02/2021 17:15, Jeff Newmiller wrote:
>> This CR vs LF vs CRLF newline discrepancy has been around since the
>70s and the CP/M operating system. And it remains an issue in
>over-the-wire internet text protocols today, which actually use the
>CRLF version like Windows. Sorry, UNIX... world domination of LF
>encoding failed.
>>
>> The problem with pretending there is no issue as Duncan is advocating
>is that text is treated differently than binary, and every time you
>pretend it isn't it comes back to bite you. Applying binary algorithms
>like MD5 to text is one of these areas where your expectation that this
>will be successful is what creates the problem in the first place. A
>similar issue occurs in file encoding.. two files may both contain the
>word "Hello" but if they are encoded in UCS16 and UTF8 respectively
>then the MD5 results will be different.
>>
>> Git does not (currently) support differences in encoding, but it does
>support text vs non-text (newline) differences because they are
>unavoidable. Pushing forward with your expectation that text files
>should compare the same in binary by assuming text will always be like
>UNIX text just defers the problem for another day.
>>
>> Since I don't know what problem you are actually trying to solve, I
>cannot offer a concrete solution. But I would begin by not assuming
>that MD5 works the same on text and binary files... because it doesn't.
>>
>> On February 3, 2021 2:48:56 AM PST, Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>>> On 03/02/2021 4:42 a.m., Ivan Calandra wrote:
>>>> Thank you Ivan and Duncan for your help.
>>>>
>>>> I understand your point Duncan, but the thing is that I do have an
>>> issue
>>>> here.
>>>> Is it then due to RStudio or even Windows? If it is, I can forget
>>> about
>>>> a solution on that end, so I would focus on what I can do, and this
>>> Git
>>>> setting seems to be the best place to start.
>>> In my opinion, you should run
>>>
>>>   git config --global core.autocrlf false
>>>
>>> in an RStudio terminal session.  That will set the git options so
>they
>>> don't mess up the md5sum values.
>>>
>>> You should also go to the RStudio options, and in the Code section,
>>> Saving tab, choose Serialization to be Posix (LF) and default text
>>> encoding to be UTF-8.
>>>
>>> Unfortunately, RStudio will still mess up the .Rproj file (see
>>> https://github.com/rstudio/rstudio/issues/1929); there's not much
>you
>>> can do about that.  Just try not to commit the Windows version to
>the
>>> repository if any non-Windows users are sharing it.
>>>
>>> But do note that other people have different opinions.  They argue
>that
>>>
>>> files should be converted to Windows native format by git.  That
>works
>>> in some narrow use cases, but as soon as you try to extract a file
>from
>>>
>>> git on one system and work on it on another, it breaks.
>>>
>>> Duncan Murdoch
>>>
>>>
>>>> Or am I missing something (I am still a newbie on these things...)?
>>>>
>>>> Ivan C
>>>>
>>>> --
>>>> Dr. Ivan Calandra
>>>> TraCEr, laboratory for Traceology and Controlled Experiments
>>>> MONREPOS Archaeological Research Centre and
>>>> Museum for Human Behavioural Evolution
>>>> Schloss Monrepos
>>>> 56567 Neuwied, Germany
>>>> +49 (0) 2631 9772-243
>>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>>
>>>> On 03/02/2021 10:06, Duncan Murdoch wrote:
>>>>> On 03/02/2021 2:14 a.m., Ivan Krylov wrote:
>>>>>> On Tue, 2 Feb 2021 17:01:05 +0100
>>>>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>>>>
>>>>>>> This happens to all text-based files (Rmd, MD, CSV...) but not
>to
>>>>>>> non-editable files (PDF, XLSX...).
>>>>>> This is probably caused by Git helpfully converting text files
>from
>>> LF
>>>>>> (0x10) line endings to CR LF (0x13 0x10) when checking out the
>>>>>> repository clone on Windows (and back when checking in).
>>>>>>
>>>>>> This configuration option is described in Pro Git:
>>>>>>
>>>
>https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf
>>>>> I agree with Ivan K, but don't agree with the advice in that book.
>>>>>
>>>>> It's best to just leave files alone, not to convert between LF and
>>>>> CR-LF.? I don't think this confuses many Windows editors these
>days,
>>>>> but if your editor forces files into CR-LF form, you should fix
>the
>>>>> editor, not try to work around it.
>>>>>
>>>>> In my opinion everyone should run
>>>>>
>>>>>   ?git config --global core.autocrlf false
>>>>>
>>>>> Some more arguments for this (in the context of Github Actions)
>are
>>> here:
>>>>>
>>>>>
>>>
>https://github.community/t/git-config-core-autocrlf-should-default-to-false/16140
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From c@|@ndr@ @end|ng |rom rgzm@de  Thu Feb  4 10:04:54 2021
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 4 Feb 2021 10:04:54 +0100
Subject: [R] md5sum issues
In-Reply-To: <BN6PR2201MB1553BA63B953880251A4E14ACFB49@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <59c03413-44f8-e142-8958-a5a95943e1d9@rgzm.de>
 <20210203101414.4efa99b8@Tarkus>
 <0743a7cd-37f3-a5d1-d571-06a12b7931e3@gmail.com>
 <318f6202-379f-0baf-15b9-b6271e52cfab@rgzm.de>
 <71a76250-b455-6bd0-0243-d6f5700ee904@gmail.com>
 <0777E250-A553-48E9-89B5-07EE6D47C2BC@dcn.davis.ca.us>
 <bee9c10d-0fe5-072a-134c-6911bb5b2476@rgzm.de>
 <BN6PR2201MB1553BA63B953880251A4E14ACFB49@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <7dca6226-1623-fe27-ae4c-8adcd356d028@rgzm.de>

Dear Tim, Jeff, Duncan and Ivan,

Thank you all for your input! Actually, I am already doing what Tim 
suggested, and as Jeff said, using the checksums is redundant since I 
use Git already (which does a better job).

So I've decided to just remove the checksums from my scripts, and to 
revert the RStudio settings to default but use `git config --global 
core.autocrlf true` as mentioned in the Git guide for better 
compatibility with other platforms. I might change that in the future 
but I prefer adjusting Git rather than RStudio because I do not only use 
RStudio (I use it for R, but not necessarily or exclusively for other 
projects).

Best wishes,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 03/02/2021 18:07, Ebert,Timothy Aaron wrote:
> Dear Ivan,
> Why not put your data file and analysis program into one folder and then provide enough description (including raw output) to enable someone to run the program (a read me file). This includes all the packages loaded into your version of R, file names, file types, and the logic behind the program. The raw output will help people check that their version is working (as you have indicated). If your data or results are critical then someone will figure out an update to keep things working on the computers of the future. Good documentation and labeling is a better path to long term reproducibility than trying to make everything generic. I tend to add documentation within a program as much as writing separate read me files.
>     R lends itself to this paradigm more than others, but many programs require that the person first have a copy of some proprietary software. I am not about to buy SPSS, but I will agree on principle that the SPSS code represents reproducible science. If I really care I will translate the SPSS code into a language that I can use.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Calandra
> Sent: Wednesday, February 3, 2021 11:26 AM
> To: r-help at r-project.org
> Subject: Re: [R] md5sum issues
>
> [External Email]
>
> Dear Jeff,
>
> If I understood you correctly, it makes sense that I explain more about my goal here:
>
> I am trying to find ways to have analyses that are as reproducible as possible (knowing that it is not going to be perfect). One part is to show which file(s) I use as input and what output was created, so that potential readers/users of my analysis can check that the file they have is indeed the same that I use (and not a corrupted or modified version).
> Does that make sense?
>
> And for this purpose, I originally used file information (like creation time and so on), but I quickly realized this doesn't help much. Then I tried with MD5 and I thought it was solved, but it was obviously not solved.
>
> Duncan solution seems to work (I have not fully checked yet, though), but I am really open to other, more robust alternatives.
>
> Thanks for the input!
> Ivan
>
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS Archaeological Research Centre and Museum for Human Behavioural Evolution Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://urldefense.proofpoint.com/v2/url?u=https-3A__www.researchgate.net_profile_Ivan-5FCalandra&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=EiZdNX4gKQm1kXIBD7w1MyjaAT7f3s-tk9mpNNCKW2U&e=
>
> On 03/02/2021 17:15, Jeff Newmiller wrote:
>> This CR vs LF vs CRLF newline discrepancy has been around since the 70s and the CP/M operating system. And it remains an issue in over-the-wire internet text protocols today, which actually use the CRLF version like Windows. Sorry, UNIX... world domination of LF encoding failed.
>>
>> The problem with pretending there is no issue as Duncan is advocating is that text is treated differently than binary, and every time you pretend it isn't it comes back to bite you. Applying binary algorithms like MD5 to text is one of these areas where your expectation that this will be successful is what creates the problem in the first place. A similar issue occurs in file encoding.. two files may both contain the word "Hello" but if they are encoded in UCS16 and UTF8 respectively then the MD5 results will be different.
>>
>> Git does not (currently) support differences in encoding, but it does support text vs non-text (newline) differences because they are unavoidable. Pushing forward with your expectation that text files should compare the same in binary by assuming text will always be like UNIX text just defers the problem for another day.
>>
>> Since I don't know what problem you are actually trying to solve, I cannot offer a concrete solution. But I would begin by not assuming that MD5 works the same on text and binary files... because it doesn't.
>>
>> On February 3, 2021 2:48:56 AM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> On 03/02/2021 4:42 a.m., Ivan Calandra wrote:
>>>> Thank you Ivan and Duncan for your help.
>>>>
>>>> I understand your point Duncan, but the thing is that I do have an
>>> issue
>>>> here.
>>>> Is it then due to RStudio or even Windows? If it is, I can forget
>>> about
>>>> a solution on that end, so I would focus on what I can do, and this
>>> Git
>>>> setting seems to be the best place to start.
>>> In my opinion, you should run
>>>
>>>    git config --global core.autocrlf false
>>>
>>> in an RStudio terminal session.  That will set the git options so
>>> they don't mess up the md5sum values.
>>>
>>> You should also go to the RStudio options, and in the Code section,
>>> Saving tab, choose Serialization to be Posix (LF) and default text
>>> encoding to be UTF-8.
>>>
>>> Unfortunately, RStudio will still mess up the .Rproj file (see
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_rstud
>>> io_rstudio_issues_1929&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVe
>>> AsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=ruLgGdq-VfeMEeCAbfLgxe2bq6rlBB_wvO_A40iyuFk&e= ); there's not much you can do about that.  Just try not to commit the Windows version to the repository if any non-Windows users are sharing it.
>>>
>>> But do note that other people have different opinions.  They argue
>>> that
>>>
>>> files should be converted to Windows native format by git.  That
>>> works in some narrow use cases, but as soon as you try to extract a
>>> file from
>>>
>>> git on one system and work on it on another, it breaks.
>>>
>>> Duncan Murdoch
>>>
>>>
>>>> Or am I missing something (I am still a newbie on these things...)?
>>>>
>>>> Ivan C
>>>>
>>>> --
>>>> Dr. Ivan Calandra
>>>> TraCEr, laboratory for Traceology and Controlled Experiments
>>>> MONREPOS Archaeological Research Centre and Museum for Human
>>>> Behavioural Evolution Schloss Monrepos
>>>> 56567 Neuwied, Germany
>>>> +49 (0) 2631 9772-243
>>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__www.researchgat
>>>> e.net_profile_Ivan-5FCalandra&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9P
>>>> EhQh2kVeAsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s
>>>> =EiZdNX4gKQm1kXIBD7w1MyjaAT7f3s-tk9mpNNCKW2U&e=
>>>>
>>>> On 03/02/2021 10:06, Duncan Murdoch wrote:
>>>>> On 03/02/2021 2:14 a.m., Ivan Krylov wrote:
>>>>>> On Tue, 2 Feb 2021 17:01:05 +0100
>>>>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>>>>
>>>>>>> This happens to all text-based files (Rmd, MD, CSV...) but not to
>>>>>>> non-editable files (PDF, XLSX...).
>>>>>> This is probably caused by Git helpfully converting text files
>>>>>> from
>>> LF
>>>>>> (0x10) line endings to CR LF (0x13 0x10) when checking out the
>>>>>> repository clone on Windows (and back when checking in).
>>>>>>
>>>>>> This configuration option is described in Pro Git:
>>>>>>
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__git-2Dscm.com_bo
>>> ok_en_v2_Customizing-2DGit-2DGit-2DConfiguration-23-5Fcore-5Fautocrlf
>>> &d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=ibNvoty
>>> I5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=ZRHfdIX9MHy0op06VvZuG01oy2zYte
>>> 5uCSDnCUmwQfk&e=
>>>>> I agree with Ivan K, but don't agree with the advice in that book.
>>>>>
>>>>> It's best to just leave files alone, not to convert between LF and
>>>>> CR-LF.  I don't think this confuses many Windows editors these
>>>>> days, but if your editor forces files into CR-LF form, you should
>>>>> fix the editor, not try to work around it.
>>>>>
>>>>> In my opinion everyone should run
>>>>>
>>>>>     git config --global core.autocrlf false
>>>>>
>>>>> Some more arguments for this (in the context of Github Actions) are
>>> here:
>>>>>
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.community
>>> _t_git-2Dconfig-2Dcore-2Dautocrlf-2Dshould-2Ddefault-2Dto-2Dfalse_161
>>> 40&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=ibNvo
>>> tyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=unUVOo2qDSwSwD9el-0TZK15ERlM
>>> sU-fmqQ7TQ36LxE&e=
>>>>> Duncan Murdoch
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_ma
>>>> ilman_listinfo_r-2Dhelp&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2k
>>>> VeAsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=65-81
>>>> xtWqRiX3c1BKHs8sst32wKQHJ4tdVabERDDGnE&e=
>>>> PLEASE do read the posting guide
>>> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.o
>>> rg_posting-2Dguide.html&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kV
>>> eAsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=m215LP3
>>> f7naPvS2_dxjXoVfkxhuWcn3VpBDGrGlhKmY&e=
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mai
>>> lman_listinfo_r-2Dhelp&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVe
>>> AsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=65-81xtW
>>> qRiX3c1BKHs8sst32wKQHJ4tdVabERDDGnE&e=
>>> PLEASE do read the posting guide
>>> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.o
>>> rg_posting-2Dguide.html&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kV
>>> eAsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=m215LP3
>>> f7naPvS2_dxjXoVfkxhuWcn3VpBDGrGlhKmY&e=
>>> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=65-81xtWqRiX3c1BKHs8sst32wKQHJ4tdVabERDDGnE&e=
> PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIDaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=ibNvotyI5H_gn8tI80BOPNvA_3I0hXaKn8B38TS_yLY&s=m215LP3f7naPvS2_dxjXoVfkxhuWcn3VpBDGrGlhKmY&e=
> and provide commented, minimal, self-contained, reproducible code.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Feb  4 16:32:56 2021
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 4 Feb 2021 16:32:56 +0100
Subject: [R] Different files for train and test data
Message-ID: <CA+nrPnu4H2bowZgWo7U1XpASZdoq95_q0WO80NbVBLpnq7m=Rw@mail.gmail.com>

Hi

I have two files of my data: part1 and part2. I used part1 to train and
test my data and got the RMSE value. Now I need to compare my obtained
result (RMSE value) with unseen data i.e. part2 of data. How can I use the
same training data of part1 and part2 data as test data.

I am using caret package.

d=readARFF("part1.arff")
index <- createDataPartition(d$price, p = .70,list = FALSE)
tr <- d[index, ]
ts <- d[-index, ]
......
.....
.....
.....
model <-train(price ~ ., data = tr,
method = "nnet",
metric = "RMSE",
trControl = ctr)

	[[alternative HTML version deleted]]


From p@ych@o||u @end|ng |rom gm@||@com  Thu Feb  4 17:03:51 2021
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Thu, 4 Feb 2021 11:03:51 -0500
Subject: [R] Alternative to mapply to select samples
In-Reply-To: <87b6a1a54f4b4d05ad4b40cd4c8a1d9c@SRVEXCHCM1302.precheza.cz>
References: <CACCU-vMyrs2A+9Vfmk4COXDozCrFT_RhG5p1k3ZHtibg_RQNfw@mail.gmail.com>
 <87b6a1a54f4b4d05ad4b40cd4c8a1d9c@SRVEXCHCM1302.precheza.cz>
Message-ID: <CACCU-vOr7f+cZaeXHitLEcM4hW3S=P=0qekENyF8JLtZgBBKWg@mail.gmail.com>

Thank you for your input, Petr. I will give it a try.

Best,

Chao
?

On Wed, Feb 3, 2021 at 4:32 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hi
>
> I am not sure if I understand your function but simple mapply gives you
> probably the same result and may be quicker.
>
> > set.seed(111)
> > blf <- bl_func()
> > set.seed(111)
> > blm <- mapply(sample, bl, kn, replace=TRUE)
> > all.equal(blf, blm)
> [1] TRUE
>
> > Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Chao Liu
> > Sent: Tuesday, February 2, 2021 3:32 PM
> > To: r-help <r-help at r-project.org>
> > Subject: [R] Alternative to mapply to select samples
> >
> > Dear R-Help,
> >
> > I created a mapply function to select samples from a dataset but are
> there
> > any faster ways to do it by avoiding mapply because it is slow and I
> have a
> > larger dataset? My goal is to use more matrix / vector operations and
> less
> > in terms of lists (the format of the output can be flexible). Ideally, I
> > would like to stick to base R methods without the aid of parallel process
> > or packages. Any ideas will be appreciated!
> >
> > #A list of a set of data to be selected
> > bl <- list(list(c(1, 2),c(2, 3), c(3, 4), c(4, 5), c(5, 6), c(6, 7), c(7,
> > 8), c(8, 9)),
> >          list(c(1, 2, 3), c(2, 3, 4), c(3, 4, 5), c(4, 5, 6), c(5, 6, 7),
> > c(6, 7, 8)),
> >          list(c(1, 2, 3, 4, 5), c(2, 3, 4, 5, 6), c(3, 4, 5, 6, 7), c(4,
> 5,
> > 6, 7, 8), c(5, 6, 7, 8, 9)))
> > #Number of elements to be selected
> > kn <- c(5, 4, 3)
> > #Total number of elements in each set
> > nb <- c(8, 6, 5)
> > #This output a list but preferably I would like a matrix
> > bl_func <- function() mapply(function(x, y, z) {
> >   x[sample.int(y, z, replace = TRUE)]
> > }, bl, nb, kn, SIMPLIFY = FALSE)
> >
> > Best,
> >
> > Chao
> > ?
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@hmood@n@der@n @end|ng |rom ugent@be  Thu Feb  4 14:07:02 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Thu, 4 Feb 2021 13:07:02 +0000
Subject: [R] Working with FactoMineR
Message-ID: <d197ff24519d42deb7fd39f5ae89567d@ugent.be>

Hi,

I tried to run the HCPC example [1] in the online R [2], but got an error:



library(FactoMineR)
data(tea)
res.mca = MCA(tea, ncp=20, quanti.sup=19, quali.sup=c(20:36), graph=FALSE)
res.hcpc = HCPC(res.mca)



Result:

[1] "Click on the graph to cut the tree"
Error in while (coupe$y < min(t$tree$height)) { :
  argument is of length zero
Calls: HCPC
Execution halted


[1] "Click on the graph to cut the tree"

Error in while (coupe$y < min(t$tree$height)) { :

argument is of length zero

Calls: HCPC

Execution halted



May I know how to fix that?



[1] http://factominer.free.fr/factomethods/hierarchical-clustering-on-principal-components.html

[2] https://rdrr.io/snippets/


Regards,
Mahmood

	[[alternative HTML version deleted]]


From @rm@ndre@ @end|ng |rom gm@||@com  Thu Feb  4 18:36:03 2021
From: @rm@ndre@ @end|ng |rom gm@||@com (=?utf-8?B?QW5kcsOpcyBBcmFnw7Nu?=)
Date: Thu, 4 Feb 2021 11:36:03 -0600
Subject: [R] Working with FactoMineR
In-Reply-To: <d197ff24519d42deb7fd39f5ae89567d@ugent.be>
References: <d197ff24519d42deb7fd39f5ae89567d@ugent.be>
Message-ID: <A1A61E83-8086-4BD5-BEB5-8DBAA8DAEDBA@gmail.com>

Hi,

Could you send a sample of your data frame?

Andr?s



> El 4 feb 2021, a las 7:07, Mahmood Naderan-Tahan <mahmood.naderan at ugent.be> escribi?:
> 
> Hi,
> 
> I tried to run the HCPC example [1] in the online R [2], but got an error:
> 
> 
> 
> library(FactoMineR)
> data(tea)
> res.mca = MCA(tea, ncp=20, quanti.sup=19, quali.sup=c(20:36), graph=FALSE)
> res.hcpc = HCPC(res.mca)
> 
> 
> 
> Result:
> 
> [1] "Click on the graph to cut the tree"
> Error in while (coupe$y < min(t$tree$height)) { :
>  argument is of length zero
> Calls: HCPC
> Execution halted
> 
> 
> [1] "Click on the graph to cut the tree"
> 
> Error in while (coupe$y < min(t$tree$height)) { :
> 
> argument is of length zero
> 
> Calls: HCPC
> 
> Execution halted
> 
> 
> 
> May I know how to fix that?
> 
> 
> 
> [1] http://factominer.free.fr/factomethods/hierarchical-clustering-on-principal-components.html
> 
> [2] https://rdrr.io/snippets/
> 
> 
> Regards,
> Mahmood
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Feb  4 19:06:21 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 4 Feb 2021 10:06:21 -0800
Subject: [R] Working with FactoMineR
In-Reply-To: <d197ff24519d42deb7fd39f5ae89567d@ugent.be>
References: <d197ff24519d42deb7fd39f5ae89567d@ugent.be>
Message-ID: <CAHqSRuRYbrW7usqYcnaRLHWjLKVJhWNFSnekFA0y0D8UoTT9eA@mail.gmail.com>

This will happen if you select no points when it asks you to 'click on
the graph' (to select the level at which to cut the tree).  On Windows
you can select no points by right clicking and selecting 'Stop' from
the menu that pops up.  RStudio may have a different way to select no
points.

-Bill

On Thu, Feb 4, 2021 at 9:04 AM Mahmood Naderan-Tahan
<mahmood.naderan at ugent.be> wrote:
>
> Hi,
>
> I tried to run the HCPC example [1] in the online R [2], but got an error:
>
>
>
> library(FactoMineR)
> data(tea)
> res.mca = MCA(tea, ncp=20, quanti.sup=19, quali.sup=c(20:36), graph=FALSE)
> res.hcpc = HCPC(res.mca)
>
>
>
> Result:
>
> [1] "Click on the graph to cut the tree"
> Error in while (coupe$y < min(t$tree$height)) { :
>   argument is of length zero
> Calls: HCPC
> Execution halted
>
>
> [1] "Click on the graph to cut the tree"
>
> Error in while (coupe$y < min(t$tree$height)) { :
>
> argument is of length zero
>
> Calls: HCPC
>
> Execution halted
>
>
>
> May I know how to fix that?
>
>
>
> [1] http://factominer.free.fr/factomethods/hierarchical-clustering-on-principal-components.html
>
> [2] https://rdrr.io/snippets/
>
>
> Regards,
> Mahmood
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@hmood@n@der@n @end|ng |rom ugent@be  Thu Feb  4 20:45:17 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Thu, 4 Feb 2021 19:45:17 +0000
Subject: [R] Working with FactoMineR
In-Reply-To: <CAHqSRuRYbrW7usqYcnaRLHWjLKVJhWNFSnekFA0y0D8UoTT9eA@mail.gmail.com>
References: <d197ff24519d42deb7fd39f5ae89567d@ugent.be>,
 <CAHqSRuRYbrW7usqYcnaRLHWjLKVJhWNFSnekFA0y0D8UoTT9eA@mail.gmail.com>
Message-ID: <5276b7df6a2640c4a79cccdae124083d@ugent.be>

OK . Thanks for that.


Regards,
Mahmood

________________________________
From: Bill Dunlap <williamwdunlap at gmail.com>
Sent: Thursday, February 4, 2021 7:06:21 PM
To: Mahmood Naderan-Tahan
Cc: r-help at r-project.org
Subject: Re: [R] Working with FactoMineR

This will happen if you select no points when it asks you to 'click on
the graph' (to select the level at which to cut the tree).  On Windows
you can select no points by right clicking and selecting 'Stop' from
the menu that pops up.  RStudio may have a different way to select no
points.

-Bill

On Thu, Feb 4, 2021 at 9:04 AM Mahmood Naderan-Tahan
<mahmood.naderan at ugent.be> wrote:
>
> Hi,
>
> I tried to run the HCPC example [1] in the online R [2], but got an error:
>
>
>
> library(FactoMineR)
> data(tea)
> res.mca = MCA(tea, ncp=20, quanti.sup=19, quali.sup=c(20:36), graph=FALSE)
> res.hcpc = HCPC(res.mca)
>
>
>
> Result:
>
> [1] "Click on the graph to cut the tree"
> Error in while (coupe$y < min(t$tree$height)) { :
>   argument is of length zero
> Calls: HCPC
> Execution halted
>
>
> [1] "Click on the graph to cut the tree"
>
> Error in while (coupe$y < min(t$tree$height)) { :
>
> argument is of length zero
>
> Calls: HCPC
>
> Execution halted
>
>
>
> May I know how to fix that?
>
>
>
> [1] http://factominer.free.fr/factomethods/hierarchical-clustering-on-principal-components.html
>
> [2] https://rdrr.io/snippets/
>
>
> Regards,
> Mahmood
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From |@heemj@n93 @end|ng |rom y@hoo@com  Thu Feb  4 21:08:22 2021
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Thu, 4 Feb 2021 20:08:22 +0000 (UTC)
Subject: [R] forecast accuracy
References: <2109165575.1824410.1612469302890.ref@mail.yahoo.com>
Message-ID: <2109165575.1824410.1612469302890@mail.yahoo.com>

I am working in the functional time series, I obtain the one year ahead forecast in the functional format, Know i want to forecast accuracy for example mean absolute percentage error in R, please help how i do this in R


	[[alternative HTML version deleted]]


From |uc@@p@@@@|@cqu@ @end|ng |rom un|rom@1@|t  Thu Feb  4 20:39:51 2021
From: |uc@@p@@@@|@cqu@ @end|ng |rom un|rom@1@|t (Luca Passalacqua)
Date: Thu, 4 Feb 2021 20:39:51 +0100
Subject: [R] uint8
Message-ID: <CAGHVBE7_Pm9Fkg4pE+9Fjhi9Fn_V8S8WoQSBA6tDV+As862VEQ@mail.gmail.com>

Dear R users,

 I am trying to join two 8 bit integers, as defined by the
"coolbutuseless/uint8" package,
without success:

> library(uint8)

> x1 = uint8(3)> x1[1] = as.uint8(1)
> x1[2] = as.uint8(2)> x2 = uint8(3)> x2[1] = as.uint8(2)> x1[1] 1 2 0> x2[1] 2 0 0> xx = c(x1,x2)> xx[1] 01 02 00 02 00 00


In the real application the first array (x1) is extremely large (order
15-20 Gbytes)
while the second is relatively small, so that I cannot afford, given my RAM,
to define a third array, as

> x3 = uint8(length(x1)+length(x2))

and then fill its components, but I need to join the two arrays.

Is anyone aware of the right procedure in R or so kind to give suggestions ?
(A possibility would be to switch to C/C++, but I would prefer not to).

Many thanks,

Luca

-- 
________________________________________________________
Le informazioni 
contenute in questo messaggio di posta elettronica sono strettamente 
riservate e indirizzate esclusivamente al destinatario. Si prega di non 
leggere, fare copia, inoltrare a terzi o conservare tale messaggio se non 
si ? il legittimo destinatario dello stesso. Qualora tale messaggio sia 
stato ricevuto per errore, si prega di restituirlo al mittente e di 
cancellarlo permanentemente dal proprio computer.
The information contained 
in this e mail message is strictly confidential and intended for the use of
the addressee only.? If you are not the intended recipient, please do not 
read, copy, forward or store it on your computer. If you have received the
message in error, please forward it back to the sender and delete it 
permanently from your computer system.

-- 


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Feb  4 23:47:38 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 4 Feb 2021 14:47:38 -0800
Subject: [R] uint8
In-Reply-To: <CAGHVBE7_Pm9Fkg4pE+9Fjhi9Fn_V8S8WoQSBA6tDV+As862VEQ@mail.gmail.com>
References: <CAGHVBE7_Pm9Fkg4pE+9Fjhi9Fn_V8S8WoQSBA6tDV+As862VEQ@mail.gmail.com>
Message-ID: <CAGxFJbTNL+uZ-fZpaL3ApQF2LccAHjSwoeTgyPMVs7Jt2O5agg@mail.gmail.com>

Please note per the posting guide linked below:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports. "

It appears you have not done this -- if you have, please say so. Given
that, while you might get lucky here, you should not be surprised if you
don't. This looks like *exactly* the sort of query that a maintainer could
help you with.

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Feb 4, 2021 at 2:36 PM Luca Passalacqua via R-help <
r-help at r-project.org> wrote:

> Dear R users,
>
>  I am trying to join two 8 bit integers, as defined by the
> "coolbutuseless/uint8" package,
> without success:
>
> > library(uint8)
>
> > x1 = uint8(3)> x1[1] = as.uint8(1)
> > x1[2] = as.uint8(2)> x2 = uint8(3)> x2[1] = as.uint8(2)> x1[1] 1 2 0>
> x2[1] 2 0 0> xx = c(x1,x2)> xx[1] 01 02 00 02 00 00
>
>
> In the real application the first array (x1) is extremely large (order
> 15-20 Gbytes)
> while the second is relatively small, so that I cannot afford, given my
> RAM,
> to define a third array, as
>
> > x3 = uint8(length(x1)+length(x2))
>
> and then fill its components, but I need to join the two arrays.
>
> Is anyone aware of the right procedure in R or so kind to give suggestions
> ?
> (A possibility would be to switch to C/C++, but I would prefer not to).
>
> Many thanks,
>
> Luca
>
> --
> ________________________________________________________
> Le informazioni
> contenute in questo messaggio di posta elettronica sono strettamente
> riservate e indirizzate esclusivamente al destinatario. Si prega di non
> leggere, fare copia, inoltrare a terzi o conservare tale messaggio se non
> si ? il legittimo destinatario dello stesso. Qualora tale messaggio sia
> stato ricevuto per errore, si prega di restituirlo al mittente e di
> cancellarlo permanentemente dal proprio computer.
> The information contained
> in this e mail message is strictly confidential and intended for the use of
> the addressee only.  If you are not the intended recipient, please do not
> read, copy, forward or store it on your computer. If you have received the
> message in error, please forward it back to the sender and delete it
> permanently from your computer system.
>
> --
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @zwj|08 @end|ng |rom gm@||@com  Fri Feb  5 03:36:27 2021
From: @zwj|08 @end|ng |rom gm@||@com (Jiefei Wang)
Date: Fri, 5 Feb 2021 10:36:27 +0800
Subject: [R] uint8
In-Reply-To: <CAGHVBE7_Pm9Fkg4pE+9Fjhi9Fn_V8S8WoQSBA6tDV+As862VEQ@mail.gmail.com>
References: <CAGHVBE7_Pm9Fkg4pE+9Fjhi9Fn_V8S8WoQSBA6tDV+As862VEQ@mail.gmail.com>
Message-ID: <CAGiFhPNYdk_i7AqW8FT9k+UhgVu=FkQFgRP4=Hq-Ne4-VY5Xiw@mail.gmail.com>

Hi Luca,

The answer to your question depends on your application. What do you want
to do with x3? Do you really need a native vector to represent x1 and x2?
Or you just want an object that behaves like it is a joint of x1 and x2? I
do not think you can have a native vector x3 without paying anything, this
is impractical, but if all you want to do is to have something that behaves
like x3, I think R's S4 class can achieve that.

Best,
Jiefei

On Fri, Feb 5, 2021 at 6:36 AM Luca Passalacqua via R-help <
r-help at r-project.org> wrote:

> Dear R users,
>
>  I am trying to join two 8 bit integers, as defined by the
> "coolbutuseless/uint8" package,
> without success:
>
> > library(uint8)
>
> > x1 = uint8(3)> x1[1] = as.uint8(1)
> > x1[2] = as.uint8(2)> x2 = uint8(3)> x2[1] = as.uint8(2)> x1[1] 1 2 0>
> x2[1] 2 0 0> xx = c(x1,x2)> xx[1] 01 02 00 02 00 00
>
>
> In the real application the first array (x1) is extremely large (order
> 15-20 Gbytes)
> while the second is relatively small, so that I cannot afford, given my
> RAM,
> to define a third array, as
>
> > x3 = uint8(length(x1)+length(x2))
>
> and then fill its components, but I need to join the two arrays.
>
> Is anyone aware of the right procedure in R or so kind to give suggestions
> ?
> (A possibility would be to switch to C/C++, but I would prefer not to).
>
> Many thanks,
>
> Luca
>
> --
> ________________________________________________________
> Le informazioni
> contenute in questo messaggio di posta elettronica sono strettamente
> riservate e indirizzate esclusivamente al destinatario. Si prega di non
> leggere, fare copia, inoltrare a terzi o conservare tale messaggio se non
> si ? il legittimo destinatario dello stesso. Qualora tale messaggio sia
> stato ricevuto per errore, si prega di restituirlo al mittente e di
> cancellarlo permanentemente dal proprio computer.
> The information contained
> in this e mail message is strictly confidential and intended for the use of
> the addressee only.  If you are not the intended recipient, please do not
> read, copy, forward or store it on your computer. If you have received the
> message in error, please forward it back to the sender and delete it
> permanently from your computer system.
>
> --
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@hmood@n@der@n @end|ng |rom ugent@be  Fri Feb  5 15:18:15 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Fri, 5 Feb 2021 14:18:15 +0000
Subject: [R] Customizing plot
Message-ID: <f8997669a53745c0a14981e85b09893a@ugent.be>

Hi,

1- How can I assign different colors to different observations in the PCA chart? Assume, I have 10 observations and I want to use black color for the first 5 and read for the next 5 observations.

Currently, I use


 res.pca = PCA(mydata[,1:37], scale.unit=TRUE, graph=T)

 plot(res.pca,axes=c(1,2))


2- How can I change the plot area size and font sizes? With these commands

 dev.new(width=20, height=4)
 plot(res.pca,axes=c(1,2))

The final plot is not what I expected. Please see the picture at https://imgur.com/UINTnv7


Regards,
Mahmood

	[[alternative HTML version deleted]]


From m@hmood@n@der@n @end|ng |rom ugent@be  Fri Feb  5 16:44:49 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Fri, 5 Feb 2021 15:44:49 +0000
Subject: [R] Customizing plot
Message-ID: <c98405eab3a24d25b7dcc3f1a8293b16@ugent.be>


Hi,
1- How can I assign different  colors to different observations in the PCA chart? Assume, I have 10  observations and I want to use black color for the first 5 and read for  the next 5 observations.

Currently, I use 

?res.pca = PCA(mydata[,1:37], scale.unit=TRUE, graph=T)
?plot(res.pca,axes=c(1,2))


?
2- How can I change the plot area size and font sizes? With these commands
?
?dev.new(width=20, height=4)
?plot(res.pca,axes=c(1,2))

 The final plot is not what I expected. Please see the picture at?https://imgur.com/UINTnv7 
?


     
 
 Regards,
 Mahmood
 
    

From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Feb  5 17:01:44 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 5 Feb 2021 11:01:44 -0500
Subject: [R] Customizing plot
In-Reply-To: <c98405eab3a24d25b7dcc3f1a8293b16@ugent.be>
References: <c98405eab3a24d25b7dcc3f1a8293b16@ugent.be>
Message-ID: <f8ec6ca6-653b-1d75-f083-9578010ef580@gmail.com>

On 05/02/2021 10:44 a.m., Mahmood Naderan-Tahan wrote:
> 
> Hi,
> 1- How can I assign different  colors to different observations in the PCA chart? Assume, I have 10  observations and I want to use black color for the first 5 and read for  the next 5 observations.
> 
> Currently, I use
> 
>  ?res.pca = PCA(mydata[,1:37], scale.unit=TRUE, graph=T)
>  ?plot(res.pca,axes=c(1,2))
> 
> 
>   
> 2- How can I change the plot area size and font sizes? With these commands
>   
>  ?dev.new(width=20, height=4)
>  ?plot(res.pca,axes=c(1,2))
> 
>   The final plot is not what I expected. Please see the picture at?https://imgur.com/UINTnv7

No need to post twice.  You probably didn't get an answer the first time 
because it was just an hour ago, and you didn't include "mydata" (or a 
suitable subset) in your posting.  For the best chance at getting a 
helpful answer, post code that others can run.

Duncan Murdoch


From m@hmood@n@der@n @end|ng |rom ugent@be  Fri Feb  5 17:20:23 2021
From: m@hmood@n@der@n @end|ng |rom ugent@be (Mahmood Naderan-Tahan)
Date: Fri, 5 Feb 2021 16:20:23 +0000
Subject: [R] Customizing plot
In-Reply-To: <f8ec6ca6-653b-1d75-f083-9578010ef580@gmail.com>
References: <c98405eab3a24d25b7dcc3f1a8293b16@ugent.be>,
 <f8ec6ca6-653b-1d75-f083-9578010ef580@gmail.com>
Message-ID: <f2c7fa7bb9be4d3996464ec6292d7246@ugent.be>


>No need to post twice.? You probably didn't get an answer the first time
>because it was just an hour ago, and you didn't include "mydata" (or a 
>suitable subset) in your posting.? For the best chance at getting a 
>helpful answer, post code that others can run.



I received a bounce reply with [[alternative HTML version deleted]] and thought it has been rejected...


So, here are the commands I use


> library(FactoMineR)
> mydata <- read.csv('test.csv', header=T,row.names=1)
> head(mydata)
???? V1? V2?? V3? V4
P1 73.6 0.7 74.6 3.1
P2 75.2 0.7 75.8 2.8
P3? 6.5 0.0? 7.3 2.5
P4 41.4 0.3 39.2 8.9
P5? 5.4 0.1 18.2 1.1
P6 18.8 0.3 30.3 7.3
> res.pca = PCA(mydata[,1:4], scale.unit=TRUE, graph=F)
> plot(res.pca,axes=c(1,2))
> dev.new(width=20, height=4)
> plot(res.pca,axes=c(1,2))


The test data and two plots are available at https://gofile.io/d/Qza0PR
As you can see the second plot is not properly sketched as I want to get a full size chart in the window.

For the colors, I want to use black for the first 3 and red for the next three observations. 


Regards,
Mahmood

    
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Friday, February 5, 2021 5:01:44 PM
To: Mahmood Naderan-Tahan; r-help at r-project.org
Subject: Re: [R] Customizing plot
?   
On 05/02/2021 10:44 a.m., Mahmood Naderan-Tahan wrote:
> 
> Hi,
> 1- How can I assign different? colors to different observations in the PCA chart? Assume, I have 10? observations and I want to use black color for the first 5 and read for? the next 5 observations.
> 
> Currently, I use
> 
>? ?res.pca = PCA(mydata[,1:37], scale.unit=TRUE, graph=T)
>? ?plot(res.pca,axes=c(1,2))
> 
> 
>?? 
> 2- How can I change the plot area size and font sizes? With these commands
>?? 
>? ?dev.new(width=20, height=4)
>? ?plot(res.pca,axes=c(1,2))
> 
>?? The final plot is not what I expected. Please see the picture at?https://imgur.com/UINTnv7

No need to post twice.? You probably didn't get an answer the first time 
because it was just an hour ago, and you didn't include "mydata" (or a 
suitable subset) in your posting.? For the best chance at getting a 
helpful answer, post code that others can run.

Duncan Murdoch
    

From |@heemj@n93 @end|ng |rom y@hoo@com  Fri Feb  5 18:33:54 2021
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Fri, 5 Feb 2021 17:33:54 +0000 (UTC)
Subject: [R] forecast  accuracy
References: <1642036950.2068095.1612546434212.ref@mail.yahoo.com>
Message-ID: <1642036950.2068095.1612546434212@mail.yahoo.com>

I am working in the functional time series, I obtain the one year ahead forecast in the functional format, Know i want to forecast accuracy for example mean absolute percentage error in R, please help how i do this in R



	[[alternative HTML version deleted]]


From te@3rd @end|ng |rom gm@||@com  Fri Feb  5 20:04:16 2021
From: te@3rd @end|ng |rom gm@||@com (Thomas Adams)
Date: Fri, 5 Feb 2021 14:04:16 -0500
Subject: [R] forecast accuracy
In-Reply-To: <1642036950.2068095.1612546434212@mail.yahoo.com>
References: <1642036950.2068095.1612546434212.ref@mail.yahoo.com>
 <1642036950.2068095.1612546434212@mail.yahoo.com>
Message-ID: <CAGxgkWgfueG_U12Ah5H=6gBATLwBmrJFtsXAPCu0E1zwA0j+mg@mail.gmail.com>

Look at the 'verification' contributed package

Tom

On Fri, Feb 5, 2021 at 12:36 PM Faheem Jan via R-help <r-help at r-project.org>
wrote:

> I am working in the functional time series, I obtain the one year ahead
> forecast in the functional format, Know i want to forecast accuracy for
> example mean absolute percentage error in R, please help how i do this in R
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From phii m@iii@g oii phiiipsmith@c@  Sun Feb  7 20:30:59 2021
From: phii m@iii@g oii phiiipsmith@c@ (phii m@iii@g oii phiiipsmith@c@)
Date: Sun, 07 Feb 2021 14:30:59 -0500
Subject: [R] Difficulty using the tryCatch() function
Message-ID: <c5e554c00fb7261ec8844c42d8f1041c@philipsmith.ca>

I need help using the tryCatch function. I have a function and I want to 
surround it with tryCatch to catch errors and thereby avoid stopping 
execution of my program if the function fails. In my reproducible 
example below I have used a very simply function that just adds two 
numbers together. My function, called Adn, compiles, but when executed 
it generates the message: "Error in tryCatch({ : condition handlers must 
be specified with a condition class". I do not understand the error 
message.

# Reproducible example for using tryCatch

Adn <- function(x,y) {
   out <- tryCatch(
     {
       x+y
     },
     {
       warning = function(cond) {
         message("There was a warning.")
         message("Here is the original warning message:")
         message(cond)
         return(100)
       }
     },
     {
       error = function(cond) {
         message("There was an error.")
         message("Here is the original error message:")
         message(cond)
         return(200)
       }
     },
     finally = {
       message("Error handling done.")
     }
   )
   if (out==100 | out==200) { z <- 0 }
   else { z <- x+y }
   return(z)
}
(result <- Adn(1,sqrt(2))) # should work fine
(result <- Adn(1,sqrt(-2))) # should catch a warning and set z to 0
(result <- Adn(1,"a")) # should catch an error and set z to 0


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Feb  7 20:36:22 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 07 Feb 2021 11:36:22 -0800
Subject: [R] Difficulty using the tryCatch() function
In-Reply-To: <c5e554c00fb7261ec8844c42d8f1041c@philipsmith.ca>
References: <c5e554c00fb7261ec8844c42d8f1041c@philipsmith.ca>
Message-ID: <1BF05C90-F498-412E-9A83-5562FB4356EB@dcn.davis.ca.us>

Too many curly braces. warning and error need to be arguments to tryCatch.

On February 7, 2021 11:30:59 AM PST, phil at philipsmith.ca wrote:
>I need help using the tryCatch function. I have a function and I want
>to 
>surround it with tryCatch to catch errors and thereby avoid stopping 
>execution of my program if the function fails. In my reproducible 
>example below I have used a very simply function that just adds two 
>numbers together. My function, called Adn, compiles, but when executed 
>it generates the message: "Error in tryCatch({ : condition handlers
>must 
>be specified with a condition class". I do not understand the error 
>message.
>
># Reproducible example for using tryCatch
>
>Adn <- function(x,y) {
>   out <- tryCatch(
>     {
>       x+y
>     },
>     {
>       warning = function(cond) {
>         message("There was a warning.")
>         message("Here is the original warning message:")
>         message(cond)
>         return(100)
>       }
>     },
>     {
>       error = function(cond) {
>         message("There was an error.")
>         message("Here is the original error message:")
>         message(cond)
>         return(200)
>       }
>     },
>     finally = {
>       message("Error handling done.")
>     }
>   )
>   if (out==100 | out==200) { z <- 0 }
>   else { z <- x+y }
>   return(z)
>}
>(result <- Adn(1,sqrt(2))) # should work fine
>(result <- Adn(1,sqrt(-2))) # should catch a warning and set z to 0
>(result <- Adn(1,"a")) # should catch an error and set z to 0
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From phii m@iii@g oii phiiipsmith@c@  Sun Feb  7 20:51:33 2021
From: phii m@iii@g oii phiiipsmith@c@ (phii m@iii@g oii phiiipsmith@c@)
Date: Sun, 07 Feb 2021 14:51:33 -0500
Subject: [R] Difficulty using the tryCatch() function
In-Reply-To: <1BF05C90-F498-412E-9A83-5562FB4356EB@dcn.davis.ca.us>
References: <c5e554c00fb7261ec8844c42d8f1041c@philipsmith.ca>
 <1BF05C90-F498-412E-9A83-5562FB4356EB@dcn.davis.ca.us>
Message-ID: <156f8f3b19b4863533c0fdbdf07d35b7@philipsmith.ca>

Thanks so much for your speedy replies. Yes, removing those brackets did 
the trick. I was relying on an example in Stackoverflow at 
https://stackoverflow.com/questions/12193779/how-to-write-trycatch-in-r

Philip

On 2021-02-07 14:36, Jeff Newmiller wrote:
> Too many curly braces. warning and error need to be arguments to 
> tryCatch.
> 
> On February 7, 2021 11:30:59 AM PST, phil at philipsmith.ca wrote:
>> I need help using the tryCatch function. I have a function and I want
>> to
>> surround it with tryCatch to catch errors and thereby avoid stopping
>> execution of my program if the function fails. In my reproducible
>> example below I have used a very simply function that just adds two
>> numbers together. My function, called Adn, compiles, but when executed
>> it generates the message: "Error in tryCatch({ : condition handlers
>> must
>> be specified with a condition class". I do not understand the error
>> message.
>> 
>> # Reproducible example for using tryCatch
>> 
>> Adn <- function(x,y) {
>>   out <- tryCatch(
>>     {
>>       x+y
>>     },
>>     {
>>       warning = function(cond) {
>>         message("There was a warning.")
>>         message("Here is the original warning message:")
>>         message(cond)
>>         return(100)
>>       }
>>     },
>>     {
>>       error = function(cond) {
>>         message("There was an error.")
>>         message("Here is the original error message:")
>>         message(cond)
>>         return(200)
>>       }
>>     },
>>     finally = {
>>       message("Error handling done.")
>>     }
>>   )
>>   if (out==100 | out==200) { z <- 0 }
>>   else { z <- x+y }
>>   return(z)
>> }
>> (result <- Adn(1,sqrt(2))) # should work fine
>> (result <- Adn(1,sqrt(-2))) # should catch a warning and set z to 0
>> (result <- Adn(1,"a")) # should catch an error and set z to 0
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Feb  8 08:07:27 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 8 Feb 2021 07:07:27 +0000
Subject: [R] Customizing plot
In-Reply-To: <c98405eab3a24d25b7dcc3f1a8293b16@ugent.be>
References: <c98405eab3a24d25b7dcc3f1a8293b16@ugent.be>
Message-ID: <093e446397474cc8901a2ab7368bea45@SRVEXCHCM1302.precheza.cz>

Hallo Mahmood

I recently struggled with similar problem useing factoextra package. You
could fiddle with xlim and ylim to set size of plot and col.ind to set the
colour.

Another option is to use prcomp function to generate data and fine tune
biplot.

See parameters expand, xlim and ylim for biplot size and points to add
points with different shape, colour and/or size.

Below is example with factoextra

Cheers
Petr

library(factoextra)
library(FactoMineR)
 
  fit <- PCA(temp, quali.sup=c(9,10))
  fviz_pca_biplot(fit, col.ind = temp$coating, repel=T, col.var = 
  "black", palette = "lancet", invisible="quali", pointsize=5, 
  pointshape=temp$size, legend.title = list(col = "Coating", 
  shape="Size"), xlim=c(-6,6), title="Instillation results")
 
  temp <- structure(list(leukocyte28 = c(96875L, 73438L, 68229L, 
  94479L, 76563L, 141667L, 111042L, 93333L, 132083L, 103542L, 61667L, 
  77708L ),
  macrophage28 = c(60.29, 99.13, 97.04, 98.54, 98.46, 75.2, 89.71, 98, 
  82, 98.83, 99.08, 98.54), pmn28 = c(38.58, 0.58, 2.71, 0.92, 1, 
  24.25, 9.29, 1.5, 15.08, 0.92, 0.67, 1), lymphocyte28 = c(1.13, 
  0.29, 0.25, 0.54, 0.54, 0.55, 1, 0.5, 2.92, 0.25, 0.25, 0.46),
      leukocyte3 = c(186042L, 111250L, 114375L, 111146L, 98854L,
      156250L, 250625L, 183125L, 202917L, 161875L, 184792L, 128333L
      ), macrophage3 = c(53.88, 95.96, 98.29, 98.92, 98.92, 78.3,
      82.33, 97.83, 84.79, 97.25, 97.75, 98.46), pmn3 = c(44.75,
      3.46, 1.29, 0.67, 0.71, 20.4, 16.67, 1.92, 14.04, 1.92, 1.67,
      1.21), lymphocyte3 = c(1.38, 0.58, 0.42, 0.42, 0.38, 1.3,
      1, 0.25, 1.17, 0.83, 0.58, 0.33), coating = structure(c(3L,
      3L, 3L, 1L, 7L, 1L, 2L, 5L, 4L, 6L, 3L, 3L), .Label = c("alumina",
      "both", "none", "phosphate", "silica", "tungsten", "zirconia"
      ), class = "factor"), size = structure(c(1L, 1L, 2L, 2L,
      2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L), .Label = c("nano", "pigmentary"
      ), class = "factor")), class = "data.frame", row.names = c(NA,
  12L))





> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Mahmood
> Naderan-Tahan
> Sent: Friday, February 5, 2021 4:45 PM
> To: r-help at r-project.org
> Subject: [R] Customizing plot
> 
> 
> Hi,
> 1- How can I assign different  colors to different observations in the PCA
> chart? Assume, I have 10  observations and I want to use black color for
the
> first 5 and read for  the next 5 observations.
> 
> Currently, I use
> 
> ?res.pca = PCA(mydata[,1:37], scale.unit=TRUE, graph=T)
> ?plot(res.pca,axes=c(1,2))
> 
> 
> 
> 2- How can I change the plot area size and font sizes? With these commands
> 
> ?dev.new(width=20, height=4)
> ?plot(res.pca,axes=c(1,2))
> 
>  The final plot is not what I expected. Please see the picture
> at?https://imgur.com/UINTnv7
> 
> 
> 
> 
> 
>  Regards,
>  Mahmood
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From @gr@w@|@nur@g1999 @end|ng |rom gm@||@com  Sat Feb  6 10:23:24 2021
From: @gr@w@|@nur@g1999 @end|ng |rom gm@||@com (Anurag Agrawal)
Date: Sat, 6 Feb 2021 14:53:24 +0530
Subject: [R] [R-pkgs] 1.0.7 rMorningStar (Mutual Fund performance analysis)
Message-ID: <A67051F8-01C3-4AE6-B3F7-863E0D152649@gmail.com>

Dear useRs and developeRs,

I am proud to announce that rMorningStar is now available on CRAN.

rMornringStar is aimed to guide investors both professional and non-professional to analyse mutual funds and ETFs (exchange-traded funds).

The package provides a collection of functions to calculate performance metrics of mutual funds/exchange-traded funds. This package aids investors in researching mutual funds/exchange-traded funds for their investment decision. Also, this package contains tools to manage a portfolio of different mutual fund/exchange-traded funds.

This is the first version of rMorningStar. I will make every effort to better the package with every release. If you have any concerns/ feedback please connect with me on agrawalanurag1999 at gmail.com <mailto:agrawalanurag1999 at gmail.com>







Regards,
Anurag Agrawal
Bachelor of Science in Finance,
Narsee Monjee Institute of Management Studies.
	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sun Feb  7 20:01:48 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Sun, 7 Feb 2021 19:01:48 +0000
Subject: [R] Need help using lattice
Message-ID: <BN7PR08MB4114C3FB69B895B47C34141AD0B09@BN7PR08MB4114.namprd08.prod.outlook.com>

I have a dataframe comprising a vector of E. coli concentrations, a vector of months when the samples were taken, and a vector of sampled sites.  I?d like to produce a lattice with sites along the horizontal axis, and months on the vertical.  Each site-month box would then contain concentrations ranging along its x axis.



I think this would use dotchart (or possibly stripchart) in the lattice.  I?ve been reading the lattice and xyplot documents and I?m overwhelmed.  I?d appreciate help in how to write the call.



David


	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Sun Feb  7 20:37:48 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Sun, 07 Feb 2021 22:37:48 +0300
Subject: [R] Difficulty using the tryCatch() function
In-Reply-To: Your message of "Sun, 07 Feb 2021 14:30:59 -0500."
 <c5e554c00fb7261ec8844c42d8f1041c@philipsmith.ca>
Message-ID: <254545.1612726668@apollo2.minshall.org>

try removing the outermost '{'...'}'.  e.g., { warning = ... } should be
'warning = ...'.
----
Adn <- function(x,y) {
    out <- tryCatch(
    {
        x+y
    },
    warning = function(cond) {
        message("There was a warning.")
        message("Here is the original warning message:")
        message(cond)
        return(100)
    },
    error = function(cond) {
        message("There was an error.")
        message("Here is the original error message:")
        message(cond)
        return(200)
    },
    finally = {
        message("Error handling done.")
    }
    )
    if (out==100 | out==200) { z <- 0 }
    else { z <- x+y }
    return(z)
}
(result <- Adn(1,sqrt(2))) # should work fine
(result <- Adn(1,sqrt(-2))) # should catch a warning and set z to 0
(result <- Adn(1,"a")) # should catch an error and set z to 0


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Feb  8 09:09:53 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 8 Feb 2021 08:09:53 +0000
Subject: [R] Need help using lattice
In-Reply-To: <BN7PR08MB4114C3FB69B895B47C34141AD0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114C3FB69B895B47C34141AD0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <b47811e61b96483199db82d15a25bd58@SRVEXCHCM1302.precheza.cz>

Hi

Please do not use HTML formating.
Please provide some toy data if you want to get reasonable help.

You could also look at ggplot package, e.g.

https://ggplot2.tidyverse.org/reference/facet_grid.html

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst, David
> F.
> Sent: Sunday, February 7, 2021 8:02 PM
> To: r-help at r-project.org
> Subject: [R] Need help using lattice
> 
> I have a dataframe comprising a vector of E. coli concentrations, a vector of
> months when the samples were taken, and a vector of sampled sites.  I?d
> like to produce a lattice with sites along the horizontal axis, and months on
> the vertical.  Each site-month box would then contain concentrations ranging
> along its x axis.
> 
> 
> 
> I think this would use dotchart (or possibly stripchart) in the lattice.  I?ve
> been reading the lattice and xyplot documents and I?m overwhelmed.  I?d
> appreciate help in how to write the call.
> 
> 
> 
> David
> 
> 
> 	[[alternative HTML version deleted]]


From @b|@yeng@|@b@ @end|ng |rom gm@||@com  Mon Feb  8 13:32:41 2021
From: @b|@yeng@|@b@ @end|ng |rom gm@||@com (Ablaye Ngalaba)
Date: Mon, 8 Feb 2021 13:32:41 +0100
Subject: [R] need help to create a 3-dimensional list
Message-ID: <CAOkWQv2aDfdF5JacbrTMm5e96o2ubkgTfMengj29zbzTV+kK5A@mail.gmail.com>

Hello,
please, I need help to calculate n_l properly for my attachment.



                      Sincerely

From petr@p|k@| @end|ng |rom prechez@@cz  Mon Feb  8 13:56:20 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 8 Feb 2021 12:56:20 +0000
Subject: [R] need help to create a 3-dimensional list
In-Reply-To: <CAOkWQv2aDfdF5JacbrTMm5e96o2ubkgTfMengj29zbzTV+kK5A@mail.gmail.com>
References: <CAOkWQv2aDfdF5JacbrTMm5e96o2ubkgTfMengj29zbzTV+kK5A@mail.gmail.com>
Message-ID: <de559b331d044abd8490d30da0b46f49@SRVEXCHCM1302.precheza.cz>

Hi

No attachments allowed (usually).

What do you mean by 3 dimensional list? List itself can contain objects
which could also be lists.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ablaye Ngalaba
> Sent: Monday, February 8, 2021 1:33 PM
> To: r-help at r-project.org
> Subject: [R] need help to create a 3-dimensional list
> 
> Hello,
> please, I need help to calculate n_l properly for my attachment.
> 
> 
> 
>                       Sincerely
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From jerem|eju@te @end|ng |rom gm@||@com  Mon Feb  8 14:28:33 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Mon, 08 Feb 2021 14:28:33 +0100
Subject: [R] readline in function call with space in prompt.
Message-ID: <87sg66sn7i.fsf@gmail.com>

Hello,

I have noticed a behavior that I don't understand. When I call the
following function from the prompt.
test <- function(){
    a <- readline("selection: ")
    a
}

> test()
> selection: |
I can only type one character and the readline function exits before I can
press enter.

however

test1 <- function(){
    a <- readline("selection:")
    a
}
> test1()
> selection:|
works as expected.
> selection: abc[Ret]

However calling directly readline with a space in the prompt does what I
would expect.

> a <- readline("selection: ")
> selection: abc[Ret]
> a
> "abc"

It is the expected behavior or am I missing something?

Best regards,
Jeremie
-- 
Jeremie Juste
> R version 4.0.3 (2020-10-10)


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Feb  8 15:30:42 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 8 Feb 2021 14:30:42 +0000
Subject: [R] need help to create a 3-dimensional list
In-Reply-To: <CAOkWQv1tonxKcfq2tLkNSWHLsMe_bbmBVKW0DpUUD_b3TJLBmQ@mail.gmail.com>
References: <CAOkWQv2aDfdF5JacbrTMm5e96o2ubkgTfMengj29zbzTV+kK5A@mail.gmail.com>
 <de559b331d044abd8490d30da0b46f49@SRVEXCHCM1302.precheza.cz>
 <CAOkWQv1tonxKcfq2tLkNSWHLsMe_bbmBVKW0DpUUD_b3TJLBmQ@mail.gmail.com>
Message-ID: <4bc55ce8c84a4e7fb6e5c49eb3980cbc@SRVEXCHCM1302.precheza.cz>

Hallo again

 

Your attachment is discarded by listserv so we did not get it. Do not use attachments.

 

Cheers

Petr

 

 

From: Ablaye Ngalaba <ablayengalaba at gmail.com> 
Sent: Monday, February 8, 2021 3:04 PM
To: PIKAL Petr <petr.pikal at precheza.cz>
Subject: Re: [R] need help to create a 3-dimensional list

 

Sorry, I thought I would make my question clear since with the pdf I clearly materialize the shape of what I want to calculate.



Thank you and have a nice day.

 

Le lun. 8 f?vr. 2021 ? 13:56, PIKAL Petr <petr.pikal at precheza.cz <mailto:petr.pikal at precheza.cz> > a ?crit :

Hi

No attachments allowed (usually).

What do you mean by 3 dimensional list? List itself can contain objects
which could also be lists.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Ablaye Ngalaba
> Sent: Monday, February 8, 2021 1:33 PM
> To: r-help at r-project.org <mailto:r-help at r-project.org> 
> Subject: [R] need help to create a 3-dimensional list
> 
> Hello,
> please, I need help to calculate n_l properly for my attachment.
> 
> 
> 
>                       Sincerely
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jrkr|de@u @end|ng |rom gm@||@com  Mon Feb  8 16:31:37 2021
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 8 Feb 2021 10:31:37 -0500
Subject: [R] Need help using lattice
In-Reply-To: <b47811e61b96483199db82d15a25bd58@SRVEXCHCM1302.precheza.cz>
References: <BN7PR08MB4114C3FB69B895B47C34141AD0B09@BN7PR08MB4114.namprd08.prod.outlook.com>
 <b47811e61b96483199db82d15a25bd58@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAKZQJMAoSK_Ldz+Ag0rxRdcktMu82azcMpu6HCnXajruStpQ9Q@mail.gmail.com>

 http://adv-r.had.co.nz/Reproducibility.html

http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

On Mon, 8 Feb 2021 at 03:11, PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hi
>
> Please do not use HTML formating.
> Please provide some toy data if you want to get reasonable help.
>
> You could also look at ggplot package, e.g.
>
> https://ggplot2.tidyverse.org/reference/facet_grid.html
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst,
> David
> > F.
> > Sent: Sunday, February 7, 2021 8:02 PM
> > To: r-help at r-project.org
> > Subject: [R] Need help using lattice
> >
> > I have a dataframe comprising a vector of E. coli concentrations, a
> vector of
> > months when the samples were taken, and a vector of sampled sites.  I?d
> > like to produce a lattice with sites along the horizontal axis, and
> months on
> > the vertical.  Each site-month box would then contain concentrations
> ranging
> > along its x axis.
> >
> >
> >
> > I think this would use dotchart (or possibly stripchart) in the
> lattice.  I?ve
> > been reading the lattice and xyplot documents and I?m overwhelmed.  I?d
> > appreciate help in how to write the call.
> >
> >
> >
> > David
> >
> >
> >       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From gdr@|@m@ @end|ng |rom x@4@||@n|  Mon Feb  8 18:21:46 2021
From: gdr@|@m@ @end|ng |rom x@4@||@n| (Gerrit Draisma)
Date: Mon, 8 Feb 2021 18:21:46 +0100
Subject: [R] Need help using lattice
Message-ID: <b07efbaa-70b8-ede0-eb87-98770cf4b475@xs4all.nl>

David,
Is this what you are looking for?
library(lattice)
df <- expand.grid(site=c("een","twee","drie","vier","vijf"),
                  month=1:12)
df$conc <- rnorm(dim(df)[1])
dotplot(month~conc|site,data=df)

HTH Gerrit


From @b|@yeng@|@b@ @end|ng |rom gm@||@com  Mon Feb  8 18:21:53 2021
From: @b|@yeng@|@b@ @end|ng |rom gm@||@com (Ablaye Ngalaba)
Date: Mon, 8 Feb 2021 18:21:53 +0100
Subject: [R] Need help calculating the sum of the index function
Message-ID: <CAOkWQv238v8A5f88yxvCRm45F4-BXk9uGEjMBP02KU2oPc34fg@mail.gmail.com>

Hello;


q=3 #dimension of variable Y
R=c(5,4,3);# Number of partition of each component of variable Y
if(length(R) != q) stop("The size of R must be equal to q")
n=25 # Sample size
N=c(25,50,100,200,300,400,500,1000) #different sample sizes

 # Creation of an n11 list containing the sizes of the different groups
  n11=list()
  for (i in 1:q){
    n11[[i]]=rep(as.integer(n/R[i]),R[i])
    n11[[i]][R[i]]=n-((R[i]-1)*n11[[i]][1])
  }




The present code calculates the sum of the indicator function (the
indicator function gives 1 if Y belongs to the partition R=c(5,4,3);#
Number of partition of each component of variable Y and takes the value 0
otherwise).


In my case I want to calculate the sum of the indicator function for i
=1,...,n , with the indicator function which takes the value 1 if Y==l and
0 if Y!=l. Y is a random variable with a value in F = {1,...,q} and l
belongs to F = {1,...,q}.

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Mon Feb  8 22:10:04 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 9 Feb 2021 08:10:04 +1100
Subject: [R] readline in function call with space in prompt.
In-Reply-To: <87sg66sn7i.fsf@gmail.com>
References: <87sg66sn7i.fsf@gmail.com>
Message-ID: <CA+8X3fV4nNEkBvkZCPgKQveWA_rnLY3X2DvcQ=TUXTamvzcYMQ@mail.gmail.com>

Hi Jeremie,
Try this:

test <- function() {
 a<-readline("selection: ")
 return(a)
}

If it starts working, it could be a difference in the way Windows R
handles text input. Both work okay for me on fedora linux.

Jim

On Tue, Feb 9, 2021 at 12:29 AM Jeremie Juste <jeremiejuste at gmail.com> wrote:
>
> Hello,
>
> I have noticed a behavior that I don't understand. When I call the
> following function from the prompt.
> test <- function(){
>     a <- readline("selection: ")
>     a
> }
>
> > test()
> > selection: |
> I can only type one character and the readline function exits before I can
> press enter.
>
> however
>
> test1 <- function(){
>     a <- readline("selection:")
>     a
> }
> > test1()
> > selection:|
> works as expected.
> > selection: abc[Ret]
>
> However calling directly readline with a space in the prompt does what I
> would expect.
>
> > a <- readline("selection: ")
> > selection: abc[Ret]
> > a
> > "abc"
>
> It is the expected behavior or am I missing something?
>
> Best regards,
> Jeremie
> --
> Jeremie Juste
> > R version 4.0.3 (2020-10-10)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Mon Feb  8 22:21:58 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 9 Feb 2021 10:21:58 +1300
Subject: [R] readline in function call with space in prompt.
In-Reply-To: <87sg66sn7i.fsf@gmail.com>
References: <87sg66sn7i.fsf@gmail.com>
Message-ID: <20210209102158.5b04117d@rolf-Latitude-E7470>


On Mon, 08 Feb 2021 14:28:33 +0100
Jeremie Juste <jeremiejuste at gmail.com> wrote:

> Hello,
> 
> I have noticed a behavior that I don't understand. When I call the
> following function from the prompt.
> test <- function(){
>     a <- readline("selection: ")
>     a
> }
> 
> > test()
> > selection: |
> I can only type one character and the readline function exits before
> I can press enter.
> 
> however
> 
> test1 <- function(){
>     a <- readline("selection:")
>     a
> }
> > test1()
> > selection:|
> works as expected.
> > selection: abc[Ret]
> 
> However calling directly readline with a space in the prompt does
> what I would expect.
> 
> > a <- readline("selection: ")
> > selection: abc[Ret]
> > a
> > "abc"
> 
> It is the expected behavior or am I missing something?

Works fine for me, with or without the space in the prompt string.
There *must* be something flaky in your system, but I'm damned if I can
come up with any useful suggestions for tracking down just where that
flakiness lies.  Sorry.

Perhaps try re-installing R???

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Feb  9 03:29:12 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 9 Feb 2021 15:29:12 +1300
Subject: [R] Help with regular expressions.
Message-ID: <20210209152912.24f4d0c5@rolf-Latitude-E7470>


I want to deal with strings of the form "a.b.c" and to change (using
sub() or whatever is appropriate) the second "." to a "-", i.e. to
change "a.b.c" to "a.b-c".  I want to leave the first "." as-is.

I guess I could do a gsub(), changing all "."s to "-"s, and then do
a sub() changing the first "-" back to a ".".  But this seems very
kludgy.  There must be a sexier way.  Mustn't there?  Is there regular
expression syntax for picking out the second occurence of a particular
string?

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bgunter@4567 @end|ng |rom gm@||@com  Tue Feb  9 03:49:46 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 8 Feb 2021 18:49:46 -0800
Subject: [R] Help with regular expressions.
In-Reply-To: <20210209152912.24f4d0c5@rolf-Latitude-E7470>
References: <20210209152912.24f4d0c5@rolf-Latitude-E7470>
Message-ID: <CAGxFJbReOhGNHDFcQrG2pOsM5-d9GmStnq09znpG9RyOGCA2FA@mail.gmail.com>

> gsub("(.*\\.[^.]*)\\.(.*)","\\1-\\2", "aa.bcv.cdg")
[1] "aa.bcv-cdg"

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Feb 8, 2021 at 6:29 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:

>
> I want to deal with strings of the form "a.b.c" and to change (using
> sub() or whatever is appropriate) the second "." to a "-", i.e. to
> change "a.b.c" to "a.b-c".  I want to leave the first "." as-is.
>
> I guess I could do a gsub(), changing all "."s to "-"s, and then do
> a sub() changing the first "-" back to a ".".  But this seems very
> kludgy.  There must be a sexier way.  Mustn't there?  Is there regular
> expression syntax for picking out the second occurence of a particular
> string?
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Tue Feb  9 04:03:26 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 8 Feb 2021 22:03:26 -0500
Subject: [R] Help with regular expressions.
In-Reply-To: <20210209152912.24f4d0c5@rolf-Latitude-E7470>
References: <20210209152912.24f4d0c5@rolf-Latitude-E7470>
Message-ID: <0de001d6fe90$23341590$699c40b0$@verizon.net>

There are many ways, Rolf. You need to look into the syntax of regular
expressions. It depends on how sure you are that the formats are exactly as
needed. Escaping the period with one or more backslashes is one way. Using
string functions is another.

Suggestion. See if you can make a regular expression that is greedy and will
match everything up to period then a period then the rest and keep the first
and third parts and replace the middle with a minus sign. Or, match five
things. Everything up to a single period, the period, everything between,
the second period, and the rest, and keep the needed parts as above.

Periods and dashes must be used carefully though. A period means match one
of almost anything so a good way to catch it is [.] which matches a single
character of only a period. Put parens around that: "([.])" and you have a
replaceable item. In your case, you may want the parens around everything
else before and after, perhaps ([^.]*[.][^.]) then [.] then  ([^.]*) as one
long string and replace it with \1-\2 or some similar notation.

There are many other variation on this theme and some are simpler if the
exact format is consistent such as 'a' being a single character or the
string being a fixed length. If you are sure the period in "a.b.c" is always
the fourth character, no RE is needed. Use string methods. Even if not, you
can use string methods to search for a period from the end backwards or
search forward once to find the first and second time starting just past it.
Then replace. Fairly straightforward and very possibly much faster.
-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rolf Turner
Sent: Monday, February 8, 2021 9:29 PM
To: "r-help at R-project.org" <r-help at R-project.org>"@r-project.org
Subject: [R] Help with regular expressions.


I want to deal with strings of the form "a.b.c" and to change (using
sub() or whatever is appropriate) the second "." to a "-", i.e. to change
"a.b.c" to "a.b-c".  I want to leave the first "." as-is.

I guess I could do a gsub(), changing all "."s to "-"s, and then do a sub()
changing the first "-" back to a ".".  But this seems very kludgy.  There
must be a sexier way.  Mustn't there?  Is there regular expression syntax
for picking out the second occurence of a particular string?

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Feb  9 04:09:08 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 8 Feb 2021 19:09:08 -0800
Subject: [R] Help with regular expressions.
In-Reply-To: <CAGxFJbReOhGNHDFcQrG2pOsM5-d9GmStnq09znpG9RyOGCA2FA@mail.gmail.com>
References: <20210209152912.24f4d0c5@rolf-Latitude-E7470>
 <CAGxFJbReOhGNHDFcQrG2pOsM5-d9GmStnq09znpG9RyOGCA2FA@mail.gmail.com>
Message-ID: <CAGxFJbSi1Vi_WznbN=9t71N00hgNFn6FU-fkYDi=YxhObEB09A@mail.gmail.com>

Simpler, but would fail if there are more "."s beyond the second (it
changes the last one to a "-"):

> sub("(.*)\\.([^.]*)", "\\1-\\2", "aa.bcv.cdg")
[1] "aa.bcv-cdg"


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Feb 8, 2021 at 6:49 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> > gsub("(.*\\.[^.]*)\\.(.*)","\\1-\\2", "aa.bcv.cdg")
> [1] "aa.bcv-cdg"
>
> Cheers,
> Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Feb 8, 2021 at 6:29 PM Rolf Turner <r.turner at auckland.ac.nz>
> wrote:
>
>>
>> I want to deal with strings of the form "a.b.c" and to change (using
>> sub() or whatever is appropriate) the second "." to a "-", i.e. to
>> change "a.b.c" to "a.b-c".  I want to leave the first "." as-is.
>>
>> I guess I could do a gsub(), changing all "."s to "-"s, and then do
>> a sub() changing the first "-" back to a ".".  But this seems very
>> kludgy.  There must be a sexier way.  Mustn't there?  Is there regular
>> expression syntax for picking out the second occurence of a particular
>> string?
>>
>> cheers,
>>
>> Rolf Turner
>>
>> --
>> Honorary Research Fellow
>> Department of Statistics
>> University of Auckland
>> Phone: +64-9-373-7599 ext. 88276
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Feb  9 05:34:00 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 9 Feb 2021 17:34:00 +1300
Subject: [R] Help with regular expressions.
In-Reply-To: <CAGxFJbReOhGNHDFcQrG2pOsM5-d9GmStnq09znpG9RyOGCA2FA@mail.gmail.com>
References: <20210209152912.24f4d0c5@rolf-Latitude-E7470>
 <CAGxFJbReOhGNHDFcQrG2pOsM5-d9GmStnq09znpG9RyOGCA2FA@mail.gmail.com>
Message-ID: <20210209173400.5b62b6f0@rolf-Latitude-E7470>


David Wolfskill's post solved my problem perfectly.  Thanks.

Thanks also to Bert Gunter and Avi Gross.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Feb  9 05:37:43 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 9 Feb 2021 17:37:43 +1300
Subject: [R] Help with regular expressions.
In-Reply-To: <20210209173400.5b62b6f0@rolf-Latitude-E7470>
References: <20210209152912.24f4d0c5@rolf-Latitude-E7470>
 <CAGxFJbReOhGNHDFcQrG2pOsM5-d9GmStnq09znpG9RyOGCA2FA@mail.gmail.com>
 <20210209173400.5b62b6f0@rolf-Latitude-E7470>
Message-ID: <20210209173743.74474559@rolf-Latitude-E7470>


On Tue, 9 Feb 2021 17:34:00 +1300
Rolf Turner <r.turner at auckland.ac.nz> wrote:

> 
> David Wolfskill's post solved my problem perfectly.  Thanks.
> 
> Thanks also to Bert Gunter and Avi Gross.

Whoops.  David Wolfskill's message came to me off-list.
Sorry for the confusion.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Feb  9 10:37:49 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 9 Feb 2021 10:37:49 +0100
Subject: [R] readline in function call with space in prompt.
In-Reply-To: <87sg66sn7i.fsf@gmail.com>
References: <87sg66sn7i.fsf@gmail.com>
Message-ID: <24610.22509.310508.96260@stat.math.ethz.ch>

>>>>> Jeremie Juste 
>>>>>     on Mon, 08 Feb 2021 14:28:33 +0100 writes:

    > Hello,
    > I have noticed a behavior that I don't understand. When I call the
    > following function from the prompt.
    > test <- function(){
    > a <- readline("selection: ")
    > a
    > }

    >> test()
    >> selection: |
    > I can only type one character and the readline function exits before I can
    > press enter.

    > however

    > test1 <- function(){
    > a <- readline("selection:")
    > a
    > }
    >> test1()
    >> selection:|
    > works as expected.
    >> selection: abc[Ret]

    > However calling directly readline with a space in the prompt does what I
    > would expect.

    >> a <- readline("selection: ")
    >> selection: abc[Ret]
    >> a
    >> "abc"

    > It is the expected behavior or am I missing something?

    > Best regards,
    > Jeremie
    > -- 
    > Jeremie Juste
    >> R version 4.0.3 (2020-10-10)

Given that the above works fine in Linux (for Jim Lemon and Rolf Turner),

could you tell us *how* you use R?
In the (Windows) RGui  or from Rstudio  or  ESS   or yet another way?

Usually the UI (user interface) should not matter, but rather
the R version etc.
But the UI may be important for a function like readline()
which does UI ..

Martin


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Tue Feb  9 11:29:32 2021
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Tue, 9 Feb 2021 10:29:32 +0000
Subject: [R] readline in function call with space in prompt.
In-Reply-To: <24610.22509.310508.96260@stat.math.ethz.ch>
References: <87sg66sn7i.fsf@gmail.com>
 <24610.22509.310508.96260@stat.math.ethz.ch>
Message-ID: <f6c00f37-bd3c-131e-7c87-5147a363a48b@dewey.myzen.co.uk>

The function test as defined below by Jeremie works as I would have 
expected for me on Windows so I am unable to replicate the problem there.

R version 4.0.3 (2020-10-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19041)

Matrix products: default

locale:
[1] LC_COLLATE=English_United Kingdom.1252
[2] LC_CTYPE=English_United Kingdom.1252
[3] LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United Kingdom.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.0.3


On 09/02/2021 09:37, Martin Maechler wrote:
>>>>>> Jeremie Juste
>>>>>>      on Mon, 08 Feb 2021 14:28:33 +0100 writes:
> 
>      > Hello,
>      > I have noticed a behavior that I don't understand. When I call the
>      > following function from the prompt.
>      > test <- function(){
>      > a <- readline("selection: ")
>      > a
>      > }
> 
>      >> test()
>      >> selection: |
>      > I can only type one character and the readline function exits before I can
>      > press enter.
> 
>      > however
> 
>      > test1 <- function(){
>      > a <- readline("selection:")
>      > a
>      > }
>      >> test1()
>      >> selection:|
>      > works as expected.
>      >> selection: abc[Ret]
> 
>      > However calling directly readline with a space in the prompt does what I
>      > would expect.
> 
>      >> a <- readline("selection: ")
>      >> selection: abc[Ret]
>      >> a
>      >> "abc"
> 
>      > It is the expected behavior or am I missing something?
> 
>      > Best regards,
>      > Jeremie
>      > --
>      > Jeremie Juste
>      >> R version 4.0.3 (2020-10-10)
> 
> Given that the above works fine in Linux (for Jim Lemon and Rolf Turner),
> 
> could you tell us *how* you use R?
> In the (Windows) RGui  or from Rstudio  or  ESS   or yet another way?
> 
> Usually the UI (user interface) should not matter, but rather
> the R version etc.
> But the UI may be important for a function like readline()
> which does UI ..
> 
> Martin
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From gdr@|@m@ @end|ng |rom x@4@||@n|  Tue Feb  9 12:13:55 2021
From: gdr@|@m@ @end|ng |rom x@4@||@n| (Gerrit Draisma)
Date: Tue, 9 Feb 2021 12:13:55 +0100
Subject: [R] Need help using lattice
In-Reply-To: <BN7PR08MB4114BA619E96AC0F715FB57DD08F9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <b07efbaa-70b8-ede0-eb87-98770cf4b475@xs4all.nl>
 <BN7PR08MB4114BA619E96AC0F715FB57DD08F9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <feb489da-1b53-5eeb-d03f-e21c54a1aaad@xs4all.nl>

Ha David,
Thanks for your reply.
For your last question, you have to change month into an ordered factor 
variable:

library(lattice)
df <- expand.grid(site=c("een","twee","drie","vier","vijf"),
                  month=factor(3:12,levels=1:12,
                               labels=month.abb, ordered=TRUE))
df$conc <- rnorm(dim(df)[1])
dotplot(month~conc|site,data=df)

HTH, Gerrit



Op 08-02-2021 om 21:04 schreef Parkhurst, David F.:
> That worked nicely;? thanks again.? Here?s what I used for our data:
> 
> library(lattice)
> 
> df <- 
> expand.grid(site=c("CrCr","NFSC","MFSC","SFSC","LMO","MCE","MUE","MLE","MoCe"),months=1:9)
> 
> dotplot(months~conc | site, data=df)
> 
> The result is attached.? Is there a way to replace the month numbers on 
> the y axes with the names Apr-Dec?
> 
> David
>


From K@Ropk|n@ @end|ng |rom |t@@|eed@@@c@uk  Tue Feb  9 12:24:49 2021
From: K@Ropk|n@ @end|ng |rom |t@@|eed@@@c@uk (Karl Ropkins)
Date: Tue, 9 Feb 2021 11:24:49 +0000
Subject: [R] readline in function call with space in prompt.
In-Reply-To: <mailman.362209.1.1612868402.50337.r-help@r-project.org>
References: <mailman.362209.1.1612868402.50337.r-help@r-project.org>
Message-ID: <AM6PR0302MB31767F0DEB063CB51A21E064EA8E9@AM6PR0302MB3176.eurprd03.prod.outlook.com>

Not on a machine with latest R at moment so not ruling out something there, but it is working fine for me.
Karl

R version 4.0.2 (2020-06-22)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19041)

------------------------------

Message: 9
Date: Tue, 9 Feb 2021 10:21:58 +1300
From: Rolf Turner <r.turner at auckland.ac.nz>
To: Jeremie Juste <jeremiejuste at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] readline in function call with space in prompt.
Message-ID: <20210209102158.5b04117d at rolf-Latitude-E7470>
Content-Type: text/plain; charset="windows-1252"


On Mon, 08 Feb 2021 14:28:33 +0100
Jeremie Juste <jeremiejuste at gmail.com> wrote:

> Hello,
>
> I have noticed a behavior that I don't understand. When I call the
> following function from the prompt.
> test <- function(){
>     a <- readline("selection: ")
>     a
> }
>
> > test()
> > selection: |
> I can only type one character and the readline function exits before
> I can press enter.
>
> however
>
> test1 <- function(){
>     a <- readline("selection:")
>     a
> }
> > test1()
> > selection:|
> works as expected.
> > selection: abc[Ret]
>
> However calling directly readline with a space in the prompt does
> what I would expect.
>
> > a <- readline("selection: ")
> > selection: abc[Ret]
> > a
> > "abc"
>
> It is the expected behavior or am I missing something?

Works fine for me, with or without the space in the prompt string.
There *must* be something flaky in your system, but I'm damned if I can
come up with any useful suggestions for tracking down just where that
flakiness lies.  Sorry.

Perhaps try re-installing R???

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276





	[[alternative HTML version deleted]]


From @@p@pp@@1 @end|ng |rom re@e@rch@g|@@@c@uk  Tue Feb  9 13:52:28 2021
From: @@p@pp@@1 @end|ng |rom re@e@rch@g|@@@c@uk (Katerina Pappa (PGR))
Date: Tue, 9 Feb 2021 12:52:28 +0000
Subject: [R] 3 x 2 mixed factorial design - which model is correct
Message-ID: <CWLP265MB0563CC00E4D02FCEDD66DEB99B8E9@CWLP265MB0563.GBRP265.PROD.OUTLOOK.COM>

Hello everyone,

I was hoping you could help with a few R-related questions.

I have a 3 x 2 mixed factorial design. This is a longitudinal design, where two groups of participants were assessed over three time points.

Factor Time has 3 levels (time 1, 2 and 3)
Factor Group has 2 levels (groups 1 and 2)
Dependent variables are continuous and represent gray matter volumes for 6 regions of interest

I have arranged the data as indicated below:

A tibble: 111 x 13

##    ID      Age Time  Group  lCau  rCau  lHip  rHip  lPut  rPut  T2vT1  T3vT1 G

##    <fct> <dbl> <fct> <fct> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl>

##  1 BT02     22 T1-P? G2     2.65  2.71  2.58  2.83  3.17  3.05 -0.333 -0.333  -0.5

##  2 BT02     22 T2-E? G2     2.69  2.76  2.62  2.90  2.95  3.09  0.667 -0.333 -0.5

##  3 BT02     22 T3-P? G2     2.66  2.72  2.56  2.87  2.99  2.96 -0.333  0.667 -0.5

##  4 BT03     22 T1-P? G1     2.20  2.37  2.46  2.81  3.51  3.45 -0.333 -0.333  0.5

##  5 BT03     22 T2-E? G1     2.18  2.38  2.47  2.77  3.38  3.48  0.667 -0.333 0.5

##  6 BT03     22 T3-P? G1     2.18  2.33  2.44  2.78  3.61  3.66 -0.333  0.667 0.5

##  7 BT04     19 T1-P? G2     2.93  3.10  2.89  3.19  3.57  3.70 -0.333 -0.333 -0.5

##  8 BT04     19 T2-E? G2     2.91  3.07  2.86  3.18  3.46  3.60  0.667 -0.333 -0.5

##  9 BT04     19 T3-P? G2     2.84  3.01  2.90  3.23  3.54  3.71 -0.333  0.667 -0.5

taking the left caudate, .i.e. lCau, as an example:

Q1: Anova model
aov (lCau ~ Time*Group + Error(ID))  ?> is this model correct?

Q2: lm model
And then i used dummy coding for the lm model

lmer(lCau ~ (T2vT1 + T3vT1)*G+ (1 |ID))  ?> is this model correct?

Are these models correct for this type of data?

Q3: any thoughts on how to deal with unbalanced design (I have missing data for one participant for Time2)


Thank you!
Katerina

	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Tue Feb  9 17:35:03 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Tue, 9 Feb 2021 16:35:03 +0000
Subject: [R] Need help using lattice
In-Reply-To: <feb489da-1b53-5eeb-d03f-e21c54a1aaad@xs4all.nl>
References: <b07efbaa-70b8-ede0-eb87-98770cf4b475@xs4all.nl>
 <BN7PR08MB4114BA619E96AC0F715FB57DD08F9@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <feb489da-1b53-5eeb-d03f-e21c54a1aaad@xs4all.nl>
Message-ID: <BN7PR08MB41145D152D9530A4A7B4AD63D08E9@BN7PR08MB4114.namprd08.prod.outlook.com>

Thank you.

From: Gerrit Draisma <gdraisma at xs4all.nl>
Date: Tuesday, February 9, 2021 at 6:14 AM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Need help using lattice
Ha David,
Thanks for your reply.
For your last question, you have to change month into an ordered factor
variable:

library(lattice)
df <- expand.grid(site=c("een","twee","drie","vier","vijf"),
                  month=factor(3:12,levels=1:12,
                               labels=month.abb, ordered=TRUE))
df$conc <- rnorm(dim(df)[1])
dotplot(month~conc|site,data=df)

HTH, Gerrit



Op 08-02-2021 om 21:04 schreef Parkhurst, David F.:
> That worked nicely;  thanks again.  Here?s what I used for our data:
>
> library(lattice)
>
> df <-
> expand.grid(site=c("CrCr","NFSC","MFSC","SFSC","LMO","MCE","MUE","MLE","MoCe"),months=1:9)
>
> dotplot(months~conc | site, data=df)
>
> The result is attached.  Is there a way to replace the month numbers on
> the y axes with the names Apr-Dec?
>
> David
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Feb  9 18:27:05 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 9 Feb 2021 09:27:05 -0800
Subject: [R] 3 x 2 mixed factorial design - which model is correct
In-Reply-To: <CWLP265MB0563CC00E4D02FCEDD66DEB99B8E9@CWLP265MB0563.GBRP265.PROD.OUTLOOK.COM>
References: <CWLP265MB0563CC00E4D02FCEDD66DEB99B8E9@CWLP265MB0563.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbTED30R=PkDLZpYPNf43ODxSCbtMWEX4tc8qRw0uDpgbw@mail.gmail.com>

Please note, per the posting guide linked below:

"*Questions about statistics:* The R mailing lists are primarily intended
for questions and discussion about the R software. However, questions about
statistical methodology are sometimes posted. If the question is well-asked
and of interest to someone on the list, it *may* elicit an informative
up-to-date answer. See also the Usenet groups sci.stat.consult (applied
statistics and consulting) and sci.stat.math (mathematical stat and
probability)."

So do not be surprised if you do not get a helpful response here.
https://stats.stackexchange.com/  may be a better place for you to post
your queries.

As an editorial comment -- meaning feel free to ignore or dismiss -- the
reply to statistical questions like yours generally depend on the specific
research hypotheses of interest as well as the data. Clarifying the
research questions may increase your chance of success in further posts.
And a multivariate treatment of the data may also be more appropriate as
the responses among the various brain regions are likely correlated. Etc.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Feb 9, 2021 at 7:54 AM Katerina Pappa (PGR) <
a.pappa.1 at research.gla.ac.uk> wrote:

> Hello everyone,
>
> I was hoping you could help with a few R-related questions.
>
> I have a 3 x 2 mixed factorial design. This is a longitudinal design,
> where two groups of participants were assessed over three time points.
>
> Factor Time has 3 levels (time 1, 2 and 3)
> Factor Group has 2 levels (groups 1 and 2)
> Dependent variables are continuous and represent gray matter volumes for 6
> regions of interest
>
> I have arranged the data as indicated below:
>
> A tibble: 111 x 13
>
> ##    ID      Age Time  Group  lCau  rCau  lHip  rHip  lPut  rPut  T2vT1
> T3vT1 G
>
> ##    <fct> <dbl> <fct> <fct> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>
> <dbl>
>
> ##  1 BT02     22 T1-P? G2     2.65  2.71  2.58  2.83  3.17  3.05 -0.333
> -0.333  -0.5
>
> ##  2 BT02     22 T2-E? G2     2.69  2.76  2.62  2.90  2.95  3.09  0.667
> -0.333 -0.5
>
> ##  3 BT02     22 T3-P? G2     2.66  2.72  2.56  2.87  2.99  2.96 -0.333
> 0.667 -0.5
>
> ##  4 BT03     22 T1-P? G1     2.20  2.37  2.46  2.81  3.51  3.45 -0.333
> -0.333  0.5
>
> ##  5 BT03     22 T2-E? G1     2.18  2.38  2.47  2.77  3.38  3.48  0.667
> -0.333 0.5
>
> ##  6 BT03     22 T3-P? G1     2.18  2.33  2.44  2.78  3.61  3.66 -0.333
> 0.667 0.5
>
> ##  7 BT04     19 T1-P? G2     2.93  3.10  2.89  3.19  3.57  3.70 -0.333
> -0.333 -0.5
>
> ##  8 BT04     19 T2-E? G2     2.91  3.07  2.86  3.18  3.46  3.60  0.667
> -0.333 -0.5
>
> ##  9 BT04     19 T3-P? G2     2.84  3.01  2.90  3.23  3.54  3.71 -0.333
> 0.667 -0.5
>
> taking the left caudate, .i.e. lCau, as an example:
>
> Q1: Anova model
> aov (lCau ~ Time*Group + Error(ID))  ?> is this model correct?
>
> Q2: lm model
> And then i used dummy coding for the lm model
>
> lmer(lCau ~ (T2vT1 + T3vT1)*G+ (1 |ID))  ?> is this model correct?
>
> Are these models correct for this type of data?
>
> Q3: any thoughts on how to deal with unbalanced design (I have missing
> data for one participant for Time2)
>
>
> Thank you!
> Katerina
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Tue Feb  9 21:14:27 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Tue, 9 Feb 2021 20:14:27 +0000
Subject: [R] Need help using lattice
In-Reply-To: <feb489da-1b53-5eeb-d03f-e21c54a1aaad@xs4all.nl>
References: <b07efbaa-70b8-ede0-eb87-98770cf4b475@xs4all.nl>
 <BN7PR08MB4114BA619E96AC0F715FB57DD08F9@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <feb489da-1b53-5eeb-d03f-e21c54a1aaad@xs4all.nl>
Message-ID: <BN7PR08MB411484A4446986C25C6C9A20D08E9@BN7PR08MB4114.namprd08.prod.outlook.com>

When I enter your line:
df <- expand.grid(site=c("een","twee","drie","vier","vijf"),
????????????????? month=factor(3:12,levels=1:12,
?????????????????????????????? labels=month.abb, ordered=TRUE))
I get + signs in front of month and label, as expected, and it follows with <

When I convert that to use my own variable names to this:
df <- expand.grid(site=c("CrCr","NFSC","MFSC","SFSC","LMO","MCE","MUE","MLE"),
? ? monames=factor(3:12, levels=1:12,
?? ? ? labels=AprToDec, ordered=TRUE))
 I get + signs in front of monames and labels, again as expected, but then it gives me another + sign.  And if I try to add another ), it keeps giving me + signs.  What is happening here?

From: Gerrit Draisma <gdraisma at xs4all.nl>
Date: Tuesday, February 9, 2021 at 6:14 AM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Need help using lattice
Ha David,
Thanks for your reply.
For your last question, you have to change month into an ordered factor 
variable:

library(lattice)
df <- expand.grid(site=c("een","twee","drie","vier","vijf"),
????????????????? month=factor(3:12,levels=1:12,
?????????????????????????????? labels=month.abb, ordered=TRUE))
df$conc <- rnorm(dim(df)[1])
dotplot(month~conc|site,data=df)

HTH, Gerrit



Op 08-02-2021 om 21:04 schreef Parkhurst, David F.:
> That worked nicely;? thanks again.? Here?s what I used for our data:
> 
> library(lattice)
> 
> df <- 
> expand.grid(site=c("CrCr","NFSC","MFSC","SFSC","LMO","MCE","MUE","MLE","MoCe"),months=1:9)
> 
> dotplot(months~conc | site, data=df)
> 
> The result is attached.? Is there a way to replace the month numbers on 
> the y axes with the names Apr-Dec?
> 
> David
> 


From gdr@|@m@ @end|ng |rom x@4@||@n|  Tue Feb  9 23:10:29 2021
From: gdr@|@m@ @end|ng |rom x@4@||@n| (Gerrit Draisma)
Date: Tue, 9 Feb 2021 23:10:29 +0100
Subject: [R] Need help using lattice
In-Reply-To: <BN7PR08MB411484A4446986C25C6C9A20D08E9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <b07efbaa-70b8-ede0-eb87-98770cf4b475@xs4all.nl>
 <BN7PR08MB4114BA619E96AC0F715FB57DD08F9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <feb489da-1b53-5eeb-d03f-e21c54a1aaad@xs4all.nl>
 <BN7PR08MB411484A4446986C25C6C9A20D08E9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <d51371b9-b70c-6b26-e619-ca4aa737caa7@xs4all.nl>

Ha David,
I do not know.
It must be that your AprtoDec object  is different from month.abb.
Anyhow it should contain the labels for all twelve months!
If I copy your command in an interactive session I just get the message
that AprtoDec is not defined.

I understand that you type the commands interactively in an R session?
I usually prefer using an editor to write the program, and execute with a
 > source("dotplot.R",echo=TRUE)
command.
I like an editor with syntax highlighting and shows matching brackets.

I have attached my dotplot.R to this mail.

Gerrit

Op 09-02-2021 om 21:14 schreef Parkhurst, David F.:
> When I enter your line:
> df <- expand.grid(site=c("een","twee","drie","vier","vijf"),
>  ????????????????? month=factor(3:12,levels=1:12,
>  ?????????????????????????????? labels=month.abb, ordered=TRUE))
> I get + signs in front of month and label, as expected, and it follows with <
> 
> When I convert that to use my own variable names to this:
> df <- expand.grid(site=c("CrCr","NFSC","MFSC","SFSC","LMO","MCE","MUE","MLE"),
>  ? ? monames=factor(3:12, levels=1:12,
>  ?? ? ? labels=AprToDec, ordered=TRUE))
>   I get + signs in front of monames and labels, again as expected, but then it gives me another + sign.  And if I try to add another ), it keeps giving me + signs.  What is happening here?
> 
> From: Gerrit Draisma <gdraisma at xs4all.nl>
> Date: Tuesday, February 9, 2021 at 6:14 AM
> To: Parkhurst, David F. <parkhurs at indiana.edu>
> Cc: r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] Need help using lattice
> Ha David,
> Thanks for your reply.
> For your last question, you have to change month into an ordered factor
> variable:
> 
> library(lattice)
> df <- expand.grid(site=c("een","twee","drie","vier","vijf"),
>  ????????????????? month=factor(3:12,levels=1:12,
>  ?????????????????????????????? labels=month.abb, ordered=TRUE))
> df$conc <- rnorm(dim(df)[1])
> dotplot(month~conc|site,data=df)
> 
> HTH, Gerrit
> 
> 
> 
> Op 08-02-2021 om 21:04 schreef Parkhurst, David F.:
>> That worked nicely;? thanks again.? Here?s what I used for our data:
>>
>> library(lattice)
>>
>> df <-
>> expand.grid(site=c("CrCr","NFSC","MFSC","SFSC","LMO","MCE","MUE","MLE","MoCe"),months=1:9)
>>
>> dotplot(months~conc | site, data=df)
>>
>> The result is attached.? Is there a way to replace the month numbers on
>> the y axes with the names Apr-Dec?
>>
>> David
>>

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: dotplot.R
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210209/74664e3d/attachment.ksh>

From p@rkhur@ @end|ng |rom |nd|@n@@edu  Wed Feb 10 03:14:13 2021
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David F.)
Date: Wed, 10 Feb 2021 02:14:13 +0000
Subject: [R] Need help using lattice
In-Reply-To: <d51371b9-b70c-6b26-e619-ca4aa737caa7@xs4all.nl>
References: <b07efbaa-70b8-ede0-eb87-98770cf4b475@xs4all.nl>
 <BN7PR08MB4114BA619E96AC0F715FB57DD08F9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <feb489da-1b53-5eeb-d03f-e21c54a1aaad@xs4all.nl>
 <BN7PR08MB411484A4446986C25C6C9A20D08E9@BN7PR08MB4114.namprd08.prod.outlook.com>,
 <d51371b9-b70c-6b26-e619-ca4aa737caa7@xs4all.nl>
Message-ID: <BN7PR08MB411446D0CC2EE808DC1B999FD08D9@BN7PR08MB4114.namprd08.prod.outlook.com>

Thanks.  What editor do you use?  I'm working in a Mac, if that makes a difference.

From: Gerrit Draisma <gdraisma at xs4all.nl>
Date: Tuesday, February 9, 2021 at 5:10 PM
To: Parkhurst, David F. <parkhurs at indiana.edu>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Need help using lattice
Ha David,
I do not know.
It must be that your AprtoDec object? is different from month.abb.
Anyhow it should contain the labels for all twelve months!
If I copy your command in an interactive session I just get the message
that AprtoDec is not defined.

I understand that you type the commands interactively in an R session?
I usually prefer using an editor to write the program, and execute with a
?> source("dotplot.R",echo=TRUE)
command.
I like an editor with syntax highlighting and shows matching brackets.

I have attached my dotplot.R to this mail.

Gerrit


From chr|@ho|d @end|ng |rom p@yctc@org  Wed Feb 10 09:45:19 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 10 Feb 2021 08:45:19 +0000 (GMT)
Subject: [R] .Rprofile with devtools::install_github() loops
Message-ID: <2072799638.92720.1612946719963.JavaMail.zimbra@psyctc.org>

I am sure this must be documented somewhere and that I'm missing something obvious but some searching isn't finding an answer and I'm sure there is one.

I have created a very simple package on GitHub and want my machines (other than the one that built it) to load it when they start R using devtools::install_github()

The install_github() call works fine from the console but when I put it in my .Rprofile it just loops on restarting R.  I _think_ it may be that devtools::install_github()
is restarting the session as I found one thing on the web suggesting that may be the case.  However, I think if it were the case it would be documented and I'd find
far more about that.

OK.  So my .Rprofile is:

print("This is a message from /home/chris/.Renviron: hello Chris!")
.First <- function(){
    devtools::install_github("xxxx/yyyy")
}
print("OK, off you go!")

I have obscured my package to protect my blushes but I get the same behaviour with r-lib/devtools and, as I say, my little package loads OK from the console.

You can see I tried wrapping it in a .First() function but that didn't change anything.

True both on a Linux machine and a Windows machine.

OK.  Anyone save me from more dents in the wall and frontal lobe damage?!

TIA,

Chris

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Feb 10 17:48:18 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 10 Feb 2021 08:48:18 -0800
Subject: [R] .Rprofile with devtools::install_github() loops
In-Reply-To: <2072799638.92720.1612946719963.JavaMail.zimbra@psyctc.org>
References: <2072799638.92720.1612946719963.JavaMail.zimbra@psyctc.org>
Message-ID: <CAHqSRuRR4ymy-_0cMgWOSa8Wn5=rBpYiR_c4EKX2mDG4CLD2wA@mail.gmail.com>

Installing a package involves running several R subprocesses, each of
which is running that .Rprofile.  You may be able to stop the infinite
recursion by setting an environment variable that subprocesses can
check.  E.g. replace
  install_github("xxx/yyy")
with
  if (Sys.getenv("INSTALLING_FROM_GITHUB", unset="no") == "no") {
    Sys.setenv(INSTALLING_FROM_GITHUB="yes")
    install_github("xxx/yyy")
  }

[This is totally untested.]

-Bill

On Wed, Feb 10, 2021 at 12:45 AM Chris Evans <chrishold at psyctc.org> wrote:
>
> I am sure this must be documented somewhere and that I'm missing something obvious but some searching isn't finding an answer and I'm sure there is one.
>
> I have created a very simple package on GitHub and want my machines (other than the one that built it) to load it when they start R using devtools::install_github()
>
> The install_github() call works fine from the console but when I put it in my .Rprofile it just loops on restarting R.  I _think_ it may be that devtools::install_github()
> is restarting the session as I found one thing on the web suggesting that may be the case.  However, I think if it were the case it would be documented and I'd find
> far more about that.
>
> OK.  So my .Rprofile is:
>
> print("This is a message from /home/chris/.Renviron: hello Chris!")
> .First <- function(){
>     devtools::install_github("xxxx/yyyy")
> }
> print("OK, off you go!")
>
> I have obscured my package to protect my blushes but I get the same behaviour with r-lib/devtools and, as I say, my little package loads OK from the console.
>
> You can see I tried wrapping it in a .First() function but that didn't change anything.
>
> True both on a Linux machine and a Windows machine.
>
> OK.  Anyone save me from more dents in the wall and frontal lobe damage?!
>
> TIA,
>
> Chris
>
> --
> Small contribution in our coronavirus rigours:
> https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/
>
> Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
> I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
> but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
>    https://www.psyctc.org/psyctc/
> and a site I manage for CORE and CORE system trust at:
>    http://www.coresystemtrust.org.uk/
> I have "semigrated" to France, see:
>    https://www.psyctc.org/pelerinage2016/semigrating-to-france/
>    https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/
>
> If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
>    https://www.psyctc.org/pelerinage2016/ceworkdiary/
> Beware: French time, generally an hour ahead of UK.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From chr|@ho|d @end|ng |rom p@yctc@org  Thu Feb 11 14:13:13 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Thu, 11 Feb 2021 13:13:13 +0000 (GMT)
Subject: [R] .Rprofile with devtools::install_github() loops
In-Reply-To: <CAHqSRuRR4ymy-_0cMgWOSa8Wn5=rBpYiR_c4EKX2mDG4CLD2wA@mail.gmail.com>
References: <2072799638.92720.1612946719963.JavaMail.zimbra@psyctc.org>
 <CAHqSRuRR4ymy-_0cMgWOSa8Wn5=rBpYiR_c4EKX2mDG4CLD2wA@mail.gmail.com>
Message-ID: <1236961850.2149547.1613049193129.JavaMail.zimbra@psyctc.org>

Works perfectly.  Brilliant.

I have added this, with appreciation to you Bill, to my "post" about creating my first (and probably only!) R package at:

https://www.psyctc.org/Rblog/posts/2021-02-10-making-my-first-usable-package/

Thanks Bill, very best all,

Chris

----- Original Message -----
> From: "Bill Dunlap" <williamwdunlap at gmail.com>
> To: "Chris Evans" <chrishold at psyctc.org>
> Cc: "R-help" <r-help at r-project.org>
> Sent: Wednesday, 10 February, 2021 16:48:18
> Subject: Re: [R] .Rprofile with devtools::install_github() loops

> Installing a package involves running several R subprocesses, each of
> which is running that .Rprofile.  You may be able to stop the infinite
> recursion by setting an environment variable that subprocesses can
> check.  E.g. replace
>  install_github("xxx/yyy")
> with
>  if (Sys.getenv("INSTALLING_FROM_GITHUB", unset="no") == "no") {
>    Sys.setenv(INSTALLING_FROM_GITHUB="yes")
>    install_github("xxx/yyy")
>  }
> 
> [This is totally untested.]
> 
> -Bill
> 
> On Wed, Feb 10, 2021 at 12:45 AM Chris Evans <chrishold at psyctc.org> wrote:
>>
>> I am sure this must be documented somewhere and that I'm missing something
>> obvious but some searching isn't finding an answer and I'm sure there is one.
>>
>> I have created a very simple package on GitHub and want my machines (other than
>> the one that built it) to load it when they start R using
>> devtools::install_github()
>>
>> The install_github() call works fine from the console but when I put it in my
>> .Rprofile it just loops on restarting R.  I _think_ it may be that
>> devtools::install_github()
>> is restarting the session as I found one thing on the web suggesting that may be
>> the case.  However, I think if it were the case it would be documented and I'd
>> find
>> far more about that.
>>
>> OK.  So my .Rprofile is:
>>
>> print("This is a message from /home/chris/.Renviron: hello Chris!")
>> .First <- function(){
>>     devtools::install_github("xxxx/yyyy")
>> }
>> print("OK, off you go!")
>>
>> I have obscured my package to protect my blushes but I get the same behaviour
>> with r-lib/devtools and, as I say, my little package loads OK from the console.
>>
>> You can see I tried wrapping it in a .First() function but that didn't change
>> anything.
>>
>> True both on a Linux machine and a Windows machine.
>>
>> OK.  Anyone save me from more dents in the wall and frontal lobe damage?!
>>
>> TIA,
>>
>> Chris
>>
>> --
>> Small contribution in our coronavirus rigours:
>> https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/
>>
>> Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield
>> <chris.evans at sheffield.ac.uk>
>> I do some consultation work for the University of Roehampton
>> <chris.evans at roehampton.ac.uk> and other places
>> but <chris at psyctc.org> remains my main Email address.  I have a work web site
>> at:
>>    https://www.psyctc.org/psyctc/
>> and a site I manage for CORE and CORE system trust at:
>>    http://www.coresystemtrust.org.uk/
>> I have "semigrated" to France, see:
>>    https://www.psyctc.org/pelerinage2016/semigrating-to-france/
>>    https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/
>>
>> If you want an Emeeting, I am trying to keep them to Thursdays and my diary is
>> at:
>>    https://www.psyctc.org/pelerinage2016/ceworkdiary/
>> Beware: French time, generally an hour ahead of UK.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From rom@nu@ej|ke1971 @end|ng |rom gm@||@com  Fri Feb 12 15:11:44 2021
From: rom@nu@ej|ke1971 @end|ng |rom gm@||@com (Romanus Ejike)
Date: Fri, 12 Feb 2021 15:11:44 +0100
Subject: [R] Plotting world maps with locations.
Message-ID: <CACKDqucNhJ-ubmHmoyKgkYNxDDkk9SVh9ZsY-D4ZWq2UMMAO+w@mail.gmail.com>

Please, I need help from anyone that can solve this problem.
I wanted to plot a world map with locations and names of the locations but
could not. The codes I have tried are as shown below.
ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R

R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> NMdata <-
read.table("NM1989.txt",col.names=c("SNAME","FNAME","NMTYPE","LAT","LON","ALTI"))
> library(ggplot2)
> library(sf)
Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
> library(rnaturalearth)
> library(rnaturalearthdata)
> world <- ne_countries(scale = "medium", returnclass = "sf")
> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
+ coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
FALSE) + ggtitle("World map") + points(NMdata$LON,Nmdata$LAT,col = "red",
cex = 0.01)
Error in xy.coords(x, y) : object 'Nmdata' not found
> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
+ coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col = "red",
cex = 0.01)
Error in plot.xy(xy.coords(x, y), type = type, ...) :
  plot.new has not been called yet
In addition: Warning messages:
1: In xy.coords(x, y) : NAs introduced by coercion
2: In xy.coords(x, y) : NAs introduced by coercion
3: In (function (display = "", width, height, pointsize, gamma, bg,  :
  locale not supported by Xlib: some X ops will operate in C locale
4: In (function (display = "", width, height, pointsize, gamma, bg,  :
  X cannot set locale modifiers
> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
+ coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col = "red",
cex = 0.01, pch = 20)
Error in plot.xy(xy.coords(x, y), type = type, ...) :
  plot.new has not been called yet
In addition: Warning messages:
1: In xy.coords(x, y) : NAs introduced by coercion
2: In xy.coords(x, y) : NAs introduced by coercion.
I have also tried the codes below but it did not show the locations.
ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R

R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library("ggplot2")
> library(sf)
Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
> library("rnaturalearth")
> library("rnaturalearthdata")
> theme_set(theme_bw())
> world <- ne_countries(scale = "medium", returnclass = "sf")
> class(world)
[1] "sf"         "data.frame"
> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
+
+ + ggtitle("World map") + coord_sf(crs = "+proj=laea +lat_0=52 +lon_0=10
+x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ")
Error in +ggtitle("World map") : invalid argument to unary operator
> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
+ ggtitle("World map") + coord_sf(crs = "+proj=laea + lat_0=52 + lon_0=10 +
x_0=4321000 + y_0=3210000 + ellps=GRS80 + units=m + no_defs ")
Warning messages:
1: In (function (display = "", width, height, pointsize, gamma, bg,  :
  locale not supported by Xlib: some X ops will operate in C locale
2: In (function (display = "", width, height, pointsize, gamma, bg,  :
  X cannot set locale modifiers.
I really appreciate any help rendered. Thanks

	[[alternative HTML version deleted]]


From |n|orm@t|que @end|ng |rom b|||@rd-|r@nco|@-m@r|e@eu  Fri Feb 12 16:05:27 2021
From: |n|orm@t|que @end|ng |rom b|||@rd-|r@nco|@-m@r|e@eu (Informatique)
Date: Fri, 12 Feb 2021 16:05:27 +0100
Subject: [R] Axis whitout all the row, that contains time
Message-ID: <20210212160527.e57738c1588ea6d8ab95c53c@billard-francois-marie.eu>

Hello,

i'm using Rstudio from a few day, and i have some information in a CVS file, take every five second, format of the time is HH:MM:SS.
I use the hour on the X axis, but i don't want having all the time print. For example only every 10 values.

I think it will be possible with   scale_x_datetime(breaks = date_breaks(XXX)

but i don't understand how select every 20 s.

Thank's for your help

Fran?ois-marie BILLARD
-- 
Informatique <informatique at billard-francois-marie.eu>


From jrkr|de@u @end|ng |rom gm@||@com  Fri Feb 12 18:30:18 2021
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Fri, 12 Feb 2021 12:30:18 -0500
Subject: [R] Axis whitout all the row, that contains time
In-Reply-To: <20210212160527.e57738c1588ea6d8ab95c53c@billard-francois-marie.eu>
References: <20210212160527.e57738c1588ea6d8ab95c53c@billard-francois-marie.eu>
Message-ID: <CAKZQJMCwkvDZgot0j3GOQKJhhm-xKhYGu1D5Uqjw7vgEzogvwg@mail.gmail.com>

With a dat.frame "mydata" create a new variable mydata$num
mydata$num  <-  1:nrow(mydata)

new_data  <-  subset(mydata, num == 10)

plot using new_data

On Fri, 12 Feb 2021 at 10:35, Informatique <
informatique at billard-francois-marie.eu> wrote:

> Hello,
>
> i'm using Rstudio from a few day, and i have some information in a CVS
> file, take every five second, format of the time is HH:MM:SS.
> I use the hour on the X axis, but i don't want having all the time print.
> For example only every 10 values.
>
> I think it will be possible with   scale_x_datetime(breaks =
> date_breaks(XXX)
>
> but i don't understand how select every 20 s.
>
> Thank's for your help
>
> Fran?ois-marie BILLARD
> --
> Informatique <informatique at billard-francois-marie.eu>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Feb 12 19:24:35 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 12 Feb 2021 18:24:35 +0000
Subject: [R] Axis whitout all the row, that contains time
In-Reply-To: <20210212160527.e57738c1588ea6d8ab95c53c@billard-francois-marie.eu>
References: <20210212160527.e57738c1588ea6d8ab95c53c@billard-francois-marie.eu>
Message-ID: <bab48684-d6bd-04ca-99bf-1f302fbcdbd5@sapo.pt>

Hello,

In order to select every 20 s, set the date_breaks = "20 secs", not the 
breaks.
The axis labels are also formatted, with date_labels, standard datetime 
format strings are used for this. And rotated, not part of the question.

# Create some data
set.seed(2021)
time <- seq(as.POSIXct("2021-02-11"), as.POSIXct("2021-02-11 00:29:59"), 
by = "1 secs")
y <- cumsum(rnorm(length(time)))
df1 <- data.frame(time, y)

# Plot the data
library(ggplot2)

ggplot(df1, aes(time, y)) +
   geom_line() +
   scale_x_datetime(date_breaks = "20 secs", date_labels = "%M:%S") +
   theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1, 
size = 5))


Hope this helps,

Rui Barradas

?s 15:05 de 12/02/21, Informatique escreveu:
> Hello,
> 
> i'm using Rstudio from a few day, and i have some information in a CVS file, take every five second, format of the time is HH:MM:SS.
> I use the hour on the X axis, but i don't want having all the time print. For example only every 10 values.
> 
> I think it will be possible with   scale_x_datetime(breaks = date_breaks(XXX)
> 
> but i don't understand how select every 20 s.
> 
> Thank's for your help
> 
> Fran?ois-marie BILLARD
>


From j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng  Fri Feb 12 22:34:44 2021
From: j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng (Jibrin Alhassan)
Date: Fri, 12 Feb 2021 22:34:44 +0100
Subject: [R] Plotting world maps with locations.
In-Reply-To: <CACKDqucNhJ-ubmHmoyKgkYNxDDkk9SVh9ZsY-D4ZWq2UMMAO+w@mail.gmail.com>
References: <CACKDqucNhJ-ubmHmoyKgkYNxDDkk9SVh9ZsY-D4ZWq2UMMAO+w@mail.gmail.com>
Message-ID: <CAEGeL+F5WhE=zQuipN9W7ZGNibBjOp9XgsNtKpb=sZeCPJ2mxQ@mail.gmail.com>

Hello Romanus,
You are to post only the code and the error messages and not all the
information from your terminal in R session.

On Fri, Feb 12, 2021, 4:35 PM Romanus Ejike <romanusejike1971 at gmail.com>
wrote:

> Please, I need help from anyone that can solve this problem.
> I wanted to plot a world map with locations and names of the locations but
> could not. The codes I have tried are as shown below.
> ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R
>
> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>   Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
> > NMdata <-
>
> read.table("NM1989.txt",col.names=c("SNAME","FNAME","NMTYPE","LAT","LON","ALTI"))
> > library(ggplot2)
> > library(sf)
> Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
> > library(rnaturalearth)
> > library(rnaturalearthdata)
> > world <- ne_countries(scale = "medium", returnclass = "sf")
> > ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
> FALSE) + ggtitle("World map") + points(NMdata$LON,Nmdata$LAT,col = "red",
> cex = 0.01)
> Error in xy.coords(x, y) : object 'Nmdata' not found
> > ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
> FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col = "red",
> cex = 0.01)
> Error in plot.xy(xy.coords(x, y), type = type, ...) :
>   plot.new has not been called yet
> In addition: Warning messages:
> 1: In xy.coords(x, y) : NAs introduced by coercion
> 2: In xy.coords(x, y) : NAs introduced by coercion
> 3: In (function (display = "", width, height, pointsize, gamma, bg,  :
>   locale not supported by Xlib: some X ops will operate in C locale
> 4: In (function (display = "", width, height, pointsize, gamma, bg,  :
>   X cannot set locale modifiers
> > ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
> FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col = "red",
> cex = 0.01, pch = 20)
> Error in plot.xy(xy.coords(x, y), type = type, ...) :
>   plot.new has not been called yet
> In addition: Warning messages:
> 1: In xy.coords(x, y) : NAs introduced by coercion
> 2: In xy.coords(x, y) : NAs introduced by coercion.
> I have also tried the codes below but it did not show the locations.
> ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R
>
> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>   Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
> > library("ggplot2")
> > library(sf)
> Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
> > library("rnaturalearth")
> > library("rnaturalearthdata")
> > theme_set(theme_bw())
> > world <- ne_countries(scale = "medium", returnclass = "sf")
> > class(world)
> [1] "sf"         "data.frame"
> > ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
> +
> + + ggtitle("World map") + coord_sf(crs = "+proj=laea +lat_0=52 +lon_0=10
> +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ")
> Error in +ggtitle("World map") : invalid argument to unary operator
> > ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
> + ggtitle("World map") + coord_sf(crs = "+proj=laea + lat_0=52 + lon_0=10 +
> x_0=4321000 + y_0=3210000 + ellps=GRS80 + units=m + no_defs ")
> Warning messages:
> 1: In (function (display = "", width, height, pointsize, gamma, bg,  :
>   locale not supported by Xlib: some X ops will operate in C locale
> 2: In (function (display = "", width, height, pointsize, gamma, bg,  :
>   X cannot set locale modifiers.
> I really appreciate any help rendered. Thanks
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Fri Feb 12 22:53:27 2021
From: @purd|e@@ @end|ng |rom gm@||@com (=?UTF-8?B?QWJieSBTcHVyZGxlICgvyZnLiGJpLyk=?=)
Date: Sat, 13 Feb 2021 10:53:27 +1300
Subject: [R] Is it Possible to Create S4 Function Objects?
Message-ID: <CAB8pepzNkFxboXmzQh9T9MJH98gYtEW1qp4eUDCAGT2ps698mg@mail.gmail.com>

Dear All,

I was wondering if it's possible to create S4 function objects?
(Or S4 closures, if you prefer).

i.e.
An R object, that is both an S4 object, and a function.

This would allow one to write:

> f <- constructor4.functionobj ()
> f ()
> f at slot.of.f

I've searched for this, but I can't find any examples.

If it's possible, then that leads to the question of if/how the body
of f() could directly access the value of the slot?

> f <- function ()
>    this at slot.of.f

I should note that the more common approach of storing values in a
function's environment, doesn't work well for top-level objects.
This approach is dependent on immutability of the function's data, and
I'm reluctant to create such constraints.


From robert@dod|er @end|ng |rom gm@||@com  Sat Feb 13 00:05:33 2021
From: robert@dod|er @end|ng |rom gm@||@com (Robert Dodier)
Date: Fri, 12 Feb 2021 15:05:33 -0800
Subject: [R] ISO recommendations for plot output format from R to MS Word
Message-ID: <CAAsY_sQ7Q1J6QiWASUP56wvDaJr-Dewu6asC=1+dOcg70yXjbg@mail.gmail.com>

I need to export plots (constructed with plot and with ggplot) from R
to be imported into a MS Word document.

I am working with MS Word for Mac version 16.16.10 (copyright 2018)
and R versions 3.6.3 and/or 4.0.3.

I have verified that the version of MS Word which I am working with
can import SVG exported from R via svglite.

What I am mostly worried about is that other people with possibly
different versions of MS Word will not be able to view the document
correctly.

Towards the goal of creating an MS Word document which others with
unspecified versions of MS Word can view correctly, in what format
should I export figures from R?

I am working with a fairly large number of figures so there is some
motivation towards a fully automated process.

I have searched various forums and archives, but much of the
information may be out of date, so I am hoping that you can help me
with some up to date information.

Thank you very much for any light you can shed on this problem.

Robert Dodier


From j@zh@o @end|ng |rom ye@h@net  Sat Feb 13 01:43:37 2021
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Sat, 13 Feb 2021 08:43:37 +0800
Subject: [R] 
 ISO recommendations for plot output format from R to MS Word
In-Reply-To: <CAAsY_sQ7Q1J6QiWASUP56wvDaJr-Dewu6asC=1+dOcg70yXjbg@mail.gmail.com>
References: <CAAsY_sQ7Q1J6QiWASUP56wvDaJr-Dewu6asC=1+dOcg70yXjbg@mail.gmail.com>
Message-ID: <75131f74-40d8-228d-9a12-2775bfdc02e7@yeah.net>

On 2021/2/13 7:05, Robert Dodier wrote:
> I need to export plots (constructed with plot and with ggplot) from R
> to be imported into a MS Word document.
> 
> I am working with MS Word for Mac version 16.16.10 (copyright 2018)
> and R versions 3.6.3 and/or 4.0.3.
> 
> I have verified that the version of MS Word which I am working with
> can import SVG exported from R via svglite.
> 
> What I am mostly worried about is that other people with possibly
> different versions of MS Word will not be able to view the document
> correctly.
> 

On Windows, MS Word can not display the SVG imported. In my memory, the 
only fully supported vector graphic format is "emf" or "wmf" (both a 
same?). Encapsulated PostScript(EPS) seems to be supported with specific 
plugin (I am not very sure about it).

However, some figures produced by win.metafile() could display correctly 
in Word, but weird when convert to PDF.

> Towards the goal of creating an MS Word document which others with
> unspecified versions of MS Word can view correctly, in what format
> should I export figures from R?
> 
> I am working with a fairly large number of figures so there is some
> motivation towards a fully automated process.
> 
> I have searched various forums and archives, but much of the
> information may be out of date, so I am hoping that you can help me
> with some up to date information.
> 
> Thank you very much for any light you can shed on this problem.
> 
> Robert Dodier
>


From g||ted|||e2014 @end|ng |rom gm@||@com  Sat Feb 13 03:49:37 2021
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Sat, 13 Feb 2021 03:49:37 +0100
Subject: [R] Just Published, Thanks for your assistance
Message-ID: <CAC8ss30J=5cOmxVWk2GvXU7E6xjdz+JWXPPoni1ORg50rOjtAQ@mail.gmail.com>

Dear Experts,
In the first few months of last year, I was asking a question based on of
one my codes. I received useful help here. Many thanks again.

I am glad to share one of the results of the script. I acknowledged the
entire list and some specific individuals that contributed.

Best regards.
Ogbos
https://academic.oup.com/mnras/article/502/1/300/6054537?guestAccessKey=9d83237e-54ae-45b1-b802-90ddb3b9e837
<http://track.smtpserver.email/9032119/c?p=qkplikjkaCj2OGDB3c39cGR17j5O5NXa-o5n9GT_aedGKYD-scNsPuFna_E563ULlU3qUpKJeYMPTJ9K7IWb917c98GIg-BSaEfHEDGIyWD0n4SF7Eoyk-3u-cE3XPixSHbJDJRS_ONH3i2aDmD5qbYjTCkl_LaUb9TCsAcDr8OnRm4sT-k27Nqx5qj9b_opht3iZZllX2Efn_IbHUDv2ktoGkGGudUq4UUFnT96BmTChRzNPYJJrh5URxukdYJk>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Feb 13 06:01:17 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 12 Feb 2021 21:01:17 -0800
Subject: [R] Plotting world maps with locations.
In-Reply-To: <CAEGeL+F5WhE=zQuipN9W7ZGNibBjOp9XgsNtKpb=sZeCPJ2mxQ@mail.gmail.com>
References: <CAEGeL+F5WhE=zQuipN9W7ZGNibBjOp9XgsNtKpb=sZeCPJ2mxQ@mail.gmail.com>
Message-ID: <B75BDCE4-224D-4FB4-9906-E660579E626D@comcast.net>



Sent from my iPhone

> On Feb 12, 2021, at 1:35 PM, Jibrin Alhassan <jibrin.alhassan at unn.edu.ng> wrote:
> 
> ?Hello Romanus,
> You are to post only the code and the error messages and not all the
> information from your terminal in R session.

That?s not actually the best practice for rhelp questions. More info is better than less. What?s missing, however, is the data. 

? 
David
> 
>> On Fri, Feb 12, 2021, 4:35 PM Romanus Ejike <romanusejike1971 at gmail.com>
>> wrote:
>> 
>> Please, I need help from anyone that can solve this problem.
>> I wanted to plot a world map with locations and names of the locations but
>> could not. The codes I have tried are as shown below.
>> ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R
>> 
>> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
>> Copyright (C) 2020 The R Foundation for Statistical Computing
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>> 
>>  Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>>> NMdata <-
>> 
>> read.table("NM1989.txt",col.names=c("SNAME","FNAME","NMTYPE","LAT","LON","ALTI"))
>>> library(ggplot2)
>>> library(sf)
>> Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
>>> library(rnaturalearth)
>>> library(rnaturalearthdata)
>>> world <- ne_countries(scale = "medium", returnclass = "sf")
>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
>> FALSE) + ggtitle("World map") + points(NMdata$LON,Nmdata$LAT,col = "red",
>> cex = 0.01)
>> Error in xy.coords(x, y) : object 'Nmdata' not found
>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
>> FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col = "red",
>> cex = 0.01)
>> Error in plot.xy(xy.coords(x, y), type = type, ...) :
>>  plot.new has not been called yet
>> In addition: Warning messages:
>> 1: In xy.coords(x, y) : NAs introduced by coercion
>> 2: In xy.coords(x, y) : NAs introduced by coercion
>> 3: In (function (display = "", width, height, pointsize, gamma, bg,  :
>>  locale not supported by Xlib: some X ops will operate in C locale
>> 4: In (function (display = "", width, height, pointsize, gamma, bg,  :
>>  X cannot set locale modifiers
>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
>> FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col = "red",
>> cex = 0.01, pch = 20)
>> Error in plot.xy(xy.coords(x, y), type = type, ...) :
>>  plot.new has not been called yet
>> In addition: Warning messages:
>> 1: In xy.coords(x, y) : NAs introduced by coercion
>> 2: In xy.coords(x, y) : NAs introduced by coercion.
>> I have also tried the codes below but it did not show the locations.
>> ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R
>> 
>> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
>> Copyright (C) 2020 The R Foundation for Statistical Computing
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>> 
>>  Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>>> library("ggplot2")
>>> library(sf)
>> Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
>>> library("rnaturalearth")
>>> library("rnaturalearthdata")
>>> theme_set(theme_bw())
>>> world <- ne_countries(scale = "medium", returnclass = "sf")
>>> class(world)
>> [1] "sf"         "data.frame"
>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>> +
>> + + ggtitle("World map") + coord_sf(crs = "+proj=laea +lat_0=52 +lon_0=10
>> +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ")
>> Error in +ggtitle("World map") : invalid argument to unary operator
>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>> + ggtitle("World map") + coord_sf(crs = "+proj=laea + lat_0=52 + lon_0=10 +
>> x_0=4321000 + y_0=3210000 + ellps=GRS80 + units=m + no_defs ")
>> Warning messages:
>> 1: In (function (display = "", width, height, pointsize, gamma, bg,  :
>>  locale not supported by Xlib: some X ops will operate in C locale
>> 2: In (function (display = "", width, height, pointsize, gamma, bg,  :
>>  X cannot set locale modifiers.
>> I really appreciate any help rendered. Thanks
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Feb 13 06:04:38 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 12 Feb 2021 21:04:38 -0800
Subject: [R] Plotting world maps with locations.
In-Reply-To: <B75BDCE4-224D-4FB4-9906-E660579E626D@comcast.net>
References: <B75BDCE4-224D-4FB4-9906-E660579E626D@comcast.net>
Message-ID: <885BB689-75B4-40E0-9085-9E43F7D4D76A@comcast.net>



Sent from my iPhone

> On Feb 12, 2021, at 9:01 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> ?
> 
> Sent from my iPhone
> 
>> On Feb 12, 2021, at 1:35 PM, Jibrin Alhassan <jibrin.alhassan at unn.edu.ng> wrote:
>> 
>> ?Hello Romanus,
>> You are to post only the code and the error messages and not all the
>> information from your terminal in R session.
> 
> That?s not actually the best practice for rhelp questions. More info is better than less. What?s missing, however, is the data. 
> 
> ? 
> David
>> 
>>> On Fri, Feb 12, 2021, 4:35 PM Romanus Ejike <romanusejike1971 at gmail.com>
>>> wrote:
>>> 
>>> Please, I need help from anyone that can solve this problem.
>>> I wanted to plot a world map with locations and names of the locations but
>>> could not. The codes I have tried are as shown below.
>>> ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R
>>> 
>>> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
>>> Copyright (C) 2020 The R Foundation for Statistical Computing
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>> 
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>> 
>>> Natural language support but running in an English locale
>>> 
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>> 
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>> 
>>>> NMdata <-
>>> 
>>> read.table("NM1989.txt",col.names=c("SNAME","FNAME","NMTYPE","LAT","LON","ALTI"))
Here the file is named NMdata. 

>>>> library(ggplot2)
>>>> library(sf)
>>> Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
>>>> library(rnaturalearth)
>>>> library(rnaturalearthdata)
>>>> world <- ne_countries(scale = "medium", returnclass = "sf")
>>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
>>> FALSE) + ggtitle("World map") + points(NMdata$LON,Nmdata$LAT,col = "red",
>>> cex = 0.01)
>>> Error in xy.coords(x, y) : object 'Nmdata' not found

But the error says Nmdata not found. SPELLING!!!!

? 
David
>>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
>>> FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col = "red",
>>> cex = 0.01)
>>> Error in plot.xy(xy.coords(x, y), type = type, ...) :
>>> plot.new has not been called yet
>>> In addition: Warning messages:
>>> 1: In xy.coords(x, y) : NAs introduced by coercion
>>> 2: In xy.coords(x, y) : NAs introduced by coercion
>>> 3: In (function (display = "", width, height, pointsize, gamma, bg,  :
>>> locale not supported by Xlib: some X ops will operate in C locale
>>> 4: In (function (display = "", width, height, pointsize, gamma, bg,  :
>>> X cannot set locale modifiers
>>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
>>> FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col = "red",
>>> cex = 0.01, pch = 20)
>>> Error in plot.xy(xy.coords(x, y), type = type, ...) :
>>> plot.new has not been called yet
>>> In addition: Warning messages:
>>> 1: In xy.coords(x, y) : NAs introduced by coercion
>>> 2: In xy.coords(x, y) : NAs introduced by coercion.
>>> I have also tried the codes below but it did not show the locations.
>>> ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R
>>> 
>>> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
>>> Copyright (C) 2020 The R Foundation for Statistical Computing
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>> 
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>> 
>>> Natural language support but running in an English locale
>>> 
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>> 
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>> 
>>>> library("ggplot2")
>>>> library(sf)
>>> Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
>>>> library("rnaturalearth")
>>>> library("rnaturalearthdata")
>>>> theme_set(theme_bw())
>>>> world <- ne_countries(scale = "medium", returnclass = "sf")
>>>> class(world)
>>> [1] "sf"         "data.frame"
>>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>>> +
>>> + + ggtitle("World map") + coord_sf(crs = "+proj=laea +lat_0=52 +lon_0=10
>>> +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ")
>>> Error in +ggtitle("World map") : invalid argument to unary operator
>>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y = "Latitude")
>>> + ggtitle("World map") + coord_sf(crs = "+proj=laea + lat_0=52 + lon_0=10 +
>>> x_0=4321000 + y_0=3210000 + ellps=GRS80 + units=m + no_defs ")
>>> Warning messages:
>>> 1: In (function (display = "", width, height, pointsize, gamma, bg,  :
>>> locale not supported by Xlib: some X ops will operate in C locale
>>> 2: In (function (display = "", width, height, pointsize, gamma, bg,  :
>>> X cannot set locale modifiers.
>>> I really appreciate any help rendered. Thanks
>>> 
>>>       [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>> 
>>   [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Feb 13 07:55:11 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 13 Feb 2021 09:55:11 +0300
Subject: [R] 
 ISO recommendations for plot output format from R to MS Word
In-Reply-To: <CAAsY_sQ7Q1J6QiWASUP56wvDaJr-Dewu6asC=1+dOcg70yXjbg@mail.gmail.com>
References: <CAAsY_sQ7Q1J6QiWASUP56wvDaJr-Dewu6asC=1+dOcg70yXjbg@mail.gmail.com>
Message-ID: <20210213095511.722507e7@Tarkus>

On Fri, 12 Feb 2021 15:05:33 -0800
Robert Dodier <robert.dodier at gmail.com> wrote:

> Towards the goal of creating an MS Word document which others with
> unspecified versions of MS Word can view correctly, in what format
> should I export figures from R?

A cross-platform plotting device designed specifically for word
processors is devEMF. In my experience, best compatibility with Word
can be achieved by creating figures with parameters (emfPlus = TRUE,
emfPlusFont = FALSE, emfPlusRaster = TRUE), but I only checked Word
2003 and 2010 (for Windows).

-- 
Best regards,
Ivan


From rom@nu@ej|ke1971 @end|ng |rom gm@||@com  Sat Feb 13 13:44:37 2021
From: rom@nu@ej|ke1971 @end|ng |rom gm@||@com (Romanus Ejike)
Date: Sat, 13 Feb 2021 13:44:37 +0100
Subject: [R] Plotting world maps with locations.
In-Reply-To: <885BB689-75B4-40E0-9085-9E43F7D4D76A@comcast.net>
References: <B75BDCE4-224D-4FB4-9906-E660579E626D@comcast.net>
 <885BB689-75B4-40E0-9085-9E43F7D4D76A@comcast.net>
Message-ID: <CACKDqucdEhc_MZkRcHqeR=ks8ATUTKhJhYuVBoyrq15uZSttJg@mail.gmail.com>

Awesome, thanks! I will make corrections and see if it will work.

On Sat, Feb 13, 2021 at 6:04 AM David Winsemius <dwinsemius at comcast.net>
wrote:

>
>
> Sent from my iPhone
>
> > On Feb 12, 2021, at 9:01 PM, David Winsemius <dwinsemius at comcast.net>
> wrote:
> >
> > ?
> >
> > Sent from my iPhone
> >
> >> On Feb 12, 2021, at 1:35 PM, Jibrin Alhassan <
> jibrin.alhassan at unn.edu.ng> wrote:
> >>
> >> ?Hello Romanus,
> >> You are to post only the code and the error messages and not all the
> >> information from your terminal in R session.
> >
> > That?s not actually the best practice for rhelp questions. More info is
> better than less. What?s missing, however, is the data.
> >
> > ?
> > David
> >>
> >>> On Fri, Feb 12, 2021, 4:35 PM Romanus Ejike <
> romanusejike1971 at gmail.com>
> >>> wrote:
> >>>
> >>> Please, I need help from anyone that can solve this problem.
> >>> I wanted to plot a world map with locations and names of the locations
> but
> >>> could not. The codes I have tried are as shown below.
> >>> ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R
> >>>
> >>> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
> >>> Copyright (C) 2020 The R Foundation for Statistical Computing
> >>> Platform: x86_64-pc-linux-gnu (64-bit)
> >>>
> >>> R is free software and comes with ABSOLUTELY NO WARRANTY.
> >>> You are welcome to redistribute it under certain conditions.
> >>> Type 'license()' or 'licence()' for distribution details.
> >>>
> >>> Natural language support but running in an English locale
> >>>
> >>> R is a collaborative project with many contributors.
> >>> Type 'contributors()' for more information and
> >>> 'citation()' on how to cite R or R packages in publications.
> >>>
> >>> Type 'demo()' for some demos, 'help()' for on-line help, or
> >>> 'help.start()' for an HTML browser interface to help.
> >>> Type 'q()' to quit R.
> >>>
> >>>> NMdata <-
> >>>
> >>>
> read.table("NM1989.txt",col.names=c("SNAME","FNAME","NMTYPE","LAT","LON","ALTI"))
> Here the file is named NMdata.
>
> >>>> library(ggplot2)
> >>>> library(sf)
> >>> Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
> >>>> library(rnaturalearth)
> >>>> library(rnaturalearthdata)
> >>>> world <- ne_countries(scale = "medium", returnclass = "sf")
> >>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y =
> "Latitude")
> >>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
> >>> FALSE) + ggtitle("World map") + points(NMdata$LON,Nmdata$LAT,col =
> "red",
> >>> cex = 0.01)
> >>> Error in xy.coords(x, y) : object 'Nmdata' not found
>
> But the error says Nmdata not found. SPELLING!!!!
>
> ?
> David
> >>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y =
> "Latitude")
> >>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
> >>> FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col =
> "red",
> >>> cex = 0.01)
> >>> Error in plot.xy(xy.coords(x, y), type = type, ...) :
> >>> plot.new has not been called yet
> >>> In addition: Warning messages:
> >>> 1: In xy.coords(x, y) : NAs introduced by coercion
> >>> 2: In xy.coords(x, y) : NAs introduced by coercion
> >>> 3: In (function (display = "", width, height, pointsize, gamma, bg,  :
> >>> locale not supported by Xlib: some X ops will operate in C locale
> >>> 4: In (function (display = "", width, height, pointsize, gamma, bg,  :
> >>> X cannot set locale modifiers
> >>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y =
> "Latitude")
> >>> + coord_sf(xlim = c(-180.00, 180.00), ylim = c(-90.00, 90.00), expand =
> >>> FALSE) + ggtitle("World map") + points(NMdata$LON,NMdata$LAT,col =
> "red",
> >>> cex = 0.01, pch = 20)
> >>> Error in plot.xy(xy.coords(x, y), type = type, ...) :
> >>> plot.new has not been called yet
> >>> In addition: Warning messages:
> >>> 1: In xy.coords(x, y) : NAs introduced by coercion
> >>> 2: In xy.coords(x, y) : NAs introduced by coercion.
> >>> I have also tried the codes below but it did not show the locations.
> >>> ugwoke at ugwoke-HP-ENVY-Laptop-13-aq0xxx:~/Desktop$ R
> >>>
> >>> R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
> >>> Copyright (C) 2020 The R Foundation for Statistical Computing
> >>> Platform: x86_64-pc-linux-gnu (64-bit)
> >>>
> >>> R is free software and comes with ABSOLUTELY NO WARRANTY.
> >>> You are welcome to redistribute it under certain conditions.
> >>> Type 'license()' or 'licence()' for distribution details.
> >>>
> >>> Natural language support but running in an English locale
> >>>
> >>> R is a collaborative project with many contributors.
> >>> Type 'contributors()' for more information and
> >>> 'citation()' on how to cite R or R packages in publications.
> >>>
> >>> Type 'demo()' for some demos, 'help()' for on-line help, or
> >>> 'help.start()' for an HTML browser interface to help.
> >>> Type 'q()' to quit R.
> >>>
> >>>> library("ggplot2")
> >>>> library(sf)
> >>> Linking to GEOS 3.9.0, GDAL 3.2.0, PROJ 7.2.0
> >>>> library("rnaturalearth")
> >>>> library("rnaturalearthdata")
> >>>> theme_set(theme_bw())
> >>>> world <- ne_countries(scale = "medium", returnclass = "sf")
> >>>> class(world)
> >>> [1] "sf"         "data.frame"
> >>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y =
> "Latitude")
> >>> +
> >>> + + ggtitle("World map") + coord_sf(crs = "+proj=laea +lat_0=52
> +lon_0=10
> >>> +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ")
> >>> Error in +ggtitle("World map") : invalid argument to unary operator
> >>>> ggplot(data = world) + geom_sf() + labs( x = "Longitude", y =
> "Latitude")
> >>> + ggtitle("World map") + coord_sf(crs = "+proj=laea + lat_0=52 +
> lon_0=10 +
> >>> x_0=4321000 + y_0=3210000 + ellps=GRS80 + units=m + no_defs ")
> >>> Warning messages:
> >>> 1: In (function (display = "", width, height, pointsize, gamma, bg,  :
> >>> locale not supported by Xlib: some X ops will operate in C locale
> >>> 2: In (function (display = "", width, height, pointsize, gamma, bg,  :
> >>> X cannot set locale modifiers.
> >>> I really appreciate any help rendered. Thanks
> >>>
> >>>       [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >>   [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


