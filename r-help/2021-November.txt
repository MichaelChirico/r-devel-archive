From r@oknz @end|ng |rom gm@||@com  Mon Nov  1 03:35:56 2021
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Mon, 1 Nov 2021 15:35:56 +1300
Subject: [R] R vs Numpy
In-Reply-To: <110202a77066a64e1f8b4a06f23e98ac@purpleemail.com>
References: <35301f35d969a9f72b26eab90be59019@purpleemail.com>
 <011101d7cc32$99d98700$cd8c9500$@verizon.net>
 <110202a77066a64e1f8b4a06f23e98ac@purpleemail.com>
Message-ID: <CABcYAdLbE-Z6N3o-hUtG5etq1u69JxeV4gbT=L2WbkBthBfGDw@mail.gmail.com>

Reasons for preferring one to another:
 - taste.
   If you like curly braces, you'll prefer R.
   If you like indentation forced by syntax, you'll prefer Python.
 - compatibility.
   This morning I was trying to use a web site where all the Python
   examples were non-functional due to either of both of two changes
   to Python syntax.
 - tooling
   Both have pretty good tools.  For some things, R has the edge.
   For some, Python.  (There is no R analogue of PyPy.)
 - packages
   Both R and Python have vast libraries of contributed packages.
   Quite often you are more interested in a package than the language
   it runs in.  You might be surprised at what is available for R.
   Tensorflow: https://tensorflow.rstudio.com/
   Keras: https://keras.rstudio.com/

And of course, some people use both in the same project,
https://www.rstudio.com/solutions/r-and-python/

By the way, someone said that R is purely interpreted.
That's not completely true.  In R, type
?compile
>From .py files you get .pyc, from .R files you get .Rc


On Fri, 29 Oct 2021 at 20:21, Catherine Walt <walt at purpleemail.com> wrote:

> Thanks for Avi. and all other people's helps.
>
> I am using Numpy primarily for machine learning, for example, Keras tasks
> can use Numpy heavily.
>
> Now I got a task to analyze the BIO data, for which the Prof tell me R is
> better.
> So I am looking into R. and I was just serious if Numpy can handle the BIO
> data well?
>
> Regards
> Cathy
>
>
>
> October 29, 2021 3:32 AM, "Avi Gross via R-help" <r-help at r-project.org>
> wrote:
>
> > I am not sure your overall question fits into this forum but a brief
> > internet search can find plenty of info.
> >
> > But in brief, R is a language in which much of what numpy does was built
> in
> > from the start and many things are vectorized. Much of what the python
> > pandas language does is also part of native R. There are additional
> packages
> > (python called them modules) freely available that greatly extend those
> > capabilities and I doubt there is very much you can do in numpy that
> cannot
> > also often easily be done in R.
> >
> > Realistically, there are several reasons the numpy module is so commonly
> > used in python. They left something like vectors out of the language.
> Yes,
> > they have dictionaries and lists and sets and all kinds of objects. So
> numpy
> > was made mostly in C to provide numeric processing of things that are
> more
> > like vectors efficiently. In R, everything is a vector as in a simple
> > variable is just a vector of length one!
> >
> > I program in both and in other languages as many do. Reasons to choose
> one
> > or another vary. Python can do many things easily and with complexity
> and is
> > a rather full-blown and complex language with real object-oriented
> > capabilities and also functional programming. It is interpreted but also
> has
> > a way to save partially compiled code. R is pretty much all interpreted
> > albeit many things are written I C or C++ pr other compiled languages and
> > stuffed into libraries.
> >
> > One main reason to choose is programming style but there are TONS of
> > differences that can bite you such as R sometimes deferring evaluation of
> > code which can be an advantage or the opposite. But a huge reason I think
> > that people choose one or the other is the availability of packages that
> do
> > much of what they want. Some, for example, love a set of packages they
> call
> > the tidyverse and do much of their work largely within it rather than
> base
> > R. Many love the graphics package called ggplot.
> >
> > But over time, I see more and more functionality available within the
> Python
> > community that rivals or perhaps exceeds such as the machine learning
> tools.
> >
> > I have an interesting solution I sometimes use as you can run programs
> in R
> > using a package that allows the same data to be accessed back and forth
> > between an attached R interpreter and a Python interpreter. So if you
> want
> > to use python features like dictionaries and list comprehensions to
> massage
> > the data then have R do additional things and perhaps make graphs, you
> can
> > get some of both worlds.
> >
> > As noted, a detailed answer is way beyond here. R has packages that
> probably
> > let you add things and it has too many object-oriented subsystems, most
> of
> > them not complete.
> >
> > Good Luck,
> >
> > Avi
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Catherine Walt
> > Sent: Thursday, October 28, 2021 2:57 AM
> > To: r-help at r-project.org
> > Subject: [R] R vs Numpy
> >
> > Hello members,
> >
> > I am familiar with python's Numpy.
> > Now I am looking into R language.
> > What is the main difference between these two languages? including
> > advantages or disadvantages.
> >
> > Thanks.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Nov  1 05:19:39 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 31 Oct 2021 21:19:39 -0700
Subject: [R] R vs Numpy
In-Reply-To: <110202a77066a64e1f8b4a06f23e98ac@purpleemail.com>
References: <011101d7cc32$99d98700$cd8c9500$@verizon.net>
 <35301f35d969a9f72b26eab90be59019@purpleemail.com>
 <110202a77066a64e1f8b4a06f23e98ac@purpleemail.com>
Message-ID: <65443F13-F51F-4055-B389-6E2456116700@dcn.davis.ca.us>

If you are looking for expertise in answering questions about NumPy, the pool of experts will be smaller here than in a forum whose topic is NumPy. 

I don't know what "BIO" means... if it alludes to biostatistics then there is a whole separate Bioconductor project that specializes in applying R to that category of problem.  Having a large pool of people building tools that you can use and answer questions about should count for something... but they do have their own forums dedicated to that specialty.

https://support.bioconductor.org/

https://www.biostars.org/p/414140/


On October 29, 2021 12:14:21 AM PDT, Catherine Walt <walt at purpleemail.com> wrote:
>Thanks for Avi. and all other people's helps.
>
>I am using Numpy primarily for machine learning, for example, Keras tasks can use Numpy heavily.
>
>Now I got a task to analyze the BIO data, for which the Prof tell me R is better.
>So I am looking into R. and I was just serious if Numpy can handle the BIO data well?
>
>Regards
>Cathy
>
>
>
>October 29, 2021 3:32 AM, "Avi Gross via R-help" <r-help at r-project.org> wrote:
>
>> I am not sure your overall question fits into this forum but a brief
>> internet search can find plenty of info.
>> 
>> But in brief, R is a language in which much of what numpy does was built in
>> from the start and many things are vectorized. Much of what the python
>> pandas language does is also part of native R. There are additional packages
>> (python called them modules) freely available that greatly extend those
>> capabilities and I doubt there is very much you can do in numpy that cannot
>> also often easily be done in R.
>> 
>> Realistically, there are several reasons the numpy module is so commonly
>> used in python. They left something like vectors out of the language. Yes,
>> they have dictionaries and lists and sets and all kinds of objects. So numpy
>> was made mostly in C to provide numeric processing of things that are more
>> like vectors efficiently. In R, everything is a vector as in a simple
>> variable is just a vector of length one!
>> 
>> I program in both and in other languages as many do. Reasons to choose one
>> or another vary. Python can do many things easily and with complexity and is
>> a rather full-blown and complex language with real object-oriented
>> capabilities and also functional programming. It is interpreted but also has
>> a way to save partially compiled code. R is pretty much all interpreted
>> albeit many things are written I C or C++ pr other compiled languages and
>> stuffed into libraries. 
>> 
>> One main reason to choose is programming style but there are TONS of
>> differences that can bite you such as R sometimes deferring evaluation of
>> code which can be an advantage or the opposite. But a huge reason I think
>> that people choose one or the other is the availability of packages that do
>> much of what they want. Some, for example, love a set of packages they call
>> the tidyverse and do much of their work largely within it rather than base
>> R. Many love the graphics package called ggplot.
>> 
>> But over time, I see more and more functionality available within the Python
>> community that rivals or perhaps exceeds such as the machine learning tools.
>> 
>> I have an interesting solution I sometimes use as you can run programs in R
>> using a package that allows the same data to be accessed back and forth
>> between an attached R interpreter and a Python interpreter. So if you want
>> to use python features like dictionaries and list comprehensions to massage
>> the data then have R do additional things and perhaps make graphs, you can
>> get some of both worlds.
>> 
>> As noted, a detailed answer is way beyond here. R has packages that probably
>> let you add things and it has too many object-oriented subsystems, most of
>> them not complete.
>> 
>> Good Luck,
>> 
>> Avi
>> 
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Catherine Walt
>> Sent: Thursday, October 28, 2021 2:57 AM
>> To: r-help at r-project.org
>> Subject: [R] R vs Numpy
>> 
>> Hello members,
>> 
>> I am familiar with python's Numpy.
>> Now I am looking into R language.
>> What is the main difference between these two languages? including
>> advantages or disadvantages.
>> 
>> Thanks.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From m@rn@@w@g|ey @end|ng |rom gm@||@com  Mon Nov  1 06:13:36 2021
From: m@rn@@w@g|ey @end|ng |rom gm@||@com (Marna Wagley)
Date: Sun, 31 Oct 2021 22:13:36 -0700
Subject: [R] extracting bootstrap statistics by group with loop
In-Reply-To: <385714c8-f415-8d9a-864f-f67c1b604642@sapo.pt>
References: <CAMwU6B02iPv_otu5FN=X6R_fSPdD2nH+aXbQ1zM37dmVVdayeQ@mail.gmail.com>
 <553dbf33-3a9d-f55c-f92a-e3a729acba28@sapo.pt>
 <e5cb46d7-5f74-7220-71d1-fb3aeb715c57@sapo.pt>
 <385714c8-f415-8d9a-864f-f67c1b604642@sapo.pt>
Message-ID: <CAMwU6B0THWY2dhRNzwKPuovku0DQzsV=QYcg78c2T1pieapfnA@mail.gmail.com>

Thank you Rui. It helped a lot.
-MW

On Sun, Oct 31, 2021 at 10:16 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Now I'm spamming the list, not one of my days.
>
> My first post was right, there was no bug and the 2nd one was exactly
> the same code, it corrected nothing at all.
>
> Apologies for the noise,
>
> Rui Barradas
>
> ?s 16:55 de 31/10/21, Rui Barradas escreveu:
> > Hello,
> >
> > Sorry, bug. In both by instructions it's boot_mean_se, not bootprop.
> >
> >
> > boot_year <- by(DaT, DaT$Year, boot_mean_se, statistic = bootprop, R = R)
> > boot_year_area <- by(DaT,
> >                       INDICES = list(Year = DaT$Year, Area = DaT$Area),
> >                       FUN = boot_mean_se,
> >                       statistic = bootprop, R = R)
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> > ?s 16:48 de 31/10/21, Rui Barradas escreveu:
> >> Hello,
> >>
> >> Try to aggregate with ?by.
> >>
> >>
> >> bootprop <- function(data, index){
> >>    d <- data[index, ]
> >>    sum(d[["bothTimes"]], na.rm = TRUE)/sum(d[["total"]], na.rm = TRUE)#
> >> }
> >> boot_mean_se <- function(data, statistic, R){
> >>    b <- boot::boot(DaT, bootprop, R = R)
> >>    c(bootMean = mean(b$t), bootSE = sd(b$t))
> >> }
> >>
> >> boot_year <- by(DaT, DaT$Year, boot_mean_se, statistic = bootprop, R =
> R)
> >> boot_year_area <- by(DaT,
> >>                       INDICES = list(Year = DaT$Year, Area = DaT$Area),
> >>                       FUN = boot_mean_se,
> >>                       statistic = bootprop, R = R)
> >> boot_year
> >> boot_year_area
> >>
> >> boot_year <- do.call(rbind, boot_year)
> >>
> >> d <- dimnames(boot_year_area)
> >> boot_year_area <- cbind(Reduce(expand.grid, rev(d))[2:1],
> >>                          do.call(rbind, boot_year_area))
> >> names(boot_year_area)[1:2] <- names(d)
> >> boot_year_area
> >>
> >>
> >> Hope this helps,
> >>
> >> Rui Barradas
> >>
> >> ?s 11:47 de 31/10/21, Marna Wagley escreveu:
> >>> Hi R users,
> >>> I was trying to extract the bootstrap mean and its SE by group but I
> >>> have
> >>> been doing  it by separating the group manually. The data set is big so
> >>> doing it manually is a kind of tedious task. I am wondering whether
> >>> there
> >>> is a possibility to do it by creating a loop. I am weak in writing loop
> >>> functions. I am attaching an example data and how I performed the
> >>> analysis, see below.
> >>> Thanks for your help.
> >>> Sincerely,
> >>> MW
> >>> ####
> >>> library(boot)
> >>> DaT<-structure(list(bothTimes = c(0L, 0L, 1L, 0L, 1L, 0L, 0L, 0L,
> >>> 1L, 0L, 0L, 0L, 1L, 1L, 0L, 1L, 0L, 0L, 1L, 0L, 0L, 1L, 1L, 0L),
> >>> total = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> >>> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), Area = c("A",
> >>> "A", "A", "A", "A", "A", "B", "B", "B", "B", "B", "B", "A", "A",
> >>> "A", "A", "A", "A", "B", "B", "B", "B", "B", "B"), Year = c(2015L,
> >>> 2015L,
> >>> 2015L, 2015L, 2015L, 2015L, 2015L, 2015L, 2015L, 2015L,
> >>> 2015L, 2015L, 2016L, 2016L, 2016L, 2016L, 2016L, 2016L, 2016L,
> >>> 2016L, 2016L, 2016L, 2016L, 2016L)), class = "data.frame", row.names =
> >>> c(NA, -24L))
> >>>
> >>> head(DaT)
> >>> R=100
> >>> bootprop <- function(data, index){
> >>>    d <- data[index, ]
> >>>    sum(d[["bothTimes"]], na.rm = TRUE)/sum(d[["total"]], na.rm = TRUE)#
> >>> }
> >>>
> >>> ###################
> >>> #2015
> >>> ###################
> >>> #-----Year2015_pooled
> >>> Y2015_pooled<-subset(DaT, DaT$Year=="2015")
> >>> Y2015_pooled_boot <- boot(Y2015_pooled, bootprop, R)
> >>> boot_Y2015_pooled<-data.frame(Year="2015", Area= "Pooled", bootMean=
> >>> Y2015_pooled_boot$t0, SE=sd(Y2015_pooled_boot$t))
> >>> #-----Year2015_AreaA
> >>> Y2015_A<-subset(DaT, DaT$Year=="2015" & DaT$Area=="A")
> >>> Y2015_A_boot <- boot(Y2015_A, bootprop, R)
> >>> boot_Y2015_A<-data.frame(Year="2015", Area= "A", bootMean=
> >>> Y2015_A_boot$t0,
> >>> SE=sd(Y2015_A_boot$t))
> >>> #----Year2015_AreaB
> >>> Y2015_B<-subset(DaT, DaT$Year=="2015" & DaT$Area=="B")
> >>> Y2015_B_boot <- boot(Y2015_B, bootprop, R)
> >>> boot_Y2015_B<-data.frame(Year="2015", Area= "B", bootMean=
> >>> Y2015_B_boot$t0,
> >>> SE=sd(Y2015_B_boot$t))
> >>> ###################
> >>> #2016
> >>> ###################
> >>> #-----Year2016_pooled
> >>> Y2016_pooled<-subset(DaT, DaT$Year=="2016")
> >>> Y2016_pooled_boot <- boot(Y2016_pooled, bootprop, R)
> >>> boot_Y2016_pooled<-data.frame(Year="2016", Area= "Pooled", bootMean=
> >>> Y2016_pooled_boot$t0, SE=sd(Y2016_pooled_boot$t))
> >>>
> >>> #-----Year2016_AreaA
> >>> Y2016_A<-subset(DaT, DaT$Year=="2016" & DaT$Area=="A")
> >>> Y2016_A_boot <- boot(Y2016_A, bootprop, R)
> >>>
> >>> boot_Y2016_A<-data.frame(Year="2016", Area= "A", bootMean=
> >>> Y2016_A_boot$t0,
> >>> SE=sd(Y2016_A_boot$t))
> >>> #----Year2016_AreaB
> >>> Y2016_B<-subset(DaT, DaT$Year=="2016" & DaT$Area=="B")
> >>> Y2016_B_boot <- boot(Y2016_B, bootprop, R)
> >>> boot_Y2016_B<-data.frame(Year="2016", Area= "B", bootMean=
> >>> Y2016_B_boot$t0,
> >>> SE=sd(Y2016_B_boot$t))
> >>>
> >>> ## output data.matrix
> >>>
> BootMean_All<-rbind(boot_Y2015_pooled,boot_Y2015_A,boot_Y2015_B,boot_Y2016_pooled,boot_Y2016_A,boot_Y2016_B)
>
> >>>
> >>> BootMean_All
> >>>
> >>>     [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Mon Nov  1 09:35:49 2021
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Mon, 1 Nov 2021 09:35:49 +0100
Subject: [R] [Rd] R 4.1.2 is released
Message-ID: <C893C950-C99E-4931-9481-095FB0115737@gmail.com>

The build system rolled up R-4.1.2.tar.gz (codename "Bird Hippie") this morning.

The list below details the changes in this release. 

You can get the source code from

https://cran.r-project.org/src/base/R-4/R-4.1.2.tar.gz

or wait for it to be mirrored at a CRAN site nearer to you.

Binaries for various platforms will appear in due course.


For the R Core Team,

Peter Dalgaard

These are the checksums (md5 and SHA-256) for the freshly created files, in case you wish
to check that they are uncorrupted:

MD5 (AUTHORS) = 320967884b547734d6279dedbc739dd4
MD5 (COPYING) = eb723b61539feef013de476e68b5c50a
MD5 (COPYING.LIB) = a6f89e2100d9b6cdffcea4f398e37343
MD5 (FAQ) = ade6a3d38fe5e6a456929cae2b94d568
MD5 (INSTALL) = 7893f754308ca31f1ccf62055090ad7b
MD5 (NEWS) = 924e68decbf327f538a09afb1838506b
MD5 (NEWS.0) = bfcd7c147251b5474d96848c6f57e5a8
MD5 (NEWS.1) = eb78c4d053ec9c32b815cf0c2ebea801
MD5 (NEWS.2) = a767f7809324c73c49eaff47d14bce81
MD5 (NEWS.3) = e55ed2c8a547b827b46e08eb7137ba23
MD5 (R-latest.tar.gz) = 6e28db9d02c6d3dae51a149b8e261ab1
MD5 (README) = f468f281c919665e276a1b691decbbe6
MD5 (RESOURCES) = a79b9b338cab09bd665f6b62ac6f455b
MD5 (THANKS) = 251d20510bfc3cc93b82c5a99f7efcc6
MD5 (VERSION-INFO.dcf) = a72a49578a254b9163f0f10322a3eecc
MD5 (R-4/R-4.1.2.tar.gz) = 6e28db9d02c6d3dae51a149b8e261ab1

60a0d150e6fc1f424be76ad7b645d236b56e747692a4679f81ce6536c550e949  AUTHORS
e6d6a009505e345fe949e1310334fcb0747f28dae2856759de102ab66b722cb4  COPYING
6095e9ffa777dd22839f7801aa845b31c9ed07f3d6bf8a26dc5d2dec8ccc0ef3  COPYING.LIB
e84c67931e9b925abb9142d4a6b4ef03b7605948bbf384d7e3d2401823c7f1fe  FAQ
f87461be6cbaecc4dce44ac58e5bd52364b0491ccdadaf846cb9b452e9550f31  INSTALL
73d5bfb8711bb7833ce8fe7a1359566d48001d13cd32affbd800d759f0b3232a  NEWS
4e21b62f515b749f80997063fceab626d7258c7d650e81a662ba8e0640f12f62  NEWS.0
12b30c724117b1b2b11484673906a6dcd48a361f69fc420b36194f9218692d01  NEWS.1
ba74618bc3f4c0e336dca13d472402a1863d12ba6f7f91a1782bc469ee986f6d  NEWS.2
1910a2405300b9bc7c76beeb0753a5249cf799afe175ce28f8d782fab723e012  NEWS.3
2036225e9f7207d4ce097e54972aecdaa8b40d7d9911cd26491fac5a0fab38af  R-latest.tar.gz
2fdd3e90f23f32692d4b3a0c0452f2c219a10882033d1774f8cadf25886c3ddc  README
8b7d3856100220f4555d4d57140829f2e81c27eccec5b441f5dce616e9ec9061  RESOURCES
c9c7cb32308b4e560a22c858819ade9de524a602abd4e92d1c328c89f8037d73  THANKS
1e74ef089b526538bbb658dc189bc3d34d931839e9933415fb2f267fd57b0b69  VERSION-INFO.dcf
2036225e9f7207d4ce097e54972aecdaa8b40d7d9911cd26491fac5a0fab38af  R-4/R-4.1.2.tar.gz

This is the relevant part of the NEWS file

CHANGES IN R 4.1.2:

  C-LEVEL FACILITIES:

    * The workaround in headers R.h and Rmath.h (using namespace std;)
      for the Oracle Developer Studio compiler is no longer needed now
      C++11 is required so has been removed.  A couple more usages of
      log() (which should have been std::log()) with an int argument
      are reported on Solaris.

    * The undocumented limit of 4095 bytes on messages from the
      S-compatibility macros PROBLEM and MESSAGE is now documented and
      longer messages will be silently truncated rather than
      potentially causing segfaults.

    * If the R_NO_SEGV_HANDLER environment variable is non-empty, the
      signal handler for SEGV/ILL/BUS signals (which offers recovery
      user interface) is not set. This allows more reliable debugging
      of crashes that involve the console.

  DEPRECATED AND DEFUNCT:

    * The legacy S-compatibility macros PROBLEM, MESSAGE, ERROR, WARN,
      WARNING, RECOVER, ... are deprecated and will be hidden in R
      4.2.0. R's native interface of Rf_error and Rf_warning has long
      been preferred.

  BUG FIXES:

    * .mapply(F, dots, .) no longer segfaults when dots is not a list
      and uses match.fun(F) as always documented; reported by Andrew
      Simmons in PR#18164.

    * hist(<Date>, ...) and hist(<POSIXt>, ...)  no longer pass
      arguments for rect() (such as col and density) to axis().
      (Thanks to Sebastian Meyer's PR#18171.)

    * \Sexpr{ch} now preserves Encoding(ch). (Thanks to report and
      patch by Jeroen Ooms in PR#18152.)

    * Setting the RNG to "Marsaglia-Multicarry" e.g., by RNGkind(), now
      warns in more places, thanks to Andr'e Gillibert's report and
      patch in PR#18168.

    * gray(numeric(), alpha=1/2) no longer segfaults, fixing PR#18183,
      reported by Till Krenz.

    * Fixed dnbinom(x, size=<very_small>, .., log=TRUE) regression,
      reported by Martin Morgan.

    * as.Date.POSIXlt(x) now keeps names(x), thanks to Davis Vaughan's
      report and patch in PR#18188.

    * model.response() now strips an "AsIs" class typically, thanks to
      Duncan Murdoch's report and other discussants in PR#18190.

    * try() is considerably faster in case of an error and long call,
      as e.g., from some do.call().  Thanks to Alexander Kaever's
      suggestion posted to R-devel.

    * qqline(y = <object>) such as y=I(.), now works, see also
      PR#18190.

    * Non-integer mgp par() settings are now handled correctly in
      axis() and mtext(), thanks to Mikael Jagan and Duncan Murdoch's
      report and suggestion in PR#18194.

    * formatC(x) returns length zero character() now, rather than ""
      when x is of length zero, as documented, thanks to Davis
      Vaughan's post to R-devel.

    * removeSource(fn) now retains (other) attributes(fn).

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Nov  1 10:08:00 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 1 Nov 2021 10:08:00 +0100
Subject: [R] typo in documentation for array // how to report such
In-Reply-To: <CA+uxVQmDV-oae9hAA55eyMMnXjSLqtWR9vyWxUPSKchhOJWWJw@mail.gmail.com>
References: <CA+uxVQmDV-oae9hAA55eyMMnXjSLqtWR9vyWxUPSKchhOJWWJw@mail.gmail.com>
Message-ID: <24959.44656.882788.45871@stat.math.ethz.ch>

>>>>> Mathew Englander 
>>>>>     on Fri, 29 Oct 2021 20:30:16 -0700 writes:

    > I noticed a typo in the ?array help-file ("Multi-way
    > Arrays"), which is also at this web page:
    > https://stat.ethz.ch/R-manual/R-patched/library/base/html/array.html

    > In the "Arguments" section of that page, under the
    > subheading "dimnames", the second sentence begins "This
    > must a list..." and it ought to read, "This must be a
    > list...".

    > I'm not subscribed to the mailing list, so please reply by
    > email to let me know where I should report typos like this
    > if I find any, in the future. I considered filing a bug
    > report on Bugzilla but this obviously is not a bug in R,
    > but just a mistake in the manual. I figured that someone
    > reading this mailing list would know the proper person to
    > alert, to fix the typo in the next edition of the R
    > Manual.

Thank you, Mathew!

As to your question on how/where to report a bug etc,
as we actually *do* count the documentation inside the sources,
notably the help files, as part of R in the sense of 'bug'.
We have a careful (sometimes too detailed) page on the topic:
   https://www.r-project.org/bugs.html

Still, in such cases, the most efficient -- but not always available --
approach is to privately contact a member of the R core team
with the typo to be fixed, so it will happen swiftly and not
many people need to spend time with it.
 -> https://www.r-project.org/contributors.html

Another possible venue may be to contact the  'R Contribution'
working group  --> https://forwards.github.io/rcontribution/
of which several experienced members would know how to
efficiently address this.

.. and yes, I've added the missing "be" now ... but (of course) not in time
for the release of   R 4.1.2   which is planned for today.

Martin


Martin Maechler
ETH Zurich  and  R Core team


From bh@r@t_m_@|| @end|ng |rom y@hoo@co@|n  Mon Nov  1 16:04:47 2021
From: bh@r@t_m_@|| @end|ng |rom y@hoo@co@|n (bharat rawlley)
Date: Mon, 1 Nov 2021 15:04:47 +0000 (UTC)
Subject: [R] Help needed with data visualization in R
References: <1207710310.2568735.1635779088008.ref@mail.yahoo.com>
Message-ID: <1207710310.2568735.1635779088008@mail.yahoo.com>

Hello,?

I wanted to ask if it is possible to have a data visualization of the following kind in R??
It is not exactly a graph; a series of bubbles that have an area corresponding to the percentage inside it arranged in a row.?
Thank you!?

From er|cjberger @end|ng |rom gm@||@com  Mon Nov  1 16:11:28 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 1 Nov 2021 17:11:28 +0200
Subject: [R] Help needed with data visualization in R
In-Reply-To: <1207710310.2568735.1635779088008@mail.yahoo.com>
References: <1207710310.2568735.1635779088008.ref@mail.yahoo.com>
 <1207710310.2568735.1635779088008@mail.yahoo.com>
Message-ID: <CAGgJW754xF51swwRRsU75oetftKXGtpPrn+LCEwUB6DnLWAZ6Q@mail.gmail.com>

I have no experience with this but I did a search and found the following
which looks close to what you are looking for

https://stackoverflow.com/questions/69755844/is-it-possible-to-draw-the-following-diagram-in-r



On Mon, Nov 1, 2021 at 5:06 PM bharat rawlley via R-help <
r-help at r-project.org> wrote:

> Hello,
>
> I wanted to ask if it is possible to have a data visualization of the
> following kind in R?
> It is not exactly a graph; a series of bubbles that have an area
> corresponding to the percentage inside it arranged in a row.
> Thank you!
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Nov  1 17:16:14 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 1 Nov 2021 09:16:14 -0700
Subject: [R] Help needed with data visualization in R
In-Reply-To: <CAGgJW754xF51swwRRsU75oetftKXGtpPrn+LCEwUB6DnLWAZ6Q@mail.gmail.com>
References: <1207710310.2568735.1635779088008.ref@mail.yahoo.com>
 <1207710310.2568735.1635779088008@mail.yahoo.com>
 <CAGgJW754xF51swwRRsU75oetftKXGtpPrn+LCEwUB6DnLWAZ6Q@mail.gmail.com>
Message-ID: <CAGxFJbSA7g7QbEDm48BOaM-=fyGQV_zDU3R58X90oxoKwL6n8Q@mail.gmail.com>

... a simple web search on "bubble plots R" (what else?) would have brought
up many relevant hits. One should always try such obvious "homework" before
posting here. Better and quicker info often results.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Nov 1, 2021 at 8:15 AM Eric Berger <ericjberger at gmail.com> wrote:

> I have no experience with this but I did a search and found the following
> which looks close to what you are looking for
>
>
> https://stackoverflow.com/questions/69755844/is-it-possible-to-draw-the-following-diagram-in-r
>
>
>
> On Mon, Nov 1, 2021 at 5:06 PM bharat rawlley via R-help <
> r-help at r-project.org> wrote:
>
> > Hello,
> >
> > I wanted to ask if it is possible to have a data visualization of the
> > following kind in R?
> > It is not exactly a graph; a series of bubbles that have an area
> > corresponding to the percentage inside it arranged in a row.
> > Thank you!
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 17:40:23 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 09:40:23 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
Message-ID: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>

The data file, cor-disc.csv begins with:
site_nbr,year,mon,day,hr,min,tz,disc
14171600,2009,10,23,00,00,PDT,8750

The first 7 columns are character strings; the 8th column is an integer.

After loading library(tidyverse) I ran read_csv() with this result:
> cor_disc <- read_csv("../data/cor-disc.csv")
                                                                                                     Rows: 
415263 Columns: 8
?? Column specification 
????????????????????????????????????????????????????????????????????????????
Delimiter: ","
chr (5): mon, day, hr, min, tz
dbl (2): site_nbr, year

? Use `spec()` to retrieve the full column specification for this data.
? Specify the column types or set `show_col_types = FALSE` to quiet this 
message.

1. What happed to the values in column 'disc?'

2. Why are site_nbr and year seen as doubles when they're character strings?

I've not found answers in the book or in ?read_csv.

What am I missing?

Rich


From kev|n@thorpe @end|ng |rom utoronto@c@  Mon Nov  1 17:50:23 2021
From: kev|n@thorpe @end|ng |rom utoronto@c@ (Kevin Thorpe)
Date: Mon, 1 Nov 2021 16:50:23 +0000
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
Message-ID: <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>

I do not have a specific answer to your particular problem. All I can say is when a CSV import doesn?t work, it can mean there is something in the CSV file that is unexpected. When read_csv() fails, I will try read.csv() to compare the results.

Kevin


> On Nov 1, 2021, at 12:40 PM, Rich Shepard <rshepard at appl-ecosys.com> wrote:
> 
> The data file, cor-disc.csv begins with:
> site_nbr,year,mon,day,hr,min,tz,disc
> 14171600,2009,10,23,00,00,PDT,8750
> 
> The first 7 columns are character strings; the 8th column is an integer.
> 
> After loading library(tidyverse) I ran read_csv() with this result:
>> cor_disc <- read_csv("../data/cor-disc.csv")
>                                                                                                    Rows: 415263 Columns: 8
> ?? Column specification ????????????????????????????????????????????????????????????????????????????
> Delimiter: ","
> chr (5): mon, day, hr, min, tz
> dbl (2): site_nbr, year
> 
> ? Use `spec()` to retrieve the full column specification for this data.
> ? Specify the column types or set `show_col_types = FALSE` to quiet this message.
> 
> 1. What happed to the values in column 'disc?'
> 
> 2. Why are site_nbr and year seen as doubles when they're character strings?
> 
> I've not found answers in the book or in ?read_csv.
> 
> What am I missing?
> 
> Rich
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Kevin E. Thorpe
Head of Biostatistics,  Applied Health Research Centre (AHRC)
Li Ka Shing Knowledge Institute of St. Michael?s Hospital
Assistant Professor, Dalla Lana School of Public Health
University of Toronto
email: kevin.thorpe at utoronto.ca  Tel: 416.864.5776  Fax: 416.864.3016


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 18:01:22 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 10:01:22 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
Message-ID: <c0b3a93-fe6b-3868-31ec-304c412e2a2c@appl-ecosys.com>

On Mon, 1 Nov 2021, Kevin Thorpe wrote:

> I do not have a specific answer to your particular problem. All I can say
> is when a CSV import doesn?t work, it can mean there is something in the
> CSV file that is unexpected. When read_csv() fails, I will try read.csv()
> to compare the results.

Kevin,

That's a thought. I'll do that.

Thanks,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 18:10:09 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 10:10:09 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
Message-ID: <633840b9-8376-1b54-9aa6-3ef3fc102c8d@appl-ecosys.com>

On Mon, 1 Nov 2021, Kevin Thorpe wrote:

> I do not have a specific answer to your particular problem. All I can say
> is when a CSV import doesn?t work, it can mean there is something in the
> CSV file that is unexpected. When read_csv() fails, I will try read.csv()
> to compare the results.

Kevin,

Interesting that there's no error:
cor_disc <- read.csv("../data/cor-disc.csv", header = TRUE)
...
12496 14171600 2010   3  15 16  45 PDT 1060
12497 14171600 2010   3  15 17   0 PDT 1060
12498 14171600 2010   3  15 17  15 PDT 1050
12499 14171600 2010   3  15 17  45 PDT 1050
  [ reached 'max' / getOption("max.print") -- omitted 402856 rows ]
> head(cor_disc)
   site_nbr year mon day hr min  tz disc
1 14171600 2009  10  23  0   0 PDT 8750
2 14171600 2009  10  23  0  15 PDT 8750
3 14171600 2009  10  23  0  30 PDT 8750
4 14171600 2009  10  23  0  45 PDT 8750
5 14171600 2009  10  23  1   0 PDT 8750
6 14171600 2009  10  23  1  15 PDT 8750
> str(cor_disc)
'data.frame':	415355 obs. of  8 variables:
  $ site_nbr: chr  "14171600" "14171600" "14171600" "14171600" ...
  $ year    : int  2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 ...
  $ mon     : int  10 10 10 10 10 10 10 10 10 10 ...
  $ day     : int  23 23 23 23 23 23 23 23 23 23 ...
  $ hr      : int  0 0 0 0 1 1 1 1 2 2 ...
  $ min     : int  0 15 30 45 0 15 30 45 0 15 ...
  $ tz      : chr  "PDT" "PDT" "PDT" "PDT" ...
  $ disc    : int  8750 8750 8750 8750 8750 8750 8750 8730 8730 8730 ...

So, where might I look to see why tidyverse's read_csv() doesn't produce the
same results?

Regards,

Rich


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Nov  1 18:21:21 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 01 Nov 2021 10:21:21 -0700
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
Message-ID: <328D87C9-E4D9-4D5E-B6D4-203689B88667@dcn.davis.ca.us>

More explicitly... look at rows past the first row. If your csv has 300 rows and column 1 has something non-numeric in row 299 then the whole column gets imported as character data. Try

cor_disc[[ 1 ]] |> as.numeric() |> is.na() |> where()

to find suspect rows. You may want to read about the na argument to read_csv in ?read_csv.

On November 1, 2021 9:50:23 AM PDT, Kevin Thorpe <kevin.thorpe at utoronto.ca> wrote:
>I do not have a specific answer to your particular problem. All I can say is when a CSV import doesn?t work, it can mean there is something in the CSV file that is unexpected. When read_csv() fails, I will try read.csv() to compare the results.
>
>Kevin
>
>
>> On Nov 1, 2021, at 12:40 PM, Rich Shepard <rshepard at appl-ecosys.com> wrote:
>> 
>> The data file, cor-disc.csv begins with:
>> site_nbr,year,mon,day,hr,min,tz,disc
>> 14171600,2009,10,23,00,00,PDT,8750
>> 
>> The first 7 columns are character strings; the 8th column is an integer.
>> 
>> After loading library(tidyverse) I ran read_csv() with this result:
>>> cor_disc <- read_csv("../data/cor-disc.csv")
>>                                                                                                    Rows: 415263 Columns: 8
>> ?? Column specification ????????????????????????????????????????????????????????????????????????????
>> Delimiter: ","
>> chr (5): mon, day, hr, min, tz
>> dbl (2): site_nbr, year
>> 
>> ? Use `spec()` to retrieve the full column specification for this data.
>> ? Specify the column types or set `show_col_types = FALSE` to quiet this message.
>> 
>> 1. What happed to the values in column 'disc?'
>> 
>> 2. Why are site_nbr and year seen as doubles when they're character strings?
>> 
>> I've not found answers in the book or in ?read_csv.
>> 
>> What am I missing?
>> 
>> Rich
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Sent from my phone. Please excuse my brevity.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 18:29:13 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 10:29:13 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <328D87C9-E4D9-4D5E-B6D4-203689B88667@dcn.davis.ca.us>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
 <328D87C9-E4D9-4D5E-B6D4-203689B88667@dcn.davis.ca.us>
Message-ID: <e7cde98d-cdd-891c-917-736b85ee33e3@appl-ecosys.com>

On Mon, 1 Nov 2021, Jeff Newmiller wrote:

> More explicitly... look at rows past the first row. If your csv has 300
> rows and column 1 has something non-numeric in row 299 then the whole
> column gets imported as character data. Try
> cor_disc[[ 1 ]] |> as.numeric() |> is.na() |> where()
> to find suspect rows. You may want to read about the na argument to read_csv in ?read_csv.

Jeff,

cor_disc has 415264 rows.

> cor_disc[[ 1 ]] |> as.numeric() |> is.na() |> where()
Error in where(is.na(as.numeric(cor_disc[[1]]))) :
   could not find function "where"

Searching for 'where' in ?read_csv finds only
where each character represents one column:

And, if there was such a non-numeric in any row of column 1 wouldn't
read.csv() also catch it and throw an error?

Thanks,

Rich


From w||||@mwdun|@p @end|ng |rom gm@||@com  Mon Nov  1 18:34:59 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Mon, 1 Nov 2021 10:34:59 -0700
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <633840b9-8376-1b54-9aa6-3ef3fc102c8d@appl-ecosys.com>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
 <633840b9-8376-1b54-9aa6-3ef3fc102c8d@appl-ecosys.com>
Message-ID: <CAHqSRuSMZ+cSs2kDnZVa=fZ5JkRw5y6xb9rn5_6GPD5YR4GCPw@mail.gmail.com>

Use the col_type argument to specify your column types.  [Why would you
expect '2009' to be read as a string instead of a number?].  It looks like
an
initial zero causes an otherwise numeric looking entry to be considered
a string (handy for zip codes in the northeastern US).

help(read_csv) says the column type guessing is "not robust" and its
algorithm
doesn't seem to be documented in the help file:

col_types

One of NULL, a cols() specification, or a string. See vignette("readr") for
more details.

If NULL, all column types will be imputed from guess_max rows on the input
interspersed throughout the file. This is convenient (and fast), but not
robust. If the imputation fails, you'll need to increase the guess_max or
supply the correct types yourself.

...

-Bill
On Mon, Nov 1, 2021 at 10:16 AM Rich Shepard <rshepard at appl-ecosys.com>
wrote:
>
> On Mon, 1 Nov 2021, Kevin Thorpe wrote:
>
> > I do not have a specific answer to your particular problem. All I can
say
> > is when a CSV import doesn?t work, it can mean there is something in the
> > CSV file that is unexpected. When read_csv() fails, I will try
read.csv()
> > to compare the results.
>
> Kevin,
>
> Interesting that there's no error:
> cor_disc <- read.csv("../data/cor-disc.csv", header = TRUE)
> ...
> 12496 14171600 2010   3  15 16  45 PDT 1060
> 12497 14171600 2010   3  15 17   0 PDT 1060
> 12498 14171600 2010   3  15 17  15 PDT 1050
> 12499 14171600 2010   3  15 17  45 PDT 1050
>   [ reached 'max' / getOption("max.print") -- omitted 402856 rows ]
> > head(cor_disc)
>    site_nbr year mon day hr min  tz disc
> 1 14171600 2009  10  23  0   0 PDT 8750
> 2 14171600 2009  10  23  0  15 PDT 8750
> 3 14171600 2009  10  23  0  30 PDT 8750
> 4 14171600 2009  10  23  0  45 PDT 8750
> 5 14171600 2009  10  23  1   0 PDT 8750
> 6 14171600 2009  10  23  1  15 PDT 8750
> > str(cor_disc)
> 'data.frame':   415355 obs. of  8 variables:
>   $ site_nbr: chr  "14171600" "14171600" "14171600" "14171600" ...
>   $ year    : int  2009 2009 2009 2009 2009 2009 2009 2009 2009 2009 ...
>   $ mon     : int  10 10 10 10 10 10 10 10 10 10 ...
>   $ day     : int  23 23 23 23 23 23 23 23 23 23 ...
>   $ hr      : int  0 0 0 0 1 1 1 1 2 2 ...
>   $ min     : int  0 15 30 45 0 15 30 45 0 15 ...
>   $ tz      : chr  "PDT" "PDT" "PDT" "PDT" ...
>   $ disc    : int  8750 8750 8750 8750 8750 8750 8750 8730 8730 8730 ...
>
> So, where might I look to see why tidyverse's read_csv() doesn't produce
the
> same results?
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Nov  1 18:55:42 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 01 Nov 2021 10:55:42 -0700
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <e7cde98d-cdd-891c-917-736b85ee33e3@appl-ecosys.com>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
 <328D87C9-E4D9-4D5E-B6D4-203689B88667@dcn.davis.ca.us>
 <e7cde98d-cdd-891c-917-736b85ee33e3@appl-ecosys.com>
Message-ID: <EA1F0A09-23A4-44F3-998F-D6ED4C0992B6@dcn.davis.ca.us>

Sorry... untested code... use which... not where.

On November 1, 2021 10:29:13 AM PDT, Rich Shepard <rshepard at appl-ecosys.com> wrote:
>On Mon, 1 Nov 2021, Jeff Newmiller wrote:
>
>> More explicitly... look at rows past the first row. If your csv has 300
>> rows and column 1 has something non-numeric in row 299 then the whole
>> column gets imported as character data. Try
>> cor_disc[[ 1 ]] |> as.numeric() |> is.na() |> where()
>> to find suspect rows. You may want to read about the na argument to read_csv in ?read_csv.
>
>Jeff,
>
>cor_disc has 415264 rows.
>
>> cor_disc[[ 1 ]] |> as.numeric() |> is.na() |> where()
>Error in where(is.na(as.numeric(cor_disc[[1]]))) :
>   could not find function "where"
>
>Searching for 'where' in ?read_csv finds only
>where each character represents one column:
>
>And, if there was such a non-numeric in any row of column 1 wouldn't
>read.csv() also catch it and throw an error?
>
>Thanks,
>
>Rich
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 19:01:51 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 11:01:51 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <EA1F0A09-23A4-44F3-998F-D6ED4C0992B6@dcn.davis.ca.us>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
 <328D87C9-E4D9-4D5E-B6D4-203689B88667@dcn.davis.ca.us>
 <e7cde98d-cdd-891c-917-736b85ee33e3@appl-ecosys.com>
 <EA1F0A09-23A4-44F3-998F-D6ED4C0992B6@dcn.davis.ca.us>
Message-ID: <4bd60b-a1e2-4f2e-1ece-32677d55dfcb@appl-ecosys.com>

On Mon, 1 Nov 2021, Jeff Newmiller wrote:

> Sorry... untested code... use which... not where.

Jeff,

That problem's resolved; problems() found the lines.

Question:

> cor_disc
# A tibble: 415,263 ? 8
    site_nbr  year mon   day   hr    min   tz     disc
    <chr>    <dbl> <chr> <chr> <chr> <chr> <chr> <dbl>
  1 14171600  2009 10    23    00    00    PDT    8750

While not seen in this message, the 2 in year and the 8 in disc are
underlined. Why is that? I assume it indicates the value is numeric but I
defined the type for each column as "c" and "i", respectively.

Regards,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 18:54:58 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 10:54:58 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <CAHqSRuSMZ+cSs2kDnZVa=fZ5JkRw5y6xb9rn5_6GPD5YR4GCPw@mail.gmail.com>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
 <633840b9-8376-1b54-9aa6-3ef3fc102c8d@appl-ecosys.com>
 <CAHqSRuSMZ+cSs2kDnZVa=fZ5JkRw5y6xb9rn5_6GPD5YR4GCPw@mail.gmail.com>
Message-ID: <fc72773c-a9b9-3b77-e30-1e2e9e1435da@appl-ecosys.com>

On Mon, 1 Nov 2021, Bill Dunlap wrote:

> Use the col_type argument to specify your column types. [Why would you
> expect '2009' to be read as a string instead of a number?]. It looks like
> an initial zero causes an otherwise numeric looking entry to be considered
> a string (handy for zip codes in the northeastern US).

> help(read_csv) says the column type guessing is "not robust" and its
> algorithm doesn't seem to be documented in the help file:

Bill,

That makes sense. I read that in the book and forgot about it. I'll specify
the col_type for each column in the read_csv() function.

Specifying column names got me much closer:
> cor_disc <- read_csv("../data/cor-disc.csv", col_names = TRUE, col_types = c("c","c","c","c","c","c","i"))

> cor_disc
# A tibble: 415,263 ? 8
    site_nbr  year mon   day   hr    min   tz     disc
    <chr>    <dbl> <chr> <chr> <chr> <chr> <chr> <dbl>
  1 14171600  2009 10    23    00    00    PDT    8750
  2 14171600  2009 10    23    00    15    PDT    8750
  3 14171600  2009 10    23    00    30    PDT    8750
  4 14171600  2009 10    23    00    45    PDT    8750
  5 14171600  2009 10    23    01    00    PDT    8750
  6 14171600  2009 10    23    01    15    PDT    8750
  7 14171600  2009 10    23    01    30    PDT    8750
  8 14171600  2009 10    23    01    45    PDT    8730
  9 14171600  2009 10    23    02    00    PDT    8730
10 14171600  2009 10    23    02    15    PDT    8730
# ? with 415,253 more rows

The col_types for year was specified as "c", for disc as "i" but both are
input as doubles. That's a non-issue for disc (discharge in fps), but year
is a character as are months, days, etc.

Have I still missed something in specifying column types?

Regards,

Rich


From kev|n@thorpe @end|ng |rom utoronto@c@  Mon Nov  1 19:10:04 2021
From: kev|n@thorpe @end|ng |rom utoronto@c@ (Kevin Thorpe)
Date: Mon, 1 Nov 2021 18:10:04 +0000
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <4bd60b-a1e2-4f2e-1ece-32677d55dfcb@appl-ecosys.com>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
 <328D87C9-E4D9-4D5E-B6D4-203689B88667@dcn.davis.ca.us>
 <e7cde98d-cdd-891c-917-736b85ee33e3@appl-ecosys.com>
 <EA1F0A09-23A4-44F3-998F-D6ED4C0992B6@dcn.davis.ca.us>
 <4bd60b-a1e2-4f2e-1ece-32677d55dfcb@appl-ecosys.com>
Message-ID: <259ABEB5-9311-4464-806A-9827C47E32D3@utoronto.ca>

Is there a leading space on those variables for that row?

Kevin


> On Nov 1, 2021, at 2:01 PM, Rich Shepard <rshepard at appl-ecosys.com> wrote:
> 
> On Mon, 1 Nov 2021, Jeff Newmiller wrote:
> 
>> Sorry... untested code... use which... not where.
> 
> Jeff,
> 
> That problem's resolved; problems() found the lines.
> 
> Question:
> 
>> cor_disc
> # A tibble: 415,263 ? 8
>   site_nbr  year mon   day   hr    min   tz     disc
>   <chr>    <dbl> <chr> <chr> <chr> <chr> <chr> <dbl>
> 1 14171600  2009 10    23    00    00    PDT    8750
> 
> While not seen in this message, the 2 in year and the 8 in disc are
> underlined. Why is that? I assume it indicates the value is numeric but I
> defined the type for each column as "c" and "i", respectively.
> 
> Regards,
> 
> Rich
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Kevin E. Thorpe
Head of Biostatistics,  Applied Health Research Centre (AHRC)
Li Ka Shing Knowledge Institute of St. Michael?s Hospital
Assistant Professor, Dalla Lana School of Public Health
University of Toronto
email: kevin.thorpe at utoronto.ca  Tel: 416.864.5776  Fax: 416.864.3016


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 19:18:37 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 11:18:37 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <259ABEB5-9311-4464-806A-9827C47E32D3@utoronto.ca>
References: <cabf74a6-dc12-ab4a-dad2-4a60a56ac6b4@appl-ecosys.com>
 <26F102E1-3FA9-4B18-95E6-B2A46C3CD201@utoronto.ca>
 <328D87C9-E4D9-4D5E-B6D4-203689B88667@dcn.davis.ca.us>
 <e7cde98d-cdd-891c-917-736b85ee33e3@appl-ecosys.com>
 <EA1F0A09-23A4-44F3-998F-D6ED4C0992B6@dcn.davis.ca.us>
 <4bd60b-a1e2-4f2e-1ece-32677d55dfcb@appl-ecosys.com>
 <259ABEB5-9311-4464-806A-9827C47E32D3@utoronto.ca>
Message-ID: <e41f2ff1-fd8d-7c31-cad1-f1921a6a5ca0@appl-ecosys.com>

On Mon, 1 Nov 2021, Kevin Thorpe wrote:

> Is there a leading space on those variables for that row?

Kevin,

No:
site_nbr,year,mon,day,hr,min,tz,disc
14171600,2009,10,23,00,00,PDT,8750
...

Thanks,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 19:22:54 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 11:22:54 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <b02aafae-1d1b-44cc-b610-2909179e3a17@email.android.com>
References: <b02aafae-1d1b-44cc-b610-2909179e3a17@email.android.com>
Message-ID: <f68dd39c-1c-8121-3b72-1ec8ee4f92c0@appl-ecosys.com>

On Mon, 1 Nov 2021, CALUM POLWART wrote:

> You specified 7 column types for 8 columns...

Thanks, Calum. I didn't see that I mis-counted when adding types.

But, that doesn't change the tibble types for year and disc from doubles to
character and int, respectively.

Regards,

Rich


From pervu@h|n@_o|g@ @end|ng |rom hotm@||@com  Mon Nov  1 08:13:56 2021
From: pervu@h|n@_o|g@ @end|ng |rom hotm@||@com (Olga Pervushina)
Date: Mon, 1 Nov 2021 07:13:56 +0000
Subject: [R] Code problem with R/Microeconomics
Message-ID: <AM8P194MB0964D34FF4DDEB5CC685417E8C8A9@AM8P194MB0964.EURP194.PROD.OUTLOOK.COM>


Dear Sir/Madam,

I am working on a statistical evaluation with R at the Erasmus University and have a problem with one  coding sentense. Who can help me with that?

Thank you.

Kind regards,
Olga Pervushina


	[[alternative HTML version deleted]]


From bh@r@t_m_@|| @end|ng |rom y@hoo@co@|n  Mon Nov  1 20:43:01 2021
From: bh@r@t_m_@|| @end|ng |rom y@hoo@co@|n (bharat rawlley)
Date: Mon, 1 Nov 2021 19:43:01 +0000 (UTC)
Subject: [R] Help needed with data visualization in R
In-Reply-To: <CAGxFJbSA7g7QbEDm48BOaM-=fyGQV_zDU3R58X90oxoKwL6n8Q@mail.gmail.com>
References: <1207710310.2568735.1635779088008.ref@mail.yahoo.com>
 <1207710310.2568735.1635779088008@mail.yahoo.com>
 <CAGgJW754xF51swwRRsU75oetftKXGtpPrn+LCEwUB6DnLWAZ6Q@mail.gmail.com>
 <CAGxFJbSA7g7QbEDm48BOaM-=fyGQV_zDU3R58X90oxoKwL6n8Q@mail.gmail.com>
Message-ID: <12922970.2590645.1635795781681@mail.yahoo.com>

 Thank you very much, for your time and response!?
This did resolve my issue and I apologize if the question was a little too straightforward - I did try to create bubble plots in excel but that did not work, hence, I asked here since it is more of a diagram and less of a plot. Thank you very much for your time and help!?
    On Monday, 1 November, 2021, 09:47:29 pm IST, Bert Gunter <bgunter.4567 at gmail.com> wrote:  
 
 ... a simple web search on "bubble plots R" (what else?) would have brought up many relevant hits. One should always try such obvious "homework" before posting here. Better and quicker info often results.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Nov 1, 2021 at 8:15 AM Eric Berger <ericjberger at gmail.com> wrote:

I have no experience with this but I did a search and found the following
which looks close to what you are looking for

https://stackoverflow.com/questions/69755844/is-it-possible-to-draw-the-following-diagram-in-r



On Mon, Nov 1, 2021 at 5:06 PM bharat rawlley via R-help <
r-help at r-project.org> wrote:

> Hello,
>
> I wanted to ask if it is possible to have a data visualization of the
> following kind in R?
> It is not exactly a graph; a series of bubbles that have an area
> corresponding to the percentage inside it arranged in a row.
> Thank you!
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

? ? ? ? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

  
	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Nov  1 20:55:05 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 1 Nov 2021 12:55:05 -0700
Subject: [R] How to slice the array?
In-Reply-To: <CALUE4BLsnfEGK56CX0h+ucYmtb-snb7gDgLs38q7kJja8AGaXw@mail.gmail.com>
References: <CALUE4BLsnfEGK56CX0h+ucYmtb-snb7gDgLs38q7kJja8AGaXw@mail.gmail.com>
Message-ID: <CAGxFJbSmR-DmwLX4UpL-D3FKCUuH-pAWvFdmevMHmQo=8k++nw@mail.gmail.com>

Have you spent time with any R tutorials? Your queries are really
elementary, and this list really cannot serve as a tutorial service. See
the Posting Guide linked below for what help you can expect here ... and
how to post queries that will get that help.

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Nov 1, 2021 at 12:49 PM Alice <alice at coakmail.com> wrote:

> How to slice the array with the condition?
> For example, in perl I can get the elements greater than 2.
>
> $ perl -le '@x=(1,2,3,4,5);@y=grep {$_>2} @x;print "@y"'
>
> 3 4 5
>
>
> in R I know which(x>2), but it will return the indexes instead of an array.
>
>
> Thanks again.
>
>
> Alice
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Nov  1 21:02:03 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 1 Nov 2021 13:02:03 -0700
Subject: [R] 
 Error in dis[sppInSample,sppInSample]:subscript out of bounds
In-Reply-To: <PN3PR01MB5461B9AE4F38535016D59EBDC8899@PN3PR01MB5461.INDPRD01.PROD.OUTLOOK.COM>
References: <PN3PR01MB5461B9AE4F38535016D59EBDC8899@PN3PR01MB5461.INDPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbTn0DiQ_Nm34hKPO=tTO=NdMw8C+uXvQ-X9Qgbpb=eT0w@mail.gmail.com>

This question is about an (unspecified! -- tell us which one so we don't
have to guess) contributed package. The Posting Guide linked below says:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Nov 1, 2021 at 12:49 PM Zhao Shanshan <sszhao19 at outlook.com> wrote:

> Hi, I have the same problem, can you tell me how to solve it?
>
>
>
>
>
> Hello,
>
> I am new to R and am encountering an error message that I cannot find a
> solution for.
>
> I am attempting to calculate MPD (mean pairwise distance), without
> weighting for abundance, with a community species list and a phylogenetic
> tree in newick format with branch lengths.
>
> I have read in both list and tree .txt files and calculated PD without any
> problem.
>
> To calculate MPD I have entered:>MPD1=mpd(list,cophenetic(tree))
>
> Error:Error in dis[sppInSample, sppInSample] : subscript out of bounds
>
> Thank you for you helpCheersMarion.
>
>         [[alternative HTML version deleted]]
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Nov  1 21:15:26 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 1 Nov 2021 22:15:26 +0200
Subject: [R] Translation of the charter
In-Reply-To: <CALUE4BLJttZjWc1=6CdcRFx4-SnNSAFJs7JTSpeivaWUQ48j7w@mail.gmail.com>
References: <CALUE4BLJttZjWc1=6CdcRFx4-SnNSAFJs7JTSpeivaWUQ48j7w@mail.gmail.com>
Message-ID: <CAGgJW77EKDWhQtEooqRqyfBXpy_11+zyWtCZL-NhHhnYhxZ7yQ@mail.gmail.com>

> R.oo::charToInt(x)

# [1] 97 98 99


On Mon, Nov 1, 2021 at 9:48 PM Alice <alice at coakmail.com> wrote:
>
> Dear members,
>
> How to translate the charter to the underline inter?
> I tried this:
>
> > x <- c("a","b","c")
>
> > as.numeric(x)
>
> [1] NA NA NA
>
> Warning message:
>
> NAs introduced by coercion
>
>
> It didn't work.
>
> Sorry for my newbie questions.
>
>
> B.R.
>
> Alice
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Mon Nov  1 21:16:32 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 1 Nov 2021 22:16:32 +0200
Subject: [R] How to slice the array?
In-Reply-To: <CALUE4BLsnfEGK56CX0h+ucYmtb-snb7gDgLs38q7kJja8AGaXw@mail.gmail.com>
References: <CALUE4BLsnfEGK56CX0h+ucYmtb-snb7gDgLs38q7kJja8AGaXw@mail.gmail.com>
Message-ID: <CAGgJW76U+-uO92ZXOE1t8eJtcyKqewDia4f4Y+4J4stRS2py6Q@mail.gmail.com>

x[ x > 2]

On Mon, Nov 1, 2021 at 9:49 PM Alice <alice at coakmail.com> wrote:
>
> How to slice the array with the condition?
> For example, in perl I can get the elements greater than 2.
>
> $ perl -le '@x=(1,2,3,4,5);@y=grep {$_>2} @x;print "@y"'
>
> 3 4 5
>
>
> in R I know which(x>2), but it will return the indexes instead of an array.
>
>
> Thanks again.
>
>
> Alice
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 21:20:28 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 13:20:28 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <c71b94e2-6c86-497d-bc9b-f940ddda201d@email.android.com>
References: <c71b94e2-6c86-497d-bc9b-f940ddda201d@email.android.com>
Message-ID: <bec4b81-b129-a3f6-81e8-3f88bc74860@appl-ecosys.com>

On Mon, 1 Nov 2021, CALUM POLWART wrote:

> Also - what is the RAW CSV like?
> "12345678",2019,"10"

Calum,

No parentheses. Example:
14171600,2009,10,23,05,15,PDT,8710
14171600,2009,10,23,05,30,PDT,8710

Which causes another question. If I work within the tidyverse should I
mutate the year, month, day, hour, and minute to a datetime (using mutate())
rather than having separate columns for each component?

Thanks,

Rich


From er|cjberger @end|ng |rom gm@||@com  Mon Nov  1 21:23:28 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 1 Nov 2021 22:23:28 +0200
Subject: [R] Code problem with R/Microeconomics
In-Reply-To: <AM8P194MB0964D34FF4DDEB5CC685417E8C8A9@AM8P194MB0964.EURP194.PROD.OUTLOOK.COM>
References: <AM8P194MB0964D34FF4DDEB5CC685417E8C8A9@AM8P194MB0964.EURP194.PROD.OUTLOOK.COM>
Message-ID: <CAGgJW77dwKdzCZbUTD-43v4TJexMevH8t_17Z=tb_GBu8CdeHA@mail.gmail.com>

Hi Olga,
There are many people reading this list who are happy to try to help.
Please provide some additional information about what you are trying
to do and where you are stuck.

Good luck,
Eric

On Mon, Nov 1, 2021 at 9:49 PM Olga Pervushina
<pervushina_olga at hotmail.com> wrote:
>
>
> Dear Sir/Madam,
>
> I am working on a statistical evaluation with R at the Erasmus University and have a problem with one  coding sentense. Who can help me with that?
>
> Thank you.
>
> Kind regards,
> Olga Pervushina
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@|kremk @end|ng |rom gm@||@com  Mon Nov  1 22:08:13 2021
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Mon, 1 Nov 2021 16:08:13 -0500
Subject: [R] by group
Message-ID: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>

Hi All,

How can I generate mean by group. The sample data looks like as follow,
dat<-read.table(text="Year Sex wt
2001 M 15
2001 M 14
2001 M 16
2001 F 12
2001 F 11
2001 F 13
2002 M 14
2002 M 18
2002 M 17
2002 F 11
2002 F 15
2002 F 14
2003 M 18
2003 M 13
2003 M 14
2003 F 15
2003 F 10
2003 F 11  ",header=TRUE)

The desired  output  is,
             M        F
2001    15        12
2002    16.33   13.33
2003    15          12

Thank you,


From @kw@|mmo @end|ng |rom gm@||@com  Mon Nov  1 22:24:06 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Mon, 1 Nov 2021 17:24:06 -0400
Subject: [R] by group
In-Reply-To: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
Message-ID: <CAPcHnpTJyH3xGMbnOzo+cSaAr9g_poXf9hiP9VHJWOoswFK4tw@mail.gmail.com>

I would usually use 'tapply'. It splits an object into groups, performs
some function on each group, and then (optionally) converts the input to
something simpler.
For example:


tapply(dat$wt, dat$Year, mean)  # mean by Year
tapply(dat$wt, dat$Sex , mean)  # mean by Sex
tapply(dat$wt, list(dat$Year, dat$Sex), mean)  # mean by Year and Sex


The documentation ?tapply has many more details about how this works, but
that's the basics at least. I hope this helps!

On Mon, Nov 1, 2021 at 5:09 PM Val <valkremk at gmail.com> wrote:

> Hi All,
>
> How can I generate mean by group. The sample data looks like as follow,
> dat<-read.table(text="Year Sex wt
> 2001 M 15
> 2001 M 14
> 2001 M 16
> 2001 F 12
> 2001 F 11
> 2001 F 13
> 2002 M 14
> 2002 M 18
> 2002 M 17
> 2002 F 11
> 2002 F 15
> 2002 F 14
> 2003 M 18
> 2003 M 13
> 2003 M 14
> 2003 F 15
> 2003 F 10
> 2003 F 11  ",header=TRUE)
>
> The desired  output  is,
>              M        F
> 2001    15        12
> 2002    16.33   13.33
> 2003    15          12
>
> Thank you,
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Mon Nov  1 23:05:08 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 2 Nov 2021 09:05:08 +1100
Subject: [R] How to slice the array?
In-Reply-To: <CALUE4BLsnfEGK56CX0h+ucYmtb-snb7gDgLs38q7kJja8AGaXw@mail.gmail.com>
References: <CALUE4BLsnfEGK56CX0h+ucYmtb-snb7gDgLs38q7kJja8AGaXw@mail.gmail.com>
Message-ID: <CA+8X3fUzF_Dz-JT_Ppoy0g52fjwDhRqKDkPBHeLFpj4__=YM2A@mail.gmail.com>

Hi Alice,
I can see from your two questions that your English is a bit shaky.
This is not a criticism, I couldn't speak Chinese to save my life. I
looked around for a Chinese R help mailing list and couldn't find one.
Perhaps someone else knows of one. Not only would it make your life
easier at the moment, but it may help you learning R jargon in
English.

Jim

On Tue, Nov 2, 2021 at 6:49 AM Alice <alice at coakmail.com> wrote:
>
> How to slice the array with the condition?
> For example, in perl I can get the elements greater than 2.
>
> $ perl -le '@x=(1,2,3,4,5);@y=grep {$_>2} @x;print "@y"'
>
> 3 4 5
>
>
> in R I know which(x>2), but it will return the indexes instead of an array.
>
>
> Thanks again.
>
>
> Alice
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Mon Nov  1 23:10:32 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 2 Nov 2021 09:10:32 +1100
Subject: [R] Help needed with data visualization in R
In-Reply-To: <12922970.2590645.1635795781681@mail.yahoo.com>
References: <1207710310.2568735.1635779088008.ref@mail.yahoo.com>
 <1207710310.2568735.1635779088008@mail.yahoo.com>
 <CAGgJW754xF51swwRRsU75oetftKXGtpPrn+LCEwUB6DnLWAZ6Q@mail.gmail.com>
 <CAGxFJbSA7g7QbEDm48BOaM-=fyGQV_zDU3R58X90oxoKwL6n8Q@mail.gmail.com>
 <12922970.2590645.1635795781681@mail.yahoo.com>
Message-ID: <CA+8X3fUsR=A=9VoTUrU4fRkmJxDvo6kD=iNJSQNO1=y7q9NHpA@mail.gmail.com>

Hi bharat,
There are a number of ways to do this in R. One is:

library(plotrix)
example(size_n_color)

Jim

On Tue, Nov 2, 2021 at 6:43 AM bharat rawlley via R-help
<r-help at r-project.org> wrote:
>
>  Thank you very much, for your time and response!
> This did resolve my issue and I apologize if the question was a little too straightforward - I did try to create bubble plots in excel but that did not work, hence, I asked here since it is more of a diagram and less of a plot. Thank you very much for your time and help!
>     On Monday, 1 November, 2021, 09:47:29 pm IST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>  ... a simple web search on "bubble plots R" (what else?) would have brought up many relevant hits. One should always try such obvious "homework" before posting here. Better and quicker info often results.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Nov 1, 2021 at 8:15 AM Eric Berger <ericjberger at gmail.com> wrote:
>
> I have no experience with this but I did a search and found the following
> which looks close to what you are looking for
>
> https://stackoverflow.com/questions/69755844/is-it-possible-to-draw-the-following-diagram-in-r
>
>
>
> On Mon, Nov 1, 2021 at 5:06 PM bharat rawlley via R-help <
> r-help at r-project.org> wrote:
>
> > Hello,
> >
> > I wanted to ask if it is possible to have a data visualization of the
> > following kind in R?
> > It is not exactly a graph; a series of bubbles that have an area
> > corresponding to the percentage inside it arranged in a row.
> > Thank you!
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Mon Nov  1 23:24:30 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 2 Nov 2021 09:24:30 +1100
Subject: [R] by group
In-Reply-To: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
Message-ID: <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>

Hi Val,
I think you answered your own question:

by(dat$wt,dat[,c("Sex","Year")],mean)

Jim

On Tue, Nov 2, 2021 at 8:09 AM Val <valkremk at gmail.com> wrote:
>
> Hi All,
>
> How can I generate mean by group. The sample data looks like as follow,
> dat<-read.table(text="Year Sex wt
> 2001 M 15
> 2001 M 14
> 2001 M 16
> 2001 F 12
> 2001 F 11
> 2001 F 13
> 2002 M 14
> 2002 M 18
> 2002 M 17
> 2002 F 11
> 2002 F 15
> 2002 F 14
> 2003 M 18
> 2003 M 13
> 2003 M 14
> 2003 F 15
> 2003 F 10
> 2003 F 11  ",header=TRUE)
>
> The desired  output  is,
>              M        F
> 2001    15        12
> 2002    16.33   13.33
> 2003    15          12
>
> Thank you,
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Mon Nov  1 23:24:47 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Nov 2021 15:24:47 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <1e4f2c0d-0f3d-4035-afdd-a938ff2c1d28@email.android.com>
References: <1e4f2c0d-0f3d-4035-afdd-a938ff2c1d28@email.android.com>
Message-ID: <491438c-6cad-e139-cd7a-394e58156356@appl-ecosys.com>

On Mon, 1 Nov 2021, CALUM POLWART wrote:

> Mutate. Probably.?

Calum,

I thought that I had it working, but I'm still missing a piece.

For example,
> cor_disc %>% 
+ select(year, mon, day, hr, min) %>%
+ mutate(
+ sampdt = make_datetime(year, mon, day, hr, min)
+ )
# A tibble: 415,263 ? 6
     year   mon   day    hr   min sampdt
    <int> <int> <int> <dbl> <dbl> <dttm>
  1  2009    10    23     0     0 2009-10-23 00:00:00
  2  2009    10    23     0    15 2009-10-23 00:15:00
  3  2009    10    23     0    30 2009-10-23 00:30:00
  4  2009    10    23     0    45 2009-10-23 00:45:00
  5  2009    10    23     1     0 2009-10-23 01:00:00
  6  2009    10    23     1    15 2009-10-23 01:15:00
  7  2009    10    23     1    30 2009-10-23 01:30:00
  8  2009    10    23     1    45 2009-10-23 01:45:00
  9  2009    10    23     2     0 2009-10-23 02:00:00
10  2009    10    23     2    15 2009-10-23 02:15:00
# ? with 415,253 more rows

produces the sampdt column, but it, and the timezone, are not present in the
cor_disc tibble:

> cor_disc A tibble: 415,263 ? 8
    site_nbr  year   mon   day    hr   min tz      cfs
    <chr>    <int> <int> <int> <dbl> <dbl> <chr> <int>
  1 14171600  2009    10    23     0     0 PDT    8750
  2 14171600  2009    10    23     0    15 PDT    8750
  3 14171600  2009    10    23     0    30 PDT    8750
  4 14171600  2009    10    23     0    45 PDT    8750
  5 14171600  2009    10    23     1     0 PDT    8750
  6 14171600  2009    10    23     1    15 PDT    8750
  7 14171600  2009    10    23     1    30 PDT    8750
  8 14171600  2009    10    23     1    45 PDT    8730
  9 14171600  2009    10    23     2     0 PDT    8730
10 14171600  2009    10    23     2    15 PDT    8730
# ? with 415,253 more rows

Is the error in the select() or mutate() function specifications?

Thanks,

Rich


From @v|gro@@ @end|ng |rom ver|zon@net  Mon Nov  1 23:44:25 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 1 Nov 2021 18:44:25 -0400
Subject: [R] by group
In-Reply-To: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
Message-ID: <004d01d7cf72$057cb800$10762800$@verizon.net>

This is a fairly simple request and well covered by introductory reading
material.

A decent example was given and I see Andrew provided a base R reply that
should be sufficient. But I do not think he realized you wanted something
different so his answer is not in the format you wanted:

> tapply(dat$wt, dat$Year, mean)  # mean by Year 
2001     2002     2003 
13.50000 14.83333 13.50000 
> tapply(dat$wt, dat$Sex , mean)  # mean by Sex tapply(dat$wt,
list(dat$Year, dat$Sex), mean)  # mean by Year and Sex
F        M
12.44444 15.44444

I personally often prefer to the tidyverse approach which optionally
includes pipes and allows a data frame to be grouped any way you want and
followed by commands. It is easier to output your result this way by
grouping BOTH by Year and Sex at once and getting multiple lines of output.
Note the code below requires a line once like install.packages("tidyverse)

library(tidyverse)
dat <- read.table(
  text = "Year Sex wt
2001 M 15
2001 M 14
2001 M 16
2001 F 12
2001 F 11
2001 F 13
2002 M 14
2002 M 18
2002 M 17
2002 F 11
2002 F 15
2002 F 14
2003 M 18
2003 M 13
2003 M 14
2003 F 15
2003 F 10
2003 F 11  ",
  header = TRUE
)

dat %>%
  group_by(Year, Sex) %>%
  summarize( M = mean(wt, na.rm=TRUE))

The output of the above is the rows below:

> dat %>%
  +   group_by(Year, Sex) %>%
  +   summarize( M = mean(wt, na.rm=TRUE))
`summarise()` has grouped output by 'Year'. You can override using the
`.groups` argument.
# A tibble: 6 x 3
# Groups:   Year [3]
Year Sex       M
<int> <chr> <dbl>
  1  2001 F      12  
2  2001 M      15  
3  2002 F      13.3
4  2002 M      16.3
5  2003 F      12  
6  2003 M      15  

Note Male and Female have their own rows. It is not that hard to switch it
to your format by rearranging the intermediate data set with pivot_wider()
in the pipeline asking to make multiple new columns from variable Sex and
populating them from the created variable M. The new complete pipeline is
now:

dat %>%
  group_by(Year, Sex) %>%
  summarize( M = mean(wt, na.rm=TRUE)) %>%
  pivot_wider(names_from = Sex, values_from = M)

The output as a tibble is:

Year     F     M
<int> <dbl> <dbl>
  1  2001  12    15  
2  2002  13.3  16.3
3  2003  12    15  

Or as a data.frame which seems to add zeroes:

dat %>%
  +   group_by(Year, Sex) %>%
  +   summarize( M = mean(wt, na.rm=TRUE)) %>%
  +   pivot_wider(names_from = Sex, values_from = M) %>%
  +   as.data.frame
`summarise()` has grouped output by 'Year'. You can override using the
`.groups` argument.
Year        F        M
1 2001 12.00000 15.00000
2 2002 13.33333 16.33333
3 2003 12.00000 15.00000

Your expected output is too rounded as it expects 13.3 and 16.3 but if you
insist on a single significant digit after the decimal point, ask for it to
be rounded:

> dat %>%
  +   group_by(Year, Sex) %>%
  +   summarize( M = mean(wt, na.rm=TRUE)) %>%
  +   pivot_wider(names_from = Sex, values_from = M) %>%
  +   as.data.frame %>%
  +   round(1)
`summarise()` has grouped output by 'Year'. You can override using the
`.groups` argument.
Year    F    M
1 2001 12.0 15.0
2 2002 13.3 16.3
3 2003 12.0 15.0

And, yes, any of the above can be done in various ways using plain old R,
and especially in the recent versions that have added a somewhat different
way to do pipelines.





-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Val
Sent: Monday, November 1, 2021 5:08 PM
To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] by group

Hi All,

How can I generate mean by group. The sample data looks like as follow,
dat<-read.table(text="Year Sex wt
2001 M 15
2001 M 14
2001 M 16
2001 F 12
2001 F 11
2001 F 13
2002 M 14
2002 M 18
2002 M 17
2002 F 11
2002 F 15
2002 F 14
2003 M 18
2003 M 13
2003 M 14
2003 F 15
2003 F 10
2003 F 11  ",header=TRUE)

The desired  output  is,
             M        F
2001    15        12
2002    16.33   13.33
2003    15          12

Thank you,

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Tue Nov  2 00:07:50 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 1 Nov 2021 19:07:50 -0400
Subject: [R] by group
In-Reply-To: <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
Message-ID: <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>

Jim,

Your code gives the output in quite a different format and as an object of
class "by" that is not easily convertible to a data.frame. So, yes, it is an
answer that produces the right numbers but not in the places or data
structures I think they (or if it is HW ...) wanted.

Trivial standard cases are often handled by a single step but more complex
ones often suggest a multi-part approach.

Of course Val gets to decide what approach works best for them within
whatever constraints we here are not made aware of. If this is a class
assignment, it likely would be using only tools discussed in the class. So I
would not suggest using a dplyr/tidyverse approach if that is not covered or
even part of a class. If this is a project in the real world, it becomes a
matter of programming taste and convenience and so on.

Maybe Val can share more about the situation so we can see what is helpful
and what is not. Realistically, I can think of way too many ways to get the
required output.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
Sent: Monday, November 1, 2021 6:25 PM
To: Val <valkremk at gmail.com>; r-help mailing list <r-help at r-project.org>
Subject: Re: [R] by group

Hi Val,
I think you answered your own question:

by(dat$wt,dat[,c("Sex","Year")],mean)

Jim

On Tue, Nov 2, 2021 at 8:09 AM Val <valkremk at gmail.com> wrote:
>
> Hi All,
>
> How can I generate mean by group. The sample data looks like as 
> follow, dat<-read.table(text="Year Sex wt
> 2001 M 15
> 2001 M 14
> 2001 M 16
> 2001 F 12
> 2001 F 11
> 2001 F 13
> 2002 M 14
> 2002 M 18
> 2002 M 17
> 2002 F 11
> 2002 F 15
> 2002 F 14
> 2003 M 18
> 2003 M 13
> 2003 M 14
> 2003 F 15
> 2003 F 10
> 2003 F 11  ",header=TRUE)
>
> The desired  output  is,
>              M        F
> 2001    15        12
> 2002    16.33   13.33
> 2003    15          12
>
> Thank you,
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From v@|kremk @end|ng |rom gm@||@com  Tue Nov  2 00:43:37 2021
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Mon, 1 Nov 2021 18:43:37 -0500
Subject: [R] by group
In-Reply-To: <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
Message-ID: <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>

Thank you all!
I can assure you that this is not  HW. This is a sample of my large
data set and I want a simple  and efficient approach to get the
desired  output   in that particular format.  That file will be saved
and used  as an input file for another external process.

val







On Mon, Nov 1, 2021 at 6:08 PM Avi Gross via R-help
<r-help at r-project.org> wrote:
>
> Jim,
>
> Your code gives the output in quite a different format and as an object of
> class "by" that is not easily convertible to a data.frame. So, yes, it is an
> answer that produces the right numbers but not in the places or data
> structures I think they (or if it is HW ...) wanted.
>
> Trivial standard cases are often handled by a single step but more complex
> ones often suggest a multi-part approach.
>
> Of course Val gets to decide what approach works best for them within
> whatever constraints we here are not made aware of. If this is a class
> assignment, it likely would be using only tools discussed in the class. So I
> would not suggest using a dplyr/tidyverse approach if that is not covered or
> even part of a class. If this is a project in the real world, it becomes a
> matter of programming taste and convenience and so on.
>
> Maybe Val can share more about the situation so we can see what is helpful
> and what is not. Realistically, I can think of way too many ways to get the
> required output.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
> Sent: Monday, November 1, 2021 6:25 PM
> To: Val <valkremk at gmail.com>; r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] by group
>
> Hi Val,
> I think you answered your own question:
>
> by(dat$wt,dat[,c("Sex","Year")],mean)
>
> Jim
>
> On Tue, Nov 2, 2021 at 8:09 AM Val <valkremk at gmail.com> wrote:
> >
> > Hi All,
> >
> > How can I generate mean by group. The sample data looks like as
> > follow, dat<-read.table(text="Year Sex wt
> > 2001 M 15
> > 2001 M 14
> > 2001 M 16
> > 2001 F 12
> > 2001 F 11
> > 2001 F 13
> > 2002 M 14
> > 2002 M 18
> > 2002 M 17
> > 2002 F 11
> > 2002 F 15
> > 2002 F 14
> > 2003 M 18
> > 2003 M 13
> > 2003 M 14
> > 2003 F 15
> > 2003 F 10
> > 2003 F 11  ",header=TRUE)
> >
> > The desired  output  is,
> >              M        F
> > 2001    15        12
> > 2002    16.33   13.33
> > 2003    15          12
> >
> > Thank you,
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Tue Nov  2 01:06:43 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 1 Nov 2021 20:06:43 -0400
Subject: [R] by group
In-Reply-To: <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
 <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
Message-ID: <010301d7cf7d$853bf640$8fb3e2c0$@verizon.net>

Understood Val. So you need to save the output in something like a data.frame which can then be saved as a CSV file or whatever else makes sense to be read in by a later program. As note by() does not produce the output in a usable way.

But you mentioned efficient, and that is another whole ball of wax. For small amounts of data it may not matter much. And some processes may look slower but turn out be more efficient if compiled as C/C++ or ...

Sometimes it might be more efficient to change the format of your data before the analysis, albeit if the output is much smaller, maybe best later.

Good luck.

-----Original Message-----
From: Val <valkremk at gmail.com> 
Sent: Monday, November 1, 2021 7:44 PM
To: Avi Gross <avigross at verizon.net>
Cc: r-help mailing list <r-help at r-project.org>
Subject: Re: [R] by group

Thank you all!
I can assure you that this is not  HW. This is a sample of my large data set and I want a simple  and efficient approach to get the
desired  output   in that particular format.  That file will be saved
and used  as an input file for another external process.

val







On Mon, Nov 1, 2021 at 6:08 PM Avi Gross via R-help <r-help at r-project.org> wrote:
>
> Jim,
>
> Your code gives the output in quite a different format and as an 
> object of class "by" that is not easily convertible to a data.frame. 
> So, yes, it is an answer that produces the right numbers but not in 
> the places or data structures I think they (or if it is HW ...) wanted.
>
> Trivial standard cases are often handled by a single step but more 
> complex ones often suggest a multi-part approach.
>
> Of course Val gets to decide what approach works best for them within 
> whatever constraints we here are not made aware of. If this is a class 
> assignment, it likely would be using only tools discussed in the 
> class. So I would not suggest using a dplyr/tidyverse approach if that 
> is not covered or even part of a class. If this is a project in the 
> real world, it becomes a matter of programming taste and convenience and so on.
>
> Maybe Val can share more about the situation so we can see what is 
> helpful and what is not. Realistically, I can think of way too many 
> ways to get the required output.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
> Sent: Monday, November 1, 2021 6:25 PM
> To: Val <valkremk at gmail.com>; r-help mailing list 
> <r-help at r-project.org>
> Subject: Re: [R] by group
>
> Hi Val,
> I think you answered your own question:
>
> by(dat$wt,dat[,c("Sex","Year")],mean)
>
> Jim
>
> On Tue, Nov 2, 2021 at 8:09 AM Val <valkremk at gmail.com> wrote:
> >
> > Hi All,
> >
> > How can I generate mean by group. The sample data looks like as 
> > follow, dat<-read.table(text="Year Sex wt
> > 2001 M 15
> > 2001 M 14
> > 2001 M 16
> > 2001 F 12
> > 2001 F 11
> > 2001 F 13
> > 2002 M 14
> > 2002 M 18
> > 2002 M 17
> > 2002 F 11
> > 2002 F 15
> > 2002 F 14
> > 2003 M 18
> > 2003 M 13
> > 2003 M 14
> > 2003 F 15
> > 2003 F 10
> > 2003 F 11  ",header=TRUE)
> >
> > The desired  output  is,
> >              M        F
> > 2001    15        12
> > 2002    16.33   13.33
> > 2003    15          12
> >
> > Thank you,
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@|kremk @end|ng |rom gm@||@com  Tue Nov  2 01:14:42 2021
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Mon, 1 Nov 2021 19:14:42 -0500
Subject: [R] by group
In-Reply-To: <010301d7cf7d$853bf640$8fb3e2c0$@verizon.net>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
 <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
 <010301d7cf7d$853bf640$8fb3e2c0$@verizon.net>
Message-ID: <CAJOiR6Y8_Jx=dZ7ehpnTyEwPzTYaONULo7g9NzjoVOKP0XVDAA@mail.gmail.com>

Thank you Avi,

One question, I am getting this  error from this script

> dat %>%
+   +   group_by(Year, Sex) %>%
+   +   summarize( M = mean(wt, na.rm=TRUE)) %>%
+   +   pivot_wider(names_from = Sex, values_from = M) %>%
+   +   as.data.frame %>%
+   +   round(1)
Error in group_by(Year, Sex) : object 'Year' not found
Why I am getting this?



On Mon, Nov 1, 2021 at 7:07 PM Avi Gross via R-help
<r-help at r-project.org> wrote:
>
> Understood Val. So you need to save the output in something like a data.frame which can then be saved as a CSV file or whatever else makes sense to be read in by a later program. As note by() does not produce the output in a usable way.
>
> But you mentioned efficient, and that is another whole ball of wax. For small amounts of data it may not matter much. And some processes may look slower but turn out be more efficient if compiled as C/C++ or ...
>
> Sometimes it might be more efficient to change the format of your data before the analysis, albeit if the output is much smaller, maybe best later.
>
> Good luck.
>
> -----Original Message-----
> From: Val <valkremk at gmail.com>
> Sent: Monday, November 1, 2021 7:44 PM
> To: Avi Gross <avigross at verizon.net>
> Cc: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] by group
>
> Thank you all!
> I can assure you that this is not  HW. This is a sample of my large data set and I want a simple  and efficient approach to get the
> desired  output   in that particular format.  That file will be saved
> and used  as an input file for another external process.
>
> val
>
>
>
>
>
>
>
> On Mon, Nov 1, 2021 at 6:08 PM Avi Gross via R-help <r-help at r-project.org> wrote:
> >
> > Jim,
> >
> > Your code gives the output in quite a different format and as an
> > object of class "by" that is not easily convertible to a data.frame.
> > So, yes, it is an answer that produces the right numbers but not in
> > the places or data structures I think they (or if it is HW ...) wanted.
> >
> > Trivial standard cases are often handled by a single step but more
> > complex ones often suggest a multi-part approach.
> >
> > Of course Val gets to decide what approach works best for them within
> > whatever constraints we here are not made aware of. If this is a class
> > assignment, it likely would be using only tools discussed in the
> > class. So I would not suggest using a dplyr/tidyverse approach if that
> > is not covered or even part of a class. If this is a project in the
> > real world, it becomes a matter of programming taste and convenience and so on.
> >
> > Maybe Val can share more about the situation so we can see what is
> > helpful and what is not. Realistically, I can think of way too many
> > ways to get the required output.
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
> > Sent: Monday, November 1, 2021 6:25 PM
> > To: Val <valkremk at gmail.com>; r-help mailing list
> > <r-help at r-project.org>
> > Subject: Re: [R] by group
> >
> > Hi Val,
> > I think you answered your own question:
> >
> > by(dat$wt,dat[,c("Sex","Year")],mean)
> >
> > Jim
> >
> > On Tue, Nov 2, 2021 at 8:09 AM Val <valkremk at gmail.com> wrote:
> > >
> > > Hi All,
> > >
> > > How can I generate mean by group. The sample data looks like as
> > > follow, dat<-read.table(text="Year Sex wt
> > > 2001 M 15
> > > 2001 M 14
> > > 2001 M 16
> > > 2001 F 12
> > > 2001 F 11
> > > 2001 F 13
> > > 2002 M 14
> > > 2002 M 18
> > > 2002 M 17
> > > 2002 F 11
> > > 2002 F 15
> > > 2002 F 14
> > > 2003 M 18
> > > 2003 M 13
> > > 2003 M 14
> > > 2003 F 15
> > > 2003 F 10
> > > 2003 F 11  ",header=TRUE)
> > >
> > > The desired  output  is,
> > >              M        F
> > > 2001    15        12
> > > 2002    16.33   13.33
> > > 2003    15          12
> > >
> > > Thank you,
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Tue Nov  2 01:37:24 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 1 Nov 2021 20:37:24 -0400
Subject: [R] by group
In-Reply-To: <CAJOiR6Y8_Jx=dZ7ehpnTyEwPzTYaONULo7g9NzjoVOKP0XVDAA@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
 <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
 <010301d7cf7d$853bf640$8fb3e2c0$@verizon.net>
 <CAJOiR6Y8_Jx=dZ7ehpnTyEwPzTYaONULo7g9NzjoVOKP0XVDAA@mail.gmail.com>
Message-ID: <01a101d7cf81$ce8766f0$6b9634d0$@verizon.net>

I sent Val a longer reply but for anyone else here, please note Val was copying my OUTPUT with continuation lines starting with plus so of course that has issues! 

The naked code to use was this:

dat %>%
  group_by(Year, Sex) %>%
  summarize( M = mean(wt, na.rm=TRUE)) %>%
  pivot_wider(names_from = Sex, values_from = M) %>%
  as.data.frame %>%
  round(1)


-----Original Message-----
From: Val <valkremk at gmail.com> 
Sent: Monday, November 1, 2021 8:15 PM
To: Avi Gross <avigross at verizon.net>
Cc: r-help mailing list <r-help at r-project.org>
Subject: Re: [R] by group

Thank you Avi,

One question, I am getting this  error from this script

> dat %>%
+   +   group_by(Year, Sex) %>%
+   +   summarize( M = mean(wt, na.rm=TRUE)) %>%
+   +   pivot_wider(names_from = Sex, values_from = M) %>%
+   +   as.data.frame %>%
+   +   round(1)
Error in group_by(Year, Sex) : object 'Year' not found Why I am getting this?



On Mon, Nov 1, 2021 at 7:07 PM Avi Gross via R-help <r-help at r-project.org> wrote:
>
> Understood Val. So you need to save the output in something like a data.frame which can then be saved as a CSV file or whatever else makes sense to be read in by a later program. As note by() does not produce the output in a usable way.
>
> But you mentioned efficient, and that is another whole ball of wax. For small amounts of data it may not matter much. And some processes may look slower but turn out be more efficient if compiled as C/C++ or ...
>
> Sometimes it might be more efficient to change the format of your data before the analysis, albeit if the output is much smaller, maybe best later.
>
> Good luck.
>
> -----Original Message-----
> From: Val <valkremk at gmail.com>
> Sent: Monday, November 1, 2021 7:44 PM
> To: Avi Gross <avigross at verizon.net>
> Cc: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] by group
>
> Thank you all!
> I can assure you that this is not  HW. This is a sample of my large data set and I want a simple  and efficient approach to get the
> desired  output   in that particular format.  That file will be saved
> and used  as an input file for another external process.
>
> val
>
>
>
>
>
>
>
> On Mon, Nov 1, 2021 at 6:08 PM Avi Gross via R-help <r-help at r-project.org> wrote:
> >
> > Jim,
> >
> > Your code gives the output in quite a different format and as an 
> > object of class "by" that is not easily convertible to a data.frame.
> > So, yes, it is an answer that produces the right numbers but not in 
> > the places or data structures I think they (or if it is HW ...) wanted.
> >
> > Trivial standard cases are often handled by a single step but more 
> > complex ones often suggest a multi-part approach.
> >
> > Of course Val gets to decide what approach works best for them 
> > within whatever constraints we here are not made aware of. If this 
> > is a class assignment, it likely would be using only tools discussed 
> > in the class. So I would not suggest using a dplyr/tidyverse 
> > approach if that is not covered or even part of a class. If this is 
> > a project in the real world, it becomes a matter of programming taste and convenience and so on.
> >
> > Maybe Val can share more about the situation so we can see what is 
> > helpful and what is not. Realistically, I can think of way too many 
> > ways to get the required output.
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
> > Sent: Monday, November 1, 2021 6:25 PM
> > To: Val <valkremk at gmail.com>; r-help mailing list 
> > <r-help at r-project.org>
> > Subject: Re: [R] by group
> >
> > Hi Val,
> > I think you answered your own question:
> >
> > by(dat$wt,dat[,c("Sex","Year")],mean)
> >
> > Jim
> >
> > On Tue, Nov 2, 2021 at 8:09 AM Val <valkremk at gmail.com> wrote:
> > >
> > > Hi All,
> > >
> > > How can I generate mean by group. The sample data looks like as 
> > > follow, dat<-read.table(text="Year Sex wt
> > > 2001 M 15
> > > 2001 M 14
> > > 2001 M 16
> > > 2001 F 12
> > > 2001 F 11
> > > 2001 F 13
> > > 2002 M 14
> > > 2002 M 18
> > > 2002 M 17
> > > 2002 F 11
> > > 2002 F 15
> > > 2002 F 14
> > > 2003 M 18
> > > 2003 M 13
> > > 2003 M 14
> > > 2003 F 15
> > > 2003 F 10
> > > 2003 F 11  ",header=TRUE)
> > >
> > > The desired  output  is,
> > >              M        F
> > > 2001    15        12
> > > 2002    16.33   13.33
> > > 2003    15          12
> > >
> > > Thank you,
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov  2 01:50:07 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 1 Nov 2021 17:50:07 -0700
Subject: [R] by group
In-Reply-To: <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
 <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
Message-ID: <CAGxFJbSet0zV_GAHcGfPsx8N10vnC8mw+EHh_mFejv7tM140sw@mail.gmail.com>

"A decent example was given and I see Andrew provided a base R reply that
should be sufficient. But I do not think he realized you wanted something
different so his answer is not in the format you wanted:"

Yes, but it is trivial to modify Andrew's suggestion to get almost exactly
what Val has requested (one merely needs to read ?tapply carefully) without
having to resort to tidyverse gymnastics:

> d <- with(dat, tapply(wt, list(Year, Sex), mean))
> d
            F        M
2001 12.00000 15.00000
2002 13.33333 16.33333
2003 12.00000 15.00000

This is a matrix, not a data.frame. write() or write.table()  can be used
to write it to a file in whatever format is desired (e.g. with or without
row,column names. Etc.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Nov 1, 2021 at 4:44 PM Val <valkremk at gmail.com> wrote:

> Thank you all!
> I can assure you that this is not  HW. This is a sample of my large
> data set and I want a simple  and efficient approach to get the
> desired  output   in that particular format.  That file will be saved
> and used  as an input file for another external process.
>
> val
>
>
>
>
>
>
>
> On Mon, Nov 1, 2021 at 6:08 PM Avi Gross via R-help
> <r-help at r-project.org> wrote:
> >
> > Jim,
> >
> > Your code gives the output in quite a different format and as an object
> of
> > class "by" that is not easily convertible to a data.frame. So, yes, it
> is an
> > answer that produces the right numbers but not in the places or data
> > structures I think they (or if it is HW ...) wanted.
> >
> > Trivial standard cases are often handled by a single step but more
> complex
> > ones often suggest a multi-part approach.
> >
> > Of course Val gets to decide what approach works best for them within
> > whatever constraints we here are not made aware of. If this is a class
> > assignment, it likely would be using only tools discussed in the class.
> So I
> > would not suggest using a dplyr/tidyverse approach if that is not
> covered or
> > even part of a class. If this is a project in the real world, it becomes
> a
> > matter of programming taste and convenience and so on.
> >
> > Maybe Val can share more about the situation so we can see what is
> helpful
> > and what is not. Realistically, I can think of way too many ways to get
> the
> > required output.
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
> > Sent: Monday, November 1, 2021 6:25 PM
> > To: Val <valkremk at gmail.com>; r-help mailing list <r-help at r-project.org>
> > Subject: Re: [R] by group
> >
> > Hi Val,
> > I think you answered your own question:
> >
> > by(dat$wt,dat[,c("Sex","Year")],mean)
> >
> > Jim
> >
> > On Tue, Nov 2, 2021 at 8:09 AM Val <valkremk at gmail.com> wrote:
> > >
> > > Hi All,
> > >
> > > How can I generate mean by group. The sample data looks like as
> > > follow, dat<-read.table(text="Year Sex wt
> > > 2001 M 15
> > > 2001 M 14
> > > 2001 M 16
> > > 2001 F 12
> > > 2001 F 11
> > > 2001 F 13
> > > 2002 M 14
> > > 2002 M 18
> > > 2002 M 17
> > > 2002 F 11
> > > 2002 F 15
> > > 2002 F 14
> > > 2003 M 18
> > > 2003 M 13
> > > 2003 M 14
> > > 2003 F 15
> > > 2003 F 10
> > > 2003 F 11  ",header=TRUE)
> > >
> > > The desired  output  is,
> > >              M        F
> > > 2001    15        12
> > > 2002    16.33   13.33
> > > 2003    15          12
> > >
> > > Thank you,
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Tue Nov  2 01:55:14 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue,  2 Nov 2021 00:55:14 +0000
Subject: [R] by group
In-Reply-To: <01a101d7cf81$ce8766f0$6b9634d0$@verizon.net>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
 <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
 <010301d7cf7d$853bf640$8fb3e2c0$@verizon.net>
 <CAJOiR6Y8_Jx=dZ7ehpnTyEwPzTYaONULo7g9NzjoVOKP0XVDAA@mail.gmail.com>
 <01a101d7cf81$ce8766f0$6b9634d0$@verizon.net>
Message-ID: <YYCMcnwEP/iZuijj@posteo.no>

Dear Val,

also consider using reshape2::dcast

	dat <- structure(list(Year = c(2001L,
	2001L, 2001L, 2001L, 2001L, 2001L,
	2002L, 2002L, 2002L, 2002L, 2002L,
	2002L, 2003L, 2003L, 2003L, 2003L,
	2003L, 2003L), Sex = c("M", "M", "M",
	"F", "F", "F", "M", "M", "M", "F", "F",
	"F", "M", "M", "M", "F", "F", "F"), wt =
	c(15L, 14L, 16L, 12L, 11L, 13L, 14L,
	18L, 17L, 11L, 15L, 14L, 18L, 13L, 14L,
	15L, 10L, 11L)), class = "data.frame",
	row.names = c(NA, -18L))
	
	reshape2::dcast(data=dat,
	                formula=Year~Sex,
	                value.var="wt",
	                fun.aggregate=mean)

yielding

	  Year        F        M
	1 2001 12.00000 15.00000
	2 2002 13.33333 16.33333
	3 2003 12.00000 15.00000

Best,
Rasmus


From @v|gro@@ @end|ng |rom ver|zon@net  Tue Nov  2 02:04:28 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 1 Nov 2021 21:04:28 -0400
Subject: [R] by group
In-Reply-To: <CAGxFJbSet0zV_GAHcGfPsx8N10vnC8mw+EHh_mFejv7tM140sw@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
 <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
 <CAGxFJbSet0zV_GAHcGfPsx8N10vnC8mw+EHh_mFejv7tM140sw@mail.gmail.com>
Message-ID: <01af01d7cf85$96242470$c26c6d50$@verizon.net>

That works, Bert. I do note the result, d, is a matrix and works because everything within it is numeric. I have no problem with that for this problem.

 

For a more general problem with a data.frame type of object with columns of any type, the proper output might better be a data.frame. Of course, in this case, the matric can easily be coerced back into a data.frame:

 

d <- as.data.frame(with(dat, tapply(wt, list(Year, Sex), mean)))

d

 

F        M

2001 12.00000 15.00000

2002 13.33333 16.33333

2003 12.00000 15.00000

 

str(d)

 

'data.frame':      3 obs. of  2 variables:

  $ F: num  12 13.3 12

$ M: num  15 16.3 15

 

 

 

From: Bert Gunter <bgunter.4567 at gmail.com> 
Sent: Monday, November 1, 2021 8:50 PM
To: Val <valkremk at gmail.com>
Cc: Avi Gross <avigross at verizon.net>; r-help mailing list <r-help at r-project.org>
Subject: Re: [R] by group

 

"A decent example was given and I see Andrew provided a base R reply that
should be sufficient. But I do not think he realized you wanted something
different so his answer is not in the format you wanted:"

 

Yes, but it is trivial to modify Andrew's suggestion to get almost exactly what Val has requested (one merely needs to read ?tapply carefully) without having to resort to tidyverse gymnastics:

 

> d <- with(dat, tapply(wt, list(Year, Sex), mean))
> d
            F        M
2001 12.00000 15.00000
2002 13.33333 16.33333
2003 12.00000 15.00000

 

This is a matrix, not a data.frame. write() or write.table()  can be used to write it to a file in whatever format is desired (e.g. with or without row,column names. Etc.

 

Cheers,

Bert

 

 

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

 

 

On Mon, Nov 1, 2021 at 4:44 PM Val <valkremk at gmail.com <mailto:valkremk at gmail.com> > wrote:

Thank you all!
I can assure you that this is not  HW. This is a sample of my large
data set and I want a simple  and efficient approach to get the
desired  output   in that particular format.  That file will be saved
and used  as an input file for another external process.

val







On Mon, Nov 1, 2021 at 6:08 PM Avi Gross via R-help
<r-help at r-project.org <mailto:r-help at r-project.org> > wrote:
>
> Jim,
>
> Your code gives the output in quite a different format and as an object of
> class "by" that is not easily convertible to a data.frame. So, yes, it is an
> answer that produces the right numbers but not in the places or data
> structures I think they (or if it is HW ...) wanted.
>
> Trivial standard cases are often handled by a single step but more complex
> ones often suggest a multi-part approach.
>
> Of course Val gets to decide what approach works best for them within
> whatever constraints we here are not made aware of. If this is a class
> assignment, it likely would be using only tools discussed in the class. So I
> would not suggest using a dplyr/tidyverse approach if that is not covered or
> even part of a class. If this is a project in the real world, it becomes a
> matter of programming taste and convenience and so on.
>
> Maybe Val can share more about the situation so we can see what is helpful
> and what is not. Realistically, I can think of way too many ways to get the
> required output.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Jim Lemon
> Sent: Monday, November 1, 2021 6:25 PM
> To: Val <valkremk at gmail.com <mailto:valkremk at gmail.com> >; r-help mailing list <r-help at r-project.org <mailto:r-help at r-project.org> >
> Subject: Re: [R] by group
>
> Hi Val,
> I think you answered your own question:
>
> by(dat$wt,dat[,c("Sex","Year")],mean)
>
> Jim
>
> On Tue, Nov 2, 2021 at 8:09 AM Val <valkremk at gmail.com <mailto:valkremk at gmail.com> > wrote:
> >
> > Hi All,
> >
> > How can I generate mean by group. The sample data looks like as
> > follow, dat<-read.table(text="Year Sex wt
> > 2001 M 15
> > 2001 M 14
> > 2001 M 16
> > 2001 F 12
> > 2001 F 11
> > 2001 F 13
> > 2002 M 14
> > 2002 M 18
> > 2002 M 17
> > 2002 F 11
> > 2002 F 15
> > 2002 F 14
> > 2003 M 18
> > 2003 M 13
> > 2003 M 14
> > 2003 F 15
> > 2003 F 10
> > 2003 F 11  ",header=TRUE)
> >
> > The desired  output  is,
> >              M        F
> > 2001    15        12
> > 2002    16.33   13.33
> > 2003    15          12
> >
> > Thank you,
> >
> > ______________________________________________
> > R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From jho|tm@n @end|ng |rom gm@||@com  Tue Nov  2 02:24:33 2021
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Mon, 1 Nov 2021 18:24:33 -0700
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <491438c-6cad-e139-cd7a-394e58156356@appl-ecosys.com>
References: <1e4f2c0d-0f3d-4035-afdd-a938ff2c1d28@email.android.com>
 <491438c-6cad-e139-cd7a-394e58156356@appl-ecosys.com>
Message-ID: <CAAxdm-7JgGuP-3pRb9QQrKAu5Sp9CdXrS=ii_Ajq8KHnnJW-sw@mail.gmail.com>

drop the select, or put tz in the select

Thanks

Jim Holtman
*Data Munger Guru*


*What is the problem that you are trying to solve?Tell me what you want to
do, not how you want to do it.*


On Mon, Nov 1, 2021 at 3:39 PM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

> On Mon, 1 Nov 2021, CALUM POLWART wrote:
>
> > Mutate. Probably.
>
> Calum,
>
> I thought that I had it working, but I'm still missing a piece.
>
> For example,
> > cor_disc %>%
> + select(year, mon, day, hr, min) %>%
> + mutate(
> + sampdt = make_datetime(year, mon, day, hr, min)
> + )
> # A tibble: 415,263 ? 6
>      year   mon   day    hr   min sampdt
>     <int> <int> <int> <dbl> <dbl> <dttm>
>   1  2009    10    23     0     0 2009-10-23 00:00:00
>   2  2009    10    23     0    15 2009-10-23 00:15:00
>   3  2009    10    23     0    30 2009-10-23 00:30:00
>   4  2009    10    23     0    45 2009-10-23 00:45:00
>   5  2009    10    23     1     0 2009-10-23 01:00:00
>   6  2009    10    23     1    15 2009-10-23 01:15:00
>   7  2009    10    23     1    30 2009-10-23 01:30:00
>   8  2009    10    23     1    45 2009-10-23 01:45:00
>   9  2009    10    23     2     0 2009-10-23 02:00:00
> 10  2009    10    23     2    15 2009-10-23 02:15:00
> # ? with 415,253 more rows
>
> produces the sampdt column, but it, and the timezone, are not present in
> the
> cor_disc tibble:
>
> > cor_disc A tibble: 415,263 ? 8
>     site_nbr  year   mon   day    hr   min tz      cfs
>     <chr>    <int> <int> <int> <dbl> <dbl> <chr> <int>
>   1 14171600  2009    10    23     0     0 PDT    8750
>   2 14171600  2009    10    23     0    15 PDT    8750
>   3 14171600  2009    10    23     0    30 PDT    8750
>   4 14171600  2009    10    23     0    45 PDT    8750
>   5 14171600  2009    10    23     1     0 PDT    8750
>   6 14171600  2009    10    23     1    15 PDT    8750
>   7 14171600  2009    10    23     1    30 PDT    8750
>   8 14171600  2009    10    23     1    45 PDT    8730
>   9 14171600  2009    10    23     2     0 PDT    8730
> 10 14171600  2009    10    23     2    15 PDT    8730
> # ? with 415,253 more rows
>
> Is the error in the select() or mutate() function specifications?
>
> Thanks,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov  2 02:34:45 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 1 Nov 2021 18:34:45 -0700
Subject: [R] by group
In-Reply-To: <YYCMcnwEP/iZuijj@posteo.no>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
 <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
 <010301d7cf7d$853bf640$8fb3e2c0$@verizon.net>
 <CAJOiR6Y8_Jx=dZ7ehpnTyEwPzTYaONULo7g9NzjoVOKP0XVDAA@mail.gmail.com>
 <01a101d7cf81$ce8766f0$6b9634d0$@verizon.net> <YYCMcnwEP/iZuijj@posteo.no>
Message-ID: <CAGxFJbTT1kUPbd49YD=zr-UJfvDo75r6Rd0HZ1e+6H5xcjT1Sg@mail.gmail.com>

... maybe not. According to Rdocumentation.org:

reshape2's status is:

reshape2 is retired: only changes necessary to keep it on CRAN will be
made. We recommend using tidyr <http://tidyr.tidyverse.org/> instead.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Nov 1, 2021 at 5:55 PM Rasmus Liland <jral at posteo.no> wrote:

> Dear Val,
>
> also consider using reshape2::dcast
>
>         dat <- structure(list(Year = c(2001L,
>         2001L, 2001L, 2001L, 2001L, 2001L,
>         2002L, 2002L, 2002L, 2002L, 2002L,
>         2002L, 2003L, 2003L, 2003L, 2003L,
>         2003L, 2003L), Sex = c("M", "M", "M",
>         "F", "F", "F", "M", "M", "M", "F", "F",
>         "F", "M", "M", "M", "F", "F", "F"), wt =
>         c(15L, 14L, 16L, 12L, 11L, 13L, 14L,
>         18L, 17L, 11L, 15L, 14L, 18L, 13L, 14L,
>         15L, 10L, 11L)), class = "data.frame",
>         row.names = c(NA, -18L))
>
>         reshape2::dcast(data=dat,
>                         formula=Year~Sex,
>                         value.var="wt",
>                         fun.aggregate=mean)
>
> yielding
>
>           Year        F        M
>         1 2001 12.00000 15.00000
>         2 2002 13.33333 16.33333
>         3 2003 12.00000 15.00000
>
> Best,
> Rasmus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v@|kremk @end|ng |rom gm@||@com  Tue Nov  2 03:10:09 2021
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Mon, 1 Nov 2021 21:10:09 -0500
Subject: [R] by group
In-Reply-To: <CAGxFJbTT1kUPbd49YD=zr-UJfvDo75r6Rd0HZ1e+6H5xcjT1Sg@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
 <CA+8X3fXjaX0BdDWpYR2QRO9tHmJ4vuyeF9YfqxbbttbQLAZEHQ@mail.gmail.com>
 <00bd01d7cf75$4ae1bc30$e0a53490$@verizon.net>
 <CAJOiR6arGb7tLLUpEr7bz-wh4sDUbo_jqueYMT0=4f4n7p=qOg@mail.gmail.com>
 <010301d7cf7d$853bf640$8fb3e2c0$@verizon.net>
 <CAJOiR6Y8_Jx=dZ7ehpnTyEwPzTYaONULo7g9NzjoVOKP0XVDAA@mail.gmail.com>
 <01a101d7cf81$ce8766f0$6b9634d0$@verizon.net> <YYCMcnwEP/iZuijj@posteo.no>
 <CAGxFJbTT1kUPbd49YD=zr-UJfvDo75r6Rd0HZ1e+6H5xcjT1Sg@mail.gmail.com>
Message-ID: <CAJOiR6YGH9yB4JHFKfkTtY_wv8HRaLBndXojfa=tx8QAfS-pCg@mail.gmail.com>

Thank you all for your help!

On Mon, Nov 1, 2021 at 8:47 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> ... maybe not. According to Rdocumentation.org:
>
> reshape2's status is:
>
> reshape2 is retired: only changes necessary to keep it on CRAN will be
> made. We recommend using tidyr <http://tidyr.tidyverse.org/> instead.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Nov 1, 2021 at 5:55 PM Rasmus Liland <jral at posteo.no> wrote:
>
> > Dear Val,
> >
> > also consider using reshape2::dcast
> >
> >         dat <- structure(list(Year = c(2001L,
> >         2001L, 2001L, 2001L, 2001L, 2001L,
> >         2002L, 2002L, 2002L, 2002L, 2002L,
> >         2002L, 2003L, 2003L, 2003L, 2003L,
> >         2003L, 2003L), Sex = c("M", "M", "M",
> >         "F", "F", "F", "M", "M", "M", "F", "F",
> >         "F", "M", "M", "M", "F", "F", "F"), wt =
> >         c(15L, 14L, 16L, 12L, 11L, 13L, 14L,
> >         18L, 17L, 11L, 15L, 14L, 18L, 13L, 14L,
> >         15L, 10L, 11L)), class = "data.frame",
> >         row.names = c(NA, -18L))
> >
> >         reshape2::dcast(data=dat,
> >                         formula=Year~Sex,
> >                         value.var="wt",
> >                         fun.aggregate=mean)
> >
> > yielding
> >
> >           Year        F        M
> >         1 2001 12.00000 15.00000
> >         2 2002 13.33333 16.33333
> >         3 2003 12.00000 15.00000
> >
> > Best,
> > Rasmus
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @@h|mk@poor @end|ng |rom gm@||@com  Tue Nov  2 07:21:27 2021
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Tue, 2 Nov 2021 11:51:27 +0530
Subject: [R] Error with RMySQL
In-Reply-To: <CAC8=1eqws0o8qLN-GDps42wdjtkLaRsNQYjpAVTke4BtZ0JQ=g@mail.gmail.com>
References: <CAC8=1eodWL8o8o46Hoid2ggxkm-Xu1xAwR9_n9C1cA9WYXqDcQ@mail.gmail.com>
 <CA+8X3fVq3YcemHWcg_1YymKxvpvm-kWVDxthQiUDzzY0ZTgE6w@mail.gmail.com>
 <CAC8=1eoJwkV2p2txRr-DwVMUUJ4uG3XBqE9PFf4JkqUXc4mgFQ@mail.gmail.com>
 <CAC8=1eq4ii15V1pGuGSNnpqA5doyQS1dE63gmbRLqzt6T3cC4g@mail.gmail.com>
 <CA+8X3fXoVptBLcvrrwCOuxCvHqzkVB978hXk7DqEd_SYtFbgsA@mail.gmail.com>
 <CAC8=1er2GBQO+2ZS1N4G9hK9p5kMuud9yJwV2Q+8WFRAym9oMw@mail.gmail.com>
 <CAC8=1eqws0o8qLN-GDps42wdjtkLaRsNQYjpAVTke4BtZ0JQ=g@mail.gmail.com>
Message-ID: <CAC8=1eq7HYNpNgrZAF=6ofCGGGeX9gO34RSj-Um4BKBt+wJL+A@mail.gmail.com>

Dear Jim and others,

(One of my colleagues pointed me in this direction)

I think the following is the problem that I am experiencing:-

https://dev.mysql.com/doc/mysql-security-excerpt/5.7/en/problems-connecting.html

The above says :

Some permanent solutions are:

Determine what is wrong with your DNS server and fix it.

Specify IP addresses rather than host names in the MySQL grant tables.

I could NOT determine what is wrong with my DNS server. If someone
here knows how to do that please do share with me. However, I
specified the IP address in place of the host name and that seems to
be working fine.

Best,
Ashim






On Thu, Oct 28, 2021 at 2:24 PM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
>
> Dear Jim,
>
> I restarted the mariadb.service but I am STILL not able to access the server.
>
> I can access one database from one user but not from another user. The
> credentials seem to be OK to me.
>
> If I can figure this out I will post it here.
>
> Many thanks,
> Ashim
>
> On Thu, Oct 28, 2021 at 1:38 PM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
> >
> > Dear Jim,
> >
> > Many thanks. I will try your suggestion and come back to you.
> >
> > Many thanks,
> > Ashim
> >
> > On Thu, Oct 28, 2021 at 1:25 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> > >
> > > Hi Ashim,
> > > I was out for a while. I would first try to restart MySQL, then if
> > > that didn't fix it, try logging in as root and accessing the database.
> > > While I can't debug this at a distance, I'm pretty sure that the
> > > database thinks that you aren't authorized to access it. If the
> > > restart works, your problem is solved. If you have to log in as root,
> > > it's more difficult to know how this happened.
> > >
> > > Jim
> > >
> > > On Thu, Oct 28, 2021 at 6:13 PM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
> > > >
> > > > Dear Jim,
> > > >
> > > > Can you please help me? I am a little confused here.
> > > >
> > > > Best,
> > > > Ashim
> > > >
> > > > On Thu, Oct 28, 2021 at 11:30 AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
> > > > >
> > > > > Dear Jim,
> > > > >
> > > > > > That error means that your user number or group is not allowed to
> > > > > > access it. Did you create the new one as a different user, maybe as
> > > > > > root?
> > > > >
> > > > > Here is what I did:
> > > > >
> > > > > I switched to root in the MySQL Server, created a new user called
> > > > > user2. I GRANTed user2 all permissions to access db2. I did NOT
> > > > > restart the mysql server as I think the GRANT  does not need a restart
> > > > > of the MySQL server.
> > > > >
> > > > > > Jim
> > > > > >
> > > > > > On Thu, Oct 28, 2021 at 4:42 PM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
> > > > > > >
> > > > > > > Dear R - users,
> > > > > > >
> > > > > > > I have 2 databases on a MySQL server. I am able to access the old one
> > > > > > > but not the freshly created one.
> > > > > > >
> > > > > > > library(RMySQL)
> > > > > > > # This one is the old one, I am able to access it,
> > > > > > > > con1<- dbConnect(MySQL(),host= "myserver", db="db1", user= "user1",password ="mypass1")
> > > > > > >
> > > > > > > # This is the new one. I am getting an error.
> > > > > > > > con2 <- dbConnect(MySQL(),host= "myserver", db="db2", user= "user2",password="mypass2")
> > > > > > > Error in .local(drv, ...) :
> > > > > > >   Failed to connect to database: Error: Access denied for user
> > > > > > > 'user2'@'myserver' (using password: YES)
> > > > > > > >
> > > > > > >
> > > > > > > Can someone please point me in the right direction? The error is not
> > > > > > > clear. I do not think I have mistyped the credentials.
> > > > > > >
> > > > > > > Many thanks,
> > > > > > > Ashim
> > > > > > >
> > > > > > > ______________________________________________
> > > > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > > > > and provide commented, minimal, self-contained, reproducible code.


From tuech|er @end|ng |rom gmx@@t  Tue Nov  2 07:22:42 2021
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Tue, 2 Nov 2021 07:22:42 +0100
Subject: [R] Translation of the charter
In-Reply-To: <CALUE4BLJttZjWc1=6CdcRFx4-SnNSAFJs7JTSpeivaWUQ48j7w@mail.gmail.com>
References: <CALUE4BLJttZjWc1=6CdcRFx4-SnNSAFJs7JTSpeivaWUQ48j7w@mail.gmail.com>
Message-ID: <9bd83404-a54b-4885-b2a8-6aaa1bb85f1f@gmx.at>

Alice wrote/hat geschrieben on/am 31.10.2021 07:33:
> Dear members,
>
> How to translate the charter to the underline inter?
> I tried this:
>
>> x <- c("a","b","c")
>
>> as.numeric(x)
>
> [1] NA NA NA
>
> Warning message:
>
> NAs introduced by coercion
>
>
> It didn't work.
>
> Sorry for my newbie questions.
>
>
> B.R.
>
> Alice
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
Is this, what you are looking for:

x <- c("a","b","c")
lettersnum <- 1:length(letters[])
names(lettersnum) <- letters[]
lettersnum[x]
 > lettersnum[x]
a b c
1 2 3

best,
Heinz


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Nov  2 08:39:50 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 2 Nov 2021 10:39:50 +0300
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <491438c-6cad-e139-cd7a-394e58156356@appl-ecosys.com>
References: <1e4f2c0d-0f3d-4035-afdd-a938ff2c1d28@email.android.com>
 <491438c-6cad-e139-cd7a-394e58156356@appl-ecosys.com>
Message-ID: <20211102103950.32270542@Tarkus>

On Mon, 1 Nov 2021 15:24:47 -0700 (PDT)
Rich Shepard <rshepard at appl-ecosys.com> wrote:

> + mutate(
> + sampdt = make_datetime(year, mon, day, hr, min)
> + )

<...>

> produces the sampdt column, but it, and the timezone, are not present
> in the cor_disc tibble

That's because mutate() doesn't, well, mutate its argument. It _returns_
its changes, but it doesn't save them in the original variable. It's
your responsibility to assign the result somewhere:

cor_disc |> select(...) |> mutate(...) -> cor_disc_mutated

(Idiomatic R makes it hard to accidentally change the value of the
variable passed to a function from inside of that function. Anything
short of environments, reference class objects and/or non-standard
evaluation will not affect the value outside the function call.)

-- 
Best regards,
Ivan


From m|n@h@|| @end|ng |rom um|ch@edu  Tue Nov  2 08:57:15 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Tue, 02 Nov 2021 10:57:15 +0300
Subject: [R] Translation of the charter
In-Reply-To: <9bd83404-a54b-4885-b2a8-6aaa1bb85f1f@gmx.at>
References: <CALUE4BLJttZjWc1=6CdcRFx4-SnNSAFJs7JTSpeivaWUQ48j7w@mail.gmail.com>
 <9bd83404-a54b-4885-b2a8-6aaa1bb85f1f@gmx.at>
Message-ID: <1489161.1635839835@apollo2.minshall.org>

Heinz,

> x <- c("a","b","c")
> lettersnum <- 1:length(letters[])
> names(lettersnum) <- letters[]
> lettersnum[x]
> > lettersnum[x]
> a b c
> 1 2 3

i'm not sure if the following is obviously better, but one might do
----
> b <- match(a, a)
> names(b) <- a
> b
a b c
1 2 3
----

cheers, Greg


From tuech|er @end|ng |rom gmx@@t  Tue Nov  2 10:23:38 2021
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Tue, 2 Nov 2021 10:23:38 +0100
Subject: [R] Translation of the charter
In-Reply-To: <1489161.1635839835@apollo2.minshall.org>
References: <CALUE4BLJttZjWc1=6CdcRFx4-SnNSAFJs7JTSpeivaWUQ48j7w@mail.gmail.com>
 <9bd83404-a54b-4885-b2a8-6aaa1bb85f1f@gmx.at>
 <1489161.1635839835@apollo2.minshall.org>
Message-ID: <c2883297-56ff-065a-9178-48dc3763613b@gmx.at>

Greg,

Greg Minshall wrote/hat geschrieben on/am 02.11.2021 08:57:
> Heinz,
>
>> x <- c("a","b","c")
>> lettersnum <- 1:length(letters[])
>> names(lettersnum) <- letters[]
>> lettersnum[x]
>>> lettersnum[x]
>> a b c
>> 1 2 3
>
> i'm not sure if the following is obviously better, but one might do
> ----
>> b <- match(a, a)
>> names(b) <- a
>> b
> a b c
> 1 2 3
> ----
>
> cheers, Greg
>
You are right - match seems obviously better, but why not do

x <- c("a","b","c")
match(x, letters[])

best, Heinz


From yong @end|ng |rom pobox@com  Tue Nov  2 09:13:06 2021
From: yong @end|ng |rom pobox@com (Yonghua Peng)
Date: Tue, 2 Nov 2021 16:13:06 +0800
Subject: [R] Is there a hash data structure for R
Message-ID: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>

I know this is a newbie question. But how do I implement the hash structure
which is available in other languages (in python it's dict)?

I know there is the list, but list's names can be duplicated here.

> x <- list(x=1:5,y=month.name,x=3:7)

> x

$x

[1] 1 2 3 4 5


$y

 [1] "January"   "February"  "March"     "April"     "May"       "June"

 [7] "July"      "August"    "September" "October"   "November"  "December"


$x

[1] 3 4 5 6 7



Thanks a lot.

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Tue Nov  2 11:18:33 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 2 Nov 2021 12:18:33 +0200
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
Message-ID: <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>

One choice is
new.env(hash=TRUE)
in the base package



On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com> wrote:

> I know this is a newbie question. But how do I implement the hash structure
> which is available in other languages (in python it's dict)?
>
> I know there is the list, but list's names can be duplicated here.
>
> > x <- list(x=1:5,y=month.name,x=3:7)
>
> > x
>
> $x
>
> [1] 1 2 3 4 5
>
>
> $y
>
>  [1] "January"   "February"  "March"     "April"     "May"       "June"
>
>  [7] "July"      "August"    "September" "October"   "November"  "December"
>
>
> $x
>
> [1] 3 4 5 6 7
>
>
>
> Thanks a lot.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Tue Nov  2 11:21:40 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Tue, 02 Nov 2021 13:21:40 +0300
Subject: [R] Translation of the charter
In-Reply-To: <c2883297-56ff-065a-9178-48dc3763613b@gmx.at>
References: <CALUE4BLJttZjWc1=6CdcRFx4-SnNSAFJs7JTSpeivaWUQ48j7w@mail.gmail.com>
 <9bd83404-a54b-4885-b2a8-6aaa1bb85f1f@gmx.at>
 <1489161.1635839835@apollo2.minshall.org>
 <c2883297-56ff-065a-9178-48dc3763613b@gmx.at>
Message-ID: <1511641.1635848500@apollo2.minshall.org>

hi, Heinz,

> You are right - match seems obviously better, but why not do
> 
> x <- c("a","b","c")
> match(x, letters[])

no, really, i wasn't sure of the requirements!

cheers, Greg


From rhe|p @end|ng |rom eoo@@dd@@n|  Tue Nov  2 11:24:48 2021
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Tue, 2 Nov 2021 11:24:48 +0100
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
 <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
Message-ID: <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>


True, but in a lot of cases where a python user might use a dict an R 
user will probably use a list; or when we are talking about arrays of 
dicts in python, the R solution will probably be a data.frame (with each 
dict field in a separate column).

Jan




On 02-11-2021 11:18, Eric Berger wrote:
> One choice is
> new.env(hash=TRUE)
> in the base package
> 
> 
> 
> On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com> wrote:
> 
>> I know this is a newbie question. But how do I implement the hash structure
>> which is available in other languages (in python it's dict)?
>>
>> I know there is the list, but list's names can be duplicated here.
>>
>>> x <- list(x=1:5,y=month.name,x=3:7)
>>
>>> x
>>
>> $x
>>
>> [1] 1 2 3 4 5
>>
>>
>> $y
>>
>>   [1] "January"   "February"  "March"     "April"     "May"       "June"
>>
>>   [7] "July"      "August"    "September" "October"   "November"  "December"
>>
>>
>> $x
>>
>> [1] 3 4 5 6 7
>>
>>
>>
>> Thanks a lot.
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From yong @end|ng |rom pobox@com  Tue Nov  2 11:32:47 2021
From: yong @end|ng |rom pobox@com (Yonghua Peng)
Date: Tue, 2 Nov 2021 18:32:47 +0800
Subject: [R] Is there a hash data structure for R
In-Reply-To: <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
 <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
 <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>
Message-ID: <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>

But for data.frame the colnames can be duplicated. Am I right?

Regards.

On Tue, Nov 2, 2021 at 6:29 PM Jan van der Laan <rhelp at eoos.dds.nl> wrote:

>
> True, but in a lot of cases where a python user might use a dict an R
> user will probably use a list; or when we are talking about arrays of
> dicts in python, the R solution will probably be a data.frame (with each
> dict field in a separate column).
>
> Jan
>
>
>
>
> On 02-11-2021 11:18, Eric Berger wrote:
> > One choice is
> > new.env(hash=TRUE)
> > in the base package
> >
> >
> >
> > On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com> wrote:
> >
> >> I know this is a newbie question. But how do I implement the hash
> structure
> >> which is available in other languages (in python it's dict)?
> >>
> >> I know there is the list, but list's names can be duplicated here.
> >>
> >>> x <- list(x=1:5,y=month.name,x=3:7)
> >>
> >>> x
> >>
> >> $x
> >>
> >> [1] 1 2 3 4 5
> >>
> >>
> >> $y
> >>
> >>   [1] "January"   "February"  "March"     "April"     "May"       "June"
> >>
> >>   [7] "July"      "August"    "September" "October"   "November"
> "December"
> >>
> >>
> >> $x
> >>
> >> [1] 3 4 5 6 7
> >>
> >>
> >>
> >> Thanks a lot.
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Nov  2 12:23:44 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 2 Nov 2021 11:23:44 +0000
Subject: [R] by group
In-Reply-To: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
References: <CAJOiR6Z9XBccyN4iodxp+qBGx1xQbkBc3JXUKqv7oERT9F16iw@mail.gmail.com>
Message-ID: <4522dc1acfbd4e3baf2c3132f75ddfbe@SRVEXCHCM1302.precheza.cz>

Hi

Although you got several answers, simple aggregate was omitted.

> with(dat, aggregate(wt, list(Year=Year, Sex=Sex), mean))
  Year Sex        x
1 2001   F 12.00000
2 2002   F 13.33333
3 2003   F 12.00000
4 2001   M 15.00000
5 2002   M 16.33333
6 2003   M 15.00000

you can reshape the result 
> library(reshape2)
Warning message:
package 'reshape2' was built under R version 4.0.4 
> dcast(res, Year~Sex)
Using x as value column: use value.var to override.
  Year        F        M
1 2001 12.00000 15.00000
2 2002 13.33333 16.33333
3 2003 12.00000 15.00000

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Val
> Sent: Monday, November 1, 2021 10:08 PM
> To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
> Subject: [R] by group
> 
> Hi All,
> 
> How can I generate mean by group. The sample data looks like as follow,
> dat<-read.table(text="Year Sex wt
> 2001 M 15
> 2001 M 14
> 2001 M 16
> 2001 F 12
> 2001 F 11
> 2001 F 13
> 2002 M 14
> 2002 M 18
> 2002 M 17
> 2002 F 11
> 2002 F 15
> 2002 F 14
> 2003 M 18
> 2003 M 13
> 2003 M 14
> 2003 F 15
> 2003 F 10
> 2003 F 11  ",header=TRUE)
> 
> The desired  output  is,
>              M        F
> 2001    15        12
> 2002    16.33   13.33
> 2003    15          12
> 
> Thank you,
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Nov  2 12:54:14 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 2 Nov 2021 07:54:14 -0400
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
Message-ID: <3c08e18a-3e13-0f0c-d6d6-6bcae66feb1c@gmail.com>

On 02/11/2021 4:13 a.m., Yonghua Peng wrote:
> I know this is a newbie question. But how do I implement the hash structure
> which is available in other languages (in python it's dict)?
> 
> I know there is the list, but list's names can be duplicated here.

As Eric said, the environment comes pretty close.  One difference 
between lists and environments is that environments are reference 
objects, so this changes e1$x:

   e1 <- new.env()
   e1$x <- 1
   e2 <- e1
   e2$x <- 2

Lists are not reference objects, so this doesn't change l1$x:

   l1 <- list()
   l1$x <- 1
   l2 <- l1
   l2$x <- 2

I don't know which behaviour you'd feel more comfortable with. 
Reference objects are pretty rare in R, so some R programmers would be 
surprised by the environment behaviour.  But in other languages they're 
more common, so maybe newbies would be more surprised by the list behaviour.

Another difference betwee environments and lists is how they handle 
assignments of NULL:

   e1$y <- NULL   # sets e1$y to NULL
   l1$y <- NULL   # does nothing here, would delete l1$y if it existed

I don't like the NULL handling in lists in R, but I'm used to it.

BTW, I don't understand why the possibility of duplicated names is an 
issue.  If you just avoid intentional duplication, you don't get it. 
For example, if instead of this:
> 
>> x <- list(x=1:5,y=month.name,x=3:7)

you do this:

x <- list(x=1:5,y=month.name)
x$x <- 3:7

there is no duplication.  The only (?) ways to get duplication are in 
the initial construction of the list, or by explicit manipulation of the 
names attribute.  So be careful when you do those, and lists can work.

Duncan Murdoch

> 
>> x
> 
> $x
> 
> [1] 1 2 3 4 5
> 
> 
> $y
> 
>   [1] "January"   "February"  "March"     "April"     "May"       "June"
> 
>   [7] "July"      "August"    "September" "October"   "November"  "December"
> 
> 
> $x
> 
> [1] 3 4 5 6 7
> 
> 
> 
> Thanks a lot.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From rhe|p @end|ng |rom eoo@@dd@@n|  Tue Nov  2 13:19:47 2021
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Tue, 2 Nov 2021 13:19:47 +0100
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
 <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
 <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>
 <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>
Message-ID: <8d79c107-2a2e-520b-000a-60e3a58390fd@eoos.dds.nl>


Yes. A data.frame is basically a list where all elements are vectors of 
the same length. So this issue also exists in a data.frame. However, the 
data.frame construction method will detect this and generate unique 
names (which also might not be what you want):

 > data.frame(a=1:3, a=1:3) 
 
 
 
 

   a a.1 
 
 
 
 
                                                                   1 1 
  1 
 
 
 
 
                                                             2 2   2 
 
 
 
 
 
                                                           3 3   3

But still with a little effort you can still create a data.frame with 
multiple columns with the same name. But as Duncan Murdoch mentions you 
can usually control for that.


Best,
Jan




On 02-11-2021 11:32, Yonghua Peng wrote:
> But for data.frame the colnames can be duplicated. Am I right?
> 
> Regards.
> 
> On Tue, Nov 2, 2021 at 6:29 PM Jan van der Laan <rhelp at eoos.dds.nl 
> <mailto:rhelp at eoos.dds.nl>> wrote:
> 
> 
>     True, but in a lot of cases where a python user might use a dict an R
>     user will probably use a list; or when we are talking about arrays of
>     dicts in python, the R solution will probably be a data.frame (with
>     each
>     dict field in a separate column).
> 
>     Jan
> 
> 
> 
> 
>     On 02-11-2021 11:18, Eric Berger wrote:
>      > One choice is
>      > new.env(hash=TRUE)
>      > in the base package
>      >
>      >
>      >
>      > On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com
>     <mailto:yong at pobox.com>> wrote:
>      >
>      >> I know this is a newbie question. But how do I implement the
>     hash structure
>      >> which is available in other languages (in python it's dict)?
>      >>
>      >> I know there is the list, but list's names can be duplicated here.
>      >>
>      >>> x <- list(x=1:5,y=month.name <http://month.name>,x=3:7)
>      >>
>      >>> x
>      >>
>      >> $x
>      >>
>      >> [1] 1 2 3 4 5
>      >>
>      >>
>      >> $y
>      >>
>      >>? ?[1] "January"? ?"February"? "March"? ? ?"April"? ? ?"May"     
>      ?"June"
>      >>
>      >>? ?[7] "July"? ? ? "August"? ? "September" "October" 
>      ?"November"? "December"
>      >>
>      >>
>      >> $x
>      >>
>      >> [1] 3 4 5 6 7
>      >>
>      >>
>      >>
>      >> Thanks a lot.
>      >>
>      >>? ? ? ? ? [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      >> https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>      >> PLEASE do read the posting guide
>      >> http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>      >> and provide commented, minimal, self-contained, reproducible code.
>      >>
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Tue Nov  2 14:13:26 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Tue, 2 Nov 2021 06:13:26 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <CAAxdm-7JgGuP-3pRb9QQrKAu5Sp9CdXrS=ii_Ajq8KHnnJW-sw@mail.gmail.com>
References: <1e4f2c0d-0f3d-4035-afdd-a938ff2c1d28@email.android.com>
 <491438c-6cad-e139-cd7a-394e58156356@appl-ecosys.com>
 <CAAxdm-7JgGuP-3pRb9QQrKAu5Sp9CdXrS=ii_Ajq8KHnnJW-sw@mail.gmail.com>
Message-ID: <a0a82c89-a527-ef94-50ef-9052529d4b58@appl-ecosys.com>

On Mon, 1 Nov 2021, jim holtman wrote:

> drop the select, or put tz in the select

Jim,

Thinking more about the process after logging out for the evening it
occurred to me that I need to select all columns to retain them in the
tibble. I just tried that and, sure enough, that did the job.

Thanks very much,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Tue Nov  2 14:14:56 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Tue, 2 Nov 2021 06:14:56 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column
In-Reply-To: <20211102103950.32270542@Tarkus>
References: <1e4f2c0d-0f3d-4035-afdd-a938ff2c1d28@email.android.com>
 <491438c-6cad-e139-cd7a-394e58156356@appl-ecosys.com>
 <20211102103950.32270542@Tarkus>
Message-ID: <35ed9595-ad2b-3556-57be-fb7fad8fcf9c@appl-ecosys.com>

On Tue, 2 Nov 2021, Ivan Krylov wrote:

> That's because mutate() doesn't, well, mutate its argument. It _returns_
> its changes, but it doesn't save them in the original variable. It's your
> responsibility to assign the result somewhere:

Ivan,

I realized this after thinking more about the issue.

By putting all tibble columns in the select stanza the sampdate column was
added to the tibble.

Thanks very much,

Rich


From tr@xp|@yer @end|ng |rom gm@||@com  Tue Nov  2 15:42:34 2021
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Tue, 2 Nov 2021 15:42:34 +0100
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
Message-ID: <CAGAA5bePXfP7Guqm+Bda29ZHDP5P5UT+-P3fNgZE1VGQfBL17A@mail.gmail.com>

On Tue, 2 Nov 2021 at 10:48, Yonghua Peng <yong at pobox.com> wrote:
>
> I know this is a newbie question. But how do I implement the hash
structure
> which is available in other languages (in python it's dict)?
>

As other posters wrote then environments are the solution.
data.frames, vectors and lists are much slower and less useful to use as
key-value pairs.

Here are some code I somethings uses:

cache <- NULL

cache_set <- function(key, value) {
  assign(key, value, envir = cache)
}

cache_reset <- function() {
  cache <<- new.env(TRUE, emptyenv())
}

cache_get <- function(key) {
  get(key, envir = cache, inherits = FALSE)
}

cache_has_key <- function(key) {
  exists(key, envir = cache, inherits = FALSE)
}
cache_reset()

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Tue Nov  2 16:52:12 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 2 Nov 2021 11:52:12 -0400
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
 <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
 <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>
 <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>
Message-ID: <CAPcHnpQVxNzoo_O1mAo8MJF1x0Lhk9K7Ov6zyFWaGo6OeXjq_Q@mail.gmail.com>

If you're thinking about using environments, I would suggest you initialize
them like


x <- new.env(parent = emptyenv())


Since environments have parent environments, it means that requesting a
value from that environment can actually return the value stored in a
parent environment (this isn't an issue for [[ or $, this is exclusively an
issue with assign, get, and exists)
Or, if you've already got your values stored in a list that you want to
turn into an environment:


x <- list2env(listOfValues, parent = emptyenv())


Hope this helps!


On Tue, Nov 2, 2021, 06:49 Yonghua Peng <yong at pobox.com> wrote:

> But for data.frame the colnames can be duplicated. Am I right?
>
> Regards.
>
> On Tue, Nov 2, 2021 at 6:29 PM Jan van der Laan <rhelp at eoos.dds.nl> wrote:
>
> >
> > True, but in a lot of cases where a python user might use a dict an R
> > user will probably use a list; or when we are talking about arrays of
> > dicts in python, the R solution will probably be a data.frame (with each
> > dict field in a separate column).
> >
> > Jan
> >
> >
> >
> >
> > On 02-11-2021 11:18, Eric Berger wrote:
> > > One choice is
> > > new.env(hash=TRUE)
> > > in the base package
> > >
> > >
> > >
> > > On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com> wrote:
> > >
> > >> I know this is a newbie question. But how do I implement the hash
> > structure
> > >> which is available in other languages (in python it's dict)?
> > >>
> > >> I know there is the list, but list's names can be duplicated here.
> > >>
> > >>> x <- list(x=1:5,y=month.name,x=3:7)
> > >>
> > >>> x
> > >>
> > >> $x
> > >>
> > >> [1] 1 2 3 4 5
> > >>
> > >>
> > >> $y
> > >>
> > >>   [1] "January"   "February"  "March"     "April"     "May"
>  "June"
> > >>
> > >>   [7] "July"      "August"    "September" "October"   "November"
> > "December"
> > >>
> > >>
> > >> $x
> > >>
> > >> [1] 3 4 5 6 7
> > >>
> > >>
> > >>
> > >> Thanks a lot.
> > >>
> > >>          [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > >> http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> > >>
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Tue Nov  2 18:18:07 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Tue, 2 Nov 2021 10:18:07 -0700 (PDT)
Subject: [R] sink() not working as expected
Message-ID: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>

I've read ?sink and several web pages about it but it's not working properly
when I have the commands in a script and source() them.

The file:
library(tidyverse)
library(lubridate)

sink('data-summaries.txt')
'corvalis discharge summary\n'
summary(cor_disc)
sd(cor_disc$cfs)
'-----------------\n'
sink()

> source('summary_stats.R')
results in an empty file.

When I enter them line-by-line on the R command line I get output including
multiple lines listing the PWD and ignoring the newline:

[1] "/path/to/PWD"
[1] "corvalis discharge summary\n"
[1] "/path/to/PWD"
    site_nbr              year           mon              day
  Length:415263      Min.   :2009   Min.   : 1.000   Min.   : 1.00
  Class :character   1st Qu.:2012   1st Qu.: 4.000   1st Qu.: 8.00
  Mode  :character   Median :2015   Median : 7.000   Median :16.00
                     Mean   :2015   Mean   : 6.552   Mean   :15.74
                     3rd Qu.:2018   3rd Qu.:10.000   3rd Qu.:23.00
                     Max.   :2021   Max.   :12.000   Max.   :31.00
        hr             min             tz                 cfs
  Min.   : 0.00   Min.   : 0.00   Length:415263      Min.   :1000
  1st Qu.: 5.00   1st Qu.: 0.00   Class :character   1st Qu.:1950
  Median :11.00   Median :15.00   Mode  :character   Median :4740
  Mean   :11.49   Mean   :22.44                      Mean   :4624
  3rd Qu.:17.00   3rd Qu.:30.00                      3rd Qu.:6580
  Max.   :23.00   Max.   :55.00                      Max.   :9990 
[1] "/path/to/PWD"
[1] 2600.546
[1] "/path/to/PWD"
[1] "-----------------\n"
[1] "/path/to/PWD"
~

What am I doing incorrectly here? I've looked at examples on web pages
without learning where I'm erring.

TIA,

Rich


From w||||@mwdun|@p @end|ng |rom gm@||@com  Tue Nov  2 18:25:31 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Tue, 2 Nov 2021 10:25:31 -0700
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CAPcHnpQVxNzoo_O1mAo8MJF1x0Lhk9K7Ov6zyFWaGo6OeXjq_Q@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
 <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
 <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>
 <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>
 <CAPcHnpQVxNzoo_O1mAo8MJF1x0Lhk9K7Ov6zyFWaGo6OeXjq_Q@mail.gmail.com>
Message-ID: <CAHqSRuRRdArRXNYwsRdvSWFTBJUvPYRSOSaCLynk8ggJOrSZzw@mail.gmail.com>

Note that an environment carries a hash table with it, while a named list
does not.  I think that looking up an entry in a list causes a hash table
to be created and thrown away.  Here are some timings involving setting and
getting various numbers of entries in environments and lists.  The times
are roughly linear in n for environments and quadratic for lists.

> vapply(1e3 * 2 ^ (0:6), f, L=new.env(parent=emptyenv()),
FUN.VALUE=NA_real_)
[1] 0.00 0.00 0.00 0.02 0.03 0.06 0.15
> vapply(1e3 * 2 ^ (0:6), f, L=list(), FUN.VALUE=NA_real_)
[1]  0.01  0.03  0.15  0.53  2.66 13.66 56.05
> f
function(n, L, V = sprintf("V%07d", sample(n, replace=TRUE))) {
    system.time(for(v in V)L[[v]]<-c(L[[v]],v))["elapsed"]
}

Note that environments do not allow an element named "" (the empty string).

Elements named NA_character_ are treated differently in environments and
lists, neither of which is great.  You may want your hash table functions
to deal with oddball names explicitly.

-Bill

On Tue, Nov 2, 2021 at 8:52 AM Andrew Simmons <akwsimmo at gmail.com> wrote:

> If you're thinking about using environments, I would suggest you initialize
> them like
>
>
> x <- new.env(parent = emptyenv())
>
>
> Since environments have parent environments, it means that requesting a
> value from that environment can actually return the value stored in a
> parent environment (this isn't an issue for [[ or $, this is exclusively an
> issue with assign, get, and exists)
> Or, if you've already got your values stored in a list that you want to
> turn into an environment:
>
>
> x <- list2env(listOfValues, parent = emptyenv())
>
>
> Hope this helps!
>
>
> On Tue, Nov 2, 2021, 06:49 Yonghua Peng <yong at pobox.com> wrote:
>
> > But for data.frame the colnames can be duplicated. Am I right?
> >
> > Regards.
> >
> > On Tue, Nov 2, 2021 at 6:29 PM Jan van der Laan <rhelp at eoos.dds.nl>
> wrote:
> >
> > >
> > > True, but in a lot of cases where a python user might use a dict an R
> > > user will probably use a list; or when we are talking about arrays of
> > > dicts in python, the R solution will probably be a data.frame (with
> each
> > > dict field in a separate column).
> > >
> > > Jan
> > >
> > >
> > >
> > >
> > > On 02-11-2021 11:18, Eric Berger wrote:
> > > > One choice is
> > > > new.env(hash=TRUE)
> > > > in the base package
> > > >
> > > >
> > > >
> > > > On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com> wrote:
> > > >
> > > >> I know this is a newbie question. But how do I implement the hash
> > > structure
> > > >> which is available in other languages (in python it's dict)?
> > > >>
> > > >> I know there is the list, but list's names can be duplicated here.
> > > >>
> > > >>> x <- list(x=1:5,y=month.name,x=3:7)
> > > >>
> > > >>> x
> > > >>
> > > >> $x
> > > >>
> > > >> [1] 1 2 3 4 5
> > > >>
> > > >>
> > > >> $y
> > > >>
> > > >>   [1] "January"   "February"  "March"     "April"     "May"
> >  "June"
> > > >>
> > > >>   [7] "July"      "August"    "September" "October"   "November"
> > > "December"
> > > >>
> > > >>
> > > >> $x
> > > >>
> > > >> [1] 3 4 5 6 7
> > > >>
> > > >>
> > > >>
> > > >> Thanks a lot.
> > > >>
> > > >>          [[alternative HTML version deleted]]
> > > >>
> > > >> ______________________________________________
> > > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >> PLEASE do read the posting guide
> > > >> http://www.R-project.org/posting-guide.html
> > > >> and provide commented, minimal, self-contained, reproducible code.
> > > >>
> > > >
> > > >       [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > > >
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Tue Nov  2 19:18:10 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 2 Nov 2021 14:18:10 -0400
Subject: [R] sink() not working as expected
In-Reply-To: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
Message-ID: <CAPcHnpSBg1WZ1Tbq_0fXPOVcx1vMY7sWamN868R5f9X=utWEhQ@mail.gmail.com>

You probably want to use cat and print for these lines. These things won't
print when not run at the top level, so if you want them to print, you must
specify that.

On Tue, Nov 2, 2021, 13:18 Rich Shepard <rshepard at appl-ecosys.com> wrote:

> I've read ?sink and several web pages about it but it's not working
> properly
> when I have the commands in a script and source() them.
>
> The file:
> library(tidyverse)
> library(lubridate)
>
> sink('data-summaries.txt')
> 'corvalis discharge summary\n'
> summary(cor_disc)
> sd(cor_disc$cfs)
> '-----------------\n'
> sink()
>
> > source('summary_stats.R')
> results in an empty file.
>
> When I enter them line-by-line on the R command line I get output including
> multiple lines listing the PWD and ignoring the newline:
>
> [1] "/path/to/PWD"
> [1] "corvalis discharge summary\n"
> [1] "/path/to/PWD"
>     site_nbr              year           mon              day
>   Length:415263      Min.   :2009   Min.   : 1.000   Min.   : 1.00
>   Class :character   1st Qu.:2012   1st Qu.: 4.000   1st Qu.: 8.00
>   Mode  :character   Median :2015   Median : 7.000   Median :16.00
>                      Mean   :2015   Mean   : 6.552   Mean   :15.74
>                      3rd Qu.:2018   3rd Qu.:10.000   3rd Qu.:23.00
>                      Max.   :2021   Max.   :12.000   Max.   :31.00
>         hr             min             tz                 cfs
>   Min.   : 0.00   Min.   : 0.00   Length:415263      Min.   :1000
>   1st Qu.: 5.00   1st Qu.: 0.00   Class :character   1st Qu.:1950
>   Median :11.00   Median :15.00   Mode  :character   Median :4740
>   Mean   :11.49   Mean   :22.44                      Mean   :4624
>   3rd Qu.:17.00   3rd Qu.:30.00                      3rd Qu.:6580
>   Max.   :23.00   Max.   :55.00                      Max.   :9990
> [1] "/path/to/PWD"
> [1] 2600.546
> [1] "/path/to/PWD"
> [1] "-----------------\n"
> [1] "/path/to/PWD"
> ~
>
> What am I doing incorrectly here? I've looked at examples on web pages
> without learning where I'm erring.
>
> TIA,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Tue Nov  2 19:45:41 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Tue, 2 Nov 2021 11:45:41 -0700 (PDT)
Subject: [R] sink() not working as expected
In-Reply-To: <CAPcHnpSBg1WZ1Tbq_0fXPOVcx1vMY7sWamN868R5f9X=utWEhQ@mail.gmail.com>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
 <CAPcHnpSBg1WZ1Tbq_0fXPOVcx1vMY7sWamN868R5f9X=utWEhQ@mail.gmail.com>
Message-ID: <565986f8-fcc1-5f5d-bd4d-875d1fb6461@appl-ecosys.com>

On Tue, 2 Nov 2021, Andrew Simmons wrote:

> You probably want to use cat and print for these lines. These things won't
> print when not run at the top level, so if you want them to print, you must
> specify that.

Andrew,

I modified the file to this:
sink('data-summaries.txt')
cat ('corvalis discharge summary\n')
print(cat)
summary(cor_disc)
sd(cor_disc$cfs)
cat ('-----------------\n')
print(cat)
sink()

and ran it from the R command line:
> sink('data-summaries.txt')
> cat ('corvalis discharge summary\n')
> print(cat)
> summary(cor_disc)
> sd(cor_disc$cfs)
> cat ('-----------------\n')
> print(cat)
> sink()
>

with this output:
corvalis discharge summary
function (..., file = "", sep = " ", fill = FALSE, labels = NULL,
     append = FALSE) 
{
     if (is.character(file))
         if (file == "")
             file <- stdout()
         else if (startsWith(file, "|")) {
             file <- pipe(substring(file, 2L), "w")
             on.exit(close(file))
         }
         else {
             file <- file(file, ifelse(append, "a", "w"))
             on.exit(close(file))
         }
     .Internal(cat(list(...), file, sep, fill, labels, append))
}
<bytecode: 0xbf3730>
<environment: namespace:base>
    site_nbr              year           mon              day
  Length:415263      Min.   :2009   Min.   : 1.000   Min.   : 1.00
  Class :character   1st Qu.:2012   1st Qu.: 4.000   1st Qu.: 8.00
  Mode  :character   Median :2015   Median : 7.000   Median :16.00
                     Mean   :2015   Mean   : 6.552   Mean   :15.74
                     3rd Qu.:2018   3rd Qu.:10.000   3rd Qu.:23.00
                     Max.   :2021   Max.   :12.000   Max.   :31.00
        hr             min             tz                 cfs
  Min.   : 0.00   Min.   : 0.00   Length:415263      Min.   :1000
  1st Qu.: 5.00   1st Qu.: 0.00   Class :character   1st Qu.:1950
  Median :11.00   Median :15.00   Mode  :character   Median :4740
  Mean   :11.49   Mean   :22.44                      Mean   :4624
  3rd Qu.:17.00   3rd Qu.:30.00                      3rd Qu.:6580
  Max.   :23.00   Max.   :55.00                      Max.   :9990 
[1] 2600.546
-----------------
function (..., file = "", sep = " ", fill = FALSE, labels = NULL,
     append = FALSE) 
{
     if (is.character(file))
         if (file == "")
             file <- stdout()
         else if (startsWith(file, "|")) {
             file <- pipe(substring(file, 2L), "w")
             on.exit(close(file))
         }
         else {
             file <- file(file, ifelse(append, "a", "w"))
             on.exit(close(file))
         }
     .Internal(cat(list(...), file, sep, fill, labels, append))
}
<bytecode: 0xbf3730>
<environment: namespace:base>

Much closer, but still not quite right. How should I modify this?

Thanks,

Rich


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov  2 19:58:00 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 2 Nov 2021 11:58:00 -0700
Subject: [R] sink() not working as expected
In-Reply-To: <565986f8-fcc1-5f5d-bd4d-875d1fb6461@appl-ecosys.com>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
 <CAPcHnpSBg1WZ1Tbq_0fXPOVcx1vMY7sWamN868R5f9X=utWEhQ@mail.gmail.com>
 <565986f8-fcc1-5f5d-bd4d-875d1fb6461@appl-ecosys.com>
Message-ID: <CAGxFJbTE+uvqD7in4=rtGkAWYrte2Eo7DOWr0sD6dVrM3CEJrQ@mail.gmail.com>

What do you think these 2 lines are doing?

cat ('corvalis discharge summary\n')
print(cat)

Please consult ?cat . You might also spend a bit of (more?) time with an R
tutorial or two as you seem confused about how assignment (<-) works. Or
maybe I'm confused about what is confusing you....

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Nov 2, 2021 at 11:46 AM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

> On Tue, 2 Nov 2021, Andrew Simmons wrote:
>
> > You probably want to use cat and print for these lines. These things
> won't
> > print when not run at the top level, so if you want them to print, you
> must
> > specify that.
>
> Andrew,
>
> I modified the file to this:
> sink('data-summaries.txt')
> cat ('corvalis discharge summary\n')
> print(cat)
> summary(cor_disc)
> sd(cor_disc$cfs)
> cat ('-----------------\n')
> print(cat)
> sink()
>
> and ran it from the R command line:
> > sink('data-summaries.txt')
> > cat ('corvalis discharge summary\n')
> > print(cat)
> > summary(cor_disc)
> > sd(cor_disc$cfs)
> > cat ('-----------------\n')
> > print(cat)
> > sink()
> >
>
> with this output:
> corvalis discharge summary
> function (..., file = "", sep = " ", fill = FALSE, labels = NULL,
>      append = FALSE)
> {
>      if (is.character(file))
>          if (file == "")
>              file <- stdout()
>          else if (startsWith(file, "|")) {
>              file <- pipe(substring(file, 2L), "w")
>              on.exit(close(file))
>          }
>          else {
>              file <- file(file, ifelse(append, "a", "w"))
>              on.exit(close(file))
>          }
>      .Internal(cat(list(...), file, sep, fill, labels, append))
> }
> <bytecode: 0xbf3730>
> <environment: namespace:base>
>     site_nbr              year           mon              day
>   Length:415263      Min.   :2009   Min.   : 1.000   Min.   : 1.00
>   Class :character   1st Qu.:2012   1st Qu.: 4.000   1st Qu.: 8.00
>   Mode  :character   Median :2015   Median : 7.000   Median :16.00
>                      Mean   :2015   Mean   : 6.552   Mean   :15.74
>                      3rd Qu.:2018   3rd Qu.:10.000   3rd Qu.:23.00
>                      Max.   :2021   Max.   :12.000   Max.   :31.00
>         hr             min             tz                 cfs
>   Min.   : 0.00   Min.   : 0.00   Length:415263      Min.   :1000
>   1st Qu.: 5.00   1st Qu.: 0.00   Class :character   1st Qu.:1950
>   Median :11.00   Median :15.00   Mode  :character   Median :4740
>   Mean   :11.49   Mean   :22.44                      Mean   :4624
>   3rd Qu.:17.00   3rd Qu.:30.00                      3rd Qu.:6580
>   Max.   :23.00   Max.   :55.00                      Max.   :9990
> [1] 2600.546
> -----------------
> function (..., file = "", sep = " ", fill = FALSE, labels = NULL,
>      append = FALSE)
> {
>      if (is.character(file))
>          if (file == "")
>              file <- stdout()
>          else if (startsWith(file, "|")) {
>              file <- pipe(substring(file, 2L), "w")
>              on.exit(close(file))
>          }
>          else {
>              file <- file(file, ifelse(append, "a", "w"))
>              on.exit(close(file))
>          }
>      .Internal(cat(list(...), file, sep, fill, labels, append))
> }
> <bytecode: 0xbf3730>
> <environment: namespace:base>
>
> Much closer, but still not quite right. How should I modify this?
>
> Thanks,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Tue Nov  2 20:52:27 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Tue, 2 Nov 2021 12:52:27 -0700 (PDT)
Subject: [R] sink() not working as expected
In-Reply-To: <CAGxFJbTE+uvqD7in4=rtGkAWYrte2Eo7DOWr0sD6dVrM3CEJrQ@mail.gmail.com>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
 <CAPcHnpSBg1WZ1Tbq_0fXPOVcx1vMY7sWamN868R5f9X=utWEhQ@mail.gmail.com>
 <565986f8-fcc1-5f5d-bd4d-875d1fb6461@appl-ecosys.com>
 <CAGxFJbTE+uvqD7in4=rtGkAWYrte2Eo7DOWr0sD6dVrM3CEJrQ@mail.gmail.com>
Message-ID: <20e0995d-4b57-e2b6-fd1-ed1c1aaa2260@appl-ecosys.com>

On Tue, 2 Nov 2021, Bert Gunter wrote:

> What do you think these 2 lines are doing?
> cat ('corvalis discharge summary\n')
> print(cat)

Bert,

If I used them in linux cat would display the file (as do more and less) and
print() would be replaced with lpr

> Please consult ?cat . You might also spend a bit of (more?) time with an R
> tutorial or two as you seem confused about how assignment (<-) works. Or
> maybe I'm confused about what is confusing you....

Having never before needed to use cat in R, and not seeing it explained in
the one sink() web page, I didn't think to look at the help page.

Now, using cat and not print line-by-line the first set of commands work,
but not the second.

More reading coming up.

Rich


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Nov  2 22:21:21 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 3 Nov 2021 00:21:21 +0300
Subject: [R] sink() not working as expected
In-Reply-To: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
Message-ID: <20211103002121.20bf0c43@Tarkus>

On Tue, 2 Nov 2021 10:18:07 -0700 (PDT)
Rich Shepard <rshepard at appl-ecosys.com> wrote:

> 'corvalis discharge summary\n'
> summary(cor_disc)
> sd(cor_disc$cfs)
> '-----------------\n'

In the interactive mode, on the top level of execution, these commands
behave as if you had written

print(sink('data-summaries.txt'))
print('corvalis discharge summary\n')
print(summary(cor_disc))
print(sd(cor_disc$cfs))

instead. When you source() a script, auto-printing is not performed.
This is explained in the first paragraph of ?source, but not ?sink. If
you want to source() scripts and rely on their output (including
sink()), you'll need to print() results explicitly.

-- 
Best regards,
Ivan


From @kw@|mmo @end|ng |rom gm@||@com  Tue Nov  2 22:31:12 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 2 Nov 2021 17:31:12 -0400
Subject: [R] sink() not working as expected
In-Reply-To: <20e0995d-4b57-e2b6-fd1-ed1c1aaa2260@appl-ecosys.com>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
 <CAPcHnpSBg1WZ1Tbq_0fXPOVcx1vMY7sWamN868R5f9X=utWEhQ@mail.gmail.com>
 <565986f8-fcc1-5f5d-bd4d-875d1fb6461@appl-ecosys.com>
 <CAGxFJbTE+uvqD7in4=rtGkAWYrte2Eo7DOWr0sD6dVrM3CEJrQ@mail.gmail.com>
 <20e0995d-4b57-e2b6-fd1-ed1c1aaa2260@appl-ecosys.com>
Message-ID: <CAPcHnpRTFf_s_3FyadfiHjOKi9W0UzZXwpeqiQ1LztiZZUwqTA@mail.gmail.com>

cat in R behaves similarly to cat in unix-alikes, sends text to a stdout.
Usually, that stdout would be a file, but usually in R it is the R Console.
I think it might also help to note the difference between cat and print:


x <- "test\n"
cat(x)
print(x)


produces


> cat(x)
test
> print(x)
[1] "test\n"


With that said, wrap each expressions in cat or print depending on which
you want. Also, I would probably add a tryCatch with argument finally as {
    sink()
}
which will guarantee the file connection is severed, even if an error is
raised. Hope this helps

On Tue, Nov 2, 2021, 15:52 Rich Shepard <rshepard at appl-ecosys.com> wrote:

> On Tue, 2 Nov 2021, Bert Gunter wrote:
>
> > What do you think these 2 lines are doing?
> > cat ('corvalis discharge summary\n')
> > print(cat)
>
> Bert,
>
> If I used them in linux cat would display the file (as do more and less)
> and
> print() would be replaced with lpr
>
> > Please consult ?cat . You might also spend a bit of (more?) time with an
> R
> > tutorial or two as you seem confused about how assignment (<-) works. Or
> > maybe I'm confused about what is confusing you....
>
> Having never before needed to use cat in R, and not seeing it explained in
> the one sink() web page, I didn't think to look at the help page.
>
> Now, using cat and not print line-by-line the first set of commands work,
> but not the second.
>
> More reading coming up.
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Wed Nov  3 00:42:03 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Tue, 2 Nov 2021 19:42:03 -0400
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CAHqSRuRRdArRXNYwsRdvSWFTBJUvPYRSOSaCLynk8ggJOrSZzw@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
 <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
 <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>
 <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>
 <CAPcHnpQVxNzoo_O1mAo8MJF1x0Lhk9K7Ov6zyFWaGo6OeXjq_Q@mail.gmail.com>
 <CAHqSRuRRdArRXNYwsRdvSWFTBJUvPYRSOSaCLynk8ggJOrSZzw@mail.gmail.com>
Message-ID: <00a501d7d043$3d852080$b88f6180$@verizon.net>

I have several things I considered about this topic.

It is, in general, not possible to do some things in one language or another
even if you find a bridge. Python lets you place all kinds of things into a
dictionary including many static objects like tuples or even other
dictionaries. What is allowed for keys is quite broad. If you use an R
environment or list, there are restrictions on what names are allowed that
are not necessarily the same. 

Now on to key uniqueness. Yes, R allows multiple named entries to share the
same name. But  when I made such a structure, the FIRST instance hides any
later ones when accessing something like list.name$A or setting it. If you
remove an exiting entry by something like setting the above to NULL, though,
the second instance of that name nor becomes the first. So anyone wanting to
fully remove all instances might need to loop till sure all are gone. Not
sure about environments but they may behave better.

Third, multiple parties have built R packages to support hashing including
some no longer available:

https://cran.r-project.org/web/packages/hash/hash.pdf
https://www.rdocumentation.org/packages/Dict/versions/0.10.0

So  if one of those works, why reinvent it?

In any case, if you roll your own, as has been shown by others, you may have
to provide getter and setter functionality and so on to make sure of things
that you want for compatibility and be Careful as any other programs that
can play with your data may go around you.

Finally, someone mentioned how creating a data.frame with duplicate names
for columns is not a problem as it can automagically CHANGE them to be
unique. That is a HUGE problem for using that as a dictionary as the new
name will not be known to the system so all kinds of things will fail.

And there are also packages for many features like sets as well as functions
to manipulate these things.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Bill Dunlap
Sent: Tuesday, November 2, 2021 1:26 PM
To: Andrew Simmons <akwsimmo at gmail.com>
Cc: R Help <r-help at r-project.org>
Subject: Re: [R] Is there a hash data structure for R

Note that an environment carries a hash table with it, while a named list
does not.  I think that looking up an entry in a list causes a hash table to
be created and thrown away.  Here are some timings involving setting and
getting various numbers of entries in environments and lists.  The times are
roughly linear in n for environments and quadratic for lists.

> vapply(1e3 * 2 ^ (0:6), f, L=new.env(parent=emptyenv()),
FUN.VALUE=NA_real_)
[1] 0.00 0.00 0.00 0.02 0.03 0.06 0.15
> vapply(1e3 * 2 ^ (0:6), f, L=list(), FUN.VALUE=NA_real_)
[1]  0.01  0.03  0.15  0.53  2.66 13.66 56.05
> f
function(n, L, V = sprintf("V%07d", sample(n, replace=TRUE))) {
    system.time(for(v in V)L[[v]]<-c(L[[v]],v))["elapsed"] }

Note that environments do not allow an element named "" (the empty string).

Elements named NA_character_ are treated differently in environments and
lists, neither of which is great.  You may want your hash table functions to
deal with oddball names explicitly.

-Bill

On Tue, Nov 2, 2021 at 8:52 AM Andrew Simmons <akwsimmo at gmail.com> wrote:

> If you're thinking about using environments, I would suggest you 
> initialize them like
>
>
> x <- new.env(parent = emptyenv())
>
>
> Since environments have parent environments, it means that requesting 
> a value from that environment can actually return the value stored in 
> a parent environment (this isn't an issue for [[ or $, this is 
> exclusively an issue with assign, get, and exists) Or, if you've 
> already got your values stored in a list that you want to turn into an 
> environment:
>
>
> x <- list2env(listOfValues, parent = emptyenv())
>
>
> Hope this helps!
>
>
> On Tue, Nov 2, 2021, 06:49 Yonghua Peng <yong at pobox.com> wrote:
>
> > But for data.frame the colnames can be duplicated. Am I right?
> >
> > Regards.
> >
> > On Tue, Nov 2, 2021 at 6:29 PM Jan van der Laan <rhelp at eoos.dds.nl>
> wrote:
> >
> > >
> > > True, but in a lot of cases where a python user might use a dict 
> > > an R user will probably use a list; or when we are talking about 
> > > arrays of dicts in python, the R solution will probably be a 
> > > data.frame (with
> each
> > > dict field in a separate column).
> > >
> > > Jan
> > >
> > >
> > >
> > >
> > > On 02-11-2021 11:18, Eric Berger wrote:
> > > > One choice is
> > > > new.env(hash=TRUE)
> > > > in the base package
> > > >
> > > >
> > > >
> > > > On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com> wrote:
> > > >
> > > >> I know this is a newbie question. But how do I implement the 
> > > >> hash
> > > structure
> > > >> which is available in other languages (in python it's dict)?
> > > >>
> > > >> I know there is the list, but list's names can be duplicated here.
> > > >>
> > > >>> x <- list(x=1:5,y=month.name,x=3:7)
> > > >>
> > > >>> x
> > > >>
> > > >> $x
> > > >>
> > > >> [1] 1 2 3 4 5
> > > >>
> > > >>
> > > >> $y
> > > >>
> > > >>   [1] "January"   "February"  "March"     "April"     "May"
> >  "June"
> > > >>
> > > >>   [7] "July"      "August"    "September" "October"   "November"
> > > "December"
> > > >>
> > > >>
> > > >> $x
> > > >>
> > > >> [1] 3 4 5 6 7
> > > >>
> > > >>
> > > >>
> > > >> Thanks a lot.
> > > >>
> > > >>          [[alternative HTML version deleted]]
> > > >>
> > > >> ______________________________________________
> > > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, 
> > > >> see https://stat.ethz.ch/mailman/listinfo/r-help
> > > >> PLEASE do read the posting guide 
> > > >> http://www.R-project.org/posting-guide.html
> > > >> and provide commented, minimal, self-contained, reproducible code.
> > > >>
> > > >
> > > >       [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, 
> > > > see https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > > >
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From rhe|p @end|ng |rom eoo@@dd@@n|  Wed Nov  3 10:47:06 2021
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Wed, 3 Nov 2021 10:47:06 +0100
Subject: [R] Is there a hash data structure for R
In-Reply-To: <00a501d7d043$3d852080$b88f6180$@verizon.net>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
 <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
 <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>
 <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>
 <CAPcHnpQVxNzoo_O1mAo8MJF1x0Lhk9K7Ov6zyFWaGo6OeXjq_Q@mail.gmail.com>
 <CAHqSRuRRdArRXNYwsRdvSWFTBJUvPYRSOSaCLynk8ggJOrSZzw@mail.gmail.com>
 <00a501d7d043$3d852080$b88f6180$@verizon.net>
Message-ID: <2ea14b34-e15f-4907-6a89-a9cc7d0eb0d3@dds.nl>



On 03-11-2021 00:42, Avi Gross via R-help wrote:

> 
> Finally, someone mentioned how creating a data.frame with duplicate names
> for columns is not a problem as it can automagically CHANGE them to be
> unique. That is a HUGE problem for using that as a dictionary as the new
> name will not be known to the system so all kinds of things will fail.

I think you are referring to my remark which was:

 > However, the data.frame construction method will detect this and
 > generate unique names (which also might not be what you want):

I didn't say this means that duplicate names aren't a problem; I just 
mentioned the the behaviour is different. Personally, I would actually 
prefer the behaviour of list (keep the duplicated name) with a warning.

Most of the responses seem to assume that the OP actually wants a hash 
table. Yes, he did ask for that and for a hash table an environment 
(with some work) would be a good option. But in many cases, where other 
languages would use a hash-table-like object (such as a dict) in R you 
would use other types of objects. Furthermore, for many operations where 
you might use hash tables to implement the operation, R has already 
built in options, for example %in%, match, duplicated. These are also 
vectorised; so two vectors: one with keys and one with values might 
actually be faster than an environment in some use cases.

Best,
Jan


> 
> And there are also packages for many features like sets as well as functions
> to manipulate these things.
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bill Dunlap
> Sent: Tuesday, November 2, 2021 1:26 PM
> To: Andrew Simmons <akwsimmo at gmail.com>
> Cc: R Help <r-help at r-project.org>
> Subject: Re: [R] Is there a hash data structure for R
> 
> Note that an environment carries a hash table with it, while a named list
> does not.  I think that looking up an entry in a list causes a hash table to
> be created and thrown away.  Here are some timings involving setting and
> getting various numbers of entries in environments and lists.  The times are
> roughly linear in n for environments and quadratic for lists.
> 
>> vapply(1e3 * 2 ^ (0:6), f, L=new.env(parent=emptyenv()),
> FUN.VALUE=NA_real_)
> [1] 0.00 0.00 0.00 0.02 0.03 0.06 0.15
>> vapply(1e3 * 2 ^ (0:6), f, L=list(), FUN.VALUE=NA_real_)
> [1]  0.01  0.03  0.15  0.53  2.66 13.66 56.05
>> f
> function(n, L, V = sprintf("V%07d", sample(n, replace=TRUE))) {
>      system.time(for(v in V)L[[v]]<-c(L[[v]],v))["elapsed"] }
> 
> Note that environments do not allow an element named "" (the empty string).
> 
> Elements named NA_character_ are treated differently in environments and
> lists, neither of which is great.  You may want your hash table functions to
> deal with oddball names explicitly.
> 
> -Bill
> 
> On Tue, Nov 2, 2021 at 8:52 AM Andrew Simmons <akwsimmo at gmail.com> wrote:
> 
>> If you're thinking about using environments, I would suggest you
>> initialize them like
>>
>>
>> x <- new.env(parent = emptyenv())
>>
>>
>> Since environments have parent environments, it means that requesting
>> a value from that environment can actually return the value stored in
>> a parent environment (this isn't an issue for [[ or $, this is
>> exclusively an issue with assign, get, and exists) Or, if you've
>> already got your values stored in a list that you want to turn into an
>> environment:
>>
>>
>> x <- list2env(listOfValues, parent = emptyenv())
>>
>>
>> Hope this helps!
>>
>>
>> On Tue, Nov 2, 2021, 06:49 Yonghua Peng <yong at pobox.com> wrote:
>>
>>> But for data.frame the colnames can be duplicated. Am I right?
>>>
>>> Regards.
>>>
>>> On Tue, Nov 2, 2021 at 6:29 PM Jan van der Laan <rhelp at eoos.dds.nl>
>> wrote:
>>>
>>>>
>>>> True, but in a lot of cases where a python user might use a dict
>>>> an R user will probably use a list; or when we are talking about
>>>> arrays of dicts in python, the R solution will probably be a
>>>> data.frame (with
>> each
>>>> dict field in a separate column).
>>>>
>>>> Jan
>>>>
>>>>
>>>>
>>>>
>>>> On 02-11-2021 11:18, Eric Berger wrote:
>>>>> One choice is
>>>>> new.env(hash=TRUE)
>>>>> in the base package
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com> wrote:
>>>>>
>>>>>> I know this is a newbie question. But how do I implement the
>>>>>> hash
>>>> structure
>>>>>> which is available in other languages (in python it's dict)?
>>>>>>
>>>>>> I know there is the list, but list's names can be duplicated here.
>>>>>>
>>>>>>> x <- list(x=1:5,y=month.name,x=3:7)
>>>>>>
>>>>>>> x
>>>>>>
>>>>>> $x
>>>>>>
>>>>>> [1] 1 2 3 4 5
>>>>>>
>>>>>>
>>>>>> $y
>>>>>>
>>>>>>    [1] "January"   "February"  "March"     "April"     "May"
>>>   "June"
>>>>>>
>>>>>>    [7] "July"      "August"    "September" "October"   "November"
>>>> "December"
>>>>>>
>>>>>>
>>>>>> $x
>>>>>>
>>>>>> [1] 3 4 5 6 7
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks a lot.
>>>>>>
>>>>>>           [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>>>>>> see https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>
>>>>>        [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>>>>> see https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov  3 15:38:30 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 3 Nov 2021 07:38:30 -0700 (PDT)
Subject: [R] tidyverse: read_csv() misses column [RESOLVED]
Message-ID: <addf8e67-3bc6-5826-4e7-ba85f9e4edb3@appl-ecosys.com>

> From krylov.r00t at gmail.com Tue Nov  2 14:22:05 2021

> instead. When you source() a script, auto-printing is not performed. This
> is explained in the first paragraph of ?source, but not ?sink. If you want
> to source() scripts and rely on their output (including sink()), you'll
> need to print() results explicitly.
------------------
> From akwsimmo at gmail.com Tue Nov  2 14:31:26 2021
> Date: Tue, 2 Nov 2021 17:31:12 -0400

> cat in R behaves similarly to cat in unix-alikes, sends text to a stdout.
> Usually, that stdout would be a file, but usually in R it is the R
> Console. I think it might also help to note the difference between cat and
> print:
> x <- "test\n"
> cat(x)
> print(x)
> produces
> cat(x)
> test
> print(x)
> [1] "test\n"

Ivan/Andrew,

Thank you both for increasing my knowledge of R. I've not before used sink()
and now I can use it properly. The issues are resolved.

Regards,

Rich


From g@br|e||e@b@n@te|nberg @end|ng |rom gm@||@com  Tue Nov  2 23:30:46 2021
From: g@br|e||e@b@n@te|nberg @end|ng |rom gm@||@com (gabrielle aban steinberg)
Date: Tue, 2 Nov 2021 16:30:46 -0600
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
Message-ID: <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>

Hello, I would like to merge 18 csv files into a master data csv file, but
each file has a different number of columns (mostly found in one or more of
the other cvs files) and different number of rows.

I have tried something like the following in R Studio (cloud):

all_data_fit_files <- rbind("dailyActivity_merged.csv",
"dailyCalories_merged.csv", "dailyIntensities_merged.csv",
"dailySteps_merged.csv", "heartrate_seconds_merged.csv",
"hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
"hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
"minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
"minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
"minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
"minuteStepsWide_merged.csv", "sleepDay_merged.csv",
"weightLogInfo_merged.csv")



But I am getting the following error:

Error: unexpected input in "rlySteps_merged.csv",
"minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv",
"minuteIntensitiesNarrow_merged.csv",
"minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"


(Maybe the R Studio free trial/usage is underpowered for my project?)

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Wed Nov  3 16:35:25 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 3 Nov 2021 11:35:25 -0400
Subject: [R] Is there a hash data structure for R
In-Reply-To: <2ea14b34-e15f-4907-6a89-a9cc7d0eb0d3@dds.nl>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
 <CAGgJW75r88W2pk+h4fWBqNva8F9xdzLdt6um13bkitBGdoLSnA@mail.gmail.com>
 <be85c91a-e32f-ee19-5d2e-1edc85eeeb69@eoos.dds.nl>
 <CALUE4BKJObTUh+feK2Q9qT5L-FQ98SyipOAmS52jPYQW2a+N-Q@mail.gmail.com>
 <CAPcHnpQVxNzoo_O1mAo8MJF1x0Lhk9K7Ov6zyFWaGo6OeXjq_Q@mail.gmail.com>
 <CAHqSRuRRdArRXNYwsRdvSWFTBJUvPYRSOSaCLynk8ggJOrSZzw@mail.gmail.com>
 <00a501d7d043$3d852080$b88f6180$@verizon.net>
 <2ea14b34-e15f-4907-6a89-a9cc7d0eb0d3@dds.nl>
Message-ID: <00c601d7d0c8$6caa3690$45fea3b0$@verizon.net>

Jack, I was agreeing with you and pointing out that although changing names
of columns to be unique has a positive side, it makes it hard to use for
anything that needs to look like either a set or a bag and of course a
dictionary/hash. All the above want to put things in using some identifier
and expect to get back the same.

R actually has other places names can be changed or dynamically created
often with defaults. This can be convenient or annoying as you need to look
at the resulting names to be able to use them. A feature that is nice in
some programs and parts of the tidyverse packages is the ability to specify
things like suffixes to be used.

I use lots of computer languages and keep running into people who expect
another language to just support what the first does. If that were true, we
might not create so many. If your other language supports indefinite sized
integers, good for you. Many others do not and perhaps may not easily do so
even if you try to create your own emulation if some other code gets your
version and does not work on it.

So assuming you use an available package or roll your own and can now make
some kind of hash data structure. As you pointed out, hashing may not be
required if your implementation is already fast and hashing can use lots of
memory. What are the allowed keys in your implementation? Will an integer of
1 be distinct from a floating point of 1.0? Can you hash objects of the
half-dozen or so kinds R seems to have? Whatever your answers are to many
questions like these, you may not get quite the same answers in Python or
PERL or ...

R is not really meant to be a general-purpose language although it can be.
It is not really fully-blown Object Oriented  but in many ways it can be
using newer grafts. So if you need or want the things R is designed for and
in particular there are good packages available for your needs, then use R.
If your needs include things not easily part of R, and you have a language
that works for you, why switch?

I will note that there is an intermediate path. I often run programs in
RSTUDIO that include code for both R and Python. The data structures used
sort of convert back and forth as needed so you can begin in R and read in
data and make some changes and then hand it over to Python for more, perhaps
multiple times, then generate a graph within R or whatever.

So if you want a dictionary, you can sort of keep it on the Python side and
use Python commands to create it and add to it or access contents. The
results may be handed over to the R side as needed but not as a dict but
instead to a pairlist or named list/vector or whatever and when needed, you
can have python take your results. The same applies to lots of other things
Python does that R may not do quite the same or at all. I mean generators
and all kinds of object-oriented programs including multiple inheritance and
so much more. You can use each language for what it is good at or that work
with the way you think and with some overhead get the best of both worlds.

Of course, this comes with costs and any programs you send out to be used by
others would require both languages to be installed properly and ...

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jan van der Laan
Sent: Wednesday, November 3, 2021 5:47 AM
To: r-help at r-project.org
Subject: Re: [R] Is there a hash data structure for R



On 03-11-2021 00:42, Avi Gross via R-help wrote:

> 
> Finally, someone mentioned how creating a data.frame with duplicate 
> names for columns is not a problem as it can automagically CHANGE them 
> to be unique. That is a HUGE problem for using that as a dictionary as 
> the new name will not be known to the system so all kinds of things will
fail.

I think you are referring to my remark which was:

 > However, the data.frame construction method will detect this and  >
generate unique names (which also might not be what you want):

I didn't say this means that duplicate names aren't a problem; I just
mentioned the the behaviour is different. Personally, I would actually
prefer the behaviour of list (keep the duplicated name) with a warning.

Most of the responses seem to assume that the OP actually wants a hash
table. Yes, he did ask for that and for a hash table an environment (with
some work) would be a good option. But in many cases, where other languages
would use a hash-table-like object (such as a dict) in R you would use other
types of objects. Furthermore, for many operations where you might use hash
tables to implement the operation, R has already built in options, for
example %in%, match, duplicated. These are also vectorised; so two vectors:
one with keys and one with values might actually be faster than an
environment in some use cases.

Best,
Jan


> 
> And there are also packages for many features like sets as well as 
> functions to manipulate these things.
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bill Dunlap
> Sent: Tuesday, November 2, 2021 1:26 PM
> To: Andrew Simmons <akwsimmo at gmail.com>
> Cc: R Help <r-help at r-project.org>
> Subject: Re: [R] Is there a hash data structure for R
> 
> Note that an environment carries a hash table with it, while a named 
> list does not.  I think that looking up an entry in a list causes a 
> hash table to be created and thrown away.  Here are some timings 
> involving setting and getting various numbers of entries in 
> environments and lists.  The times are roughly linear in n for
environments and quadratic for lists.
> 
>> vapply(1e3 * 2 ^ (0:6), f, L=new.env(parent=emptyenv()),
> FUN.VALUE=NA_real_)
> [1] 0.00 0.00 0.00 0.02 0.03 0.06 0.15
>> vapply(1e3 * 2 ^ (0:6), f, L=list(), FUN.VALUE=NA_real_)
> [1]  0.01  0.03  0.15  0.53  2.66 13.66 56.05
>> f
> function(n, L, V = sprintf("V%07d", sample(n, replace=TRUE))) {
>      system.time(for(v in V)L[[v]]<-c(L[[v]],v))["elapsed"] }
> 
> Note that environments do not allow an element named "" (the empty
string).
> 
> Elements named NA_character_ are treated differently in environments 
> and lists, neither of which is great.  You may want your hash table 
> functions to deal with oddball names explicitly.
> 
> -Bill
> 
> On Tue, Nov 2, 2021 at 8:52 AM Andrew Simmons <akwsimmo at gmail.com> wrote:
> 
>> If you're thinking about using environments, I would suggest you 
>> initialize them like
>>
>>
>> x <- new.env(parent = emptyenv())
>>
>>
>> Since environments have parent environments, it means that requesting 
>> a value from that environment can actually return the value stored in 
>> a parent environment (this isn't an issue for [[ or $, this is 
>> exclusively an issue with assign, get, and exists) Or, if you've 
>> already got your values stored in a list that you want to turn into 
>> an
>> environment:
>>
>>
>> x <- list2env(listOfValues, parent = emptyenv())
>>
>>
>> Hope this helps!
>>
>>
>> On Tue, Nov 2, 2021, 06:49 Yonghua Peng <yong at pobox.com> wrote:
>>
>>> But for data.frame the colnames can be duplicated. Am I right?
>>>
>>> Regards.
>>>
>>> On Tue, Nov 2, 2021 at 6:29 PM Jan van der Laan <rhelp at eoos.dds.nl>
>> wrote:
>>>
>>>>
>>>> True, but in a lot of cases where a python user might use a dict an 
>>>> R user will probably use a list; or when we are talking about 
>>>> arrays of dicts in python, the R solution will probably be a 
>>>> data.frame (with
>> each
>>>> dict field in a separate column).
>>>>
>>>> Jan
>>>>
>>>>
>>>>
>>>>
>>>> On 02-11-2021 11:18, Eric Berger wrote:
>>>>> One choice is
>>>>> new.env(hash=TRUE)
>>>>> in the base package
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Nov 2, 2021 at 11:48 AM Yonghua Peng <yong at pobox.com> wrote:
>>>>>
>>>>>> I know this is a newbie question. But how do I implement the hash
>>>> structure
>>>>>> which is available in other languages (in python it's dict)?
>>>>>>
>>>>>> I know there is the list, but list's names can be duplicated here.
>>>>>>
>>>>>>> x <- list(x=1:5,y=month.name,x=3:7)
>>>>>>
>>>>>>> x
>>>>>>
>>>>>> $x
>>>>>>
>>>>>> [1] 1 2 3 4 5
>>>>>>
>>>>>>
>>>>>> $y
>>>>>>
>>>>>>    [1] "January"   "February"  "March"     "April"     "May"
>>>   "June"
>>>>>>
>>>>>>    [7] "July"      "August"    "September" "October"   "November"
>>>> "December"
>>>>>>
>>>>>>
>>>>>> $x
>>>>>>
>>>>>> [1] 3 4 5 6 7
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks a lot.
>>>>>>
>>>>>>           [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>
>>>>>        [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Wed Nov  3 16:55:39 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 3 Nov 2021 11:55:39 -0400
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
Message-ID: <00f201d7d0cb$402760e0$c07622a0$@verizon.net>

Gabrielle,

Why would you expect that to work?

rbind() binds rows of internal R data structures that are some variety of data.frame with exactly the same columns in the same order into a larger object of that type.

You are not providing rbind() with the names of variables holding the info but file names of Comma Separated Values.

If you have many files with different numbers of columns of data with some overlap, you need to decide on quite a few things first. If a file has say 4 columns out of a possible 20 unique columns across the files, do you want to add 16 columns to the contents of the file, after reading it in, and re-arrange it into a specific order by column? What will you fill in the new columns with? NA is a popular choice but you need to decide.

You then need to repeat the same thing with all the other files and read in 6 columns then add 14 filled as you wish and rearrange the columns to the same order.

When done, you have an assortment of variables of class data.frame (or other similar ones) and you can use rbind() on those variables to get a result.

But it may not be what you want. You may actually want more of a database merge type of operation combining columns from each into the same userID field or whatever. rbind() is not the function to do that with and I won't go on to give a long tutorial. 

My main point is what you are doing is at the wrong level. You need to read all the files into variable before doing additional calculations in R.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of gabrielle aban steinberg
Sent: Tuesday, November 2, 2021 6:31 PM
To: r-help at r-project.org
Subject: [R] Fwd: Merging multiple csv files to new file

Hello, I would like to merge 18 csv files into a master data csv file, but each file has a different number of columns (mostly found in one or more of the other cvs files) and different number of rows.

I have tried something like the following in R Studio (cloud):

all_data_fit_files <- rbind("dailyActivity_merged.csv", "dailyCalories_merged.csv", "dailyIntensities_merged.csv", "dailySteps_merged.csv", "heartrate_seconds_merged.csv", "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv", "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
"minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
"minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv", "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv", ?minuteStepsWide_merged.csv", "sleepDay_merged.csv", "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
"weightLogInfo_merged.csv")



But I am getting the following error:

Error: unexpected input in "rlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
"minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"


(Maybe the R Studio free trial/usage is underpowered for my project?)

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Nov  3 17:12:28 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 3 Nov 2021 09:12:28 -0700
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
Message-ID: <CAGxFJbSvN3HCRmqo-hqQA+8aNEOH6F_7aJrMDG9SykzvgXpeqA@mail.gmail.com>

1. Think more carefully about the appropriate data structure for what you
wish to do. It's unlikely to be .csv files, however.

In the absence of the above, a simple (but perhaps inappropriate) default
is:

2. Read the files into R and combine into a list.(You will need to read
about lists in R if you don't know what these are, of course).

3. Save your list as an .Rdata file. See ?save and ?load for details. But
do note that such files are special binary files only (easily anyway)
readable by R.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Nov 3, 2021 at 8:36 AM gabrielle aban steinberg <
gabrielleabansteinberg at gmail.com> wrote:

> Hello, I would like to merge 18 csv files into a master data csv file, but
> each file has a different number of columns (mostly found in one or more of
> the other cvs files) and different number of rows.
>
> I have tried something like the following in R Studio (cloud):
>
> all_data_fit_files <- rbind("dailyActivity_merged.csv",
> "dailyCalories_merged.csv", "dailyIntensities_merged.csv",
> "dailySteps_merged.csv", "heartrate_seconds_merged.csv",
> "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
> "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
> "minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
> "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
> ?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "weightLogInfo_merged.csv")
>
>
>
> But I am getting the following error:
>
> Error: unexpected input in "rlySteps_merged.csv",
> "minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv",
> "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"
>
>
> (Maybe the R Studio free trial/usage is underpowered for my project?)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Nov  3 17:20:46 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 3 Nov 2021 09:20:46 -0700
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAGxFJbSvN3HCRmqo-hqQA+8aNEOH6F_7aJrMDG9SykzvgXpeqA@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
 <CAGxFJbSvN3HCRmqo-hqQA+8aNEOH6F_7aJrMDG9SykzvgXpeqA@mail.gmail.com>
Message-ID: <CAGxFJbRTWDT4784NE_dxg9q-64+ar0gqQb98C5cdq9Fb6ewh3Q@mail.gmail.com>

I should have added that once read into R, the collection of data frames
(presumably) can also be saved in one .Rdata file via save() **without**
first combining them into a list. I still prefer keeping them together as
one list in R, but that's up to you.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Nov 3, 2021 at 9:12 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> 1. Think more carefully about the appropriate data structure for what you
> wish to do. It's unlikely to be .csv files, however.
>
> In the absence of the above, a simple (but perhaps inappropriate) default
> is:
>
> 2. Read the files into R and combine into a list.(You will need to read
> about lists in R if you don't know what these are, of course).
>
> 3. Save your list as an .Rdata file. See ?save and ?load for details. But
> do note that such files are special binary files only (easily anyway)
> readable by R.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Wed, Nov 3, 2021 at 8:36 AM gabrielle aban steinberg <
> gabrielleabansteinberg at gmail.com> wrote:
>
>> Hello, I would like to merge 18 csv files into a master data csv file, but
>> each file has a different number of columns (mostly found in one or more
>> of
>> the other cvs files) and different number of rows.
>>
>> I have tried something like the following in R Studio (cloud):
>>
>> all_data_fit_files <- rbind("dailyActivity_merged.csv",
>> "dailyCalories_merged.csv", "dailyIntensities_merged.csv",
>> "dailySteps_merged.csv", "heartrate_seconds_merged.csv",
>> "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
>> "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
>> "minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
>> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
>> "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
>> ?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
>> "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
>> "weightLogInfo_merged.csv")
>>
>>
>>
>> But I am getting the following error:
>>
>> Error: unexpected input in "rlySteps_merged.csv",
>> "minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv",
>> "minuteIntensitiesNarrow_merged.csv",
>> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"
>>
>>
>> (Maybe the R Studio free trial/usage is underpowered for my project?)
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From bobby@kn|ght @end|ng |rom gm@||@com  Wed Nov  3 17:47:03 2021
From: bobby@kn|ght @end|ng |rom gm@||@com (Robert Knight)
Date: Wed, 3 Nov 2021 11:47:03 -0500
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
Message-ID: <CAKBFG3Y=ykE-0LQscFsQwmM-sZ=9nui-3P-YsGjyrn2i7wSEuA@mail.gmail.com>

It might be easier to settle on the desired final csv layout and use Python
to copy the rows via line reads.  Python doesn't care about the data type
in a given "cell", numeric or char, whereas the type errors R would
encounter would make the task very difficult.

On Wed, Nov 3, 2021, 10:36 AM gabrielle aban steinberg <
gabrielleabansteinberg at gmail.com> wrote:

> Hello, I would like to merge 18 csv files into a master data csv file, but
> each file has a different number of columns (mostly found in one or more of
> the other cvs files) and different number of rows.
>
> I have tried something like the following in R Studio (cloud):
>
> all_data_fit_files <- rbind("dailyActivity_merged.csv",
> "dailyCalories_merged.csv", "dailyIntensities_merged.csv",
> "dailySteps_merged.csv", "heartrate_seconds_merged.csv",
> "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
> "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
> "minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
> "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
> ?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "weightLogInfo_merged.csv")
>
>
>
> But I am getting the following error:
>
> Error: unexpected input in "rlySteps_merged.csv",
> "minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv",
> "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"
>
>
> (Maybe the R Studio free trial/usage is underpowered for my project?)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Nov  3 17:57:45 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 3 Nov 2021 09:57:45 -0700
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
Message-ID: <CAHqSRuSJZMK0+kZ5nnet4j3mzv9f4T7x5t6opaHPNzD5cJgebA@mail.gmail.com>

The error message arises because you are sometimes delimiting character
strings using non-ASCII open and close double quotes, '?' and '?', instead
of the old-fashioned ones, '"', which have no open or close variants.  This
is a language syntax error, so R didn't try to compute anything.

The others' comments are still valid - you need to read the files named by
these strings to produce R datasets and combine the datasets.

-Bill


On Wed, Nov 3, 2021 at 8:36 AM gabrielle aban steinberg <
gabrielleabansteinberg at gmail.com> wrote:

> Hello, I would like to merge 18 csv files into a master data csv file, but
> each file has a different number of columns (mostly found in one or more of
> the other cvs files) and different number of rows.
>
> I have tried something like the following in R Studio (cloud):
>
> all_data_fit_files <- rbind("dailyActivity_merged.csv",
> "dailyCalories_merged.csv", "dailyIntensities_merged.csv",
> "dailySteps_merged.csv", "heartrate_seconds_merged.csv",
> "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
> "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
> "minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
> "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
> ?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "weightLogInfo_merged.csv")
>
>
>
> But I am getting the following error:
>
> Error: unexpected input in "rlySteps_merged.csv",
> "minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv",
> "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"
>
>
> (Maybe the R Studio free trial/usage is underpowered for my project?)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Nov  3 18:22:24 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 03 Nov 2021 10:22:24 -0700
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAKBFG3Y=ykE-0LQscFsQwmM-sZ=9nui-3P-YsGjyrn2i7wSEuA@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
 <CAKBFG3Y=ykE-0LQscFsQwmM-sZ=9nui-3P-YsGjyrn2i7wSEuA@mail.gmail.com>
Message-ID: <A06B4B02-8595-4E07-B33E-E11481EAC7F4@dcn.davis.ca.us>

Data type in a CSV is always character until inferred otherwise... it is not necessary nor even easier to manipulate files with Python if you are planning to use R to manipulate the data further with R. Just use the colClasses="character" argument for read.csv.

On November 3, 2021 9:47:03 AM PDT, Robert Knight <bobby.knight at gmail.com> wrote:
>It might be easier to settle on the desired final csv layout and use Python
>to copy the rows via line reads.  Python doesn't care about the data type
>in a given "cell", numeric or char, whereas the type errors R would
>encounter would make the task very difficult.
>
>On Wed, Nov 3, 2021, 10:36 AM gabrielle aban steinberg <
>gabrielleabansteinberg at gmail.com> wrote:
>
>> Hello, I would like to merge 18 csv files into a master data csv file, but
>> each file has a different number of columns (mostly found in one or more of
>> the other cvs files) and different number of rows.
>>
>> I have tried something like the following in R Studio (cloud):
>>
>> all_data_fit_files <- rbind("dailyActivity_merged.csv",
>> "dailyCalories_merged.csv", "dailyIntensities_merged.csv",
>> "dailySteps_merged.csv", "heartrate_seconds_merged.csv",
>> "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
>> "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
>> "minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
>> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
>> "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
>> ?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
>> "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
>> "weightLogInfo_merged.csv")
>>
>>
>>
>> But I am getting the following error:
>>
>> Error: unexpected input in "rlySteps_merged.csv",
>> "minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv",
>> "minuteIntensitiesNarrow_merged.csv",
>> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"
>>
>>
>> (Maybe the R Studio free trial/usage is underpowered for my project?)
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Nov  3 18:37:55 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 03 Nov 2021 10:37:55 -0700
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
Message-ID: <A72C1574-5235-4F4F-8EBF-0CBF4BC18B80@dcn.davis.ca.us>

>(Maybe the R Studio free trial/usage is underpowered for my project?)

- R is a computer language, as well as a program for interpreting R source code.
- RStudio Desktop is an editor with "features" intended to make using R easy. It cannot "do" anything without R being installed.
- R is completely free. There is no "trial" period for using R. There are no "crippled" versions of R.
- RStudio Desktop has both free and paid versions, but they have very nearly identical capabilities. The most significant difference is that you get tech support with the paid version. [1]

So no, your difficulty lies not with what you downloaded but with how you are expressing your desires with the R language (with or without RStudio), and others have suggested ways you could correct that.

[1] https://www.rstudio.com/products/rstudio/

On November 2, 2021 3:30:46 PM PDT, gabrielle aban steinberg <gabrielleabansteinberg at gmail.com> wrote:
>Hello, I would like to merge 18 csv files into a master data csv file, but
>each file has a different number of columns (mostly found in one or more of
>the other cvs files) and different number of rows.
>
>I have tried something like the following in R Studio (cloud):
>
>all_data_fit_files <- rbind("dailyActivity_merged.csv",
>"dailyCalories_merged.csv", "dailyIntensities_merged.csv",
>"dailySteps_merged.csv", "heartrate_seconds_merged.csv",
>"hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
>"hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
>"minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
>"minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
>"minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
>?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
>"minuteStepsWide_merged.csv", "sleepDay_merged.csv",
>"weightLogInfo_merged.csv")
>
>
>
>But I am getting the following error:
>
>Error: unexpected input in "rlySteps_merged.csv",
>"minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv",
>"minuteIntensitiesNarrow_merged.csv",
>"minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"
>
>
>(Maybe the R Studio free trial/usage is underpowered for my project?)
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @v|gro@@ @end|ng |rom ver|zon@net  Wed Nov  3 18:41:54 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 3 Nov 2021 13:41:54 -0400
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <A06B4B02-8595-4E07-B33E-E11481EAC7F4@dcn.davis.ca.us>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
 <CAKBFG3Y=ykE-0LQscFsQwmM-sZ=9nui-3P-YsGjyrn2i7wSEuA@mail.gmail.com>
 <A06B4B02-8595-4E07-B33E-E11481EAC7F4@dcn.davis.ca.us>
Message-ID: <018301d7d0da$177747a0$4665d6e0$@verizon.net>

I am not clear why Python came up on this forum. Yes, you can do all sorts of stuff in Python (or other languages) in ways similar or not to doing them in R.

The topic here was reading in data from multiple CSV files and I saw no mention about whether some columns are supposed to be of type character or other types.

As noted, if the (CSV) file is properly formatted and whatever function you use to read them in does not guess right, you can use versions of functions that let you specify what type to expect OR change it after you read it in.

One poster seems to be confused and perhaps things what is being read from is some other kind of EXCEL data file. There are other functions that can read from those but I believe a CSV has no real issues unless it is formatted wrong or in ways that require you to ask for comments to be ignored or skip a few lines and so on.

Nontheless, Gabriella needs to spell out a bit more about her project as all we know now is to suggest she read in each file sequentially (or in a loop) into multiple R variables. Beyond that, it is not clear what she wants to do in combining them and I am not so sure an rbind() makes much sense.

So what she needs perhaps is to look at functions like read.csv() and write.csv() and consider what transformations to make in the data read in and then how to recombine them.

Of course, if I have completely misunderstood what she wants, never mind!

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller
Sent: Wednesday, November 3, 2021 1:22 PM
To: r-help at r-project.org; Robert Knight <bobby.knight at gmail.com>; gabrielle aban steinberg <gabrielleabansteinberg at gmail.com>
Cc: r-help <r-help at r-project.org>
Subject: Re: [R] Fwd: Merging multiple csv files to new file

Data type in a CSV is always character until inferred otherwise... it is not necessary nor even easier to manipulate files with Python if you are planning to use R to manipulate the data further with R. Just use the colClasses="character" argument for read.csv.

On November 3, 2021 9:47:03 AM PDT, Robert Knight <bobby.knight at gmail.com> wrote:
>It might be easier to settle on the desired final csv layout and use 
>Python to copy the rows via line reads.  Python doesn't care about the 
>data type in a given "cell", numeric or char, whereas the type errors R 
>would encounter would make the task very difficult.
>
>On Wed, Nov 3, 2021, 10:36 AM gabrielle aban steinberg < 
>gabrielleabansteinberg at gmail.com> wrote:
>
>> Hello, I would like to merge 18 csv files into a master data csv 
>> file, but each file has a different number of columns (mostly found 
>> in one or more of the other cvs files) and different number of rows.
>>
>> I have tried something like the following in R Studio (cloud):
>>
>> all_data_fit_files <- rbind("dailyActivity_merged.csv", 
>> "dailyCalories_merged.csv", "dailyIntensities_merged.csv", 
>> "dailySteps_merged.csv", "heartrate_seconds_merged.csv", 
>> "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv", 
>> "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
>> "minuteCaloriesWide_merged.csv", 
>> "minuteIntensitiesNarrow_merged.csv",
>> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv", 
>> "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv", 
>> ?minuteStepsWide_merged.csv", "sleepDay_merged.csv", 
>> "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
>> "weightLogInfo_merged.csv")
>>
>>
>>
>> But I am getting the following error:
>>
>> Error: unexpected input in "rlySteps_merged.csv", 
>> "minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv", 
>> "minuteIntensitiesNarrow_merged.csv",
>> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"
>>
>>
>> (Maybe the R Studio free trial/usage is underpowered for my project?)
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide 
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From |eo@m@d@ @end|ng |rom @yon|c@eu  Wed Nov  3 19:35:58 2021
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Wed, 3 Nov 2021 20:35:58 +0200
Subject: [R] names.data.frame?
Message-ID: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>

Dear List members,


Is there a way to access the default names() function?


I tried the following:

# Multi-variable polynomial

p = data.frame(x=1:3, coeff=1)

class(p) = c("pm", class(p));


names.pm = function(p) {
# .Primitive("names")(p) # does NOT function
# .Internal("names")(p) # does NOT function
# nms = names.default(p) # does NOT exist
# nms = names.data.frame(p) # does NOT exist
# nms = names(p); # obvious infinite recursion;
nms = names(unclass(p));
}


Alternatively:

Would it be better to use dimnames.pm instead of names.pm?

I am not fully aware of the advantages and disadvantages of dimnames vs 
names.


Sincerely,


Leonard


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov  3 19:49:50 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 3 Nov 2021 11:49:50 -0700 (PDT)
Subject: [R] What to do when problems() returns nothing
Message-ID: <2e14f7c-e0a0-67d3-66d-c575689fdc6f@appl-ecosys.com>

When I source the import_data.R script now I get errors that tell me to look
at problems(). I enter that function name but there's no return.

Reading ?problems I learned that stop_for_problems(x) should stop the
process when a problem occurs, so I added that function to each data file;
for example,

library(tidyverse)
library(lubridate)

cor_disc <- read_csv("../data/cor-disc.csv", col_names = TRUE,
                      col_types = list (
                          site_nbr = col_character(),
                          year = col_integer(),
                          mon = col_integer(),
                          day = col_integer(),
                          hr = col_double(),
                          min = col_double(),
                          cfs = col_integer())
                      )
stop_for_problems(cor_disc)

running the command, source('input_data.R') produces this result:
> source('import_data.R')
> Error: 415903 parsing failures
> In addition: Warning message:
> One or more parsing issues, see `problems()` for details

When I run the problems() function nothing is returned:
> problems()
>

What do I read to learn how to identify the problems so I can fix them?

TIA,

Rich


From @kw@|mmo @end|ng |rom gm@||@com  Wed Nov  3 19:54:26 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 3 Nov 2021 14:54:26 -0400
Subject: [R] names.data.frame?
In-Reply-To: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
References: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
Message-ID: <CAPcHnpTCLZdAHGJ_NOFvi1x__NHjj5tbTnRvCNzwStDf3nLECg@mail.gmail.com>

First, your signature for names.pm is wrong. It should look something more
like:


names.pm <- function (x)
{
}


As for the body of the function, you might do something like:


names.pm <- function (x)
{
    NextMethod()
}


but you don't need to define a names method if you're just going to call
the next method. I would suggest not defining a names method at all.


As a side note, I would suggest making your class through the methods
package, with methods::setClass("pm", ...)
See the documentation for setClass for more details, it's the recommended
way to define classes in R.

On Wed, Nov 3, 2021 at 2:36 PM Leonard Mada via R-help <r-help at r-project.org>
wrote:

> Dear List members,
>
>
> Is there a way to access the default names() function?
>
>
> I tried the following:
>
> # Multi-variable polynomial
>
> p = data.frame(x=1:3, coeff=1)
>
> class(p) = c("pm", class(p));
>
>
> names.pm = function(p) {
> # .Primitive("names")(p) # does NOT function
> # .Internal("names")(p) # does NOT function
> # nms = names.default(p) # does NOT exist
> # nms = names.data.frame(p) # does NOT exist
> # nms = names(p); # obvious infinite recursion;
> nms = names(unclass(p));
> }
>
>
> Alternatively:
>
> Would it be better to use dimnames.pm instead of names.pm?
>
> I am not fully aware of the advantages and disadvantages of dimnames vs
> names.
>
>
> Sincerely,
>
>
> Leonard
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov  3 19:55:06 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 3 Nov 2021 21:55:06 +0300
Subject: [R] names.data.frame?
In-Reply-To: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
References: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
Message-ID: <20211103215506.0fc6b63d@Tarkus>

On Wed, 3 Nov 2021 20:35:58 +0200
Leonard Mada via R-help <r-help at r-project.org> wrote:

> class(p) = c("pm", class(p));

Does NextMethod() work for you?

-- 
Best regards,
Ivan


From bgunter@4567 @end|ng |rom gm@||@com  Wed Nov  3 20:11:19 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 3 Nov 2021 12:11:19 -0700
Subject: [R] What to do when problems() returns nothing
In-Reply-To: <2e14f7c-e0a0-67d3-66d-c575689fdc6f@appl-ecosys.com>
References: <2e14f7c-e0a0-67d3-66d-c575689fdc6f@appl-ecosys.com>
Message-ID: <CAGxFJbRDHDxJeH8GX72XnC8anyQon8zge0593XXfwgvvU=uBuQ@mail.gmail.com>

None of this is for R's *standard* packages. The posting guide, linked
below, says:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

More to the point, the tidyverse galaxy tries to largely replace R's
standard functionality and has its own help forum. So I think you should
post there, rather than here, for questions about it:
https://www.tidyverse.org/help/



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Nov 3, 2021 at 11:50 AM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

> When I source the import_data.R script now I get errors that tell me to
> look
> at problems(). I enter that function name but there's no return.
>
> Reading ?problems I learned that stop_for_problems(x) should stop the
> process when a problem occurs, so I added that function to each data file;
> for example,
>
> library(tidyverse)
> library(lubridate)
>
> cor_disc <- read_csv("../data/cor-disc.csv", col_names = TRUE,
>                       col_types = list (
>                           site_nbr = col_character(),
>                           year = col_integer(),
>                           mon = col_integer(),
>                           day = col_integer(),
>                           hr = col_double(),
>                           min = col_double(),
>                           cfs = col_integer())
>                       )
> stop_for_problems(cor_disc)
>
> running the command, source('input_data.R') produces this result:
> > source('import_data.R')
> > Error: 415903 parsing failures
> > In addition: Warning message:
> > One or more parsing issues, see `problems()` for details
>
> When I run the problems() function nothing is returned:
> > problems()
> >
>
> What do I read to learn how to identify the problems so I can fix them?
>
> TIA,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov  3 20:24:42 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 3 Nov 2021 12:24:42 -0700 (PDT)
Subject: [R] What to do when problems() returns nothing
In-Reply-To: <CAGxFJbRDHDxJeH8GX72XnC8anyQon8zge0593XXfwgvvU=uBuQ@mail.gmail.com>
References: <2e14f7c-e0a0-67d3-66d-c575689fdc6f@appl-ecosys.com>
 <CAGxFJbRDHDxJeH8GX72XnC8anyQon8zge0593XXfwgvvU=uBuQ@mail.gmail.com>
Message-ID: <b8352e94-8836-cb3-a3ac-2254d84d1eb5@appl-ecosys.com>

On Wed, 3 Nov 2021, Bert Gunter wrote:

> More to the point, the tidyverse galaxy tries to largely replace R's
> standard functionality and has its own help forum. So I think you should
> post there, rather than here, for questions about it:
> https://www.tidyverse.org/help/

Bert,

Thank you very much. I am tying to learn tidyverse and had no idea it had
it's own help.

I will post tidyverse questions there.

Regards,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov  3 20:21:53 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 3 Nov 2021 12:21:53 -0700 (PDT)
Subject: [R] sink() not working as expected
In-Reply-To: <20211103002121.20bf0c43@Tarkus>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
 <20211103002121.20bf0c43@Tarkus>
Message-ID: <377b6ce1-1fb1-2c2a-cadc-43a82c4253@appl-ecosys.com>

On Wed, 3 Nov 2021, Ivan Krylov wrote:

> instead. When you source() a script, auto-printing is not performed. This
> is explained in the first paragraph of ?source, but not ?sink. If you want
> to source() scripts and rely on their output (including sink()), you'll
> need to print() results explicitly.

Ivan,

I've read ?source and still do not understand where to put either auto-print
or an explicit print statement. For example,
cor_disc %>%
     select(site_nbr,year, mon, day, hr, min, tz, cfs) %>%
         mutate(
             sampdt = make_datetime(year, mon, day, hr, min)
             )
print(cor_disc)

throws an error. I also get an error when the print statement follows the
sampdt assignment.

I need to understand how to get a sourced file that's modified (as these
tibbles are by combining data and time columns into a datatime colune) and
saving the tibble with the new appended column.

Rich


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Nov  3 20:26:50 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 3 Nov 2021 19:26:50 +0000
Subject: [R] names.data.frame?
In-Reply-To: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
References: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
Message-ID: <f2d1a6cc-7f14-6e94-0a74-c07273d22f9f@sapo.pt>

Hello,

I too would expected NextMethod to work but the following seems to be 
simpler.
"names" is an attribute, so should be accessible with attr.



names.pm = function(p) {
   attr(p, "names")
}

p = data.frame(x=1:3, coeff=1)
class(p) = c("pm", class(p));

names(p)
#[1] "x"     "coeff"



Hope this helps,

Rui Barradas

?s 18:35 de 03/11/21, Leonard Mada via R-help escreveu:
> Dear List members,
> 
> 
> Is there a way to access the default names() function?
> 
> 
> I tried the following:
> 
> # Multi-variable polynomial
> 
> p = data.frame(x=1:3, coeff=1)
> 
> class(p) = c("pm", class(p));
> 
> 
> names.pm = function(p) {
> # .Primitive("names")(p) # does NOT function
> # .Internal("names")(p) # does NOT function
> # nms = names.default(p) # does NOT exist
> # nms = names.data.frame(p) # does NOT exist
> # nms = names(p); # obvious infinite recursion;
> nms = names(unclass(p));
> }
> 
> 
> Alternatively:
> 
> Would it be better to use dimnames.pm instead of names.pm?
> 
> I am not fully aware of the advantages and disadvantages of dimnames vs 
> names.
> 
> 
> Sincerely,
> 
> 
> Leonard
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Nov  3 20:42:06 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 3 Nov 2021 15:42:06 -0400
Subject: [R] names.data.frame?
In-Reply-To: <CAPcHnpTCLZdAHGJ_NOFvi1x__NHjj5tbTnRvCNzwStDf3nLECg@mail.gmail.com>
References: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
 <CAPcHnpTCLZdAHGJ_NOFvi1x__NHjj5tbTnRvCNzwStDf3nLECg@mail.gmail.com>
Message-ID: <e46c08cd-e954-92fe-5003-02281c061876@gmail.com>

On 03/11/2021 2:54 p.m., Andrew Simmons wrote:
> First, your signature for names.pm is wrong. It should look something more
> like:
> 
> 
> names.pm <- function (x)
> {
> }
> 
> 
> As for the body of the function, you might do something like:
> 
> 
> names.pm <- function (x)
> {
>      NextMethod()
> }
> 
> 
> but you don't need to define a names method if you're just going to call
> the next method. I would suggest not defining a names method at all.
> 
> 
> As a side note, I would suggest making your class through the methods
> package, with methods::setClass("pm", ...)
> See the documentation for setClass for more details, it's the recommended
> way to define classes in R.

That's incorrect.  It is *a* recommended way to define classes in R, but 
there are other recommended ways as well, for doing other kinds of 
things, and many people stick with the S3 system without formal classes 
at all.

If you're writing a Bioconductor package you should probably use the 
formal methods.  If you're writing code for other purposes, you should 
think about whether you need formal classes at all, and if so, whether 
the methods package formalism is a match for what you're doing.

Duncan Murdoch


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Nov  3 20:52:11 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 3 Nov 2021 19:52:11 +0000
Subject: [R] sink() not working as expected
In-Reply-To: <377b6ce1-1fb1-2c2a-cadc-43a82c4253@appl-ecosys.com>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
 <20211103002121.20bf0c43@Tarkus>
 <377b6ce1-1fb1-2c2a-cadc-43a82c4253@appl-ecosys.com>
Message-ID: <e0adebfa-9759-f36d-7591-c1ad91bf9861@sapo.pt>

Hello,

You do not assign the pipe output, so put the print statement as the 
last instruction of the pipe. The following works.

# file: rhelp.R
library(dplyr)

mtcars %>%
   select(mpg, cyl, disp, hp, am) %>%
   mutate(
     sampdt = c("automatic", "manual")[am + 1L]
   ) %>%
   print()


Then, I've just tested it,


source("rhelp.R")


Hope this helps,

Rui Barradas

?s 19:21 de 03/11/21, Rich Shepard escreveu:
> On Wed, 3 Nov 2021, Ivan Krylov wrote:
> 
>> instead. When you source() a script, auto-printing is not performed. This
>> is explained in the first paragraph of ?source, but not ?sink. If you 
>> want
>> to source() scripts and rely on their output (including sink()), you'll
>> need to print() results explicitly.
> 
> Ivan,
> 
> I've read ?source and still do not understand where to put either 
> auto-print
> or an explicit print statement. For example,
> cor_disc %>%
>  ??? select(site_nbr,year, mon, day, hr, min, tz, cfs) %>%
>  ??????? mutate(
>  ??????????? sampdt = make_datetime(year, mon, day, hr, min)
>  ??????????? )
> print(cor_disc)
> 
> throws an error. I also get an error when the print statement follows the
> sampdt assignment.
> 
> I need to understand how to get a sourced file that's modified (as these
> tibbles are by combining data and time columns into a datatime colune) and
> saving the tibble with the new appended column.
> 
> Rich
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Nov  3 20:32:26 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 3 Nov 2021 15:32:26 -0400
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
Message-ID: <07c523b9-f0ec-2f02-2184-7069eb1fd452@gmail.com>

On 02/11/2021 6:30 p.m., gabrielle aban steinberg wrote:
> Hello, I would like to merge 18 csv files into a master data csv file, but
> each file has a different number of columns (mostly found in one or more of
> the other cvs files) and different number of rows.
> 
> I have tried something like the following in R Studio (cloud):
> 
> all_data_fit_files <- rbind("dailyActivity_merged.csv",
> "dailyCalories_merged.csv", "dailyIntensities_merged.csv",
> "dailySteps_merged.csv", "heartrate_seconds_merged.csv",
> "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
> "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
> "minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
> "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
> ?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "weightLogInfo_merged.csv")
> 

That just puts the names together.  You need to read each file, figure 
out how the resulting dataframes get merged (they have different 
columns, so that will take some thinking), and then do it and write it out.

Duncan Murdoch


From |eo@m@d@ @end|ng |rom @yon|c@eu  Wed Nov  3 20:40:12 2021
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Wed, 3 Nov 2021 21:40:12 +0200
Subject: [R] names.data.frame?
In-Reply-To: <CAPcHnpTCLZdAHGJ_NOFvi1x__NHjj5tbTnRvCNzwStDf3nLECg@mail.gmail.com>
References: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
 <CAPcHnpTCLZdAHGJ_NOFvi1x__NHjj5tbTnRvCNzwStDf3nLECg@mail.gmail.com>
Message-ID: <a9dc994d-4fd3-2cf1-eca8-c474e3db8d30@syonic.eu>

Thank you very much.


Indeed, NextMethod() is the correct way and is working fine.


There are some alternatives (as pointed out). Although I am still trying 
to figure out what would be the best design strategy of such a class.


Note:

- I wanted to exclude the "coeff" column from the returned names;
names.pm = function(p) {
 ?? ?nms = NextMethod();
 ?? ?# excludes the Coefficients:
 ?? ?id = match("coeff", nms);
 ?? ?return(nms[ - id]);
}


This is why I also hesitate regarding what to use: dimnames or names.


Sincerely,


Leonard


On 11/3/2021 8:54 PM, Andrew Simmons wrote:
> First, your signature for names.pm <http://names.pm> is wrong. It 
> should look something more like:
>
>
> names.pm <http://names.pm> <- function (x)
> {
> }
>
>
> As for the body of the function, you might do something like:
>
>
> names.pm <http://names.pm> <- function (x)
> {
> ? ? NextMethod()
> }
>
>
> but you don't need to define a names method if you're just going to 
> call the next method. I would suggest not defining a names method at all.
>
>
> As a side note, I would suggest making your class through the methods 
> package, with methods::setClass("pm", ...)
> See the documentation for setClass for more details, it's the 
> recommended way to define classes in R.
>
> On Wed, Nov 3, 2021 at 2:36 PM Leonard Mada via R-help 
> <r-help at r-project.org> wrote:
>
>     Dear List members,
>
>
>     Is there a way to access the default names() function?
>
>
>     I tried the following:
>
>     # Multi-variable polynomial
>
>     p = data.frame(x=1:3, coeff=1)
>
>     class(p) = c("pm", class(p));
>
>
>     names.pm <http://names.pm> = function(p) {
>     # .Primitive("names")(p) # does NOT function
>     # .Internal("names")(p) # does NOT function
>     # nms = names.default(p) # does NOT exist
>     # nms = names.data.frame(p) # does NOT exist
>     # nms = names(p); # obvious infinite recursion;
>     nms = names(unclass(p));
>     }
>
>
>     Alternatively:
>
>     Would it be better to use dimnames.pm <http://dimnames.pm> instead
>     of names.pm <http://names.pm>?
>
>     I am not fully aware of the advantages and disadvantages of
>     dimnames vs
>     names.
>
>
>     Sincerely,
>
>
>     Leonard
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>
	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Wed Nov  3 21:35:57 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 4 Nov 2021 07:35:57 +1100
Subject: [R] Fwd: Merging multiple csv files to new file
In-Reply-To: <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
References: <CAFp-0SkyO+AKh6FrhFt4PBjwUgvNEi0=JG7qWXg49tV1wzrDFw@mail.gmail.com>
 <CAFp-0S=MVeMMzmft7jzfEdtKHaNZ4YKijf1mJOXTCepYpWywig@mail.gmail.com>
Message-ID: <CA+8X3fXp3U-qwjJtXTXkcS65V=b1nkau1L0E6X8tFCP9AMdCHA@mail.gmail.com>

Hi Gabrielle,
I get the feeling that you are trying to merge data in which each file
contains different variables, but the same subjects have contributed
the data. This a very wild guess, but it may provide some insight.

# assume that subjects are identified by a variable named "subjectID"
# create a vector of all your filenames
my_filenames<-c("dailyActivity_merged.csv",
"dailyCalories_merged.csv", "dailyIntensities_merged.csv",
...)
# step through the filenames, reading each one and merging it into the
final data frame
for(filename in my_filenames) {
 if(!exists(my_df)) my_df<-read.csv(filename)
 else {
  next_df<-read.csv(filename)
  my_df<-merge(my_df,next_df,by="subjectID",fill=TRUE)
 }
}

I doubt that this will work first time, but it will be a lot easier to
debug than throwing it all into a black box and seeing what comes out.

Jim

On Thu, Nov 4, 2021 at 2:36 AM gabrielle aban steinberg
<gabrielleabansteinberg at gmail.com> wrote:
>
> Hello, I would like to merge 18 csv files into a master data csv file, but
> each file has a different number of columns (mostly found in one or more of
> the other cvs files) and different number of rows.
>
> I have tried something like the following in R Studio (cloud):
>
> all_data_fit_files <- rbind("dailyActivity_merged.csv",
> "dailyCalories_merged.csv", "dailyIntensities_merged.csv",
> "dailySteps_merged.csv", "heartrate_seconds_merged.csv",
> "hourlyCalories_merged.csv", "hourlyIntensities_merged.csv",
> "hourlySteps_merged.csv", "minuteCaloriesNarrow_merged.csv",
> "minuteCaloriesWide_merged.csv", "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv",
> "minuteSleep_merged.csv", "minuteStepsNarrow_merged.csv",
> ?minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "minuteStepsWide_merged.csv", "sleepDay_merged.csv",
> "weightLogInfo_merged.csv")
>
>
>
> But I am getting the following error:
>
> Error: unexpected input in "rlySteps_merged.csv",
> "minuteCaloriesNarrow_merged.csv", "minuteCaloriesWide_merged.csv",
> "minuteIntensitiesNarrow_merged.csv",
> "minuteIntensitiesWide_merged.csv", "minuteMETsNarrow_merged.csv"
>
>
> (Maybe the R Studio free trial/usage is underpowered for my project?)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov  3 21:44:34 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 3 Nov 2021 13:44:34 -0700 (PDT)
Subject: [R] sink() not working as expected [RESOLVED]
In-Reply-To: <e0adebfa-9759-f36d-7591-c1ad91bf9861@sapo.pt>
References: <96b75d27-da9b-ec10-7fd3-731a927358a7@appl-ecosys.com>
 <20211103002121.20bf0c43@Tarkus>
 <377b6ce1-1fb1-2c2a-cadc-43a82c4253@appl-ecosys.com>
 <e0adebfa-9759-f36d-7591-c1ad91bf9861@sapo.pt>
Message-ID: <c427ed59-ec70-a241-b9a3-ecee5ea0cd0@appl-ecosys.com>

On Wed, 3 Nov 2021, Rui Barradas wrote:

> You do not assign the pipe output, so put the print statement as the last
> instruction of the pipe. The following works.
>
> # file: rhelp.R
> library(dplyr)
>
> mtcars %>%
>  select(mpg, cyl, disp, hp, am) %>%
>  mutate(
>    sampdt = c("automatic", "manual")[am + 1L]
>  ) %>%
>  print()

Rui,

Thank you very much. It works here, too.

Much appreciated,

Rich


From @purd|e@@ @end|ng |rom gm@||@com  Wed Nov  3 22:32:33 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Thu, 4 Nov 2021 10:32:33 +1300
Subject: [R] Is there a hash data structure for R
In-Reply-To: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
References: <CALUE4BK8bgesgtiNnO8ikRwn-qdSu7-vLqhci-8rv0EyzpysBQ@mail.gmail.com>
Message-ID: <CAB8pepyO2LeqeYuc+RbnvryhFp3Ptp3HX6RVQGPY95_Ltgq-kA@mail.gmail.com>

Here's an interesting article:
    Collections in R: Review and Proposal
    Timothy Barry
        The R Journal
        doi: 10.32614/RJ-2018-037
    https://journal.r-project.org/archive/2018/RJ-2018-037/RJ-2018-037.pdf

On Tue, Nov 2, 2021 at 10:48 PM Yonghua Peng <yong at pobox.com> wrote:
>
> I know this is a newbie question. But how do I implement the hash structure
> which is available in other languages (in python it's dict)?
>
> I know there is the list, but list's names can be duplicated here.
>
> > x <- list(x=1:5,y=month.name,x=3:7)
>
> > x
>
> $x
>
> [1] 1 2 3 4 5
>
>
> $y
>
>  [1] "January"   "February"  "March"     "April"     "May"       "June"
>
>  [7] "July"      "August"    "September" "October"   "November"  "December"
>
>
> $x
>
> [1] 3 4 5 6 7
>
>
>
> Thanks a lot.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From Tr@cy@L@Lenz @end|ng |rom @@u@edu  Wed Nov  3 18:03:52 2021
From: Tr@cy@L@Lenz @end|ng |rom @@u@edu (Tracy Lenz)
Date: Wed, 3 Nov 2021 17:03:52 +0000
Subject: [R] Live Online Training for High School Teachers and Students
Message-ID: <MN2PR06MB651013CBCAC09525492AEEC3CB8C9@MN2PR06MB6510.namprd06.prod.outlook.com>

Hi,

I am looking for live training that can be conducted via Zoom or another online platform to assist high school teachers and students who are working with R. These teachers and students are using R at a very basic level. They've reviewed a variety of beginner-level texts and videos on R, but they continue to encounter issues that could be resolved in a session with someone who is more familiar with R. I'm not looking for a long-term solution such as a Code Academy course; rather, this session would be intended as a brief beginner's introduction to R as well as a Q&A for specific use cases and troubleshooting. I've searched online for such offerings but have not found anything. If anyone has any advice, I'd appreciate it. Thanks!

Tracy Lenz












	[[alternative HTML version deleted]]


From iritzke m@iii@g oii web@de  Wed Nov  3 23:04:06 2021
From: iritzke m@iii@g oii web@de (iritzke m@iii@g oii web@de)
Date: Wed, 3 Nov 2021 23:04:06 +0100
Subject: [R] severe bug in LICORS/kmeanspp
Message-ID: <trinity-4b232ca6-7341-43cf-9b55-6002aece90b9-1635977046734@3c-app-webde-bap27>

Hello,

I found a severe bug in the function kmeanspp (k-means++ implementation) in the LICORS package (https://www.rdocumentation.org/packages/LICORS/versions/0.2.0/topics/kmeanspp) and need some advice on how to handle this (therefore posting here).
?
Since LICORS has not been updated since 2013, I am not sure if there is an active maintainer. The named maintainer works for Google since 2014 and may have abandoned the package.
?
On the other?hand, this is one of the few implementations of k-means++ in R and coming up first when searching.
?
The bug leads to inferior results.  In its current form, the results were much worse than those of Hartigan-Wong (the default for k-means in the stats package) for all test problems I tried. However, after fixing the bug, kmeanspp found better results than Hartigan-Wong for all those problems. So anyone comparing those two algorithms based on the current implementations in R may have come to the wrong conclusions. BTW: The Hartigan-Wong implementation (Fortran) is *much* faster than LICOR/kmeanspp, which is written in pure R (before making one call to stats/kmeans at the end), but that is not the point here.
?
The bug concerns a distance computation which should be a matrix of distances of all data vectors and all current codebook vectors, but is not. The code and an example illustrating the problem is shown below. Basically, to subtract a vector from a matrix,?one has to convert the vector into a matrix where all rows are just copies of the vector. Details are shown below. The fix is trivial.
?
I stumbled upon this because kmeanspp produced counterintuitive and very poor results.
?
Is this of any interest? Should kmeanspp in LICORS be fixed? I have neither the experience nor the time to take over an R-package. I could write a more formal bug report, if required, but I initially would like to know if this is considered relevant.

Suggestions/comments are welcome.
?
Kind Regards
Bernd Fritzke
?
The code?
? ? ? ? ? ? if (ndim == 1) {
? ? ? ? ? ? ? ? dists <- apply(cbind(data[center_ids, ]), 1,?
? ? ? ? ? ? ? ? ? function(center) {
? ? ? ? ? ? ? ? ? ? rowSums((data - center)^2)
? ? ? ? ? ? ? ? ? })
? ? ? ? ? ? }
? ? ? ? ? ? else {
? ? ? ? ? ? ? ? dists <- apply(data[center_ids, ], 1, function(center) {
? ? ? ? ? ? ? ? ? rowSums((data - center)^2)
? ? ? ? ? ? ? ? })
? ? ? ? ? ? }
?
should rather be (the two changed lines are marked as "fixed"):
?
? ? ? ? ? ? if (ndim == 1) {
? ? ? ? ? ? ? ? dists <- apply(cbind(data[center_ids, ]), 1,?
? ? ? ? ? ? ? ? ? function(center) {
? ? ? ? ? ? ? ? ? ? rowSums((data - rep(center,each=nrow(data) ) )^2) # fixed
? ? ? ? ? ? ? ? ? })
? ? ? ? ? ? }
? ? ? ? ? ? else {
? ? ? ? ? ? ? ? dists <- apply(data[center_ids, ], 1, function(center) {
? ? ? ? ? ? ? ? ? rowSums((data - rep(center,each=nrow(data) ) )^2) # fixed
? ? ? ? ? ? ? ? })
? ? ? ? ? ? }
?
Here is some example code illustrating the problem. The code should compute the square distances between the six two-dimensional vectors in "data" and three vectors which happen to be the elements 1, 2, and 4 in "data".
RSTUDIO

```{r}
data=cbind(1:6,rep(0,6))
print("data")
print(data)
center_ids=c(1,2,4)
print("codebook")
print(data[center_ids, ])

# fixed
dists <- apply(data[center_ids, ], 1,?
? ? ? ? ? ? ? ?function(center) {
? ? ? ? ? ? ? ? ? rowSums((data - rep(center,each=nrow(data)))^2)
? ? ? ? ? ? ? }
)
print("dists (correct)")
print(dists)

# buggy
dists <- apply(data[center_ids, ], 1,?
? ? ? ? ? ? ? ?function(center) {
? ? ? ? ? ? ? ? ? rowSums((data - center)^2)
? ? ? ? ? ? ? }
)
print("buggy dists from LICORS")
dists
```
Output:

[1] "data"
? ? ?[,1] [,2]
[1,] ? ?1 ? ?0
[2,] ? ?2 ? ?0
[3,] ? ?3 ? ?0
[4,] ? ?4 ? ?0
[5,] ? ?5 ? ?0
[6,] ? ?6 ? ?0
[1] "codebook"
? ? ?[,1] [,2]
[1,] ? ?1 ? ?0
[2,] ? ?2 ? ?0
[3,] ? ?4 ? ?0
[1] "dists (correct)"
? ? ?[,1] [,2] [,3]
[1,] ? ?0 ? ?1 ? ?9
[2,] ? ?1 ? ?0 ? ?4
[3,] ? ?4 ? ?1 ? ?1
[4,] ? ?9 ? ?4 ? ?0
[5,] ? 16 ? ?9 ? ?1
[6,] ? 25 ? 16 ? ?4
[1] "buggy dists from LICORS"
? ? ?[,1] [,2] [,3]
[1,] ? ?1 ? ?5 ? 25
[2,] ? ?4 ? ?4 ? ?4
[3,] ? ?5 ? ?5 ? 17
[4,] ? 16 ? 16 ? 16
[5,] ? 17 ? 13 ? 17
[6,] ? 36 ? 36 ? 36
?
--
Dr.-Ing. Bernd Fritzke


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Nov  4 10:56:29 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Nov 2021 05:56:29 -0400
Subject: [R] names.data.frame?
In-Reply-To: <e46c08cd-e954-92fe-5003-02281c061876@gmail.com>
References: <c7deacf8-c452-128c-9bdb-9904c88f33d8@syonic.eu>
 <CAPcHnpTCLZdAHGJ_NOFvi1x__NHjj5tbTnRvCNzwStDf3nLECg@mail.gmail.com>
 <e46c08cd-e954-92fe-5003-02281c061876@gmail.com>
Message-ID: <5acb13f5-6e5b-3bdf-aa0f-0f2e85d6bfaa@gmail.com>

On 03/11/2021 3:42 p.m., Duncan Murdoch wrote:
> On 03/11/2021 2:54 p.m., Andrew Simmons wrote:
  ... deletions ...
>> As a side note, I would suggest making your class through the methods
>> package, with methods::setClass("pm", ...)
>> See the documentation for setClass for more details, it's the recommended
>> way to define classes in R.
> 
> That's incorrect.  It is *a* recommended way to define classes in R, but
> there are other recommended ways as well, for doing other kinds of
> things, and many people stick with the S3 system without formal classes
> at all.

In fact, Andrew was paraphrasing some documentation, so his statement 
isn't incorrect.

Duncan Murdoch

> 
> If you're writing a Bioconductor package you should probably use the
> formal methods.  If you're writing code for other purposes, you should
> think about whether you need formal classes at all, and if so, whether
> the methods package formalism is a match for what you're doing.
> 
> Duncan Murdoch
>


From cry@n @end|ng |rom b|ngh@mton@edu  Thu Nov  4 14:03:47 2021
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher W Ryan)
Date: Thu, 4 Nov 2021 09:03:47 -0400
Subject: [R] 
 [External Email] Live Online Training for High School Teachers
 and Students
In-Reply-To: <MN2PR06MB651013CBCAC09525492AEEC3CB8C9@MN2PR06MB6510.namprd06.prod.outlook.com>
References: <MN2PR06MB651013CBCAC09525492AEEC3CB8C9@MN2PR06MB6510.namprd06.prod.outlook.com>
Message-ID: <CAM+rpYnXRVo=xd-=YNJr0b_=dWDkaWkPFAXBxWq-wVT1merskA@mail.gmail.com>

Tracy--

I enjoy doing this sort of thing. Over the years I've done two full-day
"introduction to R" workshops for high school students. The workshops also
inevitably get into software-agnostic, basic issues about how to think
about data, and how to measure, record, and store it---which is all pretty
cool. They were in-person, pre-pandemic workshops, but I believe could be
adapted to a remote, online approach.  Feel free to email me.

If you don't already know about it, you might also be interested in the
R-sig-teaching List here:
https://stat.ethz.ch/mailman/listinfo/r-sig-teaching

--Chris Ryan


On Thu, Nov 4, 2021 at 3:06 AM Tracy Lenz <Tracy.L.Lenz at asu.edu> wrote:

> Hi,
>
> I am looking for live training that can be conducted via Zoom or another
> online platform to assist high school teachers and students who are working
> with R. These teachers and students are using R at a very basic level.
> They've reviewed a variety of beginner-level texts and videos on R, but
> they continue to encounter issues that could be resolved in a session with
> someone who is more familiar with R. I'm not looking for a long-term
> solution such as a Code Academy course; rather, this session would be
> intended as a brief beginner's introduction to R as well as a Q&A for
> specific use cases and troubleshooting. I've searched online for such
> offerings but have not found anything. If anyone has any advice, I'd
> appreciate it. Thanks!
>
> Tracy Lenz
>
>
>
>
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From btupper @end|ng |rom b|ge|ow@org  Thu Nov  4 14:24:40 2021
From: btupper @end|ng |rom b|ge|ow@org (Ben Tupper)
Date: Thu, 4 Nov 2021 09:24:40 -0400
Subject: [R] What to do when problems() returns nothing
In-Reply-To: <b8352e94-8836-cb3-a3ac-2254d84d1eb5@appl-ecosys.com>
References: <2e14f7c-e0a0-67d3-66d-c575689fdc6f@appl-ecosys.com>
 <CAGxFJbRDHDxJeH8GX72XnC8anyQon8zge0593XXfwgvvU=uBuQ@mail.gmail.com>
 <b8352e94-8836-cb3-a3ac-2254d84d1eb5@appl-ecosys.com>
Message-ID: <CALrbzg35DjdFUPQZFf2hpDxnFHoqEs-+JKWbR6Z_fu5JQzPzmA@mail.gmail.com>

Hi,

The help for problems() shows that the expected argument has a default
value of .Last.value.  If you don't provide the input argument, it just
uses the last thing your R session evaluated.  That's great if you run
problems() right after your issues arises.  But you have inserted
stop_for_problems() before you get a chance to run problems().  So, in your
case, if you want to inspect the problems associated with x, you
should provide x explicitly ala problems(x).

Cheers,
Ben


On Wed, Nov 3, 2021 at 3:30 PM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

> On Wed, 3 Nov 2021, Bert Gunter wrote:
>
> > More to the point, the tidyverse galaxy tries to largely replace R's
> > standard functionality and has its own help forum. So I think you should
> > post there, rather than here, for questions about it:
> > https://www.tidyverse.org/help/
>
> Bert,
>
> Thank you very much. I am tying to learn tidyverse and had no idea it had
> it's own help.
>
> I will post tidyverse questions there.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Ben Tupper (he/him)
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov  4 15:02:13 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 4 Nov 2021 07:02:13 -0700 (PDT)
Subject: [R] What to do when problems() returns nothing
In-Reply-To: <CALrbzg35DjdFUPQZFf2hpDxnFHoqEs-+JKWbR6Z_fu5JQzPzmA@mail.gmail.com>
References: <2e14f7c-e0a0-67d3-66d-c575689fdc6f@appl-ecosys.com>
 <CAGxFJbRDHDxJeH8GX72XnC8anyQon8zge0593XXfwgvvU=uBuQ@mail.gmail.com>
 <b8352e94-8836-cb3-a3ac-2254d84d1eb5@appl-ecosys.com>
 <CALrbzg35DjdFUPQZFf2hpDxnFHoqEs-+JKWbR6Z_fu5JQzPzmA@mail.gmail.com>
Message-ID: <cf3b8de7-d03e-25da-9fee-12b432145eb@appl-ecosys.com>

On Thu, 4 Nov 2021, Ben Tupper wrote:

> The help for problems() shows that the expected argument has a default
> value of .Last.value. If you don't provide the input argument, it just
> uses the last thing your R session evaluated. That's great if you run
> problems() right after your issues arises. But you have inserted
> stop_for_problems() before you get a chance to run problems(). So, in your
> case, if you want to inspect the problems associated with x, you should
> provide x explicitly ala problems(x).

Ben,

I've isolated one data file to import by removing both stop_for_problems()
and problems():
library(tidyverse)

cor_stage <- read_csv("../data/cor-stage.csv", col_names = TRUE,
                       col_types = list (
                           site_nbr = col_character(),
                           year = col_integer(),
                           mon = col_integer(),
                           day = col_integer(),
                           hr = col_double(),
                           min = col_double(),
                           ft = col_integer())
                       )

The gzipped data file can be downloaded from <https://tinyurl.com/5usc8wbz>.

R imports the file but when I look at it the last column has not been
imported and problems() doesn't return them:

> source('import2.r')
> cor_stage
# A tibble: 415,903 ? 8
    site_nbr  year   mon   day    hr   min tz       ft
    <chr>    <int> <int> <int> <dbl> <dbl> <chr> <int>
  1 14171600  2009    10    23     0     0 PDT      NA
  2 14171600  2009    10    23     0    15 PDT      NA
  3 14171600  2009    10    23     0    30 PDT      NA
  4 14171600  2009    10    23     0    45 PDT      NA
  5 14171600  2009    10    23     1     0 PDT      NA
  6 14171600  2009    10    23     1    15 PDT      NA
  7 14171600  2009    10    23     1    30 PDT      NA
  8 14171600  2009    10    23     1    45 PDT      NA
  9 14171600  2009    10    23     2     0 PDT      NA
10 14171600  2009    10    23     2    15 PDT      NA
# ? with 415,893 more rows
Warning message:
One or more parsing issues, see `problems()` for details 
> problems()
>

There are 20 .csv files; a few import properly the rest don't. I've not
before needed to import this many data files for a project but using
read.csv() hasn't failed to import the data column, either.

Thanks,

Rich


From th|erry@onke||nx @end|ng |rom |nbo@be  Thu Nov  4 14:50:59 2021
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Thu, 4 Nov 2021 14:50:59 +0100
Subject: [R] Live Online Training for High School Teachers and Students
In-Reply-To: <MN2PR06MB651013CBCAC09525492AEEC3CB8C9@MN2PR06MB6510.namprd06.prod.outlook.com>
References: <MN2PR06MB651013CBCAC09525492AEEC3CB8C9@MN2PR06MB6510.namprd06.prod.outlook.com>
Message-ID: <CAJuCY5y8j=iY2_UR45NFKRkUzAJgUOe1uyd9ZjfVY7h2gEXeUw@mail.gmail.com>

Dear Tracy,

Maybe a workshop of Data Carpentry (https://datacarpentry.org/) might be
relevant.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op do 4 nov. 2021 om 08:07 schreef Tracy Lenz <Tracy.L.Lenz at asu.edu>:

> Hi,
>
> I am looking for live training that can be conducted via Zoom or another
> online platform to assist high school teachers and students who are working
> with R. These teachers and students are using R at a very basic level.
> They've reviewed a variety of beginner-level texts and videos on R, but
> they continue to encounter issues that could be resolved in a session with
> someone who is more familiar with R. I'm not looking for a long-term
> solution such as a Code Academy course; rather, this session would be
> intended as a brief beginner's introduction to R as well as a Q&A for
> specific use cases and troubleshooting. I've searched online for such
> offerings but have not found anything. If anyone has any advice, I'd
> appreciate it. Thanks!
>
> Tracy Lenz
>
>
>
>
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From JH@rm@e @end|ng |rom roku@com  Thu Nov  4 15:38:36 2021
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Thu, 4 Nov 2021 14:38:36 +0000
Subject: [R] names.data.frame?
Message-ID: <BEC62A3F-D94E-4303-A3EA-FA536BF9023B@roku.com>

Can someone please explain what Leonard Mada is trying to do? As far as I know, names is not generic and there is no names.data.frame because it?s not needed. (A data.frame seems to be just a named list with some extra functionality that depends on every element being a vector with the same length and some overloading of list functions to ensure that that is always true.) The other answers confused me more.

Regards,
Jorgen Harmse.


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Nov  4 15:43:14 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Nov 2021 10:43:14 -0400
Subject: [R] names.data.frame?
In-Reply-To: <BEC62A3F-D94E-4303-A3EA-FA536BF9023B@roku.com>
References: <BEC62A3F-D94E-4303-A3EA-FA536BF9023B@roku.com>
Message-ID: <add4347e-c86b-6514-4be0-4382432ce80c@gmail.com>

On 04/11/2021 10:38 a.m., Jorgen Harmse via R-help wrote:
> Can someone please explain what Leonard Mada is trying to do? As far as I know, names is not generic and there is no names.data.frame because it?s not needed. (A data.frame seems to be just a named list with some extra functionality that depends on every element being a vector with the same length and some overloading of list functions to ensure that that is always true.) The other answers confused me more.

According to the help page, names() is a generic function.  Running 
`methods(names)` lists quite a few methods, but you're right, there's no 
names.data.frame because it's not needed, the default method is fine.

Duncan Murdoch


From t@v|b@r @end|ng |rom gm@||@com  Thu Nov  4 16:20:50 2021
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Thu, 4 Nov 2021 17:20:50 +0200
Subject: [R] What to do when problems() returns nothing
In-Reply-To: <cf3b8de7-d03e-25da-9fee-12b432145eb@appl-ecosys.com>
References: <2e14f7c-e0a0-67d3-66d-c575689fdc6f@appl-ecosys.com>
 <CAGxFJbRDHDxJeH8GX72XnC8anyQon8zge0593XXfwgvvU=uBuQ@mail.gmail.com>
 <b8352e94-8836-cb3-a3ac-2254d84d1eb5@appl-ecosys.com>
 <CALrbzg35DjdFUPQZFf2hpDxnFHoqEs-+JKWbR6Z_fu5JQzPzmA@mail.gmail.com>
 <cf3b8de7-d03e-25da-9fee-12b432145eb@appl-ecosys.com>
Message-ID: <dd27ee6a-ada7-4cde-c7e5-1b045377ee31@gmail.com>


On 04/11/2021 16:02, Rich Shepard wrote:
> On Thu, 4 Nov 2021, Ben Tupper wrote:
>
> ????????????????????? )
>
> The gzipped data file can be downloaded from 
> <https://tinyurl.com/5usc8wbz>.


This seems to work fine for me:


library(readr)
cor_stage_file <- "cor-stage.csv"
cor_stage <- read_csv(cor_stage_file,
 ????????????????????? col_types = list(site_nbr = col_integer(),
 ?????????????????????????????????????? year = col_character(),
 ?????????????????????????????????????? mon = col_character(),
 ?????????????????????????????????????? day = col_character(),
 ?????????????????????????????????????? hr = col_character(),
 ?????????????????????????????????????? min = col_character(),
 ?????????????????????????????????????? tz = col_character(),
 ?????????????????????????????????????? ft = col_double()))

# Add a proper datetime column
date_string <- with(cor_stage, paste(year, mon, day, sep="-"))
time_string <- with(cor_stage, paste(hr, min, "00", sep=":"))
cor_stage['date_time'] <- as.POSIXct(paste(date_string, time_string, 
cor_stage$tz))

Why are you importing the last "ft" column as an integer when it's 
clearly decimal data?


-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov  4 16:32:37 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 4 Nov 2021 08:32:37 -0700 (PDT)
Subject: [R] What to do when problems() returns nothing [RESOLVED]
In-Reply-To: <dd27ee6a-ada7-4cde-c7e5-1b045377ee31@gmail.com>
References: <2e14f7c-e0a0-67d3-66d-c575689fdc6f@appl-ecosys.com>
 <CAGxFJbRDHDxJeH8GX72XnC8anyQon8zge0593XXfwgvvU=uBuQ@mail.gmail.com>
 <b8352e94-8836-cb3-a3ac-2254d84d1eb5@appl-ecosys.com>
 <CALrbzg35DjdFUPQZFf2hpDxnFHoqEs-+JKWbR6Z_fu5JQzPzmA@mail.gmail.com>
 <cf3b8de7-d03e-25da-9fee-12b432145eb@appl-ecosys.com>
 <dd27ee6a-ada7-4cde-c7e5-1b045377ee31@gmail.com>
Message-ID: <68a14443-293b-f950-21af-a34b873b5fc4@appl-ecosys.com>

On Thu, 4 Nov 2021, Micha Silver wrote:

> Why are you importing the last "ft" column as an integer when it's clearly
> decimal data?

Micha,

Probably because I was still thinking of the discharge data which are
integers. That explains all the issues.

Mea culpa!

Many thanks for seeing what I kept missing,

Rich


From bgunter@4567 @end|ng |rom gm@||@com  Thu Nov  4 17:36:30 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 4 Nov 2021 09:36:30 -0700
Subject: [R] names.data.frame?
In-Reply-To: <add4347e-c86b-6514-4be0-4382432ce80c@gmail.com>
References: <BEC62A3F-D94E-4303-A3EA-FA536BF9023B@roku.com>
 <add4347e-c86b-6514-4be0-4382432ce80c@gmail.com>
Message-ID: <CAGxFJbT8VVkdXppC4rNkYi8sWVx1QHREZR+W9ju=s4p71cqisA@mail.gmail.com>

" Running `methods(names)` lists quite a few methods, ..."

Depending on what packages you have loaded of course.

Bert

On Thu, Nov 4, 2021 at 7:43 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 04/11/2021 10:38 a.m., Jorgen Harmse via R-help wrote:
> > Can someone please explain what Leonard Mada is trying to do? As far as
> I know, names is not generic and there is no names.data.frame because it?s
> not needed. (A data.frame seems to be just a named list with some extra
> functionality that depends on every element being a vector with the same
> length and some overloading of list functions to ensure that that is always
> true.) The other answers confused me more.
>
> According to the help page, names() is a generic function.  Running
> `methods(names)` lists quite a few methods, but you're right, there's no
> names.data.frame because it's not needed, the default method is fine.
>
> Duncan Murdoch
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov  4 19:34:01 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 4 Nov 2021 11:34:01 -0700 (PDT)
Subject: [R] mean() produces NA on double column
Message-ID: <e84eff7f-e9e6-91dd-1049-6578f7a3cc3e@appl-ecosys.com>

I'm not seeing what's different about this tibble so that mean() returns NA
on a column of doubles:
> head(pdx_stage)
# A tibble: 6 ? 8
   site_nbr  year   mon   day    hr   min tz       ft
   <chr>    <int> <int> <int> <dbl> <dbl> <chr> <dbl>
1 14211720  2007    10     1     1     0 PDT    3.21
2 14211720  2007    10     1     1    30 PDT    3.12
3 14211720  2007    10     1     2     0 PDT    2.89
4 14211720  2007    10     1     2    30 PDT    2.65
5 14211720  2007    10     1     3     0 PDT    2.38
6 14211720  2007    10     1     3    30 PDT    2.14
> mean(pdx_stage$ft)
[1] NA

Other tibbles have doubles in the value column which mean() finds. For
example:
> head(pdx_depth_sens)
# A tibble: 6 ? 8
   site_nbr  year   mon   day    hr   min tz       ft
   <chr>    <int> <int> <int> <dbl> <dbl> <chr> <dbl>
1 14211720  2009     1    22     0     0 PST    5.68
2 14211720  2009     1    22     0    30 PST    5.66
3 14211720  2009     1    22     1     0 PST    5.69
4 14211720  2009     1    22     1    30 PST    5.75
5 14211720  2009     1    22     2     0 PST    5.85
6 14211720  2009     1    22     2    30 PST    5.98
> mean(pdx_depth_sens$ft)
[1] 8.196686

How do I isolate the source of this issue?

Rich


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Nov  4 19:38:19 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 4 Nov 2021 18:38:19 +0000
Subject: [R] mean() produces NA on double column
In-Reply-To: <e84eff7f-e9e6-91dd-1049-6578f7a3cc3e@appl-ecosys.com>
References: <e84eff7f-e9e6-91dd-1049-6578f7a3cc3e@appl-ecosys.com>
Message-ID: <8e67d2f5-d986-5bdb-22a7-cdfc24fc3058@sapo.pt>

Hello,

Maybe


which(is.na(pdx_stage$ft))


Have you tried na.rm = TRUE?


mean(pdx_stage$ft, na.rm = TRUE)


Hope this helps,

Rui Barradas

?s 18:34 de 04/11/21, Rich Shepard escreveu:
> I'm not seeing what's different about this tibble so that mean() returns NA
> on a column of doubles:
>> head(pdx_stage)
> # A tibble: 6 ? 8
>  ? site_nbr? year?? mon?? day??? hr?? min tz?????? ft
>  ? <chr>??? <int> <int> <int> <dbl> <dbl> <chr> <dbl>
> 1 14211720? 2007??? 10???? 1???? 1???? 0 PDT??? 3.21
> 2 14211720? 2007??? 10???? 1???? 1??? 30 PDT??? 3.12
> 3 14211720? 2007??? 10???? 1???? 2???? 0 PDT??? 2.89
> 4 14211720? 2007??? 10???? 1???? 2??? 30 PDT??? 2.65
> 5 14211720? 2007??? 10???? 1???? 3???? 0 PDT??? 2.38
> 6 14211720? 2007??? 10???? 1???? 3??? 30 PDT??? 2.14
>> mean(pdx_stage$ft)
> [1] NA
> 
> Other tibbles have doubles in the value column which mean() finds. For
> example:
>> head(pdx_depth_sens)
> # A tibble: 6 ? 8
>  ? site_nbr? year?? mon?? day??? hr?? min tz?????? ft
>  ? <chr>??? <int> <int> <int> <dbl> <dbl> <chr> <dbl>
> 1 14211720? 2009???? 1??? 22???? 0???? 0 PST??? 5.68
> 2 14211720? 2009???? 1??? 22???? 0??? 30 PST??? 5.66
> 3 14211720? 2009???? 1??? 22???? 1???? 0 PST??? 5.69
> 4 14211720? 2009???? 1??? 22???? 1??? 30 PST??? 5.75
> 5 14211720? 2009???? 1??? 22???? 2???? 0 PST??? 5.85
> 6 14211720? 2009???? 1??? 22???? 2??? 30 PST??? 5.98
>> mean(pdx_depth_sens$ft)
> [1] 8.196686
> 
> How do I isolate the source of this issue?
> 
> Rich
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov  4 19:54:26 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 4 Nov 2021 11:54:26 -0700 (PDT)
Subject: [R] mean() produces NA on double column [FIXED]
In-Reply-To: <8e67d2f5-d986-5bdb-22a7-cdfc24fc3058@sapo.pt>
References: <e84eff7f-e9e6-91dd-1049-6578f7a3cc3e@appl-ecosys.com>
 <8e67d2f5-d986-5bdb-22a7-cdfc24fc3058@sapo.pt>
Message-ID: <6c3d81d2-b578-7581-b756-1510d5aabbf4@appl-ecosys.com>

On Thu, 4 Nov 2021, Rui Barradas wrote:

> Maybe
> which(is.na(pdx_stage$ft))
> Have you tried na.rm = TRUE?
> mean(pdx_stage$ft, na.rm = TRUE)

Rui,

I just scrolled through the data file.

Yes, there are severeal NAs when the equipment was down and I hadn't put
na.rm = TRUE in the read_csv() import command.

I hadn't caught them before.

Thanks,

Rich


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Nov  4 20:26:00 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Nov 2021 15:26:00 -0400
Subject: [R] names.data.frame?
In-Reply-To: <CAGxFJbT8VVkdXppC4rNkYi8sWVx1QHREZR+W9ju=s4p71cqisA@mail.gmail.com>
References: <BEC62A3F-D94E-4303-A3EA-FA536BF9023B@roku.com>
 <add4347e-c86b-6514-4be0-4382432ce80c@gmail.com>
 <CAGxFJbT8VVkdXppC4rNkYi8sWVx1QHREZR+W9ju=s4p71cqisA@mail.gmail.com>
Message-ID: <c38b15a3-ec03-e753-90dd-4cfd155a48dc@gmail.com>

On 04/11/2021 12:36 p.m., Bert Gunter wrote:
> " Running `methods(names)` lists quite a few methods, ..."
> 
> Depending on what packages you have loaded of course.

Yes, just one is in a base package.

Duncan Murdoch


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov  4 22:06:01 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 4 Nov 2021 14:06:01 -0700 (PDT)
Subject: [R] Thanks for all the patient help
Message-ID: <bbf3636-3dc8-f2fe-c593-99d3a83b2b9f@appl-ecosys.com>

I want to thank all of you for your help the past few days. I now have all
data sets imported, datetime columns added, and distribution stats
calculated for each. No errors.

My searches on the web for what to do when problems() produces no results,
and the few comments on my stackexchange post, were not helpful. So I fell
back on how I debugged FORTRAN code in the 1970s: cut the data file in half
and run that. If the issue still exists, cut that half in half again. Rinse
and repeat until the problem line is found.

It turned out that one 416K line data file had a few double commas between
columns about line 1530 in the file. Finding those double commas showed me
the problem and the emacs search-and-replace changed the two commas to a
single comma.

Now all's well. It took another mug of coffee and a lunch break to work my
way down to the beginning of the large file to the errors, but it worked
just as it did before FORTRAN IV had a debugger. :-)

Stay well, all!

Rich


From v@|kremk @end|ng |rom gm@||@com  Thu Nov  4 22:43:25 2021
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Thu, 4 Nov 2021 16:43:25 -0500
Subject: [R] Date
Message-ID: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>

IHi All, l,

I am  reading a csv file  and one of the columns is named as  "mydate"
 with this form, 2019-09-16.

I am reading this file as

dat=read.csv("myfile.csv")
     the structure of the data looks like as follow

str(dat)
mydate : chr  "09/16/2019" "02/21/2021" "02/22/2021" "10/11/2017" ...

Please note the format  has  changed from YYYY-mm-dd  to mm/dd/YYYY
When I tried to change this   as a Date using

as.Date(as.Date(mydate,     format="%m/%d/%Y" )
I am getting this error message
    Error in charToDate(x) :
      characte string is not in a standard unambiguous format

My question is,
1. how can I read the file as it is (i.e., without changing the date format) ?
2. why does R change the date format?

Thank you,


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Nov  4 23:00:05 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 04 Nov 2021 15:00:05 -0700
Subject: [R] Date
In-Reply-To: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
References: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
Message-ID: <810BF9BB-B15E-414F-8717-1EC6E43BAE29@dcn.davis.ca.us>

You are claiming behavior that is not something R does, but is something Excel does constantly.

Compare what your data file looks like using a text editor with what R has imported. Absolutely do not use a spreadsheet program to do this.

On November 4, 2021 2:43:25 PM PDT, Val <valkremk at gmail.com> wrote:
>IHi All, l,
>
>I am  reading a csv file  and one of the columns is named as  "mydate"
> with this form, 2019-09-16.
>
>I am reading this file as
>
>dat=read.csv("myfile.csv")
>     the structure of the data looks like as follow
>
>str(dat)
>mydate : chr  "09/16/2019" "02/21/2021" "02/22/2021" "10/11/2017" ...
>
>Please note the format  has  changed from YYYY-mm-dd  to mm/dd/YYYY
>When I tried to change this   as a Date using
>
>as.Date(as.Date(mydate,     format="%m/%d/%Y" )
>I am getting this error message
>    Error in charToDate(x) :
>      characte string is not in a standard unambiguous format
>
>My question is,
>1. how can I read the file as it is (i.e., without changing the date format) ?
>2. why does R change the date format?
>
>Thank you,
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From drj|m|emon @end|ng |rom gm@||@com  Thu Nov  4 23:00:28 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 5 Nov 2021 09:00:28 +1100
Subject: [R] Date
In-Reply-To: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
References: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
Message-ID: <CA+8X3fWyQ1=BnRB2L32ifW-HCjXTbwrntU+cr77egM7LCiCNDw@mail.gmail.com>

Hi Val,
Try this:

dat=read.csv("myfile.csv",stringsAsFactors=FALSE)

However, the apparently silent conversion of format is a mystery to
me. The only time I have struck something like this was when exporting
dates from Excel some years ago, and there was a silent conversion to
mm/dd/yyyy format if the dates were in dd/mm/yyyy format. Could you
post some sample data?

Jim


On Fri, Nov 5, 2021 at 8:44 AM Val <valkremk at gmail.com> wrote:
>
> IHi All, l,
>
> I am  reading a csv file  and one of the columns is named as  "mydate"
>  with this form, 2019-09-16.
>
> I am reading this file as
>
> dat=read.csv("myfile.csv")
>      the structure of the data looks like as follow
>
> str(dat)
> mydate : chr  "09/16/2019" "02/21/2021" "02/22/2021" "10/11/2017" ...
>
> Please note the format  has  changed from YYYY-mm-dd  to mm/dd/YYYY
> When I tried to change this   as a Date using
>
> as.Date(as.Date(mydate,     format="%m/%d/%Y" )
> I am getting this error message
>     Error in charToDate(x) :
>       characte string is not in a standard unambiguous format
>
> My question is,
> 1. how can I read the file as it is (i.e., without changing the date format) ?
> 2. why does R change the date format?
>
> Thank you,
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Nov  4 23:30:39 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 4 Nov 2021 22:30:39 +0000
Subject: [R] Date
In-Reply-To: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
References: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
Message-ID: <814a72360bbc4c5ab55c53da7588e0ec@SRVEXCHCM1302.precheza.cz>

Hi

Not sure why the date format was changed but if I am correct R do not read dates as dates but as character vector. You need to transfer such columns to dates by asDate. The error is probably from your use two asDate commands.

Cheers
Petr
-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Val
Sent: Thursday, November 4, 2021 10:43 PM
To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] Date

IHi All, l,

I am  reading a csv file  and one of the columns is named as  "mydate"
 with this form, 2019-09-16.

I am reading this file as

dat=read.csv("myfile.csv")
     the structure of the data looks like as follow

str(dat)
mydate : chr  "09/16/2019" "02/21/2021" "02/22/2021" "10/11/2017" ...

Please note the format  has  changed from YYYY-mm-dd  to mm/dd/YYYY
When I tried to change this   as a Date using

as.Date(as.Date(mydate,     format="%m/%d/%Y" )
I am getting this error message
    Error in charToDate(x) :
      characte string is not in a standard unambiguous format

My question is,
1. how can I read the file as it is (i.e., without changing the date format) ?
2. why does R change the date format?

Thank you,

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Nov  5 00:25:37 2021
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 4 Nov 2021 18:25:37 -0500
Subject: [R] Date
In-Reply-To: <814a72360bbc4c5ab55c53da7588e0ec@SRVEXCHCM1302.precheza.cz>
References: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
 <814a72360bbc4c5ab55c53da7588e0ec@SRVEXCHCM1302.precheza.cz>
Message-ID: <0f3dcf3f-6edd-796c-5f34-9dd3515a26c1@effectivedefense.org>

	  My speculation is that Microsoft Excel recognized that as a date and 
saved it in the "mm/dd/YYYY" format you saw when reading it into R with 
dat=read.csv("myfile.csv").


	  "str" told you the format.  You can convert that from character to 
Date using as.Date(dat$mydate, '%m/%d/%Y'), as documented in 
help('as.Date').


NOTE: The error message, "character string is not in a standard 
unambiguous format" is almost appropriate:  In this case, it's clear 
that "09/16/2019" refers to month 09, day 16, and year 2019.  However, 
if it were "09/06/2019", we would not know if it were September 6 or 9 
June of 2019.  If it were  "09/06/08", we would have the added 
possibility with the year first, followed by month and day:  June 8, 
2009.  This ambiguity is resolved most forcefully by ISO 8601.


	  Hope this helps.
	  Spencer Graves


On 11/4/21 5:30 PM, PIKAL Petr wrote:
> Hi
> 
> Not sure why the date format was changed but if I am correct R do not read dates as dates but as character vector. You need to transfer such columns to dates by asDate. The error is probably from your use two asDate commands.
> 
> Cheers
> Petr
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Val
> Sent: Thursday, November 4, 2021 10:43 PM
> To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
> Subject: [R] Date
> 
> IHi All, l,
> 
> I am  reading a csv file  and one of the columns is named as  "mydate"
>   with this form, 2019-09-16.
> 
> I am reading this file as
> 
> dat=read.csv("myfile.csv")
>       the structure of the data looks like as follow
> 
> str(dat)
> mydate : chr  "09/16/2019" "02/21/2021" "02/22/2021" "10/11/2017" ...
> 
> Please note the format  has  changed from YYYY-mm-dd  to mm/dd/YYYY
> When I tried to change this   as a Date using
> 
> as.Date(as.Date(mydate,     format="%m/%d/%Y" )
> I am getting this error message
>      Error in charToDate(x) :
>        characte string is not in a standard unambiguous format
> 
> My question is,
> 1. how can I read the file as it is (i.e., without changing the date format) ?
> 2. why does R change the date format?
> 
> Thank you,
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From v@|kremk @end|ng |rom gm@||@com  Fri Nov  5 01:30:22 2021
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Thu, 4 Nov 2021 19:30:22 -0500
Subject: [R] Date
In-Reply-To: <810BF9BB-B15E-414F-8717-1EC6E43BAE29@dcn.davis.ca.us>
References: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
 <810BF9BB-B15E-414F-8717-1EC6E43BAE29@dcn.davis.ca.us>
Message-ID: <CAJOiR6bDBxxCdx9h2W2yJt4BnN1iSA_deLSeboY_NembP=sfNQ@mail.gmail.com>

Jeff,

The date from y data file looks like as follow in the Linux environment,
My_date
2019-09-16
2021-02-21
2021-02-22
2017-10-11
2017-10-10
2018-11-11
2017-10-27
2017-10-30
2019-05-20

On Thu, Nov 4, 2021 at 5:00 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> You are claiming behavior that is not something R does, but is something Excel does constantly.
>
> Compare what your data file looks like using a text editor with what R has imported. Absolutely do not use a spreadsheet program to do this.
>
> On November 4, 2021 2:43:25 PM PDT, Val <valkremk at gmail.com> wrote:
> >IHi All, l,
> >
> >I am  reading a csv file  and one of the columns is named as  "mydate"
> > with this form, 2019-09-16.
> >
> >I am reading this file as
> >
> >dat=read.csv("myfile.csv")
> >     the structure of the data looks like as follow
> >
> >str(dat)
> >mydate : chr  "09/16/2019" "02/21/2021" "02/22/2021" "10/11/2017" ...
> >
> >Please note the format  has  changed from YYYY-mm-dd  to mm/dd/YYYY
> >When I tried to change this   as a Date using
> >
> >as.Date(as.Date(mydate,     format="%m/%d/%Y" )
> >I am getting this error message
> >    Error in charToDate(x) :
> >      characte string is not in a standard unambiguous format
> >
> >My question is,
> >1. how can I read the file as it is (i.e., without changing the date format) ?
> >2. why does R change the date format?
> >
> >Thank you,
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Nov  5 01:58:45 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 04 Nov 2021 17:58:45 -0700
Subject: [R] Date
In-Reply-To: <CAJOiR6bDBxxCdx9h2W2yJt4BnN1iSA_deLSeboY_NembP=sfNQ@mail.gmail.com>
References: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
 <810BF9BB-B15E-414F-8717-1EC6E43BAE29@dcn.davis.ca.us>
 <CAJOiR6bDBxxCdx9h2W2yJt4BnN1iSA_deLSeboY_NembP=sfNQ@mail.gmail.com>
Message-ID: <2B507EC8-7F30-493B-9214-BDB60BAEDA14@dcn.davis.ca.us>

Then you are looking at a different file... check your filenames. You have imported the column as character, and R has not yet recognized that it is supposed to be a date, so it can only show what it found.

You will almost certainly find your error if you make a reproducible example.

On November 4, 2021 5:30:22 PM PDT, Val <valkremk at gmail.com> wrote:
>Jeff,
>
>The date from y data file looks like as follow in the Linux environment,
>My_date
>2019-09-16
>2021-02-21
>2021-02-22
>2017-10-11
>2017-10-10
>2018-11-11
>2017-10-27
>2017-10-30
>2019-05-20
>
>On Thu, Nov 4, 2021 at 5:00 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> You are claiming behavior that is not something R does, but is something Excel does constantly.
>>
>> Compare what your data file looks like using a text editor with what R has imported. Absolutely do not use a spreadsheet program to do this.
>>
>> On November 4, 2021 2:43:25 PM PDT, Val <valkremk at gmail.com> wrote:
>> >IHi All, l,
>> >
>> >I am  reading a csv file  and one of the columns is named as  "mydate"
>> > with this form, 2019-09-16.
>> >
>> >I am reading this file as
>> >
>> >dat=read.csv("myfile.csv")
>> >     the structure of the data looks like as follow
>> >
>> >str(dat)
>> >mydate : chr  "09/16/2019" "02/21/2021" "02/22/2021" "10/11/2017" ...
>> >
>> >Please note the format  has  changed from YYYY-mm-dd  to mm/dd/YYYY
>> >When I tried to change this   as a Date using
>> >
>> >as.Date(as.Date(mydate,     format="%m/%d/%Y" )
>> >I am getting this error message
>> >    Error in charToDate(x) :
>> >      characte string is not in a standard unambiguous format
>> >
>> >My question is,
>> >1. how can I read the file as it is (i.e., without changing the date format) ?
>> >2. why does R change the date format?
>> >
>> >Thank you,
>> >
>> >______________________________________________
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >https://stat.ethz.ch/mailman/listinfo/r-help
>> >PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> >and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.


From @tephen66 @end|ng |rom gm@||@com  Fri Nov  5 08:07:18 2021
From: @tephen66 @end|ng |rom gm@||@com (Stephen HonKit Wong)
Date: Fri, 5 Nov 2021 15:07:18 +0800
Subject: [R] heatmap ploting
Message-ID: <CAF4LHoh_jUGkX4=Xc_uuCRBYvKVC7n5O2oZDQwdCxRjs_yGaUg@mail.gmail.com>

Dear Community,

I have an example heatmap plot in this link
<https://drive.google.com/file/d/15ePaR0gC2IKXm2gkeGylZ4vM_MEsWyW0/view?usp=sharing>
which was generated by java I believe, I want to make a similar plot in R.
Any clues on how to do it? Thanks.

The column is a gene, and the rows are different cancer types with
different numbers of patients. The heatmap value represents the expression
value, such as FPKM, which can range from 0 to over several hundreds.


Much thanks!

Steve

	[[alternative HTML version deleted]]


From dh@rm@ @end|ng |rom metr|cuk@com  Fri Nov  5 07:59:21 2021
From: dh@rm@ @end|ng |rom metr|cuk@com (Shrinivas Dharma)
Date: Fri, 5 Nov 2021 12:29:21 +0530
Subject: [R] Please help me debugg
Message-ID: <CA+m+UXbor_5M9gOV_98UFm0cMYfMJrfD-19z5F_J9n1zirHDag@mail.gmail.com>

I am trying to run the following double loop which  I have written but it
is not running.
Unable to get my head around the mistake. Please try to spot the bug and
help

> for(i in 1:122){
+ for(j in 1:68){
+ if(V(FriendGraph)$name[i]==names[j]){
+ gender_vector[i]<-sex[j]
+ break;}
+ else{gender_vector[i]<-NA}
+ } }

*Error in `[.data.frame`(sex, j) : undefined columns selectedCalled from:
`[.data.frame`(sex, j)*
Browse[1]>

-- 
Warm Regards,
*Shrinivas Dharmadhikari*

Metric Consultancy Ltd.
91, Florida Estate,
Keshavanagar, Mundhwa
Pune-411036.

M: +91 98 230 09850
E : dharma at metricuk.com
www.metricglobal.com

*P* Please consider the environment and do not print this email unless
absolutely necessary.

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Nov  5 09:24:22 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 5 Nov 2021 11:24:22 +0300
Subject: [R] Please help me debugg
In-Reply-To: <CA+m+UXbor_5M9gOV_98UFm0cMYfMJrfD-19z5F_J9n1zirHDag@mail.gmail.com>
References: <CA+m+UXbor_5M9gOV_98UFm0cMYfMJrfD-19z5F_J9n1zirHDag@mail.gmail.com>
Message-ID: <20211105112422.666a99ea@Tarkus>

On Fri, 5 Nov 2021 12:29:21 +0530
Shrinivas Dharma <dharma at metricuk.com> wrote:

> I am trying to run the following double loop which  I have written
> but it is not running.

Thanks for providing the code, but it's much easier to help you if you
provide the data, too. Use dput(head(...)) to make it easy for us to
copy-paste the data.

> Unable to get my head around the mistake. Please try to spot the bug
> and help

> > for(i in 1:122){  
> + for(j in 1:68){
> + if(V(FriendGraph)$name[i]==names[j]){
> + gender_vector[i]<-sex[j]
> + break;}
> + else{gender_vector[i]<-NA}
> + } }

> Error in `[.data.frame`(sex, j) : undefined columns selected

sex[j] extracts the `j`th column out of the `sex` data frame. Does
`sex` contain 68 columns? If you want the `j`th row, use sex[j,].

Also, it may help to use merge() and have the R language do some of the
work for you, if you organise your `names` and `sex` into a single
data.frame to merge V(FriendGraph) with.

Additionally, you might save some of the execution time if you move the
V(FriendGraph) calculation out of the loop.

> 	[[alternative HTML version deleted]]

P.S. Your post came across mostly fine, but please compose your mail in
plain text, not HTML. We only see the plain text version, and in many
cases, the mailers horribly mangle the post when they automatically
generate it from the HTML message.

-- 
Best regards,
Ivan


From drj|m|emon @end|ng |rom gm@||@com  Fri Nov  5 09:49:44 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 5 Nov 2021 19:49:44 +1100
Subject: [R] heatmap ploting
In-Reply-To: <CAF4LHoh_jUGkX4=Xc_uuCRBYvKVC7n5O2oZDQwdCxRjs_yGaUg@mail.gmail.com>
References: <CAF4LHoh_jUGkX4=Xc_uuCRBYvKVC7n5O2oZDQwdCxRjs_yGaUg@mail.gmail.com>
Message-ID: <CA+8X3fUcLWRHYgOqpTZ5hCVSFgSvuSnd+bFG-ciboydfM96SnQ@mail.gmail.com>

Hi Steve,
That plot looks to me as though a value-to-color transformation is
performed on the logarithm of gene expression. The scale bar can be
roughly reproduced like this:

library(plotrix)
plot(0,xlim=c(0,3))
gradient.rect(0,-0.1,3,0.1,
 col=color.scale(seq(0,3,0.1),
 c(0.7,1,1,1,0.7,0.2),
 c(0.7,1,0,0,0,0),
 c(1,0,0,0.1,0.7,0.2)))
text(0:3,rep(0.2,3),c(0,10,100,1000))

The horizontal lengths of the stacked bars of the plot can then be
adjusted to the number of subjects in a given bin of log gene
expressions. A tricky plot, but it can be done in R.

Jim

On Fri, Nov 5, 2021 at 6:08 PM Stephen HonKit Wong <stephen66 at gmail.com> wrote:
>
> Dear Community,
>
> I have an example heatmap plot in this link
> <https://drive.google.com/file/d/15ePaR0gC2IKXm2gkeGylZ4vM_MEsWyW0/view?usp=sharing>
> which was generated by java I believe, I want to make a similar plot in R.
> Any clues on how to do it? Thanks.
>
> The column is a gene, and the rows are different cancer types with
> different numbers of patients. The heatmap value represents the expression
> value, such as FPKM, which can range from 0 to over several hundreds.
>
>
> Much thanks!
>
> Steve
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Nov  5 16:25:27 2021
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 5 Nov 2021 16:25:27 +0100
Subject: [R] How to select single table with ODB package
Message-ID: <CAMk+s2Q+udXcNYKWpx5g2STd3A=YRoa90_7nu_4gXX6Phb+pvQ@mail.gmail.com>

Hello,
I am connecting R to a libreoffice-generated database (.odb) using the
ODB package.
I would like to link a dataframe to a specific table, but I cannot
manage to extract a given table:
```
> db =  odb.open(".../LOdatabase.odb", jarFile = NULL)
> odb.tables(db)
$demographic
field.name field.type data.type     name                  comment
1          ID    INTEGER   numeric       ID Unique identifier (auto)
2    Study_ID    INTEGER   numeric Study_ID            link to STUDY
[...]
> sqlQuery = "FROM TABLE demographic SELECT ALL"
> odb.read(db, sqlQuery, stringsAsFactors = FALSE, check.names = FALSE,
+ encode = TRUE, autoLogical = TRUE)
Error: Error while executing SQL query  : "Unable to retrieve JDBC result set
  JDBC ERROR: Unexpected token: FROM in statement [FROM]
  Statement: FROM TABLE demographic SELECT ALL"
> sqlQuery = "SELECT * FROM demographic"
> odb.read(db, sqlQuery, stringsAsFactors = FALSE, check.names = FALSE,
+ encode = TRUE, autoLogical = TRUE)
Error: Error while executing SQL query  : "Unable to retrieve JDBC result set
  JDBC ERROR: Table not found in statement [SELECT * FROM demographic]
  Statement: SELECT * FROM demographic"
> sqlQuery = "SELECT * FROM db$demographic"
> odb.read(db, sqlQuery, stringsAsFactors = FALSE, check.names = FALSE,
+ encode = TRUE, autoLogical = TRUE)
Error: Error while executing SQL query  : "Unable to retrieve JDBC result set
  JDBC ERROR: Table not found in statement [SELECT * FROM db$demographic]
  Statement: SELECT * FROM db$demographic"
```
What is the correct syntax?
Thank you


From v@|kremk @end|ng |rom gm@||@com  Fri Nov  5 17:13:59 2021
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 5 Nov 2021 11:13:59 -0500
Subject: [R] Date
In-Reply-To: <2B507EC8-7F30-493B-9214-BDB60BAEDA14@dcn.davis.ca.us>
References: <CAJOiR6YHWa0biFAgR-e+RkbNUyKuMr+7u1Z4A-KObS+iVwRW_w@mail.gmail.com>
 <810BF9BB-B15E-414F-8717-1EC6E43BAE29@dcn.davis.ca.us>
 <CAJOiR6bDBxxCdx9h2W2yJt4BnN1iSA_deLSeboY_NembP=sfNQ@mail.gmail.com>
 <2B507EC8-7F30-493B-9214-BDB60BAEDA14@dcn.davis.ca.us>
Message-ID: <CAJOiR6bo4a3kqxmLGb1ao8CbafoTV7t+i=E8-pKXE2pzSv+F6g@mail.gmail.com>

Thank you All.
The issue was not reading different file. I just mistyped the column
name, instead of typing My_date I typed mydate in the email.  The
problem is solved by using this
    dat=read.csv("myfile.csv",stringsAsFactors=FALS)
suggested by Jim.

On Thu, Nov 4, 2021 at 7:58 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Then you are looking at a different file... check your filenames. You have imported the column as character, and R has not yet recognized that it is supposed to be a date, so it can only show what it found.
>
> You will almost certainly find your error if you make a reproducible example.
>
> On November 4, 2021 5:30:22 PM PDT, Val <valkremk at gmail.com> wrote:
> >Jeff,
> >
> >The date from y data file looks like as follow in the Linux environment,
> >My_date
> >2019-09-16
> >2021-02-21
> >2021-02-22
> >2017-10-11
> >2017-10-10
> >2018-11-11
> >2017-10-27
> >2017-10-30
> >2019-05-20
> >
> >On Thu, Nov 4, 2021 at 5:00 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> >>
> >> You are claiming behavior that is not something R does, but is something Excel does constantly.
> >>
> >> Compare what your data file looks like using a text editor with what R has imported. Absolutely do not use a spreadsheet program to do this.
> >>
> >> On November 4, 2021 2:43:25 PM PDT, Val <valkremk at gmail.com> wrote:
> >> >IHi All, l,
> >> >
> >> >I am  reading a csv file  and one of the columns is named as  "mydate"
> >> > with this form, 2019-09-16.
> >> >
> >> >I am reading this file as
> >> >
> >> >dat=read.csv("myfile.csv")
> >> >     the structure of the data looks like as follow
> >> >
> >> >str(dat)
> >> >mydate : chr  "09/16/2019" "02/21/2021" "02/22/2021" "10/11/2017" ...
> >> >
> >> >Please note the format  has  changed from YYYY-mm-dd  to mm/dd/YYYY
> >> >When I tried to change this   as a Date using
> >> >
> >> >as.Date(as.Date(mydate,     format="%m/%d/%Y" )
> >> >I am getting this error message
> >> >    Error in charToDate(x) :
> >> >      characte string is not in a standard unambiguous format
> >> >
> >> >My question is,
> >> >1. how can I read the file as it is (i.e., without changing the date format) ?
> >> >2. why does R change the date format?
> >> >
> >> >Thank you,
> >> >
> >> >______________________________________________
> >> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> >https://stat.ethz.ch/mailman/listinfo/r-help
> >> >PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> >and provide commented, minimal, self-contained, reproducible code.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
>
> --
> Sent from my phone. Please excuse my brevity.


From m@yo5040 @end|ng |rom co|or@do@edu  Fri Nov  5 15:59:07 2021
From: m@yo5040 @end|ng |rom co|or@do@edu (Mark Don Young)
Date: Fri, 5 Nov 2021 08:59:07 -0600
Subject: [R] Which version of R install for mac
Message-ID: <CAKyP-WJj9-i3ga_Dfz4vXR95WBdnnDuNsfKUwE2MEuiC31pOfA@mail.gmail.com>

I am having trouble finding a version of R install compatible with my mac.
I have an older Macbook pro 2016 with the latest version of Big Slur 11.6.
Intel core i5 2.9 Ghz-Dual-Core.
Is there a version of R compatible with my computer?
Thanks
Mark

	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @end|ng |rom me@com  Fri Nov  5 18:02:25 2021
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Fri, 5 Nov 2021 13:02:25 -0400
Subject: [R] Which version of R install for mac
In-Reply-To: <CAKyP-WJj9-i3ga_Dfz4vXR95WBdnnDuNsfKUwE2MEuiC31pOfA@mail.gmail.com>
References: <CAKyP-WJj9-i3ga_Dfz4vXR95WBdnnDuNsfKUwE2MEuiC31pOfA@mail.gmail.com>
Message-ID: <103a513a-108b-4739-5dde-e05fce18059a@me.com>

Hi,

Not sure where you have been looking, but on CRAN:

https://cran.r-project.org/index.html

there is a box at the top of the main page to Download R for macOS, 
which brings you to:

https://cran.r-project.org/bin/macosx/

The first version there, 4.1.2, which is the pkg binary for macOS 10.13 
and higher for Intel CPUs is the one that you want.

Note that there is also a macOS specific FAQ here:

https://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html

and finally, a macOS specific help list here:

https://stat.ethz.ch/mailman/listinfo/r-sig-mac

You will also likely want to install XQuartz, which is available here:

https://www.xquartz.org

Regards,

Marc Schwartz


Mark Don Young wrote on 11/5/21 10:59 AM:
> I am having trouble finding a version of R install compatible with my mac.
> I have an older Macbook pro 2016 with the latest version of Big Slur 11.6.
> Intel core i5 2.9 Ghz-Dual-Core.
> Is there a version of R compatible with my computer?
> Thanks
> Mark


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Fri Nov  5 21:16:00 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Fri, 5 Nov 2021 20:16:00 +0000 (UTC)
Subject: [R] bootstrap confidence intervals
References: <1134657224.1859338.1636143360487.ref@mail.yahoo.com>
Message-ID: <1134657224.1859338.1636143360487@mail.yahoo.com>

Dear R-experts,

Here is a toy example. How can I get the bootstrap confidence intervals working ?

Many thanks for your help

############################
library(DescTools)
library(boot)
?
A=c(488,437,500,449,364)
dat<-data.frame(A)
med<-function(d,i) { 
temp<-d[i,]
HodgesLehmann(A)
}
boot.out<-boot(data=dat,statistic=med,R=100)
HodgesLehmann(boot.out$t)

boot.ci(boot.out,type="all")
############################


From t@n@@@ @end|ng |rom gm@||@com  Fri Nov  5 23:00:57 2021
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Fri, 5 Nov 2021 15:00:57 -0700
Subject: [R] extracting a R object from an R image
Message-ID: <CA+JEM02rME49y6jSDHyQc049aefexHV3hH5qzoYo8LkVJJm5eA@mail.gmail.com>

Dear all,

I saved my work in a Rimage that contains multiple objects ;

the objects were generated with Monocle3 :

https://cole-trapnell-lab.github.io/monocle3/docs/starting/

one object is called CDS.

How shall I extract this object CDS (that has a complex structure) from the
R image ?

thank you,

Bogdan

	[[alternative HTML version deleted]]


From t@n@@@ @end|ng |rom gm@||@com  Fri Nov  5 23:07:56 2021
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Fri, 5 Nov 2021 15:07:56 -0700
Subject: [R] Error in loadNamespace(i, c(lib.loc, .libPaths())
Message-ID: <CA+JEM02MwZ0vVOPYC7u7-zoq8wOKsUHwKfceHtzMoZv1nJPvMA@mail.gmail.com>

Dear all,

 i am using Monocle3 in order to study disease development by single-cell
technologies :

https://cole-trapnell-lab.github.io/monocle3/

When I am installing additional packages like "spData" from

https://nowosad.github.io/spData/, I am getting the message :

Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) :
  here is no package called ?spData?

How shall I correct it ?

The installation is in a R/4.0.3 that runs on a SLURM cluster by the system
administrator.

Occasionally, additional packages in R are installed in my home folder :
/home/tanasa/

Thank you !

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Nov  5 23:26:49 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 5 Nov 2021 15:26:49 -0700
Subject: [R] extracting a R object from an R image
In-Reply-To: <CA+JEM02rME49y6jSDHyQc049aefexHV3hH5qzoYo8LkVJJm5eA@mail.gmail.com>
References: <CA+JEM02rME49y6jSDHyQc049aefexHV3hH5qzoYo8LkVJJm5eA@mail.gmail.com>
Message-ID: <CAGxFJbRp2M1fwmYQX7MN_z9S5YmRu9QUDQKmQUw0Sw2RixvO-g@mail.gmail.com>

You can't. You can only save and load whole .RData files. You can, of
course, save and load separate R objects in separate files. But note
in ?save.image:

"For saving single R objects, saveRDS() is mostly preferable to
save(), notably because of the functional nature of readRDS(), as
opposed to load(). "

You may wish to search on "data serialization" (e.g. on Wikipedia) or
similar to better understand the underlying ideas.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Nov 5, 2021 at 3:01 PM Bogdan Tanasa <tanasa at gmail.com> wrote:
>
> Dear all,
>
> I saved my work in a Rimage that contains multiple objects ;
>
> the objects were generated with Monocle3 :
>
> https://cole-trapnell-lab.github.io/monocle3/docs/starting/
>
> one object is called CDS.
>
> How shall I extract this object CDS (that has a complex structure) from the
> R image ?
>
> thank you,
>
> Bogdan
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Nov  6 00:45:02 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 05 Nov 2021 16:45:02 -0700
Subject: [R] extracting a R object from an R image
In-Reply-To: <CAGxFJbRp2M1fwmYQX7MN_z9S5YmRu9QUDQKmQUw0Sw2RixvO-g@mail.gmail.com>
References: <CA+JEM02rME49y6jSDHyQc049aefexHV3hH5qzoYo8LkVJJm5eA@mail.gmail.com>
 <CAGxFJbRp2M1fwmYQX7MN_z9S5YmRu9QUDQKmQUw0Sw2RixvO-g@mail.gmail.com>
Message-ID: <6061D251-5542-4687-A7B4-4FE7B0575C4F@dcn.davis.ca.us>

IMO you are being a bit too literal. It is absolutely possible to load the file into a dedicated environment and use the $ or [[]] extraction operator to access a specific object in that environment.

?load
?new.env

Or, you can attach the file, copy to a new variable, and detach. (see examples in ?load)


On November 5, 2021 3:26:49 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>You can't. You can only save and load whole .RData files. You can, of
>course, save and load separate R objects in separate files. But note
>in ?save.image:
>
>"For saving single R objects, saveRDS() is mostly preferable to
>save(), notably because of the functional nature of readRDS(), as
>opposed to load(). "
>
>You may wish to search on "data serialization" (e.g. on Wikipedia) or
>similar to better understand the underlying ideas.
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Fri, Nov 5, 2021 at 3:01 PM Bogdan Tanasa <tanasa at gmail.com> wrote:
>>
>> Dear all,
>>
>> I saved my work in a Rimage that contains multiple objects ;
>>
>> the objects were generated with Monocle3 :
>>
>> https://cole-trapnell-lab.github.io/monocle3/docs/starting/
>>
>> one object is called CDS.
>>
>> How shall I extract this object CDS (that has a complex structure) from the
>> R image ?
>>
>> thank you,
>>
>> Bogdan
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Nov  6 00:51:08 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 05 Nov 2021 16:51:08 -0700
Subject: [R] Error in loadNamespace(i, c(lib.loc, .libPaths())
In-Reply-To: <CA+JEM02MwZ0vVOPYC7u7-zoq8wOKsUHwKfceHtzMoZv1nJPvMA@mail.gmail.com>
References: <CA+JEM02MwZ0vVOPYC7u7-zoq8wOKsUHwKfceHtzMoZv1nJPvMA@mail.gmail.com>
Message-ID: <6C2254A7-4848-4868-944E-9BE4CB22AC1E@dcn.davis.ca.us>

You are using github packages. Post your question on the corresponding packege Issues page on GitHub. Such questions are not related to the topic of the R language (read the Posting Guide, which also indicates that this plain text mailing list will strip formatting from your emails, so do send plain text in the future).

On November 5, 2021 3:07:56 PM PDT, Bogdan Tanasa <tanasa at gmail.com> wrote:
>Dear all,
>
> i am using Monocle3 in order to study disease development by single-cell
>technologies :
>
>https://cole-trapnell-lab.github.io/monocle3/
>
>When I am installing additional packages like "spData" from
>
>https://nowosad.github.io/spData/, I am getting the message :
>
>Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) :
>  here is no package called ?spData?
>
>How shall I correct it ?
>
>The installation is in a R/4.0.3 that runs on a SLURM cluster by the system
>administrator.
>
>Occasionally, additional packages in R are installed in my home folder :
>/home/tanasa/
>
>Thank you !
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Nov  6 02:36:46 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 5 Nov 2021 18:36:46 -0700
Subject: [R] bootstrap confidence intervals
In-Reply-To: <1134657224.1859338.1636143360487@mail.yahoo.com>
References: <1134657224.1859338.1636143360487.ref@mail.yahoo.com>
 <1134657224.1859338.1636143360487@mail.yahoo.com>
Message-ID: <99d98f41-1078-8ca9-d5cb-3b7b11c28c2b@comcast.net>


On 11/5/21 1:16 PM, varin sacha via R-help wrote:
> Dear R-experts,
>
> Here is a toy example. How can I get the bootstrap confidence intervals working ?
>
> Many thanks for your help
>
> ############################
> library(DescTools)
> library(boot)
>   
> A=c(488,437,500,449,364)
> dat<-data.frame(A)
> med<-function(d,i) {
> temp<-d[i,]
# shouldn't this be

HodgesLehmann(temp)  # ???

# makes no sense to extract a bootstrap sample and then return a value calculated on the full dataset

> HodgesLehmann(A)
> }
> boot.out<-boot(data=dat,statistic=med,R=100)

I would have imagined that one could simply extract the quantiles of the 
HodgesLehmann at the appropriate tail probabilities:


quantile(boot.out$t, c(0.025, 0.975))
 ??? 2.5%??? 97.5%
400.5000 488.0001


It doesn't seem reasonable to have bootstrap CI's that are much tighter 
than the estimates on the original data:


 > HodgesLehmann(boot.out$t, conf.level=0.95)
 ?? est lwr.ci upr.ci
449.75 444.25 453.25??? # seems to be cheating
 > HodgesLehmann(dat$A, conf.level=0.95)
 ?? est lwr.ci upr.ci
 ?? 449??? 364??? 500??? # Much closer to the quantiles above


-- 

David.

> HodgesLehmann(boot.out$t)
>
> boot.ci(boot.out,type="all")
> ############################
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Nov  6 08:38:37 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 6 Nov 2021 07:38:37 +0000
Subject: [R] bootstrap confidence intervals
In-Reply-To: <99d98f41-1078-8ca9-d5cb-3b7b11c28c2b@comcast.net>
References: <1134657224.1859338.1636143360487.ref@mail.yahoo.com>
 <1134657224.1859338.1636143360487@mail.yahoo.com>
 <99d98f41-1078-8ca9-d5cb-3b7b11c28c2b@comcast.net>
Message-ID: <674b7ef8-d3f7-23da-265d-d2ccc88afcdc@sapo.pt>

Hello,


?s 01:36 de 06/11/21, David Winsemius escreveu:
> 
> On 11/5/21 1:16 PM, varin sacha via R-help wrote:
>> Dear R-experts,
>>
>> Here is a toy example. How can I get the bootstrap confidence 
>> intervals working ?
>>
>> Many thanks for your help
>>
>> ############################
>> library(DescTools)
>> library(boot)
>> A=c(488,437,500,449,364)
>> dat<-data.frame(A)
>> med<-function(d,i) {
>> temp<-d[i,]
> # shouldn't this be
> 
> HodgesLehmann(temp)? # ???
> 
> # makes no sense to extract a bootstrap sample and then return a value 
> calculated on the full dataset
> 
>> HodgesLehmann(A)
>> }
>> boot.out<-boot(data=dat,statistic=med,R=100)
> 
> I would have imagined that one could simply extract the quantiles of the 
> HodgesLehmann at the appropriate tail probabilities:
> 
> 
> quantile(boot.out$t, c(0.025, 0.975))
>  ??? 2.5%??? 97.5%
> 400.5000 488.0001
> 
> 
> It doesn't seem reasonable to have bootstrap CI's that are much tighter 
> than the estimates on the original data:
> 
> 
>  > HodgesLehmann(boot.out$t, conf.level=0.95)
>  ?? est lwr.ci upr.ci
> 449.75 444.25 453.25??? # seems to be cheating
>  > HodgesLehmann(dat$A, conf.level=0.95)
>  ?? est lwr.ci upr.ci
>  ?? 449??? 364??? 500??? # Much closer to the quantiles above
> 
> 


This cheating comes from wilcox.test, which is called by HodgesLehman to 
do the calculations. Below is a function calling wilcox.test directly, 
and the bootstrapped intervals are always equal, no matter what way they 
are computed.



A <- c(488, 437, 500, 449, 364)
dat <- data.frame(A)

med <- function(d,i) {
   temp <- d[i, ]
   HodgesLehmann(temp)
}
med2 <- function(d, i, conf.level = 0.95){
   temp <- d[i, ]
   wilcox.test(temp,
               conf.int = TRUE,
               conf.level = Coalesce(conf.level, 0.8),
               exact = FALSE)$estimate
}

set.seed(2021)
boot.out <- boot(data = dat, statistic = med, R = 100)
set.seed(2021)
boot.out2 <- boot(data = dat, statistic = med2, R = 100, conf.level = 0.95)

HodgesLehmann(boot.out$t)
#[1] 452.75
HodgesLehmann(boot.out2$t)
#[1] 452.75

HodgesLehmann(boot.out$t, conf.level = 0.95)
#     est   lwr.ci   upr.ci
#452.7500 447.2500 458.7499
HodgesLehmann(boot.out2$t, conf.level = 0.95)
#     est   lwr.ci   upr.ci
#452.7500 447.2500 458.7499

quantile(boot.out$t, c(0.025, 0.975))
# 2.5% 97.5%
#400.5 494.0
quantile(boot.out2$t, c(0.025, 0.975))
# 2.5% 97.5%
#400.5 494.0

boot.ci(boot.out, type = "all")    # CI's are
boot.ci(boot.out2, type = "all")   # the same



But the bootstrap statistic vectors t are different:



identical(boot.out$t, boot.out2$t)
#[1] FALSE
all.equal(boot.out$t, boot.out2$t)
#[1] "Mean relative difference: 8.93281e-08"




I haven't time to check what is going on in wilcox.test, its source is a 
bit involved, with many if/else statements, maybe I'll come back to this 
but no promises made.


Hope this helps,

Rui Barradas


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Sat Nov  6 10:10:20 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Sat, 6 Nov 2021 10:10:20 +0100
Subject: [R] extracting a R object from an R image
In-Reply-To: <6061D251-5542-4687-A7B4-4FE7B0575C4F@dcn.davis.ca.us>
References: <CA+JEM02rME49y6jSDHyQc049aefexHV3hH5qzoYo8LkVJJm5eA@mail.gmail.com>
 <CAGxFJbRp2M1fwmYQX7MN_z9S5YmRu9QUDQKmQUw0Sw2RixvO-g@mail.gmail.com>
 <6061D251-5542-4687-A7B4-4FE7B0575C4F@dcn.davis.ca.us>
Message-ID: <24966.18044.475233.922079@stat.math.ethz.ch>

>>>>> Jeff Newmiller 
>>>>>     on Fri, 05 Nov 2021 16:45:02 -0700 writes:

    > IMO you are being a bit too literal. It is absolutely possible to load the file into a dedicated environment and use the $ or [[]] extraction operator to access a specific object in that environment.
    > ?load
    > ?new.env

    > Or, you can attach the file, copy to a new variable, and detach. (see examples in ?load)

Exactly: In the eyes of most R experts, it is the only useful use of attach():

   attach(".RData") 
   ls.str(2) # -> get alevel-1 str(.) of the objects in your image


    > On November 5, 2021 3:26:49 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
    >> You can't. You can only save and load whole .RData files. You can, of
    >> course, save and load separate R objects in separate files. But note
    >> in ?save.image:
    >> 
    >> "For saving single R objects, saveRDS() is mostly preferable to
    >> save(), notably because of the functional nature of readRDS(), as
    >> opposed to load(). "
    >> 
    >> You may wish to search on "data serialization" (e.g. on Wikipedia) or
    >> similar to better understand the underlying ideas.
    >> 
    >> Bert Gunter
    >> 
    >> "The trouble with having an open mind is that people keep coming along
    >> and sticking things into it."
    >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
    >> 
    >> Bert Gunter
    >> 
    >> "The trouble with having an open mind is that people keep coming along
    >> and sticking things into it."
    >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
    >> 
    >> 
    >> On Fri, Nov 5, 2021 at 3:01 PM Bogdan Tanasa <tanasa at gmail.com> wrote:
    >>> 
    >>> Dear all,
    >>> 
    >>> I saved my work in a Rimage that contains multiple objects ;
    >>> 
    >>> the objects were generated with Monocle3 :
    >>> 
    >>> https://cole-trapnell-lab.github.io/monocle3/docs/starting/
    >>> 
    >>> one object is called CDS.
    >>> 
    >>> How shall I extract this object CDS (that has a complex structure) from the
    >>> R image ?
    >>> 
    >>> thank you,
    >>> 
    >>> Bogdan
    >>> 
    >>> [[alternative HTML version deleted]]
    >>> 
    >>> ______________________________________________
    >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >>> https://stat.ethz.ch/mailman/listinfo/r-help
    >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >>> and provide commented, minimal, self-contained, reproducible code.
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >> and provide commented, minimal, self-contained, reproducible code.

    > -- 
    > Sent from my phone. Please excuse my brevity.

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Nov  7 01:35:08 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 7 Nov 2021 13:35:08 +1300
Subject: [R] Environmental oddity.
Message-ID: <20211107133508.5c134a28@rolf-Latitude-E7470>


I have two functions which appear to differ only in their environments.
They look like:

> d1
> function (x, mean = 0, sd = 1, log = FALSE) 
> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
> <environment: namespace:stats>

and

> d2
> function (x, mean = 0, sd = 1, log = FALSE) 
> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd

Typing "environment(d1)" gives

> <environment: namespace:stats>

and typing "environment(d2)" gives

> <environment: R_GlobalEnv>

The d2() function however gives an incorrect result:

> d1(1,0,3,TRUE)
> [1] -0.2962963
> d2(1,0,3,TRUE)
> [1] -0.8888889

In d2() the result of the if() statement does not get divided
by the final "sd" whereas in d1() it does (which is the desired/correct
result).

Of course the code is ridiculously kludgy (it was produced by "symbolic
differentiation").  That's not the point.  I'm just curious (idly?) as
to *why* the association of the namespace:stats environment with d1()
causes it to "do the right thing".

Can anyone give me any insight?  Ta.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Nov  7 04:03:06 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 06 Nov 2021 20:03:06 -0700
Subject: [R] Environmental oddity.
In-Reply-To: <20211107133508.5c134a28@rolf-Latitude-E7470>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
Message-ID: <8F8471FB-42BA-432B-8EF2-1BF7AC7D20A2@dcn.davis.ca.us>

In general, the search for symbols for a function Z in a package Y will span only those namespaces that the package Y specifies. The search for symbols in a function whose parent environment is the global environment will start there, thereby opening the door to find masking versions of functions instead of the intended package function.

Kind of hard to investigate your case from here.

On November 6, 2021 5:35:08 PM PDT, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>I have two functions which appear to differ only in their environments.
>They look like:
>
>> d1
>> function (x, mean = 0, sd = 1, log = FALSE) 
>> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>> <environment: namespace:stats>
>
>and
>
>> d2
>> function (x, mean = 0, sd = 1, log = FALSE) 
>> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>
>Typing "environment(d1)" gives
>
>> <environment: namespace:stats>
>
>and typing "environment(d2)" gives
>
>> <environment: R_GlobalEnv>
>
>The d2() function however gives an incorrect result:
>
>> d1(1,0,3,TRUE)
>> [1] -0.2962963
>> d2(1,0,3,TRUE)
>> [1] -0.8888889
>
>In d2() the result of the if() statement does not get divided
>by the final "sd" whereas in d1() it does (which is the desired/correct
>result).
>
>Of course the code is ridiculously kludgy (it was produced by "symbolic
>differentiation").  That's not the point.  I'm just curious (idly?) as
>to *why* the association of the namespace:stats environment with d1()
>causes it to "do the right thing".
>
>Can anyone give me any insight?  Ta.
>
>cheers,
>
>Rolf Turner
>

-- 
Sent from my phone. Please excuse my brevity.


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sun Nov  7 04:32:36 2021
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sun, 7 Nov 2021 09:02:36 +0530
Subject: [R] Environmental oddity.
In-Reply-To: <20211107133508.5c134a28@rolf-Latitude-E7470>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
Message-ID: <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>

On Sun, Nov 7, 2021 at 6:05 AM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> I have two functions which appear to differ only in their environments.
> They look like:
>
> > d1
> > function (x, mean = 0, sd = 1, log = FALSE)
> > (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
> > <environment: namespace:stats>
>
> and
>
> > d2
> > function (x, mean = 0, sd = 1, log = FALSE)
> > (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>
> Typing "environment(d1)" gives
>
> > <environment: namespace:stats>
>
> and typing "environment(d2)" gives
>
> > <environment: R_GlobalEnv>
>
> The d2() function however gives an incorrect result:
>
> > d1(1,0,3,TRUE)
> > [1] -0.2962963
> > d2(1,0,3,TRUE)
> > [1] -0.8888889

It can't be as simple as that. I get the same result (as your d2) with
the following:

d <- function (x, mean = 0, sd = 1, log = FALSE) {
    (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd) / sd
}
d(1, 0, 3, TRUE)
environment(d)
environment(d) <- as.environment("package:stats")
d(1, 0, 3, TRUE)

> In d2() the result of the if() statement does not get divided
> by the final "sd" whereas in d1() it does (which is the desired/correct
> result).
>
> Of course the code is ridiculously kludgy (it was produced by "symbolic
> differentiation").  That's not the point.  I'm just curious (idly?) as
> to *why* the association of the namespace:stats environment with d1()
> causes it to "do the right thing".

This sounds like a difference in precedence. The expression

if (log) 1 else dnorm(x, mean, sd) / sd

is apparently being interpreted differently as

d1: (if (log) 1 else dnorm(x, mean, sd)) / sd
d2: if (log) 1 else (dnorm(x, mean, sd)) / sd)

It's unclear how environments could affect this, so it would be very
helpful to have a reproducible example.

Best,
-Deepayan

> Can anyone give me any insight?  Ta.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |eo@m@d@ @end|ng |rom @yon|c@eu  Sun Nov  7 06:54:31 2021
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Sun, 7 Nov 2021 07:54:31 +0200
Subject: [R] Dispatching on 2 arguments?
Message-ID: <fc751ccc-3793-b236-db9f-dc907f986bee@syonic.eu>

Dear List-members,


I would like to experiment with dispatching on 2 arguments and have a 
few questions.


p1 = data.frame(x=1:3, coeff=1)
class(p1) = c("pm", class(p1));

I want to replace variables in a polynomial with either:
another polynomial, or another variable (character) or with a specific 
value.


1.) Can I dispatch on 2 arguments?


replace.pm.? = function(p1, p2, ...) {...}
or classic:
replace.pm = function(p1, p2, ...) {
 ??? if(is.numeric(p2) || is.complex(p2)) return(replace.pm.numeric(p1, 
p2, ...));
 ?? ?if(is.character(p2)) return(replace.pm.character(p1, p2=p2, ...));
 ?? else ...

}


I will provide some realistic examples below.


2.) Advantages / Disadvantages of each method
What are the advantages or disadvantages to each of these methods?
I do not yet understand what should be the best design.


Real example:


### Quintic
p1 = toPoly.pm("x^5 - 5*K*x^3 - 5*(K^2 + K)*x^2 - 5*K^3*x - K^4 - 6*K^3 
+ 5*K^2 - K")
# fractional powers: [works as well]
r = toPoly.pm("K^(4/5) + K^(3/5) + K^(1/5)")
# - we just found a root of a non-trivial quintic!
#?? all variables/monomials got cancelled;
replace.pm(p1, r, "x", pow=1)

# more formal
r = toPoly.pm("k^4*m^4 + k^3*m^3 + k*m")
# m^5 = 1; # m = any of the 5 roots of unity of order 5;
pR = p1;
pR = replace.pm(pR, r, xn="x") # poly
pR = replace.pm(pR, "K", xn="k", pow=5) # character
pR = replace.pm(pR, 1, xn="m", pow=5) # value
pR # the roots worked! [no remaining rows]
# - we just found ALL 5 roots!


The code is on Github (see below).


Sincerely,


Leonard

=========

# very experimental code
# some names & arguments may change;

source("Polynomials.Helper.R")
# also required, but are loaded automatically if present in wd;
# source("Polynomials.Helper.Parser.R")
# source("Polynomials.Helper.Format.R")
### not necessary for this Test (just loaded)
# source("Polynomials.Helper.D.R")
# source("Polynomials.Helper.Factorize.R")
# the libraries pracma & polynom are not really required for this test 
either;

### Github:
https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.R
https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.Parser.R
https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.Format.R
# not necessary for this Test
https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.D.R
https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.Factorize.R


From @kw@|mmo @end|ng |rom gm@||@com  Sun Nov  7 07:13:03 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sun, 7 Nov 2021 01:13:03 -0500
Subject: [R] Dispatching on 2 arguments?
In-Reply-To: <fc751ccc-3793-b236-db9f-dc907f986bee@syonic.eu>
References: <fc751ccc-3793-b236-db9f-dc907f986bee@syonic.eu>
Message-ID: <CAPcHnpSQ1+NhxpbDdxLr8zhWurnDPuB-oouFrqgSNkd-atCOsw@mail.gmail.com>

If you want to use the 'methods' package, you could do something like:


replace <- function (p1, p2, ...)
{
    stop(gettextf("cannot 'replace' with arguments of class %s and %s",
        sQuote(class(p1)[1L]), sQuote(class(p2)[1L])))
}


methods::setGeneric("replace")


methods::setMethod("replace", signature = c(p1 = "pm", p2 = "numeric"),
definition = replace.pm.numeric)
methods::setMethod("replace", signature = c(p1 = "pm", p2 = "character"),
definition = replace.pm.character)


First, we make the default function. I'm not sure what you want that to
look like, but I've made an example above.
Second, you make it generic so that you can provide methods for it.
Last, you add the methods you want. You specify the name of the generic
function, "replace", the classes of arguments it will accept, and then its
function definition.
You can use ?methods::setGeneric and ?methods::setMethod for help with
either of these functions. I hope this helps!

On Sun, Nov 7, 2021 at 1:55 AM Leonard Mada via R-help <r-help at r-project.org>
wrote:

> Dear List-members,
>
>
> I would like to experiment with dispatching on 2 arguments and have a
> few questions.
>
>
> p1 = data.frame(x=1:3, coeff=1)
> class(p1) = c("pm", class(p1));
>
> I want to replace variables in a polynomial with either:
> another polynomial, or another variable (character) or with a specific
> value.
>
>
> 1.) Can I dispatch on 2 arguments?
>
>
> replace.pm.? = function(p1, p2, ...) {...}
> or classic:
> replace.pm = function(p1, p2, ...) {
>      if(is.numeric(p2) || is.complex(p2)) return(replace.pm.numeric(p1,
> p2, ...));
>      if(is.character(p2)) return(replace.pm.character(p1, p2=p2, ...));
>     else ...
>
> }
>
>
> I will provide some realistic examples below.
>
>
> 2.) Advantages / Disadvantages of each method
> What are the advantages or disadvantages to each of these methods?
> I do not yet understand what should be the best design.
>
>
> Real example:
>
>
> ### Quintic
> p1 = toPoly.pm("x^5 - 5*K*x^3 - 5*(K^2 + K)*x^2 - 5*K^3*x - K^4 - 6*K^3
> + 5*K^2 - K")
> # fractional powers: [works as well]
> r = toPoly.pm("K^(4/5) + K^(3/5) + K^(1/5)")
> # - we just found a root of a non-trivial quintic!
> #   all variables/monomials got cancelled;
> replace.pm(p1, r, "x", pow=1)
>
> # more formal
> r = toPoly.pm("k^4*m^4 + k^3*m^3 + k*m")
> # m^5 = 1; # m = any of the 5 roots of unity of order 5;
> pR = p1;
> pR = replace.pm(pR, r, xn="x") # poly
> pR = replace.pm(pR, "K", xn="k", pow=5) # character
> pR = replace.pm(pR, 1, xn="m", pow=5) # value
> pR # the roots worked! [no remaining rows]
> # - we just found ALL 5 roots!
>
>
> The code is on Github (see below).
>
>
> Sincerely,
>
>
> Leonard
>
> =========
>
> # very experimental code
> # some names & arguments may change;
>
> source("Polynomials.Helper.R")
> # also required, but are loaded automatically if present in wd;
> # source("Polynomials.Helper.Parser.R")
> # source("Polynomials.Helper.Format.R")
> ### not necessary for this Test (just loaded)
> # source("Polynomials.Helper.D.R")
> # source("Polynomials.Helper.Factorize.R")
> # the libraries pracma & polynom are not really required for this test
> either;
>
> ### Github:
> https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.R
> https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.Parser.R
> https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.Format.R
> # not necessary for this Test
> https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.D.R
>
> https://github.com/discoleo/R/blob/master/Math/Polynomials.Helper.Factorize.R
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Nov  7 07:33:40 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 7 Nov 2021 19:33:40 +1300
Subject: [R] Environmental oddity --- reproducible example.
In-Reply-To: <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
 <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
Message-ID: <20211107193340.444cad96@rolf-Latitude-E7470>


library(Deriv)
d1 <- Deriv(dnorm,"sd")
source("d2.txt") # d2.txt is attached

d1(1,0,3,TRUE) # [1] -0.2962963
d2(1,0,3,TRUE) # [1] -0.8888889

cheers,

Rolf

P.S.:

> sessionInfo()
R version 4.1.1 (2021-08-10)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 20.04.3 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3
LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_NZ.UTF-8        LC_COLLATE=en_GB.UTF-8    
 [5] LC_MONETARY=en_NZ.UTF-8    LC_MESSAGES=en_GB.UTF-8   
 [7] LC_PAPER=en_NZ.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_NZ.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] Deriv_4.1.3 brev_0.0-7 

loaded via a namespace (and not attached):
 [1] magrittr_1.5      usethis_2.0.1     devtools_2.4.2    pkgload_1.2.1    
 [5] colorspace_1.4-1  R6_2.4.1          rlang_0.4.11      fastmap_1.0.1    
 [9] tools_4.1.1       pkgbuild_1.2.0    sessioninfo_1.1.1 cli_2.5.0        
[13] withr_2.4.2       ellipsis_0.3.2    remotes_2.4.0     rprojroot_1.3-2  
[17] lifecycle_1.0.0   crayon_1.3.4      processx_3.5.2    purrr_0.3.4      
[21] callr_3.7.0       fs_1.5.0          ps_1.6.0          testthat_3.0.3   
[25] memoise_2.0.0     glue_1.4.0        cachem_1.0.5      compiler_4.1.1   
[29] desc_1.3.0        backports_1.1.6   prettyunits_1.1.1


-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: d2.txt
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211107/62c97da8/attachment.txt>

From kry|ov@r00t @end|ng |rom gm@||@com  Sun Nov  7 09:18:28 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 7 Nov 2021 11:18:28 +0300
Subject: [R] Environmental oddity.
In-Reply-To: <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
 <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
Message-ID: <20211107111828.3495c4c4@Tarkus>

On Sun, 7 Nov 2021 09:02:36 +0530
Deepayan Sarkar <deepayan.sarkar at gmail.com> wrote:

> This sounds like a difference in precedence. The expression
> 
> if (log) 1 else dnorm(x, mean, sd) / sd
> 
> is apparently being interpreted differently as
> 
> d1: (if (log) 1 else dnorm(x, mean, sd)) / sd
> d2: if (log) 1 else (dnorm(x, mean, sd)) / sd)
> 
> It's unclear how environments could affect this, so it would be very
> helpful to have a reproducible example.

This seems to be caused by the deparser producing the same source text
for different expressions:

( x <- expression(`/`(`*`(a, if (b) c else d), e)) )
# expression(a * if (b) c else d/e)
( y <- expression(a * if (b) c else d/e) )
# expression(a * if (b) c else d/e)
all.equal(x, y)
# [1] TRUE

The expressions *seem* to be the same, but:

as.list(x[[1]])
# [[1]]
# `/`
# 
# [[2]]
# a * if (b) c else d
# 
# [[3]]
# e

as.list(y[[1]])
# [[1]]
# `*`
# 
# [[2]]
# a
# 
# [[3]]
# if (b) c else d/e

Perhaps it could be possible to make the deparser output extra
parentheses at the cost of slightly uglier output in cases when they
are not needed. all.equal.language uses deparse(), so it will behave
correctly when the deparse() output is fixed.

In the original example, as.list(body(d1)) and as.list(body(d2)) should
show different results, too.

-- 
Best regards,
Ivan


From berw|n@tur|@ch @end|ng |rom gm@||@com  Sun Nov  7 09:22:38 2021
From: berw|n@tur|@ch @end|ng |rom gm@||@com (Berwin A Turlach)
Date: Sun, 7 Nov 2021 16:22:38 +0800
Subject: [R] Environmental oddity --- reproducible example.
In-Reply-To: <20211107193340.444cad96@rolf-Latitude-E7470>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
 <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
 <20211107193340.444cad96@rolf-Latitude-E7470>
Message-ID: <20211107162238.5b50fc98@absentia>

G'day Rolf,

On Sun, 7 Nov 2021 19:33:40 +1300
Rolf Turner <r.turner at auckland.ac.nz> wrote:

> library(Deriv)
> d1 <- Deriv(dnorm,"sd")
> source("d2.txt") # d2.txt is attached
> 
> d1(1,0,3,TRUE) # [1] -0.2962963
> d2(1,0,3,TRUE) # [1] -0.8888889

Fascinating:

R> pryr::call_tree(body(d1))
R> pryr::call_tree(body(d2))

clearly show that the two functions have a different idea to what
expression the final "/sd" is applied too (as an earlier poster
suggested), but I have no idea why.

Deriv() seems to return the correct function, but when it is displayed,
the deparser(?) somehow omits a crucial pair of braces.

Cheers,

	Berwin


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Nov  7 12:27:25 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Nov 2021 06:27:25 -0500
Subject: [R] Environmental oddity.
In-Reply-To: <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
 <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
Message-ID: <7c8a122b-22fd-95a3-d8b2-d110c9b9b51c@gmail.com>

On 06/11/2021 11:32 p.m., Deepayan Sarkar wrote:
> On Sun, Nov 7, 2021 at 6:05 AM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>
>>
>> I have two functions which appear to differ only in their environments.
>> They look like:
>>
>>> d1
>>> function (x, mean = 0, sd = 1, log = FALSE)
>>> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>>> <environment: namespace:stats>
>>
>> and
>>
>>> d2
>>> function (x, mean = 0, sd = 1, log = FALSE)
>>> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>>
>> Typing "environment(d1)" gives
>>
>>> <environment: namespace:stats>
>>
>> and typing "environment(d2)" gives
>>
>>> <environment: R_GlobalEnv>
>>
>> The d2() function however gives an incorrect result:
>>
>>> d1(1,0,3,TRUE)
>>> [1] -0.2962963
>>> d2(1,0,3,TRUE)
>>> [1] -0.8888889
> 
> It can't be as simple as that. I get the same result (as your d2) with
> the following:
> 
> d <- function (x, mean = 0, sd = 1, log = FALSE) {
>      (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd) / sd
> }
> d(1, 0, 3, TRUE)
> environment(d)
> environment(d) <- as.environment("package:stats")
> d(1, 0, 3, TRUE)
> 
>> In d2() the result of the if() statement does not get divided
>> by the final "sd" whereas in d1() it does (which is the desired/correct
>> result).
>>
>> Of course the code is ridiculously kludgy (it was produced by "symbolic
>> differentiation").  That's not the point.  I'm just curious (idly?) as
>> to *why* the association of the namespace:stats environment with d1()
>> causes it to "do the right thing".
> 
> This sounds like a difference in precedence. The expression
> 
> if (log) 1 else dnorm(x, mean, sd) / sd
> 
> is apparently being interpreted differently as
> 
> d1: (if (log) 1 else dnorm(x, mean, sd)) / sd
> d2: if (log) 1 else (dnorm(x, mean, sd)) / sd)
> 
> It's unclear how environments could affect this, so it would be very
> helpful to have a reproducible example.
> 

Rolf said these were automatically produced functions.  Those don't 
always deparse properly, because manipulating expressions can produce 
things that can never be produced by the parser.  I'm not sure this 
happened in this case.  You'd need to examine the parse trees of d1 and 
d2 to see.

There's also a possibility that the srcref attached to them is lying, 
and we're not seeing the deparsed versions of the functions.  Printing 
removeSource(d1) and removeSource(d2) should reveal that.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Nov  7 18:20:16 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Nov 2021 12:20:16 -0500
Subject: [R] Environmental oddity.
In-Reply-To: <7c8a122b-22fd-95a3-d8b2-d110c9b9b51c@gmail.com>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
 <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
 <7c8a122b-22fd-95a3-d8b2-d110c9b9b51c@gmail.com>
Message-ID: <cdcc8b80-5f17-af48-b9c3-6a971a5bd468@gmail.com>

Here's how to construct a similar deparsing error:

# e1 and e2 are obviously different expressions
e1 <- quote(5 * if (TRUE) 2 else 3/4)
e2 <- quote(5 * (if (TRUE) 2 else 3)/4)
# and they evaluate differently
eval(e1)
#> [1] 10
eval(e2)
#> [1] 2.5

# We can make an equivalent version of e2 by messing around in it
e3 <- e2
as.list(e3[[c(2,3)]])
#> [[1]]
#> `(`
#>
#> [[2]]
#> if (TRUE) 2 else 3
e3[[c(2,3)]] <- e3[[c(2,3,2)]]

# Now e3 looks like e1
e1
#> 5 * if (TRUE) 2 else 3/4
e3
#> 5 * if (TRUE) 2 else 3/4

# But it doesn't evaluate that way
eval(e1)
#> [1] 10
eval(e3)
#> [1] 2.5

Duncan Murdoch

On 07/11/2021 6:27 a.m., Duncan Murdoch wrote:
> On 06/11/2021 11:32 p.m., Deepayan Sarkar wrote:
>> On Sun, Nov 7, 2021 at 6:05 AM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>>
>>>
>>> I have two functions which appear to differ only in their environments.
>>> They look like:
>>>
>>>> d1
>>>> function (x, mean = 0, sd = 1, log = FALSE)
>>>> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>>>> <environment: namespace:stats>
>>>
>>> and
>>>
>>>> d2
>>>> function (x, mean = 0, sd = 1, log = FALSE)
>>>> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>>>
>>> Typing "environment(d1)" gives
>>>
>>>> <environment: namespace:stats>
>>>
>>> and typing "environment(d2)" gives
>>>
>>>> <environment: R_GlobalEnv>
>>>
>>> The d2() function however gives an incorrect result:
>>>
>>>> d1(1,0,3,TRUE)
>>>> [1] -0.2962963
>>>> d2(1,0,3,TRUE)
>>>> [1] -0.8888889
>>
>> It can't be as simple as that. I get the same result (as your d2) with
>> the following:
>>
>> d <- function (x, mean = 0, sd = 1, log = FALSE) {
>>       (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd) / sd
>> }
>> d(1, 0, 3, TRUE)
>> environment(d)
>> environment(d) <- as.environment("package:stats")
>> d(1, 0, 3, TRUE)
>>
>>> In d2() the result of the if() statement does not get divided
>>> by the final "sd" whereas in d1() it does (which is the desired/correct
>>> result).
>>>
>>> Of course the code is ridiculously kludgy (it was produced by "symbolic
>>> differentiation").  That's not the point.  I'm just curious (idly?) as
>>> to *why* the association of the namespace:stats environment with d1()
>>> causes it to "do the right thing".
>>
>> This sounds like a difference in precedence. The expression
>>
>> if (log) 1 else dnorm(x, mean, sd) / sd
>>
>> is apparently being interpreted differently as
>>
>> d1: (if (log) 1 else dnorm(x, mean, sd)) / sd
>> d2: if (log) 1 else (dnorm(x, mean, sd)) / sd)
>>
>> It's unclear how environments could affect this, so it would be very
>> helpful to have a reproducible example.
>>
> 
> Rolf said these were automatically produced functions.  Those don't
> always deparse properly, because manipulating expressions can produce
> things that can never be produced by the parser.  I'm not sure this
> happened in this case.  You'd need to examine the parse trees of d1 and
> d2 to see.
> 
> There's also a possibility that the srcref attached to them is lying,
> and we're not seeing the deparsed versions of the functions.  Printing
> removeSource(d1) and removeSource(d2) should reveal that.
> 
> Duncan Murdoch
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Nov  7 19:11:10 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Nov 2021 13:11:10 -0500
Subject: [R] Environmental oddity.
In-Reply-To: <cdcc8b80-5f17-af48-b9c3-6a971a5bd468@gmail.com>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
 <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
 <7c8a122b-22fd-95a3-d8b2-d110c9b9b51c@gmail.com>
 <cdcc8b80-5f17-af48-b9c3-6a971a5bd468@gmail.com>
Message-ID: <15c1685d-022f-939e-617d-890c63d10a0e@gmail.com>

I've submitted a bug report and patch:

  https://bugs.r-project.org/show_bug.cgi?id=18232

Duncan Murdoch

On 07/11/2021 12:20 p.m., Duncan Murdoch wrote:
> Here's how to construct a similar deparsing error:
> 
> # e1 and e2 are obviously different expressions
> e1 <- quote(5 * if (TRUE) 2 else 3/4)
> e2 <- quote(5 * (if (TRUE) 2 else 3)/4)
> # and they evaluate differently
> eval(e1)
> #> [1] 10
> eval(e2)
> #> [1] 2.5
> 
> # We can make an equivalent version of e2 by messing around in it
> e3 <- e2
> as.list(e3[[c(2,3)]])
> #> [[1]]
> #> `(`
> #>
> #> [[2]]
> #> if (TRUE) 2 else 3
> e3[[c(2,3)]] <- e3[[c(2,3,2)]]
> 
> # Now e3 looks like e1
> e1
> #> 5 * if (TRUE) 2 else 3/4
> e3
> #> 5 * if (TRUE) 2 else 3/4
> 
> # But it doesn't evaluate that way
> eval(e1)
> #> [1] 10
> eval(e3)
> #> [1] 2.5
> 
> Duncan Murdoch
> 
> On 07/11/2021 6:27 a.m., Duncan Murdoch wrote:
>> On 06/11/2021 11:32 p.m., Deepayan Sarkar wrote:
>>> On Sun, Nov 7, 2021 at 6:05 AM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>>>
>>>>
>>>> I have two functions which appear to differ only in their environments.
>>>> They look like:
>>>>
>>>>> d1
>>>>> function (x, mean = 0, sd = 1, log = FALSE)
>>>>> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>>>>> <environment: namespace:stats>
>>>>
>>>> and
>>>>
>>>>> d2
>>>>> function (x, mean = 0, sd = 1, log = FALSE)
>>>>> (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd)/sd
>>>>
>>>> Typing "environment(d1)" gives
>>>>
>>>>> <environment: namespace:stats>
>>>>
>>>> and typing "environment(d2)" gives
>>>>
>>>>> <environment: R_GlobalEnv>
>>>>
>>>> The d2() function however gives an incorrect result:
>>>>
>>>>> d1(1,0,3,TRUE)
>>>>> [1] -0.2962963
>>>>> d2(1,0,3,TRUE)
>>>>> [1] -0.8888889
>>>
>>> It can't be as simple as that. I get the same result (as your d2) with
>>> the following:
>>>
>>> d <- function (x, mean = 0, sd = 1, log = FALSE) {
>>>        (((x - mean)/sd)^2 - 1) * if (log) 1 else dnorm(x, mean, sd) / sd
>>> }
>>> d(1, 0, 3, TRUE)
>>> environment(d)
>>> environment(d) <- as.environment("package:stats")
>>> d(1, 0, 3, TRUE)
>>>
>>>> In d2() the result of the if() statement does not get divided
>>>> by the final "sd" whereas in d1() it does (which is the desired/correct
>>>> result).
>>>>
>>>> Of course the code is ridiculously kludgy (it was produced by "symbolic
>>>> differentiation").  That's not the point.  I'm just curious (idly?) as
>>>> to *why* the association of the namespace:stats environment with d1()
>>>> causes it to "do the right thing".
>>>
>>> This sounds like a difference in precedence. The expression
>>>
>>> if (log) 1 else dnorm(x, mean, sd) / sd
>>>
>>> is apparently being interpreted differently as
>>>
>>> d1: (if (log) 1 else dnorm(x, mean, sd)) / sd
>>> d2: if (log) 1 else (dnorm(x, mean, sd)) / sd)
>>>
>>> It's unclear how environments could affect this, so it would be very
>>> helpful to have a reproducible example.
>>>
>>
>> Rolf said these were automatically produced functions.  Those don't
>> always deparse properly, because manipulating expressions can produce
>> things that can never be produced by the parser.  I'm not sure this
>> happened in this case.  You'd need to examine the parse trees of d1 and
>> d2 to see.
>>
>> There's also a possibility that the srcref attached to them is lying,
>> and we're not seeing the deparsed versions of the functions.  Printing
>> removeSource(d1) and removeSource(d2) should reveal that.
>>
>> Duncan Murdoch
>>
>


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Nov  7 20:59:58 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Mon, 8 Nov 2021 08:59:58 +1300
Subject: [R] Environmental oddity.
In-Reply-To: <15c1685d-022f-939e-617d-890c63d10a0e@gmail.com>
References: <20211107133508.5c134a28@rolf-Latitude-E7470>
 <CADfFDC6NiTy6HTLaRjhbv1-ZP6t-G5Sx8DCkEagYay659hcMQA@mail.gmail.com>
 <7c8a122b-22fd-95a3-d8b2-d110c9b9b51c@gmail.com>
 <cdcc8b80-5f17-af48-b9c3-6a971a5bd468@gmail.com>
 <15c1685d-022f-939e-617d-890c63d10a0e@gmail.com>
Message-ID: <20211108085958.37fd6228@rolf-Latitude-E7470>

On Sun, 7 Nov 2021 13:11:10 -0500
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> I've submitted a bug report and patch:
> 
>   https://bugs.r-project.org/show_bug.cgi?id=18232

Thanks Duncan.  It's good to know that the anomaly wasn't just a result
of my doing something stupid.

cheers,

Rolf


-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From ||809 @end|ng |rom nc|@c@  Sun Nov  7 23:07:20 2021
From: ||809 @end|ng |rom nc|@c@ (Brian Lunergan)
Date: Sun, 7 Nov 2021 17:07:20 -0500
Subject: [R] Warning msg after reinstall?
Message-ID: <b116d191-52b3-6a21-dd11-46ce9f172462@ncf.ca>

Evening gents:

First to quickly try and set the scene.

I run R on Linux Mint 19.3. I had version 3.5 installed, but wanted to
try and upgrade to 4.1. So... I deleted all R stuff I could find, setup
the software sources file, and tried to install. Didn't work. I suppose
it needs a more recent edition of Mint. Backpedalled as best I could.
Now 3.5 was uncooperative. Finally found some notes describing how to
install 3.6. That worked. So now I again have a functioning copy of R,
with a current edition of Rstudio as my principle access tool. Adding
pkgs through the software manager doesn't seem to be work, but as long
as I fire it up using the sudo command I can add them through Rstudio.

The puzzle comes at the end of an install round. It seems I may have
taken out something I shouldn't have as I get the following warning.

Warning messages:
1: In readLines(file, skipNul = TRUE) :
  cannot open compressed file
'/usr/lib/R/site-library/labelled/DESCRIPTION', probable reason 'No such
file or directory'
2: In readLines(file, skipNul = TRUE) :
  cannot open compressed file
'/usr/lib/R/site-library/TH.data/DESCRIPTION', probable reason 'No such
file or directory'

I'm not really sure. I assume I got sloppy withe deletions. I ask for
assistance to solve this. What does it mean? What can I do to correct
the error? Thanks in advance.

ttyl...
-- 
Brian Lunergan
Pavillon Marionville
Russell, Ontario
Canada


-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211107/11dbeca1/attachment.sig>

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Nov  7 23:17:31 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 07 Nov 2021 14:17:31 -0800
Subject: [R] Warning msg after reinstall?
In-Reply-To: <b116d191-52b3-6a21-dd11-46ce9f172462@ncf.ca>
References: <b116d191-52b3-6a21-dd11-46ce9f172462@ncf.ca>
Message-ID: <295EA74D-3642-498B-B7A9-9E50EF93DC89@dcn.davis.ca.us>

The topic here is R language, not operating system surgery. You probably shouldn't hold your breath for a solution to this here.

That said, compiling and running without installing for access by the whole system is always an option if you can fix the support libraries.

On November 7, 2021 2:07:20 PM PST, Brian Lunergan <ff809 at ncf.ca> wrote:
>Evening gents:
>
>First to quickly try and set the scene.
>
>I run R on Linux Mint 19.3. I had version 3.5 installed, but wanted to
>try and upgrade to 4.1. So... I deleted all R stuff I could find, setup
>the software sources file, and tried to install. Didn't work. I suppose
>it needs a more recent edition of Mint. Backpedalled as best I could.
>Now 3.5 was uncooperative. Finally found some notes describing how to
>install 3.6. That worked. So now I again have a functioning copy of R,
>with a current edition of Rstudio as my principle access tool. Adding
>pkgs through the software manager doesn't seem to be work, but as long
>as I fire it up using the sudo command I can add them through Rstudio.
>
>The puzzle comes at the end of an install round. It seems I may have
>taken out something I shouldn't have as I get the following warning.
>
>Warning messages:
>1: In readLines(file, skipNul = TRUE) :
>  cannot open compressed file
>'/usr/lib/R/site-library/labelled/DESCRIPTION', probable reason 'No such
>file or directory'
>2: In readLines(file, skipNul = TRUE) :
>  cannot open compressed file
>'/usr/lib/R/site-library/TH.data/DESCRIPTION', probable reason 'No such
>file or directory'
>
>I'm not really sure. I assume I got sloppy withe deletions. I ask for
>assistance to solve this. What does it mean? What can I do to correct
>the error? Thanks in advance.
>
>ttyl...

-- 
Sent from my phone. Please excuse my brevity.


From ||809 @end|ng |rom nc|@c@  Mon Nov  8 03:26:45 2021
From: ||809 @end|ng |rom nc|@c@ (Brian Lunergan)
Date: Sun, 7 Nov 2021 21:26:45 -0500
Subject: [R] Warning msg after reinstall?
In-Reply-To: <295EA74D-3642-498B-B7A9-9E50EF93DC89@dcn.davis.ca.us>
References: <b116d191-52b3-6a21-dd11-46ce9f172462@ncf.ca>
 <295EA74D-3642-498B-B7A9-9E50EF93DC89@dcn.davis.ca.us>
Message-ID: <084bf987-bda6-1a6e-69c3-de6f2dfe5b5c@ncf.ca>

On 2021-11-07 5:17 p.m., Jeff Newmiller wrote:
> The topic here is R language, not operating system surgery. You probably shouldn't hold your breath for a solution to this here.
> 
> That said, compiling and running without installing for access by the whole system is always an option if you can fix the support libraries.
> 
> On November 7, 2021 2:07:20 PM PST, Brian Lunergan <ff809 at ncf.ca> wrote:
>> Evening gents:
>>
>> First to quickly try and set the scene.
>>
>> I run R on Linux Mint 19.3. I had version 3.5 installed, but wanted to
>> try and upgrade to 4.1. So... I deleted all R stuff I could find, setup
>> the software sources file, and tried to install. Didn't work. I suppose
>> it needs a more recent edition of Mint. Backpedalled as best I could.
>> Now 3.5 was uncooperative. Finally found some notes describing how to
>> install 3.6. That worked. So now I again have a functioning copy of R,
>> with a current edition of Rstudio as my principle access tool. Adding
>> pkgs through the software manager doesn't seem to be work, but as long
>> as I fire it up using the sudo command I can add them through Rstudio.
>>
>> The puzzle comes at the end of an install round. It seems I may have
>> taken out something I shouldn't have as I get the following warning.
>>
>> Warning messages:
>> 1: In readLines(file, skipNul = TRUE) :
>>  cannot open compressed file
>> '/usr/lib/R/site-library/labelled/DESCRIPTION', probable reason 'No such
>> file or directory'
>> 2: In readLines(file, skipNul = TRUE) :
>>  cannot open compressed file
>> '/usr/lib/R/site-library/TH.data/DESCRIPTION', probable reason 'No such
>> file or directory'
>>
>> I'm not really sure. I assume I got sloppy withe deletions. I ask for
>> assistance to solve this. What does it mean? What can I do to correct
>> the error? Thanks in advance.

Point taken Jeff, IF it were a Linux msg. But it's not, having appeared
within an active R session following the install of some pkgs, so I
thought here was a logical place to start. The directory is present but
apparently the file is not. No doubt I approached things in a
disorganized way and deleted it when I should have left it alone. So
perhaps you or one of the other group members could suggest how to
replace what R is seeking or, if not here, what R group I might approach
to find an answer for this R problem,

-- 
Brian Lunergan
Pavillon Marionville
Russell, Ontario
Canada


-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211107/3dd1c4ee/attachment.sig>

From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov  8 08:43:16 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 8 Nov 2021 10:43:16 +0300
Subject: [R] Warning msg after reinstall?
In-Reply-To: <b116d191-52b3-6a21-dd11-46ce9f172462@ncf.ca>
References: <b116d191-52b3-6a21-dd11-46ce9f172462@ncf.ca>
Message-ID: <20211108104259.2421df9e@Tarkus>

On Sun, 7 Nov 2021 17:07:20 -0500
Brian Lunergan <ff809 at ncf.ca> wrote:

> I run R on Linux Mint 19.3.

If my advice below doesn't help, let's continue this in the other
mailing list, r-sig-debian at r-project.org
<https://stat.ethz.ch/mailman/listinfo/r-sig-debian>.

> Warning messages:
> 1: In readLines(file, skipNul = TRUE) :
>   cannot open compressed file
> '/usr/lib/R/site-library/labelled/DESCRIPTION', probable reason 'No
> such file or directory'
> 2: In readLines(file, skipNul = TRUE) :
>   cannot open compressed file
> '/usr/lib/R/site-library/TH.data/DESCRIPTION', probable reason 'No
> such file or directory'

It seems that you've been installing packages into the system-wide
library. Could you try removing all R-related deb packages from your
system, wiping the directories /usr/lib/R and /usr/share/R, then
installing R again? Alternatively, write a script to search files and
directories in /usr/lib/R and /usr/share/R, use `dpkg -S` to see if
it's owned by a package and move it away if not. Both options are quite
a bit dangerous, though.

On second thought, what is in /usr/lib/R/site-library/labelled
and /usr/lib/R/site-library/TH.data? If the two directories are empty,
you can just remove them.

-- 
Best regards,
Ivan


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Nov  8 17:53:06 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 8 Nov 2021 16:53:06 +0000 (UTC)
Subject: [R] bootstrap confidence intervals
In-Reply-To: <99d98f41-1078-8ca9-d5cb-3b7b11c28c2b@comcast.net>
References: <1134657224.1859338.1636143360487.ref@mail.yahoo.com>
 <1134657224.1859338.1636143360487@mail.yahoo.com>
 <99d98f41-1078-8ca9-d5cb-3b7b11c28c2b@comcast.net>
Message-ID: <1271820900.2978393.1636390386450@mail.yahoo.com>

Hi,

I really thank you a lot for your response.




Le samedi 6 novembre 2021, 02:37:46 UTC+1, David Winsemius <dwinsemius at comcast.net> a ?crit : 






On 11/5/21 1:16 PM, varin sacha via R-help wrote:
> Dear R-experts,
>
> Here is a toy example. How can I get the bootstrap confidence intervals working ?
>
> Many thanks for your help
>
> ############################
> library(DescTools)
> library(boot)
>? 
> A=c(488,437,500,449,364)
> dat<-data.frame(A)
> med<-function(d,i) {
> temp<-d[i,]
# shouldn't this be

HodgesLehmann(temp)? # ???

# makes no sense to extract a bootstrap sample and then return a value calculated on the full dataset

> HodgesLehmann(A)
> }
> boot.out<-boot(data=dat,statistic=med,R=100)

I would have imagined that one could simply extract the quantiles of the 
HodgesLehmann at the appropriate tail probabilities:


quantile(boot.out$t, c(0.025, 0.975))
??? 2.5%??? 97.5%
400.5000 488.0001


It doesn't seem reasonable to have bootstrap CI's that are much tighter 
than the estimates on the original data:


> HodgesLehmann(boot.out$t, conf.level=0.95)
?? est lwr.ci upr.ci
449.75 444.25 453.25??? # seems to be cheating
> HodgesLehmann(dat$A, conf.level=0.95)
?? est lwr.ci upr.ci
?? 449??? 364??? 500??? # Much closer to the quantiles above


-- 

David.


> HodgesLehmann(boot.out$t)
>
> boot.ci(boot.out,type="all")

> ############################
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Nov  8 17:53:47 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 8 Nov 2021 16:53:47 +0000 (UTC)
Subject: [R] bootstrap confidence intervals
In-Reply-To: <674b7ef8-d3f7-23da-265d-d2ccc88afcdc@sapo.pt>
References: <1134657224.1859338.1636143360487.ref@mail.yahoo.com>
 <1134657224.1859338.1636143360487@mail.yahoo.com>
 <99d98f41-1078-8ca9-d5cb-3b7b11c28c2b@comcast.net>
 <674b7ef8-d3f7-23da-265d-d2ccc88afcdc@sapo.pt>
Message-ID: <602214084.2988415.1636390427797@mail.yahoo.com>

Hi, 

Many thanks for your responses.



Le samedi 6 novembre 2021, 08:39:22 UTC+1, Rui Barradas <ruipbarradas at sapo.pt> a ?crit : 





Hello,


?s 01:36 de 06/11/21, David Winsemius escreveu:
> 
> On 11/5/21 1:16 PM, varin sacha via R-help wrote:
>> Dear R-experts,
>>
>> Here is a toy example. How can I get the bootstrap confidence 
>> intervals working ?
>>
>> Many thanks for your help
>>
>> ############################
>> library(DescTools)
>> library(boot)
>> A=c(488,437,500,449,364)
>> dat<-data.frame(A)
>> med<-function(d,i) {
>> temp<-d[i,]
> # shouldn't this be
> 
> HodgesLehmann(temp)? # ???
> 
> # makes no sense to extract a bootstrap sample and then return a value 
> calculated on the full dataset
> 
>> HodgesLehmann(A)
>> }
>> boot.out<-boot(data=dat,statistic=med,R=100)
> 
> I would have imagined that one could simply extract the quantiles of the 
> HodgesLehmann at the appropriate tail probabilities:
> 
> 
> quantile(boot.out$t, c(0.025, 0.975))
>? ??? 2.5%??? 97.5%
> 400.5000 488.0001
> 
> 
> It doesn't seem reasonable to have bootstrap CI's that are much tighter 
> than the estimates on the original data:
> 
> 
>? > HodgesLehmann(boot.out$t, conf.level=0.95)
>? ?? est lwr.ci upr.ci
> 449.75 444.25 453.25??? # seems to be cheating
>? > HodgesLehmann(dat$A, conf.level=0.95)
>? ?? est lwr.ci upr.ci
>? ?? 449??? 364??? 500??? # Much closer to the quantiles above
> 
> 


This cheating comes from wilcox.test, which is called by HodgesLehman to 
do the calculations. Below is a function calling wilcox.test directly, 
and the bootstrapped intervals are always equal, no matter what way they 
are computed.



A <- c(488, 437, 500, 449, 364)
dat <- data.frame(A)

med <- function(d,i) {
? temp <- d[i, ]
? HodgesLehmann(temp)
}
med2 <- function(d, i, conf.level = 0.95){
? temp <- d[i, ]
? wilcox.test(temp,
? ? ? ? ? ? ? conf.int = TRUE,
? ? ? ? ? ? ? conf.level = Coalesce(conf.level, 0.8),
? ? ? ? ? ? ? exact = FALSE)$estimate
}

set.seed(2021)
boot.out <- boot(data = dat, statistic = med, R = 100)
set.seed(2021)
boot.out2 <- boot(data = dat, statistic = med2, R = 100, conf.level = 0.95)

HodgesLehmann(boot.out$t)
#[1] 452.75
HodgesLehmann(boot.out2$t)
#[1] 452.75

HodgesLehmann(boot.out$t, conf.level = 0.95)
#? ? est? lwr.ci? upr.ci
#452.7500 447.2500 458.7499
HodgesLehmann(boot.out2$t, conf.level = 0.95)
#? ? est? lwr.ci? upr.ci
#452.7500 447.2500 458.7499

quantile(boot.out$t, c(0.025, 0.975))
# 2.5% 97.5%
#400.5 494.0
quantile(boot.out2$t, c(0.025, 0.975))
# 2.5% 97.5%
#400.5 494.0

boot.ci(boot.out, type = "all")? ? # CI's are
boot.ci(boot.out2, type = "all")? # the same



But the bootstrap statistic vectors t are different:



identical(boot.out$t, boot.out2$t)
#[1] FALSE
all.equal(boot.out$t, boot.out2$t)
#[1] "Mean relative difference: 8.93281e-08"




I haven't time to check what is going on in wilcox.test, its source is a 
bit involved, with many if/else statements, maybe I'll come back to this 
but no promises made.


Hope this helps,

Rui Barradas


______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Nov  8 19:25:12 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 8 Nov 2021 12:25:12 -0600
Subject: [R] Plotly
References: <001201d7d4cd$f87b3fd0$e971bf70$.ref@sbcglobal.net>
Message-ID: <001201d7d4cd$f87b3fd0$e971bf70$@sbcglobal.net>

R Help Forum

 

Anyone know if there are Plotly issues ones need to be aware of. For example
I quite often receive the following error "Error in dirname(to) : path too
long." I find there is no one fix. Is there some sort of Windows /Plotly
naming restrictions???

 

# create a line chart displaying launches by agency type, with highlighting

shared_launches %>%

  plot_ly(x = ~launch_year, y = ~n, color = ~agency_type) %>%

  add_lines() %>%

  highlight()

 

Jeff


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Nov  8 20:15:59 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 8 Nov 2021 11:15:59 -0800
Subject: [R] Plotly
In-Reply-To: <001201d7d4cd$f87b3fd0$e971bf70$@sbcglobal.net>
References: <001201d7d4cd$f87b3fd0$e971bf70$.ref@sbcglobal.net>
 <001201d7d4cd$f87b3fd0$e971bf70$@sbcglobal.net>
Message-ID: <CAGxFJbSjKRavogTEr_XcrMdANJOTPuzkNCfCvmdfjtSi+TN94A@mail.gmail.com>

As Plotly for R is a product of private company, your query is off
topic here (though you may get a response if you are lucky). They have
their own Help forum to which you should post instead:

https://community.plotly.com/c/graphing-libraries/r/9


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, Nov 8, 2021 at 10:25 AM Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>
> R Help Forum
>
>
>
> Anyone know if there are Plotly issues ones need to be aware of. For example
> I quite often receive the following error "Error in dirname(to) : path too
> long." I find there is no one fix. Is there some sort of Windows /Plotly
> naming restrictions???
>
>
>
> # create a line chart displaying launches by agency type, with highlighting
>
> shared_launches %>%
>
>   plot_ly(x = ~launch_year, y = ~n, color = ~agency_type) %>%
>
>   add_lines() %>%
>
>   highlight()
>
>
>
> Jeff
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Nov  8 20:32:26 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 08 Nov 2021 11:32:26 -0800
Subject: [R] Plotly
In-Reply-To: <CAGxFJbSjKRavogTEr_XcrMdANJOTPuzkNCfCvmdfjtSi+TN94A@mail.gmail.com>
References: <001201d7d4cd$f87b3fd0$e971bf70$.ref@sbcglobal.net>
 <001201d7d4cd$f87b3fd0$e971bf70$@sbcglobal.net>
 <CAGxFJbSjKRavogTEr_XcrMdANJOTPuzkNCfCvmdfjtSi+TN94A@mail.gmail.com>
Message-ID: <25EE1F8E-6815-4C07-8100-C085EEFE22E8@dcn.davis.ca.us>

I don't know any details of Plotly, but Windows does have a directory depth limit that can be very frustrating. I think there is a registry setting that can help alleviate, but it breaks some things so it is highly dependent on how you use your computer as to whether you can take advantage of that setting.

On November 8, 2021 11:15:59 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>As Plotly for R is a product of private company, your query is off
>topic here (though you may get a response if you are lucky). They have
>their own Help forum to which you should post instead:
>
>https://community.plotly.com/c/graphing-libraries/r/9
>
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>On Mon, Nov 8, 2021 at 10:25 AM Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>>
>> R Help Forum
>>
>>
>>
>> Anyone know if there are Plotly issues ones need to be aware of. For example
>> I quite often receive the following error "Error in dirname(to) : path too
>> long." I find there is no one fix. Is there some sort of Windows /Plotly
>> naming restrictions???
>>
>>
>>
>> # create a line chart displaying launches by agency type, with highlighting
>>
>> shared_launches %>%
>>
>>   plot_ly(x = ~launch_year, y = ~n, color = ~agency_type) %>%
>>
>>   add_lines() %>%
>>
>>   highlight()
>>
>>
>>
>> Jeff
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @@mo|n@r @end|ng |rom @bcg|ob@|@net  Mon Nov  8 20:57:24 2021
From: @@mo|n@r @end|ng |rom @bcg|ob@|@net (Stephen P. Molnar)
Date: Mon, 8 Nov 2021 14:57:24 -0500
Subject: [R] Problem Compiling v-4.x.x
References: <61898124.7060902.ref@sbcglobal.net>
Message-ID: <61898124.7060902@sbcglobal.net>

I have uptodate Debian Buster on my Linux platform and have been 
compiling R distros for quite some time, usually with success.

This time I have encountered the same error in my attempts to compile 
v-4..1.2 and then, when that failed, I had the same error with v-4.1.0.

The error in both cases was:

/home/comp/Downloads/R Packages/R-4.1.0/R-4.1.0/etc/Makeconf:10: 
Packages/R-4.1.0/R-4.1.0/share/make/vars.mk: No such file or directory.

I don't have the faintest idea as to what is going on, and, even worse, 
I don't know how to fix it.

Help will be greatly appreciated.

Thanks in advance.

-- 
Stephen P. Molnar, Ph.D.
www.molecular-modeling.net
614.312.7528 (c)
Skype:  smolnar1


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Nov  8 20:59:16 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 8 Nov 2021 13:59:16 -0600
Subject: [R] Plotly
In-Reply-To: <CAGxFJbSjKRavogTEr_XcrMdANJOTPuzkNCfCvmdfjtSi+TN94A@mail.gmail.com>
References: <001201d7d4cd$f87b3fd0$e971bf70$.ref@sbcglobal.net>
 <001201d7d4cd$f87b3fd0$e971bf70$@sbcglobal.net>
 <CAGxFJbSjKRavogTEr_XcrMdANJOTPuzkNCfCvmdfjtSi+TN94A@mail.gmail.com>
Message-ID: <001c01d7d4db$1c9c2340$55d469c0$@sbcglobal.net>

Bert

Ok I'll give that a shot too.

Jeff

-----Original Message-----
From: Bert Gunter <bgunter.4567 at gmail.com> 
Sent: Monday, November 8, 2021 1:16 PM
To: reichmanj at sbcglobal.net
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Plotly

As Plotly for R is a product of private company, your query is off topic here (though you may get a response if you are lucky). They have their own Help forum to which you should post instead:

https://community.plotly.com/c/graphing-libraries/r/9


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, Nov 8, 2021 at 10:25 AM Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>
> R Help Forum
>
>
>
> Anyone know if there are Plotly issues ones need to be aware of. For 
> example I quite often receive the following error "Error in 
> dirname(to) : path too long." I find there is no one fix. Is there 
> some sort of Windows /Plotly naming restrictions???
>
>
>
> # create a line chart displaying launches by agency type, with 
> highlighting
>
> shared_launches %>%
>
>   plot_ly(x = ~launch_year, y = ~n, color = ~agency_type) %>%
>
>   add_lines() %>%
>
>   highlight()
>
>
>
> Jeff
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov  8 21:07:37 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 8 Nov 2021 23:07:37 +0300
Subject: [R] Problem Compiling v-4.x.x
In-Reply-To: <61898124.7060902@sbcglobal.net>
References: <61898124.7060902.ref@sbcglobal.net>
 <61898124.7060902@sbcglobal.net>
Message-ID: <20211108230737.217e8f7f@Tarkus>

On Mon, 8 Nov 2021 14:57:24 -0500
"Stephen P. Molnar" <s.molnar at sbcglobal.net> wrote:

> /home/comp/Downloads/R Packages/R-4.1.0/R-4.1.0/etc/Makeconf:10:
> Packages/R-4.1.0/R-4.1.0/share/make/vars.mk: No such file or directory

This is the case of Make breaking things by splitting the file path by
whitespace. Line 9 of Makeconf even contains a comment regarding this:

>> ## This fails if it contains spaces, or if it is quoted

Rename "R Packages" to R_Packages (or anything else without spaces in
it) to work around the error.

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Nov  8 21:15:12 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 8 Nov 2021 15:15:12 -0500
Subject: [R] Problem Compiling v-4.x.x
In-Reply-To: <61898124.7060902@sbcglobal.net>
References: <61898124.7060902.ref@sbcglobal.net>
 <61898124.7060902@sbcglobal.net>
Message-ID: <21dccfe9-203d-3c4f-78e3-34a2d5522cd3@gmail.com>

On 08/11/2021 2:57 p.m., Stephen P. Molnar wrote:
> I have uptodate Debian Buster on my Linux platform and have been
> compiling R distros for quite some time, usually with success.
> 
> This time I have encountered the same error in my attempts to compile
> v-4..1.2 and then, when that failed, I had the same error with v-4.1.0.
> 
> The error in both cases was:
> 
> /home/comp/Downloads/R Packages/R-4.1.0/R-4.1.0/etc/Makeconf:10:
> Packages/R-4.1.0/R-4.1.0/share/make/vars.mk: No such file or directory.
> 
> I don't have the faintest idea as to what is going on, and, even worse,
> I don't know how to fix it.
> 
> Help will be greatly appreciated.
> 

I think you'll need to describe what you did that led to this error.

Duncan Murdoch


From @@mo|n@r @end|ng |rom @bcg|ob@|@net  Mon Nov  8 21:56:15 2021
From: @@mo|n@r @end|ng |rom @bcg|ob@|@net (Stephen P. Molnar)
Date: Mon, 8 Nov 2021 15:56:15 -0500
Subject: [R] Problem Compiling v-4.x.x
In-Reply-To: <21dccfe9-203d-3c4f-78e3-34a2d5522cd3@gmail.com>
References: <61898124.7060902.ref@sbcglobal.net>
 <61898124.7060902@sbcglobal.net>
 <21dccfe9-203d-3c4f-78e3-34a2d5522cd3@gmail.com>
Message-ID: <61898EEF.8070903@sbcglobal.net>



On 11/08/2021 03:15 PM, Duncan Murdoch wrote:
> On 08/11/2021 2:57 p.m., Stephen P. Molnar wrote:
>> I have uptodate Debian Buster on my Linux platform and have been
>> compiling R distros for quite some time, usually with success.
>>
>> This time I have encountered the same error in my attempts to compile
>> v-4..1.2 and then, when that failed, I had the same error with v-4.1.0.
>>
>> The error in both cases was:
>>
>> /home/comp/Downloads/R Packages/R-4.1.0/R-4.1.0/etc/Makeconf:10:
>> Packages/R-4.1.0/R-4.1.0/share/make/vars.mk: No such file or directory.
>>
>> I don't have the faintest idea as to what is going on, and, even worse,
>> I don't know how to fix it.
>>
>> Help will be greatly appreciated.
>>
>
> I think you'll need to describe what you did that led to this error.
>
> Duncan Murdoch
>
True, very true. Sorroy for the omission.

./configure
/make

-- 
Stephen P. Molnar, Ph.D.
www.molecular-modeling.net
614.312.7528 (c)
Skype:  smolnar1


From m@hou@h@ry @end|ng |rom gm@||@com  Sun Nov  7 17:19:16 2021
From: m@hou@h@ry @end|ng |rom gm@||@com (Mohammad Shoushary)
Date: Sun, 7 Nov 2021 10:19:16 -0600
Subject: [R] TRCUKING 4
Message-ID: <CAMsUFaS1igRnnv=5K_pVd7PKJOOKbqghwt_ANGuS2obj53jarQ@mail.gmail.com>

Hi Guys,
I wonder how to opt trucking 4 once loading "TRUCKING" file.
I loaded: load("TRUCKING.Rdata")
but I need the file that has 4 carriers, any clue please? I appreciate it


Mohammad

	[[alternative HTML version deleted]]


From cuev@s m@iii@g oii cicese@mx  Tue Nov  9 02:59:46 2021
From: cuev@s m@iii@g oii cicese@mx (cuev@s m@iii@g oii cicese@mx)
Date: Mon, 8 Nov 2021 17:59:46 -0800
Subject: [R] Error: unexpected symbol in "read.csv(12agosto.csv after
 installing Monterey
Message-ID: <EB9D604F-1585-459B-8E57-3004B579B454@cicese.mx>

\n<<SEND AS PLAIN TEXT!>>\n\n \n<<Write your query here, using your example code to illustrate>> \n<<End with your name and affiliation>>\n\n\n\n
--please do not edit the information below--

R Version:
platform = aarch64-apple-darwin20
arch = aarch64
os = darwin20
system = aarch64, darwin20
status = 
major = 4
minor = 1.2
year = 2021
month = 11
day = 01
svn rev = 81115
language = R
version.string = R version 4.1.2 (2021-11-01)
nickname = Bird Hippie

GUI:
R-GUI 1.77 (8007)

Locale:
en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

Search Path:
.GlobalEnv, tools:RGUI, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, package:methods,
Autoloads, package:base


--------------------------------------
Horacio, de la Cueva, PhD
CICESE
Biolog?a Experimental y Aplicada
Carretera Ensenada Tijiuana No. 3918
Zona Playitas,
Ensenada BC
22760
M?xico

US Mailing Address:
P.O. Box, 430222
San Ysidro, CA 92143

cuevas at cicese.mx
cohevolution at gmail.com
cohevolution at icloud.com
https://horaciodelacueva.blogspot.mx/
cel +52 646 171 5485

ORCID
0000-0002-5280-6458

Web of Science ResearcherID  
ABA-4045-2020.


	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Nov  9 05:14:24 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 8 Nov 2021 20:14:24 -0800
Subject: [R] Error: unexpected symbol in "read.csv(12agosto.csv after
 installing Monterey
In-Reply-To: <EB9D604F-1585-459B-8E57-3004B579B454@cicese.mx>
References: <EB9D604F-1585-459B-8E57-3004B579B454@cicese.mx>
Message-ID: <3e596289-3340-6e09-74aa-7ba2ef696351@comcast.net>

There is a dedicated mailing list for Mac specific questions. You should 
subscribe before posting further but your first posting will still get 
moderated so don't send second postings because you think it's taking 
too long:

r-sig-mac at r-project.org

And I'm a Mac user but do not understand what code was used. And I don't 
think the complete error message was included on the subject line. You 
should paste the complete code that was used and indicate whether it 
occurs with every file or only one particular file or file name. And do 
include the complete error message in the body of the email.

(I'm wondering if there could be an issue with encoding of a file name 
since you are using a US locale but the MacOS may be set for a Mexican 
locale.)

-- 

David

On 11/8/21 5:59 PM, cuevas at cicese.mx wrote:
> \n<<SEND AS PLAIN TEXT!>>\n\n \n<<Write your query here, using your example code to illustrate>> \n<<End with your name and affiliation>>\n\n\n\n
> --please do not edit the information below--
>
> R Version:
> platform = aarch64-apple-darwin20
> arch = aarch64
> os = darwin20
> system = aarch64, darwin20
> status =
> major = 4
> minor = 1.2
> year = 2021
> month = 11
> day = 01
> svn rev = 81115
> language = R
> version.string = R version 4.1.2 (2021-11-01)
> nickname = Bird Hippie
>
> GUI:
> R-GUI 1.77 (8007)
>
> Locale:
> en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> Search Path:
> .GlobalEnv, tools:RGUI, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, package:methods,
> Autoloads, package:base
>
>
> --------------------------------------
> Horacio, de la Cueva, PhD
> CICESE
> Biolog?a Experimental y Aplicada
> Carretera Ensenada Tijiuana No. 3918
> Zona Playitas,
> Ensenada BC
> 22760
> M?xico
>
> US Mailing Address:
> P.O. Box, 430222
> San Ysidro, CA 92143
>
> cuevas at cicese.mx
> cohevolution at gmail.com
> cohevolution at icloud.com
> https://horaciodelacueva.blogspot.mx/
> cel +52 646 171 5485
>
> ORCID
> 0000-0002-5280-6458
>
> Web of Science ResearcherID
> ABA-4045-2020.
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rmh @end|ng |rom temp|e@edu  Tue Nov  9 05:20:40 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 9 Nov 2021 04:20:40 +0000
Subject: [R] 
 [External] Error: unexpected symbol in "read.csv(12agosto.csv
 after installing Monterey
In-Reply-To: <3e596289-3340-6e09-74aa-7ba2ef696351@comcast.net>
References: <EB9D604F-1585-459B-8E57-3004B579B454@cicese.mx>
 <3e596289-3340-6e09-74aa-7ba2ef696351@comcast.net>
Message-ID: <F4D31920-152B-4D0C-A8E7-0D330C549B55@temple.edu>

yes, follow David Winsemius' advice.

In this example, it looks not to be a mac issue, but a new R user issue.
The partial message in the subject says

read.csv(12agosto.csv

The correct syntax is to quote the name of a file, so it should be

read.csv("12agosto.csv")

> On Nov 08, 2021, at 23:14, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> There is a dedicated mailing list for Mac specific questions. You should subscribe before posting further but your first posting will still get moderated so don't send second postings because you think it's taking too long:
> 
> r-sig-mac at r-project.org
> 
> And I'm a Mac user but do not understand what code was used. And I don't think the complete error message was included on the subject line. You should paste the complete code that was used and indicate whether it occurs with every file or only one particular file or file name. And do include the complete error message in the body of the email.
> 
> (I'm wondering if there could be an issue with encoding of a file name since you are using a US locale but the MacOS may be set for a Mexican locale.)
> 
> -- 
> 
> David
> 
> On 11/8/21 5:59 PM, cuevas at cicese.mx wrote:
>> \n<<SEND AS PLAIN TEXT!>>\n\n \n<<Write your query here, using your example code to illustrate>> \n<<End with your name and affiliation>>\n\n\n\n
>> --please do not edit the information below--
>> 
>> R Version:
>> platform = aarch64-apple-darwin20
>> arch = aarch64
>> os = darwin20
>> system = aarch64, darwin20
>> status =
>> major = 4
>> minor = 1.2
>> year = 2021
>> month = 11
>> day = 01
>> svn rev = 81115
>> language = R
>> version.string = R version 4.1.2 (2021-11-01)
>> nickname = Bird Hippie
>> 
>> GUI:
>> R-GUI 1.77 (8007)
>> 
>> Locale:
>> en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> 
>> Search Path:
>> .GlobalEnv, tools:RGUI, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, package:methods,
>> Autoloads, package:base
>> 
>> 
>> --------------------------------------
>> Horacio, de la Cueva, PhD
>> CICESE
>> Biolog?a Experimental y Aplicada
>> Carretera Ensenada Tijiuana No. 3918
>> Zona Playitas,
>> Ensenada BC
>> 22760
>> M?xico
>> 
>> US Mailing Address:
>> P.O. Box, 430222
>> San Ysidro, CA 92143
>> 
>> cuevas at cicese.mx
>> cohevolution at gmail.com
>> cohevolution at icloud.com
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fhoraciodelacueva.blogspot.mx%2F&amp;data=04%7C01%7Crmh%40temple.edu%7C21378c448b8c4ac5fe5108d9a3377ecc%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637720281054221658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=H0J9lu2L13rA1OMGHVntWo4bRBl6Ckoyr1OlpvrMkqI%3D&amp;reserved=0
>> cel +52 646 171 5485
>> 
>> ORCID
>> 0000-0002-5280-6458
>> 
>> Web of Science ResearcherID
>> ABA-4045-2020.
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7C21378c448b8c4ac5fe5108d9a3377ecc%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637720281054221658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=pHYoYETeVrMbKKNk7MKQ3EHD9tGrj8vLtns4xRbTzLs%3D&amp;reserved=0
>> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7C21378c448b8c4ac5fe5108d9a3377ecc%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637720281054221658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=lu3zLdD%2FXtpYwZtOJM00DDZni6e1GBdSpRS4k2D7IjQ%3D&amp;reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7C21378c448b8c4ac5fe5108d9a3377ecc%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637720281054221658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=pHYoYETeVrMbKKNk7MKQ3EHD9tGrj8vLtns4xRbTzLs%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7C21378c448b8c4ac5fe5108d9a3377ecc%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637720281054221658%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=lu3zLdD%2FXtpYwZtOJM00DDZni6e1GBdSpRS4k2D7IjQ%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Nov  9 10:52:06 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Nov 2021 04:52:06 -0500
Subject: [R] Problem Compiling v-4.x.x
In-Reply-To: <61898EEF.8070903@sbcglobal.net>
References: <61898124.7060902.ref@sbcglobal.net>
 <61898124.7060902@sbcglobal.net>
 <21dccfe9-203d-3c4f-78e3-34a2d5522cd3@gmail.com>
 <61898EEF.8070903@sbcglobal.net>
Message-ID: <430310be-89b5-c419-4fe0-fe9214d95721@gmail.com>

On 08/11/2021 3:56 p.m., Stephen P. Molnar wrote:
> 
> 
> On 11/08/2021 03:15 PM, Duncan Murdoch wrote:
>> On 08/11/2021 2:57 p.m., Stephen P. Molnar wrote:
>>> I have uptodate Debian Buster on my Linux platform and have been
>>> compiling R distros for quite some time, usually with success.
>>>
>>> This time I have encountered the same error in my attempts to compile
>>> v-4..1.2 and then, when that failed, I had the same error with v-4.1.0.
>>>
>>> The error in both cases was:
>>>
>>> /home/comp/Downloads/R Packages/R-4.1.0/R-4.1.0/etc/Makeconf:10:
>>> Packages/R-4.1.0/R-4.1.0/share/make/vars.mk: No such file or directory.
>>>
>>> I don't have the faintest idea as to what is going on, and, even worse,
>>> I don't know how to fix it.
>>>
>>> Help will be greatly appreciated.
>>>
>>
>> I think you'll need to describe what you did that led to this error.
>>
>> Duncan Murdoch
>>
> True, very true. Sorroy for the omission.
> 
> ./configure
> /make
> 

Hopefully Ivan's suggestion solves your problem. One thing I'd suggest: 
building in a different dir than the source.  All you need is to put the 
source in some dir (e.g. "src"), switch to an empty dir, and run 
src/configure from there, followed by make.  This makes for a cleaner 
separation of source and products.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Nov  9 10:54:27 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Nov 2021 04:54:27 -0500
Subject: [R] Error: unexpected symbol in "read.csv(12agosto.csv after
 installing Monterey
In-Reply-To: <EB9D604F-1585-459B-8E57-3004B579B454@cicese.mx>
References: <EB9D604F-1585-459B-8E57-3004B579B454@cicese.mx>
Message-ID: <66ad9038-cf41-7fda-94df-f6d76602e704@gmail.com>

It looks as though you ran

  read.csv(12agosto.csv)

You need to put the filename in quotes:

  read.csv("12agosto.csv")

Duncan Murdoch

On 08/11/2021 8:59 p.m., cuevas at cicese.mx wrote:
> \n<<SEND AS PLAIN TEXT!>>\n\n \n<<Write your query here, using your example code to illustrate>> \n<<End with your name and affiliation>>\n\n\n\n
> --please do not edit the information below--
> 
> R Version:
> platform = aarch64-apple-darwin20
> arch = aarch64
> os = darwin20
> system = aarch64, darwin20
> status =
> major = 4
> minor = 1.2
> year = 2021
> month = 11
> day = 01
> svn rev = 81115
> language = R
> version.string = R version 4.1.2 (2021-11-01)
> nickname = Bird Hippie
> 
> GUI:
> R-GUI 1.77 (8007)
> 
> Locale:
> en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> Search Path:
> .GlobalEnv, tools:RGUI, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, package:methods,
> Autoloads, package:base
> 
> 
> --------------------------------------
> Horacio, de la Cueva, PhD
> CICESE
> Biolog?a Experimental y Aplicada
> Carretera Ensenada Tijiuana No. 3918
> Zona Playitas,
> Ensenada BC
> 22760
> M?xico
> 
> US Mailing Address:
> P.O. Box, 430222
> San Ysidro, CA 92143
> 
> cuevas at cicese.mx
> cohevolution at gmail.com
> cohevolution at icloud.com
> https://horaciodelacueva.blogspot.mx/
> cel +52 646 171 5485
> 
> ORCID
> 0000-0002-5280-6458
> 
> Web of Science ResearcherID
> ABA-4045-2020.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Nov  9 13:13:24 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 9 Nov 2021 12:13:24 +0000
Subject: [R] TRCUKING 4
In-Reply-To: <CAMsUFaS1igRnnv=5K_pVd7PKJOOKbqghwt_ANGuS2obj53jarQ@mail.gmail.com>
References: <CAMsUFaS1igRnnv=5K_pVd7PKJOOKbqghwt_ANGuS2obj53jarQ@mail.gmail.com>
Message-ID: <2906f465-8ec5-8c29-1526-6f6b4e538f03@sapo.pt>

Hello,

We can't really answer your question, we don't have access to the file.
But here are some questions/tips.

1. R is case sensitive, is it TRUCKING.RDtata or TRUCKING.Rdtata?
2. In a clean R session, is there any warning or error message after 
running load("TRUCKING.Rdata")?
3. If not, what is the output of ls()? This will give you the objects in 
the global environment and RData files may store many objects. Exactly 
what was loaded?
4. I don't understand what do you mean by "trucking 4". Is it the name 
of a data set you expect to be in that file? If the file with "4 
carriers" was loaded, try running str(tablename) to see its structure. 
(tablename is to be replaced by the table's actual name).


Hope this helps,

Rui Barradas


?s 16:19 de 07/11/21, Mohammad Shoushary escreveu:
> Hi Guys,
> I wonder how to opt trucking 4 once loading "TRUCKING" file.
> I loaded: load("TRUCKING.Rdata")
> but I  4 carrierneed the file that hass, any clue please? I appreciate it
> 
> 
> Mohammad
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @@mo|n@r @end|ng |rom @bcg|ob@|@net  Tue Nov  9 15:22:41 2021
From: @@mo|n@r @end|ng |rom @bcg|ob@|@net (Stephen P. Molnar)
Date: Tue, 9 Nov 2021 09:22:41 -0500
Subject: [R] Problem Compiling v-4.x.x
In-Reply-To: <430310be-89b5-c419-4fe0-fe9214d95721@gmail.com>
References: <61898124.7060902.ref@sbcglobal.net>
 <61898124.7060902@sbcglobal.net>
 <21dccfe9-203d-3c4f-78e3-34a2d5522cd3@gmail.com>
 <61898EEF.8070903@sbcglobal.net>
 <430310be-89b5-c419-4fe0-fe9214d95721@gmail.com>
Message-ID: <618A8431.7060906@sbcglobal.net>



On 11/09/2021 04:52 AM, Duncan Murdoch wrote:
> On 08/11/2021 3:56 p.m., Stephen P. Molnar wrote:
>>
>>
>> On 11/08/2021 03:15 PM, Duncan Murdoch wrote:
>>> On 08/11/2021 2:57 p.m., Stephen P. Molnar wrote:
>>>> I have uptodate Debian Buster on my Linux platform and have been
>>>> compiling R distros for quite some time, usually with success.
>>>>
>>>> This time I have encountered the same error in my attempts to compile
>>>> v-4..1.2 and then, when that failed, I had the same error with 
>>>> v-4.1.0.
>>>>
>>>> The error in both cases was:
>>>>
>>>> /home/comp/Downloads/R Packages/R-4.1.0/R-4.1.0/etc/Makeconf:10:
>>>> Packages/R-4.1.0/R-4.1.0/share/make/vars.mk: No such file or 
>>>> directory.
>>>>
>>>> I don't have the faintest idea as to what is going on, and, even 
>>>> worse,
>>>> I don't know how to fix it.
>>>>
>>>> Help will be greatly appreciated.
>>>>
>>>
>>> I think you'll need to describe what you did that led to this error.
>>>
>>> Duncan Murdoch
>>>
>> True, very true. Sorroy for the omission.
>>
>> ./configure
>> /make
>>
>
> Hopefully Ivan's suggestion solves your problem. One thing I'd 
> suggest: building in a different dir than the source.  All you need is 
> to put the source in some dir (e.g. "src"), switch to an empty dir, 
> and run src/configure from there, followed by make. This makes for a 
> cleaner separation of source and products.
>
> Duncan Murdoch
>
That was certainly a red-faced forehead slapper!!

I should have known better. I changed the name of ~/Downloads/R Packages 
to ~/Downloads/R_Packages and the problem went away.

Many thanks to you all for your patience and solutions.

-- 
Stephen P. Molnar, Ph.D.
www.molecular-modeling.net
614.312.7528 (c)
Skype:  smolnar1


From @rn@ud@|e|dm@nn @end|ng |rom gm@||@com  Tue Nov  9 14:27:38 2021
From: @rn@ud@|e|dm@nn @end|ng |rom gm@||@com (Arnaud FELD)
Date: Tue, 9 Nov 2021 14:27:38 +0100
Subject: [R] (no subject)
Message-ID: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>

Hi,

I use that mailing list because I?ve tried to send a message to the
r-core address and received :

>"Non-members are typically *NOT* allowed to post messages to this
>private developers' list. Please use an appropriate mailing list (from
>http://www.r-project.org/mail.html). For R packages, use
>maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
>address).

 I would like to borrow most of the code of stats :: window within my
package disaggR, which has an uncompatible license as it is MIT not
GPL2. window has some extra overhead because of the calling of time()
at the beginning of the function (that is only used for extend =
FALSE). Copying the function and modifying it would allow me a bit of
optimization, but I need some agreement as my package is MIT.
Is it possible ?

Thanks,

Arnaud FELDMANN


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov  9 20:34:12 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 9 Nov 2021 11:34:12 -0800
Subject: [R] (no subject)
In-Reply-To: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
References: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
Message-ID: <CAGxFJbTM+YdDRE75+bEuFkTi8y-3b1zOUZp1030HJwajAGuv_A@mail.gmail.com>

Questions about package development should be posted to
R-package-devel (**not R-devel**).
See https://www.r-project.org/mail.html  for details.

(I am not sure that they get into legal weeds there, but it seems like
the right place to try).

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Tue, Nov 9, 2021 at 11:17 AM Arnaud FELD <arnaud.feldmann at gmail.com> wrote:
>
> Hi,
>
> I use that mailing list because I?ve tried to send a message to the
> r-core address and received :
>
> >"Non-members are typically *NOT* allowed to post messages to this
> >private developers' list. Please use an appropriate mailing list (from
> >http://www.r-project.org/mail.html). For R packages, use
> >maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
> >address).
>
>  I would like to borrow most of the code of stats :: window within my
> package disaggR, which has an uncompatible license as it is MIT not
> GPL2. window has some extra overhead because of the calling of time()
> at the beginning of the function (that is only used for extend =
> FALSE). Copying the function and modifying it would allow me a bit of
> optimization, but I need some agreement as my package is MIT.
> Is it possible ?
>
> Thanks,
>
> Arnaud FELDMANN
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Nov  9 20:45:25 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Nov 2021 11:45:25 -0800
Subject: [R] (no subject)
In-Reply-To: <CAGxFJbTM+YdDRE75+bEuFkTi8y-3b1zOUZp1030HJwajAGuv_A@mail.gmail.com>
References: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
 <CAGxFJbTM+YdDRE75+bEuFkTi8y-3b1zOUZp1030HJwajAGuv_A@mail.gmail.com>
Message-ID: <8EB39E47-57AB-4B04-A403-72A5302F3637@dcn.davis.ca.us>

This question isn't a "how to do package development" question... this is about a specific package so you should send email to the package developer identified by the maintainer() function.

I can't foresee this request finding a positive response from R Core, but email seems the most correct approach.

On November 9, 2021 11:34:12 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>Questions about package development should be posted to
>R-package-devel (**not R-devel**).
>See https://www.r-project.org/mail.html  for details.
>
>(I am not sure that they get into legal weeds there, but it seems like
>the right place to try).
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>On Tue, Nov 9, 2021 at 11:17 AM Arnaud FELD <arnaud.feldmann at gmail.com> wrote:
>>
>> Hi,
>>
>> I use that mailing list because I?ve tried to send a message to the
>> r-core address and received :
>>
>> >"Non-members are typically *NOT* allowed to post messages to this
>> >private developers' list. Please use an appropriate mailing list (from
>> >http://www.r-project.org/mail.html). For R packages, use
>> >maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
>> >address).
>>
>>  I would like to borrow most of the code of stats :: window within my
>> package disaggR, which has an uncompatible license as it is MIT not
>> GPL2. window has some extra overhead because of the calling of time()
>> at the beginning of the function (that is only used for extend =
>> FALSE). Copying the function and modifying it would allow me a bit of
>> optimization, but I need some agreement as my package is MIT.
>> Is it possible ?
>>
>> Thanks,
>>
>> Arnaud FELDMANN
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Nov  9 21:19:18 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Nov 2021 15:19:18 -0500
Subject: [R] (no subject)
In-Reply-To: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
References: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
Message-ID: <5f3bf5d4-ee7d-2043-1151-be087e76768d@gmail.com>

On 09/11/2021 8:27 a.m., Arnaud FELD wrote:
> Hi,
> 
> I use that mailing list because I?ve tried to send a message to the
> r-core address and received :
> 
>> "Non-members are typically *NOT* allowed to post messages to this
>> private developers' list. Please use an appropriate mailing list (from
>> http://www.r-project.org/mail.html). For R packages, use
>> maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
>> address).
> 
>   I would like to borrow most of the code of stats :: window within my
> package disaggR, which has an uncompatible license as it is MIT not
> GPL2. window has some extra overhead because of the calling of time()
> at the beginning of the function (that is only used for extend =
> FALSE). Copying the function and modifying it would allow me a bit of
> optimization, but I need some agreement as my package is MIT.
> Is it possible ?

I would assume not.  Most of R has many, many authors, and some of us 
will not agree to changing the license to a more permissive form.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Nov  9 21:21:18 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Nov 2021 15:21:18 -0500
Subject: [R] (no subject)
In-Reply-To: <8EB39E47-57AB-4B04-A403-72A5302F3637@dcn.davis.ca.us>
References: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
 <CAGxFJbTM+YdDRE75+bEuFkTi8y-3b1zOUZp1030HJwajAGuv_A@mail.gmail.com>
 <8EB39E47-57AB-4B04-A403-72A5302F3637@dcn.davis.ca.us>
Message-ID: <c9694237-4685-56c1-e639-8028bc6cdf52@gmail.com>

On 09/11/2021 2:45 p.m., Jeff Newmiller wrote:
> This question isn't a "how to do package development" question... this is about a specific package so you should send email to the package developer identified by the maintainer() function.

I think Arnaud is the package developer; his question is whether he can 
copy R source into his package.

Duncan Murdoch

> 
> I can't foresee this request finding a positive response from R Core, but email seems the most correct approach.
> 
> On November 9, 2021 11:34:12 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> Questions about package development should be posted to
>> R-package-devel (**not R-devel**).
>> See https://www.r-project.org/mail.html  for details.
>>
>> (I am not sure that they get into legal weeds there, but it seems like
>> the right place to try).
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>> On Tue, Nov 9, 2021 at 11:17 AM Arnaud FELD <arnaud.feldmann at gmail.com> wrote:
>>>
>>> Hi,
>>>
>>> I use that mailing list because I?ve tried to send a message to the
>>> r-core address and received :
>>>
>>>> "Non-members are typically *NOT* allowed to post messages to this
>>>> private developers' list. Please use an appropriate mailing list (from
>>>> http://www.r-project.org/mail.html). For R packages, use
>>>> maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
>>>> address).
>>>
>>>   I would like to borrow most of the code of stats :: window within my
>>> package disaggR, which has an uncompatible license as it is MIT not
>>> GPL2. window has some extra overhead because of the calling of time()
>>> at the beginning of the function (that is only used for extend =
>>> FALSE). Copying the function and modifying it would allow me a bit of
>>> optimization, but I need some agreement as my package is MIT.
>>> Is it possible ?
>>>
>>> Thanks,
>>>
>>> Arnaud FELDMANN
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Nov  9 21:52:50 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Nov 2021 12:52:50 -0800
Subject: [R] (no subject)
In-Reply-To: <c9694237-4685-56c1-e639-8028bc6cdf52@gmail.com>
References: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
 <CAGxFJbTM+YdDRE75+bEuFkTi8y-3b1zOUZp1030HJwajAGuv_A@mail.gmail.com>
 <8EB39E47-57AB-4B04-A403-72A5302F3637@dcn.davis.ca.us>
 <c9694237-4685-56c1-e639-8028bc6cdf52@gmail.com>
Message-ID: <A4F8F687-E058-446A-9407-4A192B0090D3@dcn.davis.ca.us>

I understand that, but the reason he gives for copying code from the stats package is to change the license. That decision seems like something that requires a very direct communication with/permission from the maintainer.

On November 9, 2021 12:21:18 PM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 09/11/2021 2:45 p.m., Jeff Newmiller wrote:
>> This question isn't a "how to do package development" question... this is about a specific package so you should send email to the package developer identified by the maintainer() function.
>
>I think Arnaud is the package developer; his question is whether he can 
>copy R source into his package.
>
>Duncan Murdoch
>
>> 
>> I can't foresee this request finding a positive response from R Core, but email seems the most correct approach.
>> 
>> On November 9, 2021 11:34:12 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> Questions about package development should be posted to
>>> R-package-devel (**not R-devel**).
>>> See https://www.r-project.org/mail.html  for details.
>>>
>>> (I am not sure that they get into legal weeds there, but it seems like
>>> the right place to try).
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming along
>>> and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>> On Tue, Nov 9, 2021 at 11:17 AM Arnaud FELD <arnaud.feldmann at gmail.com> wrote:
>>>>
>>>> Hi,
>>>>
>>>> I use that mailing list because I?ve tried to send a message to the
>>>> r-core address and received :
>>>>
>>>>> "Non-members are typically *NOT* allowed to post messages to this
>>>>> private developers' list. Please use an appropriate mailing list (from
>>>>> http://www.r-project.org/mail.html). For R packages, use
>>>>> maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
>>>>> address).
>>>>
>>>>   I would like to borrow most of the code of stats :: window within my
>>>> package disaggR, which has an uncompatible license as it is MIT not
>>>> GPL2. window has some extra overhead because of the calling of time()
>>>> at the beginning of the function (that is only used for extend =
>>>> FALSE). Copying the function and modifying it would allow me a bit of
>>>> optimization, but I need some agreement as my package is MIT.
>>>> Is it possible ?
>>>>
>>>> Thanks,
>>>>
>>>> Arnaud FELDMANN
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Nov  9 22:51:07 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Nov 2021 16:51:07 -0500
Subject: [R] (no subject)
In-Reply-To: <A4F8F687-E058-446A-9407-4A192B0090D3@dcn.davis.ca.us>
References: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
 <CAGxFJbTM+YdDRE75+bEuFkTi8y-3b1zOUZp1030HJwajAGuv_A@mail.gmail.com>
 <8EB39E47-57AB-4B04-A403-72A5302F3637@dcn.davis.ca.us>
 <c9694237-4685-56c1-e639-8028bc6cdf52@gmail.com>
 <A4F8F687-E058-446A-9407-4A192B0090D3@dcn.davis.ca.us>
Message-ID: <b6362c7b-cf65-4bbf-bd57-746537b3c891@gmail.com>

On 09/11/2021 3:52 p.m., Jeff Newmiller wrote:
> I understand that, but the reason he gives for copying code from the stats package is to change the license. That decision seems like something that requires a very direct communication with/permission from the maintainer.

The stats package doesn't give a valid maintainer() address.  It gives a 
vague reference to the r-project.org website, but that website doesn't 
give a contact address.

In fact, the authorship of R is very widely distributed among at least 
dozens of contributors.  Identifying and contacting them all would be a 
nightmare but probably isn't necessary.  However, identifying and 
contacting the necessary ones (the ones who hold copyright on the parts 
he wants to copy) would be very difficult.  Not contacting the relevant 
ones would mean Arnaud's work would be potentially in violation of their 
copyright.

Even if he did manage to contact all the copyright holders, some of them 
would probably not agree to more permissive licenses.  For example, I am 
a copyright holder on some parts of the source, and I wouldn't agree to 
relicensing.

Duncan Murdoch



> 
> On November 9, 2021 12:21:18 PM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 09/11/2021 2:45 p.m., Jeff Newmiller wrote:
>>> This question isn't a "how to do package development" question... this is about a specific package so you should send email to the package developer identified by the maintainer() function.
>>
>> I think Arnaud is the package developer; his question is whether he can
>> copy R source into his package.
>>
>> Duncan Murdoch
>>
>>>
>>> I can't foresee this request finding a positive response from R Core, but email seems the most correct approach.
>>>
>>> On November 9, 2021 11:34:12 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>>> Questions about package development should be posted to
>>>> R-package-devel (**not R-devel**).
>>>> See https://www.r-project.org/mail.html  for details.
>>>>
>>>> (I am not sure that they get into legal weeds there, but it seems like
>>>> the right place to try).
>>>>
>>>> Bert Gunter
>>>>
>>>> "The trouble with having an open mind is that people keep coming along
>>>> and sticking things into it."
>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>
>>>> On Tue, Nov 9, 2021 at 11:17 AM Arnaud FELD <arnaud.feldmann at gmail.com> wrote:
>>>>>
>>>>> Hi,
>>>>>
>>>>> I use that mailing list because I?ve tried to send a message to the
>>>>> r-core address and received :
>>>>>
>>>>>> "Non-members are typically *NOT* allowed to post messages to this
>>>>>> private developers' list. Please use an appropriate mailing list (from
>>>>>> http://www.r-project.org/mail.html). For R packages, use
>>>>>> maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
>>>>>> address).
>>>>>
>>>>>    I would like to borrow most of the code of stats :: window within my
>>>>> package disaggR, which has an uncompatible license as it is MIT not
>>>>> GPL2. window has some extra overhead because of the calling of time()
>>>>> at the beginning of the function (that is only used for extend =
>>>>> FALSE). Copying the function and modifying it would allow me a bit of
>>>>> optimization, but I need some agreement as my package is MIT.
>>>>> Is it possible ?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Arnaud FELDMANN
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>


From @rn@ud@|e|dm@nn @end|ng |rom gm@||@com  Tue Nov  9 23:03:40 2021
From: @rn@ud@|e|dm@nn @end|ng |rom gm@||@com (Arnaud FELD)
Date: Tue, 9 Nov 2021 23:03:40 +0100
Subject: [R] (no subject)
In-Reply-To: <b6362c7b-cf65-4bbf-bd57-746537b3c891@gmail.com>
References: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
 <CAGxFJbTM+YdDRE75+bEuFkTi8y-3b1zOUZp1030HJwajAGuv_A@mail.gmail.com>
 <8EB39E47-57AB-4B04-A403-72A5302F3637@dcn.davis.ca.us>
 <c9694237-4685-56c1-e639-8028bc6cdf52@gmail.com>
 <A4F8F687-E058-446A-9407-4A192B0090D3@dcn.davis.ca.us>
 <b6362c7b-cf65-4bbf-bd57-746537b3c891@gmail.com>
Message-ID: <CAGho6QujBED3yS1z_TOFybD49xU1YVt8nvExa18mn3GXwzQH_Q@mail.gmail.com>

Thanks for your answer. That is helpful even if that is disappointing
for me ;) I can see now that, as R (base and recommended packages) has
had contributions from a lot of people, it's not like a package, you
just can't have a punctual "okay do what you want". I'll have to stick
with a slow window call, I guess.

I was right to ask anyway, and thanks for your advices.

Le mar. 9 nov. 2021 ? 22:51, Duncan Murdoch <murdoch.duncan at gmail.com> a ?crit :
>
> On 09/11/2021 3:52 p.m., Jeff Newmiller wrote:
> > I understand that, but the reason he gives for copying code from the stats package is to change the license. That decision seems like something that requires a very direct communication with/permission from the maintainer.
>
> The stats package doesn't give a valid maintainer() address.  It gives a
> vague reference to the r-project.org website, but that website doesn't
> give a contact address.
>
> In fact, the authorship of R is very widely distributed among at least
> dozens of contributors.  Identifying and contacting them all would be a
> nightmare but probably isn't necessary.  However, identifying and
> contacting the necessary ones (the ones who hold copyright on the parts
> he wants to copy) would be very difficult.  Not contacting the relevant
> ones would mean Arnaud's work would be potentially in violation of their
> copyright.
>
> Even if he did manage to contact all the copyright holders, some of them
> would probably not agree to more permissive licenses.  For example, I am
> a copyright holder on some parts of the source, and I wouldn't agree to
> relicensing.
>
> Duncan Murdoch
>
>
>
> >
> > On November 9, 2021 12:21:18 PM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >> On 09/11/2021 2:45 p.m., Jeff Newmiller wrote:
> >>> This question isn't a "how to do package development" question... this is about a specific package so you should send email to the package developer identified by the maintainer() function.
> >>
> >> I think Arnaud is the package developer; his question is whether he can
> >> copy R source into his package.
> >>
> >> Duncan Murdoch
> >>
> >>>
> >>> I can't foresee this request finding a positive response from R Core, but email seems the most correct approach.
> >>>
> >>> On November 9, 2021 11:34:12 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>>> Questions about package development should be posted to
> >>>> R-package-devel (**not R-devel**).
> >>>> See https://www.r-project.org/mail.html  for details.
> >>>>
> >>>> (I am not sure that they get into legal weeds there, but it seems like
> >>>> the right place to try).
> >>>>
> >>>> Bert Gunter
> >>>>
> >>>> "The trouble with having an open mind is that people keep coming along
> >>>> and sticking things into it."
> >>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>>>
> >>>> On Tue, Nov 9, 2021 at 11:17 AM Arnaud FELD <arnaud.feldmann at gmail.com> wrote:
> >>>>>
> >>>>> Hi,
> >>>>>
> >>>>> I use that mailing list because I?ve tried to send a message to the
> >>>>> r-core address and received :
> >>>>>
> >>>>>> "Non-members are typically *NOT* allowed to post messages to this
> >>>>>> private developers' list. Please use an appropriate mailing list (from
> >>>>>> http://www.r-project.org/mail.html). For R packages, use
> >>>>>> maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
> >>>>>> address).
> >>>>>
> >>>>>    I would like to borrow most of the code of stats :: window within my
> >>>>> package disaggR, which has an uncompatible license as it is MIT not
> >>>>> GPL2. window has some extra overhead because of the calling of time()
> >>>>> at the beginning of the function (that is only used for extend =
> >>>>> FALSE). Copying the function and modifying it would allow me a bit of
> >>>>> optimization, but I need some agreement as my package is MIT.
> >>>>> Is it possible ?
> >>>>>
> >>>>> Thanks,
> >>>>>
> >>>>> Arnaud FELDMANN
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >
>


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Nov 10 11:35:21 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 10 Nov 2021 11:35:21 +0100
Subject: [R] GPL or not (was "(no subject)")
In-Reply-To: <CAGho6QujBED3yS1z_TOFybD49xU1YVt8nvExa18mn3GXwzQH_Q@mail.gmail.com>
References: <CAGho6Qs-rcT9ATgpFmSvpceMv_bC6xG44GRTW=r1mG_VKzh2Sg@mail.gmail.com>
 <CAGxFJbTM+YdDRE75+bEuFkTi8y-3b1zOUZp1030HJwajAGuv_A@mail.gmail.com>
 <8EB39E47-57AB-4B04-A403-72A5302F3637@dcn.davis.ca.us>
 <c9694237-4685-56c1-e639-8028bc6cdf52@gmail.com>
 <A4F8F687-E058-446A-9407-4A192B0090D3@dcn.davis.ca.us>
 <b6362c7b-cf65-4bbf-bd57-746537b3c891@gmail.com>
 <CAGho6QujBED3yS1z_TOFybD49xU1YVt8nvExa18mn3GXwzQH_Q@mail.gmail.com>
Message-ID: <24971.41065.673235.90830@stat.math.ethz.ch>

>>>>> Arnaud FELD 
>>>>>     on Tue, 9 Nov 2021 23:03:40 +0100 writes:

    > Thanks for your answer. That is helpful even if that is disappointing
    > for me ;) I can see now that, as R (base and recommended packages) has
    > had contributions from a lot of people, it's not like a package, you
    > just can't have a punctual "okay do what you want". I'll have to stick
    > with a slow window call, I guess.

    > I was right to ask anyway, and thanks for your advices.

Rather you should think long and hard if and why you  really
really want to stick with a non-GPL licence for you package.
That is the real problem and a shame in my eyes!

R would almost surely never have grown big if the original authors,
Ross Ihaka and Robert Gentleman  hadn't decided to adopt the GNU Public 
Licence (GPL)  very early ... and Ross & Robert said it was to a
large extent because I had insisted that this was important and
would potentially bring quite a few highly qualified people (all
from academia at the time) to adopt and contribute to R.

So, *not* using  GPL  for your package feels slightly as a slap
in the face of all the people who made R what it is today.

and just for those it is not obvious:
You *could* easily copy part of R code into your package if
you switched to use GPL -- of course still attributing these
parts a copyrighted by the R Core team.
Quite a few package maintainers have done so, e.g.,
testthat, actuar, pryr, vetr, DPQ, round, ... {I count about 80
CRAN packages}

Martin

--
Martin Maechler
ETH Zurich  and  R Core team


    > Le mar. 9 nov. 2021 ? 22:51, Duncan Murdoch <murdoch.duncan at gmail.com> a ?crit :
    >> 
    >> On 09/11/2021 3:52 p.m., Jeff Newmiller wrote:
    >> > I understand that, but the reason he gives for copying code from the stats package is to change the license. That decision seems like something that requires a very direct communication with/permission from the maintainer.
    >> 
    >> The stats package doesn't give a valid maintainer() address.  It gives a
    >> vague reference to the r-project.org website, but that website doesn't
    >> give a contact address.
    >> 
    >> In fact, the authorship of R is very widely distributed among at least
    >> dozens of contributors.  Identifying and contacting them all would be a
    >> nightmare but probably isn't necessary.  However, identifying and
    >> contacting the necessary ones (the ones who hold copyright on the parts
    >> he wants to copy) would be very difficult.  Not contacting the relevant
    >> ones would mean Arnaud's work would be potentially in violation of their
    >> copyright.
    >> 
    >> Even if he did manage to contact all the copyright holders, some of them
    >> would probably not agree to more permissive licenses.  For example, I am
    >> a copyright holder on some parts of the source, and I wouldn't agree to
    >> relicensing.
    >> 
    >> Duncan Murdoch
    >> 
    >> 
    >> 
    >> >
    >> > On November 9, 2021 12:21:18 PM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
    >> >> On 09/11/2021 2:45 p.m., Jeff Newmiller wrote:
    >> >>> This question isn't a "how to do package development" question... this is about a specific package so you should send email to the package developer identified by the maintainer() function.
    >> >>
    >> >> I think Arnaud is the package developer; his question is whether he can
    >> >> copy R source into his package.
    >> >>
    >> >> Duncan Murdoch
    >> >>
    >> >>>
    >> >>> I can't foresee this request finding a positive response from R Core, but email seems the most correct approach.
    >> >>>
    >> >>> On November 9, 2021 11:34:12 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
    >> >>>> Questions about package development should be posted to
    >> >>>> R-package-devel (**not R-devel**).
    >> >>>> See https://www.r-project.org/mail.html  for details.
    >> >>>>
    >> >>>> (I am not sure that they get into legal weeds there, but it seems like
    >> >>>> the right place to try).
    >> >>>>
    >> >>>> Bert Gunter
    >> >>>>
    >> >>>> "The trouble with having an open mind is that people keep coming along
    >> >>>> and sticking things into it."
    >> >>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
    >> >>>>
    >> >>>> On Tue, Nov 9, 2021 at 11:17 AM Arnaud FELD <arnaud.feldmann at gmail.com> wrote:
    >> >>>>>
    >> >>>>> Hi,
    >> >>>>>
    >> >>>>> I use that mailing list because I?ve tried to send a message to the
    >> >>>>> r-core address and received :
    >> >>>>>
    >> >>>>>> "Non-members are typically *NOT* allowed to post messages to this
    >> >>>>>> private developers' list. Please use an appropriate mailing list (from
    >> >>>>>> http://www.r-project.org/mail.html). For R packages, use
    >> >>>>>> maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
    >> >>>>>> address).
    >> >>>>>
    >> >>>>>    I would like to borrow most of the code of stats :: window within my
    >> >>>>> package disaggR, which has an uncompatible license as it is MIT not
    >> >>>>> GPL2. window has some extra overhead because of the calling of time()
    >> >>>>> at the beginning of the function (that is only used for extend =
    >> >>>>> FALSE). Copying the function and modifying it would allow me a bit of
    >> >>>>> optimization, but I need some agreement as my package is MIT.
    >> >>>>> Is it possible ?
    >> >>>>>
    >> >>>>> Thanks,
    >> >>>>>
    >> >>>>> Arnaud FELDMANN
    >> >>>>>
    >> >>>>> ______________________________________________
    >> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
    >> >>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >> >>>>> and provide commented, minimal, self-contained, reproducible code.
    >> >>>>
    >> >>>> ______________________________________________
    >> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
    >> >>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >> >>>> and provide commented, minimal, self-contained, reproducible code.
    >> >>>
    >> >>
    >> >
    >> 

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Nov 10 13:27:59 2021
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 10 Nov 2021 13:27:59 +0100
Subject: [R] how to connect libreoffice base odb using R package odbc?
Message-ID: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>

how can I connect to a LibreOffice base odb file using the package odbc for R?
I tried with:

> library(odbc)
> library(DBI)
> con <- dbConnect(odbc::odbc(),
+                  driver = "PostgreSQL Driver",
+                  database = "proof.odb",
+                  uid = "",
+                  pwd = "",
+                  host = "localhost",
+                  port = 5432)
Error: nanodbc/nanodbc.cpp:1021: 00000: [unixODBC][Driver
Manager]Can't open lib 'PostgreSQL Driver' : file not found

> con <- dbConnect(odbc::odbc(),
+ driver = "/usr/local/lib/psqlodbcw.so",
+ database = "proof.odb",
+ uid = "",
+ pwd = "",
+ host = "localhost",
+ port = 5432)
Error: nanodbc/nanodbc.cpp:1021: 00000: [unixODBC][Driver
Manager]Can't open lib '/usr/local/lib/psqlodbcw.so' : file not found

> con <- dbConnect(odbc::odbc(),
+ driver = "/usr/local/lib/libsqlite3odbc.dylib",
+ database = "proof.odb",
+ uid = "",
+ pwd = "",
+ host = "localhost",
+ port = 5432)
Error: nanodbc/nanodbc.cpp:1021: 00000: [unixODBC][Driver
Manager]Can't open lib '/usr/local/lib/libsqlite3odbc.dylib' : file
not found
```

What would be the correct driver/syntax?



-- 
Best regards,
Luigi


From jr@| @end|ng |rom po@teo@no  Wed Nov 10 15:43:12 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Nov 2021 14:43:12 +0000
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
Message-ID: <YYvagGXcSPVqCWX+@posteo.no>

Dear Luigi,

I found the package ODB

	https://cran.r-project.org/web/packages/ODB/ODB.pdf

and was able to install it after 
reconfiguring rJava ...  

The help page ?ODB::odb.open has this 
example:

	odbFile <- tempfile(fileext=".odb")
	odb.create(odbFile, overwrite="do")
	odb <- odb.open(odbFile)
	
	# New table
	odb.write(odb, "CREATE TABLE fruits (name VARCHAR(6) PRIMARY KEY)")
	odb.insert(odb, "fruits", c("banana", "pear", "peach"))
	
	# Writes to the file and closes the connection
	odb.close(odb, write=TRUE)

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211110/8bea907b/attachment.sig>

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Nov 10 16:03:46 2021
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 10 Nov 2021 16:03:46 +0100
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <YYvagGXcSPVqCWX+@posteo.no>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
Message-ID: <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>

Thank you.
I have used ODB, it looks easier to use (and install since it needs
way fewer dependencies than odbc) but I can't run the SQL statement:
```
> library(ODB)
Loading required package: DBI
Loading required package: RJDBC
Loading required package: rJava
> db =  odb.open("proof.odb", jarFile = NULL)
> odb.tables(db)
$day
field.name field.type data.type   name comment
1     day_ID    INTEGER   numeric day_ID      NA
2        Day    INTEGER   numeric    Day      NA

$demographic
field.name field.type data.type       name                  comment
1          ID    INTEGER   numeric         ID Unique identifier (auto)
2    Study_ID    INTEGER   numeric   Study_ID            link to STUDY
[...]
> print(odb.read(db, "SELECT * FROM demographic"))
Error: Error while executing SQL query  : "Unable to retrieve JDBC result set
  JDBC ERROR: Table not found in statement [SELECT * FROM demographic]
  Statement: SELECT * FROM demographic"
```

the database contains a table `demographic` but I can't select it.
Would you know what is the correct syntax?

On Wed, Nov 10, 2021 at 3:43 PM Rasmus Liland <jral at posteo.no> wrote:
>
> Dear Luigi,
>
> I found the package ODB
>
>         https://cran.r-project.org/web/packages/ODB/ODB.pdf
>
> and was able to install it after
> reconfiguring rJava ...
>
> The help page ?ODB::odb.open has this
> example:
>
>         odbFile <- tempfile(fileext=".odb")
>         odb.create(odbFile, overwrite="do")
>         odb <- odb.open(odbFile)
>
>         # New table
>         odb.write(odb, "CREATE TABLE fruits (name VARCHAR(6) PRIMARY KEY)")
>         odb.insert(odb, "fruits", c("banana", "pear", "peach"))
>
>         # Writes to the file and closes the connection
>         odb.close(odb, write=TRUE)
>
> Best,
> Rasmus



-- 
Best regards,
Luigi


From jr@| @end|ng |rom po@teo@no  Wed Nov 10 16:15:02 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Nov 2021 15:15:02 +0000
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
 <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
Message-ID: <YYvh9gA+SabZ5xJA@posteo.no>

Are you willing to send me a part of the 
the proof.odb so I can run the query?  R

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211110/dd500fb3/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Wed Nov 10 16:57:24 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Nov 2021 15:57:24 +0000
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <YYvh9gA+SabZ5xJA@posteo.no>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
 <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
 <YYvh9gA+SabZ5xJA@posteo.no>
Message-ID: <YYvr5J9XKpjGSRIN@posteo.no>

.... also Note in ?ODB::odb.read says:

	To query databases built with OpenOffice 
	or LibreOffice, it may be necessary to 
	quote table and/or column names in 
	?sqlQuery?, as the default behavior of 
	the HSQL engine is to convert unquoted 
	table and column names to uppercases.

:)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211110/c0c659a1/attachment.sig>

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Nov 10 17:05:56 2021
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 10 Nov 2021 17:05:56 +0100
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <YYvh9gA+SabZ5xJA@posteo.no>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
 <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
 <YYvh9gA+SabZ5xJA@posteo.no>
Message-ID: <CAMk+s2T4QZG6PRm7FvpRVoNKjPbLQ_+UjWD-22R8bmMwBzoBTA@mail.gmail.com>

Sure! I am attaching a simplified version of it. I did not see the
quote text; it might be difficult to call all table's names since
there are hundreds of columns..

On Wed, Nov 10, 2021 at 4:15 PM Rasmus Liland <jral at posteo.no> wrote:
>
> Are you willing to send me a part of the
> the proof.odb so I can run the query?  R



-- 
Best regards,
Luigi

From jr@| @end|ng |rom po@teo@no  Wed Nov 10 17:23:06 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Nov 2021 16:23:06 +0000
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <CAMk+s2T4QZG6PRm7FvpRVoNKjPbLQ_+UjWD-22R8bmMwBzoBTA@mail.gmail.com>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
 <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
 <YYvh9gA+SabZ5xJA@posteo.no>
 <CAMk+s2T4QZG6PRm7FvpRVoNKjPbLQ_+UjWD-22R8bmMwBzoBTA@mail.gmail.com>
Message-ID: <YYvx6v+J2i1XiW0G@posteo.no>

Dear Luigi,

I tried quoting ...  This:

	odb = ODB::odb.open("proof.odb", jarFile = NULL)
	
	dput(sapply(names(ODB::odb.tables(odb)), function(tbl) {
	sqlQuery <- paste0('SELECT * FROM "', tbl, '"')
	ODB::odb.read(odb, sqlQuery)
	}, simplify=F))
	
	ODB::odb.close(odb, write=FALSE)

Yields this:

	list(day = structure(list(day_ID = c(0, 1, 2, 3, 4, 5, 6, 7,
	8, 9, 10, 11, 12, 13, 14, 15, 16, 17), Day = c(1, 2, 3, 5, 7,
	9, 11, 13, 14, 16, 18, 20, 22, 24, 26, 28, 30, 31)), row.names = c(NA,
	18L), class = "data.frame"), demographic = structure(list(ID = logical(0),
	    Study_ID = logical(0), Hosp_ID = logical(0), Hospital = logical(0),
	    Address = logical(0), Occ_ID = logical(0), Age = logical(0),
	    Sex = logical(0)), row.names = c(NA, 0L), class = "data.frame"),
	    hospitals = structure(list(Hosp_ID = c(0, 1, 2, 3), Hospital = c("Fatebenefratelli",
	    "Royal Free", "Santa Croce in Gerusalemme", "Sagrada Familia"
	    ), Address = c("Via Tiberina", "Tottenham Court road", "Via Latina",
	    "Barcelona")), row.names = c(NA, 4L), class = "data.frame"))

The demographics table is empty, but has 
headers ....  Maybe you selected the 
wrong file ...

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211110/25874b15/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Wed Nov 10 19:03:06 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Nov 2021 18:03:06 +0000
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <CAMk+s2SKb71AS5DTR99DCYeS9YPKuNaCoqYWj=xt2M1hcY-C0Q@mail.gmail.com>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
 <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
 <YYvh9gA+SabZ5xJA@posteo.no>
 <CAMk+s2T4QZG6PRm7FvpRVoNKjPbLQ_+UjWD-22R8bmMwBzoBTA@mail.gmail.com>
 <YYvx6v+J2i1XiW0G@posteo.no>
 <CAMk+s2SKb71AS5DTR99DCYeS9YPKuNaCoqYWj=xt2M1hcY-C0Q@mail.gmail.com>
Message-ID: <YYwJWivAui8WM+po@posteo.no>

On 2021-11-10 18:55 +0100, Luigi Marongiu wrote:
> no, it worked. that table was indeed 
> empty and you for the right entries on 
> the other table. I'll try on my 
> machine, thank you!

Cheers man!

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211110/8123559d/attachment.sig>

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Nov 10 20:30:52 2021
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 10 Nov 2021 20:30:52 +0100
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <YYwJWivAui8WM+po@posteo.no>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
 <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
 <YYvh9gA+SabZ5xJA@posteo.no>
 <CAMk+s2T4QZG6PRm7FvpRVoNKjPbLQ_+UjWD-22R8bmMwBzoBTA@mail.gmail.com>
 <YYvx6v+J2i1XiW0G@posteo.no>
 <CAMk+s2SKb71AS5DTR99DCYeS9YPKuNaCoqYWj=xt2M1hcY-C0Q@mail.gmail.com>
 <YYwJWivAui8WM+po@posteo.no>
Message-ID: <CAMk+s2SNMZmgNBCqq7pkEmvWA3hYLzimw4pZmnC81tkWJwCYbQ@mail.gmail.com>

I tried this:
```
x = dput(sapply(names(ODB::odb.tables(db)), function(tbl) {
sqlQuery <- paste0('SELECT * FROM "', demographic, '"')
ODB::odb.read(db, sqlQuery)
}, simplify=F))
y = x$demographic
```
so now `y` is the dataframe for the table `demographic`:
```
> y
ID Study_ID Hosp_ID                                Hospital              Address
1  5        0      NA       Royal Free - Tottenham Court road
Tottenham Court road
2  6        0      NA Santa Croce in Gerusalemme - Via Latina
  Barcelona
Occ_ID Age Sex day_ID month_ID century year_ID Year Occupation Day DOB
Enrollment
1     NA  NA   2     NA       NA      19      NA   10    Student  24
NA 2020-11-01
2     NA  NA   1     NA       NA      20      NA    9 Researcher  26
NA 2022-01-01
EnrolTime
1  13:24:00
2  14:25:00
> str(y)
'data.frame': 2 obs. of  18 variables:
$ ID        : num  5 6
$ Study_ID  : num  0 0
$ Hosp_ID   : logi  NA NA
$ Hospital  : chr  "Royal Free - Tottenham Court road" "Santa Croce in
Gerusalemme - Via Latina"
$ Address   : chr  "Tottenham Court road" "Barcelona"
$ Occ_ID    : logi  NA NA
$ Age       : logi  NA NA
$ Sex       : num  2 1
$ day_ID    : logi  NA NA
$ month_ID  : logi  NA NA
$ century   : num  19 20
$ year_ID   : logi  NA NA
$ Year      : chr  "10" "9"
$ Occupation: chr  "Student" "Researcher"
$ Day       : num  24 26
$ DOB       : logi  NA NA
$ Enrollment: chr  "2020-11-01" "2022-01-01"
$ EnrolTime : chr  "13:24:00" "14:25:00"
```
Still, I thought it might have been easier to run `odb.read`.
But it works, thank you again!

On Wed, Nov 10, 2021 at 7:03 PM Rasmus Liland <jral at posteo.no> wrote:
>
> On 2021-11-10 18:55 +0100, Luigi Marongiu wrote:
> > no, it worked. that table was indeed
> > empty and you for the right entries on
> > the other table. I'll try on my
> > machine, thank you!
>
> Cheers man!



-- 
Best regards,
Luigi


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov 10 20:44:07 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 10 Nov 2021 11:44:07 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
Message-ID: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>

I have the code to create ggplot2 boxplots using two attributes (e.g.,
chemical concentration and month) from the same tibble. Is there an example
from which I can learn how to make boxplots from different
tibbles/dataframes (e.g., chemical concentrations and monitoring location)?

TIA,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov 10 21:16:33 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 10 Nov 2021 12:16:33 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
Message-ID: <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>

On Wed, 10 Nov 2021, Rich Shepard wrote:

> I have the code to create ggplot2 boxplots using two attributes (e.g.,
> chemical concentration and month) from the same tibble. Is there an
> example from which I can learn how to make boxplots from different
> tibbles/dataframes (e.g., chemical concentrations and monitoring
> location)?

To clarify: I'd like to produce a plot such as Naomi Robbins presents in
figure 4.11 of her book, "Creating More Effective Graphics."

In my case I want to present river boxplots of discharges over each
monitoring site's period of record as a vertical stack of horizontal
boxplots. The northern-most site actually has negative discharges twice a
day as it's tidally influenced at about 125 River Miles from the ocean and
the incoming tides push the water upriver.

Rich


From bgunter@4567 @end|ng |rom gm@||@com  Wed Nov 10 22:09:47 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 10 Nov 2021 13:09:47 -0800
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
Message-ID: <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>

As always, online search (on "ggplot2 help") seemed to bring up useful
resources.
I suggest you look here (suggested tutorials and resources are farther
down the page):

https://ggplot2.tidyverse.org/


Bert Gunter

On Wed, Nov 10, 2021 at 12:16 PM Rich Shepard <rshepard at appl-ecosys.com> wrote:
>
> On Wed, 10 Nov 2021, Rich Shepard wrote:
>
> > I have the code to create ggplot2 boxplots using two attributes (e.g.,
> > chemical concentration and month) from the same tibble. Is there an
> > example from which I can learn how to make boxplots from different
> > tibbles/dataframes (e.g., chemical concentrations and monitoring
> > location)?
>
> To clarify: I'd like to produce a plot such as Naomi Robbins presents in
> figure 4.11 of her book, "Creating More Effective Graphics."
>
> In my case I want to present river boxplots of discharges over each
> monitoring site's period of record as a vertical stack of horizontal
> boxplots. The northern-most site actually has negative discharges twice a
> day as it's tidally influenced at about 125 River Miles from the ocean and
> the incoming tides push the water upriver.
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Wed Nov 10 22:33:26 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 10 Nov 2021 21:33:26 +0000
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <CAMk+s2SNMZmgNBCqq7pkEmvWA3hYLzimw4pZmnC81tkWJwCYbQ@mail.gmail.com>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
 <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
 <YYvh9gA+SabZ5xJA@posteo.no>
 <CAMk+s2T4QZG6PRm7FvpRVoNKjPbLQ_+UjWD-22R8bmMwBzoBTA@mail.gmail.com>
 <YYvx6v+J2i1XiW0G@posteo.no>
 <CAMk+s2SKb71AS5DTR99DCYeS9YPKuNaCoqYWj=xt2M1hcY-C0Q@mail.gmail.com>
 <YYwJWivAui8WM+po@posteo.no>
 <CAMk+s2SNMZmgNBCqq7pkEmvWA3hYLzimw4pZmnC81tkWJwCYbQ@mail.gmail.com>
Message-ID: <YYw6psbThYsB5Irc@posteo.no>

Dear Luigi,

Yes, from the named list of dataframes, 
you access the demographic table like 
that.  

You can remove dput() now, I used it 
only to print the output; read ?dput, 
it's very handy the next time you ask 
questions on this list.  

Take a closer look at my obfuscated code 
...  To only query the demographic 
table, you would use 

	ODB::odb.read(odb, 'SELECT * FROM "demographic"')

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20211110/5c3a5c05/attachment.sig>

From rmh @end|ng |rom temp|e@edu  Wed Nov 10 22:40:03 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 10 Nov 2021 21:40:03 +0000
Subject: [R] [External]  ggplot2: multiple box plots,
 different tibbles/dataframes
In-Reply-To: <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
Message-ID: <CA23CB7A-4DAE-49ED-BDFF-1B09902DE297@temple.edu>

I don't understand your question.  It looks like the example in ?lattice::panel.bwplot does
exactly what you want (modulo using ggplot instead of lattice).  Therefore it looks like creating a single column of y
from the y in each data.frame, and also a single column of x from the x in each data.frame should be enough.

Here is an even simpler example

y <- rnorm(20)
x <- rep(1:2, each=10)
library(lattice)
bwplot(x ~ y, horizontal=TRUE)


> On Nov 10, 2021, at 15:16, Rich Shepard <rshepard at appl-ecosys.com> wrote:
> 
> On Wed, 10 Nov 2021, Rich Shepard wrote:
> 
>> I have the code to create ggplot2 boxplots using two attributes (e.g.,
>> chemical concentration and month) from the same tibble. Is there an
>> example from which I can learn how to make boxplots from different
>> tibbles/dataframes (e.g., chemical concentrations and monitoring
>> location)?
> 
> To clarify: I'd like to produce a plot such as Naomi Robbins presents in
> figure 4.11 of her book, "Creating More Effective Graphics."
> 
> In my case I want to present river boxplots of discharges over each
> monitoring site's period of record as a vertical stack of horizontal
> boxplots. The northern-most site actually has negative discharges twice a
> day as it's tidally influenced at about 125 River Miles from the ocean and
> the incoming tides push the water upriver.
> 
> Rich
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7C4cd107806f544ff7ef4308d9a4870974%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637721722866567947%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=t1sBLzlyyxPEq2%2F54BoDdmP1qkfLb9ABosQ0mI6rEjA%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7C4cd107806f544ff7ef4308d9a4870974%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637721722866567947%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=nu%2Bjxppbmi4UtEngfs3DrJXQWcyxUVNSoGYgnEDwi%2F8%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov 10 22:51:16 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 10 Nov 2021 13:51:16 -0800 (PST)
Subject: [R] [External]  ggplot2: multiple box plots,
 different tibbles/dataframes
In-Reply-To: <CA23CB7A-4DAE-49ED-BDFF-1B09902DE297@temple.edu>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CA23CB7A-4DAE-49ED-BDFF-1B09902DE297@temple.edu>
Message-ID: <9a8df3aa-d6c-9a68-6491-c56d7562152@appl-ecosys.com>

On Wed, 10 Nov 2021, Richard M. Heiberger wrote:

> I don't understand your question. It looks like the example in
> ?lattice::panel.bwplot does exactly what you want (modulo using ggplot
> instead of lattice). Therefore it looks like creating a single column of y
> from the y in each data.frame, and also a single column of x from the x in
> each data.frame should be enough.
>
> Here is an even simpler example
>
> y <- rnorm(20)
> x <- rep(1:2, each=10)
> library(lattice)
> bwplot(x ~ y, horizontal=TRUE)

Richard,

I've used lattice in the past and am learning ggplot2 now.

Thanks for your lattice suggestion.

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Wed Nov 10 22:53:23 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Wed, 10 Nov 2021 13:53:23 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
Message-ID: <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>

On Wed, 10 Nov 2021, Bert Gunter wrote:

> As always, online search (on "ggplot2 help") seemed to bring up useful
> resources. I suggest you look here (suggested tutorials and resources are
> farther down the page): https://ggplot2.tidyverse.org/

Bert,

My web search was for multiple boxplots and I didn't see what I wanted. I'll
continue reading the ggplot2 third edition and figure it out.

Regards,

Rich


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Nov 11 02:53:25 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 10 Nov 2021 20:53:25 -0500
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
Message-ID: <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>

Rich,

I think many here may not quite have enough info to help you.

But the subject of multiple plots has come up. There are a slew of ways,
especially in the ggplot paradigm, to make multiple smaller plots into a
larger display showing them in some number of rows and columns, or other
ways. Some methods use facet_wrap() or facet_grid() type functionality that
let you plot multiple subdivisions of the data independently. These though
generally have to be in some way related.

Yet others let you make many independent graphs and save them and later
recombine them in packages like cowplot. 

So, although it may also be possible to do whatever it is you want within a
single plot, it may also make sense to do it as loosely described above. 

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rich Shepard
Sent: Wednesday, November 10, 2021 4:53 PM
To: R-help <r-help at r-project.org>
Subject: Re: [R] ggplot2: multiple box plots, different tibbles/dataframes

On Wed, 10 Nov 2021, Bert Gunter wrote:

> As always, online search (on "ggplot2 help") seemed to bring up useful 
> resources. I suggest you look here (suggested tutorials and resources 
> are farther down the page): https://ggplot2.tidyverse.org/

Bert,

My web search was for multiple boxplots and I didn't see what I wanted. I'll
continue reading the ggplot2 third edition and figure it out.

Regards,

Rich

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Nov 11 07:07:42 2021
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 11 Nov 2021 07:07:42 +0100
Subject: [R] how to connect libreoffice base odb using R package odbc?
In-Reply-To: <YYw6psbThYsB5Irc@posteo.no>
References: <CAMk+s2TGYd5Hs2O6-5eKy9n0xMy1FwbR4rXZPxGte+ZH8eDsYw@mail.gmail.com>
 <YYvagGXcSPVqCWX+@posteo.no>
 <CAMk+s2SVQ5fR-87nQkHk+hc8PQBX_MLdZX1xoBCrJueiAHXNxQ@mail.gmail.com>
 <YYvh9gA+SabZ5xJA@posteo.no>
 <CAMk+s2T4QZG6PRm7FvpRVoNKjPbLQ_+UjWD-22R8bmMwBzoBTA@mail.gmail.com>
 <YYvx6v+J2i1XiW0G@posteo.no>
 <CAMk+s2SKb71AS5DTR99DCYeS9YPKuNaCoqYWj=xt2M1hcY-C0Q@mail.gmail.com>
 <YYwJWivAui8WM+po@posteo.no>
 <CAMk+s2SNMZmgNBCqq7pkEmvWA3hYLzimw4pZmnC81tkWJwCYbQ@mail.gmail.com>
 <YYw6psbThYsB5Irc@posteo.no>
Message-ID: <CAMk+s2T56XwJkR26GMPT9jH1z9K9rzMM+da9hW5oPoo8AqutHg@mail.gmail.com>

Awesome, thanks!

On Wed, Nov 10, 2021 at 10:33 PM Rasmus Liland <jral at posteo.no> wrote:
>
> Dear Luigi,
>
> Yes, from the named list of dataframes,
> you access the demographic table like
> that.
>
> You can remove dput() now, I used it
> only to print the output; read ?dput,
> it's very handy the next time you ask
> questions on this list.
>
> Take a closer look at my obfuscated code
> ...  To only query the demographic
> table, you would use
>
>         ODB::odb.read(odb, 'SELECT * FROM "demographic"')
>
> Best,
> Rasmus



-- 
Best regards,
Luigi


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 14:50:26 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 05:50:26 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
Message-ID: <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>

On Wed, 10 Nov 2021, Avi Gross via R-help wrote:

> I think many here may not quite have enough info to help you.

Avi,

Actually, you've reflected my thinking.

> But the subject of multiple plots has come up. There are a slew of ways,
> especially in the ggplot paradigm, to make multiple smaller plots into a
> larger display showing them in some number of rows and columns, or other
> ways. Some methods use facet_wrap() or facet_grid() type functionality that
> let you plot multiple subdivisions of the data independently. These though
> generally have to be in some way related.

My experience with facets (which I belive are like latice's conditioned
trellis plots has each plot in a separate frame in a row, column, or
matrix.) That won't communicate what I want viewers to see as well as would
having all in a single frame.

My data represent hydrologic and geochemical conditions at four locations
along the mainstem of a river. While the period of record for each
monitoring gauge is different, I want to illustrate how highly variable
conditions are at each location. The major factor of interest is discharge,
the volume of water passing a river cross section at the gauge location in
cubic feet per second. I have created boxplots for each site representing
the distribution of discharge for the entire data set and I'd like to place
each of the four horizontal boxplots stacked vertically with the
southern-most at the bottom and the northern-most at the top (the river
flows north).

> Yet others let you make many independent graphs and save them and later
> recombine them in packages like cowplot.

I discovered cowplot yesterday but haven't yet read the PDF or vignette.

> So, although it may also be possible to do whatever it is you want within a
> single plot, it may also make sense to do it as loosely described above.

While I certainly may be wrong, I believe that seeing all four boxplots in
the same frame makes the differences in distribution most clear.

Thanks,

Rich


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Nov 11 16:39:28 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 11 Nov 2021 07:39:28 -0800
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
Message-ID: <CAHqSRuR4bb8hPJG=fwRFYCBRWkshUqP89RQMJnA2m3CojYGEyQ@mail.gmail.com>

I googled for "ggplot2 boxplots by group" and the first hit was
  https://www.r-graph-gallery.com/265-grouped-boxplot-with-ggplot2.html
which displays lots of variants along with the code to produce them.  It
has links to ungrouped boxplots and shows how violin plots can better
display your data.

-Bill

On Thu, Nov 11, 2021 at 5:50 AM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

> On Wed, 10 Nov 2021, Avi Gross via R-help wrote:
>
> > I think many here may not quite have enough info to help you.
>
> Avi,
>
> Actually, you've reflected my thinking.
>
> > But the subject of multiple plots has come up. There are a slew of ways,
> > especially in the ggplot paradigm, to make multiple smaller plots into a
> > larger display showing them in some number of rows and columns, or other
> > ways. Some methods use facet_wrap() or facet_grid() type functionality
> that
> > let you plot multiple subdivisions of the data independently. These
> though
> > generally have to be in some way related.
>
> My experience with facets (which I belive are like latice's conditioned
> trellis plots has each plot in a separate frame in a row, column, or
> matrix.) That won't communicate what I want viewers to see as well as would
> having all in a single frame.
>
> My data represent hydrologic and geochemical conditions at four locations
> along the mainstem of a river. While the period of record for each
> monitoring gauge is different, I want to illustrate how highly variable
> conditions are at each location. The major factor of interest is discharge,
> the volume of water passing a river cross section at the gauge location in
> cubic feet per second. I have created boxplots for each site representing
> the distribution of discharge for the entire data set and I'd like to place
> each of the four horizontal boxplots stacked vertically with the
> southern-most at the bottom and the northern-most at the top (the river
> flows north).
>
> > Yet others let you make many independent graphs and save them and later
> > recombine them in packages like cowplot.
>
> I discovered cowplot yesterday but haven't yet read the PDF or vignette.
>
> > So, although it may also be possible to do whatever it is you want
> within a
> > single plot, it may also make sense to do it as loosely described above.
>
> While I certainly may be wrong, I believe that seeing all four boxplots in
> the same frame makes the differences in distribution most clear.
>
> Thanks,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 16:41:38 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 07:41:38 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <CAHqSRuR4bb8hPJG=fwRFYCBRWkshUqP89RQMJnA2m3CojYGEyQ@mail.gmail.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <CAHqSRuR4bb8hPJG=fwRFYCBRWkshUqP89RQMJnA2m3CojYGEyQ@mail.gmail.com>
Message-ID: <3cb71d89-ac8f-a143-b019-39b8b512968@appl-ecosys.com>

On Thu, 11 Nov 2021, Bill Dunlap wrote:

> I googled for "ggplot2 boxplots by group" and the first hit was
>  https://www.r-graph-gallery.com/265-grouped-boxplot-with-ggplot2.html
> which displays lots of variants along with the code to produce them.  It
> has links to ungrouped boxplots and shows how violin plots can better
> display your data.

Bill,

I searched for 'ggplot2 multiple boxplots' so I missed that one.

Thanks very much,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 16:46:15 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 07:46:15 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <CAHqSRuR4bb8hPJG=fwRFYCBRWkshUqP89RQMJnA2m3CojYGEyQ@mail.gmail.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <CAHqSRuR4bb8hPJG=fwRFYCBRWkshUqP89RQMJnA2m3CojYGEyQ@mail.gmail.com>
Message-ID: <aaaa4acf-7d59-48af-7b57-d3778bc7d038@appl-ecosys.com>

On Thu, 11 Nov 2021, Bill Dunlap wrote:

> I googled for "ggplot2 boxplots by group" and the first hit was
>  https://www.r-graph-gallery.com/265-grouped-boxplot-with-ggplot2.html
> which displays lots of variants along with the code to produce them.  It
> has links to ungrouped boxplots and shows how violin plots can better
> display your data.

Bill,

As I thought, all the returned pages use multiple groups within the same
dataframe. I'm still looking to learn how to pass multiple dataframes to one
ggplot() function, each with its own aesthetics.

Regards,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 16:50:54 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 07:50:54 -0800 (PST)
Subject: [R] ggplot2: multiple box plots,
 different tibbles/dataframes [RESOLVED]
In-Reply-To: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
Message-ID: <a5d75826-ba3-d04-d24e-5e1afdd971d0@appl-ecosys.com>

On Wed, 10 Nov 2021, Rich Shepard wrote:

> I have the code to create ggplot2 boxplots using two attributes (e.g.,
> chemical concentration and month) from the same tibble. Is there an
> example from which I can learn how to make boxplots from different
> tibbles/dataframes (e.g., chemical concentrations and monitoring
> location)?

I think that I've found the solution (haven't yet tested it, though):
<https://statisticsglobe.com/combine-two-ggplot2-plots-from-different-data-frames-in-r>.

It's from Statistical Globe and uses this code:
ggp <- ggplot(NULL, aes(x, y)) +    # Draw ggplot2 plot based on two data frames
   geom_point(data = data1, col = "red") +
   geom_line(data = data2, col = "blue")
ggp                                 # Draw plot

More when I try it with four boxplots.

Rich


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Nov 11 17:08:30 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Nov 2021 08:08:30 -0800
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <aaaa4acf-7d59-48af-7b57-d3778bc7d038@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <CAHqSRuR4bb8hPJG=fwRFYCBRWkshUqP89RQMJnA2m3CojYGEyQ@mail.gmail.com>
 <aaaa4acf-7d59-48af-7b57-d3778bc7d038@appl-ecosys.com>
Message-ID: <5890075C-2A93-4626-8B52-60C090AAB0D2@dcn.davis.ca.us>

I strongly recommend that you change your way of thinking when it comes to ggplot: if your data are not yet in one data frame then your data are not yet ready for plotting.

It is possible to specify separate data frames for different layers of the plot, but this severely complicates building legends.

On November 11, 2021 7:46:15 AM PST, Rich Shepard <rshepard at appl-ecosys.com> wrote:
>On Thu, 11 Nov 2021, Bill Dunlap wrote:
>
>> I googled for "ggplot2 boxplots by group" and the first hit was
>>  https://www.r-graph-gallery.com/265-grouped-boxplot-with-ggplot2.html
>> which displays lots of variants along with the code to produce them.  It
>> has links to ungrouped boxplots and shows how violin plots can better
>> display your data.
>
>Bill,
>
>As I thought, all the returned pages use multiple groups within the same
>dataframe. I'm still looking to learn how to pass multiple dataframes to one
>ggplot() function, each with its own aesthetics.
>
>Regards,
>
>Rich
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 17:37:05 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 08:37:05 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <5890075C-2A93-4626-8B52-60C090AAB0D2@dcn.davis.ca.us>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <CAHqSRuR4bb8hPJG=fwRFYCBRWkshUqP89RQMJnA2m3CojYGEyQ@mail.gmail.com>
 <aaaa4acf-7d59-48af-7b57-d3778bc7d038@appl-ecosys.com>
 <5890075C-2A93-4626-8B52-60C090AAB0D2@dcn.davis.ca.us>
Message-ID: <326bb353-582d-52ef-56f6-5dd7c0865c5b@appl-ecosys.com>

On Thu, 11 Nov 2021, Jeff Newmiller wrote:

> I strongly recommend that you change your way of thinking when it comes to
> ggplot: if your data are not yet in one data frame then your data are not
> yet ready for plotting.

> It is possible to specify separate data frames for different layers of the
> plot, but this severely complicates building legends.

Jeff,

I understand your concern and I'm willing to take the time to make each plot
as effective as is possible with ggplot2.

My data sets are large; the total is 7,344,118 lines; the largest set
contains 834,493 lines.

Thanks very much,

Rich


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Nov 11 18:10:35 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 11 Nov 2021 12:10:35 -0500
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com> 
Message-ID: <016901d7d71f$0abe7150$203b53f0$@verizon.net>


Rich,

Boxplots like many other things in ggplot can be grouped in various ways. I
often do something like this:

Say I have a data.frame with columns called PLACE and MEASURE others. The
one I call PLACE would be a factor containing the locations you are
measuring at. I mean it would be character strings of your N places but the
factors would be made in the order you want the results in. The MEASURE
variable in each row would contain one of the many measures at that
location. You probably would have other columns like DATE.

To display multiple boxplots subdivided by place is as easy as using the
phrase in an aes() clause like:

	ggplot(your_data, aes(..., color=PLACE)) + geom_boxplot()

There are other variants or using group= but it works fine usually for up to
six places as colors often get recycled.

My impression is that you want to sort of force ggplot to keep forgetting
earlier data and commence anew on new data and other attributes. Yes, there
is a way to ask ggplot to not inherit things from step to step and take new
instructions BUT you may not be aware of how different the ggplot paradigm
is compared to other graphics engines.

Some of the other plot repeatedly as you go along and new layers sort of
overlay old layers. Ggplot makes no plots whatsoever. It creates a huge
complex object and populates it as it goes along. Some changes in setting
simply overwrite earlier ones that are then gone. The plotting can be done
at any later time (or automatically when it finishes) using one of the
methods known to print(). So some of what you want may not work well as it
normally does not want to store multiple data sets.

In one sense, I would say the ggplot way is to focus on getting your data
into the right shape. In your case, have you considered reading in your
multiple data items into df1 through df4 or whatever and making changes so
each has a new column called something like PLACE that is the same for all
items in df1 and another for df2 and so on?

When you have done that and made all the dfN have the same names and numbers
for columns, you can combine them into one df_combined using something like
rbind().

You can then change the column in df_combined called PLACE to be a factor of
itself in the order you want based on the compass.

What you have then can be given to ggplot as described above. Note in some
places ggplot sees a factor in the order it is sequenced, i.e. it may see it
as containing a 1  and 2 and so on. So the easiest way to make it do some
things is before you call it. Somewhat more advanced users can do odd things
in midstream like y=refactor(something) with ggplot.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rich Shepard
Sent: Thursday, November 11, 2021 8:50 AM
To: r-help at r-project.org
Subject: Re: [R] ggplot2: multiple box plots, different tibbles/dataframes

On Wed, 10 Nov 2021, Avi Gross via R-help wrote:

> I think many here may not quite have enough info to help you.

Avi,

Actually, you've reflected my thinking.

> But the subject of multiple plots has come up. There are a slew of 
> ways, especially in the ggplot paradigm, to make multiple smaller 
> plots into a larger display showing them in some number of rows and 
> columns, or other ways. Some methods use facet_wrap() or facet_grid() 
> type functionality that let you plot multiple subdivisions of the data 
> independently. These though generally have to be in some way related.

My experience with facets (which I belive are like latice's conditioned
trellis plots has each plot in a separate frame in a row, column, or
matrix.) That won't communicate what I want viewers to see as well as would
having all in a single frame.

My data represent hydrologic and geochemical conditions at four locations
along the mainstem of a river. While the period of record for each
monitoring gauge is different, I want to illustrate how highly variable
conditions are at each location. The major factor of interest is discharge,
the volume of water passing a river cross section at the gauge location in
cubic feet per second. I have created boxplots for each site representing
the distribution of discharge for the entire data set and I'd like to place
each of the four horizontal boxplots stacked vertically with the
southern-most at the bottom and the northern-most at the top (the river
flows north).

> Yet others let you make many independent graphs and save them and 
> later recombine them in packages like cowplot.

I discovered cowplot yesterday but haven't yet read the PDF or vignette.

> So, although it may also be possible to do whatever it is you want 
> within a single plot, it may also make sense to do it as loosely described
above.

While I certainly may be wrong, I believe that seeing all four boxplots in
the same frame makes the differences in distribution most clear.

Thanks,

Rich

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 18:22:07 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 09:22:07 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <015b01d7d71d$626b1f90$27415eb0$@verizon.net>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <015b01d7d71d$626b1f90$27415eb0$@verizon.net>
Message-ID: <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>

On Thu, 11 Nov 2021, Avi Gross wrote:

> Boxplots like many other things in ggplot can be grouped in various ways.
> I often do something like this:

Avi,

I've designed and used multiple boxplots in many projects. They might show
geochemical concentrations at two locations or in two (or three) separate
time periods. All data in a single dataframe.

> To display multiple boxplots subdivided by place is as easy as using the
> phrase in an aes() clause like:
>
> 	ggplot(your_data, aes(..., color=PLACE)) + geom_boxplot()

What I need to plot are multiple 'your_data' sets. I'll be testing this:
ggp <- ggplot(NULL, aes(x, y)) +    # Draw ggplot2 plot based on two data frames
   geom_point(data = data1, col = "red") +
   geom_line(data = data2, col = "blue")
ggp                                 # Draw plot

today, but using four boxplots.

Regards,

Rich


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Nov 11 18:35:03 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 11 Nov 2021 12:35:03 -0500
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <015b01d7d71d$626b1f90$27415eb0$@verizon.net>
 <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>
Message-ID: <017301d7d722$75e6f850$61b4e8f0$@verizon.net>

Rich,

I think we have suggested something several times that you ignore as you are
focused on your way of thinking.

If you read the last part of the letter I wrote in public, I suggest
combining your multiple dataframes into one if they are compatible and
including a new column called something like PLACE. The existence of that
variable lets you tell ggplot you want MULTIPLE plots placed in a grid based
on that variable OR in other words, asking ggplot to subdivide your data
into four parts and make one plot for each and then place them into a
matrix. 

I will not spell out the many variations you can make but some variations
have you add another layer to the ggplot that may use formula notation to
specify what combination of variables to do the subdivisions by or
specifying you want then in rows (meaning vertically stacked) based on a
variable and so on.

Look up facet_grid() and facet_wrap() as various ways to do this. Note you
may want to examine some options such as setting the scales to be the same
or free.


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rich Shepard
Sent: Thursday, November 11, 2021 12:22 PM
To: r-help at r-project.org
Subject: Re: [R] ggplot2: multiple box plots, different tibbles/dataframes

On Thu, 11 Nov 2021, Avi Gross wrote:

> Boxplots like many other things in ggplot can be grouped in various ways.
> I often do something like this:

Avi,

I've designed and used multiple boxplots in many projects. They might show
geochemical concentrations at two locations or in two (or three) separate
time periods. All data in a single dataframe.

> To display multiple boxplots subdivided by place is as easy as using 
> the phrase in an aes() clause like:
>
> 	ggplot(your_data, aes(..., color=PLACE)) + geom_boxplot()

What I need to plot are multiple 'your_data' sets. I'll be testing this:
ggp <- ggplot(NULL, aes(x, y)) +    # Draw ggplot2 plot based on two data
frames
   geom_point(data = data1, col = "red") +
   geom_line(data = data2, col = "blue")
ggp                                 # Draw plot

today, but using four boxplots.

Regards,

Rich

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Thu Nov 11 18:52:02 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 11 Nov 2021 09:52:02 -0800
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <015b01d7d71d$626b1f90$27415eb0$@verizon.net>
 <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>
Message-ID: <CAGxFJbRc3zMtzgsGxbnkQNBo+FtYQPiLbOrBzpXCNqMrja+z3A@mail.gmail.com>

You can always create a graphics layout  and then plot different
ggplot objects in the separate regions of the layout. See ?grid.layout
(since ggplots are grobs)  and ?plot.ggplot  . This also **may** be
useful by showing examples using grid.arrange()

https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html

Still, I suspect that Jeff Newmiller may be right about needing to
structure your data more appropriately for what you wish to do.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Nov 11, 2021 at 9:22 AM Rich Shepard <rshepard at appl-ecosys.com> wrote:
>
> On Thu, 11 Nov 2021, Avi Gross wrote:
>
> > Boxplots like many other things in ggplot can be grouped in various ways.
> > I often do something like this:
>
> Avi,
>
> I've designed and used multiple boxplots in many projects. They might show
> geochemical concentrations at two locations or in two (or three) separate
> time periods. All data in a single dataframe.
>
> > To display multiple boxplots subdivided by place is as easy as using the
> > phrase in an aes() clause like:
> >
> >       ggplot(your_data, aes(..., color=PLACE)) + geom_boxplot()
>
> What I need to plot are multiple 'your_data' sets. I'll be testing this:
> ggp <- ggplot(NULL, aes(x, y)) +    # Draw ggplot2 plot based on two data frames
>    geom_point(data = data1, col = "red") +
>    geom_line(data = data2, col = "blue")
> ggp                                 # Draw plot
>
> today, but using four boxplots.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 18:56:22 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 09:56:22 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <CAGxFJbRc3zMtzgsGxbnkQNBo+FtYQPiLbOrBzpXCNqMrja+z3A@mail.gmail.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <015b01d7d71d$626b1f90$27415eb0$@verizon.net>
 <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>
 <CAGxFJbRc3zMtzgsGxbnkQNBo+FtYQPiLbOrBzpXCNqMrja+z3A@mail.gmail.com>
Message-ID: <bdab74ac-6154-1d1b-2ae1-116249fddef8@appl-ecosys.com>

On Thu, 11 Nov 2021, Bert Gunter wrote:

> You can always create a graphics layout  and then plot different
> ggplot objects in the separate regions of the layout. See ?grid.layout
> (since ggplots are grobs)  and ?plot.ggplot  . This also **may** be
> useful by showing examples using grid.arrange()
>
> https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html
>
> Still, I suspect that Jeff Newmiller may be right about needing to
> structure your data more appropriately for what you wish to do.

Bert,

For this plot I could create a new data set with only site_nbr, year and cfs
columns; it would be 3,016,005 rows long.

Or, I could create separate boxplots and arrange them in a row. That might
be the easiest.

Thanks,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 19:24:34 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 10:24:34 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <016901d7d71f$0abe7150$203b53f0$@verizon.net>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <016901d7d71f$0abe7150$203b53f0$@verizon.net>
Message-ID: <7bbd7a-e0d2-62b0-f89d-9e3a36c8ccb@appl-ecosys.com>

On Thu, 11 Nov 2021, Avi Gross via R-help wrote:

> Say I have a data.frame with columns called PLACE and MEASURE others. The
> one I call PLACE would be a factor containing the locations you are
> measuring at. I mean it would be character strings of your N places but
> the factors would be made in the order you want the results in. The
> MEASURE variable in each row would contain one of the many measures at
> that location. You probably would have other columns like DATE.

Avi/Jeff/Burt,

Here are the head and tail of one data file:
site_nbr,year,mon,day,hr,min,tz,cfs
14174000,1986,10,01,00,30,PDT,11900
14174000,1986,10,01,01,00,PDT,11900
14174000,1986,10,01,01,30,PDT,11900
14174000,1986,10,01,02,00,PDT,11800
14174000,1986,10,01,02,30,PDT,11800
14174000,1986,10,01,03,00,PDT,11800
14174000,1986,10,01,03,30,PDT,11800
14174000,1986,10,01,04,00,PDT,11800
14174000,1986,10,01,04,30,PDT,11800
...
14174000,2021,09,30,23,12,PDT,5070
14174000,2021,09,30,23,17,PDT,5070
14174000,2021,09,30,23,22,PDT,5050
14174000,2021,09,30,23,27,PDT,5050
14174000,2021,09,30,23,32,PDT,5050
14174000,2021,09,30,23,37,PDT,5050
14174000,2021,09,30,23,42,PDT,5050
14174000,2021,09,30,23,47,PDT,5050
14174000,2021,09,30,23,52,PDT,5050
14174000,2021,09,30,23,57,PDT,5050

(Water years begin October 1st and end September 30th.)

The other three locations have the same format.

The boxplots for each PLACE (site_nbr) should summarize all MEASURE (cfs)
values for all recorded data (DATE).

The R tibbles have a datetime column which could be the DATE.

If I assemble all 4 sites into a single tupple I suppose it would have three
columns PLACE (the grouping factor), DATE (on the x axis), and MEASURE (cfs on
the y axis) and each boxplot would be grouped so the
command would be:

disc_plot <- ggplot(df, aes(x = group, y = cfs)) +
 	geom_boxplot()

Is this close?

Thanks,

Rich


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Nov 11 19:26:26 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 11 Nov 2021 13:26:26 -0500
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <bdab74ac-6154-1d1b-2ae1-116249fddef8@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <015b01d7d71d$626b1f90$27415eb0$@verizon.net>
 <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>
 <CAGxFJbRc3zMtzgsGxbnkQNBo+FtYQPiLbOrBzpXCNqMrja+z3A@mail.gmail.com>
 <bdab74ac-6154-1d1b-2ae1-116249fddef8@appl-ecosys.com>
Message-ID: <019101d7d729$a3584120$ea08c360$@verizon.net>

As I replied to Rich privately for another message, I suggest that you may
well be able to fit what you need in memory, if careful. But my main point
is that when you have so much data, you do not need all of it to make a
representative graph. A boxplot made using 100,000 data points may well have
too many outliers to display resulting in a bushy tail and not be all that
much more accurate than one made using 10,000 randomly chosen data points
from it.

So the idea would be to read in df1 into memory, trimming away any columns
not needed, then use something like sample() to make a smaller version and
rm() the original and repeat by reading in the second and third and so on.

Now add a PLACE column to each of df1 through dfN and then cbind() them
together and again throw away anything no longer needed.

Finally, you can use factors as already discussed including as a way to use
less data as a factor is just an integer vector attached to a sort of
dictionary containing one copy of the text aspect of your data. 

Then call ggplot and ...

The results may vary depending on the size chosen and it may be wise to use
set.seed() to some value so it does the same thing each time you run it.

Your thought of going to make separate boxplots also can use as much memory
or more if you keep everything in memory as you go along.

And, BTW, for people using truly big data, there are approaches that get
them huge amounts of memory either within their own machines, or using web
services.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rich Shepard
Sent: Thursday, November 11, 2021 12:56 PM
To: R-help <r-help at r-project.org>
Subject: Re: [R] ggplot2: multiple box plots, different tibbles/dataframes

On Thu, 11 Nov 2021, Bert Gunter wrote:

> You can always create a graphics layout  and then plot different 
> ggplot objects in the separate regions of the layout. See ?grid.layout 
> (since ggplots are grobs)  and ?plot.ggplot  . This also **may** be 
> useful by showing examples using grid.arrange()
>
> https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html
>
> Still, I suspect that Jeff Newmiller may be right about needing to 
> structure your data more appropriately for what you wish to do.

Bert,

For this plot I could create a new data set with only site_nbr, year and cfs
columns; it would be 3,016,005 rows long.

Or, I could create separate boxplots and arrange them in a row. That might
be the easiest.

Thanks,

Rich

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 19:26:24 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 10:26:24 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <CAGxFJbR8syyf8TY3z1_aDCf1DG8YD_M3ujyaCof4+Mx_FmTjtg@mail.gmail.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <015b01d7d71d$626b1f90$27415eb0$@verizon.net>
 <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>
 <CAGxFJbRc3zMtzgsGxbnkQNBo+FtYQPiLbOrBzpXCNqMrja+z3A@mail.gmail.com>
 <bdab74ac-6154-1d1b-2ae1-116249fddef8@appl-ecosys.com>
 <CAGxFJbR8syyf8TY3z1_aDCf1DG8YD_M3ujyaCof4+Mx_FmTjtg@mail.gmail.com>
Message-ID: <41c7c9-1bff-10d7-d8b-b7dfed67d88a@appl-ecosys.com>

On Thu, 11 Nov 2021, Bert Gunter wrote:

> These days, 3e6 rows x 3 columns is small, unless large objects are in
> each cell.
>
> I think R would handle this with ease.

Thanks, Bert. See my last post showing data set structure and suggested
collection for use by grouping.

Regards,

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 19:31:18 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 10:31:18 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <018601d7d728$14b7ea20$3e27be60$@verizon.net>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <015b01d7d71d$626b1f90$27415eb0$@verizon.net>
 <2a48d2e-6f8c-9a75-412d-32b14d138ac@appl-ecosys.com>
 <017301d7d722$75e6f850$61b4e8f0$@verizon.net>
 <71bad6c4-f537-68ec-7caf-975950881b0@appl-ecosys.com>
 <018601d7d728$14b7ea20$3e27be60$@verizon.net>
Message-ID: <3a1b7a79-2bb-40e-c45b-ed5321b60e9@appl-ecosys.com>

On Thu, 11 Nov 2021, Avi Gross wrote:

> Your message was just to me so the reply is also just to you.

Avi,

Oops! Mea cupla.

> Yes, large data sets can be handled if your machine has the memory and one
> big one takes up the same amount as four smaller ones if combined.

This desktop has 32G RAM and 2T disc space.

I just posted a sample of one data set and my interpretation of your
suggestion for grouping.

I need all the data for this initial distribution summary because it affects
chemical concentrations in the receiving waters and the size of the
regulatory mixing zone.

Regards,

Rich


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Nov 11 20:03:15 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 11 Nov 2021 14:03:15 -0500
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <7bbd7a-e0d2-62b0-f89d-9e3a36c8ccb@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <016901d7d71f$0abe7150$203b53f0$@verizon.net>
 <7bbd7a-e0d2-62b0-f89d-9e3a36c8ccb@appl-ecosys.com>
Message-ID: <01a901d7d72e$c827fbd0$5877f370$@verizon.net>

Rich,

This is not a place designed for using packages but since this discussion
persists, I will supply you with SAMPLE code thrown together in just a few
minutes to illustrate the IDEAS, but your would obviously be tweaked to your
needs. I made a very small amount of data to illustrate several approaches
and neglected worrying about the X dimension. And, you may well want to use
other variants such as facet_grid() instead if it does more like what you
want.

I then threw in cowplot() as an example of doing it another way. This is
more useful for combining heterogeneous graphs. Many of the thinks I show
just as a silly example have alternates and there are multiple packages that
do similar (and also different) things than cowplot does if you want to tue
the output with other niceties.

 If you copy the code below (installing needed packages first if needed) it
should run on your machine if you do it in chunks so you can see the graphs
one at a time.

#START of code

# Load libraries needed, using install.packages() first if needed.
library(tidyverse)

# Make sample data AS IF you have already read in from file and converted.
df1 <- data.frame(site_nbr=1, DATE=1:5,
cfs=c(11900,11800,11900,11700,11800))
df2 <- data.frame(site_nbr=2, DATE=3:7,
cfs=c(12900,12600,12900,12700,12300))

# Combine al your data into one df.
df <- rbind(df1, df2)
# rm (df1, df2)

# Make a factor in the order you want.
df$site_nbr <- factor(x=df$site_nbr, levels=c(2,1))

# ready for a ggplot segmented by site_nbr.
ggplot(data=df, aes(x=NULL, y=cfs)) +
  geom_boxplot(aes(group=site_nbr))

# Or use color instead for a more specific grouping.
ggplot(data=df, aes(x=NULL, y=cfs)) +
  geom_boxplot(aes(color=site_nbr))

# Or make multiple lattice-like plots, default may be horizontal.
ggplot(data=df, aes(x=NULL, y=cfs)) +
  geom_boxplot() +
  facet_wrap(~site_nbr)

# Or make multiple lattice-like plots, specifying you want vertical.
ggplot(data=df, aes(x=NULL, y=cfs)) +
  geom_boxplot() +
  facet_wrap(~site_nbr, nrow=2)

# The above has the same scale used, so if you want, change them.
ggplot(data=df, aes(x=NULL, y=cfs)) +
  geom_boxplot() +
  facet_wrap(~site_nbr, nrow=2, ncol=1, scales="free")

# ALTERNATE METHOD of making multiple plots and combining them later.
require("cowplot")

# read in data to simulate what is shown below:
df1 <- data.frame(site_nbr=1, DATE=1:5,
cfs=c(11900,11800,11900,11700,11800))
df2 <- data.frame(site_nbr=2, DATE=3:7,
cfs=c(12900,12600,12900,12700,12300))

# Create and save two ggplots, or more in your case:

p1 <- ggplot(data=df1, aes(x=NULL, y=cfs)) +
  geom_boxplot(color="red", fill="yellow")


p2 <- ggplot(data=df2, aes(x=NULL, y=cfs)) +
  geom_boxplot(color="green", fill="pink")

# combine the two or more verically using the plot_grid() from cowplot
plot_grid(p1, p2, ncol=1)

#END OF CODE

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rich Shepard
Sent: Thursday, November 11, 2021 1:25 PM
To: r-help at r-project.org
Subject: Re: [R] ggplot2: multiple box plots, different tibbles/dataframes

On Thu, 11 Nov 2021, Avi Gross via R-help wrote:

> Say I have a data.frame with columns called PLACE and MEASURE others. 
> The one I call PLACE would be a factor containing the locations you 
> are measuring at. I mean it would be character strings of your N 
> places but the factors would be made in the order you want the results 
> in. The MEASURE variable in each row would contain one of the many 
> measures at that location. You probably would have other columns like
DATE.

Avi/Jeff/Burt,

Here are the head and tail of one data file:
site_nbr,year,mon,day,hr,min,tz,cfs
14174000,1986,10,01,00,30,PDT,11900
14174000,1986,10,01,01,00,PDT,11900
14174000,1986,10,01,01,30,PDT,11900
14174000,1986,10,01,02,00,PDT,11800
14174000,1986,10,01,02,30,PDT,11800
14174000,1986,10,01,03,00,PDT,11800
14174000,1986,10,01,03,30,PDT,11800
14174000,1986,10,01,04,00,PDT,11800
14174000,1986,10,01,04,30,PDT,11800
...
14174000,2021,09,30,23,12,PDT,5070
14174000,2021,09,30,23,17,PDT,5070
14174000,2021,09,30,23,22,PDT,5050
14174000,2021,09,30,23,27,PDT,5050
14174000,2021,09,30,23,32,PDT,5050
14174000,2021,09,30,23,37,PDT,5050
14174000,2021,09,30,23,42,PDT,5050
14174000,2021,09,30,23,47,PDT,5050
14174000,2021,09,30,23,52,PDT,5050
14174000,2021,09,30,23,57,PDT,5050

(Water years begin October 1st and end September 30th.)

The other three locations have the same format.

The boxplots for each PLACE (site_nbr) should summarize all MEASURE (cfs)
values for all recorded data (DATE).

The R tibbles have a datetime column which could be the DATE.

If I assemble all 4 sites into a single tupple I suppose it would have three
columns PLACE (the grouping factor), DATE (on the x axis), and MEASURE (cfs
on the y axis) and each boxplot would be grouped so the command would be:

disc_plot <- ggplot(df, aes(x = group, y = cfs)) +
 	geom_boxplot()

Is this close?

Thanks,

Rich

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Nov 11 23:12:23 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Nov 2021 14:12:23 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <01a901d7d72e$c827fbd0$5877f370$@verizon.net>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <2c6dad4-b34c-7114-bf1f-515375ea8cb@appl-ecosys.com>
 <CAGxFJbQWzsWd9aFdBnhe16UYsPVnuUULhzFNKG=rw2dCNUa0oQ@mail.gmail.com>
 <f9b911be-2786-213c-887d-cba05fe1a27f@appl-ecosys.com>
 <010d01d7d69e$eaae0950$c00a1bf0$@verizon.net>
 <cca2af5f-5fe6-24d1-6817-5c3af431b46c@appl-ecosys.com>
 <016901d7d71f$0abe7150$203b53f0$@verizon.net>
 <7bbd7a-e0d2-62b0-f89d-9e3a36c8ccb@appl-ecosys.com>
 <01a901d7d72e$c827fbd0$5877f370$@verizon.net>
Message-ID: <2ff221a3-87e9-bfc6-2148-7fc63014f652@appl-ecosys.com>

On Thu, 11 Nov 2021, Avi Gross via R-help wrote:

> This is not a place designed for using packages but since this discussion
> persists, ...

Avi,

I'll find a cowplot help site.

> # Create and save two ggplots, or more in your case:
>
> p1 <- ggplot(data=df1, aes(x=NULL, y=cfs)) +
>  geom_boxplot(color="red", fill="yellow")
>
> p2 <- ggplot(data=df2, aes(x=NULL, y=cfs)) +
>  geom_boxplot(color="green", fill="pink")
>
> # combine the two or more verically using the plot_grid() from cowplot
> plot_grid(p1, p2, ncol=1)

The data were already read in. Now I need to learn more of cowplot's
plot_grid to put the site name on the x-axis, turn the boxplots horizontal,
and change the plot box so it's not as wide as the default.

Thanks very much,

Rich


From jwd @end|ng |rom @urewe@t@net  Fri Nov 12 01:52:25 2021
From: jwd @end|ng |rom @urewe@t@net (John Dougherty)
Date: Thu, 11 Nov 2021 16:52:25 -0800
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
Message-ID: <20211111165225.546f8f87.jwd@surewest.net>

On Wed, 10 Nov 2021 11:44:07 -0800 (PST)
Rich Shepard <rshepard at appl-ecosys.com> wrote:

> I have the code to create ggplot2 boxplots using two attributes (e.g.,
> chemical concentration and month) from the same tibble. Is there an
> example from which I can learn how to make boxplots from different
> tibbles/dataframes (e.g., chemical concentrations and monitoring
> location)?
> 
> TIA,
> 
> Rich
> 
You should probably glance at the R Graphics Cookbook.  That was my
gateway to ggplot.  I believe ggplot is a part of the tidyverse so
there should good information.

JWDougherty


From ocheredko @end|ng |rom y@hoo@com  Fri Nov 12 00:35:48 2021
From: ocheredko @end|ng |rom y@hoo@com (Oleksandr Ocheredko)
Date: Fri, 12 Nov 2021 01:35:48 +0200
Subject: [R] problem with creation of /doc/index.html
References: <A3568554-44CF-49D5-B17A-4130AF1D5F90.ref@yahoo.com>
Message-ID: <A3568554-44CF-49D5-B17A-4130AF1D5F90@yahoo.com>

I use macOS BigSur v.11.5
R v.4.0.5 macOS
package ?ltable? does power analysis based on GSL-2.7
Xcode v.13.1

It goes smoothly with all OK on Checking, building, installing both with R and RStudio v. 1.3.1093
The only problem appears with Installing package in RStudio immediately after deleting it (no help.rd file found) which is solved just by rebooting RStudio

Description file:

Package: ltable
Type: Package
Title: Easy to Make (Lazy) Tables
Version: 2.0.1
Date: 2021-10-02
Author: Ocheredko Oleksandr
Description: Constructs tables of counts and proportions out of data sets. It has simplified syntax appealing for novice and even for advanced user under time pressure. It is particularly suitable for exploratory data analysis or presentation to single out most appropriate pieces of tabulated information. The other important feature is possibility to insert tables to Excel and Word documents. This version also features capacity of log-linear and power analyses for tabulated data with GSL.  
Maintainer: Ocheredko Oleksandr <Ocheredko at yahoo.com>
License: GPL (>= 2)
Depends: R (>= 4.0.0), methods, clipr  
Imports: Rcpp (>= 1.0.5), RcppGSL (>= 0.3.9), graphics, stats
Suggests: 
    MCMCglmm,
    knitr, 
    rmarkdown,
    datasets
VignetteBuilder: knitr
Collate: PowerPoisson.R RcppExports.R Plot.R Print.R table_f.R tableToData.R
SystemRequirements: GSL
NeedsCompilation: yes
OS_type: macOS
LinkingTo: Rcpp, RcppGSL

ltable/vignettes/ltable.rmd:
---
title: "ltable"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{ltable}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

Upon submitting to CRAN I received:
* installing *source* package ?ltable? ...
** using staged installation
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for gsl-config... /usr/bin/gsl-config
configure: creating ./config.status
config.status: creating src/Makevars
** libs
g++-11  -std=gnu++14 -I"/home/hornik/tmp/R/include" -DNDEBUG -I/usr/include -I'/home/hornik/lib/R/Library/4.2/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.2/x86_64-linux-gnu/RcppGSL/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2  -fpic  -g -O2 -Wall -pedantic -mtune=native  -c GSLPoisson.cpp -o GSLPoisson.o
g++-11  -std=gnu++14 -I"/home/hornik/tmp/R/include" -DNDEBUG -I/usr/include -I'/home/hornik/lib/R/Library/4.2/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.2/x86_64-linux-gnu/RcppGSL/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2  -fpic  -g -O2 -Wall -pedantic -mtune=native  -c RcppExports.cpp -o RcppExports.o
g++-11 -std=gnu++14 -shared -L/home/hornik/tmp/R/lib -Wl,-O1 -o ltable.so GSLPoisson.o RcppExports.o -L/usr/lib/x86_64-linux-gnu -lgsl -lgslcblas -lm -L/home/hornik/tmp/R/lib -lR
installing to /srv/hornik/tmp/CRAN/ltable.Rcheck/00LOCK-ltable/00new/ltable/libs
** R
** data
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
Warning in file(con, "w") :
  cannot open file ?/srv/hornik/tmp/CRAN/ltable.Rcheck/00LOCK-ltable/00new/ltable/doc/index.html?: No such file or directory
Calls: <Anonymous> ... installer -> .writeVignetteHtmlIndex -> writeLines -> file
Error in file(con, "w") : cannot open the connection
ERROR: installing vignettes failed
* removing ?/srv/hornik/tmp/CRAN/ltable.Rcheck/ltable?

Please, help me out with issue 
I checked Google to no avail
Thanks. Oleksandr


	[[alternative HTML version deleted]]


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Nov 12 14:47:57 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 12 Nov 2021 05:47:57 -0800 (PST)
Subject: [R] ggplot2: multiple box plots, different tibbles/dataframes
In-Reply-To: <20211111165225.546f8f87.jwd@surewest.net>
References: <a75ca540-b64-eb19-a3a8-35c91e5bf@appl-ecosys.com>
 <20211111165225.546f8f87.jwd@surewest.net>
Message-ID: <6334ea8e-74e-489a-a499-216a4792cd39@appl-ecosys.com>

On Thu, 11 Nov 2021, John Dougherty wrote:

> You should probably glance at the R Graphics Cookbook. That was my gateway
> to ggplot. I believe ggplot is a part of the tidyverse so there should
> good information.

John,

I have Hadley's ggplot2 book and keep referring to it but haven't used it
before this project.

Thanks for your suggestion,

Rich


From bgunter@4567 @end|ng |rom gm@||@com  Fri Nov 12 16:13:09 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 12 Nov 2021 07:13:09 -0800
Subject: [R] problem with creation of /doc/index.html
In-Reply-To: <A3568554-44CF-49D5-B17A-4130AF1D5F90@yahoo.com>
References: <A3568554-44CF-49D5-B17A-4130AF1D5F90.ref@yahoo.com>
 <A3568554-44CF-49D5-B17A-4130AF1D5F90@yahoo.com>
Message-ID: <CAGxFJbQkRKVe3X8i9Eiv7ZO3DicBKV2LHZnKYwq1giaBH1GzYg@mail.gmail.com>

I believe the R-package-devel list is where you should post this, not
here (though you might get lucky here). See here for details:
https://www.r-project.org/mail.html

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Thu, Nov 11, 2021 at 11:10 PM Oleksandr Ocheredko via R-help
<r-help at r-project.org> wrote:
>
> I use macOS BigSur v.11.5
> R v.4.0.5 macOS
> package ?ltable? does power analysis based on GSL-2.7
> Xcode v.13.1
>
> It goes smoothly with all OK on Checking, building, installing both with R and RStudio v. 1.3.1093
> The only problem appears with Installing package in RStudio immediately after deleting it (no help.rd file found) which is solved just by rebooting RStudio
>
> Description file:
>
> Package: ltable
> Type: Package
> Title: Easy to Make (Lazy) Tables
> Version: 2.0.1
> Date: 2021-10-02
> Author: Ocheredko Oleksandr
> Description: Constructs tables of counts and proportions out of data sets. It has simplified syntax appealing for novice and even for advanced user under time pressure. It is particularly suitable for exploratory data analysis or presentation to single out most appropriate pieces of tabulated information. The other important feature is possibility to insert tables to Excel and Word documents. This version also features capacity of log-linear and power analyses for tabulated data with GSL.
> Maintainer: Ocheredko Oleksandr <Ocheredko at yahoo.com>
> License: GPL (>= 2)
> Depends: R (>= 4.0.0), methods, clipr
> Imports: Rcpp (>= 1.0.5), RcppGSL (>= 0.3.9), graphics, stats
> Suggests:
>     MCMCglmm,
>     knitr,
>     rmarkdown,
>     datasets
> VignetteBuilder: knitr
> Collate: PowerPoisson.R RcppExports.R Plot.R Print.R table_f.R tableToData.R
> SystemRequirements: GSL
> NeedsCompilation: yes
> OS_type: macOS
> LinkingTo: Rcpp, RcppGSL
>
> ltable/vignettes/ltable.rmd:
> ---
> title: "ltable"
> output: rmarkdown::html_vignette
> vignette: >
>   %\VignetteIndexEntry{ltable}
>   %\VignetteEngine{knitr::rmarkdown}
>   %\VignetteEncoding{UTF-8}
> ---
>
> Upon submitting to CRAN I received:
> * installing *source* package ?ltable? ...
> ** using staged installation
> checking for gcc... gcc
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ISO C89... none needed
> checking for gsl-config... /usr/bin/gsl-config
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> g++-11  -std=gnu++14 -I"/home/hornik/tmp/R/include" -DNDEBUG -I/usr/include -I'/home/hornik/lib/R/Library/4.2/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.2/x86_64-linux-gnu/RcppGSL/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2  -fpic  -g -O2 -Wall -pedantic -mtune=native  -c GSLPoisson.cpp -o GSLPoisson.o
> g++-11  -std=gnu++14 -I"/home/hornik/tmp/R/include" -DNDEBUG -I/usr/include -I'/home/hornik/lib/R/Library/4.2/x86_64-linux-gnu/Rcpp/include' -I'/home/hornik/lib/R/Library/4.2/x86_64-linux-gnu/RcppGSL/include' -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2  -fpic  -g -O2 -Wall -pedantic -mtune=native  -c RcppExports.cpp -o RcppExports.o
> g++-11 -std=gnu++14 -shared -L/home/hornik/tmp/R/lib -Wl,-O1 -o ltable.so GSLPoisson.o RcppExports.o -L/usr/lib/x86_64-linux-gnu -lgsl -lgslcblas -lm -L/home/hornik/tmp/R/lib -lR
> installing to /srv/hornik/tmp/CRAN/ltable.Rcheck/00LOCK-ltable/00new/ltable/libs
> ** R
> ** data
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> Warning in file(con, "w") :
>   cannot open file ?/srv/hornik/tmp/CRAN/ltable.Rcheck/00LOCK-ltable/00new/ltable/doc/index.html?: No such file or directory
> Calls: <Anonymous> ... installer -> .writeVignetteHtmlIndex -> writeLines -> file
> Error in file(con, "w") : cannot open the connection
> ERROR: installing vignettes failed
> * removing ?/srv/hornik/tmp/CRAN/ltable.Rcheck/ltable?
>
> Please, help me out with issue
> I checked Google to no avail
> Thanks. Oleksandr
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Nov 12 20:23:18 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 12 Nov 2021 11:23:18 -0800 (PST)
Subject: [R] ggplot2: 'not finding <-<- error'
Message-ID: <6a25aa4-8c2a-62e9-fec-6e39fdd5374f@appl-ecosys.com>

I'm writing a script to plot data distributions. It worked in a basic form
and I'm now adding features and tweaking the presentation. When I sourced
the file this error appeared:

Error in p1 <- ggplot(data = pdx_disc, aes(x = NULL, y = cfs)) + geom_boxplot(color = "#00008B",  (from all_disc_boxplot.r#9) :
   could not find function "<-<-"

Line 9 in the script defines the first boxplot:
p1 <- ggplot(data = pdx_disc, aes(x = NULL, y = cfs)) +
     geom_boxplot(
         # custom boxes
         color='#00008B',
         fill='#00008B',
         alpha=0.2,
         # custom outliers
         outlier.color='#B22222',
         outlier.fill='#FF3030',
         outlier.size=2) +
     coord_flip() +
     xlab = 'Portland Discharge'

I don't see any <-<- (nor have I before now) and I need help understanding
the source of this error.

TIA,

Rich


From chr|@ho|d @end|ng |rom p@yctc@org  Fri Nov 12 20:32:35 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Fri, 12 Nov 2021 19:32:35 +0000 (UTC)
Subject: [R] ggplot2: 'not finding <-<- error'
In-Reply-To: <6a25aa4-8c2a-62e9-fec-6e39fdd5374f@appl-ecosys.com>
References: <6a25aa4-8c2a-62e9-fec-6e39fdd5374f@appl-ecosys.com>
Message-ID: <1411504127.4340069.1636745555454.JavaMail.zimbra@psyctc.org>

I think it's your xlab.  Should be:

### creating reproducible example
library(tidyverse)

rnorm(50) %>%
  as_tibble() %>%
  rename(cfs = value) -> pdx_disc


ggplot(data = pdx_disc, aes(x = NULL, y = cfs)) +
  geom_boxplot(
    # custom boxes
    color='#00008B',
    fill='#00008B',
    alpha=0.2,
    # custom outliers
    outlier.color='#B22222',
    outlier.fill='#FF3030',
    outlier.size=2) +
  coord_flip() +
  ### I think this is what you want for your xlab:
  xlab('Portland Discharge')

----- Original Message -----
> From: "Rich Shepard" <rshepard at appl-ecosys.com>
> To: r-help at r-project.org
> Sent: Friday, 12 November, 2021 19:23:18
> Subject: [R] ggplot2: 'not finding <-<- error'

> I'm writing a script to plot data distributions. It worked in a basic form
> and I'm now adding features and tweaking the presentation. When I sourced
> the file this error appeared:
> 
> Error in p1 <- ggplot(data = pdx_disc, aes(x = NULL, y = cfs)) +
> geom_boxplot(color = "#00008B",  (from all_disc_boxplot.r#9) :
>   could not find function "<-<-"
> 
> Line 9 in the script defines the first boxplot:
> p1 <- ggplot(data = pdx_disc, aes(x = NULL, y = cfs)) +
>     geom_boxplot(
>         # custom boxes
>         color='#00008B',
>         fill='#00008B',
>         alpha=0.2,
>         # custom outliers
>         outlier.color='#B22222',
>         outlier.fill='#FF3030',
>         outlier.size=2) +
>     coord_flip() +
>     xlab = 'Portland Discharge'
> 
> I don't see any <-<- (nor have I before now) and I need help understanding
> the source of this error.
> 
> TIA,
> 
> Rich
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Chris Evans (he/him) <chris at psyctc.org> Visiting Professor, UDLA, Quito, Ecuador 
Work web site: https://www.psyctc.org/psyctc/ 
CORE site:     https://www.coresystemtrust.org.uk/
Personal site: https://www.psyctc.org/pelerinage2016/
OMbook:        https://ombook.psyctc.org/book/


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Nov 12 20:40:30 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 12 Nov 2021 11:40:30 -0800 (PST)
Subject: [R] ggplot2: 'not finding <-<- error' [RESOLVED]
In-Reply-To: <1411504127.4340069.1636745555454.JavaMail.zimbra@psyctc.org>
References: <6a25aa4-8c2a-62e9-fec-6e39fdd5374f@appl-ecosys.com>
 <1411504127.4340069.1636745555454.JavaMail.zimbra@psyctc.org>
Message-ID: <2ec30eb-fb1c-5a35-192f-6c687d2626ce@appl-ecosys.com>

On Fri, 12 Nov 2021, Chris Evans wrote:

> I think it's your xlab.  Should be:

Chris,

Ah, I should know better, but I didn't relate the error message to that
line.

Thank you.

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Nov 12 20:58:56 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 12 Nov 2021 11:58:56 -0800 (PST)
Subject: [R] Current R color chart
Message-ID: <97719d15-97c3-e3a8-5d7f-a87f562908c@appl-ecosys.com>

I have an R color chart downloaded from the Web March 4, 2015. Using it to
set ggplot2 colors R responds with 'Error: Unknown colour name: FF3030' for
a number of these colors.

There are several different color charts for R when I look for a new one but
I cannot tell which one has all colors recognized by the latest R version.

Rich


From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Nov 12 21:26:57 2021
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 12 Nov 2021 12:26:57 -0800 (PST)
Subject: [R] Current R color chart [RESOLVED]
In-Reply-To: <2043992533.223584.1636747888483@mail.yahoo.com>
References: <97719d15-97c3-e3a8-5d7f-a87f562908c@appl-ecosys.com>
 <2043992533.223584.1636747888483@mail.yahoo.com>
Message-ID: <ff467567-4ba9-ffbd-4614-54af7fc6776@appl-ecosys.com>

On Fri, 12 Nov 2021, Avi Gross wrote:

> Type colors()

Avi,

That's really helpful. Names are more easily grokked than are hex numbers.

Thanks,

Rich


From m@rc_@chw@rtz @end|ng |rom me@com  Fri Nov 12 21:38:31 2021
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Fri, 12 Nov 2021 15:38:31 -0500
Subject: [R] Current R color chart
In-Reply-To: <97719d15-97c3-e3a8-5d7f-a87f562908c@appl-ecosys.com>
References: <97719d15-97c3-e3a8-5d7f-a87f562908c@appl-ecosys.com>
Message-ID: <befa859c-222b-38ae-ee9b-765eed230bbc@me.com>

Hi Rich,

You don't show the actual code that you used, and I do not use ggplot, 
but if you want to use RGB hex codes to define a color, you need to use 
'#' as a prefix for the 6 character RGB code:

For example:

 > plot(1:10, col = "FF3030")
Error in plot.xy(xy, type, ...) : invalid color name 'FF3030'

versus:

plot(1:10, col = "#FF3030")

the latter which includes the '#' and works to generate the plot.

Otherwise, as Avi apparently replied separately, use colors() or 
colours() to see the actual color text names and ?colors for more help.

Regards,

Marc Schwartz

Rich Shepard wrote on 11/12/21 2:58 PM:
> I have an R color chart downloaded from the Web March 4, 2015. Using 
> it to
> set ggplot2 colors R responds with 'Error: Unknown colour name: 
> FF3030' for
> a number of these colors.
>
> There are several different color charts for R when I look for a new 
> one but
> I cannot tell which one has all colors recognized by the latest R 
> version.
>
> Rich


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Sat Nov 13 20:24:08 2021
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Sat, 13 Nov 2021 19:24:08 +0000
Subject: [R] Using update() within a function with a changed formula
Message-ID: <d936f30061a04707923f05509a745b79@UM-MAIL3214.unimaas.nl>

Hello all,

Say I would like to change the outcome in a formula to a variable not part of the original dataset. This works just fine:

res <- lm(mpg ~ wt + cyl, data=mtcars)
res
y <- rnorm(nobs(x))
update(x, formula = y ~ .)

But not when doing so within a function:

rm(y)

f <- function(x) {
   y <- rnorm(nobs(x))
   update(x, formula = y ~ .)
}

f(res)

Is there a way to make this work? Using y <<- ... inside the function works, but I would like to avoid such a heavy-handed approach.

Best,
Wolfgang


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Nov 13 21:07:08 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Nov 2021 15:07:08 -0500
Subject: [R] Using update() within a function with a changed formula
In-Reply-To: <d936f30061a04707923f05509a745b79@UM-MAIL3214.unimaas.nl>
References: <d936f30061a04707923f05509a745b79@UM-MAIL3214.unimaas.nl>
Message-ID: <f73c9a61-a3c4-d422-9063-75035b7a68a1@gmail.com>

On 13/11/2021 2:24 p.m., Viechtbauer, Wolfgang (SP) wrote:
> Hello all,
> 
> Say I would like to change the outcome in a formula to a variable not part of the original dataset. This works just fine:
> 
> res <- lm(mpg ~ wt + cyl, data=mtcars)
> res
> y <- rnorm(nobs(x))
> update(x, formula = y ~ .)
> 
> But not when doing so within a function:
> 
> rm(y)
> 
> f <- function(x) {
>     y <- rnorm(nobs(x))
>     update(x, formula = y ~ .)
> }
> 
> f(res)
> 
> Is there a way to make this work? Using y <<- ... inside the function works, but I would like to avoid such a heavy-handed approach.

Formulas have associated environments, and that's where functions using 
them look for variables.  update() leaves the formula environment 
unchanged, as documented in ?update.formula. Since yours started out as 
globalenv(), you would need to put y there, and that's what you want to 
avoid.

However, the default update() method (the one you call on res, that 
calls the formula method) allows you to change other things.

So you could do it this way:

res <- lm(mpg ~ wt + cyl, data=mtcars)

f <- function(x) {
   y <- rnorm(nobs(x))
   newdata <- cbind(model.frame(x), y)
   update(x, formula = y ~ ., data = newdata)
}
f(res)

Duncan Murdoch


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Sat Nov 13 21:14:31 2021
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Wolfgang Viechtbauer)
Date: Sat, 13 Nov 2021 21:14:31 +0100 (CET)
Subject: [R] Using update() within a function with a changed formula
In-Reply-To: <f73c9a61-a3c4-d422-9063-75035b7a68a1@gmail.com>
References: <d936f30061a04707923f05509a745b79@UM-MAIL3214.unimaas.nl>
 <f73c9a61-a3c4-d422-9063-75035b7a68a1@gmail.com>
Message-ID: <alpine.DEB.2.22.394.2111132113390.1029059@wv-x5>

Perfectly clear. Thanks!

Best,
Wolfgang

On Sat, 13 Nov 2021, Duncan Murdoch wrote:
> On 13/11/2021 2:24 p.m., Viechtbauer, Wolfgang (SP) wrote:
>> Hello all,
>> 
>> Say I would like to change the outcome in a formula to a variable not part 
>> of the original dataset. This works just fine:
>> 
>> res <- lm(mpg ~ wt + cyl, data=mtcars)
>> res
>> y <- rnorm(nobs(x))
>> update(x, formula = y ~ .)
>> 
>> But not when doing so within a function:
>> 
>> rm(y)
>> 
>> f <- function(x) {
>>     y <- rnorm(nobs(x))
>>     update(x, formula = y ~ .)
>> }
>> 
>> f(res)
>> 
>> Is there a way to make this work? Using y <<- ... inside the function 
>> works, but I would like to avoid such a heavy-handed approach.
>
> Formulas have associated environments, and that's where functions using them 
> look for variables.  update() leaves the formula environment unchanged, as 
> documented in ?update.formula. Since yours started out as globalenv(), you 
> would need to put y there, and that's what you want to avoid.
>
> However, the default update() method (the one you call on res, that calls the 
> formula method) allows you to change other things.
>
> So you could do it this way:
>
> res <- lm(mpg ~ wt + cyl, data=mtcars)
>
> f <- function(x) {
>  y <- rnorm(nobs(x))
>  newdata <- cbind(model.frame(x), y)
>  update(x, formula = y ~ ., data = newdata)
> }
> f(res)
>
> Duncan Murdoch


From @boue|m@k@r|m1962 @end|ng |rom gm@||@com  Sun Nov 14 01:00:28 2021
From: @boue|m@k@r|m1962 @end|ng |rom gm@||@com (AbouEl-Makarim Aboueissa)
Date: Sat, 13 Nov 2021 19:00:28 -0500
Subject: [R] Confidence Interval for p1-p2 and plot the CI with bar chart
Message-ID: <CAE9stmfn_GL891p-dcw2y0s_GDDuvOoXmg=+GM0BoMT-XcP3rw@mail.gmail.com>

Dear All:



I do have a binary data set with multiple variables, event = 1 in all
variables. As an example, I attached a data set with 6 variables. The first
column is the grouping variable. Then the next 5 columns are the binary
data for 5 variables.



- Can we compute the confidence interval for the difference between the two
proportions of the event = 1 in both groups (say: G1 ? G2) for the 5
variables in one shut.



- I also need to create the Bar plot of individual proportions (both groups
side-by-side) and add the confidence intervals bar for the 5 variables in
one graph.





Example.Data <- read.table(file="F/Example_Data_for_R.csv", header=T,
sep=",")

Example.Data

attach(Example.Data)







#### For example, this is how I use the prop.test() function to get the CI
for p1-p2



x12 <- c(x1, x2)

n12 <- c(n1, n2)

prop.test(x12, n12, conf.level = 0.95)$conf.int



But, I am not sure how to use it for raw data, and for multiple pairs of
data in one shut if possible.



With many thanks in advance

Abou
______________________


*AbouEl-Makarim Aboueissa, PhD*

*Professor, Statistics and Data Science*
*Graduate Coordinator*

*Department of Mathematics and Statistics*
*University of Southern Maine*

From drj|m|emon @end|ng |rom gm@||@com  Sun Nov 14 02:47:37 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 14 Nov 2021 12:47:37 +1100
Subject: [R] 
 Confidence Interval for p1-p2 and plot the CI with bar chart
In-Reply-To: <CAE9stmfn_GL891p-dcw2y0s_GDDuvOoXmg=+GM0BoMT-XcP3rw@mail.gmail.com>
References: <CAE9stmfn_GL891p-dcw2y0s_GDDuvOoXmg=+GM0BoMT-XcP3rw@mail.gmail.com>
Message-ID: <CA+8X3fU8vkQ6r=aH4=KP1-EVsK1N2-KgFZ2CHvzAy_aa0tnFbw@mail.gmail.com>

Hi Abou,
Perhaps this will be helpful. Be aware that you will cop some flak for
putting error bars on a bar plot.

aadat<-data.frame(group=c(rep("Exp",50),rep("Con",50)),
 v1=sample(0:1,100,TRUE),
 v2=sample(0:1,100,TRUE),
 v3=sample(0:1,100,TRUE),
 v4=sample(0:1,100,TRUE),
 v5=sample(0:1,100,TRUE))
ggps<-function(x,group) {
 gns<-as.vector(table(group))
 return(by(x,group,sum)/gns)
}
testggps<-data.frame(
 group=c("A","A","A","B","B","B","B","C","C","C","C","C"),
 x=c(1,0,1,1,0,1,0,1,1,0,0,0))
aaprop<-sapply(aadat[,2:6],ggps,aadat[,1])
library(plotrix)
barpos<-barp(aaprop,ylim=c(0,0.65),col=c(2,3),names.arg=colnames(aaprop))
legend(2.5,0.65,c("Con","Exp"),fill=c(2,3))
dispersion(barpos$x,barpos$y,ulim=aaprop/10)

Jim

On Sun, Nov 14, 2021 at 11:01 AM AbouEl-Makarim Aboueissa
<abouelmakarim1962 at gmail.com> wrote:
>
> Dear All:
>
>
>
> I do have a binary data set with multiple variables, event = 1 in all
> variables. As an example, I attached a data set with 6 variables. The first
> column is the grouping variable. Then the next 5 columns are the binary
> data for 5 variables.
>
>
>
> - Can we compute the confidence interval for the difference between the two
> proportions of the event = 1 in both groups (say: G1 ? G2) for the 5
> variables in one shut.
>
>
>
> - I also need to create the Bar plot of individual proportions (both groups
> side-by-side) and add the confidence intervals bar for the 5 variables in
> one graph.
>
>
>
>
>
> Example.Data <- read.table(file="F/Example_Data_for_R.csv", header=T,
> sep=",")
>
> Example.Data
>
> attach(Example.Data)
>
>
>
>
>
>
>
> #### For example, this is how I use the prop.test() function to get the CI
> for p1-p2
>
>
>
> x12 <- c(x1, x2)
>
> n12 <- c(n1, n2)
>
> prop.test(x12, n12, conf.level = 0.95)$conf.int
>
>
>
> But, I am not sure how to use it for raw data, and for multiple pairs of
> data in one shut if possible.
>
>
>
> With many thanks in advance
>
> Abou
> ______________________
>
>
> *AbouEl-Makarim Aboueissa, PhD*
>
> *Professor, Statistics and Data Science*
> *Graduate Coordinator*
>
> *Department of Mathematics and Statistics*
> *University of Southern Maine*
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


