From |uy@g@rc|@ @end|ng |rom gm@||@com  Tue Jun  1 00:10:31 2021
From: |uy@g@rc|@ @end|ng |rom gm@||@com (=?UTF-8?Q?Luis_Fernando_Garc=C3=ADa?=)
Date: Mon, 31 May 2021 19:10:31 -0300
Subject: [R] Plot GEE confindence interval band ggplot2
Message-ID: <CANxP2S7JBVVHR0RV79u6ThYEa-4ixFbjNBi2cp6tm84tW-cz6Q@mail.gmail.com>

Dear all,

I want to plot a Generalized Estimating Equation (GEE) model, with
interactions  and the confidence interval using a similar style to ggplot2
. I have tried several packages but all of them produce errors. My idea

I wanted to know if anyone knows a graphical package which works with GEE
or simular solution

Dataset in this link:
https://docs.google.com/spreadsheets/d/1nXerN91Iehe9OM1VGDMS3jnbvvF1tWcuS9bGtlrj_Ss/edit?usp=sharing

Thanks!

code below:

library(geepack)
library(ggplot2)
library(visreg)
library(sjPlot)

#Copy dataset before following the code

dat <- read.delim("clipboard", dec=","); attach(dat)
head(dat)
str(dat)
names(dat)
m5<- geeglm(tim~Pa*Pt,id=Esp, Gamma(link=log), corstr="exchangeable")
anova(m5,test="Chisq")
visreg(m5, "Pt", by="Pa",band=T, overlay=TRUE)
plot_model(m5, type = "pred", terms = c("Pa","Pt"))

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jun  1 02:25:47 2021
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 31 May 2021 20:25:47 -0400
Subject: [R] DBDA2E-utilities.R file download
In-Reply-To: <CABxY9BOFo55L5unGckONr6swy7hDJUymsqCd-syjATp5Hh-tMQ@mail.gmail.com>
References: <CABxY9BOFo55L5unGckONr6swy7hDJUymsqCd-syjATp5Hh-tMQ@mail.gmail.com>
Message-ID: <CAKZQJMA3TdThL=5+vrivSgqwrASvj2MEn+uYX63=Ow1i8+8MVw@mail.gmail.com>

If it seems to have installed correctly try:
library(DBDA2E)
which should load the DBDA at E-specific programmes.



On Mon, 31 May 2021 at 16:27, Nick Wray <nickmwray at gmail.com> wrote:
>
> Hello I am trying to download the file "kyusque/DBDA2E-utilities.R" which
> is used in following through John Krushke's book on Bayesian stats.
> According to the net (kyusque/DBDA2E-utilities: Packaged One for
> DBDA2E-utilities.R in 'Kruschke, J. K. (2015). Doing Bayesian Data
> Analysis, Second Edition' version 0.1.0 from GitHub (rdrr.io)
> <https://rdrr.io/github/kyusque/DBDA2E-utilities/>) I needed to
>
> install.packages("remotes")
> remotes::install_github("kyusque/DBDA2E-utilities")
>
> which i have done, and seem to have done successfully
>
> but I can't get hold of the utilities file.  Does anyone know what I
> should now do?
>
> Thanks Nick Wray
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
John Kane
Kingston ON Canada


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Tue Jun  1 10:51:55 2021
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Tue, 1 Jun 2021 09:51:55 +0100
Subject: [R] if statement and for loop question
In-Reply-To: <807993174.1064155.1622478411915@mail.yahoo.com>
References: <1141622248.909505.1622392132322.ref@mail.yahoo.com>
 <1141622248.909505.1622392132322@mail.yahoo.com>
 <CA+8X3fXWDUCvNe2ZHPORZoVyO=Md2K2vAiiBYOXsKnrSU6ahXw@mail.gmail.com>
 <807993174.1064155.1622478411915@mail.yahoo.com>
Message-ID: <223fb941-16c7-0828-9e15-25ac9e045eca@dewey.myzen.co.uk>

Dear Kai

When you ask again it is best to tell us what your input is and what 
output you were hoping for and what you actually got. If you can make a 
small data-set which shows all that then your post will be much more 
likely to get a helpful response. If you want to transfer the data-set 
to us then using dput() will ensure that we have exactly the same as you 
have. Do not forget to tell us what libraries, if any, you have loaded too.

Michael

On 31/05/2021 17:26, Kai Yang via R-help wrote:
>    Hi Jim,
> Sorry to post "same" question, because
> 1. I was asking to use plain text format. I have to post my question again. But I don't know if it is working.
> 2. I'm a beginner for R (< 2 month). It may not easy for me to ask a "clear" R question. My current work is to transfer my SAS code into R, especially for data manipulation part.
> I'll do my best to ask a non."same" question later.
> Thanks,
> Kai
>      On Sunday, May 30, 2021, 10:44:41 PM PDT, Jim Lemon <drjimlemon at gmail.com> wrote:
>   
>   Hi Kai,
> You seem to be asking the same question again and again. This does not
> give us the warm feeling that you know what you want.
> 
> testdf<-data.frame(a=c("Negative","Positive","Neutral","Random","VUS"),
>   b=c("No","Yes","No","Maybe","Yes"),
>   c=c("Off","On","Off","Off","On"),
>   d=c("Bad","Good","Bad","Bad","Good"),
>   stringsAsFactors=FALSE)
> testdf
> match_strings<-c("Positive","VUS")
> testdf$b<-ifelse(testdf$a %in% match_strings,testdf$b,"")
> testdf$c<-ifelse(testdf$a %in% match_strings,testdf$c,"")
> testdf$d<-ifelse(testdf$a %in% match_strings,testdf$d,"")
> testdf
> 
> I have assumed that you mean "zero length strings" rather than
> "zeros". Also note that your initial code was producing logical values
> that were never assigned to anything.
> 
> Jim
> 
> On Mon, May 31, 2021 at 2:29 AM Kai Yang via R-help
> <r-help at r-project.org> wrote:
>>
>> Hello List,I have a data frame which having the character columns:
>>
>> | a1 | b1 | c1 | d1 |
>> | a2 | b2 | c2 | d2 |
>> | a3 | b3 | c3 | d3 |
>> | a4 | b4 | c4 | d4 |
>> | a5 | b5 | c5 | d5 |
>>
>>
>>
>> I need to do: if a1 not = "Positive" and not = "VUS" then values of? b1, c1 and d1 will be zero out. And do the same thing for the a2 to a5 series.
>> I write the code below to do this. But it doesn't work. Would you please correct my code?
>> Thank you,
>> Kai
>>
>>
>> for (i in 1:5)
>> {
>>  ? if (isTRUE(try$a[i] != "Positive" && try$a[i] != "VUS"))
>>  ? {
>>  ? ? try$b[i]== ''
>>  ? ? try$c[i] == ''
>>  ? ? try$d[i]== ''
>>  ? }
>> }
>>
>>
>>  ? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>    
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jun  1 14:10:18 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 1 Jun 2021 13:10:18 +0100
Subject: [R] Plot GEE confindence interval band ggplot2
In-Reply-To: <CANxP2S7JBVVHR0RV79u6ThYEa-4ixFbjNBi2cp6tm84tW-cz6Q@mail.gmail.com>
References: <CANxP2S7JBVVHR0RV79u6ThYEa-4ixFbjNBi2cp6tm84tW-cz6Q@mail.gmail.com>
Message-ID: <ebb19a05-89ae-9bef-659d-bb303ef1d8b0@sapo.pt>

Hello,

I don't know if the following is what you want but it gives confidence 
bars. The error in your code is to have Esp as id.


dat$Id <- as.integer(factor(dat$Esp))

m5 <- geeglm(
   formula = tim ~ Pa*Pt,
   family = Gamma(link = log),
   data = dat,
   id = Id,
   corstr = "exchangeable"
)
plot_model(m5, type = "pred", terms = c("Pa", "Pt"))


Hope this helps,

Rui Barradas

?s 23:10 de 31/05/21, Luis Fernando Garc?a escreveu:
> Dear all,
> 
> I want to plot a Generalized Estimating Equation (GEE) model, with
> interactions  and the confidence interval using a similar style to ggplot2
> . I have tried several packages but all of them produce errors. My idea
> 
> I wanted to know if anyone knows a graphical package which works with GEE
> or simular solution
> 
> Dataset in this link:
> https://docs.google.com/spreadsheets/d/1nXerN91Iehe9OM1VGDMS3jnbvvF1tWcuS9bGtlrj_Ss/edit?usp=sharing
> 
> Thanks!
> 
> code below:
> 
> library(geepack)
> library(ggplot2)
> library(visreg)
> library(sjPlot)
> 
> #Copy dataset before following the code
> 
> dat <- read.delim("clipboard", dec=","); attach(dat)
> head(dat)
> str(dat)
> names(dat)
> m5<- geeglm(tim~Pa*Pt,id=Esp, Gamma(link=log), corstr="exchangeable")
> anova(m5,test="Chisq")
> visreg(m5, "Pt", by="Pa",band=T, overlay=TRUE)
> plot_model(m5, type = "pred", terms = c("Pa","Pt"))
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@@@|m|||@no@tr|po|| @end|ng |rom gm@||@com  Tue Jun  1 09:46:42 2021
From: m@@@|m|||@no@tr|po|| @end|ng |rom gm@||@com (Massimiliano Tripoli)
Date: Tue, 1 Jun 2021 09:46:42 +0200
Subject: [R] Binary data on JAGS
Message-ID: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>

Dear R users,
I'm trying to reproduce the example 6.5.1 (Dobson (1983)) in BUGS book in
linux using JAGS.
Below the code as


https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-the-bugs-book/bugs-book-examples/the-bugs-book-examples-chapter-6-6-5-1/

# By R code:
library('rjags')

 jags <- jags.model(
    file = "651.bug",
    list (x = c(1.6907, 1.7242, 1.7552, 1.7842, 1.8113, 1.8369, 1.8610,
1.8839),
    n = c(59, 60, 62, 56, 63, 59, 62, 60),
    y = c(6, 13, 18, 28, 52, 53, 61, 60)) ,
    inits = list(beta = 0, alpha = 50),
    n.chains = 3
)

# By JAGS code: (651.bug)

model {
for (i in 1:8) {
y[i] ~ dbin(p[i], n[i])
logit(p[i]) <- alpha + beta*(x[i] - mean(x[]))
phat[i] <- y[i]/n[i]
yhat[i] <- n[i]*p[i]
}
alpha ~ dnorm(0, 0.0001)
beta ~ dnorm(0, 0.0001)
}
# I received this error in R:

# Resolving undeclared variables

#   Allocating nodes

#Graph information:

#   Observed stochastic nodes: 8

#   Unobserved stochastic nodes: 2

#   Total graph size: 78



#Initializing model

#Deleting model



#Error in jags.model(file = "651.bug", list(x = c(1.6907, 1.7242, 1.7552,
 :
#  Error in node y[1]

#Node inconsistent with parents

Thanks in advance
M. Tripoli

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun  1 17:22:14 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 1 Jun 2021 08:22:14 -0700
Subject: [R] Binary data on JAGS
In-Reply-To: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>
References: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>
Message-ID: <CAGxFJbTfO3GPHgwMzD+WrVZnFANLCZC9_P6ra3uMhv3big0aVw@mail.gmail.com>

Where is p defined before it is used? (Is this part of what jags provides
somehow?)

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 1, 2021 at 7:57 AM Massimiliano Tripoli <
massimiliano.tripoli at gmail.com> wrote:

> Dear R users,
> I'm trying to reproduce the example 6.5.1 (Dobson (1983)) in BUGS book in
> linux using JAGS.
> Below the code as
>
>
>
> https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-the-bugs-book/bugs-book-examples/the-bugs-book-examples-chapter-6-6-5-1/
>
> # By R code:
> library('rjags')
>
>  jags <- jags.model(
>     file = "651.bug",
>     list (x = c(1.6907, 1.7242, 1.7552, 1.7842, 1.8113, 1.8369, 1.8610,
> 1.8839),
>     n = c(59, 60, 62, 56, 63, 59, 62, 60),
>     y = c(6, 13, 18, 28, 52, 53, 61, 60)) ,
>     inits = list(beta = 0, alpha = 50),
>     n.chains = 3
> )
>
> # By JAGS code: (651.bug)
>
> model {
> for (i in 1:8) {
> y[i] ~ dbin(p[i], n[i])
> logit(p[i]) <- alpha + beta*(x[i] - mean(x[]))
> phat[i] <- y[i]/n[i]
> yhat[i] <- n[i]*p[i]
> }
> alpha ~ dnorm(0, 0.0001)
> beta ~ dnorm(0, 0.0001)
> }
> # I received this error in R:
>
> # Resolving undeclared variables
>
> #   Allocating nodes
>
> #Graph information:
>
> #   Observed stochastic nodes: 8
>
> #   Unobserved stochastic nodes: 2
>
> #   Total graph size: 78
>
>
>
> #Initializing model
>
> #Deleting model
>
>
>
> #Error in jags.model(file = "651.bug", list(x = c(1.6907, 1.7242, 1.7552,
>  :
> #  Error in node y[1]
>
> #Node inconsistent with parents
>
> Thanks in advance
> M. Tripoli
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun  1 19:39:51 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 1 Jun 2021 10:39:51 -0700
Subject: [R] Binary data on JAGS
In-Reply-To: <CA+Wm5kh1QZagF_JJbPMp_G_qD1nh4EkME1ULXK0sWReL-oLDeg@mail.gmail.com>
References: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>
 <CAGxFJbTfO3GPHgwMzD+WrVZnFANLCZC9_P6ra3uMhv3big0aVw@mail.gmail.com>
 <CA+Wm5kh1QZagF_JJbPMp_G_qD1nh4EkME1ULXK0sWReL-oLDeg@mail.gmail.com>
Message-ID: <CAGxFJbSOMW4WkZruJ3shiDqz+UJiuRnwW8jB8hkbFCqGFCb7gQ@mail.gmail.com>

Unless you have got reason not to, always reply to the list (included in
this response). I cannot help, but someone else may be able to.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 1, 2021 at 10:34 AM Massimiliano Tripoli <
massimiliano.tripoli at gmail.com> wrote:

> I tried to write
> p[i]<y[i]/n[i] but I received a runtime error
> (Attempt to redefine node p[1]).
> Thanks
>
> Il mar 1 giu 2021, 17:22 Bert Gunter <bgunter.4567 at gmail.com> ha scritto:
>
>> Where is p defined before it is used? (Is this part of what jags provides
>> somehow?)
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Jun 1, 2021 at 7:57 AM Massimiliano Tripoli <
>> massimiliano.tripoli at gmail.com> wrote:
>>
>>> Dear R users,
>>> I'm trying to reproduce the example 6.5.1 (Dobson (1983)) in BUGS book in
>>> linux using JAGS.
>>> Below the code as
>>>
>>>
>>>
>>> https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-the-bugs-book/bugs-book-examples/the-bugs-book-examples-chapter-6-6-5-1/
>>>
>>> # By R code:
>>> library('rjags')
>>>
>>>  jags <- jags.model(
>>>     file = "651.bug",
>>>     list (x = c(1.6907, 1.7242, 1.7552, 1.7842, 1.8113, 1.8369, 1.8610,
>>> 1.8839),
>>>     n = c(59, 60, 62, 56, 63, 59, 62, 60),
>>>     y = c(6, 13, 18, 28, 52, 53, 61, 60)) ,
>>>     inits = list(beta = 0, alpha = 50),
>>>     n.chains = 3
>>> )
>>>
>>> # By JAGS code: (651.bug)
>>>
>>> model {
>>> for (i in 1:8) {
>>> y[i] ~ dbin(p[i], n[i])
>>> logit(p[i]) <- alpha + beta*(x[i] - mean(x[]))
>>> phat[i] <- y[i]/n[i]
>>> yhat[i] <- n[i]*p[i]
>>> }
>>> alpha ~ dnorm(0, 0.0001)
>>> beta ~ dnorm(0, 0.0001)
>>> }
>>> # I received this error in R:
>>>
>>> # Resolving undeclared variables
>>>
>>> #   Allocating nodes
>>>
>>> #Graph information:
>>>
>>> #   Observed stochastic nodes: 8
>>>
>>> #   Unobserved stochastic nodes: 2
>>>
>>> #   Total graph size: 78
>>>
>>>
>>>
>>> #Initializing model
>>>
>>> #Deleting model
>>>
>>>
>>>
>>> #Error in jags.model(file = "651.bug", list(x = c(1.6907, 1.7242, 1.7552,
>>>  :
>>> #  Error in node y[1]
>>>
>>> #Node inconsistent with parents
>>>
>>> Thanks in advance
>>> M. Tripoli
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From m@@@|m|||@no@tr|po|| @end|ng |rom gm@||@com  Tue Jun  1 19:52:13 2021
From: m@@@|m|||@no@tr|po|| @end|ng |rom gm@||@com (Massimiliano Tripoli)
Date: Tue, 1 Jun 2021 19:52:13 +0200
Subject: [R] Binary data on JAGS
In-Reply-To: <CAGxFJbTfO3GPHgwMzD+WrVZnFANLCZC9_P6ra3uMhv3big0aVw@mail.gmail.com>
References: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>
 <CAGxFJbTfO3GPHgwMzD+WrVZnFANLCZC9_P6ra3uMhv3big0aVw@mail.gmail.com>
Message-ID: <CA+Wm5kjVJkxTixbojdHu7ZNSeWF5rvMBkTavteJ--MDi4NaLyA@mail.gmail.com>

Thanks, for suggestions (To define p before).
I thought it and I put this line of code inside the loop:
p[i] <- y[i] / n[i]
but I received a RUNTIME ERROR and:
(Attempt to redefine node p[1]).
Thanks

Massimiliano

Il giorno mar 1 giu 2021 alle ore 17:22 Bert Gunter <bgunter.4567 at gmail.com>
ha scritto:

> Where is p defined before it is used? (Is this part of what jags provides
> somehow?)
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Jun 1, 2021 at 7:57 AM Massimiliano Tripoli <
> massimiliano.tripoli at gmail.com> wrote:
>
>> Dear R users,
>> I'm trying to reproduce the example 6.5.1 (Dobson (1983)) in BUGS book in
>> linux using JAGS.
>> Below the code as
>>
>>
>>
>> https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-the-bugs-book/bugs-book-examples/the-bugs-book-examples-chapter-6-6-5-1/
>>
>> # By R code:
>> library('rjags')
>>
>>  jags <- jags.model(
>>     file = "651.bug",
>>     list (x = c(1.6907, 1.7242, 1.7552, 1.7842, 1.8113, 1.8369, 1.8610,
>> 1.8839),
>>     n = c(59, 60, 62, 56, 63, 59, 62, 60),
>>     y = c(6, 13, 18, 28, 52, 53, 61, 60)) ,
>>     inits = list(beta = 0, alpha = 50),
>>     n.chains = 3
>> )
>>
>> # By JAGS code: (651.bug)
>>
>> model {
>> for (i in 1:8) {
>> y[i] ~ dbin(p[i], n[i])
>> logit(p[i]) <- alpha + beta*(x[i] - mean(x[]))
>> phat[i] <- y[i]/n[i]
>> yhat[i] <- n[i]*p[i]
>> }
>> alpha ~ dnorm(0, 0.0001)
>> beta ~ dnorm(0, 0.0001)
>> }
>> # I received this error in R:
>>
>> # Resolving undeclared variables
>>
>> #   Allocating nodes
>>
>> #Graph information:
>>
>> #   Observed stochastic nodes: 8
>>
>> #   Unobserved stochastic nodes: 2
>>
>> #   Total graph size: 78
>>
>>
>>
>> #Initializing model
>>
>> #Deleting model
>>
>>
>>
>> #Error in jags.model(file = "651.bug", list(x = c(1.6907, 1.7242, 1.7552,
>>  :
>> #  Error in node y[1]
>>
>> #Node inconsistent with parents
>>
>> Thanks in advance
>> M. Tripoli
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jun  1 20:19:44 2021
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Tue, 1 Jun 2021 14:19:44 -0400
Subject: [R] DBDA2E-utilities.R file download
In-Reply-To: <CABxY9BPgeP0cmprdUnsJxqYDU_D-YPJNHKoXNniZ6pcx_7_iyg@mail.gmail.com>
References: <CABxY9BOFo55L5unGckONr6swy7hDJUymsqCd-syjATp5Hh-tMQ@mail.gmail.com>
 <CAKZQJMA3TdThL=5+vrivSgqwrASvj2MEn+uYX63=Ow1i8+8MVw@mail.gmail.com>
 <CABxY9BPgeP0cmprdUnsJxqYDU_D-YPJNHKoXNniZ6pcx_7_iyg@mail.gmail.com>
Message-ID: <CAKZQJMBHLww9+G5EJV00Ktz3Ns-RP5nEKXn4vMwrAe7RK3twDA@mail.gmail.com>

I have added this to the R Help mailing list as it increases your
chances of getting a helpful response.

That error message <i> can't "lazyload"</i> indicates that you have
some serious problem(s) upstream.

Probably the best thing to do is copy and paste the entire
installation output here for people to examine.

However as a quicker approach, scroll through the output and look for
an earlier message that will say something like:
There is no package called ?XXXX?.

This will indicate that for some reasan the package XXXX is not being
installed automatically.

You should try an install.packages("XXXX") and then retry
remotes::install_github("kyusque/DBDA2E-utilities")

In some cases there may be one missing package.

On Tue, 1 Jun 2021 at 03:19, Nick Wray <nickmwray at gmail.com> wrote:
>
> Hi John  Thanks but that doesn't work.  When installing the needed packages R is telling me that it can't "lazyload"  DBDA2E-utilities.  Tbh I don't understand what that means. The page I quoted in my OP implies that one should be able to easily upload the file but there are various error messages which come up which again tbh mean nothing to me.  As far as I am aware this file should simply be some straightforward data to do an exercise in the book...  Nick
>
> On Tue, 1 Jun 2021 at 01:26, John Kane <jrkrideau at gmail.com> wrote:
>>
>> If it seems to have installed correctly try:
>> library(DBDA2E)
>> which should load the DBDA at E-specific programmes.
>>
>>
>>
>> On Mon, 31 May 2021 at 16:27, Nick Wray <nickmwray at gmail.com> wrote:
>> >
>> > Hello I am trying to download the file "kyusque/DBDA2E-utilities.R" which
>> > is used in following through John Krushke's book on Bayesian stats.
>> > According to the net (kyusque/DBDA2E-utilities: Packaged One for
>> > DBDA2E-utilities.R in 'Kruschke, J. K. (2015). Doing Bayesian Data
>> > Analysis, Second Edition' version 0.1.0 from GitHub (rdrr.io)
>> > <https://rdrr.io/github/kyusque/DBDA2E-utilities/>) I needed to
>> >
>> > install.packages("remotes")
>> > remotes::install_github("kyusque/DBDA2E-utilities")
>> >
>> > which i have done, and seem to have done successfully
>> >
>> > but I can't get hold of the utilities file.  Does anyone know what I
>> > should now do?
>> >
>> > Thanks Nick Wray
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>> --
>> John Kane
>> Kingston ON Canada



-- 
John Kane
Kingston ON Canada


From e|ong0527 @end|ng |rom gm@||@com  Tue Jun  1 16:06:33 2021
From: e|ong0527 @end|ng |rom gm@||@com (Yilong Zhang)
Date: Tue, 1 Jun 2021 10:06:33 -0400
Subject: [R] [R-pkgs] r2rtf: Easily Create Production-Ready Rich Text Format
 (RTF) Table and Figure
Message-ID: <CANP8LTWrVq7hFWnAAf3+Ff=t4aaySOUD_TJ4sw=87pOkPjg5CA@mail.gmail.com>

Dear all,



I am happy to announce that {r2rtf} v0.3.0 is now on CRAN.



r2rtf is an R package to create production-ready tables and figures in RTF
format. The R package is designed to provide simple ?verb? functions that
correspond to each component of a table or figure.



I hope you find it helpful. Please feel free to reach out with feedback or
questions.



CRAN: https://cloud.r-project.org/web/packages/r2rtf/index.html

Documentation: https://merck.github.io/r2rtf/articles/index.html



Thanks,



Yilong

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Jun  2 01:58:38 2021
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Tue, 1 Jun 2021 23:58:38 +0000 (UTC)
Subject: [R] replace NA into -  for specific column
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
Message-ID: <1487868184.1349710.1622591918874@mail.yahoo.com>

Hi List,
I have a column MMR in a data frame proband_crc2. The column contents missing value and + (means positive).?
I need to replace all missing value into - (means negative)
I did try with difference ways.? Below are my testing,?but not any one works. Can someone help me?
Thanks,
Kai
proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
proband_crc2? ? ? ? ? ? <- data.frame (ifelse(proband_crc2$MMR !="+", "-", NA))
proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
proband_crc2? ? ? ? ? ?<- data.frame( proband_crc2 %>% mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun  2 02:11:49 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 01 Jun 2021 17:11:49 -0700
Subject: [R] replace NA into -  for specific column
In-Reply-To: <1487868184.1349710.1622591918874@mail.yahoo.com>
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
 <1487868184.1349710.1622591918874@mail.yahoo.com>
Message-ID: <115EDED9-F63D-4719-96F8-DF0DA0A7A20B@dcn.davis.ca.us>

A unary negative sign with no number is not a number, so it has to be character. If you are done with computations you can format your numbers as character data and set the NA to "-", but such a conversion will prevent you from performing computations so it is only useful for creating report tables.

On June 1, 2021 4:58:38 PM PDT, Kai Yang via R-help <r-help at r-project.org> wrote:
>Hi List,
>I have a column MMR in a data frame proband_crc2. The column contents
>missing value and + (means positive).?
>I need to replace all missing value into - (means negative)
>I did try with difference ways.? Below are my testing,?but not any one
>works. Can someone help me?
>Thanks,
>Kai
>proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
>proband_crc2? ? ? ? ? ? <- data.frame (ifelse(proband_crc2$MMR !="+",
>"-", NA))
>proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
>proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
>proband_crc2? ? ? ? ? ?<- data.frame( proband_crc2 %>%
>mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From rm@h@rp @end|ng |rom me@com  Wed Jun  2 03:59:50 2021
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Tue, 1 Jun 2021 21:59:50 -0400
Subject: [R] wanting to count instances of values in each cell of a series
 of simulated symmetric matrices of the same size
Message-ID: <325141A8-6318-4174-A063-3D07F6D56CF8@me.com>

I want to capture the entire distribution of values for each cell in a sequence of symmetric matrices of the same size. The diagonal values are all 0.5 so I need only the values above or below the diagonal. 

A small example with three of the structures I am wanting to count follows:
       F      G      H      I     J
F 0.6250 0.3750 0.2500 0.1875 0.125
G 0.3750 0.6250 0.2500 0.1875 0.125
H 0.2500 0.2500 0.5000 0.1875 0.125
I 0.1875 0.1875 0.1875 0.5000 0.250
J 0.1250 0.1250 0.1250 0.2500 0.500

       F      G      H      I     J
F 0.5625 0.3125 0.1875 0.1250 0.125
G 0.3125 0.5625 0.1875 0.1250 0.125
H 0.1875 0.1875 0.5000 0.1875 0.125
I 0.1250 0.1250 0.1875 0.5000 0.250
J 0.1250 0.1250 0.1250 0.2500 0.500

        F       G      H       I      J
F 0.50000 0.25000 0.1250 0.09375 0.0625
G 0.25000 0.50000 0.1250 0.09375 0.0625
H 0.12500 0.12500 0.5000 0.18750 0.1250
I 0.09375 0.09375 0.1875 0.50000 0.2500
J 0.06250 0.06250 0.1250 0.25000 0.5000


To be more specific, I have coded up a solution for a single cell with the sequence of values (one from each matrix) in a vector. 

I used match() below and it works with a matrix but I do not know how to do what is in the if statements with matrices. Since the number of values and the values will be different among the various cells a simple array structure does not seem appropriate and I am assuming I will need to use a list but I would like to do as much as I can with matrices for speed and clarity.

#' Counts the number of occurrences of each kinship value seen for a pair of
#' individuals.
#'
#' @examples
#' \donttest{
#' set.seed(20210529)
#' kSamples <- sample(c(0, 0.0675, 0.125, 0.25, 0.5, 0.75), 10000, replace = TRUE,
#'                    prob = c(0.005, 0.3, 0.15, 0.075, 0.0375, 0.01875))
#' kVC <- list(kinshipValues = numeric(0),
#'             kinshipCounts = numeric(0))
#' for (kSample in kSamples) {
#'   kVC <- countKinshipValues(kSample, kVC$kinshipValues, kVC$kinshipCounts)
#' }
#' kVC
#' ## $kinshipValues
#' ## [1] 0.2500 0.1250 0.0675 0.7500 0.5000 0.0000
#' ##
#' ## $kinshipCounts
#' ## [1]  301 2592 5096 1322  592   97
#' }
#'
#' @param kValue numeric value being counted (kinship value in
#' \emph{nprcgenekeepr})
#' @param kinshipValues vector of unique values of \code{kValue} seen
#' thus far.
#' @param kinshipCounts vector of the counts of the unique values of
#' \code{kValue} seen thus far.
#' @export
countKinshipValues <- function(kValue, kinshipValues = numeric(0),
                              kinshipCounts = numeric(0)) {
  kinshipValue <- match(kValue, kinshipValues, nomatch = -1L)
  if (kinshipValue == -1L) {
    kinshipValues <- c(kinshipValues, kValue)
    kinshipCounts[length(kinshipCounts) + 1] <- 1
  } else {
    kinshipCounts[kinshipValue] <- kinshipCounts[kinshipValue] + 1
  }
  list(kinshipValues = kinshipValues,
       kinshipCounts = kinshipCounts)
}

Mark


R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun  2 04:44:19 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 1 Jun 2021 19:44:19 -0700
Subject: [R] 
 wanting to count instances of values in each cell of a series
 of simulated symmetric matrices of the same size
In-Reply-To: <325141A8-6318-4174-A063-3D07F6D56CF8@me.com>
References: <325141A8-6318-4174-A063-3D07F6D56CF8@me.com>
Message-ID: <CAGxFJbSSxF42GUfEzKwm=5v9jwHvB-cBEG0e5hqmdu7HpFPJtg@mail.gmail.com>

Come again?! The diagonal values in your example are not all .5.

If space is not an issue, a straightforward approach is to collect all the
matrices into a 3d array and use indexing.
Here is a simple reprex (as you did not provide one in a convenient form,
e.g via dput())

x <- matrix(1:9, nr = 3); y <- x+10
diag(x) <- diag(y) <- 0
print(x) ; print(y)
## Now you need to populate a 3 x 3 x 2 array with these matrices
## How you do this depends on your naming conventions
## You might use a loop, or ls() and assign(),
##  or collect your matrices into a list and use do.call() or ...
## You will *not*want to do this if you have lots of matrices:
list_of_mats <- list(x,y)
arr <- array(do.call(c,list_of_mats), dim = c(3,3,length(list_of_mats)))
arr
arr[2,3,] ## all the values in the [2,3] cell of the matrices; do whatever
you want with them.

Cheers,
Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 1, 2021 at 7:00 PM R. Mark Sharp via R-help <
r-help at r-project.org> wrote:

> I want to capture the entire distribution of values for each cell in a
> sequence of symmetric matrices of the same size. The diagonal values are
> all 0.5 so I need only the values above or below the diagonal.
>
> A small example with three of the structures I am wanting to count follows:
>        F      G      H      I     J
> F 0.6250 0.3750 0.2500 0.1875 0.125
> G 0.3750 0.6250 0.2500 0.1875 0.125
> H 0.2500 0.2500 0.5000 0.1875 0.125
> I 0.1875 0.1875 0.1875 0.5000 0.250
> J 0.1250 0.1250 0.1250 0.2500 0.500
>
>        F      G      H      I     J
> F 0.5625 0.3125 0.1875 0.1250 0.125
> G 0.3125 0.5625 0.1875 0.1250 0.125
> H 0.1875 0.1875 0.5000 0.1875 0.125
> I 0.1250 0.1250 0.1875 0.5000 0.250
> J 0.1250 0.1250 0.1250 0.2500 0.500
>
>         F       G      H       I      J
> F 0.50000 0.25000 0.1250 0.09375 0.0625
> G 0.25000 0.50000 0.1250 0.09375 0.0625
> H 0.12500 0.12500 0.5000 0.18750 0.1250
> I 0.09375 0.09375 0.1875 0.50000 0.2500
> J 0.06250 0.06250 0.1250 0.25000 0.5000
>
>
> To be more specific, I have coded up a solution for a single cell with the
> sequence of values (one from each matrix) in a vector.
>
> I used match() below and it works with a matrix but I do not know how to
> do what is in the if statements with matrices. Since the number of values
> and the values will be different among the various cells a simple array
> structure does not seem appropriate and I am assuming I will need to use a
> list but I would like to do as much as I can with matrices for speed and
> clarity.
>
> #' Counts the number of occurrences of each kinship value seen for a pair
> of
> #' individuals.
> #'
> #' @examples
> #' \donttest{
> #' set.seed(20210529)
> #' kSamples <- sample(c(0, 0.0675, 0.125, 0.25, 0.5, 0.75), 10000, replace
> = TRUE,
> #'                    prob = c(0.005, 0.3, 0.15, 0.075, 0.0375, 0.01875))
> #' kVC <- list(kinshipValues = numeric(0),
> #'             kinshipCounts = numeric(0))
> #' for (kSample in kSamples) {
> #'   kVC <- countKinshipValues(kSample, kVC$kinshipValues,
> kVC$kinshipCounts)
> #' }
> #' kVC
> #' ## $kinshipValues
> #' ## [1] 0.2500 0.1250 0.0675 0.7500 0.5000 0.0000
> #' ##
> #' ## $kinshipCounts
> #' ## [1]  301 2592 5096 1322  592   97
> #' }
> #'
> #' @param kValue numeric value being counted (kinship value in
> #' \emph{nprcgenekeepr})
> #' @param kinshipValues vector of unique values of \code{kValue} seen
> #' thus far.
> #' @param kinshipCounts vector of the counts of the unique values of
> #' \code{kValue} seen thus far.
> #' @export
> countKinshipValues <- function(kValue, kinshipValues = numeric(0),
>                               kinshipCounts = numeric(0)) {
>   kinshipValue <- match(kValue, kinshipValues, nomatch = -1L)
>   if (kinshipValue == -1L) {
>     kinshipValues <- c(kinshipValues, kValue)
>     kinshipCounts[length(kinshipCounts) + 1] <- 1
>   } else {
>     kinshipCounts[kinshipValue] <- kinshipCounts[kinshipValue] + 1
>   }
>   list(kinshipValues = kinshipValues,
>        kinshipCounts = kinshipCounts)
> }
>
> Mark
>
>
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rm@h@rp @end|ng |rom me@com  Wed Jun  2 07:05:54 2021
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Wed, 2 Jun 2021 01:05:54 -0400
Subject: [R] 
 wanting to count instances of values in each cell of a series
 of simulated symmetric matrices of the same size
In-Reply-To: <CAGxFJbSSxF42GUfEzKwm=5v9jwHvB-cBEG0e5hqmdu7HpFPJtg@mail.gmail.com>
References: <325141A8-6318-4174-A063-3D07F6D56CF8@me.com>
 <CAGxFJbSSxF42GUfEzKwm=5v9jwHvB-cBEG0e5hqmdu7HpFPJtg@mail.gmail.com>
Message-ID: <806BE73B-82E0-4594-A67C-E049B216AFA0@me.com>

Bert, 

You are obviously correct about the diagonals. I was not thinking carefully. Typically they are expected to be at or near 0.5 in an outbred population but can theoretically go to 1.0 in completely inbred populations. This was subset from a madeup pedigree and I reused parents, hence the inbreeding.

Space is a concern since I will need to simulate more matrices for the same precision as the matrices (breeding populations) increase in size. However, I will certainly look into your suggestion. I am doing this on the side so it may take a few days.

Thank you for your kind attention. I will provide more definitive feedback later.

Mark
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com











> On Jun 1, 2021, at 10:44 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Come again?! The diagonal values in your example are not all .5.
> 
> If space is not an issue, a straightforward approach is to collect all the matrices into a 3d array and use indexing.
> Here is a simple reprex (as you did not provide one in a convenient form, e.g via dput())
> 
> x <- matrix(1:9, nr = 3); y <- x+10
> diag(x) <- diag(y) <- 0
> print(x) ; print(y)
> ## Now you need to populate a 3 x 3 x 2 array with these matrices
> ## How you do this depends on your naming conventions
> ## You might use a loop, or ls() and assign(),
> ##  or collect your matrices into a list and use do.call() or ...
> ## You will *not*want to do this if you have lots of matrices:
> list_of_mats <- list(x,y) 
> arr <- array(do.call(c,list_of_mats), dim = c(3,3,length(list_of_mats)))
> arr
> arr[2,3,] ## all the values in the [2,3] cell of the matrices; do whatever you want with them.
> 
> Cheers,
> Bert
> 
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Tue, Jun 1, 2021 at 7:00 PM R. Mark Sharp via R-help <r-help at r-project.org <mailto:r-help at r-project.org>> wrote:
> I want to capture the entire distribution of values for each cell in a sequence of symmetric matrices of the same size. The diagonal values are all 0.5 so I need only the values above or below the diagonal. 
> 
> A small example with three of the structures I am wanting to count follows:
>        F      G      H      I     J
> F 0.6250 0.3750 0.2500 0.1875 0.125
> G 0.3750 0.6250 0.2500 0.1875 0.125
> H 0.2500 0.2500 0.5000 0.1875 0.125
> I 0.1875 0.1875 0.1875 0.5000 0.250
> J 0.1250 0.1250 0.1250 0.2500 0.500
> 
>        F      G      H      I     J
> F 0.5625 0.3125 0.1875 0.1250 0.125
> G 0.3125 0.5625 0.1875 0.1250 0.125
> H 0.1875 0.1875 0.5000 0.1875 0.125
> I 0.1250 0.1250 0.1875 0.5000 0.250
> J 0.1250 0.1250 0.1250 0.2500 0.500
> 
>         F       G      H       I      J
> F 0.50000 0.25000 0.1250 0.09375 0.0625
> G 0.25000 0.50000 0.1250 0.09375 0.0625
> H 0.12500 0.12500 0.5000 0.18750 0.1250
> I 0.09375 0.09375 0.1875 0.50000 0.2500
> J 0.06250 0.06250 0.1250 0.25000 0.5000
> 
> 
> To be more specific, I have coded up a solution for a single cell with the sequence of values (one from each matrix) in a vector. 
> 
> I used match() below and it works with a matrix but I do not know how to do what is in the if statements with matrices. Since the number of values and the values will be different among the various cells a simple array structure does not seem appropriate and I am assuming I will need to use a list but I would like to do as much as I can with matrices for speed and clarity.
> 
> #' Counts the number of occurrences of each kinship value seen for a pair of
> #' individuals.
> #'
> #' @examples
> #' \donttest{
> #' set.seed(20210529)
> #' kSamples <- sample(c(0, 0.0675, 0.125, 0.25, 0.5, 0.75), 10000, replace = TRUE,
> #'                    prob = c(0.005, 0.3, 0.15, 0.075, 0.0375, 0.01875))
> #' kVC <- list(kinshipValues = numeric(0),
> #'             kinshipCounts = numeric(0))
> #' for (kSample in kSamples) {
> #'   kVC <- countKinshipValues(kSample, kVC$kinshipValues, kVC$kinshipCounts)
> #' }
> #' kVC
> #' ## $kinshipValues
> #' ## [1] 0.2500 0.1250 0.0675 0.7500 0.5000 0.0000
> #' ##
> #' ## $kinshipCounts
> #' ## [1]  301 2592 5096 1322  592   97
> #' }
> #'
> #' @param kValue numeric value being counted (kinship value in
> #' \emph{nprcgenekeepr})
> #' @param kinshipValues vector of unique values of \code{kValue} seen
> #' thus far.
> #' @param kinshipCounts vector of the counts of the unique values of
> #' \code{kValue} seen thus far.
> #' @export
> countKinshipValues <- function(kValue, kinshipValues = numeric(0),
>                               kinshipCounts = numeric(0)) {
>   kinshipValue <- match(kValue, kinshipValues, nomatch = -1L)
>   if (kinshipValue == -1L) {
>     kinshipValues <- c(kinshipValues, kValue)
>     kinshipCounts[length(kinshipCounts) + 1] <- 1
>   } else {
>     kinshipCounts[kinshipValue] <- kinshipCounts[kinshipValue] + 1
>   }
>   list(kinshipValues = kinshipValues,
>        kinshipCounts = kinshipCounts)
> }
> 
> Mark
> 
> 
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com <mailto:rmsharp at me.com>
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html <http://www.r-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From r-p@ck@ge@ @end|ng |rom r-project@org  Tue Jun  1 23:41:23 2021
From: r-p@ck@ge@ @end|ng |rom r-project@org (Vincent Goulet via R-packages)
Date: Tue, 1 Jun 2021 17:41:23 -0400
Subject: [R] [R-pkgs] Announcing RweaveExtra
Message-ID: <2A51428D-5C81-467A-80A1-640AA37A440A@me.com>

Hi all,

A new package is now available on CRAN: RweaveExtra 1.0-0, which provides "Sweave Drivers with Extra Tricks Up their Sleeve".

Call me an old timer, but I always stuck to Sweave ever since it introduced me to literate programming. I just prefer the simplicity of the system. 

Now, I developed a workflow over the last few of years where one option was missing in the weave and tangle 	steps: the ability to completely ignore a code chunk. Sure, one can use 'eval = FALSE', but this is not equivalent. First, the code in the chunk is parsed. Second, the code is commented out in the tangled file. 

What if I want to write unparsable code (say for didactic purposes) or code in a foreign language altogether, and that I want this code to appear as is in the tangled script? This is where RweaveExtra comes in. Use the 'RweaveExtraLatex' driver with the chunk option 'ignore.on.weave=TRUE' and the code in the chunk will be completely ignored (not even parsed) on the weave step, but it will still be written out verbatim (uncommented) in the tangle step. (For symmetry reasons, an 'ignore.on.tangle' option also exists for the 'RtangleExtra' driver, but I never had use for it.)

See ?RweaveExtraLatex for a complete example.

I have been using the package "privately" for the past year without any issue.

I hope that the new drivers may prove useful to the community.

Vincent Goulet
?cole d'actuariat
Universit? Laval
_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From drj|m|emon @end|ng |rom gm@||@com  Wed Jun  2 10:59:03 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 2 Jun 2021 18:59:03 +1000
Subject: [R] replace NA into - for specific column
In-Reply-To: <1487868184.1349710.1622591918874@mail.yahoo.com>
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
 <1487868184.1349710.1622591918874@mail.yahoo.com>
Message-ID: <CA+8X3fU2mWa-cN86mNGyK_pE8aHt8nphchgwOAd5A8tkqd_Brw@mail.gmail.com>

Hi Kai,
Maybe this will help:

proband_crc2<-data.frame(MMR=rep(c(NA,"+"),3))
proband_crc2
proband_crc2$MMR[is.na(proband_crc2$MMR)]<-"-"
proband_crc2

Jim

On Wed, Jun 2, 2021 at 9:59 AM Kai Yang via R-help <r-help at r-project.org> wrote:
>
> Hi List,
> I have a column MMR in a data frame proband_crc2. The column contents missing value and + (means positive).
> I need to replace all missing value into - (means negative)
> I did try with difference ways.  Below are my testing, but not any one works. Can someone help me?
> Thanks,
> Kai
> proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
> proband_crc2            <- data.frame (ifelse(proband_crc2$MMR !="+", "-", NA))
> proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
> proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
> proband_crc2           <- data.frame( proband_crc2 %>% mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Jun  2 17:17:50 2021
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Wed, 2 Jun 2021 15:17:50 +0000 (UTC)
Subject: [R] replace NA into -  for specific column
In-Reply-To: <1487868184.1349710.1622591918874@mail.yahoo.com>
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
 <1487868184.1349710.1622591918874@mail.yahoo.com>
Message-ID: <1385773038.1496061.1622647070061@mail.yahoo.com>

 Hello Jim,Your example works well.Thank you for your help,Kai
    On Tuesday, June 1, 2021, 04:59:09 PM PDT, Kai Yang via R-help <r-help at r-project.org> wrote:  
 
 Hi List,
I have a column MMR in a data frame proband_crc2. The column contents missing value and + (means positive).?
I need to replace all missing value into - (means negative)
I did try with difference ways.? Below are my testing,?but not any one works. Can someone help me?
Thanks,
Kai
proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
proband_crc2? ? ? ? ? ? <- data.frame (ifelse(proband_crc2$MMR !="+", "-", NA))
proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
proband_crc2? ? ? ? ? ?<- data.frame( proband_crc2 %>% mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Wed Jun  2 19:10:37 2021
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Wed, 2 Jun 2021 13:10:37 -0400
Subject: [R] DBDA2E-utilities.R file download
In-Reply-To: <CAKZQJMBHLww9+G5EJV00Ktz3Ns-RP5nEKXn4vMwrAe7RK3twDA@mail.gmail.com>
References: <CABxY9BOFo55L5unGckONr6swy7hDJUymsqCd-syjATp5Hh-tMQ@mail.gmail.com>
 <CAKZQJMA3TdThL=5+vrivSgqwrASvj2MEn+uYX63=Ow1i8+8MVw@mail.gmail.com>
 <CABxY9BPgeP0cmprdUnsJxqYDU_D-YPJNHKoXNniZ6pcx_7_iyg@mail.gmail.com>
 <CAKZQJMBHLww9+G5EJV00Ktz3Ns-RP5nEKXn4vMwrAe7RK3twDA@mail.gmail.com>
Message-ID: <CAKZQJMDfqdaDaWjjc5S5bCzR2yCA2Gb=7WHOYmMzSVqZ-S4miQ@mail.gmail.com>

"
In some cases there may be one missing package."

That should reae

In some cases there may be more than one missing package.

On Tue, 1 Jun 2021 at 14:19, John Kane <jrkrideau at gmail.com> wrote:
>
> I have added this to the R Help mailing list as it increases your
> chances of getting a helpful response.
>
> That error message <i> can't "lazyload"</i> indicates that you have
> some serious problem(s) upstream.
>
> Probably the best thing to do is copy and paste the entire
> installation output here for people to examine.
>
> However as a quicker approach, scroll through the output and look for
> an earlier message that will say something like:
> There is no package called ?XXXX?.
>
> This will indicate that for some reasan the package XXXX is not being
> installed automatically.
>
> You should try an install.packages("XXXX") and then retry
> remotes::install_github("kyusque/DBDA2E-utilities")
>
> In some cases there may be one missing package.
>
> On Tue, 1 Jun 2021 at 03:19, Nick Wray <nickmwray at gmail.com> wrote:
> >
> > Hi John  Thanks but that doesn't work.  When installing the needed packages R is telling me that it can't "lazyload"  DBDA2E-utilities.  Tbh I don't understand what that means. The page I quoted in my OP implies that one should be able to easily upload the file but there are various error messages which come up which again tbh mean nothing to me.  As far as I am aware this file should simply be some straightforward data to do an exercise in the book...  Nick
> >
> > On Tue, 1 Jun 2021 at 01:26, John Kane <jrkrideau at gmail.com> wrote:
> >>
> >> If it seems to have installed correctly try:
> >> library(DBDA2E)
> >> which should load the DBDA at E-specific programmes.
> >>
> >>
> >>
> >> On Mon, 31 May 2021 at 16:27, Nick Wray <nickmwray at gmail.com> wrote:
> >> >
> >> > Hello I am trying to download the file "kyusque/DBDA2E-utilities.R" which
> >> > is used in following through John Krushke's book on Bayesian stats.
> >> > According to the net (kyusque/DBDA2E-utilities: Packaged One for
> >> > DBDA2E-utilities.R in 'Kruschke, J. K. (2015). Doing Bayesian Data
> >> > Analysis, Second Edition' version 0.1.0 from GitHub (rdrr.io)
> >> > <https://rdrr.io/github/kyusque/DBDA2E-utilities/>) I needed to
> >> >
> >> > install.packages("remotes")
> >> > remotes::install_github("kyusque/DBDA2E-utilities")
> >> >
> >> > which i have done, and seem to have done successfully
> >> >
> >> > but I can't get hold of the utilities file.  Does anyone know what I
> >> > should now do?
> >> >
> >> > Thanks Nick Wray
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >>
> >>
> >>
> >> --
> >> John Kane
> >> Kingston ON Canada
>
>
>
> --
> John Kane
> Kingston ON Canada



-- 
John Kane
Kingston ON Canada


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Jun  2 23:07:48 2021
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Wed, 2 Jun 2021 21:07:48 +0000 (UTC)
Subject: [R] trim NA from concatenate result
References: <1419199396.1587041.1622668068242.ref@mail.yahoo.com>
Message-ID: <1419199396.1587041.1622668068242@mail.yahoo.com>

Hi List,
I use paste function to concatenate? 3 character columns together.
when I run table to see that, I found 3 categories. How can I write script to trim NA in 2nd and 3rd group and set the first one as NA?
Thanks,
Kai
NA NA NA?
NA NA Adenocarcinoma
NA Other NA

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jun  2 23:58:02 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 2 Jun 2021 22:58:02 +0100
Subject: [R] trim NA from concatenate result
In-Reply-To: <1419199396.1587041.1622668068242@mail.yahoo.com>
References: <1419199396.1587041.1622668068242.ref@mail.yahoo.com>
 <1419199396.1587041.1622668068242@mail.yahoo.com>
Message-ID: <1ffa8903-703d-0b8e-ee1d-acab25a93bb0@sapo.pt>

Hello,

Something like this?


df1 <- read.table(text = "
NA NA NA
NA NA Adenocarcinoma
NA Other NA")
df1

apply(df1, 1, function(x){
   if(all(is.na(x))){
     NA_character_
   }else{
     paste(x[!is.na(x)], collapse = "")
   }
})


And please configure your e-mail client not to post in HTML format.

Hope this helps,

Rui Barradas

?s 22:07 de 02/06/21, Kai Yang via R-help escreveu:
> Hi List,
> I use paste function to concatenate? 3 character columns together.
> when I run table to see that, I found 3 categories. How can I write script to trim NA in 2nd and 3rd group and set the first one as NA?
> Thanks,
> Kai
> NA NA NA
> NA NA Adenocarcinoma
> NA Other NA
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From y@ngk@|9999 @end|ng |rom y@hoo@com  Thu Jun  3 01:19:34 2021
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Wed, 2 Jun 2021 23:19:34 +0000 (UTC)
Subject: [R] trim NA from concatenate result
In-Reply-To: <1419199396.1587041.1622668068242@mail.yahoo.com>
References: <1419199396.1587041.1622668068242.ref@mail.yahoo.com>
 <1419199396.1587041.1622668068242@mail.yahoo.com>
Message-ID: <96527851.1620142.1622675974931@mail.yahoo.com>

Hi Rui,
I use the code to fix my problem:
try$newcol <- gsub(" NA", "", try$newcol)

But, I'll try your solution later.
Thank you for your help.
Kai   On Wednesday, June 2, 2021, 02:08:18 PM PDT, Kai Yang via R-help <r-help at r-project.org> wrote:  
 
 Hi List,
I use paste function to concatenate? 3 character columns together.
when I run table to see that, I found 3 categories. How can I write script to trim NA in 2nd and 3rd group and set the first one as NA?
Thanks,
Kai
NA NA NA?
NA NA Adenocarcinoma
NA Other NA

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From |uy@g@rc|@ @end|ng |rom gm@||@com  Wed Jun  2 09:46:32 2021
From: |uy@g@rc|@ @end|ng |rom gm@||@com (=?UTF-8?Q?Luis_Fernando_Garc=C3=ADa?=)
Date: Wed, 2 Jun 2021 04:46:32 -0300
Subject: [R] Question about sjPlot lines and scale
Message-ID: <CANxP2S6GiojcmyXMUWY0OfaYKEOkAfU2eKLiXWuRrCfazSR_og@mail.gmail.com>

Dear all,

I am wanting to improve a plot made with the package sjPlot.

When plotting this model


Plot produced looks like this
https://docs.google.com/presentation/d/1Pqm6BcJXdSQ6U1zmv5FV7gBcn1afHHv7rlQHe6j59_c/edit?usp=sharing,
especially red and green lines.

I just have two concerns with this, the first one is that lines seem a bit
pixelated, and I would like to improve it, I have tried some approaches but
it has not been possible.

Dataset in this link:
https://docs.google.com/spreadsheets/d/1nXerN91Iehe9OM1VGDMS3jnbvvF1tWcuS9bGtlrj_Ss/edit?usp=sharing

library(geepack)
library(ggplot2)
library(sjPlot)
library(ggeffects)
#Copy dataset before following the code
dat <- read.delim("clipboard", dec=","); attach(dat)

dat$Id <- as.integer(factor(dat$Esp))
str(dat)
m5 <- geeglm(
  formula = tim ~ Pa*Pt,
  family = Gamma(link = log),
  data = dat,
  id = Id,
  corstr = "exchangeable"
)

anova(m5,test="chisq")

p=  plot_model(m5, type = "pred", terms = c("Pt[n=100]", "Pa"),
digits=1,line.size=0.5,show.data=T,colors=c("green","#00a0c9","red"))

p

The second one, is I would like to remove the decimal values (i.e. in the x
axis), however I?m not very sure if it is possible to do this in sjPlot or
if you know a similar alternative in ggplot2. I tried this approach but it
did not work.

p=p+ scale_x_discrete(limits=c(1,2,3))
p

When making this plot, there is a space before 1 and after 3 I would like
to erase.

Best

	[[alternative HTML version deleted]]


From kon@t@nt|no@@chr|@todou|ou1 @end|ng |rom gm@||@com  Wed Jun  2 11:25:57 2021
From: kon@t@nt|no@@chr|@todou|ou1 @end|ng |rom gm@||@com (konstantinos christodoulou)
Date: Wed, 2 Jun 2021 12:25:57 +0300
Subject: [R] replace NA into - for specific column
In-Reply-To: <CA+8X3fU2mWa-cN86mNGyK_pE8aHt8nphchgwOAd5A8tkqd_Brw@mail.gmail.com>
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
 <1487868184.1349710.1622591918874@mail.yahoo.com>
 <CA+8X3fU2mWa-cN86mNGyK_pE8aHt8nphchgwOAd5A8tkqd_Brw@mail.gmail.com>
Message-ID: <CANVfANpx=efbPV7=uVxsseogUu6u5idN+qCDkUUMMpcRVkSCvQ@mail.gmail.com>

Hi Kai,

You can also try this:

proband_crc2 %>%
  mutate(MMR = replace(MMR, MMR =="NA", "-"))

Thanks,
Kostas

On Wed, Jun 2, 2021 at 11:59 AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Kai,
> Maybe this will help:
>
> proband_crc2<-data.frame(MMR=rep(c(NA,"+"),3))
> proband_crc2
> proband_crc2$MMR[is.na(proband_crc2$MMR)]<-"-"
> proband_crc2
>
> Jim
>
> On Wed, Jun 2, 2021 at 9:59 AM Kai Yang via R-help <r-help at r-project.org>
> wrote:
> >
> > Hi List,
> > I have a column MMR in a data frame proband_crc2. The column contents
> missing value and + (means positive).
> > I need to replace all missing value into - (means negative)
> > I did try with difference ways.  Below are my testing, but not any one
> works. Can someone help me?
> > Thanks,
> > Kai
> > proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
> > proband_crc2            <- data.frame (ifelse(proband_crc2$MMR !="+",
> "-", NA))
> > proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
> > proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
> > proband_crc2           <- data.frame( proband_crc2 %>%
> mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dj@ndr|j@ @end|ng |rom gm@||@com  Thu Jun  3 14:16:21 2021
From: dj@ndr|j@ @end|ng |rom gm@||@com (Andrija Djurovic)
Date: Thu, 3 Jun 2021 14:16:21 +0200
Subject: [R] [R-pkgs] monobin: Monotonic Binning for Credit Rating Models
Message-ID: <CABcwgRRfT=ArGrzSerAtVptziZatVzsboT4ibpZKk-dHnfYUxA@mail.gmail.com>

Dear R users,

I am happy to announce that my package monobin is now available on CRAN.

The package contains functions that perform monotonic binning of numeric
risk factor in credit rating models (PD, LGD, EAD) development. All
functions handle both binary and continuous target variable. Functions that
use isotonic regression in the first stage of binning process have an
additional feature for correction of minimum percentage of observations and
minimum target rate per bin. Additionally, monotonic trend can be
identified based on raw data or, if known in advance, forced by functions'
argument. Missing values and other possible special values are treated
separately from so-called complete cases.
Close attention should be paid when modeling continuous target due to
possible negative values.

Hope that some of you will find the package useful.

Best regards,
Andrija Djurovic

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From m@icei m@iii@g oii i@iomed@sid@cu  Thu Jun  3 19:00:14 2021
From: m@icei m@iii@g oii i@iomed@sid@cu (m@icei m@iii@g oii i@iomed@sid@cu)
Date: Thu, 3 Jun 2021 19:00:14 +0200
Subject: [R] impute.transcan missing original variables
Message-ID: <000001d75899$ee354cb0$ca9fe610$@infomed.sld.cu>


I?m trying to select only one dataframe, after performing an imputation with aregImpute and impute.transcan. However, I cannot get back a variable that was kept out of the imputation model. Can somebody tell me how to do it? If we illustrate this problem using the following reproducible example, how could I get the dataframe with all the variables that were not imputated, such as Species and id variables?
Best !


Data
data("iris") 
library(missForest)
library(tidyverse)
library(Hmisc)

# example
iris.missing <- iris %>% 
  group_by(Species) %>% 
  prodNA(noNA = 0.1) %>% 
  ungroup() %>% 
  mutate(id=row_number())

imputation_model <- aregImpute(~Sepal.Length+Sepal.Width+Petal.Width,
                               n.impute=3,
                               data=iris.missing,
                               pr=F, 
                               type='pmm')

data_imp <- impute.transcan(imputation_model,
                                  imputation=1,
                                  data=iris.missing,
                                  list.out=TRUE,
                                  pr=FALSE,
                                  check=FALSE)


datos_imp <- bind_rows(data_imp)


--
Este mensaje le ha llegado mediante el servicio de correo electronico que ofrece Infomed para respaldar el cumplimiento de las misiones del Sistema Nacional de Salud. La persona que envia este correo asume el compromiso de usar el servicio a tales fines y cumplir con las regulaciones establecidas

Infomed: http://www.sld.cu/


From nev||@@mo@ @end|ng |rom gm@||@com  Fri Jun  4 07:59:00 2021
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Fri, 4 Jun 2021 15:59:00 +1000
Subject: [R] shinyFiles update shinySaveButton filename varaible from server
Message-ID: <CAN9eD7n3eW28YmktHsi7QPn4Q1A6gF8RwjV0ryirDVbJ7W-Ctg@mail.gmail.com>

Is it possible to update the filename variable  the shinySaveButton from
the server?

I want to provide a default  filename based on a series of choices that the
user has made in the app ( here I have just made a random string to serve
the purpose.  how do I feed output$defaultname
 so that shinySaveButton( filename = outputSdefaultname )?


library(shiny)
library(shinyFiles)

data <- iris
roots <- c("UserFolder"=".")

ui <- fluidPage(
  actionButton("makeName","Make Default File Name"),
  shinySaveButton(id = "save", label = "Save file", title = "Save file as
...", filename = "defaultname",filetype=list(csv="csv"))
)


server <- shinyServer(function(input, output, session) {
  rv <- reactiveValues()
  observeEvent(input$makeName,{
    output$defaultname<-paste(letters[sample(1:10,5)],collapse="")
  })

  observe({


    shinyFileSave(input, "save", roots=roots, session=session)
    fileinfo <- parseSavePath(roots, input$save)
    xx<<-input$save
    if (nrow(fileinfo) > 0) {
      write.csv(, as.character(fileinfo$datapath))

    }
    session$allowReconnect("force")
  })
})

runApp(list(
  ui=ui,
  server=server
))

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jun  4 11:57:26 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 4 Jun 2021 11:57:26 +0200
Subject: [R] foreign package read.spss() and NA levels
In-Reply-To: <LO2P265MB31178ADC394E34613C9212E5E4239@LO2P265MB3117.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB31178ADC394E34613C9212E5E4239@LO2P265MB3117.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <32cc1d69-47d1-5a67-fc87-43f257839848@statistik.tu-dortmund.de>



On 27.05.2021 12:27, Allen, Justin wrote:
> Hi All,
> 
> Wanted to report what may be a bug or possibly an oversight, but I am unsure, in the "foreign" packages in the read.spss() command, https://cran.r-project.org/web/packages/foreign/index.html. When running the following code,
> 
> input <- read.spss("[.sav file location]", to.data.frame = TRUE)
> str(input)
> 
> The read.spss() seems to be applying addNA() to factors so NA is being set as a level, and there seems to be no way to get read.spss() to bring factors in without doing this. This seems to be a recent change as read.spss() was not doing this as of a few months ago. None of the arguments in read.spss() seem to also stop this behaviour. I am currently on the most recent version of both R and the package, as of 27/05/21, and am using RStudio Version 1.4.1106.

Within R (I do not use RStudio) and even with the most recent R-devel, I see

(sav <- system.file("files", "electric.sav", package = "foreign"))
dat <- read.spss(file=sav, to.data.frame=TRUE)
table(dat$DAYOFWK)

#  SUNDAY   MONDAY  TUESDAY WEDNSDAY THURSDAY   FRIDAY SATURDAY
#      19       11       19       17       15       13       16

table(dat$DAYOFWK, useNA="always")

#  SUNDAY   MONDAY  TUESDAY WEDNSDAY THURSDAY   FRIDAY SATURDAY     <NA>
#      19       11       19       17       15       13       16      130

So exactly what you expected?

If you rather use

dat <- read.spss(file=sav, to.data.frame=TRUE, use.missings=FALSE)

table(dat$DAYOFWK, useNA="always")

you see the NA values are converted to a factor level called "MISSING".

If it is different on your end, pelase try in plain R, tell us the 
version of R / foreign and show an example data file where this happens.

Best,
Uwe Ligges



> 
> Any thoughts?
> 
> Many Thanks,
> 
> Justin Allen
> 
> p.s. your continued maintenance and additions to R and its packages have been infinitely useful in my work and life and thank for that.
> 
> Justin Allen
> Housing Consultant, BRE<https://bregroup.com/>
> T: 07807122647
> 
> ________________________________
> Follow BRE on Twitter: @BRE_Group<http://twitter.com/BRE_Group>
> ________________________________
> Privileged and confidential information and/or copyright material may be contained in this e-mail. If you are not the intended addressee you may not copy or deliver it to anyone else or use it in any unauthorised manner. To do so is prohibited and may be unlawful. If you have received this e-mail by mistake, please advise the sender immediately by return e-mail and destroy all copies. Thank you.
> 
> Building Research Establishment Ltd, Registered under number 3319324 in England and Wales. VAT Registration No GB 689 9499 27 www.bregroup.com<http://www.bregroup.com>
> BRE Global Limited, Registered under number 8961297 in England and Wales. www.breglobal.com<http://www.breglobal.com>
> Building Research Establishment and BRE Global are subsidiaries of the BRE Trust.
> BRE Trust is a company limited by guarantee, Registered under number 3282856 in England and Wales, and registered as a charity in England (no. 1092193) and in Scotland (no. SC039320). www.bretrust.org.uk<http://www.bretrust.org.uk>
> Registered Offices: Bucknalls Lane, Garston, Watford, Hertfordshire WD25 9XX - Travelling to BRE: see www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/>
> ________________________________
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun  4 16:20:27 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 4 Jun 2021 07:20:27 -0700
Subject: [R] 
 shinyFiles update shinySaveButton filename varaible from server
In-Reply-To: <CAN9eD7n3eW28YmktHsi7QPn4Q1A6gF8RwjV0ryirDVbJ7W-Ctg@mail.gmail.com>
References: <CAN9eD7n3eW28YmktHsi7QPn4Q1A6gF8RwjV0ryirDVbJ7W-Ctg@mail.gmail.com>
Message-ID: <CAGxFJbTdQsi-mAKZQaLdMOWbRHXAK+w-nvydOY-CZtSTpX9vWQ@mail.gmail.com>

Note, per the Posting Guide (linked below),

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.

If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

So do not be surprised if you do not get a response here.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jun 3, 2021 at 11:00 PM nevil amos <nevil.amos at gmail.com> wrote:

> Is it possible to update the filename variable  the shinySaveButton from
> the server?
>
> I want to provide a default  filename based on a series of choices that the
> user has made in the app ( here I have just made a random string to serve
> the purpose.  how do I feed output$defaultname
>  so that shinySaveButton( filename = outputSdefaultname )?
>
>
> library(shiny)
> library(shinyFiles)
>
> data <- iris
> roots <- c("UserFolder"=".")
>
> ui <- fluidPage(
>   actionButton("makeName","Make Default File Name"),
>   shinySaveButton(id = "save", label = "Save file", title = "Save file as
> ...", filename = "defaultname",filetype=list(csv="csv"))
> )
>
>
> server <- shinyServer(function(input, output, session) {
>   rv <- reactiveValues()
>   observeEvent(input$makeName,{
>     output$defaultname<-paste(letters[sample(1:10,5)],collapse="")
>   })
>
>   observe({
>
>
>     shinyFileSave(input, "save", roots=roots, session=session)
>     fileinfo <- parseSavePath(roots, input$save)
>     xx<<-input$save
>     if (nrow(fileinfo) > 0) {
>       write.csv(, as.character(fileinfo$datapath))
>
>     }
>     session$allowReconnect("force")
>   })
> })
>
> runApp(list(
>   ui=ui,
>   server=server
> ))
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@d|@on3be|| @end|ng |rom gm@||@com  Fri Jun  4 16:03:40 2021
From: m@d|@on3be|| @end|ng |rom gm@||@com (Madison Bell)
Date: Fri, 4 Jun 2021 10:03:40 -0400
Subject: [R] Can I use group_map to iteratively process a dataframe?
Message-ID: <CABjGm04X-Rjp9dO-5cmfOKDuqzPgH9TXWnhV3DHKe+YBauSVgQ@mail.gmail.com>

I want to iteratively process a master list of comparisons using
group_walk() as an alternative method to import batches of .csv files.
I have the code for iteratively importing batch csvs here:

#Import list of csv files from directory, formatted as:

|rownm | neg | pos |
|------|-----|-----|
|neg   |19   |18   |
|pos   |5    |141  |

```
library(tidyverse) # for cleaning and shaping data
library(epiR)
library(irrCAC)

all_epi_files <- list.files("congtables", pattern = "*.csv",
                               full.names = TRUE)

#Make export directory
check_create_dir <- function(the_dir) {
  if (!dir.exists(the_dir)) {
    dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
doesn't already exist
}

the_dir_ex <- "data_generated/epidata" #Name the new desired directory

check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist

#Make function for the series of analyses
epi_analysis <- function(a_csv, the_dir){
  #Import data as inserted variables
  dat2 <- read_csv(a_csv)%>%
    remove_rownames %>%
    column_to_rownames(var="rownm") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(a_csv)),
            na = "999.99",
            row.names = FALSE)

}


#Execute functions
lapply(all_epi_files,
       FUN = epi_analysis,
       the_dir = the_dir_ex)
```

But instead I would like to input a dataset that looks like this:

|Test Assay | Var1 | Var2 |Freq|
|-----------|------|------|----|
|Assay1     |neg   |neg   |19  |
|Assay1     |neg   |pos   |5   |
|Assay1     |pos   |neg   |8   |
|Assay1     |pos   |pos   |141 |
|Assay2     |neg   |neg   |25  |
|Assay2     |neg   |pos   |6   |
|Assay2     |pos   |neg   |17  |
|Assay2     |pos   |pos   |33  |
|Assay3     |neg   |neg   |99  |
|Assay3     |neg   |pos   |20  |
|Assay3     |pos   |neg   |5   |
|Assay3     |pos   |pos   |105 |

I want to use the same function epi_analysis and export a csv for each
Test Assay (in this example Assay1, Assay2, and Assay3). So far I
have:

```
#Make export directory
check_create_dir <- function(the_dir) {
  if (!dir.exists(the_dir)) {
    dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
doesn't already exist
}

the_dir_ex <- "data_generated/epidata" #Name the new desired directory

check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist

#Make function for the series of analyses
epi_analysis <- function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}

data <- read_csv("data_raw/EpiTest.csv") %>%
  group_by(TestAssay)%>%
  group_map(~ epi_analysis)
```

But the only output I see is:
```
[[1]]
function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}

[[2]]
function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}

[[3]]
function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}

[[4]]
function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}
```

and there are no csvs in my epidata folder. Any
suggestions/corrections welcomed. I haven't used group_map() before,
but I am keen to use it.


From thom@@@tb@bu|k@ @end|ng |rom gm@||@com  Fri Jun  4 20:20:07 2021
From: thom@@@tb@bu|k@ @end|ng |rom gm@||@com (Thomas Bulka)
Date: Fri, 4 Jun 2021 20:20:07 +0200
Subject: [R] Conversion of String to Datetime: How to Keep Timezone Offset
 when Printing?
Message-ID: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>

Hello list,

I do have a hard time handling date and time data with different
timezone offsets. Say, I have two strings which represent different
dates/times, like so:

DT1 <- "2021-06-19T13:45:00-03:00"
DT2 <- "2020-07-20T11:39:12+02:00"
my_dates <- c(DT1, DT2)

What I want to do now, is to covert those strings into some kind of
datetime object which allows for comparisons (earlier/later etc.).

Using as_datetime from the lubridate package seems to do the trick,
but it converts DT1 and DT2 with reference to UTC. I guess, this makes
sense from a computational point of view, since, most likely, this is
how R internally handles dates and times.

However, I would like to be able to at least visually distinguish the
different timezone offsets, if the data is printed. I'm able to
manually set a timezone with the tz parameter of as_datetime:

as_datetime(DT1, tz = "EDT")
[1] "2020-07-20 09:39:12 EDT"

But this only works if I enter the timezone manually.

So what I want to ask is this: Is there any possibility, to convert
all entries of a vector my_dates (see above) into datetime objects
while keeping a visual indication of each timezone offset when the
data is printed?

Please excuse any awkward phrasing; being pretty new to R, I probably
did not phrase anything correctly.

Thank you very much in advance!

Thomas


From |e@ve@o|nyc @end|ng |rom gm@||@com  Wed Jun  2 20:17:50 2021
From: |e@ve@o|nyc @end|ng |rom gm@||@com (nelpar)
Date: Wed, 2 Jun 2021 13:17:50 -0500 (CDT)
Subject: [R] Beginner problem - using mod function to print odd numbers
Message-ID: <1622657870092-0.post-5018@n4.nabble.com>


I don't understand. -- 

7%%2=1
9%%2=1
11%%2=1

What aren't these numbers printing ? 


num<-0
for (i in 1:100){
  num<-num+i
if (num%%2 != 0) 
  print(num)
}


[1] 1
[1] 3
[1] 15
[1] 21
[1] 45
[1] 55
[1] 91
[1] 105
[1] 153
[1] 171
[1] 231
[1] 253
[1] 325
[1] 351
[1] 435
[1] 465
[1] 561
[1] 595
[1] 703
[1] 741
[1] 861
[1] 903
[1] 1035
[1] 1081
[1] 1225
[1] 1275
[1] 1431
[1] 1485
[1] 1653
[1] 1711
[1] 1891
[1] 1953
[1] 2145
[1] 2211
[1] 2415
[1] 2485
[1] 2701
[1] 2775
[1] 3003
[1] 3081
[1] 3321
[1] 3403
[1] 3655
[1] 3741
[1] 4005
[1] 4095
[1] 4371
[1] 4465
[1] 4753
[1] 4851



--
Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html


From h@@@n@d|w@n @end|ng |rom gm@||@com  Sat Jun  5 08:19:30 2021
From: h@@@n@d|w@n @end|ng |rom gm@||@com (Hasan Diwan)
Date: Fri, 4 Jun 2021 23:19:30 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <1622657870092-0.post-5018@n4.nabble.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
Message-ID: <CAP+bYWAxDRu3OKkhauvCHPH8dMX5PpWfc9RR5F+40fyeTFap-A@mail.gmail.com>

unlist(sapply(seq(1,100), function(n) { if(n %% 2) n })) yields:

 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
47 49
[26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95
97 99

As for why your solution isn't working, if you'd like me to take a closer
look and figure out exactly what you're doing wrong, let me know? -- H

On Fri, 4 Jun 2021 at 23:09, nelpar <leavesofnyc at gmail.com> wrote:

>
> I don't understand. --
>
> 7%%2=1
> 9%%2=1
> 11%%2=1
>
> What aren't these numbers printing ?
>
>
> num<-0
> for (i in 1:100){
>   num<-num+i
> if (num%%2 != 0)
>   print(num)
> }
>
>
> [1] 1
> [1] 3
> [1] 15
> [1] 21
> [1] 45
> [1] 55
> [1] 91
> [1] 105
> [1] 153
> [1] 171
> [1] 231
> [1] 253
> [1] 325
> [1] 351
> [1] 435
> [1] 465
> [1] 561
> [1] 595
> [1] 703
> [1] 741
> [1] 861
> [1] 903
> [1] 1035
> [1] 1081
> [1] 1225
> [1] 1275
> [1] 1431
> [1] 1485
> [1] 1653
> [1] 1711
> [1] 1891
> [1] 1953
> [1] 2145
> [1] 2211
> [1] 2415
> [1] 2485
> [1] 2701
> [1] 2775
> [1] 3003
> [1] 3081
> [1] 3321
> [1] 3403
> [1] 3655
> [1] 3741
> [1] 4005
> [1] 4095
> [1] 4371
> [1] 4465
> [1] 4753
> [1] 4851
>
>
>
> --
> Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
OpenPGP: https://hasan.d8u.us/openpgp.asc
If you wish to request my time, please do so using
*bit.ly/hd1AppointmentRequest
<http://bit.ly/hd1AppointmentRequest>*.
Si vous voudrais faire connnaisance, allez a *bit.ly/hd1AppointmentRequest
<http://bit.ly/hd1AppointmentRequest>*.

<https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1>Sent
from my mobile device
Envoye de mon portable

	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Sat Jun  5 08:37:14 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Sat, 05 Jun 2021 09:37:14 +0300
Subject: [R] Can I use group_map to iteratively process a dataframe?
In-Reply-To: Your message of "Fri, 04 Jun 2021 10:03:40 -0400."
 <CABjGm04X-Rjp9dO-5cmfOKDuqzPgH9TXWnhV3DHKe+YBauSVgQ@mail.gmail.com>
Message-ID: <292254.1622875034@apollo2.minshall.org>

Madison,

by the way, it's sort of hard to follow your example.  there's some
concept of MWE ==? Minimum Working Example.  duckduckgo, or others on
the list, can probably point the way.

and, by the way :), i'm no expert.  in particular, not on magrittr
pipes, or on group_*, though i use both in some of my code.

> data <- read_csv("data_raw/EpiTest.csv") %>%
>   group_by(TestAssay)%>%
>   group_map(~ epi_analysis)

sans-pipe, i would have had

: group_map(df, epi_analysis, the_dir)

or some such.  in magrittr pipes, maybe that would be

: ... %>% group_map, epi_analysis, the_dir)

or some such?

hth.

cheers, Greg


From er|cjberger @end|ng |rom gm@||@com  Sat Jun  5 08:40:33 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sat, 5 Jun 2021 09:40:33 +0300
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAP+bYWAxDRu3OKkhauvCHPH8dMX5PpWfc9RR5F+40fyeTFap-A@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <CAP+bYWAxDRu3OKkhauvCHPH8dMX5PpWfc9RR5F+40fyeTFap-A@mail.gmail.com>
Message-ID: <CAGgJW75Hv6YDk1j+QiSR0jdwfPitfks44pRQHWevqvPM7x+7Zg@mail.gmail.com>

Typo
num <- num + i
should be
num <- num + 1


On Sat, Jun 5, 2021 at 9:38 AM Hasan Diwan <hasan.diwan at gmail.com> wrote:

> unlist(sapply(seq(1,100), function(n) { if(n %% 2) n })) yields:
>
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
> 47 49
> [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95
> 97 99
>
> As for why your solution isn't working, if you'd like me to take a closer
> look and figure out exactly what you're doing wrong, let me know? -- H
>
> On Fri, 4 Jun 2021 at 23:09, nelpar <leavesofnyc at gmail.com> wrote:
>
> >
> > I don't understand. --
> >
> > 7%%2=1
> > 9%%2=1
> > 11%%2=1
> >
> > What aren't these numbers printing ?
> >
> >
> > num<-0
> > for (i in 1:100){
> >   num<-num+i
> > if (num%%2 != 0)
> >   print(num)
> > }
> >
> >
> > [1] 1
> > [1] 3
> > [1] 15
> > [1] 21
> > [1] 45
> > [1] 55
> > [1] 91
> > [1] 105
> > [1] 153
> > [1] 171
> > [1] 231
> > [1] 253
> > [1] 325
> > [1] 351
> > [1] 435
> > [1] 465
> > [1] 561
> > [1] 595
> > [1] 703
> > [1] 741
> > [1] 861
> > [1] 903
> > [1] 1035
> > [1] 1081
> > [1] 1225
> > [1] 1275
> > [1] 1431
> > [1] 1485
> > [1] 1653
> > [1] 1711
> > [1] 1891
> > [1] 1953
> > [1] 2145
> > [1] 2211
> > [1] 2415
> > [1] 2485
> > [1] 2701
> > [1] 2775
> > [1] 3003
> > [1] 3081
> > [1] 3321
> > [1] 3403
> > [1] 3655
> > [1] 3741
> > [1] 4005
> > [1] 4095
> > [1] 4371
> > [1] 4465
> > [1] 4753
> > [1] 4851
> >
> >
> >
> > --
> > Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
> --
> OpenPGP: https://hasan.d8u.us/openpgp.asc
> If you wish to request my time, please do so using
> *bit.ly/hd1AppointmentRequest
> <http://bit.ly/hd1AppointmentRequest>*.
> Si vous voudrais faire connnaisance, allez a *bit.ly/hd1AppointmentRequest
> <http://bit.ly/hd1AppointmentRequest>*.
>
> <https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1
> >Sent
> from my mobile device
> Envoye de mon portable
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jun  5 09:44:47 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 05 Jun 2021 00:44:47 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <1622657870092-0.post-5018@n4.nabble.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
Message-ID: <85041208-9B33-45D7-AF83-BD4CACBFC62D@dcn.davis.ca.us>

What if you used

num <- num + 1

?

On June 2, 2021 11:17:50 AM PDT, nelpar <leavesofnyc at gmail.com> wrote:
>
>I don't understand. -- 
>
>7%%2=1
>9%%2=1
>11%%2=1
>
>What aren't these numbers printing ? 
>
>
>num<-0
>for (i in 1:100){
>  num<-num+i
>if (num%%2 != 0) 
>  print(num)
>}
>
>
>[1] 1
>[1] 3
>[1] 15
>[1] 21
>[1] 45
>[1] 55
>[1] 91
>[1] 105
>[1] 153
>[1] 171
>[1] 231
>[1] 253
>[1] 325
>[1] 351
>[1] 435
>[1] 465
>[1] 561
>[1] 595
>[1] 703
>[1] 741
>[1] 861
>[1] 903
>[1] 1035
>[1] 1081
>[1] 1225
>[1] 1275
>[1] 1431
>[1] 1485
>[1] 1653
>[1] 1711
>[1] 1891
>[1] 1953
>[1] 2145
>[1] 2211
>[1] 2415
>[1] 2485
>[1] 2701
>[1] 2775
>[1] 3003
>[1] 3081
>[1] 3321
>[1] 3403
>[1] 3655
>[1] 3741
>[1] 4005
>[1] 4095
>[1] 4371
>[1] 4465
>[1] 4753
>[1] 4851
>
>
>
>--
>Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @te|@nML @end|ng |rom co||oc@t|on@@de  Sat Jun  5 09:51:20 2021
From: @te|@nML @end|ng |rom co||oc@t|on@@de (Stefan Evert)
Date: Sat, 5 Jun 2021 09:51:20 +0200
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <1622657870092-0.post-5018@n4.nabble.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
Message-ID: <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>

> 
> I don't understand. -- 
> 
> 7%%2=1
> 9%%2=1
> 11%%2=1
> 
> What aren't these numbers printing ? 
> 
> num<-0
> for (i in 1:100){
>  num<-num+i
> if (num%%2 != 0) 
>  print(num)
> }

Your code tests the numbers

	1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?

and correctly prints the odd ones among them.

But I suppose that's not what you wanted to do?


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jun  5 10:18:13 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 05 Jun 2021 01:18:13 -0700
Subject: [R] 
 Conversion of String to Datetime: How to Keep Timezone Offset
 when Printing?
In-Reply-To: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
References: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
Message-ID: <A8D86DE8-B9C8-466A-82D7-17BC1639C6C9@dcn.davis.ca.us>

No. Sorry. A POSIXct vector can have only one timezone. Kind of goes along with the whole vectorization thing.

You could fake it with lists, but they are dramatically less convenient. I suppose you could also fake it by developing your own variation on the POSIXct class... but that would be rather slower than the standard version.

On June 4, 2021 11:20:07 AM PDT, Thomas Bulka <thomas.tb.bulka at gmail.com> wrote:
>Hello list,
>
>I do have a hard time handling date and time data with different
>timezone offsets. Say, I have two strings which represent different
>dates/times, like so:
>
>DT1 <- "2021-06-19T13:45:00-03:00"
>DT2 <- "2020-07-20T11:39:12+02:00"
>my_dates <- c(DT1, DT2)
>
>What I want to do now, is to covert those strings into some kind of
>datetime object which allows for comparisons (earlier/later etc.).
>
>Using as_datetime from the lubridate package seems to do the trick,
>but it converts DT1 and DT2 with reference to UTC. I guess, this makes
>sense from a computational point of view, since, most likely, this is
>how R internally handles dates and times.
>
>However, I would like to be able to at least visually distinguish the
>different timezone offsets, if the data is printed. I'm able to
>manually set a timezone with the tz parameter of as_datetime:
>
>as_datetime(DT1, tz = "EDT")
>[1] "2020-07-20 09:39:12 EDT"
>
>But this only works if I enter the timezone manually.
>
>So what I want to ask is this: Is there any possibility, to convert
>all entries of a vector my_dates (see above) into datetime objects
>while keeping a visual indication of each timezone offset when the
>data is printed?
>
>Please excuse any awkward phrasing; being pretty new to R, I probably
>did not phrase anything correctly.
>
>Thank you very much in advance!
>
>Thomas
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From t@v|b@r @end|ng |rom gm@||@com  Sat Jun  5 11:47:21 2021
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Sat, 5 Jun 2021 12:47:21 +0300
Subject: [R] 
 Conversion of String to Datetime: How to Keep Timezone Offset
 when Printing?
In-Reply-To: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
References: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
Message-ID: <6caadcac-4c7f-101c-6cca-2c62aacd08a7@gmail.com>


On 6/4/21 9:20 PM, Thomas Bulka wrote:
> Hello list,
>
> I do have a hard time handling date and time data with different
> timezone offsets. Say, I have two strings which represent different
> dates/times, like so:
>
> DT1 <- "2021-06-19T13:45:00-03:00"
> DT2 <- "2020-07-20T11:39:12+02:00"
> my_dates <- c(DT1, DT2)
>
> What I want to do now, is to covert those strings into some kind of
> datetime object which allows for comparisons (earlier/later etc.).
>
> Using as_datetime from the lubridate package seems to do the trick,
> but it converts DT1 and DT2 with reference to UTC. I guess, this makes
> sense from a computational point of view, since, most likely, this is
> how R internally handles dates and times.
>
> However, I would like to be able to at least visually distinguish the
> different timezone offsets, if the data is printed. I'm able to
> manually set a timezone with the tz parameter of as_datetime:


It's not clear what you're asking. The time strings already have the 
timezone offset specified. If you get rid of the "T" character in the 
strings, then you can use regular datetime formatting specifiers to 
convert to R datetime objects, i.e.


my_dates = c("2021-06-19T13:45:00-03:00", "2020-07-20T11:39:12+02:00", 
strftime(Sys.time(),"%Y-%m-%dT%H:%M:%S%z"))
my_dates
[1] "2021-06-19T13:45:00-03:00" "2020-07-20T11:39:12+02:00"
[3] "2021-06-05T12:33:11+0300"
my_dates2 = gsub(pattern="T", replacement=" ", x=my_dates)
my_dates2
[1] "2021-06-19 13:45:00-03:00" "2020-07-20 11:39:12+02:00"
[3] "2021-06-05 12:33:11+0300"


# Now convert to datetime objects, including TZ offset:

my_datetimes = as.POSIXct(my_dates2, "%Y-%m-%d %H:%M:%S%z")


# And these datetimes you can visualize any way you want:

strftime(my_datetimes, format="%d/%b/%Y %H:%M %Z", tz="EST")
[1] "19/Jun/2021 08:45 EST" "20/Jul/2020 06:39 EST" "05/Jun/2021 07:33 EST"


Not sure if that helps at all...


>
> as_datetime(DT1, tz = "EDT")
> [1] "2020-07-20 09:39:12 EDT"
>
> But this only works if I enter the timezone manually.
>
> So what I want to ask is this: Is there any possibility, to convert
> all entries of a vector my_dates (see above) into datetime objects
> while keeping a visual indication of each timezone offset when the
> data is printed?
>
> Please excuse any awkward phrasing; being pretty new to R, I probably
> did not phrase anything correctly.
>
> Thank you very much in advance!
>
> Thomas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jun  5 14:54:10 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 5 Jun 2021 13:54:10 +0100
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <1622657870092-0.post-5018@n4.nabble.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
Message-ID: <ac80b824-e6b2-a5db-57f3-45bd989fc3fa@sapo.pt>

Hello,

Why not write a function?


odd <- function(x, numeric = TRUE){
   i <- x %% 2 == 1
   if(numeric) x[i] else i
}

odd(1:100)


Hope this helps,

Rui Barradas

?s 19:17 de 02/06/21, nelpar escreveu:
> 
> I don't understand. --
> 
> 7%%2=1
> 9%%2=1
> 11%%2=1
> 
> What aren't these numbers printing ?
> 
> 
> num<-0
> for (i in 1:100){
>    num<-num+i
> if (num%%2 != 0)
>    print(num)
> }
> 
> 
> [1] 1
> [1] 3
> [1] 15
> [1] 21
> [1] 45
> [1] 55
> [1] 91
> [1] 105
> [1] 153
> [1] 171
> [1] 231
> [1] 253
> [1] 325
> [1] 351
> [1] 435
> [1] 465
> [1] 561
> [1] 595
> [1] 703
> [1] 741
> [1] 861
> [1] 903
> [1] 1035
> [1] 1081
> [1] 1225
> [1] 1275
> [1] 1431
> [1] 1485
> [1] 1653
> [1] 1711
> [1] 1891
> [1] 1953
> [1] 2145
> [1] 2211
> [1] 2415
> [1] 2485
> [1] 2701
> [1] 2775
> [1] 3003
> [1] 3081
> [1] 3321
> [1] 3403
> [1] 3655
> [1] 3741
> [1] 4005
> [1] 4095
> [1] 4371
> [1] 4465
> [1] 4753
> [1] 4851
> 
> 
> 
> --
> Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jun  5 15:07:40 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 5 Jun 2021 14:07:40 +0100
Subject: [R] Can I use group_map to iteratively process a dataframe?
In-Reply-To: <CABjGm04X-Rjp9dO-5cmfOKDuqzPgH9TXWnhV3DHKe+YBauSVgQ@mail.gmail.com>
References: <CABjGm04X-Rjp9dO-5cmfOKDuqzPgH9TXWnhV3DHKe+YBauSVgQ@mail.gmail.com>
Message-ID: <3895af86-d8cf-a3aa-7e4a-1785e1cb65c4@sapo.pt>

Hello,

This is cross-posted from StackOverflow [1]. Cross posting is not well 
seen on R-help and the SO post is better explained (at least the data 
seem to be more complete). You should have waited for an answer there.


Hope this helps,

Rui Barradas

?s 15:03 de 04/06/21, Madison Bell escreveu:
> I want to iteratively process a master list of comparisons using
> group_walk() as an alternative method to import batches of .csv files.
> I have the code for iteratively importing batch csvs here:
> 
> #Import list of csv files from directory, formatted as:
> 
> |rownm | neg | pos |
> |------|-----|-----|
> |neg   |19   |18   |
> |pos   |5    |141  |
> 
> ```
> library(tidyverse) # for cleaning and shaping data
> library(epiR)
> library(irrCAC)
> 
> all_epi_files <- list.files("congtables", pattern = "*.csv",
>                                 full.names = TRUE)
> 
> #Make export directory
> check_create_dir <- function(the_dir) {
>    if (!dir.exists(the_dir)) {
>      dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
> doesn't already exist
> }
> 
> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
> 
> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
> 
> #Make function for the series of analyses
> epi_analysis <- function(a_csv, the_dir){
>    #Import data as inserted variables
>    dat2 <- read_csv(a_csv)%>%
>      remove_rownames %>%
>      column_to_rownames(var="rownm") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(a_csv)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> 
> #Execute functions
> lapply(all_epi_files,
>         FUN = epi_analysis,
>         the_dir = the_dir_ex)
> ```
> 
> But instead I would like to input a dataset that looks like this:
> 
> |Test Assay | Var1 | Var2 |Freq|
> |-----------|------|------|----|
> |Assay1     |neg   |neg   |19  |
> |Assay1     |neg   |pos   |5   |
> |Assay1     |pos   |neg   |8   |
> |Assay1     |pos   |pos   |141 |
> |Assay2     |neg   |neg   |25  |
> |Assay2     |neg   |pos   |6   |
> |Assay2     |pos   |neg   |17  |
> |Assay2     |pos   |pos   |33  |
> |Assay3     |neg   |neg   |99  |
> |Assay3     |neg   |pos   |20  |
> |Assay3     |pos   |neg   |5   |
> |Assay3     |pos   |pos   |105 |
> 
> I want to use the same function epi_analysis and export a csv for each
> Test Assay (in this example Assay1, Assay2, and Assay3). So far I
> have:
> 
> ```
> #Make export directory
> check_create_dir <- function(the_dir) {
>    if (!dir.exists(the_dir)) {
>      dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
> doesn't already exist
> }
> 
> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
> 
> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
> 
> #Make function for the series of analyses
> epi_analysis <- function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> data <- read_csv("data_raw/EpiTest.csv") %>%
>    group_by(TestAssay)%>%
>    group_map(~ epi_analysis)
> ```
> 
> But the only output I see is:
> ```
> [[1]]
> function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> [[2]]
> function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> [[3]]
> function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> [[4]]
> function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> ```
> 
> and there are no csvs in my epidata folder. Any
> suggestions/corrections welcomed. I haven't used group_map() before,
> but I am keen to use it.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@d|@on3be|| @end|ng |rom gm@||@com  Sat Jun  5 15:26:55 2021
From: m@d|@on3be|| @end|ng |rom gm@||@com (Madison Bell)
Date: Sat, 5 Jun 2021 09:26:55 -0400
Subject: [R] Can I use group_map to iteratively process a dataframe?
In-Reply-To: <3895af86-d8cf-a3aa-7e4a-1785e1cb65c4@sapo.pt>
References: <3895af86-d8cf-a3aa-7e4a-1785e1cb65c4@sapo.pt>
Message-ID: <E32DBF4A-CBB5-4A45-A86E-DC2D733F0349@gmail.com>

This question had been posted on SO for a week with no response. I reached out to rhelp two days ago. I deleted the original question on SO and reposted an abbreviated version this morning. 

Sorry for the cross posting, but I am urgently trying to get some ideas on how approach this problem. 

Sent from my iPhone

> On Jun 5, 2021, at 09:07, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
> ?Hello,
> 
> This is cross-posted from StackOverflow [1]. Cross posting is not well seen on R-help and the SO post is better explained (at least the data seem to be more complete). You should have waited for an answer there.
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 15:03 de 04/06/21, Madison Bell escreveu:
>> I want to iteratively process a master list of comparisons using
>> group_walk() as an alternative method to import batches of .csv files.
>> I have the code for iteratively importing batch csvs here:
>> #Import list of csv files from directory, formatted as:
>> |rownm | neg | pos |
>> |------|-----|-----|
>> |neg   |19   |18   |
>> |pos   |5    |141  |
>> ```
>> library(tidyverse) # for cleaning and shaping data
>> library(epiR)
>> library(irrCAC)
>> all_epi_files <- list.files("congtables", pattern = "*.csv",
>>                                full.names = TRUE)
>> #Make export directory
>> check_create_dir <- function(the_dir) {
>>   if (!dir.exists(the_dir)) {
>>     dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
>> doesn't already exist
>> }
>> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
>> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
>> #Make function for the series of analyses
>> epi_analysis <- function(a_csv, the_dir){
>>   #Import data as inserted variables
>>   dat2 <- read_csv(a_csv)%>%
>>     remove_rownames %>%
>>     column_to_rownames(var="rownm") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(a_csv)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> #Execute functions
>> lapply(all_epi_files,
>>        FUN = epi_analysis,
>>        the_dir = the_dir_ex)
>> ```
>> But instead I would like to input a dataset that looks like this:
>> |Test Assay | Var1 | Var2 |Freq|
>> |-----------|------|------|----|
>> |Assay1     |neg   |neg   |19  |
>> |Assay1     |neg   |pos   |5   |
>> |Assay1     |pos   |neg   |8   |
>> |Assay1     |pos   |pos   |141 |
>> |Assay2     |neg   |neg   |25  |
>> |Assay2     |neg   |pos   |6   |
>> |Assay2     |pos   |neg   |17  |
>> |Assay2     |pos   |pos   |33  |
>> |Assay3     |neg   |neg   |99  |
>> |Assay3     |neg   |pos   |20  |
>> |Assay3     |pos   |neg   |5   |
>> |Assay3     |pos   |pos   |105 |
>> I want to use the same function epi_analysis and export a csv for each
>> Test Assay (in this example Assay1, Assay2, and Assay3). So far I
>> have:
>> ```
>> #Make export directory
>> check_create_dir <- function(the_dir) {
>>   if (!dir.exists(the_dir)) {
>>     dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
>> doesn't already exist
>> }
>> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
>> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
>> #Make function for the series of analyses
>> epi_analysis <- function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> data <- read_csv("data_raw/EpiTest.csv") %>%
>>   group_by(TestAssay)%>%
>>   group_map(~ epi_analysis)
>> ```
>> But the only output I see is:
>> ```
>> [[1]]
>> function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> [[2]]
>> function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> [[3]]
>> function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> [[4]]
>> function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> ```
>> and there are no csvs in my epidata folder. Any
>> suggestions/corrections welcomed. I haven't used group_map() before,
>> but I am keen to use it.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Sat Jun  5 20:04:52 2021
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sat, 5 Jun 2021 11:04:52 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
Message-ID: <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>

> i <- 1L; span <- 1:100; result <- NA;
> for (i in span){
+ ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
+ }
> span[result]
 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
45 47 49 51 53 55 57
[30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
>

HTH, Bill.

W. Michels, Ph.D.


On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de> wrote:
>
> >
> > I don't understand. --
> >
> > 7%%2=1
> > 9%%2=1
> > 11%%2=1
> >
> > What aren't these numbers printing ?
> >
> > num<-0
> > for (i in 1:100){
> >  num<-num+i
> > if (num%%2 != 0)
> >  print(num)
> > }
>
> Your code tests the numbers
>
>         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
>
> and correctly prints the odd ones among them.
>
> But I suppose that's not what you wanted to do?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jun  5 21:26:13 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 5 Jun 2021 12:26:13 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
Message-ID: <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>

I'm sorry, but  this is a good example of how one should *not* do this in
R. I also should apologize for any pedantry that follows, but I believe
this serves as a nice example of the ideas.

Two of R's central features as a "data science" language are that many of
its core capabilities are "vectorized" -- can calculate on whole objects
(at the user-visible interpreter level) rather than requiring explicit
loops; and that it can use object indexing in several different modalities,
here logical indexing, for extraction and replacement in whole objects such
as vectors and matrices. Not only does this typically yield simpler, more
readable code (admittedly, a subjective judgment), but it is also typically
much faster, though I grant you that this can often be overrated.

In this instance, the several lines of looping code you presented can be
condensed into a single line:

> span <- 1:20
> span[span %% 2 == 1]
 [1]  1  3  5  7  9 11 13 15 17 19

### Trickier, but perhaps instructive, is: ###
> span[TRUE & span %% 2]
 [1]  1  3  5  7  9 11 13 15 17 19

All languages trade off various strengths and weaknesses, but I think it's
fair to say that one should try to work within the paradigms that are the
language's strengths when possible, R's vectorization and indexing in this
example.

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jun 5, 2021 at 11:05 AM William Michels via R-help <
r-help at r-project.org> wrote:

> > i <- 1L; span <- 1:100; result <- NA;
> > for (i in span){
> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
> + }
> > span[result]
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
> 45 47 49 51 53 55 57
> [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
> >
>
> HTH, Bill.
>
> W. Michels, Ph.D.
>
>
> On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de>
> wrote:
> >
> > >
> > > I don't understand. --
> > >
> > > 7%%2=1
> > > 9%%2=1
> > > 11%%2=1
> > >
> > > What aren't these numbers printing ?
> > >
> > > num<-0
> > > for (i in 1:100){
> > >  num<-num+i
> > > if (num%%2 != 0)
> > >  print(num)
> > > }
> >
> > Your code tests the numbers
> >
> >         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
> >
> > and correctly prints the odd ones among them.
> >
> > But I suppose that's not what you wanted to do?
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jun  5 21:34:42 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 5 Jun 2021 20:34:42 +0100
Subject: [R] Can I use group_map to iteratively process a dataframe?
In-Reply-To: <E32DBF4A-CBB5-4A45-A86E-DC2D733F0349@gmail.com>
References: <3895af86-d8cf-a3aa-7e4a-1785e1cb65c4@sapo.pt>
 <E32DBF4A-CBB5-4A45-A86E-DC2D733F0349@gmail.com>
Message-ID: <d9f01a7a-a4e5-170d-f705-21453db08304@sapo.pt>

Hello,

You are absolutely right, I had misread the SO post date. Apologies for 
my mistake. Besides, I even forgot the SO link [1] :(.

Now, for the question.

1. The code is giving  errors, that it can't find functions

gwet.ac1.table
kappa2.table

and I have removed the calls to them and the corresponding kappa2 and 
gwet values from the output data.frame.

2. In order to make the code more readable to me, I have written 
auxiliary functions sensitivity, specificity, pfp and pfn. They extract 
a sub-list member, like in the original code.

3. The main problem is that you need to pass epi_analysis its arguments. 
But group_map and group_modify do not pass the grouping variable to the 
function being called so I create a temp grouping variable by extracting 
the assay number and grouping on it. The files are now created.

4.
Also, epi_analysis now returns the data.frames it creates.
I have included col_types in the call to read_csv.
And it gives a message with the output file name, remove it if you find 
it useless. (It was meant for debugging so it probably is.)



library(tidyverse) # for cleaning and shaping data
library(epiR)
library(irrCAC)

all_epi_files <- list.files("congtables", pattern = "*.csv",
                             full.names = TRUE)

#Make export directory
check_create_dir <- function(the_dir) {
   if (!dir.exists(the_dir)) {
     dir.create(the_dir, recursive = TRUE) } #Creates a directory if it 
doesn't already exist
}

# The auxiliary functions
sensitivity <- function(x) x$elements$sensitivity
specificity <- function(x) x$elements$specificity
pfp <- function(x) x$element$pfp
pfn <- function(x) x$element$pfn


#Make function for the series of analyses
epi_analysis <- function(x, the_dir){

   # only the first of a vector of elements all equal to each other
   # unique() could also be used
   assay <- first(x[["TestAssay"]])
   #Clean data
   dat2 <- x  %>%
     select(c(Var1, Var2, Freq)) %>%
     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
     remove_rownames %>%
     column_to_rownames( var = "Var1") %>%
     as.matrix()

   #Run tests
   rval <- epi.tests(dat2, conf.level = 0.95)
   rkappa <- epi.kappa(dat2)
   #gwet <- gwet.ac1.table(dat2)
   #kappa2 <- kappa2.table(dat2)

   #Export results
   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn',
           #'kappa', 'gwet',
           'pabak')
   ests <- c(round(sensitivity(rval)$est, digits = 3),
             round(specificity(rval)$est, digits = 3),
             round(pfp(rval)$est, digits = 3),
             round(pfn(rval)$est, digits = 3),
             #round(kappa2$coeff.val, digits = 3),
             #round(gwet$coeff.val, digits = 3),
             round(rkappa$pabak$est, digits = 3))
   cis <- c(paste(round(sensitivity(rval)$lower, digits = 3),
                  round(sensitivity(rval)$upper, digits = 3), sep = ","),
            paste(round(specificity(rval)$lower, digits = 3),
                  round(specificity(rval)$upper, digits = 3), sep = ","),
            paste(round(pfp(rval)$lower, digits = 3),
                  round(pfp(rval)$upper, digits = 3), sep = ","),
            paste(round(pfn(rval)$lower, digits = 3),
                  round(pfn(rval)$upper, digits = 3), sep = ","),
            #kappa2$coeff.ci,
            #gwet$coeff.ci,
            paste(round(rkappa$pabak$lower, digits = 3),
                  round(rkappa$pabak$lower, digits = 3), sep = ","))

   df <- data.frame(hd, ests, cis)

   outfile <- file.path(the_dir, paste0(assay, ".csv"))
   msg <- sprintf("Output file: %s", outfile)
   message(msg)
   write.csv(df, file = outfile, na = "999.99", row.names = FALSE)
   df
}


the_dir_ex <- "data_generated/epidata" #Name the new desired directory

check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
https://stackoverflow.com/questions/67811339/using-group-walk-to-iteratively-export-an-analysis-on-contingency-tables-after-g
data <- read_csv(
   all_epi_files,
   col_types = cols(
     TestAssay = col_character(),
     Var1 = col_character(),
     Var2 = col_character(),
     Freq = col_double()
   )) %>%
   mutate(AssayNum = str_extract(TestAssay, "\\d+")) %>%
   group_by(AssayNum) %>%
   group_map(~ epi_analysis(.x, the_dir_ex))



[1] 
https://stackoverflow.com/questions/67811339/using-group-walk-to-iteratively-export-an-analysis-on-contingency-tables-after-g

Hope this helps,

Rui Barradas


?s 14:26 de 05/06/21, Madison Bell escreveu:
> This question had been posted on SO for a week with no response. I reached out to rhelp two days ago. I deleted the original question on SO and reposted an abbreviated version this morning.
> 
> Sorry for the cross posting, but I am urgently trying to get some ideas on how approach this problem.
> 
> Sent from my iPhone
> 
>> On Jun 5, 2021, at 09:07, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>> ?Hello,
>>
>> This is cross-posted from StackOverflow [1]. Cross posting is not well seen on R-help and the SO post is better explained (at least the data seem to be more complete). You should have waited for an answer there.
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 15:03 de 04/06/21, Madison Bell escreveu:
>>> I want to iteratively process a master list of comparisons using
>>> group_walk() as an alternative method to import batches of .csv files.
>>> I have the code for iteratively importing batch csvs here:
>>> #Import list of csv files from directory, formatted as:
>>> |rownm | neg | pos |
>>> |------|-----|-----|
>>> |neg   |19   |18   |
>>> |pos   |5    |141  |
>>> ```
>>> library(tidyverse) # for cleaning and shaping data
>>> library(epiR)
>>> library(irrCAC)
>>> all_epi_files <- list.files("congtables", pattern = "*.csv",
>>>                                 full.names = TRUE)
>>> #Make export directory
>>> check_create_dir <- function(the_dir) {
>>>    if (!dir.exists(the_dir)) {
>>>      dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
>>> doesn't already exist
>>> }
>>> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
>>> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
>>> #Make function for the series of analyses
>>> epi_analysis <- function(a_csv, the_dir){
>>>    #Import data as inserted variables
>>>    dat2 <- read_csv(a_csv)%>%
>>>      remove_rownames %>%
>>>      column_to_rownames(var="rownm") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(a_csv)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> #Execute functions
>>> lapply(all_epi_files,
>>>         FUN = epi_analysis,
>>>         the_dir = the_dir_ex)
>>> ```
>>> But instead I would like to input a dataset that looks like this:
>>> |Test Assay | Var1 | Var2 |Freq|
>>> |-----------|------|------|----|
>>> |Assay1     |neg   |neg   |19  |
>>> |Assay1     |neg   |pos   |5   |
>>> |Assay1     |pos   |neg   |8   |
>>> |Assay1     |pos   |pos   |141 |
>>> |Assay2     |neg   |neg   |25  |
>>> |Assay2     |neg   |pos   |6   |
>>> |Assay2     |pos   |neg   |17  |
>>> |Assay2     |pos   |pos   |33  |
>>> |Assay3     |neg   |neg   |99  |
>>> |Assay3     |neg   |pos   |20  |
>>> |Assay3     |pos   |neg   |5   |
>>> |Assay3     |pos   |pos   |105 |
>>> I want to use the same function epi_analysis and export a csv for each
>>> Test Assay (in this example Assay1, Assay2, and Assay3). So far I
>>> have:
>>> ```
>>> #Make export directory
>>> check_create_dir <- function(the_dir) {
>>>    if (!dir.exists(the_dir)) {
>>>      dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
>>> doesn't already exist
>>> }
>>> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
>>> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
>>> #Make function for the series of analyses
>>> epi_analysis <- function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> data <- read_csv("data_raw/EpiTest.csv") %>%
>>>    group_by(TestAssay)%>%
>>>    group_map(~ epi_analysis)
>>> ```
>>> But the only output I see is:
>>> ```
>>> [[1]]
>>> function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> [[2]]
>>> function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> [[3]]
>>> function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> [[4]]
>>> function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> ```
>>> and there are no csvs in my epidata folder. Any
>>> suggestions/corrections welcomed. I haven't used group_map() before,
>>> but I am keen to use it.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.


From c@r|o@pen@999 @end|ng |rom gm@||@com  Thu Jun  3 19:44:42 2021
From: c@r|o@pen@999 @end|ng |rom gm@||@com (ceepee)
Date: Thu, 3 Jun 2021 12:44:42 -0500 (CDT)
Subject: [R] RStudio does not do anything when issued Knit request
Message-ID: <1622742282349-0.post-6115@n4.nabble.com>


I have R studio 1.4.11 06 installed on my Windows 10 PC along with R 4.1.0.

When I try to knit a project the RStudio does not do anything, and it does
not  give an error message either. Every time I click knit button, it takes
me to the "R Markdown" tab at the bottom and then displays the full path and
the name of the RMD file - that is about it. It was working fine before but
suddenly started behaving this way. FYI, the code runs without errors when
the code chunk is run inside RStudio.
 
I have attached an image on where it takes me. Any thoughts? TIA.

<https://r.789695.n4.nabble.com/file/t389862/RStudioMsgWhenTryingToKnit.jpg> 

CP



--
Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jun  6 01:31:58 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 05 Jun 2021 16:31:58 -0700
Subject: [R] RStudio does not do anything when issued Knit request
In-Reply-To: <1622742282349-0.post-6115@n4.nabble.com>
References: <1622742282349-0.post-6115@n4.nabble.com>
Message-ID: <2F35865A-1EA1-4731-8E15-92B11F1BADC3@dcn.davis.ca.us>

If you walk into the produce section of a grocery store and start asking people how to fix your car, you may find a mechanic there because mechanics need vegetables also, but that doesn't make that the right approach. Lots of people here use the R language without touching RStudio... this mailing list is about the R language rather than tools. You should be at https://community.rstudio.com/ for this question.

I will say that your version of RStudio is a bit old for that version of R... they have not released a full update for R 4.1.0 yet. You can help them debug by trying out their preview version, or you can use R directly from the command line or using RGui and any text editor. But I don't claim that rolling back your version of R will fix your problems with RStudio... I have no idea.

On June 3, 2021 10:44:42 AM PDT, ceepee <carlospena999 at gmail.com> wrote:
>
>I have R studio 1.4.11 06 installed on my Windows 10 PC along with R
>4.1.0.
>
>When I try to knit a project the RStudio does not do anything, and it
>does
>not  give an error message either. Every time I click knit button, it
>takes
>me to the "R Markdown" tab at the bottom and then displays the full
>path and
>the name of the RMD file - that is about it. It was working fine before
>but
>suddenly started behaving this way. FYI, the code runs without errors
>when
>the code chunk is run inside RStudio.
> 
>I have attached an image on where it takes me. Any thoughts? TIA.
>
><https://r.789695.n4.nabble.com/file/t389862/RStudioMsgWhenTryingToKnit.jpg>
>
>
>CP
>
>
>
>--
>Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From thom@@@tb@bu|k@ @end|ng |rom gm@||@com  Sun Jun  6 13:00:07 2021
From: thom@@@tb@bu|k@ @end|ng |rom gm@||@com (Thomas Bulka)
Date: Sun, 6 Jun 2021 13:00:07 +0200
Subject: [R] 
 Conversion of String to Datetime: How to Keep Timezone Offset
 when Printing?
In-Reply-To: <6caadcac-4c7f-101c-6cca-2c62aacd08a7@gmail.com>
References: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
 <6caadcac-4c7f-101c-6cca-2c62aacd08a7@gmail.com>
Message-ID: <CAEyarjnqq=wVr4m=ei0VqF3oHMWUc9BmQQBET0dyps5RsKbKzg@mail.gmail.com>

Am Sa., 5. Juni 2021 um 11:47 Uhr schrieb Micha Silver <tsvibar at gmail.com>:
> It's not clear what you're asking. The time strings already have the
> timezone offset specified. If you get rid of the "T" character in the
> strings, then you can use regular datetime formatting specifiers to
> convert to R datetime objects, i.e.
>
>
> my_dates = c("2021-06-19T13:45:00-03:00", "2020-07-20T11:39:12+02:00",
> strftime(Sys.time(),"%Y-%m-%dT%H:%M:%S%z"))
> my_dates
> [1] "2021-06-19T13:45:00-03:00" "2020-07-20T11:39:12+02:00"
> [3] "2021-06-05T12:33:11+0300"
> my_dates2 = gsub(pattern="T", replacement=" ", x=my_dates)
> my_dates2
> [1] "2021-06-19 13:45:00-03:00" "2020-07-20 11:39:12+02:00"
> [3] "2021-06-05 12:33:11+0300"
>
>
> # Now convert to datetime objects, including TZ offset:
>
> my_datetimes = as.POSIXct(my_dates2, "%Y-%m-%d %H:%M:%S%z")
>
>
> # And these datetimes you can visualize any way you want:
>
> strftime(my_datetimes, format="%d/%b/%Y %H:%M %Z", tz="EST")
> [1] "19/Jun/2021 08:45 EST" "20/Jul/2020 06:39 EST" "05/Jun/2021 07:33 EST"
>
>
> Not sure if that helps at all...

Hi Micha,

thank you very much for your detailed reply. In fact, I probably have
not been too clear about my intentions, but you somehow managed to
tell me everything I wanted to know... Your solution works perfectly
for me!

Thanks again and kind regards,

Thomas


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Sun Jun  6 13:34:02 2021
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sun, 6 Jun 2021 04:34:02 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>
Message-ID: <CAA99HCy5rgrDMeEEeELHJPGbK6Y7KjfWNGm8XmhoDKyraOPbpg@mail.gmail.com>

Dear Bert,

First off, I want to thank you for the many hundreds (if not
thousands) of excellent posts I've read from you on this mailing list
over the years. And you are absolutely correct that when using the
`%%` modulo operator, your code is the most compact and the most
idiomatic.

That being said, if someone coming from another programming language
is posting code on this mailing list using a `for()` loop,  they may
be most comfortable getting working code back from this mailing-list
that still uses a `for()` loop in R. Furthermore, people often start
by *filtering* their data, when a better approach might be to first
*recode* it, for which the `ifelse()` function provides a nice
solution. But of course, a more simple approach than I previously
posted would be below (although less idiomatic than your answer):

> object <- 1:100
> index <- ifelse(object %% 2 == 1, TRUE, FALSE)
> object[index]
 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
45 47 49 51 53 55 57
[30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
>

This brings us to the question of programming 'philosophy':  certain
languages advise "TMTOWTDI", while another advises "There should be
one--and preferably only one--obvious way to do it." Where does R fit
on this spectrum? I believe one of R's underappreciated strengths is
being more in-line with the "TMTOWTDI" principle. So people coming
from other languages can get good results right off the bat using
vectorized indexing/filtering, or for() loops, or the apply() family
of functions, or writing a custom function (all answers given in this
thread).

Finally, if a nascent R programmer ever ventures into filtering their
data using objects and indexes of different lengths, they should have
a grasp of the code examples below (recycling rule):

long_vec <- 1:16
print(long_vec)
short_vec <- rep(4,8)
print(short_vec)
print(long_vec[long_vec > short_vec])

span <- 1:length(short_vec)
print(long_vec[span][long_vec[span] > short_vec])
print(long_vec[span][long_vec > short_vec])

Best Regards, Bill.

W. Michels, Ph.D.



On Sat, Jun 5, 2021 at 12:26 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> I'm sorry, but  this is a good example of how one should *not* do this in R. I also should apologize for any pedantry that follows, but I believe this serves as a nice example of the ideas.
>
> Two of R's central features as a "data science" language are that many of its core capabilities are "vectorized" -- can calculate on whole objects (at the user-visible interpreter level) rather than requiring explicit loops; and that it can use object indexing in several different modalities, here logical indexing, for extraction and replacement in whole objects such as vectors and matrices. Not only does this typically yield simpler, more readable code (admittedly, a subjective judgment), but it is also typically much faster, though I grant you that this can often be overrated.
>
> In this instance, the several lines of looping code you presented can be condensed into a single line:
>
> > span <- 1:20
> > span[span %% 2 == 1]
>  [1]  1  3  5  7  9 11 13 15 17 19
>
> ### Trickier, but perhaps instructive, is: ###
> > span[TRUE & span %% 2]
>  [1]  1  3  5  7  9 11 13 15 17 19
>
> All languages trade off various strengths and weaknesses, but I think it's fair to say that one should try to work within the paradigms that are the language's strengths when possible, R's vectorization and indexing in this example.
>
> Cheers,
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sat, Jun 5, 2021 at 11:05 AM William Michels via R-help <r-help at r-project.org> wrote:
>>
>> > i <- 1L; span <- 1:100; result <- NA;
>> > for (i in span){
>> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
>> + }
>> > span[result]
>>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
>> 45 47 49 51 53 55 57
>> [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
>> >
>>
>> HTH, Bill.
>>
>> W. Michels, Ph.D.
>>
>>
>> On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de> wrote:
>> >
>> > >
>> > > I don't understand. --
>> > >
>> > > 7%%2=1
>> > > 9%%2=1
>> > > 11%%2=1
>> > >
>> > > What aren't these numbers printing ?
>> > >
>> > > num<-0
>> > > for (i in 1:100){
>> > >  num<-num+i
>> > > if (num%%2 != 0)
>> > >  print(num)
>> > > }
>> >
>> > Your code tests the numbers
>> >
>> >         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
>> >
>> > and correctly prints the odd ones among them.
>> >
>> > But I suppose that's not what you wanted to do?
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From @|mon|ee|ee123456 @end|ng |rom gm@||@com  Sun Jun  6 10:29:05 2021
From: @|mon|ee|ee123456 @end|ng |rom gm@||@com (Lee Simon)
Date: Sun, 6 Jun 2021 16:29:05 +0800
Subject: [R] Help for Use of R software
Message-ID: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>

Dear Sir/Madam,

May I seek for your kind help for the use of R software for conducting
two-proportional z-test which is test for non-inferiority? I have found one
saying using function (TwoSampleProportion.NIS(alpha, beta, p1, p2, k,
delta, margin) but the software said there is not such function. Thank you
very much for your kind help.

With kindest regards,
Simon

	[[alternative HTML version deleted]]


From @|mon|ee|ee123456 @end|ng |rom gm@||@com  Sun Jun  6 19:06:42 2021
From: @|mon|ee|ee123456 @end|ng |rom gm@||@com (Lee Simon)
Date: Mon, 7 Jun 2021 01:06:42 +0800
Subject: [R] Help for Use of R software
Message-ID: <CAFLucyrBa_8OdUdgkX_RgjS0FevR4c=pM9QgCU5yeW-20yurnA@mail.gmail.com>

Dear Sir/Madam,

May I seek for your kind help for the use of R software for conducting
two-proportional z-test which is test for non-inferiority? What function
will the R software provide for doing such test with 95%CI and P-value
calculated. Thank you very much!

With kindest regards,
Simon

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Jun  6 19:44:18 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 6 Jun 2021 10:44:18 -0700
Subject: [R] Help for Use of R software
In-Reply-To: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>
References: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>
Message-ID: <d6de49fc-6578-8858-d961-23438c062daa@comcast.net>

A google-search of the term brings up as its first hit a link to a page 
on the rdocumentation.org website that indicates that theTrialSize 
package(version1.4) 
<https://www.rdocumentation.org/packages/TrialSize/versions/1.4> has a 
function named "TwoSampleProportion.NIS".

If you executed these commands in an R console:

install.packages("TrialSize")
packageDescription("TrialSize")
library(TrialSize)
?TwoSampleProportion.NIS

.... you would probably see a help page that has almost the same content 
as the page at rdocumentation.org

(A "two sample z-test", at least as I understand such a label, is not 
necessarily a test for non-inferiority. That page doesn't actually 
describe the results of a calculation using the 
"TwoSampleProportion.NIS" function but if you go to the code you find 
it's not doing a test of any sort but rather doing an oversimplified 
sample size calculation.)

You appear to not understand that R is a system of packages that are 
optionally installed and loaded into the core programming environment. I 
would advise that you do some self-learning about how to use R (or) that 
you contract with a person who can provide the skills need to both 
educate you about the statistical issues in trial design and run your 
analyses for you.

You should also read the fine Posting Guide:

http://www.R-project.org/posting-guide.html

-- 

David.

On 6/6/21 1:29 AM, Lee Simon wrote:
> Dear Sir/Madam,
>
> May I seek for your kind help for the use of R software for conducting
> two-proportional z-test which is test for non-inferiority? I have found one
> saying using function (TwoSampleProportion.NIS(alpha, beta, p1, p2, k,
> delta, margin) but the software said there is not such function. Thank you
> very much for your kind help.
>
> With kindest regards,
> Simon
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Jun  6 19:56:35 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 6 Jun 2021 10:56:35 -0700
Subject: [R] Help for Use of R software
In-Reply-To: <CAFLucyrBa_8OdUdgkX_RgjS0FevR4c=pM9QgCU5yeW-20yurnA@mail.gmail.com>
References: <CAFLucyrBa_8OdUdgkX_RgjS0FevR4c=pM9QgCU5yeW-20yurnA@mail.gmail.com>
Message-ID: <e5cdd63a-e784-1bd2-5f90-5da4777a9c73@comcast.net>

I get the sense that you need further background on statistical testing 
issues and suggest this resource:


https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3510268/


-- 

David Winsemius, MD, MPH

On 6/6/21 10:06 AM, Lee Simon wrote:
> Dear Sir/Madam,
>
> May I seek for your kind help for the use of R software for conducting
> two-proportional z-test which is test for non-inferiority? What function
> will the R software provide for doing such test with 95%CI and P-value
> calculated. Thank you very much!
>
> With kindest regards,
> Simon
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Sun Jun  6 20:03:33 2021
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Sun, 6 Jun 2021 18:03:33 +0000
Subject: [R] Help for Use of R software
In-Reply-To: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>
References: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>
Message-ID: <MN2PR03MB51673FD8EAA6D3051033EC7AE2399@MN2PR03MB5167.namprd03.prod.outlook.com>

Simon,

I suggest you look at the web page https://cran.r-project.org/web/packages/SampleSize4ClinicalTrials/SampleSize4ClinicalTrials.pdf
The package SampleSize4Clinical Trials appears to be exactly what you want. I believe it can produce a sample size estimate comparing two proportions for non-inferiority.

John

John David Sorkin M.D., Ph.D.
Professor of Medicine
University of Maryland School of Medicine
Associate Director for Biostatistics and Informatics Baltimore VA Medical Center
Geriatrics, Research, Education, and Clinical Center
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology, Geriatrics and Palliative Care
Senior Statistician
University of Maryland Center for Vascular Research
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)



________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Lee Simon <simonleelee123456 at gmail.com>
Sent: Sunday, June 6, 2021 4:29 AM
To: r-help at r-project.org
Subject: [R] Help for Use of R software

Dear Sir/Madam,

May I seek for your kind help for the use of R software for conducting
two-proportional z-test which is test for non-inferiority? I have found one
saying using function (TwoSampleProportion.NIS(alpha, beta, p1, p2, k,
delta, margin) but the software said there is not such function. Thank you
very much for your kind help.

With kindest regards,
Simon

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C6987e89fa41b4ace34c608d9290e2042%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637585963482517146%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y4%2BsOlxzq2aAhkVyc7XGnmK0%2F1fXKoEzRWZeiHdV3eg%3D&amp;reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C6987e89fa41b4ace34c608d9290e2042%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637585963482517146%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=JuXMHDDub3oN9RXw2Q7owTIR4DDNi6DHA%2FNqUZFQHnI%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From dc@r|@on @end|ng |rom t@mu@edu  Sun Jun  6 21:21:34 2021
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sun, 6 Jun 2021 15:21:34 -0400
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
Message-ID: <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>

There is really no need for a loop:

num <- 1:100
num[ifelse(num %% 2 == 1, TRUE, FALSE)]

 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49
[26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99

David L Carlson


On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
<r-help at r-project.org> wrote:
>
> > i <- 1L; span <- 1:100; result <- NA;
> > for (i in span){
> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
> + }
> > span[result]
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
> 45 47 49 51 53 55 57
> [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
> >
>
> HTH, Bill.
>
> W. Michels, Ph.D.
>
>
> On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de> wrote:
> >
> > >
> > > I don't understand. --
> > >
> > > 7%%2=1
> > > 9%%2=1
> > > 11%%2=1
> > >
> > > What aren't these numbers printing ?
> > >
> > > num<-0
> > > for (i in 1:100){
> > >  num<-num+i
> > > if (num%%2 != 0)
> > >  print(num)
> > > }
> >
> > Your code tests the numbers
> >
> >         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
> >
> > and correctly prints the odd ones among them.
> >
> > But I suppose that's not what you wanted to do?
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-EZd5ixk$
> > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-fWVQ0xI$
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-EZd5ixk$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-fWVQ0xI$
> and provide commented, minimal, self-contained, reproducible code.


From dc@r|@on @end|ng |rom t@mu@edu  Sun Jun  6 22:09:25 2021
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sun, 6 Jun 2021 16:09:25 -0400
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
Message-ID: <CAE-dL2qRGH__ZNpB1z5Dicuj_+4Y3_TZrwZT=_KHZn347PWoOQ@mail.gmail.com>

If the loop is necessary:

num <- vector()
for (i in 1:100) {
    if(i %% 2 != 0) num <- c(num, i)
}
num

Or modify your code to this to get each odd number printed on a separate row:

for (i in 1:100) {
    if(i %% 2 != 0) print(i)
}

David L Carlson

On Sun, Jun 6, 2021 at 3:21 PM David Carlson <dcarlson at tamu.edu> wrote:
>
> There is really no need for a loop:
>
> num <- 1:100
> num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49
> [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
>
> David L Carlson
>
>
> On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
> <r-help at r-project.org> wrote:
> >
> > > i <- 1L; span <- 1:100; result <- NA;
> > > for (i in span){
> > + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
> > + }
> > > span[result]
> >  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
> > 45 47 49 51 53 55 57
> > [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
> > >
> >
> > HTH, Bill.
> >
> > W. Michels, Ph.D.
> >
> >
> > On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de> wrote:
> > >
> > > >
> > > > I don't understand. --
> > > >
> > > > 7%%2=1
> > > > 9%%2=1
> > > > 11%%2=1
> > > >
> > > > What aren't these numbers printing ?
> > > >
> > > > num<-0
> > > > for (i in 1:100){
> > > >  num<-num+i
> > > > if (num%%2 != 0)
> > > >  print(num)
> > > > }
> > >
> > > Your code tests the numbers
> > >
> > >         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
> > >
> > > and correctly prints the odd ones among them.
> > >
> > > But I suppose that's not what you wanted to do?
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-EZd5ixk$
> > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-fWVQ0xI$
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-EZd5ixk$
> > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-fWVQ0xI$
> > and provide commented, minimal, self-contained, reproducible code.


From c||n|c@|0910 @end|ng |rom gm@||@com  Sun Jun  6 22:28:14 2021
From: c||n|c@|0910 @end|ng |rom gm@||@com (Ahmad Raza)
Date: Mon, 7 Jun 2021 00:28:14 +0400
Subject: [R] Directly copying data from RStudio to MS Excel
Message-ID: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>

Dear Experts,
I am trying to copy data tables from RStudio to MS Excel. In Macbook, its
working effortlessly. I can just press CMD+A, copy and directly paste onto
excel sheet. All text, table and format are preserved. However, its not
working on Windows 10 MS Office 365 Excel.
First, simple paste option doesn't paste anything. If I try to do paste
special --> text/html, it pasts all data in a single long column. I don't
remember what I did differently on Mac that it worked there. I am looking
for your wise words on this issue please.
Thanks.

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Jun  6 23:27:18 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Mon, 7 Jun 2021 09:27:18 +1200
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAA99HCy5rgrDMeEEeELHJPGbK6Y7KjfWNGm8XmhoDKyraOPbpg@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>
 <CAA99HCy5rgrDMeEEeELHJPGbK6Y7KjfWNGm8XmhoDKyraOPbpg@mail.gmail.com>
Message-ID: <20210607092718.220c34d1@rolf-Latitude-E7470>

On Sun, 6 Jun 2021 04:34:02 -0700
William Michels via R-help <r-help at r-project.org> wrote:


<SNIP>

> ... But of course, a more simple approach than I previously
> posted would be below (although less idiomatic than your answer):
> 
> > object <- 1:100
> > index <- ifelse(object %% 2 == 1, TRUE, FALSE)
> > object[index]
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
> 45 47 49 51 53 55 57
> [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99

Why faff around with ifelse()?

    object[object %% 2 == 1]

works just fine.

<SNIP>

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jun  7 00:20:43 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 06 Jun 2021 15:20:43 -0700
Subject: [R] Directly copying data from RStudio to MS Excel
In-Reply-To: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>
References: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>
Message-ID: <97AC89A1-F42F-497A-9EDF-AC7D07A83207@dcn.davis.ca.us>

No idea.

a) This mailing list is about the R Language, not the RStudio editor.

b) I find that the power of R lies in the ability to give it a script of commands and have to loop through many tasks. Copying and pasting is a manual intervention that prevents bulk calculations in most cases.

c) You may want to generate a csv output file that you can open in Excel. You can also generate docx or html files with the rmarkdown package.

On June 6, 2021 1:28:14 PM PDT, Ahmad Raza <clinical0910 at gmail.com> wrote:
>Dear Experts,
>I am trying to copy data tables from RStudio to MS Excel. In Macbook,
>its
>working effortlessly. I can just press CMD+A, copy and directly paste
>onto
>excel sheet. All text, table and format are preserved. However, its not
>working on Windows 10 MS Office 365 Excel.
>First, simple paste option doesn't paste anything. If I try to do paste
>special --> text/html, it pasts all data in a single long column. I
>don't
>remember what I did differently on Mac that it worked there. I am
>looking
>for your wise words on this issue please.
>Thanks.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From p|out@|7 @end|ng |rom gm@||@com  Mon Jun  7 06:00:32 2021
From: p|out@|7 @end|ng |rom gm@||@com (Paul Louisell)
Date: Mon, 7 Jun 2021 00:00:32 -0400
Subject: [R] .Last function in R 4.1.0
Message-ID: <CAP7Zy0KSNsP9wM7mQ3H1cB+MqwYA_8HtWYxX18Eif09OieTVvg@mail.gmail.com>

Here's my relevant OS / version info for background:
R version 4.1.0 (2021-05-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19043)
Here's the problem: I've inserted the following lines *only *into my
Rprofile.site file in the etc folder:
if(interactive()){
.Last=function(){
timestamp(stamp=date(), prefix = "##------ ", suffix = " ------##")
savehistory()
}
}
This is a basic .Last function to automatically insert a timestamp into the
history and save it at the end of an interactive R session. Prior to R
4.1.0, I'd never received an error from these lines. But in version 4.1.0
on startup, I get this error:
Error: cannot add binding of '.Last' to the base environment

And (as expected given the error) the .Last function is not in the
workspace:
> .Last
Error: object '.Last' not found
The same thing happens when I start up the 32-bit version. Section 10.8
(pg. 54) of *R-intro.pdf *still has the documentation for .First and .Last,
and shows examples where you place the function definitions in the
Rprofile.site file, as well as other locations. *fullrefman.pdf *also has
documentation for these functions. So my question:

   - Is this a bug? Or does R not support .First / .Last anymore, and the
   documents just need updating?

Thanks for your help with this,
Paul Louisell

	[[alternative HTML version deleted]]


From er|ch@@ub@ @end|ng |rom neuw|rth@pr|v@@t  Mon Jun  7 10:43:19 2021
From: er|ch@@ub@ @end|ng |rom neuw|rth@pr|v@@t (Erich Subscriptions)
Date: Mon, 7 Jun 2021 10:43:19 +0200
Subject: [R] Directly copying data from RStudio to MS Excel
In-Reply-To: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>
References: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>
Message-ID: <61459A2C-278D-4D7B-AFCB-3CF42A7D73AA@neuwirth.priv.at>

Read
https://www.johndcook.com/blog/r_excel_clipboard/


> On 06.06.2021, at 22:28, Ahmad Raza <clinical0910 at gmail.com> wrote:
> 
> Dear Experts,
> I am trying to copy data tables from RStudio to MS Excel. In Macbook, its
> working effortlessly. I can just press CMD+A, copy and directly paste onto
> excel sheet. All text, table and format are preserved. However, its not
> working on Windows 10 MS Office 365 Excel.
> First, simple paste option doesn't paste anything. If I try to do paste
> special --> text/html, it pasts all data in a single long column. I don't
> remember what I did differently on Mac that it worked there. I am looking
> for your wise words on this issue please.
> Thanks.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From n|ckmwr@y @end|ng |rom gm@||@com  Mon Jun  7 11:09:16 2021
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Mon, 7 Jun 2021 10:09:16 +0100
Subject: [R] Magick Package
Message-ID: <CABxY9BM+U7zzLTO5n6vyEPtzge_B=o2b=QDspZO8-q-tODPUBg@mail.gmail.com>

Hello  I'm trying to use the Magick package for animations - it has
downloaded OK but says that it was built under version 4.0.5 and that
fontconfig and x11 features are disabled.  Atm I am using R 1.4.1103   Am I
being naive in assuming that all later versions of R subsume the features
of earlier ones or is it that some packages stop being useable with later
updates?
In any event I have some code for an animation sequence which I have
downloaded from the site -Lesson 39 ? Discrete distributions in R: Part I ?
dataanalysisclassroom <https://www.dataanalysisclassroom.com/lesson39/>
 the code runs without an error message but it doesn't give the animation
sequence you see on the website
Any help suggestions appreciated   Nick Wray

######## Animation #########

# Create png files for Binomial distribution png(file="binomial%02d.png",
width=600, height=300)

 n = 181

x = 0:181



p = 0.1

for (i in 1:5)

{

px = dbinom(x,n,p)

 plot(x,px,type="h",xlab="Random Variable X (Number of tickets in 181
days)",ylab="Probability P(X=k)",font=2,font.lab=2)

txt = paste("p=",p,sep="")

text(150,0.04,txt,col="red",cex=2)

p = p+0.2

}

dev.off()



# Combine the png files saved in the folder into a GIF #



library(magick)



binomial_png1 <- image_read("binomial01.png","x150")

binomial_png2 <- image_read("binomial02.png","x150")

binomial_png3 <- image_read("binomial03.png","x150")

binomial_png4 <- image_read("binomial04.png","x150")

binomial_png5 <- image_read("binomial05.png","x150")



frames <- image_morph(c(binomial_png1, binomial_png2, binomial_png3,
binomial_png4, binomial_png5), frames = 15)

animation <- image_animate(frames)



image_write(animation, "binomial.gif")

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  7 13:10:18 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jun 2021 07:10:18 -0400
Subject: [R] Magick Package
In-Reply-To: <CABxY9BM+U7zzLTO5n6vyEPtzge_B=o2b=QDspZO8-q-tODPUBg@mail.gmail.com>
References: <CABxY9BM+U7zzLTO5n6vyEPtzge_B=o2b=QDspZO8-q-tODPUBg@mail.gmail.com>
Message-ID: <93106ae1-b6dc-a62d-d6b2-03bb2a70e463@gmail.com>

On 07/06/2021 5:09 a.m., Nick Wray wrote:
> Hello  I'm trying to use the Magick package for animations - it has
> downloaded OK but says that it was built under version 4.0.5 and that
> fontconfig and x11 features are disabled.  Atm I am using R 1.4.1103  

That's not an R version number.  It looks like an RStudio version 
number, which is irrelevant here:  RStudio is just an editor and front end.


  Am I
> being naive in assuming that all later versions of R subsume the features
> of earlier ones or is it that some packages stop being useable with later
> updates?

That's up to the package maintainer.  However, the magick package (note 
the lowercase name) works in current R versions.

> In any event I have some code for an animation sequence which I have
> downloaded from the site -Lesson 39 ? Discrete distributions in R: Part I ?
> dataanalysisclassroom <https://www.dataanalysisclassroom.com/lesson39/>
>   the code runs without an error message but it doesn't give the animation
> sequence you see on the website
> Any help suggestions appreciated   Nick Wray
> 
> ######## Animation #########
> 
> # Create png files for Binomial distribution png(file="binomial%02d.png",
> width=600, height=300)
> 

The line above should be separated to

# Create png files for Binomial distribution

png(file="binomial%02d.png", width=600, height=300)


When I make that correction, the example works for me.

Duncan Murdoch


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jun  7 16:24:08 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 7 Jun 2021 07:24:08 -0700
Subject: [R] .Last function in R 4.1.0
In-Reply-To: <CAP7Zy0KSNsP9wM7mQ3H1cB+MqwYA_8HtWYxX18Eif09OieTVvg@mail.gmail.com>
References: <CAP7Zy0KSNsP9wM7mQ3H1cB+MqwYA_8HtWYxX18Eif09OieTVvg@mail.gmail.com>
Message-ID: <CAGxFJbSfeGMrKGRm_gCtYEcPGm2SKp4mD--Xo8r8Q8Ezy61xsw@mail.gmail.com>

According to the News file for 4.1.0 -- you should always check there first
for such things --

"The base environment and its namespace are now locked (so one can no
longer add bindings to these or remove from these)."

So the docs do seem to need updating.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jun 7, 2021 at 12:15 AM Paul Louisell <ploutal7 at gmail.com> wrote:

> Here's my relevant OS / version info for background:
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19043)
> Here's the problem: I've inserted the following lines *only *into my
> Rprofile.site file in the etc folder:
> if(interactive()){
> .Last=function(){
> timestamp(stamp=date(), prefix = "##------ ", suffix = " ------##")
> savehistory()
> }
> }
> This is a basic .Last function to automatically insert a timestamp into the
> history and save it at the end of an interactive R session. Prior to R
> 4.1.0, I'd never received an error from these lines. But in version 4.1.0
> on startup, I get this error:
> Error: cannot add binding of '.Last' to the base environment
>
> And (as expected given the error) the .Last function is not in the
> workspace:
> > .Last
> Error: object '.Last' not found
> The same thing happens when I start up the 32-bit version. Section 10.8
> (pg. 54) of *R-intro.pdf *still has the documentation for .First and .Last,
> and shows examples where you place the function definitions in the
> Rprofile.site file, as well as other locations. *fullrefman.pdf *also has
> documentation for these functions. So my question:
>
>    - Is this a bug? Or does R not support .First / .Last anymore, and the
>    documents just need updating?
>
> Thanks for your help with this,
> Paul Louisell
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wewo|@k| @end|ng |rom gm@||@com  Mon Jun  7 16:37:03 2021
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Mon, 7 Jun 2021 16:37:03 +0200
Subject: [R] Package installation for 4.1 on windows.
Message-ID: <CAAjnpdhz2RjCBtEUA75p4FUGJ2nqU7DgDPrMRe=BVLWniTZX5A@mail.gmail.com>

Hello,

I just installed R 4.1 and now trying to update install some packages.

R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
Copyright (C) 2021 The R Foundation for Statistical Computing

But when installing packages I read:

Installing packages into ?C:/Users/wolski/Documents/R/win-library/4.0?

Should not be a win-library/4.1. package directory be used by default?

Best regards
Witold

-- 
Witold Eryk Wolski


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  7 17:23:00 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jun 2021 11:23:00 -0400
Subject: [R] .Last function in R 4.1.0
In-Reply-To: <CAGxFJbSfeGMrKGRm_gCtYEcPGm2SKp4mD--Xo8r8Q8Ezy61xsw@mail.gmail.com>
References: <CAP7Zy0KSNsP9wM7mQ3H1cB+MqwYA_8HtWYxX18Eif09OieTVvg@mail.gmail.com>
 <CAGxFJbSfeGMrKGRm_gCtYEcPGm2SKp4mD--Xo8r8Q8Ezy61xsw@mail.gmail.com>
Message-ID: <1b877bc6-148e-0a30-d7ba-69bed2435aae@gmail.com>

And to expand a bit:  only the site file tries to put objects into the 
base package.  The local .Rprofile file would put them into the global 
environment.  So there's still support for .First and .Last, but it has 
changed.

This abuses things a bit, but appears to work in an Rprofile.site file:

assign(".Last", function() if (interactive()) message("Goodbye!"), 
.AutoloadEnv)

The .AutoloadEnv environment is the place that autoload() writes in the 
base package, and it's generally on the search path, so the .Last 
function will be found.  I haven't checked whether it will be run if 
there's also a .Last defined in the global environment.

Duncan Murdoch

On 07/06/2021 10:24 a.m., Bert Gunter wrote:
> According to the News file for 4.1.0 -- you should always check there first
> for such things --
> 
> "The base environment and its namespace are now locked (so one can no
> longer add bindings to these or remove from these)."
> 
> So the docs do seem to need updating.
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Jun 7, 2021 at 12:15 AM Paul Louisell <ploutal7 at gmail.com> wrote:
> 
>> Here's my relevant OS / version info for background:
>> R version 4.1.0 (2021-05-18)
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>> Running under: Windows 10 x64 (build 19043)
>> Here's the problem: I've inserted the following lines *only *into my
>> Rprofile.site file in the etc folder:
>> if(interactive()){
>> .Last=function(){
>> timestamp(stamp=date(), prefix = "##------ ", suffix = " ------##")
>> savehistory()
>> }
>> }
>> This is a basic .Last function to automatically insert a timestamp into the
>> history and save it at the end of an interactive R session. Prior to R
>> 4.1.0, I'd never received an error from these lines. But in version 4.1.0
>> on startup, I get this error:
>> Error: cannot add binding of '.Last' to the base environment
>>
>> And (as expected given the error) the .Last function is not in the
>> workspace:
>>> .Last
>> Error: object '.Last' not found
>> The same thing happens when I start up the 32-bit version. Section 10.8
>> (pg. 54) of *R-intro.pdf *still has the documentation for .First and .Last,
>> and shows examples where you place the function definitions in the
>> Rprofile.site file, as well as other locations. *fullrefman.pdf *also has
>> documentation for these functions. So my question:
>>
>>     - Is this a bug? Or does R not support .First / .Last anymore, and the
>>     documents just need updating?
>>
>> Thanks for your help with this,
>> Paul Louisell
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  7 17:49:05 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jun 2021 11:49:05 -0400
Subject: [R] Package installation for 4.1 on windows.
In-Reply-To: <CAAjnpdhz2RjCBtEUA75p4FUGJ2nqU7DgDPrMRe=BVLWniTZX5A@mail.gmail.com>
References: <CAAjnpdhz2RjCBtEUA75p4FUGJ2nqU7DgDPrMRe=BVLWniTZX5A@mail.gmail.com>
Message-ID: <52ba966a-270a-df2e-1c83-d8b219b36c2d@gmail.com>

On 07/06/2021 10:37 a.m., Witold E Wolski wrote:
> Hello,
> 
> I just installed R 4.1 and now trying to update install some packages.
> 
> R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> 
> But when installing packages I read:
> 
> Installing packages into ?C:/Users/wolski/Documents/R/win-library/4.0?
> 
> Should not be a win-library/4.1. package directory be used by default?
>

I suspect something in your local setup specifies that directory.  The 
usual place to install is the directory where R was installed; it only 
switches to the user home directory if that fails, or the user requests it.

Duncan Murdoch


From b|p|@bn1 @end|ng |rom gm@||@com  Mon Jun  7 19:03:18 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Mon, 7 Jun 2021 14:03:18 -0300
Subject: [R] Need help to fix the max date filter problem in the date input
Message-ID: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>

Hi All,
I Need a bit of help to fix the code.
Code:
library(readr)
library(shiny)
ttclasses <- read_csv("ttclasses.csv")

#Filter data
library(stringr)
library(dplyr)
ttclasses <-ttclasses %>%
  filter(str_detect(assessment, "Assignment"))
ttclasses <-ttclasses %>%
  filter(str_detect(name, "Name"))

##Remove NA values.
library(tidyverse)
ttclasses <-ttclasses %>% drop_na("score")

#Convert to factor
ttclasses$assessment <- as.factor(ttclasses$assessment)
ttclasses$due_date =  as.Date(ttclasses$due_date, format = "mm/dd/yy")
##ttclasses$name <- as.factor(ttclasses$name)

# Define UI ----
ui <- fluidPage(

  # App title ----
  titlePanel("Assessment Dashboard"),

  # Sidebar layout with input and output definitions ----
  sidebarLayout(

    # Sidebar panel for inputs ----
    sidebarPanel(

      # Input: Selector for variable to plot the grades for the selected
assignment ----
      selectInput("assessment", "Assessment:",
                  c("Assignment 1" = "Assignment 1",
                    "Assignment 2" = "Assignment 2",
                    "Assignment 3" = "Assignment 3",
                    "Assignment 4" = "Assignment 4",
                    "Assignment 5" = "Assignment 5")),
      selectInput("name", "Name:",
                  ttclasses[,2]),

    dateRangeInput("due_date",
                   "Due-Date:",start = max(ttclasses$due_date) ,
                   separator = " - ")
    ),

    # Main panel for displaying outputs ----
    mainPanel(

      # Output: Plot of the requested variable against grade ----
      plotOutput("gradePlot")

    )
  )
)

# Define server logic to plot  ----
server <- function(input, output) {
    output$gradePlot <- renderPlot({
    grade_ad = input$assessment
    boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
    ttclasses <-ttclasses %>%
      filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
<= input$due_date[2])
  })
}

# Create Shiny app ----
shinyApp(ui, server)

Thanks & Regards

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jun  7 21:21:48 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 7 Jun 2021 20:21:48 +0100
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
Message-ID: <a5513ba5-2762-7d1f-2476-61dd46d7401c@sapo.pt>

Hello,

This is not reproducible, we don't have access to ttclasses.csv.
Can you post sample data? Please post the output of

dput(ttclasses)

Or, if it is too big, the output of

dput(head(ttclasses, 20))


Hope this helps,

Rui Barradas


?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> Hi All,
> I Need a bit of help to fix the code.
> Code:
> library(readr)
> library(shiny)
> ttclasses <- read_csv("ttclasses.csv")
> 
> #Filter data
> library(stringr)
> library(dplyr)
> ttclasses <-ttclasses %>%
>    filter(str_detect(assessment, "Assignment"))
> ttclasses <-ttclasses %>%
>    filter(str_detect(name, "Name"))
> 
> ##Remove NA values.
> library(tidyverse)
> ttclasses <-ttclasses %>% drop_na("score")
> 
> #Convert to factor
> ttclasses$assessment <- as.factor(ttclasses$assessment)
> ttclasses$due_date =  as.Date(ttclasses$due_date, format = "mm/dd/yy")
> ##ttclasses$name <- as.factor(ttclasses$name)
> 
> # Define UI ----
> ui <- fluidPage(
> 
>    # App title ----
>    titlePanel("Assessment Dashboard"),
> 
>    # Sidebar layout with input and output definitions ----
>    sidebarLayout(
> 
>      # Sidebar panel for inputs ----
>      sidebarPanel(
> 
>        # Input: Selector for variable to plot the grades for the selected
> assignment ----
>        selectInput("assessment", "Assessment:",
>                    c("Assignment 1" = "Assignment 1",
>                      "Assignment 2" = "Assignment 2",
>                      "Assignment 3" = "Assignment 3",
>                      "Assignment 4" = "Assignment 4",
>                      "Assignment 5" = "Assignment 5")),
>        selectInput("name", "Name:",
>                    ttclasses[,2]),
> 
>      dateRangeInput("due_date",
>                     "Due-Date:",start = max(ttclasses$due_date) ,
>                     separator = " - ")
>      ),
> 
>      # Main panel for displaying outputs ----
>      mainPanel(
> 
>        # Output: Plot of the requested variable against grade ----
>        plotOutput("gradePlot")
> 
>      )
>    )
> )
> 
> # Define server logic to plot  ----
> server <- function(input, output) {
>      output$gradePlot <- renderPlot({
>      grade_ad = input$assessment
>      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
>      ttclasses <-ttclasses %>%
>        filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
> <= input$due_date[2])
>    })
> }
> 
> # Create Shiny app ----
> shinyApp(ui, server)
> 
> Thanks & Regards
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jun  7 23:51:54 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 7 Jun 2021 22:51:54 +0100
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
Message-ID: <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>

Hello,

Thanks for the data.
There were some, not many, bugs that I have corrected below.



library(tidyverse)
#library(stringr)    # attached with tidyverse
#library(readr)
library(shiny)

ttclasses <- read_csv("~/tmp/ttclasses.csv")

#Filter data
ttclasses <-ttclasses %>%
   filter(str_detect(assessment, "Assignment"))

# With the attached data this filter
# removes all rows so I have
# commented it out
#ttclasses <-ttclasses %>%
#  filter(str_detect(name, "Name"))

##Remove NA values.
ttclasses <-ttclasses %>% drop_na("score")

#Convert to factor
ttclasses$assessment <- factor(ttclasses$assessment)

# please see the formats in help("strptime")
ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
##ttclasses$name <- factor(ttclasses$name)

# Define UI ----
ui <- fluidPage(

   # App title ----
   titlePanel("Assessment Dashboard"),

   # Sidebar layout with input and output definitions ----
   sidebarLayout(

     # Sidebar panel for inputs ----
     sidebarPanel(

       # Input: Selector for variable to plot the grades for the selected
       # assignment ----
         selectInput("assessment", "Assessment:",
                     c("Assignment 1" = "Assignment 1",
                       "Assignment 2" = "Assignment 2",
                       "Assignment 3" = "Assignment 3",
                       "Assignment 4" = "Assignment 4",
                       "Assignment 5" = "Assignment 5")),
       selectInput("name", "Name:",
                   ttclasses[,2]),

       dateRangeInput("due_date",
                      "Due-Date:",start = max(ttclasses$due_date) ,
                      separator = " - ")
     ),

     # Main panel for displaying outputs ----
     mainPanel(

       # Output: Plot of the requested variable against grade ----
       plotOutput("gradePlot")

     )
   )
)

# Define server logic to plot  ----
server <- function(input, output) {
   output$gradePlot <- renderPlot({
     grade_ad = input$assessment
     boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
             frame.plot=FALSE, horizontal=TRUE, col="magenta", 
main=grade_ad)
     ttclasses <-ttclasses %>%
       filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
              <= input$due_date[2])
   })
}

# Create Shiny app ----
shinyApp(ui, server)



Hope this helps,

Rui Barradas

?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> Hi All,
> I Need a bit of help to fix the code.
> Code:
> library(readr)
> library(shiny)
> ttclasses <- read_csv("ttclasses.csv")
> 
> #Filter data
> library(stringr)
> library(dplyr)
> ttclasses <-ttclasses %>%
>    filter(str_detect(assessment, "Assignment"))
> ttclasses <-ttclasses %>%
>    filter(str_detect(name, "Name"))
> 
> ##Remove NA values.
> library(tidyverse)
> ttclasses <-ttclasses %>% drop_na("score")
> 
> #Convert to factor
> ttclasses$assessment <- as.factor(ttclasses$assessment)
> ttclasses$due_date =  as.Date(ttclasses$due_date, format = "mm/dd/yy")
> ##ttclasses$name <- as.factor(ttclasses$name)
> 
> # Define UI ----
> ui <- fluidPage(
> 
>    # App title ----
>    titlePanel("Assessment Dashboard"),
> 
>    # Sidebar layout with input and output definitions ----
>    sidebarLayout(
> 
>      # Sidebar panel for inputs ----
>      sidebarPanel(
> 
>        # Input: Selector for variable to plot the grades for the selected
> assignment ----
>        selectInput("assessment", "Assessment:",
>                    c("Assignment 1" = "Assignment 1",
>                      "Assignment 2" = "Assignment 2",
>                      "Assignment 3" = "Assignment 3",
>                      "Assignment 4" = "Assignment 4",
>                      "Assignment 5" = "Assignment 5")),
>        selectInput("name", "Name:",
>                    ttclasses[,2]),
> 
>      dateRangeInput("due_date",
>                     "Due-Date:",start = max(ttclasses$due_date) ,
>                     separator = " - ")
>      ),
> 
>      # Main panel for displaying outputs ----
>      mainPanel(
> 
>        # Output: Plot of the requested variable against grade ----
>        plotOutput("gradePlot")
> 
>      )
>    )
> )
> 
> # Define server logic to plot  ----
> server <- function(input, output) {
>      output$gradePlot <- renderPlot({
>      grade_ad = input$assessment
>      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
>      ttclasses <-ttclasses %>%
>        filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
> <= input$due_date[2])
>    })
> }
> 
> # Create Shiny app ----
> shinyApp(ui, server)
> 
> Thanks & Regards
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From b|p|@bn1 @end|ng |rom gm@||@com  Mon Jun  7 21:49:31 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Mon, 7 Jun 2021 16:49:31 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <a5513ba5-2762-7d1f-2476-61dd46d7401c@sapo.pt>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <a5513ba5-2762-7d1f-2476-61dd46d7401c@sapo.pt>
Message-ID: <CANwr6KaTxu01=KOxXzJJGdnfN79jqo16rj4YDxtTBwUXkAgoPg@mail.gmail.com>

Hi Rui,

Please find the data file attached here.

Thanks & Regards
Biplab Nayak

On Mon, Jun 7, 2021 at 4:21 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> This is not reproducible, we don't have access to ttclasses.csv.
> Can you post sample data? Please post the output of
>
> dput(ttclasses)
>
> Or, if it is too big, the output of
>
> dput(head(ttclasses, 20))
>
>
> Hope this helps,
>
> Rui Barradas
>
>
> ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> > Hi All,
> > I Need a bit of help to fix the code.
> > Code:
> > library(readr)
> > library(shiny)
> > ttclasses <- read_csv("ttclasses.csv")
> >
> > #Filter data
> > library(stringr)
> > library(dplyr)
> > ttclasses <-ttclasses %>%
> >    filter(str_detect(assessment, "Assignment"))
> > ttclasses <-ttclasses %>%
> >    filter(str_detect(name, "Name"))
> >
> > ##Remove NA values.
> > library(tidyverse)
> > ttclasses <-ttclasses %>% drop_na("score")
> >
> > #Convert to factor
> > ttclasses$assessment <- as.factor(ttclasses$assessment)
> > ttclasses$due_date =  as.Date(ttclasses$due_date, format = "mm/dd/yy")
> > ##ttclasses$name <- as.factor(ttclasses$name)
> >
> > # Define UI ----
> > ui <- fluidPage(
> >
> >    # App title ----
> >    titlePanel("Assessment Dashboard"),
> >
> >    # Sidebar layout with input and output definitions ----
> >    sidebarLayout(
> >
> >      # Sidebar panel for inputs ----
> >      sidebarPanel(
> >
> >        # Input: Selector for variable to plot the grades for the selected
> > assignment ----
> >        selectInput("assessment", "Assessment:",
> >                    c("Assignment 1" = "Assignment 1",
> >                      "Assignment 2" = "Assignment 2",
> >                      "Assignment 3" = "Assignment 3",
> >                      "Assignment 4" = "Assignment 4",
> >                      "Assignment 5" = "Assignment 5")),
> >        selectInput("name", "Name:",
> >                    ttclasses[,2]),
> >
> >      dateRangeInput("due_date",
> >                     "Due-Date:",start = max(ttclasses$due_date) ,
> >                     separator = " - ")
> >      ),
> >
> >      # Main panel for displaying outputs ----
> >      mainPanel(
> >
> >        # Output: Plot of the requested variable against grade ----
> >        plotOutput("gradePlot")
> >
> >      )
> >    )
> > )
> >
> > # Define server logic to plot  ----
> > server <- function(input, output) {
> >      output$gradePlot <- renderPlot({
> >      grade_ad = input$assessment
> >      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> > frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
> >      ttclasses <-ttclasses %>%
> >        filter(ttclasses$due_date >= input$due_date[1] &
> ttclasses$due_date
> > <= input$due_date[2])
> >    })
> > }
> >
> > # Create Shiny app ----
> > shinyApp(ui, server)
> >
> > Thanks & Regards
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jun  8 12:08:47 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 8 Jun 2021 11:08:47 +0100
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>
 <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
Message-ID: <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>

Hello,

Please cc the list.
R-Help is not a code writing service, it's a mailing list for doubts on 
R code. I'm sorry but without answers to the below questions I am not 
going to answer.


What have you tried? What went wrong?


Hope this helps,

Rui Barradas

?s 04:01 de 08/06/21, Biplab Nayak escreveu:
> Hi Rui,
> 
> It's working fine. Now I need to achieve?the following:
> 
> * Default view of most recent distributions by most recent assignment 
> due date
> 
> * Filter by one or more students
> 
> Please help
> 
> Thanks & Regards
> Biplab Nayak
> 
> On Mon, Jun 7, 2021 at 6:51 PM Rui Barradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>     Thanks for the data.
>     There were some, not many, bugs that I have corrected below.
> 
> 
> 
>     library(tidyverse)
>     #library(stringr)? ? # attached with tidyverse
>     #library(readr)
>     library(shiny)
> 
>     ttclasses <- read_csv("~/tmp/ttclasses.csv")
> 
>     #Filter data
>     ttclasses <-ttclasses %>%
>      ? ?filter(str_detect(assessment, "Assignment"))
> 
>     # With the attached data this filter
>     # removes all rows so I have
>     # commented it out
>     #ttclasses <-ttclasses %>%
>     #? filter(str_detect(name, "Name"))
> 
>     ##Remove NA values.
>     ttclasses <-ttclasses %>% drop_na("score")
> 
>     #Convert to factor
>     ttclasses$assessment <- factor(ttclasses$assessment)
> 
>     # please see the formats in help("strptime")
>     ttclasses$due_date <-? as.Date(ttclasses$due_date, format = "%m/%d/%y")
>     ##ttclasses$name <- factor(ttclasses$name)
> 
>     # Define UI ----
>     ui <- fluidPage(
> 
>      ? ?# App title ----
>      ? ?titlePanel("Assessment Dashboard"),
> 
>      ? ?# Sidebar layout with input and output definitions ----
>      ? ?sidebarLayout(
> 
>      ? ? ?# Sidebar panel for inputs ----
>      ? ? ?sidebarPanel(
> 
>      ? ? ? ?# Input: Selector for variable to plot the grades for the
>     selected
>      ? ? ? ?# assignment ----
>      ? ? ? ? ?selectInput("assessment", "Assessment:",
>      ? ? ? ? ? ? ? ? ? ? ?c("Assignment 1" = "Assignment 1",
>      ? ? ? ? ? ? ? ? ? ? ? ?"Assignment 2" = "Assignment 2",
>      ? ? ? ? ? ? ? ? ? ? ? ?"Assignment 3" = "Assignment 3",
>      ? ? ? ? ? ? ? ? ? ? ? ?"Assignment 4" = "Assignment 4",
>      ? ? ? ? ? ? ? ? ? ? ? ?"Assignment 5" = "Assignment 5")),
>      ? ? ? ?selectInput("name", "Name:",
>      ? ? ? ? ? ? ? ? ? ?ttclasses[,2]),
> 
>      ? ? ? ?dateRangeInput("due_date",
>      ? ? ? ? ? ? ? ? ? ? ? "Due-Date:",start = max(ttclasses$due_date) ,
>      ? ? ? ? ? ? ? ? ? ? ? separator = " - ")
>      ? ? ?),
> 
>      ? ? ?# Main panel for displaying outputs ----
>      ? ? ?mainPanel(
> 
>      ? ? ? ?# Output: Plot of the requested variable against grade ----
>      ? ? ? ?plotOutput("gradePlot")
> 
>      ? ? ?)
>      ? ?)
>     )
> 
>     # Define server logic to plot? ----
>     server <- function(input, output) {
>      ? ?output$gradePlot <- renderPlot({
>      ? ? ?grade_ad = input$assessment
>      ? ? ?boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>      ? ? ? ? ? ? ?frame.plot=FALSE, horizontal=TRUE, col="magenta",
>     main=grade_ad)
>      ? ? ?ttclasses <-ttclasses %>%
>      ? ? ? ?filter(ttclasses$due_date >= input$due_date[1] &
>     ttclasses$due_date
>      ? ? ? ? ? ? ? <= input$due_date[2])
>      ? ?})
>     }
> 
>     # Create Shiny app ----
>     shinyApp(ui, server)
> 
> 
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
>     ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
>      > Hi All,
>      > I Need a bit of help to fix the code.
>      > Code:
>      > library(readr)
>      > library(shiny)
>      > ttclasses <- read_csv("ttclasses.csv")
>      >
>      > #Filter data
>      > library(stringr)
>      > library(dplyr)
>      > ttclasses <-ttclasses %>%
>      >? ? filter(str_detect(assessment, "Assignment"))
>      > ttclasses <-ttclasses %>%
>      >? ? filter(str_detect(name, "Name"))
>      >
>      > ##Remove NA values.
>      > library(tidyverse)
>      > ttclasses <-ttclasses %>% drop_na("score")
>      >
>      > #Convert to factor
>      > ttclasses$assessment <- as.factor(ttclasses$assessment)
>      > ttclasses$due_date =? as.Date(ttclasses$due_date, format =
>     "mm/dd/yy")
>      > ##ttclasses$name <- as.factor(ttclasses$name)
>      >
>      > # Define UI ----
>      > ui <- fluidPage(
>      >
>      >? ? # App title ----
>      >? ? titlePanel("Assessment Dashboard"),
>      >
>      >? ? # Sidebar layout with input and output definitions ----
>      >? ? sidebarLayout(
>      >
>      >? ? ? # Sidebar panel for inputs ----
>      >? ? ? sidebarPanel(
>      >
>      >? ? ? ? # Input: Selector for variable to plot the grades for the
>     selected
>      > assignment ----
>      >? ? ? ? selectInput("assessment", "Assessment:",
>      >? ? ? ? ? ? ? ? ? ? c("Assignment 1" = "Assignment 1",
>      >? ? ? ? ? ? ? ? ? ? ? "Assignment 2" = "Assignment 2",
>      >? ? ? ? ? ? ? ? ? ? ? "Assignment 3" = "Assignment 3",
>      >? ? ? ? ? ? ? ? ? ? ? "Assignment 4" = "Assignment 4",
>      >? ? ? ? ? ? ? ? ? ? ? "Assignment 5" = "Assignment 5")),
>      >? ? ? ? selectInput("name", "Name:",
>      >? ? ? ? ? ? ? ? ? ? ttclasses[,2]),
>      >
>      >? ? ? dateRangeInput("due_date",
>      >? ? ? ? ? ? ? ? ? ? ?"Due-Date:",start = max(ttclasses$due_date) ,
>      >? ? ? ? ? ? ? ? ? ? ?separator = " - ")
>      >? ? ? ),
>      >
>      >? ? ? # Main panel for displaying outputs ----
>      >? ? ? mainPanel(
>      >
>      >? ? ? ? # Output: Plot of the requested variable against grade ----
>      >? ? ? ? plotOutput("gradePlot")
>      >
>      >? ? ? )
>      >? ? )
>      > )
>      >
>      > # Define server logic to plot? ----
>      > server <- function(input, output) {
>      >? ? ? output$gradePlot <- renderPlot({
>      >? ? ? grade_ad = input$assessment
>      >? ? ? boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>      > frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
>      >? ? ? ttclasses <-ttclasses %>%
>      >? ? ? ? filter(ttclasses$due_date >= input$due_date[1] &
>     ttclasses$due_date
>      > <= input$due_date[2])
>      >? ? })
>      > }
>      >
>      > # Create Shiny app ----
>      > shinyApp(ui, server)
>      >
>      > Thanks & Regards
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
>


From b|p|@bn1 @end|ng |rom gm@||@com  Tue Jun  8 14:55:06 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Tue, 8 Jun 2021 09:55:06 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>
 <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
 <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>
Message-ID: <CANwr6KZKsbPri4Ns7y94JmvMGEYbQGggFAcqPJTHjwpiMgk3Vw@mail.gmail.com>

Hi Rui,

Please find the code(bold) below I was trying to do to achieve the
achieve:But somehow its not working.
1.Order assessment based on the latest due date so select input
automatically show the order of assessment name.
2.Filter based on the one name or multiple names in the  select input

library(tidyverse)
#library(stringr)    # attached with tidyverse
#library(readr)
library(shiny)
library(dplyr)

ttclasses <- read_csv("~/tmp/ttclasses.csv")

#Filter data
ttclasses <-ttclasses %>%
   filter(str_detect(assessment, "Assignment"))

# With the attached data this filter
# removes all rows so I have
# commented it out


*ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))*
##Remove NA values.
ttclasses <-ttclasses %>% drop_na("score")

*## Sort  assessment based on max due_date*
*  ttclasses  <- ttclasses [order( - due_date, assessment ),]*

#Convert to factor
ttclasses$assessment <- factor(ttclasses$assessment)

# please see the formats in help("strptime")
ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
*ttclasses$name <- factor(ttclasses$name)*

# Define UI ----
ui <- fluidPage(

   # App title ----
   titlePanel("Assessment Dashboard"),

   # Sidebar layout with input and output definitions ----
   sidebarLayout(

     # Sidebar panel for inputs ----
     sidebarPanel(

       # Input: Selector for variable to plot the grades for the selected
       # assignment ----

         selectInput("assessment", "Assessment:",
                     c("Assignment 1" = "Assignment 1",
                       "Assignment 2" = "Assignment 2",
                       "Assignment 3" = "Assignment 3",
                       "Assignment 4" = "Assignment 4",
                       "Assignment 5" = "Assignment 5")),
       selectInput("name", "Name:",
                   ttclasses[,2]),

       dateRangeInput("due_date",
                      "Due-Date:",start = max(ttclasses$due_date) ,
                      separator = " - ")
     ),

     # Main panel for displaying outputs ----
     mainPanel(

       # Output: Plot of the requested variable against grade ----
       plotOutput("gradePlot")

     )
   )
)

# Define server logic to plot  ----
server <- function(input, output) {
   output$gradePlot <- renderPlot({
     grade_ad = input$assessment
     boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
             frame.plot=FALSE, horizontal=TRUE, col="magenta",
main=grade_ad)
     ttclasses <-ttclasses %>%
       filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
              <= input$due_date[2])
   })
}

# Create Shiny app ----
shinyApp(ui, server)


Thanks & Regards
Biplab Nayak

On Tue, Jun 8, 2021 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Please cc the list.
> R-Help is not a code writing service, it's a mailing list for doubts on
> R code. I'm sorry but without answers to the below questions I am not
> going to answer.
>
>
> What have you tried? What went wrong?
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 04:01 de 08/06/21, Biplab Nayak escreveu:
> > Hi Rui,
> >
> > It's working fine. Now I need to achieve the following:
> >
> > * Default view of most recent distributions by most recent assignment
> > due date
> >
> > * Filter by one or more students
> >
> > Please help
> >
> > Thanks & Regards
> > Biplab Nayak
> >
> > On Mon, Jun 7, 2021 at 6:51 PM Rui Barradas <ruipbarradas at sapo.pt
> > <mailto:ruipbarradas at sapo.pt>> wrote:
> >
> >     Hello,
> >
> >     Thanks for the data.
> >     There were some, not many, bugs that I have corrected below.
> >
> >
> >
> >     library(tidyverse)
> >     #library(stringr)    # attached with tidyverse
> >     #library(readr)
> >     library(shiny)
> >
> >     ttclasses <- read_csv("~/tmp/ttclasses.csv")
> >
> >     #Filter data
> >     ttclasses <-ttclasses %>%
> >         filter(str_detect(assessment, "Assignment"))
> >
> >     # With the attached data this filter
> >     # removes all rows so I have
> >     # commented it out
> >     #ttclasses <-ttclasses %>%
> >     #  filter(str_detect(name, "Name"))
> >
> >     ##Remove NA values.
> >     ttclasses <-ttclasses %>% drop_na("score")
> >
> >     #Convert to factor
> >     ttclasses$assessment <- factor(ttclasses$assessment)
> >
> >     # please see the formats in help("strptime")
> >     ttclasses$due_date <-  as.Date(ttclasses$due_date, format =
> "%m/%d/%y")
> >     ##ttclasses$name <- factor(ttclasses$name)
> >
> >     # Define UI ----
> >     ui <- fluidPage(
> >
> >         # App title ----
> >         titlePanel("Assessment Dashboard"),
> >
> >         # Sidebar layout with input and output definitions ----
> >         sidebarLayout(
> >
> >           # Sidebar panel for inputs ----
> >           sidebarPanel(
> >
> >             # Input: Selector for variable to plot the grades for the
> >     selected
> >             # assignment ----
> >               selectInput("assessment", "Assessment:",
> >                           c("Assignment 1" = "Assignment 1",
> >                             "Assignment 2" = "Assignment 2",
> >                             "Assignment 3" = "Assignment 3",
> >                             "Assignment 4" = "Assignment 4",
> >                             "Assignment 5" = "Assignment 5")),
> >             selectInput("name", "Name:",
> >                         ttclasses[,2]),
> >
> >             dateRangeInput("due_date",
> >                            "Due-Date:",start = max(ttclasses$due_date) ,
> >                            separator = " - ")
> >           ),
> >
> >           # Main panel for displaying outputs ----
> >           mainPanel(
> >
> >             # Output: Plot of the requested variable against grade ----
> >             plotOutput("gradePlot")
> >
> >           )
> >         )
> >     )
> >
> >     # Define server logic to plot  ----
> >     server <- function(input, output) {
> >         output$gradePlot <- renderPlot({
> >           grade_ad = input$assessment
> >           boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> >                   frame.plot=FALSE, horizontal=TRUE, col="magenta",
> >     main=grade_ad)
> >           ttclasses <-ttclasses %>%
> >             filter(ttclasses$due_date >= input$due_date[1] &
> >     ttclasses$due_date
> >                    <= input$due_date[2])
> >         })
> >     }
> >
> >     # Create Shiny app ----
> >     shinyApp(ui, server)
> >
> >
> >
> >     Hope this helps,
> >
> >     Rui Barradas
> >
> >     ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> >      > Hi All,
> >      > I Need a bit of help to fix the code.
> >      > Code:
> >      > library(readr)
> >      > library(shiny)
> >      > ttclasses <- read_csv("ttclasses.csv")
> >      >
> >      > #Filter data
> >      > library(stringr)
> >      > library(dplyr)
> >      > ttclasses <-ttclasses %>%
> >      >    filter(str_detect(assessment, "Assignment"))
> >      > ttclasses <-ttclasses %>%
> >      >    filter(str_detect(name, "Name"))
> >      >
> >      > ##Remove NA values.
> >      > library(tidyverse)
> >      > ttclasses <-ttclasses %>% drop_na("score")
> >      >
> >      > #Convert to factor
> >      > ttclasses$assessment <- as.factor(ttclasses$assessment)
> >      > ttclasses$due_date =  as.Date(ttclasses$due_date, format =
> >     "mm/dd/yy")
> >      > ##ttclasses$name <- as.factor(ttclasses$name)
> >      >
> >      > # Define UI ----
> >      > ui <- fluidPage(
> >      >
> >      >    # App title ----
> >      >    titlePanel("Assessment Dashboard"),
> >      >
> >      >    # Sidebar layout with input and output definitions ----
> >      >    sidebarLayout(
> >      >
> >      >      # Sidebar panel for inputs ----
> >      >      sidebarPanel(
> >      >
> >      >        # Input: Selector for variable to plot the grades for the
> >     selected
> >      > assignment ----
> >      >        selectInput("assessment", "Assessment:",
> >      >                    c("Assignment 1" = "Assignment 1",
> >      >                      "Assignment 2" = "Assignment 2",
> >      >                      "Assignment 3" = "Assignment 3",
> >      >                      "Assignment 4" = "Assignment 4",
> >      >                      "Assignment 5" = "Assignment 5")),
> >      >        selectInput("name", "Name:",
> >      >                    ttclasses[,2]),
> >      >
> >      >      dateRangeInput("due_date",
> >      >                     "Due-Date:",start = max(ttclasses$due_date) ,
> >      >                     separator = " - ")
> >      >      ),
> >      >
> >      >      # Main panel for displaying outputs ----
> >      >      mainPanel(
> >      >
> >      >        # Output: Plot of the requested variable against grade ----
> >      >        plotOutput("gradePlot")
> >      >
> >      >      )
> >      >    )
> >      > )
> >      >
> >      > # Define server logic to plot  ----
> >      > server <- function(input, output) {
> >      >      output$gradePlot <- renderPlot({
> >      >      grade_ad = input$assessment
> >      >      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> >      > frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
> >      >      ttclasses <-ttclasses %>%
> >      >        filter(ttclasses$due_date >= input$due_date[1] &
> >     ttclasses$due_date
> >      > <= input$due_date[2])
> >      >    })
> >      > }
> >      >
> >      > # Create Shiny app ----
> >      > shinyApp(ui, server)
> >      >
> >      > Thanks & Regards
> >      >
> >      >       [[alternative HTML version deleted]]
> >      >
> >      > ______________________________________________
> >      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> >     -- To UNSUBSCRIBE and more, see
> >      > https://stat.ethz.ch/mailman/listinfo/r-help
> >     <https://stat.ethz.ch/mailman/listinfo/r-help>
> >      > PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     <http://www.R-project.org/posting-guide.html>
> >      > and provide commented, minimal, self-contained, reproducible code.
> >      >
> >
>

	[[alternative HTML version deleted]]


From Ju@t|n@A||en @end|ng |rom bregroup@com  Tue Jun  8 12:44:14 2021
From: Ju@t|n@A||en @end|ng |rom bregroup@com (Allen, Justin)
Date: Tue, 8 Jun 2021 10:44:14 +0000
Subject: [R] foreign package read.spss() and NA levels
In-Reply-To: <32cc1d69-47d1-5a67-fc87-43f257839848@statistik.tu-dortmund.de>
References: <LO2P265MB31178ADC394E34613C9212E5E4239@LO2P265MB3117.GBRP265.PROD.OUTLOOK.COM>,
 <32cc1d69-47d1-5a67-fc87-43f257839848@statistik.tu-dortmund.de>
Message-ID: <LO2P265MB3117C0730C7FEFAF58DDB5FCE4379@LO2P265MB3117.GBRP265.PROD.OUTLOOK.COM>

Hi Uwe,

Thank you so much for your reply, I am sorry to waste your time, but after another look, the error seemed to be caused with how I had created the '.sav' file I was using. It was converting one of the factor levels which wasn't NA to the factor level "NA", but the problem was in the dataset as I said.

Many Thanks,

Justin

Justin Allen
Housing Consultant, BRE<https://bregroup.com/>
T: 07807122647

________________________________
From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Sent: 04 June 2021 10:57
To: Allen, Justin <Justin.Allen at bregroup.com>; R-help at r-project.org <R-help at r-project.org>
Cc: Whiteley, Jonathon <Jon.Whiteley at bregroup.com>; Foster, Helen <Helen.Foster at bregroup.com>
Subject: Re: [R] foreign package read.spss() and NA levels



On 27.05.2021 12:27, Allen, Justin wrote:
> Hi All,
>
> Wanted to report what may be a bug or possibly an oversight, but I am unsure, in the "foreign" packages in the read.spss() command, https://cran.r-project.org/web/packages/foreign/index.html. When running the following code,
>
> input <- read.spss("[.sav file location]", to.data.frame = TRUE)
> str(input)
>
> The read.spss() seems to be applying addNA() to factors so NA is being set as a level, and there seems to be no way to get read.spss() to bring factors in without doing this. This seems to be a recent change as read.spss() was not doing this as of a few months ago. None of the arguments in read.spss() seem to also stop this behaviour. I am currently on the most recent version of both R and the package, as of 27/05/21, and am using RStudio Version 1.4.1106.

Within R (I do not use RStudio) and even with the most recent R-devel, I see

(sav <- system.file("files", "electric.sav", package = "foreign"))
dat <- read.spss(file=sav, to.data.frame=TRUE)
table(dat$DAYOFWK)

#  SUNDAY   MONDAY  TUESDAY WEDNSDAY THURSDAY   FRIDAY SATURDAY
#      19       11       19       17       15       13       16

table(dat$DAYOFWK, useNA="always")

#  SUNDAY   MONDAY  TUESDAY WEDNSDAY THURSDAY   FRIDAY SATURDAY     <NA>
#      19       11       19       17       15       13       16      130

So exactly what you expected?

If you rather use

dat <- read.spss(file=sav, to.data.frame=TRUE, use.missings=FALSE)

table(dat$DAYOFWK, useNA="always")

you see the NA values are converted to a factor level called "MISSING".

If it is different on your end, pelase try in plain R, tell us the
version of R / foreign and show an example data file where this happens.

Best,
Uwe Ligges



>
> Any thoughts?
>
> Many Thanks,
>
> Justin Allen
>
> p.s. your continued maintenance and additions to R and its packages have been infinitely useful in my work and life and thank for that.
>
> Justin Allen
> Housing Consultant, BRE<https://bregroup.com/>
> T: 07807122647
>
> ________________________________
> Follow BRE on Twitter: @BRE_Group<http://twitter.com/BRE_Group>
> ________________________________
> Privileged and confidential information and/or copyright material may be contained in this e-mail. If you are not the intended addressee you may not copy or deliver it to anyone else or use it in any unauthorised manner. To do so is prohibited and may be unlawful. If you have received this e-mail by mistake, please advise the sender immediately by return e-mail and destroy all copies. Thank you.
>
> Building Research Establishment Ltd, Registered under number 3319324 in England and Wales. VAT Registration No GB 689 9499 27 www.bregroup.com<http://www.bregroup.com>
> BRE Global Limited, Registered under number 8961297 in England and Wales. www.breglobal.com<http://www.breglobal.com>
> Building Research Establishment and BRE Global are subsidiaries of the BRE Trust.
> BRE Trust is a company limited by guarantee, Registered under number 3282856 in England and Wales, and registered as a charity in England (no. 1092193) and in Scotland (no. SC039320). www.bretrust.org.uk<http://www.bretrust.org.uk>
> Registered Offices: Bucknalls Lane, Garston, Watford, Hertfordshire WD25 9XX - Travelling to BRE: see www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/>>
> ________________________________
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

________________________________
Follow BRE on Twitter: @BRE_Group<http://twitter.com/BRE_Group>
________________________________
Privileged and confidential information and/or copyright material may be contained in this e-mail. If you are not the intended addressee you may not copy or deliver it to anyone else or use it in any unauthorised manner. To do so is prohibited and may be unlawful. If you have received this e-mail by mistake, please advise the sender immediately by return e-mail and destroy all copies. Thank you.

Building Research Establishment Ltd, Registered under number 3319324 in England and Wales. VAT Registration No GB 689 9499 27 www.bregroup.com<http://www.bregroup.com>
BRE Global Limited, Registered under number 8961297 in England and Wales. www.breglobal.com<http://www.breglobal.com>
Building Research Establishment and BRE Global are subsidiaries of the BRE Trust.
BRE Trust is a company limited by guarantee, Registered under number 3282856 in England and Wales, and registered as a charity in England (no. 1092193) and in Scotland (no. SC039320). www.bretrust.org.uk<http://www.bretrust.org.uk>
Registered Offices: Bucknalls Lane, Garston, Watford, Hertfordshire WD25 9XX - Travelling to BRE: see www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/>
________________________________

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun  8 18:07:19 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 8 Jun 2021 09:07:19 -0700
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KZKsbPri4Ns7y94JmvMGEYbQGggFAcqPJTHjwpiMgk3Vw@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>
 <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
 <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>
 <CANwr6KZKsbPri4Ns7y94JmvMGEYbQGggFAcqPJTHjwpiMgk3Vw@mail.gmail.com>
Message-ID: <CAGxFJbRv7n4ZU2Ya9UnmKAJ8HKZbWGmK3XY_Nh0z-+EuP=c-2A@mail.gmail.com>

I do not wish to be involved in this thread other than to note that you
were, I believe, asked not to post in HTML. And because you did, you will
find that "Bold" highlighting does not exist in your text below. I have no
idea whether that matters for your query or not, but there it is.


Bert Gunter



On Tue, Jun 8, 2021 at 8:13 AM Biplab Nayak <biplabn1 at gmail.com> wrote:

> Hi Rui,
>
> Please find the code(bold) below I was trying to do to achieve the
> achieve:But somehow its not working.
> 1.Order assessment based on the latest due date so select input
> automatically show the order of assessment name.
> 2.Filter based on the one name or multiple names in the  select input
>
> library(tidyverse)
> #library(stringr)    # attached with tidyverse
> #library(readr)
> library(shiny)
> library(dplyr)
>
> ttclasses <- read_csv("~/tmp/ttclasses.csv")
>
> #Filter data
> ttclasses <-ttclasses %>%
>    filter(str_detect(assessment, "Assignment"))
>
> # With the attached data this filter
> # removes all rows so I have
> # commented it out
>
>
> *ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))*
> ##Remove NA values.
> ttclasses <-ttclasses %>% drop_na("score")
>
> *## Sort  assessment based on max due_date*
> *  ttclasses  <- ttclasses [order( - due_date, assessment ),]*
>
> #Convert to factor
> ttclasses$assessment <- factor(ttclasses$assessment)
>
> # please see the formats in help("strptime")
> ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
> *ttclasses$name <- factor(ttclasses$name)*
>
> # Define UI ----
> ui <- fluidPage(
>
>    # App title ----
>    titlePanel("Assessment Dashboard"),
>
>    # Sidebar layout with input and output definitions ----
>    sidebarLayout(
>
>      # Sidebar panel for inputs ----
>      sidebarPanel(
>
>        # Input: Selector for variable to plot the grades for the selected
>        # assignment ----
>
>          selectInput("assessment", "Assessment:",
>                      c("Assignment 1" = "Assignment 1",
>                        "Assignment 2" = "Assignment 2",
>                        "Assignment 3" = "Assignment 3",
>                        "Assignment 4" = "Assignment 4",
>                        "Assignment 5" = "Assignment 5")),
>        selectInput("name", "Name:",
>                    ttclasses[,2]),
>
>        dateRangeInput("due_date",
>                       "Due-Date:",start = max(ttclasses$due_date) ,
>                       separator = " - ")
>      ),
>
>      # Main panel for displaying outputs ----
>      mainPanel(
>
>        # Output: Plot of the requested variable against grade ----
>        plotOutput("gradePlot")
>
>      )
>    )
> )
>
> # Define server logic to plot  ----
> server <- function(input, output) {
>    output$gradePlot <- renderPlot({
>      grade_ad = input$assessment
>      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>              frame.plot=FALSE, horizontal=TRUE, col="magenta",
> main=grade_ad)
>      ttclasses <-ttclasses %>%
>        filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
>               <= input$due_date[2])
>    })
> }
>
> # Create Shiny app ----
> shinyApp(ui, server)
>
>
> Thanks & Regards
> Biplab Nayak
>
> On Tue, Jun 8, 2021 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> > Hello,
> >
> > Please cc the list.
> > R-Help is not a code writing service, it's a mailing list for doubts on
> > R code. I'm sorry but without answers to the below questions I am not
> > going to answer.
> >
> >
> > What have you tried? What went wrong?
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> > ?s 04:01 de 08/06/21, Biplab Nayak escreveu:
> > > Hi Rui,
> > >
> > > It's working fine. Now I need to achieve the following:
> > >
> > > * Default view of most recent distributions by most recent assignment
> > > due date
> > >
> > > * Filter by one or more students
> > >
> > > Please help
> > >
> > > Thanks & Regards
> > > Biplab Nayak
> > >
> > > On Mon, Jun 7, 2021 at 6:51 PM Rui Barradas <ruipbarradas at sapo.pt
> > > <mailto:ruipbarradas at sapo.pt>> wrote:
> > >
> > >     Hello,
> > >
> > >     Thanks for the data.
> > >     There were some, not many, bugs that I have corrected below.
> > >
> > >
> > >
> > >     library(tidyverse)
> > >     #library(stringr)    # attached with tidyverse
> > >     #library(readr)
> > >     library(shiny)
> > >
> > >     ttclasses <- read_csv("~/tmp/ttclasses.csv")
> > >
> > >     #Filter data
> > >     ttclasses <-ttclasses %>%
> > >         filter(str_detect(assessment, "Assignment"))
> > >
> > >     # With the attached data this filter
> > >     # removes all rows so I have
> > >     # commented it out
> > >     #ttclasses <-ttclasses %>%
> > >     #  filter(str_detect(name, "Name"))
> > >
> > >     ##Remove NA values.
> > >     ttclasses <-ttclasses %>% drop_na("score")
> > >
> > >     #Convert to factor
> > >     ttclasses$assessment <- factor(ttclasses$assessment)
> > >
> > >     # please see the formats in help("strptime")
> > >     ttclasses$due_date <-  as.Date(ttclasses$due_date, format =
> > "%m/%d/%y")
> > >     ##ttclasses$name <- factor(ttclasses$name)
> > >
> > >     # Define UI ----
> > >     ui <- fluidPage(
> > >
> > >         # App title ----
> > >         titlePanel("Assessment Dashboard"),
> > >
> > >         # Sidebar layout with input and output definitions ----
> > >         sidebarLayout(
> > >
> > >           # Sidebar panel for inputs ----
> > >           sidebarPanel(
> > >
> > >             # Input: Selector for variable to plot the grades for the
> > >     selected
> > >             # assignment ----
> > >               selectInput("assessment", "Assessment:",
> > >                           c("Assignment 1" = "Assignment 1",
> > >                             "Assignment 2" = "Assignment 2",
> > >                             "Assignment 3" = "Assignment 3",
> > >                             "Assignment 4" = "Assignment 4",
> > >                             "Assignment 5" = "Assignment 5")),
> > >             selectInput("name", "Name:",
> > >                         ttclasses[,2]),
> > >
> > >             dateRangeInput("due_date",
> > >                            "Due-Date:",start = max(ttclasses$due_date)
> ,
> > >                            separator = " - ")
> > >           ),
> > >
> > >           # Main panel for displaying outputs ----
> > >           mainPanel(
> > >
> > >             # Output: Plot of the requested variable against grade ----
> > >             plotOutput("gradePlot")
> > >
> > >           )
> > >         )
> > >     )
> > >
> > >     # Define server logic to plot  ----
> > >     server <- function(input, output) {
> > >         output$gradePlot <- renderPlot({
> > >           grade_ad = input$assessment
> > >           boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> > >                   frame.plot=FALSE, horizontal=TRUE, col="magenta",
> > >     main=grade_ad)
> > >           ttclasses <-ttclasses %>%
> > >             filter(ttclasses$due_date >= input$due_date[1] &
> > >     ttclasses$due_date
> > >                    <= input$due_date[2])
> > >         })
> > >     }
> > >
> > >     # Create Shiny app ----
> > >     shinyApp(ui, server)
> > >
> > >
> > >
> > >     Hope this helps,
> > >
> > >     Rui Barradas
> > >
> > >     ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> > >      > Hi All,
> > >      > I Need a bit of help to fix the code.
> > >      > Code:
> > >      > library(readr)
> > >      > library(shiny)
> > >      > ttclasses <- read_csv("ttclasses.csv")
> > >      >
> > >      > #Filter data
> > >      > library(stringr)
> > >      > library(dplyr)
> > >      > ttclasses <-ttclasses %>%
> > >      >    filter(str_detect(assessment, "Assignment"))
> > >      > ttclasses <-ttclasses %>%
> > >      >    filter(str_detect(name, "Name"))
> > >      >
> > >      > ##Remove NA values.
> > >      > library(tidyverse)
> > >      > ttclasses <-ttclasses %>% drop_na("score")
> > >      >
> > >      > #Convert to factor
> > >      > ttclasses$assessment <- as.factor(ttclasses$assessment)
> > >      > ttclasses$due_date =  as.Date(ttclasses$due_date, format =
> > >     "mm/dd/yy")
> > >      > ##ttclasses$name <- as.factor(ttclasses$name)
> > >      >
> > >      > # Define UI ----
> > >      > ui <- fluidPage(
> > >      >
> > >      >    # App title ----
> > >      >    titlePanel("Assessment Dashboard"),
> > >      >
> > >      >    # Sidebar layout with input and output definitions ----
> > >      >    sidebarLayout(
> > >      >
> > >      >      # Sidebar panel for inputs ----
> > >      >      sidebarPanel(
> > >      >
> > >      >        # Input: Selector for variable to plot the grades for the
> > >     selected
> > >      > assignment ----
> > >      >        selectInput("assessment", "Assessment:",
> > >      >                    c("Assignment 1" = "Assignment 1",
> > >      >                      "Assignment 2" = "Assignment 2",
> > >      >                      "Assignment 3" = "Assignment 3",
> > >      >                      "Assignment 4" = "Assignment 4",
> > >      >                      "Assignment 5" = "Assignment 5")),
> > >      >        selectInput("name", "Name:",
> > >      >                    ttclasses[,2]),
> > >      >
> > >      >      dateRangeInput("due_date",
> > >      >                     "Due-Date:",start = max(ttclasses$due_date)
> ,
> > >      >                     separator = " - ")
> > >      >      ),
> > >      >
> > >      >      # Main panel for displaying outputs ----
> > >      >      mainPanel(
> > >      >
> > >      >        # Output: Plot of the requested variable against grade
> ----
> > >      >        plotOutput("gradePlot")
> > >      >
> > >      >      )
> > >      >    )
> > >      > )
> > >      >
> > >      > # Define server logic to plot  ----
> > >      > server <- function(input, output) {
> > >      >      output$gradePlot <- renderPlot({
> > >      >      grade_ad = input$assessment
> > >      >      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> > >      > frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
> > >      >      ttclasses <-ttclasses %>%
> > >      >        filter(ttclasses$due_date >= input$due_date[1] &
> > >     ttclasses$due_date
> > >      > <= input$due_date[2])
> > >      >    })
> > >      > }
> > >      >
> > >      > # Create Shiny app ----
> > >      > shinyApp(ui, server)
> > >      >
> > >      > Thanks & Regards
> > >      >
> > >      >       [[alternative HTML version deleted]]
> > >      >
> > >      > ______________________________________________
> > >      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> > >     -- To UNSUBSCRIBE and more, see
> > >      > https://stat.ethz.ch/mailman/listinfo/r-help
> > >     <https://stat.ethz.ch/mailman/listinfo/r-help>
> > >      > PLEASE do read the posting guide
> > >     http://www.R-project.org/posting-guide.html
> > >     <http://www.R-project.org/posting-guide.html>
> > >      > and provide commented, minimal, self-contained, reproducible
> code.
> > >      >
> > >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com  Tue Jun  8 20:03:30 2021
From: bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com (Bhaskar Mitra)
Date: Tue, 8 Jun 2021 11:03:30 -0700
Subject: [R] Help in modifying code to extract data from url
In-Reply-To: <29bb1bc4-be95-b9c6-4a41-bcb5dbee3b87@comcast.net>
References: <CAEGXkYUynpgLAZ=Y9tUf0BOB1c9eAQmdrKpgE=tM2FEfP6hpAw@mail.gmail.com>
 <CA+8X3fV+mGCYa1naoebsuRknhUKsOrT_joDuihnR=zfzxeGfCA@mail.gmail.com>
 <29bb1bc4-be95-b9c6-4a41-bcb5dbee3b87@comcast.net>
Message-ID: <CAEGXkYXJU1G0W4rCT0hHPBPsc+xiMbK-UU+J10m2ZQXbiHrc8A@mail.gmail.com>

Thanks everyone for the feedbacks. This is really helpful.

bhaskar

On Sat, May 22, 2021 at 11:56 AM David Winsemius <dwinsemius at comcast.net>
wrote:

> Several authors hav addressed this problem with names that resemble
> "rbindfill". In my machine I find four instances:
>
> ??rbindfill
>
> Help pages:
> ffbase::ffdfrbind.fill        rbind for ffdf where missing columns are
> added if not available in one of the ffdf objects
> plyr::rbind.fill        Combine data.frames by row, filling in missing
> columns.
> plyr::rbind.fill.matrix        Bind matrices by row, and fill missing
> columns with NA.
> rockchalk::rbindFill        Stack together data frames
>
>
> --
>
> David.
>
> On 5/20/21 2:19 AM, Jim Lemon wrote:
> > Hi Bhaskar,
> > If you are using read.table or similar, see the "fill=" argument.
> >
> > Jim
> >
> > On Thu, May 20, 2021 at 9:54 AM Bhaskar Mitra <bhaskar.kolkata at gmail.com>
> wrote:
> >> Hello Everyone,
> >>
> >> I am trying to extract data from a url. The codes work well when the
> >> data structure is as follows:
> >>
> >> X Y
> >> 1 2
> >> 1 5
> >> 1 6
> >> 1 7
> >> 3 4
> >>
> >> However, the code fails when the data structure has no number
> >> under the 2nd column (shown below).I get the following error:
> >>
> >> "Error in data.frame(..., check.names = FALSE) :
> >>    arguments imply differing number of rows: 242, 241"
> >>
> >>
> >> X Y
> >> 1 2
> >> 1
> >> 1
> >> 1 7
> >> 3 4
> >>
> >> Can anyone please help me in how I can modify the codes ( shown below)
> to
> >> adjust for the above mentioned condition
> >> in the data structure.
> >>
> >> library(rjson)
> >>
> >> url <- "abcd.com"
> >> json_data <- fromJSON(file= url)
> >> d3 <- lapply(json_data[[2]], function(x) c(x["data"]))
> >> d3 <- do.call(rbind, d3)
> >> X_Dataframe = as.data.frame(unlist(d3[[1]]))
> >> b <- do.call("cbind", split(X_Dataframe, rep(c(1, 2), length.out =
> >> nrow(X_Dataframe))))
> >>
> >>
> >> regards,
> >> bhaskar
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com  Tue Jun  8 20:10:13 2021
From: bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com (Bhaskar Mitra)
Date: Tue, 8 Jun 2021 11:10:13 -0700
Subject: [R] Converting data from weekly interval to daily interval
Message-ID: <CAEGXkYVcVm5VWQ0B-veQcXZcSKt+1A2RUJMJ=wh+LPrcO7LUBw@mail.gmail.com>

Hello Everyone,

I have data at weekly intervals.
The data structure is something like this.

df1 <-
date            a
1/7/2020     3
1/14/2020   6
1/21/2021   7

I would like to convert the data from the weekly
interval to the daily interval. Something like this.

date            a
1/7/2020    0.5
1/8/2020    0.3
1/9/2020    0.7


I am using the following codes

d1 <- nrow(df1)

df2 <- data.frame(matrix(NA, nrow = (d1)*7, ncol = 1)

inc <- 0
for (i in 1:nrow(df1)) {
  for (j in 1:7) {
    inc <- inc + 1
    df2[inc,1] <- df1[i,1]/7
  }
}
rm(df1)



However, the sum of the daily values generated in df2 differ
from the original value in the df1 data frame. There is a 1-2% discrepancy.
I would appreciate it if someone could suggest how to improve the codes.

Thanks,
Bhaskar

	[[alternative HTML version deleted]]


From b|p|@bn1 @end|ng |rom gm@||@com  Tue Jun  8 19:00:04 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Tue, 8 Jun 2021 14:00:04 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CAGxFJbRv7n4ZU2Ya9UnmKAJ8HKZbWGmK3XY_Nh0z-+EuP=c-2A@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>
 <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
 <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>
 <CANwr6KZKsbPri4Ns7y94JmvMGEYbQGggFAcqPJTHjwpiMgk3Vw@mail.gmail.com>
 <CAGxFJbRv7n4ZU2Ya9UnmKAJ8HKZbWGmK3XY_Nh0z-+EuP=c-2A@mail.gmail.com>
Message-ID: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>

Hi Bert,

I have attached the word file with the R code.

Thanks & Regards
Biplab Nayak

On Tue, Jun 8, 2021 at 1:07 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I do not wish to be involved in this thread other than to note that you
> were, I believe, asked not to post in HTML. And because you did, you will
> find that "Bold" highlighting does not exist in your text below. I have no
> idea whether that matters for your query or not, but there it is.
>
>
> Bert Gunter
>
>
>
> On Tue, Jun 8, 2021 at 8:13 AM Biplab Nayak <biplabn1 at gmail.com> wrote:
>
>> Hi Rui,
>>
>> Please find the code(bold) below I was trying to do to achieve the
>> achieve:But somehow its not working.
>> 1.Order assessment based on the latest due date so select input
>> automatically show the order of assessment name.
>> 2.Filter based on the one name or multiple names in the  select input
>>
>> library(tidyverse)
>> #library(stringr)    # attached with tidyverse
>> #library(readr)
>> library(shiny)
>> library(dplyr)
>>
>> ttclasses <- read_csv("~/tmp/ttclasses.csv")
>>
>> #Filter data
>> ttclasses <-ttclasses %>%
>>    filter(str_detect(assessment, "Assignment"))
>>
>> # With the attached data this filter
>> # removes all rows so I have
>> # commented it out
>>
>>
>> *ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))*
>> ##Remove NA values.
>> ttclasses <-ttclasses %>% drop_na("score")
>>
>> *## Sort  assessment based on max due_date*
>> *  ttclasses  <- ttclasses [order( - due_date, assessment ),]*
>>
>> #Convert to factor
>> ttclasses$assessment <- factor(ttclasses$assessment)
>>
>> # please see the formats in help("strptime")
>> ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
>> *ttclasses$name <- factor(ttclasses$name)*
>>
>> # Define UI ----
>> ui <- fluidPage(
>>
>>    # App title ----
>>    titlePanel("Assessment Dashboard"),
>>
>>    # Sidebar layout with input and output definitions ----
>>    sidebarLayout(
>>
>>      # Sidebar panel for inputs ----
>>      sidebarPanel(
>>
>>        # Input: Selector for variable to plot the grades for the selected
>>        # assignment ----
>>
>>          selectInput("assessment", "Assessment:",
>>                      c("Assignment 1" = "Assignment 1",
>>                        "Assignment 2" = "Assignment 2",
>>                        "Assignment 3" = "Assignment 3",
>>                        "Assignment 4" = "Assignment 4",
>>                        "Assignment 5" = "Assignment 5")),
>>        selectInput("name", "Name:",
>>                    ttclasses[,2]),
>>
>>        dateRangeInput("due_date",
>>                       "Due-Date:",start = max(ttclasses$due_date) ,
>>                       separator = " - ")
>>      ),
>>
>>      # Main panel for displaying outputs ----
>>      mainPanel(
>>
>>        # Output: Plot of the requested variable against grade ----
>>        plotOutput("gradePlot")
>>
>>      )
>>    )
>> )
>>
>> # Define server logic to plot  ----
>> server <- function(input, output) {
>>    output$gradePlot <- renderPlot({
>>      grade_ad = input$assessment
>>      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>>              frame.plot=FALSE, horizontal=TRUE, col="magenta",
>> main=grade_ad)
>>      ttclasses <-ttclasses %>%
>>        filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
>>               <= input$due_date[2])
>>    })
>> }
>>
>> # Create Shiny app ----
>> shinyApp(ui, server)
>>
>>
>> Thanks & Regards
>> Biplab Nayak
>>
>> On Tue, Jun 8, 2021 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>> > Hello,
>> >
>> > Please cc the list.
>> > R-Help is not a code writing service, it's a mailing list for doubts on
>> > R code. I'm sorry but without answers to the below questions I am not
>> > going to answer.
>> >
>> >
>> > What have you tried? What went wrong?
>> >
>> >
>> > Hope this helps,
>> >
>> > Rui Barradas
>> >
>> > ?s 04:01 de 08/06/21, Biplab Nayak escreveu:
>> > > Hi Rui,
>> > >
>> > > It's working fine. Now I need to achieve the following:
>> > >
>> > > * Default view of most recent distributions by most recent assignment
>> > > due date
>> > >
>> > > * Filter by one or more students
>> > >
>> > > Please help
>> > >
>> > > Thanks & Regards
>> > > Biplab Nayak
>> > >
>> > > On Mon, Jun 7, 2021 at 6:51 PM Rui Barradas <ruipbarradas at sapo.pt
>> > > <mailto:ruipbarradas at sapo.pt>> wrote:
>> > >
>> > >     Hello,
>> > >
>> > >     Thanks for the data.
>> > >     There were some, not many, bugs that I have corrected below.
>> > >
>> > >
>> > >
>> > >     library(tidyverse)
>> > >     #library(stringr)    # attached with tidyverse
>> > >     #library(readr)
>> > >     library(shiny)
>> > >
>> > >     ttclasses <- read_csv("~/tmp/ttclasses.csv")
>> > >
>> > >     #Filter data
>> > >     ttclasses <-ttclasses %>%
>> > >         filter(str_detect(assessment, "Assignment"))
>> > >
>> > >     # With the attached data this filter
>> > >     # removes all rows so I have
>> > >     # commented it out
>> > >     #ttclasses <-ttclasses %>%
>> > >     #  filter(str_detect(name, "Name"))
>> > >
>> > >     ##Remove NA values.
>> > >     ttclasses <-ttclasses %>% drop_na("score")
>> > >
>> > >     #Convert to factor
>> > >     ttclasses$assessment <- factor(ttclasses$assessment)
>> > >
>> > >     # please see the formats in help("strptime")
>> > >     ttclasses$due_date <-  as.Date(ttclasses$due_date, format =
>> > "%m/%d/%y")
>> > >     ##ttclasses$name <- factor(ttclasses$name)
>> > >
>> > >     # Define UI ----
>> > >     ui <- fluidPage(
>> > >
>> > >         # App title ----
>> > >         titlePanel("Assessment Dashboard"),
>> > >
>> > >         # Sidebar layout with input and output definitions ----
>> > >         sidebarLayout(
>> > >
>> > >           # Sidebar panel for inputs ----
>> > >           sidebarPanel(
>> > >
>> > >             # Input: Selector for variable to plot the grades for the
>> > >     selected
>> > >             # assignment ----
>> > >               selectInput("assessment", "Assessment:",
>> > >                           c("Assignment 1" = "Assignment 1",
>> > >                             "Assignment 2" = "Assignment 2",
>> > >                             "Assignment 3" = "Assignment 3",
>> > >                             "Assignment 4" = "Assignment 4",
>> > >                             "Assignment 5" = "Assignment 5")),
>> > >             selectInput("name", "Name:",
>> > >                         ttclasses[,2]),
>> > >
>> > >             dateRangeInput("due_date",
>> > >                            "Due-Date:",start =
>> max(ttclasses$due_date) ,
>> > >                            separator = " - ")
>> > >           ),
>> > >
>> > >           # Main panel for displaying outputs ----
>> > >           mainPanel(
>> > >
>> > >             # Output: Plot of the requested variable against grade
>> ----
>> > >             plotOutput("gradePlot")
>> > >
>> > >           )
>> > >         )
>> > >     )
>> > >
>> > >     # Define server logic to plot  ----
>> > >     server <- function(input, output) {
>> > >         output$gradePlot <- renderPlot({
>> > >           grade_ad = input$assessment
>> > >           boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>> > >                   frame.plot=FALSE, horizontal=TRUE, col="magenta",
>> > >     main=grade_ad)
>> > >           ttclasses <-ttclasses %>%
>> > >             filter(ttclasses$due_date >= input$due_date[1] &
>> > >     ttclasses$due_date
>> > >                    <= input$due_date[2])
>> > >         })
>> > >     }
>> > >
>> > >     # Create Shiny app ----
>> > >     shinyApp(ui, server)
>> > >
>> > >
>> > >
>> > >     Hope this helps,
>> > >
>> > >     Rui Barradas
>> > >
>> > >     ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
>> > >      > Hi All,
>> > >      > I Need a bit of help to fix the code.
>> > >      > Code:
>> > >      > library(readr)
>> > >      > library(shiny)
>> > >      > ttclasses <- read_csv("ttclasses.csv")
>> > >      >
>> > >      > #Filter data
>> > >      > library(stringr)
>> > >      > library(dplyr)
>> > >      > ttclasses <-ttclasses %>%
>> > >      >    filter(str_detect(assessment, "Assignment"))
>> > >      > ttclasses <-ttclasses %>%
>> > >      >    filter(str_detect(name, "Name"))
>> > >      >
>> > >      > ##Remove NA values.
>> > >      > library(tidyverse)
>> > >      > ttclasses <-ttclasses %>% drop_na("score")
>> > >      >
>> > >      > #Convert to factor
>> > >      > ttclasses$assessment <- as.factor(ttclasses$assessment)
>> > >      > ttclasses$due_date =  as.Date(ttclasses$due_date, format =
>> > >     "mm/dd/yy")
>> > >      > ##ttclasses$name <- as.factor(ttclasses$name)
>> > >      >
>> > >      > # Define UI ----
>> > >      > ui <- fluidPage(
>> > >      >
>> > >      >    # App title ----
>> > >      >    titlePanel("Assessment Dashboard"),
>> > >      >
>> > >      >    # Sidebar layout with input and output definitions ----
>> > >      >    sidebarLayout(
>> > >      >
>> > >      >      # Sidebar panel for inputs ----
>> > >      >      sidebarPanel(
>> > >      >
>> > >      >        # Input: Selector for variable to plot the grades for
>> the
>> > >     selected
>> > >      > assignment ----
>> > >      >        selectInput("assessment", "Assessment:",
>> > >      >                    c("Assignment 1" = "Assignment 1",
>> > >      >                      "Assignment 2" = "Assignment 2",
>> > >      >                      "Assignment 3" = "Assignment 3",
>> > >      >                      "Assignment 4" = "Assignment 4",
>> > >      >                      "Assignment 5" = "Assignment 5")),
>> > >      >        selectInput("name", "Name:",
>> > >      >                    ttclasses[,2]),
>> > >      >
>> > >      >      dateRangeInput("due_date",
>> > >      >                     "Due-Date:",start =
>> max(ttclasses$due_date) ,
>> > >      >                     separator = " - ")
>> > >      >      ),
>> > >      >
>> > >      >      # Main panel for displaying outputs ----
>> > >      >      mainPanel(
>> > >      >
>> > >      >        # Output: Plot of the requested variable against grade
>> ----
>> > >      >        plotOutput("gradePlot")
>> > >      >
>> > >      >      )
>> > >      >    )
>> > >      > )
>> > >      >
>> > >      > # Define server logic to plot  ----
>> > >      > server <- function(input, output) {
>> > >      >      output$gradePlot <- renderPlot({
>> > >      >      grade_ad = input$assessment
>> > >      >      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>> > >      > frame.plot=FALSE, horizontal=TRUE, col="magenta",
>> main=grade_ad)
>> > >      >      ttclasses <-ttclasses %>%
>> > >      >        filter(ttclasses$due_date >= input$due_date[1] &
>> > >     ttclasses$due_date
>> > >      > <= input$due_date[2])
>> > >      >    })
>> > >      > }
>> > >      >
>> > >      > # Create Shiny app ----
>> > >      > shinyApp(ui, server)
>> > >      >
>> > >      > Thanks & Regards
>> > >      >
>> > >      >       [[alternative HTML version deleted]]
>> > >      >
>> > >      > ______________________________________________
>> > >      > R-help at r-project.org <mailto:R-help at r-project.org> mailing
>> list
>> > >     -- To UNSUBSCRIBE and more, see
>> > >      > https://stat.ethz.ch/mailman/listinfo/r-help
>> > >     <https://stat.ethz.ch/mailman/listinfo/r-help>
>> > >      > PLEASE do read the posting guide
>> > >     http://www.R-project.org/posting-guide.html
>> > >     <http://www.R-project.org/posting-guide.html>
>> > >      > and provide commented, minimal, self-contained, reproducible
>> code.
>> > >      >
>> > >
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

From drj|m|emon @end|ng |rom gm@||@com  Wed Jun  9 00:39:44 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 9 Jun 2021 08:39:44 +1000
Subject: [R] Converting data from weekly interval to daily interval
In-Reply-To: <CAEGXkYVcVm5VWQ0B-veQcXZcSKt+1A2RUJMJ=wh+LPrcO7LUBw@mail.gmail.com>
References: <CAEGXkYVcVm5VWQ0B-veQcXZcSKt+1A2RUJMJ=wh+LPrcO7LUBw@mail.gmail.com>
Message-ID: <CA+8X3fX2yNUvoNX+GBY197OJp8hX48rkB0g55KPDnCpo5VdoHA@mail.gmail.com>

Hi Bhaskar,
Perhaps you are looking for this:

approx(c(3,6,7),n=21)
$x
[1] 1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2.0 2.1 2.2 2.3 2.4 2.5 2.6 2.7
2.8
[20] 2.9 3.0

$y
[1] 3.0 3.3 3.6 3.9 4.2 4.5 4.8 5.1 5.4 5.7 6.0 6.1 6.2 6.3 6.4 6.5 6.6 6.7
6.8
[20] 6.9 7.0


This assumes that you are taking each value as a snapshot reading
rather than a cumulation of the values.

Jim

On Wed, Jun 9, 2021 at 4:33 AM Bhaskar Mitra <bhaskar.kolkata at gmail.com> wrote:
>
> Hello Everyone,
>
> I have data at weekly intervals.
> The data structure is something like this.
>
> df1 <-
> date            a
> 1/7/2020     3
> 1/14/2020   6
> 1/21/2021   7
>
> I would like to convert the data from the weekly
> interval to the daily interval. Something like this.
>
> date            a
> 1/7/2020    0.5
> 1/8/2020    0.3
> 1/9/2020    0.7
>
>
> I am using the following codes
>
> d1 <- nrow(df1)
>
> df2 <- data.frame(matrix(NA, nrow = (d1)*7, ncol = 1)
>
> inc <- 0
> for (i in 1:nrow(df1)) {
>   for (j in 1:7) {
>     inc <- inc + 1
>     df2[inc,1] <- df1[i,1]/7
>   }
> }
> rm(df1)
>
>
>
> However, the sum of the daily values generated in df2 differ
> from the original value in the df1 data frame. There is a 1-2% discrepancy.
> I would appreciate it if someone could suggest how to improve the codes.
>
> Thanks,
> Bhaskar
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 01:42:58 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Tue, 8 Jun 2021 18:42:58 -0500
Subject: [R] Read fst files
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
Message-ID: <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>

R-Help Forum

 

Anyone know why the following line of code would error out:  myObject <-
read_fst(unz("Dataset.zip", filename = "filename.fst"))

 

Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
filename = "filename.fst") 

 

I often use similar code with *.csv files in a zipped folder. For example:
myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
works just fine.

 

Jeff Reichman

 


	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Wed Jun  9 04:30:43 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Wed, 09 Jun 2021 05:30:43 +0300
Subject: [R] Converting data from weekly interval to daily interval
In-Reply-To: Your message of "Tue, 08 Jun 2021 11:10:13 -0700."
 <CAEGXkYVcVm5VWQ0B-veQcXZcSKt+1A2RUJMJ=wh+LPrcO7LUBw@mail.gmail.com>
Message-ID: <663510.1623205843@apollo2.minshall.org>

Bhaskar,

not your main question, but ...

given that you have column names, you might think of

:     df2[inc,"date"] <- df1[i,"date"]/7
or
:     df2[inc,]$date <- df1[i,]$date/7

i.e., using your column names instead of numeric indices.

then, also, instead of a for loop, possibly you can use R's nicely
vectorized operations.  i.e., something like

: df2$date <- df2$date/7

nb: i haven't tried to run the above code, so no guarantees.

(again, if i've typed that correctly -- i haven't tested -- you will end
up with the same answers you *don't* want, but maybe more
idiomatically.)

cheers, Greg


From m|n@h@|| @end|ng |rom um|ch@edu  Wed Jun  9 05:14:55 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Wed, 09 Jun 2021 06:14:55 +0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: Your message of "Tue, 08 Jun 2021 14:00:04 -0300."
 <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
Message-ID: <668653.1623208495@apollo2.minshall.org>

Biplab,

i'm not sure how to help you here, but this list pretty much runs on
plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
attachments.  so, simply-formatted text, including code, with some
mechanism in the code to initialize any data structures (data frames,
matrices, etc.) needed for the example.

some of this is described in the posting guide
----
https://www.r-project.org/posting-guide.html
----

formatting your e-mail in this way will likely increase your odds of a
helpful reply.

cheers, Greg


From m|n@h@|| @end|ng |rom um|ch@edu  Wed Jun  9 05:28:34 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Wed, 09 Jun 2021 06:28:34 +0300
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: Your message of "Sat, 05 Jun 2021 12:26:13 -0700."
 <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>
Message-ID: <670333.1623209314@apollo2.minshall.org>

> Two of R's central features as a "data science" language are that many of
> its core capabilities are "vectorized" -- can calculate on whole objects
> (at the user-visible interpreter level) rather than requiring explicit
> loops; and that it can use object indexing in several different modalities,
> here logical indexing, for extraction and replacement in whole objects such
> as vectors and matrices. Not only does this typically yield simpler, more
> readable code (admittedly, a subjective judgment), but it is also typically
> much faster, though I grant you that this can often be overrated.

i sort of wanted to circle back to this.

i learned FORTRAN IV in 1968 (and the last FORTRAN program i wrote was
at least 50 years ago), and i *still* write FORTRAN code, even when
writing lisp, or R, or awk scripts.  it's *very* hard for me to adapt to
other styles.

so, for that reason, i think it is very useful to help people understand
and adjust to R's vector operations.

maybe a way to say it might be "here is how you will get better
performance, using R's vector operations..." and, then, "however, if you
find it simpler, and the performance acceptable, you could do a 'for'
loop like this...".  (though, as this is all volunteer effort, one
obviously takes what one gets.)  but, i do think that helping newer
users understand how to write efficient code is important.

anyway, just my two cents.

cheers, Greg


From er|cjberger @end|ng |rom gm@||@com  Wed Jun  9 10:49:42 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 9 Jun 2021 11:49:42 +0300
Subject: [R] Read fst files
In-Reply-To: <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
Message-ID: <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>

You are missing the second closing parenthesis. This is what the error
message is telling you.


On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> R-Help Forum
>
>
>
> Anyone know why the following line of code would error out:  myObject <-
> read_fst(unz("Dataset.zip", filename = "filename.fst"))
>
>
>
> Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
> filename = "filename.fst")
>
>
>
> I often use similar code with *.csv files in a zipped folder. For example:
> myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
> works just fine.
>
>
>
> Jeff Reichman
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Jun  9 11:55:40 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 9 Jun 2021 11:55:40 +0200
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
Message-ID: <24768.36892.831829.846776@stat.math.ethz.ch>

>>>>> David Carlson    on Sun, 6 Jun 2021 15:21:34 -0400 writes:

> There is really no need for a loop:
> num <- 1:100
> num[ifelse(num %% 2 == 1, TRUE, FALSE)]

> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49
> [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99

Well, and the above "works" but is really another proof of my
year-long claim that people use  ifelse(.)  *MUCH MUCH* too often,
and should really learn to use alternatives, in this case,
"R 101" (*long* before fooverse):

Use

    num[num %% 2 == 1]

instead of much slower and ...@#^$

    num[ifelse(num %% 2 == 1, TRUE, FALSE)]

Martin Maechler
ETH Zurich 

> On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
> <r-help at r-project.org> wrote:
    >> 
    >> > i <- 1L; span <- 1:100; result <- NA;
    >> > for (i in span){
    >> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
    >> + }
    >> > span[result]
    >> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43

 [............]


From er|cjberger @end|ng |rom gm@||@com  Wed Jun  9 12:13:49 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 9 Jun 2021 13:13:49 +0300
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <24768.36892.831829.846776@stat.math.ethz.ch>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
 <24768.36892.831829.846776@stat.math.ethz.ch>
Message-ID: <CAGgJW77zfDqVkA08qW7QOW+DP1q+v658zL7=Ybh8Ft+qycf5Ew@mail.gmail.com>

It's also possible to save a character and gain the added advantage of
being less understandable :-)

num[!!num%%2]



On Wed, Jun 9, 2021 at 12:56 PM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> David Carlson    on Sun, 6 Jun 2021 15:21:34 -0400 writes:
>
> > There is really no need for a loop:
> > num <- 1:100
> > num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> > [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
> 47 49
> > [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93
> 95 97 99
>
> Well, and the above "works" but is really another proof of my
> year-long claim that people use  ifelse(.)  *MUCH MUCH* too often,
> and should really learn to use alternatives, in this case,
> "R 101" (*long* before fooverse):
>
> Use
>
>     num[num %% 2 == 1]
>
> instead of much slower and ...@#^$
>
>     num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> Martin Maechler
> ETH Zurich
>
> > On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
> > <r-help at r-project.org> wrote:
>     >>
>     >> > i <- 1L; span <- 1:100; result <- NA;
>     >> > for (i in span){
>     >> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
>     >> + }
>     >> > span[result]
>     >> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41
> 43
>
>  [............]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 14:18:40 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 9 Jun 2021 07:18:40 -0500
Subject: [R] Read fst files
In-Reply-To: <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
Message-ID: <003d01d75d29$95b07210$c1115630$@sbcglobal.net>

Eric

 

Typo on my point. 

 

setwd("C:/Users/reichmaj/Documents/My_Reference_Library /Regression")

myObject <- read_fst(unz("Dataset.zip", filename = "myFile.fst")) # read fst file

 

Error in path.expand(path) : invalid 'path' argument

 

So then I tried

 

myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression /Dataset.zip", filename = "myFile.fst"))

 

Error in path.expand(path) : invalid 'path' argument

 

Error in the path??

 

Because this works just fine

 

myObject <- read.csv(unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression /Dataset.zip", filename = "myFile.csv"))

 

My only though is I can?t use the two function s together when dealing with fst files ??

 

From: Eric Berger <ericjberger at gmail.com> 
Sent: Wednesday, June 9, 2021 3:50 AM
To: reichmanj at sbcglobal.net
Cc: R mailing list <r-help at r-project.org>
Subject: Re: [R] Read fst files

 

You are missing the second closing parenthesis. This is what the error message is telling you.

 

 

On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:

R-Help Forum



Anyone know why the following line of code would error out:  myObject <-
read_fst(unz("Dataset.zip", filename = "filename.fst"))



Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
filename = "filename.fst") 



I often use similar code with *.csv files in a zipped folder. For example:
myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
works just fine.



Jeff Reichman




        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Wed Jun  9 14:22:27 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 9 Jun 2021 15:22:27 +0300
Subject: [R] Read fst files
In-Reply-To: <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
Message-ID: <CAGgJW76mHPW7k=YA4RNLcVjwFWoiFCqZ-+vCYoBmnKCkHMHZCA@mail.gmail.com>

Even if ultimately you want to use the functions together, for debugging
the problem you should split them into two, as in

a <- unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression
/Dataset.zip", filename = "myFile.fst")
See if that works, and examine 'a'.

And once that is working

read_fst(a)

to see what that does.

Let us know.


On Wed, Jun 9, 2021 at 3:18 PM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> Eric
>
>
>
> Typo on my point.
>
>
>
> setwd("C:/Users/reichmaj/Documents/My_Reference_Library /Regression")
>
> myObject <- read_fst(unz("Dataset.zip", filename = "myFile.fst")) # read
> fst file
>
>
>
> Error in path.expand(path) : invalid 'path' argument
>
>
>
> So then I tried
>
>
>
> myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library
> /Regression /Dataset.zip", filename = "myFile.fst"))
>
>
>
> Error in path.expand(path) : invalid 'path' argument
>
>
>
> Error in the path??
>
>
>
> Because this works just fine
>
>
>
> myObject <- read.csv(unz("C:/Users/reichmaj/Documents/My_Reference_Library
> /Regression /Dataset.zip", filename = "myFile.csv"))
>
>
>
> My only though is I can?t use the two function s together when dealing
> with fst files ??
>
>
>
> *From:* Eric Berger <ericjberger at gmail.com>
> *Sent:* Wednesday, June 9, 2021 3:50 AM
> *To:* reichmanj at sbcglobal.net
> *Cc:* R mailing list <r-help at r-project.org>
> *Subject:* Re: [R] Read fst files
>
>
>
> You are missing the second closing parenthesis. This is what the error
> message is telling you.
>
>
>
>
>
> On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net>
> wrote:
>
> R-Help Forum
>
>
>
> Anyone know why the following line of code would error out:  myObject <-
> read_fst(unz("Dataset.zip", filename = "filename.fst"))
>
>
>
> Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
> filename = "filename.fst")
>
>
>
> I often use similar code with *.csv files in a zipped folder. For example:
> myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
> works just fine.
>
>
>
> Jeff Reichman
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun  9 14:26:42 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 9 Jun 2021 08:26:42 -0400
Subject: [R] Read fst files
In-Reply-To: <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
Message-ID: <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>

It looks as though read_fst wants a filename, not a connection.

You should do it in two steps:

  unzip("Dataset.zip", files = "myFile.fst")
  myObject <- read_fst("myFile.fst")

This is obviously untested; you didn't even say what package read_fst() 
comes from.

Duncan Murdoch

On 09/06/2021 8:18 a.m., Jeff Reichman wrote:
> Eric
> 
>   
> 
> Typo on my point.
> 
>   
> 
> setwd("C:/Users/reichmaj/Documents/My_Reference_Library /Regression")
> 
> myObject <- read_fst(unz("Dataset.zip", filename = "myFile.fst")) # read fst file
> 
>   
> 
> Error in path.expand(path) : invalid 'path' argument
> 
>   
> 
> So then I tried
> 
>   
> 
> myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression /Dataset.zip", filename = "myFile.fst"))
> 
>   
> 
> Error in path.expand(path) : invalid 'path' argument
> 
>   
> 
> Error in the path??
> 
>   
> 
> Because this works just fine
> 
>   
> 
> myObject <- read.csv(unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression /Dataset.zip", filename = "myFile.csv"))
> 
>   
> 
> My only though is I can?t use the two function s together when dealing with fst files ??
> 
>   
> 
> From: Eric Berger <ericjberger at gmail.com>
> Sent: Wednesday, June 9, 2021 3:50 AM
> To: reichmanj at sbcglobal.net
> Cc: R mailing list <r-help at r-project.org>
> Subject: Re: [R] Read fst files
> 
>   
> 
> You are missing the second closing parenthesis. This is what the error message is telling you.
> 
>   
> 
>   
> 
> On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:
> 
> R-Help Forum
> 
> 
> 
> Anyone know why the following line of code would error out:  myObject <-
> read_fst(unz("Dataset.zip", filename = "filename.fst"))
> 
> 
> 
> Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
> filename = "filename.fst")
> 
> 
> 
> I often use similar code with *.csv files in a zipped folder. For example:
> myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
> works just fine.
> 
> 
> 
> Jeff Reichman
> 
> 
> 
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 15:12:37 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 9 Jun 2021 08:12:37 -0500
Subject: [R] Read fst files
In-Reply-To: <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
Message-ID: <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>

Duncan

Yea that will work. It appears to be related to setting my working dir, for what ever reason neither seem to work
(1) knitr::opts_knit$set(root.dir ="~/My_Reference_Library/Regression") # from R Notebook or
(2) setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # from R chunk

So it appears I can either (as you suggested) use two steps or combine but I need to enter the full path. Why other file types don't seem to need the full path ....?????

myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", filename = "myFile.fst"))

Thank you. I guess just one of those R things

Jeff



-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Wednesday, June 9, 2021 7:27 AM
To: reichmanj at sbcglobal.net; 'Eric Berger' <ericjberger at gmail.com>
Cc: 'R mailing list' <r-help at r-project.org>
Subject: Re: [R] Read fst files

It looks as though read_fst wants a filename, not a connection.

You should do it in two steps:

  unzip("Dataset.zip", files = "myFile.fst")
  myObject <- read_fst("myFile.fst")

This is obviously untested; you didn't even say what package read_fst() comes from.

Duncan Murdoch

On 09/06/2021 8:18 a.m., Jeff Reichman wrote:
> Eric
> 
>   
> 
> Typo on my point.
> 
>   
> 
> setwd("C:/Users/reichmaj/Documents/My_Reference_Library /Regression")
> 
> myObject <- read_fst(unz("Dataset.zip", filename = "myFile.fst")) # 
> read fst file
> 
>   
> 
> Error in path.expand(path) : invalid 'path' argument
> 
>   
> 
> So then I tried
> 
>   
> 
> myObject <- 
> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library 
> /Regression /Dataset.zip", filename = "myFile.fst"))
> 
>   
> 
> Error in path.expand(path) : invalid 'path' argument
> 
>   
> 
> Error in the path??
> 
>   
> 
> Because this works just fine
> 
>   
> 
> myObject <- 
> read.csv(unz("C:/Users/reichmaj/Documents/My_Reference_Library 
> /Regression /Dataset.zip", filename = "myFile.csv"))
> 
>   
> 
> My only though is I can?t use the two function s together when dealing with fst files ??
> 
>   
> 
> From: Eric Berger <ericjberger at gmail.com>
> Sent: Wednesday, June 9, 2021 3:50 AM
> To: reichmanj at sbcglobal.net
> Cc: R mailing list <r-help at r-project.org>
> Subject: Re: [R] Read fst files
> 
>   
> 
> You are missing the second closing parenthesis. This is what the error message is telling you.
> 
>   
> 
>   
> 
> On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:
> 
> R-Help Forum
> 
> 
> 
> Anyone know why the following line of code would error out:  myObject 
> <- read_fst(unz("Dataset.zip", filename = "filename.fst"))
> 
> 
> 
> Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip", 
> filename = "filename.fst")
> 
> 
> 
> I often use similar code with *.csv files in a zipped folder. For example:
> myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), 
> which works just fine.
> 
> 
> 
> Jeff Reichman
> 
> 
> 
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To 
> UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun  9 15:28:47 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 9 Jun 2021 09:28:47 -0400
Subject: [R] Read fst files
In-Reply-To: <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
Message-ID: <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>

On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
> Duncan
> 
> Yea that will work. It appears to be related to setting my working dir, for what ever reason neither seem to work
> (1) knitr::opts_knit$set(root.dir ="~/My_Reference_Library/Regression") # from R Notebook or
> (2) setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # from R chunk
> 
> So it appears I can either (as you suggested) use two steps or combine but I need to enter the full path. Why other file types don't seem to need the full path ....?????

You need to read the documentation for read_fst() to find what it needs. 
  If it doesn't explain this, then you should report the issue to its 
author.

> 
> myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", filename = "myFile.fst"))
> 
> Thank you. I guess just one of those R things

No, it's a read_fst() thing.

Duncan Murdoch


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jun  9 16:35:39 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 9 Jun 2021 07:35:39 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <24768.36892.831829.846776@stat.math.ethz.ch>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
 <24768.36892.831829.846776@stat.math.ethz.ch>
Message-ID: <CAHqSRuS5tOjb9M4OFe50r3e+d-7tQkmP3-RVdOz3uZ3=k62DEw@mail.gmail.com>

Martin wrote
  Use
      num[num %% 2 == 1]
  instead of much slower and ...@#^$
      num[ifelse(num %% 2 == 1, TRUE, FALSE)]

Read the '[' as 'such that' when the subscript is logical
(=="Boolean"==TRUE/FALSE-values).

[The original post had a typo/thinko, num<-num+i instead of num<-num+1,
which was simply an error, not a matter of style.  R's vectorization makes
it easy to avoid such errors.]

-Bill

On Wed, Jun 9, 2021 at 2:56 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> David Carlson    on Sun, 6 Jun 2021 15:21:34 -0400 writes:
>
> > There is really no need for a loop:
> > num <- 1:100
> > num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> > [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
> 47 49
> > [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93
> 95 97 99
>
> Well, and the above "works" but is really another proof of my
> year-long claim that people use  ifelse(.)  *MUCH MUCH* too often,
> and should really learn to use alternatives, in this case,
> "R 101" (*long* before fooverse):
>
> Use
>
>     num[num %% 2 == 1]
>
> instead of much slower and ...@#^$
>
>     num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> Martin Maechler
> ETH Zurich
>
> > On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
> > <r-help at r-project.org> wrote:
>     >>
>     >> > i <- 1L; span <- 1:100; result <- NA;
>     >> > for (i in span){
>     >> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
>     >> + }
>     >> > span[result]
>     >> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41
> 43
>
>  [............]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rhe|p @end|ng |rom eoo@@dd@@n|  Wed Jun  9 19:55:56 2021
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Wed, 9 Jun 2021 19:55:56 +0200
Subject: [R] Read fst files
In-Reply-To: <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
Message-ID: <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>



read_fst is from the package fst. The fileformat fst uses is a binary 
format designed to be fast readable. It is a column  oriented format and 
compressed. So, to be able to work fst needs access to the file itself 
and wont accept a file connection as functions like read.table an 
variants accept.

Also, because it is a binary compressed format using a compression 
method that is fast to read, compressing also to zip seems to defeat the 
purpose of fst.

HTH,
Jan


On 09-06-2021 15:28, Duncan Murdoch wrote:
> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>> Duncan
>>
>> Yea that will work. It appears to be related to setting my working 
>> dir, for what ever reason neither seem to work
>> (1) knitr::opts_knit$set(root.dir 
>> ="~/My_Reference_Library/Regression") # from R Notebook or
>> (2) 
>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # 
>> from R chunk
>>
>> So it appears I can either (as you suggested) use two steps or combine 
>> but I need to enter the full path. Why other file types don't seem to 
>> need the full path ....?????
> 
> You need to read the documentation for read_fst() to find what it needs. 
>  ?If it doesn't explain this, then you should report the issue to its 
> author.
> 
>>
>> myObject <- 
>> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", 
>> filename = "myFile.fst"))
>>
>> Thank you. I guess just one of those R things
> 
> No, it's a read_fst() thing.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 20:26:34 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 9 Jun 2021 13:26:34 -0500
Subject: [R] Read fst files
In-Reply-To: <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
Message-ID: <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>

Jan

Makes sense. Its just that I often receive  large zip files that contain a variety of file types.

Jef

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jan van der Laan
Sent: Wednesday, June 9, 2021 12:56 PM
To: r-help at r-project.org
Subject: Re: [R] Read fst files



read_fst is from the package fst. The fileformat fst uses is a binary 
format designed to be fast readable. It is a column  oriented format and 
compressed. So, to be able to work fst needs access to the file itself 
and wont accept a file connection as functions like read.table an 
variants accept.

Also, because it is a binary compressed format using a compression 
method that is fast to read, compressing also to zip seems to defeat the 
purpose of fst.

HTH,
Jan


On 09-06-2021 15:28, Duncan Murdoch wrote:
> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>> Duncan
>>
>> Yea that will work. It appears to be related to setting my working 
>> dir, for what ever reason neither seem to work
>> (1) knitr::opts_knit$set(root.dir 
>> ="~/My_Reference_Library/Regression") # from R Notebook or
>> (2) 
>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # 
>> from R chunk
>>
>> So it appears I can either (as you suggested) use two steps or combine 
>> but I need to enter the full path. Why other file types don't seem to 
>> need the full path ....?????
> 
> You need to read the documentation for read_fst() to find what it needs. 
>   If it doesn't explain this, then you should report the issue to its 
> author.
> 
>>
>> myObject <- 
>> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", 
>> filename = "myFile.fst"))
>>
>> Thank you. I guess just one of those R things
> 
> No, it's a read_fst() thing.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun  9 20:36:33 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 09 Jun 2021 11:36:33 -0700
Subject: [R] Read fst files
In-Reply-To: <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
 <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
Message-ID: <0739C7FA-F133-43B0-809F-9B8C5BE52034@dcn.davis.ca.us>

... but if you are receiving multiple-file zips then you should not be using unz() the way you are in your original post.

I have to agree with other responders suggesting that you handle unzipping fst zips manually rather than as part of an R one-liner.

On June 9, 2021 11:26:34 AM PDT, Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>Jan
>
>Makes sense. Its just that I often receive  large zip files that
>contain a variety of file types.
>
>Jef
>
>-----Original Message-----
>From: R-help <r-help-bounces at r-project.org> On Behalf Of Jan van der
>Laan
>Sent: Wednesday, June 9, 2021 12:56 PM
>To: r-help at r-project.org
>Subject: Re: [R] Read fst files
>
>
>
>read_fst is from the package fst. The fileformat fst uses is a binary 
>format designed to be fast readable. It is a column  oriented format
>and 
>compressed. So, to be able to work fst needs access to the file itself 
>and wont accept a file connection as functions like read.table an 
>variants accept.
>
>Also, because it is a binary compressed format using a compression 
>method that is fast to read, compressing also to zip seems to defeat
>the 
>purpose of fst.
>
>HTH,
>Jan
>
>
>On 09-06-2021 15:28, Duncan Murdoch wrote:
>> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>>> Duncan
>>>
>>> Yea that will work. It appears to be related to setting my working 
>>> dir, for what ever reason neither seem to work
>>> (1) knitr::opts_knit$set(root.dir 
>>> ="~/My_Reference_Library/Regression") # from R Notebook or
>>> (2) 
>>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression")
># 
>>> from R chunk
>>>
>>> So it appears I can either (as you suggested) use two steps or
>combine 
>>> but I need to enter the full path. Why other file types don't seem
>to 
>>> need the full path ....?????
>> 
>> You need to read the documentation for read_fst() to find what it
>needs. 
>>   If it doesn't explain this, then you should report the issue to its
>
>> author.
>> 
>>>
>>> myObject <- 
>>>
>read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip",
>
>>> filename = "myFile.fst"))
>>>
>>> Thank you. I guess just one of those R things
>> 
>> No, it's a read_fst() thing.
>> 
>> Duncan Murdoch
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jun  9 20:43:11 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 9 Jun 2021 11:43:11 -0700
Subject: [R] Read fst files
In-Reply-To: <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
 <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
Message-ID: <CAHqSRuSOkP23Krnc3xy49OxfgcMAQoxdR4OeeHfTwARrvewtRQ@mail.gmail.com>

Try using unzip(zipfile, files="desiredFile", exdir=tf<-tempfile()), not
unz(zipfile, "desiredFile"), to copy the desired file from the zip file to
a temporary location and use read_fst(tf) to read the desired file.

-Bill

On Wed, Jun 9, 2021 at 11:27 AM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> Jan
>
> Makes sense. Its just that I often receive  large zip files that contain a
> variety of file types.
>
> Jef
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jan van der Laan
> Sent: Wednesday, June 9, 2021 12:56 PM
> To: r-help at r-project.org
> Subject: Re: [R] Read fst files
>
>
>
> read_fst is from the package fst. The fileformat fst uses is a binary
> format designed to be fast readable. It is a column  oriented format and
> compressed. So, to be able to work fst needs access to the file itself
> and wont accept a file connection as functions like read.table an
> variants accept.
>
> Also, because it is a binary compressed format using a compression
> method that is fast to read, compressing also to zip seems to defeat the
> purpose of fst.
>
> HTH,
> Jan
>
>
> On 09-06-2021 15:28, Duncan Murdoch wrote:
> > On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
> >> Duncan
> >>
> >> Yea that will work. It appears to be related to setting my working
> >> dir, for what ever reason neither seem to work
> >> (1) knitr::opts_knit$set(root.dir
> >> ="~/My_Reference_Library/Regression") # from R Notebook or
> >> (2)
> >> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") #
> >> from R chunk
> >>
> >> So it appears I can either (as you suggested) use two steps or combine
> >> but I need to enter the full path. Why other file types don't seem to
> >> need the full path ....?????
> >
> > You need to read the documentation for read_fst() to find what it needs.
> >   If it doesn't explain this, then you should report the issue to its
> > author.
> >
> >>
> >> myObject <-
> >>
> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip",
>
> >> filename = "myFile.fst"))
> >>
> >> Thank you. I guess just one of those R things
> >
> > No, it's a read_fst() thing.
> >
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun  9 20:49:48 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 9 Jun 2021 14:49:48 -0400
Subject: [R] Read fst files
In-Reply-To: <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
Message-ID: <b130f236-e042-956e-c871-c02752123460@gmail.com>

On 09/06/2021 1:55 p.m., Jan van der Laan wrote:
> 
> 
> read_fst is from the package fst. The fileformat fst uses is a binary
> format designed to be fast readable. It is a column  oriented format and
> compressed. So, to be able to work fst needs access to the file itself
> and wont accept a file connection as functions like read.table an
> variants accept.

Thanks for the info.  I think it is possible to handle such a file in a 
binary connection, but doing that in C/C++ would be kind of horrible, so 
I can understand your choice.

Duncan Murdoch

> 
> Also, because it is a binary compressed format using a compression
> method that is fast to read, compressing also to zip seems to defeat the
> purpose of fst.
> 
> HTH,
> Jan
> 
> 
> On 09-06-2021 15:28, Duncan Murdoch wrote:
>> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>>> Duncan
>>>
>>> Yea that will work. It appears to be related to setting my working
>>> dir, for what ever reason neither seem to work
>>> (1) knitr::opts_knit$set(root.dir
>>> ="~/My_Reference_Library/Regression") # from R Notebook or
>>> (2)
>>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") #
>>> from R chunk
>>>
>>> So it appears I can either (as you suggested) use two steps or combine
>>> but I need to enter the full path. Why other file types don't seem to
>>> need the full path ....?????
>>
>> You need to read the documentation for read_fst() to find what it needs.
>>   ?If it doesn't explain this, then you should report the issue to its
>> author.
>>
>>>
>>> myObject <-
>>> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip",
>>> filename = "myFile.fst"))
>>>
>>> Thank you. I guess just one of those R things
>>
>> No, it's a read_fst() thing.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From b|p|@bn1 @end|ng |rom gm@||@com  Wed Jun  9 05:47:52 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Wed, 9 Jun 2021 00:47:52 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <668653.1623208495@apollo2.minshall.org>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
Message-ID: <CANwr6KYvC5ZVEjw0sA0BHoH+Hu754qcLGi0jKokj+asHaef1ug@mail.gmail.com>

Hi Greg,

Please find the R Code in the word file attached here. Its plain text format

Thanks & Regards
Biplab Nayak

On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu> wrote:

> Biplab,
>
> i'm not sure how to help you here, but this list pretty much runs on
> plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
> attachments.  so, simply-formatted text, including code, with some
> mechanism in the code to initialize any data structures (data frames,
> matrices, etc.) needed for the example.
>
> some of this is described in the posting guide
> ----
> https://www.r-project.org/posting-guide.html
> ----
>
> formatting your e-mail in this way will likely increase your odds of a
> helpful reply.
>
> cheers, Greg
>

From n@@@j@v@nderve|den @end|ng |rom gm@||@com  Tue Jun  8 17:05:07 2021
From: n@@@j@v@nderve|den @end|ng |rom gm@||@com (Niels van der Velden)
Date: Tue, 8 Jun 2021 17:05:07 +0200
Subject: [R] [R-pkgs] New CRAN Package: NGLVieweR - Interactive 3D
 Visualization of Molecular Structures
Message-ID: <CANBF2ax2r9WAA-AnERwmexYWOYbGvJGPnv=kkMFbpn_DrcSUSA@mail.gmail.com>

 Dear all,

I am happy to announce that {NGLVieweR} v1.3.1 is now on CRAN.

{NGLVieweR} provides an 'htmlwidgets' https://www.htmlwidgets.org/
interface to 'NGL.js' http://nglviewer.org/ngl/api/.
{NGLVieweR} can be used to visualize and interact with protein databank
(PDB) and structural files in R and Shiny applications.
It includes a set of API functions to manipulate the viewer after creation
in Shiny.

CRAN: https://cran.r-project.org/web/packages/NGLVieweR/index.html
Documentation: https://nvelden.github.io/NGLVieweR/
Graphical UI for the {NGLVieweR} package:
https://niels-van-der-velden.shinyapps.io/shinyNGLVieweR/
Rationale on the development of the package:
https://community.rstudio.com/t/three-dimensional-3d-interactive-visualization-of-protein-structures-shiny-contest-submission/104697

I hope you find it helpful.

Please feel free to reach out with feedback or questions.

Thanks,

Niels van der Velden

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From b|p|@bn1 @end|ng |rom gm@||@com  Wed Jun  9 14:02:31 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Wed, 9 Jun 2021 09:02:31 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <668653.1623208495@apollo2.minshall.org>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
Message-ID: <CANwr6Kba3x4P9QcKLqNWQH9zu58sxCmuKiiHNSwfEKyD0O6Dwg@mail.gmail.com>

Hi Greg,

Please find the objective of the code(bold) and code mentioned below. I was
trying to do to achieve the below objective but somehow it's not working.

1.Order assessment based on the latest due date so select input automatically
shows the order of assessment name.

2.Filter based on the one name or multiple names in the  select input



library(tidyverse)

#library(stringr)    # attached with tidyverse

#library(readr)

library(shiny)

library(dplyr)



ttclasses <- read_csv("~/tmp/ttclasses.csv")



#Filter data

ttclasses <-ttclasses %>%

   filter(str_detect(assessment, "Assignment"))

 *ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))*



##Remove NA values.

ttclasses <-ttclasses %>% drop_na("score")



*## Sort  assessment based on max due_date*

 *ttclasses  <- ttclasses [order( - due_date, assessment ),]*



#Convert to factor

ttclasses$assessment <- factor(ttclasses$assessment)



# please see the formats in help("strptime")

ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")

*ttclasses$name <- factor(ttclasses$name)*





# Define UI ----

ui <- fluidPage(



   # App title ----

   titlePanel("Assessment Dashboard"),



   # Sidebar layout with input and output definitions ----

   sidebarLayout(



     # Sidebar panel for inputs ----

     sidebarPanel(



       # Input: Selector for variable to plot the grades for the selected

       # assignment ----



         selectInput("assessment", "Assessment:",

                     c("Assignment 1" = "Assignment 1",

                       "Assignment 2" = "Assignment 2",

                       "Assignment 3" = "Assignment 3",

                       "Assignment 4" = "Assignment 4",

                       "Assignment 5" = "Assignment 5")),

       selectInput("name", "Name:",

                   ttclasses[,2]),



       dateRangeInput("due_date",

                      "Due-Date:",start = max(ttclasses$due_date) ,

                      separator = " - ")

     ),



     # Main panel for displaying outputs ----

     mainPanel(



       # Output: Plot of the requested variable against grade ----

       plotOutput("gradePlot")



     )

   )

)



# Define server logic to plot  ----

server <- function(input, output) {

   output$gradePlot <- renderPlot({

     grade_ad = input$assessment

     boxplot(ttclasses$score[ttclasses$assessment==grade_ad],

             frame.plot=FALSE, horizontal=TRUE, col="magenta",

main=grade_ad)

     ttclasses <-ttclasses %>%

       filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date

              <= input$due_date[2])

   })

}



# Create Shiny app ----

shinyApp(ui, server)


Thanks & Regards
Biplab Nayak

On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu> wrote:

> Biplab,
>
> i'm not sure how to help you here, but this list pretty much runs on
> plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
> attachments.  so, simply-formatted text, including code, with some
> mechanism in the code to initialize any data structures (data frames,
> matrices, etc.) needed for the example.
>
> some of this is described in the posting guide
> ----
> https://www.r-project.org/posting-guide.html
> ----
>
> formatting your e-mail in this way will likely increase your odds of a
> helpful reply.
>
> cheers, Greg
>

	[[alternative HTML version deleted]]


From b|p|@bn1 @end|ng |rom gm@||@com  Wed Jun  9 14:06:55 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Wed, 9 Jun 2021 09:06:55 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <668653.1623208495@apollo2.minshall.org>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
Message-ID: <CANwr6KZaEVdHHmZQAUxE1gn3qbcQ3YzXbVs=RmMQptsraoBfaw@mail.gmail.com>

Hi Greg,

Please find the objective of the code(bold) and code mentioned below. I was
trying to do to achieve the below objective but somehow it's not working.

1.Order assessment based on the latest due date so select input
automatically shows the order of assessment name.

2.Filter based on the one name or multiple names in the  select input



library(tidyverse)

#library(stringr)    # attached with tidyverse

#library(readr)

library(shiny)

library(dplyr)



ttclasses <- read_csv("~/tmp/ttclasses.csv")



#Filter data

ttclasses <-ttclasses %>%

   filter(str_detect(assessment, "Assignment"))

 ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))



##Remove NA values.

ttclasses <-ttclasses %>% drop_na("score")



*## Sort  assessment based on max due_date*

 ttclasses  <- ttclasses [order( - due_date, assessment ),]



#Convert to factor

ttclasses$assessment <- factor(ttclasses$assessment)



# please see the formats in help("strptime")

ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")

ttclasses$name <- factor(ttclasses$name)

Thanks & Regards
Biplab Nayak

On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu> wrote:

> Biplab,
>
> i'm not sure how to help you here, but this list pretty much runs on
> plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
> attachments.  so, simply-formatted text, including code, with some
> mechanism in the code to initialize any data structures (data frames,
> matrices, etc.) needed for the example.
>
> some of this is described in the posting guide
> ----
> https://www.r-project.org/posting-guide.html
> ----
>
> formatting your e-mail in this way will likely increase your odds of a
> helpful reply.
>
> cheers, Greg
>

	[[alternative HTML version deleted]]


From enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com  Wed Jun  9 19:57:30 2021
From: enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com (Enrico Gabrielli)
Date: Wed, 09 Jun 2021 19:57:30 +0200
Subject: [R] aggregation of irregular interval time-series
Message-ID: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>

Hello
I just registered on the list.
I am an agricultural technician and I am collaborating on a research
project on agroforestry and Brown Marmorated Stink Bug (Halyomorpha
halys, abbreviated BMSB).

Through kobotoolbox we are collecting data of catches in traps on
farms. Farms register inconsistently.
I am trying to use packages for irregular time series.

Here an exemple
the data:
# variable monitoring time as register an import from kobotoolbox
tempo <- as.POSIXct(c("2021-05-29 17:00:00 UTC","2021-06-05 10:52:00
UTC","2021-06-01 17:00:00 UTC","2021-05-16 08:34:00 UTC","2021-06-05
17:00:00 UTC","2021-05-29 05:30:00 UTC","2021-05-23 06:30:00
UTC","2021-05-20 13:00:00 UTC","2021-05-15 12:09:00 UTC"))
# variable capture of BMSB
catture <- c(25,92,23,2,5,30,23,3,15)
# resulting table
library(data.table)
arvaia_catture <- data.table(tempo,catture)
# order by time
arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]

the catches refer to an interval, which goes from the previous
monitoring up to the one recorded on the date
our aim is to calculate the weekly catch
also when a farmer, for example, enters the data on Thursday and
Tuesday
of the following week, on Tuesday in the trap he will find individuals
who were also captured on Friday and Saturday, which formally are to be
considered in the previous week.

With the data of the example
the results (with a spreadsheet) is
two possibile solution
week            simple SUM week         right SUM week
19      17      19,44027778
20      26      52,91388889
21      55      46,4375
22      120     99,20833333
The right SUM week is right!

I have made several attempts
with lubridate, padr, xts
but the last one seems interesting to me
with DTSg
doing
x_periodic <- alter(x,na.status = 'explicit',from="2021-05-15
12:00:00",by="min")
colapply(x_periodic, fun = interpolateLinear)
I managed to create a vector with all interpolated hours
but with DTSg I still can't aggregate by week

Has anyone on the list ever faced such a problem?

Thank you

-- 
Perito agrario Enrico Gabrielli
Tessera n. 633 Collegio Periti agrari prov. Di Modena
Biblioteca agricoltura: https://www.zotero.org/groups/aplomb/
https://it.linkedin.com/pub/enrico-gabrielli/9a/186/159
https://enricogabrielli76.wordpress.com/
https://www.inaturalist.org/observations/bonushenricus
skype: enricogabrielli (enricogabrielli76.peragr at gmail.com)


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 22:26:52 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 9 Jun 2021 15:26:52 -0500
Subject: [R] Read fst files
In-Reply-To: <CAHqSRuSOkP23Krnc3xy49OxfgcMAQoxdR4OeeHfTwARrvewtRQ@mail.gmail.com>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
 <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
 <CAHqSRuSOkP23Krnc3xy49OxfgcMAQoxdR4OeeHfTwARrvewtRQ@mail.gmail.com>
Message-ID: <00ae01d75d6d$c8ab0ab0$5a012010$@sbcglobal.net>

Bill

 

So I understand that?s just unzipping the file to a temporary dir which then would allow read_fst to access the file directly .

 

Jeff

 

From: Bill Dunlap <williamwdunlap at gmail.com> 
Sent: Wednesday, June 9, 2021 1:43 PM
To: reichmanj at sbcglobal.net
Cc: Jan van der Laan <rhelp at eoos.dds.nl>; r-help at r-project.org
Subject: Re: [R] Read fst files

 

Try using unzip(zipfile, files="desiredFile", exdir=tf<-tempfile()), not unz(zipfile, "desiredFile"), to copy the desired file from the zip file to a temporary location and use read_fst(tf) to read the desired file.

 

-Bill

 

On Wed, Jun 9, 2021 at 11:27 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:

Jan

Makes sense. Its just that I often receive  large zip files that contain a variety of file types.

Jef

-----Original Message-----
From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Jan van der Laan
Sent: Wednesday, June 9, 2021 12:56 PM
To: r-help at r-project.org <mailto:r-help at r-project.org> 
Subject: Re: [R] Read fst files



read_fst is from the package fst. The fileformat fst uses is a binary 
format designed to be fast readable. It is a column  oriented format and 
compressed. So, to be able to work fst needs access to the file itself 
and wont accept a file connection as functions like read.table an 
variants accept.

Also, because it is a binary compressed format using a compression 
method that is fast to read, compressing also to zip seems to defeat the 
purpose of fst.

HTH,
Jan


On 09-06-2021 15:28, Duncan Murdoch wrote:
> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>> Duncan
>>
>> Yea that will work. It appears to be related to setting my working 
>> dir, for what ever reason neither seem to work
>> (1) knitr::opts_knit$set(root.dir 
>> ="~/My_Reference_Library/Regression") # from R Notebook or
>> (2) 
>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # 
>> from R chunk
>>
>> So it appears I can either (as you suggested) use two steps or combine 
>> but I need to enter the full path. Why other file types don't seem to 
>> need the full path ....?????
> 
> You need to read the documentation for read_fst() to find what it needs. 
>   If it doesn't explain this, then you should report the issue to its 
> author.
> 
>>
>> myObject <- 
>> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", 
>> filename = "myFile.fst"))
>>
>> Thank you. I guess just one of those R things
> 
> No, it's a read_fst() thing.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jun  9 23:40:36 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 9 Jun 2021 22:40:36 +0100
Subject: [R] aggregation of irregular interval time-series
In-Reply-To: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
References: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
Message-ID: <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>

Hello,

I'm not getting your simple sum:


arvaia_catture_order[, week := as.integer(format(tempo, "%U"))]
aggregate(catture ~ week, arvaia_catture_order, sum)
#  week catture
#1   19      15
#2   20       5
#3   21      78
#4   22     120


Can you explain your result better?

Hope this helps,

Rui Barradas

?s 18:57 de 09/06/21, Enrico Gabrielli escreveu:
> Hello
> I just registered on the list.
> I am an agricultural technician and I am collaborating on a research
> project on agroforestry and Brown Marmorated Stink Bug (Halyomorpha
> halys, abbreviated BMSB).
> 
> Through kobotoolbox we are collecting data of catches in traps on
> farms. Farms register inconsistently.
> I am trying to use packages for irregular time series.
> 
> Here an exemple
> the data:
> # variable monitoring time as register an import from kobotoolbox
> tempo <- as.POSIXct(c("2021-05-29 17:00:00 UTC","2021-06-05 10:52:00
> UTC","2021-06-01 17:00:00 UTC","2021-05-16 08:34:00 UTC","2021-06-05
> 17:00:00 UTC","2021-05-29 05:30:00 UTC","2021-05-23 06:30:00
> UTC","2021-05-20 13:00:00 UTC","2021-05-15 12:09:00 UTC"))
> # variable capture of BMSB
> catture <- c(25,92,23,2,5,30,23,3,15)
> # resulting table
> library(data.table)
> arvaia_catture <- data.table(tempo,catture)
> # order by time
> arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]
> 
> the catches refer to an interval, which goes from the previous
> monitoring up to the one recorded on the date
> our aim is to calculate the weekly catch
> also when a farmer, for example, enters the data on Thursday and
> Tuesday
> of the following week, on Tuesday in the trap he will find individuals
> who were also captured on Friday and Saturday, which formally are to be
> considered in the previous week.
> 
> With the data of the example
> the results (with a spreadsheet) is
> two possibile solution
> week            simple SUM week         right SUM week
> 19      17      19,44027778
> 20      26      52,91388889
> 21      55      46,4375integrand_2 <- function(x) {0.62 * (1/x)}

integrate(integrand, lower = , upper = 5)

> 22      120     99,20833333
> The right SUM week is right!
> 
> I have made several attempts
> with lubridate, padr, xts
> but the last one seems interesting to me
> with DTSg
> doing
> x_periodic <- alter(x,na.status = 'explicit',from="2021-05-15
> 12:00:00",by="min")
> colapply(x_periodic, fun = interpolateLinear)
> I managed to create a vector with all interpolated hours
> but with DTSg I still can't aggregate by week
> 
> Has anyone on the list ever faced such a problem?
> 
> Thank you
>


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun  9 23:47:55 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 9 Jun 2021 14:47:55 -0700
Subject: [R] aggregation of irregular interval time-series
In-Reply-To: <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>
References: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
 <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>
Message-ID: <CAGxFJbT2BDLChjY6cBcydJzQR7gr5fecncxxjjsddVnpWnTrCg@mail.gmail.com>

I have *not* followed this in any detail, but this line seems wrong:

arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]

Perhaps it should be:
arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo), ] ##
note the comma!

If I am mistaken, just ignore and move on.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 9, 2021 at 2:41 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> I'm not getting your simple sum:
>
>
> arvaia_catture_order[, week := as.integer(format(tempo, "%U"))]
> aggregate(catture ~ week, arvaia_catture_order, sum)
> #  week catture
> #1   19      15
> #2   20       5
> #3   21      78
> #4   22     120
>
>
> Can you explain your result better?
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 18:57 de 09/06/21, Enrico Gabrielli escreveu:
> > Hello
> > I just registered on the list.
> > I am an agricultural technician and I am collaborating on a research
> > project on agroforestry and Brown Marmorated Stink Bug (Halyomorpha
> > halys, abbreviated BMSB).
> >
> > Through kobotoolbox we are collecting data of catches in traps on
> > farms. Farms register inconsistently.
> > I am trying to use packages for irregular time series.
> >
> > Here an exemple
> > the data:
> > # variable monitoring time as register an import from kobotoolbox
> > tempo <- as.POSIXct(c("2021-05-29 17:00:00 UTC","2021-06-05 10:52:00
> > UTC","2021-06-01 17:00:00 UTC","2021-05-16 08:34:00 UTC","2021-06-05
> > 17:00:00 UTC","2021-05-29 05:30:00 UTC","2021-05-23 06:30:00
> > UTC","2021-05-20 13:00:00 UTC","2021-05-15 12:09:00 UTC"))
> > # variable capture of BMSB
> > catture <- c(25,92,23,2,5,30,23,3,15)
> > # resulting table
> > library(data.table)
> > arvaia_catture <- data.table(tempo,catture)
> > # order by time
> > arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]
> >
> > the catches refer to an interval, which goes from the previous
> > monitoring up to the one recorded on the date
> > our aim is to calculate the weekly catch
> > also when a farmer, for example, enters the data on Thursday and
> > Tuesday
> > of the following week, on Tuesday in the trap he will find individuals
> > who were also captured on Friday and Saturday, which formally are to be
> > considered in the previous week.
> >
> > With the data of the example
> > the results (with a spreadsheet) is
> > two possibile solution
> > week            simple SUM week         right SUM week
> > 19      17      19,44027778
> > 20      26      52,91388889
> > 21      55      46,4375integrand_2 <- function(x) {0.62 * (1/x)}
>
> integrate(integrand, lower = , upper = 5)
>
> > 22      120     99,20833333
> > The right SUM week is right!
> >
> > I have made several attempts
> > with lubridate, padr, xts
> > but the last one seems interesting to me
> > with DTSg
> > doing
> > x_periodic <- alter(x,na.status = 'explicit',from="2021-05-15
> > 12:00:00",by="min")
> > colapply(x_periodic, fun = interpolateLinear)
> > I managed to create a vector with all interpolated hours
> > but with DTSg I still can't aggregate by week
> >
> > Has anyone on the list ever faced such a problem?
> >
> > Thank you
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|ck@one@th| @end|ng |rom gm@||@com  Wed Jun  9 22:28:13 2021
From: er|ck@one@th| @end|ng |rom gm@||@com (Esthi Erickson)
Date: Wed, 9 Jun 2021 15:28:13 -0500
Subject: [R] Merging multiple .csv files into one dataframe
Message-ID: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>

Hi,

I am trying to merge columns from four different .csv files into one
dataframe. I am trying to do something like this
https://statisticsglobe.com/merge-csv-files-in-r . I am taking long format
.csv files, 1 being the base file (testing-long.csv) which I change to wide
format first and the three others being supplemental files that should add
columns plight, plightLitter, Root Biomass, NO3Soil, NH4Soil and then add
data to cells where the it matches any one of the values for columns,
"Exp", "Year", "Field", "Plot", "NTrt", "NAdd", "NitrAdd", "NAtm.NAdd". So
the values for the supplemental files need not match every single one of
the columns listed above and if the value does not match all the columns
exactly the cell for that column/row should not be filled. When I try the
method from that website, I do not see the supplemental columns being
added. I am wondering if there is a better way to merge multiple .csv
files. I hope this makes sense, but it is quite confusing even to me, so I
am more than happy to clarify. I am attaching the files in question.

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jun 10 00:46:37 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 09 Jun 2021 15:46:37 -0700
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KYvC5ZVEjw0sA0BHoH+Hu754qcLGi0jKokj+asHaef1ug@mail.gmail.com>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
 <CANwr6KYvC5ZVEjw0sA0BHoH+Hu754qcLGi0jKokj+asHaef1ug@mail.gmail.com>
Message-ID: <5BB488A4-9EF1-4ECC-BA77-427950DDB788@dcn.davis.ca.us>

You seem to need to educate yourself as to what "plain text" means, and to read the Posting Guide for this mailing list. Word documents are very definitely NOT plain text. Stop attempting to communicate via formatted text on this mailing list.

For security reasons this mailing list removes most attachments and formatting. Your emails sent to the list have such features (e.g Word documents and HTML formatting) stripped (removed). If you happen to send such emails directly to specific people they might have software that can allow them to view that information if they choose to risk opening attachments from a stranger (I will not), but for those of us seeing your emails on the list "what you send is not what we receive". Such emails are repeatedly violating the Posting Guidelines which will make responses much less likely and may increase the chance of a negative moderator reaction.

On June 8, 2021 8:47:52 PM PDT, Biplab Nayak <biplabn1 at gmail.com> wrote:
>Hi Greg,
>
>Please find the R Code in the word file attached here. Its plain text
>format
>
>Thanks & Regards
>Biplab Nayak
>
>On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu>
>wrote:
>
>> Biplab,
>>
>> i'm not sure how to help you here, but this list pretty much runs on
>> plain ASCII (or, these days, utf-8) e-mail.  for the most part,
>without
>> attachments.  so, simply-formatted text, including code, with some
>> mechanism in the code to initialize any data structures (data frames,
>> matrices, etc.) needed for the example.
>>
>> some of this is described in the posting guide
>> ----
>> https://www.r-project.org/posting-guide.html
>> ----
>>
>> formatting your e-mail in this way will likely increase your odds of
>a
>> helpful reply.
>>
>> cheers, Greg
>>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Jun 10 01:18:28 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 9 Jun 2021 16:18:28 -0700
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KZaEVdHHmZQAUxE1gn3qbcQ3YzXbVs=RmMQptsraoBfaw@mail.gmail.com>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
 <CANwr6KZaEVdHHmZQAUxE1gn3qbcQ3YzXbVs=RmMQptsraoBfaw@mail.gmail.com>
Message-ID: <18c59faa-b4b3-dc5f-3000-04b3f752a9cb@comcast.net>


On 6/9/21 5:06 AM, Biplab Nayak wrote:
> Hi Greg,
>
> Please find the objective of the code(bold) and code mentioned below. I was
> trying to do to achieve the below objective but somehow it's not working.


The phrase "somehow not working" is not a useful description of an outcome.

>
> 1.Order assessment based on the latest due date so select input
> automatically shows the order of assessment name.
>
> 2.Filter based on the one name or multiple names in the  select input
>
>
>
> library(tidyverse)
>
> #library(stringr)    # attached with tidyverse
>
> #library(readr)
>
> library(shiny)
>
> library(dplyr)


I'm pretty sure the tidyverse super-package includes most of the others 
with the exception of pkg:shiny (which does not appear to be needed anyway.)

Here's what my version of tidyverse loads:

Imports: broom (>= 0.5.2), cli (>= 1.1.0), crayon (>= 1.3.4), dbplyr (>= 
1.4.2), dplyr (>= 0.8.3), forcats (>= 0.4.0),
 ???????????? ggplot2 (>= 3.2.1), haven (>= 2.2.0), hms (>= 0.5.2), httr 
(>= 1.4.1), jsonlite (>= 1.6), lubridate (>=
 ???????????? 1.7.4), magrittr (>= 1.5), modelr (>= 0.1.5), pillar (>= 
1.4.2), purrr (>= 0.3.3), readr (>= 1.3.1), readxl
 ???????????? (>= 1.3.1), reprex (>= 0.3.0), rlang (>= 0.4.1), 
rstudioapi (>= 0.10), rvest (>= 0.3.5), stringr (>=
 ???????????? 1.4.0), tibble (>= 2.1.3), tidyr (>= 1.0.0), xml2 (>= 1.2.2)

> ttclasses <- read_csv("~/tmp/ttclasses.csv")
We do not have your data.
>
> #Filter data
>
> ttclasses <-ttclasses %>%
>
>     filter(str_detect(assessment, "Assignment"))
>
>   ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))
Without a result that summarizes the changes in the data composition at 
each step, we cannot make any guesses as to your problem
> ##Remove NA values.
>
> ttclasses <-ttclasses %>% drop_na("score")
>
>
>
> *## Sort  assessment based on max due_date*
>
>   ttclasses  <- ttclasses [order( - due_date, assessment ),]
>
>
>
> #Convert to factor
>
> ttclasses$assessment <- factor(ttclasses$assessment)
>
>
>
> # please see the formats in help("strptime")
>
> ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
Yes, do see ?strptime. That format assumes dates are in MM/DD/YY format, 
i.e slashes as separators and 2 digit years. Getting the date format 
wrong is a common way to create NA values. It is better not to overlay 
such efforts on top of the original column name. That way you can still 
make changes without redoing the entire data steps.
>
> ttclasses$name <- factor(ttclasses$name)
>
> Thanks & Regards
> Biplab Nayak



>
> On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu> wrote:
>
>> Biplab,
>>
>> i'm not sure how to help you here, but this list pretty much runs on
>> plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
>> attachments.  so, simply-formatted text, including code, with some
>> mechanism in the code to initialize any data structures (data frames,
>> matrices, etc.) needed for the example.
>>
>> some of this is described in the posting guide
>> ----
>> https://www.r-project.org/posting-guide.html
>> ----
>>
>> formatting your e-mail in this way will likely increase your odds of a
>> helpful reply.
>>
>> cheers, Greg
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jun 10 01:40:29 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 9 Jun 2021 16:40:29 -0700
Subject: [R] Merging multiple .csv files into one dataframe
In-Reply-To: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>
References: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>
Message-ID: <CAGxFJbS9fqUDfSOwHjb1pUU7oGBKfZUbB6cZ_o6qE86+i6=Bfg@mail.gmail.com>

I really think you need to create a simple reprex to show us what you want
to do. In doing so, you may figure out how to get what you want. I suspect
you may also need to spend some more time learning R -- following rote
examples can be a fool's errand if you don't know the basics.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 9, 2021 at 3:41 PM Esthi Erickson <ericksonesthi at gmail.com>
wrote:

> Hi,
>
> I am trying to merge columns from four different .csv files into one
> dataframe. I am trying to do something like this
> https://statisticsglobe.com/merge-csv-files-in-r . I am taking long format
> .csv files, 1 being the base file (testing-long.csv) which I change to wide
> format first and the three others being supplemental files that should add
> columns plight, plightLitter, Root Biomass, NO3Soil, NH4Soil and then add
> data to cells where the it matches any one of the values for columns,
> "Exp", "Year", "Field", "Plot", "NTrt", "NAdd", "NitrAdd", "NAtm.NAdd". So
> the values for the supplemental files need not match every single one of
> the columns listed above and if the value does not match all the columns
> exactly the cell for that column/row should not be filled. When I try the
> method from that website, I do not see the supplemental columns being
> added. I am wondering if there is a better way to merge multiple .csv
> files. I hope this makes sense, but it is quite confusing even to me, so I
> am more than happy to clarify. I am attaching the files in question.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jun 10 02:03:36 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 09 Jun 2021 17:03:36 -0700
Subject: [R] Merging multiple .csv files into one dataframe
In-Reply-To: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>
References: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>
Message-ID: <8FEBBF99-ECF8-49C1-9D4C-BC2A1B0ABE0E@dcn.davis.ca.us>

Attachments have been stripped by the mailing list. Read the Posting Guide.

Also, English can help, but R code can be ever so much more clear in indicating what you have to work with and even what you want out of the broken/missing part of your code.

https://cran.r-project.org/web/packages/reprex/index.html (read the vignette) 

On June 9, 2021 1:28:13 PM PDT, Esthi Erickson <ericksonesthi at gmail.com> wrote:
>Hi,
>
>I am trying to merge columns from four different .csv files into one
>dataframe. I am trying to do something like this
>https://statisticsglobe.com/merge-csv-files-in-r . I am taking long
>format
>.csv files, 1 being the base file (testing-long.csv) which I change to
>wide
>format first and the three others being supplemental files that should
>add
>columns plight, plightLitter, Root Biomass, NO3Soil, NH4Soil and then
>add
>data to cells where the it matches any one of the values for columns,
>"Exp", "Year", "Field", "Plot", "NTrt", "NAdd", "NitrAdd", "NAtm.NAdd".
>So
>the values for the supplemental files need not match every single one
>of
>the columns listed above and if the value does not match all the
>columns
>exactly the cell for that column/row should not be filled. When I try
>the
>method from that website, I do not see the supplemental columns being
>added. I am wondering if there is a better way to merge multiple .csv
>files. I hope this makes sense, but it is quite confusing even to me,
>so I
>am more than happy to clarify. I am attaching the files in question.
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @t@t|@t|c@84 @end|ng |rom hotm@||@com  Thu Jun 10 05:48:29 2021
From: @t@t|@t|c@84 @end|ng |rom hotm@||@com (peri He)
Date: Thu, 10 Jun 2021 03:48:29 +0000
Subject: [R] RINLA
Message-ID: <AM7PR10MB323783AF84D0445FD8D28F3FC6359@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>

Dear Friends,

I am running a simple code for rinla.  The INLA package is installed successfully on Rstudio.
But when I run inla (y~x,......) function, I get the following error: could not find function "inla"
Did anybody have the same problem before?

I would appreciate it if any information is shared.

Regards,

install.packages("INLA", repos = "https://inla.r-inla-download.org/R/stable", dep = TRUE)

library(INLA)
N = 100      #500, 5000, 25000, 100000
x = rnorm(N, mean=6, sd=2)
y = rnorm(N, mean=x,sd=1)
data = list(x=x, y=y, N=N)
# The likelihood family is ?gaussian?
model<- inla(y ~ x, family = c("gaussian"), data = data, control.predictor=list(link=1))
Summary <- (model)

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Jun 10 06:21:45 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 9 Jun 2021 21:21:45 -0700
Subject: [R] RINLA
In-Reply-To: <AM7PR10MB323783AF84D0445FD8D28F3FC6359@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>
References: <AM7PR10MB323783AF84D0445FD8D28F3FC6359@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <40d1145b-eb62-8881-7865-b72a0c76e9a7@comcast.net>


On 6/9/21 8:48 PM, peri He wrote:
> Dear Friends,
>
> I am running a simple code for rinla.  The INLA package is installed successfully on Rstudio.


Techinically, the package is installed in an R library. You are using 
Rstudio as your IDE, but it does not run packages.

> But when I run inla (y~x,......) function, I get the following error: could not find function "inla"
> Did anybody have the same problem before?
>
> I would appreciate it if any information is shared.
>
> Regards,
>
> install.packages("INLA", repos = "https://inla.r-inla-download.org/R/stable", dep = TRUE)


Despite setting dep=TRUE is still got a warning:

"Warning in install.packages :
 ? dependencies ?Ecdat?, ?mpoly?, ?symmoments? are not available"

> library(INLA)
> N = 100      #500, 5000, 25000, 100000
> x = rnorm(N, mean=6, sd=2)
> y = rnorm(N, mean=x,sd=1)
> data = list(x=x, y=y, N=N)
> # The likelihood family is ?gaussian?
> model<- inla(y ~ x, family = c("gaussian"), data = data, control.predictor=list(link=1))
> Summary <- (model)

Despite the warning, INLA installed and loaded without complaint and the 
code ran without error.

I later ran:

install.packages(c('Ecdat', 'mpoly', 'symmoments'))??????? # no problems 
here either.

So I'm unable to recreate your error.

sessionInfo()

#-------------------

R version 4.0.4 (2021-02-15)?????? #I'm admittedly not up-to-date, If 
you are,? then provide details

I did check to see if there are any later versions of pkg:INLA and could 
not find any

Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.5 LTS

Matrix products: default
BLAS:?? /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so

locale:
 ?[1] LC_CTYPE=en_US.UTF-8?????? LC_NUMERIC=C LC_TIME=en_US.UTF-8??????? 
LC_COLLATE=en_US.UTF-8
 ?[5] LC_MONETARY=en_US.UTF-8??? LC_MESSAGES=en_US.UTF-8 
LC_PAPER=en_US.UTF-8?????? LC_NAME=C
 ?[9] LC_ADDRESS=C?????????????? LC_TELEPHONE=C 
LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] parallel? stats???? graphics? grDevices utils???? datasets methods?? 
base

other attached packages:
[1] INLA_21.02.23?????? sp_1.4-5??????????? foreach_1.5.1 
Matrix_1.3-2??????? RBGL_1.66.0???????? graph_1.68.0
[7] BiocGenerics_0.36.0

loaded via a namespace (and not attached):
 ?[1] lattice_0.20-41???? codetools_0.2-18??? grid_4.0.4 
MatrixModels_0.5-0? stats4_4.0.4??????? splines_4.0.4
 ?[7] iterators_1.0.13??? tools_4.0.4???????? yaml_2.2.1 
compiler_4.0.4????? BiocManager_1.30.12



> 	[[alternative HTML version deleted]]


Rhelp is a plain-text mailing list. HTML is not welcome.

-- 

David.


From enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com  Thu Jun 10 07:33:43 2021
From: enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com (Enrico Gabrielli)
Date: Thu, 10 Jun 2021 07:33:43 +0200
Subject: [R] aggregation of irregular interval time-series
In-Reply-To: <CAGxFJbT2BDLChjY6cBcydJzQR7gr5fecncxxjjsddVnpWnTrCg@mail.gmail.com>
References: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
 <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>
 <CAGxFJbT2BDLChjY6cBcydJzQR7gr5fecncxxjjsddVnpWnTrCg@mail.gmail.com>
Message-ID: <941da4cdd608ef2c7ee11fef07047fe6009d1b6a.camel@gmail.com>

sorry, i'm a bit of a bummer at copying and saving various pieces of
code
and I'm not very experienced with R
- I am trying to build a partnership with a local IT cooperative, but
this is a job that was not foreseen and it is not covered by budget, so
I am trying to solve it myself -
I do not want to ask in ml the ready turnkey solution, but some ideas
of what could be the set of packages and functions that could be right
for me, and if anyone has been faced with such a problem.
Thank you

Enrico Gabrielli
Il giorno mer, 09/06/2021 alle 14.47 -0700, Bert Gunter ha scritto:
> I have *not* followed this in any detail, but this line seems wrong:
> 
>  arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]
> Perhaps it should be: arvaia_catture_order <-
> arvaia_catture[order(arvaia_catture$tempo), ] ## note the comma!
> If I am mistaken, just ignore and move on. 
> 
> Cheers,Bert
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming
> along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Wed, Jun 9, 2021 at 2:41 PM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> > Hello,
> > 
> > 
> > 
> > I'm not getting your simple sum:
> > 
> > 
> > 
> > 
> > 
> > arvaia_catture_order[, week := as.integer(format(tempo, "%U"))]
> > 
> > aggregate(catture ~ week, arvaia_catture_order, sum)
> > 
> > #  week catture
> > 
> > #1   19      15
> > 
> > #2   20       5
> > 
> > #3   21      78
> > 
> > #4   22     120
> > 
> > 
> > 
> > 
> > 
> > Can you explain your result better?
> > 
> > 
> > 
> > Hope this helps,
> > 
> > 
> > 
> > Rui Barradas
> > 
> > 
> > 
> > ?s 18:57 de 09/06/21, Enrico Gabrielli escreveu:
> > 
> > > Hello
> > 
> > > I just registered on the list.
> > 
> > > I am an agricultural technician and I am collaborating on a
> > research
> > 
> > > project on agroforestry and Brown Marmorated Stink Bug
> > (Halyomorpha
> > 
> > > halys, abbreviated BMSB).
> > 
> > > 
> > 
> > > Through kobotoolbox we are collecting data of catches in traps on
> > 
> > > farms. Farms register inconsistently.
> > 
> > > I am trying to use packages for irregular time series.
> > 
> > > 
> > 
> > > Here an exemple
> > 
> > > the data:
> > 
> > > # variable monitoring time as register an import from kobotoolbox
> > 
> > > tempo <- as.POSIXct(c("2021-05-29 17:00:00 UTC","2021-06-05
> > 10:52:00
> > 
> > > UTC","2021-06-01 17:00:00 UTC","2021-05-16 08:34:00 UTC","2021-
> > 06-05
> > 
> > > 17:00:00 UTC","2021-05-29 05:30:00 UTC","2021-05-23 06:30:00
> > 
> > > UTC","2021-05-20 13:00:00 UTC","2021-05-15 12:09:00 UTC"))
> > 
> > > # variable capture of BMSB
> > 
> > > catture <- c(25,92,23,2,5,30,23,3,15)
> > 
> > > # resulting table
> > 
> > > library(data.table)
> > 
> > > arvaia_catture <- data.table(tempo,catture)
> > 
> > > # order by time
> > 
> > > arvaia_catture_order <-
> > arvaia_catture[order(arvaia_catture$tempo)]
> > 
> > > 
> > 
> > > the catches refer to an interval, which goes from the previous
> > 
> > > monitoring up to the one recorded on the date
> > 
> > > our aim is to calculate the weekly catch
> > 
> > > also when a farmer, for example, enters the data on Thursday and
> > 
> > > Tuesday
> > 
> > > of the following week, on Tuesday in the trap he will find
> > individuals
> > 
> > > who were also captured on Friday and Saturday, which formally are
> > to be
> > 
> > > considered in the previous week.
> > 
> > > 
> > 
> > > With the data of the example
> > 
> > > the results (with a spreadsheet) is
> > 
> > > two possibile solution
> > 
> > > week            simple SUM week         right SUM week
> > 
> > > 19      17      19,44027778
> > 
> > > 20      26      52,91388889
> > 
> > > 21      55      46,4375integrand_2 <- function(x) {0.62 * (1/x)}
> > 
> > 
> > 
> > integrate(integrand, lower = , upper = 5)
> > 
> > 
> > 
> > > 22      120     99,20833333
> > 
> > > The right SUM week is right!
> > 
> > > 
> > 
> > > I have made several attempts
> > 
> > > with lubridate, padr, xts
> > 
> > > but the last one seems interesting to me
> > 
> > > with DTSg
> > 
> > > doing
> > 
> > > x_periodic <- alter(x,na.status = 'explicit',from="2021-05-15
> > 
> > > 12:00:00",by="min")
> > 
> > > colapply(x_periodic, fun = interpolateLinear)
> > 
> > > I managed to create a vector with all interpolated hours
> > 
> > > but with DTSg I still can't aggregate by week
> > 
> > > 
> > 
> > > Has anyone on the list ever faced such a problem?
> > 
> > > 
> > 
> > > Thank you
> > 
> > >
> > 
> > 
> > 
> > ______________________________________________
> > 
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > 
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > 
> > PLEASE do read the posting guide 
> > http://www.R-project.org/posting-guide.html
> > 
> > and provide commented, minimal, self-contained, reproducible code.
> > 
> 
> 

	[[alternative HTML version deleted]]


From dgw@term@n @end|ng |rom gm@||@com  Thu Jun 10 10:42:54 2021
From: dgw@term@n @end|ng |rom gm@||@com (David Waterman)
Date: Thu, 10 Jun 2021 09:42:54 +0100
Subject: [R] snapshot3d hangs during rmarkdown::render
Message-ID: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>

Hi all,

I tried subscribing to the list yesterday, but this does not appear to
have been successful. Therefore I am hoping this message meets
volunteer moderator approval.

I have problems using snapshot3d from rgl while trying to render an R
Markdown page. I want to do this to capture static snapshots of an
interactive widget on the page. I had this working with an earlier
version of R (sorry, forgot which), but this now hangs indefinitely at
the snapshot3d call.

Should I expect this to work? I can successfully create a snapshot
from an interactive R session with either webshot=TRUE or FALSE, just
not from within my R Markdown build.

I have created a simple reproducer, which I attempt to build using:

library(rmarkdown)
rmarkdown::render("reproducer.Rmd")

where the contents of reproducer.Rmd are:

$ cat reproducer.Rmd
---
title: "rgl test"
output:
  html_document:
    toc: true
    toc_float:
      toc_collapsed: true
---

```{r, setup, echo=FALSE}
library(rgl)
library(knitr)
knitr::knit_hooks$set(webgl = hook_webgl)
```

### Insert rgl figure

Test

```{r, webgl=TRUE, echo=FALSE}
with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length,
                  type="s", col=as.numeric(Species)))
snapshot3d("foo.png")
rglwidget()
rgl.close()
```
### END

Information about my R session:

> sessionInfo()
R version 4.1.0 (2021-05-18)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.5 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.7.1
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.7.1

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8
 [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8
 [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] webshot2_0.0.0.9000 chromote_0.0.0.9003 rmarkdown_2.8
[4] rgl_0.106.8         knitr_1.33

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.6              digest_0.6.27           later_1.2.0
 [4] mime_0.10               R6_2.5.0                lifecycle_1.0.0
 [7] xtable_1.8-4            jsonlite_1.7.2          magrittr_2.0.1
[10] evaluate_0.14           rlang_0.4.11            miniUI_0.1.1.1
[13] promises_1.2.0.1        ellipsis_0.3.2          tools_4.1.0
[16] manipulateWidget_0.11.0 htmlwidgets_1.5.3       crosstalk_1.1.1
[19] shiny_1.6.0             fastmap_1.1.0           httpuv_1.6.1
[22] xfun_0.23               compiler_4.1.0          htmltools_0.5.1.1

I got R from an Ubuntu package:

$ dpkg -s r-base-core|head
Package: r-base-core
Status: install ok installed
Priority: optional
Section: gnu-r
Installed-Size: 40697
Maintainer: Dirk Eddelbuettel <edd at debian.org>
Architecture: amd64
Source: r-base
Version: 4.1.0-1.1804.0
Replaces: r-base (<= 1.4.1-1), r-base-latex (<= 2.9.2-4),
r-cran-rcompgen (<= 0.1-17-1), r-gnome (<= 2.3.1), r-recommended (<<
1.9.0)

which came from here:

$ grep "r-project" /etc/apt/sources.list
deb https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/
# deb-src https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/

Many thanks,

David Waterman
STFC Computational Scientist


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun 10 13:23:01 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 10 Jun 2021 07:23:01 -0400
Subject: [R] snapshot3d hangs during rmarkdown::render
In-Reply-To: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
References: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
Message-ID: <3608fdc1-e007-4eef-3550-037ed12582fb@gmail.com>

I've seen this recently as well.  I've done a bunch of updating recently 
(R to 4.1.0, chromote to the latest devel version, Chrome to a new 
release) and it's probably related to one of those, but I'm not sure 
which.  What I've found is that the lockup occurs in chromote, and 
that's suspicious but not necessarily proof of the source of the problem.

Do you have the same problems if you install the older file

https://github.com/dmurdoch/drat/blob/gh-pages/src/contrib/chromote_0.0.0.9002.tar.gz

?

Duncan Murdoch

On 10/06/2021 4:42 a.m., David Waterman wrote:
> Hi all,
> 
> I tried subscribing to the list yesterday, but this does not appear to
> have been successful. Therefore I am hoping this message meets
> volunteer moderator approval.
> 
> I have problems using snapshot3d from rgl while trying to render an R
> Markdown page. I want to do this to capture static snapshots of an
> interactive widget on the page. I had this working with an earlier
> version of R (sorry, forgot which), but this now hangs indefinitely at
> the snapshot3d call.
> 
> Should I expect this to work? I can successfully create a snapshot
> from an interactive R session with either webshot=TRUE or FALSE, just
> not from within my R Markdown build.
> 
> I have created a simple reproducer, which I attempt to build using:
> 
> library(rmarkdown)
> rmarkdown::render("reproducer.Rmd")
> 
> where the contents of reproducer.Rmd are:
> 
> $ cat reproducer.Rmd
> ---
> title: "rgl test"
> output:
>    html_document:
>      toc: true
>      toc_float:
>        toc_collapsed: true
> ---
> 
> ```{r, setup, echo=FALSE}
> library(rgl)
> library(knitr)
> knitr::knit_hooks$set(webgl = hook_webgl)
> ```
> 
> ### Insert rgl figure
> 
> Test
> 
> ```{r, webgl=TRUE, echo=FALSE}
> with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length,
>                    type="s", col=as.numeric(Species)))
> snapshot3d("foo.png")
> rglwidget()
> rgl.close()
> ```
> ### END
> 
> Information about my R session:
> 
>> sessionInfo()
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.5 LTS
> 
> Matrix products: default
> BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.7.1
> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.7.1
> 
> locale:
>   [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C
>   [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8
>   [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8
>   [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C
>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] webshot2_0.0.0.9000 chromote_0.0.0.9003 rmarkdown_2.8
> [4] rgl_0.106.8         knitr_1.33
> 
> loaded via a namespace (and not attached):
>   [1] Rcpp_1.0.6              digest_0.6.27           later_1.2.0
>   [4] mime_0.10               R6_2.5.0                lifecycle_1.0.0
>   [7] xtable_1.8-4            jsonlite_1.7.2          magrittr_2.0.1
> [10] evaluate_0.14           rlang_0.4.11            miniUI_0.1.1.1
> [13] promises_1.2.0.1        ellipsis_0.3.2          tools_4.1.0
> [16] manipulateWidget_0.11.0 htmlwidgets_1.5.3       crosstalk_1.1.1
> [19] shiny_1.6.0             fastmap_1.1.0           httpuv_1.6.1
> [22] xfun_0.23               compiler_4.1.0          htmltools_0.5.1.1
> 
> I got R from an Ubuntu package:
> 
> $ dpkg -s r-base-core|head
> Package: r-base-core
> Status: install ok installed
> Priority: optional
> Section: gnu-r
> Installed-Size: 40697
> Maintainer: Dirk Eddelbuettel <edd at debian.org>
> Architecture: amd64
> Source: r-base
> Version: 4.1.0-1.1804.0
> Replaces: r-base (<= 1.4.1-1), r-base-latex (<= 2.9.2-4),
> r-cran-rcompgen (<= 0.1-17-1), r-gnome (<= 2.3.1), r-recommended (<<
> 1.9.0)
> 
> which came from here:
> 
> $ grep "r-project" /etc/apt/sources.list
> deb https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/
> # deb-src https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/
> 
> Many thanks,
> 
> David Waterman
> STFC Computational Scientist
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From wewo|@k| @end|ng |rom gm@||@com  Thu Jun 10 13:50:04 2021
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Thu, 10 Jun 2021 13:50:04 +0200
Subject: [R] Package installation for 4.1 on windows.
In-Reply-To: <52ba966a-270a-df2e-1c83-d8b219b36c2d@gmail.com>
References: <CAAjnpdhz2RjCBtEUA75p4FUGJ2nqU7DgDPrMRe=BVLWniTZX5A@mail.gmail.com>
 <52ba966a-270a-df2e-1c83-d8b219b36c2d@gmail.com>
Message-ID: <CAAjnpdixSBJp2GABFyMBMU836MF4YXx9b1fh+x-34zmLHryLSw@mail.gmail.com>

Dear Duncan,

Thank you. Indeed I did had the R_LIBS_USER env. variable defined.

Best regards
Witold

On Mon, 7 Jun 2021 at 17:48, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 07/06/2021 10:37 a.m., Witold E Wolski wrote:
> > Hello,
> >
> > I just installed R 4.1 and now trying to update install some packages.
> >
> > R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
> > Copyright (C) 2021 The R Foundation for Statistical Computing
> >
> > But when installing packages I read:
> >
> > Installing packages into ?C:/Users/wolski/Documents/R/win-library/4.0?
> >
> > Should not be a win-library/4.1. package directory be used by default?
> >
>
> I suspect something in your local setup specifies that directory.  The
> usual place to install is the directory where R was installed; it only
> switches to the user home directory if that fails, or the user requests it.
>
> Duncan Murdoch



-- 
Witold Eryk Wolski


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun 10 15:24:53 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 10 Jun 2021 09:24:53 -0400
Subject: [R] snapshot3d hangs during rmarkdown::render
In-Reply-To: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
References: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
Message-ID: <62da9ad9-93d7-aee6-efc7-66e5d24af0a2@gmail.com>

On 10/06/2021 4:42 a.m., David Waterman wrote:
> Hi all,
> 
> I tried subscribing to the list yesterday, but this does not appear to
> have been successful. Therefore I am hoping this message meets
> volunteer moderator approval.
> 
> I have problems using snapshot3d from rgl while trying to render an R
> Markdown page. I want to do this to capture static snapshots of an
> interactive widget on the page. I had this working with an earlier
> version of R (sorry, forgot which), but this now hangs indefinitely at
> the snapshot3d call.
> 
> Should I expect this to work? I can successfully create a snapshot
> from an interactive R session with either webshot=TRUE or FALSE, just
> not from within my R Markdown build.
> 
> I have created a simple reproducer, which I attempt to build using:
> 
> library(rmarkdown)
> rmarkdown::render("reproducer.Rmd")
> 
> where the contents of reproducer.Rmd are:
> 
> $ cat reproducer.Rmd
> ---
> title: "rgl test"
> output:
>    html_document:
>      toc: true
>      toc_float:
>        toc_collapsed: true
> ---
> 
> ```{r, setup, echo=FALSE}
> library(rgl)
> library(knitr)
> knitr::knit_hooks$set(webgl = hook_webgl)
> ```
> 
> ### Insert rgl figure
> 
> Test
> 
> ```{r, webgl=TRUE, echo=FALSE}
> with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length,
>                    type="s", col=as.numeric(Species)))
> snapshot3d("foo.png")
> rglwidget()
> rgl.close()
> ```

One suggestion I forgot:  try snapshot3d("foo.png", webshot = FALSE). 
This should fall back to the internal snapshot code in rgl.  You 
generally don't get as good quality of a result, but if you are not 
running on a headless system it will generally work.

Duncan Murdoch


From d@v|d@@teven@ @end|ng |rom u@u@edu  Thu Jun 10 16:52:09 2021
From: d@v|d@@teven@ @end|ng |rom u@u@edu (David K Stevens)
Date: Thu, 10 Jun 2021 08:52:09 -0600
Subject: [R] 
 [EXT] Re: Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAHqSRuS5tOjb9M4OFe50r3e+d-7tQkmP3-RVdOz3uZ3=k62DEw@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
 <24768.36892.831829.846776@stat.math.ethz.ch>
 <CAHqSRuS5tOjb9M4OFe50r3e+d-7tQkmP3-RVdOz3uZ3=k62DEw@mail.gmail.com>
Message-ID: <2dd596de-af74-2e32-15d0-91212bdd32ea@usu.edu>

This thread, in addition to being a nice Thursday morning chuckle, 
should be de rigueur for 'R 101' users. It illustrates much of the 
thinking behind R in a very simple way, without taking itself too 
seriously. Well done all!

David Stevens
**/**/

On 6/9/2021 8:35 AM, Bill Dunlap wrote:
> Martin wrote
>    Use
>        num[num %% 2 == 1]
>    instead of much slower and ...@#^$
>        num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> Read the '[' as 'such that' when the subscript is logical
> (=="Boolean"==TRUE/FALSE-values).
>
> [The original post had a typo/thinko, num<-num+i instead of num<-num+1,
> which was simply an error, not a matter of style.  R's vectorization makes
> it easy to avoid such errors.]
>
> -Bill
>
> On Wed, Jun 9, 2021 at 2:56 AM Martin Maechler <maechler at stat.math.ethz.ch>
> wrote:
>
>>>>>>> David Carlson    on Sun, 6 Jun 2021 15:21:34 -0400 writes:
>>> There is really no need for a loop:
>>> num <- 1:100
>>> num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>>> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
>> 47 49
>>> [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93
>> 95 97 99
>>
>> Well, and the above "works" but is really another proof of my
>> year-long claim that people use  ifelse(.)  *MUCH MUCH* too often,
>> and should really learn to use alternatives, in this case,
>> "R 101" (*long* before fooverse):
>>
>> Use
>>
>>      num[num %% 2 == 1]
>>
>> instead of much slower and ...@#^$
>>
>>      num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>>
>> Martin Maechler
>> ETH Zurich
>>
>>> On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
>>> <r-help at r-project.org> wrote:
>>      >>
>>      >> > i <- 1L; span <- 1:100; result <- NA;
>>      >> > for (i in span){
>>      >> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
>>      >> + }
>>      >> > span[result]
>>      >> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41
>> 43
>>
>>   [............]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> CAUTION: This email originated from outside of USU. If this appears to be a USU employee, beware of impersonators. Do not click links, reply, download images, or open attachments unless you verify the sender?s identity and know the content is safe.
>
-- 
David K Stevens, PhD,PE
Professor
Civil and Environmental Engineering
Utah State University
Logan, UT 84322-8200
david.stevens at usu.edu
014357973229


	[[alternative HTML version deleted]]


From dgw@term@n @end|ng |rom gm@||@com  Thu Jun 10 17:33:16 2021
From: dgw@term@n @end|ng |rom gm@||@com (David Waterman)
Date: Thu, 10 Jun 2021 16:33:16 +0100
Subject: [R] snapshot3d hangs during rmarkdown::render
In-Reply-To: <62da9ad9-93d7-aee6-efc7-66e5d24af0a2@gmail.com>
References: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
 <62da9ad9-93d7-aee6-efc7-66e5d24af0a2@gmail.com>
Message-ID: <CAELX-2Ratf8af+1C9gX7cHWivtUG9yCAVb-OCkOSixAABgugUQ@mail.gmail.com>

Hi Duncan,

Ah, thanks! I should have thought of that as I already tried
webshot=TRUE/FALSE in an interactive R session, but did not think to
put that in my R Markdown. I can confirm that this workaround is
successful. I can then also confirm that installing chromote
0.0.0.9002 means that I can then use webshot=TRUE.

Thanks for your help.

-- David

On Thu, 10 Jun 2021 at 14:24, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 10/06/2021 4:42 a.m., David Waterman wrote:
> > Hi all,
> >
> > I tried subscribing to the list yesterday, but this does not appear to
> > have been successful. Therefore I am hoping this message meets
> > volunteer moderator approval.
> >
> > I have problems using snapshot3d from rgl while trying to render an R
> > Markdown page. I want to do this to capture static snapshots of an
> > interactive widget on the page. I had this working with an earlier
> > version of R (sorry, forgot which), but this now hangs indefinitely at
> > the snapshot3d call.
> >
> > Should I expect this to work? I can successfully create a snapshot
> > from an interactive R session with either webshot=TRUE or FALSE, just
> > not from within my R Markdown build.
> >
> > I have created a simple reproducer, which I attempt to build using:
> >
> > library(rmarkdown)
> > rmarkdown::render("reproducer.Rmd")
> >
> > where the contents of reproducer.Rmd are:
> >
> > $ cat reproducer.Rmd
> > ---
> > title: "rgl test"
> > output:
> >    html_document:
> >      toc: true
> >      toc_float:
> >        toc_collapsed: true
> > ---
> >
> > ```{r, setup, echo=FALSE}
> > library(rgl)
> > library(knitr)
> > knitr::knit_hooks$set(webgl = hook_webgl)
> > ```
> >
> > ### Insert rgl figure
> >
> > Test
> >
> > ```{r, webgl=TRUE, echo=FALSE}
> > with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length,
> >                    type="s", col=as.numeric(Species)))
> > snapshot3d("foo.png")
> > rglwidget()
> > rgl.close()
> > ```
>
> One suggestion I forgot:  try snapshot3d("foo.png", webshot = FALSE).
> This should fall back to the internal snapshot code in rgl.  You
> generally don't get as good quality of a result, but if you are not
> running on a headless system it will generally work.
>
> Duncan Murdoch


From @bdu||@hkh@@@wneh @end|ng |rom hotm@||@com  Fri Jun 11 07:40:35 2021
From: @bdu||@hkh@@@wneh @end|ng |rom hotm@||@com (Abdullah Khasawneh)
Date: Fri, 11 Jun 2021 05:40:35 +0000
Subject: [R] Comments on "Introduction to R"
Message-ID: <VI1PR02MB377334419116F317E7345570B0349@VI1PR02MB3773.eurprd02.prod.outlook.com>

Dear all,

I have recently finished reading "Introduction to R" and enjoyed it and benefited from it immensely. Thank you very much for your efforts.

I feel the word "corrections" is a bit presumptuous, so below are a few suggestions I have regarding the text. Please let me know if I am mistaken in any.

Thank you again.

Best regards,
Abdullah Khasawneh

----------------------------------------------------------------

Page 2:
(Indeed most of the system supplied functions are themselves written in the S language.)\
I suggest a hyphen between the two highlighted words.

Page 2:
We prefer to think of it of an environment within which many classical and modern statistical techniques have been implemented.
Perhaps "as an environment"?

Page 4:
The ?Search Engine and Keywords? link in the page loaded by help.start() is particularly useful as it is contains a high-level concept list which searches though available functions.
I think these should be "as it contains" and "through".

Page 5:
Commands are separated either by a semi-colon (?;?), or by a newline.
I think the two words have been connected inadvertently.

Page 6:
When R is started at later time from the same directory it reloads the workspace from this file.
I think it's "at a later time".

Page 6:
... but it can be quite hard to decide what they might be when the several analyses have been conducted in the same directory.
Perhaps it should be "when several analyses", without "the".

Page 7:
Notice that the assignment operator (?<-?), which consists of the two characters ?<? (?less than?) and ?-? (?minus?) occurring strictly side-by-side and it ?points? to the object receiving the value of the expression.
I suggest a comma here, and deleting "and it".

Page 14:
Similarly character() is a empty character vector, and so on.
It should be "an empty". Also, a comma after "similarly" would be nice.

Page 14:
... makes it an object of length 5 consisting of just the former components with even index.
Should it be "with even indices"?

Page 17:
Since there is an builtin function var() to calculate...
I suggest "a built-in".

Page 17:
Note that R?s a builtin function sd() is something different.
There is no need for the indefinite article, and perhaps "built-in" should be hyphenated.

Page 20:
For example, if the vector h contains 24 or fewer, numbers then the command...
The comma should be after the word "numbers".

Page 20:
... would use h to set up 3 by 4 by 2 array in Z.
I believe it's "a 3-by-4-by-2". I am not sure about the hyphenation, but there should be an indefinite article.

Page 21:
The result of the function is an array of the same size as a but with old dimension given by perm[j] becoming the new j-th dimension.
It's "with the old dimension".

Page 24:
In this case any vector argument, possibly cyclically extended, are of course taken as row vectors.
Either "argument" should be pluralized, or other parts of the sentence singularized.

Page 27:
... and by default1 character vectors are coerced to be factors, whose levels are the unique values appearing in the vector.
Unfortunately, in the current edition of R, they are coerced to be character variables, if I'm not mistaken.

Page 30:
By default numeric items (except row labels) are read as numeric variables and non-numeric variables, such as Cent.heat in the example, as factors.
I suggest a comma after "By default". Also, please refer to the note above about coercion into factors.

Page 47:
... it replaces the value, in that environment, with the value of right hand side.
Maybe it should be "of the right-hand side".

Page 54:
... (Akaike?s An Information Criterion)...
I think it's "Akaike information criterion".

Page 63:
Although this is done automatically, it may useful to know that...
This is missing the verb "be".

Page 66:
Also lm.obj may be list with a coefficients component of length 2...
I recommend adding the indefinite article "a" before the word "list".

Page 68:
The identify() functions performs no plotting itself, but...
The word "functions" is pluralized.

Page 76:
R does not have builtin capabilities for dynamic or interactive graphics, e.g. rotating point clouds or to ?brushing? (interactively highlighting) points.
I suggest a hyphen in "built-in", and perhaps "for" instead of "to".

Page 79:
... platforms, considerable effort has gone into make the scripting facilities as platform-independent as is feasible.
The gerund "making" should be used here.

End of list.
Thank you for your patience.
----------------------------------------------------------------

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Fri Jun 11 11:05:50 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 11 Jun 2021 19:05:50 +1000
Subject: [R] Comments on "Introduction to R"
In-Reply-To: <VI1PR02MB377334419116F317E7345570B0349@VI1PR02MB3773.eurprd02.prod.outlook.com>
References: <VI1PR02MB377334419116F317E7345570B0349@VI1PR02MB3773.eurprd02.prod.outlook.com>
Message-ID: <CA+8X3fVDLrwa+v8xRDoiR0W=LzEhGTAmxvyryFdYLmePD-_qoA@mail.gmail.com>

Hi Abdullah,
A good job of proof reading, something too often neglected in documentation.

Jim

On Fri, Jun 11, 2021 at 4:51 PM Abdullah Khasawneh
<abdullahkhasawneh at hotmail.com> wrote:
>
> Dear all,
>
> I have recently finished reading "Introduction to R" and enjoyed it and benefited from it immensely. Thank you very much for your efforts.
>
> I feel the word "corrections" is a bit presumptuous, so below are a few suggestions I have regarding the text. Please let me know if I am mistaken in any.
>
> Thank you again.
>
> Best regards,
> Abdullah Khasawneh
>
> ----------------------------------------------------------------
>
> Page 2:
> (Indeed most of the system supplied functions are themselves written in the S language.)\
> I suggest a hyphen between the two highlighted words.
>
> Page 2:
> We prefer to think of it of an environment within which many classical and modern statistical techniques have been implemented.
> Perhaps "as an environment"?
>
> Page 4:
> The ?Search Engine and Keywords? link in the page loaded by help.start() is particularly useful as it is contains a high-level concept list which searches though available functions.
> I think these should be "as it contains" and "through".
>
> Page 5:
> Commands are separated either by a semi-colon (?;?), or by a newline.
> I think the two words have been connected inadvertently.
>
> Page 6:
> When R is started at later time from the same directory it reloads the workspace from this file.
> I think it's "at a later time".
>
> Page 6:
> ... but it can be quite hard to decide what they might be when the several analyses have been conducted in the same directory.
> Perhaps it should be "when several analyses", without "the".
>
> Page 7:
> Notice that the assignment operator (?<-?), which consists of the two characters ?<? (?less than?) and ?-? (?minus?) occurring strictly side-by-side and it ?points? to the object receiving the value of the expression.
> I suggest a comma here, and deleting "and it".
>
> Page 14:
> Similarly character() is a empty character vector, and so on.
> It should be "an empty". Also, a comma after "similarly" would be nice.
>
> Page 14:
> ... makes it an object of length 5 consisting of just the former components with even index.
> Should it be "with even indices"?
>
> Page 17:
> Since there is an builtin function var() to calculate...
> I suggest "a built-in".
>
> Page 17:
> Note that R?s a builtin function sd() is something different.
> There is no need for the indefinite article, and perhaps "built-in" should be hyphenated.
>
> Page 20:
> For example, if the vector h contains 24 or fewer, numbers then the command...
> The comma should be after the word "numbers".
>
> Page 20:
> ... would use h to set up 3 by 4 by 2 array in Z.
> I believe it's "a 3-by-4-by-2". I am not sure about the hyphenation, but there should be an indefinite article.
>
> Page 21:
> The result of the function is an array of the same size as a but with old dimension given by perm[j] becoming the new j-th dimension.
> It's "with the old dimension".
>
> Page 24:
> In this case any vector argument, possibly cyclically extended, are of course taken as row vectors.
> Either "argument" should be pluralized, or other parts of the sentence singularized.
>
> Page 27:
> ... and by default1 character vectors are coerced to be factors, whose levels are the unique values appearing in the vector.
> Unfortunately, in the current edition of R, they are coerced to be character variables, if I'm not mistaken.
>
> Page 30:
> By default numeric items (except row labels) are read as numeric variables and non-numeric variables, such as Cent.heat in the example, as factors.
> I suggest a comma after "By default". Also, please refer to the note above about coercion into factors.
>
> Page 47:
> ... it replaces the value, in that environment, with the value of right hand side.
> Maybe it should be "of the right-hand side".
>
> Page 54:
> ... (Akaike?s An Information Criterion)...
> I think it's "Akaike information criterion".
>
> Page 63:
> Although this is done automatically, it may useful to know that...
> This is missing the verb "be".
>
> Page 66:
> Also lm.obj may be list with a coefficients component of length 2...
> I recommend adding the indefinite article "a" before the word "list".
>
> Page 68:
> The identify() functions performs no plotting itself, but...
> The word "functions" is pluralized.
>
> Page 76:
> R does not have builtin capabilities for dynamic or interactive graphics, e.g. rotating point clouds or to ?brushing? (interactively highlighting) points.
> I suggest a hyphen in "built-in", and perhaps "for" instead of "to".
>
> Page 79:
> ... platforms, considerable effort has gone into make the scripting facilities as platform-independent as is feasible.
> The gerund "making" should be used here.
>
> End of list.
> Thank you for your patience.
> ----------------------------------------------------------------
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com  Fri Jun 11 16:15:06 2021
From: enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com (Enrico Gabrielli)
Date: Fri, 11 Jun 2021 16:15:06 +0200
Subject: [R] with replace na with 0?
Message-ID: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>

Hello
I almost got through the problem in post "aggregation of irregular
interval time-series"
I just don't understand how to fix that when I try
''
with(datatable,ifelse(is.na(x),y,x))
''
if y is na
replaces me with 0
and not with na

Thank you
-- 
Perito agrario Enrico Gabrielli
Tessera n. 633 Collegio Periti agrari prov. Di Modena
Biblioteca agricoltura: https://www.zotero.org/groups/aplomb/
https://it.linkedin.com/pub/enrico-gabrielli/9a/186/159
https://enricogabrielli76.wordpress.com/
https://www.inaturalist.org/observations/bonushenricus
skype: enricogabrielli (enricogabrielli76.peragr at gmail.com)


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun 11 16:24:40 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jun 2021 07:24:40 -0700
Subject: [R] with replace na with 0?
In-Reply-To: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
References: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
Message-ID: <CAGxFJbTJvHMXiw9LCNyo8ohQ+5vphHJVNgnZLXap2LoobL80nw@mail.gmail.com>

reprex?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 7:23 AM Enrico Gabrielli <
enricogabrielli76.peragr at gmail.com> wrote:

> Hello
> I almost got through the problem in post "aggregation of irregular
> interval time-series"
> I just don't understand how to fix that when I try
> ''
> with(datatable,ifelse(is.na(x),y,x))
> ''
> if y is na
> replaces me with 0
> and not with na
>
> Thank you
> --
> Perito agrario Enrico Gabrielli
> Tessera n. 633 Collegio Periti agrari prov. Di Modena
> Biblioteca agricoltura: https://www.zotero.org/groups/aplomb/
> https://it.linkedin.com/pub/enrico-gabrielli/9a/186/159
> https://enricogabrielli76.wordpress.com/
> https://www.inaturalist.org/observations/bonushenricus
> skype: enricogabrielli (enricogabrielli76.peragr at gmail.com)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @zwj|08 @end|ng |rom gm@||@com  Fri Jun 11 16:37:02 2021
From: @zwj|08 @end|ng |rom gm@||@com (Jiefei Wang)
Date: Fri, 11 Jun 2021 22:37:02 +0800
Subject: [R] with replace na with 0?
In-Reply-To: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
References: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
Message-ID: <CAGiFhPPgwZOb2YV+-pfH-nXPsmy9tBSO8_UdWOV9tsGE+P6uiQ@mail.gmail.com>

Hi,

I did not follow your previous post but your code looks confusing to me

with(datatable,ifelse(is.na(x),y,x))

Why do you have 'x' in the first place if all you want is to do the
operation on y? It's like you want to count how many apples you have
but your eyes are looking at peaches. Please rethink your code and
what you want to achieve.

Best,
Jiefei

On Fri, Jun 11, 2021 at 10:23 PM Enrico Gabrielli
<enricogabrielli76.peragr at gmail.com> wrote:
>
> Hello
> I almost got through the problem in post "aggregation of irregular
> interval time-series"
> I just don't understand how to fix that when I try
> ''
> with(datatable,ifelse(is.na(x),y,x))
> ''
> if y is na
> replaces me with 0
> and not with na
>
> Thank you
> --
> Perito agrario Enrico Gabrielli
> Tessera n. 633 Collegio Periti agrari prov. Di Modena
> Biblioteca agricoltura: https://www.zotero.org/groups/aplomb/
> https://it.linkedin.com/pub/enrico-gabrielli/9a/186/159
> https://enricogabrielli76.wordpress.com/
> https://www.inaturalist.org/observations/bonushenricus
> skype: enricogabrielli (enricogabrielli76.peragr at gmail.com)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From MF@|@on @end|ng |rom v@u@edu  Fri Jun 11 17:03:49 2021
From: MF@|@on @end|ng |rom v@u@edu (Milton O Faison)
Date: Fri, 11 Jun 2021 15:03:49 +0000
Subject: [R] question re: tidycensus
Message-ID: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>

Hi, all,

I'm having a new (for me) problem with tidycensus. When I attempt to pull data at the zcta level using get_acs, I get "GEOMETRYCOLLECTION EMPTY" in the geometry column. It does not happen when I pull data at the census tract level. This is also a fairly new problem, because I was using old code that I wrote and successfully generated maps from in the past. Any thoughts? Here are some code snippets that you can run to see what I am talking about:

zcta_test<-get_acs(geography="zcta",
                       variables=(c(all_pop = "B03002_001",
                                    white_pop = "B03002_003",
                                    black_pop = "B03002_004",
                                    latin_pop = "B03002_012")),
                       geometry=T, cache=T )

ct_test<-get_acs(geography="tract", state="51",
                 variables=(c(all_pop = "B03002_001",
                              white_pop = "B03002_003",
                              black_pop = "B03002_004",
                              latin_pop = "B03002_012")),
                 geometry=T, cache=T )

Thanks in advance for any help you can provide.

o
M. Omar Faison, Ph.D.
Associate Professor, Biology
Associate Vice President, Research, Economic Development, and Graduate Studies
Virginia State University
Petersburg, VA 23806
(804) 524-6793
http://twitter.com/omarfaison<https://urldefense.proofpoint.com/v2/url?u=http-3A__twitter.com_omarfaison&d=DwMFaQ&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=c2Jz-ZN8dT7jr1ymvzj06YmlEcGQKIlxGcJ241xeVvc&s=9hWiMv7VHiP6W763kVu0J8RpEijbsKpHXY9CDrs7buc&e=>
At VSU, we are proudly committed to providing a transformative experience for our students, strategically investing in our academic programs, embracing our position as a top Land Grant University, embracing our role as Virginia's Opportunity University, and partnering together as a University to tell our story.

"The information in this email and any attachments may be confidential and privileged. Access to this email by anyone other than the intended addressee is unauthorized. If you are not the intended recipient (or the employee or agent responsible for delivering this information to the intended recipient) please notify the sender by reply email and immediately delete this email and any copies from your computer and/or storage system. The sender does not authorize the use, distribution, disclosure or reproduction of this email (or any part of its contents) by anyone other than the intended recipient(s). No representation is made that this email and any attachments are free of viruses. Virus scanning is recommended and is the responsibility of the recipient."

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun 11 17:20:06 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jun 2021 08:20:06 -0700
Subject: [R] question re: tidycensus
In-Reply-To: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>
References: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>
Message-ID: <CAGxFJbRuojxp=WiwGu=Pe+ZMw=XFh_VM3Gqbt3zSofoJHB9rKg@mail.gmail.com>

Have you read the posting guide, linked below, which says:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

The "tidyverse" consists of contributed packages, so do not be surprised if
you do not receive a response here. Of course, if you have contacted the
maintainers, say so, but of course that doesn't guarantee a response.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 8:04 AM Milton O Faison <MFaison at vsu.edu> wrote:

> Hi, all,
>
> I'm having a new (for me) problem with tidycensus. When I attempt to pull
> data at the zcta level using get_acs, I get "GEOMETRYCOLLECTION EMPTY" in
> the geometry column. It does not happen when I pull data at the census
> tract level. This is also a fairly new problem, because I was using old
> code that I wrote and successfully generated maps from in the past. Any
> thoughts? Here are some code snippets that you can run to see what I am
> talking about:
>
> zcta_test<-get_acs(geography="zcta",
>                        variables=(c(all_pop = "B03002_001",
>                                     white_pop = "B03002_003",
>                                     black_pop = "B03002_004",
>                                     latin_pop = "B03002_012")),
>                        geometry=T, cache=T )
>
> ct_test<-get_acs(geography="tract", state="51",
>                  variables=(c(all_pop = "B03002_001",
>                               white_pop = "B03002_003",
>                               black_pop = "B03002_004",
>                               latin_pop = "B03002_012")),
>                  geometry=T, cache=T )
>
> Thanks in advance for any help you can provide.
>
> o
> M. Omar Faison, Ph.D.
> Associate Professor, Biology
> Associate Vice President, Research, Economic Development, and Graduate
> Studies
> Virginia State University
> Petersburg, VA 23806
> (804) 524-6793
> http://twitter.com/omarfaison<
> https://urldefense.proofpoint.com/v2/url?u=http-3A__twitter.com_omarfaison&d=DwMFaQ&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=c2Jz-ZN8dT7jr1ymvzj06YmlEcGQKIlxGcJ241xeVvc&s=9hWiMv7VHiP6W763kVu0J8RpEijbsKpHXY9CDrs7buc&e=
> >
> At VSU, we are proudly committed to providing a transformative experience
> for our students, strategically investing in our academic programs,
> embracing our position as a top Land Grant University, embracing our role
> as Virginia's Opportunity University, and partnering together as a
> University to tell our story.
>
> "The information in this email and any attachments may be confidential and
> privileged. Access to this email by anyone other than the intended
> addressee is unauthorized. If you are not the intended recipient (or the
> employee or agent responsible for delivering this information to the
> intended recipient) please notify the sender by reply email and immediately
> delete this email and any copies from your computer and/or storage system.
> The sender does not authorize the use, distribution, disclosure or
> reproduction of this email (or any part of its contents) by anyone other
> than the intended recipient(s). No representation is made that this email
> and any attachments are free of viruses. Virus scanning is recommended and
> is the responsibility of the recipient."
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From MF@|@on @end|ng |rom v@u@edu  Fri Jun 11 17:32:52 2021
From: MF@|@on @end|ng |rom v@u@edu (Milton O Faison)
Date: Fri, 11 Jun 2021 15:32:52 +0000
Subject: [R] question re: tidycensus
In-Reply-To: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>
References: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>
Message-ID: <BN0PR10MB495061DF0163C278FFBE3E43A1349@BN0PR10MB4950.namprd10.prod.outlook.com>

The problem is resolved.

o

M. Omar Faison, Ph.D.
Associate Professor, Biology
Associate Vice President, Research, Economic Development, and Graduate Studies
Virginia State University
Petersburg, VA 23806
(804) 524-6793
http://twitter.com/omarfaison
At VSU, we are proudly committed to providing a transformative experience for our students, strategically investing in our academic programs, embracing our position as a top Land Grant University, embracing our role as Virginia?s Opportunity University, and partnering together as a University to tell our story.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Milton O Faison
Sent: Friday, June 11, 2021 11:04 AM
To: r-help at R-project.org
Subject: [R] question re: tidycensus

[EMAIL FROM EXTERNAL SENDER] [Do not click links or open attachments unless you can confirm the sender and know the content is safe.]

Hi, all,

I'm having a new (for me) problem with tidycensus. When I attempt to pull data at the zcta level using get_acs, I get "GEOMETRYCOLLECTION EMPTY" in the geometry column. It does not happen when I pull data at the census tract level. This is also a fairly new problem, because I was using old code that I wrote and successfully generated maps from in the past. Any thoughts? Here are some code snippets that you can run to see what I am talking about:

zcta_test<-get_acs(geography="zcta",
                       variables=(c(all_pop = "B03002_001",
                                    white_pop = "B03002_003",
                                    black_pop = "B03002_004",
                                    latin_pop = "B03002_012")),
                       geometry=T, cache=T )

ct_test<-get_acs(geography="tract", state="51",
                 variables=(c(all_pop = "B03002_001",
                              white_pop = "B03002_003",
                              black_pop = "B03002_004",
                              latin_pop = "B03002_012")),
                 geometry=T, cache=T )

Thanks in advance for any help you can provide.

o
M. Omar Faison, Ph.D.
Associate Professor, Biology
Associate Vice President, Research, Economic Development, and Graduate Studies Virginia State University Petersburg, VA 23806
(804) 524-6793
https://urldefense.proofpoint.com/v2/url?u=http-3A__twitter.com_omarfaison&d=DwICAg&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=XhPOfl_j7ZHB6bCZibPPH67hk0TqkCT-EryOLREjd30&s=-Dr4LICOMPZZPalYZfcnmLhGdBAqE9yJZXjX-nGQpow&e= <https://urldefense.proofpoint.com/v2/url?u=http-3A__twitter.com_omarfaison&d=DwMFaQ&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=c2Jz-ZN8dT7jr1ymvzj06YmlEcGQKIlxGcJ241xeVvc&s=9hWiMv7VHiP6W763kVu0J8RpEijbsKpHXY9CDrs7buc&e=>
At VSU, we are proudly committed to providing a transformative experience for our students, strategically investing in our academic programs, embracing our position as a top Land Grant University, embracing our role as Virginia's Opportunity University, and partnering together as a University to tell our story.

"The information in this email and any attachments may be confidential and privileged. Access to this email by anyone other than the intended addressee is unauthorized. If you are not the intended recipient (or the employee or agent responsible for delivering this information to the intended recipient) please notify the sender by reply email and immediately delete this email and any copies from your computer and/or storage system. The sender does not authorize the use, distribution, disclosure or reproduction of this email (or any part of its contents) by anyone other than the intended recipient(s). No representation is made that this email and any attachments are free of viruses. Virus scanning is recommended and is the responsibility of the recipient."

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=XhPOfl_j7ZHB6bCZibPPH67hk0TqkCT-EryOLREjd30&s=QRP2OKyBRcfl93mIq6F159UuDSgEC62WqRDYl8ZPUf0&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=XhPOfl_j7ZHB6bCZibPPH67hk0TqkCT-EryOLREjd30&s=VG60V4vdazTZv1wM5Q0nvEh46A33pFBwkB0Bxa9jzEw&e=
and provide commented, minimal, self-contained, reproducible code.
?The information in this email and any attachments may be confidential and privileged. Access to this email by anyone other than the intended addressee is unauthorized. If you are not the intended recipient (or the employee or agent responsible for delivering this information to the intended recipient) please notify the sender by reply email and immediately delete this email and any copies from your computer and/or storage system. The sender does not authorize the use, distribution, disclosure or reproduction of this email (or any part of its contents) by anyone other than the intended recipient(s). No representation is made that this email and any attachments are free of viruses. Virus scanning is recommended and is the responsibility of the recipient.?
?The information in this email and any attachments may be confidential and privileged. Access to this email by anyone other than the intended addressee is unauthorized. If you are not the intended recipient (or the employee or agent responsible for delivering this information to the intended recipient) please notify the sender by reply email and immediately delete this email and any copies from your computer and/or storage system. The sender does not authorize the use, distribution, disclosure or reproduction of this email (or any part of its contents) by anyone other than the intended recipient(s). No representation is made that this email and any attachments are free of viruses. Virus scanning is recommended and is the responsibility of the recipient.?

From debb|e @end|ng |rom uc|@edu  Fri Jun 11 19:02:16 2021
From: debb|e @end|ng |rom uc|@edu (Debbie Hahs-Vaughn)
Date: Fri, 11 Jun 2021 17:02:16 +0000
Subject: [R] Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
Message-ID: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>

I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').

If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.

Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.

ID      Utterance
1       a baby
2       small
3       yes
4       where's his bed
5       there's his bed
6       where's his pillow
7       what is that on his head
8       hey he has his arm stuck here
9       there there's it
10      now you're gonna go night-night
11      and that's the thing you can turn on
12      yeah where's the music box
13      what is this
14      small
15      there you go baby


The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.

```

library(dplyr)
library(stringr)
library(tidyr)

coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")

str_detect(df,)

dfplus <- df %>%
  mutate(id = row_number()) %>%
  separate_rows(Utterance, sep = ' ') %>%
  mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
         Fringe = + !Core) %>%
  group_by(id) %>%
  mutate(Core = + (sum(Core) > 0),
         Fringe = + (sum(Fringe) > 0)) %>%
  slice(1) %>%
  select(-Utterance) %>%
  left_join(df) %>%
  ungroup() %>%
  select(Utterance, Core, Fringe, ID)

```

The dput() code is:

structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
"there's his bed", "where's his pillow", "what is that on his head",
"hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
"and that's the thing you can turn on", "yeah where's the music box",
"what is this", "small", "there you go baby ", "what is this for ",
"a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
"what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
"what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
"that might be in dad's bed+room ", "yes ", "there you go baby ",
"you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
-31L), class = c("tbl_df", "tbl", "data.frame"))

```

The first 10 rows of output looks like this:

Utterance       Core    Fringe  ID
1       a baby  1       0       1
2       small   1       0       2
3       yes     1       0       3
4       where's his bed 1       1       4
5       there's his bed 1       1       5
6       where's his pillow      1       1       6
7       what is that on his head        1       0       7
8       hey he has his arm stuck here   1       1       8
9       there there's it        1       0       9
10      now you're gonna go night-night 1       1       10

For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.

Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.

Any suggestions on what is happening and how to correct it are greatly appreciated.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jun 11 20:03:49 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 11 Jun 2021 19:03:49 +0100
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
Message-ID: <bc457c70-9b13-d751-fae8-00896402e1af@sapo.pt>

Hello,

For what I understood of the problem, this might be what you want.


library(dplyr)
library(stringr)

coreWordsPat <- paste0("\\b", coreWords, "\\b")
coreWordsPat <- paste(coreWordsPat, collapse = "|")

left_join(
   df %>%
     mutate(Core = +str_detect(Utterance, coreWordsPat)) %>%
     select(ID, Utterance, Core),
   df %>%
     mutate(Fringe = str_remove_all(Utterance, coreWordsPat),
            Fringe = +(nchar(trimws(Fringe)) > 0)) %>%
     select(ID, Fringe),
   by = "ID"
)


Hope this helps,

Rui Barradas

?s 18:02 de 11/06/21, Debbie Hahs-Vaughn escreveu:
> I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').
> 
> If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.
> 
> Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.
> 
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
> 
> 
> The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.
> 
> ```
> 
> library(dplyr)
> library(stringr)
> library(tidyr)
> 
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")
> 
> str_detect(df,)
> 
> dfplus <- df %>%
>    mutate(id = row_number()) %>%
>    separate_rows(Utterance, sep = ' ') %>%
>    mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>           Fringe = + !Core) %>%
>    group_by(id) %>%
>    mutate(Core = + (sum(Core) > 0),
>           Fringe = + (sum(Fringe) > 0)) %>%
>    slice(1) %>%
>    select(-Utterance) %>%
>    left_join(df) %>%
>    ungroup() %>%
>    select(Utterance, Core, Fringe, ID)
> 
> ```
> 
> The dput() code is:
> 
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
> "what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
> 
> ```
> 
> The first 10 rows of output looks like this:
> 
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
> 
> For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.
> 
> Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.
> 
> Any suggestions on what is happening and how to correct it are greatly appreciated.
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun 11 20:42:43 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jun 2021 11:42:43 -0700
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
Message-ID: <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>

Note that your specification is ambiguous. "all done" is not a single word
-- it's a phrase. So what do you want to do if:

1) "all"  and/or "done"  are also among your core words?
2) "I'm all done" is another of your core phrases.

The existence of phrases in your core list allows such conflicts to arise.
Do you claim that phrases would be chosen so that this can never happen? --
or what is your specification if they can (what constitutes a match and in
what priority)?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 10:06 AM Debbie Hahs-Vaughn <debbie at ucf.edu> wrote:

> I am working with utterances, statements spoken by children.  From each
> utterance, if one or more words in the statement match a predefined list of
> multiple 'core' words (probably 300 words), then I want to input '1' into
> 'Core' (and if none, then input '0' into 'Core').
>
> If there are one or more words in the statement that are NOT core words,
> then I want to input '1' into 'Fringe' (and if there are only core words
> and nothing extra, then input '0' into 'Fringe').  I will not have a list
> of Fringe words.
>
> Basically, right now I have a child ID and only the utterances.  Here is a
> snippet of my data.
>
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
>
>
> The following code runs but isn't doing exactly what I need--which is:  1)
> the ability to detect words from the list and define as core; 2) the
> ability to search the utterance and if there are any words in the utterance
> that are NOT core, to identify those as ?1? as I will not have a list of
> fringe words.
>
> ```
>
> library(dplyr)
> library(stringr)
> library(tidyr)
>
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that",
> "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off",
> "some", "help", "all done", "finished")
>
> str_detect(df,)
>
> dfplus <- df %>%
>   mutate(id = row_number()) %>%
>   separate_rows(Utterance, sep = ' ') %>%
>   mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>          Fringe = + !Core) %>%
>   group_by(id) %>%
>   mutate(Core = + (sum(Core) > 0),
>          Fringe = + (sum(Fringe) > 0)) %>%
>   slice(1) %>%
>   select(-Utterance) %>%
>   left_join(df) %>%
>   ungroup() %>%
>   select(Utterance, Core, Fringe, ID)
>
> ```
>
> The dput() code is:
>
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go
> night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that
> sound ",
> "what does she say ", "what she say", "should I turn the on so Laura
> doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's
> bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
>
> ```
>
> The first 10 rows of output looks like this:
>
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
>
> For example, in line 1 of the output, ?a? is a core word so ?1? for core
> is correct.  However, ?baby? should be picked up as fringe so there should
> be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be
> identified as fringe but are not.
>
> Additionally, it seems like if the utterance has parts of a core word in
> it, it?s being counted. For example, ?small? is identified as a core word
> even though it's not (but 'all done' is a core word). 'Where's his bed' is
> identified as core and fringe, although none of the words are core.
>
> Any suggestions on what is happening and how to correct it are greatly
> appreciated.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From debb|e @end|ng |rom uc|@edu  Fri Jun 11 20:54:56 2021
From: debb|e @end|ng |rom uc|@edu (Debbie Hahs-Vaughn)
Date: Fri, 11 Jun 2021 18:54:56 +0000
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>,
 <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>
Message-ID: <BN6PR11MB160367BB04C2A94E5F0CF54CDD349@BN6PR11MB1603.namprd11.prod.outlook.com>

Thank you for noting this. The utterance has to match the exact phrase (e.g., "all done") for it to constitute a match in the utterance.


________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Friday, June 11, 2021 2:42 PM
To: Debbie Hahs-Vaughn <debbie at ucf.edu>
Cc: r-help at R-project.org <r-help at r-project.org>
Subject: Re: [R] Identifying words from a list and code as 0 or 1 and words NOT on the list code as 1

Note that your specification is ambiguous. "all done" is not a single word -- it's a phrase. So what do you want to do if:

1) "all"  and/or "done"  are also among your core words?
2) "I'm all done" is another of your core phrases.

The existence of phrases in your core list allows such conflicts to arise. Do you claim that phrases would be chosen so that this can never happen? -- or what is your specification if they can (what constitutes a match and in what priority)?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 10:06 AM Debbie Hahs-Vaughn <debbie at ucf.edu<mailto:debbie at ucf.edu>> wrote:
I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').

If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.

Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.

ID      Utterance
1       a baby
2       small
3       yes
4       where's his bed
5       there's his bed
6       where's his pillow
7       what is that on his head
8       hey he has his arm stuck here
9       there there's it
10      now you're gonna go night-night
11      and that's the thing you can turn on
12      yeah where's the music box
13      what is this
14      small
15      there you go baby


The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.

```

library(dplyr)
library(stringr)
library(tidyr)

coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")

str_detect(df,)

dfplus <- df %>%
  mutate(id = row_number()) %>%
  separate_rows(Utterance, sep = ' ') %>%
  mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
         Fringe = + !Core) %>%
  group_by(id) %>%
  mutate(Core = + (sum(Core) > 0),
         Fringe = + (sum(Fringe) > 0)) %>%
  slice(1) %>%
  select(-Utterance) %>%
  left_join(df) %>%
  ungroup() %>%
  select(Utterance, Core, Fringe, ID)

```

The dput() code is:

structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
"there's his bed", "where's his pillow", "what is that on his head",
"hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
"and that's the thing you can turn on", "yeah where's the music box",
"what is this", "small", "there you go baby ", "what is this for ",
"a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
"what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
"what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
"that might be in dad's bed+room ", "yes ", "there you go baby ",
"you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
-31L), class = c("tbl_df", "tbl", "data.frame"))

```

The first 10 rows of output looks like this:

Utterance       Core    Fringe  ID
1       a baby  1       0       1
2       small   1       0       2
3       yes     1       0       3
4       where's his bed 1       1       4
5       there's his bed 1       1       5
6       where's his pillow      1       1       6
7       what is that on his head        1       0       7
8       hey he has his arm stuck here   1       1       8
9       there there's it        1       0       9
10      now you're gonna go night-night 1       1       10

For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.

Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.

Any suggestions on what is happening and how to correct it are greatly appreciated.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=04%7C01%7Cdebbie%40ucf.edu%7Cc70431490a5242f4adff08d92d08ba70%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590337793491343%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ncGdcj1KDtcw4tTB%2BGavbH%2BoM4SRy8PguEsopccJbxM%3D&reserved=0>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=04%7C01%7Cdebbie%40ucf.edu%7Cc70431490a5242f4adff08d92d08ba70%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590337793501335%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=pF35NCtRstPszG96LOC65969fvxiwNSHrQt0YBeCOlM%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From debb|e @end|ng |rom uc|@edu  Fri Jun 11 21:07:52 2021
From: debb|e @end|ng |rom uc|@edu (Debbie Hahs-Vaughn)
Date: Fri, 11 Jun 2021 19:07:52 +0000
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <bc457c70-9b13-d751-fae8-00896402e1af@sapo.pt>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>,
 <bc457c70-9b13-d751-fae8-00896402e1af@sapo.pt>
Message-ID: <BN6PR11MB1603AC48206C16DAF8D51FC8DD349@BN6PR11MB1603.namprd11.prod.outlook.com>

Yes, wonderful! This seems to work beautifully.  Thank you so much!


________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Friday, June 11, 2021 2:03 PM
To: Debbie Hahs-Vaughn <debbie at ucf.edu>; r-help at R-project.org <r-help at R-project.org>
Subject: Re: [R] Identifying words from a list and code as 0 or 1 and words NOT on the list code as 1

Hello,

For what I understood of the problem, this might be what you want.


library(dplyr)
library(stringr)

coreWordsPat <- paste0("\\b", coreWords, "\\b")
coreWordsPat <- paste(coreWordsPat, collapse = "|")

left_join(
   df %>%
     mutate(Core = +str_detect(Utterance, coreWordsPat)) %>%
     select(ID, Utterance, Core),
   df %>%
     mutate(Fringe = str_remove_all(Utterance, coreWordsPat),
            Fringe = +(nchar(trimws(Fringe)) > 0)) %>%
     select(ID, Fringe),
   by = "ID"
)


Hope this helps,

Rui Barradas

?s 18:02 de 11/06/21, Debbie Hahs-Vaughn escreveu:
> I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').
>
> If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.
>
> Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.
>
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
>
>
> The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.
>
> ```
>
> library(dplyr)
> library(stringr)
> library(tidyr)
>
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")
>
> str_detect(df,)
>
> dfplus <- df %>%
>    mutate(id = row_number()) %>%
>    separate_rows(Utterance, sep = ' ') %>%
>    mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>           Fringe = + !Core) %>%
>    group_by(id) %>%
>    mutate(Core = + (sum(Core) > 0),
>           Fringe = + (sum(Fringe) > 0)) %>%
>    slice(1) %>%
>    select(-Utterance) %>%
>    left_join(df) %>%
>    ungroup() %>%
>    select(Utterance, Core, Fringe, ID)
>
> ```
>
> The dput() code is:
>
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
> "what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
>
> ```
>
> The first 10 rows of output looks like this:
>
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
>
> For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.
>
> Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.
>
> Any suggestions on what is happening and how to correct it are greatly appreciated.
>
>        [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cdebbie%40ucf.edu%7Cfffbba02d03c4ec3314908d92d034863%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590314387984018%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=HqicUtmxaVxSROWUgRSZMjxcyCBqBCq3OzKe1Iha4Jo%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cdebbie%40ucf.edu%7Cfffbba02d03c4ec3314908d92d034863%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590314387984018%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=4MthQRICH68CnIgYsX08AAcrhyLKHloibl23VmIaCjY%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jun 12 01:10:07 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jun 2021 16:10:07 -0700
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <BN6PR11MB160367BB04C2A94E5F0CF54CDD349@BN6PR11MB1603.namprd11.prod.outlook.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
 <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>
 <BN6PR11MB160367BB04C2A94E5F0CF54CDD349@BN6PR11MB1603.namprd11.prod.outlook.com>
Message-ID: <CAGxFJbREB1FwiCQyzxhh=H0wLW53Et6WR_csOWDtK+=s0goCNw@mail.gmail.com>

First, if Rui's solution works for you, I recommend that you stop reading
and discard this email. Why  bother wasting time with stuff you don't need?!

If it doesn't work or if you would like another approach -- perhaps as a
check -- then read on.

Warning: I am a dinosaur and just use base R functionality , including
regular expressions, for these sorts of relatively simple tasks. I also
eschew pipes. So my code for your example is simply:

matchpat <- paste("\\b",coreWords, "\\b", sep = "",collapse = "|")
out <- gsub(matchpat,"",Utterance)
Core <- nchar(out) != nchar(Utterance)
Fringe <-  nchar(gsub(" +","",out)) > 0

Note that I have given the results as logical TRUE or FALSE. If you insist
on 1's and 0's, just instead do:
Core <- (nchar(out) != nchar(Utterance)) + 0
Fringe <- sign(nchar(gsub(" +","",out)))


Now for an explanation. My approach was simply to create a regular
expression (regex) match pattern that would match any of your words or
phrases. The matchpat assignment does this just by logically "or"ing (with
the"|" symbol) together all your words and phrases, each of which is
surrounded by the edge of word symbol, "\\b" (so only whole words or
phrases are matched). This is standard regex stuff, and I could do it
rather handily with r's paste() function. One word of caution, though: R's
?regex says:
"Long regular expression patterns may or may not be accepted: the POSIX
standard only requires up to 256 bytes." So what works for your reprex
might not work for your full list of coreWords. It is possible to work
around this by repeatedly applying subsets of your coreWords **provided**
you make sure that you order these subsets by the number of words in each
coreWord phrase. That is, bigger phrases must be applied first before
applying smaller phrases/words to the results. This is not hard to do, but
adds complexity, and may not be necessary. See below for an explanation.

What the second line of code does is to use the gsub() function to remove
all matches to matchpat -- which, via the "|" construction -- is anything
in your coreWord list. So this means that if you have any matches in an
utterance, what remains after gsubbing will be shorter -- fewer characters
-- than the original utterance. The Core assignment checks for this using
the nchar() function and returns TRUE or FALSE as appropriate. If all the
words in the utterance matched code words, you would be left with nothing
or a bunch of spaces. The Fringe assignment just first removes all spaces
via the gsub() and then returns TRUE if there's nothing (0 characters) left
or FALSE if there still are some left.

Finally, why do you have to start with longer phrases first if you have to
do this sequentially? Suppose you have the phrases "good night" in your
phrase list, and also the word "night". If you have to do things
sequentially instead of as one swell foop, if you applied the gsub() with a
bunch including only "night" first, then "night" will be removed and "good"
will be left. Then when the bunch containing "good night" is gsubbed after,
it won't see the whole phrase any more and "good" will be left in, which is
*not* what you said you wanted.

Finally,it is of course possible to do these things by sequentially
applying one word/phrase at a time in a loop (again, longest phrases first
for the same reason as above), but I believe this might take quite a while
with a big list of coreWords (and Utterances). The above approach using "|"
vectorizes things and takes advantage of the power of the regex engine, so
I think it will be more efficient **if it's accepted.**  But if you run
into the problem of pattern length limitations, then sequentially, one at a
time, might be simpler. My judgments of computational efficiency are often
wrong anyway.

Note: I think my approach works, but I would appreciate an on-list response
if I have erred. Also, even if correct, alternative cleverer approaches are
always welcome.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 11:54 AM Debbie Hahs-Vaughn <debbie at ucf.edu> wrote:

> Thank you for noting this. The utterance has to match the exact phrase
> (e.g., "all done") for it to constitute a match in the utterance.
>
>
> ------------------------------
> *From:* Bert Gunter <bgunter.4567 at gmail.com>
> *Sent:* Friday, June 11, 2021 2:42 PM
> *To:* Debbie Hahs-Vaughn <debbie at ucf.edu>
> *Cc:* r-help at R-project.org <r-help at r-project.org>
> *Subject:* Re: [R] Identifying words from a list and code as 0 or 1 and
> words NOT on the list code as 1
>
> Note that your specification is ambiguous. "all done" is not a single word
> -- it's a phrase. So what do you want to do if:
>
> 1) "all"  and/or "done"  are also among your core words?
> 2) "I'm all done" is another of your core phrases.
>
> The existence of phrases in your core list allows such conflicts to arise.
> Do you claim that phrases would be chosen so that this can never happen? --
> or what is your specification if they can (what constitutes a match and in
> what priority)?
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Fri, Jun 11, 2021 at 10:06 AM Debbie Hahs-Vaughn <debbie at ucf.edu>
> wrote:
>
> I am working with utterances, statements spoken by children.  From each
> utterance, if one or more words in the statement match a predefined list of
> multiple 'core' words (probably 300 words), then I want to input '1' into
> 'Core' (and if none, then input '0' into 'Core').
>
> If there are one or more words in the statement that are NOT core words,
> then I want to input '1' into 'Fringe' (and if there are only core words
> and nothing extra, then input '0' into 'Fringe').  I will not have a list
> of Fringe words.
>
> Basically, right now I have a child ID and only the utterances.  Here is a
> snippet of my data.
>
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
>
>
> The following code runs but isn't doing exactly what I need--which is:  1)
> the ability to detect words from the list and define as core; 2) the
> ability to search the utterance and if there are any words in the utterance
> that are NOT core, to identify those as ?1? as I will not have a list of
> fringe words.
>
> ```
>
> library(dplyr)
> library(stringr)
> library(tidyr)
>
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that",
> "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off",
> "some", "help", "all done", "finished")
>
> str_detect(df,)
>
> dfplus <- df %>%
>   mutate(id = row_number()) %>%
>   separate_rows(Utterance, sep = ' ') %>%
>   mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>          Fringe = + !Core) %>%
>   group_by(id) %>%
>   mutate(Core = + (sum(Core) > 0),
>          Fringe = + (sum(Fringe) > 0)) %>%
>   slice(1) %>%
>   select(-Utterance) %>%
>   left_join(df) %>%
>   ungroup() %>%
>   select(Utterance, Core, Fringe, ID)
>
> ```
>
> The dput() code is:
>
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go
> night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that
> sound ",
> "what does she say ", "what she say", "should I turn the on so Laura
> doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's
> bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
>
> ```
>
> The first 10 rows of output looks like this:
>
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
>
> For example, in line 1 of the output, ?a? is a core word so ?1? for core
> is correct.  However, ?baby? should be picked up as fringe so there should
> be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be
> identified as fringe but are not.
>
> Additionally, it seems like if the utterance has parts of a core word in
> it, it?s being counted. For example, ?small? is identified as a core word
> even though it's not (but 'all done' is a core word). 'Where's his bed' is
> identified as core and fringe, although none of the words are core.
>
> Any suggestions on what is happening and how to correct it are greatly
> appreciated.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> <https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=04%7C01%7Cdebbie%40ucf.edu%7Cc70431490a5242f4adff08d92d08ba70%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590337793491343%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ncGdcj1KDtcw4tTB%2BGavbH%2BoM4SRy8PguEsopccJbxM%3D&reserved=0>
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> <https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=04%7C01%7Cdebbie%40ucf.edu%7Cc70431490a5242f4adff08d92d08ba70%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590337793501335%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=pF35NCtRstPszG96LOC65969fvxiwNSHrQt0YBeCOlM%3D&reserved=0>
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Jun 12 01:16:29 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 12 Jun 2021 11:16:29 +1200
Subject: [R] with replace na with 0?
In-Reply-To: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
References: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
Message-ID: <20210612111629.0be2f386@rolf-Latitude-E7470>


On Fri, 11 Jun 2021 16:15:06 +0200
Enrico Gabrielli <enricogabrielli76.peragr at gmail.com> wrote:

> Hello
> I almost got through the problem in post "aggregation of irregular
> interval time-series"
> I just don't understand how to fix that when I try
> ''
> with(datatable,ifelse(is.na(x),y,x))
> ''
> if y is na
> replaces me with 0
> and not with na
> 
> Thank you

Works fine for me.  There's something going on that you're not
telling us or have messed up.

Example:

x <- 1:10
x[c(1,3,5)] <- NA
y <- (1:10)/10
y[c(3,5,7)] <- NA
mung <- data.frame(x=x,y=y)
gorp <- with(mung,ifelse(is.na(x),y,x))
cbind(mung,result=gorp)

No spurious zeroes.

Note however that this is yet another example of the unnecessary use of
ifelse().  Much better is:

gorp2 <- x
i <- is.na(x)
gorp2[i] <- y[i]

Check:

all.equal(gorp,gorp2) # TRUE

As has been pointed out, you should include a minimal reproducible
example in questions such as this.  Creating such an example almost
always reveals the source of the problem so that you can solve it
yourself.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jerem|eju@te @end|ng |rom gm@||@com  Sat Jun 12 18:24:51 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 12 Jun 2021 18:24:51 +0200
Subject: [R] most stable way to output text layout
Message-ID: <87a6nv6ofg.fsf@gmail.com>

Hello,

I'm trying to print a razor thin front-end using just text matrices and
the command prompt.

I admit that it is a bit crazy, it seems to do the job and is very quick
to implement...  Except that I don't know of to fix the layout.

I'm just seeking to map column names to a standard domain in an
interactive way.

For instance, at one iteration, the following matrix is produced:

mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g", 
"h", "i", "j", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, "n_missing:", "n_unique:", "freq:", 
NA, NA, NA, NA, NA, NA, NA, "0", "10", NA, "a", "1", NA, NA, 
NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best match: [1]:", 
NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA, 
NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))


which I represent in the console using the following command


    apply(
      mat,1,
      function(x) {
        x[is.na(x)] <-""
        cat(x,"\n")
      })

Do you have any suggestion for how can I have better control on the
print layout of the  matrix so that I can fix the width of each cell?

Best regards,
-- 
Jeremie Juste


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jun 12 18:53:44 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 12 Jun 2021 09:53:44 -0700
Subject: [R] most stable way to output text layout
In-Reply-To: <87a6nv6ofg.fsf@gmail.com>
References: <87a6nv6ofg.fsf@gmail.com>
Message-ID: <B2A822BC-BEF3-4966-AE53-0D4A7B04A39A@dcn.davis.ca.us>

Can't say this appeals to me, but sprintf would make a difference:

    apply(
      mat,1,
      function(x) {
        x[is.na(x)] <-""
        cat(paste(sprintf("%16s",x)),"\n")
      })

On June 12, 2021 9:24:51 AM PDT, Jeremie Juste <jeremiejuste at gmail.com> wrote:
>Hello,
>
>I'm trying to print a razor thin front-end using just text matrices and
>the command prompt.
>
>I admit that it is a bit crazy, it seems to do the job and is very
>quick
>to implement...  Except that I don't know of to fix the layout.
>
>I'm just seeking to map column names to a standard domain in an
>interactive way.
>
>For instance, at one iteration, the following matrix is produced:
>
>mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
>NA, NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g", 
>"h", "i", "j", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
>NA, NA, NA, NA, NA, NA, NA, NA, "n_missing:", "n_unique:", "freq:", 
>NA, NA, NA, NA, NA, NA, NA, "0", "10", NA, "a", "1", NA, NA, 
>NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best match: [1]:", 
>NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA, 
>NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))
>
>
>which I represent in the console using the following command
>
>
>    apply(
>      mat,1,
>      function(x) {
>        x[is.na(x)] <-""
>        cat(x,"\n")
>      })
>
>Do you have any suggestion for how can I have better control on the
>print layout of the  matrix so that I can fix the width of each cell?
>
>Best regards,

-- 
Sent from my phone. Please excuse my brevity.


From m|n@h@|| @end|ng |rom um|ch@edu  Sat Jun 12 19:04:02 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Sat, 12 Jun 2021 20:04:02 +0300
Subject: [R] most stable way to output text layout
In-Reply-To: Your message of "Sat, 12 Jun 2021 18:24:51 +0200."
 <87a6nv6ofg.fsf@gmail.com>
Message-ID: <1044676.1623517442@apollo2.minshall.org>

Jeremie,

i'm not totally sure i understand your desire.  but, does this help?

----
  mx <- max(nchar(mat), na.rm=TRUE)
  apply(
    mat,1,
    function(x) {
      x[is.na(x)] <-""
      cat(sprintf("%*s", mx, x), "\n")
    })
----

cheers, Greg


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jun 12 20:00:04 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 12 Jun 2021 14:00:04 -0400
Subject: [R] most stable way to output text layout
In-Reply-To: <87a6nv6ofg.fsf@gmail.com>
References: <87a6nv6ofg.fsf@gmail.com>
Message-ID: <022301d75fb4$c6094fd0$521bef70$@verizon.net>

Just FYI, Jeremie, you can do what you want fairly easily if you look at the
options available to print() and sprint().

 

You can ask NA conversion to be done here directly at print time:

 

print(mat, na.print="")

      [,1] [,2] [,3] [,4] [,5] [,6]         [,7] [,8]               [,9]
[,10]

[1,]           "a"            "n_missing:" "0"


 [2,]           "b"            "n_unique:"  "10"


 [3,]           "c"            "freq:"


 [4,]           "d"                         "a"  "b"                "c"
"d"  

 [5,]           "e"                         "1"  "1"                "1"
"1"  

 [6,]           "f"


 [7,]           "g"


 [8,]           "h"                              "best match: [1]:" "foo"


 [9,]           "i"


[10,]           "j"


 

 

But you see to want the columns of constant width, try this:

 

mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g", "h", "i", "j",
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, "n_missing:", "n_unique:", "freq:", NA, NA, NA, NA, NA, NA, NA, "0",
"10", NA, "a", "1", NA, NA, NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best
match: [1]:", NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA,
NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))

mat[is.na(mat)] <-""

col_width <- max(unlist(lapply(mat, nchar))) + 1

mat <- sprintf("%-*s", col_width, mat)

print(mat, quote=FALSE)

 

I noted your maximum column need was 16 but set it up to calculate that
dynamically and add one. Then sprint is asked to make all columns that width
and finally print put that matrix out without quotes lie this:

 

  [1]


  [7]


 [13]


 [19]                                     a                 b
c                 d                

 [25] e                 f                 g                 h
i                 j                

 [31]


 [37]


 [43]


 [49]                                     n_missing:        n_unique:
freq:                              

 [55]


 [61] 0                 10                                  a
1                                  

 [67]


 [73]                   b                 1
best match: [1]: 

 [79]
c                

 [85] 1                                                     foo


 [91]                                                       d
1                                  

 [97]


 

I made it  left justified and removing the "-" changes that.

 

You can also, of course, convert the matric to a data.frame or tibble and
play various games along these lines and the n use the ways to print a
data.frame that get you what you need.

 

 

 

 

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeremie Juste
Sent: Saturday, June 12, 2021 12:25 PM
To: r-help at r-project.org
Subject: [R] most stable way to output text layout

 

Hello,

 

I'm trying to print a razor thin front-end using just text matrices and the
command prompt.

 

I admit that it is a bit crazy, it seems to do the job and is very quick to
implement...  Except that I don't know of to fix the layout.

 

I'm just seeking to map column names to a standard domain in an interactive
way.

 

For instance, at one iteration, the following matrix is produced:

 

mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g", "h", "i", "j",
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, "n_missing:", "n_unique:", "freq:", NA, NA, NA, NA, NA, NA, NA, "0",
"10", NA, "a", "1", NA, NA, NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best
match: [1]:", NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA,
NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))

 

 

which I represent in the console using the following command

 

 

    apply(

      mat,1,

      function(x) {

        x[is.na(x)] <-""

        cat(x,"\n")

      })

 

Do you have any suggestion for how can I have better control on the print
layout of the  matrix so that I can fix the width of each cell?

 

Best regards,

--

Jeremie Juste

 

______________________________________________

 <mailto:R-help at r-project.org> R-help at r-project.org mailing list -- To
UNSUBSCRIBE and more, see  <https://stat.ethz.ch/mailman/listinfo/r-help>
https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide
<http://www.R-project.org/posting-guide.html>
http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From jerem|eju@te @end|ng |rom gm@||@com  Sat Jun 12 23:49:56 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 12 Jun 2021 23:49:56 +0200
Subject: [R] most stable way to output text layout
In-Reply-To: <B2A822BC-BEF3-4966-AE53-0D4A7B04A39A@dcn.davis.ca.us> (Jeff
 Newmiller's message of "Sat, 12 Jun 2021 09:53:44 -0700")
References: <87a6nv6ofg.fsf@gmail.com>
 <B2A822BC-BEF3-4966-AE53-0D4A7B04A39A@dcn.davis.ca.us>
Message-ID: <87tum269dn.fsf@gmail.com>

Hello,

Many thanks to you all for the prompt reply. Thanks for sharing.

On Saturday, 12 Jun 2021 at 09:53, Jeff Newmiller wrote:
> Can't say this appeals to me, but sprintf would make a difference:
>
>     apply(
>       mat,1,
>       function(x) {
>         x[is.na(x)] <-""
>         cat(paste(sprintf("%16s",x)),"\n")
>       })

@Jeff your solution seems to suit my need the most
Just reducing the field width to 8 and added a minus sign for left justification.

     apply(
      mat,1,
      function(x) {
        x[is.na(x)] <-""
        cat(paste(sprintf("-%8s",x)),"\n")
      })

On Saturday, 12 Jun 2021 at 20:04, Greg Minshall wrote:
> Jeremie,
>
> i'm not totally sure i understand your desire.  but, does this help?
>   mx <- max(nchar(mat), na.rm=TRUE)
>   apply(
>     mat,1,
>     function(x) {
>       x[is.na(x)] <-""
>       cat(sprintf("%*s", mx, x), "\n")
>     })
@Greg many thanks for your input, the mx variable will certainly come in handy.


On Saturday, 12 Jun 2021 at 14:00, Avi Gross via R-help wrote:
> mat <- sprintf("%-*s", col_width, mat)

@Avi many thanks for the left justification. It did encourage me to read
the sprintf help more carefully.


With the solution above, I get a razor thin front-end. To map columns
name interactively with barely 200 lines of code, and I can trigger the
debugger at anytime to inspect the full table. Very powerful.

Best regards,
Jeremie


From drj|m|emon @end|ng |rom gm@||@com  Sun Jun 13 00:40:38 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 13 Jun 2021 08:40:38 +1000
Subject: [R] most stable way to output text layout
In-Reply-To: <87a6nv6ofg.fsf@gmail.com>
References: <87a6nv6ofg.fsf@gmail.com>
Message-ID: <CA+8X3fX_qAACYkGwrBhBxtddQHObh-rmqr-bz2J-EM8AExMQ-g@mail.gmail.com>

Hi Jeremie,
Or assuming that the matrix will always contain strings:

tabify<-function(x,col_names=NULL) {
 # convert NAs to "NA"
 x[is.na(x)]<-"NA"
 # if this matrix doesn't have any column names
 if(is.null(col_names)) col_names<-LETTERS[1:ncol(x)]
 # get the format argument for sprintf
 tab_width<-max(nchar(c(col_names,x)))+1
 # display the column names
 cat(format(col_names,width=tab_width),"\n")
 # display the matrix
 apply(x,1,function(x) cat(format(x,width=tab_width),"\n"))
}
tabify(mat)
mat_names<-c("first","second","third","fourth","fifth","sixth","seventh",
 "eighth","ninth","tenth")
tabify(mat,mat_names)

Jim

On Sun, Jun 13, 2021 at 2:25 AM Jeremie Juste <jeremiejuste at gmail.com> wrote:
>
> Hello,
>
> I'm trying to print a razor thin front-end using just text matrices and
> the command prompt.
>
> I admit that it is a bit crazy, it seems to do the job and is very quick
> to implement...  Except that I don't know of to fix the layout.
>
> I'm just seeking to map column names to a standard domain in an
> interactive way.
>
> For instance, at one iteration, the following matrix is produced:
>
> mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
> NA, NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g",
> "h", "i", "j", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
> NA, NA, NA, NA, NA, NA, NA, NA, "n_missing:", "n_unique:", "freq:",
> NA, NA, NA, NA, NA, NA, NA, "0", "10", NA, "a", "1", NA, NA,
> NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best match: [1]:",
> NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA,
> NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))
>
>
> which I represent in the console using the following command
>
>
>     apply(
>       mat,1,
>       function(x) {
>         x[is.na(x)] <-""
>         cat(x,"\n")
>       })
>
> Do you have any suggestion for how can I have better control on the
> print layout of the  matrix so that I can fix the width of each cell?
>
> Best regards,
> --
> Jeremie Juste
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |jjjx@y @end|ng |rom gm@||@com  Sat Jun 12 17:24:31 2021
From: |jjjx@y @end|ng |rom gm@||@com (Jxay Ljj)
Date: Sat, 12 Jun 2021 11:24:31 -0400
Subject: [R] covert categoral data into number
Message-ID: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>

Hi

I would like to convert numbers into different categorical levels . For
example,

In one of column of a dataframe, there are numbers: 1,2,3, 4. How can I
cover them into "bottom", "middle", "high" , "top" in R codes?

Thanks,
JL

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jun 13 09:06:54 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 13 Jun 2021 00:06:54 -0700
Subject: [R] covert categoral data into number
In-Reply-To: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>
References: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>
Message-ID: <42B70CA5-04C3-4BE4-A811-13D75371077F@dcn.davis.ca.us>

factor( DF$numbers
      , levels=1:4
      , labels=c( "bottom", "middle", "high" , "top" )
      )

On June 12, 2021 8:24:31 AM PDT, Jxay Ljj <ljjjxay at gmail.com> wrote:
>Hi
>
>I would like to convert numbers into different categorical levels . For
>example,
>
>In one of column of a dataframe, there are numbers: 1,2,3, 4. How can I
>cover them into "bottom", "middle", "high" , "top" in R codes?
>
>Thanks,
>JL
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jerem|eju@te @end|ng |rom gm@||@com  Sun Jun 13 12:16:58 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sun, 13 Jun 2021 12:16:58 +0200
Subject: [R] most stable way to output text layout
In-Reply-To: <CA+8X3fX_qAACYkGwrBhBxtddQHObh-rmqr-bz2J-EM8AExMQ-g@mail.gmail.com>
 (Jim Lemon's message of "Sun, 13 Jun 2021 08:40:38 +1000")
References: <87a6nv6ofg.fsf@gmail.com>
 <CA+8X3fX_qAACYkGwrBhBxtddQHObh-rmqr-bz2J-EM8AExMQ-g@mail.gmail.com>
Message-ID: <87fsxm5asl.fsf@gmail.com>

Hello Jim,


On Sunday, 13 Jun 2021 at 08:40, Jim Lemon wrote:
> Hi Jeremie,
> Or assuming that the matrix will always contain strings:
>
> tabify<-function(x,col_names=NULL) {
>  # convert NAs to "NA"
>  x[is.na(x)]<-"NA"
>  # if this matrix doesn't have any column names
>  if(is.null(col_names)) col_names<-LETTERS[1:ncol(x)]
>  # get the format argument for sprintf
>  tab_width<-max(nchar(c(col_names,x)))+1
>  # display the column names
>  cat(format(col_names,width=tab_width),"\n")
>  # display the matrix
>  apply(x,1,function(x) cat(format(x,width=tab_width),"\n"))
> }
> tabify(mat)
> mat_names<-c("first","second","third","fourth","fifth","sixth","seventh",
>  "eighth","ninth","tenth")
> tabify(mat,mat_names)


Many thanks for your suggestion, I haven't considered the horizontal
spacing before. The columns names do help as well.

Best regards,
Jeremie

>
> Jim
>
> On Sun, Jun 13, 2021 at 2:25 AM Jeremie Juste <jeremiejuste at gmail.com> wrote:
>>
>> Hello,
>>
>> I'm trying to print a razor thin front-end using just text matrices and
>> the command prompt.
>>
>> I admit that it is a bit crazy, it seems to do the job and is very quick
>> to implement...  Except that I don't know of to fix the layout.
>>
>> I'm just seeking to map column names to a standard domain in an
>> interactive way.
>>
>> For instance, at one iteration, the following matrix is produced:
>>
>> mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
>> NA, NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g",
>> "h", "i", "j", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
>> NA, NA, NA, NA, NA, NA, NA, NA, "n_missing:", "n_unique:", "freq:",
>> NA, NA, NA, NA, NA, NA, NA, "0", "10", NA, "a", "1", NA, NA,
>> NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best match: [1]:",
>> NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA,
>> NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))
>>
>>
>> which I represent in the console using the following command
>>
>>
>>     apply(
>>       mat,1,
>>       function(x) {
>>         x[is.na(x)] <-""
>>         cat(x,"\n")
>>       })
>>
>> Do you have any suggestion for how can I have better control on the
>> print layout of the  matrix so that I can fix the width of each cell?
>>
>> Best regards,
>> --
>> Jeremie Juste
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Jeremie Juste


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 13 14:30:26 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 13 Jun 2021 08:30:26 -0400
Subject: [R] snapshot3d hangs during rmarkdown::render
In-Reply-To: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
References: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
Message-ID: <ebfd53c8-1d44-9321-3d5c-8f4b796e3733@gmail.com>

I believe I have found and fixed a bug in webshot2 that was causing 
these problems.  My current recommendation for installing it is to use

   remotes::install_github("dmurdoch/webshot2 at fixlockup")

For more details (and a bug fix for pkgdown, if you're trying to put 
dynamic graphics on a pkgdown site) see

   https://github.com/dmurdoch/rgl#note-about-devel-versions

Duncan Murdoch


From @v|gro@@ @end|ng |rom ver|zon@net  Sun Jun 13 18:19:00 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sun, 13 Jun 2021 12:19:00 -0400
Subject: [R] covert categoral data into number
In-Reply-To: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>
References: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>
Message-ID: <00a301d7606f$d201d210$76057630$@verizon.net>

JL,

There are many ways to do what you want. If you need to do it by yourself
using standard R, there are ways but if you are allowed to use packages,
like the forcats package in the tidyverse, it can be fairly simple. Here for
example is a way to convert a factor with the four levels you mention but
requires them to be character strings, so I converted it:

> library(forcats)
> orig <- factor(as.character(c(1:4, 4:1)))
> orig
[1] 1 2 3 4 4 3 2 1
Levels: 1 2 3 4
> changed <-  fct_recode(orig, bottom = "1", middle = "2", high = "3", top =
"4")
> changed
[1] bottom middle high   top    top    high   middle bottom
Levels: bottom middle high top

The fct_recode line can also be used with explicit strings, needed if you
have things like embedded spaces:

changed <-  fct_recode(orig, 
                       "bottom" = "1", 
                       "middle" = "2", 
                       "high" = "3", 
                       "top" = "4")

To make the changes yourself may require studying other things like how to
make substitutions  using regular expressions.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jxay Ljj
Sent: Saturday, June 12, 2021 11:25 AM
To: r-help at r-project.org
Subject: [R] covert categoral data into number

Hi

I would like to convert numbers into different categorical levels . For
example,

In one of column of a dataframe, there are numbers: 1,2,3, 4. How can I
cover them into "bottom", "middle", "high" , "top" in R codes?

Thanks,
JL

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com  Sun Jun 13 18:14:13 2021
From: enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com (Enrico Gabrielli)
Date: Sun, 13 Jun 2021 18:14:13 +0200
Subject: [R] aggregation of irregular interval time-series
In-Reply-To: <941da4cdd608ef2c7ee11fef07047fe6009d1b6a.camel@gmail.com>
References: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
 <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>
 <CAGxFJbT2BDLChjY6cBcydJzQR7gr5fecncxxjjsddVnpWnTrCg@mail.gmail.com>
 <941da4cdd608ef2c7ee11fef07047fe6009d1b6a.camel@gmail.com>
Message-ID: <1aa363c3c58938c2fa7772bead1bbeab8d27cc72.camel@gmail.com>

Hello
thanks to my friend Diego, a computer agronomist,
I was able to figure out how to do it.
I still have only one problem: how do I calculate the data for the
first week? The traps were set up on the fields on May 5th. On that
date, a 0 could be entered for all time-series. But how to do it with a
simple command?
> # the data (as copied from kobotoolbox, with the datetime of each
> capture observation, and the farm (azienda) and type of trap
> (trappola)
> library(data.table)
> library(parsedate)
> vindicta_catture_cimici<-data.table::data.table(
>     datetime = parse_iso_8601(c("2021-05-29 17:00:00",
>                  "2021-06-03 09:20:00","2021-06-05 10:52:00","2021-
> 06-03 09:30:00",
>                  "2021-06-01 17:00:00","2021-05-16 08:33:00","2021-
> 05-16 08:34:00",
>                  "2021-06-05 17:00:00","2021-06-05 11:00:00","2021-
> 05-23 18:00:00",
>                  "2021-06-03 08:45:00","2021-06-01 07:30:00",
>                  "2021-05-29 05:30:00","2021-05-30 15:00:00","2021-
> 05-29 06:00:00",
>                  "2021-05-23 06:30:00","2021-05-20 13:00:00","2021-
> 05-20 13:15:00",
>                  "2021-05-20 12:45:00","2021-05-16 16:15:00","2021-
> 05-16 16:30:00",
>                  "2021-05-20 13:00:00","2021-05-15 12:09:00",
>                  "2021-06-11 15:27:00","2021-06-11 15:30:00","2021-
> 06-11 15:43:00",
>                  "2021-06-11 15:50:00","2021-06-12 19:01:00")),
>      catture = c(25,0,92,0,23,0,2,5,0,0,6,0,30,
>                  43,0,23,3,0,0,0,13,4,15,100,0,15,2,20),
>      azienda = as.factor(c("arvaia","toderici",
>                            "arvaia","toderici","arvaia","arvaia","arv
> aia",
>                            "arvaia","arvaia","arvaia","toderici","mag
> li",
>                            "arvaia","magli","arvaia","arvaia","arvaia
> ","arvaia",
>                            "magli","magli","magli","magli","arvaia",
>                            "arvaia","arvaia","magli","magli","arvaia"
> )),
>     trappola =
> as.factor(c("fmach__feromoni___vibrazione","pessl_elettronica",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione","fmach__fer
> omoni___vibrazione",
>                            "cymatrap__feromoni","cymatrap__feromoni",
>                            "fmach__feromoni___vibrazione","fmach__fer
> omoni___vibrazione",
>                            "fmach__feromoni___vibrazione",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione","fmach__fer
> omoni___vibrazione",
>                            "cymatrap__feromoni","cymatrap__feromoni",
> "cymatrap__feromoni",
>                            "fmach__feromoni___vibrazione",
>                            "fmach__feromoni___vibrazione","fmach__fer
> omoni___vibrazione",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione"))
> )
> 
> # calculates the cumulative capture by type of trap + farm
> library(dplyr)
> vindicta_catture_cimici = vindicta_catture_cimici %>%
> group_by(trappola,azienda) %>% arrange(datetime) %>% mutate(cs =
> cumsum(catture))
> vindicta_catture_cimici <-
> group_by(vindicta_catture_cimici,trappola,azienda)
> 
> # generates a matrix of the different irregular time-series of the
> cumulative values of capture per trap
> library(reshape2)
> library(xts)
> vindicta_catture_cimici_xts <-
> as.xts.data.table(data.table(dcast(vindicta_catture_cimici, datetime
> ~ trappola + azienda,  value.var = "cs")))
> 
> # calculates by interpolation the capture data at the end of each
> week, starting from May 10 (i.e. the week we started capturing)
> tseq <- seq(ISOdate(2021,5,10,0,0,0),
> end(vindicta_catture_cimici_xts), by = "week")
> vindicta_catture_cimici_xts_week <-
> na.approx(vindicta_catture_cimici_xts,xout=tseq)
> vindicta_catture_settimanali <-
> diff.xts(vindicta_catture_cimici_xts_week)
> 
> library(TSstudio)
> ts_plot(vindicta_catture_settimanali)

Thank you

Enrico Gabrielli


From g@@@powe|| @end|ng |rom protonm@||@com  Sun Jun 13 23:28:06 2021
From: g@@@powe|| @end|ng |rom protonm@||@com (Gregg Powell)
Date: Sun, 13 Jun 2021 21:28:06 +0000
Subject: [R] Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
Message-ID: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>

This is even complicated to write into a question....

Have two data.frames (A and B)

data.frame A and B each have a name column. Want to compare A and B data.frame to each other based on the values in the 'names' columns - for every name that appears in dataframe A? but not B, I want to copy the corresponding rows to a third dataframe C, and for every name that appears in B but not A, I want to copy the corresponding rows to a fourth dataframe D. I can then row bind the dataframes C and D together and get a complete list of all the rows that were missing in either A or B.

try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!

Thanks,
Gregg Powell
AZ, USA
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 509 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210613/3f8c5da8/attachment.sig>

From g@@@powe|| @end|ng |rom protonm@||@com  Sun Jun 13 23:30:27 2021
From: g@@@powe|| @end|ng |rom protonm@||@com (Gregg Powell)
Date: Sun, 13 Jun 2021 21:30:27 +0000
Subject: [R] Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
Message-ID: <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>

This is even complicated to write into a question....

Have two data.frames (A and B)

data.frame A and B each have a name column. Want to compare A and B data.frame to each other based on the values in the 'names' columns - for every name that appears in dataframe A? but not B, I want to copy the corresponding rows to a third dataframe C, and for every name that appears in B but not A, I want to copy the corresponding rows to a fourth dataframe D. I can then row bind the dataframes C and D together and get a complete list of all the rows that were missing in either A or B.

try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
 

 Thanks,
 Gregg Powell
 AZ, USA
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 509 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210613/96ea49b3/attachment.sig>

From bgunter@4567 @end|ng |rom gm@||@com  Mon Jun 14 00:53:24 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 13 Jun 2021 15:53:24 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
Message-ID: <CAGxFJbQ79wTu6Pyb9ryM=MjZ7woDQjzDcAVxM6PhM07gD1tQ0A@mail.gmail.com>

As always, a reprex would considerably improve the chances of a useful
reply... See the posting guide linked below.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jun 13, 2021 at 2:28 PM Gregg Powell via R-help <
r-help at r-project.org> wrote:

> This is even complicated to write into a question....
>
> Have two data.frames (A and B)
>
> data.frame A and B each have a name column. Want to compare A and B
> data.frame to each other based on the values in the 'names' columns - for
> every name that appears in dataframe A  but not B, I want to copy the
> corresponding rows to a third dataframe C, and for every name that appears
> in B but not A, I want to copy the corresponding rows to a fourth dataframe
> D. I can then row bind the dataframes C and D together and get a complete
> list of all the rows that were missing in either A or B.
>
> try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
>
> Thanks,
> Gregg Powell
> AZ, USA______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jun 14 01:06:07 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 13 Jun 2021 16:06:07 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
 <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
Message-ID: <CAGxFJbSp_FagL6fGqHCDfcZiOWWoLxKht==f3L83oewn-oMN4w@mail.gmail.com>

... but I *think*

merge(A, B, by = "name", all = TRUE)

is what you want. Rows of NA's correspond to rows that were in one but not
the other.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jun 13, 2021 at 2:38 PM Gregg Powell via R-help <
r-help at r-project.org> wrote:

> This is even complicated to write into a question....
>
> Have two data.frames (A and B)
>
> data.frame A and B each have a name column. Want to compare A and B
> data.frame to each other based on the values in the 'names' columns - for
> every name that appears in dataframe A  but not B, I want to copy the
> corresponding rows to a third dataframe C, and for every name that appears
> in B but not A, I want to copy the corresponding rows to a fourth dataframe
> D. I can then row bind the dataframes C and D together and get a complete
> list of all the rows that were missing in either A or B.
>
> try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
>
>
>  Thanks,
>  Gregg Powell
>  AZ, USA______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Mon Jun 14 01:17:11 2021
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sun, 13 Jun 2021 16:17:11 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
 <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
Message-ID: <CAA99HCwNSWKo7xxu12YdYjO_JRbse+n-uj2ni+4XH7L0-D=V2A@mail.gmail.com>

Maybe something like this?

> df_A <- data.frame(names=LETTERS[1:10], values_A=1:10)
> df_B <- data.frame(names=LETTERS[6:15], values_B=11:20)
> df_AB <- merge(df_A, df_B, by="names")
> df_AAB <- merge(df_A, df_AB, all.x=TRUE)
> df_BAB <- merge(df_B, df_AB, all.x=TRUE)
> df_C <- df_AAB[is.na(df_AAB$values_B), ]
> df_D <- df_BAB[is.na(df_BAB$values_A), ]
> df_AB
  names values_A values_B
1     F        6       11
2     G        7       12
3     H        8       13
4     I        9       14
5     J       10       15
> df_C
  names values_A values_B
1     A        1       NA
2     B        2       NA
3     C        3       NA
4     D        4       NA
5     E        5       NA
> df_D
   names values_B values_A
6      K       16       NA
7      L       17       NA
8      M       18       NA
9      N       19       NA
10     O       20       NA
>

HTH, Bill.

W. Michels, Ph.D.











On Sun, Jun 13, 2021 at 2:38 PM Gregg Powell via R-help
<r-help at r-project.org> wrote:
>
> This is even complicated to write into a question....
>
> Have two data.frames (A and B)
>
> data.frame A and B each have a name column. Want to compare A and B data.frame to each other based on the values in the 'names' columns - for every name that appears in dataframe A  but not B, I want to copy the corresponding rows to a third dataframe C, and for every name that appears in B but not A, I want to copy the corresponding rows to a fourth dataframe D. I can then row bind the dataframes C and D together and get a complete list of all the rows that were missing in either A or B.
>
> try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
>
>
>  Thanks,
>  Gregg Powell
>  AZ, USA______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From g@@@powe|| @end|ng |rom protonm@||@com  Mon Jun 14 01:47:52 2021
From: g@@@powe|| @end|ng |rom protonm@||@com (Gregg Powell)
Date: Sun, 13 Jun 2021 23:47:52 +0000
Subject: [R] Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <CAA99HCwNSWKo7xxu12YdYjO_JRbse+n-uj2ni+4XH7L0-D=V2A@mail.gmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
 <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
 <CAA99HCwNSWKo7xxu12YdYjO_JRbse+n-uj2ni+4XH7L0-D=V2A@mail.gmail.com>
Message-ID: <fsKfH_snKQxcRBHo26bZhbtK7dORwYPiOSqM-WomXNsPFxi60PxerBzsmvfk6w-B4X4PaANKMq5aJuz_VKowaI8TzT5wQGYHV6cWVQvM8PY=@protonmail.com>

Thanks Dr. Michaels.


??????? Original Message ???????

On Sunday, June 13th, 2021 at 4:17 PM, William Michels <wjm1 at caa.columbia.edu> wrote:

> Maybe something like this?
> 

> > df_A <- data.frame(names=LETTERS[1:10], values_A=1:10)
> > 

> > df_B <- data.frame(names=LETTERS[6:15], values_B=11:20)
> > 

> > df_AB <- merge(df_A, df_B, by="names")
> > 

> > df_AAB <- merge(df_A, df_AB, all.x=TRUE)
> > 

> > df_BAB <- merge(df_B, df_AB, all.x=TRUE)
> > 

> > df_C <- df_AAB[is.na(df_AAB$values_B), ]
> > 

> > df_D <- df_BAB[is.na(df_BAB$values_A), ]
> > 

> > df_AB
> 

> names values_A values_B
> 

> 1 F 6 11
> 

> 2 G 7 12
> 

> 3 H 8 13
> 

> 4 I 9 14
> 

> 5 J 10 15
> 

> > df_C
> 

> names values_A values_B
> 

> 1 A 1 NA
> 

> 2 B 2 NA
> 

> 3 C 3 NA
> 

> 4 D 4 NA
> 

> 5 E 5 NA
> 

> > df_D
> 

> names values_B values_A
> 

> 6 K 16 NA
> 

> 7 L 17 NA
> 

> 8 M 18 NA
> 

> 9 N 19 NA
> 

> 10 O 20 NA
> 

> HTH, Bill.
> 

> W. Michels, Ph.D.
> 

> On Sun, Jun 13, 2021 at 2:38 PM Gregg Powell via R-help
> 

> r-help at r-project.org wrote:
> 

> > This is even complicated to write into a question....
> > 

> > Have two data.frames (A and B)
> > 

> > data.frame A and B each have a name column. Want to compare A and B data.frame to each other based on the values in the 'names' columns - for every name that appears in dataframe A but not B, I want to copy the corresponding rows to a third dataframe C, and for every name that appears in B but not A, I want to copy the corresponding rows to a fourth dataframe D. I can then row bind the dataframes C and D together and get a complete list of all the rows that were missing in either A or B.
> > 

> > try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
> > 

> > Thanks,
> > 

> > Gregg Powell
> > 

> > AZ, USA______________________________________________
> > 

> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > 

> > https://stat.ethz.ch/mailman/listinfo/r-help
> > 

> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > 

> > and provide commented, minimal, self-contained, reproducible code.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 509 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210613/a3a9daa8/attachment.sig>

