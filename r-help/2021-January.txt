From r|tm84 @end|ng |rom gm@||@com  Fri Jan  1 12:59:20 2021
From: r|tm84 @end|ng |rom gm@||@com (Ritwik Mohapatra)
Date: Fri, 1 Jan 2021 17:29:20 +0530
Subject: [R] Multiple values not getting displayed in output based on
 multiple input selection from dropdown in R shiny
Message-ID: <CAGY2U90zfJV_ff+C+QADKPmCMOmw5S2fe1rYRdzj3=jXjqh4+Q@mail.gmail.com>

Hi All,

Happy New Year to All.

I have been trying to create a multi input select list/dropdown using r
shiny but when i select more than two values from the input,it doesn't show
the output for all the values selected in the dropdown.

The code is as follows:

knitr::opts_chunk$set(echo = TRUE)
library(shiny)

ui <- fluidPage(
selectInput("Region","Select
Region",max_usage_hours_per_region$Region,multiple=TRUE),
tableOutput("table")
)
server <- function(input, output) {
output$table <- renderTable(
max_usage_hours_per_region[max_usage_hours_per_region$Region==input$Region,])}
shinyApp(ui = ui, server = server)

  max_usage_hours_per_region is a dataframe with the following output:-

    Region Sum_as_Hours
1   Africa    1156.0833
2 Americas     740.1667
3     APAC     740.2833
4   Europe    1895.2000
5      PDO    1053.3500
6       UK       0.0000


Can anyone help with the same.

Thanks.

Regards,
Ritwik

	[[alternative HTML version deleted]]


From @rne@henn|ng@en @end|ng |rom gm@||@com  Fri Jan  1 13:01:41 2021
From: @rne@henn|ng@en @end|ng |rom gm@||@com (Arne Henningsen)
Date: Fri, 1 Jan 2021 13:01:41 +0100
Subject: [R] Interpreting coefficient in selection and outcome Heckman
 models in sampleSelection
In-Reply-To: <2123327297.541879.1609160065199@mail1.libero.it>
References: <2123327297.541879.1609160065199@mail1.libero.it>
Message-ID: <CAMTWbJgRzzTYqyQThJapisyhQpBJCN37V7_VcnTmOQJwBsm-tg@mail.gmail.com>

Dear Marinella

Implementing a function in the sampleSelection package that calculates
marginal effects is still on my to-do list but I probably won't
implement it soon, because I have many other things with higher
priority. Sorry! However, you are invited to implement this feature in
the sampleSelection package; I would assist you with this.

Best regards,
Arne


On Mon, 28 Dec 2020 at 15:22, Marinella Cirillo via R-help
<r-help at r-project.org> wrote:
>
> Dear Arne,
>
> I have just read the exchange of messages with Mark Bulling.I was wondering if you have discovered/developed a function to calculate the marginal effects of the selection and outcome equations (sampleSelection).
>
>
>
> Thank you
>
> Marinella
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Arne Henningsen
http://www.arne-henningsen.name


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jan  1 16:49:53 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 1 Jan 2021 07:49:53 -0800
Subject: [R] Multiple values not getting displayed in output based on
 multiple input selection from dropdown in R shiny
In-Reply-To: <CAGY2U90zfJV_ff+C+QADKPmCMOmw5S2fe1rYRdzj3=jXjqh4+Q@mail.gmail.com>
References: <CAGY2U90zfJV_ff+C+QADKPmCMOmw5S2fe1rYRdzj3=jXjqh4+Q@mail.gmail.com>
Message-ID: <CAGxFJbRmute7f492u5gndjjSg3_RtMAu6TFxkfCEQ44SP4VJ9Q@mail.gmail.com>

Shiny is an R package from RStudio, a wholly separate organization from R.
So note, per the posting guide linked below,

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<http://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

RStudio maintains their own help resources  and there may even be something
specifically devoted to Shiny. So their site is where you should go for
help, not here (though you might get lucky and get a reply here).

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jan 1, 2021 at 3:59 AM Ritwik Mohapatra <ritm84 at gmail.com> wrote:

> Hi All,
>
> Happy New Year to All.
>
> I have been trying to create a multi input select list/dropdown using r
> shiny but when i select more than two values from the input,it doesn't show
> the output for all the values selected in the dropdown.
>
> The code is as follows:
>
> knitr::opts_chunk$set(echo = TRUE)
> library(shiny)
>
> ui <- fluidPage(
> selectInput("Region","Select
> Region",max_usage_hours_per_region$Region,multiple=TRUE),
> tableOutput("table")
> )
> server <- function(input, output) {
> output$table <- renderTable(
>
> max_usage_hours_per_region[max_usage_hours_per_region$Region==input$Region,])}
> shinyApp(ui = ui, server = server)
>
>   max_usage_hours_per_region is a dataframe with the following output:-
>
>     Region Sum_as_Hours
> 1   Africa    1156.0833
> 2 Americas     740.1667
> 3     APAC     740.2833
> 4   Europe    1895.2000
> 5      PDO    1053.3500
> 6       UK       0.0000
>
>
> Can anyone help with the same.
>
> Thanks.
>
> Regards,
> Ritwik
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jan  1 21:20:00 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 1 Jan 2021 12:20:00 -0800
Subject: [R] Does anyone have any use for this?
Message-ID: <CAGxFJbQwMLHBFc93-O4dav_+gL=RAMGAL6gcrGYxnRtbcOKz2g@mail.gmail.com>

Hi all:

In the course of playing around with other issues, I wrote the following
little function that allows functions to keep state
and easily replay and update their state.(see comments after):

memify <- function(f)
{
   if (is.primitive(f)) {
      cat("Cannot memify primitive functions.\n")
      return(NULL)
   }
   if (!inherits(f, "function"))
      stop("Argument must inherit from class 'function'")
   arglist <- list()
   structure(
      function(...) {
         m <- tryCatch(
            as.list(match.call(f)[-1]),
            error = function(e) {
               warning("Bad function call; cannot update arguments\n")
               return(NULL)
            }
         )
         nm <- names(m)
         hasname <- nm != "" #logical index of named values
         if (any(hasname)) {
            if (anyDuplicated(nm, incomparables = ""))
               warning("Duplicated names in call; only the first will be
used.")
            arglist <<- modifyList(arglist, m[hasname]) ## this is what
does the job
         }
         do.call(f, modifyList(m, arglist))
      },
      class = c("memified", class(f)))
}

Examples:

 x <- 1:9; y <- runif(9)
 plt <- memify(plot)
 x <- 1:9; y <- runif(9)
 plt(x,y, col = "blue")  ## plt "remembers" these arguments; i.e. keeps
state
 plt( type = "b") ## all other arguments as previous
 plt(col = "red") ## ditto

So my question is: Beyond allowing one to easily change/add argument values
and replay when there are lots of arguments floating around, which we often
use an IDE's editor to do, is there any real use for this? I confess that,
like Pygmalion, I have been charmed by this idea, but it could well be
useless, By all means feel free to chastise me if so.

1. I am aware that many functions already have "update" methods to "update"
their results without re-entering all arguments -- e.g. lattice graphics,
glm, etc.
2. Several packages -- rlang and R6 anyway -- but very likely more, do this
sort of thing and way more; the price is added complexity, of course.
3. I realize also that keeping state would be a bad idea in many
circumstances, e.g. essentially changing documented defaults.

Reply privately to praise or bury if you do not think this is of any
interest to readers of this list. Publicly is fine, too. If it's dumb it's
dumb.

Cheers and best wishes for a better new year for us all,

Bert Gunter

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Sat Jan  2 02:32:02 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 2 Jan 2021 14:32:02 +1300
Subject: [R] Does anyone have any use for this?
In-Reply-To: <CAGxFJbQwMLHBFc93-O4dav_+gL=RAMGAL6gcrGYxnRtbcOKz2g@mail.gmail.com>
References: <CAGxFJbQwMLHBFc93-O4dav_+gL=RAMGAL6gcrGYxnRtbcOKz2g@mail.gmail.com>
Message-ID: <CAB8pepw1+cFC6ahrpUiYjo60Fmk4LZMYHSoaHgzVXDO+5ppj4Q@mail.gmail.com>

I'm not enthusiastic about nonstandard evaluation and allowing
functions to change state data.
Currently, I use some of this in my own packages, but I'm planning to
remove most of it.

But I did have some fun with your function.

----------
plt <- memify (plot)

x <- 1:12
y1 <- seq (0, 18,, 12)
y2 <- c (
    16.88, 16.04, 13.23, 13.88, 11.85, 9.61,
     9.28,  5.81,  7.52,  3.40,  3.37, 0.07)

#test 1
plt (x, y1, type="l")
#test 2
plt (ylim = c (18, 0) )

#important econometric timeseries analysis
plt (y=y2, main="Monthly NZ GDP (Millions)")
----------

Note:
This data is not accurate.


On Sat, Jan 2, 2021 at 9:20 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> Hi all:
>
> In the course of playing around with other issues, I wrote the following
> little function that allows functions to keep state
> and easily replay and update their state.(see comments after):
>
> memify <- function(f)
> {
>    if (is.primitive(f)) {
>       cat("Cannot memify primitive functions.\n")
>       return(NULL)
>    }
>    if (!inherits(f, "function"))
>       stop("Argument must inherit from class 'function'")
>    arglist <- list()
>    structure(
>       function(...) {
>          m <- tryCatch(
>             as.list(match.call(f)[-1]),
>             error = function(e) {
>                warning("Bad function call; cannot update arguments\n")
>                return(NULL)
>             }
>          )
>          nm <- names(m)
>          hasname <- nm != "" #logical index of named values
>          if (any(hasname)) {
>             if (anyDuplicated(nm, incomparables = ""))
>                warning("Duplicated names in call; only the first will be
> used.")
>             arglist <<- modifyList(arglist, m[hasname]) ## this is what
> does the job
>          }
>          do.call(f, modifyList(m, arglist))
>       },
>       class = c("memified", class(f)))
> }
>
> Examples:
>
>  x <- 1:9; y <- runif(9)
>  plt <- memify(plot)
>  x <- 1:9; y <- runif(9)
>  plt(x,y, col = "blue")  ## plt "remembers" these arguments; i.e. keeps
> state
>  plt( type = "b") ## all other arguments as previous
>  plt(col = "red") ## ditto
>
> So my question is: Beyond allowing one to easily change/add argument values
> and replay when there are lots of arguments floating around, which we often
> use an IDE's editor to do, is there any real use for this? I confess that,
> like Pygmalion, I have been charmed by this idea, but it could well be
> useless, By all means feel free to chastise me if so.
>
> 1. I am aware that many functions already have "update" methods to "update"
> their results without re-entering all arguments -- e.g. lattice graphics,
> glm, etc.
> 2. Several packages -- rlang and R6 anyway -- but very likely more, do this
> sort of thing and way more; the price is added complexity, of course.
> 3. I realize also that keeping state would be a bad idea in many
> circumstances, e.g. essentially changing documented defaults.
>
> Reply privately to praise or bury if you do not think this is of any
> interest to readers of this list. Publicly is fine, too. If it's dumb it's
> dumb.
>
> Cheers and best wishes for a better new year for us all,
>
> Bert Gunter
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @purd|e@@ @end|ng |rom gm@||@com  Sat Jan  2 02:35:38 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 2 Jan 2021 14:35:38 +1300
Subject: [R] Does anyone have any use for this?
In-Reply-To: <CAB8pepw1+cFC6ahrpUiYjo60Fmk4LZMYHSoaHgzVXDO+5ppj4Q@mail.gmail.com>
References: <CAGxFJbQwMLHBFc93-O4dav_+gL=RAMGAL6gcrGYxnRtbcOKz2g@mail.gmail.com>
 <CAB8pepw1+cFC6ahrpUiYjo60Fmk4LZMYHSoaHgzVXDO+5ppj4Q@mail.gmail.com>
Message-ID: <CAB8pepwVEmcVx1mB5+hoistdykX-k=G=brLjxFD__v1xW5M8nQ@mail.gmail.com>

And it was supposed to say billions.

plt (main="Monthly NZ GDP (Billions)")


On Sat, Jan 2, 2021 at 2:32 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> I'm not enthusiastic about nonstandard evaluation and allowing
> functions to change state data.
> Currently, I use some of this in my own packages, but I'm planning to
> remove most of it.
>
> But I did have some fun with your function.
>
> ----------
> plt <- memify (plot)
>
> x <- 1:12
> y1 <- seq (0, 18,, 12)
> y2 <- c (
>     16.88, 16.04, 13.23, 13.88, 11.85, 9.61,
>      9.28,  5.81,  7.52,  3.40,  3.37, 0.07)
>
> #test 1
> plt (x, y1, type="l")
> #test 2
> plt (ylim = c (18, 0) )
>
> #important econometric timeseries analysis
> plt (y=y2, main="Monthly NZ GDP (Millions)")
> ----------
>
> Note:
> This data is not accurate.
>
>
> On Sat, Jan 2, 2021 at 9:20 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> > Hi all:
> >
> > In the course of playing around with other issues, I wrote the following
> > little function that allows functions to keep state
> > and easily replay and update their state.(see comments after):
> >
> > memify <- function(f)
> > {
> >    if (is.primitive(f)) {
> >       cat("Cannot memify primitive functions.\n")
> >       return(NULL)
> >    }
> >    if (!inherits(f, "function"))
> >       stop("Argument must inherit from class 'function'")
> >    arglist <- list()
> >    structure(
> >       function(...) {
> >          m <- tryCatch(
> >             as.list(match.call(f)[-1]),
> >             error = function(e) {
> >                warning("Bad function call; cannot update arguments\n")
> >                return(NULL)
> >             }
> >          )
> >          nm <- names(m)
> >          hasname <- nm != "" #logical index of named values
> >          if (any(hasname)) {
> >             if (anyDuplicated(nm, incomparables = ""))
> >                warning("Duplicated names in call; only the first will be
> > used.")
> >             arglist <<- modifyList(arglist, m[hasname]) ## this is what
> > does the job
> >          }
> >          do.call(f, modifyList(m, arglist))
> >       },
> >       class = c("memified", class(f)))
> > }
> >
> > Examples:
> >
> >  x <- 1:9; y <- runif(9)
> >  plt <- memify(plot)
> >  x <- 1:9; y <- runif(9)
> >  plt(x,y, col = "blue")  ## plt "remembers" these arguments; i.e. keeps
> > state
> >  plt( type = "b") ## all other arguments as previous
> >  plt(col = "red") ## ditto
> >
> > So my question is: Beyond allowing one to easily change/add argument values
> > and replay when there are lots of arguments floating around, which we often
> > use an IDE's editor to do, is there any real use for this? I confess that,
> > like Pygmalion, I have been charmed by this idea, but it could well be
> > useless, By all means feel free to chastise me if so.
> >
> > 1. I am aware that many functions already have "update" methods to "update"
> > their results without re-entering all arguments -- e.g. lattice graphics,
> > glm, etc.
> > 2. Several packages -- rlang and R6 anyway -- but very likely more, do this
> > sort of thing and way more; the price is added complexity, of course.
> > 3. I realize also that keeping state would be a bad idea in many
> > circumstances, e.g. essentially changing documented defaults.
> >
> > Reply privately to praise or bury if you do not think this is of any
> > interest to readers of this list. Publicly is fine, too. If it's dumb it's
> > dumb.
> >
> > Cheers and best wishes for a better new year for us all,
> >
> > Bert Gunter
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From peter@|@ng|e|der @end|ng |rom gm@||@com  Sat Jan  2 07:03:56 2021
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Fri, 1 Jan 2021 22:03:56 -0800
Subject: [R] Does anyone have any use for this?
In-Reply-To: <CAGxFJbQwMLHBFc93-O4dav_+gL=RAMGAL6gcrGYxnRtbcOKz2g@mail.gmail.com>
References: <CAGxFJbQwMLHBFc93-O4dav_+gL=RAMGAL6gcrGYxnRtbcOKz2g@mail.gmail.com>
Message-ID: <CA+hbrhXzWPo2tsjVmq6D6qxRWXv=pbdx8DhV7cUGUUECiKK3Gw@mail.gmail.com>

This would certainly simplify and make more readable some of my code where
I create multiple versions of the same plot calling the same function with
minor variations of a few of many arguments. Thanks!

Peter

On Fri, Jan 1, 2021 at 12:20 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Hi all:
>
> In the course of playing around with other issues, I wrote the following
> little function that allows functions to keep state
> and easily replay and update their state.(see comments after):
>
> memify <- function(f)
> {
>    if (is.primitive(f)) {
>       cat("Cannot memify primitive functions.\n")
>       return(NULL)
>    }
>    if (!inherits(f, "function"))
>       stop("Argument must inherit from class 'function'")
>    arglist <- list()
>    structure(
>       function(...) {
>          m <- tryCatch(
>             as.list(match.call(f)[-1]),
>             error = function(e) {
>                warning("Bad function call; cannot update arguments\n")
>                return(NULL)
>             }
>          )
>          nm <- names(m)
>          hasname <- nm != "" #logical index of named values
>          if (any(hasname)) {
>             if (anyDuplicated(nm, incomparables = ""))
>                warning("Duplicated names in call; only the first will be
> used.")
>             arglist <<- modifyList(arglist, m[hasname]) ## this is what
> does the job
>          }
>          do.call(f, modifyList(m, arglist))
>       },
>       class = c("memified", class(f)))
> }
>
> Examples:
>
>  x <- 1:9; y <- runif(9)
>  plt <- memify(plot)
>  x <- 1:9; y <- runif(9)
>  plt(x,y, col = "blue")  ## plt "remembers" these arguments; i.e. keeps
> state
>  plt( type = "b") ## all other arguments as previous
>  plt(col = "red") ## ditto
>
> So my question is: Beyond allowing one to easily change/add argument values
> and replay when there are lots of arguments floating around, which we often
> use an IDE's editor to do, is there any real use for this? I confess that,
> like Pygmalion, I have been charmed by this idea, but it could well be
> useless, By all means feel free to chastise me if so.
>
> 1. I am aware that many functions already have "update" methods to "update"
> their results without re-entering all arguments -- e.g. lattice graphics,
> glm, etc.
> 2. Several packages -- rlang and R6 anyway -- but very likely more, do this
> sort of thing and way more; the price is added complexity, of course.
> 3. I realize also that keeping state would be a bad idea in many
> circumstances, e.g. essentially changing documented defaults.
>
> Reply privately to praise or bury if you do not think this is of any
> interest to readers of this list. Publicly is fine, too. If it's dumb it's
> dumb.
>
> Cheers and best wishes for a better new year for us all,
>
> Bert Gunter
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Sat Jan  2 21:49:58 2021
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Sat, 2 Jan 2021 21:49:58 +0100
Subject: [R] error in parameters tuning of svm
Message-ID: <CA+nrPnu=q13NgQazx1PBVhU=PZqpb=WnGybTGnL=CAbSQ=j8fA@mail.gmail.com>

Hello everyone

I m using the parameters optimization of svm in mlr3. I am setting the
parameters of 'C' and 'type'.

search_space = paradox::ParamSet$new(
 params = list(paradox::ParamInt$new("C", lower = 1, upper = 7),
 paradox::ParamFct$new(id = "type", default = "eps-svr",
   levels = c("eps-svr", "nu-svr", "eps-bsvr"), tags = "train")))

When I run, it gives me the error as follows:

Error in self$assert(xs) :
  Assertion on 'xs' failed: The parameter 'C' can only be set if the
following condition is met 'type <U+2208> {eps-svr, eps-bsvr}'. Instead the
current parameter value is: type=nu-svr.

I do not know why this error comes? Any idea about it?

Warm regards

	[[alternative HTML version deleted]]


From nqu|rozp @end|ng |rom hotm@||@com  Mon Jan  4 08:07:48 2021
From: nqu|rozp @end|ng |rom hotm@||@com (=?iso-8859-1?Q?Norma_Elizabeth_Quiroz_P=E9rez?=)
Date: Mon, 4 Jan 2021 07:07:48 +0000
Subject: [R] false.nearest on tseriesChaos
Message-ID: <SN6PR11MB33270CB85D32360E30CABE01DBD20@SN6PR11MB3327.namprd11.prod.outlook.com>

Dear all:

I am new in R and in Analysis of Chaotic Time Series. I have seen that the package tseriesChaos
can estimate the embedding dimension using the FNN. In this program false.nearest does the work,
but to use it, I need the escape factor(rt) and the neighborhood diameter (eps = sd(x)/10).
My problem is that I do not understand the definitions of these parameters.
I have read Kennel, Brown, and Abarbanel?s paper. There the authors suggest two criteria for the embedding dimension looking at the FNN. One is the ratio between the distances in d and d+1 dimensions, respectively. If such ratio is bigger than a threshold R_tol, then one has a false neighbor.
The second criterio is that R_{d+1} > A_{tol} x fractal size then one has a FNN.
 What these thresholds  R_{tol} and A_{tol}  have to do  with the escape factor and the eps?


I hope someone can help me.
Thanks

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jan  4 10:08:12 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 04 Jan 2021 01:08:12 -0800
Subject: [R] false.nearest on tseriesChaos
In-Reply-To: <SN6PR11MB33270CB85D32360E30CABE01DBD20@SN6PR11MB3327.namprd11.prod.outlook.com>
References: <SN6PR11MB33270CB85D32360E30CABE01DBD20@SN6PR11MB3327.namprd11.prod.outlook.com>
Message-ID: <43442D03-45F8-40F1-A1BC-1E978BD64876@dcn.davis.ca.us>

This theory question doesn't seem on-topic here. Read the Posting Guide mentioned below... contact the package maintainer if the package description doesn't inform you where to go for support.

On January 3, 2021 11:07:48 PM PST, "Norma Elizabeth Quiroz P?rez" <nquirozp at hotmail.com> wrote:
>Dear all:
>
>I am new in R and in Analysis of Chaotic Time Series. I have seen that
>the package tseriesChaos
>can estimate the embedding dimension using the FNN. In this program
>false.nearest does the work,
>but to use it, I need the escape factor(rt) and the neighborhood
>diameter (eps = sd(x)/10).
>My problem is that I do not understand the definitions of these
>parameters.
>I have read Kennel, Brown, and Abarbanel?s paper. There the authors
>suggest two criteria for the embedding dimension looking at the FNN.
>One is the ratio between the distances in d and d+1 dimensions,
>respectively. If such ratio is bigger than a threshold R_tol, then one
>has a false neighbor.
>The second criterio is that R_{d+1} > A_{tol} x fractal size then one
>has a FNN.
>What these thresholds  R_{tol} and A_{tol}  have to do  with the escape
>factor and the eps?
>
>
>I hope someone can help me.
>Thanks
>
>	[[alternative HTML version deleted]]

-- 
Sent from my phone. Please excuse my brevity.


From @tyen @end|ng |rom ntu@edu@tw  Tue Jan  5 08:14:54 2021
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Tue, 5 Jan 2021 15:14:54 +0800
Subject: [R] Defining partial list of variables
Message-ID: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>

I constantly define variable lists from a data frame (e.g., to define a 
regression equation). Line 3 below does just that. Placing each variable 
name in quotation marks is too much work especially for a long list so I 
do that with line 4. Is there an easier way to accomplish this----to 
define a list of variable names containing "a","c","e"? Thank you!

 > data<-as.data.frame(matrix(1:30,nrow=6))
 > colnames(data)<-c("a","b","c","d","e"); data

 ? a? b? c? d? e
1 1? 7 13 19 25
2 2? 8 14 20 26
3 3? 9 15 21 27
4 4 10 16 22 28
5 5 11 17 23 29
6 6 12 18 24 30
 > x1<-c("a","c","e"); x1 # line 3
[1] "a" "c" "e"
 > x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4

[1] "a" "c" "e"


From cbuddenh@gen @end|ng |rom gm@||@com  Tue Jan  5 03:08:43 2021
From: cbuddenh@gen @end|ng |rom gm@||@com (Chris Buddenhagen)
Date: Tue, 5 Jan 2021 15:08:43 +1300
Subject: [R] Search list of igraph objects to return some with certain values
Message-ID: <CAD8OqpsF6fxqy9kbLp2mxKF2vqoYabWBthFSLqcSJ71z0Ky+jA@mail.gmail.com>

Hi all

I stochastically simulated thousands of directed igraph objects in list
format.  I want to find and plot an example graph that meets a certain
criteria (a link to a certain node). Does anyone have pointers on how to
subset a list of igraph objects?

Sincerely,


Chris Buddenhagen
cbuddenhagen at gmail.com

	[[alternative HTML version deleted]]


From tuech|er @end|ng |rom gmx@@t  Tue Jan  5 09:09:27 2021
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Tue, 5 Jan 2021 09:09:27 +0100
Subject: [R] Defining partial list of variables
In-Reply-To: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
Message-ID: <961d14ee-9556-e608-b96a-82fca488c213@gmx.at>

see below

Steven Yen wrote/hat geschrieben on/am 05.01.2021 08:14:
> I constantly define variable lists from a data frame (e.g., to define a
> regression equation). Line 3 below does just that. Placing each variable
> name in quotation marks is too much work especially for a long list so I
> do that with line 4. Is there an easier way to accomplish this----to
> define a list of variable names containing "a","c","e"? Thank you!
>
>> data<-as.data.frame(matrix(1:30,nrow=6))
>> colnames(data)<-c("a","b","c","d","e"); data
>
>   a  b  c  d  e
> 1 1  7 13 19 25
> 2 2  8 14 20 26
> 3 3  9 15 21 27
> 4 4 10 16 22 28
> 5 5 11 17 23 29
> 6 6 12 18 24 30
>> x1<-c("a","c","e"); x1 # line 3
> [1] "a" "c" "e"
>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>
> [1] "a" "c" "e"
>
What about:
x3 <- names(data)[c(1,3,5)]
x3
[1] "a" "c" "e"

If I have to compile longer vectors of variable names I do it as follows:
First I use:
dput(names(data))
resulting in a vector of names.
c("a", "b", "c", "d", "e")
Then I edit the output by hand, e.g.
x4 <- c("a", "b", "c", "d", "e")
x4 <- c("a", "c", "e")
This is especially useful with long names, where I could easily make
typing errors.

regards,
Heinz


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jan  5 09:18:27 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 05 Jan 2021 00:18:27 -0800
Subject: [R] Defining partial list of variables
In-Reply-To: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
Message-ID: <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>

IMO if you want to hardcode a formula then simply hardcode a formula. If you want 20 formulas, write 20 formulas. Is that really so bad?

If you want to have an abbreviated way to specify sets of variables without conforming to R syntax then put them into data files and read them in using a format of your choice.

But using NSE to avoid using quotes for entering what amounts to in-script data is abuse of the language justified by laziness... the amount of work you put yourself and anyone else who reads your code through is excessive relative to the benefit gained.

NSE has its strengths... but as a method of creating data objects it sucks. Note that even the tidyverse (now) requires you to use quotes when you are not directly referring to something that already exists. And if you were... you might as well be creating a formula.

On January 4, 2021 11:14:54 PM PST, Steven Yen <styen at ntu.edu.tw> wrote:
>I constantly define variable lists from a data frame (e.g., to define a
>
>regression equation). Line 3 below does just that. Placing each
>variable 
>name in quotation marks is too much work especially for a long list so
>I 
>do that with line 4. Is there an easier way to accomplish this----to 
>define a list of variable names containing "a","c","e"? Thank you!
>
> > data<-as.data.frame(matrix(1:30,nrow=6))
> > colnames(data)<-c("a","b","c","d","e"); data
>
> ? a? b? c? d? e
>1 1? 7 13 19 25
>2 2? 8 14 20 26
>3 3? 9 15 21 27
>4 4 10 16 22 28
>5 5 11 17 23 29
>6 6 12 18 24 30
> > x1<-c("a","c","e"); x1 # line 3
>[1] "a" "c" "e"
> > x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>
>[1] "a" "c" "e"
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jan  5 09:23:38 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 05 Jan 2021 00:23:38 -0800
Subject: [R] Search list of igraph objects to return some with certain
 values
In-Reply-To: <CAD8OqpsF6fxqy9kbLp2mxKF2vqoYabWBthFSLqcSJ71z0Ky+jA@mail.gmail.com>
References: <CAD8OqpsF6fxqy9kbLp2mxKF2vqoYabWBthFSLqcSJ71z0Ky+jA@mail.gmail.com>
Message-ID: <E53E49DB-82BD-43BC-8034-BABC715C2060@dcn.davis.ca.us>

Standard logical indexing. Write a function that returns TRUE or FALSE given an igraph object. Use sapply or Vectorize to make a logical vector as long as your list. Then use that vector to index the list with single bracket indexing.

On January 4, 2021 6:08:43 PM PST, Chris Buddenhagen <cbuddenhagen at gmail.com> wrote:
>Hi all
>
>I stochastically simulated thousands of directed igraph objects in list
>format.  I want to find and plot an example graph that meets a certain
>criteria (a link to a certain node). Does anyone have pointers on how
>to
>subset a list of igraph objects?
>
>Sincerely,
>
>
>Chris Buddenhagen
>cbuddenhagen at gmail.com
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @tyen @end|ng |rom ntu@edu@tw  Tue Jan  5 10:01:11 2021
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Tue, 5 Jan 2021 17:01:11 +0800
Subject: [R] Defining partial list of variables
In-Reply-To: <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
Message-ID: <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>

Thank you, Jeff. IMO, we are all here to make R work better to suit our 
various needs. All I am asking is an easier way to define variable list 
zx, differently from the way z0 , x0, and treat are defined.

 > zx<-colnames(subset(mydata,select=c(
+ age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
+???? unable,homeowner,married,divorced,widowed)))
 > z0<-c("fruit","highblood")
 > x0<-c("vgood","poor")
 > treat<-"depression"
 > eq1 <-my.formula(y="depression",x=zx,z0)
 > eq2 <-my.formula(y="bmi",?????? x=zx,x0)
 > eq2t<-my.formula(y="bmi",?????? x=zx,treat)
 > eqs<-list(eq1,eq2); eqs
[[1]]
depression ~ age + exercise + income + white + black + hispanic +
 ??? base + somcol + grad + employed + unable + homeowner + married +
 ??? divorced + widowed + fruit + highblood

[[2]]
bmi ~ age + exercise + income + white + black + hispanic + base +
 ??? somcol + grad + employed + unable + homeowner + married +
 ??? divorced + widowed + vgood + poor

 > eqt<-list(eq1,eq2t); eqt
[[1]]
depression ~ age + exercise + income + white + black + hispanic +
 ??? base + somcol + grad + employed + unable + homeowner + married +
 ??? divorced + widowed + fruit + highblood

[[2]]
bmi ~ age + exercise + income + white + black + hispanic + base +
 ??? somcol + grad + employed + unable + homeowner + married +
 ??? divorced + widowed + depression

On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
> IMO if you want to hardcode a formula then simply hardcode a formula. If you want 20 formulas, write 20 formulas. Is that really so bad?
>
> If you want to have an abbreviated way to specify sets of variables without conforming to R syntax then put them into data files and read them in using a format of your choice.
>
> But using NSE to avoid using quotes for entering what amounts to in-script data is abuse of the language justified by laziness... the amount of work you put yourself and anyone else who reads your code through is excessive relative to the benefit gained.
>
> NSE has its strengths... but as a method of creating data objects it sucks. Note that even the tidyverse (now) requires you to use quotes when you are not directly referring to something that already exists. And if you were... you might as well be creating a formula.
>
> On January 4, 2021 11:14:54 PM PST, Steven Yen <styen at ntu.edu.tw> wrote:
>> I constantly define variable lists from a data frame (e.g., to define a
>>
>> regression equation). Line 3 below does just that. Placing each
>> variable
>> name in quotation marks is too much work especially for a long list so
>> I
>> do that with line 4. Is there an easier way to accomplish this----to
>> define a list of variable names containing "a","c","e"? Thank you!
>>
>>> data<-as.data.frame(matrix(1:30,nrow=6))
>>> colnames(data)<-c("a","b","c","d","e"); data
>>  ? a? b? c? d? e
>> 1 1? 7 13 19 25
>> 2 2? 8 14 20 26
>> 3 3? 9 15 21 27
>> 4 4 10 16 22 28
>> 5 5 11 17 23 29
>> 6 6 12 18 24 30
>>> x1<-c("a","c","e"); x1 # line 3
>> [1] "a" "c" "e"
>>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>> [1] "a" "c" "e"
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Tue Jan  5 10:34:46 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 5 Jan 2021 11:34:46 +0200
Subject: [R] Defining partial list of variables
In-Reply-To: <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
 <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
Message-ID: <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>

zx<-strsplit("age,exercise,income,white,black,hispanic,base,somcol,grad,employed,unable,homeowner,married,divorced,widowed",",")



On Tue, Jan 5, 2021 at 11:01 AM Steven Yen <styen at ntu.edu.tw> wrote:

> Thank you, Jeff. IMO, we are all here to make R work better to suit our
> various needs. All I am asking is an easier way to define variable list
> zx, differently from the way z0 , x0, and treat are defined.
>
>  > zx<-colnames(subset(mydata,select=c(
> + age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
> +     unable,homeowner,married,divorced,widowed)))
>  > z0<-c("fruit","highblood")
>  > x0<-c("vgood","poor")
>  > treat<-"depression"
>  > eq1 <-my.formula(y="depression",x=zx,z0)
>  > eq2 <-my.formula(y="bmi",       x=zx,x0)
>  > eq2t<-my.formula(y="bmi",       x=zx,treat)
>  > eqs<-list(eq1,eq2); eqs
> [[1]]
> depression ~ age + exercise + income + white + black + hispanic +
>      base + somcol + grad + employed + unable + homeowner + married +
>      divorced + widowed + fruit + highblood
>
> [[2]]
> bmi ~ age + exercise + income + white + black + hispanic + base +
>      somcol + grad + employed + unable + homeowner + married +
>      divorced + widowed + vgood + poor
>
>  > eqt<-list(eq1,eq2t); eqt
> [[1]]
> depression ~ age + exercise + income + white + black + hispanic +
>      base + somcol + grad + employed + unable + homeowner + married +
>      divorced + widowed + fruit + highblood
>
> [[2]]
> bmi ~ age + exercise + income + white + black + hispanic + base +
>      somcol + grad + employed + unable + homeowner + married +
>      divorced + widowed + depression
>
> On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
> > IMO if you want to hardcode a formula then simply hardcode a formula. If
> you want 20 formulas, write 20 formulas. Is that really so bad?
> >
> > If you want to have an abbreviated way to specify sets of variables
> without conforming to R syntax then put them into data files and read them
> in using a format of your choice.
> >
> > But using NSE to avoid using quotes for entering what amounts to
> in-script data is abuse of the language justified by laziness... the amount
> of work you put yourself and anyone else who reads your code through is
> excessive relative to the benefit gained.
> >
> > NSE has its strengths... but as a method of creating data objects it
> sucks. Note that even the tidyverse (now) requires you to use quotes when
> you are not directly referring to something that already exists. And if you
> were... you might as well be creating a formula.
> >
> > On January 4, 2021 11:14:54 PM PST, Steven Yen <styen at ntu.edu.tw> wrote:
> >> I constantly define variable lists from a data frame (e.g., to define a
> >>
> >> regression equation). Line 3 below does just that. Placing each
> >> variable
> >> name in quotation marks is too much work especially for a long list so
> >> I
> >> do that with line 4. Is there an easier way to accomplish this----to
> >> define a list of variable names containing "a","c","e"? Thank you!
> >>
> >>> data<-as.data.frame(matrix(1:30,nrow=6))
> >>> colnames(data)<-c("a","b","c","d","e"); data
> >>    a  b  c  d  e
> >> 1 1  7 13 19 25
> >> 2 2  8 14 20 26
> >> 3 3  9 15 21 27
> >> 4 4 10 16 22 28
> >> 5 5 11 17 23 29
> >> 6 6 12 18 24 30
> >>> x1<-c("a","c","e"); x1 # line 3
> >> [1] "a" "c" "e"
> >>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
> >> [1] "a" "c" "e"
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @tyen @end|ng |rom ntu@edu@tw  Tue Jan  5 10:47:55 2021
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Tue, 5 Jan 2021 17:47:55 +0800
Subject: [R] Defining partial list of variables
In-Reply-To: <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
 <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
 <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>
Message-ID: <fd8b09ca-fe2f-3612-a93a-7f32564e34df@ntu.edu.tw>

Here we go! BUT, it works great for a continuous line. With line 
break(s), I got the nuisance "\n" inserted.

 > x<-strsplit("hhsize,urban,male,gov,nongov,married",","); x
[[1]]
[1] "hhsize"? "urban"?? "male"??? "gov"???? "nongov"? "married"

 > x<-strsplit("hhsize,urban,male,
+???????????? gov,nongov,married",","); x
[[1]]
[1] "hhsize"??????????? "urban"???????????? "male" "\n??????????? gov"
[5] "nongov"??????????? "married"

On 2021/1/5 ?? 05:34, Eric Berger wrote:
> zx<-strsplit("age,exercise,income,white,black,hispanic,base,somcol,grad,employed,unable,homeowner,married,divorced,widowed",",")
>
>
>
> On Tue, Jan 5, 2021 at 11:01 AM Steven Yen <styen at ntu.edu.tw 
> <mailto:styen at ntu.edu.tw>> wrote:
>
>     Thank you, Jeff. IMO, we are all here to make R work better to
>     suit our
>     various needs. All I am asking is an easier way to define variable
>     list
>     zx, differently from the way z0 , x0, and treat are defined.
>
>     ?> zx<-colnames(subset(mydata,select=c(
>     + age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
>     +???? unable,homeowner,married,divorced,widowed)))
>     ?> z0<-c("fruit","highblood")
>     ?> x0<-c("vgood","poor")
>     ?> treat<-"depression"
>     ?> eq1 <-my.formula(y="depression",x=zx,z0)
>     ?> eq2 <-my.formula(y="bmi",?????? x=zx,x0)
>     ?> eq2t<-my.formula(y="bmi",?????? x=zx,treat)
>     ?> eqs<-list(eq1,eq2); eqs
>     [[1]]
>     depression ~ age + exercise + income + white + black + hispanic +
>     ???? base + somcol + grad + employed + unable + homeowner + married +
>     ???? divorced + widowed + fruit + highblood
>
>     [[2]]
>     bmi ~ age + exercise + income + white + black + hispanic + base +
>     ???? somcol + grad + employed + unable + homeowner + married +
>     ???? divorced + widowed + vgood + poor
>
>     ?> eqt<-list(eq1,eq2t); eqt
>     [[1]]
>     depression ~ age + exercise + income + white + black + hispanic +
>     ???? base + somcol + grad + employed + unable + homeowner + married +
>     ???? divorced + widowed + fruit + highblood
>
>     [[2]]
>     bmi ~ age + exercise + income + white + black + hispanic + base +
>     ???? somcol + grad + employed + unable + homeowner + married +
>     ???? divorced + widowed + depression
>
>     On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
>     > IMO if you want to hardcode a formula then simply hardcode a
>     formula. If you want 20 formulas, write 20 formulas. Is that
>     really so bad?
>     >
>     > If you want to have an abbreviated way to specify sets of
>     variables without conforming to R syntax then put them into data
>     files and read them in using a format of your choice.
>     >
>     > But using NSE to avoid using quotes for entering what amounts to
>     in-script data is abuse of the language justified by laziness...
>     the amount of work you put yourself and anyone else who reads your
>     code through is excessive relative to the benefit gained.
>     >
>     > NSE has its strengths... but as a method of creating data
>     objects it sucks. Note that even the tidyverse (now) requires you
>     to use quotes when you are not directly referring to something
>     that already exists. And if you were... you might as well be
>     creating a formula.
>     >
>     > On January 4, 2021 11:14:54 PM PST, Steven Yen <styen at ntu.edu.tw
>     <mailto:styen at ntu.edu.tw>> wrote:
>     >> I constantly define variable lists from a data frame (e.g., to
>     define a
>     >>
>     >> regression equation). Line 3 below does just that. Placing each
>     >> variable
>     >> name in quotation marks is too much work especially for a long
>     list so
>     >> I
>     >> do that with line 4. Is there an easier way to accomplish
>     this----to
>     >> define a list of variable names containing "a","c","e"? Thank you!
>     >>
>     >>> data<-as.data.frame(matrix(1:30,nrow=6))
>     >>> colnames(data)<-c("a","b","c","d","e"); data
>     >>? ? a? b? c? d? e
>     >> 1 1? 7 13 19 25
>     >> 2 2? 8 14 20 26
>     >> 3 3? 9 15 21 27
>     >> 4 4 10 16 22 28
>     >> 5 5 11 17 23 29
>     >> 6 6 12 18 24 30
>     >>> x1<-c("a","c","e"); x1 # line 3
>     >> [1] "a" "c" "e"
>     >>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>     >> [1] "a" "c" "e"
>     >>
>     >> ______________________________________________
>     >> R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>     >> https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     >> PLEASE do read the posting guide
>     >> http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     >> and provide commented, minimal, self-contained, reproducible code.
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Tue Jan  5 11:01:25 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 5 Jan 2021 12:01:25 +0200
Subject: [R] Defining partial list of variables
In-Reply-To: <fd8b09ca-fe2f-3612-a93a-7f32564e34df@ntu.edu.tw>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
 <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
 <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>
 <fd8b09ca-fe2f-3612-a93a-7f32564e34df@ntu.edu.tw>
Message-ID: <CAGgJW76R-sfKGYXbWvez_VkNu9abpDJTG=5QcC4ts5dfzq+VTw@mail.gmail.com>

If your column names have no spaces the following should work

 x<-strsplit(gsub("[\n ]","",
             "hhsize,urban,male,
+             gov,nongov,married"),","); x

On Tue, Jan 5, 2021 at 11:47 AM Steven Yen <styen at ntu.edu.tw> wrote:

> Here we go! BUT, it works great for a continuous line. With line break(s),
> I got the nuisance "\n" inserted.
>
> > x<-strsplit("hhsize,urban,male,gov,nongov,married",","); x
> [[1]]
> [1] "hhsize"  "urban"   "male"    "gov"     "nongov"  "married"
>
> > x<-strsplit("hhsize,urban,male,
> +             gov,nongov,married",","); x
> [[1]]
> [1] "hhsize"            "urban"             "male"
> "\n            gov"
> [5] "nongov"            "married"
> On 2021/1/5 ?? 05:34, Eric Berger wrote:
>
>
> zx<-strsplit("age,exercise,income,white,black,hispanic,base,somcol,grad,employed,unable,homeowner,married,divorced,widowed",",")
>
>
>
> On Tue, Jan 5, 2021 at 11:01 AM Steven Yen <styen at ntu.edu.tw> wrote:
>
>> Thank you, Jeff. IMO, we are all here to make R work better to suit our
>> various needs. All I am asking is an easier way to define variable list
>> zx, differently from the way z0 , x0, and treat are defined.
>>
>>  > zx<-colnames(subset(mydata,select=c(
>> + age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
>> +     unable,homeowner,married,divorced,widowed)))
>>  > z0<-c("fruit","highblood")
>>  > x0<-c("vgood","poor")
>>  > treat<-"depression"
>>  > eq1 <-my.formula(y="depression",x=zx,z0)
>>  > eq2 <-my.formula(y="bmi",       x=zx,x0)
>>  > eq2t<-my.formula(y="bmi",       x=zx,treat)
>>  > eqs<-list(eq1,eq2); eqs
>> [[1]]
>> depression ~ age + exercise + income + white + black + hispanic +
>>      base + somcol + grad + employed + unable + homeowner + married +
>>      divorced + widowed + fruit + highblood
>>
>> [[2]]
>> bmi ~ age + exercise + income + white + black + hispanic + base +
>>      somcol + grad + employed + unable + homeowner + married +
>>      divorced + widowed + vgood + poor
>>
>>  > eqt<-list(eq1,eq2t); eqt
>> [[1]]
>> depression ~ age + exercise + income + white + black + hispanic +
>>      base + somcol + grad + employed + unable + homeowner + married +
>>      divorced + widowed + fruit + highblood
>>
>> [[2]]
>> bmi ~ age + exercise + income + white + black + hispanic + base +
>>      somcol + grad + employed + unable + homeowner + married +
>>      divorced + widowed + depression
>>
>> On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
>> > IMO if you want to hardcode a formula then simply hardcode a formula.
>> If you want 20 formulas, write 20 formulas. Is that really so bad?
>> >
>> > If you want to have an abbreviated way to specify sets of variables
>> without conforming to R syntax then put them into data files and read them
>> in using a format of your choice.
>> >
>> > But using NSE to avoid using quotes for entering what amounts to
>> in-script data is abuse of the language justified by laziness... the amount
>> of work you put yourself and anyone else who reads your code through is
>> excessive relative to the benefit gained.
>> >
>> > NSE has its strengths... but as a method of creating data objects it
>> sucks. Note that even the tidyverse (now) requires you to use quotes when
>> you are not directly referring to something that already exists. And if you
>> were... you might as well be creating a formula.
>> >
>> > On January 4, 2021 11:14:54 PM PST, Steven Yen <styen at ntu.edu.tw>
>> wrote:
>> >> I constantly define variable lists from a data frame (e.g., to define a
>> >>
>> >> regression equation). Line 3 below does just that. Placing each
>> >> variable
>> >> name in quotation marks is too much work especially for a long list so
>> >> I
>> >> do that with line 4. Is there an easier way to accomplish this----to
>> >> define a list of variable names containing "a","c","e"? Thank you!
>> >>
>> >>> data<-as.data.frame(matrix(1:30,nrow=6))
>> >>> colnames(data)<-c("a","b","c","d","e"); data
>> >>    a  b  c  d  e
>> >> 1 1  7 13 19 25
>> >> 2 2  8 14 20 26
>> >> 3 3  9 15 21 27
>> >> 4 4 10 16 22 28
>> >> 5 5 11 17 23 29
>> >> 6 6 12 18 24 30
>> >>> x1<-c("a","c","e"); x1 # line 3
>> >> [1] "a" "c" "e"
>> >>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>> >> [1] "a" "c" "e"
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From @tyen @end|ng |rom ntu@edu@tw  Tue Jan  5 11:59:28 2021
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Tue, 5 Jan 2021 18:59:28 +0800
Subject: [R] Defining partial list of variables
In-Reply-To: <CAGgJW76R-sfKGYXbWvez_VkNu9abpDJTG=5QcC4ts5dfzq+VTw@mail.gmail.com>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
 <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
 <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>
 <fd8b09ca-fe2f-3612-a93a-7f32564e34df@ntu.edu.tw>
 <CAGgJW76R-sfKGYXbWvez_VkNu9abpDJTG=5QcC4ts5dfzq+VTw@mail.gmail.com>
Message-ID: <a50842f7-c3a3-56d6-f7f1-319e308f62d8@ntu.edu.tw>

Thanks Eric. Perhaps I should know when to stop. The approach produces a 
slightly different variable list (note the [[1]]). Consequently, I was 
not able to use xx in defining my regression formula.

 > x<-colnames(subset(mydata,select=c(

+??? hhsize,urban,male,
+??? age3045,age4659,age60, # age1529
+??? highsc,tert,?????????? # primary
+??? gov,nongov,??????????? # unemp
+??? married))); x
 ?[1] "hhsize"? "urban"?? "male"??? "age3045" "age4659" "age60" 
"highsc"? "tert"
 ?[9] "gov"???? "nongov"? "married"
 > xx<-strsplit(gsub("[\n ]","",
+??? "hhsize,urban,male,
+???? age3045,age4659,age60,
+???? highsc,tert,
+???? gov,nongov,
+???? married"
+ ),","); xx
[[1]]
 ?[1] "hhsize"? "urban"?? "male"??? "age3045" "age4659" "age60" 
"highsc"? "tert"
 ?[9] "gov"???? "nongov"? "married"

 > eq1<-my.formula(y="cig",x=x); eq1
cig ~ hhsize + urban + male + age3045 + age4659 + age60 + highsc +
 ??? tert + gov + nongov + married
 > eq2<-my.formula(y="cig",x=xx); eq2
cig ~ c("hhsize", "urban", "male", "age3045", "age4659", "age60",
 ??? "highsc", "tert", "gov", "nongov", "married")

On 2021/1/5 ?? 06:01, Eric Berger wrote:
> If your column names have no spaces the following should work
>
> ?x<-strsplit(gsub("[\n ]","",
> ?"hhsize,urban,male,
> + gov,nongov,married"),","); x
>
> On Tue, Jan 5, 2021 at 11:47 AM Steven Yen <styen at ntu.edu.tw 
> <mailto:styen at ntu.edu.tw>> wrote:
>
>     Here we go! BUT, it works great for a continuous line. With line
>     break(s), I got the nuisance "\n" inserted.
>
>     > x<-strsplit("hhsize,urban,male,gov,nongov,married",","); x
>     [[1]]
>     [1] "hhsize"? "urban"?? "male"??? "gov"???? "nongov" "married"
>
>     > x<-strsplit("hhsize,urban,male,
>     +???????????? gov,nongov,married",","); x
>     [[1]]
>     [1] "hhsize"??????????? "urban" "male"????????????? "\n???????????
>     gov"
>     [5] "nongov"??????????? "married"
>
>     On 2021/1/5 ?? 05:34, Eric Berger wrote:
>>     zx<-strsplit("age,exercise,income,white,black,hispanic,base,somcol,grad,employed,unable,homeowner,married,divorced,widowed",",")
>>
>>
>>
>>     On Tue, Jan 5, 2021 at 11:01 AM Steven Yen <styen at ntu.edu.tw
>>     <mailto:styen at ntu.edu.tw>> wrote:
>>
>>         Thank you, Jeff. IMO, we are all here to make R work better
>>         to suit our
>>         various needs. All I am asking is an easier way to define
>>         variable list
>>         zx, differently from the way z0 , x0, and treat are defined.
>>
>>         ?> zx<-colnames(subset(mydata,select=c(
>>         +
>>         age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
>>         +???? unable,homeowner,married,divorced,widowed)))
>>         ?> z0<-c("fruit","highblood")
>>         ?> x0<-c("vgood","poor")
>>         ?> treat<-"depression"
>>         ?> eq1 <-my.formula(y="depression",x=zx,z0)
>>         ?> eq2 <-my.formula(y="bmi",?????? x=zx,x0)
>>         ?> eq2t<-my.formula(y="bmi",?????? x=zx,treat)
>>         ?> eqs<-list(eq1,eq2); eqs
>>         [[1]]
>>         depression ~ age + exercise + income + white + black + hispanic +
>>         ???? base + somcol + grad + employed + unable + homeowner +
>>         married +
>>         ???? divorced + widowed + fruit + highblood
>>
>>         [[2]]
>>         bmi ~ age + exercise + income + white + black + hispanic + base +
>>         ???? somcol + grad + employed + unable + homeowner + married +
>>         ???? divorced + widowed + vgood + poor
>>
>>         ?> eqt<-list(eq1,eq2t); eqt
>>         [[1]]
>>         depression ~ age + exercise + income + white + black + hispanic +
>>         ???? base + somcol + grad + employed + unable + homeowner +
>>         married +
>>         ???? divorced + widowed + fruit + highblood
>>
>>         [[2]]
>>         bmi ~ age + exercise + income + white + black + hispanic + base +
>>         ???? somcol + grad + employed + unable + homeowner + married +
>>         ???? divorced + widowed + depression
>>
>>         On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
>>         > IMO if you want to hardcode a formula then simply hardcode
>>         a formula. If you want 20 formulas, write 20 formulas. Is
>>         that really so bad?
>>         >
>>         > If you want to have an abbreviated way to specify sets of
>>         variables without conforming to R syntax then put them into
>>         data files and read them in using a format of your choice.
>>         >
>>         > But using NSE to avoid using quotes for entering what
>>         amounts to in-script data is abuse of the language justified
>>         by laziness... the amount of work you put yourself and anyone
>>         else who reads your code through is excessive relative to the
>>         benefit gained.
>>         >
>>         > NSE has its strengths... but as a method of creating data
>>         objects it sucks. Note that even the tidyverse (now) requires
>>         you to use quotes when you are not directly referring to
>>         something that already exists. And if you were... you might
>>         as well be creating a formula.
>>         >
>>         > On January 4, 2021 11:14:54 PM PST, Steven Yen
>>         <styen at ntu.edu.tw <mailto:styen at ntu.edu.tw>> wrote:
>>         >> I constantly define variable lists from a data frame
>>         (e.g., to define a
>>         >>
>>         >> regression equation). Line 3 below does just that. Placing
>>         each
>>         >> variable
>>         >> name in quotation marks is too much work especially for a
>>         long list so
>>         >> I
>>         >> do that with line 4. Is there an easier way to accomplish
>>         this----to
>>         >> define a list of variable names containing "a","c","e"?
>>         Thank you!
>>         >>
>>         >>> data<-as.data.frame(matrix(1:30,nrow=6))
>>         >>> colnames(data)<-c("a","b","c","d","e"); data
>>         >>? ? a? b? c? d? e
>>         >> 1 1? 7 13 19 25
>>         >> 2 2? 8 14 20 26
>>         >> 3 3? 9 15 21 27
>>         >> 4 4 10 16 22 28
>>         >> 5 5 11 17 23 29
>>         >> 6 6 12 18 24 30
>>         >>> x1<-c("a","c","e"); x1 # line 3
>>         >> [1] "a" "c" "e"
>>         >>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>>         >> [1] "a" "c" "e"
>>         >>
>>         >> ______________________________________________
>>         >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>         list -- To UNSUBSCRIBE and more, see
>>         >> https://stat.ethz.ch/mailman/listinfo/r-help
>>         <https://stat.ethz.ch/mailman/listinfo/r-help>
>>         >> PLEASE do read the posting guide
>>         >> http://www.R-project.org/posting-guide.html
>>         <http://www.R-project.org/posting-guide.html>
>>         >> and provide commented, minimal, self-contained,
>>         reproducible code.
>>
>>         ______________________________________________
>>         R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>         list -- To UNSUBSCRIBE and more, see
>>         https://stat.ethz.ch/mailman/listinfo/r-help
>>         <https://stat.ethz.ch/mailman/listinfo/r-help>
>>         PLEASE do read the posting guide
>>         http://www.R-project.org/posting-guide.html
>>         <http://www.R-project.org/posting-guide.html>
>>         and provide commented, minimal, self-contained, reproducible
>>         code.
>>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Tue Jan  5 12:08:02 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 5 Jan 2021 13:08:02 +0200
Subject: [R] Defining partial list of variables
In-Reply-To: <a50842f7-c3a3-56d6-f7f1-319e308f62d8@ntu.edu.tw>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
 <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
 <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>
 <fd8b09ca-fe2f-3612-a93a-7f32564e34df@ntu.edu.tw>
 <CAGgJW76R-sfKGYXbWvez_VkNu9abpDJTG=5QcC4ts5dfzq+VTw@mail.gmail.com>
 <a50842f7-c3a3-56d6-f7f1-319e308f62d8@ntu.edu.tw>
Message-ID: <CAGgJW77fnn7gfczXeJJ4bxo3rhF2OuV=K_jFRUtGZa6PjdSScA@mail.gmail.com>

wrap it in unlist

xx <- unlist(strsplit( .... ))



On Tue, Jan 5, 2021 at 12:59 PM Steven Yen <styen at ntu.edu.tw> wrote:

> Thanks Eric. Perhaps I should know when to stop. The approach produces a
> slightly different variable list (note the [[1]]). Consequently, I was not
> able to use xx in defining my regression formula.
>
> > x<-colnames(subset(mydata,select=c(
>
> +    hhsize,urban,male,
> +    age3045,age4659,age60, # age1529
> +    highsc,tert,           # primary
> +    gov,nongov,            # unemp
> +    married))); x
>  [1] "hhsize"  "urban"   "male"    "age3045" "age4659" "age60"   "highsc"
> "tert"
>  [9] "gov"     "nongov"  "married"
> > xx<-strsplit(gsub("[\n ]","",
> +    "hhsize,urban,male,
> +     age3045,age4659,age60,
> +     highsc,tert,
> +     gov,nongov,
> +     married"
> + ),","); xx
> [[1]]
>  [1] "hhsize"  "urban"   "male"    "age3045" "age4659" "age60"   "highsc"
> "tert"
>  [9] "gov"     "nongov"  "married"
>
> > eq1<-my.formula(y="cig",x=x); eq1
> cig ~ hhsize + urban + male + age3045 + age4659 + age60 + highsc +
>     tert + gov + nongov + married
> > eq2<-my.formula(y="cig",x=xx); eq2
> cig ~ c("hhsize", "urban", "male", "age3045", "age4659", "age60",
>     "highsc", "tert", "gov", "nongov", "married")
>
> On 2021/1/5 ?? 06:01, Eric Berger wrote:
>
> If your column names have no spaces the following should work
>
>  x<-strsplit(gsub("[\n ]","",
>              "hhsize,urban,male,
> +             gov,nongov,married"),","); x
>
> On Tue, Jan 5, 2021 at 11:47 AM Steven Yen <styen at ntu.edu.tw> wrote:
>
>> Here we go! BUT, it works great for a continuous line. With line
>> break(s), I got the nuisance "\n" inserted.
>>
>> > x<-strsplit("hhsize,urban,male,gov,nongov,married",","); x
>> [[1]]
>> [1] "hhsize"  "urban"   "male"    "gov"     "nongov"  "married"
>>
>> > x<-strsplit("hhsize,urban,male,
>> +             gov,nongov,married",","); x
>> [[1]]
>> [1] "hhsize"            "urban"             "male"
>> "\n            gov"
>> [5] "nongov"            "married"
>> On 2021/1/5 ?? 05:34, Eric Berger wrote:
>>
>>
>> zx<-strsplit("age,exercise,income,white,black,hispanic,base,somcol,grad,employed,unable,homeowner,married,divorced,widowed",",")
>>
>>
>>
>> On Tue, Jan 5, 2021 at 11:01 AM Steven Yen <styen at ntu.edu.tw> wrote:
>>
>>> Thank you, Jeff. IMO, we are all here to make R work better to suit our
>>> various needs. All I am asking is an easier way to define variable list
>>> zx, differently from the way z0 , x0, and treat are defined.
>>>
>>>  > zx<-colnames(subset(mydata,select=c(
>>> + age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
>>> +     unable,homeowner,married,divorced,widowed)))
>>>  > z0<-c("fruit","highblood")
>>>  > x0<-c("vgood","poor")
>>>  > treat<-"depression"
>>>  > eq1 <-my.formula(y="depression",x=zx,z0)
>>>  > eq2 <-my.formula(y="bmi",       x=zx,x0)
>>>  > eq2t<-my.formula(y="bmi",       x=zx,treat)
>>>  > eqs<-list(eq1,eq2); eqs
>>> [[1]]
>>> depression ~ age + exercise + income + white + black + hispanic +
>>>      base + somcol + grad + employed + unable + homeowner + married +
>>>      divorced + widowed + fruit + highblood
>>>
>>> [[2]]
>>> bmi ~ age + exercise + income + white + black + hispanic + base +
>>>      somcol + grad + employed + unable + homeowner + married +
>>>      divorced + widowed + vgood + poor
>>>
>>>  > eqt<-list(eq1,eq2t); eqt
>>> [[1]]
>>> depression ~ age + exercise + income + white + black + hispanic +
>>>      base + somcol + grad + employed + unable + homeowner + married +
>>>      divorced + widowed + fruit + highblood
>>>
>>> [[2]]
>>> bmi ~ age + exercise + income + white + black + hispanic + base +
>>>      somcol + grad + employed + unable + homeowner + married +
>>>      divorced + widowed + depression
>>>
>>> On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
>>> > IMO if you want to hardcode a formula then simply hardcode a formula.
>>> If you want 20 formulas, write 20 formulas. Is that really so bad?
>>> >
>>> > If you want to have an abbreviated way to specify sets of variables
>>> without conforming to R syntax then put them into data files and read them
>>> in using a format of your choice.
>>> >
>>> > But using NSE to avoid using quotes for entering what amounts to
>>> in-script data is abuse of the language justified by laziness... the amount
>>> of work you put yourself and anyone else who reads your code through is
>>> excessive relative to the benefit gained.
>>> >
>>> > NSE has its strengths... but as a method of creating data objects it
>>> sucks. Note that even the tidyverse (now) requires you to use quotes when
>>> you are not directly referring to something that already exists. And if you
>>> were... you might as well be creating a formula.
>>> >
>>> > On January 4, 2021 11:14:54 PM PST, Steven Yen <styen at ntu.edu.tw>
>>> wrote:
>>> >> I constantly define variable lists from a data frame (e.g., to define
>>> a
>>> >>
>>> >> regression equation). Line 3 below does just that. Placing each
>>> >> variable
>>> >> name in quotation marks is too much work especially for a long list so
>>> >> I
>>> >> do that with line 4. Is there an easier way to accomplish this----to
>>> >> define a list of variable names containing "a","c","e"? Thank you!
>>> >>
>>> >>> data<-as.data.frame(matrix(1:30,nrow=6))
>>> >>> colnames(data)<-c("a","b","c","d","e"); data
>>> >>    a  b  c  d  e
>>> >> 1 1  7 13 19 25
>>> >> 2 2  8 14 20 26
>>> >> 3 3  9 15 21 27
>>> >> 4 4 10 16 22 28
>>> >> 5 5 11 17 23 29
>>> >> 6 6 12 18 24 30
>>> >>> x1<-c("a","c","e"); x1 # line 3
>>> >> [1] "a" "c" "e"
>>> >>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>>> >> [1] "a" "c" "e"
>>> >>
>>> >> ______________________________________________
>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>>> >> PLEASE do read the posting guide
>>> >> http://www.R-project.org/posting-guide.html
>>> >> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From @tyen @end|ng |rom ntu@edu@tw  Tue Jan  5 13:29:03 2021
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Tue, 5 Jan 2021 20:29:03 +0800
Subject: [R] Defining partial list of variables
In-Reply-To: <CAGgJW77fnn7gfczXeJJ4bxo3rhF2OuV=K_jFRUtGZa6PjdSScA@mail.gmail.com>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
 <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
 <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>
 <fd8b09ca-fe2f-3612-a93a-7f32564e34df@ntu.edu.tw>
 <CAGgJW76R-sfKGYXbWvez_VkNu9abpDJTG=5QcC4ts5dfzq+VTw@mail.gmail.com>
 <a50842f7-c3a3-56d6-f7f1-319e308f62d8@ntu.edu.tw>
 <CAGgJW77fnn7gfczXeJJ4bxo3rhF2OuV=K_jFRUtGZa6PjdSScA@mail.gmail.com>
Message-ID: <70f2ed07-c78f-0886-7f06-ae86a74c53f5@ntu.edu.tw>

Thanks Eric. Yes, "unlist" makes a difference. Below, I am doing not 
regression but summary to keep the example simple.

 > set.seed(123)
 > data<-matrix(runif(1:25),nrow=5)
 > colnames(data)<-c("x1","x2","x3","x4","x5"); data
 ??????????? x1??????? x2??????? x3???????? x4??????? x5
[1,] 0.2875775 0.0455565 0.9568333 0.89982497 0.8895393
[2,] 0.7883051 0.5281055 0.4533342 0.24608773 0.6928034
[3,] 0.4089769 0.8924190 0.6775706 0.04205953 0.6405068
[4,] 0.8830174 0.5514350 0.5726334 0.32792072 0.9942698
[5,] 0.9404673 0.4566147 0.1029247 0.95450365 0.6557058
 > j<-strsplit(gsub("[\n ]","","x1,x3,x5"),",")
 > j<-unlist(j); j
[1] "x1" "x3" "x5"
 > summary(data[,j])
 ?????? x1?????????????? x3?????????????? x5
 ?Min.?? :0.2876?? Min.?? :0.1029?? Min.?? :0.6405
 ?1st Qu.:0.4090?? 1st Qu.:0.4533?? 1st Qu.:0.6557
 ?Median :0.7883?? Median :0.5726?? Median :0.6928
 ?Mean?? :0.6617?? Mean?? :0.5527?? Mean?? :0.7746
 ?3rd Qu.:0.8830?? 3rd Qu.:0.6776?? 3rd Qu.:0.8895
 ?Max.?? :0.9405?? Max.?? :0.9568?? Max.?? :0.9943

On 2021/1/5 ?? 07:08, Eric Berger wrote:
> wrap it in unlist
>
> xx <- unlist(strsplit( .... ))
>
>
>
> On Tue, Jan 5, 2021 at 12:59 PM Steven Yen <styen at ntu.edu.tw 
> <mailto:styen at ntu.edu.tw>> wrote:
>
>     Thanks Eric. Perhaps I should know when to stop. The approach
>     produces a slightly different variable list (note the [[1]]).
>     Consequently, I was not able to use xx in defining my regression
>     formula.
>
>     > x<-colnames(subset(mydata,select=c(
>
>     +??? hhsize,urban,male,
>     +??? age3045,age4659,age60, # age1529
>     +??? highsc,tert,?????????? # primary
>     +??? gov,nongov,??????????? # unemp
>     +??? married))); x
>     ?[1] "hhsize"? "urban"?? "male"??? "age3045" "age4659" "age60"??
>     "highsc"? "tert"
>     ?[9] "gov"???? "nongov"? "married"
>     > xx<-strsplit(gsub("[\n ]","",
>     +??? "hhsize,urban,male,
>     +???? age3045,age4659,age60,
>     +???? highsc,tert,
>     +???? gov,nongov,
>     +???? married"
>     + ),","); xx
>     [[1]]
>     ?[1] "hhsize"? "urban"?? "male"??? "age3045" "age4659" "age60"??
>     "highsc"? "tert"
>     ?[9] "gov"???? "nongov"? "married"
>
>     > eq1<-my.formula(y="cig",x=x); eq1
>     cig ~ hhsize + urban + male + age3045 + age4659 + age60 + highsc +
>     ??? tert + gov + nongov + married
>     > eq2<-my.formula(y="cig",x=xx); eq2
>     cig ~ c("hhsize", "urban", "male", "age3045", "age4659", "age60",
>     ??? "highsc", "tert", "gov", "nongov", "married")
>
>     On 2021/1/5 ?? 06:01, Eric Berger wrote:
>>     If your column names have no spaces the following should work
>>
>>     ?x<-strsplit(gsub("[\n ]","",
>>     ?"hhsize,urban,male,
>>     + gov,nongov,married"),","); x
>>
>>     On Tue, Jan 5, 2021 at 11:47 AM Steven Yen <styen at ntu.edu.tw
>>     <mailto:styen at ntu.edu.tw>> wrote:
>>
>>         Here we go! BUT, it works great for a continuous line. With
>>         line break(s), I got the nuisance "\n" inserted.
>>
>>         > x<-strsplit("hhsize,urban,male,gov,nongov,married",","); x
>>         [[1]]
>>         [1] "hhsize"? "urban"?? "male"??? "gov" "nongov"? "married"
>>
>>         > x<-strsplit("hhsize,urban,male,
>>         +???????????? gov,nongov,married",","); x
>>         [[1]]
>>         [1] "hhsize"??????????? "urban" "male"?????????????
>>         "\n??????????? gov"
>>         [5] "nongov"??????????? "married"
>>
>>         On 2021/1/5 ?? 05:34, Eric Berger wrote:
>>>         zx<-strsplit("age,exercise,income,white,black,hispanic,base,somcol,grad,employed,unable,homeowner,married,divorced,widowed",",")
>>>
>>>
>>>
>>>         On Tue, Jan 5, 2021 at 11:01 AM Steven Yen <styen at ntu.edu.tw
>>>         <mailto:styen at ntu.edu.tw>> wrote:
>>>
>>>             Thank you, Jeff. IMO, we are all here to make R work
>>>             better to suit our
>>>             various needs. All I am asking is an easier way to
>>>             define variable list
>>>             zx, differently from the way z0 , x0, and treat are defined.
>>>
>>>             ?> zx<-colnames(subset(mydata,select=c(
>>>             +
>>>             age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
>>>             + unable,homeowner,married,divorced,widowed)))
>>>             ?> z0<-c("fruit","highblood")
>>>             ?> x0<-c("vgood","poor")
>>>             ?> treat<-"depression"
>>>             ?> eq1 <-my.formula(y="depression",x=zx,z0)
>>>             ?> eq2 <-my.formula(y="bmi", x=zx,x0)
>>>             ?> eq2t<-my.formula(y="bmi", x=zx,treat)
>>>             ?> eqs<-list(eq1,eq2); eqs
>>>             [[1]]
>>>             depression ~ age + exercise + income + white + black +
>>>             hispanic +
>>>             ???? base + somcol + grad + employed + unable +
>>>             homeowner + married +
>>>             ???? divorced + widowed + fruit + highblood
>>>
>>>             [[2]]
>>>             bmi ~ age + exercise + income + white + black + hispanic
>>>             + base +
>>>             ???? somcol + grad + employed + unable + homeowner +
>>>             married +
>>>             ???? divorced + widowed + vgood + poor
>>>
>>>             ?> eqt<-list(eq1,eq2t); eqt
>>>             [[1]]
>>>             depression ~ age + exercise + income + white + black +
>>>             hispanic +
>>>             ???? base + somcol + grad + employed + unable +
>>>             homeowner + married +
>>>             ???? divorced + widowed + fruit + highblood
>>>
>>>             [[2]]
>>>             bmi ~ age + exercise + income + white + black + hispanic
>>>             + base +
>>>             ???? somcol + grad + employed + unable + homeowner +
>>>             married +
>>>             ???? divorced + widowed + depression
>>>
>>>             On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
>>>             > IMO if you want to hardcode a formula then simply
>>>             hardcode a formula. If you want 20 formulas, write 20
>>>             formulas. Is that really so bad?
>>>             >
>>>             > If you want to have an abbreviated way to specify sets
>>>             of variables without conforming to R syntax then put
>>>             them into data files and read them in using a format of
>>>             your choice.
>>>             >
>>>             > But using NSE to avoid using quotes for entering what
>>>             amounts to in-script data is abuse of the language
>>>             justified by laziness... the amount of work you put
>>>             yourself and anyone else who reads your code through is
>>>             excessive relative to the benefit gained.
>>>             >
>>>             > NSE has its strengths... but as a method of creating
>>>             data objects it sucks. Note that even the tidyverse
>>>             (now) requires you to use quotes when you are not
>>>             directly referring to something that already exists. And
>>>             if you were... you might as well be creating a formula.
>>>             >
>>>             > On January 4, 2021 11:14:54 PM PST, Steven Yen
>>>             <styen at ntu.edu.tw <mailto:styen at ntu.edu.tw>> wrote:
>>>             >> I constantly define variable lists from a data frame
>>>             (e.g., to define a
>>>             >>
>>>             >> regression equation). Line 3 below does just that.
>>>             Placing each
>>>             >> variable
>>>             >> name in quotation marks is too much work especially
>>>             for a long list so
>>>             >> I
>>>             >> do that with line 4. Is there an easier way to
>>>             accomplish this----to
>>>             >> define a list of variable names containing
>>>             "a","c","e"? Thank you!
>>>             >>
>>>             >>> data<-as.data.frame(matrix(1:30,nrow=6))
>>>             >>> colnames(data)<-c("a","b","c","d","e"); data
>>>             >>? ? a? b? c? d? e
>>>             >> 1 1? 7 13 19 25
>>>             >> 2 2? 8 14 20 26
>>>             >> 3 3? 9 15 21 27
>>>             >> 4 4 10 16 22 28
>>>             >> 5 5 11 17 23 29
>>>             >> 6 6 12 18 24 30
>>>             >>> x1<-c("a","c","e"); x1 # line 3
>>>             >> [1] "a" "c" "e"
>>>             >>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>>>             >> [1] "a" "c" "e"
>>>             >>
>>>             >> ______________________________________________
>>>             >> R-help at r-project.org <mailto:R-help at r-project.org>
>>>             mailing list -- To UNSUBSCRIBE and more, see
>>>             >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>             <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>             >> PLEASE do read the posting guide
>>>             >> http://www.R-project.org/posting-guide.html
>>>             <http://www.R-project.org/posting-guide.html>
>>>             >> and provide commented, minimal, self-contained,
>>>             reproducible code.
>>>
>>>             ______________________________________________
>>>             R-help at r-project.org <mailto:R-help at r-project.org>
>>>             mailing list -- To UNSUBSCRIBE and more, see
>>>             https://stat.ethz.ch/mailman/listinfo/r-help
>>>             <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>             PLEASE do read the posting guide
>>>             http://www.R-project.org/posting-guide.html
>>>             <http://www.R-project.org/posting-guide.html>
>>>             and provide commented, minimal, self-contained,
>>>             reproducible code.
>>>

	[[alternative HTML version deleted]]


From tuech|er @end|ng |rom gmx@@t  Tue Jan  5 13:49:37 2021
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Tue, 5 Jan 2021 13:49:37 +0100
Subject: [R] Defining partial list of variables
In-Reply-To: <70f2ed07-c78f-0886-7f06-ae86a74c53f5@ntu.edu.tw>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
 <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
 <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>
 <fd8b09ca-fe2f-3612-a93a-7f32564e34df@ntu.edu.tw>
 <CAGgJW76R-sfKGYXbWvez_VkNu9abpDJTG=5QcC4ts5dfzq+VTw@mail.gmail.com>
 <a50842f7-c3a3-56d6-f7f1-319e308f62d8@ntu.edu.tw>
 <CAGgJW77fnn7gfczXeJJ4bxo3rhF2OuV=K_jFRUtGZa6PjdSScA@mail.gmail.com>
 <70f2ed07-c78f-0886-7f06-ae86a74c53f5@ntu.edu.tw>
Message-ID: <120a955a-1a76-370d-32e0-2ff422f52192@gmx.at>

What about the Cs()-function in Hmisc?
library(Hmisc)
Cs(a,b,c)
[1] "a" "b" "c"

Steven Yen wrote/hat geschrieben on/am 05.01.2021 13:29:
> Thanks Eric. Yes, "unlist" makes a difference. Below, I am doing not
> regression but summary to keep the example simple.
>
>  > set.seed(123)
>  > data<-matrix(runif(1:25),nrow=5)
>  > colnames(data)<-c("x1","x2","x3","x4","x5"); data
>              x1        x2        x3         x4        x5
> [1,] 0.2875775 0.0455565 0.9568333 0.89982497 0.8895393
> [2,] 0.7883051 0.5281055 0.4533342 0.24608773 0.6928034
> [3,] 0.4089769 0.8924190 0.6775706 0.04205953 0.6405068
> [4,] 0.8830174 0.5514350 0.5726334 0.32792072 0.9942698
> [5,] 0.9404673 0.4566147 0.1029247 0.95450365 0.6557058
>  > j<-strsplit(gsub("[\n ]","","x1,x3,x5"),",")
>  > j<-unlist(j); j
> [1] "x1" "x3" "x5"
>  > summary(data[,j])
>         x1               x3               x5
>   Min.   :0.2876   Min.   :0.1029   Min.   :0.6405
>   1st Qu.:0.4090   1st Qu.:0.4533   1st Qu.:0.6557
>   Median :0.7883   Median :0.5726   Median :0.6928
>   Mean   :0.6617   Mean   :0.5527   Mean   :0.7746
>   3rd Qu.:0.8830   3rd Qu.:0.6776   3rd Qu.:0.8895
>   Max.   :0.9405   Max.   :0.9568   Max.   :0.9943
>
> On 2021/1/5 ?? 07:08, Eric Berger wrote:
>> wrap it in unlist
>>
>> xx <- unlist(strsplit( .... ))
>>
>>
>>
>> On Tue, Jan 5, 2021 at 12:59 PM Steven Yen <styen at ntu.edu.tw
>> <mailto:styen at ntu.edu.tw>> wrote:
>>
>>     Thanks Eric. Perhaps I should know when to stop. The approach
>>     produces a slightly different variable list (note the [[1]]).
>>     Consequently, I was not able to use xx in defining my regression
>>     formula.
>>
>>     > x<-colnames(subset(mydata,select=c(
>>
>>     +    hhsize,urban,male,
>>     +    age3045,age4659,age60, # age1529
>>     +    highsc,tert,           # primary
>>     +    gov,nongov,            # unemp
>>     +    married))); x
>>      [1] "hhsize"  "urban"   "male"    "age3045" "age4659" "age60"
>>     "highsc"  "tert"
>>      [9] "gov"     "nongov"  "married"
>>     > xx<-strsplit(gsub("[\n ]","",
>>     +    "hhsize,urban,male,
>>     +     age3045,age4659,age60,
>>     +     highsc,tert,
>>     +     gov,nongov,
>>     +     married"
>>     + ),","); xx
>>     [[1]]
>>      [1] "hhsize"  "urban"   "male"    "age3045" "age4659" "age60"
>>     "highsc"  "tert"
>>      [9] "gov"     "nongov"  "married"
>>
>>     > eq1<-my.formula(y="cig",x=x); eq1
>>     cig ~ hhsize + urban + male + age3045 + age4659 + age60 + highsc +
>>         tert + gov + nongov + married
>>     > eq2<-my.formula(y="cig",x=xx); eq2
>>     cig ~ c("hhsize", "urban", "male", "age3045", "age4659", "age60",
>>         "highsc", "tert", "gov", "nongov", "married")
>>
>>     On 2021/1/5 ?? 06:01, Eric Berger wrote:
>>>     If your column names have no spaces the following should work
>>>
>>>      x<-strsplit(gsub("[\n ]","",
>>>      "hhsize,urban,male,
>>>     + gov,nongov,married"),","); x
>>>
>>>     On Tue, Jan 5, 2021 at 11:47 AM Steven Yen <styen at ntu.edu.tw
>>>     <mailto:styen at ntu.edu.tw>> wrote:
>>>
>>>         Here we go! BUT, it works great for a continuous line. With
>>>         line break(s), I got the nuisance "\n" inserted.
>>>
>>>         > x<-strsplit("hhsize,urban,male,gov,nongov,married",","); x
>>>         [[1]]
>>>         [1] "hhsize"  "urban"   "male"    "gov" "nongov"  "married"
>>>
>>>         > x<-strsplit("hhsize,urban,male,
>>>         +             gov,nongov,married",","); x
>>>         [[1]]
>>>         [1] "hhsize"            "urban" "male"
>>>         "\n            gov"
>>>         [5] "nongov"            "married"
>>>
>>>         On 2021/1/5 ?? 05:34, Eric Berger wrote:
>>>>         zx<-strsplit("age,exercise,income,white,black,hispanic,base,somcol,grad,employed,unable,homeowner,married,divorced,widowed",",")
>>>>
>>>>
>>>>
>>>>         On Tue, Jan 5, 2021 at 11:01 AM Steven Yen <styen at ntu.edu.tw
>>>>         <mailto:styen at ntu.edu.tw>> wrote:
>>>>
>>>>             Thank you, Jeff. IMO, we are all here to make R work
>>>>             better to suit our
>>>>             various needs. All I am asking is an easier way to
>>>>             define variable list
>>>>             zx, differently from the way z0 , x0, and treat are defined.
>>>>
>>>>              > zx<-colnames(subset(mydata,select=c(
>>>>             +
>>>>             age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
>>>>             + unable,homeowner,married,divorced,widowed)))
>>>>              > z0<-c("fruit","highblood")
>>>>              > x0<-c("vgood","poor")
>>>>              > treat<-"depression"
>>>>              > eq1 <-my.formula(y="depression",x=zx,z0)
>>>>              > eq2 <-my.formula(y="bmi", x=zx,x0)
>>>>              > eq2t<-my.formula(y="bmi", x=zx,treat)
>>>>              > eqs<-list(eq1,eq2); eqs
>>>>             [[1]]
>>>>             depression ~ age + exercise + income + white + black +
>>>>             hispanic +
>>>>                  base + somcol + grad + employed + unable +
>>>>             homeowner + married +
>>>>                  divorced + widowed + fruit + highblood
>>>>
>>>>             [[2]]
>>>>             bmi ~ age + exercise + income + white + black + hispanic
>>>>             + base +
>>>>                  somcol + grad + employed + unable + homeowner +
>>>>             married +
>>>>                  divorced + widowed + vgood + poor
>>>>
>>>>              > eqt<-list(eq1,eq2t); eqt
>>>>             [[1]]
>>>>             depression ~ age + exercise + income + white + black +
>>>>             hispanic +
>>>>                  base + somcol + grad + employed + unable +
>>>>             homeowner + married +
>>>>                  divorced + widowed + fruit + highblood
>>>>
>>>>             [[2]]
>>>>             bmi ~ age + exercise + income + white + black + hispanic
>>>>             + base +
>>>>                  somcol + grad + employed + unable + homeowner +
>>>>             married +
>>>>                  divorced + widowed + depression
>>>>
>>>>             On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
>>>>             > IMO if you want to hardcode a formula then simply
>>>>             hardcode a formula. If you want 20 formulas, write 20
>>>>             formulas. Is that really so bad?
>>>>             >
>>>>             > If you want to have an abbreviated way to specify sets
>>>>             of variables without conforming to R syntax then put
>>>>             them into data files and read them in using a format of
>>>>             your choice.
>>>>             >
>>>>             > But using NSE to avoid using quotes for entering what
>>>>             amounts to in-script data is abuse of the language
>>>>             justified by laziness... the amount of work you put
>>>>             yourself and anyone else who reads your code through is
>>>>             excessive relative to the benefit gained.
>>>>             >
>>>>             > NSE has its strengths... but as a method of creating
>>>>             data objects it sucks. Note that even the tidyverse
>>>>             (now) requires you to use quotes when you are not
>>>>             directly referring to something that already exists. And
>>>>             if you were... you might as well be creating a formula.
>>>>             >
>>>>             > On January 4, 2021 11:14:54 PM PST, Steven Yen
>>>>             <styen at ntu.edu.tw <mailto:styen at ntu.edu.tw>> wrote:
>>>>             >> I constantly define variable lists from a data frame
>>>>             (e.g., to define a
>>>>             >>
>>>>             >> regression equation). Line 3 below does just that.
>>>>             Placing each
>>>>             >> variable
>>>>             >> name in quotation marks is too much work especially
>>>>             for a long list so
>>>>             >> I
>>>>             >> do that with line 4. Is there an easier way to
>>>>             accomplish this----to
>>>>             >> define a list of variable names containing
>>>>             "a","c","e"? Thank you!
>>>>             >>
>>>>             >>> data<-as.data.frame(matrix(1:30,nrow=6))
>>>>             >>> colnames(data)<-c("a","b","c","d","e"); data
>>>>             >>    a  b  c  d  e
>>>>             >> 1 1  7 13 19 25
>>>>             >> 2 2  8 14 20 26
>>>>             >> 3 3  9 15 21 27
>>>>             >> 4 4 10 16 22 28
>>>>             >> 5 5 11 17 23 29
>>>>             >> 6 6 12 18 24 30
>>>>             >>> x1<-c("a","c","e"); x1 # line 3
>>>>             >> [1] "a" "c" "e"
>>>>             >>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line 4
>>>>             >> [1] "a" "c" "e"
>>>>             >>
>>>>             >> ______________________________________________
>>>>             >> R-help at r-project.org <mailto:R-help at r-project.org>
>>>>             mailing list -- To UNSUBSCRIBE and more, see
>>>>             >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>             <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>>             >> PLEASE do read the posting guide
>>>>             >> http://www.R-project.org/posting-guide.html
>>>>             <http://www.R-project.org/posting-guide.html>
>>>>             >> and provide commented, minimal, self-contained,
>>>>             reproducible code.
>>>>
>>>>             ______________________________________________
>>>>             R-help at r-project.org <mailto:R-help at r-project.org>
>>>>             mailing list -- To UNSUBSCRIBE and more, see
>>>>             https://stat.ethz.ch/mailman/listinfo/r-help
>>>>             <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>>             PLEASE do read the posting guide
>>>>             http://www.R-project.org/posting-guide.html
>>>>             <http://www.R-project.org/posting-guide.html>
>>>>             and provide commented, minimal, self-contained,
>>>>             reproducible code.
>>>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From kev|neg@n31 @end|ng |rom gm@||@com  Tue Jan  5 13:26:18 2021
From: kev|neg@n31 @end|ng |rom gm@||@com (Kevin Egan)
Date: Tue, 5 Jan 2021 12:26:18 +0000
Subject: [R] Error Running Bootstrap Function within Wrapper Function
Message-ID: <CAMKuLyTw13c=1qfWE9XSev1ajKDZm36dEy+Y1ER19F7SHPXuSQ@mail.gmail.com>

Hello,

I am currently trying to solve a problem with the boot package and writing
a function within a function in R. I have developed several functions to
perform the lasso but continue to receive an error when bootstrapping these
functions within a wrapper function. When I perform these methods using
tsboot outside the wrapper function, I do not get an error. However, when
placed within my function I continue to get the error "Error in t[r, ] <-
res[[r]] : number of items to replace is not a multiple of length."

I've attached an example of my functions as well as a data file of the data
I am using. I'm sorry the file is so large, but I do not get a problem with
a smaller number of observations.


library(boot)
library(glmnet)
library(np)
foo1 <- function(data,index){ #index is the bootstrap sample index
  x <- data[index, -1] %>%
    as.matrix() %>%
    unname()
  y <- data[index, 1] %>%
    scale(center = TRUE, scale = FALSE) %>%
    as.matrix() %>%
    unname()
  ols <- lm(y ~ x)
  # The intercept estimate should be dropped.
  ols.coef <- as.numeric(coef(ols))[-1]
  ols.coef[is.na(ols.coef)] <- 0
  ## The intercept estimate should be dropped.
  lasso <- cv.glmnet(x, y, alpha = 1,
                     penalty.factor = 1 / abs(ols.coef))
  # Select nonzero coefficients from bic.out
  coef <- as.vector(coef(lasso,
                         s = lasso$lambda.min))[-1]
  return(coef)
}
foo2 <- function(data, index){ #index is the bootstrap sample index
  x <- data[index, -1] %>%
    as.matrix() %>%
    unname()
  y <- data[index, 1] %>%
    scale(center = TRUE, scale = FALSE) %>%
    as.matrix() %>%
    unname()
  # ic.glmnet provides coefficients with lowest BIC
  ols <- lm(y ~ x)
  # The intercept estimate should be dropped.
  ols.coef <- as.numeric(coef(ols))[-1]
  ols.coef[is.na(ols.coef)] <- 0
  lasso <- cv.glmnet(x, y, alpha = 1,
                     penalty.factor = 1 / abs(ols.coef))
  # Select nonzero coefficients from bic.out
  coef <- as.vector(coef(lasso,
                         s = lasso$lambda.min))[-1]
  coef_nonzero <- coef != 0
  if(sum(coef_nonzero) > 0) {
    ls_obj <- lm(y ~ x[, coef_nonzero, drop = FALSE])
    ls_coef <- as.vector(coef(ls_obj))[-1]
    coef[coef_nonzero] <- ls_coef
  }
  return(coef)
}
foo3 <- function(data, num_samples) {
  bstar <- b.star(data[, 1], round = TRUE)
  # Select Block Length of circular block result
  blocklength <- bstar[, 2]
  init_boot_ts <- tsboot(tseries = data,
                         statistic = foo1,
                         R = num_samples, l = blocklength,
                         sim = "fixed")
  final_boot_ts <- tsboot(tseries = data,
                          statistic = foo2,
                          R = num_samples,
                          l = blocklength, sim = "fixed")
  # point estimates
  final_boot_t0 <- final_boot_ts$t0
  return(list(point_estimates = final_boot_t0))
}
num_samples <- 50
test.foo3 <- foo3(data, num_samples = num_samples)

Which *sometimes *works, however, sometimes I get the error: ?Error in t[r,
] <- res[[r]] : number of items to replace is not a multiple of length".
I've also gotten the error "Error in x[, coef_nonzero, drop = FALSE]
:(subscript) logical subscript too long" at times, when running foo2 within
foo3. Which seems to be unclear as there should never be an index which is
greater than the number of columns in x.
As I stated, this error particularly occurs when I increase the number of
bootstrap samples I try to run, and only when I run foo3. When I run foo1
and foo2 separately, I don?t get an error at all. I?m wondering if there is
something I need to add to my function ?foo3? to ensure that an error like
this doesn?t occur since I am calling several other functions within this
function, ie., tsboot, foo1, and foo2.

Lastly, although I have not provided an example here, I get an error for
this code when running with lapply for several dataframes similar to the
attached.

Again, I apologise for attaching such a large data frame but the function
seems to work with fewer observations. Perhaps it is a data issue?

Thanks

From bgunter@4567 @end|ng |rom gm@||@com  Tue Jan  5 17:15:52 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 5 Jan 2021 08:15:52 -0800
Subject: [R] Defining partial list of variables
In-Reply-To: <120a955a-1a76-370d-32e0-2ff422f52192@gmx.at>
References: <1409200c-b1f8-51e6-0710-d7968209277b@ntu.edu.tw>
 <EE6A9991-E2EC-43B4-8B57-75ADE48B735C@dcn.davis.ca.us>
 <e468d57b-9096-6132-b058-e29ac89254a8@ntu.edu.tw>
 <CAGgJW74nqB9qBJfmd5rvo-qPxQUg=HfFM+jsEe_r1-JQesTA5A@mail.gmail.com>
 <fd8b09ca-fe2f-3612-a93a-7f32564e34df@ntu.edu.tw>
 <CAGgJW76R-sfKGYXbWvez_VkNu9abpDJTG=5QcC4ts5dfzq+VTw@mail.gmail.com>
 <a50842f7-c3a3-56d6-f7f1-319e308f62d8@ntu.edu.tw>
 <CAGgJW77fnn7gfczXeJJ4bxo3rhF2OuV=K_jFRUtGZa6PjdSScA@mail.gmail.com>
 <70f2ed07-c78f-0886-7f06-ae86a74c53f5@ntu.edu.tw>
 <120a955a-1a76-370d-32e0-2ff422f52192@gmx.at>
Message-ID: <CAGxFJbSeYCdJgEuw3z2yS71p8Uu+-JePTZ0K0CfRA04dNUPH+A@mail.gmail.com>

I may not I properly understand the context of this discussion, and, in
particular what the my.formula() function does. But if I do, the following,
from ?formula, seems relevant and would indicate that the discussion is
unnecessary:

"There are two special interpretations of . in a formula. The usual one is
in the context of a data argument of model fitting functions and means ?all
columns not otherwise in the formula?:"

This means you can fit different models just by indexing the columns -- by
number --  you wish to use in a data argument, viz:

y <- runif(100)
dat <- data.frame(matrix(runif(500), ncol = 5))
names(dat) <- letters[1:5]
head(dat)

## Use columns 1,3, and 5 only
mdl1 <- lm(y ~ ., data = dat[,c(1,3,5)])

## Result:
 summary(mdl1)

Call:
lm(formula = y ~ ., data = dat[, c(1, 3, 5)])

Residuals:
     Min       1Q   Median       3Q      Max
-0.52334 -0.27494  0.01245  0.28637  0.51998

Coefficients:
            Estimate Std. Error t value Pr(>|t|)
(Intercept)  0.51461    0.08236   6.248 1.14e-08 ***
a            0.01516    0.10928   0.139    0.890
c            0.03517    0.10399   0.338    0.736
e           -0.09437    0.10967  -0.861    0.392
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

Residual standard error: 0.299 on 96 degrees of freedom
Multiple R-squared:  0.008256, Adjusted R-squared:  -0.02274
F-statistic: 0.2664 on 3 and 96 DF,  p-value: 0.8495


If I have misunderstood and this is unhelpful, just ignore without comment.
You don't need to waste time explaining it to me.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jan 5, 2021 at 4:49 AM Heinz Tuechler <tuechler at gmx.at> wrote:

> What about the Cs()-function in Hmisc?
> library(Hmisc)
> Cs(a,b,c)
> [1] "a" "b" "c"
>
> Steven Yen wrote/hat geschrieben on/am 05.01.2021 13:29:
> > Thanks Eric. Yes, "unlist" makes a difference. Below, I am doing not
> > regression but summary to keep the example simple.
> >
> >  > set.seed(123)
> >  > data<-matrix(runif(1:25),nrow=5)
> >  > colnames(data)<-c("x1","x2","x3","x4","x5"); data
> >              x1        x2        x3         x4        x5
> > [1,] 0.2875775 0.0455565 0.9568333 0.89982497 0.8895393
> > [2,] 0.7883051 0.5281055 0.4533342 0.24608773 0.6928034
> > [3,] 0.4089769 0.8924190 0.6775706 0.04205953 0.6405068
> > [4,] 0.8830174 0.5514350 0.5726334 0.32792072 0.9942698
> > [5,] 0.9404673 0.4566147 0.1029247 0.95450365 0.6557058
> >  > j<-strsplit(gsub("[\n ]","","x1,x3,x5"),",")
> >  > j<-unlist(j); j
> > [1] "x1" "x3" "x5"
> >  > summary(data[,j])
> >         x1               x3               x5
> >   Min.   :0.2876   Min.   :0.1029   Min.   :0.6405
> >   1st Qu.:0.4090   1st Qu.:0.4533   1st Qu.:0.6557
> >   Median :0.7883   Median :0.5726   Median :0.6928
> >   Mean   :0.6617   Mean   :0.5527   Mean   :0.7746
> >   3rd Qu.:0.8830   3rd Qu.:0.6776   3rd Qu.:0.8895
> >   Max.   :0.9405   Max.   :0.9568   Max.   :0.9943
> >
> > On 2021/1/5 ?? 07:08, Eric Berger wrote:
> >> wrap it in unlist
> >>
> >> xx <- unlist(strsplit( .... ))
> >>
> >>
> >>
> >> On Tue, Jan 5, 2021 at 12:59 PM Steven Yen <styen at ntu.edu.tw
> >> <mailto:styen at ntu.edu.tw>> wrote:
> >>
> >>     Thanks Eric. Perhaps I should know when to stop. The approach
> >>     produces a slightly different variable list (note the [[1]]).
> >>     Consequently, I was not able to use xx in defining my regression
> >>     formula.
> >>
> >>     > x<-colnames(subset(mydata,select=c(
> >>
> >>     +    hhsize,urban,male,
> >>     +    age3045,age4659,age60, # age1529
> >>     +    highsc,tert,           # primary
> >>     +    gov,nongov,            # unemp
> >>     +    married))); x
> >>      [1] "hhsize"  "urban"   "male"    "age3045" "age4659" "age60"
> >>     "highsc"  "tert"
> >>      [9] "gov"     "nongov"  "married"
> >>     > xx<-strsplit(gsub("[\n ]","",
> >>     +    "hhsize,urban,male,
> >>     +     age3045,age4659,age60,
> >>     +     highsc,tert,
> >>     +     gov,nongov,
> >>     +     married"
> >>     + ),","); xx
> >>     [[1]]
> >>      [1] "hhsize"  "urban"   "male"    "age3045" "age4659" "age60"
> >>     "highsc"  "tert"
> >>      [9] "gov"     "nongov"  "married"
> >>
> >>     > eq1<-my.formula(y="cig",x=x); eq1
> >>     cig ~ hhsize + urban + male + age3045 + age4659 + age60 + highsc +
> >>         tert + gov + nongov + married
> >>     > eq2<-my.formula(y="cig",x=xx); eq2
> >>     cig ~ c("hhsize", "urban", "male", "age3045", "age4659", "age60",
> >>         "highsc", "tert", "gov", "nongov", "married")
> >>
> >>     On 2021/1/5 ?? 06:01, Eric Berger wrote:
> >>>     If your column names have no spaces the following should work
> >>>
> >>>      x<-strsplit(gsub("[\n ]","",
> >>>      "hhsize,urban,male,
> >>>     + gov,nongov,married"),","); x
> >>>
> >>>     On Tue, Jan 5, 2021 at 11:47 AM Steven Yen <styen at ntu.edu.tw
> >>>     <mailto:styen at ntu.edu.tw>> wrote:
> >>>
> >>>         Here we go! BUT, it works great for a continuous line. With
> >>>         line break(s), I got the nuisance "\n" inserted.
> >>>
> >>>         > x<-strsplit("hhsize,urban,male,gov,nongov,married",","); x
> >>>         [[1]]
> >>>         [1] "hhsize"  "urban"   "male"    "gov" "nongov"  "married"
> >>>
> >>>         > x<-strsplit("hhsize,urban,male,
> >>>         +             gov,nongov,married",","); x
> >>>         [[1]]
> >>>         [1] "hhsize"            "urban" "male"
> >>>         "\n            gov"
> >>>         [5] "nongov"            "married"
> >>>
> >>>         On 2021/1/5 ?? 05:34, Eric Berger wrote:
> >>>>
>  zx<-strsplit("age,exercise,income,white,black,hispanic,base,somcol,grad,employed,unable,homeowner,married,divorced,widowed",",")
> >>>>
> >>>>
> >>>>
> >>>>         On Tue, Jan 5, 2021 at 11:01 AM Steven Yen <styen at ntu.edu.tw
> >>>>         <mailto:styen at ntu.edu.tw>> wrote:
> >>>>
> >>>>             Thank you, Jeff. IMO, we are all here to make R work
> >>>>             better to suit our
> >>>>             various needs. All I am asking is an easier way to
> >>>>             define variable list
> >>>>             zx, differently from the way z0 , x0, and treat are
> defined.
> >>>>
> >>>>              > zx<-colnames(subset(mydata,select=c(
> >>>>             +
> >>>>
>  age,exercise,income,white,black,hispanic,base,somcol,grad,employed,
> >>>>             + unable,homeowner,married,divorced,widowed)))
> >>>>              > z0<-c("fruit","highblood")
> >>>>              > x0<-c("vgood","poor")
> >>>>              > treat<-"depression"
> >>>>              > eq1 <-my.formula(y="depression",x=zx,z0)
> >>>>              > eq2 <-my.formula(y="bmi", x=zx,x0)
> >>>>              > eq2t<-my.formula(y="bmi", x=zx,treat)
> >>>>              > eqs<-list(eq1,eq2); eqs
> >>>>             [[1]]
> >>>>             depression ~ age + exercise + income + white + black +
> >>>>             hispanic +
> >>>>                  base + somcol + grad + employed + unable +
> >>>>             homeowner + married +
> >>>>                  divorced + widowed + fruit + highblood
> >>>>
> >>>>             [[2]]
> >>>>             bmi ~ age + exercise + income + white + black + hispanic
> >>>>             + base +
> >>>>                  somcol + grad + employed + unable + homeowner +
> >>>>             married +
> >>>>                  divorced + widowed + vgood + poor
> >>>>
> >>>>              > eqt<-list(eq1,eq2t); eqt
> >>>>             [[1]]
> >>>>             depression ~ age + exercise + income + white + black +
> >>>>             hispanic +
> >>>>                  base + somcol + grad + employed + unable +
> >>>>             homeowner + married +
> >>>>                  divorced + widowed + fruit + highblood
> >>>>
> >>>>             [[2]]
> >>>>             bmi ~ age + exercise + income + white + black + hispanic
> >>>>             + base +
> >>>>                  somcol + grad + employed + unable + homeowner +
> >>>>             married +
> >>>>                  divorced + widowed + depression
> >>>>
> >>>>             On 2021/1/5 ?? 04:18, Jeff Newmiller wrote:
> >>>>             > IMO if you want to hardcode a formula then simply
> >>>>             hardcode a formula. If you want 20 formulas, write 20
> >>>>             formulas. Is that really so bad?
> >>>>             >
> >>>>             > If you want to have an abbreviated way to specify sets
> >>>>             of variables without conforming to R syntax then put
> >>>>             them into data files and read them in using a format of
> >>>>             your choice.
> >>>>             >
> >>>>             > But using NSE to avoid using quotes for entering what
> >>>>             amounts to in-script data is abuse of the language
> >>>>             justified by laziness... the amount of work you put
> >>>>             yourself and anyone else who reads your code through is
> >>>>             excessive relative to the benefit gained.
> >>>>             >
> >>>>             > NSE has its strengths... but as a method of creating
> >>>>             data objects it sucks. Note that even the tidyverse
> >>>>             (now) requires you to use quotes when you are not
> >>>>             directly referring to something that already exists. And
> >>>>             if you were... you might as well be creating a formula.
> >>>>             >
> >>>>             > On January 4, 2021 11:14:54 PM PST, Steven Yen
> >>>>             <styen at ntu.edu.tw <mailto:styen at ntu.edu.tw>> wrote:
> >>>>             >> I constantly define variable lists from a data frame
> >>>>             (e.g., to define a
> >>>>             >>
> >>>>             >> regression equation). Line 3 below does just that.
> >>>>             Placing each
> >>>>             >> variable
> >>>>             >> name in quotation marks is too much work especially
> >>>>             for a long list so
> >>>>             >> I
> >>>>             >> do that with line 4. Is there an easier way to
> >>>>             accomplish this----to
> >>>>             >> define a list of variable names containing
> >>>>             "a","c","e"? Thank you!
> >>>>             >>
> >>>>             >>> data<-as.data.frame(matrix(1:30,nrow=6))
> >>>>             >>> colnames(data)<-c("a","b","c","d","e"); data
> >>>>             >>    a  b  c  d  e
> >>>>             >> 1 1  7 13 19 25
> >>>>             >> 2 2  8 14 20 26
> >>>>             >> 3 3  9 15 21 27
> >>>>             >> 4 4 10 16 22 28
> >>>>             >> 5 5 11 17 23 29
> >>>>             >> 6 6 12 18 24 30
> >>>>             >>> x1<-c("a","c","e"); x1 # line 3
> >>>>             >> [1] "a" "c" "e"
> >>>>             >>> x2<-colnames(subset(data,select=c(a,c,e))); x2 # line
> 4
> >>>>             >> [1] "a" "c" "e"
> >>>>             >>
> >>>>             >> ______________________________________________
> >>>>             >> R-help at r-project.org <mailto:R-help at r-project.org>
> >>>>             mailing list -- To UNSUBSCRIBE and more, see
> >>>>             >> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>             <https://stat.ethz.ch/mailman/listinfo/r-help>
> >>>>             >> PLEASE do read the posting guide
> >>>>             >> http://www.R-project.org/posting-guide.html
> >>>>             <http://www.R-project.org/posting-guide.html>
> >>>>             >> and provide commented, minimal, self-contained,
> >>>>             reproducible code.
> >>>>
> >>>>             ______________________________________________
> >>>>             R-help at r-project.org <mailto:R-help at r-project.org>
> >>>>             mailing list -- To UNSUBSCRIBE and more, see
> >>>>             https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>             <https://stat.ethz.ch/mailman/listinfo/r-help>
> >>>>             PLEASE do read the posting guide
> >>>>             http://www.R-project.org/posting-guide.html
> >>>>             <http://www.R-project.org/posting-guide.html>
> >>>>             and provide commented, minimal, self-contained,
> >>>>             reproducible code.
> >>>>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From S@E|||@on @end|ng |rom LGCGroup@com  Wed Jan  6 13:48:02 2021
From: S@E|||@on @end|ng |rom LGCGroup@com (Stephen Ellison)
Date: Wed, 6 Jan 2021 12:48:02 +0000
Subject: [R] Error Running Bootstrap Function within Wrapper Function
In-Reply-To: <CAMKuLyTw13c=1qfWE9XSev1ajKDZm36dEy+Y1ER19F7SHPXuSQ@mail.gmail.com>
References: <CAMKuLyTw13c=1qfWE9XSev1ajKDZm36dEy+Y1ER19F7SHPXuSQ@mail.gmail.com>
Message-ID: <c5680702983840339f226e31f7c436cf@GBDCVPEXC04.corp.lgc-group.com>

Kevin,

I didn't have the data set (you might want to post a link to a downloadable file instead), but on a quick look at the code your foo1 function looks as if it is not guaranteed to return an array of the same length each time. It's testing for nonzero coefs in a fitted model and then dropping exact zero coefs. That need not (and often will not) return the same coefficients every time in a simulation.  foo2 does the same general kind of thing. 

Could that be part of the problem?

S Ellison


> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kevin Egan
> Sent: 05 January 2021 12:26
> To: r-help <r-help at r-project.org>
> Subject: [R] Error Running Bootstrap Function within Wrapper Function
> 
> ===============
>  EXTERNAL EMAIL
> ===============
> 
> Hello,
> 
> I am currently trying to solve a problem with the boot package and writing a
> function within a function in R. I have developed several functions to
> perform the lasso but continue to receive an error when bootstrapping these
> functions within a wrapper function. When I perform these methods using
> tsboot outside the wrapper function, I do not get an error. However, when
> placed within my function I continue to get the error "Error in t[r, ] <- res[[r]]
> : number of items to replace is not a multiple of length."
> 
> I've attached an example of my functions as well as a data file of the data I
> am using. I'm sorry the file is so large, but I do not get a problem with a
> smaller number of observations.
> 
> 
> library(boot)
> library(glmnet)
> library(np)
> foo1 <- function(data,index){ #index is the bootstrap sample index
>   x <- data[index, -1] %>%
>     as.matrix() %>%
>     unname()
>   y <- data[index, 1] %>%
>     scale(center = TRUE, scale = FALSE) %>%
>     as.matrix() %>%
>     unname()
>   ols <- lm(y ~ x)
>   # The intercept estimate should be dropped.
>   ols.coef <- as.numeric(coef(ols))[-1]
>   ols.coef[is.na(ols.coef)] <- 0
>   ## The intercept estimate should be dropped.
>   lasso <- cv.glmnet(x, y, alpha = 1,
>                      penalty.factor = 1 / abs(ols.coef))
>   # Select nonzero coefficients from bic.out
>   coef <- as.vector(coef(lasso,
>                          s = lasso$lambda.min))[-1]
>   return(coef)
> }
> foo2 <- function(data, index){ #index is the bootstrap sample index
>   x <- data[index, -1] %>%
>     as.matrix() %>%
>     unname()
>   y <- data[index, 1] %>%
>     scale(center = TRUE, scale = FALSE) %>%
>     as.matrix() %>%
>     unname()
>   # ic.glmnet provides coefficients with lowest BIC
>   ols <- lm(y ~ x)
>   # The intercept estimate should be dropped.
>   ols.coef <- as.numeric(coef(ols))[-1]
>   ols.coef[is.na(ols.coef)] <- 0
>   lasso <- cv.glmnet(x, y, alpha = 1,
>                      penalty.factor = 1 / abs(ols.coef))
>   # Select nonzero coefficients from bic.out
>   coef <- as.vector(coef(lasso,
>                          s = lasso$lambda.min))[-1]
>   coef_nonzero <- coef != 0
>   if(sum(coef_nonzero) > 0) {
>     ls_obj <- lm(y ~ x[, coef_nonzero, drop = FALSE])
>     ls_coef <- as.vector(coef(ls_obj))[-1]
>     coef[coef_nonzero] <- ls_coef
>   }
>   return(coef)
> }
> foo3 <- function(data, num_samples) {
>   bstar <- b.star(data[, 1], round = TRUE)
>   # Select Block Length of circular block result
>   blocklength <- bstar[, 2]
>   init_boot_ts <- tsboot(tseries = data,
>                          statistic = foo1,
>                          R = num_samples, l = blocklength,
>                          sim = "fixed")
>   final_boot_ts <- tsboot(tseries = data,
>                           statistic = foo2,
>                           R = num_samples,
>                           l = blocklength, sim = "fixed")
>   # point estimates
>   final_boot_t0 <- final_boot_ts$t0
>   return(list(point_estimates = final_boot_t0)) } num_samples <- 50
> test.foo3 <- foo3(data, num_samples = num_samples)
> 
> Which *sometimes *works, however, sometimes I get the error: ?Error in t[r,
> ] <- res[[r]] : number of items to replace is not a multiple of length".
> I've also gotten the error "Error in x[, coef_nonzero, drop = FALSE]
> :(subscript) logical subscript too long" at times, when running foo2 within
> foo3. Which seems to be unclear as there should never be an index which is
> greater than the number of columns in x.
> As I stated, this error particularly occurs when I increase the number of
> bootstrap samples I try to run, and only when I run foo3. When I run foo1
> and foo2 separately, I don?t get an error at all. I?m wondering if there is
> something I need to add to my function ?foo3? to ensure that an error like
> this doesn?t occur since I am calling several other functions within this
> function, ie., tsboot, foo1, and foo2.
> 
> Lastly, although I have not provided an example here, I get an error for this
> code when running with lapply for several dataframes similar to the
> attached.
> 
> Again, I apologise for attaching such a large data frame but the function
> seems to work with fewer observations. Perhaps it is a data issue?
> 
> Thanks
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> ==========================================================
> ====================================
> WARNING - EXTERNAL: This email originated from outside of LGC. Do not click
> any links or open any attachments unless you trust the sender and know that
> the content is safe
> ==========================================================
> ====================================


*******************************************************************
This email and any attachments are confidential. Any use, copying or
disclosure other than by the intended recipient is unauthorised. If 
you have received this message in error, please notify the sender 
immediately via +44(0)20 8943 7000 or notify postmaster at lgcgroup.com 
and delete this message and any copies from your computer and network. 
LGC Limited. Registered in England 2991879. 
Registered office: Queens Road, Teddington, Middlesex, TW11 0LY, UK

From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Wed Jan  6 21:16:59 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Wed, 6 Jan 2021 20:16:59 +0000 (UTC)
Subject: [R] AIC for robust GAM ?
References: <1126246033.11932597.1609964219484.ref@mail.yahoo.com>
Message-ID: <1126246033.11932597.1609964219484@mail.yahoo.com>

Dear R-Experts,

Here below my reproducible R code.
How can I get the AIC of my model (robust GAM) ?

Best Regards,


y<-c(499,491,500,517,438,495,501,525,516,494,500,453,479,481,505,465,477,520,520,480,477,416,502,503,497,513,492,469,504,482,502,498,463,504,495)
x<-c(499,496,424,537,480,484,503,575,540,436,486,506,496,481,508,425,501,519,546,507,452,498,471,495,499,522,509,474,502,534,504,466,527,485,525)
library(robustgam)
true.family <- poisson()
fit=robustgam(x,y,sp=0,family=true.family,smooth.basis='ps',K=3)
AIC(fit)

?

?


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jan  6 21:47:02 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 6 Jan 2021 12:47:02 -0800
Subject: [R] AIC for robust GAM ?
In-Reply-To: <1126246033.11932597.1609964219484@mail.yahoo.com>
References: <1126246033.11932597.1609964219484.ref@mail.yahoo.com>
 <1126246033.11932597.1609964219484@mail.yahoo.com>
Message-ID: <CAGxFJbQ9YkFW7RA3n2JeP5OXf1mGsa7v234Ld6_7UPZsmp_v=w@mail.gmail.com>

Per the posting guide linked below:

"If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

So I believe that you should try to contact the maintainer for your
question first. You may get lucky here, of course, but your query seems
rather too technical to expect a useful response on R-Help.

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jan 6, 2021 at 12:17 PM varin sacha via R-help <r-help at r-project.org>
wrote:

> Dear R-Experts,
>
> Here below my reproducible R code.
> How can I get the AIC of my model (robust GAM) ?
>
> Best Regards,
>
>
>
> y<-c(499,491,500,517,438,495,501,525,516,494,500,453,479,481,505,465,477,520,520,480,477,416,502,503,497,513,492,469,504,482,502,498,463,504,495)
>
> x<-c(499,496,424,537,480,484,503,575,540,436,486,506,496,481,508,425,501,519,546,507,452,498,471,495,499,522,509,474,502,534,504,466,527,485,525)
> library(robustgam)
> true.family <- poisson()
> fit=robustgam(x,y,sp=0,family=true.family,smooth.basis='ps',K=3)
> AIC(fit)
>
>
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Jan  6 23:22:25 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 7 Jan 2021 11:22:25 +1300
Subject: [R] Updated version of the hse package.
Message-ID: <20210107112225.0d5e1efa@rolf-Latitude-E7470>


I have recently submitted a fairly major revision of my hse
package to CRAN.  The source of the revised package is now
available.  Windoze and MacOS binaries will appear soon.

*After* submitting (psigh!) I noticed a distressingly large
number of typos and glitches in the help files.  These have
now been corrected, and the corrected version of the help
will appear in the next release.  However I'm sure that there
are many more such glitches that I *haven't* noticed!

I would be very grateful to anyone who points out such errors
to me.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From gob@@|||ngrud @end|ng |rom gm@||@com  Thu Jan  7 00:39:10 2021
From: gob@@|||ngrud @end|ng |rom gm@||@com (Gordon Ballingrud)
Date: Wed, 6 Jan 2021 18:39:10 -0500
Subject: [R] text analysis errors
Message-ID: <CAJ6CFDsfU7BCmKARzhtGSCGJJMK9O2FgK8hyYypXOi0wyMUeZQ@mail.gmail.com>

Hello all,

I have asked this question on many forums without response. And although
I've made progress myself, I am stuck as to how to respond to a particular
error message.

I have a question about text-analysis packages and code. The general idea
is that I am trying to perform readability analyses on a collection of
about 4,000 Word files. I would like to do any of a number of such
analyses, but the problem now is getting R to recognize the uploaded files
as data ready for analysis. But I have been getting error messages. Let me
show what I have done so far. I have three separate commands because I
broke the file of 4,000 files up into three separate ones because,
evidently, the file was too voluminous to be read alone in its entirety.
So, I divided the files up into three roughly similar folders. They are
called ?WPSCASES? one through three. Here is my code, with the error
messages for each command recorded below:

token <-
tokenize("/Users/Gordon/Desktop/WPSCASESONE/",lang="en",doc_id="sample")

The code is the same for the other folders; the name of the folder is
different, but otherwise identical.

The error message reads:

*Error in nchar(tagged.text[, "token"], type = "width") : invalid multibyte
string, element 348*

The error messages are the same for the other two commands. But the
'element' number is different. It's 925 for the second folder, and 4302 for
the third.

token2 <-
tokenize("/Users/Gordon/Desktop/WPSCASES2/",lang="en",doc_id="sample")

token3 <-
tokenize("/Users/Gordon/Desktop/WPSCASES3/",lang="en",doc_id="sample")

These are the other commands if that's helpful.

I?ve tried to discover whether the ?element? that the error message
mentions corresponds to the file of that number in the file?s order. But
since folder 3 does not have 4,300 files in it, I think that that was
unlikely. Please let me know if you can figure out how to fix this stuff so
that I can start to use ?koRpus? commands, like ?readability? and its
progeny.

Thank you,
Gordon

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Jan  7 01:34:21 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 7 Jan 2021 11:34:21 +1100
Subject: [R] text analysis errors
In-Reply-To: <CAJ6CFDsfU7BCmKARzhtGSCGJJMK9O2FgK8hyYypXOi0wyMUeZQ@mail.gmail.com>
References: <CAJ6CFDsfU7BCmKARzhtGSCGJJMK9O2FgK8hyYypXOi0wyMUeZQ@mail.gmail.com>
Message-ID: <CA+8X3fXcXtahueYe0q=0S5E95gL-5t2=5FTpv47nu6A3wfrMNg@mail.gmail.com>

Hi Gordon,
Looks to me as though you may have to extract the text from the Word
files. Export As Text.

Jim

On Thu, Jan 7, 2021 at 10:40 AM Gordon Ballingrud
<gob.allingrud at gmail.com> wrote:
>
> Hello all,
>
> I have asked this question on many forums without response. And although
> I've made progress myself, I am stuck as to how to respond to a particular
> error message.
>
> I have a question about text-analysis packages and code. The general idea
> is that I am trying to perform readability analyses on a collection of
> about 4,000 Word files. I would like to do any of a number of such
> analyses, but the problem now is getting R to recognize the uploaded files
> as data ready for analysis. But I have been getting error messages. Let me
> show what I have done so far. I have three separate commands because I
> broke the file of 4,000 files up into three separate ones because,
> evidently, the file was too voluminous to be read alone in its entirety.
> So, I divided the files up into three roughly similar folders. They are
> called ?WPSCASES? one through three. Here is my code, with the error
> messages for each command recorded below:
>
> token <-
> tokenize("/Users/Gordon/Desktop/WPSCASESONE/",lang="en",doc_id="sample")
>
> The code is the same for the other folders; the name of the folder is
> different, but otherwise identical.
>
> The error message reads:
>
> *Error in nchar(tagged.text[, "token"], type = "width") : invalid multibyte
> string, element 348*
>
> The error messages are the same for the other two commands. But the
> 'element' number is different. It's 925 for the second folder, and 4302 for
> the third.
>
> token2 <-
> tokenize("/Users/Gordon/Desktop/WPSCASES2/",lang="en",doc_id="sample")
>
> token3 <-
> tokenize("/Users/Gordon/Desktop/WPSCASES3/",lang="en",doc_id="sample")
>
> These are the other commands if that's helpful.
>
> I?ve tried to discover whether the ?element? that the error message
> mentions corresponds to the file of that number in the file?s order. But
> since folder 3 does not have 4,300 files in it, I think that that was
> unlikely. Please let me know if you can figure out how to fix this stuff so
> that I can start to use ?koRpus? commands, like ?readability? and its
> progeny.
>
> Thank you,
> Gordon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kev|neg@n31 @end|ng |rom gm@||@com  Wed Jan  6 14:15:40 2021
From: kev|neg@n31 @end|ng |rom gm@||@com (Kevin Egan)
Date: Wed, 6 Jan 2021 13:15:40 +0000
Subject: [R] Error Running Bootstrap Function within Wrapper Function
In-Reply-To: <c5680702983840339f226e31f7c436cf@GBDCVPEXC04.corp.lgc-group.com>
References: <CAMKuLyTw13c=1qfWE9XSev1ajKDZm36dEy+Y1ER19F7SHPXuSQ@mail.gmail.com>
 <c5680702983840339f226e31f7c436cf@GBDCVPEXC04.corp.lgc-group.com>
Message-ID: <CAMKuLyRSfF-w_SV7_HmvcwHT_suJ1M1xC3L70e7xFQeeE3jfNg@mail.gmail.com>

Hi Stephen,

Thanks for the advice, from my understanding, the function foo1 should
provide a vector of coefficients which are the same length as the columns
in the data frame provided. This is based on the results from glmnet. With
foo2, this should be the same case, I've provided an if statement that
performs OLS if the sum of coef_nonzero is greater than 0. Meaning there
should be at least one independent variable from the original data set to
perform OLS since it's coefficient from glmnet was nonzero.

I previously have not had any issues with this method for other tests I
have run, it seems to only occur as this data increases in observations.
Would it be possible for you to look at the attached file? I provide a new
foo1 function that generates the data I am using, the same 3 functions I
sent previously, and the function I am using for glmnet. I'm still not sure
why, but as the number of bootstrap samples increases, I get an error with
my methods, particularly with foo3.

At this point, I think the problem could be with the wrapper function or
with the data itself.

I appreciate any help I can get at this point. I've been trying to debug
this function for almost a month.

Thanks,

Kevin


https://www.dropbox.com/s/1sdidrnmzrqmukt/r-help%20example.R?dl=0

On Wed, Jan 6, 2021 at 12:48 PM Stephen Ellison <S.Ellison at lgcgroup.com>
wrote:

> Kevin,
>
> I didn't have the data set (you might want to post a link to a
> downloadable file instead), but on a quick look at the code your foo1
> function looks as if it is not guaranteed to return an array of the same
> length each time. It's testing for nonzero coefs in a fitted model and then
> dropping exact zero coefs. That need not (and often will not) return the
> same coefficients every time in a simulation.  foo2 does the same general
> kind of thing.
>
> Could that be part of the problem?
>
> S Ellison
>
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Kevin Egan
> > Sent: 05 January 2021 12:26
> > To: r-help <r-help at r-project.org>
> > Subject: [R] Error Running Bootstrap Function within Wrapper Function
> >
> > ===============
> >  EXTERNAL EMAIL
> > ===============
> >
> > Hello,
> >
> > I am currently trying to solve a problem with the boot package and
> writing a
> > function within a function in R. I have developed several functions to
> > perform the lasso but continue to receive an error when bootstrapping
> these
> > functions within a wrapper function. When I perform these methods using
> > tsboot outside the wrapper function, I do not get an error. However, when
> > placed within my function I continue to get the error "Error in t[r, ]
> <- res[[r]]
> > : number of items to replace is not a multiple of length."
> >
> > I've attached an example of my functions as well as a data file of the
> data I
> > am using. I'm sorry the file is so large, but I do not get a problem
> with a
> > smaller number of observations.
> >
> >
> > library(boot)
> > library(glmnet)
> > library(np)
> > foo1 <- function(data,index){ #index is the bootstrap sample index
> >   x <- data[index, -1] %>%
> >     as.matrix() %>%
> >     unname()
> >   y <- data[index, 1] %>%
> >     scale(center = TRUE, scale = FALSE) %>%
> >     as.matrix() %>%
> >     unname()
> >   ols <- lm(y ~ x)
> >   # The intercept estimate should be dropped.
> >   ols.coef <- as.numeric(coef(ols))[-1]
> >   ols.coef[is.na(ols.coef)] <- 0
> >   ## The intercept estimate should be dropped.
> >   lasso <- cv.glmnet(x, y, alpha = 1,
> >                      penalty.factor = 1 / abs(ols.coef))
> >   # Select nonzero coefficients from bic.out
> >   coef <- as.vector(coef(lasso,
> >                          s = lasso$lambda.min))[-1]
> >   return(coef)
> > }
> > foo2 <- function(data, index){ #index is the bootstrap sample index
> >   x <- data[index, -1] %>%
> >     as.matrix() %>%
> >     unname()
> >   y <- data[index, 1] %>%
> >     scale(center = TRUE, scale = FALSE) %>%
> >     as.matrix() %>%
> >     unname()
> >   # ic.glmnet provides coefficients with lowest BIC
> >   ols <- lm(y ~ x)
> >   # The intercept estimate should be dropped.
> >   ols.coef <- as.numeric(coef(ols))[-1]
> >   ols.coef[is.na(ols.coef)] <- 0
> >   lasso <- cv.glmnet(x, y, alpha = 1,
> >                      penalty.factor = 1 / abs(ols.coef))
> >   # Select nonzero coefficients from bic.out
> >   coef <- as.vector(coef(lasso,
> >                          s = lasso$lambda.min))[-1]
> >   coef_nonzero <- coef != 0
> >   if(sum(coef_nonzero) > 0) {
> >     ls_obj <- lm(y ~ x[, coef_nonzero, drop = FALSE])
> >     ls_coef <- as.vector(coef(ls_obj))[-1]
> >     coef[coef_nonzero] <- ls_coef
> >   }
> >   return(coef)
> > }
> > foo3 <- function(data, num_samples) {
> >   bstar <- b.star(data[, 1], round = TRUE)
> >   # Select Block Length of circular block result
> >   blocklength <- bstar[, 2]
> >   init_boot_ts <- tsboot(tseries = data,
> >                          statistic = foo1,
> >                          R = num_samples, l = blocklength,
> >                          sim = "fixed")
> >   final_boot_ts <- tsboot(tseries = data,
> >                           statistic = foo2,
> >                           R = num_samples,
> >                           l = blocklength, sim = "fixed")
> >   # point estimates
> >   final_boot_t0 <- final_boot_ts$t0
> >   return(list(point_estimates = final_boot_t0)) } num_samples <- 50
> > test.foo3 <- foo3(data, num_samples = num_samples)
> >
> > Which *sometimes *works, however, sometimes I get the error: ?Error in
> t[r,
> > ] <- res[[r]] : number of items to replace is not a multiple of length".
> > I've also gotten the error "Error in x[, coef_nonzero, drop = FALSE]
> > :(subscript) logical subscript too long" at times, when running foo2
> within
> > foo3. Which seems to be unclear as there should never be an index which
> is
> > greater than the number of columns in x.
> > As I stated, this error particularly occurs when I increase the number of
> > bootstrap samples I try to run, and only when I run foo3. When I run foo1
> > and foo2 separately, I don?t get an error at all. I?m wondering if there
> is
> > something I need to add to my function ?foo3? to ensure that an error
> like
> > this doesn?t occur since I am calling several other functions within this
> > function, ie., tsboot, foo1, and foo2.
> >
> > Lastly, although I have not provided an example here, I get an error for
> this
> > code when running with lapply for several dataframes similar to the
> > attached.
> >
> > Again, I apologise for attaching such a large data frame but the function
> > seems to work with fewer observations. Perhaps it is a data issue?
> >
> > Thanks
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> >
> > ==========================================================
> > ====================================
> > WARNING - EXTERNAL: This email originated from outside of LGC. Do not
> click
> > any links or open any attachments unless you trust the sender and know
> that
> > the content is safe
> > ==========================================================
> > ====================================
>
>
> *******************************************************************
> This email and any attachments are confidential. Any u...{{dropped:12}}


From jr@| @end|ng |rom po@teo@no  Thu Jan  7 14:06:45 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 7 Jan 2021 14:06:45 +0100
Subject: [R] text analysis errors
In-Reply-To: <CA+8X3fXcXtahueYe0q=0S5E95gL-5t2=5FTpv47nu6A3wfrMNg@mail.gmail.com>
References: <CAJ6CFDsfU7BCmKARzhtGSCGJJMK9O2FgK8hyYypXOi0wyMUeZQ@mail.gmail.com>
 <CA+8X3fXcXtahueYe0q=0S5E95gL-5t2=5FTpv47nu6A3wfrMNg@mail.gmail.com>
Message-ID: <X/cHZVjfR6/InUw3@posteo.no>

On 2021-01-07 11:34 +1100, Jim Lemon wrote:
> On Thu, Jan 7, 2021 at 10:40 AM Gordon Ballingrud
> <gob.allingrud at gmail.com> wrote:
> >
> > Hello all,
> >
> > I have asked this question on many forums without response. And although
> > I've made progress myself, I am stuck as to how to respond to a particular
> > error message.
> >
> > I have a question about text-analysis packages and code. The general idea
> > is that I am trying to perform readability analyses on a collection of
> > about 4,000 Word files. I would like to do any of a number of such
> > analyses, but the problem now is getting R to recognize the uploaded files
> > as data ready for analysis. But I have been getting error messages. Let me
> > show what I have done so far. I have three separate commands because I
> > broke the file of 4,000 files up into three separate ones because,
> > evidently, the file was too voluminous to be read alone in its entirety.
> > So, I divided the files up into three roughly similar folders. They are
> > called ?WPSCASES? one through three. Here is my code, with the error
> > messages for each command recorded below:
> >
> > token <-
> > tokenize("/Users/Gordon/Desktop/WPSCASESONE/",lang="en",doc_id="sample")
> >
> > The code is the same for the other folders; the name of the folder is
> > different, but otherwise identical.
> >
> > The error message reads:
> >
> > *Error in nchar(tagged.text[, "token"], type = "width") : invalid multibyte
> > string, element 348*
> >
> > The error messages are the same for the other two commands. But the
> > 'element' number is different. It's 925 for the second folder, and 4302 for
> > the third.
> >
> > token2 <-
> > tokenize("/Users/Gordon/Desktop/WPSCASES2/",lang="en",doc_id="sample")
> >
> > token3 <-
> > tokenize("/Users/Gordon/Desktop/WPSCASES3/",lang="en",doc_id="sample")
> >
> > These are the other commands if that's helpful.
> >
> > I?ve tried to discover whether the ?element? that the error message
> > mentions corresponds to the file of that number in the file?s order. But
> > since folder 3 does not have 4,300 files in it, I think that that was
> > unlikely. Please let me know if you can figure out how to fix this stuff so
> > that I can start to use ?koRpus? commands, like ?readability? and its
> > progeny.
> >
> > Thank you,
> > Gordon
> 
> Hi Gordon,
> Looks to me as though you may have to extract the text from the Word
> files. Export As Text.

Hi!  

quanteda::tokenizer says it needs a 
character vector or ?corpus? as input

	https://www.rdocumentation.org/packages/quanteda/versions/0.99.12/topics/tokenize

... or is this tokenize from the 
tokenizers package, I found something 
about ?doc_id? here:

	https://cran.r-project.org/web/packages/tokenizers/vignettes/introduction-to-tokenizers.html

You can convert docx to markdown using 
pandoc:

	pandoc --from docx --to markdown $inputfile

odt also works, and many others.  

I believe pandoc is included in RStudio.  
But I have never used it from there 
myself, so that is really bad advice I 
think.

To read doc, I use wvHtml:

	wvHtml $inputfile - 2> /dev/null | w3m -dump -T text/html

Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210107/7fd2204a/attachment.sig>

From zu|ut|me@net @end|ng |rom gm@||@com  Thu Jan  7 16:02:19 2021
From: zu|ut|me@net @end|ng |rom gm@||@com (Magnus Torfason)
Date: Thu, 7 Jan 2021 15:02:19 +0000
Subject: [R] New mask.ok option for libraries
Message-ID: <CAAwbYcy45=-PAQPD63u2Yj3aQCsLGSi6iMEBt7tvAWc+6c8J+g@mail.gmail.com>

I had sent the following to r-devel a while ago, but perhaps r-help is more
appropriate. I guess my question is what to do with this, would people
generally file an issue, or is there a way to hear if this is something
that makes sense to add ? whether more info would be helpful and so on?

=====
I was very happy to see the new mask.ok option. It works very well when
conflicts.policy is "strict":

---
options(conflicts.policy="strict")
library(igraph, exclude="decompose", mask.ok=c("spectrum","union"))
#> [No messages]
---

However, if no conflicts.policy has been set, the masked objects are loudly
reported, even if they are specified with mask.ok:

---
library(igraph, exclude="decompose", mask.ok=c("spectrum","union"))
#>
#> Attaching package: 'igraph'
#> The following object is masked from 'package:stats':
#>
#>     spectrum
#> The following object is masked from 'package:base':
#>
#>     union
---

It seems that if I specify mask.ok, that particular masking is expected and
should NOT be reported, regardless of what the conflicts.policy is. It
would be very useful for many users who are not ready to switch over to a
strict conflicts.policy, to nevertheless be able to suppress messages about
expected conflicts using mask.ok and thus only get messages when unexpected
masking occurs.
=====

Best,
Magnus

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan  7 18:43:30 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 7 Jan 2021 12:43:30 -0500
Subject: [R] New mask.ok option for libraries
In-Reply-To: <CAAwbYcy45=-PAQPD63u2Yj3aQCsLGSi6iMEBt7tvAWc+6c8J+g@mail.gmail.com>
References: <CAAwbYcy45=-PAQPD63u2Yj3aQCsLGSi6iMEBt7tvAWc+6c8J+g@mail.gmail.com>
Message-ID: <abfa5a01-0df4-83f7-3806-2ba544d69c93@gmail.com>

On 07/01/2021 10:02 a.m., Magnus Torfason wrote:
> I had sent the following to r-devel a while ago, but perhaps r-help is more
> appropriate.

No, this is definitely an R-devel topic.  You didn't get any replies 
there, but that doesn't mean you should post it again in the wrong place.

Duncan Murdoch

  I guess my question is what to do with this, would people
> generally file an issue, or is there a way to hear if this is something
> that makes sense to add ? whether more info would be helpful and so on?
> 
> =====
> I was very happy to see the new mask.ok option. It works very well when
> conflicts.policy is "strict":
> 
> ---
> options(conflicts.policy="strict")
> library(igraph, exclude="decompose", mask.ok=c("spectrum","union"))
> #> [No messages]
> ---
> 
> However, if no conflicts.policy has been set, the masked objects are loudly
> reported, even if they are specified with mask.ok:
> 
> ---
> library(igraph, exclude="decompose", mask.ok=c("spectrum","union"))
> #>
> #> Attaching package: 'igraph'
> #> The following object is masked from 'package:stats':
> #>
> #>     spectrum
> #> The following object is masked from 'package:base':
> #>
> #>     union
> ---
> 
> It seems that if I specify mask.ok, that particular masking is expected and
> should NOT be reported, regardless of what the conflicts.policy is. It
> would be very useful for many users who are not ready to switch over to a
> strict conflicts.policy, to nevertheless be able to suppress messages about
> expected conflicts using mask.ok and thus only get messages when unexpected
> masking occurs.
> =====
> 
> Best,
> Magnus
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ycd|ng @end|ng |rom coh@org  Thu Jan  7 19:39:41 2021
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Thu, 7 Jan 2021 18:39:41 +0000
Subject: [R] non-standard reshape from long to wide
Message-ID: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>

Dear R user,

I want to reshape a long data frame to wide format, I made the following example files.  Can you help me?

Thank you,

Yuan Chun Ding

sample <-c("xr" , "xr" , "fh" , "fh" , "fh" , "uy" , "uy" , "uy" , "uy");
marker <-c("x" , "y" , "g" , "x" , "k" , "y" , "x" , "u" , "j");
df.long <-data.frame(sample, marker);
           
xr <-c(1,1,NA,NA,NA,NA);
fh <-c(1,NA,1,1,NA,NA);
uy <-c(1,1,NA,NA,1,1);

df.wide <- t(data.frame(xr,fh,uy));
colnames(df.wide)<-c("x","y","g","k", "u","j");

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jan  7 19:51:38 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 7 Jan 2021 10:51:38 -0800
Subject: [R] non-standard reshape from long to wide
In-Reply-To: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
References: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
Message-ID: <CAGxFJbS4SRhY5CsRdRzf2_sL9CFe1QwxmRLFbFf7f6=PQsPx-Q@mail.gmail.com>

Is this homework? There is a no-homework policy on this list.

If not, note that you are usually asked to show what you tried and the
error messages you received.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jan 7, 2021 at 10:40 AM Yuan Chun Ding <ycding at coh.org> wrote:

> Dear R user,
>
> I want to reshape a long data frame to wide format, I made the following
> example files.  Can you help me?
>
> Thank you,
>
> Yuan Chun Ding
>
> sample <-c("xr" , "xr" , "fh" , "fh" , "fh" , "uy" , "uy" , "uy" , "uy");
> marker <-c("x" , "y" , "g" , "x" , "k" , "y" , "x" , "u" , "j");
> df.long <-data.frame(sample, marker);
>
> xr <-c(1,1,NA,NA,NA,NA);
> fh <-c(1,NA,1,1,NA,NA);
> uy <-c(1,1,NA,NA,1,1);
>
> df.wide <- t(data.frame(xr,fh,uy));
> colnames(df.wide)<-c("x","y","g","k", "u","j");
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or
> entity to which they are addressed. This communication may contain
> information that is privileged, confidential, or exempt from disclosure
> under applicable law (e.g., personal health information, research data,
> financial information). Because this e-mail has been sent without
> encryption, individuals other than the intended recipient may be able to
> view the information, forward it to others or tamper with the information
> without the knowledge or consent of the sender. If you are not the intended
> recipient, or the employee or person responsible for delivering the message
> to the intended recipient, any dissemination, distribution or copying of
> the communication is strictly prohibited. If you received the communication
> in error, please notify the sender immediately by replying to this message
> and deleting the message and any accompanying files from your system. If,
> due to the security risks, you do not wish to receive further
> communications via e-mail, please reply to this message and inform the
> sender that you do not wish to receive further e-mail from the sender.
> (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Thu Jan  7 20:09:50 2021
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Thu, 7 Jan 2021 19:09:50 +0000
Subject: [R] non-standard reshape from long to wide
In-Reply-To: <CAGxFJbS4SRhY5CsRdRzf2_sL9CFe1QwxmRLFbFf7f6=PQsPx-Q@mail.gmail.com>
References: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
 <CAGxFJbS4SRhY5CsRdRzf2_sL9CFe1QwxmRLFbFf7f6=PQsPx-Q@mail.gmail.com>
Message-ID: <SJ0PR02MB7645D88444EE45A9C7935B36D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>

Hi Bert,

No, this Is not home work related.  Original data have 87352 rows. I used the standard reshape function and got warning message. So I reformatted the wide format to meet my research purpose.

mut2 <-mut[,c("Tumor_Sample_Barcode","mut.id", "Hugo_Symbol")]
mut2 <-mut2[order(mut2$Hugo_Symbol),]
mut3 <-mut2[!duplicated(mut2),]
mut4 <-reshape(mut3, idvar = "Hugo_Symbol", timevar = "Tumor_Sample_Barcode", direction = "wide")

There were 50 or more warnings (use warnings() to see the first 50)
> View(mut4)
> warnings()
Warning messages:
1: In reshapeWide(data, idvar = idvar, timevar = timevar,  ... :
  multiple rows match for Tumor_Sample_Barcode=TCGA-A8-A09Z-01A-11W-A019-09: first taken
2: In reshapeWide(data, idvar = idvar, timevar = timevar,  ... :
From: Bert Gunter [mailto:bgunter.4567 at gmail.com]
Sent: Thursday, January 7, 2021 10:52 AM
To: Yuan Chun Ding <ycding at coh.org>
Cc: r-help at r-project.org
Subject: Re: [R] non-standard reshape from long to wide

Is this homework? There is a no-homework policy on this list.

If not, note that you are usually asked to show what you tried and the error messages you received.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jan 7, 2021 at 10:40 AM Yuan Chun Ding <ycding at coh.org<mailto:ycding at coh.org>> wrote:
Dear R user,

I want to reshape a long data frame to wide format, I made the following example files.  Can you help me?

Thank you,

Yuan Chun Ding

sample <-c("xr" , "xr" , "fh" , "fh" , "fh" , "uy" , "uy" , "uy" , "uy");
marker <-c("x" , "y" , "g" , "x" , "k" , "y" , "x" , "u" , "j");
df.long <-data.frame(sample, marker);

xr <-c(1,1,NA,NA,NA,NA);
fh <-c(1,NA,1,1,NA,NA);
uy <-c(1,1,NA,NA,1,1);

df.wide <- t(data.frame(xr,fh,uy));
colnames(df.wide)<-c("x","y","g","k", "u","j");

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!8Xh6f5YkEhmPfDyrfZAdBKkVH3I-iNCUoXNhMSZyF6JgRliIYBMD4tWItfuZ$>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://urldefense.com/v3/__http:/www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!8Xh6f5YkEhmPfDyrfZAdBKkVH3I-iNCUoXNhMSZyF6JgRliIYBMD4qvlyPfu$>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jan  7 20:17:43 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 7 Jan 2021 11:17:43 -0800
Subject: [R] non-standard reshape from long to wide
In-Reply-To: <SJ0PR02MB7645D88444EE45A9C7935B36D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
References: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
 <CAGxFJbS4SRhY5CsRdRzf2_sL9CFe1QwxmRLFbFf7f6=PQsPx-Q@mail.gmail.com>
 <SJ0PR02MB7645D88444EE45A9C7935B36D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
Message-ID: <CAGxFJbQPeqxk2AToGmVJHu_pcgJJBhKfiyYT5ZiETWTcEvTEGA@mail.gmail.com>

Show us your attempt on your example data. Also note that warnings are
*not* errors, though they typically do indicate problems.

-- Bert

On Thu, Jan 7, 2021 at 11:09 AM Yuan Chun Ding <ycding at coh.org> wrote:

> Hi Bert,
>
>
>
> No, this Is not home work related.  Original data have 87352 rows. I used
> the standard reshape function and got warning message. So I reformatted the
> wide format to meet my research purpose.
>
>
>
> mut2 <-mut[,c("Tumor_Sample_Barcode","mut.id", "Hugo_Symbol")]
>
> mut2 <-mut2[order(mut2$Hugo_Symbol),]
>
> mut3 <-mut2[!duplicated(mut2),]
>
> mut4 <-reshape(mut3, idvar = "Hugo_Symbol", timevar =
> "Tumor_Sample_Barcode", direction = "wide")
>
>
>
> There were 50 or more warnings (use warnings() to see the first 50)
>
> > View(mut4)
>
> > warnings()
>
> Warning messages:
>
> 1: In reshapeWide(data, idvar = idvar, timevar = timevar,  ... :
>
>   multiple rows match for
> Tumor_Sample_Barcode=TCGA-A8-A09Z-01A-11W-A019-09: first taken
>
> 2: In reshapeWide(data, idvar = idvar, timevar = timevar,  ... :
>
> *From:* Bert Gunter [mailto:bgunter.4567 at gmail.com]
> *Sent:* Thursday, January 7, 2021 10:52 AM
> *To:* Yuan Chun Ding <ycding at coh.org>
> *Cc:* r-help at r-project.org
> *Subject:* Re: [R] non-standard reshape from long to wide
>
>
>
> Is this homework? There is a no-homework policy on this list.
>
>
>
> If not, note that you are usually asked to show what you tried and the
> error messages you received.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>
>
>
> On Thu, Jan 7, 2021 at 10:40 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Dear R user,
>
> I want to reshape a long data frame to wide format, I made the following
> example files.  Can you help me?
>
> Thank you,
>
> Yuan Chun Ding
>
> sample <-c("xr" , "xr" , "fh" , "fh" , "fh" , "uy" , "uy" , "uy" , "uy");
> marker <-c("x" , "y" , "g" , "x" , "k" , "y" , "x" , "u" , "j");
> df.long <-data.frame(sample, marker);
>
> xr <-c(1,1,NA,NA,NA,NA);
> fh <-c(1,NA,1,1,NA,NA);
> uy <-c(1,1,NA,NA,1,1);
>
> df.wide <- t(data.frame(xr,fh,uy));
> colnames(df.wide)<-c("x","y","g","k", "u","j");
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or
> entity to which they are addressed. This communication may contain
> information that is privileged, confidential, or exempt from disclosure
> under applicable law (e.g., personal health information, research data,
> financial information). Because this e-mail has been sent without
> encryption, individuals other than the intended recipient may be able to
> view the information, forward it to others or tamper with the information
> without the knowledge or consent of the sender. If you are not the intended
> recipient, or the employee or person responsible for delivering the message
> to the intended recipient, any dissemination, distribution or copying of
> the communication is strictly prohibited. If you received the communication
> in error, please notify the sender immediately by replying to this message
> and deleting the message and any accompanying files from your system. If,
> due to the security risks, you do not wish to receive further
> communications via e-mail, please reply to this message and inform the
> sender that you do not wish to receive further e-mail from the sender.
> (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> <https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!8Xh6f5YkEhmPfDyrfZAdBKkVH3I-iNCUoXNhMSZyF6JgRliIYBMD4tWItfuZ$>
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> <https://urldefense.com/v3/__http:/www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!8Xh6f5YkEhmPfDyrfZAdBKkVH3I-iNCUoXNhMSZyF6JgRliIYBMD4qvlyPfu$>
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From jerem|eju@te @end|ng |rom gm@||@com  Thu Jan  7 20:18:36 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Thu, 07 Jan 2021 20:18:36 +0100
Subject: [R] seq.Date when date is the last date of the month
Message-ID: <877dooh7xv.fsf@gmail.com>

Hello,

I recently bumped into a behavior that surprised me.
When performing the following command, I would expect the second
argument to be "2012-09-30" but got "2012-10-01" instead
> seq(as.Date("2012-08-31"),by="1 month",length=2)
[1] "2012-08-31" "2012-10-01"

When the same command is performed for the start of the month. I get a
result I expect.
> seq(as.Date("2012-08-01"),by="1 month",length=2)
[1] "2012-08-01"


Is there an explanation for this behavior?

Best regards,
-- 
Jeremie Juste


From jho|tm@n @end|ng |rom gm@||@com  Thu Jan  7 20:40:50 2021
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Thu, 7 Jan 2021 11:40:50 -0800
Subject: [R] seq.Date when date is the last date of the month
In-Reply-To: <877dooh7xv.fsf@gmail.com>
References: <877dooh7xv.fsf@gmail.com>
Message-ID: <CAAxdm-47Z5f-wVgXyotj3cxr4VTo3ptmF9yRPY7aGGLCpgp4iw@mail.gmail.com>

yes it is the expected behaviour is you check the documentation:

Using "month" first advances the month without changing the day: if
this results in an invalid day of the month, it is counted forward
into the next month: see the examples.

Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.


Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.


On Thu, Jan 7, 2021 at 11:20 AM Jeremie Juste <jeremiejuste at gmail.com> wrote:
>
> Hello,
>
> I recently bumped into a behavior that surprised me.
> When performing the following command, I would expect the second
> argument to be "2012-09-30" but got "2012-10-01" instead
> > seq(as.Date("2012-08-31"),by="1 month",length=2)
> [1] "2012-08-31" "2012-10-01"
>
> When the same command is performed for the start of the month. I get a
> result I expect.
> > seq(as.Date("2012-08-01"),by="1 month",length=2)
> [1] "2012-08-01"
>
>
> Is there an explanation for this behavior?
>
> Best regards,
> --
> Jeremie Juste
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From edd @end|ng |rom deb|@n@org  Thu Jan  7 20:59:42 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 7 Jan 2021 13:59:42 -0600
Subject: [R] seq.Date when date is the last date of the month
In-Reply-To: <877dooh7xv.fsf@gmail.com>
References: <877dooh7xv.fsf@gmail.com>
Message-ID: <24567.26670.290005.444615@rob.eddelbuettel.com>


Jeremie,

As months have irregular number of dates, one needs to use a function that
accounts for that (date libraries and packages have that, one of the earliest
for R was my RcppBDT package using Boost Date_Time), or be otherwise clever.

Here is a one-liner using the latter approach:

   seq(as.Date("2010-02-01"), length=24, by="1 month") - 1

See this old StackOverflow answer where I used this before:

   https://stackoverflow.com/questions/8333838/generate-a-sequence-of-the-last-day-of-the-month-over-two-years

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Thu Jan  7 21:07:26 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Thu, 7 Jan 2021 20:07:26 +0000 (UTC)
Subject: [R] AIC for robust GAM ?
In-Reply-To: <CAGxFJbQ9YkFW7RA3n2JeP5OXf1mGsa7v234Ld6_7UPZsmp_v=w@mail.gmail.com>
References: <1126246033.11932597.1609964219484.ref@mail.yahoo.com>
 <1126246033.11932597.1609964219484@mail.yahoo.com>
 <CAGxFJbQ9YkFW7RA3n2JeP5OXf1mGsa7v234Ld6_7UPZsmp_v=w@mail.gmail.com>
Message-ID: <162996110.710699.1610050046509@mail.yahoo.com>

Hi Bert,

Many thanks for your response.

Best,


Le mercredi 6 janvier 2021 ? 21:47:14 UTC+1, Bert Gunter <bgunter.4567 at gmail.com> a ?crit : 





Per the posting guide linked below:

"If the question relates to a contributed package , e.g., one downloaded from CRAN, try contacting the package maintainer first. You can also use find("functionname") and packageDescription("packagename") to find this information. Only send such questions to R-help or R-devel if you get no reply or need further assistance. This applies to both requests for help and to bug reports."

So I believe that you should try to contact the maintainer for your question first. You may get lucky here, of course, but your query seems rather too technical to expect a useful response on R-Help.

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jan 6, 2021 at 12:17 PM varin sacha via R-help <r-help at r-project.org> wrote:
> Dear R-Experts,
> 
> Here below my reproducible R code.
> How can I get the AIC of my model (robust GAM) ?
> 
> Best Regards,
> 
> 
> y<-c(499,491,500,517,438,495,501,525,516,494,500,453,479,481,505,465,477,520,520,480,477,416,502,503,497,513,492,469,504,482,502,498,463,504,495)
> x<-c(499,496,424,537,480,484,503,575,540,436,486,506,496,481,508,425,501,519,546,507,452,498,471,495,499,522,509,474,502,534,504,466,527,485,525)
> library(robustgam)
> true.family <- poisson()
> fit=robustgam(x,y,sp=0,family=true.family,smooth.basis='ps',K=3)
> AIC(fit)
> 
> ?
> 
> ?
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Jan  7 21:19:11 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 7 Jan 2021 20:19:11 +0000
Subject: [R] non-standard reshape from long to wide
In-Reply-To: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
References: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
Message-ID: <a1e99f54-a815-026f-72bd-436f10a9e12d@sapo.pt>

Hello,

Here is a dplyr solution. The main trick is to create a column of 1's, 
then pipe to pivot_wider.


library(dplyr)
library(tidyr)

df.long %>%
   mutate(values = 1) %>%
   pivot_wider(
     id_cols = sample,
     names_from = marker,
     values_from = values,
     values_fill = NA
   )


Note: your df.wide is not a data.frame, the transpose coerces it to 
matrix. In this case it doesn't matter because it was just an example of 
expected output but in other, real use cases you must be careful.

df.wide <- as.data.frame(df.wide)

would solve it.


Hope this helps,

Rui Barradas

?s 18:39 de 07/01/21, Yuan Chun Ding escreveu:
> Dear R user,
> 
> I want to reshape a long data frame to wide format, I made the following example files.  Can you help me?
> 
> Thank you,
> 
> Yuan Chun Ding
> 
> sample <-c("xr" , "xr" , "fh" , "fh" , "fh" , "uy" , "uy" , "uy" , "uy");
> marker <-c("x" , "y" , "g" , "x" , "k" , "y" , "x" , "u" , "j");
> df.long <-data.frame(sample, marker);
>             
> xr <-c(1,1,NA,NA,NA,NA);
> fh <-c(1,NA,1,1,NA,NA);
> uy <-c(1,1,NA,NA,1,1);
> 
> df.wide <- t(data.frame(xr,fh,uy));
> colnames(df.wide)<-c("x","y","g","k", "u","j");
> 
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
> 
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

From ycd|ng @end|ng |rom coh@org  Thu Jan  7 21:40:18 2021
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Thu, 7 Jan 2021 20:40:18 +0000
Subject: [R] non-standard reshape from long to wide
In-Reply-To: <a1e99f54-a815-026f-72bd-436f10a9e12d@sapo.pt>
References: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
 <a1e99f54-a815-026f-72bd-436f10a9e12d@sapo.pt>
Message-ID: <SJ0PR02MB7645B271672144F6C89585FAD4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>

Hi Rui,

Thank you so much!!   You code works well and I am looking into the pivot_wider function.

Yuan Ding

-----Original Message-----
From: Rui Barradas [mailto:ruipbarradas at sapo.pt] 
Sent: Thursday, January 7, 2021 12:19 PM
To: Yuan Chun Ding <ycding at coh.org>; r-help at r-project.org
Subject: Re: [R] non-standard reshape from long to wide

Hello,

Here is a dplyr solution. The main trick is to create a column of 1's, then pipe to pivot_wider.


library(dplyr)
library(tidyr)

df.long %>%
   mutate(values = 1) %>%
   pivot_wider(
     id_cols = sample,
     names_from = marker,
     values_from = values,
     values_fill = NA
   )


Note: your df.wide is not a data.frame, the transpose coerces it to 
matrix. In this case it doesn't matter because it was just an example of 
expected output but in other, real use cases you must be careful.

df.wide <- as.data.frame(df.wide)

would solve it.


Hope this helps,

Rui Barradas

?s 18:39 de 07/01/21, Yuan Chun Ding escreveu:
> Dear R user,
> 
> I want to reshape a long data frame to wide format, I made the following example files.  Can you help me?
> 
> Thank you,
> 
> Yuan Chun Ding
> 
> sample <-c("xr" , "xr" , "fh" , "fh" , "fh" , "uy" , "uy" , "uy" , "uy");
> marker <-c("x" , "y" , "g" , "x" , "k" , "y" , "x" , "u" , "j");
> df.long <-data.frame(sample, marker);
>             
> xr <-c(1,1,NA,NA,NA,NA);
> fh <-c(1,NA,1,1,NA,NA);
> uy <-c(1,1,NA,NA,1,1);
> 
> df.wide <- t(data.frame(xr,fh,uy));
> colnames(df.wide)<-c("x","y","g","k", "u","j");
> 
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
> 
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9ccbhtYzBJoahdschhouzo2kkluOs-EdoH8jn32fv9E22xaJ4GzfrI0bOvVl$ 
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9ccbhtYzBJoahdschhouzo2kkluOs-EdoH8jn32fv9E22xaJ4GzfrKjC2095$ 
> and provide commented, minimal, self-contained, reproducible code.
> 

From jerem|eju@te @end|ng |rom gm@||@com  Thu Jan  7 21:59:23 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Thu, 07 Jan 2021 21:59:23 +0100
Subject: [R] seq.Date when date is the last date of the month
In-Reply-To: <CAAxdm-47Z5f-wVgXyotj3cxr4VTo3ptmF9yRPY7aGGLCpgp4iw@mail.gmail.com>
 (jim holtman's message of "Thu, 7 Jan 2021 11:40:50 -0800")
References: <877dooh7xv.fsf@gmail.com>
 <CAAxdm-47Z5f-wVgXyotj3cxr4VTo3ptmF9yRPY7aGGLCpgp4iw@mail.gmail.com>
Message-ID: <87zh1kfopg.fsf@gmail.com>


Hello Jim,

Many thanks for the feedback

> Using "month" first advances the month without changing the day: if
> this results in an invalid day of the month, it is counted forward
> into the next month: see the examples.
Indeed I missed the documentation of seq.Date that refers to
seq.POSIXt. Many thanks for pointing this out.

Still I would be tempted to count back the day into the same month
instead of counting forward. But this behavior seems intentional and
documented so no need to question it. 

> What is the problem that you are trying to solve?
> Tell me what you want to do, not how you want to do it.
The problem I'm trying to solve is this.

for a date d and an integer m
add.month(d,m)

would

Using "month" first advance the month without changing the day: if
this results in an invalid day of the month, it is counted backward
into the same month.

so nearly the same behavior as seq.Date except
add.month("2020-08-31",1) ==> 2020-09-30
add.month("2020-08-01",1) ==> 2020-09-01


Best regards,
Jeremie


From jerem|eju@te @end|ng |rom gm@||@com  Thu Jan  7 22:13:03 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Thu, 07 Jan 2021 22:13:03 +0100
Subject: [R] seq.Date when date is the last date of the month
In-Reply-To: <24567.26670.290005.444615@rob.eddelbuettel.com> (Dirk
 Eddelbuettel's message of "Thu, 7 Jan 2021 13:59:42 -0600")
References: <877dooh7xv.fsf@gmail.com>
 <24567.26670.290005.444615@rob.eddelbuettel.com>
Message-ID: <87v9c8fo2o.fsf@gmail.com>

Hello Dirk,

Many thanks for the feedback. I did came across your SO answer but
didn't know the RcppBDT package, thanks for pointing that out.

Best regards,
Jeremie

On Thursday,  7 Jan 2021 at 13:59, Dirk Eddelbuettel wrote:
> Jeremie,
>
> As months have irregular number of dates, one needs to use a function that
> accounts for that (date libraries and packages have that, one of the earliest
> for R was my RcppBDT package using Boost Date_Time), or be otherwise clever.
>
> Here is a one-liner using the latter approach:
>
>    seq(as.Date("2010-02-01"), length=24, by="1 month") - 1
>
> See this old StackOverflow answer where I used this before:
>
>    https://stackoverflow.com/questions/8333838/generate-a-sequence-of-the-last-day-of-the-month-over-two-years
>
> Dirk

-- 
Jeremie Juste


From m@rn@@w@g|ey @end|ng |rom gm@||@com  Fri Jan  8 02:01:36 2021
From: m@rn@@w@g|ey @end|ng |rom gm@||@com (Marna Wagley)
Date: Thu, 7 Jan 2021 17:01:36 -0800
Subject: [R] Secondary y axis in ggplot2: did not respond when change its
 y-axis value
Message-ID: <CAMwU6B3NtSDnBQ+1cZZDqZ_t18u0faW3jyEmY2YUwqPnaODLgA@mail.gmail.com>

Hi R users,
I was trying to plot a graph with a secondary axis, and used the following
code for the data but the secondary line and secondary y -axis value did
not match. I would like to show both lines in one graph.

Any suggestions?

library(ggplot2)
library(reshape2)
daT<-structure(list(x = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L,
3L, 4L, 5L, 6L, 7L, 8L), y1 = c(9754L, 1051L, 5833L, 5769L, 2479L,
470L, 5828L, 174L, 2045L, 6099L, 8780L, 8732L, 4053L, 9419L,
4728L, 3587L), y2 = c(0.51, 0.61, 0.3, 0.81, 0.89, 0, 1.9, 0.76,
0.87, 0.29, 0, 0.42, 0.73, 0.96, 0.62, 0.06), group = c("A",
"A", "A", "A", "A", "A", "A", "A", "B", "B", "B", "B", "B", "B",
"B", "B")), class = "data.frame", row.names = c(NA, -16L))
print(daT)
daT1<-melt(daT, id.vars=c("x", "group"))
daT1%>%
  ggplot() +
  geom_line(aes(x = x, y = value, group = variable, color = variable)) +
  facet_wrap(~group) +
  scale_y_continuous(sec.axis = sec_axis(~ .*0.0001))

	[[alternative HTML version deleted]]


From gregco@t@ @end|ng |rom me@com  Fri Jan  8 07:54:42 2021
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Fri, 8 Jan 2021 01:54:42 -0500
Subject: [R] Expected min height of view
In-Reply-To: <CAMwU6B3NtSDnBQ+1cZZDqZ_t18u0faW3jyEmY2YUwqPnaODLgA@mail.gmail.com>
References: <CAMwU6B3NtSDnBQ+1cZZDqZ_t18u0faW3jyEmY2YUwqPnaODLgA@mail.gmail.com>
Message-ID: <AB88D6DB-3F2A-44A7-8F97-A893198862A0@me.com>

I upgraded from R 4.0.2 to R 4.0.3 for Apple Mac at Duke University. Now, the only output I get from R 4.0.3 is an error message. Greg Coats
2021-01-07 22:58:42.997 R[8311:37566] Warning: Expected min height of view: (<NSPopoverTouchBarItemButton: 0x7fcb6c592570>) to be less than or equal to 30 but got a height of 32.000000. This error will be logged once per view in violation.
> version
               _                           
platform       x86_64-apple-darwin17.0     
arch           x86_64                      
os             darwin17.0                  
system         x86_64, darwin17.0          
status                                     
major          4                           
minor          0.3                         
year           2020                        
month          10                          
day            10                          
svn rev        79318                       
language       R                           
version.string R version 4.0.3 (2020-10-10)
nickname       Bunny-Wunnies Freak Out     
> 
	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Jan  8 10:57:38 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 8 Jan 2021 09:57:38 +0000
Subject: [R] non-standard reshape from long to wide
In-Reply-To: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
References: <SJ0PR02MB7645BBDCF04B9BA76C554317D4AF0@SJ0PR02MB7645.namprd02.prod.outlook.com>
Message-ID: <8c2d348b2ee845c28cec15fc8b74f305@SRVEXCHCM1302.precheza.cz>

Hi

dcast from reshape is close, however column order is different

mydf <- dcast(df.long, sample~marker)
(!is.na(mydf[,-1]))*1
     g j k u x y
[1,] 1 0 1 0 1 0
[2,] 0 1 0 1 1 1
[3,] 0 0 0 0 1 1

You just need to change 0 to NA and add rownames from mydf.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Yuan Chun Ding
> Sent: Thursday, January 7, 2021 7:40 PM
> To: r-help at r-project.org
> Subject: [R] non-standard reshape from long to wide
> 
> Dear R user,
> 
> I want to reshape a long data frame to wide format, I made the following
> example files.  Can you help me?
> 
> Thank you,
> 
> Yuan Chun Ding
> 
> sample <-c("xr" , "xr" , "fh" , "fh" , "fh" , "uy" , "uy" , "uy" , "uy");
marker <-
> c("x" , "y" , "g" , "x" , "k" , "y" , "x" , "u" , "j"); df.long
<-data.frame(sample,
> marker);
> 
> xr <-c(1,1,NA,NA,NA,NA);
> fh <-c(1,NA,1,1,NA,NA);
> uy <-c(1,1,NA,NA,1,1);
> 
> df.wide <- t(data.frame(xr,fh,uy));
> colnames(df.wide)<-c("x","y","g","k", "u","j");
> 
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
> 
> This message and any attachments are intended solely for the individual or
> entity to which they are addressed. This communication may contain
> information that is privileged, confidential, or exempt from disclosure
under
> applicable law (e.g., personal health information, research data,
financial
> information). Because this e-mail has been sent without encryption,
> individuals other than the intended recipient may be able to view the
> information, forward it to others or tamper with the information without
the
> knowledge or consent of the sender. If you are not the intended recipient,
or
> the employee or person responsible for delivering the message to the
> intended recipient, any dissemination, distribution or copying of the
> communication is strictly prohibited. If you received the communication in
> error, please notify the sender immediately by replying to this message
and
> deleting the message and any accompanying files from your system. If, due
> to the security risks, you do not wish to receive further communications
via
> e-mail, please reply to this message and inform the sender that you do not
> wish to receive further e-mail from the sender. (LCP301)
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jan  8 15:58:27 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 8 Jan 2021 14:58:27 +0000
Subject: [R] 
 Secondary y axis in ggplot2: did not respond when change its
 y-axis value
In-Reply-To: <CAMwU6B3NtSDnBQ+1cZZDqZ_t18u0faW3jyEmY2YUwqPnaODLgA@mail.gmail.com>
References: <CAMwU6B3NtSDnBQ+1cZZDqZ_t18u0faW3jyEmY2YUwqPnaODLgA@mail.gmail.com>
Message-ID: <729e927c-50a7-fd4b-c5fc-443a3f896aff@sapo.pt>

Hello,

What about the following?
First get the min and max of value by variable == "y1".
Then use that range to scale up "y2".

rng <- tapply(daT1$value, daT1$variable, range)$y1

ggplot(data = daT1, aes(x = x, group = variable, color = variable)) +
   geom_line(data = subset(daT1, variable == "y1"),
             aes(y = value)) +
   geom_line(data = subset(daT1, variable == "y2"),
             aes(y = value*diff(rng) + rng[1])) +
   facet_wrap(~group) +
   scale_y_continuous(sec.axis = sec_axis(~ .*0.0001))


Hope this helps,

Rui Barradas

?s 01:01 de 08/01/21, Marna Wagley escreveu:
> Hi R users,
> I was trying to plot a graph with a secondary axis, and used the following
> code for the data but the secondary line and secondary y -axis value did
> not match. I would like to show both lines in one graph.
> 
> Any suggestions?
> 
> library(ggplot2)
> library(reshape2)
> daT<-structure(list(x = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L,
> 3L, 4L, 5L, 6L, 7L, 8L), y1 = c(9754L, 1051L, 5833L, 5769L, 2479L,
> 470L, 5828L, 174L, 2045L, 6099L, 8780L, 8732L, 4053L, 9419L,
> 4728L, 3587L), y2 = c(0.51, 0.61, 0.3, 0.81, 0.89, 0, 1.9, 0.76,
> 0.87, 0.29, 0, 0.42, 0.73, 0.96, 0.62, 0.06), group = c("A",
> "A", "A", "A", "A", "A", "A", "A", "B", "B", "B", "B", "B", "B",
> "B", "B")), class = "data.frame", row.names = c(NA, -16L))
> print(daT)
> daT1<-melt(daT, id.vars=c("x", "group"))
> daT1%>%
>    ggplot() +
>    geom_line(aes(x = x, y = value, group = variable, color = variable)) +
>    facet_wrap(~group) +
>    scale_y_continuous(sec.axis = sec_axis(~ .*0.0001))
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@rn@@w@g|ey @end|ng |rom gm@||@com  Fri Jan  8 16:55:04 2021
From: m@rn@@w@g|ey @end|ng |rom gm@||@com (Marna Wagley)
Date: Fri, 8 Jan 2021 07:55:04 -0800
Subject: [R] 
 Secondary y axis in ggplot2: did not respond when change its
 y-axis value
In-Reply-To: <729e927c-50a7-fd4b-c5fc-443a3f896aff@sapo.pt>
References: <CAMwU6B3NtSDnBQ+1cZZDqZ_t18u0faW3jyEmY2YUwqPnaODLgA@mail.gmail.com>
 <729e927c-50a7-fd4b-c5fc-443a3f896aff@sapo.pt>
Message-ID: <CAMwU6B09Ut73Uu32J1c8ve1nRbt=0CCBxCJZV_3Y4yKR5ekQ+w@mail.gmail.com>

Thank you Rui and Thierry for the suggestion, it helped me.
thanks


On Fri, Jan 8, 2021 at 6:58 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> What about the following?
> First get the min and max of value by variable == "y1".
> Then use that range to scale up "y2".
>
> rng <- tapply(daT1$value, daT1$variable, range)$y1
>
> ggplot(data = daT1, aes(x = x, group = variable, color = variable)) +
>    geom_line(data = subset(daT1, variable == "y1"),
>              aes(y = value)) +
>    geom_line(data = subset(daT1, variable == "y2"),
>              aes(y = value*diff(rng) + rng[1])) +
>    facet_wrap(~group) +
>    scale_y_continuous(sec.axis = sec_axis(~ .*0.0001))
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 01:01 de 08/01/21, Marna Wagley escreveu:
> > Hi R users,
> > I was trying to plot a graph with a secondary axis, and used the
> following
> > code for the data but the secondary line and secondary y -axis value did
> > not match. I would like to show both lines in one graph.
> >
> > Any suggestions?
> >
> > library(ggplot2)
> > library(reshape2)
> > daT<-structure(list(x = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L,
> > 3L, 4L, 5L, 6L, 7L, 8L), y1 = c(9754L, 1051L, 5833L, 5769L, 2479L,
> > 470L, 5828L, 174L, 2045L, 6099L, 8780L, 8732L, 4053L, 9419L,
> > 4728L, 3587L), y2 = c(0.51, 0.61, 0.3, 0.81, 0.89, 0, 1.9, 0.76,
> > 0.87, 0.29, 0, 0.42, 0.73, 0.96, 0.62, 0.06), group = c("A",
> > "A", "A", "A", "A", "A", "A", "A", "B", "B", "B", "B", "B", "B",
> > "B", "B")), class = "data.frame", row.names = c(NA, -16L))
> > print(daT)
> > daT1<-melt(daT, id.vars=c("x", "group"))
> > daT1%>%
> >    ggplot() +
> >    geom_line(aes(x = x, y = value, group = variable, color = variable)) +
> >    facet_wrap(~group) +
> >    scale_y_continuous(sec.axis = sec_axis(~ .*0.0001))
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From zyr@em@dhe @end|ng |rom gm@||@com  Fri Jan  8 15:43:34 2021
From: zyr@em@dhe @end|ng |rom gm@||@com (zyra e madhe)
Date: Fri, 8 Jan 2021 15:43:34 +0100
Subject: [R] HW help
Message-ID: <CAJWAM5KbAv1Ko7KyFJ3nrs8vjgtobZ75B0H3ktt6BkWmNUu_7w@mail.gmail.com>

Hello,

I'm having difficulty doing the following exercise.
Can you please provide the code and some written explanation?

Thank you in advance,

Zyra

-------------- next part --------------
A non-text attachment was scrubbed...
Name: php6hX1Pn.png
Type: image/png
Size: 38530 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210108/fb34f2a5/attachment.png>

From jrg @end|ng |rom |oe@|@u@  Fri Jan  8 22:31:24 2021
From: jrg @end|ng |rom |oe@|@u@ (JRG)
Date: Fri, 8 Jan 2021 16:31:24 -0500
Subject: [R] HW help
In-Reply-To: <CAJWAM5KbAv1Ko7KyFJ3nrs8vjgtobZ75B0H3ktt6BkWmNUu_7w@mail.gmail.com>
References: <CAJWAM5KbAv1Ko7KyFJ3nrs8vjgtobZ75B0H3ktt6BkWmNUu_7w@mail.gmail.com>
Message-ID: <67368d1c-37f1-8c1a-eb44-ffa4381c62f1@loesl.us>

This list has a no-homework policy.

---JRG




On 2021-01-08 09:43, zyra e madhe wrote:
> Hello,
> 
> I'm having difficulty doing the following exercise.
> Can you please provide the code and some written explanation?
> 
> Thank you in advance,
> 
> Zyra
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ycd|ng @end|ng |rom coh@org  Fri Jan  8 23:33:13 2021
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Fri, 8 Jan 2021 22:33:13 +0000
Subject: [R] replace zero in a matrix using random numbers
Message-ID: <SJ0PR02MB7645CBA0B184021E32C45447D4AE0@SJ0PR02MB7645.namprd02.prod.outlook.com>

Hi R users,

I am analyzing miRNA sequence data for a special network analysis, I need to replace zero values in a matrix as random numbers with mean of 1 and standard deviation of 0.1.

er.miRCounts[er.miRCounts==0] <- rnorm(1,mean=1, sd=0.1);

this code made all zero values as 1.13, not random numbers across different zero values.  If all zero values in one row are replaced by the same 1.13,  then sd in that row is zero, causing other problem in the following calculation.

Can you help me?

Thank you,

Yuan chun Ding

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jan  8 23:44:53 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 8 Jan 2021 22:44:53 +0000
Subject: [R] replace zero in a matrix using random numbers
In-Reply-To: <SJ0PR02MB7645CBA0B184021E32C45447D4AE0@SJ0PR02MB7645.namprd02.prod.outlook.com>
References: <SJ0PR02MB7645CBA0B184021E32C45447D4AE0@SJ0PR02MB7645.namprd02.prod.outlook.com>
Message-ID: <c80a4ac9-585e-74cc-0f1e-d43dc151c0b0@sapo.pt>

Hello,

Try to get the number of zero values before:

i <- er.miRCounts == 0
n <- sum(i)
er.miRCounts[i] <- rnorm(n,mean=1, sd=0.1)


Also, there is no need for a end-of-instruction ';'.
The semi-colon is the instruction separator, so if you put it at the end 
you will be separating the instruction you wrote from the NULL 
instruction. A simpler example could be

mean(1:5);

This is *two* instructions:

mean(1:5); NULL


Hope this helps,

Rui Barradas

?s 22:33 de 08/01/21, Yuan Chun Ding escreveu:
> Hi R users,
> 
> I am analyzing miRNA sequence data for a special network analysis, I need to replace zero values in a matrix as random numbers with mean of 1 and standard deviation of 0.1.
> 
> er.miRCounts[er.miRCounts==0] <- rnorm(1,mean=1, sd=0.1);
> 
> this code made all zero values as 1.13, not random numbers across different zero values.  If all zero values in one row are replaced by the same 1.13,  then sd in that row is zero, causing other problem in the following calculation.
> 
> Can you help me?
> 
> Thank you,
> 
> Yuan chun Ding
> 
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
> 
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

From bgunter@4567 @end|ng |rom gm@||@com  Fri Jan  8 23:49:12 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 8 Jan 2021 14:49:12 -0800
Subject: [R] replace zero in a matrix using random numbers
In-Reply-To: <SJ0PR02MB7645CBA0B184021E32C45447D4AE0@SJ0PR02MB7645.namprd02.prod.outlook.com>
References: <SJ0PR02MB7645CBA0B184021E32C45447D4AE0@SJ0PR02MB7645.namprd02.prod.outlook.com>
Message-ID: <CAGxFJbSD5in92f-N7N_ykguv6C-Oeqa7pZxCWXverDzuDHWHoQ@mail.gmail.com>

?rnorm tells you that n, the first argument, is the number of
observations/random numbers you wish to generate. You asked for 1.
So you need to ask for the number of 0's, something like:

> a <- matrix(rep(0:1, 3), nrow =3)
> a
     [,1] [,2]
[1,]    0    1
[2,]    1    0
[3,]    0    1
> a[!a] <- rnorm(sum(!a), 1,.1)
> a
          [,1]     [,2]
[1,] 0.8136788 1.000000
[2,] 1.0000000 1.146225
[3,] 0.9081908 1.000000

Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jan 8, 2021 at 2:33 PM Yuan Chun Ding <ycding at coh.org> wrote:

> Hi R users,
>
> I am analyzing miRNA sequence data for a special network analysis, I need
> to replace zero values in a matrix as random numbers with mean of 1 and
> standard deviation of 0.1.
>
> er.miRCounts[er.miRCounts==0] <- rnorm(1,mean=1, sd=0.1);
>
> this code made all zero values as 1.13, not random numbers across
> different zero values.  If all zero values in one row are replaced by the
> same 1.13,  then sd in that row is zero, causing other problem in the
> following calculation.
>
> Can you help me?
>
> Thank you,
>
> Yuan chun Ding
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or
> entity to which they are addressed. This communication may contain
> information that is privileged, confidential, or exempt from disclosure
> under applicable law (e.g., personal health information, research data,
> financial information). Because this e-mail has been sent without
> encryption, individuals other than the intended recipient may be able to
> view the information, forward it to others or tamper with the information
> without the knowledge or consent of the sender. If you are not the intended
> recipient, or the employee or person responsible for delivering the message
> to the intended recipient, any dissemination, distribution or copying of
> the communication is strictly prohibited. If you received the communication
> in error, please notify the sender immediately by replying to this message
> and deleting the message and any accompanying files from your system. If,
> due to the security risks, you do not wish to receive further
> communications via e-mail, please reply to this message and inform the
> sender that you do not wish to receive further e-mail from the sender.
> (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Sat Jan  9 00:00:38 2021
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Fri, 8 Jan 2021 23:00:38 +0000
Subject: [R] replace zero in a matrix using random numbers
In-Reply-To: <CAGxFJbSD5in92f-N7N_ykguv6C-Oeqa7pZxCWXverDzuDHWHoQ@mail.gmail.com>
References: <SJ0PR02MB7645CBA0B184021E32C45447D4AE0@SJ0PR02MB7645.namprd02.prod.outlook.com>
 <CAGxFJbSD5in92f-N7N_ykguv6C-Oeqa7pZxCWXverDzuDHWHoQ@mail.gmail.com>
Message-ID: <SJ0PR02MB7645DCD7E4AA496CA7F06C16D4AE0@SJ0PR02MB7645.namprd02.prod.outlook.com>

Hi Bert and Rui,

Thank you very much!  I had thought for every condition of  matrix ==0 ,  rnrom(n=1, 1, 0.1) will randomly generate a number with mean 1 and sd 0.1.

Yuan

From: Bert Gunter [mailto:bgunter.4567 at gmail.com]
Sent: Friday, January 8, 2021 2:49 PM
To: Yuan Chun Ding <ycding at coh.org>
Cc: r-help at r-project.org
Subject: Re: [R] replace zero in a matrix using random numbers

?rnorm tells you that n, the first argument, is the number of observations/random numbers you wish to generate. You asked for 1.
So you need to ask for the number of 0's, something like:

> a <- matrix(rep(0:1, 3), nrow =3)
> a
     [,1] [,2]
[1,]    0    1
[2,]    1    0
[3,]    0    1
> a[!a] <- rnorm(sum(!a), 1,.1)
> a
          [,1]     [,2]
[1,] 0.8136788 1.000000
[2,] 1.0000000 1.146225
[3,] 0.9081908 1.000000

Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jan 8, 2021 at 2:33 PM Yuan Chun Ding <ycding at coh.org<mailto:ycding at coh.org>> wrote:
Hi R users,

I am analyzing miRNA sequence data for a special network analysis, I need to replace zero values in a matrix as random numbers with mean of 1 and standard deviation of 0.1.

er.miRCounts[er.miRCounts==0] <- rnorm(1,mean=1, sd=0.1);

this code made all zero values as 1.13, not random numbers across different zero values.  If all zero values in one row are replaced by the same 1.13,  then sd in that row is zero, causing other problem in the following calculation.

Can you help me?

Thank you,

Yuan chun Ding

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://urldefense.com/v3/__https:/stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!6DmiKt7lXx7yfq0jUsdRHh-P5ZiKxoViTNaEApo8IZkGCfXY5v2vD0NYpbXt$>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://urldefense.com/v3/__http:/www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!6DmiKt7lXx7yfq0jUsdRHh-P5ZiKxoViTNaEApo8IZkGCfXY5v2vD0eS8lpe$>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From |@ur@coco @end|ng |rom gm@||@com  Sat Jan  9 04:30:16 2021
From: |@ur@coco @end|ng |rom gm@||@com (Laura Coco)
Date: Fri, 8 Jan 2021 20:30:16 -0700
Subject: [R] Error in contrasts adding bonferroni adjustment
Message-ID: <CAKgKnP4R=s9CUoyQrVR190OeyB8DOjyc5gq2RCbBbYFoSNskpg@mail.gmail.com>

Hello

I am trying to add a Bonferroni adjustment to two comparisons, and I'm
getting an error msg.

The contrasts run just fine; I used a contrast matrix with dummy
variables: Experimental
vs Control at post1 (first contrast) and Experimental vs Control at post2
(second contrast).

contrast.outcome <-contrast(emmeans.outcome, method =
list("experimental_post1 - control_post1" = c(1, 0, -1, 0),
"experimental_post2 - control_post2" = c(0, 1, 0, -1), adjust = "bonf"))

The code runs except when I add the adjust = "bonf" - The error is "Error
in tcmat %*% linfct : requires numeric/complex matrix/vector arguments"

I see many tutorials online about adjusting in pairwise comparisons and
ANOVA but not in this situation. Any guidance you can provide would be much
appreciated.

Thank you!

Laura

	[[alternative HTML version deleted]]


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Sat Jan  9 13:57:57 2021
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Sat, 9 Jan 2021 07:57:57 -0500
Subject: [R] Error in contrasts adding bonferroni adjustment
In-Reply-To: <CAKgKnP4R=s9CUoyQrVR190OeyB8DOjyc5gq2RCbBbYFoSNskpg@mail.gmail.com>
References: <CAKgKnP4R=s9CUoyQrVR190OeyB8DOjyc5gq2RCbBbYFoSNskpg@mail.gmail.com>
Message-ID: <CAJc=yOEGLGe8GgQjCz9ATBikkNHPcupiKtb9nT1q_vh3i01aLQ@mail.gmail.com>

Looks like a misplaced right parenthesis. Try

contrast.outcome <-contrast(emmeans.outcome, method =
list("experimental_post1 - control_post1" = c(1, 0, -1, 0),
"experimental_post2 - control_post2" = c(0, 1, 0, -1)), adjust = "bonf")

Pat


On Sat, Jan 9, 2021 at 3:10 AM Laura Coco <lauracoco at gmail.com> wrote:
>
> Hello
>
> I am trying to add a Bonferroni adjustment to two comparisons, and I'm
> getting an error msg.
>
> The contrasts run just fine; I used a contrast matrix with dummy
> variables: Experimental
> vs Control at post1 (first contrast) and Experimental vs Control at post2
> (second contrast).
>
> contrast.outcome <-contrast(emmeans.outcome, method =
> list("experimental_post1 - control_post1" = c(1, 0, -1, 0),
> "experimental_post2 - control_post2" = c(0, 1, 0, -1), adjust = "bonf"))
>
> The code runs except when I add the adjust = "bonf" - The error is "Error
> in tcmat %*% linfct : requires numeric/complex matrix/vector arguments"
>
> I see many tutorials online about adjusting in pairwise comparisons and
> ANOVA but not in this situation. Any guidance you can provide would be much
> appreciated.
>
> Thank you!
>
> Laura
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Jan  9 20:58:57 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 9 Jan 2021 19:58:57 +0000 (UTC)
Subject: [R] Problem with a LOESS curve
References: <170518512.349410.1610222337123.ref@mail.yahoo.com>
Message-ID: <170518512.349410.1610222337123@mail.yahoo.com>

Dear R-experts,

Here below my R code. What is happening with my green curve ? How to solve the problem ?

Many thanks,

##############################
#DATA
y<-c(499,491,500,517,438,495,501,525,516,494,500,453,479,481,505,465,477,520,520,480,477,416,502,503,497,513,492,469,504,482,502,498,463,504,495)
x<-c(499,496,424,537,480,484,503,575,540,436,486,506,496,481,508,425,501,519,546,507,452,498,471,495,499,522,509,474,502,534,504,466,527,485,525)

#PLOT
plot(x,y)

#GAM
library(mgcv)
fit3=gam(y~s(x,bs='ps'))
x.new<- seq(range(x)[1], range(x)[2], len=1000)
gamfit.new <- as.vector(predict.gam(fit3,data.frame(x=x.new),type="response"))
lines(x.new, gamfit.new, col="red", lwd=2) 

# LOESS
mod=loess(y~x, span=0.8)
yfit=predict(mod,newdata=x)
lines(x,yfit,col="green",lwd=2)
##############################


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jan  9 21:13:27 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 9 Jan 2021 15:13:27 -0500
Subject: [R] Problem with a LOESS curve
In-Reply-To: <170518512.349410.1610222337123@mail.yahoo.com>
References: <170518512.349410.1610222337123.ref@mail.yahoo.com>
 <170518512.349410.1610222337123@mail.yahoo.com>
Message-ID: <9fd299e8-0ab9-d2e9-46cc-164584ec2610@gmail.com>

Your x values aren't in increasing order.  When you plot lines(x, yfit), 
it joins the points in the order you give them, which jumps back and 
forth.  To fix, try

o <- order(x)
lines(x[o], yfit[o], col="green", lwd=2)

Duncan Murdoch

On 09/01/2021 2:58 p.m., varin sacha via R-help wrote:
> ##############################
> #DATA
> y<-c(499,491,500,517,438,495,501,525,516,494,500,453,479,481,505,465,477,520,520,480,477,416,502,503,497,513,492,469,504,482,502,498,463,504,495)
> x<-c(499,496,424,537,480,484,503,575,540,436,486,506,496,481,508,425,501,519,546,507,452,498,471,495,499,522,509,474,502,534,504,466,527,485,525)
> 
> #PLOT
> plot(x,y)
> 
> #GAM
> library(mgcv)
> fit3=gam(y~s(x,bs='ps'))
> x.new<- seq(range(x)[1], range(x)[2], len=1000)
> gamfit.new <- as.vector(predict.gam(fit3,data.frame(x=x.new),type="response"))
> lines(x.new, gamfit.new, col="red", lwd=2)
> 
> # LOESS
> mod=loess(y~x, span=0.8)
> yfit=predict(mod,newdata=x)
> lines(x,yfit,col="green",lwd=2)
> ##############################


From chr|@ho|d @end|ng |rom p@yctc@org  Sun Jan 10 11:26:25 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sun, 10 Jan 2021 10:26:25 +0000 (GMT)
Subject: [R] How to avoid ggplot clipping the x axis
Message-ID: <988720390.7953615.1610274385838.JavaMail.zimbra@psyctc.org>

I am sure I am doing something stupid but I can't see what. I am plotting data and want the x axis labels to reflect the theoretical range of the x variable which happens to be 1:6 but the observed values have range 2.6 to 5.9. 

I thought xlim(c(1,6)) should have got me that quite simply but it doesn't.  I think this is a reproducible example of my failures (!)

library(tidyverse)
library(ggplot2)
x <- seq(2,5.8,.2)
list(x = x,
     y = rnorm(length(x))) %>%
  as_tibble() -> tibDat

ggplot(dat = tibDat,
       aes(x = x, y = y)) +
  geom_point() +
  xlim(c(1,6))
  
ggplot(dat = tibDat,
       aes(x = x, y = y)) +
  geom_point() +
  scale_x_continuous(breaks = 1:6, labels = 1:6) 
  
ggplot(dat = tibDat,
       aes(x = x, y = y)) +
  geom_point() +
  xlim(c(1,6)) +
  coord_cartesian(clip = "off")

ggplot(dat = tibDat,
       aes(x = x, y = y)) +
  geom_point() +
  xlim(c(1,6)) +
  coord_cartesian(expand = TRUE)

Bizarrely (to me)

ggplot(dat = tibDat,
       aes(x = x, y = y)) +
  geom_point() +
  xlim(c(0,6))

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From chr|@ho|d @end|ng |rom p@yctc@org  Sun Jan 10 11:34:43 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sun, 10 Jan 2021 10:34:43 +0000 (GMT)
Subject: [R] How to avoid ggplot clipping the x axis [damn,
 replaces previous Email]
Message-ID: <1638985892.7959044.1610274883233.JavaMail.zimbra@psyctc.org>

[I must try to remember that swapping between Rstudio and my Emailer is a recipe for hitting ctrl-enter and posting prematurely: sorry!] 

I am sure I am doing something stupid but I can't see what. I am plotting data and want the x axis labels to reflect the theoretical range of the x variable which happens to be 1:6 but the observed values have range 2.6 to 5.9. 

I thought xlim(c(1,6)) should have got me that quite simply but it doesn't. I think this is a reproducible example of my failures (!) 
library(tidyverse) 
library(ggplot2) 
x <- seq(2,5.8,.2) 
list(x = x, 
y = rnorm(length(x))) %>% 
as_tibble() -> tibDat 

ggplot(dat = tibDat, 
aes(x = x, y = y)) + 
geom_point() + 
xlim(c(1,6)) 
# x labels on plot are 2, 4 & 6 

ggplot(dat = tibDat, 
aes(x = x, y = y)) + 
geom_point() + 
expand_limits(x = c(1,6)) 
# same 

ggplot(dat = tibDat, 
aes(x = x, y = y)) + 
geom_point() + 
scale_x_continuous(breaks = 1:6, labels = 1:6) 
# x labelled at 2:5 (why?!) 

ggplot(dat = tibDat, 
aes(x = x, y = y)) + 
geom_point() + 
xlim(c(1,6)) + 
coord_cartesian(clip = "off") 
# back to 2, 4, 6 

ggplot(dat = tibDat, 
aes(x = x, y = y)) + 
geom_point() + 
xlim(c(1,6)) + 
coord_cartesian(expand = TRUE) 
# same 

### OK, getting desperately hopeful 
ggplot(dat = tibDat, 
aes(x = x, y = y)) + 
geom_point() + 
xlim(c(0,6)) 
# x axis has 0, 2, 4 and 6 (surely inconsistent behaviour?) 

ggplot(dat = tibDat, 
aes(x = x, y = y)) + 
geom_point() + 
xlim(c(0.1,6)) 
# x axis has 0, 2, 4 and 6 

Can anyone see the simple answer that is eluding me?! 

TIA, 

Chris 


-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/ 

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk> 
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places 
but <chris at psyctc.org> remains my main Email address. I have a work web site at: 
https://www.psyctc.org/psyctc/ 
and a site I manage for CORE and CORE system trust at: 
http://www.coresystemtrust.org.uk/ 
I have "semigrated" to France, see: 
https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/ 

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at: 
https://www.psyctc.org/pelerinage2016/ceworkdiary/ 
Beware: French time, generally an hour ahead of UK. 

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jan 10 19:10:16 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 10 Jan 2021 18:10:16 +0000
Subject: [R] How to avoid ggplot clipping the x axis [damn,
 replaces previous Email]
In-Reply-To: <1638985892.7959044.1610274883233.JavaMail.zimbra@psyctc.org>
References: <1638985892.7959044.1610274883233.JavaMail.zimbra@psyctc.org>
Message-ID: <9243d51c-4a5c-1a17-fef0-307b3f36c0a5@sapo.pt>

Hello,

You are almost there.

With scale_x_continuous use argument limits.


ggplot(dat = tibDat,
        aes(x = x, y = y)) +
   geom_point() +
   scale_x_continuous(breaks = 1:6, labels = 1:6,
                      limits = c(1, 6))


And with xlim it's not a vector c(1, 6), it's each element on its own:

xlim(1, 6)


Or

lims(x = c(1, 6))


But with these two, the labels are not like you want them, they are 2 by 2.

Hope this helps,

Rui Barradas

?s 10:34 de 10/01/21, Chris Evans escreveu:
> [I must try to remember that swapping between Rstudio and my Emailer is a recipe for hitting ctrl-enter and posting prematurely: sorry!]
> 
> I am sure I am doing something stupid but I can't see what. I am plotting data and want the x axis labels to reflect the theoretical range of the x variable which happens to be 1:6 but the observed values have range 2.6 to 5.9.
> 
> I thought xlim(c(1,6)) should have got me that quite simply but it doesn't. I think this is a reproducible example of my failures (!)
> library(tidyverse)
> library(ggplot2)
> x <- seq(2,5.8,.2)
> list(x = x,
> y = rnorm(length(x))) %>%
> as_tibble() -> tibDat
> 
> ggplot(dat = tibDat,
> aes(x = x, y = y)) +
> geom_point() +
> xlim(c(1,6))
> # x labels on plot are 2, 4 & 6
> 
> ggplot(dat = tibDat,
> aes(x = x, y = y)) +
> geom_point() +
> expand_limits(x = c(1,6))
> # same
> 
> ggplot(dat = tibDat,
> aes(x = x, y = y)) +
> geom_point() +
> scale_x_continuous(breaks = 1:6, labels = 1:6)
> # x labelled at 2:5 (why?!)
> 
> ggplot(dat = tibDat,
> aes(x = x, y = y)) +
> geom_point() +
> xlim(c(1,6)) +
> coord_cartesian(clip = "off")
> # back to 2, 4, 6
> 
> ggplot(dat = tibDat,
> aes(x = x, y = y)) +
> geom_point() +
> xlim(c(1,6)) +
> coord_cartesian(expand = TRUE)
> # same
> 
> ### OK, getting desperately hopeful
> ggplot(dat = tibDat,
> aes(x = x, y = y)) +
> geom_point() +
> xlim(c(0,6))
> # x axis has 0, 2, 4 and 6 (surely inconsistent behaviour?)
> 
> ggplot(dat = tibDat,
> aes(x = x, y = y)) +
> geom_point() +
> xlim(c(0.1,6))
> # x axis has 0, 2, 4 and 6
> 
> Can anyone see the simple answer that is eluding me?!
> 
> TIA,
> 
> Chris
> 
>


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sun Jan 10 20:10:40 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sun, 10 Jan 2021 19:10:40 +0000 (UTC)
Subject: [R] Problem with a LOESS curve
In-Reply-To: <9fd299e8-0ab9-d2e9-46cc-164584ec2610@gmail.com>
References: <170518512.349410.1610222337123.ref@mail.yahoo.com>
 <170518512.349410.1610222337123@mail.yahoo.com>
 <9fd299e8-0ab9-d2e9-46cc-164584ec2610@gmail.com>
Message-ID: <2069886278.689864.1610305840240@mail.yahoo.com>

Duncan,

Great, many thanks, it works.

Best,




Le samedi 9 janvier 2021 ? 21:13:30 UTC+1, Duncan Murdoch <murdoch.duncan at gmail.com> a ?crit : 





Your x values aren't in increasing order.? When you plot lines(x, yfit), 
it joins the points in the order you give them, which jumps back and 
forth.? To fix, try

o <- order(x)
lines(x[o], yfit[o], col="green", lwd=2)

Duncan Murdoch

On 09/01/2021 2:58 p.m., varin sacha via R-help wrote:
> ##############################
> #DATA
> y<-c(499,491,500,517,438,495,501,525,516,494,500,453,479,481,505,465,477,520,520,480,477,416,502,503,497,513,492,469,504,482,502,498,463,504,495)
> x<-c(499,496,424,537,480,484,503,575,540,436,486,506,496,481,508,425,501,519,546,507,452,498,471,495,499,522,509,474,502,534,504,466,527,485,525)
> 
> #PLOT
> plot(x,y)
> 
> #GAM
> library(mgcv)
> fit3=gam(y~s(x,bs='ps'))
> x.new<- seq(range(x)[1], range(x)[2], len=1000)
> gamfit.new <- as.vector(predict.gam(fit3,data.frame(x=x.new),type="response"))
> lines(x.new, gamfit.new, col="red", lwd=2)
> 
> # LOESS
> mod=loess(y~x, span=0.8)
> yfit=predict(mod,newdata=x)
> lines(x,yfit,col="green",lwd=2)
> ##############################


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sun Jan 10 20:17:25 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sun, 10 Jan 2021 19:17:25 +0000 (UTC)
Subject: [R] Green curve/line does not appear on the plot
References: <1034286840.704980.1610306245230.ref@mail.yahoo.com>
Message-ID: <1034286840.704980.1610306245230@mail.yahoo.com>

Dear R-experts,

I dont get any error message but I can't get the green curve/line on the plot.
What is going on ? How to solve my problem ?

Here is the R code :

####################
PIB.hab<-c(12000,34000,25000,43000,12500,32400,76320,45890,76345,90565,76580,45670,23450,34560,65430,65435,56755,87655,90755,45675)
ISQ.2018<-c(564,587,489,421,478,499,521,510,532,476,421,467,539,521,478,532,449,487,465,500)

A=c("Australie","Autriche","Belgique","Canada","Chili","R?p. Tch?que","Danemark","Estonie","Finlande","France","Allemange","Gr?ce","Hongrie","Islande","Irlande","Isra?l","Italie","Japon","Cor?e","Lettonie")
?
plot(ISQ.2018,PIB.hab)

library(basicPlotteR)? 

# Add non-overlapping text labels

addTextLabels(ISQ.2018, PIB.hab, A, col.label="black")?


## LOESS FIT
mod=loess(PIB.hab~ISQ.2018,span=1)
yfit=predict(mod,newdata=ISQ.2018)
o=order(ISQ.2018)
lines(ISQ.2018[o],yfit[o],col="blue",lwd=2)

#GAM
library(mgcv)
fit3=gam(PIB.hab~s(ISQ.2018,bs='ps'))
x.new<- seq(range(ISQ.2018)[1], range(ISQ.2018)[2])
gamfit.new <- as.vector(predict.gam(fit3,data.frame(ISQ.2018=x.new),type="response"))
lines(x.new, gamfit.new, col="red", lwd=2)

#Robust GAM
library(robustgam)
true.family <- poisson() 
fit=robustgam(PIB.hab,ISQ.2018, sp=0,family=true.family,smooth.basis='ps',K=3)
x.new <- seq(range(ISQ.2018)[1], range(ISQ.2018)[2])
robustfit.new <- pred.robustgam(fit, data.frame(X=x.new))$predict.values
lines(x.new, robustfit.new, col="green", lwd=2)
####################


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Sun Jan 10 20:57:05 2021
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Sun, 10 Jan 2021 20:57:05 +0100
Subject: [R] How to get Mean Magnitude of Relative Error with caret library
Message-ID: <CA+nrPnsuDP17CKLZidaL5igMa=4TB7d1qypT=RUKkxGabqL6dA@mail.gmail.com>

Hi, I am using caret package and using nested resampling method (i.e. 5
fold for outer fold). I am getting the RMSE and MAE values, which are
default to the caret library.
My question is how can we implement the Mean Magnitude of Relative Error
(MRE and MMRE) with caret. My code is the following:

outer_folds <- createFolds(d$price, k = 5)
boot <- trainControl(method = "boot", number=100)

CV1 <- lapply(outer_folds, function(index){
  tr <- d[-index, ]
  ts <- d[index,]

  cart1 <- train(bug ~ ., data = tr,
                  method = "rf",
                 metric = "MAE",
                 preProc = c("center", "scale", "nzv"),
                 trControl = boot)

  postResample(predict(cart1, ts), ts$price)
})
sapply(CV1, function(x) x[3]) -> CV_MAE1
CV_MAE1

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 10 22:24:20 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 10 Jan 2021 16:24:20 -0500
Subject: [R] Green curve/line does not appear on the plot
In-Reply-To: <1034286840.704980.1610306245230@mail.yahoo.com>
References: <1034286840.704980.1610306245230.ref@mail.yahoo.com>
 <1034286840.704980.1610306245230@mail.yahoo.com>
Message-ID: <b8b3f133-eadd-66b2-d28d-7a42db47500f@gmail.com>

On 10/01/2021 2:17 p.m., varin sacha via R-help wrote:
> Dear R-experts,
> 
> I dont get any error message but I can't get the green curve/line on the plot.
> What is going on ? How to solve my problem ?

Look at the values of robustfit.new.  They are far smaller than any of 
the other values, and don't fall in the range of the plot.  I think 
you've messed up the call to robustgam().

Duncan Murdoch

> 
> Here is the R code :
> 
> ####################
> PIB.hab<-c(12000,34000,25000,43000,12500,32400,76320,45890,76345,90565,76580,45670,23450,34560,65430,65435,56755,87655,90755,45675)
> ISQ.2018<-c(564,587,489,421,478,499,521,510,532,476,421,467,539,521,478,532,449,487,465,500)
> 
> A=c("Australie","Autriche","Belgique","Canada","Chili","R?p. Tch?que","Danemark","Estonie","Finlande","France","Allemange","Gr?ce","Hongrie","Islande","Irlande","Isra?l","Italie","Japon","Cor?e","Lettonie")
>   
> plot(ISQ.2018,PIB.hab)
> 
> library(basicPlotteR)
> 
> # Add non-overlapping text labels
> 
> addTextLabels(ISQ.2018, PIB.hab, A, col.label="black")
> 
> 
> ## LOESS FIT
> mod=loess(PIB.hab~ISQ.2018,span=1)
> yfit=predict(mod,newdata=ISQ.2018)
> o=order(ISQ.2018)
> lines(ISQ.2018[o],yfit[o],col="blue",lwd=2)
> 
> #GAM
> library(mgcv)
> fit3=gam(PIB.hab~s(ISQ.2018,bs='ps'))
> x.new<- seq(range(ISQ.2018)[1], range(ISQ.2018)[2])
> gamfit.new <- as.vector(predict.gam(fit3,data.frame(ISQ.2018=x.new),type="response"))
> lines(x.new, gamfit.new, col="red", lwd=2)
> 
> #Robust GAM
> library(robustgam)
> true.family <- poisson()
> fit=robustgam(PIB.hab,ISQ.2018, sp=0,family=true.family,smooth.basis='ps',K=3)
> x.new <- seq(range(ISQ.2018)[1], range(ISQ.2018)[2])
> robustfit.new <- pred.robustgam(fit, data.frame(X=x.new))$predict.values
> lines(x.new, robustfit.new, col="green", lwd=2)
> ####################
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From nz@h@@m @end|ng |rom gm@||@com  Sun Jan 10 09:53:14 2021
From: nz@h@@m @end|ng |rom gm@||@com (Shaami)
Date: Sun, 10 Jan 2021 13:53:14 +0500
Subject: [R] log of small values in R
Message-ID: <CAGR+MS7n24pe05-XVPA2-of=43PzcS+NU5ANAqcbA-YRQ33ZUA@mail.gmail.com>

Dear Friends        I am facing the problem of log values in R. The
log(1-0.99999999999999999) is giving -Inf while log(1e-18) gives finite
answer. Any suggestion to deal with this problem?  Thank you

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jan 11 08:38:17 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 10 Jan 2021 23:38:17 -0800
Subject: [R] log of small values in R
In-Reply-To: <CAGR+MS7n24pe05-XVPA2-of=43PzcS+NU5ANAqcbA-YRQ33ZUA@mail.gmail.com>
References: <CAGR+MS7n24pe05-XVPA2-of=43PzcS+NU5ANAqcbA-YRQ33ZUA@mail.gmail.com>
Message-ID: <E2B771C0-F812-46E7-9D1A-C71A8D24AE3C@dcn.davis.ca.us>

?log1p

On January 10, 2021 12:53:14 AM PST, Shaami <nzshaam at gmail.com> wrote:
>Dear Friends        I am facing the problem of log values in R. The
>log(1-0.99999999999999999) is giving -Inf while log(1e-18) gives finite
>answer. Any suggestion to deal with this problem?  Thank you
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Jan 11 09:12:20 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 11 Jan 2021 00:12:20 -0800
Subject: [R] log of small values in R
In-Reply-To: <E2B771C0-F812-46E7-9D1A-C71A8D24AE3C@dcn.davis.ca.us>
References: <CAGR+MS7n24pe05-XVPA2-of=43PzcS+NU5ANAqcbA-YRQ33ZUA@mail.gmail.com>
 <E2B771C0-F812-46E7-9D1A-C71A8D24AE3C@dcn.davis.ca.us>
Message-ID: <53BB8ADD-0C68-4A0E-B306-40C9D5FD1586@comcast.net>



> On Jan 10, 2021, at 11:38 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> ?log1p
> 
> On January 10, 2021 12:53:14 AM PST, Shaami <nzshaam at gmail.com> wrote:
>> Dear Friends        I am facing the problem of log values in R. The
>> log(1-0.99999999999999999) is giving -Inf while log(1e-18) gives finite
>> answer. Any suggestion to deal with this problem?  Thank you

Jeff answers the specific question (of how to deal with the issue) but as to why?

> 0.9999999999999999999 == 1
[1] TRUE


And you should switch your mail client to plain text in future contributions to Rhelp.

-- 
David.


>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From chr|@ho|d @end|ng |rom p@yctc@org  Mon Jan 11 11:15:35 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Mon, 11 Jan 2021 10:15:35 +0000 (GMT)
Subject: [R] How to avoid ggplot clipping the x axis [damn,
 replaces previous Email]
In-Reply-To: <9243d51c-4a5c-1a17-fef0-307b3f36c0a5@sapo.pt>
References: <1638985892.7959044.1610274883233.JavaMail.zimbra@psyctc.org>
 <9243d51c-4a5c-1a17-fef0-307b3f36c0a5@sapo.pt>
Message-ID: <2044704809.9390649.1610360135555.JavaMail.zimbra@psyctc.org>

Perfect.  Can't believe I failed to find that!  Thanks, as ever, Rui

----- Original Message -----
> From: "Rui Barradas" <ruipbarradas at sapo.pt>
> To: "Chris Evans" <chrishold at psyctc.org>, R-help at r-project.org
> Sent: Sunday, 10 January, 2021 18:10:16
> Subject: Re: [R] How to avoid ggplot clipping the x axis [damn, replaces previous Email]

> Hello,
> 
> You are almost there.
> 
> With scale_x_continuous use argument limits.
> 
> 
> ggplot(dat = tibDat,
>        aes(x = x, y = y)) +
>   geom_point() +
>   scale_x_continuous(breaks = 1:6, labels = 1:6,
>                      limits = c(1, 6))
> 
> 
> And with xlim it's not a vector c(1, 6), it's each element on its own:
> 
> xlim(1, 6)
> 
> 
> Or
> 
> lims(x = c(1, 6))
> 
> 
> But with these two, the labels are not like you want them, they are 2 by 2.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 10:34 de 10/01/21, Chris Evans escreveu:
>> [I must try to remember that swapping between Rstudio and my Emailer is a recipe
>> for hitting ctrl-enter and posting prematurely: sorry!]
>> 
>> I am sure I am doing something stupid but I can't see what. I am plotting data
>> and want the x axis labels to reflect the theoretical range of the x variable
>> which happens to be 1:6 but the observed values have range 2.6 to 5.9.
>> 
>> I thought xlim(c(1,6)) should have got me that quite simply but it doesn't. I
>> think this is a reproducible example of my failures (!)
>> library(tidyverse)
>> library(ggplot2)
>> x <- seq(2,5.8,.2)
>> list(x = x,
>> y = rnorm(length(x))) %>%
>> as_tibble() -> tibDat
>> 
>> ggplot(dat = tibDat,
>> aes(x = x, y = y)) +
>> geom_point() +
>> xlim(c(1,6))
>> # x labels on plot are 2, 4 & 6
>> 
>> ggplot(dat = tibDat,
>> aes(x = x, y = y)) +
>> geom_point() +
>> expand_limits(x = c(1,6))
>> # same
>> 
>> ggplot(dat = tibDat,
>> aes(x = x, y = y)) +
>> geom_point() +
>> scale_x_continuous(breaks = 1:6, labels = 1:6)
>> # x labelled at 2:5 (why?!)
>> 
>> ggplot(dat = tibDat,
>> aes(x = x, y = y)) +
>> geom_point() +
>> xlim(c(1,6)) +
>> coord_cartesian(clip = "off")
>> # back to 2, 4, 6
>> 
>> ggplot(dat = tibDat,
>> aes(x = x, y = y)) +
>> geom_point() +
>> xlim(c(1,6)) +
>> coord_cartesian(expand = TRUE)
>> # same
>> 
>> ### OK, getting desperately hopeful
>> ggplot(dat = tibDat,
>> aes(x = x, y = y)) +
>> geom_point() +
>> xlim(c(0,6))
>> # x axis has 0, 2, 4 and 6 (surely inconsistent behaviour?)
>> 
>> ggplot(dat = tibDat,
>> aes(x = x, y = y)) +
>> geom_point() +
>> xlim(c(0.1,6))
>> # x axis has 0, 2, 4 and 6
>> 
>> Can anyone see the simple answer that is eluding me?!
>> 
>> TIA,
>> 
>> Chris
>> 

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From phii m@iii@g oii phiiipsmith@c@  Mon Jan 11 16:42:10 2021
From: phii m@iii@g oii phiiipsmith@c@ (phii m@iii@g oii phiiipsmith@c@)
Date: Mon, 11 Jan 2021 10:42:10 -0500
Subject: [R] Showing error distributions in a point plot
Message-ID: <bc6accc993575e77795912dbb43b94b0@philipsmith.ca>

I have a point plot where the estimated points have normally distributed 
errors and I want to plot not just the estimated points, but also an 
indication of the range of uncertainty in each case. The usual way of 
doing this, I believe, is with geom_pointrange, as shown in my reprex. 
However, this suggests to the eye that the errors are uniformly 
distributed when in fact they are normally distributed. I would prefer 
to show bell curves instead of straight lines. As far as I have been 
able to determine, there is no R package to help in doing this. I would 
appreciate suggestions as to how best to proceed.

Philip

# Reprex for error distributions
library(ggplot2)
df <- data.frame(x=1:10,y=rnorm(n=10))
ggplot(df)+
   geom_point(aes(x=x,y=y))+
   geom_hline(yintercept=0)+
   geom_pointrange(aes(x=x,y=y,ymin=y-sd(y),ymax=y+sd(y)))


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jan 11 17:05:01 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 11 Jan 2021 08:05:01 -0800
Subject: [R] Showing error distributions in a point plot
In-Reply-To: <bc6accc993575e77795912dbb43b94b0@philipsmith.ca>
References: <bc6accc993575e77795912dbb43b94b0@philipsmith.ca>
Message-ID: <CAGxFJbRcfLPxzngQwUA7RqfncY081duKm9otOQv3tkYoFSx4xg@mail.gmail.com>

Search for "violin plots"  at rseek.org.
There is a whole package devoted to them, many packages provide them, and
there is a geom_violin in ggplot2.

Don't know if this satisfies your aesthetic sensibilities, of course.
That's for you to decide.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jan 11, 2021 at 7:42 AM <phil at philipsmith.ca> wrote:

> I have a point plot where the estimated points have normally distributed
> errors and I want to plot not just the estimated points, but also an
> indication of the range of uncertainty in each case. The usual way of
> doing this, I believe, is with geom_pointrange, as shown in my reprex.
> However, this suggests to the eye that the errors are uniformly
> distributed when in fact they are normally distributed. I would prefer
> to show bell curves instead of straight lines. As far as I have been
> able to determine, there is no R package to help in doing this. I would
> appreciate suggestions as to how best to proceed.
>
> Philip
>
> # Reprex for error distributions
> library(ggplot2)
> df <- data.frame(x=1:10,y=rnorm(n=10))
> ggplot(df)+
>    geom_point(aes(x=x,y=y))+
>    geom_hline(yintercept=0)+
>    geom_pointrange(aes(x=x,y=y,ymin=y-sd(y),ymax=y+sd(y)))
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @teph@ne@ch@mpe|y @end|ng |rom un|v-|yon1@|r  Mon Jan 11 12:45:01 2021
From: @teph@ne@ch@mpe|y @end|ng |rom un|v-|yon1@|r (CHAMPELY STEPHANE)
Date: Mon, 11 Jan 2021 11:45:01 +0000
Subject: [R] Troubles installing Rcmdr on Mac
Message-ID: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>

Dear colleagues,
I try to help my (french) student since five days to install Rcmd for mac and they have (ALL of them, and I use windows so I am not very skilled for that task) the same problem. When they load Rcmd, some supplementary tools (in order to use the command "otool") are missing according a message and trying to download them leads to a message indicated that it is not at the present moment available (since Thursday last week...)
So the menu of the Rcmdr are "white". Any idea where this technical problem come from ?
Thank you fr any help !

	[[alternative HTML version deleted]]


From e| @end|ng |rom ||@@e@n@  Mon Jan 11 19:55:26 2021
From: e| @end|ng |rom ||@@e@n@ (Dr Eberhard W Lisse)
Date: Mon, 11 Jan 2021 20:55:26 +0200
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
Message-ID: <782ff48b-0bee-475c-beae-0b61fd856e58@Spark>

Use RStudio.

But it can be that the command line tools are missing, which you (may) need to compile packages (from source).Ask one of them to open a terminal window and type the command ?make ?version? without the ??) if that results in an error they need to enter ?sudo xcode-select ?install? and then their password when asked.If that fixes the issue have all of them do that.

el

?
Sent from Dr Lisse?s iPhone
On 11 Jan 2021, 20:39 +0200, CHAMPELY STEPHANE <stephane.champely at univ-lyon1.fr>, wrote:
> Dear colleagues,
> I try to help my (french) student since five days to install Rcmd for mac and they have (ALL of them, and I use windows so I am not very skilled for that task) the same problem. When they load Rcmd, some supplementary tools (in order to use the command "otool") are missing according a message and trying to download them leads to a message indicated that it is not at the present moment available (since Thursday last week...)
> So the menu of the Rcmdr are "white". Any idea where this technical problem come from ?
> Thank you fr any help !
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From phii m@iii@g oii phiiipsmith@c@  Mon Jan 11 20:17:58 2021
From: phii m@iii@g oii phiiipsmith@c@ (phii m@iii@g oii phiiipsmith@c@)
Date: Mon, 11 Jan 2021 14:17:58 -0500
Subject: [R] Showing error distributions in a point plot
In-Reply-To: <CAGxFJbRcfLPxzngQwUA7RqfncY081duKm9otOQv3tkYoFSx4xg@mail.gmail.com>
References: <bc6accc993575e77795912dbb43b94b0@philipsmith.ca>
 <CAGxFJbRcfLPxzngQwUA7RqfncY081duKm9otOQv3tkYoFSx4xg@mail.gmail.com>
Message-ID: <064456eac133a67f80b44aea9d6da8f6@philipsmith.ca>

Yes, geom_violin does the trick. Thanks for your fast and useful reply, 
Bert.

Philip

On 2021-01-11 11:05, Bert Gunter wrote:
> Search for "violin plots"  at rseek.org [1].
> There is a whole package devoted to them, many packages provide them,
> and there is a geom_violin in ggplot2.
> 
> Don't know if this satisfies your aesthetic sensibilities, of course.
> That's for you to decide.
> 
> Cheers,
> Bert
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> On Mon, Jan 11, 2021 at 7:42 AM <phil at philipsmith.ca> wrote:
> 
>> I have a point plot where the estimated points have normally
>> distributed
>> errors and I want to plot not just the estimated points, but also an
>> 
>> indication of the range of uncertainty in each case. The usual way
>> of
>> doing this, I believe, is with geom_pointrange, as shown in my
>> reprex.
>> However, this suggests to the eye that the errors are uniformly
>> distributed when in fact they are normally distributed. I would
>> prefer
>> to show bell curves instead of straight lines. As far as I have been
>> 
>> able to determine, there is no R package to help in doing this. I
>> would
>> appreciate suggestions as to how best to proceed.
>> 
>> Philip
>> 
>> # Reprex for error distributions
>> library(ggplot2)
>> df <- data.frame(x=1:10,y=rnorm(n=10))
>> ggplot(df)+
>> geom_point(aes(x=x,y=y))+
>> geom_hline(yintercept=0)+
>> geom_pointrange(aes(x=x,y=y,ymin=y-sd(y),ymax=y+sd(y)))
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> Links:
> ------
> [1] http://rseek.org


From j|ox @end|ng |rom mcm@@ter@c@  Mon Jan 11 21:33:55 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Mon, 11 Jan 2021 15:33:55 -0500
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
 <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
Message-ID: <bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>

Dear Stephane and Eberhard,

It should not be necessary to install Xcode (which includes otools) to 
install and use the Rcmdr package on macOS because it shouldn't be 
necessary to install the CRAN packages required from source. I'm 
currently running the Rcmdr on two macOS 11.1 systems, with all CRAN 
packages up-to-date, and don't have any problems.

Stephane, have you and your students checked the Rcmdr installation 
notes (at 
<https://socialsciences.mcmaster.ca/jfox/Misc/Rcmdr/installation-notes.html>) 
and followed the instructions there? If you have, and still experience 
this problem, it would help to have some more information about what 
they did to install the Rcmdr and what happened.

In the meantime, I'll try a fresh install of the Rcmdr and dependencies 
to see whether I encounter any difficulties.

Best,
  John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2021-01-11 1:55 p.m., Dr Eberhard W Lisse wrote:
> Use RStudio.
> 
> But it can be that the command line tools are missing, which you (may) need to compile packages (from source).Ask one of them to open a terminal window and type the command ?make ?version? without the ??) if that results in an error they need to enter ?sudo xcode-select ?install? and then their password when asked.If that fixes the issue have all of them do that.
> 
> el
> 
> ?
> Sent from Dr Lisse?s iPhone
> On 11 Jan 2021, 20:39 +0200, CHAMPELY STEPHANE <stephane.champely at univ-lyon1.fr>, wrote:
>> Dear colleagues,
>> I try to help my (french) student since five days to install Rcmd for mac and they have (ALL of them, and I use windows so I am not very skilled for that task) the same problem. When they load Rcmd, some supplementary tools (in order to use the command "otool") are missing according a message and trying to download them leads to a message indicated that it is not at the present moment available (since Thursday last week...)
>> So the menu of the Rcmdr are "white". Any idea where this technical problem come from ?
>> Thank you fr any help !
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From j|ox @end|ng |rom mcm@@ter@c@  Mon Jan 11 21:53:01 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Mon, 11 Jan 2021 15:53:01 -0500
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <22066_1610397266_10BKYMMn008773_bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
 <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
 <22066_1610397266_10BKYMMn008773_bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>
Message-ID: <b786e2aa-176b-34cf-5fc7-49f1d3c76f52@mcmaster.ca>

Dear Stephane and Eberhard,

As an addendum to my previous response, I uninstalled the Rcmdr package 
and all of its direct and indirect dependencies and then reinstalled the 
package -- on a macOS 11.1 system running R 4.0.3 with all other 
packages up-to-date.

I then reinstalled the Rcmdr and dependencies via the command 
install.packages("Rcmdr"), and responded "no" when asked whether to 
install some packages from source (perhaps this is the explanation for 
the problem, if your students responded "yes" without having Xcode 
installed).

Following these steps, everything (still) works fine. I therefore can't 
duplicate your students' problem, which makes it hard to suggest how to 
fix it, without having some additional details.

Best,
  John


On 2021-01-11 3:33 p.m., John Fox wrote:
> Dear Stephane and Eberhard,
> 
> It should not be necessary to install Xcode (which includes otools) to 
> install and use the Rcmdr package on macOS because it shouldn't be 
> necessary to install the CRAN packages required from source. I'm 
> currently running the Rcmdr on two macOS 11.1 systems, with all CRAN 
> packages up-to-date, and don't have any problems.
> 
> Stephane, have you and your students checked the Rcmdr installation 
> notes (at 
> <https://socialsciences.mcmaster.ca/jfox/Misc/Rcmdr/installation-notes.html>) 
> and followed the instructions there? If you have, and still experience 
> this problem, it would help to have some more information about what 
> they did to install the Rcmdr and what happened.
> 
> In the meantime, I'll try a fresh install of the Rcmdr and dependencies 
> to see whether I encounter any difficulties.
> 
> Best,
>  ?John
>


From j|ox @end|ng |rom mcm@@ter@c@  Tue Jan 12 03:30:46 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Mon, 11 Jan 2021 21:30:46 -0500
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <24874_1610398402_10BKrLx4005352_b786e2aa-176b-34cf-5fc7-49f1d3c76f52@mcmaster.ca>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
 <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
 <22066_1610397266_10BKYMMn008773_bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>
 <24874_1610398402_10BKrLx4005352_b786e2aa-176b-34cf-5fc7-49f1d3c76f52@mcmaster.ca>
Message-ID: <910accaa-52a3-3a42-ce20-110f0271e0a4@mcmaster.ca>

Dear Stephane,

I've taken yet another look at this and have an additional suggestion 
for your students to try:

	install.packages("Rcmdr", type="mac.binary")

That should avoid any attempt to install Rcmdr package dependencies from 
source.

I hope this helps,
  John

On 2021-01-11 3:53 p.m., John Fox wrote:
> Dear Stephane and Eberhard,
> 
> As an addendum to my previous response, I uninstalled the Rcmdr package 
> and all of its direct and indirect dependencies and then reinstalled the 
> package -- on a macOS 11.1 system running R 4.0.3 with all other 
> packages up-to-date.
> 
> I then reinstalled the Rcmdr and dependencies via the command 
> install.packages("Rcmdr"), and responded "no" when asked whether to 
> install some packages from source (perhaps this is the explanation for 
> the problem, if your students responded "yes" without having Xcode 
> installed).
> 
> Following these steps, everything (still) works fine. I therefore can't 
> duplicate your students' problem, which makes it hard to suggest how to 
> fix it, without having some additional details.
> 
> Best,
>  ?John
> 
> 
> On 2021-01-11 3:33 p.m., John Fox wrote:
>> Dear Stephane and Eberhard,
>>
>> It should not be necessary to install Xcode (which includes otools) to 
>> install and use the Rcmdr package on macOS because it shouldn't be 
>> necessary to install the CRAN packages required from source. I'm 
>> currently running the Rcmdr on two macOS 11.1 systems, with all CRAN 
>> packages up-to-date, and don't have any problems.
>>
>> Stephane, have you and your students checked the Rcmdr installation 
>> notes (at 
>> <https://socialsciences.mcmaster.ca/jfox/Misc/Rcmdr/installation-notes.html>) 
>> and followed the instructions there? If you have, and still experience 
>> this problem, it would help to have some more information about what 
>> they did to install the Rcmdr and what happened.
>>
>> In the meantime, I'll try a fresh install of the Rcmdr and 
>> dependencies to see whether I encounter any difficulties.
>>
>> Best,
>> ??John
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From e| @end|ng |rom ||@@e@n@  Tue Jan 12 06:32:49 2021
From: e| @end|ng |rom ||@@e@n@ (Dr Eberhard W Lisse)
Date: Tue, 12 Jan 2021 07:32:49 +0200
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <910accaa-52a3-3a42-ce20-110f0271e0a4@mcmaster.ca>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
 <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
 <22066_1610397266_10BKYMMn008773_bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>
 <24874_1610398402_10BKrLx4005352_b786e2aa-176b-34cf-5fc7-49f1d3c76f52@mcmaster.ca>
 <910accaa-52a3-3a42-ce20-110f0271e0a4@mcmaster.ca>
Message-ID: <c491e829-877c-48e2-b003-a1505a5f362a@Spark>

John,

what is wrong with installing Xcode?s command lime tools (not Xcode itself)?


?
Sent from Dr Lisse?s iPhone
On 12 Jan 2021, 04:30 +0200, John Fox <jfox at mcmaster.ca>, wrote:
> Dear Stephane,
>
> I've taken yet another look at this and have an additional suggestion
> for your students to try:
>
> install.packages("Rcmdr", type="mac.binary")
>
> That should avoid any attempt to install Rcmdr package dependencies from
> source.
>
> I hope this helps,
> John
>
> On 2021-01-11 3:53 p.m., John Fox wrote:
> > Dear Stephane and Eberhard,
> >
> > As an addendum to my previous response, I uninstalled the Rcmdr package
> > and all of its direct and indirect dependencies and then reinstalled the
> > package -- on a macOS 11.1 system running R 4.0.3 with all other
> > packages up-to-date.
> >
> > I then reinstalled the Rcmdr and dependencies via the command
> > install.packages("Rcmdr"), and responded "no" when asked whether to
> > install some packages from source (perhaps this is the explanation for
> > the problem, if your students responded "yes" without having Xcode
> > installed).
> >
> > Following these steps, everything (still) works fine. I therefore can't
> > duplicate your students' problem, which makes it hard to suggest how to
> > fix it, without having some additional details.
> >
> > Best,
> > ?John
> >
> >
> > On 2021-01-11 3:33 p.m., John Fox wrote:
> > > Dear Stephane and Eberhard,
> > >
> > > It should not be necessary to install Xcode (which includes otools) to
> > > install and use the Rcmdr package on macOS because it shouldn't be
> > > necessary to install the CRAN packages required from source. I'm
> > > currently running the Rcmdr on two macOS 11.1 systems, with all CRAN
> > > packages up-to-date, and don't have any problems.
> > >
> > > Stephane, have you and your students checked the Rcmdr installation
> > > notes (at
> > > <https://socialsciences.mcmaster.ca/jfox/Misc/Rcmdr/installation-notes.html>)
> > > and followed the instructions there? If you have, and still experience
> > > this problem, it would help to have some more information about what
> > > they did to install the Rcmdr and what happened.
> > >
> > > In the meantime, I'll try a fresh install of the Rcmdr and
> > > dependencies to see whether I encounter any difficulties.
> > >
> > > Best,
> > > ??John
> > >
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Tue Jan 12 09:13:34 2021
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Tue, 12 Jan 2021 09:13:34 +0100
Subject: [R] roxygen2 & markdown & math
Message-ID: <8b2b6987-02aa-e128-e978-a440dd77c75b@wiwi.hu-berlin.de>

Hi,

I like to make my package documentation with markdown which is supported 
since roxygen2 6.0.0 . I used a math expression like $t_n \appox N(0,1)$ 
which leads in the package check to "unknown macro '\approx'".

I guess I get the warning because math is not supported in markdown. Are 
there any plans to support something like $...$ or $$...$$? Or there are 
general problems?

Best Sigbert

-- 
https://hu.berlin/sk
https://hu.berlin/mmstat
https://hu.berlin/mmstat-int
https://hu.berlin/mmstat-ar


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Tue Jan 12 10:41:59 2021
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Tue, 12 Jan 2021 09:41:59 +0000
Subject: [R] roxygen2 & markdown & math
In-Reply-To: <8b2b6987-02aa-e128-e978-a440dd77c75b@wiwi.hu-berlin.de>
References: <8b2b6987-02aa-e128-e978-a440dd77c75b@wiwi.hu-berlin.de>
Message-ID: <80bfb24e8f944cafa01c18f81b809bc9@UM-MAIL3214.unimaas.nl>

Dear Sigbert,

The mathjaxr package provides this:

https://cran.r-project.org/package=mathjaxr
https://github.com/wviechtb/mathjaxr

Best,
Wolfgang

>-----Original Message-----
>From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Sigbert
>Klinke
>Sent: Tuesday, 12 January, 2021 9:14
>To: r-help at r-project.org
>Subject: [R] roxygen2 & markdown & math
>
>Hi,
>
>I like to make my package documentation with markdown which is supported
>since roxygen2 6.0.0 . I used a math expression like $t_n \appox N(0,1)$
>which leads in the package check to "unknown macro '\approx'".
>
>I guess I get the warning because math is not supported in markdown. Are
>there any plans to support something like $...$ or $$...$$? Or there are
>general problems?
>
>Best Sigbert
>
>--
>https://hu.berlin/sk
>https://hu.berlin/mmstat
>https://hu.berlin/mmstat-int
>https://hu.berlin/mmstat-ar


From th|erry@onke||nx @end|ng |rom |nbo@be  Fri Jan  8 16:20:25 2021
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Fri, 8 Jan 2021 16:20:25 +0100
Subject: [R] 
 Secondary y axis in ggplot2: did not respond when change its
 y-axis value
In-Reply-To: <CAMwU6B3NtSDnBQ+1cZZDqZ_t18u0faW3jyEmY2YUwqPnaODLgA@mail.gmail.com>
References: <CAMwU6B3NtSDnBQ+1cZZDqZ_t18u0faW3jyEmY2YUwqPnaODLgA@mail.gmail.com>
Message-ID: <CAJuCY5yj8Sr5s1uQ=b3znkWHRL8ATzGuyzkoweJrvkG2bcAb7g-349@mail.gmail.com>

The second y-axis in ggplot2 is only intended to relabel an axis with a
fixed transformation. E.g. one axis in degree Celcius and one in Kelvin,
km and miles, ...
It does not rescale the variables.

It looks like you want to display two variables with unrelated units on the
same y-axis. That is not a good idea. https://blog.datawrapper.de/dualaxis/

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op vr 8 jan. 2021 om 02:02 schreef Marna Wagley <marna.wagley at gmail.com>:

> Hi R users,
> I was trying to plot a graph with a secondary axis, and used the following
> code for the data but the secondary line and secondary y -axis value did
> not match. I would like to show both lines in one graph.
>
> Any suggestions?
>
> library(ggplot2)
> library(reshape2)
> daT<-structure(list(x = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L,
> 3L, 4L, 5L, 6L, 7L, 8L), y1 = c(9754L, 1051L, 5833L, 5769L, 2479L,
> 470L, 5828L, 174L, 2045L, 6099L, 8780L, 8732L, 4053L, 9419L,
> 4728L, 3587L), y2 = c(0.51, 0.61, 0.3, 0.81, 0.89, 0, 1.9, 0.76,
> 0.87, 0.29, 0, 0.42, 0.73, 0.96, 0.62, 0.06), group = c("A",
> "A", "A", "A", "A", "A", "A", "A", "B", "B", "B", "B", "B", "B",
> "B", "B")), class = "data.frame", row.names = c(NA, -16L))
> print(daT)
> daT1<-melt(daT, id.vars=c("x", "group"))
> daT1%>%
>   ggplot() +
>   geom_line(aes(x = x, y = value, group = variable, color = variable)) +
>   facet_wrap(~group) +
>   scale_y_continuous(sec.axis = sec_axis(~ .*0.0001))
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Tue Jan 12 15:19:39 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 12 Jan 2021 09:19:39 -0500
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <19096_1610429608_10C5XRdw010761_c491e829-877c-48e2-b003-a1505a5f362a@Spark>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
 <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
 <22066_1610397266_10BKYMMn008773_bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>
 <24874_1610398402_10BKrLx4005352_b786e2aa-176b-34cf-5fc7-49f1d3c76f52@mcmaster.ca>
 <910accaa-52a3-3a42-ce20-110f0271e0a4@mcmaster.ca>
 <19096_1610429608_10C5XRdw010761_c491e829-877c-48e2-b003-a1505a5f362a@Spark>
Message-ID: <73075cc1-1bdc-93d1-3e6b-2e4eaedeb85b@mcmaster.ca>

Dear Eberhard,

On 2021-01-12 12:32 a.m., Dr Eberhard W Lisse wrote:
> John,
> 
> what is wrong with installing Xcode?s command lime tools (not Xcode itself)?

Nothing, and I did miss the distinction, but it shouldn't be necessary, 
and the instructions for installing the Rcmdr are already more 
complicated on macOS than on other platforms because of the necessity to 
install XQuartz. Users should be able to install the Rcmdr package on 
macOS without having to install packages from source.

Remember that Rcmdr users are typically students in basic statistics 
courses, many of whom have limited software sophistication. 
Unnecessarily complicating the installation is undesirable. Of course, 
if it's necessary to complicate the installation, one has to live with that.

I'll be interested to learn whether my suggestions solve the problem. If 
not, I can add an instruction concerning the Xcode tools to the Rcmdr 
installation notes for macOS.

Thanks for your help,
  John

> 
> 
> ?
> Sent from Dr Lisse?s iPhone
> On 12 Jan 2021, 04:30 +0200, John Fox <jfox at mcmaster.ca>, wrote:
>> Dear Stephane,
>>
>> I've taken yet another look at this and have an additional suggestion
>> for your students to try:
>>
>> install.packages("Rcmdr", type="mac.binary")
>>
>> That should avoid any attempt to install Rcmdr package dependencies from
>> source.
>>
>> I hope this helps,
>> John
>>
>> On 2021-01-11 3:53 p.m., John Fox wrote:
>>> Dear Stephane and Eberhard,
>>>
>>> As an addendum to my previous response, I uninstalled the Rcmdr package
>>> and all of its direct and indirect dependencies and then reinstalled the
>>> package -- on a macOS 11.1 system running R 4.0.3 with all other
>>> packages up-to-date.
>>>
>>> I then reinstalled the Rcmdr and dependencies via the command
>>> install.packages("Rcmdr"), and responded "no" when asked whether to
>>> install some packages from source (perhaps this is the explanation for
>>> the problem, if your students responded "yes" without having Xcode
>>> installed).
>>>
>>> Following these steps, everything (still) works fine. I therefore can't
>>> duplicate your students' problem, which makes it hard to suggest how to
>>> fix it, without having some additional details.
>>>
>>> Best,
>>>  ?John
>>>
>>>
>>> On 2021-01-11 3:33 p.m., John Fox wrote:
>>>> Dear Stephane and Eberhard,
>>>>
>>>> It should not be necessary to install Xcode (which includes otools) to
>>>> install and use the Rcmdr package on macOS because it shouldn't be
>>>> necessary to install the CRAN packages required from source. I'm
>>>> currently running the Rcmdr on two macOS 11.1 systems, with all CRAN
>>>> packages up-to-date, and don't have any problems.
>>>>
>>>> Stephane, have you and your students checked the Rcmdr installation
>>>> notes (at
>>>> <https://socialsciences.mcmaster.ca/jfox/Misc/Rcmdr/installation-notes.html>)
>>>> and followed the instructions there? If you have, and still experience
>>>> this problem, it would help to have some more information about what
>>>> they did to install the Rcmdr and what happened.
>>>>
>>>> In the meantime, I'll try a fresh install of the Rcmdr and
>>>> dependencies to see whether I encounter any difficulties.
>>>>
>>>> Best,
>>>>  ??John
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From j|ox @end|ng |rom mcm@@ter@c@  Tue Jan 12 15:27:43 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 12 Jan 2021 09:27:43 -0500
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <1610434110562.11118@univ-lyon1.fr>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
 <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
 <22066_1610397266_10BKYMMn008773_bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>
 <24874_1610398402_10BKrLx4005352_b786e2aa-176b-34cf-5fc7-49f1d3c76f52@mcmaster.ca>
 <910accaa-52a3-3a42-ce20-110f0271e0a4@mcmaster.ca>
 <1610434110562.11118@univ-lyon1.fr>
Message-ID: <34dd3765-0c1f-5b90-693f-a9abc171ca67@mcmaster.ca>

Dear Stephane,

On 2021-01-12 1:48 a.m., CHAMPELY STEPHANE wrote:
> Dear John,
> thank you for these responses, we will try this... today. We carefully read the installation notes, but it is sometimes difficult to really check what was done by the students because in France, our lessons are online lessons (covid-19...)

Yes, the pandemic has made teaching very difficult. As a general matter, 
it's been my experience that almost all Rcmdr installation problems are 
on macOS. It's usually easy to help students get going in person, much 
less so remotely.

Please let me know whether your students solve their problems, and if 
so, how, so that I can update the Rcmdr installation notes, if necessary.

Also please keep the conversation on r-help so that others are able to 
follow it.

Best,
  John

> All the best,
> St?phane CHAMPELY
> Ma?tre de conf?rences
> UFR STAPS , Laboratoire L-ViS, Universit? Lyon 1
> 
> 
> ________________________________________
> De : John Fox <jfox at mcmaster.ca>
> Envoy? : mardi 12 janvier 2021 03:30
> ? : CHAMPELY STEPHANE
> Cc : r-help at r-project.org; Dr Eberhard W Lisse
> Objet : Re: [R] Troubles installing Rcmdr on Mac
> 
> Dear Stephane,
> 
> I've taken yet another look at this and have an additional suggestion
> for your students to try:
> 
>          install.packages("Rcmdr", type="mac.binary")
> 
> That should avoid any attempt to install Rcmdr package dependencies from
> source.
> 
> I hope this helps,
>    John
> 
> On 2021-01-11 3:53 p.m., John Fox wrote:
>> Dear Stephane and Eberhard,
>>
>> As an addendum to my previous response, I uninstalled the Rcmdr package
>> and all of its direct and indirect dependencies and then reinstalled the
>> package -- on a macOS 11.1 system running R 4.0.3 with all other
>> packages up-to-date.
>>
>> I then reinstalled the Rcmdr and dependencies via the command
>> install.packages("Rcmdr"), and responded "no" when asked whether to
>> install some packages from source (perhaps this is the explanation for
>> the problem, if your students responded "yes" without having Xcode
>> installed).
>>
>> Following these steps, everything (still) works fine. I therefore can't
>> duplicate your students' problem, which makes it hard to suggest how to
>> fix it, without having some additional details.
>>
>> Best,
>>    John
>>
>>
>> On 2021-01-11 3:33 p.m., John Fox wrote:
>>> Dear Stephane and Eberhard,
>>>
>>> It should not be necessary to install Xcode (which includes otools) to
>>> install and use the Rcmdr package on macOS because it shouldn't be
>>> necessary to install the CRAN packages required from source. I'm
>>> currently running the Rcmdr on two macOS 11.1 systems, with all CRAN
>>> packages up-to-date, and don't have any problems.
>>>
>>> Stephane, have you and your students checked the Rcmdr installation
>>> notes (at
>>> <https://socialsciences.mcmaster.ca/jfox/Misc/Rcmdr/installation-notes.html>)
>>> and followed the instructions there? If you have, and still experience
>>> this problem, it would help to have some more information about what
>>> they did to install the Rcmdr and what happened.
>>>
>>> In the meantime, I'll try a fresh install of the Rcmdr and
>>> dependencies to see whether I encounter any difficulties.
>>>
>>> Best,
>>>    John
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From e| @end|ng |rom ||@@e@NA  Tue Jan 12 15:41:11 2021
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Tue, 12 Jan 2021 16:41:11 +0200
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <73075cc1-1bdc-93d1-3e6b-2e4eaedeb85b@mcmaster.ca>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
 <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
 <22066_1610397266_10BKYMMn008773_bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>
 <24874_1610398402_10BKrLx4005352_b786e2aa-176b-34cf-5fc7-49f1d3c76f52@mcmaster.ca>
 <910accaa-52a3-3a42-ce20-110f0271e0a4@mcmaster.ca>
 <19096_1610429608_10C5XRdw010761_c491e829-877c-48e2-b003-a1505a5f362a@Spark>
 <73075cc1-1bdc-93d1-3e6b-2e4eaedeb85b@mcmaster.ca>
Message-ID: <82ecb1a1-afb9-70dd-874b-f47660b7be1e@lisse.NA>

John,

maybe I misunderestimate the students :-)-O but there is not much
sophistication required to follow simple instructions while thinking
about what one is doing when doing so.  At least that was my generation
of students did.

If they can install XQuartz, they can install the command line tools.

And, it's not about RCmdr but about the source packages that you may
want to have to install for which the command line tools are required.

Finally, RStudio is so much easier and more powerful, that I wonder why 
one is bothering with this including XQuartz.

greetings, el

On 12/01/2021 16:19, John Fox wrote:
> Dear Eberhard,
> 
> On 2021-01-12 12:32 a.m., Dr Eberhard W Lisse wrote:
>> John,
>>
>> what is wrong with installing Xcode?s command lime tools (not Xcode
>> itself)?
> 
> Nothing, and I did miss the distinction, but it shouldn't be
> necessary, and the instructions for installing the Rcmdr are already
> more complicated on macOS than on other platforms because of the
> necessity to install XQuartz.  Users should be able to install the
> Rcmdr package on macOS without having to install packages from source.
> 
> Remember that Rcmdr users are typically students in basic statistics
> courses, many of whom have limited software sophistication.
> Unnecessarily complicating the installation is undesirable.  Of
> course, if it's necessary to complicate the installation, one has to
> live with that.
> 
> I'll be interested to learn whether my suggestions solve the problem.
> If not, I can add an instruction concerning the Xcode tools to the
> Rcmdr installation notes for macOS.
> 
> Thanks for your help,
>  John
[...]

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist 
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From j|ox @end|ng |rom mcm@@ter@c@  Tue Jan 12 16:43:26 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 12 Jan 2021 10:43:26 -0500
Subject: [R] Troubles installing Rcmdr on Mac
In-Reply-To: <22320_1610462500_10CEfd0S003609_82ecb1a1-afb9-70dd-874b-f47660b7be1e@lisse.NA>
References: <aabd9c0723724ba5b0bb8b8cd007e102@BPMBX2013-02.univ-lyon1.fr>
 <26234_1610391374_10BIuDxO006548_782ff48b-0bee-475c-beae-0b61fd856e58@Spark>
 <22066_1610397266_10BKYMMn008773_bae9220a-c1a7-8f61-8e68-a2b3a408b889@mcmaster.ca>
 <24874_1610398402_10BKrLx4005352_b786e2aa-176b-34cf-5fc7-49f1d3c76f52@mcmaster.ca>
 <910accaa-52a3-3a42-ce20-110f0271e0a4@mcmaster.ca>
 <19096_1610429608_10C5XRdw010761_c491e829-877c-48e2-b003-a1505a5f362a@Spark>
 <73075cc1-1bdc-93d1-3e6b-2e4eaedeb85b@mcmaster.ca>
 <22320_1610462500_10CEfd0S003609_82ecb1a1-afb9-70dd-874b-f47660b7be1e@lisse.NA>
Message-ID: <e6c64297-05d2-d064-4c67-acddeba0c14e@mcmaster.ca>

Dear Eberhard,

On 2021-01-12 9:41 a.m., Dr Eberhard W Lisse wrote:
> John,
> 
> maybe I misunderestimate the students :-)-O but there is not much
> sophistication required to follow simple instructions while thinking
> about what one is doing when doing so.  At least that was my generation
> of students did.
> 
> If they can install XQuartz, they can install the command line tools.

In my experience, mostly with social-science undergraduates and 
graduate students, the more steps an installation requires, the more 
likely students will encounter difficulties. Your students may well have 
a different level of computer sophistication than mine did, but I know 
that my experience isn't unique.

> 
> And, it's not about RCmdr but about the source packages that you may
> want to have to install for which the command line tools are required.

Right. But all of the packages on which the Rcmdr package depends have 
Mac binaries. As I confirmed yesterday, one can install the Rcmdr and 
its dependencies on macOS without building any packages from source.

> 
> Finally, RStudio is so much easier and more powerful, that I wonder why
> one is bothering with this including XQuartz.

Because I think you underestimate the obstacle that working at the 
command line presents to students who often are already struggling to 
learn basic statistical concepts. In my, and others', experience, it's 
easier for students at this level to work with a statistical GUI than to 
write commands. While working n RStudio or another IDE is undoubtedly 
more powerful, for them it certainly isn't easier. Your teaching 
experiences may be different.

Best,
  John


> 
> greetings, el 
> 
> On 12/01/2021 16:19, John Fox wrote:
>> Dear Eberhard,
>>
>> On 2021-01-12 12:32 a.m., Dr Eberhard W Lisse wrote:
>>> John,
>>>
>>> what is wrong with installing Xcode?s command lime tools (not Xcode
>>> itself)?
>>
>> Nothing, and I did miss the distinction, but it shouldn't be
>> necessary, and the instructions for installing the Rcmdr are already
>> more complicated on macOS than on other platforms because of the
>> necessity to install XQuartz.  Users should be able to install the
>> Rcmdr package on macOS without having to install packages from source.
>>
>> Remember that Rcmdr users are typically students in basic statistics
>> courses, many of whom have limited software sophistication.
>> Unnecessarily complicating the installation is undesirable.  Of
>> course, if it's necessary to complicate the installation, one has to
>> live with that.
>>
>> I'll be interested to learn whether my suggestions solve the problem.
>> If not, I can add an instruction concerning the Xcode tools to the
>> Rcmdr installation notes for macOS.
>>
>> Thanks for your help,
>>   John
> [...]
>


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Tue Jan 12 19:12:51 2021
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Tue, 12 Jan 2021 19:12:51 +0100
Subject: [R] roxygen2 & markdown & math
In-Reply-To: <80bfb24e8f944cafa01c18f81b809bc9@UM-MAIL3214.unimaas.nl>
References: <8b2b6987-02aa-e128-e978-a440dd77c75b@wiwi.hu-berlin.de>
 <80bfb24e8f944cafa01c18f81b809bc9@UM-MAIL3214.unimaas.nl>
Message-ID: <4ab1b9f6-7b5c-185b-be3c-67bd9c5f6d02@wiwi.hu-berlin.de>

Hi,

thanks a lot, but maybe I was to vague.

I do not want to replace \eqn{...} and \deqn{...} by \mjseqn{...} and 
\mjsdeqn{...}. I would like to use $...$ and $$...$$ as in Rmarkdown to 
get something better readable.

Best Sigbert

Am 12.01.21 um 10:41 schrieb Viechtbauer, Wolfgang (SP):
> Dear Sigbert,
> 
> The mathjaxr package provides this:
> 
> https://cran.r-project.org/package=mathjaxr
> https://github.com/wviechtb/mathjaxr
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Sigbert
>> Klinke
>> Sent: Tuesday, 12 January, 2021 9:14
>> To: r-help at r-project.org
>> Subject: [R] roxygen2 & markdown & math
>>
>> Hi,
>>
>> I like to make my package documentation with markdown which is supported
>> since roxygen2 6.0.0 . I used a math expression like $t_n \appox N(0,1)$
>> which leads in the package check to "unknown macro '\approx'".
>>
>> I guess I get the warning because math is not supported in markdown. Are
>> there any plans to support something like $...$ or $$...$$? Or there are
>> general problems?
>>
>> Best Sigbert
>>
>> --
>> https://hu.berlin/sk
>> https://hu.berlin/mmstat
>> https://hu.berlin/mmstat-int
>> https://hu.berlin/mmstat-ar


-- 
https://hu.berlin/sk
https://hu.berlin/mmstat
https://hu.berlin/mmstat-int
https://hu.berlin/mmstat-ar


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jan 12 19:55:48 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 12 Jan 2021 10:55:48 -0800
Subject: [R] roxygen2 & markdown & math
In-Reply-To: <4ab1b9f6-7b5c-185b-be3c-67bd9c5f6d02@wiwi.hu-berlin.de>
References: <8b2b6987-02aa-e128-e978-a440dd77c75b@wiwi.hu-berlin.de>
 <80bfb24e8f944cafa01c18f81b809bc9@UM-MAIL3214.unimaas.nl>
 <4ab1b9f6-7b5c-185b-be3c-67bd9c5f6d02@wiwi.hu-berlin.de>
Message-ID: <E5029969-1850-4B2E-A42B-4D7A05D18640@dcn.davis.ca.us>

a) This discussion is on the wrong mailing list. Please go to R-package-devel if you want to continue this discussion.

b) You can do whatever you want in your vignettes, but R doc files are designed to work with multiple output devices, including text-only terminals, so syntax specific to certain environments is not allowed. If you want to contribute improvements to R doc capabilities, I am sure patches will be considered as long as you adhere to the existing multi-platform constraints.

On January 12, 2021 10:12:51 AM PST, Sigbert Klinke <sigbert at wiwi.hu-berlin.de> wrote:
>Hi,
>
>thanks a lot, but maybe I was to vague.
>
>I do not want to replace \eqn{...} and \deqn{...} by \mjseqn{...} and 
>\mjsdeqn{...}. I would like to use $...$ and $$...$$ as in Rmarkdown to
>
>get something better readable.
>
>Best Sigbert
>
>Am 12.01.21 um 10:41 schrieb Viechtbauer, Wolfgang (SP):
>> Dear Sigbert,
>> 
>> The mathjaxr package provides this:
>> 
>> https://cran.r-project.org/package=mathjaxr
>> https://github.com/wviechtb/mathjaxr
>> 
>> Best,
>> Wolfgang
>> 
>>> -----Original Message-----
>>> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of
>Sigbert
>>> Klinke
>>> Sent: Tuesday, 12 January, 2021 9:14
>>> To: r-help at r-project.org
>>> Subject: [R] roxygen2 & markdown & math
>>>
>>> Hi,
>>>
>>> I like to make my package documentation with markdown which is
>supported
>>> since roxygen2 6.0.0 . I used a math expression like $t_n \appox
>N(0,1)$
>>> which leads in the package check to "unknown macro '\approx'".
>>>
>>> I guess I get the warning because math is not supported in markdown.
>Are
>>> there any plans to support something like $...$ or $$...$$? Or there
>are
>>> general problems?
>>>
>>> Best Sigbert
>>>
>>> --
>>> https://hu.berlin/sk
>>> https://hu.berlin/mmstat
>>> https://hu.berlin/mmstat-int
>>> https://hu.berlin/mmstat-ar

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jan 12 20:32:26 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 12 Jan 2021 14:32:26 -0500
Subject: [R] roxygen2 & markdown & math
In-Reply-To: <4ab1b9f6-7b5c-185b-be3c-67bd9c5f6d02@wiwi.hu-berlin.de>
References: <8b2b6987-02aa-e128-e978-a440dd77c75b@wiwi.hu-berlin.de>
 <80bfb24e8f944cafa01c18f81b809bc9@UM-MAIL3214.unimaas.nl>
 <4ab1b9f6-7b5c-185b-be3c-67bd9c5f6d02@wiwi.hu-berlin.de>
Message-ID: <6578f8c5-4f67-ded9-0462-cef2987b6adc@gmail.com>

On 12/01/2021 1:12 p.m., Sigbert Klinke wrote:
> Hi,
> 
> thanks a lot, but maybe I was to vague.
> 
> I do not want to replace \eqn{...} and \deqn{...} by \mjseqn{...} and
> \mjsdeqn{...}. I would like to use $...$ and $$...$$ as in Rmarkdown to
> get something better readable.

I think that's a question/suggestion that would have to go to the 
roxygen2 team.  They're the ones who convert Markdown into the Rd input 
format.  Presumably they could convert $...$ into the appropriate macro 
using Mathjax or not, but I have no idea how difficult that would be.

Duncan Murdoch

> 
> Best Sigbert
> 
> Am 12.01.21 um 10:41 schrieb Viechtbauer, Wolfgang (SP):
>> Dear Sigbert,
>>
>> The mathjaxr package provides this:
>>
>> https://cran.r-project.org/package=mathjaxr
>> https://github.com/wviechtb/mathjaxr
>>
>> Best,
>> Wolfgang
>>
>>> -----Original Message-----
>>> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Sigbert
>>> Klinke
>>> Sent: Tuesday, 12 January, 2021 9:14
>>> To: r-help at r-project.org
>>> Subject: [R] roxygen2 & markdown & math
>>>
>>> Hi,
>>>
>>> I like to make my package documentation with markdown which is supported
>>> since roxygen2 6.0.0 . I used a math expression like $t_n \appox N(0,1)$
>>> which leads in the package check to "unknown macro '\approx'".
>>>
>>> I guess I get the warning because math is not supported in markdown. Are
>>> there any plans to support something like $...$ or $$...$$? Or there are
>>> general problems?
>>>
>>> Best Sigbert
>>>
>>> --
>>> https://hu.berlin/sk
>>> https://hu.berlin/mmstat
>>> https://hu.berlin/mmstat-int
>>> https://hu.berlin/mmstat-ar
> 
>


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Tue Jan 12 20:43:52 2021
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Tue, 12 Jan 2021 19:43:52 +0000 (UTC)
Subject: [R] package not available for R version...
References: <707556763.2294517.1610480632725.ref@mail.yahoo.com>
Message-ID: <707556763.2294517.1610480632725@mail.yahoo.com>

Dear R-experts,

I have tried to reach the maintainer of the rgam package. Until now, no response. 
Since I'm in a bit of a hurry, I try to reach you because as I try to install the rgam package using the command :

install.packages("rgam")

I get this warning message :

Warning message:

package ?rgam? is not available (for R version 3.6.3)

The strange thing is that rgam depends R (>= 3.0.2) , stats

How can I solve this problem ?

Best,


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jan 12 21:08:07 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 12 Jan 2021 15:08:07 -0500
Subject: [R] package not available for R version...
In-Reply-To: <707556763.2294517.1610480632725@mail.yahoo.com>
References: <707556763.2294517.1610480632725.ref@mail.yahoo.com>
 <707556763.2294517.1610480632725@mail.yahoo.com>
Message-ID: <3c26a82c-1fd5-b94c-6544-4938bf930a89@gmail.com>

On 12/01/2021 2:43 p.m., varin sacha via R-help wrote:
> Dear R-experts,
> 
> I have tried to reach the maintainer of the rgam package. Until now, no response.
> Since I'm in a bit of a hurry, I try to reach you because as I try to install the rgam package using the command :
> 
> install.packages("rgam")
> 
> I get this warning message :
> 
> Warning message:
> 
> package ?rgam? is not available (for R version 3.6.3)
> 
> The strange thing is that rgam depends R (>= 3.0.2) , stats
> 
> How can I solve this problem ?

That package is no longer listed on CRAN.  You can find some versions of 
it in https://cran.r-project.org/src/contrib/Archive, the most recent 
being from 2018.  I'd guess it doesn't pass all checks, so it was removed.

You could download the last version, and see if you can get it to work. 
  If you are really ambitious, you might be able to take it over as 
maintainer.

Or it might be easier to find a different package to do what you want to do.

Duncan Murdoch


From @purd|e@@ @end|ng |rom gm@||@com  Wed Jan 13 07:24:34 2021
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Wed, 13 Jan 2021 19:24:34 +1300
Subject: [R] package not available for R version...
In-Reply-To: <707556763.2294517.1610480632725@mail.yahoo.com>
References: <707556763.2294517.1610480632725.ref@mail.yahoo.com>
 <707556763.2294517.1610480632725@mail.yahoo.com>
Message-ID: <CAB8pepy=2JNSc29sEUfTxH6Dqe46pbEM3MZ5LmxuqZ0U3OTvkA@mail.gmail.com>

It's not clear from your post why you're trying to contact the maintainer.
But it gives the impression you're trying to contact the maintainer,
of an archived package, because you can't install the package.
It's not their responsibility to respond to these kinds of questions.

Also, I note the most obvious choice for GAM-based models in R, is
mgcv, which ships with R.
But there are other packages, if mgcv doesn't meet your needs.


On Wed, Jan 13, 2021 at 8:44 AM varin sacha via R-help
<r-help at r-project.org> wrote:
>
> Dear R-experts,
>
> I have tried to reach the maintainer of the rgam package. Until now, no response.
> Since I'm in a bit of a hurry, I try to reach you because as I try to install the rgam package using the command :
>
> install.packages("rgam")
>
> I get this warning message :
>
> Warning message:
>
> package ?rgam? is not available (for R version 3.6.3)
>
> The strange thing is that rgam depends R (>= 3.0.2) , stats
>
> How can I solve this problem ?
>
> Best,
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From b|oprogr@mmer @end|ng |rom gm@||@com  Wed Jan 13 07:41:18 2021
From: b|oprogr@mmer @end|ng |rom gm@||@com (Caitlin Gibbons)
Date: Tue, 12 Jan 2021 23:41:18 -0700
Subject: [R] package not available for R version...
In-Reply-To: <3c26a82c-1fd5-b94c-6544-4938bf930a89@gmail.com>
References: <3c26a82c-1fd5-b94c-6544-4938bf930a89@gmail.com>
Message-ID: <8B2F75C7-7046-440D-81A7-52943788E3C0@gmail.com>

Hi.

Can you upgrade your version of R? That might help. 

~Caitlin


> On Jan 12, 2021, at 1:08 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> ?On 12/01/2021 2:43 p.m., varin sacha via R-help wrote:
>> Dear R-experts,
>> I have tried to reach the maintainer of the rgam package. Until now, no response.
>> Since I'm in a bit of a hurry, I try to reach you because as I try to install the rgam package using the command :
>> install.packages("rgam")
>> I get this warning message :
>> Warning message:
>> package ?rgam? is not available (for R version 3.6.3)
>> The strange thing is that rgam depends R (>= 3.0.2) , stats
>> How can I solve this problem ?
> 
> That package is no longer listed on CRAN.  You can find some versions of it in https://cran.r-project.org/src/contrib/Archive, the most recent being from 2018.  I'd guess it doesn't pass all checks, so it was removed.
> 
> You could download the last version, and see if you can get it to work.  If you are really ambitious, you might be able to take it over as maintainer.
> 
> Or it might be easier to find a different package to do what you want to do.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tr@xp|@yer @end|ng |rom gm@||@com  Wed Jan 13 23:54:44 2021
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Wed, 13 Jan 2021 23:54:44 +0100
Subject: [R] log of small values in R
In-Reply-To: <CAGR+MS7n24pe05-XVPA2-of=43PzcS+NU5ANAqcbA-YRQ33ZUA@mail.gmail.com>
References: <CAGR+MS7n24pe05-XVPA2-of=43PzcS+NU5ANAqcbA-YRQ33ZUA@mail.gmail.com>
Message-ID: <CAGAA5bcSs+aUt-LBYtvJxfapoiZLfgQMNDB877WYCVxP9b1utg@mail.gmail.com>

On Mon, 11 Jan 2021 at 08:22, Shaami <nzshaam at gmail.com> wrote:
>
> Dear Friends        I am facing the problem of log values in R. The
> log(1-0.99999999999999999) is giving -Inf while log(1e-18) gives finite
> answer. Any suggestion to deal with this problem?  Thank you


This vignette has a lot of good information about log of small numbers.

vignette(package = "Rmpfr", "log1mexp-note")
https://cran.r-project.org/web/packages/Rmpfr/vignettes/log1mexp-note.pdf

Regards
Martin M. S. Pedersen

	[[alternative HTML version deleted]]


