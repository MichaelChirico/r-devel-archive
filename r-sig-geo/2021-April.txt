From @trende @end|ng |rom re@|c|e@rpo||t|c@@com  Thu Apr  1 17:01:09 2021
From: @trende @end|ng |rom re@|c|e@rpo||t|c@@com (Sean Trende)
Date: Thu, 1 Apr 2021 15:01:09 +0000
Subject: [R-sig-Geo] Identifying adjacent polygons within larger polygon
 groupings
Message-ID: <CH2PR20MB30456CD6F2ABB4807DE17BF1BE7B9@CH2PR20MB3045.namprd20.prod.outlook.com>

Hello,

I am using sf for the project below, but am open to non-sf solutions. 

Given an sf data.frame of polygons sorted into n contiguous groups (e.g., a column in the df identifies each polygon as a member of group (1, . . ., n), where within each group all polygons are neighbors), is there a simple way to identify all polygons in, say, Group 5 that are neighbors to polygons in, say, Group 8 (assuming groups 5 and 8 are neighbors)? 

E.g., if I have an sf data.frame of U.S. counties with a column that identifies the state in which each county is located, is there a way to identify all counties on the border between, say, Kansas and Nebraska? 

Thank you so much,

Sean


From edzer@pebe@m@ @end|ng |rom un|-muen@ter@de  Thu Apr  1 21:27:25 2021
From: edzer@pebe@m@ @end|ng |rom un|-muen@ter@de (Edzer Pebesma)
Date: Thu, 1 Apr 2021 21:27:25 +0200
Subject: [R-sig-Geo] Identifying adjacent polygons within larger polygon
 groupings
In-Reply-To: <CH2PR20MB30456CD6F2ABB4807DE17BF1BE7B9@CH2PR20MB3045.namprd20.prod.outlook.com>
References: <CH2PR20MB30456CD6F2ABB4807DE17BF1BE7B9@CH2PR20MB3045.namprd20.prod.outlook.com>
Message-ID: <bfb0c46d-f20c-d1d2-4854-b2b6920b3c73@uni-muenster.de>



On 01/04/2021 17:01, Sean Trende wrote:
> Hello,
> 
> I am using sf for the project below, but am open to non-sf solutions.
> 
> Given an sf data.frame of polygons sorted into n contiguous groups (e.g., a column in the df identifies each polygon as a member of group (1, . . ., n), where within each group all polygons are neighbors), is there a simple way to identify all polygons in, say, Group 5 that are neighbors to polygons in, say, Group 8 (assuming groups 5 and 8 are neighbors)?
> 
> E.g., if I have an sf data.frame of U.S. counties with a column that identifies the state in which each county is located, is there a way to identify all counties on the border between, say, Kansas and Nebraska?

Yes, look into using st_intersects (or st_touches) with x the counties 
of Kansas and y the counties of Nebraska.

What you get back is a list of length length(x), with integer vectors, 
the i-th vector containing the indexes of Nebraska counties 
touching/intersecting county i of Kansas.

> 
> Thank you so much,
> 
> Sean
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From @trende @end|ng |rom re@|c|e@rpo||t|c@@com  Thu Apr  1 21:59:37 2021
From: @trende @end|ng |rom re@|c|e@rpo||t|c@@com (Sean Trende)
Date: Thu, 1 Apr 2021 19:59:37 +0000
Subject: [R-sig-Geo] Identifying adjacent polygons within larger polygon
 groupings
In-Reply-To: <bfb0c46d-f20c-d1d2-4854-b2b6920b3c73@uni-muenster.de>
References: <CH2PR20MB30456CD6F2ABB4807DE17BF1BE7B9@CH2PR20MB3045.namprd20.prod.outlook.com>
 <bfb0c46d-f20c-d1d2-4854-b2b6920b3c73@uni-muenster.de>
Message-ID: <CH2PR20MB3045EA44548494DC43ACCDF0BE7B9@CH2PR20MB3045.namprd20.prod.outlook.com>

Thank you so much!

-----Original Message-----
From: R-sig-Geo <r-sig-geo-bounces at r-project.org> On Behalf Of Edzer Pebesma
Sent: Thursday, April 1, 2021 3:27 PM
To: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Identifying adjacent polygons within larger polygon groupings



On 01/04/2021 17:01, Sean Trende wrote:
> Hello,
> 
> I am using sf for the project below, but am open to non-sf solutions.
> 
> Given an sf data.frame of polygons sorted into n contiguous groups (e.g., a column in the df identifies each polygon as a member of group (1, . . ., n), where within each group all polygons are neighbors), is there a simple way to identify all polygons in, say, Group 5 that are neighbors to polygons in, say, Group 8 (assuming groups 5 and 8 are neighbors)?
> 
> E.g., if I have an sf data.frame of U.S. counties with a column that identifies the state in which each county is located, is there a way to identify all counties on the border between, say, Kansas and Nebraska?

Yes, look into using st_intersects (or st_touches) with x the counties of Kansas and y the counties of Nebraska.

What you get back is a list of length length(x), with integer vectors, the i-th vector containing the indexes of Nebraska counties touching/intersecting county i of Kansas.

> 
> Thank you so much,
> 
> Sean
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

--
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger@B|v@nd @end|ng |rom nhh@no  Fri Apr  2 13:01:24 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Fri, 2 Apr 2021 13:01:24 +0200
Subject: [R-sig-Geo] 
 R crashes when reading geopackage files with st_read
 (sf package) in macOS
In-Reply-To: <CABkCotTCZFgrU-tvj6c5Ss+mGzzsHZ625Jyu_QUP5TTURj7zKg@mail.gmail.com>
References: <CABkCotT4QgJSMvyAHVctLN+5qffEg-qxBrR1em+LRL5Ugh2mAg@mail.gmail.com>
 <49318902c1c849ab968076e2fa26c755@nhh.no>
 <CABkCotS-mqwjvWdBCBKMwYB0gPRRqRc40H2scN=bAYWyF_1+cQ@mail.gmail.com>
 <3437c0d-6676-f678-a399-be1bc8db7c0@reclus.nhh.no>
 <CABkCotTCZFgrU-tvj6c5Ss+mGzzsHZ625Jyu_QUP5TTURj7zKg@mail.gmail.com>
Message-ID: <af4d875-df2c-862b-a43e-1013275277f2@reclus.nhh.no>

On Wed, 31 Mar 2021, Manuel Sp?nola wrote:

> Thank you very much Roger.
>
> I can read shapefile without any problem with st_read.
>
> I think it works for both versions, but definitely is working with the
> binary version.

I really feel that you should remove all traces of your source installs of 
PROJ, GDAL and GEOS and anything they installed, and should rely only on 
CRAN binary packages. Do not accept any suggestions to install R packages 
from source. However, if other software that you use regularly needs PROJ, 
GDAL, GEOS, they may be present and may interfere with R packages. CRAN 
binary packages are built static, so do not need other dylibs, but have 
files under share/ in their own space that may conflict.

>
> How can I work around the problem with libsqlite3?

How was the version of libsqlite3 that GDAL links to installed? How would 
one

>
> How can I install the GDAL, PROJ and GEOS without being from source?
>

What do you need them for - if only for R packages, just don't install 
them.

A further alternative - consider installing from

https://r-spatial.r-universe.dev/ui#builds

These track the development versions of packages, but should be OK.

Please report back whether any of these can read (and write) GPKG.

Roger

> Best,
>
> Manuel
>
>
> El mi?, 31 mar 2021 a las 13:07, Roger Bivand (<Roger.Bivand at nhh.no>)
> escribi?:
>
>> On Wed, 31 Mar 2021, Manuel Sp?nola wrote:
>>
>>> Thank you very much Roger.
>>>
>>> I reinstalled the sf and rgdal packages from binaries and the problem
>>> persisted.
>>
>> This must be either because you did not remove all of the traces of the
>> previous attempts. If sf failed, then
>> https://cran.r-project.org/web/checks/check_results_sf.html
>> would show errors for MacOS.
>>
>>>
>>> To install GDAL, PROJ and GEOS i followed the instructions in the sf
>> github
>>> site.
>>
>> Please avoid installing the source package unless there is functionality
>> not provided by the CRAN binary.
>>
>>>
>>> Yes, the problem is with several geopackages files.  I see the problem
>> also
>>> with st_write when working trying to save a file in geopackage format.
>>>
>>
>> Which other drivers are affected - if only GPKG, then libsqlite3 is the
>> most likely culprit. However, unless you must have facilities only
>> available by source install, avoid source installs.
>>
>>> I can read the files without problem with readOGR.
>>>
>>
>> Installed as the CRAN binary or source?
>>
>> Roger
>>
>>> Manuel
>>>
>>> El mi?, 31 mar 2021 a las 10:26, Roger Bivand (<Roger.Bivand at nhh.no>)
>>> escribi?:
>>>
>>>> Please refer to the associated sf issue on github:
>>>> https://github.com/r-spatial/sf/issues/1606 for completeness. Please
>>>> confirm that you are not using the MacOS sf CRAN binary package, but
>> have
>>>> installed GDAL, PROJ and GEOS yourself. Please also confirm that you see
>>>> the same error with every GPKG file.
>>>>
>>>> --
>>>> Roger Bivand
>>>> Norwegian School of Economics
>>>> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
>>>> Roger.Bivand at nhh.no
>>>>
>>>>
>>>> ________________________________________
>>>> Fra: R-sig-Geo <r-sig-geo-bounces at r-project.org> p? vegne av Manuel
>>>> Sp?nola <mspinola10 at gmail.com>
>>>> Sendt: onsdag 31. mars 2021 17.55
>>>> Til: r-sig-geo
>>>> Emne: [R-sig-Geo] R crashes when reading geopackage files with st_read
>> (sf
>>>> package) in macOS
>>>>
>>>> Dear list members,
>>>>
>>>> When reading geopackages files with st_read (sf package) RStudio
>> crashes (R
>>>> session aborted) in macOS.  Any suggestions to fix this problem?
>>>>
>>>> Should I ask this question to the macOS group (r-sig-mac)?
>>>>
>>>> library(sf)
>>>> Linking to GEOS 3.9.0, GDAL 3.2.1, PROJ 7.2.1
>>>>
>>>>
>>>> library(spData)
>>>>
>>>>
>>>> world = st_read(system.file("shapes/world.gpkg", package = "spData"))
>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> *Manuel Sp?nola, Ph.D.*
>>>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
>>>> Universidad Nacional
>>>> Apartado 1350-3000
>>>> Heredia
>>>> COSTA RICA
>>>> mspinola at una.cr <mspinola at una.ac.cr>
>>>> mspinola10 at gmail.com
>>>> Tel?fono: (506) 8706 - 4662
>>>> Personal website: Lobito de r?o <
>>>> https://sites.google.com/site/lobitoderio/>
>>>> Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
>> e-mail: Roger.Bivand at nhh.no
>> https://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From m@@@|mo@bre@@@n @end|ng |rom @rp@@veneto@|t  Mon Apr  5 20:39:00 2021
From: m@@@|mo@bre@@@n @end|ng |rom @rp@@veneto@|t (massimo bressan)
Date: Mon, 5 Apr 2021 20:39:00 +0200
Subject: [R-sig-Geo] overlay ggplot contour to base ggmap
Message-ID: <CAFZj84-CUYE3L4So33W8Q+8RxXSuz9rqj5euwuuu0V9SJDzhHw@mail.gmail.com>

please consider the following reproducible example

# set the origin of the grid
# in cartesian coordinates (epsg 32632)
xmin<-742966
ymin<-5037923

# set x and y axis
x<-seq(xmin, xmin+25*39, by=25)
y<-seq(ymin, ymin+25*39, by =25)

# define a 40 x 40 grid
mygrid<-expand.grid(x = x, y = y)

# set the z value to be interpolated by the contour
set.seed(123)
mygrid$z<- rnorm(nrow(mygrid))

library(tidyverse)

# plot of contour is fine
ggplot(data=mygrid, aes(x=x,y=y,z=z))+
  geom_contour()

library(ggspatial)

# transform coordinates to wgs84 4326
# (one of the many possible other ways to do it)
mygrid_4326<-xy_transform(mygrid$x, mygrid$y, from = 32632, to = 4326)

# create new grid with lon and lat
# (geographical coordinates espg 4326)
mygrid_4326<-mygrid_4326%>%
  mutate(z=mygrid$z)

# define the bounding box
my_bb<-c(min(mygrid_4326$x), min(mygrid_4326$y),
         max(mygrid_4326$x), max(mygrid_4326$y))
names(my_bb)<-c('left', 'bottom', 'right', 'top')

library(ggmap)

# get the background map (by a free provider)
mymap<-get_stamenmap(bbox = c(left = my_bb[['left']],
                              bottom = my_bb[['bottom']],
                              right = my_bb[['right']],
                              top = my_bb[['top']]),
                     zoom = 15,
                     maptype = 'toner-lite')

# the plot of the map is fine
mymap%>%
  ggmap()

# the overlay of the contour is failing
mymap%>%
  ggmap()+
  geom_contour(data=mygrid_4326, mapping=aes(x = x, y = y, z = z))
  #stat_contour(data=mygrid_4326, mapping=aes(x = x, y = y, z = z))

#Warning messages:
#1: stat_contour(): Zero contours were generated
#2: In min(x) : no non-missing arguments to min; returning Inf
#3: In max(x) : no non-missing arguments to max; returning -Inf

now the problem is the overlay of the contour made with ggplot to the base
map made with ggmap

any help fo that?

thanks

	[[alternative HTML version deleted]]


From erodo|||| @end|ng |rom u||@edu  Mon Apr  5 21:47:44 2021
From: erodo|||| @end|ng |rom u||@edu (Rodofili, Esteban Nicolas)
Date: Mon, 5 Apr 2021 19:47:44 +0000
Subject: [R-sig-Geo] Geolocating image frames automatically from an already
 georeferenced image
Message-ID: <BN6PR22MB0132A7487EE037F8DC18B1E4A6779@BN6PR22MB0132.namprd22.prod.outlook.com>

Hi! I have drone footage on a still position I want to analyze as separate image frames in Google Earth Engine. Nothing was geolocated. I georeferenced an image frame with ground control points in Global Mapper. I am wondering if in R I could take the remaining image frames and automatically geolocate them using the georeferenced frame, without going one by one or using ground control points. The video is always still in the same position so what I need is to give the remaining image frames the same geolocation as the one I georeferenced with the ground control points. If not possible in R, I welcome other suggestions. Thanks.

Esteban N. Rodofili
Ph.D. Student - Interdisciplinary Ecology Program, SNRE
Lic. in Biology - Mgtr. in Public Policy
Marine Geomatics Lab
University of Florida
UF Climate Action Plan - Transportation Working Group
352-284-6828
erodofili at ufl.edu
https://www.thelecourslab.org/

I stand in solidarity with Graduate Assistants United and demand the University of Florida:
1.      Follow through with its agreement to pay certain fees on behalf of GAs as outlined in Article 10.6 of our Collective Bargaining Agreement.
2.      Discontinue all business relationships with Aramark due to their use of prison labor, and directly consult with the Food Justice League, Gator NAACP, Dream Defenders, and allied groups on the upcoming food service vendor contract to ensure racial equity.
3.      Immediately reverse its plan to demolish the Maguire and UVS Graduate Family Housing complexes.
4.      Immediately revoke its new furlough policy.



	[[alternative HTML version deleted]]


From m@|@ttu@d@87 @end|ng |rom gm@||@com  Tue Apr  6 14:49:40 2021
From: m@|@ttu@d@87 @end|ng |rom gm@||@com (Matteo Lattuada)
Date: Tue, 6 Apr 2021 14:49:40 +0200
Subject: [R-sig-Geo] .raw format
Message-ID: <CAFKSRLiBNLD40dQ8TUupzd51-xJ0E_eNWp=O_GFD2wjvZORFwg@mail.gmail.com>

Hi everyone,

there is an extended workflow/tutorial to work on .raw files?
I just found this thread:
https://community.rstudio.com/t/solution-to-reading-raw-images-into-r/45435/5
Thank you.

Best,

-- 
Matteo Lattuada, PhD

Technische Universit?t Braunschweig
Institute of Geoecology
Department Landscape Ecology and Environmental Systems Analysis
Langer Kamp 19c, D-38106 Braunschweig

Phone: +49 (0) 15 78 15 055 54
E-mail: m.lattuada87 at gmail.com
LinkedIn: Matteo Lattuada <https://www.linkedin.com/in/matteolattuada1987/>

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Sun Apr 11 16:47:22 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sun, 11 Apr 2021 16:47:22 +0200
Subject: [R-sig-Geo] WinGRASS/rgrass7/rgdal issue
Message-ID: <341bdd4e-3990-f134-49ea-3ad66b21221@reclus.nhh.no>

The issue raised at https://github.com/rsbivand/rgrass7/issues/27 is 
difficult to address. On Windows, using the latest CRAN binary rgdal and 
rgrass7 for reading the WinGRASS 7.8.5 location projection, g.proj looks 
at PROJ_LIB, which is that defined when rgdal was loaded.

The CRAN Windows binary rgdal package was built with the PROJ version 
bundling EPSG 10.008, but WinGRASS 7.8.5 has EPSG 9.8.6. Because the 
tables and field names changed EPSG 9 -> 10, WinGRASS g.proj fails to read 
PROJ proj.db.

If you see this, remotes::install.github("rsbivand/rgrass7") will help, 
but it does not resolve the problem of RGDAL overwriting the PROJ_LIB 
environment variable.

Attempts will continue to find ways to leave the environment variable used 
by g.proj alone in rgdal, as this ESPG 9/10 incompatibility will affect 
interactions between builds of rgdal binaries used with other software 
built using proj.db based on EPSG on the "other" side of the 
incomatibility.

Roger

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From p@tr|ck@g|r@udoux @end|ng |rom un|v-|comte@|r  Tue Apr 13 08:35:02 2021
From: p@tr|ck@g|r@udoux @end|ng |rom un|v-|comte@|r (Patrick Giraudoux)
Date: Tue, 13 Apr 2021 08:35:02 +0200
Subject: [R-sig-Geo] reading geopackage gpkg with readOGR
Message-ID: <8a6dc330-967f-71ae-5138-db734386d3db@univ-fcomte.fr>

Dear listers,

I did not find the way to open a geopackage using rgdal::readOGR.

The package name is 'trspixNarati_alt_UTM44.gpkg' (with two companion 
files: 'trspixNarati_alt_UTM44.gpkg-shm' and 
'trspixNarati_alt_UTM44.gpkg-wal') stored in a folder 'Shapes'

The corresponding object should be a SpatialPointsDataFrame.

I have tried several combinations (a bit blind) with

readOGR("./Shapes/trspixNaratiUTM44_alt_UTM44.gpkg")

readOGR("./Shapes/","trspixNaratiUTM44_alt_UTM44.gpkg")

readOGR("./Shapes/","trspixNaratiUTM44_alt_UTM44")

with no success...

This link https://jsta.github.io/2016/07/14/geopackage-r.html gives 
indications on the how to to it, but supposes that one knows a layer 
name (which is not my case)

Any idea about the syntax of this driver ?

Best,

Patrick


	[[alternative HTML version deleted]]


From b|@|ev||@t @end|ng |rom gm@||@com  Tue Apr 13 08:57:49 2021
From: b|@|ev||@t @end|ng |rom gm@||@com (=?UTF-8?Q?Bede-Fazekas_=c3=81kos?=)
Date: Tue, 13 Apr 2021 08:57:49 +0200
Subject: [R-sig-Geo] reading geopackage gpkg with readOGR
In-Reply-To: <8a6dc330-967f-71ae-5138-db734386d3db@univ-fcomte.fr>
References: <8a6dc330-967f-71ae-5138-db734386d3db@univ-fcomte.fr>
Message-ID: <c7d64267-d194-a210-dc70-d2ee27431b92@gmail.com>

Dear Patrick,
please take a look at sf::st_layers(dsn), this gives you the name of, 
and basic information on, the layers found in the specific file/folder 
(dsn).
HTH,
?kos Bede-Fazekas

2021.04.13. 8:35 keltez?ssel, Patrick Giraudoux ?rta:
> Dear listers,
>
> I did not find the way to open a geopackage using rgdal::readOGR.
>
> The package name is 'trspixNarati_alt_UTM44.gpkg' (with two companion
> files: 'trspixNarati_alt_UTM44.gpkg-shm' and
> 'trspixNarati_alt_UTM44.gpkg-wal') stored in a folder 'Shapes'
>
> The corresponding object should be a SpatialPointsDataFrame.
>
> I have tried several combinations (a bit blind) with
>
> readOGR("./Shapes/trspixNaratiUTM44_alt_UTM44.gpkg")
>
> readOGR("./Shapes/","trspixNaratiUTM44_alt_UTM44.gpkg")
>
> readOGR("./Shapes/","trspixNaratiUTM44_alt_UTM44")
>
> with no success...
>
> This link https://jsta.github.io/2016/07/14/geopackage-r.html gives
> indications on the how to to it, but supposes that one knows a layer
> name (which is not my case)
>
> Any idea about the syntax of this driver ?
>
> Best,
>
> Patrick
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Apr 13 12:55:31 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 13 Apr 2021 12:55:31 +0200
Subject: [R-sig-Geo] reading geopackage gpkg with readOGR
In-Reply-To: <c7d64267-d194-a210-dc70-d2ee27431b92@gmail.com>
References: <8a6dc330-967f-71ae-5138-db734386d3db@univ-fcomte.fr>
 <c7d64267-d194-a210-dc70-d2ee27431b92@gmail.com>
Message-ID: <d9669997-172-79fa-39aa-c726dd28c640@reclus.nhh.no>

On Tue, 13 Apr 2021, Bede-Fazekas ?kos wrote:

> Dear Patrick,

In rgdal, the available drivers are found with ogrDrivers(), which  you 
may check. Which platform is  this and if a source install, how was GDAL 
installed? Layers in vector data sources (dsn) are found with

ogrListLayers(dsn)

where dsn is the (path to and) GPKG name. 
ogrListLayers("./Shapes/trspixNaratiUTM44_alt_UTM44.gpkg") may show 
several layers (but should choose the first by default when reading). are 
there any other messages?

Roger

> please take a look at sf::st_layers(dsn), this gives you the name of, and 
> basic information on, the layers found in the specific file/folder (dsn).
> HTH,
> ?kos Bede-Fazekas
>
> 2021.04.13. 8:35 keltez?ssel, Patrick Giraudoux ?rta:
>>  Dear listers,
>>
>>  I did not find the way to open a geopackage using rgdal::readOGR.
>>
>>  The package name is 'trspixNarati_alt_UTM44.gpkg' (with two companion
>>  files: 'trspixNarati_alt_UTM44.gpkg-shm' and
>>  'trspixNarati_alt_UTM44.gpkg-wal') stored in a folder 'Shapes'
>>
>>  The corresponding object should be a SpatialPointsDataFrame.
>>
>>  I have tried several combinations (a bit blind) with
>>
>>  readOGR("./Shapes/trspixNaratiUTM44_alt_UTM44.gpkg")
>>
>>  readOGR("./Shapes/","trspixNaratiUTM44_alt_UTM44.gpkg")
>>
>>  readOGR("./Shapes/","trspixNaratiUTM44_alt_UTM44")
>>
>>  with no success...
>>
>>  This link https://jsta.github.io/2016/07/14/geopackage-r.html gives
>>  indications on the how to to it, but supposes that one knows a layer
>>  name (which is not my case)
>>
>>  Any idea about the syntax of this driver ?
>>
>>  Best,
>>
>>  Patrick
>> 
>>
>>   [[alternative HTML version deleted]]
>>
>>  _______________________________________________
>>  R-sig-Geo mailing list
>>  R-sig-Geo at r-project.org
>>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From p@tr|ck@g|r@udoux @end|ng |rom un|v-|comte@|r  Wed Apr 14 07:33:36 2021
From: p@tr|ck@g|r@udoux @end|ng |rom un|v-|comte@|r (Patrick Giraudoux)
Date: Wed, 14 Apr 2021 07:33:36 +0200
Subject: [R-sig-Geo] reading geopackage gpkg with readOGR
In-Reply-To: <8a6dc330-967f-71ae-5138-db734386d3db@univ-fcomte.fr>
References: <8a6dc330-967f-71ae-5138-db734386d3db@univ-fcomte.fr>
Message-ID: <2df2efeb-5e81-8c6c-0ef3-b9352704aa78@univ-fcomte.fr>

Apologize to answer to myself, but this morning I had advise from a 
colleague who confirmed that *.gpkg files can be read straightfully with

st_read("trspixNarati_alt_UTM44.gpkg")

readOGR("trspixNarati_alt_UTM44.gpkg")

Trying again this morning, indeed, the file can be read as:

readOGR("trspixNarati_alt_UTM44.gpkg") # package in the working directory
readOGR("./Shapes/trspixNarati_alt_UTM44.gpkg") # package in the 
'Shapes' folder

Quite incomprehensible why it did not work yesterday...


Le 13/04/2021 ? 08:35, Patrick Giraudoux a ?crit?:
>
> Dear listers,
>
> I did not find the way to open a geopackage using rgdal::readOGR.
>
> The package name is 'trspixNarati_alt_UTM44.gpkg' (with two companion 
> files: 'trspixNarati_alt_UTM44.gpkg-shm' and 
> 'trspixNarati_alt_UTM44.gpkg-wal') stored in a folder 'Shapes'
>
> The corresponding object should be a SpatialPointsDataFrame.
>
> I have tried several combinations (a bit blind) with
>
> readOGR("./Shapes/trspixNaratiUTM44_alt_UTM44.gpkg")
>
> readOGR("./Shapes/","trspixNaratiUTM44_alt_UTM44.gpkg")
>
> readOGR("./Shapes/","trspixNaratiUTM44_alt_UTM44")
>
> with no success...
>
> This link https://jsta.github.io/2016/07/14/geopackage-r.html gives 
> indications on the how to to it, but supposes that one knows a layer 
> name (which is not my case)
>
> Any idea about the syntax of this driver ?
>
> Best,
>
> Patrick
>


	[[alternative HTML version deleted]]


From @ry@n19 @end|ng |rom jcu@edu  Sat Apr 17 20:48:33 2021
From: @ry@n19 @end|ng |rom jcu@edu (Ryan, Alex)
Date: Sat, 17 Apr 2021 13:48:33 -0500
Subject: [R-sig-Geo] sarorderedprobit panel data
Message-ID: <CAJ8jM39tt02W8Br3h4ngLnqapKWjRA+wech-KO-OCdNWqeLudQ@mail.gmail.com>

I am attempting to use the sarorderedprobit function (within the
"spatialprobit" package) to perform a SAR Ordered Probit estimation using
panel data.

I have imported my spatial weight matrix (representing the 50 states of the
US) using the following script:

Weight_GAL<- read.gal(File, override.id=TRUE)
Weight_List<nb2listw(Weight_GAL,style="W", zero.policy=TRUE)
W<-listw2mat(Weight_List)

which successfully imports the 50x50 sparse matrix.

The following sarorderedprobit is run:

sarorderedprobit(formula, W=W, showProgress=TRUE)

When using cross-sectional data with 50 observations, the script
successfully estimates the sarorderedprobit model. However, when panel data
is used with 3 years (i.e., 150 observations), the script returns the
following error:

"Error: Matrices must have same dimensions in .Arith.Csparse(e1,e2,
.Generic, class. = dgCMatrix")".

The issue here seems to be related to the use of a 50x50 weight matrix with
150 observations. Unfortunately, I have not found any references to using
the sarorderedprobit function with panel data. Can anyone provide guidance
on whether the sarorderedprobit function supports estimation using panel or
timeseries datasets?

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Sun Apr 18 18:51:56 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sun, 18 Apr 2021 18:51:56 +0200
Subject: [R-sig-Geo] sarorderedprobit panel data
In-Reply-To: <CAJ8jM39tt02W8Br3h4ngLnqapKWjRA+wech-KO-OCdNWqeLudQ@mail.gmail.com>
References: <CAJ8jM39tt02W8Br3h4ngLnqapKWjRA+wech-KO-OCdNWqeLudQ@mail.gmail.com>
Message-ID: <119f4ef4-918d-a990-f331-e4042660a5@reclus.nhh.no>

On Sat, 17 Apr 2021, Ryan, Alex via R-sig-Geo wrote:

> I am attempting to use the sarorderedprobit function (within the
> "spatialprobit" package) to perform a SAR Ordered Probit estimation using
> panel data.
>
> I have imported my spatial weight matrix (representing the 50 states of the
> US) using the following script:
>
> Weight_GAL<- read.gal(File, override.id=TRUE)
> Weight_List<nb2listw(Weight_GAL,style="W", zero.policy=TRUE)
> W<-listw2mat(Weight_List)
>
> which successfully imports the 50x50 sparse matrix.
>
> The following sarorderedprobit is run:
>
> sarorderedprobit(formula, W=W, showProgress=TRUE)
>
> When using cross-sectional data with 50 observations, the script
> successfully estimates the sarorderedprobit model. However, when panel data
> is used with 3 years (i.e., 150 observations), the script returns the
> following error:
>
> "Error: Matrices must have same dimensions in .Arith.Csparse(e1,e2,
> .Generic, class. = dgCMatrix")".
>
> The issue here seems to be related to the use of a 50x50 weight matrix with
> 150 observations. Unfortunately, I have not found any references to using
> the sarorderedprobit function with panel data. Can anyone provide guidance
> on whether the sarorderedprobit function supports estimation using panel or
> timeseries datasets?

Perhaps use a Kronecker product to provide W with three block-diagonal 
cross sectional spatial weights matrices (assuming that your data is 
ordered with time varying slower than space?). Could you work up a data 
set such as those used in splm and add an ordinal response?

Roger

>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From @ry@n19 @end|ng |rom jcu@edu  Mon Apr 19 01:59:45 2021
From: @ry@n19 @end|ng |rom jcu@edu (Ryan, Alex)
Date: Sun, 18 Apr 2021 18:59:45 -0500
Subject: [R-sig-Geo] sarorderedprobit panel data
In-Reply-To: <119f4ef4-918d-a990-f331-e4042660a5@reclus.nhh.no>
References: <CAJ8jM39tt02W8Br3h4ngLnqapKWjRA+wech-KO-OCdNWqeLudQ@mail.gmail.com>
 <119f4ef4-918d-a990-f331-e4042660a5@reclus.nhh.no>
Message-ID: <CAJ8jM38Z=Apk7i6AJ04oYUF2kVi8i7qzAMDbMXjaiBhiUSvbHA@mail.gmail.com>

Hi Roger,

Thank you for the recommendation, I see now that you have previously shared
similar advice on the r-sig-geo forum. The kronecker calculation worked
well and resolved the error message previously shared. Regarding your
recommendation to include an ordinal response: is your recommendation to
include explanatory variables representing the time period for each
observation in the model? I do not see similar variables included in the
examples reported by the splm documentation as you have referenced.

On Sun, Apr 18, 2021 at 11:52 AM Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Sat, 17 Apr 2021, Ryan, Alex via R-sig-Geo wrote:
>
> > I am attempting to use the sarorderedprobit function (within the
> > "spatialprobit" package) to perform a SAR Ordered Probit estimation using
> > panel data.
> >
> > I have imported my spatial weight matrix (representing the 50 states of
> the
> > US) using the following script:
> >
> > Weight_GAL<- read.gal(File, override.id=TRUE)
> > Weight_List<nb2listw(Weight_GAL,style="W", zero.policy=TRUE)
> > W<-listw2mat(Weight_List)
> >
> > which successfully imports the 50x50 sparse matrix.
> >
> > The following sarorderedprobit is run:
> >
> > sarorderedprobit(formula, W=W, showProgress=TRUE)
> >
> > When using cross-sectional data with 50 observations, the script
> > successfully estimates the sarorderedprobit model. However, when panel
> data
> > is used with 3 years (i.e., 150 observations), the script returns the
> > following error:
> >
> > "Error: Matrices must have same dimensions in .Arith.Csparse(e1,e2,
> > .Generic, class. = dgCMatrix")".
> >
> > The issue here seems to be related to the use of a 50x50 weight matrix
> with
> > 150 observations. Unfortunately, I have not found any references to using
> > the sarorderedprobit function with panel data. Can anyone provide
> guidance
> > on whether the sarorderedprobit function supports estimation using panel
> or
> > timeseries datasets?
>
> Perhaps use a Kronecker product to provide W with three block-diagonal
> cross sectional spatial weights matrices (assuming that your data is
> ordered with time varying slower than space?). Could you work up a data
> set such as those used in splm and add an ordinal response?
>
> Roger
>
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Roger Bivand
> Emeritus Professor
> Department of Economics, Norwegian School of Economics,
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
> e-mail: Roger.Bivand at nhh.no
> https://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Mon Apr 19 11:51:42 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Mon, 19 Apr 2021 11:51:42 +0200
Subject: [R-sig-Geo] sarorderedprobit panel data
In-Reply-To: <CAJ8jM38Z=Apk7i6AJ04oYUF2kVi8i7qzAMDbMXjaiBhiUSvbHA@mail.gmail.com>
References: <CAJ8jM39tt02W8Br3h4ngLnqapKWjRA+wech-KO-OCdNWqeLudQ@mail.gmail.com>
 <119f4ef4-918d-a990-f331-e4042660a5@reclus.nhh.no>
 <CAJ8jM38Z=Apk7i6AJ04oYUF2kVi8i7qzAMDbMXjaiBhiUSvbHA@mail.gmail.com>
Message-ID: <d1270a2-36f2-f813-e65e-b0d217c6467f@reclus.nhh.no>

On Mon, 19 Apr 2021, Ryan, Alex wrote:

> Hi Roger,
>
> Thank you for the recommendation, I see now that you have previously shared
> similar advice on the r-sig-geo forum. The kronecker calculation worked
> well and resolved the error message previously shared.

OK, so this fits a pooled model, so like MASS::polr() for the aspatial 
case, I think.

> Regarding your recommendation to include an ordinal response: is your 
> recommendation to include explanatory variables representing the time 
> period for each observation in the model? I do not see similar variables 
> included in the examples reported by the splm documentation as you have 
> referenced.

The idea was to take a data set used in the plm or splm packages, which 
only handle Gaussian responses by design, fit that example in splm as 
pooled, then convert the response to ordinal and fit in spatialprobit. If 
the outcomes are similar, you then have a framework to try to accommodate 
time fixed effects (try first FE in splm with Gaussian response, then 
manual FE with a year factor (year dummies) - which should be similar (do 
read the plm JSS article then the splm JSS article which builds on the 
former).

I might also look at other packages, like bayesm. I think that you need to 
have a strong micro model supporting the direct inclusion of the spatially 
lagged ordinal response; if you do not, a mixed effects ordinal probit 
regression with an MRF random effect for space and a temporal RE (not 
econometric, see the plm JSS article for the translation to statistics, 
but this worries referees, I'm afraid) may be the best way of extracting 
the structure in the data.

Roger

>
> On Sun, Apr 18, 2021 at 11:52 AM Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Sat, 17 Apr 2021, Ryan, Alex via R-sig-Geo wrote:
>>
>>> I am attempting to use the sarorderedprobit function (within the
>>> "spatialprobit" package) to perform a SAR Ordered Probit estimation using
>>> panel data.
>>>
>>> I have imported my spatial weight matrix (representing the 50 states of
>> the
>>> US) using the following script:
>>>
>>> Weight_GAL<- read.gal(File, override.id=TRUE)
>>> Weight_List<nb2listw(Weight_GAL,style="W", zero.policy=TRUE)
>>> W<-listw2mat(Weight_List)
>>>
>>> which successfully imports the 50x50 sparse matrix.
>>>
>>> The following sarorderedprobit is run:
>>>
>>> sarorderedprobit(formula, W=W, showProgress=TRUE)
>>>
>>> When using cross-sectional data with 50 observations, the script
>>> successfully estimates the sarorderedprobit model. However, when panel
>> data
>>> is used with 3 years (i.e., 150 observations), the script returns the
>>> following error:
>>>
>>> "Error: Matrices must have same dimensions in .Arith.Csparse(e1,e2,
>>> .Generic, class. = dgCMatrix")".
>>>
>>> The issue here seems to be related to the use of a 50x50 weight matrix
>> with
>>> 150 observations. Unfortunately, I have not found any references to using
>>> the sarorderedprobit function with panel data. Can anyone provide
>> guidance
>>> on whether the sarorderedprobit function supports estimation using panel
>> or
>>> timeseries datasets?
>>
>> Perhaps use a Kronecker product to provide W with three block-diagonal
>> cross sectional spatial weights matrices (assuming that your data is
>> ordered with time varying slower than space?). Could you work up a data
>> set such as those used in splm and add an ordinal response?
>>
>> Roger
>>
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Emeritus Professor
>> Department of Economics, Norwegian School of Economics,
>> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
>> e-mail: Roger.Bivand at nhh.no
>> https://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From Robert@Pt@cn|k @end|ng |rom wc|@@c@@t  Wed Apr 21 11:44:26 2021
From: Robert@Pt@cn|k @end|ng |rom wc|@@c@@t (Robert Ptacnik)
Date: Wed, 21 Apr 2021 09:44:26 +0000
Subject: [R-sig-Geo] partition residuals in a constrained ordination
Message-ID: <ecf120f78c5e4745b45d7111e7b11c31@wcl.ac.at>

Hei,

is there an approved way how to partition variance into explained vs unexplained at the level of sites?

After performing a constrained ordination (CCA or dbRDA) I want to check if explained variance varies in a systematic way along given gradient, in a univariate analysis, like plotting the absolute residuals of a regression analysis along a given gradient.

I've tried using rstandard in vegan, but am not sure this allows to partition like in a lm (TSS = RSS + ESS).

thanks for suggestions

Robert

	[[alternative HTML version deleted]]


From tom@heng| @end|ng |rom gm@||@com  Wed Apr 28 19:12:58 2021
From: tom@heng| @end|ng |rom gm@||@com (Tomislav Hengl)
Date: Wed, 28 Apr 2021 19:12:58 +0200
Subject: [R-sig-Geo] Error in CRS("EPSG:4326") : no arguments in
 initialization list
Message-ID: <60e2ac6d-664f-44dc-972f-ab82fce797c7@gmail.com>


Hi Roger et al,

We are experiencing some problems with committing plotKML to CRAN. 
Automated check reports:

"Error in CRS("EPSG:4326") : no arguments in initialization list"

See:

https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/plotKML-00install.html
https://github.com/Envirometrix/plotKML/issues/5

I assume it has to do with the proj / rgdal versions? Should I switch to 
using again CRS("+init=epsg:4326")? Seems that different operating 
systems now have different issues.

On R-forge plotKML installs without problems:

https://r-forge.r-project.org/R/?group_id=1106


From Roger@B|v@nd @end|ng |rom nhh@no  Wed Apr 28 20:48:01 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Wed, 28 Apr 2021 20:48:01 +0200
Subject: [R-sig-Geo] Error in CRS("EPSG:4326") : no arguments in
 initialization list
In-Reply-To: <60e2ac6d-664f-44dc-972f-ab82fce797c7@gmail.com>
References: <60e2ac6d-664f-44dc-972f-ab82fce797c7@gmail.com>
Message-ID: <84b9773a-7264-4e6b-9689-cc9d4cc7f2a2@reclus.nhh.no>

Tom,

Your package code itself runs lots of stuff in R/AAA.R that it doesn't 
need to. Here you could simply put the output string of:

> rgdal::CRSargs(sp::CRS("EPSG:4326"))
[1] "+proj=longlat +datum=WGS84 +no_defs"

instead of going out to sp/rgdal/PROJ. In this case, sp and rgdal 
shouldn't let you do this on a system running PROJ 5.2.0 (and I'll look at 
that), but your work-around is the bare Proj4 string, which is the same in 
any case. The error message is from PROJ, returned from rgdal to sp. If 
you want to condition on PROJ version, you can do that, but instantiating 
CRS is costly, and here lazy-loading is trying to save time by 
pre-filling the value.

If this isn't enough, please let me know and I'll install the same PROJ 
and GDAL versions as used for Solaris checks locally, and try to resolve 
the problem in those packages. That will however take time. I'm assuming 
that sp and rgdal are the current CRAN versions 1.4-5 and 1.5-23 on 
Solaris, both of those pass on that platform.

Hope this helps,

Roger

On Wed, 28 Apr 2021, Tomislav Hengl wrote:

>
> Hi Roger et al,
>
> We are experiencing some problems with committing plotKML to CRAN. Automated 
> check reports:
>
> "Error in CRS("EPSG:4326") : no arguments in initialization list"
>
> See:
>
> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/plotKML-00install.html
> https://github.com/Envirometrix/plotKML/issues/5
>
> I assume it has to do with the proj / rgdal versions? Should I switch to 
> using again CRS("+init=epsg:4326")? Seems that different operating systems 
> now have different issues.
>
> On R-forge plotKML installs without problems:
>
> https://r-forge.r-project.org/R/?group_id=1106
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From tom@heng| @end|ng |rom gm@||@com  Thu Apr 29 13:30:25 2021
From: tom@heng| @end|ng |rom gm@||@com (Tomislav Hengl)
Date: Thu, 29 Apr 2021 13:30:25 +0200
Subject: [R-sig-Geo] Error in CRS("EPSG:4326") : no arguments in
 initialization list
In-Reply-To: <84b9773a-7264-4e6b-9689-cc9d4cc7f2a2@reclus.nhh.no>
References: <60e2ac6d-664f-44dc-972f-ab82fce797c7@gmail.com>
 <84b9773a-7264-4e6b-9689-cc9d4cc7f2a2@reclus.nhh.no>
Message-ID: <2312f182-19a2-e2d0-76f5-c367d3a62521@gmail.com>


Thanks Roger. If I understand correctly, I should simply replace 
'CRS("EPSG:4326")' with 'CRS("+proj=longlat +datum=WGS84 +no_defs")'. 
Otherwise the EPSG codes should work in R with any version correct?


On 4/28/21 8:48 PM, Roger Bivand wrote:
> Tom,
> 
> Your package code itself runs lots of stuff in R/AAA.R that it doesn't 
> need to. Here you could simply put the output string of:
> 
>> rgdal::CRSargs(sp::CRS("EPSG:4326"))
> [1] "+proj=longlat +datum=WGS84 +no_defs"
> 
> instead of going out to sp/rgdal/PROJ. In this case, sp and rgdal 
> shouldn't let you do this on a system running PROJ 5.2.0 (and I'll look 
> at that), but your work-around is the bare Proj4 string, which is the 
> same in any case. The error message is from PROJ, returned from rgdal to 
> sp. If you want to condition on PROJ version, you can do that, but 
> instantiating CRS is costly, and here lazy-loading is trying to save 
> time by pre-filling the value.
> 
> If this isn't enough, please let me know and I'll install the same PROJ 
> and GDAL versions as used for Solaris checks locally, and try to resolve 
> the problem in those packages. That will however take time. I'm assuming 
> that sp and rgdal are the current CRAN versions 1.4-5 and 1.5-23 on 
> Solaris, both of those pass on that platform.
> 
> Hope this helps,
> 
> Roger
> 
> On Wed, 28 Apr 2021, Tomislav Hengl wrote:
> 
>>
>> Hi Roger et al,
>>
>> We are experiencing some problems with committing plotKML to CRAN. 
>> Automated check reports:
>>
>> "Error in CRS("EPSG:4326") : no arguments in initialization list"
>>
>> See:
>>
>> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/plotKML-00install.html 
>>
>> https://github.com/Envirometrix/plotKML/issues/5
>>
>> I assume it has to do with the proj / rgdal versions? Should I switch 
>> to using again CRS("+init=epsg:4326")? Seems that different operating 
>> systems now have different issues.
>>
>> On R-forge plotKML installs without problems:
>>
>> https://r-forge.r-project.org/R/?group_id=1106
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


From Roger@B|v@nd @end|ng |rom nhh@no  Thu Apr 29 15:13:12 2021
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Thu, 29 Apr 2021 15:13:12 +0200
Subject: [R-sig-Geo] Error in CRS("EPSG:4326") : no arguments in
 initialization list
In-Reply-To: <2312f182-19a2-e2d0-76f5-c367d3a62521@gmail.com>
References: <60e2ac6d-664f-44dc-972f-ab82fce797c7@gmail.com>
 <84b9773a-7264-4e6b-9689-cc9d4cc7f2a2@reclus.nhh.no>
 <2312f182-19a2-e2d0-76f5-c367d3a62521@gmail.com>
Message-ID: <234c9a7-ccd-58d6-8958-ac09b5bf740@reclus.nhh.no>

On Thu, 29 Apr 2021, Tomislav Hengl wrote:

>
> Thanks Roger. If I understand correctly, I should simply replace 
> 'CRS("EPSG:4326")' with 'CRS("+proj=longlat +datum=WGS84 +no_defs")'. 
> Otherwise the EPSG codes should work in R with any version correct?

No, just assign "+proj=longlat +datum=WGS84 +no_defs", no CRS(), no 
CRSargs() at all, so preventing CRS() reaching out through rgdal to PROJ. 
It probably shouldn't be canned anyway, but should rather be generated at 
run time not install time (and CRSargs() should be deprecated as it 
removes WKT2 representations). Note that +datum=WGS84 is very imprecise, 
as it varies by epoch, and is from EPSG 10 a datum ensemble rather than a 
datum.

EPSG codes given as CRS("EPSG:4326") work sp >= 1.4 and rgdal >= 1.5 with 
PROJ >= 6 and GDAL >= 3. The puzzle here is how CRS() mistakes the setting 
and tries to retrieve "EPSG:4326" from PROJ < 6.

Roger

>
>
> On 4/28/21 8:48 PM, Roger Bivand wrote:
>>  Tom,
>>
>>  Your package code itself runs lots of stuff in R/AAA.R that it doesn't
>>  need to. Here you could simply put the output string of:
>>
>>>  rgdal::CRSargs(sp::CRS("EPSG:4326"))
>>  [1] "+proj=longlat +datum=WGS84 +no_defs"
>>
>>  instead of going out to sp/rgdal/PROJ. In this case, sp and rgdal
>>  shouldn't let you do this on a system running PROJ 5.2.0 (and I'll look
>>  at that), but your work-around is the bare Proj4 string, which is the
>>  same in any case. The error message is from PROJ, returned from rgdal
>>  to sp. If you want to condition on PROJ version, you can do that, but
>>  instantiating CRS is costly, and here lazy-loading is trying to save
>>  time by pre-filling the value.
>>
>>  If this isn't enough, please let me know and I'll install the same PROJ
>>  and GDAL versions as used for Solaris checks locally, and try to
>>  resolve the problem in those packages. That will however take time. I'm
>>  assuming that sp and rgdal are the current CRAN versions 1.4-5 and
>>  1.5-23 on Solaris, both of those pass on that platform.
>>
>>  Hope this helps,
>>
>>  Roger
>>
>>  On Wed, 28 Apr 2021, Tomislav Hengl wrote:
>> 
>>>
>>>  Hi Roger et al,
>>>
>>>  We are experiencing some problems with committing plotKML to CRAN.
>>>  Automated check reports:
>>>
>>>  "Error in CRS("EPSG:4326") : no arguments in initialization list"
>>>
>>>  See:
>>>
>>>  https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/plotKML-00install.html 
>>>
>>>  https://github.com/Envirometrix/plotKML/issues/5
>>>
>>>  I assume it has to do with the proj / rgdal versions? Should I switch
>>>  to using again CRS("+init=epsg:4326")? Seems that different operating
>>>  systems now have different issues.
>>>
>>>  On R-forge plotKML installs without problems:
>>>
>>>  https://r-forge.r-project.org/R/?group_id=1106
>>>
>>>  _______________________________________________
>>>  R-sig-Geo mailing list
>>>  R-sig-Geo at r-project.org
>>>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>> 
>

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From tom@heng| @end|ng |rom gm@||@com  Thu Apr 29 17:02:33 2021
From: tom@heng| @end|ng |rom gm@||@com (Tomislav Hengl)
Date: Thu, 29 Apr 2021 17:02:33 +0200
Subject: [R-sig-Geo] Open Data Science Europe Workshop 6-10 September 2021 @
 Wageningen Int. Conference Centre
Message-ID: <140cce7d-6748-3a83-678f-6f68deff0ef1@gmail.com>


We are running a 5-day workshop with 2 days of training sessions at 
Wageningen Int. Conference Centre, the Netherlands from 6-10 September 
2021. For more info please refer to:

https://opendatascience.eu

The training sessions will include two parallel blocks focused on 
Spatiotemporal Machine Learning in Python / R, GRASS GIS, and will also 
include working with QGIS plugins and web-GIS services for accessing, 
visualizing and computing with large spacetime datasets. For more info 
about the training sessions please refer to:

https://opendatascience.eu/trainings-sessions-2021/

The special Open Data Science Europe workshop 2021 theme is:
"Spatiotemporal modeling of European Landscapes and Climate 2000?2020: 
using EO and Machine Learning"

Registrations for the training sessions will open in early June. We are 
hoping for a physical event with most of participants at site, however, 
we will video-record and live-broadcast most of the sessions as we did 
for our Summer School 2020 
(https://www.youtube.com/c/OpenGeoHubFoundation). Please subscribe to 
our Twitter channel to receive regular updates: 
https://twitter.com/opengeohub

The Open Data Science Europe is a NOT-for-profit event sponsored by the 
OpenGeoHub foundation (EU project Geo-harmonizer: 
https://ec.europa.eu/inea/en/connecting-europe-facility/cef-telecom/2018-eu-ia-0095). 
Given the circumstances with pandemic and uncertainties there will be NO 
registration fees to participate in this event and all videos and 
teaching materials will be distributed via Creative Commons BY license.

To apply for oral or poster at the workshop please submit abstract via: 
https://opendatascience.eu/workshop-2021-timeline-and-instructions/ 
(deadline 1st of May 2021).

For all other issues please feel free to contact us via:

support at opendatascience.eu


From tom@heng| @end|ng |rom gm@||@com  Thu Apr 29 17:59:04 2021
From: tom@heng| @end|ng |rom gm@||@com (Tomislav Hengl)
Date: Thu, 29 Apr 2021 17:59:04 +0200
Subject: [R-sig-Geo] Error in CRS("EPSG:4326") : no arguments in
 initialization list
In-Reply-To: <234c9a7-ccd-58d6-8958-ac09b5bf740@reclus.nhh.no>
References: <60e2ac6d-664f-44dc-972f-ab82fce797c7@gmail.com>
 <84b9773a-7264-4e6b-9689-cc9d4cc7f2a2@reclus.nhh.no>
 <2312f182-19a2-e2d0-76f5-c367d3a62521@gmail.com>
 <234c9a7-ccd-58d6-8958-ac09b5bf740@reclus.nhh.no>
Message-ID: <25675a09-46ae-ba9e-a2a7-490aeec614ce@gmail.com>


OK got it.

I've resubmitted to CRAN so hopefully this time it will work on all 
versions.


On 4/29/21 3:13 PM, Roger Bivand wrote:
> On Thu, 29 Apr 2021, Tomislav Hengl wrote:
> 
>>
>> Thanks Roger. If I understand correctly, I should simply replace 
>> 'CRS("EPSG:4326")' with 'CRS("+proj=longlat +datum=WGS84 +no_defs")'. 
>> Otherwise the EPSG codes should work in R with any version correct?
> 
> No, just assign "+proj=longlat +datum=WGS84 +no_defs", no CRS(), no 
> CRSargs() at all, so preventing CRS() reaching out through rgdal to 
> PROJ. It probably shouldn't be canned anyway, but should rather be 
> generated at run time not install time (and CRSargs() should be 
> deprecated as it removes WKT2 representations). Note that +datum=WGS84 
> is very imprecise, as it varies by epoch, and is from EPSG 10 a datum 
> ensemble rather than a datum.
> 
> EPSG codes given as CRS("EPSG:4326") work sp >= 1.4 and rgdal >= 1.5 
> with PROJ >= 6 and GDAL >= 3. The puzzle here is how CRS() mistakes the 
> setting and tries to retrieve "EPSG:4326" from PROJ < 6.
> 
> Roger
> 
>>
>>
>> On 4/28/21 8:48 PM, Roger Bivand wrote:
>>> ?Tom,
>>>
>>> ?Your package code itself runs lots of stuff in R/AAA.R that it doesn't
>>> ?need to. Here you could simply put the output string of:
>>>
>>>> ?rgdal::CRSargs(sp::CRS("EPSG:4326"))
>>> ?[1] "+proj=longlat +datum=WGS84 +no_defs"
>>>
>>> ?instead of going out to sp/rgdal/PROJ. In this case, sp and rgdal
>>> ?shouldn't let you do this on a system running PROJ 5.2.0 (and I'll look
>>> ?at that), but your work-around is the bare Proj4 string, which is the
>>> ?same in any case. The error message is from PROJ, returned from rgdal
>>> ?to sp. If you want to condition on PROJ version, you can do that, but
>>> ?instantiating CRS is costly, and here lazy-loading is trying to save
>>> ?time by pre-filling the value.
>>>
>>> ?If this isn't enough, please let me know and I'll install the same PROJ
>>> ?and GDAL versions as used for Solaris checks locally, and try to
>>> ?resolve the problem in those packages. That will however take time. I'm
>>> ?assuming that sp and rgdal are the current CRAN versions 1.4-5 and
>>> ?1.5-23 on Solaris, both of those pass on that platform.
>>>
>>> ?Hope this helps,
>>>
>>> ?Roger
>>>
>>> ?On Wed, 28 Apr 2021, Tomislav Hengl wrote:
>>>
>>>>
>>>> ?Hi Roger et al,
>>>>
>>>> ?We are experiencing some problems with committing plotKML to CRAN.
>>>> ?Automated check reports:
>>>>
>>>> ?"Error in CRS("EPSG:4326") : no arguments in initialization list"
>>>>
>>>> ?See:
>>>>
>>>> ?https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/plotKML-00install.html 
>>>>
>>>> ?https://github.com/Envirometrix/plotKML/issues/5
>>>>
>>>> ?I assume it has to do with the proj / rgdal versions? Should I switch
>>>> ?to using again CRS("+init=epsg:4326")? Seems that different operating
>>>> ?systems now have different issues.
>>>>
>>>> ?On R-forge plotKML installs without problems:
>>>>
>>>> ?https://r-forge.r-project.org/R/?group_id=1106
>>>>
>>>> ?_______________________________________________
>>>> ?R-sig-Geo mailing list
>>>> ?R-sig-Geo at r-project.org
>>>> ?https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>
>


