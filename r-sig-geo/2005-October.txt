From spluque at gmail.com  Sat Oct  1 00:44:59 2005
From: spluque at gmail.com (Sebastian Luque)
Date: Fri, 30 Sep 2005 17:44:59 -0500
Subject: [R-sig-Geo] convertion to polygon for coloring,
 shading (was:  clipping in maptools)
In-Reply-To: <Pine.LNX.4.44.0509302325290.17069-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0509302325290.17069-100000@reclus.nhh.no>
Message-ID: <87k6gyfa50.fsf@mun.ca>

On Fri, 30 Sep 2005 23:38:39 +0200 (CEST),
Roger Bivand <Roger.Bivand at nhh.no> wrote:

[...]

> Using the plot method for sp class SpatialPolygons, the xlim= and ylim=
> arguments do what you want. They do in plot.polylist() too, but in
> plot.Map() you get warnings when the arguments are passed to plotting
> functions that don't know about them.

I should have imagined that xlim and ylim could be passed to these
functions.  Thank you, that helped!

On a related note, I'm also trying to color some of these maps, so IIUC
they need to be converted to polygons.  I thought that Map2poly would be a
good candidate, but I its main argument needs to be a Map object as
imported from a GIS polygon vector file.  It seems my Map object doesn't
fit this description, as I'm getting this error:

,-----
| Error in Map2poly(myMap) : maptype not poly
`-----

Finally and with apologies if it's somewhat OT: for things like including
a scale and north arrow, is it better to export the shape file and do
these in Arcview or Grass, or can it be done within R?  I thought I'd ask
more experienced users.

Any pointers would be most welcome.  Thanks a lot once again.


Cheers,

-- 
Sebastian P. Luque



From Roger.Bivand at nhh.no  Sat Oct  1 10:47:15 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 1 Oct 2005 10:47:15 +0200 (CEST)
Subject: [R-sig-Geo] convertion to polygon for coloring,
 shading (was:  clipping in maptools)
In-Reply-To: <87k6gyfa50.fsf@mun.ca>
Message-ID: <Pine.LNX.4.44.0510011035320.17631-100000@reclus.nhh.no>

On Fri, 30 Sep 2005, Sebastian Luque wrote:

> On Fri, 30 Sep 2005 23:38:39 +0200 (CEST),
> Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> [...]
> 
> > Using the plot method for sp class SpatialPolygons, the xlim= and ylim=
> > arguments do what you want. They do in plot.polylist() too, but in
> > plot.Map() you get warnings when the arguments are passed to plotting
> > functions that don't know about them.
> 
> I should have imagined that xlim and ylim could be passed to these
> functions.  Thank you, that helped!
> 
> On a related note, I'm also trying to color some of these maps, so IIUC
> they need to be converted to polygons.  I thought that Map2poly would be a
> good candidate, but I its main argument needs to be a Map object as
> imported from a GIS polygon vector file.  It seems my Map object doesn't
> fit this description, as I'm getting this error:
> 

Try:

> getinfo.shape("your_file.shp")

and see what it says. If it is not type (5)  - or since version 0.4-15
(15) - it is not a polygon file. If the lines are known to form rings,
there are ways of doing this using sp classes, but you have to know
definitely that the lines are rings, not spaghetti. Ask again if you have 
a type (3) or (13), and know that all the lines really are rings.

Which version of maptools are you using - enter maptools() to see?

> ,-----
> | Error in Map2poly(myMap) : maptype not poly
> `-----
> 
> Finally and with apologies if it's somewhat OT: for things like including
> a scale and north arrow, is it better to export the shape file and do
> these in Arcview or Grass, or can it be done within R?  I thought I'd ask
> more experienced users.

The scale and north arrow are available in sp - see ?"spplot-methods" for 
how to use them in lattice graphics. In base graphics, arrows() and a 
combination of lines() and/or rect() should do it, but they are not 
pre-programmed (yet).

> 
> Any pointers would be most welcome.  Thanks a lot once again.
> 
> 
> Cheers,
> 
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From spluque at gmail.com  Sat Oct  1 17:15:40 2005
From: spluque at gmail.com (Sebastian Luque)
Date: Sat, 01 Oct 2005 10:15:40 -0500
Subject: [R-sig-Geo] convertion to polygon for coloring, shading
References: <87k6gyfa50.fsf@mun.ca>
	<Pine.LNX.4.44.0510011035320.17631-100000@reclus.nhh.no>
Message-ID: <874q811d5v.fsf@gmail.com>

Roger Bivand <Roger.Bivand at nhh.no> wrote:

[...]

> Try:

>> getinfo.shape("your_file.shp")

Ok, I got:

--8<---------------cut here---------------start------------->8---
R> getinfo.shape("general01.shp")
Shapefile type: PolyLine, (3), # of Shapes: 11343
R> maptools()
maptools, version 0.5-2, 2005-09-13
--8<---------------cut here---------------end--------------->8---

and because of the extent of the map, it's surely a mixture of rings
(mostly tiny islands) and spaghetti (at the edges of the map, because the
given shape doesn't fit entirely).  I cannot increase the extent of the
map, so that all shapes are rings, because the map would have to be
ridiculously large.  I guess I'll have to turn them into rings manually.
In that case, what's a good tool to use for that?


[...]

> The scale and north arrow are available in sp - see ?"spplot-methods" for
> how to use them in lattice graphics.

Excellent, I'll use that.


Thank you,

-- 
Sebastian P. Luque



From Roger.Bivand at nhh.no  Sat Oct  1 17:41:31 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 1 Oct 2005 17:41:31 +0200 (CEST)
Subject: [R-sig-Geo] convertion to polygon for coloring, shading
In-Reply-To: <874q811d5v.fsf@gmail.com>
Message-ID: <Pine.LNX.4.44.0510011734370.17631-100000@reclus.nhh.no>

On Sat, 1 Oct 2005, Sebastian Luque wrote:

> Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> [...]
> 
> > Try:
> 
> >> getinfo.shape("your_file.shp")
> 
> Ok, I got:
> 
> --8<---------------cut here---------------start------------->8---
> R> getinfo.shape("general01.shp")
> Shapefile type: PolyLine, (3), # of Shapes: 11343
> R> maptools()
> maptools, version 0.5-2, 2005-09-13
> --8<---------------cut here---------------end--------------->8---
> 
> and because of the extent of the map, it's surely a mixture of rings
> (mostly tiny islands) and spaghetti (at the edges of the map, because the
> given shape doesn't fit entirely).  I cannot increase the extent of the
> map, so that all shapes are rings, because the map would have to be
> ridiculously large.  I guess I'll have to turn them into rings manually.
> In that case, what's a good tool to use for that?
> 

So the origin was a map of rings that has been clipped (by a rectangle?)? 
Could you try to simplify this for testing purposes to a small number of 
shapes (a much smaller rectangle) and let me see it? I've written a small 
functio using sp classes that just rbind()'s the line coordinates with the 
first coordinate if the first and last are not identical. It may work, if 
the lines start and stop on the same rectangle edge (but will not if they 
are on different edges). 

If the lines go outside the rectangle a little, the same approach will
work, but will need clipping with functions in spgpc on r-spatial, not a
big problem. If the rectangle is known, it could be given to the function
as an argument, which would maybe allow the corner case to be handled too.

Roger

> 
> [...]
> 
> > The scale and north arrow are available in sp - see ?"spplot-methods" for
> > how to use them in lattice graphics.
> 
> Excellent, I'll use that.
> 
> 
> Thank you,
> 
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From arv at ono.com  Mon Oct  3 08:38:31 2005
From: arv at ono.com (antonio rodriguez)
Date: Mon, 3 Oct 2005 08:38:31 +0200
Subject: [R-sig-Geo] Adding maps to a filled contour plot
In-Reply-To: <web-7086743@atmos.uiuc.edu>
Message-ID: <IPEFKICOHOECENGJBAGLKEDBEFAA.arv@ono.com>

Hi,


Some time ago, Roger Peng posted this solution, which I found very useful:


junk.mat <- matrix(rnorm(1600), 16, 100)
contour.mat <- ifelse(junk.mat < 2, 0, junk.mat)
filled.contour(junk.mat, color = terrain.colors,
plot.axes = contour(contour.mat, levels = 1,
drawlabels = FALSE, axes = FALSE,
frame.plot = FFALSE, add = TRUE))


The 'plot.axes' argument to filled.contour() gives you access to the
coordinate system in the actual plotting area. However, you will notice
that the axes are missing. You need to add them explicitly, as in:


filled.contour(junk.mat, color = terrain.colors,
plot.axes = { contour(contour.mat, levels = 1,
drawlabels = FALSE, axes = FALSE,
frame.plot = FFALSE, add = TRUE);
axis(1); axis(2) } )



Cheers,


Antonio



> -----Mensaje original-----
> De: r-sig-geo-bounces at stat.math.ethz.ch
> [mailto:r-sig-geo-bounces at stat.math.ethz.ch]En nombre de Anne Hertel
> Enviado el: jueves, 29 de septiembre de 2005 21:42
> Para: r-sig-geo at stat.math.ethz.ch
> Asunto: [R-sig-Geo] Adding maps to a filled contour plot
>
>
> Hi,
>
> I am trying to plot a filled contour map and overlay it with a
> map, but I'm having trouble with the map. The map is plotted, but
> it is stretched out over the color bar, and doesn't stay within
> the plotting area. If I just use the 'contour' function the 'map'
> function works fine, but I want the contours filled in.
>
> Here's the code:
> filled.contour(cor.enso.map,
> x=seq(-126.5625,-64.6875,,23),y=seq(23.720175,51.625732,,11),xlab=
> 'longitude',ylab='latitude')
> map(xlim=c(-127,-65),ylim=c(23,52),add=T)
>
> where cor.enso.map is a matrix of size [23,11].
>
> How do I make the map stay within the plotting area?
>
> Thanks,
> Anne Hertel
>
>
> ------------------------------------------------------------
> Anne M. K. Hertel
> Grad. Student & Research Assistant
> Department of Atmospheric Sciences
> University of Illinois at Urbana-Champaign
> Annex II, room 204
> Phone: (217) 333 6296
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> --
> No virus found in this incoming message.
> Checked by AVG Anti-Virus.
> Version: 7.0.344 / Virus Database: 267.11.8/114 - Release Date: 28/09/2005
>
--



From Y.liu at mdx.ac.uk  Tue Oct 11 13:58:08 2005
From: Y.liu at mdx.ac.uk (Yilin Liu)
Date: Tue, 11 Oct 2005 12:58:08 +0100
Subject: [R-sig-Geo] The length of common boundaries
Message-ID: <A527689D36C527459F58091EA54212F352E738@MDX-CLX-DC1.uni.mdx.ac.uk>

Dear all,

Any way to get the length of common boundaries shared by neighbouring
counties in a map in R?


Yilin



From Roger.Bivand at nhh.no  Tue Oct 11 15:50:05 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 11 Oct 2005 15:50:05 +0200 (CEST)
Subject: [R-sig-Geo] The length of common boundaries
In-Reply-To: <A527689D36C527459F58091EA54212F352E738@MDX-CLX-DC1.uni.mdx.ac.uk>
Message-ID: <Pine.LNX.4.44.0510111538480.18933-100000@reclus.nhh.no>

On Tue, 11 Oct 2005, Yilin Liu wrote:

> Dear all,
> 
> Any way to get the length of common boundaries shared by neighbouring
> counties in a map in R?
> 

The short answer is no. The R polygon objects do not have topology. 

The longer answer is that if you have e00 or ArcInfo binary vector layers,
then the polygons are built from lists of directed arcs, and the arcs have
lengths. So if your input data are in this format, it is feasible but is 
not implemented.

It looks as though the GRASS6 vector format also provides similar
information. But topology is a GIS thing rather than an R thing, so no
solution within R is available.

If you use GRASS, it would be possible to look at how this might be done
(read a shapefile into GRASS, output an ASCII dump of the arcs, which
polygons they separate, and how long they are, and do something with this,
not losing trace of which polygon(s)  belong to which observation - this
was where progress stopped the last time I looked). Arc lengths would be
nice for cartograms too.

Roger

> 
> Yilin
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From mdsumner at utas.edu.au  Wed Oct 12 10:53:24 2005
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed, 12 Oct 2005 10:53:24 +0200
Subject: [R-sig-Geo] The length of common boundaries
Message-ID: <200510120853.j9C8rOSa007388@corinna.its.utas.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051012/747f601d/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Wed Oct 12 11:17:16 2005
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 12 Oct 2005 10:17:16 +0100
Subject: [R-sig-Geo] The length of common boundaries
In-Reply-To: <200510120853.j9C8rOSa007388@corinna.its.utas.edu.au>
References: <200510120853.j9C8rOSa007388@corinna.its.utas.edu.au>
Message-ID: <434CD49C.7010103@lancaster.ac.uk>

Michael Sumner wrote:

> Hello, could you expand on what you mean by "topology" in this context?
> I assume it means that any area/polygon object in a given set is a
> subdivision of the plane - i.e. no "overlaps"?  Since, if that were true
> of the dataset then "common shared boundaries" is something that can be
> assumed reliably.  

  Each polygon in an sp Polygon object is just a set of (x,y) coordinate 
pairs that make up the ring that is the polygon. There's no data that 
describes polygon adjacency, and boundary lines between polygons are 
stored twice, once for each polygon. This is sometimes known as 
'doubly-digitised polygons'. The polygons are the fundamental unit.

  Another way of storing GIS data is to use Arc-Node topology. You have 
a table of Nodes (which are where arcs meet), and a table of Arcs. Each 
Arc has a set of (x,y) coordinate pairs. You then have a table of 
Polygons, which is a set of Arcs. To draw polygon X, you find its Arcs, 
then you look up the coordinates in the Arc table. Each line is only 
stored once, but referenced twice - by the polygons on either side.

  The advantage of this is that you can easily figure out adjacency 
matrices by looking at the Polygon-Arc relationship.

  It's possible to reconstruct Arc-Node topology from doubly-digitised 
polygons, but its a very complex operation to do right, and best left to 
GIS programs such as Arc/Info.

  Hope this helps!

Baz



From mdsumner at utas.edu.au  Wed Oct 12 11:30:24 2005
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed, 12 Oct 2005 11:30:24 +0200
Subject: [R-sig-Geo] The length of common boundaries
Message-ID: <200510120930.j9C9UOSa020453@corinna.its.utas.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051012/06abb1d0/attachment.pl>

From neteler at itc.it  Wed Oct 12 17:43:35 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed, 12 Oct 2005 17:43:35 +0200
Subject: [R-sig-Geo] The length of common boundaries
In-Reply-To: <Pine.LNX.4.44.0510111538480.18933-100000@reclus.nhh.no>
References: <A527689D36C527459F58091EA54212F352E738@MDX-CLX-DC1.uni.mdx.ac.uk>
	<Pine.LNX.4.44.0510111538480.18933-100000@reclus.nhh.no>
Message-ID: <20051012154335.GU24589@thuille.itc.it>

On Tue, Oct 11, 2005 at 03:50:05PM +0200, Roger Bivand wrote:
> On Tue, 11 Oct 2005, Yilin Liu wrote:
> 
> > Dear all,
> > 
> > Any way to get the length of common boundaries shared by neighbouring
> > counties in a map in R?
> > 
> 
> The short answer is no. The R polygon objects do not have topology. 
> 
> The longer answer is that if you have e00 or ArcInfo binary vector layers,
> then the polygons are built from lists of directed arcs, and the arcs have
> lengths. So if your input data are in this format, it is feasible but is 
> not implemented.
> 
> It looks as though the GRASS6 vector format also provides similar
> information. But topology is a GIS thing rather than an R thing, so no
> solution within R is available.
> 
> If you use GRASS, it would be possible to look at how this might be done
> (read a shapefile into GRASS, output an ASCII dump of the arcs, which
> polygons they separate, and how long they are, and do something with this,
> not losing trace of which polygon(s)  belong to which observation - this
> was where progress stopped the last time I looked). Arc lengths would be
> nice for cartograms too.
> 

In GRASS 6 you can use v.to.db [1] to generate this information (should be
the combination of the options 'sides' and 'length'.

Markus

[1] http://grass.itc.it/grass60/manuals/html60_user/v.to.db.html


-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy



From neteler at itc.it  Thu Oct 13 17:34:06 2005
From: neteler at itc.it (Markus Neteler)
Date: Thu, 13 Oct 2005 17:34:06 +0200
Subject: [R-sig-Geo] The length of common boundaries
In-Reply-To: <20051012154335.GU24589@thuille.itc.it>
References: <A527689D36C527459F58091EA54212F352E738@MDX-CLX-DC1.uni.mdx.ac.uk>
	<Pine.LNX.4.44.0510111538480.18933-100000@reclus.nhh.no>
	<20051012154335.GU24589@thuille.itc.it>
Message-ID: <20051013153406.GQ6915@thuille.itc.it>

(cc grass user list)

On Wed, Oct 12, 2005 at 05:43:35PM +0200, Markus Neteler wrote:
> On Tue, Oct 11, 2005 at 03:50:05PM +0200, Roger Bivand wrote:
> > On Tue, 11 Oct 2005, Yilin Liu wrote:
> > 
> > > Dear all,
> > > 
> > > Any way to get the length of common boundaries shared by neighbouring
> > > counties in a map in R?
> > > 
> > 
> > The short answer is no. The R polygon objects do not have topology. 
> > 
> > The longer answer is that if you have e00 or ArcInfo binary vector layers,
> > then the polygons are built from lists of directed arcs, and the arcs have
> > lengths. So if your input data are in this format, it is feasible but is 
> > not implemented.
> > 
> > It looks as though the GRASS6 vector format also provides similar
> > information. But topology is a GIS thing rather than an R thing, so no
> > solution within R is available.
> > 
> > If you use GRASS, it would be possible to look at how this might be done
> > (read a shapefile into GRASS, output an ASCII dump of the arcs, which
> > polygons they separate, and how long they are, and do something with this,
> > not losing trace of which polygon(s)  belong to which observation - this
> > was where progress stopped the last time I looked). Arc lengths would be
> > nice for cartograms too.
> > 
> 
> In GRASS 6 you can use v.to.db [1] to generate this information (should be
> the combination of the options 'sides' and 'length'.
> 
> Markus
> 
> [1] http://grass.itc.it/grass60/manuals/html60_user/v.to.db.html
> 

With the help of Radim I managed to find out how to do it.
It's pretty easy (but you need the today's version of GRASS 6.1-CVS
due to a related bugfix in v.db.addtable).


EXERCISE: HOW LONG ARE COMMON BOUNDARIES OF POLYGONS?


# Requires: GRASS 6.1-CVS from 13 Oct 2005 or later
#
# data: sudden infant deaths data from North Carolina
# data imported from SHAPE file with v.in.ogr

#let's have a look
 d.mon x0
 d.vect sids

#we work on a copy:
 g.copy vect=sids,sids_nc

#we add a second layer to the map which references the boundaries of
#polygons. In the vector geometry we generate an ID (category) for each
#boundary:
 v.category sids_nc out=sids_nc2 layer=2 type=boundary option=add

#Underlying idea:
#we'll fetch the IDs (categories) of the polygons left and right from
#each boundary and store it into the attribute table linked to layer 2.
#In general:
# cat_of_boundary | cat_of_left_polygon | cat_of_right_polygon | length_of_boundary
#
#We want only one category per boundary, that's why the sides check is
#needed (a boundary may consist of several pieces)
#
#So we create a new attribute table and link it to the new layer 2
#of the vector map:
 v.db.addtable sids_nc2 layer=2 col="left integer,right integer,length integer"

#Now we query the polygon/boundary relationsships and store it into
#the attribute table linked to layer 2:
 v.to.db map=sids_nc2 option=sides col=left,right layer=2 

#Now we have unique categories for the boundaries and can calculate the
#lengths:
 v.to.db map=sids_nc2 option=length col=length layer=2 

#Done.

#See the new attribute table containing the boundary lengths:
 v.db.select sids_nc2 layer=2

# verification (let's check boundary #193):
 d.vect sids_nc2 cat=193 layer=2 col=red type=boundary
 d.zoom
 d.measure
# LEN:     12756.00 meters

#what does the attribute table say:
 v.db.select sids_nc2 layer=2 | grep '^193'
#190|65|68|12814

#This is reasonably close since on screen digitization in d.measure
#isn't always that precise ...


Best

 Markus



From Roger.Bivand at nhh.no  Thu Oct 13 18:39:15 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 13 Oct 2005 18:39:15 +0200 (CEST)
Subject: [R-sig-Geo] The length of common boundaries
In-Reply-To: <20051013153406.GQ6915@thuille.itc.it>
Message-ID: <Pine.LNX.4.44.0510131834170.20724-100000@reclus.nhh.no>

On Thu, 13 Oct 2005, Markus Neteler wrote:

> (cc grass user list)
> 
> On Wed, Oct 12, 2005 at 05:43:35PM +0200, Markus Neteler wrote:
> > On Tue, Oct 11, 2005 at 03:50:05PM +0200, Roger Bivand wrote:
> > > On Tue, 11 Oct 2005, Yilin Liu wrote:
> > > 
> > > > Dear all,
> > > > 
> > > > Any way to get the length of common boundaries shared by neighbouring
> > > > counties in a map in R?
> > > > 
> > > 
> > > The short answer is no. The R polygon objects do not have topology. 
> > > 
> > > The longer answer is that if you have e00 or ArcInfo binary vector layers,
> > > then the polygons are built from lists of directed arcs, and the arcs have
> > > lengths. So if your input data are in this format, it is feasible but is 
> > > not implemented.
> > > 
> > > It looks as though the GRASS6 vector format also provides similar
> > > information. But topology is a GIS thing rather than an R thing, so no
> > > solution within R is available.
> > > 
> > > If you use GRASS, it would be possible to look at how this might be done
> > > (read a shapefile into GRASS, output an ASCII dump of the arcs, which
> > > polygons they separate, and how long they are, and do something with this,
> > > not losing trace of which polygon(s)  belong to which observation - this
> > > was where progress stopped the last time I looked). Arc lengths would be
> > > nice for cartograms too.
> > > 
> > 
> > In GRASS 6 you can use v.to.db [1] to generate this information (should be
> > the combination of the options 'sides' and 'length'.
> > 
> > Markus
> > 
> > [1] http://grass.itc.it/grass60/manuals/html60_user/v.to.db.html
> > 
> 
> With the help of Radim I managed to find out how to do it.
> It's pretty easy (but you need the today's version of GRASS 6.1-CVS
> due to a related bugfix in v.db.addtable).
> 
> 
> EXERCISE: HOW LONG ARE COMMON BOUNDARIES OF POLYGONS?
> 
> 
> # Requires: GRASS 6.1-CVS from 13 Oct 2005 or later
> #
> # data: sudden infant deaths data from North Carolina
> # data imported from SHAPE file with v.in.ogr
> 
> #let's have a look
>  d.mon x0
>  d.vect sids
> 
> #we work on a copy:
>  g.copy vect=sids,sids_nc
> 
> #we add a second layer to the map which references the boundaries of
> #polygons. In the vector geometry we generate an ID (category) for each
> #boundary:
>  v.category sids_nc out=sids_nc2 layer=2 type=boundary option=add
> 
> #Underlying idea:
> #we'll fetch the IDs (categories) of the polygons left and right from
> #each boundary and store it into the attribute table linked to layer 2.
> #In general:
> # cat_of_boundary | cat_of_left_polygon | cat_of_right_polygon | length_of_boundary
> #
> #We want only one category per boundary, that's why the sides check is
> #needed (a boundary may consist of several pieces)
> #
> #So we create a new attribute table and link it to the new layer 2
> #of the vector map:
>  v.db.addtable sids_nc2 layer=2 col="left integer,right integer,length integer"
> 
> #Now we query the polygon/boundary relationsships and store it into
> #the attribute table linked to layer 2:
>  v.to.db map=sids_nc2 option=sides col=left,right layer=2 
> 
> #Now we have unique categories for the boundaries and can calculate the
> #lengths:
>  v.to.db map=sids_nc2 option=length col=length layer=2 
> 
> #Done.
> 
> #See the new attribute table containing the boundary lengths:
>  v.db.select sids_nc2 layer=2
> 
> # verification (let's check boundary #193):
>  d.vect sids_nc2 cat=193 layer=2 col=red type=boundary
>  d.zoom
>  d.measure
> # LEN:     12756.00 meters
> 
> #what does the attribute table say:
>  v.db.select sids_nc2 layer=2 | grep '^193'
> #190|65|68|12814
> 
> #This is reasonably close since on screen digitization in d.measure
> #isn't always that precise ...
> 

Apart from changing the declaration of length from integer to double, this 
really does the job very well. Thank you, Markus and Radim! The output of 
v.db.select sids_nc2 layer=2 gives all that is needed to construct the 
needed files, a *.gal contiguous neighbour file, a *.gwt file with 
neighbours and lengths per neighbour, and a simple perimeter file per 
unique ID. Something along these lines will reach spgrass6 soon.

Best wishes,

Roger


> 
> Best
> 
>  Markus
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From lponti at infinito.it  Fri Oct 14 01:40:08 2005
From: lponti at infinito.it (Luigi Ponti)
Date: Thu, 13 Oct 2005 16:40:08 -0700
Subject: [R-sig-Geo] Interpolating and mapping the output of ecosystem
	models with R
Message-ID: <434EF058.1070509@infinito.it>

Dear R-sig-Geo Mailing List,

I would like to ask some advice on using R to map the output of 
weather-driven population models for ecosystem analysis.

Our group is considering R as a way to map the georeferenced output of 
the ecosystem models developed in our lab. In short, once meteorological 
data (i.e., model input) and geographic data are acquired for a 
particular landscape, an ecosystem model is run for each weather station 
location of interest. Therefore, the output of the model consists of a 
summary table combining the point locations of the weather stations with 
the output value of interest.

In order for this output to be mapped, an interpolation process is 
needed to retrieve the spatial distribution of the values estimated by 
the ecological model across the landscape. Another critical point is the 
ability to 'clip' and eliminate areas which are not of interest to the 
study, such as elevation which is too high, or other tracts of land or 
water which are not of interest to the study.

Would R be able to interpolate such spatial distribution and also 'clip' 
the out-of-interest areas? I am an R beginner, but looking at the R 
website it seems that such capabilities are already in place in R. 
Starting from the summary output table mentioned above, what is the 
amount of work needed to implement such functionalities? Any hint is 
appreciated.

Kind regards,

Luigi Ponti
Visiting Scholar
University of California, Berkeley
Environmental Science, Policy & Management
lponti at nature.berkeley.edu



From chabotd at globetrotter.net  Sun Oct 16 17:28:09 2005
From: chabotd at globetrotter.net (Denis Chabot)
Date: Sun, 16 Oct 2005 11:28:09 -0400
Subject: [R-sig-Geo] Accessing gshhs database of world coastlines
In-Reply-To: <mailman.11.1128333602.5859.r-sig-geo@stat.math.ethz.ch>
References: <mailman.11.1128333602.5859.r-sig-geo@stat.math.ethz.ch>
Message-ID: <99449F52-343F-431C-8D02-593B5A6B35E2@globetrotter.net>

Hi,

Forgive me if this should be posted to another list relating to GMT  
or the gshhs database. I do not know of any such list at the moment,  
and my goal is to use the data in R anyway.

Until now I have made maps with the high-resolution world map that  
comes with PBSmapping. As explained in the user guide, these are a  
lower resolution version of the gshhs full-resolution database. But  
it is not quite good enough for maps of my part of the world. A few  
islands are missing that I'd like to have, and the details of the  
coastline are not always at a sufficient resolution.

I would have like to make my own coastline database from the original  
gshhs database, a version that would only have covered -80 to -20 in  
longitude, and 35 to 75 in latitude. I can lower resolution and clip  
to smaller areas with functions provided in PBSmapping so I'd be fine  
for most maps I have to make.

The problem is that I have next to no experience with compiling  
programs and I don't know how to install GMT (which I could use to  
extract the coastline) or the smaller programs provided just to  
interact with the database.

I thought I did not need to because a shapefile version of the  
database exists, and I have managed (with help from Roger in  
particular) to import such files in R before. But this one is huge  
(154 MB for the shp file alone). The function read.shape refuses to  
open it, telling me right way

Erreur dans read.shape("gshhs_land.shp") : unable to open file

I tried with function read.shapefile, which attempts to open the  
shapefile but never finishes (I stopped it after 12 h. Thus the  
shapefile is either a bit weird (it had more than the usual 3 files  
on the web site, I just downloaded the shp, dbf and shx files) or it  
is too big, though I have 1 GB of RAM on my Mac.

It appears I'll have to compile and learn to use the programs  
provided with that database to extract the data I want to import to R.

Has anyone done this before? Can you point me to a site that explains  
how to compile these small c programs on Mac OS X, as a first step?  
Are there instructions, somewhere, on how you'd specify the lat long  
you want to extract to an ascii file? I did not see any on the GMT site.

Maybe I'm doing all this for nothing and there is already a world  
coastline (preferably with main lakes and rivers too) database at  
high resolution available for R, beside the ones that come with maps  
(which does not allow me enough flexibility) and PBSmapping (not  
quite high enough resolution)?

Sincerely,

Denis Chabot



From Roger.Bivand at nhh.no  Sun Oct 16 20:09:48 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 16 Oct 2005 20:09:48 +0200 (CEST)
Subject: [R-sig-Geo] Accessing gshhs database of world coastlines
In-Reply-To: <99449F52-343F-431C-8D02-593B5A6B35E2@globetrotter.net>
Message-ID: <Pine.LNX.4.44.0510161951280.12372-100000@reclus.nhh.no>

On Sun, 16 Oct 2005, Denis Chabot wrote:

> Hi,
> 
> Forgive me if this should be posted to another list relating to GMT  
> or the gshhs database. I do not know of any such list at the moment,  
> and my goal is to use the data in R anyway.
> 
> Until now I have made maps with the high-resolution world map that  
> comes with PBSmapping. As explained in the user guide, these are a  
> lower resolution version of the gshhs full-resolution database. But  
> it is not quite good enough for maps of my part of the world. A few  
> islands are missing that I'd like to have, and the details of the  
> coastline are not always at a sufficient resolution.
> 
> I would have like to make my own coastline database from the original  
> gshhs database, a version that would only have covered -80 to -20 in  
> longitude, and 35 to 75 in latitude. I can lower resolution and clip  
> to smaller areas with functions provided in PBSmapping so I'd be fine  
> for most maps I have to make.
> 
> The problem is that I have next to no experience with compiling  
> programs and I don't know how to install GMT (which I could use to  
> extract the coastline) or the smaller programs provided just to  
> interact with the database.
> 
> I thought I did not need to because a shapefile version of the  
> database exists, and I have managed (with help from Roger in  
> particular) to import such files in R before. But this one is huge  
> (154 MB for the shp file alone). The function read.shape refuses to  
> open it, telling me right way
> 
> Erreur dans read.shape("gshhs_land.shp") : unable to open file

This means read.shape() cannot see the file. I managed to read 
gshhs_land.shp into R with current maptools:

> try1 <- read.shape("gshhs_land.shp")
Shapefile type: PolyLine, (3), # of Shapes: 191811
> object.size(try1)
[1] 395387692

but it is a shapefile of lines, not polygons - the base GSHHS is now 
polygonal. I have 1GB under linux, so I think memory management is 
effectively the same as yours. I've put a PDF (33MB) of your area on:

http://spatial.nhh.no/misc/nw_atlantic.pdf

please save link as, and open locally, otherwise you'll be sitting looking 
at a blank screen for a long time. I did this so that you can use the 
Acroread zoom to find out if your islands are there.

read.shape() was not too slow, it seemed to go quite well.

Is there any use in writing an R function on top of the gshhs program for 
extracting polygons from the gshhs databases directly into sp class 
objects - it doesn't look too difficult, and would give direct access 
without having to use the shapefile?

Roger


> 
> I tried with function read.shapefile, which attempts to open the  
> shapefile but never finishes (I stopped it after 12 h. Thus the  
> shapefile is either a bit weird (it had more than the usual 3 files  
> on the web site, I just downloaded the shp, dbf and shx files) or it  
> is too big, though I have 1 GB of RAM on my Mac.
> 
> It appears I'll have to compile and learn to use the programs  
> provided with that database to extract the data I want to import to R.
> 
> Has anyone done this before? Can you point me to a site that explains  
> how to compile these small c programs on Mac OS X, as a first step?  
> Are there instructions, somewhere, on how you'd specify the lat long  
> you want to extract to an ascii file? I did not see any on the GMT site.
> 
> Maybe I'm doing all this for nothing and there is already a world  
> coastline (preferably with main lakes and rivers too) database at  
> high resolution available for R, beside the ones that come with maps  
> (which does not allow me enough flexibility) and PBSmapping (not  
> quite high enough resolution)?
> 
> Sincerely,
> 
> Denis Chabot
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From chabotd at globetrotter.net  Mon Oct 17 01:21:42 2005
From: chabotd at globetrotter.net (Denis Chabot)
Date: Sun, 16 Oct 2005 19:21:42 -0400
Subject: [R-sig-Geo] Accessing gshhs database of world coastlines
In-Reply-To: <Pine.LNX.4.44.0510161951280.12372-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0510161951280.12372-100000@reclus.nhh.no>
Message-ID: <B7F6151B-57EC-4878-9B6C-E7304000CE1E@globetrotter.net>

Hi Roger,

Le 05-10-16 ? 14:09, Roger Bivand a ?crit :

> On Sun, 16 Oct 2005, Denis Chabot wrote:
>
>> ...

>> I thought I did not need to because a shapefile version of the
>> database exists, and I have managed (with help from Roger in
>> particular) to import such files in R before. But this one is huge
>> (154 MB for the shp file alone). The function read.shape refuses to
>> open it, telling me right way
>>
>> Erreur dans read.shape("gshhs_land.shp") : unable to open file
>>
>
> This means read.shape() cannot see the file.
Maybe my copy is correupted? I tried again giving the full pathname  
to the file to insure I had not screwed up with defining my working  
directory, and got yet the same (or close to):
 > test <- read.shape("Macintosh  
HD:Users:dchabot:Documents:Cartographie:Shapefiles:gshhs:gshhs_land.shp" 
)
Erreur dans read.shape("Macintosh  
HD:Users:dchabot:Documents:Cartographie:Shapefiles:gshhs:gshhs_land.shp" 
) :
     unable to open file
(I had used a utility to give me the full pathname of the shp file).

Alternative explanation: I just upgraded to R2.2, and wiped out my  
2.1 install. Because R2.2 is not officially on line at CRAN yet, I  
could not download mac binaries for maptools and sp and compiled them  
myself. I did get a warning about some name being used twice, and  
although the package seems to work (it certainly imports a smaller  
shapefile) maybe it is not 100% functional.

> I managed to read
> gshhs_land.shp into R with current maptools:
>
>
>> try1 <- read.shape("gshhs_land.shp")
>>
> Shapefile type: PolyLine, (3), # of Shapes: 191811
>
>> object.size(try1)
>>
> [1] 395387692
>
> but it is a shapefile of lines, not polygons - the base GSHHS is now
> polygonal.
I don't understand this part. the "gshhs_land" is not "base GSHHS"? I  
thought I downloaded the most recent version, at the highest  
resolution. Where did you find the version with polygons?

> I have 1GB under linux, so I think memory management is
> effectively the same as yours. I've put a PDF (33MB) of your area on:
>
> http://spatial.nhh.no/misc/nw_atlantic.pdf
>
> please save link as, and open locally, otherwise you'll be sitting  
> looking
> at a blank screen for a long time. I did this so that you can use the
> Acroread zoom to find out if your islands are there.


Yes the islands are there! This coastline is an improvement on what I  
have!


>
> read.shape() was not too slow, it seemed to go quite well.
>
> Is there any use in writing an R function on top of the gshhs  
> program for
> extracting polygons from the gshhs databases directly into sp class
> objects - it doesn't look too difficult, and would give direct access
> without having to use the shapefile?
>
I would love to have it. At a minimum, I'd need clear(er)  
instructions as to how to compile and use the programs provided on  
GSHHS's site. But until now I valued being able to work with my  
dataset in R as I am used to, and produce maps for the right subset  
of data I'm interested in. So I don't plan to use GMT any time soon  
and would much prefer R functions to access the very nice gshhs  
databases and take what I need out of them.

As an aside, to you know of a way to do map borders in R that look  
like those in GMT and many paper maps (thick borders, alternating  
from white to black from one degree of lat or long to the next)? This  
is a cosmetic issue only but it would be a nice touch to be able to  
do this in R.

Anyway, I'll wait a few days for the full R2.2 Mac to be at CRAN and  
get fresh binaries of maptools and sp to see if I can open that  
shapefile, since you were able to. It irritates me to have failed.

With many thanks,


Denis



From Roger.Bivand at nhh.no  Mon Oct 17 08:21:33 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 17 Oct 2005 08:21:33 +0200 (CEST)
Subject: [R-sig-Geo] Accessing gshhs database of world coastlines
In-Reply-To: <B7F6151B-57EC-4878-9B6C-E7304000CE1E@globetrotter.net>
Message-ID: <Pine.LNX.4.44.0510170806530.15941-100000@reclus.nhh.no>

On Sun, 16 Oct 2005, Denis Chabot wrote:

> Hi Roger,
> 
> Le 05-10-16 ? 14:09, Roger Bivand a ?crit :
> 
> > On Sun, 16 Oct 2005, Denis Chabot wrote:
> >
> >> ...
> 
> >> I thought I did not need to because a shapefile version of the
> >> database exists, and I have managed (with help from Roger in
> >> particular) to import such files in R before. But this one is huge
> >> (154 MB for the shp file alone). The function read.shape refuses to
> >> open it, telling me right way
> >>
> >> Erreur dans read.shape("gshhs_land.shp") : unable to open file
> >>
> >
> > This means read.shape() cannot see the file.
> Maybe my copy is correupted? I tried again giving the full pathname  
> to the file to insure I had not screwed up with defining my working  
> directory, and got yet the same (or close to):
>  > test <- read.shape("Macintosh  
> HD:Users:dchabot:Documents:Cartographie:Shapefiles:gshhs:gshhs_land.shp" 
> )
> Erreur dans read.shape("Macintosh  
> HD:Users:dchabot:Documents:Cartographie:Shapefiles:gshhs:gshhs_land.shp" 
> ) :
>      unable to open file
> (I had used a utility to give me the full pathname of the shp file).

I have no access to OSX, I'm afraid. If you do setwd() to the directory 
where gshhs_land.shp is placed, and then list.files(pattern="shp"), is the 
file visible?`What does getwd() say when you are there? The error message 
is from:

    hSHP = SHPOpen(CHAR(STRING_ELT(shpnm,0)), "rb" );
    if( hSHP == NULL )    
	error("unable to open file");

in src/Rshapeget.c, where shpnm is the file name given to read.shape(). So 
either the compilation failed, or the file isn't there. Try 

getinfo.shape("gshhs_land.shp")

the error message there should say "Unable to open: gshhs_land.shp".

> 
> Alternative explanation: I just upgraded to R2.2, and wiped out my  
> 2.1 install. Because R2.2 is not officially on line at CRAN yet, I  
> could not download mac binaries for maptools and sp and compiled them  
> myself. I did get a warning about some name being used twice, and  
> although the package seems to work (it certainly imports a smaller  
> shapefile) maybe it is not 100% functional.
> 
> > I managed to read
> > gshhs_land.shp into R with current maptools:
> >
> >
> >> try1 <- read.shape("gshhs_land.shp")
> >>
> > Shapefile type: PolyLine, (3), # of Shapes: 191811
> >
> >> object.size(try1)
> >>
> > [1] 395387692
> >
> > but it is a shapefile of lines, not polygons - the base GSHHS is now
> > polygonal.
> I don't understand this part. the "gshhs_land" is not "base GSHHS"? I  
> thought I downloaded the most recent version, at the highest  
> resolution. Where did you find the version with polygons?

It is not a shapefile, but in GSHHS format. It is formatted as polygons. 
The problem with the shapefile as lines is that it cannot be used for 
filling land or sea, just for drawing coastlines.

> 
> > I have 1GB under linux, so I think memory management is
> > effectively the same as yours. I've put a PDF (33MB) of your area on:
> >
> > http://spatial.nhh.no/misc/nw_atlantic.pdf
> >
> > please save link as, and open locally, otherwise you'll be sitting  
> > looking
> > at a blank screen for a long time. I did this so that you can use the
> > Acroread zoom to find out if your islands are there.
> 
> 
> Yes the islands are there! This coastline is an improvement on what I  
> have!

OK, so I'll follow this route as well.

> 
> 
> >
> > read.shape() was not too slow, it seemed to go quite well.
> >
> > Is there any use in writing an R function on top of the gshhs  
> > program for
> > extracting polygons from the gshhs databases directly into sp class
> > objects - it doesn't look too difficult, and would give direct access
> > without having to use the shapefile?
> >
> I would love to have it. At a minimum, I'd need clear(er)  
> instructions as to how to compile and use the programs provided on  
> GSHHS's site. But until now I valued being able to work with my  
> dataset in R as I am used to, and produce maps for the right subset  
> of data I'm interested in. So I don't plan to use GMT any time soon  
> and would much prefer R functions to access the very nice gshhs  
> databases and take what I need out of them.
> 

I think it can be done.

> As an aside, to you know of a way to do map borders in R that look  
> like those in GMT and many paper maps (thick borders, alternating  
> from white to black from one degree of lat or long to the next)? This  
> is a cosmetic issue only but it would be a nice touch to be able to  
> do this in R.

For unprojected it could be done, for projected like GMT is more trouble. 
If anyone would like to contribute GMTaxis() to work like GMT, please say, 
contributions welcome!

> 
> Anyway, I'll wait a few days for the full R2.2 Mac to be at CRAN and  
> get fresh binaries of maptools and sp to see if I can open that  
> shapefile, since you were able to. It irritates me to have failed.
> 

Roger


> With many thanks,
> 
> 
> Denis
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From chabotd at globetrotter.net  Mon Oct 17 15:06:24 2005
From: chabotd at globetrotter.net (Denis Chabot)
Date: Mon, 17 Oct 2005 09:06:24 -0400
Subject: [R-sig-Geo] Accessing gshhs database of world coastlines
In-Reply-To: <Pine.LNX.4.44.0510170806530.15941-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0510170806530.15941-100000@reclus.nhh.no>
Message-ID: <A898EFD1-DA63-4E44-99DD-3AC4FD0704CC@globetrotter.net>

Hi Roger,


Le 05-10-17 ? 02:21, Roger Bivand a ?crit :

> I have no access to OSX, I'm afraid. If you do setwd() to the  
> directory
> where gshhs_land.shp is placed, and then list.files(pattern="shp"),  
> is the
> file visible?`

Yes, I got
 > list.files(pattern="shp")
[1] "gshhs_land.shp"



> What does getwd() say when you are there? The error message
> is from:
>
 > getwd()
[1] "/Users/dchabot/Documents/Cartographie/Shapefiles/gshhs"

>     hSHP = SHPOpen(CHAR(STRING_ELT(shpnm,0)), "rb" );
>     if( hSHP == NULL )
>     error("unable to open file");
>
> in src/Rshapeget.c, where shpnm is the file name given to read.shape 
> (). So
> either the compilation failed, or the file isn't there. Try
>
> getinfo.shape("gshhs_land.shp")

 > getinfo.shape("gshhs_land.shp")
Erreur dans getinfo.shape("gshhs_land.shp") :
     No such file

Wow, these were R commands I did not know! But I just found the  
problem. OS X can "hide" the extension of file names. The names of  
the 3 files appeared correct to me, but I fired Terminal and listed  
the files that way (which I admit I don't do often), and here what I  
got:

LAUchabotd-QC-DFO-MPO-GC-CA:~/Documents/Cartographie/Shapefiles/gshhs  
dchabot$ ls -l
total 336928
-rw-r--r--   1 dchabot  dchabot    8823500 Oct 11 13:07  
gshhs_land.dbf.txt
-rw-r--r--   1 dchabot  dchabot  162143644 Oct 11 13:07 gshhs_land.shp
-rw-r--r--   1 dchabot  dchabot    1534588 Oct 11 13:07  
gshhs_land.shx.txt

2 of the files had a hidden ".txt" which I did not see, but R sure  
did. I fixed these 2 file names and read.shape gave me the same  
number of shapes you got, and it did not take so long. Sorry for this.

> ...
> It is not a shapefile, but in GSHHS format. It is formatted as  
> polygons.
> The problem with the shapefile as lines is that it cannot be used for
> filling land or sea, just for drawing coastlines.
So you accessed it using gshhs programs?

You mentioned you could work on a way to adapt gshhs programs so  
they'd be called from R, or bringing the same functionality in R, I'm  
not sure exactly what you meant. But you can save you the trouble for  
one program, "gshhs_dp". I think thinPolys, from PBSmapping,  
implements this already.

> OK, so I'll follow this route as well.
>

>>> Is there any use in writing an R function on top of the gshhs
>>> program for
>>> extracting polygons from the gshhs databases directly into sp class
>>> objects - it doesn't look too difficult, and would give direct  
>>> access
>>> without having to use the shapefile?
>>>
>>>
>> I would love to have it. At a minimum, I'd need clear(er)
>> instructions as to how to compile and use the programs provided on
>> GSHHS's site. But until now I valued being able to work with my
>> dataset in R as I am used to, and produce maps for the right subset
>> of data I'm interested in. So I don't plan to use GMT any time soon
>> and would much prefer R functions to access the very nice gshhs
>> databases and take what I need out of them.
>>
>>
>
> I think it can be done.
>
>
>> As an aside, to you know of a way to do map borders in R that look
>> like those in GMT and many paper maps (thick borders, alternating
>> from white to black from one degree of lat or long to the next)? This
>> is a cosmetic issue only but it would be a nice touch to be able to
>> do this in R.
>>
>
> For unprojected it could be done, for projected like GMT is more  
> trouble.
> If anyone would like to contribute GMTaxis() to work like GMT,  
> please say,
> contributions welcome!
>
>
I wish I could help, but I really do not have the background to do  
so. I will be happy to test for you though.

Denis



From christian.schlatter at fibl.org  Mon Oct 17 16:03:53 2005
From: christian.schlatter at fibl.org (Schlatter Christian)
Date: Mon, 17 Oct 2005 16:03:53 +0200
Subject: [R-sig-Geo] rGeo vs. gstat
Message-ID: <F07A3234E1CDF74399E254240638883001E80948@bernina.fibl.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051017/a387c454/attachment.pl>

From chabotd at globetrotter.net  Mon Oct 17 19:47:14 2005
From: chabotd at globetrotter.net (Denis Chabot)
Date: Mon, 17 Oct 2005 13:47:14 -0400
Subject: [R-sig-Geo] Srings
Message-ID: <28A48768-84B6-4A3C-BF20-9C6A6524D2F3@globetrotter.net>

Hi Roger,

I don't know what is happening, maybe a mismatch of some packages  
from my R2.1 (old) install and my new R2.2 install, but I'm having  
problems with function

asSpatialRingsShapes

that was used in the method you developed to import shapefiles into  
files that are compatible with PBSmapping. The problem is not with  
the functions you wrote for me, actually, but with a function that is  
part of maptools. This is actually part of the example given in the  
help file for asSpatialRingsShapes. R chokes on Sring:

 > library(maptools)
 > nc.shp <- read.shape(system.file("shapes/sids.shp",  
package="maptools")[1])
Shapefile type: Polygon, (5), # of Shapes: 100
 > nc1 <- asSpatialRingsShapes(nc.shp$Shapes, as.character(nc.shp 
$att.data$FIPS))
Erreur : impossible de trouver la fonction "Sring"


Do others have problems with this function?

Sincerely,

Denis



From Roger.Bivand at nhh.no  Mon Oct 17 19:57:27 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 17 Oct 2005 19:57:27 +0200 (CEST)
Subject: [R-sig-Geo] Srings
In-Reply-To: <28A48768-84B6-4A3C-BF20-9C6A6524D2F3@globetrotter.net>
Message-ID: <Pine.LNX.4.44.0510171951090.16392-100000@reclus.nhh.no>

On Mon, 17 Oct 2005, Denis Chabot wrote:

> Hi Roger,
> 
> I don't know what is happening, maybe a mismatch of some packages  
> from my R2.1 (old) install and my new R2.2 install, but I'm having  
> problems with function
> 
> asSpatialRingsShapes
> 
> that was used in the method you developed to import shapefiles into  
> files that are compatible with PBSmapping. The problem is not with  
> the functions you wrote for me, actually, but with a function that is  
> part of maptools. This is actually part of the example given in the  
> help file for asSpatialRingsShapes. R chokes on Sring:
> 
>  > library(maptools)
>  > nc.shp <- read.shape(system.file("shapes/sids.shp",  
> package="maptools")[1])
> Shapefile type: Polygon, (5), # of Shapes: 100
>  > nc1 <- asSpatialRingsShapes(nc.shp$Shapes, as.character(nc.shp 
> $att.data$FIPS))
> Erreur : impossible de trouver la fonction "Sring"
> 
> 
> Do others have problems with this function?

The name changed with a major improvement in the internal structure: the 
classes are (were/are) Sring|Polygon, Srings|Polygons, etc. Recent 
releases of maptools (since 0.5) depend on sp, and readShapePoly() now 
imports a shapefile into a SpatialPolygonsDataFrame object directly. We 
did announce the change, and the posting is available at:

http://r-spatial.sourceforge.net/changes081.txt

where we also wrote:

"Following very useful input from users, a number of incompatible changes 
are being introduced into sp from release 0.8-*. We hope that users will 
export data objects in the deprecated formats before updating."

Older versions of sp are available from the CRAN archive if needed.

Hope this helps,

Roger


> 
> Sincerely,
> 
> Denis
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From e.pebesma at geo.uu.nl  Mon Oct 17 23:42:45 2005
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Mon, 17 Oct 2005 23:42:45 +0200
Subject: [R-sig-Geo] rGeo vs. gstat
In-Reply-To: <F07A3234E1CDF74399E254240638883001E80948@bernina.fibl.ch>
References: <F07A3234E1CDF74399E254240638883001E80948@bernina.fibl.ch>
Message-ID: <43541AD5.3060008@geo.uu.nl>

Schlatter Christian wrote:

>Dear list members
>
> 
>
>I'm very new to R but a little informed about geostatistics. 
>
>As I was looking for possibilities of geostatistical analysis in R I encountered at least two very interesting packages: 
>
> 
>
>Rgeo and gstat
>
> 
>
>And of course I'm wondering now about the one which fits better my needs which are the comparison of spatial data (insect parasitism rates) for different fields in which we collected data. 
>
> 
>
Christian, I too find these two packages very interesting. Another 
package that you might
find interesting besides geoR is geoRglm. However, you've told us too 
little about what
your problem is to give you advise about which methods to use, and where 
to find them.

You will find even more packages for geostatistical analysis on the 
spatial task view:
R home page -> CRAN -> CRAN mirror -> Task Views -> Spatial.

Best regards,
--
Edzer



From adrian at maths.uwa.edu.au  Tue Oct 18 12:41:56 2005
From: adrian at maths.uwa.edu.au (Adrian Baddeley)
Date: Tue, 18 Oct 2005 18:41:56 +0800
Subject: [R-sig-Geo] spatstat.org
Message-ID: <17236.53620.81133.98689@maths.uwa.edu.au>

Please be advised that the home page for 'spatstat'
has moved to
    www.spatstat.org

---
Adrian Baddeley



From sarraf at uiuc.edu  Tue Oct 18 18:37:52 2005
From: sarraf at uiuc.edu (Saket Sarraf)
Date: Tue, 18 Oct 2005 11:37:52 -0500
Subject: [R-sig-Geo] system of equations with spatial dependence in error
	terms
Message-ID: <200510181637.j9IGbAZ6025352@expredir6.cites.uiuc.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051018/52837341/attachment.pl>

From christian.schlatter at fibl.org  Wed Oct 19 09:13:46 2005
From: christian.schlatter at fibl.org (Schlatter Christian)
Date: Wed, 19 Oct 2005 09:13:46 +0200
Subject: [R-sig-Geo] rGeo vs. gstat;
	Question on geostatistical method for specific experimental design
Message-ID: <F07A3234E1CDF74399E254240638883001E80DAE@bernina.fibl.ch>

Dear Edzer, dear list members

Thank you very much for your comments. It made me investigate quite well. 

The answer to the question "rGeo vs. gstat" is answered by your very helpful article of the DSC 2003 meeting in Vienna (chapter "introduction"): http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/Pebesma.pdf

As I'm new and not yet so familiar with the customs of [R-sig-Geo], I did not feel about asking about my personal statistical problems but more about general statistical questions. 

But as you asked for more detail I will gladly describe them (please let me know if this should not be the place for it):

We are looking at parasitism rates in cabbage pests eggs (Lepidoptera: mainly Mamestra brassicae, Pieris rapae) in relation to distance effects from flowering strips. Specifically the following question: In what relation is the parasitism rate to the distance from the flower source (which in the case are sown flower strips). 

Many practical restrictions led to a somehow "compromisical" experimental design consisting of four blocks in one cabbage field (two with flower strips, two without). Each block has two grids of 6x 8 plants (distance in between each plant: 3m) on each side of the flower strip (cp. Image), 96 plants per block. On each plant we collected pest eggs to determine parasitism rate. (Addtionaly we sampled on 4 different days).

The main problem is the low parasitism rate in the field (only about 15-20% of all eggs have been parasitized), consequently many 0 values. 

My idea was to calculate for each of the four blocks variogram parameters and to compare them afterwards (as we had two study sites, we have 8 blocks all in all, making 4 with flowers and 4 without). With so many "0" samples difficult to manage. 

Now I found in Edzers article and the gstat manual the possibility of block kriging. Without knowing exactly what it is, I suppose there is the possibility to keep all four blocks together and defining the blocks with the rectangular block-defining possibility. 

Is this a valid procedure?

Best wishes 

Christian Schlatter (Research institute for organic farming, Switzerland)

-----Urspr?ngliche Nachricht-----
Von: Edzer J. Pebesma [mailto:e.pebesma at geo.uu.nl] 
Gesendet: Montag, 17. Oktober 2005 23:43
An: Schlatter Christian
Cc: r-sig-geo at stat.math.ethz.ch
Betreff: Re: [R-sig-Geo] rGeo vs. gstat

Schlatter Christian wrote:

>Dear list members
>
>I'm very new to R but a little informed about geostatistics. 
>
>As I was looking for possibilities of geostatistical analysis in R I encountered at least two very interesting packages: 
>
>Rgeo and gstat
>
>And of course I'm wondering now about the one which fits better my needs which are the comparison of spatial data (insect parasitism rates) for different fields in which we collected data. 
>
> 
>
Christian, I too find these two packages very interesting. Another 
package that you might
find interesting besides geoR is geoRglm. However, you've told us too 
little about what
your problem is to give you advise about which methods to use, and where 
to find them.

You will find even more packages for geostatistical analysis on the 
spatial task view:
R home page -> CRAN -> CRAN mirror -> Task Views -> Spatial.

Best regards,
--
Edzer

-------------- next part --------------
A non-text attachment was scrubbed...
Name: S4MamMuri.jpg
Type: image/jpeg
Size: 53018 bytes
Desc: S4MamMuri.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051019/78a8bcf8/attachment.jpg>

From e.pebesma at geog.uu.nl  Wed Oct 19 16:48:12 2005
From: e.pebesma at geog.uu.nl (Edzer J. Pebesma)
Date: Wed, 19 Oct 2005 16:48:12 +0200
Subject: [R-sig-Geo] rGeo vs. gstat;
 Question on geostatistical method for specific experimental design
In-Reply-To: <F07A3234E1CDF74399E254240638883001E80DAE@bernina.fibl.ch>
References: <F07A3234E1CDF74399E254240638883001E80DAE@bernina.fibl.ch>
Message-ID: <43565CAC.1070603@geog.uu.nl>

Schlatter Christian wrote:

>Dear Edzer, dear list members
>
>Thank you very much for your comments. It made me investigate quite well. 
>
>The answer to the question "rGeo vs. gstat" is answered by your very helpful article of the DSC 2003 meeting in Vienna (chapter "introduction"): http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/Pebesma.pdf
>
>As I'm new and not yet so familiar with the customs of [R-sig-Geo], I did not feel about asking about my personal statistical problems but more about general statistical questions. 
>
>But as you asked for more detail I will gladly describe them (please let me know if this should not be the place for it):
>
>We are looking at parasitism rates in cabbage pests eggs (Lepidoptera: mainly Mamestra brassicae, Pieris rapae) in relation to distance effects from flowering strips. Specifically the following question: In what relation is the parasitism rate to the distance from the flower source (which in the case are sown flower strips). 
>
>Many practical restrictions led to a somehow "compromisical" experimental design consisting of four blocks in one cabbage field (two with flower strips, two without). Each block has two grids of 6x 8 plants (distance in between each plant: 3m) on each side of the flower strip (cp. Image), 96 plants per block. On each plant we collected pest eggs to determine parasitism rate. (Addtionaly we sampled on 4 different days).
>
>The main problem is the low parasitism rate in the field (only about 15-20% of all eggs have been parasitized), consequently many 0 values. 
>
>My idea was to calculate for each of the four blocks variogram parameters and to compare them afterwards (as we had two study sites, we have 8 blocks all in all, making 4 with flowers and 4 without). With so many "0" samples difficult to manage. 
>
>Now I found in Edzers article and the gstat manual the possibility of block kriging. Without knowing exactly what it is, I suppose there is the possibility to keep all four blocks together and defining the blocks with the rectangular block-defining possibility. 
>
>Is this a valid procedure?
>  
>
Before you apply block kriging I would strongly encourage you to
read an appropriate text book about what block kriging is. Blocks
in geostatistics usually refer to specific spatially contiguous regions, not
a combined effect of blocking in experimental design. Kriging refers
to spatial prediction, not the estimation of effect size.

Best regards,
--
Edzer



From paulojus at est.ufpr.br  Wed Oct 19 17:12:10 2005
From: paulojus at est.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Wed, 19 Oct 2005 13:12:10 -0200 (BRST)
Subject: [R-sig-Geo] rGeo vs. gstat;
 Question on geostatistical method for specific experimental design
In-Reply-To: <43565CAC.1070603@geog.uu.nl>
References: <F07A3234E1CDF74399E254240638883001E80DAE@bernina.fibl.ch>
	<43565CAC.1070603@geog.uu.nl>
Message-ID: <Pine.LNX.4.63.0510191309090.12995@est.ufpr.br>

Following Edzer comments my impression is that you are trying to use
the spatial correlation in the analysis of an experiment.

There are indeed some attemps in the literature using geostatistical 
models.
In this case there is no prediction involved but  just a non-independent
variance matrix for the error terms of your model.

For some designs this can be achieve using likfit() in geoR or functions 
in the packlage nlme

best
P.J.




On Wed, 19 Oct 2005, Edzer J. Pebesma wrote:

> Schlatter Christian wrote:
>
>> Dear Edzer, dear list members
>>
>> Thank you very much for your comments. It made me investigate quite well.
>>
>> The answer to the question "rGeo vs. gstat" is answered by your very helpful article of the DSC 2003 meeting in Vienna (chapter "introduction"): http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/Pebesma.pdf
>>
>> As I'm new and not yet so familiar with the customs of [R-sig-Geo], I did not feel about asking about my personal statistical problems but more about general statistical questions.
>>
>> But as you asked for more detail I will gladly describe them (please let me know if this should not be the place for it):
>>
>> We are looking at parasitism rates in cabbage pests eggs (Lepidoptera: mainly Mamestra brassicae, Pieris rapae) in relation to distance effects from flowering strips. Specifically the following question: In what relation is the parasitism rate to the distance from the flower source (which in the case are sown flower strips).
>>
>> Many practical restrictions led to a somehow "compromisical" experimental design consisting of four blocks in one cabbage field (two with flower strips, two without). Each block has two grids of 6x 8 plants (distance in between each plant: 3m) on each side of the flower strip (cp. Image), 96 plants per block. On each plant we collected pest eggs to determine parasitism rate. (Addtionaly we sampled on 4 different days).
>>
>> The main problem is the low parasitism rate in the field (only about 15-20% of all eggs have been parasitized), consequently many 0 values.
>>
>> My idea was to calculate for each of the four blocks variogram parameters and to compare them afterwards (as we had two study sites, we have 8 blocks all in all, making 4 with flowers and 4 without). With so many "0" samples difficult to manage.
>>
>> Now I found in Edzers article and the gstat manual the possibility of block kriging. Without knowing exactly what it is, I suppose there is the possibility to keep all four blocks together and defining the blocks with the rectangular block-defining possibility.
>>
>> Is this a valid procedure?
>>
>>
> Before you apply block kriging I would strongly encourage you to
> read an appropriate text book about what block kriging is. Blocks
> in geostatistics usually refer to specific spatially contiguous regions, not
> a combined effect of blocking in experimental design. Kriging refers
> to spatial prediction, not the estimation of effect size.
>
> Best regards,
> --
> Edzer
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

Paulo Justiniano Ribeiro Jr
LEG (Laborat?rio de Estat?stica e Geoinforma??o)
Departamento de Estat?stica
Universidade Federal do Paran?
Caixa Postal 19.081
CEP 81.531-990
Curitiba, PR  -  Brasil
Tel: (+55) 41 3361 3573
Fax: (+55) 41 3361 3141
e-mail: paulojus at est.ufpr.br
http://www.est.ufpr.br/~paulojus

From qiuqiuma at hotmail.com  Wed Oct 19 18:45:13 2005
From: qiuqiuma at hotmail.com (liyun ma)
Date: Wed, 19 Oct 2005 16:45:13 +0000
Subject: [R-sig-Geo] 2 questions about likfit in geoR
Message-ID: <BAY101-F27E8318C43B266CB246841C3700@phx.gbl>

Dear all,

I have two questions about using the likfit function in geoR.
One is about the trend estimation. The likfit function estimates the mean 
parameters and the covariance parameters at the same time. Is there any way 
to specify the trend function to be a fixed number? For example let mean be 
zero?

The second question is the function gives beta.var,  which is the estimated 
variance  for the mean
parameter beta. Can we also get the estimated variance for the covariance 
parameters kappa, sigma^2 and phi?

Thanks a lot!

Lauren Ma



From RRoa at fisheries.gov.fk  Wed Oct 19 18:43:26 2005
From: RRoa at fisheries.gov.fk (Ruben Roa)
Date: Wed, 19 Oct 2005 14:43:26 -0200
Subject: [R-sig-Geo] 2 questions about likfit in geoR
Message-ID: <03DCBBA079F2324786E8715BE538968A3DC505@FIGMAIL-CLUS01.FIG.FK>

> -----Original Message-----
> From:	r-sig-geo-bounces at stat.math.ethz.ch [SMTP:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of liyun ma
> Sent:	Wednesday, October 19, 2005 2:45 PM
> To:	r-sig-geo at stat.math.ethz.ch
> Subject:	[R-sig-Geo] 2 questions about likfit in geoR
> 
> Dear all,
> 
> I have two questions about using the likfit function in geoR.
> One is about the trend estimation. The likfit function estimates the mean 
> parameters and the covariance parameters at the same time. Is there any way 
> to specify the trend function to be a fixed number? For example let mean be 
> zero?
> 
> The second question is the function gives beta.var,  which is the estimated 
> variance  for the mean
> parameter beta. Can we also get the estimated variance for the covariance 
> parameters kappa, sigma^2 and phi?
> 
> Thanks a lot!
> 
> Lauren Ma
> 
--------------
Hi Lauren, 
First, you have to pass the argument Hessian=TRUE in likfit
Then to see the Hessian, you can use:
yourlikfitobject$info.minimisation.function
The Hessian will be the last item. By inverting the Hessian you will have the observed
covariance matrix. The observed variances will be in the main diagonal. In the Hessian the order
of parameters is as follows: phi, ratio of sigma^2 over tau^2, kappa, and lambda (the 
latter when you have included the Box-Cox parameter, recommended).
In my experience (always with lambda<>1) the parameter beta is underestimated. I have 
compared it with what you get after predictions (with mean(krige.object$predict); this should 
be similar to, though not identical with beta) and with the simple sample mean of the original data and 
beta has always been much smaller. I contacted the author of geoR (Paulo Ribeiro Jr) and he said that 
he would check the code. To get beta in the original units you have to back-transform it (assuming
lambda is <>1) usign the BCtransform function.
I hope this helps.
Ruben



From nikko at hailmail.net  Wed Oct 19 21:26:54 2005
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Wed, 19 Oct 2005 14:26:54 -0500
Subject: [R-sig-Geo] rGeo vs. gstat;
 Question on geostatistical method for specific experimental design
Message-ID: <1129750014.7662.245553319@webmail.messagingengine.com>

Hi Christian,
I think in this particular case geostatistics is not entirely
appropriate. Given your design you have a generalized
linear mixed model (glmm) where you have plants nested in plots, plots
nested in blocks, and your flowerstrip effect 
at the block level. Then you have your field effect which in statistical
parlance would be a blocking factor. Since
your data is binary on each plant, you have a binomial error structure.

On the other hand, what might be interesting is you have 16 replicated
grids of 96 plants. Aside from the above design
you may want to look at some spatial aggregation measure of parasitism
events and compare those across plots.

Cheers
Nicholas


Date: Wed, 19 Oct 2005 09:13:46 +0200
From: "Schlatter Christian" <christian.schlatter at fibl.org>
Subject: Re: [R-sig-Geo] rGeo vs. gstat;        Question on
geostatistical
        method for specific experimental design
To: "Edzer J. Pebesma" <e.pebesma at geo.uu.nl>
Cc: r-sig-geo at stat.math.ethz.ch
Message-ID: <F07A3234E1CDF74399E254240638883001E80DAE at bernina.fibl.ch>
Content-Type: text/plain; charset="iso-8859-1"

Dear Edzer, dear list members

Thank you very much for your comments. It made me investigate quite
well.

The answer to the question "rGeo vs. gstat" is answered by your very
helpful article of the DSC 2003 meeting in Vienna (chapter
"introduction"):
http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/Pebesma.pdf

As I'm new and not yet so familiar with the customs of [R-sig-Geo], I
did not feel about asking about my personal statistical problems but
more about general statistical questions.

But as you asked for more detail I will gladly describe them (please let
me know if this should not be the place for it):

We are looking at parasitism rates in cabbage pests eggs (Lepidoptera:
mainly Mamestra brassicae, Pieris rapae) in relation to distance effects
from flowering strips. Specifically the following question: In what
relation is the parasitism rate to the distance from the flower source
(which in the case are sown flower strips).

Many practical restrictions led to a somehow "compromisical"
experimental design consisting of four blocks in one cabbage field (two
with flower strips, two without). Each block has two grids of 6x 8
plants (distance in between each plant: 3m) on each side of the flower
strip (cp. Image), 96 plants per block. On each plant we collected pest
eggs to determine parasitism rate. (Addtionaly we sampled on 4 different
days).

The main problem is the low parasitism rate in the field (only about
15-20% of all eggs have been parasitized), consequently many 0 values.

My idea was to calculate for each of the four blocks variogram
parameters and to compare them afterwards (as we had two study sites, we
have 8 blocks all in all, making 4 with flowers and 4 without). With so
many "0" samples difficult to manage.

Now I found in Edzers article and the gstat manual the possibility of
block kriging. Without knowing exactly what it is, I suppose there is
the possibility to keep all four blocks together and defining the blocks
with the rectangular block-defining possibility.

Is this a valid procedure?

Best wishes

Christian Schlatter (Research institute for organic farming,
Switzerland)

-----Urspr?ngliche Nachricht-----
Von: Edzer J. Pebesma [mailto:e.pebesma at geo.uu.nl]
Gesendet: Montag, 17. Oktober 2005 23:43
An: Schlatter Christian
Cc: r-sig-geo at stat.math.ethz.ch
Betreff: Re: [R-sig-Geo] rGeo vs. gstat

Schlatter Christian wrote:

>Dear list members
>
>I'm very new to R but a little informed about geostatistics.
>
>As I was looking for possibilities of geostatistical analysis in R I encountered at least two very interesting packages:
>
>Rgeo and gstat
>
>And of course I'm wondering now about the one which fits better my needs which are the comparison of spatial data (insect parasitism rates) for different fields in which we collected data.
>
>
>
Christian, I too find these two packages very interesting. Another
package that you might
find interesting besides geoR is geoRglm. However, you've told us too
little about what
your problem is to give you advise about which methods to use, and where
to find them.

You will find even more packages for geostatistical analysis on the
spatial task view:
R home page -> CRAN -> CRAN mirror -> Task Views -> Spatial.

Best regards,
--
Edzer



From naren_svk at yahoo.com  Thu Oct 20 17:46:07 2005
From: naren_svk at yahoo.com (Narendran Kodandapani)
Date: Thu, 20 Oct 2005 08:46:07 -0700 (PDT)
Subject: [R-sig-Geo] remove first trend from dataset
Message-ID: <20051020154607.96355.qmail@web33315.mail.mud.yahoo.com>

Dear all,

I am modeling fire occurrence in a landscape.  I have
150 points spread across the landscape.  However I
notice a 1st order trend when I fit the variogram.  Is
there someway that I can remove this trend from the
data, before I begin the modeling process.

Thanks in advance,

Naren



From jahernan at umn.edu  Thu Oct 20 23:00:03 2005
From: jahernan at umn.edu (Jose A. Hernandez)
Date: Thu, 20 Oct 2005 16:00:03 -0500
Subject: [R-sig-Geo] remove first trend from dataset
In-Reply-To: <20051020154607.96355.qmail@web33315.mail.mud.yahoo.com>
References: <20051020154607.96355.qmail@web33315.mail.mud.yahoo.com>
Message-ID: <43580553.70804@umn.edu>

Hi Naren,

If understand your problem correctly, all you have to do is to remove 
your trend by using linear regression.

Assuming you have geostatiscal data (point observations of a 
continuously varying quantity over a region), then you want to estimate 
the mean function, remove the trend (large scale variation) using linear 
regression and plot the variogram of the residuals (micro scale variation).

I believe geoR has implemented the trend removal quite nicely, but I am 
sure other packages have done it as well.

There is an example of trend removal in this paper by Paulo, Ole and Peter:

http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/RibeiroEtAl.pdf

You can do it by hand by fitting a this model using lm():

z ~ b0 + b1 x + b2 y + e

and plotting the variogram of the residuals. If you wish to predict z, 
for mapping using kriging, then, you would have to add the trend back to 
the predicted residuals.

Other methods such as median polish are also used, here is a nice 
example of the trend removal using the median polish on R by Petrutza 
Caragea from IA State:

http://www.public.iastate.edu/~pcaragea/S4_506/coal_analysis.txt

Cheers,

Jose


Narendran Kodandapani wrote:
> Dear all,
> 
> I am modeling fire occurrence in a landscape.  I have
> 150 points spread across the landscape.  However I
> notice a 1st order trend when I fit the variogram.  Is
> there someway that I can remove this trend from the
> data, before I begin the modeling process.
> 
> Thanks in advance,
> 
> Naren
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Jose A. Hernandez
Ph.D. Candidate
Precision Agriculture Center

Department of Soil, Water, and Climate
University of Minnesota
1991 Upper Buford Circle
St. Paul, MN 55108

Ph. (612) 625-0445, Fax. (612) 625-2208



From Roger.Bivand at nhh.no  Fri Oct 21 15:10:43 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 21 Oct 2005 15:10:43 +0200 (CEST)
Subject: [R-sig-Geo] New sp add-on packages on sourceforge repository
Message-ID: <Pine.LNX.4.44.0510211454280.19619-100000@reclus.nhh.no>

I have released two new sp add-on packages on the r-spatial repository.

Rgshhs converts GSHHS shorelines (as closed polygons) to sp class
SpatialPolygons, which can then be written out as shapefiles for the
chosen region. It's now very slow for full resolution, because clipping
the largest land polygons takes a lot of time, but hopefully people don't
do that every time they need data. It is provided with the coarse dataset,
but works with the full and the others. It leaves the longitude 
coordinates in the -20 to 360 range like the data source. Details of the 
Global Self-consistent, Hierarchical, High-resolution Shoreline Database 
are avialable from:

http://www.soest.hawaii.edu/wessel/gshhs/gshhs.html

where the low, intermediate, high, and full resolution data may be 
downloaded from. I'd be grateful for ideas for making it faster, and am 
looking at providing indices of which level polygons are included in 
next-level polygons preprocessed in the package rather than computing them 
each time for chosen polygons.

A second package is spspatstat, providing interfaces between some sp 
classes and the well-supported point pattern analysis package spatstat. 
The spatstat ppp and owin classes are matched with sp equivalents.

To get a feel for where sp is going, (and after installing sp and 
spatstat from CRAN with their dependencies, and the new packages from 
http://r-spatial.sourceforge.net/R), try:

library(Rgshhs)
library(spspatstat)
gshhs.c.b <- system.file("share/gshhs_c.b", package = "Rgshhs")
NZx <- c(160, 180)
NZy <- c(-50, -30)
NZ <- Rgshhs(gshhs.c.b, xlim = NZx, ylim = NZy)
plot(runifpoint(500, as(NZ$SP, "owin")))

Hoping for feedback,

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From stanimura-ngs at umin.ac.jp  Mon Oct 24 10:07:12 2005
From: stanimura-ngs at umin.ac.jp (Susumu Tanimura)
Date: Mon, 24 Oct 2005 17:07:12 +0900
Subject: [R-sig-Geo] historical descriptions for mapping function in R
Message-ID: <20051024170712.c3dcc6da.stanimura-ngs@umin.ac.jp>

Hi there,

Please someone tell me about the initial release date of maptools and
friends' packages, history about these packages, or related references for
citation.  I am writing about a review of mapping function in R for
Japanese readers.  

maptools(changes = T) showed only after 0.4-2.

It is somewhat easy to review the status quo, but hard to find out
historical descriptions.

Thanks,

--
Susumu Tanimura



From Roger.Bivand at nhh.no  Mon Oct 24 10:45:03 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 24 Oct 2005 10:45:03 +0200 (CEST)
Subject: [R-sig-Geo] historical descriptions for mapping function in R
In-Reply-To: <20051024170712.c3dcc6da.stanimura-ngs@umin.ac.jp>
Message-ID: <Pine.LNX.4.44.0510241033210.32683-100000@reclus.nhh.no>

On Mon, 24 Oct 2005, Susumu Tanimura wrote:

> Hi there,
> 
> Please someone tell me about the initial release date of maptools and
> friends' packages, history about these packages, or related references for
> citation.  I am writing about a review of mapping function in R for
> Japanese readers.  
> 
> maptools(changes = T) showed only after 0.4-2.
> 
> It is somewhat easy to review the status quo, but hard to find out
> historical descriptions.

My copy of 0.1-alpha is dated 15 August 2000, and was written by Nicholas
Lewin-Koh. It contained the first implementations of read.shape() and
plot.Map(). The package was first published on CRAN in September 2003,
see http://cran.r-project.org/src/contrib/Archive/M/. The polylist S3
objects were moved to maptools from spdep in 2003.

Hope this helps,

Roger

> 
> Thanks,
> 
> --
> Susumu Tanimura
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From stanimura-ngs at umin.ac.jp  Mon Oct 24 13:05:18 2005
From: stanimura-ngs at umin.ac.jp (Susumu Tanimura)
Date: Mon, 24 Oct 2005 20:05:18 +0900
Subject: [R-sig-Geo] historical descriptions for mapping function in R
In-Reply-To: <Pine.LNX.4.44.0510241033210.32683-100000@reclus.nhh.no>
References: <20051024170712.c3dcc6da.stanimura-ngs@umin.ac.jp>
	<Pine.LNX.4.44.0510241033210.32683-100000@reclus.nhh.no>
Message-ID: <20051024200518.3999bf09.stanimura-ngs@umin.ac.jp>

Dear Roger,

> My copy of 0.1-alpha is dated 15 August 2000, and was written by
> Nicholas Lewin-Koh. It contained the first implementations of read.shape
> () and plot.Map(). The package was first published on CRAN in September
> 2003, see http://cran.r-project.org/src/contrib/Archive/M/. The
> polylist S3 objects were moved to maptools from spdep in 2003.

This is a great help for me.  I greatly appreciate your kindness.

It is interesting that the first publishing year of maptools is the
same as the year of pre-DSC'03 spatial data workshop. I enjoy
reviewing the history of map functions in R, although most of web
resources are in your site http://sal.uiuc.edu/csiss/Rgeo/.

Best regards,

--
Susumu Tanimura



From chabotd at globetrotter.net  Mon Oct 24 15:39:50 2005
From: chabotd at globetrotter.net (Denis Chabot)
Date: Mon, 24 Oct 2005 09:39:50 -0400
Subject: [R-sig-Geo] R-sig-Geo Digest, Vol 26, Issue 12
In-Reply-To: <mailman.21.1129975202.22918.r-sig-geo@stat.math.ethz.ch>
References: <mailman.21.1129975202.22918.r-sig-geo@stat.math.ethz.ch>
Message-ID: <EADCB054-D5E2-4B68-BAAA-745A2B1558B2@globetrotter.net>

Hi Roger,

Many thanks for Rgshhs. I am very glad to have this additional source  
of coastlines.

A few comments.

I am impressed with axis label handling when using the "plot" command  
on the spatial polygons imported by Rghhs. I like the suffix given to  
each number, e.g. "300?E". How do you do this? Setting some kind of  
"unit" attribute to the longitudes and latitudes? I don't know how to  
do this, otherwise I'd implement it in the maps I produce with  
PBSmapping.

Second surprise: I reimported the same area but using the option  
"shift=TRUE" to get longitudes West. I'm used to these numbers being  
negative, and indeed they still are here as I must select negative  
longitudes to define xlim. But when issuing the plot command, they  
are labelled properly, i.e. -70 becomes "70?W". In PBSmapping I must  
turn automatic xaxis labelling off and relabel myself. I may switch  
to your classes and methods yet!

However in my first test, I got the lakes to be coloured "azure2" but  
not the ocean, which was white:

NWA.i <- Rgshhs("gshhs_i.b", shift=TRUE, xlim = c(280,340), ylim = c 
(35,75), verbose = TRUE)
plot(NWA.i$SP, xlim=c(-70, -55), ylim=c(45, 51), col="khaki",  
pbg="lightblue", axes=T)

So I read the html doc on sp and discovered pbg was the color of  
"holes", which lakes are but not the ocean, which is just the absence  
of polygons. So I added a bg color to the above plot command, which  
should have taken care of that, but it did not. Do you know why?

Another question: the help on Rgshhs says we can import only land,  
for instance, instead of the 4 hierarchic types in gshhs files, by  
adding "level=1". But if I import everything, can I decide later to  
make a plot with land only? Or to create a layer with only lakes (no  
coastline)? I consulted the help for sp as well as the documentation  
for sp but could not figure out how to do this. When I print the list  
created by Rgshhs or even just the SP part of it, I see that SP is  
made of "slots", one of which contains the level. This information is  
also available in the spatialdata part. But I don't know how to  
select just the polygons with "level==2".

Cheers,

Denis
Le 05-10-22 ? 06:00, r-sig-geo-request at stat.math.ethz.ch a ?crit :

> Send R-sig-Geo mailing list submissions to
>     r-sig-geo at stat.math.ethz.ch
>
> To subscribe or unsubscribe via the World Wide Web, visit
>     https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> or, via email, send a message with subject or body 'help' to
>     r-sig-geo-request at stat.math.ethz.ch
>
> You can reach the person managing the list at
>     r-sig-geo-owner at stat.math.ethz.ch
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-sig-Geo digest..."
>
>
> Today's Topics:
>
>    1. New sp add-on packages on sourceforge repository (Roger Bivand)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Fri, 21 Oct 2005 15:10:43 +0200 (CEST)
> From: Roger Bivand <Roger.Bivand at nhh.no>
> Subject: [R-sig-Geo] New sp add-on packages on sourceforge repository
> To: r-sig-geo at stat.math.ethz.ch
> Message-ID: <Pine.LNX.4.44.0510211454280.19619-100000 at reclus.nhh.no>
> Content-Type: TEXT/PLAIN; charset=US-ASCII
>
> I have released two new sp add-on packages on the r-spatial  
> repository.
>
> Rgshhs converts GSHHS shorelines (as closed polygons) to sp class
> SpatialPolygons, which can then be written out as shapefiles for the
> chosen region. It's now very slow for full resolution, because  
> clipping
> the largest land polygons takes a lot of time, but hopefully people  
> don't
> do that every time they need data. It is provided with the coarse  
> dataset,
> but works with the full and the others. It leaves the longitude
> coordinates in the -20 to 360 range like the data source. Details  
> of the
> Global Self-consistent, Hierarchical, High-resolution Shoreline  
> Database
> are avialable from:
>
> http://www.soest.hawaii.edu/wessel/gshhs/gshhs.html
>
> where the low, intermediate, high, and full resolution data may be
> downloaded from. I'd be grateful for ideas for making it faster,  
> and am
> looking at providing indices of which level polygons are included in
> next-level polygons preprocessed in the package rather than  
> computing them
> each time for chosen polygons.
>
> A second package is spspatstat, providing interfaces between some sp
> classes and the well-supported point pattern analysis package  
> spatstat.
> The spatstat ppp and owin classes are matched with sp equivalents.
>
> To get a feel for where sp is going, (and after installing sp and
> spatstat from CRAN with their dependencies, and the new packages from
> http://r-spatial.sourceforge.net/R), try:
>
> library(Rgshhs)
> library(spspatstat)
> gshhs.c.b <- system.file("share/gshhs_c.b", package = "Rgshhs")
> NZx <- c(160, 180)
> NZy <- c(-50, -30)
> NZ <- Rgshhs(gshhs.c.b, xlim = NZx, ylim = NZy)
> plot(runifpoint(500, as(NZ$SP, "owin")))
>
> Hoping for feedback,
>
> Roger
>
> -- 
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian  
> School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>
>
> ------------------------------
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> End of R-sig-Geo Digest, Vol 26, Issue 12
> *****************************************
>



From Roger.Bivand at nhh.no  Mon Oct 24 18:04:45 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 24 Oct 2005 18:04:45 +0200 (CEST)
Subject: [R-sig-Geo] New sp add-on packages on sourceforge repository
In-Reply-To: <EADCB054-D5E2-4B68-BAAA-745A2B1558B2@globetrotter.net>
Message-ID: <Pine.LNX.4.44.0510241747410.1705-100000@reclus.nhh.no>

On Mon, 24 Oct 2005, Denis Chabot wrote:

> Hi Roger,
> 
> Many thanks for Rgshhs. I am very glad to have this additional source  
> of coastlines.
> 
> A few comments.
> 
> I am impressed with axis label handling when using the "plot" command  
> on the spatial polygons imported by Rghhs. I like the suffix given to  
> each number, e.g. "300?E". How do you do this? Setting some kind of  
> "unit" attribute to the longitudes and latitudes? I don't know how to  
> do this, otherwise I'd implement it in the maps I produce with  
> PBSmapping.

It is sp parsing the projection slot of the object and finding "longlat", 
inserted here automatically because we know the coordinate reference 
system of the data. The actual code is in sp, and was written by Edzer 
Pebesma, it is rather neat; look at sp:::degreeLabelsNS, 
sp:::degreeLabelsEW, and sp:::plot.Spatial - something similar should work 
in PBSmapping with a test on LL.

> 
> Second surprise: I reimported the same area but using the option  
> "shift=TRUE" to get longitudes West. I'm used to these numbers being  
> negative, and indeed they still are here as I must select negative  
> longitudes to define xlim. But when issuing the plot command, they  
> are labelled properly, i.e. -70 becomes "70?W". In PBSmapping I must  
> turn automatic xaxis labelling off and relabel myself. I may switch  
> to your classes and methods yet!

The next release of sp will label 300?E as 60?W, but the underlying 
coordinates will stay in the GSHHS format, so you'll still need shift. The 
shift argument works badly for polygons crossing 180?, but maybe that 
isn't a practical problem, because people working there probably want to 
stay in the 150-210 range anyway.

> 
> However in my first test, I got the lakes to be coloured "azure2" but  
> not the ocean, which was white:
> 
> NWA.i <- Rgshhs("gshhs_i.b", shift=TRUE, xlim = c(280,340), ylim = c 
> (35,75), verbose = TRUE)
> plot(NWA.i$SP, xlim=c(-70, -55), ylim=c(45, 51), col="khaki",  
> pbg="lightblue", axes=T)
> 
> So I read the html doc on sp and discovered pbg was the color of  
> "holes", which lakes are but not the ocean, which is just the absence  
> of polygons. So I added a bg color to the above plot command, which  
> should have taken care of that, but it did not. Do you know why?

The next release of sp will pass the bg= argument through plot.Spatial 
properly, thanks for reminding me.

> 
> Another question: the help on Rgshhs says we can import only land,  
> for instance, instead of the 4 hierarchic types in gshhs files, by  
> adding "level=1". But if I import everything, can I decide later to  
> make a plot with land only? Or to create a layer with only lakes (no  
> coastline)? I consulted the help for sp as well as the documentation  
> for sp but could not figure out how to do this. When I print the list  
> created by Rgshhs or even just the SP part of it, I see that SP is  
> made of "slots", one of which contains the level. This information is  
> also available in the spatialdata part. But I don't know how to  
> select just the polygons with "level==2".

The sp polygons do not know about levels, so once things are inside a 
Polygons object, there is no way back out. I think this means separate 
imports for levels 1, 1:2, 1:3 or 1:4. 

I'm running several jobs now to pre-can the inclusion data of which GSHHS 
polygons at levels 4:2 belong to which at level 1, which should make 
importing shorelines much faster, so a revision will be along before too 
many days have gone, I hope.

Best wishes,

Roger

> 
> Cheers,
> 
> Denis
> Le 05-10-22 ? 06:00, r-sig-geo-request at stat.math.ethz.ch a ?crit :
> 
> > Send R-sig-Geo mailing list submissions to
> >     r-sig-geo at stat.math.ethz.ch
> >
> > To subscribe or unsubscribe via the World Wide Web, visit
> >     https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > or, via email, send a message with subject or body 'help' to
> >     r-sig-geo-request at stat.math.ethz.ch
> >
> > You can reach the person managing the list at
> >     r-sig-geo-owner at stat.math.ethz.ch
> >
> > When replying, please edit your Subject line so it is more specific
> > than "Re: Contents of R-sig-Geo digest..."
> >
> >
> > Today's Topics:
> >
> >    1. New sp add-on packages on sourceforge repository (Roger Bivand)
> >
> >
> > ----------------------------------------------------------------------
> >
> > Message: 1
> > Date: Fri, 21 Oct 2005 15:10:43 +0200 (CEST)
> > From: Roger Bivand <Roger.Bivand at nhh.no>
> > Subject: [R-sig-Geo] New sp add-on packages on sourceforge repository
> > To: r-sig-geo at stat.math.ethz.ch
> > Message-ID: <Pine.LNX.4.44.0510211454280.19619-100000 at reclus.nhh.no>
> > Content-Type: TEXT/PLAIN; charset=US-ASCII
> >
> > I have released two new sp add-on packages on the r-spatial  
> > repository.
> >
> > Rgshhs converts GSHHS shorelines (as closed polygons) to sp class
> > SpatialPolygons, which can then be written out as shapefiles for the
> > chosen region. It's now very slow for full resolution, because  
> > clipping
> > the largest land polygons takes a lot of time, but hopefully people  
> > don't
> > do that every time they need data. It is provided with the coarse  
> > dataset,
> > but works with the full and the others. It leaves the longitude
> > coordinates in the -20 to 360 range like the data source. Details  
> > of the
> > Global Self-consistent, Hierarchical, High-resolution Shoreline  
> > Database
> > are avialable from:
> >
> > http://www.soest.hawaii.edu/wessel/gshhs/gshhs.html
> >
> > where the low, intermediate, high, and full resolution data may be
> > downloaded from. I'd be grateful for ideas for making it faster,  
> > and am
> > looking at providing indices of which level polygons are included in
> > next-level polygons preprocessed in the package rather than  
> > computing them
> > each time for chosen polygons.
> >
> > A second package is spspatstat, providing interfaces between some sp
> > classes and the well-supported point pattern analysis package  
> > spatstat.
> > The spatstat ppp and owin classes are matched with sp equivalents.
> >
> > To get a feel for where sp is going, (and after installing sp and
> > spatstat from CRAN with their dependencies, and the new packages from
> > http://r-spatial.sourceforge.net/R), try:
> >
> > library(Rgshhs)
> > library(spspatstat)
> > gshhs.c.b <- system.file("share/gshhs_c.b", package = "Rgshhs")
> > NZx <- c(160, 180)
> > NZy <- c(-50, -30)
> > NZ <- Rgshhs(gshhs.c.b, xlim = NZx, ylim = NZy)
> > plot(runifpoint(500, as(NZ$SP, "owin")))
> >
> > Hoping for feedback,
> >
> > Roger
> >
> > -- 
> > Roger Bivand
> > Economic Geography Section, Department of Economics, Norwegian  
> > School of
> > Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> > Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> > e-mail: Roger.Bivand at nhh.no
> >
> >
> >
> > ------------------------------
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
> > End of R-sig-Geo Digest, Vol 26, Issue 12
> > *****************************************
> >
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From ari.jolma at tkk.fi  Tue Oct 25 09:12:47 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Tue, 25 Oct 2005 10:12:47 +0300
Subject: [R-sig-Geo] iEMSs 2006 conference and workshop for free and open
	geospatial tools
Message-ID: <435DDAEF.300@tkk.fi>

Dear R-spatial users,

Maybe this is a good moment to advocate the iEMSs 2006 meeting in 
Burlington, Vermont. The URL of this conference is 
http://www.iemss.org/iemss2006/ I usually don't feel very confident 
about sending a bit OT messages like this to focused lists, so please 
forgive me.

This is the third conference of iEMSs (the first two were in Switzerland 
and Germany), which is an independent international scientific 
organisation for advancing environmental modelling and software and 
uniting people working in that domain. iEMSs has strong links to MODSIM, 
which has had several successful conferences in Australia and New Zealand.

What makes iEMSs 2006 particularly interesting, and why I'm advocting it 
for you, is the workshop nr 13 "Open geospatial tools and methods in 
environmental modeling and management", which I'm organizing with Ned 
Horning. The president of iEMSs has this to say about iEMSs 2006:

The Summit is incorporating a very innovative program of workshops (some 
15 at present), as well as the more standard sessions (another 15 or so) 
with presentations. The website has a list of themes currently and we 
would be pleased to consider other topics from you. But we refer you to 
the website and accompanying blog to examine which existing sessions you 
may wish to join - in which case you should contact the organisers of 
that session. For most of you, we expect that the current sessions on 
offer will cover your interests.

For workshop organisers we are requesting at least one rough draft 
INVITED POSITION PAPER (IPP) of the issues (opportunities, challenges 
etc.) by the end of November, with other contributed papers optional for 
workshop attendees. All serious participants would at least be required 
to have an abstract. Position papers, other full papers and abstracts 
would be peer-reviewed and pre-published in the Summit Proceedings 
before the Summit. We will reserve at least one book in the Elsevier 
IDEA Series that publishes a chapter on the findings of each workshop 
and their IPP  - these would be updated versions of the Position papers, 
revised based on the workshop outcomes. We also have special journal 
issues available.

For standard sessions there will be a more formal structure where there 
is a 20 minute or so slot for presentation, and pre-published papers for 
these are mandatory, albeit with a timeline of February 2006 for 
submission to reviewers. However standard sessions could easily be 
converted to a workshop format anytime, subject to the session 
organisers and authors agreeing.

I'd like to encourage you to participate in the conference and I'd 
especially like to see a contribution about R-spatial and its use in 
advancing environmental modeling  in the geospatial tools workshop.

Please do not hesitate to contact me if you're interested in attending 
and contributing to the geospatial tools workshop.

Best regards,

Ari Jolma

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From m_nica at hotmail.com  Sat Oct 29 00:37:42 2005
From: m_nica at hotmail.com (Mihai Nica)
Date: Fri, 28 Oct 2005 17:37:42 -0500
Subject: [R-sig-Geo] 3D map
Message-ID: <BAY105-F29C8132C3BFF04CE838D67F86B0@phx.gbl>

Could someone advise about a way to draw a 3D map... say the map of US 
states having as elevation the number of people in each state. Am I missing 
something? A 3D map search revealed nothing helpful.

Thanks,

mihai

Mihai Nica, ABD
Jackson State University
170 East Griffith Street G5
Jackson, MS 39201
601 914 0361



From e.pebesma at geo.uu.nl  Sat Oct 29 08:55:21 2005
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Sat, 29 Oct 2005 08:55:21 +0200
Subject: [R-sig-Geo] 3D map
In-Reply-To: <BAY105-F29C8132C3BFF04CE838D67F86B0@phx.gbl>
References: <BAY105-F29C8132C3BFF04CE838D67F86B0@phx.gbl>
Message-ID: <43631CD9.40906@geo.uu.nl>

Mihai Nica wrote:

>Could someone advise about a way to draw a 3D map... say the map of US 
>states having as elevation the number of people in each state. Am I missing 
>something? A 3D map search revealed nothing helpful.
>
>Thanks,
>
>mihai
>
>Mihai Nica, ABD
>Jackson State University
>170 East Griffith Street G5
>Jackson, MS 39201
>601 914 0361
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  
>
You may want to try persp, or wireframe in lattice.
--
Edzer



From Roger.Bivand at nhh.no  Sat Oct 29 09:45:29 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 29 Oct 2005 09:45:29 +0200 (CEST)
Subject: [R-sig-Geo] 3D map
In-Reply-To: <43631CD9.40906@geo.uu.nl>
Message-ID: <Pine.LNX.4.44.0510290939100.5805-100000@reclus.nhh.no>

On Sat, 29 Oct 2005, Edzer J. Pebesma wrote:

> Mihai Nica wrote:
> 
> >Could someone advise about a way to draw a 3D map... say the map of US 
> >states having as elevation the number of people in each state. Am I missing 
> >something? A 3D map search revealed nothing helpful.
> >
> >Thanks,
> >
> >mihai
> >
> >Mihai Nica, ABD
> >Jackson State University
> >170 East Griffith Street G5
> >Jackson, MS 39201
> >601 914 0361
> >
> >_______________________________________________
> >R-sig-Geo mailing list
> >R-sig-Geo at stat.math.ethz.ch
> >https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >  
> >
> You may want to try persp, or wireframe in lattice.

That was what I thought first, but I think it actually is the 3D histogram 
or exploding pie chart question, how to make a 3D representation of 
columns of regular or irregular polygons scaled by some z variable in 
height. The reader will see different things depending on viewing point 
and height, I would not in general recommend it as either a presentation 
or analytic graphic.

Roger

> --
> Edzer
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From m_nica at hotmail.com  Sat Oct 29 20:55:47 2005
From: m_nica at hotmail.com (Mihai Nica)
Date: Sat, 29 Oct 2005 13:55:47 -0500
Subject: [R-sig-Geo] 3D map
In-Reply-To: <Pine.LNX.4.44.0510290939100.5805-100000@reclus.nhh.no>
Message-ID: <BAY105-F34F8DF12CA4C9822F51B69F86A0@phx.gbl>

Yes, I kind of thought about that myself... Thanks! I will just drop it.

Mihai Nica, ABD
Jackson State University
170 East Griffith Street G5
Jackson, MS 39201
601 914 0361





>From: Roger Bivand <Roger.Bivand at nhh.no>
>Reply-To: Roger.Bivand at nhh.no
>To: "Edzer J. Pebesma" <e.pebesma at geo.uu.nl>
>CC: Mihai Nica <m_nica at hotmail.com>,  <r-sig-geo at stat.math.ethz.ch>
>Subject: Re: [R-sig-Geo] 3D map
>Date: Sat, 29 Oct 2005 09:45:29 +0200 (CEST)
>
>On Sat, 29 Oct 2005, Edzer J. Pebesma wrote:
>
> > Mihai Nica wrote:
> >
> > >Could someone advise about a way to draw a 3D map... say the map of US
> > >states having as elevation the number of people in each state. Am I 
>missing
> > >something? A 3D map search revealed nothing helpful.
> > >
> > >Thanks,
> > >
> > >mihai
> > >
> > >Mihai Nica, ABD
> > >Jackson State University
> > >170 East Griffith Street G5
> > >Jackson, MS 39201
> > >601 914 0361
> > >
> > >_______________________________________________
> > >R-sig-Geo mailing list
> > >R-sig-Geo at stat.math.ethz.ch
> > >https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > >
> > >
> > You may want to try persp, or wireframe in lattice.
>
>That was what I thought first, but I think it actually is the 3D histogram
>or exploding pie chart question, how to make a 3D representation of
>columns of regular or irregular polygons scaled by some z variable in
>height. The reader will see different things depending on viewing point
>and height, I would not in general recommend it as either a presentation
>or analytic graphic.
>
>Roger
>
> > --
> > Edzer
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
>--
>Roger Bivand
>Economic Geography Section, Department of Economics, Norwegian School of
>Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>e-mail: Roger.Bivand at nhh.no
>



From White.Denis at epamail.epa.gov  Sun Oct 30 20:45:29 2005
From: White.Denis at epamail.epa.gov (White.Denis at epamail.epa.gov)
Date: Sun, 30 Oct 2005 11:45:29 -0800
Subject: [R-sig-Geo] 3D map
In-Reply-To: <BAY105-F34F8DF12CA4C9822F51B69F86A0@phx.gbl>
Message-ID: <OF1578BA53.DFC46049-ON882570AA.006B4052-882570AA.006C8EEA@epamail.epa.gov>

As with any graphic technique, the utility and appropriateness depend on
the objective of the presentation.  Showing polygons in persective
according to some attribute is certainly not inherently a bad idea.
Here are a couple of examples from experimental GIS software develped in
the 1970s.  ESRI's 3D Analyst has these capabilities and there are
examples of that software on the web.

Denis White
   US EPA, 200 SW 35th St, Corvallis, Oregon, 97333 USA
   voice: 541.754.4476, email: white.denis at epa.gov
   web: www.epa.gov/wed/pages/staff/white/

(See attached file: example1.prism.jpg)(See attached file:
example2.prism.jpg)

r-sig-geo-bounces at stat.math.ethz.ch wrote on 2005-10-29 11:55:47:

> Yes, I kind of thought about that myself... Thanks! I will just drop
it.
>
> Mihai Nica, ABD
> Jackson State University
> 170 East Griffith Street G5
> Jackson, MS 39201
> 601 914 0361
>
>
> >From: Roger Bivand <Roger.Bivand at nhh.no>
> >Reply-To: Roger.Bivand at nhh.no
> >To: "Edzer J. Pebesma" <e.pebesma at geo.uu.nl>
> >CC: Mihai Nica <m_nica at hotmail.com>,  <r-sig-geo at stat.math.ethz.ch>
> >Subject: Re: [R-sig-Geo] 3D map
> >Date: Sat, 29 Oct 2005 09:45:29 +0200 (CEST)
> >
> >On Sat, 29 Oct 2005, Edzer J. Pebesma wrote:
> >
> > > Mihai Nica wrote:
> > >
> > > >Could someone advise about a way to draw a 3D map... say the map
of US
> > > >states having as elevation the number of people in each state. Am
I
> >missing
> > > >something? A 3D map search revealed nothing helpful.
> > > >
> > > >Thanks,
> > > >
> > > >mihai
> > > >
> > > >Mihai Nica, ABD
> > > >Jackson State University
> > > >170 East Griffith Street G5
> > > >Jackson, MS 39201
> > > >601 914 0361
> > > >
> > > >_______________________________________________
> > > >R-sig-Geo mailing list
> > > >R-sig-Geo at stat.math.ethz.ch
> > > >https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > > >
> > > >
> > > You may want to try persp, or wireframe in lattice.
> >
> >That was what I thought first, but I think it actually is the 3D
histogram
> >or exploding pie chart question, how to make a 3D representation of
> >columns of regular or irregular polygons scaled by some z variable in
> >height. The reader will see different things depending on viewing
point
> >and height, I would not in general recommend it as either a
presentation
> >or analytic graphic.
> >
> >Roger
> >
> > > --
> > > Edzer
> > >
> >
> >--
> >Roger Bivand
> >Economic Geography Section, Department of Economics, Norwegian School
of
> >Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> >Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> >e-mail: Roger.Bivand at nhh.no
> >
-------------- next part --------------
A non-text attachment was scrubbed...
Name: example1.prism.jpg
Type: image/jpeg
Size: 20699 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051030/3c813a72/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: example2.prism.jpg
Type: image/jpeg
Size: 40552 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051030/3c813a72/attachment-0001.jpg>

