From mel at mbacou.com  Fri Sep  1 09:18:47 2017
From: mel at mbacou.com (Bacou, Melanie)
Date: Fri, 1 Sep 2017 03:18:47 -0400
Subject: [R-sig-Geo] Square vs. honeycomb raster grids
Message-ID: <bcd55749-225d-cd57-fea6-9d44e561c5a1@mbacou.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170901/2e0f0da6/attachment.html>

From Roger.Bivand at nhh.no  Fri Sep  1 09:53:14 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 1 Sep 2017 09:53:14 +0200
Subject: [R-sig-Geo] Square vs. honeycomb raster grids
In-Reply-To: <bcd55749-225d-cd57-fea6-9d44e561c5a1@mbacou.com>
References: <bcd55749-225d-cd57-fea6-9d44e561c5a1@mbacou.com>
Message-ID: <alpine.LFD.2.20.1709010948350.2340@reclus.nhh.no>

On Fri, 1 Sep 2017, Bacou, Melanie wrote:

> 
> I am wondering if current R raster operations (e.g. `extract()`,
> `resample()`, distance(), etc.) can be modified to work with honeycomb
> (hexagonal) grids instead of simple square grids? This is driven by e.g.
> work at Uberhttps://www.slideshare.net/stonse/ml-and-data-science-at-uber-gitpro-talk-2
> 017, and other articles http://strimas.com/spatial/hexagonal-grids/.
> 
> I'm being asked to evaluate the pros/cons of using different tessellations,
> and wondering what's the extent of R's support for non square grids.

Please also consider taking this up with:

https://github.com/r-spatial/stars

where it is very relevant. See also the dggridR package:

https://cran.r-project.org/web/packages/dggridR/index.html

Please report back on this - it deserves to be advanced actively.

Roger

> 
> Many thanks, --Mel.
> 
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From b.rowlingson at lancaster.ac.uk  Fri Sep  1 12:08:55 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 1 Sep 2017 11:08:55 +0100
Subject: [R-sig-Geo] Order a SpatialLine passes through a SpatialPolygons
In-Reply-To: <959F8B6F-B65F-46BA-B550-F4B284301802@ilstu.edu>
References: <959F8B6F-B65F-46BA-B550-F4B284301802@ilstu.edu>
Message-ID: <CANVKczOtLa1oq6a6r97W0tgJhe30fzD6ONHE4eGAijqMbdmk9g@mail.gmail.com>

Slightly hacky method: sample lots of points along the line, over() the
points with the polygons, returns polygon IDs in order:

>
unique(over(spsample(the.line,10000,"regular"),as(columbus,"SpatialPolygons")))
[1] 21 24 25 26 22

if the line goes back into a polygon with the same ID you'll see that too -
"21 24 25 26 24 22" for example.

Problem with this is that you have to make enough points on the line to
make sure one point hits each intersecting polygon. Maybe compare the list
from the points with the polygon intersection and then...

Wait, another idea. Get all the line-polygon intersections points to cut
your line into segments, and then compute the midpoints of each segment,
and see which polygon they lie in.  Coffee time now, so can't implement
this...

Note that SpatialLines objects can be more than one line segment in which
case the ordering is undefined, so make sure your SpatialLines have one
Line component.

B






On Thu, Aug 31, 2017 at 9:06 PM, Thayn, Jonathan <jthayn at ilstu.edu> wrote:

> I?m trying to write a function that returns the polygons through which a
> line passes, but I want the polygons to be listed in order. For example, in
> the code below, I get a list of polygons over which the lines passes, but
> the polygons are listed in numeric order, not spatial order. I would like
> the polygons to be listed as 21, 24, 25, 26, and 22 (the reverse would be
> fine to). Any ideas.
>
>
> library(spdep)
> example(columbus)
> plot(columbus)
> coords <- coordinates(columbus)
> text(coords,labels=1:49)
>
> the.line <- SpatialLines(list(Lines(Line(coords[c(21,22),]),ID="A")))
> plot(the.line,col="red",add=T)
>
> which(!is.na(over(columbus,the.line)))
>
>
>
> Jonathan B. Thayn, Ph.D.
>
> Associate Professor
> Department of Geography ? Geology
> Illinois State University
> Felmley Hall of Science, Rm 200A
> Normal, IL 61790
>
> jthayn at ilstu.edu<mailto:jthayn at ilstu.edu>
> my.ilstu.edu/~jthayn<http://my.ilstu.edu/~jthayn>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From mel at mbacou.com  Fri Sep  1 12:42:02 2017
From: mel at mbacou.com (Bacou, Melanie)
Date: Fri, 1 Sep 2017 06:42:02 -0400
Subject: [R-sig-Geo] Square vs. honeycomb raster grids
In-Reply-To: <alpine.LFD.2.20.1709010948350.2340@reclus.nhh.no>
References: <bcd55749-225d-cd57-fea6-9d44e561c5a1@mbacou.com>
 <alpine.LFD.2.20.1709010948350.2340@reclus.nhh.no>
Message-ID: <7c502273-492d-6dd7-8419-aa94a4b36751@mbacou.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170901/85919a0f/attachment.html>

From cryan at binghamton.edu  Fri Sep  1 20:04:16 2017
From: cryan at binghamton.edu (Christopher W. Ryan)
Date: Fri, 1 Sep 2017 14:04:16 -0400
Subject: [R-sig-Geo] using spatialpolygonsdataframe in ppm (or,
 converting spatialpolygonsdataframe to pixel image or other object
 useful in ppm)
Message-ID: <84684d92-b1a3-63b4-a88e-614c993d1c20@binghamton.edu>

Hello.

What is the best way to use a spatialpolygonsdataframe, with a numerical
variable of interest for each polygon (proportion of households in
poverty for US census tracts in the region of interest) as a predictor
in ppm() in spatstat?  I don't think I can use it directly on the RHS of
ppm(), because spatialpolygonsdataframe is not listed in the help file
for ppm() as an acceptable predictor.  So is there a way to convert the
census tract spatialpolygonsdataframe to an acceptable input object for
ppm(), such as a pixel image with each pixel having the numerical value
of poverty in its census tract polygon?

Or is there a better way to proceed?

Thank you.  Below is my sessionInfo

--Chris Ryan
Broome County Health Department, Binghamton, NY

=================================
R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] tmap_1.10          rgdal_1.2-6        RColorBrewer_1.1-2
maptools_0.9-2
 [5] sp_1.2-4           spatstat_1.50-0    rpart_4.1-10
nlme_3.1-131
 [9] shapefiles_0.7     foreign_0.8-67     stringr_1.2.0
dplyr_0.5.0

loaded via a namespace (and not attached):
 [1] viridisLite_0.2.0    jsonlite_1.4         splines_3.3.3
 [4] geojsonlint_0.2.0    foreach_1.4.3        R.utils_2.5.0
 [7] gtools_3.5.0         shiny_1.0.5          assertthat_0.2.0
[10] expm_0.999-2         stats4_3.3.3         LearnBayes_2.15
[13] lattice_0.20-35      digest_0.6.12        polyclip_1.6-1
[16] colorspace_1.3-2     plyr_1.8.4           htmltools_0.3.5
[19] httpuv_1.3.5         Matrix_1.2-8         R.oo_1.21.0
[22] XML_3.98-1.9         rmapshaper_0.3.0     raster_2.5-8
[25] gmodels_2.16.2       xtable_1.8-2         webshot_0.4.1
[28] scales_0.4.1         gdata_2.17.0         tensor_1.5
[31] satellite_1.0.0      spatstat.utils_1.4-1 tibble_1.3.0
[34] mgcv_1.8-17          gdalUtils_2.0.1.7    mapview_2.1.4
[37] magrittr_1.5         mime_0.5             deldir_0.1-12
[40] R.methodsS3_1.7.1    MASS_7.3-45          class_7.3-14
[43] tools_3.3.3          geosphere_1.5-5      V8_1.5
[46] munsell_0.4.3        compiler_3.3.3       e1071_1.6-8
[49] units_0.4-5          classInt_0.1-24      grid_3.3.3
[52] tmaptools_1.2-1      RCurl_1.95-4.8       dichromat_2.0-0
[55] iterators_1.0.8      htmlwidgets_0.8      goftest_1.1-1
[58] crosstalk_1.0.0      bitops_1.0-6         base64enc_0.1-3
[61] boot_1.3-18          codetools_0.2-15     abind_1.4-5
[64] DBI_0.6-1            jsonvalidate_1.0.0   curl_2.5
[67] R6_2.2.0             udunits2_0.13        rgeos_0.3-23
[70] spdep_0.6-12         KernSmooth_2.23-15   stringi_1.1.5
[73] osmar_1.1-7          Rcpp_0.12.10         sf_0.5-3
[76] png_0.1-7            leaflet_1.1.0        coda_0.19-1
>

---
This email has been checked for viruses by AVG.
http://www.avg.com


From rafa.pereira.br at gmail.com  Sat Sep  2 00:05:56 2017
From: rafa.pereira.br at gmail.com (Rafael Pereira)
Date: Fri, 1 Sep 2017 23:05:56 +0100
Subject: [R-sig-Geo] Square vs. honeycomb raster grids
In-Reply-To: <7c502273-492d-6dd7-8419-aa94a4b36751@mbacou.com>
References: <bcd55749-225d-cd57-fea6-9d44e561c5a1@mbacou.com>
 <alpine.LFD.2.20.1709010948350.2340@reclus.nhh.no>
 <7c502273-492d-6dd7-8419-aa94a4b36751@mbacou.com>
Message-ID: <CAA42DGmW2SueLe23DvpD51HaRJqLQ0f2sZbC512PuPi7cJ6dLA@mail.gmail.com>

Melanie,

if you're also interested, this paper brings a good summary of the pros and
cons of three regular tessellations: hexagons, squares and triangles.

http://www.sciencedirect.com/science/article/pii/S0304380007001949

best wishes,

Rafael H M Pereira




On Fri, Sep 1, 2017 at 11:42 AM, Bacou, Melanie <mel at mbacou.com> wrote:

> On 09/01/2017 03:53 AM, Roger Bivand wrote:
>
> On Fri, 1 Sep 2017, Bacou, Melanie wrote:
>
> I am wondering if current R raster operations (e.g. `extract()`,
> `resample()`, distance(), etc.) can be modified to work with honeycomb
> (hexagonal) grids instead of simple square grids? This is driven by e.g.
> work at Uber https://www.slideshare.net/stonse/ml-and-data-science-at-
> uber-gitpro-talk-2
> 017, and other articles http://strimas.com/spatial/hexagonal-grids/.
>
> I'm being asked to evaluate the pros/cons of using different
> tessellations,
> and wondering what's the extent of R's support for non square grids.
>
>
> Please also consider taking this up with:
>
> https://github.com/r-spatial/stars
>
> where it is very relevant. See also the dggridR package:
>
> https://cran.r-project.org/web/packages/dggridR/index.html
>
> Please report back on this - it deserves to be advanced actively.
>
> Roger
>
>
> Roger, thanks did that. Reviewing Richard Barnes' package now.
> --Mel.
>
>
> Many thanks, --Mel.
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From milujisb at gmail.com  Sat Sep  2 00:46:44 2017
From: milujisb at gmail.com (Miluji Sb)
Date: Sat, 2 Sep 2017 00:46:44 +0200
Subject: [R-sig-Geo] Aggregation to
In-Reply-To: <979b9af0-44b2-3be9-d8a8-784ea29c368d@conabio.gob.mx>
References: <CAMLwc7OMCN6hjiGdnAYJKC6k8cjuwhOudJnnEgvqqEMCaJrYhg@mail.gmail.com>
 <979b9af0-44b2-3be9-d8a8-784ea29c368d@conabio.gob.mx>
Message-ID: <CAMLwc7PVo_OzSrczEveV9xG_Z-qB7hL91y6TBuS0B+WMD6_avQ@mail.gmail.com>

Dear Loic,

Thank you for your reply and the suggestions - didn't realize that the
factor needs to be an integer.

The original data was at 0.5 degree, I aggregated it to 1 degree to match
to another data.

The original 0.5 degree data is available as a shapefile, I read it in
using readOGR and the information is as follows:

class       : SpatialPolygonsDataFrame
features    : 75228
extent      : -180, 180, -59.48429, 83.62742  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84
+towgs84=0,0,0
variables   : 4
names       :   gID, ISO3,         px,        py
min values  :     1,  AFG, -100.07055, -10.00004
max values  : 75228,  ZWE,  179.93522,  83.55961

Then I convert it to raster for aggregation using:

###
pgeo <- spTransform(poly, CRS('+proj=longlat +datum=WGS84'))
ext <- floor(extent(pgeo))
rr <- raster(ext, res=0.5)
rr <- rasterize(pgeo, rr, field=1)

This is the information on the converted raster:

class       : RasterLayer
dimensions  : 288, 720, 207360  (nrow, ncol, ncell)
resolution  : 0.5, 0.5  (x, y)
extent      : -180, 180, -60, 84  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
data source : in memory
names       : layer
values      : 1, 1  (min, max)

Then I aggregate it to 2.5 degree using:

###
aggregate(rr,fact=5, fun=sum)

This seems to have aggregate it to the desired 2.5 degree:

df2_5
class       : RasterLayer
dimensions  : 58, 144, 8352  (nrow, ncol, ncell)
resolution  : 2.5, 2.5  (x, y)
extent      : -180, 180, -61, 84  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
data source : in memory
names       : layer
values      : 1, 25  (min, max)

My goal is to use this to extract data from a rasterbrick (time series), so
I convert the raster to a spatialpointsdataframe:

###
spts <- rasterToPoints(df2_5, spatial = TRUE)

Then use extract from the the following rasterbrick:

class       : RasterBrick
dimensions  : 72, 144, 10368, 2880  (nrow, ncol, ncell, nlayers)
resolution  : 2.5, 2.5  (x, y)
extent      : 0, 360, -90, 90  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
names       : X0, X1, X2, X3, X4, X5, X6, X7, X8, X9, X10, X11, X12, X13,
X14, ...
z-value     : 0, 2879 (min, max)
varname     : beta
level       : 1

But I get a lot of missing values.Is it due to different extent? How can I
change the extent of the RasterBrick to (-180 180 -90 90)?

I realize that I have probably provided a lot of redundant information. Any
help will be highly appreciated. Thank you.

Sincerely,

Milu

On Thu, Aug 31, 2017 at 9:57 PM, Lo?c Dutrieux <loic.dutrieux at conabio.gob.mx
> wrote:

>
>
> On 31/08/17 14:22, Miluji Sb wrote:
>
>> I have a set of coordinates:
>>
>> temp <- dput(head(gcp,10))
>> structure(list(lon = c(-180, -180, -179, -179, -178, -178, -177,
>> -176, -176, -175), lat = c(67, 68, 67, 68, 67, 68, 67, 66, 67,
>> 66)), datalabel = "", time.stamp = "11 Aug 2017 16:10", .Names = c("lon",
>> "lat"), formats = c("%9.0g", "%9.0g"), types = c(255L, 255L), val.labels =
>> c("",
>> ""), var.labels = c("lon", "lat"), version = 12L, row.names = c("1",
>> "2", "3", "4", "5", "6", "7", "8", "9", "10"), class = "data.frame")
>>
>> These are at 1 degree, I would like to aggregate them to 2.5 degree to use
>> them to extract data from a netcdf file (which is at 2.5 degree). This is
>> what I have done:
>>
>> rasterDF <- rasterFromXYZ(gcp)
>> gcp2_5 <- aggregate(rasterDF,fact=2.5, fun=sum)
>>
>
> The aggregation factor in raster::aggregate has to be an integer (2, 3,
> etc). Perhaps raster::resample is what you're looking for then. When using
> 'bilinear', resample actually aggregates to the nearest multiple of the
> original raster's resolution (2 degrees in your case), and finishes with
> some interpolation.
>
> Cheers,
> Lo?c
>
>
>> However, this seems to return aggregated coordinates at 2 degree.
>>
>> class       : RasterLayer
>> dimensions  : 67, 180, 12060  (nrow, ncol, ncell)
>> resolution  : 2, 2  (x, y)
>> extent      : -180.5, 179.5, -54.5, 79.5  (xmin, xmax, ymin, ymax)
>> coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>>
>> What am I doing wrong? Is there another way? Thank you.
>>
>> Sincerely,
>>
>> Milu
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> Email secured by Check Point
>>
>>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Sat Sep  2 09:00:40 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 02 Sep 2017 07:00:40 +0000
Subject: [R-sig-Geo] using spatialpolygonsdataframe in ppm (or,
 converting spatialpolygonsdataframe to pixel image or other object
 useful in ppm)
In-Reply-To: <84684d92-b1a3-63b4-a88e-614c993d1c20@binghamton.edu>
References: <84684d92-b1a3-63b4-a88e-614c993d1c20@binghamton.edu>
Message-ID: <CAAcGz9_f5r_b8+0u_6v87dgmR0y1vr0Hw=3zQykt551fR_YaZg@mail.gmail.com>

On Sat, 2 Sep 2017 at 04:04 Christopher W. Ryan <cryan at binghamton.edu>
wrote:

> Hello.
>
> What is the best way to use a spatialpolygonsdataframe, with a numerical
> variable of interest for each polygon (proportion of households in
> poverty for US census tracts in the region of interest) as a predictor
> in ppm() in spatstat?  I don't think I can use it directly on the RHS of
> ppm(), because spatialpolygonsdataframe is not listed in the help file
> for ppm() as an acceptable predictor.  So is there a way to convert the
> census tract spatialpolygonsdataframe to an acceptable input object for
> ppm(), such as a pixel image with each pixel having the numerical value
> of poverty in its census tract polygon?
>
>

Start with vignette("shapefiles", package = "spatstat") for the spatstat
view of Spatial* - it's relatively straightforward to convert Spatial* to
raster and raster to spatstat, but I don't have an example on hand.

It's not clear to me if you need polygons in spatstat or a raster owin
version of them - admittedly spatstat does allow a combination of the two,
so that's maybe what's needed.

If you have a clear example of using ppm that would do the task if had your
data in spatstat form I'm happy to show the conversion/s.

HTH

Cheers, Mike.


> Or is there a better way to proceed?
>
> Thank you.  Below is my sessionInfo
>
> --Chris Ryan
> Broome County Health Department, Binghamton, NY
>
> =================================
> R version 3.3.3 (2017-03-06)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 7 x64 (build 7601) Service Pack 1
>
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
>  [1] tmap_1.10          rgdal_1.2-6        RColorBrewer_1.1-2
> maptools_0.9-2
>  [5] sp_1.2-4           spatstat_1.50-0    rpart_4.1-10
> nlme_3.1-131
>  [9] shapefiles_0.7     foreign_0.8-67     stringr_1.2.0
> dplyr_0.5.0
>
> loaded via a namespace (and not attached):
>  [1] viridisLite_0.2.0    jsonlite_1.4         splines_3.3.3
>  [4] geojsonlint_0.2.0    foreach_1.4.3        R.utils_2.5.0
>  [7] gtools_3.5.0         shiny_1.0.5          assertthat_0.2.0
> [10] expm_0.999-2         stats4_3.3.3         LearnBayes_2.15
> [13] lattice_0.20-35      digest_0.6.12        polyclip_1.6-1
> [16] colorspace_1.3-2     plyr_1.8.4           htmltools_0.3.5
> [19] httpuv_1.3.5         Matrix_1.2-8         R.oo_1.21.0
> [22] XML_3.98-1.9         rmapshaper_0.3.0     raster_2.5-8
> [25] gmodels_2.16.2       xtable_1.8-2         webshot_0.4.1
> [28] scales_0.4.1         gdata_2.17.0         tensor_1.5
> [31] satellite_1.0.0      spatstat.utils_1.4-1 tibble_1.3.0
> [34] mgcv_1.8-17          gdalUtils_2.0.1.7    mapview_2.1.4
> [37] magrittr_1.5         mime_0.5             deldir_0.1-12
> [40] R.methodsS3_1.7.1    MASS_7.3-45          class_7.3-14
> [43] tools_3.3.3          geosphere_1.5-5      V8_1.5
> [46] munsell_0.4.3        compiler_3.3.3       e1071_1.6-8
> [49] units_0.4-5          classInt_0.1-24      grid_3.3.3
> [52] tmaptools_1.2-1      RCurl_1.95-4.8       dichromat_2.0-0
> [55] iterators_1.0.8      htmlwidgets_0.8      goftest_1.1-1
> [58] crosstalk_1.0.0      bitops_1.0-6         base64enc_0.1-3
> [61] boot_1.3-18          codetools_0.2-15     abind_1.4-5
> [64] DBI_0.6-1            jsonvalidate_1.0.0   curl_2.5
> [67] R6_2.2.0             udunits2_0.13        rgeos_0.3-23
> [70] spdep_0.6-12         KernSmooth_2.23-15   stringi_1.1.5
> [73] osmar_1.1-7          Rcpp_0.12.10         sf_0.5-3
> [76] png_0.1-7            leaflet_1.1.0        coda_0.19-1
> >
>
> ---
> This email has been checked for viruses by AVG.
> http://www.avg.com
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From lucas.charron21 at gmail.com  Sat Sep  2 09:01:55 2017
From: lucas.charron21 at gmail.com (Lucas Ch)
Date: Sat, 2 Sep 2017 09:01:55 +0200
Subject: [R-sig-Geo] Stop mailist
Message-ID: <9281397E-328E-4DAA-9C8E-F6DAFD4341E6@gmail.com>



Envoy? de mon iPhone

From adrian.baddeley at curtin.edu.au  Sat Sep  2 12:21:31 2017
From: adrian.baddeley at curtin.edu.au (Adrian Baddeley)
Date: Sat, 2 Sep 2017 10:21:31 +0000
Subject: [R-sig-Geo]  using spatialpolygonsdataframe in ppm (or,
 converting spatialpolygonsdataframe to pixel image or other object
 useful in ppm)
Message-ID: <ME1PR01MB077125A3F98844AAAF586E43A4930@ME1PR01MB0771.ausprd01.prod.outlook.com>

Christopher W. Ryan <cryan at binghamton.edu> writes:

 > What is the best way to use a spatialpolygonsdataframe,

 > with a numerical variable of interest for each polygon

 > (proportion of households in poverty for US census tracts

 > in the region of interest) as a predictor in ppm() in spatstat?


 > I don't think I can use it directly on the RHS of ppm(),

 > because spatialpolygonsdataframe is not listed in the help file

 > for ppm() as an acceptable predictor.


     That's correct.


 > So is there a way to convert the
 > census tract spatialpolygonsdataframe to an acceptable input object for
 > ppm(), such as a pixel image with each pixel having the numerical value
 > of poverty in its census tract polygon?


   Yes, this is possible.


    Alternatively, you could convert the data into a function with arguments (x,y)

    that returns the value of poverty in the polygon in which the location (x,y) falls.


    It's probably easier to make a function, and it's better because you won't lose accuracy

    due to discretisation.

          1. Convert each polygon into a window of class 'owin' in the spatstat package.

           2. Make a tessellation (class 'tess') out of these polygons.

           3. Convert the tessellation to a function using 'as.function.tess'

               using the argument 'values' to specify the value associated with each polygon.

    To do steps 1 and 2, see the 'shapefiles' vignette in the spatstat package.


     If you decide you need a pixel image instead, then just use 'as.im' to convert the function

     to an image.


Hope this helps.

Adrian Baddeley

Spatstat author


Prof Adrian Baddeley DSc FAA

John Curtin Distinguished Professor

Department of Mathematics and Statistics

Curtin University, Perth, Western Australia

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Sat Sep  2 12:27:04 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 2 Sep 2017 22:27:04 +1200
Subject: [R-sig-Geo] [FORGED] Re: using spatialpolygonsdataframe in ppm
 (or,
 converting spatialpolygonsdataframe to pixel image or other object useful in
 ppm)
In-Reply-To: <CAAcGz9_f5r_b8+0u_6v87dgmR0y1vr0Hw=3zQykt551fR_YaZg@mail.gmail.com>
References: <84684d92-b1a3-63b4-a88e-614c993d1c20@binghamton.edu>
 <CAAcGz9_f5r_b8+0u_6v87dgmR0y1vr0Hw=3zQykt551fR_YaZg@mail.gmail.com>
Message-ID: <e8305d99-aa6d-d93e-2bf6-05ab2ec7b241@auckland.ac.nz>

On 02/09/17 19:00, Michael Sumner wrote:

<SNIP>

> 
> It's not clear to me if you need polygons in spatstat or a raster owin
> version of them - admittedly spatstat does allow a combination of the two,

That's not actually true.  The spatstat package allows for observation 
windows (objects of class "owin" which are either polygonal (of type 
"polygonal") *or* "raster-like" (of type "mask"), consisting of a 
pixellation of the bounding box with the pixels having the values TRUE 
or FALSE.  There is also type "rectangle" which is conceptually a 
special case of "polygonal" but has (obviously?) practical advantages 
when it is applicable.

However an "owin" object *cannot* be a combination of polygonal and mask 
types.

<SNIP>

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From mdsumner at gmail.com  Sat Sep  2 12:37:38 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 02 Sep 2017 10:37:38 +0000
Subject: [R-sig-Geo] [FORGED] Re: using spatialpolygonsdataframe in ppm
 (or,
 converting spatialpolygonsdataframe to pixel image or other object useful in
 ppm)
In-Reply-To: <e8305d99-aa6d-d93e-2bf6-05ab2ec7b241@auckland.ac.nz>
References: <84684d92-b1a3-63b4-a88e-614c993d1c20@binghamton.edu>
 <CAAcGz9_f5r_b8+0u_6v87dgmR0y1vr0Hw=3zQykt551fR_YaZg@mail.gmail.com>
 <e8305d99-aa6d-d93e-2bf6-05ab2ec7b241@auckland.ac.nz>
Message-ID: <CAAcGz98RBR0769tT1_yLoAXPt7kbgBUROmA0CKqATL+6mP-0Kg@mail.gmail.com>

Thanks Rolf, it's actually  not what I meant and I appreciate the
clarification :) - owin is clear in its definition of specific types, but
spatstat types generally do allow combinations of domain, discretization,
and path-based boundaries. So I hope I'm not wrong about *that*.

(I aspire to be more expert on this cross-over topic, still working on it :)

Cheers, Mike.



On Sat, 2 Sep 2017 at 20:27 Rolf Turner <r.turner at auckland.ac.nz> wrote:

> On 02/09/17 19:00, Michael Sumner wrote:
>
> <SNIP>
>
> >
> > It's not clear to me if you need polygons in spatstat or a raster owin
> > version of them - admittedly spatstat does allow a combination of the
> two,
>
> That's not actually true.  The spatstat package allows for observation
> windows (objects of class "owin" which are either polygonal (of type
> "polygonal") *or* "raster-like" (of type "mask"), consisting of a
> pixellation of the bounding box with the pixels having the values TRUE
> or FALSE.  There is also type "rectangle" which is conceptually a
> special case of "polygonal" but has (obviously?) practical advantages
> when it is applicable.
>
> However an "owin" object *cannot* be a combination of polygonal and mask
> types.
>
> <SNIP>
>
> cheers,
>
> Rolf Turner
>
> --
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276 <+64%209-373%207599>
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From mel at mbacou.com  Sat Sep  2 14:39:39 2017
From: mel at mbacou.com (Bacou, Melanie)
Date: Sat, 2 Sep 2017 08:39:39 -0400
Subject: [R-sig-Geo] Square vs. honeycomb raster grids
In-Reply-To: <CAA42DGmW2SueLe23DvpD51HaRJqLQ0f2sZbC512PuPi7cJ6dLA@mail.gmail.com>
References: <bcd55749-225d-cd57-fea6-9d44e561c5a1@mbacou.com>
 <alpine.LFD.2.20.1709010948350.2340@reclus.nhh.no>
 <7c502273-492d-6dd7-8419-aa94a4b36751@mbacou.com>
 <CAA42DGmW2SueLe23DvpD51HaRJqLQ0f2sZbC512PuPi7cJ6dLA@mail.gmail.com>
Message-ID: <d4fe2a97-82cb-f264-caab-8ef8f48f3b51@mbacou.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170902/96cb5a69/attachment.html>

From nima.mehrafshan at gmail.com  Mon Sep  4 19:07:21 2017
From: nima.mehrafshan at gmail.com (Nima Mehrafshan)
Date: Mon, 4 Sep 2017 19:07:21 +0200
Subject: [R-sig-Geo] Spatio-temporal kriging with missing time periods
Message-ID: <CACTbePTzjoc7iwKuAyo7XBsH10_tAeod7Pu=TxVhYSg=-S+8zg@mail.gmail.com>

Hello everybody,

I have four years of spatial data with a couple of gaps (missing time
periods of up to one year).

    > summary(sample_data)
          lon              lat              x                month
     Min.   : 8.338   Min.   :54.41   Min.   :-1982.94   Min.   :2013-09-01
     1st Qu.: 9.551   1st Qu.:54.54   1st Qu.: -428.76   1st Qu.:2014-03-24
     Median :13.280   Median :54.63   Median :   86.03   Median :2014-09-01
     Mean   :11.856   Mean   :54.68   Mean   : 2470.73   Mean   :2014-11-08
     3rd Qu.:13.395   3rd Qu.:54.83   3rd Qu.:  997.35   3rd Qu.:2015-06-01
     Max.   :13.664   Max.   :55.02   Max.   :30967.30   Max.   :2017-08-01

(I have rounded the times to the next first of the month)

I would like to do spatio-temporal kriging on the target variable x using
the gstat package. However, when I run...

    > sp <- SpatialPoints(sample_data[,c('lat', 'lon')], CRS('+proj=longlat
+datum=WGS84'))
    > sp <- spTransform(sp, CRS("+proj=utm +zone=32 +ellps=WGS84
+datum=WGS84"))
    > sample_data <-STIDF(sp, time = sample_data$month, data =
sample_data[,'x',drop=F])
    > vv <- variogramST(x~1, data=sample_data, cutoff=1000,
assumeRegular=FALSE)

...the computation stops after 7% with no error message and the resulting
data frame (vv) has NAs in np, dist, and gamma in all but the first lag. I
guess this is because there are no observations for the second lag ?

Can variogramST only be used for data without gaps in the time dimension?

Do I have other options for spatio-temporal interpolation that work with
this kind of data?

Thank you.
Nima Mehrafshan

PS: I've also posted this question here:
https://gis.stackexchange.com/questions/254127

	[[alternative HTML version deleted]]


From cryan at binghamton.edu  Tue Sep  5 19:43:48 2017
From: cryan at binghamton.edu (Christopher W Ryan)
Date: Tue, 5 Sep 2017 13:43:48 -0400
Subject: [R-sig-Geo] simple online CSR pattern generator?
Message-ID: <CAM+rpYnFS+ajXuFUHvrH4z4r8BtPeh=XEWviVM+k=re+QStHOg@mail.gmail.com>

I may have to do a very simple demo about random variation in spatial
epidemiology, without access to R. I would have internet access. Is anyone
aware of a website where one can generate repeated examples of a simple CSR
point pattern, akin to rpoispp() in spatstat?

Thanks.

--Chris Ryan
Broome County Health Department, Binghamton, NY

	[[alternative HTML version deleted]]


From roman.lustrik at gmail.com  Tue Sep  5 19:51:11 2017
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Tue, 5 Sep 2017 19:51:11 +0200
Subject: [R-sig-Geo] simple online CSR pattern generator?
In-Reply-To: <CAM+rpYnFS+ajXuFUHvrH4z4r8BtPeh=XEWviVM+k=re+QStHOg@mail.gmail.com>
References: <CAM+rpYnFS+ajXuFUHvrH4z4r8BtPeh=XEWviVM+k=re+QStHOg@mail.gmail.com>
Message-ID: <CAHT1vpg+ZtOEurKkaog0KFQE5DbtCRD=S6bLWcrNAoL15udibw@mail.gmail.com>

Is setting up a RStudio server an option? That way you could access all R's
functionality through a web browser.

Cheers,
Roman

On Tue, Sep 5, 2017 at 7:43 PM, Christopher W Ryan <cryan at binghamton.edu>
wrote:

> I may have to do a very simple demo about random variation in spatial
> epidemiology, without access to R. I would have internet access. Is anyone
> aware of a website where one can generate repeated examples of a simple CSR
> point pattern, akin to rpoispp() in spatstat?
>
> Thanks.
>
> --Chris Ryan
> Broome County Health Department, Binghamton, NY
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
In God we trust, all others bring data.

	[[alternative HTML version deleted]]


From Virgilio.Gomez at uclm.es  Tue Sep  5 19:58:08 2017
From: Virgilio.Gomez at uclm.es (VIRGILIO GOMEZ RUBIO)
Date: Tue, 5 Sep 2017 17:58:08 +0000
Subject: [R-sig-Geo] simple online CSR pattern generator?
In-Reply-To: <CAHT1vpg+ZtOEurKkaog0KFQE5DbtCRD=S6bLWcrNAoL15udibw@mail.gmail.com>
References: <CAM+rpYnFS+ajXuFUHvrH4z4r8BtPeh=XEWviVM+k=re+QStHOg@mail.gmail.com>
 <CAHT1vpg+ZtOEurKkaog0KFQE5DbtCRD=S6bLWcrNAoL15udibw@mail.gmail.com>
Message-ID: <8F4F6681-80A1-473D-AE86-C8BAA03DE5FC@uclm.es>

Hi,

You can use r-fiddle:

http://www.r-fiddle.org/#/fiddle?id=kuUG5uW6

Click on run code and you will see a very simple example.

Best,

Virgilio

	[[alternative HTML version deleted]]


From cryan at binghamton.edu  Tue Sep  5 20:26:57 2017
From: cryan at binghamton.edu (Christopher W Ryan)
Date: Tue, 5 Sep 2017 14:26:57 -0400
Subject: [R-sig-Geo] simple online CSR pattern generator?
In-Reply-To: <8F4F6681-80A1-473D-AE86-C8BAA03DE5FC@uclm.es>
References: <CAM+rpYnFS+ajXuFUHvrH4z4r8BtPeh=XEWviVM+k=re+QStHOg@mail.gmail.com>
 <CAHT1vpg+ZtOEurKkaog0KFQE5DbtCRD=S6bLWcrNAoL15udibw@mail.gmail.com>
 <8F4F6681-80A1-473D-AE86-C8BAA03DE5FC@uclm.es>
Message-ID: <CAM+rpYmVH5xW3usyiaHZ33DkhAmrjPwwyGP9sy_uTBfvRvM0uA@mail.gmail.com>

Unfortunately R-studio is not an option, but r-fiddle is perfect!  Thanks.

--Chris

On Tue, Sep 5, 2017 at 1:58 PM, VIRGILIO GOMEZ RUBIO <Virgilio.Gomez at uclm.es
> wrote:

> Hi,
>
> You can use r-fiddle:
>
> http://www.r-fiddle.org/#/fiddle?id=kuUG5uW6
>
> Click on run code and you will see a very simple example.
>
> Best,
>
> Virgilio
>

	[[alternative HTML version deleted]]


From Terry.Beutel at daf.qld.gov.au  Thu Sep  7 00:22:31 2017
From: Terry.Beutel at daf.qld.gov.au (BEUTEL Terry S)
Date: Wed, 6 Sep 2017 22:22:31 +0000
Subject: [R-sig-Geo] Replacing values in a RasterBrick
Message-ID: <0B3A8CE342E4A8409958161BD7B04BD0268D1C48@CHQMAIL01.lands.resnet.qg>

Hi.

I'm working with the Raster package. I have a RasterBrick of 374 monthly rainfall rasters called Rain2.


> Rain2
class       : RasterBrick
dimensions  : 374, 315, 117810, 374  (nrow, ncol, ncell, nlayers)
resolution  : 0.05, 0.05  (x, y)
extent      : 137.925, 153.675, -29.275, -10.575  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +ellps=GRS80 +no_defs
data source : K:\RainStuff\RainRaster.grd
names       :    X198601,    X198602,    X198603,    X198604 ...
min values  :       0.00,       0.00,       0.00,       0.00 ...
max values  :  962.01929,  534.42188,  929.24780,  790.83087 ...



I want to replace the 374 monthly rainfall pixel values at a particular location (defined by the intersection of a single row and a single column) with a different series of 374 values. But when I try the reassignment, I run into memory issues....



> Rain2[100,100]<-c(1:374)

Error: cannot allocate vector of size 336.2 Mb



I've also tried using setValues to reassign the values, as per the "Writing functions with the 'raster' package" vignette, but without success e.g. ...

> f2<-

+ function(x,row,col,a){

+ x[row,col]<-setValues(x[row,col],a)

+ return(x)}

>

> a<-c(1:374)

> f2(Rain2,100,101,a)



Error in (function (classes, fdef, mtable)  :

  unable to find an inherited method for function 'setValues' for signature '"matrix"'





I don't work much with the Raster package and I'm sure I'm making an elementary error here, but I'd appreciate any advice on the best way replace these values efficiently.

Many thanks

Terry

------------------------------
The information in this email together with any attachments is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. There is no waiver of any confidentiality/privilege by your inadvertent receipt of this material. 
Any form of review, disclosure, modification, distribution and/or publication of this email message is prohibited, unless as a necessary part of Departmental business.
If you have received this message in error, you are asked to inform the sender as quickly as possible and delete this message and any copies of this message from your computer and/or your computer system network.
------------------------------

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Thu Sep  7 10:38:06 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 07 Sep 2017 08:38:06 +0000
Subject: [R-sig-Geo] Replacing values in a RasterBrick
In-Reply-To: <0B3A8CE342E4A8409958161BD7B04BD0268D1C48@CHQMAIL01.lands.resnet.qg>
References: <0B3A8CE342E4A8409958161BD7B04BD0268D1C48@CHQMAIL01.lands.resnet.qg>
Message-ID: <CAAcGz9-nCjK6i+edusdPrEAAG3-5ChLRe0EiJbA97nT4Gf4T-Q@mail.gmail.com>

On Thu, 7 Sep 2017 at 08:22 BEUTEL Terry S <Terry.Beutel at daf.qld.gov.au>
wrote:

> Hi.
>
> I'm working with the Raster package. I have a RasterBrick of 374 monthly
> rainfall rasters called Rain2.
>
>
> > Rain2
> class       : RasterBrick
> dimensions  : 374, 315, 117810, 374  (nrow, ncol, ncell, nlayers)
> resolution  : 0.05, 0.05  (x, y)
> extent      : 137.925, 153.675, -29.275, -10.575  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +ellps=GRS80 +no_defs
> data source : K:\RainStuff\RainRaster.grd
> names       :    X198601,    X198602,    X198603,    X198604 ...
> min values  :       0.00,       0.00,       0.00,       0.00 ...
> max values  :  962.01929,  534.42188,  929.24780,  790.83087 ...
>
>
>
> I want to replace the 374 monthly rainfall pixel values at a particular
> location (defined by the intersection of a single row and a single column)
> with a different series of 374 values. But when I try the reassignment, I
> run into memory issues....
>
>
As far as I understand it there is no actual partial-write for the this
format, it's actually a complicated topic given the range of ways raster
can store data either on file or in memory.

A Raster in memory is a long-form matrix with the matrix flattened out
(left right top to bottom, different to R's matrix), and the columns are
"layers". On disk, the rasterfile (.grd) is a flat binary with an
orientation ordering (either band sequential, band interleaved by line or
band interleaved by pixel) and so that can't be easily overridden without
knowing the details.

Given the size of the file I would first try pulling it all into memory and
rewriting in whole:

Rain2 <- readAll(Rain2)

## then run your updates
## ...
##  now write back to file

writeRaster(Rain2, "RainRaster_test.grd")

and check.

If that fails, because your system can't perform this (wasteful, brute
force) read and write then you could use ff - it's possible to
transparently map an ff array to an existing RasterBrick (in rasterfile.grd
format) and update it using ff's efficient memory mapping.

Let  me know if you that sounds promising and you want to explore more,
it's a simple thing I should finish up and put on CRAN.

Cheers, Mike.


>
> > Rain2[100,100]<-c(1:374)
>
> Error: cannot allocate vector of size 336.2 Mb
>
>
>
> I've also tried using setValues to reassign the values, as per the
> "Writing functions with the 'raster' package" vignette, but without success
> e.g. ...
>
> > f2<-
>
> + function(x,row,col,a){
>
> + x[row,col]<-setValues(x[row,col],a)
>
> + return(x)}
>
> >
>
> > a<-c(1:374)
>
> > f2(Rain2,100,101,a)
>
>
>
> Error in (function (classes, fdef, mtable)  :
>
>   unable to find an inherited method for function 'setValues' for
> signature '"matrix"'
>
>
>
>
>
> I don't work much with the Raster package and I'm sure I'm making an
> elementary error here, but I'd appreciate any advice on the best way
> replace these values efficiently.
>
> Many thanks
>
> Terry
>
> ------------------------------
> The information in this email together with any attachments is intended
> only for the person or entity to which it is addressed and may contain
> confidential and/or privileged material. There is no waiver of any
> confidentiality/privilege by your inadvertent receipt of this material.
> Any form of review, disclosure, modification, distribution and/or
> publication of this email message is prohibited, unless as a necessary part
> of Departmental business.
> If you have received this message in error, you are asked to inform the
> sender as quickly as possible and delete this message and any copies of
> this message from your computer and/or your computer system network.
> ------------------------------
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From milujisb at gmail.com  Thu Sep  7 20:35:44 2017
From: milujisb at gmail.com (Miluji Sb)
Date: Thu, 7 Sep 2017 20:35:44 +0200
Subject: [R-sig-Geo] ISO3 to 7 continents names
Message-ID: <CAMLwc7NS-=++H0Vpd6QCgWznmA9rJ5sG3Rp-mq88qvUgtKYBEQ@mail.gmail.com>

Dear all.

Is it possible to convert.identify iso3 country names to the seven
continent names?

# Asia, Africa, Antarctica, Australia, Europe, South America, and North
America,

I have tried the following:

###
region <- merge(countryExData,df,by.x='ISO3V10',by.y='iso3')

where df is the name of my dataset with iso3 the identification variable
but there seems to be a a lot of missing values.

Thank you!

Sincerely,

Milu

	[[alternative HTML version deleted]]


From javier.garcia at ehu.eus  Fri Sep  8 00:41:22 2017
From: javier.garcia at ehu.eus (=?iso-8859-1?Q?Javier_Garc=EDa?=)
Date: Fri, 8 Sep 2017 00:41:22 +0200
Subject: [R-sig-Geo] Robust standard errors in spatial error models
Message-ID: <000001d3282a$6e951d80$4bbf5880$@ehu.eus>

Hello everybody, 


I have estimated a spatial error model by means of the lagsarlm() function.
The Breusch-Pagan test for spatial models (bptest.sarlm()) shows
heteroskedasticity evidence. I want to estimate robust standard errors, but
the functions I have looked at only work with lm type objects. In page 23 in
the spdep manual it is stated that "it is also technically possible to make
heteroskedasticity corrections to standard error estimates by using the
?lm.target? component of sarlm objects ? using functions in the lmtest and
sandwich packages.", and gives an example that honestly I do not understand
(what is $tary and $tarX? what is the lm.target component? where are they
documented?). I have adapted the example to my case, obtaining an estimated
model with its corresponding coefficients, standard errors, etc. My question
is: is this correct? Are these standard errors already robust under
heteroskedasticity?

 

Thanks a lot in advance

 

Best

Javi

 

PD: below you can see the piece of code and the generated output

 

 

reg.SLM <- lagsarlm(precio_m2~z1+z2+z3+z4+z5+z6+z7+z8+z9+z10-1,

data=datos,W_n,method="eigen",  tol.solve=1.0e-20) 

 

lm.target <- lm(reg.SEM$tary ~ reg.SEM$tarX - 1)

if (require(lmtest) && require(sandwich)) {

coeftest(lm.target, vcov=vcovHC(lm.target, type="HC0"), df=Inf)

}

 

z test of coefficients:

 

                                         Estimate Std. Error z value
Pr(>|z|)

reg.SEM$tarXI(x - lambda * WX)z1       1489.27593  124.86303 11.9273 <
2.2e-16

reg.SEM$tarXI(x - lambda * WX)z2       1471.24060  135.03910 10.8949 <
2.2e-16

reg.SEM$tarXI(x - lambda * WX)z3       1646.50753  126.03324 13.0641 <
2.2e-16

reg.SEM$tarXI(x - lambda * WX)z4       1615.11404  232.94826  6.9334
4.110e-12

reg.SEM$tarXI(x - lambda * WX)z5       1947.56387  149.28017 13.0464 <
2.2e-16

reg.SEM$tarXI(x - lambda * WX)z6       1903.80428  132.62287 14.3550 <
2.2e-16

reg.SEM$tarXI(x - lambda * WX)z7       1943.40961  118.29268 16.4288 <
2.2e-16

reg.SEM$tarXI(x - lambda * WX)z8       2576.77441  144.33295 17.8530 <
2.2e-16

reg.SEM$tarXI(x - lambda * WX)z9       3037.47241  215.77036 14.0773 <
2.2e-16

reg.SEM$tarXI(x - lambda * WX)z10      3976.81752  260.71406 15.2536 <
2.2e-16

                                          

reg.SEM$tarXI(x - lambda * WX)z1       ***

reg.SEM$tarXI(x - lambda * WX)z2       ***

reg.SEM$tarXI(x - lambda * WX)z3       ***

reg.SEM$tarXI(x - lambda * WX)z4       ***

reg.SEM$tarXI(x - lambda * WX)z5       ***

reg.SEM$tarXI(x - lambda * WX)z6       ***

reg.SEM$tarXI(x - lambda * WX)z7       ***

reg.SEM$tarXI(x - lambda * WX)z8       ***

reg.SEM$tarXI(x - lambda * WX)z9       ***

reg.SEM$tarXI(x - lambda * WX)z10      ***

 

---

Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

 

	


JAVIER GARC?A 

 

Departamento de Econom?a Aplicada III (Econometr?a y Estad?stica)

Facultad de Econom?a y Empresa (Secci?n Sarriko)
Avda. Lehendakari Aguirre 83

48015 BILBAO
T.: +34 601 7126 F.: +34 601 3754
 <http://www.ehu.es/> www.ehu.es 

http://www.unibertsitate-hedakuntza.ehu.es/p268-content/es/contenidos/inform
acion/manual_id_corp/es_manual/images/firma_email_upv_euskampus_bilingue.gif

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170908/9f5d39b0/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 6359 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170908/9f5d39b0/attachment.gif>

From b.rowlingson at lancaster.ac.uk  Fri Sep  8 10:27:40 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 8 Sep 2017 09:27:40 +0100
Subject: [R-sig-Geo] ISO3 to 7 continents names
In-Reply-To: <CAMLwc7NS-=++H0Vpd6QCgWznmA9rJ5sG3Rp-mq88qvUgtKYBEQ@mail.gmail.com>
References: <CAMLwc7NS-=++H0Vpd6QCgWznmA9rJ5sG3Rp-mq88qvUgtKYBEQ@mail.gmail.com>
Message-ID: <CANVKczNLAoEziJ9XcpdXJqig5OTU-z0DtOu5f2D-gnPa28js+g@mail.gmail.com>

On Thu, Sep 7, 2017 at 7:35 PM, Miluji Sb <milujisb at gmail.com> wrote:

> Dear all.
>
> Is it possible to convert.identify iso3 country names to the seven
> continent names?
>
> # Asia, Africa, Antarctica, Australia, Europe, South America, and North
> America,
>
> I have tried the following:
>
> ###
> region <- merge(countryExData,df,by.x='ISO3V10',by.y='iso3')
>
> where df is the name of my dataset with iso3 the identification variable
> but there seems to be a a lot of missing values.
>
>
Hard to help you here without seeing at least some of your data, or at
least the rows that didn't match. Maybe you've got invalid codes in your
data? How can we tell?

Also, you should say where countryExData comes from, I had to guess it was
from the rworldmap package. That data frame doesn't have the "continent" in
it, so what use is it to you?

Barry

	[[alternative HTML version deleted]]


From matt.landis at rsginc.com  Fri Sep  8 14:17:46 2017
From: matt.landis at rsginc.com (Matt Landis)
Date: Fri, 8 Sep 2017 12:17:46 +0000
Subject: [R-sig-Geo] ISO3 to 7 continents names
In-Reply-To: <CANVKczNLAoEziJ9XcpdXJqig5OTU-z0DtOu5f2D-gnPa28js+g@mail.gmail.com>
References: <CAMLwc7NS-=++H0Vpd6QCgWznmA9rJ5sG3Rp-mq88qvUgtKYBEQ@mail.gmail.com>
 <CANVKczNLAoEziJ9XcpdXJqig5OTU-z0DtOu5f2D-gnPa28js+g@mail.gmail.com>
Message-ID: <BLUPR14MB0259ED64C7F20E36E50EA50388950@BLUPR14MB0259.namprd14.prod.outlook.com>

For matching up country names, it's hard to beat the package "countrycode".  It allows conversion across many different country codes and country names, and it also has continents.

Matt



-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Barry Rowlingson
Sent: Friday, September 8, 2017 4:28 AM
To: Miluji Sb <milujisb at gmail.com>
Cc: R-sig-geo mailing list <r-sig-geo at r-project.org>
Subject: Re: [R-sig-Geo] ISO3 to 7 continents names

On Thu, Sep 7, 2017 at 7:35 PM, Miluji Sb <milujisb at gmail.com> wrote:

> Dear all.
>
> Is it possible to convert.identify iso3 country names to the seven 
> continent names?
>
> # Asia, Africa, Antarctica, Australia, Europe, South America, and 
> North America,
>
> I have tried the following:
>
> ###
> region <- merge(countryExData,df,by.x='ISO3V10',by.y='iso3')
>
> where df is the name of my dataset with iso3 the identification 
> variable but there seems to be a a lot of missing values.
>
>
Hard to help you here without seeing at least some of your data, or at least the rows that didn't match. Maybe you've got invalid codes in your data? How can we tell?

Also, you should say where countryExData comes from, I had to guess it was from the rworldmap package. That data frame doesn't have the "continent" in it, so what use is it to you?

Barry

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From alobolistas at gmail.com  Fri Sep  8 15:48:37 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Fri, 8 Sep 2017 15:48:37 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
Message-ID: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>

I get lots of errors at installing rgdal on a recently upgraded machine to
Debian Buster and R3.3.3
There are so many errors that I cannot scroll up enough as to get where
the errors actually start and report.
Is there any way to save the output of install.packages("rgdal") ?

Any other reports on problems installing rgdal on Debian Buster ?

Thanks
Agus


From Roger.Bivand at nhh.no  Fri Sep  8 16:00:42 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 8 Sep 2017 14:00:42 +0000
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
Message-ID: <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>

Please use the command line: R CMD INSTALL <tarball>  and pipe the output (tee) 2>&1 to a file. Please do not post the file, read it to find the root cause. Almost certainly the installed GDAL ha different assumptions about the g++ compiler than R itself, so you may need to install GDAL and R from source. There have been unclear reports of issues with -std=.

Hope this helps,

Roger

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Agustin Lobo
Sendt: fredag 8. september, 14.49
Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
Til: r-sig-geo


I get lots of errors at installing rgdal on a recently upgraded machine to Debian Buster and R3.3.3 There are so many errors that I cannot scroll up enough as to get where the errors actually start and report. Is there any way to save the output of install.packages("rgdal") ? Any other reports on problems installing rgdal on Debian Buster ? Thanks Agus _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From javier.garcia at ehu.eus  Sat Sep  9 17:36:20 2017
From: javier.garcia at ehu.eus (=?iso-8859-1?Q?Javier_Garc=EDa?=)
Date: Sat, 9 Sep 2017 17:36:20 +0200
Subject: [R-sig-Geo] Heteroscedasticity in Spatial Error Model
In-Reply-To: <alpine.LFD.2.20.1708131245080.31539@reclus.nhh.no>
References: <000901d313d7$edf21cc0$c9d65640$@ehu.eus>
 <alpine.LFD.2.20.1708131245080.31539@reclus.nhh.no>
Message-ID: <000301d32981$63663900$2a32ab00$@ehu.eus>

Dear Roger,

Once again thanks a lot for your help. Unfortunately we find very difficult
to do anything else to correct the possible misspecification (we have to
estimate a theoretical model where there are no more covariates, the
funtional form is given, etc), so the only way to continue with the analysis
is using robust standard deviations. Instead of using the sphet package, I
would prefer to continue with the spdep package. In page 23 in the spdep
manual it is stated that "it is also technically possible to make
heteroskedasticity corrections to standard error estimates by using the
?lm.target? component of sarlm objects ? using functions in the lmtest and
sandwich packages.", and gives an example that honestly I do not understand
(what is $tary and $tarX? what is the lm.target component? where are they
documented?). Anyway, I have adapted the example to my case, obtaining an
estimated model with its corresponding coefficients, standard errors, etc.
My question is: is this correct? Are these standard errors already robust
under heteroskedasticity? (the model I have estimated is a spatial error
model by means of the lagsarlm() function)

Thanks a lot in advance

Best
Javi

PD: below you can see the piece of code and the generated output


reg.SLM <- lagsarlm(precio_m2~z1+z2+z3+z4+z5+z6+z7+z8+z9+z10-1,
data=datos,W_n,method="eigen",  tol.solve=1.0e-20) 

lm.target <- lm(reg.SEM$tary ~ reg.SEM$tarX - 1)
if (require(lmtest) && require(sandwich)) {
coeftest(lm.target, vcov=vcovHC(lm.target, type="HC0"), df=Inf)
}

z test of coefficients:

                                         			Estimate
Std. Error  z value    Pr(>|z|)
reg.SEM$tarXI(x - lambda * WX)z1       1489.27593  124.86303 11.9273 <
2.2e-16  ***
reg.SEM$tarXI(x - lambda * WX)z2       1471.24060  135.03910 10.8949 <
2.2e-16  ***
reg.SEM$tarXI(x - lambda * WX)z3       1646.50753  126.03324 13.0641 <
2.2e-16  ***
reg.SEM$tarXI(x - lambda * WX)z4       1615.11404  232.94826  6.9334
4.110e-12  *** 
reg.SEM$tarXI(x - lambda * WX)z5       1947.56387  149.28017 13.0464 <
2.2e-16  ***
reg.SEM$tarXI(x - lambda * WX)z6       1903.80428  132.62287 14.3550 <
2.2e-16  ***
reg.SEM$tarXI(x - lambda * WX)z7       1943.40961  118.29268 16.4288 <
2.2e-16  ***
reg.SEM$tarXI(x - lambda * WX)z8       2576.77441  144.33295 17.8530 <
2.2e-16  ***
reg.SEM$tarXI(x - lambda * WX)z9       3037.47241  215.77036 14.0773 <
2.2e-16  ***
reg.SEM$tarXI(x - lambda * WX)z10     3976.81752  260.71406 15.2536 <
2.2e-16  ***
                                          
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1
  

-----Mensaje original-----
De: Roger Bivand [mailto:Roger.Bivand at nhh.no] 
Enviado el: domingo, 13 de agosto de 2017 12:49
Para: Javier Garc?a
CC: r-sig-geo at r-project.org
Asunto: Re: [R-sig-Geo] Heteroscedasticity in Spatial Error Model

On Sun, 13 Aug 2017, Javier Garc?a wrote:

> Hello again:
>
>
>
> Please, could anyone tell me how to estimate robust standard errors 
> for a spatial error model? The residuals of my model show 
> heteroscedasticity evidence, but the functions I have looked at only work
with lm type objects.
>

The documented approaches use GM rather than ML for fitting - see the sphet
package and https://www.jstatsoft.org/index.php/jss/issue/view/v063. 
You should really try to remove the sources of model mis-specification
instead of spreading coefficient standard errors by guesswork. The may stem
from MAUP, missing covariates and/or wrong functional forms.

Roger

>
>
> Thanks a lot in advance.
>
>
>
> Javi
>
>
>
>
>
>
> JAVIER GARC?A
>
>
>
> Departamento de Econom?a Aplicada III (Econometr?a y Estad?stica)
>
> Facultad de Econom?a y Empresa (Secci?n Sarriko) Avda. Lehendakari 
> Aguirre 83
>
> 48015 BILBAO
> T.: +34 601 7126 F.: +34 601 3754
> <http://www.ehu.es/> www.ehu.es
>
> http://www.unibertsitate-hedakuntza.ehu.es/p268-content/es/contenidos/
> inform 
> acion/manual_id_corp/es_manual/images/firma_email_upv_euskampus_biling
> ue.gif
>
>
>
>
>
>

--
Roger Bivand
Department of Economics, Norwegian School of Economics, Helleveien 30,
N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no Editor-in-Chief of The R
Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From Terry.Beutel at daf.qld.gov.au  Sun Sep 10 02:45:48 2017
From: Terry.Beutel at daf.qld.gov.au (BEUTEL Terry S)
Date: Sun, 10 Sep 2017 00:45:48 +0000
Subject: [R-sig-Geo] Replacing values in a RasterBrick
In-Reply-To: <CAAcGz9-nCjK6i+edusdPrEAAG3-5ChLRe0EiJbA97nT4Gf4T-Q@mail.gmail.com>
References: <0B3A8CE342E4A8409958161BD7B04BD0268D1C48@CHQMAIL01.lands.resnet.qg>
 <CAAcGz9-nCjK6i+edusdPrEAAG3-5ChLRe0EiJbA97nT4Gf4T-Q@mail.gmail.com>
Message-ID: <0B3A8CE342E4A8409958161BD7B04BD0268D31D9@CHQMAIL01.lands.resnet.qg>

Thanks Michael.
I tried pulling it all into memory and running on a heftier computer and it now works. I also changed the datatype to INT2U which sped things up further without losing significant information in my data.

Consequently the ff option now probably isn?t necessary for me, but if its simple to do as you say, and speeds up processing and/or pushes up the size of raster/bricks/stacks that users can process it would always help, and I?d be happy to trial it on data here if that would help.

Cheers
Terry


From: Michael Sumner [mailto:mdsumner at gmail.com]
Sent: Thursday, 7 September 2017 6:38 PM
To: BEUTEL Terry S; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Replacing values in a RasterBrick


On Thu, 7 Sep 2017 at 08:22 BEUTEL Terry S <Terry.Beutel at daf.qld.gov.au<mailto:Terry.Beutel at daf.qld.gov.au>> wrote:
Hi.

I'm working with the Raster package. I have a RasterBrick of 374 monthly rainfall rasters called Rain2.


> Rain2
class       : RasterBrick
dimensions  : 374, 315, 117810, 374  (nrow, ncol, ncell, nlayers)
resolution  : 0.05, 0.05  (x, y)
extent      : 137.925, 153.675, -29.275, -10.575  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +ellps=GRS80 +no_defs
data source : K:\RainStuff\RainRaster.grd
names       :    X198601,    X198602,    X198603,    X198604 ...
min values  :       0.00,       0.00,       0.00,       0.00 ...
max values  :  962.01929,  534.42188,  929.24780,  790.83087 ...



I want to replace the 374 monthly rainfall pixel values at a particular location (defined by the intersection of a single row and a single column) with a different series of 374 values. But when I try the reassignment, I run into memory issues....

As far as I understand it there is no actual partial-write for the this format, it's actually a complicated topic given the range of ways raster can store data either on file or in memory.

A Raster in memory is a long-form matrix with the matrix flattened out (left right top to bottom, different to R's matrix), and the columns are "layers". On disk, the rasterfile (.grd) is a flat binary with an orientation ordering (either band sequential, band interleaved by line or band interleaved by pixel) and so that can't be easily overridden without knowing the details.

Given the size of the file I would first try pulling it all into memory and rewriting in whole:

Rain2 <- readAll(Rain2)

## then run your updates
## ...
##  now write back to file

writeRaster(Rain2, "RainRaster_test.grd")

and check.

If that fails, because your system can't perform this (wasteful, brute force) read and write then you could use ff - it's possible to transparently map an ff array to an existing RasterBrick (in rasterfile.grd format) and update it using ff's efficient memory mapping.

Let  me know if you that sounds promising and you want to explore more, it's a simple thing I should finish up and put on CRAN.

Cheers, Mike.



> Rain2[100,100]<-c(1:374)

Error: cannot allocate vector of size 336.2 Mb



I've also tried using setValues to reassign the values, as per the "Writing functions with the 'raster' package" vignette, but without success e.g. ...

> f2<-

+ function(x,row,col,a){

+ x[row,col]<-setValues(x[row,col],a)

+ return(x)}

>

> a<-c(1:374)

> f2(Rain2,100,101,a)



Error in (function (classes, fdef, mtable)  :

  unable to find an inherited method for function 'setValues' for signature '"matrix"'





I don't work much with the Raster package and I'm sure I'm making an elementary error here, but I'd appreciate any advice on the best way replace these values efficiently.

Many thanks

Terry

------------------------------
The information in this email together with any attachments is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. There is no waiver of any confidentiality/privilege by your inadvertent receipt of this material.
Any form of review, disclosure, modification, distribution and/or publication of this email message is prohibited, unless as a necessary part of Departmental business.
If you have received this message in error, you are asked to inform the sender as quickly as possible and delete this message and any copies of this message from your computer and/or your computer system network.
------------------------------

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo<https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwMFaQ&c=tpTxelpKGw9ZbZ5Dlo0lybSxHDHIiYjksG4icXfalgk&r=WSiYvK4_AlHC5jVoClfL7UaU2gIlHzsDOL_wKj5virk&m=ytXH4ODNC7WcBTPkAGOxRKX_UKtPAi_340UheMnZFnM&s=bC3e32XH9U0dtqHsyPoiSfF3PsFtd3JgsCByvId2nOI&e=>
--
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Sun Sep 10 13:25:29 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Sun, 10 Sep 2017 11:25:29 +0000
Subject: [R-sig-Geo] Replacing values in a RasterBrick
In-Reply-To: <0B3A8CE342E4A8409958161BD7B04BD0268D31D9@CHQMAIL01.lands.resnet.qg>
References: <0B3A8CE342E4A8409958161BD7B04BD0268D1C48@CHQMAIL01.lands.resnet.qg>
 <CAAcGz9-nCjK6i+edusdPrEAAG3-5ChLRe0EiJbA97nT4Gf4T-Q@mail.gmail.com>
 <0B3A8CE342E4A8409958161BD7B04BD0268D31D9@CHQMAIL01.lands.resnet.qg>
Message-ID: <CAAcGz9_-qju6EbxZdgo5+-4SbYbjs-yq8H=N7wxwX0gn01VwHQ@mail.gmail.com>

On Sun, 10 Sep 2017 at 10:45 BEUTEL Terry S <Terry.Beutel at daf.qld.gov.au>
wrote:

> Thanks Michael.
>
> I tried pulling it all into memory and running on a heftier computer and
> it now works. I also changed the datatype to INT2U which sped things up
> further without losing significant information in my data.
>
>
>
> Consequently the ff option now probably isn?t necessary for me, but if its
> simple to do as you say, and speeds up processing and/or pushes up the size
> of raster/bricks/stacks that users can process it would always help, and
> I?d be happy to trial it on data here if that would help.
>
>
>

Thanks!  I'll take you up on that when I look at it again.

Cheers, Mike.



> Cheers
>
> Terry
>
>
>
>
>
> *From:* Michael Sumner [mailto:mdsumner at gmail.com]
> *Sent:* Thursday, 7 September 2017 6:38 PM
> *To:* BEUTEL Terry S; r-sig-geo at r-project.org
> *Subject:* Re: [R-sig-Geo] Replacing values in a RasterBrick
>
>
>
>
>
> On Thu, 7 Sep 2017 at 08:22 BEUTEL Terry S <Terry.Beutel at daf.qld.gov.au>
> wrote:
>
> Hi.
>
> I'm working with the Raster package. I have a RasterBrick of 374 monthly
> rainfall rasters called Rain2.
>
>
> > Rain2
> class       : RasterBrick
> dimensions  : 374, 315, 117810, 374  (nrow, ncol, ncell, nlayers)
> resolution  : 0.05, 0.05  (x, y)
> extent      : 137.925, 153.675, -29.275, -10.575  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +ellps=GRS80 +no_defs
> data source : K:\RainStuff\RainRaster.grd
> names       :    X198601,    X198602,    X198603,    X198604 ...
> min values  :       0.00,       0.00,       0.00,       0.00 ...
> max values  :  962.01929,  534.42188,  929.24780,  790.83087 ...
>
>
>
> I want to replace the 374 monthly rainfall pixel values at a particular
> location (defined by the intersection of a single row and a single column)
> with a different series of 374 values. But when I try the reassignment, I
> run into memory issues....
>
>
>
> As far as I understand it there is no actual partial-write for the this
> format, it's actually a complicated topic given the range of ways raster
> can store data either on file or in memory.
>
>
>
> A Raster in memory is a long-form matrix with the matrix flattened out
> (left right top to bottom, different to R's matrix), and the columns are
> "layers". On disk, the rasterfile (.grd) is a flat binary with an
> orientation ordering (either band sequential, band interleaved by line or
> band interleaved by pixel) and so that can't be easily overridden without
> knowing the details.
>
>
>
> Given the size of the file I would first try pulling it all into memory
> and rewriting in whole:
>
>
>
> Rain2 <- readAll(Rain2)
>
>
>
> ## then run your updates
>
> ## ...
>
> ##  now write back to file
>
>
>
> writeRaster(Rain2, "RainRaster_test.grd")
>
>
>
> and check.
>
>
>
> If that fails, because your system can't perform this (wasteful, brute
> force) read and write then you could use ff - it's possible to
> transparently map an ff array to an existing RasterBrick (in rasterfile.grd
> format) and update it using ff's efficient memory mapping.
>
>
>
> Let  me know if you that sounds promising and you want to explore more,
> it's a simple thing I should finish up and put on CRAN.
>
>
>
> Cheers, Mike.
>
>
>
>
>
> > Rain2[100,100]<-c(1:374)
>
> Error: cannot allocate vector of size 336.2 Mb
>
>
>
> I've also tried using setValues to reassign the values, as per the
> "Writing functions with the 'raster' package" vignette, but without success
> e.g. ...
>
> > f2<-
>
> + function(x,row,col,a){
>
> + x[row,col]<-setValues(x[row,col],a)
>
> + return(x)}
>
> >
>
> > a<-c(1:374)
>
> > f2(Rain2,100,101,a)
>
>
>
> Error in (function (classes, fdef, mtable)  :
>
>   unable to find an inherited method for function 'setValues' for
> signature '"matrix"'
>
>
>
>
>
> I don't work much with the Raster package and I'm sure I'm making an
> elementary error here, but I'd appreciate any advice on the best way
> replace these values efficiently.
>
> Many thanks
>
> Terry
>
> ------------------------------
> The information in this email together with any attachments is intended
> only for the person or entity to which it is addressed and may contain
> confidential and/or privileged material. There is no waiver of any
> confidentiality/privilege by your inadvertent receipt of this material.
> Any form of review, disclosure, modification, distribution and/or
> publication of this email message is prohibited, unless as a necessary part
> of Departmental business.
> If you have received this message in error, you are asked to inform the
> sender as quickly as possible and delete this message and any copies of
> this message from your computer and/or your computer system network.
> ------------------------------
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> <https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dsig-2Dgeo&d=DwMFaQ&c=tpTxelpKGw9ZbZ5Dlo0lybSxHDHIiYjksG4icXfalgk&r=WSiYvK4_AlHC5jVoClfL7UaU2gIlHzsDOL_wKj5virk&m=ytXH4ODNC7WcBTPkAGOxRKX_UKtPAi_340UheMnZFnM&s=bC3e32XH9U0dtqHsyPoiSfF3PsFtd3JgsCByvId2nOI&e=>
>
> --
>
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From alobolistas at gmail.com  Tue Sep 12 09:10:39 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 12 Sep 2017 09:10:39 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
Message-ID: <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>

Thanks,

As indicated, I do:
$ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log

The whole output is here:
https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU

The problem starts at:

configure: PROJ.4 version: 4.8.0
./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
checking PROJ.4: epsg found and readable... yes
./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
checking PROJ.4: conus found and readable... yes
configure: Package CPP flags:  -I/usr/include/gdal
configure: Package LIBS:  -L/usr/lib -lgdal -lproj
configure: creating ./config.status
config.status: creating src/Makevars
** libs
g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
-I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic  -g
-O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
-fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
-D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
In file included from /usr/include/gdal/ogr_feature.h:35:0,
                 from /usr/include/gdal/ogrsf_frmts.h:35,
                 from OGR_write.cpp:2:
/usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
controls (override/final) only available with -std=c++11 or
-std=gnu++11
     GBool Parse() CPL_OVERRIDE;

I'm totally clueless...

Agus

On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> Please use the command line: R CMD INSTALL <tarball>  and pipe the output (tee) 2>&1 to a file. Please do not post the file, read it to find the root cause. Almost certainly the installed GDAL ha different assumptions about the g++ compiler than R itself, so you may need to install GDAL and R from source. There have been unclear reports of issues with -std=.
>
> Hope this helps,
>
> Roger
>
> Roger Bivand
> Norwegian School of Economics
> Bergen, Norway
>
>
>
> Fra: Agustin Lobo
> Sendt: fredag 8. september, 14.49
> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
> Til: r-sig-geo
>
>
> I get lots of errors at installing rgdal on a recently upgraded machine to Debian Buster and R3.3.3 There are so many errors that I cannot scroll up enough as to get where the errors actually start and report. Is there any way to save the output of install.packages("rgdal") ? Any other reports on problems installing rgdal on Debian Buster ? Thanks Agus _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Tue Sep 12 10:15:37 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 12 Sep 2017 10:15:37 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
Message-ID: <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>

How did you install gdal and proj on that machine?

On 12/09/17 09:10, Agustin Lobo wrote:
> Thanks,
> 
> As indicated, I do:
> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
> 
> The whole output is here:
> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
> 
> The problem starts at:
> 
> configure: PROJ.4 version: 4.8.0
> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
> checking PROJ.4: epsg found and readable... yes
> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
> checking PROJ.4: conus found and readable... yes
> configure: Package CPP flags:  -I/usr/include/gdal
> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic  -g
> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>                  from OGR_write.cpp:2:
> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
> controls (override/final) only available with -std=c++11 or
> -std=gnu++11
>      GBool Parse() CPL_OVERRIDE;
> 
> I'm totally clueless...
> 
> Agus
> 
> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> Please use the command line: R CMD INSTALL <tarball>  and pipe the output (tee) 2>&1 to a file. Please do not post the file, read it to find the root cause. Almost certainly the installed GDAL ha different assumptions about the g++ compiler than R itself, so you may need to install GDAL and R from source. There have been unclear reports of issues with -std=.
>>
>> Hope this helps,
>>
>> Roger
>>
>> Roger Bivand
>> Norwegian School of Economics
>> Bergen, Norway
>>
>>
>>
>> Fra: Agustin Lobo
>> Sendt: fredag 8. september, 14.49
>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>> Til: r-sig-geo
>>
>>
>> I get lots of errors at installing rgdal on a recently upgraded machine to Debian Buster and R3.3.3 There are so many errors that I cannot scroll up enough as to get where the errors actually start and report. Is there any way to save the output of install.packages("rgdal") ? Any other reports on problems installing rgdal on Debian Buster ? Thanks Agus _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170912/91471d34/attachment.sig>

From alobolistas at gmail.com  Tue Sep 12 10:41:32 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 12 Sep 2017 10:41:32 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
Message-ID: <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>

Using Synaptic.
I just tested with a live usb with Debian Stretch, and with stretch
rgdal installs with no problems (after installing gdal-bin, gdal-dev
and dependencies) .
Agus

On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
<edzer.pebesma at uni-muenster.de> wrote:
> How did you install gdal and proj on that machine?
>
> On 12/09/17 09:10, Agustin Lobo wrote:
>> Thanks,
>>
>> As indicated, I do:
>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>
>> The whole output is here:
>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>
>> The problem starts at:
>>
>> configure: PROJ.4 version: 4.8.0
>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>> checking PROJ.4: epsg found and readable... yes
>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>> checking PROJ.4: conus found and readable... yes
>> configure: Package CPP flags:  -I/usr/include/gdal
>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>> configure: creating ./config.status
>> config.status: creating src/Makevars
>> ** libs
>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic  -g
>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>                  from OGR_write.cpp:2:
>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>> controls (override/final) only available with -std=c++11 or
>> -std=gnu++11
>>      GBool Parse() CPL_OVERRIDE;
>>
>> I'm totally clueless...
>>
>> Agus
>>
>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>> Please use the command line: R CMD INSTALL <tarball>  and pipe the output (tee) 2>&1 to a file. Please do not post the file, read it to find the root cause. Almost certainly the installed GDAL ha different assumptions about the g++ compiler than R itself, so you may need to install GDAL and R from source. There have been unclear reports of issues with -std=.
>>>
>>> Hope this helps,
>>>
>>> Roger
>>>
>>> Roger Bivand
>>> Norwegian School of Economics
>>> Bergen, Norway
>>>
>>>
>>>
>>> Fra: Agustin Lobo
>>> Sendt: fredag 8. september, 14.49
>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>> Til: r-sig-geo
>>>
>>>
>>> I get lots of errors at installing rgdal on a recently upgraded machine to Debian Buster and R3.3.3 There are so many errors that I cannot scroll up enough as to get where the errors actually start and report. Is there any way to save the output of install.packages("rgdal") ? Any other reports on problems installing rgdal on Debian Buster ? Thanks Agus _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Edzer Pebesma
> Institute for Geoinformatics  (ifgi),  University of M?nster
> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
> Journal of Statistical Software:   http://www.jstatsoft.org/
> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Tue Sep 12 11:37:11 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Sep 2017 11:37:11 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>

My guess is that your g++ is being used differently to build R and GDAL 
(seen before off-list in August). If you install PROJ, GDAL and R from 
source on your platform, they will (most likely) match. It looks as though 
R was not built with -std=c++11 or -std=gnu++11. On your current platform, 
you almost certainly have a more modern g++, and your R should be built 
with this for packages using C++. Do you know where synaptic is getting 
its binaries?

Roger

On Tue, 12 Sep 2017, Agustin Lobo wrote:

> Using Synaptic.
> I just tested with a live usb with Debian Stretch, and with stretch
> rgdal installs with no problems (after installing gdal-bin, gdal-dev
> and dependencies) .
> Agus
>
> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> wrote:
>> How did you install gdal and proj on that machine?
>>
>> On 12/09/17 09:10, Agustin Lobo wrote:
>>> Thanks,
>>>
>>> As indicated, I do:
>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>
>>> The whole output is here:
>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>
>>> The problem starts at:
>>>
>>> configure: PROJ.4 version: 4.8.0
>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>> checking PROJ.4: epsg found and readable... yes
>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>> checking PROJ.4: conus found and readable... yes
>>> configure: Package CPP flags:  -I/usr/include/gdal
>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>> configure: creating ./config.status
>>> config.status: creating src/Makevars
>>> ** libs
>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic  -g
>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>                  from OGR_write.cpp:2:
>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>> controls (override/final) only available with -std=c++11 or
>>> -std=gnu++11
>>>      GBool Parse() CPL_OVERRIDE;
>>>
>>> I'm totally clueless...
>>>
>>> Agus
>>>
>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe the output (tee) 2>&1 to a file. Please do not post the file, read it to find the root cause. Almost certainly the installed GDAL ha different assumptions about the g++ compiler than R itself, so you may need to install GDAL and R from source. There have been unclear reports of issues with -std=.
>>>>
>>>> Hope this helps,
>>>>
>>>> Roger
>>>>
>>>> Roger Bivand
>>>> Norwegian School of Economics
>>>> Bergen, Norway
>>>>
>>>>
>>>>
>>>> Fra: Agustin Lobo
>>>> Sendt: fredag 8. september, 14.49
>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>> Til: r-sig-geo
>>>>
>>>>
>>>> I get lots of errors at installing rgdal on a recently upgraded machine to Debian Buster and R3.3.3 There are so many errors that I cannot scroll up enough as to get where the errors actually start and report. Is there any way to save the output of install.packages("rgdal") ? Any other reports on problems installing rgdal on Debian Buster ? Thanks Agus _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics  (ifgi),  University of M?nster
>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>> Journal of Statistical Software:   http://www.jstatsoft.org/
>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From alobolistas at gmail.com  Tue Sep 12 12:25:38 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 12 Sep 2017 12:25:38 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
 <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
Message-ID: <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>

I assume that from the repos I have defined, this is an standard installation:
deb http://ftp.de.debian.org/debian/ testing main
deb-src http://ftp.de.debian.org/debian/ testing main
deb http://ftp.de.debian.org/debian/ testing-updates main
deb-src http://ftp.de.debian.org/debian/ testing-updates main
deb ftp://security.debian.org/debian-security testing/updates main
deb-src ftp://security.debian.org/debian-security testing/updates main

deb http://deb.debian.org/debian/ testing non-free contrib main
deb-src http://deb.debian.org/debian/ testing non-free contrib main
deb http://deb.debian.org/debian/ testing-updates non-free contrib main
deb-src http://deb.debian.org/debian/ testing-updates non-free contrib main

Also:
alobo at debi:~$ dpkg -s gdal-bin
Package: gdal-bin
Status: install ok installed
Priority: optional
Section: science
Installed-Size: 724
Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
Architecture: i386
Source: gdal (2.2.1+dfsg-2)
Version: 2.2.1+dfsg-2+b2
Depends: gdal-abi-2-2-1, libc6 (>= 2.15), libgcc1 (>= 1:4.2),
libgdal20 (>= 2.2.0), libstdc++6 (>= 5.2)
Suggests: libgdal-grass, python-gdal
Breaks: gdal-bin (<< 1.10.0-0~)

alobo at debi:~$ dpkg -s libgdal-dev
Package: libgdal-dev
Status: install ok installed
Priority: optional
Section: libdevel
Installed-Size: 32633
Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
Architecture: i386
Source: gdal (2.2.1+dfsg-2)
Version: 2.2.1+dfsg-2+b2
Depends: libgdal20 (= 2.2.1+dfsg-2+b2), libc6-dev, libarmadillo-dev,
libcurl4-gnutls-dev | libcurl-ssl-dev, libdap-dev, libepsilon-dev,
libexpat1-dev, libfreexl-dev, libfyba-dev, libgeos-dev,
libgeotiff-dev, libgif-dev, libhdf4-alt-dev, libhdf5-dev, libjpeg-dev,
libjson-c-dev, libkml-dev, libltdl-dev, liblzma-dev,
default-libmysqlclient-dev, libnetcdf-dev, libogdi3.2-dev,
libopenjp2-7-dev, libpcre3-dev, libpng-dev, libpoppler-private-dev,
libpq-dev, libproj-dev, libqhull-dev, libspatialite-dev,
libsqlite3-dev, libtiff-dev, liburiparser-dev, libwebp-dev,
libxerces-c-dev, libxml2-dev, unixodbc-dev
Suggests: libgdal-doc

I've contacted pkg-grass-devel at lists.alioth.debian.org

Agus

On Tue, Sep 12, 2017 at 11:37 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> My guess is that your g++ is being used differently to build R and GDAL
> (seen before off-list in August). If you install PROJ, GDAL and R from
> source on your platform, they will (most likely) match. It looks as though R
> was not built with -std=c++11 or -std=gnu++11. On your current platform, you
> almost certainly have a more modern g++, and your R should be built with
> this for packages using C++. Do you know where synaptic is getting its
> binaries?
>
> Roger
>
>
> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>
>> Using Synaptic.
>> I just tested with a live usb with Debian Stretch, and with stretch
>> rgdal installs with no problems (after installing gdal-bin, gdal-dev
>> and dependencies) .
>> Agus
>>
>> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
>> <edzer.pebesma at uni-muenster.de> wrote:
>>>
>>> How did you install gdal and proj on that machine?
>>>
>>> On 12/09/17 09:10, Agustin Lobo wrote:
>>>>
>>>> Thanks,
>>>>
>>>> As indicated, I do:
>>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>>
>>>> The whole output is here:
>>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>>
>>>> The problem starts at:
>>>>
>>>> configure: PROJ.4 version: 4.8.0
>>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>>> checking PROJ.4: epsg found and readable... yes
>>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>> checking PROJ.4: conus found and readable... yes
>>>> configure: Package CPP flags:  -I/usr/include/gdal
>>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>>> configure: creating ./config.status
>>>> config.status: creating src/Makevars
>>>> ** libs
>>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic  -g
>>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>>> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
>>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>>                  from OGR_write.cpp:2:
>>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>>> controls (override/final) only available with -std=c++11 or
>>>> -std=gnu++11
>>>>      GBool Parse() CPL_OVERRIDE;
>>>>
>>>> I'm totally clueless...
>>>>
>>>> Agus
>>>>
>>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>> wrote:
>>>>>
>>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe the
>>>>> output (tee) 2>&1 to a file. Please do not post the file, read it to find
>>>>> the root cause. Almost certainly the installed GDAL ha different assumptions
>>>>> about the g++ compiler than R itself, so you may need to install GDAL and R
>>>>> from source. There have been unclear reports of issues with -std=.
>>>>>
>>>>> Hope this helps,
>>>>>
>>>>> Roger
>>>>>
>>>>> Roger Bivand
>>>>> Norwegian School of Economics
>>>>> Bergen, Norway
>>>>>
>>>>>
>>>>>
>>>>> Fra: Agustin Lobo
>>>>> Sendt: fredag 8. september, 14.49
>>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>>> Til: r-sig-geo
>>>>>
>>>>>
>>>>> I get lots of errors at installing rgdal on a recently upgraded machine
>>>>> to Debian Buster and R3.3.3 There are so many errors that I cannot scroll up
>>>>> enough as to get where the errors actually start and report. Is there any
>>>>> way to save the output of install.packages("rgdal") ? Any other reports on
>>>>> problems installing rgdal on Debian Buster ? Thanks Agus
>>>>> _______________________________________________ R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> --
>>> Edzer Pebesma
>>> Institute for Geoinformatics  (ifgi),  University of M?nster
>>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>>> Journal of Statistical Software:   http://www.jstatsoft.org/
>>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From omaralthwaini at yahoo.com  Tue Sep 12 12:21:42 2017
From: omaralthwaini at yahoo.com (Omar Faisel)
Date: Tue, 12 Sep 2017 10:21:42 +0000 (UTC)
Subject: [R-sig-Geo] "Zelig" function for Logistic regression
References: <652945080.221014.1505211702819.ref@mail.yahoo.com>
Message-ID: <652945080.221014.1505211702819@mail.yahoo.com>

Dear All,
I have misleadings with "Zelig" function to process the data with Logistic regression.
Here is a glance at my data> head(data.variables, n=4)? target? F1 F2 F3 F41? ? ?1? 103.6462? 13.460189? ? ? ? ?15? ? ? ? ? 52? ? ?1 1138.1763? 14.049833? ? ? ? ?15? ? ? ? ? 53? ? ?1? 731.0000? ?8.321724? ? ? ? ?10? ? ? ? ? 54? ? ?1? 335.6171? 21.928064? ? ? ? ? 9? ? ? ? ? 5
> cross.classification.lrm<-table(as.numeric(result.lrm$y),round(result.lrm$fitted.values),dnn=c("Observed","Predicted"))
Error in envRefInferField(x, what, getClass(class(x)), selfEnv) :?? ?y? is not a valid field or method name for reference class ?Zelig-logit?
Here is the function?>result.lrm<-zelig(as.formula(paste(names(data.variables)[1],"~",paste(names(data.variables[,2:dim(data.variables)[2]]),collapse= "+"))), data=data.variables, model="logit")

Here the output names>?names(result.lrm)1] "vignette.url"? ? ? ? ? ? ? ?"simx1"? ? ? ? ? ? ? ? ? ? ? "summarise"? ? ? ??? [4] "zelig#Zelig"? ? ? ? ? ? ? ? "setx.labels"? ? ? ? ? ? ? ? "bootstrap"? ? ? ? ? ? ? ??? [7] "bsetrange"? ? ? ? ? ? ? ? ? "initialize"? ? ? ? ? ? ? ? ?"show#Zelig"? ? ? ? ? ? ? ???[10] "name"? ? ? ? ? ? ? ? ? ? ? ?"mcfun"? ? ? ? ? ? ? ? ? ? ? "year"? ? ? ? ? ? ? ? ? ? ???[13] "simx"? ? ? ? ? ? ? ? ? ? ? ?"callSuper"? ? ? ? ? ? ? ? ? "range"? ? ? ? ? ? ? ? ? ? ??[16] "signif.stars"? ? ? ? ? ? ? ?"packageauthors"? ? ? ? ? ? ?"get_qi"? ? ? ? ? ? ? ? ? ???[19] "range1"? ? ? ? ? ? ? ? ? ? ?"param"? ? ? ? ? ? ? ? ? ? ? "zelig.out"? ? ? ? ? ? ? ? ??[22] "sim.out"? ? ? ? ? ? ? ? ? ? "acceptweights"? ? ? ? ? ? ? "setrange"? ? ? ? ? ? ? ? ???[25] "json"? ? ? ? ? ? ? ? ? ? ? ?"qi"? ? ? ? ? ? ? ? ? ? ? ? ?"url"? ? ? ? ? ? ? ? ? ? ? ??[28] "get_names"? ? ? ? ? ? ? ? ? "packagename"? ? ? ? ? ? ? ? "from_zelig_model"? ? ? ? ???[31] "initialize#Zelig-glm"? ? ? ?"family"? ? ? ? ? ? ? ? ? ? ?"get_df_residual"? ? ? ? ? ??[34] "signif.stars.default"? ? ? ?"linkinv"? ? ? ? ? ? ? ? ? ? "num"? ? ? ? ? ? ? ? ? ? ? ??[37] "originaldata"? ? ? ? ? ? ? ?"buildDataByWeights2"? ? ? ? "setforeveryby"? ? ? ? ? ? ??[40] "refs"? ? ? ? ? ? ? ? ? ? ? ?"show#envRefClass"? ? ? ? ? ?"sim"? ? ? ? ? ? ? ? ? ? ? ??[43] "cite"? ? ? ? ? ? ? ? ? ? ? ?"toJSON"? ? ? ? ? ? ? ? ? ? ?"get_se"? ? ? ? ? ? ? ? ? ???[46] "setx"? ? ? ? ? ? ? ? ? ? ? ?"getRefClass"? ? ? ? ? ? ? ? "model.call"? ? ? ? ? ? ? ???[49] "graph"? ? ? ? ? ? ? ? ? ? ? "import"? ? ? ? ? ? ? ? ? ? ?"weights"? ? ? ? ? ? ? ? ? ??[52] "copy"? ? ? ? ? ? ? ? ? ? ? ?"simrange1"? ? ? ? ? ? ? ? ? "export"? ? ? ? ? ? ? ? ? ???[55] "show"? ? ? ? ? ? ? ? ? ? ? ?"bsetx1"? ? ? ? ? ? ? ? ? ? ?"simparam"? ? ? ? ? ? ? ? ???[58] "matched"? ? ? ? ? ? ? ? ? ? "initFields"? ? ? ? ? ? ? ? ?"zeligauthors"? ? ? ? ? ? ???[61] "data"? ? ? ? ? ? ? ? ? ? ? ?"get_coef"? ? ? ? ? ? ? ? ? ?"category"? ? ? ? ? ? ? ? ???[64] "by"? ? ? ? ? ? ? ? ? ? ? ? ?"get_pvalue"? ? ? ? ? ? ? ? ?"description"? ? ? ? ? ? ? ??[67] "mcunit"? ? ? ? ? ? ? ? ? ? ?"getClass"? ? ? ? ? ? ? ? ? ?"initialize#Zelig"? ? ? ? ???[70] "zelig"? ? ? ? ? ? ? ? ? ? ? "usingMethods"? ? ? ? ? ? ? ?"test.statistics"? ? ? ? ? ??[73] "help"? ? ? ? ? ? ? ? ? ? ? ?"mcformula"? ? ? ? ? ? ? ? ? "outcome"? ? ? ? ? ? ? ? ? ??[76] "get_predict"? ? ? ? ? ? ? ? "buildDataByBootstrap"? ? ? ?"bsetx"? ? ? ? ? ? ? ? ? ? ??[79] "get_fitted"? ? ? ? ? ? ? ? ?"initialize#Zelig-binchoice" "bsetrange1"? ? ? ? ? ? ? ???[82] "trace"? ? ? ? ? ? ? ? ? ? ? "get_model_data"? ? ? ? ? ? ?"avg"? ? ? ? ? ? ? ? ? ? ? ??[85] "get_residuals"? ? ? ? ? ? ? "mi"? ? ? ? ? ? ? ? ? ? ? ? ?"references"? ? ? ? ? ? ? ???[88] "modelauthors"? ? ? ? ? ? ? ?"originalweights"? ? ? ? ? ? "zelig.call"? ? ? ? ? ? ? ???[91] "link"? ? ? ? ? ? ? ? ? ? ? ?"feedback"? ? ? ? ? ? ? ? ? ?"summarize"? ? ? ? ? ? ? ? ??[94] "setx.out"? ? ? ? ? ? ? ? ? ?"formula"? ? ? ? ? ? ? ? ? ? "simrange"? ? ? ? ? ? ? ? ???[97] "simATT"? ? ? ? ? ? ? ? ? ? ?"ATT"? ? ? ? ? ? ? ? ? ? ? ? "bootstrap.num"? ? ? ? ? ? ?[100] "idx"? ? ? ? ? ? ? ? ? ? ? ? "get_vcov"? ? ? ? ? ? ? ? ? ?"untrace"? ? ? ? ? ? ? ? ? ?[103] "set"? ? ? ? ? ? ? ? ? ? ? ? "fn"? ? ? ? ? ? ? ? ? ? ? ? ?"mcfun#Zelig"? ? ? ? ? ? ? ?[106] "buildDataByWeights"? ? ? ? ?"url.docs"? ? ? ? ? ? ? ? ? ?"with.feedback"? ? ? ? ? ? ?[109] "field"? ? ? ? ? ? ? ? ? ? ? "setx1"? ? ? ? ? ? ? ? ? ? ? "setrange1"? ? ? ? ? ? ? ? ?[112] "authors"? ? ? ? ? ? ? ? ? ? "ljson"? ? ? ? ? ? ? ? ? ? ? "explanatory"? ? ? ? ? ? ? ?[115] "wrapper"? ? ? ? ? ? ? ? ? ? "mcunit.test"
for the predicted values, I?used fitted(results.lrm), it works no problem."
I noticed there is no result called the logit function "y"
But my question: what is the value that can be used instead of "Y"?

Thank you,
	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Tue Sep 12 12:28:16 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Sep 2017 12:28:16 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
 <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
 <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709121226330.2981@reclus.nhh.no>

From the entrails, GDAL was built with a CXX11 compiler, but R was very 
possibly not, hence the messages. Where did R come from, and was it itself 
built for the same Debian version?

Roger


On Tue, 12 Sep 2017, Agustin Lobo wrote:

> I assume that from the repos I have defined, this is an standard installation:
> deb http://ftp.de.debian.org/debian/ testing main
> deb-src http://ftp.de.debian.org/debian/ testing main
> deb http://ftp.de.debian.org/debian/ testing-updates main
> deb-src http://ftp.de.debian.org/debian/ testing-updates main
> deb ftp://security.debian.org/debian-security testing/updates main
> deb-src ftp://security.debian.org/debian-security testing/updates main
>
> deb http://deb.debian.org/debian/ testing non-free contrib main
> deb-src http://deb.debian.org/debian/ testing non-free contrib main
> deb http://deb.debian.org/debian/ testing-updates non-free contrib main
> deb-src http://deb.debian.org/debian/ testing-updates non-free contrib main
>
> Also:
> alobo at debi:~$ dpkg -s gdal-bin
> Package: gdal-bin
> Status: install ok installed
> Priority: optional
> Section: science
> Installed-Size: 724
> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
> Architecture: i386
> Source: gdal (2.2.1+dfsg-2)
> Version: 2.2.1+dfsg-2+b2
> Depends: gdal-abi-2-2-1, libc6 (>= 2.15), libgcc1 (>= 1:4.2),
> libgdal20 (>= 2.2.0), libstdc++6 (>= 5.2)
> Suggests: libgdal-grass, python-gdal
> Breaks: gdal-bin (<< 1.10.0-0~)
>
> alobo at debi:~$ dpkg -s libgdal-dev
> Package: libgdal-dev
> Status: install ok installed
> Priority: optional
> Section: libdevel
> Installed-Size: 32633
> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
> Architecture: i386
> Source: gdal (2.2.1+dfsg-2)
> Version: 2.2.1+dfsg-2+b2
> Depends: libgdal20 (= 2.2.1+dfsg-2+b2), libc6-dev, libarmadillo-dev,
> libcurl4-gnutls-dev | libcurl-ssl-dev, libdap-dev, libepsilon-dev,
> libexpat1-dev, libfreexl-dev, libfyba-dev, libgeos-dev,
> libgeotiff-dev, libgif-dev, libhdf4-alt-dev, libhdf5-dev, libjpeg-dev,
> libjson-c-dev, libkml-dev, libltdl-dev, liblzma-dev,
> default-libmysqlclient-dev, libnetcdf-dev, libogdi3.2-dev,
> libopenjp2-7-dev, libpcre3-dev, libpng-dev, libpoppler-private-dev,
> libpq-dev, libproj-dev, libqhull-dev, libspatialite-dev,
> libsqlite3-dev, libtiff-dev, liburiparser-dev, libwebp-dev,
> libxerces-c-dev, libxml2-dev, unixodbc-dev
> Suggests: libgdal-doc
>
> I've contacted pkg-grass-devel at lists.alioth.debian.org
>
> Agus
>
> On Tue, Sep 12, 2017 at 11:37 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> My guess is that your g++ is being used differently to build R and GDAL
>> (seen before off-list in August). If you install PROJ, GDAL and R from
>> source on your platform, they will (most likely) match. It looks as though R
>> was not built with -std=c++11 or -std=gnu++11. On your current platform, you
>> almost certainly have a more modern g++, and your R should be built with
>> this for packages using C++. Do you know where synaptic is getting its
>> binaries?
>>
>> Roger
>>
>>
>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>
>>> Using Synaptic.
>>> I just tested with a live usb with Debian Stretch, and with stretch
>>> rgdal installs with no problems (after installing gdal-bin, gdal-dev
>>> and dependencies) .
>>> Agus
>>>
>>> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
>>> <edzer.pebesma at uni-muenster.de> wrote:
>>>>
>>>> How did you install gdal and proj on that machine?
>>>>
>>>> On 12/09/17 09:10, Agustin Lobo wrote:
>>>>>
>>>>> Thanks,
>>>>>
>>>>> As indicated, I do:
>>>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>>>
>>>>> The whole output is here:
>>>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>>>
>>>>> The problem starts at:
>>>>>
>>>>> configure: PROJ.4 version: 4.8.0
>>>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>>>> checking PROJ.4: epsg found and readable... yes
>>>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>>> checking PROJ.4: conus found and readable... yes
>>>>> configure: Package CPP flags:  -I/usr/include/gdal
>>>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>>>> configure: creating ./config.status
>>>>> config.status: creating src/Makevars
>>>>> ** libs
>>>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic  -g
>>>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>>>> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
>>>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>>>                  from OGR_write.cpp:2:
>>>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>>>> controls (override/final) only available with -std=c++11 or
>>>>> -std=gnu++11
>>>>>      GBool Parse() CPL_OVERRIDE;
>>>>>
>>>>> I'm totally clueless...
>>>>>
>>>>> Agus
>>>>>
>>>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>> wrote:
>>>>>>
>>>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe the
>>>>>> output (tee) 2>&1 to a file. Please do not post the file, read it to find
>>>>>> the root cause. Almost certainly the installed GDAL ha different assumptions
>>>>>> about the g++ compiler than R itself, so you may need to install GDAL and R
>>>>>> from source. There have been unclear reports of issues with -std=.
>>>>>>
>>>>>> Hope this helps,
>>>>>>
>>>>>> Roger
>>>>>>
>>>>>> Roger Bivand
>>>>>> Norwegian School of Economics
>>>>>> Bergen, Norway
>>>>>>
>>>>>>
>>>>>>
>>>>>> Fra: Agustin Lobo
>>>>>> Sendt: fredag 8. september, 14.49
>>>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>>>> Til: r-sig-geo
>>>>>>
>>>>>>
>>>>>> I get lots of errors at installing rgdal on a recently upgraded machine
>>>>>> to Debian Buster and R3.3.3 There are so many errors that I cannot scroll up
>>>>>> enough as to get where the errors actually start and report. Is there any
>>>>>> way to save the output of install.packages("rgdal") ? Any other reports on
>>>>>> problems installing rgdal on Debian Buster ? Thanks Agus
>>>>>> _______________________________________________ R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>
>>>> --
>>>> Edzer Pebesma
>>>> Institute for Geoinformatics  (ifgi),  University of M?nster
>>>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>>>> Journal of Statistical Software:   http://www.jstatsoft.org/
>>>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>>>
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From alobolistas at gmail.com  Tue Sep 12 12:54:30 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 12 Sep 2017 12:54:30 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <alpine.LFD.2.21.1709121226330.2981@reclus.nhh.no>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
 <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
 <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>
 <alpine.LFD.2.21.1709121226330.2981@reclus.nhh.no>
Message-ID: <CAG4NReJGq95gMadwiUrFD0w+3TsmY_gWo+fyAvK+SO_F7x+9+A@mail.gmail.com>

I just installed r-base through synaptic.
alobo at debi:~$ dpkg -s r-base
Package: r-base
Status: install ok installed
Priority: optional
Section: gnu-r
Installed-Size: 60
Maintainer: Dirk Eddelbuettel <edd at debian.org>
Architecture: all
Version: 3.3.3-1
Depends: r-base-core (>= 3.3.3-1), r-recommended (= 3.3.3-1)
Recommends: r-base-html, r-doc-html
Suggests: ess, r-doc-info | r-doc-pdf

I think I'll try to downgrade to stretch...

Agus


On Tue, Sep 12, 2017 at 12:28 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> From the entrails, GDAL was built with a CXX11 compiler, but R was very
> possibly not, hence the messages. Where did R come from, and was it itself
> built for the same Debian version?
>
>
> Roger
>
>
> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>
>> I assume that from the repos I have defined, this is an standard
>> installation:
>> deb http://ftp.de.debian.org/debian/ testing main
>> deb-src http://ftp.de.debian.org/debian/ testing main
>> deb http://ftp.de.debian.org/debian/ testing-updates main
>> deb-src http://ftp.de.debian.org/debian/ testing-updates main
>> deb ftp://security.debian.org/debian-security testing/updates main
>> deb-src ftp://security.debian.org/debian-security testing/updates main
>>
>> deb http://deb.debian.org/debian/ testing non-free contrib main
>> deb-src http://deb.debian.org/debian/ testing non-free contrib main
>> deb http://deb.debian.org/debian/ testing-updates non-free contrib main
>> deb-src http://deb.debian.org/debian/ testing-updates non-free contrib
>> main
>>
>> Also:
>> alobo at debi:~$ dpkg -s gdal-bin
>> Package: gdal-bin
>> Status: install ok installed
>> Priority: optional
>> Section: science
>> Installed-Size: 724
>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>> Architecture: i386
>> Source: gdal (2.2.1+dfsg-2)
>> Version: 2.2.1+dfsg-2+b2
>> Depends: gdal-abi-2-2-1, libc6 (>= 2.15), libgcc1 (>= 1:4.2),
>> libgdal20 (>= 2.2.0), libstdc++6 (>= 5.2)
>> Suggests: libgdal-grass, python-gdal
>> Breaks: gdal-bin (<< 1.10.0-0~)
>>
>> alobo at debi:~$ dpkg -s libgdal-dev
>> Package: libgdal-dev
>> Status: install ok installed
>> Priority: optional
>> Section: libdevel
>> Installed-Size: 32633
>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>> Architecture: i386
>> Source: gdal (2.2.1+dfsg-2)
>> Version: 2.2.1+dfsg-2+b2
>> Depends: libgdal20 (= 2.2.1+dfsg-2+b2), libc6-dev, libarmadillo-dev,
>> libcurl4-gnutls-dev | libcurl-ssl-dev, libdap-dev, libepsilon-dev,
>> libexpat1-dev, libfreexl-dev, libfyba-dev, libgeos-dev,
>> libgeotiff-dev, libgif-dev, libhdf4-alt-dev, libhdf5-dev, libjpeg-dev,
>> libjson-c-dev, libkml-dev, libltdl-dev, liblzma-dev,
>> default-libmysqlclient-dev, libnetcdf-dev, libogdi3.2-dev,
>> libopenjp2-7-dev, libpcre3-dev, libpng-dev, libpoppler-private-dev,
>> libpq-dev, libproj-dev, libqhull-dev, libspatialite-dev,
>> libsqlite3-dev, libtiff-dev, liburiparser-dev, libwebp-dev,
>> libxerces-c-dev, libxml2-dev, unixodbc-dev
>> Suggests: libgdal-doc
>>
>> I've contacted pkg-grass-devel at lists.alioth.debian.org
>>
>> Agus
>>
>> On Tue, Sep 12, 2017 at 11:37 AM, Roger Bivand <Roger.Bivand at nhh.no>
>> wrote:
>>>
>>> My guess is that your g++ is being used differently to build R and GDAL
>>> (seen before off-list in August). If you install PROJ, GDAL and R from
>>> source on your platform, they will (most likely) match. It looks as
>>> though R
>>> was not built with -std=c++11 or -std=gnu++11. On your current platform,
>>> you
>>> almost certainly have a more modern g++, and your R should be built with
>>> this for packages using C++. Do you know where synaptic is getting its
>>> binaries?
>>>
>>> Roger
>>>
>>>
>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>
>>>> Using Synaptic.
>>>> I just tested with a live usb with Debian Stretch, and with stretch
>>>> rgdal installs with no problems (after installing gdal-bin, gdal-dev
>>>> and dependencies) .
>>>> Agus
>>>>
>>>> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
>>>> <edzer.pebesma at uni-muenster.de> wrote:
>>>>>
>>>>>
>>>>> How did you install gdal and proj on that machine?
>>>>>
>>>>> On 12/09/17 09:10, Agustin Lobo wrote:
>>>>>>
>>>>>>
>>>>>> Thanks,
>>>>>>
>>>>>> As indicated, I do:
>>>>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>>>>
>>>>>> The whole output is here:
>>>>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>>>>
>>>>>> The problem starts at:
>>>>>>
>>>>>> configure: PROJ.4 version: 4.8.0
>>>>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>>>> checking PROJ.4: conus found and readable... yes
>>>>>> configure: Package CPP flags:  -I/usr/include/gdal
>>>>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>>>>> configure: creating ./config.status
>>>>>> config.status: creating src/Makevars
>>>>>> ** libs
>>>>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>>>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic  -g
>>>>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>>>>> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
>>>>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>>>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>>>>                  from OGR_write.cpp:2:
>>>>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>>>>> controls (override/final) only available with -std=c++11 or
>>>>>> -std=gnu++11
>>>>>>      GBool Parse() CPL_OVERRIDE;
>>>>>>
>>>>>> I'm totally clueless...
>>>>>>
>>>>>> Agus
>>>>>>
>>>>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>> wrote:
>>>>>>>
>>>>>>>
>>>>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe the
>>>>>>> output (tee) 2>&1 to a file. Please do not post the file, read it to
>>>>>>> find
>>>>>>> the root cause. Almost certainly the installed GDAL ha different
>>>>>>> assumptions
>>>>>>> about the g++ compiler than R itself, so you may need to install GDAL
>>>>>>> and R
>>>>>>> from source. There have been unclear reports of issues with -std=.
>>>>>>>
>>>>>>> Hope this helps,
>>>>>>>
>>>>>>> Roger
>>>>>>>
>>>>>>> Roger Bivand
>>>>>>> Norwegian School of Economics
>>>>>>> Bergen, Norway
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Fra: Agustin Lobo
>>>>>>> Sendt: fredag 8. september, 14.49
>>>>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>>>>> Til: r-sig-geo
>>>>>>>
>>>>>>>
>>>>>>> I get lots of errors at installing rgdal on a recently upgraded
>>>>>>> machine
>>>>>>> to Debian Buster and R3.3.3 There are so many errors that I cannot
>>>>>>> scroll up
>>>>>>> enough as to get where the errors actually start and report. Is there
>>>>>>> any
>>>>>>> way to save the output of install.packages("rgdal") ? Any other
>>>>>>> reports on
>>>>>>> problems installing rgdal on Debian Buster ? Thanks Agus
>>>>>>> _______________________________________________ R-sig-Geo mailing
>>>>>>> list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>
>>>>>>>
>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>
>>>>> --
>>>>> Edzer Pebesma
>>>>> Institute for Geoinformatics  (ifgi),  University of M?nster
>>>>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>>>>> Journal of Statistical Software:   http://www.jstatsoft.org/
>>>>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> Editor-in-Chief of The R Journal,
>>> https://journal.r-project.org/index.html
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Tue Sep 12 13:09:50 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Sep 2017 13:09:50 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReJGq95gMadwiUrFD0w+3TsmY_gWo+fyAvK+SO_F7x+9+A@mail.gmail.com>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
 <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
 <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>
 <alpine.LFD.2.21.1709121226330.2981@reclus.nhh.no>
 <CAG4NReJGq95gMadwiUrFD0w+3TsmY_gWo+fyAvK+SO_F7x+9+A@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709121308050.2981@reclus.nhh.no>

On Tue, 12 Sep 2017, Agustin Lobo wrote:

> I just installed r-base through synaptic.
> alobo at debi:~$ dpkg -s r-base
> Package: r-base
> Status: install ok installed
> Priority: optional
> Section: gnu-r
> Installed-Size: 60
> Maintainer: Dirk Eddelbuettel <edd at debian.org>
> Architecture: all
> Version: 3.3.3-1
> Depends: r-base-core (>= 3.3.3-1), r-recommended (= 3.3.3-1)
> Recommends: r-base-html, r-doc-html
> Suggests: ess, r-doc-info | r-doc-pdf

This is not current R. An offlist solution for someone else was installing 
PROJ, GDAL, and R from source. Is the R 3.3.3-1 binary for your Debian 
version?

Roger

>
> I think I'll try to downgrade to stretch...
>
> Agus
>
>
> On Tue, Sep 12, 2017 at 12:28 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> From the entrails, GDAL was built with a CXX11 compiler, but R was very
>> possibly not, hence the messages. Where did R come from, and was it itself
>> built for the same Debian version?
>>
>>
>> Roger
>>
>>
>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>
>>> I assume that from the repos I have defined, this is an standard
>>> installation:
>>> deb http://ftp.de.debian.org/debian/ testing main
>>> deb-src http://ftp.de.debian.org/debian/ testing main
>>> deb http://ftp.de.debian.org/debian/ testing-updates main
>>> deb-src http://ftp.de.debian.org/debian/ testing-updates main
>>> deb ftp://security.debian.org/debian-security testing/updates main
>>> deb-src ftp://security.debian.org/debian-security testing/updates main
>>>
>>> deb http://deb.debian.org/debian/ testing non-free contrib main
>>> deb-src http://deb.debian.org/debian/ testing non-free contrib main
>>> deb http://deb.debian.org/debian/ testing-updates non-free contrib main
>>> deb-src http://deb.debian.org/debian/ testing-updates non-free contrib
>>> main
>>>
>>> Also:
>>> alobo at debi:~$ dpkg -s gdal-bin
>>> Package: gdal-bin
>>> Status: install ok installed
>>> Priority: optional
>>> Section: science
>>> Installed-Size: 724
>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>> Architecture: i386
>>> Source: gdal (2.2.1+dfsg-2)
>>> Version: 2.2.1+dfsg-2+b2
>>> Depends: gdal-abi-2-2-1, libc6 (>= 2.15), libgcc1 (>= 1:4.2),
>>> libgdal20 (>= 2.2.0), libstdc++6 (>= 5.2)
>>> Suggests: libgdal-grass, python-gdal
>>> Breaks: gdal-bin (<< 1.10.0-0~)
>>>
>>> alobo at debi:~$ dpkg -s libgdal-dev
>>> Package: libgdal-dev
>>> Status: install ok installed
>>> Priority: optional
>>> Section: libdevel
>>> Installed-Size: 32633
>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>> Architecture: i386
>>> Source: gdal (2.2.1+dfsg-2)
>>> Version: 2.2.1+dfsg-2+b2
>>> Depends: libgdal20 (= 2.2.1+dfsg-2+b2), libc6-dev, libarmadillo-dev,
>>> libcurl4-gnutls-dev | libcurl-ssl-dev, libdap-dev, libepsilon-dev,
>>> libexpat1-dev, libfreexl-dev, libfyba-dev, libgeos-dev,
>>> libgeotiff-dev, libgif-dev, libhdf4-alt-dev, libhdf5-dev, libjpeg-dev,
>>> libjson-c-dev, libkml-dev, libltdl-dev, liblzma-dev,
>>> default-libmysqlclient-dev, libnetcdf-dev, libogdi3.2-dev,
>>> libopenjp2-7-dev, libpcre3-dev, libpng-dev, libpoppler-private-dev,
>>> libpq-dev, libproj-dev, libqhull-dev, libspatialite-dev,
>>> libsqlite3-dev, libtiff-dev, liburiparser-dev, libwebp-dev,
>>> libxerces-c-dev, libxml2-dev, unixodbc-dev
>>> Suggests: libgdal-doc
>>>
>>> I've contacted pkg-grass-devel at lists.alioth.debian.org
>>>
>>> Agus
>>>
>>> On Tue, Sep 12, 2017 at 11:37 AM, Roger Bivand <Roger.Bivand at nhh.no>
>>> wrote:
>>>>
>>>> My guess is that your g++ is being used differently to build R and GDAL
>>>> (seen before off-list in August). If you install PROJ, GDAL and R from
>>>> source on your platform, they will (most likely) match. It looks as
>>>> though R
>>>> was not built with -std=c++11 or -std=gnu++11. On your current platform,
>>>> you
>>>> almost certainly have a more modern g++, and your R should be built with
>>>> this for packages using C++. Do you know where synaptic is getting its
>>>> binaries?
>>>>
>>>> Roger
>>>>
>>>>
>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>
>>>>> Using Synaptic.
>>>>> I just tested with a live usb with Debian Stretch, and with stretch
>>>>> rgdal installs with no problems (after installing gdal-bin, gdal-dev
>>>>> and dependencies) .
>>>>> Agus
>>>>>
>>>>> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
>>>>> <edzer.pebesma at uni-muenster.de> wrote:
>>>>>>
>>>>>>
>>>>>> How did you install gdal and proj on that machine?
>>>>>>
>>>>>> On 12/09/17 09:10, Agustin Lobo wrote:
>>>>>>>
>>>>>>>
>>>>>>> Thanks,
>>>>>>>
>>>>>>> As indicated, I do:
>>>>>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>>>>>
>>>>>>> The whole output is here:
>>>>>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>>>>>
>>>>>>> The problem starts at:
>>>>>>>
>>>>>>> configure: PROJ.4 version: 4.8.0
>>>>>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>>>>> checking PROJ.4: conus found and readable... yes
>>>>>>> configure: Package CPP flags:  -I/usr/include/gdal
>>>>>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>>>>>> configure: creating ./config.status
>>>>>>> config.status: creating src/Makevars
>>>>>>> ** libs
>>>>>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>>>>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic  -g
>>>>>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>>>>>> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
>>>>>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>>>>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>>>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>>>>>                  from OGR_write.cpp:2:
>>>>>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>>>>>> controls (override/final) only available with -std=c++11 or
>>>>>>> -std=gnu++11
>>>>>>>      GBool Parse() CPL_OVERRIDE;
>>>>>>>
>>>>>>> I'm totally clueless...
>>>>>>>
>>>>>>> Agus
>>>>>>>
>>>>>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>>> wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe the
>>>>>>>> output (tee) 2>&1 to a file. Please do not post the file, read it to
>>>>>>>> find
>>>>>>>> the root cause. Almost certainly the installed GDAL ha different
>>>>>>>> assumptions
>>>>>>>> about the g++ compiler than R itself, so you may need to install GDAL
>>>>>>>> and R
>>>>>>>> from source. There have been unclear reports of issues with -std=.
>>>>>>>>
>>>>>>>> Hope this helps,
>>>>>>>>
>>>>>>>> Roger
>>>>>>>>
>>>>>>>> Roger Bivand
>>>>>>>> Norwegian School of Economics
>>>>>>>> Bergen, Norway
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Fra: Agustin Lobo
>>>>>>>> Sendt: fredag 8. september, 14.49
>>>>>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>>>>>> Til: r-sig-geo
>>>>>>>>
>>>>>>>>
>>>>>>>> I get lots of errors at installing rgdal on a recently upgraded
>>>>>>>> machine
>>>>>>>> to Debian Buster and R3.3.3 There are so many errors that I cannot
>>>>>>>> scroll up
>>>>>>>> enough as to get where the errors actually start and report. Is there
>>>>>>>> any
>>>>>>>> way to save the output of install.packages("rgdal") ? Any other
>>>>>>>> reports on
>>>>>>>> problems installing rgdal on Debian Buster ? Thanks Agus
>>>>>>>> _______________________________________________ R-sig-Geo mailing
>>>>>>>> list
>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>
>>>>>>>>
>>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> R-sig-Geo mailing list
>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>
>>>>>>
>>>>>> --
>>>>>> Edzer Pebesma
>>>>>> Institute for Geoinformatics  (ifgi),  University of M?nster
>>>>>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>>>>>> Journal of Statistical Software:   http://www.jstatsoft.org/
>>>>>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> Editor-in-Chief of The R Journal,
>>>> https://journal.r-project.org/index.html
>>>> http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From alobolistas at gmail.com  Tue Sep 12 13:32:09 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 12 Sep 2017 13:32:09 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <alpine.LFD.2.21.1709121308050.2981@reclus.nhh.no>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
 <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
 <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>
 <alpine.LFD.2.21.1709121226330.2981@reclus.nhh.no>
 <CAG4NReJGq95gMadwiUrFD0w+3TsmY_gWo+fyAvK+SO_F7x+9+A@mail.gmail.com>
 <alpine.LFD.2.21.1709121308050.2981@reclus.nhh.no>
Message-ID: <CAG4NReKjiM2MdgyA=m7OpAnerBOERLCzHPxRn6R2c=PbQqDd9Q@mail.gmail.com>

Yes, r-base in Buster is 3.3.3.1:
https://packages.debian.org/buster/r-base

I'll wait to see if the maintainers answer...

Thanks


On Tue, Sep 12, 2017 at 1:09 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>
>> I just installed r-base through synaptic.
>> alobo at debi:~$ dpkg -s r-base
>> Package: r-base
>> Status: install ok installed
>> Priority: optional
>> Section: gnu-r
>> Installed-Size: 60
>> Maintainer: Dirk Eddelbuettel <edd at debian.org>
>> Architecture: all
>> Version: 3.3.3-1
>> Depends: r-base-core (>= 3.3.3-1), r-recommended (= 3.3.3-1)
>> Recommends: r-base-html, r-doc-html
>> Suggests: ess, r-doc-info | r-doc-pdf
>
>
> This is not current R. An offlist solution for someone else was installing
> PROJ, GDAL, and R from source. Is the R 3.3.3-1 binary for your Debian
> version?
>
> Roger
>
>
>>
>> I think I'll try to downgrade to stretch...
>>
>> Agus
>>
>>
>> On Tue, Sep 12, 2017 at 12:28 PM, Roger Bivand <Roger.Bivand at nhh.no>
>> wrote:
>>>
>>> From the entrails, GDAL was built with a CXX11 compiler, but R was very
>>> possibly not, hence the messages. Where did R come from, and was it
>>> itself
>>> built for the same Debian version?
>>>
>>>
>>> Roger
>>>
>>>
>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>
>>>> I assume that from the repos I have defined, this is an standard
>>>> installation:
>>>> deb http://ftp.de.debian.org/debian/ testing main
>>>> deb-src http://ftp.de.debian.org/debian/ testing main
>>>> deb http://ftp.de.debian.org/debian/ testing-updates main
>>>> deb-src http://ftp.de.debian.org/debian/ testing-updates main
>>>> deb ftp://security.debian.org/debian-security testing/updates main
>>>> deb-src ftp://security.debian.org/debian-security testing/updates main
>>>>
>>>> deb http://deb.debian.org/debian/ testing non-free contrib main
>>>> deb-src http://deb.debian.org/debian/ testing non-free contrib main
>>>> deb http://deb.debian.org/debian/ testing-updates non-free contrib main
>>>> deb-src http://deb.debian.org/debian/ testing-updates non-free contrib
>>>> main
>>>>
>>>> Also:
>>>> alobo at debi:~$ dpkg -s gdal-bin
>>>> Package: gdal-bin
>>>> Status: install ok installed
>>>> Priority: optional
>>>> Section: science
>>>> Installed-Size: 724
>>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>>> Architecture: i386
>>>> Source: gdal (2.2.1+dfsg-2)
>>>> Version: 2.2.1+dfsg-2+b2
>>>> Depends: gdal-abi-2-2-1, libc6 (>= 2.15), libgcc1 (>= 1:4.2),
>>>> libgdal20 (>= 2.2.0), libstdc++6 (>= 5.2)
>>>> Suggests: libgdal-grass, python-gdal
>>>> Breaks: gdal-bin (<< 1.10.0-0~)
>>>>
>>>> alobo at debi:~$ dpkg -s libgdal-dev
>>>> Package: libgdal-dev
>>>> Status: install ok installed
>>>> Priority: optional
>>>> Section: libdevel
>>>> Installed-Size: 32633
>>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>>> Architecture: i386
>>>> Source: gdal (2.2.1+dfsg-2)
>>>> Version: 2.2.1+dfsg-2+b2
>>>> Depends: libgdal20 (= 2.2.1+dfsg-2+b2), libc6-dev, libarmadillo-dev,
>>>> libcurl4-gnutls-dev | libcurl-ssl-dev, libdap-dev, libepsilon-dev,
>>>> libexpat1-dev, libfreexl-dev, libfyba-dev, libgeos-dev,
>>>> libgeotiff-dev, libgif-dev, libhdf4-alt-dev, libhdf5-dev, libjpeg-dev,
>>>> libjson-c-dev, libkml-dev, libltdl-dev, liblzma-dev,
>>>> default-libmysqlclient-dev, libnetcdf-dev, libogdi3.2-dev,
>>>> libopenjp2-7-dev, libpcre3-dev, libpng-dev, libpoppler-private-dev,
>>>> libpq-dev, libproj-dev, libqhull-dev, libspatialite-dev,
>>>> libsqlite3-dev, libtiff-dev, liburiparser-dev, libwebp-dev,
>>>> libxerces-c-dev, libxml2-dev, unixodbc-dev
>>>> Suggests: libgdal-doc
>>>>
>>>> I've contacted pkg-grass-devel at lists.alioth.debian.org
>>>>
>>>> Agus
>>>>
>>>> On Tue, Sep 12, 2017 at 11:37 AM, Roger Bivand <Roger.Bivand at nhh.no>
>>>> wrote:
>>>>>
>>>>>
>>>>> My guess is that your g++ is being used differently to build R and GDAL
>>>>> (seen before off-list in August). If you install PROJ, GDAL and R from
>>>>> source on your platform, they will (most likely) match. It looks as
>>>>> though R
>>>>> was not built with -std=c++11 or -std=gnu++11. On your current
>>>>> platform,
>>>>> you
>>>>> almost certainly have a more modern g++, and your R should be built
>>>>> with
>>>>> this for packages using C++. Do you know where synaptic is getting its
>>>>> binaries?
>>>>>
>>>>> Roger
>>>>>
>>>>>
>>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>>
>>>>>> Using Synaptic.
>>>>>> I just tested with a live usb with Debian Stretch, and with stretch
>>>>>> rgdal installs with no problems (after installing gdal-bin, gdal-dev
>>>>>> and dependencies) .
>>>>>> Agus
>>>>>>
>>>>>> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
>>>>>> <edzer.pebesma at uni-muenster.de> wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> How did you install gdal and proj on that machine?
>>>>>>>
>>>>>>> On 12/09/17 09:10, Agustin Lobo wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>
>>>>>>>> As indicated, I do:
>>>>>>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>>>>>>
>>>>>>>> The whole output is here:
>>>>>>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>>>>>>
>>>>>>>> The problem starts at:
>>>>>>>>
>>>>>>>> configure: PROJ.4 version: 4.8.0
>>>>>>>> ./configure: line 3725:  8390 Segmentation fault
>>>>>>>> ./proj_conf_test
>>>>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>>>> ./configure: line 3800:  8399 Segmentation fault
>>>>>>>> ./proj_conf_test
>>>>>>>> checking PROJ.4: conus found and readable... yes
>>>>>>>> configure: Package CPP flags:  -I/usr/include/gdal
>>>>>>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>>>>>>> configure: creating ./config.status
>>>>>>>> config.status: creating src/Makevars
>>>>>>>> ** libs
>>>>>>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>>>>>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic
>>>>>>>> -g
>>>>>>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>>>>>>> -fstack-protector-strong -Wformat -Werror=format-security
>>>>>>>> -Wdate-time
>>>>>>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>>>>>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>>>>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>>>>>>                  from OGR_write.cpp:2:
>>>>>>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>>>>>>> controls (override/final) only available with -std=c++11 or
>>>>>>>> -std=gnu++11
>>>>>>>>      GBool Parse() CPL_OVERRIDE;
>>>>>>>>
>>>>>>>> I'm totally clueless...
>>>>>>>>
>>>>>>>> Agus
>>>>>>>>
>>>>>>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe the
>>>>>>>>> output (tee) 2>&1 to a file. Please do not post the file, read it
>>>>>>>>> to
>>>>>>>>> find
>>>>>>>>> the root cause. Almost certainly the installed GDAL ha different
>>>>>>>>> assumptions
>>>>>>>>> about the g++ compiler than R itself, so you may need to install
>>>>>>>>> GDAL
>>>>>>>>> and R
>>>>>>>>> from source. There have been unclear reports of issues with -std=.
>>>>>>>>>
>>>>>>>>> Hope this helps,
>>>>>>>>>
>>>>>>>>> Roger
>>>>>>>>>
>>>>>>>>> Roger Bivand
>>>>>>>>> Norwegian School of Economics
>>>>>>>>> Bergen, Norway
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Fra: Agustin Lobo
>>>>>>>>> Sendt: fredag 8. september, 14.49
>>>>>>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>>>>>>> Til: r-sig-geo
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> I get lots of errors at installing rgdal on a recently upgraded
>>>>>>>>> machine
>>>>>>>>> to Debian Buster and R3.3.3 There are so many errors that I cannot
>>>>>>>>> scroll up
>>>>>>>>> enough as to get where the errors actually start and report. Is
>>>>>>>>> there
>>>>>>>>> any
>>>>>>>>> way to save the output of install.packages("rgdal") ? Any other
>>>>>>>>> reports on
>>>>>>>>> problems installing rgdal on Debian Buster ? Thanks Agus
>>>>>>>>> _______________________________________________ R-sig-Geo mailing
>>>>>>>>> list
>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> R-sig-Geo mailing list
>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Edzer Pebesma
>>>>>>> Institute for Geoinformatics  (ifgi),  University of M?nster
>>>>>>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>>>>>>> Journal of Statistical Software:   http://www.jstatsoft.org/
>>>>>>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Roger Bivand
>>>>> Department of Economics, Norwegian School of Economics,
>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>> Editor-in-Chief of The R Journal,
>>>>> https://journal.r-project.org/index.html
>>>>> http://orcid.org/0000-0003-2392-6140
>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> Editor-in-Chief of The R Journal,
>>> https://journal.r-project.org/index.html
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Tue Sep 12 13:39:00 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Sep 2017 13:39:00 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReKjiM2MdgyA=m7OpAnerBOERLCzHPxRn6R2c=PbQqDd9Q@mail.gmail.com>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
 <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
 <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>
 <alpine.LFD.2.21.1709121226330.2981@reclus.nhh.no>
 <CAG4NReJGq95gMadwiUrFD0w+3TsmY_gWo+fyAvK+SO_F7x+9+A@mail.gmail.com>
 <alpine.LFD.2.21.1709121308050.2981@reclus.nhh.no>
 <CAG4NReKjiM2MdgyA=m7OpAnerBOERLCzHPxRn6R2c=PbQqDd9Q@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709121337270.2981@reclus.nhh.no>

On Tue, 12 Sep 2017, Agustin Lobo wrote:

> Yes, r-base in Buster is 3.3.3.1:
> https://packages.debian.org/buster/r-base
>
> I'll wait to see if the maintainers answer...

What is the version of g++ on your buster system - the buster r-base does 
not seem to require a version that supports CXX11 or later?

Roger

>
> Thanks
>
>
> On Tue, Sep 12, 2017 at 1:09 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>
>>> I just installed r-base through synaptic.
>>> alobo at debi:~$ dpkg -s r-base
>>> Package: r-base
>>> Status: install ok installed
>>> Priority: optional
>>> Section: gnu-r
>>> Installed-Size: 60
>>> Maintainer: Dirk Eddelbuettel <edd at debian.org>
>>> Architecture: all
>>> Version: 3.3.3-1
>>> Depends: r-base-core (>= 3.3.3-1), r-recommended (= 3.3.3-1)
>>> Recommends: r-base-html, r-doc-html
>>> Suggests: ess, r-doc-info | r-doc-pdf
>>
>>
>> This is not current R. An offlist solution for someone else was installing
>> PROJ, GDAL, and R from source. Is the R 3.3.3-1 binary for your Debian
>> version?
>>
>> Roger
>>
>>
>>>
>>> I think I'll try to downgrade to stretch...
>>>
>>> Agus
>>>
>>>
>>> On Tue, Sep 12, 2017 at 12:28 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>> wrote:
>>>>
>>>> From the entrails, GDAL was built with a CXX11 compiler, but R was very
>>>> possibly not, hence the messages. Where did R come from, and was it
>>>> itself
>>>> built for the same Debian version?
>>>>
>>>>
>>>> Roger
>>>>
>>>>
>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>
>>>>> I assume that from the repos I have defined, this is an standard
>>>>> installation:
>>>>> deb http://ftp.de.debian.org/debian/ testing main
>>>>> deb-src http://ftp.de.debian.org/debian/ testing main
>>>>> deb http://ftp.de.debian.org/debian/ testing-updates main
>>>>> deb-src http://ftp.de.debian.org/debian/ testing-updates main
>>>>> deb ftp://security.debian.org/debian-security testing/updates main
>>>>> deb-src ftp://security.debian.org/debian-security testing/updates main
>>>>>
>>>>> deb http://deb.debian.org/debian/ testing non-free contrib main
>>>>> deb-src http://deb.debian.org/debian/ testing non-free contrib main
>>>>> deb http://deb.debian.org/debian/ testing-updates non-free contrib main
>>>>> deb-src http://deb.debian.org/debian/ testing-updates non-free contrib
>>>>> main
>>>>>
>>>>> Also:
>>>>> alobo at debi:~$ dpkg -s gdal-bin
>>>>> Package: gdal-bin
>>>>> Status: install ok installed
>>>>> Priority: optional
>>>>> Section: science
>>>>> Installed-Size: 724
>>>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>>>> Architecture: i386
>>>>> Source: gdal (2.2.1+dfsg-2)
>>>>> Version: 2.2.1+dfsg-2+b2
>>>>> Depends: gdal-abi-2-2-1, libc6 (>= 2.15), libgcc1 (>= 1:4.2),
>>>>> libgdal20 (>= 2.2.0), libstdc++6 (>= 5.2)
>>>>> Suggests: libgdal-grass, python-gdal
>>>>> Breaks: gdal-bin (<< 1.10.0-0~)
>>>>>
>>>>> alobo at debi:~$ dpkg -s libgdal-dev
>>>>> Package: libgdal-dev
>>>>> Status: install ok installed
>>>>> Priority: optional
>>>>> Section: libdevel
>>>>> Installed-Size: 32633
>>>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>>>> Architecture: i386
>>>>> Source: gdal (2.2.1+dfsg-2)
>>>>> Version: 2.2.1+dfsg-2+b2
>>>>> Depends: libgdal20 (= 2.2.1+dfsg-2+b2), libc6-dev, libarmadillo-dev,
>>>>> libcurl4-gnutls-dev | libcurl-ssl-dev, libdap-dev, libepsilon-dev,
>>>>> libexpat1-dev, libfreexl-dev, libfyba-dev, libgeos-dev,
>>>>> libgeotiff-dev, libgif-dev, libhdf4-alt-dev, libhdf5-dev, libjpeg-dev,
>>>>> libjson-c-dev, libkml-dev, libltdl-dev, liblzma-dev,
>>>>> default-libmysqlclient-dev, libnetcdf-dev, libogdi3.2-dev,
>>>>> libopenjp2-7-dev, libpcre3-dev, libpng-dev, libpoppler-private-dev,
>>>>> libpq-dev, libproj-dev, libqhull-dev, libspatialite-dev,
>>>>> libsqlite3-dev, libtiff-dev, liburiparser-dev, libwebp-dev,
>>>>> libxerces-c-dev, libxml2-dev, unixodbc-dev
>>>>> Suggests: libgdal-doc
>>>>>
>>>>> I've contacted pkg-grass-devel at lists.alioth.debian.org
>>>>>
>>>>> Agus
>>>>>
>>>>> On Tue, Sep 12, 2017 at 11:37 AM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>> wrote:
>>>>>>
>>>>>>
>>>>>> My guess is that your g++ is being used differently to build R and GDAL
>>>>>> (seen before off-list in August). If you install PROJ, GDAL and R from
>>>>>> source on your platform, they will (most likely) match. It looks as
>>>>>> though R
>>>>>> was not built with -std=c++11 or -std=gnu++11. On your current
>>>>>> platform,
>>>>>> you
>>>>>> almost certainly have a more modern g++, and your R should be built
>>>>>> with
>>>>>> this for packages using C++. Do you know where synaptic is getting its
>>>>>> binaries?
>>>>>>
>>>>>> Roger
>>>>>>
>>>>>>
>>>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>>>
>>>>>>> Using Synaptic.
>>>>>>> I just tested with a live usb with Debian Stretch, and with stretch
>>>>>>> rgdal installs with no problems (after installing gdal-bin, gdal-dev
>>>>>>> and dependencies) .
>>>>>>> Agus
>>>>>>>
>>>>>>> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
>>>>>>> <edzer.pebesma at uni-muenster.de> wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> How did you install gdal and proj on that machine?
>>>>>>>>
>>>>>>>> On 12/09/17 09:10, Agustin Lobo wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>>
>>>>>>>>> As indicated, I do:
>>>>>>>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>>>>>>>
>>>>>>>>> The whole output is here:
>>>>>>>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>>>>>>>
>>>>>>>>> The problem starts at:
>>>>>>>>>
>>>>>>>>> configure: PROJ.4 version: 4.8.0
>>>>>>>>> ./configure: line 3725:  8390 Segmentation fault
>>>>>>>>> ./proj_conf_test
>>>>>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>>>>> ./configure: line 3800:  8399 Segmentation fault
>>>>>>>>> ./proj_conf_test
>>>>>>>>> checking PROJ.4: conus found and readable... yes
>>>>>>>>> configure: Package CPP flags:  -I/usr/include/gdal
>>>>>>>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>>>>>>>> configure: creating ./config.status
>>>>>>>>> config.status: creating src/Makevars
>>>>>>>>> ** libs
>>>>>>>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>>>>>>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic
>>>>>>>>> -g
>>>>>>>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>>>>>>>> -fstack-protector-strong -Wformat -Werror=format-security
>>>>>>>>> -Wdate-time
>>>>>>>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>>>>>>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>>>>>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>>>>>>>                  from OGR_write.cpp:2:
>>>>>>>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>>>>>>>> controls (override/final) only available with -std=c++11 or
>>>>>>>>> -std=gnu++11
>>>>>>>>>      GBool Parse() CPL_OVERRIDE;
>>>>>>>>>
>>>>>>>>> I'm totally clueless...
>>>>>>>>>
>>>>>>>>> Agus
>>>>>>>>>
>>>>>>>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe the
>>>>>>>>>> output (tee) 2>&1 to a file. Please do not post the file, read it
>>>>>>>>>> to
>>>>>>>>>> find
>>>>>>>>>> the root cause. Almost certainly the installed GDAL ha different
>>>>>>>>>> assumptions
>>>>>>>>>> about the g++ compiler than R itself, so you may need to install
>>>>>>>>>> GDAL
>>>>>>>>>> and R
>>>>>>>>>> from source. There have been unclear reports of issues with -std=.
>>>>>>>>>>
>>>>>>>>>> Hope this helps,
>>>>>>>>>>
>>>>>>>>>> Roger
>>>>>>>>>>
>>>>>>>>>> Roger Bivand
>>>>>>>>>> Norwegian School of Economics
>>>>>>>>>> Bergen, Norway
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Fra: Agustin Lobo
>>>>>>>>>> Sendt: fredag 8. september, 14.49
>>>>>>>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>>>>>>>> Til: r-sig-geo
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> I get lots of errors at installing rgdal on a recently upgraded
>>>>>>>>>> machine
>>>>>>>>>> to Debian Buster and R3.3.3 There are so many errors that I cannot
>>>>>>>>>> scroll up
>>>>>>>>>> enough as to get where the errors actually start and report. Is
>>>>>>>>>> there
>>>>>>>>>> any
>>>>>>>>>> way to save the output of install.packages("rgdal") ? Any other
>>>>>>>>>> reports on
>>>>>>>>>> problems installing rgdal on Debian Buster ? Thanks Agus
>>>>>>>>>> _______________________________________________ R-sig-Geo mailing
>>>>>>>>>> list
>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>>>>
>>>>>>>>>> _______________________________________________
>>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>> Edzer Pebesma
>>>>>>>> Institute for Geoinformatics  (ifgi),  University of M?nster
>>>>>>>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>>>>>>>> Journal of Statistical Software:   http://www.jstatsoft.org/
>>>>>>>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>>>>>>>
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> R-sig-Geo mailing list
>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Roger Bivand
>>>>>> Department of Economics, Norwegian School of Economics,
>>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>>> Editor-in-Chief of The R Journal,
>>>>>> https://journal.r-project.org/index.html
>>>>>> http://orcid.org/0000-0003-2392-6140
>>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> Editor-in-Chief of The R Journal,
>>>> https://journal.r-project.org/index.html
>>>> http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From alobolistas at gmail.com  Tue Sep 12 13:45:50 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 12 Sep 2017 13:45:50 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <alpine.LFD.2.21.1709121337270.2981@reclus.nhh.no>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
 <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
 <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>
 <alpine.LFD.2.21.1709121226330.2981@reclus.nhh.no>
 <CAG4NReJGq95gMadwiUrFD0w+3TsmY_gWo+fyAvK+SO_F7x+9+A@mail.gmail.com>
 <alpine.LFD.2.21.1709121308050.2981@reclus.nhh.no>
 <CAG4NReKjiM2MdgyA=m7OpAnerBOERLCzHPxRn6R2c=PbQqDd9Q@mail.gmail.com>
 <alpine.LFD.2.21.1709121337270.2981@reclus.nhh.no>
Message-ID: <CAG4NRe+szBfGVVaF574uV8mnTG8gwkwfycpcW4ruPcP8hbk=fg@mail.gmail.com>

How do I find out that?
Agus

On Tue, Sep 12, 2017 at 1:39 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>
>> Yes, r-base in Buster is 3.3.3.1:
>> https://packages.debian.org/buster/r-base
>>
>> I'll wait to see if the maintainers answer...
>
>
> What is the version of g++ on your buster system - the buster r-base does
> not seem to require a version that supports CXX11 or later?
>
> Roger
>
>
>>
>> Thanks
>>
>>
>> On Tue, Sep 12, 2017 at 1:09 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>
>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>
>>>> I just installed r-base through synaptic.
>>>> alobo at debi:~$ dpkg -s r-base
>>>> Package: r-base
>>>> Status: install ok installed
>>>> Priority: optional
>>>> Section: gnu-r
>>>> Installed-Size: 60
>>>> Maintainer: Dirk Eddelbuettel <edd at debian.org>
>>>> Architecture: all
>>>> Version: 3.3.3-1
>>>> Depends: r-base-core (>= 3.3.3-1), r-recommended (= 3.3.3-1)
>>>> Recommends: r-base-html, r-doc-html
>>>> Suggests: ess, r-doc-info | r-doc-pdf
>>>
>>>
>>>
>>> This is not current R. An offlist solution for someone else was
>>> installing
>>> PROJ, GDAL, and R from source. Is the R 3.3.3-1 binary for your Debian
>>> version?
>>>
>>> Roger
>>>
>>>
>>>>
>>>> I think I'll try to downgrade to stretch...
>>>>
>>>> Agus
>>>>
>>>>
>>>> On Tue, Sep 12, 2017 at 12:28 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>> wrote:
>>>>>
>>>>>
>>>>> From the entrails, GDAL was built with a CXX11 compiler, but R was very
>>>>> possibly not, hence the messages. Where did R come from, and was it
>>>>> itself
>>>>> built for the same Debian version?
>>>>>
>>>>>
>>>>> Roger
>>>>>
>>>>>
>>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>>
>>>>>> I assume that from the repos I have defined, this is an standard
>>>>>> installation:
>>>>>> deb http://ftp.de.debian.org/debian/ testing main
>>>>>> deb-src http://ftp.de.debian.org/debian/ testing main
>>>>>> deb http://ftp.de.debian.org/debian/ testing-updates main
>>>>>> deb-src http://ftp.de.debian.org/debian/ testing-updates main
>>>>>> deb ftp://security.debian.org/debian-security testing/updates main
>>>>>> deb-src ftp://security.debian.org/debian-security testing/updates main
>>>>>>
>>>>>> deb http://deb.debian.org/debian/ testing non-free contrib main
>>>>>> deb-src http://deb.debian.org/debian/ testing non-free contrib main
>>>>>> deb http://deb.debian.org/debian/ testing-updates non-free contrib
>>>>>> main
>>>>>> deb-src http://deb.debian.org/debian/ testing-updates non-free contrib
>>>>>> main
>>>>>>
>>>>>> Also:
>>>>>> alobo at debi:~$ dpkg -s gdal-bin
>>>>>> Package: gdal-bin
>>>>>> Status: install ok installed
>>>>>> Priority: optional
>>>>>> Section: science
>>>>>> Installed-Size: 724
>>>>>> Maintainer: Debian GIS Project
>>>>>> <pkg-grass-devel at lists.alioth.debian.org>
>>>>>> Architecture: i386
>>>>>> Source: gdal (2.2.1+dfsg-2)
>>>>>> Version: 2.2.1+dfsg-2+b2
>>>>>> Depends: gdal-abi-2-2-1, libc6 (>= 2.15), libgcc1 (>= 1:4.2),
>>>>>> libgdal20 (>= 2.2.0), libstdc++6 (>= 5.2)
>>>>>> Suggests: libgdal-grass, python-gdal
>>>>>> Breaks: gdal-bin (<< 1.10.0-0~)
>>>>>>
>>>>>> alobo at debi:~$ dpkg -s libgdal-dev
>>>>>> Package: libgdal-dev
>>>>>> Status: install ok installed
>>>>>> Priority: optional
>>>>>> Section: libdevel
>>>>>> Installed-Size: 32633
>>>>>> Maintainer: Debian GIS Project
>>>>>> <pkg-grass-devel at lists.alioth.debian.org>
>>>>>> Architecture: i386
>>>>>> Source: gdal (2.2.1+dfsg-2)
>>>>>> Version: 2.2.1+dfsg-2+b2
>>>>>> Depends: libgdal20 (= 2.2.1+dfsg-2+b2), libc6-dev, libarmadillo-dev,
>>>>>> libcurl4-gnutls-dev | libcurl-ssl-dev, libdap-dev, libepsilon-dev,
>>>>>> libexpat1-dev, libfreexl-dev, libfyba-dev, libgeos-dev,
>>>>>> libgeotiff-dev, libgif-dev, libhdf4-alt-dev, libhdf5-dev, libjpeg-dev,
>>>>>> libjson-c-dev, libkml-dev, libltdl-dev, liblzma-dev,
>>>>>> default-libmysqlclient-dev, libnetcdf-dev, libogdi3.2-dev,
>>>>>> libopenjp2-7-dev, libpcre3-dev, libpng-dev, libpoppler-private-dev,
>>>>>> libpq-dev, libproj-dev, libqhull-dev, libspatialite-dev,
>>>>>> libsqlite3-dev, libtiff-dev, liburiparser-dev, libwebp-dev,
>>>>>> libxerces-c-dev, libxml2-dev, unixodbc-dev
>>>>>> Suggests: libgdal-doc
>>>>>>
>>>>>> I've contacted pkg-grass-devel at lists.alioth.debian.org
>>>>>>
>>>>>> Agus
>>>>>>
>>>>>> On Tue, Sep 12, 2017 at 11:37 AM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>> wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> My guess is that your g++ is being used differently to build R and
>>>>>>> GDAL
>>>>>>> (seen before off-list in August). If you install PROJ, GDAL and R
>>>>>>> from
>>>>>>> source on your platform, they will (most likely) match. It looks as
>>>>>>> though R
>>>>>>> was not built with -std=c++11 or -std=gnu++11. On your current
>>>>>>> platform,
>>>>>>> you
>>>>>>> almost certainly have a more modern g++, and your R should be built
>>>>>>> with
>>>>>>> this for packages using C++. Do you know where synaptic is getting
>>>>>>> its
>>>>>>> binaries?
>>>>>>>
>>>>>>> Roger
>>>>>>>
>>>>>>>
>>>>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>>>>
>>>>>>>> Using Synaptic.
>>>>>>>> I just tested with a live usb with Debian Stretch, and with stretch
>>>>>>>> rgdal installs with no problems (after installing gdal-bin, gdal-dev
>>>>>>>> and dependencies) .
>>>>>>>> Agus
>>>>>>>>
>>>>>>>> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
>>>>>>>> <edzer.pebesma at uni-muenster.de> wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> How did you install gdal and proj on that machine?
>>>>>>>>>
>>>>>>>>> On 12/09/17 09:10, Agustin Lobo wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Thanks,
>>>>>>>>>>
>>>>>>>>>> As indicated, I do:
>>>>>>>>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>>>>>>>>
>>>>>>>>>> The whole output is here:
>>>>>>>>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>>>>>>>>
>>>>>>>>>> The problem starts at:
>>>>>>>>>>
>>>>>>>>>> configure: PROJ.4 version: 4.8.0
>>>>>>>>>> ./configure: line 3725:  8390 Segmentation fault
>>>>>>>>>> ./proj_conf_test
>>>>>>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>>>>>> ./configure: line 3800:  8399 Segmentation fault
>>>>>>>>>> ./proj_conf_test
>>>>>>>>>> checking PROJ.4: conus found and readable... yes
>>>>>>>>>> configure: Package CPP flags:  -I/usr/include/gdal
>>>>>>>>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>>>>>>>>> configure: creating ./config.status
>>>>>>>>>> config.status: creating src/Makevars
>>>>>>>>>> ** libs
>>>>>>>>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>>>>>>>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic
>>>>>>>>>> -g
>>>>>>>>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>>>>>>>>> -fstack-protector-strong -Wformat -Werror=format-security
>>>>>>>>>> -Wdate-time
>>>>>>>>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>>>>>>>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>>>>>>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>>>>>>>>                  from OGR_write.cpp:2:
>>>>>>>>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>>>>>>>>> controls (override/final) only available with -std=c++11 or
>>>>>>>>>> -std=gnu++11
>>>>>>>>>>      GBool Parse() CPL_OVERRIDE;
>>>>>>>>>>
>>>>>>>>>> I'm totally clueless...
>>>>>>>>>>
>>>>>>>>>> Agus
>>>>>>>>>>
>>>>>>>>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>>>>>> wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe
>>>>>>>>>>> the
>>>>>>>>>>> output (tee) 2>&1 to a file. Please do not post the file, read it
>>>>>>>>>>> to
>>>>>>>>>>> find
>>>>>>>>>>> the root cause. Almost certainly the installed GDAL ha different
>>>>>>>>>>> assumptions
>>>>>>>>>>> about the g++ compiler than R itself, so you may need to install
>>>>>>>>>>> GDAL
>>>>>>>>>>> and R
>>>>>>>>>>> from source. There have been unclear reports of issues with
>>>>>>>>>>> -std=.
>>>>>>>>>>>
>>>>>>>>>>> Hope this helps,
>>>>>>>>>>>
>>>>>>>>>>> Roger
>>>>>>>>>>>
>>>>>>>>>>> Roger Bivand
>>>>>>>>>>> Norwegian School of Economics
>>>>>>>>>>> Bergen, Norway
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Fra: Agustin Lobo
>>>>>>>>>>> Sendt: fredag 8. september, 14.49
>>>>>>>>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>>>>>>>>> Til: r-sig-geo
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> I get lots of errors at installing rgdal on a recently upgraded
>>>>>>>>>>> machine
>>>>>>>>>>> to Debian Buster and R3.3.3 There are so many errors that I
>>>>>>>>>>> cannot
>>>>>>>>>>> scroll up
>>>>>>>>>>> enough as to get where the errors actually start and report. Is
>>>>>>>>>>> there
>>>>>>>>>>> any
>>>>>>>>>>> way to save the output of install.packages("rgdal") ? Any other
>>>>>>>>>>> reports on
>>>>>>>>>>> problems installing rgdal on Debian Buster ? Thanks Agus
>>>>>>>>>>> _______________________________________________ R-sig-Geo mailing
>>>>>>>>>>> list
>>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>>>>>
>>>>>>>>>>> _______________________________________________
>>>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> _______________________________________________
>>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> --
>>>>>>>>> Edzer Pebesma
>>>>>>>>> Institute for Geoinformatics  (ifgi),  University of M?nster
>>>>>>>>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>>>>>>>>> Journal of Statistical Software:   http://www.jstatsoft.org/
>>>>>>>>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> R-sig-Geo mailing list
>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Roger Bivand
>>>>>>> Department of Economics, Norwegian School of Economics,
>>>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>>>> Editor-in-Chief of The R Journal,
>>>>>>> https://journal.r-project.org/index.html
>>>>>>> http://orcid.org/0000-0003-2392-6140
>>>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> --
>>>>> Roger Bivand
>>>>> Department of Economics, Norwegian School of Economics,
>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>> Editor-in-Chief of The R Journal,
>>>>> https://journal.r-project.org/index.html
>>>>> http://orcid.org/0000-0003-2392-6140
>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> Editor-in-Chief of The R Journal,
>>> https://journal.r-project.org/index.html
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Tue Sep 12 13:49:12 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 12 Sep 2017 13:49:12 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NRe+szBfGVVaF574uV8mnTG8gwkwfycpcW4ruPcP8hbk=fg@mail.gmail.com>
References: <CAG4NReLeP19HkOGqnvW-h-q3WSFR645h4GodCsvef2R7RPyE_g@mail.gmail.com>
 <E7824B12CF1B784E.593ede76-32a8-4315-9442-b76f46ccc92c@mail.outlook.com>
 <CAG4NRe+JsHFbT0pDBY09shvefMVFb7aVYB1gWUCvvN=kBj+pyw@mail.gmail.com>
 <0d0aa53d-23ff-ebf9-f951-efd422902138@uni-muenster.de>
 <CAG4NReLVVsK1TvukYNBffKvd6tPVN-1U4UTo3Tqf3LicANBR_A@mail.gmail.com>
 <alpine.LFD.2.21.1709121128350.2981@reclus.nhh.no>
 <CAG4NReK5CQO-h-NhOZbm3UP+Cox4KDc=-FG32tpEYLx0_tvv=w@mail.gmail.com>
 <alpine.LFD.2.21.1709121226330.2981@reclus.nhh.no>
 <CAG4NReJGq95gMadwiUrFD0w+3TsmY_gWo+fyAvK+SO_F7x+9+A@mail.gmail.com>
 <alpine.LFD.2.21.1709121308050.2981@reclus.nhh.no>
 <CAG4NReKjiM2MdgyA=m7OpAnerBOERLCzHPxRn6R2c=PbQqDd9Q@mail.gmail.com>
 <alpine.LFD.2.21.1709121337270.2981@reclus.nhh.no>
 <CAG4NRe+szBfGVVaF574uV8mnTG8gwkwfycpcW4ruPcP8hbk=fg@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709121347080.2981@reclus.nhh.no>

$ g++ -v
...
gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)

in my case on Fedora 26.

Recent versions should be OK, but < 5 may be problematic. If you have 
upgraded in place but not upgraded the compile trains, installing r-base 
will not force that.


On Tue, 12 Sep 2017, Agustin Lobo wrote:

> How do I find out that?
> Agus
>
> On Tue, Sep 12, 2017 at 1:39 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>
>>> Yes, r-base in Buster is 3.3.3.1:
>>> https://packages.debian.org/buster/r-base
>>>
>>> I'll wait to see if the maintainers answer...
>>
>>
>> What is the version of g++ on your buster system - the buster r-base does
>> not seem to require a version that supports CXX11 or later?
>>
>> Roger
>>
>>
>>>
>>> Thanks
>>>
>>>
>>> On Tue, Sep 12, 2017 at 1:09 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>>
>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>
>>>>> I just installed r-base through synaptic.
>>>>> alobo at debi:~$ dpkg -s r-base
>>>>> Package: r-base
>>>>> Status: install ok installed
>>>>> Priority: optional
>>>>> Section: gnu-r
>>>>> Installed-Size: 60
>>>>> Maintainer: Dirk Eddelbuettel <edd at debian.org>
>>>>> Architecture: all
>>>>> Version: 3.3.3-1
>>>>> Depends: r-base-core (>= 3.3.3-1), r-recommended (= 3.3.3-1)
>>>>> Recommends: r-base-html, r-doc-html
>>>>> Suggests: ess, r-doc-info | r-doc-pdf
>>>>
>>>>
>>>>
>>>> This is not current R. An offlist solution for someone else was
>>>> installing
>>>> PROJ, GDAL, and R from source. Is the R 3.3.3-1 binary for your Debian
>>>> version?
>>>>
>>>> Roger
>>>>
>>>>
>>>>>
>>>>> I think I'll try to downgrade to stretch...
>>>>>
>>>>> Agus
>>>>>
>>>>>
>>>>> On Tue, Sep 12, 2017 at 12:28 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>> wrote:
>>>>>>
>>>>>>
>>>>>> From the entrails, GDAL was built with a CXX11 compiler, but R was very
>>>>>> possibly not, hence the messages. Where did R come from, and was it
>>>>>> itself
>>>>>> built for the same Debian version?
>>>>>>
>>>>>>
>>>>>> Roger
>>>>>>
>>>>>>
>>>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>>>
>>>>>>> I assume that from the repos I have defined, this is an standard
>>>>>>> installation:
>>>>>>> deb http://ftp.de.debian.org/debian/ testing main
>>>>>>> deb-src http://ftp.de.debian.org/debian/ testing main
>>>>>>> deb http://ftp.de.debian.org/debian/ testing-updates main
>>>>>>> deb-src http://ftp.de.debian.org/debian/ testing-updates main
>>>>>>> deb ftp://security.debian.org/debian-security testing/updates main
>>>>>>> deb-src ftp://security.debian.org/debian-security testing/updates main
>>>>>>>
>>>>>>> deb http://deb.debian.org/debian/ testing non-free contrib main
>>>>>>> deb-src http://deb.debian.org/debian/ testing non-free contrib main
>>>>>>> deb http://deb.debian.org/debian/ testing-updates non-free contrib
>>>>>>> main
>>>>>>> deb-src http://deb.debian.org/debian/ testing-updates non-free contrib
>>>>>>> main
>>>>>>>
>>>>>>> Also:
>>>>>>> alobo at debi:~$ dpkg -s gdal-bin
>>>>>>> Package: gdal-bin
>>>>>>> Status: install ok installed
>>>>>>> Priority: optional
>>>>>>> Section: science
>>>>>>> Installed-Size: 724
>>>>>>> Maintainer: Debian GIS Project
>>>>>>> <pkg-grass-devel at lists.alioth.debian.org>
>>>>>>> Architecture: i386
>>>>>>> Source: gdal (2.2.1+dfsg-2)
>>>>>>> Version: 2.2.1+dfsg-2+b2
>>>>>>> Depends: gdal-abi-2-2-1, libc6 (>= 2.15), libgcc1 (>= 1:4.2),
>>>>>>> libgdal20 (>= 2.2.0), libstdc++6 (>= 5.2)
>>>>>>> Suggests: libgdal-grass, python-gdal
>>>>>>> Breaks: gdal-bin (<< 1.10.0-0~)
>>>>>>>
>>>>>>> alobo at debi:~$ dpkg -s libgdal-dev
>>>>>>> Package: libgdal-dev
>>>>>>> Status: install ok installed
>>>>>>> Priority: optional
>>>>>>> Section: libdevel
>>>>>>> Installed-Size: 32633
>>>>>>> Maintainer: Debian GIS Project
>>>>>>> <pkg-grass-devel at lists.alioth.debian.org>
>>>>>>> Architecture: i386
>>>>>>> Source: gdal (2.2.1+dfsg-2)
>>>>>>> Version: 2.2.1+dfsg-2+b2
>>>>>>> Depends: libgdal20 (= 2.2.1+dfsg-2+b2), libc6-dev, libarmadillo-dev,
>>>>>>> libcurl4-gnutls-dev | libcurl-ssl-dev, libdap-dev, libepsilon-dev,
>>>>>>> libexpat1-dev, libfreexl-dev, libfyba-dev, libgeos-dev,
>>>>>>> libgeotiff-dev, libgif-dev, libhdf4-alt-dev, libhdf5-dev, libjpeg-dev,
>>>>>>> libjson-c-dev, libkml-dev, libltdl-dev, liblzma-dev,
>>>>>>> default-libmysqlclient-dev, libnetcdf-dev, libogdi3.2-dev,
>>>>>>> libopenjp2-7-dev, libpcre3-dev, libpng-dev, libpoppler-private-dev,
>>>>>>> libpq-dev, libproj-dev, libqhull-dev, libspatialite-dev,
>>>>>>> libsqlite3-dev, libtiff-dev, liburiparser-dev, libwebp-dev,
>>>>>>> libxerces-c-dev, libxml2-dev, unixodbc-dev
>>>>>>> Suggests: libgdal-doc
>>>>>>>
>>>>>>> I've contacted pkg-grass-devel at lists.alioth.debian.org
>>>>>>>
>>>>>>> Agus
>>>>>>>
>>>>>>> On Tue, Sep 12, 2017 at 11:37 AM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>>> wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> My guess is that your g++ is being used differently to build R and
>>>>>>>> GDAL
>>>>>>>> (seen before off-list in August). If you install PROJ, GDAL and R
>>>>>>>> from
>>>>>>>> source on your platform, they will (most likely) match. It looks as
>>>>>>>> though R
>>>>>>>> was not built with -std=c++11 or -std=gnu++11. On your current
>>>>>>>> platform,
>>>>>>>> you
>>>>>>>> almost certainly have a more modern g++, and your R should be built
>>>>>>>> with
>>>>>>>> this for packages using C++. Do you know where synaptic is getting
>>>>>>>> its
>>>>>>>> binaries?
>>>>>>>>
>>>>>>>> Roger
>>>>>>>>
>>>>>>>>
>>>>>>>> On Tue, 12 Sep 2017, Agustin Lobo wrote:
>>>>>>>>
>>>>>>>>> Using Synaptic.
>>>>>>>>> I just tested with a live usb with Debian Stretch, and with stretch
>>>>>>>>> rgdal installs with no problems (after installing gdal-bin, gdal-dev
>>>>>>>>> and dependencies) .
>>>>>>>>> Agus
>>>>>>>>>
>>>>>>>>> On Tue, Sep 12, 2017 at 10:15 AM, Edzer Pebesma
>>>>>>>>> <edzer.pebesma at uni-muenster.de> wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> How did you install gdal and proj on that machine?
>>>>>>>>>>
>>>>>>>>>> On 12/09/17 09:10, Agustin Lobo wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Thanks,
>>>>>>>>>>>
>>>>>>>>>>> As indicated, I do:
>>>>>>>>>>> $ R CMD INSTALL rgdal_1.2-8.tar.gz 2>&1 | tee rgdal.log
>>>>>>>>>>>
>>>>>>>>>>> The whole output is here:
>>>>>>>>>>> https://drive.google.com/open?id=0B_LsZU5NlOztb0ZYQzZZRDQ0WkU
>>>>>>>>>>>
>>>>>>>>>>> The problem starts at:
>>>>>>>>>>>
>>>>>>>>>>> configure: PROJ.4 version: 4.8.0
>>>>>>>>>>> ./configure: line 3725:  8390 Segmentation fault
>>>>>>>>>>> ./proj_conf_test
>>>>>>>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>>>>>>> ./configure: line 3800:  8399 Segmentation fault
>>>>>>>>>>> ./proj_conf_test
>>>>>>>>>>> checking PROJ.4: conus found and readable... yes
>>>>>>>>>>> configure: Package CPP flags:  -I/usr/include/gdal
>>>>>>>>>>> configure: Package LIBS:  -L/usr/lib -lgdal -lproj
>>>>>>>>>>> configure: creating ./config.status
>>>>>>>>>>> config.status: creating src/Makevars
>>>>>>>>>>> ** libs
>>>>>>>>>>> g++ -I/usr/share/R/include -DNDEBUG -I/usr/include/gdal
>>>>>>>>>>> -I"/home/alobo/R/i686-pc-linux-gnu-library/3.3/sp/include"   -fpic
>>>>>>>>>>> -g
>>>>>>>>>>> -O2 -fdebug-prefix-map=/build/r-base-yDv1ct/r-base-3.3.3=.
>>>>>>>>>>> -fstack-protector-strong -Wformat -Werror=format-security
>>>>>>>>>>> -Wdate-time
>>>>>>>>>>> -D_FORTIFY_SOURCE=2 -g  -c OGR_write.cpp -o OGR_write.o
>>>>>>>>>>> In file included from /usr/include/gdal/ogr_feature.h:35:0,
>>>>>>>>>>>                  from /usr/include/gdal/ogrsf_frmts.h:35,
>>>>>>>>>>>                  from OGR_write.cpp:2:
>>>>>>>>>>> /usr/include/gdal/ogr_featurestyle.h:264:17: warning: override
>>>>>>>>>>> controls (override/final) only available with -std=c++11 or
>>>>>>>>>>> -std=gnu++11
>>>>>>>>>>>      GBool Parse() CPL_OVERRIDE;
>>>>>>>>>>>
>>>>>>>>>>> I'm totally clueless...
>>>>>>>>>>>
>>>>>>>>>>> Agus
>>>>>>>>>>>
>>>>>>>>>>> On Fri, Sep 8, 2017 at 4:00 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>>>>>>> wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Please use the command line: R CMD INSTALL <tarball>  and pipe
>>>>>>>>>>>> the
>>>>>>>>>>>> output (tee) 2>&1 to a file. Please do not post the file, read it
>>>>>>>>>>>> to
>>>>>>>>>>>> find
>>>>>>>>>>>> the root cause. Almost certainly the installed GDAL ha different
>>>>>>>>>>>> assumptions
>>>>>>>>>>>> about the g++ compiler than R itself, so you may need to install
>>>>>>>>>>>> GDAL
>>>>>>>>>>>> and R
>>>>>>>>>>>> from source. There have been unclear reports of issues with
>>>>>>>>>>>> -std=.
>>>>>>>>>>>>
>>>>>>>>>>>> Hope this helps,
>>>>>>>>>>>>
>>>>>>>>>>>> Roger
>>>>>>>>>>>>
>>>>>>>>>>>> Roger Bivand
>>>>>>>>>>>> Norwegian School of Economics
>>>>>>>>>>>> Bergen, Norway
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Fra: Agustin Lobo
>>>>>>>>>>>> Sendt: fredag 8. september, 14.49
>>>>>>>>>>>> Emne: [R-sig-Geo] Errors at installing rgdal on Debian Buster
>>>>>>>>>>>> Til: r-sig-geo
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> I get lots of errors at installing rgdal on a recently upgraded
>>>>>>>>>>>> machine
>>>>>>>>>>>> to Debian Buster and R3.3.3 There are so many errors that I
>>>>>>>>>>>> cannot
>>>>>>>>>>>> scroll up
>>>>>>>>>>>> enough as to get where the errors actually start and report. Is
>>>>>>>>>>>> there
>>>>>>>>>>>> any
>>>>>>>>>>>> way to save the output of install.packages("rgdal") ? Any other
>>>>>>>>>>>> reports on
>>>>>>>>>>>> problems installing rgdal on Debian Buster ? Thanks Agus
>>>>>>>>>>>> _______________________________________________ R-sig-Geo mailing
>>>>>>>>>>>> list
>>>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>>>>>>
>>>>>>>>>>>> _______________________________________________
>>>>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> _______________________________________________
>>>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> --
>>>>>>>>>> Edzer Pebesma
>>>>>>>>>> Institute for Geoinformatics  (ifgi),  University of M?nster
>>>>>>>>>> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>>>>>>>>>> Journal of Statistical Software:   http://www.jstatsoft.org/
>>>>>>>>>> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> _______________________________________________
>>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> R-sig-Geo mailing list
>>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>> Roger Bivand
>>>>>>>> Department of Economics, Norwegian School of Economics,
>>>>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>>>>> Editor-in-Chief of The R Journal,
>>>>>>>> https://journal.r-project.org/index.html
>>>>>>>> http://orcid.org/0000-0003-2392-6140
>>>>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>>>> _______________________________________________
>>>>>>>> R-sig-Geo mailing list
>>>>>>>> R-sig-Geo at r-project.org
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> --
>>>>>> Roger Bivand
>>>>>> Department of Economics, Norwegian School of Economics,
>>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>>> Editor-in-Chief of The R Journal,
>>>>>> https://journal.r-project.org/index.html
>>>>>> http://orcid.org/0000-0003-2392-6140
>>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> Editor-in-Chief of The R Journal,
>>>> https://journal.r-project.org/index.html
>>>> http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From Guy.Bayegnak at gov.ab.ca  Tue Sep 12 16:11:55 2017
From: Guy.Bayegnak at gov.ab.ca (Guy Bayegnak)
Date: Tue, 12 Sep 2017 14:11:55 +0000
Subject: [R-sig-Geo] quadracount on multitype points
Message-ID: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>

Dear all,



I am working on a multitype point pattern, and I'd like to estimate how many of each type of point occurs into each quadrant. I know it is possible to use the quandracount on split marks as follows using spatstats: quadratcount(split(marks)). But the result produces as many windows as they are marks. I am wondering is there is a way to know many occurrence of each type there is per quadrant and to plot it in a single grid.

Thanks,

Guy



This email and any files transmitted with it are confide...{{dropped:10}}


From kat.emidio at gmail.com  Tue Sep 12 22:48:50 2017
From: kat.emidio at gmail.com (=?UTF-8?Q?K=C3=A1tia_Emidio?=)
Date: Tue, 12 Sep 2017 16:48:50 -0400
Subject: [R-sig-Geo] circular spatial polygon
Message-ID: <CABFLJOmjC72tBC3kZDxjE1-Mkx3ThZ5cEzL4CC_V9NP3YPTOsg@mail.gmail.com>

Dear all,
My question is how to create a circular spatial polygon, with 8 arcs of 45
degrees, and radius measuring 15m. Having in the centre point the UTM
coordinates, zone 20S.

x=   *673593.21*
*y= **9365367.08*



*Thanks*




-- 
K?tia Em?dio da Silva DSc
Eng. Florestal
Manaus/AM



Forestry Engineer
Manaus/AM-Brazil

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Tue Sep 12 23:57:43 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 13 Sep 2017 09:57:43 +1200
Subject: [R-sig-Geo] [FORGED]  circular spatial polygon
In-Reply-To: <CABFLJOmjC72tBC3kZDxjE1-Mkx3ThZ5cEzL4CC_V9NP3YPTOsg@mail.gmail.com>
References: <CABFLJOmjC72tBC3kZDxjE1-Mkx3ThZ5cEzL4CC_V9NP3YPTOsg@mail.gmail.com>
Message-ID: <1d336cbd-3257-9a72-148d-eb3391b8d1d5@auckland.ac.nz>


On 13/09/17 08:48, K?tia Emidio wrote:

> Dear all,
> My question is how to create a circular spatial polygon, with 8 arcs of 45
> degrees, and radius measuring 15m. Having in the centre point the UTM
> coordinates, zone 20S.
> 
> x= *673593.21*
> y= *673593.21*

"Circular polygon" is a contradiction in terms.  If a shape is a polygon 
then it is *not* a circle.  (Of course in real life we use polygons with 
large numbers of sides to *approximate* circles.  But 8 is not large!)

You can create an octagon with the required centre and radius using 
*spatstat* via:

     oct <- disc(radius=15,centre=c(673593.21,673593.21),npoly=8)

Does that provide (at least a start on) what you want?

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext.


From loic.dutrieux at conabio.gob.mx  Wed Sep 13 03:30:13 2017
From: loic.dutrieux at conabio.gob.mx (=?UTF-8?Q?Lo=c3=afc_Dutrieux?=)
Date: Tue, 12 Sep 2017 20:30:13 -0500
Subject: [R-sig-Geo] [FORGED] circular spatial polygon
In-Reply-To: <1d336cbd-3257-9a72-148d-eb3391b8d1d5@auckland.ac.nz>
References: <CABFLJOmjC72tBC3kZDxjE1-Mkx3ThZ5cEzL4CC_V9NP3YPTOsg@mail.gmail.com>
 <1d336cbd-3257-9a72-148d-eb3391b8d1d5@auckland.ac.nz>
Message-ID: <ec105605-287c-6ff9-65c9-17955d18e6c0@conabio.gob.mx>

This is also possible with rgeos

library(sp)
library(rgeos)

x <- 673593.21
y <- 673593.21

sp0 <- SpatialPoints(coords = data.frame(x=x, y=y),
                     proj4string = CRS('+proj=utm +zone=20 +south
+ellps=WGS84 +datum=WGS84 +units=m +no_defs'))
sp1 <- gBuffer(sp0, byid=TRUE, width = 15, quadsegs = 2)
plot(sp1)


Cheers,
Lo?c

On 12/09/2017 16:57, Rolf Turner wrote:
> 
> On 13/09/17 08:48, K?tia Emidio wrote:
> 
>> Dear all,
>> My question is how to create a circular spatial polygon, with 8 arcs
>> of 45
>> degrees, and radius measuring 15m. Having in the centre point the UTM
>> coordinates, zone 20S.
>>
>> x= *673593.21*
>> y= *673593.21*
> 
> "Circular polygon" is a contradiction in terms.  If a shape is a polygon
> then it is *not* a circle.  (Of course in real life we use polygons with
> large numbers of sides to *approximate* circles.  But 8 is not large!)
> 
> You can create an octagon with the required centre and radius using
> *spatstat* via:
> 
>     oct <- disc(radius=15,centre=c(673593.21,673593.21),npoly=8)
> 
> Does that provide (at least a start on) what you want?
> 
> cheers,
> 
> Rolf Turner
>


From b.rowlingson at lancaster.ac.uk  Wed Sep 13 09:01:41 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 13 Sep 2017 08:01:41 +0100
Subject: [R-sig-Geo] [FORGED] circular spatial polygon
In-Reply-To: <ec105605-287c-6ff9-65c9-17955d18e6c0@conabio.gob.mx>
References: <CABFLJOmjC72tBC3kZDxjE1-Mkx3ThZ5cEzL4CC_V9NP3YPTOsg@mail.gmail.com>
 <1d336cbd-3257-9a72-148d-eb3391b8d1d5@auckland.ac.nz>
 <ec105605-287c-6ff9-65c9-17955d18e6c0@conabio.gob.mx>
Message-ID: <CANVKczM3QNEQKMZCUQTi_m9dPr36xB9ZWx_ay8WuxAg-fNqC9w@mail.gmail.com>

Your question is still a tiny bit imprecisely defined, since you haven't
said how you want this polygon to align to the axes. This function computes
the coordinates of an N-sided regular polygon centred at (x,y) of radius r,
of n sides, at angle theta:

ngon =
function(x,y,r,n,theta){
  phi = seq(theta, theta+2*pi, length=n+1)
  xc = x + r * sin(phi)
  yc = y + r * cos(phi)
  cbind(xc,yc)
}

Two possible solutions to your question are therefore:

 plot(ngon(673593.21, 9365367.08, 15, 8, 0), asp=1)
 plot(ngon(673593.21, 9365367.08, 15, 8, pi/8), asp=1)

although that only shows points, building some sort of spatial polygon
follows easily enough.

Creating points on a circle using trigonometry (sines and cosines) should
be in any introductory trigonometry book.

B



On Wed, Sep 13, 2017 at 2:30 AM, Lo?c Dutrieux <loic.dutrieux at conabio.gob.mx
> wrote:

> This is also possible with rgeos
>
> library(sp)
> library(rgeos)
>
> x <- 673593.21
> y <- 673593.21
>
> sp0 <- SpatialPoints(coords = data.frame(x=x, y=y),
>                      proj4string = CRS('+proj=utm +zone=20 +south
> +ellps=WGS84 +datum=WGS84 +units=m +no_defs'))
> sp1 <- gBuffer(sp0, byid=TRUE, width = 15, quadsegs = 2)
> plot(sp1)
>
>
> Cheers,
> Lo?c
>
> On 12/09/2017 16:57, Rolf Turner wrote:
> >
> > On 13/09/17 08:48, K?tia Emidio wrote:
> >
> >> Dear all,
> >> My question is how to create a circular spatial polygon, with 8 arcs
> >> of 45
> >> degrees, and radius measuring 15m. Having in the centre point the UTM
> >> coordinates, zone 20S.
> >>
> >> x= *673593.21*
> >> y= *673593.21*
> >
> > "Circular polygon" is a contradiction in terms.  If a shape is a polygon
> > then it is *not* a circle.  (Of course in real life we use polygons with
> > large numbers of sides to *approximate* circles.  But 8 is not large!)
> >
> > You can create an octagon with the required centre and radius using
> > *spatstat* via:
> >
> >     oct <- disc(radius=15,centre=c(673593.21,673593.21),npoly=8)
> >
> > Does that provide (at least a start on) what you want?
> >
> > cheers,
> >
> > Rolf Turner
> >
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From alobolistas at gmail.com  Wed Sep 13 09:37:37 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed, 13 Sep 2017 09:37:37 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
Message-ID: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>

The problem seems to be related to the compiler. I had:
gcc version 5.3.1 20160101 (Debian 5.3.1-5)

I have now:
gcc version 7.2.0 (Debian 7.2.0-4)

All weird previus errors are gone but I still have:
configure: PROJ.4 version: 4.8.0
./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
checking PROJ.4: epsg found and readable... yes
./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test

and finally

** testing if installed package can be loaded
Fatal error: glibc detected an invalid stdio handle
Aborted
ERROR: loading failed
* removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?

Surprisingly,  I do have 4.9 installed, not 4.8:

$ dpkg -s proj-bin
Package: proj-bin
Status: install ok installed
Priority: optional
Section: science
Installed-Size: 125
Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
Architecture: i386
Source: proj
Version: 4.9.3-2

and
$ proj
Rel. 4.9.3, 15 August 2016
usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]

and I cannot find proj_conf_test anywhere:
$ sudo find / -name 'proj_conf_test'
gives no result

How is the test ./proj_conf_test done so that I can investigate why it
results into PROJ 4.8 instead of 4.9?

Thanks

Agus



On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> $ g++ -v
> ...
> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>
> in my case on Fedora 26.
>
> Recent versions should be OK, but < 5 may be problematic. If you have
> upgraded in place but not upgraded the compile trains, installing r-base
> will not force that.
>
>
>


From edzer.pebesma at uni-muenster.de  Wed Sep 13 09:44:41 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 13 Sep 2017 09:44:41 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
References: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
Message-ID: <008f42f4-f864-01f1-f77b-152c1bb8d3ca@uni-muenster.de>

IMHO, debugging a problem like this would become so much easier if you
could provide a docker file that creates the machine you are looking at.
Other docker users (like me) could then run it, reproduce your machine,
and look at what is going wrong.

A set of r-spatial targeting rocker (debian)-based docker images are
found here:

https://github.com/rocker-org/geospatial

a set of ubuntu-based docker files are found here:

https://github.com/r-spatial/sf/tree/master/inst/docker

On 13/09/17 09:37, Agustin Lobo wrote:
> The problem seems to be related to the compiler. I had:
> gcc version 5.3.1 20160101 (Debian 5.3.1-5)
> 
> I have now:
> gcc version 7.2.0 (Debian 7.2.0-4)
> 
> All weird previus errors are gone but I still have:
> configure: PROJ.4 version: 4.8.0
> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
> checking PROJ.4: epsg found and readable... yes
> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
> 
> and finally
> 
> ** testing if installed package can be loaded
> Fatal error: glibc detected an invalid stdio handle
> Aborted
> ERROR: loading failed
> * removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?
> 
> Surprisingly,  I do have 4.9 installed, not 4.8:
> 
> $ dpkg -s proj-bin
> Package: proj-bin
> Status: install ok installed
> Priority: optional
> Section: science
> Installed-Size: 125
> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
> Architecture: i386
> Source: proj
> Version: 4.9.3-2
> 
> and
> $ proj
> Rel. 4.9.3, 15 August 2016
> usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
> 
> and I cannot find proj_conf_test anywhere:
> $ sudo find / -name 'proj_conf_test'
> gives no result
> 
> How is the test ./proj_conf_test done so that I can investigate why it
> results into PROJ 4.8 instead of 4.9?
> 
> Thanks
> 
> Agus
> 
> 
> 
> On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> $ g++ -v
>> ...
>> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>>
>> in my case on Fedora 26.
>>
>> Recent versions should be OK, but < 5 may be problematic. If you have
>> upgraded in place but not upgraded the compile trains, installing r-base
>> will not force that.
>>
>>
>>
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170913/362c3b6f/attachment.sig>

From jaimebg27 at gmail.com  Wed Sep 13 09:47:06 2017
From: jaimebg27 at gmail.com (=?UTF-8?Q?Jaime_Burbano_Gir=C3=B3n?=)
Date: Wed, 13 Sep 2017 09:47:06 +0200
Subject: [R-sig-Geo] =?utf-8?q?Parallel_processing_in_doesn=C2=B4t_use_all?=
	=?utf-8?q?_cores?=
Message-ID: <CADiqS84EXj0YHXRFgL=f+zJXTmfYLtnNvMHED1HGRBFYfAh=hQ@mail.gmail.com>

Hi every one.

I?m trying to parallelize a process that runs over the rows of a matrix. I
expect for each element of the row, which is a species, that the process
extracts and writes a file (raster) corresponding to the distribution of
each species over their habitats.

Habitas layer is a raster file and each species distribution is a polygon
(or group of polygons) from a shapefile. I first convert the species
polygon(s) to a raster, second extract the habitats for the species (stored
in a matrix where the species habitats codes are matched with the habitats
raster values), and third intersect (multiply) the distribution and the
habitats.

In addition, I would like to produce a richness (number of species map)
file (raster). Then, I add (sum) to an empty raster (with values of zero)
each final species distribution. I wrote the following function:

extract_habitats=function(k,spp_data,spp_polygons,sep,habitat_codes,cover){
  #Libraries
  library(rgdal)
  library(raster)
  #raster file with zeros
  richness_cur=raster("richness_current.tif")
  #Selection of species polygons
  rows=as.numeric(which(as.character(spp_polygons at data$binomial)==
                          as.character(spp_data$binomial[k])))
  spp_poly=spp_polygons[rows,]
  #Covert polygon(s) to raster
  spp_poly=rasterize(spp_poly,cover,1,background=0)
  #Match species habitats codes with habitats raster values
  habs=as.character(spp_data$hab_code[k])
  habs=unlist(strsplit(habs, split=sep))#habitat codes are separeted by a ";"
  cov_classes=as.numeric(as.character(habitat_codes[,2]#Get the hab

[which(as.character(habitat_codes[,1])%in%habs)]))
  #Intersect species distributions with habitats
  cov_mask=spp_poly*cover
  #Extract species habitats
  cov_mask=Which(cov_mask%in%cov_classes)
  writeRaster(cov_mask,paste(spp_data$binomial[k]," current.tif",sep=""))
  #Sum species richness
  richness_cur=richness_cur+cov_mask
  return (richness_cur)}

I try to parallelize the process using clusterApply and foreach functions.
However, I couldn't return a raster object from the function (which is
something obvious to get in a regular loop function) in any of both
functions to add to that object the sum of the species richness. So, here
is my first question. *1. Does anyone know how to return an object
different from a list (I could save each raster inside a single list but no
sum each one of them to the previos one), matrix, or vector in a
parallelization process?*

I solve this problem writing the richness file in each "iteration".
Nevertheless, this option causes the process to be slower, so for me, it is
not the ideal. Then, the function was rewritten as follows:

extract_habitats=function(k,spp_data,spp_polygons,sep,habitat_codes,cover){
  #Libraries
  library(rgdal)
  library(raster)
  #raster file with zeros
  richness_cur=raster("richness_current.tif")
  #Selection of species polygons
  rows=as.numeric(which(as.character(spp_polygons at data$binomial)==
                          as.character(spp_data$binomial[k])))
  spp_poly=spp_polygons[rows,]
  #Covert polygon(s) to raster
  spp_poly=rasterize(spp_poly,cover,1,background=0)
  #Match species habitats codes with habitats raster values
  habs=as.character(spp_data$hab_code[k])
  habs=unlist(strsplit(habs, split=sep))#habitat codes are separeted by a ";"
  cov_classes=as.numeric(as.character(habitat_codes[,2]#Get the hab

[which(as.character(habitat_codes[,1])%in%habs)]))
  #Intersect species distributions with habitats
  cov_mask=spp_poly*cover
  #Extract species habitats
  cov_mask=Which(cov_mask%in%cov_classes)
  writeRaster(cov_mask,paste(spp_data$binomial[k]," current.tif",sep=""))
  #Sum species richness
  richness_cur=richness_cur+cov_mask
  writeRaster(richness_cur,"richness_current.tif")}

Complete code to run parallelization was:

#Number of cores
no_cores=detectCores()-1#Initiate cluster
cl=makeCluster(no_cores,type="PSOCK")
registerDoParallel(cl)
#Table with name and habitat information (columns) for each species (rows)
spp_data=read.xlsx2("species_file.xls",sheetIndex=1)#Shape file with
species distributions as polygons
spp_polygons=readOGR("distributions.shp")#Separation symbol for
species habitats stored in spp_data
sep=";"#Tabla joining habitas species codes with habitats raster
habitat_codes=read.xlsx2("spp_habitats_final.xls",sheetIndex=1)#Habitats raster
cover=raster("Z:/Data/cover_2015_proj_fixed_reclas_1km.tif")
#Paralelization
foreach(k=1:nrow(spp_data)) %dopar% extract_habitats(k=k,
                                                     spp_data=spp_data,

spp_polygons=spp_polygons,sep=sep,

habitat_codes=habitat_codes,
                                                     cover=cover)
stopImplicitCluster()
stopCluster(cl)

The parallelization process runs; however, it didn't works how I expected,
since it is not using all the cores: Image of processors working
<https://i.stack.imgur.com/m4h5y.jpg>. So, what the parallelization process
does, is to start 39 (the number of cores) processes: Image of processes
opened <https://i.stack.imgur.com/nDkX4.jpg>, but it does't write one by
one the files, how I could expect in a regular loop. It suddenly write
blocks of 39 files (something that I can understand), but taking a lot of
time (because it seems to work in few cores), even more than if I ran a
regular loop (running the regular loop each file is written each two or
three minutes, while the block of 39 files is written approximately each
one hour).

*So, here is my second group of questions. 2. What I?m doing bad? 3. Why it
is not using all the 39 processors, or if it uses them, why it doesn't use
them at the maximum level? 4. Why it not begins another task (run an other
process, e.g., the process 40) when it finishes one (I suppose it because
it always write the files in blocks of 39)?*

Thanks in advance for your help.

Cheers,

Jaime

-- 
Jaime Burbano Gir?n
Estudiante Doctoral
Doctorado en Estudios Ambientales y Rurales
Pontificia Universidad Javeriana
Bogot?, Colombia
(57-1) 3208320 Ext. 4844

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Wed Sep 13 09:47:11 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 13 Sep 2017 19:47:11 +1200
Subject: [R-sig-Geo] [FORGED]  circular spatial polygon
In-Reply-To: <d09a9b7e-0a05-679a-942d-90bf4441415e@auckland.ac.nz>
References: <CABFLJOmjC72tBC3kZDxjE1-Mkx3ThZ5cEzL4CC_V9NP3YPTOsg@mail.gmail.com>
 <1d336cbd-3257-9a72-148d-eb3391b8d1d5@auckland.ac.nz>
 <CABFLJO=buiE_9m7Zs-33G6Wo7ado9cuG16+BEss-4HNvLimqtg@mail.gmail.com>
 <d09a9b7e-0a05-679a-942d-90bf4441415e@auckland.ac.nz>
Message-ID: <58f95e81-43ab-ee38-68b3-dd7c51896ef1@auckland.ac.nz>


Whoops. I cc-ed my message to r-help rather than to r-sig-geo.  (Duhhhh!)

Consequently I'm resending, with r-sig-geo as a cc recipient.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

On 13/09/17 19:37, Rolf Turner wrote:
> On 13/09/17 13:24, K?tia Emidio wrote:
>> Dear Rolf,
>>
>> Thanks for your help!
>>
>> What I need is a spatial window with shape equal to the figure 
>> attached. This figure I made using ArcGis, but it is important to me 
>> make it in R. After having this figure I will make some analysis using 
>> spatstat among others. The points within figure are trees...
> 
> (1) I believe that this discussion should be kept on-list.  It is not my 
> role to provide private consulting for you.  I  am therefore cc-ing the 
> list in this email.
> 
> (2) It is still not completely clear what you really want; the figure 
> that you attached appears to be a disc with 4 diameters superimposed. So 
> you might be after a single (circular) owin object and a line segment 
> pattern consisting of the 4 diameters.  Or you might be after *eight* 
> owin objects, each being one the eight disc-segments into which the 
> diameters divide the disc.
> 
> I shall assume the latter.  To start with define a function, say "wedge":
> 
> wedge <- function(theta1,theta2,radius,npoly=100,centre=c(0,0)){
>      library(spatstat)
> # Should do some checking on the values of theta1 and theta2 here,
> # but I shan't bother.
>      theta <- seq(theta1,theta2,length=npoly+1)
>      x <- c(0,radius*cos(theta),0)
>      y <- c(0,radius*sin(theta),0)
>      W <- owin(poly=list(x=x,y=y))
>      return(affine(W,vec=centre))
> }
> 
> Then do something like:
> 
> wedgies <- vector("list",length=8)
> cntr <- c(673593.21,673593.21)
> for(i in 1:8) wedgies[[i]] <- wedge((i-1)*pi/4,i*pi/4,15,centre=cntr)
> ttt <- tess(tiles=wedgies)
> plot(ttt) # Looks OK to me.
> 
> And maybe also do:
> 
> W <- do.call(union.owin,wedgies)
> plot(W)
> for(i in 1:8) {
>      plot(wedgies[[i]],add=TRUE,border="red")
>      readline("Go? ")
> }
> 
> Also looks OK to me.
> 
> Is *this* what you want?


From r.turner at auckland.ac.nz  Tue Sep 12 23:45:11 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 13 Sep 2017 09:45:11 +1200
Subject: [R-sig-Geo] quadracount on multitype points
In-Reply-To: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
References: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
Message-ID: <b257b726-f816-417f-a447-12302648a5ec@auckland.ac.nz>


On 13/09/17 02:11, Guy Bayegnak wrote:

> Dear all,
> 
> I am working on a multitype point pattern, and I'd like to estimate
> how many of each type of point occurs into each quadrant. I know it
> is possible to use the quandracount on split marks as follows using
> spatstats: quadratcount(split(marks)). But the result produces as
> many windows as they are marks. I am wondering is there is a way to
> know many occurrence of each type there is per quadrant and to plot
> it in a single grid.
> 
> Thanks.

You really should start by mentioning that you are dealing with the 
spatstat package.

It's not clear to me what you are after.  A minimal reproducible example 
would be helpful.  I presume that by "quadrant" you mean one of the four 
equal sub-windows formed by bisecting your (rectangular) window 
vertically and horizontally.

If my presumption is correct then perhaps

     lapply(split(X),quadratcount,nx=2)

(where "X" is your point pattern) does what you want.  E.g.:

> lapply(split(amacrine),quadratcount,nx=2)
> $off
>          x
> y         [0,0.801) [0.801,1.6]
>   [0.5,1]        36          36
>   [0,0.5)        34          36
> 
> $on
>          x
> y         [0,0.801) [0.801,1.6]
>   [0.5,1]        35          39
>   [0,0.5)        42          36

Is this something like what you wish to achieve?

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From marcelino.delacruz at urjc.es  Tue Sep 12 18:19:42 2017
From: marcelino.delacruz at urjc.es (Marcelino de la Cruz Rot)
Date: Tue, 12 Sep 2017 18:19:42 +0200
Subject: [R-sig-Geo] quadracount on multitype points
In-Reply-To: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
References: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
Message-ID: <57155944-f49a-7ffc-a7f6-252da3738bf5@urjc.es>

Hi Guy,

You can know how many points of each type are in each cell with sapply, 
i.e.:

 >data (lansing)

 >qs<- quadratcount(split(lansing))

#trees in the fist row, first column:
 > sapply(qs, function(x) x[1,1])
blackoak? hickory??? maple???? misc?? redoak whiteoak
 ????? 13?????? 66??????? 0??????? 0??????? 4?????? 23

#trees in the fist row, second column:
 > sapply(qs, function(x) x[1,2])
blackoak? hickory??? maple???? misc?? redoak whiteoak
 ????? 16?????? 38??????? 3??????? 0??????? 9?????? 16

# ETC. On the other hand I don't know if it is a good idea to have all 
this numbers printed in just one cell or how to print them without the 
result being a mess...

Cheers,

Marcelino.


El 12/09/2017 a las 16:11, Guy Bayegnak escribi?:
> Dear all,
>
>
>
> I am working on a multitype point pattern, and I'd like to estimate how many of each type of point occurs into each quadrant. I know it is possible to use the quandracount on split marks as follows using spatstats: quadratcount(split(marks)). But the result produces as many windows as they are marks. I am wondering is there is a way to know many occurrence of each type there is per quadrant and to plot it in a single grid.
>
> Thanks,
>
> Guy
>
>
>
> This email and any files transmitted with it are confide...{{dropped:10}}
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> .
>

-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From Guy.Bayegnak at gov.ab.ca  Wed Sep 13 01:08:37 2017
From: Guy.Bayegnak at gov.ab.ca (Guy Bayegnak)
Date: Tue, 12 Sep 2017 23:08:37 +0000
Subject: [R-sig-Geo] quadracount on multitype points
In-Reply-To: <b257b726-f816-417f-a447-12302648a5ec@auckland.ac.nz>
References: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
 <b257b726-f816-417f-a447-12302648a5ec@auckland.ac.nz>
Message-ID: <71D4D04D426B3B488D6C7FE26376FDE73AC12A02@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>

Thanks a lot for your response and suggestion Rolf.  Yes, by "quadrant" I mean the little sub-windows.  My problem is the following:

We have collected thousands of groundwater samples across a vast area, and analysed them. Based on the analysis we are able to assign a "type" to each water sample.  When plotted, there seems to be a spatial trend in water type. But a given area may have more than one water type,  usually with a dominant type (most frequently occurring). What I am trying to do is identify the dominant type for each sub-region /sub-windows but show the count side by side, for example:

          x
 y         [0,0.801)            [0.801,1.6]
  [0.5,1]   Off =     36                Off =  6
           On =   3     On = 39

   [0,0.5)   Off =  4              Off = 36
            On = 42        On = 6

I think I can achieve what I am looking for with your suggestion. Once I get the table list, I will copy the numbers side by side manually.

Sincerely,

Guy

-----Original Message-----
From: Rolf Turner [mailto:r.turner at auckland.ac.nz]
Sent: September 12, 2017 3:45 PM
To: Guy Bayegnak <Guy.Bayegnak at gov.ab.ca>
Cc: r-sig-geo at r-project.org; Adrian.Baddeley at curtin.edu.au; Ege Rubak <rubak at math.aau.dk>
Subject: Re: [R-sig-Geo] quadracount on multitype points


On 13/09/17 02:11, Guy Bayegnak wrote:

> Dear all,
>
> I am working on a multitype point pattern, and I'd like to estimate
> how many of each type of point occurs into each quadrant. I know it is
> possible to use the quandracount on split marks as follows using
> spatstats: quadratcount(split(marks)). But the result produces as many
> windows as they are marks. I am wondering is there is a way to know
> many occurrence of each type there is per quadrant and to plot it in a
> single grid.
>
> Thanks.

You really should start by mentioning that you are dealing with the spatstat package.

It's not clear to me what you are after.  A minimal reproducible example would be helpful.  I presume that by "quadrant" you mean one of the four equal sub-windows formed by bisecting your (rectangular) window vertically and horizontally.

If my presumption is correct then perhaps

     lapply(split(X),quadratcount,nx=2)

(where "X" is your point pattern) does what you want.  E.g.:

> lapply(split(amacrine),quadratcount,nx=2)
> $off
>          x
> y         [0,0.801) [0.801,1.6]
>   [0.5,1]        36          36
>   [0,0.5)        34          36
>
> $on
>          x
> y         [0,0.801) [0.801,1.6]
>   [0.5,1]        35          39
>   [0,0.5)        42          36

Is this something like what you wish to achieve?

cheers,

Rolf Turner

--
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the system manager. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.

From rubak at math.aau.dk  Wed Sep 13 10:21:27 2017
From: rubak at math.aau.dk (Ege Rubak)
Date: Wed, 13 Sep 2017 10:21:27 +0200
Subject: [R-sig-Geo] quadracount on multitype points
In-Reply-To: <71D4D04D426B3B488D6C7FE26376FDE73AC12A02@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
References: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
 <b257b726-f816-417f-a447-12302648a5ec@auckland.ac.nz>
 <71D4D04D426B3B488D6C7FE26376FDE73AC12A02@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
Message-ID: <e1a787e3-b8e1-a354-ff68-116769c3a485@math.aau.dk>

Hi Guy,

Maybe your explorative analysis could also benefit from `relrisk` in 
case you don't know that function?

It basically gives you a list of smooth images (one for each type) of 
the probability that a hypothetical sample at that location is of a 
given type. E.g. for the built-in multitype point pattern dataset 
`lansing` you would do:

     library(spatstat)
     prob <- relrisk(lansing, diggle=TRUE)
     plot(prob)

This example and more (e.g. a division of the sampling area into subsets 
of dominant types) can be found in Chapter 14 of our "spatstat book" if 
you need more details (sorry about the shameless self promotion, but I 
don't know a better source for this :-)).

Kind regards,
Ege

On 09/13/2017 01:08 AM, Guy Bayegnak wrote:
> Thanks a lot for your response and suggestion Rolf.  Yes, by "quadrant" I mean the little sub-windows.  My problem is the following:
> 
> We have collected thousands of groundwater samples across a vast area, and analysed them. Based on the analysis we are able to assign a "type" to each water sample.  When plotted, there seems to be a spatial trend in water type. But a given area may have more than one water type,  usually with a dominant type (most frequently occurring). What I am trying to do is identify the dominant type for each sub-region /sub-windows but show the count side by side, for example:
> 
>            x
>   y         [0,0.801)            [0.801,1.6]
>    [0.5,1]   Off =     36                Off =  6
>             On =   3     On = 39
> 
>     [0,0.5)   Off =  4              Off = 36
>              On = 42        On = 6
> 
> I think I can achieve what I am looking for with your suggestion. Once I get the table list, I will copy the numbers side by side manually.
> 
> Sincerely,
> 
> Guy
> 
> -----Original Message-----
> From: Rolf Turner [mailto:r.turner at auckland.ac.nz]
> Sent: September 12, 2017 3:45 PM
> To: Guy Bayegnak <Guy.Bayegnak at gov.ab.ca>
> Cc: r-sig-geo at r-project.org; Adrian.Baddeley at curtin.edu.au; Ege Rubak <rubak at math.aau.dk>
> Subject: Re: [R-sig-Geo] quadracount on multitype points
> 
> 
> On 13/09/17 02:11, Guy Bayegnak wrote:
> 
>> Dear all,
>>
>> I am working on a multitype point pattern, and I'd like to estimate
>> how many of each type of point occurs into each quadrant. I know it is
>> possible to use the quandracount on split marks as follows using
>> spatstats: quadratcount(split(marks)). But the result produces as many
>> windows as they are marks. I am wondering is there is a way to know
>> many occurrence of each type there is per quadrant and to plot it in a
>> single grid.
>>
>> Thanks.
> 
> You really should start by mentioning that you are dealing with the spatstat package.
> 
> It's not clear to me what you are after.  A minimal reproducible example would be helpful.  I presume that by "quadrant" you mean one of the four equal sub-windows formed by bisecting your (rectangular) window vertically and horizontally.
> 
> If my presumption is correct then perhaps
> 
>       lapply(split(X),quadratcount,nx=2)
> 
> (where "X" is your point pattern) does what you want.  E.g.:
> 
>> lapply(split(amacrine),quadratcount,nx=2)
>> $off
>>           x
>> y         [0,0.801) [0.801,1.6]
>>    [0.5,1]        36          36
>>    [0,0.5)        34          36
>>
>> $on
>>           x
>> y         [0,0.801) [0.801,1.6]
>>    [0.5,1]        35          39
>>    [0,0.5)        42          36
> 
> Is this something like what you wish to achieve?
> 
> cheers,
> 
> Rolf Turner
> 
> --
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
> This email and any files transmitted with it are confi...{{dropped:3}}


From michela.giusti at isprambiente.it  Wed Sep 13 11:40:42 2017
From: michela.giusti at isprambiente.it (Michela Giusti)
Date: Wed, 13 Sep 2017 11:40:42 +0200
Subject: [R-sig-Geo] CANCELLATION
Message-ID: <f6348985-1ab8-fe71-30ad-d9d5ddb5a6d1@isprambiente.it>

please,remove my email address from your list.

Thanks.

michela

-- 
*****************************************************************
Dr. Michela Giusti
ISPRA
Istituto Superiore per la Protezione e la Ricerca Ambientale
Via Brancati, 60
00144 Roma
Tel. +390650074746
michela.giusti at isprambiente.it


From r.turner at auckland.ac.nz  Wed Sep 13 10:40:53 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 13 Sep 2017 20:40:53 +1200
Subject: [R-sig-Geo] quadracount on multitype points
In-Reply-To: <71D4D04D426B3B488D6C7FE26376FDE73AC12A02@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
References: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
 <b257b726-f816-417f-a447-12302648a5ec@auckland.ac.nz>
 <71D4D04D426B3B488D6C7FE26376FDE73AC12A02@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
Message-ID: <566731ee-47a3-f99f-feb4-e73985951596@auckland.ac.nz>

On 13/09/17 11:08, Guy Bayegnak wrote:
> Thanks a lot for your response and suggestion Rolf.  Yes, by "quadrant" I mean the little sub-windows.  My problem is the following:
> 
> We have collected thousands of groundwater samples across a vast area, and analysed them. Based on the analysis we are able to assign a "type" to each water sample.  When plotted, there seems to be a spatial trend in water type. But a given area may have more than one water type,  usually with a dominant type (most frequently occurring). What I am trying to do is identify the dominant type for each sub-region /sub-windows but show the count side by side, for example:
> 
>            x
>   y         [0,0.801)            [0.801,1.6]
>    [0.5,1]   Off =     36                Off =  6
>             On =   3     On = 39
> 
>     [0,0.5)   Off =  4              Off = 36
>              On = 42        On = 6
> 

I don't understand the counts in the foregoing.  Have some digits been 
left off in places?  I.e. should this be:
 >
 >            x
 >   y         [0,0.801)            [0.801,1.6]
 >    [0.5,1]   Off = 36               Off = 36
 >              On  = 35               On  = 39
 >
 >     [0,0.5)  Off = 34               Off = 36
 >              On  = 42               On  = 36       ???
 >


> I think I can achieve what I am looking for with your suggestion. Once I get the table list, I will copy the numbers side by side manually.

Yeucch!  Manually?  Saints preserve us!

Do you really mean "quadrant" or do you simply mean *quadrat*???

Sticking with quad*rant* (it doesn't really matter), how about something 
like:

rants <- tiles(quadrats(Window(amacrine),nx=2))
lapply(rants,function(w,pat){table(marks(pat[w]))},pat=amacrine)

which gives:

> $`Tile row 1, col 1`
> 
> off  on 
>  36  35 
> 
> $`Tile row 1, col 2`
> 
> off  on 
>  36  39 
> 
> $`Tile row 2, col 1`
> 
> off  on 
>  34  42 
> 
> $`Tile row 2, col 2`
> 
> off  on 
>  36  36 

cheers,

Rolf

P. S.  But you are probably well-advised to forget all this quadrat 
counting stuff and use relrisk() as suggested by Ege Rubak.

R.

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From marcelino.delacruz at urjc.es  Wed Sep 13 11:04:54 2017
From: marcelino.delacruz at urjc.es (Marcelino de la Cruz Rot)
Date: Wed, 13 Sep 2017 11:04:54 +0200
Subject: [R-sig-Geo] quadracount on multitype points
In-Reply-To: <e1a787e3-b8e1-a354-ff68-116769c3a485@math.aau.dk>
References: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
 <b257b726-f816-417f-a447-12302648a5ec@auckland.ac.nz>
 <71D4D04D426B3B488D6C7FE26376FDE73AC12A02@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
 <e1a787e3-b8e1-a354-ff68-116769c3a485@math.aau.dk>
Message-ID: <fd0b5005-ac3d-3afa-f72e-df5ca9ae9214@urjc.es>

Hi Guy,
I only like real pies :-) but, what about something like this:


library(spatstat)
data(lansing)
qs<- quadratcount(split(lansing))
dqs <- dim(qs[[1]])
nr <- dqs[1]
nc <- dqs[2]
le <- length(qs[[1]])
m<- matrix( 1:le, nr=nr, nc=nc, byrow=T)
layout(m, heights=rep(1,nr), widths=rep(1,nc))
#layout.show(25)
par(mar=c(0,0,0,0))
for (i in 1:nc){
 ?? for (j in 1:nr){
 ???? pie(sapply(qs, function(x) x[i,j]), labels=NA )
 ???? box()
 ?}
}

Cheers,
Marcelino




El 13/09/2017 a las 10:21, Ege Rubak escribi?:
> Hi Guy,
>
> Maybe your explorative analysis could also benefit from `relrisk` in 
> case you don't know that function?
>
> It basically gives you a list of smooth images (one for each type) of 
> the probability that a hypothetical sample at that location is of a 
> given type. E.g. for the built-in multitype point pattern dataset 
> `lansing` you would do:
>
> ??? library(spatstat)
> ??? prob <- relrisk(lansing, diggle=TRUE)
> ??? plot(prob)
>
> This example and more (e.g. a division of the sampling area into 
> subsets of dominant types) can be found in Chapter 14 of our "spatstat 
> book" if you need more details (sorry about the shameless self 
> promotion, but I don't know a better source for this :-)).
>
> Kind regards,
> Ege
>
> On 09/13/2017 01:08 AM, Guy Bayegnak wrote:
>> Thanks a lot for your response and suggestion Rolf.? Yes, by 
>> "quadrant" I mean the little sub-windows.? My problem is the following:
>>
>> We have collected thousands of groundwater samples across a vast 
>> area, and analysed them. Based on the analysis we are able to assign 
>> a "type" to each water sample.? When plotted, there seems to be a 
>> spatial trend in water type. But a given area may have more than one 
>> water type,? usually with a dominant type (most frequently 
>> occurring). What I am trying to do is identify the dominant type for 
>> each sub-region /sub-windows but show the count side by side, for 
>> example:
>>
>> ?????????? x
>> ? y???????? [0,0.801)??????????? [0.801,1.6]
>> ?? [0.5,1]?? Off =???? 36??????????????? Off =? 6
>> ??????????? On =?? 3???? On = 39
>>
>> ??? [0,0.5)?? Off =? 4????????????? Off = 36
>> ???????????? On = 42??????? On = 6
>>
>> I think I can achieve what I am looking for with your suggestion. 
>> Once I get the table list, I will copy the numbers side by side 
>> manually.
>>
>> Sincerely,
>>
>> Guy
>>
>> -----Original Message-----
>> From: Rolf Turner [mailto:r.turner at auckland.ac.nz]
>> Sent: September 12, 2017 3:45 PM
>> To: Guy Bayegnak <Guy.Bayegnak at gov.ab.ca>
>> Cc: r-sig-geo at r-project.org; Adrian.Baddeley at curtin.edu.au; Ege Rubak 
>> <rubak at math.aau.dk>
>> Subject: Re: [R-sig-Geo] quadracount on multitype points
>>
>>
>> On 13/09/17 02:11, Guy Bayegnak wrote:
>>
>>> Dear all,
>>>
>>> I am working on a multitype point pattern, and I'd like to estimate
>>> how many of each type of point occurs into each quadrant. I know it is
>>> possible to use the quandracount on split marks as follows using
>>> spatstats: quadratcount(split(marks)). But the result produces as many
>>> windows as they are marks. I am wondering is there is a way to know
>>> many occurrence of each type there is per quadrant and to plot it in a
>>> single grid.
>>>
>>> Thanks.
>>
>> You really should start by mentioning that you are dealing with the 
>> spatstat package.
>>
>> It's not clear to me what you are after.? A minimal reproducible 
>> example would be helpful.? I presume that by "quadrant" you mean one 
>> of the four equal sub-windows formed by bisecting your (rectangular) 
>> window vertically and horizontally.
>>
>> If my presumption is correct then perhaps
>>
>> ????? lapply(split(X),quadratcount,nx=2)
>>
>> (where "X" is your point pattern) does what you want.? E.g.:
>>
>>> lapply(split(amacrine),quadratcount,nx=2)
>>> $off
>>> ????????? x
>>> y???????? [0,0.801) [0.801,1.6]
>>> ?? [0.5,1]??????? 36????????? 36
>>> ?? [0,0.5)??????? 34????????? 36
>>>
>>> $on
>>> ????????? x
>>> y???????? [0,0.801) [0.801,1.6]
>>> ?? [0.5,1]??????? 35????????? 39
>>> ?? [0,0.5)??????? 42????????? 36
>>
>> Is this something like what you wish to achieve?
>>
>> cheers,
>>
>> Rolf Turner
>>
>> -- 
>> Technical Editor ANZJS
>> Department of Statistics
>> University of Auckland
>> Phone: +64-9-373-7599 ext. 88276
>> This email and any files transmitted with it are confi...{{dropped:3}}
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> .
>

-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From Roger.Bivand at nhh.no  Wed Sep 13 14:11:28 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 13 Sep 2017 14:11:28 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
References: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709131403480.25476@reclus.nhh.no>

On Wed, 13 Sep 2017, Agustin Lobo wrote:

> The problem seems to be related to the compiler. I had:
> gcc version 5.3.1 20160101 (Debian 5.3.1-5)
>
> I have now:
> gcc version 7.2.0 (Debian 7.2.0-4)
>
> All weird previus errors are gone but I still have:
> configure: PROJ.4 version: 4.8.0
> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
> checking PROJ.4: epsg found and readable... yes
> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>
> and finally
>
> ** testing if installed package can be loaded
> Fatal error: glibc detected an invalid stdio handle
> Aborted
> ERROR: loading failed
> * removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?
>
> Surprisingly,  I do have 4.9 installed, not 4.8:
>
> $ dpkg -s proj-bin
> Package: proj-bin
> Status: install ok installed
> Priority: optional
> Section: science
> Installed-Size: 125
> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
> Architecture: i386
> Source: proj
> Version: 4.9.3-2
>
> and
> $ proj
> Rel. 4.9.3, 15 August 2016
> usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>
> and I cannot find proj_conf_test anywhere:
> $ sudo find / -name 'proj_conf_test'
> gives no result
>
> How is the test ./proj_conf_test done so that I can investigate why it
> results into PROJ 4.8 instead of 4.9?

It is defined in rgdal/configure.ac (line 273 ff.):

if test ${proj_version} -ge 480; then
[cat > proj_conf_test.c <<_EOCONF
#include <stdio.h>
#include <proj_api.h>
#if PJ_VERSION == 480
FILE *pj_open_lib(projCtx, const char *, const char *);
#endif

int main() {
#if PJ_VERSION <= 480
     FILE *fp;
#else
     PAFile fp;
#endif
     projCtx ctx;
     ctx = pj_get_default_ctx();
     fp = pj_open_lib(ctx, "epsg", "rb");
     if (fp == NULL) exit(1);
#if PJ_VERSION <= 480
     fclose(fp);
#else
     pj_ctx_fclose(ctx, fp);
#endif
     exit(0);
}
_EOCONF]
else
[cat > proj_conf_test.c <<_EOCONF
#include <stdio.h>
#include <proj_api.h>
FILE *pj_open_lib(const char *, const char *);

int main() {
     FILE *fp;
     fp = pj_open_lib("epsg", "rb");
     if (fp == NULL) exit(1);
     fclose(fp);
     exit(0);
}
_EOCONF]
fi

and checks that the crucial epsg file is present. It does seem to run, 
though, which is puzzling - if you read configure.ac, you'll see that I 
didn't guard against the previous (different) ./proj_conf_test already 
existing - I'll revise the test names to avoid such false positives in the 
future.

Roger

>
> Thanks
>
> Agus
>
>
>
> On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> $ g++ -v
>> ...
>> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>>
>> in my case on Fedora 26.
>>
>> Recent versions should be OK, but < 5 may be problematic. If you have
>> upgraded in place but not upgraded the compile trains, installing r-base
>> will not force that.
>>
>>
>>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From Guy.Bayegnak at gov.ab.ca  Wed Sep 13 16:41:25 2017
From: Guy.Bayegnak at gov.ab.ca (Guy Bayegnak)
Date: Wed, 13 Sep 2017 14:41:25 +0000
Subject: [R-sig-Geo] quadracount on multitype points
In-Reply-To: <e1a787e3-b8e1-a354-ff68-116769c3a485@math.aau.dk>
References: <71D4D04D426B3B488D6C7FE26376FDE73AC124E2@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
 <b257b726-f816-417f-a447-12302648a5ec@auckland.ac.nz>
 <71D4D04D426B3B488D6C7FE26376FDE73AC12A02@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>
 <e1a787e3-b8e1-a354-ff68-116769c3a485@math.aau.dk>
Message-ID: <71D4D04D426B3B488D6C7FE26376FDE73AC130D8@EDM-GOA-EXCH122.goa.ds.gov.ab.ca>

Thanks for all the suggestions. They were all very helpful. The "relrisk" function turned out to be even better than what I was trying to do. 

And Ege, no worries about self promotion. I already have a copy of the "spatial point pattern " book. 

Sincerely,

Guy

-----Original Message-----
From: Ege Rubak [mailto:rubak at math.aau.dk] 
Sent: September 13, 2017 2:21 AM
To: Guy Bayegnak <Guy.Bayegnak at gov.ab.ca>
Cc: Rolf Turner <r.turner at auckland.ac.nz>; r-sig-geo at r-project.org; Adrian.Baddeley at curtin.edu.au
Subject: Re: [R-sig-Geo] quadracount on multitype points

Hi Guy,

Maybe your explorative analysis could also benefit from `relrisk` in case you don't know that function?

It basically gives you a list of smooth images (one for each type) of the probability that a hypothetical sample at that location is of a given type. E.g. for the built-in multitype point pattern dataset `lansing` you would do:

     library(spatstat)
     prob <- relrisk(lansing, diggle=TRUE)
     plot(prob)

This example and more (e.g. a division of the sampling area into subsets of dominant types) can be found in Chapter 14 of our "spatstat book" if you need more details (sorry about the shameless self promotion, but I don't know a better source for this :-)).

Kind regards,
Ege

On 09/13/2017 01:08 AM, Guy Bayegnak wrote:
> Thanks a lot for your response and suggestion Rolf.  Yes, by "quadrant" I mean the little sub-windows.  My problem is the following:
> 
> We have collected thousands of groundwater samples across a vast area, and analysed them. Based on the analysis we are able to assign a "type" to each water sample.  When plotted, there seems to be a spatial trend in water type. But a given area may have more than one water type,  usually with a dominant type (most frequently occurring). What I am trying to do is identify the dominant type for each sub-region /sub-windows but show the count side by side, for example:
> 
>            x
>   y         [0,0.801)            [0.801,1.6]
>    [0.5,1]   Off =     36                Off =  6
>             On =   3     On = 39
> 
>     [0,0.5)   Off =  4              Off = 36
>              On = 42        On = 6
> 
> I think I can achieve what I am looking for with your suggestion. Once I get the table list, I will copy the numbers side by side manually.
> 
> Sincerely,
> 
> Guy
> 
> -----Original Message-----
> From: Rolf Turner [mailto:r.turner at auckland.ac.nz]
> Sent: September 12, 2017 3:45 PM
> To: Guy Bayegnak <Guy.Bayegnak at gov.ab.ca>
> Cc: r-sig-geo at r-project.org; Adrian.Baddeley at curtin.edu.au; Ege Rubak 
> <rubak at math.aau.dk>
> Subject: Re: [R-sig-Geo] quadracount on multitype points
> 
> 
> On 13/09/17 02:11, Guy Bayegnak wrote:
> 
>> Dear all,
>>
>> I am working on a multitype point pattern, and I'd like to estimate 
>> how many of each type of point occurs into each quadrant. I know it 
>> is possible to use the quandracount on split marks as follows using
>> spatstats: quadratcount(split(marks)). But the result produces as 
>> many windows as they are marks. I am wondering is there is a way to 
>> know many occurrence of each type there is per quadrant and to plot 
>> it in a single grid.
>>
>> Thanks.
> 
> You really should start by mentioning that you are dealing with the spatstat package.
> 
> It's not clear to me what you are after.  A minimal reproducible example would be helpful.  I presume that by "quadrant" you mean one of the four equal sub-windows formed by bisecting your (rectangular) window vertically and horizontally.
> 
> If my presumption is correct then perhaps
> 
>       lapply(split(X),quadratcount,nx=2)
> 
> (where "X" is your point pattern) does what you want.  E.g.:
> 
>> lapply(split(amacrine),quadratcount,nx=2)
>> $off
>>           x
>> y         [0,0.801) [0.801,1.6]
>>    [0.5,1]        36          36
>>    [0,0.5)        34          36
>>
>> $on
>>           x
>> y         [0,0.801) [0.801,1.6]
>>    [0.5,1]        35          39
>>    [0,0.5)        42          36
> 
> Is this something like what you wish to achieve?
> 
> cheers,
> 
> Rolf Turner
> 
> --
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
> This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the system manager. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
> 

From Roger.Bivand at nhh.no  Thu Sep 14 09:26:16 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 14 Sep 2017 09:26:16 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <alpine.LFD.2.21.1709131403480.25476@reclus.nhh.no>
References: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
 <alpine.LFD.2.21.1709131403480.25476@reclus.nhh.no>
Message-ID: <alpine.LFD.2.21.1709140910130.21897@reclus.nhh.no>

As Edzer said earlier in this thread (and Agus was quite right to post 
rather than contact me directly), reproducing the problem(s) is hard 
without access to the specific platform (thread started here):

https://stat.ethz.ch/pipermail/r-sig-geo/2017-September/025974.html

My guesses so far are that the gcc build trains used for R, and for the 
GDAL/PROJ.4 components are not the same, and may not be the same as the 
installed gcc build train used to install rgdal from source. This probably 
also affects sf on debian buster (and ubuntu?). It may also affect 
GEOS/rgeos.

The gcc versions do change as platforms are upgraded, so for anything 
using C++, the ABI changes will bite hard, and keeping the compiler 
versions in harmony is crucial. The baseline comparison is to install GDAL 
and its dependencies (including PROJ.4) from source (download and unpack 
source tarball, ./configure && make && make install), then probably R from 
source, finally rgdal. This has to work, but unpicks the debian/ubuntu 
packaging system on which many rely.

Please also consider taking this up on r-sig-debian, with a reproducible 
example, best in a docker container.

A further thought is that the most frequent cause of trouble on 
debian/ubuntu previously were multiple installs of different versions of 
GDAL, pulled in by different downstream packages, but the current reports 
do not suggest this as the cause. Still worth checking, though ...

Roger

On Wed, 13 Sep 2017, Roger Bivand wrote:

> On Wed, 13 Sep 2017, Agustin Lobo wrote:
>
>> The problem seems to be related to the compiler. I had:
>> gcc version 5.3.1 20160101 (Debian 5.3.1-5)
>> 
>> I have now:
>> gcc version 7.2.0 (Debian 7.2.0-4)
>> 
>> All weird previus errors are gone but I still have:
>> configure: PROJ.4 version: 4.8.0
>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>> checking PROJ.4: epsg found and readable... yes
>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>> 
>> and finally
>> 
>> ** testing if installed package can be loaded
>> Fatal error: glibc detected an invalid stdio handle
>> Aborted
>> ERROR: loading failed
>> * removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?
>> 
>> Surprisingly,  I do have 4.9 installed, not 4.8:
>> 
>> $ dpkg -s proj-bin
>> Package: proj-bin
>> Status: install ok installed
>> Priority: optional
>> Section: science
>> Installed-Size: 125
>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>> Architecture: i386
>> Source: proj
>> Version: 4.9.3-2
>> 
>> and
>> $ proj
>> Rel. 4.9.3, 15 August 2016
>> usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>> 
>> and I cannot find proj_conf_test anywhere:
>> $ sudo find / -name 'proj_conf_test'
>> gives no result
>> 
>> How is the test ./proj_conf_test done so that I can investigate why it
>> results into PROJ 4.8 instead of 4.9?
>
> It is defined in rgdal/configure.ac (line 273 ff.):
>
> if test ${proj_version} -ge 480; then
> [cat > proj_conf_test.c <<_EOCONF
> #include <stdio.h>
> #include <proj_api.h>
> #if PJ_VERSION == 480
> FILE *pj_open_lib(projCtx, const char *, const char *);
> #endif
>
> int main() {
> #if PJ_VERSION <= 480
>    FILE *fp;
> #else
>    PAFile fp;
> #endif
>    projCtx ctx;
>    ctx = pj_get_default_ctx();
>    fp = pj_open_lib(ctx, "epsg", "rb");
>    if (fp == NULL) exit(1);
> #if PJ_VERSION <= 480
>    fclose(fp);
> #else
>    pj_ctx_fclose(ctx, fp);
> #endif
>    exit(0);
> }
> _EOCONF]
> else
> [cat > proj_conf_test.c <<_EOCONF
> #include <stdio.h>
> #include <proj_api.h>
> FILE *pj_open_lib(const char *, const char *);
>
> int main() {
>    FILE *fp;
>    fp = pj_open_lib("epsg", "rb");
>    if (fp == NULL) exit(1);
>    fclose(fp);
>    exit(0);
> }
> _EOCONF]
> fi
>
> and checks that the crucial epsg file is present. It does seem to run, 
> though, which is puzzling - if you read configure.ac, you'll see that I 
> didn't guard against the previous (different) ./proj_conf_test already 
> existing - I'll revise the test names to avoid such false positives in the 
> future.
>
> Roger
>
>> 
>> Thanks
>> 
>> Agus
>> 
>> 
>> 
>> On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>> $ g++ -v
>>> ...
>>> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>>> 
>>> in my case on Fedora 26.
>>> 
>>> Recent versions should be OK, but < 5 may be problematic. If you have
>>> upgraded in place but not upgraded the compile trains, installing r-base
>>> will not force that.
>>> 
>>> 
>>> 
>> 
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From kat.emidio at gmail.com  Thu Sep 14 18:03:52 2017
From: kat.emidio at gmail.com (=?UTF-8?Q?K=C3=A1tia_Emidio?=)
Date: Thu, 14 Sep 2017 12:03:52 -0400
Subject: [R-sig-Geo] [FORGED]  circular spatial polygon
In-Reply-To: <58f95e81-43ab-ee38-68b3-dd7c51896ef1@auckland.ac.nz>
References: <CABFLJOmjC72tBC3kZDxjE1-Mkx3ThZ5cEzL4CC_V9NP3YPTOsg@mail.gmail.com>
 <1d336cbd-3257-9a72-148d-eb3391b8d1d5@auckland.ac.nz>
 <CABFLJO=buiE_9m7Zs-33G6Wo7ado9cuG16+BEss-4HNvLimqtg@mail.gmail.com>
 <d09a9b7e-0a05-679a-942d-90bf4441415e@auckland.ac.nz>
 <58f95e81-43ab-ee38-68b3-dd7c51896ef1@auckland.ac.nz>
Message-ID: <CABFLJOmkDws2bKJRNNbCK4RZ22DyN1vNhU8tZ8oquvZh_DgyzA@mail.gmail.com>

Dear Rolf,
Thanks so much for your help! The script worked well, as I wanted. Only
thing that is need to correct, in order to have it in a projected world (in
my case UTM-zone 20S), is to change one of the values associated to object
"cntr"... the coordinates are the same in the above code.... changing to
X/Y UTM coordinates, everthing worked well!
Thanks!!

Katia




2017-09-13 3:47 GMT-04:00 Rolf Turner <r.turner at auckland.ac.nz>:

>
> Whoops. I cc-ed my message to r-help rather than to r-sig-geo.  (Duhhhh!)
>
> Consequently I'm resending, with r-sig-geo as a cc recipient.
>
> cheers,
>
> Rolf Turner
>
> --
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> On 13/09/17 19:37, Rolf Turner wrote:
>
>> On 13/09/17 13:24, K?tia Emidio wrote:
>>
>>> Dear Rolf,
>>>
>>> Thanks for your help!
>>>
>>> What I need is a spatial window with shape equal to the figure attached.
>>> This figure I made using ArcGis, but it is important to me make it in R.
>>> After having this figure I will make some analysis using spatstat among
>>> others. The points within figure are trees...
>>>
>>
>> (1) I believe that this discussion should be kept on-list.  It is not my
>> role to provide private consulting for you.  I  am therefore cc-ing the
>> list in this email.
>>
>> (2) It is still not completely clear what you really want; the figure
>> that you attached appears to be a disc with 4 diameters superimposed. So
>> you might be after a single (circular) owin object and a line segment
>> pattern consisting of the 4 diameters.  Or you might be after *eight* owin
>> objects, each being one the eight disc-segments into which the diameters
>> divide the disc.
>>
>> I shall assume the latter.  To start with define a function, say "wedge":
>>
>> wedge <- function(theta1,theta2,radius,npoly=100,centre=c(0,0)){
>>      library(spatstat)
>> # Should do some checking on the values of theta1 and theta2 here,
>> # but I shan't bother.
>>      theta <- seq(theta1,theta2,length=npoly+1)
>>      x <- c(0,radius*cos(theta),0)
>>      y <- c(0,radius*sin(theta),0)
>>      W <- owin(poly=list(x=x,y=y))
>>      return(affine(W,vec=centre))
>> }
>>
>> Then do something like:
>>
>> wedgies <- vector("list",length=8)
>> cntr <- c(673593.21,673593.21)
>> for(i in 1:8) wedgies[[i]] <- wedge((i-1)*pi/4,i*pi/4,15,centre=cntr)
>> ttt <- tess(tiles=wedgies)
>> plot(ttt) # Looks OK to me.
>>
>> And maybe also do:
>>
>> W <- do.call(union.owin,wedgies)
>> plot(W)
>> for(i in 1:8) {
>>      plot(wedgies[[i]],add=TRUE,border="red")
>>      readline("Go? ")
>> }
>>
>> Also looks OK to me.
>>
>> Is *this* what you want?
>>
>


-- 
K?tia Em?dio da Silva DSc
Eng. Florestal
Manaus/AM



Forestry Engineer
Manaus/AM-Brazil

	[[alternative HTML version deleted]]


From kat.emidio at gmail.com  Thu Sep 14 18:03:52 2017
From: kat.emidio at gmail.com (=?UTF-8?Q?K=C3=A1tia_Emidio?=)
Date: Thu, 14 Sep 2017 12:03:52 -0400
Subject: [R-sig-Geo] [FORGED]  circular spatial polygon
In-Reply-To: <58f95e81-43ab-ee38-68b3-dd7c51896ef1@auckland.ac.nz>
References: <CABFLJOmjC72tBC3kZDxjE1-Mkx3ThZ5cEzL4CC_V9NP3YPTOsg@mail.gmail.com>
 <1d336cbd-3257-9a72-148d-eb3391b8d1d5@auckland.ac.nz>
 <CABFLJO=buiE_9m7Zs-33G6Wo7ado9cuG16+BEss-4HNvLimqtg@mail.gmail.com>
 <d09a9b7e-0a05-679a-942d-90bf4441415e@auckland.ac.nz>
 <58f95e81-43ab-ee38-68b3-dd7c51896ef1@auckland.ac.nz>
Message-ID: <CABFLJOmkDws2bKJRNNbCK4RZ22DyN1vNhU8tZ8oquvZh_DgyzA@mail.gmail.com>

Dear Rolf,
Thanks so much for your help! The script worked well, as I wanted. Only
thing that is need to correct, in order to have it in a projected world (in
my case UTM-zone 20S), is to change one of the values associated to object
"cntr"... the coordinates are the same in the above code.... changing to
X/Y UTM coordinates, everthing worked well!
Thanks!!

Katia




2017-09-13 3:47 GMT-04:00 Rolf Turner <r.turner at auckland.ac.nz>:

>
> Whoops. I cc-ed my message to r-help rather than to r-sig-geo.  (Duhhhh!)
>
> Consequently I'm resending, with r-sig-geo as a cc recipient.
>
> cheers,
>
> Rolf Turner
>
> --
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> On 13/09/17 19:37, Rolf Turner wrote:
>
>> On 13/09/17 13:24, K?tia Emidio wrote:
>>
>>> Dear Rolf,
>>>
>>> Thanks for your help!
>>>
>>> What I need is a spatial window with shape equal to the figure attached.
>>> This figure I made using ArcGis, but it is important to me make it in R.
>>> After having this figure I will make some analysis using spatstat among
>>> others. The points within figure are trees...
>>>
>>
>> (1) I believe that this discussion should be kept on-list.  It is not my
>> role to provide private consulting for you.  I  am therefore cc-ing the
>> list in this email.
>>
>> (2) It is still not completely clear what you really want; the figure
>> that you attached appears to be a disc with 4 diameters superimposed. So
>> you might be after a single (circular) owin object and a line segment
>> pattern consisting of the 4 diameters.  Or you might be after *eight* owin
>> objects, each being one the eight disc-segments into which the diameters
>> divide the disc.
>>
>> I shall assume the latter.  To start with define a function, say "wedge":
>>
>> wedge <- function(theta1,theta2,radius,npoly=100,centre=c(0,0)){
>>      library(spatstat)
>> # Should do some checking on the values of theta1 and theta2 here,
>> # but I shan't bother.
>>      theta <- seq(theta1,theta2,length=npoly+1)
>>      x <- c(0,radius*cos(theta),0)
>>      y <- c(0,radius*sin(theta),0)
>>      W <- owin(poly=list(x=x,y=y))
>>      return(affine(W,vec=centre))
>> }
>>
>> Then do something like:
>>
>> wedgies <- vector("list",length=8)
>> cntr <- c(673593.21,673593.21)
>> for(i in 1:8) wedgies[[i]] <- wedge((i-1)*pi/4,i*pi/4,15,centre=cntr)
>> ttt <- tess(tiles=wedgies)
>> plot(ttt) # Looks OK to me.
>>
>> And maybe also do:
>>
>> W <- do.call(union.owin,wedgies)
>> plot(W)
>> for(i in 1:8) {
>>      plot(wedgies[[i]],add=TRUE,border="red")
>>      readline("Go? ")
>> }
>>
>> Also looks OK to me.
>>
>> Is *this* what you want?
>>
>


-- 
K?tia Em?dio da Silva DSc
Eng. Florestal
Manaus/AM



Forestry Engineer
Manaus/AM-Brazil

	[[alternative HTML version deleted]]


From alobolistas at gmail.com  Fri Sep 15 07:50:45 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Fri, 15 Sep 2017 07:50:45 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <alpine.LFD.2.21.1709140910130.21897@reclus.nhh.no>
References: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
 <alpine.LFD.2.21.1709131403480.25476@reclus.nhh.no>
 <alpine.LFD.2.21.1709140910130.21897@reclus.nhh.no>
Message-ID: <CAG4NReKuU+KMHk8bcogBOEvESZwoUDV2Ac9y8NsXUexqk9HZ4Q@mail.gmail.com>

I'm now very confused. It seems to me, in line with what you say, that
I had 2 different
kinds of problems:
- Those derived from upgrading from Debian Stretch to Buster (a
consequence of keeping the system as Debian testing: it is just the
consequence of testing passing from Stretch to Buster as
Stretch becomes Stable) and keeping some older versions of different
components (probably installed by packages outside Debian repos). I
guess these problems have been fixed (although I still do not
understand why the rgdal installation claims I have PROJ4.8, which I
cannot find in my system).
- Those derived from Debian packages having been compiled with
different and incompatible options. This is something I cannot fix
myself.

Therefore:

- I will go on compiling myself as Roger suggests to regain an
operational system.
- I will try to test on a fresh Buster system (or a docker, which I
will have to find out what it is...)
- I will report to r-sig-debian and gdal-dev (please suggest an
alternative gdal linst if
gdal-dev is not appropriate).

I'll keep this list informed.

Thanks!

Agus







On Thu, Sep 14, 2017 at 9:26 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> As Edzer said earlier in this thread (and Agus was quite right to post
> rather than contact me directly), reproducing the problem(s) is hard without
> access to the specific platform (thread started here):
>
> https://stat.ethz.ch/pipermail/r-sig-geo/2017-September/025974.html
>
> My guesses so far are that the gcc build trains used for R, and for the
> GDAL/PROJ.4 components are not the same, and may not be the same as the
> installed gcc build train used to install rgdal from source. This probably
> also affects sf on debian buster (and ubuntu?). It may also affect
> GEOS/rgeos.
>
> The gcc versions do change as platforms are upgraded, so for anything using
> C++, the ABI changes will bite hard, and keeping the compiler versions in
> harmony is crucial. The baseline comparison is to install GDAL and its
> dependencies (including PROJ.4) from source (download and unpack source
> tarball, ./configure && make && make install), then probably R from source,
> finally rgdal. This has to work, but unpicks the debian/ubuntu packaging
> system on which many rely.
>
> Please also consider taking this up on r-sig-debian, with a reproducible
> example, best in a docker container.
>
> A further thought is that the most frequent cause of trouble on
> debian/ubuntu previously were multiple installs of different versions of
> GDAL, pulled in by different downstream packages, but the current reports do
> not suggest this as the cause. Still worth checking, though ...
>
> Roger
>
>
> On Wed, 13 Sep 2017, Roger Bivand wrote:
>
>> On Wed, 13 Sep 2017, Agustin Lobo wrote:
>>
>>> The problem seems to be related to the compiler. I had:
>>> gcc version 5.3.1 20160101 (Debian 5.3.1-5)
>>>
>>> I have now:
>>> gcc version 7.2.0 (Debian 7.2.0-4)
>>>
>>> All weird previus errors are gone but I still have:
>>> configure: PROJ.4 version: 4.8.0
>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>> checking PROJ.4: epsg found and readable... yes
>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>
>>> and finally
>>>
>>> ** testing if installed package can be loaded
>>> Fatal error: glibc detected an invalid stdio handle
>>> Aborted
>>> ERROR: loading failed
>>> * removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?
>>>
>>> Surprisingly,  I do have 4.9 installed, not 4.8:
>>>
>>> $ dpkg -s proj-bin
>>> Package: proj-bin
>>> Status: install ok installed
>>> Priority: optional
>>> Section: science
>>> Installed-Size: 125
>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>> Architecture: i386
>>> Source: proj
>>> Version: 4.9.3-2
>>>
>>> and
>>> $ proj
>>> Rel. 4.9.3, 15 August 2016
>>> usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>>>
>>> and I cannot find proj_conf_test anywhere:
>>> $ sudo find / -name 'proj_conf_test'
>>> gives no result
>>>
>>> How is the test ./proj_conf_test done so that I can investigate why it
>>> results into PROJ 4.8 instead of 4.9?
>>
>>
>> It is defined in rgdal/configure.ac (line 273 ff.):
>>
>> if test ${proj_version} -ge 480; then
>> [cat > proj_conf_test.c <<_EOCONF
>> #include <stdio.h>
>> #include <proj_api.h>
>> #if PJ_VERSION == 480
>> FILE *pj_open_lib(projCtx, const char *, const char *);
>> #endif
>>
>> int main() {
>> #if PJ_VERSION <= 480
>>    FILE *fp;
>> #else
>>    PAFile fp;
>> #endif
>>    projCtx ctx;
>>    ctx = pj_get_default_ctx();
>>    fp = pj_open_lib(ctx, "epsg", "rb");
>>    if (fp == NULL) exit(1);
>> #if PJ_VERSION <= 480
>>    fclose(fp);
>> #else
>>    pj_ctx_fclose(ctx, fp);
>> #endif
>>    exit(0);
>> }
>> _EOCONF]
>> else
>> [cat > proj_conf_test.c <<_EOCONF
>> #include <stdio.h>
>> #include <proj_api.h>
>> FILE *pj_open_lib(const char *, const char *);
>>
>> int main() {
>>    FILE *fp;
>>    fp = pj_open_lib("epsg", "rb");
>>    if (fp == NULL) exit(1);
>>    fclose(fp);
>>    exit(0);
>> }
>> _EOCONF]
>> fi
>>
>> and checks that the crucial epsg file is present. It does seem to run,
>> though, which is puzzling - if you read configure.ac, you'll see that I
>> didn't guard against the previous (different) ./proj_conf_test already
>> existing - I'll revise the test names to avoid such false positives in the
>> future.
>>
>> Roger
>>
>>>
>>> Thanks
>>>
>>> Agus
>>>
>>>
>>>
>>> On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>> wrote:
>>>>
>>>> $ g++ -v
>>>> ...
>>>> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>>>>
>>>> in my case on Fedora 26.
>>>>
>>>> Recent versions should be OK, but < 5 may be problematic. If you have
>>>> upgraded in place but not upgraded the compile trains, installing r-base
>>>> will not force that.
>>>>
>>>>
>>>>
>>>
>>
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Fri Sep 15 09:16:24 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 15 Sep 2017 09:16:24 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAF7OBP-FkaJiW7s+A2hhbgiP_pjt0NtFyAiC7TrZgctCTf_LtQ@mail.gmail.com>
References: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
 <alpine.LFD.2.21.1709131403480.25476@reclus.nhh.no>
 <alpine.LFD.2.21.1709140910130.21897@reclus.nhh.no>
 <CAF7OBP-FkaJiW7s+A2hhbgiP_pjt0NtFyAiC7TrZgctCTf_LtQ@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709150915290.28667@reclus.nhh.no>

Forwarded to list, as Xavier is not subscribed.

Roger

On Thu, 14 Sep 2017, Xavier Prudent wrote:

> Dear all,
>
> I had to recreate the /etc/source.list
> and could then install homebrew and hence gdal, hence rgdal,
>
> that was quite a ride :) but it worked!
>
> Thank you for your help!
>
> Greetings,
>
> Xavier Prudent
>
> 2017-09-14 3:26 GMT-04:00 Roger Bivand <Roger.Bivand at nhh.no>:
>
>> As Edzer said earlier in this thread (and Agus was quite right to post
>> rather than contact me directly), reproducing the problem(s) is hard
>> without access to the specific platform (thread started here):
>>
>> https://stat.ethz.ch/pipermail/r-sig-geo/2017-September/025974.html
>>
>> My guesses so far are that the gcc build trains used for R, and for the
>> GDAL/PROJ.4 components are not the same, and may not be the same as the
>> installed gcc build train used to install rgdal from source. This probably
>> also affects sf on debian buster (and ubuntu?). It may also affect
>> GEOS/rgeos.
>>
>> The gcc versions do change as platforms are upgraded, so for anything
>> using C++, the ABI changes will bite hard, and keeping the compiler
>> versions in harmony is crucial. The baseline comparison is to install GDAL
>> and its dependencies (including PROJ.4) from source (download and unpack
>> source tarball, ./configure && make && make install), then probably R from
>> source, finally rgdal. This has to work, but unpicks the debian/ubuntu
>> packaging system on which many rely.
>>
>> Please also consider taking this up on r-sig-debian, with a reproducible
>> example, best in a docker container.
>>
>> A further thought is that the most frequent cause of trouble on
>> debian/ubuntu previously were multiple installs of different versions of
>> GDAL, pulled in by different downstream packages, but the current reports
>> do not suggest this as the cause. Still worth checking, though ...
>>
>> Roger
>>
>> On Wed, 13 Sep 2017, Roger Bivand wrote:
>>
>> On Wed, 13 Sep 2017, Agustin Lobo wrote:
>>>
>>> The problem seems to be related to the compiler. I had:
>>>> gcc version 5.3.1 20160101 (Debian 5.3.1-5)
>>>>
>>>> I have now:
>>>> gcc version 7.2.0 (Debian 7.2.0-4)
>>>>
>>>> All weird previus errors are gone but I still have:
>>>> configure: PROJ.4 version: 4.8.0
>>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>>> checking PROJ.4: epsg found and readable... yes
>>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>>
>>>> and finally
>>>>
>>>> ** testing if installed package can be loaded
>>>> Fatal error: glibc detected an invalid stdio handle
>>>> Aborted
>>>> ERROR: loading failed
>>>> * removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?
>>>>
>>>> Surprisingly,  I do have 4.9 installed, not 4.8:
>>>>
>>>> $ dpkg -s proj-bin
>>>> Package: proj-bin
>>>> Status: install ok installed
>>>> Priority: optional
>>>> Section: science
>>>> Installed-Size: 125
>>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>>> Architecture: i386
>>>> Source: proj
>>>> Version: 4.9.3-2
>>>>
>>>> and
>>>> $ proj
>>>> Rel. 4.9.3, 15 August 2016
>>>> usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>>>>
>>>> and I cannot find proj_conf_test anywhere:
>>>> $ sudo find / -name 'proj_conf_test'
>>>> gives no result
>>>>
>>>> How is the test ./proj_conf_test done so that I can investigate why it
>>>> results into PROJ 4.8 instead of 4.9?
>>>>
>>>
>>> It is defined in rgdal/configure.ac (line 273 ff.):
>>>
>>> if test ${proj_version} -ge 480; then
>>> [cat > proj_conf_test.c <<_EOCONF
>>> #include <stdio.h>
>>> #include <proj_api.h>
>>> #if PJ_VERSION == 480
>>> FILE *pj_open_lib(projCtx, const char *, const char *);
>>> #endif
>>>
>>> int main() {
>>> #if PJ_VERSION <= 480
>>>    FILE *fp;
>>> #else
>>>    PAFile fp;
>>> #endif
>>>    projCtx ctx;
>>>    ctx = pj_get_default_ctx();
>>>    fp = pj_open_lib(ctx, "epsg", "rb");
>>>    if (fp == NULL) exit(1);
>>> #if PJ_VERSION <= 480
>>>    fclose(fp);
>>> #else
>>>    pj_ctx_fclose(ctx, fp);
>>> #endif
>>>    exit(0);
>>> }
>>> _EOCONF]
>>> else
>>> [cat > proj_conf_test.c <<_EOCONF
>>> #include <stdio.h>
>>> #include <proj_api.h>
>>> FILE *pj_open_lib(const char *, const char *);
>>>
>>> int main() {
>>>    FILE *fp;
>>>    fp = pj_open_lib("epsg", "rb");
>>>    if (fp == NULL) exit(1);
>>>    fclose(fp);
>>>    exit(0);
>>> }
>>> _EOCONF]
>>> fi
>>>
>>> and checks that the crucial epsg file is present. It does seem to run,
>>> though, which is puzzling - if you read configure.ac, you'll see that I
>>> didn't guard against the previous (different) ./proj_conf_test already
>>> existing - I'll revise the test names to avoid such false positives in the
>>> future.
>>>
>>> Roger
>>>
>>>
>>>> Thanks
>>>>
>>>> Agus
>>>>
>>>>
>>>>
>>>> On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>> wrote:
>>>>
>>>>> $ g++ -v
>>>>> ...
>>>>> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>>>>> <https://maps.google.com/?q=.1.1-3)+(GCC)&entry=gmail&source=g>
>>>>>
>>>>> in my case on Fedora 26.
>>>>>
>>>>> Recent versions should be OK, but < 5 may be problematic. If you have
>>>>> upgraded in place but not upgraded the compile trains, installing r-base
>>>>> will not force that.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
>
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From Roger.Bivand at nhh.no  Fri Sep 15 09:32:35 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 15 Sep 2017 09:32:35 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReKuU+KMHk8bcogBOEvESZwoUDV2Ac9y8NsXUexqk9HZ4Q@mail.gmail.com>
References: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
 <alpine.LFD.2.21.1709131403480.25476@reclus.nhh.no>
 <alpine.LFD.2.21.1709140910130.21897@reclus.nhh.no>
 <CAG4NReKuU+KMHk8bcogBOEvESZwoUDV2Ac9y8NsXUexqk9HZ4Q@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709150926200.28667@reclus.nhh.no>

On Fri, 15 Sep 2017, Agustin Lobo wrote:

> I'm now very confused. It seems to me, in line with what you say, that
> I had 2 different
> kinds of problems:
> - Those derived from upgrading from Debian Stretch to Buster (a
> consequence of keeping the system as Debian testing: it is just the
> consequence of testing passing from Stretch to Buster as
> Stretch becomes Stable) and keeping some older versions of different
> components (probably installed by packages outside Debian repos). I
> guess these problems have been fixed (although I still do not
> understand why the rgdal installation claims I have PROJ4.8, which I
> cannot find in my system).

Please see whether there are multiple proj_api.h files on your system - if 
so, rgdal is picking up the first in your search path, but may link 
against a later *.so, explaining the crashes during the configure run.

> - Those derived from Debian packages having been compiled with
> different and incompatible options. This is something I cannot fix
> myself.
>
> Therefore:
>
> - I will go on compiling myself as Roger suggests to regain an
> operational system.
> - I will try to test on a fresh Buster system (or a docker, which I
> will have to find out what it is...)

https://github.com/rocker-org/rocker
http://dirk.eddelbuettel.com/papers/useR2015_docker.pdf

for example.

> - I will report to r-sig-debian and gdal-dev (please suggest an
> alternative gdal linst if
> gdal-dev is not appropriate).
>

(please keep your heads covered as GEOS and GDAL transition to requiring 
>= C++11 ...) Yes, at this stage sharing information is valuable so that 
others can learn from hard-won experience.

Roger

> I'll keep this list informed.
>
> Thanks!
>
> Agus
>
>
>
>
>
>
>
> On Thu, Sep 14, 2017 at 9:26 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> As Edzer said earlier in this thread (and Agus was quite right to post
>> rather than contact me directly), reproducing the problem(s) is hard without
>> access to the specific platform (thread started here):
>>
>> https://stat.ethz.ch/pipermail/r-sig-geo/2017-September/025974.html
>>
>> My guesses so far are that the gcc build trains used for R, and for the
>> GDAL/PROJ.4 components are not the same, and may not be the same as the
>> installed gcc build train used to install rgdal from source. This probably
>> also affects sf on debian buster (and ubuntu?). It may also affect
>> GEOS/rgeos.
>>
>> The gcc versions do change as platforms are upgraded, so for anything using
>> C++, the ABI changes will bite hard, and keeping the compiler versions in
>> harmony is crucial. The baseline comparison is to install GDAL and its
>> dependencies (including PROJ.4) from source (download and unpack source
>> tarball, ./configure && make && make install), then probably R from source,
>> finally rgdal. This has to work, but unpicks the debian/ubuntu packaging
>> system on which many rely.
>>
>> Please also consider taking this up on r-sig-debian, with a reproducible
>> example, best in a docker container.
>>
>> A further thought is that the most frequent cause of trouble on
>> debian/ubuntu previously were multiple installs of different versions of
>> GDAL, pulled in by different downstream packages, but the current reports do
>> not suggest this as the cause. Still worth checking, though ...
>>
>> Roger
>>
>>
>> On Wed, 13 Sep 2017, Roger Bivand wrote:
>>
>>> On Wed, 13 Sep 2017, Agustin Lobo wrote:
>>>
>>>> The problem seems to be related to the compiler. I had:
>>>> gcc version 5.3.1 20160101 (Debian 5.3.1-5)
>>>>
>>>> I have now:
>>>> gcc version 7.2.0 (Debian 7.2.0-4)
>>>>
>>>> All weird previus errors are gone but I still have:
>>>> configure: PROJ.4 version: 4.8.0
>>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>>> checking PROJ.4: epsg found and readable... yes
>>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>>
>>>> and finally
>>>>
>>>> ** testing if installed package can be loaded
>>>> Fatal error: glibc detected an invalid stdio handle
>>>> Aborted
>>>> ERROR: loading failed
>>>> * removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?
>>>>
>>>> Surprisingly,  I do have 4.9 installed, not 4.8:
>>>>
>>>> $ dpkg -s proj-bin
>>>> Package: proj-bin
>>>> Status: install ok installed
>>>> Priority: optional
>>>> Section: science
>>>> Installed-Size: 125
>>>> Maintainer: Debian GIS Project <pkg-grass-devel at lists.alioth.debian.org>
>>>> Architecture: i386
>>>> Source: proj
>>>> Version: 4.9.3-2
>>>>
>>>> and
>>>> $ proj
>>>> Rel. 4.9.3, 15 August 2016
>>>> usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>>>>
>>>> and I cannot find proj_conf_test anywhere:
>>>> $ sudo find / -name 'proj_conf_test'
>>>> gives no result
>>>>
>>>> How is the test ./proj_conf_test done so that I can investigate why it
>>>> results into PROJ 4.8 instead of 4.9?
>>>
>>>
>>> It is defined in rgdal/configure.ac (line 273 ff.):
>>>
>>> if test ${proj_version} -ge 480; then
>>> [cat > proj_conf_test.c <<_EOCONF
>>> #include <stdio.h>
>>> #include <proj_api.h>
>>> #if PJ_VERSION == 480
>>> FILE *pj_open_lib(projCtx, const char *, const char *);
>>> #endif
>>>
>>> int main() {
>>> #if PJ_VERSION <= 480
>>>    FILE *fp;
>>> #else
>>>    PAFile fp;
>>> #endif
>>>    projCtx ctx;
>>>    ctx = pj_get_default_ctx();
>>>    fp = pj_open_lib(ctx, "epsg", "rb");
>>>    if (fp == NULL) exit(1);
>>> #if PJ_VERSION <= 480
>>>    fclose(fp);
>>> #else
>>>    pj_ctx_fclose(ctx, fp);
>>> #endif
>>>    exit(0);
>>> }
>>> _EOCONF]
>>> else
>>> [cat > proj_conf_test.c <<_EOCONF
>>> #include <stdio.h>
>>> #include <proj_api.h>
>>> FILE *pj_open_lib(const char *, const char *);
>>>
>>> int main() {
>>>    FILE *fp;
>>>    fp = pj_open_lib("epsg", "rb");
>>>    if (fp == NULL) exit(1);
>>>    fclose(fp);
>>>    exit(0);
>>> }
>>> _EOCONF]
>>> fi
>>>
>>> and checks that the crucial epsg file is present. It does seem to run,
>>> though, which is puzzling - if you read configure.ac, you'll see that I
>>> didn't guard against the previous (different) ./proj_conf_test already
>>> existing - I'll revise the test names to avoid such false positives in the
>>> future.
>>>
>>> Roger
>>>
>>>>
>>>> Thanks
>>>>
>>>> Agus
>>>>
>>>>
>>>>
>>>> On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>> wrote:
>>>>>
>>>>> $ g++ -v
>>>>> ...
>>>>> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>>>>>
>>>>> in my case on Fedora 26.
>>>>>
>>>>> Recent versions should be OK, but < 5 may be problematic. If you have
>>>>> upgraded in place but not upgraded the compile trains, installing r-base
>>>>> will not force that.
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From rvaldezr at gmail.com  Fri Sep 15 18:45:59 2017
From: rvaldezr at gmail.com (Rolando Valdez)
Date: Fri, 15 Sep 2017 11:45:59 -0500
Subject: [R-sig-Geo] How to order statistical data (spatial panel)
Message-ID: <CAFvJtoHnwOqtd8oWj_P3sfLRAX-uCHgGhDTi8Hr8TgDJkT++-w@mail.gmail.com>

Hello all,

I will to perform a spatial panel data, I have statistical data of 2000+
territories in 5 years ordered as typical simple panel data (Each
territoriy has a unique geocode).

In the other hand I have a shapefile with those 2000+ territories, but,
when I've opened the dbf file, the order of units seems to have not order
criteria. These ones have geocode too (same than statistical).

The question is, how should I order my data to garantee a right matching
between statistical and geographical data?

-- 
Rol~

	[[alternative HTML version deleted]]


From jean-luc.dupouey at inra.fr  Sat Sep 16 13:52:36 2017
From: jean-luc.dupouey at inra.fr (Jean-Luc Dupouey)
Date: Sat, 16 Sep 2017 13:52:36 +0200
Subject: [R-sig-Geo] st_area / st_transform / crs
Message-ID: <0a90ea87-847d-f1ea-70f1-43741b6672dc@inra.fr>

Dear all,

I am a new user of sf. I have the following error:

"lay" is an sf object, composed of POLYGONS and MULTIPOLYGONS in a 
projected coordinates system.

 > st_area(lay)  # works well and returns the area of polygons

 > # convert to WGS
 > laywgs = st_transform(lay, 4326)

 > st_area(laywgs)
Error in as_Spatial(from) :
   conversion from feature type sfc_GEOMETRY to sp is not supported

Why st_area works on the projected layer and not on the 
latitude/longitude layer? I read carefully the manual and did not find 
any clue. It is just told that for unprojected geometries, st_area uses 
areaPolygon. Well... it means that some conversion probably takes place, 
but there is no information about this conversion.

Thank you advance for your help,

Jean-Luc Dupouey

-- 
INRA
Forest Ecology and Ecophysiology Unit
F-54280 Champenoux
France


From edzer.pebesma at uni-muenster.de  Sat Sep 16 14:19:38 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 16 Sep 2017 14:19:38 +0200
Subject: [R-sig-Geo] st_area / st_transform / crs
In-Reply-To: <0a90ea87-847d-f1ea-70f1-43741b6672dc@inra.fr>
References: <0a90ea87-847d-f1ea-70f1-43741b6672dc@inra.fr>
Message-ID: <6204ed1a-a62c-a491-61f8-ee4e3d20357d@uni-muenster.de>



On 16/09/17 13:52, Jean-Luc Dupouey wrote:
> Dear all,
> 
> I am a new user of sf. I have the following error:
> 
> "lay" is an sf object, composed of POLYGONS and MULTIPOLYGONS in a
> projected coordinates system.
> 
>> st_area(lay)  # works well and returns the area of polygons
> 
>> # convert to WGS
>> laywgs = st_transform(lay, 4326)
> 
>> st_area(laywgs)
> Error in as_Spatial(from) :
>   conversion from feature type sfc_GEOMETRY to sp is not supported
> 
> Why st_area works on the projected layer and not on the
> latitude/longitude layer? I read carefully the manual and did not find
> any clue. It is just told that for unprojected geometries, st_area uses
> areaPolygon. Well... it means that some conversion probably takes place,
> but there is no information about this conversion.

If you then would read the documentation of geosphere::areaPolygon, you
can read that it needs sp objects as its input; sf converts to Spatial
(sp), then calls areaPolygon on that object.

try

laywgs = st_transform(st_cast(lay, "MULTIPOLYGON"), 4326)

to make this conversion less painful.

> 
> Thank you advance for your help,

Thanks for bringing this up - I understand it is confusing, and we might
be able to make this simpler from the sf side.

> 
> Jean-Luc Dupouey
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170916/b0ffbe37/attachment.sig>

From eduardodiez at gmx.com  Sat Sep 16 15:20:08 2017
From: eduardodiez at gmx.com (Eduardo Diez)
Date: Sat, 16 Sep 2017 10:20:08 -0300
Subject: [R-sig-Geo] Compile sf in windows with liblwgeom
Message-ID: <CANK5cGy0sUGisKg8O-6e9Qqbm8uskeauJVV-GqWFKf2tdo96sQ@mail.gmail.com>

Dear list,
I have a MULTIPOLYGON geometry set where the rings are in the wrong
direction and would like to correct that with *st_make_valid*. As I'm in
Windows and use the binary version of the *sf* package it gives me the
error:

> sp2 = st_make_valid(sp1)
Error in CPL_make_valid(x) :
  st_make_valid requires compilation against liblwgeom

Is there a series of steps I can follow for compiling *sf* in Windows
linked to liblwgeom?

Thanks

	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Sat Sep 16 16:45:06 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 16 Sep 2017 16:45:06 +0200
Subject: [R-sig-Geo] Compile sf in windows with liblwgeom
In-Reply-To: <CANK5cGy0sUGisKg8O-6e9Qqbm8uskeauJVV-GqWFKf2tdo96sQ@mail.gmail.com>
References: <CANK5cGy0sUGisKg8O-6e9Qqbm8uskeauJVV-GqWFKf2tdo96sQ@mail.gmail.com>
Message-ID: <4ae64f7f-f65b-bde5-c2f0-c2972cc872dd@uni-muenster.de>



On 16/09/17 15:20, Eduardo Diez wrote:
> Dear list,
> I have a MULTIPOLYGON geometry set where the rings are in the wrong
> direction and would like to correct that with *st_make_valid*. As I'm in
> Windows and use the binary version of the *sf* package it gives me the
> error:
> 
>> sp2 = st_make_valid(sp1)
> Error in CPL_make_valid(x) :
>   st_make_valid requires compilation against liblwgeom
> 
> Is there a series of steps I can follow for compiling *sf* in Windows
> linked to liblwgeom?

No, and I also don't think that st_make_valid does this.

Converting to sp and back, like

st_as_sf(as(sp1, "Spatial"))

might do the trick, though.

> 
> Thanks
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170916/c3b52cbb/attachment.sig>

From b.rowlingson at lancaster.ac.uk  Sat Sep 16 18:22:33 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 16 Sep 2017 17:22:33 +0100
Subject: [R-sig-Geo] Compile sf in windows with liblwgeom
In-Reply-To: <4ae64f7f-f65b-bde5-c2f0-c2972cc872dd@uni-muenster.de>
References: <CANK5cGy0sUGisKg8O-6e9Qqbm8uskeauJVV-GqWFKf2tdo96sQ@mail.gmail.com>
 <4ae64f7f-f65b-bde5-c2f0-c2972cc872dd@uni-muenster.de>
Message-ID: <CANVKczNhFzPXqBdN6wOdhq4G3wLKR2WGzghaO8RcEL6yAYkVjQ@mail.gmail.com>

On Sat, Sep 16, 2017 at 3:45 PM, Edzer Pebesma <
edzer.pebesma at uni-muenster.de> wrote:

>
>
> On 16/09/17 15:20, Eduardo Diez wrote:
> > Dear list,
> > I have a MULTIPOLYGON geometry set where the rings are in the wrong
> > direction and would like to correct that with *st_make_valid*. As I'm in
> > Windows and use the binary version of the *sf* package it gives me the
> > error:
> >
> >> sp2 = st_make_valid(sp1)
> > Error in CPL_make_valid(x) :
> >   st_make_valid requires compilation against liblwgeom
> >
> > Is there a series of steps I can follow for compiling *sf* in Windows
> > linked to liblwgeom?
>
> No, and I also don't think that st_make_valid does this.
>
>
st_make_valid certainly did something:

https://gis.stackexchange.com/questions/254836/sf-lines-to-polygons-with-holes

I've just added an edit to my answer there with the sp-and-back round trip,
which seems to work, but its not exactly the most satisfying solution.

What's the problem with liblwgeom on Windows?

Barry

	[[alternative HTML version deleted]]


From kent3737 at gmail.com  Sat Sep 16 19:02:02 2017
From: kent3737 at gmail.com (Kent Johnson)
Date: Sat, 16 Sep 2017 13:02:02 -0400
Subject: [R-sig-Geo] How to order statistical data (spatial panel)
Message-ID: <CAPP0wyiWOoQzkePZTKw_2Ow8pHJ=rb1TBqA7vnQe4wmBOmSXoQ@mail.gmail.com>

>
>
> Date: Fri, 15 Sep 2017 11:45:59 -0500
> From: Rolando Valdez <rvaldezr at gmail.com>
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] How to order statistical data (spatial panel)
> Message-ID:
>         <CAFvJtoHnwOqtd8oWj_P3sfLRAX-uCHgGhDTi8Hr8TgDJkT++-w at mail.
> gmail.com>
> Content-Type: text/plain; charset="UTF-8"
>
> Hello all,
>
> I will to perform a spatial panel data, I have statistical data of 2000+
> territories in 5 years ordered as typical simple panel data (Each
> territoriy has a unique geocode).
>
> In the other hand I have a shapefile with those 2000+ territories, but,
> when I've opened the dbf file, the order of units seems to have not order
> criteria. These ones have geocode too (same than statistical).
>
> The question is, how should I order my data to garantee a right matching
> between statistical and geographical data?
>

I would think you would do a merge or join of the spatial data with your
statistical data using geocode as the key, rather than a cbind or similar
operation that depends on order. See ?sp::merge or ?sf::merge.sf.

Kent

	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Sun Sep 17 00:07:35 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 17 Sep 2017 00:07:35 +0200
Subject: [R-sig-Geo] Compile sf in windows with liblwgeom
In-Reply-To: <CANVKczNhFzPXqBdN6wOdhq4G3wLKR2WGzghaO8RcEL6yAYkVjQ@mail.gmail.com>
References: <CANK5cGy0sUGisKg8O-6e9Qqbm8uskeauJVV-GqWFKf2tdo96sQ@mail.gmail.com>
 <4ae64f7f-f65b-bde5-c2f0-c2972cc872dd@uni-muenster.de>
 <CANVKczNhFzPXqBdN6wOdhq4G3wLKR2WGzghaO8RcEL6yAYkVjQ@mail.gmail.com>
Message-ID: <1cb1943c-204e-f974-b061-8849acc26824@uni-muenster.de>



On 16/09/17 18:22, Barry Rowlingson wrote:
> 
> 
> On Sat, Sep 16, 2017 at 3:45 PM, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de <mailto:edzer.pebesma at uni-muenster.de>>
> wrote:
> 
> 
> 
>     On 16/09/17 15:20, Eduardo Diez wrote:
>     > Dear list,
>     > I have a MULTIPOLYGON geometry set where the rings are in the wrong
>     > direction and would like to correct that with *st_make_valid*. As I'm in
>     > Windows and use the binary version of the *sf* package it gives me the
>     > error:
>     >
>     >> sp2 = st_make_valid(sp1)
>     > Error in CPL_make_valid(x) :
>     >   st_make_valid requires compilation against liblwgeom
>     >
>     > Is there a series of steps I can follow for compiling *sf* in Windows
>     > linked to liblwgeom?
> 
>     No, and I also don't think that st_make_valid does this.
> 
> 
> st_make_valid certainly did something:
> 
> https://gis.stackexchange.com/questions/254836/sf-lines-to-polygons-with-holes

I only tried a single outer ring in both directions, and it didn't
revert them. Maybe it only reverts if if outer and inner ring have the
same direction.

> 
> I've just added an edit to my answer there with the sp-and-back round
> trip, which seems to work, but its not exactly the most satisfying solution.

It would be fairly trivial to move some of the code to sf - at a
performance penalty if we'd do the check always, like sp does.

> 
> What's the problem with liblwgeom on Windows?

It's not part of the rwinlib collection at https://github.com/rwinlib ;
I'll bring it up with Jeroen next time I see him. lwgeom has more good
things than what sf uses.

> 
> Barry
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170917/e089efe3/attachment.sig>

From edzer.pebesma at uni-muenster.de  Sun Sep 17 14:10:26 2017
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 17 Sep 2017 14:10:26 +0200
Subject: [R-sig-Geo] Compile sf in windows with liblwgeom
In-Reply-To: <1cb1943c-204e-f974-b061-8849acc26824@uni-muenster.de>
References: <CANK5cGy0sUGisKg8O-6e9Qqbm8uskeauJVV-GqWFKf2tdo96sQ@mail.gmail.com>
 <4ae64f7f-f65b-bde5-c2f0-c2972cc872dd@uni-muenster.de>
 <CANVKczNhFzPXqBdN6wOdhq4G3wLKR2WGzghaO8RcEL6yAYkVjQ@mail.gmail.com>
 <1cb1943c-204e-f974-b061-8849acc26824@uni-muenster.de>
Message-ID: <5fc637cd-0051-5376-30a5-c3045a64367a@uni-muenster.de>



On 17/09/17 00:07, Edzer Pebesma wrote:
> 
> 
> On 16/09/17 18:22, Barry Rowlingson wrote:
>>
>>
>> On Sat, Sep 16, 2017 at 3:45 PM, Edzer Pebesma
>> <edzer.pebesma at uni-muenster.de <mailto:edzer.pebesma at uni-muenster.de>>
>> wrote:
>>
>>
>>
>>     On 16/09/17 15:20, Eduardo Diez wrote:
>>     > Dear list,
>>     > I have a MULTIPOLYGON geometry set where the rings are in the wrong
>>     > direction and would like to correct that with *st_make_valid*. As I'm in
>>     > Windows and use the binary version of the *sf* package it gives me the
>>     > error:
>>     >
>>     >> sp2 = st_make_valid(sp1)
>>     > Error in CPL_make_valid(x) :
>>     >   st_make_valid requires compilation against liblwgeom
>>     >
>>     > Is there a series of steps I can follow for compiling *sf* in Windows
>>     > linked to liblwgeom?
>>
>>     No, and I also don't think that st_make_valid does this.
>>
>>
>> st_make_valid certainly did something:
>>
>> https://gis.stackexchange.com/questions/254836/sf-lines-to-polygons-with-holes
> 
> I only tried a single outer ring in both directions, and it didn't
> revert them. Maybe it only reverts if if outer and inner ring have the
> same direction.
> 
>>
>> I've just added an edit to my answer there with the sp-and-back round
>> trip, which seems to work, but its not exactly the most satisfying solution.
> 
> It would be fairly trivial to move some of the code to sf - at a
> performance penalty if we'd do the check always, like sp does.
> 
>>
>> What's the problem with liblwgeom on Windows?
> 
> It's not part of the rwinlib collection at https://github.com/rwinlib ;
> I'll bring it up with Jeroen next time I see him. lwgeom has more good
> things than what sf uses.

liblwgeom is part of the postgis source tree in
https://github.com/postgis/postgis , but when configuring that with

./autogen.sh
./configure --without-pgconfig

liblwgeom becomes the sole build target.

The few dependencies it has (geos, proj, json-c) are, AFAICT, all
already in rwinlib/gdal2

> 
>>
>> Barry
>>
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170917/c6da5b8b/attachment.sig>

From alobolistas at gmail.com  Mon Sep 18 08:35:40 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon, 18 Sep 2017 08:35:40 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <alpine.LFD.2.21.1709150926200.28667@reclus.nhh.no>
References: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
 <alpine.LFD.2.21.1709131403480.25476@reclus.nhh.no>
 <alpine.LFD.2.21.1709140910130.21897@reclus.nhh.no>
 <CAG4NReKuU+KMHk8bcogBOEvESZwoUDV2Ac9y8NsXUexqk9HZ4Q@mail.gmail.com>
 <alpine.LFD.2.21.1709150926200.28667@reclus.nhh.no>
Message-ID: <CAG4NReKNZqkSEDL-fvf_Q_POKdX28m7PR7JopGCiN-dXVL4u3g@mail.gmail.com>

rgdal compiles fine on my Debian Testing (Buster) system by removing
an older pro_api.h file:

1. As suggested by Roger, I located and removed an older version of
proj_api.h taht had not been removed when I removed the older proj4
version:
$ sudo find / -name proj_api.h
/usr/local/include/proj_api.h
/usr/include/proj_api.h
alobo at debi:~$ sudo rm /usr/local/include/proj_api.h

2. Then the rgdal installation goes smoothly;

$ R CMD INSTALL rgdal_1.2-8.tar.gz
.../...
configure: PROJ.4 version: > 4.8.0
.../...

(see https://www.dropbox.com/s/9i8rk74k0vk95uc/rgdal2.log?dl=0 for the
entire output)

3. Then, in R, rgdal loads with no problems

> require(rgdal)
Loading required package: rgdal
Loading required package: sp
rgdal: version: 1.2-8, (SVN revision 663)
 Geospatial Data Abstraction Library extensions to R successfully loaded
 Loaded GDAL runtime: GDAL 2.2.1, released 2017/06/23
 Path to GDAL shared files: /usr/share/gdal/2.2
 Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
 Path to PROJ.4 shared files: (autodetected)
 Linking to sp version: 1.2-5
> sessionInfo()
R version 3.3.3 (2017-03-06)
Platform: i686-pc-linux-gnu (32-bit)
Running under: Debian GNU/Linux buster/sid

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] rgdal_1.2-8 sp_1.2-5

loaded via a namespace (and not attached):
[1] tools_3.3.3     grid_3.3.3      lattice_0.20-35

4. Thus I guess all problems were caused by an old gcc compiler +
leftovers in /usr/local/... directories and that I should
report to gdal-dev and r-sig-debian that there is actually no problem
with versions of R. gfal and proj4 in the Debian testing (Buster)
repos.

Correct?

Agus

On Fri, Sep 15, 2017 at 9:32 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Fri, 15 Sep 2017, Agustin Lobo wrote:
>
>> I'm now very confused. It seems to me, in line with what you say, that
>> I had 2 different
>> kinds of problems:
>> - Those derived from upgrading from Debian Stretch to Buster (a
>> consequence of keeping the system as Debian testing: it is just the
>> consequence of testing passing from Stretch to Buster as
>> Stretch becomes Stable) and keeping some older versions of different
>> components (probably installed by packages outside Debian repos). I
>> guess these problems have been fixed (although I still do not
>> understand why the rgdal installation claims I have PROJ4.8, which I
>> cannot find in my system).
>
>
> Please see whether there are multiple proj_api.h files on your system - if
> so, rgdal is picking up the first in your search path, but may link against
> a later *.so, explaining the crashes during the configure run.
>
>> - Those derived from Debian packages having been compiled with
>> different and incompatible options. This is something I cannot fix
>> myself.
>>
>> Therefore:
>>
>> - I will go on compiling myself as Roger suggests to regain an
>> operational system.
>> - I will try to test on a fresh Buster system (or a docker, which I
>> will have to find out what it is...)
>
>
> https://github.com/rocker-org/rocker
> http://dirk.eddelbuettel.com/papers/useR2015_docker.pdf
>
> for example.
>
>> - I will report to r-sig-debian and gdal-dev (please suggest an
>> alternative gdal linst if
>> gdal-dev is not appropriate).
>>
>
> (please keep your heads covered as GEOS and GDAL transition to requiring
>>
>> = C++11 ...) Yes, at this stage sharing information is valuable so that
>
> others can learn from hard-won experience.
>
> Roger
>
>
>> I'll keep this list informed.
>>
>> Thanks!
>>
>> Agus
>>
>>
>>
>>
>>
>>
>>
>> On Thu, Sep 14, 2017 at 9:26 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>
>>> As Edzer said earlier in this thread (and Agus was quite right to post
>>> rather than contact me directly), reproducing the problem(s) is hard
>>> without
>>> access to the specific platform (thread started here):
>>>
>>> https://stat.ethz.ch/pipermail/r-sig-geo/2017-September/025974.html
>>>
>>> My guesses so far are that the gcc build trains used for R, and for the
>>> GDAL/PROJ.4 components are not the same, and may not be the same as the
>>> installed gcc build train used to install rgdal from source. This
>>> probably
>>> also affects sf on debian buster (and ubuntu?). It may also affect
>>> GEOS/rgeos.
>>>
>>> The gcc versions do change as platforms are upgraded, so for anything
>>> using
>>> C++, the ABI changes will bite hard, and keeping the compiler versions in
>>> harmony is crucial. The baseline comparison is to install GDAL and its
>>> dependencies (including PROJ.4) from source (download and unpack source
>>> tarball, ./configure && make && make install), then probably R from
>>> source,
>>> finally rgdal. This has to work, but unpicks the debian/ubuntu packaging
>>> system on which many rely.
>>>
>>> Please also consider taking this up on r-sig-debian, with a reproducible
>>> example, best in a docker container.
>>>
>>> A further thought is that the most frequent cause of trouble on
>>> debian/ubuntu previously were multiple installs of different versions of
>>> GDAL, pulled in by different downstream packages, but the current reports
>>> do
>>> not suggest this as the cause. Still worth checking, though ...
>>>
>>> Roger
>>>
>>>
>>> On Wed, 13 Sep 2017, Roger Bivand wrote:
>>>
>>>> On Wed, 13 Sep 2017, Agustin Lobo wrote:
>>>>
>>>>> The problem seems to be related to the compiler. I had:
>>>>> gcc version 5.3.1 20160101 (Debian 5.3.1-5)
>>>>>
>>>>> I have now:
>>>>> gcc version 7.2.0 (Debian 7.2.0-4)
>>>>>
>>>>> All weird previus errors are gone but I still have:
>>>>> configure: PROJ.4 version: 4.8.0
>>>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>>>> checking PROJ.4: epsg found and readable... yes
>>>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>>>
>>>>> and finally
>>>>>
>>>>> ** testing if installed package can be loaded
>>>>> Fatal error: glibc detected an invalid stdio handle
>>>>> Aborted
>>>>> ERROR: loading failed
>>>>> * removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?
>>>>>
>>>>> Surprisingly,  I do have 4.9 installed, not 4.8:
>>>>>
>>>>> $ dpkg -s proj-bin
>>>>> Package: proj-bin
>>>>> Status: install ok installed
>>>>> Priority: optional
>>>>> Section: science
>>>>> Installed-Size: 125
>>>>> Maintainer: Debian GIS Project
>>>>> <pkg-grass-devel at lists.alioth.debian.org>
>>>>> Architecture: i386
>>>>> Source: proj
>>>>> Version: 4.9.3-2
>>>>>
>>>>> and
>>>>> $ proj
>>>>> Rel. 4.9.3, 15 August 2016
>>>>> usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>>>>>
>>>>> and I cannot find proj_conf_test anywhere:
>>>>> $ sudo find / -name 'proj_conf_test'
>>>>> gives no result
>>>>>
>>>>> How is the test ./proj_conf_test done so that I can investigate why it
>>>>> results into PROJ 4.8 instead of 4.9?
>>>>
>>>>
>>>>
>>>> It is defined in rgdal/configure.ac (line 273 ff.):
>>>>
>>>> if test ${proj_version} -ge 480; then
>>>> [cat > proj_conf_test.c <<_EOCONF
>>>> #include <stdio.h>
>>>> #include <proj_api.h>
>>>> #if PJ_VERSION == 480
>>>> FILE *pj_open_lib(projCtx, const char *, const char *);
>>>> #endif
>>>>
>>>> int main() {
>>>> #if PJ_VERSION <= 480
>>>>    FILE *fp;
>>>> #else
>>>>    PAFile fp;
>>>> #endif
>>>>    projCtx ctx;
>>>>    ctx = pj_get_default_ctx();
>>>>    fp = pj_open_lib(ctx, "epsg", "rb");
>>>>    if (fp == NULL) exit(1);
>>>> #if PJ_VERSION <= 480
>>>>    fclose(fp);
>>>> #else
>>>>    pj_ctx_fclose(ctx, fp);
>>>> #endif
>>>>    exit(0);
>>>> }
>>>> _EOCONF]
>>>> else
>>>> [cat > proj_conf_test.c <<_EOCONF
>>>> #include <stdio.h>
>>>> #include <proj_api.h>
>>>> FILE *pj_open_lib(const char *, const char *);
>>>>
>>>> int main() {
>>>>    FILE *fp;
>>>>    fp = pj_open_lib("epsg", "rb");
>>>>    if (fp == NULL) exit(1);
>>>>    fclose(fp);
>>>>    exit(0);
>>>> }
>>>> _EOCONF]
>>>> fi
>>>>
>>>> and checks that the crucial epsg file is present. It does seem to run,
>>>> though, which is puzzling - if you read configure.ac, you'll see that I
>>>> didn't guard against the previous (different) ./proj_conf_test already
>>>> existing - I'll revise the test names to avoid such false positives in
>>>> the
>>>> future.
>>>>
>>>> Roger
>>>>
>>>>>
>>>>> Thanks
>>>>>
>>>>> Agus
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>> wrote:
>>>>>>
>>>>>>
>>>>>> $ g++ -v
>>>>>> ...
>>>>>> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>>>>>>
>>>>>> in my case on Fedora 26.
>>>>>>
>>>>>> Recent versions should be OK, but < 5 may be problematic. If you have
>>>>>> upgraded in place but not upgraded the compile trains, installing
>>>>>> r-base
>>>>>> will not force that.
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> Editor-in-Chief of The R Journal,
>>> https://journal.r-project.org/index.html
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Mon Sep 18 09:34:18 2017
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 18 Sep 2017 09:34:18 +0200
Subject: [R-sig-Geo] Errors at installing rgdal on Debian Buster
In-Reply-To: <CAG4NReKNZqkSEDL-fvf_Q_POKdX28m7PR7JopGCiN-dXVL4u3g@mail.gmail.com>
References: <CAG4NReLj383NCZDNeXay4dwEkwPYoF81g5seBGr9=bNoLpuj0w@mail.gmail.com>
 <alpine.LFD.2.21.1709131403480.25476@reclus.nhh.no>
 <alpine.LFD.2.21.1709140910130.21897@reclus.nhh.no>
 <CAG4NReKuU+KMHk8bcogBOEvESZwoUDV2Ac9y8NsXUexqk9HZ4Q@mail.gmail.com>
 <alpine.LFD.2.21.1709150926200.28667@reclus.nhh.no>
 <CAG4NReKNZqkSEDL-fvf_Q_POKdX28m7PR7JopGCiN-dXVL4u3g@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1709180932230.2850@reclus.nhh.no>

On Mon, 18 Sep 2017, Agustin Lobo wrote:

> rgdal compiles fine on my Debian Testing (Buster) system by removing
> an older pro_api.h file:
>
> 1. As suggested by Roger, I located and removed an older version of
> proj_api.h taht had not been removed when I removed the older proj4
> version:
> $ sudo find / -name proj_api.h
> /usr/local/include/proj_api.h
> /usr/include/proj_api.h
> alobo at debi:~$ sudo rm /usr/local/include/proj_api.h
>
> 2. Then the rgdal installation goes smoothly;
>
> $ R CMD INSTALL rgdal_1.2-8.tar.gz
> .../...
> configure: PROJ.4 version: > 4.8.0
> .../...
>
> (see https://www.dropbox.com/s/9i8rk74k0vk95uc/rgdal2.log?dl=0 for the
> entire output)
>
> 3. Then, in R, rgdal loads with no problems
>
>> require(rgdal)
> Loading required package: rgdal
> Loading required package: sp
> rgdal: version: 1.2-8, (SVN revision 663)
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 2.2.1, released 2017/06/23
> Path to GDAL shared files: /usr/share/gdal/2.2
> Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
> Path to PROJ.4 shared files: (autodetected)
> Linking to sp version: 1.2-5
>> sessionInfo()
> R version 3.3.3 (2017-03-06)
> Platform: i686-pc-linux-gnu (32-bit)
> Running under: Debian GNU/Linux buster/sid
>
> locale:
> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> LC_PAPER=en_US.UTF-8       LC_NAME=C
> [9] LC_ADDRESS=C               LC_TELEPHONE=C
> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] rgdal_1.2-8 sp_1.2-5
>
> loaded via a namespace (and not attached):
> [1] tools_3.3.3     grid_3.3.3      lattice_0.20-35
>
> 4. Thus I guess all problems were caused by an old gcc compiler +
> leftovers in /usr/local/... directories and that I should
> report to gdal-dev and r-sig-debian that there is actually no problem
> with versions of R. gfal and proj4 in the Debian testing (Buster)
> repos.

Thanks for reporting back! Unless you posted questions on those list, then 
your posting here should be sufficient, as the list is searchable.

Roger

>
> Correct?
>
> Agus
>
> On Fri, Sep 15, 2017 at 9:32 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> On Fri, 15 Sep 2017, Agustin Lobo wrote:
>>
>>> I'm now very confused. It seems to me, in line with what you say, that
>>> I had 2 different
>>> kinds of problems:
>>> - Those derived from upgrading from Debian Stretch to Buster (a
>>> consequence of keeping the system as Debian testing: it is just the
>>> consequence of testing passing from Stretch to Buster as
>>> Stretch becomes Stable) and keeping some older versions of different
>>> components (probably installed by packages outside Debian repos). I
>>> guess these problems have been fixed (although I still do not
>>> understand why the rgdal installation claims I have PROJ4.8, which I
>>> cannot find in my system).
>>
>>
>> Please see whether there are multiple proj_api.h files on your system - if
>> so, rgdal is picking up the first in your search path, but may link against
>> a later *.so, explaining the crashes during the configure run.
>>
>>> - Those derived from Debian packages having been compiled with
>>> different and incompatible options. This is something I cannot fix
>>> myself.
>>>
>>> Therefore:
>>>
>>> - I will go on compiling myself as Roger suggests to regain an
>>> operational system.
>>> - I will try to test on a fresh Buster system (or a docker, which I
>>> will have to find out what it is...)
>>
>>
>> https://github.com/rocker-org/rocker
>> http://dirk.eddelbuettel.com/papers/useR2015_docker.pdf
>>
>> for example.
>>
>>> - I will report to r-sig-debian and gdal-dev (please suggest an
>>> alternative gdal linst if
>>> gdal-dev is not appropriate).
>>>
>>
>> (please keep your heads covered as GEOS and GDAL transition to requiring
>>>
>>> = C++11 ...) Yes, at this stage sharing information is valuable so that
>>
>> others can learn from hard-won experience.
>>
>> Roger
>>
>>
>>> I'll keep this list informed.
>>>
>>> Thanks!
>>>
>>> Agus
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> On Thu, Sep 14, 2017 at 9:26 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>>
>>>> As Edzer said earlier in this thread (and Agus was quite right to post
>>>> rather than contact me directly), reproducing the problem(s) is hard
>>>> without
>>>> access to the specific platform (thread started here):
>>>>
>>>> https://stat.ethz.ch/pipermail/r-sig-geo/2017-September/025974.html
>>>>
>>>> My guesses so far are that the gcc build trains used for R, and for the
>>>> GDAL/PROJ.4 components are not the same, and may not be the same as the
>>>> installed gcc build train used to install rgdal from source. This
>>>> probably
>>>> also affects sf on debian buster (and ubuntu?). It may also affect
>>>> GEOS/rgeos.
>>>>
>>>> The gcc versions do change as platforms are upgraded, so for anything
>>>> using
>>>> C++, the ABI changes will bite hard, and keeping the compiler versions in
>>>> harmony is crucial. The baseline comparison is to install GDAL and its
>>>> dependencies (including PROJ.4) from source (download and unpack source
>>>> tarball, ./configure && make && make install), then probably R from
>>>> source,
>>>> finally rgdal. This has to work, but unpicks the debian/ubuntu packaging
>>>> system on which many rely.
>>>>
>>>> Please also consider taking this up on r-sig-debian, with a reproducible
>>>> example, best in a docker container.
>>>>
>>>> A further thought is that the most frequent cause of trouble on
>>>> debian/ubuntu previously were multiple installs of different versions of
>>>> GDAL, pulled in by different downstream packages, but the current reports
>>>> do
>>>> not suggest this as the cause. Still worth checking, though ...
>>>>
>>>> Roger
>>>>
>>>>
>>>> On Wed, 13 Sep 2017, Roger Bivand wrote:
>>>>
>>>>> On Wed, 13 Sep 2017, Agustin Lobo wrote:
>>>>>
>>>>>> The problem seems to be related to the compiler. I had:
>>>>>> gcc version 5.3.1 20160101 (Debian 5.3.1-5)
>>>>>>
>>>>>> I have now:
>>>>>> gcc version 7.2.0 (Debian 7.2.0-4)
>>>>>>
>>>>>> All weird previus errors are gone but I still have:
>>>>>> configure: PROJ.4 version: 4.8.0
>>>>>> ./configure: line 3725:  8390 Segmentation fault      ./proj_conf_test
>>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>> ./configure: line 3800:  8399 Segmentation fault      ./proj_conf_test
>>>>>>
>>>>>> and finally
>>>>>>
>>>>>> ** testing if installed package can be loaded
>>>>>> Fatal error: glibc detected an invalid stdio handle
>>>>>> Aborted
>>>>>> ERROR: loading failed
>>>>>> * removing ?/home/alobo/R/i686-pc-linux-gnu-library/3.3/rgdal?
>>>>>>
>>>>>> Surprisingly,  I do have 4.9 installed, not 4.8:
>>>>>>
>>>>>> $ dpkg -s proj-bin
>>>>>> Package: proj-bin
>>>>>> Status: install ok installed
>>>>>> Priority: optional
>>>>>> Section: science
>>>>>> Installed-Size: 125
>>>>>> Maintainer: Debian GIS Project
>>>>>> <pkg-grass-devel at lists.alioth.debian.org>
>>>>>> Architecture: i386
>>>>>> Source: proj
>>>>>> Version: 4.9.3-2
>>>>>>
>>>>>> and
>>>>>> $ proj
>>>>>> Rel. 4.9.3, 15 August 2016
>>>>>> usage: proj [ -bCeEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>>>>>>
>>>>>> and I cannot find proj_conf_test anywhere:
>>>>>> $ sudo find / -name 'proj_conf_test'
>>>>>> gives no result
>>>>>>
>>>>>> How is the test ./proj_conf_test done so that I can investigate why it
>>>>>> results into PROJ 4.8 instead of 4.9?
>>>>>
>>>>>
>>>>>
>>>>> It is defined in rgdal/configure.ac (line 273 ff.):
>>>>>
>>>>> if test ${proj_version} -ge 480; then
>>>>> [cat > proj_conf_test.c <<_EOCONF
>>>>> #include <stdio.h>
>>>>> #include <proj_api.h>
>>>>> #if PJ_VERSION == 480
>>>>> FILE *pj_open_lib(projCtx, const char *, const char *);
>>>>> #endif
>>>>>
>>>>> int main() {
>>>>> #if PJ_VERSION <= 480
>>>>>    FILE *fp;
>>>>> #else
>>>>>    PAFile fp;
>>>>> #endif
>>>>>    projCtx ctx;
>>>>>    ctx = pj_get_default_ctx();
>>>>>    fp = pj_open_lib(ctx, "epsg", "rb");
>>>>>    if (fp == NULL) exit(1);
>>>>> #if PJ_VERSION <= 480
>>>>>    fclose(fp);
>>>>> #else
>>>>>    pj_ctx_fclose(ctx, fp);
>>>>> #endif
>>>>>    exit(0);
>>>>> }
>>>>> _EOCONF]
>>>>> else
>>>>> [cat > proj_conf_test.c <<_EOCONF
>>>>> #include <stdio.h>
>>>>> #include <proj_api.h>
>>>>> FILE *pj_open_lib(const char *, const char *);
>>>>>
>>>>> int main() {
>>>>>    FILE *fp;
>>>>>    fp = pj_open_lib("epsg", "rb");
>>>>>    if (fp == NULL) exit(1);
>>>>>    fclose(fp);
>>>>>    exit(0);
>>>>> }
>>>>> _EOCONF]
>>>>> fi
>>>>>
>>>>> and checks that the crucial epsg file is present. It does seem to run,
>>>>> though, which is puzzling - if you read configure.ac, you'll see that I
>>>>> didn't guard against the previous (different) ./proj_conf_test already
>>>>> existing - I'll revise the test names to avoid such false positives in
>>>>> the
>>>>> future.
>>>>>
>>>>> Roger
>>>>>
>>>>>>
>>>>>> Thanks
>>>>>>
>>>>>> Agus
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Tue, Sep 12, 2017 at 1:49 PM, Roger Bivand <Roger.Bivand at nhh.no>
>>>>>> wrote:
>>>>>>>
>>>>>>>
>>>>>>> $ g++ -v
>>>>>>> ...
>>>>>>> gcc version 7.1.1 20170622 (Red Hat 7.1.1-3) (GCC)
>>>>>>>
>>>>>>> in my case on Fedora 26.
>>>>>>>
>>>>>>> Recent versions should be OK, but < 5 may be problematic. If you have
>>>>>>> upgraded in place but not upgraded the compile trains, installing
>>>>>>> r-base
>>>>>>> will not force that.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> Editor-in-Chief of The R Journal,
>>>> https://journal.r-project.org/index.html
>>>> http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
Editor-in-Chief of The R Journal, https://journal.r-project.org/index.html
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From kkyong77 at hotmail.com  Tue Sep 19 22:17:58 2017
From: kkyong77 at hotmail.com (Kyongho Son)
Date: Tue, 19 Sep 2017 20:17:58 +0000
Subject: [R-sig-Geo] converting the projection
Message-ID: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>


Hi I have two raster data sets but they have two datum and projection.

I would like to convert one to the other since I would like to clip the one raster using the other raster.

they should have same projections.


proj4string(bb)
[1] "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
proj4string(SOSTavg)

 proj4string(SOSTavg)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"


Thanks,

Kyongho








	[[alternative HTML version deleted]]


From nell.redu at hotmail.fr  Tue Sep 19 22:55:37 2017
From: nell.redu at hotmail.fr (Nelly Reduan)
Date: Tue, 19 Sep 2017 20:55:37 +0000
Subject: [R-sig-Geo] Warning messages "matrix(ratvalues,
 nrow = length(ratvalues)/length(ratnames))" when cropping rasters
Message-ID: <DM5PR05MB279306034CF93343ADFEED5C99600@DM5PR05MB2793.namprd05.prod.outlook.com>

Hello,

I?m working with one land cover raster and one shapefile representing study limit boundaries.

 However, I?m getting warning messages when I crop the raster using the function "crop" in

the package "raster".



>     rast_crop <- crop(x=rast,y=(extent(limit_study_area_prj) + 1000)) # crop the raster to the extent of the study area

Warning messages:

1: In matrix(ratvalues, nrow = length(ratvalues)/length(ratnames)) :

  data length [1923] is not a sub-multiple or multiple of the number of rows [147]

2: In .getRat(x, ratvalues, ratnames, rattypes) :

  NAs introduced by coercion

3: In .getRat(x, ratvalues, ratnames, rattypes) :

  NAs introduced by coercion

4: In .getRat(x, ratvalues, ratnames, rattypes) :

  NAs introduced by coercion



This is the raster:



> rast

class       : RasterLayer

dimensions  : 65770, 53928, 3546844560  (nrow, ncol, ncell)

resolution  : 30, 30  (x, y)

extent      : -830370, 787470, 117960, 2091060  (xmin, xmax, ymin, ymax)

coord. ref. : +proj=lcc +lat_1=46 +lat_2=60 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0

data source : F:\rast.tif

names       : rast

values      : 10, 9999  (min, max)

This is the shapefile :

limit_study_area_prj

class       : SpatialPolygonsDataFrame

features    : 2

extent      : -486868.6, -146688.1, 117964.1, 246335.5  (xmin, xmax, ymin, ymax)

coord. ref. : +proj=lcc +lat_1=46 +lat_2=60 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0

variables   : 12

This is the extent of the shapefile

> extent(limit_study_area_prj)

class       : Extent

xmin        : -486868.6

xmax        : -146688.1

ymin        : 117964.1

ymax        : 246335.5

Is there any way to avoid these warning messages? Are there consequences for extracting raster values (after cropping)?
Thank so much for your time
Have a nice day
Nell


	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Tue Sep 19 23:03:45 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 19 Sep 2017 21:03:45 +0000
Subject: [R-sig-Geo] converting the projection
In-Reply-To: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>
References: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>
Message-ID: <CAAcGz9-FvDvOuEX+476GpeqVs+0XcPPx2QYvEQnv9SKeMjkn_g@mail.gmail.com>

Try projecting just the extent
library(raster)
ex <- projectExtent(a,  projection(b))
clip(b,  ex)

where a,  b are your two raster.

Cheers,  Mike

On Wed, 20 Sep 2017, 06:18 Kyongho Son <kkyong77 at hotmail.com> wrote:

>
> Hi I have two raster data sets but they have two datum and projection.
>
> I would like to convert one to the other since I would like to clip the
> one raster using the other raster.
>
> they should have same projections.
>
>
> proj4string(bb)
> [1] "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
> proj4string(SOSTavg)
>
>  proj4string(SOSTavg)
> [1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +ellps=WGS84
> +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
>
>
> Thanks,
>
> Kyongho
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Wed Sep 20 02:32:13 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 20 Sep 2017 00:32:13 +0000
Subject: [R-sig-Geo] converting the projection
In-Reply-To: <BN6PR10MB14287CAF4BA004B018A9355CD0600@BN6PR10MB1428.namprd10.prod.outlook.com>
References: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9-FvDvOuEX+476GpeqVs+0XcPPx2QYvEQnv9SKeMjkn_g@mail.gmail.com>
 <BN6PR10MB14287CAF4BA004B018A9355CD0600@BN6PR10MB1428.namprd10.prod.outlook.com>
Message-ID: <CAAcGz9_JB3uv0kJmeEtHr8hxm8L6Sv7KvZgwe8C4tfcxC-vmYw@mail.gmail.com>

Keep on list please.

Share code to demonstrate so we can see the problem.  Use projectRaster(a,
b)  for alignment,  try crop(b,  ex,  snap = "out")  for inclusive crop.

And apologies I wrote clip instead of crop earlier.

Cheers,  Mike

On Wed, 20 Sep 2017, 07:42 Kyongho Son <kkyong77 at hotmail.com> wrote:

> I did the exact same way, but the output of the reprojection of 'a' raster
> did not properly align with 'b' raster.
>
>
>
>
>
> *Kyongho Son*
> Postdoctoral Fellow
> Research Foundation of The City University of New York
>
>
>
> ------------------------------
> *From:* Michael Sumner <mdsumner at gmail.com>
> *Sent:* Tuesday, September 19, 2017 5:03 PM
> *To:* Kyongho Son; r-sig-geo
> *Subject:* Re: [R-sig-Geo] converting the projection
>
> Try projecting just the extent
> library(raster)
> ex <- projectExtent(a,  projection(b))
> clip(b,  ex)
>
> where a,  b are your two raster.
>
> Cheers,  Mike
>
> On Wed, 20 Sep 2017, 06:18 Kyongho Son <kkyong77 at hotmail.com> wrote:
>
>>
>> Hi I have two raster data sets but they have two datum and projection.
>>
>> I would like to convert one to the other since I would like to clip the
>> one raster using the other raster.
>>
>> they should have same projections.
>>
>>
>> proj4string(bb)
>> [1] "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
>> proj4string(SOSTavg)
>>
>>  proj4string(SOSTavg)
>> [1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +ellps=WGS84
>> +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
>>
>>
>> Thanks,
>>
>> Kyongho
>>
>>
>>
>>
>>
>>
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> --
>
> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
> Kingston Tasmania 7050 Australia
> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>
> --
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From kkyong77 at hotmail.com  Wed Sep 20 03:05:20 2017
From: kkyong77 at hotmail.com (Kyongho Son)
Date: Wed, 20 Sep 2017 01:05:20 +0000
Subject: [R-sig-Geo] converting the projection
In-Reply-To: <CAAcGz9_JB3uv0kJmeEtHr8hxm8L6Sv7KvZgwe8C4tfcxC-vmYw@mail.gmail.com>
References: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9-FvDvOuEX+476GpeqVs+0XcPPx2QYvEQnv9SKeMjkn_g@mail.gmail.com>
 <BN6PR10MB14287CAF4BA004B018A9355CD0600@BN6PR10MB1428.namprd10.prod.outlook.com>,
 <CAAcGz9_JB3uv0kJmeEtHr8hxm8L6Sv7KvZgwe8C4tfcxC-vmYw@mail.gmail.com>
Message-ID: <BN6PR10MB1428D24BEB73F27067D8D35ED0610@BN6PR10MB1428.namprd10.prod.outlook.com>

Sorry and thanks, Mike
I can not share all codes and data since the original data are huge.
I copied the scripts that I used to reproject one of rasters and then make sure that they have same projection

 Then clip a large raster with a small raster. However, I got the error messages, the two raster maps are not overlap.

They should overlap if the projection was correct.



# east US map tree phenology map
tmp<-raster("../../obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114")

proj4string(tmp)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

# small watershed boundary map in NY state
bb<-raster("../../obs/gis/bb_soil_def_map.tif")
proj4string(bb)
[1] "+proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

ex <- projectExtent(bb,  projection(tmp))

> ex
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 30.12012, 14.94084  (x, y)
extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0


c<-crop(tmp,  ex)

Error in .local(x, y, ...) : extents do not overlap




*Kyongho Son*
Postdoctoral Fellow
Research Foundation of The City University of New York


________________________________
From: Michael Sumner <mdsumner at gmail.com>
Sent: Tuesday, September 19, 2017 8:32 PM
To: Kyongho Son; RsigGeo
Subject: Re: [R-sig-Geo] converting the projection

Keep on list please.

Share code to demonstrate so we can see the problem.  Use projectRaster(a, b)  for alignment,  try crop(b,  ex,  snap = "out")  for inclusive crop.

And apologies I wrote clip instead of crop earlier.

Cheers,  Mike

On Wed, 20 Sep 2017, 07:42 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:

I did the exact same way, but the output of the reprojection of 'a' raster did not properly align with 'b' raster.





*Kyongho Son*
Postdoctoral Fellow
Research Foundation of The City University of New York


________________________________
From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
Sent: Tuesday, September 19, 2017 5:03 PM
To: Kyongho Son; r-sig-geo
Subject: Re: [R-sig-Geo] converting the projection

Try projecting just the extent
library(raster)
ex <- projectExtent(a,  projection(b))
clip(b,  ex)

where a,  b are your two raster.

Cheers,  Mike

On Wed, 20 Sep 2017, 06:18 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:

Hi I have two raster data sets but they have two datum and projection.

I would like to convert one to the other since I would like to clip the one raster using the other raster.

they should have same projections.


proj4string(bb)
[1] "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
proj4string(SOSTavg)

 proj4string(SOSTavg)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"


Thanks,

Kyongho








        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
--
<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
Kingston Tasmania 7050 Australia<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>

--
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia


	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Wed Sep 20 03:15:56 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 20 Sep 2017 01:15:56 +0000
Subject: [R-sig-Geo] converting the projection
In-Reply-To: <BN6PR10MB1428D24BEB73F27067D8D35ED0610@BN6PR10MB1428.namprd10.prod.outlook.com>
References: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9-FvDvOuEX+476GpeqVs+0XcPPx2QYvEQnv9SKeMjkn_g@mail.gmail.com>
 <BN6PR10MB14287CAF4BA004B018A9355CD0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9_JB3uv0kJmeEtHr8hxm8L6Sv7KvZgwe8C4tfcxC-vmYw@mail.gmail.com>
 <BN6PR10MB1428D24BEB73F27067D8D35ED0610@BN6PR10MB1428.namprd10.prod.outlook.com>
Message-ID: <CAAcGz99nJMc=En=wddCos=STX0awDbt58k-_vzCOYj_6L03MjA@mail.gmail.com>

Great thanks, that is good detail -but we still need the extents of both
data to be able to see where the problem is.

You gave us the proj4string for both, but we also need the extent - you can
print each object for a full summary eg.

print(bb)

print(tmp)

and with those anyone can reproduce enough (without any real data) to
recreate your experience. (I am so used to working with this stuff I forget
to remind others that print(theraster) is usually more than enough
information to work through a reproducible example)

But, a guess is - unless the projection metadata is wrong, raster is
probably telling you the truth - but it should be easy to see why there's a
problem with the print output (essentially the proj4string and extent
provide enough information for an experienced problem solver).

Cheers, Mike.



On Wed, 20 Sep 2017 at 11:05 Kyongho Son <kkyong77 at hotmail.com> wrote:

> Sorry and thanks, Mike
> I can not share all codes and data since the original data are huge.
> I copied the scripts that I used to reproject one of rasters and then make
> sure that they have same projection
>
>  Then clip a large raster with a small raster. However, I got the error
> messages, the two raster maps are not overlap.
>
> They should overlap if the projection was correct.
>
>
>
> # east US map tree phenology map
> tmp<-raster("../../obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114")
>
> proj4string(tmp)
> [1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84
> +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"
>
> # small watershed boundary map in NY state
> bb<-raster("../../obs/gis/bb_soil_def_map.tif")
> proj4string(bb)
> [1] "+proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84
> +towgs84=0,0,0"
>
> ex <- projectExtent(bb,  projection(tmp))
>
> > ex
> class       : RasterLayer
> dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
> resolution  : 30.12012, 14.94084  (x, y)
> extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0
> +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
>
>
> c<-crop(tmp,  ex)
>
> Error in .local(x, y, ...) : extents do not overlap
>
>
>
> *Kyongho Son*
> Postdoctoral Fellow
> Research Foundation of The City University of New York
>
>
>
> ------------------------------
> *From:* Michael Sumner <mdsumner at gmail.com>
> *Sent:* Tuesday, September 19, 2017 8:32 PM
> *To:* Kyongho Son; RsigGeo
>
> *Subject:* Re: [R-sig-Geo] converting the projection
> Keep on list please.
>
> Share code to demonstrate so we can see the problem.  Use projectRaster(a,
> b)  for alignment,  try crop(b,  ex,  snap = "out")  for inclusive crop.
>
> And apologies I wrote clip instead of crop earlier.
>
> Cheers,  Mike
>
> On Wed, 20 Sep 2017, 07:42 Kyongho Son <kkyong77 at hotmail.com> wrote:
>
>> I did the exact same way, but the output of the reprojection of 'a'
>> raster did not properly align with 'b' raster.
>>
>>
>>
>>
>>
>> *Kyongho Son*
>> Postdoctoral Fellow
>> Research Foundation of The City University of New York
>>
>>
>>
>> ------------------------------
>> *From:* Michael Sumner <mdsumner at gmail.com>
>> *Sent:* Tuesday, September 19, 2017 5:03 PM
>> *To:* Kyongho Son; r-sig-geo
>> *Subject:* Re: [R-sig-Geo] converting the projection
>>
>> Try projecting just the extent
>> library(raster)
>> ex <- projectExtent(a,  projection(b))
>> clip(b,  ex)
>>
>> where a,  b are your two raster.
>>
>> Cheers,  Mike
>>
>> On Wed, 20 Sep 2017, 06:18 Kyongho Son <kkyong77 at hotmail.com> wrote:
>>
>>>
>>> Hi I have two raster data sets but they have two datum and projection.
>>>
>>> I would like to convert one to the other since I would like to clip the
>>> one raster using the other raster.
>>>
>>> they should have same projections.
>>>
>>>
>>> proj4string(bb)
>>> [1] "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
>>> proj4string(SOSTavg)
>>>
>>>  proj4string(SOSTavg)
>>> [1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +ellps=WGS84
>>> +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
>>>
>>>
>>> Thanks,
>>>
>>> Kyongho
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>> --
>>
>> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>
>> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>> Dr. Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> 203 Channel Highway
>> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>> Kingston Tasmania 7050 Australia
>> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>>
>> --
>
> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>
> Kingston Tasmania 7050 Australia
> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>
>
> --
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From kkyong77 at hotmail.com  Wed Sep 20 03:20:43 2017
From: kkyong77 at hotmail.com (Kyongho Son)
Date: Wed, 20 Sep 2017 01:20:43 +0000
Subject: [R-sig-Geo] converting the projection
In-Reply-To: <CAAcGz99nJMc=En=wddCos=STX0awDbt58k-_vzCOYj_6L03MjA@mail.gmail.com>
References: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9-FvDvOuEX+476GpeqVs+0XcPPx2QYvEQnv9SKeMjkn_g@mail.gmail.com>
 <BN6PR10MB14287CAF4BA004B018A9355CD0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9_JB3uv0kJmeEtHr8hxm8L6Sv7KvZgwe8C4tfcxC-vmYw@mail.gmail.com>
 <BN6PR10MB1428D24BEB73F27067D8D35ED0610@BN6PR10MB1428.namprd10.prod.outlook.com>,
 <CAAcGz99nJMc=En=wddCos=STX0awDbt58k-_vzCOYj_6L03MjA@mail.gmail.com>
Message-ID: <BN6PR10MB1428BEBFCD4FD094316A95EAD0610@BN6PR10MB1428.namprd10.prod.outlook.com>

I add the extent

# reading emodis data

# east US map tree phenology map
tmp<-raster("../../obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114")

proj4string(tmp)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

print(tmp)

> print(tmp)
class       : RasterLayer
dimensions  : 11556, 9174, 106014744  (nrow, ncol, ncell)
resolution  : 250, 250  (x, y)
extent      : 243000, 2536500, -2136500, 752500  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
data source : /work.taichi/Projects/Biscuit/rhessys/obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114
names       : sostavg0114
values      : -115, 1000  (min, max)


# small watershed boundary map in NY state
bb<-raster("../../obs/gis/bb_soil_def_map.tif")
proj4string(bb)
[1] "+proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

print(bb)

> print(bb)
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 10, 10  (x, y)
extent      : 540217, 545367, 4648219, 4654199  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
data source : /work.taichi/Projects/Biscuit/rhessys/obs/gis/bb_soil_def_map.tif
names       : bb_soil_def_map
values      : 0, 5712  (min, max)

ex <- projectExtent(bb,  projection(tmp))

print(ex)

> print(ex)
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 30.12012, 14.94084  (x, y)
extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0

> ex
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 30.12012, 14.94084  (x, y)
extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0


c<-crop(tmp,  ex)

Error in .local(x, y, ...) : extents do not overlap



________________________________
From: Michael Sumner <mdsumner at gmail.com>
Sent: Tuesday, September 19, 2017 9:15 PM
To: Kyongho Son; RsigGeo
Subject: Re: [R-sig-Geo] converting the projection

Great thanks, that is good detail -but we still need the extents of both data to be able to see where the problem is.

You gave us the proj4string for both, but we also need the extent - you can print each object for a full summary eg.

print(bb)

print(tmp)

and with those anyone can reproduce enough (without any real data) to recreate your experience. (I am so used to working with this stuff I forget to remind others that print(theraster) is usually more than enough information to work through a reproducible example)

But, a guess is - unless the projection metadata is wrong, raster is probably telling you the truth - but it should be easy to see why there's a problem with the print output (essentially the proj4string and extent provide enough information for an experienced problem solver).

Cheers, Mike.



On Wed, 20 Sep 2017 at 11:05 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:

Sorry and thanks, Mike
I can not share all codes and data since the original data are huge.
I copied the scripts that I used to reproject one of rasters and then make sure that they have same projection

 Then clip a large raster with a small raster. However, I got the error messages, the two raster maps are not overlap.

They should overlap if the projection was correct.



# east US map tree phenology map
tmp<-raster("../../obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114")

proj4string(tmp)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

# small watershed boundary map in NY state
bb<-raster("../../obs/gis/bb_soil_def_map.tif")
proj4string(bb)
[1] "+proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

ex <- projectExtent(bb,  projection(tmp))

> ex
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 30.12012, 14.94084  (x, y)
extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0


c<-crop(tmp,  ex)

Error in .local(x, y, ...) : extents do not overlap




*Kyongho Son*
Postdoctoral Fellow
Research Foundation of The City University of New York


________________________________
From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
Sent: Tuesday, September 19, 2017 8:32 PM
To: Kyongho Son; RsigGeo

Subject: Re: [R-sig-Geo] converting the projection
Keep on list please.

Share code to demonstrate so we can see the problem.  Use projectRaster(a, b)  for alignment,  try crop(b,  ex,  snap = "out")  for inclusive crop.

And apologies I wrote clip instead of crop earlier.

Cheers,  Mike

On Wed, 20 Sep 2017, 07:42 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:

I did the exact same way, but the output of the reprojection of 'a' raster did not properly align with 'b' raster.





*Kyongho Son*
Postdoctoral Fellow
Research Foundation of The City University of New York


________________________________
From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
Sent: Tuesday, September 19, 2017 5:03 PM
To: Kyongho Son; r-sig-geo
Subject: Re: [R-sig-Geo] converting the projection

Try projecting just the extent
library(raster)
ex <- projectExtent(a,  projection(b))
clip(b,  ex)

where a,  b are your two raster.

Cheers,  Mike

On Wed, 20 Sep 2017, 06:18 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:

Hi I have two raster data sets but they have two datum and projection.

I would like to convert one to the other since I would like to clip the one raster using the other raster.

they should have same projections.


proj4string(bb)
[1] "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
proj4string(SOSTavg)

 proj4string(SOSTavg)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"


Thanks,

Kyongho








        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
--
<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g><https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
Kingston Tasmania 7050 Australia<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>

--
<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>
Kingston Tasmania 7050 Australia<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>

--
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia


	[[alternative HTML version deleted]]


From alobolistas at gmail.com  Wed Sep 20 17:25:32 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed, 20 Sep 2017 17:25:32 +0200
Subject: [R-sig-Geo] temp directory not actually reset by rasterOptions()
Message-ID: <CAG4NReL=peZ43oihWtoPZ82J4mDs-78TF=S6rCJJku_9WgCL2w@mail.gmail.com>

I have problems with an small /tmp partition
and thought using
rasterOptions(tmpdir="/home/alobo/provi")

Nevertheless, this has no effect, and temp raster files keep growing
in the default directory within /tmp

Is this a bug?

Thanks
Agus

> sessionInfo()
R version 3.3.3 (2017-03-06)
Platform: i686-pc-linux-gnu (32-bit)
Running under: Debian GNU/Linux buster/sid

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
LC_TIME=en_US.UTF-8
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8
LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
LC_ADDRESS=C
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] raster_2.5-8 sp_1.2-5

loaded via a namespace (and not attached):
[1] rgdal_1.2-11    parallel_3.3.3  tools_3.3.3     Rcpp_0.12.12
grid_3.3.3
[6] lattice_0.20-35


From kkyong77 at hotmail.com  Wed Sep 20 21:50:38 2017
From: kkyong77 at hotmail.com (Kyongho Son)
Date: Wed, 20 Sep 2017 19:50:38 +0000
Subject: [R-sig-Geo] converting the projection from Lambert to WGS84 or NAD83
In-Reply-To: <BN6PR10MB1428BEBFCD4FD094316A95EAD0610@BN6PR10MB1428.namprd10.prod.outlook.com>
References: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9-FvDvOuEX+476GpeqVs+0XcPPx2QYvEQnv9SKeMjkn_g@mail.gmail.com>
 <BN6PR10MB14287CAF4BA004B018A9355CD0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9_JB3uv0kJmeEtHr8hxm8L6Sv7KvZgwe8C4tfcxC-vmYw@mail.gmail.com>
 <BN6PR10MB1428D24BEB73F27067D8D35ED0610@BN6PR10MB1428.namprd10.prod.outlook.com>,
 <CAAcGz99nJMc=En=wddCos=STX0awDbt58k-_vzCOYj_6L03MjA@mail.gmail.com>,
 <BN6PR10MB1428BEBFCD4FD094316A95EAD0610@BN6PR10MB1428.namprd10.prod.outlook.com>
Message-ID: <BN6PR10MB142850845B208C4EED0EC473D0610@BN6PR10MB1428.namprd10.prod.outlook.com>


I am trying to reproject the eMODIS raster

  *   Projected Coordinate System:Sphere_ARC_INFO_Lambert_Azimuthal_Equal_Area
  *   Projection: Lambert_Azimuthal_Equal_Area
  *   Datum: D_Sphere_ARC_INFO

to the WGS84 or NAD83 18N

So that I can clip eMODIS raster files (more than 100) using a watershed boundary.
I attached the script here, but I still can not properly reproject the eMOIDS raster files.


# reading emodis data

# east US map tree phenology map
tmp<-raster("../../obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114")

proj4string(tmp)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

print(tmp)

> print(tmp)
class       : RasterLayer
dimensions  : 11556, 9174, 106014744  (nrow, ncol, ncell)
resolution  : 250, 250  (x, y)
extent      : 243000, 2536500, -2136500, 752500  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
data source : /work.taichi/Projects/Biscuit/rhessys/obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114
names       : sostavg0114
values      : -115, 1000  (min, max)


# small watershed boundary map in NY state
bb<-raster("../../obs/gis/bb_soil_def_map.tif")
proj4string(bb)
[1] "+proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

print(bb)

> print(bb)
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 10, 10  (x, y)
extent      : 540217, 545367, 4648219, 4654199  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
data source : /work.taichi/Projects/Biscuit/rhessys/obs/gis/bb_soil_def_map.tif
names       : bb_soil_def_map
values      : 0, 5712  (min, max)

ex <- projectExtent(bb,  projection(tmp))

print(ex)

> print(ex)
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 30.12012, 14.94084  (x, y)
extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0

> ex
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 30.12012, 14.94084  (x, y)
extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0


c<-crop(tmp,  ex)

Error in .local(x, y, ...) : extents do not overlap



________________________________
From: Michael Sumner <mdsumner at gmail.com>
Sent: Tuesday, September 19, 2017 9:15 PM
To: Kyongho Son; RsigGeo
Subject: Re: [R-sig-Geo] converting the projection

Great thanks, that is good detail -but we still need the extents of both data to be able to see where the problem is.

You gave us the proj4string for both, but we also need the extent - you can print each object for a full summary eg.

print(bb)

print(tmp)

and with those anyone can reproduce enough (without any real data) to recreate your experience. (I am so used to working with this stuff I forget to remind others that print(theraster) is usually more than enough information to work through a reproducible example)

But, a guess is - unless the projection metadata is wrong, raster is probably telling you the truth - but it should be easy to see why there's a problem with the print output (essentially the proj4string and extent provide enough information for an experienced problem solver).

Cheers, Mike.



On Wed, 20 Sep 2017 at 11:05 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:

Sorry and thanks, Mike
I can not share all codes and data since the original data are huge.
I copied the scripts that I used to reproject one of rasters and then make sure that they have same projection

 Then clip a large raster with a small raster. However, I got the error messages, the two raster maps are not overlap.

They should overlap if the projection was correct.



# east US map tree phenology map
tmp<-raster("../../obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114")

proj4string(tmp)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

# small watershed boundary map in NY state
bb<-raster("../../obs/gis/bb_soil_def_map.tif")
proj4string(bb)
[1] "+proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"

ex <- projectExtent(bb,  projection(tmp))

> ex
class       : RasterLayer
dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
resolution  : 30.12012, 14.94084  (x, y)
extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0


c<-crop(tmp,  ex)

Error in .local(x, y, ...) : extents do not overlap




*Kyongho Son*
Postdoctoral Fellow
Research Foundation of The City University of New York


________________________________
From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
Sent: Tuesday, September 19, 2017 8:32 PM
To: Kyongho Son; RsigGeo

Subject: Re: [R-sig-Geo] converting the projection
Keep on list please.

Share code to demonstrate so we can see the problem.  Use projectRaster(a, b)  for alignment,  try crop(b,  ex,  snap = "out")  for inclusive crop.

And apologies I wrote clip instead of crop earlier.

Cheers,  Mike

On Wed, 20 Sep 2017, 07:42 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:

I did the exact same way, but the output of the reprojection of 'a' raster did not properly align with 'b' raster.





*Kyongho Son*
Postdoctoral Fellow
Research Foundation of The City University of New York


________________________________
From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
Sent: Tuesday, September 19, 2017 5:03 PM
To: Kyongho Son; r-sig-geo
Subject: Re: [R-sig-Geo] converting the projection

Try projecting just the extent
library(raster)
ex <- projectExtent(a,  projection(b))
clip(b,  ex)

where a,  b are your two raster.

Cheers,  Mike

On Wed, 20 Sep 2017, 06:18 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:

Hi I have two raster data sets but they have two datum and projection.

I would like to convert one to the other since I would like to clip the one raster using the other raster.

they should have same projections.


proj4string(bb)
[1] "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
proj4string(SOSTavg)

 proj4string(SOSTavg)
[1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"


Thanks,

Kyongho








        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
--
<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g><https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
Kingston Tasmania 7050 Australia<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>

--
<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>
Kingston Tasmania 7050 Australia<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>

--
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia


	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Thu Sep 21 00:34:54 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 20 Sep 2017 22:34:54 +0000
Subject: [R-sig-Geo] temp directory not actually reset by rasterOptions()
In-Reply-To: <CAG4NReL=peZ43oihWtoPZ82J4mDs-78TF=S6rCJJku_9WgCL2w@mail.gmail.com>
References: <CAG4NReL=peZ43oihWtoPZ82J4mDs-78TF=S6rCJJku_9WgCL2w@mail.gmail.com>
Message-ID: <CAAcGz99yYzpFkRzg-1Z6Sp4Ku9_cABUKei93tcheZMcARP6Y3w@mail.gmail.com>

FYI It's also important to set the max size for raster,  default is way too
low:

https://discuss.ropensci.org/t/how-to-avoid-space-hogging-raster-tempfiles/864

On Thu, 21 Sep 2017, 01:25 Agustin Lobo <alobolistas at gmail.com> wrote:

> I have problems with an small /tmp partition
> and thought using
> rasterOptions(tmpdir="/home/alobo/provi")
>
> Nevertheless, this has no effect, and temp raster files keep growing
> in the default directory within /tmp
>
> Is this a bug?
>
> Thanks
> Agus
>
> > sessionInfo()
> R version 3.3.3 (2017-03-06)
> Platform: i686-pc-linux-gnu (32-bit)
> Running under: Debian GNU/Linux buster/sid
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8
>  [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8
> LC_MESSAGES=en_US.UTF-8
>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> LC_ADDRESS=C
> [10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
> LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] raster_2.5-8 sp_1.2-5
>
> loaded via a namespace (and not attached):
> [1] rgdal_1.2-11    parallel_3.3.3  tools_3.3.3     Rcpp_0.12.12
> grid_3.3.3
> [6] lattice_0.20-35
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From f.rodriguez.sanc at gmail.com  Thu Sep 21 12:58:41 2017
From: f.rodriguez.sanc at gmail.com (Francisco Rodriguez Sanchez)
Date: Thu, 21 Sep 2017 12:58:41 +0200
Subject: [R-sig-Geo] converting the projection from Lambert to WGS84 or
 NAD83
In-Reply-To: <BN6PR10MB142850845B208C4EED0EC473D0610@BN6PR10MB1428.namprd10.prod.outlook.com>
References: <BN6PR10MB1428F2D194B48E4B0C2ED957D0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9-FvDvOuEX+476GpeqVs+0XcPPx2QYvEQnv9SKeMjkn_g@mail.gmail.com>
 <BN6PR10MB14287CAF4BA004B018A9355CD0600@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz9_JB3uv0kJmeEtHr8hxm8L6Sv7KvZgwe8C4tfcxC-vmYw@mail.gmail.com>
 <BN6PR10MB1428D24BEB73F27067D8D35ED0610@BN6PR10MB1428.namprd10.prod.outlook.com>
 <CAAcGz99nJMc=En=wddCos=STX0awDbt58k-_vzCOYj_6L03MjA@mail.gmail.com>
 <BN6PR10MB1428BEBFCD4FD094316A95EAD0610@BN6PR10MB1428.namprd10.prod.outlook.com>
 <BN6PR10MB142850845B208C4EED0EC473D0610@BN6PR10MB1428.namprd10.prod.outlook.com>
Message-ID: <d0618a72-b6e6-d2ce-3c09-9c38f00758e2@gmail.com>

Hi Kyongho,

There seems to be something strange with your eMODIS raster, which I 
understood represents something in the eastern US. There might be 
something wrong with the coordinates or the original projection 
information. When I reprojected it to global lonlat to see which area it 
covers, it actually fell in Antartica! (see 
https://i.imgur.com/wjTBt8E.png). So, I'm not sure if I got it 
correctly, but I think that's not what you expect. That would explain 
the error that the extents do not overlap.

Reproducible example follows:

library(raster)

## Create raster with same extent and projection
emodis <- raster(xmn = 243000, xmx = 2536500, ymn = -2136500, ymx = 752500,
 ???????????????? resolution = 10000,
 ???????????????? crs = "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 
+y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0",
 ???????????????? vals = 0)

emodis
#> class?????? : RasterLayer
#> dimensions? : 289, 229, 66181? (nrow, ncol, ncell)
#> resolution? : 10000, 10000? (x, y)
#> extent????? : 243000, 2533000, -2137500, 752500? (xmin, xmax, ymin, ymax)
#> coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 
+datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
#> data source : in memory
#> names?????? : layer
#> values????? : 0, 0? (min, max)

## Project to lonlat to see where it falls
emodis.lonlat <- projectRaster(emodis, crs = "+proj=longlat +datum=WGS84")

library(maptools)
data(wrld_simpl)
plot(wrld_simpl)
plot(emodis.lonlat, add = TRUE)

# See map at ![](https://i.imgur.com/wjTBt8E.png)

Hope this helps!

Cheers,

Paco



El 20/09/2017 a las 21:50, Kyongho Son escribi?:
> I am trying to reproject the eMODIS raster
>
>    *   Projected Coordinate System:Sphere_ARC_INFO_Lambert_Azimuthal_Equal_Area
>    *   Projection: Lambert_Azimuthal_Equal_Area
>    *   Datum: D_Sphere_ARC_INFO
>
> to the WGS84 or NAD83 18N
>
> So that I can clip eMODIS raster files (more than 100) using a watershed boundary.
> I attached the script here, but I still can not properly reproject the eMOIDS raster files.
>
>
> # reading emodis data
>
> # east US map tree phenology map
> tmp<-raster("../../obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114")
>
> proj4string(tmp)
> [1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"
>
> print(tmp)
>
>> print(tmp)
> class       : RasterLayer
> dimensions  : 11556, 9174, 106014744  (nrow, ncol, ncell)
> resolution  : 250, 250  (x, y)
> extent      : 243000, 2536500, -2136500, 752500  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
> data source : /work.taichi/Projects/Biscuit/rhessys/obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114
> names       : sostavg0114
> values      : -115, 1000  (min, max)
>
>
> # small watershed boundary map in NY state
> bb<-raster("../../obs/gis/bb_soil_def_map.tif")
> proj4string(bb)
> [1] "+proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"
>
> print(bb)
>
>> print(bb)
> class       : RasterLayer
> dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
> resolution  : 10, 10  (x, y)
> extent      : 540217, 545367, 4648219, 4654199  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
> data source : /work.taichi/Projects/Biscuit/rhessys/obs/gis/bb_soil_def_map.tif
> names       : bb_soil_def_map
> values      : 0, 5712  (min, max)
>
> ex <- projectExtent(bb,  projection(tmp))
>
> print(ex)
>
>> print(ex)
> class       : RasterLayer
> dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
> resolution  : 30.12012, 14.94084  (x, y)
> extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
>
>> ex
> class       : RasterLayer
> dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
> resolution  : 30.12012, 14.94084  (x, y)
> extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
>
>
> c<-crop(tmp,  ex)
>
> Error in .local(x, y, ...) : extents do not overlap
>
>
>
> ________________________________
> From: Michael Sumner <mdsumner at gmail.com>
> Sent: Tuesday, September 19, 2017 9:15 PM
> To: Kyongho Son; RsigGeo
> Subject: Re: [R-sig-Geo] converting the projection
>
> Great thanks, that is good detail -but we still need the extents of both data to be able to see where the problem is.
>
> You gave us the proj4string for both, but we also need the extent - you can print each object for a full summary eg.
>
> print(bb)
>
> print(tmp)
>
> and with those anyone can reproduce enough (without any real data) to recreate your experience. (I am so used to working with this stuff I forget to remind others that print(theraster) is usually more than enough information to work through a reproducible example)
>
> But, a guess is - unless the projection metadata is wrong, raster is probably telling you the truth - but it should be easy to see why there's a problem with the print output (essentially the proj4string and extent provide enough information for an experienced problem solver).
>
> Cheers, Mike.
>
>
>
> On Wed, 20 Sep 2017 at 11:05 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:
>
> Sorry and thanks, Mike
> I can not share all codes and data since the original data are huge.
> I copied the scripts that I used to reproject one of rasters and then make sure that they have same projection
>
>   Then clip a large raster with a small raster. However, I got the error messages, the two raster maps are not overlap.
>
> They should overlap if the projection was correct.
>
>
>
> # east US map tree phenology map
> tmp<-raster("../../obs/eMODIS_East_SOSTAvg0114_v1/sostavg0114")
>
> proj4string(tmp)
> [1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"
>
> # small watershed boundary map in NY state
> bb<-raster("../../obs/gis/bb_soil_def_map.tif")
> proj4string(bb)
> [1] "+proj=utm +zone=18 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"
>
> ex <- projectExtent(bb,  projection(tmp))
>
>> ex
> class       : RasterLayer
> dimensions  : 598, 515, 307970  (nrow, ncol, ncell)
> resolution  : 30.12012, 14.94084  (x, y)
> extent      : 6691756, 6707267, 9941473, 9950408  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0
>
>
> c<-crop(tmp,  ex)
>
> Error in .local(x, y, ...) : extents do not overlap
>
>
>
>
> *Kyongho Son*
> Postdoctoral Fellow
> Research Foundation of The City University of New York
>
>
> ________________________________
> From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
> Sent: Tuesday, September 19, 2017 8:32 PM
> To: Kyongho Son; RsigGeo
>
> Subject: Re: [R-sig-Geo] converting the projection
> Keep on list please.
>
> Share code to demonstrate so we can see the problem.  Use projectRaster(a, b)  for alignment,  try crop(b,  ex,  snap = "out")  for inclusive crop.
>
> And apologies I wrote clip instead of crop earlier.
>
> Cheers,  Mike
>
> On Wed, 20 Sep 2017, 07:42 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:
>
> I did the exact same way, but the output of the reprojection of 'a' raster did not properly align with 'b' raster.
>
>
>
>
>
> *Kyongho Son*
> Postdoctoral Fellow
> Research Foundation of The City University of New York
>
>
> ________________________________
> From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
> Sent: Tuesday, September 19, 2017 5:03 PM
> To: Kyongho Son; r-sig-geo
> Subject: Re: [R-sig-Geo] converting the projection
>
> Try projecting just the extent
> library(raster)
> ex <- projectExtent(a,  projection(b))
> clip(b,  ex)
>
> where a,  b are your two raster.
>
> Cheers,  Mike
>
> On Wed, 20 Sep 2017, 06:18 Kyongho Son <kkyong77 at hotmail.com<mailto:kkyong77 at hotmail.com>> wrote:
>
> Hi I have two raster data sets but they have two datum and projection.
>
> I would like to convert one to the other since I would like to clip the one raster using the other raster.
>
> they should have same projections.
>
>
> proj4string(bb)
> [1] "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
> proj4string(SOSTavg)
>
>   proj4string(SOSTavg)
> [1] "+proj=laea +lat_0=-100 +lon_0=6370997 +x_0=45 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
>
>
> Thanks,
>
> Kyongho
>
>
>
>
>
>
>
>
>          [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> --
> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g><https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
> Kingston Tasmania 7050 Australia<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>
> --
> <https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>
> Kingston Tasmania 7050 Australia<https://maps.google.com/?q=203+Channel+Highway+%0D+Kingston+Tasmania+7050+Australia+%3Chttps://maps.google.com/?q%3D203%2BChannel%2BHighway%2B%250D%2BKingston%2BTasmania%2B7050%2BAustralia%26entry%3Dgmail%26source%3Dg%3E&entry=gmail&source=g>
>
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Dr Francisco Rodriguez-Sanchez
Integrative Ecology Group
Estacion Biologica de Do?ana (CSIC)
Avda. Americo Vespucio 26
E-41092 Sevilla (Spain)
http://bit.ly/frod_san


From thi_veloso at yahoo.com.br  Sat Sep 23 05:58:09 2017
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Sat, 23 Sep 2017 03:58:09 +0000 (UTC)
Subject: [R-sig-Geo] Optimized rasterOptions() for a (virtually) infinite
	RAM machine
References: <238339916.687861.1506139089109.ref@mail.yahoo.com>
Message-ID: <238339916.687861.1506139089109@mail.yahoo.com>

Dear all,
I am using the raster package to process a total of 32 daily climate files supplied as netcdf files. Each file is a raster brick with 100 rows x 95 cols x 54750 time slices and weighs about 1.5 GB.
Essentially, all the processing I am performing on each netcdf file is:
a) to subset a specific date rangeb) to extract values using points
After that, I just convert the extracted data to data.tables and keep working in that format.
Since I extract data for about 450 points, and append all the data in a huge data.table, I need to use a computer with as much RAM as possible.
I ended up using a spot instance on Amazon EC2. Using an instance with 32 cores and 244GB of RAM will cost me around $0.30/hour.
Since I will be charged per hour, I need to optimize my code to get my results as fast as possible.
I don't even copy my data to the instance's hard disk; I send the files directly to the ram disk (/dev/shm). Even using 48GB of ram disk to store the files, I'll still have 196GB of RAM.
Under the scenario of having virtually infinite RAM memory, what would be the best rasterOptions() to make sure I am processing all my rasters in memory? Any other tips to benefit from such a large amount of RAM?
Thanks,?-- Thiago V. dos Santos
Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan
	[[alternative HTML version deleted]]


From mdsumner at gmail.com  Sat Sep 23 07:13:55 2017
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 23 Sep 2017 05:13:55 +0000
Subject: [R-sig-Geo] Optimized rasterOptions() for a (virtually)
 infinite RAM machine
In-Reply-To: <238339916.687861.1506139089109@mail.yahoo.com>
References: <238339916.687861.1506139089109.ref@mail.yahoo.com>
 <238339916.687861.1506139089109@mail.yahoo.com>
Message-ID: <CAAcGz98o6X4v=BjtoGdXLAy+ubevY_vkB2UEtpTTNcn4yjH4Ag@mail.gmail.com>

See Noam's post here for good advice,  avoiding temp files is very
important in your case:

https://discuss.ropensci.org/t/how-to-avoid-space-hogging-raster-tempfiles/864

For using data frames raster's cell index abstraction is super powerful and
sadly underused,  see tabularaster for some easy approaches. Don't store
coordinates explicitly,  for example,  at least not until you are ready to
plot with ggplot2.

Finally,  raster us generally great with NetCDF if you let it control the
task,  but different situations and file setups can really matter so feel
free to provide details if things aren't working well.  Generally using
raster can easily match the best you can achieve with the NetCDF API but
lots of specifics can bite.  Raster is generally not able to efficiently
crop space and time together,  for example but functions mapped to slice
extraction can he used to hone performance.

Cheers,  Mike

On Sat, 23 Sep 2017, 14:02 Thiago V. dos Santos via R-sig-Geo <
r-sig-geo at r-project.org> wrote:

> Dear all,
> I am using the raster package to process a total of 32 daily climate files
> supplied as netcdf files. Each file is a raster brick with 100 rows x 95
> cols x 54750 time slices and weighs about 1.5 GB.
> Essentially, all the processing I am performing on each netcdf file is:
> a) to subset a specific date rangeb) to extract values using points
> After that, I just convert the extracted data to data.tables and keep
> working in that format.
> Since I extract data for about 450 points, and append all the data in a
> huge data.table, I need to use a computer with as much RAM as possible.
> I ended up using a spot instance on Amazon EC2. Using an instance with 32
> cores and 244GB of RAM will cost me around $0.30/hour.
> Since I will be charged per hour, I need to optimize my code to get my
> results as fast as possible.
> I don't even copy my data to the instance's hard disk; I send the files
> directly to the ram disk (/dev/shm). Even using 48GB of ram disk to store
> the files, I'll still have 196GB of RAM.
> Under the scenario of having virtually infinite RAM memory, what would be
> the best rasterOptions() to make sure I am processing all my rasters in
> memory? Any other tips to benefit from such a large amount of RAM?
> Thanks, -- Thiago V. dos Santos
> Postdoctoral Research FellowDepartment of Climate and Space Science and
> EngineeringUniversity of Michigan
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From sja_sari at yahoo.com  Sat Sep 23 08:10:49 2017
From: sja_sari at yahoo.com (Seyed Jalil Alavi)
Date: Sat, 23 Sep 2017 06:10:49 +0000 (UTC)
Subject: [R-sig-Geo] Warning message in fit.variogram for regression kriging
References: <651784711.688721.1506147049927.ref@mail.yahoo.com>
Message-ID: <651784711.688721.1506147049927@mail.yahoo.com>

Dear all


I want to perform regression kriging in R using GSIF package or gstat manually. I want to use linear regression model fitted with quadratic term and interaction between variables as the base?model for regression kriging.


Here is my final LM model:


LM1 <-? lm(Site_Form ~ DEM + Profile_Curvature + TPI + TRASP + Valley_Depth + ????Vertical_Distance + I(Plan_Curvature^2) + I(Profile_Curvature^2) + ????I(TWI^2) + I(Valley_Depth^2) + I(Vertical_Distance^2) + TRASP:Vertical_Distance + ????DEM:TRASP + DEM:Vertical_Distance, data=Data)


When I want to run fit.variogram I encounter with this Warning message:

In fit.variogram(vr, model = vgm(4, "Sph", 400, 1)) :

? No convergence after 200 iterations: try different initial values?


I do not where the problem is. I changed the nugget, range and sill values. But it still remains.


I would be very grateful if somebody helps me.


Thank you very much


Regards


Jalil


?

	[[alternative HTML version deleted]]


From alobolistas at gmail.com  Sun Sep 24 21:05:58 2017
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sun, 24 Sep 2017 21:05:58 +0200
Subject: [R-sig-Geo] temp directory not actually reset by rasterOptions()
In-Reply-To: <CAAcGz99yYzpFkRzg-1Z6Sp4Ku9_cABUKei93tcheZMcARP6Y3w@mail.gmail.com>
References: <CAG4NReL=peZ43oihWtoPZ82J4mDs-78TF=S6rCJJku_9WgCL2w@mail.gmail.com>
 <CAAcGz99yYzpFkRzg-1Z6Sp4Ku9_cABUKei93tcheZMcARP6Y3w@mail.gmail.com>
Message-ID: <CAG4NReKDaAtCaqwoiXn1DHVXjgvac1Cyvs3Uq7c73PQQskigNg@mail.gmail.com>

Thanks. Yes, I also had found using Simon Urbanek?s unixtools to be an
alternative solution.
But this does not address the core of my question:
raster::rasterOptions(tmpdir="/home/alobo/provi")
does not work.
Agus

On Thu, Sep 21, 2017 at 12:34 AM, Michael Sumner <mdsumner at gmail.com> wrote:
> FYI It's also important to set the max size for raster,  default is way too
> low:
>
> https://discuss.ropensci.org/t/how-to-avoid-space-hogging-raster-tempfiles/864
>
> On Thu, 21 Sep 2017, 01:25 Agustin Lobo <alobolistas at gmail.com> wrote:
>
>> I have problems with an small /tmp partition
>> and thought using
>> rasterOptions(tmpdir="/home/alobo/provi")
>>
>> Nevertheless, this has no effect, and temp raster files keep growing
>> in the default directory within /tmp
>>
>> Is this a bug?
>>
>> Thanks
>> Agus
>>
>> > sessionInfo()
>> R version 3.3.3 (2017-03-06)
>> Platform: i686-pc-linux-gnu (32-bit)
>> Running under: Debian GNU/Linux buster/sid
>>
>> locale:
>>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> LC_TIME=en_US.UTF-8
>>  [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8
>> LC_MESSAGES=en_US.UTF-8
>>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>> LC_ADDRESS=C
>> [10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
>> LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] raster_2.5-8 sp_1.2-5
>>
>> loaded via a namespace (and not attached):
>> [1] rgdal_1.2-11    parallel_3.3.3  tools_3.3.3     Rcpp_0.12.12
>> grid_3.3.3
>> [6] lattice_0.20-35
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Dan.Kelley at Dal.Ca  Sun Sep 24 22:02:41 2017
From: Dan.Kelley at Dal.Ca (Daniel Kelley)
Date: Sun, 24 Sep 2017 20:02:41 +0000
Subject: [R-sig-Geo] problem with lcca inverse projection
Message-ID: <C2DBB7FD-88D6-442A-AF5E-A7A72F4521D6@dal.ca>

Hello. I am having difficulties with the inverse version of the lcca projection, so I made a test code that shows the problem. I?m enclosing a script after my address information, along with the output. Basically, as you can see by the ?BAD? flags at the ends of the lines, my tests with lcca are failing, whereas those with lcc are passing. I?m trying two spots on the globe to project and then unproject, and two lat_0 values.

Q: Am I doing something wrong, or is there a problem with the lcca projection? 

Thanks in advance, for any advice.

Dan.

Dan Kelley, Oceanography Department, Dalhousie University






R version 3.4.1 (2017-06-30) -- "Single Candle"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin15.6.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(rgdal)
> LON <- -135
> for (p in c("lcca", "lcc ")) {
+     for (lon0 in c(-180, -170)) {
+         for (lat0 in c(-90, -80)) {
+             for (LAT in c(-60, 60)) {
+                 proj <- sprintf("+proj=%s +lon_0=%.0f +lat_0=%.0f",
+                                 p, lon0, lat0)
+                 xy <- project(cbind(LON, LAT), proj=proj)
+                 ll <- project(xy, proj=proj, inv=TRUE)
+                 dlon <- abs(ll[1,1] - LON)
+                 dlat <- abs(ll[1,2] - LAT)
+                 ok <- if (dlon < 0.0001 && dlat < 0.0001) " OK" else "BAD"
+                 cat(sprintf("\"%s\" : %4.0fE %3.0fN -> %9.0fm %9.0fm -> %8.3fE %8.3fN %s\n",
+                             proj, LON, LAT, xy[1,1], xy[1,2], ll[1,1], ll[1,2], ok))
+             }
+         }
+         cat("\n")
+     }
+ }
"+proj=lcca +lon_0=-180 +lat_0=-90" : -135E -60N ->   2475298m   2475298m ->   45.000E -120.000N BAD
"+proj=lcca +lon_0=-180 +lat_0=-90" : -135E  60N ->  25074305m  25074305m ->   45.000E -240.000N BAD
"+proj=lcca +lon_0=-180 +lat_0=-80" : -135E -60N ->   2378510m   1307652m ->   42.223E -117.855N BAD
"+proj=lcca +lon_0=-180 +lat_0=-80" : -135E  60N ->  22316311m  21727017m ->   42.223E -224.927N BAD

"+proj=lcca +lon_0=-170 +lat_0=-90" : -135E -60N ->   2007862m   2867523m ->   45.000E -120.000N BAD
"+proj=lcca +lon_0=-170 +lat_0=-90" : -135E  60N ->  20339263m  29047477m ->   45.000E -240.000N BAD
"+proj=lcca +lon_0=-170 +lat_0=-80" : -135E -60N ->   1926825m   1678569m ->   42.223E -117.855N BAD
"+proj=lcca +lon_0=-170 +lat_0=-80" : -135E  60N ->  18078384m  25207137m ->   42.223E -224.927N BAD

"+proj=lcc  +lon_0=-180 +lat_0=-90" : -135E -60N ->  13525767m -25044282m -> -135.000E  -60.000N  OK
"+proj=lcc  +lon_0=-180 +lat_0=-90" : -135E  60N ->   2588932m  -4793661m -> -135.000E   60.000N  OK
"+proj=lcc  +lon_0=-180 +lat_0=-80" : -135E -60N ->  13525767m  32572859m -> -135.000E  -60.000N  OK
"+proj=lcc  +lon_0=-180 +lat_0=-80" : -135E  60N ->   2588932m  52823480m -> -135.000E   60.000N  OK

"+proj=lcc  +lon_0=-170 +lat_0=-90" : -135E -60N ->  10693582m -26378205m -> -135.000E  -60.000N  OK
"+proj=lcc  +lon_0=-170 +lat_0=-90" : -135E  60N ->   2046831m  -5048984m -> -135.000E   60.000N  OK
"+proj=lcc  +lon_0=-170 +lat_0=-80" : -135E -60N ->  10693582m  31238936m -> -135.000E  -60.000N  OK
"+proj=lcc  +lon_0=-170 +lat_0=-80" : -135E  60N ->   2046831m  52568157m -> -135.000E   60.000N  OK







From mahsasameti1384 at gmail.com  Mon Sep 25 04:44:20 2017
From: mahsasameti1384 at gmail.com (Mahsa Sameti)
Date: Mon, 25 Sep 2017 06:14:20 +0330
Subject: [R-sig-Geo] vgmST parameters
Message-ID: <CADN=v_wFSMYTQ2Ko-AVmp4vGJByO_Qh74XVxuMH3b+YQLgkH2g@mail.gmail.com>

Dear all

When working with vgmST function, how we choose starting values for space,
time anf joint vgm?
If we should choose them from sample stvariogram, why are they different in
different covariance models? I mean, initial values of space and time vgm in
separable model is different from sum-metric model. how we choose them?

Thanks alot.

	[[alternative HTML version deleted]]


From Andy.Bunn at wwu.edu  Mon Sep 25 19:42:33 2017
From: Andy.Bunn at wwu.edu (Andy Bunn)
Date: Mon, 25 Sep 2017 17:42:33 +0000
Subject: [R-sig-Geo] WorldClim Version2
Message-ID: <D5EE8B18.715A0%andy.bunn@wwu.edu>

Hello all, is anybody aware of a R package that gracefully works with
version 2 of the WorldClim data?

http://worldclim.org/version2


I have all the data extracted locally but I'm wondering if there is
something akin to getData in raster that will work with version 2 and not
1.4 as (the brilliant) raster package currently does.

Many thanks, Andy


From marcelino.delacruz at urjc.es  Mon Sep 25 20:32:33 2017
From: marcelino.delacruz at urjc.es (Marcelino de la Cruz Rot)
Date: Mon, 25 Sep 2017 20:32:33 +0200
Subject: [R-sig-Geo] WorldClim Version2
In-Reply-To: <D5EE8B18.715A0%andy.bunn@wwu.edu>
References: <D5EE8B18.715A0%andy.bunn@wwu.edu>
Message-ID: <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>

Hello Andy,

I've been using raster to play with WordlClim 2.0 and it works fine. For 
example:

# Download 2.5' arc P data of worldclim 2.0
# The file is 68.5 MB so it takes some time to download
P_url<- 
"http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_2.5m_prec.zip"
download.file(P_url, destfile="wc2.0_2.5m_prec.zip")
unzip("wc2.0_2.5m_prec.zip")

#? Generate a stack object? with all monthly precipitation layers
P_filenames<- paste("wc2.0_2.5m_prec_", c(paste(0,1:9, sep=""), 11,12), 
".tif",sep="")

prec2.5<- stack(P_filenames)

# Compute annual precipitation as a raster layer
P2.5<- sum(prec2.5)

# etc.

Cheers,

Marcelino


El 25/09/2017 a las 19:42, Andy Bunn escribi?:
> Hello all, is anybody aware of a R package that gracefully works with
> version 2 of the WorldClim data?
>
> http://worldclim.org/version2
>
>
> I have all the data extracted locally but I'm wondering if there is
> something akin to getData in raster that will work with version 2 and not
> 1.4 as (the brilliant) raster package currently does.
>
> Many thanks, Andy
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> .
>

-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From Andy.Bunn at wwu.edu  Mon Sep 25 23:14:53 2017
From: Andy.Bunn at wwu.edu (Andy Bunn)
Date: Mon, 25 Sep 2017 21:14:53 +0000
Subject: [R-sig-Geo] WorldClim Version2
In-Reply-To: <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>
References: <D5EE8B18.715A0%andy.bunn@wwu.edu>
 <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>
Message-ID: <D5EEBF24.71642%andy.bunn@wwu.edu>

Great. Thanks Marcelino. I have all the data dowloaded. I'm surprised that
there isn't a dedicated package for worldclim yet ? making one that ties
in with packages like BIEN would be great. Perhaps I'll work on it someday.

-A

On 9/25/17, 11:32 AM, "Marcelino de la Cruz Rot"
<marcelino.delacruz at urjc.es> wrote:

>Hello Andy,
>
>I've been using raster to play with WordlClim 2.0 and it works fine. For
>example:
>
># Download 2.5' arc P data of worldclim 2.0
># The file is 68.5 MB so it takes some time to download
>P_url<- 
>"http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_2.5m_prec.zi
>p"
>download.file(P_url, destfile="wc2.0_2.5m_prec.zip")
>unzip("wc2.0_2.5m_prec.zip")
>
>#  Generate a stack object  with all monthly precipitation layers
>P_filenames<- paste("wc2.0_2.5m_prec_", c(paste(0,1:9, sep=""), 11,12),
>".tif",sep="")
>
>prec2.5<- stack(P_filenames)
>
># Compute annual precipitation as a raster layer
>P2.5<- sum(prec2.5)
>
># etc.
>
>Cheers,
>
>Marcelino
>
>
>El 25/09/2017 a las 19:42, Andy Bunn escribi?:
>> Hello all, is anybody aware of a R package that gracefully works with
>> version 2 of the WorldClim data?
>>
>> http://worldclim.org/version2
>>
>>
>> I have all the data extracted locally but I'm wondering if there is
>> something akin to getData in raster that will work with version 2 and
>>not
>> 1.4 as (the brilliant) raster package currently does.
>>
>> Many thanks, Andy
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> .
>>
>
>-- 
>Marcelino de la Cruz Rot
>Depto. de Biolog?a y Geolog?a
>F?sica y Qu?mica Inorg?nica
>Universidad Rey Juan Carlos
>M?stoles Espa?a
>


From b.graeler at 52north.org  Tue Sep 26 10:27:37 2017
From: b.graeler at 52north.org (=?UTF-8?Q?Dr._Benedikt_Gr=c3=a4ler?=)
Date: Tue, 26 Sep 2017 10:27:37 +0200
Subject: [R-sig-Geo] vgmST parameters
In-Reply-To: <CADN=v_wFSMYTQ2Ko-AVmp4vGJByO_Qh74XVxuMH3b+YQLgkH2g@mail.gmail.com>
References: <CADN=v_wFSMYTQ2Ko-AVmp4vGJByO_Qh74XVxuMH3b+YQLgkH2g@mail.gmail.com>
Message-ID: <3740134a-c3d6-7c94-a2a3-ef7e52990901@52north.org>

Admittedly, the choice of the initial parameter is not an easy task. 
Different models combine the components in a different way. In the 
separable model for instance, the spatial and temporal variogram are set 
to a joint sill of 1 each where the sill of the entire variogram is a 
separate parameter. Contrary, the metric covariance model only has a 
single variogram model as input that represents the entire joint sill 
where others are a product or the sum of two or three models (see [1] 
for details). I wrote a shiny app that is available as source from [2] 
and a link to a running instance is listed at [3]. Running the app 
locally for one owns empirical variogram might help to identify the 
right starting values.

HTH,

  Ben

[1] 
https://cran.r-project.org/web/packages/gstat/vignettes/spatio-temporal-kriging.pdf
[2] https://github.com/BenGraeler/copulatheque/tree/master/spacetime
[3] http://ben.graeler.org/shiny-apps/


On 25/09/2017 04:44, Mahsa Sameti wrote:
> Dear all
> 
> When working with vgmST function, how we choose starting values for space,
> time anf joint vgm?
> If we should choose them from sample stvariogram, why are they different in
> different covariance models? I mean, initial values of space and time vgm in
> separable model is different from sum-metric model. how we choose them?
> 
> Thanks alot.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Dr. Benedikt Gr?ler
52?North Initiative for Geospatial Open Source Software GmbH
Martin-Luther-King-Weg 24
48155 Muenster, Germany

E-Mail: b.graeler at 52north.org
Fon: +49-(0)-251/396371-39
Fax: +49-(0)-251/396371-11

http://52north.org/
Twitter: @FiveTwoN

General Managers: Dr. Albert Remke, Dr. Andreas Wytzisk
Local Court Muenster HRB 10849
-------------- next part --------------
A non-text attachment was scrubbed...
Name: b_graeler.vcf
Type: text/x-vcard
Size: 445 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170926/c2c0b06f/attachment.vcf>

From hugoagcosta at gmail.com  Tue Sep 26 22:48:52 2017
From: hugoagcosta at gmail.com (Hugo Costa)
Date: Tue, 26 Sep 2017 21:48:52 +0100
Subject: [R-sig-Geo] Error in image classification (raster stack) with
 random forest (ranger) and GLM (glmnet)
Message-ID: <CADvFi5r_2PyT0ompGxstOgyuPSxexSy2iybSFF77-xuXhnk8Lw@mail.gmail.com>

Dear list

I'm fitting some models to classify a raster image. The prediction function
produces an error for RF (package ranger) and a GLM (package glmnet).

The error given by RF is:
Error in v[cells, ] <- predv : incorrect number of subscripts on matrix
(see reproducible example at the end)

although the error with my real data is:
Error in p[-naind, ] <- predv : number of items to replace is not a
multiple of replacement length

The error given by GLM is:
Error in cbind2(1, newx) %*% (nbeta[[i]]) :
  not-yet-implemented method for <data.frame> %*% <dgCMatrix>

I'm interested in using these specific packages due to specific
circumstances of my work. Any solution to solve this issue would be highly
appreciated.
Thanks
Hugo

library(raster)
library(ranger)
library(glmnet)
library(nnet)
data(iris)

# put iris data into a raster stack
r<-list()
for(i in 1:4){
  r[[i]]<-raster(nrows=10, ncols=15)
  r[[i]][]<-iris[,i]
}
r<-stack(r)
names(r)<-names(iris)[1:4]

# ranger
m1<-ranger(Species ~ ., data=iris)
p1<-predict(r,m1)

# glmnet
m2 <- glmnet(as.matrix(iris[,1:4]),iris[,5],family=c("multinomial"))
p2<-predict(r,m2,type="class",s=0)

# multinom (this works)
m3 <- multinom(Species ~ ., data=iris, trace=F)
p3<-predict(r,m3)
plot(p3)

	[[alternative HTML version deleted]]


From mauriziomarchi85 at gmail.com  Wed Sep 27 16:59:33 2017
From: mauriziomarchi85 at gmail.com (Maurizio Marchi)
Date: Wed, 27 Sep 2017 14:59:33 +0000
Subject: [R-sig-Geo] Soil as predictor in SDM
Message-ID: <CANJhsN36JcDpCOXLUc2WPmvSu9YjJkF=XLxhEwb97FtEkNPahg@mail.gmail.com>

Dear R users,
I would like to include soil as predictor in my model and in addition to
climatic variables. Anyway I have some doubts concerning the usd of
categorical values such as the format of my raster file. Actually, my soil
type data are categorical codes, should these codes be described as
categories prior to be used? Or shoul I reclassify my raster into numeric
values? My main concern is if I would create directional influence and bias
in the results.
Thanks
-- 
Maurizio Marchi
Skype ID: maurizioxyz
linux user 552742

	[[alternative HTML version deleted]]


From patrick.schratz at gmail.com  Wed Sep 27 17:05:36 2017
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Wed, 27 Sep 2017 17:05:36 +0200
Subject: [R-sig-Geo] Soil as predictor in SDM
In-Reply-To: <CANJhsN36JcDpCOXLUc2WPmvSu9YjJkF=XLxhEwb97FtEkNPahg@mail.gmail.com>
References: <CANJhsN36JcDpCOXLUc2WPmvSu9YjJkF=XLxhEwb97FtEkNPahg@mail.gmail.com>
Message-ID: <07666bc7-f2f6-d263-bd6c-2fe58ef16a20@gmail.com>

Hi Maurizio,

I do not really understand what exactly your problem is.
Getting the soil information stored in a raster file into a data.frame?
General use of factor variables in a model?
I also do not see the link between a factor variable and model bias.

Happy to help after clarification.

Regards, Patrick

On 09/27/2017 04:59 PM, Maurizio Marchi wrote:
> Dear R users,
> I would like to include soil as predictor in my model and in addition to
> climatic variables. Anyway I have some doubts concerning the usd of
> categorical values such as the format of my raster file. Actually, my soil
> type data are categorical codes, should these codes be described as
> categories prior to be used? Or shoul I reclassify my raster into numeric
> values? My main concern is if I would create directional influence and bias
> in the results.
> Thanks


From narayani.ku at gmail.com  Wed Sep 27 17:06:39 2017
From: narayani.ku at gmail.com (Narayani Barve)
Date: Wed, 27 Sep 2017 11:06:39 -0400
Subject: [R-sig-Geo] Soil as predictor in SDM
In-Reply-To: <CANJhsN36JcDpCOXLUc2WPmvSu9YjJkF=XLxhEwb97FtEkNPahg@mail.gmail.com>
References: <CANJhsN36JcDpCOXLUc2WPmvSu9YjJkF=XLxhEwb97FtEkNPahg@mail.gmail.com>
Message-ID: <CAE=+0-+w_FNxu3iC=3+MwEvcLfbYF+Y8zzaAyBXvaroBTqqVJA@mail.gmail.com>

You can use categorical variable as categorical even with number. If you
are using Maxent, then you can specify that this variable as categorical.
And maxent will take care of it. On the safer side instead of specifying
the categories as numbers, change categories to characters.

Regards,
Narayani

On Wed, Sep 27, 2017 at 10:59 AM, Maurizio Marchi <
mauriziomarchi85 at gmail.com> wrote:

> Dear R users,
> I would like to include soil as predictor in my model and in addition to
> climatic variables. Anyway I have some doubts concerning the usd of
> categorical values such as the format of my raster file. Actually, my soil
> type data are categorical codes, should these codes be described as
> categories prior to be used? Or shoul I reclassify my raster into numeric
> values? My main concern is if I would create directional influence and bias
> in the results.
> Thanks
> --
> Maurizio Marchi
> Skype ID: maurizioxyz
> linux user 552742
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From btupper at bigelow.org  Wed Sep 27 17:10:16 2017
From: btupper at bigelow.org (Ben Tupper)
Date: Wed, 27 Sep 2017 11:10:16 -0400
Subject: [R-sig-Geo] Soil as predictor in SDM
In-Reply-To: <CANJhsN36JcDpCOXLUc2WPmvSu9YjJkF=XLxhEwb97FtEkNPahg@mail.gmail.com>
References: <CANJhsN36JcDpCOXLUc2WPmvSu9YjJkF=XLxhEwb97FtEkNPahg@mail.gmail.com>
Message-ID: <B7975503-D750-4E73-B200-1292737AB511@bigelow.org>

Hi,

This is addressed briefly in section 4.2 of the dismo package vignette.

https://cran.r-project.org/web/packages/dismo/vignettes/sdm.pdf <https://cran.r-project.org/web/packages/dismo/vignettes/sdm.pdf>

Does that answer your question?

Ben

> On Sep 27, 2017, at 10:59 AM, Maurizio Marchi <mauriziomarchi85 at gmail.com> wrote:
> 
> Dear R users,
> I would like to include soil as predictor in my model and in addition to
> climatic variables. Anyway I have some doubts concerning the usd of
> categorical values such as the format of my raster file. Actually, my soil
> type data are categorical codes, should these codes be described as
> categories prior to be used? Or shoul I reclassify my raster into numeric
> values? My main concern is if I would create directional influence and bias
> in the results.
> Thanks
> -- 
> Maurizio Marchi
> Skype ID: maurizioxyz
> linux user 552742
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecocast Reports: http://seascapemodeling.org/ecocast.html
Tick Reports: https://report.bigelow.org/tick/
Jellyfish Reports: https://jellyfish.bigelow.org/jellyfish/




	[[alternative HTML version deleted]]


From rvaldezr at gmail.com  Wed Sep 27 17:23:04 2017
From: rvaldezr at gmail.com (Rolando Valdez)
Date: Wed, 27 Sep 2017 10:23:04 -0500
Subject: [R-sig-Geo] How to order statistical data (spatial panel)
In-Reply-To: <CAO-G=TEs5+Xh+3_T6M1U9wQ6R5bu_kgVWOfM-r3BuTWFwxr1vA@mail.gmail.com>
References: <CAFvJtoHnwOqtd8oWj_P3sfLRAX-uCHgGhDTi8Hr8TgDJkT++-w@mail.gmail.com>
 <CAO-G=TEs5+Xh+3_T6M1U9wQ6R5bu_kgVWOfM-r3BuTWFwxr1vA@mail.gmail.com>
Message-ID: <59cbc258.c2806b0a.75efa.fc17@mx.google.com>

Thank you for your answer, and sorry for the late. First I needed to solve the problem with the unbalanced data. Now I did, but I still don?t know how to merge the data.


Rolando Valdez

From: C?sar Soares
Sent: Saturday, September 16, 2017 7:12 AM
To: Rolando Valdez
Subject: Re: [R-sig-Geo] How to order statistical data (spatial panel)

hey, try the package CARBayesST in R, you should get over it with this.

https://cran.r-project.org/web/packages/CARBayesST/vignettes/CARBayesST.pdf

Hope it helps.

C?sar

2017-09-15 13:45 GMT-03:00 Rolando Valdez <rvaldezr at gmail.com>:
Hello all,

I will to perform a spatial panel data, I have statistical data of 2000+
territories in 5 years ordered as typical simple panel data (Each
territoriy has a unique geocode).

In the other hand I have a shapefile with those 2000+ territories, but,
when I've opened the dbf file, the order of units seems to have not order
criteria. These ones have geocode too (same than statistical).

The question is, how should I order my data to garantee a right matching
between statistical and geographical data?

--
Rol~

? ? ? ? [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



	[[alternative HTML version deleted]]


From rvaldezr at gmail.com  Wed Sep 27 17:25:17 2017
From: rvaldezr at gmail.com (Rolando Valdez)
Date: Wed, 27 Sep 2017 10:25:17 -0500
Subject: [R-sig-Geo] How to order statistical data (spatial panel)
In-Reply-To: <CAPP0wyiWOoQzkePZTKw_2Ow8pHJ=rb1TBqA7vnQe4wmBOmSXoQ@mail.gmail.com>
References: <CAPP0wyiWOoQzkePZTKw_2Ow8pHJ=rb1TBqA7vnQe4wmBOmSXoQ@mail.gmail.com>
Message-ID: <59cbc2dd.c8fa240a.6be53.e1fb@mx.google.com>

Yes, your right, I want to merge the statistical data with the spatial one. I?ll read about your suggestion,

Thank you.

Rolando Valdez

From: Kent Johnson
Sent: Saturday, September 16, 2017 12:02 PM
To: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] How to order statistical data (spatial panel)

>
>
> Date: Fri, 15 Sep 2017 11:45:59 -0500
> From: Rolando Valdez <rvaldezr at gmail.com>
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] How to order statistical data (spatial panel)
> Message-ID:
>         <CAFvJtoHnwOqtd8oWj_P3sfLRAX-uCHgGhDTi8Hr8TgDJkT++-w at mail.
> gmail.com>
> Content-Type: text/plain; charset="UTF-8"
>
> Hello all,
>
> I will to perform a spatial panel data, I have statistical data of 2000+
> territories in 5 years ordered as typical simple panel data (Each
> territoriy has a unique geocode).
>
> In the other hand I have a shapefile with those 2000+ territories, but,
> when I've opened the dbf file, the order of units seems to have not order
> criteria. These ones have geocode too (same than statistical).
>
> The question is, how should I order my data to garantee a right matching
> between statistical and geographical data?
>

I would think you would do a merge or join of the spatial data with your
statistical data using geocode as the key, rather than a cbind or similar
operation that depends on order. See ?sp::merge or ?sf::merge.sf.

Kent

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From mel at mbacou.com  Thu Sep 28 04:31:37 2017
From: mel at mbacou.com (Bacou, Melanie)
Date: Wed, 27 Sep 2017 22:31:37 -0400
Subject: [R-sig-Geo] WorldClim Version2
In-Reply-To: <D5EEBF24.71642%andy.bunn@wwu.edu>
References: <D5EE8B18.715A0%andy.bunn@wwu.edu>
 <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>
 <D5EEBF24.71642%andy.bunn@wwu.edu>
Message-ID: <a4106a43-9c5b-d7fc-db4f-e0c33537a2ce@mbacou.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20170927/d8f545c1/attachment.html>

From mauriziomarchi85 at gmail.com  Thu Sep 28 07:26:57 2017
From: mauriziomarchi85 at gmail.com (Maurizio Marchi)
Date: Thu, 28 Sep 2017 07:26:57 +0200
Subject: [R-sig-Geo] Soil as predictor in SDM
Message-ID: <CANJhsN1H4ML564DN_8SKaVH--2e+8kUnHvxeP6gR=ykMe+QCCg@mail.gmail.com>

Dear Narayani and Ben,
thank you very much for your replies. Actually I'm working with biomod2,
not dismo neither other models outside biomod2 (i.e. I use maxent but
inside the biomod2 package) but I did it, I saw that biomod2 is able to
handle categorical (factorial) raster too :)
Thanks

-- 
Maurizio Marchi
Skype ID: maurizioxyz
linux user 552742

	[[alternative HTML version deleted]]


From marcelino.delacruz at urjc.es  Thu Sep 28 09:44:17 2017
From: marcelino.delacruz at urjc.es (Marcelino de la Cruz Rot)
Date: Thu, 28 Sep 2017 09:44:17 +0200
Subject: [R-sig-Geo] WorldClim Version2
In-Reply-To: <a4106a43-9c5b-d7fc-db4f-e0c33537a2ce@mbacou.com>
References: <D5EE8B18.715A0%andy.bunn@wwu.edu>
 <f2f0c0c6-357c-a893-5577-2e2aca89e56b@urjc.es>
 <D5EEBF24.71642%andy.bunn@wwu.edu>
 <a4106a43-9c5b-d7fc-db4f-e0c33537a2ce@mbacou.com>
Message-ID: <212df301-09cb-88a8-7ebb-985f4fbca04d@urjc.es>

I'm afraid it don't.

At least in version 2.5.8, as it? appears from? this line in .wordclim():

 ?theurl <- 
paste("http://biogeo.ucdavis.edu/data/climate/worldclim/1_4/grid/cur/",
 ??????????? zip, sep = "")

Marcelino


El 28/09/2017 a las 4:31, Bacou, Melanie escribi?:
>
> I would assume `raster::getData("worldclim", ...)` uses WorldClim 
> version 2?
>
> --Mel.
>
>
> On 09/25/2017 05:14 PM, Andy Bunn wrote:
>> Great. Thanks Marcelino. I have all the data dowloaded. I'm surprised that
>> there isn't a dedicated package for worldclim yet ? making one that ties
>> in with packages like BIEN would be great. Perhaps I'll work on it someday.
>>
>> -A
>>
>> On 9/25/17, 11:32 AM, "Marcelino de la Cruz Rot"
>> <marcelino.delacruz at urjc.es>  wrote:
>>
>>> Hello Andy,
>>>
>>> I've been using raster to play with WordlClim 2.0 and it works fine. For
>>> example:
>>>
>>> # Download 2.5' arc P data of worldclim 2.0
>>> # The file is 68.5 MB so it takes some time to download
>>> P_url<-
>>> "http://biogeo.ucdavis.edu/data/worldclim/v2.0/tif/base/wc2.0_2.5m_prec.zi 
>>> p"
>>> download.file(P_url, destfile="wc2.0_2.5m_prec.zip")
>>> unzip("wc2.0_2.5m_prec.zip")
>>>
>>> #  Generate a stack object  with all monthly precipitation layers
>>> P_filenames<- paste("wc2.0_2.5m_prec_", c(paste(0,1:9, sep=""), 11,12),
>>> ".tif",sep="")
>>>
>>> prec2.5<- stack(P_filenames)
>>>
>>> # Compute annual precipitation as a raster layer
>>> P2.5<- sum(prec2.5)
>>>
>>> # etc.
>>>
>>> Cheers,
>>>
>>> Marcelino
>>>
>>>
>>> El 25/09/2017 a las 19:42, Andy Bunn escribi?:
>>>> Hello all, is anybody aware of a R package that gracefully works with
>>>> version 2 of the WorldClim data?
>>>>
>>>> http://worldclim.org/version2
>>>>
>>>>
>>>> I have all the data extracted locally but I'm wondering if there is
>>>> something akin to getData in raster that will work with version 2 and
>>>> not
>>>> 1.4 as (the brilliant) raster package currently does.
>>>>
>>>> Many thanks, Andy
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>> .
>>>>
>>> -- 
>>> Marcelino de la Cruz Rot
>>> Depto. de Biolog?a y Geolog?a
>>> F?sica y Qu?mica Inorg?nica
>>> Universidad Rey Juan Carlos
>>> M?stoles Espa?a
>>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> . 


-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From santiago.snchez at gmail.com  Thu Sep 28 18:40:43 2017
From: santiago.snchez at gmail.com (=?UTF-8?Q?Santiago_S=C3=A1nchez?=)
Date: Thu, 28 Sep 2017 16:40:43 +0000
Subject: [R-sig-Geo] commuteDistance error (gdistance)
Message-ID: <CAH5Y-yMGZaf5n+VQ-MJaGMYjrWm6K3shz7EgXN82t3bDzghHJg@mail.gmail.com>

Hello,

I am trying to estimate random walk resistance distances with
commuteDistance() function from the package gdistance. However, with some
of my rasters I've encountered this error:

Error in LU.dgC(a) : cs_lu(A) failed: near-singular A (or out of memory)

Sometimes it happens right away after I hit enter, in others the command
will run for along time (ca. 30 min) and hog up > 3 GB of memory, then halt
with this error. I'm wondering what may be causing the error?

I am building my transition objects with:

tr <- transition(ras, function(x) 1/mean(x), 8)

"ras" would be an irregularly shaped raster with resistance values ranging
from 1 to 10. The raster's CRS is "+proj=utm +zone=11 ellps=WGS84
+ellps=WGS84".

Any help is appreciated!

Thanks,
Santiago
-- 
==========================
Santiago Sanchez-Ramirez, PhD
Postdoctoral Associate
Ecology and Evolutionary Biology
University of Toronto
==========================

	[[alternative HTML version deleted]]


