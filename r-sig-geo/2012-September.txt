From mathieu.rajerison at gmail.com  Sat Sep  1 22:37:18 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Sat, 1 Sep 2012 22:37:18 +0200
Subject: [R-sig-Geo] shortest path
In-Reply-To: <CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
Message-ID: <CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120901/083dae26/attachment.pl>

From mathieu.rajerison at gmail.com  Sun Sep  2 15:46:12 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Sun, 2 Sep 2012 15:46:12 +0200
Subject: [R-sig-Geo] Lines Network to Graph
In-Reply-To: <CAGfc75k_YAbmgFtMNVKEGDYNZTBHccXymz-eOujh=W_0WtoNkw@mail.gmail.com>
References: <CAGfc75k_YAbmgFtMNVKEGDYNZTBHccXymz-eOujh=W_0WtoNkw@mail.gmail.com>
Message-ID: <CAGfc75kKDk=ebGK6SxSGT5ogUVSLE04Tz0ge9g=8NovZtCmq2w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120902/698f44c4/attachment.pl>

From mathieu.rajerison at gmail.com  Sun Sep  2 15:51:02 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Sun, 2 Sep 2012 15:51:02 +0200
Subject: [R-sig-Geo] shortest path
In-Reply-To: <CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
	<CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
Message-ID: <CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120902/12d7d73a/attachment.pl>

From aortizbobea at arec.umd.edu  Sun Sep  2 23:55:05 2012
From: aortizbobea at arec.umd.edu (Ariel Ortiz-Bobea)
Date: Sun, 2 Sep 2012 14:55:05 -0700 (PDT)
Subject: [R-sig-Geo] Error using unionSpatialPolygons
Message-ID: <1346622905249-7580881.post@n2.nabble.com>

Hello,

I was recycling some code I used a few months ago that involved using the
unionSpatialPolygons() of the maptools package. Back then I didn't have a
problem, now I get the following error:

>   usa_counties <- unionSpatialPolygons(usa_counties, data$fips)
Loading required package: rgeos
Loading required package: stringr
rgeos: (SVN revision 330)
 GEOS runtime version: 3.3.3-CAPI-1.7.4 
 Polygon checking: TRUE 
 WARNING! if you turn polygon checking off, and polygons are
 not valid in GEOS, you risk losing data as your R session may crash! 

Error: TopologyException: found non-noded intersection between LINESTRING
(-76.0029 36.5547, -75.9398 36.5547) and LINESTRING (-75.9742 36.5261,
-75.9857 36.5547) at -75.985664369999995 36.55470657

I tried an approach in an older message to a similar problem but didn't work
(see
http://r-sig-geo.2731867.n2.nabble.com/Problem-with-aggregating-UScensus2000-FL-data-td6641334.html).

Any help would be great.

Ariel

----- Here is my reproducible code: --------------------------------------

# packages
library(maps)
library(maptools)

# Import NC counties in "map" format
   usa_counties   <- map('county', region = c('north carolina'), plot=FALSE,
fill=TRUE)

# extract data from map
   data  <- data.frame(id=1:length(usa_counties$names),
name=usa_counties$names, polyname=gsub("\\s","",
sapply(strsplit(usa_counties$names,":"), function(x) x[1]))  ) # create name
id for merge   

# create county id (akin a fips code)
   data$fips <- sapply(1:dim(data)[1], function(x)
match(as.character(data$polyname)[x],unique(as.character(data$polyname))) )

# This is the key county with several polygons
   data[27:29,]

# convert to SptialPolygons
   usa_counties   <- map2SpatialPolygons(usa_counties, data$id, proj4string
= CRS(as.character(NA)))

# Merge polygons belonging to same county
# This is where the error occurs:
   usa_counties <- unionSpatialPolygons(usa_counties, data$fips)

----- My Session info ---------------------------------------------

> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] rgeos_0.2-5     stringr_0.6     maptools_0.8-14 lattice_0.20-6 
sp_0.9-99       foreign_0.8-49 
[7] maps_2.2-5     

loaded via a namespace (and not attached):
[1] grid_2.15.0  plyr_1.7.1   tools_2.15.0



-----
Ariel Ortiz-Bobea
PhD Candidate in Agricultural & Resource Economics
University of Maryland - College Park
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Error-using-unionSpatialPolygons-tp7580881.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Mon Sep  3 07:51:41 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 03 Sep 2012 07:51:41 +0200
Subject: [R-sig-Geo] shortest path
In-Reply-To: <CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
	<CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
	<CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>
Message-ID: <5044456D.6070903@uni-muenster.de>



On 09/02/2012 03:51 PM, Mathieu Rajerison wrote:
> I haven't tested my function and hope it works well.

I'd suggest not to send untested code to this list, but rather share
your own attempts of testing it.

I tried Barry's function, hacked it, tried to plot the line segments in
black, and the shortest path in red, but it didn't plot a connected
path, so I'd be happy to see such a proof of concept.

Also, I strongly suggest in the following to use CRAN versions for
packages, that is if we use the old igraph, do a

require(igraph0)

however if we say

require(igraph)

we'd understand this as the current version on CRAN. In this particular
case, the packages are incompatible, and follow completely different
assumptions.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From karl at huftis.org  Mon Sep  3 19:21:29 2012
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Mon, 3 Sep 2012 19:21:29 +0200
Subject: [R-sig-Geo] Error using unionSpatialPolygons
References: <1346622905249-7580881.post@n2.nabble.com>
Message-ID: <2251263.khJSC7eyiO@ID-99504.news.uni-berlin.de>

Ariel Ortiz-Bobea skreiv:

> I was recycling some code I used a few months ago that involved using the
> unionSpatialPolygons() of the maptools package. Back then I didn't have a
> problem, now I get the following error:
> 
>>usa_counties <- unionSpatialPolygons(usa_counties, data$fips)
> Loading required package: rgeos
> Loading required package: stringr
> rgeos: (SVN revision 330)
> GEOS runtime version: 3.3.3-CAPI-1.7.4
> Polygon checking: TRUE
> WARNING! if you turn polygon checking off, and polygons are
> not valid in GEOS, you risk losing data as your R session may crash!
> 
> Error: TopologyException: found non-noded intersection between LINESTRING
> (-76.0029 36.5547, -75.9398 36.5547) and LINESTRING (-75.9742 36.5261,
> -75.9857 36.5547) at -75.985664369999995 36.55470657

The data in the ?maps? package are probably buggy. Use the vector data from
http://www.naturalearthdata.com/ instead. They are of great quality and 
completely free (public domain).

-- 
Karl Ove Hufthammer
E-mail: karl at huftis.org
Jabber: huftis at jabber.no


From karl at huftis.org  Mon Sep  3 19:33:38 2012
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Mon, 3 Sep 2012 19:33:38 +0200
Subject: [R-sig-Geo] Error using unionSpatialPolygons
References: <1346622905249-7580881.post@n2.nabble.com>
	<2251263.khJSC7eyiO@ID-99504.news.uni-berlin.de>
Message-ID: <3733482.Rlfg6vDYp0@ID-99504.news.uni-berlin.de>

Karl Ove Hufthammer skreiv:

> The data in the ?maps? package are probably buggy. Use the vector data
> from http://www.naturalearthdata.com/ instead.

Or these:
http://nationalatlas.gov/mld/countyp.html

-- 
Karl Ove Hufthammer
E-mail: karl at huftis.org
Jabber: huftis at jabber.no


From Roger.Bivand at nhh.no  Mon Sep  3 19:47:33 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 3 Sep 2012 19:47:33 +0200
Subject: [R-sig-Geo] Error using unionSpatialPolygons
In-Reply-To: <2251263.khJSC7eyiO@ID-99504.news.uni-berlin.de>
References: <1346622905249-7580881.post@n2.nabble.com>
	<2251263.khJSC7eyiO@ID-99504.news.uni-berlin.de>
Message-ID: <alpine.LRH.2.02.1209031944100.24660@reclus.nhh.no>

On Mon, 3 Sep 2012, Karl Ove Hufthammer wrote:

> Ariel Ortiz-Bobea skreiv:
>
>> I was recycling some code I used a few months ago that involved using the
>> unionSpatialPolygons() of the maptools package. Back then I didn't have a
>> problem, now I get the following error:
>> 
>>> usa_counties <- unionSpatialPolygons(usa_counties, data$fips)
>> Loading required package: rgeos
>> Loading required package: stringr
>> rgeos: (SVN revision 330)
>> GEOS runtime version: 3.3.3-CAPI-1.7.4
>> Polygon checking: TRUE
>> WARNING! if you turn polygon checking off, and polygons are
>> not valid in GEOS, you risk losing data as your R session may crash!
>> 
>> Error: TopologyException: found non-noded intersection between LINESTRING
>> (-76.0029 36.5547, -75.9398 36.5547) and LINESTRING (-75.9742 36.5261,
>> -75.9857 36.5547) at -75.985664369999995 36.55470657
>
> The data in the ?maps? package are probably buggy. Use the vector data from
> http://www.naturalearthdata.com/ instead. They are of great quality and 
> completely free (public domain).

The state boundaries also have issues with dangles, despite passing the 
topology checks used when the maps package installs raw boundaries.

Another source of US boundary data is the US Census:

http://www.census.gov/geo/www/cob/

Roger

>
> -- 
> Karl Ove Hufthammer
> E-mail: karl at huftis.org
> Jabber: huftis at jabber.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From aortizbobea at arec.umd.edu  Mon Sep  3 22:04:48 2012
From: aortizbobea at arec.umd.edu (Ariel Ortiz-Bobea)
Date: Mon, 3 Sep 2012 13:04:48 -0700 (PDT)
Subject: [R-sig-Geo] Error using unionSpatialPolygons
In-Reply-To: <alpine.LRH.2.02.1209031944100.24660@reclus.nhh.no>
References: <1346622905249-7580881.post@n2.nabble.com>
	<2251263.khJSC7eyiO@ID-99504.news.uni-berlin.de>
	<alpine.LRH.2.02.1209031944100.24660@reclus.nhh.no>
Message-ID: <1346702688290-7580886.post@n2.nabble.com>

I think this will do it. I was looking for a quick way to do this without
involving a shape file but your suggestions is the clean/robust way. Thanks.
Ariel



-----
Ariel Ortiz-Bobea
PhD Candidate in Agricultural & Resource Economics
University of Maryland - College Park
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Error-using-unionSpatialPolygons-tp7580881p7580886.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Mon Sep  3 23:05:01 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 3 Sep 2012 23:05:01 +0200 (CEST)
Subject: [R-sig-Geo] rgdal compile error on RHEL5 [SEC=UNCLASSIFIED]
In-Reply-To: <122EC82C51E4074B995E23C4CC960017FEC8DE348A@BOM-VMBX-HO.bom.gov.au>
References: <122EC82C51E4074B995E23C4CC960017FEC8DE348A@BOM-VMBX-HO.bom.gov.au>
Message-ID: <alpine.LRH.2.02.1209032249470.25010@reclus.nhh.no>

On Mon, 13 Aug 2012, Andrew Harley wrote:

> Hi All,
>
> I'm getting an error when compiling the latest version of rgdal.
>
> It's saying unable to find GDALAllRegister in libgdal. We are running 
> gdal v1.8.0 from elgis repository. I noticed we had two versions of 
> gdal-config (one for 64 bit), but the error remains the same not matter 
> which one I use. Here are the ./configure options for our version of 
> gdal (from http://wiki.osgeo.org/wiki/Enterprise_Linux_GIS 
> <http://wiki.osgeo.org/wiki/Enterprise_Linux_GIS> ):
>
> ./configure --build=x86_64-redhat-linux-gnu 
> --host=x86_64-redhat-linux-gnu --target=x86_64-redhat-linux-gnu 
> --program-prefix= --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin 
> --sbindir=/usr/sbin --sysconfdir=/etc --datadir=/usr/share 
> --includedir=/usr/include --libdir=/usr/lib64 --libexecdir=/usr/libexec 
> --localstatedir=/var --sharedstatedir=/usr/com --mandir=/usr/share/man 
> --infodir=/usr/share/info --prefix=/usr --includedir=/usr/include/gdal/ 
> --datadir=/usr/share/gdal/ --with-threads=yes 
> --with-dods-root=/usr/lib64 --with-ogdi --with-cfitsio=/usr 
> --with-geotiff=external --with-tiff=external --with-libtiff=external 
> --with-libz --with-netcdf --with-hdf4 --with-hdf5 --with-geos 
> --with-jasper --with-png --with-gif --with-jpeg --with-odbc 
> --with-sqlite --with-mysql --with-curl --with-python --with-perl 
> --with-pcraster --with-ruby --with-java --with-xerces 
> --with-xerces-lib=-lxerces-c --with-xerces-inc=/usr/include 
> --with-jpeg12=no --enable-shared --with-gdal-ver=1.8.0 --with-! 
> spatialite=yes
>
> And here is the output of our install of rgdal. I've also tried pointing 
> it to the gdalconfig by using 
> --configure-args='--with-gdalconfig=/usr/bin/gdal-config', but the same 
> error occurs. Any help you guys can provide would be great!
>
> # R CMD INSTALL rgdal_0.7-12.tar.gz
> * installing to library '/usr/lib64/R/library'
> * installing *source* package 'rgdal' ...
> ** package 'rgdal' successfully unpacked and MD5 sums checked
> configure: gdal-config: gdal-config
> checking gdal-config usability... yes
> configure: GDAL: 1.8.0
> checking GDAL version > 1.5.4... yes
> checking for gcc... gcc -m64 -std=gnu99
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables...
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc -m64 -std=gnu99 accepts -g... yes
> checking for gcc -m64 -std=gnu99 option to accept ANSI C... none needed
> checking how to run the C preprocessor... gcc -m64 -std=gnu99 -E
> checking for egrep... grep -E
> checking for ANSI C header files... yes
> checking for sys/types.h... yes
> checking for sys/stat.h... yes
> checking for stdlib.h... yes
> checking for string.h... yes
> checking for memory.h... yes
> checking for strings.h... yes
> checking for inttypes.h... yes
> checking for stdint.h... yes
> checking for unistd.h... yes
> checking gdal.h usability... yes
> checking gdal.h presence... yes
> checking for gdal.h... yes
> checking gdal: linking with --libs only... no
> checking gdal: linking with --libs and --dep-libs... no
> configure: error: GDALAllRegister not found in libgdal.
> ERROR: configuration failed for package 'rgdal'
> * removing '/usr/lib64/R/library/rgdal'
>
> gdal-config output:
>
> # gdal-config --libs -lgdal # gdal-config --dep-libs -L/usr/lib64 
> -lgeos_c -lodbc -lodbcinst -lexpat -lxerces-c -ljasper -lhdf5 
> -L/usr/lib64/hdf -L/usr/lib64/hdf -lmfhdf -ldf -logdi -lgif -ljpeg 
> -lgeotiff -ltiff -lpng -lnetcdf -lcfitsio -L/usr/lib64 -lpq -lz 
> -lpthread -lm -lrt -ldl -ldap -ldapclient -ldapserver -lpthread -lrx 
> -L/usr/kerberos/lib64 -lcurl -ldl -lgssapi_krb5 -lkrb5 -lk5crypto 
> -lcom_err -lidn -lssl -lcrypto -lz -lxml2 -lz -lm -lspatialite 
> -L/usr/kerberos/lib64 -lcurl -ldl -lgssapi_krb5 -lkrb5 -lk5crypto 
> -lcom_err -lidn -lssl -lcrypto -lz -rdynamic -L/usr/lib64/mysql 
> -lmysqlclient -lz -lcrypt -lnsl -lm -L/usr/lib64 -lssl -lcrypto

This is obviously a difficult case. I suggest unpacking the tarball, 
running R CMD INSTALL rgdal, and examining the contents of the rgdal 
directory, specifically the config.log, config.status and errors.txt 
files. The final file should record the compiler and linker error 
messages. It is likely that you have multiple installs of libgdal.so*, 
and/or that you have not run ldconfig after installing GDAL.

Hope this helps,

Roger

>
> Thanks,
>
> Andrew Harley
> Linux Systems Administrator
> Climate and Water Division (ICT Operations)
> Bureau of Meteorology, Australia
> 03 9616 8441
> http://www.bom.gov.au/water/
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From benweinstein2010 at gmail.com  Tue Sep  4 01:19:09 2012
From: benweinstein2010 at gmail.com (Ben Weinstein)
Date: Mon, 3 Sep 2012 19:19:09 -0400
Subject: [R-sig-Geo] Validating Cost Paths - minimizing elevation change
In-Reply-To: <CAC28k7QXm+w0QDLv1Wy-HAB36VBGzQEUc5PADaHdhogyppxJ2w@mail.gmail.com>
References: <CAC28k7QXm+w0QDLv1Wy-HAB36VBGzQEUc5PADaHdhogyppxJ2w@mail.gmail.com>
Message-ID: <CAC28k7Ts2hz6bjoTbHsveaUtyVSaX-3vXokWqZOu+xrRmw=yog@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120903/c95343e7/attachment.pl>

From carolina.soto at ebd.csic.es  Tue Sep  4 12:59:03 2012
From: carolina.soto at ebd.csic.es (Carolina Soto Navarro)
Date: Tue, 04 Sep 2012 12:59:03 +0200
Subject: [R-sig-Geo] FANTER analysis with abundance data
Message-ID: <5045DEF7.4030404@ebd.csic.es>

I'd like to implement the FANTER analysis, described in Calenge
& Basille (2008)but I have a problem with the vector of utilization weights...

In the adehabitat examples, the authors use the code

Dp <- count.points(locs, kasc)[litab$index]

to get the named vector of utilization weights (calculated by numbering the
locations of chamois groups in each pixel of the map) but in my case what
I have is an excel file with the number of tracks per grid (not georeferenced)
detected of my specie standardized to 1 so I would like to know how can I
use this dataset to perform this analysis because as I understand this is
already a vector of utilization weights but I dont know how to import it to R.

Thanks!!

Carolina


-- 
Carolina ?ngela Soto Navarro
PhD student JAE-Pre Fellow
Department of Conservation Biology
Estaci?n Biol?gica de Do?ana (CSIC)
C/Am?rico Vespucio s/n
41092 Sevilla Spain
Tel. 0034  954466700
carolina.soto at ebd.csic.es
http://www.ebd.csic.es/carnivoros/personal/soto/


From jacobvanetten at yahoo.com  Tue Sep  4 15:18:33 2012
From: jacobvanetten at yahoo.com (Jacob van Etten)
Date: Tue, 4 Sep 2012 14:18:33 +0100 (BST)
Subject: [R-sig-Geo] Validating Cost Paths - minimizing elevation change
In-Reply-To: <1346726834.33272.YahooMailNeo@web29704.mail.ird.yahoo.com>
References: <CAC28k7QXm+w0QDLv1Wy-HAB36VBGzQEUc5PADaHdhogyppxJ2w@mail.gmail.com>
	<CAC28k7Ts2hz6bjoTbHsveaUtyVSaX-3vXokWqZOu+xrRmw=yog@mail.gmail.com>
	<1346726834.33272.YahooMailNeo@web29704.mail.ird.yahoo.com>
Message-ID: <1346764713.93196.YahooMailNeo@web29701.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120904/9c8ca1c2/attachment.pl>

From bellard.celine at gmail.com  Tue Sep  4 21:26:57 2012
From: bellard.celine at gmail.com (=?ISO-8859-1?Q?C=E9line_Bellard?=)
Date: Tue, 04 Sep 2012 21:26:57 +0200
Subject: [R-sig-Geo] raster package
Message-ID: <50465601.6090206@gmail.com>

Hello,

As you see in my example, I can't use plot function from raster library. 
First thing is that it seems that plot function hasn't the priority over 
the plot function from graphics package. But even if I use explicitly 
the plot function from raster package, it don't work. Have you any 
suggestion ?

> library(raster)
> r=raster()
> values(r)=runif(ncell(r))
> r
class       : RasterLayer
dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
resolution  : 1, 1  (x, y)
extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84
data source : in memory
names       : layer
values      : 4.09456e-06, 0.9999978  (min, max)

> plot(r)
Erreur dans as.double(y) :
cannot coerce type 'S4' to vector of type 'double'
> detach("package:raster")
> plot(r)
Erreur dans as.double(y) :
cannot coerce type 'S4' to vector of type 'double'
> library(raster)
> search()
[1] ".GlobalEnv"        "package:raster"    "package:sp" "tools:rstudio"
[5] "package:stats"     "package:graphics"  "package:grDevices" 
"package:utils"
[9] "package:datasets"  "package:methods"   "Autoloads" "package:base"
> raster:::plot(r)
Erreur dans get(name, envir = asNamespace(pkg), inherits = FALSE) :
objet 'plot' introuvable

Thank you for your help,

C?line

-- 
C?line Bellard, PhD student

Lab ESE, UMR CNRS 8079

Univ Paris-Sud Tel  (0033/0) 1 69 15 56 85

Bat 362

F-91405  Orsay Cedex FRANCE


From tim.appelhans at gmail.com  Wed Sep  5 08:17:44 2012
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Wed, 05 Sep 2012 08:17:44 +0200
Subject: [R-sig-Geo] raster package
In-Reply-To: <50465601.6090206@gmail.com>
References: <50465601.6090206@gmail.com>
Message-ID: <5046EE88.6080408@gmail.com>

Dear Celine,
I am not sure whether you can use the native graphics for plotting 
raster objects. Plotting of raster objects is usually done using the 
spplot() function which is built on lattice (ultimately grid) graphics.
In case you want to try if plot() also works, I think you only need two 
:: when calling a package specific function. So, raster::plot(r) should 
work.

Hope that helps,

Tim

On 4/9/2012 21:26, C?line Bellard wrote:
> Hello,
>
> As you see in my example, I can't use plot function from raster 
> library. First thing is that it seems that plot function hasn't the 
> priority over the plot function from graphics package. But even if I 
> use explicitly the plot function from raster package, it don't work. 
> Have you any suggestion ?
>
>> library(raster)
>> r=raster()
>> values(r)=runif(ncell(r))
>> r
> class       : RasterLayer
> dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
> resolution  : 1, 1  (x, y)
> extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +datum=WGS84
> data source : in memory
> names       : layer
> values      : 4.09456e-06, 0.9999978  (min, max)
>
>> plot(r)
> Erreur dans as.double(y) :
> cannot coerce type 'S4' to vector of type 'double'
>> detach("package:raster")
>> plot(r)
> Erreur dans as.double(y) :
> cannot coerce type 'S4' to vector of type 'double'
>> library(raster)
>> search()
> [1] ".GlobalEnv"        "package:raster"    "package:sp" "tools:rstudio"
> [5] "package:stats"     "package:graphics"  "package:grDevices" 
> "package:utils"
> [9] "package:datasets"  "package:methods"   "Autoloads" "package:base"
>> raster:::plot(r)
> Erreur dans get(name, envir = asNamespace(pkg), inherits = FALSE) :
> objet 'plot' introuvable
>
> Thank you for your help,
>
> C?line
>

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Informatics
Philipps Universit?t Marburg
Deutschhausstra?e 12
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957


From rachel.saf at mail.huji.ac.il  Wed Sep  5 08:24:52 2012
From: rachel.saf at mail.huji.ac.il (Rachel Chocron)
Date: Wed, 5 Sep 2012 09:24:52 +0300
Subject: [R-sig-Geo] Question about the functions calculating SAR and CAR
	models in spdep package
Message-ID: <CACyw5USj+K_CYHzCRLM+Ye2c-+qC=7xrRjti7pV7xkaT-hcAMg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120905/1bfce0e4/attachment.pl>

From edzer.pebesma at uni-muenster.de  Wed Sep  5 08:31:58 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 05 Sep 2012 08:31:58 +0200
Subject: [R-sig-Geo] raster package
In-Reply-To: <5046EE88.6080408@gmail.com>
References: <50465601.6090206@gmail.com> <5046EE88.6080408@gmail.com>
Message-ID: <5046F1DE.8060705@uni-muenster.de>

I can run your example without problems; the problem might be somehwere
else (seen the error message, forgot the cause). Have you tried starting
R without data, e.g. as

R --vanilla

?

On 09/05/2012 08:17 AM, Tim Appelhans wrote:
> Dear Celine,
> I am not sure whether you can use the native graphics for plotting
> raster objects. Plotting of raster objects is usually done using the
> spplot() function which is built on lattice (ultimately grid) graphics.
> In case you want to try if plot() also works, I think you only need two
> :: when calling a package specific function. So, raster::plot(r) should
> work.
> 
> Hope that helps,
> 
> Tim
> 
> On 4/9/2012 21:26, C?line Bellard wrote:
>> Hello,
>>
>> As you see in my example, I can't use plot function from raster
>> library. First thing is that it seems that plot function hasn't the
>> priority over the plot function from graphics package. But even if I
>> use explicitly the plot function from raster package, it don't work.
>> Have you any suggestion ?
>>
>>> library(raster)
>>> r=raster()
>>> values(r)=runif(ncell(r))
>>> r
>> class       : RasterLayer
>> dimensions  : 180, 360, 64800  (nrow, ncol, ncell)
>> resolution  : 1, 1  (x, y)
>> extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
>> coord. ref. : +proj=longlat +datum=WGS84
>> data source : in memory
>> names       : layer
>> values      : 4.09456e-06, 0.9999978  (min, max)
>>
>>> plot(r)
>> Erreur dans as.double(y) :
>> cannot coerce type 'S4' to vector of type 'double'
>>> detach("package:raster")
>>> plot(r)
>> Erreur dans as.double(y) :
>> cannot coerce type 'S4' to vector of type 'double'
>>> library(raster)
>>> search()
>> [1] ".GlobalEnv"        "package:raster"    "package:sp" "tools:rstudio"
>> [5] "package:stats"     "package:graphics"  "package:grDevices"
>> "package:utils"
>> [9] "package:datasets"  "package:methods"   "Autoloads" "package:base"
>>> raster:::plot(r)
>> Erreur dans get(name, envir = asNamespace(pkg), inherits = FALSE) :
>> objet 'plot' introuvable
>>
>> Thank you for your help,
>>
>> C?line
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From roman.lustrik at gmail.com  Wed Sep  5 10:30:28 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Wed, 5 Sep 2012 10:30:28 +0200
Subject: [R-sig-Geo] Fwd:  raster package
In-Reply-To: <50470C0F.6070601@gmail.com>
References: <50465601.6090206@gmail.com>
	<CAHT1vpip+7Oq7BkChuzukwoKKm262wSeZKA-YceyepYaAg-hcQ@mail.gmail.com>
	<50470C0F.6070601@gmail.com>
Message-ID: <CAHT1vpjqxPcrbAMyihuLSsGwF-N-PtJRRdn3tB22QrEj_EqrYA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120905/f60891a7/attachment.pl>

From imranserver at yahoo.com  Wed Sep  5 15:01:52 2012
From: imranserver at yahoo.com (Muhammad Imran)
Date: Wed, 5 Sep 2012 06:01:52 -0700 (PDT)
Subject: [R-sig-Geo] How to perform K-fold cross validation for the spdep
	spautolm (CAR) and spgwr GWR models
Message-ID: <1346850112.99176.YahooMailClassic@web160703.mail.bf1.yahoo.com>


hi people,

My objective is to perform K-fold cross validation for the spdep spautolm (CAR) and spgwr GWR model objects, to evaluate the models predictive performance (using model predictions and sampled data). For this, I have been searching for some functions/packages. Any idea/R-code/tutorial? The R-packages Design and DAAG only take 'lm' object to perform K-fold CV. With krige.cv I can perform the CV for the CAR and GWR residuals, but would that serve the objective?

Thanks in advance!

-Imran


From imranserver at yahoo.com  Wed Sep  5 16:20:08 2012
From: imranserver at yahoo.com (Muhammad Imran)
Date: Wed, 5 Sep 2012 07:20:08 -0700 (PDT)
Subject: [R-sig-Geo] K-fold cross validation for the spdep spautolm (CAR)
	and spgwr GWR models?
Message-ID: <1346854808.18351.YahooMailClassic@web160705.mail.bf1.yahoo.com>


hi people,

My objective is to perform K-fold cross validation for the spdep spautolm (CAR) and spgwr GWR model objects, to evaluate the models predictive performance (using model predictions and sampled data). For this, I have been searching for some functions/packages. Any idea/R-code/tutorial? The R-packages Design and DAAG only take 'lm' object to perform K-fold CV. With krige.cv I can perform the CV for the CAR and GWR residuals, but would that
serve the objective?
 
Thanks in advance!

-Imran


From linda at statnetconsulting.com  Wed Sep  5 23:38:52 2012
From: linda at statnetconsulting.com (Linda Pickle)
Date: Wed, 5 Sep 2012 17:38:52 -0400
Subject: [R-sig-Geo] fitting variogram models
Message-ID: <000001cd8bae$d82e0f40$888a2dc0$@com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120905/f61d8a94/attachment.pl>

From mintibezabih at gmail.com  Thu Sep  6 11:58:13 2012
From: mintibezabih at gmail.com (Mintewab Bezabih)
Date: Thu, 6 Sep 2012 10:58:13 +0100
Subject: [R-sig-Geo] climate data interpolation
Message-ID: <CAJfxP+poggAz-wnQ7qLU0YHTmPExcrj-+0YrfkaBAqHG2sVCog@mail.gmail.com>

Dear the R-sig-geo community,


I have been trying to interpolate rainfall and temperature data for 8
stations and that needs to be interpolated at a farm level so that I
have farm level temperature and rainfall observations.

I have attempted handling the problem with the code below and while I
succedded in getting results, my values look very wrong.

I am now revisiting what I did and I realized that perhaps it is 3d
kriging in gstat that I have to do. Since my grasp of R is not that
great, I just thought of asking you for tips on how I do a correct
interpolation.

Below is a reproducable example of what I did

many thanks
minti


#library(mgcv)
library(fields)

x <-1:20
y<- runif(20)
z<- c(11, 15, 17, 2, 18, 6, 7, NA, 12, 10,21, 25, 27, 12, 28, 16,
17, NA, 12, 10)
d<- c(11, 15, 17, 2, 18, 6, 7, NA, 12, 10,21, 25, 27, 12, 28, 16,
17, NA, 12, 10)

z <- dat$sum360
x <- dat$latitud1
y <- dat$longtud1
d <- dat$seqnum
d1 <- dat$seqnum
d2 <- dat$seqnum
d[ is.na(x) ] <- NA
d[ is.na(y) ] <- NA
d[ is.na(z) ] <- NA


F<-data.frame(x, y, z,d, d1,d2)
mydataset<-data.frame(x, y, z,d)
airquality<-mydataset[!is.na(x) & !is.na(y)& !is.na(z)& !is.na(d), ]
airquality[complete.cases(mydataset),]


x<- airquality[, c(1)]
y<- airquality[, c(2)]
z<- airquality[, c(3)]
d1<- airquality[, c(4)]

#xmin <- min(x)
#xmax <- max(x)
#ymin <- min(y)
#ymax <- max(y)


xmin <- min(x) - 1/2
xmax <- max(x) + 1/2
ymin <- min(y) - 1/2
ymax <- max(y) + 1/2


F1<-data.frame(x, y,z)

tpsfit <- Tps(cbind(x, y), z, scale.type="unscaled")
#tpsfit2 <- Tps(cbind(x, y), z, lambda=20*tpsfit$lambda,scale.type="unscaled")


surface (tpsfit)
out.p<- predict(tpsfit)

library(raster)
#setwd("f:/")

#setwd("f:/climate change data/climateChange paper/thin plate/raster2/raster")
#r2 <- raster("current_bio_1_1.asc")
#res(r2) <- 0.00008
#r2 <- raster("amhara_coordinates GCS_WGS 1984.asc")
r <- raster(as.matrix(F1))
extent(r) <- extent(xmin, xmax, ymin, ymax)
#r2 <- raster("raster_asc.txt")
#r2 <- expand(r2, extent(r2)+0.175)
#newExtent <- extent(c(60, 100, 0, 40))
#newExtent <- extent(c(30, 45, 10, 40))
#newExtent <- extent(c(0, 84, 0, 84))
r2 <- crop(r, extent(r))

plot(r2)

#ra <- aggregate(r, 10)
#xy <- data.frame(xyFromCell(ra, 1:ncell(ra)))
#v <- getValues(ra)
#tps <- Tps(xy, v)
#m <- raster(r2)
p <- interpolate(r2, tpsfit)
#p <- mask(p, r2)
plot(p)
#se <- interpolate(p, tpsfit, fun=predict.se)
#se <- mask(se, r3)
#plot(se)

#xy <- data.frame(x,y,z)
require(sp)
head(as.data.frame(as(p, "SpatialGridDataFrame")))
result1 <- as.data.frame(as(p, "SpatialGridDataFrame"))
result1 <- data.frame(result1, d1)
#names(result1)[names(result1)=="d1"]<-"d1"
#result2<-data.frame(d1=row.names(result1),result1[, c("layer","s1","s2")])
result2<-merge(F, result1,
by=c("d1"),all.x=TRUE,all.y=TRUE,all.z=TRUE,all.layer=TRUE)
#result2<-merge(F, result1, by=c("d1"))

#result3<-data.frame(result2[ , c("x","y","z", "layer")])

#result3<-result2[!duplicated(result2[,c("x","y","z","d1")]),]

result3<-result2[!duplicated(result2[,c("d1")]),]

#result3<-data.frame(result3[ , c("x","y","z", "layer")])

#result2<-merge(mydataset, result1, by=c("x","y"),all.x=TRUE,all.y=TRUE)
write.table(result3, file = "f:/climate change data/climateChange
paper/thin plate/interpolated_precip.csv", sep = ",", col.names = NA)


From leiwang.uconn at gmail.com  Thu Sep  6 23:11:30 2012
From: leiwang.uconn at gmail.com (Lei Wang)
Date: Thu, 6 Sep 2012 17:11:30 -0400
Subject: [R-sig-Geo] About an Error coming from the Moran Eigenvectors
	method in spdep package
Message-ID: <A2646881-2492-4F5F-8DB4-BFA00874CBE9@gmail.com>

Dear listers and Prof. Bivand,

I started working on spatial econometrics and R three weeks ago and this is my first time posting here. 

My dependent variable is a count variable and its variance is much greater than its mean. So I choose negative binomial regression and use glm.nb() to do it. I also suspect that there maybe spatial autocorrelation issue in the residuals. In order to reduce this residual spatial autocorrelation in the error of my model, I am using the Moran Eigenvectors approach.  And I use the inverse distance matrix as the weights. Below is my model and the error message from R:

fypME<-ME(Count ~ CTN + CSTN + Price + Rating, data=fyp, family=negative.binomial(theta=2.9, link=log), listw=fyp.dists.inv.listw, alpha=0.05)

Error in if (pIZ > alpha) stop("base correlation larger than alpha") : missing value where TRUE/FALSE needed

Could anybody help me with this? What does this error mean? and how should I fix this?

Thanks a lot!

Michelle

From Roger.Bivand at nhh.no  Fri Sep  7 09:30:04 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 7 Sep 2012 09:30:04 +0200 (CEST)
Subject: [R-sig-Geo] About an Error coming from the Moran Eigenvectors
 method in spdep package
In-Reply-To: <A2646881-2492-4F5F-8DB4-BFA00874CBE9@gmail.com>
References: <A2646881-2492-4F5F-8DB4-BFA00874CBE9@gmail.com>
Message-ID: <alpine.LRH.2.02.1209070915250.8028@reclus.nhh.no>

On Thu, 6 Sep 2012, Lei Wang wrote:

> Dear listers and Prof. Bivand,
>
> I started working on spatial econometrics and R three weeks ago and this 
> is my first time posting here.
>
> My dependent variable is a count variable and its variance is much 
> greater than its mean. So I choose negative binomial regression and use 
> glm.nb() to do it. I also suspect that there maybe spatial 
> autocorrelation issue in the residuals. In order to reduce this residual 
> spatial autocorrelation in the error of my model, I am using the Moran 
> Eigenvectors approach.  And I use the inverse distance matrix as the 
> weights. Below is my model and the error message from R:
>
> fypME<-ME(Count ~ CTN + CSTN + Price + Rating, data=fyp, 
> family=negative.binomial(theta=2.9, link=log), 
> listw=fyp.dists.inv.listw, alpha=0.05)
>
> Error in if (pIZ > alpha) stop("base correlation larger than alpha") : 
> missing value where TRUE/FALSE needed

The message means that when testing (pIZ > alpha), either pIZ or alpha is 
NA, alpha is given, so pIZ must be NA. It is the p-value from a bootstrap 
Moran's I on the glm residuals. You will either need to make your data 
available for checking - save(fyp, fyp.dists.inv.listw, file="fyp.RData"), 
generate the same problem with a data set distributed with an R package 
(it doesn't occur with the NC SIDS data), or run debug(ME) before running 
ME(), stepping through to lines:

     glm_res <- glm_fit$y - glm_fit$fitted.values
     cpvar <- crossprod(glm_res)
     mRES <- MIR_a(glm_res, sW = sW, n = n, cpvar = cpvar, S0 = S0,
         nsim = nsim, stdev = stdev)
     pIZ <- mRES$p.value

and check each of the returned values for NAs. Do you have any missing 
values in your variables. I don't think so, but for me on 2.15.1:

> options("na.action")
$na.action
[1] "na.omit"

rather than "na.fail", I expected "na.fail". If you do:

options(na.action="na.fail")

does this make a difference (almost certainly not, because the weights 
will have a different dimension from the residuals, and the bootstrap 
Moran will fail earlier)?

Hope this helps,

Roger

>
> Could anybody help me with this? What does this error mean? and how 
> should I fix this?
>
> Thanks a lot!
>
> Michelle
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Fri Sep  7 09:54:28 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 7 Sep 2012 09:54:28 +0200 (CEST)
Subject: [R-sig-Geo] How to perform K-fold cross validation for the
 spdep spautolm (CAR) and spgwr GWR models
In-Reply-To: <1346850112.99176.YahooMailClassic@web160703.mail.bf1.yahoo.com>
References: <1346850112.99176.YahooMailClassic@web160703.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.02.1209070931190.8028@reclus.nhh.no>

On Wed, 5 Sep 2012, Muhammad Imran wrote:

>
> hi people,
>
> My objective is to perform K-fold cross validation for the spdep 
> spautolm (CAR) and spgwr GWR model objects, to evaluate the models 
> predictive performance (using model predictions and sampled data). For 
> this, I have been searching for some functions/packages. Any 
> idea/R-code/tutorial? The R-packages Design and DAAG only take 'lm' 
> object to perform K-fold CV. With krige.cv I can perform the CV for the 
> CAR and GWR residuals, but would that serve the objective?

Is your objective sensible? The model object returned by spautolm() does 
not have a predict method, so I don't understand how you can predict for 
dropped observations. Since in any case the coefficients of a CAR (or SAR) 
error model should only differ from OLS a little, the prediction from the 
OLS part (X %*% b) should be adequate, but you'll have a hard time getting 
the prediction standard errors, which involve (I - \lambda W)^{-1}.

Why anyone would try to use GWR for prediction is beyond my comprehension. 
As I've said before, GWR can find pattern in simulated random noise data 
sets. The differences in local coefficients are not "statistically" 
significant, but they look pretty enough anyway, and who bothers about 
significant if the map is pretty? For prediction, simply use 
geostatistics, possibly with an implied disc by including only k-nearest 
data points.

The ipred package provides the general framework for testing in errorest() 
methods, but there are none provided there for these models. The tools are 
there to "roll your own".

Hope this helps,

Roger

>
> Thanks in advance!
>
> -Imran
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Fri Sep  7 10:19:24 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 7 Sep 2012 10:19:24 +0200 (CEST)
Subject: [R-sig-Geo] Moran I with Edge effect correction
In-Reply-To: <CAN-F-q1HOiVVO-gTnqoAdERn20NCd85bfohg7sdRAVScAWN4eQ@mail.gmail.com>
References: <1345746735.54752.YahooMailNeo@web142301.mail.bf1.yahoo.com>
	<alpine.LRH.2.02.1208250835460.6849@reclus.nhh.no>
	<CAN-F-q1HOiVVO-gTnqoAdERn20NCd85bfohg7sdRAVScAWN4eQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1209071002230.8028@reclus.nhh.no>

On Mon, 27 Aug 2012, laurence delattre wrote:

> Hi,
>   This is very interesting. I would like to know a little bit more about
> how to use glist=argument to reduce weights on observations selected as
> members of an edge set and how to identify such members.

There isn't a simple answer, so each case would need to be guided by the 
analyst. If a concave hull is available, one could down-weight all links 
to observations in the set of members of the concave hull. If the 
observations have polygon support, one could mark all polygons with less 
that 100% internal shared boundaries (having an external boundary) for 
down-weighting. The down-weighting might be done by iterating over the 
links in the nb object to apply the downweighting factor to each link. 
There is a discussion of concave hulls on:

http://r.789695.n4.nabble.com/Concave-hull-td863710.html

example(nc.sids)
nn <- card(ncCR85_nb)
summary(nn)
nc.sids$nn <- factor(nn)
spplot(nc.sids, "nn", col.regions=rev(grey.colors(9)))


But your choice of weights style will have a major impact, so for binary 
weights, the low neighbour count observations are already down-weighted. 
The problem of up-weighted low neighbour count observations is most 
pressing for row-standardised weights, and there the glist= argument will 
not help. These topics are not well covered in the literature, I'm afraid.

Hope this helps,

Roger



>  Thanks in advance.
> Laurence
>
> 2012/8/25 Roger Bivand <Roger.Bivand at nhh.no>
>
>> On Thu, 23 Aug 2012, Kitty Lee wrote:
>>
>>  Hi. I have some study areas that are very irregularly shaped. I wonder if
>>> there is a way to adjust for edge effect in computing Moran's I or Geary C?
>>>
>>
>> The typical approach would be through the weights matrix, depending on how
>> W is constructed. If you row-standardise, edge observations will be
>> stressed, but with binary weights they are less salient. You could also
>> intervene directly to reduce weights on observations selected as members of
>> an edge set, through the glist= argument in nb2listw().
>>
>> Hope this helps,
>>
>> Roger
>>
>>
>>
>>> Any leads would be really appreciated.
>>>
>>> K.
>>>
>>> ______________________________**_________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>> ______________________________**_________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>
>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From laurawette at gmail.com  Fri Sep  7 11:52:55 2012
From: laurawette at gmail.com (Laura Wette)
Date: Fri, 7 Sep 2012 11:52:55 +0200
Subject: [R-sig-Geo] Is it possible to calculate the semivariances of a
 variogram between one specific point and all other points in space?
Message-ID: <CADfOX6y9CxAy32CZPvNVh8VMP-xV1HS6tteiU+sCZ5SW5tmcrA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120907/3c6646a9/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Sep  7 12:43:00 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 07 Sep 2012 12:43:00 +0200
Subject: [R-sig-Geo] Is it possible to calculate the semivariances of a
 variogram between one specific point and all other points in space?
In-Reply-To: <CADfOX6y9CxAy32CZPvNVh8VMP-xV1HS6tteiU+sCZ5SW5tmcrA@mail.gmail.com>
References: <CADfOX6y9CxAy32CZPvNVh8VMP-xV1HS6tteiU+sCZ5SW5tmcrA@mail.gmail.com>
Message-ID: <5049CFB4.5050700@uni-muenster.de>

The variogram cloud might be what you're looking for. In the output
table, all individual point pairs (up to some spatial separation
distance) are reported, and identified by columns "left" and "right".
Selecting a point (last example) needs coercion to data.frame first.


> library(gstat)
Loading required package: sp
Loading required package: spacetime
Loading required package: zoo

Attaching package: ?zoo?

The following object(s) are masked from ?package:base?:

    as.Date, as.Date.numeric

Loading required package: xts
> loadMeuse()
> v = variogram(log(zinc)~1, meuse, cloud=TRUE)
> v[1:10,]
        dist       gamma dir.hor dir.ver   id left right
1   70.83784 0.006065804       0       0 var1    2     1
2  118.84864 0.109534743       0       0 var1    3     1
3  141.56624 0.167153095       0       0 var1    3     2
4  259.23927 0.952808244       0       0 var1    4     1
5  282.85155 1.110920725       0       0 var1    4     2
6  143.17123 0.416229664       0       0 var1    4     3
7  366.31407 0.890852716       0       0 var1    5     1
8  362.64032 1.043938763       0       0 var1    5     2
9  251.02390 0.375633672       0       0 var1    5     3
10 154.26276 0.001041290       0       0 var1    5     4
> plot(v)
> vdf = as.data.frame(v)
> vdf[vdf$right == 1,][1:10,]
        dist       gamma dir.hor dir.ver   id left right
1   70.83784 0.006065804       0       0 var1    2     1
2  118.84864 0.109534743       0       0 var1    3     1
4  259.23927 0.952808244       0       0 var1    4     1
7  366.31407 0.890852716       0       0 var1    5     1
11 473.62960 0.833549786       0       0 var1    6     1
16 258.32151 0.586528972       0       0 var1    7     1
22 252.04960 0.426115526       0       0 var1    8     1
29 380.18943 0.583407369       0       0 var1    9     1
37 471.00849 1.479252663       0       0 var1   10     1
46 510.07548 1.424283374       0       0 var1   11     1


On 09/07/2012 11:52 AM, Laura Wette wrote:
> Hello all,
> 
> I searched the internet very long for an answer, but didn't find one, so I
> hope you can help me.
> 
> I have to test several study sites for representativeness for the
> environment and therefore I have remotely sensed raster data, which
> reproduce the NDVI (Normalized Differenced Vegetation Index). The pixel
> values vary between -1 and 1. I've also got the coordinates of the study
> sites' centers and all the coordinates for all pixels and their values.
> 
> For this purpose I decided to calculate variograms for the study sites and
> their environment with the variog()-function of the geoR-Package.
> Unfortunately, with this function it is only possible to calculate the
> semi-variances for each pair of points in the investigated area and not for
> pairs of one specific point and any other point (if I understood the R
> Documentation correctly). So the calculated semi-variances have nothing to
> do with study sites, as they have no spatial connection. Could you please
> tell me, if it is possible to calculate these variograms with a given
> starting point? I.e. is it possible to calculate the semivariances between
> one specific point( the "starting point", which is one study site) and all
> other points (the environment of the study sites), which are located in
> different distances? Is it possible to do so with variog() or do have to
> calculate with other packages like gstat, spatial or nlme?
> 
> In the gstat-manual (www.gstat.org/gstat.pdf) I found a so-called local
> neighbourhood selection. Is there anything similar available for the geoR
> package? If not, how can I implement the commands in the
> variogram()-function of the gstat-package? Can I use this local
> neighbourhood selection at all or is it a wrong aprroach?
> 
> Thank you very much for any answer!
> Laura
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From josetanago at gmail.com  Fri Sep  7 12:46:04 2012
From: josetanago at gmail.com (Jose Tanago)
Date: Fri, 7 Sep 2012 12:46:04 +0200
Subject: [R-sig-Geo] (no subject)
Message-ID: <CAAY+5USydfsWxwcbpLEZYY+u=x9xt1iAUo8AxK+B3_=92ag1DA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120907/0334b7ab/attachment.pl>

From josetanago at gmail.com  Fri Sep  7 12:49:56 2012
From: josetanago at gmail.com (Jose Tanago)
Date: Fri, 7 Sep 2012 12:49:56 +0200
Subject: [R-sig-Geo] R-raster package rasterized() ignoring polygons
 contained within other polygon
Message-ID: <CAAY+5UQEYVAgtKRGGXKV5zZQn-q_FTvqKDioizj9_jmV2V9HkQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120907/b254d254/attachment.pl>

From mintibezabih at gmail.com  Fri Sep  7 12:58:02 2012
From: mintibezabih at gmail.com (Mintewab Bezabih)
Date: Fri, 7 Sep 2012 11:58:02 +0100
Subject: [R-sig-Geo] gstat for interpolation
Message-ID: <CAJfxP+ruj3RA7QNCmDR_tE6M+BXvogQtUv2DDJHwL0h6jbqw4Q@mail.gmail.com>

Dear the R-sig-geo users,


I have been trying to interpolate rainfall and temperature data for 8
stations and that needs to be interpolated at a farm level so that I
have farm level temperature and rainfall observations.

I am trying to use R for that. First off is kriging in gstat something
that I can use for that purpose? I have latitude and longitude
information. Can somebody give me some tips on how I can go about
that?

many thanks in advance
minti


From mintibezabih at gmail.com  Fri Sep  7 13:57:35 2012
From: mintibezabih at gmail.com (Mintewab Bezabih)
Date: Fri, 7 Sep 2012 12:57:35 +0100
Subject: [R-sig-Geo] gstat for interpolation
Message-ID: <CAJfxP+ok4vQZvZkNg1nxrNbBc-sYLZGWFOzOuwLymnyf-+n0Ug@mail.gmail.com>

Dear the R-sig-geo users,


I have been trying to interpolate rainfall and temperature data for 8
stations and that needs to be interpolated at a farm level so that I
have farm level temperature and rainfall observations.

I am trying to use R for that. First off is kriging in gstat something
that I can use for that purpose? I have latitude and longitude
information. Can somebody give me some tips on how I can go about
that?

many thanks in advance
minti


From josetanago at gmail.com  Fri Sep  7 13:57:48 2012
From: josetanago at gmail.com (Jose Tanago)
Date: Fri, 7 Sep 2012 13:57:48 +0200
Subject: [R-sig-Geo] polygons ignored rasterizing with R-raster rasterize()
In-Reply-To: <A0DD2A14D41EB2428CF5FF66739FB7810E1FBD@SCOMP0935.wurnet.nl>
References: <A0DD2A14D41EB2428CF5FF66739FB7810E1FAA@SCOMP0935.wurnet.nl>
	<A0DD2A14D41EB2428CF5FF66739FB7810E1FBD@SCOMP0935.wurnet.nl>
Message-ID: <CAAY+5UQ9TM7O0bA14j9sgXgtqeTFhwCJ9uP_xy9uZu_NN1+Cpw@mail.gmail.com>

Dear R-geo experts
I have experienced a weird problem rasterizing polygons with the
function "rasterize()" of Raster package.
Polygons that falls within the boundaries of another polygon are not
rasterized for an unknown reason. The output leave the inner pixels
(the ones overlaying the ignored polygons) without data

The ignored polygons are completely surrounded by another polygon but
the outer polygon do not spatially overlay (just enclosed). All the
polygons were created by segmenting a raster with the same pixel size
and exactly equal spatial structure. So, the concerned empty pixels
centers are perfectly covered by the inner polygon (the one ignored),
while the outer polygon do not cover at all the concerned pixels.

Do you have any idea what is wrong and how to overcome it?
(I have rasterized the same vector with ARGIS and those polygons
ignored in rasterize() are well rasterized by the ARCGIS tool)
thanks in advance for any hint.
Best
Jose


From roman.lustrik at gmail.com  Fri Sep  7 14:17:53 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Fri, 7 Sep 2012 14:17:53 +0200
Subject: [R-sig-Geo] polygons ignored rasterizing with R-raster
	rasterize()
In-Reply-To: <CAAY+5UQ9TM7O0bA14j9sgXgtqeTFhwCJ9uP_xy9uZu_NN1+Cpw@mail.gmail.com>
References: <A0DD2A14D41EB2428CF5FF66739FB7810E1FAA@SCOMP0935.wurnet.nl>
	<A0DD2A14D41EB2428CF5FF66739FB7810E1FBD@SCOMP0935.wurnet.nl>
	<CAAY+5UQ9TM7O0bA14j9sgXgtqeTFhwCJ9uP_xy9uZu_NN1+Cpw@mail.gmail.com>
Message-ID: <CAHT1vpgrqbp8h0UFmDDZiaENwfZQtF_Wq634Ndpw9H9Auvo6Zg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120907/ab102ae5/attachment.pl>

From ashton at msu.edu  Fri Sep  7 15:45:19 2012
From: ashton at msu.edu (Ashton Shortridge)
Date: Fri, 7 Sep 2012 09:45:19 -0400
Subject: [R-sig-Geo] gstat for interpolation
In-Reply-To: <CAJfxP+ok4vQZvZkNg1nxrNbBc-sYLZGWFOzOuwLymnyf-+n0Ug@mail.gmail.com>
References: <CAJfxP+ok4vQZvZkNg1nxrNbBc-sYLZGWFOzOuwLymnyf-+n0Ug@mail.gmail.com>
Message-ID: <201209070945.19561.ashton@msu.edu>

Dear Minti,

with only 8 stations there is not enough data to construct reliable covariance 
(variogram) models. Eight stations simply isn't very many for reliably 
modeling spatial structure. You would be much better off just using inverse 
distance weighting (IDW), which gstat can also do, or even nearest-neighbor 
interpolation. 

Second, it would be best to project the latitudes and longitudes to a planar 
coordinate system appropriate for your study region. I think gstat may be able 
to deal with spherical distances, but I haven't any experience with that. The 
rgdal package is one of several that can do this in R; it can also be done in 
GIS or with other geospatial tools.

Yours,

Ashton


On 09/07/12, Mintewab Bezabih, wrote:
> Dear the R-sig-geo users,
> 
> 
> I have been trying to interpolate rainfall and temperature data for 8
> stations and that needs to be interpolated at a farm level so that I
> have farm level temperature and rainfall observations.
> 
> I am trying to use R for that. First off is kriging in gstat something
> that I can use for that purpose? I have latitude and longitude
> information. Can somebody give me some tips on how I can go about
> that?
> 
> many thanks in advance
> minti
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-----
Ashton Shortridge
Associate Professor			ashton at msu.edu
Dept of Geography			http://www.msu.edu/~ashton
235 Geography Building		ph (517) 432-3561
Michigan State University		fx (517) 432-1671


From eagud.q at tv3.cat  Fri Sep  7 15:52:16 2012
From: eagud.q at tv3.cat (enric)
Date: Fri, 7 Sep 2012 06:52:16 -0700 (PDT)
Subject: [R-sig-Geo] Interpolation lat-lon temperatura-date
Message-ID: <1347025936519-7580920.post@n2.nabble.com>

Hello R users! 

I am new in R, I have my shapefile a data file with the names of cities,
latitude, longitude and temperature. By now I can plot my region and also
the numbers of the temperature.
http://r-sig-geo.2731867.n2.nabble.com/file/n7580920/rplot.jpg 

library(maptools)
library(RColorBrewer)
library(classInt)
http://r-sig-geo.2731867.n2.nabble.com/file/n7580920/dades.csv dades.csv 

# read shapefile with projection information
myshp<-readShapePoly("ESP_adm1.shp", proj4string=CRS("+proj=longlat"))

# read data
tb <- read.csv("dades.csv")
print(tb)
tb$longitud
range(tb$temperatura)

nclr = 8 

plottitle = "Temperatura"
plotvar   = tb$temperatura

jpeg('rplot.jpg')
plot(myshp, xlim=c(0,3), ylim=c(40.5,43)) text(tb$longitud, tb$latitud,
labels=tb$temperatura, cex=0.8, col="blue")
par(oma=c(0,0,0,1))
legend("bottomright", legend=names(attr(colcode, "table")),
fill=attr(colcode,"palette"), cex=0.7)
title(plottitle)
dev.off()

How I can interpolate these temperature-data and plot a map with colours? 

How someone can help me

Thank you




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Interpolation-lat-lon-temperatura-date-tp7580920.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From josetanago at gmail.com  Fri Sep  7 15:55:05 2012
From: josetanago at gmail.com (Jose Tanago)
Date: Fri, 7 Sep 2012 15:55:05 +0200
Subject: [R-sig-Geo] polygons ignored rasterizing with R-raster
	rasterize()
In-Reply-To: <CAHT1vpgrqbp8h0UFmDDZiaENwfZQtF_Wq634Ndpw9H9Auvo6Zg@mail.gmail.com>
References: <A0DD2A14D41EB2428CF5FF66739FB7810E1FAA@SCOMP0935.wurnet.nl>
	<A0DD2A14D41EB2428CF5FF66739FB7810E1FBD@SCOMP0935.wurnet.nl>
	<CAAY+5UQ9TM7O0bA14j9sgXgtqeTFhwCJ9uP_xy9uZu_NN1+Cpw@mail.gmail.com>
	<CAHT1vpgrqbp8h0UFmDDZiaENwfZQtF_Wq634Ndpw9H9Auvo6Zg@mail.gmail.com>
Message-ID: <CAAY+5UROXvuL1UojipBtK6Jj8MVw+RjDsHnYqaTKgprt46+_FA@mail.gmail.com>

Thanks roman

I am newbie in this kind of posting, so i dont know exactly what you
mean with self-confined reproductible example.

I have created a super small subset of the data as example (few
polygons and a super small raster with same extent) as well as the
rasterized output. all in a dropbox folder of 40kb in total.

the lines of my code I am running are:

>segmshp<-readShapePoly("Segm2rasterize.shp")
>ima<-raster("imagecroped.tiff")
>rastsegm<-rasterize(segmshp, ima, field='ID', fun=max, filename='segmRast.tif')

After running the rasterize() I got this message in the console:

> Found 11 region(s) and 14 polygon(s)

A priori I identified two polygons that are not rasterized: (ID 636)
and (ID 163)

I am sending to you the dropbox link here:
https://www.dropbox.com/sh/snrfz1p5tlaok5i/4z_OGOJ4Y-

Please let me know if that works fine for you.

Thank you vey much
Jose


2012/9/7 Roman Lu?trik <roman.lustrik at gmail.com>:
> Can you provide a small, self-confined reproducible example?
>
> Cheers,
> Roman
>
>
> On Fri, Sep 7, 2012 at 1:57 PM, Jose Tanago <josetanago at gmail.com> wrote:
>>
>> Dear R-geo experts
>> I have experienced a weird problem rasterizing polygons with the
>> function "rasterize()" of Raster package.
>> Polygons that falls within the boundaries of another polygon are not
>> rasterized for an unknown reason. The output leave the inner pixels
>> (the ones overlaying the ignored polygons) without data
>>
>> The ignored polygons are completely surrounded by another polygon but
>> the outer polygon do not spatially overlay (just enclosed). All the
>> polygons were created by segmenting a raster with the same pixel size
>> and exactly equal spatial structure. So, the concerned empty pixels
>> centers are perfectly covered by the inner polygon (the one ignored),
>> while the outer polygon do not cover at all the concerned pixels.
>>
>> Do you have any idea what is wrong and how to overcome it?
>> (I have rasterized the same vector with ARGIS and those polygons
>> ignored in rasterize() are well rasterized by the ARCGIS tool)
>> thanks in advance for any hint.
>> Best
>> Jose
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
>
> --
> In God we trust, all others bring data.


From jeckert1 at uw.edu  Fri Sep  7 20:33:25 2012
From: jeckert1 at uw.edu (Joe Eckert)
Date: Fri, 7 Sep 2012 11:33:25 -0700
Subject: [R-sig-Geo] Best way to alter the extent of a
	SpatialPolygonsDataFrame?
Message-ID: <CABM-zBnYxU06xw1HYqZX=+AmOEY7ssE-YT=YNVCO4impCQECvg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120907/9e0b63aa/attachment.pl>

From r.hijmans at gmail.com  Fri Sep  7 21:13:46 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 7 Sep 2012 12:13:46 -0700
Subject: [R-sig-Geo] polygons ignored rasterizing with R-raster
	rasterize()
In-Reply-To: <CAAY+5UROXvuL1UojipBtK6Jj8MVw+RjDsHnYqaTKgprt46+_FA@mail.gmail.com>
References: <A0DD2A14D41EB2428CF5FF66739FB7810E1FAA@SCOMP0935.wurnet.nl>
	<A0DD2A14D41EB2428CF5FF66739FB7810E1FBD@SCOMP0935.wurnet.nl>
	<CAAY+5UQ9TM7O0bA14j9sgXgtqeTFhwCJ9uP_xy9uZu_NN1+Cpw@mail.gmail.com>
	<CAHT1vpgrqbp8h0UFmDDZiaENwfZQtF_Wq634Ndpw9H9Auvo6Zg@mail.gmail.com>
	<CAAY+5UROXvuL1UojipBtK6Jj8MVw+RjDsHnYqaTKgprt46+_FA@mail.gmail.com>
Message-ID: <CANtt_hxr102rg7naHZAtOorCV-TN8VkMpWsYYotD1xtREfQvsw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120907/f6a26f7a/attachment.pl>

From jeckert1 at uw.edu  Sat Sep  8 00:23:22 2012
From: jeckert1 at uw.edu (Joe Eckert)
Date: Fri, 7 Sep 2012 15:23:22 -0700
Subject: [R-sig-Geo] Best way to alter the extent of a
	SpatialPolygonsDataFrame?
In-Reply-To: <CABM-zBnYxU06xw1HYqZX=+AmOEY7ssE-YT=YNVCO4impCQECvg@mail.gmail.com>
References: <CABM-zBnYxU06xw1HYqZX=+AmOEY7ssE-YT=YNVCO4impCQECvg@mail.gmail.com>
Message-ID: <CABM-zB=8M9Hmb7OPobbK4cNzFn-fOa8Ubv45PXpX-S3fYx4BNg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120907/3276b49a/attachment.pl>

From r.hijmans at gmail.com  Sat Sep  8 18:47:09 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sat, 8 Sep 2012 09:47:09 -0700
Subject: [R-sig-Geo] polygons ignored rasterizing with R-raster
	rasterize()
In-Reply-To: <CANtt_hxr102rg7naHZAtOorCV-TN8VkMpWsYYotD1xtREfQvsw@mail.gmail.com>
References: <A0DD2A14D41EB2428CF5FF66739FB7810E1FAA@SCOMP0935.wurnet.nl>
	<A0DD2A14D41EB2428CF5FF66739FB7810E1FBD@SCOMP0935.wurnet.nl>
	<CAAY+5UQ9TM7O0bA14j9sgXgtqeTFhwCJ9uP_xy9uZu_NN1+Cpw@mail.gmail.com>
	<CAHT1vpgrqbp8h0UFmDDZiaENwfZQtF_Wq634Ndpw9H9Auvo6Zg@mail.gmail.com>
	<CAAY+5UROXvuL1UojipBtK6Jj8MVw+RjDsHnYqaTKgprt46+_FA@mail.gmail.com>
	<CANtt_hxr102rg7naHZAtOorCV-TN8VkMpWsYYotD1xtREfQvsw@mail.gmail.com>
Message-ID: <CANtt_hz2BMVAOKnLeDSTE8Z1_Tw3n6F6pD4P53LS4eN46TOT3g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120908/ca73629c/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Sun Sep  9 18:03:58 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sun, 9 Sep 2012 17:03:58 +0100
Subject: [R-sig-Geo] shortest path
In-Reply-To: <98f1ba726d9c40dca5c9c165ca61adfd@EX-0-HT0.lancs.local>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
	<CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
	<CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>
	<98f1ba726d9c40dca5c9c165ca61adfd@EX-0-HT0.lancs.local>
Message-ID: <CANVKczMOV=dEBO7U7fme9S+zP8Qorrygk4=9knqwMn_MFmkz-g@mail.gmail.com>

I've just pushed a cleanup and a bunch of examples to RPubs:

http://rpubs.com/geospacedman/routing

 It uses the latest igraph!

 It's all there, building the network and routing and plotting.

Barry


From geponce at gmail.com  Sun Sep  9 21:46:29 2012
From: geponce at gmail.com (Guillermo Ponce-Campos)
Date: Sun, 9 Sep 2012 12:46:29 -0700
Subject: [R-sig-Geo] Rgdal on Centos 5.6
Message-ID: <CAGKzJ7ootsp_EvfBNQPG62L7aSobX3uFpxxW+uVVi7eML5NVhA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120909/fad34ab0/attachment.pl>

From edzer.pebesma at uni-muenster.de  Sun Sep  9 21:56:10 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 09 Sep 2012 21:56:10 +0200
Subject: [R-sig-Geo] Rgdal on Centos 5.6
In-Reply-To: <CAGKzJ7ootsp_EvfBNQPG62L7aSobX3uFpxxW+uVVi7eML5NVhA@mail.gmail.com>
References: <CAGKzJ7ootsp_EvfBNQPG62L7aSobX3uFpxxW+uVVi7eML5NVhA@mail.gmail.com>
Message-ID: <504CF45A.1090200@uni-muenster.de>



On 09/09/2012 09:46 PM, Guillermo Ponce-Campos wrote:
> Error: Missing Dependency: libhdf5.so.0()(64bit) is needed by package

I'm not familiar with CentOS nor with yum, but it seems that you
overlooked the error message above, and that you need to solve that
first to install gdal. Only then can you install rgdal.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From Roger.Bivand at nhh.no  Sun Sep  9 23:36:08 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 9 Sep 2012 23:36:08 +0200 (CEST)
Subject: [R-sig-Geo] Rgdal on Centos 5.6
In-Reply-To: <CAGKzJ7ootsp_EvfBNQPG62L7aSobX3uFpxxW+uVVi7eML5NVhA@mail.gmail.com>
References: <CAGKzJ7ootsp_EvfBNQPG62L7aSobX3uFpxxW+uVVi7eML5NVhA@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1209092323270.19757@reclus.nhh.no>

On Sun, 9 Sep 2012, Guillermo Ponce-Campos wrote:

> Hello:
>
> Does anyone has an idea how to overcome this error after trying to install
> rgdal - gdal on Centos 5.6:
>
> *This is the Linux box I have installed:*
>
>> uname -a
> Linux  2.6.18-238.19.1.el5xen #1 SMP x86_64 x86_64 x86_64 GNU/Linux
>
> And R version:
>
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: x86_64-redhat-linux-gnu (64-bit)
>
> locale:
> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> [7] LC_PAPER=C                 LC_NAME=C
> [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> *When I run the gdal installation I got an error*
>
> *# yum install gdal*
> Loaded plugins: dellsysid, fastestmirror, list-data, refresh-updatesd,
> verify
> Loading mirror speeds from cached hostfile
> * base: mirrors.cicku.me
> * dell-community: linux.dell.com
> * epel: ftp.osuosl.org
> * extras: mirror.5ninesolutions.com
> * rpmforge: mirror.hmc.edu
> * updates: mirrors.sonic.net
> Setting up Install Process
> Resolving Dependencies
> --> Running transaction check
> ---> Package gdal.i386 0:1.8.0-4.el5.elgis set to be updated
> --> Processing Dependency: libodbcinst.so.1 for package: gdal
> --> Processing Dependency: libdapserver.so.3 for package: gdal
> --> Processing Dependency: libgeotiff.so.1.2 for package: gdal
> --> Processing Dependency: libgif.so.4 for package: gdal
> --> Processing Dependency: libogdi.so.3 for package: gdal
> --> Processing Dependency: libhdf5.so.0 for package: gdal
> --> Processing Dependency: libxerces-c.so.27 for package: gdal
> --> Processing Dependency: libjasper.so.1 for package: gdal
> --> Processing Dependency: libnetcdf.so.4 for package: gdal
> --> Processing Dependency: libgeos_c.so.1 for package: gdal
> --> Processing Dependency: librx.so.0 for package: gdal
> --> Processing Dependency: libspatialite.so.2 for package: gdal
> --> Processing Dependency: libcfitsio.so.0 for package: gdal
> --> Processing Dependency: libdapclient.so.1 for package: gdal
> --> Processing Dependency: libdap.so.6 for package: gdal
> --> Processing Dependency: libodbc.so.1 for package: gdal
> ---> Package gdal.x86_64 0:1.8.0-4.el5.elgis set to be updated
> --> Processing Dependency: libogdi.so.3()(64bit) for package: gdal
> --> Processing Dependency: libhdf5.so.0()(64bit) for package: gdal
> --> Processing Dependency: libspatialite.so.2()(64bit) for package: gdal
> --> Processing Dependency: libdapclient.so.1()(64bit) for package: gdal
> --> Processing Dependency: libodbcinst.so.1()(64bit) for package: gdal
> --> Processing Dependency: libnetcdf.so.4()(64bit) for package: gdal
> --> Processing Dependency: libdap.so.6()(64bit) for package: gdal
> --> Processing Dependency: librx.so.0()(64bit) for package: gdal
> --> Processing Dependency: libgeos_c.so.1()(64bit) for package: gdal
> --> Processing Dependency: libjasper.so.1()(64bit) for package: gdal
> --> Processing Dependency: libdapserver.so.3()(64bit) for package: gdal
> --> Processing Dependency: libgeotiff.so.1.2()(64bit) for package: gdal
> --> Processing Dependency: libodbc.so.1()(64bit) for package: gdal
> --> Processing Dependency: libcfitsio.so.0()(64bit) for package: gdal
> --> Running transaction check
> ---> Package cfitsio.i386 0:3.030-2.el5 set to be updated
> ---> Package cfitsio.x86_64 0:3.030-2.el5 set to be updated
> ---> Package gdal.x86_64 0:1.8.0-4.el5.elgis set to be updated
> --> Processing Dependency: libhdf5.so.0()(64bit) for package: gdal
> ---> Package geos.i386 0:3.2.2-2.el5.elgis set to be updated
> ---> Package geos.x86_64 0:3.2.2-2.el5.elgis set to be updated
> ---> Package giflib.i386 0:4.1.3-7.3.3.el5 set to be updated
> ---> Package hdf5.i386 0:1.6.10-1.el5 set to be updated
> ---> Package jasper-libs.i386 0:1.900.1-14.el5 set to be updated
> ---> Package jasper-libs.x86_64 0:1.900.1-14.el5 set to be updated
> ---> Package libdap.i386 0:3.7.8-1.el5.1 set to be updated
> ---> Package libdap.x86_64 0:3.7.8-1.el5.1 set to be updated
> ---> Package libgeotiff.i386 0:1.2.4-3.el5 set to be updated
> ---> Package libgeotiff.x86_64 0:1.2.4-3.el5 set to be updated
> ---> Package librx.i386 0:1.5-8.el5 set to be updated
> ---> Package librx.x86_64 0:1.5-8.el5 set to be updated
> ---> Package libspatialite.i386 0:2.4.0-0.6_0.RC4.el5.elgis set to be
> updated
> ---> Package libspatialite.x86_64 0:2.4.0-0.6_0.RC4.el5.elgis set to be
> updated
> ---> Package netcdf.i386 0:3.6.2-7.el5 set to be updated
> ---> Package netcdf.x86_64 0:3.6.3-1.el5.rf set to be updated
> ---> Package ogdi.i386 0:3.2.0-0.12.beta2.el5 set to be updated
> ---> Package ogdi.x86_64 0:3.2.0-0.12.beta2.el5 set to be updated
> ---> Package unixODBC-libs.i386 0:2.2.11-10.el5 set to be updated
> ---> Package unixODBC-libs.x86_64 0:2.2.11-10.el5 set to be updated
> ---> Package xerces-c.i386 0:2.7.0-8.el5 set to be updated
> --> Finished Dependency Resolution
> gdal-1.8.0-4.el5.elgis.x86_64 from elgis has depsolving problems
>  --> Missing Dependency: libhdf5.so.0()(64bit) is needed by package
> gdal-1.8.0-4.el5.elgis.x86_64 (elgis)
> Error: Missing Dependency: libhdf5.so.0()(64bit) is needed by package
> gdal-1.8.0-4.el5.elgis.x86_64 (elgis)
> You could try using --skip-broken to work around the problem
> You could try running: package-cleanup --problems
>                        package-cleanup --dupes
>                        rpm -Va --nofiles --nodigest
>
> *I thought that installing rgdal with dependencies would try to install the
> gdal, but it seems that doesn't work like that... *


Why would you think that, when the README file in the package, also 
available in:

https://r-forge.r-project.org/scm/viewvc.php/pkg/inst/README?view=markup&root=rgdal

says nothing of the sort? It, and the package description on CRAN, say 
that GDAL and PROJ.4 must be installed first with their dependencies, 
especially dependencies for the drivers you need.

It is often the case that GDAL binaries are bundled with many dependencies 
that are irrelevant for users - most common drivers are provided when 
installing from source. You also seem to have an unhealthy mix of 32 and 
64 bit dependencies. I strongly advise first establishing which drivers 
you need, then running ./configure in a source install of GDAL, and seeing 
which dependencies are missing for the drivers you need. You need to 
address these, and of course install PROJ.4, which may be less of a 
problem. Once you have a working GDAL, rgdal installs without further 
difficulty.

Hope this clarifies,

Roger

PS. Current stable GDAL is 1.9.1, not 1.8.0, which came out in January 
2011; building from source gives you more recent software too.

> *
> *
>> install.packages("rgdal",dependencies=TRUE)
> *Installing package(s) into /usr/lib64/R/library*
> *trying URL 'http://cran.cnr.Berkeley.edu/src/contrib/rgdal_0.7-18.tar.gz'*
> *Content type 'application/x-gzip' length 1433864 bytes (1.4 Mb)*
> *opened URL*
> *==================================================*
> *downloaded 1.4 Mb*
> *
> *
> ** installing *source* package rgdal ...*
> *** package rgdal successfully unpacked and MD5 sums checked*
> *configure: gdal-config: gdal-config*
> *checking gdal-config usability... ./configure: line 2058: gdal-config:
> command not found*
> *no*
> *Error: gdal-config not found*
> *The gdal-config script distributed with GDAL could not be found.*
> *If you have not installed the GDAL libraries, you can*
> *download the source from  http://www.gdal.org/*
> *If you have installed the GDAL libraries, then make sure that*
> *gdal-config is in your path. Try typing gdal-config at a*
> *shell prompt and see if it runs. If not, use:*
> * --configure-args='--with-gdal-config=/usr/local/bin/gdal-config'*
> *with appropriate values for your installation.*
> *
> *
> *ERROR: configuration failed for package rgdal*
> ** removing /usr/lib64/R/library/rgdal*
> *
> *
> *The downloaded source packages are in*
> *        /tmp/Rtmpseez2s/downloaded_packages*
> *Updating HTML index of packages in '.Library'*
> *Making packages.html  ... done*
> *Warning message:*
> *In install.packages("rgdal", dependencies = TRUE) :*
> *  installation of package rgdal had non-zero exit status*
>
>
> Thanks
> Guillermo
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From benweinstein2010 at gmail.com  Mon Sep 10 00:33:42 2012
From: benweinstein2010 at gmail.com (Ben Weinstein)
Date: Sun, 9 Sep 2012 18:33:42 -0400
Subject: [R-sig-Geo] Rgdal on Centos 5.6
In-Reply-To: <alpine.LRH.2.02.1209092323270.19757@reclus.nhh.no>
References: <CAGKzJ7ootsp_EvfBNQPG62L7aSobX3uFpxxW+uVVi7eML5NVhA@mail.gmail.com>
	<alpine.LRH.2.02.1209092323270.19757@reclus.nhh.no>
Message-ID: <CAC28k7QMesOzeDzGSwV5tUYGZathE7-f--_dkwiJEk52Bm+9nw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120909/172d7c6e/attachment.pl>

From priyanka.toxic00 at gmail.com  Mon Sep 10 10:33:10 2012
From: priyanka.toxic00 at gmail.com (Priyanka Sharma)
Date: Mon, 10 Sep 2012 14:03:10 +0530
Subject: [R-sig-Geo] Fwd: How to calculate the number of points that fall
 inside each cell of a given raster using R
In-Reply-To: <CALYnv35cmQ=LnPpWFC9n6abppobZPi5Wmhd97vwA9EpG0OoVKw@mail.gmail.com>
References: <CALYnv35cmQ=LnPpWFC9n6abppobZPi5Wmhd97vwA9EpG0OoVKw@mail.gmail.com>
Message-ID: <CALYnv37YEOtFqm1CK_ur-mb8cgHBAYDPbYfphw754p=06g3vBw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120910/2e67f3fd/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Mon Sep 10 11:32:39 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 10 Sep 2012 10:32:39 +0100
Subject: [R-sig-Geo] Fwd: How to calculate the number of points that
 fall inside each cell of a given raster using R
In-Reply-To: <d22ebe053f294d738262a2eabd27ee1f@EX-0-HT0.lancs.local>
References: <CALYnv35cmQ=LnPpWFC9n6abppobZPi5Wmhd97vwA9EpG0OoVKw@mail.gmail.com>
	<d22ebe053f294d738262a2eabd27ee1f@EX-0-HT0.lancs.local>
Message-ID: <CANVKczMu7zcimE=3Wu1LaAzSf7dPiEVK0tEW3XB2UN0tPKHeYA@mail.gmail.com>

On Mon, Sep 10, 2012 at 9:33 AM, Priyanka Sharma
<priyanka.toxic00 at gmail.com> wrote:
> Hi everyone,
>
> Here is a summary of what I am trying to do. Please take a look and let me
> know how can i complete this below mentioned objective using R for a large
> dataset.
> **

 What have you tried? What level of R knowledge do you have? Do we
have to tell you how to read a shapefile? Or can we just say "check
out the raster package, the functions are right there"?

Barry


From mathieu.rajerison at gmail.com  Mon Sep 10 11:36:44 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 10 Sep 2012 11:36:44 +0200
Subject: [R-sig-Geo] shortest path
In-Reply-To: <CANVKczMOV=dEBO7U7fme9S+zP8Qorrygk4=9knqwMn_MFmkz-g@mail.gmail.com>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
	<CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
	<CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>
	<98f1ba726d9c40dca5c9c165ca61adfd@EX-0-HT0.lancs.local>
	<CANVKczMOV=dEBO7U7fme9S+zP8Qorrygk4=9knqwMn_MFmkz-g@mail.gmail.com>
Message-ID: <CAGfc75=rB9nBUHWNiGBaezxriKzaGBwsayY30F05a0PZhXZUXw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120910/84e70a61/attachment.pl>

From mathieu.rajerison at gmail.com  Mon Sep 10 12:47:15 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 10 Sep 2012 12:47:15 +0200
Subject: [R-sig-Geo] shortest path
In-Reply-To: <CAGfc75=rB9nBUHWNiGBaezxriKzaGBwsayY30F05a0PZhXZUXw@mail.gmail.com>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
	<CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
	<CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>
	<98f1ba726d9c40dca5c9c165ca61adfd@EX-0-HT0.lancs.local>
	<CANVKczMOV=dEBO7U7fme9S+zP8Qorrygk4=9knqwMn_MFmkz-g@mail.gmail.com>
	<CAGfc75=rB9nBUHWNiGBaezxriKzaGBwsayY30F05a0PZhXZUXw@mail.gmail.com>
Message-ID: <CAGfc75=GWS2aPwqQuFcg=bAmYk=bDz20P1EO-AtVP+S7TNVB_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120910/7cbef4dd/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Mon Sep 10 12:51:23 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 10 Sep 2012 11:51:23 +0100
Subject: [R-sig-Geo] shortest path
In-Reply-To: <9902a2697d9d441eb9232508f5e7c22b@EX-0-HT0.lancs.local>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
	<CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
	<CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>
	<98f1ba726d9c40dca5c9c165ca61adfd@EX-0-HT0.lancs.local>
	<CANVKczMOV=dEBO7U7fme9S+zP8Qorrygk4=9knqwMn_MFmkz-g@mail.gmail.com>
	<CAGfc75=rB9nBUHWNiGBaezxriKzaGBwsayY30F05a0PZhXZUXw@mail.gmail.com>
	<9902a2697d9d441eb9232508f5e7c22b@EX-0-HT0.lancs.local>
Message-ID: <CANVKczMh-Nn-vFrDNPMxT3Yznn0EQdeUOGqXJcuSuUmiUdRtfg@mail.gmail.com>

On Mon, Sep 10, 2012 at 11:47 AM, Mathieu Rajerison
<mathieu.rajerison at gmail.com> wrote:
> Barry,
>
> I looked at your code and I wondered if it would not be more convenient to
> find the closest point on a an edge rather than the closest vertex?
>
> In this case, what technique would be the best? I thought of
> spatstat::project2Segment that I used in my script (but Edzer says it
> doesn't work - I have to check that)
>

 I wasn't really concerned about that since it was extraneous to the
core job of constructing an igraph from the lines, but should be
trivial.

 There's also possible work on adding tolerances to the nodes and
snapping line ends that don't quite make it to other lines, but that's
all topological cleanup stuff that could expand into cleaning dangles
and jumpbacks and other digitizing errors - I didn't want to get into
all that at the moment! I have other fish to fry...

Barry


From juantomas.sayago at gmail.com  Tue Sep 11 00:31:04 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Mon, 10 Sep 2012 18:31:04 -0400
Subject: [R-sig-Geo] Area left in shape file
Message-ID: <CAEOXpNCV2bqUBD119xxxuLGT9eKDWmukqu76vkQHZ3NXjC6iMQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120910/7dbf0320/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Tue Sep 11 00:46:06 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 10 Sep 2012 23:46:06 +0100
Subject: [R-sig-Geo] Area left in shape file
In-Reply-To: <498dbd345d784421b6505c034e3617c8@EX-1-HT0.lancs.local>
References: <498dbd345d784421b6505c034e3617c8@EX-1-HT0.lancs.local>
Message-ID: <CANVKczMiCLAymofzRtdK3313eZGA2b4N1EcucBs2LH1vcDFodg@mail.gmail.com>

On Mon, Sep 10, 2012 at 11:31 PM, Juan Tomas Sayago
<juantomas.sayago at gmail.com> wrote:
> Dear list,
> I have two shapes with polygons, and need to find the area in one of them
> that is not covered by the other. What do you recommend?

 You can do operations with polygons using the rgeos package - its
probably as simple as something like:

 A = readOGR(".","shape1.shp")
 B = readOGR(".","shape2.shp")

 C = gDifference(A,B)

then get the area of C.

Barry


From r.turner at auckland.ac.nz  Tue Sep 11 01:25:13 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Tue, 11 Sep 2012 11:25:13 +1200
Subject: [R-sig-Geo] Area left in shape file
In-Reply-To: <CAEOXpNCV2bqUBD119xxxuLGT9eKDWmukqu76vkQHZ3NXjC6iMQ@mail.gmail.com>
References: <CAEOXpNCV2bqUBD119xxxuLGT9eKDWmukqu76vkQHZ3NXjC6iMQ@mail.gmail.com>
Message-ID: <504E76D9.7080309@auckland.ac.nz>

On 11/09/12 10:31, Juan Tomas Sayago wrote:
> Dear list,
> I have two shapes with polygons, and need to find the area in one of them
> that is not covered by the other. What do you recommend?
> Thanks
> Juan

You can use the functions area.owin() and setminus.owin() from
the "spatstat" package.  E.g.

     area.owin(setminus(A,B))

will give the area of that part of A not covered by B.

Note that A and B have to be objects of class owin; use the function
as.owin() to convert polygons to such objects.  See vignette("shapefiles")
for some guidance.

Note that setminus(A,B) will yield an owin object of type *mask*
(whence your answer will be an approximation via "pixellation")
unless "gcplib" is available and enabled (by setting:

     spatstat.options(gpclib=TRUE)

If you set gpclib=TRUE make sure that your use of this package
does not conflict with its unfortunately restrictive licensing terms.
(See license.polygons().)

     cheers,

         Rolf Turner


From edzer.pebesma at uni-muenster.de  Tue Sep 11 08:52:07 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 11 Sep 2012 08:52:07 +0200
Subject: [R-sig-Geo] shortest path
In-Reply-To: <CAGfc75=GWS2aPwqQuFcg=bAmYk=bDz20P1EO-AtVP+S7TNVB_A@mail.gmail.com>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
	<CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
	<CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>
	<98f1ba726d9c40dca5c9c165ca61adfd@EX-0-HT0.lancs.local>
	<CANVKczMOV=dEBO7U7fme9S+zP8Qorrygk4=9knqwMn_MFmkz-g@mail.gmail.com>
	<CAGfc75=rB9nBUHWNiGBaezxriKzaGBwsayY30F05a0PZhXZUXw@mail.gmail.com>
	<CAGfc75=GWS2aPwqQuFcg=bAmYk=bDz20P1EO-AtVP+S7TNVB_A@mail.gmail.com>
Message-ID: <504EDF97.7030904@uni-muenster.de>



On 09/10/2012 12:47 PM, Mathieu Rajerison wrote:
> Barry,
> 
> I looked at your code and I wondered if it would not be more convenient to
> find the closest point on a an edge rather than the closest vertex?
> 
> In this case, what technique would be the best? I thought of
> spatstat::project2Segment that I used in my script (but Edzer says it
> doesn't work - I have to check that)

I only made a comment on sending untested scripts, I made no comment on
whether project2Segment did what you want it to do.

> 
> 
> Mathieu
> 
> 
> 2012/9/10 Mathieu Rajerison <mathieu.rajerison at gmail.com>
> 
>> It looks really nice.
>>
>> Thanks Barry!
>>
>>
>> 2012/9/9 Barry Rowlingson <b.rowlingson at lancaster.ac.uk>
>>
>>> I've just pushed a cleanup and a bunch of examples to RPubs:
>>>
>>> http://rpubs.com/geospacedman/routing
>>>
>>>  It uses the latest igraph!
>>>
>>>  It's all there, building the network and routing and plotting.
>>>
>>> Barry
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From mintibezabih at gmail.com  Tue Sep 11 20:40:01 2012
From: mintibezabih at gmail.com (Mintewab Bezabih)
Date: Tue, 11 Sep 2012 19:40:01 +0100
Subject: [R-sig-Geo] gstat for interpolation
In-Reply-To: <201209070945.19561.ashton@msu.edu>
References: <CAJfxP+ok4vQZvZkNg1nxrNbBc-sYLZGWFOzOuwLymnyf-+n0Ug@mail.gmail.com>
	<201209070945.19561.ashton@msu.edu>
Message-ID: <CAJfxP+pamAGUARRzukDHBcF1hR2CQ=Jz8EUym8fQLrDZP5G0pA@mail.gmail.com>

Dear Ashton,

I am fine with using the Inverse Distance Weighting or the Nearest
Neighbour and I can also use your suggestion of the two coordinate
plotting. The purpose of my exercise is to get interpolated figures
that I will use in further statistical analysis (I am an economist and
my understanding of GIS issues is very limited).

I would be delighted if you could give me more tips on how I could go
about this. I had previously attempted doing interpolation with R
(which is perhaps totally wrong but I can post it here if you think I
can incorporate your suggestions on there

Many thanks.
Regards,
Minti



On Fri, Sep 7, 2012 at 2:45 PM, Ashton Shortridge <ashton at msu.edu> wrote:
> Dear Minti,
>
> with only 8 stations there is not enough data to construct reliable covariance
> (variogram) models. Eight stations simply isn't very many for reliably
> modeling spatial structure. You would be much better off just using inverse
> distance weighting (IDW), which gstat can also do, or even nearest-neighbor
> interpolation.
>
> Second, it would be best to project the latitudes and longitudes to a planar
> coordinate system appropriate for your study region. I think gstat may be able
> to deal with spherical distances, but I haven't any experience with that. The
> rgdal package is one of several that can do this in R; it can also be done in
> GIS or with other geospatial tools.
>
> Yours,
>
> Ashton
>
>
> On 09/07/12, Mintewab Bezabih, wrote:
>> Dear the R-sig-geo users,
>>
>>
>> I have been trying to interpolate rainfall and temperature data for 8
>> stations and that needs to be interpolated at a farm level so that I
>> have farm level temperature and rainfall observations.
>>
>> I am trying to use R for that. First off is kriging in gstat something
>> that I can use for that purpose? I have latitude and longitude
>> information. Can somebody give me some tips on how I can go about
>> that?
>>
>> many thanks in advance
>> minti
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> -----
> Ashton Shortridge
> Associate Professor                     ashton at msu.edu
> Dept of Geography                       http://www.msu.edu/~ashton
> 235 Geography Building          ph (517) 432-3561
> Michigan State University               fx (517) 432-1671


From nerak.t at hotmail.com  Tue Sep 11 20:48:31 2012
From: nerak.t at hotmail.com (Nerak)
Date: Tue, 11 Sep 2012 11:48:31 -0700 (PDT)
Subject: [R-sig-Geo] problem with example inverse distance weighted (IDW)
	interpolation
Message-ID: <1347389311417-7580941.post@n2.nabble.com>

Hi all,

I'm new to spatial analysis in R and I'm starting to learn how to use it. 
I have daily data from 14 rain gauges and want to interpolate data between
this gauges to have a value for certain points in the area I'm working with.
I did Inverse Distance Weighted (IDW) interpolation in QGIS and extracted
the data for the specific coordinates but since I have to do it for at least
365 days (to begin with), I'm looking for a faster way. As spatial analysis
are also possible in R, I was thinking of making a kind of loop to do it.
 
I was looking for an example to try that I could understand how it works and
how I should adapt the script to my data. Therefore I was hoping that the
book 'Applied spatial analysis in R' would have a reproducible working
example, but I get errors when I try the example...

library(sp)
data(meuse)
library(gstat)
idw.out <- idw(zinc ~ 1, meuse, meuse.grid, idp = 2.5)

But I get the error:

Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "idw", for signature
"formula", "data.frame" 


Maybe there is something wrong with the class of my data? I tried with a
normal dataframe, SpatialPixelsDataFrame, SpatialPointsDataFrame, ...

Tried to define the coordinates in different ways...

data(meuse.grid)
coordinates(meuse.grid) <- c("x", "y")
meuse.grid <- as(meuse.grid, "SpatialPixelsDataFrame")
coordinates(meuse.grid) = ~x+y

This is what the book gives:
> library(gstat)
> idw.out <- idw(zinc ~ 1, meuse, meuse.grid, idp = 2.5)
[inverse distance weighted interpolation]
> as.data.frame(idw.out)[1:5, ]
var1.pred var1.var x y
1 701.9621 NA 181180 333740
2 799.9616 NA 181140 333700
3 723.5780 NA 181180 333700
4 655.3131 NA 181220 333700
5 942.0218 NA 181100 333660

I'm using R version 2.14.2  Could this be a problem that the package gstat
isn't compatible with it?
I'm not familiar with this IDW function in R and still have to figure out
how I should adapt my own data to the right format but I think I first
should be able to understand the example and let it work.
Maybe somebody knows what I should do with this error to let it work? My
apologizes if I should have been able to find an existing post on the
mailinglist concerning this, I tried to search for it, but didn't found
something that could solve the error.

Kind regards,
Nerak




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/problem-with-example-inverse-distance-weighted-IDW-interpolation-tp7580941.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Tue Sep 11 21:01:49 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 11 Sep 2012 21:01:49 +0200 (CEST)
Subject: [R-sig-Geo] problem with example inverse distance weighted
 (IDW) interpolation
In-Reply-To: <1347389311417-7580941.post@n2.nabble.com>
References: <1347389311417-7580941.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.02.1209112057140.28087@reclus.nhh.no>

On Tue, 11 Sep 2012, Nerak wrote:

> Hi all,
>
> I'm new to spatial analysis in R and I'm starting to learn how to use it.
> I have daily data from 14 rain gauges and want to interpolate data between
> this gauges to have a value for certain points in the area I'm working with.
> I did Inverse Distance Weighted (IDW) interpolation in QGIS and extracted
> the data for the specific coordinates but since I have to do it for at least
> 365 days (to begin with), I'm looking for a faster way. As spatial analysis
> are also possible in R, I was thinking of making a kind of loop to do it.
>
> I was looking for an example to try that I could understand how it works and
> how I should adapt the script to my data. Therefore I was hoping that the
> book 'Applied spatial analysis in R' would have a reproducible working
> example, but I get errors when I try the example...
>
> library(sp)
> data(meuse)
> library(gstat)
> idw.out <- idw(zinc ~ 1, meuse, meuse.grid, idp = 2.5)
>
> But I get the error:
>
> Error in function (classes, fdef, mtable)  :
>  unable to find an inherited method for function "idw", for signature
> "formula", "data.frame"

Not surprisingly, as both are still data.frame objects, and you haven't 
loaded one of them. This works:

library(gstat)
data(meuse)
coordinates(meuse) <- c("x", "y")
data(meuse.grid)
coordinates(meuse.grid) <- c("x", "y")
gridded(meuse.grid) <- TRUE
idw.out <- idw(zinc ~ 1, meuse, meuse.grid, idp = 2.5)
spplot(idw.out, "var1.pred")

You were omitting important lines in the script.

Roger

>
>
> Maybe there is something wrong with the class of my data? I tried with a
> normal dataframe, SpatialPixelsDataFrame, SpatialPointsDataFrame, ...
>
> Tried to define the coordinates in different ways...
>
> data(meuse.grid)
> coordinates(meuse.grid) <- c("x", "y")
> meuse.grid <- as(meuse.grid, "SpatialPixelsDataFrame")
> coordinates(meuse.grid) = ~x+y
>
> This is what the book gives:
>> library(gstat)
>> idw.out <- idw(zinc ~ 1, meuse, meuse.grid, idp = 2.5)
> [inverse distance weighted interpolation]
>> as.data.frame(idw.out)[1:5, ]
> var1.pred var1.var x y
> 1 701.9621 NA 181180 333740
> 2 799.9616 NA 181140 333700
> 3 723.5780 NA 181180 333700
> 4 655.3131 NA 181220 333700
> 5 942.0218 NA 181100 333660
>
> I'm using R version 2.14.2  Could this be a problem that the package gstat
> isn't compatible with it?
> I'm not familiar with this IDW function in R and still have to figure out
> how I should adapt my own data to the right format but I think I first
> should be able to understand the example and let it work.
> Maybe somebody knows what I should do with this error to let it work? My
> apologizes if I should have been able to find an existing post on the
> mailinglist concerning this, I tried to search for it, but didn't found
> something that could solve the error.
>
> Kind regards,
> Nerak
>
>
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/problem-with-example-inverse-distance-weighted-IDW-interpolation-tp7580941.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From matzke at berkeley.edu  Wed Sep 12 02:24:04 2012
From: matzke at berkeley.edu (Nick Matzke)
Date: Tue, 11 Sep 2012 17:24:04 -0700
Subject: [R-sig-Geo] Changing coords in SpatialPolgyon
Message-ID: <504FD624.2040108@berkeley.edu>

Hi -- I am trying to change the coordinates of the points in 
a polygon (after shrinking the polygon towards the centroid.

However, any way I try it (direct assignment, slot(), 
attr()), I get this error:

=================
object of type 'S4' is not subsettable
=================


Here's an example of the error, showing the objects I'm 
using.  Any help **much** appreciated.

===========================


 > 				class(all_emerged_islands_at_this_height_break)
[1] "SpatialPolygons"
attr(,"package")
[1] "sp"
 > 				all_emerged_islands_at_this_height_break
An object of class "SpatialPolygons"
Slot "polygons":
[[1]]
An object of class "Polygons"
Slot "Polygons":
[[1]]
An object of class "Polygon"
Slot "labpt":
[1] 91.44457 25.55424

Slot "area":
[1] 0.25305

Slot "hole":
[1] FALSE

Slot "ringDir":
[1] 1

Slot "coords":
            x      y
  [1,] 91.273 25.804
  [2,] 91.348 25.817
  [3,] 91.408 25.844
  [4,] 91.498 25.831
  [5,] 91.528 25.763
  [6,] 91.573 25.694
  [7,] 91.633 25.681
  [8,] 91.723 25.681
  [9,] 91.768 25.626
[10,] 91.768 25.544
[11,] 91.768 25.448
[12,] 91.708 25.380
[13,] 91.648 25.312
[14,] 91.558 25.298
[15,] 91.468 25.298
[16,] 91.378 25.325
[17,] 91.318 25.380
[18,] 91.228 25.421
[19,] 91.123 25.435
[20,] 91.108 25.558
[21,] 91.123 25.640
[22,] 91.198 25.708
[23,] 91.258 25.776
[24,] 91.273 25.804



Slot "plotOrder":
[1] 1

Slot "labpt":
[1] 91.44457 25.55424

Slot "ID":
[1] "89"

Slot "area":
[1] 0.25305


[[2]]
An object of class "Polygons"
Slot "Polygons":
[[1]]
An object of class "Polygon"
Slot "labpt":
[1] 92.00535 25.12364

[...etc...]


 > 				
 > 				class(tmppoly_shrunken)
[1] "Polygon"
attr(,"package")
[1] "sp"
 > 				tmppoly_shrunken
An object of class "Polygon"
Slot "labpt":
[1] 91.44457 25.55424

Slot "area":
[1] 25.29848

Slot "hole":
[1] FALSE

Slot "ringDir":
[1] 1

Slot "coords":
              x        y
  [1,] 89.72883  3.00000
  [2,] 90.47883 28.18185
  [3,] 91.07883 28.45185
  [4,] 91.97883 28.32185
  [5,] 92.27883 27.64185
  [6,] 92.72883 26.95185
  [7,] 93.32883 26.82185
  [8,] 94.22883 26.82185
  [9,] 94.67883 26.27185
[10,] 94.67883 25.45185
[11,] 94.67883 24.49185
[12,] 94.07883 23.81185
[13,] 93.47883 23.13185
[14,] 92.57883 22.99185
[15,] 91.67883 22.99185
[16,] 90.77883 23.26185
[17,] 90.17883 23.81185
[18,] 89.27883 24.22185
[19,] 88.22883 24.36185
[20,] 88.07883 25.59185
[21,] 88.22883 26.41185
[22,] 88.97883 27.09185
[23,] 89.57883 27.77185
[24,] 89.72883 28.05185

 > 				
 > 			 
slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]], 
"coords", check=FALSE) = slot(tmppoly_shrunken, "coords")
Error in 
slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]], 
  :
   object of type 'S4' is not subsettable
 >
 >
===========================


-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
1005 Valley Life Sciences Building #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From mathieu.rajerison at gmail.com  Wed Sep 12 08:24:29 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 12 Sep 2012 08:24:29 +0200
Subject: [R-sig-Geo] shortest path
In-Reply-To: <504EDF97.7030904@uni-muenster.de>
References: <9cfe9df807aa43739fb2f68647777f1d@EX-0-HT0.lancs.local>
	<CANVKczOPWeqWrr-Q94AKSv+D+-TuBPfBdAFE7G_60-jXvgDJNA@mail.gmail.com>
	<1662121.jOZdtS26z0@ID-99504.news.uni-berlin.de>
	<1fb14c3c502d4a1d95c4f0a6053d097d@EX-0-HT0.lancs.local>
	<bc1ce8d194f1409e81f9e2bfaaa9c8e8@EX-1-HT0.lancs.local>
	<CANVKczPfRE5rgSzmZ=CMbt--A2Yq-Y0n4cj1dcRHvLmrLQuNdw@mail.gmail.com>
	<CAGfc75k7zoNo82rs=OCgoitbnZA04Lb8LVAXad0-HryBnt3WeA@mail.gmail.com>
	<CAGfc75nkjdYFPix9xYJWLKb_xqq_wmd-uroacYLNxZP7TNKTRw@mail.gmail.com>
	<CAGfc75n_TtTRC8fL=2O0BynhhRpR897QWTZcDU0a9pQMdy8DnA@mail.gmail.com>
	<98f1ba726d9c40dca5c9c165ca61adfd@EX-0-HT0.lancs.local>
	<CANVKczMOV=dEBO7U7fme9S+zP8Qorrygk4=9knqwMn_MFmkz-g@mail.gmail.com>
	<CAGfc75=rB9nBUHWNiGBaezxriKzaGBwsayY30F05a0PZhXZUXw@mail.gmail.com>
	<CAGfc75=GWS2aPwqQuFcg=bAmYk=bDz20P1EO-AtVP+S7TNVB_A@mail.gmail.com>
	<504EDF97.7030904@uni-muenster.de>
Message-ID: <CAGfc75k_MiOG8yoy79gLztkSEZ5O4zb_WZj+SnquANhWa7608w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120912/7272b53c/attachment.pl>

From edzer.pebesma at uni-muenster.de  Wed Sep 12 08:56:58 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 12 Sep 2012 08:56:58 +0200
Subject: [R-sig-Geo] Changing coords in SpatialPolgyon
In-Reply-To: <504FD624.2040108@berkeley.edu>
References: <504FD624.2040108@berkeley.edu>
Message-ID: <5050323A.80805@uni-muenster.de>

Nick, posting a small, reproducible example will help us to help you.

On 09/12/2012 02:24 AM, Nick Matzke wrote:
> Hi -- I am trying to change the coordinates of the points in a polygon
> (after shrinking the polygon towards the centroid.
> 
> However, any way I try it (direct assignment, slot(), attr()), I get
> this error:
> 
> =================
> object of type 'S4' is not subsettable
> =================
> 
> 
> Here's an example of the error, showing the objects I'm using.  Any help
> **much** appreciated.
> 
> ===========================
> 
> 
>>                 class(all_emerged_islands_at_this_height_break)
> [1] "SpatialPolygons"
> attr(,"package")
> [1] "sp"
>>                 all_emerged_islands_at_this_height_break
> An object of class "SpatialPolygons"
> Slot "polygons":
> [[1]]
> An object of class "Polygons"
> Slot "Polygons":
> [[1]]
> An object of class "Polygon"
> Slot "labpt":
> [1] 91.44457 25.55424
> 
> Slot "area":
> [1] 0.25305
> 
> Slot "hole":
> [1] FALSE
> 
> Slot "ringDir":
> [1] 1
> 
> Slot "coords":
>            x      y
>  [1,] 91.273 25.804
>  [2,] 91.348 25.817
>  [3,] 91.408 25.844
>  [4,] 91.498 25.831
>  [5,] 91.528 25.763
>  [6,] 91.573 25.694
>  [7,] 91.633 25.681
>  [8,] 91.723 25.681
>  [9,] 91.768 25.626
> [10,] 91.768 25.544
> [11,] 91.768 25.448
> [12,] 91.708 25.380
> [13,] 91.648 25.312
> [14,] 91.558 25.298
> [15,] 91.468 25.298
> [16,] 91.378 25.325
> [17,] 91.318 25.380
> [18,] 91.228 25.421
> [19,] 91.123 25.435
> [20,] 91.108 25.558
> [21,] 91.123 25.640
> [22,] 91.198 25.708
> [23,] 91.258 25.776
> [24,] 91.273 25.804
> 
> 
> 
> Slot "plotOrder":
> [1] 1
> 
> Slot "labpt":
> [1] 91.44457 25.55424
> 
> Slot "ID":
> [1] "89"
> 
> Slot "area":
> [1] 0.25305
> 
> 
> [[2]]
> An object of class "Polygons"
> Slot "Polygons":
> [[1]]
> An object of class "Polygon"
> Slot "labpt":
> [1] 92.00535 25.12364
> 
> [...etc...]
> 
> 
>>                
>>                 class(tmppoly_shrunken)
> [1] "Polygon"
> attr(,"package")
> [1] "sp"
>>                 tmppoly_shrunken
> An object of class "Polygon"
> Slot "labpt":
> [1] 91.44457 25.55424
> 
> Slot "area":
> [1] 25.29848
> 
> Slot "hole":
> [1] FALSE
> 
> Slot "ringDir":
> [1] 1
> 
> Slot "coords":
>              x        y
>  [1,] 89.72883  3.00000
>  [2,] 90.47883 28.18185
>  [3,] 91.07883 28.45185
>  [4,] 91.97883 28.32185
>  [5,] 92.27883 27.64185
>  [6,] 92.72883 26.95185
>  [7,] 93.32883 26.82185
>  [8,] 94.22883 26.82185
>  [9,] 94.67883 26.27185
> [10,] 94.67883 25.45185
> [11,] 94.67883 24.49185
> [12,] 94.07883 23.81185
> [13,] 93.47883 23.13185
> [14,] 92.57883 22.99185
> [15,] 91.67883 22.99185
> [16,] 90.77883 23.26185
> [17,] 90.17883 23.81185
> [18,] 89.27883 24.22185
> [19,] 88.22883 24.36185
> [20,] 88.07883 25.59185
> [21,] 88.22883 26.41185
> [22,] 88.97883 27.09185
> [23,] 89.57883 27.77185
> [24,] 89.72883 28.05185
> 
>>                
>>             
> slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]],
> "coords", check=FALSE) = slot(tmppoly_shrunken, "coords")
> Error in
> slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]],
>  :
>   object of type 'S4' is not subsettable
>>
>>
> ===========================
> 
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From roman.lustrik at gmail.com  Wed Sep 12 09:01:18 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Wed, 12 Sep 2012 09:01:18 +0200
Subject: [R-sig-Geo] Changing coords in SpatialPolgyon
In-Reply-To: <504FD624.2040108@berkeley.edu>
References: <504FD624.2040108@berkeley.edu>
Message-ID: <CAHT1vpgAnPFJgg1wgSK2gguobVt6Am6vq9M0eN0v9-fo2Y5Exw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120912/b69e10c0/attachment.pl>

From mathieu.rajerison at gmail.com  Wed Sep 12 09:23:37 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 12 Sep 2012 09:23:37 +0200
Subject: [R-sig-Geo] project2segment -> connecting SpatialLines: some
	connect, some not
Message-ID: <CAGfc75kXZ27Bkr34O7MWzcyZTdBZg6dNRpKBRq3MdGaEobhpGg@mail.gmail.com>

Hi,


This post could have followed the one about shortest path but I preferred
to make a separate post to make things clearer.

Given a set of points and a set of lines, I tried to make a graph of it.
The operation consisted, firstly, in getting the lines that connect each
point to the nearest point on the segment pattern

For this, I used spatstat::project2segment. spatstat is really a wonderful
package. I think it can be useful for snapping line operations.

I'm stuck because I manage to create some lines between the points and the
segments but some lines connect to the network while others don't.

When they don't, the distance between the end connecting segment point and
the network is extremely small. I put an image of it as attached file.

Here is the code, for those who'd like to give it a try and, eventually,
give an issue. Maybe I did it in a wrong way. It's based on Barry's initial
code.

library(spatstat)
library(rgeos)
library(maptools)

makeNest <- function(n) {
    ### generate a bunch of SpatialLines on (0,1) square
    xy = cbind(runif(n), runif(n), runif(n), runif(n))
    lines = Lines(apply(xy, 1, function(z) {
        Line(rbind(z[1:2], z[3:4]))
    }), ID = 1)
    SpatialLines(list(lines))
}

connection2Lines <- function(lines, pts){

  sourcePts <- as(pts,"ppp")
  projectedPts <- project2segment(sourcePts, as(lines, "psp"))$Xproj
  bb <- union.owin(bounding.box(sourcePts), bounding.box(projectedPts))
  cnnLines <- as(psp(sourcePts$x, sourcePts$y, projectedPts$x,
projectedPts$y, window=bb), "SpatialLines")
  cnnLines <- spChFIDs(cnnLines, sapply(cnnLines at lines, function(x)
paste("connect", x at ID, sep="_")))
  proj4string(cnnLines) <- proj4string(lines)

  return(cnnLines)
}

n <- 5
pts <- SpatialPoints(cbind(runif(n), runif(n)))

gg = makeNest(10)

cnnLines <- connection2Lines(gg, pts)

plot(gg)
plot(cnnLines, col="red", add=T)

any(gIntersects(cnnLines, gg, byid=TRUE)==FALSE)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120912/5d4a7bf0/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pb.gif
Type: image/gif
Size: 3440 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120912/5d4a7bf0/attachment.gif>

From edzer.pebesma at uni-muenster.de  Wed Sep 12 11:01:09 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 12 Sep 2012 11:01:09 +0200
Subject: [R-sig-Geo] Is it possible to calculate the semivariances of a
 variogram between one specific point and all other points in space?
In-Reply-To: <CADfOX6zdKKeZXDAWpXcBKcWfT0JmnLz9N01nGkzKpof_3=vSHg@mail.gmail.com>
References: <CADfOX6y9CxAy32CZPvNVh8VMP-xV1HS6tteiU+sCZ5SW5tmcrA@mail.gmail.com>
	<5049CFB4.5050700@uni-muenster.de>
	<CADfOX6zdKKeZXDAWpXcBKcWfT0JmnLz9N01nGkzKpof_3=vSHg@mail.gmail.com>
Message-ID: <50504F55.1080103@uni-muenster.de>



On 09/12/2012 10:29 AM, Laura Wette wrote:
> Hello Edzer,
> 
> I have one last question (at least I hope so) regarding the variogram
> cloud. So now I've got only those rows of the variogram, where I find the
> specific point I want to have by converting into a data frame and then
> extracting the appropriated rows. But I would like to plot the variogram,
> so my question is: Is there any posibility to convert this new data frame
> back into class "variogramCloud"?
> 
> Thank you very much in advance for your answer!
> Regards
> Laura

Yes, but the code looks a bit more ugly without the coercion to data.frame:

> v[((v$np %/% attr(v, ".BigInt"))+1)==1,][1:10,]
        dist       gamma dir.hor dir.ver   id left right
1   70.83784 0.006065804       0       0 var1    2     1
2  118.84864 0.109534743       0       0 var1    3     1
4  259.23927 0.952808244       0       0 var1    4     1
7  366.31407 0.890852716       0       0 var1    5     1
11 473.62960 0.833549786       0       0 var1    6     1
16 258.32151 0.586528972       0       0 var1    7     1
22 252.04960 0.426115526       0       0 var1    8     1
29 380.18943 0.583407369       0       0 var1    9     1
37 471.00849 1.479252663       0       0 var1   10     1
46 510.07548 1.424283374       0       0 var1   11     1
> class(v[((v$np %/% attr(v, ".BigInt"))+1)==1,][1:10,])
[1] "variogramCloud" "data.frame"
> plot(v[((v$np %/% attr(v, ".BigInt"))+1)==1,])

plots the variogram cloud for all point pairs (up to the default
distance) that include point 1. Replacing %/% with %% will get you
selection on the "left" of the point pair:

> gstat:::as.data.frame.variogramCloud
function (x, row.names, optional, ...)
{
    .BigInt = attr(x, ".BigInt")
    x$left = x$np%%.BigInt + 1
    x$right = x$np%/%.BigInt + 1
    x$np = NULL
    class(x) = "data.frame"
    x
}
<environment: namespace:gstat>


> 
> 2012/9/7 Edzer Pebesma <edzer.pebesma at uni-muenster.de>
> 
>> The variogram cloud might be what you're looking for. In the output
>> table, all individual point pairs (up to some spatial separation
>> distance) are reported, and identified by columns "left" and "right".
>> Selecting a point (last example) needs coercion to data.frame first.
>>
>>
>>> library(gstat)
>> Loading required package: sp
>> Loading required package: spacetime
>> Loading required package: zoo
>>
>> Attaching package: ?zoo?
>>
>> The following object(s) are masked from ?package:base?:
>>
>>     as.Date, as.Date.numeric
>>
>> Loading required package: xts
>>> loadMeuse()
>>> v = variogram(log(zinc)~1, meuse, cloud=TRUE)
>>> v[1:10,]
>>         dist       gamma dir.hor dir.ver   id left right
>> 1   70.83784 0.006065804       0       0 var1    2     1
>> 2  118.84864 0.109534743       0       0 var1    3     1
>> 3  141.56624 0.167153095       0       0 var1    3     2
>> 4  259.23927 0.952808244       0       0 var1    4     1
>> 5  282.85155 1.110920725       0       0 var1    4     2
>> 6  143.17123 0.416229664       0       0 var1    4     3
>> 7  366.31407 0.890852716       0       0 var1    5     1
>> 8  362.64032 1.043938763       0       0 var1    5     2
>> 9  251.02390 0.375633672       0       0 var1    5     3
>> 10 154.26276 0.001041290       0       0 var1    5     4
>>> plot(v)
>>> vdf = as.data.frame(v)
>>> vdf[vdf$right == 1,][1:10,]
>>         dist       gamma dir.hor dir.ver   id left right
>> 1   70.83784 0.006065804       0       0 var1    2     1
>> 2  118.84864 0.109534743       0       0 var1    3     1
>> 4  259.23927 0.952808244       0       0 var1    4     1
>> 7  366.31407 0.890852716       0       0 var1    5     1
>> 11 473.62960 0.833549786       0       0 var1    6     1
>> 16 258.32151 0.586528972       0       0 var1    7     1
>> 22 252.04960 0.426115526       0       0 var1    8     1
>> 29 380.18943 0.583407369       0       0 var1    9     1
>> 37 471.00849 1.479252663       0       0 var1   10     1
>> 46 510.07548 1.424283374       0       0 var1   11     1
>>
>>
>> On 09/07/2012 11:52 AM, Laura Wette wrote:
>>> Hello all,
>>>
>>> I searched the internet very long for an answer, but didn't find one, so
>> I
>>> hope you can help me.
>>>
>>> I have to test several study sites for representativeness for the
>>> environment and therefore I have remotely sensed raster data, which
>>> reproduce the NDVI (Normalized Differenced Vegetation Index). The pixel
>>> values vary between -1 and 1. I've also got the coordinates of the study
>>> sites' centers and all the coordinates for all pixels and their values.
>>>
>>> For this purpose I decided to calculate variograms for the study sites
>> and
>>> their environment with the variog()-function of the geoR-Package.
>>> Unfortunately, with this function it is only possible to calculate the
>>> semi-variances for each pair of points in the investigated area and not
>> for
>>> pairs of one specific point and any other point (if I understood the R
>>> Documentation correctly). So the calculated semi-variances have nothing
>> to
>>> do with study sites, as they have no spatial connection. Could you please
>>> tell me, if it is possible to calculate these variograms with a given
>>> starting point? I.e. is it possible to calculate the semivariances
>> between
>>> one specific point( the "starting point", which is one study site) and
>> all
>>> other points (the environment of the study sites), which are located in
>>> different distances? Is it possible to do so with variog() or do have to
>>> calculate with other packages like gstat, spatial or nlme?
>>>
>>> In the gstat-manual (www.gstat.org/gstat.pdf) I found a so-called local
>>> neighbourhood selection. Is there anything similar available for the geoR
>>> package? If not, how can I implement the commands in the
>>> variogram()-function of the gstat-package? Can I use this local
>>> neighbourhood selection at all or is it a wrong aprroach?
>>>
>>> Thank you very much for any answer!
>>> Laura
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From matzke at berkeley.edu  Thu Sep 13 02:13:15 2012
From: matzke at berkeley.edu (Nick Matzke)
Date: Wed, 12 Sep 2012 17:13:15 -0700
Subject: [R-sig-Geo] Changing coords in SpatialPolgyon
In-Reply-To: <CAHT1vpgAnPFJgg1wgSK2gguobVt6Am6vq9M0eN0v9-fo2Y5Exw@mail.gmail.com>
References: <504FD624.2040108@berkeley.edu>
	<CAHT1vpgAnPFJgg1wgSK2gguobVt6Am6vq9M0eN0v9-fo2Y5Exw@mail.gmail.com>
Message-ID: <5051251B.60003@berkeley.edu>

Hi all,

Thanks very much for the comments.  Here is a "reproduce the 
problem from scratch" which will hopefully be helpful.

(Sorry this took a bit, I had to figure out some dput hacks 
to even get the S4 objects to store/retrieve with dput/dget.)

Any help VERY welcome...




#######################################################
# Re-creation of problem:
# start by retrieving the polygon objects I was using
#######################################################
library(sp)
library(maptools)	# for e.g. elide
sessionInfo()
# R version 2.14.1 (2011-12-22)
# Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
#
# locale:
# [1] 
en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
#
# attached base packages:
# [1] stats     grDevices utils     datasets  graphics 
methods   base
#
# other attached packages:
# [1] maptools_0.8-12 lattice_0.20-0  foreign_0.8-48 
sp_0.9-93
#
# loaded via a namespace (and not attached):
# [1] grid_2.14.1


all_emerged_islands_at_this_height_break = new("SpatialPolygons"
     , polygons = list(
new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(89.7176352165596, 25.2725528991387)
     , area = 0.102289000000002
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(89.595, 89.655, 89.699, 89.759, 
89.819, 89.864, 89.864,
89.894, 89.924, 89.909, 89.894, 89.879, 89.864, 89.774, 89.684,
89.655, 89.565, 89.49, 89.505, 89.535, 89.595, 25.38, 25.407,
25.435, 25.448, 25.421, 25.366, 25.325, 25.366, 25.366, 25.298,
25.257, 25.161, 25.092, 25.106, 25.12, 25.175, 25.188, 25.202,
25.312, 25.38, 25.38), .Dim = c(21L, 2L), .Dimnames = 
list(NULL,
     c("x", "y")))
)
)
     , plotOrder = 1L
     , labpt = c(89.7176352165596, 25.2725528991387)
     , ID = "86"
     , area = 0.102289000000002
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(91.4445748369887, 25.5542392708951)
     , area = 0.253050000000001
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(91.273, 91.348, 91.408, 91.498, 
91.528, 91.573, 91.633,
91.723, 91.768, 91.768, 91.768, 91.708, 91.648, 91.558, 91.468,
91.378, 91.318, 91.228, 91.123, 91.108, 91.123, 91.198, 91.258,
91.273, 25.804, 25.817, 25.844, 25.831, 25.763, 25.694, 25.681,
25.681, 25.626, 25.544, 25.448, 25.38, 25.312, 25.298, 25.298,
25.325, 25.38, 25.421, 25.435, 25.558, 25.64, 25.708, 25.776,
25.804), .Dim = c(24L, 2L), .Dimnames = list(NULL, c("x", "y"
)))
)
)
     , plotOrder = 1L
     , labpt = c(91.4445748369887, 25.5542392708951)
     , ID = "89"
     , area = 0.253050000000001
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(92.0053498822521, 25.1236440055376)
     , area = 1.07977850000001
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(91.618, 91.633, 91.723, 91.813, 
91.918, 92.008, 92.112,
92.202, 92.262, 92.322, 92.382, 92.367, 92.352, 92.367, 92.382,
92.397, 92.397, 92.337, 92.322, 92.337, 92.367, 92.367, 92.337,
92.337, 92.277, 92.232, 92.142, 92.038, 91.918, 91.813, 91.738,
91.648, 91.588, 91.528, 91.483, 91.483, 91.513, 91.543, 91.618,
25.503, 25.599, 25.667, 25.681, 25.708, 25.749, 25.831, 25.94,
26.049, 26.062, 26.008, 25.94, 25.858, 25.776, 25.667, 25.476,
25.257, 25.037, 24.818, 24.694, 24.584, 24.515, 24.487, 24.418,
24.349, 24.335, 24.28, 24.322, 24.377, 24.446, 24.57, 24.735,
24.9, 25.079, 25.202, 25.284, 25.353, 25.448, 25.503), .Dim 
= c(39L,
2L), .Dimnames = list(NULL, c("x", "y")))
)
)
     , plotOrder = 1L
     , labpt = c(92.0053498822521, 25.1236440055376)
     , ID = "90"
     , area = 1.07977850000001
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(92.7514440592915, 24.8855703894446)
     , area = 0.227182499999996
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(92.922, 92.937, 92.907, 92.802, 
92.757, 92.667, 92.592,
92.592, 92.577, 92.577, 92.607, 92.652, 92.712, 92.712, 92.712,
92.787, 92.817, 92.877, 92.892, 92.892, 92.877, 92.877, 92.862,
92.817, 92.847, 92.877, 92.922, 24.694, 24.652, 24.584, 24.515,
24.501, 24.418, 24.404, 24.542, 24.611, 24.735, 24.873, 25.024,
25.188, 25.312, 25.394, 25.407, 25.435, 25.435, 25.325, 25.229,
25.065, 24.941, 24.914, 24.845, 24.79, 24.749, 24.694), .Dim 
= c(27L,
2L), .Dimnames = list(NULL, c("x", "y")))
)
)
     , plotOrder = 1L
     , labpt = c(92.7514440592915, 24.8855703894446)
     , ID = "91"
     , area = 0.227182499999996
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(92.9357709620477, 24.4263626802001)
     , area = 0.203939999999999
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(92.772, 92.802, 92.892, 92.967, 
92.997, 93.102, 93.162,
93.237, 93.267, 93.222, 93.177, 93.102, 93.027, 92.952, 92.877,
92.772, 92.682, 92.622, 92.607, 92.652, 92.697, 92.772, 24.584,
24.625, 24.639, 24.68, 24.625, 24.597, 24.529, 24.487, 24.432,
24.363, 24.294, 24.266, 24.17, 24.17, 24.225, 24.28, 24.363,
24.391, 24.46, 24.57, 24.57, 24.584), .Dim = c(22L, 2L), 
.Dimnames = list(
     NULL, c("x", "y")))
)
)
     , plotOrder = 1L
     , labpt = c(92.9357709620477, 24.4263626802001)
     , ID = "92"
     , area = 0.203939999999999
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(93.3346580365155, 24.13562118743)
     , area = 0.209865
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(93.072, 93.117, 93.162, 93.267, 
93.311, 93.356, 93.386,
93.446, 93.506, 93.566, 93.626, 93.641, 93.641, 93.641, 93.641,
93.611, 93.581, 93.491, 93.431, 93.341, 93.296, 93.222, 93.177,
93.147, 93.087, 93.042, 93.027, 93.072, 24.322, 24.377, 24.404,
24.404, 24.391, 24.335, 24.28, 24.253, 24.239, 24.184, 24.17,
24.142, 24.114, 24.073, 24.018, 23.962, 23.893, 23.865, 23.907,
23.921, 23.948, 23.962, 24.004, 24.059, 24.087, 24.128, 24.239,
24.322), .Dim = c(28L, 2L), .Dimnames = list(NULL, c("x", "y"
)))
)
)
     , plotOrder = 1L
     , labpt = c(93.3346580365155, 24.13562118743)
     , ID = "93"
     , area = 0.209865
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(93.720755372218, 23.8856480770871)
     , area = 0.11727
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(93.551, 93.581, 93.671, 93.776, 
93.866, 93.941, 93.971,
93.941, 93.896, 93.866, 93.836, 93.821, 93.806, 93.791, 93.731,
93.656, 93.626, 93.551, 93.491, 93.506, 93.551, 23.935, 24.018,
24.059, 24.059, 24.045, 24.031, 24.018, 23.99, 23.907, 23.851,
23.768, 23.699, 23.671, 23.685, 23.685, 23.671, 23.727, 23.81,
23.838, 23.921, 23.935), .Dim = c(21L, 2L), .Dimnames = list(
     NULL, c("x", "y")))
)
)
     , plotOrder = 1L
     , labpt = c(93.720755372218, 23.8856480770871)
     , ID = "94"
     , area = 0.11727
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(93.9485141144793, 23.827383855931)
     , area = 0.0863474999999999
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(93.806, 93.851, 93.911, 93.941, 
93.986, 94.031, 94.061,
94.091, 94.121, 94.151, 94.106, 94.076, 93.986, 93.896, 93.851,
93.791, 93.761, 93.761, 93.806, 23.824, 23.907, 23.935, 24.018,
24.018, 23.99, 24.018, 23.948, 23.907, 23.851, 23.796, 23.768,
23.713, 23.671, 23.63, 23.657, 23.727, 23.782, 23.824), .Dim 
= c(19L,
2L), .Dimnames = list(NULL, c("x", "y")))
)
)
     , plotOrder = 1L
     , labpt = c(93.9485141144793, 23.827383855931)
     , ID = "96"
     , area = 0.0863474999999999
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(94.2478423555231, 23.9836118751524)
     , area = 0.102525
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(94.061, 94.046, 94.046, 94.091, 
94.121, 94.166, 94.226,
94.286, 94.331, 94.391, 94.421, 94.451, 94.451, 94.421, 94.331,
94.256, 94.196, 94.136, 94.061, 94.031, 94.061, 23.879, 23.948,
23.99, 24.031, 24.087, 24.128, 24.184, 24.17, 24.128, 24.073,
24.059, 23.976, 23.907, 23.865, 23.851, 23.851, 23.838, 23.81,
23.879, 23.921, 23.879), .Dim = c(21L, 2L), .Dimnames = list(
     NULL, c("x", "y")))
)
)
     , plotOrder = 1L
     , labpt = c(94.2478423555231, 23.9836118751524)
     , ID = "97"
     , area = 0.102525
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(95.4490116409178, 23.7243413032006)
     , area = 0.223278500000003
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(95.2, 95.23, 95.26, 95.305, 
95.35, 95.395, 95.44,
95.485, 95.575, 95.635, 95.635, 95.635, 95.665, 95.709, 95.305,
95.245, 95.185, 95.17, 95.724, 95.739, 95.68, 95.605, 95.485,
95.35, 95.2, 23.671, 23.754, 23.81, 23.893, 23.935, 24.031, 
24.073,
24.031, 23.976, 23.948, 23.865, 23.796, 23.81, 23.685, 23.519,
23.532, 23.588, 23.657, 23.63, 23.574, 23.546, 23.519, 23.505,
23.519, 23.671), .Dim = c(25L, 2L), .Dimnames = list(NULL, 
c("x",
"y")))
)
)
     , plotOrder = 1L
     , labpt = c(95.4490116409178, 23.7243413032006)
     , ID = "100"
     , area = 0.223278500000003
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(95.5720136547939, 23.476735339631)
     , area = 0.185465999999999
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(95.784, 95.829, 95.844, 95.814, 
95.799, 95.724, 95.68,
95.59, 95.47, 95.38, 95.29, 95.275, 95.275, 95.32, 95.395, 
95.485,
95.56, 95.635, 95.709, 95.739, 95.769, 95.784, 23.56, 23.463,
23.421, 23.338, 23.282, 23.254, 23.24, 23.282, 23.338, 23.338,
23.38, 23.463, 23.532, 23.602, 23.63, 23.657, 23.685, 23.699,
23.713, 23.657, 23.616, 23.56), .Dim = c(22L, 2L), .Dimnames 
= list(
     NULL, c("x", "y")))
)
)
     , plotOrder = 1L
     , labpt = c(95.5720136547939, 23.476735339631)
     , ID = "101"
     , area = 0.185465999999999
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(97.7712398308958, 23.1559739868982)
     , area = 0.0656399999999989
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(97.748, 97.823, 97.883, 97.928, 
97.958, 97.958, 97.928,
97.898, 97.838, 97.823, 97.763, 97.673, 97.628, 97.583, 97.643,
97.748, 23.282, 23.254, 23.254, 23.24, 23.199, 23.157, 23.143,
23.087, 23.059, 23.031, 23.018, 23.059, 23.087, 23.157, 23.24,
23.282), .Dim = c(16L, 2L), .Dimnames = list(NULL, c("x", "y"
)))
)
)
     , plotOrder = 1L
     , labpt = c(97.7712398308958, 23.1559739868982)
     , ID = "106"
     , area = 0.0656399999999989
),new("Polygons"
     , Polygons = list(
new("Polygon"
     , labpt = c(98.1040520957036, 23.1987578502582)
     , area = 0.0543135000000015
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(97.928, 97.913, 97.958, 98.018, 
98.107, 98.152, 98.197,
98.227, 98.242, 98.242, 98.242, 98.182, 98.122, 98.063, 97.988,
97.928, 23.171, 23.226, 23.24, 23.254, 23.296, 23.338, 23.324,
23.282, 23.254, 23.171, 23.129, 23.087, 23.101, 23.101, 23.115,
23.171), .Dim = c(16L, 2L), .Dimnames = list(NULL, c("x", "y"
)))
)
)
     , plotOrder = 1L
     , labpt = c(98.1040520957036, 23.1987578502582)
     , ID = "107"
     , area = 0.0543135000000015
)
)
     , plotOrder = c(3L, 2L, 4L, 10L, 6L, 5L, 11L, 7L, 9L, 
1L, 8L, 12L, 13L)
     , bbox = structure(c(89.49, 23.018, 98.242, 26.062), 
.Dim = c(2L, 2L), .Dimnames = list(
     c("x", "y"), c("min", "max")))
     , proj4string = new("CRS"
     , projargs = " +proj=longlat +datum=WGS84 +ellps=WGS84 
+towgs84=0,0,0"
)
)



tmppoly_shrunken = new("Polygon"
     , labpt = c(89.7176352165596, 25.2725528991387)
     , area = 10.2274188632081
     , hole = FALSE
     , ringDir = 1L
     , coords = structure(c(88.4912830509635, 
89.0912830509635, 89.5312830509635,
90.1312830509635, 90.7312830509635, 91.1812830509635, 
91.1812830509635,
91.4812830509635, 91.7812830509635, 91.6312830509635, 
91.4812830509635,
91.3312830509635, 91.1812830509635, 90.2812830509635, 
89.3812830509634,
89.0912830509635, 88.1912830509634, 87.4412830509634, 
87.5912830509634,
87.8912830509634, 88.4912830509635, 26.3470239077515, 
26.6170239077515,
26.8970239077515, 27.0270239077515, 26.7570239077515, 
26.2070239077515,
25.7970239077515, 26.2070239077515, 26.2070239077515, 
25.5270239077515,
25.1170239077515, 24.1570239077515, 23.4670239077515, 
23.6070239077515,
23.7470239077515, 24.2970239077515, 24.4270239077515, 
24.5670239077515,
25.6670239077515, 26.3470239077515, 26.3470239077515), .Dim 
= c(21L,
2L), .Dimnames = list(NULL, c("x", "y")))
)




#######################################################
# ATTEMPT TO REPLACE COORDINATES;
# FAILS WITH:
# Error in 
slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]], 
  :
#  object of type 'S4' is not subsettable
#######################################################

j = 1
volcano_ID = 86

slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]],
"coords", check=FALSE) = slot(tmppoly_shrunken, "coords")

# Error in 
slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]], 
  :
#   object of type 'S4' is not subsettable

#######################################################
# ATTEMPT TO REPLACE WHOLE POLYGONS OBJECT;
# FAILS WITH:
# Error in 
slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]], 
  :
#  object of type 'S4' is not subsettable
#######################################################

all_emerged_islands_at_this_height_break[j]@polygons = 
list(Polygons(list(tmppoly_shrunken), ID=volcano_ID))

# Error in 
all_emerged_islands_at_this_height_break[j]@polygons = 
list(Polygons(list(tmppoly_shrunken),  :
#   object of type 'S4' is not subsettable
#


From priyanka.toxic00 at gmail.com  Thu Sep 13 06:26:05 2012
From: priyanka.toxic00 at gmail.com (Priyanka Sharma)
Date: Thu, 13 Sep 2012 09:56:05 +0530
Subject: [R-sig-Geo] Fwd: How to calculate the number of points that
 fall inside each cell of a given raster using R
In-Reply-To: <CANVKczMu7zcimE=3Wu1LaAzSf7dPiEVK0tEW3XB2UN0tPKHeYA@mail.gmail.com>
References: <CALYnv35cmQ=LnPpWFC9n6abppobZPi5Wmhd97vwA9EpG0OoVKw@mail.gmail.com>
	<d22ebe053f294d738262a2eabd27ee1f@EX-0-HT0.lancs.local>
	<CANVKczMu7zcimE=3Wu1LaAzSf7dPiEVK0tEW3XB2UN0tPKHeYA@mail.gmail.com>
Message-ID: <CALYnv37sn=m4NqQKbMiCeHe4j94o9Jzg86u_XJP0GoYTHjv=6Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120913/84a4e27c/attachment.pl>

From melita at cirus.dhz.hr  Thu Sep 13 12:43:03 2012
From: melita at cirus.dhz.hr (melita)
Date: Thu, 13 Sep 2012 03:43:03 -0700 (PDT)
Subject: [R-sig-Geo] problem with example inverse distance weighted
 (IDW) interpolation
In-Reply-To: <1347389311417-7580941.post@n2.nabble.com>
References: <1347389311417-7580941.post@n2.nabble.com>
Message-ID: <1347532983565-7580951.post@n2.nabble.com>

Dear Roger

I tried to reproduce this example, and also ended with an error:
#################################################
# Error: is.ppp(X) && is.marked(X) is not TRUE
#################################################

While krige is working fine:
> idw.out <- krige(zinc ~ 1, meuse, meuse.grid)
[inverse distance weighted interpolation]


Usually I use krige function for the idw with squared distances, but
recently I wanted to test linear distances in idw, without success. Now I
saw this post of Nerak so maybe you can help us to solve it.


Regards,

Melita Percec Tadic
Meteorological and Hydrological Service of Croatia.

Example together with the info session:

sessionInfo() 
#R version 2.15.0 (2012-03-30)
#Platform: i386-pc-mingw32/i386 (32-bit)

#locale:
#[1] LC_COLLATE=Croatian_Croatia.1250  LC_CTYPE=Croatian_Croatia.1250   
LC_MONETARY=Croatian_Croatia.1250 LC_NUMERIC=C                     
#[5] LC_TIME=Croatian_Croatia.1250    

#attached base packages:
#[1] stats     graphics  grDevices utils     datasets  methods   base     

#other attached packages:
# [1] spatstat_1.26-1    deldir_0.0-19      mgcv_1.7-16        boot_1.3-4        
RColorBrewer_1.0-5 classInt_0.1-18    e1071_1.6         
# [8] class_7.3-3        gstat_1.0-10       spacetime_0.6-2    xts_0.8-6         
zoo_1.7-7          rgdal_0.7-11       maptools_0.8-14   
#[15] lattice_0.20-6     sp_0.9-99          foreign_0.8-49    

#loaded via a namespace (and not attached):
#[1] grid_2.15.0  Matrix_1.0-6 nlme_3.1-103 tools_2.15.0


library(gstat)
data(meuse)
coordinates(meuse) <- c("x", "y")
data(meuse.grid)
coordinates(meuse.grid) <- c("x", "y")
gridded(meuse.grid) <- TRUE
idw.out <- idw(zinc ~ 1, meuse, meuse.grid, idp = 2.0)

#################################################
# Error: is.ppp(X) && is.marked(X) is not TRUE
#################################################

spplot(idw.out, "var1.pred")



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/problem-with-example-inverse-distance-weighted-IDW-interpolation-tp7580941p7580951.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Thu Sep 13 13:02:43 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 13 Sep 2012 13:02:43 +0200
Subject: [R-sig-Geo] problem with example inverse distance weighted
 (IDW) interpolation
In-Reply-To: <1347532983565-7580951.post@n2.nabble.com>
References: <1347389311417-7580941.post@n2.nabble.com>
	<1347532983565-7580951.post@n2.nabble.com>
Message-ID: <5051BD53.7020800@uni-muenster.de>



On 09/13/2012 12:43 PM, melita wrote:
> # Error: is.ppp(X) && is.marked(X) is not TRUE

Melita, thanks for bringing this up.

If you first load package gstat, and then load package spatstat, you'll
see the following warning:

Attaching package: ?spatstat?

The following object(s) are masked from ?package:gstat?:

    idw

At some stage package spatstat decided to provide inverse distance
weighting and and also call the function to do this idw, but using other
syntax and assumptions about the arguments provided than gstat does.

There's no way for gstat to catch this as it is now, as gstat::idw is
not called at all. A solution would be to not load spatstat, or load
spatstat after gstat (in which case the conflict will point to
spatstat:idw being masked by gstat).

The spatstat package authors could solve this conflict if idw in
spatstat was also defined as an S4 method, as gstat does, rather than as
a function.

Now it comes up, I'm curious why, as spatstat suggests, one would want
to interpolate point pattern marks. As there are no marks where there
are no points, how should the interpolated values be understood? Or is
this intended to be done outside the observation window?
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From edzer.pebesma at uni-muenster.de  Thu Sep 13 13:25:39 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 13 Sep 2012 13:25:39 +0200
Subject: [R-sig-Geo] Changing coords in SpatialPolgyon
In-Reply-To: <5051251B.60003@berkeley.edu>
References: <504FD624.2040108@berkeley.edu>
	<CAHT1vpgAnPFJgg1wgSK2gguobVt6Am6vq9M0eN0v9-fo2Y5Exw@mail.gmail.com>
	<5051251B.60003@berkeley.edu>
Message-ID: <5051C2B3.5020909@uni-muenster.de>

Thanks, Nick.

what works, and probably does what you want, is this:

slot(all_emerged_islands_at_this_height_break at polygons[[1]]@Polygons[[1]],
 "coords", check=FALSE) = slot(tmppoly_shrunken, "coords")

I replaced here

all_emerged_islands_at_this_height_break[j]

with

all_emerged_islands_at_this_height_break

selection-assignment replaces whole objects, not just its first element.
As you address @polygons[[1]] you do make sure the replacement concerns
the first element only.

Your (somewhat understandable) assumption was that SpatialPolygons
objects have a [<- method, but they don't (none of the Spatial* objects do).

The error message "object of type 'S4' is not subsettable" is not very
enlightening. I'll think of adding a [<- method that only gives an error
message that is more helpful.

Best regards,
--
Edzer

On 09/13/2012 02:13 AM, Nick Matzke wrote:
> Hi all,
> 
> Thanks very much for the comments.  Here is a "reproduce the problem
> from scratch" which will hopefully be helpful.
> 
> (Sorry this took a bit, I had to figure out some dput hacks to even get
> the S4 objects to store/retrieve with dput/dget.)
> 
> Any help VERY welcome...
> 
> 
> 
> 
> #######################################################
> # Re-creation of problem:
> # start by retrieving the polygon objects I was using
> #######################################################
> library(sp)
> library(maptools)    # for e.g. elide
> sessionInfo()
> # R version 2.14.1 (2011-12-22)
> # Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> #
> # locale:
> # [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> #
> # attached base packages:
> # [1] stats     grDevices utils     datasets  graphics methods   base
> #
> # other attached packages:
> # [1] maptools_0.8-12 lattice_0.20-0  foreign_0.8-48 sp_0.9-93
> #
> # loaded via a namespace (and not attached):
> # [1] grid_2.14.1
> 
> 
> all_emerged_islands_at_this_height_break = new("SpatialPolygons"
>     , polygons = list(
> new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(89.7176352165596, 25.2725528991387)
>     , area = 0.102289000000002
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(89.595, 89.655, 89.699, 89.759, 89.819,
> 89.864, 89.864,
> 89.894, 89.924, 89.909, 89.894, 89.879, 89.864, 89.774, 89.684,
> 89.655, 89.565, 89.49, 89.505, 89.535, 89.595, 25.38, 25.407,
> 25.435, 25.448, 25.421, 25.366, 25.325, 25.366, 25.366, 25.298,
> 25.257, 25.161, 25.092, 25.106, 25.12, 25.175, 25.188, 25.202,
> 25.312, 25.38, 25.38), .Dim = c(21L, 2L), .Dimnames = list(NULL,
>     c("x", "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(89.7176352165596, 25.2725528991387)
>     , ID = "86"
>     , area = 0.102289000000002
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(91.4445748369887, 25.5542392708951)
>     , area = 0.253050000000001
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(91.273, 91.348, 91.408, 91.498, 91.528,
> 91.573, 91.633,
> 91.723, 91.768, 91.768, 91.768, 91.708, 91.648, 91.558, 91.468,
> 91.378, 91.318, 91.228, 91.123, 91.108, 91.123, 91.198, 91.258,
> 91.273, 25.804, 25.817, 25.844, 25.831, 25.763, 25.694, 25.681,
> 25.681, 25.626, 25.544, 25.448, 25.38, 25.312, 25.298, 25.298,
> 25.325, 25.38, 25.421, 25.435, 25.558, 25.64, 25.708, 25.776,
> 25.804), .Dim = c(24L, 2L), .Dimnames = list(NULL, c("x", "y"
> )))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(91.4445748369887, 25.5542392708951)
>     , ID = "89"
>     , area = 0.253050000000001
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(92.0053498822521, 25.1236440055376)
>     , area = 1.07977850000001
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(91.618, 91.633, 91.723, 91.813, 91.918,
> 92.008, 92.112,
> 92.202, 92.262, 92.322, 92.382, 92.367, 92.352, 92.367, 92.382,
> 92.397, 92.397, 92.337, 92.322, 92.337, 92.367, 92.367, 92.337,
> 92.337, 92.277, 92.232, 92.142, 92.038, 91.918, 91.813, 91.738,
> 91.648, 91.588, 91.528, 91.483, 91.483, 91.513, 91.543, 91.618,
> 25.503, 25.599, 25.667, 25.681, 25.708, 25.749, 25.831, 25.94,
> 26.049, 26.062, 26.008, 25.94, 25.858, 25.776, 25.667, 25.476,
> 25.257, 25.037, 24.818, 24.694, 24.584, 24.515, 24.487, 24.418,
> 24.349, 24.335, 24.28, 24.322, 24.377, 24.446, 24.57, 24.735,
> 24.9, 25.079, 25.202, 25.284, 25.353, 25.448, 25.503), .Dim = c(39L,
> 2L), .Dimnames = list(NULL, c("x", "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(92.0053498822521, 25.1236440055376)
>     , ID = "90"
>     , area = 1.07977850000001
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(92.7514440592915, 24.8855703894446)
>     , area = 0.227182499999996
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(92.922, 92.937, 92.907, 92.802, 92.757,
> 92.667, 92.592,
> 92.592, 92.577, 92.577, 92.607, 92.652, 92.712, 92.712, 92.712,
> 92.787, 92.817, 92.877, 92.892, 92.892, 92.877, 92.877, 92.862,
> 92.817, 92.847, 92.877, 92.922, 24.694, 24.652, 24.584, 24.515,
> 24.501, 24.418, 24.404, 24.542, 24.611, 24.735, 24.873, 25.024,
> 25.188, 25.312, 25.394, 25.407, 25.435, 25.435, 25.325, 25.229,
> 25.065, 24.941, 24.914, 24.845, 24.79, 24.749, 24.694), .Dim = c(27L,
> 2L), .Dimnames = list(NULL, c("x", "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(92.7514440592915, 24.8855703894446)
>     , ID = "91"
>     , area = 0.227182499999996
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(92.9357709620477, 24.4263626802001)
>     , area = 0.203939999999999
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(92.772, 92.802, 92.892, 92.967, 92.997,
> 93.102, 93.162,
> 93.237, 93.267, 93.222, 93.177, 93.102, 93.027, 92.952, 92.877,
> 92.772, 92.682, 92.622, 92.607, 92.652, 92.697, 92.772, 24.584,
> 24.625, 24.639, 24.68, 24.625, 24.597, 24.529, 24.487, 24.432,
> 24.363, 24.294, 24.266, 24.17, 24.17, 24.225, 24.28, 24.363,
> 24.391, 24.46, 24.57, 24.57, 24.584), .Dim = c(22L, 2L), .Dimnames = list(
>     NULL, c("x", "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(92.9357709620477, 24.4263626802001)
>     , ID = "92"
>     , area = 0.203939999999999
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(93.3346580365155, 24.13562118743)
>     , area = 0.209865
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(93.072, 93.117, 93.162, 93.267, 93.311,
> 93.356, 93.386,
> 93.446, 93.506, 93.566, 93.626, 93.641, 93.641, 93.641, 93.641,
> 93.611, 93.581, 93.491, 93.431, 93.341, 93.296, 93.222, 93.177,
> 93.147, 93.087, 93.042, 93.027, 93.072, 24.322, 24.377, 24.404,
> 24.404, 24.391, 24.335, 24.28, 24.253, 24.239, 24.184, 24.17,
> 24.142, 24.114, 24.073, 24.018, 23.962, 23.893, 23.865, 23.907,
> 23.921, 23.948, 23.962, 24.004, 24.059, 24.087, 24.128, 24.239,
> 24.322), .Dim = c(28L, 2L), .Dimnames = list(NULL, c("x", "y"
> )))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(93.3346580365155, 24.13562118743)
>     , ID = "93"
>     , area = 0.209865
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(93.720755372218, 23.8856480770871)
>     , area = 0.11727
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(93.551, 93.581, 93.671, 93.776, 93.866,
> 93.941, 93.971,
> 93.941, 93.896, 93.866, 93.836, 93.821, 93.806, 93.791, 93.731,
> 93.656, 93.626, 93.551, 93.491, 93.506, 93.551, 23.935, 24.018,
> 24.059, 24.059, 24.045, 24.031, 24.018, 23.99, 23.907, 23.851,
> 23.768, 23.699, 23.671, 23.685, 23.685, 23.671, 23.727, 23.81,
> 23.838, 23.921, 23.935), .Dim = c(21L, 2L), .Dimnames = list(
>     NULL, c("x", "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(93.720755372218, 23.8856480770871)
>     , ID = "94"
>     , area = 0.11727
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(93.9485141144793, 23.827383855931)
>     , area = 0.0863474999999999
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(93.806, 93.851, 93.911, 93.941, 93.986,
> 94.031, 94.061,
> 94.091, 94.121, 94.151, 94.106, 94.076, 93.986, 93.896, 93.851,
> 93.791, 93.761, 93.761, 93.806, 23.824, 23.907, 23.935, 24.018,
> 24.018, 23.99, 24.018, 23.948, 23.907, 23.851, 23.796, 23.768,
> 23.713, 23.671, 23.63, 23.657, 23.727, 23.782, 23.824), .Dim = c(19L,
> 2L), .Dimnames = list(NULL, c("x", "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(93.9485141144793, 23.827383855931)
>     , ID = "96"
>     , area = 0.0863474999999999
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(94.2478423555231, 23.9836118751524)
>     , area = 0.102525
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(94.061, 94.046, 94.046, 94.091, 94.121,
> 94.166, 94.226,
> 94.286, 94.331, 94.391, 94.421, 94.451, 94.451, 94.421, 94.331,
> 94.256, 94.196, 94.136, 94.061, 94.031, 94.061, 23.879, 23.948,
> 23.99, 24.031, 24.087, 24.128, 24.184, 24.17, 24.128, 24.073,
> 24.059, 23.976, 23.907, 23.865, 23.851, 23.851, 23.838, 23.81,
> 23.879, 23.921, 23.879), .Dim = c(21L, 2L), .Dimnames = list(
>     NULL, c("x", "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(94.2478423555231, 23.9836118751524)
>     , ID = "97"
>     , area = 0.102525
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(95.4490116409178, 23.7243413032006)
>     , area = 0.223278500000003
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(95.2, 95.23, 95.26, 95.305, 95.35, 95.395,
> 95.44,
> 95.485, 95.575, 95.635, 95.635, 95.635, 95.665, 95.709, 95.305,
> 95.245, 95.185, 95.17, 95.724, 95.739, 95.68, 95.605, 95.485,
> 95.35, 95.2, 23.671, 23.754, 23.81, 23.893, 23.935, 24.031, 24.073,
> 24.031, 23.976, 23.948, 23.865, 23.796, 23.81, 23.685, 23.519,
> 23.532, 23.588, 23.657, 23.63, 23.574, 23.546, 23.519, 23.505,
> 23.519, 23.671), .Dim = c(25L, 2L), .Dimnames = list(NULL, c("x",
> "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(95.4490116409178, 23.7243413032006)
>     , ID = "100"
>     , area = 0.223278500000003
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(95.5720136547939, 23.476735339631)
>     , area = 0.185465999999999
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(95.784, 95.829, 95.844, 95.814, 95.799,
> 95.724, 95.68,
> 95.59, 95.47, 95.38, 95.29, 95.275, 95.275, 95.32, 95.395, 95.485,
> 95.56, 95.635, 95.709, 95.739, 95.769, 95.784, 23.56, 23.463,
> 23.421, 23.338, 23.282, 23.254, 23.24, 23.282, 23.338, 23.338,
> 23.38, 23.463, 23.532, 23.602, 23.63, 23.657, 23.685, 23.699,
> 23.713, 23.657, 23.616, 23.56), .Dim = c(22L, 2L), .Dimnames = list(
>     NULL, c("x", "y")))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(95.5720136547939, 23.476735339631)
>     , ID = "101"
>     , area = 0.185465999999999
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(97.7712398308958, 23.1559739868982)
>     , area = 0.0656399999999989
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(97.748, 97.823, 97.883, 97.928, 97.958,
> 97.958, 97.928,
> 97.898, 97.838, 97.823, 97.763, 97.673, 97.628, 97.583, 97.643,
> 97.748, 23.282, 23.254, 23.254, 23.24, 23.199, 23.157, 23.143,
> 23.087, 23.059, 23.031, 23.018, 23.059, 23.087, 23.157, 23.24,
> 23.282), .Dim = c(16L, 2L), .Dimnames = list(NULL, c("x", "y"
> )))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(97.7712398308958, 23.1559739868982)
>     , ID = "106"
>     , area = 0.0656399999999989
> ),new("Polygons"
>     , Polygons = list(
> new("Polygon"
>     , labpt = c(98.1040520957036, 23.1987578502582)
>     , area = 0.0543135000000015
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(97.928, 97.913, 97.958, 98.018, 98.107,
> 98.152, 98.197,
> 98.227, 98.242, 98.242, 98.242, 98.182, 98.122, 98.063, 97.988,
> 97.928, 23.171, 23.226, 23.24, 23.254, 23.296, 23.338, 23.324,
> 23.282, 23.254, 23.171, 23.129, 23.087, 23.101, 23.101, 23.115,
> 23.171), .Dim = c(16L, 2L), .Dimnames = list(NULL, c("x", "y"
> )))
> )
> )
>     , plotOrder = 1L
>     , labpt = c(98.1040520957036, 23.1987578502582)
>     , ID = "107"
>     , area = 0.0543135000000015
> )
> )
>     , plotOrder = c(3L, 2L, 4L, 10L, 6L, 5L, 11L, 7L, 9L, 1L, 8L, 12L, 13L)
>     , bbox = structure(c(89.49, 23.018, 98.242, 26.062), .Dim = c(2L,
> 2L), .Dimnames = list(
>     c("x", "y"), c("min", "max")))
>     , proj4string = new("CRS"
>     , projargs = " +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0"
> )
> )
> 
> 
> 
> tmppoly_shrunken = new("Polygon"
>     , labpt = c(89.7176352165596, 25.2725528991387)
>     , area = 10.2274188632081
>     , hole = FALSE
>     , ringDir = 1L
>     , coords = structure(c(88.4912830509635, 89.0912830509635,
> 89.5312830509635,
> 90.1312830509635, 90.7312830509635, 91.1812830509635, 91.1812830509635,
> 91.4812830509635, 91.7812830509635, 91.6312830509635, 91.4812830509635,
> 91.3312830509635, 91.1812830509635, 90.2812830509635, 89.3812830509634,
> 89.0912830509635, 88.1912830509634, 87.4412830509634, 87.5912830509634,
> 87.8912830509634, 88.4912830509635, 26.3470239077515, 26.6170239077515,
> 26.8970239077515, 27.0270239077515, 26.7570239077515, 26.2070239077515,
> 25.7970239077515, 26.2070239077515, 26.2070239077515, 25.5270239077515,
> 25.1170239077515, 24.1570239077515, 23.4670239077515, 23.6070239077515,
> 23.7470239077515, 24.2970239077515, 24.4270239077515, 24.5670239077515,
> 25.6670239077515, 26.3470239077515, 26.3470239077515), .Dim = c(21L,
> 2L), .Dimnames = list(NULL, c("x", "y")))
> )
> 
> 
> 
> 
> #######################################################
> # ATTEMPT TO REPLACE COORDINATES;
> # FAILS WITH:
> # Error in
> slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]],
>  :
> #  object of type 'S4' is not subsettable
> #######################################################
> 
> j = 1
> volcano_ID = 86
> 
> slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]],
> 
> "coords", check=FALSE) = slot(tmppoly_shrunken, "coords")
> 
> # Error in
> slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]],
>  :
> #   object of type 'S4' is not subsettable
> 
> #######################################################
> # ATTEMPT TO REPLACE WHOLE POLYGONS OBJECT;
> # FAILS WITH:
> # Error in
> slot(all_emerged_islands_at_this_height_break[j]@polygons[[1]]@Polygons[[1]],
>  :
> #  object of type 'S4' is not subsettable
> #######################################################
> 
> all_emerged_islands_at_this_height_break[j]@polygons =
> list(Polygons(list(tmppoly_shrunken), ID=volcano_ID))
> 
> # Error in all_emerged_islands_at_this_height_break[j]@polygons =
> list(Polygons(list(tmppoly_shrunken),  :
> #   object of type 'S4' is not subsettable
> #
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From melita at cirus.dhz.hr  Thu Sep 13 14:48:52 2012
From: melita at cirus.dhz.hr (melita)
Date: Thu, 13 Sep 2012 05:48:52 -0700 (PDT)
Subject: [R-sig-Geo] problem with example inverse distance weighted
 (IDW) interpolation
In-Reply-To: <5051BD53.7020800@uni-muenster.de>
References: <1347389311417-7580941.post@n2.nabble.com>
	<1347532983565-7580951.post@n2.nabble.com>
	<5051BD53.7020800@uni-muenster.de>
Message-ID: <6.2.1.2.2.20120913141004.0447ae90@cirus.dhz.hr>



Thanks, Edzer. 
I had a feeling this is the case, that idw is called from spatstat
instead from gstat in my session. 
So what I did is detach and call the gstat again, so it can overrides
spatstat idw function. 
detach(package:gstat) 
library(gstat) 
PS: I appreciate the live streaming of the lectures from GEOSTAT 2012 in
Muenster last week. 
Sincerely, 
Melita. 
At 13:03 13.9.2012, you wrote: 
On 09/13/2012 12:43 PM, melita
wrote: &gt; # Error: is.ppp(X) &amp;&amp; is.marked(X) is not TRUE
Melita, thanks for bringing this up. If you first load package gstat, and
then load package spatstat, you'll see the following warning: Attaching
package: ???spatstat??? The following object(s) are masked from
???package:gstat???:&nbsp;&nbsp;&nbsp;&nbsp; idw At some stage package
spatstat decided to provide inverse distance weighting and and also call
the function to do this idw, but using other syntax and assumptions about
the arguments provided than gstat does. There's no way for gstat to catch
this as it is now, as gstat::idw is not called at all. A solution would
be to not load spatstat, or load spatstat after gstat (in which case the
conflict will point to spatstat:idw being masked by gstat). The spatstat
package authors could solve this conflict if idw in spatstat was also
defined as an S4 method, as gstat does, rather than as a function. Now it
comes up, I'm curious why, as spatstat suggests, one would want to
interpolate point pattern marks. As there are no marks where there are no
points, how should the interpolated values be understood? Or is this
intended to be done outside the observation window? -- Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M??nster Weseler
Stra??e 253, 48151 M??nster, Germany. Phone: +49 251 8333081, Fax: +49
251 8339763&nbsp;

http://ifgi.uni-muenster.dehttp://www.52north.org/geostatistics
&nbsp;&nbsp;&nbsp;&nbsp; [hidden
email]  _______________________________________________ R-sig-Geo
mailing list [hidden email] 

https://stat.ethz.ch/mailman/listinfo/r-sig-geo  

If you reply to this email, your message will be added to the discussion
below: 

http://r-sig-geo.2731867.n2.nabble.com/problem-with-example-inverse-distance-weighted-IDW-interpolation-tp7580941p7580952.html 
 
To unsubscribe from problem with example inverse distance weighted (IDW)
interpolation,

click here .

NAML  






--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/problem-with-example-inverse-distance-weighted-IDW-interpolation-tp7580941p7580954.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From marcelino.delacruz at upm.es  Thu Sep 13 15:12:33 2012
From: marcelino.delacruz at upm.es (Marcelino de la Cruz)
Date: Thu, 13 Sep 2012 15:12:33 +0200
Subject: [R-sig-Geo] problem with example inverse distance weighted
 (IDW) interpolation
In-Reply-To: <5051BD53.7020800@uni-muenster.de>
References: <1347389311417-7580941.post@n2.nabble.com>
	<1347532983565-7580951.post@n2.nabble.com>
	<5051BD53.7020800@uni-muenster.de>
Message-ID: <201209131312.q8DDCdXG032496@smtp.upm.es>

At 13:02 13/09/2012, Edzer Pebesma wrote:



[...]

Now it comes up, I'm curious why, as spatstat suggests, one would want
>to interpolate point pattern marks. As there are no marks where there
>are no points, how should the interpolated values be understood? Or is
>this intended to be done outside the observation window?

If you deal with multivariate point patterns 
maybe you could find useful considering the 
effects of the marks of one type of points over points of the other types...

Cheers,

Marcelino



>--
>Edzer Pebesma
>Institute for Geoinformatics (ifgi), University of M?nster
>Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>http://www.52north.org/geostatistics      e.pebesma at wwu.de
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo

___________________________________________________

Marcelino de la Cruz Rot
Departamento de Biolog?a y Geolog?a
Escuela Superior de Ciencias Experimentales y Tecnolog?a
Universidad Rey Juan Carlos
c/ Tulip?n, s/n.
E-28933 M?stoles (Madrid)
Espa?a
Fax: +34 91 664 7490


From nerak.t at hotmail.com  Thu Sep 13 15:23:50 2012
From: nerak.t at hotmail.com (Nerak)
Date: Thu, 13 Sep 2012 06:23:50 -0700 (PDT)
Subject: [R-sig-Geo] performing IDW interpolations
Message-ID: <1347542630585-7580956.post@n2.nabble.com>

Hi! 
I'm still struggling with the IDW interpolation, because I want to try it on
my own example. I'm trying to work following the example from the book
'Applied spatial data analyses with R'. 

library(gstat) 
data(meuse) 
coordinates(meuse) <- c("x", "y") 
data(meuse.grid) 
coordinates(meuse.grid) <- c("x", "y") 
gridded(meuse.grid) <- TRUE 
idw.out <- idw(zinc ~ 1, meuse, meuse.grid, idp = 2.5) 
spplot(idw.out, "var1.pred")

(Little description of my goals: I have data from 14 raingauges and want to
interpolate the precipitation data between these points. Then I want to
collect the rastervalues of these for my sampling points (Have coordinates
for the points for which I want to know the precipitation). I did it in
qgis, but want to learn how to do it in R because it's daily rainfall data
and I need to do this for some years so would like to automize the process)
So I have the coordinates for my 14 point for which I have the data I want
to interpolate. This would be the locations including the data. My problem
is that I don't have grid data available in R. (I have some rasterdata from
the area, 3 band but don't know yet how to import this. Struggled for a
while to figure out how things as gdal are working but didn't succeed yet to
install and understand). Is there an easy way to produce this grid? I did
this interpolation in Quantum gis, wherefore only the coordinates and
raindata was enough to create the raster from which I could sample the point
values. I have the result from the interpolation in GIS as asc format so I
know the coordinates of the corners of that rectangular plane (Xmin = 
31.79410 Xmax=31.98010 Ymin=-21.24310 Ymax=-20.96710 reference
system=+proj=utm +zone=35 +south +datum=WGS84 +units=m +no_defs). But a grid
with these 4 points (vb spatialpixelsdataframe) is not enough I suppose? Is
there an easy way to make a grid that could be used?

(I tried to use thins like this to create a grid using the 4 coordinates:
zim.grid <- as(coor.zim, "SpatialPixelsDataFrame")
Error in validityMethod(object) : 
  data.frame is empty (possibly after stripping coordinate columns): use
SpatialPoints() to create points-only object        )


Many thank in advance for your help. I have experience in basic programming
in R and suppose this should be kind of basic spatial analysis, but I
experience it's really hard to learn it from a book (eventhough 'Applied
spatial data analyses with R' is a great book).
Kind regards,
Nerak


(I have a question concerning the habits and rules of this forum. Is it OK
to make a new topic for a new question, however it's related to a previous
question I asked some days ago? Now I created a new topic but when it's more
appreciated of I do it in the same topic, I'll do that next time)




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/performing-IDW-interpolations-tp7580956.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From rob.robinson at bto.org  Thu Sep 13 16:04:13 2012
From: rob.robinson at bto.org (Rob Robinson)
Date: Thu, 13 Sep 2012 15:04:13 +0100
Subject: [R-sig-Geo] background colour when add=T
Message-ID: <CAGcXcEZGy-41__eZ2g6aihdOfwc3f6PRMnQ_BUBzzrJqSAbVjg@mail.gmail.com>

Dear All,
 I am trying to plot some abundance density maps for different species
of birds which may be either marine or terrestrial. Having created the
density kernel (using kde from package ks), I plot() a background map
(actually a SpatialPolygonsDataFrame) and I can colour the land and
sea differently using col= and bg= options respectively, I can then
overlay my kernel using filled.contour. What I would now like to do is
mask the inappropriate part of the map. For marine birds this is easy,
simply replot the map using add=T and col= to 'blank' out the part of
the kernel over land. I thought the same would be true for landbirds,
simply use bg= to mask out the sea. Unfortunately when you have add=T
plot (not unreasonably, I suppose) doesn't seem to honour the bg=
argument, it just (I presume) sets it to 'transparent'. Does anyone
know if there is a way to subvert this? A posting from a couple of
years ago suggests probably not, but I wondered if anything had
changed in the interim?
many thanks in advance for any insights...
cheers
rob

**************  Find out about Britain's birds - www.bto.org/birdfacts
 **************

Dr Rob Robinson, Principal Ecologist
British Trust for Ornithology, The Nunnery, Thetford, Norfolk, IP24 2PU
Ph: +44 (0)1842 750050     E: rob.robinson at bto.org
Fx: +44 (0)1842 750030     W: www.bto.org/about-bto/our-staff/rob-robinson

====== "How can anyone be enlightened, when truth is so poorly lit" =======


From 538280 at gmail.com  Thu Sep 13 19:29:36 2012
From: 538280 at gmail.com (Greg Snow)
Date: Thu, 13 Sep 2012 11:29:36 -0600
Subject: [R-sig-Geo] background colour when add=T
In-Reply-To: <CAGcXcEZGy-41__eZ2g6aihdOfwc3f6PRMnQ_BUBzzrJqSAbVjg@mail.gmail.com>
References: <CAGcXcEZGy-41__eZ2g6aihdOfwc3f6PRMnQ_BUBzzrJqSAbVjg@mail.gmail.com>
Message-ID: <CAFEqCdwNo8yD+hactDEhpfWC-p5KzHrrQcpTR5uh17_q7q03Zw@mail.gmail.com>

One possibility would be to define a spatial polygon that represents
the entire plotting area, then use the gDifference function from the
rgeos package to create a map that excludes the land areas (or
whatever you don't want to cover) and add the resulting polygon(s).

On Thu, Sep 13, 2012 at 8:04 AM, Rob Robinson <rob.robinson at bto.org> wrote:
> Dear All,
>  I am trying to plot some abundance density maps for different species
> of birds which may be either marine or terrestrial. Having created the
> density kernel (using kde from package ks), I plot() a background map
> (actually a SpatialPolygonsDataFrame) and I can colour the land and
> sea differently using col= and bg= options respectively, I can then
> overlay my kernel using filled.contour. What I would now like to do is
> mask the inappropriate part of the map. For marine birds this is easy,
> simply replot the map using add=T and col= to 'blank' out the part of
> the kernel over land. I thought the same would be true for landbirds,
> simply use bg= to mask out the sea. Unfortunately when you have add=T
> plot (not unreasonably, I suppose) doesn't seem to honour the bg=
> argument, it just (I presume) sets it to 'transparent'. Does anyone
> know if there is a way to subvert this? A posting from a couple of
> years ago suggests probably not, but I wondered if anything had
> changed in the interim?
> many thanks in advance for any insights...
> cheers
> rob
>
> **************  Find out about Britain's birds - www.bto.org/birdfacts
>  **************
>
> Dr Rob Robinson, Principal Ecologist
> British Trust for Ornithology, The Nunnery, Thetford, Norfolk, IP24 2PU
> Ph: +44 (0)1842 750050     E: rob.robinson at bto.org
> Fx: +44 (0)1842 750030     W: www.bto.org/about-bto/our-staff/rob-robinson
>
> ====== "How can anyone be enlightened, when truth is so poorly lit" =======
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From landis at isciences.com  Thu Sep 13 19:58:32 2012
From: landis at isciences.com (Matthew Landis)
Date: Thu, 13 Sep 2012 13:58:32 -0400
Subject: [R-sig-Geo] background colour when add=T
In-Reply-To: <CAFEqCdwNo8yD+hactDEhpfWC-p5KzHrrQcpTR5uh17_q7q03Zw@mail.gmail.com>
References: <CAGcXcEZGy-41__eZ2g6aihdOfwc3f6PRMnQ_BUBzzrJqSAbVjg@mail.gmail.com>
	<CAFEqCdwNo8yD+hactDEhpfWC-p5KzHrrQcpTR5uh17_q7q03Zw@mail.gmail.com>
Message-ID: <50521EC8.40308@isciences.com>

Rob -
Without seeing your code, I'm not exactly sure what you are trying to 
do.  But, I routinely control the appearance of land vs. sea with a 
setup something like this:

bg.spdf    # a spatialPolygonsDataFrame with 1 polygon for ocean and 1 
for land
bg.fill  <- c('transparent', 'gray')   # If the wrong one is filled, 
switch order
data.sgdf   # A spatialGridDataFrame of the data I want to plot

spplot(data.sgdf, panel = function(x, y, ...){
         sp.polygons(bg.spdf, fill = bg.fill)
         })

Hope that helps.

M

On 9/13/2012 1:29 PM, Greg Snow wrote:
> One possibility would be to define a spatial polygon that represents
> the entire plotting area, then use the gDifference function from the
> rgeos package to create a map that excludes the land areas (or
> whatever you don't want to cover) and add the resulting polygon(s).
>
> On Thu, Sep 13, 2012 at 8:04 AM, Rob Robinson <rob.robinson at bto.org> wrote:
>> Dear All,
>>   I am trying to plot some abundance density maps for different species
>> of birds which may be either marine or terrestrial. Having created the
>> density kernel (using kde from package ks), I plot() a background map
>> (actually a SpatialPolygonsDataFrame) and I can colour the land and
>> sea differently using col= and bg= options respectively, I can then
>> overlay my kernel using filled.contour. What I would now like to do is
>> mask the inappropriate part of the map. For marine birds this is easy,
>> simply replot the map using add=T and col= to 'blank' out the part of
>> the kernel over land. I thought the same would be true for landbirds,
>> simply use bg= to mask out the sea. Unfortunately when you have add=T
>> plot (not unreasonably, I suppose) doesn't seem to honour the bg=
>> argument, it just (I presume) sets it to 'transparent'. Does anyone
>> know if there is a way to subvert this? A posting from a couple of
>> years ago suggests probably not, but I wondered if anything had
>> changed in the interim?
>> many thanks in advance for any insights...
>> cheers
>> rob
>>
>> **************  Find out about Britain's birds - www.bto.org/birdfacts
>>   **************
>>
>> Dr Rob Robinson, Principal Ecologist
>> British Trust for Ornithology, The Nunnery, Thetford, Norfolk, IP24 2PU
>> Ph: +44 (0)1842 750050     E: rob.robinson at bto.org
>> Fx: +44 (0)1842 750030     W: www.bto.org/about-bto/our-staff/rob-robinson
>>
>> ====== "How can anyone be enlightened, when truth is so poorly lit" =======
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~
Matthew Landis, Ph.D.
Research Scientist
ISciences, LLC
61 Main St. Suite 200
Burlington VT 05401
802.864.2999
www.isciences.com
~~~~~~~~~~~~~~~~~~~~~~~~~~


From matzke at berkeley.edu  Fri Sep 14 00:52:00 2012
From: matzke at berkeley.edu (Nick Matzke)
Date: Thu, 13 Sep 2012 15:52:00 -0700
Subject: [R-sig-Geo] Changing coords in SpatialPolgyon
In-Reply-To: <5051C2B3.5020909@uni-muenster.de>
References: <504FD624.2040108@berkeley.edu>
	<CAHT1vpgAnPFJgg1wgSK2gguobVt6Am6vq9M0eN0v9-fo2Y5Exw@mail.gmail.com>
	<5051251B.60003@berkeley.edu> <5051C2B3.5020909@uni-muenster.de>
Message-ID: <50526390.9020405@berkeley.edu>

That fixed it!  Thanks VERY much!!

Thanks again,
Nick

On 9/13/12 4:25 AM, Edzer Pebesma wrote:
> Thanks, Nick.
>
> what works, and probably does what you want, is this:
>
> slot(all_emerged_islands_at_this_height_break at polygons[[1]]@Polygons[[1]],
>   "coords", check=FALSE) = slot(tmppoly_shrunken, "coords")
>
> I replaced here
>
> all_emerged_islands_at_this_height_break[j]
>
> with
>
> all_emerged_islands_at_this_height_break
>
> selection-assignment replaces whole objects, not just its first element.
> As you address @polygons[[1]] you do make sure the replacement concerns
> the first element only.
>
> Your (somewhat understandable) assumption was that SpatialPolygons
> objects have a [<- method, but they don't (none of the Spatial* objects do).
>
> The error message "object of type 'S4' is not subsettable" is not very
> enlightening. I'll think of adding a [<- method that only gives an error
> message that is more helpful.
>
> Best regards,
> --

-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
1005 Valley Life Sciences Building #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From rob.robinson at bto.org  Fri Sep 14 13:08:59 2012
From: rob.robinson at bto.org (Rob Robinson)
Date: Fri, 14 Sep 2012 12:08:59 +0100
Subject: [R-sig-Geo] background colour when add=T
In-Reply-To: <50521EC8.40308@isciences.com>
References: <CAGcXcEZGy-41__eZ2g6aihdOfwc3f6PRMnQ_BUBzzrJqSAbVjg@mail.gmail.com>
	<CAFEqCdwNo8yD+hactDEhpfWC-p5KzHrrQcpTR5uh17_q7q03Zw@mail.gmail.com>
	<50521EC8.40308@isciences.com>
Message-ID: <CAGcXcEbmukMW-7Ur2qsKgr8paeVfzkN1tAqnK3cV+TFFG=a3JQ@mail.gmail.com>

Thanks Greg & Matthew. I have multiple polygons (a world map from the
wonderful naturalearthdata.com), so gDifference does exactly what I
needed. If the developers of rgeos are listening - thanks to them for
a seriously awesome package!
best wishes
rob

**************  Find out about Britain's birds - www.bto.org/birdfacts
 **************

Dr Rob Robinson, Principal Ecologist
British Trust for Ornithology, The Nunnery, Thetford, Norfolk, IP24 2PU
Ph: +44 (0)1842 750050     E: rob.robinson at bto.org
Fx: +44 (0)1842 750030     W: www.bto.org/about-bto/our-staff/rob-robinson

====== "How can anyone be enlightened, when truth is so poorly lit" =======



On 13 September 2012 18:58, Matthew Landis <landis at isciences.com> wrote:
> Rob -
> Without seeing your code, I'm not exactly sure what you are trying to do.
> But, I routinely control the appearance of land vs. sea with a setup
> something like this:
>
> bg.spdf    # a spatialPolygonsDataFrame with 1 polygon for ocean and 1 for
> land
> bg.fill  <- c('transparent', 'gray')   # If the wrong one is filled, switch
> order
> data.sgdf   # A spatialGridDataFrame of the data I want to plot
>
> spplot(data.sgdf, panel = function(x, y, ...){
>         sp.polygons(bg.spdf, fill = bg.fill)
>         })
>
> Hope that helps.
>
> M
>
>
> On 9/13/2012 1:29 PM, Greg Snow wrote:
>>
>> One possibility would be to define a spatial polygon that represents
>> the entire plotting area, then use the gDifference function from the
>> rgeos package to create a map that excludes the land areas (or
>> whatever you don't want to cover) and add the resulting polygon(s).
>>
>> On Thu, Sep 13, 2012 at 8:04 AM, Rob Robinson <rob.robinson at bto.org>
>> wrote:
>>>
>>> Dear All,
>>>   I am trying to plot some abundance density maps for different species
>>> of birds which may be either marine or terrestrial. Having created the
>>> density kernel (using kde from package ks), I plot() a background map
>>> (actually a SpatialPolygonsDataFrame) and I can colour the land and
>>> sea differently using col= and bg= options respectively, I can then
>>> overlay my kernel using filled.contour. What I would now like to do is
>>> mask the inappropriate part of the map. For marine birds this is easy,
>>> simply replot the map using add=T and col= to 'blank' out the part of
>>> the kernel over land. I thought the same would be true for landbirds,
>>> simply use bg= to mask out the sea. Unfortunately when you have add=T
>>> plot (not unreasonably, I suppose) doesn't seem to honour the bg=
>>> argument, it just (I presume) sets it to 'transparent'. Does anyone
>>> know if there is a way to subvert this? A posting from a couple of
>>> years ago suggests probably not, but I wondered if anything had
>>> changed in the interim?
>>> many thanks in advance for any insights...
>>> cheers
>>> rob
>>>
>>> **************  Find out about Britain's birds - www.bto.org/birdfacts
>>>   **************
>>>
>>> Dr Rob Robinson, Principal Ecologist
>>> British Trust for Ornithology, The Nunnery, Thetford, Norfolk, IP24 2PU
>>> Ph: +44 (0)1842 750050     E: rob.robinson at bto.org
>>> Fx: +44 (0)1842 750030     W:
>>> www.bto.org/about-bto/our-staff/rob-robinson
>>>
>>> ====== "How can anyone be enlightened, when truth is so poorly lit"
>>> =======
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>
> --
> ~~~~~~~~~~~~~~~~~~~~~~~~~~
> Matthew Landis, Ph.D.
> Research Scientist
> ISciences, LLC
> 61 Main St. Suite 200
> Burlington VT 05401
> 802.864.2999
> www.isciences.com
> ~~~~~~~~~~~~~~~~~~~~~~~~~~
>


From nerak.t at hotmail.com  Fri Sep 14 15:49:27 2012
From: nerak.t at hotmail.com (Nerak)
Date: Fri, 14 Sep 2012 06:49:27 -0700 (PDT)
Subject: [R-sig-Geo] performing IDW interpolations
In-Reply-To: <1347542630585-7580956.post@n2.nabble.com>
References: <1347542630585-7580956.post@n2.nabble.com>
Message-ID: <1347630567733-7580962.post@n2.nabble.com>

Hi,
I'm happy to say that I think I was able to perform the IDW interpolation.
I was able (thanks to Minti) to import the file in asc format I made in qgis
to use as the grid (newdata). And it worked. Because I know that there are
more people struggeling with IDW, I post hereunder what I did, so maybe I
can help them. I'm not sure that this is a good way but it looks like it's
working fine for me. 


I still have a question. I'm looking for a function (or the package) with
which I can extract values out of my IDW output file. I have a file with
several sampling points (several coordinates) for which I want to know the
precipitation which I interpolated between my rain gauges. I was thinking
about the function extract but this one isn't working because: 
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "extract", for signature
"SpatialPixelsDataFrame", "SpatialPointsDataFrame"

I think it only works for a raster, but I don't know how to transform my IDW
output to a raster... If somebody knows how I can extract the values for my
dataframe with coordinates, preferably all at the same time.

Is there a default number that most often is used as idp number? I'm still
looking which one could be most appropriated. 

Kind regards,
Nerak



The script I used now:
###Inverse distance weighted interpolation

rm(list = ls(all = TRUE))
library(gstat)
library(rgdal)
library(raster)
library(spatstat)

data<-read.table("D:\\... filecoordinatesandprecipiation.txt",header=TRUE)
coordinates(data) <- c("x", "y")
r2 <- raster("D:\\... IDWrasterfileqgis.asc")
r2 <- as(r2, "SpatialPixelsDataFrame")
gridded(r2) <- TRUE
projection(data) <- "+proj=utm +zone=35 +datum=WGS84"
projection(r2) <- "+proj=utm +zone=35 +datum=WGS84"
idw.out <- idw(X27_5_2002 ~ 1, data, r2, idp = 2.5)
spplot(idw.out, "var1.pred")




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/performing-IDW-interpolations-tp7580956p7580962.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Tom_Roche at pobox.com  Sat Sep 15 00:33:32 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Fri, 14 Sep 2012 18:33:32 -0400
Subject: [R-sig-Geo] [OT?] time-series community?
Message-ID: <87har0xmir.fsf@pobox.com>


Dunno if this is the place to ask, but I'd appreciate pointers toward
learning about, and channels for asking questions about, analysis of
time series for evaluating model/obs fits. What I mean:

I'm a student working on process-modeling atmospheric N2O concentrations
over the contiguous US (CONUS), comparing hourly predictions to
daily observations at 4 towers. Sad, but there's just not much data.
And it gets worse! the N2O emissions inventories (EIs) driving the model
are currently annual, monthly, or daily. (Fortunately, both EIs and
datasets are improving; increased modeling may incent increased effort.)

Hence I'll want (once I get the model running, which seems imminent) to
test the time series of predictions against the time series of obs at
the tower locations. I'd like to test imposed temporalities, e.g.,

* model vs obs with imposed diurnality (so as to test hourly vs hourly)

* feeding EIs with imposed seasonality and diurnality to the model,
  comparing those predictions vs obs

Unfortunately my background is computer science, not physical science:
I know a bit about techniques like calculating standard deviation of
biases, still less about applying autocorrelation functions (e.g. acf,
pacf), and have only read wikipedia about AIC/AICc. I'm very much
interested in learning more, and would appreciate pointers toward

* resources (esp cookbooks and tutorials :-)

* places to ask when one encounters problems

that would assist me in practical application of tools (esp R-based
ones) in this domain.

Feel free to reply on- or off-list, Tom Roche <Tom_Roche at pobox.com>


From tom.gottfried at o2mail.de  Sat Sep 15 05:09:18 2012
From: tom.gottfried at o2mail.de (Tom Gottfried)
Date: Sat, 15 Sep 2012 05:09:18 +0200
Subject: [R-sig-Geo] [OT?] time-series community?
In-Reply-To: <87har0xmir.fsf@pobox.com>
References: <87har0xmir.fsf@pobox.com>
Message-ID: <5053F15E.2070801@o2mail.de>

Tom,

their is a Task View "TimeSeries" on CRAN. And textbooks exist on that 
topic using R. E.g.

Cryer, Jonathan D., und Kung-Sik Chan. Time Series Analysis: With 
Applications in R. 2nd Aufl. Springer, 2009.

Metcalfe, Andrew V., und Paul S.P. Cowpertwait. Introductory Time Series 
with R. Use R! New York, NY: Springer New York, 2009. 
http://www.springerlink.com/content/978-0-387-88697-8/#section=58375&page=1.

HTH,
Tom

Am 15.09.2012 00:33, schrieb Tom Roche:
>
> Dunno if this is the place to ask, but I'd appreciate pointers toward
> learning about, and channels for asking questions about, analysis of
> time series for evaluating model/obs fits. What I mean:
>
> I'm a student working on process-modeling atmospheric N2O concentrations
> over the contiguous US (CONUS), comparing hourly predictions to
> daily observations at 4 towers. Sad, but there's just not much data.
> And it gets worse! the N2O emissions inventories (EIs) driving the model
> are currently annual, monthly, or daily. (Fortunately, both EIs and
> datasets are improving; increased modeling may incent increased effort.)
>
> Hence I'll want (once I get the model running, which seems imminent) to
> test the time series of predictions against the time series of obs at
> the tower locations. I'd like to test imposed temporalities, e.g.,
>
> * model vs obs with imposed diurnality (so as to test hourly vs hourly)
>
> * feeding EIs with imposed seasonality and diurnality to the model,
>    comparing those predictions vs obs
>
> Unfortunately my background is computer science, not physical science:
> I know a bit about techniques like calculating standard deviation of
> biases, still less about applying autocorrelation functions (e.g. acf,
> pacf), and have only read wikipedia about AIC/AICc. I'm very much
> interested in learning more, and would appreciate pointers toward
>
> * resources (esp cookbooks and tutorials :-)
>
> * places to ask when one encounters problems
>
> that would assist me in practical application of tools (esp R-based
> ones) in this domain.
>
> Feel free to reply on- or off-list, Tom Roche<Tom_Roche at pobox.com>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Indo-German Centre for Sustainability
Indian Institute of Technology Madras
600 036 Chennai, India
www.igcs-chennai.org


From b.rowlingson at lancaster.ac.uk  Sat Sep 15 12:51:41 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 15 Sep 2012 11:51:41 +0100
Subject: [R-sig-Geo] Another line-network post to RPubs
Message-ID: <CANVKczPC99f+E7C7sPH1ynDKDr_0bC4A=JpMzG-z4ahsAPfcYg@mail.gmail.com>

I've written another RPubs doc about line networks. In this I've tried
to work out the direction of river flow on a line network using a DEM.

http://rpubs.com/geospacedman/runninguphill

Its a bit of a failure, as you will see, but its made me think more
about how to store topology related to SpatialLines objects in R... So
expect a sequel sometime...

Barry


From cmora at dal.ca  Mon Sep 17 01:38:30 2012
From: cmora at dal.ca (Camilo Mora)
Date: Sun, 16 Sep 2012 20:38:30 -0300
Subject: [R-sig-Geo] Interpolating with barrier in R
Message-ID: <20120916203830.10324t5l6zszspic@wm3.dal.ca>

Hi everyone,

I have some point data over the entire world that i want to  
interpolate to a raster with resolution of 1 degree.

I have been able to work the code for IDW and Spline in the raster  
package in R....but I wonder if there is a way to include a barrier to  
the interpolations?. In ArcGis several interpolations allow for the  
use of barriers beyond which interpolation is stopped. Is there an  
analogous feature in r?

I note that the results of IDW and Spline interpolate over land and my  
worry is that in certain places like the panama, data from the pacific  
may be used to interpolate the caribbean and viceversa.

Any advice will be greatly appreciate.

Thanks,

Camilo

Camilo Mora, Ph.D.
Department of Geography, University of Hawaii
Currently available in Colombia
Phone:   Country code: 57
          Provider code: 313
          Phone 776 2282
          From the USA or Canada you have to dial 011 57 313 776 2282
http://www.soc.hawaii.edu/mora/


From priyanka.toxic00 at gmail.com  Mon Sep 17 09:29:33 2012
From: priyanka.toxic00 at gmail.com (Priyanka Sharma)
Date: Mon, 17 Sep 2012 12:59:33 +0530
Subject: [R-sig-Geo] How to calculate measure of alignment after resampling?
Message-ID: <CALYnv37Tb1s-XZCaY6RAfZXVz3u0hG1OW3RjvBRLc10Hr-=BBw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120917/b812f14d/attachment.pl>

From mdsumner at gmail.com  Mon Sep 17 11:34:24 2012
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 17 Sep 2012 19:34:24 +1000
Subject: [R-sig-Geo] Interpolating with barrier in R
In-Reply-To: <20120916203830.10324t5l6zszspic@wm3.dal.ca>
References: <20120916203830.10324t5l6zszspic@wm3.dal.ca>
Message-ID: <CAAcGz99YQUteWb6sxV4=_bJYYfhTH6PioAP8WKhYw4ZzJQDCHg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120917/2f19bb3b/attachment.pl>

From suraj.cimmyt at gmail.com  Mon Sep 17 19:22:08 2012
From: suraj.cimmyt at gmail.com (Suraj Pandey)
Date: Mon, 17 Sep 2012 22:52:08 +0530
Subject: [R-sig-Geo] Cloud removal Modis data
Message-ID: <CAMvcJU+XLRq2P0S0huDKGkd2drVBd-jzbpWauyKEBxVxv=tMeg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120917/c14f3239/attachment.pl>

From thi_veloso at yahoo.com.br  Mon Sep 17 21:32:44 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Mon, 17 Sep 2012 12:32:44 -0700 (PDT)
Subject: [R-sig-Geo] Cloud removal Modis data
In-Reply-To: <CAMvcJU+XLRq2P0S0huDKGkd2drVBd-jzbpWauyKEBxVxv=tMeg@mail.gmail.com>
References: <CAMvcJU+XLRq2P0S0huDKGkd2drVBd-jzbpWauyKEBxVxv=tMeg@mail.gmail.com>
Message-ID: <1347910364.86193.YahooMailNeo@web121906.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120917/14ccb459/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Tue Sep 18 07:48:23 2012
From: matteo.mattiuzzi at boku.ac.at (=?utf-8?B?bWF0dGVvLm1hdHRpdXp6aUBib2t1LmFjLmF0?=)
Date: Tue, 18 Sep 2012 07:48:23 +0200
Subject: [R-sig-Geo] =?utf-8?q?Antw=2E=3A__Cloud_removal_Modis_data?=
Message-ID: <8438ce$392ju0@ironport01-smtpauth.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120918/067488fa/attachment.pl>

From Tamara.Emmenegger at vogelwarte.ch  Tue Sep 18 10:19:57 2012
From: Tamara.Emmenegger at vogelwarte.ch (Emmenegger Tamara)
Date: Tue, 18 Sep 2012 08:19:57 +0000
Subject: [R-sig-Geo] Error when trying to extract values for points in a
 SpatialPointsDataFrame
Message-ID: <21988D515585C644A17F298B1FC34F3516BA84C0@MailNT.vogelwarte.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120918/5092d720/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Tue Sep 18 11:20:34 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 18 Sep 2012 10:20:34 +0100
Subject: [R-sig-Geo] Error when trying to extract values for points in a
	SpatialPointsDataFrame
In-Reply-To: <b0905120a88f4b7086b707dcfa7c5996@EX-0-HT0.lancs.local>
References: <b0905120a88f4b7086b707dcfa7c5996@EX-0-HT0.lancs.local>
Message-ID: <CANVKczN3wY3Bd5SrQVvpa0AASk5JNbDPVGM4JsTwYpTY5Lg4FQ@mail.gmail.com>

On Tue, Sep 18, 2012 at 9:19 AM, Emmenegger Tamara
<Tamara.Emmenegger at vogelwarte.ch> wrote:
> Dear mailing list members,
>
> I'd like to extract raster values for the points in a SpatialPointsDataFrame.
>
>
> raster::extract(rasterlayer,spdf[x,],method='simple')
>
> But I get the error message:
>
>
> Fehler in .local(x, ...) :
>
>   kein Slot des Namens "blockrows" f?r dieses Objekt der Klasse ".RasterFile"
>
> Unfortunately I am unable to make head or tail of it. Any ideas what is going wrong?

 Hard to tell without knowing where your 'rasterlayer' object has come
from or what version of raster you are using or a basic knowledge of
German...

 If I create a raster object from a file and run str() on it, one of
the slots is of class .RasterFile and has a slot called 'blockrows':

> str(r)
Formal class 'RasterLayer' [package "raster"] with 16 slots
  ..@ file      :Formal class '.RasterFile' [package "raster"] with 11 slots
  .. .. ..@ name        : chr
"/data/rowlings/Datasets/eea.europa.eu/CorineLandCover/cumbria.tif"
  .. .. ..@ datanotation: chr "INT1U"
  .. .. ..@ byteorder   : chr "little"
  .. .. ..@ nodatavalue : num -Inf
  .. .. ..@ nbands      : int 1
  .. .. ..@ bandorder   : chr "BIL"
  .. .. ..@ offset      : int 0
  .. .. ..@ toptobottom : logi TRUE
  .. .. ..@ blockrows   : int 28
  .. .. ..@ blockcols   : int 285
  .. .. ..@ driver      : chr "gdal"

Somehow you have created something that doesn't have this... Where did
it come from?

Barry


From pazurrobert at gmail.com  Tue Sep 18 11:57:13 2012
From: pazurrobert at gmail.com (Robert Pazur)
Date: Tue, 18 Sep 2012 11:57:13 +0200
Subject: [R-sig-Geo] How to calculate measure of alignment after
	resampling?
In-Reply-To: <CALYnv37Tb1s-XZCaY6RAfZXVz3u0hG1OW3RjvBRLc10Hr-=BBw@mail.gmail.com>
References: <CALYnv37Tb1s-XZCaY6RAfZXVz3u0hG1OW3RjvBRLc10Hr-=BBw@mail.gmail.com>
Message-ID: <CAJP9LR7=W8K22ojXKA0zLS-Q7CAJYvTUwAbeTK+g7vyQo_MDLg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120918/52607882/attachment.pl>

From katakagi at bu.edu  Tue Sep 18 21:02:25 2012
From: katakagi at bu.edu (Ken Takagi)
Date: Tue, 18 Sep 2012 19:02:25 +0000
Subject: [R-sig-Geo] How does col.regions work in spplot?
Message-ID: <loom.20120918T203413-519@post.gmane.org>

Hi,

I am trying to use the same colors for polygon borders and fill in a spplot
figure.  I can use the "col.regions" attribute to have spplot fill the polygons
according to a color ramp.  What I would like is to have spplot also color the
borders of the polygons using the exact same color as the fill.  Here is an
example where I fill the polygons using col.regions = heat.colors(100), but
leave borders black:

# read in data
library(maptools)
library(sp)
nc <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1], 
                    proj4string=CRS("+proj=longlat +datum=NAD27"))
# add data column of random numbers
nc at data$rand_data <- rnorm(nrow(nc at data), 0.8, 0.3)
# Plot data with black polygons border
spplot(nc, zcol = "rand_data", col.regions = heat.colors(100), colorkey = T)

The only way I have found to match the color of the polygon borders (so far...)
has been to use a for loop inside spplot (probably a bad thing!!) and use the
"zcol" data as an index to select the appropriate heat.color() to match the fill:

# rank rand_data between 1 and 100 to match length of heat.colors(100), so
# they can be used as index for heat.colors(100)
rank_county_data = rank(nc at data$rand_data)
# Plot data with colored borders using for loop
spplot(nc, zcol = "rand_data", col.regions = heat.colors(100), colorkey = T,
             panel = function(x, y, ...){
               panel.polygonsplot(x,y, ...) 
               for(i in 1:length(fips)){
                 sub_county = subset(nc, nc at data$FIPS %in% nc at data$FIPS[i])
                 sp.polygons(sub_county, col = 
                            heat.colors(100)[rank_county_data[i]])
               }
             }) 

As you can see, the color of the borders are close, but not exactly the same as
the fill colors.  How does col.regions decide on the fill color (I assumed it
does something like what I did).  Is there a better way to match up the color of
the border and the color of the fill that doesn't involve a loop?

Thanks in advance!!!

Ken


From razia.zariff at student.adelaide.edu.au  Wed Sep 19 03:21:05 2012
From: razia.zariff at student.adelaide.edu.au (Razia Zariff)
Date: Wed, 19 Sep 2012 10:51:05 +0930
Subject: [R-sig-Geo] kriging log transformed data
Message-ID: <CAG0tj4-w-ya6ooBwGw2Uy6arySfef-ftPOh5RDaY5uBcyuPKPA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120919/df2c8585/attachment.pl>

From leila.brook at my.jcu.edu.au  Wed Sep 19 08:38:07 2012
From: leila.brook at my.jcu.edu.au (Leila Brook)
Date: Wed, 19 Sep 2012 06:38:07 +0000
Subject: [R-sig-Geo] Brownian Bridge Movement model error
Message-ID: <9BEE83C6BF59174DBD2CB4A06EB6CBEB2FE03C9A@SINPRD0111MB368.apcprd01.prod.exchangelabs.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120919/ba9aefcb/attachment.pl>

From clement.calenge at oncfs.gouv.fr  Wed Sep 19 09:41:45 2012
From: clement.calenge at oncfs.gouv.fr (Clement Calenge)
Date: Wed, 19 Sep 2012 09:41:45 +0200
Subject: [R-sig-Geo] [AniMov] Brownian Bridge Movement model error
In-Reply-To: <9BEE83C6BF59174DBD2CB4A06EB6CBEB2FE03C9A@SINPRD0111MB368.apcprd01.prod.exchangelabs.com>
References: <9BEE83C6BF59174DBD2CB4A06EB6CBEB2FE03C9A@SINPRD0111MB368.apcprd01.prod.exchangelabs.com>
Message-ID: <50597739.2030705@oncfs.gouv.fr>

Dear Leila,

This is indeed a bug. I have corrected it and I will upload the 
correction to CRAN asap. It will be available in a few days. Meanwhile, 
sourcing the attached file (i.e. typing source("kernelbb.R")) will allow 
to use the function in this context.
Best,

Cl?ment


On 09/19/2012 08:38 AM, Leila Brook wrote:
>
> I'm sorry for cross postings, as I'm not sure where exactly to ask 
> this question:
>
> I am trying to estimate a Brownian Bridge kernel home range using 
> adehabitatHR. I created
>
> I created a traj file as below:
>
> bobtraj<-as.ltraj(xy=bob_locs_ss[c("x","y")], id=bob_locs_ss$id, 
> date=bob_locs_ss$newdate, burst=bob_locs_ss$burst2)
>
> Then tried to create a kernelBB as follows, with a reference grid 
> around the animal's home range:
>
> bob_bbss<- kernelbb(bobtraj, sig1=4.0811, sig2=50, grid = refgrid, 
> byburst = TRUE, extent = 0.2)
>
> I then got this error:
>
> Error in as.vector(gr) : no method for coercing this S4 class to a vector
>
> I didn't get the error and the function worked when I ran kernelBB() 
> without byburst=TRUE. However, I would like to keep this specification 
> in the model, as my data were collected at high-frequency with two 
> days on and two days off, and without the burst=TRUE, the kernelBB95 
> looks quite oversmoothed.
>
> Can anyone provide any advice on how to fix this error?
>
> Thanks for your help,
>
> Leila Brook
>


-- 
Cl?ment CALENGE
Cellule d'appui ? l'analyse de donn?es
Direction des Etudes et de la Recherche
Office national de la chasse et de la faune sauvage
Saint Benoist - 78610 Auffargis
tel. (33) 01.30.46.54.14

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: kernelbb.r
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120919/fb437b1c/attachment.pl>

From patrick.meyfroidt at uclouvain.be  Wed Sep 19 16:50:07 2012
From: patrick.meyfroidt at uclouvain.be (Patrick Meyfroidt)
Date: Wed, 19 Sep 2012 16:50:07 +0200
Subject: [R-sig-Geo] unbalanced panel in spatial panel data models
Message-ID: <6e3f470367242bc2120115d93e411c8c.squirrel@mmp.sipr-dc.ucl.ac.be>

Hello,

I have a spatial panel database (regions over years), over which I would
like to run linear and most probably logistic regressions also.

I started to use the package splm (Giovanni Millo, Millo and Piras 2012),
calculating the spatial weights with spdep.
But it appears that splm only deals with balanced panels.

Is there another package or way to make spatial panel regressions, or
another way to deal with possible spatial autocorrelation effects, with
unbalanced panel data in R?

I know that I can manually remove incomplete regions or years, but given
the data I have this will be very costly (in terms of number of remaining
observations).

Thank you very much for considering the message, and for any help.

Patrick Meyfroidt
------
F.R.S. - FNRS and
Universit? catholique de Louvain - UCLouvain
Earth and Life Institute
Georges Lema?tre Centre for Earth and Climate Research (TECLIM)
Place Pasteur 3, bte L4.03.08
1348 Louvain-la-Neuve
Belgium
http://www.uclouvain.be/teclim
http://www.redd-alert.eu/


From mudrak at iastate.edu  Wed Sep 19 18:20:30 2012
From: mudrak at iastate.edu (Mudrak, Erika [EEOBS])
Date: Wed, 19 Sep 2012 16:20:30 +0000
Subject: [R-sig-Geo] Question about spatstat: bdist.tiles()
Message-ID: <04D70FE9EA5A934D8BCEF4EDD504961308CC53AF@ITSDAG3D.its.iastate.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120919/04f6dcf8/attachment.pl>

From r.turner at auckland.ac.nz  Wed Sep 19 23:12:48 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 20 Sep 2012 09:12:48 +1200
Subject: [R-sig-Geo] Question about spatstat: bdist.tiles()
In-Reply-To: <04D70FE9EA5A934D8BCEF4EDD504961308CC53AF@ITSDAG3D.its.iastate.edu>
References: <04D70FE9EA5A934D8BCEF4EDD504961308CC53AF@ITSDAG3D.its.iastate.edu>
Message-ID: <505A3550.4080005@auckland.ac.nz>


This does indeed appear to be a bug.  I succeeded (very easily) in 
reproducing
the bug with a simulated example as follows:

W <- disc(1,c(0,0))
set.seed(42)
X <- runifpoint(30,win=W)
spatstat.options(gcplib=TRUE)
TX <- dirichlet(X)
DTX <- bdist.tiles(TX)
plot(TX)
points(X$x[11],X$y[11],pch=20,col="red")
print(DTX[11]) # Get 0.2121148, not 0.

I will attempt to track down the source of the bug and then get back
to you.  May take me a while ....

     cheers,

         Rolf Turner


On 20/09/12 04:20, Mudrak, Erika [EEOBS] wrote:
> Hello geo list,
>
> I have a question about the bdist function in spatstat when applied to tiles.    The documentation for bdist.tiles says:
> ----------------------
> Details
> This function computes, for each tile s[[i]] in the tessellation X, the shortest distance from s[[i]] to the boundary of the window W containing the tessellation.
> Value
> A numeric vector, giving the shortest distance from each tile in the tessellation to the boundary of the window. Entries of the vector correspond to the entries of tiles(X).
> ---------------------
> *** From what point on the tile does this function measure?  ****
>
> I am interesting is doing Dirichlet (Voronoi) tessellations  (using dirichlet()), but I want to keep separate tiles that hit the window boundary and points that do not.     I thought I would use the bdist.tiles() function and keep only points where bdist>0.
>
> I realize there can be issues with rounding distances, but I came across a situation where there seems to be a bug or an ambiguity for this function.  I have posted an example jpeg at http://mudrak.public.iastate.edu/bdist.tiles_problem.jpg that shows my tessellation, with bdist.tiles values plotted at the point location, and non-boundary tiles (bdist>0) printed in blue. There is a tile on the right that should be a boundary tile but has a bdist of 0.0269, which is larger than many of the other interior tiles.
>
> ** Is there a fix for this bug, or another way to identify boundary tiles? **
>
> Thank you for any suggestions.


From m.hewson at uq.edu.au  Wed Sep 19 23:15:07 2012
From: m.hewson at uq.edu.au (Michael Hewson)
Date: Wed, 19 Sep 2012 21:15:07 +0000
Subject: [R-sig-Geo] Gstat and hulls of perfect correaltion
Message-ID: <4DFD7C68C50FE54A98C0D43A76E08E0805464F@uqexmdb6.soe.uq.edu.au>

G'day list,

Is there a way to add to a gstat cross-variogram the "hulls of perfect of correlation" (described in Webster and Oliver 2007) - both +ve and -ve?

Does any other R geostats package do that?

Thanks

Michael Hewson | PhD candidate
Climate Research Group<http://www.gpem.uq.edu.au/crg> | Biophysical Remote Sensing Group<http://www.gpem.uq.edu.au/brg>
The University of Queensland | Brisbane Q 4072 Australia
+61(0)408379373 | m.hewson at uq.edu.au<mailto:m.hewson at uq.edu.au>
[cid:image001.png at 01CD96FF.A926C690]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120919/699e74dd/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 25702 bytes
Desc: image001.png
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120919/699e74dd/attachment.png>

From osoong+r at gmail.com  Wed Sep 19 23:17:04 2012
From: osoong+r at gmail.com (Oliver Soong)
Date: Wed, 19 Sep 2012 14:17:04 -0700
Subject: [R-sig-Geo] rgdal::writeGDAL temporary files
Message-ID: <CAPQ=hV+95UBecdvgNj_2-nO-dYGJAM=zWiz6JHYUR1+LBaMccQ@mail.gmail.com>

I'm processing and outputting a large number of large GeoTIFFs.  Every
time I write one, I get a new intermediate file in tempdir().  I do
not have enough space in my temporary folder to store all of these
intermediates.  I believe these intermediate files back the
GDALTransientDataset objects created by create2GDAL called from
writeGDAL (I think), which are then copied to a data drive by
saveDataset.  After saveDataset, though, the transient object is
orphaned.

Is it possible to tell rgdal to remove these transients after
writing/saveDataset?  Alternatively, is it possible to tell rgdal to
write these intermediates to a particular location?

I can think of two workarounds, but I'd love to hear better ideas.  I
could redirect R's tempdir, although this is rather inconvenient.  I
can also try to detect the temporary files and delete them manually,
although this is probably driver- and version-specific and so less
robust than I would prefer.

Cheers,
Oliver


From r.turner at auckland.ac.nz  Thu Sep 20 00:02:48 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 20 Sep 2012 10:02:48 +1200
Subject: [R-sig-Geo] Question about spatstat: bdist.tiles()
In-Reply-To: <04D70FE9EA5A934D8BCEF4EDD504961308CC53AF@ITSDAG3D.its.iastate.edu>
References: <04D70FE9EA5A934D8BCEF4EDD504961308CC53AF@ITSDAG3D.its.iastate.edu>
Message-ID: <505A4108.7030407@auckland.ac.nz>


As Erika  correctly conjectured, the problem boils down to one of rounding
or numerical inaccuracy.  Some of the boundary points of the tiles are 
deemed
to lie outside of the (circular) window in which the pattern is found, 
and these
rejects are not used in calculating the minimum distance from the tile 
to the
window boundary.

A (possible) fix for the problem is to set "check=FALSE" in the call to 
as.ppp()
in bdist.tiles().  This setting results in the points not being 
rejected.  I have
attached the emended code in a file  "bdist.tiles.R".

Place this file in your working directory and do source("bdist.tiles.R") 
before
calling bdist.tiles() --- the new version will mask the one currently in 
spatstat
and thus get called upon, yielding correct answers.

Note that you still don't get DTX[11] being *exactly* 0 (in my toy example).
You get rather 1.82146e-17, and DTX[11] == 0 yields FALSE.  To check
for boundary tiles you need to do something like:

     sapply(DTX,function(x){isTRUE(all.equal(x,0))})

I'm not absolutely certain that my "bug fix" is completely safe, but I'm 
pretty
certain.  I will discuss it with Adrian and if he agrees then this fix 
will be included
in the next release of spatstat.  (And if he disagrees then a different 
fix will be
included!)

     cheers,

         Rolf Turner

On 20/09/12 04:20, Mudrak, Erika [EEOBS] wrote:
> Hello geo list,
>
> I have a question about the bdist function in spatstat when applied to tiles.    The documentation for bdist.tiles says:
> ----------------------
> Details
> This function computes, for each tile s[[i]] in the tessellation X, the shortest distance from s[[i]] to the boundary of the window W containing the tessellation.
> Value
> A numeric vector, giving the shortest distance from each tile in the tessellation to the boundary of the window. Entries of the vector correspond to the entries of tiles(X).
> ---------------------
> *** From what point on the tile does this function measure?  ****
>
> I am interesting is doing Dirichlet (Voronoi) tessellations  (using dirichlet()), but I want to keep separate tiles that hit the window boundary and points that do not.     I thought I would use the bdist.tiles() function and keep only points where bdist>0.
>
> I realize there can be issues with rounding distances, but I came across a situation where there seems to be a bug or an ambiguity for this function.  I have posted an example jpeg at http://mudrak.public.iastate.edu/bdist.tiles_problem.jpg that shows my tessellation, with bdist.tiles values plotted at the point location, and non-boundary tiles (bdist>0) printed in blue. There is a tile on the right that should be a boundary tile but has a bdist of 0.0269, which is larger than many of the other interior tiles.
>
> ** Is there a fix for this bug, or another way to identify boundary tiles? **
>
> Thank you for any suggestions.
>

-------------- next part --------------
bdist.tiles <- function(X) {
  if(!is.tess(X))
    stop("X must be a tessellation")
  W <- as.owin(X)
  switch(X$type,
         rect=,
         tiled={
           tt <- tiles(X)
           if(is.convex(W)) {
             # distance is minimised at a tile vertex
             vdist <- function(x,w) {
               z <- as.ppp(vertices(x), W=w, check=FALSE)
               min(bdist.points(z))
             }
             d <- sapply(tt, vdist, w=W)
           } else {
             # coerce everything to polygons
             W  <- as.polygonal(W)
             tt <- lapply(tt, as.polygonal)
             # compute min dist from tile edges to window edges
             edist <- function(x,b) {
               xd <- crossdist(as.psp(x), b, type="separation")
               min(xd)
             }
             d <- sapply(tt, edist, b=as.psp(W))
           }
         },
         image={
           Xim <- X$image
           # compute boundary distance for each pixel
           bd <- bdist.pixels(as.owin(Xim), style="image")
           bd <- bd[W, drop=FALSE]
           # split over tiles
           bX <- split(bd, X)
           # compute minimum distance over each level of factor
           d <- sapply(bX, function(z) { summary(z)$min })
         }
         )
    
  return(d)
}

From afischbach at usgs.gov  Thu Sep 20 00:57:17 2012
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Wed, 19 Sep 2012 15:57:17 -0700 (PDT)
Subject: [R-sig-Geo] coerce SpatialPolygonsDataFrame to
 SpatialLinesDataFrame for plotKML
Message-ID: <1348095437209-7580986.post@n2.nabble.com>

For purposes of sharing data in a form that may be visualized on shipboard
chart plotters, 
I wish to export contours as a KML(or KMZ) of lines with a color
corresponding to a contour level.
I have generated the contours as SpatialPolygonsDataFrame from kernel
density estimators in adehabitatHR.

Is there a handy means to coerce the outlines SpatialPolygonsDataFrame into
a SpatialLinesDataFrame object to facilitate this KML/KMZ export?

#########################################################
### Here is a toy example of what I wish to have

require(adehabitatHR) 
data(puechabonsp)                   ## load animal movement data
loc <- puechabonsp$relocs  
(ud <- kernelUD(loc[,1]))           ## estimate utilization distribution
ct <- 95                                 ## Specify the contour level
ver <- getverticeshr(ud, percent=ct)  ## extract the home-range contours
class(ver)                               ## this produces a
SpatialPolygonsDataFrame object
#### Here I want to export the home range as a line into a KML/KMZ file
#### I want a function that will do this
ver.sLinesdf<-coerceToSpatialLinesDataFrame(ver)
class(ver.sLinesdf)                    ## returns SpatialLinesDataFrame
plotKML(ver.sLinesdf, colour=ct)  ## Generate KMZ and color using the
contour level

#########################################################



-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/coerce-SpatialPolygonsDataFrame-to-SpatialLinesDataFrame-for-plotKML-tp7580986.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From m.hewson at uq.edu.au  Thu Sep 20 01:40:42 2012
From: m.hewson at uq.edu.au (Michael Hewson)
Date: Wed, 19 Sep 2012 23:40:42 +0000
Subject: [R-sig-Geo] cross-variograms and relationship strength
Message-ID: <4DFD7C68C50FE54A98C0D43A76E08E08054787@uqexmdb6.soe.uq.edu.au>

Please excuse this basic question - I'm a bit befuddled.

If I have two cross-variograms - both with the same two variables.
Both sill at about the same range.
One has a higher cross-semivariance value at that range.
Does that mean it has a "stronger" relationship - in a correlation sense? Or does the greater value for cross-semivariance indicate more "variance" hence less strength? Or can one not make any judgement on relationship strength from the cross-semivariance sill?

Michael Hewson | PhD candidate
Climate Research Group<http://www.gpem.uq.edu.au/crg> | Biophysical Remote Sensing Group<http://www.gpem.uq.edu.au/brg>
The University of Queensland | Brisbane Q 4072 Australia
+61(0)408379373 | m.hewson at uq.edu.au<mailto:m.hewson at uq.edu.au>
[cid:image003.png at 01CD9713.FFFDD350]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120919/3e029f0e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 25702 bytes
Desc: image003.png
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120919/3e029f0e/attachment.png>

From ross.dwyer at uq.edu.au  Thu Sep 20 04:03:29 2012
From: ross.dwyer at uq.edu.au (Ross Dwyer)
Date: Thu, 20 Sep 2012 02:03:29 +0000
Subject: [R-sig-Geo] coerce SpatialPolygonsDataFrame to
 SpatialLinesDataFrame for plotKML
In-Reply-To: <1348095437209-7580986.post@n2.nabble.com>
References: <1348095437209-7580986.post@n2.nabble.com>
Message-ID: <84B4751733167E41A8156E63A69C1C3A08A16B@uqexmdb3.soe.uq.edu.au>

Hi Tony,

If all you want to do is export a .kml with fully transparent vertices, try the writeOGR function in the rgdal package...

ver <- getverticeshr(ud, percent=ct)  ## extract the home-range contours
writeOGR(ver, dsn="my file name.kml", layer= "myvertices", driver="KML", dataset_options=c("NameField=ct")) #where ct is a column in your spdf.

However I'm unsure how to specify the colour here - the default border colour is red and writeOGR doesn't seem to have the option to alter the output colour.

Alternatively, try the kml() function in the plotKML package. However this will only generate a 'filled' rather than a 'border-only' polygon. 

Sorry I can't be more help!

Cheers,
Ross

Dr Ross Dwyer | University of Queensland | Email: ross.dwyer at uq.edu.au

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Anthony Fischbach
Sent: Thursday, 20 September 2012 8:57 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] coerce SpatialPolygonsDataFrame to SpatialLinesDataFrame for plotKML

For purposes of sharing data in a form that may be visualized on shipboard chart plotters, I wish to export contours as a KML(or KMZ) of lines with a color corresponding to a contour level.
I have generated the contours as SpatialPolygonsDataFrame from kernel density estimators in adehabitatHR.

Is there a handy means to coerce the outlines SpatialPolygonsDataFrame into a SpatialLinesDataFrame object to facilitate this KML/KMZ export?

#########################################################
### Here is a toy example of what I wish to have

require(adehabitatHR) 
data(puechabonsp)                   ## load animal movement data
loc <- puechabonsp$relocs  
(ud <- kernelUD(loc[,1]))           ## estimate utilization distribution
ct <- 95                                 ## Specify the contour level
ver <- getverticeshr(ud, percent=ct)  ## extract the home-range contours
class(ver)                               ## this produces a
SpatialPolygonsDataFrame object
#### Here I want to export the home range as a line into a KML/KMZ file #### I want a function that will do this
ver.sLinesdf<-coerceToSpatialLinesDataFrame(ver)
class(ver.sLinesdf)                    ## returns SpatialLinesDataFrame
plotKML(ver.sLinesdf, colour=ct)  ## Generate KMZ and color using the contour level

#########################################################



-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/coerce-SpatialPolygonsDataFrame-to-SpatialLinesDataFrame-for-plotKML-tp7580986.html
Sent from the R-sig-geo mailing list archive at Nabble.com.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From ross.dwyer at uq.edu.au  Thu Sep 20 09:13:03 2012
From: ross.dwyer at uq.edu.au (Ross Dwyer)
Date: Thu, 20 Sep 2012 07:13:03 +0000
Subject: [R-sig-Geo] coerce SpatialPolygonsDataFrame to
 SpatialLinesDataFrame for plotKML
In-Reply-To: <84B4751733167E41A8156E63A69C1C3A08A16B@uqexmdb3.soe.uq.edu.au>
References: <1348095437209-7580986.post@n2.nabble.com>
	<84B4751733167E41A8156E63A69C1C3A08A16B@uqexmdb3.soe.uq.edu.au>
Message-ID: <84B4751733167E41A8156E63A69C1C3A08A31D@uqexmdb3.soe.uq.edu.au>

Hi Tony,

I just stumbled on this link in the archive which will convert SpatialPolygons to a SpatialLines object. Once converted the km() function should work for you.

http://r-sig-geo.2731867.n2.nabble.com/SpatialPolygons-to-SpatialLines-td6670180.html

Ross



-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Ross Dwyer
Sent: Thursday, 20 September 2012 12:03 PM
To: Anthony Fischbach; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] coerce SpatialPolygonsDataFrame to SpatialLinesDataFrame for plotKML

Hi Tony,

If all you want to do is export a .kml with fully transparent vertices, try the writeOGR function in the rgdal package...

ver <- getverticeshr(ud, percent=ct)  ## extract the home-range contours writeOGR(ver, dsn="my file name.kml", layer= "myvertices", driver="KML", dataset_options=c("NameField=ct")) #where ct is a column in your spdf.

However I'm unsure how to specify the colour here - the default border colour is red and writeOGR doesn't seem to have the option to alter the output colour.

Alternatively, try the kml() function in the plotKML package. However this will only generate a 'filled' rather than a 'border-only' polygon. 

Sorry I can't be more help!

Cheers,
Ross

Dr Ross Dwyer | University of Queensland | Email: ross.dwyer at uq.edu.au

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Anthony Fischbach
Sent: Thursday, 20 September 2012 8:57 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] coerce SpatialPolygonsDataFrame to SpatialLinesDataFrame for plotKML

For purposes of sharing data in a form that may be visualized on shipboard chart plotters, I wish to export contours as a KML(or KMZ) of lines with a color corresponding to a contour level.
I have generated the contours as SpatialPolygonsDataFrame from kernel density estimators in adehabitatHR.

Is there a handy means to coerce the outlines SpatialPolygonsDataFrame into a SpatialLinesDataFrame object to facilitate this KML/KMZ export?

#########################################################
### Here is a toy example of what I wish to have

require(adehabitatHR) 
data(puechabonsp)                   ## load animal movement data
loc <- puechabonsp$relocs  
(ud <- kernelUD(loc[,1]))           ## estimate utilization distribution
ct <- 95                                 ## Specify the contour level
ver <- getverticeshr(ud, percent=ct)  ## extract the home-range contours
class(ver)                               ## this produces a
SpatialPolygonsDataFrame object
#### Here I want to export the home range as a line into a KML/KMZ file #### I want a function that will do this
ver.sLinesdf<-coerceToSpatialLinesDataFrame(ver)
class(ver.sLinesdf)                    ## returns SpatialLinesDataFrame
plotKML(ver.sLinesdf, colour=ct)  ## Generate KMZ and color using the contour level

#########################################################



-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/coerce-SpatialPolygonsDataFrame-to-SpatialLinesDataFrame-for-plotKML-tp7580986.html
Sent from the R-sig-geo mailing list archive at Nabble.com.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From patrick.meyfroidt at uclouvain.be  Thu Sep 20 10:28:05 2012
From: patrick.meyfroidt at uclouvain.be (Patrick Meyfroidt)
Date: Thu, 20 Sep 2012 10:28:05 +0200
Subject: [R-sig-Geo] unbalanced panel in spatial panel data models
In-Reply-To: <CACsciEi47xN+Mh-NX93mXx64z_osuUREbMdvB64VeH=aJjEXVA@mail.gmail.com>
References: <6e3f470367242bc2120115d93e411c8c.squirrel@mmp.sipr-dc.ucl.ac.be>
	<CACsciEi47xN+Mh-NX93mXx64z_osuUREbMdvB64VeH=aJjEXVA@mail.gmail.com>
Message-ID: <9832901be01904575620b6b548a39610.squirrel@mmp.sipr-dc.ucl.ac.be>

Dear Francis,

thank you very much.
No in fact I did not consider multiple imputation, and have to admit that
I don't know what it is.

Now, I see that I can calculate these multiple imputations using Amelia's
package, right? I suppose I'll figure out how.

After that, I'm not entirely sure how I have to proceed.
Do I have to run my analyses multiple times using the multiple imputed
datasets, and then combine the results? But I don't know how to combine
the results?
Do you have any resource that would help me do that?

Thanks,

patrick


> Hi Patrick,
>
> I have no experience with unbalanced spatial panels, but an alternative to
> doing a complete case analysis might be multiple imputation, which has
> been
> adapted for longitudinal designs by the biostatistics community.
>
> You probably already have already thought of this, but I thought I'd raise
> the option just in case.
>
> Cheers,
>
> Francis
>
> On 19 September 2012 22:50, Patrick Meyfroidt <
> patrick.meyfroidt at uclouvain.be> wrote:
>
>> Hello,
>>
>> I have a spatial panel database (regions over years), over which I would
>> like to run linear and most probably logistic regressions also.
>>
>> I started to use the package splm (Giovanni Millo, Millo and Piras
>> 2012),
>> calculating the spatial weights with spdep.
>> But it appears that splm only deals with balanced panels.
>>
>> Is there another package or way to make spatial panel regressions, or
>> another way to deal with possible spatial autocorrelation effects, with
>> unbalanced panel data in R?
>>
>> I know that I can manually remove incomplete regions or years, but given
>> the data I have this will be very costly (in terms of number of
>> remaining
>> observations).
>>
>> Thank you very much for considering the message, and for any help.
>>
>> Patrick Meyfroidt
>> ------
>> F.R.S. - FNRS and
>> Universit? catholique de Louvain - UCLouvain
>> Earth and Life Institute
>> Georges Lema?tre Centre for Earth and Climate Research (TECLIM)
>> Place Pasteur 3, bte L4.03.08
>> 1348 Louvain-la-Neuve
>> Belgium
>> http://www.uclouvain.be/teclim
>> http://www.redd-alert.eu/
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


From sluedtke at gfz-potsdam.de  Thu Sep 20 10:32:58 2012
From: sluedtke at gfz-potsdam.de (sluedtke)
Date: Thu, 20 Sep 2012 01:32:58 -0700 (PDT)
Subject: [R-sig-Geo] plotting holes of esri shape files
Message-ID: <1348128123.2384.14.camel@hydro44>

Dear friends, 


am trying to overlay a polygon data set as a SpatialPolygonDateFrame to
an existing plot. The data set has a hole in the middle, and I do not
want to have any filling in there. If a check the shape in a GIS,
everything looks fine, but using the following commands to do the plot,
the hole is filled. 

That is the code I am using, the data is attached. Thanks in advance!

Stefan



################################################################################################

library(sp)
library(rgdal)
library(raster)
library(latticeExtra)


###############################################################################################
#read the DEM from the ASCII format

dem_ascii=raster(readGDAL("./zerafshan_mod_dem.asc"))


###############################################################################################
# read additional data for printing
mask=readOGR("./", "mask_zerafshan")

###############################################################################################

#plot this stuff
plot_dem=spplot(dem_ascii, col.regions=terrain.colors(400),
colorkey=list(width=1, space="right"))+
layer(sp.polygons(mask,fill="lightgray"))

print(plot_dem) 
################################################################################################



mask_zerafshan.dbf (110 bytes) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/0/mask_zerafshan.dbf>
mask_zerafshan.prj (143 bytes) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/1/mask_zerafshan.prj>
mask_zerafshan.shp (173K) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/2/mask_zerafshan.shp>
mask_zerafshan.shx (150 bytes) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/3/mask_zerafshan.shx>
zerafshan_mod_dem.asc (1M) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/4/zerafshan_mod_dem.asc>




--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/plotting-holes-of-esri-shape-files-tp7580992.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mathias.seibert at gfz-potsdam.de  Thu Sep 20 11:21:22 2012
From: mathias.seibert at gfz-potsdam.de (Mathias Seibert)
Date: Thu, 20 Sep 2012 11:21:22 +0200
Subject: [R-sig-Geo] How does col.regions work in spplot?
In-Reply-To: <loom.20120918T203413-519@post.gmane.org>
References: <loom.20120918T203413-519@post.gmane.org>
Message-ID: <505AE012.70304@gfz-potsdam.de>

Dear Ken,

if I understand correctly, you want to create a plot without highlight 
borders. This can be achieved by setting col="transparent".
using your example, try:
spplot(nc, zcol = "rand_data", col.regions = heat.colors(100), 
col="transparent", colorkey = T)

I don't know how to set the colours of the borders individually, but I 
think the solution above produces a plot looking like you wanted it.

Cheers,
Mathias

-- 
Mathias Seibert

Sektion 5.4 Hydrologie
Tel.: +49 331 288 1513
Fax: +49 331 288 1570
Email: mathias.seibert at gfz-potsdam.de
___________________________________
Helmholtz-Zentrum Potsdam
Deutsches GeoForschungsZentrum GFZ
(GFZ German Research Centre for Geoscience)
Stiftung des ?ff. Rechts Land Brandenburg
Telegrafenberg, 14473 Potsdam


From oluseun.idowu at mail.umkc.edu  Thu Sep 20 11:06:42 2012
From: oluseun.idowu at mail.umkc.edu (Idowu, Oluseun S. (UMKC-Student))
Date: Thu, 20 Sep 2012 09:06:42 +0000
Subject: [R-sig-Geo] Help - call lm don't give full result
In-Reply-To: <84B4751733167E41A8156E63A69C1C3A08A31D@uqexmdb3.soe.uq.edu.au>
Message-ID: <CC804664.746B%osif38@mail.umkc.edu>

Please, does anyone know what I need to do - my call lm(regression model)
is not giving the full output result. Thanks in advance

Sam




On 9/20/12 2:13 AM, "Ross Dwyer" <ross.dwyer at uq.edu.au> wrote:

>Hi Tony,
>
>I just stumbled on this link in the archive which will convert
>SpatialPolygons to a SpatialLines object. Once converted the km()
>function should work for you.
>
>http://r-sig-geo.2731867.n2.nabble.com/SpatialPolygons-to-SpatialLines-td6
>670180.html
>
>Ross
>
>
>
>-----Original Message-----
>From: r-sig-geo-bounces at r-project.org
>[mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Ross Dwyer
>Sent: Thursday, 20 September 2012 12:03 PM
>To: Anthony Fischbach; r-sig-geo at r-project.org
>Subject: Re: [R-sig-Geo] coerce SpatialPolygonsDataFrame to
>SpatialLinesDataFrame for plotKML
>
>Hi Tony,
>
>If all you want to do is export a .kml with fully transparent vertices,
>try the writeOGR function in the rgdal package...
>
>ver <- getverticeshr(ud, percent=ct)  ## extract the home-range contours
>writeOGR(ver, dsn="my file name.kml", layer= "myvertices", driver="KML",
>dataset_options=c("NameField=ct")) #where ct is a column in your spdf.
>
>However I'm unsure how to specify the colour here - the default border
>colour is red and writeOGR doesn't seem to have the option to alter the
>output colour.
>
>Alternatively, try the kml() function in the plotKML package. However
>this will only generate a 'filled' rather than a 'border-only' polygon.
>
>Sorry I can't be more help!
>
>Cheers,
>Ross
>
>Dr Ross Dwyer | University of Queensland | Email: ross.dwyer at uq.edu.au
>
>-----Original Message-----
>From: r-sig-geo-bounces at r-project.org
>[mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Anthony Fischbach
>Sent: Thursday, 20 September 2012 8:57 AM
>To: r-sig-geo at r-project.org
>Subject: [R-sig-Geo] coerce SpatialPolygonsDataFrame to
>SpatialLinesDataFrame for plotKML
>
>For purposes of sharing data in a form that may be visualized on
>shipboard chart plotters, I wish to export contours as a KML(or KMZ) of
>lines with a color corresponding to a contour level.
>I have generated the contours as SpatialPolygonsDataFrame from kernel
>density estimators in adehabitatHR.
>
>Is there a handy means to coerce the outlines SpatialPolygonsDataFrame
>into a SpatialLinesDataFrame object to facilitate this KML/KMZ export?
>
>#########################################################
>### Here is a toy example of what I wish to have
>
>require(adehabitatHR)
>data(puechabonsp)                   ## load animal movement data
>loc <- puechabonsp$relocs
>(ud <- kernelUD(loc[,1]))           ## estimate utilization distribution
>ct <- 95                                 ## Specify the contour level
>ver <- getverticeshr(ud, percent=ct)  ## extract the home-range contours
>class(ver)                               ## this produces a
>SpatialPolygonsDataFrame object
>#### Here I want to export the home range as a line into a KML/KMZ file
>#### I want a function that will do this
>ver.sLinesdf<-coerceToSpatialLinesDataFrame(ver)
>class(ver.sLinesdf)                    ## returns SpatialLinesDataFrame
>plotKML(ver.sLinesdf, colour=ct)  ## Generate KMZ and color using the
>contour level
>
>#########################################################
>
>
>
>-----
>Tony Fischbach, Wildlife Biologist
>Walrus Research Program
>Alaska Science Center
>U.S. Geological Survey
>4210 University Drive
>Anchorage, AK 99508-4650
>
>AFischbach at usgs.gov
>http://alaska.usgs.gov/science/biology/walrus
>--
>View this message in context:
>http://r-sig-geo.2731867.n2.nabble.com/coerce-SpatialPolygonsDataFrame-to-
>SpatialLinesDataFrame-for-plotKML-tp7580986.html
>Sent from the R-sig-geo mailing list archive at Nabble.com.
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From roman.lustrik at gmail.com  Thu Sep 20 11:57:48 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Thu, 20 Sep 2012 11:57:48 +0200
Subject: [R-sig-Geo] Help - call lm don't give full result
In-Reply-To: <CC804664.746B%osif38@mail.umkc.edu>
References: <84B4751733167E41A8156E63A69C1C3A08A31D@uqexmdb3.soe.uq.edu.au>
	<CC804664.746B%osif38@mail.umkc.edu>
Message-ID: <CAHT1vpiHX2gzhqh48Cx1r7=qrgNoQnsFd_kObUx=CFs023_fxQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120920/8f53eaaf/attachment.pl>

From katakagi at bu.edu  Thu Sep 20 16:07:13 2012
From: katakagi at bu.edu (Ken Takagi)
Date: Thu, 20 Sep 2012 14:07:13 +0000
Subject: [R-sig-Geo] How does col.regions work in spplot?
References: <loom.20120918T203413-519@post.gmane.org>
	<505AE012.70304@gfz-potsdam.de>
Message-ID: <loom.20120920T160609-667@post.gmane.org>

Mathias Seibert <mathias.seibert <at> gfz-potsdam.de> writes:

> 
> Dear Ken,
> 
> if I understand correctly, you want to create a plot without highlight 
> borders. This can be achieved by setting col="transparent".
> using your example, try:
> spplot(nc, zcol = "rand_data", col.regions = heat.colors(100), 
> col="transparent", colorkey = T)
> 
> I don't know how to set the colours of the borders individually, but I 
> think the solution above produces a plot looking like you wanted it.
> 
> Cheers,
> Mathias
> 

Mathias,
Thanks a lot!  It seems to do what I needed.  I was worried it was going to
leave a gap between each of the counties, but that doesn't appear to be the
case. Much more elegant than my solution.  

Ken


From oliveirajc1 at gmail.com  Thu Sep 20 17:05:39 2012
From: oliveirajc1 at gmail.com (Julio Oliveira)
Date: Thu, 20 Sep 2012 12:05:39 -0300
Subject: [R-sig-Geo] NA values in rasterStack
Message-ID: <017A0D86-1F83-43A9-9979-6D955E8C80C1@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120920/e1b90ec8/attachment.pl>

From afischbach at usgs.gov  Thu Sep 20 17:53:00 2012
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Thu, 20 Sep 2012 08:53:00 -0700 (PDT)
Subject: [R-sig-Geo] coerce SpatialPolygonsDataFrame to
 SpatialLinesDataFrame for plotKML
In-Reply-To: <84B4751733167E41A8156E63A69C1C3A08A31D@uqexmdb3.soe.uq.edu.au>
References: <1348095437209-7580986.post@n2.nabble.com>
	<84B4751733167E41A8156E63A69C1C3A08A16B@uqexmdb3.soe.uq.edu.au>
	<84B4751733167E41A8156E63A69C1C3A08A31D@uqexmdb3.soe.uq.edu.au>
Message-ID: <1348156380334-7580998.post@n2.nabble.com>

Thank you Ross, 

To complete the conversion from SpatialPolygonsDataFrame to
SpatialLinesDataFrame 
I add the following lines to my toy example.

#########################################################
         ## Extract lines from SpatialPolygonsDataFrame
sl<-as(ver, "SpatialLines")                                 
          ## convert SpatialLines to SpatialLinesDataFrame,
          ## appending the original data.frame from the
SpatialPolygonsDataFrame
spLdf<-SpatialLinesDataFrame(sl, data=ver at data, match.ID = TRUE)   
#########################################################



-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/coerce-SpatialPolygonsDataFrame-to-SpatialLinesDataFrame-for-plotKML-tp7580986p7580998.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From patrick.meyfroidt at uclouvain.be  Thu Sep 20 21:02:55 2012
From: patrick.meyfroidt at uclouvain.be (Patrick Meyfroidt)
Date: Thu, 20 Sep 2012 21:02:55 +0200
Subject: [R-sig-Geo] unbalanced panel in spatial panel data models
In-Reply-To: <CACsciEjSutOa6mjFWqu3XyRF6UM6h2xZjT92bp8kry6i5vbHXg@mail.gmail.com>
References: <6e3f470367242bc2120115d93e411c8c.squirrel@mmp.sipr-dc.ucl.ac.be>
	<CACsciEi47xN+Mh-NX93mXx64z_osuUREbMdvB64VeH=aJjEXVA@mail.gmail.com>
	<9832901be01904575620b6b548a39610.squirrel@mmp.sipr-dc.ucl.ac.be>
	<CACsciEjSutOa6mjFWqu3XyRF6UM6h2xZjT92bp8kry6i5vbHXg@mail.gmail.com>
Message-ID: <d77f6f71bde1800a23d5e893f9a820e6.squirrel@mmp.sipr-dc.ucl.ac.be>

Much thanks again.

Now, returning to my raw data, I realize that in fact the unbalanced
character comes mainly from a number of regions for which I do not have
any data for the main dependent variables, for none of the years. I guess
in that case imputation would be hard to calculate.
So I will dig this further but maybe in the end I will return to deletion
of missing observations.
Anyway I hope that this may be also helpful for others like Caleb
Gallemore which apparently had similar issue.

Thanks again, I will keep the list informed if in the end I use the
multiple imputation,

Patrick


From naimi at itc.nl  Fri Sep 21 13:59:01 2012
From: naimi at itc.nl (Babak Naimi)
Date: Fri, 21 Sep 2012 13:59:01 +0200
Subject: [R-sig-Geo] efficient way to get values from a raster
Message-ID: <021F462EDC7F2B42A7038E9F9D47826126F09C9D1F@itcnt27.itc.nl>

Dear list,

I want to extract cell values from a raster object given row and column numbers or cell numbers. The solution I used is not efficient (see the following) comparing with extracting values from a matrix. Any advice? 

> m <- matrix(rnorm(25),5) # matrix
> r <- raster(m) # raster

# --- case 1:
> system.time(for (i in 1:1000) r[1:3,1:3]) # extracting values from raster given rows and columns
user  system elapsed 
      0       0       0 

> system.time(for (i in 1:1000) m[1:3,1:3])  # extracting the same values from matrix
 user  system elapsed 
   8.41    0.03    9.58 

#---- case 2: 
> cells <- c(1,2,3,6,7,8,11,12,13) # cell numbers 

> system.time(for (i in 1:1000) r[cells]) # extracting values from raster given cells number
user  system elapsed 
   3.52    0.00    3.59 
> system.time(for (i in 1:1000) t(m)[cells]) # extracting the same values from matrix
user  system elapsed 
   0.07    0.00    0.08 

Best regards,
Babak

From b.rowlingson at lancaster.ac.uk  Fri Sep 21 14:49:16 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 21 Sep 2012 13:49:16 +0100
Subject: [R-sig-Geo] efficient way to get values from a raster
In-Reply-To: <f4d2a2b4f57e4b4cafb389cf06ead8d0@EX-1-HT0.lancs.local>
References: <f4d2a2b4f57e4b4cafb389cf06ead8d0@EX-1-HT0.lancs.local>
Message-ID: <CANVKczNhE=cLQujpRwh4N=Ggoiq+-y6AJWGupmfuwf+_4JZVWw@mail.gmail.com>

On Fri, Sep 21, 2012 at 12:59 PM, Babak Naimi <naimi at itc.nl> wrote:
> Dear list,
>
> I want to extract cell values from a raster object given row and column numbers or cell numbers. The solution I used is not efficient (see the following) comparing with extracting values from a matrix. Any advice?


>> m <- matrix(rnorm(25),5) # matrix
>> r <- raster(m) # raster
>
> # --- case 1:
>> system.time(for (i in 1:1000) r[1:3,1:3]) # extracting values from raster given rows and columns
> user  system elapsed
>       0       0       0
>
>> system.time(for (i in 1:1000) m[1:3,1:3])  # extracting the same values from matrix
>  user  system elapsed
>    8.41    0.03    9.58

I get practically the opposite, which is what I was expecting:

 > m <- matrix(rnorm(25),5) # matrix
 > r <- raster(m) # raster
 > system.time(for (i in 1:1000) r[1:3,1:3])
    user  system elapsed
   3.828   0.176   4.001
 > system.time(for (i in 1:1000) m[1:3,1:3])
    user  system elapsed
   0.004   0.000   0.002

 - much faster for a matrix than a raster. Raster package version: 1.9-94


> #---- case 2:
>> cells <- c(1,2,3,6,7,8,11,12,13) # cell numbers
>
>> system.time(for (i in 1:1000) r[cells]) # extracting values from raster given cells number
> user  system elapsed
>    3.52    0.00    3.59
>> system.time(for (i in 1:1000) t(m)[cells]) # extracting the same values from matrix
> user  system elapsed
>    0.07    0.00    0.08

Broadly similar this time:

 > system.time(for (i in 1:1000) r[cells])
    user  system elapsed
   1.436   0.000   1.438
 >  system.time(for (i in 1:1000) t(m)[cells])
    user  system elapsed
    0.04    0.00    0.04

 - matrix faster, as I expected.

 So I guess we now have two questions:

 1. Why is your raster extraction r[1:3,1:3] so much faster than
matrix extraction?
 2. How can you do raster extraction faster?

If this is a real problem in your code (ie extraction is taking >50%
of the time of whatever it is you are doing) then why not convert to
matrix first?

Barry


From naimi at itc.nl  Fri Sep 21 15:50:40 2012
From: naimi at itc.nl (Babak Naimi)
Date: Fri, 21 Sep 2012 15:50:40 +0200
Subject: [R-sig-Geo] efficient way to get values from a raster
In-Reply-To: <CANVKczNhE=cLQujpRwh4N=Ggoiq+-y6AJWGupmfuwf+_4JZVWw@mail.gmail.com>
References: <f4d2a2b4f57e4b4cafb389cf06ead8d0@EX-1-HT0.lancs.local>,
	<CANVKczNhE=cLQujpRwh4N=Ggoiq+-y6AJWGupmfuwf+_4JZVWw@mail.gmail.com>
Message-ID: <021F462EDC7F2B42A7038E9F9D47826126F09C9D20@itcnt27.itc.nl>

Dear Barry,

Sorry, it was my mistake to paste the results into the email!! Indeed, I also got the same results as you did. The reason that I am looking for an efficient way to extract data from raster, is that using raster dataset it is possible to write memory-safe functions.

Best,
Babak
________________________________________
From: b.rowlingson at gmail.com [b.rowlingson at gmail.com] On Behalf Of Barry Rowlingson [b.rowlingson at lancaster.ac.uk]
Sent: Friday, September 21, 2012 2:49 PM
To: Babak Naimi
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] efficient way to get values from a raster

On Fri, Sep 21, 2012 at 12:59 PM, Babak Naimi <naimi at itc.nl> wrote:
> Dear list,
>
> I want to extract cell values from a raster object given row and column numbers or cell numbers. The solution I used is not efficient (see the following) comparing with extracting values from a matrix. Any advice?


>> m <- matrix(rnorm(25),5) # matrix
>> r <- raster(m) # raster
>
> # --- case 1:
>> system.time(for (i in 1:1000) r[1:3,1:3]) # extracting values from raster given rows and columns
> user  system elapsed
>       0       0       0
>
>> system.time(for (i in 1:1000) m[1:3,1:3])  # extracting the same values from matrix
>  user  system elapsed
>    8.41    0.03    9.58

I get practically the opposite, which is what I was expecting:

 > m <- matrix(rnorm(25),5) # matrix
 > r <- raster(m) # raster
 > system.time(for (i in 1:1000) r[1:3,1:3])
    user  system elapsed
   3.828   0.176   4.001
 > system.time(for (i in 1:1000) m[1:3,1:3])
    user  system elapsed
   0.004   0.000   0.002

 - much faster for a matrix than a raster. Raster package version: 1.9-94


> #---- case 2:
>> cells <- c(1,2,3,6,7,8,11,12,13) # cell numbers
>
>> system.time(for (i in 1:1000) r[cells]) # extracting values from raster given cells number
> user  system elapsed
>    3.52    0.00    3.59
>> system.time(for (i in 1:1000) t(m)[cells]) # extracting the same values from matrix
> user  system elapsed
>    0.07    0.00    0.08

Broadly similar this time:

 > system.time(for (i in 1:1000) r[cells])
    user  system elapsed
   1.436   0.000   1.438
 >  system.time(for (i in 1:1000) t(m)[cells])
    user  system elapsed
    0.04    0.00    0.04

 - matrix faster, as I expected.

 So I guess we now have two questions:

 1. Why is your raster extraction r[1:3,1:3] so much faster than
matrix extraction?
 2. How can you do raster extraction faster?

If this is a real problem in your code (ie extraction is taking >50%
of the time of whatever it is you are doing) then why not convert to
matrix first?

Barry


From mathieu.rajerison at gmail.com  Fri Sep 21 16:41:38 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Fri, 21 Sep 2012 16:41:38 +0200
Subject: [R-sig-Geo] plotting holes of esri shape files
In-Reply-To: <1348128123.2384.14.camel@hydro44>
References: <1348128123.2384.14.camel@hydro44>
Message-ID: <CAGfc75k0dfRQ-YteaiKaAWXa_aLSnHe4phFmRVWh3F0vKwp7vg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120921/04fdb87f/attachment.pl>

From mathieu.rajerison at gmail.com  Fri Sep 21 16:48:15 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Fri, 21 Sep 2012 16:48:15 +0200
Subject: [R-sig-Geo] NA values in rasterStack
In-Reply-To: <017A0D86-1F83-43A9-9979-6D955E8C80C1@gmail.com>
References: <017A0D86-1F83-43A9-9979-6D955E8C80C1@gmail.com>
Message-ID: <CAGfc75=LyFs7en=XY_LAQM84wyaQ4qKrDh-v=edVT2BEFoKQpA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120921/8473ae73/attachment.pl>

From Roger.Bivand at nhh.no  Fri Sep 21 20:42:02 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 21 Sep 2012 20:42:02 +0200 (CEST)
Subject: [R-sig-Geo] rgdal::writeGDAL temporary files
In-Reply-To: <CAPQ=hV+95UBecdvgNj_2-nO-dYGJAM=zWiz6JHYUR1+LBaMccQ@mail.gmail.com>
References: <CAPQ=hV+95UBecdvgNj_2-nO-dYGJAM=zWiz6JHYUR1+LBaMccQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1209212038140.12094@reclus.nhh.no>

On Wed, 19 Sep 2012, Oliver Soong wrote:

> I'm processing and outputting a large number of large GeoTIFFs.  Every
> time I write one, I get a new intermediate file in tempdir().  I do
> not have enough space in my temporary folder to store all of these
> intermediates.  I believe these intermediate files back the
> GDALTransientDataset objects created by create2GDAL called from
> writeGDAL (I think), which are then copied to a data drive by
> saveDataset.  After saveDataset, though, the transient object is
> orphaned.
>
> Is it possible to tell rgdal to remove these transients after
> writing/saveDataset?  Alternatively, is it possible to tell rgdal to
> write these intermediates to a particular location?
>
> I can think of two workarounds, but I'd love to hear better ideas.  I
> could redirect R's tempdir, although this is rather inconvenient.  I
> can also try to detect the temporary files and delete them manually,
> although this is probably driver- and version-specific and so less
> robust than I would prefer.

Thanks for the report. A long time ago, there must have been an issue 
here, because a GDAL.close() - on the wrong object - was commented out. 
After checking, I've committed a fix to the rgdal R-forge project. If you 
can install rgdal from source, I'd be grateful for feedback on that; if 
you need a Windows binary, please let me know, and I'll submit the source 
package to win-builder to create one.

Roger

>
> Cheers,
> Oliver
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From dlarsen at tulane.edu  Fri Sep 21 23:50:16 2012
From: dlarsen at tulane.edu (dlarsen)
Date: Fri, 21 Sep 2012 14:50:16 -0700 (PDT)
Subject: [R-sig-Geo] Extracting weird temperature and EVI values from MODIS
	data
Message-ID: <1348264216919-7581006.post@n2.nabble.com>

Hi all,

I am trying to generate temperature and EVI for points in my dataset, but
the values I am extracting are strange.  The EVI values range from 627 -
9149 with a mean of 4912.861.  The EVI values range from 14933 to 15800 with
a mean of 15549.66.  Is there some type of conversion that I am missing? 
Here are the steps I took.  (I know many of them are inefficient, but I am
doing this for my dissertation without a lot of support).

1.  Download HDF files using Earth Explorer
2.  Use MODIS Reprojection tool to convert to vegetation indices and
temperature tif files.
3.  Use the raster package in R to extract the values of the tif file to
spatial points.

Any help would be appreciated.

Thank you,
David



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extracting-weird-temperature-and-EVI-values-from-MODIS-data-tp7581006.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From basille at ase-research.org  Sat Sep 22 02:37:20 2012
From: basille at ase-research.org (basille at ase-research.org)
Date: Fri, 21 Sep 2012 20:37:20 -0400
Subject: [R-sig-Geo] FANTER analysis with abundance data
In-Reply-To: <5045DEF7.4030404@ebd.csic.es>
References: <5045DEF7.4030404@ebd.csic.es>
Message-ID: <505D0840.7040700@ase-research.org>

Dear Carolina,

Please update to the new version of the package (adehabitatHS), which now 
uses sp spatial classes. The example now shows:

Dp <- slot(count.points(locs,map), "data")[,1]

which is exactly comparable to your spreadsheet. If you can associate each 
row of the weight table to the corresponding row (pixel) of the 
environmental variables, you're done.

Hope this helps,
Mathieu.


Le 04/09/2012 06:59, Carolina Soto Navarro a ?crit :
> I'd like to implement the FANTER analysis, described in Calenge
> & Basille (2008)but I have a problem with the vector of utilization weights...
>
> In the adehabitat examples, the authors use the code
>
> Dp <- count.points(locs, kasc)[litab$index]
>
> to get the named vector of utilization weights (calculated by numbering the
> locations of chamois groups in each pixel of the map) but in my case what
> I have is an excel file with the number of tracks per grid (not georeferenced)
> detected of my specie standardized to 1 so I would like to know how can I
> use this dataset to perform this analysis because as I understand this is
> already a vector of utilization weights but I dont know how to import it to R.
>
> Thanks!!
>
> Carolina
>
>

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From forrest at ufl.edu  Sat Sep 22 05:40:50 2012
From: forrest at ufl.edu (Forrest Stevens)
Date: Fri, 21 Sep 2012 23:40:50 -0400
Subject: [R-sig-Geo] Extracting weird temperature and EVI values from
 MODIS data
In-Reply-To: <1348264216919-7581006.post@n2.nabble.com>
References: <1348264216919-7581006.post@n2.nabble.com>
Message-ID: <CAEBQMMm7NpBbTETcvN8oordK6jbs-iX+eWxSLgG+2vKC3Kc3gQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120921/24889664/attachment.pl>

From sluedtke at gfz-potsdam.de  Sat Sep 22 13:30:55 2012
From: sluedtke at gfz-potsdam.de (Stefan Luedtke)
Date: Sat, 22 Sep 2012 13:30:55 +0200
Subject: [R-sig-Geo] plotting holes of esri shape files
In-Reply-To: <CAGfc75k0dfRQ-YteaiKaAWXa_aLSnHe4phFmRVWh3F0vKwp7vg@mail.gmail.com>
References: <1348128123.2384.14.camel@hydro44>
	<CAGfc75k0dfRQ-YteaiKaAWXa_aLSnHe4phFmRVWh3F0vKwp7vg@mail.gmail.com>
Message-ID: <1348313455.2335.33.camel@hydro44>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120922/13d65749/attachment.pl>

From maogui.hu at gmail.com  Mon Sep 24 03:55:43 2012
From: maogui.hu at gmail.com (maogui.hu)
Date: Mon, 24 Sep 2012 09:55:43 +0800
Subject: [R-sig-Geo] gIntersection error in rgeos package
Message-ID: <201209240955432519441@gmail.com>

Hi all,
I found a problem when using the "gIntersection" in rgeos for two lines. The expected result is a long line shared by two lines. However, the result I obtained is a short line (a part of the afore mentioned long line). I have tried to change the setScale() value for different operation precision. But the result is almost the same. I think may be it is a bug of the function. Attached are the data, r code and results. Can anybody help me to solve it? thanks very much.

require(maptools)
require(rgeos)

ws <- "E:/testdata/"
sline1 <- readShapeLines(file.path(ws, "Line01.shp"))
sline2 <- readShapeLines(file.path(ws, "Line02.shp"))

Intersection <- function(line1, line2)
{
gL <- c()
nLength <- 0
for(s in 10^c(-2:8))
{
setScale(s)
gL0 <- gIntersection(line1, line2)
if(gLength(gL0) > nLength) 
{
gL <- gL0
nLength <- gLength(gL)
}
}
setScale()
return(gL)
}

par(mfrow=c(2,2))
plot(sline1, col="red")
plot(sline2, col="blue")
plot(rbind.SpatialLines(sline1, sline2, makeUniqueIDs=TRUE), col=c("red","blue"))
rslt <- Intersection(sline1, sline2)
plot(rslt, col="green")




maogui.hu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/13492c6e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: expected result.png
Type: application/octet-stream
Size: 14832 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/13492c6e/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: intersection.png
Type: application/octet-stream
Size: 8789 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/13492c6e/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rgeos_check2.r
Type: application/octet-stream
Size: 623 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/13492c6e/attachment-0002.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testdata.zip
Type: application/octet-stream
Size: 3840 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/13492c6e/attachment-0003.obj>

From moshersteven at gmail.com  Mon Sep 24 07:27:38 2012
From: moshersteven at gmail.com (steven mosher)
Date: Sun, 23 Sep 2012 22:27:38 -0700
Subject: [R-sig-Geo] color schemes for landcover plots of multiple rasters
Message-ID: <CAFFLneRsK9rG8L4pgAHqqkhbcHNSOcixoKroFzhT_tN8vKDN1A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120923/cf5b3770/attachment.pl>

From Roger.Bivand at nhh.no  Mon Sep 24 10:21:38 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 24 Sep 2012 10:21:38 +0200 (CEST)
Subject: [R-sig-Geo] gIntersection error in rgeos package
In-Reply-To: <201209240955432519441@gmail.com>
References: <201209240955432519441@gmail.com>
Message-ID: <alpine.LRH.2.02.1209240930100.25633@reclus.nhh.no>

On Mon, 24 Sep 2012, maogui.hu wrote:

> Hi all, I found a problem when using the "gIntersection" in rgeos for 
> two lines. The expected result is a long line shared by two lines. 
> However, the result I obtained is a short line (a part of the afore 
> mentioned long line). I have tried to change the setScale() value for 
> different operation precision. But the result is almost the same. I 
> think may be it is a bug of the function. Attached are the data, r code 
> and results. Can anybody help me to solve it? thanks very much.

Hi,

I think that this is a noding problem. sline1 has a long line along its 
northern boundary, which visually overlaps the segment in sline2 on the 
northern edge of the "bay" extending from the west. However, there is no 
node in sline1 matching the node where sline2 turns north-west, then 
north. The C interface that rgeos uses does not seem to offer noding; 
it is deeper in the C++ code.

What you are trying to do is to approximate the results you might get from 
a topological GIS, that is boundary line lengths between contiguous 
polygons. Usually, topological GIS will node line segments before 
cleaning. Curiously, your shapefiles contain LEFT_FID RIGHT_FID 
attributes, so somewhere the data have been in a topological GIS.

I did try:

row.names(sline2) <- "1"
slines12 <- rbind.SpatialLinesDataFrame(sline1, sline2)
spoly12 <- gPolygonize(slines12)
slines12a <- as(spoly12, "SpatialLines")
gI1 <- gIntersection(slines12a[1], slines12a[2])

but the result is unchanged, not surprisingly, as ?gPolygonize says that 
"Linestrings are expected to be fully noded, as such they must not cross 
and must touch only at endpoints."

On reading:

writeOGR(SpatialPolygonsDataFrame(spoly12, data=as(slines12,
  "data.frame")), ".", "spoly12", driver="ESRI Shapefile")

into GRASS, I see:

v.in.ogr dsn=/home/rsb/tmp/bigshape/rgeos/spoly12.shp layer=spoly12 
output=spoly12
Layer: spoly12
Counting polygons for 2 features...
Importing map 2 features...
...
-----------------------------------------------------
Cleaning polygons, result is not guaranteed!
-----------------------------------------------------
...
Building topology for vector map <spoly12_tmp>...
Building areas...
3 areas built
1 isles built
Attaching islands...
Number of nodes: 4
Number of primitives: 12
Number of points: 0
Number of lines: 0
Number of boundaries: 12
Number of centroids: 0
Number of areas: 3
Number of isles: 1
Number of areas without centroid: 3
-----------------------------------------------------
Find centroids for layer: spoly12
-----------------------------------------------------
Write centroids:
1 areas represent more (overlapping) features, because polygons overlap in 
input layer(s). Such areas are linked to more than 1 row in attribute 
table. The number of features for those areas is stored as category in 
layer 2
-----------------------------------------------------
2 input polygons
Total area: 1.84677E+08 (3 areas)
Overlapping area: 183.124 (1 areas)
Area without category: 0 (0 areas)
-----------------------------------------------------
Building topology for vector map <spoly12>...
Registering primitives...
8 primitives registered
177 vertices registered
Building areas...
3 areas built
1 isles built
Attaching islands...
Attaching centroids...
Number of nodes: 6
Number of primitives: 8
Number of points: 0
Number of lines: 0
Number of boundaries: 5
Number of centroids: 3
Number of areas: 3
Number of isles: 1

So rgeos/GEOS are being confused by the input topologies, in which lines 
that appear to coincide actually do not, and in which the line segments do 
not share the same end points. Reading the polygons back into R from 
GRASS, I get the same intersection length. So I'm afraid that the issue is 
in the input data, which contains a tiny overlap between the polygons, 
leading to a mismatch between the lines. The overlap is only 183 square 
metres, so is not visible on plots.

I think that the only way to repair the data is to add extra nodes, and 
snap them using a digitizer in a GIS, or possibly to edit the coordinates 
of sline1 manually to ensure that they match those of that part of sline2 
as closely as possible.

Hope this clarifies,

Roger

>
> require(maptools)
> require(rgeos)
>
> ws <- "E:/testdata/"
> sline1 <- readShapeLines(file.path(ws, "Line01.shp"))
> sline2 <- readShapeLines(file.path(ws, "Line02.shp"))
>
> Intersection <- function(line1, line2)
> {
> gL <- c()
> nLength <- 0
> for(s in 10^c(-2:8))
> {
> setScale(s)
> gL0 <- gIntersection(line1, line2)
> if(gLength(gL0) > nLength)
> {
> gL <- gL0
> nLength <- gLength(gL)
> }
> }
> setScale()
> return(gL)
> }
>
> par(mfrow=c(2,2))
> plot(sline1, col="red")
> plot(sline2, col="blue")
> plot(rbind.SpatialLines(sline1, sline2, makeUniqueIDs=TRUE), col=c("red","blue"))
> rslt <- Intersection(sline1, sline2)
> plot(rslt, col="green")
>
>
>
>
> maogui.hu

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From drhwang3000 at gmail.com  Mon Sep 24 10:36:57 2012
From: drhwang3000 at gmail.com (gum hwang)
Date: Mon, 24 Sep 2012 17:36:57 +0900
Subject: [R-sig-Geo] Please help to solve "Error in spml model" in SPLM of R
Message-ID: <CAOS0FYCA4Vy5iWySpO4nmtsc0roSD55qpnVJnvg4f71vuQ_PYQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/3b52d1fc/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Mon Sep 24 11:44:11 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Mon, 24 Sep 2012 11:44:11 +0200
Subject: [R-sig-Geo] Antw: Extracting weird temperature and EVI values from
 MODIS data
Message-ID: <5060478C0200002700015CF0@gwia2.boku.ac.at>

Dear David,

lets say you are getting the EVI from MOD13Q1 product:
https://lpdaac.usgs.gov/products/modis_products_table/mod13q1
scroll down and click on layers.
Here you find every infromation about scaling and in case of EVI it is :
layer Name: 250m 16 days EVI
Units: EVI
bit type: 16-bit signed integer
Fill value (NA): -3000
valid range: -2000 to 10000
scaling factor: 0.0001

so you have to multiply each EVI value by 0.0001 (or divide by 10000).

for the LST product (ie Mod11a2) see:
https://lpdaac.usgs.gov/products/modis_products_table/mod11a2
the scaling factor is 0.02
...

Now a little advertisement for my MODIS package may give it a try for the steps you have described.

setRepositories() # add omegahat and r-forge
install.packages("MODIS")
MODIS:::checkDeps() # and do what it is suggesting you the enable all the functionalities
# on the first load the package is asking you to read the configuration file. I think settings are quite fine and you can just use the file.copy(.....) command it is printing out.

# here you can print the package settings ("outPath" for example, where you find your data after processing)
MODIS:::.getDef()

# now you should be able to work with it, but since you probably already have downloaded data use the orgStruc() command to fetch MODIS gird data on you computer and store it in a dedicated and managed location.
# please read carefully the help of this function!!!
orgStruc(source="root/folder/of/you/modishdffiles") 

# now you download and process the data with:

# you are using LINUX (or MAC is probably the same) than use the function runGdal() since it is better implemented and you have more control on the output!
runGdal( product="M.D13Q1", job="myEVIgdal", SDSstring="01", begin="2011001", end="2011-02-28") # in this case you can select the area interactively.
runGdal (product="M.D13Q1", job="myEVIgdla", SDSstring="01", begin="2011001", end="2011-02-28", extent="austria") # in this case you downlad the country of Austria. 

runGdal( product="M.D13Q1", job="myEVIgdal", SDSstring="01", begin="2011001", end="2011-02-28", extent="any/raster/file.gdalsupported") # and in this case you will get the extent, pixelsize, projection of you raster file.

# see ?runGdal for all options


# if you are using Windows, you have to use MRT since the use of GDAL (FWTools) is hanging on a very small but tricky problem.


runMrt( product="M.D13Q1", job="myEVImrt", SDSstring="01", begin="2011001", end="2011-02-28") # in this case you can select the area interactively.
runMrt( product="M.D13Q1", job="myEVImrt", SDSstring="01", begin="2011001", end="2011-02-28", extent="austria") # in this case you downlad the country of Austria. 
runMrt( product="M.D13Q1", job="myEVImrt", SDSstring="01", begin="2011001", end="2011-02-28", extent="austria", outProj="UTM") # in this case you downlad the country of Austria and ptoject to UTM (zone can be set but MRT detects is automaticly). 

The same thing you can do with any other MODIS Land Grid files, run:
getProduct() 
# or
getProduct("M.D13") # using regEx

Matteo



>>> dlarsen  21.09.12 23.51 Uhr >>>
Hi all,

I am trying to generate temperature and EVI for points in my dataset, but
the values I am extracting are strange.  The EVI values range from 627 -
9149 with a mean of 4912.861.  The EVI values range from 14933 to 15800 with
a mean of 15549.66.  Is there some type of conversion that I am missing? 
Here are the steps I took.  (I know many of them are inefficient, but I am
doing this for my dissertation without a lot of support).

1.  Download HDF files using Earth Explorer
2.  Use MODIS Reprojection tool to convert to vegetation indices and
temperature tif files.
3.  Use the raster package in R to extract the values of the tif file to
spatial points.

Any help would be appreciated.

Thank you,
David



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extracting-weird-temperature-and-EVI-values-from-MODIS-data-tp7581006.html
Sent from the R-sig-geo mailing list archive at Nabble.com.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Mon Sep 24 14:56:50 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 24 Sep 2012 14:56:50 +0200
Subject: [R-sig-Geo] cross-variograms and relationship strength
In-Reply-To: <4DFD7C68C50FE54A98C0D43A76E08E08054787@uqexmdb6.soe.uq.edu.au>
References: <4DFD7C68C50FE54A98C0D43A76E08E08054787@uqexmdb6.soe.uq.edu.au>
Message-ID: <50605892.3090101@uni-muenster.de>

If you want to think "direct" correlation, you'd have to compare the
semivariance function values and cross variogram value at short lag
distances. If you consider the sills at a larger lag distance, it is
spatial cross correlation: how strongly is variable A at location x
related to variable B at location x+h? Zero cross semivariances indicate
zero spatial cross correlation, positive ones positive correlation and
then there's the Cauchy-Schwarz inequality at both boundaries.

On 09/20/2012 01:40 AM, Michael Hewson wrote:
> Please excuse this basic question - I'm a bit befuddled.
> 
> If I have two cross-variograms - both with the same two variables.
> Both sill at about the same range.
> One has a higher cross-semivariance value at that range.
> Does that mean it has a "stronger" relationship - in a correlation sense? Or does the greater value for cross-semivariance indicate more "variance" hence less strength? Or can one not make any judgement on relationship strength from the cross-semivariance sill?
> 
> Michael Hewson | PhD candidate
> Climate Research Group<http://www.gpem.uq.edu.au/crg> | Biophysical Remote Sensing Group<http://www.gpem.uq.edu.au/brg>
> The University of Queensland | Brisbane Q 4072 Australia
> +61(0)408379373 | m.hewson at uq.edu.au<mailto:m.hewson at uq.edu.au>
> [cid:image003.png at 01CD9713.FFFDD350]
> 
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From vickythakre at gmail.com  Mon Sep 24 17:23:29 2012
From: vickythakre at gmail.com (Bhupendrasinh Thakre)
Date: Mon, 24 Sep 2012 10:23:29 -0500
Subject: [R-sig-Geo] Latitude Longitude to SPDF
In-Reply-To: <CAD0Y9eFBqAj9qi4Kq7Ra6Lo3GtHT6Y4=yqiDJ8vDEoU-0VGbOg@mail.gmail.com>
References: <CAD0Y9eFBqAj9qi4Kq7Ra6Lo3GtHT6Y4=yqiDJ8vDEoU-0VGbOg@mail.gmail.com>
Message-ID: <CAD0Y9eHKFEHEe1U03mtMHRt=inhajS7Fk7m=M+OaKu55vcMy=w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/de9980af/attachment.pl>

From maogui.hu at gmail.com  Mon Sep 24 17:53:31 2012
From: maogui.hu at gmail.com (maogui.hu)
Date: Mon, 24 Sep 2012 23:53:31 +0800
Subject: [R-sig-Geo] Latitude Longitude to SPDF
References: <CAD0Y9eFBqAj9qi4Kq7Ra6Lo3GtHT6Y4=yqiDJ8vDEoU-0VGbOg@mail.gmail.com>,
	<CAD0Y9eHKFEHEe1U03mtMHRt=inhajS7Fk7m=M+OaKu55vcMy=w@mail.gmail.com>
Message-ID: <2012092423533106159712@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/f38df0eb/attachment.pl>

From etiennebr at gmail.com  Mon Sep 24 21:27:31 2012
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Mon, 24 Sep 2012 15:27:31 -0400
Subject: [R-sig-Geo] How to create a large raster and write it to disk
Message-ID: <CALjAYt6NzxNcdPX=UYqVtfnGuLQgmBt656XKh7MtaAoKK1TYKw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/e43fd169/attachment.pl>

From jeandaniel.sylvain at gmail.com  Mon Sep 24 23:10:33 2012
From: jeandaniel.sylvain at gmail.com (Jean-Daniel Sylvain)
Date: Mon, 24 Sep 2012 17:10:33 -0400
Subject: [R-sig-Geo] How to create a large raster and write it to disk
In-Reply-To: <CALjAYt6NzxNcdPX=UYqVtfnGuLQgmBt656XKh7MtaAoKK1TYKw@mail.gmail.com>
References: <CALjAYt6NzxNcdPX=UYqVtfnGuLQgmBt656XKh7MtaAoKK1TYKw@mail.gmail.com>
Message-ID: <CAEZcs9-NuxoZ29wXYeHiyvHXFYK0AAvBtPKVScFu9ApBJ33m+Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/f08646d8/attachment.pl>

From julian at hafro.is  Mon Sep 24 23:51:08 2012
From: julian at hafro.is (Julian Burgos)
Date: Mon, 24 Sep 2012 21:51:08 -0000 (GMT)
Subject: [R-sig-Geo] Latitude Longitude to SPDF
In-Reply-To: <2012092423533106159712@gmail.com>
References: <CAD0Y9eFBqAj9qi4Kq7Ra6Lo3GtHT6Y4=yqiDJ8vDEoU-0VGbOg@mail.gmail.com>,
	<CAD0Y9eHKFEHEe1U03mtMHRt=inhajS7Fk7m=M+OaKu55vcMy=w@mail.gmail.com>
	<2012092423533106159712@gmail.com>
Message-ID: <22503.85.197.227.93.1348523468.squirrel@www.hafro.is>

Or you can use the coordinates() function:

library(sp)
loc <- data.frame(x=c(23.1,19.0),y=c(43.2,45.5),value=c(200,100))
coordinates(loc) = c("x","y")

Applied on a data.frame it returns a SpatialPointsDataFrame object.
If you are going to use it with other spatial data, make sure to define
the data projection using proj4string().

-- 
Julian Mariano Burgos, PhD
Hafranns?knastofnunin/Marine Research Institute
Sk?lagata 4, 121 Reykjav?k, Iceland
S?mi/Telephone : +354-5752037
Br?fs?mi/Telefax:  +354-5752001
Netfang/Email: julian at hafro.is


> you can try SpatialPointsDataFrame() in sp package.
> for example:
>
> library(sp)
> loc <- data.frame(x=c(23.1,19.0),y=c(43.2,45.5),value=c(200,100))
> spdf <- SpatialPointsDataFrame(loc[,1:2], loc)
>
>
>
>
>
> Mao-Gui Hu
> State Key Laboratory of Resources and Environmental Information System
> Institute of Geographic Sciences and Natural Resources Research, Chinese
> Academy of Sciences
>
> From: Bhupendrasinh Thakre
> Date: 2012-09-24 23:23
> To: r-sig-geo
> Subject: [R-sig-Geo] Latitude Longitude to SPDF
> Hi Team,
>
> Need your guidance in building SPDF objects from Latitude, Longitude
> Information available.
> I am using package "plotGoogleMaps" which is really awesome but it
> requires
> SPDF objects to build the maps.I have a data frame which have Latitude and
> Longitude information and wanted to convert it in SPDF for making maps.
>
> Please help me to find suitable package or function to convert it. Or if I
> am missing something. I am really sorry but have very less experience when
> dealing with Spatial Data.
>
> Best Regards,
>
>
> Bhupendrasinh Thakre
>
> *Disclaimer :*
>
> The information contained in this communication is confi...{{dropped:11}}
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From sukumar2 at illinois.edu  Tue Sep 25 00:05:41 2012
From: sukumar2 at illinois.edu (Pritam Sukumar)
Date: Mon, 24 Sep 2012 17:05:41 -0500
Subject: [R-sig-Geo] Weird issue working while trying to process rasters in
	parallel
In-Reply-To: <CA+mSBw5UGdJvOX2ULDKuNsmUJ8QxayzcswdOBhrrAzdoY1AuJg@mail.gmail.com>
References: <CA+mSBw5UGdJvOX2ULDKuNsmUJ8QxayzcswdOBhrrAzdoY1AuJg@mail.gmail.com>
Message-ID: <CA+mSBw4FHYJ2MoWW0NEOFvEA8+KRJ9Y2P0d0WBxcwNwR+2TGLg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/5a41ded2/attachment.pl>

From tephilippi at gmail.com  Tue Sep 25 00:06:17 2012
From: tephilippi at gmail.com (Tom Philippi)
Date: Mon, 24 Sep 2012 15:06:17 -0700
Subject: [R-sig-Geo] color schemes for landcover plots of multiple
	rasters
In-Reply-To: <CAFFLneRsK9rG8L4pgAHqqkhbcHNSOcixoKroFzhT_tN8vKDN1A@mail.gmail.com>
References: <CAFFLneRsK9rG8L4pgAHqqkhbcHNSOcixoKroFzhT_tN8vKDN1A@mail.gmail.com>
Message-ID: <CALyPt8wmqO6G0FssY30QgdmzgairwSa5GeumrM2ayVs9k+KKaw@mail.gmail.com>

Steven--

I'm sure that there are several ways to do this, but I convert the
thematic raster to be a factor, then use the levels of that factor to
subset from my full color palette and plot the factor raster.

In my case I have a seamless geoTiff of NLCD 2006 Level1 data (NPS
makes NLCD, NALC, and CCAP data available as seamless geoTiffs, see
http://science.nature.nps.gov/im/monitor/npscape/index.cfm).  The tifs
come with a RAT (Raster Attribute Table) in the corresponding
*.tif.vat.dbf file, which gives class numbers, names, and Red Green
Blue values for our universal color scheme.  I read that into a
dataframe named NLCDclassesL1, and generate a Color value via rgb:

NLCDclassesL1 <-
foreign::read.dbf("E:/NPScape_2012/Seamless/GeoTIFFs/Landcover_Level1_NLCD2006.tif.vat.dbf",as.is=TRUE)
]
NLCDclassesL1$Color <- with(NLCDclassesL1,rgb(Red,Green,Blue))


If you don't have a RAT with colors defined, you can create your own
dataframe with ID (numeric, matching the values in your grid) and
Color with records for all possible classes, with ID==0 Color=NA for
the missing value class outside your polygon.

AOAc is the result of cropping the large raster to the extent of my
AOA polygon, then masking via rasterize().  It is still numeric, so I
create AOAf as thematic, generate the RAT via levels(), and glue on
the appropriate thematic colors and labels using match:

AOAf <- as.factor(AOAc)
rat <- levels(AOAf)[[1]]  # also has statistics of pixel counts
rat$landcover <-  NLCDclassL1$CLASSNAME[match(rat$ID,NLCDclassL1$Value)]
rat$Color <- NLCDclassL1$Color[match(rat$ID,NLCDclassL1$Value)]

plot(AOAf,col=rat$Color)

Note that you can associate your RAT with the raster file via levels()
<- or possibly ratify(), but the documentation is sketchy, so I don't
know how to get the right colors from an associated RAT file.

I'm still playing with trellis.par.set() to map the colors in spplot().

I hope that this helps; email for full example code.

Tom 2






On Sun, Sep 23, 2012 at 10:27 PM, steven mosher <moshersteven at gmail.com> wrote:
> I'm plotting a series ( a few hundred )  of  rasters that are filled with
> landcover data,   integers
>
> Normally, these are  integers such as  c(11,12,21,22,23,31,32,41,42,43,51,
>  etc etc)
> where each value corresponds to a landcover type.
>
> I want all of these plots to have consistent colors and legends. However,
> not every plot has
> a complete set of land cover types.   What I tried was the following.
>
> I took all the landcover values in the raster and reclassified them so that
> I got a  seq from
> 1..n.   and then I made a vector of colors the same length
>
> However, when a land type if missing I still get   errors.  I tried using
>  breaks() and that
> helped a little but I would still get  errors
>
> Here is a toy example
>
> r <- raster(nrow=10,ncol=10)
> #  slot in some values
> r[1:12]<-0
> r[13:34]<-1
> r[35:76]<-2
> r[77:95]<-3
> r[96:100]<-4
>
> #  define colors
> myColors <- c("black","green","orange","pink","blue")
>
> plot(r,col=myColors)
>
> #  swicth the 4 to 0
> r <- subs(r,data.frame(Id= c(0,1,2,3,4), v=c(0,1,2,3,0)))
>
> plot(r,col=myColors)
>
> Another way to ask this is how do I get the function to recognize that I
> watch categorical colors instead of
> continuous ones. or should I change the colors dynamically according to the
> actual values found in that
> particular map.
>
> I tried  breaks() no joy
>
>
> Steve
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From moshersteven at gmail.com  Tue Sep 25 01:36:44 2012
From: moshersteven at gmail.com (steven mosher)
Date: Mon, 24 Sep 2012 16:36:44 -0700
Subject: [R-sig-Geo] color schemes for landcover plots of multiple
	rasters
In-Reply-To: <CALyPt8wmqO6G0FssY30QgdmzgairwSa5GeumrM2ayVs9k+KKaw@mail.gmail.com>
References: <CAFFLneRsK9rG8L4pgAHqqkhbcHNSOcixoKroFzhT_tN8vKDN1A@mail.gmail.com>
	<CALyPt8wmqO6G0FssY30QgdmzgairwSa5GeumrM2ayVs9k+KKaw@mail.gmail.com>
Message-ID: <CAFFLneSbdxnYD2ZxWtCuE735rs5jd3stn2zLdzGJPtooYg+w1w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120924/833ce65a/attachment.pl>

From drhwang3000 at gmail.com  Tue Sep 25 02:27:59 2012
From: drhwang3000 at gmail.com (gum hwang)
Date: Tue, 25 Sep 2012 09:27:59 +0900
Subject: [R-sig-Geo] [r-sig-geo] Please help to solve error of spml model in
	SPLM of R
Message-ID: <CAOS0FYATkiT0WT9++=o61xpUTxgfw9ccL6mV_eCBp85re4Gq1g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120925/b57d405a/attachment.pl>

From Roger.Bivand at nhh.no  Tue Sep 25 09:33:45 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 25 Sep 2012 09:33:45 +0200 (CEST)
Subject: [R-sig-Geo] [r-sig-geo] Please help to solve error of spml
 model in	SPLM of R
In-Reply-To: <CAOS0FYATkiT0WT9++=o61xpUTxgfw9ccL6mV_eCBp85re4Gq1g@mail.gmail.com>
References: <CAOS0FYATkiT0WT9++=o61xpUTxgfw9ccL6mV_eCBp85re4Gq1g@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1209250928330.30947@reclus.nhh.no>

On Tue, 25 Sep 2012, gum hwang wrote:

> Howdy, Grus
>
> If this message is overlapped, please forgive me.
>
> I have some troubles with SPLM package of R.
> I am trying to estimate some parameters and their model using SPML in SPLM
> package of R.
> Could you tell me some tips to solve my problem below ?

Try:

lm(fm.2, data = mega.data, na.action=na.fail)

and see if you get the same error. It looks as though there are different 
numbers of observations on some variables. Also always run traceback() 
after any error you do not understand, to see the calling sequence of 
functions. Here model.frame.default() was the failing function, which is 
also called in lm(), hence my suggestion. It is also possible that you 
have multiple objects called Census, say both in the global environment 
and in mega.data.

Hope this clarifies,

Roger


>
> --------------------------------------------------------------------------------------------------------------------------------------------------------
> ...
> fm.2 <- mr2.tent ~ Census + Den + CmtSch + CmtPop + SchPop + StayPop +
> DayPop
>     + firm + firm500 + RegWrk + GrsWrk + MnfFirm + MnfReg+ MnfGrs
> ...
>> fespaterr <- spml(fm.2, data = mega.data, listw = mat2listw(megaww),
> model="within", spatial.error="b")
> Error in model.frame.default(object, data, xlev = xlev) :
>  variable lengths differ (found for 'Census')
>>
>
> For variaable reference,
> Y variable is mr2.tent.
> X variables are population and firm workers.
> Population is Census, Den, CmtSch, CmtPop, SchPop, StayPop,  DayPop.
> Firms are  firm and firm500.
> Firm workers are RegWrk, GrsWrk, MnfFirm, MnfReg,  MnfGrs.
> ----------------------------------------------------------------------------------------------------------------------------------------------------------
>
> I appreciate in advance,
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From juliachacon at gmail.com  Tue Sep 25 10:57:08 2012
From: juliachacon at gmail.com (Julia Chacon Labella)
Date: Tue, 25 Sep 2012 10:57:08 +0200
Subject: [R-sig-Geo] How to perform a variogram model in gstat?
Message-ID: <CAPsE2jz5qLmVUV+8sgh9T9WzDcKw1m_cdb=wo9J=fdUTZiSg1Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120925/00965f6b/attachment.pl>

From piero.campa at gmail.com  Tue Sep 25 11:19:37 2012
From: piero.campa at gmail.com (Piero Campalani)
Date: Tue, 25 Sep 2012 11:19:37 +0200
Subject: [R-sig-Geo] How to perform a variogram model in gstat?
In-Reply-To: <CAPsE2jz5qLmVUV+8sgh9T9WzDcKw1m_cdb=wo9J=fdUTZiSg1Q@mail.gmail.com>
References: <CAPsE2jz5qLmVUV+8sgh9T9WzDcKw1m_cdb=wo9J=fdUTZiSg1Q@mail.gmail.com>
Message-ID: <CAMp9JaMzi-eROHMpUsRwn7LQRj8Xd-dRcdh2Rz8TQLRgyy_BLA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120925/08b29ab5/attachment.pl>

From oscar.perpinan at gmail.com  Tue Sep 25 13:21:20 2012
From: oscar.perpinan at gmail.com (Oscar =?utf-8?B?UGVycGnDscOhbg==?= Lamigueiro)
Date: Tue, 25 Sep 2012 13:21:20 +0200
Subject: [R-sig-Geo] color schemes for landcover plots of multiple
	rasters
References: <CAFFLneRsK9rG8L4pgAHqqkhbcHNSOcixoKroFzhT_tN8vKDN1A@mail.gmail.com>
Message-ID: <87haqm1h73.fsf@gmail.com>

MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Although it is not fully automatic, you may be interested in this
example (http://procomun.wordpress.com/2012/02/20/maps_with_r_2/):
 library(raster)
 library(rasterVis)
 library(colorspace)
 ## http://neo.sci.gsfc.nasa.gov/Search.html?group=3D20
 landClass <- raster('241243rgb-167772161.0.TIFF')
 ## China and India
 ext <- extent(65, 135, 5, 55)
 landClass <- crop(landClass, ext)
 ## Codes: http://eoimages.gsfc.nasa.gov/images/news/NasaNews/ReleaseImages=
/LCC/Images/lcc_key.jpg
 landClass[landClass %in% c(0, 254)] <- NA
 landClass <- cut(landClass, c(0, 5, 11, 14, 16))
 classes <- c('FOR', 'LAND', 'URB', 'SNOW')
 nClasses <- length(classes)
 rng <- c(minValue(landClass), maxValue(landClass))
 ## define the breaks of the color key
 my.at <- seq(rng[1]-1, rng[2])
 ## the labels will be placed vertically centered
 my.labs.at <- seq(rng[1], rng[2])-0.5
 levelplot(landClass, at=3Dmy.at, margin=3DFALSE,
          col.regions=3Dterrain_hcl(nClasses),
          colorkey=3Dlist(labels=3Dlist(labels=3Dclasses, ## classes names =
as labels
                          at=3Dmy.labs.at)))
 I will try to modify rasterVis::levelplot to work automatically with
 categorical data.
 Best,
 Oscar.
steven mosher <moshersteven at gmail.com> writes:
 > I'm plotting a series ( a few hundred )  of  rasters that are filled with
 > landcover data,   integers
 >
 > Normally, these are  integers such as  c(11,12,21,22,23,31,32,41,42,43,5=
1,
 >  etc etc)
 > where each value corresponds to a landcover type.
 >
 > I want all of these plots to have consistent colors and legends. However,
 > not every plot has
 > a complete set of land cover types.   What I tried was the following.
 >
 > I took all the landcover values in the raster and reclassified them so t=
hat
 > I got a  seq from
 > 1..n.   and then I made a vector of colors the same length
 >
 > However, when a land type if missing I still get   errors.  I tried using
 >  breaks() and that
 > helped a little but I would still get  errors
 >
 > Here is a toy example
 >
 > r <- raster(nrow=3D10,ncol=3D10)
 > #  slot in some values
 > r[1:12]<-0
 > r[13:34]<-1
 > r[35:76]<-2
 > r[77:95]<-3
 > r[96:100]<-4
 >
 > #  define colors
 > myColors <- c("black","green","orange","pink","blue")
 >
 > plot(r,col=3DmyColors)
 >
 > #  swicth the 4 to 0
 > r <- subs(r,data.frame(Id=3D c(0,1,2,3,4), v=3Dc(0,1,2,3,0)))
 >
 > plot(r,col=3DmyColors)
 >
 > Another way to ask this is how do I get the function to recognize that I
 > watch categorical colors instead of
 > continuous ones. or should I change the colors dynamically according to =
the
 > actual values found in that
 > particular map.
 >
 > I tried  breaks() no joy
 >
 >
 > Steve
 >
 > 	[[alternative HTML version deleted]]
 --=20
 Oscar Perpi=C3=B1=C3=A1n Lamigueiro
 Dpto. Ingenier=C3=ADa El=C3=A9ctrica
 EUITI-UPM
Date: Tue, 25 Sep 2012 13:20:45 +0200
In-Reply-To: <CAFFLneRsK9rG8L4pgAHqqkhbcHNSOcixoKroFzhT_tN8vKDN1A at mail.gmai=
l.com>
	(steven mosher's message of "Sun, 23 Sep 2012 22:27:38 -0700")
Message-ID: <87ipb21h82.fsf at gmail.com>
User-Agent: Gnus/5.13 (Gnus v5.13) Emacs/24.2.50 (gnu/linux)


From carolina.lang at ifop.cl  Tue Sep 25 14:13:37 2012
From: carolina.lang at ifop.cl (Carolina Lang)
Date: Tue, 25 Sep 2012 09:13:37 -0300 (BRT)
Subject: [R-sig-Geo] How to perform a variogram model in gstat?
In-Reply-To: <CAPsE2jz5qLmVUV+8sgh9T9WzDcKw1m_cdb=wo9J=fdUTZiSg1Q@mail.gmail.com>
Message-ID: <26404434.41348575222046.JavaMail.SYSTEM@clangxp>

Dear Julia, 

About your question, the variogram fit depend on what you want!!!, 
if you just want to fit a model to describe structures you can choose many options like eyefit, Index GOF (Goodness of fit), AIC (Akaike) or RSS to decide which parameters, models and values select, If you want an interpolate data with kriging then you would use a cross validation to compares values.

Regards, 

Carolina Lang A. 
Investigador 

----- Mensaje original -----
De: "Julia Chacon Labella" <juliachacon at gmail.com>
Para: r-sig-geo at r-project.org
Enviados: Martes, 25 de Septiembre 2012 4:57:08 GMT -04:00 Georgetown
Asunto: [R-sig-Geo] How to perform a variogram model in gstat?

Please excuse these basic questions, but I am a bit lost in geostatistics.

I am trying to make a kriging of the soil properties of a plot. I am
already using gstat with R and I don't have any problems with the scripts
and so on...but, I don't really know how to choose the nugget, psill and
range for the variogram model. Moreover, I am not sure about how to include
the anisotropy in the model, I have already include a linar model in some
cases, to remove any trend.

I am following the steps recomended in the gstat help, but I am a bit
befuddled.

Let me show you my scripts (the psill, range and nugget are choosen just to
make the test).

coordinates(corg)= c("x", "y")

v = variogram(SOC~1, corg)

SSErr.a <- numeric(4)
names(SSErr.a) <- c("Exponencial","Esf?rico","
Gausiano","Lineal")
v.fit = fit.variogram(v, vgm(psill=0.18, model="Exp", range=5, nugget=0.1))
SSErr.a[1] = attr(v.fit, "SSErr")
v.fit = fit.variogram(v, vgm(psill=0.18, model="Sph", range=5, nugget=0.1))
SSErr.a[2] = attr(v.fit, "SSErr")
v.fit = fit.variogram(v, vgm(psill=0.18, model="Gau", range=5, nugget=0.1))
SSErr.a[3] = attr(v.fit, "SSErr")
v.fit = fit.variogram(v, vgm(psill=0.18, model="Lin", range=5, nugget=0.1))
SSErr.a[4] = attr(v.fit, "SSErr")
SSErr.a

v = variogram(SOC~x+y, corg)

SSErr.b <- numeric(4)
names(SSErr.b) <- c("Exponencial","Esf?rico","Gausiano","Lineal")
v.fit = fit.variogram(v, vgm(psill=0.18, model="Exp", range=5, nugget=0.1))
SSErr.b[1] = attr(v.fit, "SSErr")
v.fit = fit.variogram(v, vgm(psill=0.18, model="Sph", range=5, nugget=0.1))
SSErr.b[2] = attr(v.fit, "SSErr")
v.fit = fit.variogram(v, vgm(psill=0.18, model="Gau", range=5, nugget=0.1))
SSErr.b[3] = attr(v.fit, "SSErr")
v.fit = fit.variogram(v, vgm(psill=0.18, model="Lin", range=5, nugget=0.1))
SSErr.b[4] = attr(v.fit, "SSErr")
SSErr.b

Thanks a lot,
Cheers.

-- 

 Julia Chacon Labella [PhD candidate]

?rea de Biodiversidad y Conservaci?n

 Escuela Superior de Ciencias Experimentales y Tecnolog?a

 Universidad Rey Juan Carlos

 c/ Tulip?n, s/n.

 E-28933 M?stoles (Madrid)

 Espa?a


-- 
Julia

	[[alternative HTML version deleted]]


_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

------------------------------------------------------------------------------------------------
Certificacion ISO 9001/2000: Sistema de Datos Bio-Pesqueros (Iquique, Valparaiso y Talcahuano)

Acreditacion INN - ISO 17025: Determinacion de la edad de jurel y merluza comun


From drhwang3000 at gmail.com  Wed Sep 26 02:21:29 2012
From: drhwang3000 at gmail.com (gum hwang)
Date: Wed, 26 Sep 2012 09:21:29 +0900
Subject: [R-sig-Geo] [r-sig-geo] Please help to solve error of spml
 model in SPLM of R
In-Reply-To: <alpine.LRH.2.02.1209250928330.30947@reclus.nhh.no>
References: <CAOS0FYATkiT0WT9++=o61xpUTxgfw9ccL6mV_eCBp85re4Gq1g@mail.gmail.com>
	<alpine.LRH.2.02.1209250928330.30947@reclus.nhh.no>
Message-ID: <CAOS0FYB=zeCR2_QkKgKnFc9rVin6k3L2MUxeb3Rk32qOGdmTxw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120926/4ed11c1a/attachment.pl>

From moshersteven at gmail.com  Wed Sep 26 04:42:01 2012
From: moshersteven at gmail.com (steven mosher)
Date: Tue, 25 Sep 2012 19:42:01 -0700
Subject: [R-sig-Geo] color schemes for landcover plots of multiple
	rasters
In-Reply-To: <87haqm1h73.fsf@gmail.com>
References: <CAFFLneRsK9rG8L4pgAHqqkhbcHNSOcixoKroFzhT_tN8vKDN1A@mail.gmail.com>
	<87haqm1h73.fsf@gmail.com>
Message-ID: <CAFFLneS7x=HR-f_rxjMKuHHUOt7+pxSwPXOxPQJOm7d4sZ+eRA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120925/923da102/attachment.pl>

From moshersteven at gmail.com  Wed Sep 26 05:10:58 2012
From: moshersteven at gmail.com (steven mosher)
Date: Tue, 25 Sep 2012 20:10:58 -0700
Subject: [R-sig-Geo] color schemes for landcover plots of multiple
	rasters
In-Reply-To: <87haqm1h73.fsf@gmail.com>
References: <CAFFLneRsK9rG8L4pgAHqqkhbcHNSOcixoKroFzhT_tN8vKDN1A@mail.gmail.com>
	<87haqm1h73.fsf@gmail.com>
Message-ID: <CAFFLneTYXOJ+9OQL_BpK=iXpSPVWTB6HowZrhC07CwH766eTrg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120925/8e636e9a/attachment.pl>

From Roger.Bivand at nhh.no  Wed Sep 26 10:28:21 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 26 Sep 2012 10:28:21 +0200 (CEST)
Subject: [R-sig-Geo] [r-sig-geo] Please help to solve error of spml
 model in SPLM of R
In-Reply-To: <CAOS0FYB=zeCR2_QkKgKnFc9rVin6k3L2MUxeb3Rk32qOGdmTxw@mail.gmail.com>
References: <CAOS0FYATkiT0WT9++=o61xpUTxgfw9ccL6mV_eCBp85re4Gq1g@mail.gmail.com>
	<alpine.LRH.2.02.1209250928330.30947@reclus.nhh.no>
	<CAOS0FYB=zeCR2_QkKgKnFc9rVin6k3L2MUxeb3Rk32qOGdmTxw@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1209261020070.17704@reclus.nhh.no>

On Wed, 26 Sep 2012, gum hwang wrote:

> Hi Roger
>
> I have followed your advice.
> However, I had the same error like below:
>
> I'd welcome any comments from all of you.

You must check the lengths of each variable used - simplify to:

lm(mr2.tent ~ Census, data = mega.data)

first. If the error is still there, you know which variables to check. 
This is very basic stuff, if you have missing values, you must drop those 
observations. Try any(is.na()) too on each variable to find NAs.

Roger

>
>> mega.lm <- lm(
> +
> +         mr2.tent ~ as.numeric(Census) + as.numeric(Den)
> +         + as.numeric(CmtSch) + as.numeric(CmtPop)
> +         + as.numeric(SchPop) + as.numeric(StayPop) + as.numeric(DayPop)
> +         + as.numeric(firm) + as.numeric(firm500)
> +         + as.numeric(RegWrk) + as.numeric(GrsWrk)
> +         + as.numeric(MnfFirm) + as.numeric(MnfReg) + as.numeric(MnfGrs)
> +
> + , data = mega.data) ###, na.action=na.fail)
> Error in model.frame.default(formula = mr2.tent ~ as.numeric(Census) +  :
>  variable lengths differ (found for 'as.numeric(Census)')
>>
>
>
>
> On Tue, Sep 25, 2012 at 4:33 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Tue, 25 Sep 2012, gum hwang wrote:
>>
>>  Howdy, Grus
>>>
>>> If this message is overlapped, please forgive me.
>>>
>>> I have some troubles with SPLM package of R.
>>> I am trying to estimate some parameters and their model using SPML in SPLM
>>> package of R.
>>> Could you tell me some tips to solve my problem below ?
>>>
>>
>> Try:
>>
>> lm(fm.2, data = mega.data, na.action=na.fail)
>>
>> and see if you get the same error. It looks as though there are different
>> numbers of observations on some variables. Also always run traceback()
>> after any error you do not understand, to see the calling sequence of
>> functions. Here model.frame.default() was the failing function, which is
>> also called in lm(), hence my suggestion. It is also possible that you have
>> multiple objects called Census, say both in the global environment and in
>> mega.data.
>>
>> Hope this clarifies,
>>
>> Roger
>>
>>
>>
>>
>>> ------------------------------**------------------------------**
>>> ------------------------------**------------------------------**
>>> ------------------------------**--
>>> ...
>>> fm.2 <- mr2.tent ~ Census + Den + CmtSch + CmtPop + SchPop + StayPop +
>>> DayPop
>>>     + firm + firm500 + RegWrk + GrsWrk + MnfFirm + MnfReg+ MnfGrs
>>> ...
>>>
>>>> fespaterr <- spml(fm.2, data = mega.data, listw = mat2listw(megaww),
>>>>
>>> model="within", spatial.error="b")
>>> Error in model.frame.default(object, data, xlev = xlev) :
>>>  variable lengths differ (found for 'Census')
>>>
>>>>
>>>>
>>> For variaable reference,
>>> Y variable is mr2.tent.
>>> X variables are population and firm workers.
>>> Population is Census, Den, CmtSch, CmtPop, SchPop, StayPop,  DayPop.
>>> Firms are  firm and firm500.
>>> Firm workers are RegWrk, GrsWrk, MnfFirm, MnfReg,  MnfGrs.
>>> ------------------------------**------------------------------**
>>> ------------------------------**------------------------------**
>>> ------------------------------**----
>>>
>>> I appreciate in advance,
>>>
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From drhwang3000 at gmail.com  Thu Sep 27 10:49:01 2012
From: drhwang3000 at gmail.com (gum hwang)
Date: Thu, 27 Sep 2012 17:49:01 +0900
Subject: [R-sig-Geo] [r-sig-geo] Please help to solve error of spml
	model in SPLM of R
In-Reply-To: <alpine.LRH.2.02.1209250928330.30947@reclus.nhh.no>
References: <CAOS0FYATkiT0WT9++=o61xpUTxgfw9ccL6mV_eCBp85re4Gq1g@mail.gmail.com>
	<alpine.LRH.2.02.1209250928330.30947@reclus.nhh.no>
Message-ID: <CAOS0FYAPYNHn0KS-aeT6-YTDLNuTMAbVH86v5FhdGwitw4drrA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120927/5733e6d3/attachment.pl>

From johannesradinger at gmail.com  Thu Sep 27 11:46:24 2012
From: johannesradinger at gmail.com (Johannes Radinger)
Date: Thu, 27 Sep 2012 11:46:24 +0200
Subject: [R-sig-Geo] NaN / NA values in SpatialPixelDataFrame conversion
Message-ID: <CABsGe_y29ZhGeRpAJenW0sPvdOQRXXNSwoLdo8pzZ39J+CbXYQ@mail.gmail.com>

Hi,

I load a bunch of raster maps (geotiffs) and stack them to a
rasterstack called "rast".
This rasterstack can be sucessfully transformed into a
SpatialPixelsDataFrame SPDF and
afterwards into a data.frame with as.data.frame. The procedure itself
works there
is just the problem that the NA values from the SPDF are transformed
into NaNs when
I use as.data.frame(...)

Here how I load and transform my raster maps:

#### get data
rast <- stack(list.files(path="path/to/my/rastermaps", full.names=TRUE))

#convert raster to spatial pixels dataframe
rast.spdf <- as(rast, "SpatialPixelsDataFrame")
rast.df <- as.data.frame(rast,xy=TRUE,optional=FALSE)

I am not sure but is this behaviour new after an update? Is
there any setting in as.data.frame which can be used to get NAs instead
of NaNs, Or do I need to transform them in a subsequent step?

cheers,
Johannes


From thi_veloso at yahoo.com.br  Thu Sep 27 15:41:03 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Thu, 27 Sep 2012 06:41:03 -0700 (PDT)
Subject: [R-sig-Geo] Create a raster brick from a netcdf using all levels
Message-ID: <1348753263.41116.YahooMailNeo@web121903.mail.ne1.yahoo.com>

? Dear list,

? I have a netcdf file that contains 6 levels. Below is the structure of the file:

require(ncdf)
require(raster)
> nctemp <- open.ncdf('/data/input-inland/soita.clay.nc')

> nctemp
[1] "file /data/input-inland/soita.clay.nc has 5 dimensions:"
[1] "longitude ? Size: 720"
[1] "latitude ? Size: 360"
[1] "layer ? Size: 6"
[1] "time ? Size: 1"
[1] "lengthd ? Size: 10"
[1] "------------------------"
[1] "file /data/input-inland/soita.clay.nc has 1 variables:"
[1] "double claypct[longitude,latitude,layer,time] ?Longname:claypct Missval:1e+30"
>
??
? What I need to do is to load this netcdf to a brick raster object using all levels. When creating the brick file, specifying "nl=6" results in loading only the last level:

> clay <- brick('/data/input-inland/soita.clay.nc', nl=6)
Warning messages:
1: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
? "level" set to 1 (there are 6 levels)
2: In .doTime(r, nc, zvar, dim3, ncdf4) : assuming a standard calender:0
> clay
class ? ? ? : RasterBrick?
dimensions ?: 360, 720, 259200, 1 ?(nrow, ncol, ncell, nlayers)
resolution ?: 0.5, 0.5 ?(x, y)
extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84?
data source : /data/input-inland/soita.clay.nc?
names ? ? ? : X1958.01.01?
Date ? ? ? ?: 1958-01-01?
varname ? ? : claypct?
level ? ? ? : 1?

? I have also tested another approach, for example specifying "nl=1:6", however with no sucess at all.?Does anyone know a workaround to load all leves of a netcdf file in a single raster brick object?

? Many thanks in advance,
? Thiago.


From laurawette at gmail.com  Thu Sep 27 17:48:50 2012
From: laurawette at gmail.com (Laura Wette)
Date: Thu, 27 Sep 2012 17:48:50 +0200
Subject: [R-sig-Geo] apply autofitVariogram() to already calculated
	variograms
Message-ID: <CADfOX6x-MvVur5wxskM748Qu_KssJVfKSdy4Sadep6hLLckkSQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120927/dca8b1bc/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Sep 27 19:25:35 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 27 Sep 2012 19:25:35 +0200
Subject: [R-sig-Geo] apply autofitVariogram() to already calculated
	variograms
In-Reply-To: <CADfOX6x-MvVur5wxskM748Qu_KssJVfKSdy4Sadep6hLLckkSQ@mail.gmail.com>
References: <CADfOX6x-MvVur5wxskM748Qu_KssJVfKSdy4Sadep6hLLckkSQ@mail.gmail.com>
Message-ID: <50648C0F.8050608@uni-muenster.de>

Why don't you modify autofitVariogram such that you feed it with a
sample variogram rather than point data? Seems like the main thing
involved is removing code...

On 09/27/2012 05:48 PM, Laura Wette wrote:
> Dear mailing list,
> 
> I have to fit several (more than 150) variograms. I found the function
> autofitVariogram(), which fits the best model automatically to variograms.
> But I have problems with the usage of the function because of this reason:
> I created the variograms before as I just need a selection of all the point
> pairs (I just need those pairs which include the center point of a polygon,
> e. g. row number 1 in input data frame). Unfornunately, autofitVariogram()
> wants to estimate the variogram on its own. Is there a possibility that
> autofitVariograms can handle objects of class "gstatVariogram" as well? You
> can see my code below.
> 
> library(gstat)
> loadMeuse()
> 
> ## generate a variogram where I can see each combination of points in the
> ## columns "left" and "right". The numbers are the row indexes of the input
> ## data frame
>> v = variogram(log(zinc)~1, meuse, cloud=TRUE)
>> v[1:10,]
>         dist       gamma dir.hor dir.ver   id left right
> 1   70.83784 0.006065804       0       0 var1    2     1
> 2  118.84864 0.109534743       0       0 var1    3     1
> 3  141.56624 0.167153095       0       0 var1    3     2
> 4  259.23927 0.952808244       0       0 var1    4     1
> 5  282.85155 1.110920725       0       0 var1    4     2
> 6  143.17123 0.416229664       0       0 var1    4     3
> 7  366.31407 0.890852716       0       0 var1    5     1
> 8  362.64032 1.043938763       0       0 var1    5     2
> 9  251.02390 0.375633672       0       0 var1    5     3
> 10 154.26276 0.001041290       0       0 var1    5     4
> 
> ## extract point pairs where row 1 of input-data frame is contained.
> ## %/% stands for right, %% for left
> v1 = v[((v$np %/% attr(v, ".BigInt"))+1)==1 | v$np %% attr(v,
> ".BigInt"))+1==1,][1:10,]
>         dist       gamma dir.hor dir.ver   id left right
> 1   70.83784 0.006065804       0       0 var1    2     1
> 2  118.84864 0.109534743       0       0 var1    3     1
> 4  259.23927 0.952808244       0       0 var1    4     1
> 7  366.31407 0.890852716       0       0 var1    5     1
> 11 473.62960 0.833549786       0       0 var1    6     1
> 16 258.32151 0.586528972       0       0 var1    7     1
> 22 252.04960 0.426115526       0       0 var1    8     1
> 29 380.18943 0.583407369       0       0 var1    9     1
> 37 471.00849 1.479252663       0       0 var1   10     1
> 46 510.07548 1.424283374       0       0 var1   11     1
> 
>> class(v1)
> [1] "variogramCloud" "data.frame"
> 
> ## change the object-class of v1
> class(v1) = c("gstatVariogram", "data.frame")
> v1$np = rep(1, nrow(v1))
> 
> (at this point special thanks again to Edzer)
> 
> Now, it is feasible to apply fit.variogram() to v1. Isn't there any
> possibility to apply autofitVariogram()? I searched the Internet, but
> didn't found other possibilities to fit automatically. However, maybe there
> is another function I can use? I think making a for loop around
> fit.variogram isn't the right solution as all the variograms are very
> different and thus I cannot make any estimates for sill, etc. which fit
> each variogram.
> 
> Thanks for any answers in advance!
> Regards
> Laura
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jstruve at ufl.edu  Fri Sep 28 05:43:32 2012
From: jstruve at ufl.edu (Struve,Juliane)
Date: Fri, 28 Sep 2012 03:43:32 +0000
Subject: [R-sig-Geo] basic question about plotKML
Message-ID: <BFCE57D0BE7CBB42A581347DE375AF9A11556B32@UFEXCH-MBXN02.ad.ufl.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120928/7a1af18a/attachment.pl>

From roman.lustrik at gmail.com  Fri Sep 28 10:30:43 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Fri, 28 Sep 2012 10:30:43 +0200
Subject: [R-sig-Geo] basic question about plotKML
In-Reply-To: <BFCE57D0BE7CBB42A581347DE375AF9A11556B32@UFEXCH-MBXN02.ad.ufl.edu>
References: <BFCE57D0BE7CBB42A581347DE375AF9A11556B32@UFEXCH-MBXN02.ad.ufl.edu>
Message-ID: <CAHT1vphJzVjCm-K_9xskpaWTd+wfJrnGRdExOqvLfarRfmexqg@mail.gmail.com>

Your code works for me?

http://tinypic.com/r/iblw5w/6

Cheers,
Roman



On Fri, Sep 28, 2012 at 5:43 AM, Struve,Juliane <jstruve at ufl.edu> wrote:
>
> Dear list,
>
> I am trying to plot some spatial data in Google Earth but have a hard time with the plotKML manual. What is missing in my script that will make plotKML() work ?
>
> Thank you for your time,
>
> Juliane
>
> xc = round(runif(10,-1,1)+27.2, 2)
> yc = round(runif(10,-1,1)+-82.5, 2)
> xy = cbind(xc, yc)
> xy.sp = SpatialPoints(xy)
> df = data.frame(z1 = round(5 + rnorm(10), 2), z2 = 20:29)
> SP.spdf = SpatialPointsDataFrame(xy.sp, df)
> plot(SP.spdf)
> #add a projection
> proj4string(SP.spdf) = CRS("+proj=longlat +datum=WGS84")
> plotKML(SP.spdf)
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo




--
In God we trust, all others bring data.


From edzer.pebesma at uni-muenster.de  Fri Sep 28 11:21:49 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 28 Sep 2012 11:21:49 +0200
Subject: [R-sig-Geo] basic question about plotKML
In-Reply-To: <CAHT1vphJzVjCm-K_9xskpaWTd+wfJrnGRdExOqvLfarRfmexqg@mail.gmail.com>
References: <BFCE57D0BE7CBB42A581347DE375AF9A11556B32@UFEXCH-MBXN02.ad.ufl.edu>
	<CAHT1vphJzVjCm-K_9xskpaWTd+wfJrnGRdExOqvLfarRfmexqg@mail.gmail.com>
Message-ID: <50656C2D.7010308@uni-muenster.de>

For me this works too -- cold region. Did you update packages and R to
newest versions? Sending the output of sessionInfo() usually helps, when
asking help from the list.

On 09/28/2012 10:30 AM, Roman Lu?trik wrote:
> Your code works for me?
> 
> http://tinypic.com/r/iblw5w/6
> 
> Cheers,
> Roman
> 
> 
> 
> On Fri, Sep 28, 2012 at 5:43 AM, Struve,Juliane <jstruve at ufl.edu> wrote:
>>
>> Dear list,
>>
>> I am trying to plot some spatial data in Google Earth but have a hard time with the plotKML manual. What is missing in my script that will make plotKML() work ?
>>
>> Thank you for your time,
>>
>> Juliane
>>
>> xc = round(runif(10,-1,1)+27.2, 2)
>> yc = round(runif(10,-1,1)+-82.5, 2)
>> xy = cbind(xc, yc)
>> xy.sp = SpatialPoints(xy)
>> df = data.frame(z1 = round(5 + rnorm(10), 2), z2 = 20:29)
>> SP.spdf = SpatialPointsDataFrame(xy.sp, df)
>> plot(SP.spdf)
>> #add a projection
>> proj4string(SP.spdf) = CRS("+proj=longlat +datum=WGS84")
>> plotKML(SP.spdf)
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> 
> 
> --
> In God we trust, all others bring data.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From edzer.pebesma at uni-muenster.de  Fri Sep 28 13:18:18 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 28 Sep 2012 13:18:18 +0200
Subject: [R-sig-Geo] plotting holes of esri shape files
In-Reply-To: <1348128123.2384.14.camel@hydro44>
References: <1348128123.2384.14.camel@hydro44>
Message-ID: <5065877A.5090805@uni-muenster.de>

Stefan,

with the help of

http://www.stat.auckland.ac.nz/~paul/R/Paths/MurrellPaths.pdf

I corrected this in spplot. To run it, you'd need to compile from source
on svn, or source this in your R session:

https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/sp/R/spplot.R?root=rspatial

or wait for the next release on CRAN (due soon, I hope).

spplot now also supports holes in polygons when the polygons are the
main object to plot, contain holes, and something in the background
should shine through.

Building on the example in
https://stat.ethz.ch/pipermail/r-sig-geo/2012-September/016116.html

p1 = spplot(mask, col.regions='lightgrey',
    sp.layout = list("sp.grid", as(dem_ascii, "SpatialGridDataFrame"),
    col = bpy.colors(), first = TRUE), main = "spplot of mask")
p2 = spplot(dem_ascii, col.regions=bpy.colors(), main = "spplot of dem",
    sp.layout = list("sp.polygons", mask, fill = 'lightgray', first =
FALSE))
png('spplot.png', 600, 600)
print(p1, split = c(1,1,1,2), more = TRUE)
print(p2, split = c(1,2,1,2))
dev.off()

gives http://ifgi.uni-muenster.de/~epebe_01/spplot.png as output. Mind
the legends.

With best regards,

On 09/20/2012 10:32 AM, sluedtke wrote:
> Dear friends, 
> 
> 
> am trying to overlay a polygon data set as a SpatialPolygonDateFrame to
> an existing plot. The data set has a hole in the middle, and I do not
> want to have any filling in there. If a check the shape in a GIS,
> everything looks fine, but using the following commands to do the plot,
> the hole is filled. 
> 
> That is the code I am using, the data is attached. Thanks in advance!
> 
> Stefan
> 
> 
> 
> ################################################################################################
> 
> library(sp)
> library(rgdal)
> library(raster)
> library(latticeExtra)
> 
> 
> ###############################################################################################
> #read the DEM from the ASCII format
> 
> dem_ascii=raster(readGDAL("./zerafshan_mod_dem.asc"))
> 
> 
> ###############################################################################################
> # read additional data for printing
> mask=readOGR("./", "mask_zerafshan")
> 
> ###############################################################################################
> 
> #plot this stuff
> plot_dem=spplot(dem_ascii, col.regions=terrain.colors(400),
> colorkey=list(width=1, space="right"))+
> layer(sp.polygons(mask,fill="lightgray"))
> 
> print(plot_dem) 
> ################################################################################################
> 
> 
> 
> mask_zerafshan.dbf (110 bytes) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/0/mask_zerafshan.dbf>
> mask_zerafshan.prj (143 bytes) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/1/mask_zerafshan.prj>
> mask_zerafshan.shp (173K) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/2/mask_zerafshan.shp>
> mask_zerafshan.shx (150 bytes) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/3/mask_zerafshan.shx>
> zerafshan_mod_dem.asc (1M) <http://r-sig-geo.2731867.n2.nabble.com/attachment/7580992/4/zerafshan_mod_dem.asc>
> 
> 
> 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/plotting-holes-of-esri-shape-files-tp7580992.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jstruve at ufl.edu  Fri Sep 28 15:41:15 2012
From: jstruve at ufl.edu (Struve,Juliane)
Date: Fri, 28 Sep 2012 13:41:15 +0000
Subject: [R-sig-Geo] basic question about plotKML
In-Reply-To: <50656C2D.7010308@uni-muenster.de>
References: <BFCE57D0BE7CBB42A581347DE375AF9A11556B32@UFEXCH-MBXN02.ad.ufl.edu>
	<CAHT1vphJzVjCm-K_9xskpaWTd+wfJrnGRdExOqvLfarRfmexqg@mail.gmail.com>
	<50656C2D.7010308@uni-muenster.de>
Message-ID: <BFCE57D0BE7CBB42A581347DE375AF9A11557418@UFEXCH-MBXN02.ad.ufl.edu>

Hello,

Thank you very much for replying so quickly.

plotKML(SP.spdf) gives me an error message:
Plotting the first variable on the list
KML file header opened for parsing...
Parsing to KML...
Closing  SP.spdf.kml
Error in kml_compress(file.name = file.name) : 
KMZ generation failed. Wrong command passed to 'zip = ... option'.

sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
 [1] RSAGA_0.93-1       shapefiles_0.6     animation_2.1      plotKML_0.2-5     
 [5] dismo_0.7-23       scales_0.2.2       aqp_1.2-7          gstat_1.0-14      
 [9] spacetime_0.8-0    xts_0.8-6          zoo_1.7-7          Hmisc_3.9-3       
[13] survival_2.36-12   RColorBrewer_1.0-5 stringr_0.6.1      colorRamps_2.3    
[17] plotrix_3.4-5      colorspace_1.1-1   plyr_1.7.1         raster_2.0-12     
[21] pixmap_0.4-11      XML_3.9-4.1        rgdal_0.7-19       maptools_0.8-16   
[25] lattice_0.20-6     foreign_0.8-49     sp_0.9-99         

loaded via a namespace (and not attached):
[1] cluster_1.14.2  dichromat_1.2-4 grid_2.15.0     labeling_0.1   
[5] munsell_0.4     reshape_0.8.4   tools_2.15.0   

How can I get plotKML() to work on my example data ?

Best wishes,

Juliane 


-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
Sent: Friday, September 28, 2012 5:22 AM
To: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] basic question about plotKML

For me this works too -- cold region. Did you update packages and R to
newest versions? Sending the output of sessionInfo() usually helps, when
asking help from the list.

On 09/28/2012 10:30 AM, Roman Lu?trik wrote:
> Your code works for me?
> 
> http://tinypic.com/r/iblw5w/6
> 
> Cheers,
> Roman
> 
> 
> 
> On Fri, Sep 28, 2012 at 5:43 AM, Struve,Juliane <jstruve at ufl.edu> wrote:
>>
>> Dear list,
>>
>> I am trying to plot some spatial data in Google Earth but have a hard time with the plotKML manual. What is missing in my script that will make plotKML() work ?
>>
>> Thank you for your time,
>>
>> Juliane
>>
>> xc = round(runif(10,-1,1)+27.2, 2)
>> yc = round(runif(10,-1,1)+-82.5, 2)
>> xy = cbind(xc, yc)
>> xy.sp = SpatialPoints(xy)
>> df = data.frame(z1 = round(5 + rnorm(10), 2), z2 = 20:29)
>> SP.spdf = SpatialPointsDataFrame(xy.sp, df)
>> plot(SP.spdf)
>> #add a projection
>> proj4string(SP.spdf) = CRS("+proj=longlat +datum=WGS84")
>> plotKML(SP.spdf)
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> 
> 
> --
> In God we trust, all others bring data.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Fri Sep 28 17:35:37 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 28 Sep 2012 17:35:37 +0200
Subject: [R-sig-Geo] basic question about plotKML
In-Reply-To: <BFCE57D0BE7CBB42A581347DE375AF9A11557418@UFEXCH-MBXN02.ad.ufl.edu>
References: <BFCE57D0BE7CBB42A581347DE375AF9A11556B32@UFEXCH-MBXN02.ad.ufl.edu>
	<CAHT1vphJzVjCm-K_9xskpaWTd+wfJrnGRdExOqvLfarRfmexqg@mail.gmail.com>
	<50656C2D.7010308@uni-muenster.de>
	<BFCE57D0BE7CBB42A581347DE375AF9A11557418@UFEXCH-MBXN02.ad.ufl.edu>
Message-ID: <5065C3C9.3040202@uni-muenster.de>

try adding kmz = FALSE as argument to your plotKML call.

On 09/28/2012 03:41 PM, Struve,Juliane wrote:
> Hello,
> 
> Thank you very much for replying so quickly.
> 
> plotKML(SP.spdf) gives me an error message:
> Plotting the first variable on the list
> KML file header opened for parsing...
> Parsing to KML...
> Closing  SP.spdf.kml
> Error in kml_compress(file.name = file.name) : 
> KMZ generation failed. Wrong command passed to 'zip = ... option'.
> 
> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
> 
> locale:
> [1] LC_COLLATE=English_United States.1252 
> [2] LC_CTYPE=English_United States.1252   
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C                          
> [5] LC_TIME=English_United States.1252    
> 
> attached base packages:
> [1] splines   stats     graphics  grDevices utils     datasets  methods  
> [8] base     
> 
> other attached packages:
>  [1] RSAGA_0.93-1       shapefiles_0.6     animation_2.1      plotKML_0.2-5     
>  [5] dismo_0.7-23       scales_0.2.2       aqp_1.2-7          gstat_1.0-14      
>  [9] spacetime_0.8-0    xts_0.8-6          zoo_1.7-7          Hmisc_3.9-3       
> [13] survival_2.36-12   RColorBrewer_1.0-5 stringr_0.6.1      colorRamps_2.3    
> [17] plotrix_3.4-5      colorspace_1.1-1   plyr_1.7.1         raster_2.0-12     
> [21] pixmap_0.4-11      XML_3.9-4.1        rgdal_0.7-19       maptools_0.8-16   
> [25] lattice_0.20-6     foreign_0.8-49     sp_0.9-99         
> 
> loaded via a namespace (and not attached):
> [1] cluster_1.14.2  dichromat_1.2-4 grid_2.15.0     labeling_0.1   
> [5] munsell_0.4     reshape_0.8.4   tools_2.15.0   
> 
> How can I get plotKML() to work on my example data ?
> 
> Best wishes,
> 
> Juliane 
> 
> 
> -----Original Message-----
> From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
> Sent: Friday, September 28, 2012 5:22 AM
> To: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] basic question about plotKML
> 
> For me this works too -- cold region. Did you update packages and R to
> newest versions? Sending the output of sessionInfo() usually helps, when
> asking help from the list.
> 
> On 09/28/2012 10:30 AM, Roman Lu?trik wrote:
>> Your code works for me?
>>
>> http://tinypic.com/r/iblw5w/6
>>
>> Cheers,
>> Roman
>>
>>
>>
>> On Fri, Sep 28, 2012 at 5:43 AM, Struve,Juliane <jstruve at ufl.edu> wrote:
>>>
>>> Dear list,
>>>
>>> I am trying to plot some spatial data in Google Earth but have a hard time with the plotKML manual. What is missing in my script that will make plotKML() work ?
>>>
>>> Thank you for your time,
>>>
>>> Juliane
>>>
>>> xc = round(runif(10,-1,1)+27.2, 2)
>>> yc = round(runif(10,-1,1)+-82.5, 2)
>>> xy = cbind(xc, yc)
>>> xy.sp = SpatialPoints(xy)
>>> df = data.frame(z1 = round(5 + rnorm(10), 2), z2 = 20:29)
>>> SP.spdf = SpatialPointsDataFrame(xy.sp, df)
>>> plot(SP.spdf)
>>> #add a projection
>>> proj4string(SP.spdf) = CRS("+proj=longlat +datum=WGS84")
>>> plotKML(SP.spdf)
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>>
>> --
>> In God we trust, all others bring data.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jstruve at ufl.edu  Sat Sep 29 02:11:36 2012
From: jstruve at ufl.edu (Struve,Juliane)
Date: Sat, 29 Sep 2012 00:11:36 +0000
Subject: [R-sig-Geo] basic question about plotKML
In-Reply-To: <5065C3C9.3040202@uni-muenster.de>
References: <BFCE57D0BE7CBB42A581347DE375AF9A11556B32@UFEXCH-MBXN02.ad.ufl.edu>
	<CAHT1vphJzVjCm-K_9xskpaWTd+wfJrnGRdExOqvLfarRfmexqg@mail.gmail.com>
	<50656C2D.7010308@uni-muenster.de>
	<BFCE57D0BE7CBB42A581347DE375AF9A11557418@UFEXCH-MBXN02.ad.ufl.edu>
	<5065C3C9.3040202@uni-muenster.de>
Message-ID: <BFCE57D0BE7CBB42A581347DE375AF9A1155752E@UFEXCH-MBXN02.ad.ufl.edu>

Hello,


That did it, thank you !

Roman, it sound like you ran the script without adding this argument, how does this work ?

Regards,

Juliane 

-----Original Message-----
From: Edzer Pebesma [mailto:edzer.pebesma at uni-muenster.de] 
Sent: Friday, September 28, 2012 11:36 AM
To: Struve,Juliane
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] basic question about plotKML

try adding kmz = FALSE as argument to your plotKML call.

On 09/28/2012 03:41 PM, Struve,Juliane wrote:
> Hello,
> 
> Thank you very much for replying so quickly.
> 
> plotKML(SP.spdf) gives me an error message:
> Plotting the first variable on the list
> KML file header opened for parsing...
> Parsing to KML...
> Closing  SP.spdf.kml
> Error in kml_compress(file.name = file.name) : 
> KMZ generation failed. Wrong command passed to 'zip = ... option'.
> 
> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
> 
> locale:
> [1] LC_COLLATE=English_United States.1252 
> [2] LC_CTYPE=English_United States.1252   
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C                          
> [5] LC_TIME=English_United States.1252    
> 
> attached base packages:
> [1] splines   stats     graphics  grDevices utils     datasets  methods  
> [8] base     
> 
> other attached packages:
>  [1] RSAGA_0.93-1       shapefiles_0.6     animation_2.1      plotKML_0.2-5     
>  [5] dismo_0.7-23       scales_0.2.2       aqp_1.2-7          gstat_1.0-14      
>  [9] spacetime_0.8-0    xts_0.8-6          zoo_1.7-7          Hmisc_3.9-3       
> [13] survival_2.36-12   RColorBrewer_1.0-5 stringr_0.6.1      colorRamps_2.3    
> [17] plotrix_3.4-5      colorspace_1.1-1   plyr_1.7.1         raster_2.0-12     
> [21] pixmap_0.4-11      XML_3.9-4.1        rgdal_0.7-19       maptools_0.8-16   
> [25] lattice_0.20-6     foreign_0.8-49     sp_0.9-99         
> 
> loaded via a namespace (and not attached):
> [1] cluster_1.14.2  dichromat_1.2-4 grid_2.15.0     labeling_0.1   
> [5] munsell_0.4     reshape_0.8.4   tools_2.15.0   
> 
> How can I get plotKML() to work on my example data ?
> 
> Best wishes,
> 
> Juliane 
> 
> 
> -----Original Message-----
> From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
> Sent: Friday, September 28, 2012 5:22 AM
> To: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] basic question about plotKML
> 
> For me this works too -- cold region. Did you update packages and R to
> newest versions? Sending the output of sessionInfo() usually helps, when
> asking help from the list.
> 
> On 09/28/2012 10:30 AM, Roman Lu?trik wrote:
>> Your code works for me?
>>
>> http://tinypic.com/r/iblw5w/6
>>
>> Cheers,
>> Roman
>>
>>
>>
>> On Fri, Sep 28, 2012 at 5:43 AM, Struve,Juliane <jstruve at ufl.edu> wrote:
>>>
>>> Dear list,
>>>
>>> I am trying to plot some spatial data in Google Earth but have a hard time with the plotKML manual. What is missing in my script that will make plotKML() work ?
>>>
>>> Thank you for your time,
>>>
>>> Juliane
>>>
>>> xc = round(runif(10,-1,1)+27.2, 2)
>>> yc = round(runif(10,-1,1)+-82.5, 2)
>>> xy = cbind(xc, yc)
>>> xy.sp = SpatialPoints(xy)
>>> df = data.frame(z1 = round(5 + rnorm(10), 2), z2 = 20:29)
>>> SP.spdf = SpatialPointsDataFrame(xy.sp, df)
>>> plot(SP.spdf)
>>> #add a projection
>>> proj4string(SP.spdf) = CRS("+proj=longlat +datum=WGS84")
>>> plotKML(SP.spdf)
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>>
>> --
>> In God we trust, all others bring data.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From r.hijmans at gmail.com  Sat Sep 29 09:10:08 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sat, 29 Sep 2012 00:10:08 -0700
Subject: [R-sig-Geo] Create a raster brick from a netcdf using all levels
In-Reply-To: <1348753263.41116.YahooMailNeo@web121903.mail.ne1.yahoo.com>
References: <1348753263.41116.YahooMailNeo@web121903.mail.ne1.yahoo.com>
Message-ID: <CANtt_hxE6PLikzduWQL+OwY032kHqBL3Cafjvpyf9ncTinSF4Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120929/b710e9bb/attachment.pl>

From r.hijmans at gmail.com  Sat Sep 29 09:21:46 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sat, 29 Sep 2012 00:21:46 -0700
Subject: [R-sig-Geo] NaN / NA values in SpatialPixelDataFrame conversion
In-Reply-To: <CABsGe_y29ZhGeRpAJenW0sPvdOQRXXNSwoLdo8pzZ39J+CbXYQ@mail.gmail.com>
References: <CABsGe_y29ZhGeRpAJenW0sPvdOQRXXNSwoLdo8pzZ39J+CbXYQ@mail.gmail.com>
Message-ID: <CANtt_hw6fM4a2Aezv1f8U4q=i=uH-NVaac-BikaFRtU_vB4DfA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120929/68684a70/attachment.pl>

From r.hijmans at gmail.com  Sat Sep 29 09:23:39 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sat, 29 Sep 2012 00:23:39 -0700
Subject: [R-sig-Geo] Error when trying to extract values for points in a
	SpatialPointsDataFrame
In-Reply-To: <CANVKczN3wY3Bd5SrQVvpa0AASk5JNbDPVGM4JsTwYpTY5Lg4FQ@mail.gmail.com>
References: <b0905120a88f4b7086b707dcfa7c5996@EX-0-HT0.lancs.local>
	<CANVKczN3wY3Bd5SrQVvpa0AASk5JNbDPVGM4JsTwYpTY5Lg4FQ@mail.gmail.com>
Message-ID: <CANtt_hxUPs2evWvWtOOgY4_rzkCfK1Vw0XhTCm=gwNMu3USy1g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120929/85fb0c19/attachment.pl>

From thi_veloso at yahoo.com.br  Sat Sep 29 18:15:08 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Sat, 29 Sep 2012 09:15:08 -0700 (PDT)
Subject: [R-sig-Geo] Create a raster brick from a netcdf using all levels
In-Reply-To: <CANtt_hxE6PLikzduWQL+OwY032kHqBL3Cafjvpyf9ncTinSF4Q@mail.gmail.com>
References: <1348753263.41116.YahooMailNeo@web121903.mail.ne1.yahoo.com>
	<CANtt_hxE6PLikzduWQL+OwY032kHqBL3Cafjvpyf9ncTinSF4Q@mail.gmail.com>
Message-ID: <1348935308.84613.YahooMailNeo@web121902.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120929/9dac2c59/attachment.pl>

From r.hijmans at gmail.com  Sat Sep 29 19:07:15 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sat, 29 Sep 2012 10:07:15 -0700
Subject: [R-sig-Geo] Create a raster brick from a netcdf using all levels
In-Reply-To: <1348935308.84613.YahooMailNeo@web121902.mail.ne1.yahoo.com>
References: <1348753263.41116.YahooMailNeo@web121903.mail.ne1.yahoo.com>
	<CANtt_hxE6PLikzduWQL+OwY032kHqBL3Cafjvpyf9ncTinSF4Q@mail.gmail.com>
	<1348935308.84613.YahooMailNeo@web121902.mail.ne1.yahoo.com>
Message-ID: <CANtt_hx51B+qDmwjpSpS=ekjuomFRnS0qUrDkzDQkQJpTXXaEw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120929/8e58a0e6/attachment.pl>

From thi_veloso at yahoo.com.br  Sat Sep 29 22:52:12 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Sat, 29 Sep 2012 13:52:12 -0700 (PDT)
Subject: [R-sig-Geo] Create a raster brick from a netcdf using all levels
In-Reply-To: <CANtt_hx51B+qDmwjpSpS=ekjuomFRnS0qUrDkzDQkQJpTXXaEw@mail.gmail.com>
References: <1348753263.41116.YahooMailNeo@web121903.mail.ne1.yahoo.com>
	<CANtt_hxE6PLikzduWQL+OwY032kHqBL3Cafjvpyf9ncTinSF4Q@mail.gmail.com>
	<1348935308.84613.YahooMailNeo@web121902.mail.ne1.yahoo.com>
	<CANtt_hx51B+qDmwjpSpS=ekjuomFRnS0qUrDkzDQkQJpTXXaEw@mail.gmail.com>
Message-ID: <1348951932.9002.YahooMailNeo@web121902.mail.ne1.yahoo.com>

? Robert,

? This "lvar=4" argument was the magic word I was looking for! It would be really useful to include it in the next version of raster manual.

? I also thought that this file is odd, and working with netcdf files is really a Pandora's box. There should have a more specific standard to produce and distribute this type of file...

? The second option would have worked as well (although not as elegant). Another technique learned!

? Thank you very much again for the patience,
? Thiago.

________________________________
From: Robert J. Hijmans <r.hijmans at gmail.com>
To: Thiago Veloso <thi_veloso at yahoo.com.br> 
Cc: R-SIG list <r-sig-geo at r-project.org> 
Sent: Saturday, September 29, 2012 2:07 PM
Subject: Re: [R-sig-Geo] Create a raster brick from a netcdf using all levels


Thiago,?


On Sat, Sep 29, 2012 at 9:15 AM, Thiago Veloso <thi_veloso at yahoo.com.br> wrote:

Robert,
>
>
>Thank you very much for the tip. However, I still cannot load all the "z" layers in only one brick. Please see the comments below:
>
>

That is because this file has levels. It has lat/long/depth/time. The default is for?brick() to return all time steps (z) for a ?level (depth) of choice. This file is odd because it has a single, meaningless, time step that should have been omitted.

The trick is to tell brick that depth is the 4th dimension (z) and that time is the 3rd dimension (level), using the lvar (level variable) argument. You also need to set the NA value.


library(raster)
f <- "soita.clay.nc"
b <- brick(f, lvar=4)
NAvalue(b) <- 9e+20
plot(b)

# less efficiently, to show how it works, you could also have done

r1 <- raster(f, level=1)
r2 <- raster(f, level=2)
r3 <- raster(f, level=3)
r4 <- raster(f, level=4)
r5 <- raster(f, level=5)
r6 <- raster(f, level=6)
s <- stack(r1, r2, r3, r4, r5, r6)
NAvalue(s) <- 9e+20


Best, Robert


> library(ncdf)
>> library(raster)
>
>
># Reading file with ncdf package to examine its strucuture.
>> n <- open.ncdf ('~/Dropbox/web/soita.clay.nc')
>> n ? ? ? ? ? ? ? ? ?
>[1] "file ~/Dropbox/web/soita.clay.nc has 5 dimensions:"
>[1] "longitude ? Size: 720"
>[1] "latitude ? Size: 360"
>[1] "layer ? Size: 6"
>[1] "time ? Size: 1"
>[1] "lengthd ? Size: 10"
>[1] "------------------------"
>[1] "file ~/Dropbox/web/soita.clay.nc has 1 variables:"
>[1] "double claypct[longitude,latitude,layer,time] ?Longname:claypct Missval:1e+30"
>
>
># The dimension I need to make a brick of is "layer", which contains data in six soil levels.
># Therefore, I expected to create a brick with nlayers=6, but that doesn't happen. See below:
>> b <- brick('~/Dropbox/web/soita.clay.nc',level=3)
>Warning message:
>In .doTime(r, nc, zvar, dim3, ncdf4) : assuming a standard calender:0
>
>
>> b
>class ? ? ? : RasterBrick?
>dimensions ?: 360, 720, 259200, 1 ?(nrow, ncol, ncell, nlayers)
>resolution ?: 0.5, 0.5 ?(x, y)
>extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
>coord. ref. : +proj=longlat +datum=WGS84?
>data source : ~/Dropbox/web/soita.clay.nc?
>names ? ? ? : X1958.01.01?
>Date ? ? ? ?: 1958-01-01?
>varname ? ? : claypct?
>level ? ? ? : 3?
>
>
>It looks like raster assumes that the third level in the file contains only one layer. Is this right?
>
>


Yes, and that is a correct assumption. Each level as a single time layer



In case there's a need to inspect the input file, it is 12MB: https://www.dropbox.com/s/hyalyip9ai8yidc/soita.clay.nc
>
>
>Best,
>Thiago.
>
>
>
>________________________________
> From: Robert J. Hijmans <r.hijmans at gmail.com>
>To: Thiago Veloso <thi_veloso at yahoo.com.br> 
>Cc: R-SIG list <r-sig-geo at r-project.org> 
>Sent: Saturday, September 29, 2012 4:10 AM
>Subject: Re: [R-sig-Geo] Create a raster brick from a netcdf using all levels
> 
>
>
>
>
>Thiago,?
>
>
>You can try using the (perhaps undocumented) 'level' argument
>
>
>clay3 <- brick('/data/input-inland/soita.clay.nc', level=3)
>
>
>
>With a RasterBrick you can only one level at a time (i.e. x, y and z, but not a fourth dimension), but you can create several RasterBricks, one for each level.
>
>
>Robert
>
>
>
>On Thu, Sep 27, 2012 at 6:41 AM, Thiago Veloso <thi_veloso at yahoo.com.br> wrote:
>
>? Dear list,
>>
>>? I have a netcdf file that contains 6 levels. Below is the structure of the file:
>>
>>require(ncdf)
>>require(raster)
>>> nctemp <- open.ncdf('/data/input-inland/soita.clay.nc')
>>
>>> nctemp
>>[1] "file /data/input-inland/soita.clay.nc has 5 dimensions:"
>>[1] "longitude ? Size: 720"
>>[1] "latitude ? Size: 360"
>>[1] "layer ? Size: 6"
>>[1] "time ? Size: 1"
>>[1] "lengthd ? Size: 10"
>>[1] "------------------------"
>>[1] "file /data/input-inland/soita.clay.nc has 1 variables:"
>>[1] "double claypct[longitude,latitude,layer,time] ?Longname:claypct Missval:1e+30"
>>>
>>??
>>? What I need to do is to load this netcdf to a brick raster object using all levels. When creating the brick file, specifying "nl=6" results in loading only the last level:
>>
>>> clay <- brick('/data/input-inland/soita.clay.nc', nl=6)
>>Warning messages:
>>1: In .rasterObjectFromCDF(x, type = objecttype, band = band, ...) :
>>? "level" set to 1 (there are 6 levels)
>>2: In .doTime(r, nc, zvar, dim3, ncdf4) : assuming a standard calender:0
>>> clay
>>class ? ? ? : RasterBrick?
>>dimensions ?: 360, 720, 259200, 1 ?(nrow, ncol, ncell, nlayers)
>>resolution ?: 0.5, 0.5 ?(x, y)
>>extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
>>coord. ref. : +proj=longlat +datum=WGS84?
>>data source : /data/input-inland/soita.clay.nc?
>>names ? ? ? : X1958.01.01?
>>Date ? ? ? ?: 1958-01-01?
>>varname ? ? : claypct?
>>level ? ? ? : 1?
>>
>>? I have also tested another approach, for example specifying "nl=1:6", however with no sucess at all.?Does anyone know a workaround to load all leves of a netcdf file in a single raster brick object?
>>
>>? Many thanks in advance,
>>? Thiago.
>>
>>_______________________________________________
>>R-sig-Geo mailing list
>>R-sig-Geo at r-project.org
>>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>??


From jstruve at ufl.edu  Sun Sep 30 03:39:01 2012
From: jstruve at ufl.edu (Struve,Juliane)
Date: Sun, 30 Sep 2012 01:39:01 +0000
Subject: [R-sig-Geo] plotKML and time stamp
Message-ID: <BFCE57D0BE7CBB42A581347DE375AF9A11558628@UFEXCH-MBXN02.ad.ufl.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120930/2d203a32/attachment.pl>

From Tom_Roche at pobox.com  Sun Sep 30 07:33:13 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Sun, 30 Sep 2012 01:33:13 -0400
Subject: [R-sig-Geo] [raster newbie] alternate doc for constructors?
Message-ID: <87fw602hye.fsf@pobox.com>


I'm learning package=raster (more questions to follow!) by RTFM,
notably

http://cran.r-project.org/web/packages/raster/raster.pdf

It's generally good, but has one major (IMHO) problem: in some places
(notably the sections on the constructor functions 'brick' (p31) and
'raster' (p140)) definition lists don't wrap: instead, they truncate
at the edge of the virtual page. Another problem is the lack of
documentation of argument=lvar, as mentioned in the recent thread
beginning

https://stat.ethz.ch/pipermail/r-sig-geo/2012-September/016160.html

I'm wondering, is there 'raster' doc somewhere that does not have
these problems? E.g., HTML doc should solve the truncation problem.

TIA, Tom Roche <Tom_Roche at pobox.com>


From roman.lustrik at gmail.com  Sun Sep 30 09:46:50 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Sun, 30 Sep 2012 09:46:50 +0200
Subject: [R-sig-Geo] [raster newbie] alternate doc for constructors?
In-Reply-To: <87fw602hye.fsf@pobox.com>
References: <87fw602hye.fsf@pobox.com>
Message-ID: <CAHT1vpgtTQKQUkX7sMVeJhUZ0kMQOvcOtdoUGc1wR859CTRQhg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120930/29908718/attachment.pl>

From edzer.pebesma at uni-muenster.de  Sun Sep 30 11:54:50 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 30 Sep 2012 11:54:50 +0200
Subject: [R-sig-Geo] [raster newbie] alternate doc for constructors?
In-Reply-To: <CAHT1vpgtTQKQUkX7sMVeJhUZ0kMQOvcOtdoUGc1wR859CTRQhg@mail.gmail.com>
References: <87fw602hye.fsf@pobox.com>
	<CAHT1vpgtTQKQUkX7sMVeJhUZ0kMQOvcOtdoUGc1wR859CTRQhg@mail.gmail.com>
Message-ID: <506816EA.5040106@uni-muenster.de>

In general, the help called from inside R does not have this truncation
problem. E.g.

library(raster)
?brick

On 09/30/2012 09:46 AM, Roman Lu?trik wrote:
> You can read the vignette source. Grab the source file from CRAN, you can
> find the .Rnw in /inst/doc.
> 
> Cheers,
> Roman
> 
> 
> 
> On Sun, Sep 30, 2012 at 7:33 AM, Tom Roche <Tom_Roche at pobox.com> wrote:
> 
>>
>> I'm learning package=raster (more questions to follow!) by RTFM,
>> notably
>>
>> http://cran.r-project.org/web/packages/raster/raster.pdf
>>
>> It's generally good, but has one major (IMHO) problem: in some places
>> (notably the sections on the constructor functions 'brick' (p31) and
>> 'raster' (p140)) definition lists don't wrap: instead, they truncate
>> at the edge of the virtual page. Another problem is the lack of
>> documentation of argument=lvar, as mentioned in the recent thread
>> beginning
>>
>> https://stat.ethz.ch/pipermail/r-sig-geo/2012-September/016160.html
>>
>> I'm wondering, is there 'raster' doc somewhere that does not have
>> these problems? E.g., HTML doc should solve the truncation problem.
>>
>> TIA, Tom Roche <Tom_Roche at pobox.com>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From edzer.pebesma at uni-muenster.de  Sun Sep 30 12:05:49 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 30 Sep 2012 12:05:49 +0200
Subject: [R-sig-Geo] plotKML and time stamp
In-Reply-To: <BFCE57D0BE7CBB42A581347DE375AF9A11558628@UFEXCH-MBXN02.ad.ufl.edu>
References: <BFCE57D0BE7CBB42A581347DE375AF9A11558628@UFEXCH-MBXN02.ad.ufl.edu>
Message-ID: <5068197D.90905@uni-muenster.de>

Juliane, try

xc = round(runif(10,-1,1)+27.2, 2)
yc = round(runif(10,-1,1)+-82.5, 2)
xy = cbind(xc, yc)
tc = Sys.time() + 3600 * (1:10)
df = data.frame(z1 = round(5 + rnorm(10), 2), z2 = 20:29)

library(sp)
xy.sp = SpatialPoints(xy)
proj4string(xy.sp) = CRS("+proj=longlat +datum=WGS84")

library(spacetime)
ST = STIDF(xy.sp, tc, df)

library(plotKML)
plotKML(ST)

see also

vignette(spacetime)


On 09/30/2012 03:39 AM, Struve,Juliane wrote:
> Dear list,
> 
> After plotting this toy example on Google Earth I would like to add a date/time stamp to it so that the locations will be shown in sequence using the time slider. I am not quite sure how to approach this, can I add a date/time to my spatial points and then submit it to plotKML ? What format does the date/time stamp have to be in to be plotted on Google Earth ?
> 
> Many thanks for any suggestions.
> 
> Regards,
> 
> Juliane
> 
> 
> xc = round(runif(10,-1,1)+27.2, 2)
> yc = round(runif(10,-1,1)+-82.5, 2)
> xy = cbind(xc, yc)
> xy.sp = SpatialPoints(xy)
> df = data.frame(z1 = round(5 + rnorm(10), 2), z2 = 20:29)
> SP.spdf = SpatialPointsDataFrame(xy.sp, df)
> plot(SP.spdf)
> #add a projection
> proj4string(SP.spdf) = CRS("+proj=longlat +datum=WGS84")
> plotKML(SP.spdf,kmz = FALSE)
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From eagud.q at tv3.cat  Sun Sep 30 18:27:20 2012
From: eagud.q at tv3.cat (enric)
Date: Sun, 30 Sep 2012 09:27:20 -0700 (PDT)
Subject: [R-sig-Geo] Interpolation lat-lon temperatura-date
In-Reply-To: <1347949543942-7580972.post@n2.nabble.com>
References: <1347025936519-7580920.post@n2.nabble.com>
	<1347949543942-7580972.post@n2.nabble.com>
Message-ID: <1349022440838-7581062.post@n2.nabble.com>

Thank you Islen for the link!

Regards

Enric



--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Interpolation-lat-lon-temperatura-date-tp7580920p7581062.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From brigittehogan at gmail.com  Sun Sep 30 22:56:43 2012
From: brigittehogan at gmail.com (Brigitte Hogan)
Date: Sun, 30 Sep 2012 16:56:43 -0400
Subject: [R-sig-Geo] Problem aggregating municipalities
Message-ID: <CAKMbqgBa1A1Qumc+p3R-Uxcvw4h+VdMfEcXS+6T7OE1qwZGuFQ@mail.gmail.com>

I am having a problem with unionSpatialPolygons() in
library(maptools). I am working with a shapefile of Mexico
municipalities found here:
http://mapserver.inegi.org.mx/data/mgm/
under Marco Geoestad?stico Municipal 2009 Versi?n 4.1,  ?reas
Geoestad?sticas Municipales (38.8 Mb).

I need to combine the "Federal District" municipalities into one
polygon. I am a new user of the sp and rgeos packages, running R
version 2.13 under Windows 7. When I try to combine the districts, I
get an error similar to one in the archive:
https://stat.ethz.ch/pipermail/r-sig-geo/2011-August/012445.html

I tried to run checkPolygonsHoles() as suggested, but I cannot figure
out how to convert the SpatialPolygonsDataFrame or SpatialPolygons
object into a Polygons object.  The solution to the error in the
archive was to reset the significant digits. However, when I tried, I
still ended up with the same error message. An excerpt from my code is
below.


## Original Code
library(maptools)
library(rgdal)
library(rgeos)
file3 <- "C:/Desktop/MUNICIPIOS"
vM.spdf <- readShapePoly(file3, IDvar=NULL)
class(vM.spdf)
               # SpatialPolygonsDataFrame
vM.spdf at data[which(vM.spdf at data$CVE_ENT=="09"),]
v.id <- vM.spdf at data$CVE_ENT=="09"                               # IDs
which rows to merge
newM <- unionSpatialPolygons(vM.sp, IDs=v.id)                  # merge

# Returns the error:
# Error in TopologyFunc(groupID(spgeom[ids[[i]]], id[ids[[i]]]),
names(ids)[i],  :
# TopologyException: found non-noded intersection between LINESTRING
(3.47895e+006 551354,
# 3.479e+006 551323) and LINESTRING (3.479e+006 551323, 3.479e+006
551364) at 3.479e+006 551323

## Trying checkPolygonsHoles()
checkPolygonsHoles(vM.spdf)                                        #
Error ... not a Polygons object
vM.sp <- SpatialPolygons(vM.spdf at polygons, vM.spdf at plotOrder,
proj4string=vM.spdf at proj4string)
vM.p   <- Polygons(vM.sp)
# Error in as.list.default(X) : no method for coercing this S4 class
to a vector
vM.p  <- Polygons(list(vM.sp))
vM.p <- Polygons(vM.sp at polygons)                             # Error
in Polygons(list(vM.sp)) : srl not a list of Polygon objects

## Trying to reset sig difs
getScale()
                  # returns '1e+08'
setScale(1e+09)
newM <- unionSpatialPolygons(vM.sp, IDs=v.id)                  # same error



Thanks for any help you can give me.

Brigitte


