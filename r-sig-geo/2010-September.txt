From ricardorodot02 at gmail.com  Wed Sep  1 00:51:29 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Tue, 31 Aug 2010 17:51:29 -0500
Subject: [R-sig-Geo] error in python not load rpy, rpy2
Message-ID: <AANLkTik9zJHcCc6owDEzJmXu1aLEd07PyTj9DcD3X4yP@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100831/2350d000/attachment.pl>

From ricardorodot02 at gmail.com  Wed Sep  1 01:00:15 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Tue, 31 Aug 2010 18:00:15 -0500
Subject: [R-sig-Geo] creating network road
In-Reply-To: <B3C9A56C0E6FBF48A7D3ED79E9A7A9C00344F603@OSTMAIL03VS3.ad.dot.gov>
References: <AANLkTi=2cSAOvhkQ_zR-5=HUYSze8Ur2uwj6JUUerQNQ@mail.gmail.com>
	<B3C9A56C0E6FBF48A7D3ED79E9A7A9C00344F603@OSTMAIL03VS3.ad.dot.gov>
Message-ID: <AANLkTim+8PdsFpnPkBZe+vYSmHzZ1402R80wPhwxPJ4m@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100831/dcb01271/attachment.pl>

From carson.farmer at gmail.com  Wed Sep  1 02:49:55 2010
From: carson.farmer at gmail.com (Carson Farmer)
Date: Wed, 1 Sep 2010 01:49:55 +0100
Subject: [R-sig-Geo] error in python not load rpy, rpy2
In-Reply-To: <AANLkTik9zJHcCc6owDEzJmXu1aLEd07PyTj9DcD3X4yP@mail.gmail.com>
References: <AANLkTik9zJHcCc6owDEzJmXu1aLEd07PyTj9DcD3X4yP@mail.gmail.com>
Message-ID: <AANLkTi=SS-k9kwbjzCst8stpkQ0XsUKAco4+DqrCbXw4@mail.gmail.com>

You'll probably have more luck sending this query to the rpy mailing list:
rpy-list at lists.sourceforge.net

http://rpy.sourceforge.net/maillist.html

Carson

On 31 August 2010 23:51, Ricardo Rodr?guez <ricardorodot02 at gmail.com> wrote:
> hi everyone, I have ?a ?error in load module of rpy and rpy2 in console of
> python, how I can correct or it may be causing
>
> *Error in .Call("R_isMethodsDispatchOn", onOff, PACKAGE = "base") :
> ?Incorrect number of arguments (2), expecting 1 for R_isMethodsDispatchOn
> Error in function (x, pos = -1, envir = as.environment(pos), mode = "any",
> :
> ?object 'help' not found*
>
> thanks for your answers
>
>
> Ricardo Rodr?guez
> Univalle
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



-- 
Carson J. Q. Farmer
ISSP Doctoral Fellow
National Centre for Geocomputation
National University of Ireland, Maynooth,
http://www.carsonfarmer.com/


From alexandru.dumitrescu at gmail.com  Wed Sep  1 07:39:46 2010
From: alexandru.dumitrescu at gmail.com (Alexandru Dumitrescu)
Date: Wed, 1 Sep 2010 08:39:46 +0300
Subject: [R-sig-Geo] number points interpolation
Message-ID: <AANLkTimDichJMDdKoDQk_KRDO6-DktoDujWEaQjHQ8sj@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100901/d6ddbe6c/attachment.pl>

From p.hiemstra at geo.uu.nl  Wed Sep  1 13:02:55 2010
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Wed, 01 Sep 2010 13:02:55 +0200
Subject: [R-sig-Geo] number points interpolation
In-Reply-To: <AANLkTimDichJMDdKoDQk_KRDO6-DktoDujWEaQjHQ8sj@mail.gmail.com>
References: <AANLkTimDichJMDdKoDQk_KRDO6-DktoDujWEaQjHQ8sj@mail.gmail.com>
Message-ID: <4C7E32DF.9050104@geo.uu.nl>

Hi Alexandru,

Depends...if you want to make an interpolated map on 8 points, I would 
say that 8 points is quite a small amount. A rule of thumb would be 
around a minimum of 30 observations. On the upside, I think you have 
more than just 8 points because of the temporal dimension. So for 
fitting the trend between satellite and ground observations you can use 
n_times * 8 observations, assuming that you fit one set of trend 
coefficients to the entire dataset. When the coefficients become 
variable in time, this number decreases again. When predicting maps per 
time step you do only have 8 residuals to base the map on, which is on 
the low side.

You could also look at a space-time kriging approach, this allows you to 
use information from other time steps to predict the map for the current 
timestep. See Heuvelink 2010 for an example of this approach [1].

So lot's of thoughts from my side, but it depends really on your approach.

cheers,
Paul

[1] http://dx.doi.org/10.1111/j.1538-4632.2010.00788.x

On 09/01/2010 07:39 AM, Alexandru Dumitrescu wrote:
> Hello everybody,
>
> Is 8 spatial points sufficient to perform a multivariate spatial
> interpolation,  using as independent variable satellite data, on a monthly
> temporal scale? Sample points consist in meteorological data which seams to
> be highly correlated with satellite images.  The geographical area is the
> territory of Romania.
>
>
> Thank you,
>
> Alexandru
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>    


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 253 5773
http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From p.hiemstra at geo.uu.nl  Wed Sep  1 13:06:58 2010
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Wed, 01 Sep 2010 13:06:58 +0200
Subject: [R-sig-Geo] gstat: choice of inverse distance power in idw()
 function
In-Reply-To: <1E7ADA3325202A43BC5B52A5A9A843EF0377B5D54D@EXITS713.its.iastate.edu>
References: <1E7ADA3325202A43BC5B52A5A9A843EF0377B5D54D@EXITS713.its.iastate.edu>
Message-ID: <4C7E33D2.9040603@geo.uu.nl>

Hi Erik,

IDW does not include a formal interpretation of the inverse distance 
power. You could seperate your dataset into a validation and 
interpolation set and try different idp's and see which one preforms best.

Another option would be to use kriging. Kriging fits the spatial 
dependence vs distance to the data. In my view this makes kriging, as 
long as the assumptions are honored, a preferable approach. The automap 
package provides easy acces to kriging by providing some wrapper code 
around gstat.

cheers,
Paul

On 08/30/2010 06:31 PM, Mudrak, Erika [EEOBS] wrote:
> I used the gstat package to interpolate measurements of eight environmental variables in a square 15.4 m x 15.4 m, and then I used model selection from another package to build models of dependence of plant population locations on those environmental variables.  I used the idw() function to interpolate the environmental variables.  The model selection procedure defined which of the eight variables helped to explain the patterns seen in my plant populations.
>
> Are there any guidelines for the choice of the inverse distance weighting power (idp)?   I had been using idp=2, because it was the default, but for some variables it made the surface look not very smooth.   I have tried my models on surfaces with other values of idp, and changing this parameter causes the model selection procedure to arrive at different models.
>
> Does anyone have any advice or guidelines about the choice of the ipd parameter, other than "tweaking" it until the surfaces look smooth?
>
> Thank you,
>
> Erika Mudrak
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>    


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:  +3130 253 5773
http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From jon.skoien at jrc.ec.europa.eu  Wed Sep  1 14:39:55 2010
From: jon.skoien at jrc.ec.europa.eu (Jon Olav Skoien)
Date: Wed, 01 Sep 2010 14:39:55 +0200
Subject: [R-sig-Geo] gstat: choice of inverse distance power in idw()
 function
In-Reply-To: <4C7E33D2.9040603@geo.uu.nl>
References: <1E7ADA3325202A43BC5B52A5A9A843EF0377B5D54D@EXITS713.its.iastate.edu>
	<4C7E33D2.9040603@geo.uu.nl>
Message-ID: <4C7E499B.8030200@jrc.ec.europa.eu>

I agree with Paul that kriging might be a better option, but if you want 
to use IDW, the intamap package includes a function for optimizing the 
power based on cross-validation. In the example for the function 
interpolate, replace the penultimate line with:
 x = interpolate(meuse, meuse.grid, list(mean=TRUE), methodName = "idw")
to see how it works.
Tweaking the power to get a smooth surface is not necessarily the best 
choice, unless you know how smooth the surface should be.

Cheers,
Jon

Paul Hiemstra wrote:
> Hi Erik,
>
> IDW does not include a formal interpretation of the inverse distance 
> power. You could seperate your dataset into a validation and 
> interpolation set and try different idp's and see which one preforms 
> best.
>
> Another option would be to use kriging. Kriging fits the spatial 
> dependence vs distance to the data. In my view this makes kriging, as 
> long as the assumptions are honored, a preferable approach. The 
> automap package provides easy acces to kriging by providing some 
> wrapper code around gstat.
>
> cheers,
> Paul
>
> On 08/30/2010 06:31 PM, Mudrak, Erika [EEOBS] wrote:
>> I used the gstat package to interpolate measurements of eight 
>> environmental variables in a square 15.4 m x 15.4 m, and then I used 
>> model selection from another package to build models of dependence of 
>> plant population locations on those environmental variables.  I used 
>> the idw() function to interpolate the environmental variables.  The 
>> model selection procedure defined which of the eight variables helped 
>> to explain the patterns seen in my plant populations.
>>
>> Are there any guidelines for the choice of the inverse distance 
>> weighting power (idp)?   I had been using idp=2, because it was the 
>> default, but for some variables it made the surface look not very 
>> smooth.   I have tried my models on surfaces with other values of 
>> idp, and changing this parameter causes the model selection procedure 
>> to arrive at different models.
>>
>> Does anyone have any advice or guidelines about the choice of the ipd 
>> parameter, other than "tweaking" it until the surfaces look smooth?
>>
>> Thank you,
>>
>> Erika Mudrak
>>
>>     [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>    
>
>


From southandy at gmail.com  Wed Sep  1 17:09:50 2010
From: southandy at gmail.com (andy south)
Date: Wed, 1 Sep 2010 16:09:50 +0100
Subject: [R-sig-Geo] mapping global data
Message-ID: <AANLkTi=oR8UNDmG5+Gw=CZSampx4EgaGW6P-=E_TxLGT@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100901/3af546ee/attachment.pl>

From southandy at gmail.com  Wed Sep  1 17:42:00 2010
From: southandy at gmail.com (andy south)
Date: Wed, 1 Sep 2010 16:42:00 +0100
Subject: [R-sig-Geo]  SpatialGridDataFrame Help
Message-ID: <AANLkTi=PK7uk9V-nEn-6i=Vm+gWz=Rw0ey3FOucPgboW@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100901/b0eb2ce0/attachment.pl>

From linda at statnetconsulting.com  Wed Sep  1 17:46:37 2010
From: linda at statnetconsulting.com (Linda Pickle)
Date: Wed, 1 Sep 2010 11:46:37 -0400
Subject: [R-sig-Geo] Cluster identification using space-time permutations
Message-ID: <002501cb49ed$1d4159d0$57c40d70$@com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100901/83c87dbc/attachment.pl>

From folopez at ivic.gob.ve  Wed Sep  1 20:51:14 2010
From: folopez at ivic.gob.ve (=?UTF-8?Q?Freddy_L=C3=B3pez?=)
Date: Wed, 1 Sep 2010 13:51:14 -0500
Subject: [R-sig-Geo] About plotting maximum data over a region.-
In-Reply-To: <201008311513.14771.ashton@msu.edu>
References: <AANLkTiniZPHikxEKsO5CdKf2NLBsxhCnRoJJp-eRuJFB@mail.gmail.com>
	<201008311513.14771.ashton@msu.edu>
Message-ID: <AANLkTi=KF6j3mKbw+MeKnFoeHy9s71z7fqoQqev=1awo@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100901/0fe1ebde/attachment.pl>

From mhwang4 at gmail.com  Wed Sep  1 23:05:26 2010
From: mhwang4 at gmail.com (Myunghwa Hwang)
Date: Wed, 1 Sep 2010 14:05:26 -0700
Subject: [R-sig-Geo] Survey participants for a dissertation research ($5
	incentive offered)
In-Reply-To: <AANLkTikXRn=d1UUei48B7k6Vf3jhnQbfpKpocb+GUyC9@mail.gmail.com>
References: <AANLkTikXRn=d1UUei48B7k6Vf3jhnQbfpKpocb+GUyC9@mail.gmail.com>
Message-ID: <AANLkTimtrxMNEvk7oO7dFBymcOS__wmF7AK+jzt9sz5x@mail.gmail.com>

Hello, all!

First of all, I am sorry for cross-posting.

I am writing this email to ask your help with my dissertation research.
I am currently conducting an online survey on usability of a web-based
spatial analysis tool.
In this survey you will test an online tool for spatial cluster analysis
and evaluate its properties from a user perspective.
To appreciate your help, we offer you $5 Amazon Gift Certificate when you
complete the survey.

For more information, please read the section below.
Before beginning the survey, please watch this linked video:
http://www.youtube.com/watch?v=Wb-qmd1iDTI
After watching the video, you can visit the following website to participate
in the survey:
http://ec2-184-72-164-144.compute-1.amazonaws.com/web_sa3/

I really appreciate all your help!
Please do not hesitate to contact me if you have any questions.

Sincerely,

Myunghwa Hwang


====================================================================

*Looking for Usability Evaluation Participants*

An exciting opportunity awaits you!
Myunghwa Hwang and Elizabeth Wentz in School of Geographical Sciences and
Urban Planning at Arizona State University (ASU) are looking for people to
help evaluate and review a we-based software program for local cluster
analysis. As a participant in this software evaluation, *you will be given a
$5 Amazon Gift Certificate*
as well as have an opportunity to influence the direction, appearance, and
?look and feel? of web-based spatial analysis software programs.

We are looking for potential candidates that represent general users of
spatial analysis software programs.
*Anyone who is over 18 years old and has the following characteristics can
help our usability evaluation:*

   - Casual computer users
   - Some experiences with statistical tools (e.g., SPSS, SAS, GeoDa), GIS
   packages (e.g., ArcGIS, MapInfo, QGIS), or other online geospatial tools
   (e.g., Google Earth, Google or Yahoo Map)
   - Some knowledge of spatial analysis techniques (e.g., exploratory data
   analysis, spatial autocorrelation analysis, spatial regression)
   - No involvement with any previous versions of this survey

In other words, we are looking for people who are interested in using
software programs to visualize and analyze map data. Will you help us?

If you would like to participate in our usability evaluation,
please check out this tutorial video
stream<http://www.youtube.com/watch?v=Wb-qmd1iDTI>first and visit our
online survey site at the following location:
http://ec2-184-72-164-144.compute-1.amazonaws.com/web_sa3/

The software evaluation generally takes no more than 15 minutes, and our
survey system will guide you step-by-step.
If you are interested in participating in our evaluation and have any other
questions, please send an email to us (mhwang4 at gmail.com or mhwang3 at asu.edu
).

We hope that you will take an active role in enhancing usability of spatial
analytical software programs.
Your participation is greatly appreciated.

-- 
Myunghwa Hwang
GeoDa Center
School of Geographical Sciences and Urban Planning
Arizona State University
mhwang4 at gmail.com or Myunghwa.Hwang at asu.edu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100901/fe670947/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: flyer2.pdf
Type: application/pdf
Size: 57395 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100901/fe670947/attachment.pdf>

From jorgefernandosaraiva at gmail.com  Thu Sep  2 00:03:32 2010
From: jorgefernandosaraiva at gmail.com (Jorge Fernando Saraiva de Menezes)
Date: Wed, 1 Sep 2010 19:03:32 -0300
Subject: [R-sig-Geo] which cost less computer effort? PolygonValues(),
 polygonsToRaster(), or zonal()?
Message-ID: <AANLkTi=aPOw3foEKhr=+-wOm7BwHzWnime1Zz53O-8j2@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100901/1f91c026/attachment.pl>

From r.hijmans at gmail.com  Thu Sep  2 00:35:29 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 1 Sep 2010 15:35:29 -0700
Subject: [R-sig-Geo] which cost less computer effort? PolygonValues(),
 polygonsToRaster(), or zonal()?
In-Reply-To: <AANLkTi=aPOw3foEKhr=+-wOm7BwHzWnime1Zz53O-8j2@mail.gmail.com>
References: <AANLkTi=aPOw3foEKhr=+-wOm7BwHzWnime1Zz53O-8j2@mail.gmail.com>
Message-ID: <AANLkTim3MOz5AvErMPRLfUvATQEBvsgbBDZaT2xGp8Mv@mail.gmail.com>

Jorge,

You could probably test using a subset of your raster. E.g. do:

plot(raster_map)
e = drawExtent() # now draw a smallish rectangle on the map
raster_map <- crop(raster_map, e)

etc.

I would use polygonValues if there were relatively few, or only very
small, polygons. From your description it appears that your polygons
cover a large part of the extent of your raster and I would go with
polygonsToRaster followed by zonal. Perhaps something along these
lines:

library(raster)
# first setting up example polygons and raster
nc <- readShapePoly(system.file("shapes/sids.shp",
package="maptools")[1], proj4string=CRS("+proj=longlat +datum=NAD27"))
r = raster(nc)
res(r) = 0.1
v <- runif(ncell(r))
v[v<0.2] <- NA
r[] <- round(v)


p <- polygonsToRaster(nc, r)
# table with counts of raster values for all polygons (but not for  NA cells)
a = crosstab(p, r)
# counts of cells for all polygons
b = freq(p)



An example of the performance of the polygonsToRaster vs. polygonValues

> nc <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1], proj4string=CRS("+proj=longlat +datum=NAD27"))
> r = raster(nc)
> res(r) = 0.1
> r[] = round(runif(ncell(r)))
> system.time( polygonsToRaster(nc, r) )
Found 100 region(s) and 108 polygon(s)
   user  system elapsed
   4.91    0.00    4.92
> system.time( polygonValues(nc, r) )
   user  system elapsed
  40.69    0.09   40.78
>


Robert


On Wed, Sep 1, 2010 at 3:03 PM, Jorge Fernando Saraiva de Menezes
<jorgefernandosaraiva at gmail.com> wrote:
> Dear list,
>
> I have a raster, with a grid resolution of 250m2 and values of 0,1 or NA,
> and a shapefile with about 5000 polygons of areas varying from 221m2 to
> 323,629,571,955m2, which means that a polygon might have 1 billion cells
> (fortunaly, these are very few)
>
> I would like to obtain for each polygon the percentage of 0, 1 and NAs cells
> per island... I thought the following could work:
>
> polygonValues method
>
> poly_map=readShapePoly("shapefile path")
> raster_map=raster("raster path")
> objective=polygonValues(poly_map,srtm)
>
> zonal method
>
> poly_map=readShapePoly("shapefile path")
> raster_map=raster("raster path")
> rasterofpoly=polygonsToRaster(poly_map)
> objective=zonal(raster_map,rasterofpoly,stat="sum",na.rm=T)
>
> polygonstoRaster method
>
> poly_map=readShapePoly("shapefile path")
> raster_map=raster("raster path")
> objective=polygonsToRaster(poly_map,raster_map, mask=T,filename="path to new
> raster")
>
>
> but all of those take a long time to work... and i don't know a quick way of
> testing it's efficiency, so I would like to know if anyone knows which of
> those would perform the calculation faster in this situation, and if any of
> these methods are viable (i.e. would not take months or years)
>
> I have acess to a workstation with 4 processors (1 GHz each , i thnk) and
> 8Gb of memory (not sure about this configuration), using ubuntu
>
> Thanks in advance,
> Jorge Menezes
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From roman.lustrik at gmail.com  Thu Sep  2 07:03:51 2010
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Thu, 2 Sep 2010 07:03:51 +0200
Subject: [R-sig-Geo] which cost less computer effort? PolygonValues(),
 polygonsToRaster(), or zonal()?
In-Reply-To: <AANLkTim3MOz5AvErMPRLfUvATQEBvsgbBDZaT2xGp8Mv@mail.gmail.com>
References: <AANLkTi=aPOw3foEKhr=+-wOm7BwHzWnime1Zz53O-8j2@mail.gmail.com>
	<AANLkTim3MOz5AvErMPRLfUvATQEBvsgbBDZaT2xGp8Mv@mail.gmail.com>
Message-ID: <AANLkTinYGbxvWTEBMb6Tn-Xhzgtp6-XOC9Oa9W1zDUt2@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100902/4f1eb628/attachment.pl>

From k.lamb at sphsu.mrc.ac.uk  Thu Sep  2 11:47:13 2010
From: k.lamb at sphsu.mrc.ac.uk (Karen Lamb)
Date: Thu, 2 Sep 2010 10:47:13 +0100
Subject: [R-sig-Geo] Removing residual spatial autocorrelation from a
	negative binomial regression model
Message-ID: <9038B13926C44E65BFF262ABB4636946@ibmroompc>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100902/fe0efcf8/attachment.pl>

From tom.richardson at bristol.ac.uk  Thu Sep  2 11:58:08 2010
From: tom.richardson at bristol.ac.uk (Tom_R)
Date: Thu, 2 Sep 2010 02:58:08 -0700 (PDT)
Subject: [R-sig-Geo] converting home range contours in 'adehabitat' to
	polygons
Message-ID: <1283421488448-5490501.post@n2.nabble.com>


Hi List,
 I am trying to calculate the  area of overlap amongst a list of animal home
ranges; ten ants each, from five colonies. The help page for kernelUD
{adehabitat} states, " getverticeshr stores the home range contour as
objects of class area in a list of class kver, with one component per
animal."  [the 'components' are of class 'area'] .
However, I am having difficulties converting the list (class  'kver') of
home ranges (class 'area') to a list of polygons that can be manipulated
with spatstat.


        xy   <-  data.frame(cbind(x[colony==i & ant==j],  y[colony==i &
ant==j]))
	who <- as.factor(ant[colony==i & ant==j])
	ud   <-  kernelUD(xy, who, h = "href",  same4all = TRUE)
	ver  <- getverticeshr(ud, 50)
        class(ver)
> [1] "kver"


After converting the 'ver' list to polygons,  I would convert to owin
objects (in the spatstat package) and then use the functions intersect.owin
and area.owin to find the area of the overlap.

In summary:
1) How to convert a list of class kver, with one area object per animal?

Many thanks in advance!!
Tom Richardson




-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/converting-home-range-contours-in-adehabitat-to-polygons-tp5490501p5490501.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From kili at grf.rs  Thu Sep  2 14:59:08 2010
From: kili at grf.rs (kili at grf.rs)
Date: Thu, 2 Sep 2010 14:59:08 +0200
Subject: [R-sig-Geo] How to calculate R2 coefficient of determination for
	variogram ?
Message-ID: <970d0fdb2ff6f7888f5e8ae12c37e39d.squirrel@mail.grf.bg.ac.rs>


Hi list,

I'm not sure in my calculation of R2 coefficient of determination for
variogram. Could someone check it, or give the better way.

Here is an example:

library(sp)
library(gstat)

data(meuse)
coordinates(meuse) <- ~x+y
s.v<- variogram(log1p(zinc)~sqrt(dist), meuse)
vr.fit <- fit.variogram(variogram(log1p(zinc)~sqrt(dist), meuse), vgm(0,
"Exp", 300, 1))

## SSErr is it summ of weighted squares of residuals ?
(SSErr<-attr(vr.fit,"SSErr"))

## SStot total sum of weighted squares

weig<-s.v$np/s.v$dist^2  #fit.method	 fitting method, used by gstat. The
default method uses weights $N_h/h^2$ with $N_h$ the number of point pairs
and $h$ the distance.


(SStot<- sum(weig*(s.v$gamma-mean(s.v$gamma))^2)  )
(R2<-1-SSErr/SStot    )    # R2 coefficient of determination

Best regards,
Kili


From edzer.pebesma at uni-muenster.de  Thu Sep  2 15:32:43 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 02 Sep 2010 15:32:43 +0200
Subject: [R-sig-Geo] How to calculate R2 coefficient of determination
 for	variogram ?
In-Reply-To: <970d0fdb2ff6f7888f5e8ae12c37e39d.squirrel@mail.grf.bg.ac.rs>
References: <970d0fdb2ff6f7888f5e8ae12c37e39d.squirrel@mail.grf.bg.ac.rs>
Message-ID: <4C7FA77B.10906@uni-muenster.de>

It looks quite OK; I suspect however that instead of using
mean(s.v$gamma) for SSTot, for this mean the same weighting scheme
should have been used.
--
Edzer

On 09/02/2010 02:59 PM, kili at grf.rs wrote:
> 
> Hi list,
> 
> I'm not sure in my calculation of R2 coefficient of determination for
> variogram. Could someone check it, or give the better way.
> 
> Here is an example:
> 
> library(sp)
> library(gstat)
> 
> data(meuse)
> coordinates(meuse) <- ~x+y
> s.v<- variogram(log1p(zinc)~sqrt(dist), meuse)
> vr.fit <- fit.variogram(variogram(log1p(zinc)~sqrt(dist), meuse), vgm(0,
> "Exp", 300, 1))
> 
> ## SSErr is it summ of weighted squares of residuals ?
> (SSErr<-attr(vr.fit,"SSErr"))
> 
> ## SStot total sum of weighted squares
> 
> weig<-s.v$np/s.v$dist^2  #fit.method	 fitting method, used by gstat. The
> default method uses weights $N_h/h^2$ with $N_h$ the number of point pairs
> and $h$ the distance.
> 
> 
> (SStot<- sum(weig*(s.v$gamma-mean(s.v$gamma))^2)  )
> (R2<-1-SSErr/SStot    )    # R2 coefficient of determination
> 
> Best regards,
> Kili
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From basille at ase-research.org  Thu Sep  2 16:06:33 2010
From: basille at ase-research.org (Mathieu Basille)
Date: Thu, 02 Sep 2010 10:06:33 -0400
Subject: [R-sig-Geo] converting home range contours in 'adehabitat' to
 polygons
In-Reply-To: <1283421488448-5490501.post@n2.nabble.com>
References: <1283421488448-5490501.post@n2.nabble.com>
Message-ID: <4C7FAF69.8090402@ase-research.org>

Tom,

Did you have a look at 'area2spol'?

 From the example of 'kernelUD':

data(puechabon)
loc <- puechabon$locs[, c("X", "Y")]
id <- puechabon$locs[, "Name"]
(ud <- kernelUD(loc, id))
ver <- getverticeshr(ud, 95)

Then, you can do something like that:

spver <- lapply(ver, area2spol)

Which returns a list of SpatialPolygons (sp):

class(spver[[1]])
[1] "SpatialPolygons"
attr(,"package")
[1] "sp"

I don't really know spatstat but there might be some conversion tools 
between sp and spatsat.

Hope this helps,
Mathieu.


Le 02/09/2010 05:58, Tom_R a ?crit :
>
> Hi List,
>   I am trying to calculate the  area of overlap amongst a list of animal home
> ranges; ten ants each, from five colonies. The help page for kernelUD
> {adehabitat} states, " getverticeshr stores the home range contour as
> objects of class area in a list of class kver, with one component per
> animal."  [the 'components' are of class 'area'] .
> However, I am having difficulties converting the list (class  'kver') of
> home ranges (class 'area') to a list of polygons that can be manipulated
> with spatstat.
>
>
>          xy<-  data.frame(cbind(x[colony==i&  ant==j],  y[colony==i&
> ant==j]))
> 	who<- as.factor(ant[colony==i&  ant==j])
> 	ud<-  kernelUD(xy, who, h = "href",  same4all = TRUE)
> 	ver<- getverticeshr(ud, 50)
>          class(ver)
>> [1] "kver"
>
>
> After converting the 'ver' list to polygons,  I would convert to owin
> objects (in the spatstat package) and then use the functions intersect.owin
> and area.owin to find the area of the overlap.
>
> In summary:
> 1) How to convert a list of class kver, with one area object per animal?
>
> Many thanks in advance!!
> Tom Richardson
>
>
>
>

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From gianni.lavaredo at gmail.com  Thu Sep  2 16:23:38 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Thu, 2 Sep 2010 16:23:38 +0200
Subject: [R-sig-Geo] elegant way to processing several loops in the same time
Message-ID: <AANLkTimQCqeq3FMC2BED8SUbkCgExsGBeQMZ1PL-WpsA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100902/572910d9/attachment.pl>

From carson.farmer at gmail.com  Thu Sep  2 16:35:05 2010
From: carson.farmer at gmail.com (Carson Farmer)
Date: Thu, 2 Sep 2010 15:35:05 +0100
Subject: [R-sig-Geo] elegant way to processing several loops in the same
	time
In-Reply-To: <AANLkTimQCqeq3FMC2BED8SUbkCgExsGBeQMZ1PL-WpsA@mail.gmail.com>
References: <AANLkTimQCqeq3FMC2BED8SUbkCgExsGBeQMZ1PL-WpsA@mail.gmail.com>
Message-ID: <AANLkTimvSFqPy4TyUHwDrXpQyRJ+k5x0V5zhsouRbbUo@mail.gmail.com>

Gianni,

Have a look at the foreach package from REvolution Analytics. This
lets you run each loop of a for loop on a separate processor.
I used it for some bootstrapping work a while back and it works really
nicely and simply:

http://www.carsonfarmer.com/?p=668

Carson

On 2 September 2010 15:23, gianni lavaredo <gianni.lavaredo at gmail.com> wrote:
> Dear Researchers,
>
> i am analyzing statistics of several grids image (i.e. 3 patch: A1, A2, A3)
> for my work with 4 resolution scale (0.5,1.0,1.5,2.0). This take a lot of
> time. I am asking about reference and web link to learn how I can run in the
> same time the same loop for the patch A1, A2 and A3. I open in the same time
> three windows of R but It's not elegant.
>
> Thanks in advance
> Gianni
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Carson J. Q. Farmer
ISSP Doctoral Fellow
National Centre for Geocomputation
National University of Ireland, Maynooth,
http://www.carsonfarmer.com/


From bart at njn.nl  Thu Sep  2 16:43:36 2010
From: bart at njn.nl (bart)
Date: Thu, 02 Sep 2010 16:43:36 +0200
Subject: [R-sig-Geo] elegant way to processing several loops in the same
 time
In-Reply-To: <AANLkTimQCqeq3FMC2BED8SUbkCgExsGBeQMZ1PL-WpsA@mail.gmail.com>
References: <AANLkTimQCqeq3FMC2BED8SUbkCgExsGBeQMZ1PL-WpsA@mail.gmail.com>
Message-ID: <4C7FB818.209@njn.nl>

Hi Gianni

Depending on the computer your using it can make sense do do things in 
parallel. If you have a single core chip it is not very useful to run 
multiple tasks at the same time, for multi core chips it is.

There are a lot of possible ways to do that see:
http://cran.r-project.org/web/views/HighPerformanceComputing.html

I myself run sge (sun grid engine) on my own computer (ubuntu) and use 
the Rsge package to interface with it. This is mainly useful for me 
since it allows easy scaling up to cluster computers using sge. If your 
not planing that sge is maybe not the most sensible option.

There is also a r-sig-hpc list that deals with high performance issues 
maybe it is worth going through the archive.

Bart

On 09/02/2010 04:23 PM, gianni lavaredo wrote:
> Dear Researchers,
>
> i am analyzing statistics of several grids image (i.e. 3 patch: A1, A2, A3)
> for my work with 4 resolution scale (0.5,1.0,1.5,2.0). This take a lot of
> time. I am asking about reference and web link to learn how I can run in the
> same time the same loop for the patch A1, A2 and A3. I open in the same time
> three windows of R but It's not elegant.
>
> Thanks in advance
> Gianni
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>


From ricardorodot02 at gmail.com  Thu Sep  2 21:36:51 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Thu, 2 Sep 2010 14:36:51 -0500
Subject: [R-sig-Geo] perform calculations between attributes
Message-ID: <AANLkTim_FFBXW2UCa1amGU39nGLgMnNL6TxvcEKJmq8T@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100902/6e50a535/attachment.pl>

From ricardorodot02 at gmail.com  Thu Sep  2 21:41:30 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Thu, 2 Sep 2010 14:41:30 -0500
Subject: [R-sig-Geo] bibliographical information of R and Gis
Message-ID: <AANLkTikEMxxppF-pu-oFXXc8i5-KE9pQCtZV7nuJZtyV@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100902/c76fe945/attachment.pl>

From ricardorodot02 at gmail.com  Thu Sep  2 21:56:31 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Thu, 2 Sep 2010 14:56:31 -0500
Subject: [R-sig-Geo] perform calculations between attributes
In-Reply-To: <AANLkTimgdySc3DbjfhZ9Ke6Tv70NQ-F_dMq7s0qC2bp0@mail.gmail.com>
References: <AANLkTim_FFBXW2UCa1amGU39nGLgMnNL6TxvcEKJmq8T@mail.gmail.com>
	<AANLkTim_OA-Xmch-Of+c3WnAS4Qd+JgBVgemo3qQwdiy@mail.gmail.com>
	<AANLkTimgdySc3DbjfhZ9Ke6Tv70NQ-F_dMq7s0qC2bp0@mail.gmail.com>
Message-ID: <AANLkTikA6_-m5gpqtMDb8O0skXaRy=NO-1_GLiSCcXOb@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100902/5b5ff39d/attachment.pl>

From nataliarodriguezsantos at gmail.com  Thu Sep  2 22:12:20 2010
From: nataliarodriguezsantos at gmail.com (Natalia Rodriguez Santos)
Date: Thu, 2 Sep 2010 15:12:20 -0500
Subject: [R-sig-Geo] Help with Mod05 & Mod06 projections
Message-ID: <AANLkTi=0WS81jdVqkKcGozQYXkYF0e8b=rotSi=x9fDd@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100902/518a6090/attachment.pl>

From cheluna at gmail.com  Fri Sep  3 01:12:25 2010
From: cheluna at gmail.com (Consuelo Hermosilla)
Date: Fri, 3 Sep 2010 01:12:25 +0200
Subject: [R-sig-Geo] scatter.enfa tip (adehabitat)
Message-ID: <AANLkTinxSHVuSJbF0e02+d_--XPACKX6v+EopmN1=DmK@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100903/efec65a8/attachment.pl>

From basille at ase-research.org  Fri Sep  3 02:22:55 2010
From: basille at ase-research.org (Mathieu Basille)
Date: Thu, 02 Sep 2010 20:22:55 -0400
Subject: [R-sig-Geo] scatter.enfa tip (adehabitat)
In-Reply-To: <AANLkTinxSHVuSJbF0e02+d_--XPACKX6v+EopmN1=DmK@mail.gmail.com>
References: <AANLkTinxSHVuSJbF0e02+d_--XPACKX6v+EopmN1=DmK@mail.gmail.com>
Message-ID: <4C803FDF.3080900@ase-research.org>

Dear Consuelo,

If the labels overlap a lot, you won't manage to do anything with it 
from R. You can play, as you tried, with the different parameters, or 
even build your plot step by step, but my best advice would be to use 
the package Cairo, and especially CairoSVG, to export it to svg, and 
then edit from Inkscape.

 From the example of scatter.enfa :

library(Cairo)
data(lynxjura)

map <- lynxjura$map

## We keep only "wild" indices.
tmp <- lynxjura$locs[,4]!="D"
locs <- lynxjura$locs[tmp, c("X","Y")]

## We perform a square root transformation
## of the variable to normalize it
map[,4] <- sqrt(map[,4])

## We perform the ENFA
tmp <- data2enfa(map, locs[tmp, c("X","Y")])
(enfa1 <- enfa(dudi.pca(tmp$tab, scannf=FALSE),
                tmp$pr, scannf = FALSE))
CairoSVG()
scatter(enfa1)
dev.off()

And then check for the svg file in your working directory.

Hope this helps,
Mathieu.


Le 02/09/2010 19:12, Consuelo Hermosilla a ?crit :
> Hi guys,
>
> I just need a quick tip... I'm using the function scatter.enfa to plot my
> results, but I have a problem with the labels of the biplot arrows (the
> boxes). Two of them overlap... I've been trying to changing the size of the
> labels (trying cex.lab, cex.labels), the font of the labels (using font.lab,
> font.labels), trying to change the position of the labels (using pos =c()),
> but nothing seems to work... is there a way to change the position of the
> labels? or, do you have any other idea?
> Thanks!!!
>
> Consuelo
>
> -------------
> Consuelo Hermosilla
> PhD student
> Departamento de Ecolog?a y Biolog?a Animal
> Departamento de Bioqu?mica, Gen?tica e Inmunolog?a, ?rea de Gen?tica
> Facultad de Ciencias del Mar
> Campus de As Lagoas-Marcosende
> Universidad de Vigo
> 36310 Vigo
> SPAIN
> Mobile: +34 692 633 298
>
> oooO
> (     ) Oooo
>      (   (     )
>     _)    )  /
>           (_/
>
> Stop Gaza Massacre
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From cheluna at gmail.com  Fri Sep  3 09:23:40 2010
From: cheluna at gmail.com (Consuelo Hermosilla)
Date: Fri, 3 Sep 2010 09:23:40 +0200
Subject: [R-sig-Geo] scatter.enfa tip (adehabitat)
In-Reply-To: <4C803FDF.3080900@ase-research.org>
References: <AANLkTinxSHVuSJbF0e02+d_--XPACKX6v+EopmN1=DmK@mail.gmail.com>
	<4C803FDF.3080900@ase-research.org>
Message-ID: <AANLkTi=wf0HYAQtDwgbXYq4Lmmo9X2P0C8Udk3jgK5aS@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100903/ac0abe9e/attachment.pl>

From german.sanchez at ais-int.com  Fri Sep  3 15:05:08 2010
From: german.sanchez at ais-int.com (German Sanchez Hernandez)
Date: Fri, 3 Sep 2010 15:05:08 +0200
Subject: [R-sig-Geo] Complete neighbours
Message-ID: <B3A13AB1-0B0F-4DCC-B717-4333A35407EE@ais-int.com>

Dear list,

I would like to complete my neighbour list in order to increase the number of neighbours of regions with less neighbours (links) than a certain number. The idea is to complete these links using knearneigh function.


My try:

nb <- poly2nb(map)
# Compute distribution of linkage:
distr <- as.data.frame(table(card(nb)))
# Try to identify the "isolated" regions (equal or less than, for example, 3 neighbours
minim <- 3 # It's a computed number
isolated <- subset(nb, subset=card(nb) <= minim)
# Get the "isolated" region IDs
regions <- attr(unclass(isolated), 'region.id')
# Modify nb using knearneigh ??


# Alternative 2:
nbmat <- nb2mat(nb)
# Modify nbmat ??, mat2listw, listw2nb


# Alternative 3:
listw <- nb2listw(nb)
# Modify listw ??, listw2nb


The question is:

How to modify nb (or nbmat or listw) to increase the number of links of the "isolated" regions?

Any idea?

Thank you!
Germ?n S?nchez

From Scott.Waichler at pnl.gov  Fri Sep  3 16:05:58 2010
From: Scott.Waichler at pnl.gov (Waichler, Scott R)
Date: Fri, 3 Sep 2010 07:05:58 -0700
Subject: [R-sig-Geo] Any resources for "An Introduction to Applied
	Geostatistics"?
Message-ID: <A632B3F93D861843A3C966F3962C3F8401080EF3E8F3@EMAIL05.pnl.gov>

I was wondering if there are any R resources (datasets, functions) based on the book An Introduction to Applied Geostatistics by EH Isaaks and RM Srivastava ("Geostatistics with Mo and Ed"), 1989, Oxford University Press.  Mind you, I'm not a university student looking for shortcuts, just a self-teaching worker trying to get the most out of this wonderful text.

Thanks,
Scott Waichler
Pacific Northwest National Laboratory
Richland, Washington  USA
scott.waichler at pnl.gov


From ashton at msu.edu  Fri Sep  3 17:11:17 2010
From: ashton at msu.edu (Ashton Shortridge)
Date: Fri, 3 Sep 2010 11:11:17 -0400
Subject: [R-sig-Geo] Any resources for "An Introduction to Applied
	Geostatistics"?
In-Reply-To: <A632B3F93D861843A3C966F3962C3F8401080EF3E8F3@EMAIL05.pnl.gov>
References: <A632B3F93D861843A3C966F3962C3F8401080EF3E8F3@EMAIL05.pnl.gov>
Message-ID: <201009031111.17570.ashton@msu.edu>

Hi Scott, and list,

the Walker Lake dataset, which is the one in Isaaks & Srivastava, is in the 
gstat library. If you have gstat installed for R, just do:
library(gstat)
?walker

Yours,

Ashton

On 2010-09-03, Waichler, Scott R, wrote:
> I was wondering if there are any R resources (datasets, functions) based on
> the book An Introduction to Applied Geostatistics by EH Isaaks and RM
> Srivastava ("Geostatistics with Mo and Ed"), 1989, Oxford University
> Press.  Mind you, I'm not a university student looking for shortcuts, just
> a self-teaching worker trying to get the most out of this wonderful text.
> 
> Thanks,
> Scott Waichler
> Pacific Northwest National Laboratory
> Richland, Washington  USA
> scott.waichler at pnl.gov
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-----
Ashton Shortridge
Associate Professor			ashton at msu.edu
Dept of Geography			http://www.msu.edu/~ashton
235 Geography Building		ph (517) 432-3561
Michigan State University		fx (517) 432-1671


From edzer.pebesma at uni-muenster.de  Fri Sep  3 18:00:10 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 03 Sep 2010 18:00:10 +0200
Subject: [R-sig-Geo] Any resources for "An Introduction to
	Applied	Geostatistics"?
In-Reply-To: <201009031111.17570.ashton@msu.edu>
References: <A632B3F93D861843A3C966F3962C3F8401080EF3E8F3@EMAIL05.pnl.gov>
	<201009031111.17570.ashton@msu.edu>
Message-ID: <4C811B8A.1040800@uni-muenster.de>

The exhaustive data set, which is referenced to in the ?walker pages, is
not found there but can be found when searching from where
www.ai-geostats.org currently redirects to, click data sets, and you'll
find:

https://52north.org/twiki/bin/view/AI_GEOSTATS/AI_GEOSTATSData

If someone can provide me with a demo script that reproduces the
analysis steps of Mo and Ed, I'd be happy to add it to gstat.

On 09/03/2010 05:11 PM, Ashton Shortridge wrote:
> Hi Scott, and list,
> 
> the Walker Lake dataset, which is the one in Isaaks & Srivastava, is in the 
> gstat library. If you have gstat installed for R, just do:
> library(gstat)
> ?walker
> 
> Yours,
> 
> Ashton
> 
> On 2010-09-03, Waichler, Scott R, wrote:
>> I was wondering if there are any R resources (datasets, functions) based on
>> the book An Introduction to Applied Geostatistics by EH Isaaks and RM
>> Srivastava ("Geostatistics with Mo and Ed"), 1989, Oxford University
>> Press.  Mind you, I'm not a university student looking for shortcuts, just
>> a self-teaching worker trying to get the most out of this wonderful text.
>>
>> Thanks,
>> Scott Waichler
>> Pacific Northwest National Laboratory
>> Richland, Washington  USA
>> scott.waichler at pnl.gov
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> -----
> Ashton Shortridge
> Associate Professor			ashton at msu.edu
> Dept of Geography			http://www.msu.edu/~ashton
> 235 Geography Building		ph (517) 432-3561
> Michigan State University		fx (517) 432-1671
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From koday at processtrends.com  Fri Sep  3 18:55:26 2010
From: koday at processtrends.com (dkod)
Date: Fri, 3 Sep 2010 09:55:26 -0700 (PDT)
Subject: [R-sig-Geo] SpatialGridDataFrame Help
In-Reply-To: <AANLkTi=PK7uk9V-nEn-6i=Vm+gWz=Rw0ey3FOucPgboW@mail.gmail.com>
References: <AANLkTi=PK7uk9V-nEn-6i=Vm+gWz=Rw0ey3FOucPgboW@mail.gmail.com>
Message-ID: <1283532926956-5496138.post@n2.nabble.com>


Andy

Thank you for taking the time to rework my script.

You said ....
I read in the points first using the coordinates specified in the file
rather than following your approach of creating a grid and slotting the
vector of data into it. 


Good advice. I had the temperature anomaly data upside down. 


I look forward to working with your rworldmap package.



_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/SpatialGridDataFrame-Help-tp5487619p5496138.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From ricardorodot02 at gmail.com  Fri Sep  3 19:33:01 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Fri, 3 Sep 2010 12:33:01 -0500
Subject: [R-sig-Geo] tutorials of manage attributes
Message-ID: <AANLkTi=qZm-AsNZmHJKMxxFk9eCydqx09b5R2YPDkuir@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100903/b9aad7a5/attachment.pl>

From tmj at visi.com  Fri Sep  3 23:08:33 2010
From: tmj at visi.com (Thomas Juntunen)
Date: Fri, 3 Sep 2010 16:08:33 -0500
Subject: [R-sig-Geo] Help with Mod05 & Mod06 projections
In-Reply-To: <AANLkTi=0WS81jdVqkKcGozQYXkYF0e8b=rotSi=x9fDd@mail.gmail.com>
References: <AANLkTi=0WS81jdVqkKcGozQYXkYF0e8b=rotSi=x9fDd@mail.gmail.com>
Message-ID: <20100903160833867879.b6ec54bf@visi.com>

On Thu, 2 Sep 2010 15:12:20 -0500, Natalia Rodriguez Santos wrote:

> I can?t find the spatial projection information for MOD05 and MOD06
> atmospher MODIS products.
> Might someone help me with some link that describe me this information?

Most MODIS products use the Sinusoidal projection with the WGS84 datum for 
gridded output. There is a reprojection tool (Java-based, IIRC) available:

https://lpdaac.usgs.gov/lpdaac/tools/modis_reprojection_tool


HTH,
Thomas Juntunen
MGIS Program
University of Minnesota


From brwin338 at aol.com  Sat Sep  4 00:30:05 2010
From: brwin338 at aol.com (brwin338 at aol.com)
Date: Fri, 03 Sep 2010 18:30:05 -0400
Subject: [R-sig-Geo] computing square kilometers in shape file polygons
Message-ID: <8CD19CEB0DB38E6-B84-366B@webmail-m081.sysops.aol.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100903/712353cf/attachment.pl>

From dan.putler at sauder.ubc.ca  Sat Sep  4 00:51:37 2010
From: dan.putler at sauder.ubc.ca (Dan Putler)
Date: Fri, 3 Sep 2010 15:51:37 -0700
Subject: [R-sig-Geo] computing square kilometers in shape file polygons
Message-ID: <4C817BF9.8000300@sauder.ubc.ca>

Hi Joe,

I assume you want to append the area to the attribute data frame. If yes, the
function pasted below should help you out, assuming your study area
isn't too large. It is based on re-projecting the data into an area
preserving projection, and then calculating the areas in that
projection. I've mostly worked with it in British Columbia, so use a BC
Albers equal area project (EPSG:3005). The map units of your projection
will likely be in meters, so the calculated areas will be in m^2, which
will be easy to convert.

Dan

The code:

# The function areaPolygons() returns the area of the polygons in a
# SpatialPolygons or SpatialPolygonsDataFrame object. If a proj4string is
# provided then the areas are calculated in the map units of this
projection.
# If it is not provided, then the areas are calculated in the map units
of the
# original SpatialPolygon or SpatialPolygonsDataFrame object. If the
projection
# of the sp object is geographic (i.e., lon/lat) the areas are in
decimal degrees^2.

# Requires the sp and rgdal packages

# Programmer: Dan Putler
# Created: 06Nov09
# Modified: 06Nov09

areaPolygons<- function(spPoly, proj4string = NULL) {
      if(class(spPoly)[[1]] != "SpatialPolygonsDataFrame"&
class(spPoly)[[1]] != "SpatialPolygons") {
          stop("spPoly must be a SpatialPolygonsDataFrame or a
SpatialPolygons object.")
      }
      require(sp)
      require(rgdal)
      if(!is.null(proj4string)) {
          if(class(proj4string)[[1]] != "CRS") {
              stop("The proj4string must be of class CRS")
          }
          spP<- spTransform(spPoly, CRS = proj4string)
      }
      else {
          spP<- spPoly
      }
      areas<- unlist(lapply(spP at polygons, function(x) a<- x at area))
      return(areas)
}


On 09/03/2010 03:30 PM, brwin338 at aol.com wrote:
>  Good Afternoon
>  Does any one know of a package/function that could be used to compute the square kilometers for polygons in a long-lat projected shapefile?
>  I can access the values in the "area" slots in the object resulting from using maptool's  "readShapePoly" command.  I have approximated the km^2 from these values by using one of the polygons's (such as a given state's) known area in km^2 and rescaling the polygon's "area" relative to the state's known area.  I then applied this "scaling factor" to the other polygons in my shapefile object to approximate the other polygons' are in km^2.
>
>  However, if I understand things correctly, my approximate "area to km^2" scaling  will become increasing distorted as I move north or south relative to my original "normalizing" state.  Is there a function that can compensate for changes in latitude when computing the polygon areas associated with long-lat polygons?  I hope this question is somewhat coherent
>  Thanks
>  Joe
>
>
>
>
>  	[[alternative HTML version deleted]]
>
>  _______________________________________________
>  R-sig-Geo mailing list
>  R-sig-Geo at stat.math.ethz.ch
>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From r.hijmans at gmail.com  Sat Sep  4 00:55:25 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 3 Sep 2010 15:55:25 -0700
Subject: [R-sig-Geo] computing square kilometers in shape file polygons
In-Reply-To: <8CD19CEB0DB38E6-B84-366B@webmail-m081.sysops.aol.com>
References: <8CD19CEB0DB38E6-B84-366B@webmail-m081.sysops.aol.com>
Message-ID: <AANLkTin+vZ7fPm=qtsC0ZWtkBOjFgBf1jcaTTyk_cO=d@mail.gmail.com>

Joe,

The "areaPolygon" function in the "geosphere" package can do this.

Robert

On Fri, Sep 3, 2010 at 3:30 PM,  <brwin338 at aol.com> wrote:
>
> Good Afternoon
> Does any one know of a package/function that could be used to compute the square kilometers for polygons in a long-lat projected shapefile?
> I can access the values in the "area" slots in the object resulting from using maptool's ?"readShapePoly" command. ?I have approximated the km^2 from these values by using one of the polygons's (such as a given state's) known area in km^2 and rescaling the polygon's "area" relative to the state's known area. ?I then applied this "scaling factor" to the other polygons in my shapefile object to approximate the other polygons' are in km^2.
>
> However, if I understand things correctly, my approximate "area to km^2" scaling ?will become increasing distorted as I move north or south relative to my original "normalizing" state. ?Is there a function that can compensate for changes in latitude when computing the polygon areas associated with long-lat polygons? ?I hope this question is somewhat coherent
> Thanks
> Joe
>
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From mhwang4 at gmail.com  Sat Sep  4 01:25:46 2010
From: mhwang4 at gmail.com (Myunghwa Hwang)
Date: Fri, 3 Sep 2010 16:25:46 -0700
Subject: [R-sig-Geo] Survey participants needed ($5 for 10-15 minutes)
Message-ID: <AANLkTinECmUC_V8c6Z3oN9UGGNp6cutX2z4ma6LWhpat@mail.gmail.com>

Hello, all!

First of all, I am sorry for cross-posting.

I am a PhD Student working at GeoDa Center at Arizona State University.
For my dissertation research, I am currently conducting an online survey on
usability of a web-based spatial analysis tool.
In this survey you will test an online tool for spatial cluster analysis
and evaluate its properties from a user perspective.
To thank you for your help, we offer you $5 Amazon Gift Certificate when you
complete the survey.

For more information, please read the section below.
Before beginning the survey, please watch this linked video:
http://www.youtube.com/watch?v=Wb-qmd1iDTI
After watching the video, you can visit the following website to participate
in the survey:
http://ec2-184-72-164-144.compute-1.amazonaws.com/web_sa3/

I really appreciate all your help!
Please do not hesitate to contact me if you have any questions.

Sincerely,

Myunghwa Hwang


====================================================================

*Looking for Usability Evaluation Participants*

An exciting opportunity awaits you!
Myunghwa Hwang and Elizabeth Wentz in School of Geographical Sciences and
Urban Planning at Arizona State University (ASU) are looking for people to
help evaluate and review a we-based software program for local cluster
analysis. As a participant in this software evaluation, *you will be given a
$5 Amazon Gift Certificate*
as well as have an opportunity to influence the direction, appearance, and
?look and feel? of web-based spatial analysis software programs.

We are looking for potential candidates that represent general users of
spatial analysis software programs.
*Anyone who is over 18 years old and has the following characteristics can
help our usability evaluation:*

   - Casual computer users
   - Some experiences with statistical tools (e.g., SPSS, SAS, GeoDa), GIS
   packages (e.g., ArcGIS, MapInfo, QGIS), or other online geospatial tools
   (e.g., Google Earth, Google or Yahoo Map)
   - Some knowledge of spatial analysis techniques (e.g., exploratory data
   analysis, spatial autocorrelation analysis, spatial regression)
   - No involvement with any previous versions of this survey

In other words, we are looking for people who are interested in using
software programs to visualize and analyze map data. Will you help us?

If you would like to participate in our usability evaluation,
please check out this tutorial video
stream<http://www.youtube.com/watch?v=Wb-qmd1iDTI>first and visit our
online survey site at the following location:
http://ec2-184-72-164-144.compute-1.amazonaws.com/web_sa3/

The software evaluation generally takes no more than 15 minutes, and our
survey system will guide you step-by-step.
If you are interested in participating in our evaluation and have any other
questions, please send an email to us (mhwang4 at gmail.com or mhwang3 at asu.edu
).

We hope that you will take an active role in enhancing usability of spatial
analytical software programs.
Your participation is greatly appreciated.

-- 
Myunghwa Hwang
GeoDa Center
School of Geographical Sciences and Urban Planning
Arizona State University
mhwang4 at gmail.com or Myunghwa.Hwang at asu.edu



-- 
Myunghwa Hwang
GeoDa Center
School of Geographical Sciences and Urban Planning
Arizona State University
mhwang4 at gmail.com or Myunghwa.Hwang at asu.edu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100903/9aeb9872/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: flyer2.pdf
Type: application/pdf
Size: 57395 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100903/9aeb9872/attachment.pdf>

From rodrigodecarreras at gmail.com  Sat Sep  4 20:53:17 2010
From: rodrigodecarreras at gmail.com (Rodrigo De Carreras)
Date: Sat, 4 Sep 2010 14:23:17 -0430
Subject: [R-sig-Geo] Problem with spatstat
In-Reply-To: <AANLkTinECmUC_V8c6Z3oN9UGGNp6cutX2z4ma6LWhpat@mail.gmail.com>
References: <AANLkTinECmUC_V8c6Z3oN9UGGNp6cutX2z4ma6LWhpat@mail.gmail.com>
Message-ID: <552487C4-F314-4049-94CA-CE3704B8E6DF@gmail.com>

Hi list,

I am working with the "ape" package in order to produce
some minimum spanning trees and I am using the
"spatstat" package to perform some additional analysis.

I worked with spatstat many times without problems,
but now when I call for the package the following 
error appears with mgcv: 

require("spatstat")

Loading required package: spatstat
Loading required package: mgcv
Error : .onAttach failed in attachNamespace() for 'mgcv', details:
call: formatDL(nm, txt, indent = max(nchar(nm, "w")) + 3)
error: incorrect values of 'indent' and 'width'
Error: package 'mgcv' could not be loaded

I tried to install mgcv alone using install.packages("mgcv")
but the error persists.

I am working in a Mac Book Pro through Snow Leopard.

Any idea about how to solve it?

Thanks a lot,

Rodrigo


From Roger.Bivand at nhh.no  Sun Sep  5 21:14:46 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 5 Sep 2010 21:14:46 +0200 (CEST)
Subject: [R-sig-Geo] Complete neighbours
In-Reply-To: <B3A13AB1-0B0F-4DCC-B717-4333A35407EE@ais-int.com>
References: <B3A13AB1-0B0F-4DCC-B717-4333A35407EE@ais-int.com>
Message-ID: <alpine.LRH.2.00.1009051953590.28150@reclus.nhh.no>

On Fri, 3 Sep 2010, German Sanchez Hernandez wrote:

> Dear list,
>
> I would like to complete my neighbour list in order to increase the 
> number of neighbours of regions with less neighbours (links) than a 
> certain number. The idea is to complete these links using knearneigh 
> function.
>
>
> My try:
>
> nb <- poly2nb(map)
> # Compute distribution of linkage:
> distr <- as.data.frame(table(card(nb)))
> # Try to identify the "isolated" regions (equal or less than, for example, 3 neighbours
> minim <- 3 # It's a computed number
> isolated <- subset(nb, subset=card(nb) <= minim)
> # Get the "isolated" region IDs
> regions <- attr(unclass(isolated), 'region.id')
> # Modify nb using knearneigh ??

For the edited version of nblag_cumul on R-forge on the spdep project, 
you'd do something like:

example(columbus)
table(card(col.gal.nb))
k4 <- knn2nb(knearneigh(coordinates(columbus), 4))
mod_nb <- nblag_cumul(list(col.gal.nb, k4))
table(card(mod_nb))

but I'm not at all sure that this is a good idea. Most often observations 
with few neighbours are on the edge of the data set, so there is a very 
good reason for their apparent "isolation".

Hope this helps,

Roger

>
>
> # Alternative 2:
> nbmat <- nb2mat(nb)
> # Modify nbmat ??, mat2listw, listw2nb
>
>
> # Alternative 3:
> listw <- nb2listw(nb)
> # Modify listw ??, listw2nb
>
>
> The question is:
>
> How to modify nb (or nbmat or listw) to increase the number of links of 
> the "isolated" regions?
>
> Any idea?
>
> Thank you!
> Germ?n S?nchez
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From german.sanchez at ais-int.com  Sun Sep  5 22:11:48 2010
From: german.sanchez at ais-int.com (German Sanchez Hernandez)
Date: Sun, 5 Sep 2010 22:11:48 +0200
Subject: [R-sig-Geo] Complete neighbours
In-Reply-To: <alpine.LRH.2.00.1009051953590.28150@reclus.nhh.no>
References: <B3A13AB1-0B0F-4DCC-B717-4333A35407EE@ais-int.com>
	<alpine.LRH.2.00.1009051953590.28150@reclus.nhh.no>
Message-ID: <F7884F17-0018-46D2-979B-AFC38DF92E38@ais-int.com>

Dear Roger (and list):

Thank you for your response. The idea to complete the neighbourhood list is to try to "define" some regions using the features of their nearest regions.

I made a modification of union.nb function, once I've learned how to edit the nb objects. I'll take a look on the nblag_cumul function.

Thanks and regards,
German Sanchez

El 05/09/2010, a las 21:14, Roger Bivand escribi?:

> On Fri, 3 Sep 2010, German Sanchez Hernandez wrote:
> 
>> Dear list,
>> 
>> I would like to complete my neighbour list in order to increase the number of neighbours of regions with less neighbours (links) than a certain number. The idea is to complete these links using knearneigh function.
>> 
>> 
>> My try:
>> 
>> nb <- poly2nb(map)
>> # Compute distribution of linkage:
>> distr <- as.data.frame(table(card(nb)))
>> # Try to identify the "isolated" regions (equal or less than, for example, 3 neighbours
>> minim <- 3 # It's a computed number
>> isolated <- subset(nb, subset=card(nb) <= minim)
>> # Get the "isolated" region IDs
>> regions <- attr(unclass(isolated), 'region.id')
>> # Modify nb using knearneigh ??
> 
> For the edited version of nblag_cumul on R-forge on the spdep project, you'd do something like:
> 
> example(columbus)
> table(card(col.gal.nb))
> k4 <- knn2nb(knearneigh(coordinates(columbus), 4))
> mod_nb <- nblag_cumul(list(col.gal.nb, k4))
> table(card(mod_nb))
> 
> but I'm not at all sure that this is a good idea. Most often observations with few neighbours are on the edge of the data set, so there is a very good reason for their apparent "isolation".
> 
> Hope this helps,
> 
> Roger
> 
>> 
>> 
>> # Alternative 2:
>> nbmat <- nb2mat(nb)
>> # Modify nbmat ??, mat2listw, listw2nb
>> 
>> 
>> # Alternative 3:
>> listw <- nb2listw(nb)
>> # Modify listw ??, listw2nb
>> 
>> 
>> The question is:
>> 
>> How to modify nb (or nbmat or listw) to increase the number of links of the "isolated" regions?
>> 
>> Any idea?
>> 
>> Thank you!
>> Germ?n S?nchez
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
> 
> -- 
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no


From Adrian.Baddeley at csiro.au  Mon Sep  6 07:13:33 2010
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Mon, 6 Sep 2010 13:13:33 +0800
Subject: [R-sig-Geo]  Problem with spatstat
Message-ID: <57DC18C299094D4299F837570C5DF1C52C8EB1EA31@EXWA-MBX01.nexus.csiro.au>

Rodrigo De Carreras <rodrigodecarreras at gmail.com> wrote:

  > I worked with spatstat many times without problems,
  > but now when I call for the package the following
  > error appears with mgcv:

  > require("spatstat")
  > Loading required package: spatstat
  > Loading required package: mgcv
  > Error : .onAttach failed in attachNamespace() for 'mgcv', details:
  > call: formatDL(nm, txt, indent = max(nchar(nm, "w")) + 3)
  > error: incorrect values of 'indent' and 'width'
  > Error: package 'mgcv' could not be loaded

This is not a problem with spatstat. 
The error messages indicate that it is a problem with the package 'mgcv' or possibly with the code for namespaces. 
Try installing the latest version of mgcv and then typing library(mgcv). If this does not work then contact the author of mgcv.

Adrian Baddeley


From wisfool at email.arizona.edu  Mon Sep  6 07:22:23 2010
From: wisfool at email.arizona.edu (Roberto Badilla Fuentes)
Date: Sun, 5 Sep 2010 22:22:23 -0700
Subject: [R-sig-Geo] TimeStamp
In-Reply-To: <AANLkTik9+pCk1rN7PdoX2-jkiE62obcdNdj3+9QBfZEK@mail.gmail.com>
References: <AANLkTik9+pCk1rN7PdoX2-jkiE62obcdNdj3+9QBfZEK@mail.gmail.com>
Message-ID: <AANLkTikRMN-tK8mi+CPiiJ=ddGBMeJtFsmHK_9k7XrQx@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100905/61c03961/attachment.ksh>

From oldeland at gmx.de  Mon Sep  6 09:02:17 2010
From: oldeland at gmx.de (Jens Oldeland)
Date: Mon, 06 Sep 2010 09:02:17 +0200
Subject: [R-sig-Geo] Attach values from polygons to points
Message-ID: <4C8491F9.4030302@gmx.de>

Hi,

I am working with two shapefiles in R; one is a point.shp the other is a 
polygon.shp. Now, I would like to intersect/join/attach all the values 
from the polygon to the table of the point.shp.

I tried overlay() and spRbind in package sp, but nothing did what I 
expected them to do.

Could anyone give me a hint how I can combine both shapefiles?

Thank you!
Jens

-- 
+++++++++++++++++++++++++++++++++++++++++
Dipl.Biol. Jens Oldeland
Biodiversity of Plants
Biocentre Klein Flottbek and Botanical Garden
University of Hamburg 
Ohnhorststr. 18
22609 Hamburg,
Germany

Tel:    0049-(0)40-42816-407
Fax:    0049-(0)40-42816-543
Mail: 	Oldeland at botanik.uni-hamburg.de
        Oldeland at gmx.de 	(for attachments > 2mb!!)
Skype:	jens.oldeland
http://www.biologie.uni-hamburg.de/bzf/fbda005/fbda005.htm
http://jensoldeland.wordpress.com
+++++++++++++++++++++++++++++++++++++++++


From Roger.Bivand at nhh.no  Mon Sep  6 09:47:10 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 6 Sep 2010 09:47:10 +0200 (CEST)
Subject: [R-sig-Geo] Complete neighbours
In-Reply-To: <F7884F17-0018-46D2-979B-AFC38DF92E38@ais-int.com>
References: <B3A13AB1-0B0F-4DCC-B717-4333A35407EE@ais-int.com>
	<alpine.LRH.2.00.1009051953590.28150@reclus.nhh.no>
	<F7884F17-0018-46D2-979B-AFC38DF92E38@ais-int.com>
Message-ID: <alpine.LRH.2.00.1009060946200.31039@reclus.nhh.no>

On Sun, 5 Sep 2010, German Sanchez Hernandez wrote:

> Dear Roger (and list):
>
> Thank you for your response. The idea to complete the neighbourhood list 
> is to try to "define" some regions using the features of their nearest 
> regions.
>
> I made a modification of union.nb function, once I've learned how to 
> edit the nb objects. I'll take a look on the nblag_cumul function.

Right, union.nb() is a better choice than nblag_cumul(), which is less 
general.

Roger

>
> Thanks and regards,
> German Sanchez
>
> El 05/09/2010, a las 21:14, Roger Bivand escribi?:
>
>> On Fri, 3 Sep 2010, German Sanchez Hernandez wrote:
>>
>>> Dear list,
>>>
>>> I would like to complete my neighbour list in order to increase the number of neighbours of regions with less neighbours (links) than a certain number. The idea is to complete these links using knearneigh function.
>>>
>>>
>>> My try:
>>>
>>> nb <- poly2nb(map)
>>> # Compute distribution of linkage:
>>> distr <- as.data.frame(table(card(nb)))
>>> # Try to identify the "isolated" regions (equal or less than, for example, 3 neighbours
>>> minim <- 3 # It's a computed number
>>> isolated <- subset(nb, subset=card(nb) <= minim)
>>> # Get the "isolated" region IDs
>>> regions <- attr(unclass(isolated), 'region.id')
>>> # Modify nb using knearneigh ??
>>
>> For the edited version of nblag_cumul on R-forge on the spdep project, you'd do something like:
>>
>> example(columbus)
>> table(card(col.gal.nb))
>> k4 <- knn2nb(knearneigh(coordinates(columbus), 4))
>> mod_nb <- nblag_cumul(list(col.gal.nb, k4))
>> table(card(mod_nb))
>>
>> but I'm not at all sure that this is a good idea. Most often observations with few neighbours are on the edge of the data set, so there is a very good reason for their apparent "isolation".
>>
>> Hope this helps,
>>
>> Roger
>>
>>>
>>>
>>> # Alternative 2:
>>> nbmat <- nb2mat(nb)
>>> # Modify nbmat ??, mat2listw, listw2nb
>>>
>>>
>>> # Alternative 3:
>>> listw <- nb2listw(nb)
>>> # Modify listw ??, listw2nb
>>>
>>>
>>> The question is:
>>>
>>> How to modify nb (or nbmat or listw) to increase the number of links of the "isolated" regions?
>>>
>>> Any idea?
>>>
>>> Thank you!
>>> Germ?n S?nchez
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From b.rowlingson at lancaster.ac.uk  Mon Sep  6 10:21:12 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 6 Sep 2010 09:21:12 +0100
Subject: [R-sig-Geo] Attach values from polygons to points
In-Reply-To: <4C8491F9.4030302@gmx.de>
References: <4C8491F9.4030302@gmx.de>
Message-ID: <AANLkTin2u672oYhw4E9sLypfKTPR2fCwuh=HENh5RX45@mail.gmail.com>

On Mon, Sep 6, 2010 at 8:02 AM, Jens Oldeland <oldeland at gmx.de> wrote:
> Hi,
>
> I am working with two shapefiles in R; one is a point.shp the other is a
> polygon.shp. Now, I would like to intersect/join/attach all the values from
> the polygon to the table of the point.shp.
>
> I tried overlay() and spRbind in package sp, but nothing did what I expected
> them to do.
>
> Could anyone give me a hint how I can combine both shapefiles?
>

 You could read the reply I posted on stackoverflow :) But the short answer is:

 overlay(pts,polys) returns the index of the row of polys that the
points in pts are inside. How did this not work for you?

Barry


From rodrigodecarreras at gmail.com  Mon Sep  6 16:10:20 2010
From: rodrigodecarreras at gmail.com (Rodrigo De Carreras)
Date: Mon, 6 Sep 2010 09:40:20 -0430
Subject: [R-sig-Geo] Problem with spatstat
In-Reply-To: <57DC18C299094D4299F837570C5DF1C52C8EB1EA31@EXWA-MBX01.nexus.csiro.au>
References: <57DC18C299094D4299F837570C5DF1C52C8EB1EA31@EXWA-MBX01.nexus.csiro.au>
Message-ID: <ABD35EA5-CAD0-4953-B5A0-C4E1A09F5742@gmail.com>


Dr. Baddeley, thanks for your answer

I agree with you, it is not an error with spatstat but an error 
that appears when I call spatstat with library("spatstat") 
or require("spatstat") inmediately after the R startup. 

Is spatstat calling mgcv by default?

I tried:

install.packages("mgcv")
library("mgcv")

and the problem persist. I will contact the authors
of mgcv. 

Thanks again, spatstat is a wonderful tool.

Rodrigo



On Sep 6, 2010, at 12:43 AM, <Adrian.Baddeley at csiro.au> wrote:

> Rodrigo De Carreras <rodrigodecarreras at gmail.com> wrote:
> 
>> I worked with spatstat many times without problems,
>> but now when I call for the package the following
>> error appears with mgcv:
> 
>> require("spatstat")
>> Loading required package: spatstat
>> Loading required package: mgcv
>> Error : .onAttach failed in attachNamespace() for 'mgcv', details:
>> call: formatDL(nm, txt, indent = max(nchar(nm, "w")) + 3)
>> error: incorrect values of 'indent' and 'width'
>> Error: package 'mgcv' could not be loaded
> 
> This is not a problem with spatstat. 
> The error messages indicate that it is a problem with the package 'mgcv' or possibly with the code for namespaces. 
> Try installing the latest version of mgcv and then typing library(mgcv). If this does not work then contact the author of mgcv.
> 
> Adrian Baddeley


From b.rowlingson at lancaster.ac.uk  Mon Sep  6 17:08:33 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 6 Sep 2010 16:08:33 +0100
Subject: [R-sig-Geo] Problem with spatstat
In-Reply-To: <ABD35EA5-CAD0-4953-B5A0-C4E1A09F5742@gmail.com>
References: <57DC18C299094D4299F837570C5DF1C52C8EB1EA31@EXWA-MBX01.nexus.csiro.au>
	<ABD35EA5-CAD0-4953-B5A0-C4E1A09F5742@gmail.com>
Message-ID: <AANLkTi=+JfRDqNUK_u=5WDTLEoiLXQPCuV2=7D8dQqiq@mail.gmail.com>

On Mon, Sep 6, 2010 at 3:10 PM, Rodrigo De Carreras
<rodrigodecarreras at gmail.com> wrote:
>
> Dr. Baddeley, thanks for your answer
>
> I agree with you, it is not an error with spatstat but an error
> that appears when I call spatstat with library("spatstat")
> or require("spatstat") inmediately after the R startup.
>
> Is spatstat calling mgcv by default?

 mgcv is a requirement for spatstat, so when you do library(spatstat)
it does a library(mgcv). It also requries "deldir" as well - you can
see in the messages when spatstat loads without problems:

 > library(spatstat)
Loading required package: mgcv
This is mgcv 1.6-1. For overview type `help("mgcv-package")'.
Loading required package: deldir
deldir 0.0-12

     Please note: The process for determining duplicated points
     has changed from that used in version 0.0-9 (and previously).

spatstat 1.20-3
Type ?help(spatstat)? for an overview of spatstat
     ?latest.news()? for news on latest version
     ?licence.polygons()? for licence information on polygon calculations



Barry


From breitbach at uni-mainz.de  Tue Sep  7 10:35:16 2010
From: breitbach at uni-mainz.de (Breitbach, Nils)
Date: Tue, 7 Sep 2010 08:35:16 +0000
Subject: [R-sig-Geo] Problem with moran.test (spdep)
Message-ID: <E7F1EF063B11DA4DAD16374549B879E82ADC7240@e14mdb-02.zdv.Uni-Mainz.DE>

Dear Community,

I already performed some successful Moran's I tests using the moran.test function (spdep package) for my data but now I got an error that I do not understand.

For the code:

> moran.temp <- moran.test(birds_spdf at data[, i], birds.nb4.idw.W_lw, zero.policy = TRUE, na.action = na.exclude)

where birds_spdf at data is the data frame with the variables to be tested and birds.nb4.idw.W_lw is a listw object with the weights from an inverse distance matrix and four neighbours for each coordinate. I set na.action to na.exclude because I know that there are some NA values in the data; therefore I also set the zero.policy to TRUE. The code fragment is running in a loop for all variables that I want to be tested. For all other data sets it worked perfectly but now I get the the following error:

Error in subset.listw(listw, subset, zero.policy = zero.policy) : 
  Not yet able to subset general weights lists

When I checked for the value of i it was clear that the error happens for the first time in the presence of NA values in the data, i. e. in the first column that contains NAs. Since I set na.action = na.exclude and it worked for other data sets that contain NAs I am not sure what is the problem here?

Any suggestions?


Regards,

Nils Breitbach

From Roger.Bivand at nhh.no  Tue Sep  7 10:46:35 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 7 Sep 2010 10:46:35 +0200 (CEST)
Subject: [R-sig-Geo] Problem with moran.test (spdep)
In-Reply-To: <E7F1EF063B11DA4DAD16374549B879E82ADC7240@e14mdb-02.zdv.Uni-Mainz.DE>
References: <E7F1EF063B11DA4DAD16374549B879E82ADC7240@e14mdb-02.zdv.Uni-Mainz.DE>
Message-ID: <alpine.LRH.2.00.1009071041000.6690@reclus.nhh.no>

On Tue, 7 Sep 2010, Breitbach, Nils wrote:

> Dear Community,
>
> I already performed some successful Moran's I tests using the moran.test 
> function (spdep package) for my data but now I got an error that I do 
> not understand.
>
> For the code:
>
>> moran.temp <- moran.test(birds_spdf at data[, i], birds.nb4.idw.W_lw, 
>> zero.policy = TRUE, na.action = na.exclude)
>
> where birds_spdf at data is the data frame with the variables to be tested 
> and birds.nb4.idw.W_lw is a listw object with the weights from an 
> inverse distance matrix and four neighbours for each coordinate. I set 
> na.action to na.exclude because I know that there are some NA values in 
> the data; therefore I also set the zero.policy to TRUE. The code 
> fragment is running in a loop for all variables that I want to be 
> tested. For all other data sets it worked perfectly but now I get the 
> the following error:
>
> Error in subset.listw(listw, subset, zero.policy = zero.policy) :
>  Not yet able to subset general weights lists
>
> When I checked for the value of i it was clear that the error happens 
> for the first time in the presence of NA values in the data, i. e. in 
> the first column that contains NAs. Since I set na.action = na.exclude 
> and it worked for other data sets that contain NAs I am not sure what is 
> the problem here?

Look at ?subset.listw. You used the glist= argument in nb2listw(), so the 
reason is clear, isn't it? It cannot have worked with this listw object. 
If you want to do this, you need to drop the NAs manually in the loop, 
subset the nb object, build the inverse distance weights for the subsetted 
nb object, and use nb2listw() each time. The reason subset.listw() cannot 
subset listw objects with glist= set is that it cannot be sure of the 
intentions of the user. subset.nb() does not have the same problem with 
regard to ambiguity.

Hope this helps,

Roger

>
> Any suggestions?
>
>
> Regards,
>
> Nils Breitbach
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From cjpauw at gmail.com  Tue Sep  7 12:42:18 2010
From: cjpauw at gmail.com (christiaan pauw)
Date: Tue, 7 Sep 2010 12:42:18 +0200
Subject: [R-sig-Geo] How do I use neighbourhood list to recursively merge
	adjacent polygons
Message-ID: <AANLkTik+G744+sa-6u1HiZ_m0Q8+H9F+5RQedHfeHReh@mail.gmail.com>

Hallo Everybody

I have a SpatialPolygonsDataFrame where residential stands in a town
are given as polygons.  The streets are "represented" by the empty
space between the polygons. I want to dissolve the stand boundaries
within a street block to get just the outer extent of a street block.
My aim is this to move from a map of individual houses to a map of
street blocks.

The criterion for merging is that they touch an neighbouring polygon
(queen). Merging should continue until there are no polygons left
touch each other i.e until you only have the street blocks separated
by the empty space where the streets are.  I have tried to use
unionSpatialPolygons but have not found a way in which is can define
which polygons to merge since I do not know how to define the "IDs"
argument correctly. I had a feeling that I could specify which
polygons to merge with poly2nb but poly2nb does not work recursively -
i.e. the same polygon can be found in more than one entry on the nb
list.

I was also looking for a data set to build a self-contained example
with (like a map of the world where one can dissolve the country
boundaries and end up only with continents) but could not find one

Can anyone offer me some advice
Regards
Christiaan


From Roger.Bivand at nhh.no  Tue Sep  7 13:52:18 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 7 Sep 2010 13:52:18 +0200 (CEST)
Subject: [R-sig-Geo] TimeStamp
In-Reply-To: <AANLkTikRMN-tK8mi+CPiiJ=ddGBMeJtFsmHK_9k7XrQx@mail.gmail.com>
References: <AANLkTik9+pCk1rN7PdoX2-jkiE62obcdNdj3+9QBfZEK@mail.gmail.com>
	<AANLkTikRMN-tK8mi+CPiiJ=ddGBMeJtFsmHK_9k7XrQx@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1009071334490.7431@reclus.nhh.no>

On Sun, 5 Sep 2010, Roberto Badilla Fuentes wrote:

> Hi,
>
> I have a dataset in .dbf format.  It contains Coordinates and Time.
> The TIMESTAMP is as follows:
>
>  03/18/2006 13:30:37
> I am not working with the TIMESTAMP column, but when I print out my
> manipulated dataset using
> *write.dbf*  I get the value *390 *where the TIMESTAMP value should be.  Can
> Anyone help me out why R does this
> and how I can correct it.

Please quote all code verbatim. You have not said how you read the data, 
whether the class representation of the data in R was what you thought it 
was, not how you wrote it out (exactly). You probably used read.dbf() in 
the foreign package, and write.dbf() to write the data.frame object out 
again.

Try:

library(foreign)
x <- read.dbf(system.file("files/sids.dbf", package="foreign")[1])
str(x)
# check the class representations
summary(x)
attr(x, "data_types")
# should show "D" for any fields seen as date/time, none here yet
Dv <- seq(as.POSIXlt("1990-01-01"), as.POSIXlt("2000-01-01"),
   length.out=100)
x$Dv <- as.Date(Dv)
str(x)
summary(x)
tf <- paste(tempfile(), ".dbf", sep="")
write.dbf(x, tf)
xx <- read.dbf(tf)
str(xx)
summary(xx)
attr(xx, "data_types")

Note from ?write.dbf that all date/time representations must be coerced to 
Date. It is very possible that your *390* is the internal representation, 
and needs print()ing to show its human-readable version.

Hope this helps,

Roger


>
> Thanks
> -Roberto
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Tue Sep  7 14:01:02 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 7 Sep 2010 14:01:02 +0200 (CEST)
Subject: [R-sig-Geo] How do I use neighbourhood list to recursively
 merge adjacent polygons
In-Reply-To: <AANLkTik+G744+sa-6u1HiZ_m0Q8+H9F+5RQedHfeHReh@mail.gmail.com>
References: <AANLkTik+G744+sa-6u1HiZ_m0Q8+H9F+5RQedHfeHReh@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1009071353390.7431@reclus.nhh.no>

On Tue, 7 Sep 2010, christiaan pauw wrote:

> Hallo Everybody
>
> I have a SpatialPolygonsDataFrame where residential stands in a town
> are given as polygons.  The streets are "represented" by the empty
> space between the polygons. I want to dissolve the stand boundaries
> within a street block to get just the outer extent of a street block.
> My aim is this to move from a map of individual houses to a map of
> street blocks.
>
> The criterion for merging is that they touch an neighbouring polygon
> (queen). Merging should continue until there are no polygons left
> touch each other i.e until you only have the street blocks separated
> by the empty space where the streets are.  I have tried to use
> unionSpatialPolygons but have not found a way in which is can define
> which polygons to merge since I do not know how to define the "IDs"
> argument correctly. I had a feeling that I could specify which
> polygons to merge with poly2nb but poly2nb does not work recursively -
> i.e. the same polygon can be found in more than one entry on the nb
> list.
>
> I was also looking for a data set to build a self-contained example
> with (like a map of the world where one can dissolve the country
> boundaries and end up only with continents) but could not find one
>
> Can anyone offer me some advice

Please look at ?n.comp.nb in spdep. This finds the number of separate 
graph components in an nb object, returns the count, and a vector saying 
which observation belongs to which disjoint connected subgraph. If there 
are no contiguities across the streets, you should see each subgraph 
matching your street blocks. Try using the subgraph vector to colour a map 
of the residential polygons, or nodes in a plot of the nb object (see the 
example for n.comp.nb. From there on unionSpatialPolygons() if n.comp.nb() 
makes the classification you need.

Hope this helps,

Roger


> Regards
> Christiaan
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From gavin.simpson at ucl.ac.uk  Wed Sep  8 00:07:26 2010
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Tue, 07 Sep 2010 23:07:26 +0100
Subject: [R-sig-Geo] Writing ArcGIS Shapefiles from R; advice?
Message-ID: <1283897246.2156.21.camel@graptoleberis.geog.ucl.ac.uk>

Dear List,

Firstly, a confession: I'm not a GIS expert and I have next to no
experience of using ArcGIS or shapefiles. Apologies if anything I write
below is stupid!

I have an ESRI ASCII grid file that I have read into R and successfully
(with the help of this list) processed it into a
SpatialPolygonsDataFrame object (via SpatialPixelsDataFrame). I have
unionised the polygons to a set of depth intervals, so all the
individual polygons associated with depths (say) between 1 and 2 m are
given the same ID; there are several depth intervals, therefore several
IDs. This is fine, and I'm happy with this, but I need to export this
object to ESRI Shapefile(s).

I have exported the whole SpatialPolygonsDataFrame object to a single
shapefile but when my colleagues open this in ArcGIS, there is a single
layer for all depth levels and they'd like to be able to have a layer
per polygon ID. Is this possible, to write out the
SpatialPolygonsDataFrame object such that ArcGIS knows that each polygon
ID is a separate layer?

I have worked out how to break apart the SpatialPolygonsDataFrame object
into the equivalent but with a single ID (depth interval), and have
written those out into separate shapefiles, one per depth interval,
which when loaded into ArcGIS are represented by separate layers, but
dealing with more than a few shapefiles at once is proving
"difficult" (!??!) for some, hence if it were possible to produce a
single shapefile with separate "layers" that might solve that particular
issue.

Second Q is; is there a way to include information about how ArcGIS
displays each layer/shapefile? For example, we'd like to give each
layer/shapefile a particular fill colour, so that when loaded by a user
into ArcGIS, the particular depth polygons have a nice gradient
representing depth. Is this even remotely possible from within R, or is
this something ArcGIS does and is separate from the shapefile per se?

Currently I am using writeOGR to read out these objects to ESRI
shapefiles.

The reason I ask these questions is because we have a lot of these lake
bathymetries and dealing with them in ArcGIS (to get separate layers and
colour those layers accordingly) by hand is a non starter and we don't
want to start writing VB scripts in Arc at this stage.

Thanks in advance for any pointers or suggestions you may have. And
apologies again for showing my ignorance as regards shapefiles.

All the best,

Gavin

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From mdsumner at gmail.com  Wed Sep  8 00:19:55 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 8 Sep 2010 08:19:55 +1000
Subject: [R-sig-Geo] Writing ArcGIS Shapefiles from R; advice?
In-Reply-To: <1283897246.2156.21.camel@graptoleberis.geog.ucl.ac.uk>
References: <1283897246.2156.21.camel@graptoleberis.geog.ucl.ac.uk>
Message-ID: <AANLkTinhqU-LW1T4-0ZmcopzUK9S0W-FhmBkhe8E8P4f@mail.gmail.com>

Shapefiles don't have separate layers, and one layer can only have one
geometry type (point, line, or polygon). GDAL can treat a single
folder with multiple shapefiles as if each shapefile were a separate
layer in a single dataset, but that is just GDAL functionality,
reflecting the OGR model, and is supported by other vector formats.

I'm not very familiar with Arc? products, so I'm not 100% on this, but
I think you would need to write each separate set of polygons, each
with an individual depth value, to a separate shapefile and proceed
from there. I don't know anything about how to get Arc to understand
configurations of shapefiles, but perhaps you could use one of the
other ESRI formats such as E00 (guessing here, I'll have a closer look
at the OGR formats - see rgdal's ogrDrivers() for the ones available
on your system).

If your SpatialPolygonsDataFrame really has multiple duplicate (in
X/Y) polygons with the separate depths, you can subset it for
individual depths with "[" and write those out individually:

e.g.

depth0 <- splydf[splydf$depth == 0, ]

HTH

Cheers, Mike


On Wed, Sep 8, 2010 at 8:07 AM, Gavin Simpson <gavin.simpson at ucl.ac.uk> wrote:
> Dear List,
>
> Firstly, a confession: I'm not a GIS expert and I have next to no
> experience of using ArcGIS or shapefiles. Apologies if anything I write
> below is stupid!
>
> I have an ESRI ASCII grid file that I have read into R and successfully
> (with the help of this list) processed it into a
> SpatialPolygonsDataFrame object (via SpatialPixelsDataFrame). I have
> unionised the polygons to a set of depth intervals, so all the
> individual polygons associated with depths (say) between 1 and 2 m are
> given the same ID; there are several depth intervals, therefore several
> IDs. This is fine, and I'm happy with this, but I need to export this
> object to ESRI Shapefile(s).
>
> I have exported the whole SpatialPolygonsDataFrame object to a single
> shapefile but when my colleagues open this in ArcGIS, there is a single
> layer for all depth levels and they'd like to be able to have a layer
> per polygon ID. Is this possible, to write out the
> SpatialPolygonsDataFrame object such that ArcGIS knows that each polygon
> ID is a separate layer?
>
> I have worked out how to break apart the SpatialPolygonsDataFrame object
> into the equivalent but with a single ID (depth interval), and have
> written those out into separate shapefiles, one per depth interval,
> which when loaded into ArcGIS are represented by separate layers, but
> dealing with more than a few shapefiles at once is proving
> "difficult" (!??!) for some, hence if it were possible to produce a
> single shapefile with separate "layers" that might solve that particular
> issue.
>
> Second Q is; is there a way to include information about how ArcGIS
> displays each layer/shapefile? For example, we'd like to give each
> layer/shapefile a particular fill colour, so that when loaded by a user
> into ArcGIS, the particular depth polygons have a nice gradient
> representing depth. Is this even remotely possible from within R, or is
> this something ArcGIS does and is separate from the shapefile per se?
>
> Currently I am using writeOGR to read out these objects to ESRI
> shapefiles.
>
> The reason I ask these questions is because we have a lot of these lake
> bathymetries and dealing with them in ArcGIS (to get separate layers and
> colour those layers accordingly) by hand is a non starter and we don't
> want to start writing VB scripts in Arc at this stage.
>
> Thanks in advance for any pointers or suggestions you may have. And
> apologies again for showing my ignorance as regards shapefiles.
>
> All the best,
>
> Gavin
>
> --
> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
> ?Dr. Gavin Simpson ? ? ? ? ? ? [t] +44 (0)20 7679 0522
> ?ECRC, UCL Geography, ? ? ? ? ?[f] +44 (0)20 7679 0565
> ?Pearson Building, ? ? ? ? ? ? [e] gavin.simpsonATNOSPAMucl.ac.uk
> ?Gower Street, London ? ? ? ? ?[w] http://www.ucl.ac.uk/~ucfagls/
> ?UK. WC1E 6BT. ? ? ? ? ? ? ? ? [w] http://www.freshwaters.org.uk
> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From b.rowlingson at lancaster.ac.uk  Wed Sep  8 00:54:14 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 7 Sep 2010 23:54:14 +0100
Subject: [R-sig-Geo] Writing ArcGIS Shapefiles from R; advice?
In-Reply-To: <1283897246.2156.21.camel@graptoleberis.geog.ucl.ac.uk>
References: <1283897246.2156.21.camel@graptoleberis.geog.ucl.ac.uk>
Message-ID: <AANLkTiktxX5mXLNrohwFf1X+Ra_gP=RdYwD-R6UWsDTx@mail.gmail.com>

On Tue, Sep 7, 2010 at 11:07 PM, Gavin Simpson <gavin.simpson at ucl.ac.uk> wrote:

> Second Q is; is there a way to include information about how ArcGIS
> displays each layer/shapefile? For example, we'd like to give each
> layer/shapefile a particular fill colour, so that when loaded by a user
> into ArcGIS, the particular depth polygons have a nice gradient
> representing depth. Is this even remotely possible from within R, or is
> this something ArcGIS does and is separate from the shapefile per se?
>
> Currently I am using writeOGR to read out these objects to ESRI
> shapefiles.
>
> The reason I ask these questions is because we have a lot of these lake
> bathymetries and dealing with them in ArcGIS (to get separate layers and
> colour those layers accordingly) by hand is a non starter and we don't
> want to start writing VB scripts in Arc at this stage.
>
> Thanks in advance for any pointers or suggestions you may have. And
> apologies again for showing my ignorance as regards shapefiles.

 There are some open standards for styling geospatial data, namely SLD
and OpenGIS Symbology Encoding. They are XML files that define how map
layers appear.

 If ArcGIS supports these then you just have to work out how to write
the XML for the data. That probably means understanding the OGC Specs:

http://www.opengeospatial.org/standards/sld
http://www.opengeospatial.org/standards/symbol

 or you might find some desktop GIS that can save them - possibly Qgis or gvSIG.

I have a vague memory of once reverse-engineering an ArcGIS file that
encoded the style of a map, but it was all binary and a mess and I'd
need a few examples to work it out.

 A bit more googling shows there is an SLD plugin for Qgis and ArcGIS
can export them. So that might work...

Barry


From mdsumner at gmail.com  Wed Sep  8 00:58:06 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 8 Sep 2010 08:58:06 +1000
Subject: [R-sig-Geo] Writing ArcGIS Shapefiles from R; advice?
In-Reply-To: <AANLkTinhqU-LW1T4-0ZmcopzUK9S0W-FhmBkhe8E8P4f@mail.gmail.com>
References: <1283897246.2156.21.camel@graptoleberis.geog.ucl.ac.uk>
	<AANLkTinhqU-LW1T4-0ZmcopzUK9S0W-FhmBkhe8E8P4f@mail.gmail.com>
Message-ID: <AANLkTik1Y47wyVMTQUsFWGQi6bJcuDbpemNN6gZHh_Xx@mail.gmail.com>

I can't see any easy way through this, since the other ESRI formats
that do support separate layers are not writeable by OGR:

(from the OGR formats page: http://www.gdal.org/ogr/ogr_formats.html)
Arc/Info Binary Coverage  AVCBin
 Arc/Info .E00 (ASCII) Coverage  AVCE00
 ESRI Personal GeoDatabase  PGeo
 ESRI ArcSDE  SDE

I would see if any of the other OGR formats can work for your
colleagues, but it doesn't look hopeful.

Shapefiles do not support formatting (colours, line styles etc) at
all. There is an auxiliary format file that can accompany shapefiles,
but AFAIK this is only understood by ESRI and is not part of the
shapefile definition (much as PRJ/WKT is not either).

Again, some of the other OGR formats may work for you.  A (desperate?)
non-open source, Windows-only solution might be to use Manifold
Enterprise to write .E00 - I'd be happy to try this out with example
data, at least to see what might be possible.

Cheers, Mike.

On Wed, Sep 8, 2010 at 8:19 AM, Michael Sumner <mdsumner at gmail.com> wrote:
> Shapefiles don't have separate layers, and one layer can only have one
> geometry type (point, line, or polygon). GDAL can treat a single
> folder with multiple shapefiles as if each shapefile were a separate
> layer in a single dataset, but that is just GDAL functionality,
> reflecting the OGR model, and is supported by other vector formats.
>
> I'm not very familiar with Arc? products, so I'm not 100% on this, but
> I think you would need to write each separate set of polygons, each
> with an individual depth value, to a separate shapefile and proceed
> from there. I don't know anything about how to get Arc to understand
> configurations of shapefiles, but perhaps you could use one of the
> other ESRI formats such as E00 (guessing here, I'll have a closer look
> at the OGR formats - see rgdal's ogrDrivers() for the ones available
> on your system).
>
> If your SpatialPolygonsDataFrame really has multiple duplicate (in
> X/Y) polygons with the separate depths, you can subset it for
> individual depths with "[" and write those out individually:
>
> e.g.
>
> depth0 <- splydf[splydf$depth == 0, ]
>
> HTH
>
> Cheers, Mike
>
>
> On Wed, Sep 8, 2010 at 8:07 AM, Gavin Simpson <gavin.simpson at ucl.ac.uk> wrote:
>> Dear List,
>>
>> Firstly, a confession: I'm not a GIS expert and I have next to no
>> experience of using ArcGIS or shapefiles. Apologies if anything I write
>> below is stupid!
>>
>> I have an ESRI ASCII grid file that I have read into R and successfully
>> (with the help of this list) processed it into a
>> SpatialPolygonsDataFrame object (via SpatialPixelsDataFrame). I have
>> unionised the polygons to a set of depth intervals, so all the
>> individual polygons associated with depths (say) between 1 and 2 m are
>> given the same ID; there are several depth intervals, therefore several
>> IDs. This is fine, and I'm happy with this, but I need to export this
>> object to ESRI Shapefile(s).
>>
>> I have exported the whole SpatialPolygonsDataFrame object to a single
>> shapefile but when my colleagues open this in ArcGIS, there is a single
>> layer for all depth levels and they'd like to be able to have a layer
>> per polygon ID. Is this possible, to write out the
>> SpatialPolygonsDataFrame object such that ArcGIS knows that each polygon
>> ID is a separate layer?
>>
>> I have worked out how to break apart the SpatialPolygonsDataFrame object
>> into the equivalent but with a single ID (depth interval), and have
>> written those out into separate shapefiles, one per depth interval,
>> which when loaded into ArcGIS are represented by separate layers, but
>> dealing with more than a few shapefiles at once is proving
>> "difficult" (!??!) for some, hence if it were possible to produce a
>> single shapefile with separate "layers" that might solve that particular
>> issue.
>>
>> Second Q is; is there a way to include information about how ArcGIS
>> displays each layer/shapefile? For example, we'd like to give each
>> layer/shapefile a particular fill colour, so that when loaded by a user
>> into ArcGIS, the particular depth polygons have a nice gradient
>> representing depth. Is this even remotely possible from within R, or is
>> this something ArcGIS does and is separate from the shapefile per se?
>>
>> Currently I am using writeOGR to read out these objects to ESRI
>> shapefiles.
>>
>> The reason I ask these questions is because we have a lot of these lake
>> bathymetries and dealing with them in ArcGIS (to get separate layers and
>> colour those layers accordingly) by hand is a non starter and we don't
>> want to start writing VB scripts in Arc at this stage.
>>
>> Thanks in advance for any pointers or suggestions you may have. And
>> apologies again for showing my ignorance as regards shapefiles.
>>
>> All the best,
>>
>> Gavin
>>
>> --
>> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
>> ?Dr. Gavin Simpson ? ? ? ? ? ? [t] +44 (0)20 7679 0522
>> ?ECRC, UCL Geography, ? ? ? ? ?[f] +44 (0)20 7679 0565
>> ?Pearson Building, ? ? ? ? ? ? [e] gavin.simpsonATNOSPAMucl.ac.uk
>> ?Gower Street, London ? ? ? ? ?[w] http://www.ucl.ac.uk/~ucfagls/
>> ?UK. WC1E 6BT. ? ? ? ? ? ? ? ? [w] http://www.freshwaters.org.uk
>> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>
> --
> Michael Sumner
> Institute for Marine and Antarctic Studies, University of Tasmania
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From dan.putler at sauder.ubc.ca  Wed Sep  8 01:10:27 2010
From: dan.putler at sauder.ubc.ca (Dan Putler)
Date: Tue, 7 Sep 2010 16:10:27 -0700
Subject: [R-sig-Geo] Writing ArcGIS Shapefiles from R; advice?
In-Reply-To: <25484_1283900089_1283900089_AANLkTiktxX5mXLNrohwFf1X+Ra_gP=RdYwD-R6UWsDTx@mail.gmail.com>
References: <1283897246.2156.21.camel@graptoleberis.geog.ucl.ac.uk>
	<25484_1283900089_1283900089_AANLkTiktxX5mXLNrohwFf1X+Ra_gP=RdYwD-R6UWsDTx@mail.gmail.com>
Message-ID: <4C86C663.9010305@sauder.ubc.ca>

Hi Barry,

The last I looked (which was fairly recently) the sld plug-in for QGIS 
has a very limited feature set. If the goal is to create an sld to go 
with a shapefile, I'd argue for using uDig (another open source desktop 
GIS product), which has really good sld support: 
http://udig.refractions.net.

Dan

On 09/07/2010 03:54 PM, Barry Rowlingson wrote:
> On Tue, Sep 7, 2010 at 11:07 PM, Gavin Simpson<gavin.simpson at ucl.ac.uk>  wrote:
>
>    
>> Second Q is; is there a way to include information about how ArcGIS
>> displays each layer/shapefile? For example, we'd like to give each
>> layer/shapefile a particular fill colour, so that when loaded by a user
>> into ArcGIS, the particular depth polygons have a nice gradient
>> representing depth. Is this even remotely possible from within R, or is
>> this something ArcGIS does and is separate from the shapefile per se?
>>
>> Currently I am using writeOGR to read out these objects to ESRI
>> shapefiles.
>>
>> The reason I ask these questions is because we have a lot of these lake
>> bathymetries and dealing with them in ArcGIS (to get separate layers and
>> colour those layers accordingly) by hand is a non starter and we don't
>> want to start writing VB scripts in Arc at this stage.
>>
>> Thanks in advance for any pointers or suggestions you may have. And
>> apologies again for showing my ignorance as regards shapefiles.
>>      
>   There are some open standards for styling geospatial data, namely SLD
> and OpenGIS Symbology Encoding. They are XML files that define how map
> layers appear.
>
>   If ArcGIS supports these then you just have to work out how to write
> the XML for the data. That probably means understanding the OGC Specs:
>
> http://www.opengeospatial.org/standards/sld
> http://www.opengeospatial.org/standards/symbol
>
>   or you might find some desktop GIS that can save them - possibly Qgis or gvSIG.
>
> I have a vague memory of once reverse-engineering an ArcGIS file that
> encoded the style of a map, but it was all binary and a mess and I'd
> need a few examples to work it out.
>
>   A bit more googling shows there is an SLD plugin for Qgis and ArcGIS
> can export them. So that might work...
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From clement.calenge at oncfs.gouv.fr  Wed Sep  8 09:05:34 2010
From: clement.calenge at oncfs.gouv.fr (=?ISO-8859-1?Q?Cl=E9ment_Calenge?=)
Date: Wed, 08 Sep 2010 09:05:34 +0200
Subject: [R-sig-Geo] The future of adehabitat
Message-ID: <4C8735BE.6010708@oncfs.gouv.fr>

Dear all,

I have made major changes to the package adehabitat. Indeed, the R 
environment has changed a lot since I began the development of 
adehabitat in 2002 (development of namespace, etc.), and new classes and 
efficient methods have been developed to deal with spatial data (package 
sp). In addition, the number of functions available in the package has 
grown to more than 250 functions, implementing methods for habitat 
selection analysis, home range estimation, animal movement analysis, or 
spatial operations.

Therefore, I decided to:
(i) rewrite the package adehabitat to make it more compliant with these 
evolutions of the package R,
(ii) split adehabitat into four packages
(iii) create a new project on R-Forge (https://r-forge.r-project.org/) 
to store the sources of these four packages.

The four new packages are:

* adehabitatMA: functions to perform spatial operations (morphology, 
buffer, etc.)
* adehabitatHS: functions for the analysis of habitat selection
* adehabitatHR: functions for home range estimation
* adehabitatLT: functions for movement analysis

The home page of the project is: http://adehabitat.r-forge.r-project.org/
The packages can be installed in R by typing:

install.packages("packagename",repos="http://R-Forge.R-project.org")

I will keep these packages on R-forge for some time (at least several 
months), before submitting them to CRAN, to take into account users 
advices on these packages. After their submission to CRAN, I will 
continue to maintain the old adehabitat on CRAN for some time, but on 
the long term, this package will disappear. These four packages are 
expected to become the future of adehabitat.

I now describe several major changes:

* the functions of the packages are documented precisely in a vignette 
(there is one vignette per package). Both their use and the theory 
underlying these functions are described there. To access it, type:
vignette("packagename")

* the home range estimation methods have been homogenized and return 
classes compliant with the classes of the package sp:
- the functions kernelUD, kernelbb, and kernelkc all return objects of 
class "estUDm", which are lists of objects of class "estUD". The class 
extUD extends the class SpatialPixelsDataFrame.
- the function clusthr and LoCoH return objects of class "MCHu", which 
are lists of SpatialPolygonsDataFrame
- the function mcp returns a SpatialPolygonsDataFrame

* home range estimation methods now take objects of class SpatialPoints 
as arguments

* objects of class "ltraj" are now characterized by an additional 
attribute "infolocs", which is designed to store metadata on the 
trajectories (e.g. precision on the relocations). Most functions of the 
package adehabitatLT can be used to analyse these metadata (plotltr, 
etc. see the vignette).

* the method of characteristic hulls (Downs and Horner 2009), suggested 
by Paolo, on the list has been added to adehabitatHR, and returns an 
object of class MCHu

* the canonical OMI analysis, allowing exploration of habitat selection 
with radio-tracking data, has been added to the package adehabitatHS

* the autocorrelation functions described by Dray et al. (2010) for the 
analysis of movement have been added to the package adehabitatLT;

* all the packages have a namespace for management of internal functions.

Note that the calculations performed by most functions of adehabitat 
have not changed (e.g. the algorithm implemented in kernelUD of 
adehabitat is the same as the algorithm implemented in the function 
kernelUD of the package adehabitatHR), since they have been deeply 
discussed with users and corrected during the last five years. Only the 
input and output of the functions have been changed.

Happy testing,

Cl?ment Calenge.

-- 
Cl?ment CALENGE
Cellule d'appui ? l'analyse de donn?es
Office national de la chasse et de la faune sauvage
Saint Benoist - 78610 Auffargis
tel. (33) 01.30.46.54.14


From cjpauw at gmail.com  Wed Sep  8 12:13:28 2010
From: cjpauw at gmail.com (christiaan pauw)
Date: Wed, 8 Sep 2010 12:13:28 +0200
Subject: [R-sig-Geo] Queen, Rook and Knight neighbours
Message-ID: <AANLkTinfS1=viJkWUaMKrwFh0Rrqxp6bWYLXJwCiTpBy@mail.gmail.com>

Hi Everybody

Is there a possibility to create a neighbourhood list with a custom
contiguity condition? There is queen and rook contiguity but I need
something which may be called "Knight" : i.e. skip two (in a certain
direction) and choose the next one.

Here is my problem: I have a multi-stage sampling plan for a household
survey. This involves defining street blocks from a SPDF of houses
(which thanks to the help of Roger on this list I am now able to do
using poly2nb and n.comp.nb), then selecting a number of random street
blocks where the survey will take place. In each block we  take a
random starting point and move around the block and interview every
third household from until we reach the starting point again.

I need to make a neighbourhood list which will give me these every
third house in a certain direction from the starting point. This means
the contiguity condition would be something like:
"skip the house to the left, skip the house to its left , take the
house to its left and select it, repeat until you reach a number that
has already been evaluated then stop.

I would appreciate any ideas

best regards
Christiaan


From koday at processtrends.com  Wed Sep  8 16:25:31 2010
From: koday at processtrends.com (dkod)
Date: Wed, 8 Sep 2010 07:25:31 -0700 (PDT)
Subject: [R-sig-Geo] How to Show Missing Data with fields package
	two.colors() function
Message-ID: <1283955931587-5510840.post@n2.nabble.com>


I have been working on a global temperature anomaly map script to show
anomalies in 2x2 long/lat grid. With help from Roger Bivand and Andy South I
now have a script that makes the basic map with land surface background.

I use the fields package two.color() function to generate my color scheme. 

    my_scheme <- two.colors(n=256, start="blue", end="red", middle="white")

I choose this scheme so that "blue" reflects less than zero and "red"
reflects greater than 0 anomalies, with "white" for near zero values.

The overall map works as I hoped except that I can not figure out how to
handle missing data cells. I'd like them to show up as "grey". Currently
they are showing up as white along with the real near zero values.

How can I add a missing values color of grey to the map? Here's my overall
script.


# Load map related libraries
  library(fields)    # needed for image.plot()
  library(sp)        # needed for coordinates, SpatialPointsDataFrame
  library(maptools)  # neeed for wrld_simpl map

# Get world shape for map background
  data(wrld_simpl)            ## from maptools package
  shp <- wrld_simpl

# Read source data file 
 link <- "http://processtrends.com/Files/global_2x2_lota_data_latest.csv"
 rdf <- read.table(link, skip = 1, sep = ",", header=T)
 names(rdf) <- c("i", "j", "lon", "lat", "anom")

###############################
# Convert all anom data with 9999.0000 to NA
  rdf$anom[rdf$anom==9999.0000] <- NA         # convert all 9999.0000 to NA

## Promote to SpatialPointsDataFrame
  points_df <- rdf          # make copy of original file
  coordinates(points_df) = c("lon", "lat")     # convert to sp file with
lon/lat cordinates

## Promote to SpatialPixelsDataFrame
  pixel_df <- points_df
  gridded(pixel_df) <- TRUE

## Promote to SpatialGridDataFrame
  rdf_sp = as(pixel_df, "SpatialGridDataFrame")


## Establish color scheme
  my_scheme <- two.colors(n=256, start="blue", end="red", middle="white")

## Generate Plot
    par(mar=c(2.5,2,1,1)) ; par(oma=c(0,0,0,0))  # set plot par(mar=)
    g_plot <- as.image.SpatialGridDataFrame(rdf_sp["anom"])
    image.plot(g_plot, col=my_scheme,las=1,
      axes=T, horizontal=T,  ylim=c(-91,91), xlim=c(-181,181), zlim =
c(-6,6),
      legend.mar=4,legend.shrink=0.5)
   plot(shp, border="black", add=T)

-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/How-to-Show-Missing-Data-with-fields-package-two-colors-function-tp5510840p5510840.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From karl at huftis.org  Thu Sep  9 14:23:33 2010
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Thu, 09 Sep 2010 14:23:33 +0200
Subject: [R-sig-Geo] Add interpolated coordinates to SpatialPolygons
Message-ID: <i6ajk6$nh9$1@dough.gmane.org>

Is there a simple way to add (lineraly interpolated) coordinates to 
SpatialPolygons; i.e., between each pair of connected points (coordinates),
add a bunch of points that lie *on* the line connecting the two points?

Here?s a very simple ASCII art example. I have a rectangle polygon:

*--------------*
|              |
|              |
|              |
*--------------*

To this I want to add more coordinates, to get:

*--*--*--*--*--*
|              |
*              *
|              |
*--*--*--*--*--*

The actual polygon would look identical when plotted. Of course my polygons 
are more complex (but non-self-intersecting).

The reason I need this is that I want to transform simple shapes from one 
projection (e.g., latlong) to a different one (e.g., Mercator). If I do a 
simple spTransform, straight lines in one projection are projected into 
straight lines in the other projection, instead of into curves, which is how 
the original polygon *should* look if reprojected.

I have tried searching for functions to do this, but it isn't easy to come 
up with the right search terms (given that such a function *does* exist).

-- 
Karl Ove Hufthammer


From r.hijmans at gmail.com  Thu Sep  9 14:36:10 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 9 Sep 2010 14:36:10 +0200
Subject: [R-sig-Geo] Add interpolated coordinates to SpatialPolygons
In-Reply-To: <i6ajk6$nh9$1@dough.gmane.org>
References: <i6ajk6$nh9$1@dough.gmane.org>
Message-ID: <AANLkTi=Pwew2oAdFLYuoZOi2rx5nRogU=FvMBASqTn7x@mail.gmail.com>

The makePoly function in 'geosphere' does this. Robert

On Thu, Sep 9, 2010 at 2:23 PM, Karl Ove Hufthammer <karl at huftis.org> wrote:
> Is there a simple way to add (lineraly interpolated) coordinates to
> SpatialPolygons; i.e., between each pair of connected points (coordinates),
> add a bunch of points that lie *on* the line connecting the two points?
>
> Here?s a very simple ASCII art example. I have a rectangle polygon:
>
> *--------------*
> | ? ? ? ? ? ? ?|
> | ? ? ? ? ? ? ?|
> | ? ? ? ? ? ? ?|
> *--------------*
>
> To this I want to add more coordinates, to get:
>
> *--*--*--*--*--*
> | ? ? ? ? ? ? ?|
> * ? ? ? ? ? ? ?*
> | ? ? ? ? ? ? ?|
> *--*--*--*--*--*
>
> The actual polygon would look identical when plotted. Of course my polygons
> are more complex (but non-self-intersecting).
>
> The reason I need this is that I want to transform simple shapes from one
> projection (e.g., latlong) to a different one (e.g., Mercator). If I do a
> simple spTransform, straight lines in one projection are projected into
> straight lines in the other projection, instead of into curves, which is how
> the original polygon *should* look if reprojected.
>
> I have tried searching for functions to do this, but it isn't easy to come
> up with the right search terms (given that such a function *does* exist).
>
> --
> Karl Ove Hufthammer
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From karl at huftis.org  Thu Sep  9 14:51:37 2010
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Thu, 09 Sep 2010 14:51:37 +0200
Subject: [R-sig-Geo] Add interpolated coordinates to SpatialPolygons
References: <i6ajk6$nh9$1@dough.gmane.org>
	<AANLkTi=Pwew2oAdFLYuoZOi2rx5nRogU=FvMBASqTn7x@mail.gmail.com>
Message-ID: <i6al8q$uug$1@dough.gmane.org>

Robert J. Hijmans wrote:

> The makePoly function in 'geosphere' does this. Robert

Great! That?s *exactly* what I was looking for.

Thanks!

-- 
Karl Ove Hufthammer


From mdsumner at gmail.com  Thu Sep  9 15:28:34 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 9 Sep 2010 23:28:34 +1000
Subject: [R-sig-Geo] [R-sig-eco] How to calculate time spent on a world
 grid with circumpolar trips
In-Reply-To: <4C5BDFAE.80903@cebc.cnrs.fr>
References: <4C5BDFAE.80903@cebc.cnrs.fr>
Message-ID: <AANLkTim9WCYohSP-m1eakf=RHfe-khm9D374EjcpY6i6@mail.gmail.com>

Sorry to have missed this.

There's really no way to do this in longitude / latitude without a lot
of manual handling. You could split into two trips, one using the
eastern hemisphere, the other the western and use a shared [-180,180]
grid that you sum together.

What to do at the split coordinate depends on your actual data, there
are many options.

If you are still looking for an answer I could have a closer look at
your example code, but real data would be more helpful if you can
share it. There are a number of problems in the code you posted that
prevent it from being easily run.

Cheers, Mike.




On Fri, Aug 6, 2010 at 8:10 PM, Pinaud David <pinaud at cebc.cnrs.fr> wrote:
> Dear all,
> I want to calculate a grid of time spent per cell with albatross data. The
> goal is then to relate this to fisheries data set on a 1x1? grid.
> I use the trip package with tripGrid(), but have some problems with birds
> crossing the date line.
> Usually I use a projection to do that but here I need to keep the 1x1? grid
> in order to relate density tu some data (fisheries...).
> I've tried with recenter() and nowrapSpatialLines(), without success.
> Here a code:
>
> library(trip)
> library(maps) ? # to draw world maps
>
> d <- data.frame(x=c(seq(50, 180, 10), seq(-170, 50, 10)), y=rnorm(n=37,
> m=-50, sd=3), tms=Sys.time()-(37:1*60*60*24), id=rep(1, 37)) ?# an example
> coordinates(d) <- ~x+y
> tr <- trip(d, c("tms", "id"))
> proj4string(at) <- CRS("+proj=longlat +ellps=WGS84")
>
> map('world')
> plot(tr, add=T)
> points(coordinates(tr), t="l")
>
> # grid
> grid.base <- expand.grid(Long=seq(-180, 180, by=1), Lat=seq(-70, -15, by=1))
> ? # tab coords
> coordinates(grid.base) <- ~ Long + Lat
> proj4string(grid.base) <- CRS("+proj=longlat +ellps=WGS84")
> gt <- makeGridTopology(grid.base, cellsize = c(1, 1)) ?# def grid topo
>
> # time spent per cell
> tppc <- tripGrid(tr, grid = gt)
> tppc01 <- tppc ? ? ? ? ? ? ? # a copy for pres/abs
> tppc01 at data$z <- ifelse(tppc at data$z > 0, 1, 0)
>
> image(tppc, col=rev(heat.colors(500))) ?# seems ok
> map('world', add=T)
> points(coordinates(tr), t="l")
>
> # but with presence/absence:
> image(tppc01, col=c("white", "green"))
> map('world', add=T)
> points(coordinates(tr), t="l", col="blue")
>
> Some ideas ?
>
>
> Many thanks for your time.
> David
>
> --
> ***************************************************
> David PINAUD
> Ing?nieur de Recherche "Analyses spatiales"
>
> Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
> 79360 Villiers-en-Bois, France poste 485
> Tel: +33 (0)5.49.09.35.58
> Fax: +33 (0)5.49.09.65.26
> http://www.cebc.cnrs.fr/
>
> ***************************************************
>
>
>
>
> __________ Information from ESET Mail Security, version of virus signature
> database 5346 (20100806) __________
>
> The message was checked by ESET Mail Security.
> http://www.eset.com
>
>
> _______________________________________________
> R-sig-ecology mailing list
> R-sig-ecology at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-ecology
>
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From lubinbin220 at gmail.com  Thu Sep  9 16:18:43 2010
From: lubinbin220 at gmail.com (binbin lu)
Date: Thu, 9 Sep 2010 15:18:43 +0100
Subject: [R-sig-Geo] Is there a function to correct arc-node topology of
	network
Message-ID: <AANLkTinRCPry1eEp2q22-MFS+WriOfvcGhqhzEg2abST@mail.gmail.com>

Hi,

Is there a function in any R package to correct  arc-node topology of
a network? Similar with the Arcinfo function "Clean (Coverage)".

Thanks a million in advance.
Binbin


From aslantas at metu.edu.tr  Thu Sep  9 16:42:07 2010
From: aslantas at metu.edu.tr (Pinar Aslantas Bostan)
Date: Thu, 09 Sep 2010 17:42:07 +0300
Subject: [R-sig-Geo] negative r-squares
Message-ID: <20100909174207.18105giaxwh63133@horde.metu.edu.tr>

Hi all,

I am working about comparison of kriging and regression methods. I  
have one dependent (PREC) and seven independent variables. I created  
10 different test and train datasets. I am using train datasets for  
building the models and test datasets for calculating error (RMSE) and  
r-squares. When I obtained prediction values for grid, then I use  
overlay() to get predictions for test dataset. For example:

# regression kriging
# dem is the grid (I want to get predictions for each pixel of dem)  
and dem$rk.pred1 contains regression kriging predictions
> test1$rk.predicted = dem$rk.pred1[overlay(dem, test1)]

# calculating r-square values based on test values
> ss <-(test1$PREC-mean(test1$PREC))*(test1$PREC-mean(test1$PREC))
> sst1<-sum(ss)
> e <-(test1$PREC-test1$rk.predicted)*(test1$PREC-test1$rk.predicted)
> sse.rk<-sum(e)
> rk1.r.square<-1-(sse.rk/sst1)

My problem is that, for some datasets the methods can be resulted with  
negative r-squares. Here I gave an example about regression kriging  
but also same problem may occur for linear regression. I checked the  
dependent and independent variables and there is no problem with them.  
Are there anyone who knows another function instead of overlay() for  
the same purpose? (I thougt that maybe the problem is because of  
overlay function) or do you have any idea about reason of negative  
r-square values?

Best regards,
Pinar


********************************************************************************
Pinar Aslantas Bostan
Research Assistant
Department of Geodetic and
Geographic Information Technologies (GGIT)
Middle East Technical University
06531 Ankara/TURKEY
aslantas at metu.edu.tr


From nitmithv at yahoo.com.cn  Thu Sep  9 16:44:00 2010
From: nitmithv at yahoo.com.cn (K Z)
Date: Thu, 9 Sep 2010 10:44:00 -0400
Subject: [R-sig-Geo] Differences of variogram parameters fitted by gstat and
	automap
Message-ID: <201009091043595154854@yahoo.com.cn>

Dear all,

I am currently fitting variograms using both the "autofitVariogram" fuction in the "automap" package and the "fit.variogram" function in the "gstat" package. I used "autofitVariogram" to fit variograms at first, and then I used estimated parameters as the input of the "fit.variogram" function. However, I found the estimated parameters are largely different.  For example, the estimated parameters by the "autofitVariogram" function are

$var_model
  model psill range kappa
1   Nug  2.47     0     0
2   Ste  1.41  2506    10

the estimated parameters by the "fit.variogram" function are:
  model psill range kappa
1   Nug  0.74     0     0
2   Ste  3.03  1269    10

I tried the "exponential" model structure, and got similar results. I understand I probably cannot exactly same results, but I expect I can get similar results. Any suggestion?

I appreciate your response and best regards,
Kai


__________________________________________________
???????????????


From b.rowlingson at lancaster.ac.uk  Thu Sep  9 18:06:37 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 9 Sep 2010 17:06:37 +0100
Subject: [R-sig-Geo] Is there a function to correct arc-node topology of
	network
In-Reply-To: <AANLkTinRCPry1eEp2q22-MFS+WriOfvcGhqhzEg2abST@mail.gmail.com>
References: <AANLkTinRCPry1eEp2q22-MFS+WriOfvcGhqhzEg2abST@mail.gmail.com>
Message-ID: <AANLkTikvhxjEuSLNd0S=vXYh6ckxfhVNn6TYg+wW1NxY@mail.gmail.com>

On Thu, Sep 9, 2010 at 3:18 PM, binbin lu <lubinbin220 at gmail.com> wrote:
> Hi,
>
> Is there a function in any R package to correct ?arc-node topology of
> a network? Similar with the Arcinfo function "Clean (Coverage)".

 The GRASS GIS system can do this via v.clean:

http://grass.fbk.eu/gdp/html_grass63/v.clean.html

 and there's some R-GRASS interoperability tools (I haven't played
with them much, but others on this list have). I think it would be
easier to do it with GRASS than for someone to implement sliver and
dangle removal in R from scratch.

 That said, I do have some code from waaay back that does clean and
build topology for the old-style R 'maps' data format. I've just
recovered it from a backup from 1995 and if I get a chance I might see
if it compiles and play with it. Prospects not good though!

Barry


From jroll at lcog.org  Thu Sep  9 18:16:56 2010
From: jroll at lcog.org (jroll)
Date: Thu, 9 Sep 2010 09:16:56 -0700 (PDT)
Subject: [R-sig-Geo] readShapeSpatial error with 2.11.1
Message-ID: <1284049016112-5515151.post@n2.nabble.com>


Anyone encounter an issue with using the readShapeSpatial function 
 from maptools in the latest version of R. ?I get a simple "Error in
 read.dbf(filen) : unable to open DBF file" but when i run the exact 
 script in 2.10.0 the script produces the map just fine. ?What has changed
or am i missing something/  

Sorry for no  code but i figured this may have been an unnecessary anyway.  

-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/readShapeSpatial-error-with-2-11-1-tp5515151p5515151.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Thu Sep  9 18:23:16 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 9 Sep 2010 18:23:16 +0200 (CEST)
Subject: [R-sig-Geo] readShapeSpatial error with 2.11.1
In-Reply-To: <1284049016112-5515151.post@n2.nabble.com>
References: <1284049016112-5515151.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.00.1009091819550.17633@reclus.nhh.no>

On Thu, 9 Sep 2010, jroll wrote:

>
> Anyone encounter an issue with using the readShapeSpatial function 
> from maptools in the latest version of R. ?I get a simple "Error in
> read.dbf(filen) : unable to open DBF file" but when i run the exact 
> script in 2.10.0 the script produces the map just fine. ?What has changed
> or am i missing something/ 
>
> Sorry for no  code but i figured this may have been an unnecessary anyway.

update.packages()

In foreign, read.dbf() now requires a properly named file, not a file 
ending in *.shp. The update to maptools in early April (before 2.11.0 was 
released) fixed the problem.

Roger

>
> -- 
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/readShapeSpatial-error-with-2-11-1-tp5515151p5515151.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From Jason.Gasper at noaa.gov  Thu Sep  9 18:25:29 2010
From: Jason.Gasper at noaa.gov (Jason Gasper)
Date: Thu, 09 Sep 2010 08:25:29 -0800
Subject: [R-sig-Geo] negative r-squares
In-Reply-To: <20100909174207.18105giaxwh63133@horde.metu.edu.tr>
References: <20100909174207.18105giaxwh63133@horde.metu.edu.tr>
Message-ID: <4C890A79.8030209@noaa.gov>

Hello Pinar,

I don't know for sure what your calculation is, but R2 values can range 
from -inf to 1 if an adjusted R2 is being used. In other words, one 
possibility is that your adjusting for degrees of freedom using some 
variation of the following (n-1/n-k)(1-R2) where the adjusted R2 is 
equivalent to simple regression when k=1.  So when the estimated R2 less 
than or equal to 0 that means the model forecast is inferior to the mean 
(really poor fit). Another way of looking at a negative R2 is that the 
fit is worse than a horizontal line, so the sum-of-squares from the 
model is larger than the sum-of-squares from a horizontal line. Again, 
poor fit.

Cheers-Jason


Pinar Aslantas Bostan wrote:
> Hi all,
>
> I am working about comparison of kriging and regression methods. I 
> have one dependent (PREC) and seven independent variables. I created 
> 10 different test and train datasets. I am using train datasets for 
> building the models and test datasets for calculating error (RMSE) and 
> r-squares. When I obtained prediction values for grid, then I use 
> overlay() to get predictions for test dataset. For example:
>
> # regression kriging
> # dem is the grid (I want to get predictions for each pixel of dem) 
> and dem$rk.pred1 contains regression kriging predictions
>> test1$rk.predicted = dem$rk.pred1[overlay(dem, test1)]
>
> # calculating r-square values based on test values
>> ss <-(test1$PREC-mean(test1$PREC))*(test1$PREC-mean(test1$PREC))
>> sst1<-sum(ss)
>> e <-(test1$PREC-test1$rk.predicted)*(test1$PREC-test1$rk.predicted)
>> sse.rk<-sum(e)
>> rk1.r.square<-1-(sse.rk/sst1)
>
> My problem is that, for some datasets the methods can be resulted with 
> negative r-squares. Here I gave an example about regression kriging 
> but also same problem may occur for linear regression. I checked the 
> dependent and independent variables and there is no problem with them. 
> Are there anyone who knows another function instead of overlay() for 
> the same purpose? (I thougt that maybe the problem is because of 
> overlay function) or do you have any idea about reason of negative 
> r-square values?
>
> Best regards,
> Pinar
>
>
> ******************************************************************************** 
>
> Pinar Aslantas Bostan
> Research Assistant
> Department of Geodetic and
> Geographic Information Technologies (GGIT)
> Middle East Technical University
> 06531 Ankara/TURKEY
> aslantas at metu.edu.tr
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Jason Gasper
National Marine Fisheries Service
Alaska Region, Sustainable Fisheries Division
709 W. 9th St. Juneau, Alaska 99801 
Juneau, Alaska 99801

Phone  907-586-7237
Fax 907-586-7249


From Roger.Bivand at nhh.no  Thu Sep  9 18:33:16 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 9 Sep 2010 18:33:16 +0200 (CEST)
Subject: [R-sig-Geo] Is there a function to correct arc-node topology of
 network
In-Reply-To: <AANLkTikvhxjEuSLNd0S=vXYh6ckxfhVNn6TYg+wW1NxY@mail.gmail.com>
References: <AANLkTinRCPry1eEp2q22-MFS+WriOfvcGhqhzEg2abST@mail.gmail.com>
	<AANLkTikvhxjEuSLNd0S=vXYh6ckxfhVNn6TYg+wW1NxY@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1009091827040.17633@reclus.nhh.no>

On Thu, 9 Sep 2010, Barry Rowlingson wrote:

> On Thu, Sep 9, 2010 at 3:18 PM, binbin lu <lubinbin220 at gmail.com> wrote:
>> Hi,
>>
>> Is there a function in any R package to correct ?arc-node topology of
>> a network? Similar with the Arcinfo function "Clean (Coverage)".
>
> The GRASS GIS system can do this via v.clean:
>
> http://grass.fbk.eu/gdp/html_grass63/v.clean.html
>
> and there's some R-GRASS interoperability tools (I haven't played
> with them much, but others on this list have). I think it would be
> easier to do it with GRASS than for someone to implement sliver and
> dangle removal in R from scratch.
>
> That said, I do have some code from waaay back that does clean and
> build topology for the old-style R 'maps' data format. I've just
> recovered it from a backup from 1995 and if I get a chance I might see
> if it compiles and play with it. Prospects not good though!

Barry,

Are you thinking of the excellent:

http://www2.research.att.com/areas/stat/doc/93.2.ps

http://www2.research.att.com/areas/stat/doc/95.2.ps

mostly in awk and shellscripts in the second report? Then the building 
compiled programs that ship with the source maps package? They are 
elegant, but do involve manual editing of text files to remove dangles, 
etc. Not a menu in sight!

GRASS may be a way forward, with care.

Roger

>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From b.rowlingson at lancaster.ac.uk  Thu Sep  9 18:34:03 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 9 Sep 2010 17:34:03 +0100
Subject: [R-sig-Geo] Is there a function to correct arc-node topology of
	network
In-Reply-To: <alpine.LRH.2.00.1009091827040.17633@reclus.nhh.no>
References: <AANLkTinRCPry1eEp2q22-MFS+WriOfvcGhqhzEg2abST@mail.gmail.com>
	<AANLkTikvhxjEuSLNd0S=vXYh6ckxfhVNn6TYg+wW1NxY@mail.gmail.com>
	<alpine.LRH.2.00.1009091827040.17633@reclus.nhh.no>
Message-ID: <AANLkTi=YAvS11CqKCzQsOMGf6xsJQ=X5ZUwoD1-Bw+6m@mail.gmail.com>

On Thu, Sep 9, 2010 at 5:33 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> Barry,
>
> Are you thinking of the excellent:
>
> http://www2.research.att.com/areas/stat/doc/93.2.ps
>
> http://www2.research.att.com/areas/stat/doc/95.2.ps
>
> mostly in awk and shellscripts in the second report? Then the building
> compiled programs that ship with the source maps package? They are elegant,
> but do involve manual editing of text files to remove dangles, etc. Not a
> menu in sight!
>

 Yes, thats the stuff. I can't imagine they'll be too quick, since I
don't think they use spatial indexing or any craft trick to improve on
O(N^2) performance when looking at intersections of segments - but
maybe there's some sorting going on...

Barry


From gianni.lavaredo at gmail.com  Thu Sep  9 18:49:07 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Thu, 9 Sep 2010 18:49:07 +0200
Subject: [R-sig-Geo] trunk columns name in a data.frame to convert in a
	shape-file
Message-ID: <AANLkTik0SJHj=KXM3xnSwfsKV0HhoBD4_a-o4-Xuy8Qb@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100909/e3e51df7/attachment.pl>

From kerryr at sccwrp.org  Thu Sep  9 19:21:53 2010
From: kerryr at sccwrp.org (Kerry Ritter)
Date: Thu, 09 Sep 2010 10:21:53 -0700
Subject: [R-sig-Geo] Differences of variogram parameters fitted by gstat
 and	automap
In-Reply-To: <201009091043595154854@yahoo.com.cn>
References: <201009091043595154854@yahoo.com.cn>
Message-ID: <4C8917B1.1000607@sccwrp.org>

 I don't know much about "autofitVariogram" fuction in the "automap"
package but I am pretty familiar with the "fit.variogram" function in
the "gstat". One possibility for getting different parameter estimates
is that the two methods are using two different objective functions for
fitting the variogram. For example, I know that gstat has options for
various weighted least squares solutions. I have played around with a
few of the weighted least squares options and I get highly variable
results for the same data, depending on which weights I use. Also, check
that your exponential models are expressed the same in both programs.

Hope this helps,
Kerry

On 9/9/2010 7:44 AM, K Z wrote:
> Dear all,
>
> I am currently fitting variograms using both the "autofitVariogram" fuction in the "automap" package and the "fit.variogram" function in the "gstat" package. I used "autofitVariogram" to fit variograms at first, and then I used estimated parameters as the input of the "fit.variogram" function. However, I found the estimated parameters are largely different.  For example, the estimated parameters by the "autofitVariogram" function are
>
> $var_model
>   model psill range kappa
> 1   Nug  2.47     0     0
> 2   Ste  1.41  2506    10
>
> the estimated parameters by the "fit.variogram" function are:
>   model psill range kappa
> 1   Nug  0.74     0     0
> 2   Ste  3.03  1269    10
>
> I tried the "exponential" model structure, and got similar results. I understand I probably cannot exactly same results, but I expect I can get similar results. Any suggestion?
>
> I appreciate your response and best regards,
> Kai
>
>
> __________________________________________________
> ???????????????
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
**********************
Kerry Ritter, Ph.D.
statistician
Southern California Coastal Water Research Project
3535 Harbor Blvd., Suite 110

work: 714-755-3210
cell: 714-420-3346
fax:  714-755-3299

email: kerryr at sccwrp.org


From edzer.pebesma at uni-muenster.de  Thu Sep  9 21:15:23 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 09 Sep 2010 21:15:23 +0200
Subject: [R-sig-Geo] negative r-squares
In-Reply-To: <4C890A79.8030209@noaa.gov>
References: <20100909174207.18105giaxwh63133@horde.metu.edu.tr>
	<4C890A79.8030209@noaa.gov>
Message-ID: <4C89324B.7090300@uni-muenster.de>

Pinar, Jason,

>From the script below it seems no adjustment for degrees of freedom
is being made.

In this case R2 can become negative because you use a different
test and train set. Suppose the test set contains one single
extreme that is not present in the training set. In that case, the
mean of the test values is, in terms of sum of squares, a better
predicter than your regression model that didn't know about this
outlier. Don't forget that the mean of the test set does contain
this outlier. Hence, R2 can easily become negative when evaluated
over a different data set then the regression model was derived from.

On 09/09/2010 06:25 PM, Jason Gasper wrote:
> Hello Pinar,
> 
> I don't know for sure what your calculation is, but R2 values can range
> from -inf to 1 if an adjusted R2 is being used. In other words, one
> possibility is that your adjusting for degrees of freedom using some
> variation of the following (n-1/n-k)(1-R2) where the adjusted R2 is
> equivalent to simple regression when k=1.  So when the estimated R2 less
> than or equal to 0 that means the model forecast is inferior to the mean
> (really poor fit). Another way of looking at a negative R2 is that the
> fit is worse than a horizontal line, so the sum-of-squares from the
> model is larger than the sum-of-squares from a horizontal line. Again,
> poor fit.
> 
> Cheers-Jason
> 
> 
> Pinar Aslantas Bostan wrote:
>> Hi all,
>>
>> I am working about comparison of kriging and regression methods. I
>> have one dependent (PREC) and seven independent variables. I created
>> 10 different test and train datasets. I am using train datasets for
>> building the models and test datasets for calculating error (RMSE) and
>> r-squares. When I obtained prediction values for grid, then I use
>> overlay() to get predictions for test dataset. For example:
>>
>> # regression kriging
>> # dem is the grid (I want to get predictions for each pixel of dem)
>> and dem$rk.pred1 contains regression kriging predictions
>>> test1$rk.predicted = dem$rk.pred1[overlay(dem, test1)]
>>
>> # calculating r-square values based on test values
>>> ss <-(test1$PREC-mean(test1$PREC))*(test1$PREC-mean(test1$PREC))
>>> sst1<-sum(ss)
>>> e <-(test1$PREC-test1$rk.predicted)*(test1$PREC-test1$rk.predicted)
>>> sse.rk<-sum(e)
>>> rk1.r.square<-1-(sse.rk/sst1)
>>
>> My problem is that, for some datasets the methods can be resulted with
>> negative r-squares. Here I gave an example about regression kriging
>> but also same problem may occur for linear regression. I checked the
>> dependent and independent variables and there is no problem with them.
>> Are there anyone who knows another function instead of overlay() for
>> the same purpose? (I thougt that maybe the problem is because of
>> overlay function) or do you have any idea about reason of negative
>> r-square values?
>>
>> Best regards,
>> Pinar
>>
>>
>> ********************************************************************************
>>
>> Pinar Aslantas Bostan
>> Research Assistant
>> Department of Geodetic and
>> Geographic Information Technologies (GGIT)
>> Middle East Technical University
>> 06531 Ankara/TURKEY
>> aslantas at metu.edu.tr
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From mdsumner at gmail.com  Thu Sep  9 22:26:35 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 10 Sep 2010 06:26:35 +1000
Subject: [R-sig-Geo] trunk columns name in a data.frame to convert in a
	shape-file
In-Reply-To: <AANLkTik0SJHj=KXM3xnSwfsKV0HhoBD4_a-o4-Xuy8Qb@mail.gmail.com>
References: <AANLkTik0SJHj=KXM3xnSwfsKV0HhoBD4_a-o4-Xuy8Qb@mail.gmail.com>
Message-ID: <AANLkTikbNMq9QNFPYL6NuZXeOFStD3GUa7psQdiARhed@mail.gmail.com>

Many options here, but if you literally just want the first (up to) 8
characters:

names(mydf) <- substr(names(mydf), 1, 8)


On Fri, Sep 10, 2010 at 2:49 AM, gianni lavaredo
<gianni.lavaredo at gmail.com> wrote:
> Dear Researchers,
>
> I have a data frame with several column with the name letters more of 8
> characters. I wish to convert in a shape-file but there is a problem because
> the names of the columns are more the 8 letters limit. Is there a function
> to trunk the names is a data.frame?
>
> this is a easy example
>
> mydf <-
> data.frame(mydatainfield=c(1,2,3,4,5),mydatainlab=c(1,2,3,4,5),intensity=c(1,2,3,4,5))
>
> thanks in advance
> Gianni
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From caspar.hallmann at gmail.com  Thu Sep  9 22:33:58 2010
From: caspar.hallmann at gmail.com (caspar hallmann)
Date: Thu, 9 Sep 2010 22:33:58 +0200
Subject: [R-sig-Geo] negative r-squares
In-Reply-To: <4C89324B.7090300@uni-muenster.de>
References: <20100909174207.18105giaxwh63133@horde.metu.edu.tr>
	<4C890A79.8030209@noaa.gov> <4C89324B.7090300@uni-muenster.de>
Message-ID: <AANLkTim4C8S6=Q2z4_sV-P=nVTZetMYPtP3v6=ySVFQe@mail.gmail.com>

This raises a question though whether one should use the mean of the
training data or the mean of the test data in calculating the total
sum of squares. I believe the first is more fair with respect to
answering whether a given model is any better as compared the null
model in predicting the response. When using sst based the mean of the
test data you are essentially comparing your model to a null model
that has been based on different data (which i think isn't fair), and
its probably the reason why the ss.err > sst,  and hence R2<0.

Caspar



On Thu, Sep 9, 2010 at 9:15 PM, Edzer Pebesma
<edzer.pebesma at uni-muenster.de> wrote:
> Pinar, Jason,
>
> From the script below it seems no adjustment for degrees of freedom
> is being made.
>
> In this case R2 can become negative because you use a different
> test and train set. Suppose the test set contains one single
> extreme that is not present in the training set. In that case, the
> mean of the test values is, in terms of sum of squares, a better
> predicter than your regression model that didn't know about this
> outlier. Don't forget that the mean of the test set does contain
> this outlier. Hence, R2 can easily become negative when evaluated
> over a different data set then the regression model was derived from.
>
> On 09/09/2010 06:25 PM, Jason Gasper wrote:
>> Hello Pinar,
>>
>> I don't know for sure what your calculation is, but R2 values can range
>> from -inf to 1 if an adjusted R2 is being used. In other words, one
>> possibility is that your adjusting for degrees of freedom using some
>> variation of the following (n-1/n-k)(1-R2) where the adjusted R2 is
>> equivalent to simple regression when k=1. ?So when the estimated R2 less
>> than or equal to 0 that means the model forecast is inferior to the mean
>> (really poor fit). Another way of looking at a negative R2 is that the
>> fit is worse than a horizontal line, so the sum-of-squares from the
>> model is larger than the sum-of-squares from a horizontal line. Again,
>> poor fit.
>>
>> Cheers-Jason
>>
>>
>> Pinar Aslantas Bostan wrote:
>>> Hi all,
>>>
>>> I am working about comparison of kriging and regression methods. I
>>> have one dependent (PREC) and seven independent variables. I created
>>> 10 different test and train datasets. I am using train datasets for
>>> building the models and test datasets for calculating error (RMSE) and
>>> r-squares. When I obtained prediction values for grid, then I use
>>> overlay() to get predictions for test dataset. For example:
>>>
>>> # regression kriging
>>> # dem is the grid (I want to get predictions for each pixel of dem)
>>> and dem$rk.pred1 contains regression kriging predictions
>>>> test1$rk.predicted = dem$rk.pred1[overlay(dem, test1)]
>>>
>>> # calculating r-square values based on test values
>>>> ss <-(test1$PREC-mean(test1$PREC))*(test1$PREC-mean(test1$PREC))
>>>> sst1<-sum(ss)
>>>> e <-(test1$PREC-test1$rk.predicted)*(test1$PREC-test1$rk.predicted)
>>>> sse.rk<-sum(e)
>>>> rk1.r.square<-1-(sse.rk/sst1)
>>>
>>> My problem is that, for some datasets the methods can be resulted with
>>> negative r-squares. Here I gave an example about regression kriging
>>> but also same problem may occur for linear regression. I checked the
>>> dependent and independent variables and there is no problem with them.
>>> Are there anyone who knows another function instead of overlay() for
>>> the same purpose? (I thougt that maybe the problem is because of
>>> overlay function) or do you have any idea about reason of negative
>>> r-square values?
>>>
>>> Best regards,
>>> Pinar
>>>
>>>
>>> ********************************************************************************
>>>
>>> Pinar Aslantas Bostan
>>> Research Assistant
>>> Department of Geodetic and
>>> Geographic Information Technologies (GGIT)
>>> Middle East Technical University
>>> 06531 Ankara/TURKEY
>>> aslantas at metu.edu.tr
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Jason.Gasper at noaa.gov  Thu Sep  9 23:06:30 2010
From: Jason.Gasper at noaa.gov (Jason Gasper)
Date: Thu, 09 Sep 2010 13:06:30 -0800
Subject: [R-sig-Geo] negative r-squares
In-Reply-To: <AANLkTim4C8S6=Q2z4_sV-P=nVTZetMYPtP3v6=ySVFQe@mail.gmail.com>
References: <20100909174207.18105giaxwh63133@horde.metu.edu.tr>
	<4C890A79.8030209@noaa.gov> <4C89324B.7090300@uni-muenster.de>
	<AANLkTim4C8S6=Q2z4_sV-P=nVTZetMYPtP3v6=ySVFQe@mail.gmail.com>
Message-ID: <4C894C56.7020603@noaa.gov>

I may be a little off base here, but wouldn't an ex-sample R^2 
calculation be required since you are using your test data as a 
"prediction". So the  ex-sample R^2 would be 1-(SSE test 
data/sum(Y-mean(Ytrain))^2).  So R^2 in this context has been motivated 
as a comparison between two competing models.  Thus, a negative R^2 
value would indicate your  ex-sample (test data) forecasts are worse 
than a mean value.

caspar hallmann wrote:
> This raises a question though whether one should use the mean of the
> training data or the mean of the test data in calculating the total
> sum of squares. I believe the first is more fair with respect to
> answering whether a given model is any better as compared the null
> model in predicting the response. When using sst based the mean of the
> test data you are essentially comparing your model to a null model
> that has been based on different data (which i think isn't fair), and
> its probably the reason why the ss.err > sst,  and hence R2<0.
>
> Caspar
>
>
>
> On Thu, Sep 9, 2010 at 9:15 PM, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de> wrote:
>   
>> Pinar, Jason,
>>
>> From the script below it seems no adjustment for degrees of freedom
>> is being made.
>>
>> In this case R2 can become negative because you use a different
>> test and train set. Suppose the test set contains one single
>> extreme that is not present in the training set. In that case, the
>> mean of the test values is, in terms of sum of squares, a better
>> predicter than your regression model that didn't know about this
>> outlier. Don't forget that the mean of the test set does contain
>> this outlier. Hence, R2 can easily become negative when evaluated
>> over a different data set then the regression model was derived from.
>>
>> On 09/09/2010 06:25 PM, Jason Gasper wrote:
>>     
>>> Hello Pinar,
>>>
>>> I don't know for sure what your calculation is, but R2 values can range
>>> from -inf to 1 if an adjusted R2 is being used. In other words, one
>>> possibility is that your adjusting for degrees of freedom using some
>>> variation of the following (n-1/n-k)(1-R2) where the adjusted R2 is
>>> equivalent to simple regression when k=1.  So when the estimated R2 less
>>> than or equal to 0 that means the model forecast is inferior to the mean
>>> (really poor fit). Another way of looking at a negative R2 is that the
>>> fit is worse than a horizontal line, so the sum-of-squares from the
>>> model is larger than the sum-of-squares from a horizontal line. Again,
>>> poor fit.
>>>
>>> Cheers-Jason
>>>
>>>
>>> Pinar Aslantas Bostan wrote:
>>>       
>>>> Hi all,
>>>>
>>>> I am working about comparison of kriging and regression methods. I
>>>> have one dependent (PREC) and seven independent variables. I created
>>>> 10 different test and train datasets. I am using train datasets for
>>>> building the models and test datasets for calculating error (RMSE) and
>>>> r-squares. When I obtained prediction values for grid, then I use
>>>> overlay() to get predictions for test dataset. For example:
>>>>
>>>> # regression kriging
>>>> # dem is the grid (I want to get predictions for each pixel of dem)
>>>> and dem$rk.pred1 contains regression kriging predictions
>>>>         
>>>>> test1$rk.predicted = dem$rk.pred1[overlay(dem, test1)]
>>>>>           
>>>> # calculating r-square values based on test values
>>>>         
>>>>> ss <-(test1$PREC-mean(test1$PREC))*(test1$PREC-mean(test1$PREC))
>>>>> sst1<-sum(ss)
>>>>> e <-(test1$PREC-test1$rk.predicted)*(test1$PREC-test1$rk.predicted)
>>>>> sse.rk<-sum(e)
>>>>> rk1.r.square<-1-(sse.rk/sst1)
>>>>>           
>>>> My problem is that, for some datasets the methods can be resulted with
>>>> negative r-squares. Here I gave an example about regression kriging
>>>> but also same problem may occur for linear regression. I checked the
>>>> dependent and independent variables and there is no problem with them.
>>>> Are there anyone who knows another function instead of overlay() for
>>>> the same purpose? (I thougt that maybe the problem is because of
>>>> overlay function) or do you have any idea about reason of negative
>>>> r-square values?
>>>>
>>>> Best regards,
>>>> Pinar
>>>>
>>>>
>>>> ********************************************************************************
>>>>
>>>> Pinar Aslantas Bostan
>>>> Research Assistant
>>>> Department of Geodetic and
>>>> Geographic Information Technologies (GGIT)
>>>> Middle East Technical University
>>>> 06531 Ankara/TURKEY
>>>> aslantas at metu.edu.tr
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>         
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>     
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Scott.Waichler at pnl.gov  Fri Sep 10 01:59:11 2010
From: Scott.Waichler at pnl.gov (Waichler, Scott R)
Date: Thu, 9 Sep 2010 16:59:11 -0700
Subject: [R-sig-Geo] How to make directional h-scatterplots
Message-ID: <A632B3F93D861843A3C966F3962C3F84010810361896@EMAIL05.pnl.gov>

What is the best way to make directional h-scatterplots (lagged scatterplots)?  There is hscat() in gstat, but I don't see a way to limit point pair selection to certain directions.  I have a 3D dataset based on logs from 30 different wells, with vertical spacing between points and total extent both smaller than horizontal spacing and extent. 

Here is what I have figured out so far.  For the horizontal direction, I can select points in a given x-y plane before calling hscat().  For the vertical direction, I can do a de facto selection by limiting the maximum lag distance to something smaller than the minimum distance between my wells.  

My main interest for this is in 2 directions, horizontal and vertical, but it would be nice to specify angles as in the anis argument for vgm().

Thanks,
Scott Waichler
Pacific Northwest National Laboratory
scott.waichler at pnl.gov


From edzer.pebesma at uni-muenster.de  Fri Sep 10 07:52:48 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 10 Sep 2010 07:52:48 +0200
Subject: [R-sig-Geo] How to make directional h-scatterplots
In-Reply-To: <A632B3F93D861843A3C966F3962C3F84010810361896@EMAIL05.pnl.gov>
References: <A632B3F93D861843A3C966F3962C3F84010810361896@EMAIL05.pnl.gov>
Message-ID: <4C89C7B0.8050804@uni-muenster.de>

you can pass the alpha, beta, tol.hor and tol.ver parameters to hscat,
who will pass it on to variogram(). The problem is that the alpha
parameter, when set, is also passed to xyplot() and messes up the plot
there - I will choose a different name for that one.

On 09/10/2010 01:59 AM, Waichler, Scott R wrote:
> What is the best way to make directional h-scatterplots (lagged scatterplots)?  There is hscat() in gstat, but I don't see a way to limit point pair selection to certain directions.  I have a 3D dataset based on logs from 30 different wells, with vertical spacing between points and total extent both smaller than horizontal spacing and extent. 
> 
> Here is what I have figured out so far.  For the horizontal direction, I can select points in a given x-y plane before calling hscat().  For the vertical direction, I can do a de facto selection by limiting the maximum lag distance to something smaller than the minimum distance between my wells.  
> 
> My main interest for this is in 2 directions, horizontal and vertical, but it would be nice to specify angles as in the anis argument for vgm().
> 
> Thanks,
> Scott Waichler
> Pacific Northwest National Laboratory
> scott.waichler at pnl.gov
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From edzer.pebesma at uni-muenster.de  Fri Sep 10 08:19:14 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 10 Sep 2010 08:19:14 +0200
Subject: [R-sig-Geo] How to make directional h-scatterplots
In-Reply-To: <4C89C7B0.8050804@uni-muenster.de>
References: <A632B3F93D861843A3C966F3962C3F84010810361896@EMAIL05.pnl.gov>
	<4C89C7B0.8050804@uni-muenster.de>
Message-ID: <4C89CDE2.9090006@uni-muenster.de>

In response to this response, I uploaded gstat_0.9-70 to CRAN.

On 09/10/2010 07:52 AM, Edzer Pebesma wrote:
> you can pass the alpha, beta, tol.hor and tol.ver parameters to hscat,
> who will pass it on to variogram(). The problem is that the alpha
> parameter, when set, is also passed to xyplot() and messes up the plot
> there - I will choose a different name for that one.
> 
> On 09/10/2010 01:59 AM, Waichler, Scott R wrote:
>> What is the best way to make directional h-scatterplots (lagged scatterplots)?  There is hscat() in gstat, but I don't see a way to limit point pair selection to certain directions.  I have a 3D dataset based on logs from 30 different wells, with vertical spacing between points and total extent both smaller than horizontal spacing and extent. 
>>
>> Here is what I have figured out so far.  For the horizontal direction, I can select points in a given x-y plane before calling hscat().  For the vertical direction, I can do a de facto selection by limiting the maximum lag distance to something smaller than the minimum distance between my wells.  
>>
>> My main interest for this is in 2 directions, horizontal and vertical, but it would be nice to specify angles as in the anis argument for vgm().
>>
>> Thanks,
>> Scott Waichler
>> Pacific Northwest National Laboratory
>> scott.waichler at pnl.gov
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From aslantas at metu.edu.tr  Fri Sep 10 10:39:00 2010
From: aslantas at metu.edu.tr (Pinar Aslantas Bostan)
Date: Fri, 10 Sep 2010 11:39:00 +0300
Subject: [R-sig-Geo] negative r-squares
In-Reply-To: <4C894C56.7020603@noaa.gov>
References: <20100909174207.18105giaxwh63133@horde.metu.edu.tr>
	<4C890A79.8030209@noaa.gov> <4C89324B.7090300@uni-muenster.de>
	<AANLkTim4C8S6=Q2z4_sV-P=nVTZetMYPtP3v6=ySVFQe@mail.gmail.com>
	<4C894C56.7020603@noaa.gov>
Message-ID: <20100910113900.13044g15mz8w94f8@horde.metu.edu.tr>

Dear Jason, Edzer and Caspar,

Thank you very much for your suggestions. I really feel better because  
now (at least) I know that I didn't make mistake about variables and  
implementation of methods. I will try to make adjustment of degrees of  
freedom and using mean of the training dataset for calculating errors  
and r-square. As Edzer said, if the test dataset has an outlier  
(higher precipitation than mean; like 2200 mm) then I obtained the  
r-square negative!

Best regards and good luck with your studies,
Pinar




Alinti Jason Gasper <Jason.Gasper at noaa.gov>

> I may be a little off base here, but wouldn't an ex-sample R^2  
> calculation be required since you are using your test data as a  
> "prediction". So the  ex-sample R^2 would be 1-(SSE test  
> data/sum(Y-mean(Ytrain))^2).  So R^2 in this context has been  
> motivated as a comparison between two competing models.  Thus, a  
> negative R^2 value would indicate your  ex-sample (test data)  
> forecasts are worse than a mean value.
>
> caspar hallmann wrote:
>> This raises a question though whether one should use the mean of the
>> training data or the mean of the test data in calculating the total
>> sum of squares. I believe the first is more fair with respect to
>> answering whether a given model is any better as compared the null
>> model in predicting the response. When using sst based the mean of the
>> test data you are essentially comparing your model to a null model
>> that has been based on different data (which i think isn't fair), and
>> its probably the reason why the ss.err > sst,  and hence R2<0.
>>
>> Caspar
>>
>>
>>
>> On Thu, Sep 9, 2010 at 9:15 PM, Edzer Pebesma
>> <edzer.pebesma at uni-muenster.de> wrote:
>>
>>> Pinar, Jason,
>>>
>>> From the script below it seems no adjustment for degrees of freedom
>>> is being made.
>>>
>>> In this case R2 can become negative because you use a different
>>> test and train set. Suppose the test set contains one single
>>> extreme that is not present in the training set. In that case, the
>>> mean of the test values is, in terms of sum of squares, a better
>>> predicter than your regression model that didn't know about this
>>> outlier. Don't forget that the mean of the test set does contain
>>> this outlier. Hence, R2 can easily become negative when evaluated
>>> over a different data set then the regression model was derived from.
>>>
>>> On 09/09/2010 06:25 PM, Jason Gasper wrote:
>>>
>>>> Hello Pinar,
>>>>
>>>> I don't know for sure what your calculation is, but R2 values can range
>>>> from -inf to 1 if an adjusted R2 is being used. In other words, one
>>>> possibility is that your adjusting for degrees of freedom using some
>>>> variation of the following (n-1/n-k)(1-R2) where the adjusted R2 is
>>>> equivalent to simple regression when k=1.  So when the estimated R2 less
>>>> than or equal to 0 that means the model forecast is inferior to the mean
>>>> (really poor fit). Another way of looking at a negative R2 is that the
>>>> fit is worse than a horizontal line, so the sum-of-squares from the
>>>> model is larger than the sum-of-squares from a horizontal line. Again,
>>>> poor fit.
>>>>
>>>> Cheers-Jason
>>>>
>>>>
>>>> Pinar Aslantas Bostan wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> I am working about comparison of kriging and regression methods. I
>>>>> have one dependent (PREC) and seven independent variables. I created
>>>>> 10 different test and train datasets. I am using train datasets for
>>>>> building the models and test datasets for calculating error (RMSE) and
>>>>> r-squares. When I obtained prediction values for grid, then I use
>>>>> overlay() to get predictions for test dataset. For example:
>>>>>
>>>>> # regression kriging
>>>>> # dem is the grid (I want to get predictions for each pixel of dem)
>>>>> and dem$rk.pred1 contains regression kriging predictions
>>>>>
>>>>>> test1$rk.predicted = dem$rk.pred1[overlay(dem, test1)]
>>>>>>
>>>>> # calculating r-square values based on test values
>>>>>
>>>>>> ss <-(test1$PREC-mean(test1$PREC))*(test1$PREC-mean(test1$PREC))
>>>>>> sst1<-sum(ss)
>>>>>> e <-(test1$PREC-test1$rk.predicted)*(test1$PREC-test1$rk.predicted)
>>>>>> sse.rk<-sum(e)
>>>>>> rk1.r.square<-1-(sse.rk/sst1)
>>>>>>
>>>>> My problem is that, for some datasets the methods can be resulted with
>>>>> negative r-squares. Here I gave an example about regression kriging
>>>>> but also same problem may occur for linear regression. I checked the
>>>>> dependent and independent variables and there is no problem with them.
>>>>> Are there anyone who knows another function instead of overlay() for
>>>>> the same purpose? (I thougt that maybe the problem is because of
>>>>> overlay function) or do you have any idea about reason of negative
>>>>> r-square values?
>>>>>
>>>>> Best regards,
>>>>> Pinar
>>>>>
>>>>>
>>>>> ********************************************************************************
>>>>>
>>>>> Pinar Aslantas Bostan
>>>>> Research Assistant
>>>>> Department of Geodetic and
>>>>> Geographic Information Technologies (GGIT)
>>>>> Middle East Technical University
>>>>> 06531 Ankara/TURKEY
>>>>> aslantas at metu.edu.tr
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>> --
>>> Edzer Pebesma
>>> Institute for Geoinformatics (ifgi), University of M?nster
>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From hengl at spatial-analyst.net  Fri Sep 10 14:11:30 2010
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Fri, 10 Sep 2010 14:11:30 +0200
Subject: [R-sig-Geo] Revolution R Enterprise - solution to handling large
	(spatial) data?
Message-ID: <4C8A2072.50506@spatial-analyst.net>


(Maybe this is not really suited for the R-sig-geo, but since we often 
experience problems with loading and visualizing large data)

Has anyone yet used the Revolution R Entrerprise Version of R? 
Apparently it fixes/reduces the problem of large data and has an 
excellent GUI.

[http://www.revolutionanalytics.com/downloads/free-academic.php]

Read more:

"Startup wants to be R alternative to IBM, SAS"
[http://www.networkworld.com/news/2010/050410-startup-wants-to-be-r.html?hpg1=bn]

"A Community Site for R ? Sponsored by Revolution Analytics"
[http://www.inside-r.org]


T. Hengl
http://spatial-analyst.net


From roman.lustrik at gmail.com  Fri Sep 10 14:30:52 2010
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Fri, 10 Sep 2010 14:30:52 +0200
Subject: [R-sig-Geo] Revolution R Enterprise - solution to handling
 large (spatial) data?
In-Reply-To: <4C8A2072.50506@spatial-analyst.net>
References: <4C8A2072.50506@spatial-analyst.net>
Message-ID: <AANLkTinFiodGDObVYXLPT3v6ycUuiR+xSCmC9_N-0MBu@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100910/59ea806f/attachment.pl>

From landis at isciences.com  Fri Sep 10 14:50:08 2010
From: landis at isciences.com (Matthew Landis)
Date: Fri, 10 Sep 2010 08:50:08 -0400
Subject: [R-sig-Geo] Revolution R Enterprise - solution to handling
 large (spatial) data?
In-Reply-To: <4C8A2072.50506@spatial-analyst.net>
References: <4C8A2072.50506@spatial-analyst.net>
Message-ID: <4C8A2980.3090908@isciences.com>

  Tomislav,
For what it's worth, the raster package has solved the problem of 
loading large data sets for me, at least as far as gridded spatial data 
is concerned.

Matt

On 9/10/2010 8:11 AM, Tomislav Hengl wrote:
>
> (Maybe this is not really suited for the R-sig-geo, but since we often 
> experience problems with loading and visualizing large data)
>

-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~
Matthew Landis, Ph.D.
Research Scientist
ISciences, LLC
61 Main St. Suite 200
Burlington VT 05401
~~~~~~~~~~~~~~~~~~~~~~~~~~


From Roger.Bivand at nhh.no  Fri Sep 10 15:03:21 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 10 Sep 2010 15:03:21 +0200 (CEST)
Subject: [R-sig-Geo] Revolution R Enterprise - solution to handling
 large (spatial) data?
In-Reply-To: <4C8A2072.50506@spatial-analyst.net>
References: <4C8A2072.50506@spatial-analyst.net>
Message-ID: <alpine.LRH.2.00.1009101419070.22217@reclus.nhh.no>

On Fri, 10 Sep 2010, Tomislav Hengl wrote:

>
> (Maybe this is not really suited for the R-sig-geo, but since we often 
> experience problems with loading and visualizing large data)
>
> Has anyone yet used the Revolution R Entrerprise Version of R? Apparently it 
> fixes/reduces the problem of large data and has an excellent GUI.

No, it provides 64-bit support, which R for all platforms already does - 
the user has to provide the RAM as before. It does ship with a more 
integrated support for using multiple cores, but those facilities are also 
available for R anyway, provided the relevant packages are installed and 
loaded.

If you are thinking of "NEW! Big Data Analysis for Terabyte-Class File 
Structures ? A comprehensive solution that provides fast, scalable 
statistical analysis of large data sets without the RAM barrier of 
standard R" - this does not apply to the 2G limit on single R objects, 
which for most geodata problems are addressed quite adequately by tiling, 
as in the raster package.

What it provides apparently is a visual IDE and debugging, in addition to 
support. It does not provide contributed packages beyond those Revolution 
Analytics themselves write and maintain (they do, they are pro-active 
people, and are doing a good job in relation to business).

If your university will not let you install regular R, this is a good 
solution, because it gives IT departments a "supplier". Certainly worth 
trying for comparison, but on the same hardware it is unlikely to perform 
differently from R itself (since they cannot fork R and leave GPL, so any 
dramatic breakthroughs in performance would be merged back into trunk, if 
they work cross-platform). The RevoScaleR package is not on CRAN, and 
simply provides facilities similar to those such as biglm, ff and sqldf 
for doing analyses of chunks of large data frames using a different XDF 
file structure. Present status is summarised in the Large memory and 
out-of-memory data section of the HPC task view.

Hope this helps,

Roger

>
> [http://www.revolutionanalytics.com/downloads/free-academic.php]
>
> Read more:
>
> "Startup wants to be R alternative to IBM, SAS"
> [http://www.networkworld.com/news/2010/050410-startup-wants-to-be-r.html?hpg1=bn]
>
> "A Community Site for R ? Sponsored by Revolution Analytics"
> [http://www.inside-r.org]
>
>
> T. Hengl
> http://spatial-analyst.net
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From b.rowlingson at lancaster.ac.uk  Fri Sep 10 15:44:29 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 10 Sep 2010 14:44:29 +0100
Subject: [R-sig-Geo] Revolution R Enterprise - solution to handling
 large (spatial) data?
In-Reply-To: <4C8A2072.50506@spatial-analyst.net>
References: <4C8A2072.50506@spatial-analyst.net>
Message-ID: <AANLkTi=jAuBjX9rcvMrq7dg2CUspWxs7+G0UxA5EKM6Q@mail.gmail.com>

On Fri, Sep 10, 2010 at 1:11 PM, Tomislav Hengl
<hengl at spatial-analyst.net> wrote:
>
> (Maybe this is not really suited for the R-sig-geo, but since we often
> experience problems with loading and visualizing large data)
>
> Has anyone yet used the Revolution R Entrerprise Version of R? Apparently it
> fixes/reduces the problem of large data and has an excellent GUI.

 I'm not sure their definition of 'Wide Platform Support' corresponds to mine:

Wide Platform Support: Available for 32-bit and 64-bit Windows and Red
Hat Enterprise Linux

So no use to my Mac, and problematic on Ubuntu Linux? What about my
HPC cluster of Solaris boxes? I don't know, haven't tried. Of course,
if I had the source I could compile it myself on any platform - or at
least try to - and contribute my solutions back to the community.

Barry


From b.rowlingson at lancaster.ac.uk  Fri Sep 10 15:44:29 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 10 Sep 2010 14:44:29 +0100
Subject: [R-sig-Geo] Revolution R Enterprise - solution to handling
 large (spatial) data?
In-Reply-To: <4C8A2072.50506@spatial-analyst.net>
References: <4C8A2072.50506@spatial-analyst.net>
Message-ID: <AANLkTi=jAuBjX9rcvMrq7dg2CUspWxs7+G0UxA5EKM6Q@mail.gmail.com>

On Fri, Sep 10, 2010 at 1:11 PM, Tomislav Hengl
<hengl at spatial-analyst.net> wrote:
>
> (Maybe this is not really suited for the R-sig-geo, but since we often
> experience problems with loading and visualizing large data)
>
> Has anyone yet used the Revolution R Entrerprise Version of R? Apparently it
> fixes/reduces the problem of large data and has an excellent GUI.

 I'm not sure their definition of 'Wide Platform Support' corresponds to mine:

Wide Platform Support: Available for 32-bit and 64-bit Windows and Red
Hat Enterprise Linux

So no use to my Mac, and problematic on Ubuntu Linux? What about my
HPC cluster of Solaris boxes? I don't know, haven't tried. Of course,
if I had the source I could compile it myself on any platform - or at
least try to - and contribute my solutions back to the community.

Barry


From mspinola10 at gmail.com  Fri Sep 10 23:44:41 2010
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Fri, 10 Sep 2010 15:44:41 -0600
Subject: [R-sig-Geo] Importing geographical coordinates in R
Message-ID: <4C8AA6C9.2090104@gmail.com>

  Dear list members (I am a new member),

How do I import geographical coordinates data into R?

ref1                       ref2
N10 41 08.7     W84 10 46.3
N10 41 06.8     W84 10 46.4
N10 41 06.4     W84 10 44.6
N10 41 05.6     W84 10 46.0

Best,

Manuel

-- 
Manuel Sp?nola, Ph.D.
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.ac.cr
mspinola10 at gmail.com
Tel?fono: (506) 2277-3598
Fax: (506) 2237-7036


From Scott.Waichler at pnl.gov  Sat Sep 11 01:49:13 2010
From: Scott.Waichler at pnl.gov (Waichler, Scott R)
Date: Fri, 10 Sep 2010 16:49:13 -0700
Subject: [R-sig-Geo] center of mass for variable values in a grid
Message-ID: <A632B3F93D861843A3C966F3962C3F840108103619CB@EMAIL05.pnl.gov>

Is there an existing function to compute the coordinates for the center of mass of a variable in a 2D or 3D grid, where dx, dy, and dz are known for all cells?  The mass in each cell varies by location.

Thanks,
Scott Waichler
Pacific Northwest National Laboratory
scott.waichler at pnl.gov


From bnolan at gmail.com  Sat Sep 11 05:28:59 2010
From: bnolan at gmail.com (Ben Nolan)
Date: Sat, 11 Sep 2010 15:28:59 +1200
Subject: [R-sig-Geo] Contour maps from twitter
Message-ID: <AANLkTi=r-oKAZpsHKCtvDis6B-KDojhusShHnks6PUrW@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100911/beb32378/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Sat Sep 11 09:55:36 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 11 Sep 2010 08:55:36 +0100
Subject: [R-sig-Geo] Contour maps from twitter
In-Reply-To: <AANLkTi=r-oKAZpsHKCtvDis6B-KDojhusShHnks6PUrW@mail.gmail.com>
References: <AANLkTi=r-oKAZpsHKCtvDis6B-KDojhusShHnks6PUrW@mail.gmail.com>
Message-ID: <AANLkTin615meH2fG=pHJxBtAibu4VXVpj+nL3xCRPkUY@mail.gmail.com>

On Sat, Sep 11, 2010 at 4:28 AM, Ben Nolan <bnolan at gmail.com> wrote:
> Thought some of you might like this.
>
> http://bennolan.com/2010/09/10/contour-maps.html

 Neat. Things you might like to do include:

 1. Adding a background image, either OpenStreetMap via my "webmaps"
package, or get Ordnance Survey raster data. You may have to transform
from lat-long to OSgrid ref, but that's all in the spTransform
package.

 2. Make a web-based animation like this:

 http://www.maths.lancs.ac.uk/~rowlings/Chicas/WeeklyCJejuni/

 using my animation framework:

http://www.maths.lancs.ac.uk/~rowlings/Chicas/DIY/

 3. Check out the Spatial Task View on CRAN and get to know the
packages: sp, spTransform, rgdal, raster.

 4. Show us your code?

> I'm loving learning R. Very cool. I'd like to use it for some proper
> analysis though (epidemiology or something), instead of tweet maps. :)

 Maybe if you mapped every tweet that mentioned the word 'sneeze'
you'd get the epidemiology of the common cold - not quite as
ridiculous as it sounds:

http://www.google.org/flutrends/

Barry


From b.rowlingson at lancaster.ac.uk  Sat Sep 11 10:14:08 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 11 Sep 2010 09:14:08 +0100
Subject: [R-sig-Geo] center of mass for variable values in a grid
In-Reply-To: <A632B3F93D861843A3C966F3962C3F840108103619CB@EMAIL05.pnl.gov>
References: <ActRQsVbZJwDGgNTQsuzTH9qvIP36Q==>
	<A632B3F93D861843A3C966F3962C3F840108103619CB@EMAIL05.pnl.gov>
Message-ID: <AANLkTi=HiXkV80mqT=xW4dxH8vesyZ2y8sZ-2Fnx=qnX@mail.gmail.com>

On Sat, Sep 11, 2010 at 12:49 AM, Waichler, Scott R
<Scott.Waichler at pnl.gov> wrote:
> Is there an existing function to compute the coordinates for the center of mass of a variable in a 2D or 3D grid, where dx, dy, and dz are known for all cells? ?The mass in each cell varies by location.
>
> Thanks,
> Scott Waichler

 If your data is in a data frame of coordinates x, y, (and maybe z),
and variable W for all cells, and all your cells are the same size,
then its just the weighted average of the coordinate (assuming your
dataframe is the complete grid). So:

 xm = sum(d$x*d$W)/sum(d$W)
 ym = sum(d$y*d$W)/sum(d$W)

Or have I missed something?

Barry


From Roger.Bivand at nhh.no  Sat Sep 11 12:06:08 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 11 Sep 2010 12:06:08 +0200 (CEST)
Subject: [R-sig-Geo] Importing geographical coordinates in R
In-Reply-To: <4C8AA6C9.2090104@gmail.com>
References: <4C8AA6C9.2090104@gmail.com>
Message-ID: <alpine.LRH.2.00.1009111154300.25515@reclus.nhh.no>

On Fri, 10 Sep 2010, Manuel Sp?nola wrote:

>
> Dear list members (I am a new member),
>
> How do I import geographical coordinates data into R?
>
> ref1                       ref2
> N10 41 08.7     W84 10 46.3
> N10 41 06.8     W84 10 46.4
> N10 41 06.4     W84 10 44.6
> N10 41 05.6     W84 10 46.0

You need to convert the degree and minute signs because they need - for 
this function - to be different:

library(sp)
intext <- c("N10 41 08.7", "N10 41 06.8", "N10 41 06.4", "N10 41 05.6")
t1 <- substring(intext, 2, nchar(intext))
t2 <- sub(" ", "d", t1)
# sub() substitutes the first " " with "d"
t3 <- sub(" ", "'", t2)
# and the second with "'"
t4 <- paste(t3, "\"", substring(intext, 1, 1), sep="")
# and we append "\"" and the axis letter
char2dms(t4)
as.numeric(char2dms(t4))

For W, you'll also need to change the sign of the degree value, and set 
"E", not "W" - the same would apply to "S" if given - should be "N". The 
numeric output does not have an axis tag, in all downstream functions the 
order is (x, y), (longitude, latitude), so the axis is given implicitly.

See also ?char2dms.

Hope this helps,

Roger



>
> Best,
>
> Manuel
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From mdsumner at gmail.com  Sat Sep 11 12:23:33 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 11 Sep 2010 20:23:33 +1000
Subject: [R-sig-Geo] thesis: location estimation for animal tracking,
	trip package
Message-ID: <AANLkTinZgv26QOEsdDPStkmdU6OMUAEBnuCPRB2Vgs6Y@mail.gmail.com>

Hello,

A little embarassing to post this like this, but I'm sure there will
be some interest. If not please just ignore.

I'm about to hand in my thesis on problems with location estimation
for animal tracking. It's not completely finished, but there's a
lengthy discussion on the trip package, its underlying rationale and
some directions for more comprehensive solutions.

http://staff.acecrc.org.au/~mdsumner/thesis/mdsumner_2010-09-11thesis.pdf

I'm very keen for any feedback from interested people. Thanks for listening.

Best regards, Mike Sumner



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From mdsumner at gmail.com  Sat Sep 11 15:52:27 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 11 Sep 2010 23:52:27 +1000
Subject: [R-sig-Geo] thesis: location estimation for animal tracking,
	trip package
In-Reply-To: <AANLkTinZgv26QOEsdDPStkmdU6OMUAEBnuCPRB2Vgs6Y@mail.gmail.com>
References: <AANLkTinZgv26QOEsdDPStkmdU6OMUAEBnuCPRB2Vgs6Y@mail.gmail.com>
Message-ID: <AANLkTikvYyocoQywGmyC+s+Q6VHQa8E5xXsVVcNPhDQG@mail.gmail.com>

I'm sorry, I really didn't think this through enough. The R community
is such an important part of this work I was very keen to share as
soon as possible, but it's just too early. I've taken this down,
please contact me privately if you are interested.

Apologies.
Mike

On Sat, Sep 11, 2010 at 8:23 PM, Michael Sumner <mdsumner at gmail.com> wrote:
> Hello,
>
> A little embarassing to post this like this, but I'm sure there will
> be some interest. If not please just ignore.
>
> I'm about to hand in my thesis on problems with location estimation
> for animal tracking. It's not completely finished, but there's a
> lengthy discussion on the trip package, its underlying rationale and
> some directions for more comprehensive solutions.
>
> http://staff.acecrc.org.au/~mdsumner/thesis/mdsumner_2010-09-11thesis.pdf
>
> I'm very keen for any feedback from interested people. Thanks for listening.
>
> Best regards, Mike Sumner
>
>
>
> --
> Michael Sumner
> Institute for Marine and Antarctic Studies, University of Tasmania
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From Scott.Waichler at pnl.gov  Sat Sep 11 17:26:06 2010
From: Scott.Waichler at pnl.gov (Waichler, Scott R)
Date: Sat, 11 Sep 2010 08:26:06 -0700
Subject: [R-sig-Geo] center of mass for variable values in a grid
In-Reply-To: <AANLkTi=HiXkV80mqT=xW4dxH8vesyZ2y8sZ-2Fnx=qnX@mail.gmail.com>
References: <ActRQsVbZJwDGgNTQsuzTH9qvIP36Q==>
	<A632B3F93D861843A3C966F3962C3F840108103619CB@EMAIL05.pnl.gov>
	<AANLkTi=HiXkV80mqT=xW4dxH8vesyZ2y8sZ-2Fnx=qnX@mail.gmail.com>
Message-ID: <A632B3F93D861843A3C966F3962C3F840108114A87E9@EMAIL05.pnl.gov>

> > Is there an existing function to compute the coordinates for the center
> > of mass of a variable in a 2D or 3D grid, where dx, dy, and dz are known
> > for all cells? ?The mass in each cell varies by location.
> 
>  If your data is in a data frame of coordinates x, y, (and maybe z),
> and variable W for all cells, and all your cells are the same size,
> then its just the weighted average of the coordinate (assuming your
> dataframe is the complete grid). So:
> 
>  xm = sum(d$x*d$W)/sum(d$W)
>  ym = sum(d$y*d$W)/sum(d$W)

You're right, it's simple for a grid where dx and dy are constant.  Thanks.  But if they vary?

Scott Waichler


From haenlein at escpeurope.eu  Sun Sep 12 10:02:36 2010
From: haenlein at escpeurope.eu (Michael Haenlein)
Date: Sun, 12 Sep 2010 10:02:36 +0200
Subject: [R-sig-Geo] Spatial correlation in consumption behavior
Message-ID: <AANLkTiknVdrX2NSf=f36iFS=ZM7gcGu2JGYwn5kV7ayw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100912/26a687aa/attachment.pl>

From jim at bitwrit.com.au  Sun Sep 12 12:01:27 2010
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sun, 12 Sep 2010 20:01:27 +1000
Subject: [R-sig-Geo] center of mass for variable values in a grid
In-Reply-To: <A632B3F93D861843A3C966F3962C3F840108103619CB@EMAIL05.pnl.gov>
References: <A632B3F93D861843A3C966F3962C3F840108103619CB@EMAIL05.pnl.gov>
Message-ID: <4C8CA4F7.3080203@bitwrit.com.au>

On 09/11/2010 09:49 AM, Waichler, Scott R wrote:
> Is there an existing function to compute the coordinates for the center of mass of a variable in a 2D or 3D grid, where dx, dy, and dz are known for all cells?  The mass in each cell varies by location.
>
Hi Scott,
I don't know of one in R, but this might help.

http://www.cgal.org/Manual/3.4/doc_html/cgal_manual/Principal_component_analysis_ref/Function_barycenter.html

Jim


From mspinola10 at gmail.com  Sun Sep 12 15:05:02 2010
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Sun, 12 Sep 2010 07:05:02 -0600
Subject: [R-sig-Geo] Inverting the scale in heat.colors
Message-ID: <4C8CCFFE.4040109@gmail.com>

  Dear list members,

I am plotting the result of a kriging with spplot and I would like to 
reverse the colors in the heat.colors palette for the col.regions 
argument.  In other words I want the red colors to represent higher 
values than the yellow colors to represent temperature.
Best,

Manuel

-- 
Manuel Sp?nola, Ph.D.
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.ac.cr
mspinola10 at gmail.com
Tel?fono: (506) 2277-3598
Fax: (506) 2237-7036


From caspar.hallmann at gmail.com  Sun Sep 12 15:25:23 2010
From: caspar.hallmann at gmail.com (caspar hallmann)
Date: Sun, 12 Sep 2010 15:25:23 +0200
Subject: [R-sig-Geo] Inverting the scale in heat.colors
In-Reply-To: <4C8CCFFE.4040109@gmail.com>
References: <4C8CCFFE.4040109@gmail.com>
Message-ID: <AANLkTik7nT8LNUzqats=22Zw0sn7wPBd2p0LtqO6hrvU@mail.gmail.com>

use colorampPalette(). You can define your own colors in any order.
something as in :

plot(1:10,1,col= colorRampPalette(c("blue", "red"))(10)

hope it helps

Caspar

On Sun, Sep 12, 2010 at 3:05 PM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
> ?Dear list members,
>
> I am plotting the result of a kriging with spplot and I would like to
> reverse the colors in the heat.colors palette for the col.regions argument.
> ?In other words I want the red colors to represent higher values than the
> yellow colors to represent temperature.
> Best,
>
> Manuel
>
> --
> Manuel Sp?nola, Ph.D.
> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> Universidad Nacional
> Apartado 1350-3000
> Heredia
> COSTA RICA
> mspinola at una.ac.cr
> mspinola10 at gmail.com
> Tel?fono: (506) 2277-3598
> Fax: (506) 2237-7036
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From djmuser at gmail.com  Sun Sep 12 17:29:05 2010
From: djmuser at gmail.com (Dennis Murphy)
Date: Sun, 12 Sep 2010 08:29:05 -0700
Subject: [R-sig-Geo] Inverting the scale in heat.colors
In-Reply-To: <AANLkTik7nT8LNUzqats=22Zw0sn7wPBd2p0LtqO6hrvU@mail.gmail.com>
References: <4C8CCFFE.4040109@gmail.com>
	<AANLkTik7nT8LNUzqats=22Zw0sn7wPBd2p0LtqO6hrvU@mail.gmail.com>
Message-ID: <AANLkTikZXgPH=VmARiN2mX_vv8Ob8P5DJrcFrC_jA7=H@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100912/844b97ec/attachment.pl>

From mspinola10 at gmail.com  Sun Sep 12 18:02:00 2010
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Sun, 12 Sep 2010 10:02:00 -0600
Subject: [R-sig-Geo] Inverting the scale in heat.colors
In-Reply-To: <AANLkTik7nT8LNUzqats=22Zw0sn7wPBd2p0LtqO6hrvU@mail.gmail.com>
References: <4C8CCFFE.4040109@gmail.com>
	<AANLkTik7nT8LNUzqats=22Zw0sn7wPBd2p0LtqO6hrvU@mail.gmail.com>
Message-ID: <4C8CF978.1070707@gmail.com>

  Thank you very much Caspar.
Best,

Manuel

On 12/09/2010 07:25 a.m., caspar hallmann wrote:
> use colorampPalette(). You can define your own colors in any order.
> something as in :
>
> plot(1:10,1,col= colorRampPalette(c("blue", "red"))(10)
>
> hope it helps
>
> Caspar
>
> On Sun, Sep 12, 2010 at 3:05 PM, Manuel Sp?nola<mspinola10 at gmail.com>  wrote:
>>   Dear list members,
>>
>> I am plotting the result of a kriging with spplot and I would like to
>> reverse the colors in the heat.colors palette for the col.regions argument.
>>   In other words I want the red colors to represent higher values than the
>> yellow colors to represent temperature.
>> Best,
>>
>> Manuel
>>
>> --
>> Manuel Sp?nola, Ph.D.
>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
>> Universidad Nacional
>> Apartado 1350-3000
>> Heredia
>> COSTA RICA
>> mspinola at una.ac.cr
>> mspinola10 at gmail.com
>> Tel?fono: (506) 2277-3598
>> Fax: (506) 2237-7036
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>


-- 
Manuel Sp?nola, Ph.D.
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.ac.cr
mspinola10 at gmail.com
Tel?fono: (506) 2277-3598
Fax: (506) 2237-7036


From b.rowlingson at lancaster.ac.uk  Sun Sep 12 20:13:26 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sun, 12 Sep 2010 19:13:26 +0100
Subject: [R-sig-Geo] center of mass for variable values in a grid
In-Reply-To: <A632B3F93D861843A3C966F3962C3F840108114A87E9@EMAIL05.pnl.gov>
References: <A632B3F93D861843A3C966F3962C3F840108103619CB@EMAIL05.pnl.gov>
	<AANLkTi=HiXkV80mqT=xW4dxH8vesyZ2y8sZ-2Fnx=qnX@mail.gmail.com>
	<A632B3F93D861843A3C966F3962C3F840108114A87E9@EMAIL05.pnl.gov>
Message-ID: <AANLkTikCNUuozTCJVn9aR+_g8dMCJ0wm+74q8OZkpJ-m@mail.gmail.com>

On Sat, Sep 11, 2010 at 4:26 PM, Waichler, Scott R
<Scott.Waichler at pnl.gov> wrote:
>> > Is there an existing function to compute the coordinates for the center
>> > of mass of a variable in a 2D or 3D grid, where dx, dy, and dz are known
>> > for all cells? ?The mass in each cell varies by location.
>>
>> ?If your data is in a data frame of coordinates x, y, (and maybe z),
>> and variable W for all cells, and all your cells are the same size,
>> then its just the weighted average of the coordinate (assuming your
>> dataframe is the complete grid). So:
>>
>> ?xm = sum(d$x*d$W)/sum(d$W)
>> ?ym = sum(d$y*d$W)/sum(d$W)
>
> You're right, it's simple for a grid where dx and dy are constant. ?Thanks. ?But if they vary?

 Treat the masses as points centred at each grid cell and then find
the weighted mean of X and Y as before.

 I've just discovered there's a 'weighted.mean' function...

Barry


From martin_brandt at gmx.net  Sun Sep 12 22:29:20 2010
From: martin_brandt at gmx.net (Martin Brandt)
Date: Sun, 12 Sep 2010 22:29:20 +0200
Subject: [R-sig-Geo] mass importing rasters
Message-ID: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>

a simple question:
how can I automatically import a huge bunch of rasters (Geotiffs) to R?
With a for loop? I didn't find how to do that in the docs..
Each variable name should be the original raster name, but that's not
important.

greets,
Martin


From nikhil.list at gmail.com  Sun Sep 12 23:13:04 2010
From: nikhil.list at gmail.com (Nikhil Kaza)
Date: Sun, 12 Sep 2010 17:13:04 -0400
Subject: [R-sig-Geo] mass importing rasters
In-Reply-To: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>
References: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>
Message-ID: <6BA3548B-46E6-41C8-B02C-C635523C7500@gmail.com>

haven't tried this. but some variant of this should work

for (f in dir()){
assign(f, readGDAL(f))
}



Nikhil Kaza
Asst. Professor,
City and Regional Planning
University of North Carolina

nikhil.list at gmail.com

On Sep 12, 2010, at 4:29 PM, Martin Brandt wrote:

> a simple question:
> how can I automatically import a huge bunch of rasters (Geotiffs) to  
> R?
> With a for loop? I didn't find how to do that in the docs..
> Each variable name should be the original raster name, but that's not
> important.
>
> greets,
> Martin
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Thomas.Adams at noaa.gov  Sun Sep 12 23:22:03 2010
From: Thomas.Adams at noaa.gov (Thomas Adams)
Date: Sun, 12 Sep 2010 17:22:03 -0400
Subject: [R-sig-Geo] mass importing rasters
In-Reply-To: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>
References: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>
Message-ID: <4C8D447B.1080205@noaa.gov>

  Martin,

Depending on what you are doing, you may want to consider the use of 
GRASS GIS (http://grass.osgeo.org/) in combination with R. This has been 
a successful strategy for me in the past, not using Geotiffs, however. 
The advantage is that the Geotiffs can be imported into GRASS GIS format 
in batch form and then using r.mapcalc within GRASS, nearly any map 
algebra calculations are possible without running into memory issues 
that you may encounter with R alone.

Regards,
Tom

On 9/12/10 4:29 PM, Martin Brandt wrote:
> a simple question:
> how can I automatically import a huge bunch of rasters (Geotiffs) to R?
> With a for loop? I didn't find how to do that in the docs..
> Each variable name should be the original raster name, but that's not
> important.
>
> greets,
> Martin
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Thomas E Adams
National Weather Service
Ohio River Forecast Center
1901 South State Route 134
Wilmington, OH 45177

EMAIL:	thomas.adams at noaa.gov

VOICE:	937-383-0528
FAX:	937-383-0033


From r.hijmans at gmail.com  Sun Sep 12 23:18:14 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 12 Sep 2010 23:18:14 +0200
Subject: [R-sig-Geo] mass importing rasters
In-Reply-To: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>
References: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>
Message-ID: <AANLkTi=-mUu25y0JmkM-afc5Z232vZEwVzvjWUS4A5ha@mail.gmail.com>

You have not said what type of objects you want, but here's one option:

library(raster)
s <- stack(list.files(pattern='*.tif'))

Robert

On Sun, Sep 12, 2010 at 10:29 PM, Martin Brandt <martin_brandt at gmx.net> wrote:
> a simple question:
> how can I automatically import a huge bunch of rasters (Geotiffs) to R?
> With a for loop? I didn't find how to do that in the docs..
> Each variable name should be the original raster name, but that's not
> important.
>
> greets,
> Martin
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From nikhil.list at gmail.com  Sun Sep 12 23:19:41 2010
From: nikhil.list at gmail.com (Nikhil Kaza)
Date: Sun, 12 Sep 2010 17:19:41 -0400
Subject: [R-sig-Geo] mass importing rasters
In-Reply-To: <AANLkTi=-mUu25y0JmkM-afc5Z232vZEwVzvjWUS4A5ha@mail.gmail.com>
References: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>
	<AANLkTi=-mUu25y0JmkM-afc5Z232vZEwVzvjWUS4A5ha@mail.gmail.com>
Message-ID: <A8E28E82-FE12-4B86-B34B-21D173206013@gmail.com>

This is neat!

On Sep 12, 2010, at 5:18 PM, Robert J. Hijmans wrote:

> You have not said what type of objects you want, but here's one  
> option:
>
> library(raster)
> s <- stack(list.files(pattern='*.tif'))
>
> Robert
>
> On Sun, Sep 12, 2010 at 10:29 PM, Martin Brandt  
> <martin_brandt at gmx.net> wrote:
>> a simple question:
>> how can I automatically import a huge bunch of rasters (Geotiffs)  
>> to R?
>> With a for loop? I didn't find how to do that in the docs..
>> Each variable name should be the original raster name, but that's not
>> important.
>>
>> greets,
>> Martin
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From martin_brandt at gmx.net  Mon Sep 13 09:28:59 2010
From: martin_brandt at gmx.net (Martin Brandt)
Date: Mon, 13 Sep 2010 09:28:59 +0200
Subject: [R-sig-Geo] mass importing rasters
In-Reply-To: <AANLkTi=-mUu25y0JmkM-afc5Z232vZEwVzvjWUS4A5ha@mail.gmail.com>
References: <1284323360.1331.162.camel@ubuntu.ubuntu-domain>
	<AANLkTi=-mUu25y0JmkM-afc5Z232vZEwVzvjWUS4A5ha@mail.gmail.com>
Message-ID: <000901cb5315$5546c0f0$ffd442d0$@net>

This is a great solution, thanks everyone!



-----Urspr?ngliche Nachricht-----
Von: Robert J. Hijmans [mailto:r.hijmans at gmail.com] 
Gesendet: Sonntag, 12. September 2010 23:18
An: Martin Brandt
Cc: r-sig-geo at stat.math.ethz.ch
Betreff: Re: [R-sig-Geo] mass importing rasters

You have not said what type of objects you want, but here's one option:

library(raster)
s <- stack(list.files(pattern='*.tif'))

Robert

On Sun, Sep 12, 2010 at 10:29 PM, Martin Brandt <martin_brandt at gmx.net>
wrote:
> a simple question:
> how can I automatically import a huge bunch of rasters (Geotiffs) to R?
> With a for loop? I didn't find how to do that in the docs..
> Each variable name should be the original raster name, but that's not
> important.
>
> greets,
> Martin
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Greg.Snow at imail.org  Mon Sep 13 18:33:10 2010
From: Greg.Snow at imail.org (Greg Snow)
Date: Mon, 13 Sep 2010 10:33:10 -0600
Subject: [R-sig-Geo] Inverting the scale in heat.colors
In-Reply-To: <4C8CCFFE.4040109@gmail.com>
References: <4C8CCFFE.4040109@gmail.com>
Message-ID: <B37C0A15B8FB3C468B5BC7EBC7DA14CC633C849056@LP-EXMBVS10.CO.IHC.COM>

Others have shown how to create your own palette, which is good general information.  But for your case you may be able to simply use the rev function with heat.colors.

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
801.408.8111


> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-
> bounces at stat.math.ethz.ch] On Behalf Of Manuel Sp?nola
> Sent: Sunday, September 12, 2010 7:05 AM
> To: r-sig-geo at stat.math.ethz.ch
> Subject: [R-sig-Geo] Inverting the scale in heat.colors
> 
>   Dear list members,
> 
> I am plotting the result of a kriging with spplot and I would like to
> reverse the colors in the heat.colors palette for the col.regions
> argument.  In other words I want the red colors to represent higher
> values than the yellow colors to represent temperature.
> Best,
> 
> Manuel
> 
> --
> Manuel Sp?nola, Ph.D.
> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> Universidad Nacional
> Apartado 1350-3000
> Heredia
> COSTA RICA
> mspinola at una.ac.cr
> mspinola10 at gmail.com
> Tel?fono: (506) 2277-3598
> Fax: (506) 2237-7036
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From gianni.lavaredo at gmail.com  Mon Sep 13 21:09:40 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Mon, 13 Sep 2010 21:09:40 +0200
Subject: [R-sig-Geo] suggestion to write a function
Message-ID: <AANLkTik-Qfk_sdHS=GXyLV9AoLCwabPYHSEY-KUX0A_k@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100913/c3dd2d0a/attachment.pl>

From roman.lustrik at gmail.com  Mon Sep 13 21:14:17 2010
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Mon, 13 Sep 2010 21:14:17 +0200
Subject: [R-sig-Geo] suggestion to write a function
In-Reply-To: <AANLkTik-Qfk_sdHS=GXyLV9AoLCwabPYHSEY-KUX0A_k@mail.gmail.com>
References: <AANLkTik-Qfk_sdHS=GXyLV9AoLCwabPYHSEY-KUX0A_k@mail.gmail.com>
Message-ID: <AANLkTi=OJ42QhpWrFiSLrM4ih+j0KdB0fftxt8ggM--d@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100913/637ad0ed/attachment.pl>

From moshersteven at gmail.com  Mon Sep 13 21:21:07 2010
From: moshersteven at gmail.com (steven mosher)
Date: Mon, 13 Sep 2010 12:21:07 -0700
Subject: [R-sig-Geo] suggestion to write a function
In-Reply-To: <AANLkTik-Qfk_sdHS=GXyLV9AoLCwabPYHSEY-KUX0A_k@mail.gmail.com>
References: <AANLkTik-Qfk_sdHS=GXyLV9AoLCwabPYHSEY-KUX0A_k@mail.gmail.com>
Message-ID: <AANLkTi=76wyD2bUu=0xkWGLJ7K06-sVXGMkHLwT-5SQk@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100913/a6220332/attachment.pl>

From moshersteven at gmail.com  Mon Sep 13 21:46:40 2010
From: moshersteven at gmail.com (steven mosher)
Date: Mon, 13 Sep 2010 12:46:40 -0700
Subject: [R-sig-Geo] suggestion to write a function
In-Reply-To: <AANLkTik-Qfk_sdHS=GXyLV9AoLCwabPYHSEY-KUX0A_k@mail.gmail.com>
References: <AANLkTik-Qfk_sdHS=GXyLV9AoLCwabPYHSEY-KUX0A_k@mail.gmail.com>
Message-ID: <AANLkTikXejUjPNp2q5MRr9xuc3GM+5ShnG2z0AyfoPNB@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100913/a51282d9/attachment.pl>

From Scott.Waichler at pnl.gov  Mon Sep 13 22:00:59 2010
From: Scott.Waichler at pnl.gov (Waichler, Scott R)
Date: Mon, 13 Sep 2010 13:00:59 -0700
Subject: [R-sig-Geo] center of mass for variable values in a grid
In-Reply-To: <AANLkTikCNUuozTCJVn9aR+_g8dMCJ0wm+74q8OZkpJ-m@mail.gmail.com>
References: <A632B3F93D861843A3C966F3962C3F840108103619CB@EMAIL05.pnl.gov>
	<AANLkTi=HiXkV80mqT=xW4dxH8vesyZ2y8sZ-2Fnx=qnX@mail.gmail.com>
	<A632B3F93D861843A3C966F3962C3F840108114A87E9@EMAIL05.pnl.gov>
	<AANLkTikCNUuozTCJVn9aR+_g8dMCJ0wm+74q8OZkpJ-m@mail.gmail.com>
Message-ID: <A632B3F93D861843A3C966F3962C3F840108114A88A2@EMAIL05.pnl.gov>

> >> ?If your data is in a data frame of coordinates x, y, (and maybe z),
> >> and variable W for all cells, and all your cells are the same size,
> >> then its just the weighted average of the coordinate (assuming your
> >> dataframe is the complete grid). So:
> >>
> >> ?xm = sum(d$x*d$W)/sum(d$W)
> >> ?ym = sum(d$y*d$W)/sum(d$W)
> >
> > You're right, it's simple for a grid where dx and dy are constant.
> ?Thanks. ?But if they vary?
> 
>  Treat the masses as points centred at each grid cell and then find
> the weighted mean of X and Y as before.

Sorry, I was wrong in thinking that a regular grid is needed.  The simple weighting scheme above will work for any set of points, as long as the weight represented at each point is centered there.

Scott Waichler


From horning at amnh.org  Mon Sep 13 22:16:14 2010
From: horning at amnh.org (Ned Horning)
Date: Mon, 13 Sep 2010 16:16:14 -0400
Subject: [R-sig-Geo] Apply a look-up table using Raster package
Message-ID: <4C8E868E.5060708@amnh.org>

Hi - Is it possible to modify a Raster layer using a look-up table? I 
have a data.frame object with data to map pixel values in a Raster layer 
from one value to another but I'm not sure how to apply it. I tried to 
be creative with setValues but didn't get too far.

All the best,

Ned


From jacobvanetten at yahoo.com  Mon Sep 13 22:30:42 2010
From: jacobvanetten at yahoo.com (Jacob van Etten)
Date: Mon, 13 Sep 2010 20:30:42 +0000 (GMT)
Subject: [R-sig-Geo] Apply a look-up table using Raster package
In-Reply-To: <4C8E868E.5060708@amnh.org>
Message-ID: <31057.2030.qm@web29714.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100913/9a73e030/attachment.pl>

From cchizinski2 at unlnotes.unl.edu  Mon Sep 13 22:45:09 2010
From: cchizinski2 at unlnotes.unl.edu (Christopher J Chizinski)
Date: Mon, 13 Sep 2010 15:45:09 -0500
Subject: [R-sig-Geo] using mcp.area with UTM coordinates from different zones
Message-ID: <OF70AB839B.8B73ABA6-ON8625779D.0071D326-8625779D.0071FFAC@unl.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100913/73989298/attachment.pl>

From mspinola10 at gmail.com  Tue Sep 14 13:17:36 2010
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Tue, 14 Sep 2010 05:17:36 -0600
Subject: [R-sig-Geo] Inverting the scale in heat.colors
In-Reply-To: <B37C0A15B8FB3C468B5BC7EBC7DA14CC633C849056@LP-EXMBVS10.CO.IHC.COM>
References: <4C8CCFFE.4040109@gmail.com>
	<B37C0A15B8FB3C468B5BC7EBC7DA14CC633C849056@LP-EXMBVS10.CO.IHC.COM>
Message-ID: <4C8F59D0.7030802@gmail.com>

  Thank you very much Greg.
Best,

Manuel

On 13/09/2010 10:33 a.m., Greg Snow wrote:
> Others have shown how to create your own palette, which is good general information.  But for your case you may be able to simply use the rev function with heat.colors.
>


-- 
Manuel Sp?nola, Ph.D.
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.ac.cr
mspinola10 at gmail.com
Tel?fono: (506) 2277-3598
Fax: (506) 2237-7036


From hhamidghorbani at gmail.com  Tue Sep 14 19:21:30 2010
From: hhamidghorbani at gmail.com (Hamid Ghorbani)
Date: Tue, 14 Sep 2010 21:51:30 +0430
Subject: [R-sig-Geo] calculating the maximum absolute difference between the
 empirical and theoritical Ripley's K-function
Message-ID: <AANLkTi=45UmKK+7gA6ZZYq8gf=J=RLojbMsrf6otQpXd@mail.gmail.com>

Dear researchers,
In spatstat and for calculating the maximum absolute difference
between the empirical Ripley's K-function (\hat(K), isotropic edge
correction) and the theoretical K-function for a simulated Poisson
process in a fixed window (suppose 3D case and fix number of points
(n) in W), we usually use a sequence of regular grid points. On the
other hand we know that the empirical K function is a step function
and hence the max occurs only at a jump point. suppose x is a typical
jump point (x is one of considered grid points), we have actually two
differences at x because we should also consider the difference
between \hat{K}(x-) and K(x-), where x- is the value just
infinitesimally smaller than x. The problem is if we calculate the
absolute difference only at the regular jump points like x, we shall
underestimate the true unknown maximum absolute difference between
\hat(K) and the theoretical K. How we can deal with this problem.
Shall taking very fine grids points would solve the problem? If yes
some word of  theoretical reasoning please in direction of
programming.

Many thanks in advance
Yours,
Hamid


From evion12000 at gmail.com  Wed Sep 15 12:49:03 2010
From: evion12000 at gmail.com (=?iso-8859-1?Q?David_M=E9ndez?=)
Date: Wed, 15 Sep 2010 06:19:03 -0430
Subject: [R-sig-Geo] R-sig-Geo Digest, Vol 85, Issue 15
Message-ID: <4c90a492.5250dc0a.3452.3480@mx.google.com>



Enviado desde mi HTC

----- Mensaje original -----
De: r-sig-geo-request at stat.math.ethz.ch
Enviado: Mi?rcoles, 15 de Septiembre de 2010 05:30 a.m.
Para: r-sig-geo at stat.math.ethz.ch
Asunto: R-sig-Geo Digest, Vol 85, Issue 15

Send R-sig-Geo mailing list submissions to
	r-sig-geo at stat.math.ethz.ch

To subscribe or unsubscribe via the World Wide Web, visit
	https://stat.ethz.ch/mailman/listinfo/r-sig-geo
or, via email, send a message with subject or body 'help' to
	r-sig-geo-request at stat.math.ethz.ch

You can reach the person managing the list at
	r-sig-geo-owner at stat.math.ethz.ch

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-sig-Geo digest..."


Today's Topics:

   1. Re: Inverting the scale in heat.colors (Manuel Sp?nola)
   2. calculating the maximum absolute difference between the
      empirical and theoritical Ripley's K-function (Hamid Ghorbani)


----------------------------------------------------------------------

Message: 1
Date: Tue, 14 Sep 2010 05:17:36 -0600
From: Manuel Sp?nola <mspinola10 at gmail.com>
To: Greg Snow <Greg.Snow at imail.org>
Cc: "r-sig-geo at stat.math.ethz.ch" <r-sig-geo at stat.math.ethz.ch>
Subject: Re: [R-sig-Geo] Inverting the scale in heat.colors
Message-ID: <4C8F59D0.7030802 at gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

  Thank you very much Greg.
Best,

Manuel

On 13/09/2010 10:33 a.m., Greg Snow wrote:
> Others have shown how to create your own palette, which is good general information.  But for your case you may be able to simply use the rev function with heat.colors.
>


-- 
Manuel Sp?nola, Ph.D.
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.ac.cr
mspinola10 at gmail.com
Tel?fono: (506) 2277-3598
Fax: (506) 2237-7036



------------------------------

Message: 2
Date: Tue, 14 Sep 2010 21:51:30 +0430
From: Hamid Ghorbani <hhamidghorbani at gmail.com>
To: r-sig-geo at stat.math.ethz.ch
Subject: [R-sig-Geo] calculating the maximum absolute difference
	between the empirical and theoritical Ripley's K-function
Message-ID:
	<AANLkTi=45UmKK+7gA6ZZYq8gf=J=RLojbMsrf6otQpXd at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Dear researchers,
In spatstat and for calculating the maximum absolute difference
between the empirical Ripley's K-function (\hat(K), isotropic edge
correction) and the theoretical K-function for a simulated Poisson
process in a fixed window (suppose 3D case and fix number of points
(n) in W), we usually use a sequence of regular grid points. On the
other hand we know that the empirical K function is a step function
and hence the max occurs only at a jump point. suppose x is a typical
jump point (x is one of considered grid points), we have actually two
differences at x because we should also consider the difference
between \hat{K}(x-) and K(x-), where x- is the value just
infinitesimally smaller than x. The problem is if we calculate the
absolute difference only at the regular jump points like x, we shall
underestimate the true unknown maximum absolute difference between
\hat(K) and the theoretical K. How we can deal with this problem.
Shall taking very fine grids points would solve the problem? If yes
some word of  theoretical reasoning please in direction of
programming.

Many thanks in advance
Yours,
Hamid



------------------------------

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


End of R-sig-Geo Digest, Vol 85, Issue 15


From gianni.lavaredo at gmail.com  Wed Sep 15 17:29:17 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Wed, 15 Sep 2010 17:29:17 +0200
Subject: [R-sig-Geo] create an Hexagonal grid
Message-ID: <AANLkTimXZPfcEgOwpqKViiEd9J2LY9mRo=XBvZZ9he_E@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100915/babd77f2/attachment.pl>

From Greg.Snow at imail.org  Wed Sep 15 18:23:43 2010
From: Greg.Snow at imail.org (Greg Snow)
Date: Wed, 15 Sep 2010 10:23:43 -0600
Subject: [R-sig-Geo] create an Hexagonal grid
In-Reply-To: <AANLkTimXZPfcEgOwpqKViiEd9J2LY9mRo=XBvZZ9he_E@mail.gmail.com>
References: <AANLkTimXZPfcEgOwpqKViiEd9J2LY9mRo=XBvZZ9he_E@mail.gmail.com>
Message-ID: <B37C0A15B8FB3C468B5BC7EBC7DA14CC633C8498F0@LP-EXMBVS10.CO.IHC.COM>

There is the hexbin package available through Bioconductor.  It uses grid graphics I believe.

If you want a base graphics solution, or just more hands on control (and using only CRAN packages), then check out the last example on the help page for the my.symbols function in the TeachingDemos package.

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
801.408.8111


> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch [mailto:r-sig-geo-
> bounces at stat.math.ethz.ch] On Behalf Of gianni lavaredo
> Sent: Wednesday, September 15, 2010 9:29 AM
> To: r-sig-geo at stat.math.ethz.ch
> Subject: [R-sig-Geo] create an Hexagonal grid
> 
> Dear reseacher,
> 
> is there a way to create an Hexagonal grid with R?
> 
> thanks
> Gianni
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger.Bivand at nhh.no  Wed Sep 15 18:45:36 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 15 Sep 2010 18:45:36 +0200 (CEST)
Subject: [R-sig-Geo] create an Hexagonal grid
In-Reply-To: <B37C0A15B8FB3C468B5BC7EBC7DA14CC633C8498F0@LP-EXMBVS10.CO.IHC.COM>
References: <AANLkTimXZPfcEgOwpqKViiEd9J2LY9mRo=XBvZZ9he_E@mail.gmail.com>
	<B37C0A15B8FB3C468B5BC7EBC7DA14CC633C8498F0@LP-EXMBVS10.CO.IHC.COM>
Message-ID: <alpine.LRH.2.00.1009151842320.18223@reclus.nhh.no>

On Wed, 15 Sep 2010, Greg Snow wrote:

> There is the hexbin package available through Bioconductor.  It uses 
> grid graphics I believe.
>
> If you want a base graphics solution, or just more hands on control (and 
> using only CRAN packages), then check out the last example on the help 
> page for the my.symbols function in the TeachingDemos package.
>

For sp objects, see the "hexagonal" type in spsample(), the low-level 
sp:::genHexGrid(), and HexPoints2SpatialPolygons():

hpts <- sp:::genHexGrid(dx=0.1, ll=c(0, 0), ur=c(1, 1))
pols <- HexPoints2SpatialPolygons(SpatialPoints(hpts))
plot(pols)

Hope this helps,

Roger

>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From breitbach at uni-mainz.de  Wed Sep 15 18:45:04 2010
From: breitbach at uni-mainz.de (Breitbach, Nils)
Date: Wed, 15 Sep 2010 16:45:04 +0000
Subject: [R-sig-Geo] create an Hexagonal grid
In-Reply-To: <AANLkTimXZPfcEgOwpqKViiEd9J2LY9mRo=XBvZZ9he_E@mail.gmail.com>
References: <AANLkTimXZPfcEgOwpqKViiEd9J2LY9mRo=XBvZZ9he_E@mail.gmail.com>
Message-ID: <E7F1EF063B11DA4DAD16374549B879E82ADD97EB@e14mdb-02.zdv.Uni-Mainz.DE>

Dear Gianni,

a good reference is the book "Applied Spatia lData Analysis with R", where there is an example in the Chapter "6.4 Hexagonal Grids" on page 137. Try this example using the test data set "meuse":

> library(sp)
> data(meuse.grid)
> HexPts <- spsample(meuse.grid, type = "hexagonal", cellsize = 200)
> spplot(meuse.grid["dist"], sp.layout = list("sp.points", HexPts, col = 1))
> HexPols <- HexPoints2SpatialPolygons(HexPts)
> df <- as.data.frame(meuse.grid)[overlay(meuse.grid, HexPts), ]
> HexPolsDf<-SpatialPolygonsDataFrame(HexPols, df, match.ID = FALSE)
> spplot(HexPolsDf["dist"])

More details in the above mentioned (very helpful) book. According to the book, there are no classes for hexagonal grids but some useful funtions to generate and plot them.

Good luck!

Nils



________________________________________
Von: r-sig-geo-bounces at stat.math.ethz.ch [r-sig-geo-bounces at stat.math.ethz.ch]&quot; im Auftrag von &quot;gianni lavaredo [gianni.lavaredo at gmail.com]
Gesendet: Mittwoch, 15. September 2010 17:29
Bis: r-sig-geo at stat.math.ethz.ch
Betreff: [R-sig-Geo] create an Hexagonal grid

Dear reseacher,

is there a way to create an Hexagonal grid with R?

thanks
Gianni

        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From ricardorodot02 at gmail.com  Wed Sep 15 21:37:28 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Wed, 15 Sep 2010 14:37:28 -0500
Subject: [R-sig-Geo] calculate the shortest path
Message-ID: <AANLkTikgooOChsdVe=3ctyPJED6rsHTayWa96rrc1qmE@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100915/a854811b/attachment.pl>

From ricardorodot02 at gmail.com  Wed Sep 15 22:33:57 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Wed, 15 Sep 2010 15:33:57 -0500
Subject: [R-sig-Geo] Euclidean distance to a point cloud
Message-ID: <AANLkTimpvZcBN5x5wgX3wHMqKB_rBLZ9O-6VVRoeohUA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100915/fadab3be/attachment.pl>

From ricardorodot02 at gmail.com  Wed Sep 15 22:39:32 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Wed, 15 Sep 2010 15:39:32 -0500
Subject: [R-sig-Geo] operations between conditional attributes
Message-ID: <AANLkTinT23FEZ977mJqmct0wwcus8Xp+LifDabPzNp+-@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100915/e921f45f/attachment.pl>

From stegen at email.unc.edu  Wed Sep 15 22:47:39 2010
From: stegen at email.unc.edu (James Stegen)
Date: Wed, 15 Sep 2010 16:47:39 -0400
Subject: [R-sig-Geo] spatial projections
Message-ID: <4C9130EB.7060405@email.unc.edu>

Hello,

I have lat-long coordinates for a bunch of localities spread across 
multiple hemispheres, which also extend into high latitudes.
What I would like to do is re-project the lat long coordinates into a 
projection that gives me spatial positions in km from some arbitrary point.
The key is that I would like the distances among communities to be 
maintained. Specifically, if I calculate a distance matrix using lat 
longs in the
great circle equation, I would like a distance matrix calculated from 
the reprojected positions to give the same distances.
I haven't found a projection that can do this. Using the orthographic 
projection, for example, leads to larger distances among sites that 
occur at high latitudes,
relative to the distances provided by the great circle equation. I also 
need to know actual spatial positions in both axes, not just overall 
distance, relative to
an arbitrary point on earth.

Many Thanks,
James Stegen

-- 
James C. Stegen
NSF Postdoctoral Fellow in Bioinformatics
University of North Carolina
Chapel Hill, NC
919-962-8795
stegen at email.unc.edu


From r.turner at auckland.ac.nz  Wed Sep 15 23:05:51 2010
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 16 Sep 2010 09:05:51 +1200
Subject: [R-sig-Geo] Euclidean distance to a point cloud
In-Reply-To: <AANLkTimpvZcBN5x5wgX3wHMqKB_rBLZ9O-6VVRoeohUA@mail.gmail.com>
References: <AANLkTimpvZcBN5x5wgX3wHMqKB_rBLZ9O-6VVRoeohUA@mail.gmail.com>
Message-ID: <1B578FCE-255B-48D8-91E9-619FE5BEEB25@auckland.ac.nz>


On 16/09/2010, at 8:33 AM, Ricardo Rodr?guez wrote:

> hello all, I have a question as I can calculate the Euclidean distance of a
> point cloud, so that is calculated from one point to everyone else and so on
> to complete the entire cloud, there will be additional way to save these
> operations so that a column in the attributes are all distances from one
> point to the other and in this way to create columns with these results.
> 
> thanks for your attention and help


There are various functions (nndist(), nncross(), pairdist(), ...) in
the spatstat package which may do what you want.

	cheers,

		Rolf Turner
######################################################################
Attention: 
This e-mail message is privileged and confidential. If you are not the 
intended recipient please delete the message and notify the sender. 
Any views or opinions presented are solely those of the author.

This e-mail has been scanned and cleared by MailMarshal 
www.marshalsoftware.com
######################################################################


From a.lam at geo.uu.nl  Thu Sep 16 11:35:00 2010
From: a.lam at geo.uu.nl (Arien Lam)
Date: Thu, 16 Sep 2010 11:35:00 +0200
Subject: [R-sig-Geo] spatial projections
In-Reply-To: <4C9130EB.7060405@email.unc.edu>
References: <4C9130EB.7060405@email.unc.edu>
Message-ID: <4C91E4C4.20908@geo.uu.nl>

Hello,


On 15-09-10 22:47, James Stegen wrote:
> Hello,
>
> I have lat-long coordinates for a bunch of localities spread across
> multiple hemispheres, which also extend into high latitudes.
That's two hemispheres max, right?

> What I would like to do is re-project the lat long coordinates into a
> projection that gives me spatial positions in km from some arbitrary point.
> The key is that I would like the distances among communities to be
> maintained.Specifically, if I calculate a distance matrix using lat
> longs in the
> great circle equation, I would like a distance matrix calculated from
> the reprojected positions to give the same distances.

That sets the requirements of the projection to equidistant, conformal 
and equal-area. If you read up on projections, even if it is on 
wikipedia, you will soon see that it can't be done. To be precise, it is 
possible in cases with less than three communities.

> I haven't found a projection that can do this. Using the orthographic
> projection, for example, leads to larger distances among sites that
> occur at high latitudes,
> relative to the distances provided by the great circle equation. I also
> need to know actual spatial positions in both axes, not just overall
> distance, relative to
> an arbitrary point on earth.

Hth, Arien

>
> Many Thanks,
> James Stegen
>


-- 
Arien Lam


From arnald.marcer at uab.cat  Thu Sep 16 12:58:14 2010
From: arnald.marcer at uab.cat (Arnald Marcer)
Date: Thu, 16 Sep 2010 12:58:14 +0200
Subject: [R-sig-Geo] how to filter a shapefile ?
Message-ID: <4C91F846.7060407@uab.cat>

Hi,

Can anyone give me a hint on how to extract/filter/subset
polygons from a shapefile based on an attribute of its dbf
table ?

Example:

shapefile: world.shp
attributes of its dbf table: ID, AREA, COUNTRY, ...

How can I plot a shapefile with only countries above a certain AREA value ?

Thank you very much,

Arnald Marcer
CREAF


From mayeul.kauffmann at jrc.ec.europa.eu  Thu Sep 16 13:59:43 2010
From: mayeul.kauffmann at jrc.ec.europa.eu (Mayeul KAUFFMANN)
Date: Thu, 16 Sep 2010 13:59:43 +0200
Subject: [R-sig-Geo] how to filter a shapefile ?
In-Reply-To: <4C91F846.7060407@uab.cat>
References: <4C91F846.7060407@uab.cat>
Message-ID: <007901cb5596$a647cd90$f2d768b0$@kauffmann@jrc.ec.europa.eu>

You can read your shapefile with:
library(rgdal)
countries_spdf <- readOGR(dsn=root_path, "countries_file_without_extension")
#You'll have a spatial point data frame with marks. Look at str(countries_spdf).
Try:
plot(countries_spdf[countries_spdf at data$AREA>1000])
Mayeul
_____________________________________________________
Dr. Mayeul KAUFFMANN, Conflict Specialist
European Commission, Joint Research Centre (JRC)
Institute for the Protection and Security of the Citizen (IPSC)
Global Security and Crisis Management - ISFEREA
Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
Phone: (+39) 033278 5071
http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx

(Office: building 48c, 1st floor, room 123. TP: 483)

_____________________________________________________
Dr. Mayeul KAUFFMANN, Conflict Specialist
European Commission, Joint Research Centre (JRC)
Institute for the Protection and Security of the Citizen (IPSC)
Global Security and Crisis Management - ISFEREA
Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
Phone: (+39) 033278 5071
http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx

(Office: building 48c, 1st floor, room 123. TP: 483)


-----Original Message-----
From: r-sig-geo-bounces at stat.math.ethz.ch
[mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Arnald Marcer
Sent: Thursday, September 16, 2010 12:58 PM
To: r-sig-geo
Subject: [R-sig-Geo] how to filter a shapefile ?

Hi,

Can anyone give me a hint on how to extract/filter/subset
polygons from a shapefile based on an attribute of its dbf
table ?

Example:

shapefile: world.shp
attributes of its dbf table: ID, AREA, COUNTRY, ...

How can I plot a shapefile with only countries above a certain AREA value ?

Thank you very much,

Arnald Marcer
CREAF

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From arnald.marcer at uab.cat  Thu Sep 16 14:06:38 2010
From: arnald.marcer at uab.cat (Arnald Marcer)
Date: Thu, 16 Sep 2010 14:06:38 +0200
Subject: [R-sig-Geo] how to filter a shapefile ?
In-Reply-To: <007901cb5596$a647cd90$f2d768b0$%kauffmann@jrc.ec.europa.eu>
References: <4C91F846.7060407@uab.cat>
	<007901cb5596$a647cd90$f2d768b0$%kauffmann@jrc.ec.europa.eu>
Message-ID: <4C92084E.9070302@uab.cat>

Thank you Mayeul. Solved.

Arnald

On 09/16/2010 01:59 PM, Mayeul KAUFFMANN wrote:
> You can read your shapefile with:
> library(rgdal)
> countries_spdf<- readOGR(dsn=root_path, "countries_file_without_extension")
> #You'll have a spatial point data frame with marks. Look at str(countries_spdf).
> Try:
> plot(countries_spdf[countries_spdf at data$AREA>1000])
> Mayeul
> _____________________________________________________
> Dr. Mayeul KAUFFMANN, Conflict Specialist
> European Commission, Joint Research Centre (JRC)
> Institute for the Protection and Security of the Citizen (IPSC)
> Global Security and Crisis Management - ISFEREA
> Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
> Phone: (+39) 033278 5071
> http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx
>
> (Office: building 48c, 1st floor, room 123. TP: 483)
>
> _____________________________________________________
> Dr. Mayeul KAUFFMANN, Conflict Specialist
> European Commission, Joint Research Centre (JRC)
> Institute for the Protection and Security of the Citizen (IPSC)
> Global Security and Crisis Management - ISFEREA
> Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
> Phone: (+39) 033278 5071
> http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx
>
> (Office: building 48c, 1st floor, room 123. TP: 483)
>
>
> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch
> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Arnald Marcer
> Sent: Thursday, September 16, 2010 12:58 PM
> To: r-sig-geo
> Subject: [R-sig-Geo] how to filter a shapefile ?
>
> Hi,
>
> Can anyone give me a hint on how to extract/filter/subset
> polygons from a shapefile based on an attribute of its dbf
> table ?
>
> Example:
>
> shapefile: world.shp
> attributes of its dbf table: ID, AREA, COUNTRY, ...
>
> How can I plot a shapefile with only countries above a certain AREA value ?
>
> Thank you very much,
>
> Arnald Marcer
> CREAF
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>    


-- 
-----------------------------------------------------------------
Arnald Marcer
Investigador

Centre de Recerca Ecol?gica i Aplicacions Forestals (CREAF)
Universitat Aut?noma de Barcelona
08193 Barcelona

Tel: 93 5811312
Fax: 93 5814151
-----------------------------------------------------------------
Arnald Marcer
Researcher

Centre for Ecological Research and Forestry Applications (CREAF)
Autonomous University of Barcelona
08193 Barcelona

Phone: +34 93 5811312
Fax:   +34 93 5814151


From Roger.Bivand at nhh.no  Thu Sep 16 14:10:55 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 16 Sep 2010 14:10:55 +0200 (CEST)
Subject: [R-sig-Geo] how to filter a shapefile ?
In-Reply-To: <007901cb5596$a647cd90$f2d768b0$@kauffmann@jrc.ec.europa.eu>
References: <4C91F846.7060407@uab.cat>
	<007901cb5596$a647cd90$f2d768b0$@kauffmann@jrc.ec.europa.eu>
Message-ID: <alpine.LRH.2.00.1009161405350.25248@reclus.nhh.no>

On Thu, 16 Sep 2010, Mayeul KAUFFMANN wrote:

> You can read your shapefile with:
> library(rgdal)
> countries_spdf <- readOGR(dsn=root_path, "countries_file_without_extension")
> #You'll have a spatial point data frame with marks. Look at str(countries_spdf).
> Try:
> plot(countries_spdf[countries_spdf at data$AREA>1000])

Correct, subset with the "[" method as with data.frame objects. But avoid 
using the data slot directly, use the "$" method as with data.frame 
objects:

plot(countries_spdf[countries_spdf$AREA>1000,])

and insert a comma in the "[" method to choose the rows matching the 
condition:

library(rgdal)
dsn <- system.file("vectors", package = "rgdal")[1]
scot_BNG <- readOGR(dsn=dsn, layer="scot_BNG")
plot(scot_BNG, border="grey")
plot(scot_BNG[scot_BNG$SMR > 100,], border="black", lwd=2, add=TRUE)

Hope this helps,

Roger


> Mayeul
> _____________________________________________________
> Dr. Mayeul KAUFFMANN, Conflict Specialist
> European Commission, Joint Research Centre (JRC)
> Institute for the Protection and Security of the Citizen (IPSC)
> Global Security and Crisis Management - ISFEREA
> Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
> Phone: (+39) 033278 5071
> http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx
>
> (Office: building 48c, 1st floor, room 123. TP: 483)
>
> _____________________________________________________
> Dr. Mayeul KAUFFMANN, Conflict Specialist
> European Commission, Joint Research Centre (JRC)
> Institute for the Protection and Security of the Citizen (IPSC)
> Global Security and Crisis Management - ISFEREA
> Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
> Phone: (+39) 033278 5071
> http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx
>
> (Office: building 48c, 1st floor, room 123. TP: 483)
>
>
> -----Original Message-----
> From: r-sig-geo-bounces at stat.math.ethz.ch
> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Arnald Marcer
> Sent: Thursday, September 16, 2010 12:58 PM
> To: r-sig-geo
> Subject: [R-sig-Geo] how to filter a shapefile ?
>
> Hi,
>
> Can anyone give me a hint on how to extract/filter/subset
> polygons from a shapefile based on an attribute of its dbf
> table ?
>
> Example:
>
> shapefile: world.shp
> attributes of its dbf table: ID, AREA, COUNTRY, ...
>
> How can I plot a shapefile with only countries above a certain AREA value ?
>
> Thank you very much,
>
> Arnald Marcer
> CREAF
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From arnald.marcer at uab.cat  Thu Sep 16 14:20:08 2010
From: arnald.marcer at uab.cat (Arnald Marcer)
Date: Thu, 16 Sep 2010 14:20:08 +0200
Subject: [R-sig-Geo] how to filter a shapefile ?
In-Reply-To: <alpine.LRH.2.00.1009161405350.25248@reclus.nhh.no>
References: <4C91F846.7060407@uab.cat>
	<alpine.LRH.2.00.1009161405350.25248@reclus.nhh.no>
Message-ID: <4C920B78.1000401@uab.cat>

Thank you very much Roger.

Still another question: Can you plot a polygon shapefile with borders 
but transparent interiors ?

Arnald Marcer
CREAF

On 09/16/2010 02:10 PM, Roger Bivand wrote:
> On Thu, 16 Sep 2010, Mayeul KAUFFMANN wrote:
>
>> You can read your shapefile with:
>> library(rgdal)
>> countries_spdf <- readOGR(dsn=root_path, 
>> "countries_file_without_extension")
>> #You'll have a spatial point data frame with marks. Look at 
>> str(countries_spdf).
>> Try:
>> plot(countries_spdf[countries_spdf at data$AREA>1000])
>
> Correct, subset with the "[" method as with data.frame objects. But 
> avoid using the data slot directly, use the "$" method as with 
> data.frame objects:
>
> plot(countries_spdf[countries_spdf$AREA>1000,])
>
> and insert a comma in the "[" method to choose the rows matching the 
> condition:
>
> library(rgdal)
> dsn <- system.file("vectors", package = "rgdal")[1]
> scot_BNG <- readOGR(dsn=dsn, layer="scot_BNG")
> plot(scot_BNG, border="grey")
> plot(scot_BNG[scot_BNG$SMR > 100,], border="black", lwd=2, add=TRUE)
>
> Hope this helps,
>
> Roger
>
>
>> Mayeul
>> _____________________________________________________
>> Dr. Mayeul KAUFFMANN, Conflict Specialist
>> European Commission, Joint Research Centre (JRC)
>> Institute for the Protection and Security of the Citizen (IPSC)
>> Global Security and Crisis Management - ISFEREA
>> Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
>> Phone: (+39) 033278 5071
>> http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx
>>
>> (Office: building 48c, 1st floor, room 123. TP: 483)
>>
>> _____________________________________________________
>> Dr. Mayeul KAUFFMANN, Conflict Specialist
>> European Commission, Joint Research Centre (JRC)
>> Institute for the Protection and Security of the Citizen (IPSC)
>> Global Security and Crisis Management - ISFEREA
>> Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
>> Phone: (+39) 033278 5071
>> http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx
>>
>> (Office: building 48c, 1st floor, room 123. TP: 483)
>>
>>
>> -----Original Message-----
>> From: r-sig-geo-bounces at stat.math.ethz.ch
>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Arnald Marcer
>> Sent: Thursday, September 16, 2010 12:58 PM
>> To: r-sig-geo
>> Subject: [R-sig-Geo] how to filter a shapefile ?
>>
>> Hi,
>>
>> Can anyone give me a hint on how to extract/filter/subset
>> polygons from a shapefile based on an attribute of its dbf
>> table ?
>>
>> Example:
>>
>> shapefile: world.shp
>> attributes of its dbf table: ID, AREA, COUNTRY, ...
>>
>> How can I plot a shapefile with only countries above a certain AREA 
>> value ?
>>
>> Thank you very much,
>>
>> Arnald Marcer
>> CREAF
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


-- 
-----------------------------------------------------------------
Arnald Marcer
Investigador

Centre de Recerca Ecol?gica i Aplicacions Forestals (CREAF)
Universitat Aut?noma de Barcelona
08193 Barcelona

Tel: 93 5811312
Fax: 93 5814151
-----------------------------------------------------------------
Arnald Marcer
Researcher

Centre for Ecological Research and Forestry Applications (CREAF)
Autonomous University of Barcelona
08193 Barcelona

Phone: +34 93 5811312
Fax:   +34 93 5814151


From Roger.Bivand at nhh.no  Thu Sep 16 14:44:47 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 16 Sep 2010 14:44:47 +0200 (CEST)
Subject: [R-sig-Geo] how to filter a shapefile ?
In-Reply-To: <4C920B78.1000401@uab.cat>
References: <4C91F846.7060407@uab.cat>
	<alpine.LRH.2.00.1009161405350.25248@reclus.nhh.no>
	<4C920B78.1000401@uab.cat>
Message-ID: <alpine.LRH.2.00.1009161442290.25248@reclus.nhh.no>

On Thu, 16 Sep 2010, Arnald Marcer wrote:

> Thank you very much Roger.
>
> Still another question: Can you plot a polygon shapefile with borders but 
> transparent interiors ?

This is what happens anyway (maybe not on all graphics devices?):

library(rgdal)
dsn <- system.file("vectors", package = "rgdal")[1]
scot_BNG <- readOGR(dsn=dsn, layer="scot_BNG")
pts <- SpatialPoints(coordinates(scot_BNG),
   proj4string=CRS(proj4string(scot_BNG)))
plot(pts)
plot(scot_BNG, border="grey", add=TRUE)
dev.cur()
# shows the device type

and the points are not over-painted (X11cairo device).

Roger

>
> Arnald Marcer
> CREAF
>
> On 09/16/2010 02:10 PM, Roger Bivand wrote:
>> On Thu, 16 Sep 2010, Mayeul KAUFFMANN wrote:
>> 
>>> You can read your shapefile with:
>>> library(rgdal)
>>> countries_spdf <- readOGR(dsn=root_path, 
>>> "countries_file_without_extension")
>>> #You'll have a spatial point data frame with marks. Look at 
>>> str(countries_spdf).
>>> Try:
>>> plot(countries_spdf[countries_spdf at data$AREA>1000])
>> 
>> Correct, subset with the "[" method as with data.frame objects. But avoid 
>> using the data slot directly, use the "$" method as with data.frame 
>> objects:
>> 
>> plot(countries_spdf[countries_spdf$AREA>1000,])
>> 
>> and insert a comma in the "[" method to choose the rows matching the 
>> condition:
>> 
>> library(rgdal)
>> dsn <- system.file("vectors", package = "rgdal")[1]
>> scot_BNG <- readOGR(dsn=dsn, layer="scot_BNG")
>> plot(scot_BNG, border="grey")
>> plot(scot_BNG[scot_BNG$SMR > 100,], border="black", lwd=2, add=TRUE)
>> 
>> Hope this helps,
>> 
>> Roger
>> 
>> 
>>> Mayeul
>>> _____________________________________________________
>>> Dr. Mayeul KAUFFMANN, Conflict Specialist
>>> European Commission, Joint Research Centre (JRC)
>>> Institute for the Protection and Security of the Citizen (IPSC)
>>> Global Security and Crisis Management - ISFEREA
>>> Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
>>> Phone: (+39) 033278 5071
>>> http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx
>>> 
>>> (Office: building 48c, 1st floor, room 123. TP: 483)
>>> 
>>> _____________________________________________________
>>> Dr. Mayeul KAUFFMANN, Conflict Specialist
>>> European Commission, Joint Research Centre (JRC)
>>> Institute for the Protection and Security of the Citizen (IPSC)
>>> Global Security and Crisis Management - ISFEREA
>>> Via E. Fermi 2749 - I-21027 Ispra (VA), ITALY
>>> Phone: (+39) 033278 5071
>>> http://isferea.jrc.ec.europa.eu/Staff/Pages/Kauffmann-Mayeul.aspx
>>> 
>>> (Office: building 48c, 1st floor, room 123. TP: 483)
>>> 
>>> 
>>> -----Original Message-----
>>> From: r-sig-geo-bounces at stat.math.ethz.ch
>>> [mailto:r-sig-geo-bounces at stat.math.ethz.ch] On Behalf Of Arnald Marcer
>>> Sent: Thursday, September 16, 2010 12:58 PM
>>> To: r-sig-geo
>>> Subject: [R-sig-Geo] how to filter a shapefile ?
>>> 
>>> Hi,
>>> 
>>> Can anyone give me a hint on how to extract/filter/subset
>>> polygons from a shapefile based on an attribute of its dbf
>>> table ?
>>> 
>>> Example:
>>> 
>>> shapefile: world.shp
>>> attributes of its dbf table: ID, AREA, COUNTRY, ...
>>> 
>>> How can I plot a shapefile with only countries above a certain AREA value 
>>> ?
>>> 
>>> Thank you very much,
>>> 
>>> Arnald Marcer
>>> CREAF
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>> 
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From ludwig.hilger at ku-eichstaett.de  Thu Sep 16 14:59:14 2010
From: ludwig.hilger at ku-eichstaett.de (Ludwig Hilger)
Date: Thu, 16 Sep 2010 05:59:14 -0700 (PDT)
Subject: [R-sig-Geo] Probably beginner's problem
Message-ID: <1284641954716-5538348.post@n2.nabble.com>


Helly everybody,

I am a RSAGA-beginner and I am trying to use some simple modules. Although I
have combed through this forum for an answer to my questions, I could not
make my modules run. So I post my two problems and I am hoping for some
help.

1.	I am trying to add 10 *.sgrd with rsaga.grid.calculus:

setwd("C:/Users/Ludwig Hilger/Documents/Studium/SS 2010/SEDAG - HIWI/Daten
und Modul/Zwieselbachtal/")
#rsaga.get.modules("grid_calculus")                        #Infos ?ber ein
eine Modulbibliothek
#rsaga.get.usage("grid_calculus", 1)                       #Infos ?ber die
Parameter des Moduls
rsaga.grid.calculus(in.grids = c("ZBT_mure1_modvel", "ZBT_mure2_modvel",
"ZBT_mure3_modvel", "ZBT_mure4_modvel", "ZBT_mure5_modvel",
"ZBT_mure6_modvel", "ZBT_mure7_modvel", "ZBT_mure8_modvel",
"ZBT_mure9_modvel", "ZBT_mure10_modvel"), 
out.grid = '"ZBT_muren1_10_modvel2"', formula = "a+b+c+d+e+f+g+h+i", silent
= FALSE)

I get back:

Unknown option 'INPUT'
Usage: 1 -GRIDS <str> -RESULT <str> [-FORMULA <str>]
  -GRIDS:<str>          Grids
        Grid list (input)
  -RESULT:<str>         Result
        Grid (output)
  -FORMULA:<str>        Formula
        Text

error: executing module [Grid Calculator]

I have tried solving it by using rsaga.geoprocessor, using double quotation
marks for the file specifications, the alternative for formula specification
(~), but still it does not work.

2.	I am trying to use ?Shapes to grid?. I am wondering where to specify the
target grid dimensions if you choose Target to be 1:

rsaga.geoprocessor(lib="grid_gridding", silent = FALSE, module = 0, 
param=list(
GRID_GRID='"C:/Users/Ludwig Hilger/Documents/Studium/SS 2010/SEDAG -
HIWI/Daten und Modul/Zwieselbachtal/In R berechnete
Grids/ZBT_dreiteilige_auswahl.buff.sgrd"', 
INPUT='"ZBT_dreiteilige_auswahl_buff.shp"', 
FIELD=8,
GRID_TYPE=0,
LINE_TYPE=1,
TARGET=1
))

I get back:

Load shapes: ZBT_dreiteilige_auswahl_buff.shp...
ready

Parameters

Shapes: ZBT_dreiteilige_auswahl_buff
Attribute: CAT
Method for Lines: thick
Preferred Target Grid Type: Integer (1 byte)
Target Grid: grid


error: executing module [Shapes to Grid]

Thank you,

Ludwig / Eichst?tt, Germany

-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Probably-beginner-s-problem-tp5538348p5538348.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From kevinummel at gmail.com  Thu Sep 16 15:28:00 2010
From: kevinummel at gmail.com (Kevin Ummel)
Date: Thu, 16 Sep 2010 08:28:00 -0500
Subject: [R-sig-Geo] Project global map of continents without wrapping?
Message-ID: <6478BFA0-A64D-45B0-AA25-AAC59F546064@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100916/67f7006f/attachment.pl>

From jaimebg27 at gmail.com  Thu Sep 16 19:05:12 2010
From: jaimebg27 at gmail.com (=?ISO-8859-1?Q?Jaime_Burbano_Gir=F3n?=)
Date: Thu, 16 Sep 2010 12:05:12 -0500
Subject: [R-sig-Geo] There is a better distribution of linux to get the best
 performance of R, GRASS.. etc?
Message-ID: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100916/e8992e0b/attachment.pl>

From landis at isciences.com  Thu Sep 16 19:23:25 2010
From: landis at isciences.com (Matthew Landis)
Date: Thu, 16 Sep 2010 13:23:25 -0400
Subject: [R-sig-Geo] There is a better distribution of linux to get the
 best performance of R, GRASS.. etc?
In-Reply-To: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>
References: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>
Message-ID: <4C92528D.5080900@isciences.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100916/275958d8/attachment.html>

From smu at z107.de  Thu Sep 16 20:31:35 2010
From: smu at z107.de (Stefan Muthers)
Date: Thu, 16 Sep 2010 20:31:35 +0200
Subject: [R-sig-Geo] SpatialPoint to SpatialGrid with unequal distributed
	points
Message-ID: <20100916183135.GB17723@z107.de>

Hello,

this is probably a beginners question, but I found no solution on the
web.

If am using data from a climate model with the cell positions given in
geographic coordinates. Unfortunatly the distance between the cells is
uneven (due to runding errors and maybe the projection) and the
"gridded" command fails to determine the correct cell size.


Consider the following example:


library(fields)
library(sp)   

link <- "http://z107.de/uni/example16092010.RData"
load(url(link))

coordinates(data) <- c("lon","lat")
gridded(data) <- TRUE  
# Warnmeldungen:
#1: In points2grid(points, tolerance, round, fuzz.tol) :  
#  grid has empty column/rows in dimension 1
#2: In points2grid(points, tolerance, round, fuzz.tol) :
#  grid has empty column/rows in dimension 2

data_sp <- as(data, "SpatialGridDataFrame")
g_plot <- as.image.SpatialGridDataFrame(data_sp["Therm.Eignung"])
image.plot(g_plot)



The resulting map contains only small stripes and much empty space.
summary(data) reveals, that the cellsize if much to small (cell should
be quadratic with a cellsize of ~ .16) and to many cells were found in
the y-direction. 

When I replace the lat and lon values with simple x and y coordinates,
everything works fine, but then it is not possible to overlay a shape
file, that displays the country borders.

Any ideas, why the cellsize-estimation is so different from the real
value and what I can do, to create a raster map with this data?


thank you and best regards,

 stefan


From edzer.pebesma at uni-muenster.de  Thu Sep 16 21:57:01 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 16 Sep 2010 21:57:01 +0200
Subject: [R-sig-Geo] SpatialPoint to SpatialGrid with unequal
 distributed points
In-Reply-To: <20100916183135.GB17723@z107.de>
References: <20100916183135.GB17723@z107.de>
Message-ID: <4C92768D.2040603@uni-muenster.de>

Stefan, your data are definitely not on a grid, so either you transform
them back to the grid on which they were, or alternatively you could
interpolate them to a new grid, e.g. by

library(sp)
link <- "http://z107.de/uni/example16092010.RData"
load(url(link))
coordinates(data) <- c("lon","lat")
diff(sort(unique(coordinates(data)[,2])))
diff(sort(unique(coordinates(data)[,2])))
bb = bbox(data)
gt = GridTopology(c(bb[1,1],bb[2,1]), c(.18,.18), round(c(diff(bb[1,]),
        diff(bb[2,]))/.18) + 1)
plot(data)
plot(SpatialGrid(gt),col='red',add=T)
sp = SpatialGrid(gt)
fullgrid(sp)=F
spx = SpatialPixelsDataFrame(sp, data.frame(x = rep(NA, 44*16)))
library(gstat)
#proj4string(data)="+proj=longlat"
#proj4string(spx)="+proj=longlat"
sp2 = idw(Therm.Eignung~1,data,spx)
image(sp2,axes=T)
spplot(sp2[1], col.regions=bpy.colors())


On 09/16/2010 08:31 PM, Stefan Muthers wrote:
> Hello,
> 
> this is probably a beginners question, but I found no solution on the
> web.
> 
> If am using data from a climate model with the cell positions given in
> geographic coordinates. Unfortunatly the distance between the cells is
> uneven (due to runding errors and maybe the projection) and the
> "gridded" command fails to determine the correct cell size.
> 
> 
> Consider the following example:
> 
> 
> library(fields)
> library(sp)   
> 
> link <- "http://z107.de/uni/example16092010.RData"
> load(url(link))
> 
> coordinates(data) <- c("lon","lat")
> gridded(data) <- TRUE  
> # Warnmeldungen:
> #1: In points2grid(points, tolerance, round, fuzz.tol) :  
> #  grid has empty column/rows in dimension 1
> #2: In points2grid(points, tolerance, round, fuzz.tol) :
> #  grid has empty column/rows in dimension 2
> 
> data_sp <- as(data, "SpatialGridDataFrame")
> g_plot <- as.image.SpatialGridDataFrame(data_sp["Therm.Eignung"])
> image.plot(g_plot)
> 
> 
> 
> The resulting map contains only small stripes and much empty space.
> summary(data) reveals, that the cellsize if much to small (cell should
> be quadratic with a cellsize of ~ .16) and to many cells were found in
> the y-direction. 
> 
> When I replace the lat and lon values with simple x and y coordinates,
> everything works fine, but then it is not possible to overlay a shape
> file, that displays the country borders.
> 
> Any ideas, why the cellsize-estimation is so different from the real
> value and what I can do, to create a raster map with this data?
> 
> 
> thank you and best regards,
> 
>  stefan
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From ricardorodot02 at gmail.com  Fri Sep 17 01:27:40 2010
From: ricardorodot02 at gmail.com (=?ISO-8859-1?Q?Ricardo_Rodr=EDguez?=)
Date: Thu, 16 Sep 2010 18:27:40 -0500
Subject: [R-sig-Geo] re-classification
Message-ID: <AANLkTi=QhqdAPoSZp12g39YvX8hbBssPQu+UVVCyAS5D@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100916/77c6fb40/attachment.pl>

From Adrian.Baddeley at csiro.au  Fri Sep 17 07:33:37 2010
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Fri, 17 Sep 2010 13:33:37 +0800
Subject: [R-sig-Geo] (no subject)
Message-ID: <57DC18C299094D4299F837570C5DF1C52C92D9AF47@EXWA-MBX01.nexus.csiro.au>

Hamid Ghorbani <hhamidghorbani at gmail.com> writes:

> In spatstat and for calculating the maximum absolute difference
> between the empirical Ripley's K-function (\hat(K), isotropic edge
> correction) and the theoretical K-function for a simulated Poisson
> process in a fixed window (suppose 3D case and fix number of points
> (n) in W), we usually use a sequence of regular grid points. On the
> other hand we know that the empirical K function is a step function
> and hence the max occurs only at a jump point. suppose x is a typical
> jump point (x is one of considered grid points), we have actually two
> differences at x because we should also consider the difference
> between \hat{K}(x-) and K(x-), where x- is the value just
> infinitesimally smaller than x. The problem is if we calculate the
> absolute difference only at the regular jump points like x, we shall
> underestimate the true unknown maximum absolute difference between
> \hat(K) and the theoretical K. How we can deal with this problem.
> Shall taking very fine grids points would solve the problem? If yes
> some word of  theoretical reasoning please in direction of
> programming.

You want to calculate the maximum deviation M = \sup_r |\pi r^2 - \hat K(r)|. 
In the spatstat package \hat K(r) is evaluated at a regular grid of 
values of 'r'. If the spacing between two successive r values is r_{i+1} - r_i = s, then the discrete approximation M* = \max_i | \pi r_i^2 - \hat K(r_i)| satisfies 
|M - M*| \le \pi (R^2 - (R-s)^2) = \pi (2 R s + s^2) where R is the maximum value of r over which the supremum is taken. One can thus control the accuracy of the computation by selecting a sufficiently fine grid spacing 's'. 

Example
    require(spatstat)
    data(cells)
    K <- Kest(cells, r = seq(0, 0.25, by=1e-06))
    Mstar <- with(K, max(iso - theo))
    maxerr <- pi * (2 * 0.25 * 1e-06 + 1e-12)


Prof Adrian Baddeley (UWA/CSIRO)
CSIRO Mathematics, Informatics & Statistics
Leeuwin Centre, 65 Brockway Road, Floreat WA 6014, Australia
Tel: 08 9333 6177 | Fax: 08 9333 6121 | Mob: 0410 447 821


From Arnald.Marcer at uab.cat  Fri Sep 17 09:47:51 2010
From: Arnald.Marcer at uab.cat (Arnald Marcer)
Date: Fri, 17 Sep 2010 09:47:51 +0200
Subject: [R-sig-Geo] how to mask a raster with a coarser resolution selected
	grid squares ?
Message-ID: <4C931D27.7040807@uab.cat>

Dear listers,

Can anybody help me with this ?

How can I mask a 1km UTM grid raster with a list of coordinates
which represent the center of 10km UTM grid squares ? Ultimately
I want the 1km grid raster with only the pixels that fall inside
the 10km UTM grid squares.

Also, how can I build a SpatialPolygonsDataFrame representing 10km
UTM grid squares from a list of coordinates which represent their grid
center.

I will appreciate if you can give me some hints on how to do this.

Arnald Marcer
CREAF


From edzer.pebesma at uni-muenster.de  Fri Sep 17 11:08:12 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 17 Sep 2010 11:08:12 +0200
Subject: [R-sig-Geo] how to mask a raster with a coarser resolution
 selected grid squares ?
In-Reply-To: <4C931D27.7040807@uab.cat>
References: <4C931D27.7040807@uab.cat>
Message-ID: <4C932FFC.3020700@uni-muenster.de>



On 09/17/2010 09:47 AM, Arnald Marcer wrote:
> Dear listers,
> 
> Can anybody help me with this ?
> 
> How can I mask a 1km UTM grid raster with a list of coordinates
> which represent the center of 10km UTM grid squares ? Ultimately
> I want the 1km grid raster with only the pixels that fall inside
> the 10km UTM grid squares.

convert the first to SpatialPointsDataFrame, and create a SpatialPixels
object from the second, then use overlay() to get the indexes of the
points that lie within the 10km grid cells.
> 
> Also, how can I build a SpatialPolygonsDataFrame representing 10km
> UTM grid squares from a list of coordinates which represent their grid
> center.

first create a SpatialPixelsDataFrame, say sx, then use

as(sx, "SpatialPolygonsDataFrame")

> 
> I will appreciate if you can give me some hints on how to do this.
> 
> Arnald Marcer
> CREAF
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From johan.vandewauw at gmail.com  Fri Sep 17 13:00:43 2010
From: johan.vandewauw at gmail.com (Johan Van de Wauw)
Date: Fri, 17 Sep 2010 13:00:43 +0200
Subject: [R-sig-Geo] Probably beginner's problem
In-Reply-To: <1284641954716-5538348.post@n2.nabble.com>
References: <1284641954716-5538348.post@n2.nabble.com>
Message-ID: <AANLkTik4K9wYFNa8LNRHY1P5zyH9PO+DBE94XuyipLC_@mail.gmail.com>

The current version of RSAGA is not (yet) compatible with saga 2.0.5.
Installing saga 2.0.4 should fix your problem (both versions can live
together, no need to uninstall saga 2.0.5).

Johan

On Thu, Sep 16, 2010 at 2:59 PM, Ludwig Hilger
<ludwig.hilger at ku-eichstaett.de> wrote:
>
> Helly everybody,
>
> I am a RSAGA-beginner and I am trying to use some simple modules. Although I
> have combed through this forum for an answer to my questions, I could not
> make my modules run. So I post my two problems and I am hoping for some
> help.
>
> 1. ? ? ?I am trying to add 10 *.sgrd with rsaga.grid.calculus:
>
> setwd("C:/Users/Ludwig Hilger/Documents/Studium/SS 2010/SEDAG - HIWI/Daten
> und Modul/Zwieselbachtal/")
> #rsaga.get.modules("grid_calculus") ? ? ? ? ? ? ? ? ? ? ? ?#Infos ?ber ein
> eine Modulbibliothek
> #rsaga.get.usage("grid_calculus", 1) ? ? ? ? ? ? ? ? ? ? ? #Infos ?ber die
> Parameter des Moduls
> rsaga.grid.calculus(in.grids = c("ZBT_mure1_modvel", "ZBT_mure2_modvel",
> "ZBT_mure3_modvel", "ZBT_mure4_modvel", "ZBT_mure5_modvel",
> "ZBT_mure6_modvel", "ZBT_mure7_modvel", "ZBT_mure8_modvel",
> "ZBT_mure9_modvel", "ZBT_mure10_modvel"),
> out.grid = '"ZBT_muren1_10_modvel2"', formula = "a+b+c+d+e+f+g+h+i", silent
> = FALSE)
>
> I get back:
>
> Unknown option 'INPUT'
> Usage: 1 -GRIDS <str> -RESULT <str> [-FORMULA <str>]
> ?-GRIDS:<str> ? ? ? ? ?Grids
> ? ? ? ?Grid list (input)
> ?-RESULT:<str> ? ? ? ? Result
> ? ? ? ?Grid (output)
> ?-FORMULA:<str> ? ? ? ?Formula
> ? ? ? ?Text
>
> error: executing module [Grid Calculator]
>
> I have tried solving it by using rsaga.geoprocessor, using double quotation
> marks for the file specifications, the alternative for formula specification
> (~), but still it does not work.
>
> 2. ? ? ?I am trying to use ?Shapes to grid?. I am wondering where to specify the
> target grid dimensions if you choose Target to be 1:
>
> rsaga.geoprocessor(lib="grid_gridding", silent = FALSE, module = 0,
> param=list(
> GRID_GRID='"C:/Users/Ludwig Hilger/Documents/Studium/SS 2010/SEDAG -
> HIWI/Daten und Modul/Zwieselbachtal/In R berechnete
> Grids/ZBT_dreiteilige_auswahl.buff.sgrd"',
> INPUT='"ZBT_dreiteilige_auswahl_buff.shp"',
> FIELD=8,
> GRID_TYPE=0,
> LINE_TYPE=1,
> TARGET=1
> ))
>
> I get back:
>
> Load shapes: ZBT_dreiteilige_auswahl_buff.shp...
> ready
>
> Parameters
>
> Shapes: ZBT_dreiteilige_auswahl_buff
> Attribute: CAT
> Method for Lines: thick
> Preferred Target Grid Type: Integer (1 byte)
> Target Grid: grid
>
>
> error: executing module [Shapes to Grid]
>
> Thank you,
>
> Ludwig / Eichst?tt, Germany
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Probably-beginner-s-problem-tp5538348p5538348.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From mspinola10 at gmail.com  Fri Sep 17 13:13:54 2010
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Fri, 17 Sep 2010 05:13:54 -0600
Subject: [R-sig-Geo] Open source GIS and R
Message-ID: <4C934D72.6060709@gmail.com>

  Dear list members,

I am an ecologist interested in spatial and landscape ecology and a user 
of ArcView 3.3 with little experience in ArcGis but I would like to 
migrate to an open source GIS with an interface with R.
I know that there are several options: QGIS, SAGA, GRASS, Illwis.

What will be the best option of these or other alternatives?

Best,

Manuel

-- 
Manuel Sp?nola, Ph.D.
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.ac.cr
mspinola10 at gmail.com
Tel?fono: (506) 2277-3598
Fax: (506) 2237-7036


From arnald.marcer at uab.cat  Fri Sep 17 13:15:57 2010
From: arnald.marcer at uab.cat (Arnald Marcer)
Date: Fri, 17 Sep 2010 13:15:57 +0200
Subject: [R-sig-Geo] how to mask a raster with a coarser resolution
 selected grid squares ?
In-Reply-To: <4C931D27.7040807@uab.cat>
References: <4C931D27.7040807@uab.cat>
Message-ID: <4C934DED.30808@uab.cat>

Dear listers,

Thanks to Robert and Edzer I finally found a way to do this. This is the
final solution I got to, in case anybody wants to use it:

##############################################
# This function returns a masks all zones of a 1km raster which
# do not fall inside 10km grid cells defined by a list of selected
# 10km-resolution cell centers. cell.centers must be a 
SpatialPointsDataFrame
##############################################
maskFromCoarserResolution <- function(r.1km, cell.centers.10k){
   fr1k <- paste(dirRefCarto,"catalonia_utm1k.asc",sep="")
   r1k <- raster(fr1k)
   r10k <-  aggregate(raster(r1k), 10)
   cells <- cellFromXY(r10k, cell.centers.10k)
   r10k[] <- NA
   r10k[cells] <- 1
   r10kto1k <- disaggregate(r10k, 10)
   extent.r1k <- extent(r1k)
   #in order to make sure both bounding boxes are equal
   r10kto1k <- crop(r10kto1k, extent.r1k)
   r1k.masked <- mask(r1k, r10kto1k)
}

Arnald Marcer
CREAF


On 09/17/2010 09:47 AM, Arnald Marcer wrote:
> Dear listers,
>
> Can anybody help me with this ?
>
> How can I mask a 1km UTM grid raster with a list of coordinates
> which represent the center of 10km UTM grid squares ? Ultimately
> I want the 1km grid raster with only the pixels that fall inside
> the 10km UTM grid squares.
>
> Also, how can I build a SpatialPolygonsDataFrame representing 10km
> UTM grid squares from a list of coordinates which represent their grid
> center.
>
> I will appreciate if you can give me some hints on how to do this.
>
> Arnald Marcer
> CREAF


-- 
-----------------------------------------------------------------
Arnald Marcer
Investigador

Centre de Recerca Ecol?gica i Aplicacions Forestals (CREAF)
Universitat Aut?noma de Barcelona
08193 Barcelona

Tel: 93 5811312
Fax: 93 5814151
-----------------------------------------------------------------
Arnald Marcer
Researcher

Centre for Ecological Research and Forestry Applications (CREAF)
Autonomous University of Barcelona
08193 Barcelona

Phone: +34 93 5811312
Fax:   +34 93 5814151


From Josep.Serra at uab.cat  Fri Sep 17 13:16:36 2010
From: Josep.Serra at uab.cat (PEP Serra Diaz)
Date: Fri, 17 Sep 2010 13:16:36 +0200
Subject: [R-sig-Geo] Beginners question: From text-raster to grid / map
Message-ID: <13a05eb871ca.4c936a34@uab.es>


Dear R-SIGers,

I would like to know which function to use in order to plot a map.

I know my origin of coordinates (x=2,y=8), and my resolution (2)

And I have an ASCII/txt file as an output matrix 

3 6 7 4
2 3 4 5
4 5 5 6

I would like to plot a map for these values and/or alternatively get a table like that (in other words, assign coordinates to each value of the text.file (matrix))

X Y VALUE
2 8 4
4 8 5
6 8 5
8 8 6
2 8 2
4 8 3 
6 8 4 
8 8 5
2 8 3
4 8 6
6 8 7 
8 8 4


Thanks,

Pep


From Josep.Serra at uab.cat  Fri Sep 17 13:24:04 2010
From: Josep.Serra at uab.cat (PEP Serra Diaz)
Date: Fri, 17 Sep 2010 13:24:04 +0200
Subject: [R-sig-Geo] Beginners question: From text-raster to grid / map
Message-ID: <13c7144f2446.4c936bf4@uab.es>

Sorry, the inteded data.frame is to be like this:

X  Y  VALUE
2  8  4
4  8  5
6  8  5
8  8  6
2 10 2
4 10 3 
6 10 4 
8 10 5
2 12 3
4 12 6
6 12 7 
8 12 4



----- Missatge original -----
De: PEP Serra Diaz <Josep.Serra at uab.cat>
Data: Divendres, Setembre 17, 2010 1:16 pm
Assumpte: Beginners question: From text-raster to grid / map

> 
> Dear R-SIGers,
> 
> I would like to know which function to use in order to plot a map.
> 
> I know my origin of coordinates (x=2,y=8), and my resolution (2)
> 
> And I have an ASCII/txt file as an output matrix 
> 
> 3 6 7 4
> 2 3 4 5
> 4 5 5 6
> 
> I would like to plot a map for these values and/or alternatively 
> get a table like that (in other words, assign coordinates to each 
> value of the text.file (matrix))
> 

> 
> Thanks,
> 
> Pep 
>


From r.m.krug at gmail.com  Fri Sep 17 13:31:03 2010
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Fri, 17 Sep 2010 13:31:03 +0200
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <4C934D72.6060709@gmail.com>
References: <4C934D72.6060709@gmail.com>
Message-ID: <4C935177.1010303@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 17/09/10 13:13, Manuel Sp?nola wrote:
>  Dear list members,
> 
> I am an ecologist interested in spatial and landscape ecology and a user
> of ArcView 3.3 with little experience in ArcGis but I would like to
> migrate to an open source GIS with an interface with R.

Good decision - I did that some time ago, and never looked back.

> I know that there are several options: QGIS, SAGA, GRASS, Illwis.

GRASS: very usable GIS, now a nice GUI, brilliant cli support, stable,
recommendable. Disadvantage: uses "database" for map storage and that
takes some time to get you head around, but it is definitely worth it.

QGIS: nice userinterface, easy to use, has a plugin to use GRASS for
analysis, very nice for quick visualisation of data of different sources
(shape files, grass, ... can easily combined in one map). Disadvantages:
not many, but lmited analysis support without GRASS - second step after
QGIS is migration to GRASS.

SAGA: sounds like an interesting system, nice analysis capabilities;
GUI: haven't used it. Disadvantages: in contrast to GRASS and QGIS,
backwardcompatibility is not guaranteed (not even between 2.0.4 and
2.0.5 - that can cause (solvable_ problems. Nevertheless, I am
investigating the possibility to switch from GRASS to SAGA for usage
from R at the moment.

Illwis: never heard of it and never used it

So: all of them are a good choice, and it depends on what you want to do:

- - simple and fast visualisation of spatial data: QGIS
- - interfacing with R: GRASS or SAGA
- - powerful stand-alone GIS: GRASS (to a lesser degree GRASS through QGIS
lugin)

Hope this helps,

Rainer

> 
> What will be the best option of these or other alternatives?
> 
> Best,
> 
> Manuel
> 


- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Natural Sciences Building
Office Suite 2039
Stellenbosch University
Main Campus, Merriman Avenue
Stellenbosch
South Africa

Tel:        +33 - (0)9 53 10 27 44
Cell:       +27 - (0)8 39 47 90 42
Fax (SA):   +27 - (0)8 65 16 27 82
Fax (D) :   +49 - (0)3 21 21 25 22 44
Fax (FR):   +33 - (0)9 58 10 27 44
email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAkyTUXcACgkQoYgNqgF2egqhIACdHEPdnqtwNJmgNzzfRjTCdOUR
82cAnAhDJIHzd0abncUxqiX7Gb50xVKR
=RjHY
-----END PGP SIGNATURE-----


From sylvain.maillard at gmail.com  Fri Sep 17 13:37:39 2010
From: sylvain.maillard at gmail.com (Sylvain Maillard)
Date: Fri, 17 Sep 2010 13:37:39 +0200
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <4C934D72.6060709@gmail.com>
References: <4C934D72.6060709@gmail.com>
Message-ID: <AANLkTinCNHB1CX-Mgc8vUTxJkODVnb7wwsMW8RxN_a+q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100917/744454a2/attachment.pl>

From jmbarriosg at gmail.com  Fri Sep 17 13:38:22 2010
From: jmbarriosg at gmail.com (=?ISO-8859-1?Q?Jos=E9_Miguel_Barrios?=)
Date: Fri, 17 Sep 2010 13:38:22 +0200
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <4C934D72.6060709@gmail.com>
References: <4C934D72.6060709@gmail.com>
Message-ID: <AANLkTi=ht1GVL3=6TN15mHfvUO2_3TnGxup9pJr3-KH-@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100917/b80bb326/attachment.pl>

From Virgilio.Gomez at uclm.es  Fri Sep 17 13:43:11 2010
From: Virgilio.Gomez at uclm.es (Virgilio Gomez Rubio)
Date: Fri, 17 Sep 2010 13:43:11 +0200
Subject: [R-sig-Geo] There is a better distribution of linux to get the
 best performance of R, GRASS.. etc?
In-Reply-To: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>
References: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>
Message-ID: <1284723791.2323.9.camel@Virgilio-Gomez>

Dear Jaime,

In addition to all options pointed out, you may want to try Quantian:

http://dirk.eddelbuettel.com/quantian.html

It provides a scientific computing environment based on knoppix and it
can boot from a CD/DVD. R and Grass are both included. This will give
you a flavour of what is available with no installation at all. Expect
it to be slower than a proper installation on the hard drive.

Hope this helps.

Virgilio

El jue, 16-09-2010 a las 12:05 -0500, Jaime Burbano Gir?n escribi?:
> Hi all.
> 
> I am thinking in start using Linux slowly while I stop using Windows. I
> would like to know if there is a special distribution of Linux recomendend
> for the use of R and GRASS, or in general if there is a better distribution
> of linux than the others, honestly I just have heard about Ubuntu.
> 
> Aditionally I would like to know if someone has a negative experience in the
> migration from Windows to Linuxm and if there are some tips for complete
> succesfully this process.
> 
> Thanks for your answers. My best regards.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From bertuki6 at hotmail.com  Fri Sep 17 13:49:32 2010
From: bertuki6 at hotmail.com (=?iso-8859-1?B?QmVydGEgSWLh8WV6?=)
Date: Fri, 17 Sep 2010 13:49:32 +0200
Subject: [R-sig-Geo] object of SpatialPolygonsDataFrame from several objects
	of the class
Message-ID: <SNT142-w30D274248CE1CB2AB811A08F7B0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100917/4e77808d/attachment.pl>

From a.crowe at lancaster.ac.uk  Fri Sep 17 13:49:28 2010
From: a.crowe at lancaster.ac.uk (Crowe, Andrew)
Date: Fri, 17 Sep 2010 12:49:28 +0100
Subject: [R-sig-Geo] Beginners question: From text-raster to grid / map
References: <13c7144f2446.4c936bf4@uab.es>
Message-ID: <2C1F0E483039ED4CBE03BCC5740635923F851C@exchange-be3.lancs.local>

You could add a header to the ascii file to give it the ESRI format which can then be read into R using the readAsciiGrid function from the maptools package and viewed with the image function
 
The file should look something like this:
ncols         4
nrows         3
xllcorner     2.0
yllcorner     8.0
cellsize      2.0
NODATA_value  -9999
3 6 7 4
2 3 4 5
4 5 5 6

R commands:
library(maptools)
ingrid <- readAsciiGrid("full_file_path")
image(ingrid)
 
HTH
 
Andrew
 
Dr Andrew Crowe
 
Lancaster Environment Centre
Lancaster University
Lancaster    LA1 4YQ
UK
 

________________________________

From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of PEP Serra Diaz
Sent: Fri 17/09/2010 12:24 PM
To: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] Beginners question: From text-raster to grid / map



Sorry, the inteded data.frame is to be like this:

X  Y  VALUE
2  8  4
4  8  5
6  8  5
8  8  6
2 10 2
4 10 3
6 10 4
8 10 5
2 12 3
4 12 6
6 12 7
8 12 4



----- Missatge original -----
De: PEP Serra Diaz <Josep.Serra at uab.cat>
Data: Divendres, Setembre 17, 2010 1:16 pm
Assumpte: Beginners question: From text-raster to grid / map

>
> Dear R-SIGers,
>
> I would like to know which function to use in order to plot a map.
>
> I know my origin of coordinates (x=2,y=8), and my resolution (2)
>
> And I have an ASCII/txt file as an output matrix
>
> 3 6 7 4
> 2 3 4 5
> 4 5 5 6
>
> I would like to plot a map for these values and/or alternatively
> get a table like that (in other words, assign coordinates to each
> value of the text.file (matrix))
>

>
> Thanks,
>
> Pep
>

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From ssefick at gmail.com  Fri Sep 17 13:58:03 2010
From: ssefick at gmail.com (stephen sefick)
Date: Fri, 17 Sep 2010 06:58:03 -0500
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <AANLkTi=ht1GVL3=6TN15mHfvUO2_3TnGxup9pJr3-KH-@mail.gmail.com>
References: <4C934D72.6060709@gmail.com>
	<AANLkTi=ht1GVL3=6TN15mHfvUO2_3TnGxup9pJr3-KH-@mail.gmail.com>
Message-ID: <AANLkTingMuRJycM5FS4pSSReXd9yTS8P+1WASEsmbDtF@mail.gmail.com>

I use GRASS and R on a more or less daily basis.  They play nicely
together.  The great strength of GRASS is you have the ability to use
shell scripts (with all the wonders of the *nix environment) once you
figure out the proper work flow (you can also run commands from within
R although I haven't tried this).  Set the computer to work, and go
home and have a beer while you are getting work done.   FYI the GRASS
team has just released the new stable version 6.4.1 (I think).
HTH,


Stephen
2010/9/17 Jos? Miguel Barrios <jmbarriosg at gmail.com>:
> Manuel,
>
> Since you are interested in landscape ecology, you may want to take a look
> at the features present in r.le, a set of programs available in GRASS. ?Take
> a look at this document:
> http://grass.osgeo.org/gdp/landscape/r_le_manual5.pdf
>
> Cheers,
>
> Jos? Miguel
>
> 2010/9/17 Manuel Sp?nola <mspinola10 at gmail.com>
>
>> ?Dear list members,
>>
>> I am an ecologist interested in spatial and landscape ecology and a user of
>> ArcView 3.3 with little experience in ArcGis but I would like to migrate to
>> an open source GIS with an interface with R.
>> I know that there are several options: QGIS, SAGA, GRASS, Illwis.
>>
>> What will be the best option of these or other alternatives?
>>
>> Best,
>>
>> Manuel
>>
>> --
>> Manuel Sp?nola, Ph.D.
>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
>> Universidad Nacional
>> Apartado 1350-3000
>> Heredia
>> COSTA RICA
>> mspinola at una.ac.cr
>> mspinola10 at gmail.com
>> Tel?fono: (506) 2277-3598
>> Fax: (506) 2237-7036
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



-- 
Stephen Sefick
____________________________________
| Auburn University? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
| Department of Biological Sciences? ? ? ? ?? |
| 331 Funchess Hall? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? |
| Auburn, Alabama? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
| 36849? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? |
|___________________________________|
| sas0025 at auburn.edu? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
| http://www.auburn.edu/~sas0025? ? ? ? ? ?? |
|___________________________________|

Let's not spend our time and resources thinking about things that are
so little or so large that all they really do for us is puff us up and
make us feel like gods.? We are mammals, and have not exhausted the
annoying little problems of being mammals.

? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? -K. Mullis

"A big computer, a complex algorithm and a long time does not equal science."

? ? ? ? ? ? ? ? ? ? ? ? ? ? ? -Robert Gentleman


From Roger.Bivand at nhh.no  Fri Sep 17 14:08:52 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 17 Sep 2010 14:08:52 +0200 (CEST)
Subject: [R-sig-Geo] object of SpatialPolygonsDataFrame from several
 objects of the class
In-Reply-To: <SNT142-w30D274248CE1CB2AB811A08F7B0@phx.gbl>
References: <SNT142-w30D274248CE1CB2AB811A08F7B0@phx.gbl>
Message-ID: <alpine.LRH.2.00.1009171405000.28151@reclus.nhh.no>

On Fri, 17 Sep 2010, Berta Ib??ez wrote:

>
>
>
> Dear R-users,
>
>
>
> I am trying to built a shp file of the class SpatialPolygonsDataFrame 
> using several shps. After handling the objects, I have 20 objects of the 
> class SpatialPolygonsDataFrame (some are SpatialPolygons only) and I 
> want to built one object (one shp) that is the result of gathering all 
> shps but conserving the borders (that is, I cannot use 
> unionSpatialPolygons). I want to plot the final objetc in a given order, 
> so that if I am able to convert it in a spatialpolygondataframe, I guess 
> I can use slot(globalshp,"plotOrder").


No, avoid using internal slots unless you know what you are doing. See 
spRbind() methods in maptools, and use it sequentially, after making sure 
that the row.names() of the objects to be combined are not duplicated 
(they must be unique in the combined object).

Hope this helps,

Roger

>
>
>
>
>
> Thanks a lot in advance,
>
> Berta
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From stefano at casalegno.net  Fri Sep 17 14:33:49 2010
From: stefano at casalegno.net (stefano)
Date: Fri, 17 Sep 2010 14:33:49 +0200
Subject: [R-sig-Geo] There is a better distribution of linux to get the
 best performance of R, GRASS.. etc?
In-Reply-To: <1284723791.2323.9.camel@Virgilio-Gomez>
References: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>
	<1284723791.2323.9.camel@Virgilio-Gomez>
Message-ID: <1284726829.1812.135.camel@ste>

Dear Jaime,

The Ubuntu distribution works fine with GIS and spatial analysis OS
software. It is rich of support for beginners.

You can try the  http://gisvm.com/ Ubuntu virtual machine that includes
GRASS R Qgis SAGA and many other interesting tools.

You can also try the virtual machine from the www.spatial-ecology.net 
that is very similar. The spatial-ecology wiki provide many examples and
tutorials for beginners willing to learn GIS and spatial analysis using
OS softwares under GUI and under a command line interface. Just register
and explore it.

In my point of view, a slow migration is worst than a complete immediate
shift to Linux. Just open the pinguin and do not close it, you will find
a way to solve your processing difficulties. At the beginning you will
take longer time for doing the same processing you are used to, but in
short time you gain much rapidity, stability of the system and
potentialities. 
Stefano

 

On Fri, 2010-09-17 at 13:43 +0200, Virgilio Gomez Rubio wrote:
> Dear Jaime,
> 
> In addition to all options pointed out, you may want to try Quantian:
> 
> http://dirk.eddelbuettel.com/quantian.html
> 
> It provides a scientific computing environment based on knoppix and it
> can boot from a CD/DVD. R and Grass are both included. This will give
> you a flavour of what is available with no installation at all. Expect
> it to be slower than a proper installation on the hard drive.
> 
> Hope this helps.
> 
> Virgilio
> 
> El jue, 16-09-2010 a las 12:05 -0500, Jaime Burbano Gir?n escribi?:
> > Hi all.
> > 
> > I am thinking in start using Linux slowly while I stop using Windows. I
> > would like to know if there is a special distribution of Linux recomendend
> > for the use of R and GRASS, or in general if there is a better distribution
> > of linux than the others, honestly I just have heard about Ubuntu.
> > 
> > Aditionally I would like to know if someone has a negative experience in the
> > migration from Windows to Linuxm and if there are some tips for complete
> > succesfully this process.
> > 
> > Thanks for your answers. My best regards.
> > 
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From r.m.krug at gmail.com  Fri Sep 17 14:38:20 2010
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Fri, 17 Sep 2010 14:38:20 +0200
Subject: [R-sig-Geo] There is a better distribution of linux to get the
 best performance of R, GRASS.. etc?
In-Reply-To: <1284726829.1812.135.camel@ste>
References: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>	<1284723791.2323.9.camel@Virgilio-Gomez>
	<1284726829.1812.135.camel@ste>
Message-ID: <4C93613C.3070706@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 17/09/10 14:33, stefano wrote:
> Dear Jaime,
> 
> The Ubuntu distribution works fine with GIS and spatial analysis OS
> software. It is rich of support for beginners.
> 
> You can try the  http://gisvm.com/ Ubuntu virtual machine that includes
> GRASS R Qgis SAGA and many other interesting tools.
> 
> You can also try the virtual machine from the www.spatial-ecology.net 
> that is very similar. The spatial-ecology wiki provide many examples and
> tutorials for beginners willing to learn GIS and spatial analysis using
> OS softwares under GUI and under a command line interface. Just register
> and explore it.
> 
> In my point of view, a slow migration is worst than a complete immediate
> shift to Linux. Just open the pinguin and do not close it, you will find
> a way to solve your processing difficulties. At the beginning you will
> take longer time for doing the same processing you are used to, but in
> short time you gain much rapidity, stability of the system and
> potentialities. 

Completely agreed. I installed Linux (at that time OpenSuSE, now Ubuntu)
on a new partition on my HDD, and after about 6 months, I realised that
I haven't used Windows at all - and the partition was gone.

Cheers,

Rainer

> Stefano
> 
>  
> 
> On Fri, 2010-09-17 at 13:43 +0200, Virgilio Gomez Rubio wrote:
>> Dear Jaime,
>>
>> In addition to all options pointed out, you may want to try Quantian:
>>
>> http://dirk.eddelbuettel.com/quantian.html
>>
>> It provides a scientific computing environment based on knoppix and it
>> can boot from a CD/DVD. R and Grass are both included. This will give
>> you a flavour of what is available with no installation at all. Expect
>> it to be slower than a proper installation on the hard drive.
>>
>> Hope this helps.
>>
>> Virgilio
>>
>> El jue, 16-09-2010 a las 12:05 -0500, Jaime Burbano Gir?n escribi?:
>>> Hi all.
>>>
>>> I am thinking in start using Linux slowly while I stop using Windows. I
>>> would like to know if there is a special distribution of Linux recomendend
>>> for the use of R and GRASS, or in general if there is a better distribution
>>> of linux than the others, honestly I just have heard about Ubuntu.
>>>
>>> Aditionally I would like to know if someone has a negative experience in the
>>> migration from Windows to Linuxm and if there are some tips for complete
>>> succesfully this process.
>>>
>>> Thanks for your answers. My best regards.
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Natural Sciences Building
Office Suite 2039
Stellenbosch University
Main Campus, Merriman Avenue
Stellenbosch
South Africa

Tel:        +33 - (0)9 53 10 27 44
Cell:       +27 - (0)8 39 47 90 42
Fax (SA):   +27 - (0)8 65 16 27 82
Fax (D) :   +49 - (0)3 21 21 25 22 44
Fax (FR):   +33 - (0)9 58 10 27 44
email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAkyTYTwACgkQoYgNqgF2egpqvgCdEA8z74WTMfY4LyXmg9vYDJ93
VH8AoIbMC4vpSiJf6IgmJLVM0FKuiRzj
=n9W2
-----END PGP SIGNATURE-----


From ssefick at gmail.com  Fri Sep 17 15:12:11 2010
From: ssefick at gmail.com (stephen sefick)
Date: Fri, 17 Sep 2010 08:12:11 -0500
Subject: [R-sig-Geo] There is a better distribution of linux to get the
 best performance of R, GRASS.. etc?
In-Reply-To: <4C93613C.3070706@gmail.com>
References: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>
	<1284723791.2323.9.camel@Virgilio-Gomez>
	<1284726829.1812.135.camel@ste> <4C93613C.3070706@gmail.com>
Message-ID: <AANLkTinsjjb3DEM66Me7s-Z6UdUEUNNcJL1Vo6m6Kk9O@mail.gmail.com>

The mac OS gradually introduced me to unix, and now I run Ubuntu.  I
don't know how I ever lived without it.  You have to be willing to
tinker, but it will get you where/and well beyond where you need to
be.
my 2 pennies,

Stephen

On Fri, Sep 17, 2010 at 7:38 AM, Rainer M Krug <r.m.krug at gmail.com> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 17/09/10 14:33, stefano wrote:
>> Dear Jaime,
>>
>> The Ubuntu distribution works fine with GIS and spatial analysis OS
>> software. It is rich of support for beginners.
>>
>> You can try the ?http://gisvm.com/ Ubuntu virtual machine that includes
>> GRASS R Qgis SAGA and many other interesting tools.
>>
>> You can also try the virtual machine from the www.spatial-ecology.net
>> that is very similar. The spatial-ecology wiki provide many examples and
>> tutorials for beginners willing to learn GIS and spatial analysis using
>> OS softwares under GUI and under a command line interface. Just register
>> and explore it.
>>
>> In my point of view, a slow migration is worst than a complete immediate
>> shift to Linux. Just open the pinguin and do not close it, you will find
>> a way to solve your processing difficulties. At the beginning you will
>> take longer time for doing the same processing you are used to, but in
>> short time you gain much rapidity, stability of the system and
>> potentialities.
>
> Completely agreed. I installed Linux (at that time OpenSuSE, now Ubuntu)
> on a new partition on my HDD, and after about 6 months, I realised that
> I haven't used Windows at all - and the partition was gone.
>
> Cheers,
>
> Rainer
>
>> Stefano
>>
>>
>>
>> On Fri, 2010-09-17 at 13:43 +0200, Virgilio Gomez Rubio wrote:
>>> Dear Jaime,
>>>
>>> In addition to all options pointed out, you may want to try Quantian:
>>>
>>> http://dirk.eddelbuettel.com/quantian.html
>>>
>>> It provides a scientific computing environment based on knoppix and it
>>> can boot from a CD/DVD. R and Grass are both included. This will give
>>> you a flavour of what is available with no installation at all. Expect
>>> it to be slower than a proper installation on the hard drive.
>>>
>>> Hope this helps.
>>>
>>> Virgilio
>>>
>>> El jue, 16-09-2010 a las 12:05 -0500, Jaime Burbano Gir?n escribi?:
>>>> Hi all.
>>>>
>>>> I am thinking in start using Linux slowly while I stop using Windows. I
>>>> would like to know if there is a special distribution of Linux recomendend
>>>> for the use of R and GRASS, or in general if there is a better distribution
>>>> of linux than the others, honestly I just have heard about Ubuntu.
>>>>
>>>> Aditionally I would like to know if someone has a negative experience in the
>>>> migration from Windows to Linuxm and if there are some tips for complete
>>>> succesfully this process.
>>>>
>>>> Thanks for your answers. My best regards.
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> - --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
>
> Centre of Excellence for Invasion Biology
> Natural Sciences Building
> Office Suite 2039
> Stellenbosch University
> Main Campus, Merriman Avenue
> Stellenbosch
> South Africa
>
> Tel: ? ? ? ?+33 - (0)9 53 10 27 44
> Cell: ? ? ? +27 - (0)8 39 47 90 42
> Fax (SA): ? +27 - (0)8 65 16 27 82
> Fax (D) : ? +49 - (0)3 21 21 25 22 44
> Fax (FR): ? +33 - (0)9 58 10 27 44
> email: ? ? ?Rainer at krugs.de
>
> Skype: ? ? ?RMkrug
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.10 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAkyTYTwACgkQoYgNqgF2egpqvgCdEA8z74WTMfY4LyXmg9vYDJ93
> VH8AoIbMC4vpSiJf6IgmJLVM0FKuiRzj
> =n9W2
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Stephen Sefick
____________________________________
| Auburn University? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
| Department of Biological Sciences? ? ? ? ?? |
| 331 Funchess Hall? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? |
| Auburn, Alabama? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
| 36849? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? |
|___________________________________|
| sas0025 at auburn.edu? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
| http://www.auburn.edu/~sas0025? ? ? ? ? ?? |
|___________________________________|

Let's not spend our time and resources thinking about things that are
so little or so large that all they really do for us is puff us up and
make us feel like gods.? We are mammals, and have not exhausted the
annoying little problems of being mammals.

? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? -K. Mullis

"A big computer, a complex algorithm and a long time does not equal science."

? ? ? ? ? ? ? ? ? ? ? ? ? ? ? -Robert Gentleman


From b.rowlingson at lancaster.ac.uk  Fri Sep 17 15:47:13 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 17 Sep 2010 14:47:13 +0100
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <4C934D72.6060709@gmail.com>
References: <4C934D72.6060709@gmail.com>
Message-ID: <AANLkTin8T1EKWqZykJFbycaNns+0d_RaMA-X2e_FY1UF@mail.gmail.com>

On Fri, Sep 17, 2010 at 12:13 PM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
> ?Dear list members,
>
> I am an ecologist interested in spatial and landscape ecology and a user of
> ArcView 3.3 with little experience in ArcGis but I would like to migrate to
> an open source GIS with an interface with R.
> I know that there are several options: QGIS, SAGA, GRASS, Illwis.
>
> What will be the best option of these or other alternatives?

 What's best for you and best for me depends on what we are trying to do!

 The idea of an 'interface with R' is a bit fluffy, and could be a
number of things. QGis has the wonderful 'manageR' system, which is a
full environment for running and editing R, with rapid exchange of
R-Spatial objects back and forth from QGis. I think Carson is planning
to produce a standalone version that doesn't need QGis as an
independent R GUI, it's *that* good. I only wish I had more time to
help with the dev on that.

 You might also consider PostGIS. This is a spatial database, so you
would keep all your (primarily) vector data in that, and learn the SQL
magic for doing stuff like polygon overlay, point-in-poly,
what's-the-longest-river-that's-partly-in-Worcestershire-that-has-a-newt-density-of-more-than-10-newts/km-when-surveyed-by-either-Dave-or-Nigel-but-not-Simon
questions. You can read PostGIS data into R and use it as the front
end via the sp package mapping functions.

 So many options, so little time! If all you want is pretty map
production then you can do pretty maps in R, or export your final data
as Shapefiles or rasters for import into QGis (or gvSIG, or OpenJump
etc etc) for your open source mapping needs...

Barry


From smu at z107.de  Fri Sep 17 15:53:59 2010
From: smu at z107.de (smu at z107.de)
Date: Fri, 17 Sep 2010 15:53:59 +0200
Subject: [R-sig-Geo] SpatialPoint to SpatialGrid with
	unequal	distributed points
In-Reply-To: <4C92768D.2040603@uni-muenster.de>
References: <20100916183135.GB17723@z107.de> <4C92768D.2040603@uni-muenster.de>
Message-ID: <20100917135359.GA1369@z107.de>

Thank you Edzer, the solution with the interpolation was exactly what I
was searching for.

best regards,
 stefan

On Thu, Sep 16, 2010 at 09:57:01PM +0200, Edzer Pebesma wrote:
> Stefan, your data are definitely not on a grid, so either you transform
> them back to the grid on which they were, or alternatively you could
> interpolate them to a new grid, e.g. by
> 
> library(sp)
> link <- "http://z107.de/uni/example16092010.RData"
> load(url(link))
> coordinates(data) <- c("lon","lat")
> diff(sort(unique(coordinates(data)[,2])))
> diff(sort(unique(coordinates(data)[,2])))
> bb = bbox(data)
> gt = GridTopology(c(bb[1,1],bb[2,1]), c(.18,.18), round(c(diff(bb[1,]),
>         diff(bb[2,]))/.18) + 1)
> plot(data)
> plot(SpatialGrid(gt),col='red',add=T)
> sp = SpatialGrid(gt)
> fullgrid(sp)=F
> spx = SpatialPixelsDataFrame(sp, data.frame(x = rep(NA, 44*16)))
> library(gstat)
> #proj4string(data)="+proj=longlat"
> #proj4string(spx)="+proj=longlat"
> sp2 = idw(Therm.Eignung~1,data,spx)
> image(sp2,axes=T)
> spplot(sp2[1], col.regions=bpy.colors())
> 
> 
> On 09/16/2010 08:31 PM, Stefan Muthers wrote:
> > Hello,
> > 
> > this is probably a beginners question, but I found no solution on the
> > web.
> > 
> > If am using data from a climate model with the cell positions given in
> > geographic coordinates. Unfortunatly the distance between the cells is
> > uneven (due to runding errors and maybe the projection) and the
> > "gridded" command fails to determine the correct cell size.
> > 
> > 
> > Consider the following example:
> > 
> > 
> > library(fields)
> > library(sp)   
> > 
> > link <- "http://z107.de/uni/example16092010.RData"
> > load(url(link))
> > 
> > coordinates(data) <- c("lon","lat")
> > gridded(data) <- TRUE  
> > # Warnmeldungen:
> > #1: In points2grid(points, tolerance, round, fuzz.tol) :  
> > #  grid has empty column/rows in dimension 1
> > #2: In points2grid(points, tolerance, round, fuzz.tol) :
> > #  grid has empty column/rows in dimension 2
> > 
> > data_sp <- as(data, "SpatialGridDataFrame")
> > g_plot <- as.image.SpatialGridDataFrame(data_sp["Therm.Eignung"])
> > image.plot(g_plot)
> > 
> > 
> > 
> > The resulting map contains only small stripes and much empty space.
> > summary(data) reveals, that the cellsize if much to small (cell should
> > be quadratic with a cellsize of ~ .16) and to many cells were found in
> > the y-direction. 
> > 
> > When I replace the lat and lon values with simple x and y coordinates,
> > everything works fine, but then it is not possible to overlay a shape
> > file, that displays the country borders.
> > 
> > Any ideas, why the cellsize-estimation is so different from the real
> > value and what I can do, to create a raster map with this data?
> > 
> > 
> > thank you and best regards,
> > 
> >  stefan
> > 
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> -- 
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics      e.pebesma at wwu.de
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From r.hijmans at gmail.com  Fri Sep 17 15:56:12 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 17 Sep 2010 15:56:12 +0200
Subject: [R-sig-Geo] Beginners question: From text-raster to grid / map
In-Reply-To: <2C1F0E483039ED4CBE03BCC5740635923F851C@exchange-be3.lancs.local>
References: <13c7144f2446.4c936bf4@uab.es>
	<2C1F0E483039ED4CBE03BCC5740635923F851C@exchange-be3.lancs.local>
Message-ID: <AANLkTinWoaZ9AMXdcfyrOKA+YB0GO_dCbibT5LP0v+-6@mail.gmail.com>

Pep,

if you have a matrix m, e.g.,

m <- matrix(1:100, ncol=10, byrow=T)

you can do

library(raster)
r <- raster(m)
xmn <- 2
ymn <- 8
res <- 2
extent(r) <- c(xmn, xmn+ncol(r)*res, ymn, ymn+nrow(r)*res)
plot(r)
xyv <- rasterToPoints(r)


Robert

On Fri, Sep 17, 2010 at 1:49 PM, Crowe, Andrew <a.crowe at lancaster.ac.uk> wrote:
> You could add a header to the ascii file to give it the ESRI format which can then be read into R using the readAsciiGrid function from the maptools package and viewed with the image function
>
> The file should look something like this:
> ncols ? ? ? ? 4
> nrows ? ? ? ? 3
> xllcorner ? ? 2.0
> yllcorner ? ? 8.0
> cellsize ? ? ?2.0
> NODATA_value ?-9999
> 3 6 7 4
> 2 3 4 5
> 4 5 5 6
>
> R commands:
> library(maptools)
> ingrid <- readAsciiGrid("full_file_path")
> image(ingrid)
>
> HTH
>
> Andrew
>
> Dr Andrew Crowe
>
> Lancaster Environment Centre
> Lancaster University
> Lancaster ? ?LA1 4YQ
> UK
>
>
> ________________________________
>
> From: r-sig-geo-bounces at stat.math.ethz.ch on behalf of PEP Serra Diaz
> Sent: Fri 17/09/2010 12:24 PM
> To: r-sig-geo at stat.math.ethz.ch
> Subject: Re: [R-sig-Geo] Beginners question: From text-raster to grid / map
>
>
>
> Sorry, the inteded data.frame is to be like this:
>
> X ?Y ?VALUE
> 2 ?8 ?4
> 4 ?8 ?5
> 6 ?8 ?5
> 8 ?8 ?6
> 2 10 2
> 4 10 3
> 6 10 4
> 8 10 5
> 2 12 3
> 4 12 6
> 6 12 7
> 8 12 4
>
>
>
> ----- Missatge original -----
> De: PEP Serra Diaz <Josep.Serra at uab.cat>
> Data: Divendres, Setembre 17, 2010 1:16 pm
> Assumpte: Beginners question: From text-raster to grid / map
>
>>
>> Dear R-SIGers,
>>
>> I would like to know which function to use in order to plot a map.
>>
>> I know my origin of coordinates (x=2,y=8), and my resolution (2)
>>
>> And I have an ASCII/txt file as an output matrix
>>
>> 3 6 7 4
>> 2 3 4 5
>> 4 5 5 6
>>
>> I would like to plot a map for these values and/or alternatively
>> get a table like that (in other words, assign coordinates to each
>> value of the text.file (matrix))
>>
>
>>
>> Thanks,
>>
>> Pep
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From johan.vandewauw at gmail.com  Fri Sep 17 15:57:29 2010
From: johan.vandewauw at gmail.com (Johan Van de Wauw)
Date: Fri, 17 Sep 2010 15:57:29 +0200
Subject: [R-sig-Geo] There is a better distribution of linux to get the
 best performance of R, GRASS.. etc?
In-Reply-To: <1284726829.1812.135.camel@ste>
References: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>
	<1284723791.2323.9.camel@Virgilio-Gomez>
	<1284726829.1812.135.camel@ste>
Message-ID: <AANLkTikG+DNsLTOCci8e1E8+4fpV6TREr+C31790ZSQR@mail.gmail.com>

> On Fri, 2010-09-17 at 13:43 +0200, Virgilio Gomez Rubio wrote:
>> Dear Jaime,
>>
>> In addition to all options pointed out, you may want to try Quantian:
>>
>> http://dirk.eddelbuettel.com/quantian.html
I would not recommend such an ancient distribution - newer hardware
may not work well, the version of all software is *old*

On Fri, Sep 17, 2010 at 2:33 PM, stefano <stefano at casalegno.net> wrote:

> You can try the ?http://gisvm.com/ Ubuntu virtual machine that includes
> GRASS R Qgis SAGA and many other interesting tools.
>
> You can also try the virtual machine from the www.spatial-ecology.net
> that is very similar. The spatial-ecology wiki provide many examples and
> tutorials for beginners willing to learn GIS and spatial analysis using
> OS softwares under GUI and under a command line interface. Just register
> and explore it.
Third option, which in my humble and biased opinion (largest developer
base, documentation efforts) the best live dvd for open source gis:
http://live.osgeo.org/
Especially if you create a usb disk, install or run in virtualbox
(running from dvd is very slow) a nice option.

Anyway, to boil down to your original question: all distributions will
do - and they are very similar. In your case I would nevertheless
recommend ubuntu because ubuntugis ( https://wiki.ubuntu.com/UbuntuGIS
) has some repositories with up to date versions of many gis packages,
which makes it much easier to install things - there will be enough
other things to learn if you switch from windows.

Johan


From jaimebg27 at gmail.com  Fri Sep 17 17:18:35 2010
From: jaimebg27 at gmail.com (=?ISO-8859-1?Q?Jaime_Burbano_Gir=F3n?=)
Date: Fri, 17 Sep 2010 10:18:35 -0500
Subject: [R-sig-Geo] There is a better distribution of linux to get the
 best performance of R, GRASS.. etc?
In-Reply-To: <AANLkTikG+DNsLTOCci8e1E8+4fpV6TREr+C31790ZSQR@mail.gmail.com>
References: <AANLkTi=sfS2toPTBq7CZonjX7B=5cdxqvuPom18fBD2t@mail.gmail.com>
	<1284723791.2323.9.camel@Virgilio-Gomez>
	<1284726829.1812.135.camel@ste>
	<AANLkTikG+DNsLTOCci8e1E8+4fpV6TREr+C31790ZSQR@mail.gmail.com>
Message-ID: <AANLkTin4nakBrni+SEsAZw0K0203ihghe6OZ67t7ppWS@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100917/b07d43bb/attachment.pl>

From mdsumner at gmail.com  Fri Sep 17 17:25:53 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 18 Sep 2010 01:25:53 +1000
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <AANLkTin8T1EKWqZykJFbycaNns+0d_RaMA-X2e_FY1UF@mail.gmail.com>
References: <4C934D72.6060709@gmail.com>
	<AANLkTin8T1EKWqZykJFbycaNns+0d_RaMA-X2e_FY1UF@mail.gmail.com>
Message-ID: <AANLkTimm4Y4wnKeWVqpC-rt1vQ8Q_jTCTRANCsp_Lwbc@mail.gmail.com>

I know this is anathemic, but "you might consider" Manifold. It's not
open source, but it's accessible (i.e. affordable) and well, it's
pretty cool.

Sorry folks.

On Fri, Sep 17, 2010 at 11:47 PM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> On Fri, Sep 17, 2010 at 12:13 PM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
>> ?Dear list members,
>>
>> I am an ecologist interested in spatial and landscape ecology and a user of
>> ArcView 3.3 with little experience in ArcGis but I would like to migrate to
>> an open source GIS with an interface with R.
>> I know that there are several options: QGIS, SAGA, GRASS, Illwis.
>>
>> What will be the best option of these or other alternatives?
>
> ?What's best for you and best for me depends on what we are trying to do!
>
> ?The idea of an 'interface with R' is a bit fluffy, and could be a
> number of things. QGis has the wonderful 'manageR' system, which is a
> full environment for running and editing R, with rapid exchange of
> R-Spatial objects back and forth from QGis. I think Carson is planning
> to produce a standalone version that doesn't need QGis as an
> independent R GUI, it's *that* good. I only wish I had more time to
> help with the dev on that.
>
> ?You might also consider PostGIS. This is a spatial database, so you
> would keep all your (primarily) vector data in that, and learn the SQL
> magic for doing stuff like polygon overlay, point-in-poly,
> what's-the-longest-river-that's-partly-in-Worcestershire-that-has-a-newt-density-of-more-than-10-newts/km-when-surveyed-by-either-Dave-or-Nigel-but-not-Simon
> questions. You can read PostGIS data into R and use it as the front
> end via the sp package mapping functions.
>
> ?So many options, so little time! If all you want is pretty map
> production then you can do pretty maps in R, or export your final data
> as Shapefiles or rasters for import into QGis (or gvSIG, or OpenJump
> etc etc) for your open source mapping needs...
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From Christopher.Bone at NRCan-RNCan.gc.ca  Fri Sep 17 18:33:56 2010
From: Christopher.Bone at NRCan-RNCan.gc.ca (Bone, Christopher)
Date: Fri, 17 Sep 2010 12:33:56 -0400
Subject: [R-sig-Geo] GWR Output
Message-ID: <BEEEF843E6572F45B45799E0BEA660C1037F0E60@S0-OTT-X3.nrn.nrcan.gc.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100917/62aeaf8e/attachment.pl>

From saldanha.plangeo at gmail.com  Fri Sep 17 18:46:00 2010
From: saldanha.plangeo at gmail.com (Raphael Saldanha)
Date: Fri, 17 Sep 2010 13:46:00 -0300
Subject: [R-sig-Geo] GWR Output
In-Reply-To: <BEEEF843E6572F45B45799E0BEA660C1037F0E60@S0-OTT-X3.nrn.nrcan.gc.ca>
References: <BEEEF843E6572F45B45799E0BEA660C1037F0E60@S0-OTT-X3.nrn.nrcan.gc.ca>
Message-ID: <AANLkTi=M_bofxBN6Kv9=JxOS+-ortfQADKrVeoioTxaL@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100917/59a27499/attachment.pl>

From Christopher.Bone at NRCan-RNCan.gc.ca  Fri Sep 17 19:33:54 2010
From: Christopher.Bone at NRCan-RNCan.gc.ca (Bone, Christopher)
Date: Fri, 17 Sep 2010 13:33:54 -0400
Subject: [R-sig-Geo] GWR Output
In-Reply-To: <AANLkTi=M_bofxBN6Kv9=JxOS+-ortfQADKrVeoioTxaL@mail.gmail.com>
References: <BEEEF843E6572F45B45799E0BEA660C1037F0E60@S0-OTT-X3.nrn.nrcan.gc.ca>
	<AANLkTi=M_bofxBN6Kv9=JxOS+-ortfQADKrVeoioTxaL@mail.gmail.com>
Message-ID: <BEEEF843E6572F45B45799E0BEA660C1037F0E8E@S0-OTT-X3.nrn.nrcan.gc.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100917/f453e538/attachment.pl>

From saldanha.plangeo at gmail.com  Fri Sep 17 20:38:51 2010
From: saldanha.plangeo at gmail.com (Raphael Saldanha)
Date: Fri, 17 Sep 2010 15:38:51 -0300
Subject: [R-sig-Geo] GWR Output
In-Reply-To: <BEEEF843E6572F45B45799E0BEA660C1037F0E8E@S0-OTT-X3.nrn.nrcan.gc.ca>
References: <BEEEF843E6572F45B45799E0BEA660C1037F0E60@S0-OTT-X3.nrn.nrcan.gc.ca>
	<AANLkTi=M_bofxBN6Kv9=JxOS+-ortfQADKrVeoioTxaL@mail.gmail.com>
	<BEEEF843E6572F45B45799E0BEA660C1037F0E8E@S0-OTT-X3.nrn.nrcan.gc.ca>
Message-ID: <AANLkTi=y_HDuH=a0E6qBAdLarn9UCXujZbHyMv4rgq2S@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100917/ea3dcae5/attachment.pl>

From mspinola10 at gmail.com  Sun Sep 19 00:35:21 2010
From: mspinola10 at gmail.com (=?ISO-8859-1?Q?Manuel_Sp=EDnola?=)
Date: Sat, 18 Sep 2010 16:35:21 -0600
Subject: [R-sig-Geo] raster layer to shapefile
Message-ID: <4C953EA9.3060107@gmail.com>

  Dear list members,

How to export a raster layer to a shapefile (or other format) to open 
this last one in QGIS.
Best,

Manuel

 > class(r)
[1] "RasterLayer"
attr(,"package")
[1] "raster"

-- 
Manuel Sp?nola, Ph.D.
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.ac.cr
mspinola10 at gmail.com
Tel?fono: (506) 2277-3598
Fax: (506) 2237-7036


From moshersteven at gmail.com  Sun Sep 19 00:52:10 2010
From: moshersteven at gmail.com (steven mosher)
Date: Sat, 18 Sep 2010 15:52:10 -0700
Subject: [R-sig-Geo] raster layer to shapefile
In-Reply-To: <4C953EA9.3060107@gmail.com>
References: <4C953EA9.3060107@gmail.com>
Message-ID: <AANLkTi=n_aLNGzUhtYw41pBMr=Kb1jT+1==bv3SExwwo@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100918/b6a5de68/attachment.pl>

From kmcoulib at gmail.com  Mon Sep 20 02:17:39 2010
From: kmcoulib at gmail.com (kapo coulibaly)
Date: Sun, 19 Sep 2010 20:17:39 -0400
Subject: [R-sig-Geo] Shapefile Created with R
Message-ID: <AANLkTinfy+eWkxK4ekPRGwxRmND1ERkGtjzUyzAUwvwh@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100919/1fb1477b/attachment.pl>

From mdsumner at gmail.com  Mon Sep 20 02:39:04 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 20 Sep 2010 10:39:04 +1000
Subject: [R-sig-Geo] Shapefile Created with R
In-Reply-To: <AANLkTinfy+eWkxK4ekPRGwxRmND1ERkGtjzUyzAUwvwh@mail.gmail.com>
References: <AANLkTinfy+eWkxK4ekPRGwxRmND1ERkGtjzUyzAUwvwh@mail.gmail.com>
Message-ID: <AANLkTikaS70sWoLgfffYf4X5UzeYEFP1Lg3mPeTJgjLq@mail.gmail.com>

What are you selecting them in? Do you need them separated in R, or in
some GIS? In software I use (Manifold) I would just use the Decompose
operation, but if you want to do this in R you'll need to regenerate
the SpatialLines object by working through the lists of coordinate
matrices that it contains.

It might be worth writing a function to do this for maptools, pretty
easy for lines as long as you don't need to check for actual
"touching" intersections.

Cheers, Mike.




On Mon, Sep 20, 2010 at 10:17 AM, kapo coulibaly <kmcoulib at gmail.com> wrote:
> I created contour a shape file using roughly the following code:
> grd.contour<-contourLines(list.x,list.y,grd.mat,levels=nlevel)
> grd.contour<-ContourLines2SLDF(grd.contour)
> shapef<-tclvalue(tkgetSaveFile(filetypes="{{Shape Files} {.shp}} {{All
> files} *}"))
> writeLinesShape(grd.contour,shapef)
> It works perfectly. The only problem is that all contours on the map with
> the same value are attached to the same record. Basically if a select a
> contour with elevation two, all contours on the map are selected even if
> they are not spatially connected. Is there a way to create a contour shapes
> with independant records even when values are equal.
> Any help is greatly apprecciated.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From kmcoulib at gmail.com  Mon Sep 20 03:00:13 2010
From: kmcoulib at gmail.com (kapo coulibaly)
Date: Sun, 19 Sep 2010 21:00:13 -0400
Subject: [R-sig-Geo] Shapefile Created with R
In-Reply-To: <AANLkTikaS70sWoLgfffYf4X5UzeYEFP1Lg3mPeTJgjLq@mail.gmail.com>
References: <AANLkTinfy+eWkxK4ekPRGwxRmND1ERkGtjzUyzAUwvwh@mail.gmail.com>
	<AANLkTikaS70sWoLgfffYf4X5UzeYEFP1Lg3mPeTJgjLq@mail.gmail.com>
Message-ID: <AANLkTikabQsFBXNuZ=w2SOvCdCU3mLSFTrPJi+5oxJLn@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100919/0fc96594/attachment.pl>

From david.holstius at berkeley.edu  Mon Sep 20 04:54:37 2010
From: david.holstius at berkeley.edu (David Holstius)
Date: Sun, 19 Sep 2010 19:54:37 -0700
Subject: [R-sig-Geo] Sampling within distance X from polyline(s)
Message-ID: <AANLkTik=-JG06HWywWeOwLGJ=kOnqaVgOH5ajKLKTcY7@mail.gmail.com>

Dear all,

What is a good way to spatially sample N points of distance less than
X from a given polyline?

I'm thinking I should construct a polygonal buffer, and then sample
within that, e.g., with spsample(). But how can I construct such a
buffer in R? Can the method be extended to multiple polylines (as in a
SpatialLines object)?

I haven't found anything in the 'spatstat' or 'sp' packages about
using polyline(s) as the basis for sampling, other than for sampling
*on* the polyline(s).

Many thanks for any & all assistance. Many many thanks for for an
example with 'meuse'!

Very best,
David

-- 
David Holstius
PhD Student in Environmental Health Sciences
UC Berkeley School of Public Health


From b.rowlingson at lancaster.ac.uk  Mon Sep 20 11:44:24 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 20 Sep 2010 10:44:24 +0100
Subject: [R-sig-Geo] Shapefile Created with R
In-Reply-To: <AANLkTinfy+eWkxK4ekPRGwxRmND1ERkGtjzUyzAUwvwh@mail.gmail.com>
References: <AANLkTinfy+eWkxK4ekPRGwxRmND1ERkGtjzUyzAUwvwh@mail.gmail.com>
Message-ID: <AANLkTi=Z1y8y5iRvtmyiR3pLhFPTY1Tm+AWprai4MxZ9@mail.gmail.com>

On Mon, Sep 20, 2010 at 1:17 AM, kapo coulibaly <kmcoulib at gmail.com> wrote:
> I created contour a shape file using roughly the following code:
> grd.contour<-contourLines(list.x,list.y,grd.mat,levels=nlevel)
> grd.contour<-ContourLines2SLDF(grd.contour)
> shapef<-tclvalue(tkgetSaveFile(filetypes="{{Shape Files} {.shp}} {{All
> files} *}"))
> writeLinesShape(grd.contour,shapef)
> It works perfectly. The only problem is that all contours on the map with
> the same value are attached to the same record. Basically if a select a
> contour with elevation two, all contours on the map are selected even if
> they are not spatially connected. Is there a way to create a contour shapes
> with independant records even when values are equal.
> Any help is greatly apprecciated.

 The separate lines that you want are separate in the return from
contourLines, and its the ContourLines2SLDF function that puts each
line with the same height together.

 So you want to make a SLDF from the output from contourLines. This is
one of those fiddly jobs that involves me remembering again how to
build these things...

  See the help for SpatialLines, Lines, Line, and
SpatialLinesDataFrame... Or I might have a solution in half an hour...

Barry


From b.rowlingson at lancaster.ac.uk  Mon Sep 20 12:05:37 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 20 Sep 2010 11:05:37 +0100
Subject: [R-sig-Geo] Shapefile Created with R
In-Reply-To: <AANLkTi=Z1y8y5iRvtmyiR3pLhFPTY1Tm+AWprai4MxZ9@mail.gmail.com>
References: <AANLkTinfy+eWkxK4ekPRGwxRmND1ERkGtjzUyzAUwvwh@mail.gmail.com>
	<AANLkTi=Z1y8y5iRvtmyiR3pLhFPTY1Tm+AWprai4MxZ9@mail.gmail.com>
Message-ID: <AANLkTikNDB2CoN_rJ2UmyXtH-uE7T8UZtePcvnU71UD9@mail.gmail.com>

> ?See the help for SpatialLines, Lines, Line, and
> SpatialLinesDataFrame... Or I might have a solution in half an hour...

Bit quicker than half an hour... Try this - its a simpliified version
of ContourLines2SLDF that keeps the level lines separate:

ContourLines2SLDF2 <-
  function (cL, proj4string = CRS(as.character(NA)))
{
  if (length(cL) < 1)
    stop("cL too short")

  df <- data.frame(level = sapply(cL,function(x){x$level}))
  m <- length(cL)
  res <- vector(mode = "list", length = m)
  IDs <- paste("C", 1:m, sep = "_")
  row.names(df) <- IDs
  for (i in 1:m) {
    res[[i]] <- Lines(Line(cbind(cL[[i]]$x,cL[[i]]$y)),
                      ID = IDs[i])
  }
  SL <- SpatialLines(res, proj4string = proj4string)
  res <- SpatialLinesDataFrame(SL, data = df)
  res
}

-- 
blog: http://geospaced.blogspot.com/
web: http://www.maths.lancs.ac.uk/~rowlings
web: http://www.rowlingson.com/
twitter: http://twitter.com/geospacedman
pics: http://www.flickr.com/photos/spacedman


From b.rowlingson at lancaster.ac.uk  Mon Sep 20 12:08:35 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 20 Sep 2010 11:08:35 +0100
Subject: [R-sig-Geo] raster layer to shapefile
In-Reply-To: <4C953EA9.3060107@gmail.com>
References: <4C953EA9.3060107@gmail.com>
Message-ID: <AANLkTim5+Ci2ruO0b92KyS+-dGzpv5LwKoRnCZguAMMS@mail.gmail.com>

On Sat, Sep 18, 2010 at 11:35 PM, Manuel Sp?nola <mspinola10 at gmail.com> wrote:
> ?Dear list members,
>
> How to export a raster layer to a shapefile (or other format) to open this
> last one in QGIS.
> Best,

 shapefiles are vector data (points, lines, polygons) so you
definitely need another format. My current favourite raster format is
GeoTIFF, which the raster package and the rgdal package can probably
handle.

Barry


From ludwig.hilger at ku-eichstaett.de  Mon Sep 20 12:35:33 2010
From: ludwig.hilger at ku-eichstaett.de (Ludwig Hilger)
Date: Mon, 20 Sep 2010 03:35:33 -0700 (PDT)
Subject: [R-sig-Geo] Probably beginner's problem
In-Reply-To: <AANLkTik4K9wYFNa8LNRHY1P5zyH9PO+DBE94XuyipLC_@mail.gmail.com>
References: <1284641954716-5538348.post@n2.nabble.com>
	<AANLkTik4K9wYFNa8LNRHY1P5zyH9PO+DBE94XuyipLC_@mail.gmail.com>
Message-ID: <1284978933532-5549847.post@n2.nabble.com>


Thank you!!!!!!
-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Probably-beginner-s-problem-tp5538348p5549847.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From kmcoulib at gmail.com  Mon Sep 20 15:51:47 2010
From: kmcoulib at gmail.com (kapo coulibaly)
Date: Mon, 20 Sep 2010 09:51:47 -0400
Subject: [R-sig-Geo] Shapefile Created with R
In-Reply-To: <AANLkTikNDB2CoN_rJ2UmyXtH-uE7T8UZtePcvnU71UD9@mail.gmail.com>
References: <AANLkTinfy+eWkxK4ekPRGwxRmND1ERkGtjzUyzAUwvwh@mail.gmail.com>
	<AANLkTi=Z1y8y5iRvtmyiR3pLhFPTY1Tm+AWprai4MxZ9@mail.gmail.com>
	<AANLkTikNDB2CoN_rJ2UmyXtH-uE7T8UZtePcvnU71UD9@mail.gmail.com>
Message-ID: <AANLkTin9rVRP4cBdyOGJ7d0Nc_oe_bozkA29pOsFUSuT@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100920/53837b89/attachment.pl>

From alaios at yahoo.com  Tue Sep 21 09:42:26 2010
From: alaios at yahoo.com (Alaios)
Date: Tue, 21 Sep 2010 00:42:26 -0700 (PDT)
Subject: [R-sig-Geo] Remove spatial errors
Message-ID: <759445.70561.qm@web120117.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100921/f6a942a8/attachment.pl>

From Adrian.Baddeley at csiro.au  Tue Sep 21 09:49:20 2010
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Tue, 21 Sep 2010 15:49:20 +0800
Subject: [R-sig-Geo]  Sampling within distance X from polyline(s)
Message-ID: <57DC18C299094D4299F837570C5DF1C52C92D9AF53@EXWA-MBX01.nexus.csiro.au>


David Holstius <david.holstius at berkeley.edu> writes:

> What is a good way to spatially sample N points of distance less than
> X from a given polyline?

In the 'spatstat' package, if L is an object of class "psp" (representing a set of line segments) then you can do

       D <- dilation(L, X)     
       P <- runifpoint(N, D)  

The P is your point pattern.
Here 'D' is the morphological dilation of L by distance X (what geographers call a "buffer"). By default this is computed as a pixel image. To get a polygonal approximation you set spatstat.options(gpclib=TRUE)

....
Prof Adrian Baddeley (UWA/CSIRO)
CSIRO Mathematics, Informatics & Statistics
Leeuwin Centre, 65 Brockway Road, Floreat WA 6014, Australia
Tel: 08 9333 6177 | Fax: 08 9333 6121 | Mob: 0410 447 821


From martin_brandt at gmx.net  Tue Sep 21 09:49:43 2010
From: martin_brandt at gmx.net (Martin)
Date: Tue, 21 Sep 2010 00:49:43 -0700 (PDT)
Subject: [R-sig-Geo] questions on RasterStack/Brick
Message-ID: <1285055383938-5553580.post@n2.nabble.com>


Dear all,

I have some questions concerning stacks and bricks from the raster package.

1. is it possible to flip the whole stack vertically? I get an error when I
use the 'flip' function..

2. is it possible to use the calc function (or something else) on a stack to
get a raster, which shows the regression slope of the pixels through the
stack (treated like a kind of time series)? And is it possible to compute a
correlation between two stacks of the same dimensions?

greetings,
Martin


-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/questions-on-RasterStack-Brick-tp5553580p5553580.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From ervan.rutishauser at cirad.fr  Tue Sep 21 11:29:37 2010
From: ervan.rutishauser at cirad.fr (Ervan Rutishauser)
Date: Tue, 21 Sep 2010 11:29:37 +0200
Subject: [R-sig-Geo] Overlay and spatialgrid
Message-ID: <000301cb596f$83022970$89067c50$@rutishauser@cirad.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100921/5b3ab401/attachment.pl>

From gianni.lavaredo at gmail.com  Tue Sep 21 11:33:43 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Tue, 21 Sep 2010 11:33:43 +0200
Subject: [R-sig-Geo] help to save a "SpatialPixelsDataFrame" in several
	image format via writeGDAL
Message-ID: <AANLkTinn7Fij0gDOdvrs+SOmO6a9NJit0-rzXOTKCiFf@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100921/c4aa20fd/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Tue Sep 21 12:05:16 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 21 Sep 2010 11:05:16 +0100
Subject: [R-sig-Geo] help to save a "SpatialPixelsDataFrame" in several
 image format via writeGDAL
In-Reply-To: <AANLkTinn7Fij0gDOdvrs+SOmO6a9NJit0-rzXOTKCiFf@mail.gmail.com>
References: <AANLkTinn7Fij0gDOdvrs+SOmO6a9NJit0-rzXOTKCiFf@mail.gmail.com>
Message-ID: <AANLkTi=A+wc6dXqtQ0hfE3On=weKjxfCGEHHyZTfRnek@mail.gmail.com>

On Tue, Sep 21, 2010 at 10:33 AM, gianni lavaredo
<gianni.lavaredo at gmail.com> wrote:
> Dear Reseachers,
>
> I wish to save a "SpatialPixelsDataFrame" in several format (ascii, tiff,
> jpg, ect ect) using writeGDAL, but I don't understand my error (it's the
> first time I use this function)
>
>
> str(grid.aggr)
> Formal class 'SpatialPixelsDataFrame' [package "sp"] with 7 slots
> ?..@ data ? ? ? :'data.frame': 10816 obs. of ?2 variables:
> ?.. ..$ ID: Factor w/ 10816 levels "1","2","3","4",..: 1 2 3 4 5 6 7 8 9 10
> ...
> ?.. ..$ H : num [1:10816] 0.298 0.385 0.378 0.539 0.372 ...

>> writeGDAL(grid.aggr,tf, drivername="GTiff", type="Byte", options=NULL)
> *Errore in create2GDAL(dataset = dataset, drivername = drivername, type =
> type, : Numeric bands required*
>
>
> thanks in advance and sorry for desturb

Error is "Numeric bands required" and at least one of your bands
("ID") is a Factor - you cant have factors (or character variables) in
GTiffs. Convert them or drop them:

 >    m = SpatialPixelsDataFrame(points = meuse.grid[c("x", "y")],
data = meuse.grid)
 >   writeGDAL(m,"junk.tiff",drivername="GTiff", type="Byte", options=NULL)

Error in create2GDAL(dataset = dataset, drivername = drivername, type
= type,  :
  Numeric bands required

 - so lets convert the ffreq variable to numeric:

 > m$ffreq=as.numeric(m$ffreq)
 > writeGDAL(m,"junk.tiff",drivername="GTiff", type="Byte", options=NULL)

 - and that works.

Barry


-- 
blog: http://geospaced.blogspot.com/
web: http://www.maths.lancs.ac.uk/~rowlings
web: http://www.rowlingson.com/
twitter: http://twitter.com/geospacedman
pics: http://www.flickr.com/photos/spacedman


From nikhil.list at gmail.com  Tue Sep 21 13:38:14 2010
From: nikhil.list at gmail.com (Nikhil Kaza)
Date: Tue, 21 Sep 2010 07:38:14 -0400
Subject: [R-sig-Geo] questions on RasterStack/Brick
In-Reply-To: <1285055383938-5553580.post@n2.nabble.com>
References: <1285055383938-5553580.post@n2.nabble.com>
Message-ID: <D1DC5312-C5D0-4886-86D0-3C0142EF1001@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100921/5bb40401/attachment.pl>

From alaios at yahoo.com  Tue Sep 21 14:44:34 2010
From: alaios at yahoo.com (Alaios)
Date: Tue, 21 Sep 2010 05:44:34 -0700 (PDT)
Subject: [R-sig-Geo] How resolution works in raster packages?
Message-ID: <615412.29836.qm@web120104.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100921/4ec65604/attachment.pl>

From Jason.Gasper at noaa.gov  Tue Sep 21 16:18:26 2010
From: Jason.Gasper at noaa.gov (Jason.Gasper at noaa.gov)
Date: Tue, 21 Sep 2010 06:18:26 -0800
Subject: [R-sig-Geo] Open source GIS and R
Message-ID: <29f512a2df.2a2df29f51@noaa.gov>

Greetings, 
I don't mean to hijack this thread, but do the Grass users have a 
suggestion as to the best way to learn the program? The manual is 
somewhat helpful, but there must be something out there a little more 
user friendly. 
Thanks

----- Original Message -----
From: stephen sefick <ssefick at gmail.com>
Date: Friday, September 17, 2010 3:58 am
Subject: Re: [R-sig-Geo] Open source GIS and R

> I use GRASS and R on a more or less daily basis.  They play nicely
> together.  The great strength of GRASS is you have the ability to use
> shell scripts (with all the wonders of the *nix environment) once you
> figure out the proper work flow (you can also run commands from 
within
> R although I haven't tried this).  Set the computer to work, and go
> home and have a beer while you are getting work done.   FYI the GRASS
> team has just released the new stable version 6.4.1 (I think).
> HTH,
> 
> 
> Stephen
> 2010/9/17 Jos? Miguel Barrios <jmbarriosg at gmail.com>:
> > Manuel,
> >
> > Since you are interested in landscape ecology, you may want to 
> take a look
> > at the features present in r.le, a set of programs available in 
> GRASS. ?Take
> > a look at this document:
> > http://grass.osgeo.org/gdp/landscape/r_le_manual5.pdf
> >
> > Cheers,
> >
> > Jos? Miguel
> >
> > 2010/9/17 Manuel Sp?nola <mspinola10 at gmail.com>
> >
> >> ?Dear list members,
> >>
> >> I am an ecologist interested in spatial and landscape ecology 
> and a user of
> >> ArcView 3.3 with little experience in ArcGis but I would like 
> to migrate to
> >> an open source GIS with an interface with R.
> >> I know that there are several options: QGIS, SAGA, GRASS, Illwis.
> >>
> >> What will be the best option of these or other alternatives?
> >>
> >> Best,
> >>
> >> Manuel
> >>
> >> --
> >> Manuel Sp?nola, Ph.D.
> >> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> >> Universidad Nacional
> >> Apartado 1350-3000
> >> Heredia
> >> COSTA RICA
> >> mspinola at una.ac.cr
> >> mspinola10 at gmail.com
> >> Tel?fono: (506) 2277-3598
> >> Fax: (506) 2237-7036
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at stat.math.ethz.ch
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>
> >
> > ? ? ? ?[[alternative HTML version deleted]]
> >
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
> 
> 
> 
> -- 
> Stephen Sefick
> ____________________________________
> | Auburn University? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
> | Department of Biological Sciences? ? ? ? ?? |
> | 331 Funchess Hall? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? |
> | Auburn, Alabama? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
> | 36849? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? |
> |___________________________________|
> | sas0025 at auburn.edu? ? ? ? ? ? ? ? ? ? ? ? ? ?? |
> | http://www.auburn.edu/~sas0025? ? ? ? ? ?? |
> |___________________________________|
> 
> Let's not spend our time and resources thinking about things that are
> so little or so large that all they really do for us is puff us up 
and
> make us feel like gods.? We are mammals, and have not exhausted the
> annoying little problems of being mammals.
> 
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? -K. Mullis
> 
> "A big computer, a complex algorithm and a long time does not 
> equal science."
> 
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? -Robert Gentleman
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From tech_dev at wildintellect.com  Tue Sep 21 18:06:10 2010
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Tue, 21 Sep 2010 09:06:10 -0700
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <29f512a2df.2a2df29f51@noaa.gov>
References: <29f512a2df.2a2df29f51@noaa.gov>
Message-ID: <4C98D7F2.6030808@wildintellect.com>

There is a book written by several of the projects leads, one of which
is a university professor who teaches GRASS.
http://www.grassbook.org/

Best advice, learn GIS concepts using Arc or QGIS or something similar
and then jump into GRASS, R, Spatial Databases.

FYI, QGIS has a GRASS plugin which makes it easier to start using GRASS
for the first time.

Enjoy,
Alex

On 09/21/2010 07:18 AM, Jason.Gasper at noaa.gov wrote:
> Greetings, 
> I don't mean to hijack this thread, but do the Grass users have a 
> suggestion as to the best way to learn the program? The manual is 
> somewhat helpful, but there must be something out there a little more 
> user friendly. 
> Thanks
> 
> ----- Original Message -----
> From: stephen sefick <ssefick at gmail.com>
> Date: Friday, September 17, 2010 3:58 am
> Subject: Re: [R-sig-Geo] Open source GIS and R
> 
>> I use GRASS and R on a more or less daily basis.  They play nicely
>> together.  The great strength of GRASS is you have the ability to use
>> shell scripts (with all the wonders of the *nix environment) once you
>> figure out the proper work flow (you can also run commands from 
> within
>> R although I haven't tried this).  Set the computer to work, and go
>> home and have a beer while you are getting work done.   FYI the GRASS
>> team has just released the new stable version 6.4.1 (I think).
>> HTH,
>>
>>
>> Stephen
>> 2010/9/17 Jos? Miguel Barrios <jmbarriosg at gmail.com>:
>>> Manuel,
>>>
>>> Since you are interested in landscape ecology, you may want to 
>> take a look
>>> at the features present in r.le, a set of programs available in 
>> GRASS.  Take
>>> a look at this document:
>>> http://grass.osgeo.org/gdp/landscape/r_le_manual5.pdf
>>>
>>> Cheers,
>>>
>>> Jos? Miguel
>>>
>>> 2010/9/17 Manuel Sp?nola <mspinola10 at gmail.com>
>>>
>>>>  Dear list members,
>>>>
>>>> I am an ecologist interested in spatial and landscape ecology 
>> and a user of
>>>> ArcView 3.3 with little experience in ArcGis but I would like 
>> to migrate to
>>>> an open source GIS with an interface with R.
>>>> I know that there are several options: QGIS, SAGA, GRASS, Illwis.
>>>>
>>>> What will be the best option of these or other alternatives?
>>>>
>>>> Best,
>>>>
>>>> Manuel
>>>>
>>>> --
>>>> Manuel Sp?nola, Ph.D.
>>>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
>>>> Universidad Nacional
>>>> Apartado 1350-3000
>>>> Heredia
>>>> COSTA RICA
>>>> mspinola at una.ac.cr
>>>> mspinola10 at gmail.com
>>>> Tel?fono: (506) 2277-3598
>>>> Fax: (506) 2237-7036


From r.hijmans at gmail.com  Tue Sep 21 18:15:38 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 21 Sep 2010 09:15:38 -0700
Subject: [R-sig-Geo] Overlay and spatialgrid
In-Reply-To: <-5223088319453980165@unknownmsgid>
References: <-5223088319453980165@unknownmsgid>
Message-ID: <AANLkTimUBD13WcDoFEo2czaGCoOtwzREU8wTr6h6n3FR@mail.gmail.com>

Ervan,

You can do something like

library(raster)
r <- raster(Grid2)
r <- pointsToRaster(r, xy=temp[, c('x', 'y')], values=temp[,'z'], fun=max)

plot(r)
x <- as(r, 'SpatialGridDataFrame')


On Tue, Sep 21, 2010 at 2:29 AM, Ervan Rutishauser
<ervan.rutishauser at cirad.fr> wrote:
> Dear all,
>
> I wonder if it is possible to compute a statistic (mean, max) of a
> SpatialPointsDataFrame object using a SpatialGrid.
> I tried it that way, but did not get what I wanted:
>
> # 1. Create a grid bonding the region studied
> Grid<-GridTopology(c(284600,580550),c(5,5),c(600,850))
> Grid2<-SpatialGrid(Grid)
>
> # 2. An example of my data
>> head(temp)
> ? ? ? ? x ? ? ? ? ? ? ? ? ? ? y ? ? ? ? ? z ? R ? G ? B ? I
> 1 284999.1 583538.0 ?9.76 11 10 ?8 65
> 2 284998.2 583537.1 ?6.40 10 ?4 11 69
> 3 284999.9 583536.1 28.70 ?8 ?8 ?4 75
> 4 284996.7 583535.9 12.55 ?4 ?3 ?0 63
> 5 284996.8 583533.8 ?7.64 16 ?6 10 75
> 6 284997.3 583532.5 26.46 11 ?9 10 74
>
> coord<-coordinates(matrix(c(temp$x,temp$y),ncol=2))
> Z<- data.frame(Z=temp$z,I=temp$I)
> lidar<-SpatialPointsDataFrame(coord,Z)
>
> test<-overlay(lidar, Para_gr) # I would like to compute the maximum of z in
> each cell of the grid.
>
> Thank you for any help.
> All the best,
> Ervan
> ______________________________________________________________________
> Ervan Rutishauser
> CIRAD - UMR AMAP
> PS1-Bd de la Lironde
> 34398 Montpellier cedex 5
> phone: 04.67.61.58.00
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From r.hijmans at gmail.com  Tue Sep 21 18:28:37 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 21 Sep 2010 09:28:37 -0700
Subject: [R-sig-Geo] How resolution works in raster packages?
In-Reply-To: <615412.29836.qm@web120104.mail.ne1.yahoo.com>
References: <615412.29836.qm@web120104.mail.ne1.yahoo.com>
Message-ID: <AANLkTikKOiUkgp6pxpZKt0gVhqkA0YmG59wMNwhbQY1o@mail.gmail.com>

Alex, It depends. If you change the resolution directly, with "res",
you will loose the cell values because it affects the number of rows
and columns. This is not the case if you change it indirectly via
"extent" (because in that case the number of cells stays the same).
You can also use "aggregate" or "disaggregate" to change to resolution
and compute new cell values.  Robert

On Tue, Sep 21, 2010 at 5:44 AM, Alaios <alaios at yahoo.com> wrote:
> Hello everyone,
> I would like to ask you something concerning how resolution works in raster
> layers.
> Lets say that I have a raster layer of 100x100 cells. How resolution changes the
> way data are stored in this matrix?
> Could you please shed some light in this?
>
> I would like to thank you in advance for your help
> Best Regards
> Alex
>
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Thomas.Adams at noaa.gov  Tue Sep 21 18:36:54 2010
From: Thomas.Adams at noaa.gov (Thomas Adams)
Date: Tue, 21 Sep 2010 12:36:54 -0400
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <4C98D7F2.6030808@wildintellect.com>
References: <29f512a2df.2a2df29f51@noaa.gov>
	<4C98D7F2.6030808@wildintellect.com>
Message-ID: <4C98DF26.7000300@noaa.gov>

  Jason,

I agree completely that obtaining the GRASS GIS book 
(http://www.grassbook.org/ ) is the way to go. I don't agree that it's 
necessary to learn GIS concepts first using ArcGIS or QGIS. There are 
many books on R, including "Applied Spatial Data Analysis with R".

Tom

On 9/21/10 12:06 PM, Alex Mandel wrote:
> There is a book written by several of the projects leads, one of which
> is a university professor who teaches GRASS.
> http://www.grassbook.org/
>
> Best advice, learn GIS concepts using Arc or QGIS or something similar
> and then jump into GRASS, R, Spatial Databases.
>
> FYI, QGIS has a GRASS plugin which makes it easier to start using GRASS
> for the first time.
>
> Enjoy,
> Alex
>
> On 09/21/2010 07:18 AM, Jason.Gasper at noaa.gov wrote:
>> Greetings,
>> I don't mean to hijack this thread, but do the Grass users have a
>> suggestion as to the best way to learn the program? The manual is
>> somewhat helpful, but there must be something out there a little more
>> user friendly.
>> Thanks
>>
>> ----- Original Message -----
>> From: stephen sefick<ssefick at gmail.com>
>> Date: Friday, September 17, 2010 3:58 am
>> Subject: Re: [R-sig-Geo] Open source GIS and R
>>
>>> I use GRASS and R on a more or less daily basis.  They play nicely
>>> together.  The great strength of GRASS is you have the ability to use
>>> shell scripts (with all the wonders of the *nix environment) once you
>>> figure out the proper work flow (you can also run commands from
>> within
>>> R although I haven't tried this).  Set the computer to work, and go
>>> home and have a beer while you are getting work done.   FYI the GRASS
>>> team has just released the new stable version 6.4.1 (I think).
>>> HTH,
>>>
>>>
>>> Stephen
>>> 2010/9/17 Jos? Miguel Barrios<jmbarriosg at gmail.com>:
>>>> Manuel,
>>>>
>>>> Since you are interested in landscape ecology, you may want to
>>> take a look
>>>> at the features present in r.le, a set of programs available in
>>> GRASS.  Take
>>>> a look at this document:
>>>> http://grass.osgeo.org/gdp/landscape/r_le_manual5.pdf
>>>>
>>>> Cheers,
>>>>
>>>> Jos? Miguel
>>>>
>>>> 2010/9/17 Manuel Sp?nola<mspinola10 at gmail.com>
>>>>
>>>>>   Dear list members,
>>>>>
>>>>> I am an ecologist interested in spatial and landscape ecology
>>> and a user of
>>>>> ArcView 3.3 with little experience in ArcGis but I would like
>>> to migrate to
>>>>> an open source GIS with an interface with R.
>>>>> I know that there are several options: QGIS, SAGA, GRASS, Illwis.
>>>>>
>>>>> What will be the best option of these or other alternatives?
>>>>>
>>>>> Best,
>>>>>
>>>>> Manuel
>>>>>
>>>>> --
>>>>> Manuel Sp?nola, Ph.D.
>>>>> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
>>>>> Universidad Nacional
>>>>> Apartado 1350-3000
>>>>> Heredia
>>>>> COSTA RICA
>>>>> mspinola at una.ac.cr
>>>>> mspinola10 at gmail.com
>>>>> Tel?fono: (506) 2277-3598
>>>>> Fax: (506) 2237-7036
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Thomas E Adams
National Weather Service
Ohio River Forecast Center
1901 South State Route 134
Wilmington, OH 45177

EMAIL:	thomas.adams at noaa.gov

VOICE:	937-383-0528
FAX:	937-383-0033


From alobolistas at gmail.com  Tue Sep 21 19:32:45 2010
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 21 Sep 2010 19:32:45 +0200
Subject: [R-sig-Geo] Open source GIS and R
In-Reply-To: <4C934D72.6060709@gmail.com>
References: <4C934D72.6060709@gmail.com>
Message-ID: <AANLkTim=zu1m+v+oJ2F0QOAwMAr9ckHvfygNaCHCdFmZ@mail.gmail.com>

Hola  Manuel,

May be this could be of some help:
http://2010.foss4g.org/papers/4181.pdf

All 4 programs you mention are very good, difficult to provide more
advice unless
you define your particular application better. In any case, I bet you will
end up using several packages. After all, you cannot make a Louis XIV chair
with just a hammer and a screwdriver!

Suerte!

Agus

2010/9/17 Manuel Sp?nola <mspinola10 at gmail.com>:
> ?Dear list members,
>
> I am an ecologist interested in spatial and landscape ecology and a user of
> ArcView 3.3 with little experience in ArcGis but I would like to migrate to
> an open source GIS with an interface with R.
> I know that there are several options: QGIS, SAGA, GRASS, Illwis.
>
> What will be the best option of these or other alternatives?
>
> Best,
>
> Manuel
>
> --
> Manuel Sp?nola, Ph.D.
> Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
> Universidad Nacional
> Apartado 1350-3000
> Heredia
> COSTA RICA
> mspinola at una.ac.cr
> mspinola10 at gmail.com
> Tel?fono: (506) 2277-3598
> Fax: (506) 2237-7036
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From alobolistas at gmail.com  Tue Sep 21 19:34:35 2010
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 21 Sep 2010 19:34:35 +0200
Subject: [R-sig-Geo] Problem with spTransform en +towgs84 ?
Message-ID: <AANLkTik4fxrqxGLNWNAyRkSZWq34MJnoDZKG2exiYC6B@mail.gmail.com>

Hi!

Might it be that spTransform is not taking the +towgs84 string into account?
I have:
> proj4string(polsfl1_1000)
[1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs +towgs84=-87,-98,-121"

and do:
> polsfl1_1000lonlat <- spTransform(polsfl1_1000, CRS("+proj=longlat +datum=WGS84"))
> writeOGR(polsfl1_1000,  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000",layer="polsfl1_1000", driver="ESRI Shapefile")
> writeOGR(polsfl1_1000lonlat,  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000lonlat.kml",layer="polsfl1_1000", driver="KML")

Then, in QGIS, with reprojection on the fly activated, the 2 vectors
are not coincident.
Instead, a polsfl1_1000lonlatv2 made from the original polsfl1_1000
shapefile in QGIS, is coincident.

As there are 2 different programs here, I'm not positive of my diagnostic. But
I think there is a problem with spTransform

Thanks

Agus


From tom.richardson at bristol.ac.uk  Tue Sep 21 21:00:10 2010
From: tom.richardson at bristol.ac.uk (Tom_R)
Date: Tue, 21 Sep 2010 12:00:10 -0700 (PDT)
Subject: [R-sig-Geo] qqplot.ppm
Message-ID: <1285095610469-5555735.post@n2.nabble.com>


Hi List,
I am attempting to obtain a qqplot for a ppm  (point Poisson model) object.
The object is a Geyer model ('Hard0'). The 'Saturation' and 'Interaction
range' parameters for the Geyer model are obtained   using profile
log-likelihood ('profilepl').

I am using a spatial covariate (Z) which is a pixel image (dens_all). This
covariate is causing problems for qqplot.ppm. I am getting the following
error from qqplot.ppm; "ERROR : Error in rmhResolveExpansion(win, control,
covims, "covariate") : 
  Cannot expand the simulation window, because the covariate images do not
cover the expanded window". 

My code is below.

So, dear list, any suggestions on how to correct the qqplot.ppm error will
be most appreciated!!!
Many thanks in advance,
Tom Richardson


##########################################################
##########################################################

for (i in 1:length(unique(colony)))
  {

  for (j in 1:  (length(unique(photo[colony==i])))  )	## '-1' prevents any
crossover between 2 colonies
 	{

wind       <- owin(c(xmin , xmax ), c(ymin ,ymax  ) )	## a window 
points     <- ppp(x=x[colony==i & photo==j],y=y[colony==i & photo==j], 
window= wind)	## Point pattern for a single photo
all_points <- ppp(x=x[colony==i], y=y[colony==i],  window= wind)  ## A ppp
for all photos overlaid

## intensity field; calculated over  all photos superimposed
dens_all    <- as.im(density(all_points, kernel = "epanechnikov",correction
= c("translate")))

## use profile log-likelihood to select irregular parameters for the Geyer
model:
s                  <- expand.grid( r=seq(1,3, by=0.25), sat=seq(1,3,by=1))	
pg                 <- profilepl(s, Geyer, points)		
GAMMA 		   <- exp(pg$fit[6]$fitin$coefs[2])		#Gamma > 1: clustering, <1:
regularity
INTERACTION_RANGE  <- pg$fit$interaction$par$r  
SATURATION	   <- pg$fit$interaction$par$sat

## Create a non-stationary  model of the point process with the pixel image,
'dens_all' as a covariate.
Hard0      <- ppm(points, ~ polynom(x,y,2) + Z, covariates=list(Z=dens_all),
Geyer(INTERACTION_RANGE ,SATURATION))

## Diagnostic plots for the model; 
diagnose.ppm(Hard0)
qqplot.ppm(Hard0, fast=TRUE, plot.it=FALSE, nsim=50)	        ## Now check
the interpoint interaction 

## loops finish
        }
 }

##########################################################
##########################################################
-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/qqplot-ppm-tp5555735p5555735.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Tue Sep 21 21:48:46 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Tue, 21 Sep 2010 12:48:46 -0700
Subject: [R-sig-Geo] questions on RasterStack/Brick
In-Reply-To: <1285055383938-5553580.post@n2.nabble.com>
References: <1285055383938-5553580.post@n2.nabble.com>
Message-ID: <AANLkTi=3=VVyC26hu5vtBgekbfg_vTZ6tZSy8m7HO-HM@mail.gmail.com>

On Tue, Sep 21, 2010 at 12:49 AM, Martin <martin_brandt at gmx.net> wrote:
>
> Dear all,
>
> I have some questions concerning stacks and bricks from the raster package.
>
> 1. is it possible to flip the whole stack vertically? I get an error when I
> use the 'flip' function..
>

You can use what Nikhil send you or perhaps (for objects that are not
too big), with RasterStack s

x <- as(s, 'SpatialGridDataFrame')
x <- flipVertical(x)
s2 <- stack(x)  # or   b <- brick(x)

or get raster 1.5.9 from R-Forge in a couple of hours and then do

x <- flip(s, direction='y')


> 2. is it possible to use the calc function (or something else) on a stack to
> get a raster, which shows the regression slope of the pixels through the
> stack (treated like a kind of time series)?

You can do things like this:

myfun = function(v, ...) { d <- data.frame(x=1:length(v), y=v);
lm(y~x, data=d)$coefficients[2] }

a <- calc(stack, fun=myfun)


> And is it possible to compute a
> correlation between two stacks of the same dimensions?

Not directly, I think, but if you have two stacks, s1, and s2, and
some patience, you can do:

 r <- raster(s1)
for (i in 1:ncell(r)) {
    r[i] <- cor(as.vector(cellValues(s1, i)), as.vector(cellValues(s2, i)))
}


Robert


> greetings,
> Martin
>
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/questions-on-RasterStack-Brick-tp5553580p5553580.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Roger.Bivand at nhh.no  Tue Sep 21 22:00:25 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 21 Sep 2010 22:00:25 +0200 (CEST)
Subject: [R-sig-Geo] Problem with spTransform en +towgs84 ?
In-Reply-To: <AANLkTik4fxrqxGLNWNAyRkSZWq34MJnoDZKG2exiYC6B@mail.gmail.com>
References: <AANLkTik4fxrqxGLNWNAyRkSZWq34MJnoDZKG2exiYC6B@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1009212157020.3513@reclus.nhh.no>

On Tue, 21 Sep 2010, Agustin Lobo wrote:

> Hi!
>
> Might it be that spTransform is not taking the +towgs84 string into account?
> I have:
>> proj4string(polsfl1_1000)
> [1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs +towgs84=-87,-98,-121"
>
> and do:
>> polsfl1_1000lonlat <- spTransform(polsfl1_1000, CRS("+proj=longlat +datum=WGS84"))
>> writeOGR(polsfl1_1000,  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000",layer="polsfl1_1000", driver="ESRI Shapefile")
>> writeOGR(polsfl1_1000lonlat,  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000lonlat.kml",layer="polsfl1_1000", driver="KML")
>
> Then, in QGIS, with reprojection on the fly activated, the 2 vectors
> are not coincident.
> Instead, a polsfl1_1000lonlatv2 made from the original polsfl1_1000
> shapefile in QGIS, is coincident.
>
> As there are 2 different programs here, I'm not positive of my diagnostic. But
> I think there is a problem with spTransform

Could you please provide links to screen shots and input and output data 
objects, as well as sessionInfo() output? Which OS is involved, and are 
spTransform() and QGIS using the same PROJ.4 library and metadata. Is your 
input actually:

CRS("+init=epsg:23031 +towgs84=-84,-107,-120")

with the three-parameter datum shift from:

http://www.asprs.org/resources/GRIDS/

of July 2000? Where does yours come from? The way QGIS treats the *.prj 
file is also of interest.

Roger

>
> Thanks
>
> Agus
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Paul.Story at daff.gov.au  Wed Sep 22 02:45:41 2010
From: Paul.Story at daff.gov.au (Story, Paul)
Date: Wed, 22 Sep 2010 10:45:41 +1000
Subject: [R-sig-Geo] unsubscribe [SEC=UNCLASSIFIED]
Message-ID: <992ACCE01A51114BB0258DC52F76B7A607A51E05@ACT001CL03EX03.agdaff.gov.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/1018a352/attachment.pl>

From martin_brandt at gmx.net  Wed Sep 22 08:50:46 2010
From: martin_brandt at gmx.net (Martin)
Date: Tue, 21 Sep 2010 23:50:46 -0700 (PDT)
Subject: [R-sig-Geo] questions on RasterStack/Brick
In-Reply-To: <AANLkTi=3=VVyC26hu5vtBgekbfg_vTZ6tZSy8m7HO-HM@mail.gmail.com>
References: <1285055383938-5553580.post@n2.nabble.com>
	<AANLkTi=3=VVyC26hu5vtBgekbfg_vTZ6tZSy8m7HO-HM@mail.gmail.com>
Message-ID: <1285138246897-5557858.post@n2.nabble.com>


Dear Nikhil and dear Robert,

thanks a lot for your help.
I first tried Nikhils function, it works well and helps me to learn how
these functions work.
Good to see that flipping bricks will be implemented in the new raster
package. The raster package is a great piece of work. It makes all those
expensive GIS systems almost useless for me, it's exactly what i was looking
for for so many years..

I also tried the regression and correlation code and it works well. a huge
thanks!

Martin
-- 
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/questions-on-RasterStack-Brick-tp5553580p5557858.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From villers.alexandre at gmail.com  Wed Sep 22 11:27:10 2010
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Wed, 22 Sep 2010 12:27:10 +0300
Subject: [R-sig-Geo] Snow depth raster for Finland
Message-ID: <4C99CBEE.6050608@gmail.com>

Dear All,

Does anyone of you know where I could find raster images of snow depth 
over Finland, for the past 30 years ? (!)
Or at least the raw data so that I could try computing those rasters ?


Best regards


Alex

-- 
Alexandre Villers, PhD.
Spatial Ecology & Population Dynamics
Section of Ecology
Department of Biology
University of Turku
FIN-20014 Turku
Finland

@mail: alexandre.villers at utu.fi

Skype You can skype me (but think of using Ekiga instead !) 
<skype:aquila06?call>


*Use open source and free softwares*
<http://cran.r-project.org/> <http://grass.itc.it/> 
<http://www.qgis.org/> <http://fr.openoffice.org/> 
<http://www.mozilla-europe.org/fr/> <http://www.mozilla-europe.org/fr/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/5af0f3cf/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Skypelogo.jpg
Type: image/jpeg
Size: 5395 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/5af0f3cf/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Rlogo.jpg
Type: image/jpeg
Size: 1753 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/5af0f3cf/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GRASSlogo.png
Type: image/png
Size: 3277 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/5af0f3cf/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: QGIS.png
Type: image/png
Size: 4144 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/5af0f3cf/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OOlogo.gif
Type: image/gif
Size: 4246 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/5af0f3cf/attachment.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TBlogo.jpg
Type: image/jpeg
Size: 1385 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/5af0f3cf/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: FFlogo.jpg
Type: image/jpeg
Size: 1686 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/5af0f3cf/attachment-0003.jpg>

From carson.farmer at gmail.com  Wed Sep 22 11:32:15 2010
From: carson.farmer at gmail.com (Carson Farmer)
Date: Wed, 22 Sep 2010 10:32:15 +0100
Subject: [R-sig-Geo] Snow depth raster for Finland
In-Reply-To: <4C99CBEE.6050608@gmail.com>
References: <4C99CBEE.6050608@gmail.com>
Message-ID: <AANLkTin_cO-JJ3BeRvQyMK+GvGp-TB44idqe5gu1iBVu@mail.gmail.com>

Hi Alex,

The National Snow and Ice Data Centre has tonnes of data for snow, swe (snow
water equivalent), and ice for most of the northern hemisphere:
http://nsidc.org/index.html

In particular, have a look at the Global Monthly EASE-Grid datasets. I think
the go as far back as the 70s, though there is likely some playing around to
do to get things playing together nicely. I've used the Passive
Microwave remotely sensed data for swe research in the past.

Hope that helps,

Carson

On 22 September 2010 10:27, Alexandre Villers
<villers.alexandre at gmail.com>wrote:

>  Dear All,
>
> Does anyone of you know where I could find raster images of snow depth over
> Finland, for the past 30 years ? (!)
> Or at least the raw data so that I could try computing those rasters ?
>
>
> Best regards
>
>
> Alex
>
> --
>  Alexandre Villers, PhD.
> Spatial Ecology & Population Dynamics
> Section of Ecology
> Department of Biology
> University of Turku
> FIN-20014 Turku
> Finland
>
> @mail: alexandre.villers at utu.fi
>
> Skype [image: You can skype me (but think of using Ekiga instead !)]
> *Use open source and free softwares*
>  <http://cran.r-project.org/> <http://grass.itc.it/><http://www.qgis.org/>
> <http://fr.openoffice.org/> <http://www.mozilla-europe.org/fr/><http://www.mozilla-europe.org/fr/>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>


-- 
Carson J. Q. Farmer
ISSP Doctoral Fellow
National Centre for Geocomputation
National University of Ireland, Maynooth,
http://www.carsonfarmer.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/3d3294e3/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 4246 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/3d3294e3/attachment.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 1385 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/3d3294e3/attachment.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 5395 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/3d3294e3/attachment-0001.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 1686 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/3d3294e3/attachment-0002.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 1753 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/3d3294e3/attachment-0003.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 3277 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/3d3294e3/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 4144 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/3d3294e3/attachment-0001.png>

From kmcoulib at gmail.com  Wed Sep 22 20:26:37 2010
From: kmcoulib at gmail.com (kapo coulibaly)
Date: Wed, 22 Sep 2010 14:26:37 -0400
Subject: [R-sig-Geo] How top split a polygon
Message-ID: <AANLkTinsp3WB+Xw746wfjeo=X37XPREVjXj+F+LGHmgR@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100922/66995b8e/attachment.pl>

From alobolistas at gmail.com  Wed Sep 22 22:13:06 2010
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed, 22 Sep 2010 22:13:06 +0200
Subject: [R-sig-Geo] Problem with spTransform en +towgs84 ?
In-Reply-To: <alpine.LRH.2.00.1009212157020.3513@reclus.nhh.no>
References: <AANLkTik4fxrqxGLNWNAyRkSZWq34MJnoDZKG2exiYC6B@mail.gmail.com>
	<alpine.LRH.2.00.1009212157020.3513@reclus.nhh.no>
Message-ID: <AANLkTi=Ejc=kh4Riv-3XG2Jh5zDxg8WEZsbG3D5QXoJp@mail.gmail.com>

Roger,

I apologize for not including version details etc, here they are:
Loading required package: rgdal
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.7.2, released 2010/04/23
Path to GDAL shared files: /usr/share/gdal17
Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009
Path to PROJ.4 shared files: (autodetected)

> version
               _
platform       i486-pc-linux-gnu
arch           i486
os             linux-gnu
system         i486, linux-gnu
status
major          2
minor          11.1
year           2010
month          05
day            31
svn rev        52157
language       R
version.string R version 2.11.1 (2010-05-31)

Also, I've put SPDF polsfl1_1000 here:
https://sites.google.com/site/openfiles2/home/polsfl1_1000.rda?attredirects=0&d=1

Finally, the towgs84 parameters come from the last paragraph in the pdf
for The Kingdom of Spain (July) listed in the page you mention. (BTW,
I recall having seen
another list with slightly different parameters but cannot find it anymore)
I had to put
the same 3 parameters for the definition of the projection in QGIS
(which qgis does not
do by default, had to define a custom projection to get the datum
shift working). The towgs
parameters are not in the proj file of the shapefile set, at least not
in the ones created
by writeOGR.

Hope this helps to clarify the problem. I'm still not certain that
spTransform is doing anything wrong.

Thanks for your help,

Agus


2010/9/21 Roger Bivand <Roger.Bivand at nhh.no>:
> On Tue, 21 Sep 2010, Agustin Lobo wrote:
>
>> Hi!
>>
>> Might it be that spTransform is not taking the +towgs84 string into
>> account?
>> I have:
>>>
>>> proj4string(polsfl1_1000)
>>
>> [1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>> +towgs84=-87,-98,-121"
>>
>> and do:
>>>
>>> polsfl1_1000lonlat <- spTransform(polsfl1_1000, CRS("+proj=longlat
>>> +datum=WGS84"))
>>> writeOGR(polsfl1_1000,
>>> ?dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000",layer="polsfl1_1000",
>>> driver="ESRI Shapefile")
>>> writeOGR(polsfl1_1000lonlat,
>>> ?dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000lonlat.kml",layer="polsfl1_1000",
>>> driver="KML")
>>
>> Then, in QGIS, with reprojection on the fly activated, the 2 vectors
>> are not coincident.
>> Instead, a polsfl1_1000lonlatv2 made from the original polsfl1_1000
>> shapefile in QGIS, is coincident.
>>
>> As there are 2 different programs here, I'm not positive of my diagnostic.
>> But
>> I think there is a problem with spTransform
>
> Could you please provide links to screen shots and input and output data
> objects, as well as sessionInfo() output? Which OS is involved, and are
> spTransform() and QGIS using the same PROJ.4 library and metadata. Is your
> input actually:
>
> CRS("+init=epsg:23031 +towgs84=-84,-107,-120")
>
> with the three-parameter datum shift from:
>
> http://www.asprs.org/resources/GRIDS/
>
> of July 2000? Where does yours come from? The way QGIS treats the *.prj file
> is also of interest.
>
> Roger
>
>>
>> Thanks
>>
>> Agus
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Roger.Bivand at nhh.no  Thu Sep 23 10:13:16 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 23 Sep 2010 10:13:16 +0200 (CEST)
Subject: [R-sig-Geo] Problem with spTransform en +towgs84 ?
In-Reply-To: <AANLkTi=Ejc=kh4Riv-3XG2Jh5zDxg8WEZsbG3D5QXoJp@mail.gmail.com>
References: <AANLkTik4fxrqxGLNWNAyRkSZWq34MJnoDZKG2exiYC6B@mail.gmail.com>
	<alpine.LRH.2.00.1009212157020.3513@reclus.nhh.no>
	<AANLkTi=Ejc=kh4Riv-3XG2Jh5zDxg8WEZsbG3D5QXoJp@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1009230959230.11784@reclus.nhh.no>

On Wed, 22 Sep 2010, Agustin Lobo wrote:

> Roger,
>
> I apologize for not including version details etc, here they are:
> Loading required package: rgdal
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.7.2, released 2010/04/23
> Path to GDAL shared files: /usr/share/gdal17
> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009
> Path to PROJ.4 shared files: (autodetected)
>
>> version
>               _
> platform       i486-pc-linux-gnu
> arch           i486
> os             linux-gnu
> system         i486, linux-gnu
> status
> major          2
> minor          11.1
> year           2010
> month          05
> day            31
> svn rev        52157
> language       R
> version.string R version 2.11.1 (2010-05-31)
>
> Also, I've put SPDF polsfl1_1000 here:
> https://sites.google.com/site/openfiles2/home/polsfl1_1000.rda?attredirects=0&d=1
>
> Finally, the towgs84 parameters come from the last paragraph in the pdf 
> for The Kingdom of Spain (July) listed in the page you mention. (BTW, I 
> recall having seen another list with slightly different parameters but 
> cannot find it anymore) I had to put the same 3 parameters for the 
> definition of the projection in QGIS (which qgis does not do by default, 
> had to define a custom projection to get the datum shift working). The 
> towgs parameters are not in the proj file of the shapefile set, at least 
> not in the ones created by writeOGR.

I think that this is the issue - there does not seem to be a portable way 
of setting the +towgs84= values in the representation used by ESRI for the 
shapefile *.prj file - "DATUM["D_unknown", ..." is what comes out, and 
that is maybe what QGIS tries to respect. Have you tried other drivers?

Roger

>
> Hope this helps to clarify the problem. I'm still not certain that
> spTransform is doing anything wrong.
>
> Thanks for your help,
>
> Agus
>
>
> 2010/9/21 Roger Bivand <Roger.Bivand at nhh.no>:
>> On Tue, 21 Sep 2010, Agustin Lobo wrote:
>>
>>> Hi!
>>>
>>> Might it be that spTransform is not taking the +towgs84 string into
>>> account?
>>> I have:
>>>>
>>>> proj4string(polsfl1_1000)
>>>
>>> [1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>>> +towgs84=-87,-98,-121"
>>>
>>> and do:
>>>>
>>>> polsfl1_1000lonlat <- spTransform(polsfl1_1000, CRS("+proj=longlat
>>>> +datum=WGS84"))
>>>> writeOGR(polsfl1_1000,
>>>> ?dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000",layer="polsfl1_1000",
>>>> driver="ESRI Shapefile")
>>>> writeOGR(polsfl1_1000lonlat,
>>>> ?dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000lonlat.kml",layer="polsfl1_1000",
>>>> driver="KML")
>>>
>>> Then, in QGIS, with reprojection on the fly activated, the 2 vectors
>>> are not coincident.
>>> Instead, a polsfl1_1000lonlatv2 made from the original polsfl1_1000
>>> shapefile in QGIS, is coincident.
>>>
>>> As there are 2 different programs here, I'm not positive of my diagnostic.
>>> But
>>> I think there is a problem with spTransform
>>
>> Could you please provide links to screen shots and input and output data
>> objects, as well as sessionInfo() output? Which OS is involved, and are
>> spTransform() and QGIS using the same PROJ.4 library and metadata. Is your
>> input actually:
>>
>> CRS("+init=epsg:23031 +towgs84=-84,-107,-120")
>>
>> with the three-parameter datum shift from:
>>
>> http://www.asprs.org/resources/GRIDS/
>>
>> of July 2000? Where does yours come from? The way QGIS treats the *.prj file
>> is also of interest.
>>
>> Roger
>>
>>>
>>> Thanks
>>>
>>> Agus
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From gianni.lavaredo at gmail.com  Thu Sep 23 16:33:39 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Thu, 23 Sep 2010 16:33:39 +0200
Subject: [R-sig-Geo] problem to create a R library
Message-ID: <AANLkTin-KF5BtHBMcBbKcqTJuTDVYiNZKBnGdfJEiRXV@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100923/3c0ee0c8/attachment.pl>

From jmackenzie at tnc.org  Thu Sep 23 21:44:48 2010
From: jmackenzie at tnc.org (Jason MacKenzie)
Date: Thu, 23 Sep 2010 12:44:48 -0700
Subject: [R-sig-Geo] using the 'mask' function to set NAs in 'raster'
In-Reply-To: <AANLkTimPGPzSYhHseL6ydpg96kEDAHOoj_6b=K-qUYkb@mail.gmail.com>
References: <AANLkTimPGPzSYhHseL6ydpg96kEDAHOoj_6b=K-qUYkb@mail.gmail.com>
Message-ID: <AANLkTi=L16RRtf9f4-46EPASM_-uoJ0F4mLJt=iA+F=3@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100923/438526a4/attachment.pl>

From moshersteven at gmail.com  Thu Sep 23 22:28:39 2010
From: moshersteven at gmail.com (steven mosher)
Date: Thu, 23 Sep 2010 13:28:39 -0700
Subject: [R-sig-Geo] Fwd: using the 'mask' function to set NAs in 'raster'
In-Reply-To: <AANLkTinULdTtibXOD0r3XRGCvffWYRCzbPzGrr_hRewx@mail.gmail.com>
References: <AANLkTimPGPzSYhHseL6ydpg96kEDAHOoj_6b=K-qUYkb@mail.gmail.com>
	<AANLkTi=L16RRtf9f4-46EPASM_-uoJ0F4mLJt=iA+F=3@mail.gmail.com>
	<AANLkTinULdTtibXOD0r3XRGCvffWYRCzbPzGrr_hRewx@mail.gmail.com>
Message-ID: <AANLkTim3MyaW+3x0LxGU9Phd5izN+7n0rUZOKUX-PkEh@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100923/2298184d/attachment.pl>

From r.hijmans at gmail.com  Fri Sep 24 01:29:35 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 23 Sep 2010 16:29:35 -0700
Subject: [R-sig-Geo] using the 'mask' function to set NAs in 'raster'
In-Reply-To: <AANLkTi=L16RRtf9f4-46EPASM_-uoJ0F4mLJt=iA+F=3@mail.gmail.com>
References: <AANLkTimPGPzSYhHseL6ydpg96kEDAHOoj_6b=K-qUYkb@mail.gmail.com>
	<AANLkTi=L16RRtf9f4-46EPASM_-uoJ0F4mLJt=iA+F=3@mail.gmail.com>
Message-ID: <AANLkTi=U8pkoQJqQ1CtcrLpj2qr_eJ8SXuu_-BkUF2oG@mail.gmail.com>

Hi Jason,

count(mr, NA) should indeed be larger than or equal to count(m, NA);
as in the example below. No idea what is going on in your case. What
makes you say that the values are returned at zeros? Are you using an
old version? If not, could you send me the files?

Robert

> library(raster)
Loading required package: sp
raster version 1.5-9 (21-September-2010)
>
> r = raster(ncol=10, nrow=10)
> r[] = round(runif(ncell(r))*2)
> m = raster(ncol=10, nrow=10)
> m[] = round(runif(ncell(m)))
> r[r==0] <- NA
> m[m==0] <- NA
>
> mr <- mask(r, m)
>
> count(r, NA)
[1] 20
> count(m, NA)
[1] 51
> count(mr, NA)
[1] 59


On Thu, Sep 23, 2010 at 12:44 PM, Jason MacKenzie <jmackenzie at tnc.org> wrote:
> dear list members
>
> i want to create a new raster where all cells that are NA in my 'mask' are
> set to NA, but all other values stay the same as input rasters. instead of
> NAs, masked areas are getting returned as 0s (see counts below). am i
> missing a flag to set NAs?
>
> thanks in advance,
> j
>
>
>
> r ? ?<- raster(raster.asc)
> m ?<- raster(mask.asc)
> mr <- mask(r, m)
>
>> count (r, NA)
> [1] 20533362
>> count (m, NA)
> [1] 39269328
>> count (mr, NA)
> [1] 20533362
>
>
>
>
>
> --
>
> *Jason MacKenzie, PhD*
> *
> Climate Change Adaptation Fellow*
> The Nature Conservancy
> 201 Mission Street, 4th Floor
> San Francisco, CA 94105
> jmackenzie at tnc.org
>
> (415) 281 0472 ? ? ? ? ? ?[work]
> (415) 777 0244 ? ? ? ? ? ?[fax]
> (510) 717 1544 ? ? ? ? ? ?[cell]
> jasonbmackenzie ? ? ? ?[skype]
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Adrian.Baddeley at csiro.au  Fri Sep 24 06:22:20 2010
From: Adrian.Baddeley at csiro.au (Adrian Baddeley)
Date: Fri, 24 Sep 2010 12:22:20 +0800
Subject: [R-sig-Geo] qqplot.ppm
In-Reply-To: <mailman.17.1285149612.17218.r-sig-geo@stat.math.ethz.ch>
References: <mailman.17.1285149612.17218.r-sig-geo@stat.math.ethz.ch>
Message-ID: <4C9C277C.2080507@csiro.au>

Tom_R <tom.richardson at bristol.ac.uk> writes:

> I am attempting to obtain a qqplot for a ppm 

This is in the package 'spatstat'.

> The object is a Geyer model ('Hard0'). The 'Saturation' and 'Interaction
> range' parameters for the Geyer model are obtained   using profile
> log-likelihood ('profilepl').

> I am using a spatial covariate (Z) which is a pixel image (dens_all). This
> covariate is causing problems for qqplot.ppm. I am getting the following
> error from qqplot.ppm; "ERROR : Error in rmhResolveExpansion(win, control,
> covims, "covariate") : 
>   Cannot expand the simulation window, because the covariate images do not
> cover the expanded window". 

First, I suggest you upgrade to the latest version of spatstat (1.20-3) and check whether this
problem still occurs. 

If it is still occurring, then in the call to qqplot.ppm you need to add the argument 'control'
described in help(qqplot.ppm) or help(rmhcontrol). Set control$expand = 1 so that no expansion of the simulation window occurs. For example:

    qqplot.ppm(Hard0, fast=TRUE, plot.it=FALSE, nsim=39, control=list(nrep=1e5, expand=1))

Use nsim=39 to get 5% significance bands.

Adrian Baddeley


From jmackenzie at TNC.ORG  Fri Sep 24 06:44:38 2010
From: jmackenzie at TNC.ORG (Jason MacKenzie)
Date: Thu, 23 Sep 2010 21:44:38 -0700
Subject: [R-sig-Geo] using the 'mask' function to set NAs in 'raster'
In-Reply-To: <AANLkTi=U8pkoQJqQ1CtcrLpj2qr_eJ8SXuu_-BkUF2oG@mail.gmail.com>
References: <AANLkTimPGPzSYhHseL6ydpg96kEDAHOoj_6b=K-qUYkb@mail.gmail.com>
	<AANLkTi=L16RRtf9f4-46EPASM_-uoJ0F4mLJt=iA+F=3@mail.gmail.com>
	<AANLkTi=U8pkoQJqQ1CtcrLpj2qr_eJ8SXuu_-BkUF2oG@mail.gmail.com>
Message-ID: <AANLkTinP6dz8SF1VTQf2OGcK38DcQiEZf0ez-qyPZmJG@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100923/a1972194/attachment.pl>

From alobolistas at gmail.com  Fri Sep 24 08:15:25 2010
From: alobolistas at gmail.com (Agustin Lobo)
Date: Fri, 24 Sep 2010 08:15:25 +0200
Subject: [R-sig-Geo] Problem with spTransform en +towgs84 ?
In-Reply-To: <alpine.LRH.2.00.1009230959230.11784@reclus.nhh.no>
References: <AANLkTik4fxrqxGLNWNAyRkSZWq34MJnoDZKG2exiYC6B@mail.gmail.com>
	<alpine.LRH.2.00.1009212157020.3513@reclus.nhh.no>
	<AANLkTi=Ejc=kh4Riv-3XG2Jh5zDxg8WEZsbG3D5QXoJp@mail.gmail.com>
	<alpine.LRH.2.00.1009230959230.11784@reclus.nhh.no>
Message-ID: <AANLkTikgCVfW2iS62Ae0ypTdj798S7oaUfMaoY8OajYx@mail.gmail.com>

I'm getting conflicting results on this issue. I will do more
and more formal testing and will report back.

Agus

2010/9/23 Roger Bivand <Roger.Bivand at nhh.no>:
> On Wed, 22 Sep 2010, Agustin Lobo wrote:
>
>> Roger,
>>
>> I apologize for not including version details etc, here they are:
>> Loading required package: rgdal
>> Geospatial Data Abstraction Library extensions to R successfully loaded
>> Loaded GDAL runtime: GDAL 1.7.2, released 2010/04/23
>> Path to GDAL shared files: /usr/share/gdal17
>> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009
>> Path to PROJ.4 shared files: (autodetected)
>>
>>> version
>>
>> ? ? ? ? ? ? ?_
>> platform ? ? ? i486-pc-linux-gnu
>> arch ? ? ? ? ? i486
>> os ? ? ? ? ? ? linux-gnu
>> system ? ? ? ? i486, linux-gnu
>> status
>> major ? ? ? ? ?2
>> minor ? ? ? ? ?11.1
>> year ? ? ? ? ? 2010
>> month ? ? ? ? ?05
>> day ? ? ? ? ? ?31
>> svn rev ? ? ? ?52157
>> language ? ? ? R
>> version.string R version 2.11.1 (2010-05-31)
>>
>> Also, I've put SPDF polsfl1_1000 here:
>>
>> https://sites.google.com/site/openfiles2/home/polsfl1_1000.rda?attredirects=0&d=1
>>
>> Finally, the towgs84 parameters come from the last paragraph in the pdf
>> for The Kingdom of Spain (July) listed in the page you mention. (BTW, I
>> recall having seen another list with slightly different parameters but
>> cannot find it anymore) I had to put the same 3 parameters for the
>> definition of the projection in QGIS (which qgis does not do by default, had
>> to define a custom projection to get the datum shift working). The towgs
>> parameters are not in the proj file of the shapefile set, at least not in
>> the ones created by writeOGR.
>
> I think that this is the issue - there does not seem to be a portable way of
> setting the +towgs84= values in the representation used by ESRI for the
> shapefile *.prj file - "DATUM["D_unknown", ..." is what comes out, and that
> is maybe what QGIS tries to respect. Have you tried other drivers?
>
> Roger
>
>>
>> Hope this helps to clarify the problem. I'm still not certain that
>> spTransform is doing anything wrong.
>>
>> Thanks for your help,
>>
>> Agus
>>
>>
>> 2010/9/21 Roger Bivand <Roger.Bivand at nhh.no>:
>>>
>>> On Tue, 21 Sep 2010, Agustin Lobo wrote:
>>>
>>>> Hi!
>>>>
>>>> Might it be that spTransform is not taking the +towgs84 string into
>>>> account?
>>>> I have:
>>>>>
>>>>> proj4string(polsfl1_1000)
>>>>
>>>> [1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>>>> +towgs84=-87,-98,-121"
>>>>
>>>> and do:
>>>>>
>>>>> polsfl1_1000lonlat <- spTransform(polsfl1_1000, CRS("+proj=longlat
>>>>> +datum=WGS84"))
>>>>> writeOGR(polsfl1_1000,
>>>>>
>>>>> ?dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000",layer="polsfl1_1000",
>>>>> driver="ESRI Shapefile")
>>>>> writeOGR(polsfl1_1000lonlat,
>>>>>
>>>>> ?dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000lonlat.kml",layer="polsfl1_1000",
>>>>> driver="KML")
>>>>
>>>> Then, in QGIS, with reprojection on the fly activated, the 2 vectors
>>>> are not coincident.
>>>> Instead, a polsfl1_1000lonlatv2 made from the original polsfl1_1000
>>>> shapefile in QGIS, is coincident.
>>>>
>>>> As there are 2 different programs here, I'm not positive of my
>>>> diagnostic.
>>>> But
>>>> I think there is a problem with spTransform
>>>
>>> Could you please provide links to screen shots and input and output data
>>> objects, as well as sessionInfo() output? Which OS is involved, and are
>>> spTransform() and QGIS using the same PROJ.4 library and metadata. Is
>>> your
>>> input actually:
>>>
>>> CRS("+init=epsg:23031 +towgs84=-84,-107,-120")
>>>
>>> with the three-parameter datum shift from:
>>>
>>> http://www.asprs.org/resources/GRIDS/
>>>
>>> of July 2000? Where does yours come from? The way QGIS treats the *.prj
>>> file
>>> is also of interest.
>>>
>>> Roger
>>>
>>>>
>>>> Thanks
>>>>
>>>> Agus
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Economic Geography Section, Department of Economics, Norwegian School of
>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>> e-mail: Roger.Bivand at nhh.no
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>
> --
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>


From caspar.hallmann at gmail.com  Fri Sep 24 10:25:59 2010
From: caspar.hallmann at gmail.com (caspar hallmann)
Date: Fri, 24 Sep 2010 10:25:59 +0200
Subject: [R-sig-Geo] Question of ppm warnings of print.ppm
Message-ID: <AANLkTi=4e5n+yi=Pg1ELhv0U7PMq1D5u=xZ=sbFnfxXc@mail.gmail.com>

Dear list,

I am attempting to fit an inhomogeneous poisson point process to some
point pattern data, using ppm from spatstat (v 1.17-5). I have been
found guilty of having NA values in my covariate-images(a categorical
variable), and have thus been receiving a lot of warnings. Having
fitted my model and in attempt to print a summary (or the ppm model)
my screen is cluttered with

 ..$ na.covariates:List of 3
  .. ..$ covnames.na  : chr "habitat"
  .. ..$ quadpoints.na: logi [1:4219, 1] FALSE FALSE FALSE FALSE FALSE FALSE ...
  .. ..$ print        : chr "Values of the covariate ?habitat? were NA
or undefined at 7.8% (327 out of 4219) of the quadrature points"

replicated uncountable times, and not allowing me to see any of the
useful results.

I think I can get around it, but I just wonder if this is the intended
behaviour of print.ppm and print.summary.ppm.

Thanks in advance

Caspar


From lsk25 at cam.ac.uk  Fri Sep 24 12:31:22 2010
From: lsk25 at cam.ac.uk (Luke Knowles)
Date: Fri, 24 Sep 2010 11:31:22 +0100
Subject: [R-sig-Geo] Problems with ncdf package
Message-ID: <BE770F97-75C0-49B2-9F34-164A71060AE9@cam.ac.uk>

Hi,

I'm trying to make a netcdf file with three variables in. Two  
variables have the same dimensions, [96,73,5,12], and the other has  
different dimensions [96,73,1,12].

I have set verbose to true;

[1] "create.ncdf: input was a list of vars"
[1] "Calling R_nc_create for file  /Users/luke/Ancil_Files/Nc_Files/ 
land_fraction_SDGVM.nc"
[1] "back from R_nc_create for file  /Users/luke/Ancil_Files/Nc_Files/ 
land_fraction_SDGVM.nc"
[1] "create.ncdf: about to create the dims"
[1] "var.add.ncdf: entering with indefine= TRUE"
[1] "var.add.ncdf: ncid of file to add to= 13    filename= /Users/ 
luke/Ancil_Files/Nc_Files/land_fraction_SDGVM.nc     writable= TRUE"
[1] "var.add.ncdf: varname to add= field1393"
[1] "var.add.ncdf: creating 4 dims for var field1393"
[1] "var.add.ncdf: working on dim > longitude < (number 1 ) for var  
field1393"
[1] "create.ncdf: creating dim longitude"
[1] "dim.create.ncdf: entering for ncid= 13"
[1] "dim.create.ncdf: entering for dim longitude"
[1] "dim.create.ncdf: about to call R_nc_def_dim for dim longitude"
[1] "dim.create.ncdf: making dimvar for dim longitude"
[1] "dim.create.ncdf: about to call R_nc_def_var_double for dimvar  
longitude"
[1] "dim.create.ncdf: about to call R_nc_put_vara_double dimvals for  
dimvar longitude"
[1] "dim.create.ncd: exiting for ncid= 13   dim= longitude"
[1] "var.add.ncdf: working on dim > latitude < (number 2 ) for var  
field1393"
[1] "create.ncdf: creating dim latitude"
[1] "dim.create.ncdf: entering for ncid= 13"
[1] "dim.create.ncdf: entering for dim latitude"
[1] "dim.create.ncdf: about to call R_nc_def_dim for dim latitude"
[1] "dim.create.ncdf: making dimvar for dim latitude"
[1] "dim.create.ncdf: about to call R_nc_def_var_double for dimvar  
latitude"
[1] "dim.create.ncdf: about to call R_nc_put_vara_double dimvals for  
dimvar latitude"
[1] "dim.create.ncd: exiting for ncid= 13   dim= latitude"
[1] "var.add.ncdf: working on dim > height < (number 3 ) for var  
field1393"
[1] "create.ncdf: creating dim height"
[1] "dim.create.ncdf: entering for ncid= 13"
[1] "dim.create.ncdf: entering for dim height"
[1] "dim.create.ncdf: about to call R_nc_def_dim for dim height"
[1] "dim.create.ncdf: making dimvar for dim height"
[1] "dim.create.ncdf: about to call R_nc_def_var_double for dimvar  
height"
[1] "dim.create.ncdf: about to call R_nc_put_vara_double dimvals for  
dimvar height"
[1] "dim.create.ncd: exiting for ncid= 13   dim= height"
[1] "var.add.ncdf: working on dim > time < (number 4 ) for var  
field1393"
[1] "create.ncdf: creating dim time"
[1] "dim.create.ncdf: entering for ncid= 13"
[1] "dim.create.ncdf: entering for dim time"
[1] "dim.create.ncdf: about to call R_nc_def_dim for dim time"
[1] "dim.create.ncdf: making dimvar for dim time"
[1] "dim.create.ncdf: about to call R_nc_def_var_double for dimvar time"
[1] "dim.create.ncdf: about to call R_nc_put_vara_double dimvals for  
dimvar time"
[1] "dim.create.ncd: exiting for ncid= 13   dim= time"
[1] "create.ncdf: creating single precision var field1393"
[1] "create.ncdf: C call returned value 0"
[1] "var.add.ncdf: entering with indefine= TRUE"
[1] "var.add.ncdf: ncid of file to add to= 13    filename= /Users/ 
luke/Ancil_Files/Nc_Files/land_fraction_SDGVM.nc     writable= TRUE"
[1] "var.add.ncdf: varname to add= field1392"
[1] "var.add.ncdf: creating 4 dims for var field1392"
[1] "var.add.ncdf: working on dim > longitude < (number 1 ) for var  
field1392"
[1] "var.add.ncdf: working on dim > latitude < (number 2 ) for var  
field1392"
[1] "var.add.ncdf: working on dim > height < (number 3 ) for var  
field1392"
[1] "var.add.ncdf: working on dim > time < (number 4 ) for var  
field1392"
[1] "create.ncdf: creating single precision var field1392"
[1] "create.ncdf: C call returned value 0"
[1] "var.add.ncdf: entering with indefine= TRUE"
[1] "var.add.ncdf: ncid of file to add to= 13    filename= /Users/ 
luke/Ancil_Files/Nc_Files/land_fraction_SDGVM.nc     writable= TRUE"
[1] "var.add.ncdf: varname to add= field1384"
[1] "var.add.ncdf: creating 4 dims for var field1384"
[1] "var.add.ncdf: working on dim > longitude < (number 1 ) for var  
field1384"
[1] "var.add.ncdf: working on dim > latitude < (number 2 ) for var  
field1384"
[1] "var.add.ncdf: working on dim > height < (number 3 ) for var  
field1384"
Error in var.add.ncdf(nc, vars[[ivar]], verbose = verbose, indefine =  
TRUE) :
   This is not allowed.


Here is the code that i have written - if there is anything obvious  
that i have done wrong please let me know - maybe i can't do it like  
this? Do i need to close the ncdf file, reopen it and append the  
different sized array???

library(ncdf)
library(fields)
library(abind)
library(maps)
# HEADER
SDGVM_TYPE <- c 
("Bare_Soil","C3_grass","C4_grass","Evergreen_Broadleaf","Evergreen_Need 
leaf","Deciduous_BroadLeaf","Deciduous_NeedleLeaf","Crops")
SDGVM_TYPES <- c("Bare Soil","C3 grass","C4 grass","Evergreen  
Broadleaf","Evergreen Needleaf","Deciduous Broad Leaf","Deciduous  
Needle Leaf","Crops")
UM_TYPES <- c("Broadleaf","Needleaf","C3 Grasses","C4  
grasses","Shrub","Urban","Water","Bare Soil","Ice")
month <- c 
("January","February","March","April","May","June","July","August","Sept 
ember","October","November","December")
# BODY
land_fraction <- open.ncdf("/Users/luke/Ancil_Files/ 
qrparm_land_frac.nc")
# field1392(LAI) (96,73,5,12)
# field1393(Canopy Height) (96,73,5,12)
SDGVM <- open.ncdf("/Users/luke/Ancil_Files/SDGVM_Nc/VegPresentR8.nc")
# field1391(Fractions Of Surface Types) (96,73,9,1)
IGBP_Func <- open.ncdf("/Users/luke/Ancil_Files/IGBP_Veg_Func.nc")
# field1384(Canopy Conductance) (96,73,1,12)
IGBP_CanCon <- open.ncdf("/Users/luke/Ancil_Files/Nc_Files/ 
Veg_Func_Monthly.nc")
# lai (96,73,8,12)
# maxvegetfrac (96,73,8,12)

pseudo <- get.var.ncdf(land_fraction,"pseudo")
height <- get.var.ncdf(SDGVM,"veg")
lat <- get.var.ncdf(land_fraction,"latitude")
lat_sdgvm <- get.var.ncdf(SDGVM,"lat")
lon <- get.var.ncdf(land_fraction,"longitude")
lon_sdgvm <- get.var.ncdf(SDGVM,"lon")
tme <- get.var.ncdf(land_fraction,"t")
tme_sdgvm <- get.var.ncdf(SDGVM,"time")
#
numlevs<-length(pseudo)
numlevs_sdgvm<-length(height)
numlats<-length(lat)
numlats_sdgvm<-length(lat_sdgvm)
numlong<-length(lon)
numlong_sdgvm<-length(lon_sdgvm)
numtime<-length(tme)
numtime_sdgvm<-length(tme_sdgvm)
#
axis_x_sdgvm<-seq(from=-180, to=180, by=45)
axis_x <- seq(from =0, to=360, by=45)
axis_y_sdgvm<-seq(from=-90, to=90, by=30)
axis_y<-seq(from=-90, to=90, by=30)
#
land_frac_1 <- get.var.ncdf(land_fraction,"field1391",start=c 
(1,1,1,1),count=c(48,73,9,1))
land_frac_2 <- get.var.ncdf(land_fraction,"field1391",start=c 
(48,1,1,1),count=c(48,73,9,1))
land_frac <- abind(land_frac_2,land_frac_1,along=1)
print("Line 48")
assign("land_mask",land_frac)

igbp_urban <- do.call(abind,c(rep(list(land_mask[,,6]),12),along=3))
igbp_water <- land_mask[,,7]
igbp_soil <- land_mask[,,8]
igbp_ice <- do.call(abind,c(rep(list(land_mask[,,9]),12),along=3))
print("Line 55")
igbp_water <- do.call(abind,c(rep(list(igbp_water),12),along=3))
#
sdgvm_lai <- get.var.ncdf(SDGVM,"lai",start=c(1,1,1,1),count=c 
(96,73,8,12))
#
sdgvm_frac <- get.var.ncdf(SDGVM,"maxvegetfrac",start=c 
(1,1,1,1),count=c(96,73,8,12))
#
print("Line 62")
sdgvm_lai_5npft <- abind((sdgvm_lai[,,4,] + sdgvm_lai[,,6,]), 
(sdgvm_lai[,,5,] + sdgvm_lai[,,7,]), (sdgvm_lai[,,2,] + sdgvm_lai[,, 
8,]) ,(sdgvm_lai[,,3,]) , (sdgvm_lai[,,8,]* 0.0),along=2.5)
#
assign("LAI_LF",sdgvm_lai_5npft)
print("Line 66")
sdgvm_broadleaf <- sdgvm_frac[,,4,] + sdgvm_frac[,,6,]
sdgvm_needleaved <- sdgvm_frac[,,5,] + sdgvm_frac[,,7,]
sdgvm_c3 <- sdgvm_frac[,,2,] + sdgvm_frac[,,8,]
sdgvm_c4 <- sdgvm_frac[,,3,]
sdgvm_soil <- sdgvm_frac[,,1,]
sdgvm_crops <- sdgvm_frac[,,8,]
sdgvm_null <- sdgvm_frac[,,8,] * 0.0
#
print("Line 75")
soil_only <- sdgvm_soil[,,] - igbp_ice
#
sdgvm_soil_1 <- ifelse(sdgvm_soil[,1:12,] >= 0.0, 0.0)
sdgvm_soil_2 <- ifelse(sdgvm_soil[,61:73,] >= 0.0, 0.0)
#
print("Line 81")
sdgvm_frac_lf <- abind 
(sdgvm_broadleaf,sdgvm_needleaved,sdgvm_c3,sdgvm_c4,sdgvm_null,igbp_urba 
n,igbp_water,sdgvm_soil,igbp_ice,along=2.5)
#
# Fractional types of average canopy heights c(Broadleaf,Needleleaf,  
C3, C4, Shrubs)
#
canopy_height_average <- c(28,22,1.5,1.3,2.1)
#
CHT_LF <- abind((sdgvm_frac[,,1,]*0.0) , (sdgvm_frac[,,2,] 
*canopy_height_average[3]) , (sdgvm_frac[,,3,]*canopy_height_average 
[4]) , (sdgvm_frac[,,4,]*canopy_height_average[1]) , (sdgvm_frac[,,5,] 
*canopy_height_average[2]) , (sdgvm_frac[,,6,]*canopy_height_average 
[1]) , (sdgvm_frac[,,7,]*canopy_height_average[2]) , (sdgvm_frac[,,8,] 
*canopy_height_average[3]),along=2.5)
#
CHT_5NPFT <- abind((CHT_LF[,,4,] + CHT_LF[,,6,]),(CHT_LF[,,5,] +  
CHT_LF[,,7,]),(CHT_LF[,,2,] + CHT_LF[,,8,]),(CHT_LF[,,3,]),(CHT_LF[,, 
1,]*0.0),along=2.5)
#
igbp_cancon_1 <- get.var.ncdf(IGBP_CanCon,"field1384",start=c 
(1,1,1,1),count=c(50,73,1,12))
igbp_cancon_2 <- get.var.ncdf(IGBP_CanCon,"field1384",start=c 
(50,1,1,1),count=c(46,73,1,12))
#
igbp_cancon <- get.var.ncdf(IGBP_CanCon,"field1384",start=c 
(1,1,1,1),count=c(96,73,1,12))
#
CANCON_IGBP <- abind(igbp_cancon_2,igbp_cancon_1,along=1)
#
lon <- get.var.ncdf(IGBP_CanCon,"longitude")
tme <- get.var.ncdf(IGBP_CanCon,"t")
#
sewd <- "/Users/luke/Desktop/Dropbox/R_Output/CAS_NET/SDGVM/Can_Hgt/"
setwd(sewd)
#
filename <- "/Users/luke/Ancil_Files/Nc_Files/land_fraction_SDGVM.nc"
#
x <- dim.def.ncdf("longitude","Degrees East",seq(-176.25,180.00,3.75))
x_1 <- dim.def.ncdf("longitude","Degrees East",seq(-180.00,176.25,3.75))
y <- dim.def.ncdf("latitude","Degrees North",seq(-90,90,2.5))
z <- dim.def.ncdf("height","Model Level",seq(1,5,1))
z_cancon <- dim.def.ncdf("height","Model Level",1)
w <- dim.def.ncdf("time","days since 0000-01-01 00:00:00",14.00)
w_12 <- dim.def.ncdf("time","days since 0000-01-01 00:00:00",seq 
(14,344,30))
# missing value
mv <- 2.00000004008175E+20
#
field1392 <- var.def.ncdf("field1392","m2_m2",list 
(x,y,z,w_12),mv,longname="LEAF AREA INDEX OF PLANT FUNC TYPES")
field1393 <- var.def.ncdf("field1393","m",list 
(x,y,z,w_12),mv,longname="CANOPY HEIGHT OF PLANT FUNC TYPES")
field1384 <- var.def.ncdf("field1384","",list 
(x,y,z_cancon,w_12),mv,longname="CANOPY CONDUCTANCE AFTER TIMESTEP")
#
nc_file <- create.ncdf(filename,list 
(field1393,field1392,field1384),verbose=TRUE)
#
put.var.ncdf(nc_file,field1384,CANCON_IGBP,verbose="TRUE")
put.var.ncdf(nc_file,field1393,CHT_5NPFT,verbose="TRUE")
put.var.ncdf(nc_file,field1392,LAI_LF,verbose="TRUE")
#
close.ncdf(nc_file)

Thanks

Luke

PhD Student
Centre for Atmospheric Science
Department of Chemistry
University of Cambridge


From aparenti at ec.unipi.it  Fri Sep 24 16:23:34 2010
From: aparenti at ec.unipi.it (Angela Parenti)
Date: Fri, 24 Sep 2010 16:23:34 +0200
Subject: [R-sig-Geo] Heteroskedasticity and different Spatial Weigth Matrices
Message-ID: <4C9CB466.8040702@ec.unipi.it>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100924/e1783883/attachment.pl>

From caspar.hallmann at gmail.com  Fri Sep 24 16:46:28 2010
From: caspar.hallmann at gmail.com (caspar hallmann)
Date: Fri, 24 Sep 2010 16:46:28 +0200
Subject: [R-sig-Geo] Heteroskedasticity and different Spatial Weigth
	Matrices
In-Reply-To: <4C9CB466.8040702@ec.unipi.it>
References: <4C9CB466.8040702@ec.unipi.it>
Message-ID: <AANLkTinfmEyAemDT6stocT_Ui31GjQ4cB3DOERsczsWM@mail.gmail.com>

Hi Angela,

an idea might be to use gls with some proper variance function (say
varPower). Then take the pearson residuals for you Morans tests.

my 2 cents

Caspar





On Fri, Sep 24, 2010 at 4:23 PM, Angela Parenti <aparenti at ec.unipi.it> wrote:
> Hey everyone,
>
> I'm puzzled about a recent result, and I'm wondering if anyone can help explain it.
>
> I am currently estimating a growth model with many controls by OLS. Looking at the residual tests I find that the Breusch-Pagan test points the presence of heteroskedasticity.
> Moreover, looking for spatial dependence in the residuals using the Moran's I test I find that with 3 definitions of spatial weight matrix I cannot reject
> the null hp of no spatial dependence while with 3 different spatial weight matrices I can.
>
> Here the results in details:
>
> Breush-Pagan Test:
> BP=66.3478, p-value=0
>
> Moran'I test on regression residuals:
>
> 1) W1 is binary matrix with a cut-off=660.8 km (row-standardized):
> ? ? Observed Moran's I=-0.02938, p-value=/0.57547/
>
> 2) W2 is the first-order contiguity matrix(row-standardized):
> ? ? Observed Moran's I=0.1389, p-value=_0.00021_
>
> 3) ?W3 is the second-order contiguity matrix(row-standardized):
> ? ? Observed Moran's I=0.0694 , p-value=_0.00724_
>
> 4) ?W4 is the matrix s.t each region has at least one neighbour- max distance 1124.710 km -(row-standardized):
> ? ? Observed Moran's I=-0.01286, p-value=/0.91883/
>
> 5) ?W5 is the matrix where weights are 1/d_ij^2 ?with no cut-off(row-standardized):
> ? ? Observed Moran's I=0.03239, p-value=_0.00350_
>
> 6) ?W6 is the matrix where weights are 1/exp(2*d_ij) ?with no cut-off(row-standardized):
> ? ? Observed Moran's I=0.06847, p-value=/0.15462/
>
>
> Therefore, my questions are:
> - since I find evidence of heteroskedasticity shouldn't I look for aheteroskedasticity-robust version of the Moran's I? If yes, is there the possibility
> ? to implement it with the function "lm.morantest"?
> - what should I conclude from such different results using different spatial weight matrices? It seems that the lower the number of neighbours is the higher is the
> ? probability of finding spatial effects. In this latter case how can I decide the "right" matrix? By looking at the AIC in the maximum likelihood?
>
> Thank you very much!
>
> Angela Parenti
>
>
>
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From ozlem.yanmaz at gmail.com  Fri Sep 24 18:54:25 2010
From: ozlem.yanmaz at gmail.com (Ozlem Yanmaz)
Date: Fri, 24 Sep 2010 12:54:25 -0400
Subject: [R-sig-Geo] dealing with large spatial data
Message-ID: <AANLkTimw+uC4LjEO3HjB1grox=Z7i2x+kUf6u9kCD8Vi@mail.gmail.com>

Dear fellow R users,

I am fairly new to spatial models. I have been using "spdep" package
to model the spatial correlation between my data points. I have used
"dnearneigh" and "knearneigh" functions to get the neighborhood list.
I don't have a problem running the functions when the data is small.
My problem is the data set that I will eventually be working on is
fairly large (more than 50,000 points). Thus I face with memory
problem. Is there a way to speed up this process, like maybe creating
the neighborhoods in clusters and combine them later to get large
weight matrix for the "spautolm" function?

any idea, suggestion is appreciated.

Thanks and Regards


From jgarcia at ija.csic.es  Fri Sep 24 20:35:33 2010
From: jgarcia at ija.csic.es (jgarcia at ija.csic.es)
Date: Fri, 24 Sep 2010 20:35:33 +0200 (CEST)
Subject: [R-sig-Geo] Problem with spTransform en +towgs84 ?
Message-ID: <38101.78.149.131.24.1285353333.squirrel@paleo.ija.csic.es>

Hi,
Just to add that I've also detected some problems in this sense. I've have
exported a shapefile from ArcGIS to KML, and also imported it into R, and
from there to KML. The final KML files differ in some 70m of latitude,
while the longitudes match.

# import the shapefile
> knapdale.supgeo <- readOGR(dsn="test",layer="knapdale_supgeo")
> proj4string(knapdale.supgeo)
[1] " +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000 +y_0=-100000
+ellps=airy +units=m +no_defs"

# Note, the above is OSGB 1936 / British National Grid, which  equals
# CRS("+init=epsg:27700")
# Then:

knapdale.supgeoLL <- spTransform(knapdale.supgeo, CRS("+proj=longlat +
datum=WGS84"))
kmlf <- "knapdale_supgeo.kml"
writeOGR(knapdale.supgeoLL, dsn=kmlf, layer="supgeo", driver="KML")

I'm not saying that the R part is responsible for the difference, but the
mismatch is there. Some details:

ArcGIS 9.3 (Windows XP Pro)
R 2.10.1
> library(rgdal)
Loading required package: sp
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.4.2.0, released 2007/06/27
Path to GDAL shared files: /usr/local/share/gdal
Loaded PROJ.4 runtime: Rel. 4.5.0, 22 Oct 2006
Path to PROJ.4 shared files: (autodetected)

Best regards,
Javier



> Roger,
>
> I apologize for not including version details etc, here they are:
> Loading required package: rgdal
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.7.2, released 2010/04/23
> Path to GDAL shared files: /usr/share/gdal17
> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009
> Path to PROJ.4 shared files: (autodetected)
>
>> version
>                _
> platform       i486-pc-linux-gnu
> arch           i486
> os             linux-gnu
> system         i486, linux-gnu
> status
> major          2
> minor          11.1
> year           2010
> month          05
> day            31
> svn rev        52157
> language       R
> version.string R version 2.11.1 (2010-05-31)
>
> Also, I've put SPDF polsfl1_1000 here:
> https://sites.google.com/site/openfiles2/home/polsfl1_1000.rda?attredirects=0&d=1
>
> Finally, the towgs84 parameters come from the last paragraph in the pdf
> for The Kingdom of Spain (July) listed in the page you mention. (BTW,
> I recall having seen
> another list with slightly different parameters but cannot find it
> anymore)
> I had to put
> the same 3 parameters for the definition of the projection in QGIS
> (which qgis does not
> do by default, had to define a custom projection to get the datum
> shift working). The towgs
> parameters are not in the proj file of the shapefile set, at least not
> in the ones created
> by writeOGR.
>
> Hope this helps to clarify the problem. I'm still not certain that
> spTransform is doing anything wrong.
>
> Thanks for your help,
>
> Agus
>
>
> 2010/9/21 Roger Bivand <Roger.Bivand at nhh.no>:
>> On Tue, 21 Sep 2010, Agustin Lobo wrote:
>>
>>> Hi!
>>>
>>> Might it be that spTransform is not taking the +towgs84 string into
>>> account?
>>> I have:
>>>>
>>>> proj4string(polsfl1_1000)
>>>
>>> [1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>>> +towgs84=-87,-98,-121"
>>>
>>> and do:
>>>>
>>>> polsfl1_1000lonlat <- spTransform(polsfl1_1000, CRS("+proj=longlat
>>>> +datum=WGS84"))
>>>> writeOGR(polsfl1_1000,
>>>>  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000",layer="polsfl1_1000",
>>>> driver="ESRI Shapefile")
>>>> writeOGR(polsfl1_1000lonlat,
>>>>  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000lonlat.kml",layer="polsfl1_1000",
>>>> driver="KML")
>>>
>>> Then, in QGIS, with reprojection on the fly activated, the 2 vectors
>>> are not coincident.
>>> Instead, a polsfl1_1000lonlatv2 made from the original polsfl1_1000
>>> shapefile in QGIS, is coincident.
>>>
>>> As there are 2 different programs here, I'm not positive of my
>>> diagnostic.
>>> But
>>> I think there is a problem with spTransform
>>
>> Could you please provide links to screen shots and input and output data
>> objects, as well as sessionInfo() output? Which OS is involved, and are
>> spTransform() and QGIS using the same PROJ.4 library and metadata. Is
>> your
>> input actually:
>>
>> CRS("+init=epsg:23031 +towgs84=-84,-107,-120")
>>
>> with the three-parameter datum shift from:
>>
>> http://www.asprs.org/resources/GRIDS/
>>
>> of July 2000? Where does yours come from? The way QGIS treats the *.prj
>> file
>> is also of interest.
>>
>> Roger
>>
>>>
>>> Thanks
>>>
>>> Agus
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From jgarcia at ija.csic.es  Fri Sep 24 20:59:15 2010
From: jgarcia at ija.csic.es (jgarcia at ija.csic.es)
Date: Fri, 24 Sep 2010 20:59:15 +0200 (CEST)
Subject: [R-sig-Geo] Problem with spTransform en +towgs84 ?
In-Reply-To: <38101.78.149.131.24.1285353333.squirrel@paleo.ija.csic.es>
References: <38101.78.149.131.24.1285353333.squirrel@paleo.ija.csic.es>
Message-ID: <1374.78.149.131.24.1285354755.squirrel@paleo.ija.csic.es>

Hi again,
However,in my case, if instead of the previously mentioned version in my
linux box, I use my windows version of R:

> library(rgdal)
Loading required package: sp
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.6.3, released 2009/11/19
Path to GDAL shared files: C:/ARCHIV~1/R/R-29~1.2/library/rgdal/gdal
Loaded PROJ.4 runtime: Rel. 4.6.1, 21 August 2008
Path to PROJ.4 shared files: C:/ARCHIV~1/R/R-29~1.2/library/rgdal/proj
>

The mismatch problem is solved. So, could this be, in this case, a problem
of the PROJ.4 Rel. 4.5.0, 22 Oct 2006, or GDAL 1.4.2.0 versions in the
linux computer?

Thanks,

Javier
---


> Hi,
> Just to add that I've also detected some problems in this sense. I've have
> exported a shapefile from ArcGIS to KML, and also imported it into R, and
> from there to KML. The final KML files differ in some 70m of latitude,
> while the longitudes match.
>
> # import the shapefile
>> knapdale.supgeo <- readOGR(dsn="test",layer="knapdale_supgeo")
>> proj4string(knapdale.supgeo)
> [1] " +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000 +y_0=-100000
> +ellps=airy +units=m +no_defs"
>
> # Note, the above is OSGB 1936 / British National Grid, which  equals
> # CRS("+init=epsg:27700")
> # Then:
>
> knapdale.supgeoLL <- spTransform(knapdale.supgeo, CRS("+proj=longlat +
> datum=WGS84"))
> kmlf <- "knapdale_supgeo.kml"
> writeOGR(knapdale.supgeoLL, dsn=kmlf, layer="supgeo", driver="KML")
>
> I'm not saying that the R part is responsible for the difference, but the
> mismatch is there. Some details:
>
> ArcGIS 9.3 (Windows XP Pro)
> R 2.10.1
>> library(rgdal)
> Loading required package: sp
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.4.2.0, released 2007/06/27
> Path to GDAL shared files: /usr/local/share/gdal
> Loaded PROJ.4 runtime: Rel. 4.5.0, 22 Oct 2006
> Path to PROJ.4 shared files: (autodetected)
>
> Best regards,
> Javier
>
>
>
>> Roger,
>>
>> I apologize for not including version details etc, here they are:
>> Loading required package: rgdal
>> Geospatial Data Abstraction Library extensions to R successfully loaded
>> Loaded GDAL runtime: GDAL 1.7.2, released 2010/04/23
>> Path to GDAL shared files: /usr/share/gdal17
>> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009
>> Path to PROJ.4 shared files: (autodetected)
>>
>>> version
>>                _
>> platform       i486-pc-linux-gnu
>> arch           i486
>> os             linux-gnu
>> system         i486, linux-gnu
>> status
>> major          2
>> minor          11.1
>> year           2010
>> month          05
>> day            31
>> svn rev        52157
>> language       R
>> version.string R version 2.11.1 (2010-05-31)
>>
>> Also, I've put SPDF polsfl1_1000 here:
>> https://sites.google.com/site/openfiles2/home/polsfl1_1000.rda?attredirects=0&d=1
>>
>> Finally, the towgs84 parameters come from the last paragraph in the pdf
>> for The Kingdom of Spain (July) listed in the page you mention. (BTW,
>> I recall having seen
>> another list with slightly different parameters but cannot find it
>> anymore)
>> I had to put
>> the same 3 parameters for the definition of the projection in QGIS
>> (which qgis does not
>> do by default, had to define a custom projection to get the datum
>> shift working). The towgs
>> parameters are not in the proj file of the shapefile set, at least not
>> in the ones created
>> by writeOGR.
>>
>> Hope this helps to clarify the problem. I'm still not certain that
>> spTransform is doing anything wrong.
>>
>> Thanks for your help,
>>
>> Agus
>>
>>
>> 2010/9/21 Roger Bivand <Roger.Bivand at nhh.no>:
>>> On Tue, 21 Sep 2010, Agustin Lobo wrote:
>>>
>>>> Hi!
>>>>
>>>> Might it be that spTransform is not taking the +towgs84 string into
>>>> account?
>>>> I have:
>>>>>
>>>>> proj4string(polsfl1_1000)
>>>>
>>>> [1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>>>> +towgs84=-87,-98,-121"
>>>>
>>>> and do:
>>>>>
>>>>> polsfl1_1000lonlat <- spTransform(polsfl1_1000, CRS("+proj=longlat
>>>>> +datum=WGS84"))
>>>>> writeOGR(polsfl1_1000,
>>>>>  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000",layer="polsfl1_1000",
>>>>> driver="ESRI Shapefile")
>>>>> writeOGR(polsfl1_1000lonlat,
>>>>>  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000lonlat.kml",layer="polsfl1_1000",
>>>>> driver="KML")
>>>>
>>>> Then, in QGIS, with reprojection on the fly activated, the 2 vectors
>>>> are not coincident.
>>>> Instead, a polsfl1_1000lonlatv2 made from the original polsfl1_1000
>>>> shapefile in QGIS, is coincident.
>>>>
>>>> As there are 2 different programs here, I'm not positive of my
>>>> diagnostic.
>>>> But
>>>> I think there is a problem with spTransform
>>>
>>> Could you please provide links to screen shots and input and output
>>> data
>>> objects, as well as sessionInfo() output? Which OS is involved, and are
>>> spTransform() and QGIS using the same PROJ.4 library and metadata. Is
>>> your
>>> input actually:
>>>
>>> CRS("+init=epsg:23031 +towgs84=-84,-107,-120")
>>>
>>> with the three-parameter datum shift from:
>>>
>>> http://www.asprs.org/resources/GRIDS/
>>>
>>> of July 2000? Where does yours come from? The way QGIS treats the *.prj
>>> file
>>> is also of interest.
>>>
>>> Roger
>>>
>>>>
>>>> Thanks
>>>>
>>>> Agus
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> --
>>> Roger Bivand
>>> Economic Geography Section, Department of Economics, Norwegian School
>>> of
>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>> e-mail: Roger.Bivand at nhh.no
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From tom.gottfried at wzw.tum.de  Sat Sep 25 21:41:55 2010
From: tom.gottfried at wzw.tum.de (Tom Gottfried)
Date: Sat, 25 Sep 2010 21:41:55 +0200
Subject: [R-sig-Geo] problem to create a R library
Message-ID: <4C9E5083.8010504@wzw.tum.de>

Hi Gianni,

seems as if you did not provide a source package ;-)
Did you check the manual "Writing R Extensions" and `R CMD check --help' 
to be sure what you provide meets every requirement?

Tom

> Message: 1
> Date: Thu, 23 Sep 2010 16:33:39 +0200
> From: gianni lavaredo <gianni.lavaredo at gmail.com>
> To: r-sig-geo at stat.math.ethz.ch
> Subject: [R-sig-Geo] problem to create a R library
> Message-ID:
> 	<AANLkTin-KF5BtHBMcBbKcqTJuTDVYiNZKBnGdfJEiRXV at mail.gmail.com>
> Content-Type: text/plain
>
> dear Researches,
>
> I am try to create my library but in "R CMD check" comand i have this
> message
>
> * using log directory 'C:/MyR_library/SLULidar.Rcheck'
> * using R version 2.11.1 (2010-05-31)
> * using session charset: ISO8859-1
> * checking for file 'SLULidar/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'SLULidar' version '1.0'
> * checking package dependencies ... OK
> * checking if this is a source package ... ERROR
> Only *source* packages can be checked.
>
>
> same people know what' means "checking if this is a source package ...
> ERROR"?
>
> gianni
>
> 	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Fri Sep 24 23:33:35 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 24 Sep 2010 23:33:35 +0200 (CEST)
Subject: [R-sig-Geo] Problem with spTransform en +towgs84 ?
In-Reply-To: <1374.78.149.131.24.1285354755.squirrel@paleo.ija.csic.es>
References: <38101.78.149.131.24.1285353333.squirrel@paleo.ija.csic.es>
	<1374.78.149.131.24.1285354755.squirrel@paleo.ija.csic.es>
Message-ID: <alpine.LRH.2.00.1009242320170.3309@reclus.nhh.no>

On Fri, 24 Sep 2010, jgarcia at ija.csic.es wrote:

> Hi again,
> However,in my case, if instead of the previously mentioned version in my
> linux box, I use my windows version of R:
>
>> library(rgdal)
> Loading required package: sp
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.6.3, released 2009/11/19
> Path to GDAL shared files: C:/ARCHIV~1/R/R-29~1.2/library/rgdal/gdal
> Loaded PROJ.4 runtime: Rel. 4.6.1, 21 August 2008
> Path to PROJ.4 shared files: C:/ARCHIV~1/R/R-29~1.2/library/rgdal/proj
>>
>
> The mismatch problem is solved. So, could this be, in this case, a problem
> of the PROJ.4 Rel. 4.5.0, 22 Oct 2006, or GDAL 1.4.2.0 versions in the
> linux computer?

Older releases of the EPSG database for PROJ.4 and GDAL did not 
necessarily include +towgs84= parameters for known +datum= - this has 
improved with time. The burden is, though, on users to understand that 
both the datum and the ellipsoid must be known, and in the case of 
ambiguous "datum" definitions like ED50, what the +towgs84= should be.

See projInfo("datum") for known datum definitions.

Currently, the GDAL version is 1.7.2, and PROJ.4 is 4.7.0 (but declares 
itself as 4.7.1). These are included in CRAN binaries for Windows and CRAN 
extras binaries for OSX. If you install from source under Linux, these are 
also what you should have, and Debian/Fedora packagers for GIS are usually 
not far behind, and checking for updates in some fashion should be 
possible. In R, do make a habit of running sessionInfo() and recording the 
output if you need absolutely reproducible research; then 
update.packages() to pick up bug fixes and enhancements. If you need to 
step back, all older versions of packages are also available on CRAN.

It is known that datum specifications are a problem, which is why one 
needs to be particularly careful about correct +towgs84= parameters.

Hope this helps,

Roger

>
> Thanks,
>
> Javier
> ---
>
>
>> Hi,
>> Just to add that I've also detected some problems in this sense. I've have
>> exported a shapefile from ArcGIS to KML, and also imported it into R, and
>> from there to KML. The final KML files differ in some 70m of latitude,
>> while the longitudes match.
>>
>> # import the shapefile
>>> knapdale.supgeo <- readOGR(dsn="test",layer="knapdale_supgeo")
>>> proj4string(knapdale.supgeo)
>> [1] " +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000 +y_0=-100000
>> +ellps=airy +units=m +no_defs"
>>
>> # Note, the above is OSGB 1936 / British National Grid, which  equals
>> # CRS("+init=epsg:27700")
>> # Then:
>>
>> knapdale.supgeoLL <- spTransform(knapdale.supgeo, CRS("+proj=longlat +
>> datum=WGS84"))
>> kmlf <- "knapdale_supgeo.kml"
>> writeOGR(knapdale.supgeoLL, dsn=kmlf, layer="supgeo", driver="KML")
>>
>> I'm not saying that the R part is responsible for the difference, but the
>> mismatch is there. Some details:
>>
>> ArcGIS 9.3 (Windows XP Pro)
>> R 2.10.1
>>> library(rgdal)
>> Loading required package: sp
>> Geospatial Data Abstraction Library extensions to R successfully loaded
>> Loaded GDAL runtime: GDAL 1.4.2.0, released 2007/06/27
>> Path to GDAL shared files: /usr/local/share/gdal
>> Loaded PROJ.4 runtime: Rel. 4.5.0, 22 Oct 2006
>> Path to PROJ.4 shared files: (autodetected)
>>
>> Best regards,
>> Javier
>>
>>
>>
>>> Roger,
>>>
>>> I apologize for not including version details etc, here they are:
>>> Loading required package: rgdal
>>> Geospatial Data Abstraction Library extensions to R successfully loaded
>>> Loaded GDAL runtime: GDAL 1.7.2, released 2010/04/23
>>> Path to GDAL shared files: /usr/share/gdal17
>>> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009
>>> Path to PROJ.4 shared files: (autodetected)
>>>
>>>> version
>>>                _
>>> platform       i486-pc-linux-gnu
>>> arch           i486
>>> os             linux-gnu
>>> system         i486, linux-gnu
>>> status
>>> major          2
>>> minor          11.1
>>> year           2010
>>> month          05
>>> day            31
>>> svn rev        52157
>>> language       R
>>> version.string R version 2.11.1 (2010-05-31)
>>>
>>> Also, I've put SPDF polsfl1_1000 here:
>>> https://sites.google.com/site/openfiles2/home/polsfl1_1000.rda?attredirects=0&d=1
>>>
>>> Finally, the towgs84 parameters come from the last paragraph in the pdf
>>> for The Kingdom of Spain (July) listed in the page you mention. (BTW,
>>> I recall having seen
>>> another list with slightly different parameters but cannot find it
>>> anymore)
>>> I had to put
>>> the same 3 parameters for the definition of the projection in QGIS
>>> (which qgis does not
>>> do by default, had to define a custom projection to get the datum
>>> shift working). The towgs
>>> parameters are not in the proj file of the shapefile set, at least not
>>> in the ones created
>>> by writeOGR.
>>>
>>> Hope this helps to clarify the problem. I'm still not certain that
>>> spTransform is doing anything wrong.
>>>
>>> Thanks for your help,
>>>
>>> Agus
>>>
>>>
>>> 2010/9/21 Roger Bivand <Roger.Bivand at nhh.no>:
>>>> On Tue, 21 Sep 2010, Agustin Lobo wrote:
>>>>
>>>>> Hi!
>>>>>
>>>>> Might it be that spTransform is not taking the +towgs84 string into
>>>>> account?
>>>>> I have:
>>>>>>
>>>>>> proj4string(polsfl1_1000)
>>>>>
>>>>> [1] " +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>>>>> +towgs84=-87,-98,-121"
>>>>>
>>>>> and do:
>>>>>>
>>>>>> polsfl1_1000lonlat <- spTransform(polsfl1_1000, CRS("+proj=longlat
>>>>>> +datum=WGS84"))
>>>>>> writeOGR(polsfl1_1000,
>>>>>>  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000",layer="polsfl1_1000",
>>>>>> driver="ESRI Shapefile")
>>>>>> writeOGR(polsfl1_1000lonlat,
>>>>>>  dsn="/media/TRANSCEND/FLUXPYR/FLIGHT201009/polsfl1_1000lonlat.kml",layer="polsfl1_1000",
>>>>>> driver="KML")
>>>>>
>>>>> Then, in QGIS, with reprojection on the fly activated, the 2 vectors
>>>>> are not coincident.
>>>>> Instead, a polsfl1_1000lonlatv2 made from the original polsfl1_1000
>>>>> shapefile in QGIS, is coincident.
>>>>>
>>>>> As there are 2 different programs here, I'm not positive of my
>>>>> diagnostic.
>>>>> But
>>>>> I think there is a problem with spTransform
>>>>
>>>> Could you please provide links to screen shots and input and output
>>>> data
>>>> objects, as well as sessionInfo() output? Which OS is involved, and are
>>>> spTransform() and QGIS using the same PROJ.4 library and metadata. Is
>>>> your
>>>> input actually:
>>>>
>>>> CRS("+init=epsg:23031 +towgs84=-84,-107,-120")
>>>>
>>>> with the three-parameter datum shift from:
>>>>
>>>> http://www.asprs.org/resources/GRIDS/
>>>>
>>>> of July 2000? Where does yours come from? The way QGIS treats the *.prj
>>>> file
>>>> is also of interest.
>>>>
>>>> Roger
>>>>
>>>>>
>>>>> Thanks
>>>>>
>>>>> Agus
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Economic Geography Section, Department of Economics, Norwegian School
>>>> of
>>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>>> e-mail: Roger.Bivand at nhh.no
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at stat.math.ethz.ch
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Fri Sep 24 23:45:06 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 24 Sep 2010 23:45:06 +0200 (CEST)
Subject: [R-sig-Geo] Heteroskedasticity and different Spatial Weigth
 Matrices
In-Reply-To: <4C9CB466.8040702@ec.unipi.it>
References: <4C9CB466.8040702@ec.unipi.it>
Message-ID: <alpine.LRH.2.00.1009242334130.3309@reclus.nhh.no>

On Fri, 24 Sep 2010, Angela Parenti wrote:

> Hey everyone,
>
> I'm puzzled about a recent result, and I'm wondering if anyone can help 
> explain it.
>
> I am currently estimating a growth model with many controls by OLS. 
> Looking at the residual tests I find that the Breusch-Pagan test points 
> the presence of heteroskedasticity. Moreover, looking for spatial 
> dependence in the residuals using the Moran's I test I find that with 3 
> definitions of spatial weight matrix I cannot reject the null hp of no 
> spatial dependence while with 3 different spatial weight matrices I can.
>
> Here the results in details:
>
> Breush-Pagan Test:
> BP=66.3478, p-value=0
>
> Moran'I test on regression residuals:
>
> 1) W1 is binary matrix with a cut-off=660.8 km (row-standardized):
>     Observed Moran's I=-0.02938, p-value=/0.57547/
>
> 2) W2 is the first-order contiguity matrix(row-standardized):
>     Observed Moran's I=0.1389, p-value=_0.00021_
>
> 3)  W3 is the second-order contiguity matrix(row-standardized):
>     Observed Moran's I=0.0694 , p-value=_0.00724_
>
> 4)  W4 is the matrix s.t each region has at least one neighbour- max distance 1124.710 km -(row-standardized):
>     Observed Moran's I=-0.01286, p-value=/0.91883/
>
> 5)  W5 is the matrix where weights are 1/d_ij^2  with no cut-off(row-standardized):
>     Observed Moran's I=0.03239, p-value=_0.00350_
>
> 6)  W6 is the matrix where weights are 1/exp(2*d_ij)  with no cut-off(row-standardized):
>     Observed Moran's I=0.06847, p-value=/0.15462/
>
>
> Therefore, my questions are:

> - since I find evidence of heteroskedasticity shouldn't I look for 
> aheteroskedasticity-robust version of the Moran's I? If yes, is there 
> the possibility to implement it with the function "lm.morantest"?

No, it would make no sense at all. So-called heteroskedasticity-robustness 
is used to manipulate coefficient standard errors, so has no effect on 
residuals. Believe the three tests showing that spatial autocorrelation is 
present. Also understand that BP and Moran's I may be detecting the same 
misspecification in your model.

> - what should I conclude from such different results using different 
> spatial weight matrices? It seems that the lower the number of 
> neighbours is the higher is the probability of finding spatial effects. 
> In this latter case how can I decide the "right" matrix? By looking at 
> the AIC in the maximum likelihood?
>

More neighbours will smooth more (like a larger bandwidth), so may include 
more varied residuals. In general the more parsimonious weights (fewer 
neighbours, but not fewer than sensible) will be preferable, but the 
scheme should have some motivation in your scientific field. Most models 
of (economic) growth are badly affected by the range of relative sizes of 
the observations - often leading to observed heteroskedasticity and 
residual spatial autocorrelation. In other fields than economics, it is 
usual that weighted regression is used, or more advanced methods to 
acknowledge the greater uncertainties associated with rates estimates (the 
dependent variable) for small observations.

Roger

> Thank you very much!
>
> Angela Parenti
>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From jsbarret at sfu.ca  Sat Sep 25 03:56:53 2010
From: jsbarret at sfu.ca (Jenn Barrett)
Date: Fri, 24 Sep 2010 18:56:53 -0700 (PDT)
Subject: [R-sig-Geo] Why can you not calculate Moran's i for glm() residuals?
In-Reply-To: <374309648.1169519.1285375732005.JavaMail.root@jaguar9.sfu.ca>
Message-ID: <1648993377.1171009.1285379813741.JavaMail.root@jaguar9.sfu.ca>

Hi everyone,

- I'm conducting a habitat selection analysis for which my response variable is either species richness (i.e.,counts; negative binomial distribution) or presence/absence of a species. 

- I have confirmed spatial autocorrelation in the response variables using moran.mc(), and have created correlograms to determine at what (or rather up to what) distances positive autocorrelation is present (~100km for most species and species richness). That said, some of the explanatory variables I'm including in my models may account for some of this autocorrelation, particularly at larger distance classes. 

My questions:

a) I have read several postings on this list which caution against calculating Moran's i for residuals from a glm; however, I have searched and searched this forum and the literature, and have yet to find a posting or an article that clearly explains why. A posting in April 2010, by R. Bivand comes closest, stating, in reference to lm.morantest: "Since no studies have been done to find out how accurately this test detects spatial autocorrelation in glm errors, it is premature to simply extend findings for lm objects." However, does this statement apply to the test for significance of the Moran's i statistic, or the calculation of Moran's i itself? If the latter, I'm curious to know why you would be able to calculate the value of Moran's i for residuals from an lm, but not a glm - any article or explanation would be much very appreciated.

b) I plan to use a Bayesian approach (for species richness) and an autologistic model (for presence/absence) to account for spatial autocorrelation; however, I'm stuck on what distance to use in defining my neighborhood without being able to assess the autocorrelation that remains in the residuals of the glm (k nearest neighbors is not an option here, nor does it make as much sense as a distance neighborhood for my analysis). While testing for significance of the Moran's i statistic for residuals at different distance classes is obviously preferred, I would settle for creating a correlogram and conducting a visual inspection of residual spatial autocorrelation, if this makes sense (i.e., is supported and worth more than "electron recycling" as R. Bivand put it in another thread). If not, what are possible options here? In Zuur et al. (2009 - Chap 21) the authors use a spline correlogram as per the ncf package to assess residual spatial autocorrelation from a glm (family = binomial) - is this an option? Perhaps a variogram using the gstat package? 

And on a side note:
c) The spdep() manual states that for lm.morantest "offsets should not be used" in the lm model...Again: why? (yes, my model includes an offset).


Cheers and many thanks,
Jenn


From Maxime.Pauwels at univ-lille1.fr  Mon Sep 27 11:59:17 2010
From: Maxime.Pauwels at univ-lille1.fr (Maxime Pauwels)
Date: Mon, 27 Sep 2010 11:59:17 +0200
Subject: [R-sig-Geo] Error in ContourLines2SLDF(CLrp) : cL too short
Message-ID: <4CA06AF5.7070202@univ-lille1.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100927/37e991f6/attachment.pl>

From adrian at maths.uwa.edu.au  Mon Sep 27 11:57:42 2010
From: adrian at maths.uwa.edu.au (Adrian Baddeley)
Date: Mon, 27 Sep 2010 17:57:42 +0800
Subject: [R-sig-Geo]  Question of ppm warnings of print.ppm
Message-ID: <4CA06A96.5000908@maths.uwa.edu.au>

caspar hallmann <caspar.hallmann at gmail.com> writes:

 > I am attempting to fit an inhomogeneous poisson point process to some
 > point pattern data, using ppm from spatstat (v 1.17-5).

This version is out-of-date.
The current version of spatstat is 1.20-3.
Try upgrading the package and seeing if you still encounter this problem.

Adrian Baddeley

====

 > I have been found guilty of having NA values in my
 > covariate-images (a categorical variable),
 > and have thus been receiving a lot of warnings.

 > Having fitted my model and in attempt to print a summary
 > (or the ppm model) my screen is cluttered with

  > ..$ na.covariates:List of 3
 >   .. ..$ covnames.na  : chr "habitat"
  >  .. ..$ quadpoints.na: logi [1:4219, 1]
 >              FALSE FALSE FALSE FALSE FALSE FALSE ...
 >  .. ..$ print        : chr "Values of the covariate ?habitat? were NA
 > or undefined at 7.8% (327 out of 4219) of the quadrature points"

 > replicated uncountable times, and not allowing me to see any of the
 > useful results.


From Roger.Bivand at nhh.no  Mon Sep 27 13:34:53 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 27 Sep 2010 13:34:53 +0200 (CEST)
Subject: [R-sig-Geo] Error in ContourLines2SLDF(CLrp) : cL too short
In-Reply-To: <4CA06AF5.7070202@univ-lille1.fr>
References: <4CA06AF5.7070202@univ-lille1.fr>
Message-ID: <alpine.LRH.2.00.1009271332420.14165@reclus.nhh.no>

On Mon, 27 Sep 2010, Maxime Pauwels wrote:

>  Hi list,
>
> I have a message error using contourLines  and ContourLines2SLDF
> functions (maptools package).
>
> rangerp<-read.table("NAhalleri.txt", header=T)
> coordinates(rangerp)=~long+lat
> gridded(rangerp)=TRUE
> proj4string(rangerp)<-CRS("+proj=longlat")
> imgrp<-as(rangerp,"SpatialGridDataFrame")
> img1rp<-as.image.SpatialGridDataFrame(imgrp["V1"])
> CLrp<-contourLines(img1rp, levels=0.0000878882)
> CLSLrp<-ContourLines2SLDF(CLrp)
> /Error in ContourLines2SLDF(CLrp) : cL too short/
>
> Could anyone help understant what happens?

The levels= value is outside the range of values in img1rp:

library(maptools)
image(volcano)
summary(c(volcano))
CLrp <- contourLines(volcano, levels=70)
CLSLrp<-ContourLines2SLDF(CLrp)
# error
CLrp <- contourLines(volcano, levels=170)
CLSLrp<-ContourLines2SLDF(CLrp)
plot(CLSLrp, add=TRUE)
# OK

Hope this helps,

Roger

> Can the input table be too long (3 columns, but almost 300 000 lines)?
>
> Many thanks,
>
> Maxime
>
> Maxime Pauwels
> Researcher ID: http://www.researcherid.com/rid/A-1745-2009
>
> Laboratoire de G?n?tique et Evolution des Populations V?g?tales
> FRE CNRS 3268
> Universit? de Lille, USTL-Lille1
> http://gepv.univ-lille1.fr
> Tel  : +33 3 20 33 62 38
> Fax  : +33 3 20 43 69 79
>
> ?Impose ta chance, serre ton bonheur et va vers ton risque. A te regarder, ils s'habitueront.?
> Ren? Char
>
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From tgriffin at uaex.edu  Mon Sep 27 14:31:18 2010
From: tgriffin at uaex.edu (Terry Griffin)
Date: Mon, 27 Sep 2010 07:31:18 -0500 (CDT)
Subject: [R-sig-Geo] Error in ContourLines2SLDF(CLrp) : cL too short
Message-ID: <1018340776.10329041285590678810.JavaMail.root@zmail.uaex.edu>





-----Original Message-----
From: Roger Bivand <Roger.Bivand at nhh.no>
Sent: Monday, September 27, 2010 6:36 AM
To: Maxime Pauwels <Maxime.Pauwels at univ-lille1.fr>
Cc: r-sig-geo at stat.math.ethz.ch
Subject: Re: [R-sig-Geo] Error in ContourLines2SLDF(CLrp) : cL too short

On Mon, 27 Sep 2010, Maxime Pauwels wrote:

>  Hi list,
>
> I have a message error using contourLines  and ContourLines2SLDF
> functions (maptools package).
>
> rangerp<-read.table("NAhalleri.txt", header=T)
> coordinates(rangerp)=~long+lat
> gridded(rangerp)=TRUE
> proj4string(rangerp)<-CRS("+proj=longlat")
> imgrp<-as(rangerp,"SpatialGridDataFrame")
> img1rp<-as.image.SpatialGridDataFrame(imgrp["V1"])
> CLrp<-contourLines(img1rp, levels=0.0000878882)
> CLSLrp<-ContourLines2SLDF(CLrp)
> /Error in ContourLines2SLDF(CLrp) : cL too short/
>
> Could anyone help understant what happens?

The levels= value is outside the range of values in img1rp:

library(maptools)
image(volcano)
summary(c(volcano))
CLrp <- contourLines(volcano, levels=70)
CLSLrp<-ContourLines2SLDF(CLrp)
# error
CLrp <- contourLines(volcano, levels=170)
CLSLrp<-ContourLines2SLDF(CLrp)
plot(CLSLrp, add=TRUE)
# OK

Hope this helps,

Roger

> Can the input table be too long (3 columns, but almost 300 000 lines)?
>
> Many thanks,
>
> Maxime
>
> Maxime Pauwels
> Researcher ID: http://www.researcherid.com/rid/A-1745-2009
>
> Laboratoire de G?n?tique et Evolution des Populations V?g?tales
> FRE CNRS 3268
> Universit? de Lille, USTL-Lille1
> http://gepv.univ-lille1.fr
> Tel  : +33 3 20 33 62 38
> Fax  : +33 3 20 43 69 79
>
> ?Impose ta chance, serre ton bonheur et va vers ton risque. A te regarder, ils s'habitueront.?
> Ren? Char
>
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Maxime.Pauwels at univ-lille1.fr  Mon Sep 27 15:57:43 2010
From: Maxime.Pauwels at univ-lille1.fr (Maxime Pauwels)
Date: Mon, 27 Sep 2010 15:57:43 +0200
Subject: [R-sig-Geo] Error in ContourLines2SLDF(CLrp) : cL too short
In-Reply-To: <alpine.LRH.2.00.1009271332420.14165@reclus.nhh.no>
References: <4CA06AF5.7070202@univ-lille1.fr>
	<alpine.LRH.2.00.1009271332420.14165@reclus.nhh.no>
Message-ID: <4CA0A2D7.8050800@univ-lille1.fr>

  Hi,

can't be so easy.
summary(imgrp)
#gives
#Object of class SpatialGridDataFrame
#Coordinates:
# min max
#long -4.520934 30.02093
#lat 39.978933 55.02107
#Is projected: FALSE
#proj4string : [+proj=longlat]
#Number of points: 2
#Grid attributes:
# cellcentre.offset cellsize cells.dim
#long -4.5 0.04186893 825
#lat 40.0 0.04213483 357
#Data attributes:
# Min. 1st Qu. Median Mean 3rd Qu. Max.
#5.23000e-08 4.45000e-06 2.26000e-05 1.98700e-04 1.90000e-04 6.01600e-03
NA's
1.97048e+05

However, I have a problem since:
range(img1rp)
#[1] NA NA

max



Le 27/09/2010 13:34, Roger Bivand a ?crit :
> On Mon, 27 Sep 2010, Maxime Pauwels wrote:
>
>> Hi list,
>>
>> I have a message error using contourLines and ContourLines2SLDF
>> functions (maptools package).
>>
>> rangerp<-read.table("NAhalleri.txt", header=T)
>> coordinates(rangerp)=~long+lat
>> gridded(rangerp)=TRUE
>> proj4string(rangerp)<-CRS("+proj=longlat")
>> imgrp<-as(rangerp,"SpatialGridDataFrame")
>> img1rp<-as.image.SpatialGridDataFrame(imgrp["V1"])
>> CLrp<-contourLines(img1rp, levels=0.0000878882)
>> CLSLrp<-ContourLines2SLDF(CLrp)
>> /Error in ContourLines2SLDF(CLrp) : cL too short/
>>
>> Could anyone help understant what happens?
>
> The levels= value is outside the range of values in img1rp:
>
> library(maptools)
> image(volcano)
> summary(c(volcano))
> CLrp <- contourLines(volcano, levels=70)
> CLSLrp<-ContourLines2SLDF(CLrp)
> # error
> CLrp <- contourLines(volcano, levels=170)
> CLSLrp<-ContourLines2SLDF(CLrp)
> plot(CLSLrp, add=TRUE)
> # OK
>
> Hope this helps,
>
> Roger
>
>> Can the input table be too long (3 columns, but almost 300 000 lines)?
>>
>> Many thanks,
>>
>> Maxime
>>
>> Maxime Pauwels
>> Researcher ID: http://www.researcherid.com/rid/A-1745-2009
>>
>> Laboratoire de G?n?tique et Evolution des Populations V?g?tales
>> FRE CNRS 3268
>> Universit? de Lille, USTL-Lille1
>> http://gepv.univ-lille1.fr
>> Tel : +33 3 20 33 62 38
>> Fax : +33 3 20 43 69 79
>>
>> ?Impose ta chance, serre ton bonheur et va vers ton risque. A te 
>> regarder, ils s'habitueront.?
>> Ren? Char
>>
>>
>> [[alternative HTML version deleted]]
>>
>>
>


-- 
Maxime Pauwels
Researcher ID: http://www.researcherid.com/rid/A-1745-2009

Laboratoire de G?n?tique et Evolution des Populations V?g?tales
FRE CNRS 3268
Universit? de Lille, USTL-Lille1
http://gepv.univ-lille1.fr
Tel  : +33 3 20 33 62 38
Fax  : +33 3 20 43 69 79
			
?Impose ta chance, serre ton bonheur et va vers ton risque. A te regarder, ils s?habitueront.?
Ren? Char


From Maxime.Pauwels at univ-lille1.fr  Mon Sep 27 16:43:25 2010
From: Maxime.Pauwels at univ-lille1.fr (Maxime Pauwels)
Date: Mon, 27 Sep 2010 16:43:25 +0200
Subject: [R-sig-Geo] Error in ContourLines2SLDF(CLrp) : cL too short
In-Reply-To: <alpine.LRH.2.00.1009271332420.14165@reclus.nhh.no>
References: <4CA06AF5.7070202@univ-lille1.fr>
	<alpine.LRH.2.00.1009271332420.14165@reclus.nhh.no>
Message-ID: <4CA0AD8D.1050706@univ-lille1.fr>

If you want to test the input, please find it here:

https://bigfile.univ-lille1.fr/get?k=sgVm6qmUdiCddAJlpzh

Maxime

Le 27/09/2010 13:34, Roger Bivand a ?crit :
> On Mon, 27 Sep 2010, Maxime Pauwels wrote:
>
>> Hi list,
>>
>> I have a message error using contourLines and ContourLines2SLDF
>> functions (maptools package).
>>
>> rangerp<-read.table("NAhalleri.txt", header=T)
>> coordinates(rangerp)=~long+lat
>> gridded(rangerp)=TRUE
>> proj4string(rangerp)<-CRS("+proj=longlat")
>> imgrp<-as(rangerp,"SpatialGridDataFrame")
>> img1rp<-as.image.SpatialGridDataFrame(imgrp["V1"])
>> CLrp<-contourLines(img1rp, levels=0.0000878882)
>> CLSLrp<-ContourLines2SLDF(CLrp)
>> /Error in ContourLines2SLDF(CLrp) : cL too short/
>>
>> Could anyone help understant what happens?
>
> The levels= value is outside the range of values in img1rp:
>
> library(maptools)
> image(volcano)
> summary(c(volcano))
> CLrp <- contourLines(volcano, levels=70)
> CLSLrp<-ContourLines2SLDF(CLrp)
> # error
> CLrp <- contourLines(volcano, levels=170)
> CLSLrp<-ContourLines2SLDF(CLrp)
> plot(CLSLrp, add=TRUE)
> # OK
>
> Hope this helps,
>
> Roger
>
>> Can the input table be too long (3 columns, but almost 300 000 lines)?
>>
>> Many thanks,
>>
>> Maxime
>>
>> Maxime Pauwels
>> Researcher ID: http://www.researcherid.com/rid/A-1745-2009
>>
>> Laboratoire de G?n?tique et Evolution des Populations V?g?tales
>> FRE CNRS 3268
>> Universit? de Lille, USTL-Lille1
>> http://gepv.univ-lille1.fr
>> Tel : +33 3 20 33 62 38
>> Fax : +33 3 20 43 69 79
>>
>> ?Impose ta chance, serre ton bonheur et va vers ton risque. A te
>> regarder, ils s'habitueront.?
>> Ren? Char
>>
>>
>> [[alternative HTML version deleted]]
>>
>>
>


-- 
Maxime Pauwels
Researcher ID: http://www.researcherid.com/rid/A-1745-2009

Laboratoire de G?n?tique et Evolution des Populations V?g?tales
FRE CNRS 3268
Universit? de Lille, USTL-Lille1
http://gepv.univ-lille1.fr
Tel  : +33 3 20 33 62 38
Fax  : +33 3 20 43 69 79
			
?Impose ta chance, serre ton bonheur et va vers ton risque. A te 
regarder, ils s?habitueront.?
Ren? Char


From Roger.Bivand at nhh.no  Mon Sep 27 17:37:32 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 27 Sep 2010 17:37:32 +0200 (CEST)
Subject: [R-sig-Geo] Error in ContourLines2SLDF(CLrp) : cL too short
In-Reply-To: <4CA0AD8D.1050706@univ-lille1.fr>
References: <4CA06AF5.7070202@univ-lille1.fr>
	<alpine.LRH.2.00.1009271332420.14165@reclus.nhh.no>
	<4CA0AD8D.1050706@univ-lille1.fr>
Message-ID: <alpine.LRH.2.00.1009271733580.15855@reclus.nhh.no>

On Mon, 27 Sep 2010, Maxime Pauwels wrote:

> If you want to test the input, please find it here:
>
> https://bigfile.univ-lille1.fr/get?k=sgVm6qmUdiCddAJlpzh

image(rangerp)
image(imgrp)

suggest that contour() will fail, as it does. Are you sure that the input 
data are correctly organised?

Roger

>
> Maxime
>
> Le 27/09/2010 13:34, Roger Bivand a ?crit :
>> On Mon, 27 Sep 2010, Maxime Pauwels wrote:
>> 
>>> Hi list,
>>> 
>>> I have a message error using contourLines and ContourLines2SLDF
>>> functions (maptools package).
>>> 
>>> rangerp<-read.table("NAhalleri.txt", header=T)
>>> coordinates(rangerp)=~long+lat
>>> gridded(rangerp)=TRUE
>>> proj4string(rangerp)<-CRS("+proj=longlat")
>>> imgrp<-as(rangerp,"SpatialGridDataFrame")
>>> img1rp<-as.image.SpatialGridDataFrame(imgrp["V1"])
>>> CLrp<-contourLines(img1rp, levels=0.0000878882)
>>> CLSLrp<-ContourLines2SLDF(CLrp)
>>> /Error in ContourLines2SLDF(CLrp) : cL too short/
>>> 
>>> Could anyone help understant what happens?
>> 
>> The levels= value is outside the range of values in img1rp:
>> 
>> library(maptools)
>> image(volcano)
>> summary(c(volcano))
>> CLrp <- contourLines(volcano, levels=70)
>> CLSLrp<-ContourLines2SLDF(CLrp)
>> # error
>> CLrp <- contourLines(volcano, levels=170)
>> CLSLrp<-ContourLines2SLDF(CLrp)
>> plot(CLSLrp, add=TRUE)
>> # OK
>> 
>> Hope this helps,
>> 
>> Roger
>> 
>>> Can the input table be too long (3 columns, but almost 300 000 lines)?
>>> 
>>> Many thanks,
>>> 
>>> Maxime
>>> 
>>> Maxime Pauwels
>>> Researcher ID: http://www.researcherid.com/rid/A-1745-2009
>>> 
>>> Laboratoire de G?n?tique et Evolution des Populations V?g?tales
>>> FRE CNRS 3268
>>> Universit? de Lille, USTL-Lille1
>>> http://gepv.univ-lille1.fr
>>> Tel : +33 3 20 33 62 38
>>> Fax : +33 3 20 43 69 79
>>> 
>>> ?Impose ta chance, serre ton bonheur et va vers ton risque. A te
>>> regarder, ils s'habitueront.?
>>> Ren? Char
>>> 
>>> 
>>> [[alternative HTML version deleted]]
>>> 
>>> 
>> 
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From caspar.hallmann at gmail.com  Mon Sep 27 17:56:58 2010
From: caspar.hallmann at gmail.com (caspar hallmann)
Date: Mon, 27 Sep 2010 17:56:58 +0200
Subject: [R-sig-Geo] Question of ppm warnings of print.ppm
In-Reply-To: <4CA06A96.5000908@maths.uwa.edu.au>
References: <4CA06A96.5000908@maths.uwa.edu.au>
Message-ID: <AANLkTingNFGKZmF62XvACDcYCjvro4uo6Te0GDZhHt1o@mail.gmail.com>

Hi Adrian,

you are right, the latest version does not behave like that.
Thanks a lot

Caspar

On Mon, Sep 27, 2010 at 11:57 AM, Adrian Baddeley
<adrian at maths.uwa.edu.au> wrote:
> caspar hallmann <caspar.hallmann at gmail.com> writes:
>
>> I am attempting to fit an inhomogeneous poisson point process to some
>> point pattern data, using ppm from spatstat (v 1.17-5).
>
> This version is out-of-date.
> The current version of spatstat is 1.20-3.
> Try upgrading the package and seeing if you still encounter this problem.
>
> Adrian Baddeley
>
> ====
>
>> I have been found guilty of having NA values in my
>> covariate-images (a categorical variable),
>> and have thus been receiving a lot of warnings.
>
>> Having fitted my model and in attempt to print a summary
>> (or the ppm model) my screen is cluttered with
>
> ?> ..$ na.covariates:List of 3
>> ? .. ..$ covnames.na ?: chr "habitat"
> ?> ?.. ..$ quadpoints.na: logi [1:4219, 1]
>> ? ? ? ? ? ? ?FALSE FALSE FALSE FALSE FALSE FALSE ...
>> ?.. ..$ print ? ? ? ?: chr "Values of the covariate ?habitat? were NA
>> or undefined at 7.8% (327 out of 4219) of the quadrature points"
>
>> replicated uncountable times, and not allowing me to see any of the
>> useful results.
>
>
>
>


From gianni.lavaredo at gmail.com  Mon Sep 27 18:45:07 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Mon, 27 Sep 2010 18:45:07 +0200
Subject: [R-sig-Geo] help to find a link how to write syntax the package
	manual
Message-ID: <AANLkTinzUHqdG9Yn_hFJSo-+Kne-42q7+BC4YLOY-k9O@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100927/67a3958d/attachment.pl>

From sarah.goslee at gmail.com  Mon Sep 27 18:48:51 2010
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Mon, 27 Sep 2010 12:48:51 -0400
Subject: [R-sig-Geo] help to find a link how to write syntax the package
	manual
In-Reply-To: <AANLkTinzUHqdG9Yn_hFJSo-+Kne-42q7+BC4YLOY-k9O@mail.gmail.com>
References: <AANLkTinzUHqdG9Yn_hFJSo-+Kne-42q7+BC4YLOY-k9O@mail.gmail.com>
Message-ID: <AANLkTik4awPA=C7PXm8Yq-YjS=DqNnQc2t6Egs5AxG3+@mail.gmail.com>

Hi Gianni,

The Writing R Packages manual has some information, as does this document
about the Rd parser:
developer.r-project.org/parseRd.pdf

In your specific case, try this:

mysample: \cr
sample1 \cr
sample2 \cr
sample3 \cr
sample4 \cr
sample5 \cr

Sarah

On Mon, Sep 27, 2010 at 12:45 PM, gianni lavaredo
<gianni.lavaredo at gmail.com> wrote:
> Dear Researchers, is there a link where i can study the syntax of latex to
> write the manual in R?
>
> ex: i wish to have in the final pdf and html
>
> my sample:
> sample1
> sample2
> sample3
> sample4
> sample5
>
> but i have
> mysample:sample1sample2sample3sample4sample5
>
> gianni


-- 
Sarah Goslee
http://www.functionaldiversity.org


From Maxime.Pauwels at univ-lille1.fr  Mon Sep 27 18:58:57 2010
From: Maxime.Pauwels at univ-lille1.fr (Maxime Pauwels)
Date: Mon, 27 Sep 2010 18:58:57 +0200
Subject: [R-sig-Geo] Error in ContourLines2SLDF(CLrp) : cL too short
In-Reply-To: <alpine.LRH.2.00.1009271733580.15855@reclus.nhh.no>
References: <4CA06AF5.7070202@univ-lille1.fr>
	<alpine.LRH.2.00.1009271332420.14165@reclus.nhh.no>
	<4CA0AD8D.1050706@univ-lille1.fr>
	<alpine.LRH.2.00.1009271733580.15855@reclus.nhh.no>
Message-ID: <4CA0CD51.6050700@univ-lille1.fr>

  Thanks Roger,

I finally found the solution. It was indeed in the organization of the 
input file.

Best regards

Maxime

Le 27/09/2010 17:37, Roger Bivand a ?crit :
> On Mon, 27 Sep 2010, Maxime Pauwels wrote:
>
>> If you want to test the input, please find it here:
>>
>> https://bigfile.univ-lille1.fr/get?k=sgVm6qmUdiCddAJlpzh
>
> image(rangerp)
> image(imgrp)
>
> suggest that contour() will fail, as it does. Are you sure that the 
> input data are correctly organised?
>
> Roger
>
>>
>> Maxime
>>
>> Le 27/09/2010 13:34, Roger Bivand a ?crit :
>>> On Mon, 27 Sep 2010, Maxime Pauwels wrote:
>>>
>>>> Hi list,
>>>>
>>>> I have a message error using contourLines and ContourLines2SLDF
>>>> functions (maptools package).
>>>>
>>>> rangerp<-read.table("NAhalleri.txt", header=T)
>>>> coordinates(rangerp)=~long+lat
>>>> gridded(rangerp)=TRUE
>>>> proj4string(rangerp)<-CRS("+proj=longlat")
>>>> imgrp<-as(rangerp,"SpatialGridDataFrame")
>>>> img1rp<-as.image.SpatialGridDataFrame(imgrp["V1"])
>>>> CLrp<-contourLines(img1rp, levels=0.0000878882)
>>>> CLSLrp<-ContourLines2SLDF(CLrp)
>>>> /Error in ContourLines2SLDF(CLrp) : cL too short/
>>>>
>>>> Could anyone help understant what happens?
>>>
>>> The levels= value is outside the range of values in img1rp:
>>>
>>> library(maptools)
>>> image(volcano)
>>> summary(c(volcano))
>>> CLrp <- contourLines(volcano, levels=70)
>>> CLSLrp<-ContourLines2SLDF(CLrp)
>>> # error
>>> CLrp <- contourLines(volcano, levels=170)
>>> CLSLrp<-ContourLines2SLDF(CLrp)
>>> plot(CLSLrp, add=TRUE)
>>> # OK
>>>
>>> Hope this helps,
>>>
>>> Roger
>>>
>>>> Can the input table be too long (3 columns, but almost 300 000 lines)?
>>>>
>>>> Many thanks,
>>>>
>>>> Maxime
>>>>
>>>> Maxime Pauwels
>>>> Researcher ID: http://www.researcherid.com/rid/A-1745-2009
>>>>
>>>> Laboratoire de G?n?tique et Evolution des Populations V?g?tales
>>>> FRE CNRS 3268
>>>> Universit? de Lille, USTL-Lille1
>>>> http://gepv.univ-lille1.fr
>>>> Tel : +33 3 20 33 62 38
>>>> Fax : +33 3 20 43 69 79
>>>>
>>>> ?Impose ta chance, serre ton bonheur et va vers ton risque. A te
>>>> regarder, ils s'habitueront.?
>>>> Ren? Char
>>>>
>>>>
>>>> [[alternative HTML version deleted]]
>>>>
>>>>
>>>
>>
>>
>>
>


-- 
Maxime Pauwels
Researcher ID: http://www.researcherid.com/rid/A-1745-2009

Laboratoire de G?n?tique et Evolution des Populations V?g?tales
FRE CNRS 3268
Universit? de Lille, USTL-Lille1
http://gepv.univ-lille1.fr
Tel  : +33 3 20 33 62 38
Fax  : +33 3 20 43 69 79
			
?Impose ta chance, serre ton bonheur et va vers ton risque. A te regarder, ils s?habitueront.?
Ren? Char


From gianni.lavaredo at gmail.com  Tue Sep 28 11:15:55 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Tue, 28 Sep 2010 11:15:55 +0200
Subject: [R-sig-Geo] using \tab in Rd files
Message-ID: <AANLkTimYMNLZWtX8b3G6U0LbUno9a5+TfwcXXuLm_sKn@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100928/65201636/attachment.pl>

From e.o.folmer at gmail.com  Tue Sep 28 12:47:41 2010
From: e.o.folmer at gmail.com (Eelke Folmer)
Date: Tue, 28 Sep 2010 12:47:41 +0200
Subject: [R-sig-Geo] impacts in spdep does not work for me when there is
	only one predictor
Message-ID: <4CA1C7CD.7010808@gmail.com>

Dear Roger and others,

Using the impacts function in spdep to calculate distributions (on the 
regression parameters from the spatial lag model) I encountered the 
following problem: when there is only one exogenous predictor in the 
model the impacts function won't give the output summary of the mcmc 
simulations. Given the time the function takes to produce the error I 
think that the simulations do run.

I tried the same on the columbus data where it also happens

example(columbus)
listw <- nb2listw(col.gal.nb)
lobj  <- lagsarlm(CRIME ~ INC, columbus, listw)
summary(lobj)
imp   <- impacts(lobj, listw=birds.wlist, R=100)
summary(imp,  zstats=TRUE)

Error in dimnames(x) <- dn :
   length of 'dimnames' [2] not equal to array extent

lobj  <- lagsarlm(CRIME ~ INC + HOVAL, columbus, listw)
summary(lobj)
imp   <- impacts(lobj, listw=birds.wlist, R=100)
summary(imp,  zstats=TRUE)

works fine.

I hope I didn't miss anything obvious.
Thanks in advance,
Eelke


From edzer.pebesma at uni-muenster.de  Tue Sep 28 21:27:37 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 28 Sep 2010 21:27:37 +0200
Subject: [R-sig-Geo] spplot question
In-Reply-To: <4CA212A4.1070504@engr.colostate.edu>
References: <4AAA7C68.8000802@engr.colostate.edu>
	<4AAAA0DC.1050700@uni-muenster.de>
	<4AAAA386.5000103@engr.colostate.edu>
	<alpine.LRH.2.00.0909112138510.2016@reclus.nhh.no>
	<4AAAAA66.50201@uni-muenster.de>
	<4CA212A4.1070504@engr.colostate.edu>
Message-ID: <4CA241A9.5030605@uni-muenster.de>

Eric, forgive me my rudeness to answer a private email to the list, but
for some reason I cannot find the original on the list, and also not in
its archives -- are you sure it arrived at r-sig-geo?

The question was why

spplot(lzm.krige.dir["var1.pred"], scales=list(draw=TRUE),
xlab="Easting",ylab="Northing",
cuts=seq(0.0,0.4,by=0.01),key.space="right",cex=1.1,col.regions=terrain.colors(41),

  main="Specific Yield Layer 1",sp.layout=list(pts))

results in two warnings and a useless plot.

The answer is that the spplot documentation is wrong. cuts is directly
passed to levelplot, and the documentation there states that it can only
contain the number of cuts, not more.

(this is not the case when using spplot on a SpatialPointsDataFrame
object, as in that case it is processed by the sp code.)

You can control the values where color changes with the "at" element of
a list passed to the colorkey argument, see ?levelplot after loading
library lattice.

Thanks for notifying, best regards,


On 09/28/2010 06:07 PM, Eric Morway wrote:
>  Hello Edzer,
> 
> I've written you in the past with an spplot question (found below or at
> http://r.789695.n4.nabble.com/sppolot-fill-below-minimum-legend-value-td902841.html#a902841). 
> I've recently posted a related question
> (http://r.789695.n4.nabble.com/spplot-cuts-td2716237.html#a2716237) but
> noticed today that it doesn't seem to be generating much interest.  I
> was hoping you might be able to consider the post.  Why does the spplot
> function call generate warnings and plot with a solid color when
> cuts=seq(0.0,0.4,by=0.01) instead of cuts=25?
> 
> Very Humbly,
> Eric Morway
> 
> On 9/11/2009 1:52 PM, Edzer Pebesma wrote:
>> Ah, I see. Then, if you include the 0.1 in the legend, you will not like
>> that the range 0.1-10 will cover the same legend space as 10-1000, on
>> the log-scale. To avoid this, renumber the<10 values e.g. to 9, and
>> label the 9 as 0.1 -- meaning that labels can not equal
>> as.character(cuts) anymore.
>> -- 
>> Edzer
>>
>> Roger Bivand wrote:
>>> On Fri, 11 Sep 2009, Eric Morway wrote:
>>>
>>>> Edzer,
>>>>
>>>> I apologize for the confusion.  Is there an option in spplot that
>>>> fills in blank/white cells (I'm assuming they are blank because they
>>>> have a value less than the minimum cut) with the minimum color on the
>>>> legend bar (in this case green)?  About a quarter of the way in from
>>>> the left edge of the image you'll notice a "hole" in the plot due to
>>>> these cells having values less than 10.  I would like to fill these
>>>> cells in without altering the legend, if possible.
>>> No, please see the help page for levelplot() in lattice, the at=
>>> argument is describes as follows:
>>>
>>>        at: numeric vector giving breakpoints along the range of 'z'.
>>>            Contours (if any) will be drawn at these heights, and the
>>>            regions in between would be colored using 'col.regions'.  In
>>>            the latter case, values outside the range of 'at' will not be
>>>            drawn at all.  This serves as a way to limit the range of the
>>>            data shown, similar to what a 'zlim' argument might have been
>>>            used for.  However, this also means that when supplying 'at'
>>>            explicitly, one has to be careful to include values outside
>>>            the range of 'z' to ensure that all the data are shown.
>>>
>>> So you'll need to adjust your at= to accommodate all of the data.
>>>
>>> Roger
>>>
>>>
>>>> Thanks, Eric
>>>>
>>>> Edzer Pebesma wrote:
>>>>> Eric, I've been reading your email over and over, but cannot
>>>>> understand
>>>>> what you want. I also could not find a question, despite your subject.
>>>>> -- 
>>>>> Edzer
>>>>>
>>>>> Eric Morway wrote:
>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> I've been working on an image created with spplot and with help have
>>>>>> gotten it very close to the final product.  One final modification I
>>>>>> would like to make involves filling in grid cells with values less
>>>>>> than the minimum value on the legend with the color corresponding to
>>>>>> the bottom of the legend.  In the attached figure, the minimum legend
>>>>>> value is 10, but there a few spots with values as low as 0.01. These
>>>>>> cells are currently blank/white.  I would like to avoid including
>>>>>> this
>>>>>> value on my legend due to the color spread on the plot becoming
>>>>>> homologous, that is, I would like the color spread to be maximized
>>>>>> between 10-1000.  Were I to go from 0.01-1000, the range I'm most
>>>>>> interested in (10-1000) would be confined to a more narrow range of
>>>>>> the legend.  I have played around with trying to specify a different
>>>>>> number of cuts for the legend vs plot area, but this causes a
>>>>>> disconnect between the legend and the colors displayed for the
>>>>>> different grid cells.  The spplot line looks like this (image
>>>>>> attached):
>>>>>>
>>>>>> pts<-list("sp.points",K.dat,pch=3,col="black",labels=as.character(K.dat$Kh))
>>>>>>
>>>>>>
>>>>>>
>>>>>> cuts<-c(10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1000)
>>>>>>
>>>>>>
>>>>>>
>>>>>> spplot(lzm.krige.dir["var1.pred"],at=cuts,colorkey=list(at=log10(cuts),labels=as.character(cuts)),scales=list(draw=TRUE),
>>>>>>
>>>>>>
>>>>>>  
>>>>>> xlab="Easting",ylab="Northing",key.space="right",cex=1.1,col.regions=terrain.colors(22),main="Hydraulic
>>>>>>
>>>>>>
>>>>>> Conductivity of Layer 2",sp.layout=list(pts))
>>>>>>
>>>>>> Respectfully,
>>>>>> Eric Morway
>>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>>
>>>>>>
>>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>>
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at stat.math.ethz.ch
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From Roger.Bivand at nhh.no  Tue Sep 28 21:47:07 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 28 Sep 2010 21:47:07 +0200 (CEST)
Subject: [R-sig-Geo] impacts in spdep does not work for me when there is
 only one predictor
In-Reply-To: <4CA1C7CD.7010808@gmail.com>
References: <4CA1C7CD.7010808@gmail.com>
Message-ID: <alpine.LRH.2.00.1009282145001.23419@reclus.nhh.no>

On Tue, 28 Sep 2010, Eelke Folmer wrote:

> Dear Roger and others,
>
> Using the impacts function in spdep to calculate distributions (on the 
> regression parameters from the spatial lag model) I encountered the following 
> problem: when there is only one exogenous predictor in the model the impacts 
> function won't give the output summary of the mcmc simulations. Given the 
> time the function takes to produce the error I think that the simulations do 
> run.

Thanks for a clear report and reproducible example. I'll confirm when a 
fix has been committed to R-forge - it is caused ny matrix dimensions 
being dropped when there is only one row or column in some settings.

Best wishes,

Roger

>
> I tried the same on the columbus data where it also happens
>
> example(columbus)
> listw <- nb2listw(col.gal.nb)
> lobj  <- lagsarlm(CRIME ~ INC, columbus, listw)
> summary(lobj)
> imp   <- impacts(lobj, listw=birds.wlist, R=100)
> summary(imp,  zstats=TRUE)
>
> Error in dimnames(x) <- dn :
>  length of 'dimnames' [2] not equal to array extent
>
> lobj  <- lagsarlm(CRIME ~ INC + HOVAL, columbus, listw)
> summary(lobj)
> imp   <- impacts(lobj, listw=birds.wlist, R=100)
> summary(imp,  zstats=TRUE)
>
> works fine.
>
> I hope I didn't miss anything obvious.
> Thanks in advance,
> Eelke
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From mdsumner at gmail.com  Wed Sep 29 04:27:31 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 29 Sep 2010 12:27:31 +1000
Subject: [R-sig-Geo] auto-calcuations for Spatial objects
Message-ID: <AANLkTikudNqdnCvAo5AHJhaoG=b0dNPhyCJ4NL+mfX1B@mail.gmail.com>

Hello,

I've been experimenting with additions to the trip class to
automatically calculate metrics such as distance, bearing and
turning angle. It's pretty simple since the only function that
needs to know about this is the constructor, and it updates
automatically for subsetting and so on. The problem is in
decisions regarding which methods to calculate. If the data is
longitude / latitude then ellipsoid measurements can be applied, and
if projected, apply Euclidean methods. But this is not so obvious for
bearings and angles, since those calculations do really need to
be spherical. If the projection metadata is not set it seems
wrong to assume one way or the other, but if it is set then we
can always transform to long/lat in order to be consistent. The
other issue is that these things could be unit-based, especially
important for speed (we naturally use metres/second in most map
projections and R's base time class, but kilometres and hours?
when working in long/lat).

I'm tempted to enforce the need for projection metadata - without it
there are just too many ambiguities.

I don't have any clearer thoughts than that, just wanted to put
it out there for discussion. It's mostly relevant to trip objects
that can be subsetted or updated in different ways as a sort of
hybrid between a "point" and "line segment" interpretation, but
could be useful for SpatialPolygons/Lines - especially when rgeos
brings more capability for manipulating these objects?

Another problem is the "specialness" of metrics, whether they are
protected from the general attribute data as coordinates are. This is
not so bad as long as it's clear to the user that any edits on these
attributes are likely to be lost!  I've long thought that I should similarly
protect the Time and ID attributes for trips, perhaps treat time as a
coordinate
and ID as a simple index identifier. I've tried this but haven't
committed anything
or investigated how disruptive it would be to the existing methods.

A minor question regards whether to take a "to next" or "from
previous" line segment model.

So, in summary:

 - detect projection metadata and calculate metrics if this is set
 - if CRS is NA, do no calculations
 - consider ellipsoid distance, spherical bearing/angle, speed in m/s
   and options for user control over defaults
 - add distPrev, aziPrev, trackAngle, speedPrev with appropriate
  missing start/end values

Thoughts?

Cheers, Mike




-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From Roger.Bivand at nhh.no  Wed Sep 29 10:22:30 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 29 Sep 2010 10:22:30 +0200 (CEST)
Subject: [R-sig-Geo] impacts in spdep does not work for me when there is
 only one predictor
In-Reply-To: <alpine.LRH.2.00.1009282145001.23419@reclus.nhh.no>
References: <4CA1C7CD.7010808@gmail.com>
	<alpine.LRH.2.00.1009282145001.23419@reclus.nhh.no>
Message-ID: <alpine.LRH.2.00.1009291018370.25454@reclus.nhh.no>

On Tue, 28 Sep 2010, Roger Bivand wrote:

> On Tue, 28 Sep 2010, Eelke Folmer wrote:
>
>> Dear Roger and others,
>> 
>> Using the impacts function in spdep to calculate distributions (on the 
>> regression parameters from the spatial lag model) I encountered the 
>> following problem: when there is only one exogenous predictor in the model 
>> the impacts function won't give the output summary of the mcmc simulations. 
>> Given the time the function takes to produce the error I think that the 
>> simulations do run.
>
> Thanks for a clear report and reproducible example. I'll confirm when a fix 
> has been committed to R-forge - it is caused ny matrix dimensions being 
> dropped when there is only one row or column in some settings.

Fixes committed to the spdep project on R-Forge, could those interested 
please check before I release to CRAN? The packages on R-Forge should be 
revision 339, release 0.5-23, so for example Windows binaries for R 
patched will be available after midnight CET.

Roger

>
> Best wishes,
>
> Roger
>
>> 
>> I tried the same on the columbus data where it also happens
>> 
>> example(columbus)
>> listw <- nb2listw(col.gal.nb)
>> lobj  <- lagsarlm(CRIME ~ INC, columbus, listw)
>> summary(lobj)
>> imp   <- impacts(lobj, listw=birds.wlist, R=100)
>> summary(imp,  zstats=TRUE)
>> 
>> Error in dimnames(x) <- dn :
>>  length of 'dimnames' [2] not equal to array extent
>> 
>> lobj  <- lagsarlm(CRIME ~ INC + HOVAL, columbus, listw)
>> summary(lobj)
>> imp   <- impacts(lobj, listw=birds.wlist, R=100)
>> summary(imp,  zstats=TRUE)
>> 
>> works fine.
>> 
>> I hope I didn't miss anything obvious.
>> Thanks in advance,
>> Eelke
>> 
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Wed Sep 29 13:09:52 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 29 Sep 2010 13:09:52 +0200
Subject: [R-sig-Geo] auto-calcuations for Spatial objects
In-Reply-To: <AANLkTikudNqdnCvAo5AHJhaoG=b0dNPhyCJ4NL+mfX1B@mail.gmail.com>
References: <AANLkTikudNqdnCvAo5AHJhaoG=b0dNPhyCJ4NL+mfX1B@mail.gmail.com>
Message-ID: <4CA31E80.80204@uni-muenster.de>

On 09/29/2010 04:27 AM, Michael Sumner wrote:
> Hello,
> 
> I've been experimenting with additions to the trip class to
> automatically calculate metrics such as distance, bearing and
> turning angle. It's pretty simple since the only function that
> needs to know about this is the constructor, and it updates
> automatically for subsetting and so on. The problem is in
> decisions regarding which methods to calculate. If the data is
> longitude / latitude then ellipsoid measurements can be applied, and
> if projected, apply Euclidean methods. But this is not so obvious for
> bearings and angles, since those calculations do really need to
> be spherical. If the projection metadata is not set it seems
> wrong to assume one way or the other, but if it is set then we
> can always transform to long/lat in order to be consistent. The
> other issue is that these things could be unit-based, especially
> important for speed (we naturally use metres/second in most map
> projections and R's base time class, but kilometres and hours?
> when working in long/lat).
> 
> I'm tempted to enforce the need for projection metadata - without it
> there are just too many ambiguities.

I would not hesitate to enforce them. It is regrettable that R has,
afaik, no semantics for units of measurements. The alternative would be
to issue a warning that coordinates are assumed to be in metric space
(or whatever you assume).

> I don't have any clearer thoughts than that, just wanted to put
> it out there for discussion. It's mostly relevant to trip objects
> that can be subsetted or updated in different ways as a sort of
> hybrid between a "point" and "line segment" interpretation, but
> could be useful for SpatialPolygons/Lines - especially when rgeos
> brings more capability for manipulating these objects?

Subsetting is another interesting issue. When you compute distance,
direction, speed etc from a trip of four points, what would you return,
or what would the returned object mean when one selects the second and
fourth point?

> Another problem is the "specialness" of metrics, whether they are
> protected from the general attribute data as coordinates are. This is
> not so bad as long as it's clear to the user that any edits on these
> attributes are likely to be lost!  I've long thought that I should similarly
> protect the Time and ID attributes for trips, perhaps treat time as a
> coordinate
> and ID as a simple index identifier. I've tried this but haven't
> committed anything
> or investigated how disruptive it would be to the existing methods.
> 
> A minor question regards whether to take a "to next" or "from
> previous" line segment model.
> 
> So, in summary:
> 
>  - detect projection metadata and calculate metrics if this is set
>  - if CRS is NA, do no calculations

this requires you to check this and throw errors in any downstream
function/method that uses a trip object - not convenient.

>  - consider ellipsoid distance, spherical bearing/angle, speed in m/s
>    and options for user control over defaults
>  - add distPrev, aziPrev, trackAngle, speedPrev with appropriate
>   missing start/end values
> 
> Thoughts?

Have you looked at ljtraj objects in package adehabitat? It seems to be
under active development. Cl?ment Calenge sent me this reference:

Calenge et al. 2009. The concept of animals' trajectories from a data
analysis perspective - Ecological Informatics, 4, 34-41.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From gianni.lavaredo at gmail.com  Wed Sep 29 14:19:46 2010
From: gianni.lavaredo at gmail.com (gianni lavaredo)
Date: Wed, 29 Sep 2010 14:19:46 +0200
Subject: [R-sig-Geo] best shape sub-area to testing several interpolate
	techniques
Message-ID: <AANLkTi=kPQXpkfeLm3wTYGnTDRFYiGQT4B_0cvsgOy8L@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100929/87620d85/attachment.pl>

From mdsumner at gmail.com  Wed Sep 29 14:20:19 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 29 Sep 2010 22:20:19 +1000
Subject: [R-sig-Geo] auto-calcuations for Spatial objects
In-Reply-To: <4CA31E80.80204@uni-muenster.de>
References: <AANLkTikudNqdnCvAo5AHJhaoG=b0dNPhyCJ4NL+mfX1B@mail.gmail.com>
	<4CA31E80.80204@uni-muenster.de>
Message-ID: <AANLkTimQLcUW2jFBuO+Q3oz+9fmoxjeU7f=0xVA51dBQ@mail.gmail.com>

Thanks Edzer, just a quick follow up.

>> I don't have any clearer thoughts than that, just wanted to put
>> it out there for discussion. It's mostly relevant to trip objects
>> that can be subsetted or updated in different ways as a sort of
>> hybrid between a "point" and "line segment" interpretation, but
>> could be useful for SpatialPolygons/Lines - especially when rgeos
>> brings more capability for manipulating these objects?
>
> Subsetting is another interesting issue. When you compute distance,
> direction, speed etc from a trip of four points, what would you return,
> or what would the returned object mean when one selects the second and
> fourth point?
>

This is OK, IMO - if subsetting returns a valid trip, then that trip
can have metrics as any other, as if the second and fourth point were
actually the first and second.  It so happens that the trip class only
allows a minimum of 3 records per "trip event", and reverts to
SpatialPointsDataFrame. There's no reason 2-point trips can't be
sensible, I just decided they were not.

>> Another problem is the "specialness" of metrics, whether they are
>> protected from the general attribute data as coordinates are. This is
>> not so bad as long as it's clear to the user that any edits on these
>> attributes are likely to be lost! ?I've long thought that I should similarly
>> protect the Time and ID attributes for trips, perhaps treat time as a
>> coordinate
>> and ID as a simple index identifier. I've tried this but haven't
>> committed anything
>> or investigated how disruptive it would be to the existing methods.
>>
>> A minor question regards whether to take a "to next" or "from
>> previous" line segment model.
>>
>> So, in summary:
>>
>> ?- detect projection metadata and calculate metrics if this is set
>> ?- if CRS is NA, do no calculations
>
> this requires you to check this and throw errors in any downstream
> function/method that uses a trip object - not convenient.

Yes, I realized this later - that is a real problem. I think it's
pretty much the end of the idea, and means the job must be done by
active functions called by the user as required. It seems dangerous to
assume that auto-calculations won't be used in error somehow.

>> ?- consider ellipsoid distance, spherical bearing/angle, speed in m/s
>> ? ?and options for user control over defaults
>> ?- add distPrev, aziPrev, trackAngle, speedPrev with appropriate
>> ? missing start/end values
>>
>> Thoughts?
>
> Have you looked at ljtraj objects in package adehabitat? It seems to be
> under active development. Cl?ment Calenge sent me this reference:
>
> Calenge et al. 2009. The concept of animals' trajectories from a data
> analysis perspective - Ecological Informatics, 4, 34-41.

I have, it's very interesting, I've been aware of adehabitat for many
years - though it has some different goals and constraints to those of
trip, and it's far more advanced in terms of analytical tools. I'm
hoping my own writings for trip are not made completely redundant by
that work!

Finally, learning sp taught me the importance of coercion functions in
R, which I've only just added for ltraj to trip (along with
SpatialLinesDataFrame, and ppp and psp). It's clearly most productive
to allow transfer of data between environments rather than trying to
capture every need in one.

Thanks!

Cheers, Mike.

> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From wdmccoy at geo.umass.edu  Wed Sep 29 21:17:37 2010
From: wdmccoy at geo.umass.edu (William McCoy)
Date: Wed, 29 Sep 2010 15:17:37 -0400
Subject: [R-sig-Geo] error using filename argument with focalFilter() in
	package raster
Message-ID: <4CA390D1.10203@geo.umass.edu>

I have a raster DEM loaded in R and I am using the raster package.  My 
DEM is called lakeside:

 > library(raster)
Loading required package: sp
raster version 1.5-8 (20-September-2010)
 > lakeside
class       : RasterLayer
filename    :
nrow        : 341
ncol        : 321
ncell       : 109461
min value   : 1288.399
max value   : 1704.749
projection  : +proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m 
+no_defs +towgs84=0,0,0
xmin        : 344459.7
xmax        : 347669.7
ymin        : 4532817
ymax        : 4536227
xres        : 10
yres        : 10


When I use the focalFilter function with a filename argument, I get the 
following error:

 > xslopeLS <- focalFilter(lakeside, matrix(filtHorn, nrow = 3)
+ /(8*xres(lakeside)), filename = "xslopeLS")
Error in .local(object, values) :
   setValues no longer supports setting rows of values


However, if I call the same function without the filename argument, it 
seems to work fine:

 > xslopeLS <- focalFilter(lakeside, matrix(filtHorn, nrow = 3)
+ /(8*xres(lakeside)))
 > xslopeLS
class       : RasterLayer
filename    :
nrow        : 341
ncol        : 321
ncell       : 109461
min value   : -1.468210
max value   : 1.196593
projection  : +proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m 
+no_defs +towgs84=0,0,0
xmin        : 344459.7
xmax        : 347669.7
ymin        : 4532817
ymax        : 4536227
xres        : 10
yres        : 10


Here is my filter:

 > filtHorn
[1] -1 -2 -1  0  0  0  1  2  1


And here is my sessionInfo():

 > sessionInfo()
R version 2.11.1 (2010-05-31)
x86_64-redhat-linux-gnu

locale:
  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
  [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
  [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] raster_1.5-8 sp_0.9-69

loaded via a namespace (and not attached):
[1] grid_2.11.1     lattice_0.19-11


Any idea what I'm doing wrong?

Thanks for your help,
Bill

-- 
William D. McCoy
Geosciences
University of Massachusetts
Amherst, MA  01003


From r.hijmans at gmail.com  Wed Sep 29 22:45:15 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 29 Sep 2010 13:45:15 -0700
Subject: [R-sig-Geo] error using filename argument with focalFilter() in
 package raster
In-Reply-To: <4CA390D1.10203@geo.umass.edu>
References: <4CA390D1.10203@geo.umass.edu>
Message-ID: <AANLkTi=V5CcfnXYsroSESNvvMyjEVbyTqPf2dtmbCThT@mail.gmail.com>

Bill, you are the not the one doing anything wrong. I fixed this bug
in 'raster' version 1.5-12. Thanks for reporting it, Robert

On Wed, Sep 29, 2010 at 12:17 PM, William McCoy <wdmccoy at geo.umass.edu> wrote:
> I have a raster DEM loaded in R and I am using the raster package. ?My DEM
> is called lakeside:
>
>> library(raster)
> Loading required package: sp
> raster version 1.5-8 (20-September-2010)
>> lakeside
> class ? ? ? : RasterLayer
> filename ? ?:
> nrow ? ? ? ?: 341
> ncol ? ? ? ?: 321
> ncell ? ? ? : 109461
> min value ? : 1288.399
> max value ? : 1704.749
> projection ?: +proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs
> +towgs84=0,0,0
> xmin ? ? ? ?: 344459.7
> xmax ? ? ? ?: 347669.7
> ymin ? ? ? ?: 4532817
> ymax ? ? ? ?: 4536227
> xres ? ? ? ?: 10
> yres ? ? ? ?: 10
>
>
> When I use the focalFilter function with a filename argument, I get the
> following error:
>
>> xslopeLS <- focalFilter(lakeside, matrix(filtHorn, nrow = 3)
> + /(8*xres(lakeside)), filename = "xslopeLS")
> Error in .local(object, values) :
> ?setValues no longer supports setting rows of values
>
>
> However, if I call the same function without the filename argument, it seems
> to work fine:
>
>> xslopeLS <- focalFilter(lakeside, matrix(filtHorn, nrow = 3)
> + /(8*xres(lakeside)))
>> xslopeLS
> class ? ? ? : RasterLayer
> filename ? ?:
> nrow ? ? ? ?: 341
> ncol ? ? ? ?: 321
> ncell ? ? ? : 109461
> min value ? : -1.468210
> max value ? : 1.196593
> projection ?: +proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs
> +towgs84=0,0,0
> xmin ? ? ? ?: 344459.7
> xmax ? ? ? ?: 347669.7
> ymin ? ? ? ?: 4532817
> ymax ? ? ? ?: 4536227
> xres ? ? ? ?: 10
> yres ? ? ? ?: 10
>
>
> Here is my filter:
>
>> filtHorn
> [1] -1 -2 -1 ?0 ?0 ?0 ?1 ?2 ?1
>
>
> And here is my sessionInfo():
>
>> sessionInfo()
> R version 2.11.1 (2010-05-31)
> x86_64-redhat-linux-gnu
>
> locale:
> ?[1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
> ?[3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8
> ?[5] LC_MONETARY=C ? ? ? ? ? ? ?LC_MESSAGES=en_US.UTF-8
> ?[7] LC_PAPER=en_US.UTF-8 ? ? ? LC_NAME=C
> ?[9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] raster_1.5-8 sp_0.9-69
>
> loaded via a namespace (and not attached):
> [1] grid_2.11.1 ? ? lattice_0.19-11
>
>
> Any idea what I'm doing wrong?
>
> Thanks for your help,
> Bill
>
> --
> William D. McCoy
> Geosciences
> University of Massachusetts
> Amherst, MA ?01003
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From wdmccoy at geo.umass.edu  Thu Sep 30 02:21:46 2010
From: wdmccoy at geo.umass.edu (William McCoy)
Date: Wed, 29 Sep 2010 20:21:46 -0400
Subject: [R-sig-Geo] error using filename argument with focalFilter() in
 package raster
In-Reply-To: <AANLkTi=V5CcfnXYsroSESNvvMyjEVbyTqPf2dtmbCThT@mail.gmail.com>
References: <4CA390D1.10203@geo.umass.edu>
	<AANLkTi=V5CcfnXYsroSESNvvMyjEVbyTqPf2dtmbCThT@mail.gmail.com>
Message-ID: <4CA3D81A.6000108@geo.umass.edu>

Robert,

Thanks very much for the very quick bug fix.  And thanks for the raster 
package -- I find it very useful.

Bill


On 09/29/2010 04:45 PM, Robert J. Hijmans wrote:
> Bill, you are the not the one doing anything wrong. I fixed this bug
> in 'raster' version 1.5-12. Thanks for reporting it, Robert
>
> On Wed, Sep 29, 2010 at 12:17 PM, William McCoy<wdmccoy at geo.umass.edu>  wrote:
>> I have a raster DEM loaded in R and I am using the raster package.  My DEM
>> is called lakeside:
>>
>>> library(raster)
>> Loading required package: sp
>> raster version 1.5-8 (20-September-2010)
>>> lakeside
>> class       : RasterLayer
>> filename    :
>> nrow        : 341
>> ncol        : 321
>> ncell       : 109461
>> min value   : 1288.399
>> max value   : 1704.749
>> projection  : +proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs
>> +towgs84=0,0,0
>> xmin        : 344459.7
>> xmax        : 347669.7
>> ymin        : 4532817
>> ymax        : 4536227
>> xres        : 10
>> yres        : 10
>>
>>
>> When I use the focalFilter function with a filename argument, I get the
>> following error:
>>
>>> xslopeLS<- focalFilter(lakeside, matrix(filtHorn, nrow = 3)
>> + /(8*xres(lakeside)), filename = "xslopeLS")
>> Error in .local(object, values) :
>>   setValues no longer supports setting rows of values
>>
>>
>> However, if I call the same function without the filename argument, it seems
>> to work fine:
>>
>>> xslopeLS<- focalFilter(lakeside, matrix(filtHorn, nrow = 3)
>> + /(8*xres(lakeside)))
>>> xslopeLS
>> class       : RasterLayer
>> filename    :
>> nrow        : 341
>> ncol        : 321
>> ncell       : 109461
>> min value   : -1.468210
>> max value   : 1.196593
>> projection  : +proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs
>> +towgs84=0,0,0
>> xmin        : 344459.7
>> xmax        : 347669.7
>> ymin        : 4532817
>> ymax        : 4536227
>> xres        : 10
>> yres        : 10
>>
>>
>> Here is my filter:
>>
>>> filtHorn
>> [1] -1 -2 -1  0  0  0  1  2  1
>>
>>
>> And here is my sessionInfo():
>>
>>> sessionInfo()
>> R version 2.11.1 (2010-05-31)
>> x86_64-redhat-linux-gnu
>>
>> locale:
>>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>   [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>   [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
>>   [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] raster_1.5-8 sp_0.9-69
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.11.1     lattice_0.19-11
>>
>>
>> Any idea what I'm doing wrong?
>>
>> Thanks for your help,
>> Bill
>>
>> --
>> William D. McCoy
>> Geosciences
>> University of Massachusetts
>> Amherst, MA  01003
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
William D. McCoy
Geosciences
University of Massachusetts
Amherst, MA 01003


From basille at ase-research.org  Thu Sep 30 14:46:22 2010
From: basille at ase-research.org (Mathieu Basille)
Date: Thu, 30 Sep 2010 08:46:22 -0400
Subject: [R-sig-Geo] Step characteristics on raster maps
Message-ID: <4CA4869E.8000405@ase-research.org>

Dear list members,

I'm trying to compute characteristics along steps (i.e. segments between 
two points), based on underlying raster maps. The steps originally come 
from radiotracking data, converted to ltraj objects (adehabitat). The 
idea is to compute (for example) the habitat composition corresponding 
to each step instead of each points, as we are interesting in the 
movement path.

I tried different solutions, as I would like to do it with R. I did not 
find any solution using adehabitat (or the development versions 
adehabitatMA/LS); 'join' only works for point characteristics, not 
steps. I also tried using sp and SpatialLinesDataFrame, but overlay does 
not seem to work with SpatialLines(DataFrame) and SpatialPixelsDataFrame:

Error in function (classes, fdef, mtable)  :
   unable to find an inherited method for function "overlay", for 
signature "SpatialPixelsDataFrame", "SpatialLinesDataFrame"

I also investigated packages raster, trip, and rgeos, without success. 
Maybe the low level functions of rgeos could be used, but it seems a bit 
out of my skills (and time available) at the moment.

Another solution might be to use spgrass6 in conjunction with GRASS, but 
I'm not familiar enough with GRASS to judge if it is a viable alternative...

I'd welcome any hints/thoughts on this question.
Sincerely,
Mathieu Basille.


-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From aramucia at hotmail.com  Thu Sep 30 16:13:23 2010
From: aramucia at hotmail.com (Arantzazu Blanco Bernardeau)
Date: Thu, 30 Sep 2010 14:13:23 +0000
Subject: [R-sig-Geo] nugget in variogram
Message-ID: <SNT127-W33D24FEFADC71E914CE391CE680@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100930/257589d2/attachment.pl>

From r.hijmans at gmail.com  Thu Sep 30 17:28:55 2010
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 30 Sep 2010 08:28:55 -0700
Subject: [R-sig-Geo] Step characteristics on raster maps
In-Reply-To: <4CA4869E.8000405@ase-research.org>
References: <4CA4869E.8000405@ase-research.org>
Message-ID: <AANLkTim5WMwCdQsVJHoB82mRvfsWzXdzbOO75_ESF2FP@mail.gmail.com>

Perhaps you can do something like

r is a Raster* object
line is a SpatialLines* object

library(raster)
rr <- linesToRaster(line, r)
rm <- mask(r, rr)
crosstab(rm, rr)

Robert

On Thu, Sep 30, 2010 at 5:46 AM, Mathieu Basille
<basille at ase-research.org> wrote:
> Dear list members,
>
> I'm trying to compute characteristics along steps (i.e. segments between two
> points), based on underlying raster maps. The steps originally come from
> radiotracking data, converted to ltraj objects (adehabitat). The idea is to
> compute (for example) the habitat composition corresponding to each step
> instead of each points, as we are interesting in the movement path.
>
> I tried different solutions, as I would like to do it with R. I did not find
> any solution using adehabitat (or the development versions adehabitatMA/LS);
> 'join' only works for point characteristics, not steps. I also tried using
> sp and SpatialLinesDataFrame, but overlay does not seem to work with
> SpatialLines(DataFrame) and SpatialPixelsDataFrame:
>
> Error in function (classes, fdef, mtable) ?:
> ?unable to find an inherited method for function "overlay", for signature
> "SpatialPixelsDataFrame", "SpatialLinesDataFrame"
>
> I also investigated packages raster, trip, and rgeos, without success. Maybe
> the low level functions of rgeos could be used, but it seems a bit out of my
> skills (and time available) at the moment.
>
> Another solution might be to use spgrass6 in conjunction with GRASS, but I'm
> not familiar enough with GRASS to judge if it is a viable alternative...
>
> I'd welcome any hints/thoughts on this question.
> Sincerely,
> Mathieu Basille.
>
>
> --
>
> ~$ whoami
> Mathieu Basille, Post-Doc
>
> ~$ locate
> Laboratoire d'?cologie Comportementale et de Conservation de la Faune
> + Centre d'?tude de la For?t
> D?partement de Biologie
> Universit? Laval, Qu?bec
>
> ~$ info
> http://ase-research.org/basille
>
> ~$ fortune
> ``If you can't win by reason, go for volume.''
> Calvin, by Bill Watterson.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From edzer.pebesma at uni-muenster.de  Thu Sep 30 18:39:22 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 30 Sep 2010 18:39:22 +0200
Subject: [R-sig-Geo] nugget in variogram
In-Reply-To: <SNT127-W33D24FEFADC71E914CE391CE680@phx.gbl>
References: <SNT127-W33D24FEFADC71E914CE391CE680@phx.gbl>
Message-ID: <4CA4BD3A.1030304@uni-muenster.de>



On 09/30/2010 04:13 PM, Arantzazu Blanco Bernardeau wrote:
> Hello everybody
> I am new on geostatistics so maybe my question is trivial or is
> already answered (I can not find the solution in the thread list). I
> have a variogram where I did not fix the nugget, because doing it
> was giving "singular models". I would like to know the nugget ratio
> of my variograms but I don't know how to get then the nugget value.
> So I did look in the output of variogram and did take the minimum
> value of gamma. Is this correct?

Well, it's not the usual way, where you would fit a model:

library(gstat)
data(meuse)
coordinates(meuse) = ~x+y
v = variogram(log(zinc)~1, meuse)
v.m = fit.variogram(v, vgm(1, "Sph", 500, 1))
v[1, "gamma"] # your estimator:
plot(v, v.m)
v.m$psill[1] / sum(v.m$psill) # the usual estimator:

Only when you have plenty of measurements at very short distances
apart, I can imagine you would use the sample variogram (v) value.

> Thanks very much for your attention. 
>  		 	   		  
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From edzer.pebesma at uni-muenster.de  Thu Sep 30 18:47:58 2010
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 30 Sep 2010 18:47:58 +0200
Subject: [R-sig-Geo] nugget in variogram
In-Reply-To: <4CA4BD3A.1030304@uni-muenster.de>
References: <SNT127-W33D24FEFADC71E914CE391CE680@phx.gbl>
	<4CA4BD3A.1030304@uni-muenster.de>
Message-ID: <4CA4BF3E.7080808@uni-muenster.de>

Sorry, this was too fast again:

v[1,"gamma"]
# or
v.m$psill[1]

are estimators of the nugget variance;

v.m$psill[1] / sum(v.m$psill)

is an estimator of the nugget-to-sill ratio.

On 09/30/2010 06:39 PM, Edzer Pebesma wrote:
> 
> 
> On 09/30/2010 04:13 PM, Arantzazu Blanco Bernardeau wrote:
>> Hello everybody
>> I am new on geostatistics so maybe my question is trivial or is
>> already answered (I can not find the solution in the thread list). I
>> have a variogram where I did not fix the nugget, because doing it
>> was giving "singular models". I would like to know the nugget ratio
>> of my variograms but I don't know how to get then the nugget value.
>> So I did look in the output of variogram and did take the minimum
>> value of gamma. Is this correct?
> 
> Well, it's not the usual way, where you would fit a model:
> 
> library(gstat)
> data(meuse)
> coordinates(meuse) = ~x+y
> v = variogram(log(zinc)~1, meuse)
> v.m = fit.variogram(v, vgm(1, "Sph", 500, 1))
> v[1, "gamma"] # your estimator:
> plot(v, v.m)
> v.m$psill[1] / sum(v.m$psill) # the usual estimator:
> 
> Only when you have plenty of measurements at very short distances
> apart, I can imagine you would use the sample variogram (v) value.
> 
>> Thanks very much for your attention. 
>>  		 	   		  
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jorgefernandosaraiva at gmail.com  Thu Sep 30 18:53:39 2010
From: jorgefernandosaraiva at gmail.com (Jorge Fernando Saraiva de Menezes)
Date: Thu, 30 Sep 2010 13:53:39 -0300
Subject: [R-sig-Geo] all localR2 has NA values in gwr
Message-ID: <AANLkTi=cx0btJ23P0-2VRaQyjUcQXW-VBftCDTVNCi-L@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20100930/3e8cf3cc/attachment.pl>

From basille at ase-research.org  Thu Sep 30 20:57:03 2010
From: basille at ase-research.org (Mathieu Basille)
Date: Thu, 30 Sep 2010 14:57:03 -0400
Subject: [R-sig-Geo] Step characteristics on raster maps
In-Reply-To: <AANLkTim5WMwCdQsVJHoB82mRvfsWzXdzbOO75_ESF2FP@mail.gmail.com>
References: <4CA4869E.8000405@ase-research.org>
	<AANLkTim5WMwCdQsVJHoB82mRvfsWzXdzbOO75_ESF2FP@mail.gmail.com>
Message-ID: <4CA4DD7F.4070306@ase-research.org>

Dear Robert,

I just understood the interest of 'crosstab' with 'mask', this is pretty
neat! Thanks for the suggestion.

However, I can see some potential drawbacks with this approach: as my
objective is to describe each step (each segment), I should first cut
each 'SpatialLines' into a list of 'Lines', each 'Lines' being a segment
(and not the whole trajectory). I apology if I'm totally wrong, I'm not
that familiar with SpatialLines...

But then, what about crossing/overlaping segments, i.e. several segments
that all fall in the same pixel (which usually happens a lot)? With
linesToRaster, only the last segment would be kept. So that I should run
independently the approach for each 'Line' (each segment) just to avoid
these crossings, and that would result in as many new rasters as the
number of segments (and I'm talking about hundreds of thousands here,
over large rasters).

Basically, to rephrase my problem, here is what I want to achieve. Given
a set of points (say a SpatialPointsDataFrame, or SpatialLinesDataFrame,
or ltraj), I'd like to be able to compute new variables that give for
each point summaries or characteristics (e.g. proportion of each type of
the raster if it is categorical, or mean if is continuous) of the
segment from that point to the next (or previous, it doesn't matter).

It seems to be a simple problem in terms of low-level functions
(segments over raster), but a complex one in terms of data structure (an
single object with a set of individual trajectories which are themselves
sets of segments). And I have to admit that I have some troubles going
from the former to the latter.

Thanks again for your time,
Mathieu.


Le 2010-09-30 11:28, Robert J. Hijmans a ?crit :
> Perhaps you can do something like
> 
> r is a Raster* object
> line is a SpatialLines* object
> 
> library(raster)
> rr <- linesToRaster(line, r)
> rm <- mask(r, rr)
> crosstab(rm, rr)
> 
> Robert
> 
> On Thu, Sep 30, 2010 at 5:46 AM, Mathieu Basille
> <basille at ase-research.org> wrote:
>> Dear list members,
>>
>> I'm trying to compute characteristics along steps (i.e. segments between two
>> points), based on underlying raster maps. The steps originally come from
>> radiotracking data, converted to ltraj objects (adehabitat). The idea is to
>> compute (for example) the habitat composition corresponding to each step
>> instead of each points, as we are interesting in the movement path.
>>
>> I tried different solutions, as I would like to do it with R. I did not find
>> any solution using adehabitat (or the development versions adehabitatMA/LS);
>> 'join' only works for point characteristics, not steps. I also tried using
>> sp and SpatialLinesDataFrame, but overlay does not seem to work with
>> SpatialLines(DataFrame) and SpatialPixelsDataFrame:
>>
>> Error in function (classes, fdef, mtable)  :
>>  unable to find an inherited method for function "overlay", for signature
>> "SpatialPixelsDataFrame", "SpatialLinesDataFrame"
>>
>> I also investigated packages raster, trip, and rgeos, without success. Maybe
>> the low level functions of rgeos could be used, but it seems a bit out of my
>> skills (and time available) at the moment.
>>
>> Another solution might be to use spgrass6 in conjunction with GRASS, but I'm
>> not familiar enough with GRASS to judge if it is a viable alternative...
>>
>> I'd welcome any hints/thoughts on this question.
>> Sincerely,
>> Mathieu Basille.
>>
>>
>> --
>>
>> ~$ whoami
>> Mathieu Basille, Post-Doc
>>
>> ~$ locate
>> Laboratoire d'?cologie Comportementale et de Conservation de la Faune
>> + Centre d'?tude de la For?t
>> D?partement de Biologie
>> Universit? Laval, Qu?bec
>>
>> ~$ info
>> http://ase-research.org/basille
>>
>> ~$ fortune
>> ``If you can't win by reason, go for volume.''
>> Calvin, by Bill Watterson.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at stat.math.ethz.ch
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From yud at mail.montclair.edu  Thu Sep 30 23:14:55 2010
From: yud at mail.montclair.edu (Danlin Yu)
Date: Thu, 30 Sep 2010 17:14:55 -0400
Subject: [R-sig-Geo] all localR2 has NA values in gwr
In-Reply-To: <AANLkTi=cx0btJ23P0-2VRaQyjUcQXW-VBftCDTVNCi-L@mail.gmail.com>
References: <AANLkTi=cx0btJ23P0-2VRaQyjUcQXW-VBftCDTVNCi-L@mail.gmail.com>
Message-ID: <4CA4FDCF.4080909@mail.montclair.edu>

  Jorge:

 From what I see on your code, I would suspect that you kind of confuse 
the bandwidth with numbers of nearest neighbor. In your code, you use 
20, and I assume that meant the 20 nearest neighbors that you want for 
GWR calibration. Yet you didn't specify the adapt parameter in the code, 
which make the code think 20 is a distance value. I am not sure how the 
distance of 20 with longitude and latitude values would be, but I 
suspect this might be the cause. In addition, in the coordinates 
specification, longitude shall be the x, and latitude the y.

Try:

test=gwr(y~x1+x2,data=yourdata,cbind(longitude, 
latitude),adapt=0.05,gwr.bisquare,longlat=T)

to see what happens (I use 0.05 just for testing purpose, which means 5% 
of the total sample as the nearest neighbor for local estimation. Since 
you have more than 10,000 samples, the value will result in a local 
sample (local nearest neighbors) of 500. If you wan to try 20, then you 
can probably use 0.002 for the adapt parameter).

Hope this helps.

Cheers,
Dr. Danlin Yu



On 2010-9-30 12:53, Jorge Fernando Saraiva de Menezes wrote:
> Dear list,
>
> When I run a gwr using a model with two independent variables my local R2
> only has NA values. I've read in some topic that this is problably because
> the function cannot estimate localR2 correctly.
> I tryed to get the same result with the columbus data, but was not able to.
> Does anyone know what usually cause this? maybe a small or large bandwdth?
> And a side question, when longlat=T,and your coordinates are in WGS84 the
> values of bandwidth must be given in degrees?
>
>
> I'm using R2.10.1 and package spgwr version 0.6-2. i give a summary of my
> variables below. also my data is information collected in 10433 islands of
> the American continent, which mean that I have distances between my points
> varying from few meters to thousands of kilometers. I use a bandwidth of 20,
> and used the bisquare method.
>
> summary of my data
>              y          x1            x2
> Min.      0.00    1.310e-02   4.254e-02
> 1st Qu.  32.00  8.319e-01   1.628e+00
> Median   47.00  1.696e+00  2.005e+01
> Mean     84.25   2.043e+02 1.329e+02
> 3rd Qu. 143.00   5.822e+00 1.758e+02
> Max.    425.00   5.152e+05  3.114e+03
>
> code
> test=gwr(y~x1+x2,,cbind(latitude,longitude),20,gwr.bisquare,longlat=T)
>
> Thanks in advance,
> Jorge Menezes
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
___________________________________________
Danlin Yu, Ph.D.
Associate Professor of GIS and Urban Geography
Department of Earth&  Environmental Studies
Montclair State University
Montclair, NJ, 07043
Tel: 973-655-4313
Fax: 973-655-4072
email: yud at mail.montclair.edu
webpage: csam.montclair.edu/~yu


