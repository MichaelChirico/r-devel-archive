From danlinyu at uwm.edu  Thu Dec  1 17:30:22 2005
From: danlinyu at uwm.edu (danlinyu at uwm.edu)
Date: Thu,  1 Dec 2005 10:30:22 -0600
Subject: [R-sig-Geo] newbie: getting started
In-Reply-To: <438B1699020000F2000021DA@TMIA1.AUBURN.EDU>
References: <438B1699020000F2000021DA@TMIA1.AUBURN.EDU>
Message-ID: <1133454622.438f251e26718@panthermail.uwm.edu>

Jeff:

SPDEP might be the package where you can find numerous functions and tests for
your data.

Hope this helps.

Danlin

Jeffrey Stratford <stratja at auburn.edu>:

> Greetings!  I would appreciate some feedback as to where you think a
> newbie should start when learning spatial stats with R.  
> 
> I have avian point count data and landscape data (Landsat) over a 70 by
> 40 km area that I would like to start analyzing.  I have already,
> developed some relationships between species richness and landscape
> attributes but I completely ignore important spatial problems such as
> autocorrelation.
> 
> where do I begin?
> 
> Many thanks,
> 
> Jeff
> 
> ****************************************
> Jeffrey A. Stratford, Ph.D.
> Postdoctoral Associate
> 331 Funchess Hall
> Department of Biological Sciences
> Auburn University
> Auburn, AL 36849
> 334-329-9198
> FAX 334-844-9234
> http://www.auburn.edu/~stratja
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



From SXu at slb.com  Mon Dec  5 23:07:41 2005
From: SXu at slb.com (Steve Xu)
Date: Mon, 05 Dec 2005 17:07:41 -0500
Subject: [R-sig-Geo] 3d mark point interpolation
Message-ID: <004001c5f9e8$512d9d80$5d57b9a3@nam.slb.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051205/6b6555aa/attachment.pl>

From e.pebesma at geo.uu.nl  Tue Dec  6 10:12:53 2005
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Tue, 06 Dec 2005 10:12:53 +0100
Subject: [R-sig-Geo] 3d mark point interpolation
In-Reply-To: <004001c5f9e8$512d9d80$5d57b9a3@nam.slb.com>
References: <004001c5f9e8$512d9d80$5d57b9a3@nam.slb.com>
Message-ID: <43955615.9020500@geo.uu.nl>

Hi Steve, the gstat package has 3D kriging. Modelling
3D anisotropy is not easy, but can be done; after that,
kriging is rather easy.
--
Edzer

Steve Xu wrote:

>Dear All,
>
> 
>
>     I am new to this interest group. Is there a R package that allows me to
>do 3D mark point interpolation (IDW or kriging) ? I have a set of
>groundwater wells, with measurement of the level of a chemical pollutant at
>different elevations. So the data is XYZ with a value (mark points). Can I
>do that in R? Anybody has some idea on this question? 
>
> 
>
>Thanks,
>
> 
>
>    
>
>Steve Xu, M.E.S.
>GIS Specialist 
>Waterloo Hydrogeologic, Inc.
>A Schlumberger Company
>460 Phillip Street, Suite 101
>Waterloo, Ontario
>N2L 5J2, Canada
>Fax: (519) 885-5262 ext. 250
>sxu at slb.com 
>http://www.waterloohydrogeologic.com <http://www.waterloohydrogeologic.com/>
>
>
> 
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  
>



From jdenisgiguere at gmail.com  Tue Dec  6 17:28:13 2005
From: jdenisgiguere at gmail.com (Jean-Denis Giguere)
Date: Tue, 6 Dec 2005 11:28:13 -0500
Subject: [R-sig-Geo] OGR dataset to R
Message-ID: <c623a1cc0512060828w3c22d7cfn79d8b3e16228f21@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051206/0d61cb7b/attachment.pl>

From Roger.Bivand at nhh.no  Tue Dec  6 19:29:51 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 6 Dec 2005 19:29:51 +0100 (CET)
Subject: [R-sig-Geo] OGR dataset to R
In-Reply-To: <c623a1cc0512060828w3c22d7cfn79d8b3e16228f21@mail.gmail.com>
Message-ID: <Pine.LNX.4.44.0512061914530.3794-100000@reclus.nhh.no>

On Tue, 6 Dec 2005, Jean-Denis Giguere wrote:

> Hi all,
> 
> I would like to know if someone is aware of project to import OGR dataset
> into R without using GRASS. I saw reference to OGR on r-spatial project page
> but didn't find if there was implemented functionnalities.
> 

Please look at Barry Rowlingson's Rmap at:

http://www.maths.lancs.ac.uk/Software/Rmap/

You will need to build/compile it yourself, on Linux/Unix feasible, on 
Windows I'm not sure, but since you are using PostGIS, I guess you are 
using Linux. 

> My first goal is to be able to load a part of points dataset using attribute
> query filter (SQL) and use this as import for points pattern analysis.
> 

We looked briefly at reading data via OGR and Rmap into package "sp" 
classes this time last year - from there movement to spatstat and splancs 
is feasible. With a little work, moving points through OGR and Rmap into 
SpatialPoints or SpatialPointsDataFrame objects should be possible. The 
same applies to polygons for study area boundaries.

> Since my first dataset will be store within postGIS, hints or pointers to up
> to date information about integration of PostgreSQL and R would also be very
> much appreciated.
> 

PostgreSQL seems to be being actively used on BioConductor:

http://www.bioconductor.org/packages/bioc/1.8/html/RdbiPgSQL.html
http://www.bioconductor.org/packages/bioc/1.8/html/Rdbi.html

apart from additional work done by Markus Neteler.

> Regards,
> 
> Jean-Denis
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From e.pebesma at geo.uu.nl  Tue Dec  6 20:09:41 2005
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Tue, 06 Dec 2005 20:09:41 +0100
Subject: [R-sig-Geo] OGR dataset to R
In-Reply-To: <c623a1cc0512060828w3c22d7cfn79d8b3e16228f21@mail.gmail.com>
References: <c623a1cc0512060828w3c22d7cfn79d8b3e16228f21@mail.gmail.com>
Message-ID: <4395E1F5.8010901@geo.uu.nl>

Jean-Denis,

currently, as fas as I know, there is only Rmap -- see
http://www.maths.lancs.ac.uk/Software/Rmap/

but that does not live on CRAN, meaning that it may
be outdated in some respects. On my linux box, which
has a recent gdal installed, it does not compile.

Also, rgdal does not read anything through OGR,
currently. Anyone who wants to take this up?
-- 
Edzer

Jean-Denis Giguere wrote:

> Hi all,
>
>I would like to know if someone of project to import OGR dataset
>into R without using GRASS. I saw reference to OGR on r-spatial project page
>but didn't find if there was implemented functionnalities.
>
>My first goal is to be able to load a part of points dataset using attribute
>query filter (SQL) and use this as import for points pattern analysis.
>
>Since my first dataset will be store within postGIS, hints or pointers to up
>to date information about integration of PostgreSQL and R would also be very
>much appreciated.
>
>Regards,
>
>Jean-Denis
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  
>



From e.pebesma at geo.uu.nl  Tue Dec  6 20:20:31 2005
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Tue, 06 Dec 2005 20:20:31 +0100
Subject: [R-sig-Geo] OGR dataset to R
In-Reply-To: <c623a1cc0512060828w3c22d7cfn79d8b3e16228f21@mail.gmail.com>
References: <c623a1cc0512060828w3c22d7cfn79d8b3e16228f21@mail.gmail.com>
Message-ID: <4395E47F.3080807@geo.uu.nl>

I must correct -- I did manage to compile Rmap after outcommenting
the line

SHAPE = -lshp

in Rmap/src/Makevars
--
Edzer

Jean-Denis Giguere wrote:

>Hi all,
>
>I would like to know if someone is aware of project to import OGR dataset
>into R without using GRASS. I saw reryference to OGR on r-spatial project page
>but didn't find if there was implemented functionnalities.
>
>My first goal is to be able to load a part of points dataset using attribute
>query filter (SQL) and use this as import for points pattern analysis.
>
>Since my first dataset will be store within postGIS, hints or pointers to up
>to date information about integration of PostgreSQL and R would also be very
>much appreciated.
>
>Regards,
>
>Jean-Denis
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  
>



From Roger.Bivand at nhh.no  Tue Dec  6 21:19:56 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 6 Dec 2005 21:19:56 +0100 (CET)
Subject: [R-sig-Geo] OGR dataset to R
In-Reply-To: <4395E47F.3080807@geo.uu.nl>
Message-ID: <Pine.LNX.4.44.0512062117140.3794-100000@reclus.nhh.no>

On Tue, 6 Dec 2005, Edzer J. Pebesma wrote:

> I must correct -- I did manage to compile Rmap after outcommenting
> the line
> 
> SHAPE = -lshp
> 
> in Rmap/src/Makevars

Yes, I can confirm this, building against gdal and proj works for me too, 
as does Barry's nice subsetting. So maybe your database link will be quite 
good - the [.ogr function makes an ogr object for the subset, and only 
when you do as.data.frame() og the ogr object does the data get read into 
R.

Roger

> --
> Edzer
> 
> Jean-Denis Giguere wrote:
> 
> >Hi all,
> >
> >I would like to know if someone is aware of project to import OGR dataset
> >into R without using GRASS. I saw reryference to OGR on r-spatial project page
> >but didn't find if there was implemented functionnalities.
> >
> >My first goal is to be able to load a part of points dataset using attribute
> >query filter (SQL) and use this as import for points pattern analysis.
> >
> >Since my first dataset will be store within postGIS, hints or pointers to up
> >to date information about integration of PostgreSQL and R would also be very
> >much appreciated.
> >
> >Regards,
> >
> >Jean-Denis
> >
> >	[[alternative HTML version deleted]]
> >
> >_______________________________________________
> >R-sig-Geo mailing list
> >R-sig-Geo at stat.math.ethz.ch
> >https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >  
> >
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From discoduro2 at terra.es  Sun Dec 11 17:10:21 2005
From: discoduro2 at terra.es (Fernando =?ISO-8859-1?Q?Gonz=E1lez_Cort=E9s?=)
Date: Sun, 11 Dec 2005 17:10:21 +0100
Subject: [R-sig-Geo] OGR dataset to R
Message-ID: <1134317421.4847.22.camel@localhost.localdomain>

Hello,

        I'm new to R and I was looking for a package to read different
kinds of datasets (shapefiles, postGIS, dxf, ...) when I received this
mail. I've read the answers to this mail so I know that the RMap package
can do it. Is there another way to do it using grass? has it any
drawbacks so people are looking for another way?

Thanks in advance
Fernando



From Roger.Bivand at nhh.no  Sun Dec 11 20:00:13 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 11 Dec 2005 20:00:13 +0100 (CET)
Subject: [R-sig-Geo] OGR dataset to R
In-Reply-To: <1134317421.4847.22.camel@localhost.localdomain>
Message-ID: <Pine.LNX.4.44.0512111952100.25654-100000@reclus.nhh.no>

On Sun, 11 Dec 2005, Fernando Gonz?lez Cort?s wrote:

> Hello,
> 
>         I'm new to R and I was looking for a package to read different
> kinds of datasets (shapefiles, postGIS, dxf, ...) when I received this
> mail. I've read the answers to this mail so I know that the RMap package
> can do it. Is there another way to do it using grass? has it any
> drawbacks so people are looking for another way?

Of course you can use ogr2ogr to make shapefiles, or v.in.ogr to import
into GRASS 6 to build topology and clean the spatial representation,
before writing out a shapefile (v.out.ogr) to be read through the maptools
package. I have found that using GRASS 6 to clean shapefiles as well is
often helpful, there seem to be a lot in the wild that do not follow the
ESRI specification (or maybe I'm unlucky). Indeed other converters can be
used as well to get to shapefiles, which are probably the easiest way in
to R at the moment.

The reason for the difference is that maptools includes a version of the
current shapelib code, and so does not depend on external software for
reading shapefiles. Rmap and rgdal link against external libraries,
meaning that they are much more difficult to distribute cleanly across
platforms, although do work well when installed from source.

> 
> Thanks in advance
> Fernando
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From brian at 0xdeadbeef.com  Mon Dec 12 10:26:10 2005
From: brian at 0xdeadbeef.com (Lottie Sorensen)
Date: Mon, 12 Dec 2005 09:26:10 -0000
Subject: [R-sig-Geo] Monday is gonna rock
Message-ID: <059053584.20051213092456@0xdeadbeef.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051212/c6054268/attachment.pl>

From M.Campbell at erini.ac.uk  Mon Dec 12 11:28:02 2005
From: M.Campbell at erini.ac.uk (Malcolm Campbell)
Date: Mon, 12 Dec 2005 10:28:02 -0000
Subject: [R-sig-Geo] Editing Shapefiles
Message-ID: <C9328F0EEDC3BC439FDABD12060E91090E4861@erini1.ERINI.local>

  

I am using the packages shapefiles, and maptools in R to visualize data
from shapefiles, dbf files, and census data.

My question is this, is it possible once a shapefile is read into R, to
edit the contents of the shapefile?

Let me give a practical example.

I am using a shapefile of electoral wards in England and I would like to
be able to remove some of the wards from the shapefile in order to have
a smaller shapefile of wards, for example, London wards only. After
reading susbstantial amounts of documentation and related articles and
numerous web searches I have so far been unable to find an answer.

 

Responses would be greatly appreciated.

 

Malcolm Campbell

Economic Research Institute of Northern Ireland

2nd Floor, Floral Buildings

2-14 East Bridge Street

BELFAST

BT1 3NQ

 

Tel: 028 9072 7370

 

M.Campbell at erini.ac.uk

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051212/c15c018e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 530 bytes
Desc: image001.gif
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20051212/c15c018e/attachment.gif>

From Roger.Bivand at nhh.no  Mon Dec 12 11:41:38 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 12 Dec 2005 11:41:38 +0100 (CET)
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <C9328F0EEDC3BC439FDABD12060E91090E4861@erini1.ERINI.local>
Message-ID: <Pine.LNX.4.44.0512121128580.26218-100000@reclus.nhh.no>

On Mon, 12 Dec 2005, Malcolm Campbell wrote:

>   
> 
> I am using the packages shapefiles, and maptools in R to visualize data
> from shapefiles, dbf files, and census data.
> 
> My question is this, is it possible once a shapefile is read into R, to
> edit the contents of the shapefile?

Yes, it is possible, using the new classes in the sp package on which 
maptools now depends. It should be possible from the object read by 
read.shapefiles() in the shapefiles package, but that route is untried.

> 
> Let me give a practical example.
> 
> I am using a shapefile of electoral wards in England and I would like to
> be able to remove some of the wards from the shapefile in order to have
> a smaller shapefile of wards, for example, London wards only. After
> reading susbstantial amounts of documentation and related articles and
> numerous web searches I have so far been unable to find an answer.
> 

Once the data from the shapefile (assuming polygons, but could be points) 
are in a SpatialPolygonsDataFrame, you just subset using the "[" operator. 
The documentation is in sp rather than maptools, although the example in 
?readShapePoly is pretty clear - it subsets the North Carolina counties to 
choose just those with less than 2 SIDS cases 1974-78. The readShapePoly() 
function will use the shapefile IDs (usually numbers from "0" upwards) so 
the sort order of the polygons and data may not be what you expect, but 
there are ways to control that too if need be.

Some of the operations may be time-consuming if you are handling many 
polygons, but we've tried tens of thousands without seeing major problems, 
just sometimes things take the time they have to.

If you also need to merge wards, that can be done in the off-CRAN package 
spgpc (on sourceforge, see the CRAN "Spatial" Task View). The sp classes 
are described in a note in the most recent R-News.

Hope this helps,

Roger

>  
> 
> Responses would be greatly appreciated.
> 
>  
> 
> Malcolm Campbell
> 
> Economic Research Institute of Northern Ireland
> 
> 2nd Floor, Floral Buildings
> 
> 2-14 East Bridge Street
> 
> BELFAST
> 
> BT1 3NQ
> 
>  
> 
> Tel: 028 9072 7370
> 
>  
> 
> M.Campbell at erini.ac.uk
> 
>  
> 
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From stanimura-ngs at umin.ac.jp  Tue Dec 13 03:59:02 2005
From: stanimura-ngs at umin.ac.jp (Susumu Tanimura)
Date: Tue, 13 Dec 2005 11:59:02 +0900
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <C9328F0EEDC3BC439FDABD12060E91090E4861@erini1.ERINI.local>
References: <C9328F0EEDC3BC439FDABD12060E91090E4861@erini1.ERINI.local>
Message-ID: <20051213115902.f70f300b.stanimura-ngs@umin.ac.jp>

Dear Malcolm and R-sig-Geo members

Map object from shapefiles with read.shape() can be merged or
clipped.  Here are examples written in Japanese but the code is
universal.

For clipping
http://www.okada.jp.org/RWiki/index.php?ShapeFile%A5%E9%A5%A4%A5%D6%A5%E9%A5%EA

For Union and Dissolve
http://www.okada.jp.org/RWiki/index.php?cmd=read&page=Rmap%A4%F2%BB%C8%A4%C3%A4%BF%C3%CF%BF%DE%C9%BD%BC%A8&word=Rmap#content_1_35

In addition, You can use shapefiles from R to GoogleEarth.
http://www.okada.jp.org/RWiki/index.php?GoogleEarth%A4%C8R



From nikko at hailmail.net  Tue Dec 13 15:05:10 2005
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Tue, 13 Dec 2005 09:05:10 -0500
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <mailman.13.1134471601.12314.r-sig-geo@stat.math.ethz.ch>
References: <mailman.13.1134471601.12314.r-sig-geo@stat.math.ethz.ch>
Message-ID: <1134482710.9659.249682902@webmail.messagingengine.com>

Hi Susumu
Those are some very nice examples! Would you consider packaging some of
those functions 
and contributing them to maptools? I especially like the cartogram
example.

Nicholas

On Tue, 13 Dec 2005 12:00:01 +0100, r-sig-geo-request at stat.math.ethz.ch
said:
> Send R-sig-Geo mailing list submissions to
> 	r-sig-geo at stat.math.ethz.ch
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> 	https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> or, via email, send a message with subject or body 'help' to
> 	r-sig-geo-request at stat.math.ethz.ch
> 
> You can reach the person managing the list at
> 	r-sig-geo-owner at stat.math.ethz.ch
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-sig-Geo digest..."
> 
> 
> Today's Topics:
> 
>    1. Re: Editing Shapefiles (Susumu Tanimura)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Tue, 13 Dec 2005 11:59:02 +0900
> From: Susumu Tanimura <stanimura-ngs at umin.ac.jp>
> Subject: Re: [R-sig-Geo] Editing Shapefiles
> To: r-sig-geo at stat.math.ethz.ch
> Message-ID: <20051213115902.f70f300b.stanimura-ngs at umin.ac.jp>
> Content-Type: text/plain; charset=US-ASCII
> 
> Dear Malcolm and R-sig-Geo members
> 
> Map object from shapefiles with read.shape() can be merged or
> clipped.  Here are examples written in Japanese but the code is
> universal.
> 
> For clipping
> http://www.okada.jp.org/RWiki/index.php?ShapeFile%A5%E9%A5%A4%A5%D6%A5%E9%A5%EA
> 
> For Union and Dissolve
> http://www.okada.jp.org/RWiki/index.php?cmd=read&page=Rmap%A4%F2%BB%C8%A4%C3%A4%BF%C3%CF%BF%DE%C9%BD%BC%A8&word=Rmap#content_1_35
> 
> In addition, You can use shapefiles from R to GoogleEarth.
> http://www.okada.jp.org/RWiki/index.php?GoogleEarth%A4%C8R
> 
> 
> 
> ------------------------------
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> 
> End of R-sig-Geo Digest, Vol 28, Issue 5
> ****************************************



From stanimura-ngs at umin.ac.jp  Tue Dec 13 16:39:08 2005
From: stanimura-ngs at umin.ac.jp (Susumu Tanimura)
Date: Wed, 14 Dec 2005 00:39:08 +0900
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <1134482710.9659.249682902@webmail.messagingengine.com>
References: <mailman.13.1134471601.12314.r-sig-geo@stat.math.ethz.ch>
	<1134482710.9659.249682902@webmail.messagingengine.com>
Message-ID: <20051214003908.d6cb0d00.stanimura-ngs@umin.ac.jp>

Dear Nicholas and members

Since those examples in wiki are not my works, it is better to ask the
author, Dr. Ono, who is one of members in this mailing list.

However, cartograms are annoyed issue as mentioned in my talk 
"thematic cartography with R" at the first Japanese R user conference
on Dec. 10th. I am also waiting someone develop a continuous cartogram
and a circle one.  

By the way, Dr. Simon Urbanek (AT&T Research Labs, the author of JGR,
a member of the R core development team) was invited to the
conference.  His talk about JGR and iPlots was so preeminent. iPlots
may provide us interactive zoom and pan for maps in R.

--
Susumu Tanimura

On Tue, 13 Dec 2005 09:05:10 -0500
"Nicholas Lewin-Koh" <nikko at hailmail.net> wrote:

> Hi Susumu
> Those are some very nice examples! Would you consider packaging some of
> those functions 
> and contributing them to maptools? I especially like the cartogram
> example.
> 
> Nicholas



From stanimura-ngs at umin.ac.jp  Wed Dec 14 05:25:37 2005
From: stanimura-ngs at umin.ac.jp (Susumu Tanimura)
Date: Wed, 14 Dec 2005 13:25:37 +0900
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <439F43F7.9070500@nceas.ucsb.edu>
References: <mailman.13.1134471601.12314.r-sig-geo@stat.math.ethz.ch>
	<1134482710.9659.249682902@webmail.messagingengine.com>
	<20051214003908.d6cb0d00.stanimura-ngs@umin.ac.jp>
	<439F43F7.9070500@nceas.ucsb.edu>
Message-ID: <20051214132537.93a73fbc.stanimura-ngs@umin.ac.jp>

Dear Rick Reeves and members

> But ne question: where is the polycoords() method defined? I can't find 
> it...

I guess it come from Rmap package.  You may use Rmap or write a same
function with maptools.

As for cartogram, I have rewritten the cartogram code in accordance
with maptools, I lost it though.



From Roger.Bivand at nhh.no  Wed Dec 14 09:23:55 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 14 Dec 2005 09:23:55 +0100 (CET)
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <20051214132537.93a73fbc.stanimura-ngs@umin.ac.jp>
Message-ID: <Pine.LNX.4.44.0512140906240.6718-100000@reclus.nhh.no>

On Wed, 14 Dec 2005, Susumu Tanimura wrote:

> Dear Rick Reeves and members
> 
> > But ne question: where is the polycoords() method defined? I can't find 
> > it...
> 
> I guess it come from Rmap package.  You may use Rmap or write a same
> function with maptools.

Yes, it is a method in Rmap defined for ogr and shapefile data sources. It 
returns a list with matrices of coordinates, split by NA rows between 
parts of the entity.

A lot of the good ideas in Rmap are continued in the sp package, which 
tries to split data input from the objects themselves and methods for 
handling objects.

The work on Susumu Tanimura's web pages is magnificent, really very 
useful, and I agree completely with Nicholas that it will be very useful 
to make it available to others through packages on CRAN.

> 
> As for cartogram, I have rewritten the cartogram code in accordance
> with maptools, I lost it though.

Some time ago, Danny Dorling gave me his cartogram code. It does, however, 
require boundary proportions for contiguous neighbours - which means that 
a full topology has to be available. We can do that either using GRASS 
(Markus Neteler helped to show how, I still have to write it up), or using 
information in ArcInfo coverages or e00 files read through RArcInfo. That 
would give bubble cartograms, if someone would like to try it out?

Roger


> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From stanimura-ngs at umin.ac.jp  Wed Dec 14 10:46:04 2005
From: stanimura-ngs at umin.ac.jp (Susumu Tanimura)
Date: Wed, 14 Dec 2005 18:46:04 +0900
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <Pine.LNX.4.44.0512140906240.6718-100000@reclus.nhh.no>
References: <20051214132537.93a73fbc.stanimura-ngs@umin.ac.jp>
	<Pine.LNX.4.44.0512140906240.6718-100000@reclus.nhh.no>
Message-ID: <20051214184604.ac801325.stanimura-ngs@umin.ac.jp>

Dear Roger and others

> The work on Susumu Tanimura's web pages is magnificent, really very 
> useful, and I agree completely with Nicholas that it will be very
> useful to make it available to others through packages on CRAN.

Let me note that the web site is NOT MINE, but of the Rjpwiki project
although I am a regular visitor and a contributor to the some parts in
the pages.

This web site maintained by M. Okada.  Please refer to the domain
name. See the explanation above introduction section of
http://www.okada.jp.org/RWiki/index.php?i18n_of_R

M. Okada voluntary open his personal PC in his house to the Internet,
and provide use wiki service.  Since wiki system allow visitors to add
their question or new ideas to the pages, the pages are being expanded
more and more.

--
Susumu Tanimura



From Roger.Bivand at nhh.no  Wed Dec 14 11:06:56 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 14 Dec 2005 11:06:56 +0100 (CET)
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <20051214184604.ac801325.stanimura-ngs@umin.ac.jp>
Message-ID: <Pine.LNX.4.44.0512141103510.6718-100000@reclus.nhh.no>

On Wed, 14 Dec 2005, Susumu Tanimura wrote:

> Dear Roger and others
> 
> > The work on Susumu Tanimura's web pages is magnificent, really very 
> > useful, and I agree completely with Nicholas that it will be very
> > useful to make it available to others through packages on CRAN.
> 
> Let me note that the web site is NOT MINE, but of the Rjpwiki project
> although I am a regular visitor and a contributor to the some parts in
> the pages.
> 
> This web site maintained by M. Okada.  Please refer to the domain
> name. See the explanation above introduction section of
> http://www.okada.jp.org/RWiki/index.php?i18n_of_R
> 
> M. Okada voluntary open his personal PC in his house to the Internet,
> and provide use wiki service.  Since wiki system allow visitors to add
> their question or new ideas to the pages, the pages are being expanded
> more and more.

Thank you for this clarification; I'm sure that we are all very grateful 
to M. Okada for making the wiki service available. However, I think that 
you have made very interesting contributions through this channel and in 
other ways, and, as Nicholas suggested, I would warmly encourage you to 
make them more widely known and available.

Roger

> 
> --
> Susumu Tanimura
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From nikko at hailmail.net  Wed Dec 14 15:19:15 2005
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Wed, 14 Dec 2005 09:19:15 -0500
Subject: [R-sig-Geo] Editing Shapefiles, and cartograms
In-Reply-To: <mailman.13.1134558002.5724.r-sig-geo@stat.math.ethz.ch>
References: <mailman.13.1134558002.5724.r-sig-geo@stat.math.ethz.ch>
Message-ID: <1134569955.28771.249776489@webmail.messagingengine.com>

Hi,
In the days when I had more time to work on this stuff I looked into
programming continuous cartograms for maptools. If I remember correctly
Danny Dorlings 
approach produced really nicely arranged circualr cartograms. I also
remember
that the optimization he used was fairly inefficient and could take a
looooong time
if you had many polygons. I think there is a note in Jason Dyke's CDV
software about that.
I think the speed of Dorling's algorithm could be much improved with the
application
of a little computational geometry, but like I said it is a few years
since I looked at this.

As far as interactivity, iplots is one solution. I played with trying to
embed cdv in R
using the tcltk interface, but it wasn't as well developed as it is now,
and I am not a good
tcltk programmer. Another thing I tried was embedding ggobi in openEV,
Frank Warmerdam's map
viewing tool. That approach seemed to have promise, and openEV plays
nicely with other languages.

Cheers
Nicholas



From hi_ono2001 at ybb.ne.jp  Wed Dec 14 16:29:09 2005
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Thu, 15 Dec 2005 00:29:09 +0900 (JST)
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <Pine.LNX.4.44.0512141103510.6718-100000@reclus.nhh.no>
Message-ID: <20051214152909.79927.qmail@web10715.mail.bbt.yahoo.co.jp>

Hello.

 Sorry I'm not "Dr."

 Here is my Non-Contiguous Area-based "Shrinking"
Cartogram script for maptools.

 This script doesn't support multi-parts polygon shape. 

 Please try this.

###############
require(maptools)

#
# Non Contiguous Area-based Cartogram
#
createNonContiguousAreaBasedCartogram<-function(mapObj,targetAttribute,areaAttribute){
  densities<- sqrt(targetAttribute/areaAttribute) #
calclulate given attribute value

  maxDensity<-max(densities) # get Maximum of densities
  
  k <- 1/maxDensity

  L <- k * densities

  centroidXY<-get.Pcent(mapObj) # get polygons' centroids
  
  mapObj2 <- mapObj[[1]]
  
  for(i in 1:length(mapObj2)){
    if(mapObj2[[i]]$nParts == 1){
      coords <- mapObj2[[i]]$verts
      newX<-L[i] * (coords[,1] -  centroidXY[i,1]) +
centroidXY[i,1] # new X coordinate
      newY<-L[i] * (coords[,2] -  centroidXY[i,2]) +
centroidXY[i,2] # new Y coordinate
      polygon(newX,newY,col="red") #draw polygon
    }
  }
}



columbus<-read.shape(system.file("shapes/columbus.shp",package="maptools"))
#load polygon shape file


plot(columbus)

createNonContiguousAreaBasedCartogram(columbus,columbus$att.data$CRIME,columbus$att.data$AREA)


> In the days when I had more time to work on this
> stuff I looked into
> programming continuous cartograms for maptools.

 There are  lots of arcscripts for contiguous codes in
following ESRI's arcscripts site.



http://arcscripts.esri.com/scripts.asp?eLang=&eProd=&perPage=10&eQuery=contiguous&Submit2=Search


 GeoDa(which will be opnssource) can display Doring's
circular cartogram which use Cellular Automata for good
performance.(https://geoda.uiuc.edu/pdf/geoda095i.pdf).


 Some Japanese GIS researcher has tried to employ some
optimisation method for Doring's and Contiguous one.


 Regards.



From hi_ono2001 at ybb.ne.jp  Thu Dec 15 12:57:46 2005
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Thu, 15 Dec 2005 20:57:46 +0900 (JST)
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <20051214152909.79927.qmail@web10715.mail.bbt.yahoo.co.jp>
Message-ID: <20051215115746.13957.qmail@web10713.mail.bbt.yahoo.co.jp>

Date: Thu, 15 Dec 2005 20:56:16 +0900 (JST) 
From: "Hisaji ONO" <hi_ono2001 at ybb.ne.jp>  ??????
????
DomainKeys ???????? ybb.ne.jp ?????????
????????  
Subject: Re: [R-sig-Geo] Editing Shapefiles --
Non-Contiguous Area-based Cartogram 
To: "Hisaji ONO" <hi_ono2001 at ybb.ne.jp> 

       


Hi.

 This is ascript for support of multi-parts polygon shape
file.

#require(maptools)
createNonContiguousAreaBasedCartogram<-function(mapObj,targetAttribute,areaAttribute){

  outputMapObj <- mapObj

  densities<- sqrt(targetAttribute/areaAttribute)

  maxDensity<-max(densities) # get Maximum of densities
  
  k <- 1/maxDensity

  L <- k * densities

  centroidXY<-get.Pcent(mapObj) # get polygons' centroids
  
  mapObj2 <- mapObj[[1]]
  
  for(i in 1:length(mapObj2)){
    if(mapObj2[[i]]$nParts == 1){
      coords <- mapObj2[[i]]$verts
      newX<-L[i] * (coords[,1] -  centroidXY[i,1]) +
centroidXY[i,1] # new X coordinate
      newY<-L[i] * (coords[,2] -  centroidXY[i,2]) +
centroidXY[i,2] # new Y coordinate
      polygon(newX,newY,col="red") #draw polygon

    }else{
      pStartList <- mapObj2[[i]]$Pstart + 1

      allCoords <- mapObj2[[i]]$verts

      for(j in 1:length(pStartList)){
        if(j == length(pStartList))
          coords
<-allCoords[pStartList[j]:nrow(allCoords),]
        else
          coords <- allCoords[pStartList[j]:(pStartList[j
+ 1] -1),]

        centroidXYP<-c(mean(coords[,1]),mean(coords[,2]))

        centroidXYP<-c( centroidXY[i,1], centroidXY[i,2])

        points(centroidXYP)

        print(centroidXYP)

        newX<-L[i] * (coords[,1] -  centroidXYP[1]) +
centroidXYP[1] # new X coordinate
        newY<-L[i] * (coords[,2] -  centroidXYP[2]) +
centroidXYP[2] # new Y coordinate
        polygon(newX,newY,col="blue") #draw polygon


      }
    }
  }
}

columbus<-read.shape(system.file("shapes/columbus.shp",package="maptools"))

createNonContiguousAreaBasedCartogram(columbus,columbus$att.data$CRIME,columbus$att.data$AREA)


 Regards.



From stanimura-ngs at umin.ac.jp  Fri Dec 16 03:52:09 2005
From: stanimura-ngs at umin.ac.jp (Susumu Tanimura)
Date: Fri, 16 Dec 2005 11:52:09 +0900
Subject: [R-sig-Geo] Editing Shapefiles
In-Reply-To: <20051215115746.13957.qmail@web10713.mail.bbt.yahoo.co.jp>
References: <20051214152909.79927.qmail@web10715.mail.bbt.yahoo.co.jp>
	<20051215115746.13957.qmail@web10713.mail.bbt.yahoo.co.jp>
Message-ID: <20051216115209.e3aac6c1.stanimura-ngs@umin.ac.jp>

Dear Hisaji

Thank you very much for the codes.  I expect that you or someone
develop someday the function of continuous cartogram using newly
proposed Inoue's methods as shown at
http://home.csis.u-tokyo.ac.jp/~inoue/research/cartogram/area_cartogram.html.
Inoue's PhD dissertation is available at
http://home.csis.u-tokyo.ac.jp/~inoue/research/pdf_files/dthesis.pdf,
unfortunately written in Japanese.

--
Susumu Tanimura



From hi_ono2001 at yahoo.co.jp  Tue Dec 20 18:50:01 2005
From: hi_ono2001 at yahoo.co.jp (Hisaji ONO)
Date: Wed, 21 Dec 2005 02:50:01 +0900 (JST)
Subject: [R-sig-Geo] Tomlin's Map Algebra for sp
Message-ID: <20051220175001.25334.qmail@web10713.mail.bbt.yahoo.co.jp>

Hello.

 Sp package has grid & grid topology classes.

 It seems to use them to be able to implement famous map
algebra(or cartographic modelling).

 Any plan to implement this analysis method to sp package?


 Regards.



From e.pebesma at geo.uu.nl  Tue Dec 20 22:05:17 2005
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Tue, 20 Dec 2005 22:05:17 +0100
Subject: [R-sig-Geo] Moving-window sum in a matrix
In-Reply-To: <20051220175001.25334.qmail@web10713.mail.bbt.yahoo.co.jp>
References: <20051220175001.25334.qmail@web10713.mail.bbt.yahoo.co.jp>
Message-ID: <43A8720D.5030104@geo.uu.nl>

Hisaji ONO wrote:

>Hello.
>
> Sp package has grid & grid topology classes.
>
> It seems to use them to be able to implement famous map
>algebra(or cartographic modelling).
>
> Any plan to implement this analysis method to sp package?
>  
>
Yes, but not in sp.

We're even a bit further than plans, but
not exactly that much. I just read that in
https://stat.ethz.ch/pipermail/r-sig-geo/2004-December/000285.html
I wrote 12 months ago about these plans.  Indeed, we now
have sp on the rails, and should move on. Thanks for
reminding me.

Many of the point, global and areal operations can be
done using standard R syntax; it is however the true spatial
functions like spreads and the window functions that would
be nice to  have.
--
Edzer

>
> Regards.
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  
>



From reeves at nceas.ucsb.edu  Tue Dec 20 22:24:24 2005
From: reeves at nceas.ucsb.edu (Rick Reeves)
Date: Tue, 20 Dec 2005 13:24:24 -0800
Subject: [R-sig-Geo] Current location of the Srings object (or its
	replacement)?
Message-ID: <43A87688.7040909@nceas.ucsb.edu>


Hello all:

Following is a code sample that used the Srings class,
and which used to work before I upgraded to the
latest build of the 'sp' package and removed the
spmaptools package from my build.

Now, running this code generates the error:
 
Error: couldn't find function "Srings".
Even loading the spmaptools package does
not resolve this problem.

Any suggestions on resolving this issue?

Thanks, Rick Reeves



Now, R reports that
# ----------start -------------------

#
   Srsl <- vector(mode="list", length=length(AllSps))
#
# Srings object comes from sp package
#
   for (iCtr in 1:length(AllSps))
   {
      Srsl[[iCtr]] <- Srings(list(Sring(AllSps[[iCtr]])), 
names(AllSps)[iCtr])
      if ((iCtr %% 50) == 0)
          print(sprintf("....Srings() call for AllSps: %d done...",iCtr))
   }
#
print("....Srings object is made....")
#browser()
   SpShapes <- SpatialRings(Srsl, pO=1:SpListCount)
print("....SpShapes Spatial Rings object is made...plot them....")
#browser()
plot(SpShapes,col = "orange")

# ----------end-------------------


-- 
Rick Reeves	
Scientific ProgrammerAnalyst
National Center for Ecological Analysis and Synthesis (NCEAS)
University of California, Santa Barbara
reeves at nceas.ucsb.edu
805 892 2533



From e.pebesma at geo.uu.nl  Wed Dec 21 08:25:01 2005
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Wed, 21 Dec 2005 08:25:01 +0100
Subject: [R-sig-Geo] Current location of the Srings object (or
	its	replacement)?
In-Reply-To: <43A87688.7040909@nceas.ucsb.edu>
References: <43A87688.7040909@nceas.ucsb.edu>
Message-ID: <43A9034D.8070102@geo.uu.nl>

Rick, this change has been done a while back already --
substitute:
Srings with Polygons
Sring with Polygon

see also the article about sp in the latest R-News issue.

Best regards,
--
Edzer

Rick Reeves wrote:

>Hello all:
>
>Following is a code sample that used the Srings class,
>and which used to work before I upgraded to the
>latest build of the 'sp' package and removed the
>spmaptools package from my build.
>
>Now, running this code generates the error:
> 
>Error: couldn't find function "Srings".
>Even loading the spmaptools package does
>not resolve this problem.
>
>Any suggestions on resolving this issue?
>
>Thanks, Rick Reeves
>
>
>
>Now, R reports that
># ----------start -------------------
>
>#
>   Srsl <- vector(mode="list", length=length(AllSps))
>#
># Srings object comes from sp package
>#
>   for (iCtr in 1:length(AllSps))
>   {
>      Srsl[[iCtr]] <- Srings(list(Sring(AllSps[[iCtr]])), 
>names(AllSps)[iCtr])
>      if ((iCtr %% 50) == 0)
>          print(sprintf("....Srings() call for AllSps: %d done...",iCtr))
>   }
>#
>print("....Srings object is made....")
>#browser()
>   SpShapes <- SpatialRings(Srsl, pO=1:SpListCount)
>print("....SpShapes Spatial Rings object is made...plot them....")
>#browser()
>plot(SpShapes,col = "orange")
>
># ----------end-------------------
>
>
>  
>



From Roger.Bivand at nhh.no  Wed Dec 21 09:34:06 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 21 Dec 2005 09:34:06 +0100 (CET)
Subject: [R-sig-Geo] Current location of the Srings object (or its
 replacement)?
In-Reply-To: <43A9034D.8070102@geo.uu.nl>
Message-ID: <Pine.LNX.4.44.0512210923390.31583-100000@reclus.nhh.no>

On Wed, 21 Dec 2005, Edzer J. Pebesma wrote:

> Rick, this change has been done a while back already --
> substitute:
> Srings with Polygons
> Sring with Polygon
> 
> see also the article about sp in the latest R-News issue.

The reason for the incompatibility, as we wrote at the time, was to reduce 
the number of copies of metadata carried around by lines and polygons.

If you happen to have stored objects in SRings format, remove the current 
sp, install the older version - the source can be downloaded from:

http://cran.r-project.org/src/contrib/Archive/S/

and Windows binary for example from:

http://cran.univ-lyon1.fr/bin/windows/contrib/2.1/

and your old spmaptools, write as a shapefile, and read in again after 
replacing old sp with the current one. I've had to do this, so I guess I'm 
not the only person who finds out that data from a terminated project 
needs to be revisited.

Hope this helps,

Roger

> 
> Best regards,
> --
> Edzer
> 
> Rick Reeves wrote:
> 
> >Hello all:
> >
> >Following is a code sample that used the Srings class,
> >and which used to work before I upgraded to the
> >latest build of the 'sp' package and removed the
> >spmaptools package from my build.
> >
> >Now, running this code generates the error:
> > 
> >Error: couldn't find function "Srings".
> >Even loading the spmaptools package does
> >not resolve this problem.
> >
> >Any suggestions on resolving this issue?
> >
> >Thanks, Rick Reeves
> >
> >
> >
> >Now, R reports that
> ># ----------start -------------------
> >
> >#
> >   Srsl <- vector(mode="list", length=length(AllSps))
> >#
> ># Srings object comes from sp package
> >#
> >   for (iCtr in 1:length(AllSps))
> >   {
> >      Srsl[[iCtr]] <- Srings(list(Sring(AllSps[[iCtr]])), 
> >names(AllSps)[iCtr])
> >      if ((iCtr %% 50) == 0)
> >          print(sprintf("....Srings() call for AllSps: %d done...",iCtr))
> >   }
> >#
> >print("....Srings object is made....")
> >#browser()
> >   SpShapes <- SpatialRings(Srsl, pO=1:SpListCount)
> >print("....SpShapes Spatial Rings object is made...plot them....")
> >#browser()
> >plot(SpShapes,col = "orange")
> >
> ># ----------end-------------------
> >
> >
> >  
> >
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Sebastien.TERRA at ecologie.gouv.fr  Wed Dec 21 12:25:48 2005
From: Sebastien.TERRA at ecologie.gouv.fr (=?ISO-8859-1?Q?S=E9bastien=20TERRA?=)
Date: Wed, 21 Dec 2005 12:25:48 +0100
Subject: [R-sig-Geo] =?iso-8859-1?q?R=E9p=2E_=3A_R-sig-Geo_Digest=2C_Vol_2?=
	=?iso-8859-1?q?8=2C_Issue_9_=28Cong=E9s=29?=
Message-ID: <s3a949d1.057@ecologie.gouv.fr>

Bonjour,

Je suis actuellement en cong?s. Je reviendrai le mardi 3 janvier 2006.

Joyeux No?l et bonne ann?e.

Merci.

S?bastien TERRA

>>> r-sig-geo 12/21/05 12:00 >>>

Send R-sig-Geo mailing list submissions to
	r-sig-geo at stat.math.ethz.ch

To subscribe or unsubscribe via the World Wide Web, visit
	https://stat.ethz.ch/mailman/listinfo/r-sig-geo
or, via email, send a message with subject or body 'help' to
	r-sig-geo-request at stat.math.ethz.ch

You can reach the person managing the list at
	r-sig-geo-owner at stat.math.ethz.ch

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-sig-Geo digest..."


Today's Topics:

   1. Tomlin's Map Algebra for sp (Hisaji ONO)
   2. Re: Moving-window sum in a matrix (Edzer J. Pebesma)
   3. Current location of the Srings object (or its	replacement)?
      (Rick Reeves)
   4. Re: Current location of the Srings object (or	its
      replacement)? (Edzer J. Pebesma)
   5. Re: Current location of the Srings object (or its
      replacement)? (Roger Bivand)


----------------------------------------------------------------------

Message: 1
Date: Wed, 21 Dec 2005 02:50:01 +0900 (JST)
From: Hisaji ONO <hi_ono2001 at yahoo.co.jp>
Subject: [R-sig-Geo] Tomlin's Map Algebra for sp
To: r-sig-geo at stat.math.ethz.ch
Message-ID: <20051220175001.25334.qmail at web10713.mail.bbt.yahoo.co.jp>
Content-Type: text/plain; charset=iso-2022-jp

Hello.

 Sp package has grid & grid topology classes.

 It seems to use them to be able to implement famous map
algebra(or cartographic modelling).

 Any plan to implement this analysis method to sp package?


 Regards.



------------------------------

Message: 2
Date: Tue, 20 Dec 2005 22:05:17 +0100
From: "Edzer J. Pebesma" <e.pebesma at geo.uu.nl>
Subject: Re: [R-sig-Geo] Moving-window sum in a matrix

Cc: r-sig-geo at stat.math.ethz.ch, cees at pcraster.nl
Message-ID: <43A8720D.5030104 at geo.uu.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Hisaji ONO wrote:

>Hello.
>
> Sp package has grid & grid topology classes.
>
> It seems to use them to be able to implement famous map
>algebra(or cartographic modelling).
>
> Any plan to implement this analysis method to sp package?
>  
>
Yes, but not in sp.

We're even a bit further than plans, but
not exactly that much. I just read that in
https://stat.ethz.ch/pipermail/r-sig-geo/2004-December/000285.html
I wrote 12 months ago about these plans.  Indeed, we now
have sp on the rails, and should move on. Thanks for
reminding me.

Many of the point, global and areal operations can be
done using standard R syntax; it is however the true spatial
functions like spreads and the window functions that would
be nice to  have.
--
Edzer

>
> Regards.
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at stat.math.ethz.ch
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>  
>



------------------------------

Message: 3
Date: Tue, 20 Dec 2005 13:24:24 -0800
From: Rick Reeves <reeves at nceas.ucsb.edu>
Subject: [R-sig-Geo] Current location of the Srings object (or its
	replacement)?
To: r-sig-geo at stat.math.ethz.ch
Message-ID: <43A87688.7040909 at nceas.ucsb.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed


Hello all:

Following is a code sample that used the Srings class,
and which used to work before I upgraded to the
latest build of the 'sp' package and removed the
spmaptools package from my build.

Now, running this code generates the error:
 
Error: couldn't find function "Srings".
Even loading the spmaptools package does
not resolve this problem.

Any suggestions on resolving this issue?

Thanks, Rick Reeves



Now, R reports that
# ----------start -------------------

#
   Srsl <- vector(mode="list", length=length(AllSps))
#
# Srings object comes from sp package
#
   for (iCtr in 1:length(AllSps))
   {
      Srsl[[iCtr]] <- Srings(list(Sring(AllSps[[iCtr]])), 
names(AllSps)[iCtr])
      if ((iCtr %% 50) == 0)
          print(sprintf("....Srings() call for AllSps: %d done...",iCtr))
   }
#
print("....Srings object is made....")
#browser()
   SpShapes <- SpatialRings(Srsl, pO=1:SpListCount)
print("....SpShapes Spatial Rings object is made...plot them....")
#browser()
plot(SpShapes,col = "orange")

# ----------end-------------------


-- 
Rick Reeves	
Scientific ProgrammerAnalyst
National Center for Ecological Analysis and Synthesis (NCEAS)
University of California, Santa Barbara
reeves at nceas.ucsb.edu
805 892 2533



------------------------------

Message: 4
Date: Wed, 21 Dec 2005 08:25:01 +0100
From: "Edzer J. Pebesma" <e.pebesma at geo.uu.nl>
Subject: Re: [R-sig-Geo] Current location of the Srings object (or	its
	replacement)?
To: Rick Reeves <reeves at nceas.ucsb.edu>
Cc: r-sig-geo at stat.math.ethz.ch
Message-ID: <43A9034D.8070102 at geo.uu.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Rick, this change has been done a while back already --
substitute:
Srings with Polygons
Sring with Polygon

see also the article about sp in the latest R-News issue.

Best regards,
--
Edzer

Rick Reeves wrote:

>Hello all:
>
>Following is a code sample that used the Srings class,
>and which used to work before I upgraded to the
>latest build of the 'sp' package and removed the
>spmaptools package from my build.
>
>Now, running this code generates the error:
> 
>Error: couldn't find function "Srings".
>Even loading the spmaptools package does
>not resolve this problem.
>
>Any suggestions on resolving this issue?
>
>Thanks, Rick Reeves
>
>
>
>Now, R reports that
># ----------start -------------------
>
>#
>   Srsl <- vector(mode="list", length=length(AllSps))
>#
># Srings object comes from sp package
>#
>   for (iCtr in 1:length(AllSps))
>   {
>      Srsl[[iCtr]] <- Srings(list(Sring(AllSps[[iCtr]])), 
>names(AllSps)[iCtr])
>      if ((iCtr %% 50) == 0)
>          print(sprintf("....Srings() call for AllSps: %d done...",iCtr))
>   }
>#
>print("....Srings object is made....")
>#browser()
>   SpShapes <- SpatialRings(Srsl, pO=1:SpListCount)
>print("....SpShapes Spatial Rings object is made...plot them....")
>#browser()
>plot(SpShapes,col = "orange")
>
># ----------end-------------------
>
>
>  
>



------------------------------

Message: 5
Date: Wed, 21 Dec 2005 09:34:06 +0100 (CET)
From: Roger Bivand <Roger.Bivand at nhh.no>
Subject: Re: [R-sig-Geo] Current location of the Srings object (or its
	replacement)?
To: "Edzer J. Pebesma" <e.pebesma at geo.uu.nl>
Cc: r-sig-geo at stat.math.ethz.ch
Message-ID: <Pine.LNX.4.44.0512210923390.31583-100000 at reclus.nhh.no>
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 21 Dec 2005, Edzer J. Pebesma wrote:

> Rick, this change has been done a while back already --
> substitute:
> Srings with Polygons
> Sring with Polygon
> 
> see also the article about sp in the latest R-News issue.

The reason for the incompatibility, as we wrote at the time, was to reduce 
the number of copies of metadata carried around by lines and polygons.

If you happen to have stored objects in SRings format, remove the current 
sp, install the older version - the source can be downloaded from:

http://cran.r-project.org/src/contrib/Archive/S/

and Windows binary for example from:

http://cran.univ-lyon1.fr/bin/windows/contrib/2.1/

and your old spmaptools, write as a shapefile, and read in again after 
replacing old sp with the current one. I've had to do this, so I guess I'm 
not the only person who finds out that data from a terminated project 
needs to be revisited.

Hope this helps,

Roger

> 
> Best regards,
> --
> Edzer
> 
> Rick Reeves wrote:
> 
> >Hello all:
> >
> >Following is a code sample that used the Srings class,
> >and which used to work before I upgraded to the
> >latest build of the 'sp' package and removed the
> >spmaptools package from my build.
> >
> >Now, running this code generates the error:
> > 
> >Error: couldn't find function "Srings".
> >Even loading the spmaptools package does
> >not resolve this problem.
> >
> >Any suggestions on resolving this issue?
> >
> >Thanks, Rick Reeves
> >
> >
> >
> >Now, R reports that
> ># ----------start -------------------
> >
> >#
> >   Srsl <- vector(mode="list", length=length(AllSps))
> >#
> ># Srings object comes from sp package
> >#
> >   for (iCtr in 1:length(AllSps))
> >   {
> >      Srsl[[iCtr]] <- Srings(list(Sring(AllSps[[iCtr]])), 
> >names(AllSps)[iCtr])
> >      if ((iCtr %% 50) == 0)
> >          print(sprintf("....Srings() call for AllSps: %d done...",iCtr))
> >   }
> >#
> >print("....Srings object is made....")
> >#browser()
> >   SpShapes <- SpatialRings(Srsl, pO=1:SpListCount)
> >print("....SpShapes Spatial Rings object is made...plot them....")
> >#browser()
> >plot(SpShapes,col = "orange")
> >
> ># ----------end-------------------
> >
> >
> >  
> >
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



------------------------------

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


End of R-sig-Geo Digest, Vol 28, Issue 9



From drf5n at maplepark.com  Wed Dec 21 17:25:26 2005
From: drf5n at maplepark.com (David Forrest)
Date: Wed, 21 Dec 2005 10:25:26 -0600 (CST)
Subject: [R-sig-Geo] Current location of the Srings object (or its
 replacement)?
In-Reply-To: <Pine.LNX.4.44.0512210923390.31583-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0512210923390.31583-100000@reclus.nhh.no>
Message-ID: <Pine.LNX.4.58.0512211016110.21873@maplepark.com>

On Wed, 21 Dec 2005, Roger Bivand wrote:
...

I see that the code at http://r-spatial.sourceforge.net/gallery/ is
updated to use the Polygon calls rather than the Sring calls.

Would it be good to point at this code and graphics gallery from
http://www.ibiblio.org/pub/languages/R/CRAN/src/contrib/Views/Spatial.html
or http://sal.uiuc.edu/csiss/Rgeo/ to demonstrate the utility of
R-sig-Geo?

Dave
-- 
 Dr. David Forrest
 drf at vims.edu                                    (804)684-7900w
 drf5n at maplepark.com                             (804)642-0662h
                                   http://maplepark.com/~drf5n/



From reeves at nceas.ucsb.edu  Wed Dec 21 20:53:14 2005
From: reeves at nceas.ucsb.edu (Rick Reeves)
Date: Wed, 21 Dec 2005 11:53:14 -0800
Subject: [R-sig-Geo] Writing SpatialPolygonsDataFrame object to an ESRI
 Shape File format? `
Message-ID: <43A9B2AA.3000601@nceas.ucsb.edu>

Thanks for earlier help finding the new SpatialPolygons classes..
My final (for now) question, that I can't answer from various
documents is:

How to write my SpatialxxxxDataFrame object to an ESRI Shape File?

the previous method I used was:

writeSRDFShape(SRDF, OutputShapeFileRoot)

I have both a SpatialPolygon and SpatialPolygonDataFrame objects to use
as input...

Thanks, RR

-- 
Rick Reeves	
Scientific ProgrammerAnalyst
National Center for Ecological Analysis and Synthesis (NCEAS)
University of California, Santa Barbara
reeves at nceas.ucsb.edu
805 892 2533



From Roger.Bivand at nhh.no  Wed Dec 21 21:31:23 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 21 Dec 2005 21:31:23 +0100 (CET)
Subject: [R-sig-Geo] Writing SpatialPolygonsDataFrame object to an ESRI
 Shape File format? `
In-Reply-To: <43A9B2AA.3000601@nceas.ucsb.edu>
Message-ID: <Pine.LNX.4.44.0512212126180.32205-100000@reclus.nhh.no>

On Wed, 21 Dec 2005, Rick Reeves wrote:

> Thanks for earlier help finding the new SpatialPolygons classes..
> My final (for now) question, that I can't answer from various
> documents is:
> 
> How to write my SpatialxxxxDataFrame object to an ESRI Shape File?
> 
> the previous method I used was:
> 
> writeSRDFShape(SRDF, OutputShapeFileRoot)
> 
> I have both a SpatialPolygon and SpatialPolygonDataFrame objects to use
> as input...

The functions are wrappers in maptools using sp classes, but because 
shapefiles have to have dbf, the easy wrapper takes a 
SpatialPolygonDataFrame object:

writePolyShape(obj, file="whatever")

with reading now being readShapePoly()

We haven't managed to write a correct *.prj file yet, but would like to - 
I think the code is in GDAL and PROJ.4 with examples in GRASS, but I 
haven't done it - help would be welcome!

Best wishes,

Roger

> 
> Thanks, RR
> 
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From carlos_alberto_arnillas at hotmail.com  Wed Dec 28 23:21:33 2005
From: carlos_alberto_arnillas at hotmail.com (Carlos Alberto Arnillas)
Date: Wed, 28 Dec 2005 17:21:33 -0500
Subject: [R-sig-Geo] importing GRIDs from ArcView or ASCII rasters
Message-ID: <BAY16-DAV2D06132A52657C70A000FAA360@phx.gbl>

Hello
I am trying to import a set of raster files (in grid format, supported
by Arc View 3.x) to make some logistic regressions. I did a small
program to import them from a ASCII format, but it's too slow.
I'm not working with GRASS, do you have any idea about how can I do
that?
Thanks,

Carlos Alberto



From Roger.Bivand at nhh.no  Thu Dec 29 11:45:52 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 29 Dec 2005 11:45:52 +0100 (CET)
Subject: [R-sig-Geo] importing GRIDs from ArcView or ASCII rasters
In-Reply-To: <BAY16-DAV2D06132A52657C70A000FAA360@phx.gbl>
Message-ID: <Pine.LNX.4.44.0512291134460.16048-100000@reclus.nhh.no>

On Wed, 28 Dec 2005, Carlos Alberto Arnillas wrote:

> Hello
> I am trying to import a set of raster files (in grid format, supported
> by Arc View 3.x) to make some logistic regressions. I did a small
> program to import them from a ASCII format, but it's too slow.
> I'm not working with GRASS, do you have any idea about how can I do
> that?

Which format are the data stored in? Arc ASCII grid is much the easiest, 
and the maptools package provides functions for reading and writing these:

?readAsciiGrid

gives the details, and can be used easily on any platform. Other formats 
can be read through rgdal, but this depends on external software, so is 
easiest on Unix/Linux, where users can readily build GDAL and PROJ.4 from 
source first. If you need to use geotiffs, for example (and if ArcView can 
write them), rgdal would solve your problem. You may need to think things 
through first if your rasters are large and if there are many missing 
values - the sp SpatialGrid and SpatialPixels classes may be helpful.

> Thanks,
> 
> Carlos Alberto
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



