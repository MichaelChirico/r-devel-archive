From carlaoliveir at gmail.com  Thu Sep  1 20:58:42 2016
From: carlaoliveir at gmail.com (Carla Oliveira)
Date: Thu, 1 Sep 2016 19:58:42 +0100
Subject: [R-sig-Geo] =?utf-8?q?GEOMED_2017_=E2=80=93_=E2=80=9CDeeper_insig?=
	=?utf-8?q?ht_from_big_data_and_small_areas=E2=80=9D_-_update?=
Message-ID: <CAOoNHqjGVJrM3TP8YiNAjgnYB+oh4ktNje6Zwe=SVv7H19YH6g@mail.gmail.com>

*Conference*: Geomed2017

*Location*: Porto, Portugal
*Venue*: I3S ? Instituto de Investiga??o e Inova??o em Sa?de
*Dates*: Sept. 7, 2017 - Sept. 9, 2017

*Website*: http://www.i3s.up.pt/geomed2017/index.html


Dear list,


The *Institute for Research and Innovation in Health **(Instituto de
Investiga??o e Inova??o em Sa?de) *(i3S), is pleased to announce GEOMED
2017 ? ?Deeper insight from big data and small areas?. GEOMED 2017 is the X
international interdisciplinary conference on spatial statistics,
geographical epidemiology and geographical aspects of public health. This
conference will be held in Porto, Portugal, from 7 to 9 September 2017 and
aims to bring together statisticians, geographers, epidemiologists,
computer scientists and public health professionals to discuss spatial and
spatio-temporal methods in health studies.

The interdisciplinary mix of the invited speakers is designed to ensure
that the conference will be of interest to participants with a wide range
of different backgrounds.

We invite you to submit an abstract in any one of the topic areas  planned
for GEOMED 2017 which include: GIS in Public Health; Spatial Health
Surveillance; Spatial survival and registry data analysis; Clustering of
temporal trends in space-time disease mapping; Agent-based modeling;
Modifiable areal unit issues and methods; Social networks and spatial
epidemiology: tools, opportunities and challenges; Modelling
climate-sensitive disease; Places and health: implications for
understanding health in cities; Modelling and inference in infectious
disease epidemiology; The use of linked data in spatial epidemiology;
Joint Modelling with Spatial Variation; Health Applications of the Google
Earth Engine; Challenges and Advances in Spatio-Temporal Disease Modelling.


Important deadlines are:
April 15, 2017 - Deadline for submission of abstracts

May 25, 2017 - Notification of acceptance of contributed talk and poster

June 15, 2017 -Deadline for early registration


For more details, please visit the conference website at:
http://www.i3s.up.pt/geomed2017/index.html

(Note: Please ignore the link sent in the previous email and consider this
link)


On behalf of the organizing committee, I very much look forward to
welcoming you to GEOMED 2017.





2016-08-04 9:29 GMT+01:00 Carla Oliveira <carlaoliveir at gmail.com>:

> Dear List,
>
>
> The *Institute for Research and Innovation in Health (Instituto de
> Investiga??o e Inova??o em Sa?de) *(i3S), is pleased to announce GEOMED
> 2017 ? ?Deeper insight from big data and small areas?. GEOMED 2017 is the X
> international interdisciplinary conference on spatial statistics,
> geographical epidemiology and geographical aspects of public health. This
> conference will be held in Porto, Portugal, from 7 to 9 September 2017 and
> aims to bring together statisticians, geographers, epidemiologists,
> computer scientists and public health professionals to discuss spatial
> and spatio-temporal methods in health studies.
>
> The interdisciplinary mix of the invited speakers is designed to ensure
> that the conference will be of interest to participants with a wide range
> of different backgrounds.
>
>
> We invite you to submit an abstract in any one of the topic areas  planned
> for GEOMED 2017 which include: GIS in Public Health; Spatial Health
> Surveillance; Spatial survival and registry data analysis; Clustering of
> temporal trends in space-time disease mapping; Agent-based modeling;
> Modifiable areal unit issues and methods; Social networks and spatial
> epidemiology: tools, opportunities and challenges; Modelling
> climate-sensitive disease; Places and health: implications for
> understanding health in cities; Modelling and inference in infectious
> disease epidemiology; The use of linked data in spatial epidemiology;
> Joint Modelling with Spatial Variation; Health Applications of the Google
> Earth Engine; Challenges and Advances in Spatio-Temporal Disease Modelling.
>
>
> Important deadlines are:
> April 15, 2017 - Deadline for submission of abstracts
>
> May 25, 2017 - Notification of acceptance of contributed talk and poster
>
> June 15, 2017 -Deadline for early registration
>
>
> For more details, please visit the conference website at:
> http://www.i3s.up.pt/geomed17/index.html
>
>
> On behalf of the organizing committee, I very much look forward to
> welcoming you to GEOMED 2017.
>
>
>
>
> --
>
> *Carla Oliveira*
>
>
>
> *Researcher*
>
> i3S - Instituto de Investiga??o e Inova??o em Sa?de, UP
>
> INEB ? Instituto de Engenharia Biom?dica, UP
>
> *coliveir at ineb.up.pt <coliveir at ineb.up.pt>* / *www.i3s.up.pt
> <http://www.i3s.up.pt/>* / *www.ineb.up.pt <http://www.ineb.up.pt/>*
>
>
>
> *Invited Assistant Professor *
>
> ESTSP ? Escola Superior Tecnol?gica da Sa?de do Porto, IPP
>
> Departamento de Biomatem?tica, Bioestat?stica e Bioinform?tica
>
> *cto at estsp.ipp.pt <cto at estsp.ipp.pt>* / *www.estsp.ipp.pt
> <http://www.estsp.ipp.pt/>*
>
>


-- 

*Carla Oliveira*


 *Researcher*

i3S - Instituto de Investiga??o e Inova??o em Sa?de, UP

INEB ? Instituto de Engenharia Biom?dica, UP

*coliveir at ineb.up.pt <coliveir at ineb.up.pt>* / *www.i3s.up.pt
<http://www.i3s.up.pt/>* / *www.ineb.up.pt <http://www.ineb.up.pt/>*


*Invited Assistant Professor *

ESTSP ? Escola Superior Tecnol?gica da Sa?de do Porto, IPP

Departamento de Biomatem?tica, Bioestat?stica e Bioinform?tica

*cto at estsp.ipp.pt <cto at estsp.ipp.pt>* / *www.estsp.ipp.pt
<http://www.estsp.ipp.pt/>*

	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Fri Sep  2 11:38:32 2016
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 2 Sep 2016 11:38:32 +0200
Subject: [R-sig-Geo] rpostgis announcement
In-Reply-To: <57C5A560.9040900@ase-research.org>
References: <CAECT9fmGWZzDq-LzNM6zog-xk-upXB8eLbtdiZqzxUjSd7mXBw@mail.gmail.com>
	<ca4592a6-d603-66b3-0ec8-3f6c149b59d2@uni-muenster.de>
	<57C5A560.9040900@ase-research.org>
Message-ID: <46eba36a-ead2-531f-1f04-909bcd282e8f@uni-muenster.de>



On 30/08/16 17:25, Mathieu Basille wrote:
> Thank you Edzer for the feedback!
> 
> We have been watching sfr, and I really look forward to its completion!
> 
> Now to answer your question, the choice of using WKT (and WKB from package
> 'wkb' when possible on write, for better performance) was initially driven
> by the fact that Windows binaries for rgdal are not compiled with
> PostgreSQL/PostGIS support, which is a huge problem. Having to deal with a
> class of students (mostly using Windows) trying to make it work was just a
> big mess! :)

Good point - I easily forget this.

> 
> In addition, on read, it also allows to subquery the data with any clause
> (WHERE, ORDER BY, LIMIT, etc.), which was still not possible with rgdal
> last time I checked (admittedly a few months ago).

Yes, and in particular the ability to make spatial predicates in select
queries might make it possible to go through really large datasets.

> 
> All in all, rgeos::read/writeWKT (and additionally wkb::read/writeWKB)
> gives us the flexibility that we were looking for. Note that we didn't
> check how efficient it was in comparison with rgdal (in terms of performance).

I wrote a little note about performance when reading WKB into R here:
http://r-spatial.org/r/2016/09/01/bm.html
Spoiler: avoiding sp and using C++ might gain you a factor 250 over
wkb::readWKB(). There is a path WKB <-> sf <-> sp that should work, now.

> 
> As a side note, having EWKB/EWKT standardized and usable in R (for instance
> through sfr) would be a real plus! In our case, dealing with projection
> information (SRID) was really not straightforward...

It took me some time to figure out the differences between EWKB and
ISO-WKB, but I believe I got it, now, and both are supported (but not
auto-detected).

> 
> Best,
> Mathieu.
> 
> 
> Le 29/08/2016 16:19, Edzer Pebesma a ?crit :
>> Nice development!
>>
>> In the simple features for R project, https://github.com/edzer/sfr , I
>> have been writing direct (E)WKB <--> R conversions, and support reading
>> tables with geometry from PostGIS, using sf::st_read_pg(db, table). I
>> was thinking about how to do the writing when your package came!
>>
>> The advantage of the sf package, over sp, is that it supports (will
>> support) all 17 geometry types for 4 dimensions (XY, XYZ, XYM, XYZM).
>>
>> In order to try to gain momentum for this, could you provide a few
>> arguments and/or use cases for which this approach is more useful than
>> readOGR/writeOGR in rgdal?
>>
>> Best regards,
>>
>> On 29/08/16 16:48, David Bucklin wrote:
>>> Dear r-sig-geo list members,
>>>
>>> We'd like to announce the initial CRAN release of 'rpostgis' (v1.0.0),
>>> which facilitates transfer between PostGIS "Geometry" objects (stored in
>>> PostgreSQL databases) and R spatial objects. The package also contains a
>>> variety of convenience functions which are supplemental to the excellent
>>> 'RPostgreSQL' package for interfacing with a PostgreSQL/PostGIS database.
>>>
>>> To install the package:
>>>
>>> install.packages("rpostgis")
>>>
>>> The package main development area can be found on GitHub; any bugs, issues,
>>> or feature requests can be submitted through the "issues" page there:
>>>
>>> https://github.com/mablab/rpostgis
>>
>> I did!
>>
>>>
>>> David
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/
Spatial Statistics Society http://www.spatialstatistics.info

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160902/8957a671/attachment.bin>

From mtreglia at gmail.com  Fri Sep  2 19:18:12 2016
From: mtreglia at gmail.com (Michael Treglia)
Date: Fri, 2 Sep 2016 13:18:12 -0400
Subject: [R-sig-Geo] Surprising performance difference across computers with
	raster operation
Message-ID: <CAPKp32sSzw9bynPe5ZuGxpNqmietnGDbcd42Vj4jS6+oSm4jSQ@mail.gmail.com>

Hi All,

Was doing some work across a couple of different computers with the raster
package, and noticed a pretty considerable difference in processing time to
simply merge two Bioclim tiles (reproducible code below, plus system.time()
and sessionInfo() details). Both machines have plenty of RAM and use an SSD
for temp storage and program files; main differences are processor, and OS
(Win 7 vs Win 10, both x64).  Running R 3.3.1 on both, with raster 2.5-8.
I'd be curious to hear if folks have an idea what might contributes to this
difference - is it OS?

The machine with the slower processor running Windows 10 took about 1/2 the
amount of total time for the operation.  Out of curiosity, I also tried
this operation on Ubuntu Virtual Machines I've set up on both computers -
those times were pretty comparable to one another,but much faster than
either Windows setup. (see below).

This isn't a problem, but obviously might inform what environment I run
some big jobs in...

Thanks for any feedback. Best,
mike t


Sample Code:
bioclE <- raster::getData('worldclim', var='bio', res=0.5, lat=13.20884,
lon=-85.33288)
bioclW <- raster::getData('worldclim', var='bio', res=0.5, lat=13.20884,
lon=-93.7)
system.time(biocl <- raster::merge(bioclW, bioclE))


****Computer 1 - Windows 7, faster processor

> system.time(biocl <- raster::merge(bioclW, bioclE))
   user  system elapsed
 208.98   22.33  231.54

> sessionInfo()
R version 3.3.1 (2016-06-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C

[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] raster_2.5-8 sp_1.2-3

loaded via a namespace (and not attached):
[1] rgdal_1.1-10    tools_3.3.1     Rcpp_0.12.6     grid_3.3.1
 lattice_0.20-33



****Computer 2 - Windows 10, slower processor
> system.time(biocl <- raster::merge(bioclW, bioclE))
   user  system elapsed
  91.08   28.04  119.42

> sessionInfo()
R version 3.3.1 (2016-06-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 10586)

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] sp_1.2-3        Rcpp_0.12.6     raster_2.5-8    grid_3.3.1
[5] lattice_0.20-33



****Computer 1 with Ubuntu VM

> system.time(biocl <- raster::merge(bioclW, bioclE))
   user  system elapsed
 77.404   5.794  83.688

> sessionInfo()
R version 3.3.1 (2016-06-21)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 14.04.5 LTS

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.1     sp_1.2-3        Rcpp_0.12.6     raster_2.5-8
[5] grid_3.3.1      lattice_0.20-33 tcltk_3.3.1



****Computer 2 with Ubunutu VM

> system.time(biocl <- raster::merge(bioclW, bioclE))
   user  system elapsed
 74.696   0.000  76.060

> sessionInfo()
R version 3.3.1 (2016-06-21)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04.1 LTS

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.1     sp_1.2-3        Rcpp_0.12.6     raster_2.5-8
[5] grid_3.3.1      lattice_0.20-33 tcltk_3.3.1

	[[alternative HTML version deleted]]


From javajimburke at gmail.com  Sun Sep  4 20:24:13 2016
From: javajimburke at gmail.com (Jim Burke)
Date: Sun, 4 Sep 2016 13:24:13 -0500
Subject: [R-sig-Geo] My code mistakenly prints multiple PDF pages
Message-ID: <CALkjiFQ+4iguWCb+sYta-yy6gzzz+e80LEONYumqMfNCC+yUGw@mail.gmail.com>

The code below should print ONE page but instead prints its different plots
on THREE pages
Please take a look and let me know my mistake. I appreciate any and all
insight.

tmpPDFName = paste("HD_", shp$LD,"_African_American", ".pdf", sep = "",
collapse = NULL)
pdf(file = tmpPDFName,
      width=8.5, height=10, onefile=TRUE, family="Helvetica",
      paper="a4r", encoding= "default",
      bg="transparent", fg="black", pointsize=16, pagecentre=TRUE,
colormodel="srgb",
      useDingbats=TRUE, useKerning=TRUE, fillOddEven=FALSE, compres=TRUE)

# CENSUS BLOCKS
HD_census$Black[is.na(HD_census$Black)] <- 0
HD_census$Total[is.na(HD_census$Total)] <- 0
add.alpha(brewer.pal(5,'Reds'),0.5)
my_shades <- auto.shading( ifelse(HD_census$Total==0, 0,
(HD_census$Black/HD_census$Total)/100 ), n = 5, cutter = rangeCuts, cols =
brewer.pal(5, "Reds"))
GISTools::choropleth(HD_census, ifelse(HD_census$Total==0, 0,
(HD_census$Black/HD_census$Total)/100 ),
   shading = my_shades, border="transparent")
title(main = "Africian American Percentages", col = "red", font = 3)   #
Horizontal HD114

# POLYGON OUTLINE
#plot.new()
#par(new=TRUE)
plot (shp, add=FALSE, lwd = 4, border='green' )

# POLYGON OUTLINE TITLES
MyTitle <- paste('House District', shp$LD, shp$Candidate, shp$HD_Phone,
sep="\n")

# POLYGON OUTLINE Insert date and time label. At lower left corner.
today <- Sys.Date()
str_today <- format(Sys.time(),"%m/%d/%Y %I:%M %p")
str_text <- paste("Created:", str_today, sep=" ")
##  "usr" returns a vector containing xleft, xright, ybottom, ytop.
usr <- par( "usr" )
text( usr[ 1 ], usr[ 3 ], str_text,  adj = c( 0, 0 ), col = 'darkgreen',
cex=.9 )

# PLOT PRECINCTS INSIDE LARGER POLYGON
plot (HD_Precincts, add=FALSE, lwd = 2, border='blue' )

myLabel <- paste( bquote(.(HD_Precincts$PCT)),
bquote(.(HD_Precincts$First_Name)),
bquote(.        (HD_Precincts$Last_Name)), bquote(.(HD_Precincts$Phone)),
 sep = '\n', collapse = NULL)
# PLOT PRECINCT LABELS
HDShp_LatLong <- polygonsLabel(HD_Precincts,
   labels = myLabel, method = c("maxdist",
   "buffer", "centroid", "random", "inpolygon")[2],
   gridpoints = 60, polypart = c("all","largest")[2],
   cex = .4, col="blue", doPlot = TRUE)
# Close and write to PDF
dev.off()

Thanks,
Jim

	[[alternative HTML version deleted]]


From timjp at unimelb.edu.au  Mon Sep  5 03:17:53 2016
From: timjp at unimelb.edu.au (Tim Peterson)
Date: Mon, 5 Sep 2016 11:17:53 +1000
Subject: [R-sig-Geo] Bayesian Maximum Entropy insights & tips?
Message-ID: <bfb91ce4-d671-b463-f12b-aa2486d6afa8@unimelb.edu.au>

Dear listers,

I've recently become aware of Bayesian Maximum Entropy (BME) 
geostatistical mapping and I am especially interested in its ability to 
incorporate soft-data intervals into the mapping. The inclusion of such 
constraints on the estimates appears to be much easier, and less 
computationally demanding, that using indicator kriging/simulation.

I have read many of the BME papers by George Christakos and co and the 
few application papers by others. However, despite being conformable 
with kriging equations etc, to me the BME methods are opaque and I am 
yet to find a paper clearly presenting an application. Furthermore, 
there is no R BME package (only software appears to be compiled matlab 
MEX library 'BMElib') and almost no discussion of BME on this list.

So anyway, I'd be really grateful to get any sights or experience with 
BME, application within R and references to detailed application papers.

Thanks in advance,

Tim

--------------------
Dr. Tim Peterson

The Department of Infrastructure Engineering
The University of Melbourne, 3010 Australia
T: +61 3 8344 9950 <tel:%2B61%203%208344%209950>, M: +61 0438 385 937 
<tel:%2B61%200438%20385%20937>

Find out more: Dept. profile 
<http://www.ie.unimelb.edu.au/people/staff.php?person_ID=141135> | 
Research Gate <https://www.researchgate.net/profile/Tim_Peterson7> | 
Google Scholar 
<http://scholar.google.com.au/citations?user=kkYJLF4AAAAJ&hl=en&oi=ao> | 
Groundwater Statistics Toolbox 
<http://peterson-tim-j.github.io/Groundwater-Statistics-Toolbox/> | 
Catchment Resilience Model 
<https://github.com/peterson-tim-j/Catchment_Resilience_Model>

	[[alternative HTML version deleted]]


From erik.alda at gmail.com  Tue Sep  6 20:23:17 2016
From: erik.alda at gmail.com (Erik Alda)
Date: Tue, 6 Sep 2016 14:23:17 -0400
Subject: [R-sig-Geo] spdep lagsarlm regression error
Message-ID: <CAFXoe8vJw3TgypmndJUgDJXo5ss0Abpn=M6JG68R3JA8CTe8-w@mail.gmail.com>

Dear All,

I am trying to estimate a spatial lag model with the spdep package in R. I
have been reading previous posts and I have managed to resolve most of the
issues I was running into except when I try estimating the impacts of the
spatial lag model using impacts.  It produces the following error.
Error: length(listw$neighbours) == n is not TRUE


I enclose the code I have followed:

> #polgal <-
read.gal("/Users/erik/Dropbox/D_DRIVE_FOLDER/results3_25_16/data/mun.gal",
override.id=TRUE)
> attach(mex)
The following object is masked from package:maps:

    unemp

> mex.poly <- readShapePoly('/Volumes/Transcend/Municipios/Municipios.shp')
> polgal <- read.gal("/Volumes/Transcend/Municipios/Municipios.gal",
override.id=TRUE)
> attributes(polgal)
[output omitted]

> print(polgal)
Neighbour list object:
Number of regions: 2456
Number of nonzero links: 14176
Percentage nonzero weights: 0.2350158
Average number of links: 5.771987
>
> ba0 <- read.table("/Volumes/Transcend/Municipios/Municipiosa.gwt",
header=FALSE, skip=1)
> str(ba0)
'data.frame': 12280 obs. of  3 variables:
 $ V1: int  1 1 1 1 1 2 2 2 2 2 ...
 $ V2: int  231 2 7 3 12 1 12 16 14 15 ...
 $ V3: num  15862 13205 15802 10167 15332 ...
> ID_ <- unique(ba0$V1)
> ba <- read.gwt2nb("/Volumes/Transcend/Municipios/Municipiosa.gwt",
region.id=ID_)
Warning message:
In read.gwt2nb("/Volumes/Transcend/Municipios/Municipiosa.gwt",  :
  356, 642, 2286, 2334, 2448 are not destinations
> ba
Neighbour list object:
Number of regions: 2456
Number of nonzero links: 12280
Percentage nonzero weights: 0.2035831
Average number of links: 5
Non-symmetric neighbours list
>
> #polgwt <-
read.gwt2nb("/Users/erik/Dropbox/D_DRIVE_FOLDER/results3_25_16/data/geoda/geoda.gwt",
region.id=ID_)
> #summary(polgwt)
> #plot(mex.poly)
>

> ###redefine variables
> y<-eff_m170
> x1<-grado_escolar
> x2<-poverty_perc
> x3<-gini
> x4<-asinh_orgcrime
> x5<-youthperc
> x6<-asinh_popdensity
> x7<-unemp2
> x8<-left
> x9<-coalition
> mex.ols<-lm(eff_m170 ~ x1+x2+x3+x4+x5+x6+x7+x8+x9, data=mex)
> summary(mex.ols)

Call:
lm(formula = eff_m170 ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 +
    x9, data = mex)
[regression output omitted]
> W<-nb2listw(ba, style="W")
> plot(W,coordinates(mex.poly))
> coords<-coordinates(mex.poly)
> W_dist<-knn2nb(knearneigh(coords, 5))
> moran.lm<-lm.morantest(mex.ols, W, alternative="two.sided",
 naSubset=TRUE)
> print(moran.lm)


> sar.mex<-lagsarlm(eff_m170~x1+x2+x3+x4+x5+x6+x7+x8+x9,data=mex,
W,na.action=na.omit)
> summary(sar.mex)

Call:lagsarlm(formula = eff_m170 ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 +
x8 + x9, data = mex, listw = W, na.action = na.omit)

Residuals:
      Min        1Q    Median        3Q       Max
-59.28338 -16.61112   0.73875  19.39619  52.48456

Type: lag
Regions with no neighbours included:
 51 55 68 70 98 160 193 280 287 307 321 350 370 497 590 643 735 746 757 779
785 803 810 858 878 905 1161 1527 1556 1598 1617 1636 1654 1668 1671 1687
1693 1699 1726 1730 1739 1749 1754 1822 1851 1881 1938 1948 1953 1979 1995
2032 2047 2058 2069 2071 2080 2090 2100 2125 2135 2151 2155 2157 2184 2198
2322 2387 2393 2400 2436 2445
[regression output omitted]

> impacts(sar.mex listw=W)
Error: unexpected symbol in "impacts(sar.mex listw"
> impacts(sar.mex, listw=W)
*Error: length(listw$neighbours) == n is not TRUE*






I know I am doing something wrong and I have not managed to fix that last
error. Any advice will be greatly appreciated

Thanks

-- 

Erik Alda
Doctoral Candidate
Department of Justice, Law and Criminology
School of Public Affairs
The American University, Washington, D.C.
Alt.e-mail: ea3466a at american.edu

	[[alternative HTML version deleted]]


From veroandreo at gmail.com  Tue Sep  6 20:43:54 2016
From: veroandreo at gmail.com (Veronica Andreo)
Date: Tue, 6 Sep 2016 15:43:54 -0300
Subject: [R-sig-Geo] write.tgrass (spacetime) does not work for any
	RasterStack
Message-ID: <CAAMki4HH+3C3RF5EhGgnNaptdbjH19=qiF83TxGRyqdF3Tzsyg@mail.gmail.com>

Hello

I'm working with raster time series in GRASS, but I needed to apply a
gap-filling function available in R (dineof in the package sinkr).
Exporting the time series from GRASS and importing into R went fine... I
did all the processing which implies transforming the raster time series
into a matrix, run dineof and then rebuild the RasterStack... And here is
the problem... write.tgrass does not work with this rebuilt RasterStack

I get this error:

write.tgrass(tempmean_new_rs, "tempmean_new_from_R.tar.gzip")
Error in data.frame(names(obj), start.time, end.time) : arguments imply
differing number of rows: 156, 0

write.tgrass does work however with the RasterStack imported and read with
read.tgrass. So, I compared both RasterStacks:

### the one imported from GRASS (without any change):
> test
class       : RasterStack
dimensions  : 104, 139, 14456, 156  (nrow, ncol, ncell, nlayers)
resolution  : 500, 500  (x, y)
extent      : 624500, 694000, 208500, 260500  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=lcc +lat_1=36.16666666666666 +lat_2=34.33333333333334
+lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +no_defs +a=6378137
+rf=298.257222101 +towgs84=0.000,0.000,0.000 +to_meter=1
names       : X2000_01_tempmean, X2000_02_tempmean, X2000_03_tempmean,
X2000_04_tempmean, X2000_05_tempmean, X2000_06_tempmean, X2000_07_tempmean,
X2000_08_tempmean, X2000_09_tempmean, X2000_10_tempmean, X2000_11_tempmean,
X2000_12_tempmean, X2001_01_tempmean, X2001_02_tempmean, X2001_03_tempmean,
...
time        : 2000-01-01 - 2012-12-01 (range)

### the one I re-constructed after doing my processing
> tempmean_new_rs
class       : RasterStack
dimensions  : 104, 139, 14456, 156  (nrow, ncol, ncell, nlayers)
resolution  : 500, 500  (x, y)
extent      : 624500, 694000, 208500, 260500  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=lcc +lat_1=36.16666666666666 +lat_2=34.33333333333334
+lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +no_defs +a=6378137
+rf=298.257222101 +towgs84=0.000,0.000,0.000 +to_meter=1
names       :    layer.1,    layer.2,    layer.3,    layer.4,    layer.5,
 layer.6,    layer.7,    layer.8,    layer.9,   layer.10,   layer.11,
layer.12,   layer.13,   layer.14,   layer.15, ...
min values  :  2.8337839,  6.4129490, 11.2577566, 13.2967885, 20.4898198,
24.3399993, 24.2426851, 24.0908008, 20.4639886, 14.9326849,  7.8406800,
 0.6784587,  3.0555789,  6.4902200,  7.4145889, ...
max values  :   4.496206,   8.090485,  12.699460,  14.956419,  21.605554,
 25.174480,  25.044242,  24.839163,  21.734339,  16.165316,   9.309428,
2.563087,   4.884175,   8.479331,   9.218642, ...

All the same, *except for the time attribute* that the one read from GRASS
has and the one I rebuilt doesn't. Maybe there's the problem? How do I add
this time attribute to my RasterStack so that write.tgrass creates the
 file I need to import directly into GRASS as a raster time series???

Thanks a lot for any hint!

Best,
Vero

	[[alternative HTML version deleted]]


From vijaylulla at gmail.com  Tue Sep  6 21:19:24 2016
From: vijaylulla at gmail.com (Vijay Lulla)
Date: Tue, 6 Sep 2016 15:19:24 -0400
Subject: [R-sig-Geo] write.tgrass (spacetime) does not work for any
	RasterStack
In-Reply-To: <CAAMki4HH+3C3RF5EhGgnNaptdbjH19=qiF83TxGRyqdF3Tzsyg@mail.gmail.com>
References: <CAAMki4HH+3C3RF5EhGgnNaptdbjH19=qiF83TxGRyqdF3Tzsyg@mail.gmail.com>
Message-ID: <CAKkiGbtBs0rPeTf2VQwpHJRKpQS9WTD5S4_=j2=heSKLVJj2zg@mail.gmail.com>

You can use the function `setZ` from raster package to set z (here "time")
attribute.  Please see ?`setZ`.


On Tue, Sep 6, 2016 at 2:43 PM, Veronica Andreo <veroandreo at gmail.com>
wrote:

> Hello
>
> I'm working with raster time series in GRASS, but I needed to apply a
> gap-filling function available in R (dineof in the package sinkr).
> Exporting the time series from GRASS and importing into R went fine... I
> did all the processing which implies transforming the raster time series
> into a matrix, run dineof and then rebuild the RasterStack... And here is
> the problem... write.tgrass does not work with this rebuilt RasterStack
>
> I get this error:
>
> write.tgrass(tempmean_new_rs, "tempmean_new_from_R.tar.gzip")
> Error in data.frame(names(obj), start.time, end.time) : arguments imply
> differing number of rows: 156, 0
>
> write.tgrass does work however with the RasterStack imported and read with
> read.tgrass. So, I compared both RasterStacks:
>
> ### the one imported from GRASS (without any change):
> > test
> class       : RasterStack
> dimensions  : 104, 139, 14456, 156  (nrow, ncol, ncell, nlayers)
> resolution  : 500, 500  (x, y)
> extent      : 624500, 694000, 208500, 260500  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=lcc +lat_1=36.16666666666666 +lat_2=34.33333333333334
> +lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +no_defs +a=6378137
> +rf=298.257222101 +towgs84=0.000,0.000,0.000 +to_meter=1
> names       : X2000_01_tempmean, X2000_02_tempmean, X2000_03_tempmean,
> X2000_04_tempmean, X2000_05_tempmean, X2000_06_tempmean, X2000_07_tempmean,
> X2000_08_tempmean, X2000_09_tempmean, X2000_10_tempmean, X2000_11_tempmean,
> X2000_12_tempmean, X2001_01_tempmean, X2001_02_tempmean, X2001_03_tempmean,
> ...
> time        : 2000-01-01 - 2012-12-01 (range)
>
> ### the one I re-constructed after doing my processing
> > tempmean_new_rs
> class       : RasterStack
> dimensions  : 104, 139, 14456, 156  (nrow, ncol, ncell, nlayers)
> resolution  : 500, 500  (x, y)
> extent      : 624500, 694000, 208500, 260500  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=lcc +lat_1=36.16666666666666 +lat_2=34.33333333333334
> +lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +no_defs +a=6378137
> +rf=298.257222101 +towgs84=0.000,0.000,0.000 +to_meter=1
> names       :    layer.1,    layer.2,    layer.3,    layer.4,    layer.5,
>  layer.6,    layer.7,    layer.8,    layer.9,   layer.10,   layer.11,
> layer.12,   layer.13,   layer.14,   layer.15, ...
> min values  :  2.8337839,  6.4129490, 11.2577566, 13.2967885, 20.4898198,
> 24.3399993, 24.2426851, 24.0908008, 20.4639886, 14.9326849,  7.8406800,
>  0.6784587,  3.0555789,  6.4902200,  7.4145889, ...
> max values  :   4.496206,   8.090485,  12.699460,  14.956419,  21.605554,
>  25.174480,  25.044242,  24.839163,  21.734339,  16.165316,   9.309428,
> 2.563087,   4.884175,   8.479331,   9.218642, ...
>
> All the same, *except for the time attribute* that the one read from GRASS
> has and the one I rebuilt doesn't. Maybe there's the problem? How do I add
> this time attribute to my RasterStack so that write.tgrass creates the
>  file I need to import directly into GRASS as a raster time series???
>
> Thanks a lot for any hint!
>
> Best,
> Vero
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Tue Sep  6 21:52:48 2016
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 6 Sep 2016 21:52:48 +0200
Subject: [R-sig-Geo] write.tgrass (spacetime) does not work for any
 RasterStack
In-Reply-To: <CAAMki4EiTLq6jx+rgOOEntgQuzTjjTPoBw9zGAF9-Y4z9d4t4g@mail.gmail.com>
References: <CAAMki4HH+3C3RF5EhGgnNaptdbjH19=qiF83TxGRyqdF3Tzsyg@mail.gmail.com>
	<8a7c0ebb-41eb-d76d-92f3-bfce84fdae4e@uni-muenster.de>
	<CAAMki4EiTLq6jx+rgOOEntgQuzTjjTPoBw9zGAF9-Y4z9d4t4g@mail.gmail.com>
Message-ID: <2e7f745d-2ced-9ca6-77de-01728d92aed1@uni-muenster.de>

Indeed:

x = setZ(tempmean_new_rs, getZ(test))
write.tgrass(x, "x.tar.gz")

seems to work.

On 06/09/16 21:31, Veronica Andreo wrote:
> Hello Edzer
> 
> Thank you very much for your answer :)
> 
> Yes, sure! Find it attached.
> 
> Best,
> Vero
> 
> 2016-09-06 15:51 GMT-03:00 Edzer Pebesma <edzer.pebesma at uni-muenster.de
> <mailto:edzer.pebesma at uni-muenster.de>>:
> 
>     Could you provide me off-list with an .RData file that contains the
>     tempmean_new_rs and test objects?
> 
>     On 06/09/16 20:43, Veronica Andreo wrote:
>     > Hello
>     >
>     > I'm working with raster time series in GRASS, but I needed to apply a
>     > gap-filling function available in R (dineof in the package sinkr).
>     > Exporting the time series from GRASS and importing into R went
>     fine... I
>     > did all the processing which implies transforming the raster time
>     series
>     > into a matrix, run dineof and then rebuild the RasterStack... And
>     here is
>     > the problem... write.tgrass does not work with this rebuilt
>     RasterStack
>     >
>     > I get this error:
>     >
>     > write.tgrass(tempmean_new_rs, "tempmean_new_from_R.tar.gzip")
>     > Error in data.frame(names(obj), start.time, end.time) : arguments
>     imply
>     > differing number of rows: 156, 0
>     >
>     > write.tgrass does work however with the RasterStack imported and
>     read with
>     > read.tgrass. So, I compared both RasterStacks:
>     >
>     > ### the one imported from GRASS (without any change):
>     >> test
>     > class       : RasterStack
>     > dimensions  : 104, 139, 14456, 156  (nrow, ncol, ncell, nlayers)
>     > resolution  : 500, 500  (x, y)
>     > extent      : 624500, 694000, 208500, 260500  (xmin, xmax, ymin, ymax)
>     > coord. ref. : +proj=lcc +lat_1=36.16666666666666
>     +lat_2=34.33333333333334
>     > +lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +no_defs +a=6378137
>     > +rf=298.257222101 +towgs84=0.000,0.000,0.000 +to_meter=1
>     > names       : X2000_01_tempmean, X2000_02_tempmean, X2000_03_tempmean,
>     > X2000_04_tempmean, X2000_05_tempmean, X2000_06_tempmean,
>     X2000_07_tempmean,
>     > X2000_08_tempmean, X2000_09_tempmean, X2000_10_tempmean,
>     X2000_11_tempmean,
>     > X2000_12_tempmean, X2001_01_tempmean, X2001_02_tempmean,
>     X2001_03_tempmean,
>     > ...
>     > time        : 2000-01-01 - 2012-12-01 (range)
>     >
>     > ### the one I re-constructed after doing my processing
>     >> tempmean_new_rs
>     > class       : RasterStack
>     > dimensions  : 104, 139, 14456, 156  (nrow, ncol, ncell, nlayers)
>     > resolution  : 500, 500  (x, y)
>     > extent      : 624500, 694000, 208500, 260500  (xmin, xmax, ymin, ymax)
>     > coord. ref. : +proj=lcc +lat_1=36.16666666666666
>     +lat_2=34.33333333333334
>     > +lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +no_defs +a=6378137
>     > +rf=298.257222101 +towgs84=0.000,0.000,0.000 +to_meter=1
>     > names       :    layer.1,    layer.2,    layer.3,    layer.4,   
>     layer.5,
>     >  layer.6,    layer.7,    layer.8,    layer.9,   layer.10,   layer.11,
>     > layer.12,   layer.13,   layer.14,   layer.15, ...
>     > min values  :  2.8337839,  6.4129490, 11.2577566, 13.2967885,
>     20.4898198,
>     > 24.3399993, 24.2426851, 24.0908008, 20.4639886, 14.9326849, 
>     7.8406800,
>     >  0.6784587,  3.0555789,  6.4902200,  7.4145889, ...
>     > max values  :   4.496206,   8.090485,  12.699460,  14.956419, 
>     21.605554,
>     >  25.174480,  25.044242,  24.839163,  21.734339,  16.165316, 
>      9.309428,
>     > 2.563087,   4.884175,   8.479331,   9.218642, ...
>     >
>     > All the same, *except for the time attribute* that the one read
>     from GRASS
>     > has and the one I rebuilt doesn't. Maybe there's the problem? How do I add
>     > this time attribute to my RasterStack so that write.tgrass creates the
>     >  file I need to import directly into GRASS as a raster time series???
>     >
>     > Thanks a lot for any hint!
>     >
>     > Best,
>     > Vero
>     >
>     >       [[alternative HTML version deleted]]
>     >
>     > _______________________________________________
>     > R-sig-Geo mailing list
>     > R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>     > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>     <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>     >
> 
>     --
>     Edzer Pebesma
>     Institute for Geoinformatics  (ifgi),  University of M?nster
>     Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
>     <tel:%2B49%20251%2083%2033081>
>     Journal of Statistical Software:   http://www.jstatsoft.org/
>     Computers & Geosciences:   http://elsevier.com/locate/cageo/
>     <http://elsevier.com/locate/cageo/>
> 
> 

-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160906/5b3cd43e/attachment.bin>

From veroandreo at gmail.com  Tue Sep  6 21:59:44 2016
From: veroandreo at gmail.com (Veronica Andreo)
Date: Tue, 6 Sep 2016 16:59:44 -0300
Subject: [R-sig-Geo] write.tgrass (spacetime) does not work for any
	RasterStack
In-Reply-To: <2e7f745d-2ced-9ca6-77de-01728d92aed1@uni-muenster.de>
References: <CAAMki4HH+3C3RF5EhGgnNaptdbjH19=qiF83TxGRyqdF3Tzsyg@mail.gmail.com>
	<8a7c0ebb-41eb-d76d-92f3-bfce84fdae4e@uni-muenster.de>
	<CAAMki4EiTLq6jx+rgOOEntgQuzTjjTPoBw9zGAF9-Y4z9d4t4g@mail.gmail.com>
	<2e7f745d-2ced-9ca6-77de-01728d92aed1@uni-muenster.de>
Message-ID: <CAAMki4EcFK=EpVvXZjqRSLVAbsbUQM7CVimoeEQdkzXtu84p_g@mail.gmail.com>

Indeed it does!!! And GRASS reads it properly and creates the time series
as expected :)

Thanks much Edzer and Vijay for the help!

Best,
Vero

2016-09-06 16:52 GMT-03:00 Edzer Pebesma <edzer.pebesma at uni-muenster.de>:

> Indeed:
>
> x = setZ(tempmean_new_rs, getZ(test))
> write.tgrass(x, "x.tar.gz")
>
> seems to work.
>
> On 06/09/16 21:31, Veronica Andreo wrote:
> > Hello Edzer
> >
> > Thank you very much for your answer :)
> >
> > Yes, sure! Find it attached.
> >
> > Best,
> > Vero
> >
> > 2016-09-06 15:51 GMT-03:00 Edzer Pebesma <edzer.pebesma at uni-muenster.de
> > <mailto:edzer.pebesma at uni-muenster.de>>:
> >
> >     Could you provide me off-list with an .RData file that contains the
> >     tempmean_new_rs and test objects?
> >
> >     On 06/09/16 20:43, Veronica Andreo wrote:
> >     > Hello
> >     >
> >     > I'm working with raster time series in GRASS, but I needed to
> apply a
> >     > gap-filling function available in R (dineof in the package sinkr).
> >     > Exporting the time series from GRASS and importing into R went
> >     fine... I
> >     > did all the processing which implies transforming the raster time
> >     series
> >     > into a matrix, run dineof and then rebuild the RasterStack... And
> >     here is
> >     > the problem... write.tgrass does not work with this rebuilt
> >     RasterStack
> >     >
> >     > I get this error:
> >     >
> >     > write.tgrass(tempmean_new_rs, "tempmean_new_from_R.tar.gzip")
> >     > Error in data.frame(names(obj), start.time, end.time) : arguments
> >     imply
> >     > differing number of rows: 156, 0
> >     >
> >     > write.tgrass does work however with the RasterStack imported and
> >     read with
> >     > read.tgrass. So, I compared both RasterStacks:
> >     >
> >     > ### the one imported from GRASS (without any change):
> >     >> test
> >     > class       : RasterStack
> >     > dimensions  : 104, 139, 14456, 156  (nrow, ncol, ncell, nlayers)
> >     > resolution  : 500, 500  (x, y)
> >     > extent      : 624500, 694000, 208500, 260500  (xmin, xmax, ymin,
> ymax)
> >     > coord. ref. : +proj=lcc +lat_1=36.16666666666666
> >     +lat_2=34.33333333333334
> >     > +lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +no_defs +a=6378137
> >     > +rf=298.257222101 +towgs84=0.000,0.000,0.000 +to_meter=1
> >     > names       : X2000_01_tempmean, X2000_02_tempmean,
> X2000_03_tempmean,
> >     > X2000_04_tempmean, X2000_05_tempmean, X2000_06_tempmean,
> >     X2000_07_tempmean,
> >     > X2000_08_tempmean, X2000_09_tempmean, X2000_10_tempmean,
> >     X2000_11_tempmean,
> >     > X2000_12_tempmean, X2001_01_tempmean, X2001_02_tempmean,
> >     X2001_03_tempmean,
> >     > ...
> >     > time        : 2000-01-01 - 2012-12-01 (range)
> >     >
> >     > ### the one I re-constructed after doing my processing
> >     >> tempmean_new_rs
> >     > class       : RasterStack
> >     > dimensions  : 104, 139, 14456, 156  (nrow, ncol, ncell, nlayers)
> >     > resolution  : 500, 500  (x, y)
> >     > extent      : 624500, 694000, 208500, 260500  (xmin, xmax, ymin,
> ymax)
> >     > coord. ref. : +proj=lcc +lat_1=36.16666666666666
> >     +lat_2=34.33333333333334
> >     > +lat_0=33.75 +lon_0=-79 +x_0=609601.22 +y_0=0 +no_defs +a=6378137
> >     > +rf=298.257222101 +towgs84=0.000,0.000,0.000 +to_meter=1
> >     > names       :    layer.1,    layer.2,    layer.3,    layer.4,
> >     layer.5,
> >     >  layer.6,    layer.7,    layer.8,    layer.9,   layer.10,
>  layer.11,
> >     > layer.12,   layer.13,   layer.14,   layer.15, ...
> >     > min values  :  2.8337839,  6.4129490, 11.2577566, 13.2967885,
> >     20.4898198,
> >     > 24.3399993, 24.2426851, 24.0908008, 20.4639886, 14.9326849,
> >     7.8406800,
> >     >  0.6784587,  3.0555789,  6.4902200,  7.4145889, ...
> >     > max values  :   4.496206,   8.090485,  12.699460,  14.956419,
> >     21.605554,
> >     >  25.174480,  25.044242,  24.839163,  21.734339,  16.165316,
> >      9.309428,
> >     > 2.563087,   4.884175,   8.479331,   9.218642, ...
> >     >
> >     > All the same, *except for the time attribute* that the one read
> >     from GRASS
> >     > has and the one I rebuilt doesn't. Maybe there's the problem? How
> do I add
> >     > this time attribute to my RasterStack so that write.tgrass creates
> the
> >     >  file I need to import directly into GRASS as a raster time
> series???
> >     >
> >     > Thanks a lot for any hint!
> >     >
> >     > Best,
> >     > Vero
> >     >
> >     >       [[alternative HTML version deleted]]
> >     >
> >     > _______________________________________________
> >     > R-sig-Geo mailing list
> >     > R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> >     > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >     <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
> >     >
> >
> >     --
> >     Edzer Pebesma
> >     Institute for Geoinformatics  (ifgi),  University of M?nster
> >     Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
> >     <tel:%2B49%20251%2083%2033081>
> >     Journal of Statistical Software:   http://www.jstatsoft.org/
> >     Computers & Geosciences:   http://elsevier.com/locate/cageo/
> >     <http://elsevier.com/locate/cageo/>
> >
> >
>
> --
> Edzer Pebesma
> Institute for Geoinformatics  (ifgi),  University of M?nster
> Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
> Journal of Statistical Software:   http://www.jstatsoft.org/
> Computers & Geosciences:   http://elsevier.com/locate/cageo/
>
>

	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Wed Sep  7 13:47:40 2016
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 7 Sep 2016 13:47:40 +0200
Subject: [R-sig-Geo] Which dimension should a matrix returned by a binary
 topological operaor have?
Message-ID: <7431d930-5d6d-891d-c264-bc737f34450d@uni-muenster.de>

In sp and rgeos, we currently have

> library(sp)
> library(rgeos)
> p1 = SpatialPoints(matrix(1:4,2))
> p2 = SpatialPoints(matrix(1:6,3))
> gRelate(p1,p2,byid=TRUE)
  1           2
1 "FF0FFF0F2" "FF0FFF0F2"
2 "FF0FFF0F2" "FF0FFF0F2"
3 "FF0FFF0F2" "FF0FFF0F2"
> dim(gRelate(p1,p2,byid=TRUE))
[1] 3 2
> length(p1)
[1] 2
> length(p2)
[1] 3

Meaning: arguments with lengths 2 and 3 result in a 3 x 2 matrix. This
is true for all binary operators (covers, intersects, etc) and byid=TRUE.

I always found this counterintuitive, and consider implementing it the
other way around (2 and 3 -> 2 x 3) in package sf. Or am I overlooking
something obvious?
-- 
Edzer Pebesma
Institute for Geoinformatics  (ifgi),  University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 33081
Journal of Statistical Software:   http://www.jstatsoft.org/
Computers & Geosciences:   http://elsevier.com/locate/cageo/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160907/616a5685/attachment.bin>

From Roger.Bivand at nhh.no  Wed Sep  7 14:23:55 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 7 Sep 2016 14:23:55 +0200
Subject: [R-sig-Geo] Which dimension should a matrix returned by a
 binary topological operaor have?
In-Reply-To: <7431d930-5d6d-891d-c264-bc737f34450d@uni-muenster.de>
References: <7431d930-5d6d-891d-c264-bc737f34450d@uni-muenster.de>
Message-ID: <alpine.LFD.2.20.1609071402450.22526@reclus.nhh.no>

On Wed, 7 Sep 2016, Edzer Pebesma wrote:

> In sp and rgeos, we currently have
>
>> library(sp)
>> library(rgeos)
>> p1 = SpatialPoints(matrix(1:4,2))
>> p2 = SpatialPoints(matrix(1:6,3))
>> gRelate(p1,p2,byid=TRUE)
>  1           2
> 1 "FF0FFF0F2" "FF0FFF0F2"
> 2 "FF0FFF0F2" "FF0FFF0F2"
> 3 "FF0FFF0F2" "FF0FFF0F2"
>> dim(gRelate(p1,p2,byid=TRUE))
> [1] 3 2
>> length(p1)
> [1] 2
>> length(p2)
> [1] 3
>
> Meaning: arguments with lengths 2 and 3 result in a 3 x 2 matrix. This
> is true for all binary operators (covers, intersects, etc) and byid=TRUE.

In src/rgeos_predicate_binary.c, you'll see that rgeos_binpredfunc() can 
return a matrix or a list. For rgeos_relate() the list option should be 
unused (it will be trapped in the next release), because the output must 
be a dense matrix by design. In other cases where the output is a logical 
matrix with many FALSE entries, a sparse list output object is perhaps 
more logical. sf should not return dense matrices where sparse binary 
matrices would suffice. However, the "relate" binary predicate is 
different.

We could try to add an option to t() the output matrix, and see what got 
broken among dependent packages. The returned list is the length of 
spgeom1, by the way, with components 1-base indexing spgeom2. These would 
be like the columns in a data frame if the numbers of indexed components 
were equal, but a matrix is more natural.

Shall we test the dependencies for breakage? Scripts will break too I 
expect, but we can't check them.

Roger

>
> I always found this counterintuitive, and consider implementing it the
> other way around (2 and 3 -> 2 x 3) in package sf. Or am I overlooking
> something obvious?
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


From luca.candeloro at gmail.com  Thu Sep  8 13:16:56 2016
From: luca.candeloro at gmail.com (Luca Candeloro)
Date: Thu, 8 Sep 2016 13:16:56 +0200
Subject: [R-sig-Geo] modis download authentication
Message-ID: <CAHF6YnnX2puPPqxtJ4km=whv2y4SsssWnEog-zttPeb9u_jQiA@mail.gmail.com>

I used succesfully the function getBinaryURL from RCurl library to download
.hdf file, as in:

content <- getBinaryURL("
http://e4ftl01.cr.usgs.gov/MOLT/MOD11A2.005/2016.01.01/MOD11A2.A2016001.h18v04.005.2016012041335.hdf
")

Since http://e4ftl01.cr.usgs.gov/ has recently applied a login and pass
authentication to retrieve data, the previous code doesn't work.
It seems (from
https://lpdaac.usgs.gov/sites/default/files/public/get_data/docs/Command%20Line%20Access%20Tips%20for%20Utilizing%20Earthdata%20Login.docx
)
that curl options should be necessarily  set.
Does someone know how to correctly specify RCurl options in R, so that
getBinaryURL works again?
thanks,
Luca

	[[alternative HTML version deleted]]


From btupper at bigelow.org  Thu Sep  8 13:29:02 2016
From: btupper at bigelow.org (Ben Tupper)
Date: Thu, 8 Sep 2016 07:29:02 -0400
Subject: [R-sig-Geo] modis download authentication
In-Reply-To: <CAHF6YnnX2puPPqxtJ4km=whv2y4SsssWnEog-zttPeb9u_jQiA@mail.gmail.com>
References: <CAHF6YnnX2puPPqxtJ4km=whv2y4SsssWnEog-zttPeb9u_jQiA@mail.gmail.com>
Message-ID: <29642FFF-DC71-4E91-AFA0-3267ECC20F65@bigelow.org>

Hi,

RCurl's getBinaryURL() passes the '...' and '.opts' argument to RCurl's getURL().  The help page for getURL() shows an example that passes the username and password.

Will that do the trick?

Ben


> On Sep 8, 2016, at 7:16 AM, Luca Candeloro <luca.candeloro at gmail.com> wrote:
> 
> I used succesfully the function getBinaryURL from RCurl library to download
> .hdf file, as in:
> 
> content <- getBinaryURL("
> http://e4ftl01.cr.usgs.gov/MOLT/MOD11A2.005/2016.01.01/MOD11A2.A2016001.h18v04.005.2016012041335.hdf
> ")
> 
> Since http://e4ftl01.cr.usgs.gov/ has recently applied a login and pass
> authentication to retrieve data, the previous code doesn't work.
> It seems (from
> https://lpdaac.usgs.gov/sites/default/files/public/get_data/docs/Command%20Line%20Access%20Tips%20for%20Utilizing%20Earthdata%20Login.docx
> )
> that curl options should be necessarily  set.
> Does someone know how to correctly specify RCurl options in R, so that
> getBinaryURL works again?
> thanks,
> Luca
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Report Gulf of Maine jellyfish sightings to jellyfish at bigelow.org or tweet them to #MaineJellies -- include date, time, and location, as well as any descriptive information such as size or type.  Learn more at https://www.bigelow.org/research/srs/nick-record/nick-record-laboratory/mainejellies/


From thi_veloso at yahoo.com.br  Thu Sep  8 17:21:06 2016
From: thi_veloso at yahoo.com.br (Thiago V. dos Santos)
Date: Thu, 8 Sep 2016 15:21:06 +0000 (UTC)
Subject: [R-sig-Geo] modis download authentication
In-Reply-To: <CAHF6YnnX2puPPqxtJ4km=whv2y4SsssWnEog-zttPeb9u_jQiA@mail.gmail.com>
References: <CAHF6YnnX2puPPqxtJ4km=whv2y4SsssWnEog-zttPeb9u_jQiA@mail.gmail.com>
Message-ID: <1867459642.1014433.1473348066026@mail.yahoo.com>

This is what worked for me, on a Mac:

myopts <- RCurl::curlOptions(netrc=TRUE, netrc.file=path.expand("~/.netrc"),
                             cookiefile=path.expand("~/.urs_cookies"),
                             followlocation=TRUE)


getBinaryURL(your_url, .opts=myopts)

where the .netrc file should look like this:

machine urs.earthdata.nasa.gov login your_login password your_pass
machine e4ftl01.cr.usgs.gov login your_login password your_pass

(note that both lines are required, and your_login and your_pass are your credentials to the EarthData system)

and the .urs_cookies is just an empty file where the access information will be saved to.

You can use a simple command that explicitly requires your credentials, but I don't think revealing your credentials on a R script is a good idea.

There are some helpful tips here as well:
http://disc.sci.gsfc.nasa.gov/registration/registration-for-data-access
 Greetings,
 -- Thiago V. dos Santos

PhD student
Land and Atmospheric Science
University of Minnesota



On Thursday, September 8, 2016 6:19 AM, Luca Candeloro <luca.candeloro at gmail.com> wrote:
I used succesfully the function getBinaryURL from RCurl library to download
.hdf file, as in:

content <- getBinaryURL("
http://e4ftl01.cr.usgs.gov/MOLT/MOD11A2.005/2016.01.01/MOD11A2.A2016001.h18v04.005.2016012041335.hdf
")

Since http://e4ftl01.cr.usgs.gov/ has recently applied a login and pass
authentication to retrieve data, the previous code doesn't work.
It seems (from
https://lpdaac.usgs.gov/sites/default/files/public/get_data/docs/Command%20Line%20Access%20Tips%20for%20Utilizing%20Earthdata%20Login.docx
)
that curl options should be necessarily  set.
Does someone know how to correctly specify RCurl options in R, so that
getBinaryURL works again?
thanks,
Luca

    [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From quantrum75 at yahoo.com  Fri Sep  9 09:53:31 2016
From: quantrum75 at yahoo.com (quantrum75)
Date: Fri, 9 Sep 2016 07:53:31 +0000 (UTC)
Subject: [R-sig-Geo] Newbie questions
References: <571527464.1514114.1473407611621.ref@mail.yahoo.com>
Message-ID: <571527464.1514114.1473407611621@mail.yahoo.com>

Hello all,I am an absolute newbie to spatial statistics, but I am quite thoroughly obsessed by it currently. I am an engineer by training, so I can find my way around math and programming. I have begun to look at the Spatial CRAN view and am absolutely blown away by the enormous body of work in there. So thank you all for that. But I am equally confused regarding the right choice of software and statistical approach as well.
With that introduction, I will try to explain (one of) the problem(s) I am trying to solve. Of note, we absolutely do not deal with GIS issues.

We have a setup where we are trying to grow some bacterial cultures on a polygonal irregular surface. I am able to obtain 2-D projection views/images similar to the illustration attached to this mail. Some of the things I want to do are 

1) Establish a spatial statistical analytic pipeline to answer questions like
a) Are the patterns of bacterial island growth in different cultures statistically random or correlated?b) Are the distances from the boundary edge to a bacterial island random or have a pattern?

Now, the issue I have is, the bacterial islands have an "area", so I cannot really consider them as "point" processes. Yet, these "areas" are sufficiently far away from each other (relative to the polygonal boundary) that I can (to an approximation) consider them as being "point" processes (maybe?)...

Some of my questions are
1) Is it appropriate to use a "point processes" method or an "areal processes" method for analysis of this problem?
2) If point processes are ok, is it ok to weight the area and use the centroid at the location of the point?
3) Where do I start? I currently have 5 books - The Baddeley book (spatstat, for point processes), the Cressie book (for theory), the R-INLA book (Bayesian spatial statistics), Applied Spatial Analysis in R (Dr Bivand's book) and the Gelfand book (Hierarchical modelling)
4) Packages - Spatstat? sp? spdep? splancs? spatial? DCluster? AMOEBA? Which spatial regression package? Arghhhh.....
Now, I am not asking anyone to provide me with a ready made solution. I would simply appreciate if someone could point me in the right direction on how to start and go far from there. I am willing to learn and put in the necessary elbow grease to understand it well. Experts in spatial statistics are unavailable at my local college, so an immediate collaboration is bit far off. But something we can look into in the future.

Thank you for your kind consideration. Any and all advice is eagerly welcomed and I will be highly grateful for the same.RegardsQuant.
PS - Long term, I would like to contribute in some way to this group. If anyone is in need of any assistants for any packages, I am willing to volunteer my time.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160909/d0d9b4f5/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Bacterial_colonies(1).jpg
Type: image/jpeg
Size: 22890 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20160909/d0d9b4f5/attachment.jpg>

From tim.howard at dec.ny.gov  Fri Sep  9 13:45:17 2016
From: tim.howard at dec.ny.gov (Howard, Tim G (DEC))
Date: Fri, 9 Sep 2016 11:45:17 +0000
Subject: [R-sig-Geo] Newbie questions
Message-ID: <SN1PR09MB1071E6E61D0A5AA0ABE97185A8FA0@SN1PR09MB1071.namprd09.prod.outlook.com>

If we assume that the islands are growing in all directions equally, then for the 'distance from boundary edge' type of question you are most interested in island initiation, which might be a point-based question. Well, points to polygon, as your boundary edge is the edge of a polygon. 

On the other hand, for questions about differential growth of islands I would think you then are dealing with questions about the islands as polygons. 

Certainly using many of the GIS/spatial tools can get you quite far down this path. For example, getting a distribution of island (point) distances to the boundary (with perhaps, gDistance in rgeos) would give you something you could compare among cultures.  Of course you'd be using sp to structure the data (in spatial data frames). 

Good luck!
Tim

> ------------------------------
> 
> Message: 4
> Date: Fri, 9 Sep 2016 07:53:31 +0000 (UTC)
> From: quantrum75 <quantrum75 at yahoo.com>
> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Subject: [R-sig-Geo] Newbie questions
> Message-ID: <571527464.1514114.1473407611621 at mail.yahoo.com>
> Content-Type: text/plain; charset="utf-8"
> 
> Hello all,I am an absolute newbie to spatial statistics, but I am quite
> thoroughly obsessed by it currently. I am an engineer by training, so I can find
> my way around math and programming. I have begun to look at the Spatial
> CRAN view and am absolutely blown away by the enormous body of work in
> there. So thank you all for that. But I am equally confused regarding the right
> choice of software and statistical approach as well.
> With that introduction, I will try to explain (one of) the problem(s) I am trying
> to solve. Of note, we absolutely do not deal with GIS issues.
> 
> We have a setup where we are trying to grow some bacterial cultures on a
> polygonal irregular surface. I am able to obtain 2-D projection views/images
> similar to the illustration attached to this mail. Some of the things I want to do
> are
> 
> 1) Establish a spatial statistical analytic pipeline to answer questions like
> a) Are the patterns of bacterial island growth in different cultures statistically
> random or correlated?b) Are the distances from the boundary edge to a
> bacterial island random or have a pattern?
> 
> Now, the issue I have is, the bacterial islands have an "area", so I cannot
> really consider them as "point" processes. Yet, these "areas" are sufficiently
> far away from each other (relative to the polygonal boundary) that I can (to
> an approximation) consider them as being "point" processes (maybe?)...
> 
> Some of my questions are
> 1) Is it appropriate to use a "point processes" method or an "areal processes"
> method for analysis of this problem?
> 2) If point processes are ok, is it ok to weight the area and use the centroid at
> the location of the point?
> 3) Where do I start? I currently have 5 books - The Baddeley book (spatstat,
> for point processes), the Cressie book (for theory), the R-INLA book
> (Bayesian spatial statistics), Applied Spatial Analysis in R (Dr Bivand's book)
> and the Gelfand book (Hierarchical modelling)
> 4) Packages - Spatstat? sp? spdep? splancs? spatial? DCluster? AMOEBA?
> Which spatial regression package? Arghhhh.....
> Now, I am not asking anyone to provide me with a ready made solution. I
> would simply appreciate if someone could point me in the right direction on
> how to start and go far from there. I am willing to learn and put in the
> necessary elbow grease to understand it well. Experts in spatial statistics are
> unavailable at my local college, so an immediate collaboration is bit far off.
> But something we can look into in the future.
> 
> Thank you for your kind consideration. Any and all advice is eagerly
> welcomed and I will be highly grateful for the same.RegardsQuant.
> PS - Long term, I would like to contribute in some way to this group. If
> anyone is in need of any assistants for any packages, I am willing to volunteer
> my time.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <https://stat.ethz.ch/pipermail/r-sig-
> geo/attachments/20160909/d0d9b4f5/attachment-0001.html>
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: Bacterial_colonies(1).jpg
> Type: image/jpeg
> Size: 22890 bytes
> Desc: not available
> URL: <https://stat.ethz.ch/pipermail/r-sig-
> geo/attachments/20160909/d0d9b4f5/attachment-0001.jpg>
> 


From abdoulayesar at gmail.com  Fri Sep  9 14:46:24 2016
From: abdoulayesar at gmail.com (Abdoulaye Sarr)
Date: Fri, 9 Sep 2016 12:46:24 +0000
Subject: [R-sig-Geo] issue with daily rainfall in .bil format
Message-ID: <CAN=6O0J_8o=K=kPT89-8t5=Pwf-GY7=dhNbv=3G+o=gydTNq2g@mail.gmail.com>

I have daily rainfall data in .bil format and can get info of the file
using rgdal:
> library(rgdal)> GDALinfo("/1981/v2p19810101.bil")
rows        1600
columns     1500
bands       1
lower left origin.x        -20
lower left origin.y        -40
res.x       0.05
res.y       0.05
ysign       -1
oblique.x   0
oblique.y   0
driver      EHdr
projection  NA

library(raster)
pp <- raster("/1981/v2p19810101.bil")
writeRaster(pp, "v2p19810101.nc")

The problem is that when I display the netcdf file the values are starting
by -9000 and mainly are located in the continent boundaries, so how to add
in writeRaster the undef values and have precip from 0 to x.

Any hint appreciated.

	[[alternative HTML version deleted]]


From rundel at gmail.com  Fri Sep  9 15:46:25 2016
From: rundel at gmail.com (Colin Rundel)
Date: Fri, 9 Sep 2016 09:46:25 -0400
Subject: [R-sig-Geo] Which dimension should a matrix returned by a
	binary topological operaor have?
In-Reply-To: <alpine.LFD.2.20.1609071402450.22526@reclus.nhh.no>
References: <7431d930-5d6d-891d-c264-bc737f34450d@uni-muenster.de>
	<alpine.LFD.2.20.1609071402450.22526@reclus.nhh.no>
Message-ID: <23C0E24D-E7A4-42C8-8378-907E7B3073A7@gmail.com>

This is a mistake I made when originally working on the package that didn?t get caught at the time. I think Edzer is correct and ideally his example should be producing a 2x3 matrix, but at this stage switching the ordering in rages is too likely break existing code. 

sf having a argument that lets you t() the result makes sense to me if only as a backwards compatibility feature.

-Colin

-----

Colin Rundel
Assistant Professor of the Practice
Duke University, Department of Statistical Science
colin.rundel at stat.duke.edu
www.stat.duke.edu/~cr173/

> On Sep 7, 2016, at 8:23 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> On Wed, 7 Sep 2016, Edzer Pebesma wrote:
> 
>> In sp and rgeos, we currently have
>> 
>>> library(sp)
>>> library(rgeos)
>>> p1 = SpatialPoints(matrix(1:4,2))
>>> p2 = SpatialPoints(matrix(1:6,3))
>>> gRelate(p1,p2,byid=TRUE)
>> 1           2
>> 1 "FF0FFF0F2" "FF0FFF0F2"
>> 2 "FF0FFF0F2" "FF0FFF0F2"
>> 3 "FF0FFF0F2" "FF0FFF0F2"
>>> dim(gRelate(p1,p2,byid=TRUE))
>> [1] 3 2
>>> length(p1)
>> [1] 2
>>> length(p2)
>> [1] 3
>> 
>> Meaning: arguments with lengths 2 and 3 result in a 3 x 2 matrix. This
>> is true for all binary operators (covers, intersects, etc) and byid=TRUE.
> 
> In src/rgeos_predicate_binary.c, you'll see that rgeos_binpredfunc() can return a matrix or a list. For rgeos_relate() the list option should be unused (it will be trapped in the next release), because the output must be a dense matrix by design. In other cases where the output is a logical matrix with many FALSE entries, a sparse list output object is perhaps more logical. sf should not return dense matrices where sparse binary matrices would suffice. However, the "relate" binary predicate is different.
> 
> We could try to add an option to t() the output matrix, and see what got broken among dependent packages. The returned list is the length of spgeom1, by the way, with components 1-base indexing spgeom2. These would be like the columns in a data frame if the numbers of indexed components were equal, but a matrix is more natural.
> 
> Shall we test the dependencies for breakage? Scripts will break too I expect, but we can't check them.
> 
> Roger
> 
>> 
>> I always found this counterintuitive, and consider implementing it the
>> other way around (2 and 3 -> 2 x 3) in package sf. Or am I overlooking
>> something obvious?
>> 
> 
> -- 
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 91 00
> e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
> http://orcid.org/0000-0003-2392-6140 <http://orcid.org/0000-0003-2392-6140>
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en <https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en>
> http://depsy.org/person/434412 <http://depsy.org/person/434412>
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>

	[[alternative HTML version deleted]]


From quantrum75 at yahoo.com  Fri Sep  9 17:39:16 2016
From: quantrum75 at yahoo.com (quantrum75)
Date: Fri, 9 Sep 2016 15:39:16 +0000 (UTC)
Subject: [R-sig-Geo] Newbie questions
In-Reply-To: <SN1PR09MB1071E6E61D0A5AA0ABE97185A8FA0@SN1PR09MB1071.namprd09.prod.outlook.com>
References: <SN1PR09MB1071E6E61D0A5AA0ABE97185A8FA0@SN1PR09MB1071.namprd09.prod.outlook.com>
Message-ID: <203306038.1726091.1473435556379@mail.yahoo.com>

Hello Tim,Thank you so much for the reply! I shall surely check out gDistance in rgeos for the distance distribution. That is definitely a question for consideration since we think the boundary influences the location of the growths.
For the issue related to differential growth of islands (as polygons), what would your advice be? Any hints, tips or suggestions? Would a weighted point process distribution analysis be appropriate? What kind of a regression model would be appropriate?
I hugely appreciate any insights.RegardsQuant


      From: "Howard, Tim G (DEC)" <tim.howard at dec.ny.gov>
 To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org> 
Cc: quantrum75 <quantrum75 at yahoo.com>
 Sent: Friday, September 9, 2016 5:45 AM
 Subject: RE: Newbie questions
   
If we assume that the islands are growing in all directions equally, then for the 'distance from boundary edge' type of question you are most interested in island initiation, which might be a point-based question. Well, points to polygon, as your boundary edge is the edge of a polygon. 

On the other hand, for questions about differential growth of islands I would think you then are dealing with questions about the islands as polygons. 

Certainly using many of the GIS/spatial tools can get you quite far down this path. For example, getting a distribution of island (point) distances to the boundary (with perhaps, gDistance in rgeos) would give you something you could compare among cultures.? Of course you'd be using sp to structure the data (in spatial data frames). 

Good luck!
Tim

> ------------------------------
> 
> Message: 4
> Date: Fri, 9 Sep 2016 07:53:31 +0000 (UTC)
> From: quantrum75 <quantrum75 at yahoo.com>
> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Subject: [R-sig-Geo] Newbie questions
> Message-ID: <571527464.1514114.1473407611621 at mail.yahoo.com>
> Content-Type: text/plain; charset="utf-8"
> 
> Hello all,I am an absolute newbie to spatial statistics, but I am quite
> thoroughly obsessed by it currently. I am an engineer by training, so I can find
> my way around math and programming. I have begun to look at the Spatial
> CRAN view and am absolutely blown away by the enormous body of work in
> there. So thank you all for that. But I am equally confused regarding the right
> choice of software and statistical approach as well.
> With that introduction, I will try to explain (one of) the problem(s) I am trying
> to solve. Of note, we absolutely do not deal with GIS issues.
> 
> We have a setup where we are trying to grow some bacterial cultures on a
> polygonal irregular surface. I am able to obtain 2-D projection views/images
> similar to the illustration attached to this mail. Some of the things I want to do
> are
> 
> 1) Establish a spatial statistical analytic pipeline to answer questions like
> a) Are the patterns of bacterial island growth in different cultures statistically
> random or correlated?b) Are the distances from the boundary edge to a
> bacterial island random or have a pattern?
> 
> Now, the issue I have is, the bacterial islands have an "area", so I cannot
> really consider them as "point" processes. Yet, these "areas" are sufficiently
> far away from each other (relative to the polygonal boundary) that I can (to
> an approximation) consider them as being "point" processes (maybe?)...
> 
> Some of my questions are
> 1) Is it appropriate to use a "point processes" method or an "areal processes"
> method for analysis of this problem?
> 2) If point processes are ok, is it ok to weight the area and use the centroid at
> the location of the point?
> 3) Where do I start? I currently have 5 books - The Baddeley book (spatstat,
> for point processes), the Cressie book (for theory), the R-INLA book
> (Bayesian spatial statistics), Applied Spatial Analysis in R (Dr Bivand's book)
> and the Gelfand book (Hierarchical modelling)
> 4) Packages - Spatstat? sp? spdep? splancs? spatial? DCluster? AMOEBA?
> Which spatial regression package? Arghhhh.....
> Now, I am not asking anyone to provide me with a ready made solution. I
> would simply appreciate if someone could point me in the right direction on
> how to start and go far from there. I am willing to learn and put in the
> necessary elbow grease to understand it well. Experts in spatial statistics are
> unavailable at my local college, so an immediate collaboration is bit far off.
> But something we can look into in the future.
> 
> Thank you for your kind consideration. Any and all advice is eagerly
> welcomed and I will be highly grateful for the same.RegardsQuant.
> PS - Long term, I would like to contribute in some way to this group. If
> anyone is in need of any assistants for any packages, I am willing to volunteer
> my time.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <https://stat.ethz.ch/pipermail/r-sig-
> geo/attachments/20160909/d0d9b4f5/attachment-0001.html>
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: Bacterial_colonies(1).jpg
> Type: image/jpeg
> Size: 22890 bytes
> Desc: not available
> URL: <https://stat.ethz.ch/pipermail/r-sig-
> geo/attachments/20160909/d0d9b4f5/attachment-0001.jpg>
> 

   
	[[alternative HTML version deleted]]


From tkeitt at utexas.edu  Fri Sep  9 19:05:42 2016
From: tkeitt at utexas.edu (Tim Keitt)
Date: Fri, 9 Sep 2016 12:05:42 -0500
Subject: [R-sig-Geo] Newbie questions
In-Reply-To: <203306038.1726091.1473435556379@mail.yahoo.com>
References: <SN1PR09MB1071E6E61D0A5AA0ABE97185A8FA0@SN1PR09MB1071.namprd09.prod.outlook.com>
	<203306038.1726091.1473435556379@mail.yahoo.com>
Message-ID: <CANnL8gotr+ikpmWmWQ14q=o7CeVh9G8ps66bVjcW=qL_EBR3jA@mail.gmail.com>

You might also have a look at:

https://sites.cns.utexas.edu/keittlab/publications/hierarchical-model-whole-assemblage-island-biogeography

I did island-to-island distances in R or PostGIS (don't recall which) and
the modeling in JAGS.

THK

http://www.keittlab.org/

On Fri, Sep 9, 2016 at 10:39 AM, quantrum75 via R-sig-Geo <
r-sig-geo at r-project.org> wrote:

> Hello Tim,Thank you so much for the reply! I shall surely check out
> gDistance in rgeos for the distance distribution. That is definitely a
> question for consideration since we think the boundary influences the
> location of the growths.
> For the issue related to differential growth of islands (as polygons),
> what would your advice be? Any hints, tips or suggestions? Would a weighted
> point process distribution analysis be appropriate? What kind of a
> regression model would be appropriate?
> I hugely appreciate any insights.RegardsQuant
>
>
>       From: "Howard, Tim G (DEC)" <tim.howard at dec.ny.gov>
>  To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Cc: quantrum75 <quantrum75 at yahoo.com>
>  Sent: Friday, September 9, 2016 5:45 AM
>  Subject: RE: Newbie questions
>
> If we assume that the islands are growing in all directions equally, then
> for the 'distance from boundary edge' type of question you are most
> interested in island initiation, which might be a point-based question.
> Well, points to polygon, as your boundary edge is the edge of a polygon.
>
> On the other hand, for questions about differential growth of islands I
> would think you then are dealing with questions about the islands as
> polygons.
>
> Certainly using many of the GIS/spatial tools can get you quite far down
> this path. For example, getting a distribution of island (point) distances
> to the boundary (with perhaps, gDistance in rgeos) would give you something
> you could compare among cultures.  Of course you'd be using sp to structure
> the data (in spatial data frames).
>
> Good luck!
> Tim
>
> > ------------------------------
> >
> > Message: 4
> > Date: Fri, 9 Sep 2016 07:53:31 +0000 (UTC)
> > From: quantrum75 <quantrum75 at yahoo.com>
> > To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> > Subject: [R-sig-Geo] Newbie questions
> > Message-ID: <571527464.1514114.1473407611621 at mail.yahoo.com>
> > Content-Type: text/plain; charset="utf-8"
> >
> > Hello all,I am an absolute newbie to spatial statistics, but I am quite
> > thoroughly obsessed by it currently. I am an engineer by training, so I
> can find
> > my way around math and programming. I have begun to look at the Spatial
> > CRAN view and am absolutely blown away by the enormous body of work in
> > there. So thank you all for that. But I am equally confused regarding
> the right
> > choice of software and statistical approach as well.
> > With that introduction, I will try to explain (one of) the problem(s) I
> am trying
> > to solve. Of note, we absolutely do not deal with GIS issues.
> >
> > We have a setup where we are trying to grow some bacterial cultures on a
> > polygonal irregular surface. I am able to obtain 2-D projection
> views/images
> > similar to the illustration attached to this mail. Some of the things I
> want to do
> > are
> >
> > 1) Establish a spatial statistical analytic pipeline to answer questions
> like
> > a) Are the patterns of bacterial island growth in different cultures
> statistically
> > random or correlated?b) Are the distances from the boundary edge to a
> > bacterial island random or have a pattern?
> >
> > Now, the issue I have is, the bacterial islands have an "area", so I
> cannot
> > really consider them as "point" processes. Yet, these "areas" are
> sufficiently
> > far away from each other (relative to the polygonal boundary) that I can
> (to
> > an approximation) consider them as being "point" processes (maybe?)...
> >
> > Some of my questions are
> > 1) Is it appropriate to use a "point processes" method or an "areal
> processes"
> > method for analysis of this problem?
> > 2) If point processes are ok, is it ok to weight the area and use the
> centroid at
> > the location of the point?
> > 3) Where do I start? I currently have 5 books - The Baddeley book
> (spatstat,
> > for point processes), the Cressie book (for theory), the R-INLA book
> > (Bayesian spatial statistics), Applied Spatial Analysis in R (Dr
> Bivand's book)
> > and the Gelfand book (Hierarchical modelling)
> > 4) Packages - Spatstat? sp? spdep? splancs? spatial? DCluster? AMOEBA?
> > Which spatial regression package? Arghhhh.....
> > Now, I am not asking anyone to provide me with a ready made solution. I
> > would simply appreciate if someone could point me in the right direction
> on
> > how to start and go far from there. I am willing to learn and put in the
> > necessary elbow grease to understand it well. Experts in spatial
> statistics are
> > unavailable at my local college, so an immediate collaboration is bit
> far off.
> > But something we can look into in the future.
> >
> > Thank you for your kind consideration. Any and all advice is eagerly
> > welcomed and I will be highly grateful for the same.RegardsQuant.
> > PS - Long term, I would like to contribute in some way to this group. If
> > anyone is in need of any assistants for any packages, I am willing to
> volunteer
> > my time.
> > -------------- next part --------------
> > An HTML attachment was scrubbed...
> > URL: <https://stat.ethz.ch/pipermail/r-sig-
> > geo/attachments/20160909/d0d9b4f5/attachment-0001.html>
> > -------------- next part --------------
> > A non-text attachment was scrubbed...
> > Name: Bacterial_colonies(1).jpg
> > Type: image/jpeg
> > Size: 22890 bytes
> > Desc: not available
> > URL: <https://stat.ethz.ch/pipermail/r-sig-
> > geo/attachments/20160909/d0d9b4f5/attachment-0001.jpg>
> >
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From tim.howard at dec.ny.gov  Fri Sep  9 21:39:05 2016
From: tim.howard at dec.ny.gov (Howard, Tim G (DEC))
Date: Fri, 9 Sep 2016 19:39:05 +0000
Subject: [R-sig-Geo] Newbie questions
In-Reply-To: <CANnL8gotr+ikpmWmWQ14q=o7CeVh9G8ps66bVjcW=qL_EBR3jA@mail.gmail.com>
References: <SN1PR09MB1071E6E61D0A5AA0ABE97185A8FA0@SN1PR09MB1071.namprd09.prod.outlook.com>
	<203306038.1726091.1473435556379@mail.yahoo.com>
	<CANnL8gotr+ikpmWmWQ14q=o7CeVh9G8ps66bVjcW=qL_EBR3jA@mail.gmail.com>
Message-ID: <SN1PR09MB1071C23C3995F484C197495EA8FA0@SN1PR09MB1071.namprd09.prod.outlook.com>

In terms of differential growth of islands it seems like the key variables are:

1. Change in island size over time
2. Distance of island center and island edge to the mainland (and change of this distance over time)

So that would require repeated images of each culture and, at each time step, newly digitizing the mainland and island boundaries. If you continue to approach this conceptually from the GIS perspective, you actually may want to manually register and digitize your petri dishes/ cultures in a GIS such as GRASS GIS or QGIS (or from the non-GIS perspective, there is also ImageJ), then bring those data into R to calculate changes in areas over time and model the relationships with distance to mainland. Which might utilize some of the standard statistics packages. 

Cheers, 
Tim

>>>>>>>>>>>>>>
From: tkeitt at gmail.com [mailto:tkeitt at gmail.com] On Behalf Of Tim Keitt
Sent: Friday, September 09, 2016 1:06 PM
To: quantrum75 <quantrum75 at yahoo.com>
Cc: Howard, Tim G (DEC) <tim.howard at dec.ny.gov>; r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Newbie questions

ATTENTION: This email came from an external source. Do not open attachments or click on links from unknown senders or unexpected emails.
You might also have a look at: 

https://sites.cns.utexas.edu/keittlab/publications/hierarchical-model-whole-assemblage-island-biogeography

I did island-to-island distances in R or PostGIS (don't recall which) and the modeling in JAGS.

THK


http://www.keittlab.org/

On Fri, Sep 9, 2016 at 10:39 AM, quantrum75 via R-sig-Geo <r-sig-geo at r-project.org> wrote:
Hello Tim,Thank you so much for the reply! I shall surely check out gDistance in rgeos for the distance distribution. That is definitely a question for consideration since we think the boundary influences the location of the growths.
For the issue related to differential growth of islands (as polygons), what would your advice be? Any hints, tips or suggestions? Would a weighted point process distribution analysis be appropriate? What kind of a regression model would be appropriate?
I hugely appreciate any insights.RegardsQuant


? ? ? From: "Howard, Tim G (DEC)" <tim.howard at dec.ny.gov>
?To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
Cc: quantrum75 <quantrum75 at yahoo.com>
?Sent: Friday, September 9, 2016 5:45 AM
?Subject: RE: Newbie questions

If we assume that the islands are growing in all directions equally, then for the 'distance from boundary edge' type of question you are most interested in island initiation, which might be a point-based question. Well, points to polygon, as your boundary edge is the edge of a polygon.

On the other hand, for questions about differential growth of islands I would think you then are dealing with questions about the islands as polygons.

Certainly using many of the GIS/spatial tools can get you quite far down this path. For example, getting a distribution of island (point) distances to the boundary (with perhaps, gDistance in rgeos) would give you something you could compare among cultures.? Of course you'd be using sp to structure the data (in spatial data frames).

Good luck!
Tim

> ------------------------------
>
> Message: 4
> Date: Fri, 9 Sep 2016 07:53:31 +0000 (UTC)
> From: quantrum75 <quantrum75 at yahoo.com>
> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Subject: [R-sig-Geo] Newbie questions
> Message-ID: <571527464.1514114.1473407611621 at mail.yahoo.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hello all,I am an absolute newbie to spatial statistics, but I am quite
> thoroughly obsessed by it currently. I am an engineer by training, so I can find
> my way around math and programming. I have begun to look at the Spatial
> CRAN view and am absolutely blown away by the enormous body of work in
> there. So thank you all for that. But I am equally confused regarding the right
> choice of software and statistical approach as well.
> With that introduction, I will try to explain (one of) the problem(s) I am trying
> to solve. Of note, we absolutely do not deal with GIS issues.
>
> We have a setup where we are trying to grow some bacterial cultures on a
> polygonal irregular surface. I am able to obtain 2-D projection views/images
> similar to the illustration attached to this mail. Some of the things I want to do
> are
>
> 1) Establish a spatial statistical analytic pipeline to answer questions like
> a) Are the patterns of bacterial island growth in different cultures statistically
> random or correlated?b) Are the distances from the boundary edge to a
> bacterial island random or have a pattern?
>
> Now, the issue I have is, the bacterial islands have an "area", so I cannot
> really consider them as "point" processes. Yet, these "areas" are sufficiently
> far away from each other (relative to the polygonal boundary) that I can (to
> an approximation) consider them as being "point" processes (maybe?)...
>
> Some of my questions are
> 1) Is it appropriate to use a "point processes" method or an "areal processes"
> method for analysis of this problem?
> 2) If point processes are ok, is it ok to weight the area and use the centroid at
> the location of the point?
> 3) Where do I start? I currently have 5 books - The Baddeley book (spatstat,
> for point processes), the Cressie book (for theory), the R-INLA book
> (Bayesian spatial statistics), Applied Spatial Analysis in R (Dr Bivand's book)
> and the Gelfand book (Hierarchical modelling)
> 4) Packages - Spatstat? sp? spdep? splancs? spatial? DCluster? AMOEBA?
> Which spatial regression package? Arghhhh.....
> Now, I am not asking anyone to provide me with a ready made solution. I
> would simply appreciate if someone could point me in the right direction on
> how to start and go far from there. I am willing to learn and put in the
> necessary elbow grease to understand it well. Experts in spatial statistics are
> unavailable at my local college, so an immediate collaboration is bit far off.
> But something we can look into in the future.
>
> Thank you for your kind consideration. Any and all advice is eagerly
> welcomed and I will be highly grateful for the same.RegardsQuant.
> PS - Long term, I would like to contribute in some way to this group. If
> anyone is in need of any assistants for any packages, I am willing to volunteer
> my time.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <https://stat.ethz.ch/pipermail/r-sig-
> geo/attachments/20160909/d0d9b4f5/attachment-0001.html>
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: Bacterial_colonies(1).jpg
> Type: image/jpeg
> Size: 22890 bytes
> Desc: not available
> URL: <https://stat.ethz.ch/pipermail/r-sig-
> geo/attachments/20160909/d0d9b4f5/attachment-0001.jpg>
>


? ? ? ? [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From b.rowlingson at lancaster.ac.uk  Sun Sep 11 11:14:51 2016
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sun, 11 Sep 2016 10:14:51 +0100
Subject: [R-sig-Geo] My code mistakenly prints multiple PDF pages
In-Reply-To: <CALkjiFQ+4iguWCb+sYta-yy6gzzz+e80LEONYumqMfNCC+yUGw@mail.gmail.com>
References: <CALkjiFQ+4iguWCb+sYta-yy6gzzz+e80LEONYumqMfNCC+yUGw@mail.gmail.com>
Message-ID: <CANVKczN93mBUVgKG6bfEg0EhcjnPdMtt7CFY5cnH3Dcdk3wW6Q@mail.gmail.com>

Jim,

 have you fixed this? There's a lot to look at here and is hard to see
what is going on because most of it is probably irrelevant to your
problem, and we can't run your code because we don't have your data or
shapefiles.

But if you run this with a screen device, does it put all the plots on
one figure? To get everything on one PDF page it should all show on
one screen device.

You seem to have several plot functions with "add=FALSE", which will
start a new plot, which with the PDF device probably will start a new
page.

This is all mostly guesswork because we can't run your code. Try and
whittle it down to the minimal code that shows the problem, and if
possible use some of R's demo data or generate things in any script
you post to the list.

Barry





On Sun, Sep 4, 2016 at 7:24 PM, Jim Burke <javajimburke at gmail.com> wrote:
> The code below should print ONE page but instead prints its different plots
> on THREE pages
> Please take a look and let me know my mistake. I appreciate any and all
> insight.
>
> tmpPDFName = paste("HD_", shp$LD,"_African_American", ".pdf", sep = "",
> collapse = NULL)
> pdf(file = tmpPDFName,
>       width=8.5, height=10, onefile=TRUE, family="Helvetica",
>       paper="a4r", encoding= "default",
>       bg="transparent", fg="black", pointsize=16, pagecentre=TRUE,
> colormodel="srgb",
>       useDingbats=TRUE, useKerning=TRUE, fillOddEven=FALSE, compres=TRUE)
>
> # CENSUS BLOCKS
> HD_census$Black[is.na(HD_census$Black)] <- 0
> HD_census$Total[is.na(HD_census$Total)] <- 0
> add.alpha(brewer.pal(5,'Reds'),0.5)
> my_shades <- auto.shading( ifelse(HD_census$Total==0, 0,
> (HD_census$Black/HD_census$Total)/100 ), n = 5, cutter = rangeCuts, cols =
> brewer.pal(5, "Reds"))
> GISTools::choropleth(HD_census, ifelse(HD_census$Total==0, 0,
> (HD_census$Black/HD_census$Total)/100 ),
>    shading = my_shades, border="transparent")
> title(main = "Africian American Percentages", col = "red", font = 3)   #
> Horizontal HD114
>
> # POLYGON OUTLINE
> #plot.new()
> #par(new=TRUE)
> plot (shp, add=FALSE, lwd = 4, border='green' )
>
> # POLYGON OUTLINE TITLES
> MyTitle <- paste('House District', shp$LD, shp$Candidate, shp$HD_Phone,
> sep="\n")
>
> # POLYGON OUTLINE Insert date and time label. At lower left corner.
> today <- Sys.Date()
> str_today <- format(Sys.time(),"%m/%d/%Y %I:%M %p")
> str_text <- paste("Created:", str_today, sep=" ")
> ##  "usr" returns a vector containing xleft, xright, ybottom, ytop.
> usr <- par( "usr" )
> text( usr[ 1 ], usr[ 3 ], str_text,  adj = c( 0, 0 ), col = 'darkgreen',
> cex=.9 )
>
> # PLOT PRECINCTS INSIDE LARGER POLYGON
> plot (HD_Precincts, add=FALSE, lwd = 2, border='blue' )
>
> myLabel <- paste( bquote(.(HD_Precincts$PCT)),
> bquote(.(HD_Precincts$First_Name)),
> bquote(.        (HD_Precincts$Last_Name)), bquote(.(HD_Precincts$Phone)),
>  sep = '\n', collapse = NULL)
> # PLOT PRECINCT LABELS
> HDShp_LatLong <- polygonsLabel(HD_Precincts,
>    labels = myLabel, method = c("maxdist",
>    "buffer", "centroid", "random", "inpolygon")[2],
>    gridpoints = 60, polypart = c("all","largest")[2],
>    cex = .4, col="blue", doPlot = TRUE)
> # Close and write to PDF
> dev.off()
>
> Thanks,
> Jim
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From rodrigo.plei at gmail.com  Sun Sep 11 15:06:51 2016
From: rodrigo.plei at gmail.com (Rodrigo Plei)
Date: Sun, 11 Sep 2016 10:06:51 -0300
Subject: [R-sig-Geo] My code mistakenly prints multiple PDF pages
In-Reply-To: <CANVKczN93mBUVgKG6bfEg0EhcjnPdMtt7CFY5cnH3Dcdk3wW6Q@mail.gmail.com>
References: <CALkjiFQ+4iguWCb+sYta-yy6gzzz+e80LEONYumqMfNCC+yUGw@mail.gmail.com>
	<CANVKczN93mBUVgKG6bfEg0EhcjnPdMtt7CFY5cnH3Dcdk3wW6Q@mail.gmail.com>
Message-ID: <CACs_BFOHufaJPrDybGHFEf9qhuAGCrZvOVBhr1+9fGSD7O0ArA@mail.gmail.com>

I had the same problem recently.

And answering Barry's question, I got all the pictures showed on one screen
device.

Curiously, the problem didn't take place (using exactly the same code) when
I asked to produce a .TIFF figure instead of a PDF.

I am also waiting the replies for this issue.

R.

-- 
=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->=8-->

Prof. Dr. Rodrigo Silvestre Martins

Universidade Federal de S?o Paulo
Instituto do Mar
Campus Baixada Santista
Rua Dr. Carvalho de Mendon?a, 144
Encruzilhada, 11070100, Santos, SP - Brasil
Tel: + 55  13 3229-0365

http://www.unifesp.br/campus/san7/
<http://www.unifesp.br/campus/san7/graduacao/cursos/bacharelado-interdisciplinar-em-ciencia-e-tecnologia-do-mar>

Email: rodrigo.plei at gmail.com ; ocersm at lycos.com; rsmartins at usp.br;
rsmartins at unifesp.br
CV Lattes: http://lattes.cnpq.br/5350064124902777
Google Scholar:
http://scholar.google.com.br/citations?user=zX_EezEAAAAJ&hl=pt-BR
Orcid: http://orcid.org/0000-0002-9884-1515
Research Gate: https://www.researchgate.net/profile/Rodrigo_Martins6/
<https://www.researchgate.net/profile/Rodrigo_Martins6/?ev=hdr_xprf>

	[[alternative HTML version deleted]]


From kmcoulib at gmail.com  Mon Sep 12 20:13:11 2016
From: kmcoulib at gmail.com (Kapo Coulibaly)
Date: Mon, 12 Sep 2016 11:13:11 -0700
Subject: [R-sig-Geo] issue with daily rainfall in .bil format
In-Reply-To: <CAN=6O0J_8o=K=kPT89-8t5=Pwf-GY7=dhNbv=3G+o=gydTNq2g@mail.gmail.com>
References: <CAN=6O0J_8o=K=kPT89-8t5=Pwf-GY7=dhNbv=3G+o=gydTNq2g@mail.gmail.com>
Message-ID: <CANcefXaRkXus2y1KoSAjkDA91JutW1umEYz=c2jROidMOPXTNg@mail.gmail.com>

Hi Abdoulaye,
Did you try the NAflag argument in writeRaster. It allows you to overwrite
the default value used to represent NA in a file.
Cheers.

On Fri, Sep 9, 2016 at 5:46 AM, Abdoulaye Sarr <abdoulayesar at gmail.com>
wrote:

> I have daily rainfall data in .bil format and can get info of the file
> using rgdal:
> > library(rgdal)> GDALinfo("/1981/v2p19810101.bil")
> rows        1600
> columns     1500
> bands       1
> lower left origin.x        -20
> lower left origin.y        -40
> res.x       0.05
> res.y       0.05
> ysign       -1
> oblique.x   0
> oblique.y   0
> driver      EHdr
> projection  NA
>
> library(raster)
> pp <- raster("/1981/v2p19810101.bil")
> writeRaster(pp, "v2p19810101.nc")
>
> The problem is that when I display the netcdf file the values are starting
> by -9000 and mainly are located in the continent boundaries, so how to add
> in writeRaster the undef values and have precip from 0 to x.
>
> Any hint appreciated.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From abdoulayesar at gmail.com  Mon Sep 12 21:43:39 2016
From: abdoulayesar at gmail.com (Abdoulaye Sarr)
Date: Mon, 12 Sep 2016 19:43:39 +0000
Subject: [R-sig-Geo] issue with daily rainfall in .bil format
In-Reply-To: <CANcefXaRkXus2y1KoSAjkDA91JutW1umEYz=c2jROidMOPXTNg@mail.gmail.com>
References: <CAN=6O0J_8o=K=kPT89-8t5=Pwf-GY7=dhNbv=3G+o=gydTNq2g@mail.gmail.com>
	<CANcefXaRkXus2y1KoSAjkDA91JutW1umEYz=c2jROidMOPXTNg@mail.gmail.com>
Message-ID: <CAN=6O0Ln8H5y+2FX8Lzj9JHQEiU73Gt1hfgEfr7PD9ApyNCjtw@mail.gmail.com>

Hi Kapo,

No I did not try NAflag, I was able to find another solution outside R.

Abdoulaye

On Mon, Sep 12, 2016 at 6:13 PM, Kapo Coulibaly <kmcoulib at gmail.com> wrote:

> Hi Abdoulaye,
> Did you try the NAflag argument in writeRaster. It allows you to overwrite
> the default value used to represent NA in a file.
> Cheers.
>
> On Fri, Sep 9, 2016 at 5:46 AM, Abdoulaye Sarr <abdoulayesar at gmail.com>
> wrote:
>
>> I have daily rainfall data in .bil format and can get info of the file
>> using rgdal:
>> > library(rgdal)> GDALinfo("/1981/v2p19810101.bil")
>> rows        1600
>> columns     1500
>> bands       1
>> lower left origin.x        -20
>> lower left origin.y        -40
>> res.x       0.05
>> res.y       0.05
>> ysign       -1
>> oblique.x   0
>> oblique.y   0
>> driver      EHdr
>> projection  NA
>>
>> library(raster)
>> pp <- raster("/1981/v2p19810101.bil")
>> writeRaster(pp, "v2p19810101.nc")
>>
>> The problem is that when I display the netcdf file the values are starting
>> by -9000 and mainly are located in the continent boundaries, so how to add
>> in writeRaster the undef values and have precip from 0 to x.
>>
>> Any hint appreciated.
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>

	[[alternative HTML version deleted]]


From odonnems at gmail.com  Tue Sep 13 22:00:58 2016
From: odonnems at gmail.com (Michael O'Donnell)
Date: Tue, 13 Sep 2016 14:00:58 -0600
Subject: [R-sig-Geo] Skater grouping effectiveness,
	within- and between-group similarities
Message-ID: <CAMcuad7hRth6pyPW4Oh16c6k2pb+GJbAF3LQSMm_PRkj9Df4Eg@mail.gmail.com>

Hi,

I am interested in calculating multiple statistics based on
skater{spdep} results
for a SpatialPointsDataFrame, and I was wondering if someone could help me
verify that what I have done is correct (Q1).

My objective is to evaluate the performance of the clustering while
using different
parameters for different skater() runs. Specifically, I am not sure
how to measure
the within-group similarity and I believe the other statistics are defined
correctly.

Also, can someone provide more details on the objects "not.prune" and
"candidates" (Q2)?

Q1 ------------------------------ These are the statistics that I would
like to calculate:
res1 <- skater() # Example of skater object

# The sum of the between-group dissimilarity
sst <- res1$ssto

# The within-group similarity
sse <- sum(res1$ssw)/max(res1$groups)

# R2
R2 <- (sst-sse)/sst

# AIC,AICc
# AIC = n*log(SSD/n)+2*cov_count
# AICc = AIC + 2*cov_count(cov_count+1)/(n-cov_count-1))
cov_count <- 1 # Number of covariates considered by skater and provided in
data
n_count <- nrow(shape2) # Node count
aic <- (n_count * log(sst)/(n_count) + 2.0 * cov_count)
aicc <- aic + 2.0 * cov_count * (cov_count + 1.0)/(n_count - cov_count -
1.0)

# Calinski-Harabasz pseudo F-statistic
nc <- max(res1$groups)
n <- nrow(shape2)
fstat = (R2 / (nc - 1)) / ((1 - R2) / (n - nc))

# Review
print(c(aic, aicc, fstat, R2))

Q2 ------------------------------
Define "not.prune" and "candidates"

For example, are candidates a list of cluster groups that are statistically
significant while not.prune is a list of nodes that did not get assigned to
a group. I have not been able to locate enough documentation on these
objects and I am not sure how to interpret.

Thank you for your assistance,
Mike

	[[alternative HTML version deleted]]


From tim.appelhans at gmail.com  Tue Sep 20 10:11:24 2016
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Tue, 20 Sep 2016 10:11:24 +0200
Subject: [R-sig-Geo] mapview 1.2.0
Message-ID: <57E0EF2C.20207@gmail.com>

Dear list members,

2 days ago we have released a new version of the mapview package.

Notable new features are:

1. addHomeButton() to add zoom-to-layer buttons to a leaflet map (by 
default included mapview calls)
2. addLogo() to add an image to the map canvas, e.g. your 
institution's/company's logo (see following tweet for an example with a 
dancing banana :-) )

https://twitter.com/TimSalabim3/status/776712613673730048

In addition several bugfixes and some performance improvements for 
raster image rendering in plainview().

The full list of changes can be found at 
https://github.com/environmentalinformatics-marburg/mapview/blob/master/NEWS
As always, please file bug reports and/or feature requests here:

https://github.com/environmentalinformatics-marburg/mapview/issues

Enjoy!
Tim

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Informatics
Philipps Universit?t Marburg
Deutschhausstra?e 12
Raum 00A08
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957

http://environmentalinformatics-marburg.de/


From mel at mbacou.com  Tue Sep 20 11:06:57 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Tue, 20 Sep 2016 05:06:57 -0400
Subject: [R-sig-Geo] mapview 1.2.0
In-Reply-To: <57E0EF2C.20207@gmail.com>
References: <57E0EF2C.20207@gmail.com>
Message-ID: <537a1fc4-450b-4be7-0206-f590444e1fbb@mbacou.com>

Tim,
Both `leaflet` and `tmap` currently offer quick interactive 
visualization of geospatial data in R. Does `mapview` provide different 
functionality at this point?

https://rstudio.github.io/leaflet/
https://cran.r-project.org/web/packages/tmap/vignettes/tmap-nutshell.html

Thx, --Mel.


On 9/20/2016 4:11 AM, Tim Appelhans wrote:
> Dear list members,
>
> 2 days ago we have released a new version of the mapview package.
>
> Notable new features are:
>
> 1. addHomeButton() to add zoom-to-layer buttons to a leaflet map (by 
> default included mapview calls)
> 2. addLogo() to add an image to the map canvas, e.g. your 
> institution's/company's logo (see following tweet for an example with 
> a dancing banana :-) )
>
> https://twitter.com/TimSalabim3/status/776712613673730048
>
> In addition several bugfixes and some performance improvements for 
> raster image rendering in plainview().
>
> The full list of changes can be found at 
> https://github.com/environmentalinformatics-marburg/mapview/blob/master/NEWS
> As always, please file bug reports and/or feature requests here:
>
> https://github.com/environmentalinformatics-marburg/mapview/issues
>
> Enjoy!
> Tim
>


From mel at mbacou.com  Wed Sep 21 01:06:37 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Tue, 20 Sep 2016 19:06:37 -0400
Subject: [R-sig-Geo] mapview 1.2.0
In-Reply-To: <57E1032F.50501@gmail.com>
References: <57E0EF2C.20207@gmail.com>
	<537a1fc4-450b-4be7-0206-f590444e1fbb@mbacou.com>
	<57E1032F.50501@gmail.com>
Message-ID: <0c1bcf67-d9d5-85ca-b404-7bc89e1f4c59@mbacou.com>

Tim,
Thanks for taking the time to lay out some of the key differences. I 
look forward to trying these out.

I recall a recent thread on using QGIS canvas in R for quick 
visualization as well. Might be worth trying to consolidate some of 
these -- all excellent -- projects (?)

https://stat.ethz.ch/pipermail/r-sig-geo/2016-August/024817.html

--Mel.


On 9/20/2016 5:36 AM, Tim Appelhans wrote:
> Mel,
> this is I think a matter of the definition of 'quick'. mapview 
> provides one line viewing of spatial data.
>
> With mapview(x) you get:
>
> - 5 different background maps
> - fully queryable features (i.e. complete attribute table of x in popups)
> - info on mouse coordinates and zoom level
> - a scale bar (if the installed version of leaflet provides this)
> - labels showing feature ID
> - zoom-to-layer buttons
>
> Also, mapview lets you add spatial features easily to existing maps 
> with the "+" operator:
>
> mapview(x) + viewExtent(y) + z
>
> will add z and the extent/bounding box of y to a map of x (where x, y, 
> z are all spatial*/raster* objects). This means that mapview will call 
> the appropriate add* function from leaflet depending on the supplied 
> object (z) so you won't have to type these.
>
> In general, mapview is intended for quick and convenient viewing of 
> spatial data. tmap and leaflet focus more on the creation of 
> presentation grade maps and hence require more effort (lines of code) 
> to view things. This is great if you want to produce your final map, 
> but a bit cumbersome if you just quickly wanna check what your current 
> analysis step looks like.
>
> In addition there are convenience functions for larger data sets, 
> especially rasters such as plainview() which will render rasters with 
> any CRS of up to 10 million pixels quickly, though without background 
> maps.
> Large vector data can also be viewed quickly and conveniently for data 
> up to about 3 million points (or line/polygon vertexes) including 
> background map.
>
> Additional functionality includes:
>
> - latticeview and sync to view multiple (potentially synchronised) 
> maps next to each other (i.e. small multiples - similar to panels in 
> lattice / facets in ggplot2)
> - slideview to compare two raster* objects in a before-after like fashion
> - viewExtent to view the extent (bounding box) of a spatial*/raster* 
> object
> - viewRGB to view an rgb image of a raster stack (similar to 
> raster::plotRGB)
>
> There are also a few popup-related functions:
>
> - popupTable to create attribute table popups
> - popupGraph to include lattice or ggplot2 or htmlwidgets graphs 
> (plots) in the popups of features
> - popupImage to include images in the popups (jpg, svg, png, gif, ...)
>
> Have a look at the online manual at
>
> http://environmentalinformatics-marburg.github.io/mapview/introduction.html 
>
>
> which has all the details.
>
>
>
> HTH
> Tim
>
> On 20.09.2016 11:06, Bacou, Melanie wrote:
>> Tim,
>> Both `leaflet` and `tmap` currently offer quick interactive 
>> visualization of geospatial data in R. Does `mapview` provide 
>> different functionality at this point?
>>
>> https://rstudio.github.io/leaflet/
>> https://cran.r-project.org/web/packages/tmap/vignettes/tmap-nutshell.html 
>>
>>
>> Thx, --Mel.
>>
>>
>> On 9/20/2016 4:11 AM, Tim Appelhans wrote:
>>> Dear list members,
>>>
>>> 2 days ago we have released a new version of the mapview package.
>>>
>>> Notable new features are:
>>>
>>> 1. addHomeButton() to add zoom-to-layer buttons to a leaflet map (by 
>>> default included mapview calls)
>>> 2. addLogo() to add an image to the map canvas, e.g. your 
>>> institution's/company's logo (see following tweet for an example 
>>> with a dancing banana :-) )
>>>
>>> https://twitter.com/TimSalabim3/status/776712613673730048
>>>
>>> In addition several bugfixes and some performance improvements for 
>>> raster image rendering in plainview().
>>>
>>> The full list of changes can be found at 
>>> https://github.com/environmentalinformatics-marburg/mapview/blob/master/NEWS
>>> As always, please file bug reports and/or feature requests here:
>>>
>>> https://github.com/environmentalinformatics-marburg/mapview/issues
>>>
>>> Enjoy!
>>> Tim
>>>
>>
>


From Roger.Bivand at nhh.no  Wed Sep 21 12:44:38 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 21 Sep 2016 12:44:38 +0200
Subject: [R-sig-Geo] Skater grouping effectiveness,
 within- and between-group similarities
In-Reply-To: <CAMcuad7hRth6pyPW4Oh16c6k2pb+GJbAF3LQSMm_PRkj9Df4Eg@mail.gmail.com>
References: <CAMcuad7hRth6pyPW4Oh16c6k2pb+GJbAF3LQSMm_PRkj9Df4Eg@mail.gmail.com>
Message-ID: <alpine.LFD.2.20.1609211238510.32094@reclus.nhh.no>

I asked Elias Krainski (the autor of skater()), who replied as copied 
inline below:

On Tue, 13 Sep 2016, Michael O'Donnell wrote:

> Hi,
>
> I am interested in calculating multiple statistics based on 
> skater{spdep} results for a SpatialPointsDataFrame, and I was wondering 
> if someone could help me verify that what I have done is correct (Q1).
>
> My objective is to evaluate the performance of the clustering while 
> using different parameters for different skater() runs. Specifically, I 
> am not sure how to measure the within-group similarity and I believe the 
> other statistics are defined correctly.
>
> Also, can someone provide more details on the objects "not.prune" and 
> "candidates" (Q2)?

not.prune is the set of edges that if once pruned generate groups that 
does not follows the restriction. For example, when you want to have 
groups with at least 10 areas and at some point a group stop to be 
considered to be pruned due this.


>
> Q1 ------------------------------ These are the statistics that I would
> like to calculate:
> res1 <- skater() # Example of skater object
>
> # The sum of the between-group dissimilarity
> sst <- res1$ssto
>
> # The within-group similarity
> sse <- sum(res1$ssw)/max(res1$groups)

SSW is the sum of homogeneity at each step of the SKATER algorithm. So the 
first number coincides with SSTO, the second is for the case of two 
groups, the third for the case of three groups and so on. That is it has 
length equal the number of clusters. However, res1$groups is the 
identification of each area to with group it belongs to and has length 
equals the number of areas. So, it doesn't makes sense to divide 
sum(res1$ssw) to the number of groups. You may want 
res1$ssw/1:length(res1$ssw)


>
> # R2
> R2 <- (sst-sse)/sst

Is it the case to compute some kind of gain when having groups? The gain 
can be the difference between consecutive partitions, like diff(res1$ssw)

>
> # AIC,AICc
> # AIC = n*log(SSD/n)+2*cov_count
> # AICc = AIC + 2*cov_count(cov_count+1)/(n-cov_count-1))
> cov_count <- 1 # Number of covariates considered by skater and provided in
> data
> n_count <- nrow(shape2) # Node count
> aic <- (n_count * log(sst)/(n_count) + 2.0 * cov_count)
> aicc <- aic + 2.0 * cov_count * (cov_count + 1.0)/(n_count - cov_count -
> 1.0)

I'm not sure about this anymore...

>
> # Calinski-Harabasz pseudo F-statistic
> nc <- max(res1$groups)
> n <- nrow(shape2)
> fstat = (R2 / (nc - 1)) / ((1 - R2) / (n - nc))

It will be useful to consider the function index.G1 from the clusterSim 
package.

>
> # Review
> print(c(aic, aicc, fstat, R2))
>
> Q2 ------------------------------
> Define "not.prune" and "candidates"
>
> For example, are candidates a list of cluster groups that are 
> statistically significant while not.prune is a list of nodes that did 
> not get assigned to a group. I have not been able to locate enough 
> documentation on these objects and I am not sure how to interpret.

No. We haven't considered any kind of statistical test. As I mentioned 
above, the not.prune are those that doesn't matches the criteria (about 
size of the cluster).

Elias

>
> Thank you for your assistance,
> Mike
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


From marcel.stadelmann at gmx.net  Wed Sep 21 14:06:53 2016
From: marcel.stadelmann at gmx.net (Marcel Stadelmann)
Date: Wed, 21 Sep 2016 14:06:53 +0200
Subject: [R-sig-Geo] mapview with custom tiles
Message-ID: <846F42B6-CA39-497A-8C86-929062D106C8@gmx.net>

Hello,

Is it possible to use mapview with custom tiles without the predefined basemaps? In leaflet it is possible with the addTiles() function and a url (urlTemplate). It should work something like:

library(mapview)
mapview(gadmCHE)@map %>% addTiles(urlTemplate = 'http://localhost:8000/tiles8/{z}/{x}/{y}.png',options = tileOptions(minZoom = 2, maxZoom = 8, tms = TRUE))

In this the local computer serves the tiles with SimpleHTTPServer
$ python -m SimpleHTTPServer 8000

The problem is, that it's not possible to switch off the preconfigured basemaps and those are overwriting my local tiles.

Thanks,
Marcel

From marcel.stadelmann at gmx.net  Wed Sep 21 14:38:36 2016
From: marcel.stadelmann at gmx.net (Marcel Stadelmann)
Date: Wed, 21 Sep 2016 14:38:36 +0200
Subject: [R-sig-Geo] How to use vector tiles in leaflet or mapview
Message-ID: <E68249EB-12DA-46E9-8F37-4630D4EC342E@gmx.net>

Hello,

I would like to build an interactive webmap in R. Because of the big amount of data i want to try vector tiles technic. My geometries are usually stored in topojson. In JavaScript exists a plugin called geojson-vt. Is there a way to use this already in R?

Any idea to use vector tiles in leaflet or mapview or an other library?

Thank you,
Marcel

From roelofcoster at gmail.com  Wed Sep 21 15:06:51 2016
From: roelofcoster at gmail.com (Roelof Coster)
Date: Wed, 21 Sep 2016 15:06:51 +0200
Subject: [R-sig-Geo] Geostatistics on geometric network
Message-ID: <CAPTd6_uGj-CeGQeN42zrbM6=y_p+Nw9TucnrFVLjmUHoTh=rvg@mail.gmail.com>

Dear list members,

I'm working with electric measurements that were taken on pipelines. These
are spatio-temporal data whose spatial domain is not Euclidean, because the
pipelines form a geometrical network. Has any work been done before to
study this kind of data?

Best regards,

Roelof Coster

	[[alternative HTML version deleted]]


From tim.appelhans at gmail.com  Wed Sep 21 15:39:15 2016
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Wed, 21 Sep 2016 15:39:15 +0200
Subject: [R-sig-Geo] mapview with custom tiles
In-Reply-To: <846F42B6-CA39-497A-8C86-929062D106C8@gmx.net>
References: <846F42B6-CA39-497A-8C86-929062D106C8@gmx.net>
Message-ID: <57E28D83.9040207@gmail.com>

Marcel,
from my point of view the question is why would you want to use mapview 
with custom tiles?

If the answer to this is that you want to create a final presentation 
grade map including some of the features that mapview provides by 
default (i.e. zoom-to-layer button, attribute table popup, mouse 
coordinates, scaleBar), you can do so by adding all these components to 
your custom map:

library(mapview)
library(raster)

leaflet() %>%
   addTiles(urlTemplate = 'http://localhost:8000/tiles8/{z}/{x}/{y}.png',
            options = tileOptions(minZoom = 2, maxZoom = 8, tms = TRUE)) %>%
   addPolygons(data = gadmCHE, popup = popupTable(gadmCHE),
               label = row.names(gadmCHE)) %>%
   addHomeButton(extent(gadmCHE), layer.name = "gadmCHE") %>%
   addMouseCoordinates() %>%
   addScaleBar(position = "bottomleft")

or simply

leaflet() %>%
   addTiles(urlTemplate = 'http://localhost:8000/tiles8/{z}/{x}/{y}.png',
            options = tileOptions(minZoom = 2, maxZoom = 8, tms = TRUE)) +
   gadmCHE

which will mimic mapview feel and look even more.

If, on the other hand, you need to either plot often using your custom 
tiles or need mapview to first set up your map, then no, this is 
currently not possible. This can, however be made possible but for that 
I would ask you to please file a feature request at

https://github.com/environmentalinformatics-marburg/mapview/issues

HTH
Tim

On 21.09.2016 14:06, Marcel Stadelmann wrote:
> Hello,
>
> Is it possible to use mapview with custom tiles without the predefined basemaps? In leaflet it is possible with the addTiles() function and a url (urlTemplate). It should work something like:
>
> library(mapview)
> mapview(gadmCHE)@map %>% addTiles(urlTemplate = 'http://localhost:8000/tiles8/{z}/{x}/{y}.png',options = tileOptions(minZoom = 2, maxZoom = 8, tms = TRUE))
>
> In this the local computer serves the tiles with SimpleHTTPServer
> $ python -m SimpleHTTPServer 8000
>
> The problem is, that it's not possible to switch off the preconfigured basemaps and those are overwriting my local tiles.
>
> Thanks,
> Marcel
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Informatics
Philipps Universit?t Marburg
Deutschhausstra?e 12
Raum 00A08
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957

http://environmentalinformatics-marburg.de/


From tim.appelhans at gmail.com  Wed Sep 21 15:54:19 2016
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Wed, 21 Sep 2016 15:54:19 +0200
Subject: [R-sig-Geo] How to use vector tiles in leaflet or mapview
In-Reply-To: <E68249EB-12DA-46E9-8F37-4630D4EC342E@gmx.net>
References: <E68249EB-12DA-46E9-8F37-4630D4EC342E@gmx.net>
Message-ID: <57E2910B.9090708@gmail.com>

Marcel,
no for mapview and I am 99% certain also no for leaflet.

Though mapview will render large vector data sets (tested for up to 3 
million points or line/polygons vertexes). This is, however, not very 
flexible (e.g. no coloring by attribute etc.) and will not be compatible 
with any other leaflet or mapview functionality.

Tim

On 21.09.2016 14:38, Marcel Stadelmann wrote:
> Hello,
>
> I would like to build an interactive webmap in R. Because of the big amount of data i want to try vector tiles technic. My geometries are usually stored in topojson. In JavaScript exists a plugin called geojson-vt. Is there a way to use this already in R?
>
> Any idea to use vector tiles in leaflet or mapview or an other library?
>
> Thank you,
> Marcel
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Informatics
Philipps Universit?t Marburg
Deutschhausstra?e 12
Raum 00A08
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957

http://environmentalinformatics-marburg.de/


From r.turner at auckland.ac.nz  Wed Sep 21 23:28:51 2016
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 22 Sep 2016 09:28:51 +1200
Subject: [R-sig-Geo] [FORGED]  Geostatistics on geometric network
In-Reply-To: <CAPTd6_uGj-CeGQeN42zrbM6=y_p+Nw9TucnrFVLjmUHoTh=rvg@mail.gmail.com>
References: <CAPTd6_uGj-CeGQeN42zrbM6=y_p+Nw9TucnrFVLjmUHoTh=rvg@mail.gmail.com>
Message-ID: <1825cffe-262f-f5e3-09a1-7b13fbadfff5@auckland.ac.nz>

On 22/09/16 01:06, Roelof Coster wrote:
> Dear list members,
>
> I'm working with electric measurements that were taken on pipelines. These
> are spatio-temporal data whose spatial domain is not Euclidean, because the
> pipelines form a geometrical network. Has any work been done before to
> study this kind of data?

The spatstat package has facilities for dealing with *spatial* point 
processes on geometric networks.  I am not aware of any work for dealing 
with spatio-temporal processes on such networks.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From junkmail2 at mail.ru  Thu Sep 22 12:51:52 2016
From: junkmail2 at mail.ru (=?UTF-8?B?VmFzeWEgUHVwa2lu?=)
Date: Thu, 22 Sep 2016 13:51:52 +0300
Subject: [R-sig-Geo] =?utf-8?q?Plotting_2_rasters_over_each_other_on_a_map?=
 =?utf-8?q?_with_2D_colour_scheme?=
Message-ID: <1474541512.155280073@f221.i.mail.ru>

Hi guys,

What I am trying to do is to make a map that would show the areas which are hot-dry, hot-wet, cold-dry, cold-wet. I have 2 rasters with precipitation and temperature values. And I want to plot them over each other so that each extreme combination of the 2 variables (hot-dry, hot-wet, cold-dry, cold-wet) would have its own colour with respective gradients for the intermediate values on the colour scheme, that will have to produce a 2D colour legend. Below please see a link to the concept image, that I have produced for explanation. I saw such a thing once and thought that was a briliant idea to show how 2 variables interact, but then I totally forgot where it was. I have been googling for 2 days - no result. Any help is very much welcome - the name of the thing, name of the software to do it (how to do it would be marvelous), keywords to google, workarounds - anything.

Concept image:
https://cloud.mail.ru/public/SHno/98X3czaW5

Best wishes,
Vasya.

From rob00x at gmail.com  Thu Sep 22 15:52:22 2016
From: rob00x at gmail.com (Robin Lovelace)
Date: Thu, 22 Sep 2016 14:52:22 +0100
Subject: [R-sig-Geo] Plotting 2 rasters over each other on a map with 2D
 colour scheme
In-Reply-To: <1474541512.155280073@f221.i.mail.ru>
References: <1474541512.155280073@f221.i.mail.ru>
Message-ID: <CAF16KkXQgXC0PUc9rc0uRx5-NTjS-RJ2mRoT5toM4Z8-HeNK3A@mail.gmail.com>

Hi Vasya

To some extent this is more a visualisation question than a geospatial
question but is interesting because it's common to want to plot 2 variables
together. Your question comes at a good time because there has recently
been published a package for solving precisely this problem: *colorspace*.

https://github.com/wmurphyrd/colorplaner

There are mapping examples in there, but not with raster data. I'm sure you
could use it to solve your problem, however.

Another approach is to use the magick image manipulation package.

Here's some code and an image showing the result.

Code: https://gist.github.com/Robinlovelace/9d9844886ec186c4423b611e6185392e

Resulting image (sorry about the 'pipes' Edzer!): https://flic.kr/p/Mj5cos

I suggest the colorplane package instead of the *magick* way (unless
someone knows of a better solution) at present because it also seems to
create a legend for you.

If you provide a simple, reproducible example to start with, that will
increase the probability of someone helping out.

On Thu, Sep 22, 2016 at 11:51 AM, Vasya Pupkin via R-sig-Geo <
r-sig-geo at r-project.org> wrote:

> Hi guys,
>
> What I am trying to do is to make a map that would show the areas which
> are hot-dry, hot-wet, cold-dry, cold-wet. I have 2 rasters with
> precipitation and temperature values. And I want to plot them over each
> other so that each extreme combination of the 2 variables (hot-dry,
> hot-wet, cold-dry, cold-wet) would have its own colour with respective
> gradients for the intermediate values on the colour scheme, that will have
> to produce a 2D colour legend. Below please see a link to the concept
> image, that I have produced for explanation. I saw such a thing once and
> thought that was a briliant idea to show how 2 variables interact, but then
> I totally forgot where it was. I have been googling for 2 days - no result.
> Any help is very much welcome - the name of the thing, name of the software
> to do it (how to do it would be marvelous), keywords to google, workarounds
> - anything.
>
> Concept image:
> https://cloud.mail.ru/public/SHno/98X3czaW5
>
> Best wishes,
> Vasya.
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Thu Sep 22 17:05:11 2016
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 22 Sep 2016 16:05:11 +0100
Subject: [R-sig-Geo] Plotting 2 rasters over each other on a map with 2D
 colour scheme
In-Reply-To: <CAF16KkXQgXC0PUc9rc0uRx5-NTjS-RJ2mRoT5toM4Z8-HeNK3A@mail.gmail.com>
References: <1474541512.155280073@f221.i.mail.ru>
	<CAF16KkXQgXC0PUc9rc0uRx5-NTjS-RJ2mRoT5toM4Z8-HeNK3A@mail.gmail.com>
Message-ID: <CANVKczMYh1GCS40i35PM1cyUHNc+mSOx6srvzy25hmnUgP04kg@mail.gmail.com>

Another way of visualising two values per pixel is to vary two of Hue,
Luminance, and Saturation. You can even use all three if you have
three variables!

Note that Hue is a circular variable, and in the example I saw it was
being used to map the seasonal peak of rainfall, so a circular
variable was appropriate (December is close to January). Then I think
saturation was used to indicate total rainfall. So saturated red was
lots of rain, peaking in June, washed out red was low rain also
peaking in June, whereas saturated blue was lots of rain peaking in
March. Unsaturated colours (grey) meant no rain, at which point the
hue was lost but that wasn't a problem because with no rain there's no
peak month.

The examples in the colorplaner package need careful consideration,
because there's no obvious gradient in each of the directions. I don't
think it would be appropriate for my rainfall example above, even
without the circular nature of the peak month variable. Your example
of wanting to look at hot/cold dry/wet extremes would probably suit
the colorplaner palette since the corner extremes are of interest.

I suspect to make such a plot from your two rasters will involve
creating an RGB raster brick by lookup into a 2-d palette from the
values in each of your one-layer rasters....

 So given P, an NxN matrix of hexadecimal colour values representing
the palette...

 And two rasters A and B scaled to 1:N....

 The vector of colours would be P[values(A), values(B)]

 Turn that into a 3 layer raster stack and plot with plotRGB.....

Barry



On Thu, Sep 22, 2016 at 2:52 PM, Robin Lovelace <rob00x at gmail.com> wrote:
> Hi Vasya
>
> To some extent this is more a visualisation question than a geospatial
> question but is interesting because it's common to want to plot 2 variables
> together. Your question comes at a good time because there has recently
> been published a package for solving precisely this problem: *colorspace*.
>
> https://github.com/wmurphyrd/colorplaner
>
> There are mapping examples in there, but not with raster data. I'm sure you
> could use it to solve your problem, however.
>
> Another approach is to use the magick image manipulation package.
>
> Here's some code and an image showing the result.
>
> Code: https://gist.github.com/Robinlovelace/9d9844886ec186c4423b611e6185392e
>
> Resulting image (sorry about the 'pipes' Edzer!): https://flic.kr/p/Mj5cos
>
> I suggest the colorplane package instead of the *magick* way (unless
> someone knows of a better solution) at present because it also seems to
> create a legend for you.
>
> If you provide a simple, reproducible example to start with, that will
> increase the probability of someone helping out.
>
> On Thu, Sep 22, 2016 at 11:51 AM, Vasya Pupkin via R-sig-Geo <
> r-sig-geo at r-project.org> wrote:
>
>> Hi guys,
>>
>> What I am trying to do is to make a map that would show the areas which
>> are hot-dry, hot-wet, cold-dry, cold-wet. I have 2 rasters with
>> precipitation and temperature values. And I want to plot them over each
>> other so that each extreme combination of the 2 variables (hot-dry,
>> hot-wet, cold-dry, cold-wet) would have its own colour with respective
>> gradients for the intermediate values on the colour scheme, that will have
>> to produce a 2D colour legend. Below please see a link to the concept
>> image, that I have produced for explanation. I saw such a thing once and
>> thought that was a briliant idea to show how 2 variables interact, but then
>> I totally forgot where it was. I have been googling for 2 days - no result.
>> Any help is very much welcome - the name of the thing, name of the software
>> to do it (how to do it would be marvelous), keywords to google, workarounds
>> - anything.
>>
>> Concept image:
>> https://cloud.mail.ru/public/SHno/98X3czaW5
>>
>> Best wishes,
>> Vasya.
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From junkmail2 at mail.ru  Fri Sep 23 06:49:45 2016
From: junkmail2 at mail.ru (=?UTF-8?B?VmFzeWEgUHVwa2lu?=)
Date: Fri, 23 Sep 2016 07:49:45 +0300
Subject: [R-sig-Geo]
 =?utf-8?q?Plotting_2_rasters_over_each_other_on_a_map?=
 =?utf-8?q?_with_2D_colour_scheme?=
In-Reply-To: <CANVKczMYh1GCS40i35PM1cyUHNc+mSOx6srvzy25hmnUgP04kg@mail.gmail.com>
References: <1474541512.155280073@f221.i.mail.ru>
	<CAF16KkXQgXC0PUc9rc0uRx5-NTjS-RJ2mRoT5toM4Z8-HeNK3A@mail.gmail.com>
	<CANVKczMYh1GCS40i35PM1cyUHNc+mSOx6srvzy25hmnUgP04kg@mail.gmail.com>
Message-ID: <1474606185.186180357@f306.i.mail.ru>


Dear All,

Thank you very much for all your very valuable inputs. Thanks to them now I know how the approach is called,
It is "bivariate color mapping" just google that and you will get tonns of information.

This guide below is the most comprehenvise I have come across:
http://www.joshuastevens.net/cartography/make-a-bivariate-choropleth-map/

however requires a bit of work.

Thank you very much!
Best wishes,
Vasya.

>???????, 22 ???????? 2016, 21:05 +06:00 ?? Barry Rowlingson <b.rowlingson at lancaster.ac.uk>:
>
>Another way of visualising two values per pixel is to vary two of Hue,
>Luminance, and Saturation. You can even use all three if you have
>three variables!
>
>Note that Hue is a circular variable, and in the example I saw it was
>being used to map the seasonal peak of rainfall, so a circular
>variable was appropriate (December is close to January). Then I think
>saturation was used to indicate total rainfall. So saturated red was
>lots of rain, peaking in June, washed out red was low rain also
>peaking in June, whereas saturated blue was lots of rain peaking in
>March. Unsaturated colours (grey) meant no rain, at which point the
>hue was lost but that wasn't a problem because with no rain there's no
>peak month.
>
>The examples in the colorplaner package need careful consideration,
>because there's no obvious gradient in each of the directions. I don't
>think it would be appropriate for my rainfall example above, even
>without the circular nature of the peak month variable. Your example
>of wanting to look at hot/cold dry/wet extremes would probably suit
>the colorplaner palette since the corner extremes are of interest.
>
>I suspect to make such a plot from your two rasters will involve
>creating an RGB raster brick by lookup into a 2-d palette from the
>values in each of your one-layer rasters....
>
>?So given P, an NxN matrix of hexadecimal colour values representing
>the palette...
>
>?And two rasters A and B scaled to 1:N....
>
>?The vector of colours would be P[values(A), values(B)]
>
>?Turn that into a 3 layer raster stack and plot with plotRGB.....
>
>Barry
>
>
>
>On Thu, Sep 22, 2016 at 2:52 PM, Robin Lovelace < rob00x at gmail.com > wrote:
>> Hi Vasya
>>
>> To some extent this is more a visualisation question than a geospatial
>> question but is interesting because it's common to want to plot 2 variables
>> together. Your question comes at a good time because there has recently
>> been published a package for solving precisely this problem: *colorspace*.
>>
>>  https://github.com/wmurphyrd/colorplaner
>>
>> There are mapping examples in there, but not with raster data. I'm sure you
>> could use it to solve your problem, however.
>>
>> Another approach is to use the magick image manipulation package.
>>
>> Here's some code and an image showing the result.
>>
>> Code:  https://gist.github.com/Robinlovelace/9d9844886ec186c4423b611e6185392e
>>
>> Resulting image (sorry about the 'pipes' Edzer!):  https://flic.kr/p/Mj5cos
>>
>> I suggest the colorplane package instead of the *magick* way (unless
>> someone knows of a better solution) at present because it also seems to
>> create a legend for you.
>>
>> If you provide a simple, reproducible example to start with, that will
>> increase the probability of someone helping out.
>>
>> On Thu, Sep 22, 2016 at 11:51 AM, Vasya Pupkin via R-sig-Geo <
>>  r-sig-geo at r-project.org > wrote:
>>
>>> Hi guys,
>>>
>>> What I am trying to do is to make a map that would show the areas which
>>> are hot-dry, hot-wet, cold-dry, cold-wet. I have 2 rasters with
>>> precipitation and temperature values. And I want to plot them over each
>>> other so that each extreme combination of the 2 variables (hot-dry,
>>> hot-wet, cold-dry, cold-wet) would have its own colour with respective
>>> gradients for the intermediate values on the colour scheme, that will have
>>> to produce a 2D colour legend. Below please see a link to the concept
>>> image, that I have produced for explanation. I saw such a thing once and
>>> thought that was a briliant idea to show how 2 variables interact, but then
>>> I totally forgot where it was. I have been googling for 2 days - no result.
>>> Any help is very much welcome - the name of the thing, name of the software
>>> to do it (how to do it would be marvelous), keywords to google, workarounds
>>> - anything.
>>>
>>> Concept image:
>>>  https://cloud.mail.ru/public/SHno/98X3czaW5
>>>
>>> Best wishes,
>>> Vasya.
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>>  R-sig-Geo at r-project.org
>>>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>>  R-sig-Geo at r-project.org
>>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From btupper at bigelow.org  Fri Sep 23 18:11:00 2016
From: btupper at bigelow.org (Ben Tupper)
Date: Fri, 23 Sep 2016 12:11:00 -0400
Subject: [R-sig-Geo] rasterVis, multiple plots and scalebar labels
Message-ID: <F11B686C-3D77-4406-8693-CFF57F91A47C@bigelow.org>

Hi,

I would like to specify the labels drawn on the scalebar for a multi-raster plot.  I have seen this exchange (and try to replicate for multiple rasters below)  

https://stat.ethz.ch/pipermail/r-help/2011-August/286705.html

I can't make that work with rasterVis::levelplot()

# start preparatory
library(raster)
library(rasterVis)

x <- raster::raster(volcano,
	crs = '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0',
	xmn = -45, xmx = -40, ymn = 39, ymx = 47)  
xx <- addLayer(x,x,x)

at <- seq(90, 200, length = 10)
labels <- rep(" ", length(at))
labels[1] <- "low"
labels[length(labels)] <- "high"
# end preparatory

# try as in help exchange above - ticks are labeled with numerics
rasterVis::levelplot(xx,
     colorkey = list(at = at),
     labels = list(labels = labels, at = at) )

# try as described in ?rasterVis::levelplot section for labels
# ticks still labeled with numerics
rasterVis::levelplot(xx,
	at = at,
 	labels = labels )

I'm stumped!  How do I control the tick labels on a scalebar?

Thanks!
Ben


> sessionInfo()
R version 3.3.1 (2016-06-21)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.11.6 (El Capitan)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] rasterVis_0.40      latticeExtra_0.6-28 RColorBrewer_1.1-2  lattice_0.20-33    
[5] raster_2.5-8        sp_1.2-3           

loaded via a namespace (and not attached):
[1] zoo_1.7-13        rgdal_1.1-10      parallel_3.3.1    hexbin_1.27.1    
[5] Rcpp_0.12.6       grid_3.3.1        viridisLite_0.1.3


Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org


From mel at mbacou.com  Fri Sep 23 18:55:48 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Fri, 23 Sep 2016 12:55:48 -0400
Subject: [R-sig-Geo] rasterVis, multiple plots and scalebar labels
In-Reply-To: <F11B686C-3D77-4406-8693-CFF57F91A47C@bigelow.org>
References: <F11B686C-3D77-4406-8693-CFF57F91A47C@bigelow.org>
Message-ID: <d0bffc4b-7aac-0d30-f67a-6a37dddc662c@mbacou.com>

Here is a stump that might also work with levelplot():

# Plot raster with no scalebar first
raster::plot(r, col=vector_of_colors, legend=FALSE, axes=FALSE)

# Add a custom scalebar
raster::plot(r, legend.only=TRUE,
   col=vector_of_colors,
   axis.args=list(at=1:length(vector_of_labels), labels=vector_of_labels)


On 9/23/2016 12:11 PM, Ben Tupper wrote:
> Hi,
>
> I would like to specify the labels drawn on the scalebar for a multi-raster plot.  I have seen this exchange (and try to replicate for multiple rasters below)
>
> https://stat.ethz.ch/pipermail/r-help/2011-August/286705.html
>
> I can't make that work with rasterVis::levelplot()
>
> # start preparatory
> library(raster)
> library(rasterVis)
>
> x <- raster::raster(volcano,
> 	crs = '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0',
> 	xmn = -45, xmx = -40, ymn = 39, ymx = 47)
> xx <- addLayer(x,x,x)
>
> at <- seq(90, 200, length = 10)
> labels <- rep(" ", length(at))
> labels[1] <- "low"
> labels[length(labels)] <- "high"
> # end preparatory
>
> # try as in help exchange above - ticks are labeled with numerics
> rasterVis::levelplot(xx,
>       colorkey = list(at = at),
>       labels = list(labels = labels, at = at) )
>
> # try as described in ?rasterVis::levelplot section for labels
> # ticks still labeled with numerics
> rasterVis::levelplot(xx,
> 	at = at,
>   	labels = labels )
>
> I'm stumped!  How do I control the tick labels on a scalebar?
>
> Thanks!
> Ben
>
>
>> sessionInfo()
> R version 3.3.1 (2016-06-21)
> Platform: x86_64-apple-darwin13.4.0 (64-bit)
> Running under: OS X 10.11.6 (El Capitan)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] rasterVis_0.40      latticeExtra_0.6-28 RColorBrewer_1.1-2  lattice_0.20-33
> [5] raster_2.5-8        sp_1.2-3
>
> loaded via a namespace (and not attached):
> [1] zoo_1.7-13        rgdal_1.1-10      parallel_3.3.1    hexbin_1.27.1
> [5] Rcpp_0.12.6       grid_3.3.1        viridisLite_0.1.3
>
>
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From nickeubank at gmail.com  Sat Sep 24 01:11:24 2016
From: nickeubank at gmail.com (Nick Eubank)
Date: Fri, 23 Sep 2016 23:11:24 +0000
Subject: [R-sig-Geo] dotsInPolys sometimes not generating correct number of
	points
Message-ID: <CAFWQgOn0wMpLq8OgTxA4M-o-BbBfuCZR9L-rFL2QLAWoq0nEYg@mail.gmail.com>

Hi All,

Trying to run dotsInPolys from maptools on a set of polygons. I have one
set of polygons for each US state, along with a vector of desired points
for each polygon.

However, when I check the number of dots created after running the code, I
find that for some states -- but not all -- the number of points doesn't
match the number of dots that were specified. In particular, I seem to have
fewer dots than expected.

Paraphrasing somewhat (haven't come up with a minimal replicating example I
can post, sorry), I have a polygon file called `my.polygons`, and I'm
effectively doing the following:

    my.dots <- dotsInPolys(my.polygons, my.polygons[,'count.vector'])

I've confirmed that `typeof(my.polygons[,'count.vector'])` is `"integer"`,
and get no warnings running dotsInPolys. Nevertheless, for many states, I
get FALSE from:

    length(my.dots) == sum(my.polygons$count.vector)

There are no NAs in the count vector.

No zero-area polygons. using rgeos, one state that is having problems
reports areas of:

    summary(gArea(my.polygons, byid=TRUE))
        Min.   1st Qu.    Median      Mean   3rd Qu.      Max.
        1.474e+04 9.858e+05 4.264e+06 3.189e+07 3.159e+07 1.144e+09

I also get `gIsValid(my.polygons)` is TRUE, so it's not that...

It seems like I get more problems in states with more polygons / counts, if
that's at all informative. For example, one problem state has 3,671
polygons, and should have 634,397 points, but only ends up with 632,474.
Another with 6,983 polygons should have 3,942,589 points, but has
only 3,840,180. By contrast, no problems in a state with 343 polygons
and 120,397 points.

Any suggestions on possible cause?

Thanks,

Nick

	[[alternative HTML version deleted]]


From EDANER_92 at hotmail.com  Sat Sep 24 01:13:53 2016
From: EDANER_92 at hotmail.com (DANER CASTRO VANEGAS)
Date: Fri, 23 Sep 2016 23:13:53 +0000
Subject: [R-sig-Geo] Raster data automation
Message-ID: <CY1PR04MB2121822F3085283C27C320A982C80@CY1PR04MB2121.namprd04.prod.outlook.com>

Hello everyone.

I would like to connect the free download of raster data WORLDCLIM and LANDSAT a given area in order to store it directly on a handler database as PostgreSQL + PostGIS, which is hosted on a private server, the aim is that whenever you load information to the origin server and downloaded page is linked to the database for use in a workflow of R + R shiny and optimize processes.

Thank you.


	[[alternative HTML version deleted]]


From btupper at bigelow.org  Sat Sep 24 02:59:55 2016
From: btupper at bigelow.org (Ben Tupper)
Date: Fri, 23 Sep 2016 20:59:55 -0400
Subject: [R-sig-Geo] rasterVis, multiple plots and scalebar labels
In-Reply-To: <d0bffc4b-7aac-0d30-f67a-6a37dddc662c@mbacou.com>
References: <F11B686C-3D77-4406-8693-CFF57F91A47C@bigelow.org>
	<d0bffc4b-7aac-0d30-f67a-6a37dddc662c@mbacou.com>
Message-ID: <F41F9292-4A25-4253-99AE-F068D27B14BD@bigelow.org>

Hi Melanie,

Thanks for this.  I tried that approach by adding layers with the latticeExtra package - no joy yet.  My lattice skills are a bit wobbly - but I have The Good Books in hand so I'll keep noodling around and may prevail yet.

https://www.r-project.org/doc/bib/R-books_bib.html#R:Sarkar:2008
https://www.r-project.org/doc/bib/R-books_bib.html#R:Bivand+Pebesma+Gomez-Rubio:2008
http://oscarperpinan.github.io/spacetime-vis/

Cheers,
Ben

> On Sep 23, 2016, at 12:55 PM, Bacou, Melanie <mel at mbacou.com> wrote:
> 
> Here is a stump that might also work with levelplot():
> 
> # Plot raster with no scalebar first
> raster::plot(r, col=vector_of_colors, legend=FALSE, axes=FALSE)
> 
> # Add a custom scalebar
> raster::plot(r, legend.only=TRUE,
>  col=vector_of_colors,
>  axis.args=list(at=1:length(vector_of_labels), labels=vector_of_labels)
> 
> 
> On 9/23/2016 12:11 PM, Ben Tupper wrote:
>> Hi,
>> 
>> I would like to specify the labels drawn on the scalebar for a multi-raster plot.  I have seen this exchange (and try to replicate for multiple rasters below)
>> 
>> https://stat.ethz.ch/pipermail/r-help/2011-August/286705.html
>> 
>> I can't make that work with rasterVis::levelplot()
>> 
>> # start preparatory
>> library(raster)
>> library(rasterVis)
>> 
>> x <- raster::raster(volcano,
>> 	crs = '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0',
>> 	xmn = -45, xmx = -40, ymn = 39, ymx = 47)
>> xx <- addLayer(x,x,x)
>> 
>> at <- seq(90, 200, length = 10)
>> labels <- rep(" ", length(at))
>> labels[1] <- "low"
>> labels[length(labels)] <- "high"
>> # end preparatory
>> 
>> # try as in help exchange above - ticks are labeled with numerics
>> rasterVis::levelplot(xx,
>>      colorkey = list(at = at),
>>      labels = list(labels = labels, at = at) )
>> 
>> # try as described in ?rasterVis::levelplot section for labels
>> # ticks still labeled with numerics
>> rasterVis::levelplot(xx,
>> 	at = at,
>>  	labels = labels )
>> 
>> I'm stumped!  How do I control the tick labels on a scalebar?
>> 
>> Thanks!
>> Ben
>> 
>> 
>>> sessionInfo()
>> R version 3.3.1 (2016-06-21)
>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>> Running under: OS X 10.11.6 (El Capitan)
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> other attached packages:
>> [1] rasterVis_0.40      latticeExtra_0.6-28 RColorBrewer_1.1-2  lattice_0.20-33
>> [5] raster_2.5-8        sp_1.2-3
>> 
>> loaded via a namespace (and not attached):
>> [1] zoo_1.7-13        rgdal_1.1-10      parallel_3.3.1    hexbin_1.27.1
>> [5] Rcpp_0.12.6       grid_3.3.1        viridisLite_0.1.3
>> 
>> 
>> Ben Tupper
>> Bigelow Laboratory for Ocean Sciences
>> 60 Bigelow Drive, P.O. Box 380
>> East Boothbay, Maine 04544
>> http://www.bigelow.org
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org


From tim.appelhans at gmail.com  Sat Sep 24 09:59:27 2016
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Sat, 24 Sep 2016 09:59:27 +0200
Subject: [R-sig-Geo] rasterVis, multiple plots and scalebar labels
In-Reply-To: <F41F9292-4A25-4253-99AE-F068D27B14BD@bigelow.org>
References: <F11B686C-3D77-4406-8693-CFF57F91A47C@bigelow.org>
	<d0bffc4b-7aac-0d30-f67a-6a37dddc662c@mbacou.com>
	<F41F9292-4A25-4253-99AE-F068D27B14BD@bigelow.org>
Message-ID: <57E6325F.5020509@gmail.com>

Is this producing what you want?

rasterVis::levelplot(xx, colorkey = list(at = at, labels = labels))

colorkey takes a list of arguments, including at and labels. This way it 
can be differentiated from the at passed to levelplot itself.

Tim

On 24.09.2016 02:59, Ben Tupper wrote:
> Hi Melanie,
>
> Thanks for this.  I tried that approach by adding layers with the latticeExtra package - no joy yet.  My lattice skills are a bit wobbly - but I have The Good Books in hand so I'll keep noodling around and may prevail yet.
>
> https://www.r-project.org/doc/bib/R-books_bib.html#R:Sarkar:2008
> https://www.r-project.org/doc/bib/R-books_bib.html#R:Bivand+Pebesma+Gomez-Rubio:2008
> http://oscarperpinan.github.io/spacetime-vis/
>
> Cheers,
> Ben
>
>> On Sep 23, 2016, at 12:55 PM, Bacou, Melanie <mel at mbacou.com> wrote:
>>
>> Here is a stump that might also work with levelplot():
>>
>> # Plot raster with no scalebar first
>> raster::plot(r, col=vector_of_colors, legend=FALSE, axes=FALSE)
>>
>> # Add a custom scalebar
>> raster::plot(r, legend.only=TRUE,
>>   col=vector_of_colors,
>>   axis.args=list(at=1:length(vector_of_labels), labels=vector_of_labels)
>>
>>
>> On 9/23/2016 12:11 PM, Ben Tupper wrote:
>>> Hi,
>>>
>>> I would like to specify the labels drawn on the scalebar for a multi-raster plot.  I have seen this exchange (and try to replicate for multiple rasters below)
>>>
>>> https://stat.ethz.ch/pipermail/r-help/2011-August/286705.html
>>>
>>> I can't make that work with rasterVis::levelplot()
>>>
>>> # start preparatory
>>> library(raster)
>>> library(rasterVis)
>>>
>>> x <- raster::raster(volcano,
>>> 	crs = '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0',
>>> 	xmn = -45, xmx = -40, ymn = 39, ymx = 47)
>>> xx <- addLayer(x,x,x)
>>>
>>> at <- seq(90, 200, length = 10)
>>> labels <- rep(" ", length(at))
>>> labels[1] <- "low"
>>> labels[length(labels)] <- "high"
>>> # end preparatory
>>>
>>> # try as in help exchange above - ticks are labeled with numerics
>>> rasterVis::levelplot(xx,
>>>       colorkey = list(at = at),
>>>       labels = list(labels = labels, at = at) )
>>>
>>> # try as described in ?rasterVis::levelplot section for labels
>>> # ticks still labeled with numerics
>>> rasterVis::levelplot(xx,
>>> 	at = at,
>>>   	labels = labels )
>>>
>>> I'm stumped!  How do I control the tick labels on a scalebar?
>>>
>>> Thanks!
>>> Ben
>>>
>>>
>>>> sessionInfo()
>>> R version 3.3.1 (2016-06-21)
>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>> Running under: OS X 10.11.6 (El Capitan)
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> other attached packages:
>>> [1] rasterVis_0.40      latticeExtra_0.6-28 RColorBrewer_1.1-2  lattice_0.20-33
>>> [5] raster_2.5-8        sp_1.2-3
>>>
>>> loaded via a namespace (and not attached):
>>> [1] zoo_1.7-13        rgdal_1.1-10      parallel_3.3.1    hexbin_1.27.1
>>> [5] Rcpp_0.12.6       grid_3.3.1        viridisLite_0.1.3
>>>
>>>
>>> Ben Tupper
>>> Bigelow Laboratory for Ocean Sciences
>>> 60 Bigelow Drive, P.O. Box 380
>>> East Boothbay, Maine 04544
>>> http://www.bigelow.org
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Informatics
Philipps Universit?t Marburg
Deutschhausstra?e 12
Raum 00A08
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957

http://environmentalinformatics-marburg.de/


From Roger.Bivand at nhh.no  Sat Sep 24 11:37:37 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 24 Sep 2016 11:37:37 +0200
Subject: [R-sig-Geo] dotsInPolys sometimes not generating correct number
 of	points
In-Reply-To: <CAFWQgOn0wMpLq8OgTxA4M-o-BbBfuCZR9L-rFL2QLAWoq0nEYg@mail.gmail.com>
References: <CAFWQgOn0wMpLq8OgTxA4M-o-BbBfuCZR9L-rFL2QLAWoq0nEYg@mail.gmail.com>
Message-ID: <alpine.LFD.2.20.1609241128440.11778@reclus.nhh.no>

On Sat, 24 Sep 2016, Nick Eubank wrote:

> Hi All,
>
> Trying to run dotsInPolys from maptools on a set of polygons. I have one
> set of polygons for each US state, along with a vector of desired points
> for each polygon.
>
> However, when I check the number of dots created after running the code, I
> find that for some states -- but not all -- the number of points doesn't
> match the number of dots that were specified. In particular, I seem to have
> fewer dots than expected.

maptools::dotsinpolys() was written for visualization only (so the number 
of points could be apprpoximate), a long time ago, and wraps looped calls 
to sp::spsample() methods. Look at sp::spsample() to see that it tries to 
sub-divide the number of random sample points among rings, but when a 
Polygons object has many member Polygon objects, and they have awkward 
geometries, it will struggle to get to the right number,?iterating by 
default 4 times to increase the density within the bounding box of the 
Polygon object. maptools::dotsinpolys() doesn't pass through the tuning 
arguments to sp::spsample(), but you could. I'm really uncertain how 
visiulizing thousands of polygons works, same for millions of random 
points.

Hope this clarifies,

Roger

>
> Paraphrasing somewhat (haven't come up with a minimal replicating example I
> can post, sorry), I have a polygon file called `my.polygons`, and I'm
> effectively doing the following:
>
>    my.dots <- dotsInPolys(my.polygons, my.polygons[,'count.vector'])
>
> I've confirmed that `typeof(my.polygons[,'count.vector'])` is `"integer"`,
> and get no warnings running dotsInPolys. Nevertheless, for many states, I
> get FALSE from:
>
>    length(my.dots) == sum(my.polygons$count.vector)
>
> There are no NAs in the count vector.
>
> No zero-area polygons. using rgeos, one state that is having problems
> reports areas of:
>
>    summary(gArea(my.polygons, byid=TRUE))
>        Min.   1st Qu.    Median      Mean   3rd Qu.      Max.
>        1.474e+04 9.858e+05 4.264e+06 3.189e+07 3.159e+07 1.144e+09
>
> I also get `gIsValid(my.polygons)` is TRUE, so it's not that...
>
> It seems like I get more problems in states with more polygons / counts, if
> that's at all informative. For example, one problem state has 3,671
> polygons, and should have 634,397 points, but only ends up with 632,474.
> Another with 6,983 polygons should have 3,942,589 points, but has
> only 3,840,180. By contrast, no problems in a state with 343 polygons
> and 120,397 points.
>
> Any suggestions on possible cause?
>
> Thanks,
>
> Nick
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412

From btupper at bigelow.org  Sat Sep 24 12:48:40 2016
From: btupper at bigelow.org (Ben Tupper)
Date: Sat, 24 Sep 2016 06:48:40 -0400
Subject: [R-sig-Geo] rasterVis, multiple plots and scalebar labels
In-Reply-To: <57E6325F.5020509@gmail.com>
References: <F11B686C-3D77-4406-8693-CFF57F91A47C@bigelow.org>
	<d0bffc4b-7aac-0d30-f67a-6a37dddc662c@mbacou.com>
	<F41F9292-4A25-4253-99AE-F068D27B14BD@bigelow.org>
	<57E6325F.5020509@gmail.com>
Message-ID: <B14014B4-1344-4A82-8EB1-C937477C7B70@bigelow.org>

Yes!  That's exactly what I am looking for.

Thanks and cheers,
Ben

> On Sep 24, 2016, at 3:59 AM, Tim Appelhans <tim.appelhans at gmail.com> wrote:
> 
> Is this producing what you want?
> 
> rasterVis::levelplot(xx, colorkey = list(at = at, labels = labels))
> 
> colorkey takes a list of arguments, including at and labels. This way it can be differentiated from the at passed to levelplot itself.
> 
> Tim
> 
> On 24.09.2016 02:59, Ben Tupper wrote:
>> Hi Melanie,
>> 
>> Thanks for this.  I tried that approach by adding layers with the latticeExtra package - no joy yet.  My lattice skills are a bit wobbly - but I have The Good Books in hand so I'll keep noodling around and may prevail yet.
>> 
>> https://www.r-project.org/doc/bib/R-books_bib.html#R:Sarkar:2008
>> https://www.r-project.org/doc/bib/R-books_bib.html#R:Bivand+Pebesma+Gomez-Rubio:2008
>> http://oscarperpinan.github.io/spacetime-vis/
>> 
>> Cheers,
>> Ben
>> 
>>> On Sep 23, 2016, at 12:55 PM, Bacou, Melanie <mel at mbacou.com> wrote:
>>> 
>>> Here is a stump that might also work with levelplot():
>>> 
>>> # Plot raster with no scalebar first
>>> raster::plot(r, col=vector_of_colors, legend=FALSE, axes=FALSE)
>>> 
>>> # Add a custom scalebar
>>> raster::plot(r, legend.only=TRUE,
>>>  col=vector_of_colors,
>>>  axis.args=list(at=1:length(vector_of_labels), labels=vector_of_labels)
>>> 
>>> 
>>> On 9/23/2016 12:11 PM, Ben Tupper wrote:
>>>> Hi,
>>>> 
>>>> I would like to specify the labels drawn on the scalebar for a multi-raster plot.  I have seen this exchange (and try to replicate for multiple rasters below)
>>>> 
>>>> https://stat.ethz.ch/pipermail/r-help/2011-August/286705.html
>>>> 
>>>> I can't make that work with rasterVis::levelplot()
>>>> 
>>>> # start preparatory
>>>> library(raster)
>>>> library(rasterVis)
>>>> 
>>>> x <- raster::raster(volcano,
>>>> 	crs = '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0',
>>>> 	xmn = -45, xmx = -40, ymn = 39, ymx = 47)
>>>> xx <- addLayer(x,x,x)
>>>> 
>>>> at <- seq(90, 200, length = 10)
>>>> labels <- rep(" ", length(at))
>>>> labels[1] <- "low"
>>>> labels[length(labels)] <- "high"
>>>> # end preparatory
>>>> 
>>>> # try as in help exchange above - ticks are labeled with numerics
>>>> rasterVis::levelplot(xx,
>>>>      colorkey = list(at = at),
>>>>      labels = list(labels = labels, at = at) )
>>>> 
>>>> # try as described in ?rasterVis::levelplot section for labels
>>>> # ticks still labeled with numerics
>>>> rasterVis::levelplot(xx,
>>>> 	at = at,
>>>>  	labels = labels )
>>>> 
>>>> I'm stumped!  How do I control the tick labels on a scalebar?
>>>> 
>>>> Thanks!
>>>> Ben
>>>> 
>>>> 
>>>>> sessionInfo()
>>>> R version 3.3.1 (2016-06-21)
>>>> Platform: x86_64-apple-darwin13.4.0 (64-bit)
>>>> Running under: OS X 10.11.6 (El Capitan)
>>>> 
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> other attached packages:
>>>> [1] rasterVis_0.40      latticeExtra_0.6-28 RColorBrewer_1.1-2  lattice_0.20-33
>>>> [5] raster_2.5-8        sp_1.2-3
>>>> 
>>>> loaded via a namespace (and not attached):
>>>> [1] zoo_1.7-13        rgdal_1.1-10      parallel_3.3.1    hexbin_1.27.1
>>>> [5] Rcpp_0.12.6       grid_3.3.1        viridisLite_0.1.3
>>>> 
>>>> 
>>>> Ben Tupper
>>>> Bigelow Laboratory for Ocean Sciences
>>>> 60 Bigelow Drive, P.O. Box 380
>>>> East Boothbay, Maine 04544
>>>> http://www.bigelow.org
>>>> 
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> Ben Tupper
>> Bigelow Laboratory for Ocean Sciences
>> 60 Bigelow Drive, P.O. Box 380
>> East Boothbay, Maine 04544
>> http://www.bigelow.org
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> -- 
> #####################################
> Tim Appelhans
> Department of Geography
> Environmental Informatics
> Philipps Universit?t Marburg
> Deutschhausstra?e 12
> Raum 00A08
> 35032 Marburg (Paketpost: 35037 Marburg)
> Germany
> 
> Tel +49 (0) 6421 28-25957
> 
> http://environmentalinformatics-marburg.de/
> 

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org


From nickeubank at gmail.com  Sat Sep 24 18:01:19 2016
From: nickeubank at gmail.com (Nick Eubank)
Date: Sat, 24 Sep 2016 16:01:19 +0000
Subject: [R-sig-Geo] dotsInPolys sometimes not generating correct number
 of points
In-Reply-To: <alpine.LFD.2.20.1609241128440.11778@reclus.nhh.no>
References: <CAFWQgOn0wMpLq8OgTxA4M-o-BbBfuCZR9L-rFL2QLAWoq0nEYg@mail.gmail.com>
	<alpine.LFD.2.20.1609241128440.11778@reclus.nhh.no>
Message-ID: <CAFWQgO=vRe8au8NWXAzMJ-BcGe8ciE21ezuKU63y6AO_Xn=9nA@mail.gmail.com>

Hi Roger,

Thanks for explaining. This isn't for maps -- it's for statistical analyses.
 My interest is in converting my polygons to points so I can do some
point-statistic calculations on the distribution of people (the points I'm
adding in each polygon). I have a lot of small polygons (with large
variation in the number of points in each), so I think the point pattern
will be relatively well preserved (at least on scales I care about) if I
uniformly distribute points within each polygon.  Thus the magnitudes of
points that don't make sense for visualization.

Is there a magnitude of points where the function would perform reasonably?
i.e. is this an integer overflow problem or something where, if I stay
below a given number of points I can count on a set number of truly
randomly distributed points? Or do I need a different tool?

Relatedly, might I suggested that this is something that should be made
more clear in the documentation of the function? Right now, there's nothing
in the docs suggesting this only appropriate for visualization, or that it
only *approximately* creates a set of randomly distributed points, and
can't handle large N.

Thanks again,

Nick

On Sat, Sep 24, 2016 at 2:39 AM Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Sat, 24 Sep 2016, Nick Eubank wrote:
>
> > Hi All,
> >
> > Trying to run dotsInPolys from maptools on a set of polygons. I have one
> > set of polygons for each US state, along with a vector of desired points
> > for each polygon.
> >
> > However, when I check the number of dots created after running the code,
> I
> > find that for some states -- but not all -- the number of points doesn't
> > match the number of dots that were specified. In particular, I seem to
> have
> > fewer dots than expected.
>
> maptools::dotsinpolys() was written for visualization only (so the number
> of points could be apprpoximate), a long time ago, and wraps looped calls
> to sp::spsample() methods. Look at sp::spsample() to see that it tries to
> sub-divide the number of random sample points among rings, but when a
> Polygons object has many member Polygon objects, and they have awkward
> geometries, it will struggle to get to the right number, iterating by
> default 4 times to increase the density within the bounding box of the
> Polygon object. maptools::dotsinpolys() doesn't pass through the tuning
> arguments to sp::spsample(), but you could. I'm really uncertain how
> visiulizing thousands of polygons works, same for millions of random
> points.
>
> Hope this clarifies,
>
> Roger
>
> >
> > Paraphrasing somewhat (haven't come up with a minimal replicating
> example I
> > can post, sorry), I have a polygon file called `my.polygons`, and I'm
> > effectively doing the following:
> >
> >    my.dots <- dotsInPolys(my.polygons, my.polygons[,'count.vector'])
> >
> > I've confirmed that `typeof(my.polygons[,'count.vector'])` is
> `"integer"`,
> > and get no warnings running dotsInPolys. Nevertheless, for many states, I
> > get FALSE from:
> >
> >    length(my.dots) == sum(my.polygons$count.vector)
> >
> > There are no NAs in the count vector.
> >
> > No zero-area polygons. using rgeos, one state that is having problems
> > reports areas of:
> >
> >    summary(gArea(my.polygons, byid=TRUE))
> >        Min.   1st Qu.    Median      Mean   3rd Qu.      Max.
> >        1.474e+04 9.858e+05 4.264e+06 3.189e+07 3.159e+07 1.144e+09
> >
> > I also get `gIsValid(my.polygons)` is TRUE, so it's not that...
> >
> > It seems like I get more problems in states with more polygons / counts,
> if
> > that's at all informative. For example, one problem state has 3,671
> > polygons, and should have 634,397 points, but only ends up with 632,474.
> > Another with 6,983 polygons should have 3,942,589 points, but has
> > only 3,840,180. By contrast, no problems in a state with 343 polygons
> > and 120,397 points.
> >
> > Any suggestions on possible cause?
> >
> > Thanks,
> >
> > Nick
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 91 00
> e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> http://depsy.org/person/434412

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Sat Sep 24 20:11:26 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 24 Sep 2016 20:11:26 +0200
Subject: [R-sig-Geo] dotsInPolys sometimes not generating correct number
 of points
In-Reply-To: <CAFWQgO=vRe8au8NWXAzMJ-BcGe8ciE21ezuKU63y6AO_Xn=9nA@mail.gmail.com>
References: <CAFWQgOn0wMpLq8OgTxA4M-o-BbBfuCZR9L-rFL2QLAWoq0nEYg@mail.gmail.com>
	<alpine.LFD.2.20.1609241128440.11778@reclus.nhh.no>
	<CAFWQgO=vRe8au8NWXAzMJ-BcGe8ciE21ezuKU63y6AO_Xn=9nA@mail.gmail.com>
Message-ID: <alpine.LFD.2.20.1609242006230.16034@reclus.nhh.no>

On Sat, 24 Sep 2016, Nick Eubank wrote:

> Hi Roger,
>
> Thanks for explaining. This isn't for maps -- it's for statistical analyses.
> My interest is in converting my polygons to points so I can do some
> point-statistic calculations on the distribution of people (the points I'm
> adding in each polygon). I have a lot of small polygons (with large
> variation in the number of points in each), so I think the point pattern
> will be relatively well preserved (at least on scales I care about) if I
> uniformly distribute points within each polygon.  Thus the magnitudes of
> points that don't make sense for visualization.
>
> Is there a magnitude of points where the function would perform reasonably?
> i.e. is this an integer overflow problem or something where, if I stay
> below a given number of points I can count on a set number of truly
> randomly distributed points? Or do I need a different tool?

Try to use spsample directly on a small subset of polygons to see whether 
you need to increase the iter= argument radically. If you have lots of 
oddish polygons that are very different in shape to 
vertically-oriented rectangles, you are going to need lots of tries. Find 
the answer for the small subset of polygons and scale up from there. 
sp::spsample() takes a sample in the bounding box of the polygon, drops 
points falling outside the polygon, and goes on trying until the effort 
feels pointless - you'd need to tell it to carry on to the bitter end. 
Look at the relevant code for the methods, and work out where it is 
bailing out - probably not scale, more likely oddish polygons.

Roger

>
> Relatedly, might I suggested that this is something that should be made
> more clear in the documentation of the function? Right now, there's nothing
> in the docs suggesting this only appropriate for visualization, or that it
> only *approximately* creates a set of randomly distributed points, and
> can't handle large N.
>
> Thanks again,
>
> Nick
>
> On Sat, Sep 24, 2016 at 2:39 AM Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Sat, 24 Sep 2016, Nick Eubank wrote:
>>
>>> Hi All,
>>>
>>> Trying to run dotsInPolys from maptools on a set of polygons. I have one
>>> set of polygons for each US state, along with a vector of desired points
>>> for each polygon.
>>>
>>> However, when I check the number of dots created after running the code,
>> I
>>> find that for some states -- but not all -- the number of points doesn't
>>> match the number of dots that were specified. In particular, I seem to
>> have
>>> fewer dots than expected.
>>
>> maptools::dotsinpolys() was written for visualization only (so the number
>> of points could be apprpoximate), a long time ago, and wraps looped calls
>> to sp::spsample() methods. Look at sp::spsample() to see that it tries to
>> sub-divide the number of random sample points among rings, but when a
>> Polygons object has many member Polygon objects, and they have awkward
>> geometries, it will struggle to get to the right number, iterating by
>> default 4 times to increase the density within the bounding box of the
>> Polygon object. maptools::dotsinpolys() doesn't pass through the tuning
>> arguments to sp::spsample(), but you could. I'm really uncertain how
>> visiulizing thousands of polygons works, same for millions of random
>> points.
>>
>> Hope this clarifies,
>>
>> Roger
>>
>>>
>>> Paraphrasing somewhat (haven't come up with a minimal replicating
>> example I
>>> can post, sorry), I have a polygon file called `my.polygons`, and I'm
>>> effectively doing the following:
>>>
>>>    my.dots <- dotsInPolys(my.polygons, my.polygons[,'count.vector'])
>>>
>>> I've confirmed that `typeof(my.polygons[,'count.vector'])` is
>> `"integer"`,
>>> and get no warnings running dotsInPolys. Nevertheless, for many states, I
>>> get FALSE from:
>>>
>>>    length(my.dots) == sum(my.polygons$count.vector)
>>>
>>> There are no NAs in the count vector.
>>>
>>> No zero-area polygons. using rgeos, one state that is having problems
>>> reports areas of:
>>>
>>>    summary(gArea(my.polygons, byid=TRUE))
>>>        Min.   1st Qu.    Median      Mean   3rd Qu.      Max.
>>>        1.474e+04 9.858e+05 4.264e+06 3.189e+07 3.159e+07 1.144e+09
>>>
>>> I also get `gIsValid(my.polygons)` is TRUE, so it's not that...
>>>
>>> It seems like I get more problems in states with more polygons / counts,
>> if
>>> that's at all informative. For example, one problem state has 3,671
>>> polygons, and should have 634,397 points, but only ends up with 632,474.
>>> Another with 6,983 polygons should have 3,942,589 points, but has
>>> only 3,840,180. By contrast, no problems in a state with 343 polygons
>>> and 120,397 points.
>>>
>>> Any suggestions on possible cause?
>>>
>>> Thanks,
>>>
>>> Nick
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 91 00
>> e-mail: Roger.Bivand at nhh.no
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> http://depsy.org/person/434412
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412


From nickeubank at gmail.com  Sun Sep 25 22:34:53 2016
From: nickeubank at gmail.com (Nick Eubank)
Date: Sun, 25 Sep 2016 20:34:53 +0000
Subject: [R-sig-Geo] dotsInPolys sometimes not generating correct number
 of points
In-Reply-To: <alpine.LFD.2.20.1609242006230.16034@reclus.nhh.no>
References: <CAFWQgOn0wMpLq8OgTxA4M-o-BbBfuCZR9L-rFL2QLAWoq0nEYg@mail.gmail.com>
	<alpine.LFD.2.20.1609241128440.11778@reclus.nhh.no>
	<CAFWQgO=vRe8au8NWXAzMJ-BcGe8ciE21ezuKU63y6AO_Xn=9nA@mail.gmail.com>
	<alpine.LFD.2.20.1609242006230.16034@reclus.nhh.no>
Message-ID: <CAFWQgOkKtGL-pop+y+cN3_3k4cOX9WSna_PyNXfATLZPkKsdmw@mail.gmail.com>

Thanks Roger -- that makes sense. I'll look into it!

Is maptools on git? Seems easiest fix would be to add a `max.iter`
parameter to the function.

On Sat, Sep 24, 2016 at 11:13 AM Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Sat, 24 Sep 2016, Nick Eubank wrote:
>
> > Hi Roger,
> >
> > Thanks for explaining. This isn't for maps -- it's for statistical
> analyses.
> > My interest is in converting my polygons to points so I can do some
> > point-statistic calculations on the distribution of people (the points
> I'm
> > adding in each polygon). I have a lot of small polygons (with large
> > variation in the number of points in each), so I think the point pattern
> > will be relatively well preserved (at least on scales I care about) if I
> > uniformly distribute points within each polygon.  Thus the magnitudes of
> > points that don't make sense for visualization.
> >
> > Is there a magnitude of points where the function would perform
> reasonably?
> > i.e. is this an integer overflow problem or something where, if I stay
> > below a given number of points I can count on a set number of truly
> > randomly distributed points? Or do I need a different tool?
>
> Try to use spsample directly on a small subset of polygons to see whether
> you need to increase the iter= argument radically. If you have lots of
> oddish polygons that are very different in shape to
> vertically-oriented rectangles, you are going to need lots of tries. Find
> the answer for the small subset of polygons and scale up from there.
> sp::spsample() takes a sample in the bounding box of the polygon, drops
> points falling outside the polygon, and goes on trying until the effort
> feels pointless - you'd need to tell it to carry on to the bitter end.
> Look at the relevant code for the methods, and work out where it is
> bailing out - probably not scale, more likely oddish polygons.
>
> Roger
>
> >
> > Relatedly, might I suggested that this is something that should be made
> > more clear in the documentation of the function? Right now, there's
> nothing
> > in the docs suggesting this only appropriate for visualization, or that
> it
> > only *approximately* creates a set of randomly distributed points, and
> > can't handle large N.
> >
> > Thanks again,
> >
> > Nick
> >
> > On Sat, Sep 24, 2016 at 2:39 AM Roger Bivand <Roger.Bivand at nhh.no>
> wrote:
> >
> >> On Sat, 24 Sep 2016, Nick Eubank wrote:
> >>
> >>> Hi All,
> >>>
> >>> Trying to run dotsInPolys from maptools on a set of polygons. I have
> one
> >>> set of polygons for each US state, along with a vector of desired
> points
> >>> for each polygon.
> >>>
> >>> However, when I check the number of dots created after running the
> code,
> >> I
> >>> find that for some states -- but not all -- the number of points
> doesn't
> >>> match the number of dots that were specified. In particular, I seem to
> >> have
> >>> fewer dots than expected.
> >>
> >> maptools::dotsinpolys() was written for visualization only (so the
> number
> >> of points could be apprpoximate), a long time ago, and wraps looped
> calls
> >> to sp::spsample() methods. Look at sp::spsample() to see that it tries
> to
> >> sub-divide the number of random sample points among rings, but when a
> >> Polygons object has many member Polygon objects, and they have awkward
> >> geometries, it will struggle to get to the right number, iterating by
> >> default 4 times to increase the density within the bounding box of the
> >> Polygon object. maptools::dotsinpolys() doesn't pass through the tuning
> >> arguments to sp::spsample(), but you could. I'm really uncertain how
> >> visiulizing thousands of polygons works, same for millions of random
> >> points.
> >>
> >> Hope this clarifies,
> >>
> >> Roger
> >>
> >>>
> >>> Paraphrasing somewhat (haven't come up with a minimal replicating
> >> example I
> >>> can post, sorry), I have a polygon file called `my.polygons`, and I'm
> >>> effectively doing the following:
> >>>
> >>>    my.dots <- dotsInPolys(my.polygons, my.polygons[,'count.vector'])
> >>>
> >>> I've confirmed that `typeof(my.polygons[,'count.vector'])` is
> >> `"integer"`,
> >>> and get no warnings running dotsInPolys. Nevertheless, for many
> states, I
> >>> get FALSE from:
> >>>
> >>>    length(my.dots) == sum(my.polygons$count.vector)
> >>>
> >>> There are no NAs in the count vector.
> >>>
> >>> No zero-area polygons. using rgeos, one state that is having problems
> >>> reports areas of:
> >>>
> >>>    summary(gArea(my.polygons, byid=TRUE))
> >>>        Min.   1st Qu.    Median      Mean   3rd Qu.      Max.
> >>>        1.474e+04 9.858e+05 4.264e+06 3.189e+07 3.159e+07 1.144e+09
> >>>
> >>> I also get `gIsValid(my.polygons)` is TRUE, so it's not that...
> >>>
> >>> It seems like I get more problems in states with more polygons /
> counts,
> >> if
> >>> that's at all informative. For example, one problem state has 3,671
> >>> polygons, and should have 634,397 points, but only ends up with
> 632,474.
> >>> Another with 6,983 polygons should have 3,942,589 points, but has
> >>> only 3,840,180. By contrast, no problems in a state with 343 polygons
> >>> and 120,397 points.
> >>>
> >>> Any suggestions on possible cause?
> >>>
> >>> Thanks,
> >>>
> >>> Nick
> >>>
> >>>       [[alternative HTML version deleted]]
> >>>
> >>> _______________________________________________
> >>> R-sig-Geo mailing list
> >>> R-sig-Geo at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>
> >>
> >> --
> >> Roger Bivand
> >> Department of Economics, Norwegian School of Economics,
> >> Helleveien 30, N-5045 Bergen, Norway.
> >> voice: +47 55 95 93 55; fax +47 55 95 91 00
> >> e-mail: Roger.Bivand at nhh.no
> >> http://orcid.org/0000-0003-2392-6140
> >> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> >> http://depsy.org/person/434412
> >
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 91 00
> e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> http://depsy.org/person/434412
>

	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Mon Sep 26 09:26:29 2016
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 26 Sep 2016 07:26:29 +0000
Subject: [R-sig-Geo] dotsInPolys sometimes not generating correct number
 of points
In-Reply-To: <CAFWQgOkKtGL-pop+y+cN3_3k4cOX9WSna_PyNXfATLZPkKsdmw@mail.gmail.com>
References: <CAFWQgOn0wMpLq8OgTxA4M-o-BbBfuCZR9L-rFL2QLAWoq0nEYg@mail.gmail.com>
	<alpine.LFD.2.20.1609241128440.11778@reclus.nhh.no>
	<CAFWQgO=vRe8au8NWXAzMJ-BcGe8ciE21ezuKU63y6AO_Xn=9nA@mail.gmail.com>
	<alpine.LFD.2.20.1609242006230.16034@reclus.nhh.no>,
	<CAFWQgOkKtGL-pop+y+cN3_3k4cOX9WSna_PyNXfATLZPkKsdmw@mail.gmail.com>
Message-ID: <4F58C8D16A2DF6F4.c2e944e1-e4d1-41ce-9eba-1ff05b159981@mail.outlook.com>

No, on R-forge. If you could provide a patch based on your resolution, I'd be grateful, but it isn't as simple as just passing through a larger iter, as that was in any case not an elegant kludge.

Best wishes,

Roger

Roger Bivand
Norwegian School of Economics
Bergen, Norway



On Mon, Sep 26, 2016 at 4:35 AM +0800, "Nick Eubank" <nickeubank at gmail.com<mailto:nickeubank at gmail.com>> wrote:

Thanks Roger -- that makes sense. I'll look into it!

Is maptools on git? Seems easiest fix would be to add a `max.iter` parameter to the function.

On Sat, Sep 24, 2016 at 11:13 AM Roger Bivand <Roger.Bivand at nhh.no<mailto:Roger.Bivand at nhh.no>> wrote:
On Sat, 24 Sep 2016, Nick Eubank wrote:

> Hi Roger,
>
> Thanks for explaining. This isn't for maps -- it's for statistical analyses.
> My interest is in converting my polygons to points so I can do some
> point-statistic calculations on the distribution of people (the points I'm
> adding in each polygon). I have a lot of small polygons (with large
> variation in the number of points in each), so I think the point pattern
> will be relatively well preserved (at least on scales I care about) if I
> uniformly distribute points within each polygon.  Thus the magnitudes of
> points that don't make sense for visualization.
>
> Is there a magnitude of points where the function would perform reasonably?
> i.e. is this an integer overflow problem or something where, if I stay
> below a given number of points I can count on a set number of truly
> randomly distributed points? Or do I need a different tool?

Try to use spsample directly on a small subset of polygons to see whether
you need to increase the iter= argument radically. If you have lots of
oddish polygons that are very different in shape to
vertically-oriented rectangles, you are going to need lots of tries. Find
the answer for the small subset of polygons and scale up from there.
sp::spsample() takes a sample in the bounding box of the polygon, drops
points falling outside the polygon, and goes on trying until the effort
feels pointless - you'd need to tell it to carry on to the bitter end.
Look at the relevant code for the methods, and work out where it is
bailing out - probably not scale, more likely oddish polygons.

Roger

>
> Relatedly, might I suggested that this is something that should be made
> more clear in the documentation of the function? Right now, there's nothing
> in the docs suggesting this only appropriate for visualization, or that it
> only *approximately* creates a set of randomly distributed points, and
> can't handle large N.
>
> Thanks again,
>
> Nick
>
> On Sat, Sep 24, 2016 at 2:39 AM Roger Bivand <Roger.Bivand at nhh.no<mailto:Roger.Bivand at nhh.no>> wrote:
>
>> On Sat, 24 Sep 2016, Nick Eubank wrote:
>>
>>> Hi All,
>>>
>>> Trying to run dotsInPolys from maptools on a set of polygons. I have one
>>> set of polygons for each US state, along with a vector of desired points
>>> for each polygon.
>>>
>>> However, when I check the number of dots created after running the code,
>> I
>>> find that for some states -- but not all -- the number of points doesn't
>>> match the number of dots that were specified. In particular, I seem to
>> have
>>> fewer dots than expected.
>>
>> maptools::dotsinpolys() was written for visualization only (so the number
>> of points could be apprpoximate), a long time ago, and wraps looped calls
>> to sp::spsample() methods. Look at sp::spsample() to see that it tries to
>> sub-divide the number of random sample points among rings, but when a
>> Polygons object has many member Polygon objects, and they have awkward
>> geometries, it will struggle to get to the right number, iterating by
>> default 4 times to increase the density within the bounding box of the
>> Polygon object. maptools::dotsinpolys() doesn't pass through the tuning
>> arguments to sp::spsample(), but you could. I'm really uncertain how
>> visiulizing thousands of polygons works, same for millions of random
>> points.
>>
>> Hope this clarifies,
>>
>> Roger
>>
>>>
>>> Paraphrasing somewhat (haven't come up with a minimal replicating
>> example I
>>> can post, sorry), I have a polygon file called `my.polygons`, and I'm
>>> effectively doing the following:
>>>
>>>    my.dots <- dotsInPolys(my.polygons, my.polygons[,'count.vector'])
>>>
>>> I've confirmed that `typeof(my.polygons[,'count.vector'])` is
>> `"integer"`,
>>> and get no warnings running dotsInPolys. Nevertheless, for many states, I
>>> get FALSE from:
>>>
>>>    length(my.dots) == sum(my.polygons$count.vector)
>>>
>>> There are no NAs in the count vector.
>>>
>>> No zero-area polygons. using rgeos, one state that is having problems
>>> reports areas of:
>>>
>>>    summary(gArea(my.polygons, byid=TRUE))
>>>        Min.   1st Qu.    Median      Mean   3rd Qu.      Max.
>>>        1.474e+04 9.858e+05 4.264e+06 3.189e+07 3.159e+07 1.144e+09
>>>
>>> I also get `gIsValid(my.polygons)` is TRUE, so it's not that...
>>>
>>> It seems like I get more problems in states with more polygons / counts,
>> if
>>> that's at all informative. For example, one problem state has 3,671
>>> polygons, and should have 634,397 points, but only ends up with 632,474.
>>> Another with 6,983 polygons should have 3,942,589 points, but has
>>> only 3,840,180. By contrast, no problems in a state with 343 polygons
>>> and 120,397 points.
>>>
>>> Any suggestions on possible cause?
>>>
>>> Thanks,
>>>
>>> Nick
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 91 00
>> e-mail: Roger.Bivand at nhh.no<mailto:Roger.Bivand at nhh.no>
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> http://depsy.org/person/434412
>

--
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no<mailto:Roger.Bivand at nhh.no>
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
http://depsy.org/person/434412

	[[alternative HTML version deleted]]


From nickeubank at gmail.com  Mon Sep 26 18:57:23 2016
From: nickeubank at gmail.com (Nick Eubank)
Date: Mon, 26 Sep 2016 16:57:23 +0000
Subject: [R-sig-Geo] dotsInPolys sometimes not generating correct number
 of points
In-Reply-To: <4F58C8D16A2DF6F4.c2e944e1-e4d1-41ce-9eba-1ff05b159981@mail.outlook.com>
References: <CAFWQgOn0wMpLq8OgTxA4M-o-BbBfuCZR9L-rFL2QLAWoq0nEYg@mail.gmail.com>
	<alpine.LFD.2.20.1609241128440.11778@reclus.nhh.no>
	<CAFWQgO=vRe8au8NWXAzMJ-BcGe8ciE21ezuKU63y6AO_Xn=9nA@mail.gmail.com>
	<alpine.LFD.2.20.1609242006230.16034@reclus.nhh.no>
	<CAFWQgOkKtGL-pop+y+cN3_3k4cOX9WSna_PyNXfATLZPkKsdmw@mail.gmail.com>
	<4F58C8D16A2DF6F4.c2e944e1-e4d1-41ce-9eba-1ff05b159981@mail.outlook.com>
Message-ID: <CAFWQgOnSQfZPT5x+cZD4Z5K1s79+txFnjxB7vMDyK0XJynLhww@mail.gmail.com>

I'll take a look. Never worked with R-forge, though, so no promises! :)

On Mon, Sep 26, 2016 at 12:26 AM Roger Bivand <Roger.Bivand at nhh.no> wrote:

> No, on R-forge. If you could provide a patch based on your resolution, I'd
> be grateful, but it isn't as simple as just passing through a larger iter,
> as that was in any case not an elegant kludge.
>
> Best wishes,
>
> Roger
>
> Roger Bivand
> Norwegian School of Economics
> Bergen, Norway
>
>
>
> On Mon, Sep 26, 2016 at 4:35 AM +0800, "Nick Eubank" <nickeubank at gmail.com
> > wrote:
>
> Thanks Roger -- that makes sense. I'll look into it!
>
> Is maptools on git? Seems easiest fix would be to add a `max.iter`
> parameter to the function.
>
> On Sat, Sep 24, 2016 at 11:13 AM Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
>> On Sat, 24 Sep 2016, Nick Eubank wrote:
>>
>> > Hi Roger,
>> >
>> > Thanks for explaining. This isn't for maps -- it's for statistical
>> analyses.
>> > My interest is in converting my polygons to points so I can do some
>> > point-statistic calculations on the distribution of people (the points
>> I'm
>> > adding in each polygon). I have a lot of small polygons (with large
>> > variation in the number of points in each), so I think the point pattern
>> > will be relatively well preserved (at least on scales I care about) if I
>> > uniformly distribute points within each polygon.  Thus the magnitudes of
>> > points that don't make sense for visualization.
>> >
>> > Is there a magnitude of points where the function would perform
>> reasonably?
>> > i.e. is this an integer overflow problem or something where, if I stay
>> > below a given number of points I can count on a set number of truly
>> > randomly distributed points? Or do I need a different tool?
>>
>> Try to use spsample directly on a small subset of polygons to see whether
>> you need to increase the iter= argument radically. If you have lots of
>> oddish polygons that are very different in shape to
>> vertically-oriented rectangles, you are going to need lots of tries. Find
>> the answer for the small subset of polygons and scale up from there.
>> sp::spsample() takes a sample in the bounding box of the polygon, drops
>> points falling outside the polygon, and goes on trying until the effort
>> feels pointless - you'd need to tell it to carry on to the bitter end.
>> Look at the relevant code for the methods, and work out where it is
>> bailing out - probably not scale, more likely oddish polygons.
>>
>> Roger
>>
>> >
>> > Relatedly, might I suggested that this is something that should be made
>> > more clear in the documentation of the function? Right now, there's
>> nothing
>> > in the docs suggesting this only appropriate for visualization, or that
>> it
>> > only *approximately* creates a set of randomly distributed points, and
>> > can't handle large N.
>> >
>> > Thanks again,
>> >
>> > Nick
>> >
>> > On Sat, Sep 24, 2016 at 2:39 AM Roger Bivand <Roger.Bivand at nhh.no>
>> wrote:
>> >
>> >> On Sat, 24 Sep 2016, Nick Eubank wrote:
>> >>
>> >>> Hi All,
>> >>>
>> >>> Trying to run dotsInPolys from maptools on a set of polygons. I have
>> one
>> >>> set of polygons for each US state, along with a vector of desired
>> points
>> >>> for each polygon.
>> >>>
>> >>> However, when I check the number of dots created after running the
>> code,
>> >> I
>> >>> find that for some states -- but not all -- the number of points
>> doesn't
>> >>> match the number of dots that were specified. In particular, I seem to
>> >> have
>> >>> fewer dots than expected.
>> >>
>> >> maptools::dotsinpolys() was written for visualization only (so the
>> number
>> >> of points could be apprpoximate), a long time ago, and wraps looped
>> calls
>> >> to sp::spsample() methods. Look at sp::spsample() to see that it tries
>> to
>> >> sub-divide the number of random sample points among rings, but when a
>> >> Polygons object has many member Polygon objects, and they have awkward
>> >> geometries, it will struggle to get to the right number, iterating by
>> >> default 4 times to increase the density within the bounding box of the
>> >> Polygon object. maptools::dotsinpolys() doesn't pass through the tuning
>> >> arguments to sp::spsample(), but you could. I'm really uncertain how
>> >> visiulizing thousands of polygons works, same for millions of random
>> >> points.
>> >>
>> >> Hope this clarifies,
>> >>
>> >> Roger
>> >>
>> >>>
>> >>> Paraphrasing somewhat (haven't come up with a minimal replicating
>> >> example I
>> >>> can post, sorry), I have a polygon file called `my.polygons`, and I'm
>> >>> effectively doing the following:
>> >>>
>> >>>    my.dots <- dotsInPolys(my.polygons, my.polygons[,'count.vector'])
>> >>>
>> >>> I've confirmed that `typeof(my.polygons[,'count.vector'])` is
>> >> `"integer"`,
>> >>> and get no warnings running dotsInPolys. Nevertheless, for many
>> states, I
>> >>> get FALSE from:
>> >>>
>> >>>    length(my.dots) == sum(my.polygons$count.vector)
>> >>>
>> >>> There are no NAs in the count vector.
>> >>>
>> >>> No zero-area polygons. using rgeos, one state that is having problems
>> >>> reports areas of:
>> >>>
>> >>>    summary(gArea(my.polygons, byid=TRUE))
>> >>>        Min.   1st Qu.    Median      Mean   3rd Qu.      Max.
>> >>>        1.474e+04 9.858e+05 4.264e+06 3.189e+07 3.159e+07 1.144e+09
>> >>>
>> >>> I also get `gIsValid(my.polygons)` is TRUE, so it's not that...
>> >>>
>> >>> It seems like I get more problems in states with more polygons /
>> counts,
>> >> if
>> >>> that's at all informative. For example, one problem state has 3,671
>> >>> polygons, and should have 634,397 points, but only ends up with
>> 632,474.
>> >>> Another with 6,983 polygons should have 3,942,589 points, but has
>> >>> only 3,840,180. By contrast, no problems in a state with 343 polygons
>> >>> and 120,397 points.
>> >>>
>> >>> Any suggestions on possible cause?
>> >>>
>> >>> Thanks,
>> >>>
>> >>> Nick
>> >>>
>> >>>       [[alternative HTML version deleted]]
>> >>>
>> >>> _______________________________________________
>> >>> R-sig-Geo mailing list
>> >>> R-sig-Geo at r-project.org
>> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >>>
>> >>
>> >> --
>> >> Roger Bivand
>> >> Department of Economics, Norwegian School of Economics,
>> >> Helleveien 30, N-5045 Bergen, Norway.
>> >> voice: +47 55 95 93 55; fax +47 55 95 91 00
>> >> e-mail: Roger.Bivand at nhh.no
>> >> http://orcid.org/0000-0003-2392-6140
>> >> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> >> http://depsy.org/person/434412
>> >
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 91 00
>> e-mail: Roger.Bivand at nhh.no
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> http://depsy.org/person/434412
>>
>

	[[alternative HTML version deleted]]


From martin.gubri at framasoft.org  Wed Sep 28 05:23:18 2016
From: martin.gubri at framasoft.org (Martin)
Date: Wed, 28 Sep 2016 00:23:18 -0300
Subject: [R-sig-Geo] spdep lagsarlm regression error
In-Reply-To: <CAFXoe8vJw3TgypmndJUgDJXo5ss0Abpn=M6JG68R3JA8CTe8-w@mail.gmail.com>
References: <CAFXoe8vJw3TgypmndJUgDJXo5ss0Abpn=M6JG68R3JA8CTe8-w@mail.gmail.com>
Message-ID: <67e63e77-93a9-ee4f-6247-28b1ab264025@framasoft.org>

> It produces the following error.
> Error: length(listw$neighbours) == n is not TRUE


Do you have NA values in your dataframe 'mex'? The problem may be that
using the option 'na.action=na.omit', lagsarlm() subsets the listw
object, then the impact() function is waiting for the listw object of
the subset. So, you may want to try to subset your W object, just before
calling impact().
Also I recommend that you check that your data are in the same order
that your listw object:

> identical(attr(W, 'region.id'), rownames(sar.mex$X))
> identical(attr(W, 'region.id'), names(sar.mex$y))


From najar at ualberta.ca  Wed Sep 28 21:07:19 2016
From: najar at ualberta.ca (Ahmed Najar)
Date: Wed, 28 Sep 2016 13:07:19 -0600
Subject: [R-sig-Geo] Converting csv files to SpatialPolygonsDataFrame
Message-ID: <CAKfzDmWzkpZbuZazsAF7AKzr2Cs=uNiYdQ8EpekUz2zEdCnwzA@mail.gmail.com>

I was trying to convert a csv file to SpatialPolygonsDataFrame and I was
encountering several problems. Would you have any case study that I could
follow.

I used this script and keep getting the following error

> AB <- read.csv("map_AB.csv")> AB=na.omit(AB)> X = SpatialPolygonsDataFrame(AB[,1:2], data = AB)Error in SpatialPolygonsDataFrame(AB[, 1:2], data = AB) :
  trying to get slot "polygons" from an object (class "data.frame")
that is not an S4 object



Most grateful for any help.

Cheers,

Ahmed

	[[alternative HTML version deleted]]


From thierry.onkelinx at inbo.be  Thu Sep 29 10:59:47 2016
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Thu, 29 Sep 2016 10:59:47 +0200
Subject: [R-sig-Geo] Converting csv files to SpatialPolygonsDataFrame
In-Reply-To: <CAKfzDmWzkpZbuZazsAF7AKzr2Cs=uNiYdQ8EpekUz2zEdCnwzA@mail.gmail.com>
References: <CAKfzDmWzkpZbuZazsAF7AKzr2Cs=uNiYdQ8EpekUz2zEdCnwzA@mail.gmail.com>
Message-ID: <CAJuCY5yoxFprbKkD+z64qbbhvGnTWopseLZSKoXTHD+uPKtR=A@mail.gmail.com>

Dear Ahmed,

A SpatialPolygons object is more complex than just a set of coordinates. I
suggest that you read the helpfile of SpatialPolygonsDataFrame. The example
in the helpfile for the SpatialPolygonsDataFrame class should be clear
enough.

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2016-09-28 21:07 GMT+02:00 Ahmed Najar <najar at ualberta.ca>:

> I was trying to convert a csv file to SpatialPolygonsDataFrame and I was
> encountering several problems. Would you have any case study that I could
> follow.
>
> I used this script and keep getting the following error
>
> > AB <- read.csv("map_AB.csv")> AB=na.omit(AB)> X =
> SpatialPolygonsDataFrame(AB[,1:2], data = AB)Error in
> SpatialPolygonsDataFrame(AB[, 1:2], data = AB) :
>   trying to get slot "polygons" from an object (class "data.frame")
> that is not an S4 object
>
>
>
> Most grateful for any help.
>
> Cheers,
>
> Ahmed
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From tom.hengl at gmail.com  Thu Sep 29 13:28:05 2016
From: tom.hengl at gmail.com (Tomislav Hengl)
Date: Thu, 29 Sep 2016 13:28:05 +0200
Subject: [R-sig-Geo] Global potential natural vegetation at 1km?
Message-ID: <6124ce51-9cd4-9864-11c9-aba73792aa6f@gmail.com>

Dear R-sig-geo,

I have been looking for an existing map of global PNV (potential natural 
vegetation) that we could maybe use global soil / biomass modelling. So 
far, I noticed only two data sources that could provide compatible data:

1. Levavasseur et al. 2012 
(http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019) uses 
http://www.bridge.bris.ac.uk/resources/Databases/BIOMES_data data set 
for model training,

2. Tian et al. 2015 
(http://www.nature.com/nature/journal/v531/n7593/full/nature16946.html)

However, both maps seem to refer to very coarse resolutions 10-50 km and 
I would prefer to use 1 km resolution data (not to mention that the 
legends are a mixture of general vegetation groups / vegetation-climate 
groups). For USA, much more detailed natural vegetation map is available 
(https://databasin.org/datasets/1c7a301c8e6843f2b4fe63fdb3a9fe39), but I 
guess nothing comparable is available for the whole world? Are you maybe 
aware of any such global maps representing e.g. plant communities 
(https://www.wikiwand.com/en/Plant_community)?

I might just try myself to derive global potential vegetation (plant 
communities) using e.g. GBIF data or the BIOME 6000 data and 
environmental covariates at 1 km. At least the training data seems to be 
available for modeling.

If you are aware of any similar project / initiative / data set please 
let me know.

-- 
T. (Tom) Hengl
Researcher @ ISRIC - World Soil Information
Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm 
<http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm>
Network: http://profiles.google.com/tom.hengl 
<http://profiles.google.com/tom.hengl>
Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ 
<http://scholar.google.com/citations?user=2oYU7S8AAAAJ>
ORCID ID: http://orcid.org/0000-0002-9921-5129 
<http://orcid.org/0000-0002-9921-5129>



	[[alternative HTML version deleted]]


From isaquedanielre at hotmail.com  Thu Sep 29 13:57:06 2016
From: isaquedanielre at hotmail.com (Isaque Daniel)
Date: Thu, 29 Sep 2016 11:57:06 +0000
Subject: [R-sig-Geo] Global potential natural vegetation at 1km?
In-Reply-To: <6124ce51-9cd4-9864-11c9-aba73792aa6f@gmail.com>
References: <6124ce51-9cd4-9864-11c9-aba73792aa6f@gmail.com>
Message-ID: <SN2PR20MB0784081EEE625AA018584A39C9CE0@SN2PR20MB0784.namprd20.prod.outlook.com>

Hi,
About Vegetation can you use the Tree Cover map, develop by Hansen team.


They use Landsat data to identify the tree cover coverage.


The research was published in Science journal.

Best
Isaque


https://earthenginepartners.appspot.com/science-2013-global-forest/download_v1.2.html

Global Forest Change - earthenginepartners.appspot.com<https://earthenginepartners.appspot.com/science-2013-global-forest/download_v1.2.html>
earthenginepartners.appspot.com
Global Forest Change 2000?2014 Data Download. Results from time-series analysis of Landsat images in characterizing global forest extent and change from 2000 ...




------------------------------------------------------------------------------------------------------------------
Eng. Agr. Isaque Daniel Rocha Eberhardt
Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais (INPE)
Doutorando em Transportes - Universidade de Bras??lia (UNB)
Mobile: +55 (061) 99015658
------------------------------------------------------------------------------------------------------------------
Agronomist engineer
Master in Remote Sensing - National  Institute for Space Research (INPE) - Brazil
PHD Student in Transport - Bras??lia University (UNB)


________________________________
De: R-sig-Geo <r-sig-geo-bounces at r-project.org> em nome de Tomislav Hengl <tom.hengl at gmail.com>
Enviado: quinta-feira, 29 de setembro de 2016 11:28
Para: r-sig-geo at r-project.org
Assunto: [R-sig-Geo] Global potential natural vegetation at 1km?

Dear R-sig-geo,

I have been looking for an existing map of global PNV (potential natural
vegetation) that we could maybe use global soil / biomass modelling. So
far, I noticed only two data sources that could provide compatible data:

1. Levavasseur et al. 2012
(http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019) uses
[http://cdn.iopscience.com/images/1748-9326/7/4/044019/Full/erl434553f1_online.jpg]<http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019>

Statistical modelling of a new global potential vegetation ...<http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019>
iopscience.iop.org
The potential natural vegetation (PNV) distribution is required for several studies in environmental sciences. Most of the available databases are quite subjective or ...


http://www.bridge.bris.ac.uk/resources/Databases/BIOMES_data data set
BRIDGE - Bristol University<http://www.bridge.bris.ac.uk/resources/Databases/BIOMES_data>
www.bridge.bris.ac.uk
1: Vegetation maps for the Mid-holocene and last Glacial Maximum. The Palaeovegetation Mapping Project (generally known as BIOME 6000: Prentice and Webb, 1998) was ...


for model training,

2. Tian et al. 2015
(http://www.nature.com/nature/journal/v531/n7593/full/nature16946.html)
The terrestrial biosphere as a net source of greenhouse ...<http://www.nature.com/nature/journal/v531/n7593/full/nature16946.html>
www.nature.com
The terrestrial biosphere can release or absorb the greenhouse gases, carbon dioxide (CO2), methane (CH4) and nitrous oxide (N2O), and therefore has an important role ...



However, both maps seem to refer to very coarse resolutions 10-50 km and
I would prefer to use 1 km resolution data (not to mention that the
legends are a mixture of general vegetation groups / vegetation-climate
groups). For USA, much more detailed natural vegetation map is available
(https://databasin.org/datasets/1c7a301c8e6843f2b4fe63fdb3a9fe39), but I
U.S. Potential Natural Vegetation, Original Kuchler Types ...<https://databasin.org/datasets/1c7a301c8e6843f2b4fe63fdb3a9fe39>
databasin.org
U.S. Potential Natural Vegetation, Original Kuchler Types, v2.0 (Spatially Adjusted to Correct Geometric Distortions)


guess nothing comparable is available for the whole world? Are you maybe
aware of any such global maps representing e.g. plant communities
(https://www.wikiwand.com/en/Plant_community)?

I might just try myself to derive global potential vegetation (plant
communities) using e.g. GBIF data or the BIOME 6000 data and
environmental covariates at 1 km. At least the training data seems to be
available for modeling.

If you are aware of any similar project / initiative / data set please
let me know.

--
T. (Tom) Hengl
Researcher @ ISRIC - World Soil Information
Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
<http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm>
Network: http://profiles.google.com/tom.hengl
<http://profiles.google.com/tom.hengl>
Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ
<http://scholar.google.com/citations?user=2oYU7S8AAAAJ>
ORCID ID: http://orcid.org/0000-0002-9921-5129
<http://orcid.org/0000-0002-9921-5129>



        [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


From mel at mbacou.com  Fri Sep 30 09:29:17 2016
From: mel at mbacou.com (Bacou, Melanie)
Date: Fri, 30 Sep 2016 03:29:17 -0400
Subject: [R-sig-Geo] Global potential natural vegetation at 1km?
Message-ID: <0aa2fb61-d3f7-b8a3-c6aa-188c891fa248@mbacou.com>

In addition, you could also take a look at IIASA global data:
http://www.iiasa.ac.at/web/home/research/modelsData/models-tools-data.html
--Mel.

>
> Hi,
> About Vegetation can you use the Tree Cover map, develop by Hansen team.
>
> They use Landsat data to identify the tree cover coverage.
>
> The research was published in Science journal.
>
> Best
> Isaque
>
> https://earthenginepartners.appspot.com/science-2013-global-forest/download_v1.2.html
>
> Global Forest Change - 
> earthenginepartners.appspot.com<https://earthenginepartners.appspot.com/science-2013-global-forest/download_v1.2.html>
> earthenginepartners.appspot.com
> Global Forest Change 2000?2014 Data Download. Results from time-series 
> analysis of Landsat images in characterizing global forest extent and 
> change from 2000 ...
>
>
> ------------------------------------------------------------------------------------------------------------------
> Eng. Agr. Isaque Daniel Rocha Eberhardt
> Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas 
> Espaciais (INPE)
> Doutorando em Transportes - Universidade de Bras??lia (UNB)
> Mobile: +55 (061) 99015658
> ------------------------------------------------------------------------------------------------------------------
> Agronomist engineer
> Master in Remote Sensing - National  Institute for Space Research 
> (INPE) - Brazil
> PHD Student in Transport - Bras??lia University (UNB)
>
> ________________________________
> De: R-sig-Geo <r-sig-geo-bounces at r-project.org> em nome de Tomislav 
> Hengl <tom.hengl at gmail.com>
> Enviado: quinta-feira, 29 de setembro de 2016 11:28
> Para: r-sig-geo at r-project.org
> Assunto: [R-sig-Geo] Global potential natural vegetation at 1km?
>
> Dear R-sig-geo,
>
> I have been looking for an existing map of global PNV (potential natural
> vegetation) that we could maybe use global soil / biomass modelling. So
> far, I noticed only two data sources that could provide compatible data:
>
> 1. Levavasseur et al. 2012
> (http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019) uses
> [http://cdn.iopscience.com/images/1748-9326/7/4/044019/Full/erl434553f1_online.jpg]<http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019>
>
> Statistical modelling of a new global potential vegetation 
> ...<http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019>
> iopscience.iop.org
> The potential natural vegetation (PNV) distribution is required for 
> several studies in environmental sciences. Most of the available 
> databases are quite subjective or ...
>
>
> http://www.bridge.bris.ac.uk/resources/Databases/BIOMES_data data set
> BRIDGE - Bristol 
> University<http://www.bridge.bris.ac.uk/resources/Databases/BIOMES_data>
> www.bridge.bris.ac.uk
> 1: Vegetation maps for the Mid-holocene and last Glacial Maximum. The 
> Palaeovegetation Mapping Project (generally known as BIOME 6000: 
> Prentice and Webb, 1998) was ...
>
>
> for model training,
>
> 2. Tian et al. 2015
> (http://www.nature.com/nature/journal/v531/n7593/full/nature16946.html)
> The terrestrial biosphere as a net source of greenhouse 
> ...<http://www.nature.com/nature/journal/v531/n7593/full/nature16946.html>
> www.nature.com
> The terrestrial biosphere can release or absorb the greenhouse gases, 
> carbon dioxide (CO2), methane (CH4) and nitrous oxide (N2O), and 
> therefore has an important role ...
>
> However, both maps seem to refer to very coarse resolutions 10-50 km and
> I would prefer to use 1 km resolution data (not to mention that the
> legends are a mixture of general vegetation groups / vegetation-climate
> groups). For USA, much more detailed natural vegetation map is available
> (https://databasin.org/datasets/1c7a301c8e6843f2b4fe63fdb3a9fe39), but I
> U.S. Potential Natural Vegetation, Original Kuchler Types 
> ...<https://databasin.org/datasets/1c7a301c8e6843f2b4fe63fdb3a9fe39>
> databasin.org
> U.S. Potential Natural Vegetation, Original Kuchler Types, v2.0 
> (Spatially Adjusted to Correct Geometric Distortions)
>
> guess nothing comparable is available for the whole world? Are you maybe
> aware of any such global maps representing e.g. plant communities
> (https://www.wikiwand.com/en/Plant_community)?
>
> I might just try myself to derive global potential vegetation (plant
> communities) using e.g. GBIF data or the BIOME 6000 data and
> environmental covariates at 1 km. At least the training data seems to be
> available for modeling.
>
> If you are aware of any similar project / initiative / data set please
> let me know.
>
> --
> T. (Tom) Hengl
> Researcher @ ISRIC - World Soil Information
> Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
> <http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm>
> Network: http://profiles.google.com/tom.hengl
> <http://profiles.google.com/tom.hengl>
> Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ
> <http://scholar.google.com/citations?user=2oYU7S8AAAAJ>
> ORCID ID: http://orcid.org/0000-0002-9921-5129
> <http://orcid.org/0000-0002-9921-5129>

-- 
Melanie BACOU
International Food Policy Research Institute
Snr. Program Manager, Spatial Data and Analytics
Work   +1(202)862-5699
E-mail m.bacou at cgiar.org
Visit  www.harvestchoice.org


From tom.hengl at gmail.com  Fri Sep 30 09:58:40 2016
From: tom.hengl at gmail.com (Tomislav Hengl)
Date: Fri, 30 Sep 2016 09:58:40 +0200
Subject: [R-sig-Geo] Global potential natural vegetation at 1km?
In-Reply-To: <SN2PR20MB0784081EEE625AA018584A39C9CE0@SN2PR20MB0784.namprd20.prod.outlook.com>
References: <6124ce51-9cd4-9864-11c9-aba73792aa6f@gmail.com>
	<SN2PR20MB0784081EEE625AA018584A39C9CE0@SN2PR20MB0784.namprd20.prod.outlook.com>
Message-ID: <CAC4wKHkMcS4OhadCpfCnERKW45rFkukfgLX9aNXbBh=gkiceKQ@mail.gmail.com>

Hi Isaque,

This would be the actual vegetation cover. Potential vegetation is about
extrapolating distribution of plant species, vegetation communities and/or
biomes to global land mass using ecological variables and training points
(natural/protected and/or historic sites). Correctly done by Levavasseur et
al. 2012, but I might do it at 1 km and with more covs. Unless it already
exists?

On 29 Sep 2016 13:58, "Isaque Daniel" <isaquedanielre at hotmail.com> wrote:

> Hi,
> About Vegetation can you use the Tree Cover map, develop by Hansen team.
>
>
> They use Landsat data to identify the tree cover coverage.
>
>
> The research was published in Science journal.
>
> Best
> Isaque
>
>
> https://earthenginepartners.appspot.com/science-2013-
> global-forest/download_v1.2.html
> Global Forest Change - earthenginepartners.appspot.com
> <https://earthenginepartners.appspot.com/science-2013-global-forest/download_v1.2.html>
> earthenginepartners.appspot.com
> Global Forest Change 2000?2014 Data Download. Results from time-series
> analysis of Landsat images in characterizing global forest extent and
> change from 2000 ...
>
>
> ------------------------------------------------------------
> ------------------------------------------------------
> Eng. Agr. Isaque Daniel Rocha Eberhardt
> Mestre em Sensoriamento Remoto - Instituto Nacional de Pesquisas Espaciais
> (INPE)
> Doutorando em Transportes - Universidade de Bras??lia (UNB)
> Mobile: +55 (061) 99015658
> ------------------------------------------------------------
> ------------------------------------------------------
> Agronomist engineer
> Master in Remote Sensing - National  Institute for Space Research (INPE)
> - Brazil
> PHD Student in Transport - Bras??lia University (UNB)
>
>
> ------------------------------
> *De:* R-sig-Geo <r-sig-geo-bounces at r-project.org> em nome de Tomislav
> Hengl <tom.hengl at gmail.com>
> *Enviado:* quinta-feira, 29 de setembro de 2016 11:28
> *Para:* r-sig-geo at r-project.org
> *Assunto:* [R-sig-Geo] Global potential natural vegetation at 1km?
>
> Dear R-sig-geo,
>
> I have been looking for an existing map of global PNV (potential natural
> vegetation) that we could maybe use global soil / biomass modelling. So
> far, I noticed only two data sources that could provide compatible data:
>
> 1. Levavasseur et al. 2012
> (http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019) uses
> <http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019>
> Statistical modelling of a new global potential vegetation ...
> <http://iopscience.iop.org/article/10.1088/1748-9326/7/4/044019>
> iopscience.iop.org
> The potential natural vegetation (PNV) distribution is required for
> several studies in environmental sciences. Most of the available databases
> are quite subjective or ...
>
> http://www.bridge.bris.ac.uk/resources/Databases/BIOMES_data data set
> BRIDGE - Bristol University
> <http://www.bridge.bris.ac.uk/resources/Databases/BIOMES_data>
> www.bridge.bris.ac.uk
> 1: Vegetation maps for the Mid-holocene and last Glacial Maximum. The
> Palaeovegetation Mapping Project (generally known as BIOME 6000: Prentice
> and Webb, 1998) was ...
>
> for model training,
>
> 2. Tian et al. 2015
> (http://www.nature.com/nature/journal/v531/n7593/full/nature16946.html)
> The terrestrial biosphere as a net source of greenhouse ...
> <http://www.nature.com/nature/journal/v531/n7593/full/nature16946.html>
> www.nature.com
> The terrestrial biosphere can release or absorb the greenhouse gases,
> carbon dioxide (CO2), methane (CH4) and nitrous oxide (N2O), and therefore
> has an important role ...
>
>
> However, both maps seem to refer to very coarse resolutions 10-50 km and
> I would prefer to use 1 km resolution data (not to mention that the
> legends are a mixture of general vegetation groups / vegetation-climate
> groups). For USA, much more detailed natural vegetation map is available
> (https://databasin.org/datasets/1c7a301c8e6843f2b4fe63fdb3a9fe39), but I
> U.S. Potential Natural Vegetation, Original Kuchler Types ...
> <https://databasin.org/datasets/1c7a301c8e6843f2b4fe63fdb3a9fe39>
> databasin.org
> U.S. Potential Natural Vegetation, Original Kuchler Types, v2.0 (Spatially
> Adjusted to Correct Geometric Distortions)
>
> guess nothing comparable is available for the whole world? Are you maybe
> aware of any such global maps representing e.g. plant communities
> (https://www.wikiwand.com/en/Plant_community)?
>
> I might just try myself to derive global potential vegetation (plant
> communities) using e.g. GBIF data or the BIOME 6000 data and
> environmental covariates at 1 km. At least the training data seems to be
> available for modeling.
>
> If you are aware of any similar project / initiative / data set please
> let me know.
>
> --
> T. (Tom) Hengl
> Researcher @ ISRIC - World Soil Information
> Url: http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm
> <http://www.wageningenur.nl/en/Persons/dr.-T-Tom-Hengl.htm>
> Network: http://profiles.google.com/tom.hengl
> <http://profiles.google.com/tom.hengl>
> Publications: http://scholar.google.com/citations?user=2oYU7S8AAAAJ
> <http://scholar.google.com/citations?user=2oYU7S8AAAAJ>
> ORCID ID: http://orcid.org/0000-0002-9921-5129
> <http://orcid.org/0000-0002-9921-5129>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From fernandopaim at paim.pro.br  Fri Sep 30 13:26:13 2016
From: fernandopaim at paim.pro.br (Fernando Paim)
Date: Fri, 30 Sep 2016 08:26:13 -0300
Subject: [R-sig-Geo] =?utf-8?q?create_a_triangular_grid_=3F?=
Message-ID: <3a84829bdd0f275f06713f4e710a8f9f@paim.pro.br>

 

Hello everyone,

I need to create a triangular grid for kriging.
I've tried with makegrid, expand.grid but with just a rectangular grid.
I have not been able to find a method to trim the rectangular grid to
the newdata same shape of the original data, is this possible? 

The
data (x,y,z) are available in
http://www.paim.pro.br/downloads/dados.csv

Can anyone help?

Thanks in
advance,

Fernando Paim 

 
	[[alternative HTML version deleted]]


From macqueen1 at llnl.gov  Fri Sep 30 18:02:10 2016
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Fri, 30 Sep 2016 16:02:10 +0000
Subject: [R-sig-Geo] create a triangular grid ?
In-Reply-To: <3a84829bdd0f275f06713f4e710a8f9f@paim.pro.br>
References: <3a84829bdd0f275f06713f4e710a8f9f@paim.pro.br>
Message-ID: <D413D8C1.18760F%macqueen1@llnl.gov>

 spsample( type='hexagonal') will generate points in what some might call
a triangular grid.

They'll just be independent points, with no underlying structure declaring
them to be a grid, but at least you'll have them.

sp::over() may help you trim a rectangular grid; ?sp::over has an example
applying it to a grid.

-Don


-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 9/30/16, 4:26 AM, "R-sig-Geo on behalf of Fernando Paim"
<r-sig-geo-bounces at r-project.org on behalf of fernandopaim at paim.pro.br>
wrote:

> 
>
>Hello everyone,
>
>I need to create a triangular grid for kriging.
>I've tried with makegrid, expand.grid but with just a rectangular grid.
>I have not been able to find a method to trim the rectangular grid to
>the newdata same shape of the original data, is this possible?
>
>The
>data (x,y,z) are available in
>http://www.paim.pro.br/downloads/dados.csv
>
>Can anyone help?
>
>Thanks in
>advance,
>
>Fernando Paim 
>
> 
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From mdsumner at gmail.com  Fri Sep 30 18:19:21 2016
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 30 Sep 2016 16:19:21 +0000
Subject: [R-sig-Geo] create a triangular grid ?
In-Reply-To: <3a84829bdd0f275f06713f4e710a8f9f@paim.pro.br>
References: <3a84829bdd0f275f06713f4e710a8f9f@paim.pro.br>
Message-ID: <CAAcGz9_JFuh_v_wphBYxwn-rRUU5-no5=SQFHdMJ_tU+0mcOow@mail.gmail.com>

On Fri, 30 Sep 2016 at 21:29 Fernando Paim <fernandopaim at paim.pro.br> wrote:

>
>
> Hello everyone,
>
> I need to create a triangular grid for kriging.
> I've tried with makegrid, expand.grid but with just a rectangular grid.
> I have not been able to find a method to trim the rectangular grid to
> the newdata same shape of the original data, is this possible?
>
>
You already have a reasonable triangular mesh here so I assume you want to
generate a rectangular grid (a raster) from this?

d <- read.delim("http://www.paim.pro.br/downloads/dados.csv")

tri <- RTriangle::triangulate(RTriangle::pslg(P = cbind(d$x, d$y), PA =
cbind(d$z)))

rgl::triangles3d(cbind(tri$P, tri$PA)[t(tri$T), ], col = "grey", specular =
"black")
rgl::points3d(d$x, d$y, d$z)

You can use barycentric coordinates to get a fast interpolation for
arbitrary points on this mesh, there are functions for this in geometry
package but you have to drive the subsequent sampling yourself. If that's
on the right track I would generate a regular grid with raster, then
convert to barycentric and pull out interpolated values. I have an old
example here that might help:

https://github.com/mdsumner/xyztrisurf/blob/master/xyztrisurf.Rmd

You can use simple interpolation to get a little more resolution from your
data on the mesh in the first place with a maximum triangle area (the 'a'
argument):

tri <- RTriangle::triangulate(RTriangle::pslg(P = cbind(d$x, d$y), PA =
cbind(d$z)), a = 2)

rgl::triangles3d(cbind(tri$P, tri$PA)[t(tri$T), ], col = "grey", specular =
"black")
rgl::points3d(d$x, d$y, d$z)

These visualizations at least give a sense of what your data are and what
is sensible, the barycentric interpolation to sample points is as if you
intersect those grid points with this surface.

Otherwise you can use real modelling -  depending on what makes sense for
these data . . .

Cheers, Mike.


> The
> data (x,y,z) are available in
> http://www.paim.pro.br/downloads/dados.csv
>
> Can anyone help?
>
> Thanks in
> advance,
>
> Fernando Paim
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> University of Tasmania Electronic Communications Policy (December, 2014).
> This email is confidential, and is for the intended recipient only.
> Access, disclosure, copying, distribution, or reliance on any of it by
> anyone outside the intended recipient organisation is prohibited and may be
> a criminal offence. Please delete if obtained in error and email
> confirmation to the sender. The views expressed in this email are not
> necessarily the views of the University of Tasmania, unless clearly
> intended otherwise.
> .
>
> --
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From fernandopaim at paim.pro.br  Fri Sep 30 19:12:49 2016
From: fernandopaim at paim.pro.br (Fernando Paim)
Date: Fri, 30 Sep 2016 14:12:49 -0300
Subject: [R-sig-Geo] =?utf-8?q?create_a_triangular_grid_=3F?=
In-Reply-To: <CAAcGz9_JFuh_v_wphBYxwn-rRUU5-no5=SQFHdMJ_tU+0mcOow@mail.gmail.com>
References: <3a84829bdd0f275f06713f4e710a8f9f@paim.pro.br>
	<CAAcGz9_JFuh_v_wphBYxwn-rRUU5-no5=SQFHdMJ_tU+0mcOow@mail.gmail.com>
Message-ID: <d0c093277c4e3e5a31bb5bb3a7f34965@paim.pro.br>

 

Hello Mike,

Thanks for answering. I also thank the code and
example. They will be very useful for me. 

Greetings 

Fernando Paim


Em 30.09.2016 13:19, Michael Sumner escreveu: 

> On Fri, 30 Sep 2016
at 21:29 Fernando Paim <fernandopaim at paim.pro.br> wrote: 
> 
>> Hello
everyone,
>> 
>> I need to create a triangular grid for kriging.
>> I've
tried with makegrid, expand.grid but with just a rectangular grid.
>> I
have not been able to find a method to trim the rectangular grid to
>>
the newdata same shape of the original data, is this possible?
> 
> You
already have a reasonable triangular mesh here so I assume you want to
generate a rectangular grid (a raster) from this? 
> 
> d <-
read.delim("http://www.paim.pro.br/downloads/dados.csv [1]") 
> 
> tri
<- RTriangle::triangulate(RTriangle::pslg(P = cbind(d$x, d$y), PA =
cbind(d$z))) 
> 
> rgl::triangles3d(cbind(tri$P, tri$PA)[t(tri$T), ],
col = "grey", specular = "black") 
> rgl::points3d(d$x, d$y, d$z) 
> 
>
You can use barycentric coordinates to get a fast interpolation for
arbitrary points on this mesh, there are functions for this in geometry
package but you have to drive the subsequent sampling yourself. If
that's on the right track I would generate a regular grid with raster,
then convert to barycentric and pull out interpolated values. I have an
old example here that might help: 
> 
>
https://github.com/mdsumner/xyztrisurf/blob/master/xyztrisurf.Rmd [3] 
>

> You can use simple interpolation to get a little more resolution from
your data on the mesh in the first place with a maximum triangle area
(the 'a' argument): 
> 
> tri <-
RTriangle::triangulate(RTriangle::pslg(P = cbind(d$x, d$y), PA =
cbind(d$z)), a = 2) 
> 
> rgl::triangles3d(cbind(tri$P,
tri$PA)[t(tri$T), ], col = "grey", specular = "black") 
>
rgl::points3d(d$x, d$y, d$z) 
> 
> These visualizations at least give a
sense of what your data are and what is sensible, the barycentric
interpolation to sample points is as if you intersect those grid points
with this surface. 
> 
> Otherwise you can use real modelling -
depending on what makes sense for these data . . . 
> 
> Cheers, Mike.

> 
>> The
>> data (x,y,z) are available in
>>
http://www.paim.pro.br/downloads/dados.csv [1]
>> 
>> Can anyone
help?
>> 
>> Thanks in
>> advance,
>> 
>> Fernando Paim
>> 
>>
[[alternative HTML version deleted]]
>> 
>>
_______________________________________________
>> R-sig-Geo mailing
list
>> R-sig-Geo at r-project.org
>>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo [2]
>> 
>> University of
Tasmania Electronic Communications Policy (December, 2014).
>> This
email is confidential, and is for the intended recipient only. Access,
disclosure, copying, distribution, or reliance on any of it by anyone
outside the intended recipient organisation is prohibited and may be a
criminal offence. Please delete if obtained in error and email
confirmation to the sender. The views expressed in this email are not
necessarily the views of the University of Tasmania, unless clearly
intended otherwise.
>> .
> 
> -- 
> 
> Dr. Michael Sumner
> Software and
Database Engineer
> Australian Antarctic Division
> 203 Channel
Highway
> Kingston Tasmania 7050 Australia

 

Links:
------
[1]
http://www.paim.pro.br/downloads/dados.csv
[2]
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
[3]
https://github.com/mdsumner/xyztrisurf/blob/master/xyztrisurf.Rmd

	[[alternative HTML version deleted]]


From fernandopaim at paim.pro.br  Fri Sep 30 19:16:29 2016
From: fernandopaim at paim.pro.br (Fernando Paim)
Date: Fri, 30 Sep 2016 14:16:29 -0300
Subject: [R-sig-Geo] =?utf-8?q?create_a_triangular_grid_=3F?=
In-Reply-To: <D413D8C1.18760F%macqueen1@llnl.gov>
References: <3a84829bdd0f275f06713f4e710a8f9f@paim.pro.br>
	<D413D8C1.18760F%macqueen1@llnl.gov>
Message-ID: <bd2ca82171ab0fee60dc935dcda1ceed@paim.pro.br>

 

Hi Don,

Thanks for the tips, will work. 

Greetings 

Fernando Paim


Em 30.09.2016 13:02, MacQueen, Don escreveu: 

> spsample(
type='hexagonal') will generate points in what some might call
> a
triangular grid.
> 
> They'll just be independent points, with no
underlying structure declaring
> them to be a grid, but at least you'll
have them.
> 
> sp::over() may help you trim a rectangular grid;
?sp::over has an example
> applying it to a grid.
> 
> -Don
> 
> -- 
>
Don MacQueen
> 
> Lawrence Livermore National Laboratory
> 7000 East
Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> 
> On 9/30/16, 4:26
AM, "R-sig-Geo on behalf of Fernando Paim"
>
<r-sig-geo-bounces at r-project.org on behalf of
fernandopaim at paim.pro.br>
> wrote:
> 
>> Hello everyone, I need to
create a triangular grid for kriging. I've tried with makegrid,
expand.grid but with just a rectangular grid. I have not been able to
find a method to trim the rectangular grid to the newdata same shape of
the original data, is this possible? The data (x,y,z) are available in
http://www.paim.pro.br/downloads/dados.csv [1] Can anyone help? Thanks
in advance, Fernando Paim [[alternative HTML version deleted]]
_______________________________________________ R-sig-Geo mailing list
R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo
[2]

 

Links:
------
[1] http://www.paim.pro.br/downloads/dados.csv
[2]
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

	[[alternative HTML version deleted]]


