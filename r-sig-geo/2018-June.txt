From Scott@W@ichler @ending from pnnl@gov  Fri Jun  1 05:38:33 2018
From: Scott@W@ichler @ending from pnnl@gov (Waichler, Scott R)
Date: Fri, 1 Jun 2018 03:38:33 +0000
Subject: [R-sig-Geo] how to plot different rows of a
 SpatialPolygonsDataFrame in trellis panels
In-Reply-To: <CAPP0wyiec7HFNPDP1fyNqGwDv4t8jQ0wU4GXO4=SC5z_qN2FcQ@mail.gmail.com>
References: <CAPP0wyiec7HFNPDP1fyNqGwDv4t8jQ0wU4GXO4=SC5z_qN2FcQ@mail.gmail.com>
Message-ID: <074C83DAD4825242A20B2D83FDBCB8881BAEED62@EX10MBOX03.pnnl.gov>

Kent,

Thank you for your response to my problem.  Unfortunately, I can't use sf because it has system dependencies I can't meet.  I am using RHEL 6, and am up-to-date with it for gdal, geos, and proj (versions 1.7.3, 3.3.2, 4.7.0 respectively), but the R package sf requires later versions for all of these.   The vignettes for sf make it sound very useful, but alas it seems to be out of reach for me at present.  I am surprised a package that is being positioned for widespread adoption has such stringent requirements.

Best,
Scott Waichler
Pacific Northwest National Laboratory
Richland, Washington, USA

> -----Original Message-----
> From: Kent Johnson [mailto:kent3737 at gmail.com]
> Sent: Thursday, May 24, 2018 6:05 AM
> To: r-sig-geo at r-project.org; Waichler, Scott R <Scott.Waichler at pnnl.gov>
> Subject: Re: how to plot different rows of a SpatialPolygonsDataFrame in
> trellis panels
> 
> On Thu, May 24, 2018 at 6:00 AM, <r-sig-geo-request at r-project.org> wrote:
> 
> Message: 1
> Date: Wed, 23 May 2018 18:39:07 +0000
> From: "Waichler, Scott R" <Scott.Waichler at pnnl.gov>
> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Subject: [R-sig-Geo] how to plot different rows of a
> ? ? ? ? SpatialPolygonsDataFrame in trellis panels
> 
> Hello,
> 
> I have a SpatialPolygonsDataFrame.? I would like to do a trellis plot on one of
> the attributes, so that in the panel for a given attribute value, only those
> polygons with that value are plotted.? So, each panel has different polygons
> plotted in it.? I can't figure out how to do this.? In the toy example below, I
> would like to create a trellis plot with one panel showing the polygons with id
> = 1, and another panel showing the polygons with id = 2.
> 
> My goal beyond this toy problem is to do the same thing with stplot, where
> panels correspond to times and each time has a different set of polygons
> plotted.? Will that be possible?? In all the examples I can find of using stplot
> for a space-time grid with the spatial objects being polygons, the polygons
> are the same across time.
> 
> # based on example in help("SpatialPolygonsDataFrame-class")
> Sr1 = Polygon(cbind(c(2,4,4,1,2),c(2,3,5,4,2)))
> Sr2 = Polygon(cbind(c(5,4,2,5),c(2,3,2,2)))
> Sr3 = Polygon(cbind(c(4,4,5,10,4),c(5,3,2,5,5)))
> Sr4 = Polygon(cbind(c(5,6,6,5,5),c(4,4,3,3,4)), hole = TRUE)
> Srs1 = Polygons(list(Sr1), "s1")
> Srs2 = Polygons(list(Sr2), "s2")
> Srs3 = Polygons(list(Sr3, Sr4), "s3/4")
> SpP = SpatialPolygons(list(Srs1,Srs2,Srs3), 1:3)
> grd <- GridTopology(c(1,1), c(1,1), c(10,10))
> polys <- as(grd, "SpatialPolygons")
> centroids <- coordinates(polys)
> x <- centroids[,1]
> y <- centroids[,2]
> z <- 1.4 + 0.1*x + 0.2*y + 0.002*x*x
> id = factor(sample(c(1,2), size=length(polys), replace=T))
> tmp <- SpatialPolygonsDataFrame(polys,
> ? ? ? data=data.frame(x=x, y=y, z=z, id=id, row.names=row.names(polys)))
> plot(tmp)? # plots all the square polygons (n = 10*10)
> spplot(tmp)? # plots values of x, y, z, id in separate panels, each with 100
> polys
> spplot(tmp, zcol=z)? # error message about duplication of factor level
> spplot(tmp ~ id, zcol=z, data=tmp)? # won't take formula
> 
> You can do the facetting with ggplot2::geom_sf (in the dev version of
> ggplot2) though I don't think it will use different coordinate ranges for
> different facets:
> 
> devtools::install_github('tidyverse/ggplot2')
> library(sf)
> library(ggplot2)
> tmp2 = st_as_sf(tmp)
> 
> ggplot(tmp2) + geom_sf(aes(fill=z)) + facet_wrap(~id)
> 
> A couple of suggestions here, using tmap or ggspatial, that look promising:
> https://stackoverflow.com/questions/47678480/mapping-different-states-
> with-geom-sf-using-facet-wrap-and-scales-free
> 
> Kent Johnson
> 
> 
> Thank you,
> ScottWaichler
> Pacific Northwest National Laboratory
> scott.waichler _at_ pnnl.gov

From edzer@pebe@m@ @ending from uni-muen@ter@de  Fri Jun  1 08:17:48 2018
From: edzer@pebe@m@ @ending from uni-muen@ter@de (Edzer Pebesma)
Date: Fri, 1 Jun 2018 08:17:48 +0200
Subject: [R-sig-Geo] how to plot different rows of a
 SpatialPolygonsDataFrame in trellis panels
In-Reply-To: <074C83DAD4825242A20B2D83FDBCB8881BAEED62@EX10MBOX03.pnnl.gov>
References: <CAPP0wyiec7HFNPDP1fyNqGwDv4t8jQ0wU4GXO4=SC5z_qN2FcQ@mail.gmail.com>
 <074C83DAD4825242A20B2D83FDBCB8881BAEED62@EX10MBOX03.pnnl.gov>
Message-ID: <1f2c4cb9-a858-c3d4-d9d9-c505e07b4e45@uni-muenster.de>



On 06/01/2018 05:38 AM, Waichler, Scott R wrote:
> Kent,
> 
> Thank you for your response to my problem.  Unfortunately, I can't use sf because it has system dependencies I can't meet.  I am using RHEL 6, and am up-to-date with it for gdal, geos, and proj (versions 1.7.3, 3.3.2, 4.7.0 respectively), but the R package sf requires later versions for all of these.   The vignettes for sf make it sound very useful, but alas it seems to be out of reach for me at present.  I am surprised a package that is being positioned for widespread adoption has such stringent requirements.

According to https://download.osgeo.org/gdal/old_releases/ the gdal
version you are running is from 2010. You may have followed how gdal has
improved since 2010, and how it has continuously adapted to the dynamics
of the geospatial software ecosystem, as well as to the development of
new geospatial standards.

I made a deliberate choice to let sf users benefit from these
improvements by picking gdal 2.0.1 from 2015 as a minimum requirement,
rather than keep them in the stone ages.

Keeping sf, rgdal and rgeos to work with new releases of gdal, geos and
proj takes a considerable amount of our time not only for Roger and me,
but also for the CRAN maintainers. I hope this takes away some of your
surprise.

> 
> Best,
> Scott Waichler
> Pacific Northwest National Laboratory
> Richland, Washington, USA
> 
>> -----Original Message-----
>> From: Kent Johnson [mailto:kent3737 at gmail.com]
>> Sent: Thursday, May 24, 2018 6:05 AM
>> To: r-sig-geo at r-project.org; Waichler, Scott R <Scott.Waichler at pnnl.gov>
>> Subject: Re: how to plot different rows of a SpatialPolygonsDataFrame in
>> trellis panels
>>
>> On Thu, May 24, 2018 at 6:00 AM, <r-sig-geo-request at r-project.org> wrote:
>>
>> Message: 1
>> Date: Wed, 23 May 2018 18:39:07 +0000
>> From: "Waichler, Scott R" <Scott.Waichler at pnnl.gov>
>> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>> Subject: [R-sig-Geo] how to plot different rows of a
>> ? ? ? ? SpatialPolygonsDataFrame in trellis panels
>>
>> Hello,
>>
>> I have a SpatialPolygonsDataFrame.? I would like to do a trellis plot on one of
>> the attributes, so that in the panel for a given attribute value, only those
>> polygons with that value are plotted.? So, each panel has different polygons
>> plotted in it.? I can't figure out how to do this.? In the toy example below, I
>> would like to create a trellis plot with one panel showing the polygons with id
>> = 1, and another panel showing the polygons with id = 2.
>>
>> My goal beyond this toy problem is to do the same thing with stplot, where
>> panels correspond to times and each time has a different set of polygons
>> plotted.? Will that be possible?? In all the examples I can find of using stplot
>> for a space-time grid with the spatial objects being polygons, the polygons
>> are the same across time.
>>
>> # based on example in help("SpatialPolygonsDataFrame-class")
>> Sr1 = Polygon(cbind(c(2,4,4,1,2),c(2,3,5,4,2)))
>> Sr2 = Polygon(cbind(c(5,4,2,5),c(2,3,2,2)))
>> Sr3 = Polygon(cbind(c(4,4,5,10,4),c(5,3,2,5,5)))
>> Sr4 = Polygon(cbind(c(5,6,6,5,5),c(4,4,3,3,4)), hole = TRUE)
>> Srs1 = Polygons(list(Sr1), "s1")
>> Srs2 = Polygons(list(Sr2), "s2")
>> Srs3 = Polygons(list(Sr3, Sr4), "s3/4")
>> SpP = SpatialPolygons(list(Srs1,Srs2,Srs3), 1:3)
>> grd <- GridTopology(c(1,1), c(1,1), c(10,10))
>> polys <- as(grd, "SpatialPolygons")
>> centroids <- coordinates(polys)
>> x <- centroids[,1]
>> y <- centroids[,2]
>> z <- 1.4 + 0.1*x + 0.2*y + 0.002*x*x
>> id = factor(sample(c(1,2), size=length(polys), replace=T))
>> tmp <- SpatialPolygonsDataFrame(polys,
>> ? ? ? data=data.frame(x=x, y=y, z=z, id=id, row.names=row.names(polys)))
>> plot(tmp)? # plots all the square polygons (n = 10*10)
>> spplot(tmp)? # plots values of x, y, z, id in separate panels, each with 100
>> polys
>> spplot(tmp, zcol=z)? # error message about duplication of factor level
>> spplot(tmp ~ id, zcol=z, data=tmp)? # won't take formula
>>
>> You can do the facetting with ggplot2::geom_sf (in the dev version of
>> ggplot2) though I don't think it will use different coordinate ranges for
>> different facets:
>>
>> devtools::install_github('tidyverse/ggplot2')
>> library(sf)
>> library(ggplot2)
>> tmp2 = st_as_sf(tmp)
>>
>> ggplot(tmp2) + geom_sf(aes(fill=z)) + facet_wrap(~id)
>>
>> A couple of suggestions here, using tmap or ggspatial, that look promising:
>> https://stackoverflow.com/questions/47678480/mapping-different-states-
>> with-geom-sf-using-facet-wrap-and-scales-free
>>
>> Kent Johnson
>>
>>
>> Thank you,
>> ScottWaichler
>> Pacific Northwest National Laboratory
>> scott.waichler _at_ pnnl.gov
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From Roger@Biv@nd @ending from nhh@no  Fri Jun  1 09:29:09 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Fri, 1 Jun 2018 09:29:09 +0200
Subject: [R-sig-Geo] how to plot different rows of a
 SpatialPolygonsDataFrame in trellis panels
In-Reply-To: <1f2c4cb9-a858-c3d4-d9d9-c505e07b4e45@uni-muenster.de>
References: <CAPP0wyiec7HFNPDP1fyNqGwDv4t8jQ0wU4GXO4=SC5z_qN2FcQ@mail.gmail.com>
 <074C83DAD4825242A20B2D83FDBCB8881BAEED62@EX10MBOX03.pnnl.gov>
 <1f2c4cb9-a858-c3d4-d9d9-c505e07b4e45@uni-muenster.de>
Message-ID: <alpine.LFD.2.21.1806010912020.5347@reclus.nhh.no>

On Fri, 1 Jun 2018, Edzer Pebesma wrote:

>
>
> On 06/01/2018 05:38 AM, Waichler, Scott R wrote:
>> Kent,
>>
>> Thank you for your response to my problem.  Unfortunately, I can't use 
>> sf because it has system dependencies I can't meet.  I am using RHEL 6, 
>> and am up-to-date with it for gdal, geos, and proj (versions 1.7.3, 
>> 3.3.2, 4.7.0 respectively), but the R package sf requires later 
>> versions for all of these.  The vignettes for sf make it sound very 
>> useful, but alas it seems to be out of reach for me at present.  I am 
>> surprised a package that is being positioned for widespread adoption 
>> has such stringent requirements.
>
> According to https://download.osgeo.org/gdal/old_releases/ the gdal
> version you are running is from 2010. You may have followed how gdal has
> improved since 2010, and how it has continuously adapted to the dynamics
> of the geospatial software ecosystem, as well as to the development of
> new geospatial standards.

RHEL 6 is EOL in November 2020, so now is the time to move forward. As 
Edzer mentions, PROJ, GDAL and GEOS have fixed multiple bugs GDAL has 
introduced new drivers over the succession of releases. The GDAL API 
changed after 1.11.*, but rgdal does still build with GDAL 1.11.4 and PROJ 
4.8.0 (checked recently). From the next (forthcoming) release (1.3.*) of 
rgdal, these will be the minimum versions permitted. Even CentOS/RHEL 7 
need to install a C++11-capable compiler to build GDAL 2.3.0 - see the 
thread at:

https://stat.ethz.ch/pipermail/r-sig-geo/2018-May/026591.html

As Edzer mentions below, users cannot reasonably expect package authors 
and maintainers to keep things running in current packages for EOL-near 
platforms. If you can provide docker images/containers to emulate near-EOL 
platforms (compilers, external dependencies, etc), you can contribute back 
to others and protect your workflows by checking systematically that 
development versions of sf and rgdal/rgeos can still be installed, pass 
R CMD check, and that updates in R packages don't change your results in 
other ways than bug-fixes would cause.

We know that institutional users cannot freely upgrade platforms, but RHEL 
6 perhaps indicates critical failure to invest by the institution; we know 
it happens, but this can't be a priority for package author and maintainer 
time.

Roger

>
> I made a deliberate choice to let sf users benefit from these
> improvements by picking gdal 2.0.1 from 2015 as a minimum requirement,
> rather than keep them in the stone ages.
>
> Keeping sf, rgdal and rgeos to work with new releases of gdal, geos and
> proj takes a considerable amount of our time not only for Roger and me,
> but also for the CRAN maintainers. I hope this takes away some of your
> surprise.
>
>>
>> Best,
>> Scott Waichler
>> Pacific Northwest National Laboratory
>> Richland, Washington, USA
>>
>>> -----Original Message-----
>>> From: Kent Johnson [mailto:kent3737 at gmail.com]
>>> Sent: Thursday, May 24, 2018 6:05 AM
>>> To: r-sig-geo at r-project.org; Waichler, Scott R <Scott.Waichler at pnnl.gov>
>>> Subject: Re: how to plot different rows of a SpatialPolygonsDataFrame in
>>> trellis panels
>>>
>>> On Thu, May 24, 2018 at 6:00 AM, <r-sig-geo-request at r-project.org> wrote:
>>>
>>> Message: 1
>>> Date: Wed, 23 May 2018 18:39:07 +0000
>>> From: "Waichler, Scott R" <Scott.Waichler at pnnl.gov>
>>> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
>>> Subject: [R-sig-Geo] how to plot different rows of a
>>> ? ? ? ? SpatialPolygonsDataFrame in trellis panels
>>>
>>> Hello,
>>>
>>> I have a SpatialPolygonsDataFrame.? I would like to do a trellis plot on one of
>>> the attributes, so that in the panel for a given attribute value, only those
>>> polygons with that value are plotted.? So, each panel has different polygons
>>> plotted in it.? I can't figure out how to do this.? In the toy example below, I
>>> would like to create a trellis plot with one panel showing the polygons with id
>>> = 1, and another panel showing the polygons with id = 2.
>>>
>>> My goal beyond this toy problem is to do the same thing with stplot, where
>>> panels correspond to times and each time has a different set of polygons
>>> plotted.? Will that be possible?? In all the examples I can find of using stplot
>>> for a space-time grid with the spatial objects being polygons, the polygons
>>> are the same across time.
>>>
>>> # based on example in help("SpatialPolygonsDataFrame-class")
>>> Sr1 = Polygon(cbind(c(2,4,4,1,2),c(2,3,5,4,2)))
>>> Sr2 = Polygon(cbind(c(5,4,2,5),c(2,3,2,2)))
>>> Sr3 = Polygon(cbind(c(4,4,5,10,4),c(5,3,2,5,5)))
>>> Sr4 = Polygon(cbind(c(5,6,6,5,5),c(4,4,3,3,4)), hole = TRUE)
>>> Srs1 = Polygons(list(Sr1), "s1")
>>> Srs2 = Polygons(list(Sr2), "s2")
>>> Srs3 = Polygons(list(Sr3, Sr4), "s3/4")
>>> SpP = SpatialPolygons(list(Srs1,Srs2,Srs3), 1:3)
>>> grd <- GridTopology(c(1,1), c(1,1), c(10,10))
>>> polys <- as(grd, "SpatialPolygons")
>>> centroids <- coordinates(polys)
>>> x <- centroids[,1]
>>> y <- centroids[,2]
>>> z <- 1.4 + 0.1*x + 0.2*y + 0.002*x*x
>>> id = factor(sample(c(1,2), size=length(polys), replace=T))
>>> tmp <- SpatialPolygonsDataFrame(polys,
>>> ? ? ? data=data.frame(x=x, y=y, z=z, id=id, row.names=row.names(polys)))
>>> plot(tmp)? # plots all the square polygons (n = 10*10)
>>> spplot(tmp)? # plots values of x, y, z, id in separate panels, each with 100
>>> polys
>>> spplot(tmp, zcol=z)? # error message about duplication of factor level
>>> spplot(tmp ~ id, zcol=z, data=tmp)? # won't take formula
>>>
>>> You can do the facetting with ggplot2::geom_sf (in the dev version of
>>> ggplot2) though I don't think it will use different coordinate ranges for
>>> different facets:
>>>
>>> devtools::install_github('tidyverse/ggplot2')
>>> library(sf)
>>> library(ggplot2)
>>> tmp2 = st_as_sf(tmp)
>>>
>>> ggplot(tmp2) + geom_sf(aes(fill=z)) + facet_wrap(~id)
>>>
>>> A couple of suggestions here, using tmap or ggspatial, that look promising:
>>> https://stackoverflow.com/questions/47678480/mapping-different-states-
>>> with-geom-sf-using-facet-wrap-and-scales-free
>>>
>>> Kent Johnson
>>>
>>>
>>> Thank you,
>>> ScottWaichler
>>> Pacific Northwest National Laboratory
>>> scott.waichler _at_ pnnl.gov
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From giu@eppe@@m@tulli @ending from gm@il@com  Sun Jun  3 09:35:27 2018
From: giu@eppe@@m@tulli @ending from gm@il@com (Giuseppe Amatulli)
Date: Sun, 3 Jun 2018 03:35:27 -0400
Subject: [R-sig-Geo] Summer School in Geocomputation - Berkeley - USA
Message-ID: <CAKoiDH+XEdBbsFvysXcq34BOkoujVA+3O-ED1VNG8mdJ=1sbHw@mail.gmail.com>

Dear colleagues,

the registration is open now for the

*International Summer School:*
*Geocomputation using free and Open Source Software** (20th-24th August
2018) *

organized by Spatial Ecology (www.spatial-ecology.net)
<http://www.spatial-ecology.net/> hosted at the *Berkeley Institute of Data
Science <https://bids.berkeley.edu/>*

A 5 days intense experience opening new horizons on the use of the vast
potentials of *Linux* environment and the command line approach for
*geo-data* massive processing using Bash, AWK, Python, GRASS, QGIS,
GDAL/OGR, R, PKtools. We will guide newbies and experienced GIS users who
have never used a command line terminal to a stage which will allow them to
understand and apply very advanced open source data processing routines.
Our focus is to enhance a self-learning approach. This allows participants
to keep on progressing and improving their skills in a continuously
evolving technological environment.

More information and registration:

www.spatial-ecology.net
www.facebook.com/spatialecology  -> event
<https://www.facebook.com/events/202252593719455/>

twitter: @BigDataEcology

Best regards
Spatial Ecology ? Team

-- 
Giuseppe Amatulli, Ph.D.

Research scientist at
Yale School of Forestry & Environmental Studies
Yale Center for Research Computing
Center for Science and Social Science Information
New Haven, 06511
Teaching: http://spatial-ecology.net
Work:  https://environment.yale.edu/profile/giuseppe-amatulli/

	[[alternative HTML version deleted]]


From thom@@youngc@ @ending from gm@il@com  Mon Jun  4 15:12:00 2018
From: thom@@youngc@ @ending from gm@il@com (Thomas Young)
Date: Mon, 4 Jun 2018 06:12:00 -0700
Subject: [R-sig-Geo] regression with Moran eigenvectors for multiple years
 of data
Message-ID: <CAMJGZtxbhE7ES8XPBgxqGmLsu0q--iid+nB1ysa8BG2fd4RpVA@mail.gmail.com>

Hello,

I think this is mostly a statistics question with possibly some R details.
Any feedback is appreciated.

I have several years of spatial biological sampling data in the same region
but the number and locations of sites vary across year.  Very strong
spatial autocorrelation is present in the data.

I want to construct a regression model using Moran' eigenvectors as
explanatory variables to account for SAC. For example,

y_ijk=intercept+x1_ijk+x2_ijk+ EV_k

where x1,x2 are environmental covariates and EV are Moran eigenvectors; i,j
are location and k is year.
Environmental covariate relationships with response variable are assumed
constant across years.

My plan was to first estimate using all years of data:
y=intercept+x1+x2
then use function ME in spdep to find identify Moran eigenvectors to reduce
residual SAC using a year specific (index k) spatial weights and
year-specific residuals using function ME from spdep package:
EV_k=  ME(residuals_k~1, listw=weights_k),
then linearly combine resulting eigenvectors for a given year into a single
vector and then concatenate each year's vector such that the final Moran
eignevector used in the regression is
EV= c(EV_2014,EV_2015,EV_2016)

and add EV as an offset or covariate as in the first equation shown.

This approach seems to work quite well (eliminates residual SAC, doesn't
shift regression coefficients substantially, improves model fit), I just
don't know if it is statistically sound?

thanks!

	[[alternative HTML version deleted]]


From w@ldircj @ending from gm@il@com  Mon Jun  4 19:38:06 2018
From: w@ldircj @ending from gm@il@com (Waldir de Carvalho Junior)
Date: Mon, 4 Jun 2018 14:38:06 -0300
Subject: [R-sig-Geo] Random Forest and OOB error
Message-ID: <CAFs5Q4+y-3-MxZMYpBAMEt7MP2B6C_9B=dmri6pBz2WxH6vM4w@mail.gmail.com>

Hi
how can I get and save the "OOB estimate of  error rate" from the model
randomforest?
I am doing a loop and want to save to each loop the OOB error.
I need to get the value to create a new data.frame with the OOB error from
varios models tests.
Thanks in advance

-- 
________________________
Waldir de Carvalho Junior

	[[alternative HTML version deleted]]


From Jin@Li @ending from g@@gov@@u  Tue Jun  5 03:24:27 2018
From: Jin@Li @ending from g@@gov@@u (Li Jin)
Date: Tue, 5 Jun 2018 01:24:27 +0000
Subject: [R-sig-Geo] 
 [DKIM]  Random Forest and OOB error [SEC=UNCLASSIFIED]
Message-ID: <ME1PR01MB105852F0CD491D05E023D99AD0660@ME1PR01MB1058.ausprd01.prod.outlook.com>

Hi Waldir,

Please check library(spm). The function RFcv and rgcv  in library(spm) provide you better options to assess the performance of random forest than using OOB error.

Kind regards,
Jin

-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Waldir de Carvalho Junior
Sent: Tuesday, 5 June 2018 3:38 AM
To: r-sig-geo at r-project.org
Subject: [DKIM] [R-sig-Geo] Random Forest and OOB error

Hi
how can I get and save the "OOB estimate of  error rate" from the model
randomforest?
I am doing a loop and want to save to each loop the OOB error.
I need to get the value to create a new data.frame with the OOB error from
varios models tests.
Thanks in advance

-- 
________________________
Waldir de Carvalho Junior

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Geoscience Australia Disclaimer: This e-mail (and files transmitted with it) is intended only for the person or entity to which it is addressed. If you are not the intended recipient, then you have received this e-mail by mistake and any use, dissemination, forwarding, printing or copying of this e-mail and its file attachments is prohibited. The security of emails transmitted cannot be guaranteed; by forwarding or replying to this email, you acknowledge and accept these risks.


From roberto@p@tuelli @ending from unibo@it  Tue Jun  5 18:57:52 2018
From: roberto@p@tuelli @ending from unibo@it (Roberto Patuelli)
Date: Tue, 5 Jun 2018 16:57:52 +0000
Subject: [R-sig-Geo] regression with Moran eigenvectors for multiple
Message-ID: <e12873eeefbf4a2d9151ab04579de9c2@E13-MBX3-DR.personale.dir.unibo.it>

Dear Thomas,

I've worked with Moran eigenvectors.
In some previous papers, I've used panel data with it.

In this article

Patuelli, R., D.A. Griffith, M. Tiefelsdorf and P. Nijkamp (2011). Spatial Filtering and Eigenvector Stability: Space-Time Models for German Unemployment Data. International Regional Science Review 34 (2): 253-80.
R code: https://sites.google.com/Desktop/RPDGMTPN2011IRSR_(R_code).zip.

I obtained a filter for each year and examined common eigenvectors.

In this further article

Patuelli, R., N. Schanne, D.A. Griffith and P. Nijkamp (2012). Persistence of Regional Unemployment: Application of a Spatial Filtering Approach to Local Labor Markets in Germany. Journal of Regional Science 52 (2): 300-23.

I instead estimated dynamic panels (LSDV) using spatial filters as substitutes of fixed effects (in addition to using them for heterogeneous coefficients). I can provide you with me code for this article too, if you want.

Best regards,
Roberto Patuelli

----------------------------------------------------------------------

Message: 1
Date: Mon, 4 Jun 2018 06:12:00 -0700
From: Thomas Young <thomasyoungca at gmail.com>
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] regression with Moran eigenvectors for multiple
	years of data
Message-ID:
	<CAMJGZtxbhE7ES8XPBgxqGmLsu0q--iid+nB1ysa8BG2fd4RpVA at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Hello,

I think this is mostly a statistics question with possibly some R details.
Any feedback is appreciated.

I have several years of spatial biological sampling data in the same region but the number and locations of sites vary across year.  Very strong spatial autocorrelation is present in the data.

I want to construct a regression model using Moran' eigenvectors as explanatory variables to account for SAC. For example,

y_ijk=intercept+x1_ijk+x2_ijk+ EV_k

where x1,x2 are environmental covariates and EV are Moran eigenvectors; i,j are location and k is year.
Environmental covariate relationships with response variable are assumed constant across years.

My plan was to first estimate using all years of data:
y=intercept+x1+x2
then use function ME in spdep to find identify Moran eigenvectors to reduce residual SAC using a year specific (index k) spatial weights and year-specific residuals using function ME from spdep package:
EV_k=  ME(residuals_k~1, listw=weights_k), then linearly combine resulting eigenvectors for a given year into a single vector and then concatenate each year's vector such that the final Moran eignevector used in the regression is EV= c(EV_2014,EV_2015,EV_2016)

and add EV as an offset or covariate as in the first equation shown.

This approach seems to work quite well (eliminates residual SAC, doesn't shift regression coefficients substantially, improves model fit), I just don't know if it is statistically sound?

thanks!

	[[alternative HTML version deleted]]


From thom@@youngc@ @ending from gm@il@com  Wed Jun  6 19:02:09 2018
From: thom@@youngc@ @ending from gm@il@com (Thomas Young)
Date: Wed, 6 Jun 2018 10:02:09 -0700
Subject: [R-sig-Geo] regression with Moran eigenvectors for multiple
In-Reply-To: <e12873eeefbf4a2d9151ab04579de9c2@E13-MBX3-DR.personale.dir.unibo.it>
References: <e12873eeefbf4a2d9151ab04579de9c2@E13-MBX3-DR.personale.dir.unibo.it>
Message-ID: <CAMJGZtxx2x7HHqkYMYyo--iPGuZRPMC-B7wBDbUCa_YEbHFWCQ@mail.gmail.com>

Many thanks Roberto for these very helpful references and R code.
They are just what I am looking for and much appreciated. It is interesting
that such approaches don't seem very common.

Thank you again,
Thomas

On Tue, Jun 5, 2018 at 9:57 AM, Roberto Patuelli <roberto.patuelli at unibo.it>
wrote:

> Dear Thomas,
>
> I've worked with Moran eigenvectors.
> In some previous papers, I've used panel data with it.
>
> In this article
>
> Patuelli, R., D.A. Griffith, M. Tiefelsdorf and P. Nijkamp (2011). Spatial
> Filtering and Eigenvector Stability: Space-Time Models for German
> Unemployment Data. International Regional Science Review 34 (2): 253-80.
> R code: https://sites.google.com/Desktop/RPDGMTPN2011IRSR_(R_code).zip.
>
> I obtained a filter for each year and examined common eigenvectors.
>
> In this further article
>
> Patuelli, R., N. Schanne, D.A. Griffith and P. Nijkamp (2012). Persistence
> of Regional Unemployment: Application of a Spatial Filtering Approach to
> Local Labor Markets in Germany. Journal of Regional Science 52 (2): 300-23.
>
> I instead estimated dynamic panels (LSDV) using spatial filters as
> substitutes of fixed effects (in addition to using them for heterogeneous
> coefficients). I can provide you with me code for this article too, if you
> want.
>
> Best regards,
> Roberto Patuelli
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Mon, 4 Jun 2018 06:12:00 -0700
> From: Thomas Young <thomasyoungca at gmail.com>
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] regression with Moran eigenvectors for multiple
>         years of data
> Message-ID:
>         <CAMJGZtxbhE7ES8XPBgxqGmLsu0q--iid+nB1ysa8BG2fd4RpVA at mail.
> gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hello,
>
> I think this is mostly a statistics question with possibly some R details.
> Any feedback is appreciated.
>
> I have several years of spatial biological sampling data in the same
> region but the number and locations of sites vary across year.  Very strong
> spatial autocorrelation is present in the data.
>
> I want to construct a regression model using Moran' eigenvectors as
> explanatory variables to account for SAC. For example,
>
> y_ijk=intercept+x1_ijk+x2_ijk+ EV_k
>
> where x1,x2 are environmental covariates and EV are Moran eigenvectors;
> i,j are location and k is year.
> Environmental covariate relationships with response variable are assumed
> constant across years.
>
> My plan was to first estimate using all years of data:
> y=intercept+x1+x2
> then use function ME in spdep to find identify Moran eigenvectors to
> reduce residual SAC using a year specific (index k) spatial weights and
> year-specific residuals using function ME from spdep package:
> EV_k=  ME(residuals_k~1, listw=weights_k), then linearly combine resulting
> eigenvectors for a given year into a single vector and then concatenate
> each year's vector such that the final Moran eignevector used in the
> regression is EV= c(EV_2014,EV_2015,EV_2016)
>
> and add EV as an offset or covariate as in the first equation shown.
>
> This approach seems to work quite well (eliminates residual SAC, doesn't
> shift regression coefficients substantially, improves model fit), I just
> don't know if it is statistically sound?
>
> thanks!
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From lc@br@l @ending from u@lbert@@c@  Thu Jun  7 20:02:41 2018
From: lc@br@l @ending from u@lbert@@c@ (Laura Cabral)
Date: Thu, 7 Jun 2018 12:02:41 -0600
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
Message-ID: <C8A2D539-4F16-4526-B27B-5E657DAF92AC@ualberta.ca>

Hello All,

I have been reading about spatiotemporal autocorrelation and slowly familiarizing myself with the concepts involved. I have also been combing through the CRAN spatiotemporal task view, but I can?t seem to find the appropriate package/function for my purposes.

What I want to do: 
I have two series of count data each for the same times and locations. Both series have been ordered from lowest count to highest count. I would like to identify where/when in space-time the series are similar (low-low count clusters, high-high count clusters) and where they do not correspond (high-low or low-high). Really, I am looking for a Moran?s I type index which can handle spatiotemporal data. I know this type of index has been developed (see for example Shen, Li and Si, 2016 - Spatiotemporal autocorrelation measures for nonstationary series), but I am unsure whether any of it has been translated into an R package/function. I do not (yet) have the mathematical/statistical/programming knowledge to implement those myself.


What I don?t want to do:
I have seen quite a bit of discussions or packages aimed at detrending or modelling the data. I do not need these functionalities. I have also seen separate handling of spatial and temporal autocorrelation for the same dataset. I would prefer an integrated index, if that is possible.

I feel like I might be looking for the wrong keywords, so any keywords, packages, functions, tutorials, videos, etc. that you could recommend would be greatly beneficial. As I mentioned, I am still familiarizing myself with spatiotemporal autocorrelation concepts, so if I seem to be approaching this from the completely wrong angle, please let me know!

Thank you all for your help,

Laura Cabral

 

MSc Candidate in Transportation Engineering

Dept of Civil and Environmental Engineering

University of Alberta

lcabral at ualberta.ca <mailto:lcabral at ualberta.ca>
819 993-1901


The University of Alberta is located in ???????????? (Amiskwac?w?skahikan) on Treaty 6 territory, homeland of the Papaschase and the M?tis Nation


	[[alternative HTML version deleted]]


From todd@mcdonnell @ending from e@environment@l@com  Thu Jun  7 20:42:16 2018
From: todd@mcdonnell @ending from e@environment@l@com (Todd McDonnell)
Date: Thu, 7 Jun 2018 11:42:16 -0700
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
In-Reply-To: <C8A2D539-4F16-4526-B27B-5E657DAF92AC@ualberta.ca>
References: <C8A2D539-4F16-4526-B27B-5E657DAF92AC@ualberta.ca>
Message-ID: <007c01d3fe8f$4386c300$ca944900$@esenvironmental.com>

Hi Laura,

It sounds like you may want to explore using the cross-correlation function (ccf) to compare the two sets of data through time:
http://stat.ethz.ch/R-manual/R-devel/library/stats/html/acf.html

Todd

--
Todd McDonnell
Research Scientist, Ph.D.
E&S Environmental Chemistry
Corvallis, OR | Ph. 541-758-1330
www.esenvironmental.com

-----Original Message-----
From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Laura Cabral
Sent: Thursday, June 07, 2018 11:03 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R

Hello All,

I have been reading about spatiotemporal autocorrelation and slowly familiarizing myself with the concepts involved. I have also been combing through the CRAN spatiotemporal task view, but I can?t seem to find the appropriate package/function for my purposes.

What I want to do: 
I have two series of count data each for the same times and locations. Both series have been ordered from lowest count to highest count. I would like to identify where/when in space-time the series are similar (low-low count clusters, high-high count clusters) and where they do not correspond (high-low or low-high). Really, I am looking for a Moran?s I type index which can handle spatiotemporal data. I know this type of index has been developed (see for example Shen, Li and Si, 2016 - Spatiotemporal autocorrelation measures for nonstationary series), but I am unsure whether any of it has been translated into an R package/function. I do not (yet) have the mathematical/statistical/programming knowledge to implement those myself.


What I don?t want to do:
I have seen quite a bit of discussions or packages aimed at detrending or modelling the data. I do not need these functionalities. I have also seen separate handling of spatial and temporal autocorrelation for the same dataset. I would prefer an integrated index, if that is possible.

I feel like I might be looking for the wrong keywords, so any keywords, packages, functions, tutorials, videos, etc. that you could recommend would be greatly beneficial. As I mentioned, I am still familiarizing myself with spatiotemporal autocorrelation concepts, so if I seem to be approaching this from the completely wrong angle, please let me know!

Thank you all for your help,

Laura Cabral

 

MSc Candidate in Transportation Engineering

Dept of Civil and Environmental Engineering

University of Alberta

lcabral at ualberta.ca <mailto:lcabral at ualberta.ca>
819 993-1901


The University of Alberta is located in ???????????? (Amiskwac?w?skahikan) on Treaty 6 territory, homeland of the Papaschase and the M?tis Nation


	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From lc@br@l @ending from u@lbert@@c@  Thu Jun  7 21:13:01 2018
From: lc@br@l @ending from u@lbert@@c@ (Laura Cabral)
Date: Thu, 7 Jun 2018 13:13:01 -0600
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
In-Reply-To: <007c01d3fe8f$4386c300$ca944900$@esenvironmental.com>
References: <C8A2D539-4F16-4526-B27B-5E657DAF92AC@ualberta.ca>
 <007c01d3fe8f$4386c300$ca944900$@esenvironmental.com>
Message-ID: <8A7ED5F0-8F35-4B3F-A78B-F34A30D84784@ualberta.ca>

Hi Todd,

Thank you for your suggestion. As I understand it, this takes care of the temporal aspect, but not the spatial aspect, am I right?

Thank you,
Laura Cabral

 

MSc Candidate in Transportation Engineering

Dept of Civil and Environmental Engineering

University of Alberta

lcabral at ualberta.ca <mailto:lcabral at ualberta.ca>
819 993-1901


The University of Alberta is located in ???????????? (Amiskwac?w?skahikan) on Treaty 6 territory, homeland of the Papaschase and the M?tis Nation

> Le 7 juin 2018 ? 12:42, Todd McDonnell <todd.mcdonnell at esenvironmental.com> a ?crit :
> 
> Hi Laura,
> 
> It sounds like you may want to explore using the cross-correlation function (ccf) to compare the two sets of data through time:
> http://stat.ethz.ch/R-manual/R-devel/library/stats/html/acf.html
> 
> Todd
> 
> --
> Todd McDonnell
> Research Scientist, Ph.D.
> E&S Environmental Chemistry
> Corvallis, OR | Ph. 541-758-1330
> www.esenvironmental.com
> 
> -----Original Message-----
> From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Laura Cabral
> Sent: Thursday, June 07, 2018 11:03 AM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
> 
> Hello All,
> 
> I have been reading about spatiotemporal autocorrelation and slowly familiarizing myself with the concepts involved. I have also been combing through the CRAN spatiotemporal task view, but I can?t seem to find the appropriate package/function for my purposes.
> 
> What I want to do: 
> I have two series of count data each for the same times and locations. Both series have been ordered from lowest count to highest count. I would like to identify where/when in space-time the series are similar (low-low count clusters, high-high count clusters) and where they do not correspond (high-low or low-high). Really, I am looking for a Moran?s I type index which can handle spatiotemporal data. I know this type of index has been developed (see for example Shen, Li and Si, 2016 - Spatiotemporal autocorrelation measures for nonstationary series), but I am unsure whether any of it has been translated into an R package/function. I do not (yet) have the mathematical/statistical/programming knowledge to implement those myself.
> 
> 
> What I don?t want to do:
> I have seen quite a bit of discussions or packages aimed at detrending or modelling the data. I do not need these functionalities. I have also seen separate handling of spatial and temporal autocorrelation for the same dataset. I would prefer an integrated index, if that is possible.
> 
> I feel like I might be looking for the wrong keywords, so any keywords, packages, functions, tutorials, videos, etc. that you could recommend would be greatly beneficial. As I mentioned, I am still familiarizing myself with spatiotemporal autocorrelation concepts, so if I seem to be approaching this from the completely wrong angle, please let me know!
> 
> Thank you all for your help,
> 
> Laura Cabral
> 
> 
> 
> MSc Candidate in Transportation Engineering
> 
> Dept of Civil and Environmental Engineering
> 
> University of Alberta
> 
> lcabral at ualberta.ca <mailto:lcabral at ualberta.ca>
> 819 993-1901
> 
> 
> The University of Alberta is located in ???????????? (Amiskwac?w?skahikan) on Treaty 6 territory, homeland of the Papaschase and the M?tis Nation
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 


	[[alternative HTML version deleted]]


From todd@mcdonnell @ending from e@environment@l@com  Thu Jun  7 22:15:44 2018
From: todd@mcdonnell @ending from e@environment@l@com (Todd McDonnell)
Date: Thu, 07 Jun 2018 13:15:44 -0700
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
In-Reply-To: <8A7ED5F0-8F35-4B3F-A78B-F34A30D84784@ualberta.ca>
References: <C8A2D539-4F16-4526-B27B-5E657DAF92AC@ualberta.ca>
 <007c01d3fe8f$4386c300$ca944900$@esenvironmental.com>
 <8A7ED5F0-8F35-4B3F-A78B-F34A30D84784@ualberta.ca>
Message-ID: <86DC6FDE-338C-422F-BA76-B45E9466606D@esenvironmental.com>

The ccf can be used to compare two time-series that occur at the same location or at different locations. You could loop through all possible pairs of time-series at the same or different locations to determine which were more or less correlated. I am not sure how to do the spatial and the temporal correlations simultaneously.

Todd

On June 7, 2018 12:13:01 PM MST, Laura Cabral <lcabral at ualberta.ca> wrote:
>Hi Todd,
>
>Thank you for your suggestion. As I understand it, this takes care of
>the temporal aspect, but not the spatial aspect, am I right?
>
>Thank you,
>Laura Cabral
>
> 
>
>MSc Candidate in Transportation Engineering
>
>Dept of Civil and Environmental Engineering
>
>University of Alberta
>
>lcabral at ualberta.ca <mailto:lcabral at ualberta.ca>
>819 993-1901
>
>
>The University of Alberta is located in ????????????
>(Amiskwac?w?skahikan) on Treaty 6 territory, homeland of the Papaschase
>and the M?tis Nation
>
>> Le 7 juin 2018 ? 12:42, Todd McDonnell
><todd.mcdonnell at esenvironmental.com> a ?crit :
>> 
>> Hi Laura,
>> 
>> It sounds like you may want to explore using the cross-correlation
>function (ccf) to compare the two sets of data through time:
>> http://stat.ethz.ch/R-manual/R-devel/library/stats/html/acf.html
>> 
>> Todd
>> 
>> --
>> Todd McDonnell
>> Research Scientist, Ph.D.
>> E&S Environmental Chemistry
>> Corvallis, OR | Ph. 541-758-1330
>> www.esenvironmental.com
>> 
>> -----Original Message-----
>> From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of
>Laura Cabral
>> Sent: Thursday, June 07, 2018 11:03 AM
>> To: r-sig-geo at r-project.org
>> Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
>> 
>> Hello All,
>> 
>> I have been reading about spatiotemporal autocorrelation and slowly
>familiarizing myself with the concepts involved. I have also been
>combing through the CRAN spatiotemporal task view, but I can?t seem to
>find the appropriate package/function for my purposes.
>> 
>> What I want to do: 
>> I have two series of count data each for the same times and
>locations. Both series have been ordered from lowest count to highest
>count. I would like to identify where/when in space-time the series are
>similar (low-low count clusters, high-high count clusters) and where
>they do not correspond (high-low or low-high). Really, I am looking for
>a Moran?s I type index which can handle spatiotemporal data. I know
>this type of index has been developed (see for example Shen, Li and Si,
>2016 - Spatiotemporal autocorrelation measures for nonstationary
>series), but I am unsure whether any of it has been translated into an
>R package/function. I do not (yet) have the
>mathematical/statistical/programming knowledge to implement those
>myself.
>> 
>> 
>> What I don?t want to do:
>> I have seen quite a bit of discussions or packages aimed at
>detrending or modelling the data. I do not need these functionalities.
>I have also seen separate handling of spatial and temporal
>autocorrelation for the same dataset. I would prefer an integrated
>index, if that is possible.
>> 
>> I feel like I might be looking for the wrong keywords, so any
>keywords, packages, functions, tutorials, videos, etc. that you could
>recommend would be greatly beneficial. As I mentioned, I am still
>familiarizing myself with spatiotemporal autocorrelation concepts, so
>if I seem to be approaching this from the completely wrong angle,
>please let me know!
>> 
>> Thank you all for your help,
>> 
>> Laura Cabral
>> 
>> 
>> 
>> MSc Candidate in Transportation Engineering
>> 
>> Dept of Civil and Environmental Engineering
>> 
>> University of Alberta
>> 
>> lcabral at ualberta.ca <mailto:lcabral at ualberta.ca>
>> 819 993-1901
>> 
>> 
>> The University of Alberta is located in ????????????
>(Amiskwac?w?skahikan) on Treaty 6 territory, homeland of the Papaschase
>and the M?tis Nation
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 

	[[alternative HTML version deleted]]


From r@f@@pereir@@br @ending from gm@il@com  Thu Jun  7 23:17:30 2018
From: r@f@@pereir@@br @ending from gm@il@com (Rafael Pereira)
Date: Thu, 7 Jun 2018 18:17:30 -0300
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
In-Reply-To: <86DC6FDE-338C-422F-BA76-B45E9466606D@esenvironmental.com>
References: <C8A2D539-4F16-4526-B27B-5E657DAF92AC@ualberta.ca>
 <007c01d3fe8f$4386c300$ca944900$@esenvironmental.com>
 <8A7ED5F0-8F35-4B3F-A78B-F34A30D84784@ualberta.ca>
 <86DC6FDE-338C-422F-BA76-B45E9466606D@esenvironmental.com>
Message-ID: <CAA42DG=x6WJTJ7WREkv+u+Sbas66P8p4N2i761QSxpoOvzWdSQ@mail.gmail.com>

Hi Laura,

I don't know any specific function/package that does precisely what you
want to do. A while ago, I wanted to run a bivariate spatial correlation in
R (bivariate LISA) and I couldn't find package with a function for such
task, despite being a fairly simple task. In the end, a colleague of mine
developed such function and we shared on StackOverflow and here in this
group as well. Link to SO:
https://stackoverflow.com/questions/45177590/map-of-bivariate-spatial-correlation-in-r-bivariate-lisa

Perhaps Chenhua Shen would be willing to share their code.

best,

Rafael H.M. Pereira
Transport Studies Unit (TSU)
Oxford University

On Thu, Jun 7, 2018 at 5:15 PM, Todd McDonnell <
todd.mcdonnell at esenvironmental.com> wrote:

> The ccf can be used to compare two time-series that occur at the same
> location or at different locations. You could loop through all possible
> pairs of time-series at the same or different locations to determine which
> were more or less correlated. I am not sure how to do the spatial and the
> temporal correlations simultaneously.
>
> Todd
>
> On June 7, 2018 12:13:01 PM MST, Laura Cabral <lcabral at ualberta.ca> wrote:
> >Hi Todd,
> >
> >Thank you for your suggestion. As I understand it, this takes care of
> >the temporal aspect, but not the spatial aspect, am I right?
> >
> >Thank you,
> >Laura Cabral
> >
> >
> >
> >MSc Candidate in Transportation Engineering
> >
> >Dept of Civil and Environmental Engineering
> >
> >University of Alberta
> >
> >lcabral at ualberta.ca <mailto:lcabral at ualberta.ca>
> >819 993-1901
> >
> >
> >The University of Alberta is located in ????????????
> >(Amiskwac?w?skahikan) on Treaty 6 territory, homeland of the Papaschase
> >and the M?tis Nation
> >
> >> Le 7 juin 2018 ? 12:42, Todd McDonnell
> ><todd.mcdonnell at esenvironmental.com> a ?crit :
> >>
> >> Hi Laura,
> >>
> >> It sounds like you may want to explore using the cross-correlation
> >function (ccf) to compare the two sets of data through time:
> >> http://stat.ethz.ch/R-manual/R-devel/library/stats/html/acf.html
> >>
> >> Todd
> >>
> >> --
> >> Todd McDonnell
> >> Research Scientist, Ph.D.
> >> E&S Environmental Chemistry
> >> Corvallis, OR | Ph. 541-758-1330
> >> www.esenvironmental.com
> >>
> >> -----Original Message-----
> >> From: R-sig-Geo [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of
> >Laura Cabral
> >> Sent: Thursday, June 07, 2018 11:03 AM
> >> To: r-sig-geo at r-project.org
> >> Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
> >>
> >> Hello All,
> >>
> >> I have been reading about spatiotemporal autocorrelation and slowly
> >familiarizing myself with the concepts involved. I have also been
> >combing through the CRAN spatiotemporal task view, but I can?t seem to
> >find the appropriate package/function for my purposes.
> >>
> >> What I want to do:
> >> I have two series of count data each for the same times and
> >locations. Both series have been ordered from lowest count to highest
> >count. I would like to identify where/when in space-time the series are
> >similar (low-low count clusters, high-high count clusters) and where
> >they do not correspond (high-low or low-high). Really, I am looking for
> >a Moran?s I type index which can handle spatiotemporal data. I know
> >this type of index has been developed (see for example Shen, Li and Si,
> >2016 - Spatiotemporal autocorrelation measures for nonstationary
> >series), but I am unsure whether any of it has been translated into an
> >R package/function. I do not (yet) have the
> >mathematical/statistical/programming knowledge to implement those
> >myself.
> >>
> >>
> >> What I don?t want to do:
> >> I have seen quite a bit of discussions or packages aimed at
> >detrending or modelling the data. I do not need these functionalities.
> >I have also seen separate handling of spatial and temporal
> >autocorrelation for the same dataset. I would prefer an integrated
> >index, if that is possible.
> >>
> >> I feel like I might be looking for the wrong keywords, so any
> >keywords, packages, functions, tutorials, videos, etc. that you could
> >recommend would be greatly beneficial. As I mentioned, I am still
> >familiarizing myself with spatiotemporal autocorrelation concepts, so
> >if I seem to be approaching this from the completely wrong angle,
> >please let me know!
> >>
> >> Thank you all for your help,
> >>
> >> Laura Cabral
> >>
> >>
> >>
> >> MSc Candidate in Transportation Engineering
> >>
> >> Dept of Civil and Environmental Engineering
> >>
> >> University of Alberta
> >>
> >> lcabral at ualberta.ca <mailto:lcabral at ualberta.ca>
> >> 819 993-1901
> >>
> >>
> >> The University of Alberta is located in ????????????
> >(Amiskwac?w?skahikan) on Treaty 6 territory, homeland of the Papaschase
> >and the M?tis Nation
> >>
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From N@then@H@rp @ending from dot@ny@gov  Fri Jun  8 15:01:26 2018
From: N@then@H@rp @ending from dot@ny@gov (Harp, Nathen (DOT))
Date: Fri, 8 Jun 2018 13:01:26 +0000
Subject: [R-sig-Geo] Spatiotemporal autocorrelation in R
Message-ID: <MWHPR09MB2256443590E32C6E4251CB07D17B0@MWHPR09MB2256.namprd09.prod.outlook.com>

There are a couple software packages you might want to check out.  I believe Geoda (Luc Anselin) has bivariate LISA functions and LISTA-Viz has spatiotemporal autocorrelation functions as well.



Nathen M. Harp
Transportation - GIS Analyst
NYSDOT-Policy & Planning Division
Demographic Analysis & Forecasting
Fl 6 - Ave E - 10th St
50 Wolf Rd.
Albany, NY 12232
Ph: 518-485-0968
Fx: 518-485-8276
Email: Nathen.Harp at dot.ny.gov


	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Fri Jun  8 20:15:14 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Fri, 8 Jun 2018 20:15:14 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
Message-ID: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>

There are new releases of sp, rgdal and rgeos on CRAN. Please install sp 
first, then the other two, which link to the installed sp. They all 
address so-called rchk issues, which have not so far been a problem, but 
might have become more fragile as R's internal memory management is made 
even more efficient. This involves compiled code using memory allocated by 
R to be freed by R's garbage collector, which has to know if an object is 
still being used. Tomas Kalibera, the author of rchk, helped resolve and 
explain the issues encountered - what was good coding practice fifteen 
years ago isn't always still good practice.

In addition, the earliest versions of GDAL and PROJ with which rgdal will 
work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current 
released versions of PROJ and GDAL are to be prefered, as bugs have been 
fixed and new features and drivers introduced. A check has been put 
in place to trap attempts to install rgdal without a C++11-capable 
compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is 
ready for the forthcoming version of GEOS.

The CRAN team has also been very supportive of our efforts to bring 
compiled code in these packages into rchk compliance.

Please get in touch if you see any loose ends in these releases.

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From min@h@ll @ending from @cm@org  Sat Jun  9 01:33:17 2018
From: min@h@ll @ending from @cm@org (Greg Minshall)
Date: Fri, 08 Jun 2018 16:33:17 -0700
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: Your message of "Fri, 08 Jun 2018 20:15:14 +0200."
 <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
Message-ID: <25245.1528500797@minshall-apollo.minshall.org>

hi, Roger,

could you give the version numbers of the new sp, rgdal, rgeos?  (not
that i don't trust CRAN to be up-to-date.)

cheers, Greg


From Roger@Biv@nd @ending from nhh@no  Sat Jun  9 08:56:31 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Sat, 9 Jun 2018 06:56:31 +0000
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <25245.1528500797@minshall-apollo.minshall.org>
References: Your message of "Fri, 08 Jun 2018 20:15:14 +0200."
 <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>,
 <25245.1528500797@minshall-apollo.minshall.org>
Message-ID: <BDBEEBC63E3A2C25.014895de-e3cc-42ff-a249-b22d25b1d1ae@mail.outlook.com>

sp 1.3-1, rgdal 1.3-2, rgeos 0.3-28.

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Greg Minshall
Sendt: l?rdag 9. juni, 01.33
Emne: Re: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
Til: Roger Bivand
Kopi: r-sig-geo at r-project.org


hi, Roger, could you give the version numbers of the new sp, rgdal, rgeos? (not that i don't trust CRAN to be up-to-date.) cheers, Greg


	[[alternative HTML version deleted]]


From thi_velo@o @ending from y@hoo@com@br  Sat Jun  9 21:46:15 2018
From: thi_velo@o @ending from y@hoo@com@br (Thiago V. dos Santos)
Date: Sat, 9 Jun 2018 19:46:15 +0000 (UTC)
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
Message-ID: <1430599590.2907591.1528573575719@mail.yahoo.com>

Dear Roger,
Thank you very much for the excellent work done with those packages.
Today I update both rgeos and rgdal on my system - macOS 10.13.5 with all dependencies installed via MacPorts. I had updated sp a few days earlier.
The dependencies versions on my system are gdal @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj @5.1.0_0.
Rgeos's update went flawlessly, but I got a few errors while updating rgdal. It still compiled successfully, but I am concerned that some functionality might be compromised due to the errors.
This is what I got (I have to manually specify the location of proj or rgdal won't find it):> install.packages('rgdal', type = "source", configure.args=c(
+     '--with-proj-include=/opt/local/lib/proj5/include',
+     '--with-proj-lib=/opt/local/lib/proj5/lib'))
Installing package into ?/Users/thiago/Documents/R-packages?
(as ?lib? is unspecified)
trying URL 'https://cran.r-project.org/src/contrib/rgdal_1.3-2.tar.gz'
Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
==================================================
downloaded 1.6 MB

* installing *source* package ?rgdal? ...
** package ?rgdal? successfully unpacked and MD5 sums checked
configure: CC: /usr/bin/clang
configure: CXX: /usr/bin/clang++
configure: rgdal: 1.3-2
checking for /usr/bin/svnversion... yes
configure: svn revision: 755
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether /usr/bin/clang++ accepts -g... yes
checking whether /usr/bin/clang++ supports C++11 features by default... no
checking whether /usr/bin/clang++ supports C++11 features with -std=gnu++11... yes
configure: C++11 support available
checking for gdal-config... /opt/local/bin/gdal-config
checking gdal-config usability... yes
configure: GDAL: 2.4.0
checking C++11 support for GDAL >= 2.3.0... yes
checking GDAL version >= 1.11.4... yes
checking gdal: linking with --libs only... yes
checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
checking proj_api.h presence and usability... yes
./configure: line 3395: test: =: unary operator expected
checking PROJ version >= 4.8.0... yes
checking projects.h presence and usability... yes
Undefined symbols for architecture x86_64:
  "_pj_ctx_fclose", referenced from:
      _main in proj_conf_test2-06fe7d.o
  "_pj_get_default_ctx", referenced from:
      _main in proj_conf_test2-06fe7d.o
  "_pj_open_lib", referenced from:
      _main in proj_conf_test2-06fe7d.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
./configure: line 3511: ./proj_conf_test2: No such file or directory
checking PROJ.4: epsg found and readable... yes
Undefined symbols for architecture x86_64:
  "_pj_ctx_fclose", referenced from:
      _main in proj_conf_test3-3b7aa2.o
  "_pj_get_default_ctx", referenced from:
      _main in proj_conf_test3-3b7aa2.o
  "_pj_open_lib", referenced from:
      _main in proj_conf_test3-3b7aa2.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
./configure: line 3570: ./proj_conf_test3: No such file or directory
checking PROJ.4: conus found and readable... yes
configure: Package CPP flags:  -I/opt/local/include -I/opt/local/lib/proj5/include
configure: Package LIBS:  -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
configure: creating ./config.status
config.status: creating src/Makevars
** libs
clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
/usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
/usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2  -c inverser.c -o inverser.o
/usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2  -c local_stubs.c -o local_stubs.o
clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
/usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2  -c ogr_polygons.c -o ogr_polygons.o
clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c projectit.cpp -o projectit.o
clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o projectit.o -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
installing to /Users/thiago/Documents/R-packages/rgdal/libs
** R
** data
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded
* DONE (rgdal)

The downloaded source packages are in
    ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn/T/Rtmp5K6lt8/downloaded_packages?
?
Is this something that needs to be investigated, or I can just safely ignore those messages?
Many thanks,?-- Thiago V. dos Santos
Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan 

    On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <Roger.Bivand at nhh.no> wrote:  
 
 There are new releases of sp, rgdal and rgeos on CRAN. Please install sp 
first, then the other two, which link to the installed sp. They all 
address so-called rchk issues, which have not so far been a problem, but 
might have become more fragile as R's internal memory management is made 
even more efficient. This involves compiled code using memory allocated by 
R to be freed by R's garbage collector, which has to know if an object is 
still being used. Tomas Kalibera, the author of rchk, helped resolve and 
explain the issues encountered - what was good coding practice fifteen 
years ago isn't always still good practice.

In addition, the earliest versions of GDAL and PROJ with which rgdal will 
work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current 
released versions of PROJ and GDAL are to be prefered, as bugs have been 
fixed and new features and drivers introduced. A check has been put 
in place to trap attempts to install rgdal without a C++11-capable 
compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is 
ready for the forthcoming version of GEOS.

The CRAN team has also been very supportive of our efforts to bring 
compiled code in these packages into rchk compliance.

Please get in touch if you see any loose ends in these releases.

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo
  
	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Sun Jun 10 10:45:12 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Sun, 10 Jun 2018 10:45:12 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <1430599590.2907591.1528573575719@mail.yahoo.com>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <1430599590.2907591.1528573575719@mail.yahoo.com>
Message-ID: <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>

Thanks for reporting, comments inline below (note that I have no OSX 
access at all):

On Sat, 9 Jun 2018, Thiago V. dos Santos wrote:

> Dear Roger,
> Thank you very much for the excellent work done with those packages.
> Today I update both rgeos and rgdal on my system - macOS 10.13.5 with 
> all dependencies installed via MacPorts. I had updated sp a few days 
> earlier. The dependencies versions on my system are gdal 
> @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj @5.1.0_0. 
> Rgeos's update went flawlessly, but I got a few errors while updating 
> rgdal. It still compiled successfully, but I am concerned that some 
> functionality might be compromised due to the errors.
> This is what I got (I have to manually specify the location of proj or 
> rgdal won't find it):> install.packages('rgdal', type = "source", 
> configure.args=c(
> +     '--with-proj-include=/opt/local/lib/proj5/include',
> +     '--with-proj-lib=/opt/local/lib/proj5/lib'))
> Installing package into ?/Users/thiago/Documents/R-packages?
> (as ?lib? is unspecified)
> trying URL 'https://cran.r-project.org/src/contrib/rgdal_1.3-2.tar.gz'
> Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
> ==================================================
> downloaded 1.6 MB
>
> * installing *source* package ?rgdal? ...
> ** package ?rgdal? successfully unpacked and MD5 sums checked
> configure: CC: /usr/bin/clang
> configure: CXX: /usr/bin/clang++
> configure: rgdal: 1.3-2
> checking for /usr/bin/svnversion... yes
> configure: svn revision: 755
> checking whether the C++ compiler works... yes
> checking for C++ compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C++ compiler... yes
> checking whether /usr/bin/clang++ accepts -g... yes
> checking whether /usr/bin/clang++ supports C++11 features by default... no
> checking whether /usr/bin/clang++ supports C++11 features with -std=gnu++11... yes
> configure: C++11 support available
> checking for gdal-config... /opt/local/bin/gdal-config
> checking gdal-config usability... yes
> configure: GDAL: 2.4.0

All OK up to the GDAL version returned by gdal-config - are you using the 
released GDAL 2.3.0 (probably not) or master?

> checking C++11 support for GDAL >= 2.3.0... yes
> checking GDAL version >= 1.11.4... yes
> checking gdal: linking with --libs only... yes
> checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
> checking proj_api.h presence and usability... yes
> ./configure: line 3395: test: =: unary operator expected

Will check, that line is:

if test ${PROJ_VERSION} = "" ; then

from configure.ac line 305. Possibly a shell dialect issue.

> checking PROJ version >= 4.8.0... yes
> checking projects.h presence and usability... yes

These relate to configure.ac lines 376-419, and the outcome: epsg found 
and readable is OK - could there be two libproj on your system (maybe for 
different architectures)?

> Undefined symbols for architecture x86_64:
>  "_pj_ctx_fclose", referenced from:
>      _main in proj_conf_test2-06fe7d.o
>  "_pj_get_default_ctx", referenced from:
>      _main in proj_conf_test2-06fe7d.o
>  "_pj_open_lib", referenced from:
>      _main in proj_conf_test2-06fe7d.o
> ld: symbol(s) not found for architecture x86_64
> clang: error: linker command failed with exit code 1 (use -v to see invocation)
> ./configure: line 3511: ./proj_conf_test2: No such file or directory
> checking PROJ.4: epsg found and readable... yes

Same here for next block in configure.ac; conus found and readable.

> Undefined symbols for architecture x86_64:
>  "_pj_ctx_fclose", referenced from:
>      _main in proj_conf_test3-3b7aa2.o
>  "_pj_get_default_ctx", referenced from:
>      _main in proj_conf_test3-3b7aa2.o
>  "_pj_open_lib", referenced from:
>      _main in proj_conf_test3-3b7aa2.o
> ld: symbol(s) not found for architecture x86_64
> clang: error: linker command failed with exit code 1 (use -v to see invocation)
> ./configure: line 3570: ./proj_conf_test3: No such file or directory
> checking PROJ.4: conus found and readable... yes
> configure: Package CPP flags:  -I/opt/local/include -I/opt/local/lib/proj5/include
> configure: Package LIBS:  -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2  -c init.c -o init.o
> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2  -c inverser.c -o inverser.o
> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2  -c local_stubs.c -o local_stubs.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2  -c ogr_polygons.c -o ogr_polygons.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c projectit.cpp -o projectit.o
> clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o projectit.o -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
> installing to /Users/thiago/Documents/R-packages/rgdal/libs
> ** R
> ** data
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded
> * DONE (rgdal)
>
> The downloaded source packages are in
> 
> ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn/T/Rtmp5K6lt8/downloaded_packages? 
> ?Is this something that needs to be investigated, or I can just safely 
> ignore those messages?

Please try to run:

tools::testInstalledPackage("rgdal", outDir=tempdir())
list.files(tempdir())
file.show(file.path(tempdir(), "rgdal-Ex.Rout"))

and if the outcomes are as expected, you should be OK, please let us know.

If any OSX users installing from source can contribute, that would be 
useful. It will take a little while before the CRAN OSX binaries catch up 
with new PROJ and GDAL.

Again thanks for reporting!

Roger

> Many thanks,?-- Thiago V. dos Santos
> Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan
>
>    On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
> first, then the other two, which link to the installed sp. They all
> address so-called rchk issues, which have not so far been a problem, but
> might have become more fragile as R's internal memory management is made
> even more efficient. This involves compiled code using memory allocated by
> R to be freed by R's garbage collector, which has to know if an object is
> still being used. Tomas Kalibera, the author of rchk, helped resolve and
> explain the issues encountered - what was good coding practice fifteen
> years ago isn't always still good practice.
>
> In addition, the earliest versions of GDAL and PROJ with which rgdal will
> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
> released versions of PROJ and GDAL are to be prefered, as bugs have been
> fixed and new features and drivers introduced. A check has been put
> in place to trap attempts to install rgdal without a C++11-capable
> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
> ready for the forthcoming version of GEOS.
>
> The CRAN team has also been very supportive of our efforts to bring
> compiled code in these packages into rchk compliance.
>
> Please get in touch if you see any loose ends in these releases.
>
> Roger
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From gbl1 @ending from hi@i@  Mon Jun 11 08:34:29 2018
From: gbl1 @ending from hi@i@ (Gilles Benjamin Leduc)
Date: Mon, 11 Jun 2018 06:34:29 +0000
Subject: [R-sig-Geo] =?utf-8?q?CRAN_releases_of__sp=2C_rgdal_and_rgeos?=
In-Reply-To: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
Message-ID: <1de9-5b1e1800-30b-17c48020@113144810>

 Good monday! 

I tried to update rgdal, I get a warning telling me the installation had a non-null exit status. I haven't cheak if it was working? 

Benjamin 
 
 
Le Vendredi 8 Juin 2018 18:15 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit: 
 
> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp 
> first, then the other two, which link to the installed sp. They all 

> address so-called rchk issues, which have not so far been a problem, but 
> might have become more fragile as R's internal memory management is made 
> even more efficient. This involves compiled code using memory allocated by 
> R to be freed by R's garbage collector, which has to know if an object is 
> still being used. Tomas Kalibera, the author of rchk, helped resolve and 
> explain the issues encountered - what was good coding practice fifteen 
> years ago isn't always still good practice.
> 
> In addition, the earliest versions of GDAL and PROJ with which rgdal will 
> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current 
> released versions of PROJ and GDAL are to be prefered, as bugs have been 
> fixed and new features and drivers introduced. A check has been put 

> in place to trap attempts to install rgdal without a C++11-capable 
> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is 
> ready for the forthcoming version of GEOS.
> 
> The CRAN team has also been very supportive of our efforts to bring 

> compiled code in these packages into rchk compliance.
> 
> Please get in touch if you see any loose ends in these releases.
> 
> Roger
> 
> -- 
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Roger@Biv@nd @ending from nhh@no  Mon Jun 11 09:53:12 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Mon, 11 Jun 2018 09:53:12 +0200
Subject: [R-sig-Geo] CRAN releases of  sp, rgdal and rgeos
In-Reply-To: <1de9-5b1e1800-30b-17c48020@113144810>
References: <1de9-5b1e1800-30b-17c48020@113144810>
Message-ID: <alpine.LFD.2.21.1806110951070.8525@reclus.nhh.no>

On Mon, 11 Jun 2018, Gilles Benjamin Leduc wrote:

> Good monday!
>
> I tried to update rgdal, I get a warning telling me the installation had 
> a non-null exit status. I haven't cheak if it was working?

Thanks for responding - every user data point helps!

Could you please provide the output of sessionInfo(), and any error 
messages you see on trying to update?

Roger

>
> Benjamin
>
>
> Le Vendredi 8 Juin 2018 18:15 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit:
>
>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>> first, then the other two, which link to the installed sp. They all
>
>> address so-called rchk issues, which have not so far been a problem, but
>> might have become more fragile as R's internal memory management is made
>> even more efficient. This involves compiled code using memory allocated by
>> R to be freed by R's garbage collector, which has to know if an object is
>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>> explain the issues encountered - what was good coding practice fifteen
>> years ago isn't always still good practice.
>>
>> In addition, the earliest versions of GDAL and PROJ with which rgdal will
>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>> fixed and new features and drivers introduced. A check has been put
>
>> in place to trap attempts to install rgdal without a C++11-capable
>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
>> ready for the forthcoming version of GEOS.
>>
>> The CRAN team has also been very supportive of our efforts to bring
>
>> compiled code in these packages into rchk compliance.
>>
>> Please get in touch if you see any loose ends in these releases.
>>
>> Roger
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From gbl1 @ending from hi@i@  Mon Jun 11 11:15:18 2018
From: gbl1 @ending from hi@i@ (Gilles Benjamin Leduc)
Date: Mon, 11 Jun 2018 09:15:18 +0000
Subject: [R-sig-Geo] 
 =?utf-8?q?CRAN_releases_of____sp=2C_rgdal_and_rgeos?=
Message-ID: <5ff-5b1e3d80-14d-418a570@49111530>

 
 

-------- Message original -------- 
Sujet: Re: [R-sig-Geo] CRAN releases of   sp, rgdal and rgeos 
Date: Lundi 11 Juin 2018 08:24 GMT 
De: "Gilles Benjamin Leduc" <gbl1 at hi.is> 
Pour: Roger.Bivand at nhh.no 
 
 
Here it is: 

> sessionInfo()
R version 3.4.2 (2017-09-28)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.5

Matrix products: default
BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] fr_FR.UTF-8/fr_FR.UTF-8/fr_FR.UTF-8/C/fr_FR.UTF-8/fr_FR.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RColorBrewer_1.1-2 seqinr_3.4-5      

loaded via a namespace (and not attached):
[1] MASS_7.3-50    compiler_3.4.2 tools_3.4.2    ade4_1.7-11 




installing to /Library/Frameworks/R.framework/Versions/3.4/Resources/library/utf8/libs
** R
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded
* DONE (utf8)
Warning in strptime(xx, f <- "%Y-%m-%d %H:%M:%OS", tz = tz) :
  unknown timezone 'zone/tz/2018c.1.0/zoneinfo/Europe/Helsinki'
* installing *source* package ?rgdal? ...
** package ?rgdal? correctement d?compress? et sommes MD5 v?rifi?es
configure: CC: clang
configure: CXX: clang++
configure: rgdal: 1.3-2
checking for /usr/bin/svnversion... yes
configure: svn revision: 755
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether clang++ accepts -g... yes
checking whether clang++ supports C++11 features by default... no
checking whether clang++ supports C++11 features with -std=gnu++11... yes
configure: C++11 support available
checking for gdal-config... no
no
configure: error: gdal-config not found or not executable.
ERROR: configuration failed for package ?rgdal?
* removing ?/Library/Frameworks/R.framework/Versions/3.4/Resources/library/rgdal?
* restoring previous ?/Library/Frameworks/R.framework/Versions/3.4/Resources/library/rgdal?

Les packages source t?l?charg?s sont dans
	?/private/var/folders/j0/gxxcvrr13rgg1xwfmf01yb240000gn/T/RtmpUleCF6/downloaded_packages?
Warning message:
In install.packages(update[instlib == l, "Package"], l, repos = repos,  :
  l'installation du package ?rgdal? a eu un statut de sortie non nul


Have a nice Monday

Benjamin  
 
 
Le Lundi 11 Juin 2018 07:53 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit: 
 
> On Mon, 11 Jun 2018, Gilles Benjamin Leduc wrote:
> 
> > Good monday!
> >
> > I tried to update rgdal, I get a warning telling me the installation had 
> > a non-null exit status. I haven't cheak if it was working?> 
> Thanks for responding - every user data point helps!
> 
> Could you please provide the output of sessionInfo(), and any error > messages you see on trying to update?
> 
> Roger
> 
> >
> > Benjamin
> >
> >
> > Le Vendredi 8 Juin 2018 18:15 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit:
> >
> >> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
> >> first, then the other two, which link to the installed sp. They all
> >
> >> address so-called rchk issues, which have not so far been a problem, but
> >> might have become more fragile as R's internal memory management is made
> >> even more efficient. This involves compiled code using memory allocated by
> >> R to be freed by R's garbage collector, which has to know if an object is
> >> still being used. Tomas Kalibera, the author of rchk, helped resolve and
> >> explain the issues encountered - what was good coding practice fifteen
> >> years ago isn't always still good practice.
> >>
> >> In addition, the earliest versions of GDAL and PROJ with which rgdal will
> >> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
> >> released versions of PROJ and GDAL are to be prefered, as bugs have been
> >> fixed and new features and drivers introduced. A check has been put
> >
> >> in place to trap attempts to install rgdal without a C++11-capable> >> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
> >> ready for the forthcoming version of GEOS.
> >>
> >> The CRAN team has also been very supportive of our efforts to bring
> >
> >> compiled code in these packages into rchk compliance.
> >>
> >> Please get in touch if you see any loose ends in these releases.
> >>
> >> Roger
> >>
> >> --
> >> Roger Bivand
> >> Department of Economics, Norwegian School of Economics,
> >> Helleveien 30, N-5045 Bergen, Norway.
> >> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> >> http://orcid.org/0000-0003-2392-6140
> >> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
> >
> >
> >
> 
> -- 
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From btupper @ending from bigelow@org  Mon Jun 11 19:56:58 2018
From: btupper @ending from bigelow@org (Ben Tupper)
Date: Mon, 11 Jun 2018 13:56:58 -0400
Subject: [R-sig-Geo] CRAN releases of  sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806110951070.8525@reclus.nhh.no>
References: <1de9-5b1e1800-30b-17c48020@113144810>
 <alpine.LFD.2.21.1806110951070.8525@reclus.nhh.no>
Message-ID: <12667D12-948B-499D-9486-3576730B73B4@bigelow.org>

Hi,

I have been able to install all three without issue.  I have encountered no issues with usage.  

> sessionInfo()
R version 3.5.0 (2018-04-23)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Sierra 10.12.6

Matrix products: default
BLAS: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] rgeos_0.3-28 rgdal_1.3-2  sp_1.3-1    

loaded via a namespace (and not attached):
[1] compiler_3.5.0  tools_3.5.0     grid_3.5.0      lattice_0.20-35

Thanks for all you do!

Cheers,
Ben


> On Jun 11, 2018, at 3:53 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> On Mon, 11 Jun 2018, Gilles Benjamin Leduc wrote:
> 
>> Good monday!
>> 
>> I tried to update rgdal, I get a warning telling me the installation had a non-null exit status. I haven't cheak if it was working?
> 
> Thanks for responding - every user data point helps!
> 
> Could you please provide the output of sessionInfo(), and any error messages you see on trying to update?
> 
> Roger
> 
>> 
>> Benjamin
>> 
>> 
>> Le Vendredi 8 Juin 2018 18:15 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit:
>> 
>>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>>> first, then the other two, which link to the installed sp. They all
>> 
>>> address so-called rchk issues, which have not so far been a problem, but
>>> might have become more fragile as R's internal memory management is made
>>> even more efficient. This involves compiled code using memory allocated by
>>> R to be freed by R's garbage collector, which has to know if an object is
>>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>>> explain the issues encountered - what was good coding practice fifteen
>>> years ago isn't always still good practice.
>>> 
>>> In addition, the earliest versions of GDAL and PROJ with which rgdal will
>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
>>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>>> fixed and new features and drivers introduced. A check has been put
>> 
>>> in place to trap attempts to install rgdal without a C++11-capable
>>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
>>> ready for the forthcoming version of GEOS.
>>> 
>>> The CRAN team has also been very supportive of our efforts to bring
>> 
>>> compiled code in these packages into rchk compliance.
>>> 
>>> Please get in touch if you see any loose ends in these releases.
>>> 
>>> Roger
>>> 
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>> 
>> 
>> 
>> 
> 
> -- 
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
> http://orcid.org/0000-0003-2392-6140 <http://orcid.org/0000-0003-2392-6140>
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________ <https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________>
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecological Forecasting: https://eco.bigelow.org/






	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Mon Jun 11 21:45:31 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Mon, 11 Jun 2018 21:45:31 +0200
Subject: [R-sig-Geo] CRAN releases of  sp, rgdal and rgeos
In-Reply-To: <12667D12-948B-499D-9486-3576730B73B4@bigelow.org>
References: <1de9-5b1e1800-30b-17c48020@113144810>
 <alpine.LFD.2.21.1806110951070.8525@reclus.nhh.no>
 <12667D12-948B-499D-9486-3576730B73B4@bigelow.org>
Message-ID: <alpine.LFD.2.21.1806112140510.9747@reclus.nhh.no>

On Mon, 11 Jun 2018, Ben Tupper wrote:

> Hi,
>
> I have been able to install all three without issue.  I have encountered 
> no issues with usage.

Ben,

Thanks for this report. How did you install rgdal - CRAN binary (now at 
1.3.2 for R 3.5.0) or source install using GDAL and PROJ installed in what 
way? It's useful to record ways in which installation on OSX has been 
accomplished.

Roger



>
>> sessionInfo()
> R version 3.5.0 (2018-04-23)
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> Running under: macOS Sierra 10.12.6
>
> Matrix products: default
> BLAS: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRblas.0.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] rgeos_0.3-28 rgdal_1.3-2  sp_1.3-1
>
> loaded via a namespace (and not attached):
> [1] compiler_3.5.0  tools_3.5.0     grid_3.5.0      lattice_0.20-35
>
> Thanks for all you do!
>
> Cheers,
> Ben
>
>
>> On Jun 11, 2018, at 3:53 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>
>> On Mon, 11 Jun 2018, Gilles Benjamin Leduc wrote:
>>
>>> Good monday!
>>>
>>> I tried to update rgdal, I get a warning telling me the installation had a non-null exit status. I haven't cheak if it was working?
>>
>> Thanks for responding - every user data point helps!
>>
>> Could you please provide the output of sessionInfo(), and any error messages you see on trying to update?
>>
>> Roger
>>
>>>
>>> Benjamin
>>>
>>>
>>> Le Vendredi 8 Juin 2018 18:15 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit:
>>>
>>>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>>>> first, then the other two, which link to the installed sp. They all
>>>
>>>> address so-called rchk issues, which have not so far been a problem, but
>>>> might have become more fragile as R's internal memory management is made
>>>> even more efficient. This involves compiled code using memory allocated by
>>>> R to be freed by R's garbage collector, which has to know if an object is
>>>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>>>> explain the issues encountered - what was good coding practice fifteen
>>>> years ago isn't always still good practice.
>>>>
>>>> In addition, the earliest versions of GDAL and PROJ with which rgdal will
>>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
>>>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>>>> fixed and new features and drivers introduced. A check has been put
>>>
>>>> in place to trap attempts to install rgdal without a C++11-capable
>>>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
>>>> ready for the forthcoming version of GEOS.
>>>>
>>>> The CRAN team has also been very supportive of our efforts to bring
>>>
>>>> compiled code in these packages into rchk compliance.
>>>>
>>>> Please get in touch if you see any loose ends in these releases.
>>>>
>>>> Roger
>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
>> http://orcid.org/0000-0003-2392-6140 <http://orcid.org/0000-0003-2392-6140>
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________ <https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________>
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
> Ecological Forecasting: https://eco.bigelow.org/
>
>
>
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From btupper @ending from bigelow@org  Mon Jun 11 21:51:57 2018
From: btupper @ending from bigelow@org (Ben Tupper)
Date: Mon, 11 Jun 2018 15:51:57 -0400
Subject: [R-sig-Geo] CRAN releases of  sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806112140510.9747@reclus.nhh.no>
References: <1de9-5b1e1800-30b-17c48020@113144810>
 <alpine.LFD.2.21.1806110951070.8525@reclus.nhh.no>
 <12667D12-948B-499D-9486-3576730B73B4@bigelow.org>
 <alpine.LFD.2.21.1806112140510.9747@reclus.nhh.no>
Message-ID: <1C22E496-E3B5-4DDB-8C3D-66F395D3DDAB@bigelow.org>

Hi,

I used CRAN binary ala ...

> install.packages("rgdal")

I used that same for sp and rgeos.  

Ben


> On Jun 11, 2018, at 3:45 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> On Mon, 11 Jun 2018, Ben Tupper wrote:
> 
>> Hi,
>> 
>> I have been able to install all three without issue.  I have encountered no issues with usage.
> 
> Ben,
> 
> Thanks for this report. How did you install rgdal - CRAN binary (now at 1.3.2 for R 3.5.0) or source install using GDAL and PROJ installed in what way? It's useful to record ways in which installation on OSX has been accomplished.
> 
> Roger
> 
> 
> 
>> 
>>> sessionInfo()
>> R version 3.5.0 (2018-04-23)
>> Platform: x86_64-apple-darwin15.6.0 (64-bit)
>> Running under: macOS Sierra 10.12.6
>> 
>> Matrix products: default
>> BLAS: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRblas.0.dylib
>> LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> other attached packages:
>> [1] rgeos_0.3-28 rgdal_1.3-2  sp_1.3-1
>> 
>> loaded via a namespace (and not attached):
>> [1] compiler_3.5.0  tools_3.5.0     grid_3.5.0      lattice_0.20-35
>> 
>> Thanks for all you do!
>> 
>> Cheers,
>> Ben
>> 
>> 
>>> On Jun 11, 2018, at 3:53 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>> 
>>> On Mon, 11 Jun 2018, Gilles Benjamin Leduc wrote:
>>> 
>>>> Good monday!
>>>> 
>>>> I tried to update rgdal, I get a warning telling me the installation had a non-null exit status. I haven't cheak if it was working?
>>> 
>>> Thanks for responding - every user data point helps!
>>> 
>>> Could you please provide the output of sessionInfo(), and any error messages you see on trying to update?
>>> 
>>> Roger
>>> 
>>>> 
>>>> Benjamin
>>>> 
>>>> 
>>>> Le Vendredi 8 Juin 2018 18:15 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit:
>>>> 
>>>>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>>>>> first, then the other two, which link to the installed sp. They all
>>>> 
>>>>> address so-called rchk issues, which have not so far been a problem, but
>>>>> might have become more fragile as R's internal memory management is made
>>>>> even more efficient. This involves compiled code using memory allocated by
>>>>> R to be freed by R's garbage collector, which has to know if an object is
>>>>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>>>>> explain the issues encountered - what was good coding practice fifteen
>>>>> years ago isn't always still good practice.
>>>>> 
>>>>> In addition, the earliest versions of GDAL and PROJ with which rgdal will
>>>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
>>>>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>>>>> fixed and new features and drivers introduced. A check has been put
>>>> 
>>>>> in place to trap attempts to install rgdal without a C++11-capable
>>>>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
>>>>> ready for the forthcoming version of GEOS.
>>>>> 
>>>>> The CRAN team has also been very supportive of our efforts to bring
>>>> 
>>>>> compiled code in these packages into rchk compliance.
>>>>> 
>>>>> Please get in touch if you see any loose ends in these releases.
>>>>> 
>>>>> Roger
>>>>> 
>>>>> --
>>>>> Roger Bivand
>>>>> Department of Economics, Norwegian School of Economics,
>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>> http://orcid.org/0000-0003-2392-6140
>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>> 
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>> 
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
>>> http://orcid.org/0000-0003-2392-6140 <http://orcid.org/0000-0003-2392-6140>
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________ <https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________>
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>> Ben Tupper
>> Bigelow Laboratory for Ocean Sciences
>> 60 Bigelow Drive, P.O. Box 380
>> East Boothbay, Maine 04544
>> http://www.bigelow.org
>> 
>> Ecological Forecasting: https://eco.bigelow.org/
>> 
>> 
>> 
>> 
>> 
>> 
> 
> -- 
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecological Forecasting: https://eco.bigelow.org/






	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Mon Jun 11 21:54:25 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Mon, 11 Jun 2018 21:54:25 +0200
Subject: [R-sig-Geo] CRAN releases of  sp, rgdal and rgeos
In-Reply-To: <1C22E496-E3B5-4DDB-8C3D-66F395D3DDAB@bigelow.org>
References: <1de9-5b1e1800-30b-17c48020@113144810>
 <alpine.LFD.2.21.1806110951070.8525@reclus.nhh.no>
 <12667D12-948B-499D-9486-3576730B73B4@bigelow.org>
 <alpine.LFD.2.21.1806112140510.9747@reclus.nhh.no>
 <1C22E496-E3B5-4DDB-8C3D-66F395D3DDAB@bigelow.org>
Message-ID: <alpine.LFD.2.21.1806112152460.9747@reclus.nhh.no>

On Mon, 11 Jun 2018, Ben Tupper wrote:

> Hi,
>
> I used CRAN binary ala ...
>
>> install.packages("rgdal")
>
> I used that same for sp and rgeos.

Good, thanks. They probably do not have the very latest versions of the 
external dependencies, but do work and provide a reasonable selection of 
GDAL drivers.

Roger

>
> Ben
>
>
>> On Jun 11, 2018, at 3:45 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>
>> On Mon, 11 Jun 2018, Ben Tupper wrote:
>>
>>> Hi,
>>>
>>> I have been able to install all three without issue.  I have encountered no issues with usage.
>>
>> Ben,
>>
>> Thanks for this report. How did you install rgdal - CRAN binary (now at 1.3.2 for R 3.5.0) or source install using GDAL and PROJ installed in what way? It's useful to record ways in which installation on OSX has been accomplished.
>>
>> Roger
>>
>>
>>
>>>
>>>> sessionInfo()
>>> R version 3.5.0 (2018-04-23)
>>> Platform: x86_64-apple-darwin15.6.0 (64-bit)
>>> Running under: macOS Sierra 10.12.6
>>>
>>> Matrix products: default
>>> BLAS: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRblas.0.dylib
>>> LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> other attached packages:
>>> [1] rgeos_0.3-28 rgdal_1.3-2  sp_1.3-1
>>>
>>> loaded via a namespace (and not attached):
>>> [1] compiler_3.5.0  tools_3.5.0     grid_3.5.0      lattice_0.20-35
>>>
>>> Thanks for all you do!
>>>
>>> Cheers,
>>> Ben
>>>
>>>
>>>> On Jun 11, 2018, at 3:53 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>>
>>>> On Mon, 11 Jun 2018, Gilles Benjamin Leduc wrote:
>>>>
>>>>> Good monday!
>>>>>
>>>>> I tried to update rgdal, I get a warning telling me the installation had a non-null exit status. I haven't cheak if it was working?
>>>>
>>>> Thanks for responding - every user data point helps!
>>>>
>>>> Could you please provide the output of sessionInfo(), and any error messages you see on trying to update?
>>>>
>>>> Roger
>>>>
>>>>>
>>>>> Benjamin
>>>>>
>>>>>
>>>>> Le Vendredi 8 Juin 2018 18:15 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit:
>>>>>
>>>>>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>>>>>> first, then the other two, which link to the installed sp. They all
>>>>>
>>>>>> address so-called rchk issues, which have not so far been a problem, but
>>>>>> might have become more fragile as R's internal memory management is made
>>>>>> even more efficient. This involves compiled code using memory allocated by
>>>>>> R to be freed by R's garbage collector, which has to know if an object is
>>>>>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>>>>>> explain the issues encountered - what was good coding practice fifteen
>>>>>> years ago isn't always still good practice.
>>>>>>
>>>>>> In addition, the earliest versions of GDAL and PROJ with which rgdal will
>>>>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
>>>>>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>>>>>> fixed and new features and drivers introduced. A check has been put
>>>>>
>>>>>> in place to trap attempts to install rgdal without a C++11-capable
>>>>>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
>>>>>> ready for the forthcoming version of GEOS.
>>>>>>
>>>>>> The CRAN team has also been very supportive of our efforts to bring
>>>>>
>>>>>> compiled code in these packages into rchk compliance.
>>>>>>
>>>>>> Please get in touch if you see any loose ends in these releases.
>>>>>>
>>>>>> Roger
>>>>>>
>>>>>> --
>>>>>> Roger Bivand
>>>>>> Department of Economics, Norwegian School of Economics,
>>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>>> http://orcid.org/0000-0003-2392-6140
>>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
>>>> http://orcid.org/0000-0003-2392-6140 <http://orcid.org/0000-0003-2392-6140>
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________ <https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________>
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>> Ben Tupper
>>> Bigelow Laboratory for Ocean Sciences
>>> 60 Bigelow Drive, P.O. Box 380
>>> East Boothbay, Maine 04544
>>> http://www.bigelow.org
>>>
>>> Ecological Forecasting: https://eco.bigelow.org/
>>>
>>>
>>>
>>>
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
> Ecological Forecasting: https://eco.bigelow.org/
>
>
>
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From btupper @ending from bigelow@org  Mon Jun 11 22:06:23 2018
From: btupper @ending from bigelow@org (Ben Tupper)
Date: Mon, 11 Jun 2018 16:06:23 -0400
Subject: [R-sig-Geo] CRAN releases of  sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806112152460.9747@reclus.nhh.no>
References: <1de9-5b1e1800-30b-17c48020@113144810>
 <alpine.LFD.2.21.1806110951070.8525@reclus.nhh.no>
 <12667D12-948B-499D-9486-3576730B73B4@bigelow.org>
 <alpine.LFD.2.21.1806112140510.9747@reclus.nhh.no>
 <1C22E496-E3B5-4DDB-8C3D-66F395D3DDAB@bigelow.org>
 <alpine.LFD.2.21.1806112152460.9747@reclus.nhh.no>
Message-ID: <0B37B407-28DD-474B-8233-6E621B7DDB76@bigelow.org>

It's quite a selection of drivers, but my driver world has a short horizon. 

> gdalDrivers()
               name                                                long_name create  copy isRaster
1           AAIGrid                                      Arc/Info ASCII Grid  FALSE  TRUE     TRUE
2              ACE2                                                     ACE2  FALSE FALSE     TRUE
3              ADRG                            ARC Digitized Raster Graphics   TRUE FALSE     TRUE
4               AIG                                     Arc/Info Binary Grid  FALSE FALSE     TRUE
5            AirSAR                                AirSAR Polarimetric Image  FALSE FALSE     TRUE
6               ARG                                Azavea Raster Grid format  FALSE  TRUE     TRUE
7               BAG                               Bathymetry Attributed Grid  FALSE FALSE     TRUE
8            BIGGIF                       Graphics Interchange Format (.gif)  FALSE FALSE     TRUE
9               BLX                                     Magellan topo (.blx)  FALSE  TRUE     TRUE
10              BMP                     MS Windows Device Independent Bitmap   TRUE FALSE     TRUE
11              BSB                              Maptech BSB Nautical Charts  FALSE FALSE     TRUE
12               BT                      VTP .bt (Binary Terrain) 1.3 Format   TRUE FALSE     TRUE
13             CALS                                            CALS (Type 1)  FALSE  TRUE     TRUE
14             CEOS                                               CEOS Image  FALSE FALSE     TRUE
15            COASP                          DRDC COASP SAR Processor Raster  FALSE FALSE     TRUE
16            COSAR               COSAR Annotated Binary Matrix (TerraSAR-X)  FALSE FALSE     TRUE
17              CPG                                          Convair PolGASP  FALSE FALSE     TRUE
18          CTable2                                 CTable2 Datum Grid Shift   TRUE FALSE     TRUE
19              CTG                           USGS LULC Composite Theme Grid  FALSE FALSE     TRUE
20            DIMAP                                               SPOT DIMAP  FALSE FALSE     TRUE
21            DIPEx                                                    DIPEx  FALSE FALSE     TRUE
22             DOQ1                                     USGS DOQ (Old Style)  FALSE FALSE     TRUE
23             DOQ2                                     USGS DOQ (New Style)  FALSE FALSE     TRUE
24             DTED                                    DTED Elevation Raster  FALSE  TRUE     TRUE
25          E00GRID                                 Arc/Info Export E00 GRID  FALSE FALSE     TRUE
26          ECRGTOC                                          ECRG TOC format  FALSE FALSE     TRUE
27             EHdr                                       ESRI .hdr Labelled   TRUE  TRUE     TRUE
28              EIR                                        Erdas Imagine Raw  FALSE FALSE     TRUE
29             ELAS                                                     ELAS   TRUE FALSE     TRUE
30             ENVI                                       ENVI .hdr Labelled   TRUE FALSE     TRUE
31              ERS                                   ERMapper .ers Labelled   TRUE FALSE     TRUE
32             ESAT                                     Envisat Image Format  FALSE FALSE     TRUE
33             FAST                                        EOSAT FAST Format  FALSE FALSE     TRUE
34              FIT                                                FIT Image  FALSE  TRUE     TRUE
35          FujiBAS                                   Fuji BAS Scanner Image  FALSE FALSE     TRUE
36           GenBin                           Generic Binary (.hdr Labelled)  FALSE FALSE     TRUE
37              GFF Ground-based SAR Applications Testbed File Format (.gff)  FALSE FALSE     TRUE
38              GIF                       Graphics Interchange Format (.gif)  FALSE  TRUE     TRUE
39              GMT                                   GMT NetCDF Grid Format  FALSE  TRUE     TRUE
40             GPKG                                               GeoPackage   TRUE  TRUE     TRUE
41   GRASSASCIIGrid                                         GRASS ASCII Grid  FALSE FALSE     TRUE
42             GRIB                                    GRIdded Binary (.grb)  FALSE FALSE     TRUE
43            GS7BG                     Golden Software 7 Binary Grid (.grd)   TRUE  TRUE     TRUE
44             GSAG                        Golden Software ASCII Grid (.grd)  FALSE  TRUE     TRUE
45             GSBG                       Golden Software Binary Grid (.grd)   TRUE  TRUE     TRUE
46              GSC                                              GSC Geogrid  FALSE FALSE     TRUE
47            GTiff                                                  GeoTIFF   TRUE  TRUE     TRUE
48              GTX                                 NOAA Vertical Datum .GTX   TRUE FALSE     TRUE
49              GXF                             GeoSoft Grid Exchange Format  FALSE FALSE     TRUE
50             HDF5                       Hierarchical Data Format Release 5  FALSE FALSE     TRUE
51        HDF5Image                                             HDF5 Dataset  FALSE FALSE     TRUE
52              HF2                               HF2/HFZ heightfield raster  FALSE  TRUE     TRUE
53              HFA                              Erdas Imagine Images (.img)   TRUE  TRUE     TRUE
54             HTTP                                    HTTP Fetching Wrapper  FALSE FALSE     TRUE
55              IDA                                  Image Data and Analysis   TRUE FALSE     TRUE
56            ILWIS                                         ILWIS Raster Map   TRUE  TRUE     TRUE
57             INGR                                        Intergraph Raster   TRUE  TRUE     TRUE
58             IRIS                             IRIS data (.PPI, .CAPPi etc)  FALSE FALSE     TRUE
59             ISCE                                              ISCE raster   TRUE FALSE     TRUE
60            ISIS2                  USGS Astrogeology ISIS cube (Version 2)   TRUE FALSE     TRUE
61            ISIS3                  USGS Astrogeology ISIS cube (Version 3)  FALSE FALSE     TRUE
62       JAXAPALSAR               JAXA PALSAR Product Reader (Level 1.1/1.5)  FALSE FALSE     TRUE
63             JDEM                                      Japanese DEM (.mem)  FALSE FALSE     TRUE
64             JPEG                                                JPEG JFIF  FALSE  TRUE     TRUE
65  KMLSUPEROVERLAY                                        Kml Super Overlay  FALSE  TRUE     TRUE
66              KRO                                                KOLOR Raw   TRUE FALSE     TRUE
67              L1B                     NOAA Polar Orbiter Level 1b Data Set  FALSE FALSE     TRUE
68              LAN                                          Erdas .LAN/.GIS   TRUE FALSE     TRUE
69              LCP                        FARSITE v.4 Landscape File (.lcp)  FALSE  TRUE     TRUE
70         Leveller                                     Leveller heightfield   TRUE FALSE     TRUE
71           LOSLAS                        NADCON .los/.las Datum Grid Shift  FALSE FALSE     TRUE
72              MAP                                         OziExplorer .MAP  FALSE FALSE     TRUE
73          MBTiles                                                  MBTiles   TRUE  TRUE     TRUE
74              MEM                                         In Memory Raster   TRUE FALSE     TRUE
75              MFF                                        Vexcel MFF Raster   TRUE  TRUE     TRUE
76             MFF2                                 Vexcel MFF2 (HKV) Raster   TRUE  TRUE     TRUE
77              MRF                                       Meta Raster Format   TRUE  TRUE     TRUE
78             MSGN                           EUMETSAT Archive native (.nat)  FALSE FALSE     TRUE
79              NDF                                        NLAPS Data Format  FALSE FALSE     TRUE
80           netCDF                               Network Common Data Format   TRUE  TRUE     TRUE
81         NGSGEOID                              NOAA NGS Geoid Height Grids  FALSE FALSE     TRUE
82             NITF                     National Imagery Transmission Format   TRUE  TRUE     TRUE
83             NTv2                                    NTv2 Datum Grid Shift   TRUE FALSE     TRUE
84          NWT_GRC               Northwood Classified Grid Format .grc/.tab  FALSE FALSE     TRUE
85          NWT_GRD                  Northwood Numeric Grid Format .grd/.tab  FALSE FALSE     TRUE
86              OZI                                   OziExplorer Image File  FALSE FALSE     TRUE
87             PAux                                        PCI .aux Labelled   TRUE FALSE     TRUE
88           PCIDSK                                     PCIDSK Database File   TRUE FALSE     TRUE
89         PCRaster                                     PCRaster Raster File   TRUE  TRUE     TRUE
90              PDF                                           Geospatial PDF   TRUE  TRUE     TRUE
91              PDS                               NASA Planetary Data System  FALSE FALSE     TRUE
92         PLMOSAIC                                  Planet Labs Mosaics API  FALSE FALSE     TRUE
93         PLSCENES                                   Planet Labs Scenes API  FALSE FALSE     TRUE
94              PNG                                Portable Network Graphics  FALSE  TRUE     TRUE
95              PNM                          Portable Pixmap Format (netpbm)   TRUE FALSE     TRUE
96                R                                      R Object Data Store  FALSE  TRUE     TRUE
97       Rasterlite                                               Rasterlite  FALSE  TRUE     TRUE
98              RIK                                  Swedish Grid RIK (.rik)  FALSE FALSE     TRUE
99              RMF                                     Raster Matrix Format   TRUE FALSE     TRUE
100         ROI_PAC                                           ROI_PAC raster   TRUE FALSE     TRUE
101          RPFTOC                         Raster Product Format TOC format  FALSE FALSE     TRUE
102             RS2                                   RadarSat 2 XML Product  FALSE FALSE     TRUE
103             RST                                        Idrisi Raster A.1   TRUE  TRUE     TRUE
104            SAFE                              Sentinel-1 SAR SAFE Product  FALSE FALSE     TRUE
105            SAGA                             SAGA GIS Binary Grid (.sdat)   TRUE  TRUE     TRUE
106        SAR_CEOS                                           CEOS SAR Image  FALSE FALSE     TRUE
107            SDTS                                              SDTS Raster  FALSE FALSE     TRUE
108       SENTINEL2                                               Sentinel 2  FALSE FALSE     TRUE
109             SGI                                SGI Image File Format 1.0   TRUE FALSE     TRUE
110          SNODAS                            Snow Data Assimilation System  FALSE FALSE     TRUE
111             SRP                      Standard Raster Product (ASRP/USRP)  FALSE FALSE     TRUE
112         SRTMHGT                                      SRTMHGT File Format  FALSE  TRUE     TRUE
113        Terragen                                     Terragen heightfield   TRUE FALSE     TRUE
114             TIL                                          EarthWatch .TIL  FALSE FALSE     TRUE
115             TSX                                       TerraSAR-X Product  FALSE FALSE     TRUE
116         USGSDEM                       USGS Optional ASCII DEM (and CDED)  FALSE  TRUE     TRUE
117           VICAR                                          MIPL VICAR file  FALSE FALSE     TRUE
118             VRT                                           Virtual Raster   TRUE  TRUE     TRUE
119             WCS                                 OGC Web Coverage Service  FALSE FALSE     TRUE
120             WMS                                      OGC Web Map Service  FALSE  TRUE     TRUE
121            WMTS                                 OGC Web Mab Tile Service  FALSE  TRUE     TRUE
122             XPM                                        X11 PixMap Format  FALSE  TRUE     TRUE
123             XYZ                                        ASCII Gridded XYZ  FALSE  TRUE     TRUE
124            ZMap                                           ZMap Plus Grid  FALSE  TRUE     TRUE

> On Jun 11, 2018, at 3:54 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> On Mon, 11 Jun 2018, Ben Tupper wrote:
> 
>> Hi,
>> 
>> I used CRAN binary ala ...
>> 
>>> install.packages("rgdal")
>> 
>> I used that same for sp and rgeos.
> 
> Good, thanks. They probably do not have the very latest versions of the external dependencies, but do work and provide a reasonable selection of GDAL drivers.
> 
> Roger
> 
>> 
>> Ben
>> 
>> 
>>> On Jun 11, 2018, at 3:45 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>> 
>>> On Mon, 11 Jun 2018, Ben Tupper wrote:
>>> 
>>>> Hi,
>>>> 
>>>> I have been able to install all three without issue.  I have encountered no issues with usage.
>>> 
>>> Ben,
>>> 
>>> Thanks for this report. How did you install rgdal - CRAN binary (now at 1.3.2 for R 3.5.0) or source install using GDAL and PROJ installed in what way? It's useful to record ways in which installation on OSX has been accomplished.
>>> 
>>> Roger
>>> 
>>> 
>>> 
>>>> 
>>>>> sessionInfo()
>>>> R version 3.5.0 (2018-04-23)
>>>> Platform: x86_64-apple-darwin15.6.0 (64-bit)
>>>> Running under: macOS Sierra 10.12.6
>>>> 
>>>> Matrix products: default
>>>> BLAS: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRblas.0.dylib
>>>> LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib
>>>> 
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>> 
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> 
>>>> other attached packages:
>>>> [1] rgeos_0.3-28 rgdal_1.3-2  sp_1.3-1
>>>> 
>>>> loaded via a namespace (and not attached):
>>>> [1] compiler_3.5.0  tools_3.5.0     grid_3.5.0      lattice_0.20-35
>>>> 
>>>> Thanks for all you do!
>>>> 
>>>> Cheers,
>>>> Ben
>>>> 
>>>> 
>>>>> On Jun 11, 2018, at 3:53 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>>>> 
>>>>> On Mon, 11 Jun 2018, Gilles Benjamin Leduc wrote:
>>>>> 
>>>>>> Good monday!
>>>>>> 
>>>>>> I tried to update rgdal, I get a warning telling me the installation had a non-null exit status. I haven't cheak if it was working?
>>>>> 
>>>>> Thanks for responding - every user data point helps!
>>>>> 
>>>>> Could you please provide the output of sessionInfo(), and any error messages you see on trying to update?
>>>>> 
>>>>> Roger
>>>>> 
>>>>>> 
>>>>>> Benjamin
>>>>>> 
>>>>>> 
>>>>>> Le Vendredi 8 Juin 2018 18:15 GMT, Roger Bivand <Roger.Bivand at nhh.no> a ?crit:
>>>>>> 
>>>>>>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>>>>>>> first, then the other two, which link to the installed sp. They all
>>>>>> 
>>>>>>> address so-called rchk issues, which have not so far been a problem, but
>>>>>>> might have become more fragile as R's internal memory management is made
>>>>>>> even more efficient. This involves compiled code using memory allocated by
>>>>>>> R to be freed by R's garbage collector, which has to know if an object is
>>>>>>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>>>>>>> explain the issues encountered - what was good coding practice fifteen
>>>>>>> years ago isn't always still good practice.
>>>>>>> 
>>>>>>> In addition, the earliest versions of GDAL and PROJ with which rgdal will
>>>>>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
>>>>>>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>>>>>>> fixed and new features and drivers introduced. A check has been put
>>>>>> 
>>>>>>> in place to trap attempts to install rgdal without a C++11-capable
>>>>>>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
>>>>>>> ready for the forthcoming version of GEOS.
>>>>>>> 
>>>>>>> The CRAN team has also been very supportive of our efforts to bring
>>>>>> 
>>>>>>> compiled code in these packages into rchk compliance.
>>>>>>> 
>>>>>>> Please get in touch if you see any loose ends in these releases.
>>>>>>> 
>>>>>>> Roger
>>>>>>> 
>>>>>>> --
>>>>>>> Roger Bivand
>>>>>>> Department of Economics, Norwegian School of Economics,
>>>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>>>> http://orcid.org/0000-0003-2392-6140
>>>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> R-sig-Geo mailing list
>>>>>>> R-sig-Geo at r-project.org
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> --
>>>>> Roger Bivand
>>>>> Department of Economics, Norwegian School of Economics,
>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
>>>>> http://orcid.org/0000-0003-2392-6140 <http://orcid.org/0000-0003-2392-6140>
>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________ <https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en_______________________________________________>
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>>> Ben Tupper
>>>> Bigelow Laboratory for Ocean Sciences
>>>> 60 Bigelow Drive, P.O. Box 380
>>>> East Boothbay, Maine 04544
>>>> http://www.bigelow.org
>>>> 
>>>> Ecological Forecasting: https://eco.bigelow.org/
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>> 
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> 
>> Ben Tupper
>> Bigelow Laboratory for Ocean Sciences
>> 60 Bigelow Drive, P.O. Box 380
>> East Boothbay, Maine 04544
>> http://www.bigelow.org
>> 
>> Ecological Forecasting: https://eco.bigelow.org/
>> 
>> 
>> 
>> 
>> 
>> 
> 
> -- 
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
> http://orcid.org/0000-0003-2392-6140 <http://orcid.org/0000-0003-2392-6140>
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en <https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en>
Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecological Forecasting: https://eco.bigelow.org/






	[[alternative HTML version deleted]]


From thi_velo@o @ending from y@hoo@com@br  Tue Jun 12 01:54:06 2018
From: thi_velo@o @ending from y@hoo@com@br (Thiago V. dos Santos)
Date: Mon, 11 Jun 2018 23:54:06 +0000 (UTC)
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <1430599590.2907591.1528573575719@mail.yahoo.com>
 <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>
Message-ID: <219701775.3812753.1528761246572@mail.yahoo.com>

Hi Roger, thanks for the follow up. Answering to your comments:

a) I am using Macports's gdal version?2.3.0.20180523. I am pretty sure that its source code (i.e. the one that is compiled on my machine) is downloaded from OSGEO (at least according to?https://github.com/macports/macports-ports/blob/master/gis/gdal/Portfile);

b) I do have more than one libproj installed on my system (as QGIS for macOS requires its own gdal and proj stuff), but only the Macports one is on my path;


c) I tried running:
tools::testInstalledPackage("rgdal", outDir=tempdir())list.files(tempdir())file.show(file.path(tempdir(), "rgdal-Ex.Rout"))

but it unexpectedly returned "Error in library("rgdal") : there is no package called ?rgdal?. Execution halted".

It looks weird but so far I am able to normally load and use at least a couple of rgdal's functions.

I will keep monitoring it though, and report any other issue.

Cheers,
?-- Thiago V. dos Santos
Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan 

    On Sunday, June 10, 2018, 4:46:04 AM EDT, Roger Bivand <Roger.Bivand at nhh.no> wrote:  
 
 Thanks for reporting, comments inline below (note that I have no OSX 
access at all):

On Sat, 9 Jun 2018, Thiago V. dos Santos wrote:

> Dear Roger,
> Thank you very much for the excellent work done with those packages.
> Today I update both rgeos and rgdal on my system - macOS 10.13.5 with 
> all dependencies installed via MacPorts. I had updated sp a few days 
> earlier. The dependencies versions on my system are gdal 
> @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj @5.1.0_0. 
> Rgeos's update went flawlessly, but I got a few errors while updating 
> rgdal. It still compiled successfully, but I am concerned that some 
> functionality might be compromised due to the errors.
> This is what I got (I have to manually specify the location of proj or 
> rgdal won't find it):> install.packages('rgdal', type = "source", 
> configure.args=c(
> +? ? '--with-proj-include=/opt/local/lib/proj5/include',
> +? ? '--with-proj-lib=/opt/local/lib/proj5/lib'))
> Installing package into ?/Users/thiago/Documents/R-packages?
> (as ?lib? is unspecified)
> trying URL 'https://cran.r-project.org/src/contrib/rgdal_1.3-2.tar.gz'
> Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
> ==================================================
> downloaded 1.6 MB
>
> * installing *source* package ?rgdal? ...
> ** package ?rgdal? successfully unpacked and MD5 sums checked
> configure: CC: /usr/bin/clang
> configure: CXX: /usr/bin/clang++
> configure: rgdal: 1.3-2
> checking for /usr/bin/svnversion... yes
> configure: svn revision: 755
> checking whether the C++ compiler works... yes
> checking for C++ compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C++ compiler... yes
> checking whether /usr/bin/clang++ accepts -g... yes
> checking whether /usr/bin/clang++ supports C++11 features by default... no
> checking whether /usr/bin/clang++ supports C++11 features with -std=gnu++11... yes
> configure: C++11 support available
> checking for gdal-config... /opt/local/bin/gdal-config
> checking gdal-config usability... yes
> configure: GDAL: 2.4.0

All OK up to the GDAL version returned by gdal-config - are you using the 
released GDAL 2.3.0 (probably not) or master?

> checking C++11 support for GDAL >= 2.3.0... yes
> checking GDAL version >= 1.11.4... yes
> checking gdal: linking with --libs only... yes
> checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
> checking proj_api.h presence and usability... yes
> ./configure: line 3395: test: =: unary operator expected

Will check, that line is:

if test ${PROJ_VERSION} = "" ; then

from configure.ac line 305. Possibly a shell dialect issue.

> checking PROJ version >= 4.8.0... yes
> checking projects.h presence and usability... yes

These relate to configure.ac lines 376-419, and the outcome: epsg found 
and readable is OK - could there be two libproj on your system (maybe for 
different architectures)?

> Undefined symbols for architecture x86_64:
>? "_pj_ctx_fclose", referenced from:
>? ? ? _main in proj_conf_test2-06fe7d.o
>? "_pj_get_default_ctx", referenced from:
>? ? ? _main in proj_conf_test2-06fe7d.o
>? "_pj_open_lib", referenced from:
>? ? ? _main in proj_conf_test2-06fe7d.o
> ld: symbol(s) not found for architecture x86_64
> clang: error: linker command failed with exit code 1 (use -v to see invocation)
> ./configure: line 3511: ./proj_conf_test2: No such file or directory
> checking PROJ.4: epsg found and readable... yes

Same here for next block in configure.ac; conus found and readable.

> Undefined symbols for architecture x86_64:
>? "_pj_ctx_fclose", referenced from:
>? ? ? _main in proj_conf_test3-3b7aa2.o
>? "_pj_get_default_ctx", referenced from:
>? ? ? _main in proj_conf_test3-3b7aa2.o
>? "_pj_open_lib", referenced from:
>? ? ? _main in proj_conf_test3-3b7aa2.o
> ld: symbol(s) not found for architecture x86_64
> clang: error: linker command failed with exit code 1 (use -v to see invocation)
> ./configure: line 3570: ./proj_conf_test3: No such file or directory
> checking PROJ.4: conus found and readable... yes
> configure: Package CPP flags:? -I/opt/local/include -I/opt/local/lib/proj5/include
> configure: Package LIBS:? -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2? -c init.c -o init.o
> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2? -c inverser.c -o inverser.o
> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2? -c local_stubs.c -o local_stubs.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2? -c ogr_polygons.c -o ogr_polygons.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include? -fPIC? -Wall -g -O2 -c projectit.cpp -o projectit.o
> clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o projectit.o -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
> installing to /Users/thiago/Documents/R-packages/rgdal/libs
> ** R
> ** data
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded
> * DONE (rgdal)
>
> The downloaded source packages are in
> 
> ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn/T/Rtmp5K6lt8/downloaded_packages? 
> ?Is this something that needs to be investigated, or I can just safely 
> ignore those messages?

Please try to run:

tools::testInstalledPackage("rgdal", outDir=tempdir())
list.files(tempdir())
file.show(file.path(tempdir(), "rgdal-Ex.Rout"))

and if the outcomes are as expected, you should be OK, please let us know.

If any OSX users installing from source can contribute, that would be 
useful. It will take a little while before the CRAN OSX binaries catch up 
with new PROJ and GDAL.

Again thanks for reporting!

Roger

> Many thanks,?-- Thiago V. dos Santos
> Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan
>
>? ? On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
> first, then the other two, which link to the installed sp. They all
> address so-called rchk issues, which have not so far been a problem, but
> might have become more fragile as R's internal memory management is made
> even more efficient. This involves compiled code using memory allocated by
> R to be freed by R's garbage collector, which has to know if an object is
> still being used. Tomas Kalibera, the author of rchk, helped resolve and
> explain the issues encountered - what was good coding practice fifteen
> years ago isn't always still good practice.
>
> In addition, the earliest versions of GDAL and PROJ with which rgdal will
> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
> released versions of PROJ and GDAL are to be prefered, as bugs have been
> fixed and new features and drivers introduced. A check has been put
> in place to trap attempts to install rgdal without a C++11-capable
> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
> ready for the forthcoming version of GEOS.
>
> The CRAN team has also been very supportive of our efforts to bring
> compiled code in these packages into rchk compliance.
>
> Please get in touch if you see any loose ends in these releases.
>
> Roger
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en  
	[[alternative HTML version deleted]]


From vij@ylull@ @ending from gm@il@com  Tue Jun 12 03:16:54 2018
From: vij@ylull@ @ending from gm@il@com (Vijay Lulla)
Date: Mon, 11 Jun 2018 21:16:54 -0400
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <219701775.3812753.1528761246572@mail.yahoo.com>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <1430599590.2907591.1528573575719@mail.yahoo.com>
 <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>
 <219701775.3812753.1528761246572@mail.yahoo.com>
Message-ID: <CAKkiGbu8Nd3UYF0a6OV339_JvfRE2rG8S=SjZ2-q-a8mcneh4A@mail.gmail.com>

I too use R on a mac but I cannot get rgdal to use proj5 (port info proj).
rgdal still uses proj4 even when there is a newer version of proj already
on my computer.  Neither of these proj packages (proj4 or proj) use
pkg-config mechanism even though there are proj.pc files in both versions
of the package.  Maybe using the pkg-config mechanism to detect version of
packages during source installation might help?  I don't know whether this
is a "proj" or a "macports" issue though.


On Mon, Jun 11, 2018 at 7:54 PM, Thiago V. dos Santos via R-sig-Geo <
r-sig-geo at r-project.org> wrote:

> Hi Roger, thanks for the follow up. Answering to your comments:
>
> a) I am using Macports's gdal version 2.3.0.20180523. I am pretty sure
> that its source code (i.e. the one that is compiled on my machine) is
> downloaded from OSGEO (at least according to https://github.com/
> macports/macports-ports/blob/master/gis/gdal/Portfile);
>
> b) I do have more than one libproj installed on my system (as QGIS for
> macOS requires its own gdal and proj stuff), but only the Macports one is
> on my path;
>
>
> c) I tried running:
> tools::testInstalledPackage("rgdal", outDir=tempdir())list.files(
> tempdir())file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>
> but it unexpectedly returned "Error in library("rgdal") : there is no
> package called ?rgdal?. Execution halted".
>
> It looks weird but so far I am able to normally load and use at least a
> couple of rgdal's functions.
>
> I will keep monitoring it though, and report any other issue.
>
> Cheers,
>  -- Thiago V. dos Santos
> Postdoctoral Research FellowDepartment of Climate and Space Science and
> EngineeringUniversity of Michigan
>
>     On Sunday, June 10, 2018, 4:46:04 AM EDT, Roger Bivand <
> Roger.Bivand at nhh.no> wrote:
>
>  Thanks for reporting, comments inline below (note that I have no OSX
> access at all):
>
> On Sat, 9 Jun 2018, Thiago V. dos Santos wrote:
>
> > Dear Roger,
> > Thank you very much for the excellent work done with those packages.
> > Today I update both rgeos and rgdal on my system - macOS 10.13.5 with
> > all dependencies installed via MacPorts. I had updated sp a few days
> > earlier. The dependencies versions on my system are gdal
> > @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj @5.1.0_0.
> > Rgeos's update went flawlessly, but I got a few errors while updating
> > rgdal. It still compiled successfully, but I am concerned that some
> > functionality might be compromised due to the errors.
> > This is what I got (I have to manually specify the location of proj or
> > rgdal won't find it):> install.packages('rgdal', type = "source",
> > configure.args=c(
> > +    '--with-proj-include=/opt/local/lib/proj5/include',
> > +    '--with-proj-lib=/opt/local/lib/proj5/lib'))
> > Installing package into ?/Users/thiago/Documents/R-packages?
> > (as ?lib? is unspecified)
> > trying URL 'https://cran.r-project.org/src/contrib/rgdal_1.3-2.tar.gz'
> > Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
> > ==================================================
> > downloaded 1.6 MB
> >
> > * installing *source* package ?rgdal? ...
> > ** package ?rgdal? successfully unpacked and MD5 sums checked
> > configure: CC: /usr/bin/clang
> > configure: CXX: /usr/bin/clang++
> > configure: rgdal: 1.3-2
> > checking for /usr/bin/svnversion... yes
> > configure: svn revision: 755
> > checking whether the C++ compiler works... yes
> > checking for C++ compiler default output file name... a.out
> > checking for suffix of executables...
> > checking whether we are cross compiling... no
> > checking for suffix of object files... o
> > checking whether we are using the GNU C++ compiler... yes
> > checking whether /usr/bin/clang++ accepts -g... yes
> > checking whether /usr/bin/clang++ supports C++11 features by default...
> no
> > checking whether /usr/bin/clang++ supports C++11 features with
> -std=gnu++11... yes
> > configure: C++11 support available
> > checking for gdal-config... /opt/local/bin/gdal-config
> > checking gdal-config usability... yes
> > configure: GDAL: 2.4.0
>
> All OK up to the GDAL version returned by gdal-config - are you using the
> released GDAL 2.3.0 (probably not) or master?
>
> > checking C++11 support for GDAL >= 2.3.0... yes
> > checking GDAL version >= 1.11.4... yes
> > checking gdal: linking with --libs only... yes
> > checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
> > checking proj_api.h presence and usability... yes
> > ./configure: line 3395: test: =: unary operator expected
>
> Will check, that line is:
>
> if test ${PROJ_VERSION} = "" ; then
>
> from configure.ac line 305. Possibly a shell dialect issue.
>
> > checking PROJ version >= 4.8.0... yes
> > checking projects.h presence and usability... yes
>
> These relate to configure.ac lines 376-419, and the outcome: epsg found
> and readable is OK - could there be two libproj on your system (maybe for
> different architectures)?
>
> > Undefined symbols for architecture x86_64:
> >  "_pj_ctx_fclose", referenced from:
> >      _main in proj_conf_test2-06fe7d.o
> >  "_pj_get_default_ctx", referenced from:
> >      _main in proj_conf_test2-06fe7d.o
> >  "_pj_open_lib", referenced from:
> >      _main in proj_conf_test2-06fe7d.o
> > ld: symbol(s) not found for architecture x86_64
> > clang: error: linker command failed with exit code 1 (use -v to see
> invocation)
> > ./configure: line 3511: ./proj_conf_test2: No such file or directory
> > checking PROJ.4: epsg found and readable... yes
>
> Same here for next block in configure.ac; conus found and readable.
>
> > Undefined symbols for architecture x86_64:
> >  "_pj_ctx_fclose", referenced from:
> >      _main in proj_conf_test3-3b7aa2.o
> >  "_pj_get_default_ctx", referenced from:
> >      _main in proj_conf_test3-3b7aa2.o
> >  "_pj_open_lib", referenced from:
> >      _main in proj_conf_test3-3b7aa2.o
> > ld: symbol(s) not found for architecture x86_64
> > clang: error: linker command failed with exit code 1 (use -v to see
> invocation)
> > ./configure: line 3570: ./proj_conf_test3: No such file or directory
> > checking PROJ.4: conus found and readable... yes
> > configure: Package CPP flags:  -I/opt/local/include
> -I/opt/local/lib/proj5/include
> > configure: Package LIBS:  -L/opt/local/lib -lgdal
> -L/opt/local/lib/proj5/lib -lproj
> > configure: creating ./config.status
> > config.status: creating src/Makevars
> > ** libs
> > clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
> > clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
> > /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2  -c init.c -o init.o
> > /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2  -c inverser.c -o inverser.o
> > /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2  -c local_stubs.c -o local_stubs.o
> > clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
> > /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2  -c ogr_polygons.c -o ogr_polygons.o
> > clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
> > clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
> > clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
> > clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
> -fPIC  -Wall -g -O2 -c projectit.cpp -o projectit.o
> > clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names
> -undefined dynamic_lookup -single_module -multiply_defined suppress
> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
> rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o
> ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o projectit.o
> -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
> -Wl,CoreFoundation
> > installing to /Users/thiago/Documents/R-packages/rgdal/libs
> > ** R
> > ** data
> > ** inst
> > ** byte-compile and prepare package for lazy loading
> > ** help
> > *** installing help indices
> > ** building package indices
> > ** installing vignettes
> > ** testing if installed package can be loaded
> > * DONE (rgdal)
> >
> > The downloaded source packages are in
> >
> > ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn
> /T/Rtmp5K6lt8/downloaded_packages?
> > ?Is this something that needs to be investigated, or I can just safely
> > ignore those messages?
>
> Please try to run:
>
> tools::testInstalledPackage("rgdal", outDir=tempdir())
> list.files(tempdir())
> file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>
> and if the outcomes are as expected, you should be OK, please let us know.
>
> If any OSX users installing from source can contribute, that would be
> useful. It will take a little while before the CRAN OSX binaries catch up
> with new PROJ and GDAL.
>
> Again thanks for reporting!
>
> Roger
>
> > Many thanks, -- Thiago V. dos Santos
> > Postdoctoral Research FellowDepartment of Climate and Space Science and
> EngineeringUniversity of Michigan
> >
> >    On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <
> Roger.Bivand at nhh.no> wrote:
> >
> > There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
> > first, then the other two, which link to the installed sp. They all
> > address so-called rchk issues, which have not so far been a problem, but
> > might have become more fragile as R's internal memory management is made
> > even more efficient. This involves compiled code using memory allocated
> by
> > R to be freed by R's garbage collector, which has to know if an object is
> > still being used. Tomas Kalibera, the author of rchk, helped resolve and
> > explain the issues encountered - what was good coding practice fifteen
> > years ago isn't always still good practice.
> >
> > In addition, the earliest versions of GDAL and PROJ with which rgdal will
> > work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
> current
> > released versions of PROJ and GDAL are to be prefered, as bugs have been
> > fixed and new features and drivers introduced. A check has been put
> > in place to trap attempts to install rgdal without a C++11-capable
> > compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos
> is
> > ready for the forthcoming version of GEOS.
> >
> > The CRAN team has also been very supportive of our efforts to bring
> > compiled code in these packages into rchk compliance.
> >
> > Please get in touch if you see any loose ends in these releases.
> >
> > Roger
> >
> >
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Vijay Lulla

Assistant Professor,
Dept. of Geography, IUPUI
425 University Blvd, CA-207C.
Indianapolis, IN-46202
vlulla at iupui.edu
ORCID: https://orcid.org/0000-0002-0823-2522
Webpage: http://vijaylulla.com

	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Tue Jun 12 09:11:13 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Tue, 12 Jun 2018 09:11:13 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <CAKkiGbu8Nd3UYF0a6OV339_JvfRE2rG8S=SjZ2-q-a8mcneh4A@mail.gmail.com>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <1430599590.2907591.1528573575719@mail.yahoo.com>
 <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>
 <219701775.3812753.1528761246572@mail.yahoo.com>
 <CAKkiGbu8Nd3UYF0a6OV339_JvfRE2rG8S=SjZ2-q-a8mcneh4A@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1806120852400.11159@reclus.nhh.no>

On Tue, 12 Jun 2018, Vijay Lulla wrote:

> I too use R on a mac but I cannot get rgdal to use proj5 (port info proj).
> rgdal still uses proj4 even when there is a newer version of proj already
> on my computer.  Neither of these proj packages (proj4 or proj) use
> pkg-config mechanism even though there are proj.pc files in both versions
> of the package.  Maybe using the pkg-config mechanism to detect version of
> packages during source installation might help?  I don't know whether this
> is a "proj" or a "macports" issue though.
>

Neither sp/rgdal nor sf plan to accomodate the proj.h interface until the 
GDAL barn-raising project is completed. Even then, most software using 
proj will have to support the proj_api.h and the proj.h APIs because many 
platforms are bound to move at the speed of the slowest package using 
proj. The proj_api.h API does use the new mechanisms internally, but it 
isn't obvious how or whether proj.h pipelines should be exposed (GRASS has 
a prototype implementation).

If you work in geodetics and need sub-cm precision, this may matter; in 
which case please follow the GDAL barn-raising project and provide use 
cases where the proj.h API is required. The main difference is that the 
proj_api.h API always transforms to the WGS84 datum first then transforms 
to the target datum (many to one then one to many). When this was chosen 
1984 was not so long ago; the new proj.h API suggests transforming along a 
pipeline from source to target datum without going through WGS84 (many to 
many).

If your question is about how to install rgdal from source on OSX, you may 
need to ensure that you only have one version of proj installed, or use 
configure arguments and load path modifications on your own 
responsibility.

From rgdal 1.3-1, the pkg-config mechanism is used if the path to proj.pc 
is set correctly (environment variable), but will fall back on standard 
locations if pkg-config proj fails.

Roger

>
> On Mon, Jun 11, 2018 at 7:54 PM, Thiago V. dos Santos via R-sig-Geo <
> r-sig-geo at r-project.org> wrote:
>
>> Hi Roger, thanks for the follow up. Answering to your comments:
>>
>> a) I am using Macports's gdal version 2.3.0.20180523. I am pretty sure
>> that its source code (i.e. the one that is compiled on my machine) is
>> downloaded from OSGEO (at least according to https://github.com/
>> macports/macports-ports/blob/master/gis/gdal/Portfile);
>>
>> b) I do have more than one libproj installed on my system (as QGIS for
>> macOS requires its own gdal and proj stuff), but only the Macports one is
>> on my path;
>>
>>
>> c) I tried running:
>> tools::testInstalledPackage("rgdal", outDir=tempdir())list.files(
>> tempdir())file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>>
>> but it unexpectedly returned "Error in library("rgdal") : there is no
>> package called ?rgdal?. Execution halted".
>>
>> It looks weird but so far I am able to normally load and use at least a
>> couple of rgdal's functions.
>>
>> I will keep monitoring it though, and report any other issue.
>>
>> Cheers,
>>  -- Thiago V. dos Santos
>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>> EngineeringUniversity of Michigan
>>
>>     On Sunday, June 10, 2018, 4:46:04 AM EDT, Roger Bivand <
>> Roger.Bivand at nhh.no> wrote:
>>
>>  Thanks for reporting, comments inline below (note that I have no OSX
>> access at all):
>>
>> On Sat, 9 Jun 2018, Thiago V. dos Santos wrote:
>>
>>> Dear Roger,
>>> Thank you very much for the excellent work done with those packages.
>>> Today I update both rgeos and rgdal on my system - macOS 10.13.5 with
>>> all dependencies installed via MacPorts. I had updated sp a few days
>>> earlier. The dependencies versions on my system are gdal
>>> @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj @5.1.0_0.
>>> Rgeos's update went flawlessly, but I got a few errors while updating
>>> rgdal. It still compiled successfully, but I am concerned that some
>>> functionality might be compromised due to the errors.
>>> This is what I got (I have to manually specify the location of proj or
>>> rgdal won't find it):> install.packages('rgdal', type = "source",
>>> configure.args=c(
>>> +    '--with-proj-include=/opt/local/lib/proj5/include',
>>> +    '--with-proj-lib=/opt/local/lib/proj5/lib'))
>>> Installing package into ?/Users/thiago/Documents/R-packages?
>>> (as ?lib? is unspecified)
>>> trying URL 'https://cran.r-project.org/src/contrib/rgdal_1.3-2.tar.gz'
>>> Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
>>> ==================================================
>>> downloaded 1.6 MB
>>>
>>> * installing *source* package ?rgdal? ...
>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>> configure: CC: /usr/bin/clang
>>> configure: CXX: /usr/bin/clang++
>>> configure: rgdal: 1.3-2
>>> checking for /usr/bin/svnversion... yes
>>> configure: svn revision: 755
>>> checking whether the C++ compiler works... yes
>>> checking for C++ compiler default output file name... a.out
>>> checking for suffix of executables...
>>> checking whether we are cross compiling... no
>>> checking for suffix of object files... o
>>> checking whether we are using the GNU C++ compiler... yes
>>> checking whether /usr/bin/clang++ accepts -g... yes
>>> checking whether /usr/bin/clang++ supports C++11 features by default...
>> no
>>> checking whether /usr/bin/clang++ supports C++11 features with
>> -std=gnu++11... yes
>>> configure: C++11 support available
>>> checking for gdal-config... /opt/local/bin/gdal-config
>>> checking gdal-config usability... yes
>>> configure: GDAL: 2.4.0
>>
>> All OK up to the GDAL version returned by gdal-config - are you using the
>> released GDAL 2.3.0 (probably not) or master?
>>
>>> checking C++11 support for GDAL >= 2.3.0... yes
>>> checking GDAL version >= 1.11.4... yes
>>> checking gdal: linking with --libs only... yes
>>> checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
>>> checking proj_api.h presence and usability... yes
>>> ./configure: line 3395: test: =: unary operator expected
>>
>> Will check, that line is:
>>
>> if test ${PROJ_VERSION} = "" ; then
>>
>> from configure.ac line 305. Possibly a shell dialect issue.
>>
>>> checking PROJ version >= 4.8.0... yes
>>> checking projects.h presence and usability... yes
>>
>> These relate to configure.ac lines 376-419, and the outcome: epsg found
>> and readable is OK - could there be two libproj on your system (maybe for
>> different architectures)?
>>
>>> Undefined symbols for architecture x86_64:
>>>  "_pj_ctx_fclose", referenced from:
>>>      _main in proj_conf_test2-06fe7d.o
>>>  "_pj_get_default_ctx", referenced from:
>>>      _main in proj_conf_test2-06fe7d.o
>>>  "_pj_open_lib", referenced from:
>>>      _main in proj_conf_test2-06fe7d.o
>>> ld: symbol(s) not found for architecture x86_64
>>> clang: error: linker command failed with exit code 1 (use -v to see
>> invocation)
>>> ./configure: line 3511: ./proj_conf_test2: No such file or directory
>>> checking PROJ.4: epsg found and readable... yes
>>
>> Same here for next block in configure.ac; conus found and readable.
>>
>>> Undefined symbols for architecture x86_64:
>>>  "_pj_ctx_fclose", referenced from:
>>>      _main in proj_conf_test3-3b7aa2.o
>>>  "_pj_get_default_ctx", referenced from:
>>>      _main in proj_conf_test3-3b7aa2.o
>>>  "_pj_open_lib", referenced from:
>>>      _main in proj_conf_test3-3b7aa2.o
>>> ld: symbol(s) not found for architecture x86_64
>>> clang: error: linker command failed with exit code 1 (use -v to see
>> invocation)
>>> ./configure: line 3570: ./proj_conf_test3: No such file or directory
>>> checking PROJ.4: conus found and readable... yes
>>> configure: Package CPP flags:  -I/opt/local/include
>> -I/opt/local/lib/proj5/include
>>> configure: Package LIBS:  -L/opt/local/lib -lgdal
>> -L/opt/local/lib/proj5/lib -lproj
>>> configure: creating ./config.status
>>> config.status: creating src/Makevars
>>> ** libs
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2  -c init.c -o init.o
>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2  -c inverser.c -o inverser.o
>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2  -c local_stubs.c -o local_stubs.o
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2  -c ogr_polygons.c -o ogr_polygons.o
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>> -fPIC  -Wall -g -O2 -c projectit.cpp -o projectit.o
>>> clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names
>> -undefined dynamic_lookup -single_module -multiply_defined suppress
>> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
>> rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o
>> ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o projectit.o
>> -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>> -Wl,CoreFoundation
>>> installing to /Users/thiago/Documents/R-packages/rgdal/libs
>>> ** R
>>> ** data
>>> ** inst
>>> ** byte-compile and prepare package for lazy loading
>>> ** help
>>> *** installing help indices
>>> ** building package indices
>>> ** installing vignettes
>>> ** testing if installed package can be loaded
>>> * DONE (rgdal)
>>>
>>> The downloaded source packages are in
>>>
>>> ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn
>> /T/Rtmp5K6lt8/downloaded_packages?
>>> ?Is this something that needs to be investigated, or I can just safely
>>> ignore those messages?
>>
>> Please try to run:
>>
>> tools::testInstalledPackage("rgdal", outDir=tempdir())
>> list.files(tempdir())
>> file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>>
>> and if the outcomes are as expected, you should be OK, please let us know.
>>
>> If any OSX users installing from source can contribute, that would be
>> useful. It will take a little while before the CRAN OSX binaries catch up
>> with new PROJ and GDAL.
>>
>> Again thanks for reporting!
>>
>> Roger
>>
>>> Many thanks, -- Thiago V. dos Santos
>>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>> EngineeringUniversity of Michigan
>>>
>>>    On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <
>> Roger.Bivand at nhh.no> wrote:
>>>
>>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>>> first, then the other two, which link to the installed sp. They all
>>> address so-called rchk issues, which have not so far been a problem, but
>>> might have become more fragile as R's internal memory management is made
>>> even more efficient. This involves compiled code using memory allocated
>> by
>>> R to be freed by R's garbage collector, which has to know if an object is
>>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>>> explain the issues encountered - what was good coding practice fifteen
>>> years ago isn't always still good practice.
>>>
>>> In addition, the earliest versions of GDAL and PROJ with which rgdal will
>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
>> current
>>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>>> fixed and new features and drivers introduced. A check has been put
>>> in place to trap attempts to install rgdal without a C++11-capable
>>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos
>> is
>>> ready for the forthcoming version of GEOS.
>>>
>>> The CRAN team has also been very supportive of our efforts to bring
>>> compiled code in these packages into rchk compliance.
>>>
>>> Please get in touch if you see any loose ends in these releases.
>>>
>>> Roger
>>>
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From geodude @ending from m@il@com  Tue Jun 12 12:12:42 2018
From: geodude @ending from m@il@com (Jan Willem van der Lichte)
Date: Tue, 12 Jun 2018 12:12:42 +0200
Subject: [R-sig-Geo] Sf st_read postgis
Message-ID: <trinity-db835417-5994-4bd2-a8b4-e97460309f69-1528798362807@msvc-mesg-gmxus007>


Hi list,

Can someone help me with a basic sf question.

I try to use the sf::st_read function to get some data out of postgis.

I set up a connection (connz) to postgis. 
I checked if the connection was working with

dbListTables(connz)

The result was ok, I saw all the tables in the database.

Next I tried to get some data with the st_read() function, from the sf package.

I tried to follow the example in the help.

xx<- st_read(connz, "vakantie", query="SELECT * FROM vakantie LIMIT 3;")

So i replaced the table meuse with vakantie.

When I execute this statement, I get a warning

Warning message: In st_read.DBIObject(...) : Ignoring query argument, only using table.

So what's happening, am I doing something wrong? Which is possible, cause I'm new to R. :-)

Thanks
Jan Willem














Sent with my iPad


From mich@el@delorme @ending from @griculture@gouv@fr  Tue Jun 12 14:29:19 2018
From: mich@el@delorme @ending from @griculture@gouv@fr (Michael DELORME)
Date: Tue, 12 Jun 2018 14:29:19 +0200
Subject: [R-sig-Geo] Sf st_read postgis
In-Reply-To: <trinity-db835417-5994-4bd2-a8b4-e97460309f69-1528798362807@msvc-mesg-gmxus007>
References: <trinity-db835417-5994-4bd2-a8b4-e97460309f69-1528798362807@msvc-mesg-gmxus007>
Message-ID: <5B1FBC9F.6000307@agriculture.gouv.fr>

Hi

If you use a query you don't have to set a table name, so

xx <- st_read(connz, query="SELECT * FROM vakantie LIMIT 3;")

should work...


Le 12/06/2018 12:12, Jan Willem van der Lichte a ?crit :
> Hi list,
>
> Can someone help me with a basic sf question.
>
> I try to use the sf::st_read function to get some data out of postgis.
>
> I set up a connection (connz) to postgis. 
> I checked if the connection was working with
>
> dbListTables(connz)
>
> The result was ok, I saw all the tables in the database.
>
> Next I tried to get some data with the st_read() function, from the sf package.
>
> I tried to follow the example in the help.
>
> xx<- st_read(connz, "vakantie", query="SELECT * FROM vakantie LIMIT 3;")
>
> So i replaced the table meuse with vakantie.
>
> When I execute this statement, I get a warning
>
> Warning message: In st_read.DBIObject(...) : Ignoring query argument, only using table.
>
> So what's happening, am I doing something wrong? Which is possible, cause I'm new to R. :-)
>
> Thanks
> Jan Willem
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> Sent with my iPad
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

-- 
*Micha?l DELORME*
Administrateur de donn?es, charg? de projet en g?omatique
Service r?gional de l'information statistique, ?conomique et territoriale
Direction r?gionale de l'alimentation, de l'agriculture et de la for?t
Auvergne-Rh?ne-Alpes
Site de Lyon
165 rue Garibaldi ? BP 3202 ? 69401 LYON cedex 03
04 78 63 34 21

Pour ?crire au service :
DRAAF Auvergne-Rh?ne-Alpes ? SRISET
16B rue Aim? Rudel ? BP 45 ? 63370 LEMPDES

http://www.draaf.auvergne-rhone-alpes.agriculture.gouv.fr/

	[[alternative HTML version deleted]]


From vij@ylull@ @ending from gm@il@com  Tue Jun 12 16:41:52 2018
From: vij@ylull@ @ending from gm@il@com (Vijay Lulla)
Date: Tue, 12 Jun 2018 10:41:52 -0400
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806120852400.11159@reclus.nhh.no>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <1430599590.2907591.1528573575719@mail.yahoo.com>
 <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>
 <219701775.3812753.1528761246572@mail.yahoo.com>
 <CAKkiGbu8Nd3UYF0a6OV339_JvfRE2rG8S=SjZ2-q-a8mcneh4A@mail.gmail.com>
 <alpine.LFD.2.21.1806120852400.11159@reclus.nhh.no>
Message-ID: <CAKkiGbsmz62FW0BZE7EgQkyRkvTnNCCcTyUEchs-yVmbO8FEEA@mail.gmail.com>

Thank you for the explanation of difference between proj.h and proj_api.h
and the recommendation of setting environment variable for pkg-config.  I
had tried using pkg-config by setting env variables but haven't had much
luck getting it to work.
Cordially,
Vijay.

On Tue, Jun 12, 2018 at 3:11 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Tue, 12 Jun 2018, Vijay Lulla wrote:
>
> I too use R on a mac but I cannot get rgdal to use proj5 (port info proj).
>> rgdal still uses proj4 even when there is a newer version of proj already
>> on my computer.  Neither of these proj packages (proj4 or proj) use
>> pkg-config mechanism even though there are proj.pc files in both versions
>> of the package.  Maybe using the pkg-config mechanism to detect version of
>> packages during source installation might help?  I don't know whether this
>> is a "proj" or a "macports" issue though.
>>
>>
> Neither sp/rgdal nor sf plan to accomodate the proj.h interface until the
> GDAL barn-raising project is completed. Even then, most software using proj
> will have to support the proj_api.h and the proj.h APIs because many
> platforms are bound to move at the speed of the slowest package using proj.
> The proj_api.h API does use the new mechanisms internally, but it isn't
> obvious how or whether proj.h pipelines should be exposed (GRASS has a
> prototype implementation).
>
> If you work in geodetics and need sub-cm precision, this may matter; in
> which case please follow the GDAL barn-raising project and provide use
> cases where the proj.h API is required. The main difference is that the
> proj_api.h API always transforms to the WGS84 datum first then transforms
> to the target datum (many to one then one to many). When this was chosen
> 1984 was not so long ago; the new proj.h API suggests transforming along a
> pipeline from source to target datum without going through WGS84 (many to
> many).
>
> If your question is about how to install rgdal from source on OSX, you may
> need to ensure that you only have one version of proj installed, or use
> configure arguments and load path modifications on your own responsibility.
>
> From rgdal 1.3-1, the pkg-config mechanism is used if the path to proj.pc
> is set correctly (environment variable), but will fall back on standard
> locations if pkg-config proj fails.
>
> Roger
>
>
>
>> On Mon, Jun 11, 2018 at 7:54 PM, Thiago V. dos Santos via R-sig-Geo <
>> r-sig-geo at r-project.org> wrote:
>>
>> Hi Roger, thanks for the follow up. Answering to your comments:
>>>
>>> a) I am using Macports's gdal version 2.3.0.20180523. I am pretty sure
>>> that its source code (i.e. the one that is compiled on my machine) is
>>> downloaded from OSGEO (at least according to https://github.com/
>>> macports/macports-ports/blob/master/gis/gdal/Portfile);
>>>
>>> b) I do have more than one libproj installed on my system (as QGIS for
>>> macOS requires its own gdal and proj stuff), but only the Macports one is
>>> on my path;
>>>
>>>
>>> c) I tried running:
>>> tools::testInstalledPackage("rgdal", outDir=tempdir())list.files(
>>> tempdir())file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>>>
>>> but it unexpectedly returned "Error in library("rgdal") : there is no
>>> package called ?rgdal?. Execution halted".
>>>
>>> It looks weird but so far I am able to normally load and use at least a
>>> couple of rgdal's functions.
>>>
>>> I will keep monitoring it though, and report any other issue.
>>>
>>> Cheers,
>>>  -- Thiago V. dos Santos
>>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>>> EngineeringUniversity of Michigan
>>>
>>>     On Sunday, June 10, 2018, 4:46:04 AM EDT, Roger Bivand <
>>> Roger.Bivand at nhh.no> wrote:
>>>
>>>  Thanks for reporting, comments inline below (note that I have no OSX
>>> access at all):
>>>
>>> On Sat, 9 Jun 2018, Thiago V. dos Santos wrote:
>>>
>>> Dear Roger,
>>>> Thank you very much for the excellent work done with those packages.
>>>> Today I update both rgeos and rgdal on my system - macOS 10.13.5 with
>>>> all dependencies installed via MacPorts. I had updated sp a few days
>>>> earlier. The dependencies versions on my system are gdal
>>>> @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj @5.1.0_0.
>>>> Rgeos's update went flawlessly, but I got a few errors while updating
>>>> rgdal. It still compiled successfully, but I am concerned that some
>>>> functionality might be compromised due to the errors.
>>>> This is what I got (I have to manually specify the location of proj or
>>>> rgdal won't find it):> install.packages('rgdal', type = "source",
>>>> configure.args=c(
>>>> +    '--with-proj-include=/opt/local/lib/proj5/include',
>>>> +    '--with-proj-lib=/opt/local/lib/proj5/lib'))
>>>> Installing package into ?/Users/thiago/Documents/R-packages?
>>>> (as ?lib? is unspecified)
>>>> trying URL 'https://cran.r-project.org/src/contrib/rgdal_1.3-2.tar.gz'
>>>> Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
>>>> ==================================================
>>>> downloaded 1.6 MB
>>>>
>>>> * installing *source* package ?rgdal? ...
>>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>>> configure: CC: /usr/bin/clang
>>>> configure: CXX: /usr/bin/clang++
>>>> configure: rgdal: 1.3-2
>>>> checking for /usr/bin/svnversion... yes
>>>> configure: svn revision: 755
>>>> checking whether the C++ compiler works... yes
>>>> checking for C++ compiler default output file name... a.out
>>>> checking for suffix of executables...
>>>> checking whether we are cross compiling... no
>>>> checking for suffix of object files... o
>>>> checking whether we are using the GNU C++ compiler... yes
>>>> checking whether /usr/bin/clang++ accepts -g... yes
>>>> checking whether /usr/bin/clang++ supports C++11 features by default...
>>>>
>>> no
>>>
>>>> checking whether /usr/bin/clang++ supports C++11 features with
>>>>
>>> -std=gnu++11... yes
>>>
>>>> configure: C++11 support available
>>>> checking for gdal-config... /opt/local/bin/gdal-config
>>>> checking gdal-config usability... yes
>>>> configure: GDAL: 2.4.0
>>>>
>>>
>>> All OK up to the GDAL version returned by gdal-config - are you using the
>>> released GDAL 2.3.0 (probably not) or master?
>>>
>>> checking C++11 support for GDAL >= 2.3.0... yes
>>>> checking GDAL version >= 1.11.4... yes
>>>> checking gdal: linking with --libs only... yes
>>>> checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
>>>> checking proj_api.h presence and usability... yes
>>>> ./configure: line 3395: test: =: unary operator expected
>>>>
>>>
>>> Will check, that line is:
>>>
>>> if test ${PROJ_VERSION} = "" ; then
>>>
>>> from configure.ac line 305. Possibly a shell dialect issue.
>>>
>>> checking PROJ version >= 4.8.0... yes
>>>> checking projects.h presence and usability... yes
>>>>
>>>
>>> These relate to configure.ac lines 376-419, and the outcome: epsg found
>>> and readable is OK - could there be two libproj on your system (maybe for
>>> different architectures)?
>>>
>>> Undefined symbols for architecture x86_64:
>>>>  "_pj_ctx_fclose", referenced from:
>>>>      _main in proj_conf_test2-06fe7d.o
>>>>  "_pj_get_default_ctx", referenced from:
>>>>      _main in proj_conf_test2-06fe7d.o
>>>>  "_pj_open_lib", referenced from:
>>>>      _main in proj_conf_test2-06fe7d.o
>>>> ld: symbol(s) not found for architecture x86_64
>>>> clang: error: linker command failed with exit code 1 (use -v to see
>>>>
>>> invocation)
>>>
>>>> ./configure: line 3511: ./proj_conf_test2: No such file or directory
>>>> checking PROJ.4: epsg found and readable... yes
>>>>
>>>
>>> Same here for next block in configure.ac; conus found and readable.
>>>
>>> Undefined symbols for architecture x86_64:
>>>>  "_pj_ctx_fclose", referenced from:
>>>>      _main in proj_conf_test3-3b7aa2.o
>>>>  "_pj_get_default_ctx", referenced from:
>>>>      _main in proj_conf_test3-3b7aa2.o
>>>>  "_pj_open_lib", referenced from:
>>>>      _main in proj_conf_test3-3b7aa2.o
>>>> ld: symbol(s) not found for architecture x86_64
>>>> clang: error: linker command failed with exit code 1 (use -v to see
>>>>
>>> invocation)
>>>
>>>> ./configure: line 3570: ./proj_conf_test3: No such file or directory
>>>> checking PROJ.4: conus found and readable... yes
>>>> configure: Package CPP flags:  -I/opt/local/include
>>>>
>>> -I/opt/local/lib/proj5/include
>>>
>>>> configure: Package LIBS:  -L/opt/local/lib -lgdal
>>>>
>>> -L/opt/local/lib/proj5/lib -lproj
>>>
>>>> configure: creating ./config.status
>>>> config.status: creating src/Makevars
>>>> ** libs
>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>> work/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
>>>
>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>> work/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
>>>
>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2  -c init.c -o init.o
>>>
>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2  -c inverser.c -o inverser.o
>>>
>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2  -c local_stubs.c -o local_stubs.o
>>>
>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>> work/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
>>>
>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2  -c ogr_polygons.c -o ogr_polygons.o
>>>
>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>> work/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
>>>
>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>> work/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
>>>
>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>> work/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
>>>
>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>> work/Resources/include"
>>>>
>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>> -fPIC  -Wall -g -O2 -c projectit.cpp -o projectit.o
>>>
>>>> clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names
>>>>
>>> -undefined dynamic_lookup -single_module -multiply_defined suppress
>>> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
>>> rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o
>>> ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o projectit.o
>>> -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
>>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>>> -Wl,CoreFoundation
>>>
>>>> installing to /Users/thiago/Documents/R-packages/rgdal/libs
>>>> ** R
>>>> ** data
>>>> ** inst
>>>> ** byte-compile and prepare package for lazy loading
>>>> ** help
>>>> *** installing help indices
>>>> ** building package indices
>>>> ** installing vignettes
>>>> ** testing if installed package can be loaded
>>>> * DONE (rgdal)
>>>>
>>>> The downloaded source packages are in
>>>>
>>>> ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn
>>>>
>>> /T/Rtmp5K6lt8/downloaded_packages?
>>>
>>>> ?Is this something that needs to be investigated, or I can just safely
>>>> ignore those messages?
>>>>
>>>
>>> Please try to run:
>>>
>>> tools::testInstalledPackage("rgdal", outDir=tempdir())
>>> list.files(tempdir())
>>> file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>>>
>>> and if the outcomes are as expected, you should be OK, please let us
>>> know.
>>>
>>> If any OSX users installing from source can contribute, that would be
>>> useful. It will take a little while before the CRAN OSX binaries catch up
>>> with new PROJ and GDAL.
>>>
>>> Again thanks for reporting!
>>>
>>> Roger
>>>
>>> Many thanks, -- Thiago V. dos Santos
>>>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>>>>
>>> EngineeringUniversity of Michigan
>>>
>>>>
>>>>    On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <
>>>>
>>> Roger.Bivand at nhh.no> wrote:
>>>
>>>>
>>>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>>>> first, then the other two, which link to the installed sp. They all
>>>> address so-called rchk issues, which have not so far been a problem, but
>>>> might have become more fragile as R's internal memory management is made
>>>> even more efficient. This involves compiled code using memory allocated
>>>>
>>> by
>>>
>>>> R to be freed by R's garbage collector, which has to know if an object
>>>> is
>>>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>>>> explain the issues encountered - what was good coding practice fifteen
>>>> years ago isn't always still good practice.
>>>>
>>>> In addition, the earliest versions of GDAL and PROJ with which rgdal
>>>> will
>>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
>>>>
>>> current
>>>
>>>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>>>> fixed and new features and drivers introduced. A check has been put
>>>> in place to trap attempts to install rgdal without a C++11-capable
>>>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos
>>>>
>>> is
>>>
>>>> ready for the forthcoming version of GEOS.
>>>>
>>>> The CRAN team has also been very supportive of our efforts to bring
>>>> compiled code in these packages into rchk compliance.
>>>>
>>>> Please get in touch if you see any loose ends in these releases.
>>>>
>>>> Roger
>>>>
>>>>
>>>>
>>> --
>>> Roger Bivand
>>> Department of Economics, Norwegian School of Economics,
>>> Helleveien 30, N-5045 Bergen, Norway.
>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>
>>
>>
>>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>



-- 
Vijay Lulla

Assistant Professor,
Dept. of Geography, IUPUI
425 University Blvd, CA-207C.
Indianapolis, IN-46202
vlulla at iupui.edu
ORCID: https://orcid.org/0000-0002-0823-2522
Webpage: http://vijaylulla.com

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @ending from uni-muen@ter@de  Tue Jun 12 18:00:16 2018
From: edzer@pebe@m@ @ending from uni-muen@ter@de (Edzer Pebesma)
Date: Tue, 12 Jun 2018 18:00:16 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <CAKkiGbsmz62FW0BZE7EgQkyRkvTnNCCcTyUEchs-yVmbO8FEEA@mail.gmail.com>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <1430599590.2907591.1528573575719@mail.yahoo.com>
 <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>
 <219701775.3812753.1528761246572@mail.yahoo.com>
 <CAKkiGbu8Nd3UYF0a6OV339_JvfRE2rG8S=SjZ2-q-a8mcneh4A@mail.gmail.com>
 <alpine.LFD.2.21.1806120852400.11159@reclus.nhh.no>
 <CAKkiGbsmz62FW0BZE7EgQkyRkvTnNCCcTyUEchs-yVmbO8FEEA@mail.gmail.com>
Message-ID: <1cd72835-2f32-2ea8-5e95-95796f338f50@uni-muenster.de>

proj.5 contains new features, but none of these are, or will in the near
future be available to R users. All our (= Roger + me) efforts so far
have been to get software (rgdal, sf) running with proj.5, not to expose
any of its new features.
See also https://github.com/r-spatial/sf/issues/545

Also: if anyone insists on installing rgdal or sf from source on a Mac
but doesn't use the setup CRAN uses for building binaries, neither Roger
nor I can assist in case of problems beyond wildly guessing. Of course,
any help from anyone else on these kind of issues is highly appreciated.

On 06/12/2018 04:41 PM, Vijay Lulla wrote:
> Thank you for the explanation of difference between proj.h and proj_api.h
> and the recommendation of setting environment variable for pkg-config.  I
> had tried using pkg-config by setting env variables but haven't had much
> luck getting it to work.
> Cordially,
> Vijay.
> 
> On Tue, Jun 12, 2018 at 3:11 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
>> On Tue, 12 Jun 2018, Vijay Lulla wrote:
>>
>> I too use R on a mac but I cannot get rgdal to use proj5 (port info proj).
>>> rgdal still uses proj4 even when there is a newer version of proj already
>>> on my computer.  Neither of these proj packages (proj4 or proj) use
>>> pkg-config mechanism even though there are proj.pc files in both versions
>>> of the package.  Maybe using the pkg-config mechanism to detect version of
>>> packages during source installation might help?  I don't know whether this
>>> is a "proj" or a "macports" issue though.
>>>
>>>
>> Neither sp/rgdal nor sf plan to accomodate the proj.h interface until the
>> GDAL barn-raising project is completed. Even then, most software using proj
>> will have to support the proj_api.h and the proj.h APIs because many
>> platforms are bound to move at the speed of the slowest package using proj.
>> The proj_api.h API does use the new mechanisms internally, but it isn't
>> obvious how or whether proj.h pipelines should be exposed (GRASS has a
>> prototype implementation).
>>
>> If you work in geodetics and need sub-cm precision, this may matter; in
>> which case please follow the GDAL barn-raising project and provide use
>> cases where the proj.h API is required. The main difference is that the
>> proj_api.h API always transforms to the WGS84 datum first then transforms
>> to the target datum (many to one then one to many). When this was chosen
>> 1984 was not so long ago; the new proj.h API suggests transforming along a
>> pipeline from source to target datum without going through WGS84 (many to
>> many).
>>
>> If your question is about how to install rgdal from source on OSX, you may
>> need to ensure that you only have one version of proj installed, or use
>> configure arguments and load path modifications on your own responsibility.
>>
>> From rgdal 1.3-1, the pkg-config mechanism is used if the path to proj.pc
>> is set correctly (environment variable), but will fall back on standard
>> locations if pkg-config proj fails.
>>
>> Roger
>>
>>
>>
>>> On Mon, Jun 11, 2018 at 7:54 PM, Thiago V. dos Santos via R-sig-Geo <
>>> r-sig-geo at r-project.org> wrote:
>>>
>>> Hi Roger, thanks for the follow up. Answering to your comments:
>>>>
>>>> a) I am using Macports's gdal version 2.3.0.20180523. I am pretty sure
>>>> that its source code (i.e. the one that is compiled on my machine) is
>>>> downloaded from OSGEO (at least according to https://github.com/
>>>> macports/macports-ports/blob/master/gis/gdal/Portfile);
>>>>
>>>> b) I do have more than one libproj installed on my system (as QGIS for
>>>> macOS requires its own gdal and proj stuff), but only the Macports one is
>>>> on my path;
>>>>
>>>>
>>>> c) I tried running:
>>>> tools::testInstalledPackage("rgdal", outDir=tempdir())list.files(
>>>> tempdir())file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>>>>
>>>> but it unexpectedly returned "Error in library("rgdal") : there is no
>>>> package called ?rgdal?. Execution halted".
>>>>
>>>> It looks weird but so far I am able to normally load and use at least a
>>>> couple of rgdal's functions.
>>>>
>>>> I will keep monitoring it though, and report any other issue.
>>>>
>>>> Cheers,
>>>>  -- Thiago V. dos Santos
>>>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>>>> EngineeringUniversity of Michigan
>>>>
>>>>     On Sunday, June 10, 2018, 4:46:04 AM EDT, Roger Bivand <
>>>> Roger.Bivand at nhh.no> wrote:
>>>>
>>>>  Thanks for reporting, comments inline below (note that I have no OSX
>>>> access at all):
>>>>
>>>> On Sat, 9 Jun 2018, Thiago V. dos Santos wrote:
>>>>
>>>> Dear Roger,
>>>>> Thank you very much for the excellent work done with those packages.
>>>>> Today I update both rgeos and rgdal on my system - macOS 10.13.5 with
>>>>> all dependencies installed via MacPorts. I had updated sp a few days
>>>>> earlier. The dependencies versions on my system are gdal
>>>>> @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj @5.1.0_0.
>>>>> Rgeos's update went flawlessly, but I got a few errors while updating
>>>>> rgdal. It still compiled successfully, but I am concerned that some
>>>>> functionality might be compromised due to the errors.
>>>>> This is what I got (I have to manually specify the location of proj or
>>>>> rgdal won't find it):> install.packages('rgdal', type = "source",
>>>>> configure.args=c(
>>>>> +    '--with-proj-include=/opt/local/lib/proj5/include',
>>>>> +    '--with-proj-lib=/opt/local/lib/proj5/lib'))
>>>>> Installing package into ?/Users/thiago/Documents/R-packages?
>>>>> (as ?lib? is unspecified)
>>>>> trying URL 'https://cran.r-project.org/src/contrib/rgdal_1.3-2.tar.gz'
>>>>> Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
>>>>> ==================================================
>>>>> downloaded 1.6 MB
>>>>>
>>>>> * installing *source* package ?rgdal? ...
>>>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>>>> configure: CC: /usr/bin/clang
>>>>> configure: CXX: /usr/bin/clang++
>>>>> configure: rgdal: 1.3-2
>>>>> checking for /usr/bin/svnversion... yes
>>>>> configure: svn revision: 755
>>>>> checking whether the C++ compiler works... yes
>>>>> checking for C++ compiler default output file name... a.out
>>>>> checking for suffix of executables...
>>>>> checking whether we are cross compiling... no
>>>>> checking for suffix of object files... o
>>>>> checking whether we are using the GNU C++ compiler... yes
>>>>> checking whether /usr/bin/clang++ accepts -g... yes
>>>>> checking whether /usr/bin/clang++ supports C++11 features by default...
>>>>>
>>>> no
>>>>
>>>>> checking whether /usr/bin/clang++ supports C++11 features with
>>>>>
>>>> -std=gnu++11... yes
>>>>
>>>>> configure: C++11 support available
>>>>> checking for gdal-config... /opt/local/bin/gdal-config
>>>>> checking gdal-config usability... yes
>>>>> configure: GDAL: 2.4.0
>>>>>
>>>>
>>>> All OK up to the GDAL version returned by gdal-config - are you using the
>>>> released GDAL 2.3.0 (probably not) or master?
>>>>
>>>> checking C++11 support for GDAL >= 2.3.0... yes
>>>>> checking GDAL version >= 1.11.4... yes
>>>>> checking gdal: linking with --libs only... yes
>>>>> checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
>>>>> checking proj_api.h presence and usability... yes
>>>>> ./configure: line 3395: test: =: unary operator expected
>>>>>
>>>>
>>>> Will check, that line is:
>>>>
>>>> if test ${PROJ_VERSION} = "" ; then
>>>>
>>>> from configure.ac line 305. Possibly a shell dialect issue.
>>>>
>>>> checking PROJ version >= 4.8.0... yes
>>>>> checking projects.h presence and usability... yes
>>>>>
>>>>
>>>> These relate to configure.ac lines 376-419, and the outcome: epsg found
>>>> and readable is OK - could there be two libproj on your system (maybe for
>>>> different architectures)?
>>>>
>>>> Undefined symbols for architecture x86_64:
>>>>>  "_pj_ctx_fclose", referenced from:
>>>>>      _main in proj_conf_test2-06fe7d.o
>>>>>  "_pj_get_default_ctx", referenced from:
>>>>>      _main in proj_conf_test2-06fe7d.o
>>>>>  "_pj_open_lib", referenced from:
>>>>>      _main in proj_conf_test2-06fe7d.o
>>>>> ld: symbol(s) not found for architecture x86_64
>>>>> clang: error: linker command failed with exit code 1 (use -v to see
>>>>>
>>>> invocation)
>>>>
>>>>> ./configure: line 3511: ./proj_conf_test2: No such file or directory
>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>
>>>>
>>>> Same here for next block in configure.ac; conus found and readable.
>>>>
>>>> Undefined symbols for architecture x86_64:
>>>>>  "_pj_ctx_fclose", referenced from:
>>>>>      _main in proj_conf_test3-3b7aa2.o
>>>>>  "_pj_get_default_ctx", referenced from:
>>>>>      _main in proj_conf_test3-3b7aa2.o
>>>>>  "_pj_open_lib", referenced from:
>>>>>      _main in proj_conf_test3-3b7aa2.o
>>>>> ld: symbol(s) not found for architecture x86_64
>>>>> clang: error: linker command failed with exit code 1 (use -v to see
>>>>>
>>>> invocation)
>>>>
>>>>> ./configure: line 3570: ./proj_conf_test3: No such file or directory
>>>>> checking PROJ.4: conus found and readable... yes
>>>>> configure: Package CPP flags:  -I/opt/local/include
>>>>>
>>>> -I/opt/local/lib/proj5/include
>>>>
>>>>> configure: Package LIBS:  -L/opt/local/lib -lgdal
>>>>>
>>>> -L/opt/local/lib/proj5/lib -lproj
>>>>
>>>>> configure: creating ./config.status
>>>>> config.status: creating src/Makevars
>>>>> ** libs
>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>> work/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
>>>>
>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>> work/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
>>>>
>>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2  -c init.c -o init.o
>>>>
>>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2  -c inverser.c -o inverser.o
>>>>
>>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2  -c local_stubs.c -o local_stubs.o
>>>>
>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>> work/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
>>>>
>>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2  -c ogr_polygons.c -o ogr_polygons.o
>>>>
>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>> work/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
>>>>
>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>> work/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
>>>>
>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>> work/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
>>>>
>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>> work/Resources/include"
>>>>>
>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>> -I"/Users/thiago/Documents/R-packages/sp/include" -I/usr/local/include
>>>> -fPIC  -Wall -g -O2 -c projectit.cpp -o projectit.o
>>>>
>>>>> clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names
>>>>>
>>>> -undefined dynamic_lookup -single_module -multiply_defined suppress
>>>> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
>>>> rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o
>>>> ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o projectit.o
>>>> -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
>>>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>>>> -Wl,CoreFoundation
>>>>
>>>>> installing to /Users/thiago/Documents/R-packages/rgdal/libs
>>>>> ** R
>>>>> ** data
>>>>> ** inst
>>>>> ** byte-compile and prepare package for lazy loading
>>>>> ** help
>>>>> *** installing help indices
>>>>> ** building package indices
>>>>> ** installing vignettes
>>>>> ** testing if installed package can be loaded
>>>>> * DONE (rgdal)
>>>>>
>>>>> The downloaded source packages are in
>>>>>
>>>>> ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn
>>>>>
>>>> /T/Rtmp5K6lt8/downloaded_packages?
>>>>
>>>>> ?Is this something that needs to be investigated, or I can just safely
>>>>> ignore those messages?
>>>>>
>>>>
>>>> Please try to run:
>>>>
>>>> tools::testInstalledPackage("rgdal", outDir=tempdir())
>>>> list.files(tempdir())
>>>> file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>>>>
>>>> and if the outcomes are as expected, you should be OK, please let us
>>>> know.
>>>>
>>>> If any OSX users installing from source can contribute, that would be
>>>> useful. It will take a little while before the CRAN OSX binaries catch up
>>>> with new PROJ and GDAL.
>>>>
>>>> Again thanks for reporting!
>>>>
>>>> Roger
>>>>
>>>> Many thanks, -- Thiago V. dos Santos
>>>>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>>>>>
>>>> EngineeringUniversity of Michigan
>>>>
>>>>>
>>>>>    On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <
>>>>>
>>>> Roger.Bivand at nhh.no> wrote:
>>>>
>>>>>
>>>>> There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>>>>> first, then the other two, which link to the installed sp. They all
>>>>> address so-called rchk issues, which have not so far been a problem, but
>>>>> might have become more fragile as R's internal memory management is made
>>>>> even more efficient. This involves compiled code using memory allocated
>>>>>
>>>> by
>>>>
>>>>> R to be freed by R's garbage collector, which has to know if an object
>>>>> is
>>>>> still being used. Tomas Kalibera, the author of rchk, helped resolve and
>>>>> explain the issues encountered - what was good coding practice fifteen
>>>>> years ago isn't always still good practice.
>>>>>
>>>>> In addition, the earliest versions of GDAL and PROJ with which rgdal
>>>>> will
>>>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
>>>>>
>>>> current
>>>>
>>>>> released versions of PROJ and GDAL are to be prefered, as bugs have been
>>>>> fixed and new features and drivers introduced. A check has been put
>>>>> in place to trap attempts to install rgdal without a C++11-capable
>>>>> compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos
>>>>>
>>>> is
>>>>
>>>>> ready for the forthcoming version of GEOS.
>>>>>
>>>>> The CRAN team has also been very supportive of our efforts to bring
>>>>> compiled code in these packages into rchk compliance.
>>>>>
>>>>> Please get in touch if you see any loose ends in these releases.
>>>>>
>>>>> Roger
>>>>>
>>>>>
>>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>
>>>
>>>
>>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
> 
> 
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From vij@ylull@ @ending from gm@il@com  Tue Jun 12 19:49:51 2018
From: vij@ylull@ @ending from gm@il@com (Vijay Lulla)
Date: Tue, 12 Jun 2018 13:49:51 -0400
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <1cd72835-2f32-2ea8-5e95-95796f338f50@uni-muenster.de>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <1430599590.2907591.1528573575719@mail.yahoo.com>
 <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>
 <219701775.3812753.1528761246572@mail.yahoo.com>
 <CAKkiGbu8Nd3UYF0a6OV339_JvfRE2rG8S=SjZ2-q-a8mcneh4A@mail.gmail.com>
 <alpine.LFD.2.21.1806120852400.11159@reclus.nhh.no>
 <CAKkiGbsmz62FW0BZE7EgQkyRkvTnNCCcTyUEchs-yVmbO8FEEA@mail.gmail.com>
 <1cd72835-2f32-2ea8-5e95-95796f338f50@uni-muenster.de>
Message-ID: <CAKkiGbsDHqqH0H2-mixq_FPkraguMifCwjafDCaEQuH7pxNi+Q@mail.gmail.com>

What is the setup that CRAN uses?  Where can I find this information?

I install most of the R packages on my mac from source and I will be happy
to help (mostly with answering questions and sharing my notes about how I
get packages to compile).

On Tue, Jun 12, 2018 at 12:00 PM, Edzer Pebesma <
edzer.pebesma at uni-muenster.de> wrote:

> proj.5 contains new features, but none of these are, or will in the near
> future be available to R users. All our (= Roger + me) efforts so far
> have been to get software (rgdal, sf) running with proj.5, not to expose
> any of its new features.
> See also https://github.com/r-spatial/sf/issues/545
>
> Also: if anyone insists on installing rgdal or sf from source on a Mac
> but doesn't use the setup CRAN uses for building binaries, neither Roger
> nor I can assist in case of problems beyond wildly guessing. Of course,
> any help from anyone else on these kind of issues is highly appreciated.
>
> On 06/12/2018 04:41 PM, Vijay Lulla wrote:
> > Thank you for the explanation of difference between proj.h and proj_api.h
> > and the recommendation of setting environment variable for pkg-config.  I
> > had tried using pkg-config by setting env variables but haven't had much
> > luck getting it to work.
> > Cordially,
> > Vijay.
> >
> > On Tue, Jun 12, 2018 at 3:11 AM, Roger Bivand <Roger.Bivand at nhh.no>
> wrote:
> >
> >> On Tue, 12 Jun 2018, Vijay Lulla wrote:
> >>
> >> I too use R on a mac but I cannot get rgdal to use proj5 (port info
> proj).
> >>> rgdal still uses proj4 even when there is a newer version of proj
> already
> >>> on my computer.  Neither of these proj packages (proj4 or proj) use
> >>> pkg-config mechanism even though there are proj.pc files in both
> versions
> >>> of the package.  Maybe using the pkg-config mechanism to detect
> version of
> >>> packages during source installation might help?  I don't know whether
> this
> >>> is a "proj" or a "macports" issue though.
> >>>
> >>>
> >> Neither sp/rgdal nor sf plan to accomodate the proj.h interface until
> the
> >> GDAL barn-raising project is completed. Even then, most software using
> proj
> >> will have to support the proj_api.h and the proj.h APIs because many
> >> platforms are bound to move at the speed of the slowest package using
> proj.
> >> The proj_api.h API does use the new mechanisms internally, but it isn't
> >> obvious how or whether proj.h pipelines should be exposed (GRASS has a
> >> prototype implementation).
> >>
> >> If you work in geodetics and need sub-cm precision, this may matter; in
> >> which case please follow the GDAL barn-raising project and provide use
> >> cases where the proj.h API is required. The main difference is that the
> >> proj_api.h API always transforms to the WGS84 datum first then
> transforms
> >> to the target datum (many to one then one to many). When this was chosen
> >> 1984 was not so long ago; the new proj.h API suggests transforming
> along a
> >> pipeline from source to target datum without going through WGS84 (many
> to
> >> many).
> >>
> >> If your question is about how to install rgdal from source on OSX, you
> may
> >> need to ensure that you only have one version of proj installed, or use
> >> configure arguments and load path modifications on your own
> responsibility.
> >>
> >> From rgdal 1.3-1, the pkg-config mechanism is used if the path to
> proj.pc
> >> is set correctly (environment variable), but will fall back on standard
> >> locations if pkg-config proj fails.
> >>
> >> Roger
> >>
> >>
> >>
> >>> On Mon, Jun 11, 2018 at 7:54 PM, Thiago V. dos Santos via R-sig-Geo <
> >>> r-sig-geo at r-project.org> wrote:
> >>>
> >>> Hi Roger, thanks for the follow up. Answering to your comments:
> >>>>
> >>>> a) I am using Macports's gdal version 2.3.0.20180523. I am pretty sure
> >>>> that its source code (i.e. the one that is compiled on my machine) is
> >>>> downloaded from OSGEO (at least according to https://github.com/
> >>>> macports/macports-ports/blob/master/gis/gdal/Portfile);
> >>>>
> >>>> b) I do have more than one libproj installed on my system (as QGIS for
> >>>> macOS requires its own gdal and proj stuff), but only the Macports
> one is
> >>>> on my path;
> >>>>
> >>>>
> >>>> c) I tried running:
> >>>> tools::testInstalledPackage("rgdal", outDir=tempdir())list.files(
> >>>> tempdir())file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
> >>>>
> >>>> but it unexpectedly returned "Error in library("rgdal") : there is no
> >>>> package called ?rgdal?. Execution halted".
> >>>>
> >>>> It looks weird but so far I am able to normally load and use at least
> a
> >>>> couple of rgdal's functions.
> >>>>
> >>>> I will keep monitoring it though, and report any other issue.
> >>>>
> >>>> Cheers,
> >>>>  -- Thiago V. dos Santos
> >>>> Postdoctoral Research FellowDepartment of Climate and Space Science
> and
> >>>> EngineeringUniversity of Michigan
> >>>>
> >>>>     On Sunday, June 10, 2018, 4:46:04 AM EDT, Roger Bivand <
> >>>> Roger.Bivand at nhh.no> wrote:
> >>>>
> >>>>  Thanks for reporting, comments inline below (note that I have no OSX
> >>>> access at all):
> >>>>
> >>>> On Sat, 9 Jun 2018, Thiago V. dos Santos wrote:
> >>>>
> >>>> Dear Roger,
> >>>>> Thank you very much for the excellent work done with those packages.
> >>>>> Today I update both rgeos and rgdal on my system - macOS 10.13.5 with
> >>>>> all dependencies installed via MacPorts. I had updated sp a few days
> >>>>> earlier. The dependencies versions on my system are gdal
> >>>>> @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj
> @5.1.0_0.
> >>>>> Rgeos's update went flawlessly, but I got a few errors while updating
> >>>>> rgdal. It still compiled successfully, but I am concerned that some
> >>>>> functionality might be compromised due to the errors.
> >>>>> This is what I got (I have to manually specify the location of proj
> or
> >>>>> rgdal won't find it):> install.packages('rgdal', type = "source",
> >>>>> configure.args=c(
> >>>>> +    '--with-proj-include=/opt/local/lib/proj5/include',
> >>>>> +    '--with-proj-lib=/opt/local/lib/proj5/lib'))
> >>>>> Installing package into ?/Users/thiago/Documents/R-packages?
> >>>>> (as ?lib? is unspecified)
> >>>>> trying URL 'https://cran.r-project.org/
> src/contrib/rgdal_1.3-2.tar.gz'
> >>>>> Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
> >>>>> ==================================================
> >>>>> downloaded 1.6 MB
> >>>>>
> >>>>> * installing *source* package ?rgdal? ...
> >>>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
> >>>>> configure: CC: /usr/bin/clang
> >>>>> configure: CXX: /usr/bin/clang++
> >>>>> configure: rgdal: 1.3-2
> >>>>> checking for /usr/bin/svnversion... yes
> >>>>> configure: svn revision: 755
> >>>>> checking whether the C++ compiler works... yes
> >>>>> checking for C++ compiler default output file name... a.out
> >>>>> checking for suffix of executables...
> >>>>> checking whether we are cross compiling... no
> >>>>> checking for suffix of object files... o
> >>>>> checking whether we are using the GNU C++ compiler... yes
> >>>>> checking whether /usr/bin/clang++ accepts -g... yes
> >>>>> checking whether /usr/bin/clang++ supports C++11 features by
> default...
> >>>>>
> >>>> no
> >>>>
> >>>>> checking whether /usr/bin/clang++ supports C++11 features with
> >>>>>
> >>>> -std=gnu++11... yes
> >>>>
> >>>>> configure: C++11 support available
> >>>>> checking for gdal-config... /opt/local/bin/gdal-config
> >>>>> checking gdal-config usability... yes
> >>>>> configure: GDAL: 2.4.0
> >>>>>
> >>>>
> >>>> All OK up to the GDAL version returned by gdal-config - are you using
> the
> >>>> released GDAL 2.3.0 (probably not) or master?
> >>>>
> >>>> checking C++11 support for GDAL >= 2.3.0... yes
> >>>>> checking GDAL version >= 1.11.4... yes
> >>>>> checking gdal: linking with --libs only... yes
> >>>>> checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
> >>>>> checking proj_api.h presence and usability... yes
> >>>>> ./configure: line 3395: test: =: unary operator expected
> >>>>>
> >>>>
> >>>> Will check, that line is:
> >>>>
> >>>> if test ${PROJ_VERSION} = "" ; then
> >>>>
> >>>> from configure.ac line 305. Possibly a shell dialect issue.
> >>>>
> >>>> checking PROJ version >= 4.8.0... yes
> >>>>> checking projects.h presence and usability... yes
> >>>>>
> >>>>
> >>>> These relate to configure.ac lines 376-419, and the outcome: epsg
> found
> >>>> and readable is OK - could there be two libproj on your system (maybe
> for
> >>>> different architectures)?
> >>>>
> >>>> Undefined symbols for architecture x86_64:
> >>>>>  "_pj_ctx_fclose", referenced from:
> >>>>>      _main in proj_conf_test2-06fe7d.o
> >>>>>  "_pj_get_default_ctx", referenced from:
> >>>>>      _main in proj_conf_test2-06fe7d.o
> >>>>>  "_pj_open_lib", referenced from:
> >>>>>      _main in proj_conf_test2-06fe7d.o
> >>>>> ld: symbol(s) not found for architecture x86_64
> >>>>> clang: error: linker command failed with exit code 1 (use -v to see
> >>>>>
> >>>> invocation)
> >>>>
> >>>>> ./configure: line 3511: ./proj_conf_test2: No such file or directory
> >>>>> checking PROJ.4: epsg found and readable... yes
> >>>>>
> >>>>
> >>>> Same here for next block in configure.ac; conus found and readable.
> >>>>
> >>>> Undefined symbols for architecture x86_64:
> >>>>>  "_pj_ctx_fclose", referenced from:
> >>>>>      _main in proj_conf_test3-3b7aa2.o
> >>>>>  "_pj_get_default_ctx", referenced from:
> >>>>>      _main in proj_conf_test3-3b7aa2.o
> >>>>>  "_pj_open_lib", referenced from:
> >>>>>      _main in proj_conf_test3-3b7aa2.o
> >>>>> ld: symbol(s) not found for architecture x86_64
> >>>>> clang: error: linker command failed with exit code 1 (use -v to see
> >>>>>
> >>>> invocation)
> >>>>
> >>>>> ./configure: line 3570: ./proj_conf_test3: No such file or directory
> >>>>> checking PROJ.4: conus found and readable... yes
> >>>>> configure: Package CPP flags:  -I/opt/local/include
> >>>>>
> >>>> -I/opt/local/lib/proj5/include
> >>>>
> >>>>> configure: Package LIBS:  -L/opt/local/lib -lgdal
> >>>>>
> >>>> -L/opt/local/lib/proj5/lib -lproj
> >>>>
> >>>>> configure: creating ./config.status
> >>>>> config.status: creating src/Makevars
> >>>>> ** libs
> >>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
> >>>>> work/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
> >>>>
> >>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
> >>>>> work/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
> >>>>
> >>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2  -c init.c -o init.o
> >>>>
> >>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2  -c inverser.c -o inverser.o
> >>>>
> >>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2  -c local_stubs.c -o local_stubs.o
> >>>>
> >>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
> >>>>> work/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
> >>>>
> >>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2  -c ogr_polygons.c -o ogr_polygons.o
> >>>>
> >>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
> >>>>> work/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
> >>>>
> >>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
> >>>>> work/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
> >>>>
> >>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
> >>>>> work/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
> >>>>
> >>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
> >>>>> work/Resources/include"
> >>>>>
> >>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
> >>>> -I"/Users/thiago/Documents/R-packages/sp/include"
> -I/usr/local/include
> >>>> -fPIC  -Wall -g -O2 -c projectit.cpp -o projectit.o
> >>>>
> >>>>> clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names
> >>>>>
> >>>> -undefined dynamic_lookup -single_module -multiply_defined suppress
> >>>> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
> >>>> rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o
> >>>> ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o
> projectit.o
> >>>> -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
> >>>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
> >>>> -Wl,CoreFoundation
> >>>>
> >>>>> installing to /Users/thiago/Documents/R-packages/rgdal/libs
> >>>>> ** R
> >>>>> ** data
> >>>>> ** inst
> >>>>> ** byte-compile and prepare package for lazy loading
> >>>>> ** help
> >>>>> *** installing help indices
> >>>>> ** building package indices
> >>>>> ** installing vignettes
> >>>>> ** testing if installed package can be loaded
> >>>>> * DONE (rgdal)
> >>>>>
> >>>>> The downloaded source packages are in
> >>>>>
> >>>>> ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn
> >>>>>
> >>>> /T/Rtmp5K6lt8/downloaded_packages?
> >>>>
> >>>>> ?Is this something that needs to be investigated, or I can just
> safely
> >>>>> ignore those messages?
> >>>>>
> >>>>
> >>>> Please try to run:
> >>>>
> >>>> tools::testInstalledPackage("rgdal", outDir=tempdir())
> >>>> list.files(tempdir())
> >>>> file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
> >>>>
> >>>> and if the outcomes are as expected, you should be OK, please let us
> >>>> know.
> >>>>
> >>>> If any OSX users installing from source can contribute, that would be
> >>>> useful. It will take a little while before the CRAN OSX binaries
> catch up
> >>>> with new PROJ and GDAL.
> >>>>
> >>>> Again thanks for reporting!
> >>>>
> >>>> Roger
> >>>>
> >>>> Many thanks, -- Thiago V. dos Santos
> >>>>> Postdoctoral Research FellowDepartment of Climate and Space Science
> and
> >>>>>
> >>>> EngineeringUniversity of Michigan
> >>>>
> >>>>>
> >>>>>    On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <
> >>>>>
> >>>> Roger.Bivand at nhh.no> wrote:
> >>>>
> >>>>>
> >>>>> There are new releases of sp, rgdal and rgeos on CRAN. Please
> install sp
> >>>>> first, then the other two, which link to the installed sp. They all
> >>>>> address so-called rchk issues, which have not so far been a problem,
> but
> >>>>> might have become more fragile as R's internal memory management is
> made
> >>>>> even more efficient. This involves compiled code using memory
> allocated
> >>>>>
> >>>> by
> >>>>
> >>>>> R to be freed by R's garbage collector, which has to know if an
> object
> >>>>> is
> >>>>> still being used. Tomas Kalibera, the author of rchk, helped resolve
> and
> >>>>> explain the issues encountered - what was good coding practice
> fifteen
> >>>>> years ago isn't always still good practice.
> >>>>>
> >>>>> In addition, the earliest versions of GDAL and PROJ with which rgdal
> >>>>> will
> >>>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
> >>>>>
> >>>> current
> >>>>
> >>>>> released versions of PROJ and GDAL are to be prefered, as bugs have
> been
> >>>>> fixed and new features and drivers introduced. A check has been put
> >>>>> in place to trap attempts to install rgdal without a C++11-capable
> >>>>> compiler when the GDAL version is >=2.3.0 - which requires C++11.
> rgeos
> >>>>>
> >>>> is
> >>>>
> >>>>> ready for the forthcoming version of GEOS.
> >>>>>
> >>>>> The CRAN team has also been very supportive of our efforts to bring
> >>>>> compiled code in these packages into rchk compliance.
> >>>>>
> >>>>> Please get in touch if you see any loose ends in these releases.
> >>>>>
> >>>>> Roger
> >>>>>
> >>>>>
> >>>>>
> >>>> --
> >>>> Roger Bivand
> >>>> Department of Economics, Norwegian School of Economics,
> >>>> Helleveien 30, N-5045 Bergen, Norway.
> >>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> >>>> http://orcid.org/0000-0003-2392-6140
> >>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> >>>>         [[alternative HTML version deleted]]
> >>>>
> >>>> _______________________________________________
> >>>> R-sig-Geo mailing list
> >>>> R-sig-Geo at r-project.org
> >>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>>
> >>>>
> >>>
> >>>
> >>>
> >>>
> >> --
> >> Roger Bivand
> >> Department of Economics, Norwegian School of Economics,
> >> Helleveien 30, N-5045 Bergen, Norway.
> >> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> >> http://orcid.org/0000-0003-2392-6140
> >> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> >>
> >
> >
> >
>
> --
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Vijay Lulla

Assistant Professor,
Dept. of Geography, IUPUI
425 University Blvd, CA-207C.
Indianapolis, IN-46202
vlulla at iupui.edu
ORCID: https://orcid.org/0000-0002-0823-2522
Webpage: http://vijaylulla.com

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @ending from uni-muen@ter@de  Tue Jun 12 23:32:22 2018
From: edzer@pebe@m@ @ending from uni-muen@ter@de (Edzer Pebesma)
Date: Tue, 12 Jun 2018 23:32:22 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <CAKkiGbsDHqqH0H2-mixq_FPkraguMifCwjafDCaEQuH7pxNi+Q@mail.gmail.com>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <1430599590.2907591.1528573575719@mail.yahoo.com>
 <alpine.LFD.2.21.1806101020370.5183@reclus.nhh.no>
 <219701775.3812753.1528761246572@mail.yahoo.com>
 <CAKkiGbu8Nd3UYF0a6OV339_JvfRE2rG8S=SjZ2-q-a8mcneh4A@mail.gmail.com>
 <alpine.LFD.2.21.1806120852400.11159@reclus.nhh.no>
 <CAKkiGbsmz62FW0BZE7EgQkyRkvTnNCCcTyUEchs-yVmbO8FEEA@mail.gmail.com>
 <1cd72835-2f32-2ea8-5e95-95796f338f50@uni-muenster.de>
 <CAKkiGbsDHqqH0H2-mixq_FPkraguMifCwjafDCaEQuH7pxNi+Q@mail.gmail.com>
Message-ID: <0d2350b5-3afa-30d0-8619-7d1fb6bf4e66@uni-muenster.de>



On 06/12/2018 07:49 PM, Vijay Lulla wrote:
> What is the setup that CRAN uses?  Where can I find this information?

The last two links of https://cran.r-project.org/bin/macosx/ point you
to the libraries it statically links to; further info maybe
https://github.com/r-spatial/sf/issues/327 (or search sf issues for "simon")

> 
> I install most of the R packages on my mac from source and I will be happy
> to help (mostly with answering questions and sharing my notes about how I
> get packages to compile).
> 
> On Tue, Jun 12, 2018 at 12:00 PM, Edzer Pebesma <
> edzer.pebesma at uni-muenster.de> wrote:
> 
>> proj.5 contains new features, but none of these are, or will in the near
>> future be available to R users. All our (= Roger + me) efforts so far
>> have been to get software (rgdal, sf) running with proj.5, not to expose
>> any of its new features.
>> See also https://github.com/r-spatial/sf/issues/545
>>
>> Also: if anyone insists on installing rgdal or sf from source on a Mac
>> but doesn't use the setup CRAN uses for building binaries, neither Roger
>> nor I can assist in case of problems beyond wildly guessing. Of course,
>> any help from anyone else on these kind of issues is highly appreciated.
>>
>> On 06/12/2018 04:41 PM, Vijay Lulla wrote:
>>> Thank you for the explanation of difference between proj.h and proj_api.h
>>> and the recommendation of setting environment variable for pkg-config.  I
>>> had tried using pkg-config by setting env variables but haven't had much
>>> luck getting it to work.
>>> Cordially,
>>> Vijay.
>>>
>>> On Tue, Jun 12, 2018 at 3:11 AM, Roger Bivand <Roger.Bivand at nhh.no>
>> wrote:
>>>
>>>> On Tue, 12 Jun 2018, Vijay Lulla wrote:
>>>>
>>>> I too use R on a mac but I cannot get rgdal to use proj5 (port info
>> proj).
>>>>> rgdal still uses proj4 even when there is a newer version of proj
>> already
>>>>> on my computer.  Neither of these proj packages (proj4 or proj) use
>>>>> pkg-config mechanism even though there are proj.pc files in both
>> versions
>>>>> of the package.  Maybe using the pkg-config mechanism to detect
>> version of
>>>>> packages during source installation might help?  I don't know whether
>> this
>>>>> is a "proj" or a "macports" issue though.
>>>>>
>>>>>
>>>> Neither sp/rgdal nor sf plan to accomodate the proj.h interface until
>> the
>>>> GDAL barn-raising project is completed. Even then, most software using
>> proj
>>>> will have to support the proj_api.h and the proj.h APIs because many
>>>> platforms are bound to move at the speed of the slowest package using
>> proj.
>>>> The proj_api.h API does use the new mechanisms internally, but it isn't
>>>> obvious how or whether proj.h pipelines should be exposed (GRASS has a
>>>> prototype implementation).
>>>>
>>>> If you work in geodetics and need sub-cm precision, this may matter; in
>>>> which case please follow the GDAL barn-raising project and provide use
>>>> cases where the proj.h API is required. The main difference is that the
>>>> proj_api.h API always transforms to the WGS84 datum first then
>> transforms
>>>> to the target datum (many to one then one to many). When this was chosen
>>>> 1984 was not so long ago; the new proj.h API suggests transforming
>> along a
>>>> pipeline from source to target datum without going through WGS84 (many
>> to
>>>> many).
>>>>
>>>> If your question is about how to install rgdal from source on OSX, you
>> may
>>>> need to ensure that you only have one version of proj installed, or use
>>>> configure arguments and load path modifications on your own
>> responsibility.
>>>>
>>>> From rgdal 1.3-1, the pkg-config mechanism is used if the path to
>> proj.pc
>>>> is set correctly (environment variable), but will fall back on standard
>>>> locations if pkg-config proj fails.
>>>>
>>>> Roger
>>>>
>>>>
>>>>
>>>>> On Mon, Jun 11, 2018 at 7:54 PM, Thiago V. dos Santos via R-sig-Geo <
>>>>> r-sig-geo at r-project.org> wrote:
>>>>>
>>>>> Hi Roger, thanks for the follow up. Answering to your comments:
>>>>>>
>>>>>> a) I am using Macports's gdal version 2.3.0.20180523. I am pretty sure
>>>>>> that its source code (i.e. the one that is compiled on my machine) is
>>>>>> downloaded from OSGEO (at least according to https://github.com/
>>>>>> macports/macports-ports/blob/master/gis/gdal/Portfile);
>>>>>>
>>>>>> b) I do have more than one libproj installed on my system (as QGIS for
>>>>>> macOS requires its own gdal and proj stuff), but only the Macports
>> one is
>>>>>> on my path;
>>>>>>
>>>>>>
>>>>>> c) I tried running:
>>>>>> tools::testInstalledPackage("rgdal", outDir=tempdir())list.files(
>>>>>> tempdir())file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>>>>>>
>>>>>> but it unexpectedly returned "Error in library("rgdal") : there is no
>>>>>> package called ?rgdal?. Execution halted".
>>>>>>
>>>>>> It looks weird but so far I am able to normally load and use at least
>> a
>>>>>> couple of rgdal's functions.
>>>>>>
>>>>>> I will keep monitoring it though, and report any other issue.
>>>>>>
>>>>>> Cheers,
>>>>>>  -- Thiago V. dos Santos
>>>>>> Postdoctoral Research FellowDepartment of Climate and Space Science
>> and
>>>>>> EngineeringUniversity of Michigan
>>>>>>
>>>>>>     On Sunday, June 10, 2018, 4:46:04 AM EDT, Roger Bivand <
>>>>>> Roger.Bivand at nhh.no> wrote:
>>>>>>
>>>>>>  Thanks for reporting, comments inline below (note that I have no OSX
>>>>>> access at all):
>>>>>>
>>>>>> On Sat, 9 Jun 2018, Thiago V. dos Santos wrote:
>>>>>>
>>>>>> Dear Roger,
>>>>>>> Thank you very much for the excellent work done with those packages.
>>>>>>> Today I update both rgeos and rgdal on my system - macOS 10.13.5 with
>>>>>>> all dependencies installed via MacPorts. I had updated sp a few days
>>>>>>> earlier. The dependencies versions on my system are gdal
>>>>>>> @2.3.0.20180523_0+grib+hdf4+hdf5+jasper+mpich+netcdf and proj
>> @5.1.0_0.
>>>>>>> Rgeos's update went flawlessly, but I got a few errors while updating
>>>>>>> rgdal. It still compiled successfully, but I am concerned that some
>>>>>>> functionality might be compromised due to the errors.
>>>>>>> This is what I got (I have to manually specify the location of proj
>> or
>>>>>>> rgdal won't find it):> install.packages('rgdal', type = "source",
>>>>>>> configure.args=c(
>>>>>>> +    '--with-proj-include=/opt/local/lib/proj5/include',
>>>>>>> +    '--with-proj-lib=/opt/local/lib/proj5/lib'))
>>>>>>> Installing package into ?/Users/thiago/Documents/R-packages?
>>>>>>> (as ?lib? is unspecified)
>>>>>>> trying URL 'https://cran.r-project.org/
>> src/contrib/rgdal_1.3-2.tar.gz'
>>>>>>> Content type 'application/x-gzip' length 1667049 bytes (1.6 MB)
>>>>>>> ==================================================
>>>>>>> downloaded 1.6 MB
>>>>>>>
>>>>>>> * installing *source* package ?rgdal? ...
>>>>>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>>>>>> configure: CC: /usr/bin/clang
>>>>>>> configure: CXX: /usr/bin/clang++
>>>>>>> configure: rgdal: 1.3-2
>>>>>>> checking for /usr/bin/svnversion... yes
>>>>>>> configure: svn revision: 755
>>>>>>> checking whether the C++ compiler works... yes
>>>>>>> checking for C++ compiler default output file name... a.out
>>>>>>> checking for suffix of executables...
>>>>>>> checking whether we are cross compiling... no
>>>>>>> checking for suffix of object files... o
>>>>>>> checking whether we are using the GNU C++ compiler... yes
>>>>>>> checking whether /usr/bin/clang++ accepts -g... yes
>>>>>>> checking whether /usr/bin/clang++ supports C++11 features by
>> default...
>>>>>>>
>>>>>> no
>>>>>>
>>>>>>> checking whether /usr/bin/clang++ supports C++11 features with
>>>>>>>
>>>>>> -std=gnu++11... yes
>>>>>>
>>>>>>> configure: C++11 support available
>>>>>>> checking for gdal-config... /opt/local/bin/gdal-config
>>>>>>> checking gdal-config usability... yes
>>>>>>> configure: GDAL: 2.4.0
>>>>>>>
>>>>>>
>>>>>> All OK up to the GDAL version returned by gdal-config - are you using
>> the
>>>>>> released GDAL 2.3.0 (probably not) or master?
>>>>>>
>>>>>> checking C++11 support for GDAL >= 2.3.0... yes
>>>>>>> checking GDAL version >= 1.11.4... yes
>>>>>>> checking gdal: linking with --libs only... yes
>>>>>>> checking GDAL: /opt/local/share/gdal/pcs.csv readable... yes
>>>>>>> checking proj_api.h presence and usability... yes
>>>>>>> ./configure: line 3395: test: =: unary operator expected
>>>>>>>
>>>>>>
>>>>>> Will check, that line is:
>>>>>>
>>>>>> if test ${PROJ_VERSION} = "" ; then
>>>>>>
>>>>>> from configure.ac line 305. Possibly a shell dialect issue.
>>>>>>
>>>>>> checking PROJ version >= 4.8.0... yes
>>>>>>> checking projects.h presence and usability... yes
>>>>>>>
>>>>>>
>>>>>> These relate to configure.ac lines 376-419, and the outcome: epsg
>> found
>>>>>> and readable is OK - could there be two libproj on your system (maybe
>> for
>>>>>> different architectures)?
>>>>>>
>>>>>> Undefined symbols for architecture x86_64:
>>>>>>>  "_pj_ctx_fclose", referenced from:
>>>>>>>      _main in proj_conf_test2-06fe7d.o
>>>>>>>  "_pj_get_default_ctx", referenced from:
>>>>>>>      _main in proj_conf_test2-06fe7d.o
>>>>>>>  "_pj_open_lib", referenced from:
>>>>>>>      _main in proj_conf_test2-06fe7d.o
>>>>>>> ld: symbol(s) not found for architecture x86_64
>>>>>>> clang: error: linker command failed with exit code 1 (use -v to see
>>>>>>>
>>>>>> invocation)
>>>>>>
>>>>>>> ./configure: line 3511: ./proj_conf_test2: No such file or directory
>>>>>>> checking PROJ.4: epsg found and readable... yes
>>>>>>>
>>>>>>
>>>>>> Same here for next block in configure.ac; conus found and readable.
>>>>>>
>>>>>> Undefined symbols for architecture x86_64:
>>>>>>>  "_pj_ctx_fclose", referenced from:
>>>>>>>      _main in proj_conf_test3-3b7aa2.o
>>>>>>>  "_pj_get_default_ctx", referenced from:
>>>>>>>      _main in proj_conf_test3-3b7aa2.o
>>>>>>>  "_pj_open_lib", referenced from:
>>>>>>>      _main in proj_conf_test3-3b7aa2.o
>>>>>>> ld: symbol(s) not found for architecture x86_64
>>>>>>> clang: error: linker command failed with exit code 1 (use -v to see
>>>>>>>
>>>>>> invocation)
>>>>>>
>>>>>>> ./configure: line 3570: ./proj_conf_test3: No such file or directory
>>>>>>> checking PROJ.4: conus found and readable... yes
>>>>>>> configure: Package CPP flags:  -I/opt/local/include
>>>>>>>
>>>>>> -I/opt/local/lib/proj5/include
>>>>>>
>>>>>>> configure: Package LIBS:  -L/opt/local/lib -lgdal
>>>>>>>
>>>>>> -L/opt/local/lib/proj5/lib -lproj
>>>>>>
>>>>>>> configure: creating ./config.status
>>>>>>> config.status: creating src/Makevars
>>>>>>> ** libs
>>>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>>>> work/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2 -c OGR_write.cpp -o OGR_write.o
>>>>>>
>>>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>>>> work/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2 -c gdal-bindings.cpp -o gdal-bindings.o
>>>>>>
>>>>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2  -c init.c -o init.o
>>>>>>
>>>>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2  -c inverser.c -o inverser.o
>>>>>>
>>>>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2  -c local_stubs.c -o local_stubs.o
>>>>>>
>>>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>>>> work/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2 -c ogr_geom.cpp -o ogr_geom.o
>>>>>>
>>>>>>> /usr/bin/clang -I"/Library/Frameworks/R.framework/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2  -c ogr_polygons.c -o ogr_polygons.o
>>>>>>
>>>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>>>> work/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2 -c ogr_proj.cpp -o ogr_proj.o
>>>>>>
>>>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>>>> work/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2 -c ogrdrivers.cpp -o ogrdrivers.o
>>>>>>
>>>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>>>> work/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2 -c ogrsource.cpp -o ogrsource.o
>>>>>>
>>>>>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.frame
>>>>>>> work/Resources/include"
>>>>>>>
>>>>>> -DNDEBUG -I/opt/local/include -I/opt/local/lib/proj5/include
>>>>>> -I"/Users/thiago/Documents/R-packages/sp/include"
>> -I/usr/local/include
>>>>>> -fPIC  -Wall -g -O2 -c projectit.cpp -o projectit.o
>>>>>>
>>>>>>> clang++ -std=gnu++11 -dynamiclib -Wl,-headerpad_max_install_names
>>>>>>>
>>>>>> -undefined dynamic_lookup -single_module -multiply_defined suppress
>>>>>> -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o
>>>>>> rgdal.so OGR_write.o gdal-bindings.o init.o inverser.o local_stubs.o
>>>>>> ogr_geom.o ogr_polygons.o ogr_proj.o ogrdrivers.o ogrsource.o
>> projectit.o
>>>>>> -L/opt/local/lib -lgdal -L/opt/local/lib/proj5/lib -lproj
>>>>>> -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework
>>>>>> -Wl,CoreFoundation
>>>>>>
>>>>>>> installing to /Users/thiago/Documents/R-packages/rgdal/libs
>>>>>>> ** R
>>>>>>> ** data
>>>>>>> ** inst
>>>>>>> ** byte-compile and prepare package for lazy loading
>>>>>>> ** help
>>>>>>> *** installing help indices
>>>>>>> ** building package indices
>>>>>>> ** installing vignettes
>>>>>>> ** testing if installed package can be loaded
>>>>>>> * DONE (rgdal)
>>>>>>>
>>>>>>> The downloaded source packages are in
>>>>>>>
>>>>>>> ?/private/var/folders/_z/01gg71zs19g816v6m2dddt8w0000gn
>>>>>>>
>>>>>> /T/Rtmp5K6lt8/downloaded_packages?
>>>>>>
>>>>>>> ?Is this something that needs to be investigated, or I can just
>> safely
>>>>>>> ignore those messages?
>>>>>>>
>>>>>>
>>>>>> Please try to run:
>>>>>>
>>>>>> tools::testInstalledPackage("rgdal", outDir=tempdir())
>>>>>> list.files(tempdir())
>>>>>> file.show(file.path(tempdir(), "rgdal-Ex.Rout"))
>>>>>>
>>>>>> and if the outcomes are as expected, you should be OK, please let us
>>>>>> know.
>>>>>>
>>>>>> If any OSX users installing from source can contribute, that would be
>>>>>> useful. It will take a little while before the CRAN OSX binaries
>> catch up
>>>>>> with new PROJ and GDAL.
>>>>>>
>>>>>> Again thanks for reporting!
>>>>>>
>>>>>> Roger
>>>>>>
>>>>>> Many thanks, -- Thiago V. dos Santos
>>>>>>> Postdoctoral Research FellowDepartment of Climate and Space Science
>> and
>>>>>>>
>>>>>> EngineeringUniversity of Michigan
>>>>>>
>>>>>>>
>>>>>>>    On Friday, June 8, 2018, 2:15:43 PM EDT, Roger Bivand <
>>>>>>>
>>>>>> Roger.Bivand at nhh.no> wrote:
>>>>>>
>>>>>>>
>>>>>>> There are new releases of sp, rgdal and rgeos on CRAN. Please
>> install sp
>>>>>>> first, then the other two, which link to the installed sp. They all
>>>>>>> address so-called rchk issues, which have not so far been a problem,
>> but
>>>>>>> might have become more fragile as R's internal memory management is
>> made
>>>>>>> even more efficient. This involves compiled code using memory
>> allocated
>>>>>>>
>>>>>> by
>>>>>>
>>>>>>> R to be freed by R's garbage collector, which has to know if an
>> object
>>>>>>> is
>>>>>>> still being used. Tomas Kalibera, the author of rchk, helped resolve
>> and
>>>>>>> explain the issues encountered - what was good coding practice
>> fifteen
>>>>>>> years ago isn't always still good practice.
>>>>>>>
>>>>>>> In addition, the earliest versions of GDAL and PROJ with which rgdal
>>>>>>> will
>>>>>>> work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
>>>>>>>
>>>>>> current
>>>>>>
>>>>>>> released versions of PROJ and GDAL are to be prefered, as bugs have
>> been
>>>>>>> fixed and new features and drivers introduced. A check has been put
>>>>>>> in place to trap attempts to install rgdal without a C++11-capable
>>>>>>> compiler when the GDAL version is >=2.3.0 - which requires C++11.
>> rgeos
>>>>>>>
>>>>>> is
>>>>>>
>>>>>>> ready for the forthcoming version of GEOS.
>>>>>>>
>>>>>>> The CRAN team has also been very supportive of our efforts to bring
>>>>>>> compiled code in these packages into rchk compliance.
>>>>>>>
>>>>>>> Please get in touch if you see any loose ends in these releases.
>>>>>>>
>>>>>>> Roger
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> --
>>>>>> Roger Bivand
>>>>>> Department of Economics, Norwegian School of Economics,
>>>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>>> http://orcid.org/0000-0003-2392-6140
>>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-sig-Geo mailing list
>>>>>> R-sig-Geo at r-project.org
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>> --
>>>> Roger Bivand
>>>> Department of Economics, Norwegian School of Economics,
>>>> Helleveien 30, N-5045 Bergen, Norway.
>>>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>
>>>
>>>
>>>
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics
>> Heisenbergstrasse 2, 48151 Muenster, Germany
>> Phone: +49 251 8333081
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From zergioib@rr@ @ending from gm@il@com  Thu Jun 14 06:03:13 2018
From: zergioib@rr@ @ending from gm@il@com (Sergio Ibarra)
Date: Thu, 14 Jun 2018 01:03:13 -0300
Subject: [R-sig-Geo] What is the Coordinate Reference System?
Message-ID: <CABsRJgZqD5PzE9KMfhOwTQ0+27V=ypd1C0E-9Pq6tz995F9_KA@mail.gmail.com>

Greetings,

I'm want to read NetCDF spatial data from a meteorological model (WRF
model). The NetCDF can have one of these three projections:

Polar stereographic
Lambert conformal
Mercator projection

(See figure
https://user-images.githubusercontent.com/27447280/41389756-ed23f91a-6f68-11e8-961e-6ba901913c54.png
)

What is the  Coordinate Reference System for each case?

Thanks!

Here an example with ncdf4 and raster:

library(ncdf4)
library(raster)
a <- tempfile()
download.file(url = "
http://www.unidata.ucar.edu/software/netcdf/examples/wrfout_v2_Lambert.nc",
              destfile = a) #78 Mb
wrf <- nc_open(a)
paste("The file has",wrf$nvars,"variables")
paste("The file has",names(wrf$var))
lat <- ncvar_get( wrf, "XLAT" )
lon <- ncvar_get( wrf, "XLONG" )
t2 <- ncvar_get( wrf, "T2" ) - 273.15
dim(t2) #73 60 13
#image
image(t2[, , 12])
# raster
rt2 <- raster(t(t2[1:dim(t2)[1],
                   dim(t2)[2]:1,
                   12]),
              xmn = min(lon),
              xmx = max(lon),
              ymn = min(lat),
              ymx = max(lat),
*              crs="+init=epsg:4326") # ???*
spplot(rt2)



-- 
?Sergio Ibarra Espinosa
Post Doc
PhD in Atmospheric Sciences
Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
Universidade de S?o Paulo
Rua do Mat?o, 1226
S?o Paulo-SP - Brasil -
05508-090
+55-11-97425-3791
Skype: sergio_ibarra1

	[[alternative HTML version deleted]]


From brun@e@ti @ending from gm@il@com  Thu Jun 14 08:40:22 2018
From: brun@e@ti @ending from gm@il@com (Bruno Sesti)
Date: Thu, 14 Jun 2018 08:40:22 +0200
Subject: [R-sig-Geo] Spatio-Temporal objects and kriging
Message-ID: <CAFnjcD0qrbTsY=GBF9KE1QoChyvED+UA8xLLt53Ge1HsqhX68Q@mail.gmail.com>

Hi, I have some questions about spatio temporal objects and kriging, I have
done some research to try to solve this problems but I did not find any
answer.
I would Like to know if and, if yes, how could be possible to convert a
STIDF object to a SpatialPointsDataFrame object.
The second issue is if and how it could be possible to plot the map(s)
obtained through the function krigeST over an open street map or a Google
map layer in R environment and/or in other gis environments.

Kind regards.

	[[alternative HTML version deleted]]


From b@gr@eler @ending from 52north@org  Thu Jun 14 10:33:43 2018
From: b@gr@eler @ending from 52north@org (=?UTF-8?Q?Dr._Benedikt_Gr=c3=a4ler?=)
Date: Thu, 14 Jun 2018 10:33:43 +0200
Subject: [R-sig-Geo] Spatio-Temporal objects and kriging
In-Reply-To: <CAFnjcD0qrbTsY=GBF9KE1QoChyvED+UA8xLLt53Ge1HsqhX68Q@mail.gmail.com>
References: <CAFnjcD0qrbTsY=GBF9KE1QoChyvED+UA8xLLt53Ge1HsqhX68Q@mail.gmail.com>
Message-ID: <f9a136bd-0d80-00a5-7df2-453840490d75@52north.org>

Dear Bruno,

On 14.06.2018 08:40, Bruno Sesti wrote:
> Hi, I have some questions about spatio temporal objects and kriging, I have
> done some research to try to solve this problems but I did not find any
> answer.
> I would Like to know if and, if yes, how could be possible to convert a
> STIDF object to a SpatialPointsDataFrame object.
You can simply coerce it to "Spatial", note that the class of your 
projected Spatial-Obj will depend on the class of the spatial slot of 
your STIDF-Obj:

library(sp)
library(xts)
library(spacetime)

data("meuse")
coordinates(meuse) <- ~x+y
proj4string(meuse) <- CRS("+init=epsg:28992")

stidf <- STIDF(geometry(meuse), xts(1:length(meuse), Sys.time() - 
(1:length(meuse))*24*3600), meuse at data)

spdf <- as(stidf, "Spatial")

spplot(spdf, "copper")

> The second issue is if and how it could be possible to plot the map(s)
> obtained through the function krigeST over an open street map or a Google
> map layer in R environment and/or in other gis environments.
The function stplot re-uses the function spplot, hence you could use the 
mechanisms of overlaying base maps with your interpolated values (i.e. 
via sp.layout):

data(meuse.riv)
meuse.sr = 
SpatialPolygons(list(Polygons(list(Polygon(meuse.riv)),"meuse.riv")))
stplot(stidf[,,"copper"], sp.layout=list("sp.polygons", 
fill="lightblue", meuse.sr))

The package plotKML allows to directly plot an STIDF-Obj in Google Earth 
including the temporal domain allowing for a quick animation:

library(plotKML)
plotKML(stidf)

Generally, one will have to pick an appropriate (exchange) format that 
respects time and is understood by R and your favorite GIS. A slice wise 
pure spatial export/plot is of course also an option, i.e. looping 
through all relevant timestamps and exporting e.g. a geotiff each or 
using the same techniques as in the pure spatial case.

HTH,

  Ben


> 
> Kind regards.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Dr. Benedikt Gr?ler
52?North Initiative for Geospatial Open Source Software GmbH
Martin-Luther-King-Weg 24
48155 Muenster, Germany

E-Mail: b.graeler at 52north.org
Fon: +49-(0)-251/396371-39
Fax: +49-(0)-251/396371-11

http://52north.org/
Twitter: @FiveTwoN

General Managers: Dr. Albert Remke, Dr. Andreas Wytzisk
Local Court Muenster HRB 10849


From geodude @ending from m@il@com  Thu Jun 14 11:59:58 2018
From: geodude @ending from m@il@com (Jan Willem van der Lichte)
Date: Thu, 14 Jun 2018 11:59:58 +0200
Subject: [R-sig-Geo] Sf st_read postgis
In-Reply-To: <5B1FBC9F.6000307@agriculture.gouv.fr>
References: <trinity-db835417-5994-4bd2-a8b4-e97460309f69-1528798362807@msvc-mesg-gmxus007>
 <5B1FBC9F.6000307@agriculture.gouv.fr>
Message-ID: <trinity-40535c9e-eca7-4274-905b-356b478e2b17-1528970398078@3c-app-mailcom-lxa03>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20180614/0456a263/attachment.html>

From peter@v@nhor@@en @ending from wx@@nl  Thu Jun 14 14:22:13 2018
From: peter@v@nhor@@en @ending from wx@@nl (Peter van Horssen)
Date: Thu, 14 Jun 2018 14:22:13 +0200
Subject: [R-sig-Geo] Fwd: Fwd: Re:  Sf st_read postgis
In-Reply-To: <2768b3ee-5870-f783-1058-ce6e867f3f84@greenstat.nl>
References: <2768b3ee-5870-f783-1058-ce6e867f3f84@greenstat.nl>
Message-ID: <ea100009-cc97-9932-c329-8f370a6fe60c@wxs.nl>


-------- Doorgestuurd bericht --------
Onderwerp: 	Re: [R-sig-Geo] Sf st_read postgis
Datum: 	Thu, 14 Jun 2018 13:48:17 +0200
Van: 	Peter <peter at greenstat.nl>
Aan: 	Jan Willem van der Lichte <geodude at mail.com>



Hi Jan Willem,

reading from a pgdatabase seems extremly sensitive for upper/lowercase 
column titles and irregularities IN data (like '+'? and '&' signs)

I tested your query string on a db file in my local pgdatabase and? got 
the same error? on a data row with a text field with a '+' in the data.

My guess is there is a similair issue in your db.

An easy solution is :
library(sf)
library(tidyverse)

xx = st_read(connz, "vakantie") %>%? slice(,1:3)

(I know, ALL the data is read in first en then the row 1:3 are selected 
....)

# also? try this example

library(sf)
library(mapview)
library(tidyverse)
library(RPostgreSQL)

# read package file nc
nc <- st_read(system.file("shape/nc.shp", package="sf"))

# adjust to your local db parameters
ctest = dbConnect(PostgreSQL(), user="usr",dbname = "db")

# write nc file to db
st_write(nc,ctest)

# check if oke
st_read(ctest, "nc")

st_read(ctest,"nc") %>% slice(.,1:3)

st_read(ctest,"nc") %>% mapview(zcol="NAME")

## all oke !


st_read(ctest,? query="select * from nc limit 1") # oke

# this is the example given in 
https://r-spatial.github.io/sf/reference/st_read.html
st_read(ctest,? "nc",query="select * from nc limit 1") # not oke!

st_read(ctest,? query="select * from nc? where NAME = 'Surry'") # not oke

st_read(ctest,? query="select * from nc? where name = 'Ashe'") # not oke


st_read(ctest,? query="select * FROM nc? WHERE \"SID79\" = 0") # oke !
st_read(ctest,? query="select * FROM nc? WHERE \"NAME\" = 'Ashe' ") # oke !

# the query string is not R but sql :
#? UPPERCAST column names need to be double quoted
# and? a "\" is needed to protect the " in the string,
# spaces around the = sign are mandatory

dbDisconnect(ctest)


HTH
 ?Peter van Horssen


Op 14-6-2018 om 11:59 schreef Jan Willem van der Lichte:
> Hi, thx for answering.
> If I follow your suggestion, I get an error. see below.
> > xx = st_read(connz, query = "SELECT * FROM vakantie LIMIT 3;") Error 
> in CPL_hex_to_raw(vapply(x, skip0x, USE.NAMES = FALSE, "")) : 
> char2int: false character in hex string
> Any other ideas?
> Thanks Jan Willem
> *Sent:*?Tuesday, June 12, 2018 at 2:29 PM
> *From:*?"Michael DELORME" <michael.delorme at agriculture.gouv.fr>
> *To:* r-sig-geo at r-project.org
> *Subject:*?Re: [R-sig-Geo] Sf st_read postgis
> Hi
>
> If you use a query you don't have to set a table name, so
>
> xx <- st_read(connz, query="SELECT * FROM vakantie LIMIT 3;")
>
> should work...
>
>
> Le 12/06/2018 12:12, Jan Willem van der Lichte a ?crit :
> > Hi list,
> >
> > Can someone help me with a basic sf question.
> >
> > I try to use the sf::st_read function to get some data out of postgis.
> >
> > I set up a connection (connz) to postgis.
> > I checked if the connection was working with
> >
> > dbListTables(connz)
> >
> > The result was ok, I saw all the tables in the database.
> >
> > Next I tried to get some data with the st_read() function, from the 
> sf package.
> >
> > I tried to follow the example in the help.
> >
> > xx<- st_read(connz, "vakantie", query="SELECT * FROM vakantie LIMIT 3;")
> >
> > So i replaced the table meuse with vakantie.
> >
> > When I execute this statement, I get a warning
> >
> > Warning message: In st_read.DBIObject(...) : Ignoring query 
> argument, only using table.
> >
> > So what's happening, am I doing something wrong? Which is possible, 
> cause I'm new to R. :-)
> >
> > Thanks
> > Jan Willem
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > Sent with my iPad
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
>
> --
> *Micha?l DELORME*
> Administrateur de donn?es, charg? de projet en g?omatique
> Service r?gional de l'information statistique, ?conomique et territoriale
> Direction r?gionale de l'alimentation, de l'agriculture et de la for?t
> Auvergne-Rh?ne-Alpes
> Site de Lyon
> 165 rue Garibaldi ? BP 3202 ? 69401 LYON cedex 03
> 04 78 63 34 21
>
> Pour ?crire au service :
> DRAAF Auvergne-Rh?ne-Alpes ? SRISET
> 16B rue Aim? Rudel ? BP 45 ? 63370 LEMPDES
>
> http://www.draaf.auvergne-rhone-alpes.agriculture.gouv.fr/
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
*GreenStat* - Statistiek en GIS diensten voor ecologisch onderzoek
*GreenStat* - /Statistical and GIS services for ecological research/

Peter van Horssen | M: +31(0)6 34011089 | W: www.greenstat.nl 
<http://www.greenstat.nl>

	[[alternative HTML version deleted]]


From md@umner @ending from gm@il@com  Fri Jun 15 00:42:02 2018
From: md@umner @ending from gm@il@com (Michael Sumner)
Date: Fri, 15 Jun 2018 08:42:02 +1000
Subject: [R-sig-Geo] What is the Coordinate Reference System?
In-Reply-To: <CABsRJgZqD5PzE9KMfhOwTQ0+27V=ypd1C0E-9Pq6tz995F9_KA@mail.gmail.com>
References: <CABsRJgZqD5PzE9KMfhOwTQ0+27V=ypd1C0E-9Pq6tz995F9_KA@mail.gmail.com>
Message-ID: <CAAcGz9_2Uc1g_02yXWqOfgvMDqRMkqgkqhGvBgXmYwu=MGg5eA@mail.gmail.com>

Try raster::projection(raster::raster(a)) first, then delve if necessary
into the ncdump summary with print(raster::raster(a)))

But, raster(a) may be enough here? To get that stuff more directly from the
NetCDF API you have to use the inq and att functions of ncdf4 or RNetCDF
and that's no fun.

I'd also try raster(rgdal::readGDAL(a)) which is a totally different but
equivalent read path.

Cheers, Mike

On Thu, 14 Jun 2018, 11:03 Sergio Ibarra, <zergioibarra at gmail.com> wrote:

> Greetings,
>
> I'm want to read NetCDF spatial data from a meteorological model (WRF
> model). The NetCDF can have one of these three projections:
>
> Polar stereographic
> Lambert conformal
> Mercator projection
>
> (See figure
>
> https://user-images.githubusercontent.com/27447280/41389756-ed23f91a-6f68-11e8-961e-6ba901913c54.png
> )
>
> What is the  Coordinate Reference System for each case?
>
> Thanks!
>
> Here an example with ncdf4 and raster:
>
> library(ncdf4)
> library(raster)
> a <- tempfile()
> download.file(url = "
> http://www.unidata.ucar.edu/software/netcdf/examples/wrfout_v2_Lambert.nc
> ",
>               destfile = a) #78 Mb
> wrf <- nc_open(a)
> paste("The file has",wrf$nvars,"variables")
> paste("The file has",names(wrf$var))
> lat <- ncvar_get( wrf, "XLAT" )
> lon <- ncvar_get( wrf, "XLONG" )
> t2 <- ncvar_get( wrf, "T2" ) - 273.15
> dim(t2) #73 60 13
> #image
> image(t2[, , 12])
> # raster
> rt2 <- raster(t(t2[1:dim(t2)[1],
>                    dim(t2)[2]:1,
>                    12]),
>               xmn = min(lon),
>               xmx = max(lon),
>               ymn = min(lat),
>               ymx = max(lat),
> *              crs="+init=epsg:4326") # ???*
> spplot(rt2)
>
>
>
> --
> ?Sergio Ibarra Espinosa
> Post Doc
> PhD in Atmospheric Sciences
> Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
> Universidade de S?o Paulo
> Rua do Mat?o, 1226
> S?o Paulo-SP - Brasil -
> 05508-090
> +55-11-97425-3791
> Skype: sergio_ibarra1
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From brun@e@ti @ending from gm@il@com  Fri Jun 15 14:02:23 2018
From: brun@e@ti @ending from gm@il@com (Bruno Sesti)
Date: Fri, 15 Jun 2018 14:02:23 +0200
Subject: [R-sig-Geo] Problems with Spatial Kriging (krige)
Message-ID: <CAFnjcD1Zhs+pjXE8VmXGOgTJU=oVFjN-B5EgAu5G2v9K9=wDNQ@mail.gmail.com>

Hi, I am trying to do Spatial ordinary kriging with participatory sensing
air quality data.
I made the empirical variogram, the fitted model, and the prediction grid
(new data).
However when I call the krige function, as result given by the function I
got a SpatialPointsDataFrame which consists of the prediction grid (which I
created passing THE SpatialPointsDataFrame containing my measures to
spsample function)..
Why I get this wrong result?

Kind regards.

	[[alternative HTML version deleted]]


From btupper @ending from bigelow@org  Fri Jun 15 20:14:47 2018
From: btupper @ending from bigelow@org (Ben Tupper)
Date: Fri, 15 Jun 2018 14:14:47 -0400
Subject: [R-sig-Geo] What is the Coordinate Reference System?
In-Reply-To: <CAAcGz9_2Uc1g_02yXWqOfgvMDqRMkqgkqhGvBgXmYwu=MGg5eA@mail.gmail.com>
References: <CABsRJgZqD5PzE9KMfhOwTQ0+27V=ypd1C0E-9Pq6tz995F9_KA@mail.gmail.com>
 <CAAcGz9_2Uc1g_02yXWqOfgvMDqRMkqgkqhGvBgXmYwu=MGg5eA@mail.gmail.com>
Message-ID: <E77ED889-A37E-44E1-A4E6-B4B064ABD621@bigelow.org>

Hi,

That's an interesting approach.  

On the other hand, sometimes I get bitten (well, muddled really) when I use raster to determine the crs of a ncdf resource.  It all sort of depends.

Below is an example for Aqua MODIS imagery from OBPG (https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/ <https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/>).  The OBPG docs (https://oceancolor.gsfc.nasa.gov/products/ <https://oceancolor.gsfc.nasa.gov/products/>) state that the data is served up as 'Plate Carr?e' which I think has a crs ...

'+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ' 

... as described here http://spatialreference.org/ref/epsg/32662/ <http://spatialreference.org/ref/epsg/32662/>

You can see below that raster comes up with...

'+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0' 

... which is http://spatialreference.org/ref/epsg/4326/ <http://spatialreference.org/ref/epsg/4326/>

Explicitly setting the crs while reading doesn't help.  I have never resolved if it is an OBPG documentation bug, my confusion about projections, or some other mystery.  So, my usual practice is to assume that raster makes the right call.

#### start

library(raster)
URI = 'https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A2017175.L3m_DAY_SST_sst_9km.nc'

# ~3.8MB
ok = download.file(URI, basename(URI))

R = raster::raster(basename(URI), varname = 'sst')
R
# class       : RasterLayer
# dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)
# resolution  : 0.08333334, 0.08333334  (x, y)
# extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
# coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
# data source : /Users/Shared/code/R/others/record/spnc/A2017175.L3m_DAY_SST_sst_9km.nc
# names       : Sea.Surface.Temperature
# zvar        : sst

S = raster::raster(basename(URI), varname = "sst", crs = '+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs')
# Warning message:
# In .getProj(prj, crs) :
#  argument "crs" ignored because the file provides a crs

#### end


Cheers,
Ben


> On Jun 14, 2018, at 6:42 PM, Michael Sumner <mdsumner at gmail.com> wrote:
> 
> Try raster::projection(raster::raster(a)) first, then delve if necessary
> into the ncdump summary with print(raster::raster(a)))
> 
> But, raster(a) may be enough here? To get that stuff more directly from the
> NetCDF API you have to use the inq and att functions of ncdf4 or RNetCDF
> and that's no fun.
> 
> I'd also try raster(rgdal::readGDAL(a)) which is a totally different but
> equivalent read path.
> 
> Cheers, Mike
> 
> On Thu, 14 Jun 2018, 11:03 Sergio Ibarra, <zergioibarra at gmail.com> wrote:
> 
>> Greetings,
>> 
>> I'm want to read NetCDF spatial data from a meteorological model (WRF
>> model). The NetCDF can have one of these three projections:
>> 
>> Polar stereographic
>> Lambert conformal
>> Mercator projection
>> 
>> (See figure
>> 
>> https://user-images.githubusercontent.com/27447280/41389756-ed23f91a-6f68-11e8-961e-6ba901913c54.png
>> )
>> 
>> What is the  Coordinate Reference System for each case?
>> 
>> Thanks!
>> 
>> Here an example with ncdf4 and raster:
>> 
>> library(ncdf4)
>> library(raster)
>> a <- tempfile()
>> download.file(url = "
>> http://www.unidata.ucar.edu/software/netcdf/examples/wrfout_v2_Lambert.nc
>> ",
>>              destfile = a) #78 Mb
>> wrf <- nc_open(a)
>> paste("The file has",wrf$nvars,"variables")
>> paste("The file has",names(wrf$var))
>> lat <- ncvar_get( wrf, "XLAT" )
>> lon <- ncvar_get( wrf, "XLONG" )
>> t2 <- ncvar_get( wrf, "T2" ) - 273.15
>> dim(t2) #73 60 13
>> #image
>> image(t2[, , 12])
>> # raster
>> rt2 <- raster(t(t2[1:dim(t2)[1],
>>                   dim(t2)[2]:1,
>>                   12]),
>>              xmn = min(lon),
>>              xmx = max(lon),
>>              ymn = min(lat),
>>              ymx = max(lat),
>> *              crs="+init=epsg:4326") # ???*
>> spplot(rt2)
>> 
>> 
>> 
>> --
>> ?Sergio Ibarra Espinosa
>> Post Doc
>> PhD in Atmospheric Sciences
>> Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
>> Universidade de S?o Paulo
>> Rua do Mat?o, 1226
>> S?o Paulo-SP - Brasil -
>> 05508-090
>> +55-11-97425-3791
>> Skype: sergio_ibarra1
>> 
>>        [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
> -- 
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecological Forecasting: https://eco.bigelow.org/






	[[alternative HTML version deleted]]


From @@r@h@go@lee @ending from gm@il@com  Fri Jun 15 21:27:22 2018
From: @@r@h@go@lee @ending from gm@il@com (Sarah Goslee)
Date: Fri, 15 Jun 2018 15:27:22 -0400
Subject: [R-sig-Geo] rgdal installation on Fedora 28
Message-ID: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>

Hi folks,

I updated all of my linux computers to Fedora 28, and now can?t install rgdal.

I can install sf with no problems, so it doesn't appear to be an issue
with GDAL or with proj.

I checked with Roger Bivand, the package maintainer, who asked me to
confirm whether I could install sf, to make sure it wasn?t a
dependency issue, and to post the logs online, then ask on the
R-sig-geo mailing list. I?m putting the full problem here, and the
abbreviated version on the mailing list.

I?d appreciate any thoughts: I rely very heavily on the incredibly
useful rgdal package.

> sessionInfo()
R version 3.5.0 (2018-04-23)
Platform: x86_64-redhat-linux-gnu (64-bit)
Running under: Fedora 28 (Workstation Edition)

Matrix products: default
BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.5.0 tools_3.5.0</code>


The install message is:

installing *source* package ?rgdal? ...
** package ?rgdal? successfully unpacked and MD5 sums checked
configure: CC: gcc -m64
configure: CXX: g++ -m64
configure: rgdal: 1.3-2
checking for /usr/bin/svnversion... no
configure: svn revision: 755
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... configure: error: in
`/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
configure: error: cannot run C++ compiled programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details
ERROR: configuration failed for package ?rgdal?
* removing ?/usr/lib64/R/library/rgdal?
* restoring previous ?/usr/lib64/R/library/rgdal?


The complete information and config.log are posted online at:

http://numberwright.com/2018/06/stuck-on-rgdal/


Any ideas? Or any other information that would be useful?

Thanks!
Sarah

-- 
Sarah Goslee
http://www.functionaldiversity.org


From i@t@z@hn @ending from gm@il@com  Fri Jun 15 22:31:28 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Fri, 15 Jun 2018 16:31:28 -0400
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
Message-ID: <CA+vqiLHzKrssCAQk7SUa0tHnY-voQmohzjC0_g_wLT6FfJULdA@mail.gmail.com>

https://askubuntu.com/questions/360329/error-cannot-run-c-compiled-programs-if-you-meant-to-cross-compile-use-host
might help.

--Ista

On Fri, Jun 15, 2018 at 3:27 PM, Sarah Goslee <sarah.goslee at gmail.com> wrote:
> Hi folks,
>
> I updated all of my linux computers to Fedora 28, and now can?t install rgdal.
>
> I can install sf with no problems, so it doesn't appear to be an issue
> with GDAL or with proj.
>
> I checked with Roger Bivand, the package maintainer, who asked me to
> confirm whether I could install sf, to make sure it wasn?t a
> dependency issue, and to post the logs online, then ask on the
> R-sig-geo mailing list. I?m putting the full problem here, and the
> abbreviated version on the mailing list.
>
> I?d appreciate any thoughts: I rely very heavily on the incredibly
> useful rgdal package.
>
>> sessionInfo()
> R version 3.5.0 (2018-04-23)
> Platform: x86_64-redhat-linux-gnu (64-bit)
> Running under: Fedora 28 (Workstation Edition)
>
> Matrix products: default
> BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_3.5.0 tools_3.5.0</code>
>
>
> The install message is:
>
> installing *source* package ?rgdal? ...
> ** package ?rgdal? successfully unpacked and MD5 sums checked
> configure: CC: gcc -m64
> configure: CXX: g++ -m64
> configure: rgdal: 1.3-2
> checking for /usr/bin/svnversion... no
> configure: svn revision: 755
> checking whether the C++ compiler works... yes
> checking for C++ compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... configure: error: in
> `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
> configure: error: cannot run C++ compiled programs.
> If you meant to cross compile, use `--host'.
> See `config.log' for more details
> ERROR: configuration failed for package ?rgdal?
> * removing ?/usr/lib64/R/library/rgdal?
> * restoring previous ?/usr/lib64/R/library/rgdal?
>
>
> The complete information and config.log are posted online at:
>
> http://numberwright.com/2018/06/stuck-on-rgdal/
>
>
> Any ideas? Or any other information that would be useful?
>
> Thanks!
> Sarah
>
> --
> Sarah Goslee
> http://www.functionaldiversity.org
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From @@r@h@go@lee @ending from gm@il@com  Fri Jun 15 22:48:47 2018
From: @@r@h@go@lee @ending from gm@il@com (Sarah Goslee)
Date: Fri, 15 Jun 2018 16:48:47 -0400
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <CA+vqiLHzKrssCAQk7SUa0tHnY-voQmohzjC0_g_wLT6FfJULdA@mail.gmail.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
 <CA+vqiLHzKrssCAQk7SUa0tHnY-voQmohzjC0_g_wLT6FfJULdA@mail.gmail.com>
Message-ID: <CAM_vjukCBJ3-f2yaEy3JeX8h+7q5gFxdLW8Oj-35-CMnpP1VnA@mail.gmail.com>

If you read that whole thread, as far as I can tell it's a permissions
error, possibly due to using an external drive.

I can't see how it would apply to installing an R package from /tmp as
root. Other compiled packages install correctly; rgdal is the only one
giving me this error.

Am I missing something in that thread?

Sarah


On Fri, Jun 15, 2018 at 4:31 PM Ista Zahn <istazahn at gmail.com> wrote:

>
> https://askubuntu.com/questions/360329/error-cannot-run-c-compiled-programs-if-you-meant-to-cross-compile-use-host
> might help.
>
> --Ista
>
> On Fri, Jun 15, 2018 at 3:27 PM, Sarah Goslee <sarah.goslee at gmail.com>
> wrote:
> > Hi folks,
> >
> > I updated all of my linux computers to Fedora 28, and now can?t install
> rgdal.
> >
> > I can install sf with no problems, so it doesn't appear to be an issue
> > with GDAL or with proj.
> >
> > I checked with Roger Bivand, the package maintainer, who asked me to
> > confirm whether I could install sf, to make sure it wasn?t a
> > dependency issue, and to post the logs online, then ask on the
> > R-sig-geo mailing list. I?m putting the full problem here, and the
> > abbreviated version on the mailing list.
> >
> > I?d appreciate any thoughts: I rely very heavily on the incredibly
> > useful rgdal package.
> >
> >> sessionInfo()
> > R version 3.5.0 (2018-04-23)
> > Platform: x86_64-redhat-linux-gnu (64-bit)
> > Running under: Fedora 28 (Workstation Edition)
> >
> > Matrix products: default
> > BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
> >
> > locale:
> >  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> >  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> >  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> >  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> >  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> > [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > loaded via a namespace (and not attached):
> > [1] compiler_3.5.0 tools_3.5.0</code>
> >
> >
> > The install message is:
> >
> > installing *source* package ?rgdal? ...
> > ** package ?rgdal? successfully unpacked and MD5 sums checked
> > configure: CC: gcc -m64
> > configure: CXX: g++ -m64
> > configure: rgdal: 1.3-2
> > checking for /usr/bin/svnversion... no
> > configure: svn revision: 755
> > checking whether the C++ compiler works... yes
> > checking for C++ compiler default output file name... a.out
> > checking for suffix of executables...
> > checking whether we are cross compiling... configure: error: in
> > `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
> > configure: error: cannot run C++ compiled programs.
> > If you meant to cross compile, use `--host'.
> > See `config.log' for more details
> > ERROR: configuration failed for package ?rgdal?
> > * removing ?/usr/lib64/R/library/rgdal?
> > * restoring previous ?/usr/lib64/R/library/rgdal?
> >
> >
> > The complete information and config.log are posted online at:
> >
> > http://numberwright.com/2018/06/stuck-on-rgdal/
> >
> >
> > Any ideas? Or any other information that would be useful?
> >
> > Thanks!
> > Sarah
> >
> > --
> > Sarah Goslee
> > http://www.functionaldiversity.org
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Sarah Goslee
http://www.stringpage.com
http://www.sarahgoslee.com
http://www.functionaldiversity.org

	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Fri Jun 15 23:24:59 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Fri, 15 Jun 2018 23:24:59 +0200
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <CAM_vjukCBJ3-f2yaEy3JeX8h+7q5gFxdLW8Oj-35-CMnpP1VnA@mail.gmail.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
 <CA+vqiLHzKrssCAQk7SUa0tHnY-voQmohzjC0_g_wLT6FfJULdA@mail.gmail.com>
 <CAM_vjukCBJ3-f2yaEy3JeX8h+7q5gFxdLW8Oj-35-CMnpP1VnA@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1806152319010.13097@reclus.nhh.no>

On Fri, 15 Jun 2018, Sarah Goslee wrote:

> If you read that whole thread, as far as I can tell it's a permissions
> error, possibly due to using an external drive.
>
> I can't see how it would apply to installing an R package from /tmp as
> root. Other compiled packages install correctly; rgdal is the only one
> giving me this error.
>
> Am I missing something in that thread?

I agree that it doesn't look like that. The main thread here, mostly OSX, 
was: https://stat.ethz.ch/pipermail/r-sig-geo/2018-June/026622.html, 
earlier https://stat.ethz.ch/pipermail/r-sig-geo/2018-May/026591.html.

That was where the CXX11 test need came from. See also 
https://github.com/OSGeo/gdal/issues/681, but I don't think it is that.

Can you unpack the source tarball, remove lines 41-47 from configure.ac, 
run autoconf to rebuild configure, and see whether removing the test 
helps? This is based on a number of off-list contacts.

Roger


>
> Sarah
>
>
> On Fri, Jun 15, 2018 at 4:31 PM Ista Zahn <istazahn at gmail.com> wrote:
>
>>
>> https://askubuntu.com/questions/360329/error-cannot-run-c-compiled-programs-if-you-meant-to-cross-compile-use-host
>> might help.
>>
>> --Ista
>>
>> On Fri, Jun 15, 2018 at 3:27 PM, Sarah Goslee <sarah.goslee at gmail.com>
>> wrote:
>>> Hi folks,
>>>
>>> I updated all of my linux computers to Fedora 28, and now can?t install
>> rgdal.
>>>
>>> I can install sf with no problems, so it doesn't appear to be an issue
>>> with GDAL or with proj.
>>>
>>> I checked with Roger Bivand, the package maintainer, who asked me to
>>> confirm whether I could install sf, to make sure it wasn?t a
>>> dependency issue, and to post the logs online, then ask on the
>>> R-sig-geo mailing list. I?m putting the full problem here, and the
>>> abbreviated version on the mailing list.
>>>
>>> I?d appreciate any thoughts: I rely very heavily on the incredibly
>>> useful rgdal package.
>>>
>>>> sessionInfo()
>>> R version 3.5.0 (2018-04-23)
>>> Platform: x86_64-redhat-linux-gnu (64-bit)
>>> Running under: Fedora 28 (Workstation Edition)
>>>
>>> Matrix products: default
>>> BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
>>>
>>> locale:
>>>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> loaded via a namespace (and not attached):
>>> [1] compiler_3.5.0 tools_3.5.0</code>
>>>
>>>
>>> The install message is:
>>>
>>> installing *source* package ?rgdal? ...
>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>> configure: CC: gcc -m64
>>> configure: CXX: g++ -m64
>>> configure: rgdal: 1.3-2
>>> checking for /usr/bin/svnversion... no
>>> configure: svn revision: 755
>>> checking whether the C++ compiler works... yes
>>> checking for C++ compiler default output file name... a.out
>>> checking for suffix of executables...
>>> checking whether we are cross compiling... configure: error: in
>>> `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
>>> configure: error: cannot run C++ compiled programs.
>>> If you meant to cross compile, use `--host'.
>>> See `config.log' for more details
>>> ERROR: configuration failed for package ?rgdal?
>>> * removing ?/usr/lib64/R/library/rgdal?
>>> * restoring previous ?/usr/lib64/R/library/rgdal?
>>>
>>>
>>> The complete information and config.log are posted online at:
>>>
>>> http://numberwright.com/2018/06/stuck-on-rgdal/
>>>
>>>
>>> Any ideas? Or any other information that would be useful?
>>>
>>> Thanks!
>>> Sarah
>>>
>>> --
>>> Sarah Goslee
>>> http://www.functionaldiversity.org
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From thi_velo@o @ending from y@hoo@com@br  Sat Jun 16 01:22:13 2018
From: thi_velo@o @ending from y@hoo@com@br (Thiago V. dos Santos)
Date: Fri, 15 Jun 2018 23:22:13 +0000 (UTC)
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
Message-ID: <1112173433.1202408.1529104933070@mail.yahoo.com>

The following lines in your config.log:

/usr/bin/ld: /tmp/cc9pfZ1b.o: relocation R_X86_64_32 against .rodata' can not be used when making a shared object; recompile with -fPIC

make me wonder: maybe there is a -fPIC compilation flag lacking for you platform in the makefile?

Greetings,?-- Thiago V. dos Santos
Postdoctoral Research FellowDepartment of Climate and Space Science and EngineeringUniversity of Michigan 

    On Friday, June 15, 2018, 3:27:44 PM EDT, Sarah Goslee <sarah.goslee at gmail.com> wrote:  
 
 Hi folks,

I updated all of my linux computers to Fedora 28, and now can?t install rgdal.

I can install sf with no problems, so it doesn't appear to be an issue
with GDAL or with proj.

I checked with Roger Bivand, the package maintainer, who asked me to
confirm whether I could install sf, to make sure it wasn?t a
dependency issue, and to post the logs online, then ask on the
R-sig-geo mailing list. I?m putting the full problem here, and the
abbreviated version on the mailing list.

I?d appreciate any thoughts: I rely very heavily on the incredibly
useful rgdal package.

> sessionInfo()
R version 3.5.0 (2018-04-23)
Platform: x86_64-redhat-linux-gnu (64-bit)
Running under: Fedora 28 (Workstation Edition)

Matrix products: default
BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so

locale:
 [1] LC_CTYPE=en_US.UTF-8? ? ? LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8? ? ? ? LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8? ? LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8? ? ? LC_NAME=C
 [9] LC_ADDRESS=C? ? ? ? ? ? ? LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats? ? graphics? grDevices utils? ? datasets? methods? base

loaded via a namespace (and not attached):
[1] compiler_3.5.0 tools_3.5.0</code>


The install message is:

installing *source* package ?rgdal? ...
** package ?rgdal? successfully unpacked and MD5 sums checked
configure: CC: gcc -m64
configure: CXX: g++ -m64
configure: rgdal: 1.3-2
checking for /usr/bin/svnversion... no
configure: svn revision: 755
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... configure: error: in
`/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
configure: error: cannot run C++ compiled programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details
ERROR: configuration failed for package ?rgdal?
* removing ?/usr/lib64/R/library/rgdal?
* restoring previous ?/usr/lib64/R/library/rgdal?


The complete information and config.log are posted online at:

http://numberwright.com/2018/06/stuck-on-rgdal/


Any ideas? Or any other information that would be useful?

Thanks!
Sarah

-- 
Sarah Goslee
http://www.functionaldiversity.org

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo  
	[[alternative HTML version deleted]]


From rundel @ending from gm@il@com  Sat Jun 16 18:40:21 2018
From: rundel @ending from gm@il@com (Colin Rundel)
Date: Sat, 16 Jun 2018 12:40:21 -0400
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <1112173433.1202408.1529104933070@mail.yahoo.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
 <1112173433.1202408.1529104933070@mail.yahoo.com>
Message-ID: <CAKq3hu0N0qQQOwH39wsPFzYayTcpYqE9V1H+PtwYPeTfG+99ug@mail.gmail.com>

As I mentioned in the tweet, I was able to fix this on both a Fedora 23 and
Fedora 27 machine by making the following change to configure.ac:

diff --git a/configure.ac b/configure.ac
index 8ff72be..ab4c772 100644
--- a/configure.ac
+++ b/configure.ac
@@ -3,6 +3,8 @@ define([pkgversion], esyscmd([sh -c "grep Version:
DESCRIPTION | cut -d' ' -f2 |
 AC_INIT(rgdal, [pkgversion], Roger.Bivand at nhh.no)
 AC_CONFIG_SRCDIR(src/gdal-bindings.cpp)

+AC_PROG_CXX()
+
 # find R home and set correct compiler + flags
 : ${R_HOME=`R RHOME`}
 if test -z "${R_HOME}"; then

rerunning autoconf (also assuming m4/ax_cxx_compile_stdcxx.m4 is added)
results in ./configure working for me. I don't have a deep enough
understanding of the vagaries of autoconf to know why exactly this is
necessary on redhat systems and why this fixes it but at least everything
seems to work.

-Colin

On Fri, Jun 15, 2018 at 7:29 PM Thiago V. dos Santos via R-sig-Geo <
r-sig-geo at r-project.org> wrote:

> The following lines in your config.log:
>
> /usr/bin/ld: /tmp/cc9pfZ1b.o: relocation R_X86_64_32 against .rodata' can
> not be used when making a shared object; recompile with -fPIC
>
> make me wonder: maybe there is a -fPIC compilation flag lacking for you
> platform in the makefile?
>
> Greetings, -- Thiago V. dos Santos
> Postdoctoral Research FellowDepartment of Climate and Space Science and
> EngineeringUniversity of Michigan
>
>     On Friday, June 15, 2018, 3:27:44 PM EDT, Sarah Goslee <
> sarah.goslee at gmail.com> wrote:
>
>  Hi folks,
>
> I updated all of my linux computers to Fedora 28, and now can?t install
> rgdal.
>
> I can install sf with no problems, so it doesn't appear to be an issue
> with GDAL or with proj.
>
> I checked with Roger Bivand, the package maintainer, who asked me to
> confirm whether I could install sf, to make sure it wasn?t a
> dependency issue, and to post the logs online, then ask on the
> R-sig-geo mailing list. I?m putting the full problem here, and the
> abbreviated version on the mailing list.
>
> I?d appreciate any thoughts: I rely very heavily on the incredibly
> useful rgdal package.
>
> > sessionInfo()
> R version 3.5.0 (2018-04-23)
> Platform: x86_64-redhat-linux-gnu (64-bit)
> Running under: Fedora 28 (Workstation Edition)
>
> Matrix products: default
> BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8      LC_NUMERIC=C
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>  [7] LC_PAPER=en_US.UTF-8      LC_NAME=C
>  [9] LC_ADDRESS=C              LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats    graphics  grDevices utils    datasets  methods  base
>
> loaded via a namespace (and not attached):
> [1] compiler_3.5.0 tools_3.5.0</code>
>
>
> The install message is:
>
> installing *source* package ?rgdal? ...
> ** package ?rgdal? successfully unpacked and MD5 sums checked
> configure: CC: gcc -m64
> configure: CXX: g++ -m64
> configure: rgdal: 1.3-2
> checking for /usr/bin/svnversion... no
> configure: svn revision: 755
> checking whether the C++ compiler works... yes
> checking for C++ compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... configure: error: in
> `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
> configure: error: cannot run C++ compiled programs.
> If you meant to cross compile, use `--host'.
> See `config.log' for more details
> ERROR: configuration failed for package ?rgdal?
> * removing ?/usr/lib64/R/library/rgdal?
> * restoring previous ?/usr/lib64/R/library/rgdal?
>
>
> The complete information and config.log are posted online at:
>
> http://numberwright.com/2018/06/stuck-on-rgdal/
>
>
> Any ideas? Or any other information that would be useful?
>
> Thanks!
> Sarah
>
> --
> Sarah Goslee
> http://www.functionaldiversity.org
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Sat Jun 16 23:55:14 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Sat, 16 Jun 2018 23:55:14 +0200
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <CAKq3hu0N0qQQOwH39wsPFzYayTcpYqE9V1H+PtwYPeTfG+99ug@mail.gmail.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
 <1112173433.1202408.1529104933070@mail.yahoo.com>
 <CAKq3hu0N0qQQOwH39wsPFzYayTcpYqE9V1H+PtwYPeTfG+99ug@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1806162337360.15187@reclus.nhh.no>

On Sat, 16 Jun 2018, Colin Rundel wrote:

> As I mentioned in the tweet, I was able to fix this on both a Fedora 23 and
> Fedora 27 machine by making the following change to configure.ac:
>
> diff --git a/configure.ac b/configure.ac
> index 8ff72be..ab4c772 100644
> --- a/configure.ac
> +++ b/configure.ac
> @@ -3,6 +3,8 @@ define([pkgversion], esyscmd([sh -c "grep Version:
> DESCRIPTION | cut -d' ' -f2 |
> AC_INIT(rgdal, [pkgversion], Roger.Bivand at nhh.no)
> AC_CONFIG_SRCDIR(src/gdal-bindings.cpp)
>
> +AC_PROG_CXX()
> +
> # find R home and set correct compiler + flags
> : ${R_HOME=`R RHOME`}
> if test -z "${R_HOME}"; then
>
> rerunning autoconf (also assuming m4/ax_cxx_compile_stdcxx.m4 is added)
> results in ./configure working for me. I don't have a deep enough
> understanding of the vagaries of autoconf to know why exactly this is
> necessary on redhat systems and why this fixes it but at least everything
> seems to work.

Thanks very much, committed to R-forge as revision 758.

Roger

>
> -Colin
>
> On Fri, Jun 15, 2018 at 7:29 PM Thiago V. dos Santos via R-sig-Geo <
> r-sig-geo at r-project.org> wrote:
>
>> The following lines in your config.log:
>>
>> /usr/bin/ld: /tmp/cc9pfZ1b.o: relocation R_X86_64_32 against .rodata' can
>> not be used when making a shared object; recompile with -fPIC
>>
>> make me wonder: maybe there is a -fPIC compilation flag lacking for you
>> platform in the makefile?
>>
>> Greetings, -- Thiago V. dos Santos
>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>> EngineeringUniversity of Michigan
>>
>>     On Friday, June 15, 2018, 3:27:44 PM EDT, Sarah Goslee <
>> sarah.goslee at gmail.com> wrote:
>>
>>  Hi folks,
>>
>> I updated all of my linux computers to Fedora 28, and now can?t install
>> rgdal.
>>
>> I can install sf with no problems, so it doesn't appear to be an issue
>> with GDAL or with proj.
>>
>> I checked with Roger Bivand, the package maintainer, who asked me to
>> confirm whether I could install sf, to make sure it wasn?t a
>> dependency issue, and to post the logs online, then ask on the
>> R-sig-geo mailing list. I?m putting the full problem here, and the
>> abbreviated version on the mailing list.
>>
>> I?d appreciate any thoughts: I rely very heavily on the incredibly
>> useful rgdal package.
>>
>>> sessionInfo()
>> R version 3.5.0 (2018-04-23)
>> Platform: x86_64-redhat-linux-gnu (64-bit)
>> Running under: Fedora 28 (Workstation Edition)
>>
>> Matrix products: default
>> BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
>>
>> locale:
>>  [1] LC_CTYPE=en_US.UTF-8      LC_NUMERIC=C
>>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>  [7] LC_PAPER=en_US.UTF-8      LC_NAME=C
>>  [9] LC_ADDRESS=C              LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats    graphics  grDevices utils    datasets  methods  base
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_3.5.0 tools_3.5.0</code>
>>
>>
>> The install message is:
>>
>> installing *source* package ?rgdal? ...
>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>> configure: CC: gcc -m64
>> configure: CXX: g++ -m64
>> configure: rgdal: 1.3-2
>> checking for /usr/bin/svnversion... no
>> configure: svn revision: 755
>> checking whether the C++ compiler works... yes
>> checking for C++ compiler default output file name... a.out
>> checking for suffix of executables...
>> checking whether we are cross compiling... configure: error: in
>> `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
>> configure: error: cannot run C++ compiled programs.
>> If you meant to cross compile, use `--host'.
>> See `config.log' for more details
>> ERROR: configuration failed for package ?rgdal?
>> * removing ?/usr/lib64/R/library/rgdal?
>> * restoring previous ?/usr/lib64/R/library/rgdal?
>>
>>
>> The complete information and config.log are posted online at:
>>
>> http://numberwright.com/2018/06/stuck-on-rgdal/
>>
>>
>> Any ideas? Or any other information that would be useful?
>>
>> Thanks!
>> Sarah
>>
>> --
>> Sarah Goslee
>> http://www.functionaldiversity.org
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From @@r@h@go@lee @ending from gm@il@com  Sun Jun 17 15:50:43 2018
From: @@r@h@go@lee @ending from gm@il@com (Sarah Goslee)
Date: Sun, 17 Jun 2018 09:50:43 -0400
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <alpine.LFD.2.21.1806162337360.15187@reclus.nhh.no>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
 <1112173433.1202408.1529104933070@mail.yahoo.com>
 <CAKq3hu0N0qQQOwH39wsPFzYayTcpYqE9V1H+PtwYPeTfG+99ug@mail.gmail.com>
 <alpine.LFD.2.21.1806162337360.15187@reclus.nhh.no>
Message-ID: <CAM_vjuk92XDC+S1GsmACMLEJCH9F4ArWS6VWb4s6quhJcEf2Gg@mail.gmail.com>

I can confirm that the patched R-Forge version of rgdal installs
correctly on my systems with no other change.

Thank you to Roger and Colin, and everyone else who took a look. The R
community is the BEST.

Sarah

On Sat, Jun 16, 2018 at 5:55 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Sat, 16 Jun 2018, Colin Rundel wrote:
>
>> As I mentioned in the tweet, I was able to fix this on both a Fedora 23
>> and
>> Fedora 27 machine by making the following change to configure.ac:
>>
>> diff --git a/configure.ac b/configure.ac
>> index 8ff72be..ab4c772 100644
>> --- a/configure.ac
>> +++ b/configure.ac
>> @@ -3,6 +3,8 @@ define([pkgversion], esyscmd([sh -c "grep Version:
>> DESCRIPTION | cut -d' ' -f2 |
>> AC_INIT(rgdal, [pkgversion], Roger.Bivand at nhh.no)
>> AC_CONFIG_SRCDIR(src/gdal-bindings.cpp)
>>
>> +AC_PROG_CXX()
>> +
>> # find R home and set correct compiler + flags
>> : ${R_HOME=`R RHOME`}
>> if test -z "${R_HOME}"; then
>>
>> rerunning autoconf (also assuming m4/ax_cxx_compile_stdcxx.m4 is added)
>> results in ./configure working for me. I don't have a deep enough
>> understanding of the vagaries of autoconf to know why exactly this is
>> necessary on redhat systems and why this fixes it but at least everything
>> seems to work.
>
>
> Thanks very much, committed to R-forge as revision 758.
>
> Roger
>
>
>>
>> -Colin
>>
>> On Fri, Jun 15, 2018 at 7:29 PM Thiago V. dos Santos via R-sig-Geo <
>> r-sig-geo at r-project.org> wrote:
>>
>>> The following lines in your config.log:
>>>
>>> /usr/bin/ld: /tmp/cc9pfZ1b.o: relocation R_X86_64_32 against .rodata' can
>>> not be used when making a shared object; recompile with -fPIC
>>>
>>> make me wonder: maybe there is a -fPIC compilation flag lacking for you
>>> platform in the makefile?
>>>
>>> Greetings, -- Thiago V. dos Santos
>>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>>> EngineeringUniversity of Michigan
>>>
>>>     On Friday, June 15, 2018, 3:27:44 PM EDT, Sarah Goslee <
>>> sarah.goslee at gmail.com> wrote:
>>>
>>>  Hi folks,
>>>
>>> I updated all of my linux computers to Fedora 28, and now can?t install
>>> rgdal.
>>>
>>> I can install sf with no problems, so it doesn't appear to be an issue
>>> with GDAL or with proj.
>>>
>>> I checked with Roger Bivand, the package maintainer, who asked me to
>>> confirm whether I could install sf, to make sure it wasn?t a
>>> dependency issue, and to post the logs online, then ask on the
>>> R-sig-geo mailing list. I?m putting the full problem here, and the
>>> abbreviated version on the mailing list.
>>>
>>> I?d appreciate any thoughts: I rely very heavily on the incredibly
>>> useful rgdal package.
>>>
>>>> sessionInfo()
>>>
>>> R version 3.5.0 (2018-04-23)
>>> Platform: x86_64-redhat-linux-gnu (64-bit)
>>> Running under: Fedora 28 (Workstation Edition)
>>>
>>> Matrix products: default
>>> BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
>>>
>>> locale:
>>>  [1] LC_CTYPE=en_US.UTF-8      LC_NUMERIC=C
>>>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>>  [7] LC_PAPER=en_US.UTF-8      LC_NAME=C
>>>  [9] LC_ADDRESS=C              LC_TELEPHONE=C
>>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>
>>> attached base packages:
>>> [1] stats    graphics  grDevices utils    datasets  methods  base
>>>
>>> loaded via a namespace (and not attached):
>>> [1] compiler_3.5.0 tools_3.5.0</code>
>>>
>>>
>>> The install message is:
>>>
>>> installing *source* package ?rgdal? ...
>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>> configure: CC: gcc -m64
>>> configure: CXX: g++ -m64
>>> configure: rgdal: 1.3-2
>>> checking for /usr/bin/svnversion... no
>>> configure: svn revision: 755
>>> checking whether the C++ compiler works... yes
>>> checking for C++ compiler default output file name... a.out
>>> checking for suffix of executables...
>>> checking whether we are cross compiling... configure: error: in
>>> `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
>>> configure: error: cannot run C++ compiled programs.
>>> If you meant to cross compile, use `--host'.
>>> See `config.log' for more details
>>> ERROR: configuration failed for package ?rgdal?
>>> * removing ?/usr/lib64/R/library/rgdal?
>>> * restoring previous ?/usr/lib64/R/library/rgdal?
>>>
>>>
>>> The complete information and config.log are posted online at:
>>>
>>> http://numberwright.com/2018/06/stuck-on-rgdal/
>>>
>>>
>>> Any ideas? Or any other information that would be useful?
>>>
>>> Thanks!
>>> Sarah
>>>


From Roger@Biv@nd @ending from nhh@no  Sun Jun 17 15:56:50 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Sun, 17 Jun 2018 13:56:50 +0000
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <CAM_vjuk92XDC+S1GsmACMLEJCH9F4ArWS6VWb4s6quhJcEf2Gg@mail.gmail.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
 <1112173433.1202408.1529104933070@mail.yahoo.com>
 <CAKq3hu0N0qQQOwH39wsPFzYayTcpYqE9V1H+PtwYPeTfG+99ug@mail.gmail.com>
 <alpine.LFD.2.21.1806162337360.15187@reclus.nhh.no>,
 <CAM_vjuk92XDC+S1GsmACMLEJCH9F4ArWS6VWb4s6quhJcEf2Gg@mail.gmail.com>
Message-ID: <BDBEEBC63E3A2C25.2af8697b-7aec-48c9-a354-e9b2882b9580@mail.outlook.com>

Sarah, thanks for checking and reporting back!

Roger

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Sarah Goslee
Sendt: s?ndag 17. juni, 14.50
Emne: Re: [R-sig-Geo] rgdal installation on Fedora 28
Til: Roger Bivand
Kopi: Colin Rundel, r-sig-geo at r-project.org


I can confirm that the patched R-Forge version of rgdal installs correctly on my systems with no other change. Thank you to Roger and Colin, and everyone else who took a look. The R community is the BEST. Sarah On Sat, Jun 16, 2018 at 5:55 PM, Roger Bivand wrote: > On Sat, 16 Jun 2018, Colin Rundel wrote: > >> As I mentioned in the tweet, I was able to fix this on both a Fedora 23 >> and >> Fedora 27 machine by making the following change to configure.ac: >> >> diff --git a/configure.ac b/configure.ac >> index 8ff72be..ab4c772 100644 >> --- a/configure.ac >> +++ b/configure.ac >> @@ -3,6 +3,8 @@ define([pkgversion], esyscmd([sh -c "grep Version: >> DESCRIPTION | cut -d' ' -f2 | >> AC_INIT(rgdal, [pkgversion], Roger.Bivand at nhh.no) >> AC_CONFIG_SRCDIR(src/gdal-bindings.cpp) >> >> +AC_PROG_CXX() >> + >> # find R home and set correct compiler + flags >> : ${R_HOME=`R RHOME`} >> if test -z "${R_HOME}"; then >> >> rerunning autoconf (also assuming m4/ax_cxx_compile_stdcxx.m4 is added) >> results in ./configure working for me. I don't have a deep enough >> understanding of the vagaries of autoconf to know why exactly this is >> necessary on redhat systems and why this fixes it but at least everything >> seems to work. > > > Thanks very much, committed to R-forge as revision 758. > > Roger > > >> >> -Colin >> >> On Fri, Jun 15, 2018 at 7:29 PM Thiago V. dos Santos via R-sig-Geo < >> r-sig-geo at r-project.org> wrote: >> >>> The following lines in your config.log: >>> >>> /usr/bin/ld: /tmp/cc9pfZ1b.o: relocation R_X86_64_32 against .rodata' can >>> not be used when making a shared object; recompile with -fPIC >>> >>> make me wonder: maybe there is a -fPIC compilation flag lacking for you >>> platform in the makefile? >>> >>> Greetings, -- Thiago V. dos Santos >>> Postdoctoral Research FellowDepartment of Climate and Space Science and >>> EngineeringUniversity of Michigan >>> >>> On Friday, June 15, 2018, 3:27:44 PM EDT, Sarah Goslee < >>> sarah.goslee at gmail.com> wrote: >>> >>> Hi folks, >>> >>> I updated all of my linux computers to Fedora 28, and now can?t install >>> rgdal. >>> >>> I can install sf with no problems, so it doesn't appear to be an issue >>> with GDAL or with proj. >>> >>> I checked with Roger Bivand, the package maintainer, who asked me to >>> confirm whether I could install sf, to make sure it wasn?t a >>> dependency issue, and to post the logs online, then ask on the >>> R-sig-geo mailing list. I?m putting the full problem here, and the >>> abbreviated version on the mailing list. >>> >>> I?d appreciate any thoughts: I rely very heavily on the incredibly >>> useful rgdal package. >>> >>>> sessionInfo() >>> >>> R version 3.5.0 (2018-04-23) >>> Platform: x86_64-redhat-linux-gnu (64-bit) >>> Running under: Fedora 28 (Workstation Edition) >>> >>> Matrix products: default >>> BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so >>> >>> locale: >>> [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C >>> [3] LC_TIME=en_US.UTF-8 LC_COLLATE=en_US.UTF-8 >>> [5] LC_MONETARY=en_US.UTF-8 LC_MESSAGES=en_US.UTF-8 >>> [7] LC_PAPER=en_US.UTF-8 LC_NAME=C >>> [9] LC_ADDRESS=C LC_TELEPHONE=C >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C >>> >>> attached base packages: >>> [1] stats graphics grDevices utils datasets methods base >>> >>> loaded via a namespace (and not attached): >>> [1] compiler_3.5.0 tools_3.5.0 >>> >>> >>> The install message is: >>> >>> installing *source* package ?rgdal? ... >>> ** package ?rgdal? successfully unpacked and MD5 sums checked >>> configure: CC: gcc -m64 >>> configure: CXX: g++ -m64 >>> configure: rgdal: 1.3-2 >>> checking for /usr/bin/svnversion... no >>> configure: svn revision: 755 >>> checking whether the C++ compiler works... yes >>> checking for C++ compiler default output file name... a.out >>> checking for suffix of executables... >>> checking whether we are cross compiling... configure: error: in >>> `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal': >>> configure: error: cannot run C++ compiled programs. >>> If you meant to cross compile, use `--host'. >>> See `config.log' for more details >>> ERROR: configuration failed for package ?rgdal? >>> * removing ?/usr/lib64/R/library/rgdal? >>> * restoring previous ?/usr/lib64/R/library/rgdal? >>> >>> >>> The complete information and config.log are posted online at: >>> >>> http://numberwright.com/2018/06/stuck-on-rgdal/ >>> >>> >>> Any ideas? Or any other information that would be useful? >>> >>> Thanks! >>> Sarah >>>


	[[alternative HTML version deleted]]


From b@rowling@on @ending from l@nc@@ter@@c@uk  Sun Jun 17 17:13:14 2018
From: b@rowling@on @ending from l@nc@@ter@@c@uk (Barry Rowlingson)
Date: Sun, 17 Jun 2018 16:13:14 +0100
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <CAM_vjuk92XDC+S1GsmACMLEJCH9F4ArWS6VWb4s6quhJcEf2Gg@mail.gmail.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
 <1112173433.1202408.1529104933070@mail.yahoo.com>
 <CAKq3hu0N0qQQOwH39wsPFzYayTcpYqE9V1H+PtwYPeTfG+99ug@mail.gmail.com>
 <alpine.LFD.2.21.1806162337360.15187@reclus.nhh.no>
 <CAM_vjuk92XDC+S1GsmACMLEJCH9F4ArWS6VWb4s6quhJcEf2Gg@mail.gmail.com>
Message-ID: <CANVKczNNmW9O9U=wqU0przYTikURZs3ePoJ63W7geN8Cr_qzSQ@mail.gmail.com>

Just a quick note to point out that you can test installations on systems
without having to install such a system by using Docker. Fedora 28 images
are available on Docker Hub.

You have to figure out how to install the toolchain and other components
for building R etc but that helps make a reproducible installation
procedure.

Is everyone doing this already?

Barry


On Sun, Jun 17, 2018 at 2:50 PM, Sarah Goslee <sarah.goslee at gmail.com>
wrote:

> I can confirm that the patched R-Forge version of rgdal installs
> correctly on my systems with no other change.
>
> Thank you to Roger and Colin, and everyone else who took a look. The R
> community is the BEST.
>
> Sarah
>
> On Sat, Jun 16, 2018 at 5:55 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> > On Sat, 16 Jun 2018, Colin Rundel wrote:
> >
> >> As I mentioned in the tweet, I was able to fix this on both a Fedora 23
> >> and
> >> Fedora 27 machine by making the following change to configure.ac:
> >>
> >> diff --git a/configure.ac b/configure.ac
> >> index 8ff72be..ab4c772 100644
> >> --- a/configure.ac
> >> +++ b/configure.ac
> >> @@ -3,6 +3,8 @@ define([pkgversion], esyscmd([sh -c "grep Version:
> >> DESCRIPTION | cut -d' ' -f2 |
> >> AC_INIT(rgdal, [pkgversion], Roger.Bivand at nhh.no)
> >> AC_CONFIG_SRCDIR(src/gdal-bindings.cpp)
> >>
> >> +AC_PROG_CXX()
> >> +
> >> # find R home and set correct compiler + flags
> >> : ${R_HOME=`R RHOME`}
> >> if test -z "${R_HOME}"; then
> >>
> >> rerunning autoconf (also assuming m4/ax_cxx_compile_stdcxx.m4 is added)
> >> results in ./configure working for me. I don't have a deep enough
> >> understanding of the vagaries of autoconf to know why exactly this is
> >> necessary on redhat systems and why this fixes it but at least
> everything
> >> seems to work.
> >
> >
> > Thanks very much, committed to R-forge as revision 758.
> >
> > Roger
> >
> >
> >>
> >> -Colin
> >>
> >> On Fri, Jun 15, 2018 at 7:29 PM Thiago V. dos Santos via R-sig-Geo <
> >> r-sig-geo at r-project.org> wrote:
> >>
> >>> The following lines in your config.log:
> >>>
> >>> /usr/bin/ld: /tmp/cc9pfZ1b.o: relocation R_X86_64_32 against .rodata'
> can
> >>> not be used when making a shared object; recompile with -fPIC
> >>>
> >>> make me wonder: maybe there is a -fPIC compilation flag lacking for you
> >>> platform in the makefile?
> >>>
> >>> Greetings, -- Thiago V. dos Santos
> >>> Postdoctoral Research FellowDepartment of Climate and Space Science and
> >>> EngineeringUniversity of Michigan
> >>>
> >>>     On Friday, June 15, 2018, 3:27:44 PM EDT, Sarah Goslee <
> >>> sarah.goslee at gmail.com> wrote:
> >>>
> >>>  Hi folks,
> >>>
> >>> I updated all of my linux computers to Fedora 28, and now can?t install
> >>> rgdal.
> >>>
> >>> I can install sf with no problems, so it doesn't appear to be an issue
> >>> with GDAL or with proj.
> >>>
> >>> I checked with Roger Bivand, the package maintainer, who asked me to
> >>> confirm whether I could install sf, to make sure it wasn?t a
> >>> dependency issue, and to post the logs online, then ask on the
> >>> R-sig-geo mailing list. I?m putting the full problem here, and the
> >>> abbreviated version on the mailing list.
> >>>
> >>> I?d appreciate any thoughts: I rely very heavily on the incredibly
> >>> useful rgdal package.
> >>>
> >>>> sessionInfo()
> >>>
> >>> R version 3.5.0 (2018-04-23)
> >>> Platform: x86_64-redhat-linux-gnu (64-bit)
> >>> Running under: Fedora 28 (Workstation Edition)
> >>>
> >>> Matrix products: default
> >>> BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
> >>>
> >>> locale:
> >>>  [1] LC_CTYPE=en_US.UTF-8      LC_NUMERIC=C
> >>>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> >>>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> >>>  [7] LC_PAPER=en_US.UTF-8      LC_NAME=C
> >>>  [9] LC_ADDRESS=C              LC_TELEPHONE=C
> >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >>>
> >>> attached base packages:
> >>> [1] stats    graphics  grDevices utils    datasets  methods  base
> >>>
> >>> loaded via a namespace (and not attached):
> >>> [1] compiler_3.5.0 tools_3.5.0</code>
> >>>
> >>>
> >>> The install message is:
> >>>
> >>> installing *source* package ?rgdal? ...
> >>> ** package ?rgdal? successfully unpacked and MD5 sums checked
> >>> configure: CC: gcc -m64
> >>> configure: CXX: g++ -m64
> >>> configure: rgdal: 1.3-2
> >>> checking for /usr/bin/svnversion... no
> >>> configure: svn revision: 755
> >>> checking whether the C++ compiler works... yes
> >>> checking for C++ compiler default output file name... a.out
> >>> checking for suffix of executables...
> >>> checking whether we are cross compiling... configure: error: in
> >>> `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
> >>> configure: error: cannot run C++ compiled programs.
> >>> If you meant to cross compile, use `--host'.
> >>> See `config.log' for more details
> >>> ERROR: configuration failed for package ?rgdal?
> >>> * removing ?/usr/lib64/R/library/rgdal?
> >>> * restoring previous ?/usr/lib64/R/library/rgdal?
> >>>
> >>>
> >>> The complete information and config.log are posted online at:
> >>>
> >>> http://numberwright.com/2018/06/stuck-on-rgdal/
> >>>
> >>>
> >>> Any ideas? Or any other information that would be useful?
> >>>
> >>> Thanks!
> >>> Sarah
> >>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Sun Jun 17 17:51:55 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Sun, 17 Jun 2018 15:51:55 +0000
Subject: [R-sig-Geo] rgdal installation on Fedora 28
In-Reply-To: <CANVKczNNmW9O9U=wqU0przYTikURZs3ePoJ63W7geN8Cr_qzSQ@mail.gmail.com>
References: <CAM_vjumh_Kj_XqX3Kug0NACOV4bKuWO=Ovi_eFXf0p6tKyHUyA@mail.gmail.com>
 <1112173433.1202408.1529104933070@mail.yahoo.com>
 <CAKq3hu0N0qQQOwH39wsPFzYayTcpYqE9V1H+PtwYPeTfG+99ug@mail.gmail.com>
 <alpine.LFD.2.21.1806162337360.15187@reclus.nhh.no>
 <CAM_vjuk92XDC+S1GsmACMLEJCH9F4ArWS6VWb4s6quhJcEf2Gg@mail.gmail.com>,
 <CANVKczNNmW9O9U=wqU0przYTikURZs3ePoJ63W7geN8Cr_qzSQ@mail.gmail.com>
Message-ID: <BDBEEBC63E3A2C25.688e2f4b-224b-4704-a693-981f32424944@mail.outlook.com>

Barry,

No, and it's not that easy. Matching GDAL and PROJ versions, source or binary, multiplies the combinations, and putting aws instances into a box is hard (was missing ldconfig of /usr/local, not rgdal). Docker is always a heavy download, and doesn't work for me on the road and my laptop.

A network of actual users  with problems is arguably as efficient, and includes those with problems in looking for solutions, which is harder for a system solution to do. I for example do not know how to configure R and GDAL versions in a container with Fedora despite doing Dirk's workshop, where we used pre-configured Debian systems.

Somehow people come out of this quite well, don't they?

Just some thoughts,

Roger

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Barry Rowlingson
Sendt: s?ndag 17. juni, 16.13
Emne: Re: [R-sig-Geo] rgdal installation on Fedora 28
Til: Sarah Goslee
Kopi: Roger Bivand, r-sig-geo


Just a quick note to point out that you can test installations on systems without having to install such a system by using Docker. Fedora 28 images are available on Docker Hub.

You have to figure out how to install the toolchain and other components for building R etc but that helps make a reproducible installation procedure.

Is everyone doing this already?

Barry


On Sun, Jun 17, 2018 at 2:50 PM, Sarah Goslee <sarah.goslee at gmail.com<mailto:sarah.goslee at gmail.com>> wrote:
I can confirm that the patched R-Forge version of rgdal installs
correctly on my systems with no other change.

Thank you to Roger and Colin, and everyone else who took a look. The R
community is the BEST.

Sarah

On Sat, Jun 16, 2018 at 5:55 PM, Roger Bivand <Roger.Bivand at nhh.no<mailto:Roger.Bivand at nhh.no>> wrote:
> On Sat, 16 Jun 2018, Colin Rundel wrote:
>
>> As I mentioned in the tweet, I was able to fix this on both a Fedora 23
>> and
>> Fedora 27 machine by making the following change to configure.ac<http://configure.ac>:
>>
>> diff --git a/configure.ac<http://configure.ac> b/configure.ac<http://configure.ac>
>> index 8ff72be..ab4c772 100644
>> --- a/configure.ac<http://configure.ac>
>> +++ b/configure.ac<http://configure.ac>
>> @@ -3,6 +3,8 @@ define([pkgversion], esyscmd([sh -c "grep Version:
>> DESCRIPTION | cut -d' ' -f2 |
>> AC_INIT(rgdal, [pkgversion], Roger.Bivand at nhh.no<mailto:Roger.Bivand at nhh.no>)
>> AC_CONFIG_SRCDIR(src/gdal-bindings.cpp)
>>
>> +AC_PROG_CXX()
>> +
>> # find R home and set correct compiler + flags
>> : ${R_HOME=`R RHOME`}
>> if test -z "${R_HOME}"; then
>>
>> rerunning autoconf (also assuming m4/ax_cxx_compile_stdcxx.m4 is added)
>> results in ./configure working for me. I don't have a deep enough
>> understanding of the vagaries of autoconf to know why exactly this is
>> necessary on redhat systems and why this fixes it but at least everything
>> seems to work.
>
>
> Thanks very much, committed to R-forge as revision 758.
>
> Roger
>
>
>>
>> -Colin
>>
>> On Fri, Jun 15, 2018 at 7:29 PM Thiago V. dos Santos via R-sig-Geo <
>> r-sig-geo at r-project.org<mailto:r-sig-geo at r-project.org>> wrote:
>>
>>> The following lines in your config.log:
>>>
>>> /usr/bin/ld: /tmp/cc9pfZ1b.o: relocation R_X86_64_32 against .rodata' can
>>> not be used when making a shared object; recompile with -fPIC
>>>
>>> make me wonder: maybe there is a -fPIC compilation flag lacking for you
>>> platform in the makefile?
>>>
>>> Greetings, -- Thiago V. dos Santos
>>> Postdoctoral Research FellowDepartment of Climate and Space Science and
>>> EngineeringUniversity of Michigan
>>>
>>>     On Friday, June 15, 2018, 3:27:44 PM EDT, Sarah Goslee <
>>> sarah.goslee at gmail.com<mailto:sarah.goslee at gmail.com>> wrote:
>>>
>>>  Hi folks,
>>>
>>> I updated all of my linux computers to Fedora 28, and now can?t install
>>> rgdal.
>>>
>>> I can install sf with no problems, so it doesn't appear to be an issue
>>> with GDAL or with proj.
>>>
>>> I checked with Roger Bivand, the package maintainer, who asked me to
>>> confirm whether I could install sf, to make sure it wasn?t a
>>> dependency issue, and to post the logs online, then ask on the
>>> R-sig-geo mailing list. I?m putting the full problem here, and the
>>> abbreviated version on the mailing list.
>>>
>>> I?d appreciate any thoughts: I rely very heavily on the incredibly
>>> useful rgdal package.
>>>
>>>> sessionInfo()
>>>
>>> R version 3.5.0 (2018-04-23)
>>> Platform: x86_64-redhat-linux-gnu (64-bit)
>>> Running under: Fedora 28 (Workstation Edition)
>>>
>>> Matrix products: default
>>> BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
>>>
>>> locale:
>>>  [1] LC_CTYPE=en_US.UTF-8      LC_NUMERIC=C
>>>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>>  [7] LC_PAPER=en_US.UTF-8      LC_NAME=C
>>>  [9] LC_ADDRESS=C              LC_TELEPHONE=C
>>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>
>>> attached base packages:
>>> [1] stats    graphics  grDevices utils    datasets  methods  base
>>>
>>> loaded via a namespace (and not attached):
>>> [1] compiler_3.5.0 tools_3.5.0</code>
>>>
>>>
>>> The install message is:
>>>
>>> installing *source* package ?rgdal? ...
>>> ** package ?rgdal? successfully unpacked and MD5 sums checked
>>> configure: CC: gcc -m64
>>> configure: CXX: g++ -m64
>>> configure: rgdal: 1.3-2
>>> checking for /usr/bin/svnversion... no
>>> configure: svn revision: 755
>>> checking whether the C++ compiler works... yes
>>> checking for C++ compiler default output file name... a.out
>>> checking for suffix of executables...
>>> checking whether we are cross compiling... configure: error: in
>>> `/tmp/RtmpfMGBY5/R.INSTALL66c3b8deddb/rgdal':
>>> configure: error: cannot run C++ compiled programs.
>>> If you meant to cross compile, use `--host'.
>>> See `config.log' for more details
>>> ERROR: configuration failed for package ?rgdal?
>>> * removing ?/usr/lib64/R/library/rgdal?
>>> * restoring previous ?/usr/lib64/R/library/rgdal?
>>>
>>>
>>> The complete information and config.log are posted online at:
>>>
>>> http://numberwright.com/2018/06/stuck-on-rgdal/
>>>
>>>
>>> Any ideas? Or any other information that would be useful?
>>>
>>> Thanks!
>>> Sarah
>>>

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org<mailto:R-sig-Geo at r-project.org>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo




	[[alternative HTML version deleted]]


From tom@hengl @ending from gm@il@com  Mon Jun 18 09:56:13 2018
From: tom@hengl @ending from gm@il@com (Tomislav Hengl)
Date: Mon, 18 Jun 2018 09:56:13 +0200
Subject: [R-sig-Geo] Call for manuscripts "Technological and Methodological
 Advances in Measuring,
 Mapping and Monitoring Soil Carbon and Nutrients in Space and Spacetime"
 Special issue in Nutrient Cycling in Agroecosystems Journal
Message-ID: <e2aef2ab-9638-a92b-5371-71dfb312c199@gmail.com>


This is the first call for manuscripts for a special issue 
"Technological and Methodological Advances in Measuring, Mapping and 
Monitoring Soil Carbon and Nutrients in Space and Spacetime" Nutrient 
Cycling in Agroecosystems Journal (https://link.springer.com/journal/10705).

We aim at producing a special issue listing good practice examples of 
how novel technologies such as soil sensing and image recognition, 
automated sensor networks, unmanned aerial vehicles (UAVs) and publicly 
available remote sensing products (such as NASA's Landsat 7 & 8 and 
ASTER missions, ESA's Sentinel 2 and other Copernicus land products, 
JAXA's Advanced Land Observing Satellite ALOS, LiDAR, TanDEMx and 
similar missions), in combination with statistical / machine learning, 
data mining and high performance computing, can be used to generate most 
accurate maps of soil carbon and soil nutrients in space and spacetime.

We require that all articles submitted for this issue come with 
documented computational steps (code) and/or data processing tutorials 
which are available publicly (github, Rpubs, Launchpad, Bitbucket or 
similar) and can be used to reproduce at least 2/3rd of key results (key 
tabular and graphical results). This corresponds to Level 2 or 3 
standards of the Reproducible Research as defined in 
http://dx.doi.org/10.1126/science.aab2374

First five (5) accepted papers for this special issue will be awarded a 
waived registration fees (names to be chosen by the contact author of 
the accepted paper) at the next OpenGeoHub Summer School 2019 (former 
GEOSTAT Summer School, see: https://geostat-course.org/2018).

For more information refer to: http://opengeohub.org/

Special issue editors: T. (Tom) Hengl, M. (Madlene) Nussbaum and P. 
(Pierre) Roudier
Editor-in-Chief: J. (Johannes) Lehmann

Important dates:

- First call: 2018, June 1st.
- Manuscript submission until 2018, December 1st.
- Manuscript evaluation until 2019, February 20th.
- Special issue publication in 2019, March.


From edzer@pebe@m@ @ending from uni-muen@ter@de  Mon Jun 18 10:59:23 2018
From: edzer@pebe@m@ @ending from uni-muen@ter@de (Edzer Pebesma)
Date: Mon, 18 Jun 2018 10:59:23 +0200
Subject: [R-sig-Geo] What is the Coordinate Reference System?
In-Reply-To: <E77ED889-A37E-44E1-A4E6-B4B064ABD621@bigelow.org>
References: <CABsRJgZqD5PzE9KMfhOwTQ0+27V=ypd1C0E-9Pq6tz995F9_KA@mail.gmail.com>
 <CAAcGz9_2Uc1g_02yXWqOfgvMDqRMkqgkqhGvBgXmYwu=MGg5eA@mail.gmail.com>
 <E77ED889-A37E-44E1-A4E6-B4B064ABD621@bigelow.org>
Message-ID: <414e8405-4b05-7ad0-4871-b39860731d96@uni-muenster.de>

Plate carree is essentially a linear mapping of long and lat to x and y,
without changing aspect ratio (scale factor 1 at equator).

projecting long/lat towards plate caree using the proj4 string you
mention will however change the units from degrees to m. So while the
plots of of data in linear long/lat (with aspect ration 1) looks
identical to the one obtained in plate caree (with aspect ratio 1), the
numerical values along their axes are very different.

Many netcdf files carry a grid (raster) with the x and y coordinates of
grid cells (centers?) in another coordinate system, but the ones you
mention below don't, as far as I can tell. I think what they mean by
mentioning plate carree is just saying that this is a regular long/lat
degree grid; rather unlucky wording IMO.

On 06/15/2018 08:14 PM, Ben Tupper wrote:
> Hi,
> 
> That's an interesting approach.  
> 
> On the other hand, sometimes I get bitten (well, muddled really) when I use raster to determine the crs of a ncdf resource.  It all sort of depends.
> 
> Below is an example for Aqua MODIS imagery from OBPG (https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/ <https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/>).  The OBPG docs (https://oceancolor.gsfc.nasa.gov/products/ <https://oceancolor.gsfc.nasa.gov/products/>) state that the data is served up as 'Plate Carr?e' which I think has a crs ...
> 
> '+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ' 
> 
> ... as described here http://spatialreference.org/ref/epsg/32662/ <http://spatialreference.org/ref/epsg/32662/>
> 
> You can see below that raster comes up with...
> 
> '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0' 
> 
> ... which is http://spatialreference.org/ref/epsg/4326/ <http://spatialreference.org/ref/epsg/4326/>
> 
> Explicitly setting the crs while reading doesn't help.  I have never resolved if it is an OBPG documentation bug, my confusion about projections, or some other mystery.  So, my usual practice is to assume that raster makes the right call.
> 
> #### start
> 
> library(raster)
> URI = 'https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A2017175.L3m_DAY_SST_sst_9km.nc'
> 
> # ~3.8MB
> ok = download.file(URI, basename(URI))
> 
> R = raster::raster(basename(URI), varname = 'sst')
> R
> # class       : RasterLayer
> # dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)
> # resolution  : 0.08333334, 0.08333334  (x, y)
> # extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> # coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> # data source : /Users/Shared/code/R/others/record/spnc/A2017175.L3m_DAY_SST_sst_9km.nc
> # names       : Sea.Surface.Temperature
> # zvar        : sst
> 
> S = raster::raster(basename(URI), varname = "sst", crs = '+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs')
> # Warning message:
> # In .getProj(prj, crs) :
> #  argument "crs" ignored because the file provides a crs
> 
> #### end
> 
> 
> Cheers,
> Ben
> 
> 
>> On Jun 14, 2018, at 6:42 PM, Michael Sumner <mdsumner at gmail.com> wrote:
>>
>> Try raster::projection(raster::raster(a)) first, then delve if necessary
>> into the ncdump summary with print(raster::raster(a)))
>>
>> But, raster(a) may be enough here? To get that stuff more directly from the
>> NetCDF API you have to use the inq and att functions of ncdf4 or RNetCDF
>> and that's no fun.
>>
>> I'd also try raster(rgdal::readGDAL(a)) which is a totally different but
>> equivalent read path.
>>
>> Cheers, Mike
>>
>> On Thu, 14 Jun 2018, 11:03 Sergio Ibarra, <zergioibarra at gmail.com> wrote:
>>
>>> Greetings,
>>>
>>> I'm want to read NetCDF spatial data from a meteorological model (WRF
>>> model). The NetCDF can have one of these three projections:
>>>
>>> Polar stereographic
>>> Lambert conformal
>>> Mercator projection
>>>
>>> (See figure
>>>
>>> https://user-images.githubusercontent.com/27447280/41389756-ed23f91a-6f68-11e8-961e-6ba901913c54.png
>>> )
>>>
>>> What is the  Coordinate Reference System for each case?
>>>
>>> Thanks!
>>>
>>> Here an example with ncdf4 and raster:
>>>
>>> library(ncdf4)
>>> library(raster)
>>> a <- tempfile()
>>> download.file(url = "
>>> http://www.unidata.ucar.edu/software/netcdf/examples/wrfout_v2_Lambert.nc
>>> ",
>>>              destfile = a) #78 Mb
>>> wrf <- nc_open(a)
>>> paste("The file has",wrf$nvars,"variables")
>>> paste("The file has",names(wrf$var))
>>> lat <- ncvar_get( wrf, "XLAT" )
>>> lon <- ncvar_get( wrf, "XLONG" )
>>> t2 <- ncvar_get( wrf, "T2" ) - 273.15
>>> dim(t2) #73 60 13
>>> #image
>>> image(t2[, , 12])
>>> # raster
>>> rt2 <- raster(t(t2[1:dim(t2)[1],
>>>                   dim(t2)[2]:1,
>>>                   12]),
>>>              xmn = min(lon),
>>>              xmx = max(lon),
>>>              ymn = min(lat),
>>>              ymx = max(lat),
>>> *              crs="+init=epsg:4326") # ???*
>>> spplot(rt2)
>>>
>>>
>>>
>>> --
>>> ?Sergio Ibarra Espinosa
>>> Post Doc
>>> PhD in Atmospheric Sciences
>>> Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
>>> Universidade de S?o Paulo
>>> Rua do Mat?o, 1226
>>> S?o Paulo-SP - Brasil -
>>> 05508-090
>>> +55-11-97425-3791
>>> Skype: sergio_ibarra1
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>> -- 
>> Dr. Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> 203 Channel Highway
>> Kingston Tasmania 7050 Australia
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
> 
> Ecological Forecasting: https://eco.bigelow.org/
> 
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From md@umner @ending from gm@il@com  Mon Jun 18 12:26:44 2018
From: md@umner @ending from gm@il@com (Michael Sumner)
Date: Mon, 18 Jun 2018 17:26:44 +0700
Subject: [R-sig-Geo] What is the Coordinate Reference System?
In-Reply-To: <414e8405-4b05-7ad0-4871-b39860731d96@uni-muenster.de>
References: <CABsRJgZqD5PzE9KMfhOwTQ0+27V=ypd1C0E-9Pq6tz995F9_KA@mail.gmail.com>
 <CAAcGz9_2Uc1g_02yXWqOfgvMDqRMkqgkqhGvBgXmYwu=MGg5eA@mail.gmail.com>
 <E77ED889-A37E-44E1-A4E6-B4B064ABD621@bigelow.org>
 <414e8405-4b05-7ad0-4871-b39860731d96@uni-muenster.de>
Message-ID: <CAAcGz9_aeFxv1q28rcXTD60qYcBBOLP52Z6pMJFsvrTmUnvPVg@mail.gmail.com>

Agree with Edzer this application of eqc is anomalous and after it confused
us initially we now ignore it and apply the unproblematic proj=longlat
interpretation to these products (after checking).

I might explore the L3 products to find out why this occurred, but the
ocean colour forum is the usual place to find discussion.

Cheers, Mike

On Mon, 18 Jun 2018, 15:59 Edzer Pebesma, <edzer.pebesma at uni-muenster.de>
wrote:

> Plate carree is essentially a linear mapping of long and lat to x and y,
> without changing aspect ratio (scale factor 1 at equator).
>
> projecting long/lat towards plate caree using the proj4 string you
> mention will however change the units from degrees to m. So while the
> plots of of data in linear long/lat (with aspect ration 1) looks
> identical to the one obtained in plate caree (with aspect ratio 1), the
> numerical values along their axes are very different.
>
> Many netcdf files carry a grid (raster) with the x and y coordinates of
> grid cells (centers?) in another coordinate system, but the ones you
> mention below don't, as far as I can tell. I think what they mean by
> mentioning plate carree is just saying that this is a regular long/lat
> degree grid; rather unlucky wording IMO.
>
> On 06/15/2018 08:14 PM, Ben Tupper wrote:
> > Hi,
> >
> > That's an interesting approach.
> >
> > On the other hand, sometimes I get bitten (well, muddled really) when I
> use raster to determine the crs of a ncdf resource.  It all sort of depends.
> >
> > Below is an example for Aqua MODIS imagery from OBPG (
> https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/
> <https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/>).
> The OBPG docs (https://oceancolor.gsfc.nasa.gov/products/ <
> https://oceancolor.gsfc.nasa.gov/products/>) state that the data is
> served up as 'Plate Carr?e' which I think has a crs ...
> >
> > '+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84
> +datum=WGS84 +units=m +no_defs '
> >
> > ... as described here http://spatialreference.org/ref/epsg/32662/ <
> http://spatialreference.org/ref/epsg/32662/>
> >
> > You can see below that raster comes up with...
> >
> > '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0'
> >
> > ... which is http://spatialreference.org/ref/epsg/4326/ <
> http://spatialreference.org/ref/epsg/4326/>
> >
> > Explicitly setting the crs while reading doesn't help.  I have never
> resolved if it is an OBPG documentation bug, my confusion about
> projections, or some other mystery.  So, my usual practice is to assume
> that raster makes the right call.
> >
> > #### start
> >
> > library(raster)
> > URI = '
> https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A2017175.L3m_DAY_SST_sst_9km.nc
> '
> >
> > # ~3.8MB
> > ok = download.file(URI, basename(URI))
> >
> > R = raster::raster(basename(URI), varname = 'sst')
> > R
> > # class       : RasterLayer
> > # dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)
> > # resolution  : 0.08333334, 0.08333334  (x, y)
> > # extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> > # coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> > # data source : /Users/Shared/code/R/others/record/spnc/
> A2017175.L3m_DAY_SST_sst_9km.nc
> > # names       : Sea.Surface.Temperature
> > # zvar        : sst
> >
> > S = raster::raster(basename(URI), varname = "sst", crs = '+proj=eqc
> +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84
> +units=m +no_defs')
> > # Warning message:
> > # In .getProj(prj, crs) :
> > #  argument "crs" ignored because the file provides a crs
> >
> > #### end
> >
> >
> > Cheers,
> > Ben
> >
> >
> >> On Jun 14, 2018, at 6:42 PM, Michael Sumner <mdsumner at gmail.com> wrote:
> >>
> >> Try raster::projection(raster::raster(a)) first, then delve if necessary
> >> into the ncdump summary with print(raster::raster(a)))
> >>
> >> But, raster(a) may be enough here? To get that stuff more directly from
> the
> >> NetCDF API you have to use the inq and att functions of ncdf4 or RNetCDF
> >> and that's no fun.
> >>
> >> I'd also try raster(rgdal::readGDAL(a)) which is a totally different but
> >> equivalent read path.
> >>
> >> Cheers, Mike
> >>
> >> On Thu, 14 Jun 2018, 11:03 Sergio Ibarra, <zergioibarra at gmail.com>
> wrote:
> >>
> >>> Greetings,
> >>>
> >>> I'm want to read NetCDF spatial data from a meteorological model (WRF
> >>> model). The NetCDF can have one of these three projections:
> >>>
> >>> Polar stereographic
> >>> Lambert conformal
> >>> Mercator projection
> >>>
> >>> (See figure
> >>>
> >>>
> https://user-images.githubusercontent.com/27447280/41389756-ed23f91a-6f68-11e8-961e-6ba901913c54.png
> >>> )
> >>>
> >>> What is the  Coordinate Reference System for each case?
> >>>
> >>> Thanks!
> >>>
> >>> Here an example with ncdf4 and raster:
> >>>
> >>> library(ncdf4)
> >>> library(raster)
> >>> a <- tempfile()
> >>> download.file(url = "
> >>>
> http://www.unidata.ucar.edu/software/netcdf/examples/wrfout_v2_Lambert.nc
> >>> ",
> >>>              destfile = a) #78 Mb
> >>> wrf <- nc_open(a)
> >>> paste("The file has",wrf$nvars,"variables")
> >>> paste("The file has",names(wrf$var))
> >>> lat <- ncvar_get( wrf, "XLAT" )
> >>> lon <- ncvar_get( wrf, "XLONG" )
> >>> t2 <- ncvar_get( wrf, "T2" ) - 273.15
> >>> dim(t2) #73 60 13
> >>> #image
> >>> image(t2[, , 12])
> >>> # raster
> >>> rt2 <- raster(t(t2[1:dim(t2)[1],
> >>>                   dim(t2)[2]:1,
> >>>                   12]),
> >>>              xmn = min(lon),
> >>>              xmx = max(lon),
> >>>              ymn = min(lat),
> >>>              ymx = max(lat),
> >>> *              crs="+init=epsg:4326") # ???*
> >>> spplot(rt2)
> >>>
> >>>
> >>>
> >>> --
> >>> ?Sergio Ibarra Espinosa
> >>> Post Doc
> >>> PhD in Atmospheric Sciences
> >>> Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
> >>> Universidade de S?o Paulo
> >>> Rua do Mat?o, 1226
> >>> S?o Paulo-SP - Brasil -
> >>> 05508-090
> >>> +55-11-97425-3791
> >>> Skype: sergio_ibarra1
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> _______________________________________________
> >>> R-sig-Geo mailing list
> >>> R-sig-Geo at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>
> >> --
> >> Dr. Michael Sumner
> >> Software and Database Engineer
> >> Australian Antarctic Division
> >> 203 Channel Highway
> >> Kingston Tasmania 7050 Australia
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>
> >
> > Ben Tupper
> > Bigelow Laboratory for Ocean Sciences
> > 60 Bigelow Drive, P.O. Box 380
> > East Boothbay, Maine 04544
> > http://www.bigelow.org
> >
> > Ecological Forecasting: https://eco.bigelow.org/
> >
> >
> >
> >
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Edzer Pebesma
> Institute for Geoinformatics
> Heisenbergstrasse 2, 48151 Muenster, Germany
> Phone: +49 251 8333081
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From btupper @ending from bigelow@org  Mon Jun 18 15:22:10 2018
From: btupper @ending from bigelow@org (Ben Tupper)
Date: Mon, 18 Jun 2018 09:22:10 -0400
Subject: [R-sig-Geo] What is the Coordinate Reference System?
In-Reply-To: <CAAcGz9_aeFxv1q28rcXTD60qYcBBOLP52Z6pMJFsvrTmUnvPVg@mail.gmail.com>
References: <CABsRJgZqD5PzE9KMfhOwTQ0+27V=ypd1C0E-9Pq6tz995F9_KA@mail.gmail.com>
 <CAAcGz9_2Uc1g_02yXWqOfgvMDqRMkqgkqhGvBgXmYwu=MGg5eA@mail.gmail.com>
 <E77ED889-A37E-44E1-A4E6-B4B064ABD621@bigelow.org>
 <414e8405-4b05-7ad0-4871-b39860731d96@uni-muenster.de>
 <CAAcGz9_aeFxv1q28rcXTD60qYcBBOLP52Z6pMJFsvrTmUnvPVg@mail.gmail.com>
Message-ID: <CD6B8E7C-2C50-427C-AF75-41D4BFFB2794@bigelow.org>

Hi,

I will blissfully proceed as I have in the past.   Thanks to each of you for the clear explanations.  

Cheers,
Ben

> On Jun 18, 2018, at 6:26 AM, Michael Sumner <mdsumner at gmail.com> wrote:
> 
> Agree with Edzer this application of eqc is anomalous and after it confused
> us initially we now ignore it and apply the unproblematic proj=longlat
> interpretation to these products (after checking).
> 
> I might explore the L3 products to find out why this occurred, but the
> ocean colour forum is the usual place to find discussion.
> 
> Cheers, Mike
> 
> On Mon, 18 Jun 2018, 15:59 Edzer Pebesma, <edzer.pebesma at uni-muenster.de>
> wrote:
> 
>> Plate carree is essentially a linear mapping of long and lat to x and y,
>> without changing aspect ratio (scale factor 1 at equator).
>> 
>> projecting long/lat towards plate caree using the proj4 string you
>> mention will however change the units from degrees to m. So while the
>> plots of of data in linear long/lat (with aspect ration 1) looks
>> identical to the one obtained in plate caree (with aspect ratio 1), the
>> numerical values along their axes are very different.
>> 
>> Many netcdf files carry a grid (raster) with the x and y coordinates of
>> grid cells (centers?) in another coordinate system, but the ones you
>> mention below don't, as far as I can tell. I think what they mean by
>> mentioning plate carree is just saying that this is a regular long/lat
>> degree grid; rather unlucky wording IMO.
>> 
>> On 06/15/2018 08:14 PM, Ben Tupper wrote:
>>> Hi,
>>> 
>>> That's an interesting approach.
>>> 
>>> On the other hand, sometimes I get bitten (well, muddled really) when I
>> use raster to determine the crs of a ncdf resource.  It all sort of depends.
>>> 
>>> Below is an example for Aqua MODIS imagery from OBPG (
>> https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/
>> <https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/>).
>> The OBPG docs (https://oceancolor.gsfc.nasa.gov/products/ <
>> https://oceancolor.gsfc.nasa.gov/products/>) state that the data is
>> served up as 'Plate Carr?e' which I think has a crs ...
>>> 
>>> '+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84
>> +datum=WGS84 +units=m +no_defs '
>>> 
>>> ... as described here http://spatialreference.org/ref/epsg/32662/ <
>> http://spatialreference.org/ref/epsg/32662/>
>>> 
>>> You can see below that raster comes up with...
>>> 
>>> '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0'
>>> 
>>> ... which is http://spatialreference.org/ref/epsg/4326/ <
>> http://spatialreference.org/ref/epsg/4326/>
>>> 
>>> Explicitly setting the crs while reading doesn't help.  I have never
>> resolved if it is an OBPG documentation bug, my confusion about
>> projections, or some other mystery.  So, my usual practice is to assume
>> that raster makes the right call.
>>> 
>>> #### start
>>> 
>>> library(raster)
>>> URI = '
>> https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A2017175.L3m_DAY_SST_sst_9km.nc
>> '
>>> 
>>> # ~3.8MB
>>> ok = download.file(URI, basename(URI))
>>> 
>>> R = raster::raster(basename(URI), varname = 'sst')
>>> R
>>> # class       : RasterLayer
>>> # dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)
>>> # resolution  : 0.08333334, 0.08333334  (x, y)
>>> # extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
>>> # coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>>> # data source : /Users/Shared/code/R/others/record/spnc/
>> A2017175.L3m_DAY_SST_sst_9km.nc
>>> # names       : Sea.Surface.Temperature
>>> # zvar        : sst
>>> 
>>> S = raster::raster(basename(URI), varname = "sst", crs = '+proj=eqc
>> +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84
>> +units=m +no_defs')
>>> # Warning message:
>>> # In .getProj(prj, crs) :
>>> #  argument "crs" ignored because the file provides a crs
>>> 
>>> #### end
>>> 
>>> 
>>> Cheers,
>>> Ben
>>> 
>>> 
>>>> On Jun 14, 2018, at 6:42 PM, Michael Sumner <mdsumner at gmail.com> wrote:
>>>> 
>>>> Try raster::projection(raster::raster(a)) first, then delve if necessary
>>>> into the ncdump summary with print(raster::raster(a)))
>>>> 
>>>> But, raster(a) may be enough here? To get that stuff more directly from
>> the
>>>> NetCDF API you have to use the inq and att functions of ncdf4 or RNetCDF
>>>> and that's no fun.
>>>> 
>>>> I'd also try raster(rgdal::readGDAL(a)) which is a totally different but
>>>> equivalent read path.
>>>> 
>>>> Cheers, Mike
>>>> 
>>>> On Thu, 14 Jun 2018, 11:03 Sergio Ibarra, <zergioibarra at gmail.com>
>> wrote:
>>>> 
>>>>> Greetings,
>>>>> 
>>>>> I'm want to read NetCDF spatial data from a meteorological model (WRF
>>>>> model). The NetCDF can have one of these three projections:
>>>>> 
>>>>> Polar stereographic
>>>>> Lambert conformal
>>>>> Mercator projection
>>>>> 
>>>>> (See figure
>>>>> 
>>>>> 
>> https://user-images.githubusercontent.com/27447280/41389756-ed23f91a-6f68-11e8-961e-6ba901913c54.png
>>>>> )
>>>>> 
>>>>> What is the  Coordinate Reference System for each case?
>>>>> 
>>>>> Thanks!
>>>>> 
>>>>> Here an example with ncdf4 and raster:
>>>>> 
>>>>> library(ncdf4)
>>>>> library(raster)
>>>>> a <- tempfile()
>>>>> download.file(url = "
>>>>> 
>> http://www.unidata.ucar.edu/software/netcdf/examples/wrfout_v2_Lambert.nc
>>>>> ",
>>>>>             destfile = a) #78 Mb
>>>>> wrf <- nc_open(a)
>>>>> paste("The file has",wrf$nvars,"variables")
>>>>> paste("The file has",names(wrf$var))
>>>>> lat <- ncvar_get( wrf, "XLAT" )
>>>>> lon <- ncvar_get( wrf, "XLONG" )
>>>>> t2 <- ncvar_get( wrf, "T2" ) - 273.15
>>>>> dim(t2) #73 60 13
>>>>> #image
>>>>> image(t2[, , 12])
>>>>> # raster
>>>>> rt2 <- raster(t(t2[1:dim(t2)[1],
>>>>>                  dim(t2)[2]:1,
>>>>>                  12]),
>>>>>             xmn = min(lon),
>>>>>             xmx = max(lon),
>>>>>             ymn = min(lat),
>>>>>             ymx = max(lat),
>>>>> *              crs="+init=epsg:4326") # ???*
>>>>> spplot(rt2)
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> ?Sergio Ibarra Espinosa
>>>>> Post Doc
>>>>> PhD in Atmospheric Sciences
>>>>> Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
>>>>> Universidade de S?o Paulo
>>>>> Rua do Mat?o, 1226
>>>>> S?o Paulo-SP - Brasil -
>>>>> 05508-090
>>>>> +55-11-97425-3791
>>>>> Skype: sergio_ibarra1
>>>>> 
>>>>>       [[alternative HTML version deleted]]
>>>>> 
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> R-sig-Geo at r-project.org
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>> 
>>>> --
>>>> Dr. Michael Sumner
>>>> Software and Database Engineer
>>>> Australian Antarctic Division
>>>> 203 Channel Highway
>>>> Kingston Tasmania 7050 Australia
>>>> 
>>>>     [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>> 
>>> 
>>> Ben Tupper
>>> Bigelow Laboratory for Ocean Sciences
>>> 60 Bigelow Drive, P.O. Box 380
>>> East Boothbay, Maine 04544
>>> http://www.bigelow.org
>>> 
>>> Ecological Forecasting: https://eco.bigelow.org/
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>>      [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>> 
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics
>> Heisenbergstrasse 2, 48151 Muenster, Germany
>> Phone: +49 251 8333081
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
> -- 
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecological Forecasting: https://eco.bigelow.org/






	[[alternative HTML version deleted]]


From zergioib@rr@ @ending from gm@il@com  Mon Jun 18 15:49:08 2018
From: zergioib@rr@ @ending from gm@il@com (Sergio Ibarra)
Date: Mon, 18 Jun 2018 10:49:08 -0300
Subject: [R-sig-Geo] What is the Coordinate Reference System?
In-Reply-To: <CD6B8E7C-2C50-427C-AF75-41D4BFFB2794@bigelow.org>
References: <CABsRJgZqD5PzE9KMfhOwTQ0+27V=ypd1C0E-9Pq6tz995F9_KA@mail.gmail.com>
 <CAAcGz9_2Uc1g_02yXWqOfgvMDqRMkqgkqhGvBgXmYwu=MGg5eA@mail.gmail.com>
 <E77ED889-A37E-44E1-A4E6-B4B064ABD621@bigelow.org>
 <414e8405-4b05-7ad0-4871-b39860731d96@uni-muenster.de>
 <CAAcGz9_aeFxv1q28rcXTD60qYcBBOLP52Z6pMJFsvrTmUnvPVg@mail.gmail.com>
 <CD6B8E7C-2C50-427C-AF75-41D4BFFB2794@bigelow.org>
Message-ID: <CABsRJgaQzZ0wX7cn-=Cjgy1BLs9bopW6Wr3bd76PZLaOp1+F2Q@mail.gmail.com>

Yes, thanks for the explanations.


Have a nice week! :)

Em seg, 18 de jun de 2018 ?s 10:29, Ben Tupper <btupper at bigelow.org>
escreveu:

> Hi,
>
> I will blissfully proceed as I have in the past.   Thanks to each of you
> for the clear explanations.
>
> Cheers,
> Ben
>
> > On Jun 18, 2018, at 6:26 AM, Michael Sumner <mdsumner at gmail.com> wrote:
> >
> > Agree with Edzer this application of eqc is anomalous and after it
> confused
> > us initially we now ignore it and apply the unproblematic proj=longlat
> > interpretation to these products (after checking).
> >
> > I might explore the L3 products to find out why this occurred, but the
> > ocean colour forum is the usual place to find discussion.
> >
> > Cheers, Mike
> >
> > On Mon, 18 Jun 2018, 15:59 Edzer Pebesma, <edzer.pebesma at uni-muenster.de
> >
> > wrote:
> >
> >> Plate carree is essentially a linear mapping of long and lat to x and y,
> >> without changing aspect ratio (scale factor 1 at equator).
> >>
> >> projecting long/lat towards plate caree using the proj4 string you
> >> mention will however change the units from degrees to m. So while the
> >> plots of of data in linear long/lat (with aspect ration 1) looks
> >> identical to the one obtained in plate caree (with aspect ratio 1), the
> >> numerical values along their axes are very different.
> >>
> >> Many netcdf files carry a grid (raster) with the x and y coordinates of
> >> grid cells (centers?) in another coordinate system, but the ones you
> >> mention below don't, as far as I can tell. I think what they mean by
> >> mentioning plate carree is just saying that this is a regular long/lat
> >> degree grid; rather unlucky wording IMO.
> >>
> >> On 06/15/2018 08:14 PM, Ben Tupper wrote:
> >>> Hi,
> >>>
> >>> That's an interesting approach.
> >>>
> >>> On the other hand, sometimes I get bitten (well, muddled really) when I
> >> use raster to determine the crs of a ncdf resource.  It all sort of
> depends.
> >>>
> >>> Below is an example for Aqua MODIS imagery from OBPG (
> >>
> https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/
> >> <
> https://oceandata.sci.gsfc.nasa.gov/MODIS-Aqua/Mapped/Daily/9km/sst/2017/
> >).
> >> The OBPG docs (https://oceancolor.gsfc.nasa.gov/products/ <
> >> https://oceancolor.gsfc.nasa.gov/products/>) state that the data is
> >> served up as 'Plate Carr?e' which I think has a crs ...
> >>>
> >>> '+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84
> >> +datum=WGS84 +units=m +no_defs '
> >>>
> >>> ... as described here http://spatialreference.org/ref/epsg/32662/ <
> >> http://spatialreference.org/ref/epsg/32662/>
> >>>
> >>> You can see below that raster comes up with...
> >>>
> >>> '+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0'
> >>>
> >>> ... which is http://spatialreference.org/ref/epsg/4326/ <
> >> http://spatialreference.org/ref/epsg/4326/>
> >>>
> >>> Explicitly setting the crs while reading doesn't help.  I have never
> >> resolved if it is an OBPG documentation bug, my confusion about
> >> projections, or some other mystery.  So, my usual practice is to assume
> >> that raster makes the right call.
> >>>
> >>> #### start
> >>>
> >>> library(raster)
> >>> URI = '
> >>
> https://oceandata.sci.gsfc.nasa.gov/cgi/getfile/A2017175.L3m_DAY_SST_sst_9km.nc
> >> '
> >>>
> >>> # ~3.8MB
> >>> ok = download.file(URI, basename(URI))
> >>>
> >>> R = raster::raster(basename(URI), varname = 'sst')
> >>> R
> >>> # class       : RasterLayer
> >>> # dimensions  : 2160, 4320, 9331200  (nrow, ncol, ncell)
> >>> # resolution  : 0.08333334, 0.08333334  (x, y)
> >>> # extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
> >>> # coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> >>> # data source : /Users/Shared/code/R/others/record/spnc/
> >> A2017175.L3m_DAY_SST_sst_9km.nc
> >>> # names       : Sea.Surface.Temperature
> >>> # zvar        : sst
> >>>
> >>> S = raster::raster(basename(URI), varname = "sst", crs = '+proj=eqc
> >> +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84
> >> +units=m +no_defs')
> >>> # Warning message:
> >>> # In .getProj(prj, crs) :
> >>> #  argument "crs" ignored because the file provides a crs
> >>>
> >>> #### end
> >>>
> >>>
> >>> Cheers,
> >>> Ben
> >>>
> >>>
> >>>> On Jun 14, 2018, at 6:42 PM, Michael Sumner <mdsumner at gmail.com>
> wrote:
> >>>>
> >>>> Try raster::projection(raster::raster(a)) first, then delve if
> necessary
> >>>> into the ncdump summary with print(raster::raster(a)))
> >>>>
> >>>> But, raster(a) may be enough here? To get that stuff more directly
> from
> >> the
> >>>> NetCDF API you have to use the inq and att functions of ncdf4 or
> RNetCDF
> >>>> and that's no fun.
> >>>>
> >>>> I'd also try raster(rgdal::readGDAL(a)) which is a totally different
> but
> >>>> equivalent read path.
> >>>>
> >>>> Cheers, Mike
> >>>>
> >>>> On Thu, 14 Jun 2018, 11:03 Sergio Ibarra, <zergioibarra at gmail.com>
> >> wrote:
> >>>>
> >>>>> Greetings,
> >>>>>
> >>>>> I'm want to read NetCDF spatial data from a meteorological model (WRF
> >>>>> model). The NetCDF can have one of these three projections:
> >>>>>
> >>>>> Polar stereographic
> >>>>> Lambert conformal
> >>>>> Mercator projection
> >>>>>
> >>>>> (See figure
> >>>>>
> >>>>>
> >>
> https://user-images.githubusercontent.com/27447280/41389756-ed23f91a-6f68-11e8-961e-6ba901913c54.png
> >>>>> )
> >>>>>
> >>>>> What is the  Coordinate Reference System for each case?
> >>>>>
> >>>>> Thanks!
> >>>>>
> >>>>> Here an example with ncdf4 and raster:
> >>>>>
> >>>>> library(ncdf4)
> >>>>> library(raster)
> >>>>> a <- tempfile()
> >>>>> download.file(url = "
> >>>>>
> >>
> http://www.unidata.ucar.edu/software/netcdf/examples/wrfout_v2_Lambert.nc
> >>>>> ",
> >>>>>             destfile = a) #78 Mb
> >>>>> wrf <- nc_open(a)
> >>>>> paste("The file has",wrf$nvars,"variables")
> >>>>> paste("The file has",names(wrf$var))
> >>>>> lat <- ncvar_get( wrf, "XLAT" )
> >>>>> lon <- ncvar_get( wrf, "XLONG" )
> >>>>> t2 <- ncvar_get( wrf, "T2" ) - 273.15
> >>>>> dim(t2) #73 60 13
> >>>>> #image
> >>>>> image(t2[, , 12])
> >>>>> # raster
> >>>>> rt2 <- raster(t(t2[1:dim(t2)[1],
> >>>>>                  dim(t2)[2]:1,
> >>>>>                  12]),
> >>>>>             xmn = min(lon),
> >>>>>             xmx = max(lon),
> >>>>>             ymn = min(lat),
> >>>>>             ymx = max(lat),
> >>>>> *              crs="+init=epsg:4326") # ???*
> >>>>> spplot(rt2)
> >>>>>
> >>>>>
> >>>>>
> >>>>> --
> >>>>> ?Sergio Ibarra Espinosa
> >>>>> Post Doc
> >>>>> PhD in Atmospheric Sciences
> >>>>> Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
> >>>>> Universidade de S?o Paulo
> >>>>> Rua do Mat?o, 1226
> >>>>> S?o Paulo-SP - Brasil -
> >>>>> 05508-090
> >>>>> +55-11-97425-3791 <(11)%2097425-3791>
> >>>>> Skype: sergio_ibarra1
> >>>>>
> >>>>>       [[alternative HTML version deleted]]
> >>>>>
> >>>>> _______________________________________________
> >>>>> R-sig-Geo mailing list
> >>>>> R-sig-Geo at r-project.org
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>>>
> >>>> --
> >>>> Dr. Michael Sumner
> >>>> Software and Database Engineer
> >>>> Australian Antarctic Division
> >>>> 203 Channel Highway
> >>>> Kingston Tasmania 7050 Australia
> >>>>
> >>>>     [[alternative HTML version deleted]]
> >>>>
> >>>> _______________________________________________
> >>>> R-sig-Geo mailing list
> >>>> R-sig-Geo at r-project.org
> >>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>>
> >>>
> >>> Ben Tupper
> >>> Bigelow Laboratory for Ocean Scien
> <https://maps.google.com/?q=for+Ocean+Scien&entry=gmail&source=g>ces
> >>> 60 Bigelow Drive, P.O. Box 380
> >>> East Boothbay, Maine 04544
> >>> http://www.bigelow.org
> >>>
> >>> Ecological Forecasting: https://eco.bigelow.org/
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>      [[alternative HTML version deleted]]
> >>>
> >>> _______________________________________________
> >>> R-sig-Geo mailing list
> >>> R-sig-Geo at r-project.org
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>>
> >>
> >> --
> >> Edzer Pebesma
> >> Institute for Geoinformatics
> >> Heisenbergstrasse 2, 48151 Muenster, Germany
> >> Phone: +49 251 8333081 <+49%20251%208333081>
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >>
> > --
> > Dr. Michael Sumner
> > Software and Database Engineer
> > Australian Antarctic Division
> > 203 Channel Highway
> > Kingston Tasmania 7050 Australia
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> Ben Tupper
> Bigelow Laboratory for Ocean Sciences
> 60 Bigelow Drive, P.O. Box 380
> East Boothbay, Maine 04544
> http://www.bigelow.org
>
> Ecological Forecasting: https://eco.bigelow.org/
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
?Sergio Ibarra Espinosa
Post Doc
PhD in Atmospheric Sciences
Instituto de Astronomia, Geof?sica e Ci?ncias Atmosf?ricas
Universidade de S?o Paulo
Rua do Mat?o, 1226
S?o Paulo-SP - Brasil -
05508-090
+55-11-97425-3791
Skype: sergio_ibarra1

	[[alternative HTML version deleted]]


From m@cqueen1 @ending from llnl@gov  Mon Jun 18 21:39:41 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Mon, 18 Jun 2018 19:39:41 +0000
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
Message-ID: <CEB0CBC4-797F-4F15-8905-E6D2B0F81CE7@llnl.gov>

Success!

This morning I upgraded a Mac to OS 10.13.5 (the so-called High Sierra version), then

 - Installed R 3.5.0 from CRAN (installed ever 3.3.x)
 - Installed sp 1.3-1, rgdal 1.3-2, rgeos 0.3-28, also sf 0.6-3, from the CRAN binaries that are now available
 - Ran my personal test suite, which exercises the kinds of tasks I perform with those packages

All tests succeeded.

I forgot to control the order of installation, so I don't know if I installed sp first, as advised. But I expect that with the binary versions it doesn't matter.

(I don't think it matters for the above, but I also installed the clang and gfortran version provided on CRAN's Mac "tools" page, and successfully compiled some source packages that require fortran, and others that require C).

Thank again for all your work
-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 6/8/18, 11:15 AM, "R-sig-Geo on behalf of Roger Bivand" <r-sig-geo-bounces at r-project.org on behalf of Roger.Bivand at nhh.no> wrote:

    There are new releases of sp, rgdal and rgeos on CRAN. Please install sp 
    first, then the other two, which link to the installed sp. They all 
    address so-called rchk issues, which have not so far been a problem, but 
    might have become more fragile as R's internal memory management is made 
    even more efficient. This involves compiled code using memory allocated by 
    R to be freed by R's garbage collector, which has to know if an object is 
    still being used. Tomas Kalibera, the author of rchk, helped resolve and 
    explain the issues encountered - what was good coding practice fifteen 
    years ago isn't always still good practice.
    
    In addition, the earliest versions of GDAL and PROJ with which rgdal will 
    work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current 
    released versions of PROJ and GDAL are to be prefered, as bugs have been 
    fixed and new features and drivers introduced. A check has been put 
    in place to trap attempts to install rgdal without a C++11-capable 
    compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is 
    ready for the forthcoming version of GEOS.
    
    The CRAN team has also been very supportive of our efforts to bring 
    compiled code in these packages into rchk compliance.
    
    Please get in touch if you see any loose ends in these releases.
    
    Roger
    
    -- 
    Roger Bivand
    Department of Economics, Norwegian School of Economics,
    Helleveien 30, N-5045 Bergen, Norway.
    voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
    http://orcid.org/0000-0003-2392-6140
    https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
    
    _______________________________________________
    R-sig-Geo mailing list
    R-sig-Geo at r-project.org
    https://stat.ethz.ch/mailman/listinfo/r-sig-geo
    


From Roger@Biv@nd @ending from nhh@no  Tue Jun 19 08:47:32 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Tue, 19 Jun 2018 08:47:32 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <CEB0CBC4-797F-4F15-8905-E6D2B0F81CE7@llnl.gov>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <CEB0CBC4-797F-4F15-8905-E6D2B0F81CE7@llnl.gov>
Message-ID: <alpine.LFD.2.21.1806190838300.13261@reclus.nhh.no>

On Mon, 18 Jun 2018, MacQueen, Don wrote:

> Success!
>
> This morning I upgraded a Mac to OS 10.13.5 (the so-called High Sierra 
> version), then
>
> - Installed R 3.5.0 from CRAN (installed ever 3.3.x)
> - Installed sp 1.3-1, rgdal 1.3-2, rgeos 0.3-28, also sf 0.6-3, from the
>   CRAN binaries that are now available
> - Ran my personal test suite, which exercises the kinds of tasks I
>   perform with those packages
>
> All tests succeeded.

Thanks for reporting - especially on your own test suite. We do what we 
can to cover typical use cases, but independent testing in production 
settings is reassuring for everybody. We're expecting more PROJ-based 
changes later this year and next year, so it is great to have external 
test sets to be able to check where any changes in output are coming from.

This is an encouragement to other users whose production depends on R 
packages using GDAL, PROJ and/or GEOS to follow this example and keep a 
script handy to test your use cases, and a history of output files with 
which to compare (diff). We don't worry about changes in the EPSG 
versions, but by next year they may be properly anchored too (changes in 
PROJ may include reference system definitions with timestamps).

>
> I forgot to control the order of installation, so I don't know if I 
> installed sp first, as advised. But I expect that with the binary 
> versions it doesn't matter.

Right, the binary builds use the sp version on the build platform.

Best wishes,

Roger

>
> (I don't think it matters for the above, but I also installed the clang 
> and gfortran version provided on CRAN's Mac "tools" page, and 
> successfully compiled some source packages that require fortran, and 
> others that require C).
>
> Thank again for all your work
> -Don
>
> --
> Don MacQueen
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> Lab cell 925-724-7509
>
>
>
> ?On 6/8/18, 11:15 AM, "R-sig-Geo on behalf of Roger Bivand" <r-sig-geo-bounces at r-project.org on behalf of Roger.Bivand at nhh.no> wrote:
>
>    There are new releases of sp, rgdal and rgeos on CRAN. Please install sp
>    first, then the other two, which link to the installed sp. They all
>    address so-called rchk issues, which have not so far been a problem, but
>    might have become more fragile as R's internal memory management is made
>    even more efficient. This involves compiled code using memory allocated by
>    R to be freed by R's garbage collector, which has to know if an object is
>    still being used. Tomas Kalibera, the author of rchk, helped resolve and
>    explain the issues encountered - what was good coding practice fifteen
>    years ago isn't always still good practice.
>
>    In addition, the earliest versions of GDAL and PROJ with which rgdal will
>    work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The current
>    released versions of PROJ and GDAL are to be prefered, as bugs have been
>    fixed and new features and drivers introduced. A check has been put
>    in place to trap attempts to install rgdal without a C++11-capable
>    compiler when the GDAL version is >=2.3.0 - which requires C++11. rgeos is
>    ready for the forthcoming version of GEOS.
>
>    The CRAN team has also been very supportive of our efforts to bring
>    compiled code in these packages into rchk compliance.
>
>    Please get in touch if you see any loose ends in these releases.
>
>    Roger
>
>    --
>    Roger Bivand
>    Department of Economics, Norwegian School of Economics,
>    Helleveien 30, N-5045 Bergen, Norway.
>    voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>    http://orcid.org/0000-0003-2392-6140
>    https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
>    _______________________________________________
>    R-sig-Geo mailing list
>    R-sig-Geo at r-project.org
>    https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From tom@hengl @ending from gm@il@com  Tue Jun 19 09:55:22 2018
From: tom@hengl @ending from gm@il@com (Tomislav Hengl)
Date: Tue, 19 Jun 2018 09:55:22 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806190838300.13261@reclus.nhh.no>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <CEB0CBC4-797F-4F15-8905-E6D2B0F81CE7@llnl.gov>
 <alpine.LFD.2.21.1806190838300.13261@reclus.nhh.no>
Message-ID: <d735788c-71df-a0ad-ab87-f06d79782e6b@gmail.com>

Two weeks ago I installed new GDAL 2.3.* from source, then tried 
installing rgdal and got the error about GDAL requires C++11. Then I had 
to remove everything and reinstall GDAL 2.2. Would love to be able to 
start using the newest GDAL inside R as it seems that many things have 
been improved 
(https://trac.osgeo.org/gdal/query?group=status&milestone=2.3.0). 
Installing GDAL from source takes >20mins so next time I would like to 
be sure that I will not have to remove GDAL.

Can somebody point to a step-by-step guide to install GDAL 2.3.* and 
rgdal on ubuntu (now that all packages have been updated)?

Much appreciated!

My session info:

 > library(rgdal)
Loading required package: sp
rgdal: version: 1.2-20, (SVN revision 725)
 ?Geospatial Data Abstraction Library extensions to R successfully loaded
 ?Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15
 ?Path to GDAL shared files: /usr/share/gdal/2.2
 ?GDAL binary built with GEOS: TRUE
 ?Loaded PROJ.4 runtime: Rel. 4.9.2, 08 September 2015, [PJ_VERSION: 492]
 ?Path to PROJ.4 shared files: (autodetected)
 ?Linking to sp version: 1.2-7
 > sessionInfo()
R version 3.5.0 (2018-04-23)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04.4 LTS

Matrix products: default
BLAS: /opt/microsoft/ropen/3.5.0/lib64/R/lib/libRblas.so
LAPACK: /opt/microsoft/ropen/3.5.0/lib64/R/lib/libRlapack.so



On 19.06.2018 08:47, Roger Bivand wrote:
> On Mon, 18 Jun 2018, MacQueen, Don wrote:
>
>> Success!
>>
>> This morning I upgraded a Mac to OS 10.13.5 (the so-called High 
>> Sierra version), then
>>
>> - Installed R 3.5.0 from CRAN (installed ever 3.3.x)
>> - Installed sp 1.3-1, rgdal 1.3-2, rgeos 0.3-28, also sf 0.6-3, from the
>> ? CRAN binaries that are now available
>> - Ran my personal test suite, which exercises the kinds of tasks I
>> ? perform with those packages
>>
>> All tests succeeded.
>
> Thanks for reporting - especially on your own test suite. We do what 
> we can to cover typical use cases, but independent testing in 
> production settings is reassuring for everybody. We're expecting more 
> PROJ-based changes later this year and next year, so it is great to 
> have external test sets to be able to check where any changes in 
> output are coming from.
>
> This is an encouragement to other users whose production depends on R 
> packages using GDAL, PROJ and/or GEOS to follow this example and keep 
> a script handy to test your use cases, and a history of output files 
> with which to compare (diff). We don't worry about changes in the EPSG 
> versions, but by next year they may be properly anchored too (changes 
> in PROJ may include reference system definitions with timestamps).
>
>>
>> I forgot to control the order of installation, so I don't know if I 
>> installed sp first, as advised. But I expect that with the binary 
>> versions it doesn't matter.
>
> Right, the binary builds use the sp version on the build platform.
>
> Best wishes,
>
> Roger
>
>>
>> (I don't think it matters for the above, but I also installed the 
>> clang and gfortran version provided on CRAN's Mac "tools" page, and 
>> successfully compiled some source packages that require fortran, and 
>> others that require C).
>>
>> Thank again for all your work
>> -Don
>>
>> -- 
>> Don MacQueen
>> Lawrence Livermore National Laboratory
>> 7000 East Ave., L-627
>> Livermore, CA 94550
>> 925-423-1062
>> Lab cell 925-724-7509
>>
>>
>>
>> ?On 6/8/18, 11:15 AM, "R-sig-Geo on behalf of Roger Bivand" 
>> <r-sig-geo-bounces at r-project.org on behalf of Roger.Bivand at nhh.no> 
>> wrote:
>>
>> ?? There are new releases of sp, rgdal and rgeos on CRAN. Please 
>> install sp
>> ?? first, then the other two, which link to the installed sp. They all
>> ?? address so-called rchk issues, which have not so far been a 
>> problem, but
>> ?? might have become more fragile as R's internal memory management 
>> is made
>> ?? even more efficient. This involves compiled code using memory 
>> allocated by
>> ?? R to be freed by R's garbage collector, which has to know if an 
>> object is
>> ?? still being used. Tomas Kalibera, the author of rchk, helped 
>> resolve and
>> ?? explain the issues encountered - what was good coding practice 
>> fifteen
>> ?? years ago isn't always still good practice.
>>
>> ?? In addition, the earliest versions of GDAL and PROJ with which 
>> rgdal will
>> ?? work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The 
>> current
>> ?? released versions of PROJ and GDAL are to be prefered, as bugs 
>> have been
>> ?? fixed and new features and drivers introduced. A check has been put
>> ?? in place to trap attempts to install rgdal without a C++11-capable
>> ?? compiler when the GDAL version is >=2.3.0 - which requires C++11. 
>> rgeos is
>> ?? ready for the forthcoming version of GEOS.
>>
>> ?? The CRAN team has also been very supportive of our efforts to bring
>> ?? compiled code in these packages into rchk compliance.
>>
>> ?? Please get in touch if you see any loose ends in these releases.
>>
>> ?? Roger
>>
>> ?? --
>> ?? Roger Bivand
>> ?? Department of Economics, Norwegian School of Economics,
>> ?? Helleveien 30, N-5045 Bergen, Norway.
>> ?? voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> ?? http://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>> ?? _______________________________________________
>> ?? R-sig-Geo mailing list
>> ?? R-sig-Geo at r-project.org
>> ?? https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Tue Jun 19 10:41:00 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Tue, 19 Jun 2018 10:41:00 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <d735788c-71df-a0ad-ab87-f06d79782e6b@gmail.com>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <CEB0CBC4-797F-4F15-8905-E6D2B0F81CE7@llnl.gov>
 <alpine.LFD.2.21.1806190838300.13261@reclus.nhh.no>
 <d735788c-71df-a0ad-ab87-f06d79782e6b@gmail.com>
Message-ID: <alpine.LFD.2.21.1806191002460.13261@reclus.nhh.no>

On Tue, 19 Jun 2018, Tomislav Hengl wrote:

> Two weeks ago I installed new GDAL 2.3.* from source, then tried
> installing rgdal and got the error about GDAL requires C++11. Then I had
> to remove everything and reinstall GDAL 2.2. Would love to be able to
> start using the newest GDAL inside R as it seems that many things have
> been improved
> (https://trac.osgeo.org/gdal/query?group=status&milestone=2.3.0).
> Installing GDAL from source takes >20mins so next time I would like to
> be sure that I will not have to remove GDAL.
>
> Can somebody point to a step-by-step guide to install GDAL 2.3.* and
> rgdal on ubuntu (now that all packages have been updated)?

Tom:

There is too little information here: which g++ compiler version, was R 
installed from source or not, GDAL was installed from source, but was PROJ 
installed from source (and/or GEOS), ... and no verbatim error message.

Please try development rgdal_1.3-3 from R-forge, which has some logic 
fixes in configure:

install.packages("rgdal", repos="http://R-Forge.R-project.org")

Did you check whether sf installed with GDAL 2.3.0 and PROJ 5.1.0?

It looks as though CRAN devel debian is using GDAL 2.3.0 (the test saved 
output is 2.2.4):

https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/rgdal-00check.html

Hope this helps,

Roger

>
> Much appreciated!
>
> My session info:
>
> > library(rgdal)
> Loading required package: sp
> rgdal: version: 1.2-20, (SVN revision 725)
> ?Geospatial Data Abstraction Library extensions to R successfully loaded
> ?Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15
> ?Path to GDAL shared files: /usr/share/gdal/2.2
> ?GDAL binary built with GEOS: TRUE
> ?Loaded PROJ.4 runtime: Rel. 4.9.2, 08 September 2015, [PJ_VERSION: 492]
> ?Path to PROJ.4 shared files: (autodetected)
> ?Linking to sp version: 1.2-7
> > sessionInfo()
> R version 3.5.0 (2018-04-23)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 16.04.4 LTS
>
> Matrix products: default
> BLAS: /opt/microsoft/ropen/3.5.0/lib64/R/lib/libRblas.so
> LAPACK: /opt/microsoft/ropen/3.5.0/lib64/R/lib/libRlapack.so
>
>
>
> On 19.06.2018 08:47, Roger Bivand wrote:
>> On Mon, 18 Jun 2018, MacQueen, Don wrote:
>>
>>> Success!
>>>
>>> This morning I upgraded a Mac to OS 10.13.5 (the so-called High
>>> Sierra version), then
>>>
>>> - Installed R 3.5.0 from CRAN (installed ever 3.3.x)
>>> - Installed sp 1.3-1, rgdal 1.3-2, rgeos 0.3-28, also sf 0.6-3, from the
>>> ? CRAN binaries that are now available
>>> - Ran my personal test suite, which exercises the kinds of tasks I
>>> ? perform with those packages
>>>
>>> All tests succeeded.
>>
>> Thanks for reporting - especially on your own test suite. We do what
>> we can to cover typical use cases, but independent testing in
>> production settings is reassuring for everybody. We're expecting more
>> PROJ-based changes later this year and next year, so it is great to
>> have external test sets to be able to check where any changes in
>> output are coming from.
>>
>> This is an encouragement to other users whose production depends on R
>> packages using GDAL, PROJ and/or GEOS to follow this example and keep
>> a script handy to test your use cases, and a history of output files
>> with which to compare (diff). We don't worry about changes in the EPSG
>> versions, but by next year they may be properly anchored too (changes
>> in PROJ may include reference system definitions with timestamps).
>>
>>>
>>> I forgot to control the order of installation, so I don't know if I
>>> installed sp first, as advised. But I expect that with the binary
>>> versions it doesn't matter.
>>
>> Right, the binary builds use the sp version on the build platform.
>>
>> Best wishes,
>>
>> Roger
>>
>>>
>>> (I don't think it matters for the above, but I also installed the
>>> clang and gfortran version provided on CRAN's Mac "tools" page, and
>>> successfully compiled some source packages that require fortran, and
>>> others that require C).
>>>
>>> Thank again for all your work
>>> -Don
>>>
>>> --
>>> Don MacQueen
>>> Lawrence Livermore National Laboratory
>>> 7000 East Ave., L-627
>>> Livermore, CA 94550
>>> 925-423-1062
>>> Lab cell 925-724-7509
>>>
>>>
>>>
>>> ?On 6/8/18, 11:15 AM, "R-sig-Geo on behalf of Roger Bivand"
>>> <r-sig-geo-bounces at r-project.org on behalf of Roger.Bivand at nhh.no>
>>> wrote:
>>>
>>> ?? There are new releases of sp, rgdal and rgeos on CRAN. Please
>>> install sp
>>> ?? first, then the other two, which link to the installed sp. They all
>>> ?? address so-called rchk issues, which have not so far been a
>>> problem, but
>>> ?? might have become more fragile as R's internal memory management
>>> is made
>>> ?? even more efficient. This involves compiled code using memory
>>> allocated by
>>> ?? R to be freed by R's garbage collector, which has to know if an
>>> object is
>>> ?? still being used. Tomas Kalibera, the author of rchk, helped
>>> resolve and
>>> ?? explain the issues encountered - what was good coding practice
>>> fifteen
>>> ?? years ago isn't always still good practice.
>>>
>>> ?? In addition, the earliest versions of GDAL and PROJ with which
>>> rgdal will
>>> ?? work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
>>> current
>>> ?? released versions of PROJ and GDAL are to be prefered, as bugs
>>> have been
>>> ?? fixed and new features and drivers introduced. A check has been put
>>> ?? in place to trap attempts to install rgdal without a C++11-capable
>>> ?? compiler when the GDAL version is >=2.3.0 - which requires C++11.
>>> rgeos is
>>> ?? ready for the forthcoming version of GEOS.
>>>
>>> ?? The CRAN team has also been very supportive of our efforts to bring
>>> ?? compiled code in these packages into rchk compliance.
>>>
>>> ?? Please get in touch if you see any loose ends in these releases.
>>>
>>> ?? Roger
>>>
>>> ?? --
>>> ?? Roger Bivand
>>> ?? Department of Economics, Norwegian School of Economics,
>>> ?? Helleveien 30, N-5045 Bergen, Norway.
>>> ?? voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>> ?? http://orcid.org/0000-0003-2392-6140
>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>
>>> ?? _______________________________________________
>>> ?? R-sig-Geo mailing list
>>> ?? R-sig-Geo at r-project.org
>>> ?? https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From trichter @ending from uni-bremen@de  Tue Jun 19 15:38:50 2018
From: trichter @ending from uni-bremen@de (Tim Richter-Heitmann)
Date: Tue, 19 Jun 2018 15:38:50 +0200
Subject: [R-sig-Geo] adonis2 in vegan (distance or abundance matrix)
Message-ID: <5caed4dc-55a7-324d-7883-f02f36506f2e@uni-bremen.de>

Der list,

i have came across this interesting feature of vegan's adonis2.

The example in ?adonis2 shows that adonis2takes an abundance matrix, and 
converts it to a distance matrix, as given in "method":

library(vegan)
data(dune)
data(dune.env)

ad1 <- adonis2(dune ~ Management*A1, data = dune.env, method="bray")

Permutation test for adonis under reduced model Terms added sequentially 
(first to last) Permutation: free Number of permutations: 999 
adonis2(formula = dune ~ Management * A1, data = dune.env, method = 
"bray") Df SumOfSqs R2 F Pr(>F) Management 3 1.4686 0.34161 3.2629 0.003 
** A1 1 0.4409 0.10256 2.9387 0.022 * Management:A1 3 0.5892 0.13705 
1.3090 0.228 Residual 12 1.8004 0.41878 Total 19 4.2990 1.00000 --- 
Signif. codes: 0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

However, it can also handle the direct input of the distance matrix:
dune.dist <- vegdist(dune, method="bray")
ad2 <- adonis2(dune.dist~Management*A1, data = dune.env, method="bray")

Permutation test for adonis under reduced model Terms added sequentially 
(first to last) Permutation: free Number of permutations: 999 
adonis2(formula = dune.dist ~ Management * A1, data = dune.env, method = 
"bray") Df SumOfSqs R2 F Pr(>F) Management 3 1.4686 0.34161 3.2629 0.001 
*** A1 1 0.4409 0.10256 2.9387 0.009 ** Management:A1 3 0.5892 0.13705 
1.3090 0.213 Residual 12 1.8004 0.41878 Total 19 4.2990 1.00000 --- 
Signif. codes: 0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

Apparently, method="bray" is ignored. Here i thought, because dune.dist 
is a already dist-class object, adonis2 abandons the step of creating a 
distance matrix. However, if i convert the dist-object into a dataframe, 
the output is still the same!

dune.df <- as.data.frame(as.matrix(vegdist(dune, method="bray")))
str(dune.df)

ad3 <- adonis2(dune.df~Management*A1, data = dune.env, method="bray")

Permutation test for adonis under reduced model Terms added sequentially 
(first to last) Permutation: free Number of permutations: 999 
adonis2(formula = dune.df ~ Management * A1, data = dune.env, method = 
"bray") Df SumOfSqs R2 F Pr(>F) Management 3 1.4686 0.34161 3.2629 0.004 
** A1 1 0.4409 0.10256 2.9387 0.016 * Management:A1 3 0.5892 0.13705 
1.3090 0.221 Residual 12 1.8004 0.41878 Total 19 4.2990 1.00000

Even though, method="bray" is specified, dune.df is not converted to a 
dist-object. How is it possible that dune, dune.dist, and dune.df all 
give the same result, despite having different dimensions and classes?

> ad1 == ad2 Df SumOfSqs R2 F Pr(>F) Management TRUE TRUE TRUE TRUE FALSE 
A1 TRUE TRUE TRUE TRUE FALSE Management:A1 TRUE TRUE TRUE TRUE FALSE 
Residual TRUE TRUE TRUE NA NA Total TRUE TRUE TRUE NA NA > ad2 == ad3 Df 
SumOfSqs R2 F Pr(>F) Management TRUE TRUE TRUE TRUE FALSE A1 TRUE TRUE 
TRUE TRUE FALSE Management:A1 TRUE TRUE TRUE TRUE FALSE Residual TRUE 
TRUE TRUE NA NA Total TRUE TRUE TRUE NA NA

Thank you!

-- 
Dr. Tim Richter-Heitmann

University of Bremen
Microbial Ecophysiology Group (AG Friedrich)
FB02 - Biologie/Chemie
Leobener Stra?e (NW2 A2130)
D-28359 Bremen
Tel.: 0049(0)421 218-63062
Fax: 0049(0)421 218-63069


	[[alternative HTML version deleted]]


From tom@hengl @ending from gm@il@com  Tue Jun 19 16:57:59 2018
From: tom@hengl @ending from gm@il@com (Tomislav Hengl)
Date: Tue, 19 Jun 2018 16:57:59 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <alpine.LFD.2.21.1806191002460.13261@reclus.nhh.no>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <CEB0CBC4-797F-4F15-8905-E6D2B0F81CE7@llnl.gov>
 <alpine.LFD.2.21.1806190838300.13261@reclus.nhh.no>
 <d735788c-71df-a0ad-ab87-f06d79782e6b@gmail.com>
 <alpine.LFD.2.21.1806191002460.13261@reclus.nhh.no>
Message-ID: <a02e7ebb-b658-20da-d0a2-dfe4f44066bc@gmail.com>


Hi Roger,

I have now managed to reinstall GDAL 2.3 and the latest versions of 
rgdal and sf. These are the steps I have followed:

1. First remove existing installation of GDAL using:

sudo apt-get purge --auto-remove gdal-bin

*this also removes QGIS / anything linked with GDAL.

2. Download GDAL source code 
(https://trac.osgeo.org/gdal/wiki/DownloadSource) and follow the 
instructions to install from source 
(https://trac.osgeo.org/gdal/wiki/BuildingOnUnix)

3. Installation from source code takes quite some time (10-15 minutes). 
After that I get:

gdalinfo --version
GDAL 2.3.0, released 2018/05/04

4. Install rgdal from R-forge using e.g.:

R CMD INSTALL rgdal_1.3-3.tar.gz
* installing to library ?/opt/microsoft/ropen/3.4.3/lib64/R/library?
* installing *source* package ?rgdal? ...
checking for g++... g++
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
configure: CC: gcc -std=gnu99
configure: CXX: g++
configure: rgdal: 1.3-3
checking for /usr/bin/svnversion... yes
cat: inst/SVN_VERSION: No such file or directory
configure: svn revision:
checking whether g++ supports C++11 features by default... no
checking whether g++ supports C++11 features with -std=gnu++11... yes
configure: C++11 support available
checking for gdal-config... /usr/local/bin/gdal-config
checking gdal-config usability... yes
configure: GDAL: 2.3.0
checking C++11 support for GDAL >= 2.3.0... yes
checking GDAL version >= 1.11.4... yes
checking gdal: linking with --libs only... yes
checking GDAL: /usr/local/share/gdal/pcs.csv readable... yes
configure: pkg-config proj exists, will use it
configure: PROJ version: 4.9.2
checking proj_api.h presence and usability... yes
checking PROJ version >= 4.8.0... yes
checking projects.h presence and usability... yes
checking PROJ.4: epsg found and readable... yes
checking PROJ.4: conus found and readable... yes
configure: Package CPP flags:  -I/usr/local/include
configure: Package LIBS:  -L/usr/local/lib -lgdal -lproj
configure: creating ./config.status

For sf I had to manually update DBI and units packages as it requires 
newest versions.

So now everything works fine. Thank you!

Tom

On 06/19/2018 10:41 AM, Roger Bivand wrote:
> On Tue, 19 Jun 2018, Tomislav Hengl wrote:
> 
>> Two weeks ago I installed new GDAL 2.3.* from source, then tried
>> installing rgdal and got the error about GDAL requires C++11. Then I had
>> to remove everything and reinstall GDAL 2.2. Would love to be able to
>> start using the newest GDAL inside R as it seems that many things have
>> been improved
>> (https://trac.osgeo.org/gdal/query?group=status&milestone=2.3.0).
>> Installing GDAL from source takes >20mins so next time I would like to
>> be sure that I will not have to remove GDAL.
>>
>> Can somebody point to a step-by-step guide to install GDAL 2.3.* and
>> rgdal on ubuntu (now that all packages have been updated)?
> 
> Tom:
> 
> There is too little information here: which g++ compiler version, was R 
> installed from source or not, GDAL was installed from source, but was 
> PROJ installed from source (and/or GEOS), ... and no verbatim error 
> message.
> 
> Please try development rgdal_1.3-3 from R-forge, which has some logic 
> fixes in configure:
> 
> install.packages("rgdal", repos="http://R-Forge.R-project.org")
> 
> Did you check whether sf installed with GDAL 2.3.0 and PROJ 5.1.0?
> 
> It looks as though CRAN devel debian is using GDAL 2.3.0 (the test saved 
> output is 2.2.4):
> 
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/rgdal-00check.html 
> 
> 
> Hope this helps,
> 
> Roger
> 
>>
>> Much appreciated!
>>
>> My session info:
>>
>> > library(rgdal)
>> Loading required package: sp
>> rgdal: version: 1.2-20, (SVN revision 725)
>> ?Geospatial Data Abstraction Library extensions to R successfully loaded
>> ?Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15
>> ?Path to GDAL shared files: /usr/share/gdal/2.2
>> ?GDAL binary built with GEOS: TRUE
>> ?Loaded PROJ.4 runtime: Rel. 4.9.2, 08 September 2015, [PJ_VERSION: 492]
>> ?Path to PROJ.4 shared files: (autodetected)
>> ?Linking to sp version: 1.2-7
>> > sessionInfo()
>> R version 3.5.0 (2018-04-23)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> Running under: Ubuntu 16.04.4 LTS
>>
>> Matrix products: default
>> BLAS: /opt/microsoft/ropen/3.5.0/lib64/R/lib/libRblas.so
>> LAPACK: /opt/microsoft/ropen/3.5.0/lib64/R/lib/libRlapack.so
>>
>>
>>
>> On 19.06.2018 08:47, Roger Bivand wrote:
>>> On Mon, 18 Jun 2018, MacQueen, Don wrote:
>>>
>>>> Success!
>>>>
>>>> This morning I upgraded a Mac to OS 10.13.5 (the so-called High
>>>> Sierra version), then
>>>>
>>>> - Installed R 3.5.0 from CRAN (installed ever 3.3.x)
>>>> - Installed sp 1.3-1, rgdal 1.3-2, rgeos 0.3-28, also sf 0.6-3, from 
>>>> the
>>>> ? CRAN binaries that are now available
>>>> - Ran my personal test suite, which exercises the kinds of tasks I
>>>> ? perform with those packages
>>>>
>>>> All tests succeeded.
>>>
>>> Thanks for reporting - especially on your own test suite. We do what
>>> we can to cover typical use cases, but independent testing in
>>> production settings is reassuring for everybody. We're expecting more
>>> PROJ-based changes later this year and next year, so it is great to
>>> have external test sets to be able to check where any changes in
>>> output are coming from.
>>>
>>> This is an encouragement to other users whose production depends on R
>>> packages using GDAL, PROJ and/or GEOS to follow this example and keep
>>> a script handy to test your use cases, and a history of output files
>>> with which to compare (diff). We don't worry about changes in the EPSG
>>> versions, but by next year they may be properly anchored too (changes
>>> in PROJ may include reference system definitions with timestamps).
>>>
>>>>
>>>> I forgot to control the order of installation, so I don't know if I
>>>> installed sp first, as advised. But I expect that with the binary
>>>> versions it doesn't matter.
>>>
>>> Right, the binary builds use the sp version on the build platform.
>>>
>>> Best wishes,
>>>
>>> Roger
>>>
>>>>
>>>> (I don't think it matters for the above, but I also installed the
>>>> clang and gfortran version provided on CRAN's Mac "tools" page, and
>>>> successfully compiled some source packages that require fortran, and
>>>> others that require C).
>>>>
>>>> Thank again for all your work
>>>> -Don
>>>>
>>>> -- 
>>>> Don MacQueen
>>>> Lawrence Livermore National Laboratory
>>>> 7000 East Ave., L-627
>>>> Livermore, CA 94550
>>>> 925-423-1062
>>>> Lab cell 925-724-7509
>>>>
>>>>
>>>>
>>>> ?On 6/8/18, 11:15 AM, "R-sig-Geo on behalf of Roger Bivand"
>>>> <r-sig-geo-bounces at r-project.org on behalf of Roger.Bivand at nhh.no>
>>>> wrote:
>>>>
>>>> ?? There are new releases of sp, rgdal and rgeos on CRAN. Please
>>>> install sp
>>>> ?? first, then the other two, which link to the installed sp. They all
>>>> ?? address so-called rchk issues, which have not so far been a
>>>> problem, but
>>>> ?? might have become more fragile as R's internal memory management
>>>> is made
>>>> ?? even more efficient. This involves compiled code using memory
>>>> allocated by
>>>> ?? R to be freed by R's garbage collector, which has to know if an
>>>> object is
>>>> ?? still being used. Tomas Kalibera, the author of rchk, helped
>>>> resolve and
>>>> ?? explain the issues encountered - what was good coding practice
>>>> fifteen
>>>> ?? years ago isn't always still good practice.
>>>>
>>>> ?? In addition, the earliest versions of GDAL and PROJ with which
>>>> rgdal will
>>>> ?? work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
>>>> current
>>>> ?? released versions of PROJ and GDAL are to be prefered, as bugs
>>>> have been
>>>> ?? fixed and new features and drivers introduced. A check has been put
>>>> ?? in place to trap attempts to install rgdal without a C++11-capable
>>>> ?? compiler when the GDAL version is >=2.3.0 - which requires C++11.
>>>> rgeos is
>>>> ?? ready for the forthcoming version of GEOS.
>>>>
>>>> ?? The CRAN team has also been very supportive of our efforts to bring
>>>> ?? compiled code in these packages into rchk compliance.
>>>>
>>>> ?? Please get in touch if you see any loose ends in these releases.
>>>>
>>>> ?? Roger
>>>>
>>>> ?? --
>>>> ?? Roger Bivand
>>>> ?? Department of Economics, Norwegian School of Economics,
>>>> ?? Helleveien 30, N-5045 Bergen, Norway.
>>>> ?? voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>> ?? http://orcid.org/0000-0003-2392-6140
>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>
>>>> ?? _______________________________________________
>>>> ?? R-sig-Geo mailing list
>>>> ?? R-sig-Geo at r-project.org
>>>> ?? https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


From dexter@locke @ending from gm@il@com  Tue Jun 19 21:40:36 2018
From: dexter@locke @ending from gm@il@com (Dexter Locke)
Date: Tue, 19 Jun 2018 15:40:36 -0400
Subject: [R-sig-Geo] nb object in spdep from categorical attribute
Message-ID: <CAA=SVwERV3GnaCFEDhe1N-=jCeCw4nmyDewcYPRr1FJiAkn-Gg@mail.gmail.com>

Dear list,

Does anyone know how to make nb objects (to eventually make spatial
weights) with spdep using an attribute in a shapefile's data frame?

Consider, for example, all property parcels on the same street segment
should be defined as neighbors. In the parcel polygons I have the
associated street segment name.

KNN forces sparsely settled areas to become neighbors, which is undesirable
for the subsequent analyses.

Distances between parcels vary, so distance-based neighbors are also
undesirable in this case.

Contiguity-based methods do not connect parcels on opposite sites of the
same street segment.

Is there a way to use an attribute to define what constitutes a neighbor?

All ideas welcome,
Dexter

	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Wed Jun 20 14:24:32 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Wed, 20 Jun 2018 14:24:32 +0200
Subject: [R-sig-Geo] nb object in spdep from categorical attribute
In-Reply-To: <CAA=SVwERV3GnaCFEDhe1N-=jCeCw4nmyDewcYPRr1FJiAkn-Gg@mail.gmail.com>
References: <CAA=SVwERV3GnaCFEDhe1N-=jCeCw4nmyDewcYPRr1FJiAkn-Gg@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1806201225120.3523@reclus.nhh.no>

On Tue, 19 Jun 2018, Dexter Locke wrote:

> Dear list,
>
> Does anyone know how to make nb objects (to eventually make spatial
> weights) with spdep using an attribute in a shapefile's data frame?
>
> Consider, for example, all property parcels on the same street segment
> should be defined as neighbors. In the parcel polygons I have the
> associated street segment name.
>
> KNN forces sparsely settled areas to become neighbors, which is undesirable
> for the subsequent analyses.
>
> Distances between parcels vary, so distance-based neighbors are also
> undesirable in this case.
>
> Contiguity-based methods do not connect parcels on opposite sites of the
> same street segment.
>
> Is there a way to use an attribute to define what constitutes a neighbor?

Yes, spdep::nb2blocknb() is a specific case where say observations without 
positional data are known to belong to an aggregate entity for which we 
have positional data. The output is an nb object with diagonal blocks (if 
the observations are sorted by block ID, not in the case below), as this 
example shows. You'll need the development version to run it, as released 
spdep::aggregate.nb() failed with empty aggregate sets - the nc median 
poish grid has such empty sets:

# devtools::install.github("r-spatial/spdep")
library(spdep)
data(nc.sids)
ncCC89.nb[sapply(ncCC89.nb, length) == 0L] <- 0L
image(as(nb2listw(ncCC89.nb, zero.policy=TRUE), "CsparseMatrix"))
anb <- aggregate(ncCC89.nb, interaction(nc.sids$M.id, nc.sids$L.id))
image(as(nb2listw(anb, style="B"), "CsparseMatrix"))
# when the neighbour object is not empty
bnb <- nb2blocknb(anb, as.character(interaction(nc.sids$M.id,
   nc.sids$L.id)))
image(as(nb2listw(bnb, style="B"), "CsparseMatrix"))
# and when the neighbour object is empty
anb1 <- lapply(anb, function(x) x <- 0L)
attributes(anb1) <- attributes(anb)
bnb1 <- nb2blocknb(anb1, as.character(interaction(nc.sids$M.id,
   nc.sids$L.id)))
image(as(nb2listw(bnb1, style="B"), "CsparseMatrix"))

This isn't your case, but crafting an nb object by hand (adding 
attributes after creating the list) then using spdep::union.nb or similar 
to combine with a positional nb (such as poly2nb) may work. For parcels 
across a stream or street, maybe look at the snap= argument if the streets 
are narrower than frontages. Could you provide a small reproducible 
example?

Hope this clarifies,

Roger

>
> All ideas welcome,
> Dexter
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From dexter@locke @ending from gm@il@com  Wed Jun 20 17:43:02 2018
From: dexter@locke @ending from gm@il@com (Dexter Locke)
Date: Wed, 20 Jun 2018 11:43:02 -0400
Subject: [R-sig-Geo] nb object in spdep from categorical attribute
In-Reply-To: <alpine.LFD.2.21.1806201225120.3523@reclus.nhh.no>
References: <CAA=SVwERV3GnaCFEDhe1N-=jCeCw4nmyDewcYPRr1FJiAkn-Gg@mail.gmail.com>
 <alpine.LFD.2.21.1806201225120.3523@reclus.nhh.no>
Message-ID: <CAA=SVwFpCZXK3Xn34NQH=peTrLOWUgw7fFti-Lbwdzxn73LBrA@mail.gmail.com>

Thanks so much.

The nb2blocknb(), aggregate.nb(), and union.nb() are fantastic functions!
Between these three functions I that I had not seen before I can accomplish
what I am seeking. It looks like the new spdep vignette has been greatly
expanded, which is also fantastic.

Thanks again,
Dexter


On Wed, Jun 20, 2018 at 8:24 AM Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Tue, 19 Jun 2018, Dexter Locke wrote:
>
> > Dear list,
> >
> > Does anyone know how to make nb objects (to eventually make spatial
> > weights) with spdep using an attribute in a shapefile's data frame?
> >
> > Consider, for example, all property parcels on the same street segment
> > should be defined as neighbors. In the parcel polygons I have the
> > associated street segment name.
> >
> > KNN forces sparsely settled areas to become neighbors, which is
> undesirable
> > for the subsequent analyses.
> >
> > Distances between parcels vary, so distance-based neighbors are also
> > undesirable in this case.
> >
> > Contiguity-based methods do not connect parcels on opposite sites of the
> > same street segment.
> >
> > Is there a way to use an attribute to define what constitutes a neighbor?
>
> Yes, spdep::nb2blocknb() is a specific case where say observations without
> positional data are known to belong to an aggregate entity for which we
> have positional data. The output is an nb object with diagonal blocks (if
> the observations are sorted by block ID, not in the case below), as this
> example shows. You'll need the development version to run it, as released
> spdep::aggregate.nb() failed with empty aggregate sets - the nc median
> poish grid has such empty sets:
>
> # devtools::install.github("r-spatial/spdep")
> library(spdep)
> data(nc.sids)
> ncCC89.nb[sapply(ncCC89.nb, length) == 0L] <- 0L
> image(as(nb2listw(ncCC89.nb, zero.policy=TRUE), "CsparseMatrix"))
> anb <- aggregate(ncCC89.nb, interaction(nc.sids$M.id, nc.sids$L.id))
> image(as(nb2listw(anb, style="B"), "CsparseMatrix"))
> # when the neighbour object is not empty
> bnb <- nb2blocknb(anb, as.character(interaction(nc.sids$M.id,
>    nc.sids$L.id)))
> image(as(nb2listw(bnb, style="B"), "CsparseMatrix"))
> # and when the neighbour object is empty
> anb1 <- lapply(anb, function(x) x <- 0L)
> attributes(anb1) <- attributes(anb)
> bnb1 <- nb2blocknb(anb1, as.character(interaction(nc.sids$M.id,
>    nc.sids$L.id)))
> image(as(nb2listw(bnb1, style="B"), "CsparseMatrix"))
>
> This isn't your case, but crafting an nb object by hand (adding
> attributes after creating the list) then using spdep::union.nb or similar
> to combine with a positional nb (such as poly2nb) may work. For parcels
> across a stream or street, maybe look at the snap= argument if the streets
> are narrower than frontages. Could you provide a small reproducible
> example?
>
> Hope this clarifies,
>
> Roger
>
> >
> > All ideas welcome,
> > Dexter
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> http://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>

	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Thu Jun 21 08:22:40 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Thu, 21 Jun 2018 08:22:40 +0200
Subject: [R-sig-Geo] Upcoming bugfix release of rgdal
Message-ID: <alpine.LFD.2.21.1806210815400.7911@reclus.nhh.no>

The upcoming submission to CRAN of rgdal 1.3-3 is at:

  install.packages("rgdal", repos="http://R-Forge.R-project.org")

for source and Windows binary testing. It fixes logic errors in handling 
cases reported mostly for source installs on Linux since 1.3-2. These 
affected CentOS 7 and GDAL 1.11.4, and other cases affected by the new 
GDAL 2.3.0 requirement that the C++ compiler be C++11 compliant.

rgdal 1.3-2 passes CRAN checks on both Debian and Fedora systems, so we 
are reliant on feedback to identify remaining issues.

If anyone is still having problems, please get in touch immediately to try 
to resolve them before I submit to CRAN.

Roger
rgdal maintainer

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From rhurlin @ending from gwdg@de  Thu Jun 21 12:52:32 2018
From: rhurlin @ending from gwdg@de (Rainer Hurling)
Date: Thu, 21 Jun 2018 12:52:32 +0200
Subject: [R-sig-Geo] Upcoming bugfix release of rgdal
In-Reply-To: <alpine.LFD.2.21.1806210815400.7911@reclus.nhh.no>
References: <alpine.LFD.2.21.1806210815400.7911@reclus.nhh.no>
Message-ID: <1b14f7e0-1114-fbe1-6f31-7539d79f90c9@gwdg.de>

Am 21.06.2018 um 08:22 schrieb Roger Bivand:
> The upcoming submission to CRAN of rgdal 1.3-3 is at:
> 
>  ?install.packages("rgdal", repos="http://R-Forge.R-project.org")
> 
> for source and Windows binary testing. It fixes logic errors in handling 
> cases reported mostly for source installs on Linux since 1.3-2. These 
> affected CentOS 7 and GDAL 1.11.4, and other cases affected by the new 
> GDAL 2.3.0 requirement that the C++ compiler be C++11 compliant.
> 
> rgdal 1.3-2 passes CRAN checks on both Debian and Fedora systems, so we 
> are reliant on feedback to identify remaining issues.
> 
> If anyone is still having problems, please get in touch immediately to 
> try to resolve them before I submit to CRAN.
> 
> Roger
> rgdal maintainer
> 

JFTR:
rgdal-1.3.3 builds and installs fine on FreeBSD 12.0-CURRENT amd64.


#library(rgdal)
Lade n?tiges Paket: sp
rgdal: version: 1.3-3, (SVN revision (unknown))
  Geospatial Data Abstraction Library extensions to R successfully loaded
  Loaded GDAL runtime: GDAL 2.2.4, released 2018/03/19
  Path to GDAL shared files: /usr/local/share/gdal
  GDAL binary built with GEOS: TRUE
  Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
  Path to PROJ.4 shared files: (autodetected)
  Linking to sp version: 1.3-1


Thanks for the hard work.


From julleey@w @ending from y@hoo@c@  Fri Jun 22 02:14:38 2018
From: julleey@w @ending from y@hoo@c@ (Julie Lee-Yaw)
Date: Fri, 22 Jun 2018 00:14:38 +0000 (UTC)
Subject: [R-sig-Geo] Question about correcting for spatial autocorrelation
References: <2031906142.731885.1529626478637.ref@mail.yahoo.com>
Message-ID: <2031906142.731885.1529626478637@mail.yahoo.com>

Hi?
I've posted this to the mixed models forum as well but thought people here might know:
I want to use the the correlation setting with corSpher in nlme to account for potential spatial autocorrelation in my data. My data include observations from across the globe with locations in latitude and longitude (decimal degrees). From the R help for corSpher, the syntax for their wheat example would be something like:
fm1Wheat2 <- gls(yield ~ variety - 1, corr =corSpher(c(28, 0.2), form = ~ latitude + longitude, nugget = TRUE))

My question is whether the latitude and longitude provided should be projected into a spatial projection that preserves distances or areas or whether providing decimal degrees is appropriate?
Many thanks!
	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Fri Jun 22 09:42:00 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Fri, 22 Jun 2018 09:42:00 +0200
Subject: [R-sig-Geo] 
 Question about correcting for spatial autocorrelation
In-Reply-To: <2031906142.731885.1529626478637@mail.yahoo.com>
References: <2031906142.731885.1529626478637.ref@mail.yahoo.com>
 <2031906142.731885.1529626478637@mail.yahoo.com>
Message-ID: <alpine.LFD.2.21.1806220924410.5359@reclus.nhh.no>

On Fri, 22 Jun 2018, Julie Lee-Yaw via R-sig-Geo wrote:

> Hi?
> I've posted this to the mixed models forum as well but thought people 
> here might know:
> I want to use the the correlation setting with corSpher in nlme to 
> account for potential spatial autocorrelation in my data. My data 
> include observations from across the globe with locations in latitude 
> and longitude (decimal degrees). From the R help for corSpher, the 
> syntax for their wheat example would be something like:

Nothing in the documentation nor the underlying book suggests that the 
coordinates are anything other than planar, so geographical coordinates in 
decimal degrees should not be used. Unfortunately, I do not have access to 
the underlying article in crop science, but there is no reason to think 
that the agricultural experiment extended from France to Turkey and France 
to south of Ghana. The documentation in nlme::corSpher() refers to 
stats::dist, and I can't see any way to insert fields::rdist.earth() in 
its place. So you can safely accept that the coefficients must be 
projected (i.e. planar). This is all accessible in the documentation and 
Pinheiro & Bates (2000). It is pretty certain that they did not envisage 
global scope in geographical coordinates, so maybe you should be using 
fields or gstat which are more likely to be able to handle Great Circle 
distances.

Hope this clarifies,

Roger

> fm1Wheat2 <- gls(yield ~ variety - 1, corr =corSpher(c(28, 0.2), form = 
> + ~ latitude + longitude, nugget = TRUE))
>
> My question is whether the latitude and longitude provided should be 
> projected into a spatial projection that preserves distances or areas or 
> whether providing decimal degrees is appropriate?

> Many thanks!

Please post plain text.

> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From giu@eppe@@m@tulli @ending from gm@il@com  Sat Jun 23 10:26:30 2018
From: giu@eppe@@m@tulli @ending from gm@il@com (Giuseppe Amatulli)
Date: Sat, 23 Jun 2018 04:26:30 -0400
Subject: [R-sig-Geo] Fwd: Summer School in Geocomputation - Berkeley - USA
In-Reply-To: <CAKoiDH+SWTnJarNEy8ErrdGYn_duWUQ+ExQsEE6i24OBRFnAow@mail.gmail.com>
References: <CAKoiDH+SWTnJarNEy8ErrdGYn_duWUQ+ExQsEE6i24OBRFnAow@mail.gmail.com>
Message-ID: <CAKoiDHKM_OCi0EP7PR03zsrTJHyoSW_6EFt5JEqmtz7qx7QKRg@mail.gmail.com>

Dear colleagues,

With the objective of enhancing programming skills in Geocomputation and
prepare new scientists in deals with large geo-data,

in August 2018 we organize a summer school at Berkeley.

*International Summer School:*

*Geocomputation using free and Open Source Software** (20th-24th August
2018) *

organized by Spatial Ecology (www.spatial-ecology.net)
<http://www.spatial-ecology.net/> - Venue: *Berkeley Institute of Data
Science <https://bids.berkeley.edu/>*

A 5 days intense experience opening new horizons on the use of the vast
potentials of *Linux* environment and the command line approach for
*geo-data* massive processing using Bash, AWK, Python, GRASS, QGIS,
GDAL/OGR, R, PKtools. We will guide newbies and experienced GIS users who
have never used a command line terminal to a stage which will allow them to
understand and apply very advanced open source data processing routines.
Our focus is to enhance a self-learning approach. This allows participants
to keep on progressing and improving their skills in a continuously
evolving technological environment.

More information and registration:

www.spatial-ecology.net
www.facebook.com/spatialecology  -> event
<https://www.facebook.com/events/202252593719455/>

twitter: @BigDataEcology

Best regards
Spatial Ecology ? Team

-- 
Giuseppe Amatulli, Ph.D.

Research scientist at
Yale School of Forestry & Environmental Studies
Yale Center for Research Computing
Center for Science and Social Science Information
New Haven, 06511
Teaching: http://spatial-ecology.net
Work:  https://environment.yale.edu/profile/giuseppe-amatulli/



-- 
Giuseppe Amatulli, Ph.D.

Research scientist at
Yale School of Forestry & Environmental Studies
Yale Center for Research Computing
Center for Science and Social Science Information
New Haven, 06511
Teaching: http://spatial-ecology.net
Work:  https://environment.yale.edu/profile/giuseppe-amatulli/

	[[alternative HTML version deleted]]


From Roger@Biv@nd @ending from nhh@no  Sat Jun 23 13:58:43 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Sat, 23 Jun 2018 11:58:43 +0000
Subject: [R-sig-Geo] Upcoming bugfix release of rgdal
In-Reply-To: <1b14f7e0-1114-fbe1-6f31-7539d79f90c9@gwdg.de>
References: <alpine.LFD.2.21.1806210815400.7911@reclus.nhh.no>,
 <1b14f7e0-1114-fbe1-6f31-7539d79f90c9@gwdg.de>
Message-ID: <BDBEEBC63E3A2C25.40149021-a4ba-4941-801e-f1aab3a94547@mail.outlook.com>

Thanks for this report for the record, and constructive input from many; rgdal 1.3-3 on CRAN, with positive help from Uwe Ligges.

Roger

Roger Bivand
Norwegian School of Economics
Bergen, Norway



Fra: Rainer Hurling
Sendt: torsdag 21. juni, 12.52
Emne: Re: [R-sig-Geo] Upcoming bugfix release of rgdal
Til: r-sig-geo at r-project.org


Am 21.06.2018 um 08:22 schrieb Roger Bivand: > The upcoming submission to CRAN of rgdal 1.3-3 is at: > >  install.packages("rgdal", repos="http://R-Forge.R-project.org") > > for source and Windows binary testing. It fixes logic errors in handling > cases reported mostly for source installs on Linux since 1.3-2. These > affected CentOS 7 and GDAL 1.11.4, and other cases affected by the new > GDAL 2.3.0 requirement that the C++ compiler be C++11 compliant. > > rgdal 1.3-2 passes CRAN checks on both Debian and Fedora systems, so we > are reliant on feedback to identify remaining issues. > > If anyone is still having problems, please get in touch immediately to > try to resolve them before I submit to CRAN. > > Roger > rgdal maintainer > JFTR: rgdal-1.3.3 builds and installs fine on FreeBSD 12.0-CURRENT amd64. #library(rgdal) Lade n?tiges Paket: sp rgdal: version: 1.3-3, (SVN revision (unknown)) Geospatial Data Abstraction Library extensions to R successfully loaded Loaded GDAL runtime: GDAL 2.2.4, released 2018/03/19 Path to GDAL shared files: /usr/local/share/gdal GDAL binary built with GEOS: TRUE Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493] Path to PROJ.4 shared files: (autodetected) Linking to sp version: 1.3-1 Thanks for the hard work. _______________________________________________ R-sig-Geo mailing list R-sig-Geo at r-project.org https://stat.ethz.ch/mailman/listinfo/r-sig-geo


	[[alternative HTML version deleted]]


From tom@hengl @ending from gm@il@com  Mon Jun 25 10:04:24 2018
From: tom@hengl @ending from gm@il@com (Tomislav Hengl)
Date: Mon, 25 Jun 2018 10:04:24 +0200
Subject: [R-sig-Geo] CRAN releases of sp, rgdal and rgeos
In-Reply-To: <a02e7ebb-b658-20da-d0a2-dfe4f44066bc@gmail.com>
References: <alpine.LFD.2.21.1806082000550.32550@reclus.nhh.no>
 <CEB0CBC4-797F-4F15-8905-E6D2B0F81CE7@llnl.gov>
 <alpine.LFD.2.21.1806190838300.13261@reclus.nhh.no>
 <d735788c-71df-a0ad-ab87-f06d79782e6b@gmail.com>
 <alpine.LFD.2.21.1806191002460.13261@reclus.nhh.no>
 <a02e7ebb-b658-20da-d0a2-dfe4f44066bc@gmail.com>
Message-ID: <9ce88e1d-0786-772a-8f69-a679c3c9c53c@gmail.com>

Few more notes on installation of GDAL 2.3.

I was installing GDAL and rgdal on another Ubuntu machine and I 
experiences multiple problems with more installations of GDAL and proj4 
probably ("unable to load shared object rgdal.so" error). This is what I 
realized needs to be done before installing GDAL from source:

1. Install libgdal-dev and libroj-dev (very important otherwise the 
installation of rgdal will fail)

|sudo apt-get install libgdal-dev libproj-dev|

2. Download GDAL source code 
(https://trac.osgeo.org/gdal/wiki/DownloadSource) and probably best 
install it using the checkinstall package:

sudo apt install checkinstall

wget http://download.osgeo.org/gdal/2.3.0/gdal-2.3.0.tar.gz

tar -xvzf gdal-2.3.0.tar.gz

cd gdal-2.3.0

./configure

sudo checkinstall

*checkinstall took 20 minutes on my system, so be ready to take coffee 
and relax.

3. This would build a debian package that can then be normally installed 
and removed using the gdebi.

4. Install rgdal using install.packages("rgdal")

Thanks Roger for keeping everything up-to-date and stable! GDAL is the 
backbone of almost any GIS project I run.

Tom


On 19.06.2018 16:57, Tomislav Hengl wrote:
>
> Hi Roger,
>
> I have now managed to reinstall GDAL 2.3 and the latest versions of 
> rgdal and sf. These are the steps I have followed:
>
> 1. First remove existing installation of GDAL using:
>
> sudo apt-get purge --auto-remove gdal-bin
>
> *this also removes QGIS / anything linked with GDAL.
>
> 2. Download GDAL source code 
> (https://trac.osgeo.org/gdal/wiki/DownloadSource) and follow the 
> instructions to install from source 
> (https://trac.osgeo.org/gdal/wiki/BuildingOnUnix)
>
> 3. Installation from source code takes quite some time (10-15 
> minutes). After that I get:
>
> gdalinfo --version
> GDAL 2.3.0, released 2018/05/04
>
> 4. Install rgdal from R-forge using e.g.:
>
> R CMD INSTALL rgdal_1.3-3.tar.gz
> * installing to library ?/opt/microsoft/ropen/3.4.3/lib64/R/library?
> * installing *source* package ?rgdal? ...
> checking for g++... g++
> checking whether the C++ compiler works... yes
> checking for C++ compiler default output file name... a.out
> checking for suffix of executables...
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C++ compiler... yes
> checking whether g++ accepts -g... yes
> configure: CC: gcc -std=gnu99
> configure: CXX: g++
> configure: rgdal: 1.3-3
> checking for /usr/bin/svnversion... yes
> cat: inst/SVN_VERSION: No such file or directory
> configure: svn revision:
> checking whether g++ supports C++11 features by default... no
> checking whether g++ supports C++11 features with -std=gnu++11... yes
> configure: C++11 support available
> checking for gdal-config... /usr/local/bin/gdal-config
> checking gdal-config usability... yes
> configure: GDAL: 2.3.0
> checking C++11 support for GDAL >= 2.3.0... yes
> checking GDAL version >= 1.11.4... yes
> checking gdal: linking with --libs only... yes
> checking GDAL: /usr/local/share/gdal/pcs.csv readable... yes
> configure: pkg-config proj exists, will use it
> configure: PROJ version: 4.9.2
> checking proj_api.h presence and usability... yes
> checking PROJ version >= 4.8.0... yes
> checking projects.h presence and usability... yes
> checking PROJ.4: epsg found and readable... yes
> checking PROJ.4: conus found and readable... yes
> configure: Package CPP flags:? -I/usr/local/include
> configure: Package LIBS:? -L/usr/local/lib -lgdal -lproj
> configure: creating ./config.status
>
> For sf I had to manually update DBI and units packages as it requires 
> newest versions.
>
> So now everything works fine. Thank you!
>
> Tom
>
> On 06/19/2018 10:41 AM, Roger Bivand wrote:
>> On Tue, 19 Jun 2018, Tomislav Hengl wrote:
>>
>>> Two weeks ago I installed new GDAL 2.3.* from source, then tried
>>> installing rgdal and got the error about GDAL requires C++11. Then I 
>>> had
>>> to remove everything and reinstall GDAL 2.2. Would love to be able to
>>> start using the newest GDAL inside R as it seems that many things have
>>> been improved
>>> (https://trac.osgeo.org/gdal/query?group=status&milestone=2.3.0).
>>> Installing GDAL from source takes >20mins so next time I would like to
>>> be sure that I will not have to remove GDAL.
>>>
>>> Can somebody point to a step-by-step guide to install GDAL 2.3.* and
>>> rgdal on ubuntu (now that all packages have been updated)?
>>
>> Tom:
>>
>> There is too little information here: which g++ compiler version, was 
>> R installed from source or not, GDAL was installed from source, but 
>> was PROJ installed from source (and/or GEOS), ... and no verbatim 
>> error message.
>>
>> Please try development rgdal_1.3-3 from R-forge, which has some logic 
>> fixes in configure:
>>
>> install.packages("rgdal", repos="http://R-Forge.R-project.org")
>>
>> Did you check whether sf installed with GDAL 2.3.0 and PROJ 5.1.0?
>>
>> It looks as though CRAN devel debian is using GDAL 2.3.0 (the test 
>> saved output is 2.2.4):
>>
>> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/rgdal-00check.html 
>>
>>
>> Hope this helps,
>>
>> Roger
>>
>>>
>>> Much appreciated!
>>>
>>> My session info:
>>>
>>> > library(rgdal)
>>> Loading required package: sp
>>> rgdal: version: 1.2-20, (SVN revision 725)
>>> ?Geospatial Data Abstraction Library extensions to R successfully 
>>> loaded
>>> ?Loaded GDAL runtime: GDAL 2.2.2, released 2017/09/15
>>> ?Path to GDAL shared files: /usr/share/gdal/2.2
>>> ?GDAL binary built with GEOS: TRUE
>>> ?Loaded PROJ.4 runtime: Rel. 4.9.2, 08 September 2015, [PJ_VERSION: 
>>> 492]
>>> ?Path to PROJ.4 shared files: (autodetected)
>>> ?Linking to sp version: 1.2-7
>>> > sessionInfo()
>>> R version 3.5.0 (2018-04-23)
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>> Running under: Ubuntu 16.04.4 LTS
>>>
>>> Matrix products: default
>>> BLAS: /opt/microsoft/ropen/3.5.0/lib64/R/lib/libRblas.so
>>> LAPACK: /opt/microsoft/ropen/3.5.0/lib64/R/lib/libRlapack.so
>>>
>>>
>>>
>>> On 19.06.2018 08:47, Roger Bivand wrote:
>>>> On Mon, 18 Jun 2018, MacQueen, Don wrote:
>>>>
>>>>> Success!
>>>>>
>>>>> This morning I upgraded a Mac to OS 10.13.5 (the so-called High
>>>>> Sierra version), then
>>>>>
>>>>> - Installed R 3.5.0 from CRAN (installed ever 3.3.x)
>>>>> - Installed sp 1.3-1, rgdal 1.3-2, rgeos 0.3-28, also sf 0.6-3, 
>>>>> from the
>>>>> ? CRAN binaries that are now available
>>>>> - Ran my personal test suite, which exercises the kinds of tasks I
>>>>> ? perform with those packages
>>>>>
>>>>> All tests succeeded.
>>>>
>>>> Thanks for reporting - especially on your own test suite. We do what
>>>> we can to cover typical use cases, but independent testing in
>>>> production settings is reassuring for everybody. We're expecting more
>>>> PROJ-based changes later this year and next year, so it is great to
>>>> have external test sets to be able to check where any changes in
>>>> output are coming from.
>>>>
>>>> This is an encouragement to other users whose production depends on R
>>>> packages using GDAL, PROJ and/or GEOS to follow this example and keep
>>>> a script handy to test your use cases, and a history of output files
>>>> with which to compare (diff). We don't worry about changes in the EPSG
>>>> versions, but by next year they may be properly anchored too (changes
>>>> in PROJ may include reference system definitions with timestamps).
>>>>
>>>>>
>>>>> I forgot to control the order of installation, so I don't know if I
>>>>> installed sp first, as advised. But I expect that with the binary
>>>>> versions it doesn't matter.
>>>>
>>>> Right, the binary builds use the sp version on the build platform.
>>>>
>>>> Best wishes,
>>>>
>>>> Roger
>>>>
>>>>>
>>>>> (I don't think it matters for the above, but I also installed the
>>>>> clang and gfortran version provided on CRAN's Mac "tools" page, and
>>>>> successfully compiled some source packages that require fortran, and
>>>>> others that require C).
>>>>>
>>>>> Thank again for all your work
>>>>> -Don
>>>>>
>>>>> -- 
>>>>> Don MacQueen
>>>>> Lawrence Livermore National Laboratory
>>>>> 7000 East Ave., L-627
>>>>> Livermore, CA 94550
>>>>> 925-423-1062
>>>>> Lab cell 925-724-7509
>>>>>
>>>>>
>>>>>
>>>>> ?On 6/8/18, 11:15 AM, "R-sig-Geo on behalf of Roger Bivand"
>>>>> <r-sig-geo-bounces at r-project.org on behalf of Roger.Bivand at nhh.no>
>>>>> wrote:
>>>>>
>>>>> ?? There are new releases of sp, rgdal and rgeos on CRAN. Please
>>>>> install sp
>>>>> ?? first, then the other two, which link to the installed sp. They 
>>>>> all
>>>>> ?? address so-called rchk issues, which have not so far been a
>>>>> problem, but
>>>>> ?? might have become more fragile as R's internal memory management
>>>>> is made
>>>>> ?? even more efficient. This involves compiled code using memory
>>>>> allocated by
>>>>> ?? R to be freed by R's garbage collector, which has to know if an
>>>>> object is
>>>>> ?? still being used. Tomas Kalibera, the author of rchk, helped
>>>>> resolve and
>>>>> ?? explain the issues encountered - what was good coding practice
>>>>> fifteen
>>>>> ?? years ago isn't always still good practice.
>>>>>
>>>>> ?? In addition, the earliest versions of GDAL and PROJ with which
>>>>> rgdal will
>>>>> ?? work have been updated, and set to PROJ 4.8.0 and GDAL 1.11.4. The
>>>>> current
>>>>> ?? released versions of PROJ and GDAL are to be prefered, as bugs
>>>>> have been
>>>>> ?? fixed and new features and drivers introduced. A check has been 
>>>>> put
>>>>> ?? in place to trap attempts to install rgdal without a C++11-capable
>>>>> ?? compiler when the GDAL version is >=2.3.0 - which requires C++11.
>>>>> rgeos is
>>>>> ?? ready for the forthcoming version of GEOS.
>>>>>
>>>>> ?? The CRAN team has also been very supportive of our efforts to 
>>>>> bring
>>>>> ?? compiled code in these packages into rchk compliance.
>>>>>
>>>>> ?? Please get in touch if you see any loose ends in these releases.
>>>>>
>>>>> ?? Roger
>>>>>
>>>>> ?? --
>>>>> ?? Roger Bivand
>>>>> ?? Department of Economics, Norwegian School of Economics,
>>>>> ?? Helleveien 30, N-5045 Bergen, Norway.
>>>>> ?? voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>>>>> ?? http://orcid.org/0000-0003-2392-6140
>>>>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>>>>
>>>>> ?? _______________________________________________
>>>>> ?? R-sig-Geo mailing list
>>>>> ?? R-sig-Geo at r-project.org
>>>>> ?? https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>> ????[[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>


From m@pinol@10 @ending from gm@il@com  Mon Jun 25 15:20:45 2018
From: m@pinol@10 @ending from gm@il@com (=?UTF-8?Q?Manuel_Sp=C3=ADnola?=)
Date: Mon, 25 Jun 2018 07:20:45 -0600
Subject: [R-sig-Geo] Variance explained with the GSIF package
Message-ID: <CABkCotSqjpKgxZ=4d8GCyNyebRY7ZhUXnjhJ8uL9udQoJvPs=g@mail.gmail.com>

Dear list members,

I am using the fit.gstatModel from the GSIF package.

I obtained 2 different values for variance explained using randomForest.
One is for the model and the other for the prediction.  What is the
difference among them and what is more important to report?

omm <- fit.gstatModel(meuse, om~dist+ffreq, meuse.grid,
method="randomForest")

> omm at regModel

Call:
 randomForest(formula = formulaString, data = rmatrix.s, importance =
TRUE,      na.action = na.omit)
               Type of random forest: regression
                     Number of trees: 500
No. of variables tried at each split: 1

          Mean of squared residuals: 5.952434
                    % Var explained: 49.16


om.rk <- predict(omm, meuse.grid)

> show(om.rk)
  Variable           : om
  Minium value       : 1
  Maximum value      : 17
  Size               : 153
  Total area         : 4964800
  Total area (units) : square-m
  Resolution (x)     : 40
  Resolution (y)     : 40
  Resolution (units) : m
  Vgm model          : Exp
  Nugget (residual)  : 2.78
  Sill (residual)    : 8.36
  Range (residual)   : 6100
  RMSE (validation)  : 1.672
  Var explained      : 76.1%
  Effective bytes    : 1215
  Compression method : gzip

-- 
*Manuel Sp?nola, Ph.D.*
Instituto Internacional en Conservaci?n y Manejo de Vida Silvestre
Universidad Nacional
Apartado 1350-3000
Heredia
COSTA RICA
mspinola at una.cr <mspinola at una.ac.cr>
mspinola10 at gmail.com
Tel?fono: (506) 8706 - 4662
Personal website: Lobito de r?o <https://sites.google.com/site/lobitoderio/>
Institutional website: ICOMVIS <http://www.icomvis.una.ac.cr/>

	[[alternative HTML version deleted]]


From d@nner@r@y @ending from gm@il@com  Tue Jun 26 01:04:21 2018
From: d@nner@r@y @ending from gm@il@com (Ray Danner)
Date: Mon, 25 Jun 2018 23:04:21 +0000
Subject: [R-sig-Geo] (no subject)
Message-ID: <1s0hcv0z1atbp8qnrgss8scb.15299678613723@email.android.com>

hello     https://goo.gl/x8U8LM    Ray Danner

From @rnold_@@lv@cion @ending from y@hoo@com  Wed Jun 27 16:23:51 2018
From: @rnold_@@lv@cion @ending from y@hoo@com (Arnold Salvacion)
Date: Wed, 27 Jun 2018 14:23:51 +0000 (UTC)
Subject: [R-sig-Geo] Fitting GWR for Panel Data in R
References: <1204122662.2499304.1530109431018.ref@mail.yahoo.com>
Message-ID: <1204122662.2499304.1530109431018@mail.yahoo.com>

Good day!

Does anyone here have experience or code for fitting geographically
weighted regression (GWR) for panel data. For example, I need to determine
the effect of independent variable X1, X2, and X3 to Y which are all
collected for T1 to Tn.? I have experience in fitting GWR for
cross-sectional data but have no experience on doing such on panel data.

Any suggestion is highly appreciated.

Thanks in advance!

Arnold Salvacion
	[[alternative HTML version deleted]]


From @uncu@@etru@cu@@i @ending from gm@il@com  Wed Jun 27 17:06:42 2018
From: @uncu@@etru@cu@@i @ending from gm@il@com (Suncus Etruscus)
Date: Wed, 27 Jun 2018 17:06:42 +0200
Subject: [R-sig-Geo] Difference in area calculation between QGIS and R
Message-ID: <CALF=PkUW7rAfnnx5ByHZrwYq7q05aJ7zu_dWdaf8-DHem=iSnQ@mail.gmail.com>

Dear List,
I am trying to use R ("sp" and "raster" packages) to calculate the area of
several polygons (CRS of the shapefile EPSG: 4326  - WGS84).

I used this line of code:

shapefile_name$area_km2 <- area(shapefile_name)/1000000

However, when I used QGIS to calculate the area of the same polygons
(through the "$area" function), I found there was a slight difference (in
every polygon).

For example, for a polygon of about 30 000 km2, the area calculated in R
was 50 km2 smaller.

What could be the cause?

Thanks in advance,
N.

	[[alternative HTML version deleted]]


From md@umner @ending from gm@il@com  Wed Jun 27 17:29:23 2018
From: md@umner @ending from gm@il@com (Michael Sumner)
Date: Wed, 27 Jun 2018 22:29:23 +0700
Subject: [R-sig-Geo] Difference in area calculation between QGIS and R
In-Reply-To: <CALF=PkUW7rAfnnx5ByHZrwYq7q05aJ7zu_dWdaf8-DHem=iSnQ@mail.gmail.com>
References: <CALF=PkUW7rAfnnx5ByHZrwYq7q05aJ7zu_dWdaf8-DHem=iSnQ@mail.gmail.com>
Message-ID: <CAAcGz9_M7PYZQxcskPuSmj3puruVoV29ic1cyC9ig-r5OgkPQw@mail.gmail.com>

Raster uses a (discretized) cosine-of-latitude approximati (popular amongst
longlat map makers).

QGIS uses a project to local equal area projection method or maybe some
other approach.

There's lots and f options, all that matters is what your work needs.

Cheers, Mike

On Wed, 27 Jun 2018, 22:14 Suncus Etruscus, <suncus.etruscus.i at gmail.com>
wrote:

> Dear List,
> I am trying to use R ("sp" and "raster" packages) to calculate the area of
> several polygons (CRS of the shapefile EPSG: 4326  - WGS84).
>
> I used this line of code:
>
> shapefile_name$area_km2 <- area(shapefile_name)/1000000
>
> However, when I used QGIS to calculate the area of the same polygons
> (through the "$area" function), I found there was a slight difference (in
> every polygon).
>
> For example, for a polygon of about 30 000 km2, the area calculated in R
> was 50 km2 smaller.
>
> What could be the cause?
>
> Thanks in advance,
> N.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia

	[[alternative HTML version deleted]]


From edzer@pebe@m@ @ending from uni-muen@ter@de  Wed Jun 27 18:07:18 2018
From: edzer@pebe@m@ @ending from uni-muen@ter@de (Edzer Pebesma)
Date: Wed, 27 Jun 2018 18:07:18 +0200
Subject: [R-sig-Geo] Difference in area calculation between QGIS and R
In-Reply-To: <CAAcGz9_M7PYZQxcskPuSmj3puruVoV29ic1cyC9ig-r5OgkPQw@mail.gmail.com>
References: <CALF=PkUW7rAfnnx5ByHZrwYq7q05aJ7zu_dWdaf8-DHem=iSnQ@mail.gmail.com>
 <CAAcGz9_M7PYZQxcskPuSmj3puruVoV29ic1cyC9ig-r5OgkPQw@mail.gmail.com>
Message-ID: <5bd057c4-c060-0efd-67b2-3bd5886409d0@uni-muenster.de>


On 06/27/2018 05:29 PM, Michael Sumner wrote:
> Raster uses a (discretized) cosine-of-latitude approximati (popular amongst
> longlat map makers).

As far as I can tell, raster branches into the libgeographic code
(copied into the package sources, although Karney is not mentioned as
one of the package copyright holders), using close to exact geodesic /
ellipsoidal computation.

> 
> QGIS uses a project to local equal area projection method or maybe some
> other approach.
> 
> There's lots and f options, all that matters is what your work needs.
> 
> Cheers, Mike
> 
> On Wed, 27 Jun 2018, 22:14 Suncus Etruscus, <suncus.etruscus.i at gmail.com>
> wrote:
> 
>> Dear List,
>> I am trying to use R ("sp" and "raster" packages) to calculate the area of
>> several polygons (CRS of the shapefile EPSG: 4326  - WGS84).
>>
>> I used this line of code:
>>
>> shapefile_name$area_km2 <- area(shapefile_name)/1000000
>>
>> However, when I used QGIS to calculate the area of the same polygons
>> (through the "$area" function), I found there was a slight difference (in
>> every polygon).
>>
>> For example, for a polygon of about 30 000 km2, the area calculated in R
>> was 50 km2 smaller.
>>
>> What could be the cause?
>>
>> Thanks in advance,
>> N.
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081


From @uncu@@etru@cu@@i @ending from gm@il@com  Wed Jun 27 18:31:53 2018
From: @uncu@@etru@cu@@i @ending from gm@il@com (Suncus Etruscus)
Date: Wed, 27 Jun 2018 18:31:53 +0200
Subject: [R-sig-Geo] Difference in area calculation between QGIS and R
In-Reply-To: <CAAcGz9_M7PYZQxcskPuSmj3puruVoV29ic1cyC9ig-r5OgkPQw@mail.gmail.com>
References: <CALF=PkUW7rAfnnx5ByHZrwYq7q05aJ7zu_dWdaf8-DHem=iSnQ@mail.gmail.com>
 <CAAcGz9_M7PYZQxcskPuSmj3puruVoV29ic1cyC9ig-r5OgkPQw@mail.gmail.com>
Message-ID: <CALF=PkWBLHMcg2TzQRX6tOJqvx-WyLhU7K9sMsdMBV10BCAzog@mail.gmail.com>

 Thank you for you answer, Michael,
I am new to the use of R for spatial analyses.

I have always used QGIS for this kind of operations, but this time I need
to repeat the area calculation with thousands of polygons several times in
a loop, so I switched to R.

Actually, what my work needs is the most accurate measurement of such
areas. I am wondering if the best thing to do is to accept the results in R
and ignore those in QGIS.

Thanks,
Nick

2018-06-27 17:29 GMT+02:00 Michael Sumner <mdsumner at gmail.com>:

> Raster uses a (discretized) cosine-of-latitude approximati (popular
> amongst longlat map makers).
>
> QGIS uses a project to local equal area projection method or maybe some
> other approach.
>
> There's lots and f options, all that matters is what your work needs.
>
> Cheers, Mike
>
> On Wed, 27 Jun 2018, 22:14 Suncus Etruscus, <suncus.etruscus.i at gmail.com>
> wrote:
>
>> Dear List,
>> I am trying to use R ("sp" and "raster" packages) to calculate the area of
>> several polygons (CRS of the shapefile EPSG: 4326  - WGS84).
>>
>> I used this line of code:
>>
>> shapefile_name$area_km2 <- area(shapefile_name)/1000000
>>
>> However, when I used QGIS to calculate the area of the same polygons
>> (through the "$area" function), I found there was a slight difference (in
>> every polygon).
>>
>> For example, for a polygon of about 30 000 km2, the area calculated in R
>> was 50 km2 smaller.
>>
>> What could be the cause?
>>
>> Thanks in advance,
>> N.
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> <https://maps.google.com/?q=203+Channel+Highway+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
> Kingston Tasmania 7050 Australia
> <https://maps.google.com/?q=203+Channel+Highway+Kingston+Tasmania+7050+Australia&entry=gmail&source=g>
>
>

	[[alternative HTML version deleted]]


From dexter@locke @ending from gm@il@com  Wed Jun 27 19:54:45 2018
From: dexter@locke @ending from gm@il@com (Dexter Locke)
Date: Wed, 27 Jun 2018 10:54:45 -0700
Subject: [R-sig-Geo] Fitting GWR for Panel Data in R
In-Reply-To: <1204122662.2499304.1530109431018@mail.yahoo.com>
References: <1204122662.2499304.1530109431018.ref@mail.yahoo.com>
 <1204122662.2499304.1530109431018@mail.yahoo.com>
Message-ID: <CAA=SVwHt1_PqPeqhryV-q-VZ33oPwB2E-d=1UQR-yuBY3tf2Ng@mail.gmail.com>

See

Fotheringham, A. S., Crespo, R., & Yao, J. (2015). Geographical and
Temporal Weighted Regression (GTWR). *Geographical Analysis*, 1?22.
https://doi.org/10.1111/gean.12071

Gollini, I., Lu, B., Charlton, M., Brunsdon, C., & Harris, P. (2015).
GWmodel: An R Package for Exploring Spatial Heterogeneity Using
Geographically Weighted Models. *Journal of Statistical Software*, *63*(17),
1?50. https://doi.org/10.1080/10095020.2014.917453
HTH, Dexter


On Wed, Jun 27, 2018 at 7:28 AM Arnold Salvacion via R-sig-Geo <
r-sig-geo at r-project.org> wrote:

> Good day!
>
> Does anyone here have experience or code for fitting geographically
> weighted regression (GWR) for panel data. For example, I need to determine
> the effect of independent variable X1, X2, and X3 to Y which are all
> collected for T1 to Tn.  I have experience in fitting GWR for
> cross-sectional data but have no experience on doing such on panel data.
>
> Any suggestion is highly appreciated.
>
> Thanks in advance!
>
> Arnold Salvacion
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

	[[alternative HTML version deleted]]


From @loboli@t@@ @ending from gm@il@com  Thu Jun 28 14:51:52 2018
From: @loboli@t@@ @ending from gm@il@com (Agustin Lobo)
Date: Thu, 28 Jun 2018 13:51:52 +0100
Subject: [R-sig-Geo] intersections to individual polygons
Message-ID: <CAG4NReJodevNNhVeVoodaRejfDjFCb3962NNtBpX5A_2fijDeQ@mail.gmail.com>

Given an SpatialPolygons DF with i.e. 2 intersecting polygons, A and
,B,  is there a function
that would split the original polygons into "onlyA", "onlyB" and
"AintersectingB" polygons?

Thanks
Agus


From r@turner @ending from @uckl@nd@@c@nz  Thu Jun 28 15:02:32 2018
From: r@turner @ending from @uckl@nd@@c@nz (Rolf Turner)
Date: Fri, 29 Jun 2018 01:02:32 +1200
Subject: [R-sig-Geo] intersections to individual polygons
In-Reply-To: <CAG4NReJodevNNhVeVoodaRejfDjFCb3962NNtBpX5A_2fijDeQ@mail.gmail.com>
References: <CAG4NReJodevNNhVeVoodaRejfDjFCb3962NNtBpX5A_2fijDeQ@mail.gmail.com>
Message-ID: <dcc8724a-c5a9-3cb2-d84d-982a396da17a@auckland.ac.nz>


On 29/06/18 00:51, Agustin Lobo wrote:

> Given an SpatialPolygons DF with i.e. 2 intersecting polygons, A and
> ,B,  is there a function
> that would split the original polygons into "onlyA", "onlyB" and
> "AintersectingB" polygons?

You can do this easily in spatstat by converting your polygons to "owin" 
objects.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bjw649 @ending from gm@il@com  Sat Jun 30 21:55:15 2018
From: bjw649 @ending from gm@il@com (Brian Williams)
Date: Sat, 30 Jun 2018 21:55:15 +0200
Subject: [R-sig-Geo] Converting Map Grid Australia to Geographic coordinates
Message-ID: <CANq0wq5RJNnTJuAkVt6ukeusnu78p77fgv4jpU=mzpujDu_vwQ@mail.gmail.com>

Does anybody know of a package which can convert MGA coordinates to
Geographic (lat/longs) ?

Thanks

Brian

	[[alternative HTML version deleted]]


