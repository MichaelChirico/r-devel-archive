From jpglutting at gmail.com  Sat Oct  1 11:15:10 2011
From: jpglutting at gmail.com (JP Glutting)
Date: Sat, 1 Oct 2011 11:15:10 +0200
Subject: [R-sig-Geo] rgdal install in local directory on server
Message-ID: <CALx1CkT_-r6p46fac7jkK=eX9edMCDzMkHmV==4REoCcaLZVTw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111001/3d576ad7/attachment.pl>

From zenlines at gmail.com  Sat Oct  1 15:16:18 2011
From: zenlines at gmail.com (Brian Oney)
Date: Sat, 1 Oct 2011 15:16:18 +0200
Subject: [R-sig-Geo] Ideas on qualifying urban shapes: linear / circular
 / star
Message-ID: <4E8712A2.5060709@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111001/df97acaf/attachment.pl>

From sandeep.coepcivil at gmail.com  Sat Oct  1 18:34:59 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Sat, 1 Oct 2011 11:34:59 -0500
Subject: [R-sig-Geo] Gstat - Installation Fail _ download source and compile
	help ...
Message-ID: <CAHnA5RWe-YthjN+oaKRUvUJQMzdBMvpjmusrZKVCev2fSszoEA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111001/b3e1d467/attachment.pl>

From paul.hiemstra at knmi.nl  Mon Oct  3 10:16:24 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 03 Oct 2011 08:16:24 +0000
Subject: [R-sig-Geo] Gstat - Installation Fail _ download source and
 compile help ...
In-Reply-To: <CAHnA5RWe-YthjN+oaKRUvUJQMzdBMvpjmusrZKVCev2fSszoEA@mail.gmail.com>
References: <CAHnA5RWe-YthjN+oaKRUvUJQMzdBMvpjmusrZKVCev2fSszoEA@mail.gmail.com>
Message-ID: <4E896F58.2050305@knmi.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111003/4501ad89/attachment.pl>

From paul.hiemstra at knmi.nl  Mon Oct  3 10:21:45 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 3 Oct 2011 08:21:45 +0000
Subject: [R-sig-Geo] Working with GRIB2 files
In-Reply-To: <4E85FA9D.2000802@isciences.com>
References: <CAPo57m-9sxOZHFP_cA2zh4rZuD15B5oX7zr8grWi6e+5ej-_7w@mail.gmail.com>
	<4E85FA9D.2000802@isciences.com>
Message-ID: <4E897099.4030405@knmi.nl>

Hi,

GRIB2 is mentioned on the GDAL website as one of the supported file
types. This is the WMO GRIB2 type, not really sure if that is what your
files are. You'll probably need to rebuild GDAL to get this support, but
check it out. In addition, I think the route from GRIB2 to NetCDF to R
is also ok in my view. Especially when you convert all the data to
NetCDF once and than do your additional analyses. There are also tools
to work with grib2 files, googling for wgrib2 will get you a lot of
information.

good luck,
Paul

On 09/30/2011 05:21 PM, Matthew Landis wrote:
> Ezra,
>
> I've been messing around with GRIB2 myself, but as of July,  I hadn't
> had any luck finding ways to do it in R.  I ended up using NCL (NCAR
> command language) to convert the Grib2's to NetCDF, which various R
> packages can handle (notably raster).  I did figure out how to pass
> arguments from R to the NCL script (through Bash), which was a major
> achievement for me.   This only works on Linux though, as I haven't
> worked it out for the Cygwin version of NCL.
>
> I would *love* to hear about ways of dealing with GRIB2 natively in
> R.  Barring that, I'm happy to share NCL code.
>
> Matt
>
> On 9/30/2011 12:41 PM, Ezra Boyd wrote:
>> Hello,
>>
>> I am trying to use the Real Time Ocean Forecasting System
>> (http://polar.ncep.noaa.gov/ofs/download.shtml?) archival data which
>> is in the GRIB2 format using a hybrid model-based coordinate system.
>> The data can be downloaded from here:
>> http://data.nodc.noaa.gov/opendap/ncep/rtofs/contents.html
>>
>> Has anyone had any experience using GRIB2 in R?  If so, please let me
>> know how it worked out.  In particular, I need to get forecast data
>> into a format where I can overlay a shapefile, but the wqgrib2 program
>> won't work because hybrid coordinate system.
>>
>> Thanks,
>> Ezra
>


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From Roger.Bivand at nhh.no  Mon Oct  3 10:42:29 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 3 Oct 2011 10:42:29 +0200
Subject: [R-sig-Geo] Working with GRIB2 files
In-Reply-To: <4E897099.4030405@knmi.nl>
References: <CAPo57m-9sxOZHFP_cA2zh4rZuD15B5oX7zr8grWi6e+5ej-_7w@mail.gmail.com>
	<4E85FA9D.2000802@isciences.com> <4E897099.4030405@knmi.nl>
Message-ID: <alpine.LRH.2.00.1110031040160.26539@reclus.nhh.no>

On Mon, 3 Oct 2011, Paul Hiemstra wrote:

> Hi,
>
> GRIB2 is mentioned on the GDAL website as one of the supported file
> types. This is the WMO GRIB2 type, not really sure if that is what your
> files are. You'll probably need to rebuild GDAL to get this support, but
> check it out. In addition, I think the route from GRIB2 to NetCDF to R
> is also ok in my view. Especially when you convert all the data to
> NetCDF once and than do your additional analyses. There are also tools
> to work with grib2 files, googling for wgrib2 will get you a lot of
> information.

With reference to the GDAL driver, please also note:

http://grass.osgeo.org/wiki/GRIB#GDAL_bug_workaround

for correct positioning. Going via NetCDF may avoid this - check with 
wgrib2 for safety's sake.

Roger

>
> good luck,
> Paul
>
> On 09/30/2011 05:21 PM, Matthew Landis wrote:
>> Ezra,
>>
>> I've been messing around with GRIB2 myself, but as of July,  I hadn't
>> had any luck finding ways to do it in R.  I ended up using NCL (NCAR
>> command language) to convert the Grib2's to NetCDF, which various R
>> packages can handle (notably raster).  I did figure out how to pass
>> arguments from R to the NCL script (through Bash), which was a major
>> achievement for me.   This only works on Linux though, as I haven't
>> worked it out for the Cygwin version of NCL.
>>
>> I would *love* to hear about ways of dealing with GRIB2 natively in
>> R.  Barring that, I'm happy to share NCL code.
>>
>> Matt
>>
>> On 9/30/2011 12:41 PM, Ezra Boyd wrote:
>>> Hello,
>>>
>>> I am trying to use the Real Time Ocean Forecasting System
>>> (http://polar.ncep.noaa.gov/ofs/download.shtml?) archival data which
>>> is in the GRIB2 format using a hybrid model-based coordinate system.
>>> The data can be downloaded from here:
>>> http://data.nodc.noaa.gov/opendap/ncep/rtofs/contents.html
>>>
>>> Has anyone had any experience using GRIB2 in R?  If so, please let me
>>> know how it worked out.  In particular, I need to get forecast data
>>> into a format where I can overlay a shapefile, but the wqgrib2 program
>>> won't work because hybrid coordinate system.
>>>
>>> Thanks,
>>> Ezra
>>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From mathieu.rajerison at gmail.com  Mon Oct  3 11:18:35 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 3 Oct 2011 11:18:35 +0200
Subject: [R-sig-Geo] Ideas on qualifying urban shapes: linear / circular
	/ star
In-Reply-To: <4E8712A2.5060709@gmail.com>
References: <4E8712A2.5060709@gmail.com>
Message-ID: <CAGfc75m6fWW1GRVGx6MdBtpCLX4w2N_Taa7G6=cUzPL8V9cFgQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111003/81c23aef/attachment.pl>

From mathieu.rajerison at gmail.com  Mon Oct  3 11:47:29 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 3 Oct 2011 11:47:29 +0200
Subject: [R-sig-Geo] Ideas on qualifying urban shapes: linear / circular
	/ star
In-Reply-To: <CAGfc75m6fWW1GRVGx6MdBtpCLX4w2N_Taa7G6=cUzPL8V9cFgQ@mail.gmail.com>
References: <4E8712A2.5060709@gmail.com>
	<CAGfc75m6fWW1GRVGx6MdBtpCLX4w2N_Taa7G6=cUzPL8V9cFgQ@mail.gmail.com>
Message-ID: <CAGfc75m65V191mZmMzNDsYfztK0nP-Tyky7G=Wbx978CeJnW7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111003/3f473044/attachment.pl>

From edzer.pebesma at uni-muenster.de  Mon Oct  3 11:57:43 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 03 Oct 2011 11:57:43 +0200
Subject: [R-sig-Geo] Gstat - Installation Fail _ download source and
 compile help ...
In-Reply-To: <4E896F58.2050305@knmi.nl>
References: <CAHnA5RWe-YthjN+oaKRUvUJQMzdBMvpjmusrZKVCev2fSszoEA@mail.gmail.com>
	<4E896F58.2050305@knmi.nl>
Message-ID: <4E898717.5080008@uni-muenster.de>

After some iterations off-list, it seems that the configure script that 
comes with gstat wants to use gcc, whereas R then starts compiling C 
files with icc.

Sandeep, could you tell us what the output of

R CMD config CC

is, on your computer?


On 10/03/2011 10:16 AM, Paul Hiemstra wrote:
> Avoid cross-posting to R-help and R-sig-geo...
>
> My earlier reply:
>
> Hi Sandeep,
>
> You need to provide way more detail for us to be able to help you:
>
> - Which version of gstat do you want to install, ?
> - where did you get the sources, ?
> - is it the version inside R or the standalone version?
> - what version of R are you running?
> - *what is the exact error that gstat gave*?
> - have you tried the precompiled gstat standalone binaries?
>
> Furthermore, this is not the correct forum to get help for gstat, this
> is far more appropriate for the R-sig-geo mailing list. Another helpful
> mailing list is:
>
> http://www2.52north.org/mailman/listinfo/geostatistics
>
> good luck,
> Paul
>
>
>
>
> On 10/01/2011 04:34 PM, Sandeep Patil wrote:
>> Hello
>>
>> I have been trying to install gstat on university's unix based system ( i am
>> not familiar with many technical aspects of installation) but i am getting a
>> particular error which i could not find a solution to online. Here is what
>> the technical support guy mailed me back, i am sure someone who understands
>> the technicalities can explain me this procedure in a more lucid way.
>> *
>> **Technical Assistant's reply*
>> *
>> Unfortunately, the error is due to a type being used in one of the
>> source files which has not yet been defined in an include file.
>> The "u_int" type is defined in /usr/include/sys/types.h:
>>
>>     typedef __u_int u_int;
>>
>> And, the "__u_int" type is defined in /usr/include/bits/types.h:
>>
>>     typedef unsigned int __u_int;
>>
>> Note that<bits/types.h>  is included at the top of<sys/types.h>, so
>> only the<sys/types.h>  would need to be included.
>>
>> Without including<sys/types.h>, the program won't recognize
>> "u_int" as a valid type.  So, this is an issue with the configuration
>> or perhaps source for the given program being compiled by the
>> package installation function of R.
>>
>> My suggestion would be to search for the given error message on any
>> support/help/discussion boards/websites related to the R program.
>> Or, do a google search to see if anyone else has encountered the same
>> error and find their suggested solution.
>>
>> Otherwise, you can manually download the source to your directory and
>> attempt to tweak the "configure" command, which would generate a more
>> correct Makefile.  Or, in the least desirable scenario, insert the
>> needed "#include<sys/types>" in the given *.c file yourself and
>> compile.
>> *
>> Can anyone make out anything from this , i want to tweak the configure
>> command but do not know how to proceed..
>>
>> Sandeep
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From b.rowlingson at lancaster.ac.uk  Mon Oct  3 13:04:09 2011
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 3 Oct 2011 12:04:09 +0100
Subject: [R-sig-Geo] Ideas on qualifying urban shapes: linear / circular
	/ star
In-Reply-To: <CAGfc75m65V191mZmMzNDsYfztK0nP-Tyky7G=Wbx978CeJnW7w@mail.gmail.com>
References: <4E8712A2.5060709@gmail.com>
	<CAGfc75m6fWW1GRVGx6MdBtpCLX4w2N_Taa7G6=cUzPL8V9cFgQ@mail.gmail.com>
	<CAGfc75m65V191mZmMzNDsYfztK0nP-Tyky7G=Wbx978CeJnW7w@mail.gmail.com>
Message-ID: <CANVKczOsCGV5p3_OSn=t2V0SCBcUDC0xhhf=X0UK8vicvQEUPQ@mail.gmail.com>

On Mon, Oct 3, 2011 at 10:47 AM, Mathieu Rajerison
<mathieu.rajerison at gmail.com> wrote:

> I'm not an R developper but I do think it would deserve an R package or at
> least an implementation in an existing one :)

 It seems to be only available as a Windows binary download with a
Public Domain license. Step 1 would be asking the authors to publish
their source code under an open source license. Then we can talk about
R packges!

Barry


From sarah.goslee at gmail.com  Mon Oct  3 13:18:32 2011
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Mon, 3 Oct 2011 07:18:32 -0400
Subject: [R-sig-Geo] Ideas on qualifying urban shapes: linear / circular
	/ star
In-Reply-To: <CANVKczOsCGV5p3_OSn=t2V0SCBcUDC0xhhf=X0UK8vicvQEUPQ@mail.gmail.com>
References: <4E8712A2.5060709@gmail.com>
	<CAGfc75m6fWW1GRVGx6MdBtpCLX4w2N_Taa7G6=cUzPL8V9cFgQ@mail.gmail.com>
	<CAGfc75m65V191mZmMzNDsYfztK0nP-Tyky7G=Wbx978CeJnW7w@mail.gmail.com>
	<CANVKczOsCGV5p3_OSn=t2V0SCBcUDC0xhhf=X0UK8vicvQEUPQ@mail.gmail.com>
Message-ID: <CAM_vjunQb3J7-fRYjv6FynZVYrXq_RL8ca25MdLFkH-6Fn-T2Q@mail.gmail.com>

Fragstats used to be more freely available; too bad the source version
is no longer available. It hasn't been supported for a very long time,
but used to be downloadable anyway.

Regardless, if I were going to implement that functionality in R, I would
start with the r.le code from GRASS GIS. Using the R-GRASS would
give you almost the same effect, but only if you already use GRASS.

Sarah

On Mon, Oct 3, 2011 at 7:04 AM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> On Mon, Oct 3, 2011 at 10:47 AM, Mathieu Rajerison
> <mathieu.rajerison at gmail.com> wrote:
>
>> I'm not an R developper but I do think it would deserve an R package or at
>> least an implementation in an existing one :)
>
> ?It seems to be only available as a Windows binary download with a
> Public Domain license. Step 1 would be asking the authors to publish
> their source code under an open source license. Then we can talk about
> R packges!
>
> Barry
>


-- 
Sarah Goslee
http://www.functionaldiversity.org


From mathieu.rajerison at gmail.com  Mon Oct  3 15:49:21 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 3 Oct 2011 15:49:21 +0200
Subject: [R-sig-Geo] Ideas on qualifying urban shapes: linear / circular
	/ star
In-Reply-To: <CAM_vjunQb3J7-fRYjv6FynZVYrXq_RL8ca25MdLFkH-6Fn-T2Q@mail.gmail.com>
References: <4E8712A2.5060709@gmail.com>
	<CAGfc75m6fWW1GRVGx6MdBtpCLX4w2N_Taa7G6=cUzPL8V9cFgQ@mail.gmail.com>
	<CAGfc75m65V191mZmMzNDsYfztK0nP-Tyky7G=Wbx978CeJnW7w@mail.gmail.com>
	<CANVKczOsCGV5p3_OSn=t2V0SCBcUDC0xhhf=X0UK8vicvQEUPQ@mail.gmail.com>
	<CAM_vjunQb3J7-fRYjv6FynZVYrXq_RL8ca25MdLFkH-6Fn-T2Q@mail.gmail.com>
Message-ID: <CAGfc75n0biRcXVL+rTwEPL-AqFEukGzRoZaU4ZegKkJGGcXc6w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111003/28227a40/attachment.pl>

From buitenwerf at em.uni-frankfurt.de  Mon Oct  3 15:57:30 2011
From: buitenwerf at em.uni-frankfurt.de (Robert Buitenwerf)
Date: Mon, 03 Oct 2011 15:57:30 +0200
Subject: [R-sig-Geo] NetCDF to raster error
Message-ID: <4E89BF4A.9020101@em.uni-frankfurt.de>

Dear all,

I am trying to read/open a netCDF file, but it keeps giving me the 
Microsoft Visual C++ Runtime Library error: "This application has 
requested the Runtime to terminate it in an unusual way..."

I am trying to open the CRU TS3.1 climate data.

raster('netcdf_file') gives me this error.
open.ncdf('netcdf_file') too.
I can read the file using open.nc() in the RNetCDF package and get info 
about the variables and attributes, but when I extract variables using 
var.get.nc() I get the same error. However when I set the count argument 
(number of time steps) to a small number (e.g. 20) I can extract values.

This makes me think the file size (2.6 Gb) is a problem. If so, is there 
a way to read in netcdf data in chunks?

I run R on Windows 7 64 bit.


Thanks in advance for any advice.

Robert Buitenwerf


From r.hijmans at gmail.com  Mon Oct  3 18:40:21 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 3 Oct 2011 09:40:21 -0700
Subject: [R-sig-Geo] NetCDF to raster error
In-Reply-To: <4E89BF4A.9020101@em.uni-frankfurt.de>
References: <4E89BF4A.9020101@em.uni-frankfurt.de>
Message-ID: <CANtt_hzwUstzTqYiv4W569zh2vaR4ibb_and4Ro8Yan97RzH+w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111003/cdcb6739/attachment.pl>

From sandeep.coepcivil at gmail.com  Tue Oct  4 17:56:32 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Tue, 4 Oct 2011 10:56:32 -0500
Subject: [R-sig-Geo] Advice on Cross validation_ Computational limits of
	spatial interpolation
Message-ID: <CAHnA5RW7WKvHwwUwY8ohxjEOf4oa_D55osCc9cHqyFCLTuOjTg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111004/2df48894/attachment.pl>

From benweinstein2010 at gmail.com  Tue Oct  4 19:50:47 2011
From: benweinstein2010 at gmail.com (Ben Weinstein)
Date: Tue, 4 Oct 2011 13:50:47 -0400
Subject: [R-sig-Geo] line segments and stripcharts to plot range.
Message-ID: <CAC28k7QuTvVN0XgTWefB-xVqnQhzPk_3oF=EwGuxwA_AV9OKNQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111004/d895835d/attachment.pl>

From djmuser at gmail.com  Tue Oct  4 20:18:49 2011
From: djmuser at gmail.com (Dennis Murphy)
Date: Tue, 4 Oct 2011 11:18:49 -0700
Subject: [R-sig-Geo] line segments and stripcharts to plot range.
In-Reply-To: <CAC28k7QuTvVN0XgTWefB-xVqnQhzPk_3oF=EwGuxwA_AV9OKNQ@mail.gmail.com>
References: <CAC28k7QuTvVN0XgTWefB-xVqnQhzPk_3oF=EwGuxwA_AV9OKNQ@mail.gmail.com>
Message-ID: <CADv2QyGh8=6-8BxUcKG0z4p6v7Gd4BB=BEXZiOQJdBLns=w43g@mail.gmail.com>

Hi:

This is actually not too hard to do in ggplot2 using the linerange
geom. Using your data frame hummers (I love those little guys :),

library('ggplot2')
ggplot(hummers, aes(x = Eng)) +
    geom_linerange(aes(ymin = Min, ymax = Max), colour = 'red', size = 1.5) +
    labs(x = '', y = 'Elevation (ft)') +
    coord_flip()

HTH,
Dennis

On Tue, Oct 4, 2011 at 10:50 AM, Ben Weinstein
<benweinstein2010 at gmail.com> wrote:
> Hi all
>
> I have a simple plotting question. I have a dataframe, hummers, containing
> hummingbirds species and the max and min elevation for each species. ?I'd
> like to plot a 1d chart, connecting the Min and Max elevation of each
> species, to create a line segment equal to the elevation range. the
> stripchart should contain 6 line segments, each labeled with the english
> name.
>
> hummers
> ? ? ? ? ? ? ? ? ? ? ? ? Eng ? ? ? ? ? ? ? ? ? Scientific
> ?Min ? ? ?Max
> 1 ? ? Band-tailed Barbthroat ? ? ? ? ? ?Threnetes ruckeri ? ? ? ? ?0
> ?900
> 2 ? ? White-whiskered Hermit ? ? ? ? ?Phaethornis yaruqui ? ?1000 ? 1500
> 3 ? ? ? Tawny-bellied Hermit ? ?Phaethornis syrmatophorus 1300 ? ? 2200
> 4 ? ?Green-fronted Lancebill ? ? ? ? ?Doryfera ludoviciae ? ? ? ?1100
> ?1700
> 5 ? Wedge-billed Hummingbird ? ? ? ? ? Schistes geoffroyi ? ? ?800 ? 2000
> 6 ? ? ? White-necked Jacobin ? ? ? ? ?Florisuga mellivora ? ? ? ? 600 ?1200
>
>
> stripchart(x = list(Min, Max), vertical=F, method="jitter"
> group.names=c("Min","Max"))
> for(i in 1:nrow(hummers)){segments(rownames(hummers)[i], hummers$Max[i],
> rownames(hummers)[i], hummers$Min[i])}
>
> thank you for your help
>
> ben weinstein
>
>
>
>
> --
> Ben Weinstein
> Graduate Student
> Ecology and Evolution
> Stony Brook University
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From paul.hiemstra at knmi.nl  Wed Oct  5 09:46:45 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Wed, 05 Oct 2011 07:46:45 +0000
Subject: [R-sig-Geo] Advice on Cross validation_ Computational limits of
	spatial interpolation
In-Reply-To: <CAHnA5RW7WKvHwwUwY8ohxjEOf4oa_D55osCc9cHqyFCLTuOjTg@mail.gmail.com>
References: <CAHnA5RW7WKvHwwUwY8ohxjEOf4oa_D55osCc9cHqyFCLTuOjTg@mail.gmail.com>
Message-ID: <4E8C0B65.9090607@knmi.nl>

Hi,

Hmmm, 3500 doesn't sound that huge to me...

I would say that more than, say, the 200 points closest to the
point-to-be-interpolated is more than enough. Gstat (and thus also
automap) supports only using the x nearest neighbors  for interpolation
through the 'nmax' argument. I'm not really sure if Tps has similar
settings, although I suspect that fitting the splines is done on the
entire dataset. Do take a look at the fastTps function in the fields
package, specifically the 'theta' argument.

good luck,
Paul

On 10/04/2011 03:56 PM, Sandeep Patil wrote:
> Hello
>
> The function Automap has been of great help to me and i have set it up 
> to perform cross validation for variables over continental USA.
>
> Essentially this is a very large dataset with about ~3500 points.
> There were many other dimensions , temporal etc that i wanted
> to explore but i could not get R packages setup  on univ supercomputer
> due to technical issues.
>
> This cross validation does not perform on my PC due to lack of
> computational units.
>
> Core 2 duo, 8 gb RAM. for Thin plate splines and kriging which are my 
> primary interest. It is obviously impractical to have so many points.
>
> I am dividing this dataset into smaller units and targeting ~300
> points per 
> polygon for analysis. Can anyone advise me on the influence of 
> number of points on the computational needs for TPS and kriging 
> based on their personal experience.
>
> I do know that Thin plate splines and Kriging are computationally
> demanding
> and my dataset is huge. Moreover it seems infeasible to do cross
> validation on it.
>  If anyone has any specific advice based on personal
> experience will they be willing to exchange a few emails?
>
>
> Thanks 
>
> -- 
> Sandeep R Patil
> Graduate Student
> M.S (Hydrological Sciences)
>


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From paul.hiemstra at knmi.nl  Wed Oct  5 09:54:13 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Wed, 05 Oct 2011 07:54:13 +0000
Subject: [R-sig-Geo] Working with GRIB2 files
In-Reply-To: <CAPo57m9SQ5oum2WiC_FCFJiP8jUDqyE4tcGipQMeUzg1=NzXEg@mail.gmail.com>
References: <CAPo57m-9sxOZHFP_cA2zh4rZuD15B5oX7zr8grWi6e+5ej-_7w@mail.gmail.com>	<4E85FA9D.2000802@isciences.com>	<4E897099.4030405@knmi.nl>
	<CAPo57m9SQ5oum2WiC_FCFJiP8jUDqyE4tcGipQMeUzg1=NzXEg@mail.gmail.com>
Message-ID: <4E8C0D25.5090201@knmi.nl>

Hi Ezra,

Please keep the mailing list included, in this way the answers are saved
for posterity :).

By rebuild I mean recompiling, building the gdal libraries and
executables from source. This is relatively straightforward under Linux,
and a little less under windows. I'm not sure if the precompiled version
from OSGeo4W supports GRIB out of the box. Just fire up R, load rgdal
and run the gdalDrivers() command to get a list of the drivers that your
version of gdal supports.

good luck,
Paul

On 10/04/2011 03:55 PM, Ezra Boyd wrote:
> Hi Paul,
>
> I'm a novice with programming, but determined to figure this out.
> What exactly do you mean by rebuild?  I use the OSGeo4W package to
> update gdal every few months, so I think I have the most recent
> version.
>
> Thanks,
> Ezra
>
>
>
> On Mon, Oct 3, 2011 at 3:21 AM, Paul Hiemstra <paul.hiemstra at knmi.nl> wrote:
>> Hi,
>>
>> GRIB2 is mentioned on the GDAL website as one of the supported file
>> types. This is the WMO GRIB2 type, not really sure if that is what you
>> files are. You'll probably need to rebuild GDAL to get this support, but
>> check it out. In addition, I think the route from GRIB2 to NetCDF to R
>> is also ok in my view. Especially when you convert all the data to
>> NetCDF once and than do your additional analyses. There are also tools
>> to work with grib2 files, googling for wgrib2 will get you a lot of
>> information.
>>
>> good luck,
>> Paul
>>
>> On 09/30/2011 05:21 PM, Matthew Landis wrote:
>>> Ezra,
>>>
>>> I've been messing around with GRIB2 myself, but as of July,  I hadn't
>>> had any luck finding ways to do it in R.  I ended up using NCL (NCAR
>>> command language) to convert the Grib2's to NetCDF, which various R
>>> packages can handle (notably raster).  I did figure out how to pass
>>> arguments from R to the NCL script (through Bash), which was a major
>>> achievement for me.   This only works on Linux though, as I haven't
>>> worked it out for the Cygwin version of NCL.
>>>
>>> I would *love* to hear about ways of dealing with GRIB2 natively in
>>> R.  Barring that, I'm happy to share NCL code.
>>>
>>> Matt
>>>
>>> On 9/30/2011 12:41 PM, Ezra Boyd wrote:
>>>> Hello,
>>>>
>>>> I am trying to use the Real Time Ocean Forecasting System
>>>> (http://polar.ncep.noaa.gov/ofs/download.shtml?) archival data which
>>>> is in the GRIB2 format using a hybrid model-based coordinate system.
>>>> The data can be downloaded from here:
>>>> http://data.nodc.noaa.gov/opendap/ncep/rtofs/contents.html
>>>>
>>>> Has anyone had any experience using GRIB2 in R?  If so, please let me
>>>> know how it worked out.  In particular, I need to get forecast data
>>>> into a format where I can overlay a shapefile, but the wqgrib2 program
>>>> won't work because hybrid coordinate system.
>>>>
>>>> Thanks,
>>>> Ezra
>>
>> --
>> Paul Hiemstra, Ph.D.
>> Global Climate Division
>> Royal Netherlands Meteorological Institute (KNMI)
>> Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
>> P.O. Box 201 | 3730 AE | De Bilt
>> tel: +31 30 2206 494
>>
>> http://intamap.geo.uu.nl/~paul
>> http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770
>>
>>


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From a.mosnier at gmail.com  Wed Oct  5 20:21:13 2011
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Wed, 5 Oct 2011 14:21:13 -0400
Subject: [R-sig-Geo] Logarithmic legend
Message-ID: <CANkFkEdRqcdPD+mPLkLt5QBfV5uG5MdE9CyJ7+GhtXF2XBG9Xg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111005/7aa775aa/attachment.pl>

From sandeep.coepcivil at gmail.com  Wed Oct  5 23:37:02 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Wed, 5 Oct 2011 16:37:02 -0500
Subject: [R-sig-Geo] Great Circle distances in Automap, Gstat
Message-ID: <CAHnA5RWB_A2ZT5m5fNcONhZfFb=A1svL-wYC77cRQ4KdqD3Gsw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111005/6a21c810/attachment.pl>

From sandeep.coepcivil at gmail.com  Wed Oct  5 23:50:33 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Wed, 5 Oct 2011 16:50:33 -0500
Subject: [R-sig-Geo] "Theta" value in Fields library for Tps
Message-ID: <CAHnA5RVCkB4q5GZ7gaf_54aeVD1G5M9Tx5b-U5puDD-AWPLWFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111005/62a0dad1/attachment.pl>

From gomeztjr at umich.mx  Thu Oct  6 06:53:33 2011
From: gomeztjr at umich.mx (Alberto Gomez-Tagle Gomez)
Date: Wed, 5 Oct 2011 23:53:33 -0500 (CDT)
Subject: [R-sig-Geo] RSAGA not runing all functions under Linux Ubuntu Natty
In-Reply-To: <725054923.1162.1317871668199.JavaMail.root@zeus>
Message-ID: <1867502126.1223.1317876813774.JavaMail.root@zeus>

Dear all!!

I have R-2.13.2. and SAGA up and running in Linux (Ubuntu, natty), I installed SAGA using synaptic.
I'm not a newbie in R neither GIS processing. I have been an ESRI ArcView/ArcGIS and ILWIS and Idrisi user for several years.
Now I intend to start teaching GIS at my university using open-source GIS, so far GRASS (stand alone and spgrass6) is going smooth.

I have gone through some excercises with SAGA stand alone and goes very smooth.
Nevertheless, it does not import *.asc files into SAGA
When doing so I get the next messages from the command line:

[2011-10-05/23:32:03] Executing module: Import ESRI Arc/Info Grid
Parameters
Grid: [not set]
File: /home/agt/Documentos/Spatial-Analyst.net/DEM25m.asc
[2011-10-05/23:32:03] Module execution failed

Then I tried to do the same using RSAGA, and following up several excercises posted in the web for SAGA GIS (Spatial Analyst.net)  NGS.R (Geomorphometry.org).
There seems to be some sort of problem with RSAGA communicating with SAGA GIS or the import module is not working at all.
Although some SAGA modules appear to be runing right, some other seem to fail, right after downloading and unziping the files
(examples in the next lines):

> rsaga.env()
$workspace
[1] "."
$cmd
[1] "saga_cmd"
$path
[1] "/usr/bin"
$modules
[1] "/usr/lib/saga"
$version
[1] "2.0.4"


> rsaga.esri.to.sgrd(in.grids="DEM25m.asc", out.sgrd="dem25m.sgrd", in.path=getwd())

SAGA CMD 2.0.4
Load table: /home/agt/Documentos/Spatial-Analyst.net/saga.srs...
failed
library path:	/usr/lib/saga
library name:	libio_grid
module name :	Import ESRI Arc/Info Grid
author      :	(c) 2007 by O.Conrad

Parameters
Grid: [not set]
File: /home/agt/Documentos/Spatial-Analyst.net/DEM25m.asc

error: executing module [Import ESRI Arc/Info Grid]
Mensajes de aviso perdidos
comando ejecutado ''/usr/bin/saga_cmd' libio_grid 'Import ESRI Arc/Info Grid' -FILE '/home/agt/Documentos/Spatial-Analyst.net/DEM25m.asc' -GRID 'dem25m.sgrd'' tiene estatus 1
>

What exactly means Grid:[not set]?, Do any one have some idea on what is going wrong here?, How do I solve it?.
Did I miss something during the installation of SAGA GIS? Would it be better to install SAGA from a terminal?




Best regards

Alberto GT


From edzer.pebesma at uni-muenster.de  Thu Oct  6 09:25:33 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 06 Oct 2011 09:25:33 +0200
Subject: [R-sig-Geo] Great Circle distances in Automap, Gstat
In-Reply-To: <CAHnA5RWB_A2ZT5m5fNcONhZfFb=A1svL-wYC77cRQ4KdqD3Gsw@mail.gmail.com>
References: <CAHnA5RWB_A2ZT5m5fNcONhZfFb=A1svL-wYC77cRQ4KdqD3Gsw@mail.gmail.com>
Message-ID: <4E8D57ED.3050007@uni-muenster.de>

library(sp)
?is.projected
?CRS

Please note that to my knowledge (but I might be wrong) R does not have 
kriging functions with ready-to-go covariance functions that are valid 
on spherical coordinates. Of course you can write your own.

Hth,

On 10/05/2011 11:37 PM, Sandeep Patil wrote:
> Hello
>
> I am using IDW and Kriging from these two libraries and have spatial data in
> Lat/Lon
> coordinates. I am a bit confused about how to specify that i need great
> circle
> distances in my calculations. Any advice welcome
>
> Thanks
>
> Sandeep
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From paul.hiemstra at knmi.nl  Thu Oct  6 10:47:21 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 06 Oct 2011 08:47:21 +0000
Subject: [R-sig-Geo] Great Circle distances in Automap, Gstat
In-Reply-To: <4E8D57ED.3050007@uni-muenster.de>
References: <CAHnA5RWB_A2ZT5m5fNcONhZfFb=A1svL-wYC77cRQ4KdqD3Gsw@mail.gmail.com>
	<4E8D57ED.3050007@uni-muenster.de>
Message-ID: <4E8D6B19.9040906@knmi.nl>

So i think that projecting your data first would be a good idea. Saves
you a lot of trouble with great circle distances. For reprojection of
sp-objects you can use the spTransform function (rgdal).

cheers,
Paul

On 10/06/2011 07:25 AM, Edzer Pebesma wrote:
> library(sp)
> ?is.projected
> ?CRS
>
> Please note that to my knowledge (but I might be wrong) R does not
> have kriging functions with ready-to-go covariance functions that are
> valid on spherical coordinates. Of course you can write your own.
>
> Hth,
>
> On 10/05/2011 11:37 PM, Sandeep Patil wrote:
>> Hello
>>
>> I am using IDW and Kriging from these two libraries and have spatial
>> data in
>> Lat/Lon
>> coordinates. I am a bit confused about how to specify that i need great
>> circle
>> distances in my calculations. Any advice welcome
>>
>> Thanks
>>
>> Sandeep
>>
>>     [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From paul.hiemstra at knmi.nl  Thu Oct  6 10:47:54 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 06 Oct 2011 08:47:54 +0000
Subject: [R-sig-Geo] "Theta" value in Fields library for Tps
In-Reply-To: <CAHnA5RVCkB4q5GZ7gaf_54aeVD1G5M9Tx5b-U5puDD-AWPLWFg@mail.gmail.com>
References: <CAHnA5RVCkB4q5GZ7gaf_54aeVD1G5M9Tx5b-U5puDD-AWPLWFg@mail.gmail.com>
Message-ID: <4E8D6B3A.1090906@knmi.nl>

Hi Sandeep,

I would reproject your data using the spTransform function.

cheers,
Paul

On 10/05/2011 09:50 PM, Sandeep Patil wrote:
> Hello
>
> If anyone has used the function tps which fits thin plate splines on spatial
> data can
> you tell me what units do i specify parameter *theta *in.
>
> It controls the tapering range beyond which radial basis function is zero.
>
> I am specifying coordinates in *Lat* and *Lon* and calculating *great circle
> distances*.
>
> Sandeep
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From paul.hiemstra at knmi.nl  Thu Oct  6 10:54:18 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 06 Oct 2011 08:54:18 +0000
Subject: [R-sig-Geo] Logarithmic legend
In-Reply-To: <CANkFkEdRqcdPD+mPLkLt5QBfV5uG5MdE9CyJ7+GhtXF2XBG9Xg@mail.gmail.com>
References: <CANkFkEdRqcdPD+mPLkLt5QBfV5uG5MdE9CyJ7+GhtXF2XBG9Xg@mail.gmail.com>
Message-ID: <4E8D6CBA.8010709@knmi.nl>

Hi,

You could use ggplot:

library(gstat)
library(ggplot2)
loadMeuse()

meuse.grid.df = as.data.frame(meuse.grid)
head(meuse.grid.df)

# Create a dist + 1 for log transformation
# prevents -Inf for 0 values
meuse.grid.df$dist_plus1 = meuse.grid.df$dist + 1

ggplot(aes(x = x, y = y, fill = dist_plus1), data = meuse.grid.df) +
geom_tile() +
    coord_equal() + scale_fill_continuous(trans="log")

# Some theme changes I like
theme_set(theme_bw())
ggplot(aes(x = x, y = y, fill = dist_plus1), data = meuse.grid.df) +
geom_tile() +
    coord_equal() + scale_fill_continuous(trans="log")

hope this helps,
Paul

On 10/05/2011 06:21 PM, Arnaud Mosnier wrote:
> Dear Geo Users,
>
> Please, can someone explain me how to plot a raster using a logarithmic
> scale and obtaining the legend with this scale ?
>
> Thanks for any help,
>
> Arnaud
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From HodgessE at uhd.edu  Thu Oct  6 12:36:26 2011
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Thu, 6 Oct 2011 05:36:26 -0500
Subject: [R-sig-Geo] negative latitudes in coordinates function
Message-ID: <586A4828D7AAA04CA9B258C50A28DA206DBD5D@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111006/d10a0e06/attachment.pl>

From HodgessE at uhd.edu  Thu Oct  6 12:39:45 2011
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Thu, 6 Oct 2011 05:39:45 -0500
Subject: [R-sig-Geo] negative latitudes in coordinates function: Please
	ignore
References: <586A4828D7AAA04CA9B258C50A28DA206DBD5D@BALI.uhd.campus>
Message-ID: <586A4828D7AAA04CA9B258C50A28DA206DBD5E@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111006/95f9e11a/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Thu Oct  6 12:41:49 2011
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 6 Oct 2011 11:41:49 +0100
Subject: [R-sig-Geo] negative latitudes in coordinates function
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA206DBD5D@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA206DBD5D@BALI.uhd.campus>
Message-ID: <CANVKczOcC_xUxZx=PZW-h90kvPi=utMeRMahkv8oN2_3XvcxKg@mail.gmail.com>

On Thu, Oct 6, 2011 at 11:36 AM, Hodgess, Erin <HodgessE at uhd.edu> wrote:
> Dear R Sig Geo People:
>
> This is a goofy question.
>
> If I have a data set with negative latitude and and I want to use the coordinates function, what should I be changing on the negative latitude please?

 Nothing? Negative latitudes are perfectly valid in sp. There's a
whole 'nother hemisphere down there, I'm led to believe...


Barry


From HodgessE at uhd.edu  Thu Oct  6 12:50:35 2011
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Thu, 6 Oct 2011 05:50:35 -0500
Subject: [R-sig-Geo] negative latitudes in coordinates function
References: <586A4828D7AAA04CA9B258C50A28DA206DBD5D@BALI.uhd.campus>
	<CANVKczOcC_xUxZx=PZW-h90kvPi=utMeRMahkv8oN2_3XvcxKg@mail.gmail.com>
Message-ID: <586A4828D7AAA04CA9B258C50A28DA206DBD5F@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111006/f0f914de/attachment.pl>

From jrcoyle at live.unc.edu  Thu Oct  6 14:30:56 2011
From: jrcoyle at live.unc.edu (jcoyle)
Date: Thu, 6 Oct 2011 05:30:56 -0700 (PDT)
Subject: [R-sig-Geo] find raster cells with non-NA values
Message-ID: <1317904256699-6865759.post@n2.nabble.com>

I would like to 1) find which cell numbers in a raster have non-NA values so
that I can 2) use extract to calculate the variance within a radius of each
of these cell centers.  I think I have figured out part 2, but am having
trouble with part 1. 

Thanks for you assistance.

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/find-raster-cells-with-non-NA-values-tp6865759p6865759.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From jstruve at ufl.edu  Thu Oct  6 14:40:41 2011
From: jstruve at ufl.edu (Struve,Juliane)
Date: Thu, 6 Oct 2011 12:40:41 +0000
Subject: [R-sig-Geo] find raster cells with non-NA values
In-Reply-To: <1317904256699-6865759.post@n2.nabble.com>
References: <1317904256699-6865759.post@n2.nabble.com>
Message-ID: <BFCE57D0BE7CBB42A581347DE375AF9A0278F7@UFEXCH-MBXN03.ad.ufl.edu>

Good morning,

Is 
myraster[values(myraster)!="NA"]

what you are looking for ?

Regards,

Juliane 

Dr. Juliane Struve
Fisheries and Aquatic Sciences
7922 NW 71st Street, Gainesville, FL 32653
352-273-3632 (tel)
352-392-3672 (fax)
email: jstruve at ufl.edu



-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of jcoyle
Sent: Thursday, October 06, 2011 8:31 AM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] find raster cells with non-NA values

I would like to 1) find which cell numbers in a raster have non-NA values so that I can 2) use extract to calculate the variance within a radius of each of these cell centers.  I think I have figured out part 2, but am having trouble with part 1. 

Thanks for you assistance.

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/find-raster-cells-with-non-NA-values-tp6865759p6865759.html
Sent from the R-sig-geo mailing list archive at Nabble.com.

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From jrcoyle at live.unc.edu  Thu Oct  6 14:45:40 2011
From: jrcoyle at live.unc.edu (jcoyle)
Date: Thu, 6 Oct 2011 05:45:40 -0700 (PDT)
Subject: [R-sig-Geo] find raster cells with non-NA values
In-Reply-To: <BFCE57D0BE7CBB42A581347DE375AF9A0278F7@UFEXCH-MBXN03.ad.ufl.edu>
References: <1317904256699-6865759.post@n2.nabble.com>
	<BFCE57D0BE7CBB42A581347DE375AF9A0278F7@UFEXCH-MBXN03.ad.ufl.edu>
Message-ID: <1317905140487-6865787.post@n2.nabble.com>

Actually, I wanted to know the cell numbers, not the values that they
contain, but I just changed what you put to

which(!is.na(values(myraster)))

and this seemed to work.  Thanks!

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/find-raster-cells-with-non-NA-values-tp6865759p6865787.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From dicko.ahmadou at gmail.com  Thu Oct  6 14:46:28 2011
From: dicko.ahmadou at gmail.com (ahmadou dicko)
Date: Thu, 6 Oct 2011 12:46:28 +0000
Subject: [R-sig-Geo] RSAGA not runing all functions under Linux Ubuntu
	Natty
In-Reply-To: <1867502126.1223.1317876813774.JavaMail.root@zeus>
References: <725054923.1162.1317871668199.JavaMail.root@zeus>
	<1867502126.1223.1317876813774.JavaMail.root@zeus>
Message-ID: <CAP8THHWXVhQ1NTet0C0=WaSbGM=+13DH9m0wndv1pwDvzjbgTA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111006/1b207431/attachment.pl>

From hengl at spatial-analyst.net  Thu Oct  6 14:46:00 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Thu, 6 Oct 2011 14:46:00 +0200
Subject: [R-sig-Geo] spgrass6 and InitGrass
Message-ID: <4E8DA308.8000803@spatial-analyst.net>


I'm having problems using GRASS 6.4.1 from R under windows 7. I've 
installed GRASS and then loaded spgrass6 and tried:

 > library(spgrass6)
Loading required package: XML
GRASS GIS interface loaded with GRASS version: (GRASS not running)
 > GRASS <- 
shortPathName(utils::readRegistry("SOFTWARE\\WOW6432NODE\\GRASS 
6.4.1")$InstallPath)
  > GRASS
[1] "C:\\PROGRA~2\\GRASS6~1.1"
  > initGRASS(gisBase=GRASS, home=tempdir())
Error in initGRASS(gisBase = GRASS, home = tempdir()) :
    Platform variant  not supported

  > paste(R.version$version.string, Sys.info()[["sysname"]], 
Sys.info()[["release"]])
[1] "R version 2.12.2 (2011-02-25) Windows 7 x64"
 > sessionInfo()[["otherPkgs"]][["spgrass6"]][["Version"]]
[1] "0.7-4"

(sorry Roger, it probably means that you have to update the package :(

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001


From hengl at spatial-analyst.net  Thu Oct  6 14:15:56 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Thu, 06 Oct 2011 14:15:56 +0200
Subject: [R-sig-Geo] negative latitudes in coordinates function
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA206DBD5F@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA206DBD5D@BALI.uhd.campus>
	<CANVKczOcC_xUxZx=PZW-h90kvPi=utMeRMahkv8oN2_3XvcxKg@mail.gmail.com>
	<586A4828D7AAA04CA9B258C50A28DA206DBD5F@BALI.uhd.campus>
Message-ID: <4E8D9BFC.7040304@spatial-analyst.net>


Erin,

Southern latitudes and Greenich-west longitudes are negative coordinates 
in the DD system:

 > p1 <- data.frame(lon=-10.5, lat=-10.5)
 > coordinates(p1) <- ~lon+lat
 > proj4string(p1) <- CRS("+proj=longlat +datum=WGS84")
# In the DMS system, geographical coordinates are always positive:
 > dd2dms(coordinates(p1)[,1])
[1] 10d30'W
 > dd2dms(coordinates(p1)[,2], NS=TRUE)
[1] 10d30'S

sp will not accept DD values outside the -180/180 and -90/90 range (of 
course):

 > p1 <- data.frame(lon=-110.5, lat=-110.5)
 > coordinates(p1) <- ~lon+lat
 > proj4string(p1) <- CRS("+proj=longlat +datum=WGS84")
Error in `proj4string<-`(`*tmp*`, value = <S4 object of class "CRS">) :
   Geographical CRS given to non-conformant data

It is a bit trivial question, but things get more complicated once you 
start working with geodetic datums because you can have the same 
geographic coordinates that are ever kilometer away from each other (as 
nicely illustrated in the ASDAR book section 4.1.3 -> 
http://asdar-book.org/book/die.R).

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001


Op 6-10-2011 12:50, Hodgess, Erin schreef:
> Hee hee!
>
> Sorry about this.
>
> Nothing like posting to the list to help you see a dumb mistake!
>
> Thanks!
> erin
>
>
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
>
>
>
> -----Original Message-----
> From: b.rowlingson at googlemail.com on behalf of Barry Rowlingson
> Sent: Thu 10/6/2011 5:41 AM
> To: Hodgess, Erin
> Cc: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] negative latitudes in coordinates function
>
> On Thu, Oct 6, 2011 at 11:36 AM, Hodgess, Erin<HodgessE at uhd.edu>  wrote:
>> Dear R Sig Geo People:
>>
>> This is a goofy question.
>>
>> If I have a data set with negative latitude and and I want to use the coordinates function, what should I be changing on the negative latitude please?
>
>   Nothing? Negative latitudes are perfectly valid in sp. There's a
> whole 'nother hemisphere down there, I'm led to believe...
>
>
> Barry
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From hengl at spatial-analyst.net  Thu Oct  6 14:51:01 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Thu, 6 Oct 2011 14:51:01 +0200
Subject: [R-sig-Geo] Fwd: Re:  negative latitudes in coordinates function
In-Reply-To: <4E8D9BFC.7040304@spatial-analyst.net>
References: <4E8D9BFC.7040304@spatial-analyst.net>
Message-ID: <4E8DA435.6070408@spatial-analyst.net>


Erin,

Southern latitudes and Greenich-west longitudes are negative coordinates 
in the DD system:

> p1 <- data.frame(lon=-10.5, lat=-10.5)
> coordinates(p1) <- ~lon+lat
> proj4string(p1) <- CRS("+proj=longlat +datum=WGS84")
# In the DMS system, geographical coordinates are always positive:
> dd2dms(coordinates(p1)[,1])
[1] 10d30'W
> dd2dms(coordinates(p1)[,2], NS=TRUE)
[1] 10d30'S

sp will not accept DD values outside the -180/180 and -90/90 range (of
course):

> p1 <- data.frame(lon=-110.5, lat=-110.5)
> coordinates(p1) <- ~lon+lat
> proj4string(p1) <- CRS("+proj=longlat +datum=WGS84")
Error in `proj4string<-`(`*tmp*`, value = <S4 object of class "CRS">) :
   Geographical CRS given to non-conformant data

It is a bit trivial question, but things get more complicated once you
start working with geodetic datums because you can have the same
geographic coordinates that are ever kilometer away from each other (as
nicely illustrated in the ASDAR book section 4.1.3 ->
http://asdar-book.org/book/die.R).

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001


Op 6-10-2011 12:50, Hodgess, Erin schreef:
> Hee hee!
>
> Sorry about this.
>
> Nothing like posting to the list to help you see a dumb mistake!
>
> Thanks!
> erin
>
>
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
>
>
>
> -----Original Message-----
> From: b.rowlingson at googlemail.com on behalf of Barry Rowlingson
> Sent: Thu 10/6/2011 5:41 AM
> To: Hodgess, Erin
> Cc: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] negative latitudes in coordinates function
>
> On Thu, Oct 6, 2011 at 11:36 AM, Hodgess, Erin<HodgessE at uhd.edu>  wrote:
>> Dear R Sig Geo People:
>>
>> This is a goofy question.
>>
>> If I have a data set with negative latitude and and I want to use the coordinates function, what should I be changing on the negative latitude please?
>
>   Nothing? Negative latitudes are perfectly valid in sp. There's a
> whole 'nother hemisphere down there, I'm led to believe...
>
>
> Barry
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From matteo.mattiuzzi at boku.ac.at  Thu Oct  6 14:55:16 2011
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 06 Oct 2011 14:55:16 +0200
Subject: [R-sig-Geo] Antw: Re:  find raster cells with non-NA values
In-Reply-To: <1317905140487-6865787.post@n2.nabble.com>
References: <1317904256699-6865759.post@n2.nabble.com>
	<BFCE57D0BE7CBB42A581347DE375AF9A0278F7@UFEXCH-MBXN03.ad.ufl.edu>
	<1317905140487-6865787.post@n2.nabble.com>
Message-ID: <4E8DC1540200002700010926@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111006/d56dab2d/attachment.pl>

From horning at amnh.org  Thu Oct  6 15:18:00 2011
From: horning at amnh.org (Ned Horning)
Date: Thu, 6 Oct 2011 09:18:00 -0400
Subject: [R-sig-Geo] Multiple NAvalue for extract
Message-ID: <4E8DAA88.4070505@amnh.org>

Hi -

I am trying to extract values from image cells using the raster package 
extract function:
classCellValues <- extract(classImage, classCellNumbers)

The image that I am using has two do-data values that I set using 
NAvalue. When I run extract I get lot of the following warnings:

In if (x at file@nodatavalue < 0) { ... :
   the condition has length > 1 and only the first element will be used

The output from my script seems to be fine but I would like to know if 
there is a problem using multiple values for NAvalue.

I am using raster version 1.9-19 downloaded from the CRAN.

Thanks in advance for any help,

Ned


From Roger.Bivand at nhh.no  Thu Oct  6 15:19:25 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 6 Oct 2011 15:19:25 +0200
Subject: [R-sig-Geo] spgrass6 and InitGrass
In-Reply-To: <4E8DA308.8000803@spatial-analyst.net>
References: <4E8DA308.8000803@spatial-analyst.net>
Message-ID: <alpine.LRH.2.00.1110061511150.3642@reclus.nhh.no>

On Thu, 6 Oct 2011, Tomislav Hengl wrote:

>
> I'm having problems using GRASS 6.4.1 from R under windows 7. I've installed 
> GRASS and then loaded spgrass6 and tried:
>
>> library(spgrass6)
> Loading required package: XML
> GRASS GIS interface loaded with GRASS version: (GRASS not running)
>> GRASS <- shortPathName(utils::readRegistry("SOFTWARE\\WOW6432NODE\\GRASS 
> 6.4.1")$InstallPath)
> > GRASS
> [1] "C:\\PROGRA~2\\GRASS6~1.1"
> > initGRASS(gisBase=GRASS, home=tempdir())
> Error in initGRASS(gisBase = GRASS, home = tempdir()) :
>   Platform variant  not supported

This means that we need to check deeper. What do:

.Platform$OS.type
Sys.getenv("OSTYPE")
library(spgrass6)
get("SYS", envir=spgrass6:::.GRASS_CACHE)

report? If the first is the string "windows", and the second is "", the 
internal variable get("SYS", envir=spgrass6:::.GRASS_CACHE) is set to 
"WinNat". I suspect that one or other of these doesn't hold, and that SYS 
isn't being set to "WinNat" - on OSX and Linux, it is set to "unix"; 
"msys" and "cygwin" also exist, but are not supported for initGRASS(). I 
only have access (now) to 32-bit XP.

Roger


>
> > paste(R.version$version.string, Sys.info()[["sysname"]], 
> Sys.info()[["release"]])
> [1] "R version 2.12.2 (2011-02-25) Windows 7 x64"
>> sessionInfo()[["otherPkgs"]][["spgrass6"]][["Version"]]
> [1] "0.7-4"
>
> (sorry Roger, it probably means that you have to update the package :(
>
> T. Hengl
> http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From brenning at uwaterloo.ca  Thu Oct  6 15:18:58 2011
From: brenning at uwaterloo.ca (Alexander Brenning)
Date: Thu, 06 Oct 2011 09:18:58 -0400
Subject: [R-sig-Geo] RSAGA not runing all functions under Linux Ubuntu Natty
In-Reply-To: <mailman.13.1317895204.21152.r-sig-geo@r-project.org>
References: <mailman.13.1317895204.21152.r-sig-geo@r-project.org>
Message-ID: <4E8DAAC2.70502@uwaterloo.ca>

Hola Alberto,

the short answer is that this doesn't seem to be an RSAGA problem but a 
SAGA GIS problem; however, since you are using SAGA GIS 2.0.4 I would 
first recommend updating to the most recent release before submitting a 
request to SAGA's sourceforge forums.

I tried to reproduce the error with RSAGA 0.92-2 and SAGA GIS 2.0.4 (as 
well as 2.0.7 - both on Windows, however) and did not get an error. 
Interestingly, I also get "Grid: [not set]" but then "Save grid: 
test.sgrd..." and the SGRD was in fact saved correctly.

So maybe there's an issue with the linux binaries you are using...

In any case it can't really be an RSAGA error since you are getting the 
same error when running the module from the command line? (saga_cmd is 
not part of RSAGA but of SAGA GIS)

I hope updating to SAGA GIS 2.0.7 will resolve this issue. Good luck! If 
not, please report to SAGA's sourceforge project, and don't hesitate to 
get back to me if you do find any issues with RSAGA on Linux.

Best,
   Alex


> Date: Wed, 5 Oct 2011 23:53:33 -0500 (CDT) From: Alberto Gomez-Tagle
> Gomez<gomeztjr at umich.mx> To: r-sig-geo at r-project.org Subject:
> [R-sig-Geo] RSAGA not runing all functions under Linux Ubuntu Natty
> Message-ID:<1867502126.1223.1317876813774.JavaMail.root at zeus>
> Content-Type: text/plain; charset=utf-8
>
> Dear all!!
>
> I have R-2.13.2. and SAGA up and running in Linux (Ubuntu, natty), I
> installed SAGA using synaptic. I'm not a newbie in R neither GIS
> processing. I have been an ESRI ArcView/ArcGIS and ILWIS and Idrisi
> user for several years. Now I intend to start teaching GIS at my
> university using open-source GIS, so far GRASS (stand alone and
> spgrass6) is going smooth.
>
> I have gone through some excercises with SAGA stand alone and goes
> very smooth. Nevertheless, it does not import *.asc files into SAGA
> When doing so I get the next messages from the command line:
>
> [2011-10-05/23:32:03] Executing module: Import ESRI Arc/Info Grid
> Parameters Grid: [not set] File:
> /home/agt/Documentos/Spatial-Analyst.net/DEM25m.asc
> [2011-10-05/23:32:03] Module execution failed
>
> Then I tried to do the same using RSAGA, and following up several
> excercises posted in the web for SAGA GIS (Spatial Analyst.net)
> NGS.R (Geomorphometry.org). There seems to be some sort of problem
> with RSAGA communicating with SAGA GIS or the import module is not
> working at all. Although some SAGA modules appear to be runing right,
> some other seem to fail, right after downloading and unziping the
> files (examples in the next lines):
>
>> rsaga.env()
> $workspace [1] "." $cmd [1] "saga_cmd" $path [1] "/usr/bin" $modules
> [1] "/usr/lib/saga" $version [1] "2.0.4"
>
>
>> rsaga.esri.to.sgrd(in.grids="DEM25m.asc", out.sgrd="dem25m.sgrd",
>> in.path=getwd())
>
> SAGA CMD 2.0.4 Load table:
> /home/agt/Documentos/Spatial-Analyst.net/saga.srs... failed library
> path:	/usr/lib/saga library name:	libio_grid module name :	Import
> ESRI Arc/Info Grid author      :	(c) 2007 by O.Conrad
>
> Parameters Grid: [not set] File:
> /home/agt/Documentos/Spatial-Analyst.net/DEM25m.asc
>
> error: executing module [Import ESRI Arc/Info Grid] Mensajes de aviso
> perdidos comando ejecutado ''/usr/bin/saga_cmd' libio_grid 'Import
> ESRI Arc/Info Grid' -FILE
> '/home/agt/Documentos/Spatial-Analyst.net/DEM25m.asc' -GRID
> 'dem25m.sgrd'' tiene estatus 1
>>
>
> What exactly means Grid:[not set]?, Do any one have some idea on what
> is going wrong here?, How do I solve it?. Did I miss something during
> the installation of SAGA GIS? Would it be better to install SAGA from
> a terminal?
>
>
>
>
> Best regards
>
> Alberto GT
>

-- 
Alexander Brenning
brenning at uwaterloo.ca - T +1-519-888-4567 ext 35783
Department of Geography and Environmental Management
University of Waterloo
200 University Ave. W - Waterloo, ON - Canada N2L 3G1
http://www.environment.uwaterloo.ca/geography/faculty/brenning/


From hengl at spatial-analyst.net  Thu Oct  6 15:23:15 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Thu, 6 Oct 2011 15:23:15 +0200
Subject: [R-sig-Geo] spgrass6 and InitGrass
In-Reply-To: <alpine.LRH.2.00.1110061511150.3642@reclus.nhh.no>
References: <4E8DA308.8000803@spatial-analyst.net>
	<alpine.LRH.2.00.1110061511150.3642@reclus.nhh.no>
Message-ID: <4E8DABC3.6030904@spatial-analyst.net>


Op 6-10-2011 15:19, Roger Bivand schreef:
> On Thu, 6 Oct 2011, Tomislav Hengl wrote:
>
>>
>> I'm having problems using GRASS 6.4.1 from R under windows 7. I've
>> installed GRASS and then loaded spgrass6 and tried:
>>
>>> library(spgrass6)
>> Loading required package: XML
>> GRASS GIS interface loaded with GRASS version: (GRASS not running)
>>> GRASS <- shortPathName(utils::readRegistry("SOFTWARE\\WOW6432NODE\\GRASS
>> 6.4.1")$InstallPath)
>> > GRASS
>> [1] "C:\\PROGRA~2\\GRASS6~1.1"
>> > initGRASS(gisBase=GRASS, home=tempdir())
>> Error in initGRASS(gisBase = GRASS, home = tempdir()) :
>> Platform variant not supported
>
> This means that we need to check deeper. What do:
>
> .Platform$OS.type
> Sys.getenv("OSTYPE")
> library(spgrass6)
> get("SYS", envir=spgrass6:::.GRASS_CACHE)
>
> report? If the first is the string "windows", and the second is "", the
> internal variable get("SYS", envir=spgrass6:::.GRASS_CACHE) is set to
> "WinNat". I suspect that one or other of these doesn't hold, and that
> SYS isn't being set to "WinNat" - on OSX and Linux, it is set to "unix";
> "msys" and "cygwin" also exist, but are not supported for initGRASS(). I
> only have access (now) to 32-bit XP.

I get:

 > .Platform$OS.type
[1] "windows"
 > Sys.getenv("OSTYPE")
    OSTYPE
"US_W764"
 > library(spgrass6)
Loading required package: XML
GRASS GIS interface loaded with GRASS version: (GRASS not running)
 > get("SYS", envir=spgrass6:::.GRASS_CACHE)
[1] ""

I could also try installing 32-bit GRASS GIS....

>
> Roger
>
>
>>
>> > paste(R.version$version.string, Sys.info()[["sysname"]],
>> Sys.info()[["release"]])
>> [1] "R version 2.12.2 (2011-02-25) Windows 7 x64"
>>> sessionInfo()[["otherPkgs"]][["spgrass6"]][["Version"]]
>> [1] "0.7-4"
>>
>> (sorry Roger, it probably means that you have to update the package :(
>>
>> T. Hengl
>> http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


From Roger.Bivand at nhh.no  Thu Oct  6 15:51:19 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 6 Oct 2011 15:51:19 +0200
Subject: [R-sig-Geo] spgrass6 and InitGrass
In-Reply-To: <4E8DABC3.6030904@spatial-analyst.net>
References: <4E8DA308.8000803@spatial-analyst.net>
	<alpine.LRH.2.00.1110061511150.3642@reclus.nhh.no>
	<4E8DABC3.6030904@spatial-analyst.net>
Message-ID: <alpine.LRH.2.00.1110061540200.3642@reclus.nhh.no>

On Thu, 6 Oct 2011, Tomislav Hengl wrote:

>
> Op 6-10-2011 15:19, Roger Bivand schreef:
>> On Thu, 6 Oct 2011, Tomislav Hengl wrote:
>> 
>>> 
>>> I'm having problems using GRASS 6.4.1 from R under windows 7. I've
>>> installed GRASS and then loaded spgrass6 and tried:
>>> 
>>>> library(spgrass6)
>>> Loading required package: XML
>>> GRASS GIS interface loaded with GRASS version: (GRASS not running)
>>>> GRASS <- shortPathName(utils::readRegistry("SOFTWARE\\WOW6432NODE\\GRASS
>>> 6.4.1")$InstallPath)
>>> > GRASS
>>> [1] "C:\\PROGRA~2\\GRASS6~1.1"
>>> > initGRASS(gisBase=GRASS, home=tempdir())
>>> Error in initGRASS(gisBase = GRASS, home = tempdir()) :
>>> Platform variant not supported
>> 
>> This means that we need to check deeper. What do:
>> 
>> .Platform$OS.type
>> Sys.getenv("OSTYPE")
>> library(spgrass6)
>> get("SYS", envir=spgrass6:::.GRASS_CACHE)
>> 
>> report? If the first is the string "windows", and the second is "", the
>> internal variable get("SYS", envir=spgrass6:::.GRASS_CACHE) is set to
>> "WinNat". I suspect that one or other of these doesn't hold, and that
>> SYS isn't being set to "WinNat" - on OSX and Linux, it is set to "unix";
>> "msys" and "cygwin" also exist, but are not supported for initGRASS(). I
>> only have access (now) to 32-bit XP.
>
> I get:
>
>> .Platform$OS.type
> [1] "windows"
>> Sys.getenv("OSTYPE")
>   OSTYPE
> "US_W764"
>> library(spgrass6)
> Loading required package: XML
> GRASS GIS interface loaded with GRASS version: (GRASS not running)
>> get("SYS", envir=spgrass6:::.GRASS_CACHE)
> [1] ""
>
> I could also try installing 32-bit GRASS GIS....

No, that wouldn't help, I'm afraid. Until I research/fix this, can I ask 
anyone else using Windows and spgrass6 to email me off-list with the 
output of:

R.version
.Platform$OS.type
Sys.getenv("OSTYPE")

and your informal description (Windows 7, 64-bit ... or whatever) It looks 
as though the "OSTYPE" environment variable is now being set, and is 
carrying locale, Windoes version, and architecture codes.

A work-around is to set the cached variable directly:

get("SYS", envir=spgrass6:::.GRASS_CACHE)
assign("SYS", "WinNat", envir=spgrass6:::.GRASS_CACHE)
get("SYS", envir=spgrass6:::.GRASS_CACHE)

immediately after loading spgrass6. Then initGRASS() will branch 
correctly, and should put things in the correct place.

Roger

>
>> 
>> Roger
>> 
>> 
>>> 
>>> > paste(R.version$version.string, Sys.info()[["sysname"]],
>>> Sys.info()[["release"]])
>>> [1] "R version 2.12.2 (2011-02-25) Windows 7 x64"
>>>> sessionInfo()[["otherPkgs"]][["spgrass6"]][["Version"]]
>>> [1] "0.7-4"
>>> 
>>> (sorry Roger, it probably means that you have to update the package :(
>>> 
>>> T. Hengl
>>> http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>> 
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From r.hijmans at gmail.com  Thu Oct  6 18:05:09 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 6 Oct 2011 09:05:09 -0700
Subject: [R-sig-Geo] Logarithmic legend
In-Reply-To: <4E8D6CBA.8010709@knmi.nl>
References: <CANkFkEdRqcdPD+mPLkLt5QBfV5uG5MdE9CyJ7+GhtXF2XBG9Xg@mail.gmail.com>
	<4E8D6CBA.8010709@knmi.nl>
Message-ID: <CANtt_hxwjABrA1cbH1pHCA8ijdJtBfO7Vn+fREuJ6eWhTWvmow@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111006/ed2b2377/attachment.pl>

From a.mosnier at gmail.com  Thu Oct  6 19:04:36 2011
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Thu, 6 Oct 2011 13:04:36 -0400
Subject: [R-sig-Geo] Logarithmic legend
In-Reply-To: <4E8D6CBA.8010709@knmi.nl>
References: <CANkFkEdRqcdPD+mPLkLt5QBfV5uG5MdE9CyJ7+GhtXF2XBG9Xg@mail.gmail.com>
	<4E8D6CBA.8010709@knmi.nl>
Message-ID: <CANkFkEdbFTwjzTBv+cR935vaq3+T0KegeqTb-Nre2OgSkvzc3Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111006/85ff63a9/attachment.pl>

From gomeztjr at umich.mx  Thu Oct  6 21:58:32 2011
From: gomeztjr at umich.mx (Alberto Gomez-Tagle Gomez)
Date: Thu, 6 Oct 2011 14:58:32 -0500 (CDT)
Subject: [R-sig-Geo] RSAGA not runing all functions under Linux Ubuntu
 Natty
In-Reply-To: <4E8DAAC2.70502@uwaterloo.ca>
Message-ID: <220382513.1053.1317931112591.JavaMail.root@zeus>

Thank you for your kind answers

The problem is solved. As Alex mentioned it was a problem of SAGA more than RSAGA and the binaries I had installed. It appears that neither Synaptic or Ubuntu Software Center install an all functional SAGA GIS. Repositories defined there may miss something.

I downloaded the sources and compiled from scratch following up instructions from Sourceforge net:

http://sourceforge.net/apps/trac/saga-gis/wiki/Compiling%20a%20Linux%20Unicode%20version

Took a while but it pays off.
I smiled when I read

> rsaga.esri.to.sgrd(in.grids="DEM25m.asc", out.sgrds="dem25m.sgrd", in.path=getwd())

error: module
library path:	/usr/local/lib/saga
library name:	libio_grid
module name :	Import ESRI Arc/Info Grid
author      :	O.Conrad (c) 2007

Parameters

Grid: [not set]
File: /home/alberto/grassdata/DEM25m.asc
Target Grid Type: Floating Point (4 byte)
NoData Value: Input File's NoData Value
User Defined NoData Value: -99999.000000
Save grid: dem25m.sgrd...
ready

And was then able to perform further analysis with it.

AGT




----- Mensaje original -----
De: "Alexander Brenning" <brenning at uwaterloo.ca>
Para: r-sig-geo at r-project.org, "Alberto Gomez-Tagle Gomez" <gomeztjr at umich.mx>
Enviados: Jueves, 6 de Octubre 2011 8:18:58
Asunto: [R-sig-Geo] RSAGA not runing all functions under Linux Ubuntu Natty

Hola Alberto,

the short answer is that this doesn't seem to be an RSAGA problem but a 
SAGA GIS problem; however, since you are using SAGA GIS 2.0.4 I would 
first recommend updating to the most recent release before submitting a 
request to SAGA's sourceforge forums.

I tried to reproduce the error with RSAGA 0.92-2 and SAGA GIS 2.0.4 (as 
well as 2.0.7 - both on Windows, however) and did not get an error. 
Interestingly, I also get "Grid: [not set]" but then "Save grid: 
test.sgrd..." and the SGRD was in fact saved correctly.

So maybe there's an issue with the linux binaries you are using...

In any case it can't really be an RSAGA error since you are getting the 
same error when running the module from the command line? (saga_cmd is 
not part of RSAGA but of SAGA GIS)

I hope updating to SAGA GIS 2.0.7 will resolve this issue. Good luck! If 
not, please report to SAGA's sourceforge project, and don't hesitate to 
get back to me if you do find any issues with RSAGA on Linux.

Best,
   Alex



-- 
Alexander Brenning
brenning at uwaterloo.ca - T +1-519-888-4567 ext 35783
Department of Geography and Environmental Management
University of Waterloo
200 University Ave. W - Waterloo, ON - Canada N2L 3G1
http://www.environment.uwaterloo.ca/geography/faculty/brenning/


From edzer.pebesma at uni-muenster.de  Fri Oct  7 10:40:38 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 07 Oct 2011 10:40:38 +0200
Subject: [R-sig-Geo] about ST kriging
In-Reply-To: <002001cc7924$9fb5d820$df218860$@edu.tr>
References: <001101cc7775$c6f92f00$54eb8d00$@edu.tr>
	<4E79DC85.7050808@uni-muenster.de>
	<001f01cc791c$262cfef0$7286fcd0$@edu.tr>
	<4E7B204C.30001@uni-muenster.de>
	<002001cc7924$9fb5d820$df218860$@edu.tr>
Message-ID: <4E8EBB06.6070608@uni-muenster.de>

I looked at your data and scripts (off-list), and found the following:

You're trying to use krigeST with an STSDF object. krigeST was
designed to exploit separability of spatio-temporal covariance
models. This implies that the space-time layout needs to be
full, i.e. STFDF. When looking at the space-time layout of your
observations (I tried plot(w at index) for this), you are not very
close to a full layout, so that may not be feasible.

You're running out of memory because of your size of newdata
(prediction locations), which has 1.2M nodes. krigeST computes
the covariance of all observations with prediction nodes, so
that is a 5364 x 1217697 matrix, which would require 49 Gb.
The fact that krigeST does not warn you for any of this is an
omission on my side, I will change that.

The options then are:
1. use krige0, which does global kriging; this will need to solve
a system of 5364 x 5364, which might work out fine; demo(wind) has,
AFAICR, an example of doing this for the Irish wind data and a
separable covariance. If you run into memory problems try to not
pass the full prediction grid at once, but in smaller pieces;
demo(wind) also does this.
2. use krige, possibly with a local search neighbourhood, and a
metric ("3D space/time") variogram; if you use local neighbourhoods,
it makes sens to rescale time such that space and time have the
same range (in numeric values).

I hope to write these things down more clearly, in a vignette
containing examples, soon.

On 09/22/2011 02:39 PM, P?nar Aslantas Bostan wrote:
> Edzer, I have 256 meteorological station and 39 year value.
>
>> dim(w)
> [1] 256  39   1
>
> Before I tried only spatial kriging and I did not get memory.size error. Just a moment ago, I used another computer (64-bit Windows and 6 GB RAM), again I got the same error.
>
> -----Original Message-----
> From: Edzer Pebesma [mailto:edzer.pebesma at uni-muenster.de]
> Sent: Thursday, September 22, 2011 2:47 PM
> To: P?nar Aslantas Bostan
> Cc: r-sig-geo at r-project.org
> Subject: Re: [R-sig-Geo] about ST kriging
>
> Pinar, what are the dimensions (space and time) of your data, i.e. what
> does dim(w) return?
>
> Have you tried kriging with a (spatial and/or temporal) subset?
>
> On 09/22/2011 01:38 PM, P?nar Aslantas Bostan wrote:
>> Hi Edzer,
>>
>> Thank you very much for your mail. I found two records have identical location, but it is not my fault because I checked the original source data and it is erroneous.
>>
>> Now I have another problem; R gives another error message:
>> Error: cannot allocate vector of size 95.4 Mb
>>
>> My computer includes 32-bit Windows and  3,5 GB RAM. I am not sure if I install 64-bit Windows, then the problem is solved? Or maybe I should minimize the data. Do you have any idea about it?
>>
>> Best wishes,
>> Pinar
>>
>> -----Original Message-----
>> From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Edzer Pebesma
>> Sent: Wednesday, September 21, 2011 3:46 PM
>> To: r-sig-geo at r-project.org
>> Subject: Re: [R-sig-Geo] about ST kriging
>>
>> Hi Pinar,
>>
>> it is not clear which variogram model you pass, or how your data are
>> laid out in space and time.
>>
>> Possible causes for a non-positive definite covariance matrix include:
>>
>> - a variogram model with (nearly) perfect correlation
>> - duplicate observations (observations having identical location AND time)
>> - an invalid variogram model
>>
>> A small, reproducible example (data + script) would help identify the
>> problem.
>>
>> Best regards,
>> --
>> Edzer
>>
>> On 09/20/2011 11:15 AM, P?nar Aslantas Bostan wrote:
>>> Dear all,
>>>
>>> I am working about space-time kriging. Before I asked again about ST kriging
>>> but now the problem is
>>> different and I could not overcome it!
>>>
>>> During kriging operation I got this error:
>>>
>>>> pred = krigeST(prec~1, w, STS(grid,time,index), v)
>>> Error in chol.default(A$Sm, LINPACK = TRUE) :
>>>    non-positive definite matrix in 'chol'
>>>
>>> I explained the data set below:
>>>
>>> # prec is annual precipitation measured from 257 meteorological stations
>>>
>>> # w is STSDF object
>>>> summary(w)
>>> Object of class STSDF
>>> [[Spatial:]]
>>> Object of class SpatialPoints
>>> Coordinates:
>>>           min     max
>>> Xnew  140556 1730472
>>> Ynew 4309064 4971309
>>> Is projected: NA
>>> proj4string : [NA]
>>> Number of points: 257
>>> [[Temporal:]]
>>>       Index                      object at time
>>>   Min.   :1970-01-01 12:00:00   Min.   : 1.0
>>>   1st Qu.:1979-07-03 00:00:00   1st Qu.:10.5
>>>   Median :1989-01-01 12:00:00   Median :20.0
>>>   Mean   :1989-01-01 02:46:09   Mean   :20.0
>>>   3rd Qu.:1998-07-03 00:00:00   3rd Qu.:29.5
>>>   Max.   :2008-01-01 12:00:00   Max.   :39.0
>>> [[Data attributes:]]
>>>     Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>>>    114.5   413.7   533.6   633.0   735.6  3332.0
>>>
>>> # I used grid to obtain predictions over it. It has 25 km spatial resolution
>>>
>>> # time is temporal entity of study. It contains 39 annual observation.
>>>
>>> # index is required for STSDF, and I used this code to create index.
>>>> index<- cbind(as.integer(as.factor(data$Station)),
>>> as.integer(as.factor(data$Year)))
>>>
>>> # v is space-time variogram
>>>
>>> How can I solve the problem?
>>> Thank you in advance!
>>>
>>>
>>> Pinar Aslantas Bostan
>>> Research Assistant
>>> Department of Geodetic and
>>> Geographic Information Technologies (GGIT) Middle East Technical University
>>> 06531 Ankara/TURKEY
>>> aslantas at metu.edu.tr
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From rhunne at mac.com  Fri Oct  7 15:22:51 2011
From: rhunne at mac.com (Robin W Hunnewell)
Date: Fri, 07 Oct 2011 13:22:51 +0000 (GMT)
Subject: [R-sig-Geo] NA values when fitting IPP model involving a spatial
 covariate {spatstat}
Message-ID: <8658ea49-75d9-e0c1-bab9-ee7fd518bb3b@me.com>

Dear all, 

I'm working with function 'ppm' in pkg: spatstat; the aim is to fit IPP (inhomogeneous pt process) model to a point pattern.
It's worked well before, but recently have tried it with an additional covariate -- spatially referenced and stored as an image object.
When I go to run the inhom point process model, the following warning appears. 'B10' is my point pattern object, 'flightPix' is the spatial covariate image object.

> Q <- ppm(B10, ~flights, covariates = list(flights = flightPix))
Warning message:
Values of the covariate ?flights? were NA or undefined at 0.08% (2 out of 2493) of the quadrature points.?Occurred while executing: ppm(B10, ~flights, covariates = list(flights = flightPix)) 

# then when I look at summary output for the IPP model, it says:
Problem:
 Values of the covariate ?flights? were NA or undefined at 0.08% (2 out of 2493) of the quadrature points 

Is there a way solve this problem? Thanks for any help!!
Robin
-------------
Department of Biology
University of New Brunswick
Fredericton, NB  
Canada 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111007/188608a5/attachment.html>

From horning at amnh.org  Fri Oct  7 22:59:44 2011
From: horning at amnh.org (Ned Horning)
Date: Fri, 7 Oct 2011 16:59:44 -0400
Subject: [R-sig-Geo] Problem with gain/offset and sampleRegular
Message-ID: <4E8F6840.9020306@amnh.org>

Hi - I am working on a topographic correction script and am having a 
problem with the gain and offset settings.

This is how I set the gain and offset:
gainVal <- 0.108078
offsetVal <- -0.37
gain(satImage) <- gainVal
offs(satImage) <- offsetVal

When I look at the gain/offset values they look fine:
 > gain(satImage)
[1] 0.108078
 > offs(satImage)
[1] -0.37

When I get a bunch of samples using sampleRegular (or sampleRandom) the 
retrieved values are not correct:
 > satImageSamps <- sampleRegular(satImage, numSamps, cells=TRUE)
 > head(satImageSamps)
      cell p125r49_5t19890217_subset
[1,] 1504                0.41935178
[2,] 1511                0.48943690
[3,] 1518                0.51279861
[4,] 1525                0.40767093
[5,] 1532                0.06892616
[6,] 1539                0.30254324

But if I extract the value for the first cell in satImageSamps the value 
looks like what I would expect:
 > extract(satImage, 1504)
6.871226

If I run the script without altering the gain and offset values I still 
get different values for the same cell number using sampleRegular and 
extract but they are roughly the same. I have a similar problem using 
sampleRandom - the value returned for a cell is different than what I 
get using extract with the cell number.

Is this a bug or am I doing something wrong?

I am using raster version 1.9-19 downloaded from the CRAN.

All the best,

Ned


From r.turner at auckland.ac.nz  Fri Oct  7 23:17:14 2011
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 08 Oct 2011 10:17:14 +1300
Subject: [R-sig-Geo] NA values when fitting IPP model involving a
 spatial covariate {spatstat}
In-Reply-To: <8658ea49-75d9-e0c1-bab9-ee7fd518bb3b@me.com>
References: <8658ea49-75d9-e0c1-bab9-ee7fd518bb3b@me.com>
Message-ID: <4E8F6C5A.2020800@auckland.ac.nz>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111008/ef86dde1/attachment.pl>

From karaka at ifc.cnr.it  Mon Oct 10 16:21:09 2011
From: karaka at ifc.cnr.it (Matilde Karakachoff)
Date: Mon, 10 Oct 2011 16:21:09 +0200
Subject: [R-sig-Geo] "one-dimensional" spatial point process
Message-ID: <000001cc8757$db9c9b80$92d5d280$@ifc.cnr.it>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111010/6d7fca5a/attachment.pl>

From macqueen1 at llnl.gov  Mon Oct 10 20:35:14 2011
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 10 Oct 2011 11:35:14 -0700
Subject: [R-sig-Geo] rbind of SpatialPolygonDataFrame objects is different
 with or without rgdal package
Message-ID: <CAB888F2.76568%macqueen1@llnl.gov>

It appears that when I rbind() a pair of SpatialPolygonDataFrame objects
when the rgdal package has been loaded the resulting projection string
gets an embedded space character, whereas without rgdal it does not. The
space character breaks further use of rbind(). I don't think it matters
which one is first in the search path (I've tried it both ways).



Here's an example.

I have three simple spatial polygon data frame objects; each consists of a
single polygon. They have the same projection. I can send them as an
attachment if requested.

## in a new R session (objects created in an earlier session):

> require(sp)
Loading required package: sp

> proj4string(ex1.sp) == proj4string(ex2.sp)
[1] TRUE

> proj4string(ex1.sp) == proj4string(ex3.sp)
[1] TRUE

> tmp1 <- rbind(ex1.sp, spChFIDs(ex2.sp,'ex2'))

> proj4string(ex1.sp) == proj4string(tmp1)
[1] TRUE

> sessionInfo()
R version 2.13.1 (2011-07-08)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] sp_0.9-88

loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-30


> require(rgdal)
Loading required package: rgdal
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.8.0, released 2011/01/12
Path to GDAL shared files:
/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rgdal/gdal
Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
Path to PROJ.4 shared files:
/Library/Frameworks/R.framework/Versions/2.13/Resources/library/rgdal/proj



> tmp2 <- rbind(ex1.sp, spChFIDs(ex2.sp,'ex2'))

> proj4string(ex1.sp) == proj4string(tmp2)
[1] FALSE

> proj4string(ex1.sp)
[1] "+proj=lcc +lat_1=38.43333333333333 +lat_2=37.06666666666667
+lat_0=36.5 +lon_0=-120.5 +x_0=2000000.0001016 +y_0=500000.0001016001
+ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"

## note the leading space character
> proj4string(tmp2)
[1] " +proj=lcc +lat_1=38.43333333333333 +lat_2=37.06666666666667
+lat_0=36.5 +lon_0=-120.5 +x_0=2000000.0001016 +y_0=500000.0001016001
+ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs
+towgs84=0,0,0"

> tmp3 <- rbind(tmp2, spChFIDs(ex3.sp,'ex3'))
Error in checkCRSequal(dots) : coordinate reference systems differ


> sessionInfo()
R version 2.13.1 (2011-07-08)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] rgdal_0.7-1 sp_0.9-88

loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-30
> 



> str(ex1.sp)
Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame': 1 obs. of  1 variable:
  .. ..$ name: Factor w/ 1 level "example1": 1
  ..@ polygons   :List of 1
  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots
  .. .. .. ..@ Polygons :List of 1
  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
  .. .. .. .. .. .. ..@ labpt  : num [1:2] 6223669 2081123
  .. .. .. .. .. .. ..@ area   : num 20287432
  .. .. .. .. .. .. ..@ hole   : logi FALSE
  .. .. .. .. .. .. ..@ ringDir: int 1
  .. .. .. .. .. .. ..@ coords : num [1:8, 1:2] 6221449 6226373 6225988
6223664 6223594 ...
  .. .. .. ..@ plotOrder: int 1
  .. .. .. ..@ labpt    : num [1:2] 6223669 2081123
  .. .. .. ..@ ID       : chr "1"
  .. .. .. ..@ area     : num 20287432
  ..@ plotOrder  : int 1
  ..@ bbox       : num [1:2, 1:2] 6220680 2078695 6226373 2083511
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:2] "x" "y"
  .. .. ..$ : chr [1:2] "min" "max"
  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
  .. .. ..@ projargs: chr "+proj=lcc +lat_1=38.43333333333333
+lat_2=37.06666666666667 +lat_0=36.5 +lon_0=-120.5 +x_0=2000000.0001016
+y_0=500000.00010160"| __truncated__





-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062


From famuvie at alumni.uv.es  Mon Oct 10 20:46:17 2011
From: famuvie at alumni.uv.es (=?windows-1252?Q?Facundo_Mu=F1oz?=)
Date: Mon, 10 Oct 2011 14:46:17 -0400
Subject: [R-sig-Geo] adjacent polygons
Message-ID: <4E933D79.2000806@alumni.uv.es>


Hi people,

I have a shapefile of polygons (buildings), and I would like to 
calculate, for each one, the length of the shared border with some other 
building.
Or, conversely, how much of its border is 'exterior'.
I can't figure out how to extract that info.

Any idea?

Thanks.
?acu.-


From Roger.Bivand at nhh.no  Mon Oct 10 22:04:00 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 10 Oct 2011 22:04:00 +0200 (CEST)
Subject: [R-sig-Geo] rbind of SpatialPolygonDataFrame objects is
 different with or without rgdal package
In-Reply-To: <CAB888F2.76568%macqueen1@llnl.gov>
References: <CAB888F2.76568%macqueen1@llnl.gov>
Message-ID: <alpine.LRH.2.00.1110102137070.23130@reclus.nhh.no>

On Mon, 10 Oct 2011, MacQueen, Don wrote:

> It appears that when I rbind() a pair of SpatialPolygonDataFrame objects
> when the rgdal package has been loaded the resulting projection string
> gets an embedded space character, whereas without rgdal it does not. The
> space character breaks further use of rbind(). I don't think it matters
> which one is first in the search path (I've tried it both ways).
>

This is a result of our choice a long time ago not to package PROJ.4 with 
sp but with rgdal (GDAL depends on PROJ.4, so it had to be there anyway). 
Consequently, code checking the validity of the PROJ.4 string used to set 
the CRS object only does a cursory job when only sp is loaded, but calls 
out to PROJ.4 when rgdal is loaded. PROJ.4 replies and a space gets 
prepended (which might be fixable), and in your case also appends a 
+towgs84=0,0,0, which isn't fixable. If rgdal is loaded and the CRS object 
is validated, it may be normalised in this way by PROJ.4 using 
pj_get_def() in that library, which appears to insert the initial space.

rbind() in sp checks the projection, so makes the change when and only 
when rgdal is loaded. spRbind() in maptools - arguably wrongly - does not 
check the projection, so works the same on pairs but not dotlists of 
objects whether or not rgdal is loaded.

So the workaround may be to load rgdal and normalise all the affected 
objects with CRSargs().

It isn't obvious how to do this right, I'm afraid.

Hope this clarifies,

Roger

>
>
> Here's an example.
>
> I have three simple spatial polygon data frame objects; each consists of a
> single polygon. They have the same projection. I can send them as an
> attachment if requested.
>
> ## in a new R session (objects created in an earlier session):
>
>> require(sp)
> Loading required package: sp
>
>> proj4string(ex1.sp) == proj4string(ex2.sp)
> [1] TRUE
>
>> proj4string(ex1.sp) == proj4string(ex3.sp)
> [1] TRUE
>
>> tmp1 <- rbind(ex1.sp, spChFIDs(ex2.sp,'ex2'))
>
>> proj4string(ex1.sp) == proj4string(tmp1)
> [1] TRUE
>
>> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] sp_0.9-88
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1     lattice_0.19-30
>
>
>> require(rgdal)
> Loading required package: rgdal
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.8.0, released 2011/01/12
> Path to GDAL shared files:
> /Library/Frameworks/R.framework/Versions/2.13/Resources/library/rgdal/gdal
> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
> Path to PROJ.4 shared files:
> /Library/Frameworks/R.framework/Versions/2.13/Resources/library/rgdal/proj
>
>
>
>> tmp2 <- rbind(ex1.sp, spChFIDs(ex2.sp,'ex2'))
>
>> proj4string(ex1.sp) == proj4string(tmp2)
> [1] FALSE
>
>> proj4string(ex1.sp)
> [1] "+proj=lcc +lat_1=38.43333333333333 +lat_2=37.06666666666667
> +lat_0=36.5 +lon_0=-120.5 +x_0=2000000.0001016 +y_0=500000.0001016001
> +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"
>
> ## note the leading space character
>> proj4string(tmp2)
> [1] " +proj=lcc +lat_1=38.43333333333333 +lat_2=37.06666666666667
> +lat_0=36.5 +lon_0=-120.5 +x_0=2000000.0001016 +y_0=500000.0001016001
> +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs
> +towgs84=0,0,0"
>
>> tmp3 <- rbind(tmp2, spChFIDs(ex3.sp,'ex3'))
> Error in checkCRSequal(dots) : coordinate reference systems differ
>
>
>> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] rgdal_0.7-1 sp_0.9-88
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1     lattice_0.19-30
>>
>
>
>
>> str(ex1.sp)
> Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
>  ..@ data       :'data.frame': 1 obs. of  1 variable:
>  .. ..$ name: Factor w/ 1 level "example1": 1
>  ..@ polygons   :List of 1
>  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots
>  .. .. .. ..@ Polygons :List of 1
>  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
>  .. .. .. .. .. .. ..@ labpt  : num [1:2] 6223669 2081123
>  .. .. .. .. .. .. ..@ area   : num 20287432
>  .. .. .. .. .. .. ..@ hole   : logi FALSE
>  .. .. .. .. .. .. ..@ ringDir: int 1
>  .. .. .. .. .. .. ..@ coords : num [1:8, 1:2] 6221449 6226373 6225988
> 6223664 6223594 ...
>  .. .. .. ..@ plotOrder: int 1
>  .. .. .. ..@ labpt    : num [1:2] 6223669 2081123
>  .. .. .. ..@ ID       : chr "1"
>  .. .. .. ..@ area     : num 20287432
>  ..@ plotOrder  : int 1
>  ..@ bbox       : num [1:2, 1:2] 6220680 2078695 6226373 2083511
>  .. ..- attr(*, "dimnames")=List of 2
>  .. .. ..$ : chr [1:2] "x" "y"
>  .. .. ..$ : chr [1:2] "min" "max"
>  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>  .. .. ..@ projargs: chr "+proj=lcc +lat_1=38.43333333333333
> +lat_2=37.06666666666667 +lat_0=36.5 +lon_0=-120.5 +x_0=2000000.0001016
> +y_0=500000.00010160"| __truncated__
>
>
>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Mon Oct 10 22:08:05 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 10 Oct 2011 22:08:05 +0200
Subject: [R-sig-Geo] adjacent polygons
In-Reply-To: <4E933D79.2000806@alumni.uv.es>
References: <4E933D79.2000806@alumni.uv.es>
Message-ID: <alpine.LRH.2.00.1110102206030.23130@reclus.nhh.no>

On Mon, 10 Oct 2011, Facundo Mu?oz wrote:

>
> Hi people,
>
> I have a shapefile of polygons (buildings), and I would like to calculate, 
> for each one, the length of the shared border with some other building.
> Or, conversely, how much of its border is 'exterior'.
> I can't figure out how to extract that info.

Without a topological GIS you cannot. Try vect2neigh() in spgrass6 using 
GRASS to do this. It can, I believe, also be done using vector coverages 
in ArcGIS.

Hope this helps,

Roger

>
> Any idea?
>
> Thanks.
> ?acu.-
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From hi_ono2001 at ybb.ne.jp  Tue Oct 11 05:27:01 2011
From: hi_ono2001 at ybb.ne.jp (hi_ono2001 at ybb.ne.jp)
Date: Tue, 11 Oct 2011 12:27:01 +0900
Subject: [R-sig-Geo] adjacent polygons
Message-ID: <648698.40329.qm@web200005.mail.kks.yahoo.co.jp>

Hello.

 You can also create this by using OpenJump(http://openjump.org)'s "planar graph" with some steps, and save results as DBase file although OJ, running on Java runtime,  is difficult in liking with R dynamically.


 Regards.

--- On Tue, 2011/10/11, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> On Mon, 10 Oct 2011, Facundo Mu?oz wrote:
> 
> >
> > Hi people,
> >
> > I have a shapefile of polygons (buildings), and I would like to calculate, 
> > for each one, the length of the shared border with some other building.
> > Or, conversely, how much of its border is 'exterior'.
> > I can't figure out how to extract that info.
> 
> Without a topological GIS you cannot. Try vect2neigh() in spgrass6 using 
> GRASS to do this. It can, I believe, also be done using vector coverages 
> in ArcGIS.
> 
> Hope this helps,
> 
> Roger
> 
> >
> > Any idea?
> >
> > Thanks.
> > ?acu.-
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> 
> -- 
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>


From karaka at ifc.cnr.it  Tue Oct 11 10:38:09 2011
From: karaka at ifc.cnr.it (Matilde Karakachoff)
Date: Tue, 11 Oct 2011 10:38:09 +0200
Subject: [R-sig-Geo] "one-dimensional" spatial point process
Message-ID: <85525ec4d20e14e713319e7bd590d2df@insm.isti.cnr.it>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111011/44ea2d6e/attachment.pl>

From hi_ono2001 at ybb.ne.jp  Tue Oct 11 14:58:53 2011
From: hi_ono2001 at ybb.ne.jp (hi_ono2001 at ybb.ne.jp)
Date: Tue, 11 Oct 2011 21:58:53 +0900 (JST)
Subject: [R-sig-Geo] "one-dimensional" spatial point process
In-Reply-To: <85525ec4d20e14e713319e7bd590d2df@insm.isti.cnr.it>
Message-ID: <192238.50133.qm@web200002.mail.kks.yahoo.co.jp>

Hello.

  I don't know whether this is correct answer to your question, how about using nearest neighbor analysis for point pattern?

  This method is written in 

 Boots, B. N. and Getis, A. (1988): Point Pattern Analysis, Scientific Geography Series, SAGE PUBLICATIONS, 45-56.

  I think this equation introduced in above book is very easy for scripting in R.


 Best Regards.

--- On Tue, 2011/10/11, Matilde Karakachoff <karaka at ifc.cnr.it> wrote:

> ? 
> 
> Hello,
> 
> I'm looking for some simple techniques of exploratory data
> analysis for a
> "one-dimensional" spatial point process. For example I
> would test the CSR of
> some (few) points in a line of length 5000 against
> the hp. that they cluster
> in one or two places of the line.
> 
> Do you
> think that there exists an r-package or function to solve this kind
> of
> problem? I really like spatstat, but I don't think that I could use it
> in
> a "one-dimensional" case.
> 
> Thank you very much
> 
> Matilde
> 
> -- 
> Matilde
> Karakachoff
> Istituto di Fisiologia Clinica
> Pisa Italia
> ? 
> ??? [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From famuvie at alumni.uv.es  Tue Oct 11 15:12:34 2011
From: famuvie at alumni.uv.es (=?windows-1252?Q?Facundo_Mu=F1oz?=)
Date: Tue, 11 Oct 2011 09:12:34 -0400
Subject: [R-sig-Geo] adjacent polygons
In-Reply-To: <alpine.LRH.2.00.1110102206030.23130@reclus.nhh.no>
References: <4E933D79.2000806@alumni.uv.es>
	<alpine.LRH.2.00.1110102206030.23130@reclus.nhh.no>
Message-ID: <4E9440C2.10607@alumni.uv.es>

That (vect2neigh) worked beautifully.
Thanks a lot!

         ?acu.-

PD: Lengths seem to be divided by 1000... curious...

El 10/10/11 16:08, Roger Bivand escribi?:
> On Mon, 10 Oct 2011, Facundo Mu?oz wrote:
>
>>
>> Hi people,
>>
>> I have a shapefile of polygons (buildings), and I would like to
>> calculate, for each one, the length of the shared border with some
>> other building.
>> Or, conversely, how much of its border is 'exterior'.
>> I can't figure out how to extract that info.
>
> Without a topological GIS you cannot. Try vect2neigh() in spgrass6
> using GRASS to do this. It can, I believe, also be done using vector
> coverages in ArcGIS.
>
> Hope this helps,
>
> Roger
>
>>
>> Any idea?
>>
>> Thanks.
>> ?acu.-
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>


From Adrian.Baddeley at csiro.au  Tue Oct 11 15:13:41 2011
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Tue, 11 Oct 2011 21:13:41 +0800
Subject: [R-sig-Geo] "one-dimensional" spatial point process
Message-ID: <57DC18C299094D4299F837570C5DF1C54E99292664@EXWA-MBX01.nexus.csiro.au>

Matilde Karakachoff <karaka at ifc.cnr.it> writes: 

>  I'm looking for some simple techniques of exploratory data analysis for a
> "one-dimensional" spatial point process. For example I would test the CSR of
> some (few) points in a line of length 5000 against the hp. that they cluster
> in one or two places of the line.

> Do you think that there exists an r-package or function to solve this kind
> of problem? I really like spatstat, but I don't think that I could use it in
> a "one-dimensional" case.

The spatstat package has facilities for exploratory analysis of point patterns on a linear network
(see help for 'lpp'). A special case is a point pattern on a single line. See help(spatstat) under 'Linear Networks' for a list of 
functions available. 

Of course if you are willing to assume the points are Poisson, and you want to distinguish CSR from inhomogeneous Poisson, you can do this with standard methods for random variables - e.g. the Kolmogorov-Smirnov test of goodness-of-fit to the uniform distribution; density estimation in 1D; etc

Adrian Baddeley


From HodgessE at uhd.edu  Tue Oct 11 20:50:38 2011
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 11 Oct 2011 13:50:38 -0500
Subject: [R-sig-Geo] address to lat/long
Message-ID: <586A4828D7AAA04CA9B258C50A28DA206DBD8E@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111011/75b9ad7b/attachment.pl>

From dicko.ahmadou at gmail.com  Tue Oct 11 20:55:17 2011
From: dicko.ahmadou at gmail.com (ahmadou dicko)
Date: Tue, 11 Oct 2011 18:55:17 +0000
Subject: [R-sig-Geo] address to lat/long
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA206DBD8E@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA206DBD8E@BALI.uhd.campus>
Message-ID: <CAP8THHWqjjkD9DQ3=dM8yL4Z421Pbz2b8o8LikuwctCpzWrxiQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111011/d1bf5f09/attachment.pl>

From juantomas.sayago at gmail.com  Tue Oct 11 21:02:48 2011
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Tue, 11 Oct 2011 15:02:48 -0400
Subject: [R-sig-Geo] address to lat/long
In-Reply-To: <CAP8THHWqjjkD9DQ3=dM8yL4Z421Pbz2b8o8LikuwctCpzWrxiQ@mail.gmail.com>
References: <586A4828D7AAA04CA9B258C50A28DA206DBD8E@BALI.uhd.campus>
	<CAP8THHWqjjkD9DQ3=dM8yL4Z421Pbz2b8o8LikuwctCpzWrxiQ@mail.gmail.com>
Message-ID: <CAEOXpNCz=O6HhsV6Jvu9eCXxatOmFsJwa_ySOL9itOjXwFAO8A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111011/56ca122e/attachment.pl>

From jgrn at illinois.edu  Tue Oct 11 22:29:12 2011
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Tue, 11 Oct 2011 13:29:12 -0700
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook?
Message-ID: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>

R-sig-geo'ers:

I wanted to take a quick poll -- what is your favorite introductory
GIS textbook?  I'm evaluating texts for a basic GIS course I'll be
teaching next year, and I wanted to get some feedback from the
open-source community.  Thanks!

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html


From friedman.steve at gmail.com  Tue Oct 11 23:13:35 2011
From: friedman.steve at gmail.com (Steve Friedman)
Date: Tue, 11 Oct 2011 17:13:35 -0400
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook?
In-Reply-To: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
References: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
Message-ID: <CADkZ+_WHDPJhnyp2S7vwfFkrRZ4xq3Xh+UQfMZ2_w5OZnOQSHw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111011/b15a30c4/attachment.pl>

From matzke at berkeley.edu  Tue Oct 11 23:28:53 2011
From: matzke at berkeley.edu (Nick Matzke)
Date: Tue, 11 Oct 2011 14:28:53 -0700
Subject: [R-sig-Geo] Coarsening grid, but producing max, min, and mean layers
Message-ID: <4E94B515.8090409@berkeley.edu>

Hi all,

I've got a georeferenced grid with elevation data (height of 
land, depth below sea level).  I have loaded it into R in 
various formats.

I would like to coarsen it to match other environmental 
datasets for species distribution modeling purposes, but I 
feel that the coarsened grid should include some of the 
information from the finer-resolution layer -- e.g., if a 
coarse grid cell has an island in it, the depth should not 
simply be the mean of the finer pixels, there should be a 
layer than says "min depth=0" for that pixel.

So, I would like to have 3 coarse layers, with max(depth), 
min(depth), and mean(depth).

What would be the most efficient method/R function for 
coarsening a grid in this fashion?

Help much appreciated!!

Cheers!
Nick


-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
3060 VLSB #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From afischbach at usgs.gov  Tue Oct 11 23:41:17 2011
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Tue, 11 Oct 2011 14:41:17 -0700 (PDT)
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary files
Message-ID: <1318369277111-6882737.post@n2.nabble.com>

Has anyone developed scripts for converting the National Snow and Ice Data
Center binary files to spatial pixel data frames?
The data format is described under
http://nsidc.org/data/docs/daac/nsidc0081_ssmi_nrt_seaice.gd.html#format

-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6882737.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From HodgessE at uhd.edu  Wed Oct 12 00:03:23 2011
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 11 Oct 2011 17:03:23 -0500
Subject: [R-sig-Geo] uploading KML to Google My Maps
Message-ID: <586A4828D7AAA04CA9B258C50A28DA206DBDA4@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111011/330e0e6c/attachment.pl>

From jgrn at illinois.edu  Wed Oct 12 00:07:26 2011
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Tue, 11 Oct 2011 15:07:26 -0700
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook?
In-Reply-To: <CADkZ+_WHDPJhnyp2S7vwfFkrRZ4xq3Xh+UQfMZ2_w5OZnOQSHw@mail.gmail.com>
References: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
	<CADkZ+_WHDPJhnyp2S7vwfFkrRZ4xq3Xh+UQfMZ2_w5OZnOQSHw@mail.gmail.com>
Message-ID: <CABG0rfvgKdJLNQ1HQa-V2O2PD9HmxJCHtuyyrj=1zxmgUQEPQg@mail.gmail.com>

Steve:

I agree -- my primary software will be ArcGIS but I was wondering if
any of the texts are better with general GIS principles, particularly
if someone wants to transition from Arc to open source approaches.

--j

On Tue, Oct 11, 2011 at 2:13 PM, Steve Friedman
<friedman.steve at gmail.com> wrote:
> While open source gis is appealing most jobs still require introductory
> employees to use arcgis products. I'd stay away from anything else if you
> want your students to thank you latter.
>
> Steve
>
> On Oct 11, 2011 4:33 PM, "Jonathan Greenberg" <jgrn at illinois.edu> wrote:
>>
>> R-sig-geo'ers:
>>
>> I wanted to take a quick poll -- what is your favorite introductory
>> GIS textbook? ?I'm evaluating texts for a basic GIS course I'll be
>> teaching next year, and I wanted to get some feedback from the
>> open-source community. ?Thanks!
>>
>> --j
>>
>> --
>> Jonathan A. Greenberg, PhD
>> Assistant Professor
>> Department of Geography
>> University of Illinois at Urbana-Champaign
>> 607 South Mathews Avenue, MC 150
>> Urbana, IL 61801
>> Phone: 415-763-5476
>> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>> http://www.geog.illinois.edu/people/JonathanGreenberg.html
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html


From rshepard at appl-ecosys.com  Wed Oct 12 00:48:45 2011
From: rshepard at appl-ecosys.com (Rich Shepard)
Date: Tue, 11 Oct 2011 15:48:45 -0700
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook?
In-Reply-To: <CABG0rfvgKdJLNQ1HQa-V2O2PD9HmxJCHtuyyrj=1zxmgUQEPQg@mail.gmail.com>
References: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
	<CADkZ+_WHDPJhnyp2S7vwfFkrRZ4xq3Xh+UQfMZ2_w5OZnOQSHw@mail.gmail.com>
	<CABG0rfvgKdJLNQ1HQa-V2O2PD9HmxJCHtuyyrj=1zxmgUQEPQg@mail.gmail.com>
Message-ID: <alpine.LNX.2.00.1110111541560.26894@salmo.appl-ecosys.com>

On Tue, 11 Oct 2011, Jonathan Greenberg wrote:

> I agree -- my primary software will be ArcGIS but I was wondering if any
> of the texts are better with general GIS principles, particularly if
> someone wants to transition from Arc to open source approaches.

Jon,

   FWIW, I suggest that you select your textbook to fit what you expect
students to take away from your course. If you intend to turn out
ESRI-capable technicians who can point-and-click, then select a book that
teaches that. However, if you want to produce spatial analysts then select a
book that describes GIS, computational geometry, or terrain/hydrological
modeling.

   In my years of consulting I've seen too many folks who know how to operate
a piece of software (particularly in a GUI) without knowing why or how to
apply it to a new situation. I've seen this with GIS and statistical
software and, with a couple of current projects, using spreadsheets because
they were never taught how to design, build, and use a database.

   The analogy I've been know to use in these situations is that while you
might teach someone how to use a word processor, it does not make her a
writer.

   My $2 worth ... inflation, you know.

Rich


From mdsumner at gmail.com  Wed Oct 12 01:14:03 2011
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 12 Oct 2011 10:14:03 +1100
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <1318369277111-6882737.post@n2.nabble.com>
References: <1318369277111-6882737.post@n2.nabble.com>
Message-ID: <CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>

Since the format is raw binary it would be easy enough to read the raw
values with ?readBin and construct a Spatial object from that. If
there is sufficient metadata with the files it might already be
recognized by a GDAL, and if you are lucky in turn by your build of
rgdal (I've not checked the file sets).

Doing it manually is straightforward but laborious and error-prone,
another option is to use the GDAL VRT format - where you can formalize
all of the data type, georeferencing, projection and other metadata
(scaling and so on if necessary) - the you can more or less automate
the process by generating a .vrt for any of the files you like (and
you can include subsetting, combining single to multi-bands, scaling
etc. in the VRT definition).

http://www.gdal.org/gdal_vrttut.html

VRT is surely almost always available in any rgdal/GDAL build since
it's so generic.

I don't have time to attempt this now, but I know it can work.

Cheers, Mike.

On Wed, Oct 12, 2011 at 8:41 AM, Anthony Fischbach <afischbach at usgs.gov> wrote:
> Has anyone developed scripts for converting the National Snow and Ice Data
> Center binary files to spatial pixel data frames?
> The data format is described under
> http://nsidc.org/data/docs/daac/nsidc0081_ssmi_nrt_seaice.gd.html#format
>
> -----
> Tony Fischbach, Wildlife Biologist
> Walrus Research Program
> Alaska Science Center
> U.S. Geological Survey
> 4210 University Drive
> Anchorage, AK 99508-4650
>
> AFischbach at usgs.gov
> http://alaska.usgs.gov/science/biology/walrus
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6882737.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From hengl at spatial-analyst.net  Wed Oct 12 09:49:51 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Wed, 12 Oct 2011 09:49:51 +0200
Subject: [R-sig-Geo] uploading KML to Google My Maps
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA206DBDA4@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA206DBDA4@BALI.uhd.campus>
Message-ID: <4E95469F.7030108@spatial-analyst.net>


Erin,

I do not think that Google allows ftp access to their servers (I think 
what you wanted to ask is - how to automate visualization of KML files 
using Google Maps). You can ftp the complete KML files including the 
auxiliary data to some WWW directory, then parse URLs e.g.:

maps.google.com/maps?q=http://globalsoilmap.net/data/E33_S14_ORCDRC_1_gif.kml

*Unfortunately, this service often breaks and KMZ files will often not 
open (or they will open with a lot of delay).

Google is also developing a repository for geo-data (which they call 
Google Earth engine), but I could not figure out when they will open it 
to public (so you can drop any GIS layers and serve it from there).

You might also want to take a look at the plotGoogleMaps 
[http://cran.r-project.org/web/packages/plotGoogleMaps/index.html] 
package developed by a colleague from Belgrade (just met him at the 
GEOSTAT Belgrade summer school).

For point data, you can consider using Google Fusion tables. Google 
provides a lot of geographical functionality with point data, hence they 
will generate KML files for you on the fly (e.g. if you provide lat lon 
and/or address etc.).

HTH

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001



On 12-10-2011 0:03, Hodgess, Erin wrote:
> Dear R Sig Geo People:
>
> I use R to create little KML files and then upload them to the google
> My Maps through the interactive process.  But I was wondering if
> anyone knew how to upload them automatically.
>
> Thanks, Erin
>
>
> Erin M. Hodgess, PhD Associate Professor Department of Computer and
> Mathematical Sciences University of Houston - Downtown mailto:
> hodgesse at uhd.edu
>
>
> [[alternative HTML version deleted]]
>
> _______________________________________________ R-sig-Geo mailing
> list R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From paul.hiemstra at knmi.nl  Wed Oct 12 10:13:44 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Wed, 12 Oct 2011 08:13:44 +0000
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook?
In-Reply-To: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
References: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
Message-ID: <4E954C38.7050002@knmi.nl>

On 10/11/2011 08:29 PM, Jonathan Greenberg wrote:
> R-sig-geo'ers:
>
> I wanted to take a quick poll -- what is your favorite introductory
> GIS textbook?  I'm evaluating texts for a basic GIS course I'll be
> teaching next year, and I wanted to get some feedback from the
> open-source community.  Thanks!
>
> --j
>

Hi Jonathan,

On topic (I don't want to start a ArcGIS vs Open source flame :)). When
I did a graduate course in GIS, we used the book "Principles of
Geographical Information Systems" by Peter Burrough and Rachael
McDonnell. I think the book is ok, especially when teaching to under
graduates. It covers a wide range of topics and does not explicitely use
one type of software (e.g. ArcGIS).

regards,
Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From paul.hiemstra at knmi.nl  Wed Oct 12 10:17:10 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Wed, 12 Oct 2011 08:17:10 +0000
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook?
In-Reply-To: <CADkZ+_WHDPJhnyp2S7vwfFkrRZ4xq3Xh+UQfMZ2_w5OZnOQSHw@mail.gmail.com>
References: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
	<CADkZ+_WHDPJhnyp2S7vwfFkrRZ4xq3Xh+UQfMZ2_w5OZnOQSHw@mail.gmail.com>
Message-ID: <4E954D06.2020607@knmi.nl>

On 10/11/2011 09:13 PM, Steve Friedman wrote:
> While open source gis is appealing most jobs still require introductory
> employees to use arcgis products. I'd stay away from anything else if you
> want your students to thank you latter.

Hi Steve,

I think ArcGIS is directed towards GIS engineers, R is more directed
towards scientists. If you train your students to become scientists, I
would choose R + open source GIS (SAGA, GRASS). If you train them to be
engineers, ArcGIS mixed with some exposure to other tools would be
preferable. I'm not really sure what the goal of Jonathan is, science or
engineering.

regards,
Paul

> Steve
> On Oct 11, 2011 4:33 PM, "Jonathan Greenberg" <jgrn at illinois.edu> wrote:
>
>> R-sig-geo'ers:
>>
>> I wanted to take a quick poll -- what is your favorite introductory
>> GIS textbook?  I'm evaluating texts for a basic GIS course I'll be
>> teaching next year, and I wanted to get some feedback from the
>> open-source community.  Thanks!
>>
>> --j
>>
>> --
>> Jonathan A. Greenberg, PhD
>> Assistant Professor
>> Department of Geography
>> University of Illinois at Urbana-Champaign
>> 607 South Mathews Avenue, MC 150
>> Urbana, IL 61801
>> Phone: 415-763-5476
>> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>> http://www.geog.illinois.edu/people/JonathanGreenberg.html
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From hengl at spatial-analyst.net  Wed Oct 12 10:19:30 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Wed, 12 Oct 2011 10:19:30 +0200
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook?
In-Reply-To: <CABG0rfvgKdJLNQ1HQa-V2O2PD9HmxJCHtuyyrj=1zxmgUQEPQg@mail.gmail.com>
References: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>	<CADkZ+_WHDPJhnyp2S7vwfFkrRZ4xq3Xh+UQfMZ2_w5OZnOQSHw@mail.gmail.com>
	<CABG0rfvgKdJLNQ1HQa-V2O2PD9HmxJCHtuyyrj=1zxmgUQEPQg@mail.gmail.com>
Message-ID: <4E954D92.7060704@spatial-analyst.net>


Jonathan,

GIS is a rather broad field. You could split it into several 'more 
concrete' research sub-fields (classification of scientific 'fields' is 
obviously a very fuzzy area): spatial data modelling, spatial databases, 
raster GIS / remote sensing, vector data modelling, digital terrain 
modelling (geomorphometry), spatial statistics etc. Then, for each 
sub-field find the most popular source.

As a gentle introduction to GIS, I liked suggesting the Paul Bolstads 
book [http://www.paulbolstad.net/gisbook.html], but this is really an 
introduction and is mainly meant for the students in USA (also, it is 
not meant for software training courses).

A colleague of mine (Victor Olaya) has been putting together an open 
access 900 pages (!) book on GIS principles 
[http://wiki.osgeo.org/wiki/Libro_SIG], but this is in Spanish (although 
they do actually plan an English book too 
[http://wiki.osgeo.org/wiki/Book_Outline]).

R / GRASS / SAGA community provides numerous training and 
hands-on-software literature sources. This would be my favorites ones:

1. Spatial data modeling
- Bivand, R., Pebesma, E., Rubio, V., 2008. Applied Spatial Data 
Analysis with R. Use R Series, Springer, Heidelberg, pp. 378.

2. Spatial databases
- Obe, R.O. and Hsu, L.S., 2011. PostGIS in Action. Manning 
Publications, 552 p.
- Beaudette, D., 2011. Open Source Software Tools for Soil Scientists, 
University of California at Davis. 
[http://casoilresource.lawr.ucdavis.edu/drupal/node/95]

3. Raster GIS / remote sensing
- Neteler, M., Mitasova, H., 2008. Open Source GIS: A GRASS GIS 
Approach, 3rd Edt. Springer, The International Series in Engineering and 
Computer Science: Volume 773. 406 p.
- Hijmans, R., 2011. Geographic analysis and modeling with raster data. 
CRAN, [http://cran.r-project.org/web/packages/raster/]

4. Geomorphometry (DEMs)
- Cimmery, V. (2007-2010): SAGA User Guide, updated for SAGA version 2.0.5.
- Hengl, T., Reuter, H.I. (eds) 2008. Geomorphometry: Concepts, 
Software, Applications. Developments in Soil Science, vol. 33, Elsevier, 
772 p.

5. Space-time statistics
- Bivand, R., Pebesma, E., Rubio, V., 2008. Applied Spatial Data 
Analysis with R. Use R Series, Springer, Heidelberg, pp. 378.
- Schabenberger, O., Gotway, C.A., 2005. Statistical Methods for Spatial 
Data Analysis. Boca Raton, FL: Chapman & Hall/CRC, 488 p.
- Diggle, P.J., Ribeiro, P.J., 2006. Model-based Geostatistics. 
Springer, 230 p.

I think you would do more than a noble thing if you would promote the 
following three 'classics':

1. Bivand, R., Pebesma, E., Rubio, V., 2008. Applied Spatial Data 
Analysis with R. Use R Series, Springer, Heidelberg, pp. 378.
2. Neteler, M., Mitasova, H., 2008. Open Source GIS: A GRASS GIS 
Approach, 3rd Edt. Springer, The International Series in Engineering and 
Computer Science: Volume 773. 406 p.
3. Kabacoff, R.I., 2011. R in Action: Data analysis and graphics with R. 
Manning publications, 470 p.

HTH,

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001


On 12-10-2011 0:07, Jonathan Greenberg wrote:
> Steve:
>
> I agree -- my primary software will be ArcGIS but I was wondering if
> any of the texts are better with general GIS principles, particularly
> if someone wants to transition from Arc to open source approaches.
>
> --j
>
> On Tue, Oct 11, 2011 at 2:13 PM, Steve Friedman
> <friedman.steve at gmail.com>  wrote:
>> While open source gis is appealing most jobs still require introductory
>> employees to use arcgis products. I'd stay away from anything else if you
>> want your students to thank you latter.
>>
>> Steve
>>
>> On Oct 11, 2011 4:33 PM, "Jonathan Greenberg"<jgrn at illinois.edu>  wrote:
>>>
>>> R-sig-geo'ers:
>>>
>>> I wanted to take a quick poll -- what is your favorite introductory
>>> GIS textbook?  I'm evaluating texts for a basic GIS course I'll be
>>> teaching next year, and I wanted to get some feedback from the
>>> open-source community.  Thanks!
>>>
>>> --j
>>>
>>> --
>>> Jonathan A. Greenberg, PhD
>>> Assistant Professor
>>> Department of Geography
>>> University of Illinois at Urbana-Champaign
>>> 607 South Mathews Avenue, MC 150
>>> Urbana, IL 61801
>>> Phone: 415-763-5476
>>> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>>> http://www.geog.illinois.edu/people/JonathanGreenberg.html
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>


From b.rowlingson at lancaster.ac.uk  Wed Oct 12 11:58:15 2011
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 12 Oct 2011 10:58:15 +0100
Subject: [R-sig-Geo] uploading KML to Google My Maps
In-Reply-To: <4E95469F.7030108@spatial-analyst.net>
References: <586A4828D7AAA04CA9B258C50A28DA206DBDA4@BALI.uhd.campus>
	<4E95469F.7030108@spatial-analyst.net>
Message-ID: <CANVKczPwauoWnXrP_rCbH=ZFX5UWan+KSWG2PBe9EpewpVjenw@mail.gmail.com>

On Wed, Oct 12, 2011 at 8:49 AM, Tomislav Hengl
<hengl at spatial-analyst.net> wrote:
>
> Erin,
>
> I do not think that Google allows ftp access to their servers (I think what
> you wanted to ask is - how to automate visualization of KML files using
> Google Maps). You can ftp the complete KML files including the auxiliary
> data to some WWW directory, then parse URLs e.g.:

 The other way of doing it might be to use Curl to construct the POST
request that a browser sends when importing a KML file from the google
maps web page. The tricky bit might be handling the authentication -
but I imagine the R interfaces to Google Docs might have this covered.

 Browser inspection show a POST request to
http://maps.google.co.uk/msupload with a multipart-form payload
including the KML file, then another POST request to
http://maps.google.co.uk/maps/ms?authuser=0 which I don't
understand...

 I imagine the R Google Docs guys could have a headstart on this -
give them a nudge, this would be cool :)

Barry


From b.rowlingson at lancaster.ac.uk  Wed Oct 12 12:08:17 2011
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 12 Oct 2011 11:08:17 +0100
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
Message-ID: <CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>

On Wed, Oct 12, 2011 at 12:14 AM, Michael Sumner <mdsumner at gmail.com> wrote:

> Doing it manually is straightforward but laborious and error-prone,
> another option is to use the GDAL VRT format - where you can formalize
> all of the data type, georeferencing, projection and other metadata
> (scaling and so on if necessary) - the you can more or less automate
> the process by generating a .vrt for any of the files you like (and
> you can include subsetting, combining single to multi-bands, scaling
> etc. in the VRT definition).
>
> http://www.gdal.org/gdal_vrttut.html
>
> VRT is surely almost always available in any rgdal/GDAL build since
> it's so generic.
>
> I don't have time to attempt this now, but I know it can work.

 Annoyingly I don't think gdal's raw data vrt system can find out the
number of pixels across/down the raster - you have to code them into
the .vrt file. I reckon with a bit of unix (or in extremis, C code)
craftiness it would be possible to get the info from the header of the
.bin file and write the relevant .vrt file...

 The great thing about standards is...

Barry


From b.rowlingson at lancaster.ac.uk  Wed Oct 12 14:04:32 2011
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 12 Oct 2011 13:04:32 +0100
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
Message-ID: <CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>

On Wed, Oct 12, 2011 at 11:08 AM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:

> ?Annoyingly I don't think gdal's raw data vrt system can find out the
> number of pixels across/down the raster - you have to code them into
> the .vrt file. I reckon with a bit of unix (or in extremis, C code)
> craftiness it would be possible to get the info from the header of the
> .bin file and write the relevant .vrt file...

The data format details tells is the files only come in a limited
number of sizes. I grabbed a .bin file and wrote this .vrt file to sit
next to it:

<VRTDataset rasterXSize="304" rasterYSize="448">
  <VRTRasterBand dataType="Byte" band="1" subClass="VRTRawRasterBand">
    <SourceFilename relativetoVRT="1">nt_20111010_f17_nrt_n.bin</SourceFilename>
    <ImageOffset>300</ImageOffset>
    <PixelOffset>1</PixelOffset>
    <LineOffset>304</LineOffset>
  </VRTRasterBand>
</VRTDataset>

Then in R:

require(rgdal)
 ice=readGDAL("nt_20111010_f17_nrt_n.vrt")
 image(ice)

and there's Greenland, and various other bits of rapidly melting ice...

Hope this helps - the important bits of the .vrt file are the 300
offset the raster X and Y size and LineOffset(which =XSize) and
obviously the filename...

I'd write a script to create these .vrt files and then convert
everything to a standard format like GeoTiff... Note you'll have to
add the projection info on manually... etc etc etc.

Barry


From mdsumner at gmail.com  Wed Oct 12 14:13:48 2011
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 12 Oct 2011 23:13:48 +1100
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
Message-ID: <CAAcGz9-jWeEmG+PNmcgfSSFW2Xtx+YOjgOKJF-oiogVu8009yw@mail.gmail.com>

VRT is not designed to interrogate raw files, it's for arbitrarily
specifying a raster sources from a variety of sources, including "raw"
- there would be a driver and auto-recognition forze the files if GDAL
knew about it.

The 300 byte header is describe here so there's a nice little project
for a rainy day:

http://nsidc.org/data/docs/daac/nsidc0051_gsfc_seaice.gd.html#format

Cheers, Mike.


On Wed, Oct 12, 2011 at 9:08 PM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
> On Wed, Oct 12, 2011 at 12:14 AM, Michael Sumner <mdsumner at gmail.com> wrote:
>
>> Doing it manually is straightforward but laborious and error-prone,
>> another option is to use the GDAL VRT format - where you can formalize
>> all of the data type, georeferencing, projection and other metadata
>> (scaling and so on if necessary) - the you can more or less automate
>> the process by generating a .vrt for any of the files you like (and
>> you can include subsetting, combining single to multi-bands, scaling
>> etc. in the VRT definition).
>>
>> http://www.gdal.org/gdal_vrttut.html
>>
>> VRT is surely almost always available in any rgdal/GDAL build since
>> it's so generic.
>>
>> I don't have time to attempt this now, but I know it can work.
>
> ?Annoyingly I don't think gdal's raw data vrt system can find out the
> number of pixels across/down the raster - you have to code them into
> the .vrt file. I reckon with a bit of unix (or in extremis, C code)
> craftiness it would be possible to get the info from the header of the
> .bin file and write the relevant .vrt file...
>
> ?The great thing about standards is...
>
> Barry
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner at gmail.com


From corey.sparks at UTSA.EDU  Wed Oct 12 16:29:47 2011
From: corey.sparks at UTSA.EDU (Corey Sparks)
Date: Wed, 12 Oct 2011 07:29:47 -0700 (PDT)
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook?
In-Reply-To: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
References: <CABG0rfuc2yaw4cJ6h6skcstAyuLNDs+gUicG05iHLC2E684m0A@mail.gmail.com>
Message-ID: <1318429787501-6885238.post@n2.nabble.com>

Hello, 
As someone who teaches GIS to social scientists and policy wonks, I like
Paul Longley's GIS and Science book, here is a link to Paul's page:
http://paul-longley.com/books/

It is not a software book, but more of an application and "why" book, which
is not common in the GIS world.  For undergrads, Andy Mitchell's books:
http://esripress.esri.com/display/index.cfm?fuseaction=display&websiteID=22&moduleID=1
and
http://esripress.esri.com/display/index.cfm?fuseaction=display&websiteID=86

are good, as they show what ArcGIS can do, but without teaching ArcGIS, for
that I go with:
Getting to Know ArcGIS desktop:
http://esripress.esri.com/display/index.cfm?fuseaction=display&websiteID=143&moduleID=0

because it comes with a 6 month license of ArcGIS, some data and lots of
homework.

If your class is GIS, and not statistics I would avoid using books that
focus heavily on stat, especially if they are Geography undergrads, and
focus more on applications of GIS, data types and structures, and areas
where it can be applied.

My 2$
Corey

Corey Sparks
Assistant professor
Department of Demography
The University of Texas at San Antonio
501 West Cesar E Chavez Blvd
San Antonio TX 78207
Corey.sparks 'at' utsa.edu
210 458 3166 &lt;tel:210%20458%203166&gt;
Latitude: 29.423614  /  Longitude: -98.504282


-----
Corey Sparks, PhD
Assistant Professor
Department of Demography 
University of Texas at San Antonio
501 West Durango Blvd
Monterey Building 2.270C
San Antonio, TX 78207
210-458-3166
corey.sparks 'at' utsa.edu
https://rowdyspace.utsa.edu/users/ozd504/www/index.htm
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Quick-poll-favorite-GIS-textbook-tp6882545p6885238.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From heimann.richard at gmail.com  Wed Oct 12 20:24:04 2011
From: heimann.richard at gmail.com (Rich Heimann)
Date: Wed, 12 Oct 2011 14:24:04 -0400
Subject: [R-sig-Geo] Correlation between O&D
Message-ID: <CAPAHiAKJptp6XA0-4MxfmEx1GOZrjg5JU+_OcqT=0QqsAw23BQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111012/9430125a/attachment.pl>

From jeremy.raw at dot.gov  Wed Oct 12 21:16:02 2011
From: jeremy.raw at dot.gov (jeremy.raw at dot.gov)
Date: Wed, 12 Oct 2011 15:16:02 -0400
Subject: [R-sig-Geo] Correlation between O&D
In-Reply-To: <CAPAHiAKJptp6XA0-4MxfmEx1GOZrjg5JU+_OcqT=0QqsAw23BQ@mail.gmail.com>
References: <CAPAHiAKJptp6XA0-4MxfmEx1GOZrjg5JU+_OcqT=0QqsAw23BQ@mail.gmail.com>
Message-ID: <B3C9A56C0E6FBF48A7D3ED79E9A7A9C0054540FE@OSTMAIL03VS3.ad.dot.gov>

It all depends on what you mean by "origin and destination data".
Assuming I am allowed to make up my own definitions, the answer is
definitely "yes" :-)

My advice is to be somewhat more specific about the problem domain.

Jeremy Raw, P.E.
FHWA Office of Planning
jeremy.raw at dot.gov
(202) 366-0986


-----Original Message-----
From: r-sig-geo-bounces at r-project.org
[mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Rich Heimann
Sent: Wednesday, October 12, 2011 2:24 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Correlation between O&D

Hello all,

I want to know if the list is aware of a way to determine whether origin
and
destination data is correlated - rather than looking at each as
independent?
Any advise?

Thanks,
Rich

Rich Heimann

 Richard Heimann | ITT Corporation | T: 571.403.0119 |
richard.heimann at itt.com
Richard Heimann | University of Maryland, Baltimore County | T:
571.403.0119
| rheimann at umbc.edu
Contact Me <http://www.linkedin.com/in/rheimann>
LinkedIn<http://www.linkedin.com/in/rheimann>
<https://twitter.com/rheimann> Twitter <https://twitter.com/rheimann>
<https://plus.google.com/117471169530873553158> Google
Plus<https://plus.google.com/117471169530873553158>
Chat [image: Google Talk] heimann.richard [image: Skype] heimann.rich
 [image: Twitter] <http://twitter.com/rheimann> Latest tweet: An
Intuitive
Explanation of Bayes' Theorem: http://t.co/6DAh8O43
Follow @rheimann <http://twitter.com/rheimann> Reply
<http://twitter.com/?status=@rheimann%20&in_reply_to_status_id=123943215
412953090&in_reply_to=rheimann>
Retweet
<http://twitter.com/?status=RT%20%40rheimann%3A%20An%20Intuitive%20Expla
nation%20of%20Bayes%27%20Theorem%3A%20http%3A%2F%2Ft.co%2F6DAh8O43>
 22:08 Oct-11<http://twitter.com/rheimann/statuses/123943215412953089>
  Get this email app!
<http://www.wisestamp.com/apps/twitter?utm_source=extension&utm_medium=e
mail&utm_term=twitter&utm_campaign=apps>

 Please consider your environmental responsibility. Before printing this
e-mail message, ask yourself whether you really need a hard copy.

	[[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From afischbach at usgs.gov  Wed Oct 12 22:06:40 2011
From: afischbach at usgs.gov (Anthony S Fischbach)
Date: Wed, 12 Oct 2011 12:06:40 -0800
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
References: <1318369277111-6882737.post@n2.nabble.com>	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
Message-ID: <OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111012/32c0b8db/attachment.pl>

From stephen.roecker at gmail.com  Wed Oct 12 22:39:08 2011
From: stephen.roecker at gmail.com (Stephen Roecker)
Date: Wed, 12 Oct 2011 13:39:08 -0700
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook? (Stephen
	Roecker)
Message-ID: <CAGcGWcp9bt==P4d00_JZrSsQo-9Xq+TppqDFteG_-+FM_81g4A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111012/230c807b/attachment.pl>

From r.hijmans at gmail.com  Wed Oct 12 23:39:31 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 12 Oct 2011 14:39:31 -0700
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
Message-ID: <CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111012/add565dd/attachment.pl>

From r.hijmans at gmail.com  Wed Oct 12 23:43:26 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 12 Oct 2011 14:43:26 -0700
Subject: [R-sig-Geo] Problem with gain/offset and sampleRegular
In-Reply-To: <4E8F6840.9020306@amnh.org>
References: <4E8F6840.9020306@amnh.org>
Message-ID: <CANtt_hzknuiwZhi6AZA-mnFQOz4Ytx_aOszE9+XsYtsNbqPgVg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111012/b095d0b5/attachment.pl>

From jmbarriosg at gmail.com  Wed Oct 12 23:43:39 2011
From: jmbarriosg at gmail.com (=?ISO-8859-1?Q?Jos=E9_Miguel_Barrios?=)
Date: Wed, 12 Oct 2011 23:43:39 +0200
Subject: [R-sig-Geo] Quick poll -- favorite GIS textbook? (Stephen
	Roecker)
In-Reply-To: <CAGcGWcp9bt==P4d00_JZrSsQo-9Xq+TppqDFteG_-+FM_81g4A@mail.gmail.com>
References: <CAGcGWcp9bt==P4d00_JZrSsQo-9Xq+TppqDFteG_-+FM_81g4A@mail.gmail.com>
Message-ID: <CAKAdxrVeqvLULJWScELO=H9SuBe2U2M=m038so8j-7GKTeco9A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111012/f2378d02/attachment.pl>

From heimann.richard at gmail.com  Thu Oct 13 01:26:25 2011
From: heimann.richard at gmail.com (Rich Heimann)
Date: Wed, 12 Oct 2011 19:26:25 -0400
Subject: [R-sig-Geo] Correlation between O&D
In-Reply-To: <B3C9A56C0E6FBF48A7D3ED79E9A7A9C0054540FE@OSTMAIL03VS3.ad.dot.gov>
References: <CAPAHiAKJptp6XA0-4MxfmEx1GOZrjg5JU+_OcqT=0QqsAw23BQ@mail.gmail.com>
	<B3C9A56C0E6FBF48A7D3ED79E9A7A9C0054540FE@OSTMAIL03VS3.ad.dot.gov>
Message-ID: <CAPAHiAJhPfhOgUUZ2CZiQBnfrLHXsh4jF3C3hrt3bQUd4e8HbQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111012/fa88b385/attachment.pl>

From jeremy.raw at dot.gov  Thu Oct 13 14:40:40 2011
From: jeremy.raw at dot.gov (jeremy.raw at dot.gov)
Date: Thu, 13 Oct 2011 08:40:40 -0400
Subject: [R-sig-Geo] Correlation between O&D
In-Reply-To: <CAPAHiAJhPfhOgUUZ2CZiQBnfrLHXsh4jF3C3hrt3bQUd4e8HbQ@mail.gmail.com>
References: <CAPAHiAKJptp6XA0-4MxfmEx1GOZrjg5JU+_OcqT=0QqsAw23BQ@mail.gmail.com>
	<B3C9A56C0E6FBF48A7D3ED79E9A7A9C0054540FE@OSTMAIL03VS3.ad.dot.gov>
	<CAPAHiAJhPfhOgUUZ2CZiQBnfrLHXsh4jF3C3hrt3bQUd4e8HbQ@mail.gmail.com>
Message-ID: <B3C9A56C0E6FBF48A7D3ED79E9A7A9C00545428D@OSTMAIL03VS3.ad.dot.gov>

I'm still not entirely sure what you're getting at:  spatial correlation
of origin/destination locations to each other?  Or some characteristic
of the origin/destination pairs?  It sounds like the latter, but then
the question is "correlated with what"?

 

The choice of method is ultimately driven by the conceptual model of the
phenomena, which is what those questions are getting at.  If you can
answer those questions with some precision, finding an analytic method
that can implement the resulting model is fairly straightforward.

 

If you're still trying to sharpen your thinking (or even if you think
you have the abstractions nailed down and are just looking for
corresponding methods), I'd recommend starting with the "spatstat"
package (e.g. via the website www.spatstat.org) and following its
reference list into the world of spatial statistics.

 

If you're actually interested in stolen cars, you might take a look at
CrimeStat (http://www.icpsr.umich.edu/CrimeStat/) which rolls up
implementations of a lot of spatial statistics techniques that could be
applicable in tracking crimes and finding criminals.  The software is
"free as in beer" but it is not implemented in R (though I suppose one
might be able to wrap the provided library functions).  The various
analytic methods are mostly standard and reasonably well documented, so
any given analysis could be quite readily reproduced in the statistical
system of your choice.

 

I hope that helps!

 

Jeremy Raw, P.E.

FHWA Office of Planning

jeremy.raw at dot.gov

(202) 366-0986

 

From: Rich Heimann [mailto:heimann.richard at gmail.com] 
Sent: Wednesday, October 12, 2011 7:26 PM
To: Raw, Jeremy
Cc: r-sig-geo at r-project.org
Subject: Re: [R-sig-Geo] Correlation between O&D

 

Great! I hope you can tell me more. 

I am considering origin and destination to be linked data... Such as a
stolen car and a recovered car - rather than an independent point
pattern. I hope that clears things up? 

Regards,
Rich

Rich Heimann

 Tel: (571) 403-0119 
heimann.richard at gmail.com 

 

 

On Wed, Oct 12, 2011 at 3:16 PM, <jeremy.raw at dot.gov> wrote:

It all depends on what you mean by "origin and destination data".
Assuming I am allowed to make up my own definitions, the answer is
definitely "yes" :-)

My advice is to be somewhat more specific about the problem domain.

Jeremy Raw, P.E.
FHWA Office of Planning
jeremy.raw at dot.gov
(202) 366-0986 <tel:%28202%29%20366-0986> 


-----Original Message-----
From: r-sig-geo-bounces at r-project.org
[mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Rich Heimann
Sent: Wednesday, October 12, 2011 2:24 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] Correlation between O&D


Hello all,

I want to know if the list is aware of a way to determine whether origin
and
destination data is correlated - rather than looking at each as
independent?
Any advise?

Thanks,
Rich

Rich Heimann

 Richard Heimann | ITT Corporation | T: 571.403.0119 |
richard.heimann at itt.com
Richard Heimann | University of Maryland, Baltimore County | T:
571.403.0119
| rheimann at umbc.edu

Contact Me <http://www.linkedin.com/in/rheimann>
LinkedIn<http://www.linkedin.com/in/rheimann>
<https://twitter.com/rheimann> Twitter <https://twitter.com/rheimann>
<https://plus.google.com/117471169530873553158> Google
Plus<https://plus.google.com/117471169530873553158>

Chat [image: Google Talk] heimann.richard [image: Skype] heimann.rich

 [image: Twitter] <http://twitter.com/rheimann> Latest tweet: An

Intuitive
Explanation of Bayes' Theorem: http://t.co/6DAh8O43

Follow @rheimann <http://twitter.com/rheimann> Reply
<http://twitter.com/?status=@rheimann%20&in_reply_to_status_id=123943215
412953090&in_reply_to=rheimann
<http://twitter.com/?status=@rheimann%20&in_reply_to_status_id=123943215
%0A412953090&in_reply_to=rheimann> >
Retweet
<http://twitter.com/?status=RT%20%40rheimann%3A%20An%20Intuitive%20Expla
nation%20of%20Bayes%27%20Theorem%3A%20http%3A%2F%2Ft.co%2F6DAh8O43>
 22:08 Oct-11<http://twitter.com/rheimann/statuses/123943215412953089>
 Get this email app!
<http://www.wisestamp.com/apps/twitter?utm_source=extension&utm_medium=e
mail&utm_term=twitter&utm_campaign=apps
<http://www.wisestamp.com/apps/twitter?utm_source=extension&utm_medium=e
%0Amail&utm_term=twitter&utm_campaign=apps> >


 Please consider your environmental responsibility. Before printing this
e-mail message, ask yourself whether you really need a hard copy.

       [[alternative HTML version deleted]]

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111013/2c67db4b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 332 bytes
Desc: image001.jpg
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111013/2c67db4b/attachment.jpe>

From jmburgos at uw.edu  Thu Oct 13 15:28:09 2011
From: jmburgos at uw.edu (Julian Burgos)
Date: Thu, 13 Oct 2011 13:28:09 +0000
Subject: [R-sig-Geo] Problems with spgrass6 and initGRASS in Fedora 14
Message-ID: <CAFGvYpSy4xG+dm3ROVv4r395m7iO91R_ib8u+Qvc0hVsHFaQzw@mail.gmail.com>

Dear list,

I'm taking my first steps in running GRASS from within R... but I'm
not getting very far.  When running the initGRASS function I get the
following error:

> initGRASS(gisBase="/usr/lib64/grass-6.3.0",home = tempdir(), gisDbase = "/home/julian/Documents/GIS/GRASSdata/", location = "IcelandMercator", mapset = "Lons10m",override=TRUE)
Command: g.gisenv
Description: Outputs and modifies the user's current GRASS variable settings.
Keywords: general
Parameters:
  name: get, type: string, required: no, multiple: no
  keydesc: VARIABLE, keydesc_count: 1
[GRASS variable to get]
  name: set, type: string, required: no, multiple: no
  keydesc: "VARIABLE=value", keydesc_count: 1
[GRASS variable to set]
  name: store, type: string, required: no, multiple: no
  default: gisrc
[Where GRASS variable is stored]
Flags:
  name: verbose [Verbose module output] {FALSE}
  name: quiet [Quiet module output] {FALSE}
Error in doGRASS(cmd, flags = flags, ..., parameters = parameters,
echoCmd = echoCmd) :
  Invalid flag value: n
>

I am running R 2.13.1 and GRASS 6.3.0 on Fedora 14 (64 bits).

Any ideas?

Julian

-- 
Julian Mariano Burgos
Hafranns?knastofnunin/Marine Research Institute
Sk?lagata 4, 121 Reykjav?k, Iceland
S?mi/Telephone : +354-5752037
Br?fs?mi/Telefax:? +354-5752001
Netfang/Email: julian at hafro.is, jmburgos at uw.edu


From b.rowlingson at lancaster.ac.uk  Thu Oct 13 16:13:13 2011
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 13 Oct 2011 15:13:13 +0100
Subject: [R-sig-Geo] Correlation between O&D
In-Reply-To: <B3C9A56C0E6FBF48A7D3ED79E9A7A9C00545428D@OSTMAIL03VS3.ad.dot.gov>
References: <CAPAHiAKJptp6XA0-4MxfmEx1GOZrjg5JU+_OcqT=0QqsAw23BQ@mail.gmail.com>
	<B3C9A56C0E6FBF48A7D3ED79E9A7A9C0054540FE@OSTMAIL03VS3.ad.dot.gov>
	<CAPAHiAJhPfhOgUUZ2CZiQBnfrLHXsh4jF3C3hrt3bQUd4e8HbQ@mail.gmail.com>
	<B3C9A56C0E6FBF48A7D3ED79E9A7A9C00545428D@OSTMAIL03VS3.ad.dot.gov>
Message-ID: <CANVKczMi6nHgyqD5axg=OMLSFYgwuEcqx1n1As84SyjUpv_Ehg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111013/3db0a826/attachment.pl>

From jmburgos at uw.edu  Thu Oct 13 16:36:45 2011
From: jmburgos at uw.edu (Julian Burgos)
Date: Thu, 13 Oct 2011 14:36:45 +0000
Subject: [R-sig-Geo] Problems with spgrass6 and initGRASS in Fedora 14
In-Reply-To: <CAFGvYpSy4xG+dm3ROVv4r395m7iO91R_ib8u+Qvc0hVsHFaQzw@mail.gmail.com>
References: <CAFGvYpSy4xG+dm3ROVv4r395m7iO91R_ib8u+Qvc0hVsHFaQzw@mail.gmail.com>
Message-ID: <CAFGvYpQhcgCr8DKFe9_Wf+YJRxYshRPJyrtOxMrgKrY77GfSuA@mail.gmail.com>

Ok, so I run the initGRASS() and gmeta6() functions line by line to
try to isolate the problem.

First, the following line gives me an error:
> SYS <- get("SYS", envir = .GRASS_CACHE)
Error in get("SYS", envir = .GRASS_CACHE) :
  object '.GRASS_CACHE' not found

I can get the function running f I fix the value of SYS to "unix" and
change all environment references to

envir=spgrass6:::.GRASS_CACHE.

But I get the following error when running the gmeta6() function:

>    gisenv <- execGRASS("g.gisenv", flags = "n", intern = TRUE,
+         ignore.stderr = ignore.stderr)
Command: g.gisenv
Description: Outputs and modifies the user's current GRASS variable settings.
Keywords: general
Parameters:
  name: get, type: string, required: no, multiple: no
  keydesc: VARIABLE, keydesc_count: 1
[GRASS variable to get]
  name: set, type: string, required: no, multiple: no
  keydesc: "VARIABLE=value", keydesc_count: 1
[GRASS variable to set]
  name: store, type: string, required: no, multiple: no
  default: gisrc
[Where GRASS variable is stored]
Flags:
  name: verbose [Verbose module output] {FALSE}
  name: quiet [Quiet module output] {FALSE}
Error in doGRASS(cmd, flags = flags, ..., parameters = parameters,
echoCmd = echoCmd) :
  Invalid flag value: n

I'll keep looking...

On Thu, Oct 13, 2011 at 1:28 PM, Julian Burgos <jmburgos at uw.edu> wrote:
> Dear list,
>
> I'm taking my first steps in running GRASS from within R... but I'm
> not getting very far. ?When running the initGRASS function I get the
> following error:
>
>> initGRASS(gisBase="/usr/lib64/grass-6.3.0",home = tempdir(), gisDbase = "/home/julian/Documents/GIS/GRASSdata/", location = "IcelandMercator", mapset = "Lons10m",override=TRUE)
> Command: g.gisenv
> Description: Outputs and modifies the user's current GRASS variable settings.
> Keywords: general
> Parameters:
> ?name: get, type: string, required: no, multiple: no
> ?keydesc: VARIABLE, keydesc_count: 1
> [GRASS variable to get]
> ?name: set, type: string, required: no, multiple: no
> ?keydesc: "VARIABLE=value", keydesc_count: 1
> [GRASS variable to set]
> ?name: store, type: string, required: no, multiple: no
> ?default: gisrc
> [Where GRASS variable is stored]
> Flags:
> ?name: verbose [Verbose module output] {FALSE}
> ?name: quiet [Quiet module output] {FALSE}
> Error in doGRASS(cmd, flags = flags, ..., parameters = parameters,
> echoCmd = echoCmd) :
> ?Invalid flag value: n
>>
>
> I am running R 2.13.1 and GRASS 6.3.0 on Fedora 14 (64 bits).
>
> Any ideas?
>
> Julian
>
> --
> Julian Mariano Burgos
> Hafranns?knastofnunin/Marine Research Institute
> Sk?lagata 4, 121 Reykjav?k, Iceland
> S?mi/Telephone : +354-5752037
> Br?fs?mi/Telefax:? +354-5752001
> Netfang/Email: julian at hafro.is, jmburgos at uw.edu
>



-- 
Julian Mariano Burgos
Hafranns?knastofnunin/Marine Research Institute
Sk?lagata 4, 121 Reykjav?k, Iceland
S?mi/Telephone : +354-5752037
Br?fs?mi/Telefax:? +354-5752001
Netfang/Email: julian at hafro.is, jmburgos at uw.edu


From hengl at spatial-analyst.net  Thu Oct 13 16:56:24 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Thu, 13 Oct 2011 16:56:24 +0200
Subject: [R-sig-Geo] address to lat/long
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA206DBD8E@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA206DBD8E@BALI.uhd.campus>
Message-ID: <4E96FC18.6070308@spatial-analyst.net>


Erin,

An example how to geocode address in R is given at:

http://spatial-analyst.net/wiki/index.php?title=Mapping_research_hot-spots#Geocoding_addresses

You might also want to take a look at rjson functionality 
[http://code.google.com/apis/maps/documentation/geocoding/] e.g.:

 > library(rjson)
 > library(RCurl)
 > googleurl <- 
url("http://maps.googleapis.com/maps/api/geocode/json?latlng=29.763159,-95.359386&sensor=false")
 > fromJSON(file=googleurl)[["results"]][[1]][["formatted_address"]]
[1] "1 Main St, Houston, TX 77002, USA"


T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001


On 11-10-2011 20:50, Hodgess, Erin wrote:
> Dear R Sig Geo People:
>
> Is there a function in the various geo packages that will take an address and produce lat/long values, please?
>
> thanks,
> Erin
>
>
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From inaki.sagarzazu at nuffield.ox.ac.uk  Thu Oct 13 17:23:11 2011
From: inaki.sagarzazu at nuffield.ox.ac.uk (Inaki Sagarzazu)
Date: Thu, 13 Oct 2011 16:23:11 +0100
Subject: [R-sig-Geo] Reporting results
Message-ID: <9538CBE90C88F94B82B565BA67BA6E8F2493F52543@EXMBX06.ad.oak.ox.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111013/af28f458/attachment.pl>

From heimann.richard at gmail.com  Thu Oct 13 17:41:54 2011
From: heimann.richard at gmail.com (Rich Heimann)
Date: Thu, 13 Oct 2011 11:41:54 -0400
Subject: [R-sig-Geo] Correlation between O&D
In-Reply-To: <CANVKczMi6nHgyqD5axg=OMLSFYgwuEcqx1n1As84SyjUpv_Ehg@mail.gmail.com>
References: <CAPAHiAKJptp6XA0-4MxfmEx1GOZrjg5JU+_OcqT=0QqsAw23BQ@mail.gmail.com>
	<B3C9A56C0E6FBF48A7D3ED79E9A7A9C0054540FE@OSTMAIL03VS3.ad.dot.gov>
	<CAPAHiAJhPfhOgUUZ2CZiQBnfrLHXsh4jF3C3hrt3bQUd4e8HbQ@mail.gmail.com>
	<B3C9A56C0E6FBF48A7D3ED79E9A7A9C00545428D@OSTMAIL03VS3.ad.dot.gov>
	<CANVKczMi6nHgyqD5axg=OMLSFYgwuEcqx1n1As84SyjUpv_Ehg@mail.gmail.com>
Message-ID: <CAPAHiAKmzq8smzYe0FjWETKN95L5Y6q1=ZB8Y50B9BBS+YJvOg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111013/6d624414/attachment.pl>

From dylan.beaudette at gmail.com  Thu Oct 13 19:57:57 2011
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Thu, 13 Oct 2011 10:57:57 -0700
Subject: [R-sig-Geo] Getting the other GIS to recognize files created by
	writeRaster()
Message-ID: <CAOGWcHK8gaAj3RrVK_Kd9p1UUg69UPFr5hWwuvHrtXdpV9auGw@mail.gmail.com>

I can't believe that I am asking for advice on how to assist my
special-needs GIS software with recognizing files created by the
raster/rgdal packages.

Recently (after some silent update by IT no doubt), I noticed that
files created like this:

writeRaster(r.mast,  filename='spatial_data/latest/mast-model',
datatype='FLT4S', format='ENVI', overwrite=TRUE, NAflag=-999)

... aren't read-in properly by ArcGIS (9.3.1). Specifically, the
raster statistics and the NODATA value aren't read from the file or
from the .xml file that is automatically generated by GDAL. I have
tried all of the different formats supported by the raster package,
with the 'ENVI' format getting the closest to working (statistics
almost correct but missing NODATA information). Are there any
additional things I can do to help ArcGIS figure these files out
without any tweaking from within the hulking beast? Ideally, I would
like to update model estimates on a semi-regular basis and have the
files ready for viewing by colleagues-- without manual intervention.

Thanks!

Dylan


From afischbach at usgs.gov  Thu Oct 13 21:31:35 2011
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Thu, 13 Oct 2011 12:31:35 -0700 (PDT)
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
Message-ID: <1318534295322-6890251.post@n2.nabble.com>

This works:
http://r-sig-geo.2731867.n2.nabble.com/file/n6890251/test.png 
require(sp)
library(raster)
library(rgdal)

pixel <- 25000 #pixel dimension in meters for both x and y 
xMin <- -3837500 #From NSIDC: ulxmap -3837500
xMax <- xMin + (pixel*304) 
yMax <- 5837500 #From NSIDC: ulymap 5837500
yMin <- yMax - (pixel*448) 
r <- raster(nrow=448, ncol=304, xmn=xMin, xmx=xMax, ymn=yMin, ymx=yMax)
projection(r) <- '+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0
+y_0=0 +a=6378273 +b=6356889.449 +units=m +no_defs'
#for(### Place time loop here){  
yyyy<- "2011" ### Use for debugging
mm<- "10" ### Use for debugging
dd = 12 ### Use for debugging
##Near Real Time: 
## 
ftp://sidads.colorado.edu/pub/DATASETS/nsidc0081_nrt_nasateam_seaice/north/
##Best long-term record through 2010: 
## 
ftp://sidads.colorado.edu/pub/DATASETS/nsidc0081_nrt_nasateam_seaice/north/[yyyy]/ 
	filename <-
paste("ftp://sidads.colorado.edu/pub/DATASETS/nsidc0081_nrt_nasateam_seaice/north/", 
	"nt_",yyyy,mm,sprintf("%2.2d", dd),"_f17_nrt_n.bin", sep="")
	
	con <- file(filename, 'rb')
	x <- readBin(con, "raw", 300)
	x <- readBin(con,"int", size=1, signed=FALSE, 150000)
	close(con)
	newx <- numeric(length(x)) #new variable for recoding the 'raw' byte data
	newx[x==251] <- 1 # arbitrarily set the the polar data hole to 100% ice
cover
	newx[x>251] <- 0 # set all non-ice pixels to 0% ice cover
	newx[x<251] <- x[x<251]/250 #scale ice cover to 1
	r <- setValues(r, newx)	# place result in raster
	plot(r) # Plot it 
	#plot(land, add=T) #Plot a land map to for reference
	sp <- as(r, 'SpatialGridDataFrame')
	geoTiffFile<- paste('D:/NSIDC/NearRealTime/',
"nt_",yyyy,mm,sprintf("%2.2d", dd),'.tif',sep='')
	writeGDAL(sp, geoTiffFile, drivername="GTiff") 
#}  ### end time loop


-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6890251.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From a.mosnier at gmail.com  Thu Oct 13 22:01:12 2011
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Thu, 13 Oct 2011 16:01:12 -0400
Subject: [R-sig-Geo] Convert raster to polygon
Message-ID: <CANkFkEf77gx6hgzCt9c7djnzieXuvE8D7d7+LRT13jASk4CC9Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111013/cc35459c/attachment.pl>

From r.turner at auckland.ac.nz  Thu Oct 13 22:23:05 2011
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Fri, 14 Oct 2011 09:23:05 +1300
Subject: [R-sig-Geo] Convert raster to polygon
In-Reply-To: <CANkFkEf77gx6hgzCt9c7djnzieXuvE8D7d7+LRT13jASk4CC9Q@mail.gmail.com>
References: <CANkFkEf77gx6hgzCt9c7djnzieXuvE8D7d7+LRT13jASk4CC9Q@mail.gmail.com>
Message-ID: <4E9748A9.4010102@auckland.ac.nz>

On 14/10/11 09:01, Arnaud Mosnier wrote:
> Dear all,
>
> In searching a solution from the internet, I found someone who had the same
> problem as me but ... who had no answers.
> I hope I will have better chance!  :-)
>
> Here is her explanation:
> http://r-sig-geo.2731867.n2.nabble.com/Converting-raster-to-polygons-with-just-one-polygon-for-cells-with-common-value-td6065464.html
>
> In the same way, I want to convert a raster with several values to
> SpatialPolygons.
> As in the previous message, I used the function "rasterToPolygons" (package
> raster) ... but it is really slow and memory hungry.
> Moreover, I want to have polygons that include contiguous raster cells with
> the same value, not one polygon by raster cell.
> The function unionSpatialPolygons can do that.
>
> Is there another (more efficient) way to do this in R ?

If you can convert your "raster" to a spatstat object of class "owin",
(and type "mask" of course) then the spatstat function "as.polygonal" will
convert it to an owin object of type "polygonal".  Which you will then
want, I presume, to convert to an object of class "SpatialPolygons".

The latter can be done easily via:

require(maptools)
Z <- as(Y,"SpatialPolygons")

where Y is the output of as.polygonal().

I don't know about the raster --> owin conversion though.  Others may
be able to tell you.

Note that you will need to have "gpclib" enabled to use as.polygonal()
and hence will need to be operating under the terms allowed by the
gpclib license.

HTH.

     cheers,

         Rolf Turner


From mathieu.rajerison at gmail.com  Fri Oct 14 07:24:26 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Fri, 14 Oct 2011 07:24:26 +0200
Subject: [R-sig-Geo] Convert raster to polygon
In-Reply-To: <4E9748A9.4010102@auckland.ac.nz>
References: <CANkFkEf77gx6hgzCt9c7djnzieXuvE8D7d7+LRT13jASk4CC9Q@mail.gmail.com>
	<4E9748A9.4010102@auckland.ac.nz>
Message-ID: <CAGfc75=vxJYk0X=zp_EJwyyJYf9cyXZX79Q9k2FVXZviU_K+eA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111014/9223d75a/attachment.pl>

From valdounet at gmail.com  Fri Oct 14 08:48:18 2011
From: valdounet at gmail.com (Vlad)
Date: Fri, 14 Oct 2011 08:48:18 +0200
Subject: [R-sig-Geo] Convert raster to polygon
In-Reply-To: <CAGfc75=vxJYk0X=zp_EJwyyJYf9cyXZX79Q9k2FVXZviU_K+eA@mail.gmail.com>
References: <CANkFkEf77gx6hgzCt9c7djnzieXuvE8D7d7+LRT13jASk4CC9Q@mail.gmail.com>	<4E9748A9.4010102@auckland.ac.nz>
	<CAGfc75=vxJYk0X=zp_EJwyyJYf9cyXZX79Q9k2FVXZviU_K+eA@mail.gmail.com>
Message-ID: <4E97DB32.6060401@gmail.com>

Hello,

I had the same problem in the past and so I developped a function that 
allow to convert directly a raster to a SpatialPolygonsDataFrame.

The function ('polygonize') is available in a small package I wrote :
http://sourceforge.net/projects/geoconv/

The package is written in French (sorry about that), so if the 
documentation is not understandable, ask me.

I hope this can help.


Vlad

----
Vladislav Navel

Ing?nieur d'?tudes
Atmo Poitou-Charentes
05 46 44 83 88


Le 14/10/2011 07:24, Mathieu Rajerison a ?crit :
> Hi,
>
> And will contiguous raster cells have the same value, as Arnaud expected?
>
> 2011/10/13 Rolf Turner<r.turner at auckland.ac.nz>
>
>> On 14/10/11 09:01, Arnaud Mosnier wrote:
>>
>>> Dear all,
>>>
>>> In searching a solution from the internet, I found someone who had the
>>> same
>>> problem as me but ... who had no answers.
>>> I hope I will have better chance!  :-)
>>>
>>> Here is her explanation:
>>> http://r-sig-geo.2731867.n2.**nabble.com/Converting-raster-**
>>> to-polygons-with-just-one-**polygon-for-cells-with-common-**
>>> value-td6065464.html<http://r-sig-geo.2731867.n2.nabble.com/Converting-raster-to-polygons-with-just-one-polygon-for-cells-with-common-value-td6065464.html>
>>>
>>> In the same way, I want to convert a raster with several values to
>>> SpatialPolygons.
>>> As in the previous message, I used the function "rasterToPolygons"
>>> (package
>>> raster) ... but it is really slow and memory hungry.
>>> Moreover, I want to have polygons that include contiguous raster cells
>>> with
>>> the same value, not one polygon by raster cell.
>>> The function unionSpatialPolygons can do that.
>>>
>>> Is there another (more efficient) way to do this in R ?
>>>
>> If you can convert your "raster" to a spatstat object of class "owin",
>> (and type "mask" of course) then the spatstat function "as.polygonal" will
>> convert it to an owin object of type "polygonal".  Which you will then
>> want, I presume, to convert to an object of class "SpatialPolygons".
>>
>> The latter can be done easily via:
>>
>> require(maptools)
>> Z<- as(Y,"SpatialPolygons")
>>
>> where Y is the output of as.polygonal().
>>
>> I don't know about the raster -->  owin conversion though.  Others may
>> be able to tell you.
>>
>> Note that you will need to have "gpclib" enabled to use as.polygonal()
>> and hence will need to be operating under the terms allowed by the
>> gpclib license.
>>
>> HTH.
>>
>>     cheers,
>>
>>         Rolf Turner
>>
>>
>> ______________________________**_________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From philsenpilsen at freenet.de  Fri Oct 14 12:19:05 2011
From: philsenpilsen at freenet.de (philsen)
Date: Fri, 14 Oct 2011 12:19:05 +0200
Subject: [R-sig-Geo] Two scale process in experimental variogram - how to
 fit a theoretical variogram?
Message-ID: <4E980C99.6010206@freenet.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111014/3c63c6f7/attachment.pl>

From zenlines at gmail.com  Fri Oct 14 12:32:07 2011
From: zenlines at gmail.com (Brian Oney)
Date: Fri, 14 Oct 2011 12:32:07 +0200
Subject: [R-sig-Geo] Problems with spgrass6 and initGRASS in Fedora 14
Message-ID: <4E980FA7.8070900@gmail.com>

Hi Julian,

The first steps are difficult because there is alot to know. I am new to 
Ubuntu, but have gotten everything working and working well. A general 
tip from Roger is to start R from GRASS, then there is no need for 
initGRASS function, because the necessary environmental variable are 
then set, and the .gisrc file is not endangered.

Not having worked with Fedora *, I can tell you how to do it in the 
shiny new Ubuntu release.

1. open a terminal.
2. type: "grass"
3. select location and what not.
4. go to the running GRASS command line.
5. type R
6. load the spgrass package.

That should be all you need. I hope that works for you.

hth,
Brian


From tom.gottfried at tum.de  Fri Oct 14 12:50:19 2011
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Fri, 14 Oct 2011 12:50:19 +0200
Subject: [R-sig-Geo] Two scale process in experimental variogram - how
 to fit a theoretical variogram?
In-Reply-To: <4E980C99.6010206@freenet.de>
References: <4E980C99.6010206@freenet.de>
Message-ID: <4E9813EB.9040901@tum.de>

Hi Philip,

though this does not answer your question: tractor tracks and seedbed rows suggest strong anisotropy 
and a periodical structure perpendicular to them. If you are interested in roughness induced by 
different tillage practices (i.e. seedbed preparation) you might be more interested in only the 
anisotropic variogram parallel to tracks and rows, thus excluding the effects of wheels and seeding 
machinery.

HTH anyhow,
Tom

Am 14.10.2011 12:19, schrieb philsen:
> Dear list,
>
> I am trying to characterize different tillage patterns of agricultural
> fields using variogram analysis for microwave remote sensing. Basis for
> the analysis is a high resolution DSM with a 2x2  mm^2 resolution and a
> size of 1x6 m^2 (see pdf at
> URL:http://www.geographie.uni-muenchen.de/department/admin/lehre/upload/1094/Disp_Vario_Surface.pdf).
>
> The aim is to characterize the horizontal roughness component by using
> the autocorrelation length /l/ derived from an autocorrelation function
> (ACF) at which e.g. the exponential ACF drops under 1/e.
>
> When using a subsample of 10000 points the variogram is calculated using
> gstat by
>
>   >library(gstat)
>   >data<-
> read.table(url("http://www.geographie.uni-muenchen.de/department/admin/lehre/upload/1094/subsample_DSM.csv"),
> header=TRUE)
>   >maxdist=max(dist(data, method="maximum"))/2
>   >coordinates(data)<- c("X","Y")
>   >v<- variogram(Z~1, data, cutoff=maxdist, width=5)
>   >plot(v)
>
>   From my understanding, there are two processes of different scale
> visible. The first maximum of the experimental variogram is related to
> the small scale seedbed rows, while the second max. is related to the
> appearance of tractor tracks with a distance of ca. 150 cm (see DGM-plot
> in pdf).
>
> So the question is how to fit a theoretical variogram to the data, which
> allows me to characterize both processes in terms of an autocorrelation
> length /l/_1 and /l/_2?
>
>   From searching trough the archive I have found a discussion about
> nested variograms. Therefore I tried to fit the sum of two exponential
> variogram models to my data:
>
>   >nest.vfit<- fit.variogram(v, model=vgm(1, "Exp", 90, add.to=vgm(1,
> "Exp", 200)))
>   >plot(v, nest.vfit)
>
> However I am not sure about the output? To characterize /l/_1 and /l/_2,
> I think I need at least two theoretical variograms to invert
> /C(h) = 1 - ?(h) / ?(inf)/ with /C/(h)= fitted ACF at distance h
>
> Hopefully there is somebody who can help me .....
>
> Kind regards,
>
> Philip
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From oscar.perpinan at upm.es  Fri Oct 14 13:27:20 2011
From: oscar.perpinan at upm.es (Oscar =?UTF-8?B?UGVycGnDsWFu?= Lamigueiro)
Date: Fri, 14 Oct 2011 13:27:20 +0200
Subject: [R-sig-Geo] Logarithmic legend
In-Reply-To: <4E8D6CBA.8010709@knmi.nl>
References: <CANkFkEdRqcdPD+mPLkLt5QBfV5uG5MdE9CyJ7+GhtXF2XBG9Xg@mail.gmail.com>
	<4E8D6CBA.8010709@knmi.nl>
Message-ID: <20111014132720.0fd89128@OPL-EUITI>

Hello,

I have been working on a suitable approach with lattice and raster. Now
you can use levelplot with a logarithmic scale both for the colorkey and
the contour lines. 

First you have to install the 0.10-6 version of rasterVis from R-Forge:

install.packages("rasterVis", repos="http://R-Forge.R-project.org")

library(raster)
library(rasterVis) ## 0.10-6

f <- system.file("external/test.grd", package="raster")
r <- raster(f)
levelplot(r, zscaleLog=10, contour=TRUE, labels=TRUE)

Still in development!

Cheers,

Oscar.

-------------------
Oscar Perpi??n Lamigueiro
Dpto. Ingenier?a El?ctrica
EUITI-UPM

http://procomun.wordpress.com

-----------------------------------------
>Hi,
>
>You could use ggplot:
>
>library(gstat)
>library(ggplot2)
>loadMeuse()
>
>meuse.grid.df = as.data.frame(meuse.grid)
>head(meuse.grid.df)
>
># Create a dist + 1 for log transformation
># prevents -Inf for 0 values
>meuse.grid.df$dist_plus1 = meuse.grid.df$dist + 1
>
>ggplot(aes(x = x, y = y, fill = dist_plus1), data = meuse.grid.df) +
>geom_tile() +
>    coord_equal() + scale_fill_continuous(trans="log")
>
># Some theme changes I like
>theme_set(theme_bw())
>ggplot(aes(x = x, y = y, fill = dist_plus1), data = meuse.grid.df) +
>geom_tile() +
>    coord_equal() + scale_fill_continuous(trans="log")
>
>hope this helps,
>Paul
>
>On 10/05/2011 06:21 PM, Arnaud Mosnier wrote:
>> Dear Geo Users,
>>
>> Please, can someone explain me how to plot a raster using a
>> logarithmic scale and obtaining the legend with this scale ?
>>
>> Thanks for any help,
>>
>> Arnaud
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>-- 
>Paul Hiemstra, Ph.D.
>Global Climate Division
>Royal Netherlands Meteorological Institute (KNMI)
>Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
>P.O. Box 201 | 3730 AE | De Bilt
>tel: +31 30 2206 494
>
>http://intamap.geo.uu.nl/~paul
>http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From philsenpilsen at freenet.de  Fri Oct 14 13:29:47 2011
From: philsenpilsen at freenet.de (philsen)
Date: Fri, 14 Oct 2011 13:29:47 +0200
Subject: [R-sig-Geo] Two scale process in experimental variogram - how
 to fit a theoretical variogram?
Message-ID: <4E981D2B.9070606@freenet.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111014/cefba6cf/attachment.pl>

From tom.gottfried at tum.de  Fri Oct 14 14:36:31 2011
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Fri, 14 Oct 2011 14:36:31 +0200
Subject: [R-sig-Geo] Two scale process in experimental variogram - how
 to fit a theoretical variogram?
In-Reply-To: <4E981D2B.9070606@freenet.de>
References: <4E981D2B.9070606@freenet.de>
Message-ID: <4E982CCF.20407@tum.de>

Hi,

Am 14.10.2011 13:29, schrieb philsen:
> Hi Tom,
>
> thanks for the answer, but I am explicit interested in the direction
> perpendicular to the row, due to imaging direction of the radar
> satellite. In addition, we also acquired DSMs in parallel to the rows,
> which as you mentioned do not show these behaviour. However, an
> anisotropic variogram perpendicular to the rows shows the same variogram
> as the attached omnidirectional.

... because the shape of your investigation area imposes anisotropy to any semivariance with lag > 
100 m.

Let me comment on your interpretation of the maxima in your variogram: You have minima at multiples 
of 150 m, corresponding to the spacing between tractor tracks (seems to be a small tractor?). The 
narrow "valleys" surrounding these minima indicate strong similarity between the tractor tracks and 
higher variability between them. A short scale periodicity of seedbed rows does not seem to be visible.
Back to your original question: I can't think of something that fits better than an exponential or 
spherical plus a periodical model. Though this does not represent the narrow valleys very well as 
the periodical model is basically a sine.

regards,
Tom

>
> cheers,
>
> Philip
>
> -------- Original-Nachricht --------
> Betreff: 	Re: [R-sig-Geo] Two scale process in experimental variogram -
> how to fit a theoretical variogram?
> Datum: 	Fri, 14 Oct 2011 12:50:19 +0200
> Von: 	Tom Gottfried<tom.gottfried at tum.de>
> An: 	r-sig-geo at r-project.org
>
>
>
> Hi Philip,
>
> though this does not answer your question: tractor tracks and seedbed rows suggest strong anisotropy
> and a periodical structure perpendicular to them. If you are interested in roughness induced by
> different tillage practices (i.e. seedbed preparation) you might be more interested in only the
> anisotropic variogram parallel to tracks and rows, thus excluding the effects of wheels and seeding
> machinery.
>
> HTH anyhow,
> Tom
>
> Am 14.10.2011 12:19, schrieb philsen:
>>   Dear list,
>>
>>   I am trying to characterize different tillage patterns of agricultural
>>   fields using variogram analysis for microwave remote sensing. Basis for
>>   the analysis is a high resolution DSM with a 2x2  mm^2 resolution and a
>>   size of 1x6 m^2 (see pdf at
>>   URL:http://www.geographie.uni-muenchen.de/department/admin/lehre/upload/1094/Disp_Vario_Surface.pdf).
>>
>>   The aim is to characterize the horizontal roughness component by using
>>   the autocorrelation length /l/ derived from an autocorrelation function
>>   (ACF) at which e.g. the exponential ACF drops under 1/e.
>>
>>   When using a subsample of 10000 points the variogram is calculated using
>>   gstat by
>>
>>     >library(gstat)
>>     >data<-
>>   read.table(url("http://www.geographie.uni-muenchen.de/department/admin/lehre/upload/1094/subsample_DSM.csv"),
>>   header=TRUE)
>>     >maxdist=max(dist(data, method="maximum"))/2
>>     >coordinates(data)<- c("X","Y")
>>     >v<- variogram(Z~1, data, cutoff=maxdist, width=5)
>>     >plot(v)
>>
>>      From my understanding, there are two processes of different scale
>>   visible. The first maximum of the experimental variogram is related to
>>   the small scale seedbed rows, while the second max. is related to the
>>   appearance of tractor tracks with a distance of ca. 150 cm (see DGM-plot
>>   in pdf).
>>
>>   So the question is how to fit a theoretical variogram to the data, which
>>   allows me to characterize both processes in terms of an autocorrelation
>>   length /l/_1 and /l/_2?
>>
>>      From searching trough the archive I have found a discussion about
>>   nested variograms. Therefore I tried to fit the sum of two exponential
>>   variogram models to my data:
>>
>>     >nest.vfit<- fit.variogram(v, model=vgm(1, "Exp", 90, add.to=vgm(1,
>>   "Exp", 200)))
>>     >plot(v, nest.vfit)
>>
>>   However I am not sure about the output? To characterize /l/_1 and /l/_2,
>>   I think I need at least two theoretical variograms to invert
>>   /C(h) = 1 - ?(h) / ?(inf)/ with /C/(h)= fitted ACF at distance h
>>
>>   Hopefully there is somebody who can help me .....
>>
>>   Kind regards,
>>
>>   Philip
>>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From hobu.inc at gmail.com  Fri Oct 14 18:11:08 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri, 14 Oct 2011 11:11:08 -0500
Subject: [R-sig-Geo] Getting the other GIS to recognize files created by
	writeRaster()
In-Reply-To: <CAOGWcHK8gaAj3RrVK_Kd9p1UUg69UPFr5hWwuvHrtXdpV9auGw@mail.gmail.com>
References: <CAOGWcHK8gaAj3RrVK_Kd9p1UUg69UPFr5hWwuvHrtXdpV9auGw@mail.gmail.com>
Message-ID: <B3268B1C-B720-404E-A65B-A09839F257AD@gmail.com>


On Oct 13, 2011, at 12:57 PM, Dylan Beaudette wrote:

> I can't believe that I am asking for advice on how to assist my
> special-needs GIS software with recognizing files created by the
> raster/rgdal packages.
> 
> Recently (after some silent update by IT no doubt), I noticed that
> files created like this:
> 
> writeRaster(r.mast,  filename='spatial_data/latest/mast-model',
> datatype='FLT4S', format='ENVI', overwrite=TRUE, NAflag=-999)
> 
> ... aren't read-in properly by ArcGIS (9.3.1). Specifically, the
> raster statistics and the NODATA value aren't read from the file or
> from the .xml file that is automatically generated by GDAL. I have
> tried all of the different formats supported by the raster package,
> with the 'ENVI' format getting the closest to working (statistics
> almost correct but missing NODATA information). Are there any
> additional things I can do to help ArcGIS figure these files out
> without any tweaking from within the hulking beast? Ideally, I would
> like to update model estimates on a semi-regular basis and have the
> files ready for viewing by colleagues-- without manual intervention.

Dylan,

I think you want the ESRI_XML_PAM creation option set to YES using the GTiff driver.

Howard

From sandeep.coepcivil at gmail.com  Fri Oct 14 18:11:06 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Fri, 14 Oct 2011 11:11:06 -0500
Subject: [R-sig-Geo] gstat error
Message-ID: <CAHnA5RVqYausn-nr4Ot-_TP0M_bX_RCBc_i7pWyvEYGKBiQxgA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111014/1e35f06d/attachment.pl>

From Roger.Bivand at nhh.no  Fri Oct 14 19:09:13 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 14 Oct 2011 19:09:13 +0200 (CEST)
Subject: [R-sig-Geo] Reporting results
In-Reply-To: <9538CBE90C88F94B82B565BA67BA6E8F2493F52543@EXMBX06.ad.oak.ox.ac.uk>
References: <9538CBE90C88F94B82B565BA67BA6E8F2493F52543@EXMBX06.ad.oak.ox.ac.uk>
Message-ID: <alpine.LRH.2.00.1110141908020.4806@reclus.nhh.no>

On Thu, 13 Oct 2011, Inaki Sagarzazu wrote:

> Hi,
>
> I ran several regressions of gwr and want to report the results using 
> the global mean that the summary of gwr provides, however, I can't find 
> a global se. Is there a way to obtain this from the gwr results.

No, simply run lm() on the same formula and data arguments. gwr() uses 
lm.wfit() internally, which does not return an lm() object.

Roger

>
> thanks
>
> ---------------------------------------------------------------------------------------------------------------
> I?aki Sagarzazu, PhD
> Research Officer
> Nuffield College
> University of Oxford
> OX1 1NF Oxford
> United Kingdom
>
> Office: 44 (0) 1 865 614990
> Inaki.Sagarzazu at nuffield.ox.ac.uk<mailto:Inaki.Sagarzazu at nuffield.ox.ac.uk>
> http://www.inaki-sagarzazu.com<http://www.nuffield.ox.ac.uk/users/sagarzazu/index.html>
>
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From r.turner at auckland.ac.nz  Sat Oct 15 01:14:39 2011
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 15 Oct 2011 12:14:39 +1300
Subject: [R-sig-Geo] Convert raster to polygon
In-Reply-To: <CAGfc75=vxJYk0X=zp_EJwyyJYf9cyXZX79Q9k2FVXZviU_K+eA@mail.gmail.com>
References: <CANkFkEf77gx6hgzCt9c7djnzieXuvE8D7d7+LRT13jASk4CC9Q@mail.gmail.com>	<4E9748A9.4010102@auckland.ac.nz>
	<CAGfc75=vxJYk0X=zp_EJwyyJYf9cyXZX79Q9k2FVXZviU_K+eA@mail.gmail.com>
Message-ID: <4E98C25F.4050107@auckland.ac.nz>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111015/06c11a71/attachment.pl>

From r.turner at auckland.ac.nz  Sat Oct 15 03:46:43 2011
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 15 Oct 2011 14:46:43 +1300
Subject: [R-sig-Geo] Convert raster to polygon
In-Reply-To: <CAGfc75=vxJYk0X=zp_EJwyyJYf9cyXZX79Q9k2FVXZviU_K+eA@mail.gmail.com>
References: <CANkFkEf77gx6hgzCt9c7djnzieXuvE8D7d7+LRT13jASk4CC9Q@mail.gmail.com>	<4E9748A9.4010102@auckland.ac.nz>
	<CAGfc75=vxJYk0X=zp_EJwyyJYf9cyXZX79Q9k2FVXZviU_K+eA@mail.gmail.com>
Message-ID: <4E98E603.2050209@auckland.ac.nz>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111015/1c9cbbf4/attachment.pl>

From edzer.pebesma at uni-muenster.de  Sat Oct 15 11:14:35 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 15 Oct 2011 11:14:35 +0200
Subject: [R-sig-Geo] gstat error
In-Reply-To: <CAHnA5RVqYausn-nr4Ot-_TP0M_bX_RCBc_i7pWyvEYGKBiQxgA@mail.gmail.com>
References: <CAHnA5RVqYausn-nr4Ot-_TP0M_bX_RCBc_i7pWyvEYGKBiQxgA@mail.gmail.com>
Message-ID: <4E994EFB.3090308@uni-muenster.de>

The most common cause is that you have multiple observations at single 
locations. You can use function zerodist to figure out whether this is 
the case.

On 10/14/2011 06:11 PM, Sandeep Patil wrote:
> Hello
>
> I am running a Kriging cross validation in Automap. I get the following
> error
>
>
> "chfactor.c", line 130: singular matrix in function LDLfactor()
>
> I did check out the troubleshooting part of gstat manual which
>
> suggested two possible reasons
>
>
>
> during simulation, when an observation falls almost exactly at a simu-
> lation location. Solution: increase the value of zero
>
> when two observations occur at identical location occur and noaverage
> or average=0 was dened in a data denition. Solution: remove the
> noaverage, or add average=1
>
>
> Can someone elaborate what exactly is to be done in the above two options
> as i am finding it a bit cryptic.
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From sandeep.coepcivil at gmail.com  Sat Oct 15 16:57:32 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Sat, 15 Oct 2011 09:57:32 -0500
Subject: [R-sig-Geo] Delete points within a certain distance of each other
Message-ID: <CAHnA5RVH18Cwy28NsFFVOibG-_JOJCcsWMvdeageH=FMdibB9A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111015/12afa459/attachment.pl>

From dieter.vanderelst at gmail.com  Sat Oct 15 17:01:29 2011
From: dieter.vanderelst at gmail.com (dieter Vanderelst)
Date: Sat, 15 Oct 2011 17:01:29 +0200
Subject: [R-sig-Geo] create inset map
Message-ID: <4E99A049.4080706@gmail.com>

Hello List,

I have a map of Africa I plot using spplot(). In addition, I have a second map of Sao Tome (a small island). I want to add this second map to the first as an inset because it would otherwise not be visible at the same scale of the continent.

This is what I currently do: I save both maps to a variable and plot them using the print.trellis function (see http://stat.ethz.ch/R-manual/R-devel/library/lattice/html/print.trellis.html).

This is the code:
p1<-spplot(Africa,c('var1'))
p2<-spplot(Sao,c('var1'))
print(p1,position=c(0,0,1,1),more=T)
print(p2,position=c(0,0,0.3,0.3),more=T)

This results is a map of Africa with a second map of Sao in the left bottom corner.

However, the location of the inset in the larger map is difficult to control using this code. Spplot enforces the aspect ratio of the maps to be respected. Of course, this is necessary for mapping. However, this seems to conflict with the position arguments in the print statements.

Does anybody have some which allows controlling the location of an inset map in a larger map?

Regards,
Dieter


From edzer.pebesma at uni-muenster.de  Sat Oct 15 17:11:29 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 15 Oct 2011 17:11:29 +0200
Subject: [R-sig-Geo] gstat error
In-Reply-To: <CAHnA5RXzy_hdLdQF=x3z75-U_eCeUeBdBM7u8hMPt6F817bLHA@mail.gmail.com>
References: <CAHnA5RVqYausn-nr4Ot-_TP0M_bX_RCBc_i7pWyvEYGKBiQxgA@mail.gmail.com>
	<4E994EFB.3090308@uni-muenster.de>
	<CAHnA5RXzy_hdLdQF=x3z75-U_eCeUeBdBM7u8hMPt6F817bLHA@mail.gmail.com>
Message-ID: <4E99A2A1.5000408@uni-muenster.de>

As you gave practically no information besides the error message, why 
don't you simply try that.

Another possible cause is using a Gaussian variogram model with zero nugget.



On 10/15/2011 04:48 PM, Sandeep Patil wrote:
> I did check the data once again and did not find any such points .
> Should i remove points that are very close to each other i.e
> replace them with a single point ?
>
> On Sat, Oct 15, 2011 at 4:14 AM, Edzer Pebesma
> <edzer.pebesma at uni-muenster.de <mailto:edzer.pebesma at uni-muenster.de>>
> wrote:
>
>     The most common cause is that you have multiple observations at
>     single locations. You can use function zerodist to figure out
>     whether this is the case.
>
>
>     On 10/14/2011 06:11 PM, Sandeep Patil wrote:
>
>         Hello
>
>         I am running a Kriging cross validation in Automap. I get the
>         following
>         error
>
>
>         "chfactor.c", line 130: singular matrix in function LDLfactor()
>
>         I did check out the troubleshooting part of gstat manual which
>
>         suggested two possible reasons
>
>
>
>         during simulation, when an observation falls almost exactly at a
>         simu-
>         lation location. Solution: increase the value of zero
>
>         when two observations occur at identical location occur and
>         noaverage
>         or average=0 was dened in a data denition. Solution: remove the
>         noaverage, or add average=1
>
>
>         Can someone elaborate what exactly is to be done in the above
>         two options
>         as i am finding it a bit cryptic.
>
>
>     --
>     Edzer Pebesma
>     Institute for Geoinformatics (ifgi), University of M?nster
>     Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>     8333081, Fax: +49 251 8339763 <tel:%2B49%20251%208339763>
>     http://ifgi.uni-muenster.de
>     http://www.52north.org/__geostatistics
>     <http://www.52north.org/geostatistics> e.pebesma at wwu.de
>     <mailto:e.pebesma at wwu.de>
>
>     _________________________________________________
>     R-sig-Geo mailing list
>     R-sig-Geo at r-project.org <mailto:R-sig-Geo at r-project.org>
>     https://stat.ethz.ch/mailman/__listinfo/r-sig-geo
>     <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>
>
>
>
> --
> Sandeep R Patil
> Graduate Student
> M.S (Hydrological Sciences)
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jpglutting at gmail.com  Sat Oct 15 17:19:48 2011
From: jpglutting at gmail.com (JP Glutting)
Date: Sat, 15 Oct 2011 17:19:48 +0200
Subject: [R-sig-Geo] rgdal install in local directory on server
In-Reply-To: <CALx1CkT_-r6p46fac7jkK=eX9edMCDzMkHmV==4REoCcaLZVTw@mail.gmail.com>
References: <CALx1CkT_-r6p46fac7jkK=eX9edMCDzMkHmV==4REoCcaLZVTw@mail.gmail.com>
Message-ID: <CALx1CkRdPYQADvpgkWk6MiAdFpKZABOx=Y5mQW-fuLYO3q0V4g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111015/bdeb0c84/attachment.pl>

From edzer.pebesma at uni-muenster.de  Sat Oct 15 17:36:59 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 15 Oct 2011 17:36:59 +0200
Subject: [R-sig-Geo] create inset map
In-Reply-To: <4E99A049.4080706@gmail.com>
References: <4E99A049.4080706@gmail.com>
Message-ID: <4E99A89B.7080807@uni-muenster.de>

you might want to look at maptools::elide, to shift Sao to the Africa 
map, and perhaps rbind() the two objects into a single object for spplot.

Alternative, pass Sao in sp.layout, but than you'd have to do the 
colouring yourself, which might be fine if you need to do it just once.

On 10/15/2011 05:01 PM, dieter Vanderelst wrote:
> Hello List,
>
> I have a map of Africa I plot using spplot(). In addition, I have a
> second map of Sao Tome (a small island). I want to add this second map
> to the first as an inset because it would otherwise not be visible at
> the same scale of the continent.
>
> This is what I currently do: I save both maps to a variable and plot
> them using the print.trellis function (see
> http://stat.ethz.ch/R-manual/R-devel/library/lattice/html/print.trellis.html).
>
>
> This is the code:
> p1<-spplot(Africa,c('var1'))
> p2<-spplot(Sao,c('var1'))
> print(p1,position=c(0,0,1,1),more=T)
> print(p2,position=c(0,0,0.3,0.3),more=T)
>
> This results is a map of Africa with a second map of Sao in the left
> bottom corner.
>
> However, the location of the inset in the larger map is difficult to
> control using this code. Spplot enforces the aspect ratio of the maps to
> be respected. Of course, this is necessary for mapping. However, this
> seems to conflict with the position arguments in the print statements.
>
> Does anybody have some which allows controlling the location of an inset
> map in a larger map?
>
> Regards,
> Dieter
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From edzer.pebesma at uni-muenster.de  Sat Oct 15 17:41:07 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 15 Oct 2011 17:41:07 +0200
Subject: [R-sig-Geo] Delete points within a certain distance of each
	other
In-Reply-To: <CAHnA5RVH18Cwy28NsFFVOibG-_JOJCcsWMvdeageH=FMdibB9A@mail.gmail.com>
References: <CAHnA5RVH18Cwy28NsFFVOibG-_JOJCcsWMvdeageH=FMdibB9A@mail.gmail.com>
Message-ID: <4E99A993.4030200@uni-muenster.de>

Sandeep,

I pointed you to sp::zerodist earlier today. It won't harm to read its 
documentation. After all, that is why we write it.

On 10/15/2011 04:57 PM, Sandeep Patil wrote:
> Hello all
>
> I have about 4500 spatial points which are irregularly spaced...
>
> What is want to do is to replace points that are clustered very near
>
> each other by one point ...i.e say the distance betweeen Point A&  Point B
>
> is less than a threshold that i will define , i will delete either A or B
> and essentially
>
> do this for the complete dataset so that there is at least a minimum
> separation
>
> between every pair of points.
>
> Any idea how to proceed ?
>
> Sandeep
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From wisfool at email.arizona.edu  Sat Oct 15 18:18:09 2011
From: wisfool at email.arizona.edu (Roberto Badilla Fuentes)
Date: Sat, 15 Oct 2011 09:18:09 -0700
Subject: [R-sig-Geo] Delete points within a certain distance of each
	other
In-Reply-To: <CAHnA5RVH18Cwy28NsFFVOibG-_JOJCcsWMvdeageH=FMdibB9A@mail.gmail.com>
References: <CAHnA5RVH18Cwy28NsFFVOibG-_JOJCcsWMvdeageH=FMdibB9A@mail.gmail.com>
Message-ID: <CA+TrVx0wxx19M_zzyxK8Pv02JGABdwXS7qQDwbi6mNW0OMHY-w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111015/5625ceb9/attachment.pl>

From csfowler at uw.edu  Sun Oct 16 10:35:48 2011
From: csfowler at uw.edu (Christopher S. Fowler)
Date: Sun, 16 Oct 2011 01:35:48 -0700
Subject: [R-sig-Geo] create inset map
In-Reply-To: <4E99A89B.7080807@uni-muenster.de>
References: <4E99A049.4080706@gmail.com>
	<4E99A89B.7080807@uni-muenster.de>
Message-ID: <CAFK3DV8Sfg08EKAXsLytm2E0ZwhKUn9=h1BhP8cR2nR8abTUuA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111016/5bad0667/attachment.pl>

From epistat at gmail.com  Sun Oct 16 16:10:40 2011
From: epistat at gmail.com (zhijie zhang)
Date: Sun, 16 Oct 2011 22:10:40 +0800
Subject: [R-sig-Geo] errors in installing HDF5 package under windows
Message-ID: <CAN9LD-01R=63PX_LNe705bZa0Oauts1oP9DEMy3TjR2Tjqvwzg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111016/d7649780/attachment.pl>

From HodgessE at uhd.edu  Mon Oct 17 05:01:06 2011
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Sun, 16 Oct 2011 22:01:06 -0500
Subject: [R-sig-Geo] IDW example
Message-ID: <586A4828D7AAA04CA9B258C50A28DA206DBDE6@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111016/34c5fb2a/attachment.pl>

From moshersteven at gmail.com  Mon Oct 17 05:54:07 2011
From: moshersteven at gmail.com (steven mosher)
Date: Sun, 16 Oct 2011 20:54:07 -0700
Subject: [R-sig-Geo] Creating big raster from small tiles
Message-ID: <CAFFLneT-4Vqr++ao0F521gKefLDmMW81e4RWEfnxU2qP==ZaXw@mail.gmail.com>

 I have 72 "tiles" in a tif format and each tile is   30X30

>tile
class       : RasterLayer
dimensions  : 3600, 3600, 12960000  (nrow, ncol, ncell)
resolution  : 0.008333333, 0.008333333  (x, y)
extent      : 60, 90, 60, 90  (xmin, xmax, ymin, ymax)
coord. ref. : NA
values      : C:/Users/steve/....
min value   : 0
max value   : 255

What I'd like to do is find  the fastest way to bring all 72 tiles
into one big raster.

merge() seems like one good choice, where I would   merge each tile
with a blank raster that would get
filled in incrementally by each tile

> world
class       : RasterLayer
dimensions  : 21600, 43200, 933120000  (nrow, ncol, ncell)
resolution  : 0.008333333, 0.008333333  (x, y)
extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0
values      : none

world <- merge(tile, world)

and the  repeat that for the remaining 71 tiles.  I'm also think that
one could extract the values from the tile
and use setValues  but  that appears to hit the memory wall in
Windows.  The other option
I suppose is to use writeValues()  and create  a big file from the tiles.

Am I missing any obvious options?

Steve


From moshersteven at gmail.com  Mon Oct 17 06:36:34 2011
From: moshersteven at gmail.com (steven mosher)
Date: Sun, 16 Oct 2011 21:36:34 -0700
Subject: [R-sig-Geo] Creating big raster from small tiles
In-Reply-To: <CAFFLneT-4Vqr++ao0F521gKefLDmMW81e4RWEfnxU2qP==ZaXw@mail.gmail.com>
References: <CAFFLneT-4Vqr++ao0F521gKefLDmMW81e4RWEfnxU2qP==ZaXw@mail.gmail.com>
Message-ID: <CAFFLneSOm9JMXtF1MkXUQU=vsbRnBLevWXqJhasghf9JKHc0LQ@mail.gmail.com>

 unionExtent() looks like the best approach.


On Sun, Oct 16, 2011 at 8:54 PM, steven mosher <moshersteven at gmail.com> wrote:
> ?I have 72 "tiles" in a tif format and each tile is ? 30X30
>
>>tile
> class ? ? ? : RasterLayer
> dimensions ?: 3600, 3600, 12960000 ?(nrow, ncol, ncell)
> resolution ?: 0.008333333, 0.008333333 ?(x, y)
> extent ? ? ?: 60, 90, 60, 90 ?(xmin, xmax, ymin, ymax)
> coord. ref. : NA
> values ? ? ?: C:/Users/steve/....
> min value ? : 0
> max value ? : 255
>
> What I'd like to do is find ?the fastest way to bring all 72 tiles
> into one big raster.
>
> merge() seems like one good choice, where I would ? merge each tile
> with a blank raster that would get
> filled in incrementally by each tile
>
>> world
> class ? ? ? : RasterLayer
> dimensions ?: 21600, 43200, 933120000 ?(nrow, ncol, ncell)
> resolution ?: 0.008333333, 0.008333333 ?(x, y)
> extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0
> values ? ? ?: none
>
> world <- merge(tile, world)
>
> and the ?repeat that for the remaining 71 tiles. ?I'm also think that
> one could extract the values from the tile
> and use setValues ?but ?that appears to hit the memory wall in
> Windows. ?The other option
> I suppose is to use writeValues() ?and create ?a big file from the tiles.
>
> Am I missing any obvious options?
>
> Steve
>


From r.hijmans at gmail.com  Mon Oct 17 07:01:50 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 16 Oct 2011 22:01:50 -0700
Subject: [R-sig-Geo] Creating big raster from small tiles
In-Reply-To: <CAFFLneT-4Vqr++ao0F521gKefLDmMW81e4RWEfnxU2qP==ZaXw@mail.gmail.com>
References: <CAFFLneT-4Vqr++ao0F521gKefLDmMW81e4RWEfnxU2qP==ZaXw@mail.gmail.com>
Message-ID: <CANtt_hzar+nB-tEc1DPPsyqFcbFCZW-+CWM6ZNKAdihHjU+4FQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111016/7ea9d0a0/attachment.pl>

From r.hijmans at gmail.com  Mon Oct 17 07:04:05 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 16 Oct 2011 22:04:05 -0700
Subject: [R-sig-Geo] Getting the other GIS to recognize files created by
	writeRaster()
In-Reply-To: <CAOGWcHK8gaAj3RrVK_Kd9p1UUg69UPFr5hWwuvHrtXdpV9auGw@mail.gmail.com>
References: <CAOGWcHK8gaAj3RrVK_Kd9p1UUg69UPFr5hWwuvHrtXdpV9auGw@mail.gmail.com>
Message-ID: <CANtt_hw4L522Jjv4qkiYUVKzKOM-9-tp4Pe-Eg8HeZjDQUyrcw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111016/06018cdd/attachment.pl>

From tracey at osborne.net.nz  Mon Oct 17 08:13:38 2011
From: tracey at osborne.net.nz (Tracey Osborne)
Date: Mon, 17 Oct 2011 19:13:38 +1300
Subject: [R-sig-Geo] measuring angle or relative direction of 2 lines
Message-ID: <CAP6aJCmYtXeoXomj63+fFBR3nUZBcZoLUO2Z7p4KDJyXf5bHkQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111017/666e436a/attachment.pl>

From moshersteven at gmail.com  Mon Oct 17 08:25:01 2011
From: moshersteven at gmail.com (steven mosher)
Date: Sun, 16 Oct 2011 23:25:01 -0700
Subject: [R-sig-Geo] Creating big raster from small tiles
In-Reply-To: <CANtt_hzar+nB-tEc1DPPsyqFcbFCZW-+CWM6ZNKAdihHjU+4FQ@mail.gmail.com>
References: <CAFFLneT-4Vqr++ao0F521gKefLDmMW81e4RWEfnxU2qP==ZaXw@mail.gmail.com>
	<CANtt_hzar+nB-tEc1DPPsyqFcbFCZW-+CWM6ZNKAdihHjU+4FQ@mail.gmail.com>
Message-ID: <CAFFLneR+PfbE1YGzww63Cj70oxWmdz6sWqZrTfqBc019D+jOFg@mail.gmail.com>

 Thanks,

    I basically have to reclass()  all 72 tiles, then aggregate() them
from 30 arc seconds to 5 minutes  and eventually put them in a brick
with other rasters
so I can average across the layers.

I thought unionExtent() was going to be the ticket, but that just
effects the extent.
unionRaster() is really what would be cool for working with tiles.
I'll take a look
at the gdal stuff

Steve



On Sun, Oct 16, 2011 at 10:01 PM, Robert J. Hijmans <r.hijmans at gmail.com> wrote:
> Steven,
> In principle you could give merge all tiles (e.g. make a list of RasterLayer
> objects and use do.call ) but merge is quite slow (something that can easily
> be be improved; and I expect it will be over the coming months).
> What I would do is use run?gdalbuildvrt (that comes with the FWtools). This
> creates a single header file that lets you access all the tiles as a single
> virtual file. If you want a single file for better performance, you can use
> writeRaster to save it to e.g. a single geotiff file.
>
> Robert
>
> On Sun, Oct 16, 2011 at 8:54 PM, steven mosher <moshersteven at gmail.com>
> wrote:
>>
>> ?I have 72 "tiles" in a tif format and each tile is ? 30X30
>>
>> >tile
>> class ? ? ? : RasterLayer
>> dimensions ?: 3600, 3600, 12960000 ?(nrow, ncol, ncell)
>> resolution ?: 0.008333333, 0.008333333 ?(x, y)
>> extent ? ? ?: 60, 90, 60, 90 ?(xmin, xmax, ymin, ymax)
>> coord. ref. : NA
>> values ? ? ?: C:/Users/steve/....
>> min value ? : 0
>> max value ? : 255
>>
>> What I'd like to do is find ?the fastest way to bring all 72 tiles
>> into one big raster.
>>
>> merge() seems like one good choice, where I would ? merge each tile
>> with a blank raster that would get
>> filled in incrementally by each tile
>>
>> > world
>> class ? ? ? : RasterLayer
>> dimensions ?: 21600, 43200, 933120000 ?(nrow, ncol, ncell)
>> resolution ?: 0.008333333, 0.008333333 ?(x, y)
>> extent ? ? ?: -180, 180, -90, 90 ?(xmin, xmax, ymin, ymax)
>> coord. ref. : +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
>> +towgs84=0,0,0
>> values ? ? ?: none
>>
>> world <- merge(tile, world)
>>
>> and the ?repeat that for the remaining 71 tiles. ?I'm also think that
>> one could extract the values from the tile
>> and use setValues ?but ?that appears to hit the memory wall in
>> Windows. ?The other option
>> I suppose is to use writeValues() ?and create ?a big file from the tiles.
>>
>> Am I missing any obvious options?
>>
>> Steve
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>


From paul.hiemstra at knmi.nl  Mon Oct 17 09:42:20 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 17 Oct 2011 07:42:20 +0000
Subject: [R-sig-Geo] errors in installing HDF5 package under windows
In-Reply-To: <CAN9LD-01R=63PX_LNe705bZa0Oauts1oP9DEMy3TjR2Tjqvwzg@mail.gmail.com>
References: <CAN9LD-01R=63PX_LNe705bZa0Oauts1oP9DEMy3TjR2Tjqvwzg@mail.gmail.com>
Message-ID: <4E9BDC5C.3030506@knmi.nl>

On 10/16/2011 02:10 PM, zhijie zhang wrote:
> cygwin warning:
>   MS-DOS style path detected:
> C:/PROGRA~1/R/R-213~1.2/bin/i386/HDF5~1.RCH/hdf5/libs
>   Preferred POSIX equivalent is:
> /cygdrive/c/PROGRA~1/R/R-213~1.2/bin/i386/HDF5~1.RCH/hdf5/libs
>   CYGWIN environment variable option "nodosfilewarning" turns off this
> warning.

Have you tried this suggestion?

Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From paul.hiemstra at knmi.nl  Mon Oct 17 10:07:26 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 17 Oct 2011 08:07:26 +0000
Subject: [R-sig-Geo] Delete points within a certain distance of each
	other
In-Reply-To: <CAHnA5RVH18Cwy28NsFFVOibG-_JOJCcsWMvdeageH=FMdibB9A@mail.gmail.com>
References: <CAHnA5RVH18Cwy28NsFFVOibG-_JOJCcsWMvdeageH=FMdibB9A@mail.gmail.com>
Message-ID: <4E9BE23E.5050604@knmi.nl>

On 10/15/2011 02:57 PM, Sandeep Patil wrote:
> Hello all
>
> I have about 4500 spatial points which are irregularly spaced...
>
> What is want to do is to replace points that are clustered very near
>
> each other by one point ...i.e say the distance betweeen Point A & Point B
>
> is less than a threshold that i will define , i will delete either A or B
> and essentially
>
> do this for the complete dataset so that there is at least a minimum
> separation
>
> between every pair of points.
>
> Any idea how to proceed ?
>
> Sandeep
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

?spDists, ?zerodist

Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From mathieu.rajerison at gmail.com  Mon Oct 17 10:15:05 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 17 Oct 2011 10:15:05 +0200
Subject: [R-sig-Geo] Delete points within a certain distance of each
	other
In-Reply-To: <4E9BE23E.5050604@knmi.nl>
References: <CAHnA5RVH18Cwy28NsFFVOibG-_JOJCcsWMvdeageH=FMdibB9A@mail.gmail.com>
	<4E9BE23E.5050604@knmi.nl>
Message-ID: <CAGfc75nye9J9P3n_XBFY0N2N4d2TXyqTuFd8t3kZ+_w8dchRdA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111017/2ef7b9fb/attachment.pl>

From paul.hiemstra at knmi.nl  Mon Oct 17 11:07:37 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 17 Oct 2011 09:07:37 +0000
Subject: [R-sig-Geo] errors in installing HDF5 package under windows
In-Reply-To: <CAN9LD-2Q8kLxXxaQk4v9=SkgGvS9QP9_gwFUnay0MwuEFLmL3A@mail.gmail.com>
References: <CAN9LD-01R=63PX_LNe705bZa0Oauts1oP9DEMy3TjR2Tjqvwzg@mail.gmail.com>	<4E9BDC5C.3030506@knmi.nl>
	<CAN9LD-2Q8kLxXxaQk4v9=SkgGvS9QP9_gwFUnay0MwuEFLmL3A@mail.gmail.com>
Message-ID: <4E9BF059.1020802@knmi.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111017/ea692ebe/attachment.pl>

From ashton at msu.edu  Mon Oct 17 14:40:00 2011
From: ashton at msu.edu (Ashton Shortridge)
Date: Mon, 17 Oct 2011 08:40:00 -0400
Subject: [R-sig-Geo] IDW example
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA206DBDE6@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA206DBDE6@BALI.uhd.campus>
Message-ID: <201110170840.00529.ashton@msu.edu>

On 10/16/11, Hodgess, Erin, wrote:
> Dear R Sig Geo People:
> 
> Here is probably a dumb question, so please forgive me in advance (or
> swear, whatever is most appropriate):  could someone recommend a good
> reference on IDW that has a numeric example, please?

Sure, check out Paul Bolstad's GIS Fundamentals textbook. My third edition has 
a very small worked example on pages 447-448.

It is straightforward to implement a small worked IDW example in a 
spreadsheet. You can mess around with the form of the weight, the distance to 
the point to be interpolated, and so on. Of course, it is not too hard to do 
this in R, either! gstat can do it, and you can roll your own code, e.g.:

# idw
# A function to perform IDW Interpolation to a matrix
# z is a vector of heights, distance is an mxn distance matrix
# indicating distances between the m grid points and n scattered
# sampled points, k is the power (typically 2), and num.neighs is 
# the closest x points to use in the interpolation.
idw <- function(z, distance, k, num.neighs) {
   idw.z <- rep(0, length(distance[,1]))
   for (i in 1:length(distance[,1])) {
      d <- sort(distance[i,], index.return=TRUE)  # sort to find closest points
      w <- 1 / d$x[1:num.neighs]^k         # The vector of the weights
      idw.z[i] <- sum(z[d$ix[1:num.neighs]]*w) / sum(w)  # The value for grid 
cell i
   }
   idw.mat <- matrix(idw.z, nrow=40, ncol=40)  # convert to matrix 
   return(idw.mat)
}


Hope this helps,

Ashton



On 10/16/11, Hodgess, Erin, wrote:
> Dear R Sig Geo People:
> 
> Here is probably a dumb question, so please forgive me in advance (or
> swear, whatever is most appropriate):  could someone recommend a good
> reference on IDW that has a numeric example, please?
> 
> I like to work things out on a small scale to see how they work.
> 
> thanks,
> Erin
> 
> 
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-----
Ashton Shortridge
Associate Professor			ashton at msu.edu
Dept of Geography			http://www.msu.edu/~ashton
235 Geography Building		ph (517) 432-3561
Michigan State University		fx (517) 432-1671


From pslarson2 at gmail.com  Mon Oct 17 15:16:51 2011
From: pslarson2 at gmail.com (Peter Larson)
Date: Mon, 17 Oct 2011 09:16:51 -0400
Subject: [R-sig-Geo] IDW example
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA206DBDE6@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA206DBDE6@BALI.uhd.campus>
Message-ID: <CAMsAtOb-iwAwCHX2oJLKQad-H1iQFSJS5A4F0ShXiXjCb2Odmw@mail.gmail.com>

Believe it or not, the Wikipedia entry has the formula listed. You can
easily try it out yourself. It's such a simple procedure that it can
be done by hand.

http://en.wikipedia.org/wiki/Inverse_distance_weighting

Pete



On 10/16/11, Hodgess, Erin <HodgessE at uhd.edu> wrote:
> Dear R Sig Geo People:
>
> Here is probably a dumb question, so please forgive me in advance (or swear,
> whatever is most appropriate):  could someone recommend a good reference on
> IDW that has a numeric example, please?
>
> I like to work things out on a small scale to see how they work.
>
> thanks,
> Erin
>
>
> Erin M. Hodgess, PhD
> Associate Professor
> Department of Computer and Mathematical Sciences
> University of Houston - Downtown
> mailto: hodgesse at uhd.edu
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From mathieu.rajerison at gmail.com  Mon Oct 17 17:04:40 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 17 Oct 2011 17:04:40 +0200
Subject: [R-sig-Geo] [rgeos] A gIntersection operation causes RStudio to
	crash
Message-ID: <CAGfc75=KwNU0swwU2ZCb9AN53VD8UjmRQz=FXF3D0S6PdJ=KEg@mail.gmail.com>

Hi List,


I'm trying to calculate fragstats metrics, in particular fractal dimension
using spatstat package, raster package and rgeos.

Fractal dimension is here applied to buildings, so as to determine
complexity of shapes. I'm calculating it with a moving window (a circular
disc shape).

There's no problem with the 27 first moving windows but my script causes
RStudio to crash when it's about to calculate the intersection of my 28th
disc and my buildings that intersect the latter.

So, I gave you two images of the couple disc + intersecting buildings in
case you'd see the problem,
and a zip containing disc.Rdata + bati.cddtes.Rdaya if yopu'd like to give
it a try

The code:
library(rgeos)

load("bati.cddtes.RData")
load("W.RData")

gIntersection(bati.cddtes, W)


Here are the images:
http://hpics.li/b0a2086 -(zoomed on disc)
http://hpics.li/7e6f780 - (zoomed on buildings)


Thanks for any help!

Mathieu





--
and here is the complete code, for information:

library(spatstat)
library(raster)
library(rgeos)
library(maptools)


# LOAD
load("bati.iris.RData")

proj4string(bati.iris)=CRS("+init=epsg:2154")

# POLYGONS
bati.pol <- bati.iris

# CHECK POLYGON HOLES
bati.pol1 <- slot(bati.pol, "polygons")
bati.pol1 <- lapply(bati.pol1, checkPolygonsHoles)
slot(bati.pol, "polygons") <- bati.pol1
proj4string(bati.pol)=CRS("+init=epsg:2154")

# LINES
bati.line <- as(bati.iris, "SpatialLines")
proj4string(bati.line)=CRS("+init=epsg:2154")


# PARAMETERS
resolution <- 50
radius <- 100

# CREATION DE LA GRILLE RASTER
r <- raster(extent(bati.iris))
res(r) <- resolution
coords <- xyFromCell(r, 1:ncell(r))

## LOOP
#area <- vector(mode="list", length=ncell(r))
#perimeter <- vector(mode="list", length=ncell(r))
seqce <- seq(1:27)
#seqce <- seq(ncell(r))
area <- vector(mode="list", length=length(seqce))
perimeter <- vector(mode="list", length=length(seqce))

#for (i in seq(1:ncell(r))) {
for (i in seq(along=seqce)) {
  print (i)
  # WINDOW
  W <- disc(radius, coords[i,]); W <- as(W, "SpatialPolygons");
proj4string(W)=CRS("+init=epsg:2154")

  # REQUETE SPATIALE
  candidates.pol <- gIntersects(bati.pol, W, byid=TRUE)
  if (any(candidates.pol==TRUE)) {
    # AREA
    res.pol <- gIntersection(bati.pol[candidates.pol[1,],], W)
    area[[i]] <- gArea(res.pol)

    # PERIMETER
    candidates.line <- gIntersects(bati.line, W, byid=TRUE)
    res.line <- gIntersection(bati.line[candidates.line[1,],], W)
    perimeter[[i]] <- gLength(res.line)
  }
}

# CALCULATIONS
# (P9) Fractal Dimension Index
#FRAC[[i]] <- 2*log(0.25*perimeter)/log(area)


  #row.names(PARA[[i]]) <- as.character(i)
  #row.names(FRAC[[i]]) <- as.character(i)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111017/95c15c44/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: fragstats.zip
Type: application/zip
Size: 7647 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111017/95c15c44/attachment.zip>

From godina at dal.ca  Mon Oct 17 17:41:56 2011
From: godina at dal.ca (GodinA)
Date: Mon, 17 Oct 2011 08:41:56 -0700 (PDT)
Subject: [R-sig-Geo] multitype point patterns
Message-ID: <1318866116965-6901052.post@n2.nabble.com>

Hi all,
I have a multitype point patterns representing 12 different species as
follow:

>marked planar point pattern: 821 points 
>multitype, with levels = 88	90	91	92	93	94	96	98	99	100	102	107 
>window: rectangle = [-60, -45] x [40, 56] units 

> head(as.data.frame(skate.ppp))
        x      y         marks
1 -54.198 55.127    88
2 -51.071 43.015    88
3 -47.050 48.111    88
4 -46.377 47.552    88
5 -46.470 47.274    88
6 -51.301 43.041    88

I would like to add another mark with the number of species found at each
location. I'm sure this is fairly straightforward, but somehow I am
struggling with it! I have been doing the following:

>marks(skate.ppp) <- skate$number

However, when I do so, I am replacing all my previous marks by these new
ones... 
> head(as.data.frame(skate.ppp))
        x      y marks
1 -54.198 55.127     2
2 -51.071 43.015     1
3 -47.050 48.111     2
4 -46.377 47.552     1
5 -46.470 47.274     1
6 -51.301 43.041     4

> skate.ppp
marked planar point pattern: 821 points 
marks are numeric, of type ?double? 
window: rectangle = [-60, -45] x [40, 56] units  

Thank you very much in advance!
Aurelie


-----
Aurelie Cosandey-Godin
Ph.D. Candidate, Department of Biology
Industrial Graduate Fellow, WWF-Canada

Dalhousie University | Biology Dept. |Halifax, NS, Canada 
Email: godina at dal.ca | Web: wormlab.biology.dal.ca
--------------------------------------------------------------------------
Want to learn more about sharks in Atlantic Canada? Visit ShARCC! www.atlanticsharks.org
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/multitype-point-patterns-tp6901052p6901052.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From calamita_giuseppe at yahoo.it  Mon Oct 17 15:39:35 2011
From: calamita_giuseppe at yahoo.it (giuseppe calamita)
Date: Mon, 17 Oct 2011 14:39:35 +0100 (BST)
Subject: [R-sig-Geo] IDW example
In-Reply-To: <mailman.12.1318845602.5473.r-sig-geo@r-project.org>
References: <mailman.12.1318845602.5473.r-sig-geo@r-project.org>
Message-ID: <1318858775.89943.YahooMailNeo@web25901.mail.ukl.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111017/b2fa72ab/attachment.pl>

From edzer.pebesma at uni-muenster.de  Mon Oct 17 17:59:22 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 17 Oct 2011 17:59:22 +0200
Subject: [R-sig-Geo] IDW example -- gstat, spatstat
In-Reply-To: <1318858775.89943.YahooMailNeo@web25901.mail.ukl.yahoo.com>
References: <mailman.12.1318845602.5473.r-sig-geo@r-project.org>
	<1318858775.89943.YahooMailNeo@web25901.mail.ukl.yahoo.com>
Message-ID: <4E9C50DA.7070007@uni-muenster.de>

You are right -- google pointed me to the example:

http://www.asdar-book.org/book/vis_mod.R

chunk 31, where the function "krige", without variogram model, results 
in idw. To avoid confusing scripts that suggest kriging takes place, 
package gstat also provides a function idw, which does the same thing, by

zn.idw <- idw(log(zinc) ~ 1, meuse, meuse.grid)

In addition, package spatstat contains a function called idw, doing idw 
interpolation on a marked point pattern. When loading both spatstat and 
gstat, this means the order of loading matters.

On 10/17/2011 03:39 PM, giuseppe calamita wrote:
> Hi Erin,
> did you check the book from Roger Bivand -Edzer Pebesma and Gomez-Rub?o: Applied spatial data analysis with R?
> There is some short explanation of how the algorithm work and just one record of code.
> If you want I think I can send you some line of codes as examples.
>
>
> Giuseppe
>
>
>
> ________________________________
> Da: "r-sig-geo-request at r-project.org"<r-sig-geo-request at r-project.org>
> A: r-sig-geo at r-project.org
> Inviato: Luned? 17 Ottobre 2011 12:00
> Oggetto: R-sig-Geo Digest, Vol 98, Issue 15
>
> ----- Messaggio inoltrato -----
>
> Send R-sig-Geo mailing list submissions to
>      r-sig-geo at r-project.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>      https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> or, via email, send a message with subject or body 'help' to
>      r-sig-geo-request at r-project.org
>
> You can reach the person managing the list at
>      r-sig-geo-owner at r-project.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-sig-Geo digest..."
>
> Today's Topics:
>
>     1. errors in installing HDF5 package under windows (zhijie zhang)
>     2. IDW example (Hodgess, Erin)
>     3. Creating big raster from small tiles (steven mosher)
>     4. Re: Creating big raster from small tiles (steven mosher)
>     5. Re: Creating big raster from small tiles (Robert J. Hijmans)
>     6. Re: Getting the other GIS to recognize files created by
>        writeRaster() (Robert J. Hijmans)
>     7. measuring angle or relative direction of 2 lines (Tracey Osborne)
>     8. Re: Creating big raster from small tiles (steven mosher)
>     9. Re: errors in installing HDF5 package under windows
>        (Paul Hiemstra)
>    10. Re: Delete points within a certain distance of each    other
>        (Paul Hiemstra)
>    11. Re: Delete points within a certain distance of each    other
>        (Mathieu Rajerison)
>    12. Re: errors in installing HDF5 package under windows
>        (Paul Hiemstra)
> Dear all,
>    The HDF5 binary package is not available now, so i download the source
> package and unzip it. When i check it before building the package, some
> errors appeared, see below. I donot think it's related with the R and HDF5
> versions. I guess i missed something here.
> --Errors--
> * installing *source* package 'hdf5' ...
> cygwin warning:
>    MS-DOS style path detected:
> C:/PROGRA~1/R/R-213~1.2/bin/i386/HDF5~1.RCH/hdf5/libs
>    Preferred POSIX equivalent is:
> /cygdrive/c/PROGRA~1/R/R-213~1.2/bin/i386/HDF5~1.RCH/hdf5/libs
>    CYGWIN environment variable option "nodosfilewarning" turns off this
> warning.
>    Consult the user's guide for more details about POSIX paths:
>      http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
> cp: cannot stat `/cygdrive/d/Backup/my
> documents/hdf5-support/cyghdf5-0.dll': No such file or directory
> cp: cannot stat `/cygdrive/d/Backup/my documents/hdf5-support/mgwz.dll': No
> such file or directory
> ERROR: configuration failed for package 'hdf5'
> * removing 'C:/PROGRA~1/R/R-213~1.2/bin/i386/HDF5~1.RCH/hdf5'
> ---------
> If anybody have some experiences on reading HDF4 and HDF5 datasets
> successfully, please also give me more information on this.
>    I have searched the R help, and cannot find a solution. Somebody suggest
> the rgdal, which seems not to work.
>    Any suggestions or help are greatly appreciated.
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From marcelino.delacruz at upm.es  Mon Oct 17 18:15:15 2011
From: marcelino.delacruz at upm.es (Marcelino de la Cruz)
Date: Mon, 17 Oct 2011 18:15:15 +0200
Subject: [R-sig-Geo] multitype point patterns
In-Reply-To: <1318866116965-6901052.post@n2.nabble.com>
References: <1318866116965-6901052.post@n2.nabble.com>
Message-ID: <201110171615.p9HGFF1u024332@smtp.upm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111017/d582a37a/attachment.pl>

From godina at dal.ca  Mon Oct 17 18:25:02 2011
From: godina at dal.ca (GodinA)
Date: Mon, 17 Oct 2011 09:25:02 -0700 (PDT)
Subject: [R-sig-Geo] multitype point patterns
In-Reply-To: <201110171615.p9HGFF1u024332@smtp.upm.es>
References: <1318866116965-6901052.post@n2.nabble.com>
	<201110171615.p9HGFF1u024332@smtp.upm.es>
Message-ID: <1318868702108-6901258.post@n2.nabble.com>

Awesome! Thank you very much MArcelino!

-----
Aurelie Cosandey-Godin
Ph.D. Candidate, Department of Biology
Industrial Graduate Fellow, WWF-Canada

Dalhousie University | Biology Dept. |Halifax, NS, Canada 
Email: godina at dal.ca | Web: wormlab.biology.dal.ca
--------------------------------------------------------------------------
Want to learn more about sharks in Atlantic Canada? Visit ShARCC! www.atlanticsharks.org
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/multitype-point-patterns-tp6901052p6901258.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From godina at dal.ca  Tue Oct 18 15:36:12 2011
From: godina at dal.ca (GodinA)
Date: Tue, 18 Oct 2011 06:36:12 -0700 (PDT)
Subject: [R-sig-Geo] Extracting GIS file - best approach?
Message-ID: <1318944972884-6904616.post@n2.nabble.com>

Dear list,

I am working with spatstat and am trying to define my owin: spatial region
(observation window). I have a set of marked planar point patterns generated
from random samplings in different strata. Unfortunately I don't have any
GIS file with all the information for each of my strata. I only have a map
(see below).

I am new to dealing with spatial data and would like to know what would be
the best approach to extract this information?

http://r-sig-geo.2731867.n2.nabble.com/file/n6904616/NL.jpg 

Thank you very much in advance!
~Aurelie




-----
Aurelie Cosandey-Godin
Ph.D. Candidate, Department of Biology
Industrial Graduate Fellow, WWF-Canada

Dalhousie University | Biology Dept. |Halifax, NS, Canada 
Email: godina at dal.ca | Web: wormlab.biology.dal.ca
--------------------------------------------------------------------------
Want to learn more about sharks in Atlantic Canada? Visit ShARCC! www.atlanticsharks.org
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extracting-GIS-file-best-approach-tp6904616p6904616.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From alobolistas at gmail.com  Tue Oct 18 16:13:09 2011
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 18 Oct 2011 16:13:09 +0200
Subject: [R-sig-Geo] Extracting GIS file - best approach?
In-Reply-To: <1318944972884-6904616.post@n2.nabble.com>
References: <1318944972884-6904616.post@n2.nabble.com>
Message-ID: <CAG4NReKCU5Y5OUZuMi_R3huyLNCvc5d1euVKZnY6_AFdjXvGoQ@mail.gmail.com>

Aurelie,

If all you need is defining the region, perhaps the easiest is
guessing the coordinates from the
grid of your jpg file.
Alternatively, you can georeference the jpg to make a companion world
file that would let you use
your map as an spatial object. You can use qgis for that.

Agus

2011/10/18 GodinA <godina at dal.ca>:
> Dear list,
>
> I am working with spatstat and am trying to define my owin: spatial region
> (observation window). I have a set of marked planar point patterns generated
> from random samplings in different strata. Unfortunately I don't have any
> GIS file with all the information for each of my strata. I only have a map
> (see below).
>
> I am new to dealing with spatial data and would like to know what would be
> the best approach to extract this information?
>
> http://r-sig-geo.2731867.n2.nabble.com/file/n6904616/NL.jpg
>
> Thank you very much in advance!
> ~Aurelie
>
>
>
>
> -----
> Aurelie Cosandey-Godin
> Ph.D. Candidate, Department of Biology
> Industrial Graduate Fellow, WWF-Canada
>
> Dalhousie University | Biology Dept. |Halifax, NS, Canada
> Email: godina at dal.ca | Web: wormlab.biology.dal.ca
> --------------------------------------------------------------------------
> Want to learn more about sharks in Atlantic Canada? Visit ShARCC! www.atlanticsharks.org
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extracting-GIS-file-best-approach-tp6904616p6904616.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From alobolistas at gmail.com  Tue Oct 18 16:24:33 2011
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 18 Oct 2011 16:24:33 +0200
Subject: [R-sig-Geo] Counting points within polygons
Message-ID: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>

Hi!

Given a Sp Points DF and an Sp Polygons DF, I want to add a field of
number of points for each polygon
to the Sp Pol. DF table. This is what I'm doing (using objects from
the help page for sp::overlay()
(meuse is the Sp Points DF and srdf the Sp Pol. DF)

> delme3 <- overlay(meuse,srdf)
> delme3
  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 [38] 1 1 1 1 1 1 2 1 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3
 [75] 3 3 3 3 3 3 3 3 2 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2
[112] 2 2 2 2 2 2 3 2 2 2 2 2 1 2 2 2 2 1 1 2 2 1 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3
[149] 3 3 3 3 3 3 3
newdata <- data.frame(srdf at data,nppoints=table(delme3))
srdf2 <- srdf
srdf2 at data <- newdata

An alternative:
newdatap <- data.frame(meuse at data, nbp=rep(1,nrow(meuse)))
meuse2 <- meuse
meuse2 at data <- newdatap
delme4 <- overlay(meuse2[,13],srdf,fn=sum)
newdata <- data.frame(srdf at data,nppoints=delme4)
srdf2 <- srdf
srdf2 at data <- newdata

I wonder if there is a better way or, best, an standard R spatial
function doing that already.

Thanks!

Agus


From marcelino.delacruz at upm.es  Tue Oct 18 16:28:39 2011
From: marcelino.delacruz at upm.es (Marcelino de la Cruz)
Date: Tue, 18 Oct 2011 16:28:39 +0200
Subject: [R-sig-Geo] Extracting GIS file - best approach?
In-Reply-To: <1318944972884-6904616.post@n2.nabble.com>
References: <1318944972884-6904616.post@n2.nabble.com>
Message-ID: <201110181428.p9IESfQg031662@smtp.upm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/561de372/attachment.pl>

From mathieu.rajerison at gmail.com  Tue Oct 18 16:58:57 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Tue, 18 Oct 2011 16:58:57 +0200
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
Message-ID: <CAGfc75n7wXGGKjyxJC4uMPB1TLesVyhskCEkpYAoEaFxAHODGg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/b733fb3e/attachment.pl>

From godina at dal.ca  Tue Oct 18 17:05:03 2011
From: godina at dal.ca (GodinA)
Date: Tue, 18 Oct 2011 08:05:03 -0700 (PDT)
Subject: [R-sig-Geo] Extracting GIS file - best approach?
In-Reply-To: <201110181428.p9IESfQg031662@smtp.upm.es>
References: <1318944972884-6904616.post@n2.nabble.com>
	<201110181428.p9IESfQg031662@smtp.upm.es>
Message-ID: <1318950303318-6904976.post@n2.nabble.com>

Marcelino,

My dataset is coming from annual bottom-trawl surveys in waters off
Newfoundland and Labrador Region, Canada. I am looking at habitat selection
(relationship to depth & temperature), geographic distribution, and
abundance of skate species in the region in 2009. 
The survey use a stratified random design, with the allocation of units
proportional to stratum area within a Division (region), and a minimum of 2
units in all strata. Each unit being a standardized tow i.e., 30-minutes tow
at 3.5 knots. The map shows all strata. 
For each unit, I have information on species caught, number & weight, depth,
temperature, latitude, longitude, strata No., and Division No., time of the
day, among others.

Let me know if you need additional details,
Thank you very much,

~Aurelie





-----
Aurelie Cosandey-Godin
Ph.D. Student, Department of Biology, Dalhousie University
Industrial Graduate Fellow, WWF-Canada
Email: godina at dal.ca | Web: wormlab.biology.dal.ca

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extracting-GIS-file-best-approach-tp6904616p6904976.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From godina at dal.ca  Tue Oct 18 17:06:21 2011
From: godina at dal.ca (GodinA)
Date: Tue, 18 Oct 2011 08:06:21 -0700 (PDT)
Subject: [R-sig-Geo] Extracting GIS file - best approach?
In-Reply-To: <CAG4NReKCU5Y5OUZuMi_R3huyLNCvc5d1euVKZnY6_AFdjXvGoQ@mail.gmail.com>
References: <1318944972884-6904616.post@n2.nabble.com>
	<CAG4NReKCU5Y5OUZuMi_R3huyLNCvc5d1euVKZnY6_AFdjXvGoQ@mail.gmail.com>
Message-ID: <1318950381121-6904980.post@n2.nabble.com>

Thank you Agus, I'll look at qgis.

-----
Aurelie Cosandey-Godin
Ph.D. Student, Department of Biology, Dalhousie University
Industrial Graduate Fellow, WWF-Canada
Email: godina at dal.ca | Web: wormlab.biology.dal.ca

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extracting-GIS-file-best-approach-tp6904616p6904980.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From alobolistas at gmail.com  Tue Oct 18 17:06:52 2011
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 18 Oct 2011 17:06:52 +0200
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
Message-ID: <CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>

Actually, neither alternative works if there are polygons with no
points, as those
are not kept in the output of overlay and just binding tp the table of
srdf is not possible.

The second alternative looks easier for a join, but a problems comes
from the fact that
the output data.frame of
delme4 <- overlay(meuse2[,13],srdf,fn=sum)

has different row.names than that of the input srdf:
> row.names(srdf)
[1] "r1" "r2" "r3"
> delme4 <- overlay(meuse2[,13],srdf,fn=sum)
> row.names(delme4)
[1] "X1" "X2" "X3"

which is inconvenient, as the way to join delme4 to srdf would be
using the row.names.

Agus


2011/10/18 Agustin Lobo <alobolistas at gmail.com>:
> Hi!
>
> Given a Sp Points DF and an Sp Polygons DF, I want to add a field of
> number of points for each polygon
> to the Sp Pol. DF table. This is what I'm doing (using objects from
> the help page for sp::overlay()
> (meuse is the Sp Points DF and srdf the Sp Pol. DF)
>
>> delme3 <- overlay(meuse,srdf)
>> delme3
> ?[1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
> ?[38] 1 1 1 1 1 1 2 1 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3
> ?[75] 3 3 3 3 3 3 3 3 2 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2
> [112] 2 2 2 2 2 2 3 2 2 2 2 2 1 2 2 2 2 1 1 2 2 1 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3
> [149] 3 3 3 3 3 3 3
> newdata <- data.frame(srdf at data,nppoints=table(delme3))
> srdf2 <- srdf
> srdf2 at data <- newdata
>
> An alternative:
> newdatap <- data.frame(meuse at data, nbp=rep(1,nrow(meuse)))
> meuse2 <- meuse
> meuse2 at data <- newdatap
> delme4 <- overlay(meuse2[,13],srdf,fn=sum)
> newdata <- data.frame(srdf at data,nppoints=delme4)
> srdf2 <- srdf
> srdf2 at data <- newdata
>
> I wonder if there is a better way or, best, an standard R spatial
> function doing that already.
>
> Thanks!
>
> Agus
>


From edzer.pebesma at uni-muenster.de  Tue Oct 18 17:20:46 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 18 Oct 2011 17:20:46 +0200
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>
Message-ID: <4E9D994E.1000808@uni-muenster.de>

Agus,

Have you looked into "over", which is supposed to replace overlay?

require(sp)
vignette("over")

On 10/18/2011 05:06 PM, Agustin Lobo wrote:
> Actually, neither alternative works if there are polygons with no
> points, as those
> are not kept in the output of overlay and just binding tp the table of
> srdf is not possible.
>
> The second alternative looks easier for a join, but a problems comes
> from the fact that
> the output data.frame of
> delme4<- overlay(meuse2[,13],srdf,fn=sum)
>
> has different row.names than that of the input srdf:
>> row.names(srdf)
> [1] "r1" "r2" "r3"
>> delme4<- overlay(meuse2[,13],srdf,fn=sum)
>> row.names(delme4)
> [1] "X1" "X2" "X3"
>
> which is inconvenient, as the way to join delme4 to srdf would be
> using the row.names.
>
> Agus
>
>
> 2011/10/18 Agustin Lobo<alobolistas at gmail.com>:
>> Hi!
>>
>> Given a Sp Points DF and an Sp Polygons DF, I want to add a field of
>> number of points for each polygon
>> to the Sp Pol. DF table. This is what I'm doing (using objects from
>> the help page for sp::overlay()
>> (meuse is the Sp Points DF and srdf the Sp Pol. DF)
>>
>>> delme3<- overlay(meuse,srdf)
>>> delme3
>>   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
>>   [38] 1 1 1 1 1 1 2 1 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3
>>   [75] 3 3 3 3 3 3 3 3 2 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2
>> [112] 2 2 2 2 2 2 3 2 2 2 2 2 1 2 2 2 2 1 1 2 2 1 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3
>> [149] 3 3 3 3 3 3 3
>> newdata<- data.frame(srdf at data,nppoints=table(delme3))
>> srdf2<- srdf
>> srdf2 at data<- newdata
>>
>> An alternative:
>> newdatap<- data.frame(meuse at data, nbp=rep(1,nrow(meuse)))
>> meuse2<- meuse
>> meuse2 at data<- newdatap
>> delme4<- overlay(meuse2[,13],srdf,fn=sum)
>> newdata<- data.frame(srdf at data,nppoints=delme4)
>> srdf2<- srdf
>> srdf2 at data<- newdata
>>
>> I wonder if there is a better way or, best, an standard R spatial
>> function doing that already.
>>
>> Thanks!
>>
>> Agus
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From marcelino.delacruz at upm.es  Tue Oct 18 17:42:35 2011
From: marcelino.delacruz at upm.es (Marcelino de la Cruz)
Date: Tue, 18 Oct 2011 17:42:35 +0200
Subject: [R-sig-Geo] Extracting GIS file - best approach?
In-Reply-To: <1318950303318-6904976.post@n2.nabble.com>
References: <1318944972884-6904616.post@n2.nabble.com>
	<201110181428.p9IESfQg031662@smtp.upm.es>
	<1318950303318-6904976.post@n2.nabble.com>
Message-ID: <201110181542.p9IFgchB022530@smtp.upm.es>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/493e02e6/attachment.pl>

From godina at dal.ca  Tue Oct 18 18:16:36 2011
From: godina at dal.ca (GodinA)
Date: Tue, 18 Oct 2011 09:16:36 -0700 (PDT)
Subject: [R-sig-Geo] Extracting GIS file - best approach?
In-Reply-To: <201110181542.p9IFgchB022530@smtp.upm.es>
References: <1318944972884-6904616.post@n2.nabble.com>
	<201110181428.p9IESfQg031662@smtp.upm.es>
	<1318950303318-6904976.post@n2.nabble.com>
	<201110181542.p9IFgchB022530@smtp.upm.es>
Message-ID: <1318954596252-6905291.post@n2.nabble.com>

Hummm...
Thank you Marcelino, I agree with you, this dataset isn't a clear stochastic
point process per se, however I'm wondering if I can still treat it as such,
acknowledging the limitations. Would love hearing people comments. 
I will look at the dismo package. 
On a slightly different note, would you have any recommendations or
suggestions on the best approach to georeference my strata from this map?
Thank you again, much appreciated!
Cheers,
~Aurelie



-----
Aurelie Cosandey-Godin
Ph.D. Student, Department of Biology, Dalhousie University
Industrial Graduate Fellow, WWF-Canada
Email: godina at dal.ca | Web: wormlab.biology.dal.ca

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extracting-GIS-file-best-approach-tp6904616p6905291.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From alobolistas at gmail.com  Tue Oct 18 18:32:06 2011
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 18 Oct 2011 18:32:06 +0200
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <4E9D994E.1000808@uni-muenster.de>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>
	<4E9D994E.1000808@uni-muenster.de>
Message-ID: <CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>

I'm afraid I do not understand well the help page.
It seems to me that what I need is
"x = "SpatialPointsDataFrame", y = "SpatialPolygons"
 equal to the previous method, except that an argument fn=xxx is
allowed, e.g. fn = mean which will then report a data.frame with the
mean values of the x points falling in each polygon (set) of y"
Thus:
> delme4 <- over(fireLC2[,5], BorneoLC,fn=sum)
where
> BorneoLC at data[1,]
  LC   ID LC_2         LCname LCabrv    AREA PERIMETER
0  4 4505    4 Lowland Forest    LwF 7.7e-05  0.036385
and
> fireLC2 at data[1,]
  LC ID                      LCname LCabrv nbp
1  7  1 Plantation_Secondary Forest  PltSF   1

but I get
Error in FUN(X[[1L]], ...) :
  only defined on a data frame with all numeric variables
Calls: over ... do.call -> lapply -> Summary.data.frame -> lapply -> FUN

which I do not understand because fireLC2[,5] is numeric
(suggestion: could the user define the field(s) for which he wants fn
being applied? )

Beyond that, where the help page says:
"...which will then report a data.frame with the mean values of the x
points falling in each polygon (set) of y",
what happens if there is no points falling for a given polygon? Would
the record be eliminated or kept as NA ?
>From my point of view, having the option of getting a data.frame with
the same nb. of rows and same ordering as
the input Sp Polygons object would be an advantage.

Agus


2011/10/18 Edzer Pebesma <edzer.pebesma at uni-muenster.de>:
> Agus,
>
> Have you looked into "over", which is supposed to replace overlay?
>
> require(sp)
> vignette("over")
>
> On 10/18/2011 05:06 PM, Agustin Lobo wrote:
>>
>> Actually, neither alternative works if there are polygons with no
>> points, as those
>> are not kept in the output of overlay and just binding tp the table of
>> srdf is not possible.
>>
>> The second alternative looks easier for a join, but a problems comes
>> from the fact that
>> the output data.frame of
>> delme4<- overlay(meuse2[,13],srdf,fn=sum)
>>
>> has different row.names than that of the input srdf:
>>>
>>> row.names(srdf)
>>
>> [1] "r1" "r2" "r3"
>>>
>>> delme4<- overlay(meuse2[,13],srdf,fn=sum)
>>> row.names(delme4)
>>
>> [1] "X1" "X2" "X3"
>>
>> which is inconvenient, as the way to join delme4 to srdf would be
>> using the row.names.
>>
>> Agus
>>
>>
>> 2011/10/18 Agustin Lobo<alobolistas at gmail.com>:
>>>
>>> Hi!
>>>
>>> Given a Sp Points DF and an Sp Polygons DF, I want to add a field of
>>> number of points for each polygon
>>> to the Sp Pol. DF table. This is what I'm doing (using objects from
>>> the help page for sp::overlay()
>>> (meuse is the Sp Points DF and srdf the Sp Pol. DF)
>>>
>>>> delme3<- overlay(meuse,srdf)
>>>> delme3
>>>
>>> ?[1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
>>> 1 1 1
>>> ?[38] 1 1 1 1 1 1 2 1 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3
>>> 3 3 3
>>> ?[75] 3 3 3 3 3 3 3 3 2 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2
>>> 2 2 2
>>> [112] 2 2 2 2 2 2 3 2 2 2 2 2 1 2 2 2 2 1 1 2 2 1 2 2 2 2 3 3 3 3 3 3 3 3
>>> 3 3 3
>>> [149] 3 3 3 3 3 3 3
>>> newdata<- data.frame(srdf at data,nppoints=table(delme3))
>>> srdf2<- srdf
>>> srdf2 at data<- newdata
>>>
>>> An alternative:
>>> newdatap<- data.frame(meuse at data, nbp=rep(1,nrow(meuse)))
>>> meuse2<- meuse
>>> meuse2 at data<- newdatap
>>> delme4<- overlay(meuse2[,13],srdf,fn=sum)
>>> newdata<- data.frame(srdf at data,nppoints=delme4)
>>> srdf2<- srdf
>>> srdf2 at data<- newdata
>>>
>>> I wonder if there is a better way or, best, an standard R spatial
>>> function doing that already.
>>>
>>> Thanks!
>>>
>>> Agus
>>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From m.c.zwart at newcastle.ac.uk  Tue Oct 18 18:31:04 2011
From: m.c.zwart at newcastle.ac.uk (Maria Zwart)
Date: Tue, 18 Oct 2011 17:31:04 +0100
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
Message-ID: <54DEE632BA30084D8F754AD5024CDCC3D07B166719@EXCCR03.campus.ncl.ac.uk>

Hi,

There is an easy way to do this, but it is outside R. I use GME (geospatial modelling environment). It can also run R commands however.

The function in that program you are looking for is: countpntsinpolys
More information on: http://www.spatialecology.com/gme/gmecommands.htm

Best,

Mieke

>-----Original Message-----
>From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-
>project.org] On Behalf Of Agustin Lobo
>Sent: 18 October 2011 15:25
>To: r-sig-geo
>Subject: [R-sig-Geo] Counting points within polygons
>
>Hi!
>
>Given a Sp Points DF and an Sp Polygons DF, I want to add a field of
>number of points for each polygon
>to the Sp Pol. DF table. This is what I'm doing (using objects from
>the help page for sp::overlay()
>(meuse is the Sp Points DF and srdf the Sp Pol. DF)
>
>> delme3 <- overlay(meuse,srdf)
>> delme3
>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
>1 1 1 1
> [38] 1 1 1 1 1 1 2 1 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3
>3 3 3 3
> [75] 3 3 3 3 3 3 3 3 2 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2
>2 2 2 2
>[112] 2 2 2 2 2 2 3 2 2 2 2 2 1 2 2 2 2 1 1 2 2 1 2 2 2 2 3 3 3 3 3 3 3
>3 3 3 3
>[149] 3 3 3 3 3 3 3
>newdata <- data.frame(srdf at data,nppoints=table(delme3))
>srdf2 <- srdf
>srdf2 at data <- newdata
>
>An alternative:
>newdatap <- data.frame(meuse at data, nbp=rep(1,nrow(meuse)))
>meuse2 <- meuse
>meuse2 at data <- newdatap
>delme4 <- overlay(meuse2[,13],srdf,fn=sum)
>newdata <- data.frame(srdf at data,nppoints=delme4)
>srdf2 <- srdf
>srdf2 at data <- newdata
>
>I wonder if there is a better way or, best, an standard R spatial
>function doing that already.
>
>Thanks!
>
>Agus
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From kidsmake6 at msn.com  Tue Oct 18 19:04:52 2011
From: kidsmake6 at msn.com (Brad Nesom)
Date: Tue, 18 Oct 2011 12:04:52 -0500
Subject: [R-sig-Geo] Extracting GIS file - best approach?
In-Reply-To: <1318954596252-6905291.post@n2.nabble.com>
References: <1318944972884-6904616.post@n2.nabble.com>
	<201110181428.p9IESfQg031662@smtp.upm.es>
	<1318950303318-6904976.post@n2.nabble.com>
	<201110181542.p9IFgchB022530@smtp.upm.es>
	<1318954596252-6905291.post@n2.nabble.com>
Message-ID: <CAPD=LeufVLvHW1LtYng14Dovm-mHD_kCCcmyuB_n+jEA3HnWQg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/e024a254/attachment.pl>

From alobolistas at gmail.com  Tue Oct 18 19:06:20 2011
From: alobolistas at gmail.com (Agustin Lobo)
Date: Tue, 18 Oct 2011 19:06:20 +0200
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <54DEE632BA30084D8F754AD5024CDCC3D07B166719@EXCCR03.campus.ncl.ac.uk>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
	<54DEE632BA30084D8F754AD5024CDCC3D07B166719@EXCCR03.campus.ncl.ac.uk>
Message-ID: <CAG4NReKzKXYern9OgvN4xcRK=TrjmSyFgtHe6u6wUxJwZVfySQ@mail.gmail.com>

Many thanks Maria for the very interesting pointer!

I've been able to find this solution within R:

> delme5 <- over(fireLC2[,5], BorneoLC)
> delme5[1,]
  LC    ID LC_2                      LCname LCabrv     AREA PERIMETER
1  7 17582    7 Plantation_Secondary Forest  PltSF 0.379161    35.415
just to remind you:
> fireLC2 at data[1,]
  LC ID                      LCname LCabrv nbp
1  7  1 Plantation_Secondary Forest  PltSF   1
> BorneoLC at data[1,]
  LC   ID LC_2         LCname LCabrv    AREA PERIMETER
0  4 4505    4 Lowland Forest    LwF 7.7e-05  0.036385

> nbp <- table(delme5$ID)
> nbp <- data.frame(ID=as.numeric(names(nbp)), nbp=as.numeric(nbp))
> nbp[1:3,]
    ID nbp
1 4758   1
2 4760   1
3 4836   2
> BorneoLC3 <- mijoin(BorneoLC,nbp,by.x=2, by.y=1)
> BorneoLC3 at data$nbp[is.na(BorneoLC3 at data$nbp)] <- 0
> BorneoLC3 at data[1:3,]
  LC   ID LC_2         LCname LCabrv     AREA PERIMETER ID nbp
0  4 4505    4 Lowland Forest    LwF 0.000077  0.036385 NA   0
1  8 4524    8 Lowland Mosaic    LwM 0.000346  0.094675 NA   0
2  4 4525    4 Lowland Forest    LwF 0.000020  0.018000 NA   0

> writeOGR(BorneoLC3,dsn="/media/Iomega_HDD/JACOB/ExFireBorneo/RFireBorneo/BorneoLC3",layer="BorneoLC3",driver="ESRI Shapefile")

The sahpe file is correctly displayed in qgis


Agus


2011/10/18 Maria Zwart <m.c.zwart at newcastle.ac.uk>:
> Hi,
>
> There is an easy way to do this, but it is outside R. I use GME (geospatial modelling environment). It can also run R commands however.
>
> The function in that program you are looking for is: countpntsinpolys
> More information on: http://www.spatialecology.com/gme/gmecommands.htm
>
> Best,
>
> Mieke
>
>>-----Original Message-----
>>From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-
>>project.org] On Behalf Of Agustin Lobo
>>Sent: 18 October 2011 15:25
>>To: r-sig-geo
>>Subject: [R-sig-Geo] Counting points within polygons
>>
>>Hi!
>>
>>Given a Sp Points DF and an Sp Polygons DF, I want to add a field of
>>number of points for each polygon
>>to the Sp Pol. DF table. This is what I'm doing (using objects from
>>the help page for sp::overlay()
>>(meuse is the Sp Points DF and srdf the Sp Pol. DF)
>>
>>> delme3 <- overlay(meuse,srdf)
>>> delme3
>> ?[1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
>>1 1 1 1
>> [38] 1 1 1 1 1 1 2 1 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3
>>3 3 3 3
>> [75] 3 3 3 3 3 3 3 3 2 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2
>>2 2 2 2
>>[112] 2 2 2 2 2 2 3 2 2 2 2 2 1 2 2 2 2 1 1 2 2 1 2 2 2 2 3 3 3 3 3 3 3
>>3 3 3 3
>>[149] 3 3 3 3 3 3 3
>>newdata <- data.frame(srdf at data,nppoints=table(delme3))
>>srdf2 <- srdf
>>srdf2 at data <- newdata
>>
>>An alternative:
>>newdatap <- data.frame(meuse at data, nbp=rep(1,nrow(meuse)))
>>meuse2 <- meuse
>>meuse2 at data <- newdatap
>>delme4 <- overlay(meuse2[,13],srdf,fn=sum)
>>newdata <- data.frame(srdf at data,nppoints=delme4)
>>srdf2 <- srdf
>>srdf2 at data <- newdata
>>
>>I wonder if there is a better way or, best, an standard R spatial
>>function doing that already.
>>
>>Thanks!
>>
>>Agus
>>
>>_______________________________________________
>>R-sig-Geo mailing list
>>R-sig-Geo at r-project.org
>>https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From godina at dal.ca  Tue Oct 18 19:29:44 2011
From: godina at dal.ca (Aurelie C.Godin)
Date: Tue, 18 Oct 2011 10:29:44 -0700 (PDT)
Subject: [R-sig-Geo] Extracting GIS file - best approach?
In-Reply-To: <CAPD=LeufVLvHW1LtYng14Dovm-mHD_kCCcmyuB_n+jEA3HnWQg@mail.gmail.com>
References: <1318944972884-6904616.post@n2.nabble.com>
	<201110181428.p9IESfQg031662@smtp.upm.es>
	<1318950303318-6904976.post@n2.nabble.com>
	<201110181542.p9IFgchB022530@smtp.upm.es>
	<1318954596252-6905291.post@n2.nabble.com>
	<CAPD=LeufVLvHW1LtYng14Dovm-mHD_kCCcmyuB_n+jEA3HnWQg@mail.gmail.com>
Message-ID: <1318958984365-6905586.post@n2.nabble.com>

Thank you Brad! Will definitely look into this Qgis mailing list!
Cheers, ~Aurelie

-----
Aurelie Cosandey-Godin
Ph.D. Student, Department of Biology, Dalhousie University
Industrial Graduate Fellow, WWF-Canada
Email: godina at dal.ca | Web: wormlab.biology.dal.ca

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Extracting-GIS-file-best-approach-tp6904616p6905586.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From edzer.pebesma at uni-muenster.de  Tue Oct 18 21:30:15 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 18 Oct 2011 21:30:15 +0200
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>	<4E9D994E.1000808@uni-muenster.de>
	<CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>
Message-ID: <4E9DD3C7.2040706@uni-muenster.de>



On 10/18/2011 06:32 PM, Agustin Lobo wrote:
> I'm afraid I do not understand well the help page.
> It seems to me that what I need is
> "x = "SpatialPointsDataFrame", y = "SpatialPolygons"
>   equal to the previous method, except that an argument fn=xxx is
> allowed, e.g. fn = mean which will then report a data.frame with the
> mean values of the x points falling in each polygon (set) of y"

No, you need the other way around -- this is what I got wrong with 
overlay, long ago, where argument order did not matter. over(a,b) is the 
opposite of over(b,a)

The text of the "over" documentation is hard to read, and I find the 
concept hard to explain in words, without giving examples. That's why I 
wrote the vignette.

> Thus:
>> delme4<- over(fireLC2[,5], BorneoLC,fn=sum)
> where
>> BorneoLC at data[1,]
>    LC   ID LC_2         LCname LCabrv    AREA PERIMETER
> 0  4 4505    4 Lowland Forest    LwF 7.7e-05  0.036385
> and
>> fireLC2 at data[1,]
>    LC ID                      LCname LCabrv nbp
> 1  7  1 Plantation_Secondary Forest  PltSF   1
>
> but I get
> Error in FUN(X[[1L]], ...) :
>    only defined on a data frame with all numeric variables
> Calls: over ... do.call ->  lapply ->  Summary.data.frame ->  lapply ->  FUN
>
It would be helpful if you could provide a reproducible script that 
leads to this error, or even the command that gave you this error.

> which I do not understand because fireLC2[,5] is numeric
> (suggestion: could the user define the field(s) for which he wants fn
> being applied? )

How about passing an object with numeric attributes (selected)?

> Beyond that, where the help page says:
> "...which will then report a data.frame with the mean values of the x
> points falling in each polygon (set) of y",
> what happens if there is no points falling for a given polygon? Would
> the record be eliminated or kept as NA ?
>> From my point of view, having the option of getting a data.frame with
> the same nb. of rows and same ordering as
> the input Sp Polygons object would be an advantage.

That is why over was written to replace overlay.

I modified the example in "over" to illustrate your two cases:

############ start script
require(sp)
r1 = cbind(c(180114, 180553, 181127, 181477, 181294, 181007, 180409,
180162, 180114), c(332349, 332057, 332342, 333250, 333558, 333676,
332618, 332413, 332349))
r2 = cbind(c(180042, 180545, 180553, 180314, 179955, 179142, 179437,
179524, 179979, 180042), c(332373, 332026, 331426, 330889, 330683,
331133, 331623, 332152, 332357, 332373))
r3 = cbind(c(179110, 179907, 180433, 180712, 180752, 180329, 179875,
179668, 179572, 179269, 178879, 178600, 178544, 179046, 179110),
c(331086, 330620, 330494, 330265, 330075, 330233, 330336, 330004,
329783, 329665, 329720, 329933, 330478, 331062, 331086))
r4 = cbind(c(180304, 180403,179632,179420,180304),
c(332791, 333204, 333635, 333058, 332791))

sr1=Polygons(list(Polygon(r1)),"r1")
sr2=Polygons(list(Polygon(r2)),"r2")
sr3=Polygons(list(Polygon(r3)),"r3")
sr4=Polygons(list(Polygon(r4)),"r4")
sr=SpatialPolygons(list(sr1,sr2,sr3,sr4))
srdf=SpatialPolygonsDataFrame(sr, data.frame(cbind(1:4,5:2), 
row.names=c("r1","r2","r3","r4")))

data(meuse)
coordinates(meuse) = ~x+y

plot(meuse)
polygon(r1)
polygon(r2)
polygon(r3)
polygon(r4)
# retrieve mean heavy metal concentrations per polygon:
# attribute means over each polygon, NA for empty
over(sr, meuse[,1:4], fn = mean)

# return the number of points in each polygon:
sapply(over(sr, geometry(meuse), returnList = TRUE), length)
######## end script

Get some grip on "over". Forget overlay, it will get deprecated. "over" 
doesn't stop with sp; you'll find further "over" methods in packages 
rgeos and spacetime.

Hth,
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From jminming at yahoo.com  Tue Oct 18 22:58:37 2011
From: jminming at yahoo.com (Jin Minming)
Date: Tue, 18 Oct 2011 21:58:37 +0100 (BST)
Subject: [R-sig-Geo] Missing data for GWR analysis in spgwr
Message-ID: <1318971517.40512.YahooMailNeo@web24001.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/3057e225/attachment.pl>

From zua3 at cornell.edu  Tue Oct 18 23:07:46 2011
From: zua3 at cornell.edu (Zia Ahmed)
Date: Tue, 18 Oct 2011 17:07:46 -0400
Subject: [R-sig-Geo] Calculating 95th percentile  within polygons
In-Reply-To: <4E9DD3C7.2040706@uni-muenster.de>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>	<4E9D994E.1000808@uni-muenster.de>	<CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>
	<4E9DD3C7.2040706@uni-muenster.de>
Message-ID: <4E9DEAA2.1060706@cornell.edu>

  I am trying to calculating  95th percentile within polygons  from a of 
set realizations - something like zonal statistics.
How do I calculate 95 th percentile for each polygon over all realizations.
Thanks
Zia

For example:

data(meuse)
data(meuse.grid)
coordinates(meuse) <- ~x+y
coordinates(meuse.grid) <- ~x+y

# Simulation
nsim=10
x <- krige(log(zinc)~1, meuse, meuse.grid, model = vgm(.59, "Sph", 874, 
.04), nmax=10, nsim=nsim)
over(sr, x[,1:4], fn = mean)

 > over(sr, x[,1:4], fn = mean)
        sim1     sim2     sim3     sim4
r1 5.858169 5.792870 5.855246 5.868499
r2 5.588570 5.452744 5.596648 5.516289
r3 5.798087 5.860750 5.784194 5.848194
r4       NA       NA       NA       NA

# 95 th percentile at prediction grid:
x<-as.data.frame(x)
y95<-apply(x[3:nsim],1,stats::quantile,probs = 0.95,na.rm=TRUE) # 95 th 
percentile at each prediction grid



On 10/18/2011 3:30 PM, Edzer Pebesma wrote:
> require(sp)
> r1 = cbind(c(180114, 180553, 181127, 181477, 181294, 181007, 180409,
> 180162, 180114), c(332349, 332057, 332342, 333250, 333558, 333676,
> 332618, 332413, 332349))
> r2 = cbind(c(180042, 180545, 180553, 180314, 179955, 179142, 179437,
> 179524, 179979, 180042), c(332373, 332026, 331426, 330889, 330683,
> 331133, 331623, 332152, 332357, 332373))
> r3 = cbind(c(179110, 179907, 180433, 180712, 180752, 180329, 179875,
> 179668, 179572, 179269, 178879, 178600, 178544, 179046, 179110),
> c(331086, 330620, 330494, 330265, 330075, 330233, 330336, 330004,
> 329783, 329665, 329720, 329933, 330478, 331062, 331086))
> r4 = cbind(c(180304, 180403,179632,179420,180304),
> c(332791, 333204, 333635, 333058, 332791))
>
> sr1=Polygons(list(Polygon(r1)),"r1")
> sr2=Polygons(list(Polygon(r2)),"r2")
> sr3=Polygons(list(Polygon(r3)),"r3")
> sr4=Polygons(list(Polygon(r4)),"r4")
> sr=SpatialPolygons(list(sr1,sr2,sr3,sr4))
> srdf=SpatialPolygonsDataFrame(sr, data.frame(cbind(1:4,5:2), 
> row.names=c("r1","r2","r3","r4")))
>
> data(meuse)
> coordinates(meuse) = ~x+y
>
> plot(meuse)
> polygon(r1)
> polygon(r2)
> polygon(r3)
> polygon(r4)
> # retrieve mean heavy metal concentrations per polygon:
> # attribute means over each polygon, NA for empty
> over(sr, meuse[,1:4], fn = mean)
>
> # return the number of points in each polygon:
> sapply(over(sr, geometry(meuse), returnList = TRUE), length) 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/95cd4b4e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zua3.vcf
Type: text/x-vcard
Size: 281 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/95cd4b4e/attachment.vcf>

From edzer.pebesma at uni-muenster.de  Tue Oct 18 23:12:01 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 18 Oct 2011 23:12:01 +0200
Subject: [R-sig-Geo] Calculating 95th percentile  within polygons
In-Reply-To: <4E9DEAA2.1060706@cornell.edu>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>	<4E9D994E.1000808@uni-muenster.de>	<CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>
	<4E9DD3C7.2040706@uni-muenster.de> <4E9DEAA2.1060706@cornell.edu>
Message-ID: <4E9DEBA1.2010803@uni-muenster.de>

Zia,

You may want to rethink the question. Each realization has a 95 
percentile within a particular polygon. Over the set of realizations of 
some aggregated value for a polygon, you can take a 95 percentile.

These are two different things. The first is a spatial aggregation, the 
second an aggregation over the (sampled) probability distribution.

On 10/18/2011 11:07 PM, Zia Ahmed wrote:
> I am trying to calculating 95th percentile within polygons from a of set
> realizations - something like zonal statistics.
> How do I calculate 95 th percentile for each polygon over all realizations.
> Thanks
> Zia
>
> For example:
>
> data(meuse)
> data(meuse.grid)
> coordinates(meuse) <- ~x+y
> coordinates(meuse.grid) <- ~x+y
>
> # Simulation
> nsim=10
> x <- krige(log(zinc)~1, meuse, meuse.grid, model = vgm(.59, "Sph", 874,
> .04), nmax=10, nsim=nsim)
> over(sr, x[,1:4], fn = mean)
>
>  > over(sr, x[,1:4], fn = mean)
> sim1 sim2 sim3 sim4
> r1 5.858169 5.792870 5.855246 5.868499
> r2 5.588570 5.452744 5.596648 5.516289
> r3 5.798087 5.860750 5.784194 5.848194
> r4 NA NA NA NA
>
> # 95 th percentile at prediction grid:
> x<-as.data.frame(x)
> y95<-apply(x[3:nsim],1,stats::quantile,probs = 0.95,na.rm=TRUE) # 95 th
> percentile at each prediction grid
>
>
>
> On 10/18/2011 3:30 PM, Edzer Pebesma wrote:
>> require(sp)
>> r1 = cbind(c(180114, 180553, 181127, 181477, 181294, 181007, 180409,
>> 180162, 180114), c(332349, 332057, 332342, 333250, 333558, 333676,
>> 332618, 332413, 332349))
>> r2 = cbind(c(180042, 180545, 180553, 180314, 179955, 179142, 179437,
>> 179524, 179979, 180042), c(332373, 332026, 331426, 330889, 330683,
>> 331133, 331623, 332152, 332357, 332373))
>> r3 = cbind(c(179110, 179907, 180433, 180712, 180752, 180329, 179875,
>> 179668, 179572, 179269, 178879, 178600, 178544, 179046, 179110),
>> c(331086, 330620, 330494, 330265, 330075, 330233, 330336, 330004,
>> 329783, 329665, 329720, 329933, 330478, 331062, 331086))
>> r4 = cbind(c(180304, 180403,179632,179420,180304),
>> c(332791, 333204, 333635, 333058, 332791))
>>
>> sr1=Polygons(list(Polygon(r1)),"r1")
>> sr2=Polygons(list(Polygon(r2)),"r2")
>> sr3=Polygons(list(Polygon(r3)),"r3")
>> sr4=Polygons(list(Polygon(r4)),"r4")
>> sr=SpatialPolygons(list(sr1,sr2,sr3,sr4))
>> srdf=SpatialPolygonsDataFrame(sr, data.frame(cbind(1:4,5:2),
>> row.names=c("r1","r2","r3","r4")))
>>
>> data(meuse)
>> coordinates(meuse) = ~x+y
>>
>> plot(meuse)
>> polygon(r1)
>> polygon(r2)
>> polygon(r3)
>> polygon(r4)
>> # retrieve mean heavy metal concentrations per polygon:
>> # attribute means over each polygon, NA for empty
>> over(sr, meuse[,1:4], fn = mean)
>>
>> # return the number of points in each polygon:
>> sapply(over(sr, geometry(meuse), returnList = TRUE), length)

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From zua3 at cornell.edu  Tue Oct 18 23:45:53 2011
From: zua3 at cornell.edu (Zia Ahmed)
Date: Tue, 18 Oct 2011 17:45:53 -0400
Subject: [R-sig-Geo] Calculating 95th percentile  within polygons
In-Reply-To: <4E9DEBA1.2010803@uni-muenster.de>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>	<4E9D994E.1000808@uni-muenster.de>	<CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>
	<4E9DD3C7.2040706@uni-muenster.de> <4E9DEAA2.1060706@cornell.edu>
	<4E9DEBA1.2010803@uni-muenster.de>
Message-ID: <4E9DF391.3060409@cornell.edu>

  Your are correct. Now, what I am  going to do: first calculate 95th 
percentile  of all realizations at prediction grid and then calculate 
the mean for each  polygon.  Is it possible to calculated weighted mean 
of the this  95th percentile? weight may be  area of polygon  or any 
value, for example population density  for each polygon.
Thanks
Zia

On 10/18/2011 5:12 PM, Edzer Pebesma wrote:
> Zia,
>
> You may want to rethink the question. Each realization has a 95 
> percentile within a particular polygon. Over the set of realizations 
> of some aggregated value for a polygon, you can take a 95 percentile.
>
> These are two different things. The first is a spatial aggregation, 
> the second an aggregation over the (sampled) probability distribution.
>
> On 10/18/2011 11:07 PM, Zia Ahmed wrote:
>> I am trying to calculating 95th percentile within polygons from a of set
>> realizations - something like zonal statistics.
>> How do I calculate 95 th percentile for each polygon over all 
>> realizations.
>> Thanks
>> Zia
>>
>> For example:
>>
>> data(meuse)
>> data(meuse.grid)
>> coordinates(meuse) <- ~x+y
>> coordinates(meuse.grid) <- ~x+y
>>
>> # Simulation
>> nsim=10
>> x <- krige(log(zinc)~1, meuse, meuse.grid, model = vgm(.59, "Sph", 874,
>> .04), nmax=10, nsim=nsim)
>> over(sr, x[,1:4], fn = mean)
>>
>> > over(sr, x[,1:4], fn = mean)
>> sim1 sim2 sim3 sim4
>> r1 5.858169 5.792870 5.855246 5.868499
>> r2 5.588570 5.452744 5.596648 5.516289
>> r3 5.798087 5.860750 5.784194 5.848194
>> r4 NA NA NA NA
>>
>> # 95 th percentile at prediction grid:
>> x<-as.data.frame(x)
>> y95<-apply(x[3:nsim],1,stats::quantile,probs = 0.95,na.rm=TRUE) # 95 th
>> percentile at each prediction grid
>>
>>
>>
>> On 10/18/2011 3:30 PM, Edzer Pebesma wrote:
>>> require(sp)
>>> r1 = cbind(c(180114, 180553, 181127, 181477, 181294, 181007, 180409,
>>> 180162, 180114), c(332349, 332057, 332342, 333250, 333558, 333676,
>>> 332618, 332413, 332349))
>>> r2 = cbind(c(180042, 180545, 180553, 180314, 179955, 179142, 179437,
>>> 179524, 179979, 180042), c(332373, 332026, 331426, 330889, 330683,
>>> 331133, 331623, 332152, 332357, 332373))
>>> r3 = cbind(c(179110, 179907, 180433, 180712, 180752, 180329, 179875,
>>> 179668, 179572, 179269, 178879, 178600, 178544, 179046, 179110),
>>> c(331086, 330620, 330494, 330265, 330075, 330233, 330336, 330004,
>>> 329783, 329665, 329720, 329933, 330478, 331062, 331086))
>>> r4 = cbind(c(180304, 180403,179632,179420,180304),
>>> c(332791, 333204, 333635, 333058, 332791))
>>>
>>> sr1=Polygons(list(Polygon(r1)),"r1")
>>> sr2=Polygons(list(Polygon(r2)),"r2")
>>> sr3=Polygons(list(Polygon(r3)),"r3")
>>> sr4=Polygons(list(Polygon(r4)),"r4")
>>> sr=SpatialPolygons(list(sr1,sr2,sr3,sr4))
>>> srdf=SpatialPolygonsDataFrame(sr, data.frame(cbind(1:4,5:2),
>>> row.names=c("r1","r2","r3","r4")))
>>>
>>> data(meuse)
>>> coordinates(meuse) = ~x+y
>>>
>>> plot(meuse)
>>> polygon(r1)
>>> polygon(r2)
>>> polygon(r3)
>>> polygon(r4)
>>> # retrieve mean heavy metal concentrations per polygon:
>>> # attribute means over each polygon, NA for empty
>>> over(sr, meuse[,1:4], fn = mean)
>>>
>>> # return the number of points in each polygon:
>>> sapply(over(sr, geometry(meuse), returnList = TRUE), length)
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zua3.vcf
Type: text/x-vcard
Size: 281 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/1938ecdb/attachment.vcf>

From rundel at gmail.com  Wed Oct 19 00:06:09 2011
From: rundel at gmail.com (Colin Rundel)
Date: Tue, 18 Oct 2011 18:06:09 -0400
Subject: [R-sig-Geo] [rgeos] A gIntersection operation causes RStudio to
	crash
In-Reply-To: <CAGfc75=KwNU0swwU2ZCb9AN53VD8UjmRQz=FXF3D0S6PdJ=KEg@mail.gmail.com>
References: <CAGfc75=KwNU0swwU2ZCb9AN53VD8UjmRQz=FXF3D0S6PdJ=KEg@mail.gmail.com>
Message-ID: <246AAA0C-6CAF-4CC3-8ACF-8442BF62E74F@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/fc2efd3b/attachment.pl>

From lubinbin220 at gmail.com  Wed Oct 19 00:09:48 2011
From: lubinbin220 at gmail.com (binbin lu)
Date: Tue, 18 Oct 2011 23:09:48 +0100
Subject: [R-sig-Geo] Missing data for GWR analysis in spgwr
In-Reply-To: <1318971517.40512.YahooMailNeo@web24001.mail.ird.yahoo.com>
References: <1318971517.40512.YahooMailNeo@web24001.mail.ird.yahoo.com>
Message-ID: <CANuoaEF8rVG6Jk4VoHCoT=bU32==zEGKGpQdJQY2tFDpO5FXAQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111018/76a3a5a7/attachment.pl>

From edzer.pebesma at uni-muenster.de  Wed Oct 19 07:32:58 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 19 Oct 2011 07:32:58 +0200
Subject: [R-sig-Geo] Calculating 95th percentile  within polygons
In-Reply-To: <4E9DF391.3060409@cornell.edu>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>	<4E9D994E.1000808@uni-muenster.de>	<CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>
	<4E9DD3C7.2040706@uni-muenster.de> <4E9DEAA2.1060706@cornell.edu>
	<4E9DEBA1.2010803@uni-muenster.de> <4E9DF391.3060409@cornell.edu>
Message-ID: <4E9E610A.80105@uni-muenster.de>



On 10/18/2011 11:45 PM, Zia Ahmed wrote:
> Your are correct. Now, what I am going to do: first calculate 95th
> percentile of all realizations at prediction grid and then calculate the
> mean for each polygon.

this implies you end up with one single value per polygon. Call it A.

> Is it possible to calculated weighted mean of the
> this 95th percentile? weight may be area of polygon or any value, for
> example population density for each polygon.

if this population density is in the polygon attributes, then this is 
trivial, as the number of records equals that of output A.

> Thanks
> Zia
>
> On 10/18/2011 5:12 PM, Edzer Pebesma wrote:
>> Zia,
>>
>> You may want to rethink the question. Each realization has a 95
>> percentile within a particular polygon. Over the set of realizations
>> of some aggregated value for a polygon, you can take a 95 percentile.
>>
>> These are two different things. The first is a spatial aggregation,
>> the second an aggregation over the (sampled) probability distribution.
>>
>> On 10/18/2011 11:07 PM, Zia Ahmed wrote:
>>> I am trying to calculating 95th percentile within polygons from a of set
>>> realizations - something like zonal statistics.
>>> How do I calculate 95 th percentile for each polygon over all
>>> realizations.
>>> Thanks
>>> Zia
>>>
>>> For example:
>>>
>>> data(meuse)
>>> data(meuse.grid)
>>> coordinates(meuse) <- ~x+y
>>> coordinates(meuse.grid) <- ~x+y
>>>
>>> # Simulation
>>> nsim=10
>>> x <- krige(log(zinc)~1, meuse, meuse.grid, model = vgm(.59, "Sph", 874,
>>> .04), nmax=10, nsim=nsim)
>>> over(sr, x[,1:4], fn = mean)
>>>
>>> > over(sr, x[,1:4], fn = mean)
>>> sim1 sim2 sim3 sim4
>>> r1 5.858169 5.792870 5.855246 5.868499
>>> r2 5.588570 5.452744 5.596648 5.516289
>>> r3 5.798087 5.860750 5.784194 5.848194
>>> r4 NA NA NA NA
>>>
>>> # 95 th percentile at prediction grid:
>>> x<-as.data.frame(x)
>>> y95<-apply(x[3:nsim],1,stats::quantile,probs = 0.95,na.rm=TRUE) # 95 th
>>> percentile at each prediction grid
>>>
>>>
>>>
>>> On 10/18/2011 3:30 PM, Edzer Pebesma wrote:
>>>> require(sp)
>>>> r1 = cbind(c(180114, 180553, 181127, 181477, 181294, 181007, 180409,
>>>> 180162, 180114), c(332349, 332057, 332342, 333250, 333558, 333676,
>>>> 332618, 332413, 332349))
>>>> r2 = cbind(c(180042, 180545, 180553, 180314, 179955, 179142, 179437,
>>>> 179524, 179979, 180042), c(332373, 332026, 331426, 330889, 330683,
>>>> 331133, 331623, 332152, 332357, 332373))
>>>> r3 = cbind(c(179110, 179907, 180433, 180712, 180752, 180329, 179875,
>>>> 179668, 179572, 179269, 178879, 178600, 178544, 179046, 179110),
>>>> c(331086, 330620, 330494, 330265, 330075, 330233, 330336, 330004,
>>>> 329783, 329665, 329720, 329933, 330478, 331062, 331086))
>>>> r4 = cbind(c(180304, 180403,179632,179420,180304),
>>>> c(332791, 333204, 333635, 333058, 332791))
>>>>
>>>> sr1=Polygons(list(Polygon(r1)),"r1")
>>>> sr2=Polygons(list(Polygon(r2)),"r2")
>>>> sr3=Polygons(list(Polygon(r3)),"r3")
>>>> sr4=Polygons(list(Polygon(r4)),"r4")
>>>> sr=SpatialPolygons(list(sr1,sr2,sr3,sr4))
>>>> srdf=SpatialPolygonsDataFrame(sr, data.frame(cbind(1:4,5:2),
>>>> row.names=c("r1","r2","r3","r4")))
>>>>
>>>> data(meuse)
>>>> coordinates(meuse) = ~x+y
>>>>
>>>> plot(meuse)
>>>> polygon(r1)
>>>> polygon(r2)
>>>> polygon(r3)
>>>> polygon(r4)
>>>> # retrieve mean heavy metal concentrations per polygon:
>>>> # attribute means over each polygon, NA for empty
>>>> over(sr, meuse[,1:4], fn = mean)
>>>>
>>>> # return the number of points in each polygon:
>>>> sapply(over(sr, geometry(meuse), returnList = TRUE), length)
>>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From mathieu.rajerison at gmail.com  Wed Oct 19 08:51:38 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 19 Oct 2011 08:51:38 +0200
Subject: [R-sig-Geo] [rgeos] A gIntersection operation causes RStudio to
	crash
In-Reply-To: <246AAA0C-6CAF-4CC3-8ACF-8442BF62E74F@gmail.com>
References: <CAGfc75=KwNU0swwU2ZCb9AN53VD8UjmRQz=FXF3D0S6PdJ=KEg@mail.gmail.com>
	<246AAA0C-6CAF-4CC3-8ACF-8442BF62E74F@gmail.com>
Message-ID: <CAGfc75nJGS1RuPVRib5qcY2JEO-3YYY8_qCFZioo2zeEvPVU1Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111019/f18e3179/attachment.pl>

From alobolistas at gmail.com  Wed Oct 19 10:36:26 2011
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed, 19 Oct 2011 10:36:26 +0200
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <4E9DD3C7.2040706@uni-muenster.de>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>
	<4E9D994E.1000808@uni-muenster.de>
	<CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>
	<4E9DD3C7.2040706@uni-muenster.de>
Message-ID: <CAG4NReLK2=ARj67jvCS271WLPAXAab2U8chjOkgwM_-GYcbBuw@mail.gmail.com>

You are right the vignette is pretty clear.
I think this is a more elegant solution (BorneoLC is the Sp Pol DF and
fireLC2 the Sp Points DF):

> delme6 <- over(BorneoLC, fireLC2, returnList = TRUE)
> nbp <- sapply(delme6,nrow)
> newdata <- data.frame(BorneoLC at data,nbp=nbp)
> BorneoLC2 <- BorneoLC
> BorneoLC2 at data <- newdata
> BorneoLC2 at data[c(1,1000),]
    LC   ID LC_2         LCname LCabrv     AREA PERIMETER nbp
0    4 4505    4 Lowland Forest    LwF 0.000077  0.036385   0
999  8 6745    8 Lowland Mosaic    LwM 0.007168  0.864000   2

Perhaps having an sp function for the specific task of counting points
within polygons would make sense, I think that
would be quite popular.

Agus


2011/10/18 Edzer Pebesma <edzer.pebesma at uni-muenster.de>:
>
>
> On 10/18/2011 06:32 PM, Agustin Lobo wrote:
>>
>> I'm afraid I do not understand well the help page.
>> It seems to me that what I need is
>> "x = "SpatialPointsDataFrame", y = "SpatialPolygons"
>> ?equal to the previous method, except that an argument fn=xxx is
>> allowed, e.g. fn = mean which will then report a data.frame with the
>> mean values of the x points falling in each polygon (set) of y"
>
> No, you need the other way around -- this is what I got wrong with overlay,
> long ago, where argument order did not matter. over(a,b) is the opposite of
> over(b,a)
>
> The text of the "over" documentation is hard to read, and I find the concept
> hard to explain in words, without giving examples. That's why I wrote the
> vignette.
>
>> Thus:
>>>
>>> delme4<- over(fireLC2[,5], BorneoLC,fn=sum)
>>
>> where
>>>
>>> BorneoLC at data[1,]
>>
>> ? LC ? ID LC_2 ? ? ? ? LCname LCabrv ? ?AREA PERIMETER
>> 0 ?4 4505 ? ?4 Lowland Forest ? ?LwF 7.7e-05 ?0.036385
>> and
>>>
>>> fireLC2 at data[1,]
>>
>> ? LC ID ? ? ? ? ? ? ? ? ? ? ?LCname LCabrv nbp
>> 1 ?7 ?1 Plantation_Secondary Forest ?PltSF ? 1
>>
>> but I get
>> Error in FUN(X[[1L]], ...) :
>> ? only defined on a data frame with all numeric variables
>> Calls: over ... do.call -> ?lapply -> ?Summary.data.frame -> ?lapply ->
>> ?FUN
>>
> It would be helpful if you could provide a reproducible script that leads to
> this error, or even the command that gave you this error.
>
>> which I do not understand because fireLC2[,5] is numeric
>> (suggestion: could the user define the field(s) for which he wants fn
>> being applied? )
>
> How about passing an object with numeric attributes (selected)?
>
>> Beyond that, where the help page says:
>> "...which will then report a data.frame with the mean values of the x
>> points falling in each polygon (set) of y",
>> what happens if there is no points falling for a given polygon? Would
>> the record be eliminated or kept as NA ?
>>>
>>> From my point of view, having the option of getting a data.frame with
>>
>> the same nb. of rows and same ordering as
>> the input Sp Polygons object would be an advantage.
>
> That is why over was written to replace overlay.
>
> I modified the example in "over" to illustrate your two cases:
>
> ############ start script
> require(sp)
> r1 = cbind(c(180114, 180553, 181127, 181477, 181294, 181007, 180409,
> 180162, 180114), c(332349, 332057, 332342, 333250, 333558, 333676,
> 332618, 332413, 332349))
> r2 = cbind(c(180042, 180545, 180553, 180314, 179955, 179142, 179437,
> 179524, 179979, 180042), c(332373, 332026, 331426, 330889, 330683,
> 331133, 331623, 332152, 332357, 332373))
> r3 = cbind(c(179110, 179907, 180433, 180712, 180752, 180329, 179875,
> 179668, 179572, 179269, 178879, 178600, 178544, 179046, 179110),
> c(331086, 330620, 330494, 330265, 330075, 330233, 330336, 330004,
> 329783, 329665, 329720, 329933, 330478, 331062, 331086))
> r4 = cbind(c(180304, 180403,179632,179420,180304),
> c(332791, 333204, 333635, 333058, 332791))
>
> sr1=Polygons(list(Polygon(r1)),"r1")
> sr2=Polygons(list(Polygon(r2)),"r2")
> sr3=Polygons(list(Polygon(r3)),"r3")
> sr4=Polygons(list(Polygon(r4)),"r4")
> sr=SpatialPolygons(list(sr1,sr2,sr3,sr4))
> srdf=SpatialPolygonsDataFrame(sr, data.frame(cbind(1:4,5:2),
> row.names=c("r1","r2","r3","r4")))
>
> data(meuse)
> coordinates(meuse) = ~x+y
>
> plot(meuse)
> polygon(r1)
> polygon(r2)
> polygon(r3)
> polygon(r4)
> # retrieve mean heavy metal concentrations per polygon:
> # attribute means over each polygon, NA for empty
> over(sr, meuse[,1:4], fn = mean)
>
> # return the number of points in each polygon:
> sapply(over(sr, geometry(meuse), returnList = TRUE), length)
> ######## end script
>
> Get some grip on "over". Forget overlay, it will get deprecated. "over"
> doesn't stop with sp; you'll find further "over" methods in packages rgeos
> and spacetime.
>
> Hth,
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>


From alobolistas at gmail.com  Wed Oct 19 10:39:42 2011
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed, 19 Oct 2011 10:39:42 +0200
Subject: [R-sig-Geo] Counting points within polygons
In-Reply-To: <CAG4NReLK2=ARj67jvCS271WLPAXAab2U8chjOkgwM_-GYcbBuw@mail.gmail.com>
References: <CAG4NReKz9cdH4+g-WspG9C3aCTshTDdFru18qJPp0fpq7S3MaA@mail.gmail.com>
	<CAG4NReJd4c=+8F_NEGSz6q2aseg0eeATXS8mrv9m59XOk_LGKg@mail.gmail.com>
	<4E9D994E.1000808@uni-muenster.de>
	<CAG4NRe+jTegcbdnO07+e8F-5H3uUKM-V793tD=Zm00EHpkjuaQ@mail.gmail.com>
	<4E9DD3C7.2040706@uni-muenster.de>
	<CAG4NReLK2=ARj67jvCS271WLPAXAab2U8chjOkgwM_-GYcbBuw@mail.gmail.com>
Message-ID: <CAG4NRe+_=JdaBvDTZ7x1+FRYr_artaibmBNsddaJxK-_FR_fwg@mail.gmail.com>

well, what I sent is actually the same than you had written at the end
of your message, I went too fast and thought
it was the example of the help page of overlay.
Sorry for the noise
Agus

2011/10/19 Agustin Lobo <alobolistas at gmail.com>:
> You are right the vignette is pretty clear.
> I think this is a more elegant solution (BorneoLC is the Sp Pol DF and
> fireLC2 the Sp Points DF):
>
>> delme6 <- over(BorneoLC, fireLC2, returnList = TRUE)
>> nbp <- sapply(delme6,nrow)
>> newdata <- data.frame(BorneoLC at data,nbp=nbp)
>> BorneoLC2 <- BorneoLC
>> BorneoLC2 at data <- newdata
>> BorneoLC2 at data[c(1,1000),]
> ? ?LC ? ID LC_2 ? ? ? ? LCname LCabrv ? ? AREA PERIMETER nbp
> 0 ? ?4 4505 ? ?4 Lowland Forest ? ?LwF 0.000077 ?0.036385 ? 0
> 999 ?8 6745 ? ?8 Lowland Mosaic ? ?LwM 0.007168 ?0.864000 ? 2
>
> Perhaps having an sp function for the specific task of counting points
> within polygons would make sense, I think that
> would be quite popular.
>
> Agus
>
>
> 2011/10/18 Edzer Pebesma <edzer.pebesma at uni-muenster.de>:
>>
>>
>> On 10/18/2011 06:32 PM, Agustin Lobo wrote:
>>>
>>> I'm afraid I do not understand well the help page.
>>> It seems to me that what I need is
>>> "x = "SpatialPointsDataFrame", y = "SpatialPolygons"
>>> ?equal to the previous method, except that an argument fn=xxx is
>>> allowed, e.g. fn = mean which will then report a data.frame with the
>>> mean values of the x points falling in each polygon (set) of y"
>>
>> No, you need the other way around -- this is what I got wrong with overlay,
>> long ago, where argument order did not matter. over(a,b) is the opposite of
>> over(b,a)
>>
>> The text of the "over" documentation is hard to read, and I find the concept
>> hard to explain in words, without giving examples. That's why I wrote the
>> vignette.
>>
>>> Thus:
>>>>
>>>> delme4<- over(fireLC2[,5], BorneoLC,fn=sum)
>>>
>>> where
>>>>
>>>> BorneoLC at data[1,]
>>>
>>> ? LC ? ID LC_2 ? ? ? ? LCname LCabrv ? ?AREA PERIMETER
>>> 0 ?4 4505 ? ?4 Lowland Forest ? ?LwF 7.7e-05 ?0.036385
>>> and
>>>>
>>>> fireLC2 at data[1,]
>>>
>>> ? LC ID ? ? ? ? ? ? ? ? ? ? ?LCname LCabrv nbp
>>> 1 ?7 ?1 Plantation_Secondary Forest ?PltSF ? 1
>>>
>>> but I get
>>> Error in FUN(X[[1L]], ...) :
>>> ? only defined on a data frame with all numeric variables
>>> Calls: over ... do.call -> ?lapply -> ?Summary.data.frame -> ?lapply ->
>>> ?FUN
>>>
>> It would be helpful if you could provide a reproducible script that leads to
>> this error, or even the command that gave you this error.
>>
>>> which I do not understand because fireLC2[,5] is numeric
>>> (suggestion: could the user define the field(s) for which he wants fn
>>> being applied? )
>>
>> How about passing an object with numeric attributes (selected)?
>>
>>> Beyond that, where the help page says:
>>> "...which will then report a data.frame with the mean values of the x
>>> points falling in each polygon (set) of y",
>>> what happens if there is no points falling for a given polygon? Would
>>> the record be eliminated or kept as NA ?
>>>>
>>>> From my point of view, having the option of getting a data.frame with
>>>
>>> the same nb. of rows and same ordering as
>>> the input Sp Polygons object would be an advantage.
>>
>> That is why over was written to replace overlay.
>>
>> I modified the example in "over" to illustrate your two cases:
>>
>> ############ start script
>> require(sp)
>> r1 = cbind(c(180114, 180553, 181127, 181477, 181294, 181007, 180409,
>> 180162, 180114), c(332349, 332057, 332342, 333250, 333558, 333676,
>> 332618, 332413, 332349))
>> r2 = cbind(c(180042, 180545, 180553, 180314, 179955, 179142, 179437,
>> 179524, 179979, 180042), c(332373, 332026, 331426, 330889, 330683,
>> 331133, 331623, 332152, 332357, 332373))
>> r3 = cbind(c(179110, 179907, 180433, 180712, 180752, 180329, 179875,
>> 179668, 179572, 179269, 178879, 178600, 178544, 179046, 179110),
>> c(331086, 330620, 330494, 330265, 330075, 330233, 330336, 330004,
>> 329783, 329665, 329720, 329933, 330478, 331062, 331086))
>> r4 = cbind(c(180304, 180403,179632,179420,180304),
>> c(332791, 333204, 333635, 333058, 332791))
>>
>> sr1=Polygons(list(Polygon(r1)),"r1")
>> sr2=Polygons(list(Polygon(r2)),"r2")
>> sr3=Polygons(list(Polygon(r3)),"r3")
>> sr4=Polygons(list(Polygon(r4)),"r4")
>> sr=SpatialPolygons(list(sr1,sr2,sr3,sr4))
>> srdf=SpatialPolygonsDataFrame(sr, data.frame(cbind(1:4,5:2),
>> row.names=c("r1","r2","r3","r4")))
>>
>> data(meuse)
>> coordinates(meuse) = ~x+y
>>
>> plot(meuse)
>> polygon(r1)
>> polygon(r2)
>> polygon(r3)
>> polygon(r4)
>> # retrieve mean heavy metal concentrations per polygon:
>> # attribute means over each polygon, NA for empty
>> over(sr, meuse[,1:4], fn = mean)
>>
>> # return the number of points in each polygon:
>> sapply(over(sr, geometry(meuse), returnList = TRUE), length)
>> ######## end script
>>
>> Get some grip on "over". Forget overlay, it will get deprecated. "over"
>> doesn't stop with sp; you'll find further "over" methods in packages rgeos
>> and spacetime.
>>
>> Hth,
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics ? ? ?e.pebesma at wwu.de
>>
>


From mathieu.rajerison at gmail.com  Wed Oct 19 10:49:42 2011
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 19 Oct 2011 10:49:42 +0200
Subject: [R-sig-Geo] [rgeos] A gIntersection operation causes RStudio to
	crash
In-Reply-To: <4E9E7448.80501@uni-muenster.de>
References: <CAGfc75=KwNU0swwU2ZCb9AN53VD8UjmRQz=FXF3D0S6PdJ=KEg@mail.gmail.com>
	<246AAA0C-6CAF-4CC3-8ACF-8442BF62E74F@gmail.com>
	<CAGfc75nJGS1RuPVRib5qcY2JEO-3YYY8_qCFZioo2zeEvPVU1Q@mail.gmail.com>
	<4E9E7448.80501@uni-muenster.de>
Message-ID: <CAGfc75muxbP07XroeziAjZ8Qz8hvsDxOq4H-0r-7UJhz_EVRtA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111019/a8966f2c/attachment.pl>

From afischbach at usgs.gov  Wed Oct 19 19:00:29 2011
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Wed, 19 Oct 2011 10:00:29 -0700 (PDT)
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <1318534295322-6890251.post@n2.nabble.com>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
Message-ID: <1319043629399-6909541.post@n2.nabble.com>

In my previous post I happily handled the binary National Snow and Ice Data
Center sea ice imagery and cast it into a GeoTiff.
My next challenge is to wrap the GeoTiff into a kml overlay.
Continuing the code from the previous post, I pick it up just after writing
the raster object to the geoTiff.

...
 rr <- writeRaster(rr, geoTiffFile)

>From there I sought to use the maptools package functions 
GE_SpatialGrid and kmlOverlay to create the kml, 
but first I needed to cast my raster into a spatial points dataframe 
and project to geographic coordinates.

spdf <- rasterToPoints(rr, fun=NULL, spatial=TRUE) ## cast as a spatial
points data frame
xyWGS84 <- project(coordinates(spdf), inv=TRUE, proj=prj) ## Project to
WGS84 geographic

But this generates an error: 

Traceback:
 1: .C("project_inv", as.integer(nc), as.double(xy[, 1]), as.double(xy[,    
2]), x = double(nc), y = double(nc), proj, NAOK = TRUE, PACKAGE = "rgdal")
 2: project(coordinates(spdf), inv = TRUE, proj = prj)
Error in project(coordinates(spdf), inv = TRUE, proj = prj) : 
  caught access violation - continue with care

Apparently rgdal's project function is failing to invert the projection from
the NSIDC projection, 
here referenced as 
prj <- CRS('+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0
+a=6378273 +b=6356889.449 +units=m +no_defs')

Any suggestions?

-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6909541.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From r.hijmans at gmail.com  Wed Oct 19 19:17:09 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 19 Oct 2011 10:17:09 -0700
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <1319043629399-6909541.post@n2.nabble.com>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
Message-ID: <CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111019/3074b07c/attachment.pl>

From afischbach at usgs.gov  Wed Oct 19 19:36:34 2011
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Wed, 19 Oct 2011 10:36:34 -0700 (PDT)
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
Message-ID: <1319045794227-6909694.post@n2.nabble.com>

Very elegant!
But the projection seems to have trouble.
Please see images of the original raster and the projected raster produced
with plot commands.

http://r-sig-geo.2731867.n2.nabble.com/file/n6909694/rr.png 
http://r-sig-geo.2731867.n2.nabble.com/file/n6909694/rgeo.png 


-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6909694.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Thomas.Adams at noaa.gov  Wed Oct 19 19:41:46 2011
From: Thomas.Adams at noaa.gov (Thomas Adams)
Date: Wed, 19 Oct 2011 13:41:46 -0400
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <1319045794227-6909694.post@n2.nabble.com>
References: <1318369277111-6882737.post@n2.nabble.com>
	<CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com>
Message-ID: <4E9F0BDA.40802@noaa.gov>

  Tony,

This would be a far easier task in, say, GRASS GIS ? once the data is 
there, R integrates very nicely with GRASS, making the combination quite 
powerful.

Tom

On 10/19/11 1:36 PM, Anthony Fischbach wrote:
> Very elegant!
> But the projection seems to have trouble.
> Please see images of the original raster and the projected raster produced
> with plot commands.
>
> http://r-sig-geo.2731867.n2.nabble.com/file/n6909694/rr.png
> http://r-sig-geo.2731867.n2.nabble.com/file/n6909694/rgeo.png
>
>
> -----
> Tony Fischbach, Wildlife Biologist
> Walrus Research Program
> Alaska Science Center
> U.S. Geological Survey
> 4210 University Drive
> Anchorage, AK 99508-4650
>
> AFischbach at usgs.gov
> http://alaska.usgs.gov/science/biology/walrus
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6909694.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Thomas E Adams
National Weather Service
Ohio River Forecast Center
1901 South State Route 134
Wilmington, OH 45177

EMAIL:	thomas.adams at noaa.gov

VOICE:	937-383-0528
FAX:	937-383-0033


From afischbach at usgs.gov  Wed Oct 19 20:03:31 2011
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Wed, 19 Oct 2011 11:03:31 -0700 (PDT)
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <4E9F0BDA.40802@noaa.gov>
References: <CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com>
	<4E9F0BDA.40802@noaa.gov>
Message-ID: <1319047411920-6909785.post@n2.nabble.com>

Thank you for the GRASS suggestion.
It would also be straight forward in ArgGIS, but I seek to run this all in a
scripting environment with the full flexibility of R such that I may
automate the whole process.

Following on the projectRaster idea, I have tried using the from and to
options, first creating a from raster corresponding to the geographic extent
and resolution of the desired output raster.

> ll_lt <- 30.98
> ll_ln <- 168.35
> ur_lt <- 33.92
> ur_ln <- 279.26
> rGeo <- raster(nrows=448, ncols=304, xmn=ll_ln, xmx=ur_ln, ymn=ll_lt,
> ymx=ur_lt, crs="+proj=longlat +datum=WGS84")
> ## look at the raster before projecting
> rr
class       : RasterLayer 
dimensions  : 448, 304, 136192  (nrow, ncol, ncell)
resolution  : 25000, 25000  (x, y)
extent      : -3837500, 3762500, -5362500, 5837500  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0
+a=6378273 +b=6356889.449 +units=m +no_defs 
values      : ...\SeaIce\NSIDC\NearRealTime\nt_20111011.tif 
min value   : 0 
max value   : 1 
> ## Project
> rgeo <- projectRaster(from=rr, to=rGeo, method= 'bilinear')
> rgeo
class       : RasterLayer 
dimensions  : 448, 304, 136192  (nrow, ncol, ncell)
resolution  : 0.3648355, 0.0065625  (x, y)
extent      : 168.35, 279.26, 30.98, 33.92  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
values      : in memory
min value   : 0 
max value   : 0 

It fails to populate with the data.

-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6909785.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Wed Oct 19 20:24:19 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 19 Oct 2011 20:24:19 +0200 (CEST)
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
 files
In-Reply-To: <1319047411920-6909785.post@n2.nabble.com>
References: <CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com>
	<4E9F0BDA.40802@noaa.gov> <1319047411920-6909785.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.00.1110192015580.29972@reclus.nhh.no>

On Wed, 19 Oct 2011, Anthony Fischbach wrote:

> Thank you for the GRASS suggestion.
> It would also be straight forward in ArgGIS, but I seek to run this all in a
> scripting environment with the full flexibility of R such that I may
> automate the whole process.

I have a feeling that this is stranding on the raster warping difficulty 
seen in high latitudes. The projected cells have great difficulty in 
"adapting" to longlat, for obvious reasons, as the output cells really 
need to differ in shape and form. Would it be possible to "go vector" 
instead, and project the vector entities? I have some slides from a course 
I gave three years ago but I'm not sure if they are relevant.

Roger

>
> Following on the projectRaster idea, I have tried using the from and to
> options, first creating a from raster corresponding to the geographic extent
> and resolution of the desired output raster.
>
>> ll_lt <- 30.98
>> ll_ln <- 168.35
>> ur_lt <- 33.92
>> ur_ln <- 279.26
>> rGeo <- raster(nrows=448, ncols=304, xmn=ll_ln, xmx=ur_ln, ymn=ll_lt,
>> ymx=ur_lt, crs="+proj=longlat +datum=WGS84")
>> ## look at the raster before projecting
>> rr
> class       : RasterLayer
> dimensions  : 448, 304, 136192  (nrow, ncol, ncell)
> resolution  : 25000, 25000  (x, y)
> extent      : -3837500, 3762500, -5362500, 5837500  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0
> +a=6378273 +b=6356889.449 +units=m +no_defs
> values      : ...\SeaIce\NSIDC\NearRealTime\nt_20111011.tif
> min value   : 0
> max value   : 1
>> ## Project
>> rgeo <- projectRaster(from=rr, to=rGeo, method= 'bilinear')
>> rgeo
> class       : RasterLayer
> dimensions  : 448, 304, 136192  (nrow, ncol, ncell)
> resolution  : 0.3648355, 0.0065625  (x, y)
> extent      : 168.35, 279.26, 30.98, 33.92  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> values      : in memory
> min value   : 0
> max value   : 0
>
> It fails to populate with the data.
>
> -----
> Tony Fischbach, Wildlife Biologist
> Walrus Research Program
> Alaska Science Center
> U.S. Geological Survey
> 4210 University Drive
> Anchorage, AK 99508-4650
>
> AFischbach at usgs.gov
> http://alaska.usgs.gov/science/biology/walrus
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6909785.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From r.hijmans at gmail.com  Wed Oct 19 20:43:18 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 19 Oct 2011 11:43:18 -0700
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <alpine.LRH.2.00.1110192015580.29972@reclus.nhh.no>
References: <CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com>
	<4E9F0BDA.40802@noaa.gov>
	<1319047411920-6909785.post@n2.nabble.com>
	<alpine.LRH.2.00.1110192015580.29972@reclus.nhh.no>
Message-ID: <CANtt_hzc0zj2oWF2Mb6M6ByOV7jyphf2Hnw_8=89g4ToEDFnqg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111019/cb335941/attachment.pl>

From r.hijmans at gmail.com  Wed Oct 19 21:48:35 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 19 Oct 2011 12:48:35 -0700
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CANtt_hzc0zj2oWF2Mb6M6ByOV7jyphf2Hnw_8=89g4ToEDFnqg@mail.gmail.com>
References: <CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com>
	<4E9F0BDA.40802@noaa.gov>
	<1319047411920-6909785.post@n2.nabble.com>
	<alpine.LRH.2.00.1110192015580.29972@reclus.nhh.no>
	<CANtt_hzc0zj2oWF2Mb6M6ByOV7jyphf2Hnw_8=89g4ToEDFnqg@mail.gmail.com>
Message-ID: <CANtt_hyNG-SnoszUjfffGCkFSmL3NT4LgiHP0Ex1JtGLkvzrZQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111019/94680b42/attachment.pl>

From afischbach at usgs.gov  Wed Oct 19 22:13:48 2011
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Wed, 19 Oct 2011 13:13:48 -0700 (PDT)
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CANtt_hzc0zj2oWF2Mb6M6ByOV7jyphf2Hnw_8=89g4ToEDFnqg@mail.gmail.com>
References: <OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com>
	<4E9F0BDA.40802@noaa.gov>
	<1319047411920-6909785.post@n2.nabble.com>
	<alpine.LRH.2.00.1110192015580.29972@reclus.nhh.no>
	<CANtt_hzc0zj2oWF2Mb6M6ByOV7jyphf2Hnw_8=89g4ToEDFnqg@mail.gmail.com>
Message-ID: <1319055228496-6910361.post@n2.nabble.com>

This works beautifully.
Is there a trick to applying an intuitive color ramp to the png file and
setting the non-ice to null values?

I have tried to assign all non ice and ice = 0 values to NA.
This works down to the level of the extract function.

...
fileName <-
'ftp://sidads.colorado.edu/pub/DATASETS/nsidc0081_nrt_nasateam_seaice/north/nt_20110101_f17_nrt_n.bin'
con <- file(filename, 'rb')
x <- readBin(con, "raw", 300)
x <- readBin(con,"int", size=1, signed=FALSE, 150000)
close(con)
# no need for newx
x[x<251] <- (x[x<251])/250 #scale ice cover to 1
x[x==251] <- NA # set all non-ice to NA
x[x==0] <- NA    # set all 0 ice to NA
x[x>251] <- NA # set all non-ice pixels to NA
	
rr <- setValues(r, x) # place result in raster
#plot(rr)
rr <- writeRaster(rr, 'geoTiffFile.tif', overwrite=TRUE)

x[] <- extract(rr, xypole, method='bilinear')

Warning message:
In x[] <- extract(rr, xypole, method = "bilinear") :
  number of items to replace is not a multiple of replacement length


-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6910361.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Thomas.Adams at noaa.gov  Wed Oct 19 22:19:04 2011
From: Thomas.Adams at noaa.gov (Thomas.Adams at noaa.gov)
Date: Wed, 19 Oct 2011 16:19:04 -0400
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center
	binary	files
In-Reply-To: <1319047411920-6909785.post@n2.nabble.com>
References: <CAAcGz9_1+BS-uW_4YzBQZ+G=emQ1EA_yFY=F6L7VPc0c07gzEw@mail.gmail.com>
	<CANVKczPaJSWGeXr7hESutwb-mCqpg2e-e5o2ufDpOxTjaxHw1A@mail.gmail.com>
	<CANVKczOB4GDsx0MOwrTEhEr_8eS+7J-cJ0XnpGbcN55DrAzAZg@mail.gmail.com>
	<OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com> <4E9F0BDA.40802@noaa.gov>
	<1319047411920-6909785.post@n2.nabble.com>
Message-ID: <85ef6e1041713902.4e9ef878@noaa.gov>

Tony,

I certainly don't want to belabor the point, but GRASS GIS with R is fully scriptable (shell, Perl, whatever); I have done this with many projects. GRASS shell scripts are far easier to write in my experience than ArcGIS. Several of my scripts are completely automated and run off of cron on Linux systems.

Tom

----- Original Message -----
From: Anthony Fischbach <afischbach at usgs.gov>
Date: Wednesday, October 19, 2011 2:04 pm
Subject: Re: [R-sig-Geo] Reading National Snow and Ice Data Center binary	files
To: r-sig-geo at r-project.org


> Thank you for the GRASS suggestion.
> It would also be straight forward in ArgGIS, but I seek to run this 
> all in a
> scripting environment with the full flexibility of R such that I may
> automate the whole process.
> 
> Following on the projectRaster idea, I have tried using the from and to
> options, first creating a from raster corresponding to the geographic 
> extent
> and resolution of the desired output raster.
> 
> > ll_lt <- 30.98
> > ll_ln <- 168.35
> > ur_lt <- 33.92
> > ur_ln <- 279.26
> > rGeo <- raster(nrows=448, ncols=304, xmn=ll_ln, xmx=ur_ln, ymn=ll_lt,
> > ymx=ur_lt, crs="+proj=longlat +datum=WGS84")
> > ## look at the raster before projecting
> > rr
> class       : RasterLayer 
> dimensions  : 448, 304, 136192  (nrow, ncol, ncell)
> resolution  : 25000, 25000  (x, y)
> extent      : -3837500, 3762500, -5362500, 5837500  (xmin, xmax, ymin, 
> ymax)
> coord. ref. : +proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 
> +y_0=0
> +a=6378273 +b=6356889.449 +units=m +no_defs 
> values      : ...\SeaIce\NSIDC\NearRealTime\nt_20111011.tif 
> min value   : 0 
> max value   : 1 
> > ## Project
> > rgeo <- projectRaster(from=rr, to=rGeo, method= 'bilinear')
> > rgeo
> class       : RasterLayer 
> dimensions  : 448, 304, 136192  (nrow, ncol, ncell)
> resolution  : 0.3648355, 0.0065625  (x, y)
> extent      : 168.35, 279.26, 30.98, 33.92  (xmin, xmax, ymin, ymax)
> coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
> values      : in memory
> min value   : 0 
> max value   : 0 
> 
> It fails to populate with the data.
> 
> -----
> Tony Fischbach, Wildlife Biologist
> Walrus Research Program
> Alaska Science Center
> U.S. Geological Survey
> 4210 University Drive
> Anchorage, AK 99508-4650
> 
> AFischbach at usgs.gov
> 
> --
> View this message in context: 
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
>


From r.hijmans at gmail.com  Thu Oct 20 01:36:10 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 19 Oct 2011 16:36:10 -0700
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <1319055228496-6910361.post@n2.nabble.com>
References: <OFACFA9AE1.ECEA45FB-ON89257927.006A897B-89257927.006E7937@usgs.gov>
	<CANtt_hx5xV51O6Pn88b0r+h9pf9FdksQsFD7cvbvtdkGKbBGUw@mail.gmail.com>
	<1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com>
	<4E9F0BDA.40802@noaa.gov>
	<1319047411920-6909785.post@n2.nabble.com>
	<alpine.LRH.2.00.1110192015580.29972@reclus.nhh.no>
	<CANtt_hzc0zj2oWF2Mb6M6ByOV7jyphf2Hnw_8=89g4ToEDFnqg@mail.gmail.com>
	<1319055228496-6910361.post@n2.nabble.com>
Message-ID: <CANtt_hweDPtt6wvOwWmUz5ZyrY6dX=s4pHZLBL2sg88XJKhWwQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111019/181254bc/attachment.pl>

From afischbach at usgs.gov  Thu Oct 20 01:55:50 2011
From: afischbach at usgs.gov (Anthony Fischbach)
Date: Wed, 19 Oct 2011 16:55:50 -0700 (PDT)
Subject: [R-sig-Geo] Reading National Snow and Ice Data Center binary
	files
In-Reply-To: <CANtt_hweDPtt6wvOwWmUz5ZyrY6dX=s4pHZLBL2sg88XJKhWwQ@mail.gmail.com>
References: <1318534295322-6890251.post@n2.nabble.com>
	<1319043629399-6909541.post@n2.nabble.com>
	<CANtt_hwZFz-krciHj6GTUujFrVpEYov7Fms68gGOAYZe0Xp8TQ@mail.gmail.com>
	<1319045794227-6909694.post@n2.nabble.com>
	<4E9F0BDA.40802@noaa.gov>
	<1319047411920-6909785.post@n2.nabble.com>
	<alpine.LRH.2.00.1110192015580.29972@reclus.nhh.no>
	<CANtt_hzc0zj2oWF2Mb6M6ByOV7jyphf2Hnw_8=89g4ToEDFnqg@mail.gmail.com>
	<1319055228496-6910361.post@n2.nabble.com>
	<CANtt_hweDPtt6wvOwWmUz5ZyrY6dX=s4pHZLBL2sg88XJKhWwQ@mail.gmail.com>
Message-ID: <1319068550426-6910984.post@n2.nabble.com>

Thank you Robert, I amended my previous post to correct the duplicate use of
the x variable and to provide an intuitive black to white color ramp for the
ice.

-----
Tony Fischbach, Wildlife Biologist
Walrus Research Program
Alaska Science Center
U.S. Geological Survey
4210 University Drive
Anchorage, AK 99508-4650

AFischbach at usgs.gov
http://alaska.usgs.gov/science/biology/walrus
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Reading-National-Snow-and-Ice-Data-Center-binary-files-tp6882737p6910984.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From laura.poggio at gmail.com  Thu Oct 20 10:05:47 2011
From: laura.poggio at gmail.com (Laura Poggio)
Date: Thu, 20 Oct 2011 09:05:47 +0100
Subject: [R-sig-Geo] error with time in STFDF
Message-ID: <CAKmfgFNZBDiGG7KhHE905JkKBN_3Ji0uNrba-Dnmqca9h2CV-Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111020/6ef8214f/attachment.pl>

From hi181904665 at msn.com  Thu Oct 20 12:41:18 2011
From: hi181904665 at msn.com (chenliang wang)
Date: Thu, 20 Oct 2011 18:41:18 +0800
Subject: [R-sig-Geo] how to generate a trend surface in spdep
Message-ID: <BLU0-SMTP10356EBED1FA44CA12F7036F4EB0@phx.gbl>

Dear list:
I am just a newcomer to spatial autoregression.I have a question that
how to generate a trend surface by means of function lagsarlm() of spdep:
I have a sample points file, some vector points of independent
variables,some surfaces of independent variables.I fit a spatial
autoregression model using function lagsarlm(),and then I get some
coefficients. How to generate a surface accordling to the simulated
model? Thank you.




Chen-Liang Wang


From Roger.Bivand at nhh.no  Thu Oct 20 14:30:20 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 20 Oct 2011 14:30:20 +0200 (CEST)
Subject: [R-sig-Geo] how to generate a trend surface in spdep
In-Reply-To: <BLU0-SMTP10356EBED1FA44CA12F7036F4EB0@phx.gbl>
References: <BLU0-SMTP10356EBED1FA44CA12F7036F4EB0@phx.gbl>
Message-ID: <alpine.LRH.2.00.1110201427300.3680@reclus.nhh.no>

On Thu, 20 Oct 2011, chenliang wang wrote:

> Dear list:
> I am just a newcomer to spatial autoregression.I have a question that
> how to generate a trend surface by means of function lagsarlm() of spdep:
> I have a sample points file, some vector points of independent
> variables,some surfaces of independent variables.I fit a spatial
> autoregression model using function lagsarlm(),and then I get some
> coefficients. How to generate a surface accordling to the simulated
> model? Thank you.
>

The spatial lag model you have chosen is a spatial econometrics model, for 
which prediction and interpolation are not well defined in the literature. 
Interest is rather on the regression coefficients. If you need to predict 
or interpolate, why do you not prefer a geostatistical approach, where the 
regression coefficients are unimportant, but the prediction, possibly of a 
surface, is the main goal?

Hope this clarifies,

Roger

>
>
>
> Chen-Liang Wang
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From debeaudette at ucdavis.edu  Thu Oct 20 16:33:17 2011
From: debeaudette at ucdavis.edu (Dylan Beaudette)
Date: Thu, 20 Oct 2011 07:33:17 -0700
Subject: [R-sig-Geo] Getting the other GIS to recognize files created by
	writeRaster()
In-Reply-To: <CANtt_hw4L522Jjv4qkiYUVKzKOM-9-tp4Pe-Eg8HeZjDQUyrcw@mail.gmail.com>
References: <CAOGWcHK8gaAj3RrVK_Kd9p1UUg69UPFr5hWwuvHrtXdpV9auGw@mail.gmail.com>
	<CANtt_hw4L522Jjv4qkiYUVKzKOM-9-tp4Pe-Eg8HeZjDQUyrcw@mail.gmail.com>
Message-ID: <201110200733.17429.dylan.beaudette@gmail.com>

Thanks Robert. It may be 2025 by the time the USDA installs ArcGIS 10. 
Something to look forward to.

Dylan

On Sunday, October 16, 2011, Robert J. Hijmans wrote:
> Dylan, It seems to me that this problem was fixed in ArcGIS 10. Perhaps a
> good reason to upgrade? Robert
> 
> On Thu, Oct 13, 2011 at 10:57 AM, Dylan Beaudette <dylan.beaudette at gmail.com
> > wrote:
> 
> > I can't believe that I am asking for advice on how to assist my
> > special-needs GIS software with recognizing files created by the
> > raster/rgdal packages.
> >
> > Recently (after some silent update by IT no doubt), I noticed that
> > files created like this:
> >
> > writeRaster(r.mast,  filename='spatial_data/latest/mast-model',
> > datatype='FLT4S', format='ENVI', overwrite=TRUE, NAflag=-999)
> >
> > ... aren't read-in properly by ArcGIS (9.3.1). Specifically, the
> > raster statistics and the NODATA value aren't read from the file or
> > from the .xml file that is automatically generated by GDAL. I have
> > tried all of the different formats supported by the raster package,
> > with the 'ENVI' format getting the closest to working (statistics
> > almost correct but missing NODATA information). Are there any
> > additional things I can do to help ArcGIS figure these files out
> > without any tweaking from within the hulking beast? Ideally, I would
> > like to update model estimates on a semi-regular basis and have the
> > files ready for viewing by colleagues-- without manual intervention.
> >
> > Thanks!
> >
> > Dylan
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> 


-- 
Dylan E. Beaudette
USDA-NRCS Soil Scientist
California Soil Resource Lab
http://casoilresource.lawr.ucdavis.edu/


From benweinstein2010 at gmail.com  Fri Oct 21 03:32:18 2011
From: benweinstein2010 at gmail.com (Ben Weinstein)
Date: Thu, 20 Oct 2011 21:32:18 -0400
Subject: [R-sig-Geo] Maxent rJava error
Message-ID: <CAC28k7STZ5QmTOys-NOVPfn9mRYv6=93aZhutHt=37jJG-wBUQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111020/f1c17331/attachment.pl>

From r.hijmans at gmail.com  Fri Oct 21 05:09:50 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 20 Oct 2011 20:09:50 -0700
Subject: [R-sig-Geo] Maxent rJava error
In-Reply-To: <CAC28k7STZ5QmTOys-NOVPfn9mRYv6=93aZhutHt=37jJG-wBUQ@mail.gmail.com>
References: <CAC28k7STZ5QmTOys-NOVPfn9mRYv6=93aZhutHt=37jJG-wBUQ@mail.gmail.com>
Message-ID: <CANtt_hxb7Dc2Jzopsi85EMyyjQpZJS5vXAX=ZUWhiYmaO4Hw0A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111020/ec1c424b/attachment.pl>

From yud at mail.montclair.edu  Fri Oct 21 05:46:53 2011
From: yud at mail.montclair.edu (Danlin Yu)
Date: Thu, 20 Oct 2011 23:46:53 -0400
Subject: [R-sig-Geo] Missing data for GWR analysis in spgwr
In-Reply-To: <1318971517.40512.YahooMailNeo@web24001.mail.ird.yahoo.com>
References: <1318971517.40512.YahooMailNeo@web24001.mail.ird.yahoo.com>
Message-ID: <4EA0EB2D.7020409@mail.montclair.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111020/588ad41d/attachment.pl>

From hi181904665 at msn.com  Fri Oct 21 05:49:58 2011
From: hi181904665 at msn.com (chenliang wang)
Date: Fri, 21 Oct 2011 11:49:58 +0800
Subject: [R-sig-Geo] how to generate a trend surface in spdep
In-Reply-To: <4EA02027.1040206@msn.com>
References: <4EA02027.1040206@msn.com>
Message-ID: <BLU0-SMTP184513CC4D9E1ACFD596B5CF4E80@phx.gbl>



? 2011-10-20 20:30, Roger Bivand ??:
>  On Thu, 20 Oct 2011, chenliang wang wrote:
>
>>  Dear list:
>>  I am just a newcomer to spatial autoregression.I have a question that
>>  how to generate a trend surface by means of function lagsarlm() of
>>  spdep:
>>  I have a sample points file, some vector points of independent
>>  variables,some surfaces of independent variables.I fit a spatial
>>  autoregression model using function lagsarlm(),and then I get some
>>  coefficients. How to generate a surface accordling to the simulated
>>  model? Thank you.
>>
>
>  The spatial lag model you have chosen is a spatial econometrics model,
>  for which prediction and interpolation are not well defined in the
>  literature. Interest is rather on the regression coefficients. If you
>  need to predict or interpolate, why do you not prefer a geostatistical
>  approach, where the regression coefficients are unimportant, but the
>  prediction, possibly of a surface, is the main goal?
>
>  Hope this clarifies,
>
>  Roger
>
>>
>>
>>
>>  Chen-Liang Wang
>>
>>  _______________________________________________
>>  R-sig-Geo mailing list
>>  R-sig-Geo at r-project.org
>>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
Thanks for your quickly reply! Maybe I 'm not familiar with the spatial
autoregression model .
We use a surface modeling process that surface is consist of two
components: trend and random error.
In the previous modeling process , our colleague use ordinary multiple
linear regression to get the trend of data, and then interpolate the
random error by means of several methods including geostatistical
approach.We fit the trend to reduce uncertainty and we interpolate the
residual or error to simulate local detail.
The entire modeling : predict = trend (regression of geospatial pattern)
+ error (interpolation of local detail)
I find the trend simulated by ordinary regression is not accurate
sometimes ,while the spatial autogression methods can predict it
perfectly . So I just think use the spatial regression method to
substitute for previous regression. But maybe some spatial regression is
not suitable for surface modeling according to what you have said.
Thanks for your advice. I will take it into account.

Chen-Liang Wang


From laura.poggio at gmail.com  Fri Oct 21 09:45:54 2011
From: laura.poggio at gmail.com (Laura Poggio)
Date: Fri, 21 Oct 2011 08:45:54 +0100
Subject: [R-sig-Geo] error with time in STFDF
In-Reply-To: <CAKmfgFNZBDiGG7KhHE905JkKBN_3Ji0uNrba-Dnmqca9h2CV-Q@mail.gmail.com>
References: <CAKmfgFNZBDiGG7KhHE905JkKBN_3Ji0uNrba-Dnmqca9h2CV-Q@mail.gmail.com>
Message-ID: <CAKmfgFNgBYG_Uoy9mYm00Wgo27JFS5sDmrO5dbbH1NHr8GuOFA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111021/4e1f7c08/attachment.pl>

From marco.helbich at geog.uni-heidelberg.de  Fri Oct 21 13:11:37 2011
From: marco.helbich at geog.uni-heidelberg.de (Marco Helbich)
Date: Fri, 21 Oct 2011 13:11:37 +0200
Subject: [R-sig-Geo] heteroskedasticity corrections for lagsarlm() in spdep
Message-ID: <4EA15369.1030605@geog.uni-heidelberg.de>

Dear list,

I have estimate a spatial simultaneous autoregressive lag model by means 
of the lagsarlm() function in the spdep package. The Breusch-Pagan test 
for spatial models bptest.sarlm() shows that there are some problems 
with heteroskedasticity.

On p. 21 in the spdep manual states that "it is also technically 
possible to make heteroskedasticity corrections to standard error 
estimates by using the ?lm.target? component of sarlm objects - using 
functions in the lmtest and sandwich packages."

First I thought the code below could be the solution, but it fails. I 
have slightly adapted the code (lagsarlm instead of errorsarlm) on page 21.

data(oldcol)
example <- lagsarlm(CRIME ~ INC + HOVAL, data=COL.OLD, nb2listw(COL.nb, 
style="W"))

lm.target <- lm(example$tary ~ example$tarX - 1)
   if (require(lmtest) && require(sandwich)) {
   coeftest(lm.target, vcov=vcovHC(lm.target, type="HC0"), df=Inf)
}

I am sure anyone has already done this. I would appreciate every hint or 
piece of code (and sorry if this is nonsense).

Thank you in advance!
Best
Marco

-- 
Marco Helbich
Department of Geography
University of Heidelberg
marco.helbich at geog.uni-heidelberg.de
Berliner Stra?e 48, D-69120 Heidelberg, Germany


From M.Boer at uws.edu.au  Fri Oct 21 13:29:14 2011
From: M.Boer at uws.edu.au (Matthias Boer)
Date: Fri, 21 Oct 2011 11:29:14 +0000
Subject: [R-sig-Geo] importing ascii grids with 15 header lines
Message-ID: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>

Dear list members

I have a very large number of ascii map layers representing interpolated daily weather observations for Australia.
Each file is an ascii grid with a header consisting of 15 lines (6 lines for the usual header of Arcraster ascii grids plus 9 lines of additional info). I want to import the maps one by one, to compute monthly and annual values, overlay those with veg type maps, etc. I am having trouble with the spatial data formats.

I usually use 'read.asciigrid' to import ascii grids in Arcraster format but this fails here due to the header format. I can read the actual grid data using read.delim and create the GridTopology seperately but then struggle to create a SpatialGridDataFrame or other spatial data format. I assume there is a simple way to do this, but I haven't managed to work it out. Some help from the list would be great.

Thanks for your time.

Matthias


From r.m.krug at gmail.com  Fri Oct 21 13:35:17 2011
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Fri, 21 Oct 2011 13:35:17 +0200
Subject: [R-sig-Geo] importing ascii grids with 15 header lines
In-Reply-To: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>
References: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>
Message-ID: <CAGhLh6FAvxD-RUU9DNtd6DuYB0OZOBc-wks5QcP1nmj14HcH=Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111021/5918c0fa/attachment.pl>

From r.m.krug at gmail.com  Fri Oct 21 13:37:25 2011
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Fri, 21 Oct 2011 13:37:25 +0200
Subject: [R-sig-Geo] importing ascii grids with 15 header lines
In-Reply-To: <CAGhLh6FAvxD-RUU9DNtd6DuYB0OZOBc-wks5QcP1nmj14HcH=Q@mail.gmail.com>
References: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>
	<CAGhLh6FAvxD-RUU9DNtd6DuYB0OZOBc-wks5QcP1nmj14HcH=Q@mail.gmail.com>
Message-ID: <CAGhLh6E=0S7gghsYbhoYWmYuNDGQ2rEtP1TkdDvjDAs3MB9_ug@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111021/61c05e09/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Fri Oct 21 15:08:32 2011
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 21 Oct 2011 14:08:32 +0100
Subject: [R-sig-Geo] importing ascii grids with 15 header lines
In-Reply-To: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>
References: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>
Message-ID: <CANVKczNhKZmiEsrLByoZvZNk20Kwwpr0wjouKEZVvcxxOHEm7Q@mail.gmail.com>

On Fri, Oct 21, 2011 at 12:29 PM, Matthias Boer <M.Boer at uws.edu.au> wrote:
> Dear list members
>
> I have a very large number of ascii map layers representing interpolated daily weather observations for Australia.
> Each file is an ascii grid with a header consisting of 15 lines (6 lines for the usual header of Arcraster ascii grids plus 9 lines of additional info). I want to import the maps one by one, to compute monthly and annual values, overlay those with veg type maps, etc. I am having trouble with the spatial data formats.
>
> I usually use 'read.asciigrid' to import ascii grids in Arcraster format but this fails here due to the header format. I can read the actual grid data using read.delim and create the GridTopology seperately but then struggle to create a SpatialGridDataFrame or other spatial data format. I assume there is a simple way to do this, but I haven't managed to work it out. Some help from the list would be great.

 GDAL doesn't seem to mind if extra headers come after an initial
NCOLS header. Do your extra bits come before that? That messes up
GDAL's detection. You could bodge this by adding the right NCOLS
header (a duplicate of the NCOLS in the file) at the start of the
file.

  I also tried opening a file connection, reading the header lines I
stuck in, then tried reading the raster from the connection - both
raster and readGDAL failed, but I would have been surprised if it had
worked.

  Others have suggested some general text editing tools - I would also
suggest appropriate use of the ClueBat on whoever created these things
- open geospatial data sets with rich metadata options are hardly
rarities!

Barry


From dieter.vanderelst at gmail.com  Fri Oct 21 15:20:30 2011
From: dieter.vanderelst at gmail.com (dieter Vanderelst)
Date: Fri, 21 Oct 2011 15:20:30 +0200
Subject: [R-sig-Geo] create inset map
In-Reply-To: <CAFK3DV8Sfg08EKAXsLytm2E0ZwhKUn9=h1BhP8cR2nR8abTUuA@mail.gmail.com>
References: <4E99A049.4080706@gmail.com> <4E99A89B.7080807@uni-muenster.de>
	<CAFK3DV8Sfg08EKAXsLytm2E0ZwhKUn9=h1BhP8cR2nR8abTUuA@mail.gmail.com>
Message-ID: <4EA1719E.6080605@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111021/ffa9330b/attachment.pl>

From Roger.Bivand at nhh.no  Fri Oct 21 17:31:37 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 21 Oct 2011 17:31:37 +0200
Subject: [R-sig-Geo] heteroskedasticity corrections for lagsarlm() in
 spdep
In-Reply-To: <4EA15369.1030605@geog.uni-heidelberg.de>
References: <4EA15369.1030605@geog.uni-heidelberg.de>
Message-ID: <alpine.LRH.2.00.1110211727460.11393@reclus.nhh.no>

On Fri, 21 Oct 2011, Marco Helbich wrote:

> Dear list,
>
> I have estimate a spatial simultaneous autoregressive lag model by means 
> of the lagsarlm() function in the spdep package. The Breusch-Pagan test 
> for spatial models bptest.sarlm() shows that there are some problems 
> with heteroskedasticity.
>
> On p. 21 in the spdep manual states that "it is also technically 
> possible to make heteroskedasticity corrections to standard error 
> estimates by using the ?lm.target? component of sarlm objects - using 
> functions in the lmtest and sandwich packages."
>
> First I thought the code below could be the solution, but it fails. I 
> have slightly adapted the code (lagsarlm instead of errorsarlm) on page 21.
>
> data(oldcol)
> example <- lagsarlm(CRIME ~ INC + HOVAL, data=COL.OLD, nb2listw(COL.nb, 
> style="W"))
>
> lm.target <- lm(example$tary ~ example$tarX - 1)
>   if (require(lmtest) && require(sandwich)) {
>   coeftest(lm.target, vcov=vcovHC(lm.target, type="HC0"), df=Inf)
> }
>
> I am sure anyone has already done this. I would appreciate every hint or 
> piece of code (and sorry if this is nonsense).

But your code works? Could you please be more specific about what doesn't 
work, the exact error message, the output of traceback() after the 
message, and of sessionInfo()? Of course, for the spatial lag model, this 
is really not OK, because of interaction between the covariance of rho and 
the betas. For the spatial error model, they do not interact, and the beta 
covariance matrix block is the same in OLS on the transformed covariates 
and ML.

Roger

>
> Thank you in advance!
> Best
> Marco
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From marco.helbich at geog.uni-heidelberg.de  Fri Oct 21 18:56:37 2011
From: marco.helbich at geog.uni-heidelberg.de (Marco Helbich)
Date: Fri, 21 Oct 2011 18:56:37 +0200
Subject: [R-sig-Geo] heteroskedasticity corrections for lagsarlm() in
 spdep
In-Reply-To: <alpine.LRH.2.00.1110211727460.11393@reclus.nhh.no>
References: <4EA15369.1030605@geog.uni-heidelberg.de>
	<alpine.LRH.2.00.1110211727460.11393@reclus.nhh.no>
Message-ID: <4EA1A445.2040107@geog.uni-heidelberg.de>

Dear Roger,

sorry for my last incomplete posting. Below is the output you need to 
know using the spdep example. Can you recommend other solutions to 
correct heteroskedasticity in a lagsarlm?

I appreciate your helping hand!
Best
Marco

 > data(oldcol)
 > example <- lagsarlm(CRIME ~ INC + HOVAL, data=COL.OLD, 
nb2listw(COL.nb, style="W"))
 > lm.target <- lm(example$tary ~ example$tarX - 1)
Fehler in model.frame.default(formula = example$tary ~ example$tarX - 1,  :
   ung?ltiger Typ (NULL) f?r die Variable 'example$tary'
 > traceback()
5: model.frame.default(formula = example$tary ~ example$tarX - 1,
        drop.unused.levels = TRUE)
4: model.frame(formula = example$tary ~ example$tarX - 1, 
drop.unused.levels = TRUE)
3: eval(expr, envir, enclos)
2: eval(mf, parent.frame())
1: lm(example$tary ~ example$tarX - 1)
 > sessionInfo()
R version 2.13.0 (2011-04-13)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252 
LC_MONETARY=German_Austria.1252
[4] LC_NUMERIC=C                    LC_TIME=German_Austria.1252

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets  methods 
   base

other attached packages:
  [1] robustbase_0.7-6   AER_1.1-8          strucchange_1.4-4 
sandwich_2.2-7     lmtest_0.9-28      zoo_1.7-4
  [7] Formula_1.0-0      car_2.0-10         survival_2.36-5 
nnet_7.3-1         spdep_0.5-35       coda_0.14-4
[13] deldir_0.0-13      nlme_3.1-101       MASS_7.3-12 
Matrix_0.9996875-3 boot_1.2-43        maptools_0.8-7
[19] lattice_0.19-23    sp_0.9-82          foreign_0.8-43

loaded via a namespace (and not attached):
[1] grid_2.13.0  tools_2.13.0
 >

Am 21.10.2011 17:31, schrieb Roger Bivand:
> On Fri, 21 Oct 2011, Marco Helbich wrote:
>
>> Dear list,
>>
>> I have estimate a spatial simultaneous autoregressive lag model by
>> means of the lagsarlm() function in the spdep package. The
>> Breusch-Pagan test for spatial models bptest.sarlm() shows that there
>> are some problems with heteroskedasticity.
>>
>> On p. 21 in the spdep manual states that "it is also technically
>> possible to make heteroskedasticity corrections to standard error
>> estimates by using the ?lm.target? component of sarlm objects - using
>> functions in the lmtest and sandwich packages."
>>
>> First I thought the code below could be the solution, but it fails. I
>> have slightly adapted the code (lagsarlm instead of errorsarlm) on
>> page 21.
>>
>> data(oldcol)
>> example <- lagsarlm(CRIME ~ INC + HOVAL, data=COL.OLD,
>> nb2listw(COL.nb, style="W"))
>>
>> lm.target <- lm(example$tary ~ example$tarX - 1)
>> if (require(lmtest) && require(sandwich)) {
>> coeftest(lm.target, vcov=vcovHC(lm.target, type="HC0"), df=Inf)
>> }
>>
>> I am sure anyone has already done this. I would appreciate every hint
>> or piece of code (and sorry if this is nonsense).
>
> But your code works? Could you please be more specific about what
> doesn't work, the exact error message, the output of traceback() after
> the message, and of sessionInfo()? Of course, for the spatial lag model,
> this is really not OK, because of interaction between the covariance of
> rho and the betas. For the spatial error model, they do not interact,
> and the beta covariance matrix block is the same in OLS on the
> transformed covariates and ML.
>
> Roger
>
>>
>> Thank you in advance!
>> Best
>> Marco
>>
>>
>


-- 
Marco Helbich
Chair of GIScience
Department of Geography, University of Heidelberg

marco.helbich at geog.uni-heidelberg.de
http://giscience.uni-hd.de

Berliner Stra?e 48, D-69120 Heidelberg, Germany
fon: +49(0)6221 / 54 5572  //  fax: +49(0)6221 / 54 4529


From r.hijmans at gmail.com  Fri Oct 21 19:15:58 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 21 Oct 2011 10:15:58 -0700
Subject: [R-sig-Geo] importing ascii grids with 15 header lines
In-Reply-To: <CANVKczNhKZmiEsrLByoZvZNk20Kwwpr0wjouKEZVvcxxOHEm7Q@mail.gmail.com>
References: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>
	<CANVKczNhKZmiEsrLByoZvZNk20Kwwpr0wjouKEZVvcxxOHEm7Q@mail.gmail.com>
Message-ID: <CANtt_hzbCnm-PN1CcVQjfL32zxjJUGxVOZ1XYww+ffw_bMw-Gw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111021/01ac26c0/attachment.pl>

From r.hijmans at gmail.com  Fri Oct 21 19:18:43 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 21 Oct 2011 10:18:43 -0700
Subject: [R-sig-Geo] importing ascii grids with 15 header lines
In-Reply-To: <CANtt_hzbCnm-PN1CcVQjfL32zxjJUGxVOZ1XYww+ffw_bMw-Gw@mail.gmail.com>
References: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>
	<CANVKczNhKZmiEsrLByoZvZNk20Kwwpr0wjouKEZVvcxxOHEm7Q@mail.gmail.com>
	<CANtt_hzbCnm-PN1CcVQjfL32zxjJUGxVOZ1XYww+ffw_bMw-Gw@mail.gmail.com>
Message-ID: <CANtt_hx7V0Y3Z5_9K0SvSgdBMRWRx3OXn2syE-uQgs05CUbGGw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111021/961c0c77/attachment.pl>

From r.hijmans at gmail.com  Fri Oct 21 19:20:12 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Fri, 21 Oct 2011 10:20:12 -0700
Subject: [R-sig-Geo] importing ascii grids with 15 header lines
In-Reply-To: <CANtt_hx7V0Y3Z5_9K0SvSgdBMRWRx3OXn2syE-uQgs05CUbGGw@mail.gmail.com>
References: <C9FBB6D3ADA39747AC19D5036B08851905CC5B4C@HAYES.AD.UWS.EDU.AU>
	<CANVKczNhKZmiEsrLByoZvZNk20Kwwpr0wjouKEZVvcxxOHEm7Q@mail.gmail.com>
	<CANtt_hzbCnm-PN1CcVQjfL32zxjJUGxVOZ1XYww+ffw_bMw-Gw@mail.gmail.com>
	<CANtt_hx7V0Y3Z5_9K0SvSgdBMRWRx3OXn2syE-uQgs05CUbGGw@mail.gmail.com>
Message-ID: <CANtt_hykjK75ubUMTyKZGrXWsmbT2FX1oOv-87-tBYbfw2jQww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111021/3e30b754/attachment.pl>

From Roger.Bivand at nhh.no  Fri Oct 21 22:05:17 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 21 Oct 2011 22:05:17 +0200
Subject: [R-sig-Geo] heteroskedasticity corrections for lagsarlm() in
 spdep
In-Reply-To: <4EA1A445.2040107@geog.uni-heidelberg.de>
References: <4EA15369.1030605@geog.uni-heidelberg.de>
	<alpine.LRH.2.00.1110211727460.11393@reclus.nhh.no>
	<4EA1A445.2040107@geog.uni-heidelberg.de>
Message-ID: <alpine.LRH.2.00.1110212204330.12215@reclus.nhh.no>

On Fri, 21 Oct 2011, Marco Helbich wrote:

> Dear Roger,
>
> sorry for my last incomplete posting. Below is the output you need to know 
> using the spdep example. Can you recommend other solutions to correct 
> heteroskedasticity in a lagsarlm?

update.packages() - your spdep is not updated, current is 0.5-40.

Roger

>
> I appreciate your helping hand!
> Best
> Marco
>
>> data(oldcol)
>> example <- lagsarlm(CRIME ~ INC + HOVAL, data=COL.OLD, nb2listw(COL.nb, 
> style="W"))
>> lm.target <- lm(example$tary ~ example$tarX - 1)
> Fehler in model.frame.default(formula = example$tary ~ example$tarX - 1,  :
>  ung?ltiger Typ (NULL) f?r die Variable 'example$tary'
>> traceback()
> 5: model.frame.default(formula = example$tary ~ example$tarX - 1,
>       drop.unused.levels = TRUE)
> 4: model.frame(formula = example$tary ~ example$tarX - 1, drop.unused.levels 
> = TRUE)
> 3: eval(expr, envir, enclos)
> 2: eval(mf, parent.frame())
> 1: lm(example$tary ~ example$tarX - 1)
>> sessionInfo()
> R version 2.13.0 (2011-04-13)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252 
> LC_MONETARY=German_Austria.1252
> [4] LC_NUMERIC=C                    LC_TIME=German_Austria.1252
>
> attached base packages:
> [1] splines   stats     graphics  grDevices utils     datasets  methods 
> base
>
> other attached packages:
> [1] robustbase_0.7-6   AER_1.1-8          strucchange_1.4-4 sandwich_2.2-7 
> lmtest_0.9-28      zoo_1.7-4
> [7] Formula_1.0-0      car_2.0-10         survival_2.36-5 nnet_7.3-1 
> spdep_0.5-35       coda_0.14-4
> [13] deldir_0.0-13      nlme_3.1-101       MASS_7.3-12 Matrix_0.9996875-3 
> boot_1.2-43        maptools_0.8-7
> [19] lattice_0.19-23    sp_0.9-82          foreign_0.8-43
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.0  tools_2.13.0
>>
>
> Am 21.10.2011 17:31, schrieb Roger Bivand:
>> On Fri, 21 Oct 2011, Marco Helbich wrote:
>> 
>>> Dear list,
>>> 
>>> I have estimate a spatial simultaneous autoregressive lag model by
>>> means of the lagsarlm() function in the spdep package. The
>>> Breusch-Pagan test for spatial models bptest.sarlm() shows that there
>>> are some problems with heteroskedasticity.
>>> 
>>> On p. 21 in the spdep manual states that "it is also technically
>>> possible to make heteroskedasticity corrections to standard error
>>> estimates by using the ?lm.target? component of sarlm objects - using
>>> functions in the lmtest and sandwich packages."
>>> 
>>> First I thought the code below could be the solution, but it fails. I
>>> have slightly adapted the code (lagsarlm instead of errorsarlm) on
>>> page 21.
>>> 
>>> data(oldcol)
>>> example <- lagsarlm(CRIME ~ INC + HOVAL, data=COL.OLD,
>>> nb2listw(COL.nb, style="W"))
>>> 
>>> lm.target <- lm(example$tary ~ example$tarX - 1)
>>> if (require(lmtest) && require(sandwich)) {
>>> coeftest(lm.target, vcov=vcovHC(lm.target, type="HC0"), df=Inf)
>>> }
>>> 
>>> I am sure anyone has already done this. I would appreciate every hint
>>> or piece of code (and sorry if this is nonsense).
>> 
>> But your code works? Could you please be more specific about what
>> doesn't work, the exact error message, the output of traceback() after
>> the message, and of sessionInfo()? Of course, for the spatial lag model,
>> this is really not OK, because of interaction between the covariance of
>> rho and the betas. For the spatial error model, they do not interact,
>> and the beta covariance matrix block is the same in OLS on the
>> transformed covariates and ML.
>> 
>> Roger
>> 
>>> 
>>> Thank you in advance!
>>> Best
>>> Marco
>>> 
>>> 
>> 
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From hengl at spatial-analyst.net  Sun Oct 23 12:45:30 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Sun, 23 Oct 2011 12:45:30 +0200
Subject: [R-sig-Geo] Geoinformatics Senior Scientist at ICRAF, Nairobi
Message-ID: <a0e687c41ae1780a0f8484fd02101fd7.squirrel@lin18.mojsite.com>

World Agroforestry Centre is in the process of recruiting for the position
of Geoinformatics Senior Scientist who will be based in Nairobi Kenya. For
more info see:

http://www.worldagroforestry.org/careers/geoinformatics-senior-scientist

We would greatly appreciate your assistance in bringing this announcement
to the attention of friends and colleagues who may be qualified
candidates. Attached is the vacancy announcement for your ease of
reference; the same may also be found on the ICRAF website.

How to apply:
- A cover letter illustrating your suitability for the position, and your
salary expectations.
- A detailed and up-to-date curriculum vitae.
- The names and addresses of three referees, including telephone, fax
numbers and email addresses.

Address these to: The Human Resources Unit, World Agroforestry Centre
(ICRAF), PO Box 30677, 00100 Nairobi, Kenya OR send via email to:
icrafhru at cgiar.org. Indicate "Application for Geoinformatics Senior
Scientist" on the application letter. Applications will be considered
until 30 November 2011 or until a suitable candidate is identified and
selected. Please note that only short-listed applicants meeting the
requirements will be contacted.


From sandeep.coepcivil at gmail.com  Sun Oct 23 23:52:22 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Sun, 23 Oct 2011 16:52:22 -0500
Subject: [R-sig-Geo] Compare.cv write to csv
Message-ID: <CAHnA5RWzm5LdeWOX6XHXKMyRQHYXDnTuEazYO=WQ_+uCUgUU+g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111023/bb547b99/attachment.pl>

From Roger.Bivand at nhh.no  Mon Oct 24 09:57:32 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 24 Oct 2011 09:57:32 +0200
Subject: [R-sig-Geo] errors in installing HDF5 package under windows
In-Reply-To: <CAN9LD-01R=63PX_LNe705bZa0Oauts1oP9DEMy3TjR2Tjqvwzg@mail.gmail.com>
References: <CAN9LD-01R=63PX_LNe705bZa0Oauts1oP9DEMy3TjR2Tjqvwzg@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1110240954550.5578@reclus.nhh.no>

On Sun, 16 Oct 2011, zhijie zhang wrote:

> Dear all,
>  The HDF5 binary package is not available now, so i download the source
> package and unzip it. When i check it before building the package, some
> errors appeared, see below. I donot think it's related with the R and HDF5
> versions. I guess i missed something here.
> --Errors--
> * installing *source* package 'hdf5' ...
> cygwin warning:
>  MS-DOS style path detected:
> C:/PROGRA~1/R/R-213~1.2/bin/i386/HDF5~1.RCH/hdf5/libs
>  Preferred POSIX equivalent is:
> /cygdrive/c/PROGRA~1/R/R-213~1.2/bin/i386/HDF5~1.RCH/hdf5/libs
>  CYGWIN environment variable option "nodosfilewarning" turns off this
> warning.
>  Consult the user's guide for more details about POSIX paths:
>    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
> cp: cannot stat `/cygdrive/d/Backup/my
> documents/hdf5-support/cyghdf5-0.dll': No such file or directory
> cp: cannot stat `/cygdrive/d/Backup/my documents/hdf5-support/mgwz.dll': No
> such file or directory
> ERROR: configuration failed for package 'hdf5'
> * removing 'C:/PROGRA~1/R/R-213~1.2/bin/i386/HDF5~1.RCH/hdf5'
> ---------
> If anybody have some experiences on reading HDF4 and HDF5 datasets
> successfully, please also give me more information on this.
>  I have searched the R help, and cannot find a solution. Somebody suggest
> the rgdal, which seems not to work.

You are looking for drivers that need to be built into GDAL before rgdal 
itself is installed - gdalDrivers() lists the drivers available. HDF4 and 
HDF5 are completely different drivers, both with external dependencies. 
The Windows CRAN rgdal binary does not have HDF4 or HDF5, because of the 
external dependencies. You should convert to a supported file format, for 
example GTiff, outside R first.

Roger

>  Any suggestions or help are greatly appreciated.
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From paul.hiemstra at knmi.nl  Mon Oct 24 11:53:54 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Mon, 24 Oct 2011 09:53:54 +0000
Subject: [R-sig-Geo] Compare.cv write to csv
In-Reply-To: <CAHnA5RWzm5LdeWOX6XHXKMyRQHYXDnTuEazYO=WQ_+uCUgUU+g@mail.gmail.com>
References: <CAHnA5RWzm5LdeWOX6XHXKMyRQHYXDnTuEazYO=WQ_+uCUgUU+g@mail.gmail.com>
Message-ID: <4EA535B2.6030108@knmi.nl>

On 10/23/2011 09:52 PM, Sandeep Patil wrote:
> Hello
>
> I have used compare.cv from Automap to generate a comparison
>
> of different interpolation methods in R.
>
> The output says that compare.cv object is a data.frame
>
> but when i try to write it to a csv file it gives me an error saying that
>
> object is "of list type"
>
> Error in write.table(x, file, nrow(x), p, rnames, sep, eol, na, dec,
> as.integer(quote),  :
>   unimplemented type 'list' in 'EncodeElement'
Hi Sandeep,

This works:

library(automap)
library(plyr)

loadMeuse()

kr.cv = autoKrige.cv(log(zinc)~1, meuse, model = c("Exp"), nfold = 10)
kr_dist.cv = autoKrige.cv(log(zinc)~sqrt(dist), meuse,
       model = c("Exp"), nfold = 10)
kr_dist_ffreq.cv = autoKrige.cv(log(zinc)~sqrt(dist)+ffreq,
       meuse, model = c("Exp"), nfold = 10)

obj = compare.cv(kr.cv, kr_dist.cv, kr_dist_ffreq.cv)
# Convert to a 'good' data.frame
obj4writecsv = ldply(obj, as.data.frame)

write.csv(obj4writecsv, file = "/tmp/bla")

This fixes your problem right now, but I agree that this behavior should
change. Writing the result of compare.cv to a tex file should be much
easier. I created a bugreport on my bitbucket account for automap.

regards,
Paul



>
> when i use class(compare.cv) it gives output as dataframe.
>
>
> I think it is a dataframe of lists or something like that.
>
>
> Please advice
>
>
> I want the datframe in a csv file where i can edit this
>
>
> ,also i have to batch process this so cant do many changes
>
>
> manually.
>
>
> Thanks in advance
>
>
> Sandeep
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From naimi at itc.nl  Mon Oct 24 17:06:22 2011
From: naimi at itc.nl (Babak Naimi)
Date: Mon, 24 Oct 2011 17:06:22 +0200
Subject: [R-sig-Geo] ModisDownload
Message-ID: <021F462EDC7F2B42A7038E9F9D4782612117FED31A@itcnt27.itc.nl>

Dear list,

This might be interesting for you. I implemented an R function to automate download, mosaic, and projecting of MODIS images. In the following link you will find the instruction and details on how to use this function:
http://r-gis.net/?q=ModisDownload

Thanks Tom Hengel, as his script on http://spatial-analyst.net made the main core of the ModisDownload function.

Best regards,

Babak Naimi
PhD Candidate, Natural Resources Department,
Faculty of Geo-Information Science and Earth Observations (ITC), University of Twente, 
P.O. Box 217, 7500 AE Enschede, The Netherlands
Tel: +31 53 4874212


From jgarcia at ija.csic.es  Mon Oct 24 17:55:10 2011
From: jgarcia at ija.csic.es (jgarcia at ija.csic.es)
Date: Mon, 24 Oct 2011 17:55:10 +0200
Subject: [R-sig-Geo] rgdal installation - libraries in non-standard locations
Message-ID: <2530.192.171.166.212.1319471710.squirrel@paleo.ija.csic.es>

Hi all,
I am having problems installing RGDAL (with R 2.13.0) in a linux Redhat
box where I do not have administrative privileges, so I have to install
new libraries and R packages in my $HOME (/users/jgp) folder. The R core
is, however, preinstalled.

After installation of  proj-4.7.0 and gdal-1.81.1 from sources in my
folder /users/jgp, libraries are located in /users/jgp/lib and includes in
/users/jgp/include for both libraries.

Then, installation of:

R CMD INSTALL --configure-args='--with-proj-lib=/users/jgp/lib'
rgdal_0.7-1.tar.gz

gives the output log (the end of it):

...
export PKG_LIBS='-L/users/jgp/lib -l'
R CMD INSTALL --configure-args='--with-proj-lib=/users/jgp/lib'
rgdal_0.7-1.tar.gz
checking proj_api.h usability... yes
checking proj_api.h presence... yes
checking for proj_api.h... yes
checking for pj_init_plus in -lproj... no
Error: libproj.a not found.
If the PROJ.4 library is installed in a non-standard location,
use --configure-args='--with-proj-lib=/opt/local/lib' for example,
replacing /opt/local/* with appropriate values for your installation.
If PROJ.4 is not installed, install it.
ERROR: configuration failed for package 'rgdal'
* removing '/users/jgp/R/x86_64-redhat-linux-gnu-library/2.13/rgdal'

Please, could you help with this? I've already spent with this an insane
amount of hours without any success.

Thanks
Javier
...


From aortizbobea at arec.umd.edu  Mon Oct 24 22:23:23 2011
From: aortizbobea at arec.umd.edu (Ariel Ortiz-Bobea)
Date: Mon, 24 Oct 2011 13:23:23 -0700 (PDT)
Subject: [R-sig-Geo] How to efficiently clip large grids/raster with
	polygons?
In-Reply-To: <CANtt_hyc+3sdzmVP0jkM5pjnaxW_p7+ikK9YjgJjpbVHotjhzA@mail.gmail.com>
References: <1316308213575-6804923.post@n2.nabble.com>
	<CANtt_hz-XYQciu395eU0VUpgPgBKrnxwTC_NsoYZr+1GaZd2Jg@mail.gmail.com>
	<1316370914927-6806329.post@n2.nabble.com>
	<CANtt_hyc+3sdzmVP0jkM5pjnaxW_p7+ikK9YjgJjpbVHotjhzA@mail.gmail.com>
Message-ID: <E7C57FAA7891B94DBA265B591642DE25D04AF8D2F8@mail.arec.umd.edu>

Hello Robert,
Sorry for the long delay. This is so useful!
Thanks a lot for the example, this should help many others in the future.
Thanks again!
Ariel

---
Ariel Ortiz-Bobea
PhD Candidate, Agricultural & Resource Economics
University of Maryland - College Park

________________________________________
From: Robert Hijmans [via R-sig-geo] [ml-node+s2731867n6807080h6 at n2.nabble.com]
Sent: Sunday, September 18, 2011 11:13 PM
To: Ariel Ortiz Bobea
Subject: Re: How to efficiently clip large grids/raster with polygons?

Ariel, if you have 23 stacks, you could, in principle, combine these into a
single stack and then extract the values. But because your stack are already
very large (90,000 layers each), you might be better off considering an
alternative option: to determine the weights once, and then re-use them
while looping over the 23 stacks, as illustrated (without the loop) below.


library(raster)
r <- raster(ncol=36, nrow=18)
r[] <- 1:ncell(r)
cds1 <- rbind(c(-180,-20), c(-160,5), c(-60, 0), c(-160,-60), c(-180,-20))
cds2 <- rbind(c(80,0), c(100,60), c(120,0), c(120,-55), c(80,0))
polys <- SpatialPolygons(list(Polygons(list(Polygon(cds1)), 1),
Polygons(list(Polygon(cds2)), 2)))

# extract the cellnumbers and weights
v <- extract(r, polys, weights=TRUE, cellnumbers=TRUE)
head(v[[1]])

# example stack
s <- stack(r,r*2,r*3,r*4,r*5)

# normal approach
system.time( a <- extract(s, polys, weights=TRUE, fun=mean) )

# reuse of weights approach (assuming there are no NA values)
fun <- function(x) apply((s[v[[x]][, 'cell']] * v[[x]][,'weight']) / sum(
v[[x]][,'weight']), 2, sum, na.rm=TRUE)

# as above, but here taking care of possible NA values (the same cells for
all layers)
fun2 <- function(x) {
d <- na.omit(cbind(s[v[[x]][, 'cell']], v[[x]][,'weight']))
 w <- d[, ncol(d)]
d <- d[, -ncol(d)]
apply(d*w/sum(w), 2, sum, na.rm=TRUE)
}

# much faster than the example above
system.time( b <- sapply(1:length(v), fun ))
system.time( d <- sapply(1:length(v), fun2 ))


 a
b
d

# results are the same (for this example!)
t(b) == a



Probably a good idea to test this first for a few counties.

Best, Robert

On Sun, Sep 18, 2011 at 11:35 AM, Ariel Ortiz-Bobea <
[hidden email]</user/SendEmail.jtp?type=node&node=6807080&i=0>> wrote:

> Thanks Robert,
>
> It works great. It took the same time to clip the RasterStack than the
> single RasterLayer. I read your "Introduction to the ?raster? package
> (version 1.9-11)" and I found very useful too to understand the different
> objects. Thanks for developing this resource!
>
> I wonder about a way to combine several variables (23) and time periods
> (~90,000) to efficiently do the polygon clipping on a large
> RasterBrick/Stacks. I feel that I need to choose between:
>
> 1- performing the clipping on 23 RasterStacks (one for each variable, e.g.
> temperature) in which each band corresponds to a time period (90,000 of
> them)
>
> 2- performing the clipping on 90,000 RasterStacks (one for each time
> period,
> e.g. 1980/1/1 09:00) in which each band corresponds to a variable (23 of
> them).
>
> ... and option 1 would be expectedly faster. But, is there a way to combine
> both options to do the clipping "ALL at once" of all the time periods and
> variables? I read about the "setZ" function for time-tagging layers and the
> ability to perform functions for each raster cell over time... but I'm not
> sure I can make use of it in this context (stacking 2 time-period layers
> doubles my band number... basically, I feel it does not lead to an
> additional dimension in the structure of the object).
>
> Any thoughts would be greatly appreciated!
>
> Regards,
>
> Ariel
>
>
>
> -----
> Ariel Ortiz-Bobea
> PhD Candidate in Agricultural & Resource Economics
> University of Maryland - College Park
> --
> View this message in context:
> http://r-sig-geo.2731867.n2.nabble.com/How-to-efficiently-clip-large-grids-raster-with-polygons-tp6804923p6806329.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> [hidden email]</user/SendEmail.jtp?type=node&node=6807080&i=1>
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
        [[alternative HTML version deleted]]


_______________________________________________
R-sig-Geo mailing list
[hidden email]</user/SendEmail.jtp?type=node&node=6807080&i=2>
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


________________________________
If you reply to this email, your message will be added to the discussion below:
http://r-sig-geo.2731867.n2.nabble.com/How-to-efficiently-clip-large-grids-raster-with-polygons-tp6804923p6807080.html
To unsubscribe from How to efficiently clip large grids/raster with polygons?, click here<http://r-sig-geo.2731867.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=6804923&code=YW9ydGl6Ym9iZWFAYXJlYy51bWQuZWR1fDY4MDQ5MjN8LTYxMzExNzA2NQ==>.


-----
Ariel Ortiz-Bobea
PhD Candidate in Agricultural & Resource Economics
University of Maryland - College Park
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/How-to-efficiently-clip-large-grids-raster-with-polygons-tp6804923p6926442.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From sandeep.coepcivil at gmail.com  Mon Oct 24 23:06:59 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Mon, 24 Oct 2011 16:06:59 -0500
Subject: [R-sig-Geo] Calling R from QGIS
Message-ID: <CAHnA5RWKkOVccuKrbtMjz9mCVvbt7qFLKwRoSpOiQc4qin16wg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111024/be880b91/attachment.pl>

From tech_dev at wildintellect.com  Tue Oct 25 00:54:00 2011
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Mon, 24 Oct 2011 15:54:00 -0700
Subject: [R-sig-Geo] Calling R from QGIS
In-Reply-To: <CAHnA5RWKkOVccuKrbtMjz9mCVvbt7qFLKwRoSpOiQc4qin16wg@mail.gmail.com>
References: <CAHnA5RWKkOVccuKrbtMjz9mCVvbt7qFLKwRoSpOiQc4qin16wg@mail.gmail.com>
Message-ID: <4EA5EC88.1010304@wildintellect.com>

On 10/24/2011 02:06 PM, Sandeep Patil wrote:
> Hello everyone
> 
> I searched for this question online but could not find a satisfactory
> answer.
> 
> How many of you use Quantum GIS and R together . I want to access as much
> 
> R functionality through QGIS as possible to manipulate my data within
> 
> QGIS itself. Any advice welcome.
> 
> I tried a plugin called ManageR but it is having some issues and cant be
> installed properly.
> 
> Essentially what is the best tool out there that can help me
> 
> get the best of both worlds QGIS and R integrating them in different ways
> 
> Thanks in advance
> 
> Sandeep
> 

ManageR really is the easiest way, the key is getting rpy2 installed
properly (thats the python to R bridge). You have to do that step
yourself ManageR does not install that lib for you. Sometimes it's also
necessary to tweak the PATH variable (On Windows). If you email on the
qgis-user list we can try to troubleshoot that part of the install.

Aside from that you can load almost any spatial dataset directly in R
with the rgdal package. Manipulate, save back out to whatever format you
prefer and then visualize it in QGIS.

I tend to use spatialite and postgis heavily as I can then also pull any
table information I want via SQL commands in R with the RSQlite and
RPostgresql packages.

Enjoy,
Alex


From matzke at berkeley.edu  Tue Oct 25 05:01:32 2011
From: matzke at berkeley.edu (Nick Matzke)
Date: Mon, 24 Oct 2011 20:01:32 -0700
Subject: [R-sig-Geo] downsampling a lines shapefile?
Message-ID: <4EA6268C.3040400@berkeley.edu>

Hi all,

I have a shapefile with a number of line features.  I can 
load it and plot it.  Is there an easy way to downsample or 
smooth the shapefile to a coarser resolution?

Thanks so much for your help,
Nick


-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
3060 VLSB #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From Roger.Bivand at nhh.no  Tue Oct 25 10:32:27 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 25 Oct 2011 10:32:27 +0200
Subject: [R-sig-Geo] downsampling a lines shapefile?
In-Reply-To: <4EA6268C.3040400@berkeley.edu>
References: <4EA6268C.3040400@berkeley.edu>
Message-ID: <alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>

On Mon, 24 Oct 2011, Nick Matzke wrote:

> Hi all,
>
> I have a shapefile with a number of line features.  I can load it and plot 
> it.  Is there an easy way to downsample or smooth the shapefile to a coarser 
> resolution?

?gSimplify in rgeos?

Roger

>
> Thanks so much for your help,
> Nick
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From paul.hiemstra at knmi.nl  Tue Oct 25 15:05:46 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Tue, 25 Oct 2011 13:05:46 +0000
Subject: [R-sig-Geo] rgdal installation - libraries in non-standard
	locations
In-Reply-To: <2530.192.171.166.212.1319471710.squirrel@paleo.ija.csic.es>
References: <2530.192.171.166.212.1319471710.squirrel@paleo.ija.csic.es>
Message-ID: <4EA6B42A.7020007@knmi.nl>

Hi,

A friend had this exact problem. I think it was fixed by setting an
evironment variable PROJ_LIB to the directory where the proj libs are
located.

cheers,
Paul

On 10/24/2011 03:55 PM, jgarcia at ija.csic.es wrote:
> Hi all,
> I am having problems installing RGDAL (with R 2.13.0) in a linux Redhat
> box where I do not have administrative privileges, so I have to install
> new libraries and R packages in my $HOME (/users/jgp) folder. The R core
> is, however, preinstalled.
>
> After installation of  proj-4.7.0 and gdal-1.81.1 from sources in my
> folder /users/jgp, libraries are located in /users/jgp/lib and includes in
> /users/jgp/include for both libraries.
>
> Then, installation of:
>
> R CMD INSTALL --configure-args='--with-proj-lib=/users/jgp/lib'
> rgdal_0.7-1.tar.gz
>
> gives the output log (the end of it):
>
> ...
> export PKG_LIBS='-L/users/jgp/lib -l'
> R CMD INSTALL --configure-args='--with-proj-lib=/users/jgp/lib'
> rgdal_0.7-1.tar.gz
> checking proj_api.h usability... yes
> checking proj_api.h presence... yes
> checking for proj_api.h... yes
> checking for pj_init_plus in -lproj... no
> Error: libproj.a not found.
> If the PROJ.4 library is installed in a non-standard location,
> use --configure-args='--with-proj-lib=/opt/local/lib' for example,
> replacing /opt/local/* with appropriate values for your installation.
> If PROJ.4 is not installed, install it.
> ERROR: configuration failed for package 'rgdal'
> * removing '/users/jgp/R/x86_64-redhat-linux-gnu-library/2.13/rgdal'
>
> Please, could you help with this? I've already spent with this an insane
> amount of hours without any success.
>
> Thanks
> Javier
> ...
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From geraldjtb at googlemail.com  Tue Oct 25 15:32:48 2011
From: geraldjtb at googlemail.com (Gerald JtB)
Date: Tue, 25 Oct 2011 15:32:48 +0200
Subject: [R-sig-Geo] Calling R from QGIS
In-Reply-To: <4EA5EC88.1010304@wildintellect.com>
References: <CAHnA5RWKkOVccuKrbtMjz9mCVvbt7qFLKwRoSpOiQc4qin16wg@mail.gmail.com>
	<4EA5EC88.1010304@wildintellect.com>
Message-ID: <CAGOBNgY5ZixBomuTPfB8QR7JcLyqNK31qbz8=s1t3um3Hc_MZg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111025/3f7ee486/attachment.pl>

From a.mosnier at gmail.com  Tue Oct 25 15:48:43 2011
From: a.mosnier at gmail.com (Arnaud Mosnier)
Date: Tue, 25 Oct 2011 09:48:43 -0400
Subject: [R-sig-Geo] Sampling point density increasing with distance from a
	polygon or a line
Message-ID: <CANkFkEfMWScz=BjV80SsK3jrchfj-XQbqgwsuc6W8+xqKBsByQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111025/194f9b70/attachment.pl>

From jgarcia at ija.csic.es  Tue Oct 25 16:51:12 2011
From: jgarcia at ija.csic.es (jgarcia at ija.csic.es)
Date: Tue, 25 Oct 2011 16:51:12 +0200
Subject: [R-sig-Geo] rgdal installation - libraries in non-standard
 locations
In-Reply-To: <4EA6B42A.7020007@knmi.nl>
References: <2530.192.171.166.212.1319471710.squirrel@paleo.ija.csic.es>
	<4EA6B42A.7020007@knmi.nl>
Message-ID: <4115.192.171.166.212.1319554272.squirrel@paleo.ija.csic.es>

Hi Paul,
Thanks, I've just tried that but the error message remains the same.
Cheers,
Javier
...

> Hi,
>
> A friend had this exact problem. I think it was fixed by setting an
> evironment variable PROJ_LIB to the directory where the proj libs are
> located.
>
> cheers,
> Paul
>
> On 10/24/2011 03:55 PM, jgarcia at ija.csic.es wrote:
>> Hi all,
>> I am having problems installing RGDAL (with R 2.13.0) in a linux Redhat
>> box where I do not have administrative privileges, so I have to install
>> new libraries and R packages in my $HOME (/users/jgp) folder. The R core
>> is, however, preinstalled.
>>
>> After installation of  proj-4.7.0 and gdal-1.81.1 from sources in my
>> folder /users/jgp, libraries are located in /users/jgp/lib and includes
>> in
>> /users/jgp/include for both libraries.
>>
>> Then, installation of:
>>
>> R CMD INSTALL --configure-args='--with-proj-lib=/users/jgp/lib'
>> rgdal_0.7-1.tar.gz
>>
>> gives the output log (the end of it):
>>
>> ...
>> export PKG_LIBS='-L/users/jgp/lib -l'
>> R CMD INSTALL --configure-args='--with-proj-lib=/users/jgp/lib'
>> rgdal_0.7-1.tar.gz
>> checking proj_api.h usability... yes
>> checking proj_api.h presence... yes
>> checking for proj_api.h... yes
>> checking for pj_init_plus in -lproj... no
>> Error: libproj.a not found.
>> If the PROJ.4 library is installed in a non-standard location,
>> use --configure-args='--with-proj-lib=/opt/local/lib' for example,
>> replacing /opt/local/* with appropriate values for your installation.
>> If PROJ.4 is not installed, install it.
>> ERROR: configuration failed for package 'rgdal'
>> * removing '/users/jgp/R/x86_64-redhat-linux-gnu-library/2.13/rgdal'
>>
>> Please, could you help with this? I've already spent with this an insane
>> amount of hours without any success.
>>
>> Thanks
>> Javier
>> ...
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> --
> Paul Hiemstra, Ph.D.
> Global Climate Division
> Royal Netherlands Meteorological Institute (KNMI)
> Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
> P.O. Box 201 | 3730 AE | De Bilt
> tel: +31 30 2206 494
>
> http://intamap.geo.uu.nl/~paul
> http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770
>
>


From virgilio.gomez at uclm.es  Tue Oct 25 17:51:58 2011
From: virgilio.gomez at uclm.es (Virgilio =?ISO-8859-1?Q?G=F3mez-Rubio?=)
Date: Tue, 25 Oct 2011 17:51:58 +0200
Subject: [R-sig-Geo] Calling R from QGIS
In-Reply-To: <CAGOBNgY5ZixBomuTPfB8QR7JcLyqNK31qbz8=s1t3um3Hc_MZg@mail.gmail.com>
References: <CAHnA5RWKkOVccuKrbtMjz9mCVvbt7qFLKwRoSpOiQc4qin16wg@mail.gmail.com>
	<4EA5EC88.1010304@wildintellect.com>
	<CAGOBNgY5ZixBomuTPfB8QR7JcLyqNK31qbz8=s1t3um3Hc_MZg@mail.gmail.com>
Message-ID: <1319557918.1729.0.camel@virgil-HP-Compaq-8000-Elite-USDT-PC>

El mar, 25-10-2011 a las 15:32 +0200, Gerald JtB escribi?:
> The SEXTANTE-library should be another possibility.
> http://sextante.forge.osor.eu/index.html

And they have just released an R-Sextante interface:

http://sextantegis.blogspot.com/2011/10/r.html

Best,

Virgilio

> 
> (I used it for ArcGIS only so far, but there seems to be a QGIS-plugin)
> http://users.qgis.org/planet/user/6/tag/sextante/
> 
> with best regards
> Gerald
> 
> 
> On Tue, Oct 25, 2011 at 12:54 AM, Alex Mandel <tech_dev at wildintellect.com>wrote:
> 
> > On 10/24/2011 02:06 PM, Sandeep Patil wrote:
> > > Hello everyone
> > >
> > > I searched for this question online but could not find a satisfactory
> > > answer.
> > >
> > > How many of you use Quantum GIS and R together . I want to access as much
> > >
> > > R functionality through QGIS as possible to manipulate my data within
> > >
> > > QGIS itself. Any advice welcome.
> > >
> > > I tried a plugin called ManageR but it is having some issues and cant be
> > > installed properly.
> > >
> > > Essentially what is the best tool out there that can help me
> > >
> > > get the best of both worlds QGIS and R integrating them in different ways
> > >
> > > Thanks in advance
> > >
> > > Sandeep
> > >
> >
> > ManageR really is the easiest way, the key is getting rpy2 installed
> > properly (thats the python to R bridge). You have to do that step
> > yourself ManageR does not install that lib for you. Sometimes it's also
> > necessary to tweak the PATH variable (On Windows). If you email on the
> > qgis-user list we can try to troubleshoot that part of the install.
> >
> > Aside from that you can load almost any spatial dataset directly in R
> > with the rgdal package. Manipulate, save back out to whatever format you
> > prefer and then visualize it in QGIS.
> >
> > I tend to use spatialite and postgis heavily as I can then also pull any
> > table information I want via SQL commands in R with the RSQlite and
> > RPostgresql packages.
> >
> > Enjoy,
> > Alex
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From sandeep.coepcivil at gmail.com  Tue Oct 25 18:26:34 2011
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Tue, 25 Oct 2011 11:26:34 -0500
Subject: [R-sig-Geo] Make function ignore +inf and -inf values
Message-ID: <CAHnA5RUNQtXj-DmMTj_1U9rgWC0rvY3_dRbz8p47qDQo6gi69w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111025/3cf91efa/attachment.pl>

From edzer.pebesma at uni-muenster.de  Tue Oct 25 18:42:10 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 25 Oct 2011 18:42:10 +0200
Subject: [R-sig-Geo] Make function ignore +inf and -inf values
In-Reply-To: <CAHnA5RUNQtXj-DmMTj_1U9rgWC0rvY3_dRbz8p47qDQo6gi69w@mail.gmail.com>
References: <CAHnA5RUNQtXj-DmMTj_1U9rgWC0rvY3_dRbz8p47qDQo6gi69w@mail.gmail.com>
Message-ID: <4EA6E6E2.5060309@uni-muenster.de>

You can't expect such behaviour from analysis functions; this is a 
problem in your data or introduced by your analysis (e.g. taking logs 
from zero values). I believe the job of the data analyst (you) is to 
solve this before you call the analysis functions / methods.

On 10/25/2011 06:26 PM, Sandeep Patil wrote:
> Hello
>
> I am using compare.cv functions to compare
>
> results stored in different dataframes and it works fine.
>
> The function fails when it gets a +inf or -inf value in a particular column.
>
> It is difficult for me to replace all these values because there are many
>
> files and i do not know where inf values may be located
>
> Is it possible to somehow coax the function to disregard
>
> the rows with +Inf or -inf values , i can get a subset using
>
> subset of a dataframe function but i have too many columns
>
> and too many functions to change
>
> Thanks
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From mariana.benitezrojas at yahoo.com  Tue Oct 25 18:56:45 2011
From: mariana.benitezrojas at yahoo.com (Mariana Benitez rojas)
Date: Tue, 25 Oct 2011 09:56:45 -0700 (PDT)
Subject: [R-sig-Geo] "Spdep" linear regression code
Message-ID: <1319561805.11049.YahooMailNeo@web125006.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111025/3906e895/attachment.pl>

From marco.girardello99 at gmail.com  Tue Oct 25 19:00:00 2011
From: marco.girardello99 at gmail.com (Marco Girardello)
Date: Tue, 25 Oct 2011 18:00:00 +0100
Subject: [R-sig-Geo] Lights at night data
Message-ID: <CABJ+Xe9oDe=90O-7iEH80H4vjBMWv4u7sSo8GcvwOZ+J3WUKjA@mail.gmail.com>

Dear R-geo users,

I was wondering whether you you have any suggestions on where to find
geospatialdata on lights at night. I have managed to find some the
excellent time series data available on the NOAA website:

http://ngdc.noaa.gov/dmsp/downloadV4composites.html

The dataset is available at a resolution of 1km, but I would be
interested in something at a higher resolution (possibly 100m) for the
Europe/ the UK. I would interested in either time series data or
shapshots taken over a certain period of time. Any help would be
greatly appreciated!

Best wishes,

Marco Girardello


From Roger.Bivand at nhh.no  Tue Oct 25 19:36:17 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 25 Oct 2011 19:36:17 +0200 (CEST)
Subject: [R-sig-Geo] "Spdep" linear regression code
In-Reply-To: <1319561805.11049.YahooMailNeo@web125006.mail.ne1.yahoo.com>
References: <1319561805.11049.YahooMailNeo@web125006.mail.ne1.yahoo.com>
Message-ID: <alpine.LRH.2.00.1110251925430.11656@reclus.nhh.no>

On Tue, 25 Oct 2011, Mariana Benitez rojas wrote:

> Dear list,
>
> I am trying to study the code for spatial econometrics models in the 
> "spdep" package. The code is understandable but I have some parts that I 
> don't? understand for example why we need to do lm(y ~ x - 1) instead of 
> just lm(y ~ x) since in other regression models in R we supposedly are 
> doing this way instead of reducing the x by one.

You are looking at the implementation code, but do not say what version. 
The code is not written to be understandable, but to work - most code 
tries to handle corner cases. Here, the lm() function is being used on the 
matrix of right-hand side variables, including the intercept, to see 
whether the user has included aliased (very collinear) variables. 
Consequently, -1 is added to the formula to tell lm() not to include an 
intercept. If covariates are aliased, they are omitted in ML fitting.

>
> Also for "lagsarlm" we use three types of regression lm.base(), lm.lag() 
> and the simple (y~1) model so I am not sure which model is being used to 
> compare against the lm.lag() or how we get the LR statistics.

The intercept-only model is used to prepare a part of the Nagelkerke 
pseudo-R2.

> Fore 
> "errorsarlm" and "sacsarlm" we have the same situation but using 
> lm.target() instead of lm.lag().
>

You probably need to know more R to read the code - these sub-objects and 
steps are not of great interest, and do not give you the log likelihood, 
which is shown in the summary(), and (surprisingly) logLik() methods for 
sarlm objects. For LR statistics, use the LR.sarlm() function.

>
> I would be so thankful if anybody could give the answer or show me the 
> material that I can use for my study.

You have not explained what the point of your study is, as far as I can 
see. The functions are fitting by maximum likelihood, and doing lots of 
extra things to accommodate for example alternative methods for computing 
the Jacobian, and for estimating the coefficient covariance matrix. So the 
lines you have chosen to report are not very odd, just auxiliary 
regressions used in getting to the user's chosen model fit.

Hope this clarifies,

Roger

>
>
>
> ?
> Mariana Benitez Rojas
>
>
> Centro Federal de Educa??o Tecnol?gico (CEFET-PA)
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From matzke at berkeley.edu  Tue Oct 25 21:11:00 2011
From: matzke at berkeley.edu (Nick Matzke)
Date: Tue, 25 Oct 2011 12:11:00 -0700
Subject: [R-sig-Geo] downsampling a lines shapefile?
In-Reply-To: <alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
Message-ID: <4EA709C4.5000706@berkeley.edu>

Thanks so much!  I've almost gotten rgeos to install, 
however I'm getting a peculiar error about a (successfully 
installed) other package, stringr:

"Error : package 'stringr' does not have a name space"

...any idea what that might be about?  Grateful as always!!
Nick


PS Full error message below...

=========================================
 > install.packages("/Users/nick/Desktop/downloads/rgeos", 
"/Library/Frameworks/R.framework/Resources/library/", NULL, 
type='source',
+ 
configure.args="--with-geos-config=/usr/local/bin/geos-config")
WARNING: ignoring environment value of R_HOME
Loading ~/.Rprofile...
Currently viewed PATH:
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs
* installing *source* package ?rgeos? ...
geos-config: /usr/local/bin/geos-config
GEOS: 3.2.3
CPPFLAGS: -DHAVEUNARYUNION -I/usr/local/include
LIBS: -L/usr/local/lib -lgeos
configure: creating ./config.status
config.status: creating src/Makevars
** libs
** arch - i386
make: Nothing to be done for `all'.
** R
** inst
** preparing package for lazy loading
Loading required package: plyr
Error : package 'stringr' does not have a name space
ERROR: lazy loading failed for package ?rgeos?
* removing 
?/Library/Frameworks/R.framework/Versions/2.10/Resources/library/rgeos?
Warning message:
In install.packages("/Users/nick/Desktop/downloads/rgeos", 
"/Library/Frameworks/R.framework/Resources/library/",  :
   installation of package 
'/Users/nick/Desktop/downloads/rgeos' had non-zero exit status

On 10/25/11 1:32 AM, Roger Bivand wrote:
> On Mon, 24 Oct 2011, Nick Matzke wrote:
>
>> Hi all,
>>
>> I have a shapefile with a number of line features. I can
>> load it and plot it. Is there an easy way to downsample or
>> smooth the shapefile to a coarser resolution?
>
> ?gSimplify in rgeos?
>
> Roger
>
>>
>> Thanks so much for your help,
>> Nick
>>
>>
>>
>

-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
3060 VLSB #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From rundel at gmail.com  Tue Oct 25 21:34:05 2011
From: rundel at gmail.com (Colin Rundel)
Date: Tue, 25 Oct 2011 15:34:05 -0400
Subject: [R-sig-Geo] downsampling a lines shapefile?
In-Reply-To: <4EA709C4.5000706@berkeley.edu>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
	<4EA709C4.5000706@berkeley.edu>
Message-ID: <893A8C35-484F-4C95-8D6A-5A6F36F6C735@gmail.com>

That is odd, it isn't an error that I've seen before. What version of R are you running and can you check what version of plyr and stringr you have installed?

-Colin


On Oct 25, 2011, at 3:11 PM, Nick Matzke wrote:

> Thanks so much!  I've almost gotten rgeos to install, however I'm getting a peculiar error about a (successfully installed) other package, stringr:
> 
> "Error : package 'stringr' does not have a name space"
> 
> ...any idea what that might be about?  Grateful as always!!
> Nick
> 
> 
> PS Full error message below...
> 
> =========================================
> > install.packages("/Users/nick/Desktop/downloads/rgeos", "/Library/Frameworks/R.framework/Resources/library/", NULL, type='source',
> + configure.args="--with-geos-config=/usr/local/bin/geos-config")
> WARNING: ignoring environment value of R_HOME
> Loading ~/.Rprofile...
> Currently viewed PATH:
> /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs
> * installing *source* package ?rgeos? ...
> geos-config: /usr/local/bin/geos-config
> GEOS: 3.2.3
> CPPFLAGS: -DHAVEUNARYUNION -I/usr/local/include
> LIBS: -L/usr/local/lib -lgeos
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> ** arch - i386
> make: Nothing to be done for `all'.
> ** R
> ** inst
> ** preparing package for lazy loading
> Loading required package: plyr
> Error : package 'stringr' does not have a name space
> ERROR: lazy loading failed for package ?rgeos?
> * removing ?/Library/Frameworks/R.framework/Versions/2.10/Resources/library/rgeos?
> Warning message:
> In install.packages("/Users/nick/Desktop/downloads/rgeos", "/Library/Frameworks/R.framework/Resources/library/",  :
>  installation of package '/Users/nick/Desktop/downloads/rgeos' had non-zero exit status
> 
> On 10/25/11 1:32 AM, Roger Bivand wrote:
>> On Mon, 24 Oct 2011, Nick Matzke wrote:
>> 
>>> Hi all,
>>> 
>>> I have a shapefile with a number of line features. I can
>>> load it and plot it. Is there an easy way to downsample or
>>> smooth the shapefile to a coarser resolution?
>> 
>> ?gSimplify in rgeos?
>> 
>> Roger
>> 
>>> 
>>> Thanks so much for your help,
>>> Nick
>>> 
>>> 
>>> 
>> 
> 
> -- 
> ====================================================
> Nicholas J. Matzke
> Ph.D. Candidate, Graduate Student Researcher
> 
> Huelsenbeck Lab
> Center for Theoretical Evolutionary Genomics
> 4151 VLSB (Valley Life Sciences Building)
> Department of Integrative Biology
> University of California, Berkeley
> 
> Graduate Student Instructor, IB200B
> Principles of Phylogenetics: Ecology and Evolution
> http://ib.berkeley.edu/courses/ib200b/
> http://phylo.wikidot.com/
> 
> 
> Lab websites:
> http://ib.berkeley.edu/people/lab_detail.php?lab=54
> http://fisher.berkeley.edu/cteg/hlab.html
> Dept. personal page: http://ib.berkeley.edu/people/students/person_detail.php?person=370
> Lab personal page: http://fisher.berkeley.edu/cteg/members/matzke.html
> Lab phone: 510-643-6299
> Dept. fax: 510-643-6264
> 
> Cell phone: 510-301-0179
> Email: matzke at berkeley.edu
> 
> Mailing address:
> Department of Integrative Biology
> 3060 VLSB #3140
> Berkeley, CA 94720-3140
> 
> -----------------------------------------------------
> "[W]hen people thought the earth was flat, they were wrong. When people thought the earth was spherical, they were wrong. But if you think that thinking the earth is spherical is just as wrong as thinking the earth is flat, then your view is wronger than both of them put together."
> 
> Isaac Asimov (1989). "The Relativity of Wrong." The Skeptical Inquirer, 14(1), 35-44. Fall 1989.
> http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From matzke at berkeley.edu  Tue Oct 25 22:06:47 2011
From: matzke at berkeley.edu (Nick Matzke)
Date: Tue, 25 Oct 2011 13:06:47 -0700
Subject: [R-sig-Geo] downsampling a lines shapefile?
In-Reply-To: <893A8C35-484F-4C95-8D6A-5A6F36F6C735@gmail.com>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
	<4EA709C4.5000706@berkeley.edu>
	<893A8C35-484F-4C95-8D6A-5A6F36F6C735@gmail.com>
Message-ID: <4EA716D7.1000102@berkeley.edu>

Sure!  Thanks for looking at this...I've still got an Intel 
Mac OS X 10.4...yes, I'm in the stone age, but normally I 
can get things to work...


=========================
 > sessionInfo()
R version 2.10.1 (2009-12-14)
i386-apple-darwin8.11.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     grDevices utils     datasets  graphics 
methods   base

other attached packages:
[1] stringr_0.2 plyr_0.1.9

loaded via a namespace (and not attached):
[1] tools_2.10.1
=========================


On 10/25/11 12:34 PM, Colin Rundel wrote:
> That is odd, it isn't an error that I've seen before. What version of R are you running and can you check what version of plyr and stringr you have installed?
>
> -Colin
>
>
> On Oct 25, 2011, at 3:11 PM, Nick Matzke wrote:
>
>> Thanks so much!  I've almost gotten rgeos to install, however I'm getting a peculiar error about a (successfully installed) other package, stringr:
>>
>> "Error : package 'stringr' does not have a name space"
>>
>> ...any idea what that might be about?  Grateful as always!!
>> Nick
>>
>>
>> PS Full error message below...
>>
>> =========================================
>>> install.packages("/Users/nick/Desktop/downloads/rgeos", "/Library/Frameworks/R.framework/Resources/library/", NULL, type='source',
>> + configure.args="--with-geos-config=/usr/local/bin/geos-config")
>> WARNING: ignoring environment value of R_HOME
>> Loading ~/.Rprofile...
>> Currently viewed PATH:
>> /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs
>> * installing *source* package ?rgeos? ...
>> geos-config: /usr/local/bin/geos-config
>> GEOS: 3.2.3
>> CPPFLAGS: -DHAVEUNARYUNION -I/usr/local/include
>> LIBS: -L/usr/local/lib -lgeos
>> configure: creating ./config.status
>> config.status: creating src/Makevars
>> ** libs
>> ** arch - i386
>> make: Nothing to be done for `all'.
>> ** R
>> ** inst
>> ** preparing package for lazy loading
>> Loading required package: plyr
>> Error : package 'stringr' does not have a name space
>> ERROR: lazy loading failed for package ?rgeos?
>> * removing ?/Library/Frameworks/R.framework/Versions/2.10/Resources/library/rgeos?
>> Warning message:
>> In install.packages("/Users/nick/Desktop/downloads/rgeos", "/Library/Frameworks/R.framework/Resources/library/",  :
>>   installation of package '/Users/nick/Desktop/downloads/rgeos' had non-zero exit status
>>
>> On 10/25/11 1:32 AM, Roger Bivand wrote:
>>> On Mon, 24 Oct 2011, Nick Matzke wrote:
>>>
>>>> Hi all,
>>>>
>>>> I have a shapefile with a number of line features. I can
>>>> load it and plot it. Is there an easy way to downsample or
>>>> smooth the shapefile to a coarser resolution?
>>>
>>> ?gSimplify in rgeos?
>>>
>>> Roger
>>>
>>>>
>>>> Thanks so much for your help,
>>>> Nick
>>>>
>>>>
>>>>
>>>
>>
>> --
>> ====================================================
>> Nicholas J. Matzke
>> Ph.D. Candidate, Graduate Student Researcher
>>
>> Huelsenbeck Lab
>> Center for Theoretical Evolutionary Genomics
>> 4151 VLSB (Valley Life Sciences Building)
>> Department of Integrative Biology
>> University of California, Berkeley
>>
>> Graduate Student Instructor, IB200B
>> Principles of Phylogenetics: Ecology and Evolution
>> http://ib.berkeley.edu/courses/ib200b/
>> http://phylo.wikidot.com/
>>
>>
>> Lab websites:
>> http://ib.berkeley.edu/people/lab_detail.php?lab=54
>> http://fisher.berkeley.edu/cteg/hlab.html
>> Dept. personal page: http://ib.berkeley.edu/people/students/person_detail.php?person=370
>> Lab personal page: http://fisher.berkeley.edu/cteg/members/matzke.html
>> Lab phone: 510-643-6299
>> Dept. fax: 510-643-6264
>>
>> Cell phone: 510-301-0179
>> Email: matzke at berkeley.edu
>>
>> Mailing address:
>> Department of Integrative Biology
>> 3060 VLSB #3140
>> Berkeley, CA 94720-3140
>>
>> -----------------------------------------------------
>> "[W]hen people thought the earth was flat, they were wrong. When people thought the earth was spherical, they were wrong. But if you think that thinking the earth is spherical is just as wrong as thinking the earth is flat, then your view is wronger than both of them put together."
>>
>> Isaac Asimov (1989). "The Relativity of Wrong." The Skeptical Inquirer, 14(1), 35-44. Fall 1989.
>> http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>

-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
3060 VLSB #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From matzke at berkeley.edu  Tue Oct 25 22:09:51 2011
From: matzke at berkeley.edu (Nick Matzke)
Date: Tue, 25 Oct 2011 13:09:51 -0700
Subject: [R-sig-Geo] "package 'stringr' does not have a name space"
In-Reply-To: <alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
Message-ID: <4EA7178F.5040709@berkeley.edu>

Hi all,

I have almost gotten rgeos to install, however I'm getting a 
peculiar error about a (successfully installed) other 
package, stringr:

"Error : package 'stringr' does not have a name space"

I have asked the r-sig-geo list, but this error looks like a 
more generic one, perhaps there is some simple command I 
could add to stringr to get the namespace correct?

Any ideas much appreciated!

Cheers,
Nick


PS Full error message below...yes, I'm still on Intel Mac OS 
X 10.4 and thus R 2.10.1, can't be helped at the moment...

=========================================
 > sessionInfo()
R version 2.10.1 (2009-12-14)
i386-apple-darwin8.11.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     grDevices utils     datasets  graphics 
methods   base

other attached packages:
[1] stringr_0.2 plyr_0.1.9

loaded via a namespace (and not attached):
[1] tools_2.10.1


> install.packages("/Users/nick/Desktop/downloads/rgeos",
"/Library/Frameworks/R.framework/Resources/library/", NULL, 
type='source',
+ 
configure.args="--with-geos-config=/usr/local/bin/geos-config")
WARNING: ignoring environment value of R_HOME
Loading ~/.Rprofile...
Currently viewed PATH:
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs
* installing *source* package ?rgeos? ...
geos-config: /usr/local/bin/geos-config
GEOS: 3.2.3
CPPFLAGS: -DHAVEUNARYUNION -I/usr/local/include
LIBS: -L/usr/local/lib -lgeos
configure: creating ./config.status
config.status: creating src/Makevars
** libs
** arch - i386
make: Nothing to be done for `all'.
** R
** inst
** preparing package for lazy loading
Loading required package: plyr
Error : package 'stringr' does not have a name space
ERROR: lazy loading failed for package ?rgeos?
* removing 
?/Library/Frameworks/R.framework/Versions/2.10/Resources/library/rgeos?
Warning message:
In install.packages("/Users/nick/Desktop/downloads/rgeos", 
"/Library/Frameworks/R.framework/Resources/library/",  :
   installation of package 
'/Users/nick/Desktop/downloads/rgeos' had non-zero exit status



-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
3060 VLSB #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From r.turner at auckland.ac.nz  Tue Oct 25 23:09:36 2011
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 26 Oct 2011 10:09:36 +1300
Subject: [R-sig-Geo] Sampling point density increasing with distance
 from a	polygon or a line
In-Reply-To: <CANkFkEfMWScz=BjV80SsK3jrchfj-XQbqgwsuc6W8+xqKBsByQ@mail.gmail.com>
References: <CANkFkEfMWScz=BjV80SsK3jrchfj-XQbqgwsuc6W8+xqKBsByQ@mail.gmail.com>
Message-ID: <4EA72590.30001@auckland.ac.nz>

On 26/10/11 02:48, Arnaud Mosnier wrote:
> Dear Geo Users,
>
> I am trying to create "random" points which density decrease with the
> distance from a polygon or a line.
> Is there an function in R that can allow me to do that ?

A combination of functions from the "spatstat" package will
readily allow you to do that.  You will need to form an "im"
object say ``A'', of the distances from the your ``polygon or line'', using
the distmap() function.  You can then generate an inhomogeneous
Poisson process whose intensity is a (decreasing) function of A using the
rpoispp() function.   To calculate the decreasing function of A you would
do something like

     B <- eval.im(1/A)
or
     B <- eval.im(exp(-A))

and then do

     X <- rpoispp(B)

HTH

     cheers,

             Rolf Turner


From matzke at berkeley.edu  Tue Oct 25 23:11:09 2011
From: matzke at berkeley.edu (Nick Matzke)
Date: Tue, 25 Oct 2011 14:11:09 -0700
Subject: [R-sig-Geo] Installing rgeos on Mac OS X 10.4 (was Re: downsampling
 a lines shapefile?)
In-Reply-To: <4EA716D7.1000102@berkeley.edu>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
	<4EA709C4.5000706@berkeley.edu>
	<893A8C35-484F-4C95-8D6A-5A6F36F6C735@gmail.com>
	<4EA716D7.1000102@berkeley.edu>
Message-ID: <4EA725ED.5090703@berkeley.edu>

I figured it out, at least enough to get rgeos's gSimplify 
function to work, which was my original goal; the stringr 
problem was with 0.2, however I got stringr 0.5 to install 
by changing the minimum version in DESCRIPTION from R2.11 to 
R 2.10. ...

Thanks for the help!

#############
# This is how I got rgeos to install in R GUI on my Intel 
Mac OS X 10.4:
#############


# stringr download source 0.5 from CRAN
# change DESCRIPTION, change R 2.11 to R 2.10
# install with:
install.packages("/Users/nick/Desktop/downloads/stringr", 
"/Library/Frameworks/R.framework/Resources/library/", NULL, 
type='source')

# Update sp to 0.9-91 (manual download from CRAN; my default 
server didn't have it)
remove.packages("sp")

install.packages("/Users/nick/Desktop/downloads/sp_0.9-91.tar.gz", 
"/Library/Frameworks/R.framework/Resources/library/", NULL, 
type='source')





# Manual install of GEOS 3.3

# Download GEOS 3.3 from:
http://www.kyngchaos.com/macosx/build/geos
http://trac.osgeo.org/geos/

./configure
make
sudo make install



# This installs to /usr/local/bin/geo-config which is an 
input to the rgeos install

# To find, in Terminal type:
locate geos-config


# I got a crash based on a missing definition of 
GEOSUnaryUnion_r, so...
# To get rgeos to install,

# delete from rgeos_topology.c this bit (line 33):
================================
#ifdef HAVEUNARYUNION
SEXP rgeos_unaryunion(SEXP env, SEXP obj, SEXP id, SEXP byid ) {
     return( rgeos_topologyfunc(env, obj, id, byid, 
&GEOSUnaryUnion_r) );
}
#endif
================================

# And this from line 35 of init.c
================================
#ifdef HAVEUNARYUNION
     {"rgeos_unaryunion", (DL_FUNC) &rgeos_unaryunion, 4},
#endif
================================


# Then remove failed installs if any
remove.packages("rgeos")

install.packages("/Users/nick/Desktop/downloads/rgeos", 
"/Library/Frameworks/R.framework/Resources/library/", NULL, 
type='source',
configure.args="--with-geos-config=/usr/local/bin/geos-config")


library(rgeos)

# (You may have to remove old .o and .so files from previous 
install attempts...)



On 10/25/11 1:06 PM, Nick Matzke wrote:
> Sure! Thanks for looking at this...I've still got an Intel
> Mac OS X 10.4...yes, I'm in the stone age, but normally I
> can get things to work...
>
>
> =========================
>  > sessionInfo()
> R version 2.10.1 (2009-12-14)
> i386-apple-darwin8.11.1
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats grDevices utils datasets graphics methods base
>
> other attached packages:
> [1] stringr_0.2 plyr_0.1.9
>
> loaded via a namespace (and not attached):
> [1] tools_2.10.1
> =========================
>
>
> On 10/25/11 12:34 PM, Colin Rundel wrote:
>> That is odd, it isn't an error that I've seen before. What
>> version of R are you running and can you check what
>> version of plyr and stringr you have installed?
>>
>> -Colin
>>
>>
>> On Oct 25, 2011, at 3:11 PM, Nick Matzke wrote:
>>
>>> Thanks so much! I've almost gotten rgeos to install,
>>> however I'm getting a peculiar error about a
>>> (successfully installed) other package, stringr:
>>>
>>> "Error : package 'stringr' does not have a name space"
>>>
>>> ...any idea what that might be about? Grateful as always!!
>>> Nick
>>>
>>>
>>> PS Full error message below...
>>>
>>> =========================================
>>>> install.packages("/Users/nick/Desktop/downloads/rgeos",
>>>> "/Library/Frameworks/R.framework/Resources/library/",
>>>> NULL, type='source',
>>> +
>>> configure.args="--with-geos-config=/usr/local/bin/geos-config")
>>>
>>> WARNING: ignoring environment value of R_HOME
>>> Loading ~/.Rprofile...
>>> Currently viewed PATH:
>>> /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs
>>>
>>> * installing *source* package ?rgeos? ...
>>> geos-config: /usr/local/bin/geos-config
>>> GEOS: 3.2.3
>>> CPPFLAGS: -DHAVEUNARYUNION -I/usr/local/include
>>> LIBS: -L/usr/local/lib -lgeos
>>> configure: creating ./config.status
>>> config.status: creating src/Makevars
>>> ** libs
>>> ** arch - i386
>>> make: Nothing to be done for `all'.
>>> ** R
>>> ** inst
>>> ** preparing package for lazy loading
>>> Loading required package: plyr
>>> Error : package 'stringr' does not have a name space
>>> ERROR: lazy loading failed for package ?rgeos?
>>> * removing
>>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/library/rgeos?
>>>
>>> Warning message:
>>> In
>>> install.packages("/Users/nick/Desktop/downloads/rgeos",
>>> "/Library/Frameworks/R.framework/Resources/library/", :
>>> installation of package
>>> '/Users/nick/Desktop/downloads/rgeos' had non-zero exit
>>> status
>>>
>>> On 10/25/11 1:32 AM, Roger Bivand wrote:
>>>> On Mon, 24 Oct 2011, Nick Matzke wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> I have a shapefile with a number of line features. I can
>>>>> load it and plot it. Is there an easy way to downsample or
>>>>> smooth the shapefile to a coarser resolution?
>>>>
>>>> ?gSimplify in rgeos?
>>>>
>>>> Roger
>>>>
>>>>>
>>>>> Thanks so much for your help,
>>>>> Nick
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>> --
>>> ====================================================
>>> Nicholas J. Matzke
>>> Ph.D. Candidate, Graduate Student Researcher
>>>
>>> Huelsenbeck Lab
>>> Center for Theoretical Evolutionary Genomics
>>> 4151 VLSB (Valley Life Sciences Building)
>>> Department of Integrative Biology
>>> University of California, Berkeley
>>>
>>> Graduate Student Instructor, IB200B
>>> Principles of Phylogenetics: Ecology and Evolution
>>> http://ib.berkeley.edu/courses/ib200b/
>>> http://phylo.wikidot.com/
>>>
>>>
>>> Lab websites:
>>> http://ib.berkeley.edu/people/lab_detail.php?lab=54
>>> http://fisher.berkeley.edu/cteg/hlab.html
>>> Dept. personal page:
>>> http://ib.berkeley.edu/people/students/person_detail.php?person=370
>>>
>>> Lab personal page:
>>> http://fisher.berkeley.edu/cteg/members/matzke.html
>>> Lab phone: 510-643-6299
>>> Dept. fax: 510-643-6264
>>>
>>> Cell phone: 510-301-0179
>>> Email: matzke at berkeley.edu
>>>
>>> Mailing address:
>>> Department of Integrative Biology
>>> 3060 VLSB #3140
>>> Berkeley, CA 94720-3140
>>>
>>> -----------------------------------------------------
>>> "[W]hen people thought the earth was flat, they were
>>> wrong. When people thought the earth was spherical, they
>>> were wrong. But if you think that thinking the earth is
>>> spherical is just as wrong as thinking the earth is flat,
>>> then your view is wronger than both of them put together."
>>>
>>> Isaac Asimov (1989). "The Relativity of Wrong." The
>>> Skeptical Inquirer, 14(1), 35-44. Fall 1989.
>>> http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>

-- 
====================================================
Nicholas J. Matzke
Ph.D. Candidate, Graduate Student Researcher

Huelsenbeck Lab
Center for Theoretical Evolutionary Genomics
4151 VLSB (Valley Life Sciences Building)
Department of Integrative Biology
University of California, Berkeley

Graduate Student Instructor, IB200B
Principles of Phylogenetics: Ecology and Evolution
http://ib.berkeley.edu/courses/ib200b/
http://phylo.wikidot.com/


Lab websites:
http://ib.berkeley.edu/people/lab_detail.php?lab=54
http://fisher.berkeley.edu/cteg/hlab.html
Dept. personal page: 
http://ib.berkeley.edu/people/students/person_detail.php?person=370
Lab personal page: 
http://fisher.berkeley.edu/cteg/members/matzke.html
Lab phone: 510-643-6299
Dept. fax: 510-643-6264

Cell phone: 510-301-0179
Email: matzke at berkeley.edu

Mailing address:
Department of Integrative Biology
3060 VLSB #3140
Berkeley, CA 94720-3140

-----------------------------------------------------
"[W]hen people thought the earth was flat, they were wrong. 
When people thought the earth was spherical, they were 
wrong. But if you think that thinking the earth is spherical 
is just as wrong as thinking the earth is flat, then your 
view is wronger than both of them put together."

Isaac Asimov (1989). "The Relativity of Wrong." The 
Skeptical Inquirer, 14(1), 35-44. Fall 1989.
http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm


From rundel at gmail.com  Tue Oct 25 23:18:47 2011
From: rundel at gmail.com (Colin Rundel)
Date: Tue, 25 Oct 2011 17:18:47 -0400
Subject: [R-sig-Geo] Installing rgeos on Mac OS X 10.4 (was Re:
	downsampling a lines shapefile?)
In-Reply-To: <4EA725ED.5090703@berkeley.edu>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
	<4EA709C4.5000706@berkeley.edu>
	<893A8C35-484F-4C95-8D6A-5A6F36F6C735@gmail.com>
	<4EA716D7.1000102@berkeley.edu> <4EA725ED.5090703@berkeley.edu>
Message-ID: <A71708A8-4EE5-4679-A8E8-3C523697407B@gmail.com>

Glad to hear it, I was just about to suggest checking on updating stringr. I'll update the package description to require a current version of stringr.

-Colin 


On Oct 25, 2011, at 5:11 PM, Nick Matzke wrote:

> I figured it out, at least enough to get rgeos's gSimplify function to work, which was my original goal; the stringr problem was with 0.2, however I got stringr 0.5 to install by changing the minimum version in DESCRIPTION from R2.11 to R 2.10. ...
> 
> Thanks for the help!
> 
> #############
> # This is how I got rgeos to install in R GUI on my Intel Mac OS X 10.4:
> #############
> 
> 
> # stringr download source 0.5 from CRAN
> # change DESCRIPTION, change R 2.11 to R 2.10
> # install with:
> install.packages("/Users/nick/Desktop/downloads/stringr", "/Library/Frameworks/R.framework/Resources/library/", NULL, type='source')
> 
> # Update sp to 0.9-91 (manual download from CRAN; my default server didn't have it)
> remove.packages("sp")
> 
> install.packages("/Users/nick/Desktop/downloads/sp_0.9-91.tar.gz", "/Library/Frameworks/R.framework/Resources/library/", NULL, type='source')
> 
> 
> 
> 
> 
> # Manual install of GEOS 3.3
> 
> # Download GEOS 3.3 from:
> http://www.kyngchaos.com/macosx/build/geos
> http://trac.osgeo.org/geos/
> 
> ./configure
> make
> sudo make install
> 
> 
> 
> # This installs to /usr/local/bin/geo-config which is an input to the rgeos install
> 
> # To find, in Terminal type:
> locate geos-config
> 
> 
> # I got a crash based on a missing definition of GEOSUnaryUnion_r, so...
> # To get rgeos to install,
> 
> # delete from rgeos_topology.c this bit (line 33):
> ================================
> #ifdef HAVEUNARYUNION
> SEXP rgeos_unaryunion(SEXP env, SEXP obj, SEXP id, SEXP byid ) {
>    return( rgeos_topologyfunc(env, obj, id, byid, &GEOSUnaryUnion_r) );
> }
> #endif
> ================================
> 
> # And this from line 35 of init.c
> ================================
> #ifdef HAVEUNARYUNION
>    {"rgeos_unaryunion", (DL_FUNC) &rgeos_unaryunion, 4},
> #endif
> ================================
> 
> 
> # Then remove failed installs if any
> remove.packages("rgeos")
> 
> install.packages("/Users/nick/Desktop/downloads/rgeos", "/Library/Frameworks/R.framework/Resources/library/", NULL, type='source',
> configure.args="--with-geos-config=/usr/local/bin/geos-config")
> 
> 
> library(rgeos)
> 
> # (You may have to remove old .o and .so files from previous install attempts...)
> 
> 
> 
> On 10/25/11 1:06 PM, Nick Matzke wrote:
>> Sure! Thanks for looking at this...I've still got an Intel
>> Mac OS X 10.4...yes, I'm in the stone age, but normally I
>> can get things to work...
>> 
>> 
>> =========================
>> > sessionInfo()
>> R version 2.10.1 (2009-12-14)
>> i386-apple-darwin8.11.1
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>> 
>> attached base packages:
>> [1] stats grDevices utils datasets graphics methods base
>> 
>> other attached packages:
>> [1] stringr_0.2 plyr_0.1.9
>> 
>> loaded via a namespace (and not attached):
>> [1] tools_2.10.1
>> =========================
>> 
>> 
>> On 10/25/11 12:34 PM, Colin Rundel wrote:
>>> That is odd, it isn't an error that I've seen before. What
>>> version of R are you running and can you check what
>>> version of plyr and stringr you have installed?
>>> 
>>> -Colin
>>> 
>>> 
>>> On Oct 25, 2011, at 3:11 PM, Nick Matzke wrote:
>>> 
>>>> Thanks so much! I've almost gotten rgeos to install,
>>>> however I'm getting a peculiar error about a
>>>> (successfully installed) other package, stringr:
>>>> 
>>>> "Error : package 'stringr' does not have a name space"
>>>> 
>>>> ...any idea what that might be about? Grateful as always!!
>>>> Nick
>>>> 
>>>> 
>>>> PS Full error message below...
>>>> 
>>>> =========================================
>>>>> install.packages("/Users/nick/Desktop/downloads/rgeos",
>>>>> "/Library/Frameworks/R.framework/Resources/library/",
>>>>> NULL, type='source',
>>>> +
>>>> configure.args="--with-geos-config=/usr/local/bin/geos-config")
>>>> 
>>>> WARNING: ignoring environment value of R_HOME
>>>> Loading ~/.Rprofile...
>>>> Currently viewed PATH:
>>>> /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs
>>>> 
>>>> * installing *source* package ?rgeos? ...
>>>> geos-config: /usr/local/bin/geos-config
>>>> GEOS: 3.2.3
>>>> CPPFLAGS: -DHAVEUNARYUNION -I/usr/local/include
>>>> LIBS: -L/usr/local/lib -lgeos
>>>> configure: creating ./config.status
>>>> config.status: creating src/Makevars
>>>> ** libs
>>>> ** arch - i386
>>>> make: Nothing to be done for `all'.
>>>> ** R
>>>> ** inst
>>>> ** preparing package for lazy loading
>>>> Loading required package: plyr
>>>> Error : package 'stringr' does not have a name space
>>>> ERROR: lazy loading failed for package ?rgeos?
>>>> * removing
>>>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/library/rgeos?
>>>> 
>>>> Warning message:
>>>> In
>>>> install.packages("/Users/nick/Desktop/downloads/rgeos",
>>>> "/Library/Frameworks/R.framework/Resources/library/", :
>>>> installation of package
>>>> '/Users/nick/Desktop/downloads/rgeos' had non-zero exit
>>>> status
>>>> 
>>>> On 10/25/11 1:32 AM, Roger Bivand wrote:
>>>>> On Mon, 24 Oct 2011, Nick Matzke wrote:
>>>>> 
>>>>>> Hi all,
>>>>>> 
>>>>>> I have a shapefile with a number of line features. I can
>>>>>> load it and plot it. Is there an easy way to downsample or
>>>>>> smooth the shapefile to a coarser resolution?
>>>>> 
>>>>> ?gSimplify in rgeos?
>>>>> 
>>>>> Roger
>>>>> 
>>>>>> 
>>>>>> Thanks so much for your help,
>>>>>> Nick
>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>> 
>>>> --
>>>> ====================================================
>>>> Nicholas J. Matzke
>>>> Ph.D. Candidate, Graduate Student Researcher
>>>> 
>>>> Huelsenbeck Lab
>>>> Center for Theoretical Evolutionary Genomics
>>>> 4151 VLSB (Valley Life Sciences Building)
>>>> Department of Integrative Biology
>>>> University of California, Berkeley
>>>> 
>>>> Graduate Student Instructor, IB200B
>>>> Principles of Phylogenetics: Ecology and Evolution
>>>> http://ib.berkeley.edu/courses/ib200b/
>>>> http://phylo.wikidot.com/
>>>> 
>>>> 
>>>> Lab websites:
>>>> http://ib.berkeley.edu/people/lab_detail.php?lab=54
>>>> http://fisher.berkeley.edu/cteg/hlab.html
>>>> Dept. personal page:
>>>> http://ib.berkeley.edu/people/students/person_detail.php?person=370
>>>> 
>>>> Lab personal page:
>>>> http://fisher.berkeley.edu/cteg/members/matzke.html
>>>> Lab phone: 510-643-6299
>>>> Dept. fax: 510-643-6264
>>>> 
>>>> Cell phone: 510-301-0179
>>>> Email: matzke at berkeley.edu
>>>> 
>>>> Mailing address:
>>>> Department of Integrative Biology
>>>> 3060 VLSB #3140
>>>> Berkeley, CA 94720-3140
>>>> 
>>>> -----------------------------------------------------
>>>> "[W]hen people thought the earth was flat, they were
>>>> wrong. When people thought the earth was spherical, they
>>>> were wrong. But if you think that thinking the earth is
>>>> spherical is just as wrong as thinking the earth is flat,
>>>> then your view is wronger than both of them put together."
>>>> 
>>>> Isaac Asimov (1989). "The Relativity of Wrong." The
>>>> Skeptical Inquirer, 14(1), 35-44. Fall 1989.
>>>> http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm
>>>> 
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> 
>>> 
>> 
> 
> -- 
> ====================================================
> Nicholas J. Matzke
> Ph.D. Candidate, Graduate Student Researcher
> 
> Huelsenbeck Lab
> Center for Theoretical Evolutionary Genomics
> 4151 VLSB (Valley Life Sciences Building)
> Department of Integrative Biology
> University of California, Berkeley
> 
> Graduate Student Instructor, IB200B
> Principles of Phylogenetics: Ecology and Evolution
> http://ib.berkeley.edu/courses/ib200b/
> http://phylo.wikidot.com/
> 
> 
> Lab websites:
> http://ib.berkeley.edu/people/lab_detail.php?lab=54
> http://fisher.berkeley.edu/cteg/hlab.html
> Dept. personal page: http://ib.berkeley.edu/people/students/person_detail.php?person=370
> Lab personal page: http://fisher.berkeley.edu/cteg/members/matzke.html
> Lab phone: 510-643-6299
> Dept. fax: 510-643-6264
> 
> Cell phone: 510-301-0179
> Email: matzke at berkeley.edu
> 
> Mailing address:
> Department of Integrative Biology
> 3060 VLSB #3140
> Berkeley, CA 94720-3140
> 
> -----------------------------------------------------
> "[W]hen people thought the earth was flat, they were wrong. When people thought the earth was spherical, they were wrong. But if you think that thinking the earth is spherical is just as wrong as thinking the earth is flat, then your view is wronger than both of them put together."
> 
> Isaac Asimov (1989). "The Relativity of Wrong." The Skeptical Inquirer, 14(1), 35-44. Fall 1989.
> http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From ashton at msu.edu  Wed Oct 26 00:04:09 2011
From: ashton at msu.edu (ashton at msu.edu)
Date: Tue, 25 Oct 2011 18:04:09 -0400
Subject: [R-sig-Geo] Lights at night data
In-Reply-To: <CABJ+Xe9oDe=90O-7iEH80H4vjBMWv4u7sSo8GcvwOZ+J3WUKjA@mail.gmail.com>
References: <CABJ+Xe9oDe=90O-7iEH80H4vjBMWv4u7sSo8GcvwOZ+J3WUKjA@mail.gmail.com>
Message-ID: <20111025180409.15634jzmw2b9j7mh@mail.msu.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111025/6c03f57e/attachment.pl>

From pierre.roudier at gmail.com  Wed Oct 26 05:50:14 2011
From: pierre.roudier at gmail.com (Pierre Roudier)
Date: Wed, 26 Oct 2011 16:50:14 +1300
Subject: [R-sig-Geo] Problems to install the raster package
Message-ID: <CADLQFsOxZH=HB4qOjK8HEQCv8hchvtcs_vd10skYaMz8zsDO5w@mail.gmail.com>

Hi,

I got a problem when trying to install the raster package on our cluster.

I'm using the following synthax (I also unsuccessfully tried with a
local tar.gz archive):

install.package('raster', repos = "http://cran.stat.auckland.ac.nz",
lib = Sys.getenv("TMP"))

But I'm getting the following error:

Error : .onLoad failed in loadNamespace() for 'raster', details:
  call: gzfile(file, "r")
  error: cannot open the connection
In addition: Warning message:
In gzfile(file, "r") :
  cannot open compressed file '', probable reason 'No such file or directory'
Error: package/namespace load failed for 'raster'
Execution halted

Here's the sessionInfo():

R version 2.13.0 (2011-04-13)
Platform: x86_64-redhat-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.iso885915       LC_NUMERIC=C
 [3] LC_TIME=en_US.iso885915        LC_COLLATE=en_US.iso885915
 [5] LC_MONETARY=C                  LC_MESSAGES=en_US.iso885915
 [7] LC_PAPER=en_US.iso885915       LC_NAME=C
 [9] LC_ADDRESS=C                   LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.iso885915 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

Any help would be most appreciated,

Pierre

-- 
Scientist
Landcare Research, New Zealand


From pierre.roudier at gmail.com  Wed Oct 26 05:51:23 2011
From: pierre.roudier at gmail.com (Pierre Roudier)
Date: Wed, 26 Oct 2011 16:51:23 +1300
Subject: [R-sig-Geo] Problems to install the raster package
In-Reply-To: <CADLQFsOxZH=HB4qOjK8HEQCv8hchvtcs_vd10skYaMz8zsDO5w@mail.gmail.com>
References: <CADLQFsOxZH=HB4qOjK8HEQCv8hchvtcs_vd10skYaMz8zsDO5w@mail.gmail.com>
Message-ID: <CADLQFsNJ4RRiWxywSOQy702eNF=d45MnPjkgXGpmrSvUcswapg@mail.gmail.com>

Just to add a detail: the installation of the sp package, with a
similar synthax, is working.

2011/10/26 Pierre Roudier <pierre.roudier at gmail.com>:
> Hi,
>
> I got a problem when trying to install the raster package on our cluster.
>
> I'm using the following synthax (I also unsuccessfully tried with a
> local tar.gz archive):
>
> install.package('raster', repos = "http://cran.stat.auckland.ac.nz",
> lib = Sys.getenv("TMP"))
>
> But I'm getting the following error:
>
> Error : .onLoad failed in loadNamespace() for 'raster', details:
> ?call: gzfile(file, "r")
> ?error: cannot open the connection
> In addition: Warning message:
> In gzfile(file, "r") :
> ?cannot open compressed file '', probable reason 'No such file or directory'
> Error: package/namespace load failed for 'raster'
> Execution halted
>
> Here's the sessionInfo():
>
> R version 2.13.0 (2011-04-13)
> Platform: x86_64-redhat-linux-gnu (64-bit)
>
> locale:
> ?[1] LC_CTYPE=en_US.iso885915 ? ? ? LC_NUMERIC=C
> ?[3] LC_TIME=en_US.iso885915 ? ? ? ?LC_COLLATE=en_US.iso885915
> ?[5] LC_MONETARY=C ? ? ? ? ? ? ? ? ?LC_MESSAGES=en_US.iso885915
> ?[7] LC_PAPER=en_US.iso885915 ? ? ? LC_NAME=C
> ?[9] LC_ADDRESS=C ? ? ? ? ? ? ? ? ? LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.iso885915 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> Any help would be most appreciated,
>
> Pierre
>
> --
> Scientist
> Landcare Research, New Zealand
>



-- 
Scientist
Landcare Research, New Zealand


From pierre.roudier at gmail.com  Wed Oct 26 05:55:52 2011
From: pierre.roudier at gmail.com (Pierre Roudier)
Date: Wed, 26 Oct 2011 16:55:52 +1300
Subject: [R-sig-Geo] "package 'stringr' does not have a name space"
In-Reply-To: <4EA7178F.5040709@berkeley.edu>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
	<4EA7178F.5040709@berkeley.edu>
Message-ID: <CADLQFsOnqDYCxMNNeMah-1jUJwFNt4+Xv687-nbRvQgAJ02PPg@mail.gmail.com>

Hi Nick,

stringr requires a R version >= 2.11, while you're running 2.10 (very
old version). I'd upgrade R first and see how it goes.

HTH,

Pierre

2011/10/26 Nick Matzke <matzke at berkeley.edu>:
> Hi all,
>
> I have almost gotten rgeos to install, however I'm getting a peculiar error
> about a (successfully installed) other package, stringr:
>
> "Error : package 'stringr' does not have a name space"
>
> I have asked the r-sig-geo list, but this error looks like a more generic
> one, perhaps there is some simple command I could add to stringr to get the
> namespace correct?
>
> Any ideas much appreciated!
>
> Cheers,
> Nick
>
>
> PS Full error message below...yes, I'm still on Intel Mac OS X 10.4 and thus
> R 2.10.1, can't be helped at the moment...
>
> =========================================
>> sessionInfo()
> R version 2.10.1 (2009-12-14)
> i386-apple-darwin8.11.1
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats ? ? grDevices utils ? ? datasets ?graphics methods ? base
>
> other attached packages:
> [1] stringr_0.2 plyr_0.1.9
>
> loaded via a namespace (and not attached):
> [1] tools_2.10.1
>
>
>> install.packages("/Users/nick/Desktop/downloads/rgeos",
>
> "/Library/Frameworks/R.framework/Resources/library/", NULL, type='source',
> + configure.args="--with-geos-config=/usr/local/bin/geos-config")
> WARNING: ignoring environment value of R_HOME
> Loading ~/.Rprofile...
> Currently viewed PATH:
> /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs:/usr/texbin:/Applications/dssp:/Library/Frameworks/PROJ.framework/:/Library/Frameworks/PROJ.framework/Programs:/Library/Frameworks/PROJ.framework/Versions/4.6/Headers:/Library/Frameworks/GDAL.framework/Versions/1.6/Programs
> * installing *source* package ?rgeos? ...
> geos-config: /usr/local/bin/geos-config
> GEOS: 3.2.3
> CPPFLAGS: -DHAVEUNARYUNION -I/usr/local/include
> LIBS: -L/usr/local/lib -lgeos
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> ** arch - i386
> make: Nothing to be done for `all'.
> ** R
> ** inst
> ** preparing package for lazy loading
> Loading required package: plyr
> Error : package 'stringr' does not have a name space
> ERROR: lazy loading failed for package ?rgeos?
> * removing
> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/library/rgeos?
> Warning message:
> In install.packages("/Users/nick/Desktop/downloads/rgeos",
> "/Library/Frameworks/R.framework/Resources/library/", ?:
> ?installation of package '/Users/nick/Desktop/downloads/rgeos' had non-zero
> exit status
>
>
>
> --
> ====================================================
> Nicholas J. Matzke
> Ph.D. Candidate, Graduate Student Researcher
>
> Huelsenbeck Lab
> Center for Theoretical Evolutionary Genomics
> 4151 VLSB (Valley Life Sciences Building)
> Department of Integrative Biology
> University of California, Berkeley
>
> Graduate Student Instructor, IB200B
> Principles of Phylogenetics: Ecology and Evolution
> http://ib.berkeley.edu/courses/ib200b/
> http://phylo.wikidot.com/
>
>
> Lab websites:
> http://ib.berkeley.edu/people/lab_detail.php?lab=54
> http://fisher.berkeley.edu/cteg/hlab.html
> Dept. personal page:
> http://ib.berkeley.edu/people/students/person_detail.php?person=370
> Lab personal page: http://fisher.berkeley.edu/cteg/members/matzke.html
> Lab phone: 510-643-6299
> Dept. fax: 510-643-6264
>
> Cell phone: 510-301-0179
> Email: matzke at berkeley.edu
>
> Mailing address:
> Department of Integrative Biology
> 3060 VLSB #3140
> Berkeley, CA 94720-3140
>
> -----------------------------------------------------
> "[W]hen people thought the earth was flat, they were wrong. When people
> thought the earth was spherical, they were wrong. But if you think that
> thinking the earth is spherical is just as wrong as thinking the earth is
> flat, then your view is wronger than both of them put together."
>
> Isaac Asimov (1989). "The Relativity of Wrong." The Skeptical Inquirer,
> 14(1), 35-44. Fall 1989.
> http://chem.tufts.edu/AnswersInScience/RelativityofWrong.htm
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Scientist
Landcare Research, New Zealand


From hadley at rice.edu  Wed Oct 26 06:14:48 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Wed, 26 Oct 2011 04:14:48 +0000
Subject: [R-sig-Geo] downsampling a lines shapefile?
In-Reply-To: <alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
Message-ID: <CABdHhvFFPkHsoO8VoLU6Vo+Yj6e1MG3paxz923wiur1WEx1eew@mail.gmail.com>

>> I have a shapefile with a number of line features. ?I can load it and plot
>> it. ?Is there an easy way to downsample or smooth the shapefile to a coarser
>> resolution?
>
> ?gSimplify in rgeos?

Is there a reason that gSimplify doesn't default to a topology
preserving simplification?

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From moshersteven at gmail.com  Wed Oct 26 08:52:13 2011
From: moshersteven at gmail.com (steven mosher)
Date: Tue, 25 Oct 2011 23:52:13 -0700
Subject: [R-sig-Geo] Lights at night data
In-Reply-To: <CABJ+Xe9oDe=90O-7iEH80H4vjBMWv4u7sSo8GcvwOZ+J3WUKjA@mail.gmail.com>
References: <CABJ+Xe9oDe=90O-7iEH80H4vjBMWv4u7sSo8GcvwOZ+J3WUKjA@mail.gmail.com>
Message-ID: <CAFFLneQ56HRBXjuLPOuJ1B04jFUVGB-y+Ay4o3Od_jdeA44c3A@mail.gmail.com>

Marco  as noted this data is only available in 30 arcseconds which is
a sensor limitation ( 2.7km pixel.. there abouts)

have a look at the radiance calibrated version

"http://www.ngdc.noaa.gov/dmsp/data/radcal/F16_2006_radiance.tgz"

basically, by fiddling  with the gain of the sensor they are able to
detect much lower level lights
and also avoid some of the over saturation you get over big cities...
it basically gives you a wider dynamic range

I think they may have this in a time series  version.. write the PI he
is very responsive.

Steve


On Tue, Oct 25, 2011 at 10:00 AM, Marco Girardello
<marco.girardello99 at gmail.com> wrote:
> Dear R-geo users,
>
> I was wondering whether you you have any suggestions on where to find
> geospatialdata on lights at night. I have managed to find some the
> excellent time series data available on the NOAA website:
>
> http://ngdc.noaa.gov/dmsp/downloadV4composites.html
>
> The dataset is available at a resolution of 1km, but I would be
> interested in something at a higher resolution (possibly 100m) for the
> Europe/ the UK. I would interested in either time series data or
> shapshots taken over a certain period of time. Any help would be
> greatly appreciated!
>
> Best wishes,
>
> Marco Girardello
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From moshersteven at gmail.com  Wed Oct 26 08:53:07 2011
From: moshersteven at gmail.com (steven mosher)
Date: Tue, 25 Oct 2011 23:53:07 -0700
Subject: [R-sig-Geo] ModisDownload
In-Reply-To: <021F462EDC7F2B42A7038E9F9D4782612117FED31A@itcnt27.itc.nl>
References: <021F462EDC7F2B42A7038E9F9D4782612117FED31A@itcnt27.itc.nl>
Message-ID: <CAFFLneSQvtW0LxHuWQ9txKRRYL8AAdM0D4wpM1sdSwH+q3q2_w@mail.gmail.com>

perfect.. Just what I needed

On Mon, Oct 24, 2011 at 8:06 AM, Babak Naimi <naimi at itc.nl> wrote:
> Dear list,
>
> This might be interesting for you. I implemented an R function to automate download, mosaic, and projecting of MODIS images. In the following link you will find the instruction and details on how to use this function:
> http://r-gis.net/?q=ModisDownload
>
> Thanks Tom Hengel, as his script on http://spatial-analyst.net made the main core of the ModisDownload function.
>
> Best regards,
>
> Babak Naimi
> PhD Candidate, Natural Resources Department,
> Faculty of Geo-Information Science and Earth Observations (ITC), University of Twente,
> P.O. Box 217, 7500 AE Enschede, The Netherlands
> Tel: +31 53 4874212
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From mohammedrashadkm at gmail.com  Wed Oct 26 09:35:44 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Wed, 26 Oct 2011 13:05:44 +0530
Subject: [R-sig-Geo] Random Forest Classifier
Message-ID: <CANNqv9fibMsnb6_ZS1YfK50drk-usfOv=JpSou6+VkFTC-0n=Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111026/576bfbc5/attachment.pl>

From Roger.Bivand at nhh.no  Wed Oct 26 10:54:23 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 26 Oct 2011 10:54:23 +0200
Subject: [R-sig-Geo] downsampling a lines shapefile?
In-Reply-To: <CABdHhvFFPkHsoO8VoLU6Vo+Yj6e1MG3paxz923wiur1WEx1eew@mail.gmail.com>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
	<CABdHhvFFPkHsoO8VoLU6Vo+Yj6e1MG3paxz923wiur1WEx1eew@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1110261043400.14519@reclus.nhh.no>

On Wed, 26 Oct 2011, Hadley Wickham wrote:

>>> I have a shapefile with a number of line features. ?I can load it and plot
>>> it. ?Is there an easy way to downsample or smooth the shapefile to a coarser
>>> resolution?
>>
>> ?gSimplify in rgeos?
>
> Is there a reason that gSimplify doesn't default to a topology
> preserving simplification?

Hi Hadley,

GEOS is neutral, and the GEOS nomenclature is misleading IMO. Because the 
process treats each ring (polygons) separately, all that is preserved are 
the nodes where three rings touch, but not the boundaries between two 
polygons, which may generate empty slivers, or overlap. I would have taken 
the term to imply that if input rings shared all boundary points between 
nodes, then they would be simplified identically, but this is not the 
case. To get this (desirable) behaviour, you need a topological vector 
GIS, like GRASS. Since I feel that the GEOS name is misleading, the 
default is FALSE, but I'm open to better ideas.

Roger

>
> Hadley
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From thi_veloso at yahoo.com.br  Wed Oct 26 12:49:29 2011
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Wed, 26 Oct 2011 03:49:29 -0700 (PDT)
Subject: [R-sig-Geo] ModisDownload
In-Reply-To: <021F462EDC7F2B42A7038E9F9D4782612117FED31A@itcnt27.itc.nl>
Message-ID: <1319626169.66728.YahooMailClassic@web161402.mail.bf1.yahoo.com>

  Dear Babak,

  Thank you very much for sharing your script with the list. It is going to be really useful to me!

  Best wishes,

  Thiago.

--- On Mon, 24/10/11, Babak Naimi <naimi at itc.nl> wrote:

> From: Babak Naimi <naimi at itc.nl>
> Subject: [R-sig-Geo] ModisDownload
> To: "'r-sig-geo at r-project.org'" <r-sig-geo at r-project.org>
> Date: Monday, 24 October, 2011, 13:06
> Dear list,
> 
> This might be interesting for you. I implemented an R
> function to automate download, mosaic, and projecting of
> MODIS images. In the following link you will find the
> instruction and details on how to use this function:
> http://r-gis.net/?q=ModisDownload
> 
> Thanks Tom Hengel, as his script on http://spatial-analyst.net made the main core of the
> ModisDownload function.
> 
> Best regards,
> 
> Babak Naimi
> PhD Candidate, Natural Resources Department,
> Faculty of Geo-Information Science and Earth Observations
> (ITC), University of Twente, 
> P.O. Box 217, 7500 AE Enschede, The Netherlands
> Tel: +31 53 4874212
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From horning at amnh.org  Wed Oct 26 14:50:32 2011
From: horning at amnh.org (Ned Horning)
Date: Wed, 26 Oct 2011 08:50:32 -0400
Subject: [R-sig-Geo] Random Forest Classifier
In-Reply-To: <CANNqv9fibMsnb6_ZS1YfK50drk-usfOv=JpSou6+VkFTC-0n=Q@mail.gmail.com>
References: <CANNqv9fibMsnb6_ZS1YfK50drk-usfOv=JpSou6+VkFTC-0n=Q@mail.gmail.com>
Message-ID: <4EA80218.30803@amnh.org>

Hi Mohammed,

I recently posted some random forests R scripts and guides on our web
site:http://biodiversityinformatics.amnh.org/. On the site go to Open
Source Resources =>  CBC Developed Resources. If you download and use
these tools I would appreciate your feedback. I still need to upload
this link to the OSGeo Educational Content Inventory.

I have had very good luck using random forests for classification. I
prefer random forests classification much more than single decision
trees if I'm using many predictor variables. Regression is a little more
problematic but applying the correction to reduce the bias at the
extreme values seems to help.

There are also classification and regression scripts to apply random
forests to segmented images but those will be posted on another site in
a few weeks along with some exercises.

All the best,

Ned



On 10/26/2011 03:35 AM, Mohammed Rashad wrote:
> Hi All,
> I wrant to do Random Forest classification. I installed R, randomForest
> classifier package for R
> but dont know how to use it.
>
> Is there any Open Source Remote sensing application which do RF
> classification on satellite images?
>
> Anyone r has random forest classification example?
>
> Any language or package  example no problem.
>
> Does anyone did it in R?
> if yes how?
>
> I google RF Classification but most of them are for medical disease and
> research not for Remote Sensing


From rundel at gmail.com  Wed Oct 26 14:54:14 2011
From: rundel at gmail.com (Colin Rundel)
Date: Wed, 26 Oct 2011 08:54:14 -0400
Subject: [R-sig-Geo] downsampling a lines shapefile?
In-Reply-To: <CABdHhvFFPkHsoO8VoLU6Vo+Yj6e1MG3paxz923wiur1WEx1eew@mail.gmail.com>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
	<CABdHhvFFPkHsoO8VoLU6Vo+Yj6e1MG3paxz923wiur1WEx1eew@mail.gmail.com>
Message-ID: <27873F81-4AAD-4781-A97E-B76D751AD8F6@gmail.com>

> Is there a reason that gSimplify doesn't default to a topology
> preserving simplification?

The various geos wrapper functions were written to match the geos C api as closely as possible. Relevant functions happen to be GEOSSimplify and GEOSTopologyPreserveSimplify so the former was used as the default.

-Colin


From mariana.benitezrojas at yahoo.com  Wed Oct 26 15:53:05 2011
From: mariana.benitezrojas at yahoo.com (Mariana Benitez rojas)
Date: Wed, 26 Oct 2011 06:53:05 -0700 (PDT)
Subject: [R-sig-Geo] Fw:  "Spdep" linear regression code
In-Reply-To: <1319637123.50950.YahooMailNeo@web125019.mail.ne1.yahoo.com>
References: <1319561805.11049.YahooMailNeo@web125006.mail.ne1.yahoo.com>
	<alpine.LRH.2.00.1110251925430.11656@reclus.nhh.no>
	<1319637123.50950.YahooMailNeo@web125019.mail.ne1.yahoo.com>
Message-ID: <1319637185.77013.YahooMailNeo@web125009.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111026/cfe414bb/attachment.pl>

From Roger.Bivand at nhh.no  Wed Oct 26 16:00:47 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 26 Oct 2011 16:00:47 +0200 (CEST)
Subject: [R-sig-Geo] Fw:  "Spdep" linear regression code
In-Reply-To: <1319637185.77013.YahooMailNeo@web125009.mail.ne1.yahoo.com>
References: <1319561805.11049.YahooMailNeo@web125006.mail.ne1.yahoo.com>
	<alpine.LRH.2.00.1110251925430.11656@reclus.nhh.no>
	<1319637123.50950.YahooMailNeo@web125019.mail.ne1.yahoo.com>
	<1319637185.77013.YahooMailNeo@web125009.mail.ne1.yahoo.com>
Message-ID: <alpine.LRH.2.00.1110261600200.15195@reclus.nhh.no>

On Wed, 26 Oct 2011, Mariana Benitez rojas wrote:

>
>
> Thank you very much Roger and Dennis,
>
> I need to do spatial regression for my project on "house prices values" 
> so I will definitely need to use the wonderful "spdep" package (of 
> course the latest version 0.5-40).
>
> Along with reading more about R, I am curious to see how the statistics 
> like the "p-value" and "z-value" of auto-correlation parameters are 
> estimated. Also how "rho.se" or "lambda.se" and their covariances with 
> other coefficients are calculated in the coefficient covariance matrix 
> code so then I can understand and interpret it for myself.


The most up-to-date reference is given on the relevant help pages:

LeSage J and RK Pace (2009) Introduction to Spatial Econometrics. CRC 
Press, Boca Raton.

and the methods used for computing the standard errors vary depending on 
the method= and trs= arguments to lagsarlm() and errorsarlm() - trs= is 
not (yet) used in sacsarlm.

Roger


>
>
> Thanks for you helps,?
>
> ?
> Mariana Benitez Rojas
>
>
> Centro Federal de Educa??o Tecnol?gico (CEFET-PA)
>
>
>
> ________________________________
> From: Roger Bivand <Roger.Bivand at nhh.no>
>
> Cc: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Sent: Wednesday, October 26, 2011 1:36 AM
> Subject: Re: [R-sig-Geo] "Spdep" linear regression code
>
> On Tue, 25 Oct 2011, Mariana Benitez rojas wrote:
>
>> Dear list,
>>
>> I am trying to study the code for spatial econometrics models in the "spdep" package. The code is understandable but I have some parts that I don't? understand for example why we need to do lm(y ~ x - 1) instead of just lm(y ~ x) since in other regression models in R we supposedly are doing this way instead of reducing the x by one.
>
> You are looking at the implementation code, but do not say what version. The code is not written to be understandable, but to work - most code tries to handle corner cases. Here, the lm() function is being used on the matrix of right-hand side variables, including the intercept, to see whether the user has included aliased (very collinear) variables. Consequently, -1 is added to the formula to tell lm() not to include an intercept. If covariates are aliased, they are omitted in ML fitting.
>
>>
>> Also for "lagsarlm"
> we use three types of regression lm.base(), lm.lag() and the simple (y~1) model so I am not sure which model is being used to compare against the lm.lag() or how we get the LR statistics.
>
> The intercept-only model is used to prepare a part of the Nagelkerke pseudo-R2.
>
>> Fore "errorsarlm" and "sacsarlm" we have the same situation but using lm.target() instead of lm.lag().
>>
>
> You probably need to know more R to read the code - these sub-objects and steps are not of great interest, and do not give you the log likelihood, which is shown in the summary(), and (surprisingly) logLik() methods for sarlm objects. For LR statistics, use the LR.sarlm() function.
>
>>
>> I would be so thankful if anybody could give the answer or show me the material that I can use for my study.
>
> You have not explained what the point of your study is, as far as I can see. The functions are fitting by maximum likelihood, and doing lots
> of extra things to accommodate for example alternative methods for computing the Jacobian, and for estimating the coefficient covariance matrix. So the lines you have chosen to report are not very odd, just auxiliary regressions used in getting to the user's chosen model fit.
>
> Hope this clarifies,
>
> Roger
>
>>
>>
>>
>> ?
>> Mariana Benitez Rojas
>>
>>
>> Centro Federal de Educa??o Tecnol?gico (CEFET-PA)
>>
>> ??? [[alternative HTML version deleted]]
>>
>>
>
> -- Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From brenning at uwaterloo.ca  Wed Oct 26 16:49:13 2011
From: brenning at uwaterloo.ca (Alexander Brenning)
Date: Wed, 26 Oct 2011 10:49:13 -0400
Subject: [R-sig-Geo] Random Forest Classifier
In-Reply-To: <mailman.15.1319623204.18166.r-sig-geo@r-project.org>
References: <mailman.15.1319623204.18166.r-sig-geo@r-project.org>
Message-ID: <4EA81DE9.3060509@uwaterloo.ca>

Dear Mohammed,

there is a growing body of literature using the random forest method 
(and the related bagging technique) in remote sensing, e.g.:

Pal (2005) in Int. J. Remote Sensing
Lawrence et al. (2006) in Remote Sensing of Environment
Brenning (2009) in Remote Sensing of Environment
Knudby et al. (2010) in Remote Sensing of Environment

(see also references cited by these articles)

Random forests in R can be applied to rasters using several packages 
including RSAGA and raster. The RSAGA approach is outlined in this article:
http://www.environment.uwaterloo.ca/u/brenning/Brenning-2008-RSAGA.pdf
(Small update: use the new and more efficient 'local.function' instead 
of 'multi.local.function' in RSAGA. Note that these functions do not 
require SAGA GIS to be installed.)

I hope this helps getting you started...

Best,
   Alex



> Message: 25 Date: Wed, 26 Oct 2011 13:05:44 +0530 From: Mohammed
> Rashad <mohammedrashadkm at gmail.com> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] Random Forest Classifier Message-ID:
> <CANNqv9fibMsnb6_ZS1YfK50drk-usfOv=JpSou6+VkFTC-0n=Q at mail.gmail.com>
> Content-Type: text/plain
>
> Hi All, I wrant to do Random Forest classification. I installed R,
> randomForest classifier package for R but dont know how to use it.
>
> Is there any Open Source Remote sensing application which do RF
> classification on satellite images?
>
> Anyone r has random forest classification example?
>
> Any language or package  example no problem.
>
> Does anyone did it in R? if yes how?
>
> I google RF Classification but most of them are for medical disease
> and research not for Remote Sensing -- Regards, Mohammed Rashad K M
> M.S. (By Research) student Lab for Spatial Informatics Department of
> CSE International Institute of Information Technology Hyderabad,
> India



-- 
Alexander Brenning
brenning at uwaterloo.ca - T +1-519-888-4567 ext 35783
Department of Geography and Environmental Management
University of Waterloo
200 University Ave. W - Waterloo, ON - Canada N2L 3G1
http://www.environment.uwaterloo.ca/geography/faculty/brenning/


From mohammedrashadkm at gmail.com  Wed Oct 26 18:35:52 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Wed, 26 Oct 2011 22:05:52 +0530
Subject: [R-sig-Geo] Random Forest Classifier
In-Reply-To: <4EA80218.30803@amnh.org>
References: <CANNqv9fibMsnb6_ZS1YfK50drk-usfOv=JpSou6+VkFTC-0n=Q@mail.gmail.com>
	<4EA80218.30803@amnh.org>
Message-ID: <CANNqv9e8=4qwptn8Ztc5CQV4DhLMWEu3-OUNKfSKhzXKbPVVnw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111026/77534be4/attachment.pl>

From luca.candeloro at gmail.com  Thu Oct 27 11:40:12 2011
From: luca.candeloro at gmail.com (luca candeloro)
Date: Thu, 27 Oct 2011 11:40:12 +0200
Subject: [R-sig-Geo] =?windows-1252?q?Package_=91plotGoogleMaps=92?=
Message-ID: <CAHF6YnmJeB8ALTrpTgHeVgwFZAfZWgPKG4vRO0yLFH5wBY3ZXg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111027/915c66c1/attachment.pl>

From paul.hiemstra at knmi.nl  Thu Oct 27 11:48:16 2011
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 27 Oct 2011 09:48:16 +0000
Subject: [R-sig-Geo] =?windows-1252?q?Package_=91plotGoogleMaps=92?=
In-Reply-To: <CAHF6YnmJeB8ALTrpTgHeVgwFZAfZWgPKG4vRO0yLFH5wBY3ZXg@mail.gmail.com>
References: <CAHF6YnmJeB8ALTrpTgHeVgwFZAfZWgPKG4vRO0yLFH5wBY3ZXg@mail.gmail.com>
Message-ID: <4EA928E0.3080201@knmi.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111027/f88cfe19/attachment.pl>

From luca.candeloro at gmail.com  Thu Oct 27 12:55:14 2011
From: luca.candeloro at gmail.com (luca candeloro)
Date: Thu, 27 Oct 2011 12:55:14 +0200
Subject: [R-sig-Geo] =?windows-1252?q?Package_=91plotGoogleMaps=92?=
In-Reply-To: <CAHF6YnmgirpGy=vpypUNfB4SSh3TJHzp2XLDZw7q=hJu7mMWLw@mail.gmail.com>
References: <CAHF6YnmJeB8ALTrpTgHeVgwFZAfZWgPKG4vRO0yLFH5wBY3ZXg@mail.gmail.com>
	<4EA928E0.3080201@knmi.nl>
	<CAHF6YnmgirpGy=vpypUNfB4SSh3TJHzp2XLDZw7q=hJu7mMWLw@mail.gmail.com>
Message-ID: <CAHF6YnmX6JK=vMwNmLPSkFKfUEj_58Z9-zGyWxK6JnmjEJjbWQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111027/281c5a46/attachment.pl>

From kili at grf.bg.ac.rs  Thu Oct 27 13:16:09 2011
From: kili at grf.bg.ac.rs (kili at grf.bg.ac.rs)
Date: Thu, 27 Oct 2011 13:16:09 +0200
Subject: [R-sig-Geo] =?utf-8?q?Package_=E2=80=98plotGoogleMaps=E2=80=99?=
In-Reply-To: <CAHF6YnmX6JK=vMwNmLPSkFKfUEj_58Z9-zGyWxK6JnmjEJjbWQ@mail.gmail.com>
References: <CAHF6YnmJeB8ALTrpTgHeVgwFZAfZWgPKG4vRO0yLFH5wBY3ZXg@mail.gmail.com>
	<4EA928E0.3080201@knmi.nl>
	<CAHF6YnmgirpGy=vpypUNfB4SSh3TJHzp2XLDZw7q=hJu7mMWLw@mail.gmail.com>
	<CAHF6YnmX6JK=vMwNmLPSkFKfUEj_58Z9-zGyWxK6JnmjEJjbWQ@mail.gmail.com>
Message-ID: <06d1d82c9177163fa5c4e5a4ae2fc1f6.squirrel@mail.grf.bg.ac.rs>

I sow the problem. The problem is clear, when I look at the html it also
OK there is one polygon with holes, but browser doesn't draw it. Maybe
holes are not set to reverse directions by plotGoogleMaps. I'll try to
solve problem if it is possible, probably next week . Thank you.

Kili

> Hi,
> sorry for not being clear enough.
>
> You can download input data here:
> http://dl.dropbox.com/u/5308666/Example.zip
> It's a SpatialPolygonDataFrame made of only one municipality (4 polygons).
>
> When I use function
>
> plotGoogleMaps(example,file="exampleOut.htm")
>
> I get the file "exampleOut.htm" (you can download it here
> http://dl.dropbox.com/u/5308666/exampleOut.zip) where only one of the 4
> polygons are drawn.
>
> Hope now it's understandable,
> Luca.
>
>
>
>
>
>
> 2011/10/27 Paul Hiemstra <paul.hiemstra at knmi.nl>
>
>> **
>> On 10/27/2011 09:40 AM, luca candeloro wrote:
>>
>> I'm using function from Package ?plotGoogleMaps? to view a
>> SpatialPolygonDataFrame (italian municipalities) and I found that the
>> .htm
>> file produced loses information about administrative islands (like
>> polygons
>> inside polygon).
>> Does anyone know something about this?
>> Bye,
>> Luca.
>>
>> 	[[alternative HTML version deleted]]
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing
>> listR-sig-Geo at r-project.orghttps://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> Hi,
>>
>> Please provide a reprodicble example which shows this problem. This
>> makes
>> it much easier for us to understand what your problem exactly is and
>> help
>> you solve it.
>>
>> good luck,
>> Paul
>>
>> --
>> Paul Hiemstra, Ph.D.
>> Global Climate Division
>> Royal Netherlands Meteorological Institute (KNMI)
>> Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
>> P.O. Box 201 | 3730 AE | De Bilt
>> tel: +31 30 2206 494
>> http://intamap.geo.uu.nl/~paulhttp://nl.linkedin.com/pub/paul-hiemstra/20/30b/770
>>
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From matteo.mattiuzzi at boku.ac.at  Thu Oct 27 13:37:25 2011
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 27 Oct 2011 13:37:25 +0200
Subject: [R-sig-Geo] MODIS download
Message-ID: <4EA95E950200002700010DBE@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111027/06557396/attachment.pl>

From educheyne at avia-gis.be  Thu Oct 27 14:08:23 2011
From: educheyne at avia-gis.be (Els Ducheyne)
Date: Thu, 27 Oct 2011 14:08:23 +0200
Subject: [R-sig-Geo] MODIS download
In-Reply-To: <4EA95E950200002700010DBE@gwia2.boku.ac.at>
References: <4EA95E950200002700010DBE@gwia2.boku.ac.at>
Message-ID: <7AE12C7E-593F-4FAA-92E3-BCA98EDD1D6E@avia-gis.be>

On mac you can use the gdal framework to mosaic, reproject and crop the modis data
very fast and efficient

On 27 Oct 2011, at 13:37, Matteo Mattiuzzi wrote:

> 
> Dear list, dear Babak
> 
> I recently created a package that also downloads Modis-grid data. I was
> waiting for the communication to the list until more tests have been
> absolved. But now test could now be made by interested people. The
> package works slightly different than the script of Babak, so I hope
> that we didn?t do the work totally twice. 
> The origin of the ?getMODIS? package is also in Hengels (great thanks)
> code but the capabilities have been enhanced. 
> 
> The package has been tested with Linux and Windows 7 and it works fine,
> but tests are still going on! (At the moment wget is used for download
> the files so probably you have to install it first on your machine
> (thanks Pieter Beck for reminding me that)
> If you wish to use MRT capabilities you need to install it as well (+
> set the path to MRT!) 
> 
>> install.packages("getMODIS", repos="http://R-Forge.R-project.org")
> 
> The purpose of teh package is:
> - to get a local MODIS data archive (so only parts of the online pool)
> by simple subst. Everything what is available locally is not downloaded
> again! The main sub setting information is: Product, period and extent.
> The package can use objects from raster package, all raster* objects or
> the extent(raster*), or the ?national boundaries? file (worldHires) from
> the mapdata package as extent information.
> 
> - to use MRT capabilites  
> 
> MRT is not fully implemented yet (tested only with geographic LatLon
> and UTM projection as output. My personal priority list can be modified
> by tester whishes).
> The manual can be downloaded here:
> http://www.wuala.com/MatteoMattiuzzi/getMODIS/
> A stepwise how to is missing yet, as soon as my time allows I?ll create
> it. 
> I?m happy for any feedback!
> Matteo Mattiuzzi
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From thi_veloso at yahoo.com.br  Thu Oct 27 15:13:59 2011
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Thu, 27 Oct 2011 06:13:59 -0700 (PDT)
Subject: [R-sig-Geo] MODIS download
In-Reply-To: <4EA95E950200002700010DBE@gwia2.boku.ac.at>
Message-ID: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>

  Dear Matteo, dear Barak and dear R-colleagues,

  I am trying to use the scripts, but I am facing troubles to find the products I need - LAI (MOD15A2) and GPP (MOD17A2).

  At the "ftp://e4ftl01.cr.usgs.gov" repository, subdirectories /MOLT/MOD15A2.005/date and /MOLT/MOD17A2.005/date only show me .jpg files. No HDF images are available.

  Is there any trick to access the images or am I using the wrong url?

  Thanks in advance and best wishes,

  Thiago.

--- On Thu, 27/10/11, Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at> wrote:

> From: Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at>
> Subject: [R-sig-Geo] MODIS download
> To: r-sig-geo at r-project.org
> Date: Thursday, 27 October, 2011, 9:37
> 
> Dear list, dear Babak
>  
> I recently created a package that also downloads Modis-grid
> data. I was
> waiting for the communication to the list until more tests
> have been
> absolved. But now test could now be made by interested
> people. The
> package works slightly different than the script of Babak,
> so I hope
> that we didn?t do the work totally twice. 
> The origin of the ?getMODIS? package is also in Hengels
> (great thanks)
> code but the capabilities have been enhanced. 
>  
> The package has been tested with Linux and Windows 7 and it
> works fine,
> but tests are still going on! (At the moment wget is used
> for download
> the files so probably you have to install it first on your
> machine
> (thanks Pieter Beck for reminding me that)
> If you wish to use MRT capabilities you need to install it
> as well (+
> set the path to MRT!) 
>  
> > install.packages("getMODIS", repos="http://R-Forge.R-project.org")
>  
> The purpose of teh package is:
> - to get a local MODIS data archive (so only parts of the
> online pool)
> by simple subst. Everything what is available locally is
> not downloaded
> again! The main sub setting information is: Product, period
> and extent.
> The package can use objects from raster package, all
> raster* objects or
> the extent(raster*), or the ?national boundaries? file
> (worldHires) from
> the mapdata package as extent information.
>  
> - to use MRT capabilites? 
>  
> MRT is not fully implemented yet (tested only with
> geographic LatLon
> and UTM projection as output. My personal priority list can
> be modified
> by tester whishes).
> The manual can be downloaded here:
> http://www.wuala.com/MatteoMattiuzzi/getMODIS/
> A stepwise how to is missing yet, as soon as my time allows
> I?ll create
> it. 
> I?m happy for any feedback!
> Matteo Mattiuzzi
> 
> ??? [[alternative HTML version deleted]]
> 
> 
> -----Inline Attachment Follows-----
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Bastien.Ferland-Raymond at mrnf.gouv.qc.ca  Thu Oct 27 15:44:48 2011
From: Bastien.Ferland-Raymond at mrnf.gouv.qc.ca (Bastien.Ferland-Raymond at mrnf.gouv.qc.ca)
Date: Thu, 27 Oct 2011 09:44:48 -0400
Subject: [R-sig-Geo] problem exporting map including both google map image
 and shape polygon
Message-ID: <161DC602615F6943A19BAEA3DBF2E4B90177CB5C6579@HARFANG.intranet.mrn.gouv>


Dear R list,

I have a problem I've been working on for a while now and I'll try to explain it clearly.  It's highly visual and it would be easier to just import images, however I'm not sure I can do that on the list so I'll try to explain it well.

Here is what I'm trying to do:
1) import a satellite image from google map,
2) Put field station locations on the map,
3) Draw a polygon shape around the territory studied,
4) Automatically export the image as a (preferably) png file.

Point 4 is where my problem is.  I succeed at doing a pretty nice image using:

###
range<-qbbox(donn2$X$LATITUDE,donn2$X$LONGITUDE)
mamap<-GetMap.bbox(range$lonR,range$latR,destfile="mamap.png",maptype="satellite", size=c(500,640))
windows(width=6,height=7.68)
PlotOnStaticMap(mamap,lat=donn2$X$LATITUDE,lon=donn2$X$LONGITUDE,pch=21,col=1,bg="white",cex=1.3)

nc2 <- readShapePoly("shape/contour_carto06152.shp")
par(new=TRUE)
plot(nc2,border="blue",lwd=3)
###

I can then save this image directly in the menu : file -> save as -> png.  Which does work.  However, it's not automatic.

So I tried this way (line 3 and 9 are changed):

###
###
range<-qbbox(donn2$X$LATITUDE,donn2$X$LONGITUDE)
mamap<-GetMap.bbox(range$lonR,range$latR,destfile="mamap.png",maptype="satellite", size=c(500,640))
png(filename = "map.png",width=500, height=640 )
PlotOnStaticMap(mamap,lat=donn2$X$LATITUDE,lon=donn2$X$LONGITUDE,pch=21,col=1,bg="white",cex=1.3)

nc2 <- readShapePoly("shape/contour_carto06152.shp")
par(new=TRUE)
plot(nc2,border="blue",lwd=3)
dev.off()
###

It does save an image in my directory, however the image includes only the shape file (the territory polygon) and not the satellite image and field station location behind it.  Any idea why?

Another interesting point is that I had to use the option --  par(new=TRUE)  -- to get both the shape and the picture on the same plot.  Using the option  -- add=TRUE  --  like it is done in most example available on the internet didn't work for me (with plot(nc2,border="blue",lwd=3, add=TRUE)).  It didn't display any error message, but simply didn't had the polygon to the image.  I have a feeling the par(new=TRUE) statement is the problem.


I'm using R 2.11.0 on windows XP.


Any help would be appreciated.
Thanks!


Bastien Ferland-Raymond, M.Sc. Stat., M.Sc. Biol.
Division des orientations et projets sp?ciaux
Direction des inventaires forestiers
Minist?re des Ressources naturelles et de la Faune
880, chemin Sainte-Foy, 5e ?tage
Qu?bec (Qu?bec) G1S 4X4


From M.U.Kemp at uva.nl  Thu Oct 27 15:53:07 2011
From: M.U.Kemp at uva.nl (Kemp, Michael)
Date: Thu, 27 Oct 2011 13:53:07 +0000
Subject: [R-sig-Geo] problem exporting map including both google map
 image and shape polygon
In-Reply-To: <161DC602615F6943A19BAEA3DBF2E4B90177CB5C6579@HARFANG.intranet.mrn.gouv>
References: <161DC602615F6943A19BAEA3DBF2E4B90177CB5C6579@HARFANG.intranet.mrn.gouv>
Message-ID: <41DD650D5B3A4247AD9F423FDE9378FA298E6724@snelders.uva.nl>

Hello Bastien,

See ?png to produce png output automatically.

Kind regards,
Michael

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Bastien.Ferland-Raymond at mrnf.gouv.qc.ca
Sent: Thursday, October 27, 2011 3:45 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] problem exporting map including both google map image and shape polygon


Dear R list,

I have a problem I've been working on for a while now and I'll try to explain it clearly.  It's highly visual and it would be easier to just import images, however I'm not sure I can do that on the list so I'll try to explain it well.

Here is what I'm trying to do:
1) import a satellite image from google map,
2) Put field station locations on the map,
3) Draw a polygon shape around the territory studied,
4) Automatically export the image as a (preferably) png file.

Point 4 is where my problem is.  I succeed at doing a pretty nice image using:

###
range<-qbbox(donn2$X$LATITUDE,donn2$X$LONGITUDE)
mamap<-GetMap.bbox(range$lonR,range$latR,destfile="mamap.png",maptype="satellite", size=c(500,640))
windows(width=6,height=7.68)
PlotOnStaticMap(mamap,lat=donn2$X$LATITUDE,lon=donn2$X$LONGITUDE,pch=21,col=1,bg="white",cex=1.3)

nc2 <- readShapePoly("shape/contour_carto06152.shp")
par(new=TRUE)
plot(nc2,border="blue",lwd=3)
###

I can then save this image directly in the menu : file -> save as -> png.  Which does work.  However, it's not automatic.

So I tried this way (line 3 and 9 are changed):

###
###
range<-qbbox(donn2$X$LATITUDE,donn2$X$LONGITUDE)
mamap<-GetMap.bbox(range$lonR,range$latR,destfile="mamap.png",maptype="satellite", size=c(500,640))
png(filename = "map.png",width=500, height=640 )
PlotOnStaticMap(mamap,lat=donn2$X$LATITUDE,lon=donn2$X$LONGITUDE,pch=21,col=1,bg="white",cex=1.3)

nc2 <- readShapePoly("shape/contour_carto06152.shp")
par(new=TRUE)
plot(nc2,border="blue",lwd=3)
dev.off()
###

It does save an image in my directory, however the image includes only the shape file (the territory polygon) and not the satellite image and field station location behind it.  Any idea why?

Another interesting point is that I had to use the option --  par(new=TRUE)  -- to get both the shape and the picture on the same plot.  Using the option  -- add=TRUE  --  like it is done in most example available on the internet didn't work for me (with plot(nc2,border="blue",lwd=3, add=TRUE)).  It didn't display any error message, but simply didn't had the polygon to the image.  I have a feeling the par(new=TRUE) statement is the problem.


I'm using R 2.11.0 on windows XP.


Any help would be appreciated.
Thanks!


Bastien Ferland-Raymond, M.Sc. Stat., M.Sc. Biol.
Division des orientations et projets sp?ciaux
Direction des inventaires forestiers
Minist?re des Ressources naturelles et de la Faune
880, chemin Sainte-Foy, 5e ?tage
Qu?bec (Qu?bec) G1S 4X4

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Bastien.Ferland-Raymond at mrnf.gouv.qc.ca  Thu Oct 27 16:27:04 2011
From: Bastien.Ferland-Raymond at mrnf.gouv.qc.ca (Bastien.Ferland-Raymond at mrnf.gouv.qc.ca)
Date: Thu, 27 Oct 2011 10:27:04 -0400
Subject: [R-sig-Geo] RE : problem exporting map including both google map
 image and shape polygon
In-Reply-To: <41DD650D5B3A4247AD9F423FDE9378FA298E6724@snelders.uva.nl>
Message-ID: <161DC602615F6943A19BAEA3DBF2E4B90177CB5C657A@HARFANG.intranet.mrn.gouv>

Hello all,

Thank for the quick answer,

I feel a little bad, the answer was pretty simple, I had to change :

png(filename = "map.png",width=500, height=640 )

with

png(filename = "map.png",width=500, height=640, bg ="transparent")

It's pretty easy and was written in the help file...  Even if I red it multiple time, I skimmed this part.

Sorry and thanks for your help

Bastien


-----Message d'origine-----
De : Kemp, Michael [mailto:M.U.Kemp at uva.nl]
Envoy? : 27 octobre 2011 09:53
? : Ferland-Raymond, Bastien (DIF); r-sig-geo at r-project.org
Objet : RE: [R-sig-Geo] problem exporting map including both google map image and shape polygon

Hello Bastien,

See ?png to produce png output automatically.

Kind regards,
Michael

-----Original Message-----
From: r-sig-geo-bounces at r-project.org [mailto:r-sig-geo-bounces at r-project.org] On Behalf Of Bastien.Ferland-Raymond at mrnf.gouv.qc.ca
Sent: Thursday, October 27, 2011 3:45 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] problem exporting map including both google map image and shape polygon


Dear R list,

I have a problem I've been working on for a while now and I'll try to explain it clearly.  It's highly visual and it would be easier to just import images, however I'm not sure I can do that on the list so I'll try to explain it well.

Here is what I'm trying to do:
1) import a satellite image from google map,
2) Put field station locations on the map,
3) Draw a polygon shape around the territory studied,
4) Automatically export the image as a (preferably) png file.

Point 4 is where my problem is.  I succeed at doing a pretty nice image using:

###
range<-qbbox(donn2$X$LATITUDE,donn2$X$LONGITUDE)
mamap<-GetMap.bbox(range$lonR,range$latR,destfile="mamap.png",maptype="satellite", size=c(500,640))
windows(width=6,height=7.68)
PlotOnStaticMap(mamap,lat=donn2$X$LATITUDE,lon=donn2$X$LONGITUDE,pch=21,col=1,bg="white",cex=1.3)

nc2 <- readShapePoly("shape/contour_carto06152.shp")
par(new=TRUE)
plot(nc2,border="blue",lwd=3)
###

I can then save this image directly in the menu : file -> save as -> png.  Which does work.  However, it's not automatic.

So I tried this way (line 3 and 9 are changed):

###
###
range<-qbbox(donn2$X$LATITUDE,donn2$X$LONGITUDE)
mamap<-GetMap.bbox(range$lonR,range$latR,destfile="mamap.png",maptype="satellite", size=c(500,640))
png(filename = "map.png",width=500, height=640 )
PlotOnStaticMap(mamap,lat=donn2$X$LATITUDE,lon=donn2$X$LONGITUDE,pch=21,col=1,bg="white",cex=1.3)

nc2 <- readShapePoly("shape/contour_carto06152.shp")
par(new=TRUE)
plot(nc2,border="blue",lwd=3)
dev.off()
###

It does save an image in my directory, however the image includes only the shape file (the territory polygon) and not the satellite image and field station location behind it.  Any idea why?

Another interesting point is that I had to use the option --  par(new=TRUE)  -- to get both the shape and the picture on the same plot.  Using the option  -- add=TRUE  --  like it is done in most example available on the internet didn't work for me (with plot(nc2,border="blue",lwd=3, add=TRUE)).  It didn't display any error message, but simply didn't had the polygon to the image.  I have a feeling the par(new=TRUE) statement is the problem.


I'm using R 2.11.0 on windows XP.


Any help would be appreciated.
Thanks!


Bastien Ferland-Raymond, M.Sc. Stat., M.Sc. Biol.
Division des orientations et projets sp?ciaux
Direction des inventaires forestiers
Minist?re des Ressources naturelles et de la Faune
880, chemin Sainte-Foy, 5e ?tage
Qu?bec (Qu?bec) G1S 4X4

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From s.meyer at lmu.de  Thu Oct 27 17:12:31 2011
From: s.meyer at lmu.de (Swen Meyer)
Date: Thu, 27 Oct 2011 17:12:31 +0200
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
Message-ID: <4EA974DF.7070607@lmu.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111027/c3051b23/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Thu Oct 27 17:41:10 2011
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 27 Oct 2011 17:41:10 +0200
Subject: [R-sig-Geo] Antw: Re:  MODIS download
In-Reply-To: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
References: <4EA95E950200002700010DBE@gwia2.boku.ac.at>
	<1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
Message-ID: <4EA997B60200002700010DD3@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111027/9a16d06f/attachment.pl>

From thi_veloso at yahoo.com.br  Thu Oct 27 21:35:48 2011
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Thu, 27 Oct 2011 12:35:48 -0700 (PDT)
Subject: [R-sig-Geo] Antw: Re:  MODIS download
In-Reply-To: <4EA997B60200002700010DD3@gwia2.boku.ac.at>
Message-ID: <1319744148.58880.YahooMailClassic@web161402.mail.bf1.yahoo.com>

  Matteo,

  Thanks for the tip. The problem was in my connection. After probing the ftp again, behind a proxy, all the contents were shown (including hdf and xml files). I reported it to the IT guys and everything is fine now.
 
  However, I received an error after trying to reproduce your suggestion:

> library(getMODIS)
Loading required package: RCurl
Loading required package: bitops
> getHDF('/Users/thiago/Downloads/MODIS/images/',product="MOD17A2",tileH=10:14,tileV=7:14,startdate="2005.01.01",enddate="2006.12.31")
Loading required package: audio
No Collection spezified used the newest for MOD17A2 : 005 
 
  (it successfully download tiles V from 7 to 11 inside "first" tile H (which is 10)). Then, the error message:

  Error in dates[[z]][i, j + 1] <- HDF : replacement has length zero

  I'm running latest R version and updated packages in Mac. Below is my sessio info:

> sessionInfo()
R version 2.13.2 (2011-09-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] audio_0.1-4    getMODIS_0.2-9 RCurl_1.6-10   bitops_1.0-4.1

loaded via a namespace (and not attached):
[1] tools_2.13.2


  Any tip on what might be causing this error?

  Best wishes,

  Thiago.
  

--- On Thu, 27/10/11, Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at> wrote:

> From: Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at>
> Subject: [R-sig-Geo] Antw: Re:  MODIS download
> To: "Matteo Mattiuzzi" <matteo.mattiuzzi at boku.ac.at>, r-sig-geo at r-project.org
> Cc: "Babak Naimi" <naimi at itc.nl>
> Date: Thursday, 27 October, 2011, 13:41
> Hi, I don't know which files
> (dates/tiles) you are looking for but in:
> ftp://e4ftl01.cr.usgs.gov/MOLT/MOD15A2.005/2000.05.24/
> there are hdf
> files?
> try run:
> library(getMODIS)
> x <-
> getHDF(product="MxD15A2",tileH=19,tileV=4,startdate="2005.01.01",enddate="2005.02.01")
> x
>  
> (In ftp folders sometimes there are missing or double hdf
> files (same
> tile/date, other processing dates)...I think they are
> corrected in the
> weekly server maintenance.)
>  
> Note: Scheduled downtime every Wednesday from 8 a.m. to 12
> p.m. Central
> time.
>  
> I hope it helps.
> Matteo
>  
> 
> 
> >>> Thiago Veloso <thi_veloso at yahoo.com.br>
> 27.10.2011 15:13 >>>
> ? Dear Matteo, dear Barak and dear R-colleagues,
> 
> ? I am trying to use the scripts, but I am facing
> troubles to find the
> products I need - LAI (MOD15A2) and GPP (MOD17A2).
> 
> ? At the "ftp://e4ftl01.cr.usgs.gov" repository,
> subdirectories
> /MOLT/MOD15A2.005/date and /MOLT/MOD17A2.005/date only show
> me .jpg
> files. No HDF images are available.
> 
> ? Is there any trick to access the images or am I
> using the wrong url?
> 
> ? Thanks in advance and best wishes,
> 
> ? Thiago.
> 
> --- On Thu, 27/10/11, Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at>
> wrote:
> 
> > From: Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at>
> > Subject: [R-sig-Geo] MODIS download
> > To: r-sig-geo at r-project.org
> > Date: Thursday, 27 October, 2011, 9:37
> > 
> > Dear list, dear Babak
> >? 
> > I recently created a package that also downloads
> Modis-grid
> > data. I was
> > waiting for the communication to the list until more
> tests
> > have been
> > absolved. But now test could now be made by
> interested
> > people. The
> > package works slightly different than the script of
> Babak,
> > so I hope
> > that we didn?t do the work totally twice. 
> > The origin of the ?getMODIS? package is also in
> Hengels
> > (great thanks)
> > code but the capabilities have been enhanced. 
> >? 
> > The package has been tested with Linux and Windows 7
> and it
> > works fine,
> > but tests are still going on! (At the moment wget is
> used
> > for download
> > the files so probably you have to install it first on
> your
> > machine
> > (thanks Pieter Beck for reminding me that)
> > If you wish to use MRT capabilities you need to
> install it
> > as well (+
> > set the path to MRT!) 
> >? 
> > > install.packages("getMODIS", repos="http://R-Forge.R-project.org")
> >? 
> > The purpose of teh package is:
> > - to get a local MODIS data archive (so only parts of
> the
> > online pool)
> > by simple subst. Everything what is available locally
> is
> > not downloaded
> > again! The main sub setting information is: Product,
> period
> > and extent.
> > The package can use objects from raster package, all
> > raster* objects or
> > the extent(raster*), or the ?national boundaries?
> file
> > (worldHires) from
> > the mapdata package as extent information.
> >? 
> > - to use MRT capabilites? 
> >? 
> > MRT is not fully implemented yet (tested only with
> > geographic LatLon
> > and UTM projection as output. My personal priority
> list can
> > be modified
> > by tester whishes).
> > The manual can be downloaded here:
> > http://www.wuala.com/MatteoMattiuzzi/getMODIS/
> > A stepwise how to is missing yet, as soon as my time
> allows
> > I?ll create
> > it. 
> > I?m happy for any feedback!
> > Matteo Mattiuzzi
> > 
> >? ???[[alternative HTML version
> deleted]]
> > 
> > 
> > -----Inline Attachment Follows-----
> > 
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> 
> ??? [[alternative HTML version deleted]]
> 
> 
> -----Inline Attachment Follows-----
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From matteo.mattiuzzi at boku.ac.at  Thu Oct 27 23:23:37 2011
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 27 Oct 2011 23:23:37 +0200
Subject: [R-sig-Geo] Antw: Re:  Antw: Re:  MODIS download
Message-ID: <4EA9E7F90200002700010DFF@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111027/eae2a242/attachment.pl>

From naimi at itc.nl  Thu Oct 27 23:28:29 2011
From: naimi at itc.nl (Babak Naimi)
Date: Thu, 27 Oct 2011 23:28:29 +0200
Subject: [R-sig-Geo] MODIS download
In-Reply-To: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
References: <4EA95E950200002700010DBE@gwia2.boku.ac.at>
	<1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
Message-ID: <021F462EDC7F2B42A7038E9F9D47826121180FFCE7@itcnt27.itc.nl>

Dear Matteo,

Thanks for your nice package. Actually, I was not aware of this package. I think the ModisDownload and getHDF functions work almost the same since in both you can select a range of tiles and dates for required Modis product. The nice thing, however, about your package is that you only need to know the name of MODIS product for downloading it, while in ModisDownload you need to introduce the FTP address. In ModisDownload also I guess it is nice as by executing one command, you can download, subset, mosaic, reproject and have the images in Geotiff format. 

About wget, I think it is not necessary to have it on your machine for windows (at least for windows 7!). I used the following command inside ModisDownload and tested it on Windows and Linux. It works fine!

download.file(url,destfile=ModisName,mode='wb',method='auto',quiet=T, cacheOK=FALSE)

Best regards,
Babak



-----Original Message-----

--- On Thu, 27/10/11, Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at> wrote:

> From: Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at>
> Subject: [R-sig-Geo] MODIS download
> To: r-sig-geo at r-project.org
> Date: Thursday, 27 October, 2011, 9:37
> 
> Dear list, dear Babak
>  
> I recently created a package that also downloads Modis-grid
> data. I was
> waiting for the communication to the list until more tests
> have been
> absolved. But now test could now be made by interested
> people. The
> package works slightly different than the script of Babak,
> so I hope
> that we didn?t do the work totally twice. 
> The origin of the ?getMODIS? package is also in Hengels
> (great thanks)
> code but the capabilities have been enhanced. 
>  
> The package has been tested with Linux and Windows 7 and it
> works fine,
> but tests are still going on! (At the moment wget is used
> for download
> the files so probably you have to install it first on your
> machine
> (thanks Pieter Beck for reminding me that)
> If you wish to use MRT capabilities you need to install it
> as well (+
> set the path to MRT!) 
>  
> > install.packages("getMODIS", repos="http://R-Forge.R-project.org")
>  
> The purpose of teh package is:
> - to get a local MODIS data archive (so only parts of the
> online pool)
> by simple subst. Everything what is available locally is
> not downloaded
> again! The main sub setting information is: Product, period
> and extent.
> The package can use objects from raster package, all
> raster* objects or
> the extent(raster*), or the ?national boundaries? file
> (worldHires) from
> the mapdata package as extent information.
>  
> - to use MRT capabilites? 
>  
> MRT is not fully implemented yet (tested only with
> geographic LatLon
> and UTM projection as output. My personal priority list can
> be modified
> by tester whishes).
> The manual can be downloaded here:
> http://www.wuala.com/MatteoMattiuzzi/getMODIS/
> A stepwise how to is missing yet, as soon as my time allows
> I?ll create
> it. 
> I?m happy for any feedback!
> Matteo Mattiuzzi
> 
> ??? [[alternative HTML version deleted]]
> 
> 
> -----Inline Attachment Follows-----
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

From matteo.mattiuzzi at boku.ac.at  Fri Oct 28 09:35:05 2011
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Fri, 28 Oct 2011 09:35:05 +0200
Subject: [R-sig-Geo] Antw: RE:  MODIS download
In-Reply-To: <021F462EDC7F2B42A7038E9F9D47826121180FFCE7@itcnt27.itc.nl>
References: <4EA95E950200002700010DBE@gwia2.boku.ac.at>
	<1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<021F462EDC7F2B42A7038E9F9D47826121180FFCE7@itcnt27.itc.nl>
Message-ID: <4EAA77490200002700010E08@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/66497e9f/attachment.pl>

From sisoliveira at gmail.com  Fri Oct 28 11:29:28 2011
From: sisoliveira at gmail.com (Sandra Oliveira)
Date: Fri, 28 Oct 2011 11:29:28 +0200
Subject: [R-sig-Geo] Error: missing value where TRUE/FALSE needed, adehabitat,
	wi function
Message-ID: <CAFRkapO0aqDkqiVrLH0wh2UumBp3t67JfsNAXPuYz-6j=imQBQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/662ff8c9/attachment.pl>

From manuel.schneider at art.admin.ch  Fri Oct 28 11:31:28 2011
From: manuel.schneider at art.admin.ch (Manuel Schneider)
Date: Fri, 28 Oct 2011 09:31:28 +0000
Subject: [R-sig-Geo] Reading 8-bit palette from tif
Message-ID: <loom.20111028T110846-733@post.gmane.org>

Dear list

our mobile GPS performs very well with paletted tif. I have therefore cropped
large ortophotos to the local area of investigation and save them as tifs with
8-bit color palette from ArcGIS. The files are also attractive to be accessed
from R to be used as background in the display of results.
I can read the files easily using readGDAL. However, to display with image I
need the color table. I suceeded doing this using displayDataset from rgdal.
This looks like
im <-readGDAL(file)
cl <- displayDataset(GDAL.open(file))$col
image(im,col=cl)

My questions are:
- Is there is another, more direct way to the color palette infomation? I have
tried getColorTable() but this is giving something else.
- How can the automatic production of a plot by displayDataset be suppressed?
- How/if the 8-bit colorpalette in ArcGIS translates to any of GDALs tif options?

Any hints appreciated
Manuel


From anne-ruth.sneep at wur.nl  Fri Oct 28 13:13:24 2011
From: anne-ruth.sneep at wur.nl (Sneep, Anne-Ruth)
Date: Fri, 28 Oct 2011 13:13:24 +0200
Subject: [R-sig-Geo] help for saving kriging wieghts
Message-ID: <69BF2B69C6C24F4D8005492D53ADCF6A0CFA16F61E@scomp0537.wurnet.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/77d107b0/attachment.pl>

From carstennh at aol.com  Fri Oct 28 13:52:35 2011
From: carstennh at aol.com (Carsten Neumann)
Date: Fri, 28 Oct 2011 13:52:35 +0200
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EA974DF.7070607@lmu.de>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de>
Message-ID: <4EAA9783.8020401@aol.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/af3cf0c2/attachment.pl>

From mdsumner at gmail.com  Fri Oct 28 14:41:52 2011
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 28 Oct 2011 23:41:52 +1100
Subject: [R-sig-Geo] Reading 8-bit palette from tif
In-Reply-To: <loom.20111028T110846-733@post.gmane.org>
References: <loom.20111028T110846-733@post.gmane.org>
Message-ID: <CAAcGz9-2pL6XXbsU4oVw8gsXhxsP_X+ORyx=yu_nPRUyN8LmOQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/d7983855/attachment.pl>

From thi_veloso at yahoo.com.br  Fri Oct 28 14:43:08 2011
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Fri, 28 Oct 2011 05:43:08 -0700 (PDT)
Subject: [R-sig-Geo] ModisDownload
In-Reply-To: <021F462EDC7F2B42A7038E9F9D4782612117FED31A@itcnt27.itc.nl>
Message-ID: <1319805788.10036.YahooMailClassic@web161404.mail.bf1.yahoo.com>

  Dear Barak,

  If you are also accepting suggestions about errors, please let me share my experience with your script. I have received an error which appears to be related to a argument of package RCurl. Below, please take a look at my attempt to use your script:

> setwd("/Users/thiago/Downloads/MODIS/images/")
> source("/Users/thiago/Downloads/MODIS/ModisDownload.R")
> GPP <- "ftp://e4ftl01.cr.usgs.gov/MODIS_Composites/MOLT/MOD17A2.005/"
> MRT <- "/Applications/MRT/bin/"
> library(RCurl)
Loading required package: bitops
> library(raster)
Loading required package: sp
raster version 1.9-32 (24-October-2011)
> ModisDownload(FTP=GPP,h=c(10,14),v=c(7,14),dates=c("2010.01.01","2010.12.31"),mosaic=F,proj=F)
Error in download.file(url = paste(FTP, "/", dirs[i], "/", ModisName,  : 
  cannot open URL 'ftp://e4ftl01.cr.usgs.gov/MODIS_Composites/MOLT/MOD17A2.005//2010.01.01/-rw-r--r--  1 90  395831 Feb  4  2010 MOD17A2.A2010001.h10v07.005.2010035143552.hdf'
In addition: Warning message:
In mapCurlOptNames(names(.els), asNames = TRUE) :
  Unrecognized CURL options: ftplistonly

  Looking at the script, this line seems to be the source of the error:

  getlist <- strsplit(getURL(paste(FTP,"/",dirs[i], "/", sep=""), .opts=curlOptions(ftplistonly=TRUE)), "\r*\n")[[1]]

  And checking the arguments of curlOptions, "ftplistonly" doesn't appear to be available:

  > listCurlOptions()
  [1] "autoreferer"                "buffersize"                 "cainfo"                     "capath"                    
  [5] "closepolicy"                "connect.only"               "connecttimeout"             "connecttimeout.ms"         
  [9] "conv.from.network.function" "conv.from.utf8.function"    "conv.to.network.function"   "cookie"                    
 [13] "cookiefile"                 "cookiejar"                  "cookielist"                 "cookiesession"             
 [17] "crlf"                       "customrequest"              "debugdata"                  "debugfunction"             
 [21] "dns.cache.timeout"          "dns.use.global.cache"       "egdsocket"                  "encoding"                  
 [25] "errorbuffer"                "failonerror"                "file"                       "filetime"                  
 [29] "followlocation"             "forbid.reuse"               "fresh.connect"              "ftp.account"               
 [33] "ftp.alternative.to.user"    "ftp.create.missing.dirs"    "ftp.filemethod"             "ftp.response.timeout"      
 [37] "ftp.skip.pasv.ip"           "ftp.ssl.ccc"                "ftp.use.eprt"               "ftp.use.epsv"              
 [41] "ftpport"                    "ftpsslauth"                 "header"                     "headerdata"                
 [45] "headerfunction"             "http.content.decoding"      "http.transfer.decoding"     "http.version"              
 [49] "http200aliases"             "httpauth"                   "httpget"                    "httpheader"                
 [53] "httppost"                   "httpproxytunnel"            "ignore.content.length"      "infile"                    
 [57] "infilesize"                 "infilesize.large"           "interface"                  "ioctldata"                 
 [61] "ioctlfunction"              "ipresolve"                  "localport"                  "localportrange"            
 [65] "low.speed.limit"            "low.speed.time"             "max.recv.speed.large"       "max.send.speed.large"      
 [69] "maxconnects"                "maxfilesize"                "maxfilesize.large"          "maxredirs"                 
 [73] "netrc"                      "netrc.file"                 "nobody"                     "noprogress"                
 [77] "nosignal"                   "port"                       "post"                       "postfields"                
 [81] "postfieldsize"              "postfieldsize.large"        "postquote"                  "prequote"                  
 [85] "private"                    "progressdata"               "progressfunction"           "proxy"                     
 [89] "proxyauth"                  "proxyport"                  "proxytype"                  "proxyuserpwd"              
 [93] "put"                        "quote"                      "random.file"                "range"                     
 [97] "readdata"                   "readfunction"               "referer"                    "resume.from"               
[101] "resume.from.large"          "share"                      "sockoptdata"                "sockoptfunction"           
[105] "ssh.auth.types"             "ssh.private.keyfile"        "ssh.public.keyfile"         "ssl.cipher.list"           
[109] "ssl.ctx.data"               "ssl.ctx.function"           "ssl.sessionid.cache"        "ssl.verifyhost"            
[113] "ssl.verifypeer"             "sslcert"                    "sslcerttype"                "sslengine"                 
[117] "sslengine.default"          "sslkey"                     "sslkeytype"                 "sslversion"                
[121] "stderr"                     "tcp.nodelay"                "telnetoptions"              "timecondition"             
[125] "timeout"                    "timeout.ms"                 "timevalue"                  "transfertext"              
[129] "unrestricted.auth"          "upload"                     "url"                        "useragent"                 
[133] "userpwd"                    "verbose"                    "writedata"                  "writefunction"             
[137] "writeheader"                "writeinfo"                 

  As usual, output of sessionInfo:

> sessionInfo()
R version 2.13.2 (2011-09-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] raster_1.9-32  sp_0.9-91      RCurl_1.6-10   bitops_1.0-4.1

loaded via a namespace (and not attached):
[1] grid_2.13.2     lattice_0.19-33

  Any tips?

  Thank you and best wishes,

  Thiago.  

--- On Mon, 24/10/11, Babak Naimi <naimi at itc.nl> wrote:

> From: Babak Naimi <naimi at itc.nl>
> Subject: [R-sig-Geo] ModisDownload
> To: "'r-sig-geo at r-project.org'" <r-sig-geo at r-project.org>
> Date: Monday, 24 October, 2011, 13:06
> Dear list,
> 
> This might be interesting for you. I implemented an R
> function to automate download, mosaic, and projecting of
> MODIS images. In the following link you will find the
> instruction and details on how to use this function:
> http://r-gis.net/?q=ModisDownload
> 
> Thanks Tom Hengel, as his script on http://spatial-analyst.net made the main core of the
> ModisDownload function.
> 
> Best regards,
> 
> Babak Naimi
> PhD Candidate, Natural Resources Department,
> Faculty of Geo-Information Science and Earth Observations
> (ITC), University of Twente, 
> P.O. Box 217, 7500 AE Enschede, The Netherlands
> Tel: +31 53 4874212
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From carstennh at aol.com  Fri Oct 28 14:49:54 2011
From: carstennh at aol.com (Carsten Neumann)
Date: Fri, 28 Oct 2011 14:49:54 +0200
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EA974DF.7070607@lmu.de>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de>
Message-ID: <4EAAA4F2.70806@aol.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/628b2137/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Fri Oct 28 15:12:25 2011
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Fri, 28 Oct 2011 15:12:25 +0200
Subject: [R-sig-Geo] Antw: Re:  ModisDownload
In-Reply-To: <1319805788.10036.YahooMailClassic@web161404.mail.bf1.yahoo.com>
References: <021F462EDC7F2B42A7038E9F9D4782612117FED31A@itcnt27.itc.nl>
	<1319805788.10036.YahooMailClassic@web161404.mail.bf1.yahoo.com>
Message-ID: <4EAAC6590200002700010E22@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/4163358e/attachment.pl>

From moshersteven at gmail.com  Fri Oct 28 17:56:40 2011
From: moshersteven at gmail.com (steven mosher)
Date: Fri, 28 Oct 2011 08:56:40 -0700
Subject: [R-sig-Geo] ModisDownload
In-Reply-To: <1319805788.10036.YahooMailClassic@web161404.mail.bf1.yahoo.com>
References: <021F462EDC7F2B42A7038E9F9D4782612117FED31A@itcnt27.itc.nl>
	<1319805788.10036.YahooMailClassic@web161404.mail.bf1.yahoo.com>
Message-ID: <CAFFLneRX26RA2xEBPNm+DyPP8jwtdqxT1_Rjz0OQ9bezdDGsEQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/bbae9f0a/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Oct 28 18:00:17 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 28 Oct 2011 18:00:17 +0200
Subject: [R-sig-Geo] help for saving kriging wieghts
In-Reply-To: <69BF2B69C6C24F4D8005492D53ADCF6A0CFA16F61E@scomp0537.wurnet.nl>
References: <69BF2B69C6C24F4D8005492D53ADCF6A0CFA16F61E@scomp0537.wurnet.nl>
Message-ID: <4EAAD191.9050507@uni-muenster.de>

try:

library(gstat)
demo(weight)

It's incredibly inefficient, but does what you ask. Another approach 
would be to look at gstat::krige0, which does (global, point, universal) 
kriging in "pure" R, and might be easily modified to return weights.

Hth,

On 10/28/2011 01:13 PM, Sneep, Anne-Ruth wrote:
> Dear participants of the mailing list,
>
> Does someone know how to store the kriging weights used in the calculations made by the function krige() in Gstat in R.
> I only have found possibility to used debug.level 32 to get them printed, but I would like to store them in a variable, and use them further on in my program.
>
> Your help will be highly appreciated!
>
> Kind regards,
>
> Anne
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From zev at zevross.com  Fri Oct 28 21:58:37 2011
From: zev at zevross.com (Zev Ross)
Date: Fri, 28 Oct 2011 15:58:37 -0400
Subject: [R-sig-Geo] GSTAT predictions vs GLS
Message-ID: <4EAB096D.7060601@zevross.com>

Hi All,

I was expecting the predictions from GSTAT to be the same as a GLS model 
if the parameters and correlation structure are exactly the same but I'm 
finding they're not. Why would that be? Below is an example using the 
Meuse dataset.

Zev

data(meuse)
data(meuse.grid)
coordinates(meuse) <- ~x + y
coordinates(meuse.grid) <- ~x + y

theFormula <- "log(zinc)~sqrt(dist)"
lznr.vgm <- variogram(formula(theFormula), meuse)
lznr.fit <- fit.variogram(lznr.vgm, model = vgm(1, "Exp", 300, 1))
g <- gstat(formula=formula(theFormula), data = meuse, model = lznr.fit)


# get the coefficients so we can compare against GLS
lzn.coef<-predict(g, meuse, BLUE=c(TRUE,TRUE))

# generate the predictions using kriging with external drift
lzn.kriged <- predict(g, meuse, BLUE=FALSE)


# try to recreate what predict in GSTAT is doing using GLS
nug<-lznr.fit[1,2]
sill<-lznr.fit[1,2]+lznr.fit[2,2]
range<-lznr.fit[2,3]

# the parameters from theGLS should match exactly with the UKcoef parameters
theGLS<-gls(formula(theFormula), data=meuse, na.action=na.omit, 
correlation=corExp(c(range, nug/sill),
     form=~x+y, nugget=TRUE,fixed=TRUE), method="ML")

# confirm that the coefficients are the same

lzn.coef
summary(theGLS)$coef

# yes they are identical
 > lzn.coef
coordinates var1.pred   var1.var
(Intercept) (181072, 333611)  6.985991 0.02507861
sqrt(dist)  (181072, 333611) -2.551849 0.07302336
 > summary(theGLS)$coef
(Intercept)  sqrt(dist)
6.985991   -2.551849


# the predictions/fits are different
 > log(meuse at data$zinc[1:5]) #true data
[1] 6.929517 7.039660 6.461468 5.549076 5.594711

 > lzn.kriged at data$var1.pred[1:5] # output from kriging model
[1] 6.929517 7.039660 6.461468 5.549076 5.594711

 > theGLS$fit[1:5] # output from GLS
6.891951 6.703849 6.166895 5.873390 5.642714



-- 
Zev Ross
ZevRoss Spatial Analysis
120 N Aurora, Suite 3A
Ithaca, NY 14850
607-277-0004 (phone)
866-877-3690 (fax, toll-free)
zev at zevross.com


From tsippel at gmail.com  Fri Oct 28 23:45:28 2011
From: tsippel at gmail.com (tsippel)
Date: Fri, 28 Oct 2011 14:45:28 -0700
Subject: [R-sig-Geo] Shift coordinates in SpatialPolygonsDataFrame
Message-ID: <CANgNK74mAVm_HthPrpsZ3KRn=2FsnYGtuB2XE+E7XAp=qHVv3w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111028/ec2e4605/attachment.pl>

From naimi at itc.nl  Sat Oct 29 02:36:04 2011
From: naimi at itc.nl (Babak Naimi)
Date: Sat, 29 Oct 2011 02:36:04 +0200
Subject: [R-sig-Geo] ModisDownload
In-Reply-To: <1319805788.10036.YahooMailClassic@web161404.mail.bf1.yahoo.com>
References: <021F462EDC7F2B42A7038E9F9D4782612117FED31A@itcnt27.itc.nl>
	<1319805788.10036.YahooMailClassic@web161404.mail.bf1.yahoo.com>
Message-ID: <021F462EDC7F2B42A7038E9F9D4782612118100044@itcnt27.itc.nl>

Dear Thiago,

I checked your command, and it works fine. As Steve said, your RCurl might be old. However, I changed that line based on Matteo's suggestion,  to avoid the server connection error, and new version is uploaded on the website.

Best wishes,
Babak

-----Original Message-----
From: Thiago Veloso [mailto:thi_veloso at yahoo.com.br] 
Sent: Friday, October 28, 2011 2:43 PM
To: 'r-sig-geo at r-project.org'; Babak Naimi
Subject: Re: [R-sig-Geo] ModisDownload

  Dear Barak,

  If you are also accepting suggestions about errors, please let me share my experience with your script. I have received an error which appears to be related to a argument of package RCurl. Below, please take a look at my attempt to use your script:

> setwd("/Users/thiago/Downloads/MODIS/images/")
> source("/Users/thiago/Downloads/MODIS/ModisDownload.R")
> GPP <- "ftp://e4ftl01.cr.usgs.gov/MODIS_Composites/MOLT/MOD17A2.005/"
> MRT <- "/Applications/MRT/bin/"
> library(RCurl)
Loading required package: bitops
> library(raster)
Loading required package: sp
raster version 1.9-32 (24-October-2011)
> ModisDownload(FTP=GPP,h=c(10,14),v=c(7,14),dates=c("2010.01.01","2010.12.31"),mosaic=F,proj=F)
Error in download.file(url = paste(FTP, "/", dirs[i], "/", ModisName,  : 
  cannot open URL 'ftp://e4ftl01.cr.usgs.gov/MODIS_Composites/MOLT/MOD17A2.005//2010.01.01/-rw-r--r--  1 90  395831 Feb  4  2010 MOD17A2.A2010001.h10v07.005.2010035143552.hdf'
In addition: Warning message:
In mapCurlOptNames(names(.els), asNames = TRUE) :
  Unrecognized CURL options: ftplistonly

  Looking at the script, this line seems to be the source of the error:

  getlist <- strsplit(getURL(paste(FTP,"/",dirs[i], "/", sep=""), .opts=curlOptions(ftplistonly=TRUE)), "\r*\n")[[1]]

  And checking the arguments of curlOptions, "ftplistonly" doesn't appear to be available:

  > listCurlOptions()
  [1] "autoreferer"                "buffersize"                 "cainfo"                     "capath"                    
  [5] "closepolicy"                "connect.only"               "connecttimeout"             "connecttimeout.ms"         
  [9] "conv.from.network.function" "conv.from.utf8.function"    "conv.to.network.function"   "cookie"                    
 [13] "cookiefile"                 "cookiejar"                  "cookielist"                 "cookiesession"             
 [17] "crlf"                       "customrequest"              "debugdata"                  "debugfunction"             
 [21] "dns.cache.timeout"          "dns.use.global.cache"       "egdsocket"                  "encoding"                  
 [25] "errorbuffer"                "failonerror"                "file"                       "filetime"                  
 [29] "followlocation"             "forbid.reuse"               "fresh.connect"              "ftp.account"               
 [33] "ftp.alternative.to.user"    "ftp.create.missing.dirs"    "ftp.filemethod"             "ftp.response.timeout"      
 [37] "ftp.skip.pasv.ip"           "ftp.ssl.ccc"                "ftp.use.eprt"               "ftp.use.epsv"              
 [41] "ftpport"                    "ftpsslauth"                 "header"                     "headerdata"                
 [45] "headerfunction"             "http.content.decoding"      "http.transfer.decoding"     "http.version"              
 [49] "http200aliases"             "httpauth"                   "httpget"                    "httpheader"                
 [53] "httppost"                   "httpproxytunnel"            "ignore.content.length"      "infile"                    
 [57] "infilesize"                 "infilesize.large"           "interface"                  "ioctldata"                 
 [61] "ioctlfunction"              "ipresolve"                  "localport"                  "localportrange"            
 [65] "low.speed.limit"            "low.speed.time"             "max.recv.speed.large"       "max.send.speed.large"      
 [69] "maxconnects"                "maxfilesize"                "maxfilesize.large"          "maxredirs"                 
 [73] "netrc"                      "netrc.file"                 "nobody"                     "noprogress"                
 [77] "nosignal"                   "port"                       "post"                       "postfields"                
 [81] "postfieldsize"              "postfieldsize.large"        "postquote"                  "prequote"                  
 [85] "private"                    "progressdata"               "progressfunction"           "proxy"                     
 [89] "proxyauth"                  "proxyport"                  "proxytype"                  "proxyuserpwd"              
 [93] "put"                        "quote"                      "random.file"                "range"                     
 [97] "readdata"                   "readfunction"               "referer"                    "resume.from"               
[101] "resume.from.large"          "share"                      "sockoptdata"                "sockoptfunction"           
[105] "ssh.auth.types"             "ssh.private.keyfile"        "ssh.public.keyfile"         "ssl.cipher.list"           
[109] "ssl.ctx.data"               "ssl.ctx.function"           "ssl.sessionid.cache"        "ssl.verifyhost"            
[113] "ssl.verifypeer"             "sslcert"                    "sslcerttype"                "sslengine"                 
[117] "sslengine.default"          "sslkey"                     "sslkeytype"                 "sslversion"                
[121] "stderr"                     "tcp.nodelay"                "telnetoptions"              "timecondition"             
[125] "timeout"                    "timeout.ms"                 "timevalue"                  "transfertext"              
[129] "unrestricted.auth"          "upload"                     "url"                        "useragent"                 
[133] "userpwd"                    "verbose"                    "writedata"                  "writefunction"             
[137] "writeheader"                "writeinfo"                 

  As usual, output of sessionInfo:

> sessionInfo()
R version 2.13.2 (2011-09-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] raster_1.9-32  sp_0.9-91      RCurl_1.6-10   bitops_1.0-4.1

loaded via a namespace (and not attached):
[1] grid_2.13.2     lattice_0.19-33

  Any tips?

  Thank you and best wishes,

  Thiago.  

--- On Mon, 24/10/11, Babak Naimi <naimi at itc.nl> wrote:

> From: Babak Naimi <naimi at itc.nl>
> Subject: [R-sig-Geo] ModisDownload
> To: "'r-sig-geo at r-project.org'" <r-sig-geo at r-project.org>
> Date: Monday, 24 October, 2011, 13:06
> Dear list,
> 
> This might be interesting for you. I implemented an R
> function to automate download, mosaic, and projecting of
> MODIS images. In the following link you will find the
> instruction and details on how to use this function:
> http://r-gis.net/?q=ModisDownload
> 
> Thanks Tom Hengel, as his script on http://spatial-analyst.net made the main core of the
> ModisDownload function.
> 
> Best regards,
> 
> Babak Naimi
> PhD Candidate, Natural Resources Department,
> Faculty of Geo-Information Science and Earth Observations
> (ITC), University of Twente, 
> P.O. Box 217, 7500 AE Enschede, The Netherlands
> Tel: +31 53 4874212
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

From edzer.pebesma at uni-muenster.de  Sat Oct 29 10:32:55 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sat, 29 Oct 2011 10:32:55 +0200
Subject: [R-sig-Geo] GSTAT predictions vs GLS
In-Reply-To: <4EAB096D.7060601@zevross.com>
References: <4EAB096D.7060601@zevross.com>
Message-ID: <4EABBA37.5000205@uni-muenster.de>

Zev,

GLS only fits the trend; krige predicts trend + residual, unless you 
specify BLUE=TRUE:

 > theGLS$fit[1:5]
        1        2        3        4        5
6.891951 6.703849 6.166895 5.873390 5.642714
 > predict(g, meuse, BLUE=TRUE)[["var1.pred"]][1:5]
[generalized least squares trend estimation]
[1] 6.891951 6.703849 6.166895 5.873390 5.642714

Best regards,

On 10/28/2011 09:58 PM, Zev Ross wrote:
> Hi All,
>
> I was expecting the predictions from GSTAT to be the same as a GLS model
> if the parameters and correlation structure are exactly the same but I'm
> finding they're not. Why would that be? Below is an example using the
> Meuse dataset.
>
> Zev
>
> data(meuse)
> data(meuse.grid)
> coordinates(meuse) <- ~x + y
> coordinates(meuse.grid) <- ~x + y
>
> theFormula <- "log(zinc)~sqrt(dist)"
> lznr.vgm <- variogram(formula(theFormula), meuse)
> lznr.fit <- fit.variogram(lznr.vgm, model = vgm(1, "Exp", 300, 1))
> g <- gstat(formula=formula(theFormula), data = meuse, model = lznr.fit)
>
>
> # get the coefficients so we can compare against GLS
> lzn.coef<-predict(g, meuse, BLUE=c(TRUE,TRUE))
>
> # generate the predictions using kriging with external drift
> lzn.kriged <- predict(g, meuse, BLUE=FALSE)
>
>
> # try to recreate what predict in GSTAT is doing using GLS
> nug<-lznr.fit[1,2]
> sill<-lznr.fit[1,2]+lznr.fit[2,2]
> range<-lznr.fit[2,3]
>
> # the parameters from theGLS should match exactly with the UKcoef
> parameters
> theGLS<-gls(formula(theFormula), data=meuse, na.action=na.omit,
> correlation=corExp(c(range, nug/sill),
> form=~x+y, nugget=TRUE,fixed=TRUE), method="ML")
>
> # confirm that the coefficients are the same
>
> lzn.coef
> summary(theGLS)$coef
>
> # yes they are identical
>  > lzn.coef
> coordinates var1.pred var1.var
> (Intercept) (181072, 333611) 6.985991 0.02507861
> sqrt(dist) (181072, 333611) -2.551849 0.07302336
>  > summary(theGLS)$coef
> (Intercept) sqrt(dist)
> 6.985991 -2.551849
>
>
> # the predictions/fits are different
>  > log(meuse at data$zinc[1:5]) #true data
> [1] 6.929517 7.039660 6.461468 5.549076 5.594711
>
>  > lzn.kriged at data$var1.pred[1:5] # output from kriging model
> [1] 6.929517 7.039660 6.461468 5.549076 5.594711
>
>  > theGLS$fit[1:5] # output from GLS
> 6.891951 6.703849 6.166895 5.873390 5.642714
>
>
>

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From roman.lustrik at gmail.com  Sat Oct 29 13:35:02 2011
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Sat, 29 Oct 2011 13:35:02 +0200
Subject: [R-sig-Geo] memory leaking of some rgeos functions?
In-Reply-To: <CAHT1vpjWr63RpNiL-WxXOsx+ANtGycMQaF6TSOdxGX+Xuyb1Yw@mail.gmail.com>
References: <CAHT1vpjWr63RpNiL-WxXOsx+ANtGycMQaF6TSOdxGX+Xuyb1Yw@mail.gmail.com>
Message-ID: <CAHT1vpiKD8HQ-Bgs_0a3yxqeAmrqL96db4n9ReriHg81LWD=vw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111029/db1cd4e9/attachment.pl>

From Roger.Bivand at nhh.no  Sat Oct 29 15:07:54 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 29 Oct 2011 15:07:54 +0200
Subject: [R-sig-Geo] memory leaking of some rgeos functions?
In-Reply-To: <CAHT1vpiKD8HQ-Bgs_0a3yxqeAmrqL96db4n9ReriHg81LWD=vw@mail.gmail.com>
References: <CAHT1vpjWr63RpNiL-WxXOsx+ANtGycMQaF6TSOdxGX+Xuyb1Yw@mail.gmail.com>
	<CAHT1vpiKD8HQ-Bgs_0a3yxqeAmrqL96db4n9ReriHg81LWD=vw@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1110291439510.32458@reclus.nhh.no>

On Sat, 29 Oct 2011, Roman Lu?trik wrote:

> Dear list,
>
> I've been looking into this and it would seem that some function in rgeos,
> namely gBuffer and gDifference, are leaking memory. After the functions
> finish, they don't release RAM. I've described this behavior in this
> post<http://stackoverflow.com/questions/7927977/r-memory-leaking-using-rgeosgdifference-gbuffer>and
> would appreciate if someone (Roger, Colin?) could take a look.

Roman,

Please understand that if you choose to post on stackoverflow, you fork 
the information flow very seriously. Forcing us to go there to see what is 
happening is not OK for me. Usually, blogs and stackoverflow are 
overflowing with non-authoritative advice (which authors have not 
investigated adequately before publishing), which is often simply wrong.

Forking open source communities is a very serious choice, please don't. If 
you need to document a query, put it somewhere where follow-up comes to 
the list posting thread in which you link to the external document.

You omitted to report your GEOS version. I am running GEOS runtime 
version: 3.3.1-CAPI-1.7.1 on RHEL5 x64, and don't see abnormal behaviour, 
but also see that memory allocated in your example is freed only when R 
exits.

The R memory manager behaves differently between platforms, and is much 
less forgiving on Windows, because the underlying technology differs from 
OSX and Linux/Unix. I guess Windows users are running the CRAN rgeos/GEOS 
binary, but I am not sure what its version is - GEOS memory leaks get 
addressed in new releases, and are present, hard to fix, and generally not 
prioritised by the GEOS team - there are more pressing problems.

In reply to one SO comment, yes, we have run valgrind, but are not in a 
position to resolve issues that may be in GEOS. Where we have been able to 
see that the issue is in rgeos, it has been dealt with, but it should be 
understood that GEOS is not simple, is C++, and often does things which 
seem odd when using the recommended C API.

In general, any memory allocated in rgeos uses the R memory allocation 
system, so is potentially seen by the garbage collector, as this shows:

$ grep alloc src/*.[ch]

It may be that the objects are seen as still in use, or that we have not 
been sufficiently dilligent in destroying C++ objects in GEOS. I would 
also be hesitant to say that only gBuffer() and gDifference() are 
implicated here, because the underlying mechanisms are similar for most 
functions - as you would see if you had looked at the C source code.

So rather than expressing surprise, please do read and audit the source 
carefully, and once you have definitely found the cause, please offer a 
patch. Examples just at the R level really don't show us anything, I'm 
afraid. Perhaps look at the use of the GEOS C API in PostGIS for hints.

Hope this clarifies,

Roger

>
> Cheers,
> Roman
>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From hadley at rice.edu  Sun Oct 30 09:53:05 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Sun, 30 Oct 2011 19:53:05 +1100
Subject: [R-sig-Geo] downsampling a lines shapefile?
In-Reply-To: <alpine.LRH.2.00.1110261043400.14519@reclus.nhh.no>
References: <4EA6268C.3040400@berkeley.edu>
	<alpine.LRH.2.00.1110251028370.9333@reclus.nhh.no>
	<CABdHhvFFPkHsoO8VoLU6Vo+Yj6e1MG3paxz923wiur1WEx1eew@mail.gmail.com>
	<alpine.LRH.2.00.1110261043400.14519@reclus.nhh.no>
Message-ID: <CABdHhvFP7yok4rG5MsZ-CjZ2_A+wnKRN+L2YmQ-geYeCbBu5Hg@mail.gmail.com>

> GEOS is neutral, and the GEOS nomenclature is misleading IMO. Because the
> process treats each ring (polygons) separately, all that is preserved are
> the nodes where three rings touch, but not the boundaries between two
> polygons, which may generate empty slivers, or overlap. I would have taken
> the term to imply that if input rings shared all boundary points between
> nodes, then they would be simplified identically, but this is not the case.
> To get this (desirable) behaviour, you need a topological vector GIS, like
> GRASS. Since I feel that the GEOS name is misleading, the default is FALSE,
> but I'm open to better ideas.

Ah, thanks.  This sort of simplification has been on my to do list to
implement for a long time, but unfortunately it's pretty low priority.
 If I have to, I do simplification by hand with http://mapshaper.org/
- I've tried, with no luck, to contact the authors to find out how
they're implementing it so quickly.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From hengl at spatial-analyst.net  Sun Oct 30 11:21:35 2011
From: hengl at spatial-analyst.net (Tomislav Hengl)
Date: Sun, 30 Oct 2011 11:21:35 +0100
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EAAA4F2.70806@aol.com>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
Message-ID: <4EAD252F.9020202@spatial-analyst.net>


Carsten,

I highly recommend using the Robert Hijmans' raster package 
[http://CRAN.R-project.org/package=raster] to run such operation on a 
stack of grids (raster package is really a brilliant implementation of 
raster processing as your final code looks fairly short, and it does not 
uses so much RAM; for more info see 
[http://cran.r-project.org/web/packages/raster/vignettes/Raster.pdf]).

This is an example of how to run your stats on grid nodes in 4 lines:

 > library(raster); library(rgdal)
# list all files of interest:
 > asc_files <- list.files(pattern = glob2rx('EVAPTR_dem30m_*01.sum'))
# Read to R:
 > EtRR <- brick(lapply(asc_files, raster))
# derive a sum:
 > EtRR.sum <- aggregate(EtRR, fun=mean)
 > image(EtRR.sum)
# write back to ASCII format:
 > writeRaster(EtRR.sum, "EtRR_sum.asc")


Otherwise, SAGA GIS is also efficient in processing large grids:

 > library(RSAGA)
 > rsaga.get.usage("geostatistics_grid", 4)
library path:   C:/PROGRA~1/R/R-212~1.2/library/RSAGA/saga_vc/modules
library name:   geostatistics_grid
module name :   Statistics for Grids
Usage: 4 -GRIDS <str> [-MEAN <str>] [-MIN <str>] [-MAX <str>] [-VAR 
<str>] [-STDDEV <str>] [-STDDEVLO <str>] [-STDDEVHI <str>]
   -GRIDS:<str>          Grids
         Grid list (input)
   -MEAN:<str>           Arithmetic Mean
         Grid (optional output)
   -MIN:<str>            Minimum
         Grid (optional output)
   -MAX:<str>            Maximum
         Grid (optional output)
   -VAR:<str>            Variance
         Grid (optional output)
   -STDDEV:<str>         Standard Deviation
         Grid (optional output)
   -STDDEVLO:<str>       Mean less Standard Deviation
         Grid (optional output)
   -STDDEVHI:<str>       Mean plus Standard Deviation
         Grid (optional output)


see also: 
http://spatial-analyst.net/wiki/index.php?title=List_of_SAGA_modules

cheers,

T. Hengl
http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001


On 28-10-2011 14:49, Carsten Neumann wrote:
>    Am 27.10.2011 17:12, schrieb Swen Meyer:
>> Dear All,
>> I like to import a series of asci grids into R. It is a time series of
>> 30 years and I like to calculate the mean monthly sum value for each
>> grid node for every month of the year. This is way I?m doing this at the
>> moment.
>>
>> #read asci files
>> ####Month01
>> EtRR.asci01<-  read.asciigrid("EVAPTR_dem30m_7101.sum", as.image=FALSE,
>> plot.image=TRUE)
>> EtRR.asci01 at data$EVAPTR7101<- EtRR.asci01 at data$EVAPTR_dem30m_7101.sum
>> #1
>> EVAPTR7201<- read.asciigrid("EVAPTR_dem30m_7201.sum", as.image=FALSE,
>> plot.image=TRUE)
>> EtRR.asci01 at data$EVAPTR7201<- EVAPTR7201 at data$EVAPTR_dem30m_7201.sum
>> #2
>> EVAPTR7301<- read.asciigrid("EVAPTR_dem30m_7301.sum", as.image=FALSE,
>> plot.image=TRUE)
>> EtRR.asci01 at data$EVAPTR7301<- EVAPTR7301 at data$EVAPTR_dem30m_7301.sum
>> #3
>> .
>> .
>> .
>> #29
>> EVAPTR0001<- read.asciigrid("EVAPTR_dem30m_0001.sum", as.image=FALSE,
>> plot.image=TRUE)
>> EtRR.asci01 at data$EVAPTR0001<- EVAPTR0001 at data$EVAPTR_dem30m_0001.sum
>> #30
>>
>> # claculating the mean sum ofer 30 years
>> EtRR.asci01 at data$sum<- ((EtRR.asci01[[1]] + EtRR.asci01[[2]] +......+
>> EtRR.asci01[[30]]) /30)
>>
>> My script is working well, but it is pretty time and workspace
>> consuming. I tried to use wildcards like this:
>>
>> txt_files = list.files(pattern = 'EVAPTR_dem30m_*01.sum')
>>
>> But the result is then:
>>
>> character(0)
>>
>> Does anyone maybe have an idea how to import multiple asci-grids in a
>> faster a more elegant way?
>>
>> Thank you in advance,
>>
>> Swen
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> Dear Sven,
>
> First: wildcards with * do not work. Just use pattern = 'EVAPTR_dem30m'
> to get all files in a folder within a list.
> Second: use raster package and then function stack() to read all ascii
> grids without accessing memory.
>
> So you can simply do a layer stack with your list within two r command
> lines and without memory handling problems ;-)
>
> With Best regards
>
> Carsten
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From pgalpern at gmail.com  Mon Oct 31 02:55:00 2011
From: pgalpern at gmail.com (pgalpern)
Date: Sun, 30 Oct 2011 20:55:00 -0500
Subject: [R-sig-Geo] Matching values in the raster package
Message-ID: <4EADFFF4.4040200@gmail.com>

Hello!

Wondering if there is an efficient raster package approved way of 
comparing values to a lookup list (as one would using the %in% operator).

## Make a random raster with cell values 0 through 9 for illustration
library(raster)
randomRaster <- raster(ncol=25, nrow=25)
randomRaster[] <- floor(abs(runif(ncell(clumpyRaster))*10))

## Now make a new binary raster in which the cells with values 2, 4 or 6 
are set
## This fails probably because %in% has not been implemented!
newRaster <- randomRaster %in% c(2, 4, 6)

## My clunky alternative
newRaster <- calc(randomRaster, function(x) sapply(x, function(y) if (y 
%in% c(2, 4, 6)) return(1) else return(0)))

This works, but is messy.  Am I missing a better way?

By the way--raster package is a revolution (fine work is much appreciated).

Thanks,
Paul

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca


From moshersteven at gmail.com  Mon Oct 31 03:19:27 2011
From: moshersteven at gmail.com (steven mosher)
Date: Sun, 30 Oct 2011 19:19:27 -0700
Subject: [R-sig-Geo] Matching values in the raster package
In-Reply-To: <4EADFFF4.4040200@gmail.com>
References: <4EADFFF4.4040200@gmail.com>
Message-ID: <CAFFLneRHFRX72MaaOqe7_buLPVG+hrU1+n3P3UP13dcmS+FqLw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111030/3be3a5c9/attachment.pl>

From r.hijmans at gmail.com  Mon Oct 31 04:29:40 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 30 Oct 2011 20:29:40 -0700
Subject: [R-sig-Geo] Matching values in the raster package
In-Reply-To: <CAFFLneRHFRX72MaaOqe7_buLPVG+hrU1+n3P3UP13dcmS+FqLw@mail.gmail.com>
References: <4EADFFF4.4040200@gmail.com>
	<CAFFLneRHFRX72MaaOqe7_buLPVG+hrU1+n3P3UP13dcmS+FqLw@mail.gmail.com>
Message-ID: <CANtt_hzW8o2-pRAZSgcMhcuoWODs2bK5GTbXof9=3h_9byr6ZA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111030/9f78a301/attachment.pl>

From r.hijmans at gmail.com  Mon Oct 31 04:31:09 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 30 Oct 2011 20:31:09 -0700
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EAD252F.9020202@spatial-analyst.net>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
Message-ID: <CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111030/dbd10291/attachment.pl>

From pgalpern at gmail.com  Mon Oct 31 04:45:36 2011
From: pgalpern at gmail.com (pgalpern)
Date: Sun, 30 Oct 2011 22:45:36 -0500
Subject: [R-sig-Geo] Matching values in the raster package
In-Reply-To: <CANtt_hzW8o2-pRAZSgcMhcuoWODs2bK5GTbXof9=3h_9byr6ZA@mail.gmail.com>
References: <4EADFFF4.4040200@gmail.com>
	<CAFFLneRHFRX72MaaOqe7_buLPVG+hrU1+n3P3UP13dcmS+FqLw@mail.gmail.com>
	<CANtt_hzW8o2-pRAZSgcMhcuoWODs2bK5GTbXof9=3h_9byr6ZA@mail.gmail.com>
Message-ID: <4EAE19E0.5090903@gmail.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111030/90e47214/attachment.html>

From moshersteven at gmail.com  Mon Oct 31 05:00:55 2011
From: moshersteven at gmail.com (steven mosher)
Date: Sun, 30 Oct 2011 21:00:55 -0700
Subject: [R-sig-Geo] Matching values in the raster package
In-Reply-To: <4EAE19E0.5090903@gmail.com>
References: <4EADFFF4.4040200@gmail.com>
	<CAFFLneRHFRX72MaaOqe7_buLPVG+hrU1+n3P3UP13dcmS+FqLw@mail.gmail.com>
	<CANtt_hzW8o2-pRAZSgcMhcuoWODs2bK5GTbXof9=3h_9byr6ZA@mail.gmail.com>
	<4EAE19E0.5090903@gmail.com>
Message-ID: <CAFFLneQFvsZSj_ej2jykMzr+Vus-YvYJUUmXrPjEQ172zQE3Gg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111030/5b2e03dc/attachment.pl>

From r.hijmans at gmail.com  Mon Oct 31 05:15:06 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sun, 30 Oct 2011 21:15:06 -0700
Subject: [R-sig-Geo] Matching values in the raster package
In-Reply-To: <CAFFLneQFvsZSj_ej2jykMzr+Vus-YvYJUUmXrPjEQ172zQE3Gg@mail.gmail.com>
References: <4EADFFF4.4040200@gmail.com>
	<CAFFLneRHFRX72MaaOqe7_buLPVG+hrU1+n3P3UP13dcmS+FqLw@mail.gmail.com>
	<CANtt_hzW8o2-pRAZSgcMhcuoWODs2bK5GTbXof9=3h_9byr6ZA@mail.gmail.com>
	<4EAE19E0.5090903@gmail.com>
	<CAFFLneQFvsZSj_ej2jykMzr+Vus-YvYJUUmXrPjEQ172zQE3Gg@mail.gmail.com>
Message-ID: <CANtt_hz263yn-=mtr__e0g+9ZyC+7rT9Ld6kWWsHxqzPWj7SJA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111030/0db02ed5/attachment.pl>

From edzer.pebesma at uni-muenster.de  Mon Oct 31 09:58:37 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 31 Oct 2011 09:58:37 +0100
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
Message-ID: <4EAE633D.3030408@uni-muenster.de>

So, raster::aggregate does spatial aggregation, and calc does temporal 
aggregation when the stack reflect time. Do you see possibilities to 
extend the behaviour of raster::aggregate to generalize 
stats::aggregate, and e.g. in the temporal domain to extend/reuse 
zoo::aggregate? Besides a grouping predicate ("by"), zoo::aggregate 
allows a grouping function that works on time, giving you e.g. 
aggregations to monthly, quarterly and yearly values without effort.

I tried this approach for the classes in package spacetime, some of 
which generalize the raster time-stack but lack its powerful disk 
caching. For spatio-temporal objects this was documented here:
http://cran.r-project.org/web/packages/spacetime/vignettes/sto.pdf
and for spatial (sp) objects here:
http://cran.r-project.org/web/packages/sp/vignettes/over.pdf

Any comments welcome. Best regards,
--
Edzer

On 10/31/2011 04:31 AM, Robert J. Hijmans wrote:
> Thanks Tom,
>
> "aggregate" does spatial aggregation of cell values, whereas I think Swen
> asked for means of cell values across layers (temporal aggregation, in this
> case). I would do:
>
> library(raster)
> asc_files<- list.files(pattern = glob2rx('EVAPTR_dem30m_*01.sum'))
>
> # with multiple files, use stack rather than brick
> EtRR<- stack(asc_files)
>
> # mean values
> # EtRR.sum<- mean(EtRR)
> # or (currently faster)
> EtRR.sum<- calc(EtRR, mean)
>
> #plot(EtRR.sum)
>
> # write to geotiff (?). For speed's sake, avoid ascii files if possible
> EtRR.sum<- writeRaster(EtRR.sum, "EtRR_sum.tif")
>
> Robert
>
>
> On Sun, Oct 30, 2011 at 3:21 AM, Tomislav Hengl
> <hengl at spatial-analyst.net>wrote:
>
>>
>> Carsten,
>>
>> I highly recommend using the Robert Hijmans' raster package [
>> http://CRAN.R-project.org/**package=raster<http://CRAN.R-project.org/package=raster>]
>> to run such operation on a stack of grids (raster package is really a
>> brilliant implementation of raster processing as your final code looks
>> fairly short, and it does not uses so much RAM; for more info see [
>> http://cran.r-project.org/**web/packages/raster/vignettes/**Raster.pdf]<http://cran.r-project.org/web/packages/raster/vignettes/Raster.pdf%5D>
>> ).
>>
>> This is an example of how to run your stats on grid nodes in 4 lines:
>>
>>> library(raster); library(rgdal)
>> # list all files of interest:
>>> asc_files<- list.files(pattern = glob2rx('EVAPTR_dem30m_*01.**sum'))
>> # Read to R:
>>> EtRR<- brick(lapply(asc_files, raster))
>> # derive a sum:
>>> EtRR.sum<- aggregate(EtRR, fun=mean)
>>> image(EtRR.sum)
>> # write back to ASCII format:
>>> writeRaster(EtRR.sum, "EtRR_sum.asc")
>>
>>
>> Otherwise, SAGA GIS is also efficient in processing large grids:
>>
>>> library(RSAGA)
>>> rsaga.get.usage("**geostatistics_grid", 4)
>> library path:   C:/PROGRA~1/R/R-212~1.2/**library/RSAGA/saga_vc/modules
>> library name:   geostatistics_grid
>> module name :   Statistics for Grids
>> Usage: 4 -GRIDS<str>  [-MEAN<str>] [-MIN<str>] [-MAX<str>] [-VAR<str>]
>> [-STDDEV<str>] [-STDDEVLO<str>] [-STDDEVHI<str>]
>>   -GRIDS:<str>           Grids
>>         Grid list (input)
>>   -MEAN:<str>            Arithmetic Mean
>>         Grid (optional output)
>>   -MIN:<str>             Minimum
>>         Grid (optional output)
>>   -MAX:<str>             Maximum
>>         Grid (optional output)
>>   -VAR:<str>             Variance
>>         Grid (optional output)
>>   -STDDEV:<str>          Standard Deviation
>>         Grid (optional output)
>>   -STDDEVLO:<str>        Mean less Standard Deviation
>>         Grid (optional output)
>>   -STDDEVHI:<str>        Mean plus Standard Deviation
>>         Grid (optional output)
>>
>>
>> see also: http://spatial-analyst.net/**wiki/index.php?title=List_of_**
>> SAGA_modules<http://spatial-analyst.net/wiki/index.php?title=List_of_SAGA_modules>
>>
>> cheers,
>>
>> T. Hengl
>> http://www.wewur.wur.nl/**popups/vcard.aspx?id=HENGL001<http://www.wewur.wur.nl/popups/vcard.aspx?id=HENGL001>
>>
>>
>>
>> On 28-10-2011 14:49, Carsten Neumann wrote:
>>
>>>    Am 27.10.2011 17:12, schrieb Swen Meyer:
>>>
>>>> Dear All,
>>>> I like to import a series of asci grids into R. It is a time series of
>>>> 30 years and I like to calculate the mean monthly sum value for each
>>>> grid node for every month of the year. This is way I?m doing this at the
>>>> moment.
>>>>
>>>> #read asci files
>>>> ####Month01
>>>> EtRR.asci01<-  read.asciigrid("EVAPTR_dem30m_**7101.sum",
>>>> as.image=FALSE,
>>>> plot.image=TRUE)
>>>> EtRR.asci01 at data$EVAPTR7101<- EtRR.asci01 at data$EVAPTR_**dem30m_7101.sum
>>>> #1
>>>> EVAPTR7201<- read.asciigrid("EVAPTR_dem30m_**7201.sum", as.image=FALSE,
>>>> plot.image=TRUE)
>>>> EtRR.asci01 at data$EVAPTR7201<- EVAPTR7201 at data$EVAPTR_dem30m_**7201.sum
>>>> #2
>>>> EVAPTR7301<- read.asciigrid("EVAPTR_dem30m_**7301.sum", as.image=FALSE,
>>>> plot.image=TRUE)
>>>> EtRR.asci01 at data$EVAPTR7301<- EVAPTR7301 at data$EVAPTR_dem30m_**7301.sum
>>>> #3
>>>> .
>>>> .
>>>> .
>>>> #29
>>>> EVAPTR0001<- read.asciigrid("EVAPTR_dem30m_**0001.sum", as.image=FALSE,
>>>> plot.image=TRUE)
>>>> EtRR.asci01 at data$EVAPTR0001<- EVAPTR0001 at data$EVAPTR_dem30m_**0001.sum
>>>> #30
>>>>
>>>> # claculating the mean sum ofer 30 years
>>>> EtRR.asci01 at data$sum<- ((EtRR.asci01[[1]] + EtRR.asci01[[2]] +......+
>>>> EtRR.asci01[[30]]) /30)
>>>>
>>>> My script is working well, but it is pretty time and workspace
>>>> consuming. I tried to use wildcards like this:
>>>>
>>>> txt_files = list.files(pattern = 'EVAPTR_dem30m_*01.sum')
>>>>
>>>> But the result is then:
>>>>
>>>> character(0)
>>>>
>>>> Does anyone maybe have an idea how to import multiple asci-grids in a
>>>> faster a more elegant way?
>>>>
>>>> Thank you in advance,
>>>>
>>>> Swen
>>>>
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________**_________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>>>
>>> Dear Sven,
>>>
>>> First: wildcards with * do not work. Just use pattern = 'EVAPTR_dem30m'
>>> to get all files in a folder within a list.
>>> Second: use raster package and then function stack() to read all ascii
>>> grids without accessing memory.
>>>
>>> So you can simply do a layer stack with your list within two r command
>>> lines and without memory handling problems ;-)
>>>
>>> With Best regards
>>>
>>> Carsten
>>>
>>>
>>>
>>>
>>> ______________________________**_________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>>
>>
>> ______________________________**_________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From Roger.Bivand at nhh.no  Mon Oct 31 10:47:28 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 31 Oct 2011 10:47:28 +0100
Subject: [R-sig-Geo] memory leaking of some rgeos functions?
In-Reply-To: <alpine.LRH.2.00.1110291439510.32458@reclus.nhh.no>
References: <CAHT1vpjWr63RpNiL-WxXOsx+ANtGycMQaF6TSOdxGX+Xuyb1Yw@mail.gmail.com>
	<CAHT1vpiKD8HQ-Bgs_0a3yxqeAmrqL96db4n9ReriHg81LWD=vw@mail.gmail.com>
	<alpine.LRH.2.00.1110291439510.32458@reclus.nhh.no>
Message-ID: <alpine.LRH.2.00.1110311020080.6439@reclus.nhh.no>

On Sat, 29 Oct 2011, Roger Bivand wrote:

> On Sat, 29 Oct 2011, Roman Lu?trik wrote:
>
>> Dear list,
>> 
>> I've been looking into this and it would seem that some function in rgeos,
>> namely gBuffer and gDifference, are leaking memory. After the functions
>> finish, they don't release RAM. I've described this behavior in this
>> post<http://stackoverflow.com/questions/7927977/r-memory-leaking-using-rgeosgdifference-gbuffer>and
>> would appreciate if someone (Roger, Colin?) could take a look.
>
> Roman,

My earlier reply may have seemed bleak. I'll add some substance, and 
explain the problem. The GEOS documentation for the C API - comments in 
the header file geos_c.h, says:

"Currently you have to explicitly GEOSGeom_destroy() all GEOSGeom objects 
to avoid memory leaks, and to GEOSFree() all returned char * (unless 
const)."

The current rgeos source may be checked out from:

svn checkout svn://svn.r-forge.r-project.org/svnroot/rgeos

or browsed online. The offending example of gBuffer() calls the C function 
rgeos_buffer in src/rgeos_buffer.c, but this is only one of many affected 
functions:

https://r-forge.r-project.org/scm/viewvc.php/pkg/src/rgeos_buffer.c?view=markup&revision=267&root=rgeos

at the foot of which are calls to GEOSGeom_destroy_r() - the proper 
version of GEOSGeom_destroy() when an application handle is used, the 
non-handle interface is deprecated. The version in SVN has a loop cleaning 
the R allocated vector of GEOSGeometry* objects, which seems to perform 
OK, no crash. If we uncomment any of the direct destroy functions, we 
crash.

Both Colin and I have been loosing teeth and hair (speaking for myself 
anyway!) over this since he completed the GSoC rgeos project in September 
2010. We didn't release rgeos until March 2011 because we hoped that we 
could resolve the issue, but felt on balance that having rgeos with a 
memory leakage was better than not having it.

The challenge is to fresh eyes to try to see why the advice given in the 
documentation doesn't seem to work for us. For me under GDB on 64-bit 
RHEL5 Linux, GCC 4.1.2, it runs OK when the comments are in place, but 
removal of a comment sign, say in //GEOSGeom_destroy_r(GEOShandle, res);:

library(rgeos)
# GEOS runtime version: 3.3.1-CAPI-1.7.1
p1 = readWKT(paste("POLYGON((0 1,0.95 0.31,0.59",
   "-0.81,-0.59 -0.81,-0.95 0.31,0 1))"))
x <- gBuffer(p1,width=-0.2)

leads to:

*** glibc detected *** /home/rsb/topics/R/R2132/lib64/R/bin/exec/R: double 
free or corruption (fasttop): 0x0000000000df9a60 ***
/lib64/libc.so.6[0x3fbec7245f]
/lib64/libc.so.6(cfree+0x4b)[0x3fbec728bb]
/usr/local/lib/libgeos-3.3.1.so(_ZN4geos4geom8GeometryD0Ev+0x38)[0x2aaab516dcd8]
/usr/local/lib/libgeos_c.so.1(GEOSGeom_destroy_r+0x1f)[0x2aaab54758df]
/home/rsb/lib/r_libs/rgeos/libs/rgeos.so(rgeos_buffer+0x1b7)[0x2aaab4e85cf7]
...
(gdb) bt
#0  0x0000003fbec30265 in raise () from /lib64/libc.so.6
#1  0x0000003fbec31d10 in abort () from /lib64/libc.so.6
#2  0x0000003fbec6a99b in __libc_message () from /lib64/libc.so.6
#3  0x0000003fbec7245f in _int_free () from /lib64/libc.so.6
#4  0x0000003fbec728bb in free () from /lib64/libc.so.6
#5  0x00002aaab516dcd8 in ~auto_ptr (this=0x1183668,
     __in_chrg=<value optimized out>) at 
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/memory:259
#6  geos::geom::Geometry::~Geometry (this=0x1183668,
     __in_chrg=<value optimized out>) at Geometry.cpp:771
#7  0x00002aaab54758df in GEOSGeom_destroy_r (extHandle=0xc1d060, a=0x1980)
     at geos_ts_c.cpp:2113
#8  0x00002aaab4e85cf7 in rgeos_buffer (env=0x1837018,
     obj=<value optimized out>, byid=0x1, id=0x23ff9a8, width=0x2467648,
     quadsegs=0x2467618, capStyle=0x246ae98, joinStyle=0x246cfa8,
     mitreLimit=0x23ffb58) at rgeos_buffer.c:48

If anyone has insight into why this may be happening, and can show how we 
can follow the GEOS C API documentation, it would be extremely useful. 
Probably the answer is obvious, but fresh eyes are needed!

Roger

>
> Please understand that if you choose to post on stackoverflow, you fork the 
> information flow very seriously. Forcing us to go there to see what is 
> happening is not OK for me. Usually, blogs and stackoverflow are overflowing 
> with non-authoritative advice (which authors have not investigated adequately 
> before publishing), which is often simply wrong.
>
> Forking open source communities is a very serious choice, please don't. If 
> you need to document a query, put it somewhere where follow-up comes to the 
> list posting thread in which you link to the external document.
>
> You omitted to report your GEOS version. I am running GEOS runtime version: 
> 3.3.1-CAPI-1.7.1 on RHEL5 x64, and don't see abnormal behaviour, but also see 
> that memory allocated in your example is freed only when R exits.
>
> The R memory manager behaves differently between platforms, and is much less 
> forgiving on Windows, because the underlying technology differs from OSX and 
> Linux/Unix. I guess Windows users are running the CRAN rgeos/GEOS binary, but 
> I am not sure what its version is - GEOS memory leaks get addressed in new 
> releases, and are present, hard to fix, and generally not prioritised by the 
> GEOS team - there are more pressing problems.
>
> In reply to one SO comment, yes, we have run valgrind, but are not in a 
> position to resolve issues that may be in GEOS. Where we have been able to 
> see that the issue is in rgeos, it has been dealt with, but it should be 
> understood that GEOS is not simple, is C++, and often does things which seem 
> odd when using the recommended C API.
>
> In general, any memory allocated in rgeos uses the R memory allocation 
> system, so is potentially seen by the garbage collector, as this shows:
>
> $ grep alloc src/*.[ch]
>
> It may be that the objects are seen as still in use, or that we have not been 
> sufficiently dilligent in destroying C++ objects in GEOS. I would also be 
> hesitant to say that only gBuffer() and gDifference() are implicated here, 
> because the underlying mechanisms are similar for most functions - as you 
> would see if you had looked at the C source code.
>
> So rather than expressing surprise, please do read and audit the source 
> carefully, and once you have definitely found the cause, please offer a 
> patch. Examples just at the R level really don't show us anything, I'm 
> afraid. Perhaps look at the use of the GEOS C API in PostGIS for hints.
>
> Hope this clarifies,
>
> Roger
>
>> 
>> Cheers,
>> Roman
>> 
>> 
>> 
>> 
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From s.meyer at lmu.de  Mon Oct 31 11:51:55 2011
From: s.meyer at lmu.de (Swen Meyer)
Date: Mon, 31 Oct 2011 11:51:55 +0100
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EAE633D.3030408@uni-muenster.de>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
	<4EAE633D.3030408@uni-muenster.de>
Message-ID: <4EAE7DCB.4040900@lmu.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111031/02589a25/attachment.pl>

From oscar.perpinan at upm.es  Mon Oct 31 12:32:19 2011
From: oscar.perpinan at upm.es (Oscar =?UTF-8?B?UGVycGnDsWFu?= Lamigueiro)
Date: Mon, 31 Oct 2011 12:32:19 +0100
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EAE7DCB.4040900@lmu.de>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
	<4EAE633D.3030408@uni-muenster.de> <4EAE7DCB.4040900@lmu.de>
Message-ID: <20111031123219.498b5256@OPL-EUITI>

Hello,

I think the zApply method in raster could be useful here. For example:

library(sp)
library(raster)

## 30 rows, 84 cols, 399 layers of data
url <- "ftp://ftp.wiley.com/public/sci_tech_med/spatio_temporal_data/"
sst.dat = read.table(paste(url, "SST011970_032003.dat", sep=''), header
	= FALSE) 
sst.ll = read.table(paste(url, "SSTlonlat.dat", sep=''),
	header = FALSE)

sp <- SpatialPointsDataFrame(sst.ll, sst.dat)
gridded(sp) <- TRUE
proj4string(sp) = "+proj=longlat +datum=WGS84"
s <- brick(sp)

idx <- seq(as.Date('1970-01-01'), as.Date('2003-03-01'), by='month')
s <- setZ(s, idx)
layerNames(s) <- as.character(idx)

sMean <- zApply(s,  by = months)

Best,

Oscar.



-------------------
Oscar Perpi??n Lamigueiro
Dpto. Ingenier?a El?ctrica
EUITI-UPM

http://procomun.wordpress.com

>Dear Carsten, Tom, Robert and Edzer,
>thank you very much for your answers! And yes Robert, you are right, I 
>like to calculate the mean of raster cells across the layers. I just 
>tried the EtRR.sum<- calc(EtRR, mean)  on the layer stack.
>Unfortunately the computation of only one month is taking now longer
>than the computation of all 12 months using my old script. I will now
>have a look on Edzers proposal.
>
>Again, thank you all!
>
>Best,
>
>Swen
>
>
>Am 31.10.2011 09:58, schrieb Edzer Pebesma:
>> So, raster::aggregate does spatial aggregation, and calc does
>> temporal aggregation when the stack reflect time. Do you see
>> possibilities to extend the behaviour of raster::aggregate to
>> generalize stats::aggregate, and e.g. in the temporal domain to
>> extend/reuse zoo::aggregate? Besides a grouping predicate ("by"),
>> zoo::aggregate allows a grouping function that works on time, giving
>> you e.g. aggregations to monthly, quarterly and yearly values
>> without effort.
>>
>> I tried this approach for the classes in package spacetime, some of 
>> which generalize the raster time-stack but lack its powerful disk 
>> caching. For spatio-temporal objects this was documented here:
>> http://cran.r-project.org/web/packages/spacetime/vignettes/sto.pdf
>> and for spatial (sp) objects here:
>> http://cran.r-project.org/web/packages/sp/vignettes/over.pdf
>>
>> Any comments welcome. Best regards,
>> -- 
>> Edzer


From landis at isciences.com  Mon Oct 31 13:27:54 2011
From: landis at isciences.com (Matthew Landis)
Date: Mon, 31 Oct 2011 08:27:54 -0400
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <20111031123219.498b5256@OPL-EUITI>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
	<4EAE633D.3030408@uni-muenster.de> <4EAE7DCB.4040900@lmu.de>
	<20111031123219.498b5256@OPL-EUITI>
Message-ID: <4EAE944A.4050209@isciences.com>



On 10/31/2011 7:32 AM, Oscar Perpi?an Lamigueiro wrote:
> Hello,
>
> I think the zApply method in raster could be useful here. For example:
Oscar - that looks like a method that would be *really* useful for me.  
When the documentation says "Experimental" or "under development", how 
should I interpret that?

M

-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~
Matthew Landis, Ph.D.
Research Scientist
ISciences, LLC
61 Main St. Suite 200
Burlington VT 05401
802.864.2999
www.isciences.com
~~~~~~~~~~~~~~~~~~~~~~~~~~


From edzer.pebesma at uni-muenster.de  Mon Oct 31 14:55:27 2011
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 31 Oct 2011 14:55:27 +0100
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <20111031123219.498b5256@OPL-EUITI>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
	<4EAE633D.3030408@uni-muenster.de> <4EAE7DCB.4040900@lmu.de>
	<20111031123219.498b5256@OPL-EUITI>
Message-ID: <4EAEA8CF.40205@uni-muenster.de>

Oscar, good to see that that works (although I couldn't work out the 
logic behind the ordering of months in plot(sMean))

I think the point I wanted to make was, if a function aggregates, can it 
be made into a method instance that has the name "aggregate".

How does a user find out s/he needs zApply? Or Which or which?

Why, in zApply, did you choose the signature (x, by, fun=mean, ...) 
where aggregate has (x, by, FUN, ...) ?

I believe that adding functions adds to complexity, where adding to 
methods reduces it.

On 10/31/2011 12:32 PM, Oscar Perpi?an Lamigueiro wrote:
> Hello,
>
> I think the zApply method in raster could be useful here. For example:
>
> library(sp)
> library(raster)
>
> ## 30 rows, 84 cols, 399 layers of data
> url<- "ftp://ftp.wiley.com/public/sci_tech_med/spatio_temporal_data/"
> sst.dat = read.table(paste(url, "SST011970_032003.dat", sep=''), header
> 	= FALSE)
> sst.ll = read.table(paste(url, "SSTlonlat.dat", sep=''),
> 	header = FALSE)
>
> sp<- SpatialPointsDataFrame(sst.ll, sst.dat)
> gridded(sp)<- TRUE
> proj4string(sp) = "+proj=longlat +datum=WGS84"
> s<- brick(sp)
>
> idx<- seq(as.Date('1970-01-01'), as.Date('2003-03-01'), by='month')
> s<- setZ(s, idx)
> layerNames(s)<- as.character(idx)
>
> sMean<- zApply(s,  by = months)
>
> Best,
>
> Oscar.
>
>
>
> -------------------
> Oscar Perpi??n Lamigueiro
> Dpto. Ingenier?a El?ctrica
> EUITI-UPM
>
> http://procomun.wordpress.com
>
>> Dear Carsten, Tom, Robert and Edzer,
>> thank you very much for your answers! And yes Robert, you are right, I
>> like to calculate the mean of raster cells across the layers. I just
>> tried the EtRR.sum<- calc(EtRR, mean)  on the layer stack.
>> Unfortunately the computation of only one month is taking now longer
>> than the computation of all 12 months using my old script. I will now
>> have a look on Edzers proposal.
>>
>> Again, thank you all!
>>
>> Best,
>>
>> Swen
>>
>>
>> Am 31.10.2011 09:58, schrieb Edzer Pebesma:
>>> So, raster::aggregate does spatial aggregation, and calc does
>>> temporal aggregation when the stack reflect time. Do you see
>>> possibilities to extend the behaviour of raster::aggregate to
>>> generalize stats::aggregate, and e.g. in the temporal domain to
>>> extend/reuse zoo::aggregate? Besides a grouping predicate ("by"),
>>> zoo::aggregate allows a grouping function that works on time, giving
>>> you e.g. aggregations to monthly, quarterly and yearly values
>>> without effort.
>>>
>>> I tried this approach for the classes in package spacetime, some of
>>> which generalize the raster time-stack but lack its powerful disk
>>> caching. For spatio-temporal objects this was documented here:
>>> http://cran.r-project.org/web/packages/spacetime/vignettes/sto.pdf
>>> and for spatial (sp) objects here:
>>> http://cran.r-project.org/web/packages/sp/vignettes/over.pdf
>>>
>>> Any comments welcome. Best regards,
>>> --
>>> Edzer

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From s.meyer at lmu.de  Mon Oct 31 17:02:04 2011
From: s.meyer at lmu.de (Swen Meyer)
Date: Mon, 31 Oct 2011 17:02:04 +0100
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EAE7DCB.4040900@lmu.de>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
	<4EAE633D.3030408@uni-muenster.de> <4EAE7DCB.4040900@lmu.de>
Message-ID: <4EAEC67C.9090606@lmu.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111031/543ba63a/attachment.pl>

From tsippel at gmail.com  Mon Oct 31 17:27:12 2011
From: tsippel at gmail.com (tsippel)
Date: Mon, 31 Oct 2011 09:27:12 -0700
Subject: [R-sig-Geo] Re-scale coordinates in SpatialPolygonsDataFrame
Message-ID: <CANgNK74+ig=e_LKanDR43=W7goT+HgBPX+R2jszUnVhowYbQfA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111031/0c6b2aaa/attachment.pl>

From Roger.Bivand at nhh.no  Mon Oct 31 17:34:51 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 31 Oct 2011 17:34:51 +0100 (CET)
Subject: [R-sig-Geo] Re-scale coordinates in SpatialPolygonsDataFrame
In-Reply-To: <CANgNK74+ig=e_LKanDR43=W7goT+HgBPX+R2jszUnVhowYbQfA@mail.gmail.com>
References: <CANgNK74+ig=e_LKanDR43=W7goT+HgBPX+R2jszUnVhowYbQfA@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1110311734230.6439@reclus.nhh.no>

On Mon, 31 Oct 2011, tsippel wrote:

> I'm resubmitting this question I sent last week. Not sure if it fell
> between the cracks...but I'd be grateful for suggestions.

Did you look at:

library(sp)
?"recenter-methods"

Roger

>
> On Fri, Oct 28, 2011 at 11:39 AM, tsippel <tsippel at gmail.com> wrote:
>
>> Hi-
>> I'm a bit confused on how to rescale the range of longitudes to 0:360 in
>> an object of class SpatialPolygonsDataFrame created from a shapefile
>> originally scaled from -180:180.
>>
>>> library(maptools)
>>> world.eez<-readShapePoly(fn="C:/.../World_EEZ_v6_1_20110512")
>>> class(world.eez)
>> [1] "SpatialPolygonsDataFrame"
>> attr(,"package")
>> [1] "sp"
>>> bbox(world.eez)
>>          min       max
>> x -180.00000 180.00000
>> y  -78.57036  87.02394
>>
>> All of the data I am plotting on a world map are scaled 0:360 in
>> longitude, and I want to add the world Exclusive Economic Zones (EEZ) to
>> the map. Advice on rescaling the longitudes in my SpatialPolygonsDataFrame
>> to 0:360 would be appreciated!  The complexity of sp classes have me
>> scratching my head at the moment.
>>
>> Thanks,
>>
>> Tim
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From r.hijmans at gmail.com  Mon Oct 31 17:46:43 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 31 Oct 2011 09:46:43 -0700
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EAEA8CF.40205@uni-muenster.de>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
	<4EAE633D.3030408@uni-muenster.de> <4EAE7DCB.4040900@lmu.de>
	<20111031123219.498b5256@OPL-EUITI>
	<4EAEA8CF.40205@uni-muenster.de>
Message-ID: <CANtt_hxW8sh7yUO-n5UaNu7BwxoPrq6TBk1iAxDBxP1fm0rdeA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111031/2a693318/attachment.pl>

From r.hijmans at gmail.com  Mon Oct 31 17:49:23 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 31 Oct 2011 09:49:23 -0700
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <4EAEC67C.9090606@lmu.de>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
	<4EAE633D.3030408@uni-muenster.de> <4EAE7DCB.4040900@lmu.de>
	<4EAEC67C.9090606@lmu.de>
Message-ID: <CANtt_hwGb_o1CKHUedSvLJ5SqFjqZ52rasC5vZX0YeWhm8NdTQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111031/129f3ff8/attachment.pl>

From r.hijmans at gmail.com  Mon Oct 31 20:50:13 2011
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 31 Oct 2011 12:50:13 -0700
Subject: [R-sig-Geo] Impoting multiple asci grids into R?
In-Reply-To: <CANtt_hwGb_o1CKHUedSvLJ5SqFjqZ52rasC5vZX0YeWhm8NdTQ@mail.gmail.com>
References: <1319721239.98231.YahooMailClassic@web161421.mail.bf1.yahoo.com>
	<4EA974DF.7070607@lmu.de> <4EAAA4F2.70806@aol.com>
	<4EAD252F.9020202@spatial-analyst.net>
	<CANtt_hzV4z4OuqAWTfiy56fcBcMGSopM6k=ON5sP2DdO5MxjSA@mail.gmail.com>
	<4EAE633D.3030408@uni-muenster.de> <4EAE7DCB.4040900@lmu.de>
	<4EAEC67C.9090606@lmu.de>
	<CANtt_hwGb_o1CKHUedSvLJ5SqFjqZ52rasC5vZX0YeWhm8NdTQ@mail.gmail.com>
Message-ID: <CANtt_hzOruo0W78c3GN30OhorqrppiKFtOqhFK0XF389o8GbRA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20111031/2a72eb2c/attachment.pl>

