From ybrandvain at hotmail.com  Sun Jan  1 02:57:05 2012
From: ybrandvain at hotmail.com (Yaniv Brandvain)
Date: Sat, 31 Dec 2011 17:57:05 -0800 (PST)
Subject: [R-sig-Geo] LatLong to UTM zone and coordinates?
In-Reply-To: <alpine.LRH.2.00.1112300928530.19576@reclus.nhh.no>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<alpine.LRH.2.00.1112300928530.19576@reclus.nhh.no>
Message-ID: <1325383025810-7141437.post@n2.nabble.com>

Thanks Roger

So, what is the best way to find the correct UTM zones for each lat-long
entry when data spans zones across the globe. Once you get the right zone,
it seems straightforward to get coordinates, but I haven't found a function
that gives the right zone. But the answers from spTransform are definitely
incorrect as you move away from the equator unless you hand it the correct
zone.

yaniv

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/LatLong-to-UTM-zone-and-coordinates-tp7134592p7141437.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From albin.blaschka at standortsanalyse.net  Sun Jan  1 12:41:14 2012
From: albin.blaschka at standortsanalyse.net (Albin Blaschka)
Date: Sun, 01 Jan 2012 12:41:14 +0100
Subject: [R-sig-Geo] LatLong to UTM zone and coordinates?
In-Reply-To: <1325383025810-7141437.post@n2.nabble.com>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<alpine.LRH.2.00.1112300928530.19576@reclus.nhh.no>
	<1325383025810-7141437.post@n2.nabble.com>
Message-ID: <4F00465A.90707@standortsanalyse.net>

Am 2012-01-01 02:57, schrieb Yaniv Brandvain:

> So, what is the best way to find the correct UTM zones for each lat-long
> entry when data spans zones across the globe. Once you get the right zone,
> it seems straightforward to get coordinates, but I haven't found a function
> that gives the right zone. But the answers from spTransform are definitely
> incorrect as you move away from the equator unless you hand it the correct
> zone.
>

Hello!

Mhmm, if I understand you correctly...

The UTM system divides the surface of Earth between 80?S and 84?N 
latitude into 60 zones, each 6? of longitude in width. Zone 1 covers 
longitude 180? to 174? W; zone numbering increases eastward to zone 60 
that covers longitude 174 to 180 East.

So, quick and dirty, not thinking about special cases and so on, is this 
what you are looking for?


longitude <- 13.34

UTMzone <- (180 + longitude) / 6
UTMzone <- trunc(UTMzone)

UTMzone

Some background, if necessary: http://www.dmap.co.uk/utmworld.htm

Happy New Year!
Albin

-- 
| Albin Blaschka, Mag.rer.nat.
| Etrichstrasse 26, A-5020 Salzburg
| * www.albinblaschka.info * www.thinkanimal.info *
| - It's hard to live in the mountains, hard but not hopeless!


From albin.blaschka at standortsanalyse.net  Sun Jan  1 14:17:58 2012
From: albin.blaschka at standortsanalyse.net (Albin Blaschka)
Date: Sun, 01 Jan 2012 14:17:58 +0100
Subject: [R-sig-Geo] LatLong to UTM zone and coordinates?
In-Reply-To: <4F00465A.90707@standortsanalyse.net>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<alpine.LRH.2.00.1112300928530.19576@reclus.nhh.no>
	<1325383025810-7141437.post@n2.nabble.com>
	<4F00465A.90707@standortsanalyse.net>
Message-ID: <4F005D06.6020408@standortsanalyse.net>

Am 2012-01-01 12:41, schrieb Albin Blaschka:
> longitude <- 13.34
>
> UTMzone <- (180 + longitude) / 6
> UTMzone <- trunc(UTMzone)
>
> UTMzone

Ups, sorry, a little too quick and too dirty this was...
This should be now the correct answer, still not considering any special 
cases...

longitude <- seq(-180,180)
UTMzone <- (180 + longitude) / 6
UTMzone <- trunc(UTMzone)
UTMzone <- UTMzone + 1
UTMzone

Sorry for the noise,
regards,
Albin

-- 
| Albin Blaschka, Mag.rer.nat.
| Etrichstrasse 26, A-5020 Salzburg
| * www.albinblaschka.info * www.thinkanimal.info *
| - It's hard to live in the mountains, hard but not hopeless!


From tom.gottfried at tum.de  Sun Jan  1 15:11:12 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Sun, 01 Jan 2012 15:11:12 +0100
Subject: [R-sig-Geo] cross variogram
In-Reply-To: <CAOytA4aqiiGU6uXrMSAriRT=Hc=aikLOYiXnKfUqBOq=qSGDeA@mail.gmail.com>
References: <CAOytA4aqiiGU6uXrMSAriRT=Hc=aikLOYiXnKfUqBOq=qSGDeA@mail.gmail.com>
Message-ID: <4F006980.3050202@tum.de>

Hi,

Am 30.12.2011 18:45, schrieb Saman Monfared:
> Hi.
> I want fit a cross variogram with two variables. but it is non-possitive
> definite.
> even if I use fit.range=T, prediction is performed by inverse distance not
> cokriging and all of  variance prediction are NA.
> my program is like below.
>
> rm(list=ls())
> library(gstat)
> dd<-read.table("bees.txt",header=TRUE)
> x.range<- as.integer(range(dd at coords[,1]))
> y.range<- as.integer(range(dd at coords[,2]))
> grd<- expand.grid(x=seq(from=x.range[1]-20000, to=x.range[2]+90000,
> by=500), y=seq(from=y.range[1]-150000, to=y.range[2]+90000, by=500) )
> coordinates(grd)<- ~ x+y
> gridded(grd)<- TRUE
> plot(grd, cex=0.5)
> points(dd, pch=3, col='blue', cex=0.7)
> coordinates(dd)<- ~ x+y
> m<-vgm(1954,"Gau",80017,225)
> g<- gstat(NULL, id = " B", form =  B ~ 1,data=dd)
> g<- gstat(g, id = "E", form = E~ 1,data=dd)
> g<- gstat(g, id = "T", form =  T~ 1,data=dd)
> vm<- variogram(g)
> plot(vm)
> vm.fit<- fit.lmc(vm, g, model=m,fit.ranges =T)

?fit.lmc says "returns an object of class gstat, with fitted 
variograms". Thus vm.fit is your gstat-object with the fitted models. In 
contrast, the object g still is without any model.

> plot(vm, vm.fit,col="black",type="b",lwd=3,main="Fig1")
>   cv.c2<- gstat.cv(g)

use `gstat.cv(vm.fit)' to get gstat using cokriging. But beware, the 
default of the argument fit.lmc in fit.lmc! With fit.ranges=T you will 
probably get non-positive definite coefficient matrices.

HTH,
Tom

> summary(cv.c2$residual)
> sqrt(mean(cv.c2$residual^2))
> mean(cv.c2$residual)
> k.c2<- predict.gstat(g, dd)
> image(k.c2)
> summary(k.c2)
> contour(k.c2,add=T)
>
> Thanks for your help.
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From Roger.Bivand at nhh.no  Mon Jan  2 09:33:23 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 2 Jan 2012 09:33:23 +0100 (CET)
Subject: [R-sig-Geo] Detect islands (of more than 1 areas or polygons)
 into a cartography
In-Reply-To: <CAAZSCQ7LuLfBBjSgi0r5RdEmoWwZ3u8fmPN++g1AbQdO7b9szw@mail.gmail.com>
References: <CAAZSCQ7LuLfBBjSgi0r5RdEmoWwZ3u8fmPN++g1AbQdO7b9szw@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1201020930580.30459@reclus.nhh.no>

On Fri, 30 Dec 2011, Marc Mar? Dell'Olmo wrote:

> Dear all,
>
> Anyone knows a function to detect if there are islands into a
> cartography. I refer to islands with more than one area (or polygons).
> In other words, I would like to detect how many connected components I
> have in the graph.
>
> On the other hand, I would like to know the ?id? of the areas (or
> polygons) for each island.
>

This wasn't easy to grasp. By graph, do you mean the neighbour graph of 
the Polygons objects in a SpatialPolygons object? Could you use the North 
Carolina counties data set included in maptools to give an example of your 
question? You'll find additional information in spdep, see the poly2nb() 
and n.comp.nb() functions.

Roger

> Note: I usually use the "readShapePoly " to open the cartography.
>
> Thank you very much!
> Marc
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From samanmonfared1 at gmail.com  Mon Jan  2 09:44:00 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Mon, 2 Jan 2012 12:14:00 +0330
Subject: [R-sig-Geo] Arbitrary cross variogram
Message-ID: <CAOytA4bJQV0wqjrKryKqmP==pP8AC_MUex0nzRhg0aFr9Jv0DQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120102/3b8bdd87/attachment.pl>

From tom.gottfried at tum.de  Mon Jan  2 09:44:46 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Mon, 2 Jan 2012 09:44:46 +0100
Subject: [R-sig-Geo] cross variogram
In-Reply-To: <CAOytA4YC-GGBdUoWT6M-OR0yZjcTTkzsLcG80geEXJRmA9qVZg@mail.gmail.com>
References: <CAOytA4aqiiGU6uXrMSAriRT=Hc=aikLOYiXnKfUqBOq=qSGDeA@mail.gmail.com>	<4F006980.3050202@tum.de>	<CAOytA4ZbPaGfFmOdOHZQvKGPW4FCRvt+FQA0UCAg0=PA-uDokw@mail.gmail.com>
	<CAOytA4YC-GGBdUoWT6M-OR0yZjcTTkzsLcG80geEXJRmA9qVZg@mail.gmail.com>
Message-ID: <4F016E7E.5020201@tum.de>

Saman,

please provide a code example that shows what you actually tried in R. And please write to the list. 
That renders it much more probable that you get an appropriate answer to your questions.

regards,
Tom

Am 02.01.2012 09:40, schrieb Saman Monfared:
> Dear Tom.
> Can I fit a custom variogram or cross variogram. For example I want fit a cross variogram like
> (.2,"Gau",34567,0)
> when I use fit.variogram or fit.lmc it change. I found cross variogram with other software(ArcGIS10)
> that fitted variograms has a better cross validations than R but I don't know how fit this cross
> variogram in R.
>
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From Roger.Bivand at nhh.no  Mon Jan  2 09:51:03 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 2 Jan 2012 09:51:03 +0100
Subject: [R-sig-Geo] FIPS code join problem,
In-Reply-To: <CAEOXpND0RY=M1EO5C9dTP-3qdi=RPrv7SukgTQbdRmod9R_LNw@mail.gmail.com>
References: <CAEOXpND0RY=M1EO5C9dTP-3qdi=RPrv7SukgTQbdRmod9R_LNw@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1201020933470.30459@reclus.nhh.no>

On Fri, 30 Dec 2011, Juan Tomas Sayago wrote:

> Hello
> I am using the FIPS code for the joint between the county maps and the
> information, but I have a problem, the county fips have a problem with data
> joins with the codes like "01001" were omited cause when read by are in the
> data set became "1001". I am using this set code to make the join, if
> someone uses or do something different, please let me know.

The difference in string coding is usually caused by reading IDs as 
integer, then coercing to string directly, rather than using formatC() or 
alternatives:

> ID <- c(1001L, 01001L, 11001L)
# trailing L to enforce integer storage
> as.character(ID)
[1] "1001"  "1001"  "11001"
> formatC(ID, width=5, format="d")
[1] " 1001" " 1001" "11001"
> formatC(ID, width=5, format="d", flag="0")
[1] "01001" "01001" "11001"

There are examples of joining SpatialPolygonsDataFrame objects given in 
chapter 5 of our book, online resources at www.asdar-book.org.

Hope this helps,

Roger

>
> #### if you want to keep all polygons
>    tab <- tab[match(shpID,tabID),]
>      # matches both IDs and replaces nomatch values by NA
>    rownames(tab) <- shpID
>    shape.mod <- spCbind(shape,tab)
>
>
> Thanks
> Juan
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Mon Jan  2 10:58:47 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 2 Jan 2012 10:58:47 +0100 (CET)
Subject: [R-sig-Geo] LatLong to UTM zone and coordinates?
In-Reply-To: <4F005D06.6020408@standortsanalyse.net>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<alpine.LRH.2.00.1112300928530.19576@reclus.nhh.no>
	<1325383025810-7141437.post@n2.nabble.com>
	<4F00465A.90707@standortsanalyse.net>
	<4F005D06.6020408@standortsanalyse.net>
Message-ID: <alpine.LRH.2.00.1201021055310.30459@reclus.nhh.no>

On Sun, 1 Jan 2012, Albin Blaschka wrote:

> Am 2012-01-01 12:41, schrieb Albin Blaschka:
>> longitude <- 13.34
>> 
>> UTMzone <- (180 + longitude) / 6
>> UTMzone <- trunc(UTMzone)
>> 
>> UTMzone
>
> Ups, sorry, a little too quick and too dirty this was...
> This should be now the correct answer, still not considering any special 
> cases...
>
> longitude <- seq(-180,180)
> UTMzone <- (180 + longitude) / 6
> UTMzone <- trunc(UTMzone)
> UTMzone <- UTMzone + 1
> UTMzone

Thanks! This gives the zones, and for look-up, you could do:

library(maptools)
brdrs <- seq(-180, 180, 6)
longitude <- seq(-180,180)
# or your data
cbind(longitude, findInterval(longitude, brdrs, all.inside=TRUE))

looking like:

data(wrld_simpl)
plot(wrld_simpl)
abline(v=brdrs)
text(x=brdrs[-1]-3, 0, labels=1:60, col="red")

So the zone would be the output of:

findInterval(<yourLongitudes>, brdrs, all.inside=TRUE)

Roger

>
> Sorry for the noise,
> regards,
> Albin
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From marceivissa at gmail.com  Mon Jan  2 13:56:52 2012
From: marceivissa at gmail.com (=?ISO-8859-1?Q?Marc_Mar=ED_Dell=27Olmo?=)
Date: Mon, 2 Jan 2012 13:56:52 +0100
Subject: [R-sig-Geo] Detect islands (of more than 1 areas or polygons)
 into a cartography
In-Reply-To: <alpine.LRH.2.00.1201020930580.30459@reclus.nhh.no>
References: <CAAZSCQ7LuLfBBjSgi0r5RdEmoWwZ3u8fmPN++g1AbQdO7b9szw@mail.gmail.com>
	<alpine.LRH.2.00.1201020930580.30459@reclus.nhh.no>
Message-ID: <CAAZSCQ72H-OEA239ACmKY6q-6eD=Q+TqVSGbv_wJrvNLWeSa6g@mail.gmail.com>

n.comp.nb() function is exactly what I need. Thank you very much!

Marc

2012/1/2 Roger Bivand <Roger.Bivand at nhh.no>:
> On Fri, 30 Dec 2011, Marc Mar? Dell'Olmo wrote:
>
>> Dear all,
>>
>> Anyone knows a function to detect if there are islands into a
>> cartography. I refer to islands with more than one area (or polygons).
>> In other words, I would like to detect how many connected components I
>> have in the graph.
>>
>> On the other hand, I would like to know the ?id? of the areas (or
>> polygons) for each island.
>>
>
> This wasn't easy to grasp. By graph, do you mean the neighbour graph of the
> Polygons objects in a SpatialPolygons object? Could you use the North
> Carolina counties data set included in maptools to give an example of your
> question? You'll find additional information in spdep, see the poly2nb() and
> n.comp.nb() functions.
>
> Roger
>
>> Note: I usually use the "readShapePoly " to open the cartography.
>>
>> Thank you very much!
>> Marc
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no


From samanmonfared1 at gmail.com  Mon Jan  2 15:20:46 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Mon, 2 Jan 2012 17:50:46 +0330
Subject: [R-sig-Geo] fit variogram base on cross validation
Message-ID: <CAOytA4aGOT3LiJ4c81FB2scNCsoHMXVjY4RZhYEXeS88-45CDQ@mail.gmail.com>

Dear All
I want fit a variogram or cross variogram but not based on
(fit.variogram for direct variogram)
or (fit.lmc
for cross variogram). I think these programs fit variogram based on
minimum SSerr Whereas there is
any guarante that model with minimum SSerr be the best
model.Geostatistics meno in ArcGis10 provide
 a program that it optimize  variogram or cross variogram based on
leave one out cross validation then
the optimized model has the best cross validation in each kriging method.

Is there any program in R that fit variogram or cross variogram based
on cross validation???

For example I want fit a variogram model based on Empirical variogram:

vv<-variogram(d~1, data=dd)
fit.variogram(vv, vgm(0,"Sph",23000,1)
R output:

  model    psill    range
1   Nug    0.000     0.00
2   Sph 1970.996 80843.42

But I know for example that optimum model based on cross validation is:

 model    psill    range
1   Nug    .21     0.00
2   Sph 1540.996 60843.42

How can I use this model in gstat or other packages??

How do I extend it to cross variogram??

for cross variogram :

m<-vgm(0,"Lin",23000,1)
g <- gstat(NULL, id = " B", form =  TB ~ 1,data=dd,fill.cross = F)
g <- gstat(g, id = "E", form = TE~ 1,data=dd,fill.cross = F)
g <- gstat(g, id = "T", form =  T~ 1,data=dd,fill.cross = F)
vm <- variogram(g)
vm.fit <- fit.lmc(vm, g, model=m)
R output:

variograms:
        model        psill range
 B[1]     Nug   0.07360566     0
 B[2]     Lin   0.25714578 60017
E[1]      Nug   2.46512449     0
E[2]      Lin 108.96281576 60017
T[1]      Nug   2.41847897     0
T[2]      Lin  13.22390243 60017
 B.E[1]   Nug  -0.26696750     0
 B.E[2]   Lin   3.26071039 60017
 B.T[1]   Nug  -0.25868233     0
 B.T[2]   Lin  -1.00004909 60017
E.T[1]    Nug   2.21925267     0
E.T[2]    Lin -33.10121223 60017

Whereas I know the best cross variogram based on optimized cross validation is:

variograms:
        model        psill range
 B[1]     Nug   0.04660566     0
 B[2]     Lin   0.34714578 75017
E[1]      Nug   2.54512449     0
E[2]      Lin 123.96281576 75017
T[1]      Nug   4.41847897     0
T[2]      Lin  12.22390243 75017
 B.E[1]   Nug  -1.26696750     0
 B.E[2]   Lin   1.26071039 75017
 B.T[1]   Nug  -1.25868233     0
 B.T[2]   Lin  -2.00004909 75017
E.T[1]    Nug   2.21925267     0
E.T[2]    Lin -23.10121223 75017

What can I do to use a arbitrary variogram model??

-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From tom.gottfried at tum.de  Mon Jan  2 15:49:33 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Mon, 02 Jan 2012 15:49:33 +0100
Subject: [R-sig-Geo] fit variogram base on cross validation
In-Reply-To: <CAOytA4aGOT3LiJ4c81FB2scNCsoHMXVjY4RZhYEXeS88-45CDQ@mail.gmail.com>
References: <CAOytA4aGOT3LiJ4c81FB2scNCsoHMXVjY4RZhYEXeS88-45CDQ@mail.gmail.com>
Message-ID: <4F01C3FD.7050704@tum.de>

See ?gstat and especially what is said about the argument 'model' to see how to specify a 
semivariogram model.
In your first example you would do

gstat(NULL, "d", d~1, dd, model=vgm(1540.996, "Sph", 60843.42, 0.21))

regards,

Tom

Am 02.01.2012 15:20, schrieb Saman Monfared:
> Dear All
> I want fit a variogram or cross variogram but not based on
> (fit.variogram for direct variogram)
> or (fit.lmc
> for cross variogram). I think these programs fit variogram based on
> minimum SSerr Whereas there is
> any guarante that model with minimum SSerr be the best
> model.Geostatistics meno in ArcGis10 provide
>   a program that it optimize  variogram or cross variogram based on
> leave one out cross validation then
> the optimized model has the best cross validation in each kriging method.
>
> Is there any program in R that fit variogram or cross variogram based
> on cross validation???
>
> For example I want fit a variogram model based on Empirical variogram:
>
> vv<-variogram(d~1, data=dd)
> fit.variogram(vv, vgm(0,"Sph",23000,1)
> R output:
>
>    model    psill    range
> 1   Nug    0.000     0.00
> 2   Sph 1970.996 80843.42
>
> But I know for example that optimum model based on cross validation is:
>
>   model    psill    range
> 1   Nug    .21     0.00
> 2   Sph 1540.996 60843.42
>
> How can I use this model in gstat or other packages??
>
> How do I extend it to cross variogram??
>
> for cross variogram :
>
> m<-vgm(0,"Lin",23000,1)
> g<- gstat(NULL, id = " B", form =  TB ~ 1,data=dd,fill.cross = F)
> g<- gstat(g, id = "E", form = TE~ 1,data=dd,fill.cross = F)
> g<- gstat(g, id = "T", form =  T~ 1,data=dd,fill.cross = F)
> vm<- variogram(g)
> vm.fit<- fit.lmc(vm, g, model=m)
> R output:
>
> variograms:
>          model        psill range
>   B[1]     Nug   0.07360566     0
>   B[2]     Lin   0.25714578 60017
> E[1]      Nug   2.46512449     0
> E[2]      Lin 108.96281576 60017
> T[1]      Nug   2.41847897     0
> T[2]      Lin  13.22390243 60017
>   B.E[1]   Nug  -0.26696750     0
>   B.E[2]   Lin   3.26071039 60017
>   B.T[1]   Nug  -0.25868233     0
>   B.T[2]   Lin  -1.00004909 60017
> E.T[1]    Nug   2.21925267     0
> E.T[2]    Lin -33.10121223 60017
>
> Whereas I know the best cross variogram based on optimized cross validation is:
>
> variograms:
>          model        psill range
>   B[1]     Nug   0.04660566     0
>   B[2]     Lin   0.34714578 75017
> E[1]      Nug   2.54512449     0
> E[2]      Lin 123.96281576 75017
> T[1]      Nug   4.41847897     0
> T[2]      Lin  12.22390243 75017
>   B.E[1]   Nug  -1.26696750     0
>   B.E[2]   Lin   1.26071039 75017
>   B.T[1]   Nug  -1.25868233     0
>   B.T[2]   Lin  -2.00004909 75017
> E.T[1]    Nug   2.21925267     0
> E.T[2]    Lin -23.10121223 75017
>
> What can I do to use a arbitrary variogram model??
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From edzer.pebesma at uni-muenster.de  Tue Jan  3 17:43:38 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 03 Jan 2012 17:43:38 +0100
Subject: [R-sig-Geo] spplot: title for the colorkey
In-Reply-To: <4EFE3D4C.5020404@cirad.fr>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<4EFE3D4C.5020404@cirad.fr>
Message-ID: <4F03303A.5000203@uni-muenster.de>

Not that I know of; see argument colorkey in ?lattice::levelplot.

On 12/30/2011 11:38 PM, lancelot wrote:
> Dear all,
> 
> Is there a simple way to add a title to the color key produced by spplot
> (package sp) for raster data sets?
> 
> Best wishes,
> 
> Renaud

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From roman.lustrik at gmail.com  Tue Jan  3 18:16:30 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Tue, 3 Jan 2012 18:16:30 +0100
Subject: [R-sig-Geo] spplot: title for the colorkey
In-Reply-To: <4F03303A.5000203@uni-muenster.de>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<4EFE3D4C.5020404@cirad.fr> <4F03303A.5000203@uni-muenster.de>
Message-ID: <CAHT1vpiXLCb3QEgfO7dWfaakCe6Zdhj7FFSr84YPfAC6WtEAiA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120103/f45a0a55/attachment.pl>

From tim.appelhans at gmail.com  Tue Jan  3 18:19:15 2012
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Tue, 03 Jan 2012 18:19:15 +0100
Subject: [R-sig-Geo] spplot: title for the colorkey
In-Reply-To: <4F03303A.5000203@uni-muenster.de>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<4EFE3D4C.5020404@cirad.fr> <4F03303A.5000203@uni-muenster.de>
Message-ID: <4F033893.9020900@gmail.com>

Renaud,
I usually plot the key at the top of the figure and then supply the 
title via the 'main' argument

colorkey = list(space = "top", width = 1)

HTH

Tim

On 3/1/2012 17:43, Edzer Pebesma wrote:
> Not that I know of; see argument colorkey in ?lattice::levelplot.
>
> On 12/30/2011 11:38 PM, lancelot wrote:
>> Dear all,
>>
>> Is there a simple way to add a title to the color key produced by spplot
>> (package sp) for raster data sets?
>>
>> Best wishes,
>>
>> Renaud

-- 
#####################################
Tim Appelhans
Department of Geography
Environmental Computer Sciences
Philipps Universit?t Marburg
Deutschhausstra?e 12
35032 Marburg (Paketpost: 35037 Marburg)
Germany

Tel +49 (0) 6421 28-25957


From edzer.pebesma at uni-muenster.de  Tue Jan  3 18:22:09 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 03 Jan 2012 18:22:09 +0100
Subject: [R-sig-Geo] spplot: title for the colorkey
In-Reply-To: <CAHT1vpiXLCb3QEgfO7dWfaakCe6Zdhj7FFSr84YPfAC6WtEAiA@mail.gmail.com>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<4EFE3D4C.5020404@cirad.fr> <4F03303A.5000203@uni-muenster.de>
	<CAHT1vpiXLCb3QEgfO7dWfaakCe6Zdhj7FFSr84YPfAC6WtEAiA@mail.gmail.com>
Message-ID: <4F033941.50907@uni-muenster.de>

Roman, spplot is a wrapper around lattice::xyplot when the object is
points, and around lattice::levelplot when it is lines, polygons or
raster (grid/pixels). The original question was for raster data, and
levelplot does not have an auto.key argument. Indeed, only for points
this works.

On 01/03/2012 06:16 PM, Roman Lu?trik wrote:
>  Hi Renaud,
> 
> If you check out the levelplot function in lattice (as per Edzer), you will
> notice there's an auto.key argument. It takes in a named list of arguments,
> one of them being title. I use spplot example to demonstrate how to put a
> "test" title over the key.
> 
> library(lattice)
> trellis.par.set(sp.theme()) # sets bpy.colors() ramp
> data(meuse)
> coordinates(meuse) <- ~x+y
> l2 = list("SpatialPolygonsRescale", layout.north.arrow(), offset =
> c(181300,329800),
>  scale = 400)
> l3 = list("SpatialPolygonsRescale", layout.scale.bar(), offset =
> c(180500,329800),
>  scale = 500, fill=c("transparent","black"))
> l4 = list("sp.text", c(180500,329900), "0")
> l5 = list("sp.text", c(181000,329900), "500 m")
> 
> spplot(meuse, c("ffreq"), sp.layout=list(l2,l3,l4,l5), col.regions=
> "black",
>  pch=c(1,2,3), key.space=list(x=0.1,y=.95,corner=c(0,1)), auto.key =
> list(title = "test"))
> 
> 
> I hope that works for your plot as well.
> 
> Cheers,
> Roman
> 
> 
> On Tue, Jan 3, 2012 at 5:43 PM, Edzer Pebesma <edzer.pebesma at uni-muenster.de
>> wrote:
> 
>> Not that I know of; see argument colorkey in ?lattice::levelplot.
>>
>> On 12/30/2011 11:38 PM, lancelot wrote:
>>> Dear all,
>>>
>>> Is there a simple way to add a title to the color key produced by spplot
>>> (package sp) for raster data sets?
>>>
>>> Best wishes,
>>>
>>> Renaud
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M??nster
>> Weseler Stra??e 253, 48151 M??nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> 
> 
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From renaud.lancelot at cirad.fr  Tue Jan  3 19:41:05 2012
From: renaud.lancelot at cirad.fr (lancelot)
Date: Tue, 03 Jan 2012 19:41:05 +0100
Subject: [R-sig-Geo] spplot: title for the colorkey
In-Reply-To: <4F033941.50907@uni-muenster.de>
References: <SNT131-W416FD58AEC7F9BF5CEC91FDDAD0@phx.gbl>
	<4EFE3D4C.5020404@cirad.fr> <4F03303A.5000203@uni-muenster.de>
	<CAHT1vpiXLCb3QEgfO7dWfaakCe6Zdhj7FFSr84YPfAC6WtEAiA@mail.gmail.com>
	<4F033941.50907@uni-muenster.de>
Message-ID: <4F034BC1.4050607@cirad.fr>

Yes, indeed. Thank your for your time and suggestions.

Renaud

Le 03/01/2012 18:22, Edzer Pebesma a ?crit :
> Roman, spplot is a wrapper around lattice::xyplot when the object is
> points, and around lattice::levelplot when it is lines, polygons or
> raster (grid/pixels). The original question was for raster data, and
> levelplot does not have an auto.key argument. Indeed, only for points
> this works.
>
> On 01/03/2012 06:16 PM, Roman Lu?trik wrote:
>>   Hi Renaud,
>>
>> If you check out the levelplot function in lattice (as per Edzer), you will
>> notice there's an auto.key argument. It takes in a named list of arguments,
>> one of them being title. I use spplot example to demonstrate how to put a
>> "test" title over the key.
>>
>> library(lattice)
>> trellis.par.set(sp.theme()) # sets bpy.colors() ramp
>> data(meuse)
>> coordinates(meuse)<- ~x+y
>> l2 = list("SpatialPolygonsRescale", layout.north.arrow(), offset =
>> c(181300,329800),
>>   scale = 400)
>> l3 = list("SpatialPolygonsRescale", layout.scale.bar(), offset =
>> c(180500,329800),
>>   scale = 500, fill=c("transparent","black"))
>> l4 = list("sp.text", c(180500,329900), "0")
>> l5 = list("sp.text", c(181000,329900), "500 m")
>>
>> spplot(meuse, c("ffreq"), sp.layout=list(l2,l3,l4,l5), col.regions=
>> "black",
>>   pch=c(1,2,3), key.space=list(x=0.1,y=.95,corner=c(0,1)), auto.key =
>> list(title = "test"))
>>
>>
>> I hope that works for your plot as well.
>>
>> Cheers,
>> Roman
>>
>>
>> On Tue, Jan 3, 2012 at 5:43 PM, Edzer Pebesma<edzer.pebesma at uni-muenster.de
>>> wrote:
>>
>>> Not that I know of; see argument colorkey in ?lattice::levelplot.
>>>
>>> On 12/30/2011 11:38 PM, lancelot wrote:
>>>> Dear all,
>>>>
>>>> Is there a simple way to add a title to the color key produced by spplot
>>>> (package sp) for raster data sets?
>>>>
>>>> Best wishes,
>>>>
>>>> Renaud
>>>
>>> --
>>> Edzer Pebesma
>>> Institute for Geoinformatics (ifgi), University of M??nster
>>> Weseler Stra??e 253, 48151 M??nster, Germany. Phone: +49 251
>>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>>> http://www.52north.org/geostatistics      e.pebesma at wwu.de
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Renaud Lancelot
EDENext Project, coordinator: http://www.edenext.eu/

CIRAD, UMR15, Campus International de Baillarguet TA A-DIR / B
F34398 Montpellier

Tel.  +33 4 67 59 37 17  -  Fax  +33 4 67 59 37 95
Secr. +33 4 67 59 37 37  - Cell. +33 6 77 52 08 69


From alexandru.dumitrescu at gmail.com  Tue Jan  3 22:11:28 2012
From: alexandru.dumitrescu at gmail.com (Alexandru Dumitrescu)
Date: Tue, 3 Jan 2012 23:11:28 +0200
Subject: [R-sig-Geo] rgdal hdf4 windows
Message-ID: <CAAdVEFDeHw3LRy6nh3=GyOjoYBwd0opk66RZrMLxMvXnFcm=bg@mail.gmail.com>

Hi All,

Is there a way to build rgdal in Windows with hdf4 driver?

Using rgdal in LINUX is possible to read level3 MODIS data directly in R.
In Windows I noticed that hdf4 driver is not available for rgdal and I
wonder if
rgdal can be compiled in order to support this type of driver.

Thank you in advance,

Alexandru Dumitrescu
National Meteorological Administration, Romania


From ah3881 at bristol.ac.uk  Wed Jan  4 03:40:14 2012
From: ah3881 at bristol.ac.uk (ah3881)
Date: Tue, 3 Jan 2012 18:40:14 -0800 (PST)
Subject: [R-sig-Geo] Spatial cluster analysis
Message-ID: <1325644814469-7149074.post@n2.nabble.com>

Hello all

I am fairly new to the world of R and am working somewhere where no one uses
it much yet...
I want to run a spatial cluster analysis on a load of species distributions
(binary ASCII or PNG maps) to look for possible "biotic" zones, i.e.
regional species assemblies. I have tried downloading some of the "cluster"
type packages but have as yet have not managed to get anything to run.
If I upload the file of folders into R, could anyone advise me on the best
package, and a possible script that I can use to run the spatial cluster?
Thanks so much!

Alice 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Spatial-cluster-analysis-tp7149074p7149074.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From tony333_6 at hotmail.com  Wed Jan  4 15:05:16 2012
From: tony333_6 at hotmail.com (tony333)
Date: Wed, 4 Jan 2012 06:05:16 -0800 (PST)
Subject: [R-sig-Geo] problem in reading NC file and plot it
Message-ID: <1325685916452-7150538.post@n2.nabble.com>

at first i use NCEP/NCAR Reanalysis Monthly Means  of Sea level pressure 
my script 

#rm(list=ls()) 



library(ncdf) 
library(maps) 
library(fields) 


### directory that contains slp data 
datadir = '/home/tony/slp.mon.mean.nc' 


### get lat-lon coordinates from first file, then close the file 
slp.nc = open.ncdf(datadir) 
lonall = get.var.ncdf(slp.nc,'lon') 
latall = get.var.ncdf(slp.nc,'lat') 
timall = get.var.ncdf(slp.nc,'time') 
close(slp.nc) 

#### specify domain 
lonmin = 0 
lonmax = 357.5 
latmin = -90 
latmax =  90 

piclon = lonmin <= lonall & lonall <= lonmax 
piclat = latmin <= latall & latall <= latmax 
lon = lonall[piclon] 
lat = latall[piclat] 
nlon = length(lon) 
nlat = length(lat) 
# if extra months exist, only take months that account for entire year 
slp.nmonths = floor(length(timall)/12)*12 
slp.nyrs = slp.nmonths/12 

slp.clim <- array(NA,dim=c(nlon,nlat,12)) 

################## read data ################################# 
slp.nc = open.ncdf(datadir) 
dum = get.var.ncdf(slp.nc,"slp") 
slp.all = dum[piclon,piclat,1:slp.nmonths] 
dim(slp.all) = c(nlon,nlat,12,slp.nyrs) 
close(slp.nc) 



dim(slp.all) = c(nlon*nlat,12,slp.nyrs) 
dim(slp.clim) = c(nlon*nlat,12) 
for (month in 1:12) { 
   slp.clim[,month] = rowMeans(slp.all[,month,]) 
  slp.all[,month,] = slp.all[,month,] - slp.clim[,month] 
   } 
dim(slp.all) = c(nlon,nlat,12,slp.nyrs) 
dim(slp.clim) = c(nlon,nlat,12) 
########################################################## 
############## plot slp anamoly shaded  ############################# 
image.plot(lon,lat,slp.all[,,5,1]) 
map('world2',interior=FALSE,add=T) 
############################################ 
that is the script i use the error is (Error in image.default(..., add =
add, col = col) : 
  increasing 'x' and 'y' values expected) 
and if i use      image.plot(lon,-lat,slp.all[,,5,1]) 
with negative sign in frant of lat it plot but inverse figure the lat is
arranged from +90 to -90 and i do not know if that 
due to sequence in R from negative to positive or not thanks alot for help

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/problem-in-reading-NC-file-and-plot-it-tp7150538p7150538.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From rafael.wueest at wsl.ch  Wed Jan  4 17:52:36 2012
From: rafael.wueest at wsl.ch (rafael.wueest)
Date: Wed, 4 Jan 2012 08:52:36 -0800 (PST)
Subject: [R-sig-Geo] connection error when calling maxent()
Message-ID: <1325695956381-7151125.post@n2.nabble.com>

Hi Folks

when I am trying to call the maxent() function within a function I created,
I am getting the following error:

Error in file(con, "r") : cannot open the connection
In addition: Warning message:
In file(con, "r") :
  cannot open file
'/var/folders/ft/fthJYD+6GkCvmcCArZBaQU++waU/-Tmp-/R_raster_tmp/maxent/10943312360/species.lambdas':
No such file or directory

I am here also pasting some output of
>traceback()
7: file(con, "r")
6: readLines(paste(dirout, "/species.lambdas", sep = ""))
5: unlist(readLines(paste(dirout, "/species.lambdas", sep = "")))
4: .local(x, p, ...)
3: maxent(background, occ, args = me.args) at run4models_restios.r#558
...

I am using JGR on a Mac and downloaded the newest dismo (CRAN sources) and
maxent version (see below). 

Can anyone help me? I am happy to provide more detailed information...

Rafa

>maxent()
This is MaxEnt version 3.3.3k

>sessionInfo()
R version 2.12.2 (2011-02-25)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
 [1] gbm_1.6-3.1           survival_2.36-5       gam_1.04.1           
 [4] PresenceAbsence_1.1.5 maptools_0.8-10       lattice_0.19-33      
 [7] foreign_0.8-42        rgdal_0.6-33          dismo_0.7-14         
[10] raster_1.9-13         sp_0.9-84             JGR_1.7-7            
[13] iplots_1.1-4          JavaGD_0.5-4          rJava_0.9-1          

loaded via a namespace (and not attached):
[1] grid_2.12.2  tools_2.12.2
Warning message:
'DESCRIPTION' file has 'Encoding' field and re-encoding is not possible


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/connection-error-when-calling-maxent-tp7151125p7151125.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From tarabridwell at gmail.com  Wed Jan  4 20:23:13 2012
From: tarabridwell at gmail.com (Tara Bridwell)
Date: Wed, 4 Jan 2012 11:23:13 -0800
Subject: [R-sig-Geo] Merging/averaging rasters with different extents
Message-ID: <CAELQJc0cbpk1ir1kGhN3_K_ErBJLpp2f+k7rgn_GS-vXTUgxmA@mail.gmail.com>

My overall analytical goal is to take the mean (and later min and max)
data of a small resolution raster within the grid cells of a larger
resolution grid.  I can do this using points via extract but can't
seem to do it using two rasters because of the different resolutions;
I am unable to stack or merge them.

A sample:

require(raster)

ex <- (c(0, 20, 0, 20))

r.small <- raster(ncol=10, nrow=10)
extent(r.small) <- ex
r.big <- raster(ncol=200, nrow=200)
extent(r.big) <- ex

What I want to be able to do is stack these two rasters, then take the
average value of the smaller resolution grid within the larger grids.
I am struggling to be able to do this, and would appreciate any
thoughts.

Many thanks.


From forrest at ufl.edu  Wed Jan  4 21:17:08 2012
From: forrest at ufl.edu (Forrest Stevens)
Date: Wed, 4 Jan 2012 15:17:08 -0500
Subject: [R-sig-Geo] Merging/averaging rasters with different extents
In-Reply-To: <CAELQJc0cbpk1ir1kGhN3_K_ErBJLpp2f+k7rgn_GS-vXTUgxmA@mail.gmail.com>
References: <CAELQJc0cbpk1ir1kGhN3_K_ErBJLpp2f+k7rgn_GS-vXTUgxmA@mail.gmail.com>
Message-ID: <CAEBQMM=5WEQaSP8m7yP5J-+eKKFzAbRNy+GBsGzDSV4sizhVsg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120104/367ad3dc/attachment.pl>

From pgalpern at gmail.com  Thu Jan  5 03:57:47 2012
From: pgalpern at gmail.com (pgalpern)
Date: Wed, 04 Jan 2012 20:57:47 -0600
Subject: [R-sig-Geo] Memory management with rasterToPolygons (raster and
	rgeos)
Message-ID: <4F0511AB.8040701@gmail.com>

Hello!

Not sure if this is the best place to ask what may ultimately be an 
rgeos question.

I am running the latest versions of the raster and rgeos packages under 
64bit 2.14.1 on Windows 2008R2 Server with 12GB RAM and having some 
challenges with memory.

I am turning rasters (approx 500 x 1000 cells) into 1500 
SpatialPolygons, representing each of the feature classes. It works as 
it should, using rasterToPolygons(x, dissolve=T) but memory overhead is 
sky high.

For example, a single instance of this function quickly consumes 2-3 GB 
and would probably consume more if other instances were not also running 
simultaneously.   As a result disk swapping occurs which slows 
everything down.  Interestingly, the input raster and output 
SpatialPolygons objects are only megabytes in size.  Running this under 
32bit R doesn't seem to help and occasionally results in memory 
allocation failures.

Finally, deleting the raster and polygons objects when the function is 
complete and running gc() does not seem to release the memory.  Instead 
the entire R instance needs to be terminated.

Can anyone tell me if this is expected behaviour ... or perhaps suggest 
a more memory efficient approach.

Thank you,
Paul

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca


From mathieu.rajerison at gmail.com  Thu Jan  5 09:24:25 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Thu, 5 Jan 2012 09:24:25 +0100
Subject: [R-sig-Geo] Spatial cluster analysis
In-Reply-To: <1325644814469-7149074.post@n2.nabble.com>
References: <1325644814469-7149074.post@n2.nabble.com>
Message-ID: <CAGfc75=cv0T-S7ozttFujhfSrdUmoZMZjpmF7F_Q0nYZSVsAwg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120105/36847a32/attachment.pl>

From ah3881 at bristol.ac.uk  Thu Jan  5 10:31:50 2012
From: ah3881 at bristol.ac.uk (ah3881)
Date: Thu, 5 Jan 2012 01:31:50 -0800 (PST)
Subject: [R-sig-Geo] Spatial cluster analysis
In-Reply-To: <CAGfc75=cv0T-S7ozttFujhfSrdUmoZMZjpmF7F_Q0nYZSVsAwg@mail.gmail.com>
References: <1325644814469-7149074.post@n2.nabble.com>
	<CAGfc75=cv0T-S7ozttFujhfSrdUmoZMZjpmF7F_Q0nYZSVsAwg@mail.gmail.com>
Message-ID: <1325755910901-7153834.post@n2.nabble.com>

Thanks for that, it looks great for the raw spatial data!
The thing is I have used the raw spatial data to produce a species
distribution projection for each species (using Maxent), then reclassified
each to give a binary presence absence map (which is currently a PNG, but
could be redone as an ASCII file), so I am mainly working with binary maps
rather than the points-and it is these distributions I want to run cluster
analysis on-so I can see the segregation of different community assemblies
in space. 

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Spatial-cluster-analysis-tp7149074p7153834.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From lars.dalby at gmail.com  Thu Jan  5 12:58:21 2012
From: lars.dalby at gmail.com (Lars Dalby)
Date: Thu, 5 Jan 2012 03:58:21 -0800 (PST)
Subject: [R-sig-Geo] problem in reading NC file and plot it
In-Reply-To: <1325685916452-7150538.post@n2.nabble.com>
References: <1325685916452-7150538.post@n2.nabble.com>
Message-ID: <1325764701566-7154236.post@n2.nabble.com>

I think you can do all you want using the functionality in the raster
package. E.g. you can read the ncdf file into R as a raster brick, which is
fairly easy to work with.
Something the this might work:

require(raster);require(ncdf)
# Assuming that the variable name is slp
b <- brick(slp.mon.mean.nc, varname = 'slp')
# now you can plot any of the time step using:
plot(raster(b, layer = 1))# time step one

But there might be several other ways to do what you want.

Regards,
Lars

Lars Dalby, Msc., PhD student
E: lada at dmu.dk | T: +45 871 59013
Department of Bioscience, Aarhus University
Gren?vej 14, 8410 R?nde, Denmark


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/problem-in-reading-NC-file-and-plot-it-tp7150538p7154236.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mathieu.rajerison at gmail.com  Thu Jan  5 13:02:12 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Thu, 5 Jan 2012 13:02:12 +0100
Subject: [R-sig-Geo] Spatial cluster analysis
In-Reply-To: <1325755910901-7153834.post@n2.nabble.com>
References: <1325644814469-7149074.post@n2.nabble.com>
	<CAGfc75=cv0T-S7ozttFujhfSrdUmoZMZjpmF7F_Q0nYZSVsAwg@mail.gmail.com>
	<1325755910901-7153834.post@n2.nabble.com>
Message-ID: <CAGfc75mxY=L9XCHb=-sGEH=rTCUN87ted9p8FQkpJ7N9tgHddA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120105/77827503/attachment.pl>

From pgalpern at gmail.com  Thu Jan  5 18:11:21 2012
From: pgalpern at gmail.com (pgalpern)
Date: Thu, 05 Jan 2012 11:11:21 -0600
Subject: [R-sig-Geo] Memory management with rasterToPolygons (raster and
	rgeos)
In-Reply-To: <4F0511AB.8040701@gmail.com>
References: <4F0511AB.8040701@gmail.com>
Message-ID: <4F05D9B9.1040801@gmail.com>

I did some further research into my own question when I twigged to the 
idea that this might be a memory leak with the GEOS library.

It seems likely that is, and has been documented in this forum this 
October past:
https://mailman.stat.ethz.ch/pipermail/r-sig-geo/2011-October/013289.html

As of October there didn't appear to be any real resolution to the 
problem, except - perhaps - to run rgeos under Linux.

Is this the status quo?

Thanks,
Paul

On 04/01/2012 8:57 PM, pgalpern wrote:
> Hello!
>
> Not sure if this is the best place to ask what may ultimately be an 
> rgeos question.
>
> I am running the latest versions of the raster and rgeos packages 
> under 64bit 2.14.1 on Windows 2008R2 Server with 12GB RAM and having 
> some challenges with memory.
>
> I am turning rasters (approx 500 x 1000 cells) into 1500 
> SpatialPolygons, representing each of the feature classes. It works as 
> it should, using rasterToPolygons(x, dissolve=T) but memory overhead 
> is sky high.
>
> For example, a single instance of this function quickly consumes 2-3 
> GB and would probably consume more if other instances were not also 
> running simultaneously.   As a result disk swapping occurs which slows 
> everything down.  Interestingly, the input raster and output 
> SpatialPolygons objects are only megabytes in size.  Running this 
> under 32bit R doesn't seem to help and occasionally results in memory 
> allocation failures.
>
> Finally, deleting the raster and polygons objects when the function is 
> complete and running gc() does not seem to release the memory.  
> Instead the entire R instance needs to be terminated.
>
> Can anyone tell me if this is expected behaviour ... or perhaps 
> suggest a more memory efficient approach.
>
> Thank you,
> Paul
>

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca


From Roger.Bivand at nhh.no  Thu Jan  5 19:19:13 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 5 Jan 2012 19:19:13 +0100 (CET)
Subject: [R-sig-Geo] Memory management with rasterToPolygons (raster and
 rgeos)
In-Reply-To: <4F05D9B9.1040801@gmail.com>
References: <4F0511AB.8040701@gmail.com> <4F05D9B9.1040801@gmail.com>
Message-ID: <alpine.LRH.2.00.1201051854570.8400@reclus.nhh.no>

On Thu, 5 Jan 2012, pgalpern wrote:

> I did some further research into my own question when I twigged to the 
> idea that this might be a memory leak with the GEOS library.
>
> It seems likely that is, and has been documented in this forum this 
> October past: 
> https://mailman.stat.ethz.ch/pipermail/r-sig-geo/2011-October/013289.html
>
> As of October there didn't appear to be any real resolution to the problem, 
> except - perhaps - to run rgeos under Linux.
>
> Is this the status quo?

The issue with rgeos/GEOS is unresolved, and has led to at least two 
releases in the mean time. Using Linux does not help. It may be possible 
to run with dissolve=FALSE, and step through chunks of feature classes, in 
separate R scripts. However, it isn't just an rgeos issue, as:

library(raster)
r <- raster(nrow=500, ncol=1000)
r[] <- rpois(ncell(r), lambda=70)
pol <- rasterToPolygons(r, dissolve=FALSE)

gives me:

> object.size(r)
4011736 bytes
> object.size(pol)
1458003216 bytes

so pol is 1.5G here, with 73 categories (I forgot to set.seed()). Only 
raster and sp are present here. The arithmetic is:

> object.size(slot(pol, "polygons")[[1]])
2896 bytes
> dim(pol)
[1] 500000      1
> object.size(slot(pol, "polygons")[[1]])*dim(pol)[1]
1.448e+09 bytes

so the input SpatialPolygons object is already large, and GEOS needs a 
separate copy in its format, plus working copies.

Could you work on tiles of the raster, then join those?

We're still hoping that someone will help with bug-fixing in rgeos, but 
this is also a data representation question, I think.

Hope this helps,

Roger

>
> Thanks,
> Paul
>
> On 04/01/2012 8:57 PM, pgalpern wrote:
>> Hello!
>> 
>> Not sure if this is the best place to ask what may ultimately be an rgeos 
>> question.
>> 
>> I am running the latest versions of the raster and rgeos packages under 
>> 64bit 2.14.1 on Windows 2008R2 Server with 12GB RAM and having some 
>> challenges with memory.
>> 
>> I am turning rasters (approx 500 x 1000 cells) into 1500 SpatialPolygons, 
>> representing each of the feature classes. It works as it should, using 
>> rasterToPolygons(x, dissolve=T) but memory overhead is sky high.
>> 
>> For example, a single instance of this function quickly consumes 2-3 GB and 
>> would probably consume more if other instances were not also running 
>> simultaneously.   As a result disk swapping occurs which slows everything 
>> down.  Interestingly, the input raster and output SpatialPolygons objects 
>> are only megabytes in size.  Running this under 32bit R doesn't seem to 
>> help and occasionally results in memory allocation failures.
>> 
>> Finally, deleting the raster and polygons objects when the function is 
>> complete and running gc() does not seem to release the memory.  Instead the 
>> entire R instance needs to be terminated.
>> 
>> Can anyone tell me if this is expected behaviour ... or perhaps suggest a 
>> more memory efficient approach.
>> 
>> Thank you,
>> Paul
>> 
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From jmbarriosg at gmail.com  Thu Jan  5 19:42:43 2012
From: jmbarriosg at gmail.com (=?ISO-8859-1?Q?Jos=E9_Miguel_Barrios?=)
Date: Thu, 5 Jan 2012 19:42:43 +0100
Subject: [R-sig-Geo] Spatial cluster analysis
In-Reply-To: <CAGfc75mxY=L9XCHb=-sGEH=rTCUN87ted9p8FQkpJ7N9tgHddA@mail.gmail.com>
References: <1325644814469-7149074.post@n2.nabble.com>
	<CAGfc75=cv0T-S7ozttFujhfSrdUmoZMZjpmF7F_Q0nYZSVsAwg@mail.gmail.com>
	<1325755910901-7153834.post@n2.nabble.com>
	<CAGfc75mxY=L9XCHb=-sGEH=rTCUN87ted9p8FQkpJ7N9tgHddA@mail.gmail.com>
Message-ID: <CAKAdxrVCvOqXYbHJQaFOnZR==e7_HYthSFgo32YkPmGxCCLhwQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120105/6b72f77c/attachment.pl>

From pgalpern at gmail.com  Thu Jan  5 19:49:57 2012
From: pgalpern at gmail.com (pgalpern)
Date: Thu, 05 Jan 2012 12:49:57 -0600
Subject: [R-sig-Geo] Memory management with rasterToPolygons (raster and
 rgeos)
In-Reply-To: <alpine.LRH.2.00.1201051854570.8400@reclus.nhh.no>
References: <4F0511AB.8040701@gmail.com> <4F05D9B9.1040801@gmail.com>
	<alpine.LRH.2.00.1201051854570.8400@reclus.nhh.no>
Message-ID: <4F05F0D5.2010505@gmail.com>

Agreed these are very large objects.  I'll look at tiling as a general 
solution to this problem.

For others facing the same challenge it is worth noting that I have been 
successful in running rasterToPolygons(x, dissolve=TRUE) on rasters up 
to 800000 cells producing an object containing approx  1500 
SpatialPolygons under 64bit Windows, by ensuring there is at least 7GB 
of overhead memory.  Run time was reasonable.  R instance must be 
terminated following function call to free up the memory.


On 05/01/2012 12:19 PM, Roger Bivand wrote:
> On Thu, 5 Jan 2012, pgalpern wrote:
>
>> I did some further research into my own question when I twigged to 
>> the idea that this might be a memory leak with the GEOS library.
>>
>> It seems likely that is, and has been documented in this forum this 
>> October past: 
>> https://mailman.stat.ethz.ch/pipermail/r-sig-geo/2011-October/013289.html
>>
>> As of October there didn't appear to be any real resolution to the 
>> problem, except - perhaps - to run rgeos under Linux.
>>
>> Is this the status quo?
>
> The issue with rgeos/GEOS is unresolved, and has led to at least two 
> releases in the mean time. Using Linux does not help. It may be 
> possible to run with dissolve=FALSE, and step through chunks of 
> feature classes, in separate R scripts. However, it isn't just an 
> rgeos issue, as:
>
> library(raster)
> r <- raster(nrow=500, ncol=1000)
> r[] <- rpois(ncell(r), lambda=70)
> pol <- rasterToPolygons(r, dissolve=FALSE)
>
> gives me:
>
>> object.size(r)
> 4011736 bytes
>> object.size(pol)
> 1458003216 bytes
>
> so pol is 1.5G here, with 73 categories (I forgot to set.seed()). Only 
> raster and sp are present here. The arithmetic is:
>
>> object.size(slot(pol, "polygons")[[1]])
> 2896 bytes
>> dim(pol)
> [1] 500000      1
>> object.size(slot(pol, "polygons")[[1]])*dim(pol)[1]
> 1.448e+09 bytes
>
> so the input SpatialPolygons object is already large, and GEOS needs a 
> separate copy in its format, plus working copies.
>
> Could you work on tiles of the raster, then join those?
>
> We're still hoping that someone will help with bug-fixing in rgeos, 
> but this is also a data representation question, I think.
>
> Hope this helps,
>
> Roger
>
>>
>> Thanks,
>> Paul
>>
>> On 04/01/2012 8:57 PM, pgalpern wrote:
>>> Hello!
>>>
>>> Not sure if this is the best place to ask what may ultimately be an 
>>> rgeos question.
>>>
>>> I am running the latest versions of the raster and rgeos packages 
>>> under 64bit 2.14.1 on Windows 2008R2 Server with 12GB RAM and having 
>>> some challenges with memory.
>>>
>>> I am turning rasters (approx 500 x 1000 cells) into 1500 
>>> SpatialPolygons, representing each of the feature classes. It works 
>>> as it should, using rasterToPolygons(x, dissolve=T) but memory 
>>> overhead is sky high.
>>>
>>> For example, a single instance of this function quickly consumes 2-3 
>>> GB and would probably consume more if other instances were not also 
>>> running simultaneously.   As a result disk swapping occurs which 
>>> slows everything down.  Interestingly, the input raster and output 
>>> SpatialPolygons objects are only megabytes in size.  Running this 
>>> under 32bit R doesn't seem to help and occasionally results in 
>>> memory allocation failures.
>>>
>>> Finally, deleting the raster and polygons objects when the function 
>>> is complete and running gc() does not seem to release the memory.  
>>> Instead the entire R instance needs to be terminated.
>>>
>>> Can anyone tell me if this is expected behaviour ... or perhaps 
>>> suggest a more memory efficient approach.
>>>
>>> Thank you,
>>> Paul
>>>
>>
>>
>

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca


From lyndon.estes at gmail.com  Thu Jan  5 20:42:02 2012
From: lyndon.estes at gmail.com (Lyndon Estes)
Date: Thu, 5 Jan 2012 14:42:02 -0500
Subject: [R-sig-Geo] Memory management with rasterToPolygons (raster and
	rgeos)
In-Reply-To: <4F05F0D5.2010505@gmail.com>
References: <4F0511AB.8040701@gmail.com> <4F05D9B9.1040801@gmail.com>
	<alpine.LRH.2.00.1201051854570.8400@reclus.nhh.no>
	<4F05F0D5.2010505@gmail.com>
Message-ID: <CALuVVaa0sxFvS=vEqoeNy3QH+rmhkWoBYqUb1ntAbc3ZHNb2kQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120105/81e1d071/attachment.pl>

From Roger.Bivand at nhh.no  Thu Jan  5 21:22:57 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 5 Jan 2012 21:22:57 +0100 (CET)
Subject: [R-sig-Geo] Memory management with rasterToPolygons (raster and
 rgeos)
In-Reply-To: <CALuVVaa0sxFvS=vEqoeNy3QH+rmhkWoBYqUb1ntAbc3ZHNb2kQ@mail.gmail.com>
References: <4F0511AB.8040701@gmail.com> <4F05D9B9.1040801@gmail.com>
	<alpine.LRH.2.00.1201051854570.8400@reclus.nhh.no>
	<4F05F0D5.2010505@gmail.com>
	<CALuVVaa0sxFvS=vEqoeNy3QH+rmhkWoBYqUb1ntAbc3ZHNb2kQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1201052121240.8818@reclus.nhh.no>

On Thu, 5 Jan 2012, Lyndon Estes wrote:

> In case it's of interest (although it won't solve the memory problems
> mentioned) I wrote a function to call gdal from R to polygonize rasters. It
> was quite fast in the instances I used it.

Very interesting! Anyone want a nice weekend project of writing the R 
interface to GDALPolygonize in rgdal?

Roger

>
> Mine is tailored to a Mac (10.5.8), so if used elsewhere this line might
> cause problems:
>
> py.c <- "python2.5
> /Library/Frameworks/GDAL.framework/Programs/gdal_polygonize.py"
>
> runGdalPolygonize <- function(inraster, outshape, attname, gdalformat =
> "ESRI Shapefile") {
> # Runs gdal_polygonize.py to create polygons from raster (with limited
> options at present)
> # Args:
> #   inraster: The name of a raster object referring to a permanent,
> GDAL-readable raster
> #   outshape: The name of the desired output polygon file
> #   attname: The name for the column in the output attribute table
> #   gdalformat: Defaults to ESRI shapefile at present
> # Returns:
> #   Polygon file, read back into an R object
> # Notes:
> #   This needs to be run within the directory containing the raster file
>
>  py.c <- "python2.5
> /Library/Frameworks/GDAL.framework/Programs/gdal_polygonize.py"
>  rast.nm <- unlist(strsplit(inraster at file@name,
> "/"))[length(unlist(strsplit(inraster at file@name, "/")))]
>  full.c <- paste(py.c, rast.nm, "-f", paste("'", gdalformat, "'", sep =
> ""),
>                  paste(outshape, ".shp", sep = ""), outshape, attname)
>  system(full.c)
>  shp <- readOGR(dsn = paste(outshape, ".shp", sep = ""), layer = outshape)
>  return(shp)
> }
>
> Cheers, Lyndon
>
> On Thu, Jan 5, 2012 at 1:49 PM, pgalpern <pgalpern at gmail.com> wrote:
>
>> Agreed these are very large objects.  I'll look at tiling as a general
>> solution to this problem.
>>
>> For others facing the same challenge it is worth noting that I have been
>> successful in running rasterToPolygons(x, dissolve=TRUE) on rasters up to
>> 800000 cells producing an object containing approx  1500 SpatialPolygons
>> under 64bit Windows, by ensuring there is at least 7GB of overhead memory.
>>  Run time was reasonable.  R instance must be terminated following function
>> call to free up the memory.
>>
>>
>>
>> On 05/01/2012 12:19 PM, Roger Bivand wrote:
>>
>>> On Thu, 5 Jan 2012, pgalpern wrote:
>>>
>>>  I did some further research into my own question when I twigged to the
>>>> idea that this might be a memory leak with the GEOS library.
>>>>
>>>> It seems likely that is, and has been documented in this forum this
>>>> October past: https://mailman.stat.ethz.ch/**pipermail/r-sig-geo/2011-**
>>>> October/013289.html<https://mailman.stat.ethz.ch/pipermail/r-sig-geo/2011-October/013289.html>
>>>>
>>>> As of October there didn't appear to be any real resolution to the
>>>> problem, except - perhaps - to run rgeos under Linux.
>>>>
>>>> Is this the status quo?
>>>>
>>>
>>> The issue with rgeos/GEOS is unresolved, and has led to at least two
>>> releases in the mean time. Using Linux does not help. It may be possible to
>>> run with dissolve=FALSE, and step through chunks of feature classes, in
>>> separate R scripts. However, it isn't just an rgeos issue, as:
>>>
>>> library(raster)
>>> r <- raster(nrow=500, ncol=1000)
>>> r[] <- rpois(ncell(r), lambda=70)
>>> pol <- rasterToPolygons(r, dissolve=FALSE)
>>>
>>> gives me:
>>>
>>>  object.size(r)
>>>>
>>> 4011736 bytes
>>>
>>>> object.size(pol)
>>>>
>>> 1458003216 bytes
>>>
>>> so pol is 1.5G here, with 73 categories (I forgot to set.seed()). Only
>>> raster and sp are present here. The arithmetic is:
>>>
>>>  object.size(slot(pol, "polygons")[[1]])
>>>>
>>> 2896 bytes
>>>
>>>> dim(pol)
>>>>
>>> [1] 500000      1
>>>
>>>> object.size(slot(pol, "polygons")[[1]])*dim(pol)[1]
>>>>
>>> 1.448e+09 bytes
>>>
>>> so the input SpatialPolygons object is already large, and GEOS needs a
>>> separate copy in its format, plus working copies.
>>>
>>> Could you work on tiles of the raster, then join those?
>>>
>>> We're still hoping that someone will help with bug-fixing in rgeos, but
>>> this is also a data representation question, I think.
>>>
>>> Hope this helps,
>>>
>>> Roger
>>>
>>>
>>>> Thanks,
>>>> Paul
>>>>
>>>> On 04/01/2012 8:57 PM, pgalpern wrote:
>>>>
>>>>> Hello!
>>>>>
>>>>> Not sure if this is the best place to ask what may ultimately be an
>>>>> rgeos question.
>>>>>
>>>>> I am running the latest versions of the raster and rgeos packages under
>>>>> 64bit 2.14.1 on Windows 2008R2 Server with 12GB RAM and having some
>>>>> challenges with memory.
>>>>>
>>>>> I am turning rasters (approx 500 x 1000 cells) into 1500
>>>>> SpatialPolygons, representing each of the feature classes. It works as it
>>>>> should, using rasterToPolygons(x, dissolve=T) but memory overhead is sky
>>>>> high.
>>>>>
>>>>> For example, a single instance of this function quickly consumes 2-3 GB
>>>>> and would probably consume more if other instances were not also running
>>>>> simultaneously.   As a result disk swapping occurs which slows everything
>>>>> down.  Interestingly, the input raster and output SpatialPolygons objects
>>>>> are only megabytes in size.  Running this under 32bit R doesn't seem to
>>>>> help and occasionally results in memory allocation failures.
>>>>>
>>>>> Finally, deleting the raster and polygons objects when the function is
>>>>> complete and running gc() does not seem to release the memory.  Instead the
>>>>> entire R instance needs to be terminated.
>>>>>
>>>>> Can anyone tell me if this is expected behaviour ... or perhaps suggest
>>>>> a more memory efficient approach.
>>>>>
>>>>> Thank you,
>>>>> Paul
>>>>>
>>>>>
>>>>
>>>>
>>>
>> --
>> Paul Galpern, PhD Candidate
>> Natural Resources Institute
>> 70 Dysart Road
>> University of Manitoba
>> Winnipeg, Manitoba, Canada R3T 2M6
>> http://borealscape.ca
>>
>> ______________________________**_________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/**listinfo/r-sig-geo<https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
>>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From hadley at rice.edu  Fri Jan  6 00:11:12 2012
From: hadley at rice.edu (Hadley Wickham)
Date: Thu, 5 Jan 2012 17:11:12 -0600
Subject: [R-sig-Geo] Dot density maps
Message-ID: <CABdHhvHpHDSxiQ8A2no+vQuP6hs+h4Qr_-YVqyoDw=x+v7iVnw@mail.gmail.com>

Hi all,

Are their any spatial packages that produce dot density maps (i.e.
http://www.geo.hunter.cuny.edu/~tbw/GTECH201/notes/9.The.Dot.Density.Map.Slides.100410.pdf)
for areal data?

Thanks,

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From cengel at stanford.edu  Fri Jan  6 00:49:12 2012
From: cengel at stanford.edu (Claudia A Engel)
Date: Thu, 5 Jan 2012 15:49:12 -0800
Subject: [R-sig-Geo] Dot density maps
In-Reply-To: <CABdHhvHpHDSxiQ8A2no+vQuP6hs+h4Qr_-YVqyoDw=x+v7iVnw@mail.gmail.com>
References: <CABdHhvHpHDSxiQ8A2no+vQuP6hs+h4Qr_-YVqyoDw=x+v7iVnw@mail.gmail.com>
Message-ID: <5FDF9E8D-6E35-4F19-A842-871BF1E0209B@stanford.edu>

Hadley,

Would dotsInPolys {maptools} do?

Claudia

--
Claudia A Engel
Department of Anthropology
Stanford University

On Jan 5, 2012, at 3:11 PM, Hadley Wickham wrote:

> Hi all,
> 
> Are their any spatial packages that produce dot density maps (i.e.
> http://www.geo.hunter.cuny.edu/~tbw/GTECH201/notes/9.The.Dot.Density.Map.Slides.100410.pdf)
> for areal data?
> 
> Thanks,
> 
> Hadley
> 
> -- 
> Assistant Professor / Dobelman Family Junior Chair
> Department of Statistics / Rice University
> http://had.co.nz/
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From edzer.pebesma at uni-muenster.de  Fri Jan  6 10:54:20 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 06 Jan 2012 10:54:20 +0100
Subject: [R-sig-Geo] Dot density maps
In-Reply-To: <CABdHhvHpHDSxiQ8A2no+vQuP6hs+h4Qr_-YVqyoDw=x+v7iVnw@mail.gmail.com>
References: <CABdHhvHpHDSxiQ8A2no+vQuP6hs+h4Qr_-YVqyoDw=x+v7iVnw@mail.gmail.com>
Message-ID: <4F06C4CC.7040506@uni-muenster.de>

sp provides spsample methods that allow various ways of sampling with a
polygon(s). It does not have a high-level function that does varying
densities for each feature.

On 01/06/2012 12:11 AM, Hadley Wickham wrote:
> Hi all,
> 
> Are their any spatial packages that produce dot density maps (i.e.
> http://www.geo.hunter.cuny.edu/~tbw/GTECH201/notes/9.The.Dot.Density.Map.Slides.100410.pdf)
> for areal data?
> 
> Thanks,
> 
> Hadley
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From hadley at rice.edu  Fri Jan  6 17:28:55 2012
From: hadley at rice.edu (Hadley Wickham)
Date: Fri, 6 Jan 2012 10:28:55 -0600
Subject: [R-sig-Geo] Dot density maps
In-Reply-To: <5FDF9E8D-6E35-4F19-A842-871BF1E0209B@stanford.edu>
References: <CABdHhvHpHDSxiQ8A2no+vQuP6hs+h4Qr_-YVqyoDw=x+v7iVnw@mail.gmail.com>
	<5FDF9E8D-6E35-4F19-A842-871BF1E0209B@stanford.edu>
Message-ID: <CABdHhvFqk8AbYnvPZk15qymqYow=49Yr1yrViL5OwNmkAYgvug@mail.gmail.com>

Ah, perfect, thanks!

On a related note, apart from RCartogram which implements diffusion
based cartograms, are there any other cartogram tools in R? I'm
particularly interested in Dorling and Demers cartograms.

Thanks!

Hadley

On Thu, Jan 5, 2012 at 5:49 PM, Claudia A Engel <cengel at stanford.edu> wrote:
> Hadley,
>
> Would dotsInPolys {maptools} do?
>
> Claudia
>
> --
> Claudia A Engel
> Department of Anthropology
> Stanford University
>
> On Jan 5, 2012, at 3:11 PM, Hadley Wickham wrote:
>
>> Hi all,
>>
>> Are their any spatial packages that produce dot density maps (i.e.
>> http://www.geo.hunter.cuny.edu/~tbw/GTECH201/notes/9.The.Dot.Density.Map.Slides.100410.pdf)
>> for areal data?
>>
>> Thanks,
>>
>> Hadley
>>
>> --
>> Assistant Professor / Dobelman Family Junior Chair
>> Department of Statistics / Rice University
>> http://had.co.nz/
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>



-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From marcelino.delacruz at upm.es  Fri Jan  6 21:35:38 2012
From: marcelino.delacruz at upm.es (marcelino.delacruz at upm.es)
Date: Fri, 6 Jan 2012 21:35:38 +0100
Subject: [R-sig-Geo] Spatial cluster analysis
In-Reply-To: <CAKAdxrVCvOqXYbHJQaFOnZR==e7_HYthSFgo32YkPmGxCCLhwQ@mail.gmail.com>
Message-ID: <hoXrhiL9.1325882138.7714710.marcelino.delacruz@upm.es>

I think that the correct answer to this question is "use the raster and
the dismo package". In fact, dismo has the possibility of "fitting"
Maxent models directly from R.

In any case, with raster package you can easily import ASC files (I
suppose one file for each species), join them in an stack object and
depending on the size of your maps (i.e. number of pixels) and your
favourite classification approach (e.g. hierarchical vs. non
hierarchical) select the appropriate functions/packages. For example,
package vegan has function vegedist that is very appropriate for
community data. You can use it to compute a distance matrix (based on
the species data) between the pixels of your map an then submit this
matrix to hclust to compute a classificatory tree. You can cut this tree
(with cutree) at the desired number of communities or dissimilarity and
create a new layer in your raster stack with the "number" of cluster
to which each pixel has been assigned that can eassily ploted as a
"community map"
If the number of pixels is large you can consider using function clara in
package cluster or a combination of clara for a subsample (i.e. training
data set) plus a nearest neughbour classifier (e.g. function knn1)

HTH,

Marcelino

Con fecha 5/1/2012, "Jos? Miguel Barrios" <jmbarriosg at gmail.com>
escribi?:

>Hello,
>
>Take a look at the DCluster package;  it contains several options for
>spatial clusters of diseases.  You are not dealing with disease mapping but
>it may be a good idea to take a look at these methods anyway.
>
>Success,
>
>Miguel
>
>
>
>2012/1/5 Mathieu Rajerison <mathieu.rajerison at gmail.com>
>
>> I don't think I'm a specialist for that question. Other people will
>> complete what I'll say, if necessary
>>
>> For the moment, what you should try is to get points representing presence
>> from your image (I think of it as being a regular grid image).
>>
>> Then, to visually seggregate clusters of presence, you could use
>> spatstat::density function
>>
>> 2012/1/5 ah3881 <ah3881 at bristol.ac.uk>
>>
>> > Thanks for that, it looks great for the raw spatial data!
>> > The thing is I have used the raw spatial data to produce a species
>> > distribution projection for each species (using Maxent), then
>> reclassified
>> > each to give a binary presence absence map (which is currently a PNG, but
>> > could be redone as an ASCII file), so I am mainly working with binary
>> maps
>> > rather than the points-and it is these distributions I want to run
>> cluster
>> > analysis on-so I can see the segregation of different community
>> assemblies
>> > in space.
>> >
>> > --
>> > View this message in context:
>> >
>> http://r-sig-geo.2731867.n2.nabble.com/Spatial-cluster-analysis-tp7149074p7153834.html
>> > Sent from the R-sig-geo mailing list archive at Nabble.com.
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-Geo mailing list
>R-sig-Geo at r-project.org
>https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From Adrian.Baddeley at csiro.au  Mon Jan  9 05:51:31 2012
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Mon, 9 Jan 2012 12:51:31 +0800
Subject: [R-sig-Geo] [R] Spatial data, rpoispp,
	using window with fixed radius?
In-Reply-To: <4F079952.8030701@xtra.co.nz>
References: <20120106131734.325830@gmx.net> <4F079952.8030701@xtra.co.nz>
Message-ID: <57DC18C299094D4299F837570C5DF1C558B6E62CBC@EXWA-MBX01.nexus.csiro.au>

 
The following message appeared on R-help but this discussion should be moved to R-sig-geo 

On 07/01/12 02:17, herbert8686 at gmx.de wrote:

> I was searching through the spatstat manual in order to find a function
>  to simulate a Poisson pattern only within a fixed radius (circular moving window)
 > around individual points. If points are distributed heterogeneously over a 
> large area this may help to only assess deviation from CSR within the window 
> and thus does not require additional information on a covariate. 
> I could not find such a function in spatstat. Can please anyone help?

What do you want to happen if two of the circles overlap? Should the density of random points be twice as high? 

If the answer is 'yes' then do the following (where X is your original point pattern of centres, and 'r' is the radius of the circles, and 'lambda' is the intensity of random points per unit area in each circle)

       V <- scanmeasure(X, r)
       V <- eval.im(lambda * V)
       Y <- rpoispp(V)

If the answer is 'no' then do 
       W <- dilation(X, r)
       Y <- rpoispp(lambda, win=W)

Adrian Baddeley


From Maximilian.Spross at uibk.ac.at  Mon Jan  9 12:10:23 2012
From: Maximilian.Spross at uibk.ac.at (=?ISO-8859-1?Q?Maximilian_Spro=DF?=)
Date: Mon, 09 Jan 2012 12:10:23 +0100
Subject: [R-sig-Geo] Residual mapping and spatial autocorrelation. SAR model.
Message-ID: <4F0ACB1F.10304@uibk.ac.at>

Dear list members!

To map residuals from a single linear regression model which is based on 
high resolution raster data (cellsize 5m, approx. n=290000), i try to 
take into account for spatial autocorrelation in the residuals. Several 
morphometric layers (e.g. slope, solar potential, elevation etc.) serve 
as predictors in order to explain surface elevation changes of a glacier 
surface.

By using SAR model with spatial weights (neighbor list object with 3,984 
neighbors per observation in average) which were generated based on the 
current predictor, a very efficient fit results. Hence, the residual map 
shows small values almost across the whole surface. The same model with 
each of the other predictors leads to almost the same fit and a similar 
residual map.

The problem is, that if i take the autocorrelation into account and 
model with SAR, i cannot identify spatial patterns of the quality of the 
fit in relation to different predictors. If i model with OLS, i get 
sensible variations between the different residual maps, but the 
residuals are strongly autocorrelated as this is natural for high 
resolution raster data.

- Do you have any ideas about an other approach for defining spatial 
weights?

- Are there any legitimations for ignoring the autocorrelated residuals 
of the OLS model since the research objective is to derive sensible 
variations in the residual maps?

### selected code for calculating spatial weights and performing SAR: ###

library(gstat)
library(sp)
library(spdep)
library(rgdal)

dst <- max(slot(slot(elev, "grid"), "cellsize"))
elev_nb <- dnearneigh(coordinates(elev), 0, dst)
sp_weights <- nb2listw(elev_nb)

dif_vec <- c(dif at data$band1)
elev_vec <- c(elev at data$band1)

sp_fit <-  spautolm(dif_vec~slope_vec, listw = sp_weights, family="SAR", 
method="Matrix", na.action=na.exclude)

#################

system: linux high performance cluster node with 2 Intel Quad-Core L5420 
CPUs (8 cores running on 2.5 GHz), 32 GB DDR2 RAM (4 GB per core)
R version 2.13

Thank you very much in advance!

Max


From Roger.Bivand at nhh.no  Mon Jan  9 14:14:08 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 9 Jan 2012 14:14:08 +0100 (CET)
Subject: [R-sig-Geo] Residual mapping and spatial autocorrelation. SAR
 model.
In-Reply-To: <4F0ACB1F.10304@uibk.ac.at>
References: <4F0ACB1F.10304@uibk.ac.at>
Message-ID: <alpine.LRH.2.00.1201091406490.23328@reclus.nhh.no>

On Mon, 9 Jan 2012, Maximilian Spro? wrote:

> Dear list members!
>
> To map residuals from a single linear regression model which is based on high 
> resolution raster data (cellsize 5m, approx. n=290000), i try to take into 
> account for spatial autocorrelation in the residuals. Several morphometric 
> layers (e.g. slope, solar potential, elevation etc.) serve as predictors in 
> order to explain surface elevation changes of a glacier surface.
>
> By using SAR model with spatial weights (neighbor list object with 3,984 
> neighbors per observation in average) which were generated based on the

This number looks very large, given your definition below, taking the 
maximum cell size as the threshold.

> current predictor, a very efficient fit results. Hence, the residual map 
> shows small values almost across the whole surface. The same model with each 
> of the other predictors leads to almost the same fit and a similar residual 
> map.
>
> The problem is, that if i take the autocorrelation into account and model 
> with SAR, i cannot identify spatial patterns of the quality of the fit in 
> relation to different predictors. If i model with OLS, i get sensible 
> variations between the different residual maps, but the residuals are 
> strongly autocorrelated as this is natural for high resolution raster data.
>

The spatial autocorrelation modelled in the bivariate models is picking up 
the spatial patterning of the missing covariates. With your high 
resolution, they are all likely to be highly autocorrelated.

> - Do you have any ideas about an other approach for defining spatial weights?
>
> - Are there any legitimations for ignoring the autocorrelated residuals of 
> the OLS model since the research objective is to derive sensible variations 
> in the residual maps?

If (and only if) the OLS and SAR coefficients are the same, you can trust 
the OLS coefficients. If they are not, the model has other 
misspecifications in addition. What you cannot trust are the OLS 
coefficient standard errors, as they are biased by the residual 
autocorrelation. So it depends rather on what you mean by "sensible".

Hope this clarifies,

Roger

>
> ### selected code for calculating spatial weights and performing SAR: ###
>
> library(gstat)
> library(sp)
> library(spdep)
> library(rgdal)
>
> dst <- max(slot(slot(elev, "grid"), "cellsize"))
> elev_nb <- dnearneigh(coordinates(elev), 0, dst)
> sp_weights <- nb2listw(elev_nb)
>
> dif_vec <- c(dif at data$band1)
> elev_vec <- c(elev at data$band1)
>
> sp_fit <-  spautolm(dif_vec~slope_vec, listw = sp_weights, family="SAR", 
> method="Matrix", na.action=na.exclude)
>
> #################
>
> system: linux high performance cluster node with 2 Intel Quad-Core L5420 CPUs 
> (8 cores running on 2.5 GHz), 32 GB DDR2 RAM (4 GB per core)
> R version 2.13
>
> Thank you very much in advance!
>
> Max
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From momadou at yahoo.fr  Mon Jan  9 21:17:14 2012
From: momadou at yahoo.fr (Komine)
Date: Mon, 9 Jan 2012 12:17:14 -0800 (PST)
Subject: [R-sig-Geo] redundancy of coordinates of pixels
Message-ID: <1326140234659-7169408.post@n2.nabble.com>

Hi,
I have in a matrix 1 255 153 rows and corresponding to the coordinates of
burned pixels on 10 years. The coordinates are in UTM. I want to know the
pixels burned several times on the 10 years. However, less 1% of my pixels
were burned on the 10 years. It seems false. My code uses the center of
pixels, in this case, a same area can burn several times in the 10 years,
but because the center of pixels differ little one year to another, the code
will not show correctly me the pixels which burn each year. Because the code
required that the pixels have EXACTELY the same cordinates.  
Do you known a solution with R to resolve this problem?  
My Code: 
>redon<-read.table("C:\\Users\\Documents\\\\PixelFire.txt",sep="",dec=",",header=TRUE)
>XY <- redon[c("X", "Y")]  
>Z<-xtabs(~apply(XY,1,paste,collapse="-")) 
>Z2<-matrix(unlist(strsplit(names(Z),"-")),ncol=2,byrow=T) 
>Matrice<-data.frame(Z2,freq=Z[])
>write.table(Matrice,"C:\\Users\\Desktop\\Matrice.txt",sep=" ")

Sorry for my bad English!
Thank you in advance 


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/redundancy-of-coordinates-of-pixels-tp7169408p7169408.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From jhullman at umich.edu  Mon Jan  9 23:02:35 2012
From: jhullman at umich.edu (Jessica Ruth Hullman)
Date: Mon, 09 Jan 2012 17:02:35 -0500
Subject: [R-sig-Geo] [R-sig-geo] quantify prediction variance by point with
	ordinary kriging
Message-ID: <fddf8cfb995e9b37fb16e96319190e0e@umich.edu>


Hi,

I'm still fairly new to kriging, and have been using ordinary kriging with
the gstat package on radon data from location in the north east US. I'm
basically using the method here to do this - 
http://casoilresource.lawr.ucdavis.edu/drupal/node/442
(create coordinates, then expand to grid, convert to gstat object, fit
variogram, update gstat object, then use predict() command, visualizing
with spplot()  

I'm creating kriging plots from a set of data sets, and then having people
estimate the radon value for each plot at a given location. It appears that
the kriging prediction variance sometimes causes the value shown on a plot
to fall in a different range (according to the legend) than the actual
value for that location in the input data set. I need to be able to
quantify exactly what the variance is (including direction) at my target
location by comparing the value from the output of the prediction (which I
understand is a SpatialPixelsDataFrame) to my value from the input data
set. 

I've been reading gstat documentation, but haven't been able to determine
the easiest way to do the translation I need to quantify variance by point.
Could anyone point me in the right direction? 

Thank you very much,

Jessica Hullman
Doctoral Candidate, Information Visualization
University of Michigan School of Information


From edzer.pebesma at uni-muenster.de  Mon Jan  9 23:46:46 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Mon, 09 Jan 2012 23:46:46 +0100
Subject: [R-sig-Geo] [R-sig-geo] quantify prediction variance by point
 with ordinary kriging
In-Reply-To: <fddf8cfb995e9b37fb16e96319190e0e@umich.edu>
References: <fddf8cfb995e9b37fb16e96319190e0e@umich.edu>
Message-ID: <4F0B6E56.6040707@uni-muenster.de>

Jessica, there are many things in your email that I don't understand
("direction of variance", "translation needed to quantify variance by
point"), but it might be that cross validation (krige.cv) is what you're
looking for.

Hth,

On 01/09/2012 11:02 PM, Jessica Ruth Hullman wrote:
> 
> Hi,
> 
> I'm still fairly new to kriging, and have been using ordinary kriging with
> the gstat package on radon data from location in the north east US. I'm
> basically using the method here to do this - 
> http://casoilresource.lawr.ucdavis.edu/drupal/node/442
> (create coordinates, then expand to grid, convert to gstat object, fit
> variogram, update gstat object, then use predict() command, visualizing
> with spplot()  
> 
> I'm creating kriging plots from a set of data sets, and then having people
> estimate the radon value for each plot at a given location. It appears that
> the kriging prediction variance sometimes causes the value shown on a plot
> to fall in a different range (according to the legend) than the actual
> value for that location in the input data set. I need to be able to
> quantify exactly what the variance is (including direction) at my target
> location by comparing the value from the output of the prediction (which I
> understand is a SpatialPixelsDataFrame) to my value from the input data
> set. 
> 
> I've been reading gstat documentation, but haven't been able to determine
> the easiest way to do the translation I need to quantify variance by point.
> Could anyone point me in the right direction? 
> 
> Thank you very much,
> 
> Jessica Hullman
> Doctoral Candidate, Information Visualization
> University of Michigan School of Information
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From mathieu.rajerison at gmail.com  Tue Jan 10 09:37:58 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Tue, 10 Jan 2012 09:37:58 +0100
Subject: [R-sig-Geo] [R] Spatial data, rpoispp,
	using window with fixed radius?
In-Reply-To: <57DC18C299094D4299F837570C5DF1C558B6E62CBC@EXWA-MBX01.nexus.csiro.au>
References: <20120106131734.325830@gmx.net> <4F079952.8030701@xtra.co.nz>
	<57DC18C299094D4299F837570C5DF1C558B6E62CBC@EXWA-MBX01.nexus.csiro.au>
Message-ID: <CAGfc75mqKgCes1Zw3QRvMH_dgj282aiyOW=Te6W+FU2ocgPJgg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120110/55cff976/attachment.pl>

From andrew.hartley at metoffice.gov.uk  Tue Jan 10 13:32:27 2012
From: andrew.hartley at metoffice.gov.uk (Hartley, Andrew)
Date: Tue, 10 Jan 2012 12:32:27 -0000
Subject: [R-sig-Geo] rotate-ing a raster brick?
Message-ID: <E40ECC4BCBB70543AB323A3492ACB34606830387@EXXMAIL01.desktop.frd.metoffice.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120110/d8636f68/attachment.pl>

From tony333_6 at hotmail.com  Tue Jan 10 13:34:47 2012
From: tony333_6 at hotmail.com (tony333)
Date: Tue, 10 Jan 2012 04:34:47 -0800 (PST)
Subject: [R-sig-Geo] problem in reading NC file and plot it
In-Reply-To: <1325764701566-7154236.post@n2.nabble.com>
References: <1325685916452-7150538.post@n2.nabble.com>
	<1325764701566-7154236.post@n2.nabble.com>
Message-ID: <1326198887407-7171863.post@n2.nabble.com>

require(raster);require(ncdf) 
# Assuming that the variable name is slp 
b <- brick(slp.mon.mean.nc, varname = 'slp') 
# now you can plot any of the time step using: 
plot(raster(b, layer = 1))# time step one 

But there might be several other ways to do what you want. 

Regards, 
Lars .
#############################################################
i use this method to plot slp.mon.mean.nc 
give me error 
 Error in .local(x, ...) : could not find function ".hasSlot"
Error in plot(raster(b, layer = 1)) : 
  error in evaluating the argument 'x' in selecting a method for function
'plot'
and i use 
image.plot(raster(b,layer=1))
the error is Error in .local(x, ...) : could not find function ".hasSlot"
 thanks for help

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/problem-in-reading-NC-file-and-plot-it-tp7150538p7171863.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From jhullman at umich.edu  Tue Jan 10 17:11:17 2012
From: jhullman at umich.edu (Jessica H.)
Date: Tue, 10 Jan 2012 08:11:17 -0800 (PST)
Subject: [R-sig-Geo] [R-sig-geo] quantify prediction variance by point
 with ordinary kriging
In-Reply-To: <fddf8cfb995e9b37fb16e96319190e0e@umich.edu>
References: <fddf8cfb995e9b37fb16e96319190e0e@umich.edu>
Message-ID: <1326211877860-7172697.post@n2.nabble.com>

Yes, the cross validation allowed me to get the residuals by location, which
is what I was looking for. Thanks.

Jessica

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/R-sig-geo-quantify-prediction-variance-by-point-with-ordinary-kriging-tp7169775p7172697.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From jbustosmelo at yahoo.es  Tue Jan 10 19:06:05 2012
From: jbustosmelo at yahoo.es (Jose Bustos Melo)
Date: Tue, 10 Jan 2012 18:06:05 +0000 (GMT)
Subject: [R-sig-Geo] Spatial join using shapefiles  with R
Message-ID: <1326218765.54638.YahooMailNeo@web26502.mail.ukl.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120110/5370adca/attachment.pl>

From cjpauw at gmail.com  Tue Jan 10 19:22:00 2012
From: cjpauw at gmail.com (christiaan pauw)
Date: Tue, 10 Jan 2012 20:22:00 +0200
Subject: [R-sig-Geo] Spatial join using shapefiles with R
In-Reply-To: <1326218765.54638.YahooMailNeo@web26502.mail.ukl.yahoo.com>
References: <1326218765.54638.YahooMailNeo@web26502.mail.ukl.yahoo.com>
Message-ID: <CAJESSmZLYhBoJQ93zkvNjjAS+15g4kjMgfMfx0Qzs_mvHzEZyg@mail.gmail.com>

Hallo Jose

Make sure you have:
library(rgdal)
library(sp)

read:
help(readOGR)

on reading Shapefiles into R

and;

help(overlay)

for the point-in-polygon operation

regards
Christiaan

P.S Please post repoducible code if you want more advice. See the posting guide

On 10 January 2012 20:06, Jose Bustos Melo <jbustosmelo at yahoo.es> wrote:
> Hi everyone,
>
> Its have been very difficult to do an spatial join with R and I couldn't find any good manual about it. So, I will explain it if someone is willing to help.
>
> I have one Shapefile with poligons (with its number) and another Shapefile with xy points. My idea is to obtain the number of the polygons where the points are found, in order to obtain their social data of those polygons.
>
> How can I do it? Is there any good way to do it? Where can I find informationa bout it? Any function?
>
> Thanks in advance
> Jos?
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>



-- 
Christiaan Pauw
Nova Institute
www.nova.org.za


From lyndon.estes at gmail.com  Tue Jan 10 19:21:45 2012
From: lyndon.estes at gmail.com (Lyndon Estes)
Date: Tue, 10 Jan 2012 13:21:45 -0500
Subject: [R-sig-Geo] Spatial join using shapefiles with R
In-Reply-To: <1326218765.54638.YahooMailNeo@web26502.mail.ukl.yahoo.com>
References: <1326218765.54638.YahooMailNeo@web26502.mail.ukl.yahoo.com>
Message-ID: <CALuVVabXsFRqGkoNBPD6UjffCQnMMBxdch7N0xg5=hw2_PkAHA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120110/36f72748/attachment.pl>

From jbustosmelo at yahoo.es  Tue Jan 10 21:33:21 2012
From: jbustosmelo at yahoo.es (Jose Bustos Melo)
Date: Tue, 10 Jan 2012 20:33:21 +0000 (GMT)
Subject: [R-sig-Geo] Spatial join using shapefiles with R
In-Reply-To: <CALuVVabXsFRqGkoNBPD6UjffCQnMMBxdch7N0xg5=hw2_PkAHA@mail.gmail.com>
References: <1326218765.54638.YahooMailNeo@web26502.mail.ukl.yahoo.com>
	<CALuVVabXsFRqGkoNBPD6UjffCQnMMBxdch7N0xg5=hw2_PkAHA@mail.gmail.com>
Message-ID: <1326227601.51430.YahooMailNeo@web26505.mail.ukl.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120110/7f773e0d/attachment.pl>

From r.turner at auckland.ac.nz  Tue Jan 10 22:18:29 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 11 Jan 2012 10:18:29 +1300
Subject: [R-sig-Geo] [R] Spatial data, rpoispp,
 using window with fixed radius?
In-Reply-To: <CAGfc75mqKgCes1Zw3QRvMH_dgj282aiyOW=Te6W+FU2ocgPJgg@mail.gmail.com>
References: <20120106131734.325830@gmx.net>
	<4F079952.8030701@xtra.co.nz>	<57DC18C299094D4299F837570C5DF1C558B6E62CBC@EXWA-MBX01.nexus.csiro.au>
	<CAGfc75mqKgCes1Zw3QRvMH_dgj282aiyOW=Te6W+FU2ocgPJgg@mail.gmail.com>
Message-ID: <4F0CAB25.8010109@auckland.ac.nz>

On 10/01/12 21:37, Mathieu Rajerison wrote:
> Hi Adrian,
>
> I can not see any reference about scanmeasure
     The function scanmeasure() is present in spatstat 1.25-1,  but is an
     "internal" (undocumented --- as yet?) function.
> and deviation
     Did you mean "dilation" (which is what Adrian referred to)?

     The dilation() function is present and documented.
> functions in
> the current spatstat manual: are these included in the newest version of
> spatstat?

     cheers,

         Rolf Turner


From moshersteven at gmail.com  Tue Jan 10 23:01:12 2012
From: moshersteven at gmail.com (steven mosher)
Date: Tue, 10 Jan 2012 14:01:12 -0800
Subject: [R-sig-Geo] rgdal hdf4 windows
In-Reply-To: <CAAdVEFDeHw3LRy6nh3=GyOjoYBwd0opk66RZrMLxMvXnFcm=bg@mail.gmail.com>
References: <CAAdVEFDeHw3LRy6nh3=GyOjoYBwd0opk66RZrMLxMvXnFcm=bg@mail.gmail.com>
Message-ID: <CAFFLneSx8JOF-VK267Az1g4Pdeu5mrRAgT=Kgx7TF-rtjq0Egg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120110/0afd84d7/attachment.pl>

From lars.dalby at gmail.com  Wed Jan 11 09:26:35 2012
From: lars.dalby at gmail.com (Lars Dalby)
Date: Wed, 11 Jan 2012 00:26:35 -0800 (PST)
Subject: [R-sig-Geo] problem in reading NC file and plot it
In-Reply-To: <1326198887407-7171863.post@n2.nabble.com>
References: <1325685916452-7150538.post@n2.nabble.com>
	<1325764701566-7154236.post@n2.nabble.com>
	<1326198887407-7171863.post@n2.nabble.com>
Message-ID: <1326270395023-7175429.post@n2.nabble.com>


tony333 wrote
> 
> i use this method to plot slp.mon.mean.nc 
> give me error 
>  Error in .local(x, ...) : could not find function ".hasSlot"
> Error in plot(raster(b, layer = 1)) : 
>   error in evaluating the argument 'x' in selecting a method for function
> 'plot'
> 
I am not sure what this error message means. Is the data you are trying to
plot publicly available? If so maybe you could provide a link, so I (and
anyone else) can give it a try?

Otherwise, I am not sure I can come any closer. Sorry.

Best regards
Lars

Lars Dalby, Msc., PhD student
E: lada at dmu.dk | T: +45 871 59013
Department of Bioscience, Aarhus University
Gren?vej 14, 8410 R?nde, Denmark


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/problem-in-reading-NC-file-and-plot-it-tp7150538p7175429.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From e.polaina at gmail.com  Wed Jan 11 10:20:32 2012
From: e.polaina at gmail.com (Ester Polaina Lacambra)
Date: Wed, 11 Jan 2012 10:20:32 +0100
Subject: [R-sig-Geo] Plotting shapefiles in R
Message-ID: <CAB3kvzMPraxboW54qB4cET8_oYe3dAwQa-spOpfup-fvgAfLgg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120111/7f7485a5/attachment.pl>

From babuawara at gmail.com  Wed Jan 11 11:15:53 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Wed, 11 Jan 2012 11:15:53 +0100
Subject: [R-sig-Geo] K-means clustering  with landsat data
Message-ID: <4F0D6159.8030308@gmail.com>

Hello Everyone,
I am trying to run k-means algorithm with R on Landsat images but it is 
giving error that the data type is not supported.
My syntax is
juneb1<-readGDAL("G:/landsat/New Landsat/June/2002-06-08/8juneb10.tif")
kmenjuneb<-kmeans(juneb1,10,iter.max = 6, nstart = 1,
        algorithm = c("Hartigan-Wong", "Lloyd", "Forgy",
                      "MacQueen"))
error message
Error in do_one(nmeth) : NA/NaN/Inf in foreign function call (arg 1)

Is there anyother way to do cluster analysis to spatial data in R?
Any help would be greatly appreciated.


Vikram.


From samanmonfared1 at gmail.com  Wed Jan 11 11:30:55 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Wed, 11 Jan 2012 14:00:55 +0330
Subject: [R-sig-Geo] problem in cokriging plot
Message-ID: <CAOytA4ZKW7ptfg_g47YnHgOe8LrY_7GYLmEA_BzuJawGfRFn+w@mail.gmail.com>

Hi.
I have some problems in prediction of cokriging

1)- I don't know how make a grid for prediction, I have a polygone and I select
3000 points into this polygone. I want make grid like "meuse.grid"

nc.sids <- readShapePoly("City Boundary.shp")
pts <- spsample(nc.sids, n=3000, type="regular")
grd<-data.frame(pts)
grided(grd)~c("x","y")


2)- I have problem for predict and plot results of cokriging:

coordinates(dd) = ~x+y
m<-vgm( 0.22493303,"Gau",78006.24,0,cutoff=100607.2, width = 100607.2/12)
g <- gstat(NULL, id = " B", form =  B ~1,data=dd,fill.cross = F)
g <- gstat(g, id = "A", form = A~1,data=dd,fill.cross = F)
g <- gstat(g, id = "T", form =  T~ 1,data=dd,fill.cross = F)
vm <- variogram(g,covariance=F)
plot(vm)
vm.fit <- fit.lmc(vm, g, model=m,fit.ranges =F)
plot(vm, vm.fit)

z<-predict(vm.fit,grd)

R output:

Error in function (classes, fdef, mtable)  :
  unable to find an inherited method for function "proj4string", for
signature "data.frame"


when I use

pts <- spsample(nc.sids, n=3000, type="regular")
grd <- as(pts, "SpatialPixels")
grided(grd)~c("x1","x2")
.
.
.
z<-predict(vm.fit,grd)
and when I use
 spplot(z,contour=T)

it is plot not all of predictions and thier variances only plot some of them.

when I want plot predictions or covariances

image(z["B.var"],col = "beige")

R output is:

Error in `[.data.frame`(x at data, i, j, ..., drop = FALSE) :
  undefined columns selected

how can I plot all three prediction variables and thier variances????


From mathieu.rajerison at gmail.com  Wed Jan 11 11:42:59 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 11 Jan 2012 11:42:59 +0100
Subject: [R-sig-Geo] K-means clustering with landsat data
In-Reply-To: <4F0D6159.8030308@gmail.com>
References: <4F0D6159.8030308@gmail.com>
Message-ID: <CAGfc75nk63PqWq4Uz0AbNsPFYeaB+QNXE-vOGZgh4TA4U+uJCA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120111/c41a2446/attachment.pl>

From Roger.Bivand at nhh.no  Wed Jan 11 11:46:36 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 11 Jan 2012 11:46:36 +0100 (CET)
Subject: [R-sig-Geo] K-means clustering  with landsat data
In-Reply-To: <4F0D6159.8030308@gmail.com>
References: <4F0D6159.8030308@gmail.com>
Message-ID: <alpine.LRH.2.00.1201111135310.9390@reclus.nhh.no>

On Wed, 11 Jan 2012, Vikram Ranga wrote:

> Hello Everyone,
> I am trying to run k-means algorithm with R on Landsat images but it is 
> giving error that the data type is not supported.
> My syntax is
> juneb1<-readGDAL("G:/landsat/New Landsat/June/2002-06-08/8juneb10.tif")

Please do check to see what has been read in. Use names(juneb1) to check 
the names of the bands/columns/variables in it. The object is a 
SpatialGridDataFrame, not a numeric matrix, not a data.frame. kmeans() 
takes first argument x:

        x: numeric matrix of data, or an object that can be coerced to
           such a matrix (such as a numeric vector or a data frame with
           all numeric columns).

So:

kmenjuneb<-kmeans(juneb1$band1, centers=10)

may work, if the first name was band1. However, it will not work well on a 
single variable. In addition, it does not work on data with missing 
values, so you may need to say:

df <- as(juneb1, "data.frame")
df1 <- df[complete.cases(df),]

kmenjuneb<-kmeans(df1, centers=10)

or something like that. Beware that subsetting a single column object may 
drop a dimension.

Reading the help pages of readGDAL, SpatialGridDataFrame and kmeans would 
have helped.

Hope this clarifies,

Roger


> kmenjuneb<-kmeans(juneb1,10,iter.max = 6, nstart = 1,
>       algorithm = c("Hartigan-Wong", "Lloyd", "Forgy",
>                     "MacQueen"))
> error message
> Error in do_one(nmeth) : NA/NaN/Inf in foreign function call (arg 1)
>
> Is there anyother way to do cluster analysis to spatial data in R?
> Any help would be greatly appreciated.
>
>
> Vikram.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From edzer.pebesma at uni-muenster.de  Wed Jan 11 12:02:39 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 11 Jan 2012 12:02:39 +0100
Subject: [R-sig-Geo] problem in cokriging plot
In-Reply-To: <CAOytA4ZKW7ptfg_g47YnHgOe8LrY_7GYLmEA_BzuJawGfRFn+w@mail.gmail.com>
References: <CAOytA4ZKW7ptfg_g47YnHgOe8LrY_7GYLmEA_BzuJawGfRFn+w@mail.gmail.com>
Message-ID: <4F0D6C4F.8060007@uni-muenster.de>

Saman, in communicating these things it would be helpful if you provided
examples that we can reproduce, with data that are available in the
packages.

For instance, I'm sure your command

grided(grd)~c("x","y")

will have caused an error message, because it is plain wrong. Whether
this is a mistake in your email, or whether you simply ignored the error
message (never a good idea) is now unclear.

On 01/11/2012 11:30 AM, Saman Monfared wrote:
> Hi.
> I have some problems in prediction of cokriging
> 
> 1)- I don't know how make a grid for prediction, I have a polygone and I select
> 3000 points into this polygone. I want make grid like "meuse.grid"
> 
> nc.sids <- readShapePoly("City Boundary.shp")
> pts <- spsample(nc.sids, n=3000, type="regular")
> grd<-data.frame(pts)
> grided(grd)~c("x","y")
> 
> 
> 2)- I have problem for predict and plot results of cokriging:
> 
> coordinates(dd) = ~x+y
> m<-vgm( 0.22493303,"Gau",78006.24,0,cutoff=100607.2, width = 100607.2/12)
> g <- gstat(NULL, id = " B", form =  B ~1,data=dd,fill.cross = F)
> g <- gstat(g, id = "A", form = A~1,data=dd,fill.cross = F)
> g <- gstat(g, id = "T", form =  T~ 1,data=dd,fill.cross = F)
> vm <- variogram(g,covariance=F)
> plot(vm)
> vm.fit <- fit.lmc(vm, g, model=m,fit.ranges =F)
> plot(vm, vm.fit)
> 
> z<-predict(vm.fit,grd)
> 
> R output:
> 
> Error in function (classes, fdef, mtable)  :
>   unable to find an inherited method for function "proj4string", for
> signature "data.frame"
> 
> 
> when I use
> 
> pts <- spsample(nc.sids, n=3000, type="regular")
> grd <- as(pts, "SpatialPixels")
> grided(grd)~c("x1","x2")
> .
> .
> .
> z<-predict(vm.fit,grd)
> and when I use
>  spplot(z,contour=T)
> 
> it is plot not all of predictions and thier variances only plot some of them.
> 
> when I want plot predictions or covariances
> 
> image(z["B.var"],col = "beige")
> 
> R output is:
> 
> Error in `[.data.frame`(x at data, i, j, ..., drop = FALSE) :
>   undefined columns selected
> 
> how can I plot all three prediction variables and thier variances????
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From lyndon.estes at gmail.com  Wed Jan 11 15:25:36 2012
From: lyndon.estes at gmail.com (Lyndon Estes)
Date: Wed, 11 Jan 2012 09:25:36 -0500
Subject: [R-sig-Geo] Spatial join using shapefiles with R
In-Reply-To: <1326227601.51430.YahooMailNeo@web26505.mail.ukl.yahoo.com>
References: <1326218765.54638.YahooMailNeo@web26502.mail.ukl.yahoo.com>
	<CALuVVabXsFRqGkoNBPD6UjffCQnMMBxdch7N0xg5=hw2_PkAHA@mail.gmail.com>
	<1326227601.51430.YahooMailNeo@web26505.mail.ukl.yahoo.com>
Message-ID: <CALuVVaa-=3s-r_9MP7j0iM5w+uFi=xryYHAHR0bNKNj8Ny=ppw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120111/e0255f60/attachment.pl>

From karl at huftis.org  Wed Jan 11 15:31:27 2012
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Wed, 11 Jan 2012 15:31:27 +0100
Subject: [R-sig-Geo] question regarding outdated map polygons
References: <5BF45041-AF94-4860-87C4-97FAA55B10C9@icbm.de>
Message-ID: <jek6g0$ad7$1@dough.gmane.org>

Robert Ptacnik wrote:

> where can I find current maps of Europe? The polygons contained in
> (geo-)mapdata correspond to the borders before 1990 (e.g. Yugoslavia,
> Czechoslovakia instead of the new states). Is there any updated source
> within R?

Try the ?cshapes? or ?rworldmap? packages:

http://cran.r-project.org/web/packages/cshapes/
http://cran.r-project.org/web/packages/rworldmap/

-- 
Karl Ove Hufthammer


From jbustosmelo at yahoo.es  Wed Jan 11 16:13:00 2012
From: jbustosmelo at yahoo.es (Jose Bustos Melo)
Date: Wed, 11 Jan 2012 15:13:00 +0000 (GMT)
Subject: [R-sig-Geo] Spatial join using shapefiles with R
In-Reply-To: <CALuVVaa-=3s-r_9MP7j0iM5w+uFi=xryYHAHR0bNKNj8Ny=ppw@mail.gmail.com>
References: <1326218765.54638.YahooMailNeo@web26502.mail.ukl.yahoo.com>
	<CALuVVabXsFRqGkoNBPD6UjffCQnMMBxdch7N0xg5=hw2_PkAHA@mail.gmail.com>
	<1326227601.51430.YahooMailNeo@web26505.mail.ukl.yahoo.com>
	<CALuVVaa-=3s-r_9MP7j0iM5w+uFi=xryYHAHR0bNKNj8Ny=ppw@mail.gmail.com>
Message-ID: <1326294780.30475.YahooMailNeo@web26501.mail.ukl.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120111/091e8172/attachment.pl>

From celso at stephan.mus.br  Wed Jan 11 20:06:43 2012
From: celso at stephan.mus.br (celso at stephan.mus.br)
Date: Wed, 11 Jan 2012 16:06:43 -0300 (BRT)
Subject: [R-sig-Geo] Plotting shapefiles in R
In-Reply-To: <CAB3kvzMPraxboW54qB4cET8_oYe3dAwQa-spOpfup-fvgAfLgg@mail.gmail.com>
References: <CAB3kvzMPraxboW54qB4cET8_oYe3dAwQa-spOpfup-fvgAfLgg@mail.gmail.com>
Message-ID: <50890.143.106.1.36.1326308803.squirrel@001mail.001mail.com.br>

Try this:

## read polygon SHP
library(shapefiles)
poli<-read.shapefile("your shp file name")
poli<-convert.to.simple(poli$shp)
poli<-poli[,-1]
plot(poli)





> Hello,
>
> I am trying to perform several spatial analysis on R, based on polygon
> lists. My data come from ArcGIS, being in shape format. I would like to
> create a polygon list from this file. Apparently, R reads properly the
> file
> by using the function "read.shapefile", however when I try the function
> "plot" on this object, the program does not recognize which are the X and
> Y
> coordinates (which -by the way- are in decimal degree units). Should I use
> any specific sintaxis to indicate which columns are my coordinates? or
> maybe I have to project my coordinates somehow?
>
> Thank you very much indeed,
>
> --
> Ester
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From Roger.Bivand at nhh.no  Wed Jan 11 20:30:56 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 11 Jan 2012 20:30:56 +0100 (CET)
Subject: [R-sig-Geo] Plotting shapefiles in R
In-Reply-To: <50890.143.106.1.36.1326308803.squirrel@001mail.001mail.com.br>
References: <CAB3kvzMPraxboW54qB4cET8_oYe3dAwQa-spOpfup-fvgAfLgg@mail.gmail.com>
	<50890.143.106.1.36.1326308803.squirrel@001mail.001mail.com.br>
Message-ID: <alpine.LRH.2.00.1201112028020.11113@reclus.nhh.no>

On Wed, 11 Jan 2012, celso at stephan.mus.br wrote:

> Try this:

Please note that the shapefiles package has not been revised since 2006, 
and does not use sp classes, so you are completely stuck with the import 
data representation of that package. See the "Spatial" task view on CRAN 
for better supported alternatives.

Roger

>
> ## read polygon SHP
> library(shapefiles)
> poli<-read.shapefile("your shp file name")
> poli<-convert.to.simple(poli$shp)
> poli<-poli[,-1]
> plot(poli)
>
>
>
>
>
>> Hello,
>>
>> I am trying to perform several spatial analysis on R, based on polygon
>> lists. My data come from ArcGIS, being in shape format. I would like to
>> create a polygon list from this file. Apparently, R reads properly the
>> file
>> by using the function "read.shapefile", however when I try the function
>> "plot" on this object, the program does not recognize which are the X and
>> Y
>> coordinates (which -by the way- are in decimal degree units). Should I use
>> any specific sintaxis to indicate which columns are my coordinates? or
>> maybe I have to project my coordinates somehow?
>>
>> Thank you very much indeed,
>>
>> --
>> Ester
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From tephilippi at gmail.com  Wed Jan 11 21:36:14 2012
From: tephilippi at gmail.com (Tom Philippi)
Date: Wed, 11 Jan 2012 12:36:14 -0800
Subject: [R-sig-Geo] Plotting shapefiles in R
In-Reply-To: <alpine.LRH.2.00.1201112028020.11113@reclus.nhh.no>
References: <CAB3kvzMPraxboW54qB4cET8_oYe3dAwQa-spOpfup-fvgAfLgg@mail.gmail.com>
	<50890.143.106.1.36.1326308803.squirrel@001mail.001mail.com.br>
	<alpine.LRH.2.00.1201112028020.11113@reclus.nhh.no>
Message-ID: <CALyPt8zV0+kYXdJwhaLNbQfCqH_wi-d9J-XpT6t6D8A1MRROXQ@mail.gmail.com>

Roger didn't say it (but he wrote the book on it), but an alternative
would be something like:
library(sp)
library(rgdall)
poli<-readOGR("directory","shapefilename without .shp")
class(poli) # SpatialPolygonsDataFrame
proj4string(poli) # projection information
spplot(poli)

One advantage is that by using sp classes, this approach allows you to
reproject via spTransform(), colorize polygons by values of an
attribute in the dataframe in spplot(), and actually do more things
with the spatial data.

Tom 2


From r.hijmans at gmail.com  Thu Jan 12 01:23:35 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 11 Jan 2012 16:23:35 -0800
Subject: [R-sig-Geo] rotate-ing a raster brick?
In-Reply-To: <E40ECC4BCBB70543AB323A3492ACB34606830387@EXXMAIL01.desktop.frd.metoffice.com>
References: <E40ECC4BCBB70543AB323A3492ACB34606830387@EXXMAIL01.desktop.frd.metoffice.com>
Message-ID: <CANtt_hzNL0jvw+Gj+KOzOGpkg_H4F5f3fawaF-wfVRqkJ61crA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120111/d7419639/attachment.pl>

From r.hijmans at gmail.com  Thu Jan 12 01:24:36 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 11 Jan 2012 16:24:36 -0800
Subject: [R-sig-Geo] problem in reading NC file and plot it
In-Reply-To: <1326198887407-7171863.post@n2.nabble.com>
References: <1325685916452-7150538.post@n2.nabble.com>
	<1325764701566-7154236.post@n2.nabble.com>
	<1326198887407-7171863.post@n2.nabble.com>
Message-ID: <CANtt_hxBKrKsudLeaHZ1SfB86iUGnT3cu-eGX=oWvQKrwJV6bA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120111/de151c61/attachment.pl>

From r.hijmans at gmail.com  Thu Jan 12 01:28:55 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 11 Jan 2012 16:28:55 -0800
Subject: [R-sig-Geo] redundancy of coordinates of pixels
In-Reply-To: <1326140234659-7169408.post@n2.nabble.com>
References: <1326140234659-7169408.post@n2.nabble.com>
Message-ID: <CANtt_hwHZ=FK7AGhYcpSWqaCgFuzxiWTSKvNGUDbFaPCszeXrA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120111/ac50b195/attachment.pl>

From r.hijmans at gmail.com  Thu Jan 12 01:33:58 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 11 Jan 2012 16:33:58 -0800
Subject: [R-sig-Geo] connection error when calling maxent()
In-Reply-To: <1325695956381-7151125.post@n2.nabble.com>
References: <1325695956381-7151125.post@n2.nabble.com>
Message-ID: <CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120111/1f9b31ce/attachment.pl>

From dieter.mayr at boku.ac.at  Thu Jan 12 10:25:49 2012
From: dieter.mayr at boku.ac.at (didimayr)
Date: Thu, 12 Jan 2012 01:25:49 -0800 (PST)
Subject: [R-sig-Geo] summing up the highest Raster values within polygons
Message-ID: <1326360349753-7179641.post@n2.nabble.com>

Dear all,

I have a little bit complex problem and don't know how to start solving it.
Maybe someone has experience with similar issues or knows a solution.

1) I have many Raster files with (solar-)energy-Values, based on a digital
elevation model (DEM). Depending on the orientation and the slope of cell,
the raster represents the applicability of this field to install a
photovoltaic modul. 
2) Furthermore I have polygons representing the shape of houses (=roof)
lying in the same (raster) area. So the solar-values of the Raster indicate,
if the house well orientated for a solar module. 

Now I first have to cut the raster with the polygons, in order to analyze
only the roof areas (which are in my interest).
Then comes the main problem: I want to know the energy-value on each roof
(=within each polygon), however it should not only be the sum of the whole
roof, because solarmodules are only situated on the best sites of the roof.
Thus I need to identify a "cluster" or "window" of the highest cell-values
within the polygon, which I want to sum up. If necessary I could define the
size of this window/cluster.

 
It seems to me that I have to work with a focal function or by using RSAGA:
multi.focal.function.
are there other possible approaches and has anyone done a similar analyzis?

Thanks a lot and kind regards
Dieter Mayr







--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/summing-up-the-highest-Raster-values-within-polygons-tp7179641p7179641.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From andrew.hartley at metoffice.gov.uk  Thu Jan 12 10:47:35 2012
From: andrew.hartley at metoffice.gov.uk (Andy Hartley)
Date: Thu, 12 Jan 2012 01:47:35 -0800 (PST)
Subject: [R-sig-Geo] rotate-ing a raster brick?
In-Reply-To: <CANtt_hzNL0jvw+Gj+KOzOGpkg_H4F5f3fawaF-wfVRqkJ61crA@mail.gmail.com>
References: <E40ECC4BCBB70543AB323A3492ACB34606830387@EXXMAIL01.desktop.frd.metoffice.com>
	<CANtt_hzNL0jvw+Gj+KOzOGpkg_H4F5f3fawaF-wfVRqkJ61crA@mail.gmail.com>
Message-ID: <E40ECC4BCBB70543AB323A3492ACB34606830390@EXXMAIL01.desktop.frd.metoffice.com>

Hi Robert,
 
Thanks for replying. Unfortunately I can't change my version of R (we
have a centrally installed version that gets rolled out every so often).
I think raster is up to date though. Here's the info you asked for - the
traceback doesn't make much sense to me!
 
I've already done a work around (looping through each band, and stacking
at the end), but it would be nice to understand why this is happening.
 
Cheers,
Andy
 
 
> sessionInfo()
R version 2.13.1 (2011-07-08)
Platform: x86_64-unknown-linux-gnu (64-bit)
 
locale:
[1] C
 
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

 
other attached packages:
[1] ncdf_1.6.6    raster_1.9-52 sp_0.9-93    
 
loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-30 tools_2.13.1   
> rbb <- rotate(rb)
Error in rowSums(is.na(x)) : 
  'x' must be an array of at least two dimensions
> traceback()
10: stop("'x' must be an array of at least two dimensions")
9: rowSums(is.na(x))
8: .local(x, y, ...)
7: merge(x, tolerance = tolerance, filename = filename, format = format,

       datatype = datatype, overwrite = overwrite, progress = progress, 
       ext = ext, overlap = overlap, check = FALSE)
6: merge(x, tolerance = tolerance, filename = filename, format = format,

       datatype = datatype, overwrite = overwrite, progress = progress, 
       ext = ext, overlap = overlap, check = FALSE)
5: .local(x, y, ...)
4: merge(r1, r2, ...)
3: merge(r1, r2, ...)
2: rotate(rb)
1: rotate(rb)

 

-- 
Andrew Hartley Climate Impacts Risk Analyst
Met Office FitzRoy Road Exeter EX1 3PB United Kingdom
Tel: +44 (0)1392 885720 Fax: +44 (0)1392 885681
E-mail: andrew.hartley at metoffice.gov.uk http://www.metoffice.gov.uk
<blocked::http://www.metoffice.gov.uk/> 

Join us in celebrating 150 years of forecasting for the nation and enter
our photo competition
http://www.metoffice.gov.uk/about-us/who/our-history
<blocked::http://www.metoffice.gov.uk/about-us/who/our-history>  

 

________________________________

From: Robert Hijmans [via R-sig-geo]
[mailto:ml-node+s2731867n7179261h67 at n2.nabble.com] 
Sent: 12 January 2012 09:18
To: Hartley, Andrew
Subject: Re: rotate-ing a raster brick?


Andrew, 
Strange, the same thing (for the same file) works for me. Could you send

your sessionInfo() and a traceback() after the error occurs ( that
should 
reveal where the call to rowSums(is.na(x)) occurs (I have no idea) that
the 
error message complains about ) 
Robert 

On Tue, Jan 10, 2012 at 4:32 AM, Hartley, Andrew < 
[hidden email]> wrote: 


> Hi list, 
> 
> First, a big thank you to the people behind the development of the 
> "raster" package - I find it very useful, especially with the addition

> of the Z dimension. Now, a question - I've imported climate data into
R 
> from the CMIP5 project. All the data is in NetCDF format, which is
much 
> easier to handle now (big thanks for that!). I find the 'rotate' 
> function especially useful because most of these datasets seem to be 
> between 0 and 360 degrees. 
> 
> I've used rotate successfully on one band of the imported data, but it

> throws up an error with bricks or stacks. See the code below. Is this
a 
> known error, or am I doing something wrong? 
> 
> Cheers, 
> Andy 
> 
> Example file downloaded from 
>
http://pcmdi3.llnl.gov/esgcet/dataset/cmip5.output1.CCCma.CanESM2.esmHis
> torical.mon.atmos.Amon.r1i1p1.html 
> 
>
f="CMIP5/CCCma/CanESM2/historical/mon/atmos/Amon/r1i1p1/v20111028/pr/pr_

> Amon_CanESM2_historical_r1i1p1_185001-200512.nc" 
> 
> rb <- brick(f, crs="+proj=longlat +datum=WGS84") 
> rb 
> class       : RasterBrick 
> dimensions  : 64, 128, 8192, 1872  (nrow, ncol, ncell, nlayers) 
> resolution  : 2.8125, 2.789327  (x, y) 
> extent      : -1.40625, 358.5938, -89.25846, 89.25846  (xmin, xmax, 
> ymin, ymax) 
> coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
> values      : /media/WD 
>
MYBOOK/CMIP5/CCCma/CanESM2/historical/mon/atmos/Amon/r1i1p1/v20111028/pr

> /pr_Amon_CanESM2_historical_r1i1p1_185001-200512.nc 
> zvar        : pr 
> rbr <- rotate(rb) 
> Error in rowSums(is.na(x)) : 
>  'x' must be an array of at least two dimensions 
> 
> r <- subset(rb, 1) 
> rr <- rotate(r) 
> rr 
> class       : RasterLayer 
> dimensions  : 64, 128, 8192  (nrow, ncol, ncell) 
> resolution  : 2.8125, 2.789327  (x, y) 
> extent      : -181.4062, 178.5938, -89.25846, 89.25846  (xmin, xmax, 
> ymin, ymax) 
> coord. ref. : NA 
> values      : in memory 
> min value   : 0 
> max value   : 0.0003839434 
> -- 
> Andrew Hartley Climate Impacts Risk Analyst 
> Met Office FitzRoy Road Exeter EX1 3PB United Kingdom 
> Tel: +44 (0)1392 885720 Fax: +44 (0)1392 885681 
> E-mail: [hidden email] http://www.metoffice.gov.uk
> <blocked::http://www.metoffice.gov.uk/> 
> 
> Join us in celebrating 150 years of forecasting for the nation and
enter 
> our photo competition 
> http://www.metoffice.gov.uk/about-us/who/our-history
> <blocked::http://www.metoffice.gov.uk/about-us/who/our-history> 
> 
> 
>        [[alternative HTML version deleted]] 
> 
> _______________________________________________ 
> R-sig-Geo mailing list 
> [hidden email] 
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 

        [[alternative HTML version deleted]] 

_______________________________________________ 
R-sig-Geo mailing list 
[hidden email] 
https://stat.ethz.ch/mailman/listinfo/r-sig-geo



________________________________

If you reply to this email, your message will be added to the discussion
below:
http://r-sig-geo.2731867.n2.nabble.com/rotate-ing-a-raster-brick-tp71718
58p7179261.html 
To start a new topic under R-sig-geo, email
ml-node+s2731867n2731867h53 at n2.nabble.com 
To unsubscribe from R-sig-geo, click here
<http://r-sig-geo.2731867.n2.nabble.com/template/NamlServlet.jtp?macro=u
nsubscribe_by_code&node=2731867&code=YW5kcmV3LmhhcnRsZXlAbWV0b2ZmaWNlLmd
vdi51a3wyNzMxODY3fC0xNTc1OTEyMTQw> .
NAML
<http://r-sig-geo.2731867.n2.nabble.com/template/NamlServlet.jtp?macro=m
acro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.names
paces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.nam
l.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nab
ble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamesp
ace-nabble.view.web.template.InstantMailNamespace&breadcrumbs=instant+em
ails%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_ins
tant_email%21nabble%3Aemail.naml>  


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/rotate-ing-a-raster-brick-tp7171858p7179691.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mathieu.rajerison at gmail.com  Thu Jan 12 10:52:17 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Thu, 12 Jan 2012 10:52:17 +0100
Subject: [R-sig-Geo] summing up the highest Raster values within polygons
In-Reply-To: <1326360349753-7179641.post@n2.nabble.com>
References: <1326360349753-7179641.post@n2.nabble.com>
Message-ID: <CAGfc75mEJM6BmhqE4yebAB4tANPKfEJR9f-bnZDLOS8dkpFhLA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120112/58806441/attachment.pl>

From samanmonfared1 at gmail.com  Thu Jan 12 12:24:13 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Thu, 12 Jan 2012 14:54:13 +0330
Subject: [R-sig-Geo] how can I add back transformation for ploting
Message-ID: <CAOytA4Z5Zr2oAJLcZnb2mW2J1js6hR-dFV+0+u_qy+uxiDVFLQ@mail.gmail.com>

Hi.
How can I add back a transformation in cokriging??

dd<-read.table("besss.txt",header=TRUE)
summary(dd)

*my target variable is B*

I used box-cox transformation by lambda=-.14

d<-((dd$B)^-.14-1)/-.14 then used transformed data to cross variography:

m<-vgm( 0.22493303,"Gau",78006.24,0,cutoff=100607.2, width = 100607.2/12)
g <- gstat(NULL, id = " d", form =  d ~1,data=dd,fill.cross = F)
g <- gstat(g, id = "A", form = A~1,data=dd,fill.cross = F)
g <- gstat(g, id = "T", form =  T~ 1,data=dd,fill.cross = F)
vm <- variogram(g,covariance=F)
plot(vm)
vm.fit <- fit.lmc(vm, g, model=m,fit.ranges =F)
nc.sids <- readShapePoly("City Boundary.shp")
pts <- spsample(nc.sids, n=3000, type="regular")
grd<-data.frame(pts)
gridded(grd)<-~x1+x2
pp<-predict(vm.fit,grd)

pp is prediction for transformed data
how can I add back the transformation for ploting by

image(pp,1) and countour(pp,1,add=T)??

Thanks.

-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From paulojus at c3sl.ufpr.br  Thu Jan 12 12:42:42 2012
From: paulojus at c3sl.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Thu, 12 Jan 2012 09:42:42 -0200 (BRST)
Subject: [R-sig-Geo] how can I add back transformation for ploting
In-Reply-To: <CAOytA4Z5Zr2oAJLcZnb2mW2J1js6hR-dFV+0+u_qy+uxiDVFLQ@mail.gmail.com>
References: <CAOytA4Z5Zr2oAJLcZnb2mW2J1js6hR-dFV+0+u_qy+uxiDVFLQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.00.1201120940310.1030@macalan.c3sl.ufpr.br>

A general approach is by using the (conditional) simulations

  - perform prediction obtaining conditional simulations
  - back transform the simulations (inverse box-cox transform)
  - obtains the summaries from the transformed values (such as the mean for 
the "kriged"map on the original scale

P.J.


On Thu, 12 Jan 2012, Saman Monfared wrote:

> Hi.
> How can I add back a transformation in cokriging??
>
> dd<-read.table("besss.txt",header=TRUE)
> summary(dd)
>
> *my target variable is B*
>
> I used box-cox transformation by lambda=-.14
>
> d<-((dd$B)^-.14-1)/-.14 then used transformed data to cross variography:
>
> m<-vgm( 0.22493303,"Gau",78006.24,0,cutoff=100607.2, width = 100607.2/12)
> g <- gstat(NULL, id = " d", form =  d ~1,data=dd,fill.cross = F)
> g <- gstat(g, id = "A", form = A~1,data=dd,fill.cross = F)
> g <- gstat(g, id = "T", form =  T~ 1,data=dd,fill.cross = F)
> vm <- variogram(g,covariance=F)
> plot(vm)
> vm.fit <- fit.lmc(vm, g, model=m,fit.ranges =F)
> nc.sids <- readShapePoly("City Boundary.shp")
> pts <- spsample(nc.sids, n=3000, type="regular")
> grd<-data.frame(pts)
> gridded(grd)<-~x1+x2
> pp<-predict(vm.fit,grd)
>
> pp is prediction for transformed data
> how can I add back the transformation for ploting by
>
> image(pp,1) and countour(pp,1,add=T)??
>
> Thanks.
>
> -- 
>
> Saman Monfared
> Msc Student,
> Department of Statistics, Shiraz University,
> Shiraz 71454, Iran
> Email: Samanmonfared1 at gmail.com
>
> Tel: +98 917 5305167
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From babuawara at gmail.com  Thu Jan 12 12:50:17 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 12 Jan 2012 12:50:17 +0100
Subject: [R-sig-Geo] for loop for raster class
Message-ID: <4F0EC8F9.5060409@gmail.com>

Hi,
I am trying to crop images using raster library it works fine but when i 
put that on loop it does not work
my syntax is
febb3<-raster("C:/landsat/New 
Landsat/February/L5146041_04120110201_B30.tif")
febb4<-raster("C:/landsat/New 
Landsat/February/L5146041_04120110201_B40.tif")
.
.
.
.
so on
msk<-raster("C:/landsat/mask.tif")
ls.im<-c(x1=janb3,x2=janb4,x3=febb3,x4=febb4,x5=octb3,x6=octb4,x7=novb3,x8=novb4,x9=decb3,x10=decb4)
ls.em<-c(1:10)
#for loop
for (i in 1:1){ls.em<-crop(ls.im[i],msk)}
error
Error in function (classes, fdef, mtable)  :
  unable to find an inherited method for function "crop", for signature 
"list"
I think there is a problem with the c or list function for concatenating 
all the images. I tried few things but no luck.
Any help would be highly appreciated.

Regards,
Vikram.


From edzer.pebesma at uni-muenster.de  Thu Jan 12 12:56:54 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 12 Jan 2012 12:56:54 +0100
Subject: [R-sig-Geo] for loop for raster class
In-Reply-To: <4F0EC8F9.5060409@gmail.com>
References: <4F0EC8F9.5060409@gmail.com>
Message-ID: <4F0ECA86.3060701@uni-muenster.de>

The error message suggests ls.im is a list; your script would be easier
to understand (for me) if you used

ls.im = list(x1=janb3,...,x10=decb4)

If ls.im is a list, you need to pass ls.im[[i]] to crop, which is a list
element (a raster), whereas ls.im[i] is a list (with one element).

On 01/12/2012 12:50 PM, Vikram Ranga wrote:
> Hi,
> I am trying to crop images using raster library it works fine but when i
> put that on loop it does not work
> my syntax is
> febb3<-raster("C:/landsat/New
> Landsat/February/L5146041_04120110201_B30.tif")
> febb4<-raster("C:/landsat/New
> Landsat/February/L5146041_04120110201_B40.tif")
> .
> .
> .
> .
> so on
> msk<-raster("C:/landsat/mask.tif")
> ls.im<-c(x1=janb3,x2=janb4,x3=febb3,x4=febb4,x5=octb3,x6=octb4,x7=novb3,x8=novb4,x9=decb3,x10=decb4)
> 
> ls.em<-c(1:10)
> #for loop
> for (i in 1:1){ls.em<-crop(ls.im[i],msk)}
> error
> Error in function (classes, fdef, mtable)  :
>  unable to find an inherited method for function "crop", for signature
> "list"
> I think there is a problem with the c or list function for concatenating
> all the images. I tried few things but no luck.
> Any help would be highly appreciated.
> 
> Regards,
> Vikram.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From babuawara at gmail.com  Thu Jan 12 13:38:16 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 12 Jan 2012 13:38:16 +0100
Subject: [R-sig-Geo] for loop for raster class
In-Reply-To: <4F0ECA86.3060701@uni-muenster.de>
References: <4F0EC8F9.5060409@gmail.com> <4F0ECA86.3060701@uni-muenster.de>
Message-ID: <4F0ED438.6080307@gmail.com>

Hi Edzer,
It worked!!!!!
Thanks a million

Vikram.

On 1/12/2012 12:56 PM, Edzer Pebesma wrote:
> The error message suggests ls.im is a list; your script would be easier
> to understand (for me) if you used
>
> ls.im = list(x1=janb3,...,x10=decb4)
>
> If ls.im is a list, you need to pass ls.im[[i]] to crop, which is a list
> element (a raster), whereas ls.im[i] is a list (with one element).
>
> On 01/12/2012 12:50 PM, Vikram Ranga wrote:
>> Hi,
>> I am trying to crop images using raster library it works fine but when i
>> put that on loop it does not work
>> my syntax is
>> febb3<-raster("C:/landsat/New
>> Landsat/February/L5146041_04120110201_B30.tif")
>> febb4<-raster("C:/landsat/New
>> Landsat/February/L5146041_04120110201_B40.tif")
>> .
>> .
>> .
>> .
>> so on
>> msk<-raster("C:/landsat/mask.tif")
>> ls.im<-c(x1=janb3,x2=janb4,x3=febb3,x4=febb4,x5=octb3,x6=octb4,x7=novb3,x8=novb4,x9=decb3,x10=decb4)
>>
>> ls.em<-c(1:10)
>> #for loop
>> for (i in 1:1){ls.em<-crop(ls.im[i],msk)}
>> error
>> Error in function (classes, fdef, mtable)  :
>>   unable to find an inherited method for function "crop", for signature
>> "list"
>> I think there is a problem with the c or list function for concatenating
>> all the images. I tried few things but no luck.
>> Any help would be highly appreciated.
>>
>> Regards,
>> Vikram.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From momadou at yahoo.fr  Thu Jan 12 13:46:57 2012
From: momadou at yahoo.fr (Komine)
Date: Thu, 12 Jan 2012 04:46:57 -0800 (PST)
Subject: [R-sig-Geo] redundancy of coordinates of pixels
In-Reply-To: <CANtt_hwHZ=FK7AGhYcpSWqaCgFuzxiWTSKvNGUDbFaPCszeXrA@mail.gmail.com>
References: <1326140234659-7169408.post@n2.nabble.com>
	<CANtt_hwHZ=FK7AGhYcpSWqaCgFuzxiWTSKvNGUDbFaPCszeXrA@mail.gmail.com>
Message-ID: <1326372417295-7180082.post@n2.nabble.com>

Hi everybody
Thank Robert for your help. 
I rounded the coordinates but the problem persists. However, I don?t
understand well the second suggestion (certainly problem of language). 
I thought to affect a number for each pixel and in this case, the problem
with the coordinates would be suppressed. Unfortunately, if I do it, the
problem will persist because almost all the coordinates are different.  
Note: Original data was handled with GIS software and I compute with R. 
Thanks for your help


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/redundancy-of-coordinates-of-pixels-tp7169408p7180082.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From rafael.wueest at wsl.ch  Thu Jan 12 15:27:35 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Thu, 12 Jan 2012 15:27:35 +0100
Subject: [R-sig-Geo] connection error when calling maxent()
In-Reply-To: <CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>
References: <1325695956381-7151125.post@n2.nabble.com>
	<CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>
Message-ID: <64A49B47-2775-4C57-9BFD-48993DA85A84@wsl.ch>

> It appears that the MaxEnt output file gets overwritten by another process.

Yes, I also have this impression after some testing (e.g. the temporary raster directories got emptied every time I started a new R raster session in parallel).

The problem disappeared when I updated to R 2.13.2, so no more worries from my side!

Many thanks for the help and the development of raster and associates - it's just great!

Rafael

On 12.01.2012, at 01:33, Robert J. Hijmans wrote:

> Rafael,
> 
> Please send more info about what you are doing. It appears that the MaxEnt output file gets overwritten by another process. Can you also send your sessionInfo() (after first updating R to a more recent version)?
> 
> Robert
> 
> 
> On Wed, Jan 4, 2012 at 8:52 AM, rafael.wueest <rafael.wueest at wsl.ch> wrote:
> Hi Folks
> 
> when I am trying to call the maxent() function within a function I created,
> I am getting the following error:
> 
> Error in file(con, "r") : cannot open the connection
> In addition: Warning message:
> In file(con, "r") :
>  cannot open file
> '/var/folders/ft/fthJYD+6GkCvmcCArZBaQU++waU/-Tmp-/R_raster_tmp/maxent/10943312360/species.lambdas':
> No such file or directory
> 
> I am here also pasting some output of
> >traceback()
> 7: file(con, "r")
> 6: readLines(paste(dirout, "/species.lambdas", sep = ""))
> 5: unlist(readLines(paste(dirout, "/species.lambdas", sep = "")))
> 4: .local(x, p, ...)
> 3: maxent(background, occ, args = me.args) at run4models_restios.r#558
> ...
> 
> I am using JGR on a Mac and downloaded the newest dismo (CRAN sources) and
> maxent version (see below).
> 
> Can anyone help me? I am happy to provide more detailed information...
> 
> Rafa
> 
> >maxent()
> This is MaxEnt version 3.3.3k
> 
> >sessionInfo()
> R version 2.12.2 (2011-02-25)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
> locale:
> [1] C
> 
> attached base packages:
> [1] splines   stats     graphics  grDevices utils     datasets  methods
> [8] base
> 
> other attached packages:
>  [1] gbm_1.6-3.1           survival_2.36-5       gam_1.04.1
>  [4] PresenceAbsence_1.1.5 maptools_0.8-10       lattice_0.19-33
>  [7] foreign_0.8-42        rgdal_0.6-33          dismo_0.7-14
> [10] raster_1.9-13         sp_0.9-84             JGR_1.7-7
> [13] iplots_1.1-4          JavaGD_0.5-4          rJava_0.9-1
> 
> loaded via a namespace (and not attached):
> [1] grid_2.12.2  tools_2.12.2
> Warning message:
> 'DESCRIPTION' file has 'Encoding' field and re-encoding is not possible
> 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/connection-error-when-calling-maxent-tp7151125p7151125.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From pearman at wsl.ch  Fri Jan 13 09:07:11 2012
From: pearman at wsl.ch (Peter B. Pearman)
Date: Fri, 13 Jan 2012 09:07:11 +0100
Subject: [R-sig-Geo] Fwd: Re:  connection error when calling maxent()
In-Reply-To: <64A49B47-2775-4C57-9BFD-48993DA85A84@wsl.ch>
References: <64A49B47-2775-4C57-9BFD-48993DA85A84@wsl.ch>
Message-ID: <4F0FE62F.7080204@wsl.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120113/5e83935d/attachment.pl>

From cribeiro at ualg.pt  Fri Jan 13 12:32:38 2012
From: cribeiro at ualg.pt (=?ISO-8859-1?Q?Concei=E7=E3o_Ribeiro?=)
Date: Fri, 13 Jan 2012 11:32:38 +0000
Subject: [R-sig-Geo]  Box map, Lisa map and Moran map
In-Reply-To: <CAC5Z6DRAyseUjMzU_jzbh97G=1OhzYqQ5afED_pqCHNKF_392Q@mail.gmail.com>
References: <CAC5Z6DRAyseUjMzU_jzbh97G=1OhzYqQ5afED_pqCHNKF_392Q@mail.gmail.com>
Message-ID: <CAC5Z6DTfpxFt1+NbczQUBMRv0E0+AC4R4Bn3sEw6hgHtLqhMfQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120113/d2a48b5e/attachment.pl>

From Roger.Bivand at nhh.no  Fri Jan 13 13:05:40 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 13 Jan 2012 13:05:40 +0100 (CET)
Subject: [R-sig-Geo] Box map, Lisa map and Moran map
In-Reply-To: <CAC5Z6DTfpxFt1+NbczQUBMRv0E0+AC4R4Bn3sEw6hgHtLqhMfQ@mail.gmail.com>
References: <CAC5Z6DRAyseUjMzU_jzbh97G=1OhzYqQ5afED_pqCHNKF_392Q@mail.gmail.com>
	<CAC5Z6DTfpxFt1+NbczQUBMRv0E0+AC4R4Bn3sEw6hgHtLqhMfQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1201131303420.8479@reclus.nhh.no>

On Fri, 13 Jan 2012, Concei??o Ribeiro wrote:

> Hello,
>
> how can I do a box map from a Moran scatterplot obtain by moran.plot()?
> and
> how can I do a Lisa Map and a Moran map from localmoran()?

None of the terms - Box map, Lisa map and Moran map - you use are well 
defined in this context. Please define them, and follow the posting guide 
by including a short code example using built-in data to illustrate your 
problem.

Roger


>
> Thank you veru much,
> Concei??o Ribeiro
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From thi_veloso at yahoo.com.br  Fri Jan 13 14:21:43 2012
From: thi_veloso at yahoo.com.br (Thiago Veloso)
Date: Fri, 13 Jan 2012 05:21:43 -0800 (PST)
Subject: [R-sig-Geo] Plotting shapefiles in R
In-Reply-To: <CAB3kvzMPraxboW54qB4cET8_oYe3dAwQa-spOpfup-fvgAfLgg@mail.gmail.com>
Message-ID: <1326460903.12847.YahooMailClassic@web161404.mail.bf1.yahoo.com>

  Dear Ester,

  This is a simple, yet effective, approach:
 
  library(maptools)
  myshp<-readShapePoly("path_to_your_shapefile")
  plot(myshp)

  Hope it helps,

  Thiago.

--- On Wed, 11/1/12, Ester Polaina Lacambra <e.polaina at gmail.com> wrote:

> From: Ester Polaina Lacambra <e.polaina at gmail.com>
> Subject: [R-sig-Geo] Plotting shapefiles in R
> To: r-sig-geo at r-project.org
> Date: Wednesday, 11 January, 2012, 7:20
> Hello,
> 
> I am trying to perform several spatial analysis on R, based
> on polygon
> lists. My data come from ArcGIS, being in shape format. I
> would like to
> create a polygon list from this file. Apparently, R reads
> properly the file
> by using the function "read.shapefile", however when I try
> the function
> "plot" on this object, the program does not recognize which
> are the X and Y
> coordinates (which -by the way- are in decimal degree
> units). Should I use
> any specific sintaxis to indicate which columns are my
> coordinates? or
> maybe I have to project my coordinates somehow?
> 
> Thank you very much indeed,
> 
> -- 
> Ester
> 
> ??? [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From pinaud at cebc.cnrs.fr  Fri Jan 13 17:11:57 2012
From: pinaud at cebc.cnrs.fr (Pinaud David)
Date: Fri, 13 Jan 2012 17:11:57 +0100
Subject: [R-sig-Geo] New locations added with gIntersection() using a
 self-intersecting Line
Message-ID: <4F1057CD.6050502@cebc.cnrs.fr>

Dear all,

I 'm intersecting a Line with a Polygon using gIntersection() in the 
rgeos package.
When I'm using gIntersection() with a "self-intersecting" Line, the 
"clipped" Line is correctly created, but a node is also added 
corresponding to the "self intersection" :

library(rgeos)
Le chargement a n?cessit? le package : sp
Le chargement a n?cessit? le package : stringr
rgeos: (SVN revision 287)
  GEOS runtime version: 3.3.1-CAPI-1.7.1
  Polygon checking: TRUE
  WARNING! if you turn polygon checking off, and polygons are
  not valid in GEOS, you risk losing data as your R session may crash!
Po1 <- readWKT("POLYGON((0 0,0 2,1 3.5,3 3,4 1,3 0,0 0))")
Lin1 <- readWKT("LINESTRING(0 3,1 1,2 2,3 0.5, 1 2.5, 3.5 2.5)")
Lin1po1 <- gIntersection(Lin1, Po1)
coordinates(Lin1po1)  # new segments are created, with new endpoints at 
(1.75, 1.75)
plot(Po1, axes=T, col="grey")
plot(Lin1, add=T)
plot(as(Lin1po1, "SpatialPoints"), add=T, col="red")

# even with no intersection with a larger polygon:
Po2 <- readWKT("POLYGON((-1 0,-1 3.5,4 4,4 -1,-1 0))")
Lin1po2 <- gIntersection(Lin1, Po2)
coordinates(Lin1po2)  # new segments are created, with new endpoints at 
(1.75, 1.75)
plot(Po2, axes=T, col="blue")
plot(Lin1, add=T)
plot(as(Lin1po2, "SpatialPoints"), add=T, col="red")

In the last case, one could expect Lin1 and Lin1po2 to be strictly 
identical (same nodes).
Is there a way to avoid the creation of such new location?
Thanks for your help.

David

-- 
***************************************************
Dr. David PINAUD
Ing?nieur de Recherche "Analyses spatiales"

Centre d'Etudes Biologiques de Chiz? - CNRS UPR1934
79360 Villiers-en-Bois, France
poste 485
Tel: +33 (0)5.49.09.35.58
Fax: +33 (0)5.49.09.65.26
http://www.cebc.cnrs.fr/

***************************************************

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pinaud.vcf
Type: text/x-vcard
Size: 324 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120113/561b796c/attachment.vcf>

From Roger.Bivand at nhh.no  Fri Jan 13 19:01:31 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 13 Jan 2012 19:01:31 +0100 (CET)
Subject: [R-sig-Geo] New locations added with gIntersection() using a
 self-intersecting Line
In-Reply-To: <4F1057CD.6050502@cebc.cnrs.fr>
References: <4F1057CD.6050502@cebc.cnrs.fr>
Message-ID: <alpine.LRH.2.00.1201131857270.10098@reclus.nhh.no>

On Fri, 13 Jan 2012, Pinaud David wrote:

> Dear all,
>
> I 'm intersecting a Line with a Polygon using gIntersection() in the rgeos 
> package.
> When I'm using gIntersection() with a "self-intersecting" Line, the "clipped" 
> Line is correctly created, but a node is also added corresponding to the 
> "self intersection" :

This is most likely a feature of JTS/GEOS, see:

http://www.vividsolutions.com/jts/bin/JTS%20Technical%20Specs.pdf

pp. 27-28.

Roger

>
> library(rgeos)
> Le chargement a n?cessit? le package : sp
> Le chargement a n?cessit? le package : stringr
> rgeos: (SVN revision 287)
> GEOS runtime version: 3.3.1-CAPI-1.7.1
> Polygon checking: TRUE
> WARNING! if you turn polygon checking off, and polygons are
> not valid in GEOS, you risk losing data as your R session may crash!
> Po1 <- readWKT("POLYGON((0 0,0 2,1 3.5,3 3,4 1,3 0,0 0))")
> Lin1 <- readWKT("LINESTRING(0 3,1 1,2 2,3 0.5, 1 2.5, 3.5 2.5)")
> Lin1po1 <- gIntersection(Lin1, Po1)
> coordinates(Lin1po1)  # new segments are created, with new endpoints at 
> (1.75, 1.75)
> plot(Po1, axes=T, col="grey")
> plot(Lin1, add=T)
> plot(as(Lin1po1, "SpatialPoints"), add=T, col="red")
>
> # even with no intersection with a larger polygon:
> Po2 <- readWKT("POLYGON((-1 0,-1 3.5,4 4,4 -1,-1 0))")
> Lin1po2 <- gIntersection(Lin1, Po2)
> coordinates(Lin1po2)  # new segments are created, with new endpoints at 
> (1.75, 1.75)
> plot(Po2, axes=T, col="blue")
> plot(Lin1, add=T)
> plot(as(Lin1po2, "SpatialPoints"), add=T, col="red")
>
> In the last case, one could expect Lin1 and Lin1po2 to be strictly identical 
> (same nodes).
> Is there a way to avoid the creation of such new location?
> Thanks for your help.
>
> David
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From fpb01 at health.state.ny.us  Fri Jan 13 20:01:53 2012
From: fpb01 at health.state.ny.us (Francis P. Boscoe)
Date: Fri, 13 Jan 2012 14:01:53 -0500
Subject: [R-sig-Geo] problem installing maptools
Message-ID: <OFFD572603.1024E18F-ON85257984.006734A4-85257984.00688F16@notes.health.state.ny.us>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120113/6f947d22/attachment.pl>

From fpb01 at health.state.ny.us  Fri Jan 13 20:39:36 2012
From: fpb01 at health.state.ny.us (Francis P. Boscoe)
Date: Fri, 13 Jan 2012 14:39:36 -0500
Subject: [R-sig-Geo] problem installing maptools
Message-ID: <OF10C4877D.6E69CE6E-ON85257984.006AA925-85257984.006C0330@notes.health.state.ny.us>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120113/a52c6405/attachment.pl>

From fpb01 at health.state.ny.us  Fri Jan 13 20:43:26 2012
From: fpb01 at health.state.ny.us (Francis P. Boscoe)
Date: Fri, 13 Jan 2012 14:43:26 -0500
Subject: [R-sig-Geo] problem installing maptools
Message-ID: <OFA5CBDCC9.E0C43B6A-ON85257984.006C2B6D-85257984.006C5CCC@notes.health.state.ny.us>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120113/b4014963/attachment.pl>

From Roger.Bivand at nhh.no  Fri Jan 13 20:58:32 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 13 Jan 2012 20:58:32 +0100 (CET)
Subject: [R-sig-Geo] problem installing maptools
In-Reply-To: <OFA5CBDCC9.E0C43B6A-ON85257984.006C2B6D-85257984.006C5CCC@notes.health.state.ny.us>
References: <OFA5CBDCC9.E0C43B6A-ON85257984.006C2B6D-85257984.006C5CCC@notes.health.state.ny.us>
Message-ID: <alpine.LRH.2.00.1201132056150.10406@reclus.nhh.no>

On Fri, 13 Jan 2012, Francis P. Boscoe wrote:

>
> Problem solved. I figured out how to download packages as zip files and
> install them from the menu, "Install package(s) from local zip files"
>

You'll also need to put in place some mechanism for checking for package 
updates - the update.packages() function is very useful, and keeps 
packages as fresh as possible. Some packages that are developing quickly, 
like raster, benefit from being updated frequently.

Roger

>
>
>
>
> IMPORTANT NOTICE: This e-mail and any attachments may contain confidential or sensitive information which is, or may be, legally privileged or otherwise protected by law from further disclosure. It is intended only for the addressee. If you received this in error or from someone who was not authorized to send it to you, please do not distribute, copy or use it or any attachments. Please notify the sender immediately by reply e-mail and delete this from your system. Thank you for your cooperation.
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From les_ecol at yahoo.com  Sat Jan 14 03:48:20 2012
From: les_ecol at yahoo.com (Laura S)
Date: Fri, 13 Jan 2012 18:48:20 -0800 (PST)
Subject: [R-sig-Geo] Trouble with Grass 6.4.2 and R 2.14.1 interface
Message-ID: <1326509300.2716.YahooMailNeo@web140319.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120113/0b277dae/attachment.pl>

From r.m.krug at gmail.com  Sat Jan 14 09:56:42 2012
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Sat, 14 Jan 2012 09:56:42 +0100
Subject: [R-sig-Geo] Trouble with Grass 6.4.2 and R 2.14.1 interface
In-Reply-To: <1326509300.2716.YahooMailNeo@web140319.mail.bf1.yahoo.com>
References: <1326509300.2716.YahooMailNeo@web140319.mail.bf1.yahoo.com>
Message-ID: <4F11434A.3050004@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 14/01/12 03:48, Laura S wrote:
> Dear all:
> 
> I am trying to get R to run with grass, but I am running into
> trouble.

A very useful combo - and usually works nicely.

> 
> 
> This is what I have done so far:
> 
> Installed GRASS 6.4.2 for Windows XP Installed spgrass6 with
> dependencies.
> 
> When I do: library(spgrass6) gmeta6()
> 
> I get the following: Error in system(cmd0,intern=TRUE);
> "g.region.exe' not found Error in parseGRASS(cmd) : g.region not
> found.

Under Linux (I know - you use Windows), you have to start GRASS and
then, from the GRASS console, start R. The reason is, that some
environmental variables need to be set for identifying the grass
database, location, mapset etc.

Something similar needs to be doe under Windows as well - so check
again in the manual or google, and you should find the right procedure
under Windows.

The other approach is to use initGRASS(), but Roger Bivand discourages
this if you want to access existing data in GRASS (although I use it
all the time and it works nicely).

But it seems to be, that under windows, the easiest way is to use
initGRASS(): see http://grass.osgeo.org/wiki/R_statistics

Hope this helps and enjoy this very powerful combo,

Rainer


> 
> Any suggestions are much appreciated. I am new to using GRASS with
> R, but I am looking forward to using them together to analyze
> data.
> 
> I am unsure which terminal to run R in GRASS because I keep getting
> errors in the command console in GRASS: I type into either "Command
> console in GRASS GIS Layer Manager" OR "GRASS Command Line":
> 
> R ...Then I get
> 
> 'R' is not recognized as an internal or external command, operable
> program or batch file.
> 
> 
> Thank you
> 
> Laura [[alternative HTML version deleted]]
> 
> _______________________________________________ R-sig-Geo mailing
> list R-sig-Geo at r-project.org 
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk8RQ0oACgkQoYgNqgF2egqRSgCfV1LLIXXpqv6HPaPWPyvFVs4X
LAYAnAo6M5KzdAC/aIuLa5vpetUW6oS7
=gea0
-----END PGP SIGNATURE-----


From Roger.Bivand at nhh.no  Sat Jan 14 10:03:36 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 14 Jan 2012 10:03:36 +0100 (CET)
Subject: [R-sig-Geo] Trouble with Grass 6.4.2 and R 2.14.1 interface
In-Reply-To: <1326509300.2716.YahooMailNeo@web140319.mail.bf1.yahoo.com>
References: <1326509300.2716.YahooMailNeo@web140319.mail.bf1.yahoo.com>
Message-ID: <alpine.LRH.2.00.1201140955490.12646@reclus.nhh.no>

On Fri, 13 Jan 2012, Laura S wrote:

> Dear all:
>
> I am trying to get R to run with grass, but I am running into trouble.
>
>
> This is what I have done so far:
>
> Installed GRASS 6.4.2 for Windows XP
> Installed spgrass6 with dependencies.
>
> When I do:
> library(spgrass6)
> gmeta6()
>
> I get the following:
> Error in system(cmd0,intern=TRUE); "g.region.exe' not found
> Error in parseGRASS(cmd) : g.region not found.
>
> Any suggestions are much appreciated. I am new to using GRASS with R, 
> but I am looking forward to using them together to analyze data.
>
> I am unsure which terminal to run R in GRASS because I keep getting 
> errors in the command console in GRASS: I type into either "Command 
> console in GRASS GIS Layer Manager" OR "GRASS Command Line":
>
> R
> ...Then I get
>
> 'R' is not recognized as an internal or external command, operable 
> program or batch file.

This suggests that you need to give the complete path to R from within 
your GRASS session. It may be "C:/Program Files/R/R-2.14.1/bin/Rgui.exe" 
or something like that, depending on where you installed it. You may also 
need to add R_LIBS="<whatever>" to this, to show where any local libraries 
may be.

Alternatively, you may try to add R's binary location to your PATH 
environment variable, and declare R_LIBS globally; these used to be under 
advanced system properties.

Finally, as Rainer suggests, you may start GRASS from within R, using the 
same logic in reverse, giving the full path to the GRASS install location 
to the initGRASS() function. The key in both cases is to find out where in 
your file system the software components live, and note changes when you 
upgrade.

Hope this helps,

Roger

>
>
> Thank you
>
> Laura
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From rafael.wueest at wsl.ch  Sat Jan 14 12:51:10 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Sat, 14 Jan 2012 12:51:10 +0100
Subject: [R-sig-Geo] connection error when calling maxent()
In-Reply-To: <CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>
References: <1325695956381-7151125.post@n2.nabble.com>
	<CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>
Message-ID: <92781526-59B3-47C2-8A5B-EB835FC5A628@wsl.ch>

Dear Robert,

Unfortunately, the problem is not completely solved for me yet. I am trying to run maxent() on a cluster, because I'm modeling >200 species, using 8 different parameterizations and 4 modeling algorithms (maxent is one of them), which results in >6000 models. The cluster is running R 2.12.2 and I can't update it on my own.

As a workaround, I tried to specify the path option in the maxent() function because I suspected some process might interfere with the temporary Raster directory. This seemed to run for quite some time, but after maxent being called for the 46th on one of the cluster's CPU, it crashed with the same error

> Error: No features available: select more feature types or deselect auto features
> Error in file(con, "r") : cannot open the connection
> Calls: run4models ... maxent -> maxent -> .local -> unlist -> readLines -> file
> In addition: Warning message:
> In file(con, "r") :
>   cannot open file '/.../me_output/xval/species.lambdas': No such file or directory
> Execution halted

Do you have any idea how I could still make maxent() functional using R 2.12.2?

Rafael


On 12.01.2012, at 01:33, Robert J. Hijmans wrote:

> Rafael,
> 
> Please send more info about what you are doing. It appears that the MaxEnt output file gets overwritten by another process. Can you also send your sessionInfo() (after first updating R to a more recent version)?
> 
> Robert
> 
> 
> On Wed, Jan 4, 2012 at 8:52 AM, rafael.wueest <rafael.wueest at wsl.ch> wrote:
> Hi Folks
> 
> when I am trying to call the maxent() function within a function I created,
> I am getting the following error:
> 
> Error in file(con, "r") : cannot open the connection
> In addition: Warning message:
> In file(con, "r") :
>  cannot open file
> '/var/folders/ft/fthJYD+6GkCvmcCArZBaQU++waU/-Tmp-/R_raster_tmp/maxent/10943312360/species.lambdas':
> No such file or directory
> 
> I am here also pasting some output of
> >traceback()
> 7: file(con, "r")
> 6: readLines(paste(dirout, "/species.lambdas", sep = ""))
> 5: unlist(readLines(paste(dirout, "/species.lambdas", sep = "")))
> 4: .local(x, p, ...)
> 3: maxent(background, occ, args = me.args) at run4models_restios.r#558
> ...
> 
> I am using JGR on a Mac and downloaded the newest dismo (CRAN sources) and
> maxent version (see below).
> 
> Can anyone help me? I am happy to provide more detailed information...
> 
> Rafa
> 
> >maxent()
> This is MaxEnt version 3.3.3k
> 
> >sessionInfo()
> R version 2.12.2 (2011-02-25)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
> locale:
> [1] C
> 
> attached base packages:
> [1] splines   stats     graphics  grDevices utils     datasets  methods
> [8] base
> 
> other attached packages:
>  [1] gbm_1.6-3.1           survival_2.36-5       gam_1.04.1
>  [4] PresenceAbsence_1.1.5 maptools_0.8-10       lattice_0.19-33
>  [7] foreign_0.8-42        rgdal_0.6-33          dismo_0.7-14
> [10] raster_1.9-13         sp_0.9-84             JGR_1.7-7
> [13] iplots_1.1-4          JavaGD_0.5-4          rJava_0.9-1
> 
> loaded via a namespace (and not attached):
> [1] grid_2.12.2  tools_2.12.2
> Warning message:
> 'DESCRIPTION' file has 'Encoding' field and re-encoding is not possible
> 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/connection-error-when-calling-maxent-tp7151125p7151125.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From samanmonfared1 at gmail.com  Sat Jan 14 15:55:51 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Sat, 14 Jan 2012 18:25:51 +0330
Subject: [R-sig-Geo] difrrence between regression kriging&residual kriging
Message-ID: <CAOytA4aCz0YRVGkrnZaYa+V=5gO2zZe6nrCU9ikyFnf8=mTKpg@mail.gmail.com>

Hi
I'm very confused about the concepts of regression kriging ,kriging
with external drift
(KED) and residual kriging.because In various articles these are
defined differently.
could you give me a  download-able good source about these methods.
 Do these methods can be generalized to cokriging??for
example(residual cokriging-regression cokriging,...)
Which packages in R can perform them??

-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From daniballari at gmail.com  Sat Jan 14 17:43:46 2012
From: daniballari at gmail.com (Daniela Ballari)
Date: Sat, 14 Jan 2012 10:43:46 -0600
Subject: [R-sig-Geo] difrrence between regression kriging&residual
	kriging
In-Reply-To: <CAOytA4aCz0YRVGkrnZaYa+V=5gO2zZe6nrCU9ikyFnf8=mTKpg@mail.gmail.com>
References: <CAOytA4aCz0YRVGkrnZaYa+V=5gO2zZe6nrCU9ikyFnf8=mTKpg@mail.gmail.com>
Message-ID: <CAOiU-UWCCbkt+o5hC1Rqum7dvuyzSZDG+1-+iFE72Y+-Taohzw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120114/6961a44d/attachment.pl>

From Thierry.ONKELINX at inbo.be  Sat Jan 14 23:55:19 2012
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Sat, 14 Jan 2012 22:55:19 +0000
Subject: [R-sig-Geo] Unexpected output from distfun
Message-ID: <AA818EAD2576BC488B4F623941DA74275732B213@inbomail.inbo.be>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120114/3733e4d4/attachment.pl>

From r.turner at auckland.ac.nz  Sun Jan 15 02:12:28 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 15 Jan 2012 14:12:28 +1300
Subject: [R-sig-Geo] Unexpected output from distfun
In-Reply-To: <AA818EAD2576BC488B4F623941DA74275732B213@inbomail.inbo.be>
References: <AA818EAD2576BC488B4F623941DA74275732B213@inbomail.inbo.be>
Message-ID: <4F1227FC.9090702@auckland.ac.nz>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120115/21f021e4/attachment.pl>

From r.hijmans at gmail.com  Sun Jan 15 03:12:17 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Sat, 14 Jan 2012 18:12:17 -0800
Subject: [R-sig-Geo] connection error when calling maxent()
In-Reply-To: <92781526-59B3-47C2-8A5B-EB835FC5A628@wsl.ch>
References: <1325695956381-7151125.post@n2.nabble.com>
	<CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>
	<92781526-59B3-47C2-8A5B-EB835FC5A628@wsl.ch>
Message-ID: <CANtt_hwiWzYZrt04sFduFzN2gT-Z++vGjxd+UjKBVke2Hdgxbw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120114/023fcce5/attachment.pl>

From r.turner at auckland.ac.nz  Sun Jan 15 04:15:57 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 15 Jan 2012 16:15:57 +1300
Subject: [R-sig-Geo] Unexpected output from distfun
In-Reply-To: <AA818EAD2576BC488B4F623941DA74275732B213@inbomail.inbo.be>
References: <AA818EAD2576BC488B4F623941DA74275732B213@inbomail.inbo.be>
Message-ID: <4F1244ED.1060003@auckland.ac.nz>


Okay --- I think I've tracked it down.  The problem is (I believe) with 
the value
of "huge" in the nncross() function --- which just isn't huge enough.  
It was taken
to be the diameter of X$window, which could in fact be quite small 
relative to
the distances between the points of X and the points of Y (and will in 
fact be
*zero* when applying the function returned by distfun() if the argument to
distfun() has only one point).

I've amended nncross() to take "huge" to be the diameter of

     union.owin(X$window,Y$window)

This seems to work ... although there may be a better strategy.  (Over 
to you,
Adrian).

I have attached my amended version of nncross, which you can source into
you can use until a release of "spatstat" containing this, or a more 
appropriate fix
comes out.

Note that you need to do

     assignInNamespace("nncross",nncross,"spatstat")

after sourcing in nncross.R, otherwise distfun() will use the "old" 
version of nncross
rather than the amended one.  And you have to (psigh!) do the 
assignInNamespace()
thing each time you start a new R session, in order to get the right 
nncross() function
being called.

     cheers,

         Rolf Turner

On 15/01/12 11:55, ONKELINX, Thierry wrote:
> Dear all,
>
> I'm not getting the output I'm expecting when using distfun() from the 
> spatstat package. Any idea what is going wrong?
>
> Best regards,
>
> Thierry
>
> library(spatstat)
> w <- owin(xrange = c(-10, 10), yrange = c(-10, 10))
> P <- ppp(x = 0, y = 0, window = w)
> P1 <- ppp(x = 1, y = 0, window = w)
> P2 <- ppp(x = 1:2, y = c(1, 1), window = w)
> P3 <- ppp(x = 2:1, y = c(2, 2), window = w)
> f <- distfun(P)
> f2 <- distfun(P2)
> fo <- list(f(P1), f(P2), f(P3))
> fo2 <- list(f2(P), f2(P1), f2(P3))
>
> > fo
> [[1]]
> [1] 0
>
> [[2]]
> [1] 1 1
>
> [[3]]
> [1] 1 1
>
> > fo2
> [[1]]
> [1] 0
>
> [[2]]
> [1] 0
>
> [[3]]
> [1] 1 1
>
> > sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> locale:
>  [1] LC_CTYPE=nl_BE.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=nl_BE.UTF-8        LC_COLLATE=nl_BE.UTF-8
>  [5] LC_MONETARY=nl_BE.UTF-8    LC_MESSAGES=nl_NL.UTF-8
>  [7] LC_PAPER=C                 LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=nl_BE.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] spatstat_1.25-1 deldir_0.0-16   mgcv_1.7-12
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.1    lattice_0.20-3 Matrix_1.0-3   nlme_3.1-102
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120115/5f91f1eb/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: nncross.R
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120115/5f91f1eb/attachment.pl>

From samanmonfared1 at gmail.com  Sun Jan 15 09:54:45 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Sun, 15 Jan 2012 12:24:45 +0330
Subject: [R-sig-Geo] difrrence between regression kriging&residual kriging
In-Reply-To: <CAOytA4aCz0YRVGkrnZaYa+V=5gO2zZe6nrCU9ikyFnf8=mTKpg@mail.gmail.com>
References: <CAOytA4aCz0YRVGkrnZaYa+V=5gO2zZe6nrCU9ikyFnf8=mTKpg@mail.gmail.com>
Message-ID: <CAOytA4a46cn89Nab+TFQZN=NX0QT6y8upxOEusvN9kuovQvdXg@mail.gmail.com>

---------- Forwarded message ----------
From: Saman Monfared <samanmonfared1 at gmail.com>
Date: Sat, 14 Jan 2012 18:25:51 +0330
Subject: difrrence between regression kriging&residual kriging
To: r-sig-geo <r-sig-geo at r-project.org>

Hi
I'm very confused about the concepts of regression kriging ,kriging
with external drift
(KED) and residual kriging.because In various articles these are
defined differently.
could you give me a  download-able good source about these methods.
 Do these methods can be generalized to cokriging??for
example(residual cokriging-regression cokriging,...)
Which packages in R can perform them??

-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167



-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From edzer.pebesma at uni-muenster.de  Sun Jan 15 12:44:23 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Sun, 15 Jan 2012 12:44:23 +0100
Subject: [R-sig-Geo] difrrence between regression kriging&residual
	kriging
In-Reply-To: <CAOytA4a46cn89Nab+TFQZN=NX0QT6y8upxOEusvN9kuovQvdXg@mail.gmail.com>
References: <CAOytA4aCz0YRVGkrnZaYa+V=5gO2zZe6nrCU9ikyFnf8=mTKpg@mail.gmail.com>
	<CAOytA4a46cn89Nab+TFQZN=NX0QT6y8upxOEusvN9kuovQvdXg@mail.gmail.com>
Message-ID: <4F12BC17.7040709@uni-muenster.de>

Saman,

Typing the following phrase in the google search bar:

regression kriging, kriging with external drift site:stat.ethz.ch

gives quite a few pointers to past discussions on this list. Did you
read all their threads before posting your question?

On 01/15/2012 09:54 AM, Saman Monfared wrote:
> ---------- Forwarded message ----------
> From: Saman Monfared <samanmonfared1 at gmail.com>
> Date: Sat, 14 Jan 2012 18:25:51 +0330
> Subject: difrrence between regression kriging&residual kriging
> To: r-sig-geo <r-sig-geo at r-project.org>
> 
> Hi
> I'm very confused about the concepts of regression kriging ,kriging
> with external drift
> (KED) and residual kriging.because In various articles these are
> defined differently.
> could you give me a  download-able good source about these methods.
>  Do these methods can be generalized to cokriging??for
> example(residual cokriging-regression cokriging,...)
> Which packages in R can perform them??
> 

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From amorenos1 at ucentral.edu.co  Sun Jan 15 20:11:48 2012
From: amorenos1 at ucentral.edu.co (Angelo Moreno)
Date: Sun, 15 Jan 2012 11:11:48 -0800 (PST)
Subject: [R-sig-Geo] Lisa Map Results
Message-ID: <1326654708264-7190438.post@n2.nabble.com>

Hi,  I Have the Lisa Map,and I have done it with the information of a list of
cities,I`d like to know if I Can get a list or a table of the results of the
quadrants, for example something like this:

High-High   High-Low  Low-High    Low-Low
             
City 1         City2          City4         City7
City3          City5          City 6        City8


Thanks ! ;)

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Lisa-Map-Results-tp7190438p7190438.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From Roger.Bivand at nhh.no  Sun Jan 15 20:23:13 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 15 Jan 2012 20:23:13 +0100 (CET)
Subject: [R-sig-Geo] Lisa Map Results
In-Reply-To: <1326654708264-7190438.post@n2.nabble.com>
References: <1326654708264-7190438.post@n2.nabble.com>
Message-ID: <alpine.LRH.2.00.1201152015280.19050@reclus.nhh.no>

On Sun, 15 Jan 2012, Angelo Moreno wrote:

> Hi, I Have the Lisa Map,and I have done it with the information of a 
> list of cities,I`d like to know if I Can get a list or a table of the 
> results of the quadrants, for example something like this:

Please do be specific, and include code using built-in data sets to 
illustrate your question. The term Lisa Map is not clear - do you mean a 
choropleth (thematic) map of the estimates of local Moran's I, or Geary's 
C, or Getis' G, or what?

If you look at your references, you'll probably find that high and low are 
values above or below the mean of the variable of interest and its spatial 
lag for some set of weights. If so, you should be able to provide the code 
example, say using the supplied afcon data set in spdep. Your choice of 
weights and criterion for splitting the distributions will impact your 
result. If you adjust the p-values of the local indicators for multiple 
comparisons, probably none of them will be significant, I'm afraid.

Roger

>
> High-High   High-Low  Low-High    Low-Low
>
> City 1         City2          City4         City7
> City3          City5          City 6        City8
>
>
> Thanks ! ;)
>
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Lisa-Map-Results-tp7190438p7190438.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Adrian.Baddeley at csiro.au  Mon Jan 16 04:54:59 2012
From: Adrian.Baddeley at csiro.au (Adrian.Baddeley at csiro.au)
Date: Mon, 16 Jan 2012 11:54:59 +0800
Subject: [R-sig-Geo] Unexpected output from distfun
In-Reply-To: <4F1244ED.1060003@auckland.ac.nz>
References: <AA818EAD2576BC488B4F623941DA74275732B213@inbomail.inbo.be>
	<4F1244ED.1060003@auckland.ac.nz>
Message-ID: <57DC18C299094D4299F837570C5DF1C558B6E62CCF@EXWA-MBX01.nexus.csiro.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120116/9f361c57/attachment.pl>

From juantomas.sayago at gmail.com  Mon Jan 16 05:37:21 2012
From: juantomas.sayago at gmail.com (Juan Tomas Sayago)
Date: Sun, 15 Jan 2012 23:37:21 -0500
Subject: [R-sig-Geo] Lisa Map Results
In-Reply-To: <alpine.LRH.2.00.1201152015280.19050@reclus.nhh.no>
References: <1326654708264-7190438.post@n2.nabble.com>
	<alpine.LRH.2.00.1201152015280.19050@reclus.nhh.no>
Message-ID: <CAEOXpNCzsnUh37yg6HdE2UYQxcAFpMFyfXXBw5JOJq61Xz7n5w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120115/b6bb71fe/attachment.pl>

From Thierry.ONKELINX at inbo.be  Mon Jan 16 09:43:04 2012
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Mon, 16 Jan 2012 08:43:04 +0000
Subject: [R-sig-Geo] Unexpected output from distfun
In-Reply-To: <57DC18C299094D4299F837570C5DF1C558B6E62CCF@EXWA-MBX01.nexus.csiro.au>
References: <AA818EAD2576BC488B4F623941DA74275732B213@inbomail.inbo.be>
	<4F1244ED.1060003@auckland.ac.nz>
	<57DC18C299094D4299F837570C5DF1C558B6E62CCF@EXWA-MBX01.nexus.csiro.au>
Message-ID: <AA818EAD2576BC488B4F623941DA74275732B808@inbomail.inbo.be>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120116/acb97d5f/attachment.pl>

From kathryn.lee1 at students.mq.edu.au  Mon Jan 16 11:50:44 2012
From: kathryn.lee1 at students.mq.edu.au (kalee)
Date: Mon, 16 Jan 2012 02:50:44 -0800 (PST)
Subject: [R-sig-Geo] Calculate area/volume of kde output from ks package
In-Reply-To: <522664f80911271420l4f41c807uc77a4c6b79f7052d@mail.gmail.com>
References: <9fb1ae890911271253s162bf75ckfd906e2f4df0e2f7@mail.gmail.com>
	<522664f80911271420l4f41c807uc77a4c6b79f7052d@mail.gmail.com>
Message-ID: <1326711044221-7192096.post@n2.nabble.com>

Hi

I'm trying to calculate the volume of a 3D kernel density estimator that has
been calculated using the kde command from the ks package. So far I'm just
working with the examples given before applying this to my own data so only
have that example data to give (found under "plot" of the package manual):

## trivariate example
library(MASS)
x <- iris[,1:3]
H.pi <- Hpi(x, pilot="samse")
fhat <- kde(x, H=H.pi, compute.cont=TRUE)
plot(fhat, drawpoints=TRUE)


Under a previous post about calculating the 2D spatial area of the kde
output (see full original message at the end) the following was suggested: 

"
Michael Sumner-2 wrote
> 
> Here's one way:
> 
> library(ks)
> 
> data(unicef)
> H.scv <- Hscv(x=unicef)
> fhat <- kde(x=unicef, H=H.scv)
> image(fhat$eval.points[[1]], fhat$eval.points[[2]], fhat$estimate)
> 
> 
> library(sp)
> 
> 
> spkde <- image2Grid(list(x = fhat$eval.points[[1]], y =
> fhat$eval.points[[2]], z = fhat$estimate))
> contour(spkde, add = TRUE)  "
> 
> - How would this above method be applied to a 3D kde output? How would you
> calculate the kde output at specific contour levels? Such as the 95% or
> 50% contour levels. The original R-sig-geo post quoted a wiki page that
> seems to have subsequently removed the posting about image2Grid.
> 
> Many thanks,
> Kathryn
> 
> 
> 
> 
> 
> On Sat, Nov 28, 2009 at 7:53 AM, Tyler Dean Rudolph
> &lt;prairie.picker@&gt; wrote:
>> ?Is there a way to convert a kde object (ks package) into a spatial
>> object
>> (e.g. SpatialPixels, SpatialPolygons) for export into a GIS?
>> ?Alternatively,
>> is there a way to generate the 2-D spatial area underneath the 3-D
>> utilisation distribution of a kde object? ?I have explored the package
>> descriptions and help forums and have not yet found a solution....
>>
>> Tyler
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at .ethz
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at .ethz
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Convert-kde-object-into-spatial-object-tp4077448p7192096.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From kathryn.lee1 at students.mq.edu.au  Mon Jan 16 11:50:43 2012
From: kathryn.lee1 at students.mq.edu.au (kalee)
Date: Mon, 16 Jan 2012 02:50:43 -0800 (PST)
Subject: [R-sig-Geo] Calculate area/volume of kde output from ks package
In-Reply-To: <522664f80911271420l4f41c807uc77a4c6b79f7052d@mail.gmail.com>
References: <9fb1ae890911271253s162bf75ckfd906e2f4df0e2f7@mail.gmail.com>
	<522664f80911271420l4f41c807uc77a4c6b79f7052d@mail.gmail.com>
Message-ID: <1326711043607-7192095.post@n2.nabble.com>

Hi

I'm trying to calculate the volume of a 3D kernel density estimator that has
been calculated using the kde command from the ks package. So far I'm just
working with the examples given before applying this to my own data so only
have that example data to give (found under "plot" of the package manual):

## trivariate example
library(MASS)
x <- iris[,1:3]
H.pi <- Hpi(x, pilot="samse")
fhat <- kde(x, H=H.pi, compute.cont=TRUE)
plot(fhat, drawpoints=TRUE)


Under a previous post about calculating the 2D spatial area of the kde
output (see full original message at the end) the following was suggested: 

"
Michael Sumner-2 wrote
> 
> Here's one way:
> 
> library(ks)
> 
> data(unicef)
> H.scv <- Hscv(x=unicef)
> fhat <- kde(x=unicef, H=H.scv)
> image(fhat$eval.points[[1]], fhat$eval.points[[2]], fhat$estimate)
> 
> 
> library(sp)
> 
> 
> spkde <- image2Grid(list(x = fhat$eval.points[[1]], y =
> fhat$eval.points[[2]], z = fhat$estimate))
> contour(spkde, add = TRUE)  "
> 
> - How would this above method be applied to a 3D kde output? How would you
> calculate the kde output at specific contour levels? Such as the 95% or
> 50% contour levels. The original R-sig-geo post quoted a wiki page that
> seems to have subsequently removed the posting about image2Grid.
> 
> Many thanks,
> Kathryn
> 
> 
> 
> 
> 
> On Sat, Nov 28, 2009 at 7:53 AM, Tyler Dean Rudolph
> &lt;prairie.picker@&gt; wrote:
>> ?Is there a way to convert a kde object (ks package) into a spatial
>> object
>> (e.g. SpatialPixels, SpatialPolygons) for export into a GIS?
>> ?Alternatively,
>> is there a way to generate the 2-D spatial area underneath the 3-D
>> utilisation distribution of a kde object? ?I have explored the package
>> descriptions and help forums and have not yet found a solution....
>>
>> Tyler
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at .ethz
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at .ethz
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Convert-kde-object-into-spatial-object-tp4077448p7192095.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From mathieu.rajerison at gmail.com  Mon Jan 16 13:32:12 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Mon, 16 Jan 2012 13:32:12 +0100
Subject: [R-sig-Geo] Lisa Map Results
In-Reply-To: <1326654708264-7190438.post@n2.nabble.com>
References: <1326654708264-7190438.post@n2.nabble.com>
Message-ID: <CAGfc75nnUd=50ceFmDCyqJSd68AjnDNg9_kt0qovmvEzVptH6Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120116/b269881b/attachment.pl>

From Roger.Bivand at nhh.no  Mon Jan 16 14:26:34 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 16 Jan 2012 14:26:34 +0100 (CET)
Subject: [R-sig-Geo] rgeos 0.2-1 released
Message-ID: <alpine.LRH.2.02.1201161400310.21470@reclus.nhh.no>

Edzer Pebesma and Colin Rundel have made progress with finding and 
removing memory leaks on rgeos, so we've released 0.2-1. It would be 
useful to receive reports on changes in usability. The OSX binary for 
0.2-1 is already on CRAN Extras, the Windows binary is diffusing across 
CRAN mirrors.

Roger

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From naimi at itc.nl  Mon Jan 16 16:25:18 2012
From: naimi at itc.nl (Babak Naimi)
Date: Mon, 16 Jan 2012 16:25:18 +0100
Subject: [R-sig-Geo] Uncondistional nonstationary RandomFields simulation
Message-ID: <021F462EDC7F2B42A7038E9F9D4782612118F07DCA@itcnt27.itc.nl>

Dear list,

I'm trying to generate a 2-dimensional nonstationary field using GaussRF in RandomFields package. I have problem on how to define the covariance model. I tried to use the examples provided in the manual, but unfortunately I couldn't figure out how it works for my case. I was wondering if anyone can help by providing some examples.

Using the following command it seems that two models ("nonstWM" and "stp") are available for nonstationary fields:

> GetModelNames("nonstationary")
[1] "nonstWM" "stp"

x <- y <- seq(0, 100, 1) 
model <- ?

z <- GaussRF(x=x, y=y, model=model, grid=TRUE, method=?)

Best regards,
Babak


From jpeterb at essex.ac.uk  Mon Jan 16 18:59:30 2012
From: jpeterb at essex.ac.uk (Jakob Petersen)
Date: Mon, 16 Jan 2012 17:59:30 +0000
Subject: [R-sig-Geo] Kernel density estimation map of point pattern using R
Message-ID: <4F146582.3080802@essex.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120116/46d5b812/attachment.pl>

From trentbren at yahoo.com  Tue Jan 17 04:39:23 2012
From: trentbren at yahoo.com (trent biggs)
Date: Mon, 16 Jan 2012 19:39:23 -0800 (PST)
Subject: [R-sig-Geo] Area-weighted average of ncdf files
Message-ID: <1326771563.21241.YahooMailNeo@web65903.mail.ac4.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120116/cc1989af/attachment.pl>

From adiez at uv.es  Tue Jan 17 09:54:16 2012
From: adiez at uv.es (Agustin Diez Castillo)
Date: Tue, 17 Jan 2012 09:54:16 +0100
Subject: [R-sig-Geo] googlemaps history
Message-ID: <05D32156-A461-49B5-AE79-98DC47A5F7E8@uv.es>

Hi,
I can get a google maps with:

library(dismo)
library(XML)
library(maptools)
library(rgdal)
g2 <- gmap("5.727562,36.102452", type='satellite', z=14, filename="googlemap.gif")

Is there anyways of getting satellite shots other than the more recent ones?

No clue in ?gmap or ?RgoogleMaps

Best
Agustin

From nnagle at utk.edu  Tue Jan 17 13:08:30 2012
From: nnagle at utk.edu (Nagle, Nicholas)
Date: Tue, 17 Jan 2012 12:08:30 +0000
Subject: [R-sig-Geo] Area-weighted average of ncdf files
In-Reply-To: <mailman.11.1326798003.10521.r-sig-geo@r-project.org>
References: <mailman.11.1326798003.10521.r-sig-geo@r-project.org>
Message-ID: <A26CDE91-0663-484D-BE1E-CC9CF546E3B1@utk.edu>

Hi Trent -

I've had some success doing raster-to-vector conversions with GRASS and the spgrass6 package.  But without the fractional allocation of cells that you need here.  Quick and dirty, you might increase the resolution of the raster so that the area of cells exactly on the boundary is neglible.

If you don't get any help for native R solutions, write back, and I'll post an example for doing this in GRASS with spgrass6.

Come to think of it... if you increase the resolution of the grid, then turn your raster into centroids with coordinates(), and then do a point-in-polygon operation with overlay(), you can do this in R.  Count the number of pixels from each cell in the polygon, and you'll get the area you need for the areal weighting.

Nicholas



> 
> 
> Message: 5
> Date: Mon, 16 Jan 2012 19:39:23 -0800 (PST)
> From: trent biggs <trentbren at yahoo.com>
> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>
> Subject: [R-sig-Geo] Area-weighted average of ncdf files
> Message-ID:
> 	<1326771563.21241.YahooMailNeo at web65903.mail.ac4.yahoo.com>
> Content-Type: text/plain
> 
> Hello,
> ? I want to calculate the area-weighted average of the grid values in a time-series of netcdf files, summarized over a shapefile with a single polygon.? The polygon overlaps several of the gridcells in the ncdf grid, but only partially overlaps some cells, requiring an area-weighted average.? 1) Do any of the spatial packages in R have an area-weighted mean option for a polygon overlaid on a grid?? 2) Do I need to convert the ncdf files into SpatialPointsDataFrames first?? I know how to open and read the ncdf files (ncdf library), how to read in the shapefile (readShapePoly), but am having trouble easily converting the ncdf files into a format that can be easily overlaid by the shapefile polygon.
> ? Thank you for your help!
> ? Trent Biggs
> ? San Diego State University
> 
> 	[[alternative HTML version deleted]]
> 


From pgalpern at gmail.com  Tue Jan 17 16:18:06 2012
From: pgalpern at gmail.com (pgalpern)
Date: Tue, 17 Jan 2012 09:18:06 -0600
Subject: [R-sig-Geo] rgeos 0.2-1 released
Message-ID: <4F15912E.2000406@gmail.com>

Roger,
   Thanks to all for efforts to improve this very useful package.

   I am going to cautiously suggest that the memory leak with 
raster::rasterToPolygons(x, dissolve=TRUE) which calls 
rgeos::gUnaryUnion() is  fixed -- or has improved considerably.

Previously,  running this function on a raster of 800 000 cells (which, 
as you pointed out in another thread, is at the best of times a memory 
intensive task) quickly consumed all the available overhead memory and 
headed into disk swapping.  Now, I can run the same raster and memory is 
consumed up to what appears to be the R gc() trigger point, and then 
stabilizes (suggesting that R can now release the memory, which it 
previously could not).  I should note, however, that 7 GB was freed only 
after the R instance was closed.  Calls to gc() did not release this.  
This may be expected behaviour, not sure.

(Run under 64bit R 2.14.1).

Thanks!
Paul

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca



> Date: Mon, 16 Jan 2012 14:26:34 +0100 (CET)
> From: Roger Bivand<Roger.Bivand at nhh.no>
> To:r-sig-geo at r-project.org
> Subject: [R-sig-Geo] rgeos 0.2-1 released
> Message-ID:<alpine.LRH.2.02.1201161400310.21470 at reclus.nhh.no>
> Content-Type: TEXT/PLAIN; format=flowed; charset=US-ASCII
>
> Edzer Pebesma and Colin Rundel have made progress with finding and
> removing memory leaks on rgeos, so we've released 0.2-1. It would be
> useful to receive reports on changes in usability. The OSX binary for
> 0.2-1 is already on CRAN Extras, the Windows binary is diffusing across
> CRAN mirrors.
>
> Roger


From roman.lustrik at gmail.com  Tue Jan 17 18:28:32 2012
From: roman.lustrik at gmail.com (=?UTF-8?Q?Roman_Lu=C5=A1trik?=)
Date: Tue, 17 Jan 2012 18:28:32 +0100
Subject: [R-sig-Geo] rgeos 0.2-1 released
In-Reply-To: <4F15912E.2000406@gmail.com>
References: <4F15912E.2000406@gmail.com>
Message-ID: <CAHT1vpgQy=wLJ9vFOsvLwe6TUWf0J-=BMcXjZM7cQpaOuwqNfQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120117/4c5b1fc7/attachment.pl>

From k_jacobi at surf2000.de  Tue Jan 17 18:33:43 2012
From: k_jacobi at surf2000.de (Klaus Jacobi)
Date: Tue, 17 Jan 2012 18:33:43 +0100
Subject: [R-sig-Geo] Error with projectRaster
In-Reply-To: <mailman.6.1325934004.16559.r-sig-geo@r-project.org>
References: <mailman.6.1325934004.16559.r-sig-geo@r-project.org>
Message-ID: <79554260-2A06-43CD-8E2F-146315212F29@surf2000.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120117/fa5f720b/attachment.pl>

From HodgessE at uhd.edu  Tue Jan 17 22:41:36 2012
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 17 Jan 2012 15:41:36 -0600
Subject: [R-sig-Geo] an "opinion" question
Message-ID: <586A4828D7AAA04CA9B258C50A28DA200E597016@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120117/1d5919b1/attachment.pl>

From mathieu.rajerison at gmail.com  Wed Jan 18 09:32:07 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 18 Jan 2012 09:32:07 +0100
Subject: [R-sig-Geo] a R & GRASS example : calculation of Intervisibility
	along a line
Message-ID: <CAGfc75=x-xLbECDu7xKF1HKGxKOQ6ZHYvTO3OO6sh2YNXQ-9gw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120118/a84481ef/attachment.pl>

From mathieu.rajerison at gmail.com  Wed Jan 18 09:48:35 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 18 Jan 2012 09:48:35 +0100
Subject: [R-sig-Geo] NYT map with non-overlapping labels
Message-ID: <CAGfc75nBphdA9Tzsf0yvLyPfxcpec7uAbBuQebnYdqeUh-co7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120118/ad06e81f/attachment.pl>

From k_jacobi at surf2000.de  Wed Jan 18 10:04:24 2012
From: k_jacobi at surf2000.de (Klaus Jacobi)
Date: Wed, 18 Jan 2012 01:04:24 -0800 (PST)
Subject: [R-sig-Geo] Error with projectRaster
In-Reply-To: <79554260-2A06-43CD-8E2F-146315212F29@surf2000.de>
References: <79554260-2A06-43CD-8E2F-146315212F29@surf2000.de>
Message-ID: <1326877464269-7199487.post@n2.nabble.com>

This morning I changed from raster version 1.9-63 back to 1.9-58 and my
script is functioning again.

Fortunately, the previous downloads of zipped packages are kept on the local
hard disk - but only, if a package is updated, not when it is uninstalled.

Klaus Jacobi

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Error-with-projectRaster-tp7197193p7199487.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From babuawara at gmail.com  Wed Jan 18 10:49:54 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Wed, 18 Jan 2012 10:49:54 +0100
Subject: [R-sig-Geo] problem with ndvi
Message-ID: <4F1695C2.5030602@gmail.com>

Hello list,
I am working with landsat images and would like to create a phenological 
cycle with NDVI.
I am using R for that but NDVI values changes if i use on sensor 
reflectance instead of DN values i.e. giving different result in every case.
I tried to compare histograms seems to have changed and I am not getting 
negative values where there is no vegetation but if i use DN values it 
gives negative values to such locations. Do anybody have any idea what 
went wrong??

Thanks in advance and would be much appreciated.

Vikram


From babuawara at gmail.com  Wed Jan 18 15:19:09 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Wed, 18 Jan 2012 15:19:09 +0100
Subject: [R-sig-Geo] problem with ndvi
In-Reply-To: <1326893160.81741.YahooMailNeo@web160604.mail.bf1.yahoo.com>
References: <4F1695C2.5030602@gmail.com>
	<1326893160.81741.YahooMailNeo@web160604.mail.bf1.yahoo.com>
Message-ID: <4F16D4DD.5020400@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120118/3753e8a1/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Wed Jan 18 16:17:45 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Wed, 18 Jan 2012 16:17:45 +0100
Subject: [R-sig-Geo] Antw:  problem with ndvi
In-Reply-To: <4F1695C2.5030602@gmail.com>
References: <4F1695C2.5030602@gmail.com>
Message-ID: <4F16F0A9020000270001220D@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120118/d19d8b4a/attachment.pl>

From r.hijmans at gmail.com  Wed Jan 18 18:20:19 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 18 Jan 2012 09:20:19 -0800
Subject: [R-sig-Geo] Error with projectRaster
In-Reply-To: <1326877464269-7199487.post@n2.nabble.com>
References: <79554260-2A06-43CD-8E2F-146315212F29@surf2000.de>
	<1326877464269-7199487.post@n2.nabble.com>
Message-ID: <CANtt_hwpv8Y8gcaM-YhUdPqNy5kTr=1E0YTqn77qpLSo1bMt6A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120118/b7799acd/attachment.pl>

From jefunes at gmail.com  Wed Jan 18 21:54:15 2012
From: jefunes at gmail.com (Jose Funes)
Date: Wed, 18 Jan 2012 15:54:15 -0500
Subject: [R-sig-Geo] OWIN spatial point pattern
Message-ID: <CAG1eJiG6LPiFrRs4w2Q1O5dZEO0Lj_Fr-MCS0VV=xYg-5PjH8w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120118/7fa0a92e/attachment.pl>

From r.turner at auckland.ac.nz  Wed Jan 18 22:25:46 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 19 Jan 2012 10:25:46 +1300
Subject: [R-sig-Geo] OWIN spatial point pattern
In-Reply-To: <CAG1eJiG6LPiFrRs4w2Q1O5dZEO0Lj_Fr-MCS0VV=xYg-5PjH8w@mail.gmail.com>
References: <CAG1eJiG6LPiFrRs4w2Q1O5dZEO0Lj_Fr-MCS0VV=xYg-5PjH8w@mail.gmail.com>
Message-ID: <4F1738DA.6060008@auckland.ac.nz>

On 19/01/12 09:54, Jose Funes wrote:
> Hi,
> I am trying to create an binary mask and use it to create a ppp object and
> to be able to compute a density surface. I have failed in defining the owin
> as a mask. Please read code below:
>
> ####Definition of the window as matrix: from raster to image and from image
> image to matrix
> sudan1<-readGDAL("sudanbndry1")
> im.sudan<- as.im(sudan1)
> Vsudan<- im.sudan$v
> Wsudan<- levelset(Vsudan,21,"==")
> matrix.sudan<- as.matrix(Wsudan)
>
> ###Points pattern###
>
> sudan98<- read.csv("sudan98.txt")
> sudan98sa<- ppp(sudan98$Longitude, sudan98$Latitude,
> owin(mask=matrix.sudan,xrange,yrange))
>
> Error in owin(...) :
>    If one of xrange, yrange is specified then both must be.
>
> Your feedback are welcome, thanks.

Your example is ***not*** self contained and reproducible, as the 
Posting Guide
specifies it should be.  We do not have (convenient) access to 
"sudanbndry1".

It appears, from the code that you posted, that neither "xrange" nor 
"yrange",
which appear in your call to owin(), is defined.  However, if that were 
the case,
the resulting error message would be different.

Here is a simple (reproducible!) example:

     set.seed(42)
     m <- matrix(sample(c(TRUE,FALSE),100,TRUE),10,10)
     w <- owin(mask=m,xrange,yrange)

     Error in owin(mask = m, xrange, yrange) : object 'xrange' not found

So you actually did something different from what you are telling us.

The following works:

     set.seed(42)
     m <- matrix(sample(c(TRUE,FALSE),100,TRUE),10,10)
     w <- owin(mask=m,xrange=c(0,1),yrange=c(0,1))

So your call to owin() should work if you specify appropriate values for 
xrange
and yrange.

If you still have problems please provide a *reproducible* example, with the
code that you actually used.

     cheers,

         Rolf Turner


From samanmonfared1 at gmail.com  Wed Jan 18 23:00:15 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Thu, 19 Jan 2012 01:30:15 +0330
Subject: [R-sig-Geo] extract value of polygone
Message-ID: <CAOytA4aEER0rfi0hmtK8y5BOBDggi80eRDTZqQKDwEnLwRK_Nw@mail.gmail.com>

Hi.
I try to extract values of temperature in a topography  map. It is
like a contour plot.
I need the coordinates and temperature of some points.
how can I perform it??
thanks.


-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From samanmonfared1 at gmail.com  Wed Jan 18 23:02:37 2012
From: samanmonfared1 at gmail.com (Saman Monfared)
Date: Thu, 19 Jan 2012 01:32:37 +0330
Subject: [R-sig-Geo] extract value of polygone
In-Reply-To: <CAOytA4aEER0rfi0hmtK8y5BOBDggi80eRDTZqQKDwEnLwRK_Nw@mail.gmail.com>
References: <CAOytA4aEER0rfi0hmtK8y5BOBDggi80eRDTZqQKDwEnLwRK_Nw@mail.gmail.com>
Message-ID: <CAOytA4Z5bo0ZRVa_pnLs+c3XMxiYzhf4AnQ-m8jDx+HdW+mtdw@mail.gmail.com>

Hi.
I try to extract values of temperature in a topography  map. It is
like a contour plot.
I need the coordinates and temperature of some points.
how can I perform it??
thanks.


-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167



-- 

Saman Monfared
Msc Student,
Department of Statistics, Shiraz University,
Shiraz 71454, Iran
Email: Samanmonfared1 at gmail.com

Tel: +98 917 5305167


From r.turner at auckland.ac.nz  Thu Jan 19 04:43:44 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 19 Jan 2012 16:43:44 +1300
Subject: [R-sig-Geo] OWIN spatial point pattern
In-Reply-To: <CAG1eJiH+X1sj2RjReYRY8WdMemNEPZf=AFEBD7sXCtC_Xf01Cg@mail.gmail.com>
References: <CAG1eJiG6LPiFrRs4w2Q1O5dZEO0Lj_Fr-MCS0VV=xYg-5PjH8w@mail.gmail.com>	<4F1738DA.6060008@auckland.ac.nz>
	<CAG1eJiH+X1sj2RjReYRY8WdMemNEPZf=AFEBD7sXCtC_Xf01Cg@mail.gmail.com>
Message-ID: <4F179170.4060600@auckland.ac.nz>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120119/3592e6f7/attachment.pl>

From mathieu.rajerison at gmail.com  Thu Jan 19 07:39:05 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Thu, 19 Jan 2012 07:39:05 +0100
Subject: [R-sig-Geo] extract value of polygone
In-Reply-To: <CAOytA4Z5bo0ZRVa_pnLs+c3XMxiYzhf4AnQ-m8jDx+HdW+mtdw@mail.gmail.com>
References: <CAOytA4aEER0rfi0hmtK8y5BOBDggi80eRDTZqQKDwEnLwRK_Nw@mail.gmail.com>
	<CAOytA4Z5bo0ZRVa_pnLs+c3XMxiYzhf4AnQ-m8jDx+HdW+mtdw@mail.gmail.com>
Message-ID: <CAGfc75mGUya3W0zS_Rn=SJL2AumRdxBV5m=KxyNoM7VQ0pYceQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120119/7d59eeb5/attachment.pl>

From alobolistas at gmail.com  Thu Jan 19 11:26:54 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Thu, 19 Jan 2012 11:26:54 +0100
Subject: [R-sig-Geo] Antw: problem with ndvi
In-Reply-To: <4F16F0A9020000270001220D@gwia2.boku.ac.at>
References: <4F1695C2.5030602@gmail.com>
	<4F16F0A9020000270001220D@gwia2.boku.ac.at>
Message-ID: <CAG4NReKp28TUMhCoO+1PUX-eGn0yt_nASR-OgqkfMwT4J3Z2-g@mail.gmail.com>

Matteo,
by "RemoteSensing package" you mean the landsat package?
Agus

2012/1/18 Matteo Mattiuzzi <matteo.mattiuzzi at boku.ac.at>:
>
> Dear Vikram,
>
> It is not good to calculate NDVI from DN. The purpose of DN (digital
> number) is only for packing as much information as possible into a given
> ?BIT-size? (in Landsat 8-bit/pixel/band).
> DN is practically the radiance (I think TOA?) modified with an offset
> and a gain in order to press or expand the range between 0 and 255.
> This means that the relation between bands is changed, and this is a
> crucial need for NDVI (and generally for indices).
> Probably the minimum pre-processing you absolutely need to do is the
> conversion from DN to RADIANCE (TOA) using the gain and bias information
> in the MTL file (metadata). Better and more precise is to calculate the
> ground reflectance. I did this with the RemoteSensing package on
> R-Forge. But the current version doesn't work because of incomplete
> modifications in the package code.
>
> Non-vegetated areas can have positive values. I think the soil has
> often a NDVI of 0.1. Clouds sometimes have even 0.2 as...anyway you
> can't trust a NDVI from DN and you can't sharply differentiate
> veg/nonVeg by positive or negative ndvi values. Water normally has a
> clear negative NDVI (~-0.2).
>
> Also implemented in the RemoteSensing package are functions to compute
> other vegetation indices, I did not test them but maybe you can find
> something useful there (type ??ndvi? after installing and loading the
> package).
>
> Cheers Matteo
>
>
>
>
>>>> Vikram Ranga <babuawara at gmail.com> 1/18/2012 10:49 am >>>
> Hello list,
> I am working with landsat images and would like to create a
> phenological
> cycle with NDVI.
> I am using R for that but NDVI values changes if i use on sensor
> reflectance instead of DN values i.e. giving different result in every
> case.
> I tried to compare histograms seems to have changed and I am not
> getting
> negative values where there is no vegetation but if i use DN values it
>
> gives negative values to such locations. Do anybody have any idea what
>
> went wrong??
>
> Thanks in advance and would be much appreciated.
>
> Vikram
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From kathryn.lee1 at students.mq.edu.au  Thu Jan 19 11:28:56 2012
From: kathryn.lee1 at students.mq.edu.au (kalee)
Date: Thu, 19 Jan 2012 02:28:56 -0800 (PST)
Subject: [R-sig-Geo] 3D kde output conversion to volume
Message-ID: <1326968936445-7203184.post@n2.nabble.com>

Hi 

I'm trying to calculate the volume of a 3D kernel density estimator that has
been calculated using the kde command from the ks package. So far I'm just
working with the examples given before applying this to my own data so only
have that example data to give (found under "plot" of the package manual): 

## trivariate example 
library(MASS) 
x <- iris[,1:3] 
H.pi <- Hpi(x, pilot="samse") 
fhat <- kde(x, H=H.pi, compute.cont=TRUE) 
plot(fhat, drawpoints=TRUE) 


Under a previous post about calculating the 2D spatial area of the kde
output (see full original message at the end) the following was suggested by
Michael Sumner: 

"Here's one way: 

library(ks) 

data(unicef) 
H.scv <- Hscv(x=unicef) 
fhat <- kde(x=unicef, H=H.scv) 
image(fhat$eval.points[[1]], fhat$eval.points[[2]], fhat$estimate) 


library(sp) 


spkde <- image2Grid(list(x = fhat$eval.points[[1]], y = 
fhat$eval.points[[2]], z = fhat$estimate)) 
contour(spkde, add = TRUE)  " 

- How would this above method be applied to a 3D kde output? How would you
calculate the kde output at specific contour levels? Such as the 95% or 50%
contour levels. The original R-sig-geo post quoted a wiki page that seems to
have subsequently removed the posting about image2Grid. 

Many thanks, 
Kathryn 


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/3D-kde-output-conversion-to-volume-tp7203184p7203184.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From matteo.mattiuzzi at boku.ac.at  Thu Jan 19 12:31:43 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 19 Jan 2012 12:31:43 +0100
Subject: [R-sig-Geo] Antw: problem with ndvi
In-Reply-To: <CAG4NReKp28TUMhCoO+1PUX-eGn0yt_nASR-OgqkfMwT4J3Z2-g@mail.gmail.com>
References: <4F1695C2.5030602@gmail.com>
	<4F16F0A9020000270001220D@gwia2.boku.ac.at>
	<CAG4NReKp28TUMhCoO+1PUX-eGn0yt_nASR-OgqkfMwT4J3Z2-g@mail.gmail.com>
Message-ID: <4F180D2F0200002700012254@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120119/3229f976/attachment.pl>

From r.hijmans at gmail.com  Thu Jan 19 19:43:44 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Thu, 19 Jan 2012 10:43:44 -0800
Subject: [R-sig-Geo] Area-weighted average of ncdf files
In-Reply-To: <1326771563.21241.YahooMailNeo@web65903.mail.ac4.yahoo.com>
References: <1326771563.21241.YahooMailNeo@web65903.mail.ac4.yahoo.com>
Message-ID: <CANtt_hw-L5gskQit1qoFd6ODYz1XG-6+-KzPsDyYWOMRAF1tNw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120119/5489a2ae/attachment.pl>

From trentbren at yahoo.com  Fri Jan 20 03:45:15 2012
From: trentbren at yahoo.com (trent biggs)
Date: Thu, 19 Jan 2012 18:45:15 -0800 (PST)
Subject: [R-sig-Geo] Area-weighted average of ncdf files
In-Reply-To: <CANtt_hw-L5gskQit1qoFd6ODYz1XG-6+-KzPsDyYWOMRAF1tNw@mail.gmail.com>
References: <1326771563.21241.YahooMailNeo@web65903.mail.ac4.yahoo.com>
	<CANtt_hw-L5gskQit1qoFd6ODYz1XG-6+-KzPsDyYWOMRAF1tNw@mail.gmail.com>
Message-ID: <1327027515.42377.YahooMailNeo@web65904.mail.ac4.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120119/87c3ac16/attachment.pl>

From k_jacobi at surf2000.de  Fri Jan 20 09:01:42 2012
From: k_jacobi at surf2000.de (Klaus Jacobi)
Date: Fri, 20 Jan 2012 09:01:42 +0100
Subject: [R-sig-Geo] Error with projectRaster
In-Reply-To: <CANtt_hwpv8Y8gcaM-YhUdPqNy5kTr=1E0YTqn77qpLSo1bMt6A@mail.gmail.com>
References: <79554260-2A06-43CD-8E2F-146315212F29@surf2000.de>
	<1326877464269-7199487.post@n2.nabble.com>
	<CANtt_hwpv8Y8gcaM-YhUdPqNy5kTr=1E0YTqn77qpLSo1bMt6A@mail.gmail.com>
Message-ID: <6E508137-7E93-45D8-AFC5-AEB6E7C7F4AF@surf2000.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120120/b4e2420e/attachment.pl>

From edzer.pebesma at uni-muenster.de  Fri Jan 20 09:03:04 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 20 Jan 2012 09:03:04 +0100
Subject: [R-sig-Geo] plot variogram cloud with free scales
In-Reply-To: <4EB2B1A4.8080005@tum.de>
References: <4EB2B1A4.8080005@tum.de>
Message-ID: <4F191FB8.6010203@uni-muenster.de>



On 11/03/2011 04:22 PM, Tom Gottfried wrote:
> Dear listers,
> 
> trying to plot a variogram cloud of a multivariable variogram with
> 
> library(gstat)
> data(meuse)
> coordinates(meuse) <- ~x+y
> g <- gstat(NULL, "zinc", zinc~1, meuse)
> g <- gstat(g, "lead", lead~1, meuse)
> plot(variogram(g, cloud=TRUE), scales=list(y=list(relation="free")))
> 
> I get distinct y-axes for every panel but all with the same range
> instead of adjusted to the data. Is it possible to get the y-axes
> adjusted to the data in each panel? Like in this plot:
> 
> plot(variogram(g), scales=list(y=list(relation="free")))
> 
> Thanks!
> Tom

Good point. This has now been corrected in svn, and will be in the next
gstat release.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From tom.gottfried at tum.de  Fri Jan 20 10:17:51 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Fri, 20 Jan 2012 10:17:51 +0100
Subject: [R-sig-Geo] plot variogram cloud with free scales
In-Reply-To: <4F191FB8.6010203@uni-muenster.de>
References: <4EB2B1A4.8080005@tum.de> <4F191FB8.6010203@uni-muenster.de>
Message-ID: <4F19313F.3090204@tum.de>

Thank you, Edzer!
regards,
Tom

Am 20.01.2012 09:03, schrieb Edzer Pebesma:
>
>
> On 11/03/2011 04:22 PM, Tom Gottfried wrote:
>> Dear listers,
>>
>> trying to plot a variogram cloud of a multivariable variogram with
>>
>> library(gstat)
>> data(meuse)
>> coordinates(meuse)<- ~x+y
>> g<- gstat(NULL, "zinc", zinc~1, meuse)
>> g<- gstat(g, "lead", lead~1, meuse)
>> plot(variogram(g, cloud=TRUE), scales=list(y=list(relation="free")))
>>
>> I get distinct y-axes for every panel but all with the same range
>> instead of adjusted to the data. Is it possible to get the y-axes
>> adjusted to the data in each panel? Like in this plot:
>>
>> plot(variogram(g), scales=list(y=list(relation="free")))
>>
>> Thanks!
>> Tom
>
> Good point. This has now been corrected in svn, and will be in the next
> gstat release.

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From carstennh at aol.com  Fri Jan 20 17:51:20 2012
From: carstennh at aol.com (Carsten Neumann)
Date: Fri, 20 Jan 2012 17:51:20 +0100
Subject: [R-sig-Geo] package raster stack function do not work
Message-ID: <4F199B88.3010205@aol.com>

Dear raster users,

I updated to the newest raster package and instantly all my scripts 
including stack() and subsequently plot() functions do not worked 
anymore. The error message after plotting is:


d1<-stack('Hasenheide_RGB.img')
plot(d1,3)

############################################################################
Error in function (classes, fdef, mtable)  :
   unable to find an inherited method for function "extent", for 
signature "NULL"
In addition: Warning messages:
In intersect(extent(x), extent(y)) : Objects do not overlap
###########################################################################

I did it with several multidimensional rasters that provide allways the 
same error message. Where is the problem?

################################################################################
sessionInfo()
R version 2.12.1 (2010-12-16)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=C
  [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
  [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] raster_1.9-64   gstat_1.0-10    spacetime_0.5-7 xts_0.8-2
[5] zoo_1.7-6       rgdal_0.7-5     sp_0.9-91       lattice_0.19-13

loaded via a namespace (and not attached):
[1] grid_2.12.1  tcltk_2.12.1 tools_2.12.1
################################################################################

Greetings

Carsten

-- 

Carsten Neumann
Telegrafenberg, A 17 01.13
14473 Potsdam
-------------------------------------------------------
Helmholtz Centre Potsdam
GFZ German Research Centre for Geosciences
Department 1 - Section 1.4 - Remote Sensing
-------------------------------------------------------
Tel.: +49 (0) 331 288 1766
e-mail: carstenn at gfz-potsdam.de


From rafael.wueest at wsl.ch  Fri Jan 20 18:42:51 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Fri, 20 Jan 2012 18:42:51 +0100
Subject: [R-sig-Geo] package raster stack function do not work
In-Reply-To: <4F199B88.3010205@aol.com>
References: <4F199B88.3010205@aol.com>
Message-ID: <9813DABF-6B0E-4EC8-9566-766CA1816E37@wsl.ch>

Hi Carsten,

I recently had the same issue, updating R (in my case to 2.13.2) helped!

Rafael

On 20.01.2012, at 17:51, Carsten Neumann wrote:

> Dear raster users,
> 
> I updated to the newest raster package and instantly all my scripts including stack() and subsequently plot() functions do not worked anymore. The error message after plotting is:
> 
> 
> d1<-stack('Hasenheide_RGB.img')
> plot(d1,3)
> 
> ############################################################################
> Error in function (classes, fdef, mtable)  :
>  unable to find an inherited method for function "extent", for signature "NULL"
> In addition: Warning messages:
> In intersect(extent(x), extent(y)) : Objects do not overlap
> ###########################################################################
> 
> I did it with several multidimensional rasters that provide allways the same error message. Where is the problem?
> 
> ################################################################################
> sessionInfo()
> R version 2.12.1 (2010-12-16)
> Platform: x86_64-unknown-linux-gnu (64-bit)
> 
> locale:
> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=C
> [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] raster_1.9-64   gstat_1.0-10    spacetime_0.5-7 xts_0.8-2
> [5] zoo_1.7-6       rgdal_0.7-5     sp_0.9-91       lattice_0.19-13
> 
> loaded via a namespace (and not attached):
> [1] grid_2.12.1  tcltk_2.12.1 tools_2.12.1
> ################################################################################
> 
> Greetings
> 
> Carsten
> 
> -- 
> 
> Carsten Neumann
> Telegrafenberg, A 17 01.13
> 14473 Potsdam
> -------------------------------------------------------
> Helmholtz Centre Potsdam
> GFZ German Research Centre for Geosciences
> Department 1 - Section 1.4 - Remote Sensing
> -------------------------------------------------------
> Tel.: +49 (0) 331 288 1766
> e-mail: carstenn at gfz-potsdam.de
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From tarabridwell at gmail.com  Fri Jan 20 18:53:36 2012
From: tarabridwell at gmail.com (Tara Bridwell)
Date: Fri, 20 Jan 2012 09:53:36 -0800
Subject: [R-sig-Geo] package raster stack function do not work
In-Reply-To: <9813DABF-6B0E-4EC8-9566-766CA1816E37@wsl.ch>
References: <4F199B88.3010205@aol.com>
	<9813DABF-6B0E-4EC8-9566-766CA1816E37@wsl.ch>
Message-ID: <CAELQJc0n60TZOjVmwfv3FnVv86LM32qe-XukgM53f04R6Fu8iA@mail.gmail.com>

I have also been having difficulties in the raster package.  I had a
hard drive crash and installed 2.13 on my new computer but had
difficulty with the rgdal package, so I switched back to 2.12.  Now I
am finding that things like zlim are not working in the raster package
plot functions, and that some of my output is inexplicably blurry
(just raster data, nothing else) despite using identical code to what
worked prior to my computer switch.

Does anyone have any suggestions as to how to reconcile these differences?

Cheers,
Tara

On Fri, Jan 20, 2012 at 9:42 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> Hi Carsten,
>
> I recently had the same issue, updating R (in my case to 2.13.2) helped!
>
> Rafael
>
> On 20.01.2012, at 17:51, Carsten Neumann wrote:
>
>> Dear raster users,
>>
>> I updated to the newest raster package and instantly all my scripts including stack() and subsequently plot() functions do not worked anymore. The error message after plotting is:
>>
>>
>> d1<-stack('Hasenheide_RGB.img')
>> plot(d1,3)
>>
>> ############################################################################
>> Error in function (classes, fdef, mtable) ?:
>> ?unable to find an inherited method for function "extent", for signature "NULL"
>> In addition: Warning messages:
>> In intersect(extent(x), extent(y)) : Objects do not overlap
>> ###########################################################################
>>
>> I did it with several multidimensional rasters that provide allways the same error message. Where is the problem?
>>
>> ################################################################################
>> sessionInfo()
>> R version 2.12.1 (2010-12-16)
>> Platform: x86_64-unknown-linux-gnu (64-bit)
>>
>> locale:
>> [1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
>> [3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=C
>> [5] LC_MONETARY=C ? ? ? ? ? ? ?LC_MESSAGES=en_US.UTF-8
>> [7] LC_PAPER=en_US.UTF-8 ? ? ? LC_NAME=C
>> [9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> other attached packages:
>> [1] raster_1.9-64 ? gstat_1.0-10 ? ?spacetime_0.5-7 xts_0.8-2
>> [5] zoo_1.7-6 ? ? ? rgdal_0.7-5 ? ? sp_0.9-91 ? ? ? lattice_0.19-13
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.12.1 ?tcltk_2.12.1 tools_2.12.1
>> ################################################################################
>>
>> Greetings
>>
>> Carsten
>>
>> --
>>
>> Carsten Neumann
>> Telegrafenberg, A 17 01.13
>> 14473 Potsdam
>> -------------------------------------------------------
>> Helmholtz Centre Potsdam
>> GFZ German Research Centre for Geosciences
>> Department 1 - Section 1.4 - Remote Sensing
>> -------------------------------------------------------
>> Tel.: +49 (0) 331 288 1766
>> e-mail: carstenn at gfz-potsdam.de
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
>
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From rafael.wueest at wsl.ch  Fri Jan 20 18:58:56 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Fri, 20 Jan 2012 18:58:56 +0100
Subject: [R-sig-Geo] package raster stack function do not work
In-Reply-To: <CAELQJc0n60TZOjVmwfv3FnVv86LM32qe-XukgM53f04R6Fu8iA@mail.gmail.com>
References: <4F199B88.3010205@aol.com>
	<9813DABF-6B0E-4EC8-9566-766CA1816E37@wsl.ch>
	<CAELQJc0n60TZOjVmwfv3FnVv86LM32qe-XukgM53f04R6Fu8iA@mail.gmail.com>
Message-ID: <4A6B1523-EC5D-4AF1-841F-0185B8825CB0@wsl.ch>

Hi Tara

what operating system are you working on? Mac, Windows, Linux?

Rafael


On 20.01.2012, at 18:53, Tara Bridwell wrote:

> I have also been having difficulties in the raster package.  I had a
> hard drive crash and installed 2.13 on my new computer but had
> difficulty with the rgdal package, so I switched back to 2.12.  Now I
> am finding that things like zlim are not working in the raster package
> plot functions, and that some of my output is inexplicably blurry
> (just raster data, nothing else) despite using identical code to what
> worked prior to my computer switch.
> 
> Does anyone have any suggestions as to how to reconcile these differences?
> 
> Cheers,
> Tara
> 
> On Fri, Jan 20, 2012 at 9:42 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
>> Hi Carsten,
>> 
>> I recently had the same issue, updating R (in my case to 2.13.2) helped!
>> 
>> Rafael
>> 
>> On 20.01.2012, at 17:51, Carsten Neumann wrote:
>> 
>>> Dear raster users,
>>> 
>>> I updated to the newest raster package and instantly all my scripts including stack() and subsequently plot() functions do not worked anymore. The error message after plotting is:
>>> 
>>> 
>>> d1<-stack('Hasenheide_RGB.img')
>>> plot(d1,3)
>>> 
>>> ############################################################################
>>> Error in function (classes, fdef, mtable)  :
>>>  unable to find an inherited method for function "extent", for signature "NULL"
>>> In addition: Warning messages:
>>> In intersect(extent(x), extent(y)) : Objects do not overlap
>>> ###########################################################################
>>> 
>>> I did it with several multidimensional rasters that provide allways the same error message. Where is the problem?
>>> 
>>> ################################################################################
>>> sessionInfo()
>>> R version 2.12.1 (2010-12-16)
>>> Platform: x86_64-unknown-linux-gnu (64-bit)
>>> 
>>> locale:
>>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=C
>>> [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
>>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>> 
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> 
>>> other attached packages:
>>> [1] raster_1.9-64   gstat_1.0-10    spacetime_0.5-7 xts_0.8-2
>>> [5] zoo_1.7-6       rgdal_0.7-5     sp_0.9-91       lattice_0.19-13
>>> 
>>> loaded via a namespace (and not attached):
>>> [1] grid_2.12.1  tcltk_2.12.1 tools_2.12.1
>>> ################################################################################
>>> 
>>> Greetings
>>> 
>>> Carsten
>>> 
>>> --
>>> 
>>> Carsten Neumann
>>> Telegrafenberg, A 17 01.13
>>> 14473 Potsdam
>>> -------------------------------------------------------
>>> Helmholtz Centre Potsdam
>>> GFZ German Research Centre for Geosciences
>>> Department 1 - Section 1.4 - Remote Sensing
>>> -------------------------------------------------------
>>> Tel.: +49 (0) 331 288 1766
>>> e-mail: carstenn at gfz-potsdam.de
>>> 
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> 
>> 
>> 
>> --
>> Rafael W?est
>> Swiss Federal Research Institute WSL
>> Z?rcherstrasse 111
>> 8903 Birmensdorf
>> Switzerland
>> 
>> +41 44 7392126
>> rafael.wueest at wsl.ch
>> http://www.wsl.ch/info/mitarbeitende/wueest
>> 
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From tarabridwell at gmail.com  Fri Jan 20 19:05:58 2012
From: tarabridwell at gmail.com (Tara Bridwell)
Date: Fri, 20 Jan 2012 10:05:58 -0800
Subject: [R-sig-Geo] package raster stack function do not work
In-Reply-To: <4A6B1523-EC5D-4AF1-841F-0185B8825CB0@wsl.ch>
References: <4F199B88.3010205@aol.com>
	<9813DABF-6B0E-4EC8-9566-766CA1816E37@wsl.ch>
	<CAELQJc0n60TZOjVmwfv3FnVv86LM32qe-XukgM53f04R6Fu8iA@mail.gmail.com>
	<4A6B1523-EC5D-4AF1-841F-0185B8825CB0@wsl.ch>
Message-ID: <CAELQJc3baF4ZmMt8-uk67njRG_E6KEYgy=QW4xTxL3ZiUWfChA@mail.gmail.com>

Hi Rafael
I am working on Mac 10.7.2 (Lion).

Cheers,
Tara

On Fri, Jan 20, 2012 at 9:58 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> Hi Tara
>
> what operating system are you working on? Mac, Windows, Linux?
>
> Rafael
>
>
> On 20.01.2012, at 18:53, Tara Bridwell wrote:
>
>> I have also been having difficulties in the raster package. ?I had a
>> hard drive crash and installed 2.13 on my new computer but had
>> difficulty with the rgdal package, so I switched back to 2.12. ?Now I
>> am finding that things like zlim are not working in the raster package
>> plot functions, and that some of my output is inexplicably blurry
>> (just raster data, nothing else) despite using identical code to what
>> worked prior to my computer switch.
>>
>> Does anyone have any suggestions as to how to reconcile these differences?
>>
>> Cheers,
>> Tara
>>
>> On Fri, Jan 20, 2012 at 9:42 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
>>> Hi Carsten,
>>>
>>> I recently had the same issue, updating R (in my case to 2.13.2) helped!
>>>
>>> Rafael
>>>
>>> On 20.01.2012, at 17:51, Carsten Neumann wrote:
>>>
>>>> Dear raster users,
>>>>
>>>> I updated to the newest raster package and instantly all my scripts including stack() and subsequently plot() functions do not worked anymore. The error message after plotting is:
>>>>
>>>>
>>>> d1<-stack('Hasenheide_RGB.img')
>>>> plot(d1,3)
>>>>
>>>> ############################################################################
>>>> Error in function (classes, fdef, mtable) ?:
>>>> ?unable to find an inherited method for function "extent", for signature "NULL"
>>>> In addition: Warning messages:
>>>> In intersect(extent(x), extent(y)) : Objects do not overlap
>>>> ###########################################################################
>>>>
>>>> I did it with several multidimensional rasters that provide allways the same error message. Where is the problem?
>>>>
>>>> ################################################################################
>>>> sessionInfo()
>>>> R version 2.12.1 (2010-12-16)
>>>> Platform: x86_64-unknown-linux-gnu (64-bit)
>>>>
>>>> locale:
>>>> [1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
>>>> [3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=C
>>>> [5] LC_MONETARY=C ? ? ? ? ? ? ?LC_MESSAGES=en_US.UTF-8
>>>> [7] LC_PAPER=en_US.UTF-8 ? ? ? LC_NAME=C
>>>> [9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>>>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>>
>>>> attached base packages:
>>>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>>>
>>>> other attached packages:
>>>> [1] raster_1.9-64 ? gstat_1.0-10 ? ?spacetime_0.5-7 xts_0.8-2
>>>> [5] zoo_1.7-6 ? ? ? rgdal_0.7-5 ? ? sp_0.9-91 ? ? ? lattice_0.19-13
>>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] grid_2.12.1 ?tcltk_2.12.1 tools_2.12.1
>>>> ################################################################################
>>>>
>>>> Greetings
>>>>
>>>> Carsten
>>>>
>>>> --
>>>>
>>>> Carsten Neumann
>>>> Telegrafenberg, A 17 01.13
>>>> 14473 Potsdam
>>>> -------------------------------------------------------
>>>> Helmholtz Centre Potsdam
>>>> GFZ German Research Centre for Geosciences
>>>> Department 1 - Section 1.4 - Remote Sensing
>>>> -------------------------------------------------------
>>>> Tel.: +49 (0) 331 288 1766
>>>> e-mail: carstenn at gfz-potsdam.de
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>
>>> --
>>> Rafael W?est
>>> Swiss Federal Research Institute WSL
>>> Z?rcherstrasse 111
>>> 8903 Birmensdorf
>>> Switzerland
>>>
>>> +41 44 7392126
>>> rafael.wueest at wsl.ch
>>> http://www.wsl.ch/info/mitarbeitende/wueest
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
>
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest
>
>
>


From rafael.wueest at wsl.ch  Fri Jan 20 19:12:02 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Fri, 20 Jan 2012 19:12:02 +0100
Subject: [R-sig-Geo] package raster stack function do not work
In-Reply-To: <CAMCtwpHUyjRioNEQHJKM6kvV8MRLD_YGFaFq2Lf23VXfX_aS5A@mail.gmail.com>
References: <4F199B88.3010205@aol.com>
	<9813DABF-6B0E-4EC8-9566-766CA1816E37@wsl.ch>
	<CAELQJc0n60TZOjVmwfv3FnVv86LM32qe-XukgM53f04R6Fu8iA@mail.gmail.com>
	<CAMCtwpHUyjRioNEQHJKM6kvV8MRLD_YGFaFq2Lf23VXfX_aS5A@mail.gmail.com>
Message-ID: <0940C973-7C38-4D23-9CC0-FEF0D285C070@wsl.ch>

You might need the right combination of R, GDAL, rgdal and tell R how to install properly.

The following may help. I want to state that I neither now the author of www.kyngchaos.com and its packages, nor do I anyhow profit from mentioning the website. It just helps me get R and GDAL running smoothly on my Mac...

1) install R version 2.13.2

2) install "GDAL complete" from http://www.kyngchaos.com/software:frameworks

3) download and unzip rgdal which matches with the R version your http://www.kyngchaos.com/software:frameworks

4) open shell, goto folder where you have unzipped rgdal:

R CMD INSTALL --configure-args='--with-gdal-config=/Library/Frameworks/GDAL.framework/Versions/1.8/Programs/gdal-config --with-proj-include=/opt/local/include --with-proj-lib=/opt/local/lib' rgdal

This works for me...

Rafa


On 20.01.2012, at 19:03, Sara Maxwell wrote:

> Hi Rafael
> I am working on Mac 10.7.2 (Lion).
> 
> Cheers,
> Tara
> 
> On Fri, Jan 20, 2012 at 9:53 AM, Tara Bridwell <tarabridwell at gmail.com> wrote:
> I have also been having difficulties in the raster package.  I had a
> hard drive crash and installed 2.13 on my new computer but had
> difficulty with the rgdal package, so I switched back to 2.12.  Now I
> am finding that things like zlim are not working in the raster package
> plot functions, and that some of my output is inexplicably blurry
> (just raster data, nothing else) despite using identical code to what
> worked prior to my computer switch.
> 
> Does anyone have any suggestions as to how to reconcile these differences?
> 
> Cheers,
> Tara
> 
> On Fri, Jan 20, 2012 at 9:42 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> > Hi Carsten,
> >
> > I recently had the same issue, updating R (in my case to 2.13.2) helped!
> >
> > Rafael
> >
> > On 20.01.2012, at 17:51, Carsten Neumann wrote:
> >
> >> Dear raster users,
> >>
> >> I updated to the newest raster package and instantly all my scripts including stack() and subsequently plot() functions do not worked anymore. The error message after plotting is:
> >>
> >>
> >> d1<-stack('Hasenheide_RGB.img')
> >> plot(d1,3)
> >>
> >> ############################################################################
> >> Error in function (classes, fdef, mtable)  :
> >>  unable to find an inherited method for function "extent", for signature "NULL"
> >> In addition: Warning messages:
> >> In intersect(extent(x), extent(y)) : Objects do not overlap
> >> ###########################################################################
> >>
> >> I did it with several multidimensional rasters that provide allways the same error message. Where is the problem?
> >>
> >> ################################################################################
> >> sessionInfo()
> >> R version 2.12.1 (2010-12-16)
> >> Platform: x86_64-unknown-linux-gnu (64-bit)
> >>
> >> locale:
> >> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> >> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=C
> >> [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
> >> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> >> [9] LC_ADDRESS=C               LC_TELEPHONE=C
> >> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >>
> >> attached base packages:
> >> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>
> >> other attached packages:
> >> [1] raster_1.9-64   gstat_1.0-10    spacetime_0.5-7 xts_0.8-2
> >> [5] zoo_1.7-6       rgdal_0.7-5     sp_0.9-91       lattice_0.19-13
> >>
> >> loaded via a namespace (and not attached):
> >> [1] grid_2.12.1  tcltk_2.12.1 tools_2.12.1
> >> ################################################################################
> >>
> >> Greetings
> >>
> >> Carsten
> >>
> >> --
> >>
> >> Carsten Neumann
> >> Telegrafenberg, A 17 01.13
> >> 14473 Potsdam
> >> -------------------------------------------------------
> >> Helmholtz Centre Potsdam
> >> GFZ German Research Centre for Geosciences
> >> Department 1 - Section 1.4 - Remote Sensing
> >> -------------------------------------------------------
> >> Tel.: +49 (0) 331 288 1766
> >> e-mail: carstenn at gfz-potsdam.de
> >>
> >> _______________________________________________
> >> R-sig-Geo mailing list
> >> R-sig-Geo at r-project.org
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> >
> >
> > --
> > Rafael W?est
> > Swiss Federal Research Institute WSL
> > Z?rcherstrasse 111
> > 8903 Birmensdorf
> > Switzerland
> >
> > +41 44 7392126
> > rafael.wueest at wsl.ch
> > http://www.wsl.ch/info/mitarbeitende/wueest
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From dhaulsee at udel.edu  Fri Jan 20 19:16:07 2012
From: dhaulsee at udel.edu (Danielle Haulsee)
Date: Fri, 20 Jan 2012 13:16:07 -0500
Subject: [R-sig-Geo] shortestPath {gdistance} error
Message-ID: <CAOPy_rma24fN-nvkdJ8NJLPpBi3hsxA0g_iqFBdwX_eXgAo87Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120120/59988885/attachment.pl>

From tarabridwell at gmail.com  Fri Jan 20 19:16:23 2012
From: tarabridwell at gmail.com (Tara Bridwell)
Date: Fri, 20 Jan 2012 10:16:23 -0800
Subject: [R-sig-Geo] package raster stack function do not work
In-Reply-To: <0940C973-7C38-4D23-9CC0-FEF0D285C070@wsl.ch>
References: <4F199B88.3010205@aol.com>
	<9813DABF-6B0E-4EC8-9566-766CA1816E37@wsl.ch>
	<CAELQJc0n60TZOjVmwfv3FnVv86LM32qe-XukgM53f04R6Fu8iA@mail.gmail.com>
	<CAMCtwpHUyjRioNEQHJKM6kvV8MRLD_YGFaFq2Lf23VXfX_aS5A@mail.gmail.com>
	<0940C973-7C38-4D23-9CC0-FEF0D285C070@wsl.ch>
Message-ID: <CAELQJc0y+sUndoEEvqpVPqzp+ataJDazDbZGa3ncCdb2=wnT1w@mail.gmail.com>

Thanks Rafael,
I was able to instal rgdal etc alright, but when I went to do anything
with the rasters, that was when I hit problems - I was told I was out
of memory (which made no sense).  I suppose it is possible I didn't
install it correctly however...

Tara

On Fri, Jan 20, 2012 at 10:12 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> You might need the right combination of R, GDAL, rgdal and tell R how to install properly.
>
> The following may help. I want to state that I neither now the author of www.kyngchaos.com and its packages, nor do I anyhow profit from mentioning the website. It just helps me get R and GDAL running smoothly on my Mac...
>
> 1) install R version 2.13.2
>
> 2) install "GDAL complete" from http://www.kyngchaos.com/software:frameworks
>
> 3) download and unzip rgdal which matches with the R version your http://www.kyngchaos.com/software:frameworks
>
> 4) open shell, goto folder where you have unzipped rgdal:
>
> R CMD INSTALL --configure-args='--with-gdal-config=/Library/Frameworks/GDAL.framework/Versions/1.8/Programs/gdal-config --with-proj-include=/opt/local/include --with-proj-lib=/opt/local/lib' rgdal
>
> This works for me...
>
> Rafa
>
>
> On 20.01.2012, at 19:03, Sara Maxwell wrote:
>
>> Hi Rafael
>> I am working on Mac 10.7.2 (Lion).
>>
>> Cheers,
>> Tara
>>
>> On Fri, Jan 20, 2012 at 9:53 AM, Tara Bridwell <tarabridwell at gmail.com> wrote:
>> I have also been having difficulties in the raster package. ?I had a
>> hard drive crash and installed 2.13 on my new computer but had
>> difficulty with the rgdal package, so I switched back to 2.12. ?Now I
>> am finding that things like zlim are not working in the raster package
>> plot functions, and that some of my output is inexplicably blurry
>> (just raster data, nothing else) despite using identical code to what
>> worked prior to my computer switch.
>>
>> Does anyone have any suggestions as to how to reconcile these differences?
>>
>> Cheers,
>> Tara
>>
>> On Fri, Jan 20, 2012 at 9:42 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
>> > Hi Carsten,
>> >
>> > I recently had the same issue, updating R (in my case to 2.13.2) helped!
>> >
>> > Rafael
>> >
>> > On 20.01.2012, at 17:51, Carsten Neumann wrote:
>> >
>> >> Dear raster users,
>> >>
>> >> I updated to the newest raster package and instantly all my scripts including stack() and subsequently plot() functions do not worked anymore. The error message after plotting is:
>> >>
>> >>
>> >> d1<-stack('Hasenheide_RGB.img')
>> >> plot(d1,3)
>> >>
>> >> ############################################################################
>> >> Error in function (classes, fdef, mtable) ?:
>> >> ?unable to find an inherited method for function "extent", for signature "NULL"
>> >> In addition: Warning messages:
>> >> In intersect(extent(x), extent(y)) : Objects do not overlap
>> >> ###########################################################################
>> >>
>> >> I did it with several multidimensional rasters that provide allways the same error message. Where is the problem?
>> >>
>> >> ################################################################################
>> >> sessionInfo()
>> >> R version 2.12.1 (2010-12-16)
>> >> Platform: x86_64-unknown-linux-gnu (64-bit)
>> >>
>> >> locale:
>> >> [1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
>> >> [3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=C
>> >> [5] LC_MONETARY=C ? ? ? ? ? ? ?LC_MESSAGES=en_US.UTF-8
>> >> [7] LC_PAPER=en_US.UTF-8 ? ? ? LC_NAME=C
>> >> [9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>> >> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> >>
>> >> attached base packages:
>> >> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>> >>
>> >> other attached packages:
>> >> [1] raster_1.9-64 ? gstat_1.0-10 ? ?spacetime_0.5-7 xts_0.8-2
>> >> [5] zoo_1.7-6 ? ? ? rgdal_0.7-5 ? ? sp_0.9-91 ? ? ? lattice_0.19-13
>> >>
>> >> loaded via a namespace (and not attached):
>> >> [1] grid_2.12.1 ?tcltk_2.12.1 tools_2.12.1
>> >> ################################################################################
>> >>
>> >> Greetings
>> >>
>> >> Carsten
>> >>
>> >> --
>> >>
>> >> Carsten Neumann
>> >> Telegrafenberg, A 17 01.13
>> >> 14473 Potsdam
>> >> -------------------------------------------------------
>> >> Helmholtz Centre Potsdam
>> >> GFZ German Research Centre for Geosciences
>> >> Department 1 - Section 1.4 - Remote Sensing
>> >> -------------------------------------------------------
>> >> Tel.: +49 (0) 331 288 1766
>> >> e-mail: carstenn at gfz-potsdam.de
>> >>
>> >> _______________________________________________
>> >> R-sig-Geo mailing list
>> >> R-sig-Geo at r-project.org
>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> >
>> >
>> >
>> > --
>> > Rafael W?est
>> > Swiss Federal Research Institute WSL
>> > Z?rcherstrasse 111
>> > 8903 Birmensdorf
>> > Switzerland
>> >
>> > +41 44 7392126
>> > rafael.wueest at wsl.ch
>> > http://www.wsl.ch/info/mitarbeitende/wueest
>> >
>> > _______________________________________________
>> > R-sig-Geo mailing list
>> > R-sig-Geo at r-project.org
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>
>
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
>
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest
>
>
>


From carstennh at aol.com  Fri Jan 20 19:23:38 2012
From: carstennh at aol.com (Carsten Neumann)
Date: Fri, 20 Jan 2012 19:23:38 +0100
Subject: [R-sig-Geo] package raster stack function do not work
Message-ID: <4F19B12A.4020006@aol.com>

Thanks for your fast reply,

sometimes it's hard to work in a big company where you depend on system 
administrators. It seems that there was an update in rgdal (and sp) on 
my network linux machine and that conflicts with R version 2.12.1. Same 
problem (error message reading image data: "Error in 
getDriverName(getDriver(x)) : Null external pointer") So I can nothing 
do without administrator privileges and wait until beginning of next 
week. But very great thanks for your efforts, especially Robert for 
testing my data.

Best regards

Carsten

-- 

Carsten Neumann
Telegrafenberg, A 17 01.13
14473 Potsdam
-------------------------------------------------------
Helmholtz Centre Potsdam
GFZ German Research Centre for Geosciences
Department 1 - Section 1.4 - Remote Sensing
-------------------------------------------------------
Tel.: +49 (0) 331 288 1766
e-mail: carstenn at gfz-potsdam.de


From rafael.wueest at wsl.ch  Sat Jan 21 18:08:59 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Sat, 21 Jan 2012 18:08:59 +0100
Subject: [R-sig-Geo] connection error when calling maxent()
In-Reply-To: <CANtt_hwiWzYZrt04sFduFzN2gT-Z++vGjxd+UjKBVke2Hdgxbw@mail.gmail.com>
References: <1325695956381-7151125.post@n2.nabble.com>
	<CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>
	<92781526-59B3-47C2-8A5B-EB835FC5A628@wsl.ch>
	<CANtt_hwiWzYZrt04sFduFzN2gT-Z++vGjxd+UjKBVke2Hdgxbw@mail.gmail.com>
Message-ID: <692F9D18-423C-420A-A593-EC8A55ABDC1B@wsl.ch>

Dear Robert,

I have a question related to the workaround I so far used (specifying the path argument in  dismo::maxent).

I fit a model:

md<-maxent(...,path='my/wanted/path')

Then save it:

save(md,file='another/path/maxent_md')

I wanted to save it because I need it for further analyses.

Now, in a totally independent R session, I load the model file:

load('another/path/maxent_md')

When I now try to predict:

predict(md,myrasterstack)

, I am getting the following error:

Error in  file(file, ifelse(append, "a", "w")) : 
  can't open connection
In addition : Warning:
In file(file, ifelse(append, "a", "w")) :
  can't open file '/var/folders/ft/fthJYD+6GkCvmcCArZBaQU++waU/-Tmp-/R_raster_tmp/maxent/lambdas.csv': No such file or directory

It seems like, even though I specified the path argument when generating md, it is not passed on to md but only the maxent output gets written to the specified path.

Is there a possibility to specify the path where the predict function is looking for the maxent-specific files (couldn't find anything in the web, this list)? Or, in my user-view even better, pass the path on to the generated md object. Anyway, this would allow me to further use such a model object of the class MaxEnt.

Rafael



On 15.01.2012, at 03:12, Robert J. Hijmans wrote:

> Rafael,
> 
> The issue here would be the version of raster, not R (as long as it is >= 2.11.0); but I agree that you have found a good solution.  And the error is a rather different one that you originally reported:
> 
> > Error: No features available: select more feature types or deselect auto features
> 
> Unless you did not copy this line when you first reported the problem...
>  
> That error comes from MaxEnt, and clearly states that there is something wrong with the feature selection. I do not know why. Perhaps because of one of the MaxEnt options you use, perhaps in combination with only a few point records? That is a subject more suitable for the MaxEnt discussion forum. 
> 
> Because MaxEnt fails to run, further errors occur, but the trouble starts with the line above. So it seems that your method works, except for MaxEnt run 46
> 
> Robert
> 
> 
> On Sat, Jan 14, 2012 at 3:51 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> Dear Robert,
> 
> Unfortunately, the problem is not completely solved for me yet. I am trying to run maxent() on a cluster, because I'm modeling >200 species, using 8 different parameterizations and 4 modeling algorithms (maxent is one of them), which results in >6000 models. The cluster is running R 2.12.2 and I can't update it on my own.
> 
> As a workaround, I tried to specify the path option in the maxent() function because I suspected some process might interfere with the temporary Raster directory. This seemed to run for quite some time, but after maxent being called for the 46th on one of the cluster's CPU, it crashed with the same error
> 
> > Error: No features available: select more feature types or deselect auto features
> > Error in file(con, "r") : cannot open the connection
> > Calls: run4models ... maxent -> maxent -> .local -> unlist -> readLines -> file
> > In addition: Warning message:
> > In file(con, "r") :
> >   cannot open file '/.../me_output/xval/species.lambdas': No such file or directory
> > Execution halted
> 
> Do you have any idea how I could still make maxent() functional using R 2.12.2?
> 
> Rafael
> 
> 
> On 12.01.2012, at 01:33, Robert J. Hijmans wrote:
> 
> > Rafael,
> >
> > Please send more info about what you are doing. It appears that the MaxEnt output file gets overwritten by another process. Can you also send your sessionInfo() (after first updating R to a more recent version)?
> >
> > Robert
> >
> >
> > On Wed, Jan 4, 2012 at 8:52 AM, rafael.wueest <rafael.wueest at wsl.ch> wrote:
> > Hi Folks
> >
> > when I am trying to call the maxent() function within a function I created,
> > I am getting the following error:
> >
> > Error in file(con, "r") : cannot open the connection
> > In addition: Warning message:
> > In file(con, "r") :
> >  cannot open file
> > '/var/folders/ft/fthJYD+6GkCvmcCArZBaQU++waU/-Tmp-/R_raster_tmp/maxent/10943312360/species.lambdas':
> > No such file or directory
> >
> > I am here also pasting some output of
> > >traceback()
> > 7: file(con, "r")
> > 6: readLines(paste(dirout, "/species.lambdas", sep = ""))
> > 5: unlist(readLines(paste(dirout, "/species.lambdas", sep = "")))
> > 4: .local(x, p, ...)
> > 3: maxent(background, occ, args = me.args) at run4models_restios.r#558
> > ...
> >
> > I am using JGR on a Mac and downloaded the newest dismo (CRAN sources) and
> > maxent version (see below).
> >
> > Can anyone help me? I am happy to provide more detailed information...
> >
> > Rafa
> >
> > >maxent()
> > This is MaxEnt version 3.3.3k
> >
> > >sessionInfo()
> > R version 2.12.2 (2011-02-25)
> > Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> >
> > locale:
> > [1] C
> >
> > attached base packages:
> > [1] splines   stats     graphics  grDevices utils     datasets  methods
> > [8] base
> >
> > other attached packages:
> >  [1] gbm_1.6-3.1           survival_2.36-5       gam_1.04.1
> >  [4] PresenceAbsence_1.1.5 maptools_0.8-10       lattice_0.19-33
> >  [7] foreign_0.8-42        rgdal_0.6-33          dismo_0.7-14
> > [10] raster_1.9-13         sp_0.9-84             JGR_1.7-7
> > [13] iplots_1.1-4          JavaGD_0.5-4          rJava_0.9-1
> >
> > loaded via a namespace (and not attached):
> > [1] grid_2.12.2  tools_2.12.2
> > Warning message:
> > 'DESCRIPTION' file has 'Encoding' field and re-encoding is not possible
> >
> >
> > --
> > View this message in context: http://r-sig-geo.2731867.n2.nabble.com/connection-error-when-calling-maxent-tp7151125p7151125.html
> > Sent from the R-sig-geo mailing list archive at Nabble.com.
> >
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> >
> 
> 
> 
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
> 
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest
> 
> 
> 
> 



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From b.rowlingson at lancaster.ac.uk  Sun Jan 22 16:57:40 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sun, 22 Jan 2012 15:57:40 +0000
Subject: [R-sig-Geo] planar polygon partition patching program
Message-ID: <CANVKczN7JAc3r=Xw5xFcBss-h9y4hzvPzZcWdAAVMZaOhmvWJw@mail.gmail.com>

Having been bitten this week by a couple of shapefiles with broken
geometry, I did a bit of searching for code that can fix up these kind
of errors - you know, where adjacent polygons aren't quite adjacent,
or there's slivers or other junk.

 I found this C++ implementation:

http://www.gdmc.nl:8000/pprepair

which looks quite capable. Anyone interesting in hooking it up to
SpatialPolygons?

There's a python implementation of something similar mentioned here:

http://www.isprs.org/proceedings/XXXVIII/part2/Papers/24_Paper.pdf

but I think I might just leave that to my QGIS colleagues....

Barry


From stephen.d.clark at ntlworld.com  Sun Jan 22 19:43:41 2012
From: stephen.d.clark at ntlworld.com (Stephen Clark)
Date: Sun, 22 Jan 2012 18:43:41 -0000
Subject: [R-sig-Geo] modelling spatial data from different locations
Message-ID: <001601ccd935$c3bb2e20$4b318a60$@ntlworld.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120122/0b727329/attachment.pl>

From Kevin.Morelle at ulg.ac.be  Mon Jan 23 10:11:41 2012
From: Kevin.Morelle at ulg.ac.be (=?ISO-8859-1?Q?K=E9vin_Morelle?=)
Date: Mon, 23 Jan 2012 10:11:41 +0100
Subject: [R-sig-Geo] Converting image to asc
Message-ID: <4F1D244D.6030809@ulg.ac.be>

Dear list members,

I'm facing the following error when I want to convert an image object 
(obtained from the density function of the SpatStat package) into a asc 
object using the im2asc function of adehabitat:

mais.asc <- im2asc(mais.dens)
Erreur dans im2asc(mais.dens) :
   the grid cellsize should be identical for both X and Y directions.

I previously delimited my study area by a polygon, could it be the 
external grid cells (cut by that polygon) that would give this error 
(because leading to non-square cells...)?
Below, my code more detailed.

Thanks for any help,
Regards,

Kevin

# Maize fied for the whole region
-------------------------------------------
mais <- readShapePoly("D:/Carto/Landscape/Mais_2009.shp")

#  Limiting to my study area (W.sp)
-----------------------------------------------
mais.ze <- crop (mais,W.sp)

# Deriving density of maize field throught the density function
------------------------------------------------------------------------------------
#1. find centroid of maize field

mais.ps <- SpatialPolygons2PolySet(mais.ze)
mais.centroids <- calcCentroid(mais.ps, rollup=1)
mais.df <- as.data.frame(mais.centroids)

#2. convert to point pattern class+apply density function

mais.ppp <- ppp (mais.df$X, mais.df$Y, window = W2)
mais.dens <- density(mais.ppp, sigma=1000)

#3. convert mais.dens to asc for ENFA anaysis (in adehabitat)

mais.asc <- as.asc(mais.mx)
=>Erreur dans im2asc(mais.dens) :
   the grid cellsize should be identical for both X and Y directions.

-- 
Morelle Kevin
Universit? de Li?ge - Gembloux Agro-Bio Tech
Unit? de Gestion des Ressources foresti?res et des Milieux naturels
--------
University of Li?ge - Gembloux Agro-Bio Tech
Unit of Forest and Nature Management
--------
2, Passage des D?port?s
B-5030  GEMBLOUX
BELGIQUE

T?l : + 32 (0)81 62.22.14
Fax : + 32 (0)81 62.23.01
E-mail : kevin.morelle at ulg.ac.be
Web : http://www.fsagx.ac.be/gf/


From basille at ase-research.org  Mon Jan 23 14:49:12 2012
From: basille at ase-research.org (Mathieu Basille)
Date: Mon, 23 Jan 2012 08:49:12 -0500
Subject: [R-sig-Geo] Converting image to asc
In-Reply-To: <4F1D244D.6030809@ulg.ac.be>
References: <4F1D244D.6030809@ulg.ac.be>
Message-ID: <4F1D6558.1060701@ase-research.org>

Dear Kevin,

I'm not sure how to solve your exact problem, since you don't provide a 
reproducible code, but here are a couple of comments:

1) You shouldn't use the old 'adehabitat' any more. This package has been 
split in four new ones, namely, adehabitatMA for map management, 
adehabitatLT for trajectories, adehabitatHR for home-range analyses, and 
adehabitatHS for habitat selection analyses. You can simply install them 
all by

install.packages("adehabitatHS")

The main benefit of it is that adehabitat does not use its own map classes 
any more, but use sp classes instead. This might well correct the 
conversion problem, which would thus be from spatstat to sp now.

2) You could also use kernelUD from adehabitatHR directly. The output would 
most certainly be suited for other analyses using adehabitatXY.

3) I'm not sure I understand why you first derive a density for an ENFA 
analysis. Why don't you use directly the centroid coordinates as points in 
the ENFA?

Hope this helps,
Mathieu.


Le 23/01/2012 04:11, K?vin Morelle a ?crit :
> Dear list members,
>
> I'm facing the following error when I want to convert an image object
> (obtained from the density function of the SpatStat package) into a asc
> object using the im2asc function of adehabitat:
>
> mais.asc <- im2asc(mais.dens)
> Erreur dans im2asc(mais.dens) :
> the grid cellsize should be identical for both X and Y directions.
>
> I previously delimited my study area by a polygon, could it be the external
> grid cells (cut by that polygon) that would give this error (because
> leading to non-square cells...)?
> Below, my code more detailed.
>
> Thanks for any help,
> Regards,
>
> Kevin
>
> # Maize fied for the whole region
> -------------------------------------------
> mais <- readShapePoly("D:/Carto/Landscape/Mais_2009.shp")
>
> # Limiting to my study area (W.sp)
> -----------------------------------------------
> mais.ze <- crop (mais,W.sp)
>
> # Deriving density of maize field throught the density function
> ------------------------------------------------------------------------------------
>
> #1. find centroid of maize field
>
> mais.ps <- SpatialPolygons2PolySet(mais.ze)
> mais.centroids <- calcCentroid(mais.ps, rollup=1)
> mais.df <- as.data.frame(mais.centroids)
>
> #2. convert to point pattern class+apply density function
>
> mais.ppp <- ppp (mais.df$X, mais.df$Y, window = W2)
> mais.dens <- density(mais.ppp, sigma=1000)
>
> #3. convert mais.dens to asc for ENFA anaysis (in adehabitat)
>
> mais.asc <- as.asc(mais.mx)
> =>Erreur dans im2asc(mais.dens) :
> the grid cellsize should be identical for both X and Y directions.
>

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From Kevin.Morelle at ulg.ac.be  Mon Jan 23 15:42:37 2012
From: Kevin.Morelle at ulg.ac.be (=?ISO-8859-1?Q?K=E9vin_Morelle?=)
Date: Mon, 23 Jan 2012 15:42:37 +0100
Subject: [R-sig-Geo] Converting image to asc
In-Reply-To: <4F1D6558.1060701@ase-research.org>
References: <4F1D244D.6030809@ulg.ac.be> <4F1D6558.1060701@ase-research.org>
Message-ID: <4F1D71DD.8050807@ulg.ac.be>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120123/951a910b/attachment.pl>

From juta.kawalerowicz at stx.ox.ac.uk  Mon Jan 23 15:39:05 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Mon, 23 Jan 2012 14:39:05 +0000
Subject: [R-sig-Geo] pycno - problems with pycnophylactic interpolation for
 skewed populations
Message-ID: <BE8C4D3FFC7C2D49830176E9D80106958F0C5B7DFD@EXMBX04.ad.oak.ox.ac.uk>

Dear List, 

I have been using a Chris Brunsdon's pycno package for a while, but I wondered if anybody has faced problems when trying to interpolate over geographical units where populations distribution is very skewed towards zero (like in ew.wards$elect3). When I run estimations for a more normally distributed variables (such as ew.wards$ppl3), it's working great but I struggle to find a right celldim parameter - it's either too big and gives error or too small and then I run out of memory. I've been experimenting with different parameters for a while now, maybe I am missing something?

Anyway here is the code

library(pycno)
load(url("http://dl.dropbox.com/u/30578197/space4.RData")) 
#largish workspace - may take a while to load (bit it does load)

ls()		       
#"ew.districts"		shapefile with current districts
#"ew.wards"     	shapefile with electoral wards from 1973 meregd with electoral results from 1979. I am interested in results in (elect3) showing results of a small far right party. 

per<-pycno(ew.wards,ew.wards$elect3, 0.1)
#Maximum Change:          NaN - will stop at      0.00440
#Error in if (max(abs(old.x - x)) < stopper) break : 
#  missing value where TRUE/FALSE needed

#so maybe I should go down with celldim parameter? 

per<-pycno(ew.wards,ew.wards$elect3, 0.01)
#Maximum Change:          NaN - will stop at      0.00095
#Error in if (max(abs(old.x - x)) < stopper) break : 
#  missing value where TRUE/FALSE needed

#CAUTION: my laptop with its 4G memory becomes pretty much unresponsive for ~5 min

per<-pycno(ew.wards,ew.wards$elect3, 0.001)
#Error: cannot allocate vector of size 367.9 Mb
#In addition: Warning messages:
#1: In validityMethod(object) :
#  Reached total allocation of 3947Mb: see help(memory.size)
#2: In validityMethod(object) :
#  Reached total allocation of 3947Mb: see help(memory.size)
#3: In validityMethod(object) :
#  Reached total allocation of 3947Mb: see help(memory.size)
#4: In validityMethod(object) :
#  Reached total allocation of 3947Mb: see help(memory.size)


#Compare with how smoothly it works with ew.wards$ppl3

ppl<-pycno(ew.wards,ew.wards$ppl3, 0.1)
image(ppl)

Has anybody else encountered/solved this problem before? In the past setting a good celldim parameter has not been that challanging, this is the first time that I am trying to run Tobler's pycnophylactic interpolation on such a skewed data. I've been playing with different values between 0.01 and 0.001 but couldn't find anything which would not give me one of the above errors. I'd be very grateful for any hints.

Thanks, 
Juta


From basille at ase-research.org  Mon Jan 23 15:49:23 2012
From: basille at ase-research.org (Mathieu Basille)
Date: Mon, 23 Jan 2012 09:49:23 -0500
Subject: [R-sig-Geo] Converting image to asc
In-Reply-To: <4F1D71DD.8050807@ulg.ac.be>
References: <4F1D244D.6030809@ulg.ac.be> <4F1D6558.1060701@ase-research.org>
	<4F1D71DD.8050807@ulg.ac.be>
Message-ID: <4F1D7373.5060305@ase-research.org>

Dear Kevin,

I'm really not familiar with spatstat, so that I can't really help on 
density.ppp. It's odd, however, that pixels are not squares by default... 
Here, I can only advice to use adehabitatHR::kernelUD to estimate point 
density as a workaround (and it would probably be easier to integrate with 
other adehabitat analyses).

On the adehabitat side, there is no such thing as im2asc in the latest 
versions, since adehabitatMA (and related adehabitatXY packages) use sp 
classes, and not asc any more. Thus, I think you're still using some old 
code with a wrong call to adehabitat::im2asc (previous adehabitat version). 
A complete switch to adehabitatMA/adehabitatHS should correct this.

I understand now your idea with density as a covariate, not as the point 
pattern you want to analyse.

Best,
Mathieu.


Le 23/01/2012 09:42, K?vin Morelle a ?crit :
> Thanks for your reply Mathieu,
>
> Well I went a bit further in trying to resolve the problem and found out
> that when applying this density.ppp function of SpatStat the resulting
> image contains pixel with different xy dimensions. There is the problem
> I think:
>
>   >summary(mais.dens )
>       real-valued pixel image
>       500 x 500 pixel array (ny, nx)
>       enclosing rectangle: [158814.835784285, 242204.064319242] x
> [85205.9013486226, 142933.765576564]     units
> /*dimensions of each pixel: 167 x 115 units */
>
> And somehow function im2asc do not allow for converting such image. But
> I cannot find how to change settings of density.ppp to get an image with
> same XY array. Guess it should be possible but...
>
> Yes I saw that adehabitat was rearranged, and I'm using the latest
> version if no error from my side.
>
> Here the idea was to get a map of the density of maize field as a
> covariate to use in ENFA. This is the reason why I do not use the point
> directly in ENFA. My point layer for ENFA is the localisation of shot
> wild boar.
>
> Maybe as you suggest I could use other function to get the same result.
>
> Thanks again for your help and further advices,
>
> Kevin
>
>
>
> Le 23/01/2012 14:49, Mathieu Basille a ?crit :
>> Dear Kevin,
>>
>> I'm not sure how to solve your exact problem, since you don't provide
>> a reproducible code, but here are a couple of comments:
>>
>> 1) You shouldn't use the old 'adehabitat' any more. This package has
>> been split in four new ones, namely, adehabitatMA for map management,
>> adehabitatLT for trajectories, adehabitatHR for home-range analyses,
>> and adehabitatHS for habitat selection analyses. You can simply
>> install them all by
>>
>> install.packages("adehabitatHS")
>>
>> The main benefit of it is that adehabitat does not use its own map
>> classes any more, but use sp classes instead. This might well correct
>> the conversion problem, which would thus be from spatstat to sp now.
>>
>> 2) You could also use kernelUD from adehabitatHR directly. The output
>> would most certainly be suited for other analyses using adehabitatXY.
>>
>> 3) I'm not sure I understand why you first derive a density for an
>> ENFA analysis. Why don't you use directly the centroid coordinates as
>> points in the ENFA?
>>
>> Hope this helps,
>> Mathieu.
>>
>>
>> Le 23/01/2012 04:11, K?vin Morelle a ?crit :
>>> Dear list members,
>>>
>>> I'm facing the following error when I want to convert an image object
>>> (obtained from the density function of the SpatStat package) into a asc
>>> object using the im2asc function of adehabitat:
>>>
>>> mais.asc<- im2asc(mais.dens)
>>> Erreur dans im2asc(mais.dens) :
>>> the grid cellsize should be identical for both X and Y directions.
>>>
>>> I previously delimited my study area by a polygon, could it be the
>>> external
>>> grid cells (cut by that polygon) that would give this error (because
>>> leading to non-square cells...)?
>>> Below, my code more detailed.
>>>
>>> Thanks for any help,
>>> Regards,
>>>
>>> Kevin
>>>
>>> # Maize fied for the whole region
>>> -------------------------------------------
>>> mais<- readShapePoly("D:/Carto/Landscape/Mais_2009.shp")
>>>
>>> # Limiting to my study area (W.sp)
>>> -----------------------------------------------
>>> mais.ze<- crop (mais,W.sp)
>>>
>>> # Deriving density of maize field throught the density function
>>> ------------------------------------------------------------------------------------
>>>
>>>
>>> #1. find centroid of maize field
>>>
>>> mais.ps<- SpatialPolygons2PolySet(mais.ze)
>>> mais.centroids<- calcCentroid(mais.ps, rollup=1)
>>> mais.df<- as.data.frame(mais.centroids)
>>>
>>> #2. convert to point pattern class+apply density function
>>>
>>> mais.ppp<- ppp (mais.df$X, mais.df$Y, window = W2)
>>> mais.dens<- density(mais.ppp, sigma=1000)
>>>
>>> #3. convert mais.dens to asc for ENFA anaysis (in adehabitat)
>>>
>>> mais.asc<- as.asc(mais.mx)
>>> =>Erreur dans im2asc(mais.dens) :
>>> the grid cellsize should be identical for both X and Y directions.
>>>
>>
>
>
>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From Kevin.Morelle at ulg.ac.be  Mon Jan 23 17:26:28 2012
From: Kevin.Morelle at ulg.ac.be (=?ISO-8859-1?Q?K=E9vin_Morelle?=)
Date: Mon, 23 Jan 2012 17:26:28 +0100
Subject: [R-sig-Geo] Converting image to asc
In-Reply-To: <4F1D7373.5060305@ase-research.org>
References: <4F1D244D.6030809@ulg.ac.be> <4F1D6558.1060701@ase-research.org>
	<4F1D71DD.8050807@ulg.ac.be> <4F1D7373.5060305@ase-research.org>
Message-ID: <4F1D8A34.3040807@ulg.ac.be>

yes I also find it strange that it is not squares pixel but maybe we're 
missing something...if M. Baddeley is reading this mail, maybe he can help
Anyway, althought new version of adehabitat uses sp classes, to run 
enfa, one still needs to have asc object, isn't it?
If I'm not wrong in that, I found another way to convert my image of 
SpatStat to an asc object, converting first the pixel image to a matrix 
then converting it to asc:

maize.mx <- as.matrix(maize.dens)
maize.asc <- as.asc(maize.mx)

But then, somehow doing this, my covariate and my point layer do not 
have the same extent anymore, like if passing by a matrix, it 
recalculates new xy ranges...Using data2enfa function on this point and 
covariate layer then doesn't give anything.
Sorry if all this appears to you a bit trivial,
thanks for any help,

kevin

Le 23/01/2012 15:49, Mathieu Basille a ?crit :
> Dear Kevin,
>
> I'm really not familiar with spatstat, so that I can't really help on 
> density.ppp. It's odd, however, that pixels are not squares by 
> default... Here, I can only advice to use adehabitatHR::kernelUD to 
> estimate point density as a workaround (and it would probably be 
> easier to integrate with other adehabitat analyses).
>
> On the adehabitat side, there is no such thing as im2asc in the latest 
> versions, since adehabitatMA (and related adehabitatXY packages) use 
> sp classes, and not asc any more. Thus, I think you're still using 
> some old code with a wrong call to adehabitat::im2asc (previous 
> adehabitat version). A complete switch to adehabitatMA/adehabitatHS 
> should correct this.
>
> I understand now your idea with density as a covariate, not as the 
> point pattern you want to analyse.
>
> Best,
> Mathieu.
>
>
> Le 23/01/2012 09:42, K?vin Morelle a ?crit :
>> Thanks for your reply Mathieu,
>>
>> Well I went a bit further in trying to resolve the problem and found out
>> that when applying this density.ppp function of SpatStat the resulting
>> image contains pixel with different xy dimensions. There is the problem
>> I think:
>>
>> >summary(mais.dens )
>>       real-valued pixel image
>>       500 x 500 pixel array (ny, nx)
>>       enclosing rectangle: [158814.835784285, 242204.064319242] x
>> [85205.9013486226, 142933.765576564]     units
>> /*dimensions of each pixel: 167 x 115 units */
>>
>> And somehow function im2asc do not allow for converting such image. But
>> I cannot find how to change settings of density.ppp to get an image with
>> same XY array. Guess it should be possible but...
>>
>> Yes I saw that adehabitat was rearranged, and I'm using the latest
>> version if no error from my side.
>>
>> Here the idea was to get a map of the density of maize field as a
>> covariate to use in ENFA. This is the reason why I do not use the point
>> directly in ENFA. My point layer for ENFA is the localisation of shot
>> wild boar.
>>
>> Maybe as you suggest I could use other function to get the same result.
>>
>> Thanks again for your help and further advices,
>>
>> Kevin
>>
>>
>>
>> Le 23/01/2012 14:49, Mathieu Basille a ?crit :
>>> Dear Kevin,
>>>
>>> I'm not sure how to solve your exact problem, since you don't provide
>>> a reproducible code, but here are a couple of comments:
>>>
>>> 1) You shouldn't use the old 'adehabitat' any more. This package has
>>> been split in four new ones, namely, adehabitatMA for map management,
>>> adehabitatLT for trajectories, adehabitatHR for home-range analyses,
>>> and adehabitatHS for habitat selection analyses. You can simply
>>> install them all by
>>>
>>> install.packages("adehabitatHS")
>>>
>>> The main benefit of it is that adehabitat does not use its own map
>>> classes any more, but use sp classes instead. This might well correct
>>> the conversion problem, which would thus be from spatstat to sp now.
>>>
>>> 2) You could also use kernelUD from adehabitatHR directly. The output
>>> would most certainly be suited for other analyses using adehabitatXY.
>>>
>>> 3) I'm not sure I understand why you first derive a density for an
>>> ENFA analysis. Why don't you use directly the centroid coordinates as
>>> points in the ENFA?
>>>
>>> Hope this helps,
>>> Mathieu.
>>>
>>>
>>> Le 23/01/2012 04:11, K?vin Morelle a ?crit :
>>>> Dear list members,
>>>>
>>>> I'm facing the following error when I want to convert an image object
>>>> (obtained from the density function of the SpatStat package) into a 
>>>> asc
>>>> object using the im2asc function of adehabitat:
>>>>
>>>> mais.asc<- im2asc(mais.dens)
>>>> Erreur dans im2asc(mais.dens) :
>>>> the grid cellsize should be identical for both X and Y directions.
>>>>
>>>> I previously delimited my study area by a polygon, could it be the
>>>> external
>>>> grid cells (cut by that polygon) that would give this error (because
>>>> leading to non-square cells...)?
>>>> Below, my code more detailed.
>>>>
>>>> Thanks for any help,
>>>> Regards,
>>>>
>>>> Kevin
>>>>
>>>> # Maize fied for the whole region
>>>> -------------------------------------------
>>>> mais<- readShapePoly("D:/Carto/Landscape/Mais_2009.shp")
>>>>
>>>> # Limiting to my study area (W.sp)
>>>> -----------------------------------------------
>>>> mais.ze<- crop (mais,W.sp)
>>>>
>>>> # Deriving density of maize field throught the density function
>>>> ------------------------------------------------------------------------------------ 
>>>>
>>>>
>>>>
>>>> #1. find centroid of maize field
>>>>
>>>> mais.ps<- SpatialPolygons2PolySet(mais.ze)
>>>> mais.centroids<- calcCentroid(mais.ps, rollup=1)
>>>> mais.df<- as.data.frame(mais.centroids)
>>>>
>>>> #2. convert to point pattern class+apply density function
>>>>
>>>> mais.ppp<- ppp (mais.df$X, mais.df$Y, window = W2)
>>>> mais.dens<- density(mais.ppp, sigma=1000)
>>>>
>>>> #3. convert mais.dens to asc for ENFA anaysis (in adehabitat)
>>>>
>>>> mais.asc<- as.asc(mais.mx)
>>>> =>Erreur dans im2asc(mais.dens) :
>>>> the grid cellsize should be identical for both X and Y directions.
>>>>
>>>
>>
>>
>>
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


-- 
Morelle Kevin
Universit? de Li?ge - Gembloux Agro-Bio Tech
Unit? de Gestion des Ressources foresti?res et des Milieux naturels
--------
University of Li?ge - Gembloux Agro-Bio Tech
Unit of Forest and Nature Management
--------
2, Passage des D?port?s
B-5030  GEMBLOUX
BELGIQUE

T?l : + 32 (0)81 62.22.14
Fax : + 32 (0)81 62.23.01
E-mail : kevin.morelle at ulg.ac.be
Web : http://www.fsagx.ac.be/gf/


From basille at ase-research.org  Mon Jan 23 17:54:41 2012
From: basille at ase-research.org (Mathieu Basille)
Date: Mon, 23 Jan 2012 11:54:41 -0500
Subject: [R-sig-Geo] Converting image to asc
In-Reply-To: <4F1D8A34.3040807@ulg.ac.be>
References: <4F1D244D.6030809@ulg.ac.be> <4F1D6558.1060701@ase-research.org>
	<4F1D71DD.8050807@ulg.ac.be> <4F1D7373.5060305@ase-research.org>
	<4F1D8A34.3040807@ulg.ac.be>
Message-ID: <4F1D90D1.30005@ase-research.org>

Don't worry, it is *not* trivial!

Le 23/01/2012 11:26, K?vin Morelle a ?crit :
> yes I also find it strange that it is not squares pixel but maybe we're
> missing something...if M. Baddeley is reading this mail, maybe he can help
> Anyway, althought new version of adehabitat uses sp classes, to run enfa,
> one still needs to have asc object, isn't it?

That's where you're wrong. adehabitatHS (and all other adehabitatXY 
packages) totally switched to sp classes when it comes to points, polygons 
and rasters. The only 'native' class of the new adehabitatXY is 'ltraj' in 
adehabitatLT.

Check ?adehabitatHS::enfa, and follow the example. You'll see that 'map' is 
of class:

 > data(lynxjura)
 > map <- lynxjura$map
 > class(map)
[1] "SpatialPixelsDataFrame"
attr(,"package")
[1] "sp"

> If I'm not wrong in that, I found another way to convert my image of
> SpatStat to an asc object, converting first the pixel image to a matrix
> then converting it to asc:
>
> maize.mx <- as.matrix(maize.dens)
> maize.asc <- as.asc(maize.mx)
>
> But then, somehow doing this, my covariate and my point layer do not have
> the same extent anymore, like if passing by a matrix, it recalculates new
> xy ranges...Using data2enfa function on this point and covariate layer then
> doesn't give anything.

I guess it has to do with how asc rasters were build, with the matrix being 
tilted. But, really, there is no point trying to use asc rasters any more.

Mathieu.

> Sorry if all this appears to you a bit trivial,
> thanks for any help,
>
> kevin
>
> Le 23/01/2012 15:49, Mathieu Basille a ?crit :
>> Dear Kevin,
>>
>> I'm really not familiar with spatstat, so that I can't really help on
>> density.ppp. It's odd, however, that pixels are not squares by default...
>> Here, I can only advice to use adehabitatHR::kernelUD to estimate point
>> density as a workaround (and it would probably be easier to integrate
>> with other adehabitat analyses).
>>
>> On the adehabitat side, there is no such thing as im2asc in the latest
>> versions, since adehabitatMA (and related adehabitatXY packages) use sp
>> classes, and not asc any more. Thus, I think you're still using some old
>> code with a wrong call to adehabitat::im2asc (previous adehabitat
>> version). A complete switch to adehabitatMA/adehabitatHS should correct
>> this.
>>
>> I understand now your idea with density as a covariate, not as the point
>> pattern you want to analyse.
>>
>> Best,
>> Mathieu.
>>
>>
>> Le 23/01/2012 09:42, K?vin Morelle a ?crit :
>>> Thanks for your reply Mathieu,
>>>
>>> Well I went a bit further in trying to resolve the problem and found out
>>> that when applying this density.ppp function of SpatStat the resulting
>>> image contains pixel with different xy dimensions. There is the problem
>>> I think:
>>>
>>> >summary(mais.dens )
>>> real-valued pixel image
>>> 500 x 500 pixel array (ny, nx)
>>> enclosing rectangle: [158814.835784285, 242204.064319242] x
>>> [85205.9013486226, 142933.765576564] units
>>> /*dimensions of each pixel: 167 x 115 units */
>>>
>>> And somehow function im2asc do not allow for converting such image. But
>>> I cannot find how to change settings of density.ppp to get an image with
>>> same XY array. Guess it should be possible but...
>>>
>>> Yes I saw that adehabitat was rearranged, and I'm using the latest
>>> version if no error from my side.
>>>
>>> Here the idea was to get a map of the density of maize field as a
>>> covariate to use in ENFA. This is the reason why I do not use the point
>>> directly in ENFA. My point layer for ENFA is the localisation of shot
>>> wild boar.
>>>
>>> Maybe as you suggest I could use other function to get the same result.
>>>
>>> Thanks again for your help and further advices,
>>>
>>> Kevin
>>>
>>>
>>>
>>> Le 23/01/2012 14:49, Mathieu Basille a ?crit :
>>>> Dear Kevin,
>>>>
>>>> I'm not sure how to solve your exact problem, since you don't provide
>>>> a reproducible code, but here are a couple of comments:
>>>>
>>>> 1) You shouldn't use the old 'adehabitat' any more. This package has
>>>> been split in four new ones, namely, adehabitatMA for map management,
>>>> adehabitatLT for trajectories, adehabitatHR for home-range analyses,
>>>> and adehabitatHS for habitat selection analyses. You can simply
>>>> install them all by
>>>>
>>>> install.packages("adehabitatHS")
>>>>
>>>> The main benefit of it is that adehabitat does not use its own map
>>>> classes any more, but use sp classes instead. This might well correct
>>>> the conversion problem, which would thus be from spatstat to sp now.
>>>>
>>>> 2) You could also use kernelUD from adehabitatHR directly. The output
>>>> would most certainly be suited for other analyses using adehabitatXY.
>>>>
>>>> 3) I'm not sure I understand why you first derive a density for an
>>>> ENFA analysis. Why don't you use directly the centroid coordinates as
>>>> points in the ENFA?
>>>>
>>>> Hope this helps,
>>>> Mathieu.
>>>>
>>>>
>>>> Le 23/01/2012 04:11, K?vin Morelle a ?crit :
>>>>> Dear list members,
>>>>>
>>>>> I'm facing the following error when I want to convert an image object
>>>>> (obtained from the density function of the SpatStat package) into a asc
>>>>> object using the im2asc function of adehabitat:
>>>>>
>>>>> mais.asc<- im2asc(mais.dens)
>>>>> Erreur dans im2asc(mais.dens) :
>>>>> the grid cellsize should be identical for both X and Y directions.
>>>>>
>>>>> I previously delimited my study area by a polygon, could it be the
>>>>> external
>>>>> grid cells (cut by that polygon) that would give this error (because
>>>>> leading to non-square cells...)?
>>>>> Below, my code more detailed.
>>>>>
>>>>> Thanks for any help,
>>>>> Regards,
>>>>>
>>>>> Kevin
>>>>>
>>>>> # Maize fied for the whole region
>>>>> -------------------------------------------
>>>>> mais<- readShapePoly("D:/Carto/Landscape/Mais_2009.shp")
>>>>>
>>>>> # Limiting to my study area (W.sp)
>>>>> -----------------------------------------------
>>>>> mais.ze<- crop (mais,W.sp)
>>>>>
>>>>> # Deriving density of maize field throught the density function
>>>>> ------------------------------------------------------------------------------------
>>>>>
>>>>>
>>>>>
>>>>> #1. find centroid of maize field
>>>>>
>>>>> mais.ps<- SpatialPolygons2PolySet(mais.ze)
>>>>> mais.centroids<- calcCentroid(mais.ps, rollup=1)
>>>>> mais.df<- as.data.frame(mais.centroids)
>>>>>
>>>>> #2. convert to point pattern class+apply density function
>>>>>
>>>>> mais.ppp<- ppp (mais.df$X, mais.df$Y, window = W2)
>>>>> mais.dens<- density(mais.ppp, sigma=1000)
>>>>>
>>>>> #3. convert mais.dens to asc for ENFA anaysis (in adehabitat)
>>>>>
>>>>> mais.asc<- as.asc(mais.mx)
>>>>> =>Erreur dans im2asc(mais.dens) :
>>>>> the grid cellsize should be identical for both X and Y directions.
>>>>>
>>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>
>

-- 

~$ whoami
Mathieu Basille, Post-Doc

~$ locate
Laboratoire d'?cologie Comportementale et de Conservation de la Faune
+ Centre d'?tude de la For?t
D?partement de Biologie
Universit? Laval, Qu?bec

~$ info
http://ase-research.org/basille

~$ fortune
``If you can't win by reason, go for volume.''
Calvin, by Bill Watterson.


From r.hijmans at gmail.com  Mon Jan 23 18:50:16 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Mon, 23 Jan 2012 09:50:16 -0800
Subject: [R-sig-Geo] connection error when calling maxent()
In-Reply-To: <692F9D18-423C-420A-A593-EC8A55ABDC1B@wsl.ch>
References: <1325695956381-7151125.post@n2.nabble.com>
	<CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>
	<92781526-59B3-47C2-8A5B-EB835FC5A628@wsl.ch>
	<CANtt_hwiWzYZrt04sFduFzN2gT-Z++vGjxd+UjKBVke2Hdgxbw@mail.gmail.com>
	<692F9D18-423C-420A-A593-EC8A55ABDC1B@wsl.ch>
Message-ID: <CANtt_hzCTeTP1RadREKGTf+N113Keng-UQ_JY1WPRWR7BJ0Qzg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120123/0c5a40d3/attachment.pl>

From rafael.wueest at wsl.ch  Mon Jan 23 19:06:15 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Mon, 23 Jan 2012 19:06:15 +0100
Subject: [R-sig-Geo] connection error when calling maxent()
In-Reply-To: <CANtt_hzCTeTP1RadREKGTf+N113Keng-UQ_JY1WPRWR7BJ0Qzg@mail.gmail.com>
References: <1325695956381-7151125.post@n2.nabble.com>
	<CANtt_hx+YPOxyMhRrFoSut+NDSYXLXRRuNfrBSy7fJwjcN+Nvg@mail.gmail.com>
	<92781526-59B3-47C2-8A5B-EB835FC5A628@wsl.ch>
	<CANtt_hwiWzYZrt04sFduFzN2gT-Z++vGjxd+UjKBVke2Hdgxbw@mail.gmail.com>
	<692F9D18-423C-420A-A593-EC8A55ABDC1B@wsl.ch>
	<CANtt_hzCTeTP1RadREKGTf+N113Keng-UQ_JY1WPRWR7BJ0Qzg@mail.gmail.com>
Message-ID: <395707CA-A551-473D-8633-7637124F7397@wsl.ch>

Robert,

yes, I realized that all information is in the maxent files.

Making the function more cluster-safe would be very much appreciated!

Thanks for your efforts.

Rafael


On 23.01.2012, at 18:50, Robert J. Hijmans wrote:

> Rafael, 
> 
> > Is there a possibility to specify the path where the predict function is looking for the maxent-specific files (couldn't find anything in the web, this list)? Or, in my user-view even
> > better, pass the path on to the generated md object. Anyway, this would allow me to further use such a model object of the class MaxEnt.
> 
> predict does not look for any files, the "MaxEnt" object has all the info it needs. However, needs to _write_  a file to disk that is used by the MaxEnt Java program. The error occurs when writing, apparently because the folder does not exist "No such file or directory" (or cannot be created; or perhaps because you are using a cluster (right?) and multiple nodes are trying to save the same file?). I will look at this and make some changes that may make this more (cluster-)safe. 
> 
> Robert
> 
> 
> On Sat, Jan 21, 2012 at 9:08 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> Dear Robert,
> 
> I have a question related to the workaround I so far used (specifying the path argument in  dismo::maxent).
> 
> I fit a model:
> 
> md<-maxent(...,path='my/wanted/path')
> 
> Then save it:
> 
> save(md,file='another/path/maxent_md')
> 
> I wanted to save it because I need it for further analyses.
> 
> Now, in a totally independent R session, I load the model file:
> 
> load('another/path/maxent_md')
> 
> When I now try to predict:
> 
> predict(md,myrasterstack)
> 
> , I am getting the following error:
> 
> Error in  file(file, ifelse(append, "a", "w")) :
>  can't open connection
> In addition : Warning:
> In file(file, ifelse(append, "a", "w")) :
>  can't open file '/var/folders/ft/fthJYD+6GkCvmcCArZBaQU++waU/-Tmp-/R_raster_tmp/maxent/lambdas.csv': No such file or directory
> 
> It seems like, even though I specified the path argument when generating md, it is not passed on to md but only the maxent output gets written to the specified path.
> 
> Is there a possibility to specify the path where the predict function is looking for the maxent-specific files (couldn't find anything in the web, this list)? Or, in my user-view even better, pass the path on to the generated md object. Anyway, this would allow me to further use such a model object of the class MaxEnt.
> 
> Rafael
> 
> 
> 
> On 15.01.2012, at 03:12, Robert J. Hijmans wrote:
> 
> > Rafael,
> >
> > The issue here would be the version of raster, not R (as long as it is >= 2.11.0); but I agree that you have found a good solution.  And the error is a rather different one that you originally reported:
> >
> > > Error: No features available: select more feature types or deselect auto features
> >
> > Unless you did not copy this line when you first reported the problem...
> >
> > That error comes from MaxEnt, and clearly states that there is something wrong with the feature selection. I do not know why. Perhaps because of one of the MaxEnt options you use, perhaps in combination with only a few point records? That is a subject more suitable for the MaxEnt discussion forum.
> >
> > Because MaxEnt fails to run, further errors occur, but the trouble starts with the line above. So it seems that your method works, except for MaxEnt run 46
> >
> > Robert
> >
> >
> > On Sat, Jan 14, 2012 at 3:51 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> > Dear Robert,
> >
> > Unfortunately, the problem is not completely solved for me yet. I am trying to run maxent() on a cluster, because I'm modeling >200 species, using 8 different parameterizations and 4 modeling algorithms (maxent is one of them), which results in >6000 models. The cluster is running R 2.12.2 and I can't update it on my own.
> >
> > As a workaround, I tried to specify the path option in the maxent() function because I suspected some process might interfere with the temporary Raster directory. This seemed to run for quite some time, but after maxent being called for the 46th on one of the cluster's CPU, it crashed with the same error
> >
> > > Error: No features available: select more feature types or deselect auto features
> > > Error in file(con, "r") : cannot open the connection
> > > Calls: run4models ... maxent -> maxent -> .local -> unlist -> readLines -> file
> > > In addition: Warning message:
> > > In file(con, "r") :
> > >   cannot open file '/.../me_output/xval/species.lambdas': No such file or directory
> > > Execution halted
> >
> > Do you have any idea how I could still make maxent() functional using R 2.12.2?
> >
> > Rafael
> >
> >
> > On 12.01.2012, at 01:33, Robert J. Hijmans wrote:
> >
> > > Rafael,
> > >
> > > Please send more info about what you are doing. It appears that the MaxEnt output file gets overwritten by another process. Can you also send your sessionInfo() (after first updating R to a more recent version)?
> > >
> > > Robert
> > >
> > >
> > > On Wed, Jan 4, 2012 at 8:52 AM, rafael.wueest <rafael.wueest at wsl.ch> wrote:
> > > Hi Folks
> > >
> > > when I am trying to call the maxent() function within a function I created,
> > > I am getting the following error:
> > >
> > > Error in file(con, "r") : cannot open the connection
> > > In addition: Warning message:
> > > In file(con, "r") :
> > >  cannot open file
> > > '/var/folders/ft/fthJYD+6GkCvmcCArZBaQU++waU/-Tmp-/R_raster_tmp/maxent/10943312360/species.lambdas':
> > > No such file or directory
> > >
> > > I am here also pasting some output of
> > > >traceback()
> > > 7: file(con, "r")
> > > 6: readLines(paste(dirout, "/species.lambdas", sep = ""))
> > > 5: unlist(readLines(paste(dirout, "/species.lambdas", sep = "")))
> > > 4: .local(x, p, ...)
> > > 3: maxent(background, occ, args = me.args) at run4models_restios.r#558
> > > ...
> > >
> > > I am using JGR on a Mac and downloaded the newest dismo (CRAN sources) and
> > > maxent version (see below).
> > >
> > > Can anyone help me? I am happy to provide more detailed information...
> > >
> > > Rafa
> > >
> > > >maxent()
> > > This is MaxEnt version 3.3.3k
> > >
> > > >sessionInfo()
> > > R version 2.12.2 (2011-02-25)
> > > Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> > >
> > > locale:
> > > [1] C
> > >
> > > attached base packages:
> > > [1] splines   stats     graphics  grDevices utils     datasets  methods
> > > [8] base
> > >
> > > other attached packages:
> > >  [1] gbm_1.6-3.1           survival_2.36-5       gam_1.04.1
> > >  [4] PresenceAbsence_1.1.5 maptools_0.8-10       lattice_0.19-33
> > >  [7] foreign_0.8-42        rgdal_0.6-33          dismo_0.7-14
> > > [10] raster_1.9-13         sp_0.9-84             JGR_1.7-7
> > > [13] iplots_1.1-4          JavaGD_0.5-4          rJava_0.9-1
> > >
> > > loaded via a namespace (and not attached):
> > > [1] grid_2.12.2  tools_2.12.2
> > > Warning message:
> > > 'DESCRIPTION' file has 'Encoding' field and re-encoding is not possible
> > >
> > >
> > > --
> > > View this message in context: http://r-sig-geo.2731867.n2.nabble.com/connection-error-when-calling-maxent-tp7151125p7151125.html
> > > Sent from the R-sig-geo mailing list archive at Nabble.com.
> > >
> > > _______________________________________________
> > > R-sig-Geo mailing list
> > > R-sig-Geo at r-project.org
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> > >
> >
> >
> >
> > --
> > Rafael W?est
> > Swiss Federal Research Institute WSL
> > Z?rcherstrasse 111
> > 8903 Birmensdorf
> > Switzerland
> >
> > +41 44 7392126
> > rafael.wueest at wsl.ch
> > http://www.wsl.ch/info/mitarbeitende/wueest
> >
> >
> >
> >
> 
> 
> 
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
> 
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest
> 
> 
> 
> 



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From gpezzuchi at yahoo.com.ar  Mon Jan 23 20:43:03 2012
From: gpezzuchi at yahoo.com.ar (Gaston Pezzuchi)
Date: Mon, 23 Jan 2012 11:43:03 -0800 (PST)
Subject: [R-sig-Geo] Lenght of Common border
In-Reply-To: <mailman.5267.1327346445.4521.r-sig-geo@r-project.org>
References: <mailman.5267.1327346445.4521.r-sig-geo@r-project.org>
Message-ID: <1327347783.54939.YahooMailNeo@web113207.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120123/6e8a7073/attachment.pl>

From r.turner at auckland.ac.nz  Mon Jan 23 22:31:08 2012
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Tue, 24 Jan 2012 10:31:08 +1300
Subject: [R-sig-Geo] Converting image to asc
In-Reply-To: <4F1D8A34.3040807@ulg.ac.be>
References: <4F1D244D.6030809@ulg.ac.be>
	<4F1D6558.1060701@ase-research.org>	<4F1D71DD.8050807@ulg.ac.be>
	<4F1D7373.5060305@ase-research.org> <4F1D8A34.3040807@ulg.ac.be>
Message-ID: <4F1DD19C.2030700@auckland.ac.nz>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120124/90160c02/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Tue Jan 24 10:52:08 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Tue, 24 Jan 2012 10:52:08 +0100
Subject: [R-sig-Geo] Antw:  problem with ndvi
In-Reply-To: <4F1695C2.5030602@gmail.com>
References: <4F1695C2.5030602@gmail.com>
Message-ID: <4F1E8D5802000027000123FC@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120124/411c10ce/attachment.pl>

From babuawara at gmail.com  Tue Jan 24 11:18:19 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Tue, 24 Jan 2012 11:18:19 +0100
Subject: [R-sig-Geo] Antw:  problem with ndvi
In-Reply-To: <4F1E8D5802000027000123FC@gwia2.boku.ac.at>
References: <4F1695C2.5030602@gmail.com>
	<4F1E8D5802000027000123FC@gwia2.boku.ac.at>
Message-ID: <4F1E856B.9030800@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120124/57130583/attachment.pl>

From sjmyers3142 at gmail.com  Tue Jan 24 22:14:29 2012
From: sjmyers3142 at gmail.com (Seth Myers)
Date: Tue, 24 Jan 2012 16:14:29 -0500
Subject: [R-sig-Geo] determine class breaks for a spatial object that vary
 by size that may influence presence/absence
Message-ID: <CAO-WCxfCPgRT1Jgb+gSicMujxtOgFXYVPTqB0mmJNG56QJbg+g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120124/47da2ba8/attachment.pl>

From etiennebr at gmail.com  Tue Jan 24 22:47:38 2012
From: etiennebr at gmail.com (Etienne B. Racine)
Date: Tue, 24 Jan 2012 16:47:38 -0500
Subject: [R-sig-Geo] Add title to rastervis levelplot
Message-ID: <CALjAYt5LQvJxJtN6sushuBYc7FbUj0eDWgUiLba0wrW7bHjv-w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120124/5373faf1/attachment.pl>

From santiago.begueria at csic.es  Wed Jan 25 00:37:33 2012
From: santiago.begueria at csic.es (=?iso-8859-1?Q?Santiago_Beguer=EDa_Portugu=E9s?=)
Date: Wed, 25 Jan 2012 00:37:33 +0100
Subject: [R-sig-Geo] rgdal - problem with reading grib files
Message-ID: <59FE56F4-F07E-4935-A666-E8334691E6BC@csic.es>

Hi,

I am stuck when trying to read data from certain grib files with GDAL. When I try to read the data I get the following error:

> tmp <- readGDAL('./data/ghcn_cams/ghcn_cams_1948_cur.grb')
...
Error in `proj4string<-`(`*tmp*`, value = <S4 object of class "CRS">) : 
  Geographical CRS given to non-conformant data

I read on this mail list that this might be caused by data being outside the valid range for the CRS. And so it seems:

> GDALinfo('./data/ghcn_cams/ghcn_cams_1948_cur.grb')
rows        360 
columns     720 
bands       768 
origin.x        0.25 
origin.y        -90.25 
res.x       0.5 
res.y       0.5 
ysign       -1 
oblique.x   0 
oblique.y   0 
driver      GRIB 
projection  +proj=longlat +a=6371200 +b=6371200 +no_defs 
file        ./data/ghcn_cams/ghcn_cams_1948_cur.grb 

Since the origin.y coordinate is -90.25. However, according to the metadata provided in an accompanying file the lowest y coordinate should be -89.75:

dset ^ghcn_cams_1948_cur.grb
index ^ghcn_cams_1948_cur.grb.idx
undef 9.999E+20
title ghcn_cams_1948_cur.grb
*  produced by grib2ctl v0.9.12.5p39a
dtype grib 255
options yrev
ydef 360 linear -89.750000 0.5
xdef 720 linear 0.250000 0.500000
tdef 768 linear jan1948 1mo
zdef 1 linear 1 1
vars 1
TMP2m  0 11,105,2 ** 2 m above ground Temp. [K]
ENDVARS

I need to find a workaround to solve this problem, but I'm new to grib files (mostly used netCDF before) and I don't know how to proceed. Would appreciate any help.

Thank you in advance,


	Santiago Beguer?a

From bart at njn.nl  Wed Jan 25 10:01:53 2012
From: bart at njn.nl (bart)
Date: Wed, 25 Jan 2012 10:01:53 +0100
Subject: [R-sig-Geo] rgdal - problem with reading grib files
In-Reply-To: <4F1FC4A9.5030808@uni-konstanz.de>
References: <59FE56F4-F07E-4935-A666-E8334691E6BC@csic.es>
	<4F1FC4A9.5030808@uni-konstanz.de>
Message-ID: <4F1FC501.1000903@njn.nl>

  Hi

  This seems to relate to the cell center cell corner error that has been
  recently fixed in libgdal ( see release notes of libgdal 1.9 ). Did you
  update to the most recent version of libgdal?

  Bart
>
> On 01/25/2012 12:37 AM, Santiago Beguer?a Portugu?s wrote:
>> Hi,
>>
>> I am stuck when trying to read data from certain grib files with GDAL.
>> When I try to read the data I get the following error:
>>
>>> tmp<- readGDAL('./data/ghcn_cams/ghcn_cams_1948_cur.grb')
>> ...
>> Error in `proj4string<-`(`*tmp*`, value =<S4 object of class "CRS">) :
>> Geographical CRS given to non-conformant data
>>
>> I read on this mail list that this might be caused by data being
>> outside the valid range for the CRS. And so it seems:
>>
>>> GDALinfo('./data/ghcn_cams/ghcn_cams_1948_cur.grb')
>> rows 360
>> columns 720
>> bands 768
>> origin.x 0.25
>> origin.y -90.25
>> res.x 0.5
>> res.y 0.5
>> ysign -1
>> oblique.x 0
>> oblique.y 0
>> driver GRIB
>> projection +proj=longlat +a=6371200 +b=6371200 +no_defs
>> file ./data/ghcn_cams/ghcn_cams_1948_cur.grb
>>
>> Since the origin.y coordinate is -90.25. However, according to the
>> metadata provided in an accompanying file the lowest y coordinate
>> should be -89.75:
>>
>> dset ^ghcn_cams_1948_cur.grb
>> index ^ghcn_cams_1948_cur.grb.idx
>> undef 9.999E+20
>> title ghcn_cams_1948_cur.grb
>> * produced by grib2ctl v0.9.12.5p39a
>> dtype grib 255
>> options yrev
>> ydef 360 linear -89.750000 0.5
>> xdef 720 linear 0.250000 0.500000
>> tdef 768 linear jan1948 1mo
>> zdef 1 linear 1 1
>> vars 1
>> TMP2m 0 11,105,2 ** 2 m above ground Temp. [K]
>> ENDVARS
>>
>> I need to find a workaround to solve this problem, but I'm new to grib
>> files (mostly used netCDF before) and I don't know how to proceed.
>> Would appreciate any help.
>>
>> Thank you in advance,
>>
>>
>> Santiago Beguer?a
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From mathieu.rajerison at gmail.com  Wed Jan 25 11:45:36 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Wed, 25 Jan 2012 11:45:36 +0100
Subject: [R-sig-Geo] Lenght of Common border
In-Reply-To: <1327347783.54939.YahooMailNeo@web113207.mail.gq1.yahoo.com>
References: <mailman.5267.1327346445.4521.r-sig-geo@r-project.org>
	<1327347783.54939.YahooMailNeo@web113207.mail.gq1.yahoo.com>
Message-ID: <CAGfc75k05XkWAW8gTKhULtcQ3FEsV+EsZRDr6F6ekWWDenp4Lg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120125/e53585d3/attachment.pl>

From r.m.krug at gmail.com  Wed Jan 25 12:10:28 2012
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Wed, 25 Jan 2012 12:10:28 +0100
Subject: [R-sig-Geo] Selecting n cells more then minDist apart
Message-ID: <4F1FE324.50505@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi

I need to select n cells on a raster map with no cell closer then
minDist from any other selected cell. The distances can be larger - no
problem - but they must not be smaller then minDist.

I looked at r.random.cell with using distance= as the min distance,
but if I select randomly n cells from the set generated, I get cells
with a multiple of minDist apart - not exactly what I am looking for.

I could use r.random and iterate until my requirements are met, but
that strikes me as extremely inefficient. Are thare any other ways of
achieving this?

As I am doing the calculations from R, I could also easily use R directly.

Any pointers are welcome,

Rainer

- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk8f4yQACgkQoYgNqgF2egrvMwCdEhDN8LR/Eu/wXrsqxcWdJNsE
BtIAnjgOvI/eBMKW74NEWkrWYYgDoEJJ
=MQFz
-----END PGP SIGNATURE-----


From r.m.krug at gmail.com  Wed Jan 25 12:10:32 2012
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Wed, 25 Jan 2012 12:10:32 +0100
Subject: [R-sig-Geo] Selecting n cells more then minDist apart
Message-ID: <4F1FE328.7030400@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi

I need to select n cells on a raster map with no cell closer then
minDist from any other selected cell. The distances can be larger - no
problem - but they must not be smaller then minDist.

I looked at r.random.cell in GRASS with using distance= as the min
distance, but if I select randomly n cells from the set generated, I
get cells with a multiple of minDist apart - not exactly what I am
looking for.

I could use r.random and iterate until my requirements are met, but
that strikes me as extremely inefficient.

As I would be calling GRASS from R, I could also easily use R directly.

Is there any way of doing this easily in R?

Cheers,

Rainer

- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk8f4ygACgkQoYgNqgF2ego/JACfb/FL5Cyqjm9/Dju0cyi+XRpj
1TgAn2oojKKE5xHGNSluhfdxnal27bad
=L9s4
-----END PGP SIGNATURE-----


From oscar.perpinan at upm.es  Wed Jan 25 13:32:31 2012
From: oscar.perpinan at upm.es (Oscar =?UTF-8?B?UGVycGnDsWFu?= Lamigueiro)
Date: Wed, 25 Jan 2012 13:32:31 +0100
Subject: [R-sig-Geo] Add title to rastervis levelplot
In-Reply-To: <CALjAYt5LQvJxJtN6sushuBYc7FbUj0eDWgUiLba0wrW7bHjv-w@mail.gmail.com>
References: <CALjAYt5LQvJxJtN6sushuBYc7FbUj0eDWgUiLba0wrW7bHjv-w@mail.gmail.com>
Message-ID: <20120125133231.56b619c7@OPL-EUITI>

Hello,

You have found a bug. Although "main" is an explicit argument for
levelplot, it is not being used inside the method. I will fix it and
update the version at R-Forge today. 

For annotations inside the plot you can use the combination of layer
(from latticeExtra) and panel.text functions:

library(raster)
library(rasterVis)
library(latticeExtra)

r <- raster(volcano)
levelplot(r) + layer(panel.text(0.9, 0.9, 'Volcano'))

Thanks for the info.

Best,

Oscar.


-------------------
Oscar Perpi??n Lamigueiro
Dpto. Ingenier?a El?ctrica
EUITI-UPM

http://procomun.wordpress.com

-----------------------------------------
>Hi list,
>
>I'd like to add a title to a level plot from rasterVis package but I
>couldn't find how. There are no examples of this on the rastervis page.
>I'm not very familiar with lattice kung fu, but I've tried :
>
>library(raster)
>library(rasterVis)
>r <- raster(volcano)
>levelplot(r, margin = FALSE, main = "The Great Volcano")
># or
>levelplot(r, margin = FALSE, main = list("The Great Volcano"))
>
>Any other way of adding an anotation to that plot would be welcome as
>well.
>
>Thanks,
>Etienne
>
>	[[alternative HTML version deleted]]


From alltheweb2cc+rsiggeo at gmail.com  Wed Jan 25 13:55:15 2012
From: alltheweb2cc+rsiggeo at gmail.com (Ricc)
Date: Wed, 25 Jan 2012 04:55:15 -0800 (PST)
Subject: [R-sig-Geo] degAxis() does not print degree symbol
In-Reply-To: <4CB2A561.1070704@uni-muenster.de>
References: <268293.51767.qm@web59714.mail.ac4.yahoo.com>
	<4CB2A561.1070704@uni-muenster.de>
Message-ID: <1327496115679-7223684.post@n2.nabble.com>

Hello,

Sorry to dig up this thread, but I am currently facing the same issue, ie I
do not get the degree symbol on the plot but rather get a gamma symbol.
- Do someone found a solution ?
- Has it something to do with the encoding set up of my system ?
Thanks !

My script:
library(rgdal)
my_lines <- readOGR(".","ShapefileName")
plot(my_lines, axes=TRUE) 

>sessionInfo()
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base  
other attached packages:
[1] rgdal_0.7-8  sp_0.9-93    rkward_0.5.6
loaded via a namespace (and not attached):
[1] grid_2.14.1    lattice_0.20-0 tools_2.14.1 

-----
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223684.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From gpezzuchi at yahoo.com.ar  Wed Jan 25 14:25:04 2012
From: gpezzuchi at yahoo.com.ar (Gaston Pezzuchi)
Date: Wed, 25 Jan 2012 05:25:04 -0800 (PST)
Subject: [R-sig-Geo] Lenght of Common border
In-Reply-To: <CAGfc75k05XkWAW8gTKhULtcQ3FEsV+EsZRDr6F6ekWWDenp4Lg@mail.gmail.com>
References: <mailman.5267.1327346445.4521.r-sig-geo@r-project.org>
	<1327347783.54939.YahooMailNeo@web113207.mail.gq1.yahoo.com>
	<CAGfc75k05XkWAW8gTKhULtcQ3FEsV+EsZRDr6F6ekWWDenp4Lg@mail.gmail.com>
Message-ID: <1327497904.53385.YahooMailNeo@web113208.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120125/9b7d5aac/attachment.pl>

From oscar.perpinan at upm.es  Wed Jan 25 14:51:18 2012
From: oscar.perpinan at upm.es (Oscar =?UTF-8?B?UGVycGnDsWFu?= Lamigueiro)
Date: Wed, 25 Jan 2012 14:51:18 +0100
Subject: [R-sig-Geo] Add title to rastervis levelplot
In-Reply-To: <20120125133231.56b619c7@OPL-EUITI>
References: <CALjAYt5LQvJxJtN6sushuBYc7FbUj0eDWgUiLba0wrW7bHjv-w@mail.gmail.com>
	<20120125133231.56b619c7@OPL-EUITI>
Message-ID: <20120125145118.1e860222@OPL-EUITI>

I have just remembered two working alternatives to "main":

levelplot(r, sub='Volcano')
levelplot(r, xlab.top='Volcano')

Best,

Oscar.

>>Hi list,
>>
>>I'd like to add a title to a level plot from rasterVis package but I
>>couldn't find how. There are no examples of this on the rastervis
>>page. I'm not very familiar with lattice kung fu, but I've tried :
>>
>>library(raster)
>>library(rasterVis)
>>r <- raster(volcano)
>>levelplot(r, margin = FALSE, main = "The Great Volcano")
>># or
>>levelplot(r, margin = FALSE, main = list("The Great Volcano"))
>>
>>Any other way of adding an anotation to that plot would be welcome as
>>well.
>>
>>Thanks,
>>Etienne
>>
>>	[[alternative HTML version deleted]]


From edzer.pebesma at uni-muenster.de  Wed Jan 25 15:49:59 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 25 Jan 2012 15:49:59 +0100
Subject: [R-sig-Geo] degAxis() does not print degree symbol
In-Reply-To: <1327496115679-7223684.post@n2.nabble.com>
References: <268293.51767.qm@web59714.mail.ac4.yahoo.com>
	<4CB2A561.1070704@uni-muenster.de>
	<1327496115679-7223684.post@n2.nabble.com>
Message-ID: <4F201697.2040905@uni-muenster.de>



On 01/25/2012 01:55 PM, Ricc wrote:
> Hello,
> 
> Sorry to dig up this thread, but I am currently facing the same issue, ie I
> do not get the degree symbol on the plot but rather get a gamma symbol.
> - Do someone found a solution ?
> - Has it something to do with the encoding set up of my system ?

It might help if you would tell us what your encoding is, as well as
operating system & version. On my system, it works. The sessionInfo
there is:

> sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] rgdal_0.7-5 sp_0.9-94

loaded via a namespace (and not attached):
[1] grid_2.14.1    lattice_0.20-0



> Thanks !
> 
> My script:
> library(rgdal)
> my_lines <- readOGR(".","ShapefileName")
> plot(my_lines, axes=TRUE) 
> 
>> sessionInfo()
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base  
> other attached packages:
> [1] rgdal_0.7-8  sp_0.9-93    rkward_0.5.6
> loaded via a namespace (and not attached):
> [1] grid_2.14.1    lattice_0.20-0 tools_2.14.1 
> 
> -----
> R version 2.14.1 (2011-12-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223684.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From alltheweb2cc+rsiggeo at gmail.com  Wed Jan 25 15:54:05 2012
From: alltheweb2cc+rsiggeo at gmail.com (Ricc)
Date: Wed, 25 Jan 2012 06:54:05 -0800 (PST)
Subject: [R-sig-Geo] degAxis() does not print degree symbol
In-Reply-To: <4F201697.2040905@uni-muenster.de>
References: <268293.51767.qm@web59714.mail.ac4.yahoo.com>
	<4CB2A561.1070704@uni-muenster.de>
	<1327496115679-7223684.post@n2.nabble.com>
	<4F201697.2040905@uni-muenster.de>
Message-ID: <CAEhjRXp88bsHc-Q3g2EAQ59MGd9jm_82VzdCzFm3P9FeSHySww@mail.gmail.com>

I omitted the 'locale' part of the sessionInfo() but other infos were
given in my first message as well as in my signature.
Here is the 'locale' part:
locale:
 [1] LC_CTYPE=fr_FR.UTF-8          LC_NUMERIC=C
 [3] LC_TIME=fr_FR.UTF-8           LC_COLLATE=fr_FR.UTF-8
 [5] LC_MONETARY=fr_FR.UTF-8       LC_MESSAGES=fr_FR.UTF-8
 [7] LC_PAPER=fr_FR.UTF-8          LC_NAME=fr_FR.UTF-8
 [9] LC_ADDRESS=fr_FR.UTF-8        LC_TELEPHONE=fr_FR.UTF-8
[11] LC_MEASUREMENT=fr_FR.UTF-8    LC_IDENTIFICATION=fr_FR.UTF-8

2012/1/25 Edzer Pebesma-2 [via R-sig-geo]
<ml-node+s2731867n7223985h99 at n2.nabble.com>:
>
>
> On 01/25/2012 01:55 PM, Ricc wrote:
>> Hello,
>>
>> Sorry to dig up this thread, but I am currently facing the same issue, ie
>> I
>> do not get the degree symbol on the plot but rather get a gamma symbol.
>> - Do someone found a solution ?
>> - Has it something to do with the encoding set up of my system ?
>
> It might help if you would tell us what your encoding is, as well as
> operating system & version. On my system, it works. The sessionInfo
> there is:
>
>> sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> locale:
> ?[1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
> ?[3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8
> ?[5] LC_MONETARY=en_US.UTF-8 ? ?LC_MESSAGES=en_US.UTF-8
> ?[7] LC_PAPER=C ? ? ? ? ? ? ? ? LC_NAME=C
> ?[9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] rgdal_0.7-5 sp_0.9-94
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.1 ? ?lattice_0.20-0
>
>
>
>> Thanks !
>>
>> My script:
>> library(rgdal)
>> my_lines <- readOGR(".","ShapefileName")
>> plot(my_lines, axes=TRUE)
>>
>>> sessionInfo()
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>> other attached packages:
>> [1] rgdal_0.7-8 ?sp_0.9-93 ? ?rkward_0.5.6
>> loaded via a namespace (and not attached):
>> [1] grid_2.14.1 ? ?lattice_0.20-0 tools_2.14.1
>>
>> -----
>> R version 2.14.1 (2011-12-22)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> --
>> View this message in context:
>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223684.html
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> [hidden email]
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics? ? ? [hidden email]
>
> _______________________________________________
> R-sig-Geo mailing list
> [hidden email]
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> ________________________________
> If you reply to this email, your message will be added to the discussion
> below:
> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223985.html
> To unsubscribe from degAxis() does not print degree symbol, click here.
> NAML


-----
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223997.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From benweinstein2010 at gmail.com  Wed Jan 25 16:25:19 2012
From: benweinstein2010 at gmail.com (Ben Weinstein)
Date: Wed, 25 Jan 2012 10:25:19 -0500
Subject: [R-sig-Geo] Georeferencing in R
In-Reply-To: <CAC28k7R2s6zyCD=RAJnA05JK3zc=MZFsPY_ozO8BwWczKvx-fg@mail.gmail.com>
References: <CAC28k7R2s6zyCD=RAJnA05JK3zc=MZFsPY_ozO8BwWczKvx-fg@mail.gmail.com>
Message-ID: <CAC28k7SeTM76ykYUMa5zunosR3FyHSuiCaMxoZVL0Jpmw-o12w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120125/0602f2a5/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Wed Jan 25 17:17:21 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 25 Jan 2012 16:17:21 +0000
Subject: [R-sig-Geo] Georeferencing in R
In-Reply-To: <CAC28k7SeTM76ykYUMa5zunosR3FyHSuiCaMxoZVL0Jpmw-o12w@mail.gmail.com>
References: <CAC28k7R2s6zyCD=RAJnA05JK3zc=MZFsPY_ozO8BwWczKvx-fg@mail.gmail.com>
	<CAC28k7SeTM76ykYUMa5zunosR3FyHSuiCaMxoZVL0Jpmw-o12w@mail.gmail.com>
Message-ID: <CANVKczMkyZsiisyNpHA7+b=B6x77U5Muz3d61g0+AXZQfBumpA@mail.gmail.com>

On Wed, Jan 25, 2012 at 3:25 PM, Ben Weinstein
<benweinstein2010 at gmail.com> wrote:
> Hello all, posting a question for a friend.
>
> Has anyone had any experience georeferencing historical museum data using R
> packages? I'd also be interested in any up to date solutions outside of R,
> but it would be easily to integrate all analysis into one script.

 What sort of georeferencing do you mean? Imagery? Or getting coords
from text (placenames etc)?

 I'd use Quantum GIS for georeferencing imagery - the georeferencing
plugin there lets you load in an image, click points on the image and
either enter coordinates or click the corresponding point on a visible
map. Then click the 'go' button and it works out the transform to
overlay your image on the map correctly.

  For text referencing you might be able to use my "geonames" R
package to search location info from the www.geonames.org database.

Barry


From e.polaina at gmail.com  Wed Jan 25 17:23:57 2012
From: e.polaina at gmail.com (Ester Polaina Lacambra)
Date: Wed, 25 Jan 2012 17:23:57 +0100
Subject: [R-sig-Geo] Is it possible to "simplify" a vectorial file more or
	less efficiently?
Message-ID: <CAB3kvzNWT0U+7YoXp4_KZXObnYTa0=34J_FbOWJrRXSBF-Sr7A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120125/bd121692/attachment.pl>

From edzer.pebesma at uni-muenster.de  Wed Jan 25 17:32:47 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 25 Jan 2012 17:32:47 +0100
Subject: [R-sig-Geo] degAxis() does not print degree symbol
In-Reply-To: <CAEhjRXp88bsHc-Q3g2EAQ59MGd9jm_82VzdCzFm3P9FeSHySww@mail.gmail.com>
References: <268293.51767.qm@web59714.mail.ac4.yahoo.com>
	<4CB2A561.1070704@uni-muenster.de>
	<1327496115679-7223684.post@n2.nabble.com>
	<4F201697.2040905@uni-muenster.de>
	<CAEhjRXp88bsHc-Q3g2EAQ59MGd9jm_82VzdCzFm3P9FeSHySww@mail.gmail.com>
Message-ID: <4F202EAF.2070201@uni-muenster.de>

I think your question has little to do with sp, or with r-sig-geo. If
the command

plot(1); title(parse(text="52*degree*North"))

gives the same problem (no degree sign), I would advice searching, and
in case of no success posting to r-help, mentioning your locale.

On 01/25/2012 03:54 PM, Ricc wrote:
> I omitted the 'locale' part of the sessionInfo() but other infos were
> given in my first message as well as in my signature.
> Here is the 'locale' part:
> locale:
>  [1] LC_CTYPE=fr_FR.UTF-8          LC_NUMERIC=C
>  [3] LC_TIME=fr_FR.UTF-8           LC_COLLATE=fr_FR.UTF-8
>  [5] LC_MONETARY=fr_FR.UTF-8       LC_MESSAGES=fr_FR.UTF-8
>  [7] LC_PAPER=fr_FR.UTF-8          LC_NAME=fr_FR.UTF-8
>  [9] LC_ADDRESS=fr_FR.UTF-8        LC_TELEPHONE=fr_FR.UTF-8
> [11] LC_MEASUREMENT=fr_FR.UTF-8    LC_IDENTIFICATION=fr_FR.UTF-8
> 
> 2012/1/25 Edzer Pebesma-2 [via R-sig-geo]
> <ml-node+s2731867n7223985h99 at n2.nabble.com>:
>>
>>
>> On 01/25/2012 01:55 PM, Ricc wrote:
>>> Hello,
>>>
>>> Sorry to dig up this thread, but I am currently facing the same issue, ie
>>> I
>>> do not get the degree symbol on the plot but rather get a gamma symbol.
>>> - Do someone found a solution ?
>>> - Has it something to do with the encoding set up of my system ?
>>
>> It might help if you would tell us what your encoding is, as well as
>> operating system & version. On my system, it works. The sessionInfo
>> there is:
>>
>>> sessionInfo()
>> R version 2.14.1 (2011-12-22)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>>
>> locale:
>>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>  [7] LC_PAPER=C                 LC_NAME=C
>>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] rgdal_0.7-5 sp_0.9-94
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.14.1    lattice_0.20-0
>>
>>
>>
>>> Thanks !
>>>
>>> My script:
>>> library(rgdal)
>>> my_lines <- readOGR(".","ShapefileName")
>>> plot(my_lines, axes=TRUE)
>>>
>>>> sessionInfo()
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> other attached packages:
>>> [1] rgdal_0.7-8  sp_0.9-93    rkward_0.5.6
>>> loaded via a namespace (and not attached):
>>> [1] grid_2.14.1    lattice_0.20-0 tools_2.14.1
>>>
>>> -----
>>> R version 2.14.1 (2011-12-22)
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>> --
>>> View this message in context:
>>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223684.html
>>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> [hidden email]
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics      [hidden email]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> [hidden email]
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> ________________________________
>> If you reply to this email, your message will be added to the discussion
>> below:
>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223985.html
>> To unsubscribe from degAxis() does not print degree symbol, click here.
>> NAML
> 
> 
> -----
> R version 2.14.1 (2011-12-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223997.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From alltheweb2cc+rsiggeo at gmail.com  Wed Jan 25 17:44:52 2012
From: alltheweb2cc+rsiggeo at gmail.com (Ricc)
Date: Wed, 25 Jan 2012 08:44:52 -0800 (PST)
Subject: [R-sig-Geo] degAxis() does not print degree symbol
In-Reply-To: <4F202EAF.2070201@uni-muenster.de>
References: <268293.51767.qm@web59714.mail.ac4.yahoo.com>
	<4CB2A561.1070704@uni-muenster.de>
	<1327496115679-7223684.post@n2.nabble.com>
	<4F201697.2040905@uni-muenster.de>
	<CAEhjRXp88bsHc-Q3g2EAQ59MGd9jm_82VzdCzFm3P9FeSHySww@mail.gmail.com>
	<4F202EAF.2070201@uni-muenster.de>
Message-ID: <CAEhjRXptnSXHhfTM9aNbtrQhZCUyka8HYMNNJpUBy93absc4Fw@mail.gmail.com>

You are right !
I found a similar (but unsolved issue) on the r-help mailing list (see
link below)
http://r.789695.n4.nabble.com/Wrong-symbol-rendering-in-plots-Ubuntu-td2243513.html

I will try on that list !

2012/1/25 Edzer Pebesma-2 [via R-sig-geo]
<ml-node+s2731867n7224271h65 at n2.nabble.com>:
> I think your question has little to do with sp, or with r-sig-geo. If
> the command
>
> plot(1); title(parse(text="52*degree*North"))
>
> gives the same problem (no degree sign), I would advice searching, and
> in case of no success posting to r-help, mentioning your locale.
>
> On 01/25/2012 03:54 PM, Ricc wrote:
>
>> I omitted the 'locale' part of the sessionInfo() but other infos were
>> given in my first message as well as in my signature.
>> Here is the 'locale' part:
>> locale:
>> ?[1] LC_CTYPE=fr_FR.UTF-8 ? ? ? ? ?LC_NUMERIC=C
>> ?[3] LC_TIME=fr_FR.UTF-8 ? ? ? ? ? LC_COLLATE=fr_FR.UTF-8
>> ?[5] LC_MONETARY=fr_FR.UTF-8 ? ? ? LC_MESSAGES=fr_FR.UTF-8
>> ?[7] LC_PAPER=fr_FR.UTF-8 ? ? ? ? ?LC_NAME=fr_FR.UTF-8
>> ?[9] LC_ADDRESS=fr_FR.UTF-8 ? ? ? ?LC_TELEPHONE=fr_FR.UTF-8
>> [11] LC_MEASUREMENT=fr_FR.UTF-8 ? ?LC_IDENTIFICATION=fr_FR.UTF-8
>>
>> 2012/1/25 Edzer Pebesma-2 [via R-sig-geo]
>> <[hidden email]>:
>>>
>>>
>>> On 01/25/2012 01:55 PM, Ricc wrote:
>>>> Hello,
>>>>
>>>> Sorry to dig up this thread, but I am currently facing the same issue,
>>>> ie
>>>> I
>>>> do not get the degree symbol on the plot but rather get a gamma symbol.
>>>> - Do someone found a solution ?
>>>> - Has it something to do with the encoding set up of my system ?
>>>
>>> It might help if you would tell us what your encoding is, as well as
>>> operating system & version. On my system, it works. The sessionInfo
>>> there is:
>>>
>>>> sessionInfo()
>>> R version 2.14.1 (2011-12-22)
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>>
>>> locale:
>>> ?[1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
>>> ?[3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8
>>> ?[5] LC_MONETARY=en_US.UTF-8 ? ?LC_MESSAGES=en_US.UTF-8
>>> ?[7] LC_PAPER=C ? ? ? ? ? ? ? ? LC_NAME=C
>>> ?[9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>
>>> attached base packages:
>>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>>
>>> other attached packages:
>>> [1] rgdal_0.7-5 sp_0.9-94
>>>
>>> loaded via a namespace (and not attached):
>>> [1] grid_2.14.1 ? ?lattice_0.20-0
>>>
>>>
>>>
>>>> Thanks !
>>>>
>>>> My script:
>>>> library(rgdal)
>>>> my_lines <- readOGR(".","ShapefileName")
>>>> plot(my_lines, axes=TRUE)
>>>>
>>>>> sessionInfo()
>>>> attached base packages:
>>>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>>> other attached packages:
>>>> [1] rgdal_0.7-8 ?sp_0.9-93 ? ?rkward_0.5.6
>>>> loaded via a namespace (and not attached):
>>>> [1] grid_2.14.1 ? ?lattice_0.20-0 tools_2.14.1
>>>>
>>>> -----
>>>> R version 2.14.1 (2011-12-22)
>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>>> --
>>>> View this message in context:
>>>>
>>>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223684.html
>>>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> [hidden email]
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>> --
>>> Edzer Pebesma
>>> Institute for Geoinformatics (ifgi), University of M?nster
>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>>> http://www.52north.org/geostatistics? ? ? [hidden email]
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> [hidden email]
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>> ________________________________
>>> If you reply to this email, your message will be added to the discussion
>>> below:
>>>
>>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223985.html
>>> To unsubscribe from degAxis() does not print degree symbol, click here.
>>> NAML
>>
>>
>> -----
>> R version 2.14.1 (2011-12-22)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> --
>> View this message in context:
>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223997.html
>
>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> [hidden email]
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> --
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics? ? ? [hidden email]
>
> _______________________________________________
> R-sig-Geo mailing list
> [hidden email]
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
> ________________________________
> If you reply to this email, your message will be added to the discussion
> below:
> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7224271.html
> To unsubscribe from degAxis() does not print degree symbol, click here.
> NAML


-----
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7224314.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From pgalpern at gmail.com  Wed Jan 25 21:06:43 2012
From: pgalpern at gmail.com (pgalpern)
Date: Wed, 25 Jan 2012 14:06:43 -0600
Subject: [R-sig-Geo] Selecting n cells more then minDist apart
In-Reply-To: <4F1FE328.7030400@gmail.com>
References: <4F1FE328.7030400@gmail.com>
Message-ID: <4F2060D3.6030200@gmail.com>

Here is some code that might work using the utterly fabulous raster 
package!

It is inefficient for a large number of points, and at best this 
approach could be described as "kludgy."  I have not thoroughly tested 
this, but it appears to function as expected.  No doubt others can 
suggest efficiencies, or alternate approaches.  Perhaps sampleRegular() 
will work for you.

library(raster)

sampleMinDist <- function(r, n, minDist) {
    pts <- r
    pts[] <- NA
    pts[sampleRandom(pts, size=1, cells=TRUE, na.rm=FALSE)[1]] <- 1
    for (i in 1:(n-1)) {
      repeat {
         repeat {
            rPt <- sampleRandom(pts, size=1, cells=TRUE, na.rm=FALSE)[1]
            if (length(rPt) > 0) break
            }
         if ((distance(pts)[rPt]) >= minDist) break
       }
       pts[rPt] <- 1
    }
    return(list(pts=pts, ptsXY=xyFromCell(pts, which(pts[]==1))))
}

## Example usage for longlat
rLongLat <- raster(nrow=50, ncol=50)
## Select 10 points a minimum of 5000 m apart
myPts <- sampleMinDist(rLongLat, n=10, minDist=5000)
plot(myPts$pts)
myPts$ptsXY

## Example usage for UTM
rUTM <- raster(nrow=50, ncol=50, xmn=0, xmx=50, ymn=0, ymx=50, 
crs="+proj=utm")
## Select 10 points a minimum of 10 m apart
myPts <- sampleMinDist(rUTM, n=10, minDist=10)

Best,
Paul

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca


On 25/01/2012 5:10 AM, Rainer M Krug wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi
>
> I need to select n cells on a raster map with no cell closer then
> minDist from any other selected cell. The distances can be larger - no
> problem - but they must not be smaller then minDist.
>
> I looked at r.random.cell in GRASS with using distance= as the min
> distance, but if I select randomly n cells from the set generated, I
> get cells with a multiple of minDist apart - not exactly what I am
> looking for.
>
> I could use r.random and iterate until my requirements are met, but
> that strikes me as extremely inefficient.
>
> As I would be calling GRASS from R, I could also easily use R directly.
>
> Is there any way of doing this easily in R?
>
> Cheers,
>
> Rainer
>
> - -- 
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
>
> Centre of Excellence for Invasion Biology
> Stellenbosch University
> South Africa
>
> Tel :       +33 - (0)9 53 10 27 44
> Cell:       +33 - (0)6 85 62 59 98
> Fax :       +33 - (0)9 58 10 27 44
>
> Fax (D):    +49 - (0)3 21 21 25 22 44
>
> email:      Rainer at krugs.de
>
> Skype:      RMkrug
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.11 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk8f4ygACgkQoYgNqgF2ego/JACfb/FL5Cyqjm9/Dju0cyi+XRpj
> 1TgAn2oojKKE5xHGNSluhfdxnal27bad
> =L9s4
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca


From juta.kawalerowicz at stx.ox.ac.uk  Wed Jan 25 21:16:56 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Wed, 25 Jan 2012 20:16:56 +0000
Subject: [R-sig-Geo] Georeferencing in R
In-Reply-To: <CANVKczMkyZsiisyNpHA7+b=B6x77U5Muz3d61g0+AXZQfBumpA@mail.gmail.com>
References: <CAC28k7R2s6zyCD=RAJnA05JK3zc=MZFsPY_ozO8BwWczKvx-fg@mail.gmail.com>
	<CAC28k7SeTM76ykYUMa5zunosR3FyHSuiCaMxoZVL0Jpmw-o12w@mail.gmail.com>
	<CANVKczMkyZsiisyNpHA7+b=B6x77U5Muz3d61g0+AXZQfBumpA@mail.gmail.com>
Message-ID: <4F206338.80206@stx.ox.ac.uk>

On 25/01/2012 16:17, Barry Rowlingson wrote:
> On Wed, Jan 25, 2012 at 3:25 PM, Ben Weinstein
> <benweinstein2010 at gmail.com>  wrote:
>> Hello all, posting a question for a friend.
>>
>> Has anyone had any experience georeferencing historical museum data using R
>> packages? I'd also be interested in any up to date solutions outside of R,
>> but it would be easily to integrate all analysis into one script.


Hey,

I know of another outside R solutions which is used for digitalising 
maps - it's called Arc Explorer. You can download it free of charge from 
Esri website. Sorry, this is not an R solution, but hopefully will lead 
you to a possible way to approach this problem.  The procedure is the 
same as described by Barry, you scan a map and then mark points (at 
least 3) for which geographic coords are known.

I may have some old tutorial notes, so if you want a copy let me know.

Juta


>   What sort of georeferencing do you mean? Imagery? Or getting coords
> from text (placenames etc)?
>
>   I'd use Quantum GIS for georeferencing imagery - the georeferencing
> plugin there lets you load in an image, click points on the image and
> either enter coordinates or click the corresponding point on a visible
> map. Then click the 'go' button and it works out the transform to
> overlay your image on the map correctly.
>
>    For text referencing you might be able to use my "geonames" R
> package to search location info from the www.geonames.org database.
>
> Barry
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From alltheweb2cc+rsiggeo at gmail.com  Wed Jan 25 21:57:44 2012
From: alltheweb2cc+rsiggeo at gmail.com (Ricc)
Date: Wed, 25 Jan 2012 12:57:44 -0800 (PST)
Subject: [R-sig-Geo] degAxis() does not print degree symbol
In-Reply-To: <4F202EAF.2070201@uni-muenster.de>
References: <268293.51767.qm@web59714.mail.ac4.yahoo.com>
	<4CB2A561.1070704@uni-muenster.de>
	<1327496115679-7223684.post@n2.nabble.com>
	<4F201697.2040905@uni-muenster.de>
	<CAEhjRXp88bsHc-Q3g2EAQ59MGd9jm_82VzdCzFm3P9FeSHySww@mail.gmail.com>
	<4F202EAF.2070201@uni-muenster.de>
Message-ID: <CAEhjRXpsP6H29HwxpWUb=n9WOL1naL-1e92BUiG3pL8UZUKsDA@mail.gmail.com>

I found a solution. I post it here although I acknowledge that it
belongs to the r-help list. But since I opened a ticket here ....
Following an old post (link below) I uninstalled the package
ttf-symbol-replacement-wine and rebooted. The test suggested by Edzer
was fine then.

https://stat.ethz.ch/pipermail/r-sig-debian/2010-October/001403.html

Hope it will serve to someone else.
Cheers

2012/1/25 Ricc <alltheweb2cc+rsiggeo at gmail.com>:
> You are right !
> I found a similar (but unsolved issue) on the r-help mailing list (see
> link below)
> http://r.789695.n4.nabble.com/Wrong-symbol-rendering-in-plots-Ubuntu-td2243513.html
>
> I will try on that list !
>
> 2012/1/25 Edzer Pebesma-2 [via R-sig-geo]
> <ml-node+s2731867n7224271h65 at n2.nabble.com>:
>> I think your question has little to do with sp, or with r-sig-geo. If
>> the command
>>
>> plot(1); title(parse(text="52*degree*North"))
>>
>> gives the same problem (no degree sign), I would advice searching, and
>> in case of no success posting to r-help, mentioning your locale.
>>
>> On 01/25/2012 03:54 PM, Ricc wrote:
>>
>>> I omitted the 'locale' part of the sessionInfo() but other infos were
>>> given in my first message as well as in my signature.
>>> Here is the 'locale' part:
>>> locale:
>>> ?[1] LC_CTYPE=fr_FR.UTF-8 ? ? ? ? ?LC_NUMERIC=C
>>> ?[3] LC_TIME=fr_FR.UTF-8 ? ? ? ? ? LC_COLLATE=fr_FR.UTF-8
>>> ?[5] LC_MONETARY=fr_FR.UTF-8 ? ? ? LC_MESSAGES=fr_FR.UTF-8
>>> ?[7] LC_PAPER=fr_FR.UTF-8 ? ? ? ? ?LC_NAME=fr_FR.UTF-8
>>> ?[9] LC_ADDRESS=fr_FR.UTF-8 ? ? ? ?LC_TELEPHONE=fr_FR.UTF-8
>>> [11] LC_MEASUREMENT=fr_FR.UTF-8 ? ?LC_IDENTIFICATION=fr_FR.UTF-8
>>>
>>> 2012/1/25 Edzer Pebesma-2 [via R-sig-geo]
>>> <[hidden email]>:
>>>>
>>>>
>>>> On 01/25/2012 01:55 PM, Ricc wrote:
>>>>> Hello,
>>>>>
>>>>> Sorry to dig up this thread, but I am currently facing the same issue,
>>>>> ie
>>>>> I
>>>>> do not get the degree symbol on the plot but rather get a gamma symbol.
>>>>> - Do someone found a solution ?
>>>>> - Has it something to do with the encoding set up of my system ?
>>>>
>>>> It might help if you would tell us what your encoding is, as well as
>>>> operating system & version. On my system, it works. The sessionInfo
>>>> there is:
>>>>
>>>>> sessionInfo()
>>>> R version 2.14.1 (2011-12-22)
>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>>>
>>>> locale:
>>>> ?[1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
>>>> ?[3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8
>>>> ?[5] LC_MONETARY=en_US.UTF-8 ? ?LC_MESSAGES=en_US.UTF-8
>>>> ?[7] LC_PAPER=C ? ? ? ? ? ? ? ? LC_NAME=C
>>>> ?[9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
>>>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>>
>>>> attached base packages:
>>>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>>>
>>>> other attached packages:
>>>> [1] rgdal_0.7-5 sp_0.9-94
>>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] grid_2.14.1 ? ?lattice_0.20-0
>>>>
>>>>
>>>>
>>>>> Thanks !
>>>>>
>>>>> My script:
>>>>> library(rgdal)
>>>>> my_lines <- readOGR(".","ShapefileName")
>>>>> plot(my_lines, axes=TRUE)
>>>>>
>>>>>> sessionInfo()
>>>>> attached base packages:
>>>>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>>>> other attached packages:
>>>>> [1] rgdal_0.7-8 ?sp_0.9-93 ? ?rkward_0.5.6
>>>>> loaded via a namespace (and not attached):
>>>>> [1] grid_2.14.1 ? ?lattice_0.20-0 tools_2.14.1
>>>>>
>>>>> -----
>>>>> R version 2.14.1 (2011-12-22)
>>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>>>> --
>>>>> View this message in context:
>>>>>
>>>>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223684.html
>>>>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>>>>
>>>>> _______________________________________________
>>>>> R-sig-Geo mailing list
>>>>> [hidden email]
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>> --
>>>> Edzer Pebesma
>>>> Institute for Geoinformatics (ifgi), University of M?nster
>>>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>>>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>>>> http://www.52north.org/geostatistics? ? ? [hidden email]
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> [hidden email]
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>>
>>>>
>>>> ________________________________
>>>> If you reply to this email, your message will be added to the discussion
>>>> below:
>>>>
>>>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223985.html
>>>> To unsubscribe from degAxis() does not print degree symbol, click here.
>>>> NAML
>>>
>>>
>>> -----
>>> R version 2.14.1 (2011-12-22)
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>> --
>>> View this message in context:
>>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7223997.html
>>
>>> Sent from the R-sig-geo mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> [hidden email]
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>> --
>> Edzer Pebesma
>> Institute for Geoinformatics (ifgi), University of M?nster
>> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
>> 8333081, Fax: +49 251 8339763 ?http://ifgi.uni-muenster.de
>> http://www.52north.org/geostatistics? ? ? [hidden email]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> [hidden email]
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>> ________________________________
>> If you reply to this email, your message will be added to the discussion
>> below:
>> http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7224271.html
>> To unsubscribe from degAxis() does not print degree symbol, click here.
>> NAML


-----
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)
--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/degAxis-does-not-print-degree-symbol-tp5621450p7225094.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From zua3 at cornell.edu  Wed Jan 25 22:44:02 2012
From: zua3 at cornell.edu (Zia Ahmed)
Date: Wed, 25 Jan 2012 16:44:02 -0500
Subject: [R-sig-Geo] Help: create an animated GIF file from PNG files
Message-ID: <4F2077A2.8090309@cornell.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120125/e6f24185/attachment.pl>

From b.rowlingson at lancaster.ac.uk  Wed Jan 25 22:39:21 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 25 Jan 2012 21:39:21 +0000
Subject: [R-sig-Geo] Georeferencing in R
In-Reply-To: <4F206338.80206@stx.ox.ac.uk>
References: <CAC28k7R2s6zyCD=RAJnA05JK3zc=MZFsPY_ozO8BwWczKvx-fg@mail.gmail.com>
	<CAC28k7SeTM76ykYUMa5zunosR3FyHSuiCaMxoZVL0Jpmw-o12w@mail.gmail.com>
	<CANVKczMkyZsiisyNpHA7+b=B6x77U5Muz3d61g0+AXZQfBumpA@mail.gmail.com>
	<4F206338.80206@stx.ox.ac.uk>
Message-ID: <CANVKczNcff9zW-+xquZhCh_Am=sWjXmmS9HZBkRD9-51JERtLw@mail.gmail.com>

On Wed, Jan 25, 2012 at 8:16 PM, Juta Kawalerowicz
<juta.kawalerowicz at stx.ox.ac.uk> wrote:

> I know of another outside R solutions which is used for digitalising maps -
> it's called Arc Explorer. You can download it free of charge from Esri
> website.

 Oh I forgot to mention that Quantum GIS is also free to download. And
modify. And redistribute. And runs on Windows, Mac and Linux. And
Android :)

 www.qgis.org

Barry


From juta.kawalerowicz at stx.ox.ac.uk  Wed Jan 25 23:18:10 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Wed, 25 Jan 2012 22:18:10 +0000
Subject: [R-sig-Geo] Georeferencing in R
In-Reply-To: <CANVKczNcff9zW-+xquZhCh_Am=sWjXmmS9HZBkRD9-51JERtLw@mail.gmail.com>
References: <CAC28k7R2s6zyCD=RAJnA05JK3zc=MZFsPY_ozO8BwWczKvx-fg@mail.gmail.com>
	<CAC28k7SeTM76ykYUMa5zunosR3FyHSuiCaMxoZVL0Jpmw-o12w@mail.gmail.com>
	<CANVKczMkyZsiisyNpHA7+b=B6x77U5Muz3d61g0+AXZQfBumpA@mail.gmail.com>
	<4F206338.80206@stx.ox.ac.uk>
	<CANVKczNcff9zW-+xquZhCh_Am=sWjXmmS9HZBkRD9-51JERtLw@mail.gmail.com>
Message-ID: <4F207FA2.2060107@stx.ox.ac.uk>

On 25/01/2012 21:39, Barry Rowlingson wrote:
> On Wed, Jan 25, 2012 at 8:16 PM, Juta Kawalerowicz
> <juta.kawalerowicz at stx.ox.ac.uk>  wrote:
>
>> I know of another outside R solutions which is used for digitalising maps -
>> it's called Arc Explorer. You can download it free of charge from Esri
>> website.
>   Oh I forgot to mention that Quantum GIS is also free to download. And
> modify. And redistribute. And runs on Windows, Mac and Linux. And
> Android :)
>
>   www.qgis.org

Yeah Barry, I admit a defeat. Fully agree that OS is the way to go!
>
> Barry


From xie at yihui.name  Wed Jan 25 23:39:22 2012
From: xie at yihui.name (Yihui Xie)
Date: Wed, 25 Jan 2012 16:39:22 -0600
Subject: [R-sig-Geo] Help: create an animated GIF file from PNG files
In-Reply-To: <4F2077A2.8090309@cornell.edu>
References: <4F2077A2.8090309@cornell.edu>
Message-ID: <CANROs4deOg8dFNRugQ4nM9BsCYWn4UgaP3HP0d+idjM7pBmL1g@mail.gmail.com>

You can try the animation package with the function saveGIF(); see the
help page for more info. Basically you just put the code in

saveGIF({
  whatever code that produces plots
})

and you do not need to take care of the issues like opening the
graphical devices; the process is automatic.

Regards,
Yihui
--
Yihui Xie <xieyihui at gmail.com>
Phone: 515-294-2465 Web: http://yihui.name
Department of Statistics, Iowa State University
2215 Snedecor Hall, Ames, IA



On Wed, Jan 25, 2012 at 3:44 PM, Zia Ahmed <zua3 at cornell.edu> wrote:
> I am trying to create an animated GIF file from a set of PNG files
> created from number realization. ?Itried with animation ( depend -
> ImageMagick) and caTools packages, but I did not successful to make the
> GIS file. ?Is ?there any way to do this?
> Thanks
> Zia
>
> # GIF animation
>
> library(sp)
> library(gstat)
> library(lattice)
> library(RColorBrewer)
> library(maptools)
> library(maps)
> library(ggplot2)
> library(lubridate)
> library(animation)
> library(fields) # for tim.colors
> library(caTools) # for write.gif
> library(raster)
>
> data(meuse)
> data(meuse.grid)
> coordinates(meuse) <- ~x+y
> coordinates(meuse.grid) <- ~x+y
> gridded(meuse.grid) <- TRUE
>
> lzn.vgm <- variogram(log(zinc)~1, meuse)
> lzn.fit <- fit.variogram(lzn.vgm, model = vgm(1, "Sph", 900, 1))
>
> ns=4
>
> sim_ns = krige(log(zinc)~1, meuse, meuse.grid, model = lzn.fit,
> nmax = 30, nsim = ns)
>
> # Save figures as PNG files
>
> rgb.palette <- colorRampPalette(c("lightyellow","green","orange","brown"),
> space = "rgb")
>
> setwd("C:/sim")
>
> for (i in 1:ns){
> png(filename = paste("sim",i,".png",sep=""), width=400, height=500,
> units="px",
> pointsize=12, bg="transparent", res=NA)
> print(spplot(sim_ns[,i], main = list(label=paste("SIS",i),cex=1.5),
> par.settings=list(axis.line=list(col=NA)),
> col.regions=rgb.palette(22)))
> dev.off()
> }
>
> # Creat a gif.file
> system("convert -delay 40 *.png sim.gif") #
> Source(http://ryouready.wordpress.com/2010/11/21/animate-gif-images-in-r-imagemagick/)
> Invalid Parameter - 40
> Warning message:
> running command 'convert -delay 40 sim*.png plot.gif', invisible = F,
> wait=T' had status 4
>
>
>
> ---------------------
> Zia Ahmed, PhD
> Research Associate
> Department of Crop and Soil Sciences
> 1002 Bradfield Hall, Cornell University
> Ithaca, NY 14853-4203
> t. 607.255.9387
> f. 607.255.3207
> email zua3 at cornell.edu
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From r.hijmans at gmail.com  Thu Jan 26 02:43:10 2012
From: r.hijmans at gmail.com (Robert J. Hijmans)
Date: Wed, 25 Jan 2012 17:43:10 -0800
Subject: [R-sig-Geo] Georeferencing in R
In-Reply-To: <CAC28k7SeTM76ykYUMa5zunosR3FyHSuiCaMxoZVL0Jpmw-o12w@mail.gmail.com>
References: <CAC28k7R2s6zyCD=RAJnA05JK3zc=MZFsPY_ozO8BwWczKvx-fg@mail.gmail.com>
	<CAC28k7SeTM76ykYUMa5zunosR3FyHSuiCaMxoZVL0Jpmw-o12w@mail.gmail.com>
Message-ID: <CANtt_hzmuFmN-t6JYs70aEQx2AcVQgQKv1OyCnRrmMM8z_X1DA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120125/72b3cb05/attachment.pl>

From babuawara at gmail.com  Thu Jan 26 09:53:41 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 26 Jan 2012 09:53:41 +0100
Subject: [R-sig-Geo] HDF format
Message-ID: <4F211495.8010902@gmail.com>

Hello List,
I was trying to open HDF format files.
Though I have followed the discussion on HDF5 format but really cant 
figure out as I tried to convert HDF to Geotiff but the tool is not 
working on my system. As the package is not for windows my options are 
very limited. Can anyone suggest me on this?


Regards,

Vikram.


From paul.hiemstra at knmi.nl  Thu Jan 26 10:01:01 2012
From: paul.hiemstra at knmi.nl (Paul Hiemstra)
Date: Thu, 26 Jan 2012 09:01:01 +0000
Subject: [R-sig-Geo] HDF format
In-Reply-To: <4F211495.8010902@gmail.com>
References: <4F211495.8010902@gmail.com>
Message-ID: <4F21164D.1000506@knmi.nl>

On 01/26/2012 08:53 AM, Vikram Ranga wrote:
> Hello List,
> I was trying to open HDF format files.
> Though I have followed the discussion on HDF5 format but really cant
> figure out as I tried to convert HDF to Geotiff but the tool is not
> working on my system. As the package is not for windows my options are
> very limited. Can anyone suggest me on this?
>
>
> Regards,
>
> Vikram.
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Hi Vikram,

You e-mail is much too vague to yield a good answer. A few questions
come to mind:

- What is the structure of your HDF files
- What "discussion on hdf5 format" do you mean? And where can we find
it? It is best to give a summary in your mail what you took out of this
discussion.
- Show us concretely what you did (code, package etc). What R code
failed to load your HDF file, what was the error message it yielded?
- What version of R are you using, which package are you using to read
the HDF file, what are the versions of those packages. This can be
easily provided using the sessionInfo() command.

Give us more to work with, or it will be very hard to help you.

regards,
Paul

-- 
Paul Hiemstra, Ph.D.
Global Climate Division
Royal Netherlands Meteorological Institute (KNMI)
Wilhelminalaan 10 | 3732 GK | De Bilt | Kamer B 3.39
P.O. Box 201 | 3730 AE | De Bilt
tel: +31 30 2206 494

http://intamap.geo.uu.nl/~paul
http://nl.linkedin.com/pub/paul-hiemstra/20/30b/770


From babuawara at gmail.com  Thu Jan 26 10:19:33 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 26 Jan 2012 10:19:33 +0100
Subject: [R-sig-Geo] HDF format
In-Reply-To: <4F21164D.1000506@knmi.nl>
References: <4F211495.8010902@gmail.com> <4F21164D.1000506@knmi.nl>
Message-ID: <4F211AA5.9000402@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/162bc7df/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Thu Jan 26 11:29:21 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 26 Jan 2012 11:29:21 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
Message-ID: <4F2139110200002700012501@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/931be927/attachment.pl>

From hi_ono2001 at ybb.ne.jp  Thu Jan 26 12:41:44 2012
From: hi_ono2001 at ybb.ne.jp (hi_ono2001 at ybb.ne.jp)
Date: Thu, 26 Jan 2012 20:41:44 +0900 (JST)
Subject: [R-sig-Geo] Will rgeos support "negative" buffering
Message-ID: <488996.85130.qm@web200017.mail.kks.yahoo.co.jp>

Hello.

 Although geos library package supports "negative" buffering(http://geos.osgeo.org/doxygen/classgeos_1_1operation_1_1buffer_1_1BufferOp.html), any plan to support this function in rgeos's gBuffer?


  Regards.



From zenlines at gmail.com  Thu Jan 26 12:44:54 2012
From: zenlines at gmail.com (Brian)
Date: Thu, 26 Jan 2012 12:44:54 +0100
Subject: [R-sig-Geo] Selecting n cells more then minDist apart
In-Reply-To: <mailman.13.1327575603.14752.r-sig-geo@r-project.org>
References: <mailman.13.1327575603.14752.r-sig-geo@r-project.org>
Message-ID: <4F213CB6.6000407@gmail.com>

Hi Rainer,

how about aggregating to a lower resolution, where the cell center - 
cell center distances correspond to your minDist? Then sample as one 
would normally and then take the cell center coordinates from your 
sample back to your original raster.

A bit of geometry will tell you what the resolution needs to be and 
please tell me you are not sampling a longlat projection!

Either the r.region GRASS function or the aggregate 'raster' function 
should do.

there's my cents/sense...

HTH,

Brian


From r.m.krug at gmail.com  Thu Jan 26 13:15:12 2012
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Thu, 26 Jan 2012 13:15:12 +0100
Subject: [R-sig-Geo] Selecting n cells more then minDist apart
In-Reply-To: <4F213CB6.6000407@gmail.com>
References: <mailman.13.1327575603.14752.r-sig-geo@r-project.org>
	<4F213CB6.6000407@gmail.com>
Message-ID: <4F2143D0.7080809@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 26/01/12 12:44, Brian wrote:
> Hi Rainer,
> 
> how about aggregating to a lower resolution, where the cell center
> - cell center distances correspond to your minDist? Then sample as
> one would normally and then take the cell center coordinates from
> your sample back to your original raster.

Wouldn't work in my case, as the underlying raster on which I want to
sample, has sometimes single isolated cells, and it is important to
have a chance of sampling these as well in a later step. And if under
the aggregated resolution two of these isolated cells are in one
celll, there is a problem.

> A bit of geometry will tell you what the resolution needs to be
> and please tell me you are not sampling a longlat projection!

No - its a UTM grid.

I looked again at my application, and I realized as I can also set the
minimum distance, and then distribute the points. So I decided to use
the r.random.cells function and specify the distance.

My application is a sensitivity analysis, and it does not matter if I
change the distance which results in different number of cells
selected, or change the number of cells and then distribute them.

Thanks a lot for your help,

Rainer


> 
> Either the r.region GRASS function or the aggregate 'raster'
> function should do.
> 
> there's my cents/sense...
> 
> HTH,
> 
> Brian


- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk8hQ9AACgkQoYgNqgF2egrNIgCfQOfcUPaF52CdABEyFRXCh06J
R04AoIsRTOo9eKX4zY9jUP17MjcT4N1U
=aEN9
-----END PGP SIGNATURE-----


From biswas.biplab at gmail.com  Thu Jan 26 13:53:13 2012
From: biswas.biplab at gmail.com (Biplab Biswas)
Date: Thu, 26 Jan 2012 18:23:13 +0530
Subject: [R-sig-Geo] Selecting n cells more then minDist apart
In-Reply-To: <4F2143D0.7080809@gmail.com>
References: <mailman.13.1327575603.14752.r-sig-geo@r-project.org>
	<4F213CB6.6000407@gmail.com> <4F2143D0.7080809@gmail.com>
Message-ID: <CAPk+gCO-5rerGstZi2Xth0cpJGCTw6DA3AfhHpVv1kB14CVSRA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/876bce67/attachment.pl>

From zua3 at cornell.edu  Thu Jan 26 14:52:32 2012
From: zua3 at cornell.edu (Zia Ahmed)
Date: Thu, 26 Jan 2012 08:52:32 -0500
Subject: [R-sig-Geo] Thanks! Re: Help: create an animated GIF file from PNG
 files
In-Reply-To: <CANROs4deOg8dFNRugQ4nM9BsCYWn4UgaP3HP0d+idjM7pBmL1g@mail.gmail.com>
References: <4F2077A2.8090309@cornell.edu>
	<CANROs4deOg8dFNRugQ4nM9BsCYWn4UgaP3HP0d+idjM7pBmL1g@mail.gmail.com>
Message-ID: <4F215AA0.9050904@cornell.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/4c284c2b/attachment.pl>

From babuawara at gmail.com  Thu Jan 26 14:55:53 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 26 Jan 2012 14:55:53 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F2139110200002700012501@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
Message-ID: <4F215B69.8020603@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/922fbc67/attachment.pl>

From edzer.pebesma at uni-muenster.de  Thu Jan 26 15:08:28 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 26 Jan 2012 15:08:28 +0100
Subject: [R-sig-Geo] Will rgeos support "negative" buffering
In-Reply-To: <488996.85130.qm@web200017.mail.kks.yahoo.co.jp>
References: <488996.85130.qm@web200017.mail.kks.yahoo.co.jp>
Message-ID: <4F215E5C.10907@uni-muenster.de>

AFAICS, rgeos does:

require(rgeos)
Sr1 = Polygon(cbind(c(2,4,4,1,2),c(2,3,5,4,2)))
Srs1 = Polygons(list(Sr1), "s1")
SpP = SpatialPolygons(list(Srs1), as.integer(1))

plot(SpP)
plot(gBuffer(SpP, width=-0.5), col = 'red', add=TRUE)


On 01/26/2012 12:41 PM, hi_ono2001 at ybb.ne.jp wrote:
> Hello.
> 
>  Although geos library package supports "negative" buffering(http://geos.osgeo.org/doxygen/classgeos_1_1operation_1_1buffer_1_1BufferOp.html), any plan to support this function in rgeos's gBuffer?
> 
> 
>   Regards.
> 
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From matteo.mattiuzzi at boku.ac.at  Thu Jan 26 15:25:30 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 26 Jan 2012 15:25:30 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F215B69.8020603@gmail.com>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
Message-ID: <4F21706A0200002700012544@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/4ba4123d/attachment.pl>

From babuawara at gmail.com  Thu Jan 26 15:45:36 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 26 Jan 2012 15:45:36 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F21706A0200002700012544@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
Message-ID: <4F216710.1060809@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/65916cc9/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Thu Jan 26 15:53:39 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 26 Jan 2012 15:53:39 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F216710.1060809@gmail.com>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
Message-ID: <4F2177030200002700012551@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/f11aac46/attachment.pl>

From babuawara at gmail.com  Thu Jan 26 15:57:16 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 26 Jan 2012 15:57:16 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F2177030200002700012551@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
Message-ID: <4F2169CC.6000300@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/ccfdc861/attachment.pl>

From rlist at zeidlers.de  Thu Jan 26 16:04:04 2012
From: rlist at zeidlers.de (Julian Zeidler)
Date: Thu, 26 Jan 2012 16:04:04 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F2177030200002700012551@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
Message-ID: <4F216B64.3060409@zeidlers.de>

Hi Vikram,

I think the Problem is inherent in rgdal /gdal under Windows.

On Linux gdalDrivers() shows (at least partial) support for HDF4 and HDF5

43        HDF4                       Hierarchical Data Format Release 4
44        HDF4Image                                             HDF4 Dataset
45        HDF5                       Hierarchical Data Format Release 5
46        HDF5Image                                             HDF5 Dataset

while they are missing from gdalDrivers() in Windows.

Therefore you should have more luck trying to get it to run under Linux

Best,
Julian


Am 26.01.2012 15:53, schrieb Matteo Mattiuzzi:
> ok should be simple...remove the space in: "c:/new aster" and try again
>
>>>> Vikram Ranga<babuawara at gmail.com>  1/26/2012 3:45 pm>>>
> OK I tried this,
> sds<-getSDS(HdfName="H:/new aster/AST_09_00304012003053127_20120124074826_13837.hdf")
> Warning message:
> running command 'C:\Windows\system32\cmd.exe /c gdalinfo H:/new aster/AST_09_00304012003053127_20120124074826_13837.hdf' had status 1
>   but It is still returning NULL values...
>> sds
> $SDSnames
> NULL
>
> $SDS4gdal
> NULL
>
>
>
> On 1/26/2012 3:25 PM, Matteo Mattiuzzi wrote:
>
> Ok, I piked a ASTEfile: ftp://e4ftl01.cr.usgs.gov/ASTER_B/ASTT/AST_L1B.003/2000.03.30/AST_L1B_00303302000172133_20110111233757_1859.hdf
>
> # I am working on a Linux system I hope it does the same on Windows!!
>
> install.packages("MODIS", repos="http://R-Forge.R-project.org", dependencies=TRUE)
> library(MODIS)
>
> sds<- getSDS(HdfName= "/your/path/to/AST_L1B_00303302000172133_20110111233757_1859.hdf")
>
> SDS$SDS4gdal
>   [1] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":VNIR_Swath:ImageData1"
>   [2] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":VNIR_Swath:ImageData2"
>   [3] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":VNIR_Swath:ImageData3N"
>   [4] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":VNIR_Swath:ImageData3B"
>   [5] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData4"
>   [6] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData5"
>   [7] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData6"
>   [8] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData7"
>   [9] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData8"
> [10] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData9"
> [11] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData10"
> [12] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData11"
> [13] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData12"
> [14] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData13"
> [15] "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData14"
> [16] "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":0"
> [17] "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":1"
> [18] "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":2"
> [19] "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":3"
> [20] "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":4"
> [21] "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":5"
> ...
>
>
> f1<- raster(SDS$SDS4gdal[1])
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.8.0, released 2011/01/12
> Path to GDAL shared files: /usr/share/gdal/1.8
> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
> Path to PROJ.4 shared files: (autodetected)
> Warning messages:
> 1: In normalizePath(x) :
>    path[1]="HDF4_EOS:EOS_SWATH:"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf":VNIR_Swath:ImageData1": No such file or directory
> 2: In .rasterFromGDAL(x, band = band, objecttype, ...) :
>    GeoTransform values not available; georeferencing will not be correct
>> f1
> class       : RasterLayer
> dimensions  : 4200, 4980, 20916000  (nrow, ncol, ncell)
> resolution  : 1, 1  (x, y)
> extent      : 0, 4980, 0, 4200  (xmin, xmax, ymin, ymax)
> coord. ref. : NA
> values      : HDF4_EOS:EOS_SWATH:"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf":VNIR_Swath:ImageData1
> min value   : 0
> max value   : 255
> # or
>
> f2<-stack(SDS$SDS4gdal[1:3])
> warning messages...
>
>> f2
> class       : RasterStack
> dimensions  : 4200, 4980, 20916000, 3  (nrow, ncol, ncell, nlayers)
> resolution  : 1, 1  (x, y)
> extent      : 0, 4980, 0, 4200  (xmin, xmax, ymin, ymax)
> coord. ref. : NA
> min values  : 0 0 0
> max values  : 255 255 255
>
> The file I have downloaded is a Swath product.... Spatial reference is lost and the data is NOT a GRIDDED file (Pixels are not squared but more polygons of different size). So you can't do many things you could do with an GRID File! ...Maybe you send me a link to download the file you are using (if you use d different type!)
>
> Matteo
>
>
>
>
>
>>>> Vikram Ranga<babuawara at gmail.com>  ( mailto:babuawara at gmail.com ) 1/26/2012 2:55 pm>>>
> Hi Matteo,
> I am not sure about ASTER is HDF4 or HDF5.
> The codes you have given me I tried them
> sdsRaw<- shell(paste("gdalinfo ", HdfName,sep=""),intern=TRUE); this command seems to be working fine giving "Operable program or batch file ". And with raster(sdsRaw[1]) giving error : object 'SDSRaw' not found!
> While the another two codes does not seems to have worked
> SDSnames<- grep(x=sdsRaw,pattern="SUBDATASET_*.._NAME",value=T)
> The return with this command is character (0)
> SDSnames<- unlist(lapply(SDSnames,function(x) strsplit(x,"=")[[1]][2]))
> while with this one; the output is NULL.
>
> Though, I tried to install MODIS library to try getSDS() but could not find it in the library(strangely)
>
> Regards,
>
> Vikram.
>
> On 1/26/2012 11:29 AM, Matteo Mattiuzzi wrote:
>
>
> Hi Vikram,
>
> Isn't Aster HDF not  an HDF4 format (like MODIS)? HDF4 and HDF5 are not really comparable/compatible each to other.
>
> If I'm right, you can open the file using GDAL, or even with the raster package, but you have to point the path to the layer (SDS) and not only to the file. There was a discussion between Robert Hijmans and Jan Verbesselt about that... https://r-forge.r-project.org/forum/message.php?msg_id=4132&group_id=294
>
> I think you can do the same with ASTER data.
>
> So now the only problem should be how to get the path to the SDS:
> in the MODIS package we use the function: getSDS(HdfName,method='gdal') , try to insert the full FILE-path in that function.
> Or you can try (on windows) with:
> sdsRaw<- shell(paste("gdalinfo ", HdfName,sep=""),intern=TRUE)
> SDSnames<- grep(x=sdsRaw,pattern="SUBDATASET_*.._NAME",value=T)
> SDSnames<- unlist(lapply(SDSnames,function(x) strsplit(x,"=")[[1]][2]))
>
> at least the sdsRaw should work...SDSnames I don't know, just test it (and maybe give me a short feedback)
>
> If everything runs fine you should be able to open in then raster package like that:
>
> SDS1<-raster(SDSnames[1]) # you can ignore the warning: normalizePath(x)
> or
> sds250<- stack(SDSnames[1:2]) # FOR MODIS! (only layers with the same resolution are 'stackable')
> ....
>
> Matteo
>
>
> So first you have to determinatate the full path to the SDS you wand to extract.
>
>>>> Vikram Ranga<babuawara at gmail.com>  ( mailto:babuawara at gmail.com ) 26.01.12 10.20 Uhr>>>
> Hello Paul,
> sorry for abstruse mail. I am using R version 2.13.2 on windows (64
> bit). I am trying to open ASTER data files(*.hdf). Though, I tried few
> things like readGDAL() and raster() but got error message
> "53127_20120124074826_13837.hdf' not recognised as a supported file
> format" . I tried to load hdf5 package but while installing it I got
> Warning message:
> In getDependencies(pkgs, dependencies, available, lib) : package 'hdf5'
> is not available (for R version 2.13.2). I saw the discussion on hdf
> file on the list with topic "*What is the latest re: reading HDF files
> with R*". In the discussion Roger pointed out that building gdal
> against hdf format might help but I do not have a clue how to do that.
> let me know if you want more info from my end.
>
>
> Regards,
>
> Vikram.
>
> On 1/26/2012 10:01 AM, Paul Hiemstra wrote:
>> On 01/26/2012 08:53 AM, Vikram Ranga wrote:
>>> Hello List,
>>> I was trying to open HDF format files.
>>> Though I have followed the discussion on HDF5 format but really cant
>>> figure out as I tried to convert HDF to Geotiff but the tool is not
>>> working on my system. As the package is not for windows my options are
>>> very limited. Can anyone suggest me on this?
>>>
>>>
>>> Regards,
>>>
>>> Vikram.
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>> Hi Vikram,
>>
>> You e-mail is much too vague to yield a good answer. A few questions
>> come to mind:
>>
>> - What is the structure of your HDF files
>> - What "discussion on hdf5 format" do you mean? And where can we find
>> it? It is best to give a summary in your mail what you took out of this
>> discussion.
>> - Show us concretely what you did (code, package etc). What R code
>> failed to load your HDF file, what was the error message it yielded?
>> - What version of R are you using, which package are you using to read
>> the HDF file, what are the versions of those packages. This can be
>> easily provided using the sessionInfo() command.
>>
>> Give us more to work with, or it will be very hard to help you.
>>
>> regards,
>> Paul
>>
>      [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From babuawara at gmail.com  Thu Jan 26 16:10:52 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 26 Jan 2012 16:10:52 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F216B64.3060409@zeidlers.de>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
	<4F216B64.3060409@zeidlers.de>
Message-ID: <4F216CFC.2090200@gmail.com>

Hi Julian
Good Point!!!!!
But if anybody know if we can build gdal against hdf drivers for windows?

Regards,
Vikram.

On 1/26/2012 4:04 PM, Julian Zeidler wrote:
> Hi Vikram,
>
> I think the Problem is inherent in rgdal /gdal under Windows.
>
> On Linux gdalDrivers() shows (at least partial) support for HDF4 and HDF5
>
> 43        HDF4                       Hierarchical Data Format Release 4
> 44        HDF4Image                                             HDF4 
> Dataset
> 45        HDF5                       Hierarchical Data Format Release 5
> 46        HDF5Image                                             HDF5 
> Dataset
>
> while they are missing from gdalDrivers() in Windows.
>
> Therefore you should have more luck trying to get it to run under Linux
>
> Best,
> Julian
>
>
> Am 26.01.2012 15:53, schrieb Matteo Mattiuzzi:
>> ok should be simple...remove the space in: "c:/new aster" and try again
>>
>>>>> Vikram Ranga<babuawara at gmail.com>  1/26/2012 3:45 pm>>>
>> OK I tried this,
>> sds<-getSDS(HdfName="H:/new 
>> aster/AST_09_00304012003053127_20120124074826_13837.hdf")
>> Warning message:
>> running command 'C:\Windows\system32\cmd.exe /c gdalinfo H:/new 
>> aster/AST_09_00304012003053127_20120124074826_13837.hdf' had status 1
>>   but It is still returning NULL values...
>>> sds
>> $SDSnames
>> NULL
>>
>> $SDS4gdal
>> NULL
>>
>>
>>
>> On 1/26/2012 3:25 PM, Matteo Mattiuzzi wrote:
>>
>> Ok, I piked a ASTEfile: 
>> ftp://e4ftl01.cr.usgs.gov/ASTER_B/ASTT/AST_L1B.003/2000.03.30/AST_L1B_00303302000172133_20110111233757_1859.hdf
>>
>> # I am working on a Linux system I hope it does the same on Windows!!
>>
>> install.packages("MODIS", repos="http://R-Forge.R-project.org", 
>> dependencies=TRUE)
>> library(MODIS)
>>
>> sds<- getSDS(HdfName= 
>> "/your/path/to/AST_L1B_00303302000172133_20110111233757_1859.hdf")
>>
>> SDS$SDS4gdal
>>   [1] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":VNIR_Swath:ImageData1"
>>   [2] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":VNIR_Swath:ImageData2"
>>   [3] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":VNIR_Swath:ImageData3N"
>>   [4] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":VNIR_Swath:ImageData3B"
>>   [5] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData4"
>>   [6] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData5"
>>   [7] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData6"
>>   [8] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData7"
>>   [9] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData8"
>> [10] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":SWIR_Swath:ImageData9"
>> [11] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData10"
>> [12] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData11"
>> [13] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData12"
>> [14] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData13"
>> [15] 
>> "HDF4_EOS:EOS_SWATH:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":TIR_Swath:ImageData14"
>> [16] 
>> "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":0"
>> [17] 
>> "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":1"
>> [18] 
>> "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":2"
>> [19] 
>> "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":3"
>> [20] 
>> "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":4"
>> [21] 
>> "HDF4_SDS:UNKNOWN:\"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf\":5"
>> ...
>>
>>
>> f1<- raster(SDS$SDS4gdal[1])
>> Geospatial Data Abstraction Library extensions to R successfully loaded
>> Loaded GDAL runtime: GDAL 1.8.0, released 2011/01/12
>> Path to GDAL shared files: /usr/share/gdal/1.8
>> Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
>> Path to PROJ.4 shared files: (autodetected)
>> Warning messages:
>> 1: In normalizePath(x) :
>>    
>> path[1]="HDF4_EOS:EOS_SWATH:"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf":VNIR_Swath:ImageData1": 
>> No such file or directory
>> 2: In .rasterFromGDAL(x, band = band, objecttype, ...) :
>>    GeoTransform values not available; georeferencing will not be correct
>>> f1
>> class       : RasterLayer
>> dimensions  : 4200, 4980, 20916000  (nrow, ncol, ncell)
>> resolution  : 1, 1  (x, y)
>> extent      : 0, 4980, 0, 4200  (xmin, xmax, ymin, ymax)
>> coord. ref. : NA
>> values      : 
>> HDF4_EOS:EOS_SWATH:"/home/matteo/Downloads/AST_L1B_00303302000172133_20110111233757_1859.hdf":VNIR_Swath:ImageData1
>> min value   : 0
>> max value   : 255
>> # or
>>
>> f2<-stack(SDS$SDS4gdal[1:3])
>> warning messages...
>>
>>> f2
>> class       : RasterStack
>> dimensions  : 4200, 4980, 20916000, 3  (nrow, ncol, ncell, nlayers)
>> resolution  : 1, 1  (x, y)
>> extent      : 0, 4980, 0, 4200  (xmin, xmax, ymin, ymax)
>> coord. ref. : NA
>> min values  : 0 0 0
>> max values  : 255 255 255
>>
>> The file I have downloaded is a Swath product.... Spatial reference 
>> is lost and the data is NOT a GRIDDED file (Pixels are not squared 
>> but more polygons of different size). So you can't do many things you 
>> could do with an GRID File! ...Maybe you send me a link to download 
>> the file you are using (if you use d different type!)
>>
>> Matteo
>>
>>
>>
>>
>>
>>>>> Vikram Ranga<babuawara at gmail.com>  ( mailto:babuawara at gmail.com ) 
>>>>> 1/26/2012 2:55 pm>>>
>> Hi Matteo,
>> I am not sure about ASTER is HDF4 or HDF5.
>> The codes you have given me I tried them
>> sdsRaw<- shell(paste("gdalinfo ", HdfName,sep=""),intern=TRUE); this 
>> command seems to be working fine giving "Operable program or batch 
>> file ". And with raster(sdsRaw[1]) giving error : object 'SDSRaw' not 
>> found!
>> While the another two codes does not seems to have worked
>> SDSnames<- grep(x=sdsRaw,pattern="SUBDATASET_*.._NAME",value=T)
>> The return with this command is character (0)
>> SDSnames<- unlist(lapply(SDSnames,function(x) strsplit(x,"=")[[1]][2]))
>> while with this one; the output is NULL.
>>
>> Though, I tried to install MODIS library to try getSDS() but could 
>> not find it in the library(strangely)
>>
>> Regards,
>>
>> Vikram.
>>
>> On 1/26/2012 11:29 AM, Matteo Mattiuzzi wrote:
>>
>>
>> Hi Vikram,
>>
>> Isn't Aster HDF not  an HDF4 format (like MODIS)? HDF4 and HDF5 are 
>> not really comparable/compatible each to other.
>>
>> If I'm right, you can open the file using GDAL, or even with the 
>> raster package, but you have to point the path to the layer (SDS) and 
>> not only to the file. There was a discussion between Robert Hijmans 
>> and Jan Verbesselt about that... 
>> https://r-forge.r-project.org/forum/message.php?msg_id=4132&group_id=294
>>
>> I think you can do the same with ASTER data.
>>
>> So now the only problem should be how to get the path to the SDS:
>> in the MODIS package we use the function: 
>> getSDS(HdfName,method='gdal') , try to insert the full FILE-path in 
>> that function.
>> Or you can try (on windows) with:
>> sdsRaw<- shell(paste("gdalinfo ", HdfName,sep=""),intern=TRUE)
>> SDSnames<- grep(x=sdsRaw,pattern="SUBDATASET_*.._NAME",value=T)
>> SDSnames<- unlist(lapply(SDSnames,function(x) strsplit(x,"=")[[1]][2]))
>>
>> at least the sdsRaw should work...SDSnames I don't know, just test it 
>> (and maybe give me a short feedback)
>>
>> If everything runs fine you should be able to open in then raster 
>> package like that:
>>
>> SDS1<-raster(SDSnames[1]) # you can ignore the warning: normalizePath(x)
>> or
>> sds250<- stack(SDSnames[1:2]) # FOR MODIS! (only layers with the same 
>> resolution are 'stackable')
>> ....
>>
>> Matteo
>>
>>
>> So first you have to determinatate the full path to the SDS you wand 
>> to extract.
>>
>>>>> Vikram Ranga<babuawara at gmail.com>  ( mailto:babuawara at gmail.com ) 
>>>>> 26.01.12 10.20 Uhr>>>
>> Hello Paul,
>> sorry for abstruse mail. I am using R version 2.13.2 on windows (64
>> bit). I am trying to open ASTER data files(*.hdf). Though, I tried few
>> things like readGDAL() and raster() but got error message
>> "53127_20120124074826_13837.hdf' not recognised as a supported file
>> format" . I tried to load hdf5 package but while installing it I got
>> Warning message:
>> In getDependencies(pkgs, dependencies, available, lib) : package 'hdf5'
>> is not available (for R version 2.13.2). I saw the discussion on hdf
>> file on the list with topic "*What is the latest re: reading HDF files
>> with R*". In the discussion Roger pointed out that building gdal
>> against hdf format might help but I do not have a clue how to do that.
>> let me know if you want more info from my end.
>>
>>
>> Regards,
>>
>> Vikram.
>>
>> On 1/26/2012 10:01 AM, Paul Hiemstra wrote:
>>> On 01/26/2012 08:53 AM, Vikram Ranga wrote:
>>>> Hello List,
>>>> I was trying to open HDF format files.
>>>> Though I have followed the discussion on HDF5 format but really cant
>>>> figure out as I tried to convert HDF to Geotiff but the tool is not
>>>> working on my system. As the package is not for windows my options are
>>>> very limited. Can anyone suggest me on this?
>>>>
>>>>
>>>> Regards,
>>>>
>>>> Vikram.
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>> Hi Vikram,
>>>
>>> You e-mail is much too vague to yield a good answer. A few questions
>>> come to mind:
>>>
>>> - What is the structure of your HDF files
>>> - What "discussion on hdf5 format" do you mean? And where can we find
>>> it? It is best to give a summary in your mail what you took out of this
>>> discussion.
>>> - Show us concretely what you did (code, package etc). What R code
>>> failed to load your HDF file, what was the error message it yielded?
>>> - What version of R are you using, which package are you using to read
>>> the HDF file, what are the versions of those packages. This can be
>>> easily provided using the sessionInfo() command.
>>>
>>> Give us more to work with, or it will be very hard to help you.
>>>
>>> regards,
>>> Paul
>>>
>>      [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>     [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From matteo.mattiuzzi at boku.ac.at  Thu Jan 26 16:28:59 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Thu, 26 Jan 2012 16:28:59 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F2177030200002700012551@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
Message-ID: <4F217F4B0200002700012568@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/41e3da8a/attachment.pl>

From hi_ono2001 at ybb.ne.jp  Thu Jan 26 17:00:37 2012
From: hi_ono2001 at ybb.ne.jp (hi_ono2001 at ybb.ne.jp)
Date: Fri, 27 Jan 2012 01:00:37 +0900 (JST)
Subject: [R-sig-Geo] Will rgeos support "negative" buffering
In-Reply-To: <4F215E5C.10907@uni-muenster.de>
Message-ID: <589911.52673.qm@web200001.mail.kks.yahoo.co.jp>

Thank you very much.

 I could check this function for generating buffer of shapefiles.


  Regards.

--- On Thu, 2012/1/26, Edzer Pebesma <edzer.pebesma at uni-muenster.de> wrote:

> AFAICS, rgeos does:
> 
> require(rgeos)
> Sr1 = Polygon(cbind(c(2,4,4,1,2),c(2,3,5,4,2)))
> Srs1 = Polygons(list(Sr1), "s1")
> SpP = SpatialPolygons(list(Srs1), as.integer(1))
> 
> plot(SpP)
> plot(gBuffer(SpP, width=-0.5), col = 'red', add=TRUE)
> 
> 
> On 01/26/2012 12:41 PM, hi_ono2001 at ybb.ne.jp wrote:
> > Hello.
> > 
> >? Although geos library package supports "negative" buffering(http://geos.osgeo.org/doxygen/classgeos_1_1operation_1_1buffer_1_1BufferOp.html), any plan to support this function in rgeos's gBuffer?
> > 
> > 
> >???Regards.
> > 
> > 
> > _______________________________________________
> > R-sig-Geo mailing list
> > R-sig-Geo at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> 
> -- 
> Edzer Pebesma
> Institute for Geoinformatics (ifgi), University of M?nster
> Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
> 8333081, Fax: +49 251 8339763? http://ifgi.uni-muenster.de
> http://www.52north.org/geostatistics? ? ? e.pebesma at wwu.de
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>


From babuawara at gmail.com  Thu Jan 26 17:05:56 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Thu, 26 Jan 2012 17:05:56 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F217F4B0200002700012568@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
	<4F217F4B0200002700012568@gwia2.boku.ac.at>
Message-ID: <4F2179E4.3010609@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/a1ae9d35/attachment.pl>

From mpa at aqua.dtu.dk  Thu Jan 26 17:14:18 2012
From: mpa at aqua.dtu.dk (Mark Payne)
Date: Thu, 26 Jan 2012 17:14:18 +0100
Subject: [R-sig-Geo] Area of Spatial Pixels
Message-ID: <AAD1945C8FDCF0488D845356BF31DB72023590C96F@WINEXCHANGE5.win.dtu.dk>

Dear R spatial gurus,

I am new to the spatial classes in R, but have been very impressed by what I've seen so far. Hopefully this question isn't too simple but I haven't been able to find the answer in either the mailing lists or documentation...

I have created a SpatialPixelsDataFrame as follows:

> summary(bath)
Object of class SpatialPixelsDataFrame
Coordinates:
     min max
lon -180 180
lat  -90  90
Is projected: FALSE
proj4string : [+proj=longlat +datum=WGS84]
Number of points: 64800
Grid attributes:
    cellcentre.offset cellsize cells.dim
lon            -179.5        1       360
lat             -89.5        1       180
Data attributes:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
-7473.0 -4286.0 -2514.0 -1896.0   233.2  5731.0
>

This object represents the ocean bathymetry on  a global 1 degree grid. I would like to calculate the area of each pixel in this object (for use in further calculations), but can't figure out how to do it. Is there an easy and direct way to achieve this?

Best wishes,

Mark

From rafael.wueest at wsl.ch  Thu Jan 26 17:30:17 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Thu, 26 Jan 2012 17:30:17 +0100
Subject: [R-sig-Geo] Area of Spatial Pixels
In-Reply-To: <AAD1945C8FDCF0488D845356BF31DB72023590C96F@WINEXCHANGE5.win.dtu.dk>
References: <AAD1945C8FDCF0488D845356BF31DB72023590C96F@WINEXCHANGE5.win.dtu.dk>
Message-ID: <111B5DD8-7429-4435-9BF3-0CB9FFA1E915@wsl.ch>

Hi Mark

If you create a raster via

r<-raster(bath)

you can use the area function of the raster package.

check out ?area

Rafael

On 26.01.2012, at 17:14, Mark Payne wrote:

> Dear R spatial gurus,
> 
> I am new to the spatial classes in R, but have been very impressed by what I've seen so far. Hopefully this question isn't too simple but I haven't been able to find the answer in either the mailing lists or documentation...
> 
> I have created a SpatialPixelsDataFrame as follows:
> 
>> summary(bath)
> Object of class SpatialPixelsDataFrame
> Coordinates:
>     min max
> lon -180 180
> lat  -90  90
> Is projected: FALSE
> proj4string : [+proj=longlat +datum=WGS84]
> Number of points: 64800
> Grid attributes:
>    cellcentre.offset cellsize cells.dim
> lon            -179.5        1       360
> lat             -89.5        1       180
> Data attributes:
>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
> -7473.0 -4286.0 -2514.0 -1896.0   233.2  5731.0
>> 
> 
> This object represents the ocean bathymetry on  a global 1 degree grid. I would like to calculate the area of each pixel in this object (for use in further calculations), but can't figure out how to do it. Is there an easy and direct way to achieve this?
> 
> Best wishes,
> 
> Mark
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From moshersteven at gmail.com  Thu Jan 26 18:40:08 2012
From: moshersteven at gmail.com (steven mosher)
Date: Thu, 26 Jan 2012 09:40:08 -0800
Subject: [R-sig-Geo] Antw: Re: HDF format
In-Reply-To: <4F2139110200002700012501@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
Message-ID: <CAFFLneRLOuYe3vd5k+cdw4kne=6ZdhejhOTukoh=oZfcVUQ0vQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/b5eac7d1/attachment.pl>

From dimitri.liakhovitski at gmail.com  Thu Jan 26 19:14:16 2012
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Thu, 26 Jan 2012 13:14:16 -0500
Subject: [R-sig-Geo] Coloring Canada provinces in raster
Message-ID: <CAN2xGJaiSrw7wB7iL-6T8Ae+sQDteDCv3WLZfHtpPeUECTQBEg@mail.gmail.com>

Dear R map gurus,
I am very new to creating maps in R and have never used "raster"
before, so very sorry if it's a simple question.

I am trying to create a map of Canada with small administrative units
(counties and the like) colored based on some criterion I set (e.g.,
all units that belong to Group 1 get one color, to Group 2 get another
color, etc). At the bottom of this e-mail is an example of what I am
trying to achieve - but it's for the US (based on coloring US
counties) and using "maps". I was not able to find small
administrative divisions (like counties) for Canada in "maps", only
cities.
So, I was referred to "raster". I was able to read in the Canada data
at the right administrative level:

library(raster)
can2<-getData('GADM', country="CAN", level=2)
class(can2)

# "NAME_2" in object "can2" contains exactly the level of
administrative detail I need!
can2$NAME_2

# and plot and ssplot plot the map with those counties and colors them:
plot(can2)     # No colors
spplot(can2, "NAME_2")  # colored, but not sure based on what rule +
creates a legend

Question:
Is it at all possible to color the units in can2$NAME_2 based on their
groupings that I create (like in the US example below), and the colors
I choose?
Is it possible to remove the legend from the plot?
Is it possible to have no borders between counties but have borders
between Canadian Provinces (like in the US example below)?

Thank you very much for your help!
Dimitri Liakhovitski


### Example for creating a US map with colored counties using "maps":

# 1. Creating an (ARTIFICIAL) criterion for coloring US counties in
only few colors:
library(maps)
allcounties<-data.frame(county=map('county', plot=FALSE)$names)
allcounties$group<-c(rep(1:6,513),rep(1,4))[order(c(rep(1:6,513),rep(1,4)))]
### My colors:
mycolors <- rainbow(6)
map('county',fill=TRUE,col=mycolors[allcounties$group],resolution=0,lty=0,bg=
"transparent")
map('state', lwd=1, add=TRUE)     # adding the state borders


From sandeep.coepcivil at gmail.com  Thu Jan 26 19:55:50 2012
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Thu, 26 Jan 2012 12:55:50 -0600
Subject: [R-sig-Geo] Coefficient of correlation weighting - Cross validation
Message-ID: <CAHnA5RVJ5UvU=VeS8uMA63_9sTVZhB2fO3ZsppD19=OppFSVoA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/d9b35ec6/attachment.pl>

From sandeep.coepcivil at gmail.com  Thu Jan 26 19:56:54 2012
From: sandeep.coepcivil at gmail.com (Sandeep Patil)
Date: Thu, 26 Jan 2012 12:56:54 -0600
Subject: [R-sig-Geo] Spatially weighted regression - Cross validation
Message-ID: <CAHnA5RXUSMohKA4MOq-2Tjd4HN2kb3SugXopNx4r3v=P5qav7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120126/a0be7c1c/attachment.pl>

From Roger.Bivand at nhh.no  Thu Jan 26 20:14:01 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 26 Jan 2012 20:14:01 +0100 (CET)
Subject: [R-sig-Geo] Spatially weighted regression - Cross validation
In-Reply-To: <CAHnA5RXUSMohKA4MOq-2Tjd4HN2kb3SugXopNx4r3v=P5qav7w@mail.gmail.com>
References: <CAHnA5RXUSMohKA4MOq-2Tjd4HN2kb3SugXopNx4r3v=P5qav7w@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1201262012480.14738@reclus.nhh.no>

On Thu, 26 Jan 2012, Sandeep Patil wrote:

> Hello everyone,
>
> Does anyone know of a package in R that implements spatially weighted
> regression and its leave out one cross-validation version.

Have you reviewed the "Spatial" task view on your nearest CRAN mirror? 
Look for Task Views in the navigation bar on the left.

Roger

>
> Thanks in advance,
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From dimitri.liakhovitski at gmail.com  Thu Jan 26 21:42:22 2012
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Thu, 26 Jan 2012 15:42:22 -0500
Subject: [R-sig-Geo] Coloring Canada provinces in raster
In-Reply-To: <CAN2xGJaiSrw7wB7iL-6T8Ae+sQDteDCv3WLZfHtpPeUECTQBEg@mail.gmail.com>
References: <CAN2xGJaiSrw7wB7iL-6T8Ae+sQDteDCv3WLZfHtpPeUECTQBEg@mail.gmail.com>
Message-ID: <CAN2xGJaQnyY1=mc4yeP9oXnC48s+8+DUovvKf_AtR5A5FCAURg@mail.gmail.com>

Dear map-gurus,
I've made some progress based on one post I found, but now I am stuck.
I was able to group Canadian admin units into 6 groups so that each
group has the same color:

# Getting the data:
library(raster)
can2<-getData('GADM', country="CAN", level=2)
class(can2)

# Creating my (artificial) groupings of Canadian admin units:
nrofunits<-length(can2$NAME_2)
groups<-c(rep(1:6,(nrofunits %/%
6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]

# adding values (grouping values) to "data" and calling this new
variables "groups"
can2 at data[["groups"]]<-groups

# Plotting:
spplot(can2,"groups")

Questions that I am still not sure how to address:
How can I use MY colors instead of the default colors? In fact, I
don't want heat map, I need 6 separate colors...
Can I remove the legend from the plot?
Can I eliminate borders between counties but have borders between
Canadian Provinces (like in the US example below)?
I.e., only borders from the plot for can1:
can1<-getData('GADM', country="CAN", level=1)
plot(can1)

Thanks a lot!
Dimitri



On Thu, Jan 26, 2012 at 1:14 PM, Dimitri Liakhovitski
<dimitri.liakhovitski at gmail.com> wrote:
> Dear R map gurus,
> I am very new to creating maps in R and have never used "raster"
> before, so very sorry if it's a simple question.
>
> I am trying to create a map of Canada with small administrative units
> (counties and the like) colored based on some criterion I set (e.g.,
> all units that belong to Group 1 get one color, to Group 2 get another
> color, etc). At the bottom of this e-mail is an example of what I am
> trying to achieve - but it's for the US (based on coloring US
> counties) and using "maps". I was not able to find small
> administrative divisions (like counties) for Canada in "maps", only
> cities.
> So, I was referred to "raster". I was able to read in the Canada data
> at the right administrative level:
>
> library(raster)
> can2<-getData('GADM', country="CAN", level=2)
> class(can2)
>
> # "NAME_2" in object "can2" contains exactly the level of
> administrative detail I need!
> can2$NAME_2
>
> # and plot and ssplot plot the map with those counties and colors them:
> plot(can2) ? ? # No colors
> spplot(can2, "NAME_2") ?# colored, but not sure based on what rule +
> creates a legend
>
> Question:
> Is it at all possible to color the units in can2$NAME_2 based on their
> groupings that I create (like in the US example below), and the colors
> I choose?
> Is it possible to remove the legend from the plot?
> Is it possible to have no borders between counties but have borders
> between Canadian Provinces (like in the US example below)?
>
> Thank you very much for your help!
> Dimitri Liakhovitski
>
>
> ### Example for creating a US map with colored counties using "maps":
>
> # 1. Creating an (ARTIFICIAL) criterion for coloring US counties in
> only few colors:
> library(maps)
> allcounties<-data.frame(county=map('county', plot=FALSE)$names)
> allcounties$group<-c(rep(1:6,513),rep(1,4))[order(c(rep(1:6,513),rep(1,4)))]
> ### My colors:
> mycolors <- rainbow(6)
> map('county',fill=TRUE,col=mycolors[allcounties$group],resolution=0,lty=0,bg=
> "transparent")
> map('state', lwd=1, add=TRUE) ? ? # adding the state borders



-- 
Dimitri Liakhovitski
marketfusionanalytics.com


From fabermichiel at planet.nl  Thu Jan 26 23:02:50 2012
From: fabermichiel at planet.nl (Michiel Faber)
Date: Thu, 26 Jan 2012 23:02:50 +0100
Subject: [R-sig-Geo] cut a line at specific point
Message-ID: <1327615370.7736.35.camel@marlon-laptop>

Dear all, 

I'am using R extensively privately and during work. 
I have just discovered the Spatial classes of R and want to use them in
my home project. I want to find the intersections between lines and cut
the lines at those intersections. 
For example: Two lines crossing each other once will result in four new
lines. 

I have searched intensively, but I can't find a simple way of cutting a
(Spatial) line in two. I can make a data.frame out of it, cut it in two
and make two (Spatial) lines again, but that doesn't seem logical.

Is there a simple way to do it?
The gIntersection() between the lines in the example yields two
intersections (int.s1_s2). I would like to have six new lines, each line
being cut in three parts by the points in int.s1_s2.

Thanks for any pointers,
Michiel

library(rgeos)
x1 <- c(3,  4,  6,  8, 10)
y1 <- c(0.23, 0.48, 0.45, 0.08, 0.18)
x2 <- c(1,  2,  6,  7, 10)
y2 <- c(0.27, 0.36, 0.16, 0.30, 0.85) 

#is there also a easier way of doing this?
s1 <- SpatialLines(list(Lines(list(Line(cbind(x1,y1))),ID=1)))
s2 <- SpatialLines(list(Lines(list(Line(cbind(x2,y2))),ID=1)))

int.s1_s2 <- gIntersection(s1,s2)

plot(s1, type="b", col="green", xlim=c(1,10))
lines(s2, type="b", col="blue")
points(int.s1_s2, pch=4, col="black")


From rafael.wueest at wsl.ch  Fri Jan 27 09:25:25 2012
From: rafael.wueest at wsl.ch (=?iso-8859-1?Q?Rafael_W=FCest?=)
Date: Fri, 27 Jan 2012 09:25:25 +0100
Subject: [R-sig-Geo] Coloring Canada provinces in raster
In-Reply-To: <CAN2xGJaQnyY1=mc4yeP9oXnC48s+8+DUovvKf_AtR5A5FCAURg@mail.gmail.com>
References: <CAN2xGJaiSrw7wB7iL-6T8Ae+sQDteDCv3WLZfHtpPeUECTQBEg@mail.gmail.com>
	<CAN2xGJaQnyY1=mc4yeP9oXnC48s+8+DUovvKf_AtR5A5FCAURg@mail.gmail.com>
Message-ID: <290CA34F-3041-42A7-8C8E-313A8E15DBF6@wsl.ch>

Hi Dimitri

you can use the col.regions argument in case groups is a factor:

can2 at data$groups<-as.factor(can2 at data$groups)
spplot(can2,zcol="groups",col.regions=c('red','blue','yellow','lightblue','green','orange'))

Hope this does what you were looking for...

Rafi

On 26.01.2012, at 21:42, Dimitri Liakhovitski wrote:

> Dear map-gurus,
> I've made some progress based on one post I found, but now I am stuck.
> I was able to group Canadian admin units into 6 groups so that each
> group has the same color:
> 
> # Getting the data:
> library(raster)
> can2<-getData('GADM', country="CAN", level=2)
> class(can2)
> 
> # Creating my (artificial) groupings of Canadian admin units:
> nrofunits<-length(can2$NAME_2)
> groups<-c(rep(1:6,(nrofunits %/%
> 6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
> 
> # adding values (grouping values) to "data" and calling this new
> variables "groups"
> can2 at data[["groups"]]<-groups
> 
> # Plotting:
> spplot(can2,"groups")
> 
> Questions that I am still not sure how to address:
> How can I use MY colors instead of the default colors? In fact, I
> don't want heat map, I need 6 separate colors...
> Can I remove the legend from the plot?
> Can I eliminate borders between counties but have borders between
> Canadian Provinces (like in the US example below)?
> I.e., only borders from the plot for can1:
> can1<-getData('GADM', country="CAN", level=1)
> plot(can1)
> 
> Thanks a lot!
> Dimitri
> 
> 
> 
> On Thu, Jan 26, 2012 at 1:14 PM, Dimitri Liakhovitski
> <dimitri.liakhovitski at gmail.com> wrote:
>> Dear R map gurus,
>> I am very new to creating maps in R and have never used "raster"
>> before, so very sorry if it's a simple question.
>> 
>> I am trying to create a map of Canada with small administrative units
>> (counties and the like) colored based on some criterion I set (e.g.,
>> all units that belong to Group 1 get one color, to Group 2 get another
>> color, etc). At the bottom of this e-mail is an example of what I am
>> trying to achieve - but it's for the US (based on coloring US
>> counties) and using "maps". I was not able to find small
>> administrative divisions (like counties) for Canada in "maps", only
>> cities.
>> So, I was referred to "raster". I was able to read in the Canada data
>> at the right administrative level:
>> 
>> library(raster)
>> can2<-getData('GADM', country="CAN", level=2)
>> class(can2)
>> 
>> # "NAME_2" in object "can2" contains exactly the level of
>> administrative detail I need!
>> can2$NAME_2
>> 
>> # and plot and ssplot plot the map with those counties and colors them:
>> plot(can2)     # No colors
>> spplot(can2, "NAME_2")  # colored, but not sure based on what rule +
>> creates a legend
>> 
>> Question:
>> Is it at all possible to color the units in can2$NAME_2 based on their
>> groupings that I create (like in the US example below), and the colors
>> I choose?
>> Is it possible to remove the legend from the plot?
>> Is it possible to have no borders between counties but have borders
>> between Canadian Provinces (like in the US example below)?
>> 
>> Thank you very much for your help!
>> Dimitri Liakhovitski
>> 
>> 
>> ### Example for creating a US map with colored counties using "maps":
>> 
>> # 1. Creating an (ARTIFICIAL) criterion for coloring US counties in
>> only few colors:
>> library(maps)
>> allcounties<-data.frame(county=map('county', plot=FALSE)$names)
>> allcounties$group<-c(rep(1:6,513),rep(1,4))[order(c(rep(1:6,513),rep(1,4)))]
>> ### My colors:
>> mycolors <- rainbow(6)
>> map('county',fill=TRUE,col=mycolors[allcounties$group],resolution=0,lty=0,bg=
>> "transparent")
>> map('state', lwd=1, add=TRUE)     # adding the state borders
> 
> 
> 
> -- 
> Dimitri Liakhovitski
> marketfusionanalytics.com
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo



--
Rafael W?est
Swiss Federal Research Institute WSL
Z?rcherstrasse 111
8903 Birmensdorf
Switzerland

+41 44 7392126
rafael.wueest at wsl.ch
http://www.wsl.ch/info/mitarbeitende/wueest


From antoinelucas at gmail.com  Fri Jan 27 10:55:51 2012
From: antoinelucas at gmail.com (Antoine Lucas)
Date: Fri, 27 Jan 2012 10:55:51 +0100
Subject: [R-sig-Geo] R package to know distances between city [or zipcode]
Message-ID: <CAM98rvSZB6sr9Ktxe3=1J5_jCG+kxJUbxWXnCWZS=PY_n-DrTA@mail.gmail.com>

Dear All,

I have build a small package, that main object is to compute:

1. city names that are close to another city
2. city names that are close to a zipcode

I have two questions:

-------------
a. for now, dataset is french data (zipcode + city + lat,lon): I would
like someting like:

library("mynewpackage")

setDefaultCountry("fr")
getCityNearToZipCode(1234)  => french city list

setDefaultCountry("uk")
getCityNearToZipCode(1234)  => uk city list

for now, there is only one dataset that I use directly in my R functions...

-------------
b. Is this package needed, or is it redunctdant with an existing package ?

Antoine.


From mathieu.rajerison at gmail.com  Fri Jan 27 11:37:12 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Fri, 27 Jan 2012 11:37:12 +0100
Subject: [R-sig-Geo] cut a line at specific point
In-Reply-To: <1327615370.7736.35.camel@marlon-laptop>
References: <1327615370.7736.35.camel@marlon-laptop>
Message-ID: <CAGfc75msSWuUQct64b0herhdZf9M6vmfpmQtidtX4k6zZUY9uQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120127/3a8030fc/attachment.pl>

From mathieu.rajerison at gmail.com  Fri Jan 27 11:40:35 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Fri, 27 Jan 2012 11:40:35 +0100
Subject: [R-sig-Geo] R package to know distances between city [or
	zipcode]
In-Reply-To: <CAM98rvSZB6sr9Ktxe3=1J5_jCG+kxJUbxWXnCWZS=PY_n-DrTA@mail.gmail.com>
References: <CAM98rvSZB6sr9Ktxe3=1J5_jCG+kxJUbxWXnCWZS=PY_n-DrTA@mail.gmail.com>
Message-ID: <CAGfc75ngE8FYM62f354dFSkEegRNehjrygHoG3Dn8FgqtdMTmw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120127/fd50ad8c/attachment.pl>

From Ingo.Holz at uni-hohenheim.de  Fri Jan 27 12:10:41 2012
From: Ingo.Holz at uni-hohenheim.de (Ingo Holz)
Date: Fri, 27 Jan 2012 12:10:41 +0100
Subject: [R-sig-Geo] remove.holes - library(wild1)
Message-ID: <4F229441.11100.E5E564@ingoholz.uni-hohenheim.de>

Hallo,

 I try to use function remove.holes (library wild1) to remove holes from a 
SPDF.

 If test is a SPDF. It works with

 for(i in (1:length(test at polygons))){
	test at polygons[[i]] <- remove.holes(test at polygons[[i]])
	}

 I think there must be a way without a loop. Maybe:

 do.call(remove.holes, test at polygons)

 ???

Best wishes and thank you for your help in advance.
Ingo


From edzer.pebesma at uni-muenster.de  Fri Jan 27 12:44:53 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Fri, 27 Jan 2012 12:44:53 +0100
Subject: [R-sig-Geo] remove.holes - library(wild1)
In-Reply-To: <4F229441.11100.E5E564@ingoholz.uni-hohenheim.de>
References: <4F229441.11100.E5E564@ingoholz.uni-hohenheim.de>
Message-ID: <4F228E35.7080301@uni-muenster.de>

untried:

lapply(test at polygons, remove.holes)

On 01/27/2012 12:10 PM, Ingo Holz wrote:
> Hallo,
> 
>  I try to use function remove.holes (library wild1) to remove holes from a 
> SPDF.
> 
>  If test is a SPDF. It works with
> 
>  for(i in (1:length(test at polygons))){
> 	test at polygons[[i]] <- remove.holes(test at polygons[[i]])
> 	}
> 
>  I think there must be a way without a loop. Maybe:
> 
>  do.call(remove.holes, test at polygons)
> 
>  ???
> 
> Best wishes and thank you for your help in advance.
> Ingo
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From JRadinger at gmx.at  Fri Jan 27 12:46:35 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Fri, 27 Jan 2012 12:46:35 +0100
Subject: [R-sig-Geo] Coordination Transformation from Gauss Kruger to LongLat
Message-ID: <20120127114635.49640@gmx.net>

Dear R-Geo List!

This is my first post on this list as I have a geographical task/problem
to solve. 
I want to perform Species Distribution Models (SDM) and therefore
I have the points of occurence of several Species.
Unforunately all the environmental maps (climatic maps etc.) are in long-lat projection but my points are in the German Gauss Kr?ger System.
So I have to transform the points correctly but I don't know how exactly that works.

I compiled a sample script of what I did so far:

Species <- c("A","B","C")
X_GK <- c(3518665,3523424,3525506)
Y_GK <- c(6052307,6040485,6042275)

df <- data.frame(Species,X_GK,Y_GK) # That's how my occurence points look like


#library(proj4)

# reassemble coordinates as matrix (don't know it that is really necessary
# or if I can work with the orig. dataframe)

coord_GK <- cbind(df$X_GK, df$Y_GK)
coord_longlat <- transform(coord_GK,'+proj=tmerc +ellps=?','+proj=latlong +ellps=sphere') # Here I don't know what I have to specify, or if that method is the one to use?

I am working on R.2.14.1 on Windows and Mac.


Maybe someone of you can help me in this case as I am not a geographer nor a professional R user at all...

Thanks!

best regards,
Johannes Radinger

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...


From matteo.mattiuzzi at boku.ac.at  Fri Jan 27 13:56:33 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Fri, 27 Jan 2012 13:56:33 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F2179E4.3010609@gmail.com>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
	<4F217F4B0200002700012568@gwia2.boku.ac.at>
	<4F2179E4.3010609@gmail.com>
Message-ID: <4F22AD1102000027000125B8@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120127/954656a0/attachment.pl>

From babuawara at gmail.com  Fri Jan 27 16:04:37 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Fri, 27 Jan 2012 16:04:37 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F22AD1102000027000125B8@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
	<4F217F4B0200002700012568@gwia2.boku.ac.at>
	<4F2179E4.3010609@gmail.com>
	<4F22AD1102000027000125B8@gwia2.boku.ac.at>
Message-ID: <4F22BD05.3020804@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120127/338dd68c/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Fri Jan 27 16:33:29 2012
From: matteo.mattiuzzi at boku.ac.at (Matteo Mattiuzzi)
Date: Fri, 27 Jan 2012 16:33:29 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F22BD05.3020804@gmail.com>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
	<4F217F4B0200002700012568@gwia2.boku.ac.at>
	<4F2179E4.3010609@gmail.com>
	<4F22AD1102000027000125B8@gwia2.boku.ac.at>
	<4F22BD05.3020804@gmail.com>
Message-ID: <4F22D1D902000027000125BF@gwia2.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120127/b2dfee77/attachment.pl>

From dimitri.liakhovitski at gmail.com  Fri Jan 27 17:34:35 2012
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Fri, 27 Jan 2012 11:34:35 -0500
Subject: [R-sig-Geo] Coloring Canada provinces in raster
In-Reply-To: <290CA34F-3041-42A7-8C8E-313A8E15DBF6@wsl.ch>
References: <CAN2xGJaiSrw7wB7iL-6T8Ae+sQDteDCv3WLZfHtpPeUECTQBEg@mail.gmail.com>
	<CAN2xGJaQnyY1=mc4yeP9oXnC48s+8+DUovvKf_AtR5A5FCAURg@mail.gmail.com>
	<290CA34F-3041-42A7-8C8E-313A8E15DBF6@wsl.ch>
Message-ID: <CAN2xGJYtD0pJJwExcY=OJq5MPU5145s_tS8-7rOVJDH94xoweg@mail.gmail.com>

Vielen-vielen Dank, Rafael.
A factor!
That does exactly what I wanted! Thanks a million!

Still can't figure out how to get rid of the legend on the right. I
couldn't find the solution here:
http://127.0.0.1:14681/library/sp/html/spplot.html
Or, if it's impossible, maybe one could at least change the order in
the legend (to have 1 at the top and 6 at the bottom)?
Finally- anyone knows how to delete the borders between small
geographic units and only leave borders between provinces?

Thank you very much, everyone for your help!
Dimitri

The working code so far:

library(raster)
can2<-getData('GADM', country="CAN", level=2)
nrofunits<-length(can2$NAME_2)
groups<-c(rep(1:6,(nrofunits %/%
6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
# adding values (grouping values) to "data":
can2 at data[["groups"]]<-groups
can2 at data$groups<-as.factor(can2 at data$groups)
classcolors <- rainbow(6)
spplot(can2,zcol="groups",col.regions=classcolors)



On Fri, Jan 27, 2012 at 3:25 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
> Hi Dimitri
>
> you can use the col.regions argument in case groups is a factor:
>
> can2 at data$groups<-as.factor(can2 at data$groups)
> spplot(can2,zcol="groups",col.regions=c('red','blue','yellow','lightblue','green','orange'))
>
> Hope this does what you were looking for...
>
> Rafi
>
> On 26.01.2012, at 21:42, Dimitri Liakhovitski wrote:
>
>> Dear map-gurus,
>> I've made some progress based on one post I found, but now I am stuck.
>> I was able to group Canadian admin units into 6 groups so that each
>> group has the same color:
>>
>> # Getting the data:
>> library(raster)
>> can2<-getData('GADM', country="CAN", level=2)
>> class(can2)
>>
>> # Creating my (artificial) groupings of Canadian admin units:
>> nrofunits<-length(can2$NAME_2)
>> groups<-c(rep(1:6,(nrofunits %/%
>> 6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
>>
>> # adding values (grouping values) to "data" and calling this new
>> variables "groups"
>> can2 at data[["groups"]]<-groups
>>
>> # Plotting:
>> spplot(can2,"groups")
>>
>> Questions that I am still not sure how to address:
>> How can I use MY colors instead of the default colors? In fact, I
>> don't want heat map, I need 6 separate colors...
>> Can I remove the legend from the plot?
>> Can I eliminate borders between counties but have borders between
>> Canadian Provinces (like in the US example below)?
>> I.e., only borders from the plot for can1:
>> can1<-getData('GADM', country="CAN", level=1)
>> plot(can1)
>>
>> Thanks a lot!
>> Dimitri
>>
>>
>>
>> On Thu, Jan 26, 2012 at 1:14 PM, Dimitri Liakhovitski
>> <dimitri.liakhovitski at gmail.com> wrote:
>>> Dear R map gurus,
>>> I am very new to creating maps in R and have never used "raster"
>>> before, so very sorry if it's a simple question.
>>>
>>> I am trying to create a map of Canada with small administrative units
>>> (counties and the like) colored based on some criterion I set (e.g.,
>>> all units that belong to Group 1 get one color, to Group 2 get another
>>> color, etc). At the bottom of this e-mail is an example of what I am
>>> trying to achieve - but it's for the US (based on coloring US
>>> counties) and using "maps". I was not able to find small
>>> administrative divisions (like counties) for Canada in "maps", only
>>> cities.
>>> So, I was referred to "raster". I was able to read in the Canada data
>>> at the right administrative level:
>>>
>>> library(raster)
>>> can2<-getData('GADM', country="CAN", level=2)
>>> class(can2)
>>>
>>> # "NAME_2" in object "can2" contains exactly the level of
>>> administrative detail I need!
>>> can2$NAME_2
>>>
>>> # and plot and ssplot plot the map with those counties and colors them:
>>> plot(can2) ? ? # No colors
>>> spplot(can2, "NAME_2") ?# colored, but not sure based on what rule +
>>> creates a legend
>>>
>>> Question:
>>> Is it at all possible to color the units in can2$NAME_2 based on their
>>> groupings that I create (like in the US example below), and the colors
>>> I choose?
>>> Is it possible to remove the legend from the plot?
>>> Is it possible to have no borders between counties but have borders
>>> between Canadian Provinces (like in the US example below)?
>>>
>>> Thank you very much for your help!
>>> Dimitri Liakhovitski
>>>
>>>
>>> ### Example for creating a US map with colored counties using "maps":
>>>
>>> # 1. Creating an (ARTIFICIAL) criterion for coloring US counties in
>>> only few colors:
>>> library(maps)
>>> allcounties<-data.frame(county=map('county', plot=FALSE)$names)
>>> allcounties$group<-c(rep(1:6,513),rep(1,4))[order(c(rep(1:6,513),rep(1,4)))]
>>> ### My colors:
>>> mycolors <- rainbow(6)
>>> map('county',fill=TRUE,col=mycolors[allcounties$group],resolution=0,lty=0,bg=
>>> "transparent")
>>> map('state', lwd=1, add=TRUE) ? ? # adding the state borders
>>
>>
>>
>> --
>> Dimitri Liakhovitski
>> marketfusionanalytics.com
>>
>> _______________________________________________
>> R-sig-Geo mailing list
>> R-sig-Geo at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
>
>
> --
> Rafael W?est
> Swiss Federal Research Institute WSL
> Z?rcherstrasse 111
> 8903 Birmensdorf
> Switzerland
>
> +41 44 7392126
> rafael.wueest at wsl.ch
> http://www.wsl.ch/info/mitarbeitende/wueest
>
>
>



-- 
Dimitri Liakhovitski
marketfusionanalytics.com


From dimitri.liakhovitski at gmail.com  Fri Jan 27 18:00:26 2012
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Fri, 27 Jan 2012 12:00:26 -0500
Subject: [R-sig-Geo] Coloring Canada provinces in raster
In-Reply-To: <CAN2xGJYtD0pJJwExcY=OJq5MPU5145s_tS8-7rOVJDH94xoweg@mail.gmail.com>
References: <CAN2xGJaiSrw7wB7iL-6T8Ae+sQDteDCv3WLZfHtpPeUECTQBEg@mail.gmail.com>
	<CAN2xGJaQnyY1=mc4yeP9oXnC48s+8+DUovvKf_AtR5A5FCAURg@mail.gmail.com>
	<290CA34F-3041-42A7-8C8E-313A8E15DBF6@wsl.ch>
	<CAN2xGJYtD0pJJwExcY=OJq5MPU5145s_tS8-7rOVJDH94xoweg@mail.gmail.com>
Message-ID: <CAN2xGJYQ=Jjb6sP0L8mtmEtg42EsP_KoeCeFCivJ6U_mrjEjRA@mail.gmail.com>

I found an important part of the solution - was able to get rid of the legend!

library(raster)
can2<-getData('GADM', country="CAN", level=2)
nrofunits<-length(can2$NAME_2)
groups<-c(rep(1:6,(nrofunits
%/%6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
# adding values (grouping values) to "data":
can2 at data[["groups"]]<-groups
can2 at data$groups<-as.factor(can2 at data$groups)
classcolors <- rainbow(6)
spplot(can2,zcol="groups",col.regions=classcolors,colorkey =
FALSE,par.settings =
    list(axis.line = list(col =  'transparent')))

One last challenge:
Is it possible to delete the black borders between small geographic
units and only leave borders between provinces?
(I need to leave only these borders:
can1<-getData('GADM', country="CAN", level=1
plot(can1)  )
Or maybe one could change the color of the black borders between small
geographic units?

Thanks a lot!
Dimitri

On Fri, Jan 27, 2012 at 11:34 AM, Dimitri Liakhovitski
<dimitri.liakhovitski at gmail.com> wrote:
> Vielen-vielen Dank, Rafael.
> A factor!
> That does exactly what I wanted! Thanks a million!
>
> Still can't figure out how to get rid of the legend on the right. I
> couldn't find the solution here:
> http://127.0.0.1:14681/library/sp/html/spplot.html
> Or, if it's impossible, maybe one could at least change the order in
> the legend (to have 1 at the top and 6 at the bottom)?
> Finally- anyone knows how to delete the borders between small
> geographic units and only leave borders between provinces?
>
> Thank you very much, everyone for your help!
> Dimitri
>
> The working code so far:
>
> library(raster)
> can2<-getData('GADM', country="CAN", level=2)
> nrofunits<-length(can2$NAME_2)
> groups<-c(rep(1:6,(nrofunits %/%
> 6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
> # adding values (grouping values) to "data":
> can2 at data[["groups"]]<-groups
> can2 at data$groups<-as.factor(can2 at data$groups)
> classcolors <- rainbow(6)
> spplot(can2,zcol="groups",col.regions=classcolors)
>
>
>
> On Fri, Jan 27, 2012 at 3:25 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
>> Hi Dimitri
>>
>> you can use the col.regions argument in case groups is a factor:
>>
>> can2 at data$groups<-as.factor(can2 at data$groups)
>> spplot(can2,zcol="groups",col.regions=c('red','blue','yellow','lightblue','green','orange'))
>>
>> Hope this does what you were looking for...
>>
>> Rafi
>>
>> On 26.01.2012, at 21:42, Dimitri Liakhovitski wrote:
>>
>>> Dear map-gurus,
>>> I've made some progress based on one post I found, but now I am stuck.
>>> I was able to group Canadian admin units into 6 groups so that each
>>> group has the same color:
>>>
>>> # Getting the data:
>>> library(raster)
>>> can2<-getData('GADM', country="CAN", level=2)
>>> class(can2)
>>>
>>> # Creating my (artificial) groupings of Canadian admin units:
>>> nrofunits<-length(can2$NAME_2)
>>> groups<-c(rep(1:6,(nrofunits %/%
>>> 6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
>>>
>>> # adding values (grouping values) to "data" and calling this new
>>> variables "groups"
>>> can2 at data[["groups"]]<-groups
>>>
>>> # Plotting:
>>> spplot(can2,"groups")
>>>
>>> Questions that I am still not sure how to address:
>>> How can I use MY colors instead of the default colors? In fact, I
>>> don't want heat map, I need 6 separate colors...
>>> Can I remove the legend from the plot?
>>> Can I eliminate borders between counties but have borders between
>>> Canadian Provinces (like in the US example below)?
>>> I.e., only borders from the plot for can1:
>>> can1<-getData('GADM', country="CAN", level=1)
>>> plot(can1)
>>>
>>> Thanks a lot!
>>> Dimitri
>>>
>>>
>>>
>>> On Thu, Jan 26, 2012 at 1:14 PM, Dimitri Liakhovitski
>>> <dimitri.liakhovitski at gmail.com> wrote:
>>>> Dear R map gurus,
>>>> I am very new to creating maps in R and have never used "raster"
>>>> before, so very sorry if it's a simple question.
>>>>
>>>> I am trying to create a map of Canada with small administrative units
>>>> (counties and the like) colored based on some criterion I set (e.g.,
>>>> all units that belong to Group 1 get one color, to Group 2 get another
>>>> color, etc). At the bottom of this e-mail is an example of what I am
>>>> trying to achieve - but it's for the US (based on coloring US
>>>> counties) and using "maps". I was not able to find small
>>>> administrative divisions (like counties) for Canada in "maps", only
>>>> cities.
>>>> So, I was referred to "raster". I was able to read in the Canada data
>>>> at the right administrative level:
>>>>
>>>> library(raster)
>>>> can2<-getData('GADM', country="CAN", level=2)
>>>> class(can2)
>>>>
>>>> # "NAME_2" in object "can2" contains exactly the level of
>>>> administrative detail I need!
>>>> can2$NAME_2
>>>>
>>>> # and plot and ssplot plot the map with those counties and colors them:
>>>> plot(can2) ? ? # No colors
>>>> spplot(can2, "NAME_2") ?# colored, but not sure based on what rule +
>>>> creates a legend
>>>>
>>>> Question:
>>>> Is it at all possible to color the units in can2$NAME_2 based on their
>>>> groupings that I create (like in the US example below), and the colors
>>>> I choose?
>>>> Is it possible to remove the legend from the plot?
>>>> Is it possible to have no borders between counties but have borders
>>>> between Canadian Provinces (like in the US example below)?
>>>>
>>>> Thank you very much for your help!
>>>> Dimitri Liakhovitski
>>>>
>>>>
>>>> ### Example for creating a US map with colored counties using "maps":
>>>>
>>>> # 1. Creating an (ARTIFICIAL) criterion for coloring US counties in
>>>> only few colors:
>>>> library(maps)
>>>> allcounties<-data.frame(county=map('county', plot=FALSE)$names)
>>>> allcounties$group<-c(rep(1:6,513),rep(1,4))[order(c(rep(1:6,513),rep(1,4)))]
>>>> ### My colors:
>>>> mycolors <- rainbow(6)
>>>> map('county',fill=TRUE,col=mycolors[allcounties$group],resolution=0,lty=0,bg=
>>>> "transparent")
>>>> map('state', lwd=1, add=TRUE) ? ? # adding the state borders
>>>
>>>
>>>
>>> --
>>> Dimitri Liakhovitski
>>> marketfusionanalytics.com
>>>
>>> _______________________________________________
>>> R-sig-Geo mailing list
>>> R-sig-Geo at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>
>>
>>
>> --
>> Rafael W?est
>> Swiss Federal Research Institute WSL
>> Z?rcherstrasse 111
>> 8903 Birmensdorf
>> Switzerland
>>
>> +41 44 7392126
>> rafael.wueest at wsl.ch
>> http://www.wsl.ch/info/mitarbeitende/wueest
>>
>>
>>
>
>
>
> --
> Dimitri Liakhovitski
> marketfusionanalytics.com



-- 
Dimitri Liakhovitski
marketfusionanalytics.com


From dimitri.liakhovitski at gmail.com  Fri Jan 27 18:44:05 2012
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Fri, 27 Jan 2012 12:44:05 -0500
Subject: [R-sig-Geo] Coloring Canada provinces in raster
In-Reply-To: <CAN2xGJYQ=Jjb6sP0L8mtmEtg42EsP_KoeCeFCivJ6U_mrjEjRA@mail.gmail.com>
References: <CAN2xGJaiSrw7wB7iL-6T8Ae+sQDteDCv3WLZfHtpPeUECTQBEg@mail.gmail.com>
	<CAN2xGJaQnyY1=mc4yeP9oXnC48s+8+DUovvKf_AtR5A5FCAURg@mail.gmail.com>
	<290CA34F-3041-42A7-8C8E-313A8E15DBF6@wsl.ch>
	<CAN2xGJYtD0pJJwExcY=OJq5MPU5145s_tS8-7rOVJDH94xoweg@mail.gmail.com>
	<CAN2xGJYQ=Jjb6sP0L8mtmEtg42EsP_KoeCeFCivJ6U_mrjEjRA@mail.gmail.com>
Message-ID: <CAN2xGJZ96sYsGTFUOCOiDmnASVS7UJvaf+F0hXuG98nGm=19wg@mail.gmail.com>

Thanks a lot, everyone - I solved most of my challenges:

the last line of my code should read:
spplot(can2,zcol="groups",col.regions=classcolors,colorkey =
FALSE,lwd=.4,col='white',
  par.settings = list(axis.line = list(col='transparent')))

Thanks a lot for your help!
Dimitri

On Fri, Jan 27, 2012 at 12:00 PM, Dimitri Liakhovitski
<dimitri.liakhovitski at gmail.com> wrote:
> I found an important part of the solution - was able to get rid of the legend!
>
> library(raster)
> can2<-getData('GADM', country="CAN", level=2)
> nrofunits<-length(can2$NAME_2)
> groups<-c(rep(1:6,(nrofunits
> %/%6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
> # adding values (grouping values) to "data":
> can2 at data[["groups"]]<-groups
> can2 at data$groups<-as.factor(can2 at data$groups)
> classcolors <- rainbow(6)
> spplot(can2,zcol="groups",col.regions=classcolors,colorkey =
> FALSE,par.settings =
> ? ?list(axis.line = list(col = ?'transparent')))
>
> One last challenge:
> Is it possible to delete the black borders between small geographic
> units and only leave borders between provinces?
> (I need to leave only these borders:
> can1<-getData('GADM', country="CAN", level=1
> plot(can1) ?)
> Or maybe one could change the color of the black borders between small
> geographic units?
>
> Thanks a lot!
> Dimitri
>
> On Fri, Jan 27, 2012 at 11:34 AM, Dimitri Liakhovitski
> <dimitri.liakhovitski at gmail.com> wrote:
>> Vielen-vielen Dank, Rafael.
>> A factor!
>> That does exactly what I wanted! Thanks a million!
>>
>> Still can't figure out how to get rid of the legend on the right. I
>> couldn't find the solution here:
>> http://127.0.0.1:14681/library/sp/html/spplot.html
>> Or, if it's impossible, maybe one could at least change the order in
>> the legend (to have 1 at the top and 6 at the bottom)?
>> Finally- anyone knows how to delete the borders between small
>> geographic units and only leave borders between provinces?
>>
>> Thank you very much, everyone for your help!
>> Dimitri
>>
>> The working code so far:
>>
>> library(raster)
>> can2<-getData('GADM', country="CAN", level=2)
>> nrofunits<-length(can2$NAME_2)
>> groups<-c(rep(1:6,(nrofunits %/%
>> 6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
>> # adding values (grouping values) to "data":
>> can2 at data[["groups"]]<-groups
>> can2 at data$groups<-as.factor(can2 at data$groups)
>> classcolors <- rainbow(6)
>> spplot(can2,zcol="groups",col.regions=classcolors)
>>
>>
>>
>> On Fri, Jan 27, 2012 at 3:25 AM, Rafael W?est <rafael.wueest at wsl.ch> wrote:
>>> Hi Dimitri
>>>
>>> you can use the col.regions argument in case groups is a factor:
>>>
>>> can2 at data$groups<-as.factor(can2 at data$groups)
>>> spplot(can2,zcol="groups",col.regions=c('red','blue','yellow','lightblue','green','orange'))
>>>
>>> Hope this does what you were looking for...
>>>
>>> Rafi
>>>
>>> On 26.01.2012, at 21:42, Dimitri Liakhovitski wrote:
>>>
>>>> Dear map-gurus,
>>>> I've made some progress based on one post I found, but now I am stuck.
>>>> I was able to group Canadian admin units into 6 groups so that each
>>>> group has the same color:
>>>>
>>>> # Getting the data:
>>>> library(raster)
>>>> can2<-getData('GADM', country="CAN", level=2)
>>>> class(can2)
>>>>
>>>> # Creating my (artificial) groupings of Canadian admin units:
>>>> nrofunits<-length(can2$NAME_2)
>>>> groups<-c(rep(1:6,(nrofunits %/%
>>>> 6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
>>>>
>>>> # adding values (grouping values) to "data" and calling this new
>>>> variables "groups"
>>>> can2 at data[["groups"]]<-groups
>>>>
>>>> # Plotting:
>>>> spplot(can2,"groups")
>>>>
>>>> Questions that I am still not sure how to address:
>>>> How can I use MY colors instead of the default colors? In fact, I
>>>> don't want heat map, I need 6 separate colors...
>>>> Can I remove the legend from the plot?
>>>> Can I eliminate borders between counties but have borders between
>>>> Canadian Provinces (like in the US example below)?
>>>> I.e., only borders from the plot for can1:
>>>> can1<-getData('GADM', country="CAN", level=1)
>>>> plot(can1)
>>>>
>>>> Thanks a lot!
>>>> Dimitri
>>>>
>>>>
>>>>
>>>> On Thu, Jan 26, 2012 at 1:14 PM, Dimitri Liakhovitski
>>>> <dimitri.liakhovitski at gmail.com> wrote:
>>>>> Dear R map gurus,
>>>>> I am very new to creating maps in R and have never used "raster"
>>>>> before, so very sorry if it's a simple question.
>>>>>
>>>>> I am trying to create a map of Canada with small administrative units
>>>>> (counties and the like) colored based on some criterion I set (e.g.,
>>>>> all units that belong to Group 1 get one color, to Group 2 get another
>>>>> color, etc). At the bottom of this e-mail is an example of what I am
>>>>> trying to achieve - but it's for the US (based on coloring US
>>>>> counties) and using "maps". I was not able to find small
>>>>> administrative divisions (like counties) for Canada in "maps", only
>>>>> cities.
>>>>> So, I was referred to "raster". I was able to read in the Canada data
>>>>> at the right administrative level:
>>>>>
>>>>> library(raster)
>>>>> can2<-getData('GADM', country="CAN", level=2)
>>>>> class(can2)
>>>>>
>>>>> # "NAME_2" in object "can2" contains exactly the level of
>>>>> administrative detail I need!
>>>>> can2$NAME_2
>>>>>
>>>>> # and plot and ssplot plot the map with those counties and colors them:
>>>>> plot(can2) ? ? # No colors
>>>>> spplot(can2, "NAME_2") ?# colored, but not sure based on what rule +
>>>>> creates a legend
>>>>>
>>>>> Question:
>>>>> Is it at all possible to color the units in can2$NAME_2 based on their
>>>>> groupings that I create (like in the US example below), and the colors
>>>>> I choose?
>>>>> Is it possible to remove the legend from the plot?
>>>>> Is it possible to have no borders between counties but have borders
>>>>> between Canadian Provinces (like in the US example below)?
>>>>>
>>>>> Thank you very much for your help!
>>>>> Dimitri Liakhovitski
>>>>>
>>>>>
>>>>> ### Example for creating a US map with colored counties using "maps":
>>>>>
>>>>> # 1. Creating an (ARTIFICIAL) criterion for coloring US counties in
>>>>> only few colors:
>>>>> library(maps)
>>>>> allcounties<-data.frame(county=map('county', plot=FALSE)$names)
>>>>> allcounties$group<-c(rep(1:6,513),rep(1,4))[order(c(rep(1:6,513),rep(1,4)))]
>>>>> ### My colors:
>>>>> mycolors <- rainbow(6)
>>>>> map('county',fill=TRUE,col=mycolors[allcounties$group],resolution=0,lty=0,bg=
>>>>> "transparent")
>>>>> map('state', lwd=1, add=TRUE) ? ? # adding the state borders
>>>>
>>>>
>>>>
>>>> --
>>>> Dimitri Liakhovitski
>>>> marketfusionanalytics.com
>>>>
>>>> _______________________________________________
>>>> R-sig-Geo mailing list
>>>> R-sig-Geo at r-project.org
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>>>
>>>
>>>
>>> --
>>> Rafael W?est
>>> Swiss Federal Research Institute WSL
>>> Z?rcherstrasse 111
>>> 8903 Birmensdorf
>>> Switzerland
>>>
>>> +41 44 7392126
>>> rafael.wueest at wsl.ch
>>> http://www.wsl.ch/info/mitarbeitende/wueest
>>>
>>>
>>>
>>
>>
>>
>> --
>> Dimitri Liakhovitski
>> marketfusionanalytics.com
>
>
>
> --
> Dimitri Liakhovitski
> marketfusionanalytics.com



-- 
Dimitri Liakhovitski
marketfusionanalytics.com


From dimitri.liakhovitski at gmail.com  Fri Jan 27 18:51:23 2012
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Fri, 27 Jan 2012 12:51:23 -0500
Subject: [R-sig-Geo] Overimposing one map in ssplot onto another
In-Reply-To: <CAN2xGJa8vOBds05OZwYCmj1m=4qNi9e+r71z5emsKavwK8qyHQ@mail.gmail.com>
References: <CAN2xGJa8vOBds05OZwYCmj1m=4qNi9e+r71z5emsKavwK8qyHQ@mail.gmail.com>
Message-ID: <CAN2xGJYn0W=Nys-7NzDtRceJ=dSYWsGj4uM3V=XyVsSecAD9sA@mail.gmail.com>

Hello!

I have 2 maps - both created in ssplot and both identical in terms of
outline. Is there any way to superimpose Map1 (which has black borders
between Canadian provinces) onto Map2 (which is also a map of Canada)?
Thanks a lot for your hints!
Dimitri

### A. Reading in Canada data at the province and then at the county level:
library(raster)
getData('ISO3') ?# Canada's code is "CAN"
can1<-getData('GADM', country="CAN", level=1)
can2<-getData('GADM', country="CAN", level=2)

### B. Creating Map1- with borders between provinces:
can1 at data[["groups"]]<-1 ? # want all provinces to have the same
color, but ideally I'd like the whole map to be transparent.
can1 at data$groups<-as.factor(can1 at data$groups)
spplot(can1,zcol="groups",col.regions="white",colorkey = FALSE,
lwd=.4, ?# col='white',
?par.settings = list(axis.line = list(col='transparent')))

### C. Creating Map2- with borders between colored counties:
# Creating an (artificial) grouping of Canadian admin units:
nrofunits<-length(can2$NAME_2)
groups<-c(rep(1:6,(nrofunits %/%
6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
# adding values (grouping values) to "data":
can2 at data[["groups"]]<-groups
can2 at data$groups<-as.factor(can2 at data$groups)
classcolors <- rainbow(6)
spplot(can2,zcol="groups",col.regions=classcolors,colorkey =
FALSE,lwd=.4,col='white',
?par.settings = list(axis.line = list(col='transparent')))

--
Dimitri Liakhovitski
marketfusionanalytics.com


-- 
Dimitri Liakhovitski
marketfusionanalytics.com


From Roger.Bivand at nhh.no  Sat Jan 28 13:29:47 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 28 Jan 2012 13:29:47 +0100 (CET)
Subject: [R-sig-Geo] Overimposing one map in ssplot onto another
In-Reply-To: <CAN2xGJYn0W=Nys-7NzDtRceJ=dSYWsGj4uM3V=XyVsSecAD9sA@mail.gmail.com>
References: <CAN2xGJa8vOBds05OZwYCmj1m=4qNi9e+r71z5emsKavwK8qyHQ@mail.gmail.com>
	<CAN2xGJYn0W=Nys-7NzDtRceJ=dSYWsGj4uM3V=XyVsSecAD9sA@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1201281326030.26205@reclus.nhh.no>

On Fri, 27 Jan 2012, Dimitri Liakhovitski wrote:

> Hello!
>
> I have 2 maps - both created in ssplot and both identical in terms of
> outline. Is there any way to superimpose Map1 (which has black borders
> between Canadian provinces) onto Map2 (which is also a map of Canada)?
> Thanks a lot for your hints!

See the sp.layout= argument to spplot() - here:

spl <- list("sp.lines", as(can1, "SpatialLines"), lwd=0.4)

should give what you need, as lines plot over polygons, but not the 
opposite.

Roger

> Dimitri
>
> ### A. Reading in Canada data at the province and then at the county level:
> library(raster)
> getData('ISO3') ?# Canada's code is "CAN"
> can1<-getData('GADM', country="CAN", level=1)
> can2<-getData('GADM', country="CAN", level=2)
>
> ### B. Creating Map1- with borders between provinces:
> can1 at data[["groups"]]<-1 ? # want all provinces to have the same
> color, but ideally I'd like the whole map to be transparent.
> can1 at data$groups<-as.factor(can1 at data$groups)
> spplot(can1,zcol="groups",col.regions="white",colorkey = FALSE,
> lwd=.4, ?# col='white',
> ?par.settings = list(axis.line = list(col='transparent')))
>
> ### C. Creating Map2- with borders between colored counties:
> # Creating an (artificial) grouping of Canadian admin units:
> nrofunits<-length(can2$NAME_2)
> groups<-c(rep(1:6,(nrofunits %/%
> 6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
> # adding values (grouping values) to "data":
> can2 at data[["groups"]]<-groups
> can2 at data$groups<-as.factor(can2 at data$groups)
> classcolors <- rainbow(6)
> spplot(can2,zcol="groups",col.regions=classcolors,colorkey =
> FALSE,lwd=.4,col='white',
> ?par.settings = list(axis.line = list(col='transparent')))
>
> --
> Dimitri Liakhovitski
> marketfusionanalytics.com
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From villers.alexandre at gmail.com  Sat Jan 28 19:10:00 2012
From: villers.alexandre at gmail.com (Alexandre Villers)
Date: Sat, 28 Jan 2012 20:10:00 +0200
Subject: [R-sig-Geo] simulating landscape
Message-ID: <4F2439F8.6060503@gmail.com>

Dear list,

I would like to simulate a landscape composed of 5-10 different habitat 
classes, with 2 or 3 classes displaying spatial clustering. I couldn't 
find any implemented function (if there is any) and was wondering if 
someone could suggest an elegant way of doing it. I was thinking of 
using GaussRF from RandomFields package for the clustered classes (using 
a minimum threshold) and then attribute the remaining pixels a given 
class randomly... Any other idea ?

Best regards

Alex


From alobolistas at gmail.com  Sat Jan 28 19:30:57 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sat, 28 Jan 2012 19:30:57 +0100
Subject: [R-sig-Geo] Different result from sptransform() and ptransform()
Message-ID: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>

Hi!
I'm reprojecting and get different results from sptransform() than
from ptransform():
(objec cents in https://sites.google.com/site/filestemp2/home/cents.rda)

> str(cents,max.level=2)
Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame':	234 obs. of  4 variables:
  ..@ coords.nrs : num(0)
  ..@ coords     : num [1:234, 1:2] 3603500 3604500 3605500 3606500 3607500 ...
  .. ..- attr(*, "dimnames")=List of 2
  ..@ bbox       : num [1:2, 1:2] 3603500 2155500 3620500 2167500
  .. ..- attr(*, "dimnames")=List of 2
  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots

> proj4string(cents)
[1] " +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
+y_0=3210000 +ellps=GRS80 +units=m +no_defs"
> centslonlat <- spTransform(cents,CRS("+init=epsg:4326"))
> coordinates(centslonlat)[1:3,]
            X        Y
[1,] 1.315311 42.23956
[2,] 1.327326 42.24060
[3,] 1.339342 42.24163

> a <- ptransform(data = as.data.frame(coordinates(grid1km)), src.proj = CRSargs(CRS("+init=epsg:3035")), dst.proj = CRSargs(CRS("+init=epsg:4326")))
> coordinates(a)[1:3,]
              x         y z
[1,] 0.02295650 0.7372194 0
[2,] 0.02316621 0.7372375 0
[3,] 0.02337593 0.7372556 0

The correct results are those from sptransform(), but I would like to
know what I'm doing wrong with ptansform()

Thanks

Agus


From antoinelucas at gmail.com  Sat Jan 28 19:51:55 2012
From: antoinelucas at gmail.com (Antoine Lucas)
Date: Sat, 28 Jan 2012 19:51:55 +0100
Subject: [R-sig-Geo] New package "geotools"
Message-ID: <CAM98rvS5CEWkh_KRqONXD=8A9enagFdRimy7sGGRpuQZ9hKX0g@mail.gmail.com>

Dear All,

I have upload a new package "geotools", that main purpose is to
propose functions to get distance between cities, with city name or
postal code (usage: shipment).

For now: there is only the french cities dataset.

An example:
Return all postal code at 7 kms from Paris:
codesNearToCode(zipCode("Paris"),7)


Regards,

Antoine Lucas.


From rhurlin at gwdg.de  Sat Jan 28 19:55:40 2012
From: rhurlin at gwdg.de (Rainer Hurling)
Date: Sat, 28 Jan 2012 19:55:40 +0100
Subject: [R-sig-Geo] Different result from sptransform() and ptransform()
In-Reply-To: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
References: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
Message-ID: <4F2444AC.7010300@gwdg.de>

On 28.01.2012 19:30 (UTC+1), Agustin Lobo wrote:
> Hi!
> I'm reprojecting and get different results from sptransform() than
> from ptransform():
> (objec cents in https://sites.google.com/site/filestemp2/home/cents.rda)
>
>> str(cents,max.level=2)
> Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
>    ..@ data       :'data.frame':	234 obs. of  4 variables:
>    ..@ coords.nrs : num(0)
>    ..@ coords     : num [1:234, 1:2] 3603500 3604500 3605500 3606500 3607500 ...
>    .. ..- attr(*, "dimnames")=List of 2
>    ..@ bbox       : num [1:2, 1:2] 3603500 2155500 3620500 2167500
>    .. ..- attr(*, "dimnames")=List of 2
>    ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>
>> proj4string(cents)
> [1] " +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
> +y_0=3210000 +ellps=GRS80 +units=m +no_defs"
>> centslonlat<- spTransform(cents,CRS("+init=epsg:4326"))
>> coordinates(centslonlat)[1:3,]
>              X        Y
> [1,] 1.315311 42.23956
> [2,] 1.327326 42.24060
> [3,] 1.339342 42.24163
>
>> a<- ptransform(data = as.data.frame(coordinates(grid1km)), src.proj = CRSargs(CRS("+init=epsg:3035")), dst.proj = CRSargs(CRS("+init=epsg:4326")))

Hmm, grid1km is not known here until now?

Greetings,
Rainer

>> coordinates(a)[1:3,]
>                x         y z
> [1,] 0.02295650 0.7372194 0
> [2,] 0.02316621 0.7372375 0
> [3,] 0.02337593 0.7372556 0
>
> The correct results are those from sptransform(), but I would like to
> know what I'm doing wrong with ptansform()
>
> Thanks
>
> Agus


From alobolistas at gmail.com  Sat Jan 28 20:42:11 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sat, 28 Jan 2012 20:42:11 +0100
Subject: [R-sig-Geo] Different result from sptransform() and ptransform()
In-Reply-To: <4F2444AC.7010300@gwdg.de>
References: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
	<4F2444AC.7010300@gwdg.de>
Message-ID: <CAG4NReJsqZgtEVob3M5QitPLEtRo1voLpWJGXZVYBbMk3RFkRQ@mail.gmail.com>

Right, grid1km is the polygon object from whence cents comes from and
I copied the wrong line.
Sorry for the confusion.
The part with ptransform() should be:

> a <- ptransform(data = coordinates(cents), src.proj = CRSargs(CRS("+init=epsg:3035")), dst.proj = CRSargs(CRS("+init=epsg:4326")))
> coordinates(cents)[1:3,]
           X       Y
[1,] 3603500 2167500
[2,] 3604500 2167500
[3,] 3605500 2167500
> a[1:3,]
           [,1]      [,2] [,3]
[1,] 0.02295650 0.7372194    0
[2,] 0.02316621 0.7372375    0
[3,] 0.02337593 0.7372556    0

Agus

2012/1/28 Rainer Hurling <rhurlin at gwdg.de>:
> On 28.01.2012 19:30 (UTC+1), Agustin Lobo wrote:
>>
>> Hi!
>> I'm reprojecting and get different results from sptransform() than
>> from ptransform():
>> (objec cents in https://sites.google.com/site/filestemp2/home/cents.rda)
>>
>>> str(cents,max.level=2)
>>
>> Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
>> ? ..@ data ? ? ? :'data.frame': ? ? ? ?234 obs. of ?4 variables:
>> ? ..@ coords.nrs : num(0)
>> ? ..@ coords ? ? : num [1:234, 1:2] 3603500 3604500 3605500 3606500
>> 3607500 ...
>> ? .. ..- attr(*, "dimnames")=List of 2
>> ? ..@ bbox ? ? ? : num [1:2, 1:2] 3603500 2155500 3620500 2167500
>> ? .. ..- attr(*, "dimnames")=List of 2
>> ? ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>>
>>> proj4string(cents)
>>
>> [1] " +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
>> +y_0=3210000 +ellps=GRS80 +units=m +no_defs"
>>>
>>> centslonlat<- spTransform(cents,CRS("+init=epsg:4326"))
>>> coordinates(centslonlat)[1:3,]
>>
>> ? ? ? ? ? ? X ? ? ? ?Y
>> [1,] 1.315311 42.23956
>> [2,] 1.327326 42.24060
>> [3,] 1.339342 42.24163
>>
>>> a<- ptransform(data = as.data.frame(coordinates(grid1km)), src.proj =
>>> CRSargs(CRS("+init=epsg:3035")), dst.proj = CRSargs(CRS("+init=epsg:4326")))
>
>
> Hmm, grid1km is not known here until now?
>
> Greetings,
> Rainer
>
>
>>> coordinates(a)[1:3,]
>>
>> ? ? ? ? ? ? ? x ? ? ? ? y z
>> [1,] 0.02295650 0.7372194 0
>> [2,] 0.02316621 0.7372375 0
>> [3,] 0.02337593 0.7372556 0
>>
>> The correct results are those from sptransform(), but I would like to
>> know what I'm doing wrong with ptansform()
>>
>> Thanks
>>
>> Agus
>
>


From fabriciovasselai at gmail.com  Sat Jan 28 22:10:14 2012
From: fabriciovasselai at gmail.com (Fabricio Vasselai)
Date: Sat, 28 Jan 2012 19:10:14 -0200
Subject: [R-sig-Geo] N-order adjacency spatial weighted matrix from a
 polygonal shape file whithin R
Message-ID: <CAEkXS9JYzne-TQd9uUbk=AgoWj3LsOJdsQAeeen_dGbVWiSosQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120128/8d9fd810/attachment.pl>

From dbprovete at gmail.com  Sat Jan 28 22:49:42 2012
From: dbprovete at gmail.com (Diogo B. Provete)
Date: Sat, 28 Jan 2012 19:49:42 -0200
Subject: [R-sig-Geo] Error in packfor
Message-ID: <CALJB7JSNR_LarPe_D1onAYim-m39WjO0_D=xjBhuhoM5_Mz7JQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120128/9ae587d3/attachment.pl>

From juta.kawalerowicz at stx.ox.ac.uk  Sat Jan 28 23:08:51 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Sat, 28 Jan 2012 22:08:51 +0000
Subject: [R-sig-Geo] N-order adjacency spatial weighted matrix from a
 polygonal shape file whithin R
In-Reply-To: <CAEkXS9JYzne-TQd9uUbk=AgoWj3LsOJdsQAeeen_dGbVWiSosQ@mail.gmail.com>
References: <CAEkXS9JYzne-TQd9uUbk=AgoWj3LsOJdsQAeeen_dGbVWiSosQ@mail.gmail.com>
Message-ID: <4F2471F3.30801@stx.ox.ac.uk>

Fabricio,

Have you checked nblag() in spdep? Follow the example in documentation 
and you will see that when you plot the neighbourhood list on spatial 
polygons the n-th order will be under col.lags[[n]]

then if you want both cumulate it with nblag_cumul() and convert to 
spatial weights with nb2listw()

Juta


On 28/01/2012 21:10, Fabricio Vasselai wrote:
> Dears,
>
> Although I am formaly new to this mailing list, for months I've been
> reading lots of threads here both on handling shape files and on making
> different adjacency spatial weighted matrices. But I still keep wondering
> and trying if is it possible to: 1) make n-order adjacency matrix from a
> poly shape file directly whithin R (queen or rook types); 2) customize the
> weights that each {1...n} order would be assigned.
>
> Of course it is possible to handle a first order adjacecy matrix trough the
> poly2nb command of spdep, but I did not realize yet how to properly do
> n-order adjacency without using GeoDa or ArcGIS.
> Maybe I am missing something of spdep in here?
>
> Best,
>
> Fabricio
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From e.jahanshiri at gmail.com  Sun Jan 29 12:15:03 2012
From: e.jahanshiri at gmail.com (Ebrahim Jahanshiri)
Date: Sun, 29 Jan 2012 19:15:03 +0800
Subject: [R-sig-Geo] R-sig-Geo Digest, Vol 101, Issue 28
In-Reply-To: <mailman.7.1327834803.1081.r-sig-geo@r-project.org>
References: <mailman.7.1327834803.1081.r-sig-geo@r-project.org>
Message-ID: <CANCB45vxYyf7h7FjHAGzgwvCT2O+GY8yaV_u97gtANcZ-PDN-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120129/222f8229/attachment.pl>

From Roger.Bivand at nhh.no  Sun Jan 29 19:54:14 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 29 Jan 2012 19:54:14 +0100 (CET)
Subject: [R-sig-Geo] Different result from sptransform() and ptransform()
In-Reply-To: <CAG4NReJsqZgtEVob3M5QitPLEtRo1voLpWJGXZVYBbMk3RFkRQ@mail.gmail.com>
References: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
	<4F2444AC.7010300@gwdg.de>
	<CAG4NReJsqZgtEVob3M5QitPLEtRo1voLpWJGXZVYBbMk3RFkRQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1201291946140.32011@reclus.nhh.no>

On Sat, 28 Jan 2012, Agustin Lobo wrote:

> Right, grid1km is the polygon object from whence cents comes from and
> I copied the wrong line.
> Sorry for the confusion.

The confusion is in proj4 in the ptransform() function, as:

> centslonlat<- spTransform(cents,CRS("+init=epsg:4326"))
> coordinates(centslonlat)[1:3,]
             X        Y
[1,] 1.315311 42.23956
[2,] 1.327326 42.24060
[3,] 1.339342 42.24163
> ptransform(data = coordinates(cents),
  src.proj = CRSargs(CRS("+init=epsg:3035")),
  dst.proj = "+proj=longlat +ellps=WGS84 +datum=WGS84"
  )[1:3,]*57.29577951308232
          [,1]     [,2] [,3]
[1,] 1.315311 42.23956    0
[2,] 1.327326 42.24060    0
[3,] 1.339342 42.24163    0

ptransform() omits to test for geographical coordinates in the dst.proj= 
argument, and consequently does not multiply by RAD_TO_DEG. The correct 
code is in rgdal/src/projectit.cpp, from line 255. ptransform() is more 
recent than project() in proj4, so the fact that it isn't the same (either 
source or destination as longlat) got overlooked.

Hope this clarifies,

Roger

> The part with ptransform() should be:
>
>> a <- ptransform(data = coordinates(cents), src.proj = CRSargs(CRS("+init=epsg:3035")), dst.proj = CRSargs(CRS("+init=epsg:4326")))
>> coordinates(cents)[1:3,]
>           X       Y
> [1,] 3603500 2167500
> [2,] 3604500 2167500
> [3,] 3605500 2167500
>> a[1:3,]
>           [,1]      [,2] [,3]
> [1,] 0.02295650 0.7372194    0
> [2,] 0.02316621 0.7372375    0
> [3,] 0.02337593 0.7372556    0
>
> Agus
>
> 2012/1/28 Rainer Hurling <rhurlin at gwdg.de>:
>> On 28.01.2012 19:30 (UTC+1), Agustin Lobo wrote:
>>>
>>> Hi!
>>> I'm reprojecting and get different results from sptransform() than
>>> from ptransform():
>>> (objec cents in https://sites.google.com/site/filestemp2/home/cents.rda)
>>>
>>>> str(cents,max.level=2)
>>>
>>> Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
>>> ? ..@ data ? ? ? :'data.frame': ? ? ? ?234 obs. of ?4 variables:
>>> ? ..@ coords.nrs : num(0)
>>> ? ..@ coords ? ? : num [1:234, 1:2] 3603500 3604500 3605500 3606500
>>> 3607500 ...
>>> ? .. ..- attr(*, "dimnames")=List of 2
>>> ? ..@ bbox ? ? ? : num [1:2, 1:2] 3603500 2155500 3620500 2167500
>>> ? .. ..- attr(*, "dimnames")=List of 2
>>> ? ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
>>>
>>>> proj4string(cents)
>>>
>>> [1] " +init=epsg:3035 +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
>>> +y_0=3210000 +ellps=GRS80 +units=m +no_defs"
>>>>
>>>> centslonlat<- spTransform(cents,CRS("+init=epsg:4326"))
>>>> coordinates(centslonlat)[1:3,]
>>>
>>> ? ? ? ? ? ? X ? ? ? ?Y
>>> [1,] 1.315311 42.23956
>>> [2,] 1.327326 42.24060
>>> [3,] 1.339342 42.24163
>>>
>>>> a<- ptransform(data = as.data.frame(coordinates(grid1km)), src.proj =
>>>> CRSargs(CRS("+init=epsg:3035")), dst.proj = CRSargs(CRS("+init=epsg:4326")))
>>
>>
>> Hmm, grid1km is not known here until now?
>>
>> Greetings,
>> Rainer
>>
>>
>>>> coordinates(a)[1:3,]
>>>
>>> ? ? ? ? ? ? ? x ? ? ? ? y z
>>> [1,] 0.02295650 0.7372194 0
>>> [2,] 0.02316621 0.7372375 0
>>> [3,] 0.02337593 0.7372556 0
>>>
>>> The correct results are those from sptransform(), but I would like to
>>> know what I'm doing wrong with ptansform()
>>>
>>> Thanks
>>>
>>> Agus
>>
>>
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no

From juta.kawalerowicz at stx.ox.ac.uk  Mon Jan 30 03:06:54 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Mon, 30 Jan 2012 02:06:54 +0000
Subject: [R-sig-Geo] Interpolating from SpatialPointsDataFrame - estimates
 for new boundaries
In-Reply-To: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
References: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
Message-ID: <4F25FB3E.9040600@stx.ox.ac.uk>

Dear List,

I have the following problem, maybe someone can suggest how to proceed.

I have a SpatialPointsDataFrame for United Kindgdom districts in 2001 
and 1971, both containing number of people in each polygon. I would like 
to calculate population growth between 1971 and 2001. My idea was to use 
Chris Briunsdon's pycnophylactic interpolation package pycno (softens 
the sharp changes at block boundaries) for 1971 and then to get 
estimates of 1971 population but within 2001 boundaries (there is a 
function estimate.pycno which for this in pycno package). It worked 
nicely, but my estimates are a bit strange (i.e do not support a 
hypothesis which I strongly expected to be supported...) and I just 
wondered if I could cross-validate using some other method. How would 
you approach? Is Kriging a way to go?

Thanks,
Juta


From juta.kawalerowicz at stx.ox.ac.uk  Mon Jan 30 03:12:39 2012
From: juta.kawalerowicz at stx.ox.ac.uk (Juta Kawalerowicz)
Date: Mon, 30 Jan 2012 02:12:39 +0000
Subject: [R-sig-Geo] Interpolating from SpatialPointsDataFrame - estimates
 for new boundaries
Message-ID: <4F25FC97.5090504@stx.ox.ac.uk>

Dear List,

I have the following problem, maybe someone can suggest how to proceed.

I have a SpatialPointsDataFrame for United Kindgdom districts in 2001
and 1971, both containing number of people in each polygon. I would like
to calculate population growth between 1971 and 2001. My idea was to use
Chris Briunsdon's pycnophylactic interpolation package pycno (softens
the sharp changes at block boundaries) for 1971 and then to get
estimates of 1971 population but within 2001 boundaries (there is a
function estimate.pycno which for this in pycno package). It worked
nicely, but my estimates are a bit strange (i.e do not support a
hypothesis which I strongly expected to be supported...) and I just
wondered if I could cross-validate using some other method. How would
you approach? Is Kriging a way to go?

Thanks,
Juta


From alobolistas at gmail.com  Mon Jan 30 09:48:55 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon, 30 Jan 2012 09:48:55 +0100
Subject: [R-sig-Geo] Different result from sptransform() and ptransform()
In-Reply-To: <alpine.LRH.2.02.1201291946140.32011@reclus.nhh.no>
References: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
	<4F2444AC.7010300@gwdg.de>
	<CAG4NReJsqZgtEVob3M5QitPLEtRo1voLpWJGXZVYBbMk3RFkRQ@mail.gmail.com>
	<alpine.LRH.2.02.1201291946140.32011@reclus.nhh.no>
Message-ID: <CAG4NReLNe1J9t=XBUot3ZMVdtS8-4dRT3wDt2qBOd0LUAxEXbA@mail.gmail.com>

Roger,
While the explanation of the error is clear, I am actually not sure
about the practical consequences.
What I understand is that we must not use ptransform() by now (and use
spTransform() instead), and
that ptransform() will be fixed in the future. Am I right?

Thanks

Agus


2012/1/29 Roger Bivand <Roger.Bivand at nhh.no>:
> On Sat, 28 Jan 2012, Agustin Lobo wrote:
>
>> Right, grid1km is the polygon object from whence cents comes from and
>> I copied the wrong line.
>> Sorry for the confusion.
>
>
> The confusion is in proj4 in the ptransform() function, as:
>
>
>> centslonlat<- spTransform(cents,CRS("+init=epsg:4326"))
>> coordinates(centslonlat)[1:3,]
>
> ? ? ? ? ? ?X ? ? ? ?Y
> [1,] 1.315311 42.23956
> [2,] 1.327326 42.24060
> [3,] 1.339342 42.24163
>>
>> ptransform(data = coordinates(cents),
>
> ?src.proj = CRSargs(CRS("+init=epsg:3035")),
> ?dst.proj = "+proj=longlat +ellps=WGS84 +datum=WGS84"
> ?)[1:3,]*57.29577951308232
> ? ? ? ? [,1] ? ? [,2] [,3]
> [1,] 1.315311 42.23956 ? ?0
> [2,] 1.327326 42.24060 ? ?0
> [3,] 1.339342 42.24163 ? ?0
>
> ptransform() omits to test for geographical coordinates in the dst.proj=
> argument, and consequently does not multiply by RAD_TO_DEG. The correct code
> is in rgdal/src/projectit.cpp, from line 255. ptransform() is more recent
> than project() in proj4, so the fact that it isn't the same (either source
> or destination as longlat) got overlooked.
>
> Hope this clarifies,
>
> Roger
>


From b.rowlingson at lancaster.ac.uk  Mon Jan 30 10:56:05 2012
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 30 Jan 2012 09:56:05 +0000
Subject: [R-sig-Geo] Interpolating from SpatialPointsDataFrame -
 estimates for new boundaries
In-Reply-To: <4F25FB3E.9040600@stx.ox.ac.uk>
References: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
	<4F25FB3E.9040600@stx.ox.ac.uk>
Message-ID: <CANVKczOyun+r6=q=Gy+oXtsvpL9zShubAD3nU-=YcDw-Vbb1Pg@mail.gmail.com>

On Mon, Jan 30, 2012 at 2:06 AM, Juta Kawalerowicz
<juta.kawalerowicz at stx.ox.ac.uk> wrote:
> Dear List,
>
> I have the following problem, maybe someone can suggest how to proceed.
>
> I have a SpatialPointsDataFrame for United Kindgdom districts in 2001 and
> 1971, both containing number of people in each polygon.

 SpatialPointsDataFrame or SpatialPolygonsDataFrame?

 I would create a test set of a few polygons and see if what you get
is what you expect on that scale. It can be hard to tell what is going
on with hundreds of overlapping polygons. Start with something small,
see if that behaves, then gradually make your tests more similar to
your possibly failing example until it breaks.

 Not a lot we can do without some data to try it on ourselves!

Barry


From babuawara at gmail.com  Mon Jan 30 13:06:33 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Mon, 30 Jan 2012 13:06:33 +0100
Subject: [R-sig-Geo] Antw: Re:  HDF format
In-Reply-To: <4F22D1D902000027000125BF@gwia2.boku.ac.at>
References: <4F2139110200002700012501@gwia2.boku.ac.at>
	<4F215B69.8020603@gmail.com>
	<4F21706A0200002700012544@gwia2.boku.ac.at>
	<4F216710.1060809@gmail.com>
	<4F2177030200002700012551@gwia2.boku.ac.at>
	<4F217F4B0200002700012568@gwia2.boku.ac.at>
	<4F2179E4.3010609@gmail.com>
	<4F22AD1102000027000125B8@gwia2.boku.ac.at>
	<4F22BD05.3020804@gmail.com>
	<4F22D1D902000027000125BF@gwia2.boku.ac.at>
Message-ID: <4F2687C9.7060506@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120130/402ba74c/attachment.pl>

From max.reinwand at googlemail.com  Mon Jan 30 13:12:57 2012
From: max.reinwand at googlemail.com (Maximilian Reinwand)
Date: Mon, 30 Jan 2012 13:12:57 +0100
Subject: [R-sig-Geo] problem with plotting .pngs with the rasterVis package
Message-ID: <CAMn_rTZ_nQGLh7tXvFnVm=RhEvs3NXXGVmnbc8cdC20qamKLCg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120130/b7798539/attachment.pl>

From matteo.mattiuzzi at boku.ac.at  Mon Jan 30 13:29:06 2012
From: matteo.mattiuzzi at boku.ac.at (=?utf-8?B?TWF0dGVvIE1hdHRpdXp6aQ==?=)
Date: Mon, 30 Jan 2012 13:29:06 +0100
Subject: [R-sig-Geo] =?utf-8?q?Antw=2E=3A_Antw=3A_Re=3A__HDF_format?=
Message-ID: <a5d7f0$2pksue@ironport01-smtpauth.boku.ac.at>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120130/870ac426/attachment.pl>

From JRadinger at gmx.at  Mon Jan 30 13:30:45 2012
From: JRadinger at gmx.at (Johannes Radinger)
Date: Mon, 30 Jan 2012 13:30:45 +0100
Subject: [R-sig-Geo] Coordination Transformation from Gauss Kruger to
 LongLat
In-Reply-To: <20120127114635.49640@gmx.net>
References: <20120127114635.49640@gmx.net>
Message-ID: <20120130123045.84070@gmx.net>

Dear List,

due to recent mails on this list about sptransform and ptransform
and the different packages proj4 and gdal I found the solution.
As I am new in this field of R and Geo-data I got confused by these
two packages proj4 and gdal.

For me the gdal package seems to be the right one.
Here my successful code and I am really happy so far as it works:

# Creating data
Species <- c("A","B","C")
X_GK <- c(3518665,3523424,3525506)
Y_GK <- c(6052307,6040485,6042275)
df <- data.frame(Species,X_GK,Y_GK)

#Spatial Information, Coordinates Transform
coordinates(df) <- c("X_GK", "Y_GK")
proj4string(df) <- CRS("+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel +datum=potsdam +units=m +no_defs") # Defining Gauss Kr?ger
df.WGS84 <- spTransform(df, CRS("+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0")) # tranforming to WGS84 longlat



best regards,
Johannes


-------- Original-Nachricht --------
> Datum: Fri, 27 Jan 2012 12:46:35 +0100
> Von: "Johannes Radinger" <JRadinger at gmx.at>
> An: r-sig-geo at r-project.org
> Betreff: [R-sig-Geo] Coordination Transformation from Gauss Kruger to LongLat

> Dear R-Geo List!
> 
> This is my first post on this list as I have a geographical task/problem
> to solve. 
> I want to perform Species Distribution Models (SDM) and therefore
> I have the points of occurence of several Species.
> Unforunately all the environmental maps (climatic maps etc.) are in
> long-lat projection but my points are in the German Gauss Kr?ger System.
> So I have to transform the points correctly but I don't know how exactly
> that works.
> 
> I compiled a sample script of what I did so far:
> 
> Species <- c("A","B","C")
> X_GK <- c(3518665,3523424,3525506)
> Y_GK <- c(6052307,6040485,6042275)
> 
> df <- data.frame(Species,X_GK,Y_GK) # That's how my occurence points look
> like
> 
> 
> #library(proj4)
> 
> # reassemble coordinates as matrix (don't know it that is really necessary
> # or if I can work with the orig. dataframe)
> 
> coord_GK <- cbind(df$X_GK, df$Y_GK)
> coord_longlat <- transform(coord_GK,'+proj=tmerc +ellps=?','+proj=latlong
> +ellps=sphere') # Here I don't know what I have to specify, or if that
> method is the one to use?
> 
> I am working on R.2.14.1 on Windows and Mac.
> 
> 
> Maybe someone of you can help me in this case as I am not a geographer nor
> a professional R user at all...
> 
> Thanks!
> 
> best regards,
> Johannes Radinger
> 
> -- 
> "Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Ihr GMX Postfach immer dabei: die kostenlose GMX Mail App f?r Android.
Komfortabel, sicher und schnell: www.gmx.de/android


From oscar.perpinan at upm.es  Mon Jan 30 13:41:37 2012
From: oscar.perpinan at upm.es (Oscar =?UTF-8?B?UGVycGnDsWFu?= Lamigueiro)
Date: Mon, 30 Jan 2012 13:41:37 +0100
Subject: [R-sig-Geo] problem with plotting .pngs with the rasterVis
	package
In-Reply-To: <CAMn_rTZ_nQGLh7tXvFnVm=RhEvs3NXXGVmnbc8cdC20qamKLCg@mail.gmail.com>
References: <CAMn_rTZ_nQGLh7tXvFnVm=RhEvs3NXXGVmnbc8cdC20qamKLCg@mail.gmail.com>
Message-ID: <20120130134137.36d4163f@OPL-EUITI>

Hi, 

I think you would find useful the "layout" argument of levelplot:

library(raster)
library(rasterVis)

r <- raster(nrows=10, ncols=10)
r <- setValues(r, 1:ncell(r))
s <- stack(r,r*2)
s2 <- stack(s, s, s)*rep(1:3, each=2)

trellis.device(pdf, file='test.pdf')
levelplot(s2, layout=c(2, 1))
dev.off()

By the way, if you use levelplot inside a for loop, you have to print
it:

for (i in 1:3){print(levelplot(s*i))}

Best,

Oscar.

-------------------
Oscar Perpi??n Lamigueiro
Dpto. Ingenier?a El?ctrica
EUITI-UPM

http://procomun.wordpress.com

-----------------------------------------
>hello all,
>I got a problem with the rasterVis package.
>I tried to do some plots in a loop and write every plot with Cairo to
>disc. But the picture in the file on the disc is totaly black or a
>white.
>
>Do somebody know how to make png/pdf levelplots in a loop?
>
>here is my test-script
># problem with RasterVis plots in loops
>#
>###############################################################################
>
>library(raster)
>library(Cairo)
>library(rasterVis)
>
># create RasterLayer / Stack
>r <- raster(nrows=10, ncols=10)
>r <- setValues(r, 1:ncell(r))
>s <- stack(r,r*2)
>
>
># single plot is done
>CairoPNG(width = 400, height = 400, filename="test.png")
>    levelplot(s)
>dev.off()
>
># plot in a loop: no plots are done!
>for(i in 1:3){
>    print(paste("Cairo loop",i))
>    levelplot(s*i)
>}
>
># plot in a loop with cairo: plots are black
>for(i in 1:3){
>    print(paste("Cairo loop",i))
>    CairoPNG(width = 400, height = 400, filename="test.png")
>        levelplot(s*i)
>    dev.off()
>}
>
>	[[alternative HTML version deleted]]


From Roger.Bivand at nhh.no  Mon Jan 30 16:18:21 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 30 Jan 2012 16:18:21 +0100 (CET)
Subject: [R-sig-Geo] Different result from sptransform() and ptransform()
In-Reply-To: <D92CC6C1-09F0-49DB-94B0-F2F2A178FE74@r-project.org>
References: <CAG4NReL7Gv6VAp=nYuNnn0ofOKmenGfLA5q3fAxrcxsnk8o95Q@mail.gmail.com>
	<4F2444AC.7010300@gwdg.de>
	<CAG4NReJsqZgtEVob3M5QitPLEtRo1voLpWJGXZVYBbMk3RFkRQ@mail.gmail.com>
	<alpine.LRH.2.02.1201291946140.32011@reclus.nhh.no>
	<CAG4NReLNe1J9t=XBUot3ZMVdtS8-4dRT3wDt2qBOd0LUAxEXbA@mail.gmail.com>
	<D92CC6C1-09F0-49DB-94B0-F2F2A178FE74@r-project.org>
Message-ID: <alpine.LRH.2.02.1201301608580.3089@reclus.nhh.no>

On Mon, 30 Jan 2012, Simon Urbanek wrote:

>
> On Jan 30, 2012, at 3:48 AM, Agustin Lobo wrote:
>
>> Roger,
>> While the explanation of the error is clear, I am actually not sure
>> about the practical consequences.
>> What I understand is that we must not use ptransform() by now (and use
>> spTransform() instead), and
>> that ptransform() will be fixed in the future. Am I right?
>>
>
> Roger's explanation is wrong - unlike project() there is no "degrees" 
> argument to so ptransform() expects radians, not degrees - see the 
> supplied examples. This is simply a user error.

Yes, given that the user reads the example on ?ptransform carefully, and 
sees that you are converting degrees to radians on the input for input 
geographical coordinates transforming to projected coordinates. From that 
the astute user might infer that you need to invert the conversion if the 
input coordinates were projected, and the output geographical, but the 
help page doesn't say this.

I'm not aware of any data source providing geographical coordinates with a 
radian metric. I would argue that since there is no established use case 
for the radian metric in geographical data, this is an implementation 
error, because neither input nor output correspond to general practice, 
and it is more like a trap for users than a user error.

I guess we agree to differ?

Best wishes,

Roger

>
> Cheers,
> Simon
>
>
>> Thanks
>>
>> Agus
>>
>>
>> 2012/1/29 Roger Bivand <Roger.Bivand at nhh.no>:
>>> On Sat, 28 Jan 2012, Agustin Lobo wrote:
>>>
>>>> Right, grid1km is the polygon object from whence cents comes from and
>>>> I copied the wrong line.
>>>> Sorry for the confusion.
>>>
>>>
>>> The confusion is in proj4 in the ptransform() function, as:
>>>
>>>
>>>> centslonlat<- spTransform(cents,CRS("+init=epsg:4326"))
>>>> coordinates(centslonlat)[1:3,]
>>>
>>>            X        Y
>>> [1,] 1.315311 42.23956
>>> [2,] 1.327326 42.24060
>>> [3,] 1.339342 42.24163
>>>>
>>>> ptransform(data = coordinates(cents),
>>>
>>>  src.proj = CRSargs(CRS("+init=epsg:3035")),
>>>  dst.proj = "+proj=longlat +ellps=WGS84 +datum=WGS84"
>>>  )[1:3,]*57.29577951308232
>>>         [,1]     [,2] [,3]
>>> [1,] 1.315311 42.23956    0
>>> [2,] 1.327326 42.24060    0
>>> [3,] 1.339342 42.24163    0
>>>
>>> ptransform() omits to test for geographical coordinates in the dst.proj=
>>> argument, and consequently does not multiply by RAD_TO_DEG. The correct code
>>> is in rgdal/src/projectit.cpp, from line 255. ptransform() is more recent
>>> than project() in proj4, so the fact that it isn't the same (either source
>>> or destination as longlat) got overlooked.
>>>
>>> Hope this clarifies,
>>>
>>> Roger
>>>
>>
>>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From tom.gottfried at tum.de  Mon Jan 30 16:39:06 2012
From: tom.gottfried at tum.de (Tom Gottfried)
Date: Mon, 30 Jan 2012 16:39:06 +0100
Subject: [R-sig-Geo] Coordination Transformation from Gauss Kruger to
 LongLat
In-Reply-To: <20120127114635.49640@gmx.net>
References: <20120127114635.49640@gmx.net>
Message-ID: <4F26B99A.9040202@tum.de>



Am 27.01.2012 12:46, schrieb Johannes Radinger:
> Dear R-Geo List!
>
> This is my first post on this list as I have a geographical task/problem
> to solve.
> I want to perform Species Distribution Models (SDM) and therefore
> I have the points of occurence of several Species.
> Unforunately all the environmental maps (climatic maps etc.) are in long-lat projection but my points are in the German Gauss Kr?ger System.
> So I have to transform the points correctly but I don't know how exactly that works.
>
> I compiled a sample script of what I did so far:
>
> Species<- c("A","B","C")
> X_GK<- c(3518665,3523424,3525506)
> Y_GK<- c(6052307,6040485,6042275)
>
> df<- data.frame(Species,X_GK,Y_GK) # That's how my occurence points look like
>
>
> #library(proj4)
>
> # reassemble coordinates as matrix (don't know it that is really necessary
> # or if I can work with the orig. dataframe)
>
> coord_GK<- cbind(df$X_GK, df$Y_GK)
> coord_longlat<- transform(coord_GK,'+proj=tmerc +ellps=?','+proj=latlong +ellps=sphere') # Here I don't know what I have to specify, or if that method is the one to use?

First time I get to know the proj4 package, so no idea whether you are using the correct function. 
But considering the proj4 strings I use "+proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0 
+ellps=bessel +units=m +no_defs +nadgrids=BETA2007.gsb +wktext" for Gauss-Kr?ger and "+proj=longlat 
+ellps=WGS84 +datum=WGS84 +no_defs" for WGS84. But beware that Gauss-Kr?ger is not unique. You need 
to no know the zone (+lon_0), the reference ellipsoid (mostly +ellps=bessel) and the datum in any of 
the ways you can specify it (i.e. +nadgrids=BETA2007.gsb. See 
http://crs.bkg.bund.de/crseu/crs/descrtrans/BeTA/de_dhdn2etrs_beta.php). GRASS knows the datum 
transformation parameters that seem to be best for the three zones used commonly in Germany. Maybe 
you find them this way.
In general, http://www.spatialreference.org/ seems to be a good source for proj4 strings of many 
reference systems.

regards,
Tom

> I am working on R.2.14.1 on Windows and Mac.
>
>
> Maybe someone of you can help me in this case as I am not a geographer nor a professional R user at all...
>
> Thanks!
>
> best regards,
> Johannes Radinger
>

-- 
Technische Universit?t M?nchen
Department f?r Pflanzenwissenschaften
Lehrstuhl f?r Gr?nlandlehre
Alte Akademie 12
85350 Freising / Germany
Phone: ++49 (0)8161 715324
Fax:   ++49 (0)8161 713243
email: tom.gottfried at wzw.tum.de
http://www.wzw.tum.de/gruenland


From moshersteven at gmail.com  Mon Jan 30 19:10:47 2012
From: moshersteven at gmail.com (steven mosher)
Date: Mon, 30 Jan 2012 10:10:47 -0800
Subject: [R-sig-Geo] Antw.: Antw: Re: HDF format
In-Reply-To: <a5d7f0$2pksue@ironport01-smtpauth.boku.ac.at>
References: <a5d7f0$2pksue@ironport01-smtpauth.boku.ac.at>
Message-ID: <CAFFLneRnrcXZ12=BRPHKX26XzbchS1L8-Bgi5fprAvau9gDqzQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120130/8f54c4b4/attachment.pl>

From babuawara at gmail.com  Mon Jan 30 19:14:03 2012
From: babuawara at gmail.com (Vikram Ranga)
Date: Mon, 30 Jan 2012 19:14:03 +0100
Subject: [R-sig-Geo] Antw.: Antw: Re: HDF format
In-Reply-To: <CAFFLneRnrcXZ12=BRPHKX26XzbchS1L8-Bgi5fprAvau9gDqzQ@mail.gmail.com>
References: <a5d7f0$2pksue@ironport01-smtpauth.boku.ac.at>
	<CAFFLneRnrcXZ12=BRPHKX26XzbchS1L8-Bgi5fprAvau9gDqzQ@mail.gmail.com>
Message-ID: <4F26DDEB.4060003@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120130/f0b4609d/attachment.pl>

From moshersteven at gmail.com  Mon Jan 30 19:18:52 2012
From: moshersteven at gmail.com (steven mosher)
Date: Mon, 30 Jan 2012 10:18:52 -0800
Subject: [R-sig-Geo] Antw.: Antw: Re: HDF format
In-Reply-To: <4F26DDEB.4060003@gmail.com>
References: <a5d7f0$2pksue@ironport01-smtpauth.boku.ac.at>
	<CAFFLneRnrcXZ12=BRPHKX26XzbchS1L8-Bgi5fprAvau9gDqzQ@mail.gmail.com>
	<4F26DDEB.4060003@gmail.com>
Message-ID: <CAFFLneSDR0JK_W=XkPi=mnvZaL6zt3-x6_7D=XFaG9QxoVZ6=A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120130/dde857fa/attachment.pl>

From moshersteven at gmail.com  Mon Jan 30 19:24:09 2012
From: moshersteven at gmail.com (steven mosher)
Date: Mon, 30 Jan 2012 10:24:09 -0800
Subject: [R-sig-Geo] Antw.: Antw: Re: HDF format
In-Reply-To: <4F26DDEB.4060003@gmail.com>
References: <a5d7f0$2pksue@ironport01-smtpauth.boku.ac.at>
	<CAFFLneRnrcXZ12=BRPHKX26XzbchS1L8-Bgi5fprAvau9gDqzQ@mail.gmail.com>
	<4F26DDEB.4060003@gmail.com>
Message-ID: <CAFFLneRhdXycX-Sa84707B4cJXp1juS1cWqaz8A-Fbc2f2=gCQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120130/76a77a4c/attachment.pl>

From HodgessE at uhd.edu  Tue Jan 31 05:43:18 2012
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Mon, 30 Jan 2012 22:43:18 -0600
Subject: [R-sig-Geo] an R and ArcGIS question
Message-ID: <586A4828D7AAA04CA9B258C50A28DA200EC77845@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120130/b1bc1382/attachment.pl>

From adamhsparks at gmail.com  Tue Jan 31 06:53:07 2012
From: adamhsparks at gmail.com (Adam Sparks)
Date: Tue, 31 Jan 2012 13:53:07 +0800
Subject: [R-sig-Geo] an R and ArcGIS question
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA200EC77845@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA200EC77845@BALI.uhd.campus>
Message-ID: <CAJmQPwEG4uCMHynFo3O5GVfLqfatw0=D9YY5CSTvDNrp4b9pSA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120131/038b4ccf/attachment.pl>

From ashton at msu.edu  Tue Jan 31 08:09:18 2012
From: ashton at msu.edu (ashton at msu.edu)
Date: Tue, 31 Jan 2012 02:09:18 -0500
Subject: [R-sig-Geo] an R and ArcGIS question
In-Reply-To: <586A4828D7AAA04CA9B258C50A28DA200EC77845@BALI.uhd.campus>
References: <586A4828D7AAA04CA9B258C50A28DA200EC77845@BALI.uhd.campus>
Message-ID: <20120131020918.16592ptd96ipoom6@mail.msu.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120131/09ddbee2/attachment.pl>

From l.cattarino at uq.edu.au  Tue Jan 31 09:37:48 2012
From: l.cattarino at uq.edu.au (Lorenzo Cattarino)
Date: Tue, 31 Jan 2012 18:37:48 +1000
Subject: [R-sig-Geo] finding coordinates of points on a dilation contour
Message-ID: <2869E75AAA158C4E936333A119467ADD2733043B66@UQEXMB06.soe.uq.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120131/727a2083/attachment.pl>

From mathieu.rajerison at gmail.com  Tue Jan 31 15:21:31 2012
From: mathieu.rajerison at gmail.com (Mathieu Rajerison)
Date: Tue, 31 Jan 2012 15:21:31 +0100
Subject: [R-sig-Geo] finding coordinates of points on a dilation contour
In-Reply-To: <2869E75AAA158C4E936333A119467ADD2733043B66@UQEXMB06.soe.uq.edu.au>
References: <2869E75AAA158C4E936333A119467ADD2733043B66@UQEXMB06.soe.uq.edu.au>
Message-ID: <CAGfc75=XkxeBZQCQPwwHkH80QtDrX6JZTt91SXGXAB26d4F9rw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120131/eba41b52/attachment.pl>

From dimitri.liakhovitski at gmail.com  Tue Jan 31 16:57:50 2012
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Tue, 31 Jan 2012 10:57:50 -0500
Subject: [R-sig-Geo] Overimposing one map in ssplot onto another
In-Reply-To: <alpine.LRH.2.02.1201281326030.26205@reclus.nhh.no>
References: <CAN2xGJa8vOBds05OZwYCmj1m=4qNi9e+r71z5emsKavwK8qyHQ@mail.gmail.com>
	<CAN2xGJYn0W=Nys-7NzDtRceJ=dSYWsGj4uM3V=XyVsSecAD9sA@mail.gmail.com>
	<alpine.LRH.2.02.1201281326030.26205@reclus.nhh.no>
Message-ID: <CAN2xGJaZPr8gVAFDa_BSkLXDfURC01ChnreYAz4u0brZ1nj3fA@mail.gmail.com>

Thank you so much, Roger! It is working!

### A. Reading in Canada data at the province and then at the county level:
library(raster)
getData('ISO3')  # Canada's code is "CAN"
can1<-getData('GADM', country="CAN", level=1)
can2<-getData('GADM', country="CAN", level=2)

### B. Creating Map2- with borders between colored counties:
# Creating an (artificial) grouping of Canadian admin units:
nrofunits<-length(can2$NAME_2)
groups<-c(rep(1:6,(nrofunits %/%
6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
# adding values (grouping values) to "data":
can2 at data[["groups"]]<-groups
can2 at data$groups<-as.factor(can2 at data$groups)
classcolors <- rainbow(6)
spl <- list("sp.lines", as(can1, "SpatialLines"), lwd=0.4)
spplot(can2,zcol="groups",col.regions=classcolors,colorkey =
FALSE,lwd=.4,col='white',
 par.settings = list(axis.line = list(col='transparent')),sp.layout=spl)

Dimitri

On Sat, Jan 28, 2012 at 7:29 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> On Fri, 27 Jan 2012, Dimitri Liakhovitski wrote:
>
>> Hello!
>>
>> I have 2 maps - both created in ssplot and both identical in terms of
>> outline. Is there any way to superimpose Map1 (which has black borders
>> between Canadian provinces) onto Map2 (which is also a map of Canada)?
>> Thanks a lot for your hints!
>
>
> See the sp.layout= argument to spplot() - here:
>
> spl <- list("sp.lines", as(can1, "SpatialLines"), lwd=0.4)
>
> should give what you need, as lines plot over polygons, but not the
> opposite.
>
> Roger
>
>
>> Dimitri
>>
>> ### A. Reading in Canada data at the province and then at the county
>> level:
>> library(raster)
>> getData('ISO3') ?# Canada's code is "CAN"
>> can1<-getData('GADM', country="CAN", level=1)
>> can2<-getData('GADM', country="CAN", level=2)
>>
>> ### B. Creating Map1- with borders between provinces:
>> can1 at data[["groups"]]<-1 ? # want all provinces to have the same
>> color, but ideally I'd like the whole map to be transparent.
>> can1 at data$groups<-as.factor(can1 at data$groups)
>> spplot(can1,zcol="groups",col.regions="white",colorkey = FALSE,
>> lwd=.4, ?# col='white',
>> ?par.settings = list(axis.line = list(col='transparent')))
>>
>> ### C. Creating Map2- with borders between colored counties:
>> # Creating an (artificial) grouping of Canadian admin units:
>> nrofunits<-length(can2$NAME_2)
>> groups<-c(rep(1:6,(nrofunits %/%
>> 6)),rep(1,5))[order(c(rep(1:6,(nrofunits %/% 6)),rep(1,5)))]
>> # adding values (grouping values) to "data":
>> can2 at data[["groups"]]<-groups
>> can2 at data$groups<-as.factor(can2 at data$groups)
>> classcolors <- rainbow(6)
>> spplot(can2,zcol="groups",col.regions=classcolors,colorkey =
>> FALSE,lwd=.4,col='white',
>> ?par.settings = list(axis.line = list(col='transparent')))
>>
>> --
>> Dimitri Liakhovitski
>> marketfusionanalytics.com
>>
>>
>>
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no



-- 
Dimitri Liakhovitski
marketfusionanalytics.com


From dimitri.liakhovitski at gmail.com  Tue Jan 31 17:02:01 2012
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Tue, 31 Jan 2012 11:02:01 -0500
Subject: [R-sig-Geo] Reducing the size of the R-produced maps while saving
Message-ID: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>

Dear map-gurus,

I am creating some country maps using spplot from library(raster).
Once I've created a map, I save it as an .emf file. .emf format is
important for me because I can have transparent background.
However, once the map is saved, I am getting a huge .emf file (e.g., 74 MB).
Is there any way to save it in a smaller size?

Thanks a lot!

-- 
Dimitri Liakhovitski
marketfusionanalytics.com


From edzer.pebesma at uni-muenster.de  Tue Jan 31 17:09:24 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 31 Jan 2012 17:09:24 +0100
Subject: [R-sig-Geo] Reducing the size of the R-produced maps while
	saving
In-Reply-To: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
References: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
Message-ID: <4F281234.6090607@uni-muenster.de>



On 01/31/2012 05:02 PM, Dimitri Liakhovitski wrote:
> Dear map-gurus,
> 
> I am creating some country maps using spplot from library(raster).
> Once I've created a map, I save it as an .emf file. .emf format is
> important for me because I can have transparent background.
> However, once the map is saved, I am getting a huge .emf file (e.g., 74 MB).
> Is there any way to save it in a smaller size?
>

The usual advice is to use a bitmap format, e.g. png, which supports
transparency, and with sufficient pixel dimensions.

See ?png and do read the Details section.
-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From rrasterr at gmail.com  Tue Jan 31 17:35:40 2012
From: rrasterr at gmail.com (Ana)
Date: Tue, 31 Jan 2012 17:35:40 +0100
Subject: [R-sig-Geo] patch geometry
Message-ID: <CAErHZW0=9vWqfNWf9RY+yhobm4k1Hm6CAs9cu3L=RRMBpOiV_g@mail.gmail.com>

Hi!

I am looking for a package that can give me a patch geometry (mean
size, standard deviation, ...) from a land use/cover dataset in raster
format, in R.
Similar to what FRAGTSAT does.

I've found a while ago a post in this forum concerning this same
request, however I am not able to find it again or to remember the
name of the package recommended.

Can someone help me out?

Many thanks !!


From satish.regonda at gmail.com  Tue Jan 31 18:32:22 2012
From: satish.regonda at gmail.com (satishr)
Date: Tue, 31 Jan 2012 09:32:22 -0800 (PST)
Subject: [R-sig-Geo] Unable to apply 'gIntersection' successfully
Message-ID: <1328031142116-7240529.post@n2.nabble.com>

Hi, I am trying to calculate fraction of a polygon that is intersected by
another polygon. I have data in two shape files; the first file corresponds
to a rectangular grid with uniform intervals whereas the second file
corresponds to US climate divisions, which are polygons. The script worked
fine expect for one ploygon; please see the below message. It looks like
coordinates of a polygon are corrupted but I am not sure whether it is the
cause and if so how to fix it. Any feedback is greatly appreciated. Data
sets and excerpts of my script are below mentioned.
Thanks,
Satish


library(rgdal); library(rgeos)

grid=readOGR("C:/Temp","Gaussian_Poylgon_ExtendedCONUS")

climagdiv=readOGR("C:/Temp","US102ClimateDivisions")

iclimdiv=45

print(paste("Climate Division ",iclimdiv,sep=""))

int = gIntersects(climagdiv[iclimdiv,],grid,byid=TRUE)

vec = vector(mode="list", length=dim(int)[2]) 

for (i in seq(along=vec)) vec[[i]] =
try(gIntersection(climagdiv[iclimdiv,],grid[int[,i],], byid=TRUE))

Error in RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, "rgeos_intersection")
: 
  TopologyException: found non-noded intersection between LINESTRING
(-91.043 32.5763, -90.964 32.5763) and LINESTRING (-90.964 32.5763, -91.035
32.5763) at -90.964 32.5763

Data sets:

1. Rectangular Grid 

http://r-sig-geo.2731867.n2.nabble.com/file/n7240529/GaussianPolygonExtendedCONUS.zip
GaussianPolygonExtendedCONUS.zip 

2. US 102 climate divisions 

http://r-sig-geo.2731867.n2.nabble.com/file/n7240529/US102ClimateDivisions.zip
US102ClimateDivisions.zip 


--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Unable-to-apply-gIntersection-successfully-tp7240529p7240529.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


From qbaszym at tlen.pl  Tue Jan 31 18:36:40 2012
From: qbaszym at tlen.pl (Jakub Szymkowiak)
Date: Tue, 31 Jan 2012 18:36:40 +0100
Subject: [R-sig-Geo] patch geometry
In-Reply-To: <CAErHZW0=9vWqfNWf9RY+yhobm4k1Hm6CAs9cu3L=RRMBpOiV_g@mail.gmail.com>
References: <CAErHZW0=9vWqfNWf9RY+yhobm4k1Hm6CAs9cu3L=RRMBpOiV_g@mail.gmail.com>
Message-ID: <2872CC592CD146DBB7653A4052399C32@komp>

Hi,

I know, that R is a fantastic and powerful tool for many aspects of 
analysis, and so on, but..
I realy don't understand, why many people want to use it, as it will be a 
typical GIS software.
There are so many GIS software, which are often much more user-friendly, 
simply to use, and simply better..
Try for example Quantum GIS. It's easier tu use than ArcGIS, but I recommend 
also to learn Arc if You often work in spatial analysis - it's amazing 
software.
Q-GIS is under GNU license, is very user-friendly and have many advantages 
which make it better than R in simply spatial analysis.


Regards,
Jacob







-----Oryginalna wiadomo??----- 
From: Ana
Sent: Tuesday, January 31, 2012 5:35 PM
To: r-sig-geo at r-project.org
Subject: [R-sig-Geo] patch geometry

Hi!

I am looking for a package that can give me a patch geometry (mean
size, standard deviation, ...) from a land use/cover dataset in raster
format, in R.
Similar to what FRAGTSAT does.

I've found a while ago a post in this forum concerning this same
request, however I am not able to find it again or to remember the
name of the package recommended.

Can someone help me out?

Many thanks !!

_______________________________________________
R-sig-Geo mailing list
R-sig-Geo at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From rrasterr at gmail.com  Tue Jan 31 18:44:57 2012
From: rrasterr at gmail.com (Ana)
Date: Tue, 31 Jan 2012 18:44:57 +0100
Subject: [R-sig-Geo] patch geometry
In-Reply-To: <2872CC592CD146DBB7653A4052399C32@komp>
References: <CAErHZW0=9vWqfNWf9RY+yhobm4k1Hm6CAs9cu3L=RRMBpOiV_g@mail.gmail.com>
	<2872CC592CD146DBB7653A4052399C32@komp>
Message-ID: <CAErHZW2gf5QJd-ioO_geZ9yWBFMTh1yhiQ-rDSTWyCad92M=Jg@mail.gmail.com>

I actually agree with you, but I was looking for an option for FRAGSTAT.
My apologies for FRAGSTAT fans, but its a nightmare to use it.

Quantum GIS can work with GRASS add-on.. but maybe a new GIS user will
find it also hard to use it.

If you know of any stand alone tool or simple add-on tool for arcgis
that would do the job were people just have to select input data and
type of patch analysis, i/we would appreciate the help.



On Tue, Jan 31, 2012 at 6:36 PM, Jakub Szymkowiak <qbaszym at tlen.pl> wrote:
> Hi,
>
> I know, that R is a fantastic and powerful tool for many aspects of
> analysis, and so on, but..
> I realy don't understand, why many people want to use it, as it will be a
> typical GIS software.
> There are so many GIS software, which are often much more user-friendly,
> simply to use, and simply better..
> Try for example Quantum GIS. It's easier tu use than ArcGIS, but I recommend
> also to learn Arc if You often work in spatial analysis - it's amazing
> software.
> Q-GIS is under GNU license, is very user-friendly and have many advantages
> which make it better than R in simply spatial analysis.
>
>
> Regards,
> Jacob
>
>
>
>
>
>
>
> -----Oryginalna wiadomo??----- From: Ana
> Sent: Tuesday, January 31, 2012 5:35 PM
> To: r-sig-geo at r-project.org
> Subject: [R-sig-Geo] patch geometry
>
>
> Hi!
>
> I am looking for a package that can give me a patch geometry (mean
> size, standard deviation, ...) from a land use/cover dataset in raster
> format, in R.
> Similar to what FRAGTSAT does.
>
> I've found a while ago a post in this forum concerning this same
> request, however I am not able to find it again or to remember the
> name of the package recommended.
>
> Can someone help me out?
>
> Many thanks !!
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From lyndon.estes at gmail.com  Tue Jan 31 18:58:31 2012
From: lyndon.estes at gmail.com (Lyndon Estes)
Date: Tue, 31 Jan 2012 12:58:31 -0500
Subject: [R-sig-Geo] patch geometry
In-Reply-To: <2872CC592CD146DBB7653A4052399C32@komp>
References: <CAErHZW0=9vWqfNWf9RY+yhobm4k1Hm6CAs9cu3L=RRMBpOiV_g@mail.gmail.com>
	<2872CC592CD146DBB7653A4052399C32@komp>
Message-ID: <CALuVVaah1C82sdNcdOwn6hQMNVWDziFBUKSY3cEVr9yavaiLaQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120131/2de16a6f/attachment.pl>

From edzer.pebesma at uni-muenster.de  Tue Jan 31 19:18:38 2012
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 31 Jan 2012 19:18:38 +0100
Subject: [R-sig-Geo] Unable to apply 'gIntersection' successfully
In-Reply-To: <1328031142116-7240529.post@n2.nabble.com>
References: <1328031142116-7240529.post@n2.nabble.com>
Message-ID: <4F28307E.4050905@uni-muenster.de>

Maybe this helps:

> y = readOGR("US102ClimateDivisions", "US102ClimateDivisions")
OGR data source with driver: ESRI Shapefile
Source: "US102ClimateDivisions", layer: "US102ClimateDivisions"
with 102 features and 5 fields
Feature type: wkbPolygon with 2 dimensions
> gIsValid(y)
[1] FALSE
Warning message:
In RGEOSUnaryPredFunc(spgeom, byid, "rgeos_isvalid") :
  Ring Self-intersection at or near point -121.807 44.7908
> which(!gIsValid(y, byid=TRUE))
 21  28  44  98 100
 22  29  45  99 101
Warning messages:
1: In RGEOSUnaryPredFunc(spgeom, byid, "rgeos_isvalid") :
  Ring Self-intersection at or near point -121.807 44.7908
2: In RGEOSUnaryPredFunc(spgeom, byid, "rgeos_isvalid") :
  Self-intersection at or near point -118.222 46.0004
3: In RGEOSUnaryPredFunc(spgeom, byid, "rgeos_isvalid") :
  Self-intersection at or near point -91.035 32.5763
4: In RGEOSUnaryPredFunc(spgeom, byid, "rgeos_isvalid") :
  Ring Self-intersection at or near point -73.834 40.5904
5: In RGEOSUnaryPredFunc(spgeom, byid, "rgeos_isvalid") :
  Ring Self-intersection at or near point -69.3086 43.9069


On 01/31/2012 06:32 PM, satishr wrote:
> Hi, I am trying to calculate fraction of a polygon that is intersected by
> another polygon. I have data in two shape files; the first file corresponds
> to a rectangular grid with uniform intervals whereas the second file
> corresponds to US climate divisions, which are polygons. The script worked
> fine expect for one ploygon; please see the below message. It looks like
> coordinates of a polygon are corrupted but I am not sure whether it is the
> cause and if so how to fix it. Any feedback is greatly appreciated. Data
> sets and excerpts of my script are below mentioned.
> Thanks,
> Satish
> 
> 
> library(rgdal); library(rgeos)
> 
> grid=readOGR("C:/Temp","Gaussian_Poylgon_ExtendedCONUS")
> 
> climagdiv=readOGR("C:/Temp","US102ClimateDivisions")
> 
> iclimdiv=45
> 
> print(paste("Climate Division ",iclimdiv,sep=""))
> 
> int = gIntersects(climagdiv[iclimdiv,],grid,byid=TRUE)
> 
> vec = vector(mode="list", length=dim(int)[2]) 
> 
> for (i in seq(along=vec)) vec[[i]] =
> try(gIntersection(climagdiv[iclimdiv,],grid[int[,i],], byid=TRUE))
> 
> Error in RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, "rgeos_intersection")
> : 
>   TopologyException: found non-noded intersection between LINESTRING
> (-91.043 32.5763, -90.964 32.5763) and LINESTRING (-90.964 32.5763, -91.035
> 32.5763) at -90.964 32.5763
> 
> Data sets:
> 
> 1. Rectangular Grid 
> 
> http://r-sig-geo.2731867.n2.nabble.com/file/n7240529/GaussianPolygonExtendedCONUS.zip
> GaussianPolygonExtendedCONUS.zip 
> 
> 2. US 102 climate divisions 
> 
> http://r-sig-geo.2731867.n2.nabble.com/file/n7240529/US102ClimateDivisions.zip
> US102ClimateDivisions.zip 
> 
> 
> --
> View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Unable-to-apply-gIntersection-successfully-tp7240529p7240529.html
> Sent from the R-sig-geo mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo

-- 
Edzer Pebesma
Institute for Geoinformatics (ifgi), University of M?nster
Weseler Stra?e 253, 48151 M?nster, Germany. Phone: +49 251
8333081, Fax: +49 251 8339763  http://ifgi.uni-muenster.de
http://www.52north.org/geostatistics      e.pebesma at wwu.de


From pgalpern at gmail.com  Tue Jan 31 19:34:38 2012
From: pgalpern at gmail.com (pgalpern)
Date: Tue, 31 Jan 2012 12:34:38 -0600
Subject: [R-sig-Geo] patch geometry
In-Reply-To: <4F2833D1.8040100@gmail.com>
References: <4F2833D1.8040100@gmail.com>
Message-ID: <4F28343E.2050107@gmail.com>


There is a very alpha package called landscape that provides a front-end
to the FRAGSTATS code in R (http://landscape.r-forge.r-project.org/).

If you are looking for a simpler approach, consider the raster package.
I have found that functions clump() and zonal() together can do a lot of
this work.

For example:

library(raster)
## Create dummy raster for illustration
r<- raster(nrow=50, ncol=50)

## Fill randomly with integers from 0 to 9
r[]<- trunc(runif(2500)*10)

## Find patches (defined as contiguous cells of class 1)
patch<- clump(r==1)
plot(patch)

## Find the number of raster cells in each patch
## Useful if cells are of equal area
patchCells<- zonal(r, patch, "sum")

## Find the area of raster cells in each patch
patchArea<- zonal(area(r), patch, "sum")

-- 
Paul Galpern, PhD Candidate
Natural Resources Institute
70 Dysart Road
University of Manitoba
Winnipeg, Manitoba, Canada R3T 2M6
http://borealscape.ca



On 31/01/2012 10:35 AM, Ana wrote:
>  Hi!
>
>  I am looking for a package that can give me a patch geometry (mean
>  size, standard deviation, ...) from a land use/cover dataset in raster
>  format, in R.
>  Similar to what FRAGTSAT does.
>
>  I've found a while ago a post in this forum concerning this same
>  request, however I am not able to find it again or to remember the
>  name of the package recommended.
>
>  Can someone help me out?
>
>  Many thanks !!
>
>  _______________________________________________
>  R-sig-Geo mailing list
>  R-sig-Geo at r-project.org
>  https://stat.ethz.ch/mailman/listinfo/r-sig-geo


From pgonzalez at ebd.csic.es  Tue Jan 31 20:22:25 2012
From: pgonzalez at ebd.csic.es (Pablo Gonzalez)
Date: Tue, 31 Jan 2012 20:22:25 +0100
Subject: [R-sig-Geo] Using Spatial Eigenvector Mapping for Negative Binomial
	GLM
Message-ID: <CAC+kXa3CyXsA1iyQrmpAh8GQLM02v=j42O77VG7vrPD3tGZ8sg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20120131/caafff6d/attachment.pl>

From Roger.Bivand at nhh.no  Tue Jan 31 21:59:20 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 31 Jan 2012 21:59:20 +0100 (CET)
Subject: [R-sig-Geo] Using Spatial Eigenvector Mapping for Negative
 Binomial GLM
In-Reply-To: <CAC+kXa3CyXsA1iyQrmpAh8GQLM02v=j42O77VG7vrPD3tGZ8sg@mail.gmail.com>
References: <CAC+kXa3CyXsA1iyQrmpAh8GQLM02v=j42O77VG7vrPD3tGZ8sg@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1201312152150.9563@reclus.nhh.no>

On Tue, 31 Jan 2012, Pablo Gonzalez wrote:

> Dear all,
>
> I am trying to modify the function ME() of the package spdep to reduce the
> spatial autocorrelation problem of a negative binomial model by Spatial
> Eigenvector Mapping (Dray et al 2006, Dormann et al 2007). I am having
> problems to use the eigenvectors created because they include complex
> numbers and the negative binomial function, glm.nb(), doesn't allow such
> numbers.

The usual reason for complex eigenvectors from weights matrices is that 
they are asymmetric. In your editing of ME(), did you remove the line 
making sure that W is symmetric:

listw <- listw2U(listw) # make weights symmetric

Try doing bits manually outside your draft function. If:

 	Wmat <- listw2mat(listw) # convert to full matrix form
 	Cent <- diag(n) - (matrix(1, n, n)/n)
 	eV <- eigen(Cent %*% Wmat %*% Cent, EISPACK=TRUE)$vectors

eV are complex, something odd is going on, and maybe the EISPACK=TRUE is 
an issue. Are all the Im(eV) zero?

Roger

>
> Honestly, I don't know why the function eigen() create eigenvectors with
> complex numbers. It might be a problem of the spatial weight matrix which
> includes points without neighbours or the complexity itself of the matrix.
> When I use the function ME() in its original form for a glm with poisson
> family it works because the function glm() seems to accept complex
> predictors.
>
> Could be possible to force only real eigenvectors or to allow complex
> predictors in NB glms?? I appreciate any help. Thank you very much in
> advance!
>
> If it helps, I copy bellow the modified function:
>
> ME.nb <- function (formula, data, listw, weights,alpha = 0.05, nsim = 99,
> verbose = TRUE, stdev = FALSE)
> {
> #Moran's Index
>    MoraneI.boot <- function(var, i, ...) {
>        var <- var[i]
>        I <- (n/S0) * (crossprod(sW %*% var, var))/cpvar
>        return(c(as(I, "matrix")))
>    }
> #Test Moran's Index
>    MIR_a <- function(resids, sW, n, cpvar, S0, nsim, stdev = TRUE) {
>        boot1 <- boot(resids, statistic = MoraneI.boot, R = nsim,
>            sim = "permutation", sW = sW, n = n, S0 = S0, cpvar = cpvar)
>        mi <- boot1$t0
>        if (stdev) {
>            zi <- (boot1$t0 - mean(boot1$t))/sqrt(var(boot1$t))
>            pri <- pnorm(abs(zi), lower.tail = FALSE)
>        }
>        else {
>            zi <- NA
>            pri <- (sum(boot1$t >= mi) + 1)/(nsim + 1)
>        }
>        res <- list(estimate = mi, statistic = zi, p.value = pri)
>        res
>    }
>    if (is.null(verbose))
>        verbose <- get("verbose", env = .spdepOptions)
>    stopifnot(is.logical(verbose))
>    listw <- listw2U(listw)
>    sW <- as_dgRMatrix_listw(listw)
>    sW <- as(sW, "CsparseMatrix")
>    Wmat <- listw2mat(listw)
>    n <- ncol(Wmat)
>    S0 <- Szero(listw)
>
>    if (missing(data))
>        data <- environment(formula)
>    mf <- match.call(expand.dots = FALSE)
>    m <- match(c("formula", "data", "weights", "offset"), names(mf),0)
>    mf <- mf[c(1, m)]
>    mf$drop.unused.levels <- TRUE
>    mf[[1]] <- as.name("model.frame")
>    mf <- eval(mf, parent.frame())
>    mt <- attr(mf, "terms")
>    Y <- model.extract(mf, "response")
>    X <- model.matrix(mt, mf)
>    weights <- model.weights(mf)
>    if (!is.null(weights) && any(weights < 0))
>        stop("negative weights not allowed")
>    offset <- model.offset(mf)
>    if (!is.null(offset) && length(offset) != NROW(Y))
>        stop("number of offsets should equal number of observations")
> #Fit model
>    glm_fit <- glm.nb(formula,data=data)
>    glm_res <- glm_fit$y - glm_fit$fitted.values
>    cpvar <- crossprod(glm_res)
>    mRES <- MIR_a(glm_res, sW = sW, n = n, cpvar = cpvar, S0 = S0,
>        nsim = nsim, stdev = stdev)
>    pIZ <- mRES$p.value
>    print(pIZ)
>    tres <- c(NA, mRES$statistic, pIZ)
>    if (pIZ > alpha)
>        stop("base correlation larger than alpha")
>    Cent <- diag(n) - (matrix(1, n, n)/n)
> #Create eigenvectors of the Spatial Weights matrix
>    eV <- eigen(Cent %*% Wmat %*% Cent, EISPACK = TRUE)$vectors
>    str(eV)
>    rm(Cent, Wmat)
>    iZ <- numeric(n)
> # Select eigenvectors that reduce Moran's Index
>    for (i in 1:n) {
>        iX <- eV[,i]
>        i_glm <- update(glm_fit, .~.+ iX)
>        glm_res <- i_glm$y - i_glm$fitted.values
>        cpvar <- crossprod(glm_res)
>        iZ[i] <- c(as((n/S0) * (crossprod(sW %*% glm_res,
> glm_res))/cpvar,"matrix"))
>    }
>    min_iZ <- which.min(abs(iZ))
>   X <- eV[, min_iZ]
>    glm_fit <- update(glm_fit, .~.+ X)
>    glm_res <- glm_fit$y - glm_fit$fitted.values
>    cpvar <- crossprod(glm_res)
>    mRES <- MIR_a(glm_res, sW = sW, n = n, cpvar = cpvar, S0 = S0,
>        nsim = nsim, stdev = stdev)
>    pIZ <- mRES$p.value
>    used <- rep(FALSE, n)
>    used[min_iZ] <- TRUE
>    min_v <- min_iZ
>    if (verbose)
>        cat("eV[,", min_iZ, "], I: ", mRES$estimate, " ZI: ",
>            mRES$statistic, ", pr(ZI): ", pIZ, "\n", sep = "")
>    tres <- rbind(tres, c(min_iZ, mRES$statistic, pIZ))
>    # Try rest eigenvectors till Moran's index is not significant
>    while (pIZ <= alpha) {
>        for (i in 1:n) {
>            if (!used[i]) {
>                iX <- eV[,i]
>                i_glm <- update(glm_fit, .~.+ iX)
>                 glm_res <- i_glm$y - i_glm$fitted.values
>                cpvar <- crossprod(glm_res)
>                iZ[i] <- c(as((n/S0) * (crossprod(sW %*% glm_res,
>                  glm_res))/cpvar, "matrix"))
>            }
>            else iZ[i] <- NA
>        }
>        min_iZ <- which.min(abs(iZ))
>    X <- eV[, min_iZ]
>      glm_fit <- update(glm_fit, .~.+ X)
>        glm_res <- glm_fit$y - glm_fit$fitted.values
>        cpvar <- crossprod(glm_res)
>        mRES <- MIR_a(glm_res, sW = sW, n = n, cpvar = cpvar,
>            S0 = S0, nsim = nsim, stdev = stdev)
>        pIZ <- mRES$p.value
>        used[min_iZ] <- TRUE
>        min_v <- c(min_v, min_iZ)
>        if (verbose)
>            cat("eV[,", min_iZ, "], I: ", mRES$estimate, " ZI: ",
>                mRES$statistic, ", pr(ZI): ", pIZ, "\n", sep = "")
>        tres <- rbind(tres, c(min_iZ, mRES$statistic, pIZ))
>    }
>    sv <- eV[, min_v, drop = FALSE]
>    colnames(sv) <- paste("vec", min_v, sep = "")
>    colnames(tres) <- c("Eigenvector", "ZI", "pr(ZI)")
>    rownames(tres) <- 0:(nrow(tres) - 1)
>    res <- list(selection = tres, vectors = sv)
>    class(res) <- "ME_res"
>    res
> }
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Tue Jan 31 22:05:54 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 31 Jan 2012 22:05:54 +0100 (CET)
Subject: [R-sig-Geo] Reducing the size of the R-produced maps while
 saving
In-Reply-To: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
References: <CAN2xGJZMVJbpMqebYVkRXHazAgEoN-PEjKiuimM66yA1_h2h6w@mail.gmail.com>
Message-ID: <alpine.LRH.2.02.1201312202250.9563@reclus.nhh.no>

On Tue, 31 Jan 2012, Dimitri Liakhovitski wrote:

> Dear map-gurus,
>
> I am creating some country maps using spplot from library(raster).
> Once I've created a map, I save it as an .emf file. .emf format is
> important for me because I can have transparent background.
> However, once the map is saved, I am getting a huge .emf file (e.g., 74 MB).
> Is there any way to save it in a smaller size?

If you have to use a vector output format, then you should simplify the 
input, which has extremely detailed coastlines but coarser resolution 
administrative boundaries. Maybe try gSimplify() in rgeos.

Roger

>
> Thanks a lot!
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From JObrien at ucdavis.edu  Tue Jan 31 22:14:27 2012
From: JObrien at ucdavis.edu (Obrien, Josh)
Date: Tue, 31 Jan 2012 13:14:27 -0800
Subject: [R-sig-Geo] Building Windows binary of rgdal package to include
	PGeo driver for reading ESRI personal geodatabases.
Message-ID: <52151386A57A5046BD5FD6CC131EF644010382B2@Postamt2.des.ucdavis.edu>

I am a long-time R user, currently working with a team of ArcGIS users. The GIS guys would like to be able pass me data in the form of ESRI personal geodatabases (*.mdb), but the OGR driver that reads such files (PGeo) is not included in the Windows rgdal binary. 

Roger Bivand's 2008 book (p 111) and the "README.windows" file located in rgdal's main directory both have the same advice for me. They tell me that "the R Windows binary rgdal package can be built against an FWTools binary, using VC++."

My questions are these:

1) What does it mean to "build against" an FWTools binary? I have installed FWTools on my machine, so is the only  additional requirement that I add the path to it (presumably something like "C:\Program Files\FWTools2.4.7\bin") to my Windows PATH environment variable? Do I need to give the compiler other directions to the DLLs it'll be looking to link in?

2) Do I really need to use VC++, or is there a way to do the compilation with gcc? If anyone here has done that, do you have any advice about particular flags I'll need? Otherwise, will I likely need to go buy some version of VC++?

3) Or is there some easier solution that I'm missing? Because we're packaging this up for use by others, I'd prefer not to have to do any of the conversions by hand using the FWTools binary, and the ArcGIS folks would strongly prefer not to pass me info in shapefiles, so those two are right now options of last resort.

Thank you,

Josh O'Brien


From satish.regonda at gmail.com  Tue Jan 31 23:40:12 2012
From: satish.regonda at gmail.com (satishr)
Date: Tue, 31 Jan 2012 14:40:12 -0800 (PST)
Subject: [R-sig-Geo] Unable to apply 'gIntersection' successfully
In-Reply-To: <4F28307E.4050905@uni-muenster.de>
References: <1328031142116-7240529.post@n2.nabble.com>
	<4F28307E.4050905@uni-muenster.de>
Message-ID: <1328049612951-7241456.post@n2.nabble.com>

Edzer, It helps. Thanks.
For the future audience reference, here is the solution that worked in this
situation  Thanks to Colin Rundel. 

 I calculated areas and compared with values after gBuffer application -
they are same for  all polygons except for two polygons for which values of
'area' differed on the order of 10^(-4). However, I found gBuffer resulted
one or two additional rings though. This is OK for my calculations purpose.

"
the US 102 climate divisions polygons are invalid as they have self
intersections. These self intersections cause geos to fail, you can see
which of the polygons in climagdiv are invalid using the following code:

gIsValid(climagdiv,reason=TRUE,byid=TRUE)

There is not a simple cure all for fixing this kind of geometry issue, but
in some cases using gBuffer with width=0 can fix things, which seems to be
the case here.

gIsValid(gBuffer(climagdiv,byid=TRUE,width=0),byid=TRUE)

reports all the polygons as being valid.

Fixing the climate divisions with

climagdiv = gBuffer(climagdiv,width=0,byid=TRUE) 

"

--
View this message in context: http://r-sig-geo.2731867.n2.nabble.com/Unable-to-apply-gIntersection-successfully-tp7240529p7241456.html
Sent from the R-sig-geo mailing list archive at Nabble.com.


